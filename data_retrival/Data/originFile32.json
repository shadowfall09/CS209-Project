{"items":[{"tags":["java","scala","shell"],"comments":[{"owner":{"account_id":9727861,"reputation":2565,"user_id":7214091,"display_name":"Gast&#243;n Schabas"},"score":4,"creation_date":1701116260,"post_id":77559666,"comment_id":136732969,"body_markdown":"it says that you are using `scala 2.10.5` (a really old version of scala) and `jdk 11`. it&#39;s not even listed in [scala jdk compatibility](https://docs.scala-lang.org/overviews/jdk-compatibility/overview.html). Not sure which version is being used in the tutorial, but scala `2.13.x` and `3.3.x` are the active ones today","body":"it says that you are using <code>scala 2.10.5</code> (a really old version of scala) and <code>jdk 11</code>. it&#39;s not even listed in <a href=\"https://docs.scala-lang.org/overviews/jdk-compatibility/overview.html\" rel=\"nofollow noreferrer\">scala jdk compatibility</a>. Not sure which version is being used in the tutorial, but scala <code>2.13.x</code> and <code>3.3.x</code> are the active ones today"},{"owner":{"account_id":20706372,"reputation":101,"user_id":15204150,"display_name":"liath"},"score":2,"creation_date":1701129862,"post_id":77559666,"comment_id":136734719,"body_markdown":"Using waybackmachine I found that JDK 11 requires minimum scala version of 2.10.7. If you or tutorial insist on using 2.10.5 you should try changing Java version. Sorry if this sounds pretentious but have you checked your PATH and JAVA_HOME?\n\nAlso since you&#39;re looking for simpler ways that will-just-work(tm) you could always just install IntelliJ Idea - it allows you to configure/download both JDK and Scala for a newly created project although I&#39;m not sure how this will fit with what tutorial wants you to do","body":"Using waybackmachine I found that JDK 11 requires minimum scala version of 2.10.7. If you or tutorial insist on using 2.10.5 you should try changing Java version. Sorry if this sounds pretentious but have you checked your PATH and JAVA_HOME?  Also since you&#39;re looking for simpler ways that will-just-work(tm) you could always just install IntelliJ Idea - it allows you to configure/download both JDK and Scala for a newly created project although I&#39;m not sure how this will fit with what tutorial wants you to do"},{"owner":{"account_id":338172,"reputation":634,"user_id":666886,"display_name":"philwalk"},"score":0,"creation_date":1701199313,"post_id":77559666,"comment_id":136745032,"body_markdown":"It would be helpful to see the exact command line you used to start your session.","body":"It would be helpful to see the exact command line you used to start your session."}],"owner":{"account_id":30007095,"reputation":1,"user_id":22995694,"display_name":"Andi0905"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":1,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1701115864,"creation_date":1701115864,"question_id":77559666,"body_markdown":"\r\n```\r\nWelcome to Scala version 2.10.5 (OpenJDK 64-Bit Server VM, Java 11.0.17).\r\nType in expressions to have them evaluated.\r\nType :help for more information.\r\n\r\nscala&gt; [init] error: error while loading package, Missing dependency &#39;object java.lang.Object in compiler mirror&#39;, required by C:\\PROGRA~2\\scala\\bin\\..\\lib\\scala-library.jar(scala/package.class)\r\n[init] error: error while loading package, Missing dependency &#39;object java.lang.Object in compiler mirror&#39;, required by C:\\PROGRA~2\\scala\\bin\\..\\lib\\scala-library.jar(scala/runtime/package.class)\r\n\r\nFailed to initialize compiler: object java.lang.Object in compiler mirror not found.\r\n** Note that as of 2.8 scala does not assume use of the java classpath.\r\n** For the old behavior pass -usejavacp to scala, or if using a Settings\r\n** object programatically, settings.usejavacp.value = true.\r\n\r\n\r\nFailed to initialize the REPL due to an unexpected error.\r\nThis is a bug, please, report it along with the error diagnostics printed below.\r\njava.lang.NullPointerException\r\n        at scala.tools.nsc.interpreter.ExprTyper$codeParser$.applyRule(ExprTyper.scala:24)\r\n        at scala.tools.nsc.interpreter.ExprTyper$codeParser$.stmts(ExprTyper.scala:35)\r\n        at scala.tools.nsc.interpreter.ExprTyper$$anonfun$parse$2.apply(ExprTyper.scala:43)\r\n        at scala.tools.nsc.interpreter.ExprTyper$$anonfun$parse$2.apply(ExprTyper.scala:42)\r\n        at scala.tools.nsc.reporters.Reporter.withIncompleteHandler(Reporter.scala:51)\r\n        at scala.tools.nsc.interpreter.ExprTyper$class.parse(ExprTyper.scala:42)\r\n        at scala.tools.nsc.interpreter.IMain$exprTyper$.parse(IMain.scala:1074)\r\n        at scala.tools.nsc.interpreter.IMain.parse(IMain.scala:1078)\r\n        at scala.tools.nsc.interpreter.IMain$$anonfun$showCodeIfDebugging$1.apply(IMain.scala:1168)\r\n        at scala.tools.nsc.interpreter.IMain$$anonfun$showCodeIfDebugging$1.apply(IMain.scala:1168)\r\n        at scala.tools.nsc.interpreter.IMain.beSilentDuring(IMain.scala:238)\r\n        at scala.tools.nsc.interpreter.IMain.showCodeIfDebugging(IMain.scala:1168)\r\n        at scala.tools.nsc.interpreter.IMain$ReadEvalPrint.compileAndSaveRun(IMain.scala:800)\r\n        at scala.tools.nsc.interpreter.IMain$ReadEvalPrint.compile(IMain.scala:761)\r\n        at scala.tools.nsc.interpreter.IMain.bind(IMain.scala:618)\r\n        at scala.tools.nsc.interpreter.IMain.bind(IMain.scala:661)\r\n        at scala.tools.nsc.interpreter.IMain$$anonfun$quietBind$1.apply(IMain.scala:660)\r\n        at scala.tools.nsc.interpreter.IMain$$anonfun$quietBind$1.apply(IMain.scala:660)\r\n        at scala.tools.nsc.interpreter.IMain.beQuietDuring(IMain.scala:232)\r\n        at scala.tools.nsc.interpreter.IMain.quietBind(IMain.scala:660)\r\n        at scala.tools.nsc.interpreter.ILoop$$anonfun$process$1$$anonfun$apply$mcZ$sp$2.apply$mcV$sp(ILoop.scala:853)\r\n        at scala.tools.nsc.interpreter.ILoopInit$class.runThunks(ILoopInit.scala:122)\r\n        at scala.tools.nsc.interpreter.ILoop.runThunks(ILoop.scala:42)\r\n        at scala.tools.nsc.interpreter.ILoopInit$class.postInitialization(ILoopInit.scala:95)\r\n        at scala.tools.nsc.interpreter.ILoop.postInitialization(ILoop.scala:42)\r\n        at scala.tools.nsc.interpreter.ILoopInit$$anonfun$createAsyncListener$1.apply$mcV$sp(ILoopInit.scala:63)\r\n        at scala.tools.nsc.interpreter.ILoopInit$$anonfun$createAsyncListener$1.apply(ILoopInit.scala:60)\r\n        at scala.tools.nsc.interpreter.ILoopInit$$anonfun$createAsyncListener$1.apply(ILoopInit.scala:60)\r\n        at scala.tools.nsc.io.package$$anon$3.call(package.scala:40)\r\n        at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\r\n        at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\r\n        at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\r\n        at java.base/java.lang.Thread.run(Thread.java:829)\r\n```\r\n\r\n\r\n\r\n\r\nI`m doing a Udemy course and tried to run Scala but it didn`t work.\r\nMaybe someone finds an solution and can help me.\r\nI installed Java 8 but it still didn`t run properly.\r\nIt tells me that I`m using Java 11 but I have no clue why?\r\nIs there a better and simpler way to install Scala that does work for sure?\r\nJust tell me","title":"Error try to run scala but it didn`t work","body":"<pre><code>Welcome to Scala version 2.10.5 (OpenJDK 64-Bit Server VM, Java 11.0.17).\nType in expressions to have them evaluated.\nType :help for more information.\n\nscala&gt; [init] error: error while loading package, Missing dependency 'object java.lang.Object in compiler mirror', required by C:\\PROGRA~2\\scala\\bin\\..\\lib\\scala-library.jar(scala/package.class)\n[init] error: error while loading package, Missing dependency 'object java.lang.Object in compiler mirror', required by C:\\PROGRA~2\\scala\\bin\\..\\lib\\scala-library.jar(scala/runtime/package.class)\n\nFailed to initialize compiler: object java.lang.Object in compiler mirror not found.\n** Note that as of 2.8 scala does not assume use of the java classpath.\n** For the old behavior pass -usejavacp to scala, or if using a Settings\n** object programatically, settings.usejavacp.value = true.\n\n\nFailed to initialize the REPL due to an unexpected error.\nThis is a bug, please, report it along with the error diagnostics printed below.\njava.lang.NullPointerException\n        at scala.tools.nsc.interpreter.ExprTyper$codeParser$.applyRule(ExprTyper.scala:24)\n        at scala.tools.nsc.interpreter.ExprTyper$codeParser$.stmts(ExprTyper.scala:35)\n        at scala.tools.nsc.interpreter.ExprTyper$$anonfun$parse$2.apply(ExprTyper.scala:43)\n        at scala.tools.nsc.interpreter.ExprTyper$$anonfun$parse$2.apply(ExprTyper.scala:42)\n        at scala.tools.nsc.reporters.Reporter.withIncompleteHandler(Reporter.scala:51)\n        at scala.tools.nsc.interpreter.ExprTyper$class.parse(ExprTyper.scala:42)\n        at scala.tools.nsc.interpreter.IMain$exprTyper$.parse(IMain.scala:1074)\n        at scala.tools.nsc.interpreter.IMain.parse(IMain.scala:1078)\n        at scala.tools.nsc.interpreter.IMain$$anonfun$showCodeIfDebugging$1.apply(IMain.scala:1168)\n        at scala.tools.nsc.interpreter.IMain$$anonfun$showCodeIfDebugging$1.apply(IMain.scala:1168)\n        at scala.tools.nsc.interpreter.IMain.beSilentDuring(IMain.scala:238)\n        at scala.tools.nsc.interpreter.IMain.showCodeIfDebugging(IMain.scala:1168)\n        at scala.tools.nsc.interpreter.IMain$ReadEvalPrint.compileAndSaveRun(IMain.scala:800)\n        at scala.tools.nsc.interpreter.IMain$ReadEvalPrint.compile(IMain.scala:761)\n        at scala.tools.nsc.interpreter.IMain.bind(IMain.scala:618)\n        at scala.tools.nsc.interpreter.IMain.bind(IMain.scala:661)\n        at scala.tools.nsc.interpreter.IMain$$anonfun$quietBind$1.apply(IMain.scala:660)\n        at scala.tools.nsc.interpreter.IMain$$anonfun$quietBind$1.apply(IMain.scala:660)\n        at scala.tools.nsc.interpreter.IMain.beQuietDuring(IMain.scala:232)\n        at scala.tools.nsc.interpreter.IMain.quietBind(IMain.scala:660)\n        at scala.tools.nsc.interpreter.ILoop$$anonfun$process$1$$anonfun$apply$mcZ$sp$2.apply$mcV$sp(ILoop.scala:853)\n        at scala.tools.nsc.interpreter.ILoopInit$class.runThunks(ILoopInit.scala:122)\n        at scala.tools.nsc.interpreter.ILoop.runThunks(ILoop.scala:42)\n        at scala.tools.nsc.interpreter.ILoopInit$class.postInitialization(ILoopInit.scala:95)\n        at scala.tools.nsc.interpreter.ILoop.postInitialization(ILoop.scala:42)\n        at scala.tools.nsc.interpreter.ILoopInit$$anonfun$createAsyncListener$1.apply$mcV$sp(ILoopInit.scala:63)\n        at scala.tools.nsc.interpreter.ILoopInit$$anonfun$createAsyncListener$1.apply(ILoopInit.scala:60)\n        at scala.tools.nsc.interpreter.ILoopInit$$anonfun$createAsyncListener$1.apply(ILoopInit.scala:60)\n        at scala.tools.nsc.io.package$$anon$3.call(package.scala:40)\n        at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\n        at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\n        at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\n        at java.base/java.lang.Thread.run(Thread.java:829)\n</code></pre>\n<p>I<code>m doing a Udemy course and tried to run Scala but it didn</code>t work.\nMaybe someone finds an solution and can help me.\nI installed Java 8 but it still didn<code>t run properly. It tells me that I</code>m using Java 11 but I have no clue why?\nIs there a better and simpler way to install Scala that does work for sure?\nJust tell me</p>\n"},{"tags":["java","android","android-service"],"comments":[{"owner":{"account_id":322981,"reputation":310744,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1701123195,"post_id":77559421,"comment_id":136733969,"body_markdown":"If your app is targeting Android specifically, add a mention in your title and/or body. That might significantly impact the answers.","body":"If your app is targeting Android specifically, add a mention in your title and/or body. That might significantly impact the answers."}],"answers":[{"tags":[],"owner":{"account_id":1790714,"reputation":91128,"user_id":1631193,"accept_rate":71,"display_name":"Gabe Sechan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701115685,"creation_date":1701115685,"answer_id":77559649,"question_id":77559421,"body_markdown":"First off-  Services and Threads have nothing to do with each other.  Services are not asyncronous in Android.  They&#39;re just contexts object that exist without being the foreground app of the phone.  They can create threads to do things, but there is no requirement for them to do so, they do not do so by default, and their lifecycle methods all run on the main thread.  So the question doesn&#39;t make sense to begin with.\r\n\r\nSecondly-  Android should never be used to run a server.  The entire OS is optimized around not allowing long lived background processes.  Non-foreground services are not allowed to run more than 2 minutes, and foreground processes can still be killed at any time for resources.  So a client-server architecture is generally a bad fit for Android as a whole.","title":"Should I implement different services for each thread or should I put all inside one service?","body":"<p>First off-  Services and Threads have nothing to do with each other.  Services are not asyncronous in Android.  They're just contexts object that exist without being the foreground app of the phone.  They can create threads to do things, but there is no requirement for them to do so, they do not do so by default, and their lifecycle methods all run on the main thread.  So the question doesn't make sense to begin with.</p>\n<p>Secondly-  Android should never be used to run a server.  The entire OS is optimized around not allowing long lived background processes.  Non-foreground services are not allowed to run more than 2 minutes, and foreground processes can still be killed at any time for resources.  So a client-server architecture is generally a bad fit for Android as a whole.</p>\n"}],"owner":{"account_id":14643421,"reputation":13,"user_id":22760557,"display_name":"juvor"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1701115685,"creation_date":1701112971,"question_id":77559421,"body_markdown":"My question if it is good practice to have multiple services for different types of threads.\r\nFor instance, let&#39;s say my app offers two type of features: to either host a server on the device or to simply be a client.\r\nSo, I would have ServerThread and ClientThread.\r\nI implemented two service ServerService and ClientService and run the relative thread.\r\nBy having two services of course I could potentially let the user to start both the server service and client service.\r\nOr would be preferable to basically have all one service and maybe with checkboxes on let the user decide what kind of content (thread) there will be inside that service.\r\n","title":"Should I implement different services for each thread or should I put all inside one service?","body":"<p>My question if it is good practice to have multiple services for different types of threads.\nFor instance, let's say my app offers two type of features: to either host a server on the device or to simply be a client.\nSo, I would have ServerThread and ClientThread.\nI implemented two service ServerService and ClientService and run the relative thread.\nBy having two services of course I could potentially let the user to start both the server service and client service.\nOr would be preferable to basically have all one service and maybe with checkboxes on let the user decide what kind of content (thread) there will be inside that service.</p>\n"},{"tags":["java","amazon-s3","bioinformatics","nextflow"],"comments":[{"owner":{"account_id":209503,"reputation":22790,"user_id":460557,"accept_rate":100,"display_name":"Jorge Campos"},"score":0,"creation_date":1701115611,"post_id":77559373,"comment_id":136732870,"body_markdown":"Only thing I can think of here is that the file names contains colon which are outside of S3 list of safe characters and needs to be handled in a special way: https://docs.aws.amazon.com/AmazonS3/latest/userguide/object-keys.html maybe nextflow (which im not familiar with) uses the same rules for file names","body":"Only thing I can think of here is that the file names contains colon which are outside of S3 list of safe characters and needs to be handled in a special way: <a href=\"https://docs.aws.amazon.com/AmazonS3/latest/userguide/object-keys.html\" rel=\"nofollow noreferrer\">docs.aws.amazon.com/AmazonS3/latest/userguide/object-keys.ht&zwnj;&#8203;ml</a> maybe nextflow (which im not familiar with) uses the same rules for file names"}],"owner":{"account_id":22381113,"reputation":1,"user_id":16594672,"display_name":"AWS Guru"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1701115394,"creation_date":1701112320,"question_id":77559373,"body_markdown":"I&#39;m encountering an error while running a Nextflow process. The specific error message is related to the S3 file system provider and the file attribute view. I&#39;m trying to run a sample dataset with the following parameters. \r\n\r\n`nextflow run nf-core/scrnaseq -r dev -input https://raw.githubusercontent.com/nf-core/test-datasets/scrnaseq/samplesheet-2-0.csv --outdir ./results --genome GRCh37.`\r\n\r\n```lang-none\r\n[b0/8284b8] process &gt; NFCORE_SCRNASEQ:SCRNASEQ:INPUT_CHECK:SAMPLESHEET_CHECK (samplesheet-2-0.csv) [100%] 1 of 1, failed: 1 ✔\r\n[-        ] process &gt; NFCORE_SCRNASEQ:SCRNASEQ:FASTQC_CHECK:FASTQC                                 -\r\n[4e/588c5d] process &gt; NFCORE_SCRNASEQ:SCRNASEQ:GTF_GENE_FILTER (genome.fa)                         [100%] 1 of 1, failed: 1 ✔\r\n[-        ] process &gt; NFCORE_SCRNASEQ:SCRNASEQ:SCRNASEQ_ALEVIN:SIMPLEAF_INDEX                      -\r\n[-        ] process &gt; NFCORE_SCRNASEQ:SCRNASEQ:SCRNASEQ_ALEVIN:SIMPLEAF_QUANT                      -\r\n[-        ] process &gt; NFCORE_SCRNASEQ:SCRNASEQ:SCRNASEQ_ALEVIN:ALEVINQC                            -\r\n[-        ] process &gt; NFCORE_SCRNASEQ:SCRNASEQ:MTX_CONVERSION:MTX_TO_H5AD                          -\r\n[-        ] process &gt; NFCORE_SCRNASEQ:SCRNASEQ:MTX_CONVERSION:CONCAT_H5AD                          -\r\n[-        ] process &gt; NFCORE_SCRNASEQ:SCRNASEQ:MTX_CONVERSION:MTX_TO_SEURAT                        -\r\n[-        ] process &gt; NFCORE_SCRNASEQ:SCRNASEQ:CUSTOM_DUMPSOFTWAREVERSIONS                         -\r\n[82/3a47a6] process &gt; NFCORE_SCRNASEQ:SCRNASEQ:MULTIQC                                             [100%] 1 of 1, failed: 1 ✘\r\nERROR ~ Error executing process &gt; &#39;NFCORE_SCRNASEQ:SCRNASEQ:MULTIQC&#39;\r\n\r\nCaused by:\r\n  Not a valid S3 file system provider file attribute view: java.nio.file.attribute.BasicWithKeyFileAttributeView\r\n\r\n\r\n -- Check &#39;.nextflow.log&#39; file for details\r\n\r\n\r\n-[nf-core/scrnaseq] Pipeline completed with errors-\r\n```\r\n\r\nI am trying to run the Nextflow pipeline in the Sagemaker Jupyter Notebook Instance and running its processes in the AWS Batch jobs. \r\n\r\nNextflow version: 23.10.0\r\nJava version: 21.0.1","title":"Nextflow Error: Not a valid S3 file system provider file attribute view: java.nio.file.attribute.BasicWithKeyFileAttributeView","body":"<p>I'm encountering an error while running a Nextflow process. The specific error message is related to the S3 file system provider and the file attribute view. I'm trying to run a sample dataset with the following parameters.</p>\n<p><code>nextflow run nf-core/scrnaseq -r dev -input https://raw.githubusercontent.com/nf-core/test-datasets/scrnaseq/samplesheet-2-0.csv --outdir ./results --genome GRCh37.</code></p>\n<pre class=\"lang-none prettyprint-override\"><code>[b0/8284b8] process &gt; NFCORE_SCRNASEQ:SCRNASEQ:INPUT_CHECK:SAMPLESHEET_CHECK (samplesheet-2-0.csv) [100%] 1 of 1, failed: 1 ✔\n[-        ] process &gt; NFCORE_SCRNASEQ:SCRNASEQ:FASTQC_CHECK:FASTQC                                 -\n[4e/588c5d] process &gt; NFCORE_SCRNASEQ:SCRNASEQ:GTF_GENE_FILTER (genome.fa)                         [100%] 1 of 1, failed: 1 ✔\n[-        ] process &gt; NFCORE_SCRNASEQ:SCRNASEQ:SCRNASEQ_ALEVIN:SIMPLEAF_INDEX                      -\n[-        ] process &gt; NFCORE_SCRNASEQ:SCRNASEQ:SCRNASEQ_ALEVIN:SIMPLEAF_QUANT                      -\n[-        ] process &gt; NFCORE_SCRNASEQ:SCRNASEQ:SCRNASEQ_ALEVIN:ALEVINQC                            -\n[-        ] process &gt; NFCORE_SCRNASEQ:SCRNASEQ:MTX_CONVERSION:MTX_TO_H5AD                          -\n[-        ] process &gt; NFCORE_SCRNASEQ:SCRNASEQ:MTX_CONVERSION:CONCAT_H5AD                          -\n[-        ] process &gt; NFCORE_SCRNASEQ:SCRNASEQ:MTX_CONVERSION:MTX_TO_SEURAT                        -\n[-        ] process &gt; NFCORE_SCRNASEQ:SCRNASEQ:CUSTOM_DUMPSOFTWAREVERSIONS                         -\n[82/3a47a6] process &gt; NFCORE_SCRNASEQ:SCRNASEQ:MULTIQC                                             [100%] 1 of 1, failed: 1 ✘\nERROR ~ Error executing process &gt; 'NFCORE_SCRNASEQ:SCRNASEQ:MULTIQC'\n\nCaused by:\n  Not a valid S3 file system provider file attribute view: java.nio.file.attribute.BasicWithKeyFileAttributeView\n\n\n -- Check '.nextflow.log' file for details\n\n\n-[nf-core/scrnaseq] Pipeline completed with errors-\n</code></pre>\n<p>I am trying to run the Nextflow pipeline in the Sagemaker Jupyter Notebook Instance and running its processes in the AWS Batch jobs.</p>\n<p>Nextflow version: 23.10.0\nJava version: 21.0.1</p>\n"},{"tags":["java","liferay","portlet","liferay-7","liferay-ide"],"comments":[{"owner":{"account_id":372682,"reputation":22426,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1701114867,"post_id":77559306,"comment_id":136732762,"body_markdown":"It seems that the documentation already provides the answer. Please read [How to Ask](https://stackoverflow.com/help/how-to-ask).","body":"It seems that the documentation already provides the answer. Please read <a href=\"https://stackoverflow.com/help/how-to-ask\">How to Ask</a>."}],"answers":[{"tags":[],"owner":{"account_id":7701,"reputation":47163,"user_id":13447,"accept_rate":100,"display_name":"Olaf Kock"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701114935,"creation_date":1701114935,"answer_id":77559591,"question_id":77559306,"body_markdown":"You have the option between Liferay Workspace (an opinionated gradle), pure gradle, or maven.\r\n\r\nMy recommendation is to go with Liferay Workspace. You can see a comparison of the three options in [Liferay&#39;s blade samples][1]. Though looking at it, the pure gradle option might be gone by now.\r\n\r\nYou mention Developer Studio: It should offer to create a Liferay Workspace. And then you&#39;d create your modules in the workspace. You can also run your server from there.\r\n\r\nAs you&#39;re used to the older versions: If possible, go with the modularized features (e.g. OSGi based), or even better look up the new &quot;Client Extensions&quot;, as they&#39;re a lot more lightweight and easier to maintain than server-slide plugins and the old WAR style plugins.\r\n\r\n\r\n  [1]: https://github.com/liferay/liferay-blade-samples/","title":"Liferay 7.4 development using SDK","body":"<p>You have the option between Liferay Workspace (an opinionated gradle), pure gradle, or maven.</p>\n<p>My recommendation is to go with Liferay Workspace. You can see a comparison of the three options in <a href=\"https://github.com/liferay/liferay-blade-samples/\" rel=\"nofollow noreferrer\">Liferay's blade samples</a>. Though looking at it, the pure gradle option might be gone by now.</p>\n<p>You mention Developer Studio: It should offer to create a Liferay Workspace. And then you'd create your modules in the workspace. You can also run your server from there.</p>\n<p>As you're used to the older versions: If possible, go with the modularized features (e.g. OSGi based), or even better look up the new &quot;Client Extensions&quot;, as they're a lot more lightweight and easier to maintain than server-slide plugins and the old WAR style plugins.</p>\n"}],"owner":{"account_id":30006704,"reputation":1,"user_id":22995411,"display_name":"Eric Olsen"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":1,"is_answered":false,"view_count":18,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1701114935,"creation_date":1701111446,"question_id":77559306,"body_markdown":"SO I am getting back into portlet and service development using Liferay. I have Liferay Portal 7.4 up and running and the Eclipse Development Studio. Is there an SDK I need to download like older versions?\r\nWhen I try to develop a portlet, it asks for the SDK. Any help appreciated.\r\n\r\n\r\n\r\nInstalled 7.4 portal on linux  - up and running. \r\nEclipse Liferay studio - need Liferay SDK or whatever they require for 7.4","title":"Liferay 7.4 development using SDK","body":"<p>SO I am getting back into portlet and service development using Liferay. I have Liferay Portal 7.4 up and running and the Eclipse Development Studio. Is there an SDK I need to download like older versions?\nWhen I try to develop a portlet, it asks for the SDK. Any help appreciated.</p>\n<p>Installed 7.4 portal on linux  - up and running.\nEclipse Liferay studio - need Liferay SDK or whatever they require for 7.4</p>\n"},{"tags":["java","jira-rest-api","jira-rest-java-api"],"comments":[{"owner":{"account_id":16953592,"reputation":19,"user_id":12262555,"display_name":"Kanchikatkar"},"score":0,"creation_date":1623690659,"post_id":67721760,"comment_id":120145106,"body_markdown":"I used FieldInput it worked for me.","body":"I used FieldInput it worked for me."}],"answers":[{"tags":[],"owner":{"account_id":16953592,"reputation":19,"user_id":12262555,"display_name":"Kanchikatkar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1623690743,"creation_date":1623690743,"answer_id":67974526,"question_id":67721760,"body_markdown":"\r\n    public JiraRestClient getJiraRestClient()\r\n\t   {\r\n\t\treturn new AsynchronousJiraRestClientFactory().createWithBasicHttpAuthentication(getJiraUri(), JIRA_USERNAME, JIRA_PASSWORD);\r\n\t   }\r\n\r\n\tpublic URI getJiraUri()\r\n\t{\r\n\t\treturn URI.create(JIRA_URL);\r\n\t}\t\t\r\n\r\n//loadConnectionProperties();\r\n\t\trestClient = getJiraRestClient();\r\n\r\n\t\tBasicProject project = null;\r\n\t\tIssueType issueType = null;\r\n\t\tIssueInputBuilder builder = null;\r\n\t\ttry\r\n\t\t{\r\n\t\t\tfinal Iterable&lt;BasicProject&gt; projects = restClient.getProjectClient().getAllProjects().claim();\r\n\r\n\t\t\tfor(BasicProject projectStr : projects)\r\n\t\t\t{\r\n\t\t\t\tif(projectStr.getKey().equalsIgnoreCase(PROJECT_KEY))\r\n\t\t\t\t{\r\n\t\t\t\t\tproject = projectStr;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tPromise&lt;Project&gt; projectType = restClient.getProjectClient().getProject(PROJECT_KEY);\r\n\r\n\t\t\tfor(IssueType type : (projectType.get()).getIssueTypes())\r\n\t\t\t{\r\n\t\t\t\tif(type.getName().equalsIgnoreCase(Issue_Type))\r\n\t\t\t\t{\r\n\t\t\t\t\tissueType = type;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tbuilder = new IssueInputBuilder(project, issueType, issueDTO.getIssueSummery());\r\n\t\t\tbuilder.setProject(project);\r\n\t\t\tbuilder.setDescription(issueDTO.getIssueDescription());\r\n\t\t\tbuilder.setPriorityId(1L);\r\n\t\t\t***builder.setFieldInput(new FieldInput(&quot;assignee&quot;, ComplexIssueInputFieldValue.with(&quot;accountId&quot;, &quot;557058:0fa57746-30a2-498c-9e34-9306679d0be7&quot;)));***\r\n\r\n\t\t\tIssueInput input = builder.build();\r\n\r\n\t\t\tIssueRestClient client = restClient.getIssueClient();\r\n\t\t\tBasicIssue issue = client.createIssue(input).claim();\r\n\r\n\t\t\tSystem.out.println(issue.getKey());\r\n\t\t\tLOG.error(&quot;Jira Created for  &quot; + issueDTO.getIssueSummery() + &quot; ID is :: &quot; + issue.getKey());\r\n\r\n\t\t}\r\n\t\tcatch(Exception e)\r\n\t\t{\r\n\t\t\te.printStackTrace();\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t","title":"setAssignee not working while adding Jira Issue","body":"<pre><code>public JiraRestClient getJiraRestClient()\n   {\n    return new AsynchronousJiraRestClientFactory().createWithBasicHttpAuthentication(getJiraUri(), JIRA_USERNAME, JIRA_PASSWORD);\n   }\n\npublic URI getJiraUri()\n{\n    return URI.create(JIRA_URL);\n}       \n</code></pre>\n<p>//loadConnectionProperties();\nrestClient = getJiraRestClient();</p>\n<pre><code>    BasicProject project = null;\n    IssueType issueType = null;\n    IssueInputBuilder builder = null;\n    try\n    {\n        final Iterable&lt;BasicProject&gt; projects = restClient.getProjectClient().getAllProjects().claim();\n\n        for(BasicProject projectStr : projects)\n        {\n            if(projectStr.getKey().equalsIgnoreCase(PROJECT_KEY))\n            {\n                project = projectStr;\n            }\n        }\n\n        Promise&lt;Project&gt; projectType = restClient.getProjectClient().getProject(PROJECT_KEY);\n\n        for(IssueType type : (projectType.get()).getIssueTypes())\n        {\n            if(type.getName().equalsIgnoreCase(Issue_Type))\n            {\n                issueType = type;\n            }\n        }\n\n        builder = new IssueInputBuilder(project, issueType, issueDTO.getIssueSummery());\n        builder.setProject(project);\n        builder.setDescription(issueDTO.getIssueDescription());\n        builder.setPriorityId(1L);\n        ***builder.setFieldInput(new FieldInput(&quot;assignee&quot;, ComplexIssueInputFieldValue.with(&quot;accountId&quot;, &quot;557058:0fa57746-30a2-498c-9e34-9306679d0be7&quot;)));***\n\n        IssueInput input = builder.build();\n\n        IssueRestClient client = restClient.getIssueClient();\n        BasicIssue issue = client.createIssue(input).claim();\n\n        System.out.println(issue.getKey());\n        LOG.error(&quot;Jira Created for  &quot; + issueDTO.getIssueSummery() + &quot; ID is :: &quot; + issue.getKey());\n\n    }\n    catch(Exception e)\n    {\n        e.printStackTrace();\n        return false;\n    }\n\n    return true;\n</code></pre>\n"}],"owner":{"account_id":16953592,"reputation":19,"user_id":12262555,"display_name":"Kanchikatkar"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":528,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":67974526,"answer_count":1,"score":0,"last_activity_date":1701114870,"creation_date":1622117139,"question_id":67721760,"body_markdown":"I created Jira issue by using jira library \r\n\r\n    &lt;dependency&gt;\r\n\t\t&lt;groupId&gt;com.atlassian.jira&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;jira-rest-java-client-app&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;5.2.1&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nBut while creating I am not able to set Assignee or AssigneeName for created JiraIssue.\r\n\r\nThis is my code\r\n\r\n            BasicUser user = projectType.get().getLead();\r\n\t\t\tSystem.out.println(user.getDisplayName());\r\n\t\t\tbuilder = new IssueInputBuilder(project, issueType, issueDTO.getIssueSummery());\r\n\t\t\tbuilder.setProject(project);\r\n\t\t\tbuilder.setDescription(issueDTO.getIssueDescription());\r\n\t\t\tIssueInput input = builder.build();\r\n\t\t\tIssueRestClient client = restClient.getIssueClient();\r\n\t\t\tBasicIssue issue = client.createIssue(input).claim();\r\n\t\t\t//input = IssueInput.createWithFields(new FieldInput(IssueFieldId.ASSIGNEE_FIELD, ComplexIssueInputFieldValue.with(&quot;name&quot;, &quot;Wraplive User&quot;)));\r\n\t\t\tbuilder.setPriorityId(1L);\r\n\t\t\tbuilder.setAssigneeName(&quot;Wraplive User&quot;);\r\n\t\t\tIssueInput issueInput = builder.build();\r\n\t\t\tclient.updateIssue(issue.getKey(), issueInput);\r\n\r\n\r\n\r\nI tried builder.setAssignee(user);  // here it sets AssigneeName as Project lead  which I don&#39;t require, I want to set another user or logged in username.\r\n\r\nCan anyone help me where I am going wrong?\r\n\r\nI tried with FieldInput which is commented in above code.","title":"setAssignee not working while adding Jira Issue","body":"<p>I created Jira issue by using jira library</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.atlassian.jira&lt;/groupId&gt;\n    &lt;artifactId&gt;jira-rest-java-client-app&lt;/artifactId&gt;\n    &lt;version&gt;5.2.1&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>But while creating I am not able to set Assignee or AssigneeName for created JiraIssue.</p>\n<p>This is my code</p>\n<pre><code>        BasicUser user = projectType.get().getLead();\n        System.out.println(user.getDisplayName());\n        builder = new IssueInputBuilder(project, issueType, issueDTO.getIssueSummery());\n        builder.setProject(project);\n        builder.setDescription(issueDTO.getIssueDescription());\n        IssueInput input = builder.build();\n        IssueRestClient client = restClient.getIssueClient();\n        BasicIssue issue = client.createIssue(input).claim();\n        //input = IssueInput.createWithFields(new FieldInput(IssueFieldId.ASSIGNEE_FIELD, ComplexIssueInputFieldValue.with(&quot;name&quot;, &quot;Wraplive User&quot;)));\n        builder.setPriorityId(1L);\n        builder.setAssigneeName(&quot;Wraplive User&quot;);\n        IssueInput issueInput = builder.build();\n        client.updateIssue(issue.getKey(), issueInput);\n</code></pre>\n<p>I tried builder.setAssignee(user);  // here it sets AssigneeName as Project lead  which I don't require, I want to set another user or logged in username.</p>\n<p>Can anyone help me where I am going wrong?</p>\n<p>I tried with FieldInput which is commented in above code.</p>\n"},{"tags":["java","spring","unit-testing","testing"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":1,"creation_date":1627304917,"post_id":68530411,"comment_id":121112816,"body_markdown":"what is the code you ommitted? chances are, you can test that something in that block is called 0 times, if you use a mock","body":"what is the code you ommitted? chances are, you can test that something in that block is called 0 times, if you use a mock"},{"owner":{"display_name":"user16409822"},"score":0,"creation_date":1627305421,"post_id":68530411,"comment_id":121113041,"body_markdown":"No, it is called in this test method, there is no problem on that side.","body":"No, it is called in this test method, there is no problem on that side."},{"owner":{"display_name":"user16409822"},"score":0,"creation_date":1627305429,"post_id":68530411,"comment_id":121113047,"body_markdown":"@Stultuske Any idea?","body":"@Stultuske Any idea?"},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1627305483,"post_id":68530411,"comment_id":121113072,"body_markdown":"As Stultuske wrote you could try to verify that nothing changed when you call that method with an empty list (and that it actually doesn&#39;t break) - it all depends on what the omitted code is doing. If that part cannot be tested, the only thing you could do is verify an empty list doesn&#39;t break the test. Besides that, I would create a new test method if you&#39;re explicitly testing that case. Don&#39;t mix test cases as this will be harder to track.","body":"As Stultuske wrote you could try to verify that nothing changed when you call that method with an empty list (and that it actually doesn&#39;t break) - it all depends on what the omitted code is doing. If that part cannot be tested, the only thing you could do is verify an empty list doesn&#39;t break the test. Besides that, I would create a new test method if you&#39;re explicitly testing that case. Don&#39;t mix test cases as this will be harder to track."},{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1627305915,"post_id":68530411,"comment_id":121113267,"body_markdown":"@Henry did you actually understand my comment?","body":"@Henry did you actually understand my comment?"},{"owner":{"display_name":"user16409822"},"score":0,"creation_date":1627305972,"post_id":68530411,"comment_id":121113291,"body_markdown":"I added the test method. Any idea?","body":"I added the test method. Any idea?"},{"owner":{"display_name":"user16409822"},"score":0,"creation_date":1627306187,"post_id":68530411,"comment_id":121113390,"body_markdown":"@Stultuske Amigo? Are you there?","body":"@Stultuske Amigo? Are you there?"},{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1627306446,"post_id":68530411,"comment_id":121113508,"body_markdown":"I wasn&#39;t talking about the test method, I&#39;m talking about the code you &quot;omitted&quot; in the code you are testing","body":"I wasn&#39;t talking about the test method, I&#39;m talking about the code you &quot;omitted&quot; in the code you are testing"},{"owner":{"display_name":"user16409822"},"score":0,"creation_date":1627306709,"post_id":68530411,"comment_id":121113620,"body_markdown":"@Stultuske Ok, I also added the other part of the `demoMethod`. I hope there is no missing part remains.","body":"@Stultuske Ok, I also added the other part of the <code>demoMethod</code>. I hope there is no missing part remains."},{"owner":{"account_id":13356749,"reputation":95,"user_id":9640017,"display_name":"vineetvdubey"},"score":0,"creation_date":1627306941,"post_id":68530411,"comment_id":121113738,"body_markdown":"@Henry Can you also specify the unit testing framework you are using? JUnit? Mockito? etc?","body":"@Henry Can you also specify the unit testing framework you are using? JUnit? Mockito? etc?"},{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1627307386,"post_id":68530411,"comment_id":121113971,"body_markdown":"you can mock priceService, and check that it is called 0 times","body":"you can mock priceService, and check that it is called 0 times"},{"owner":{"display_name":"user16409822"},"score":0,"creation_date":1627307417,"post_id":68530411,"comment_id":121113983,"body_markdown":"@Stultuske Yes, but how? Any example pls?","body":"@Stultuske Yes, but how? Any example pls?"},{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1627307504,"post_id":68530411,"comment_id":121114017,"body_markdown":"https://www.baeldung.com/mockito-series","body":"<a href=\"https://www.baeldung.com/mockito-series\" rel=\"nofollow noreferrer\">baeldung.com/mockito-series</a>"},{"owner":{"display_name":"user16409822"},"score":0,"creation_date":1627309904,"post_id":68530411,"comment_id":121115147,"body_markdown":"Thanks a lot, actıually I already look at [this](https://www.baeldung.com/mockito-verify) page. But I am really confused and did not find a proper example. Because I need to check if there is a zero interaction if the list is empty. Any example pls?","body":"Thanks a lot, actıually I already look at <a href=\"https://www.baeldung.com/mockito-verify\" rel=\"nofollow noreferrer\">this</a> page. But I am really confused and did not find a proper example. Because I need to check if there is a zero interaction if the list is empty. Any example pls?"},{"owner":{"display_name":"user16409822"},"score":0,"creation_date":1627310539,"post_id":68530411,"comment_id":121115497,"body_markdown":"`verifyNoMoreInteractions(demoService);` seems to be working, but I need to verify this based on a condition. So, how should I use this with that condition?","body":"<code>verifyNoMoreInteractions(demoService);</code> seems to be working, but I need to verify this based on a condition. So, how should I use this with that condition?"},{"owner":{"display_name":"user16409822"},"score":0,"creation_date":1627318959,"post_id":68530411,"comment_id":121119185,"body_markdown":"Any reply please?","body":"Any reply please?"}],"answers":[{"tags":[],"owner":{"account_id":3579519,"reputation":11,"user_id":2988055,"display_name":"PBeaumont"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1627306492,"creation_date":1627306492,"answer_id":68530860,"question_id":68530411,"body_markdown":"The point of doing a return in your if condition is that the rest of the code is not executed. I.e., if this `// code omitted for brevity` was to be executed, the method would not fill it&#39;s purpose. Therefore, just make sure that whatever that code does, it was not done if your list is empty.","title":"How to test void using Unit Test?","body":"<p>The point of doing a return in your if condition is that the rest of the code is not executed. I.e., if this <code>// code omitted for brevity</code> was to be executed, the method would not fill it's purpose. Therefore, just make sure that whatever that code does, it was not done if your list is empty.</p>\n"},{"tags":[],"owner":{"account_id":17835,"reputation":303885,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1701114751,"creation_date":1627306839,"answer_id":68530948,"question_id":68530411,"body_markdown":"The general idea is that you don&#39;t want to test *specific code*, but you want to test *some behaviour*.\r\n\r\nSo in your case you want to verify that `getPriceRequests` and `priceService.updateByPriceList` are not called when passing in an empty `List`.\r\n\r\nHow exactly you do that depends on what tools you have available. The easiest way is if you already mock `priceService`: then just instruct your mocking library/framework to verify that `updateByPriceList` is never called.","title":"How to test void using Unit Test?","body":"<p>The general idea is that you don't want to test <em>specific code</em>, but you want to test <em>some behaviour</em>.</p>\n<p>So in your case you want to verify that <code>getPriceRequests</code> and <code>priceService.updateByPriceList</code> are not called when passing in an empty <code>List</code>.</p>\n<p>How exactly you do that depends on what tools you have available. The easiest way is if you already mock <code>priceService</code>: then just instruct your mocking library/framework to verify that <code>updateByPriceList</code> is never called.</p>\n"},{"tags":[],"owner":{"account_id":476019,"reputation":14699,"user_id":886697,"accept_rate":92,"display_name":"Stanislav Bashkyrtsev"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1627306925,"creation_date":1627306925,"answer_id":68530968,"question_id":68530411,"body_markdown":"You have 3 choices: \r\n\r\n1. Write a unit test with mocks. Mockito allows you to verify() whether some method was invoked.\r\n2. Write a more high-level test with database. When testing Service Facade Layer this is usually a wiser choice. In this case you can obtain the resulting state of DB in your test to check whether it did what it had to.\r\n3. Refactor your code to work differently\r\n\r\nCheck out [Test Pyramid][1] and [How anemic architecture spoils your tests][2] for more details.\r\n\r\n\r\n  [1]: http://qala.io/blog/test-pyramid.html\r\n  [2]: http://qala.io/blog/anaemic-architecture-enemy-of-testing.html","title":"How to test void using Unit Test?","body":"<p>You have 3 choices:</p>\n<ol>\n<li>Write a unit test with mocks. Mockito allows you to verify() whether some method was invoked.</li>\n<li>Write a more high-level test with database. When testing Service Facade Layer this is usually a wiser choice. In this case you can obtain the resulting state of DB in your test to check whether it did what it had to.</li>\n<li>Refactor your code to work differently</li>\n</ol>\n<p>Check out <a href=\"http://qala.io/blog/test-pyramid.html\" rel=\"nofollow noreferrer\">Test Pyramid</a> and <a href=\"http://qala.io/blog/anaemic-architecture-enemy-of-testing.html\" rel=\"nofollow noreferrer\">How anemic architecture spoils your tests</a> for more details.</p>\n"}],"owner":{"display_name":"user16409822"},"comment_count":16,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":583,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1701114751,"creation_date":1627304705,"question_id":68530411,"body_markdown":"I have the following method and I wrote a *unit test* in Java for this method. It is coveraged except from the `if` statement and I also need to test this part. \r\n\r\n```\r\n@InjectMocks\r\nprivate ProductServiceImpl productService;\r\n\r\npublic void demoMethod(final List&lt;UUID&gt; productUuidList) {\r\n    if (productUuidList.isEmpty()) {\r\n        return;\r\n    }\r\n    final Map&lt;ProductRequest, PriceOverride&gt; requestMap = getPriceRequests(uuidList);\r\n    productService.updateByPriceList(priceRequestMap, companyUuid);\r\n}\r\n```\r\n\r\nHowever, as the method execution is finalized and does not return anything when `uuidList` is empty, I cannot test this `if` block. \r\n\r\nSo:\r\n\r\n 1. How can I test this `if` block? \r\n\r\n2. Should I create a new Unit Test method for testing this `if` block? Or should I add related assert lines to the current test method? \r\n\r\n***Update:*** Here is my test method:\r\n\r\n```\r\n@Test\r\npublic void testDemoMethod() {\r\n    final UUID uuid = UUID.randomUUID();\r\n    final List&lt;Price&gt; priceList = new ArrayList&lt;&gt;();\r\n    final Price price = new Price();\r\n    \r\n    price.setUuid(uuid);\r\n    priceList.add(price);\r\n\r\n    productService.demoMethod(Collections.singletonList(uuid));\r\n}\r\n```","title":"How to test void using Unit Test?","body":"<p>I have the following method and I wrote a <em>unit test</em> in Java for this method. It is coveraged except from the <code>if</code> statement and I also need to test this part.</p>\n<pre><code>@InjectMocks\nprivate ProductServiceImpl productService;\n\npublic void demoMethod(final List&lt;UUID&gt; productUuidList) {\n    if (productUuidList.isEmpty()) {\n        return;\n    }\n    final Map&lt;ProductRequest, PriceOverride&gt; requestMap = getPriceRequests(uuidList);\n    productService.updateByPriceList(priceRequestMap, companyUuid);\n}\n</code></pre>\n<p>However, as the method execution is finalized and does not return anything when <code>uuidList</code> is empty, I cannot test this <code>if</code> block.</p>\n<p>So:</p>\n<ol>\n<li><p>How can I test this <code>if</code> block?</p>\n</li>\n<li><p>Should I create a new Unit Test method for testing this <code>if</code> block? Or should I add related assert lines to the current test method?</p>\n</li>\n</ol>\n<p><em><strong>Update:</strong></em> Here is my test method:</p>\n<pre><code>@Test\npublic void testDemoMethod() {\n    final UUID uuid = UUID.randomUUID();\n    final List&lt;Price&gt; priceList = new ArrayList&lt;&gt;();\n    final Price price = new Price();\n    \n    price.setUuid(uuid);\n    priceList.add(price);\n\n    productService.demoMethod(Collections.singletonList(uuid));\n}\n</code></pre>\n"},{"tags":["java","memory","memory-management","low-level"],"comments":[{"owner":{"account_id":8191460,"reputation":13817,"user_id":7366707,"accept_rate":86,"display_name":"Salem"},"score":0,"creation_date":1512851673,"post_id":47732906,"comment_id":82426342,"body_markdown":"Well, the [general answer](https://stackoverflow.com/a/4626993/7366707) to this question should explain why.","body":"Well, the <a href=\"https://stackoverflow.com/a/4626993/7366707\">general answer</a> to this question should explain why."},{"owner":{"account_id":9640511,"reputation":4079,"user_id":7154924,"accept_rate":86,"display_name":"flow2k"},"score":2,"creation_date":1512851807,"post_id":47732906,"comment_id":82426389,"body_markdown":"@Mango Hmm...but that begs the question, as I allude to in the text: why must a `boolean` be addressable in the first place? Can&#39;t 8 `booleans` (in an `boolean` array for instance) share the same address, and then we shift appropriately depending on what the array index is?","body":"@Mango Hmm...but that begs the question, as I allude to in the text: why must a <code>boolean</code> be addressable in the first place? Can&#39;t 8 <code>booleans</code> (in an <code>boolean</code> array for instance) share the same address, and then we shift appropriately depending on what the array index is?"},{"owner":{"account_id":2734060,"reputation":263872,"user_id":2357112,"accept_rate":26,"display_name":"user2357112"},"score":2,"creation_date":1512851933,"post_id":47732906,"comment_id":82426430,"body_markdown":"Forcing a packed representation would just slow things down when space isn&#39;t an issue. You can pack it yourself or use a library implementation if you need the space.","body":"Forcing a packed representation would just slow things down when space isn&#39;t an issue. You can pack it yourself or use a library implementation if you need the space."},{"owner":{"account_id":3155790,"reputation":14975,"user_id":2668232,"accept_rate":100,"display_name":"Oleksandr Pyrohov"},"score":1,"creation_date":1512851945,"post_id":47732906,"comment_id":82426433,"body_markdown":"Possible duplicate of [Why is a boolean 1 byte and not 1 bit of size?](https://stackoverflow.com/questions/4626815/why-is-a-boolean-1-byte-and-not-1-bit-of-size)","body":"Possible duplicate of <a href=\"https://stackoverflow.com/questions/4626815/why-is-a-boolean-1-byte-and-not-1-bit-of-size\">Why is a boolean 1 byte and not 1 bit of size?</a>"},{"owner":{"account_id":2645973,"reputation":65777,"user_id":2288659,"accept_rate":90,"display_name":"Silvio Mayolo"},"score":3,"creation_date":1512851957,"post_id":47732906,"comment_id":82426437,"body_markdown":"@flow2k [Yes, they could.](https://docs.oracle.com/javase/7/docs/api/java/util/BitSet.html)","body":"@flow2k <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/BitSet.html\" rel=\"nofollow noreferrer\">Yes, they could.</a>"},{"owner":{"account_id":8191460,"reputation":13817,"user_id":7366707,"accept_rate":86,"display_name":"Salem"},"score":0,"creation_date":1512851962,"post_id":47732906,"comment_id":82426439,"body_markdown":"@Oleksandr Not necessarily a duplicate, C++ is not Java","body":"@Oleksandr Not necessarily a duplicate, C++ is not Java"},{"owner":{"account_id":8191460,"reputation":13817,"user_id":7366707,"accept_rate":86,"display_name":"Salem"},"score":1,"creation_date":1512851991,"post_id":47732906,"comment_id":82426452,"body_markdown":"@flow2k A boolean array could be optimized ([and in C++](http://en.cppreference.com/w/cpp/container/vector_bool), it has been with `std::vector&lt;bool&gt;`, which was arguably a questionable design decision as dereferencing the iterator no longer works), but in Java of course this _could_ work. As to why it wasn&#39;t done, I don&#39;t know. You could use a [`BitSet`](https://docs.oracle.com/javase/7/docs/api/java/util/BitSet.html) if you need a packed boolean array and/or efficiency.","body":"@flow2k A boolean array could be optimized (<a href=\"http://en.cppreference.com/w/cpp/container/vector_bool\" rel=\"nofollow noreferrer\">and in C++</a>, it has been with <code>std::vector&lt;bool&gt;</code>, which was arguably a questionable design decision as dereferencing the iterator no longer works), but in Java of course this <i>could</i> work. As to why it wasn&#39;t done, I don&#39;t know. You could use a <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/BitSet.html\" rel=\"nofollow noreferrer\"><code>BitSet</code></a> if you need a packed boolean array and/or efficiency."},{"owner":{"account_id":8191460,"reputation":13817,"user_id":7366707,"accept_rate":86,"display_name":"Salem"},"score":0,"creation_date":1512852107,"post_id":47732906,"comment_id":82426492,"body_markdown":"@Oleksandr ...which is not the point of _that specific question_. The _answers_ (not the question) refer to CPU limitations, however they do not necessarily apply equally to this question. The OP of this question even mentions that they are aware of this and instead asks _why_ such an optimization does not exist.","body":"@Oleksandr ...which is not the point of <i>that specific question</i>. The <i>answers</i> (not the question) refer to CPU limitations, however they do not necessarily apply equally to this question. The OP of this question even mentions that they are aware of this and instead asks <i>why</i> such an optimization does not exist."},{"owner":{"account_id":1079173,"reputation":42590,"user_id":1076640,"display_name":"yshavit"},"score":2,"creation_date":1512855395,"post_id":47732906,"comment_id":82427383,"body_markdown":"This question asserts they &quot;can&#39;t,&quot; but I don&#39;t know that that&#39;s true. Where does it say they can&#39;t? If you&#39;re asking about why they&#39;re not in any existing JVMs (which is likely), then &quot;computation time aside&quot; doesn&#39;t make much sense; computation time is the reason to make any optimization, like this one would be.","body":"This question asserts they &quot;can&#39;t,&quot; but I don&#39;t know that that&#39;s true. Where does it say they can&#39;t? If you&#39;re asking about why they&#39;re not in any existing JVMs (which is likely), then &quot;computation time aside&quot; doesn&#39;t make much sense; computation time is the reason to make any optimization, like this one would be."},{"owner":{"account_id":78868,"reputation":336965,"user_id":224132,"accept_rate":83,"display_name":"Peter Cordes"},"score":0,"creation_date":1512855917,"post_id":47732906,"comment_id":82427524,"body_markdown":"@Mango: An element of a `vector&lt;bool&gt;` is (as you say) no longer a `bool` object, it&#39;s a packed bit representing the value of a `bool`.  It&#39;s a race for two threads to write adjacent elements in a `vector&lt;bool&gt;` but not in an array of `bool`.  (Not that a packed bitmap is a bad data structure: it&#39;s great, but `vector&lt;bool&gt;` is probably not a good name for it.  See Howard Hinnant&#39;s blog: https://isocpp.org/blog/2012/11/on-vectorbool).","body":"@Mango: An element of a <code>vector&lt;bool&gt;</code> is (as you say) no longer a <code>bool</code> object, it&#39;s a packed bit representing the value of a <code>bool</code>.  It&#39;s a race for two threads to write adjacent elements in a <code>vector&lt;bool&gt;</code> but not in an array of <code>bool</code>.  (Not that a packed bitmap is a bad data structure: it&#39;s great, but <code>vector&lt;bool&gt;</code> is probably not a good name for it.  See Howard Hinnant&#39;s blog: <a href=\"https://isocpp.org/blog/2012/11/on-vectorbool\" rel=\"nofollow noreferrer\">isocpp.org/blog/2012/11/on-vectorbool</a>)."}],"answers":[{"tags":[],"owner":{"account_id":50030,"reputation":61435,"user_id":149138,"accept_rate":56,"display_name":"BeeOnRope"},"down_vote_count":0,"up_vote_count":12,"is_accepted":true,"score":12,"last_activity_date":1701114687,"creation_date":1512886305,"answer_id":47736383,"question_id":47732906,"body_markdown":"There is no reason why a boolean _must_ be one byte in size. In fact, is likely that booleans already aren&#39;t 1 byte in (effective) size in some scenarios: when packed next to other elements larger than 1 byte on the stack or in an object, they are likely to be _larger_ (i.e., adding them to an object may cause the size to grow by more than one byte).\r\n\r\nAny JVM is free to implement booleans as 1 bit, but as far as know none choose to do so, probably largely because:\r\n\r\n - Accessing one bit is often more expensive than accessing a byte, particularly when writing.\r\n\r\n To read a bit, a CPU using a &quot;classic RISC&quot; instruction set would often need need an additional `and` instruction to extract the relevant bit out of a packed byte (or larger word) of boolean bits. Some might even need a additional instruction to load a constant to `and`. In the case of indexing an array of `boolean`, where the bit-index isn&#39;t fixed at compile-time, you&#39;d need a variable shift. Some CPUs such as x86 have an easier time since they have memory source `test` instructions, including specific bit-test instructions taking a variable position such as `bt`. Such a CPU probably has similar read performance in both representations.\r\n\r\n Writing is worse: rather than a simple byte write to set a `boolean` value you now need to read the value, modify the appropriate bit and write it back. Some platforms such as x86 have memory source-and-destination RMW instructions such as `and` and `or` that will help, but these are still significantly more expensive than plain writes. In the worst case, repeatedly writing the same element will result in a dependency chain through memory that could slow your code down by an order of magnitude (a series of plain stores can&#39;t form a dependency chain).\r\n\r\n Even worse, the write method above is totally thread-unsafe. Two threads working on &quot;independent&quot; booleans might clobber each other, so the runtime would have to use atomic update operations just to write a bit for any field where the object cannot be proven local to the thread.\r\n\r\n - The space savings outside of arrays is usually very small, and is often zero: alignment concerns mean that a single bit will often end up taking the same space as a byte on the stack or in the layout for an object. Only if you had many primitive `boolean` values on the stack or an object would you see a savings (for example, objects are typically aligned to 8-byte boundaries, so if you have an object whose non-boolean fields are `int` or larger, you&#39;d need at least 4 `boolean` values to save any space, and often you&#39;d need 8).\r\n\r\n - This leaves the last remaining &quot;big win&quot; for bit-representation `boolean` in arrays of `boolean`, where you could have an asymptotic 8x space savings for large arrays. In fact, this case was motivating enough in the C++ world that `vector&lt;bool&gt;` there has a &quot;special&quot; implementation where each `bool` takes one bit - a never ending source of headaches due to all the required [special cases and non-intuitive behavior][1] (and often used as an example of a mis-feature that can&#39;t be removed now).\r\n\r\n  If it weren&#39;t for the memory model I could imagine a world where Java\r\n   implemented arrays of `boolean` in a bit-wise manner. They don&#39;t have\r\n   the same issues as `vector&lt;bool&gt;` (mostly because of the extra layer of abtraction provided by the JIT and also because an array provides a simpler interface than `vector`) and it could be done efficiently, I think. There is that pesky memory model though. That model allows writes to different array elements to be safe if done by different threads (i.e,. they act as independent variables for the purpose of the memory model). All common CPUs support this directly if you implement `boolean` as a byte, since they have independent byte accesses. No CPUs offer independent bit-access though: you are stuck using atomic operations (x86 offers the `lock bt*` operations, but these are slow: other platforms have even worse options). That would destroy the performance of any boolean array implemented as a bit-array.\r\n\r\n\r\nFinally, as described above, implementing `boolean` as a bit has significant downsides - but what about the upside?\r\n\r\nAs it turns out, if the user really wants this bit-packed representation of for boolean they can do so themselves! They can pack 8 boolean values into a `byte` (or 32 values into an `int` or whatever) in an object (and this is common for flags, etc) and the generated accessor code should be about efficient as efficient as if the JVM natively supported boolean-as-bit. In fact, when you _know_ you want an array-of-bits representation for a large number of booleans, you can simply use `BitSet` - this has the representation you want and sidesteps the atomic issues by not offering any thread-safety guarantees. So by implementing `boolean` as a byte, you sidestep all the problems above, but still let the user &quot;opt-in&quot; to bit-level representation if they want, without much runtime penalty.\r\n\r\n\r\n  [1]: https://isocpp.org/blog/2012/11/on-vectorbool","title":"Why must Java booleans be at least 1 byte in size?","body":"<p>There is no reason why a boolean <em>must</em> be one byte in size. In fact, is likely that booleans already aren't 1 byte in (effective) size in some scenarios: when packed next to other elements larger than 1 byte on the stack or in an object, they are likely to be <em>larger</em> (i.e., adding them to an object may cause the size to grow by more than one byte).</p>\n<p>Any JVM is free to implement booleans as 1 bit, but as far as know none choose to do so, probably largely because:</p>\n<ul>\n<li>Accessing one bit is often more expensive than accessing a byte, particularly when writing.</li>\n</ul>\n<p>To read a bit, a CPU using a &quot;classic RISC&quot; instruction set would often need need an additional <code>and</code> instruction to extract the relevant bit out of a packed byte (or larger word) of boolean bits. Some might even need a additional instruction to load a constant to <code>and</code>. In the case of indexing an array of <code>boolean</code>, where the bit-index isn't fixed at compile-time, you'd need a variable shift. Some CPUs such as x86 have an easier time since they have memory source <code>test</code> instructions, including specific bit-test instructions taking a variable position such as <code>bt</code>. Such a CPU probably has similar read performance in both representations.</p>\n<p>Writing is worse: rather than a simple byte write to set a <code>boolean</code> value you now need to read the value, modify the appropriate bit and write it back. Some platforms such as x86 have memory source-and-destination RMW instructions such as <code>and</code> and <code>or</code> that will help, but these are still significantly more expensive than plain writes. In the worst case, repeatedly writing the same element will result in a dependency chain through memory that could slow your code down by an order of magnitude (a series of plain stores can't form a dependency chain).</p>\n<p>Even worse, the write method above is totally thread-unsafe. Two threads working on &quot;independent&quot; booleans might clobber each other, so the runtime would have to use atomic update operations just to write a bit for any field where the object cannot be proven local to the thread.</p>\n<ul>\n<li><p>The space savings outside of arrays is usually very small, and is often zero: alignment concerns mean that a single bit will often end up taking the same space as a byte on the stack or in the layout for an object. Only if you had many primitive <code>boolean</code> values on the stack or an object would you see a savings (for example, objects are typically aligned to 8-byte boundaries, so if you have an object whose non-boolean fields are <code>int</code> or larger, you'd need at least 4 <code>boolean</code> values to save any space, and often you'd need 8).</p>\n</li>\n<li><p>This leaves the last remaining &quot;big win&quot; for bit-representation <code>boolean</code> in arrays of <code>boolean</code>, where you could have an asymptotic 8x space savings for large arrays. In fact, this case was motivating enough in the C++ world that <code>vector&lt;bool&gt;</code> there has a &quot;special&quot; implementation where each <code>bool</code> takes one bit - a never ending source of headaches due to all the required <a href=\"https://isocpp.org/blog/2012/11/on-vectorbool\" rel=\"nofollow noreferrer\">special cases and non-intuitive behavior</a> (and often used as an example of a mis-feature that can't be removed now).</p>\n</li>\n</ul>\n<p>If it weren't for the memory model I could imagine a world where Java\nimplemented arrays of <code>boolean</code> in a bit-wise manner. They don't have\nthe same issues as <code>vector&lt;bool&gt;</code> (mostly because of the extra layer of abtraction provided by the JIT and also because an array provides a simpler interface than <code>vector</code>) and it could be done efficiently, I think. There is that pesky memory model though. That model allows writes to different array elements to be safe if done by different threads (i.e,. they act as independent variables for the purpose of the memory model). All common CPUs support this directly if you implement <code>boolean</code> as a byte, since they have independent byte accesses. No CPUs offer independent bit-access though: you are stuck using atomic operations (x86 offers the <code>lock bt*</code> operations, but these are slow: other platforms have even worse options). That would destroy the performance of any boolean array implemented as a bit-array.</p>\n<p>Finally, as described above, implementing <code>boolean</code> as a bit has significant downsides - but what about the upside?</p>\n<p>As it turns out, if the user really wants this bit-packed representation of for boolean they can do so themselves! They can pack 8 boolean values into a <code>byte</code> (or 32 values into an <code>int</code> or whatever) in an object (and this is common for flags, etc) and the generated accessor code should be about efficient as efficient as if the JVM natively supported boolean-as-bit. In fact, when you <em>know</em> you want an array-of-bits representation for a large number of booleans, you can simply use <code>BitSet</code> - this has the representation you want and sidesteps the atomic issues by not offering any thread-safety guarantees. So by implementing <code>boolean</code> as a byte, you sidestep all the problems above, but still let the user &quot;opt-in&quot; to bit-level representation if they want, without much runtime penalty.</p>\n"}],"owner":{"account_id":9640511,"reputation":4079,"user_id":7154924,"accept_rate":86,"display_name":"flow2k"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3494,"favorite_count":0,"down_vote_count":1,"up_vote_count":7,"accepted_answer_id":47736383,"answer_count":1,"score":6,"last_activity_date":1701114687,"creation_date":1512851514,"question_id":47732906,"body_markdown":"It is known that C++ `bool`s must be at least 1 byte in size so that pointers can be created for each [\\[https://stackoverflow.com/a/2064565/7154924\\]][1]. But there are no pointers to primitive types in Java. Yet, they still take up at least 1 byte[ \\[https://stackoverflow.com/a/383597/7154924\\]][2].\r\n\r\nWhy is this the case - why can&#39;t Java `boolean`s be 1 bit in size? Computation time aside, if one has a large `boolean` array, surely one could conceive a compiler that does the appropriate shifting to retrieve the individual bit corresponding to a `boolean` value?\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/2064565/7154924\r\n  [2]: https://stackoverflow.com/a/383597/7154924","title":"Why must Java booleans be at least 1 byte in size?","body":"<p>It is known that C++ <code>bool</code>s must be at least 1 byte in size so that pointers can be created for each <a href=\"https://stackoverflow.com/a/2064565/7154924\">[https://stackoverflow.com/a/2064565/7154924]</a>. But there are no pointers to primitive types in Java. Yet, they still take up at least 1 byte<a href=\"https://stackoverflow.com/a/383597/7154924\"> [https://stackoverflow.com/a/383597/7154924]</a>.</p>\n\n<p>Why is this the case - why can't Java <code>boolean</code>s be 1 bit in size? Computation time aside, if one has a large <code>boolean</code> array, surely one could conceive a compiler that does the appropriate shifting to retrieve the individual bit corresponding to a <code>boolean</code> value?</p>\n"},{"tags":["java","shell","logging","queue"],"owner":{"account_id":12955170,"reputation":554,"user_id":9366277,"display_name":"a_good_human"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1701114637,"creation_date":1701112741,"question_id":77559407,"body_markdown":"I am using ProcessExecutor org.zeroturnaround.exec.ProcessExecutor, for executing a shell script in Java. The requirement is to to color code any error logs from the execution and write the output from both streams out and err to the same file.\r\n\r\nCurrently, I am initializing this as\r\n\r\n      ProcessExecutor processExecutor = new ProcessExecutor()\r\n                                            .command(commandList)\r\n                                            .directory(dir)\r\n                                            .environment(environment)\r\n                                            .readOutput(true)\r\n                                            .stopper(..)\r\n                                            .redirectOutput(new LogOutputStream() {\r\n                                              //print\r\n                                            })\r\n                                            .redirectError(new LogOutputStream() {\r\n                                              //color code to red and print\r\n                                            })\r\n\r\nThe issue is that sometimes the order of the logs is incorrect since they are 2 different streams and there is no coordination between them.\r\n\r\nI am okay moving away from ProcessExecutor as well.\r\n\r\nThanks!","title":"Redirect output and error to the same file using ProcessExecutor","body":"<p>I am using ProcessExecutor org.zeroturnaround.exec.ProcessExecutor, for executing a shell script in Java. The requirement is to to color code any error logs from the execution and write the output from both streams out and err to the same file.</p>\n<p>Currently, I am initializing this as</p>\n<pre><code>  ProcessExecutor processExecutor = new ProcessExecutor()\n                                        .command(commandList)\n                                        .directory(dir)\n                                        .environment(environment)\n                                        .readOutput(true)\n                                        .stopper(..)\n                                        .redirectOutput(new LogOutputStream() {\n                                          //print\n                                        })\n                                        .redirectError(new LogOutputStream() {\n                                          //color code to red and print\n                                        })\n</code></pre>\n<p>The issue is that sometimes the order of the logs is incorrect since they are 2 different streams and there is no coordination between them.</p>\n<p>I am okay moving away from ProcessExecutor as well.</p>\n<p>Thanks!</p>\n"},{"tags":["java","c++","swig"],"owner":{"account_id":22617085,"reputation":15,"user_id":16796475,"display_name":"Štefan Bellus"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":3,"up_vote_count":1,"answer_count":0,"score":-2,"last_activity_date":1701114364,"creation_date":1701105762,"question_id":77558808,"body_markdown":"I read https://www.swig.org/Doc4.1/SWIGDocumentation.html#Java_memory_management_objects, but it does not help.\r\n\r\nI have following interface\r\n```\r\n    class ApplicantMatcher\r\n    {\r\n    public:\r\n        [[nodiscard]] virtual int Match(int probe, int gallery) const = 0;\r\n\r\n        ApplicantMatcher() = default;\r\n        virtual ~ApplicantMatcher() = default;\r\n    };\r\n```\r\nAnd class that stores the interface in constructor for later use.\r\n```\r\n    class AatestClass\r\n    {\r\n    public:\r\n        AatestClass(ApplicantMatcher&amp; matcher, ApplicantMatcher&amp; matcher2)\r\n          : m(matcher)\r\n          , m2(matcher2)\r\n        {\r\n        }\r\n        AatestClass() = delete;\r\n        virtual ~AatestClass() = default;\r\n\r\n    private:\r\n        ApplicantMatcher&amp; m;\r\n        ApplicantMatcher&amp; m2;\r\n    };\r\n```\r\nBecause of garbage collection in targeted languages I need to store references also in target constructor.\r\nI need to do it for target languages Java, C#, Ruby, Python.\r\nI do not find any usable documentation for from my point of view for typically usage of polymorphism.\r\n\r\nI tried in my *.i file\r\n\r\n```\r\n// The constructor&#39;s in cpp that uses references, MUST to store reference to provided object also in target language\r\n%typemap(javacode) inno::AatestClass %{\r\n  // Ensure that the GC doesn&#39;t collect any element set from Java\r\n  // as the underlying C++ class stores a shallow copy\r\n  private ApplicantMatcher ref_matcher;\r\n  private ApplicantMatcher ref_matcher2;\r\n%}\r\n%typemap(javain, \r\n         pre=&quot;      ref_$javainput = $javainput;&quot;\r\n         ) inno::ApplicantMatcher &amp; &quot;ApplicantMatcher.getCPtr($javainput)&quot;;\r\n```\r\nAnd it generates:\r\n\r\n```\r\n  // Ensure that the GC doesn&#39;t collect any element set from Java\r\n  // as the underlying C++ class stores a shallow copy\r\n  private ApplicantMatcher ref_matcher;\r\n  private ApplicantMatcher ref_matcher2;\r\n\r\n  static private long SwigConstructAatestClass(ApplicantMatcher matcher, ApplicantMatcher matcher2) {\r\n      ref_matcher = matcher;\r\n      ref_matcher2 = matcher2;\r\n    return enrollmentJNI.new_AatestClass(ApplicantMatcher.getCPtr(matcher), matcher, ApplicantMatcher.getCPtr(matcher2), matcher2);\r\n  }\r\n\r\n  public AatestClass(ApplicantMatcher matcher, ApplicantMatcher matcher2) {\r\n    this(AatestClass.SwigConstructAatestClass(matcher, matcher2), true);\r\n  }\r\n```\r\nBut it has several problems\r\n- Not working because SwigConstructAatestClass is static\r\n- It is only for java, it is not generic for all target languages\r\n- It apply also for other functions as constructor, where it is not necessary https://www.swig.org/Doc4.1/SWIGDocumentation.html#Java_pgcpp) and unusable\r\n\r\nI am confused, why SWIG do not generate references in target proxy classes, when the cpp class has reference in constructor automatically.\r\n\r\nI tried to find out swig functionality that will add references in proxy class from cpp constructor references.","title":"How to add reference in target language for c++ constructor with references to interface in SWIG","body":"<p>I read <a href=\"https://www.swig.org/Doc4.1/SWIGDocumentation.html#Java_memory_management_objects\" rel=\"nofollow noreferrer\">https://www.swig.org/Doc4.1/SWIGDocumentation.html#Java_memory_management_objects</a>, but it does not help.</p>\n<p>I have following interface</p>\n<pre><code>    class ApplicantMatcher\n    {\n    public:\n        [[nodiscard]] virtual int Match(int probe, int gallery) const = 0;\n\n        ApplicantMatcher() = default;\n        virtual ~ApplicantMatcher() = default;\n    };\n</code></pre>\n<p>And class that stores the interface in constructor for later use.</p>\n<pre><code>    class AatestClass\n    {\n    public:\n        AatestClass(ApplicantMatcher&amp; matcher, ApplicantMatcher&amp; matcher2)\n          : m(matcher)\n          , m2(matcher2)\n        {\n        }\n        AatestClass() = delete;\n        virtual ~AatestClass() = default;\n\n    private:\n        ApplicantMatcher&amp; m;\n        ApplicantMatcher&amp; m2;\n    };\n</code></pre>\n<p>Because of garbage collection in targeted languages I need to store references also in target constructor.\nI need to do it for target languages Java, C#, Ruby, Python.\nI do not find any usable documentation for from my point of view for typically usage of polymorphism.</p>\n<p>I tried in my *.i file</p>\n<pre><code>// The constructor's in cpp that uses references, MUST to store reference to provided object also in target language\n%typemap(javacode) inno::AatestClass %{\n  // Ensure that the GC doesn't collect any element set from Java\n  // as the underlying C++ class stores a shallow copy\n  private ApplicantMatcher ref_matcher;\n  private ApplicantMatcher ref_matcher2;\n%}\n%typemap(javain, \n         pre=&quot;      ref_$javainput = $javainput;&quot;\n         ) inno::ApplicantMatcher &amp; &quot;ApplicantMatcher.getCPtr($javainput)&quot;;\n</code></pre>\n<p>And it generates:</p>\n<pre><code>  // Ensure that the GC doesn't collect any element set from Java\n  // as the underlying C++ class stores a shallow copy\n  private ApplicantMatcher ref_matcher;\n  private ApplicantMatcher ref_matcher2;\n\n  static private long SwigConstructAatestClass(ApplicantMatcher matcher, ApplicantMatcher matcher2) {\n      ref_matcher = matcher;\n      ref_matcher2 = matcher2;\n    return enrollmentJNI.new_AatestClass(ApplicantMatcher.getCPtr(matcher), matcher, ApplicantMatcher.getCPtr(matcher2), matcher2);\n  }\n\n  public AatestClass(ApplicantMatcher matcher, ApplicantMatcher matcher2) {\n    this(AatestClass.SwigConstructAatestClass(matcher, matcher2), true);\n  }\n</code></pre>\n<p>But it has several problems</p>\n<ul>\n<li>Not working because SwigConstructAatestClass is static</li>\n<li>It is only for java, it is not generic for all target languages</li>\n<li>It apply also for other functions as constructor, where it is not necessary <a href=\"https://www.swig.org/Doc4.1/SWIGDocumentation.html#Java_pgcpp\" rel=\"nofollow noreferrer\">https://www.swig.org/Doc4.1/SWIGDocumentation.html#Java_pgcpp</a>) and unusable</li>\n</ul>\n<p>I am confused, why SWIG do not generate references in target proxy classes, when the cpp class has reference in constructor automatically.</p>\n<p>I tried to find out swig functionality that will add references in proxy class from cpp constructor references.</p>\n"},{"tags":["java","android-studio"],"answers":[{"tags":[],"owner":{"account_id":29753542,"reputation":11,"user_id":22874358,"display_name":"Developer_wanna_be"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1701113405,"creation_date":1701113405,"answer_id":77559457,"question_id":77553290,"body_markdown":"I was able to fix this issue, thank you. \r\n\r\nI took the Pager outside of the scroll view. Also, I had another layout V28 created by the IDE and I didn&#180;t noticed it, i had to modify that one as well. \r\n\r\n","title":"Getting NULL with ViewPager FindByViewID(R.id)","body":"<p>I was able to fix this issue, thank you.</p>\n<p>I took the Pager outside of the scroll view. Also, I had another layout V28 created by the IDE and I didn´t noticed it, i had to modify that one as well.</p>\n"}],"owner":{"account_id":29753542,"reputation":11,"user_id":22874358,"display_name":"Developer_wanna_be"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77559457,"answer_count":1,"score":0,"last_activity_date":1701113405,"creation_date":1701028839,"question_id":77553290,"body_markdown":"I am going crazy, I tried to use ViewPager, CarouselView, ImageCarousel, ImageSlider and others and I keep having the same issue:\r\n`mViewPager = findViewById(R.id.viewPagerMain);\r\nR.id.viewPagerMain has value but nothing gets assigned to &quot;mViewPager&quot;.`\r\n\r\nI have watched several videos, read several explanations and I can&#180;t notice any difference. \r\nI thought that maybe I need to create a class specific for the ViewPager and nothing more...\r\n\r\nI have not created a carousel before, and I really do not understand what the problem is.\r\n\r\nWhat am I doing wrong?? Please help. \r\nBelow is my code:\r\n\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;ScrollView\r\n    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;\r\n    android:fitsSystemWindows=&quot;true&quot;\r\n    tools:context=&quot;.Vistas.Logins.Login_activity&quot;\r\n    android:background=&quot;@color/white&quot;\r\n    &gt;\r\n\r\n    &lt;RelativeLayout\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;&gt;\r\n\r\n        &lt;androidx.appcompat.widget.LinearLayoutCompat\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;match_parent&quot;\r\n            android:gravity=&quot;top&quot;\r\n            android:orientation=&quot;vertical&quot;&gt;\r\n\r\n            &lt;androidx.viewpager.widget.ViewPager\r\n                android:id=&quot;@+id/viewPagerMain&quot;\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;250dp&quot;\r\n                android:background=&quot;@color/strongblue&quot;\r\n                android:contentDescription=&quot;@string/wali&quot;\r\n                /&gt;\r\n\r\n            &lt;androidx.appcompat.widget.LinearLayoutCompat\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:orientation=&quot;vertical&quot;&gt;\r\n\r\n                &lt;TextView\r\n                    android:id=&quot;@+id/bienvenido2&quot;\r\n                    android:layout_width=&quot;wrap_content&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:layout_gravity=&quot;center&quot;\r\n                    android:layout_marginTop=&quot;25dp&quot;\r\n                    android:text=&quot;@string/bienvenido2&quot;\r\n                    android:textColor=&quot;@color/WaliBlue&quot;\r\n                    android:textSize=&quot;40sp&quot;\r\n                    android:textStyle=&quot;bold&quot; /&gt;\r\n\r\n                &lt;androidx.appcompat.widget.LinearLayoutCompat\r\n                    android:layout_width=&quot;wrap_content&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:layout_gravity=&quot;center&quot;\r\n                    android:gravity=&quot;center&quot;\r\n                    android:orientation=&quot;horizontal&quot;\r\n                    android:weightSum=&quot;2&quot;&gt;\r\n\r\n                    &lt;TextView\r\n                        android:id=&quot;@+id/usuariorecordado&quot;\r\n                        android:layout_width=&quot;wrap_content&quot;\r\n                        android:layout_height=&quot;wrap_content&quot;\r\n                        android:layout_weight=&quot;1&quot;\r\n                        android:gravity=&quot;center&quot;\r\n                        android:text=&quot;@string/usuariovariable&quot;\r\n                        android:textColor=&quot;@color/WaliBlue&quot;\r\n                        android:textSize=&quot;40sp&quot;\r\n                        android:textStyle=&quot;bold&quot; /&gt;\r\n\r\n                    &lt;TextView\r\n                        android:id=&quot;@+id/bienvenido2final&quot;\r\n                        android:layout_width=&quot;wrap_content&quot;\r\n                        android:layout_height=&quot;wrap_content&quot;\r\n                        android:layout_weight=&quot;1&quot;\r\n                        android:drawablePadding=&quot;10dp&quot;\r\n                        android:text=&quot;@string/bienvenido2final&quot;\r\n                        android:textColor=&quot;@color/WaliBlue&quot;\r\n                        android:textSize=&quot;40sp&quot;\r\n                        android:textStyle=&quot;bold&quot;\r\n                        app:drawableEndCompat=&quot;@drawable/mano_ico&quot; /&gt;\r\n\r\n                &lt;/androidx.appcompat.widget.LinearLayoutCompat&gt;\r\n\r\n                &lt;TextView\r\n                    android:id=&quot;@+id/iniciasesion&quot;\r\n                    android:layout_width=&quot;wrap_content&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:layout_gravity=&quot;center&quot;\r\n                    android:layout_marginTop=&quot;5dp&quot;\r\n                    android:text=&quot;@string/iniciasesion&quot;\r\n                    android:textColor=&quot;@color/walilog&quot;\r\n                    android:textSize=&quot;20sp&quot; /&gt;\r\n\r\n\r\n                &lt;com.google.android.material.textfield.TextInputLayout\r\n                    android:layout_width=&quot;350dp&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:layout_alignParentTop=&quot;true&quot;\r\n                    android:layout_gravity=&quot;center&quot;\r\n                    android:layout_marginTop=&quot;60dp&quot;\r\n                    app:passwordToggleEnabled=&quot;true&quot;\r\n                    app:passwordToggleTint=&quot;@color/green&quot;&gt;\r\n\r\n                    &lt;EditText\r\n                        android:id=&quot;@+id/password&quot;\r\n                        android:layout_width=&quot;match_parent&quot;\r\n                        android:layout_height=&quot;48sp&quot;\r\n                        android:autofillHints=&quot;&quot;\r\n                        android:backgroundTint=&quot;@color/green&quot;\r\n                        android:hint=&quot;@string/password&quot;\r\n                        android:inputType=&quot;textPassword&quot;\r\n                        android:textColor=&quot;@color/black&quot;\r\n                        android:textSize=&quot;18sp&quot; /&gt;\r\n                &lt;/com.google.android.material.textfield.TextInputLayout&gt;\r\n\r\n                &lt;androidx.appcompat.widget.SwitchCompat\r\n                    android:id=&quot;@+id/recordarSesion&quot;\r\n                    android:layout_width=&quot;wrap_content&quot;\r\n                    android:layout_height=&quot;48dp&quot;\r\n                    android:layout_gravity=&quot;center&quot;\r\n                    android:checked=&quot;true&quot;\r\n                    android:text=&quot;@string/recordarSesion&quot;\r\n                    android:textColor=&quot;@color/grey&quot;\r\n                    app:switchPadding=&quot;15dp&quot;\r\n                    app:thumbTint=&quot;@drawable/newthumb_switch&quot; /&gt;\r\n\r\n                &lt;!-- &lt;TextView\r\n                    android:layout_width=&quot;wrap_content&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:layout_gravity=&quot;center&quot;\r\n                    android:drawablePadding=&quot;10dp&quot;\r\n                    android:gravity=&quot;center&quot;\r\n                    android:text=&quot;@string/recordarSesion&quot;\r\n                    android:textSize=&quot;15sp&quot;\r\n                    android:layout_marginTop=&quot;5dp&quot;\r\n                    app:drawableRightCompat=&quot;@drawable/toggle_on&quot; /&gt;\r\n\r\n                    Temporal porque ir&#225; un toggle--&gt;\r\n\r\n\r\n                &lt;Button\r\n                    android:id=&quot;@+id/botoniniciar&quot;\r\n                    android:layout_width=&quot;250dp&quot;\r\n                    android:layout_height=&quot;50dp&quot;\r\n                    android:layout_gravity=&quot;center&quot;\r\n                    android:layout_marginTop=&quot;60dp&quot;\r\n                    android:background=&quot;@drawable/boton_ripple&quot;\r\n                    android:text=&quot;@string/botoniniciar&quot;\r\n                    android:textAllCaps=&quot;false&quot;\r\n                    android:textColor=&quot;@color/white&quot;\r\n                    android:textSize=&quot;20sp&quot;\r\n                    android:textStyle=&quot;bold&quot; /&gt;\r\n\r\n                &lt;TextView\r\n                    android:id=&quot;@+id/nousuario&quot;\r\n                    android:layout_width=&quot;wrap_content&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:layout_gravity=&quot;center&quot;\r\n                    android:layout_marginTop=&quot;20dp&quot;\r\n                    android:gravity=&quot;center&quot;\r\n                    android:text=&quot;@string/nousuario&quot;\r\n                    android:textSize=&quot;16sp&quot; /&gt;\r\n\r\n                &lt;Button\r\n                    android:id=&quot;@+id/otracuenta&quot;\r\n                    style=&quot;?android:attr/borderlessButtonStyle&quot;\r\n                    android:layout_width=&quot;wrap_content&quot;\r\n                    android:layout_height=&quot;48dp&quot;\r\n                    android:layout_gravity=&quot;center&quot;\r\n                    android:background=&quot;@null&quot;\r\n                    android:gravity=&quot;top&quot;\r\n                    android:text=&quot;@string/otracuenta&quot;\r\n                    android:textAllCaps=&quot;false&quot;\r\n                    android:textColor=&quot;@color/walilog&quot;\r\n                    android:textSize=&quot;16sp&quot;\r\n                    android:textStyle=&quot;bold&quot; /&gt;\r\n\r\n            &lt;/androidx.appcompat.widget.LinearLayoutCompat&gt;\r\n\r\n            &lt;androidx.appcompat.widget.LinearLayoutCompat\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;130dp&quot;\r\n                android:layout_gravity=&quot;bottom&quot;\r\n                android:background=&quot;@color/white&quot;\r\n                android:gravity=&quot;bottom&quot;\r\n                android:orientation=&quot;vertical&quot;&gt;\r\n\r\n                &lt;androidx.appcompat.widget.LinearLayoutCompat\r\n                    android:layout_width=&quot;match_parent&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:background=&quot;@color/azulrey&quot;\r\n                    android:orientation=&quot;horizontal&quot;\r\n                    android:weightSum=&quot;2&quot;\r\n                    android:layout_gravity=&quot;bottom&quot;&gt;\r\n\r\n                    &lt;TextView\r\n                        android:id=&quot;@+id/link&quot;\r\n                        android:layout_width=&quot;wrap_content&quot;\r\n                        android:layout_height=&quot;50dp&quot;\r\n                        android:layout_gravity=&quot;bottom&quot;\r\n                        android:layout_marginStart=&quot;15dp&quot;\r\n                        android:layout_weight=&quot;1&quot;\r\n                        android:autoLink=&quot;web&quot;\r\n                        android:drawablePadding=&quot;8dp&quot;\r\n                        android:gravity=&quot;center|left&quot;\r\n                        android:text=&quot;@string/link&quot;\r\n                        android:textColorLink=&quot;@color/white&quot;\r\n                        android:textSize=&quot;20sp&quot;\r\n                        android:textStyle=&quot;bold&quot;\r\n                        app:drawableLeftCompat=&quot;@drawable/web&quot;\r\n                        tools:ignore=&quot;RtlHardcoded&quot; /&gt;\r\n\r\n                    &lt;Button\r\n                        android:id=&quot;@+id/ayuda&quot;\r\n                        android:layout_width=&quot;wrap_content&quot;\r\n                        android:layout_height=&quot;48dp&quot;\r\n                        android:layout_gravity=&quot;bottom&quot;\r\n                        android:layout_marginEnd=&quot;-30dp&quot;\r\n                        android:layout_weight=&quot;1&quot;\r\n                        android:background=&quot;@null&quot;\r\n                        android:drawablePadding=&quot;8dp&quot;\r\n                        android:gravity=&quot;center_vertical&quot;\r\n                        android:text=&quot;@string/ayuda&quot;\r\n                        android:textAllCaps=&quot;false&quot;\r\n                        android:textColor=&quot;@color/white&quot;\r\n                        android:textSize=&quot;20sp&quot;\r\n                        android:textStyle=&quot;bold&quot;\r\n                        app:drawableStartCompat=&quot;@drawable/ayuda&quot;\r\n                        tools:ignore=&quot;RtlHardcoded&quot; /&gt;\r\n\r\n                &lt;/androidx.appcompat.widget.LinearLayoutCompat&gt;\r\n            &lt;/androidx.appcompat.widget.LinearLayoutCompat&gt;\r\n\r\n        &lt;/androidx.appcompat.widget.LinearLayoutCompat&gt;\r\n\r\n        &lt;RelativeLayout\r\n\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;match_parent&quot;\r\n            android:background=&quot;@color/dimBackground&quot;\r\n            android:elevation=&quot;2dp&quot;\r\n            android:gravity=&quot;center&quot;\r\n            android:visibility=&quot;invisible&quot;&gt;\r\n\r\n            &lt;ProgressBar\r\n                android:id=&quot;@+id/loadingPanel&quot;\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:elevation=&quot;10dp&quot;\r\n                android:background=&quot;@drawable/rounded_corners&quot;\r\n                android:indeterminate=&quot;true&quot;\r\n                /&gt;\r\n\r\n        &lt;/RelativeLayout&gt;\r\n\r\n    &lt;/RelativeLayout&gt;\r\n\r\n&lt;/ScrollView&gt;\r\n```\r\n\r\n\r\n```\r\npublic class ViewPagerAdapter extends PagerAdapter {\r\n    // Context object\r\n    Context context;\r\n\r\n    // Array of images\r\n    int[] images;\r\n\r\n    // Layout Inflater\r\n    LayoutInflater mLayoutInflater;\r\n\r\n\r\n    // Viewpager Constructor\r\n    public ViewPagerAdapter(Context context, int[] images) {\r\n        this.context = context;\r\n        this.images = images;\r\n        mLayoutInflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);\r\n    }\r\n\r\n    @Override\r\n    public int getCount() {\r\n        // return the number of images\r\n        return images.length;\r\n    }\r\n\r\n    @Override\r\n    public boolean isViewFromObject(@NonNull View view, @NonNull Object object) {\r\n        return view == ((LinearLayout) object);\r\n    }\r\n\r\n    @NonNull\r\n    @Override\r\n    public Object instantiateItem(@NonNull ViewGroup container, final int position) {\r\n\r\n        // inflating the item\r\n        View itemView = mLayoutInflater.inflate(R.layout.carrusel_inicio, container, false);\r\n\r\n        // referencing the image view from the item.xml file\r\n        ImageView imageView = (ImageView) itemView.findViewById(R.id.imageViewMain);\r\n\r\n        // setting the image in the imageView\r\n        imageView.setImageResource(images[position]);\r\n\r\n        // Adding the View\r\n        Objects.requireNonNull(container).addView(itemView);\r\n\r\n        return itemView;\r\n    }\r\n\r\n    @Override\r\n    public void destroyItem(ViewGroup container, int position, @NonNull Object object) {\r\n\r\n        container.removeView((LinearLayout) object);\r\n    }\r\n}\r\n```\r\n\r\n\r\n```\r\npublic class Login_recordarUsuario extends AppCompatActivity {\r\n\r\n    EditText password;\r\n    Button botoniniciar,otracuenta,ayuda;\r\n    public ProgressDialog progressDialog;\r\n    public ProgressBar loadingPanel;\r\n    TextView iniciasesion,bienvenido2,link,nousuario,bienvenido2final,usuariorecordado;\r\n    SwitchCompat recordarSesion;\r\n    ViewPager mViewPager;\r\n    int[] images = {R.drawable.walilogin, R.drawable.wall_e, R.drawable.walle};\r\n    ViewPagerAdapter mViewPagerAdapter;\r\n\r\n    @SuppressLint(&quot;MissingInflatedId&quot;)\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_login_recordar_usuario);\r\n\r\n        ConnectivityManager connectivityManager = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);\r\n\r\n        boolean connected = (Objects.requireNonNull(connectivityManager.getNetworkInfo(ConnectivityManager.TYPE_MOBILE)).getState() == NetworkInfo.State.CONNECTED ||\r\n                Objects.requireNonNull(connectivityManager.getNetworkInfo(ConnectivityManager.TYPE_WIFI)).getState() == NetworkInfo.State.CONNECTED);\r\n\r\n            String ubicacion = &quot;Tipografia/GalanoGrotesqueAlt-Regular.ttf&quot;;\r\n            String ubicacion2 = &quot;Tipografia/GalanoGrotesqueDEMO-Bold.ttf&quot;;\r\n            Typeface tf = Typeface.createFromAsset(Login_recordarUsuario.this.getAssets(), ubicacion); //Inicia sesi&#243;n para...\r\n            Typeface tf2 = Typeface.createFromAsset(Login_recordarUsuario.this.getAssets(), ubicacion2); // Bienvenido\r\n\r\n            recordarSesion = findViewById(R.id.recordarSesion);\r\n\r\n            password = findViewById(R.id.password);\r\n            botoniniciar = findViewById(R.id.botoniniciar);\r\n            progressDialog = new ProgressDialog(Login_recordarUsuario.this);\r\n            loadingPanel = findViewById(R.id.loadingPanel);\r\n            progressDialog.setMessage(&quot;Iniciando sesi&#243;n...&quot;);\r\n            iniciasesion = findViewById(R.id.iniciasesion);\r\n            bienvenido2 = findViewById(R.id.bienvenido2);\r\n            link = findViewById(R.id.link);\r\n            nousuario = findViewById(R.id.nousuario);\r\n            otracuenta = findViewById(R.id.otracuenta);\r\n            usuariorecordado = findViewById(R.id.usuariorecordado);\r\n            bienvenido2final = findViewById(R.id.bienvenido2final);\r\n            ayuda = findViewById(R.id.ayuda);\r\n\r\n        // Initializing the ViewPager Object\r\n        mViewPager = findViewById(R.id.viewPagerMain);\r\n\r\n        // Initializing the ViewPagerAdapter\r\n        mViewPagerAdapter = new ViewPagerAdapter(Login_recordarUsuario.this, images);\r\n\r\n        // Adding the Adapter to the ViewPager\r\n        mViewPager.setAdapter(mViewPagerAdapter);\r\n\r\n//.... code Continues\r\n```\r\n\r\n\r\n","title":"Getting NULL with ViewPager FindByViewID(R.id)","body":"<p>I am going crazy, I tried to use ViewPager, CarouselView, ImageCarousel, ImageSlider and others and I keep having the same issue:\n<code>mViewPager = findViewById(R.id.viewPagerMain); R.id.viewPagerMain has value but nothing gets assigned to &quot;mViewPager&quot;.</code></p>\n<p>I have watched several videos, read several explanations and I can´t notice any difference.\nI thought that maybe I need to create a class specific for the ViewPager and nothing more...</p>\n<p>I have not created a carousel before, and I really do not understand what the problem is.</p>\n<p>What am I doing wrong?? Please help.\nBelow is my code:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;ScrollView\n    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    android:fitsSystemWindows=&quot;true&quot;\n    tools:context=&quot;.Vistas.Logins.Login_activity&quot;\n    android:background=&quot;@color/white&quot;\n    &gt;\n\n    &lt;RelativeLayout\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;&gt;\n\n        &lt;androidx.appcompat.widget.LinearLayoutCompat\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;match_parent&quot;\n            android:gravity=&quot;top&quot;\n            android:orientation=&quot;vertical&quot;&gt;\n\n            &lt;androidx.viewpager.widget.ViewPager\n                android:id=&quot;@+id/viewPagerMain&quot;\n                android:layout_width=&quot;match_parent&quot;\n                android:layout_height=&quot;250dp&quot;\n                android:background=&quot;@color/strongblue&quot;\n                android:contentDescription=&quot;@string/wali&quot;\n                /&gt;\n\n            &lt;androidx.appcompat.widget.LinearLayoutCompat\n                android:layout_width=&quot;match_parent&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:orientation=&quot;vertical&quot;&gt;\n\n                &lt;TextView\n                    android:id=&quot;@+id/bienvenido2&quot;\n                    android:layout_width=&quot;wrap_content&quot;\n                    android:layout_height=&quot;wrap_content&quot;\n                    android:layout_gravity=&quot;center&quot;\n                    android:layout_marginTop=&quot;25dp&quot;\n                    android:text=&quot;@string/bienvenido2&quot;\n                    android:textColor=&quot;@color/WaliBlue&quot;\n                    android:textSize=&quot;40sp&quot;\n                    android:textStyle=&quot;bold&quot; /&gt;\n\n                &lt;androidx.appcompat.widget.LinearLayoutCompat\n                    android:layout_width=&quot;wrap_content&quot;\n                    android:layout_height=&quot;wrap_content&quot;\n                    android:layout_gravity=&quot;center&quot;\n                    android:gravity=&quot;center&quot;\n                    android:orientation=&quot;horizontal&quot;\n                    android:weightSum=&quot;2&quot;&gt;\n\n                    &lt;TextView\n                        android:id=&quot;@+id/usuariorecordado&quot;\n                        android:layout_width=&quot;wrap_content&quot;\n                        android:layout_height=&quot;wrap_content&quot;\n                        android:layout_weight=&quot;1&quot;\n                        android:gravity=&quot;center&quot;\n                        android:text=&quot;@string/usuariovariable&quot;\n                        android:textColor=&quot;@color/WaliBlue&quot;\n                        android:textSize=&quot;40sp&quot;\n                        android:textStyle=&quot;bold&quot; /&gt;\n\n                    &lt;TextView\n                        android:id=&quot;@+id/bienvenido2final&quot;\n                        android:layout_width=&quot;wrap_content&quot;\n                        android:layout_height=&quot;wrap_content&quot;\n                        android:layout_weight=&quot;1&quot;\n                        android:drawablePadding=&quot;10dp&quot;\n                        android:text=&quot;@string/bienvenido2final&quot;\n                        android:textColor=&quot;@color/WaliBlue&quot;\n                        android:textSize=&quot;40sp&quot;\n                        android:textStyle=&quot;bold&quot;\n                        app:drawableEndCompat=&quot;@drawable/mano_ico&quot; /&gt;\n\n                &lt;/androidx.appcompat.widget.LinearLayoutCompat&gt;\n\n                &lt;TextView\n                    android:id=&quot;@+id/iniciasesion&quot;\n                    android:layout_width=&quot;wrap_content&quot;\n                    android:layout_height=&quot;wrap_content&quot;\n                    android:layout_gravity=&quot;center&quot;\n                    android:layout_marginTop=&quot;5dp&quot;\n                    android:text=&quot;@string/iniciasesion&quot;\n                    android:textColor=&quot;@color/walilog&quot;\n                    android:textSize=&quot;20sp&quot; /&gt;\n\n\n                &lt;com.google.android.material.textfield.TextInputLayout\n                    android:layout_width=&quot;350dp&quot;\n                    android:layout_height=&quot;wrap_content&quot;\n                    android:layout_alignParentTop=&quot;true&quot;\n                    android:layout_gravity=&quot;center&quot;\n                    android:layout_marginTop=&quot;60dp&quot;\n                    app:passwordToggleEnabled=&quot;true&quot;\n                    app:passwordToggleTint=&quot;@color/green&quot;&gt;\n\n                    &lt;EditText\n                        android:id=&quot;@+id/password&quot;\n                        android:layout_width=&quot;match_parent&quot;\n                        android:layout_height=&quot;48sp&quot;\n                        android:autofillHints=&quot;&quot;\n                        android:backgroundTint=&quot;@color/green&quot;\n                        android:hint=&quot;@string/password&quot;\n                        android:inputType=&quot;textPassword&quot;\n                        android:textColor=&quot;@color/black&quot;\n                        android:textSize=&quot;18sp&quot; /&gt;\n                &lt;/com.google.android.material.textfield.TextInputLayout&gt;\n\n                &lt;androidx.appcompat.widget.SwitchCompat\n                    android:id=&quot;@+id/recordarSesion&quot;\n                    android:layout_width=&quot;wrap_content&quot;\n                    android:layout_height=&quot;48dp&quot;\n                    android:layout_gravity=&quot;center&quot;\n                    android:checked=&quot;true&quot;\n                    android:text=&quot;@string/recordarSesion&quot;\n                    android:textColor=&quot;@color/grey&quot;\n                    app:switchPadding=&quot;15dp&quot;\n                    app:thumbTint=&quot;@drawable/newthumb_switch&quot; /&gt;\n\n                &lt;!-- &lt;TextView\n                    android:layout_width=&quot;wrap_content&quot;\n                    android:layout_height=&quot;wrap_content&quot;\n                    android:layout_gravity=&quot;center&quot;\n                    android:drawablePadding=&quot;10dp&quot;\n                    android:gravity=&quot;center&quot;\n                    android:text=&quot;@string/recordarSesion&quot;\n                    android:textSize=&quot;15sp&quot;\n                    android:layout_marginTop=&quot;5dp&quot;\n                    app:drawableRightCompat=&quot;@drawable/toggle_on&quot; /&gt;\n\n                    Temporal porque irá un toggle--&gt;\n\n\n                &lt;Button\n                    android:id=&quot;@+id/botoniniciar&quot;\n                    android:layout_width=&quot;250dp&quot;\n                    android:layout_height=&quot;50dp&quot;\n                    android:layout_gravity=&quot;center&quot;\n                    android:layout_marginTop=&quot;60dp&quot;\n                    android:background=&quot;@drawable/boton_ripple&quot;\n                    android:text=&quot;@string/botoniniciar&quot;\n                    android:textAllCaps=&quot;false&quot;\n                    android:textColor=&quot;@color/white&quot;\n                    android:textSize=&quot;20sp&quot;\n                    android:textStyle=&quot;bold&quot; /&gt;\n\n                &lt;TextView\n                    android:id=&quot;@+id/nousuario&quot;\n                    android:layout_width=&quot;wrap_content&quot;\n                    android:layout_height=&quot;wrap_content&quot;\n                    android:layout_gravity=&quot;center&quot;\n                    android:layout_marginTop=&quot;20dp&quot;\n                    android:gravity=&quot;center&quot;\n                    android:text=&quot;@string/nousuario&quot;\n                    android:textSize=&quot;16sp&quot; /&gt;\n\n                &lt;Button\n                    android:id=&quot;@+id/otracuenta&quot;\n                    style=&quot;?android:attr/borderlessButtonStyle&quot;\n                    android:layout_width=&quot;wrap_content&quot;\n                    android:layout_height=&quot;48dp&quot;\n                    android:layout_gravity=&quot;center&quot;\n                    android:background=&quot;@null&quot;\n                    android:gravity=&quot;top&quot;\n                    android:text=&quot;@string/otracuenta&quot;\n                    android:textAllCaps=&quot;false&quot;\n                    android:textColor=&quot;@color/walilog&quot;\n                    android:textSize=&quot;16sp&quot;\n                    android:textStyle=&quot;bold&quot; /&gt;\n\n            &lt;/androidx.appcompat.widget.LinearLayoutCompat&gt;\n\n            &lt;androidx.appcompat.widget.LinearLayoutCompat\n                android:layout_width=&quot;match_parent&quot;\n                android:layout_height=&quot;130dp&quot;\n                android:layout_gravity=&quot;bottom&quot;\n                android:background=&quot;@color/white&quot;\n                android:gravity=&quot;bottom&quot;\n                android:orientation=&quot;vertical&quot;&gt;\n\n                &lt;androidx.appcompat.widget.LinearLayoutCompat\n                    android:layout_width=&quot;match_parent&quot;\n                    android:layout_height=&quot;wrap_content&quot;\n                    android:background=&quot;@color/azulrey&quot;\n                    android:orientation=&quot;horizontal&quot;\n                    android:weightSum=&quot;2&quot;\n                    android:layout_gravity=&quot;bottom&quot;&gt;\n\n                    &lt;TextView\n                        android:id=&quot;@+id/link&quot;\n                        android:layout_width=&quot;wrap_content&quot;\n                        android:layout_height=&quot;50dp&quot;\n                        android:layout_gravity=&quot;bottom&quot;\n                        android:layout_marginStart=&quot;15dp&quot;\n                        android:layout_weight=&quot;1&quot;\n                        android:autoLink=&quot;web&quot;\n                        android:drawablePadding=&quot;8dp&quot;\n                        android:gravity=&quot;center|left&quot;\n                        android:text=&quot;@string/link&quot;\n                        android:textColorLink=&quot;@color/white&quot;\n                        android:textSize=&quot;20sp&quot;\n                        android:textStyle=&quot;bold&quot;\n                        app:drawableLeftCompat=&quot;@drawable/web&quot;\n                        tools:ignore=&quot;RtlHardcoded&quot; /&gt;\n\n                    &lt;Button\n                        android:id=&quot;@+id/ayuda&quot;\n                        android:layout_width=&quot;wrap_content&quot;\n                        android:layout_height=&quot;48dp&quot;\n                        android:layout_gravity=&quot;bottom&quot;\n                        android:layout_marginEnd=&quot;-30dp&quot;\n                        android:layout_weight=&quot;1&quot;\n                        android:background=&quot;@null&quot;\n                        android:drawablePadding=&quot;8dp&quot;\n                        android:gravity=&quot;center_vertical&quot;\n                        android:text=&quot;@string/ayuda&quot;\n                        android:textAllCaps=&quot;false&quot;\n                        android:textColor=&quot;@color/white&quot;\n                        android:textSize=&quot;20sp&quot;\n                        android:textStyle=&quot;bold&quot;\n                        app:drawableStartCompat=&quot;@drawable/ayuda&quot;\n                        tools:ignore=&quot;RtlHardcoded&quot; /&gt;\n\n                &lt;/androidx.appcompat.widget.LinearLayoutCompat&gt;\n            &lt;/androidx.appcompat.widget.LinearLayoutCompat&gt;\n\n        &lt;/androidx.appcompat.widget.LinearLayoutCompat&gt;\n\n        &lt;RelativeLayout\n\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;match_parent&quot;\n            android:background=&quot;@color/dimBackground&quot;\n            android:elevation=&quot;2dp&quot;\n            android:gravity=&quot;center&quot;\n            android:visibility=&quot;invisible&quot;&gt;\n\n            &lt;ProgressBar\n                android:id=&quot;@+id/loadingPanel&quot;\n                android:layout_width=&quot;wrap_content&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:elevation=&quot;10dp&quot;\n                android:background=&quot;@drawable/rounded_corners&quot;\n                android:indeterminate=&quot;true&quot;\n                /&gt;\n\n        &lt;/RelativeLayout&gt;\n\n    &lt;/RelativeLayout&gt;\n\n&lt;/ScrollView&gt;\n</code></pre>\n<pre><code>public class ViewPagerAdapter extends PagerAdapter {\n    // Context object\n    Context context;\n\n    // Array of images\n    int[] images;\n\n    // Layout Inflater\n    LayoutInflater mLayoutInflater;\n\n\n    // Viewpager Constructor\n    public ViewPagerAdapter(Context context, int[] images) {\n        this.context = context;\n        this.images = images;\n        mLayoutInflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);\n    }\n\n    @Override\n    public int getCount() {\n        // return the number of images\n        return images.length;\n    }\n\n    @Override\n    public boolean isViewFromObject(@NonNull View view, @NonNull Object object) {\n        return view == ((LinearLayout) object);\n    }\n\n    @NonNull\n    @Override\n    public Object instantiateItem(@NonNull ViewGroup container, final int position) {\n\n        // inflating the item\n        View itemView = mLayoutInflater.inflate(R.layout.carrusel_inicio, container, false);\n\n        // referencing the image view from the item.xml file\n        ImageView imageView = (ImageView) itemView.findViewById(R.id.imageViewMain);\n\n        // setting the image in the imageView\n        imageView.setImageResource(images[position]);\n\n        // Adding the View\n        Objects.requireNonNull(container).addView(itemView);\n\n        return itemView;\n    }\n\n    @Override\n    public void destroyItem(ViewGroup container, int position, @NonNull Object object) {\n\n        container.removeView((LinearLayout) object);\n    }\n}\n</code></pre>\n<pre><code>public class Login_recordarUsuario extends AppCompatActivity {\n\n    EditText password;\n    Button botoniniciar,otracuenta,ayuda;\n    public ProgressDialog progressDialog;\n    public ProgressBar loadingPanel;\n    TextView iniciasesion,bienvenido2,link,nousuario,bienvenido2final,usuariorecordado;\n    SwitchCompat recordarSesion;\n    ViewPager mViewPager;\n    int[] images = {R.drawable.walilogin, R.drawable.wall_e, R.drawable.walle};\n    ViewPagerAdapter mViewPagerAdapter;\n\n    @SuppressLint(&quot;MissingInflatedId&quot;)\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_login_recordar_usuario);\n\n        ConnectivityManager connectivityManager = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);\n\n        boolean connected = (Objects.requireNonNull(connectivityManager.getNetworkInfo(ConnectivityManager.TYPE_MOBILE)).getState() == NetworkInfo.State.CONNECTED ||\n                Objects.requireNonNull(connectivityManager.getNetworkInfo(ConnectivityManager.TYPE_WIFI)).getState() == NetworkInfo.State.CONNECTED);\n\n            String ubicacion = &quot;Tipografia/GalanoGrotesqueAlt-Regular.ttf&quot;;\n            String ubicacion2 = &quot;Tipografia/GalanoGrotesqueDEMO-Bold.ttf&quot;;\n            Typeface tf = Typeface.createFromAsset(Login_recordarUsuario.this.getAssets(), ubicacion); //Inicia sesión para...\n            Typeface tf2 = Typeface.createFromAsset(Login_recordarUsuario.this.getAssets(), ubicacion2); // Bienvenido\n\n            recordarSesion = findViewById(R.id.recordarSesion);\n\n            password = findViewById(R.id.password);\n            botoniniciar = findViewById(R.id.botoniniciar);\n            progressDialog = new ProgressDialog(Login_recordarUsuario.this);\n            loadingPanel = findViewById(R.id.loadingPanel);\n            progressDialog.setMessage(&quot;Iniciando sesión...&quot;);\n            iniciasesion = findViewById(R.id.iniciasesion);\n            bienvenido2 = findViewById(R.id.bienvenido2);\n            link = findViewById(R.id.link);\n            nousuario = findViewById(R.id.nousuario);\n            otracuenta = findViewById(R.id.otracuenta);\n            usuariorecordado = findViewById(R.id.usuariorecordado);\n            bienvenido2final = findViewById(R.id.bienvenido2final);\n            ayuda = findViewById(R.id.ayuda);\n\n        // Initializing the ViewPager Object\n        mViewPager = findViewById(R.id.viewPagerMain);\n\n        // Initializing the ViewPagerAdapter\n        mViewPagerAdapter = new ViewPagerAdapter(Login_recordarUsuario.this, images);\n\n        // Adding the Adapter to the ViewPager\n        mViewPager.setAdapter(mViewPagerAdapter);\n\n//.... code Continues\n</code></pre>\n"},{"tags":["java","spring-boot","tomcat","unicode"],"comments":[{"owner":{"account_id":1471892,"reputation":9718,"user_id":1383240,"accept_rate":38,"display_name":"NiVeR"},"score":0,"creation_date":1532963975,"post_id":51597136,"comment_id":90160424,"body_markdown":"In second case which character is it?","body":"In second case which character is it?"},{"owner":{"account_id":7695425,"reputation":21,"user_id":5830134,"display_name":"Anshu Kumar"},"score":0,"creation_date":1532967769,"post_id":51597136,"comment_id":90162597,"body_markdown":"uFF07 represents &quot; single double quote character. Here problem is with u character tomcat hates to see it !!!","body":"uFF07 represents &quot; single double quote character. Here problem is with u character tomcat hates to see it !!!"}],"answers":[{"tags":[],"owner":{"account_id":8606921,"reputation":1580,"user_id":6446770,"accept_rate":100,"display_name":"miiiii"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1532974472,"creation_date":1532964769,"answer_id":51597484,"question_id":51597136,"body_markdown":"You are passing `%` sign in your url, but `%` is symbol in url, to pass `%` as it is... you will have to pass `%25` then it will work as you expected.\r\n\r\nSo, if you pass `%25uFF07` then it will show you `%uFF07` as value.\r\n\r\nNo need to change anything in application.properties or any kind of settings. I have tested this in my project.\r\n\r\nPlease feel free to ask for any clarification. Hope It Helps.","title":"SpringBoot embedded tomcat server reads unicode character in query parameter as null","body":"<p>You are passing <code>%</code> sign in your url, but <code>%</code> is symbol in url, to pass <code>%</code> as it is... you will have to pass <code>%25</code> then it will work as you expected.</p>\n\n<p>So, if you pass <code>%25uFF07</code> then it will show you <code>%uFF07</code> as value.</p>\n\n<p>No need to change anything in application.properties or any kind of settings. I have tested this in my project.</p>\n\n<p>Please feel free to ask for any clarification. Hope It Helps.</p>\n"},{"tags":[],"owner":{"account_id":7695425,"reputation":21,"user_id":5830134,"display_name":"Anshu Kumar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1701113074,"creation_date":1533296803,"answer_id":51671932,"question_id":51597136,"body_markdown":"I found out a way using filters. Basics about filters could be found over [here][1]. We can intercept request query string there and use Tomcat UDecoder class to parse the query string and if any exception is thrown we can show response of 400\r\n\r\n```java\r\npublic class SimpleFilter implements Filter {\r\n\r\n\tprivate final UDecoder urlDecoder = new UDecoder();\r\n\tprivate final Logger logger = LoggerFactory.getLogger(SimpleFilter.class);\r\n\r\n\t@Override\r\n\tpublic void init(FilterConfig filterConfig) throws ServletException {\r\n\t}\r\n\r\n\t@Override\r\n\tpublic void doFilter(ServletRequest request, ServletResponse response, FilterChain chain)\r\n\t\t\tthrows IOException, ServletException {\r\n\t\tHttpServletRequest httpServletRequest = (HttpServletRequest) request;\r\n\t\tHttpServletResponse httpServletResponse = (HttpServletResponse) response;\r\n\r\n\t\tString queryString = httpServletRequest.getQueryString();\r\n\t\tif (queryString != null) {\r\n\t\t\tByteChunk byteChunk = new ByteChunk();\r\n\t\t\tbyteChunk.setBytes(queryString.getBytes(), 0, queryString.length());\r\n\t\t\ttry {\r\n\t\t\t\turlDecoder.convert(byteChunk, true);\r\n\t\t\t} catch (IOException ioException) {\r\n\t\t\t\tlogger.error(&quot;Hazarduos character found in request parameter.&quot;);\r\n\t\t\t\thttpServletResponse.setStatus(HttpStatus.BAD_REQUEST.value());\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\t\tchain.doFilter(request, response);\r\n\t}\r\n\r\n\t@Override\r\n\tpublic void destroy() {\r\n\t}\r\n\r\n}\r\n```\r\n\r\n  [1]: http://tutorials.jenkov.com/java-servlets/servlet-filters.html","title":"SpringBoot embedded tomcat server reads unicode character in query parameter as null","body":"<p>I found out a way using filters. Basics about filters could be found over <a href=\"http://tutorials.jenkov.com/java-servlets/servlet-filters.html\" rel=\"nofollow noreferrer\">here</a>. We can intercept request query string there and use Tomcat UDecoder class to parse the query string and if any exception is thrown we can show response of 400</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class SimpleFilter implements Filter {\n\n    private final UDecoder urlDecoder = new UDecoder();\n    private final Logger logger = LoggerFactory.getLogger(SimpleFilter.class);\n\n    @Override\n    public void init(FilterConfig filterConfig) throws ServletException {\n    }\n\n    @Override\n    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain)\n            throws IOException, ServletException {\n        HttpServletRequest httpServletRequest = (HttpServletRequest) request;\n        HttpServletResponse httpServletResponse = (HttpServletResponse) response;\n\n        String queryString = httpServletRequest.getQueryString();\n        if (queryString != null) {\n            ByteChunk byteChunk = new ByteChunk();\n            byteChunk.setBytes(queryString.getBytes(), 0, queryString.length());\n            try {\n                urlDecoder.convert(byteChunk, true);\n            } catch (IOException ioException) {\n                logger.error(&quot;Hazarduos character found in request parameter.&quot;);\n                httpServletResponse.setStatus(HttpStatus.BAD_REQUEST.value());\n                return;\n            }\n        }\n        chain.doFilter(request, response);\n    }\n\n    @Override\n    public void destroy() {\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":7695425,"reputation":21,"user_id":5830134,"display_name":"Anshu Kumar"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1158,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":51671932,"answer_count":2,"score":0,"last_activity_date":1701113074,"creation_date":1532963570,"question_id":51597136,"body_markdown":"I have a rest end point designed in spring boot. Tomcat is being used as embedded server. It takes a query parameter. \r\n\r\n 1. When I pass query parameter as param1%uFF07 tomcat internally reads parameter as null\r\n 2. When I pass query parameter as param1%FF07 tomcat reads as some character.\r\n\r\ntomcat only reads &#39;%&#39; character when followed by two hexadecimal numbers, if u is placed after &#39;%&#39; character tomcat parse parameter as `null` with message \r\n\r\n&gt; Character decoding failed. Parameter [name] with value [param1%uFF07]\r\n&gt; has been ignored. Note that the name and value quoted here may be\r\n&gt; corrupted due to the failed decoding. Use debug level logging to see\r\n&gt; the original, non-corrupted values.  Note: further occurrences of\r\n&gt; Parameter errors will be logged at DEBUG level.\r\n\r\n\r\nHere is spring boot controller code\r\n\r\n\t@RestController\r\n\tpublic class GreetingController {\r\n\r\n\t\tprivate static final String template = &quot;Hello, %s!&quot;;\r\n\t\tprivate final AtomicLong counter = new AtomicLong();\r\n\r\n\t\t@RequestMapping(&quot;/greeting&quot;)\r\n\t\tpublic Greeting greeting(@RequestParam(value = &quot;name&quot;, required = false) String name) {\r\n\t\t\treturn new Greeting(counter.incrementAndGet(), String.format(template, name));\r\n\t\t}\r\n\t}","title":"SpringBoot embedded tomcat server reads unicode character in query parameter as null","body":"<p>I have a rest end point designed in spring boot. Tomcat is being used as embedded server. It takes a query parameter. </p>\n\n<ol>\n<li>When I pass query parameter as param1%uFF07 tomcat internally reads parameter as null</li>\n<li>When I pass query parameter as param1%FF07 tomcat reads as some character.</li>\n</ol>\n\n<p>tomcat only reads '%' character when followed by two hexadecimal numbers, if u is placed after '%' character tomcat parse parameter as <code>null</code> with message </p>\n\n<blockquote>\n  <p>Character decoding failed. Parameter [name] with value [param1%uFF07]\n  has been ignored. Note that the name and value quoted here may be\n  corrupted due to the failed decoding. Use debug level logging to see\n  the original, non-corrupted values.  Note: further occurrences of\n  Parameter errors will be logged at DEBUG level.</p>\n</blockquote>\n\n<p>Here is spring boot controller code</p>\n\n<pre><code>@RestController\npublic class GreetingController {\n\n    private static final String template = \"Hello, %s!\";\n    private final AtomicLong counter = new AtomicLong();\n\n    @RequestMapping(\"/greeting\")\n    public Greeting greeting(@RequestParam(value = \"name\", required = false) String name) {\n        return new Greeting(counter.incrementAndGet(), String.format(template, name));\n    }\n}\n</code></pre>\n"},{"tags":["java","math","optimization","perfect-square"],"comments":[{"owner":{"account_id":14410,"reputation":44184,"user_id":29639,"accept_rate":74,"display_name":"T.E.D."},"score":0,"creation_date":1226931825,"post_id":295579,"comment_id":142819,"body_markdown":"Since Integer and Long son&#39;t really have a specific length specified (in most C-ish langauges, which is what your code looks like), better to say that, for a 32-bit integer, there are 2**16 perfect squares.","body":"Since Integer and Long son&#39;t really have a specific length specified (in most C-ish langauges, which is what your code looks like), better to say that, for a 32-bit integer, there are 2**16 perfect squares."},{"owner":{"account_id":9921,"reputation":107674,"user_id":18511,"accept_rate":92,"display_name":"Kip"},"score":27,"creation_date":1226932513,"post_id":295579,"comment_id":142833,"body_markdown":"This is Java code, where int==32 bits and long==64 bits, and both are signed.","body":"This is Java code, where int==32 bits and long==64 bits, and both are signed."},{"owner":{"account_id":3435,"reputation":38511,"user_id":4958,"accept_rate":75,"display_name":"ShreevatsaR"},"score":0,"creation_date":1227027173,"post_id":295579,"comment_id":145343,"body_markdown":"Which is faster: &quot;long tst = (long)Math.sqrt(n); return tst*tst == n;&quot; (what you have) or &quot;double tst = Math.sqrt(n); return tst ==(double)Math.round(tst);&quot; ?","body":"Which is faster: &quot;long tst = (long)Math.sqrt(n); return tst*tst == n;&quot; (what you have) or &quot;double tst = Math.sqrt(n); return tst ==(double)Math.round(tst);&quot; ?"},{"owner":{"account_id":7650,"reputation":5400,"user_id":13342,"accept_rate":67,"display_name":"Eric Weilnau"},"score":0,"creation_date":1227277413,"post_id":295579,"comment_id":152103,"body_markdown":"Which JVM did you use for the testing? In my experience algorithm performance is dependant on the JVM.","body":"Which JVM did you use for the testing? In my experience algorithm performance is dependant on the JVM."},{"owner":{"account_id":9921,"reputation":107674,"user_id":18511,"accept_rate":92,"display_name":"Kip"},"score":16,"creation_date":1228248193,"post_id":295579,"comment_id":171861,"body_markdown":"@Shreevasta: I&#39;ve done some testing on large values (greater than 2^53), and your method gives some false positives.  The first one encountered is for n=9007199326062755, which is not a perfect square but is returned as one.","body":"@Shreevasta: I&#39;ve done some testing on large values (greater than 2^53), and your method gives some false positives.  The first one encountered is for n=9007199326062755, which is not a perfect square but is returned as one."},{"owner":{"account_id":20245,"reputation":17785,"user_id":48181,"accept_rate":100,"display_name":"martinus"},"score":0,"creation_date":1230853714,"post_id":295579,"comment_id":230793,"body_markdown":"There is a bug in your code:\n\nsqrt = (long)Math.sqrt(n);\nreturn sqrt*sqrt == n;\n\nMath.sqrt(n) returns a floating point representation, e.g. Math.sqrt(9) might return 2.99999999999 if you are unlucky, and when you cast it with (long) you could easily end up with a too low number.","body":"There is a bug in your code:  sqrt = (long)Math.sqrt(n); return sqrt*sqrt == n;  Math.sqrt(n) returns a floating point representation, e.g. Math.sqrt(9) might return 2.99999999999 if you are unlucky, and when you cast it with (long) you could easily end up with a too low number."},{"owner":{"account_id":2516,"reputation":31761,"user_id":3508,"accept_rate":79,"display_name":"A. Rex"},"score":0,"creation_date":1231372106,"post_id":295579,"comment_id":246516,"body_markdown":"You can use bit tricks to check the last 6 bits:  if( (x&amp;2) || ((x &amp; 7) == 5) || ((x &amp; 11) == 8) || ((x &amp; 31) == 20) || ((x &amp; 47) == 24)) return false;","body":"You can use bit tricks to check the last 6 bits:  if( (x&amp;2) || ((x &amp; 7) == 5) || ((x &amp; 11) == 8) || ((x &amp; 31) == 20) || ((x &amp; 47) == 24)) return false;"},{"owner":{"account_id":5680,"reputation":680,"user_id":9282,"display_name":"user9282"},"score":39,"creation_date":1236752856,"post_id":295579,"comment_id":446550,"body_markdown":"Please don&#39;t call it the &quot;John Carmack hack.&quot; He didn&#39;t come up with it.","body":"Please don&#39;t call it the &quot;John Carmack hack.&quot; He didn&#39;t come up with it."},{"owner":{"account_id":9921,"reputation":107674,"user_id":18511,"accept_rate":92,"display_name":"Kip"},"score":1,"creation_date":1236775316,"post_id":295579,"comment_id":447379,"body_markdown":"@martinus: for values below 2^53, the double representation is exact so there will be no roundoff error.  i&#39;ve also tested on every perfect square greater than 2^53, as well as +/- 1 from each perfect square, and roundoff error never results in an incorrect answer.","body":"@martinus: for values below 2^53, the double representation is exact so there will be no roundoff error.  i&#39;ve also tested on every perfect square greater than 2^53, as well as +/- 1 from each perfect square, and roundoff error never results in an incorrect answer."},{"owner":{"account_id":21994,"reputation":73798,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":0,"creation_date":1243279563,"post_id":295579,"comment_id":715598,"body_markdown":"I believe that modern JVM&#39;s may be able to skip array index checks at a given spot if it can be concluded that they will always be valid there.  What JVM was the testing done with?","body":"I believe that modern JVM&#39;s may be able to skip array index checks at a given spot if it can be concluded that they will always be valid there.  What JVM was the testing done with?"},{"owner":{"account_id":21994,"reputation":73798,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":0,"creation_date":1243337993,"post_id":295579,"comment_id":718038,"body_markdown":"The &quot;John Carmack hack&quot; should be feasible for a larger range, by doing the extra iteration commented out in the Quake source if needed (i,e number large enough).","body":"The &quot;John Carmack hack&quot; should be feasible for a larger range, by doing the extra iteration commented out in the Quake source if needed (i,e number large enough)."},{"owner":{"account_id":9921,"reputation":107674,"user_id":18511,"accept_rate":92,"display_name":"Kip"},"score":0,"creation_date":1243348491,"post_id":295579,"comment_id":718850,"body_markdown":"@Thorbj&#248;rn Ravn Andersen: i was using j2se 6.0 windows jvm, downloaded from sun&#39;s site. i also tried uncommenting the extra iteration, and IIRC it actually got less accurate somehow.","body":"@Thorbj&#248;rn Ravn Andersen: i was using j2se 6.0 windows jvm, downloaded from sun&#39;s site. i also tried uncommenting the extra iteration, and IIRC it actually got less accurate somehow."},{"owner":{"account_id":41028,"reputation":1596,"user_id":119151,"accept_rate":77,"display_name":"dstibbe"},"score":0,"creation_date":1253869915,"post_id":295579,"comment_id":1326152,"body_markdown":"Make your quickfail quicker and make \n// Quickfail\n  if( n &lt; 0 || ((n&amp;2) != 0) || ((n &amp; 7) == 5) || ((n &amp; 11) == 8) )\n    return false;\n  if( n == 0 )\n    return true;\n\n\nthe other way around:\n// Quickfail\n  if( n == 0 )\n    return true;\n  if( n &lt; 0 || ((n&amp;2) != 0) || ((n &amp; 7) == 5) || ((n &amp; 11) == 8) )\n    return false;","body":"Make your quickfail quicker and make  // Quickfail   if( n &lt; 0 || ((n&amp;2) != 0) || ((n &amp; 7) == 5) || ((n &amp; 11) == 8) )     return false;   if( n == 0 )     return true;   the other way around: // Quickfail   if( n == 0 )     return true;   if( n &lt; 0 || ((n&amp;2) != 0) || ((n &amp; 7) == 5) || ((n &amp; 11) == 8) )     return false;"},{"owner":{"account_id":9921,"reputation":107674,"user_id":18511,"accept_rate":92,"display_name":"Kip"},"score":0,"creation_date":1253884111,"post_id":295579,"comment_id":1327113,"body_markdown":"@dstibbe: that would only be faster when the input is 0. for 75% of other inputs (not even counting negative numbers) it will be faster the way its written, and for the other 25% there will be no difference.","body":"@dstibbe: that would only be faster when the input is 0. for 75% of other inputs (not even counting negative numbers) it will be faster the way its written, and for the other 25% there will be no difference."},{"owner":{"account_id":43031,"reputation":10689,"user_id":125601,"accept_rate":90,"display_name":"Robert Fraser"},"score":98,"creation_date":1273141518,"post_id":295579,"comment_id":2815132,"body_markdown":"@mamama -- Perhaps, but it&#39;s attributed to him. Henry Ford didn&#39;t invent the car, the Wright Bros. didn&#39;t invent the airplane, and and Galleleo wasn&#39;t the first to figure out the Earth revolved around the sun... the world is made up of stolen inventions (and love).","body":"@mamama -- Perhaps, but it&#39;s attributed to him. Henry Ford didn&#39;t invent the car, the Wright Bros. didn&#39;t invent the airplane, and and Galleleo wasn&#39;t the first to figure out the Earth revolved around the sun... the world is made up of stolen inventions (and love)."},{"owner":{"account_id":266709,"reputation":11846,"user_id":554431,"display_name":"bestsss"},"score":0,"creation_date":1307388839,"post_id":295579,"comment_id":7297866,"body_markdown":"@Kip, the microbenchmark for the algorithm could be off due to the relatively large table. When the entire table is in the cache (tight loops) there won&#39;t be cache misses. The boolean[] should be replaced by long constants (or array) and it will gain some more.","body":"@Kip, the microbenchmark for the algorithm could be off due to the relatively large table. When the entire table is in the cache (tight loops) there won&#39;t be cache misses. The boolean[] should be replaced by long constants (or array) and it will gain some more."},{"owner":{"account_id":141346,"reputation":3444,"user_id":348306,"display_name":"Nabb"},"score":4,"creation_date":1320149194,"post_id":295579,"comment_id":9739524,"body_markdown":"You might get a tiny speed increase in the &#39;quickfail&#39; by using something like `((1&lt;&lt;(n&amp;15))|65004) != 0`, instead of having three separate checks.","body":"You might get a tiny speed increase in the &#39;quickfail&#39; by using something like <code>((1&lt;&lt;(n&amp;15))|65004) != 0</code>, instead of having three separate checks."},{"owner":{"account_id":1202806,"reputation":23213,"user_id":1173112,"accept_rate":89,"display_name":"Koray Tugay"},"score":1,"creation_date":1369529439,"post_id":295579,"comment_id":24136123,"body_markdown":"Why are you adding the 0.5 ?","body":"Why are you adding the 0.5 ?"},{"owner":{"account_id":9921,"reputation":107674,"user_id":18511,"accept_rate":92,"display_name":"Kip"},"score":1,"creation_date":1369770137,"post_id":295579,"comment_id":24212841,"body_markdown":"@KorayTugay to round the number. My concern was that Math.sqrt might return a value that is slightly off due to roundoff error. Say, if `math.sqrt(100)` returned `9.999999999999999` instead of `10`. I am not sure if there are any cases where this actually happens, however.","body":"@KorayTugay to round the number. My concern was that Math.sqrt might return a value that is slightly off due to roundoff error. Say, if <code>math.sqrt(100)</code> returned <code>9.999999999999999</code> instead of <code>10</code>. I am not sure if there are any cases where this actually happens, however."},{"owner":{"account_id":1968644,"reputation":32046,"user_id":1768232,"accept_rate":81,"display_name":"durron597"},"score":0,"creation_date":1370905843,"post_id":295579,"comment_id":24623212,"body_markdown":"@Kip check out my answer, I got a significant performance gain on your posted answer.","body":"@Kip check out my answer, I got a significant performance gain on your posted answer."},{"owner":{"account_id":1968644,"reputation":32046,"user_id":1768232,"accept_rate":81,"display_name":"durron597"},"score":0,"creation_date":1371135475,"post_id":295579,"comment_id":24720784,"body_markdown":"@Kip I edited my post to have a third algorithm that sometimes does better than my previous answer.","body":"@Kip I edited my post to have a third algorithm that sometimes does better than my previous answer."},{"owner":{"account_id":1554495,"reputation":10643,"user_id":1446048,"accept_rate":74,"display_name":"OJFord"},"score":1,"creation_date":1398986073,"post_id":295579,"comment_id":35886857,"body_markdown":"Surprised not to see, on such a popular question, anyone point out that you can be accurate at higher `n` using so-called &#39;Carmack hack&#39; by performing another iteration(s). N.B. The result isn&#39;t Carmack&#39;s, but Newton/Raphson&#39;s, I suppose the &#39;magic number&#39; hack would be a fairer attribution to Carmack.","body":"Surprised not to see, on such a popular question, anyone point out that you can be accurate at higher <code>n</code> using so-called &#39;Carmack hack&#39; by performing another iteration(s). N.B. The result isn&#39;t Carmack&#39;s, but Newton/Raphson&#39;s, I suppose the &#39;magic number&#39; hack would be a fairer attribution to Carmack."},{"owner":{"account_id":5405149,"reputation":1274,"user_id":4303905,"accept_rate":92,"display_name":"Travis"},"score":1,"creation_date":1423543242,"post_id":295579,"comment_id":45181193,"body_markdown":"Not sure if this is what you want, but this takes about 1 millisecond. (javascript, not Java.) `return math.sqrt(x).split(&quot;.&quot;).length &gt; 1`","body":"Not sure if this is what you want, but this takes about 1 millisecond. (javascript, not Java.) <code>return math.sqrt(x).split(&quot;.&quot;).length &gt; 1</code>"},{"owner":{"account_id":5120569,"reputation":1168,"user_id":4602283,"accept_rate":75,"display_name":"Jeutnarg"},"score":0,"creation_date":1467904909,"post_id":295579,"comment_id":63919886,"body_markdown":"I&#39;m late to the party, but I believe you could squeeze even more performance out of your final code snippet by using techniques from here: http://stackoverflow.com/questions/15621083/why-does-java-switch-on-contiguous-ints-appear-to-run-faster-with-added-cases?lq=1","body":"I&#39;m late to the party, but I believe you could squeeze even more performance out of your final code snippet by using techniques from here: <a href=\"http://stackoverflow.com/questions/15621083/why-does-java-switch-on-contiguous-ints-appear-to-run-faster-with-added-cases?lq=1\" title=\"why does java switch on contiguous ints appear to run faster with added cases\">stackoverflow.com/questions/15621083/&hellip;</a>"},{"owner":{"account_id":9921,"reputation":107674,"user_id":18511,"accept_rate":92,"display_name":"Kip"},"score":1,"creation_date":1476281312,"post_id":295579,"comment_id":67279310,"body_markdown":"@user3932000 I did it because it may result in a slight compiler optimization. Here is some better discussion: http://stackoverflow.com/questions/5547663/java-final-method-what-does-it-promise","body":"@user3932000 I did it because it may result in a slight compiler optimization. Here is some better discussion: <a href=\"http://stackoverflow.com/questions/5547663/java-final-method-what-does-it-promise\" title=\"java final method what does it promise\">stackoverflow.com/questions/5547663/&hellip;</a>"},{"owner":{"account_id":508726,"reputation":352,"user_id":1761967,"accept_rate":67,"display_name":"ZKe"},"score":1,"creation_date":1485290574,"post_id":295579,"comment_id":70862427,"body_markdown":"I have never encountered a PE problem that could not be computed in under a minute in *ruby*. So the argument that performance matters to this end is a little unbelievable.","body":"I have never encountered a PE problem that could not be computed in under a minute in <i>ruby</i>. So the argument that performance matters to this end is a little unbelievable."},{"owner":{"account_id":1448228,"reputation":3218,"user_id":1366016,"accept_rate":60,"display_name":"Wheezil"},"score":0,"creation_date":1488298321,"post_id":295579,"comment_id":72164548,"body_markdown":"I am curious how this wisdom holds up in the face of innovations like SSE SQRTPS?  http://www.felixcloutier.com/x86/SQRTPS.html,","body":"I am curious how this wisdom holds up in the face of innovations like SSE SQRTPS?  <a href=\"http://www.felixcloutier.com/x86/SQRTPS.html\" rel=\"nofollow noreferrer\">felixcloutier.com/x86/SQRTPS.html</a>,"},{"owner":{"account_id":286249,"reputation":43941,"user_id":585411,"accept_rate":60,"display_name":"btilly"},"score":0,"creation_date":1513131126,"post_id":295579,"comment_id":82530419,"body_markdown":"What is an example of a problem where this makes a difference?  Rather than calculating individual square roots for a long list it is much better to walk up the list of perfect squares and filter the list that way.","body":"What is an example of a problem where this makes a difference?  Rather than calculating individual square roots for a long list it is much better to walk up the list of perfect squares and filter the list that way."},{"owner":{"account_id":71043,"reputation":30960,"user_id":205521,"accept_rate":89,"display_name":"Thomas Ahle"},"score":1,"creation_date":1514937186,"post_id":295579,"comment_id":83112566,"body_markdown":"For very large numbers, there is a fast randomized algorithm: http://petr-mitrichev.blogspot.com/2017/12/a-quadratic-week.html","body":"For very large numbers, there is a fast randomized algorithm: <a href=\"http://petr-mitrichev.blogspot.com/2017/12/a-quadratic-week.html\" rel=\"nofollow noreferrer\">petr-mitrichev.blogspot.com/2017/12/a-quadratic-week.html</a>"},{"owner":{"account_id":4680926,"reputation":2259,"user_id":3789665,"accept_rate":57,"display_name":"greybeard"},"score":2,"creation_date":1521999149,"post_id":295579,"comment_id":85960263,"body_markdown":"@RobertFraser [Galileo Galilei](https://en.m.wikipedia.org/wiki/Galileo_Galilei) wasn&#39;t the first to have his name mutilated.","body":"@RobertFraser <a href=\"https://en.m.wikipedia.org/wiki/Galileo_Galilei\" rel=\"nofollow noreferrer\">Galileo Galilei</a> wasn&#39;t the first to have his name mutilated."},{"owner":{"account_id":873870,"reputation":47256,"user_id":924109,"accept_rate":86,"display_name":"Rok Kralj"},"score":1,"creation_date":1524416614,"post_id":295579,"comment_id":86952797,"body_markdown":"@RobertFraser: Yes, and those are great injustices, about which you can do nothing about. This is never a way to justify your bad behavior.","body":"@RobertFraser: Yes, and those are great injustices, about which you can do nothing about. This is never a way to justify your bad behavior."},{"owner":{"account_id":5263661,"reputation":101,"user_id":11307631,"display_name":"Brady Gilg"},"score":2,"creation_date":1570810807,"post_id":295579,"comment_id":103045272,"body_markdown":"@RobertFraser I&#39;ve never heard anybody claim Galileo invented the heliocentric model. It&#39;s always attributed to Copernicus. Is that who you meant?","body":"@RobertFraser I&#39;ve never heard anybody claim Galileo invented the heliocentric model. It&#39;s always attributed to Copernicus. Is that who you meant?"}],"answers":[{"tags":[],"owner":{"account_id":2912,"reputation":160,"user_id":4125,"display_name":"Celestial M Weasel"},"down_vote_count":3,"up_vote_count":3,"is_accepted":false,"score":0,"last_activity_date":1226929709,"creation_date":1226929709,"answer_id":295587,"question_id":295579,"body_markdown":"If you want speed, given that your integers are of finite size, I suspect that the quickest way would involve (a) partitioning the parameters by size (e.g. into categories by largest bit set), then checking the value against an array of perfect squares within that range. ","title":"Fastest way to determine if an integer&#39;s square root is an integer","body":"<p>If you want speed, given that your integers are of finite size, I suspect that the quickest way would involve (a) partitioning the parameters by size (e.g. into categories by largest bit set), then checking the value against an array of perfect squares within that range. </p>\n"},{"tags":[],"owner":{"account_id":2222,"reputation":61064,"user_id":3055,"accept_rate":75,"display_name":"chakrit"},"down_vote_count":3,"up_vote_count":60,"is_accepted":false,"score":57,"last_activity_date":1680649592,"creation_date":1226929819,"answer_id":295590,"question_id":295579,"body_markdown":"I was thinking about the horrible times I&#39;ve spent in Numerical Analysis course.\r\n\r\nAnd then I remember, there was this function circling around the &#39;net from the Quake Source code:\r\n\r\n```lang-cpp\r\nfloat Q_rsqrt( float number )\r\n{\r\n  long i;\r\n  float x2, y;\r\n  const float threehalfs = 1.5F;\r\n\r\n  x2 = number * 0.5F;\r\n  y  = number;\r\n  i  = * ( long * ) &amp;y;  // evil floating point bit level hacking\r\n  i  = 0x5f3759df - ( i &gt;&gt; 1 ); // wtf?\r\n  y  = * ( float * ) &amp;i;\r\n  y  = y * ( threehalfs - ( x2 * y * y ) ); // 1st iteration\r\n  // y  = y * ( threehalfs - ( x2 * y * y ) ); // 2nd iteration, this can be removed\r\n\r\n  #ifndef Q3_VM\r\n  #ifdef __linux__\r\n    assert( !isnan(y) ); // bk010122 - FPE?\r\n  #endif\r\n  #endif\r\n  return y;\r\n}\r\n```\r\n\r\nWhich basically calculates a square root, using Newton&#39;s approximation function (cant remember the exact name).\r\n\r\nIt should be usable and might even be faster, it&#39;s from one of the phenomenal id software&#39;s game!\r\n\r\nIt&#39;s written in C++ but it should not be too hard to reuse the same technique in Java once you get the idea:\r\n\r\nI originally found it at: &lt;https://web.archive.org/web/20110708173806/https://www.codemaestro.com/reviews/9&gt;\r\n\r\nNewton&#39;s method explained at wikipedia: &lt;http://en.wikipedia.org/wiki/Newton%27s_method&gt;\r\n\r\nYou can follow the link for more explanation of how it works, but if you don&#39;t care much, then this is roughly what I remember from reading the blog and from taking the Numerical Analysis course:\r\n\r\n* the `* (long*) &amp;y` is basically a fast convert-to-long function so integer operations can be applied on the raw bytes.\r\n* the `0x5f3759df - (i &gt;&gt; 1);` line is a pre-calculated seed value for the approximation function.\r\n* the `* (float*) &amp;i` converts the value back to floating point.\r\n* the `y  = y * ( threehalfs - ( x2 * y * y ) )` line bascially iterates the value over the function again.\r\n\r\nThe approximation function gives more precise values the more you iterate the function over the result. In Quake&#39;s case, one iteration is &quot;good enough&quot;, but if it wasn&#39;t for you... then you could add as much iteration as you need.\r\n\r\nThis should be faster because it reduces the number of division operations done in naive square rooting down to a simple divide by 2 (actually a `* 0.5F` multiply operation) and replace it with a few fixed number of multiplication operations instead.","title":"Fastest way to determine if an integer&#39;s square root is an integer","body":"<p>I was thinking about the horrible times I've spent in Numerical Analysis course.</p>\n<p>And then I remember, there was this function circling around the 'net from the Quake Source code:</p>\n<pre class=\"lang-cpp prettyprint-override\"><code>float Q_rsqrt( float number )\n{\n  long i;\n  float x2, y;\n  const float threehalfs = 1.5F;\n\n  x2 = number * 0.5F;\n  y  = number;\n  i  = * ( long * ) &amp;y;  // evil floating point bit level hacking\n  i  = 0x5f3759df - ( i &gt;&gt; 1 ); // wtf?\n  y  = * ( float * ) &amp;i;\n  y  = y * ( threehalfs - ( x2 * y * y ) ); // 1st iteration\n  // y  = y * ( threehalfs - ( x2 * y * y ) ); // 2nd iteration, this can be removed\n\n  #ifndef Q3_VM\n  #ifdef __linux__\n    assert( !isnan(y) ); // bk010122 - FPE?\n  #endif\n  #endif\n  return y;\n}\n</code></pre>\n<p>Which basically calculates a square root, using Newton's approximation function (cant remember the exact name).</p>\n<p>It should be usable and might even be faster, it's from one of the phenomenal id software's game!</p>\n<p>It's written in C++ but it should not be too hard to reuse the same technique in Java once you get the idea:</p>\n<p>I originally found it at: <a href=\"https://web.archive.org/web/20110708173806/https://www.codemaestro.com/reviews/9\" rel=\"nofollow noreferrer\">https://web.archive.org/web/20110708173806/https://www.codemaestro.com/reviews/9</a></p>\n<p>Newton's method explained at wikipedia: <a href=\"http://en.wikipedia.org/wiki/Newton%27s_method\" rel=\"nofollow noreferrer\">http://en.wikipedia.org/wiki/Newton%27s_method</a></p>\n<p>You can follow the link for more explanation of how it works, but if you don't care much, then this is roughly what I remember from reading the blog and from taking the Numerical Analysis course:</p>\n<ul>\n<li>the <code>* (long*) &amp;y</code> is basically a fast convert-to-long function so integer operations can be applied on the raw bytes.</li>\n<li>the <code>0x5f3759df - (i &gt;&gt; 1);</code> line is a pre-calculated seed value for the approximation function.</li>\n<li>the <code>* (float*) &amp;i</code> converts the value back to floating point.</li>\n<li>the <code>y  = y * ( threehalfs - ( x2 * y * y ) )</code> line bascially iterates the value over the function again.</li>\n</ul>\n<p>The approximation function gives more precise values the more you iterate the function over the result. In Quake's case, one iteration is &quot;good enough&quot;, but if it wasn't for you... then you could add as much iteration as you need.</p>\n<p>This should be faster because it reduces the number of division operations done in naive square rooting down to a simple divide by 2 (actually a <code>* 0.5F</code> multiply operation) and replace it with a few fixed number of multiplication operations instead.</p>\n"},{"tags":[],"owner":{"account_id":11683,"reputation":1438111,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"down_vote_count":0,"up_vote_count":36,"is_accepted":false,"score":36,"last_activity_date":1226933328,"creation_date":1226929848,"answer_id":295592,"question_id":295579,"body_markdown":"If you do a binary chop to try to find the &quot;right&quot; square root, you can fairly easily detect if the value you&#39;ve got is close enough to tell:\r\n\r\n    (n+1)^2 = n^2 + 2n + 1\r\n    (n-1)^2 = n^2 - 2n + 1\r\n\r\nSo having calculated `n^2`, the options are:\r\n\r\n  - `n^2 = target`: done, return true\r\n  - `n^2 + 2n + 1 &gt; target &gt; n^2` : you&#39;re close, but it&#39;s not perfect: return false\r\n  - `n^2 - 2n + 1 &lt; target &lt; n^2` : ditto\r\n  - `target &lt; n^2 - 2n + 1` : binary chop on a lower `n`\r\n  - `target &gt; n^2 + 2n + 1` : binary chop on a higher `n`\r\n\r\n(Sorry, this uses `n` as your current guess, and `target` for the parameter. Apologise for the confusion!)\r\n\r\nI don&#39;t know whether this will be faster or not, but it&#39;s worth a try.\r\n\r\nEDIT: The binary chop doesn&#39;t have to take in the whole range of integers, either `(2^x)^2 = 2^(2x)`, so once you&#39;ve found the top set bit in your target (which can be done with a bit-twiddling trick; I forget exactly how) you can quickly get a range of potential answers. Mind you, a naive binary chop is still only going to take up to 31 or 32 iterations.","title":"Fastest way to determine if an integer&#39;s square root is an integer","body":"<p>If you do a binary chop to try to find the \"right\" square root, you can fairly easily detect if the value you've got is close enough to tell:</p>\n\n<pre><code>(n+1)^2 = n^2 + 2n + 1\n(n-1)^2 = n^2 - 2n + 1\n</code></pre>\n\n<p>So having calculated <code>n^2</code>, the options are:</p>\n\n<ul>\n<li><code>n^2 = target</code>: done, return true</li>\n<li><code>n^2 + 2n + 1 &gt; target &gt; n^2</code> : you're close, but it's not perfect: return false</li>\n<li><code>n^2 - 2n + 1 &lt; target &lt; n^2</code> : ditto</li>\n<li><code>target &lt; n^2 - 2n + 1</code> : binary chop on a lower <code>n</code></li>\n<li><code>target &gt; n^2 + 2n + 1</code> : binary chop on a higher <code>n</code></li>\n</ul>\n\n<p>(Sorry, this uses <code>n</code> as your current guess, and <code>target</code> for the parameter. Apologise for the confusion!)</p>\n\n<p>I don't know whether this will be faster or not, but it's worth a try.</p>\n\n<p>EDIT: The binary chop doesn't have to take in the whole range of integers, either <code>(2^x)^2 = 2^(2x)</code>, so once you've found the top set bit in your target (which can be done with a bit-twiddling trick; I forget exactly how) you can quickly get a range of potential answers. Mind you, a naive binary chop is still only going to take up to 31 or 32 iterations.</p>\n"},{"tags":[],"owner":{"account_id":1392,"reputation":65576,"user_id":1862,"accept_rate":59,"display_name":"Kibbee"},"down_vote_count":3,"up_vote_count":41,"is_accepted":false,"score":38,"last_activity_date":1562027852,"creation_date":1226929905,"answer_id":295595,"question_id":295579,"body_markdown":"I&#39;m not sure if it would be faster, or even accurate, but you could use [John Carmack&#39;s Magical Square Root][1], algorithm to solve the square root faster.  You could probably easily test this for all possible 32 bit integers, and validate that you actually got correct results, as it&#39;s only an appoximation.  However, now that I think about it, using doubles is approximating also, so I&#39;m not sure how that would come into play.\r\n\r\n\r\n  [1]: https://web.archive.org/web/20081106174735/http://www.codemaestro.com/reviews/9","title":"Fastest way to determine if an integer&#39;s square root is an integer","body":"<p>I'm not sure if it would be faster, or even accurate, but you could use <a href=\"https://web.archive.org/web/20081106174735/http://www.codemaestro.com/reviews/9\" rel=\"nofollow noreferrer\">John Carmack's Magical Square Root</a>, algorithm to solve the square root faster.  You could probably easily test this for all possible 32 bit integers, and validate that you actually got correct results, as it's only an appoximation.  However, now that I think about it, using doubles is approximating also, so I'm not sure how that would come into play.</p>\n"},{"tags":[],"owner":{"account_id":2212,"reputation":403860,"user_id":3043,"accept_rate":70,"display_name":"Joel Coehoorn"},"down_vote_count":6,"up_vote_count":1,"is_accepted":false,"score":-5,"last_activity_date":1226933366,"creation_date":1226930240,"answer_id":295613,"question_id":295579,"body_markdown":"Don&#39;t know about fastest, but the simplest is to take the square root in the normal fashion, multiply the result by itself, and see if it matches your original value.\r\n\r\nSince we&#39;re talking integers here, the fasted would probably involve a collection where you can just make a lookup.","title":"Fastest way to determine if an integer&#39;s square root is an integer","body":"<p>Don't know about fastest, but the simplest is to take the square root in the normal fashion, multiply the result by itself, and see if it matches your original value.</p>\n\n<p>Since we're talking integers here, the fasted would probably involve a collection where you can just make a lookup.</p>\n"},{"tags":[],"owner":{"account_id":12710,"reputation":29685,"user_id":25188,"accept_rate":89,"display_name":"John D. Cook"},"down_vote_count":0,"up_vote_count":138,"is_accepted":false,"score":138,"last_activity_date":1233088545,"creation_date":1226932037,"answer_id":295678,"question_id":295579,"body_markdown":"You&#39;ll have to do some benchmarking.  The best algorithm will depend on the distribution of your inputs.\r\n\r\nYour algorithm may be nearly optimal, but you might want to do a quick check to rule out some possibilities before calling your square root routine.  For example, look at the last digit of your number in hex by doing a bit-wise &quot;and.&quot;  Perfect squares can only end in 0, 1, 4, or 9 in base 16,  So for 75% of your inputs (assuming they are uniformly distributed) you can avoid a call to the square root in exchange for some very fast bit twiddling.\r\n\r\nKip benchmarked the following code implementing the hex trick.  When testing numbers 1 through 100,000,000, this code ran twice as fast as the original.\r\n\r\n    public final static boolean isPerfectSquare(long n)\r\n    {\r\n        if (n &lt; 0)\r\n            return false;\r\n      \r\n        switch((int)(n &amp; 0xF))\r\n        {\r\n        case 0: case 1: case 4: case 9:\r\n            long tst = (long)Math.sqrt(n);\r\n            return tst*tst == n;\r\n        \r\n        default:\r\n            return false;\r\n        }\r\n    }\r\n\r\nWhen I tested the analogous code in C++, it actually ran slower than the original. However, when I eliminated the switch statement, the hex trick once again make the code twice as fast.\r\n\r\n    int isPerfectSquare(int n)\r\n    {\r\n        int h = n &amp; 0xF;  // h is the last hex &quot;digit&quot;\r\n        if (h &gt; 9)\r\n            return 0;\r\n        // Use lazy evaluation to jump out of the if statement as soon as possible\r\n        if (h != 2 &amp;&amp; h != 3 &amp;&amp; h != 5 &amp;&amp; h != 6 &amp;&amp; h != 7 &amp;&amp; h != 8)\r\n        {\r\n            int t = (int) floor( sqrt((double) n) + 0.5 );\r\n            return t*t == n;\r\n        }\r\n        return 0;\r\n    }\r\n\r\nEliminating the switch statement had little effect on the C# code.","title":"Fastest way to determine if an integer&#39;s square root is an integer","body":"<p>You'll have to do some benchmarking.  The best algorithm will depend on the distribution of your inputs.</p>\n\n<p>Your algorithm may be nearly optimal, but you might want to do a quick check to rule out some possibilities before calling your square root routine.  For example, look at the last digit of your number in hex by doing a bit-wise \"and.\"  Perfect squares can only end in 0, 1, 4, or 9 in base 16,  So for 75% of your inputs (assuming they are uniformly distributed) you can avoid a call to the square root in exchange for some very fast bit twiddling.</p>\n\n<p>Kip benchmarked the following code implementing the hex trick.  When testing numbers 1 through 100,000,000, this code ran twice as fast as the original.</p>\n\n<pre><code>public final static boolean isPerfectSquare(long n)\n{\n    if (n &lt; 0)\n        return false;\n\n    switch((int)(n &amp; 0xF))\n    {\n    case 0: case 1: case 4: case 9:\n        long tst = (long)Math.sqrt(n);\n        return tst*tst == n;\n\n    default:\n        return false;\n    }\n}\n</code></pre>\n\n<p>When I tested the analogous code in C++, it actually ran slower than the original. However, when I eliminated the switch statement, the hex trick once again make the code twice as fast.</p>\n\n<pre><code>int isPerfectSquare(int n)\n{\n    int h = n &amp; 0xF;  // h is the last hex \"digit\"\n    if (h &gt; 9)\n        return 0;\n    // Use lazy evaluation to jump out of the if statement as soon as possible\n    if (h != 2 &amp;&amp; h != 3 &amp;&amp; h != 5 &amp;&amp; h != 6 &amp;&amp; h != 7 &amp;&amp; h != 8)\n    {\n        int t = (int) floor( sqrt((double) n) + 0.5 );\n        return t*t == n;\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Eliminating the switch statement had little effect on the C# code.</p>\n"},{"tags":[],"owner":{"account_id":970,"reputation":399857,"user_id":1288,"accept_rate":93,"display_name":"Bill the Lizard"},"down_vote_count":0,"up_vote_count":18,"is_accepted":false,"score":18,"last_activity_date":1226934289,"creation_date":1226933904,"answer_id":295761,"question_id":295579,"body_markdown":"It should be much faster to use [Newton&#39;s method][1] to calculate the [Integer Square Root][2], then square this number and check, as you do in your current solution.  Newton&#39;s method is the basis for the Carmack solution mentioned in some other answers.  You should be able to get a faster answer since you&#39;re only interested in the integer part of the root, allowing you to stop the approximation algorithm sooner.\r\n\r\nAnother optimization that you can try:  If the [Digital Root][3] of a number doesn&#39;t end in \r\n1, 4, 7, or 9 the number is **not** a perfect square.  This can be used as a quick way to eliminate 60% of your inputs before applying the slower square root algorithm.\r\n\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Newton%27s_method\r\n  [2]: http://en.wikipedia.org/wiki/Integer_square_root\r\n  [3]: http://en.wikipedia.org/wiki/Digital_root","title":"Fastest way to determine if an integer&#39;s square root is an integer","body":"<p>It should be much faster to use <a href=\"http://en.wikipedia.org/wiki/Newton%27s_method\" rel=\"noreferrer\">Newton's method</a> to calculate the <a href=\"http://en.wikipedia.org/wiki/Integer_square_root\" rel=\"noreferrer\">Integer Square Root</a>, then square this number and check, as you do in your current solution.  Newton's method is the basis for the Carmack solution mentioned in some other answers.  You should be able to get a faster answer since you're only interested in the integer part of the root, allowing you to stop the approximation algorithm sooner.</p>\n\n<p>Another optimization that you can try:  If the <a href=\"http://en.wikipedia.org/wiki/Digital_root\" rel=\"noreferrer\">Digital Root</a> of a number doesn't end in \n1, 4, 7, or 9 the number is <strong>not</strong> a perfect square.  This can be used as a quick way to eliminate 60% of your inputs before applying the slower square root algorithm.</p>\n"},{"tags":[],"owner":{"account_id":15751,"reputation":13418,"user_id":33611,"accept_rate":74,"display_name":"Elijah"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1226964598,"creation_date":1226964598,"answer_id":297350,"question_id":295579,"body_markdown":"If speed is a concern, why not partition off the most commonly used set of inputs and their values to a lookup table and then do whatever optimized magic algorithm you have come up with for the exceptional cases?","title":"Fastest way to determine if an integer&#39;s square root is an integer","body":"<p>If speed is a concern, why not partition off the most commonly used set of inputs and their values to a lookup table and then do whatever optimized magic algorithm you have come up with for the exceptional cases?</p>\n"},{"tags":[],"owner":{"account_id":14294,"reputation":69,"user_id":29288,"display_name":"mrzl"},"down_vote_count":3,"up_vote_count":18,"is_accepted":false,"score":15,"last_activity_date":1523005669,"creation_date":1227023864,"answer_id":299183,"question_id":295579,"body_markdown":"&gt; I want this function to work with all\r\n&gt; positive 64-bit signed integers\r\n\r\n`Math.sqrt()` works with doubles as input parameters, so you won&#39;t get accurate results for integers bigger than **2^53**.","title":"Fastest way to determine if an integer&#39;s square root is an integer","body":"<blockquote>\n  <p>I want this function to work with all\n  positive 64-bit signed integers</p>\n</blockquote>\n\n<p><code>Math.sqrt()</code> works with doubles as input parameters, so you won't get accurate results for integers bigger than <strong>2^53</strong>.</p>\n"},{"tags":[],"owner":{"account_id":8382,"reputation":6567,"user_id":15069,"accept_rate":25,"display_name":"Hugh Allen"},"down_vote_count":1,"up_vote_count":11,"is_accepted":false,"score":10,"last_activity_date":1227930756,"creation_date":1227930756,"answer_id":327134,"question_id":295579,"body_markdown":"It&#39;s been pointed out that the last `d` digits of a perfect square can only take on certain values. The last `d` digits (in base `b`) of a number `n` is the same as the remainder when `n` is divided by `b`&lt;sup&gt;`d`&lt;/sup&gt;, ie. in C notation `n % pow(b, d)`.\r\n\r\nThis can be generalized to any modulus `m`, ie. `n % m` can be used to rule out some percentage of numbers from being perfect squares. The modulus you are currently using is 64, which allows 12, ie. 19% of remainders, as possible squares. With a little coding I found the modulus 110880, which allows only 2016, ie. 1.8% of remainders as possible squares. So depending on the cost of a modulus operation (ie. division) and a table lookup versus a square root on your machine, using this modulus might be faster.\r\n\r\nBy the way if Java has a way to store a packed array of bits for the lookup table, don&#39;t use it. 110880 32-bit words is not much RAM these days and fetching a machine word is going to be faster than fetching a single bit.","title":"Fastest way to determine if an integer&#39;s square root is an integer","body":"<p>It's been pointed out that the last <code>d</code> digits of a perfect square can only take on certain values. The last <code>d</code> digits (in base <code>b</code>) of a number <code>n</code> is the same as the remainder when <code>n</code> is divided by <code>b</code><sup><code>d</code></sup>, ie. in C notation <code>n % pow(b, d)</code>.</p>\n\n<p>This can be generalized to any modulus <code>m</code>, ie. <code>n % m</code> can be used to rule out some percentage of numbers from being perfect squares. The modulus you are currently using is 64, which allows 12, ie. 19% of remainders, as possible squares. With a little coding I found the modulus 110880, which allows only 2016, ie. 1.8% of remainders as possible squares. So depending on the cost of a modulus operation (ie. division) and a table lookup versus a square root on your machine, using this modulus might be faster.</p>\n\n<p>By the way if Java has a way to store a packed array of bits for the lookup table, don't use it. 110880 32-bit words is not much RAM these days and fetching a machine word is going to be faster than fetching a single bit.</p>\n"},{"tags":[],"owner":{"account_id":17619,"reputation":15368,"user_id":39622,"accept_rate":78,"display_name":"Cyrille Ka"},"down_vote_count":1,"up_vote_count":13,"is_accepted":false,"score":12,"last_activity_date":1228212022,"creation_date":1228212022,"answer_id":333510,"question_id":295579,"body_markdown":"Just for the record, another approach is to use the prime decomposition. If every factor of the decomposition is even, then the number is a perfect square. So what you want is to see if a number can be decomposed as a product of squares of prime numbers. Of course, you don&#39;t need to obtain such a decomposition, just to see if it exists.\r\n\r\nFirst build a table of squares of prime numbers which are lower than 2^32. This is far smaller than a table of all integers up to this limit.\r\n\r\nA solution would then be like this:\r\n\r\n    boolean isPerfectSquare(long number)\r\n    {\r\n        if (number &lt; 0) return false;\r\n        if (number &lt; 2) return true;\r\n\r\n        for (int i = 0; ; i++)\r\n        {\r\n            long square = squareTable[i];\r\n            if (square &gt; number) return false;\r\n            while (number % square == 0)\r\n            {\r\n                number /= square;\r\n            }\r\n            if (number == 1) return true;\r\n        }\r\n    }\r\n\r\nI guess it&#39;s a bit cryptic. What it does is checking in every step that the square of a prime number divide the input number. If it does then it divides the number by the square as long as it is possible, to remove this square from the prime decomposition.\r\nIf by this process, we came to 1, then the input number was a decomposition of square of prime numbers. If the square becomes larger than the number itself, then there is no way this square, or any larger squares, can divide it, so the number can not be a decomposition of squares of prime numbers.\r\n\r\nGiven nowadays&#39; sqrt done in hardware and the need to compute prime numbers here, I guess this solution is way slower. But it should give better results than solution with sqrt which won&#39;t work over 2^54, as says mrzl [in his answer][1].\r\n\r\n\r\n  [1]: #299183","title":"Fastest way to determine if an integer&#39;s square root is an integer","body":"<p>Just for the record, another approach is to use the prime decomposition. If every factor of the decomposition is even, then the number is a perfect square. So what you want is to see if a number can be decomposed as a product of squares of prime numbers. Of course, you don't need to obtain such a decomposition, just to see if it exists.</p>\n\n<p>First build a table of squares of prime numbers which are lower than 2^32. This is far smaller than a table of all integers up to this limit.</p>\n\n<p>A solution would then be like this:</p>\n\n<pre><code>boolean isPerfectSquare(long number)\n{\n    if (number &lt; 0) return false;\n    if (number &lt; 2) return true;\n\n    for (int i = 0; ; i++)\n    {\n        long square = squareTable[i];\n        if (square &gt; number) return false;\n        while (number % square == 0)\n        {\n            number /= square;\n        }\n        if (number == 1) return true;\n    }\n}\n</code></pre>\n\n<p>I guess it's a bit cryptic. What it does is checking in every step that the square of a prime number divide the input number. If it does then it divides the number by the square as long as it is possible, to remove this square from the prime decomposition.\nIf by this process, we came to 1, then the input number was a decomposition of square of prime numbers. If the square becomes larger than the number itself, then there is no way this square, or any larger squares, can divide it, so the number can not be a decomposition of squares of prime numbers.</p>\n\n<p>Given nowadays' sqrt done in hardware and the need to compute prime numbers here, I guess this solution is way slower. But it should give better results than solution with sqrt which won't work over 2^54, as says mrzl in his answer.</p>\n"},{"tags":[],"owner":{"account_id":17260,"reputation":28385,"user_id":38426,"display_name":"BobbyShaftoe"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1228455398,"creation_date":1228455398,"answer_id":342996,"question_id":295579,"body_markdown":"For performance, you very often have to do some compromsies. Others have expressed various methods, however, you noted Carmack&#39;s hack was faster up to certain values of N. Then, you should check the &quot;n&quot; and if it is less than that number N, use Carmack&#39;s hack, else use some other method described in the answers here.","title":"Fastest way to determine if an integer&#39;s square root is an integer","body":"<p>For performance, you very often have to do some compromsies. Others have expressed various methods, however, you noted Carmack's hack was faster up to certain values of N. Then, you should check the \"n\" and if it is less than that number N, use Carmack's hack, else use some other method described in the answers here.</p>\n"},{"tags":[],"owner":{"account_id":21012,"reputation":1198,"user_id":50761,"display_name":"David Lehavi"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1230884266,"creation_date":1230847958,"answer_id":405554,"question_id":295579,"body_markdown":"You should get rid of the 2-power part of N right from the start.\r\n\r\n**2nd Edit**\r\nThe magical expression for m below should be\r\n\r\n    m = N - (N &amp; (N-1));\r\n\r\nand not as written\r\n\r\n**End of 2nd edit**\r\n\r\n    m = N &amp; (N-1); // the lawest bit of N\r\n    N /= m;\r\n    byte = N &amp; 0x0F;\r\n    if ((m % 2) || (byte !=1 &amp;&amp; byte !=9))\r\n      return false;\r\n\r\n**1st Edit:**\r\n\r\nMinor improvement:\r\n\r\n    m = N &amp; (N-1); // the lawest bit of N\r\n    N /= m;\r\n    if ((m % 2) || (N &amp; 0x07 != 1))\r\n      return false;\r\n\r\n**End of 1st edit**\r\n\r\nNow continue as usual. This way, by the time you get to the floating point part, you already got rid of all the numbers whose 2-power part is odd (about half), and then you only consider 1/8 of whats left. I.e. you run the floating point part on 6% of the numbers.\r\n","title":"Fastest way to determine if an integer&#39;s square root is an integer","body":"<p>You should get rid of the 2-power part of N right from the start.</p>\n\n<p><strong>2nd Edit</strong>\nThe magical expression for m below should be</p>\n\n<pre><code>m = N - (N &amp; (N-1));\n</code></pre>\n\n<p>and not as written</p>\n\n<p><strong>End of 2nd edit</strong></p>\n\n<pre><code>m = N &amp; (N-1); // the lawest bit of N\nN /= m;\nbyte = N &amp; 0x0F;\nif ((m % 2) || (byte !=1 &amp;&amp; byte !=9))\n  return false;\n</code></pre>\n\n<p><strong>1st Edit:</strong></p>\n\n<p>Minor improvement:</p>\n\n<pre><code>m = N &amp; (N-1); // the lawest bit of N\nN /= m;\nif ((m % 2) || (N &amp; 0x07 != 1))\n  return false;\n</code></pre>\n\n<p><strong>End of 1st edit</strong></p>\n\n<p>Now continue as usual. This way, by the time you get to the floating point part, you already got rid of all the numbers whose 2-power part is odd (about half), and then you only consider 1/8 of whats left. I.e. you run the floating point part on 6% of the numbers.</p>\n"},{"tags":[],"owner":{"account_id":5863,"reputation":9597,"user_id":9634,"accept_rate":84,"display_name":"Brent.Longborough"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1674469907,"creation_date":1230848863,"answer_id":405578,"question_id":295579,"body_markdown":"This a rework from decimal to binary of the old Marchant calculator algorithm (sorry, I don&#39;t have a reference), in Ruby, adapted specifically for this question:\r\n\r\n    def isexactsqrt(v)\r\n    \tvalue = v.abs\r\n    \tresidue = value\r\n    \troot = 0\r\n    \tonebit = 1\r\n    \tonebit &lt;&lt;= 8 while (onebit &lt; residue)\r\n    \tonebit &gt;&gt;= 2 while (onebit &gt; residue)\r\n    \twhile (onebit &gt; 0)\r\n    \t\tx = root + onebit\r\n    \t\tif (residue &gt;= x) then\r\n    \t\t\tresidue -= x\r\n    \t\t\troot = x + onebit\r\n    \t\tend\r\n    \t\troot &gt;&gt;= 1\r\n    \t\tonebit &gt;&gt;= 2\r\n    \tend\r\n    \treturn (residue == 0)\r\n    end\r\n\r\nHere&#39;s a workup of something similar (there may be coding style/smells or clunky O/O - it&#39;s the algorithm that counts, and C++ is not my home language). In this case, we&#39;re looking for residue == 0:\r\n\r\n    #include &lt;iostream&gt;  \r\n    \r\n    using namespace std;  \r\n    typedef unsigned long long int llint;\r\n    \r\n    class ISqrt {\t\t\t// Integer Square Root\r\n    \tllint value;\t\t// Integer whose square root is required\r\n    \tllint root;\t\t\t// Result: floor(sqrt(value))\r\n    \tllint residue;\t\t// Result: value-root*root\r\n    \tllint onebit, x;\t// Working bit, working value\r\n    \r\n    public:\r\n    \r\n    \tISqrt(llint v = 2) {\t// Constructor\r\n    \t\tRoot(v);\t\t\t// Take the root \r\n    \t};\r\n    \r\n    \tllint Root(llint r) {\t// Resets and calculates new square root\r\n    \t\tvalue = r;\t\t\t// Store input\r\n    \t\tresidue = value;\t// Initialise for subtracting down\r\n    \t\troot = 0;\t\t\t// Clear root accumulator\r\n    \t\t\r\n    \t\tonebit = 1;\t\t\t\t\t// Calculate start value of counter\r\n    \t\tonebit &lt;&lt;= (8*sizeof(llint)-2);\t\t\t// Set up counter bit as greatest odd power of 2 \r\n    \t\twhile (onebit &gt; residue) {onebit &gt;&gt;= 2; };\t// Shift down until just &lt; value\r\n    \t\t\r\n    \t\twhile (onebit &gt; 0) {\r\n    \t\t\tx = root ^ onebit;\t\t\t// Will check root+1bit (root bit corresponding to onebit is always zero)\r\n    \t\t\tif (residue &gt;= x) {\t\t\t// Room to subtract?\r\n    \t\t\t\tresidue -= x;\t\t\t// Yes - deduct from residue\r\n    \t\t\t\troot = x + onebit;\t\t// and step root\r\n    \t\t\t};\r\n    \t\t\troot &gt;&gt;= 1;\r\n    \t\t\tonebit &gt;&gt;= 2;\r\n    \t\t};\r\n    \t\treturn root;\t\t\t\t\t\r\n    \t};\r\n    \tllint Residue() {\t\t\t// Returns residue from last calculation\r\n    \t\treturn residue;\t\t\t\t\t\r\n    \t};\r\n    };\r\n    \r\n    int main() {\r\n    \tllint big, i, q, r, v, delta;\r\n    \tbig = 0; big = (big-1);\t\t\t// Kludge for &quot;big number&quot;\r\n    \tISqrt b;\t\t\t\t\t\t\t// Make q sqrt generator\r\n    \tfor ( i = big; i &gt; 0 ; i /= 7 ) {\t// for several numbers\r\n    \t\tq = b.Root(i);\t\t\t\t\t// Get the square root\r\n    \t\tr = b.Residue();\t\t\t\t// Get the residue\r\n    \t\tv = q*q+r;\t\t\t\t\t\t// Recalc original value\r\n    \t\tdelta = v-i;\t\t\t\t\t// And diff, hopefully 0\r\n    \t\tcout &lt;&lt; i &lt;&lt; &quot;: &quot; &lt;&lt; q &lt;&lt; &quot; ++ &quot; &lt;&lt; r &lt;&lt; &quot; V: &quot; &lt;&lt; v &lt;&lt; &quot; Delta: &quot; &lt;&lt; delta &lt;&lt; &quot;\\n&quot;;\r\n    \t};\r\n    \treturn 0;\r\n    };\r\n\r\n\r\n","title":"Fastest way to determine if an integer&#39;s square root is an integer","body":"<p>This a rework from decimal to binary of the old Marchant calculator algorithm (sorry, I don't have a reference), in Ruby, adapted specifically for this question:</p>\n<pre><code>def isexactsqrt(v)\n    value = v.abs\n    residue = value\n    root = 0\n    onebit = 1\n    onebit &lt;&lt;= 8 while (onebit &lt; residue)\n    onebit &gt;&gt;= 2 while (onebit &gt; residue)\n    while (onebit &gt; 0)\n        x = root + onebit\n        if (residue &gt;= x) then\n            residue -= x\n            root = x + onebit\n        end\n        root &gt;&gt;= 1\n        onebit &gt;&gt;= 2\n    end\n    return (residue == 0)\nend\n</code></pre>\n<p>Here's a workup of something similar (there may be coding style/smells or clunky O/O - it's the algorithm that counts, and C++ is not my home language). In this case, we're looking for residue == 0:</p>\n<pre><code>#include &lt;iostream&gt;  \n\nusing namespace std;  \ntypedef unsigned long long int llint;\n\nclass ISqrt {           // Integer Square Root\n    llint value;        // Integer whose square root is required\n    llint root;         // Result: floor(sqrt(value))\n    llint residue;      // Result: value-root*root\n    llint onebit, x;    // Working bit, working value\n\npublic:\n\n    ISqrt(llint v = 2) {    // Constructor\n        Root(v);            // Take the root \n    };\n\n    llint Root(llint r) {   // Resets and calculates new square root\n        value = r;          // Store input\n        residue = value;    // Initialise for subtracting down\n        root = 0;           // Clear root accumulator\n        \n        onebit = 1;                 // Calculate start value of counter\n        onebit &lt;&lt;= (8*sizeof(llint)-2);         // Set up counter bit as greatest odd power of 2 \n        while (onebit &gt; residue) {onebit &gt;&gt;= 2; };  // Shift down until just &lt; value\n        \n        while (onebit &gt; 0) {\n            x = root ^ onebit;          // Will check root+1bit (root bit corresponding to onebit is always zero)\n            if (residue &gt;= x) {         // Room to subtract?\n                residue -= x;           // Yes - deduct from residue\n                root = x + onebit;      // and step root\n            };\n            root &gt;&gt;= 1;\n            onebit &gt;&gt;= 2;\n        };\n        return root;                    \n    };\n    llint Residue() {           // Returns residue from last calculation\n        return residue;                 \n    };\n};\n\nint main() {\n    llint big, i, q, r, v, delta;\n    big = 0; big = (big-1);         // Kludge for &quot;big number&quot;\n    ISqrt b;                            // Make q sqrt generator\n    for ( i = big; i &gt; 0 ; i /= 7 ) {   // for several numbers\n        q = b.Root(i);                  // Get the square root\n        r = b.Residue();                // Get the residue\n        v = q*q+r;                      // Recalc original value\n        delta = v-i;                    // And diff, hopefully 0\n        cout &lt;&lt; i &lt;&lt; &quot;: &quot; &lt;&lt; q &lt;&lt; &quot; ++ &quot; &lt;&lt; r &lt;&lt; &quot; V: &quot; &lt;&lt; v &lt;&lt; &quot; Delta: &quot; &lt;&lt; delta &lt;&lt; &quot;\\n&quot;;\n    };\n    return 0;\n};\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2516,"reputation":31761,"user_id":3508,"accept_rate":79,"display_name":"A. Rex"},"down_vote_count":0,"up_vote_count":824,"is_accepted":true,"score":824,"last_activity_date":1701112993,"creation_date":1231432362,"answer_id":424936,"question_id":295579,"body_markdown":"I figured out a method that works ~35% faster than your 6bits+Carmack+sqrt code, at least with my CPU (x86) and programming language (C/C++).  Your results may vary, especially because I don&#39;t know how the Java factor will play out.\r\n\r\nMy approach is threefold:\r\n\r\n&lt;ol&gt;\r\n&lt;li&gt;First, filter out obvious answers.  This includes negative numbers and looking at the last 4 bits.  (I found looking at the last six didn&#39;t help.)  I also answer yes for 0.  (In reading the code below, note that my input is &lt;code&gt;int64 x&lt;/code&gt;.)\r\n\r\n```lang-c\r\nif( x &lt; 0 || (x&amp;2) || ((x &amp; 7) == 5) || ((x &amp; 11) == 8) )\r\n\treturn false;\r\nif( x == 0 )\r\n\treturn true;\r\n```\r\n&lt;/li&gt;\r\n&lt;li&gt;Next, check if it&#39;s a square modulo 255 = 3 * 5 * 17.  Because that&#39;s a product of three distinct primes, only about 1/8 of the residues mod 255 are squares.  However, in my experience, calling the modulo operator (%) costs more than the benefit one gets, so I use bit tricks involving 255 = 2^8-1 to compute the residue.  (For better or worse, I am not using the trick of reading individual bytes out of a word, only bitwise-and and shifts.)\r\n\r\n```lang-c\r\nint64 y = x;\r\ny = (y &amp; 4294967295LL) + (y &gt;&gt; 32); \r\ny = (y &amp; 65535) + (y &gt;&gt; 16);\r\ny = (y &amp; 255) + ((y &gt;&gt; 8) &amp; 255) + (y &gt;&gt; 16);\r\n// At this point, y is between 0 and 511.  More code can reduce it farther.\r\n```\r\n\r\nTo actually check if the residue is a square, I look up the answer in a precomputed table.\r\n\r\n```lang-c\r\nif( bad255[y] )\r\n\treturn false;\r\n// However, I just use a table of size 512\r\n```\r\n&lt;/li&gt;\r\n&lt;li&gt;Finally, try to compute the square root using a method similar to &lt;a href=&quot;http://en.wikipedia.org/wiki/Hensel%27s_lemma&quot;&gt;Hensel&#39;s lemma&lt;/a&gt;.  (I don&#39;t think it&#39;s applicable directly, but it works with some modifications.)  Before doing that, I divide out all powers of 2 with a binary search:\r\n\r\n```lang-c\r\nif((x &amp; 4294967295LL) == 0)\r\n\tx &gt;&gt;= 32;\r\nif((x &amp; 65535) == 0)\r\n\tx &gt;&gt;= 16;\r\nif((x &amp; 255) == 0)\r\n\tx &gt;&gt;= 8;\r\nif((x &amp; 15) == 0)\r\n\tx &gt;&gt;= 4;\r\nif((x &amp; 3) == 0)\r\n\tx &gt;&gt;= 2;\r\n```\r\nAt this point, for our number to be a square, it must be 1 mod 8.\r\n\r\n```lang-c\r\nif((x &amp; 7) != 1)\r\n\treturn false;\r\n```\r\n\r\nThe basic structure of Hensel&#39;s lemma is the following.  (Note: untested code; if it doesn&#39;t work, try t=2 or 8.)\r\n\r\n```lang-c\r\nint64 t = 4, r = 1;\r\nt &lt;&lt;= 1; r += ((x - r * r) &amp; t) &gt;&gt; 1;\r\nt &lt;&lt;= 1; r += ((x - r * r) &amp; t) &gt;&gt; 1;\r\nt &lt;&lt;= 1; r += ((x - r * r) &amp; t) &gt;&gt; 1;\r\n// Repeat until t is 2^33 or so.  Use a loop if you want.\r\n```\r\n\r\nThe idea is that at each iteration, you add one bit onto r, the &quot;current&quot; square root of x; each square root is accurate modulo a larger and larger power of 2, namely t/2.  At the end, r and t/2-r will be square roots of x modulo t/2.  (Note that if r is a square root of x, then so is -r.  This is true even modulo numbers, but beware, modulo some numbers, things can have even more than 2 square roots; notably, this includes powers of 2.)  Because our actual square root is less than 2^32, at that point we can actually just check if r or t/2-r are real square roots.  In my actual code, I use the following modified loop:\r\n\r\n```lang-c\r\nint64 r, t, z;\r\nr = start[(x &gt;&gt; 3) &amp; 1023];\r\ndo {\r\n\tz = x - r * r;\r\n\tif( z == 0 )\r\n\t\treturn true;\r\n\tif( z &lt; 0 )\r\n\t\treturn false;\r\n\tt = z &amp; (-z);\r\n\tr += (z &amp; t) &gt;&gt; 1;\r\n\tif( r &gt; (t &gt;&gt; 1) )\r\n\t\tr = t - r;\r\n} while( t &lt;= (1LL &lt;&lt; 33) );\r\n```\r\n\r\nThe speedup here is obtained in three ways: precomputed start value (equivalent to ~10 iterations of the loop), earlier exit of the loop, and skipping some t values.  For the last part, I look at `z = r - x * x`, and set t to be the largest power of 2 dividing z with a bit trick.  This allows me to skip t values that wouldn&#39;t have affected the value of r anyway.  The precomputed start value in my case picks out the &quot;smallest positive&quot; square root modulo 8192.\r\n&lt;/li&gt;\r\n&lt;/ol&gt;\r\nEven if this code doesn&#39;t work faster for you, I hope you enjoy some of the ideas it contains.  Complete, tested code follows, including the precomputed tables.\r\n\r\n```lang-c\r\ntypedef signed long long int int64;\r\n\r\nint start[1024] =\r\n{1,3,1769,5,1937,1741,7,1451,479,157,9,91,945,659,1817,11,\r\n1983,707,1321,1211,1071,13,1479,405,415,1501,1609,741,15,339,1703,203,\r\n129,1411,873,1669,17,1715,1145,1835,351,1251,887,1573,975,19,1127,395,\r\n1855,1981,425,453,1105,653,327,21,287,93,713,1691,1935,301,551,587,\r\n257,1277,23,763,1903,1075,1799,1877,223,1437,1783,859,1201,621,25,779,\r\n1727,573,471,1979,815,1293,825,363,159,1315,183,27,241,941,601,971,\r\n385,131,919,901,273,435,647,1493,95,29,1417,805,719,1261,1177,1163,\r\n1599,835,1367,315,1361,1933,1977,747,31,1373,1079,1637,1679,1581,1753,1355,\r\n513,1539,1815,1531,1647,205,505,1109,33,1379,521,1627,1457,1901,1767,1547,\r\n1471,1853,1833,1349,559,1523,967,1131,97,35,1975,795,497,1875,1191,1739,\r\n641,1149,1385,133,529,845,1657,725,161,1309,375,37,463,1555,615,1931,\r\n1343,445,937,1083,1617,883,185,1515,225,1443,1225,869,1423,1235,39,1973,\r\n769,259,489,1797,1391,1485,1287,341,289,99,1271,1701,1713,915,537,1781,\r\n1215,963,41,581,303,243,1337,1899,353,1245,329,1563,753,595,1113,1589,\r\n897,1667,407,635,785,1971,135,43,417,1507,1929,731,207,275,1689,1397,\r\n1087,1725,855,1851,1873,397,1607,1813,481,163,567,101,1167,45,1831,1205,\r\n1025,1021,1303,1029,1135,1331,1017,427,545,1181,1033,933,1969,365,1255,1013,\r\n959,317,1751,187,47,1037,455,1429,609,1571,1463,1765,1009,685,679,821,\r\n1153,387,1897,1403,1041,691,1927,811,673,227,137,1499,49,1005,103,629,\r\n831,1091,1449,1477,1967,1677,697,1045,737,1117,1737,667,911,1325,473,437,\r\n1281,1795,1001,261,879,51,775,1195,801,1635,759,165,1871,1645,1049,245,\r\n703,1597,553,955,209,1779,1849,661,865,291,841,997,1265,1965,1625,53,\r\n1409,893,105,1925,1297,589,377,1579,929,1053,1655,1829,305,1811,1895,139,\r\n575,189,343,709,1711,1139,1095,277,993,1699,55,1435,655,1491,1319,331,\r\n1537,515,791,507,623,1229,1529,1963,1057,355,1545,603,1615,1171,743,523,\r\n447,1219,1239,1723,465,499,57,107,1121,989,951,229,1521,851,167,715,\r\n1665,1923,1687,1157,1553,1869,1415,1749,1185,1763,649,1061,561,531,409,907,\r\n319,1469,1961,59,1455,141,1209,491,1249,419,1847,1893,399,211,985,1099,\r\n1793,765,1513,1275,367,1587,263,1365,1313,925,247,1371,1359,109,1561,1291,\r\n191,61,1065,1605,721,781,1735,875,1377,1827,1353,539,1777,429,1959,1483,\r\n1921,643,617,389,1809,947,889,981,1441,483,1143,293,817,749,1383,1675,\r\n63,1347,169,827,1199,1421,583,1259,1505,861,457,1125,143,1069,807,1867,\r\n2047,2045,279,2043,111,307,2041,597,1569,1891,2039,1957,1103,1389,231,2037,\r\n65,1341,727,837,977,2035,569,1643,1633,547,439,1307,2033,1709,345,1845,\r\n1919,637,1175,379,2031,333,903,213,1697,797,1161,475,1073,2029,921,1653,\r\n193,67,1623,1595,943,1395,1721,2027,1761,1955,1335,357,113,1747,1497,1461,\r\n1791,771,2025,1285,145,973,249,171,1825,611,265,1189,847,1427,2023,1269,\r\n321,1475,1577,69,1233,755,1223,1685,1889,733,1865,2021,1807,1107,1447,1077,\r\n1663,1917,1129,1147,1775,1613,1401,555,1953,2019,631,1243,1329,787,871,885,\r\n449,1213,681,1733,687,115,71,1301,2017,675,969,411,369,467,295,693,\r\n1535,509,233,517,401,1843,1543,939,2015,669,1527,421,591,147,281,501,\r\n577,195,215,699,1489,525,1081,917,1951,2013,73,1253,1551,173,857,309,\r\n1407,899,663,1915,1519,1203,391,1323,1887,739,1673,2011,1585,493,1433,117,\r\n705,1603,1111,965,431,1165,1863,533,1823,605,823,1179,625,813,2009,75,\r\n1279,1789,1559,251,657,563,761,1707,1759,1949,777,347,335,1133,1511,267,\r\n833,1085,2007,1467,1745,1805,711,149,1695,803,1719,485,1295,1453,935,459,\r\n1151,381,1641,1413,1263,77,1913,2005,1631,541,119,1317,1841,1773,359,651,\r\n961,323,1193,197,175,1651,441,235,1567,1885,1481,1947,881,2003,217,843,\r\n1023,1027,745,1019,913,717,1031,1621,1503,867,1015,1115,79,1683,793,1035,\r\n1089,1731,297,1861,2001,1011,1593,619,1439,477,585,283,1039,1363,1369,1227,\r\n895,1661,151,645,1007,1357,121,1237,1375,1821,1911,549,1999,1043,1945,1419,\r\n1217,957,599,571,81,371,1351,1003,1311,931,311,1381,1137,723,1575,1611,\r\n767,253,1047,1787,1169,1997,1273,853,1247,413,1289,1883,177,403,999,1803,\r\n1345,451,1495,1093,1839,269,199,1387,1183,1757,1207,1051,783,83,423,1995,\r\n639,1155,1943,123,751,1459,1671,469,1119,995,393,219,1743,237,153,1909,\r\n1473,1859,1705,1339,337,909,953,1771,1055,349,1993,613,1393,557,729,1717,\r\n511,1533,1257,1541,1425,819,519,85,991,1693,503,1445,433,877,1305,1525,\r\n1601,829,809,325,1583,1549,1991,1941,927,1059,1097,1819,527,1197,1881,1333,\r\n383,125,361,891,495,179,633,299,863,285,1399,987,1487,1517,1639,1141,\r\n1729,579,87,1989,593,1907,839,1557,799,1629,201,155,1649,1837,1063,949,\r\n255,1283,535,773,1681,461,1785,683,735,1123,1801,677,689,1939,487,757,\r\n1857,1987,983,443,1327,1267,313,1173,671,221,695,1509,271,1619,89,565,\r\n127,1405,1431,1659,239,1101,1159,1067,607,1565,905,1755,1231,1299,665,373,\r\n1985,701,1879,1221,849,627,1465,789,543,1187,1591,923,1905,979,1241,181};\r\n\r\nbool bad255[512] =\r\n{0,0,1,1,0,1,1,1,1,0,1,1,1,1,1,0,0,1,1,0,1,0,1,1,1,0,1,1,1,1,0,1,\r\n 1,1,0,1,0,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,1,1,0,1,1,1,1,0,1,1,1,\r\n 0,1,0,1,1,0,0,1,1,1,1,1,0,1,1,1,1,0,1,1,0,0,1,1,1,1,1,1,1,1,0,1,\r\n 1,1,1,1,0,1,1,1,1,1,0,1,1,1,1,0,1,1,1,0,1,1,1,1,0,0,1,1,1,1,1,1,\r\n 1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,0,0,1,1,1,1,1,0,1,1,0,1,1,1,1,1,\r\n 1,1,1,1,1,1,0,1,1,0,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,1,0,1,1,0,1,1,\r\n 1,1,1,0,0,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,\r\n 1,0,1,1,1,0,1,1,1,1,0,1,1,1,1,1,0,1,1,1,1,1,0,1,1,1,1,1,1,1,1,\r\n 0,0,1,1,0,1,1,1,1,0,1,1,1,1,1,0,0,1,1,0,1,0,1,1,1,0,1,1,1,1,0,1,\r\n 1,1,0,1,0,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,1,1,0,1,1,1,1,0,1,1,1,\r\n 0,1,0,1,1,0,0,1,1,1,1,1,0,1,1,1,1,0,1,1,0,0,1,1,1,1,1,1,1,1,0,1,\r\n 1,1,1,1,0,1,1,1,1,1,0,1,1,1,1,0,1,1,1,0,1,1,1,1,0,0,1,1,1,1,1,1,\r\n 1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,0,0,1,1,1,1,1,0,1,1,0,1,1,1,1,1,\r\n 1,1,1,1,1,1,0,1,1,0,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,1,0,1,1,0,1,1,\r\n 1,1,1,0,0,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,\r\n 1,0,1,1,1,0,1,1,1,1,0,1,1,1,1,1,0,1,1,1,1,1,0,1,1,1,1,1,1,1,1,\r\n 0,0};\r\n\r\ninline bool square( int64 x ) {\r\n\t// Quickfail\r\n\tif( x &lt; 0 || (x&amp;2) || ((x &amp; 7) == 5) || ((x &amp; 11) == 8) )\r\n\t\treturn false;\r\n\tif( x == 0 )\r\n\t\treturn true;\r\n\r\n\t// Check mod 255 = 3 * 5 * 17, for fun\r\n\tint64 y = x;\r\n\ty = (y &amp; 4294967295LL) + (y &gt;&gt; 32);\r\n\ty = (y &amp; 65535) + (y &gt;&gt; 16);\r\n\ty = (y &amp; 255) + ((y &gt;&gt; 8) &amp; 255) + (y &gt;&gt; 16);\r\n\tif( bad255[y] )\r\n\t\treturn false;\r\n\r\n\t// Divide out powers of 4 using binary search\r\n\tif((x &amp; 4294967295LL) == 0)\r\n\t\tx &gt;&gt;= 32;\r\n\tif((x &amp; 65535) == 0)\r\n\t\tx &gt;&gt;= 16;\r\n\tif((x &amp; 255) == 0)\r\n\t\tx &gt;&gt;= 8;\r\n\tif((x &amp; 15) == 0)\r\n\t\tx &gt;&gt;= 4;\r\n\tif((x &amp; 3) == 0)\r\n\t\tx &gt;&gt;= 2;\r\n\r\n\tif((x &amp; 7) != 1)\r\n\t\treturn false;\r\n\r\n\t// Compute sqrt using something like Hensel&#39;s lemma\r\n\tint64 r, t, z;\r\n\tr = start[(x &gt;&gt; 3) &amp; 1023];\r\n\tdo {\r\n\t\tz = x - r * r;\r\n\t\tif( z == 0 )\r\n\t\t\treturn true;\r\n\t\tif( z &lt; 0 )\r\n\t\t\treturn false;\r\n\t\tt = z &amp; (-z);\r\n\t\tr += (z &amp; t) &gt;&gt; 1;\r\n\t\tif( r &gt; (t &gt;&gt; 1) )\r\n\t\t\tr = t - r;\r\n\t} while( t &lt;= (1LL &lt;&lt; 33) );\r\n\t\r\n\treturn false;\r\n}\r\n```","title":"Fastest way to determine if an integer&#39;s square root is an integer","body":"<p>I figured out a method that works ~35% faster than your 6bits+Carmack+sqrt code, at least with my CPU (x86) and programming language (C/C++).  Your results may vary, especially because I don't know how the Java factor will play out.</p>\n<p>My approach is threefold:</p>\n<ol>\n<li>First, filter out obvious answers.  This includes negative numbers and looking at the last 4 bits.  (I found looking at the last six didn't help.)  I also answer yes for 0.  (In reading the code below, note that my input is <code>int64 x</code>.)\n<pre class=\"lang-c prettyprint-override\"><code>if( x &lt; 0 || (x&amp;2) || ((x &amp; 7) == 5) || ((x &amp; 11) == 8) )\n    return false;\nif( x == 0 )\n    return true;\n</code></pre>\n</li>\n<li>Next, check if it's a square modulo 255 = 3 * 5 * 17.  Because that's a product of three distinct primes, only about 1/8 of the residues mod 255 are squares.  However, in my experience, calling the modulo operator (%) costs more than the benefit one gets, so I use bit tricks involving 255 = 2^8-1 to compute the residue.  (For better or worse, I am not using the trick of reading individual bytes out of a word, only bitwise-and and shifts.)\n<pre class=\"lang-c prettyprint-override\"><code>int64 y = x;\ny = (y &amp; 4294967295LL) + (y &gt;&gt; 32); \ny = (y &amp; 65535) + (y &gt;&gt; 16);\ny = (y &amp; 255) + ((y &gt;&gt; 8) &amp; 255) + (y &gt;&gt; 16);\n// At this point, y is between 0 and 511.  More code can reduce it farther.\n</code></pre>\n<p>To actually check if the residue is a square, I look up the answer in a precomputed table.</p>\n<pre class=\"lang-c prettyprint-override\"><code>if( bad255[y] )\n    return false;\n// However, I just use a table of size 512\n</code></pre>\n</li>\n<li>Finally, try to compute the square root using a method similar to <a href=\"http://en.wikipedia.org/wiki/Hensel%27s_lemma\" rel=\"nofollow noreferrer\">Hensel's lemma</a>.  (I don't think it's applicable directly, but it works with some modifications.)  Before doing that, I divide out all powers of 2 with a binary search:\n<pre class=\"lang-c prettyprint-override\"><code>if((x &amp; 4294967295LL) == 0)\n    x &gt;&gt;= 32;\nif((x &amp; 65535) == 0)\n    x &gt;&gt;= 16;\nif((x &amp; 255) == 0)\n    x &gt;&gt;= 8;\nif((x &amp; 15) == 0)\n    x &gt;&gt;= 4;\nif((x &amp; 3) == 0)\n    x &gt;&gt;= 2;\n</code></pre>\n<p>At this point, for our number to be a square, it must be 1 mod 8.</p>\n<pre class=\"lang-c prettyprint-override\"><code>if((x &amp; 7) != 1)\n    return false;\n</code></pre>\n<p>The basic structure of Hensel's lemma is the following.  (Note: untested code; if it doesn't work, try t=2 or 8.)</p>\n<pre class=\"lang-c prettyprint-override\"><code>int64 t = 4, r = 1;\nt &lt;&lt;= 1; r += ((x - r * r) &amp; t) &gt;&gt; 1;\nt &lt;&lt;= 1; r += ((x - r * r) &amp; t) &gt;&gt; 1;\nt &lt;&lt;= 1; r += ((x - r * r) &amp; t) &gt;&gt; 1;\n// Repeat until t is 2^33 or so.  Use a loop if you want.\n</code></pre>\n<p>The idea is that at each iteration, you add one bit onto r, the &quot;current&quot; square root of x; each square root is accurate modulo a larger and larger power of 2, namely t/2.  At the end, r and t/2-r will be square roots of x modulo t/2.  (Note that if r is a square root of x, then so is -r.  This is true even modulo numbers, but beware, modulo some numbers, things can have even more than 2 square roots; notably, this includes powers of 2.)  Because our actual square root is less than 2^32, at that point we can actually just check if r or t/2-r are real square roots.  In my actual code, I use the following modified loop:</p>\n<pre class=\"lang-c prettyprint-override\"><code>int64 r, t, z;\nr = start[(x &gt;&gt; 3) &amp; 1023];\ndo {\n    z = x - r * r;\n    if( z == 0 )\n        return true;\n    if( z &lt; 0 )\n        return false;\n    t = z &amp; (-z);\n    r += (z &amp; t) &gt;&gt; 1;\n    if( r &gt; (t &gt;&gt; 1) )\n        r = t - r;\n} while( t &lt;= (1LL &lt;&lt; 33) );\n</code></pre>\n<p>The speedup here is obtained in three ways: precomputed start value (equivalent to ~10 iterations of the loop), earlier exit of the loop, and skipping some t values.  For the last part, I look at <code>z = r - x * x</code>, and set t to be the largest power of 2 dividing z with a bit trick.  This allows me to skip t values that wouldn't have affected the value of r anyway.  The precomputed start value in my case picks out the &quot;smallest positive&quot; square root modulo 8192.</p>\n</li>\n</ol>\nEven if this code doesn't work faster for you, I hope you enjoy some of the ideas it contains.  Complete, tested code follows, including the precomputed tables.\n<pre class=\"lang-c prettyprint-override\"><code>typedef signed long long int int64;\n\nint start[1024] =\n{1,3,1769,5,1937,1741,7,1451,479,157,9,91,945,659,1817,11,\n1983,707,1321,1211,1071,13,1479,405,415,1501,1609,741,15,339,1703,203,\n129,1411,873,1669,17,1715,1145,1835,351,1251,887,1573,975,19,1127,395,\n1855,1981,425,453,1105,653,327,21,287,93,713,1691,1935,301,551,587,\n257,1277,23,763,1903,1075,1799,1877,223,1437,1783,859,1201,621,25,779,\n1727,573,471,1979,815,1293,825,363,159,1315,183,27,241,941,601,971,\n385,131,919,901,273,435,647,1493,95,29,1417,805,719,1261,1177,1163,\n1599,835,1367,315,1361,1933,1977,747,31,1373,1079,1637,1679,1581,1753,1355,\n513,1539,1815,1531,1647,205,505,1109,33,1379,521,1627,1457,1901,1767,1547,\n1471,1853,1833,1349,559,1523,967,1131,97,35,1975,795,497,1875,1191,1739,\n641,1149,1385,133,529,845,1657,725,161,1309,375,37,463,1555,615,1931,\n1343,445,937,1083,1617,883,185,1515,225,1443,1225,869,1423,1235,39,1973,\n769,259,489,1797,1391,1485,1287,341,289,99,1271,1701,1713,915,537,1781,\n1215,963,41,581,303,243,1337,1899,353,1245,329,1563,753,595,1113,1589,\n897,1667,407,635,785,1971,135,43,417,1507,1929,731,207,275,1689,1397,\n1087,1725,855,1851,1873,397,1607,1813,481,163,567,101,1167,45,1831,1205,\n1025,1021,1303,1029,1135,1331,1017,427,545,1181,1033,933,1969,365,1255,1013,\n959,317,1751,187,47,1037,455,1429,609,1571,1463,1765,1009,685,679,821,\n1153,387,1897,1403,1041,691,1927,811,673,227,137,1499,49,1005,103,629,\n831,1091,1449,1477,1967,1677,697,1045,737,1117,1737,667,911,1325,473,437,\n1281,1795,1001,261,879,51,775,1195,801,1635,759,165,1871,1645,1049,245,\n703,1597,553,955,209,1779,1849,661,865,291,841,997,1265,1965,1625,53,\n1409,893,105,1925,1297,589,377,1579,929,1053,1655,1829,305,1811,1895,139,\n575,189,343,709,1711,1139,1095,277,993,1699,55,1435,655,1491,1319,331,\n1537,515,791,507,623,1229,1529,1963,1057,355,1545,603,1615,1171,743,523,\n447,1219,1239,1723,465,499,57,107,1121,989,951,229,1521,851,167,715,\n1665,1923,1687,1157,1553,1869,1415,1749,1185,1763,649,1061,561,531,409,907,\n319,1469,1961,59,1455,141,1209,491,1249,419,1847,1893,399,211,985,1099,\n1793,765,1513,1275,367,1587,263,1365,1313,925,247,1371,1359,109,1561,1291,\n191,61,1065,1605,721,781,1735,875,1377,1827,1353,539,1777,429,1959,1483,\n1921,643,617,389,1809,947,889,981,1441,483,1143,293,817,749,1383,1675,\n63,1347,169,827,1199,1421,583,1259,1505,861,457,1125,143,1069,807,1867,\n2047,2045,279,2043,111,307,2041,597,1569,1891,2039,1957,1103,1389,231,2037,\n65,1341,727,837,977,2035,569,1643,1633,547,439,1307,2033,1709,345,1845,\n1919,637,1175,379,2031,333,903,213,1697,797,1161,475,1073,2029,921,1653,\n193,67,1623,1595,943,1395,1721,2027,1761,1955,1335,357,113,1747,1497,1461,\n1791,771,2025,1285,145,973,249,171,1825,611,265,1189,847,1427,2023,1269,\n321,1475,1577,69,1233,755,1223,1685,1889,733,1865,2021,1807,1107,1447,1077,\n1663,1917,1129,1147,1775,1613,1401,555,1953,2019,631,1243,1329,787,871,885,\n449,1213,681,1733,687,115,71,1301,2017,675,969,411,369,467,295,693,\n1535,509,233,517,401,1843,1543,939,2015,669,1527,421,591,147,281,501,\n577,195,215,699,1489,525,1081,917,1951,2013,73,1253,1551,173,857,309,\n1407,899,663,1915,1519,1203,391,1323,1887,739,1673,2011,1585,493,1433,117,\n705,1603,1111,965,431,1165,1863,533,1823,605,823,1179,625,813,2009,75,\n1279,1789,1559,251,657,563,761,1707,1759,1949,777,347,335,1133,1511,267,\n833,1085,2007,1467,1745,1805,711,149,1695,803,1719,485,1295,1453,935,459,\n1151,381,1641,1413,1263,77,1913,2005,1631,541,119,1317,1841,1773,359,651,\n961,323,1193,197,175,1651,441,235,1567,1885,1481,1947,881,2003,217,843,\n1023,1027,745,1019,913,717,1031,1621,1503,867,1015,1115,79,1683,793,1035,\n1089,1731,297,1861,2001,1011,1593,619,1439,477,585,283,1039,1363,1369,1227,\n895,1661,151,645,1007,1357,121,1237,1375,1821,1911,549,1999,1043,1945,1419,\n1217,957,599,571,81,371,1351,1003,1311,931,311,1381,1137,723,1575,1611,\n767,253,1047,1787,1169,1997,1273,853,1247,413,1289,1883,177,403,999,1803,\n1345,451,1495,1093,1839,269,199,1387,1183,1757,1207,1051,783,83,423,1995,\n639,1155,1943,123,751,1459,1671,469,1119,995,393,219,1743,237,153,1909,\n1473,1859,1705,1339,337,909,953,1771,1055,349,1993,613,1393,557,729,1717,\n511,1533,1257,1541,1425,819,519,85,991,1693,503,1445,433,877,1305,1525,\n1601,829,809,325,1583,1549,1991,1941,927,1059,1097,1819,527,1197,1881,1333,\n383,125,361,891,495,179,633,299,863,285,1399,987,1487,1517,1639,1141,\n1729,579,87,1989,593,1907,839,1557,799,1629,201,155,1649,1837,1063,949,\n255,1283,535,773,1681,461,1785,683,735,1123,1801,677,689,1939,487,757,\n1857,1987,983,443,1327,1267,313,1173,671,221,695,1509,271,1619,89,565,\n127,1405,1431,1659,239,1101,1159,1067,607,1565,905,1755,1231,1299,665,373,\n1985,701,1879,1221,849,627,1465,789,543,1187,1591,923,1905,979,1241,181};\n\nbool bad255[512] =\n{0,0,1,1,0,1,1,1,1,0,1,1,1,1,1,0,0,1,1,0,1,0,1,1,1,0,1,1,1,1,0,1,\n 1,1,0,1,0,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,1,1,0,1,1,1,1,0,1,1,1,\n 0,1,0,1,1,0,0,1,1,1,1,1,0,1,1,1,1,0,1,1,0,0,1,1,1,1,1,1,1,1,0,1,\n 1,1,1,1,0,1,1,1,1,1,0,1,1,1,1,0,1,1,1,0,1,1,1,1,0,0,1,1,1,1,1,1,\n 1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,0,0,1,1,1,1,1,0,1,1,0,1,1,1,1,1,\n 1,1,1,1,1,1,0,1,1,0,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,1,0,1,1,0,1,1,\n 1,1,1,0,0,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,\n 1,0,1,1,1,0,1,1,1,1,0,1,1,1,1,1,0,1,1,1,1,1,0,1,1,1,1,1,1,1,1,\n 0,0,1,1,0,1,1,1,1,0,1,1,1,1,1,0,0,1,1,0,1,0,1,1,1,0,1,1,1,1,0,1,\n 1,1,0,1,0,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,1,1,0,1,1,1,1,0,1,1,1,\n 0,1,0,1,1,0,0,1,1,1,1,1,0,1,1,1,1,0,1,1,0,0,1,1,1,1,1,1,1,1,0,1,\n 1,1,1,1,0,1,1,1,1,1,0,1,1,1,1,0,1,1,1,0,1,1,1,1,0,0,1,1,1,1,1,1,\n 1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,0,0,1,1,1,1,1,0,1,1,0,1,1,1,1,1,\n 1,1,1,1,1,1,0,1,1,0,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,1,0,1,1,0,1,1,\n 1,1,1,0,0,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,\n 1,0,1,1,1,0,1,1,1,1,0,1,1,1,1,1,0,1,1,1,1,1,0,1,1,1,1,1,1,1,1,\n 0,0};\n\ninline bool square( int64 x ) {\n    // Quickfail\n    if( x &lt; 0 || (x&amp;2) || ((x &amp; 7) == 5) || ((x &amp; 11) == 8) )\n        return false;\n    if( x == 0 )\n        return true;\n\n    // Check mod 255 = 3 * 5 * 17, for fun\n    int64 y = x;\n    y = (y &amp; 4294967295LL) + (y &gt;&gt; 32);\n    y = (y &amp; 65535) + (y &gt;&gt; 16);\n    y = (y &amp; 255) + ((y &gt;&gt; 8) &amp; 255) + (y &gt;&gt; 16);\n    if( bad255[y] )\n        return false;\n\n    // Divide out powers of 4 using binary search\n    if((x &amp; 4294967295LL) == 0)\n        x &gt;&gt;= 32;\n    if((x &amp; 65535) == 0)\n        x &gt;&gt;= 16;\n    if((x &amp; 255) == 0)\n        x &gt;&gt;= 8;\n    if((x &amp; 15) == 0)\n        x &gt;&gt;= 4;\n    if((x &amp; 3) == 0)\n        x &gt;&gt;= 2;\n\n    if((x &amp; 7) != 1)\n        return false;\n\n    // Compute sqrt using something like Hensel's lemma\n    int64 r, t, z;\n    r = start[(x &gt;&gt; 3) &amp; 1023];\n    do {\n        z = x - r * r;\n        if( z == 0 )\n            return true;\n        if( z &lt; 0 )\n            return false;\n        t = z &amp; (-z);\n        r += (z &amp; t) &gt;&gt; 1;\n        if( r &gt; (t &gt;&gt; 1) )\n            r = t - r;\n    } while( t &lt;= (1LL &lt;&lt; 33) );\n    \n    return false;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":24765,"reputation":3353,"user_id":63189,"display_name":"paulmurray"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1262862007,"creation_date":1235283721,"answer_id":574455,"question_id":295579,"body_markdown":"It ought to be possible to pack the &#39;cannot be a perfect square if the last X digits are N&#39; much more efficiently than that! I&#39;ll use java 32 bit ints, and produce enough data to check the last 16 bits of the number - that&#39;s 2048 hexadecimal int values.\r\n\r\n...\r\n\r\nOk. Either I have run into some number theory that is a little beyond me, or there is a bug in my code. In any case, here is the code:\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tfinal int BITS = 16;\r\n\t\t\r\n\t\tBitSet foo = new BitSet();\r\n\t\t\r\n\t\tfor(int i = 0; i&lt; (1&lt;&lt;BITS); i++) {\r\n\t\t\tint sq = (i*i);\r\n\t\t\tsq = sq &amp; ((1&lt;&lt;BITS)-1);\r\n\t\t\tfoo.set(sq);\r\n\t\t}\r\n\t\t\r\n\t\tSystem.out.println(&quot;int[] mayBeASquare = {&quot;);\r\n\t\t\r\n\t\tfor(int i = 0; i&lt; 1&lt;&lt;(BITS-5); i++) {\r\n\t\t\tint kk = 0;\r\n\t\t\tfor(int j = 0; j&lt;32; j++) {\r\n\t\t\t\tif(foo.get((i &lt;&lt; 5) | j)) {\r\n\t\t\t\t\tkk |= 1&lt;&lt;j;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tSystem.out.print(&quot;0x&quot; + Integer.toHexString(kk) + &quot;, &quot;);\r\n\t\t\tif(i%8 == 7) System.out.println();\r\n\t\t}\r\n\t\tSystem.out.println(&quot;};&quot;);\r\n\t}\r\n\r\n\r\nand here are the results:\r\n\r\n(ed: elided for poor performance in prettify.js; view revision history to see.)\r\n","title":"Fastest way to determine if an integer&#39;s square root is an integer","body":"<p>It ought to be possible to pack the 'cannot be a perfect square if the last X digits are N' much more efficiently than that! I'll use java 32 bit ints, and produce enough data to check the last 16 bits of the number - that's 2048 hexadecimal int values.</p>\n\n<p>...</p>\n\n<p>Ok. Either I have run into some number theory that is a little beyond me, or there is a bug in my code. In any case, here is the code:</p>\n\n<pre><code>public static void main(String[] args) {\n    final int BITS = 16;\n\n    BitSet foo = new BitSet();\n\n    for(int i = 0; i&lt; (1&lt;&lt;BITS); i++) {\n        int sq = (i*i);\n        sq = sq &amp; ((1&lt;&lt;BITS)-1);\n        foo.set(sq);\n    }\n\n    System.out.println(\"int[] mayBeASquare = {\");\n\n    for(int i = 0; i&lt; 1&lt;&lt;(BITS-5); i++) {\n        int kk = 0;\n        for(int j = 0; j&lt;32; j++) {\n            if(foo.get((i &lt;&lt; 5) | j)) {\n                kk |= 1&lt;&lt;j;\n            }\n        }\n        System.out.print(\"0x\" + Integer.toHexString(kk) + \", \");\n        if(i%8 == 7) System.out.println();\n    }\n    System.out.println(\"};\");\n}\n</code></pre>\n\n<p>and here are the results:</p>\n\n<p>(ed: elided for poor performance in prettify.js; view revision history to see.)</p>\n"},{"tags":[],"owner":{"account_id":876456,"reputation":570,"user_id":76649,"display_name":"Ben"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1236777939,"creation_date":1236777494,"answer_id":634473,"question_id":295579,"body_markdown":"Regarding the Carmac method, it seems like it would be quite easy just to iterate once more, which should double the number of digits of accuracy. It is, after all, an extremely truncated iterative method -- Newton&#39;s, with a very good first guess.\r\n\r\nRegarding your current best, I see two micro-optimizations:\r\n\r\n* move the check vs. 0 after the check using mod255\r\n* rearrange the dividing out powers of four to skip all the checks for the usual (75%) case.  \r\n\r\nI.e:\r\n\r\n    // Divide out powers of 4 using binary search\r\n\r\n    if((n &amp; 0x3L) == 0) {\r\n      n &gt;&gt;=2;\r\n\r\n      if((n &amp; 0xffffffffL) == 0)\r\n        n &gt;&gt;= 32;\r\n      if((n &amp; 0xffffL) == 0)\r\n          n &gt;&gt;= 16;\r\n      if((n &amp; 0xffL) == 0)\r\n          n &gt;&gt;= 8;\r\n      if((n &amp; 0xfL) == 0)\r\n          n &gt;&gt;= 4;\r\n      if((n &amp; 0x3L) == 0)\r\n          n &gt;&gt;= 2;\r\n    }\r\n\r\nEven better might be a simple\r\n    \r\n    while ((n &amp; 0x03L) == 0) n &gt;&gt;= 2;\r\n\r\nObviously, it would be interesting to know how many numbers get culled at each checkpoint -- I rather doubt the checks are truly independent, which makes things tricky.","title":"Fastest way to determine if an integer&#39;s square root is an integer","body":"<p>Regarding the Carmac method, it seems like it would be quite easy just to iterate once more, which should double the number of digits of accuracy. It is, after all, an extremely truncated iterative method -- Newton's, with a very good first guess.</p>\n\n<p>Regarding your current best, I see two micro-optimizations:</p>\n\n<ul>\n<li>move the check vs. 0 after the check using mod255</li>\n<li>rearrange the dividing out powers of four to skip all the checks for the usual (75%) case.  </li>\n</ul>\n\n<p>I.e:</p>\n\n<pre><code>// Divide out powers of 4 using binary search\n\nif((n &amp; 0x3L) == 0) {\n  n &gt;&gt;=2;\n\n  if((n &amp; 0xffffffffL) == 0)\n    n &gt;&gt;= 32;\n  if((n &amp; 0xffffL) == 0)\n      n &gt;&gt;= 16;\n  if((n &amp; 0xffL) == 0)\n      n &gt;&gt;= 8;\n  if((n &amp; 0xfL) == 0)\n      n &gt;&gt;= 4;\n  if((n &amp; 0x3L) == 0)\n      n &gt;&gt;= 2;\n}\n</code></pre>\n\n<p>Even better might be a simple</p>\n\n<pre><code>while ((n &amp; 0x03L) == 0) n &gt;&gt;= 2;\n</code></pre>\n\n<p>Obviously, it would be interesting to know how many numbers get culled at each checkpoint -- I rather doubt the checks are truly independent, which makes things tricky.</p>\n"},{"tags":[],"owner":{"display_name":"hydrodog"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1236778673,"creation_date":1236777905,"answer_id":634494,"question_id":295579,"body_markdown":"The sqrt call is not perfectly accurate, as has been mentioned, but it&#39;s interesting and instructive that it doesn&#39;t blow away the other answers in terms of speed. After all, the sequence of assembly language instructions for a sqrt is tiny. Intel has a hardware instruction, which isn&#39;t used by Java I believe because it doesn&#39;t conform to IEEE.\r\n\r\nSo why is it slow? Because Java is actually calling a C routine through JNI, and it&#39;s actually slower to do so than to call a Java subroutine, which itself is slower than doing it inline. This is very annoying, and Java should have come up with a better solution, ie building in floating point library calls if necessary. Oh well.\r\n\r\nIn C++, I suspect all the complex alternatives would lose on speed, but I haven&#39;t checked them all.\r\nWhat I did, and what Java people will find usefull, is a simple hack, an extension of the special case testing suggested by A. Rex. Use a single long value as a bit array, which isn&#39;t bounds checked. That way, you have 64 bit boolean lookup.\r\n\r\n\r\n    typedef unsigned long long UVLONG\r\n    UVLONG pp1,pp2;\r\n\r\n    void init2() {\r\n      for (int i = 0; i &lt; 64; i++) {\r\n        for (int j = 0; j &lt; 64; j++)\r\n          if (isPerfectSquare(i * 64 + j)) {\r\n\t    pp1 |= (1 &lt;&lt; j);\r\n\t    pp2 |= (1 &lt;&lt; i);\r\n\t    break;\r\n          }\r\n       }\r\n       cout &lt;&lt; &quot;pp1=&quot; &lt;&lt; pp1 &lt;&lt; &quot;,&quot; &lt;&lt; pp2 &lt;&lt; &quot;\\n&quot;;  \r\n    }\r\n\r\n\r\n    inline bool isPerfectSquare5(UVLONG x) {\r\n      return pp1 &amp; (1 &lt;&lt; (x &amp; 0x3F)) ? isPerfectSquare(x) : false;\r\n    }\r\n\r\nThe routine isPerfectSquare5 runs in about 1/3 the time on my core2 duo machine. I suspect that further tweaks along the same lines could reduce the time further on average, but every time you check, you are trading off more testing for more eliminating, so you can&#39;t go too much farther on that road.\r\n\r\nCertainly, rather than having a separate test for negative, you could check the high 6 bits the same way.\r\n\r\nNote that all I&#39;m doing is eliminating possible squares, but when I have a potential case I have to call the original, inlined isPerfectSquare.\r\n\r\nThe init2 routine is called once to initialize the static values of pp1 and pp2.\r\nNote that in my implementation in C++, I&#39;m using unsigned long long, so since you&#39;re signed, you&#39;d have to use the &gt;&gt;&gt; operator.\r\n\r\nThere is no intrinsic need to bounds check the array, but Java&#39;s optimizer has to figure this stuff out pretty quickly, so I don&#39;t blame them for that.","title":"Fastest way to determine if an integer&#39;s square root is an integer","body":"<p>The sqrt call is not perfectly accurate, as has been mentioned, but it's interesting and instructive that it doesn't blow away the other answers in terms of speed. After all, the sequence of assembly language instructions for a sqrt is tiny. Intel has a hardware instruction, which isn't used by Java I believe because it doesn't conform to IEEE.</p>\n\n<p>So why is it slow? Because Java is actually calling a C routine through JNI, and it's actually slower to do so than to call a Java subroutine, which itself is slower than doing it inline. This is very annoying, and Java should have come up with a better solution, ie building in floating point library calls if necessary. Oh well.</p>\n\n<p>In C++, I suspect all the complex alternatives would lose on speed, but I haven't checked them all.\nWhat I did, and what Java people will find usefull, is a simple hack, an extension of the special case testing suggested by A. Rex. Use a single long value as a bit array, which isn't bounds checked. That way, you have 64 bit boolean lookup.</p>\n\n<pre><code>typedef unsigned long long UVLONG\nUVLONG pp1,pp2;\n\nvoid init2() {\n  for (int i = 0; i &lt; 64; i++) {\n    for (int j = 0; j &lt; 64; j++)\n      if (isPerfectSquare(i * 64 + j)) {\n    pp1 |= (1 &lt;&lt; j);\n    pp2 |= (1 &lt;&lt; i);\n    break;\n      }\n   }\n   cout &lt;&lt; \"pp1=\" &lt;&lt; pp1 &lt;&lt; \",\" &lt;&lt; pp2 &lt;&lt; \"\\n\";  \n}\n\n\ninline bool isPerfectSquare5(UVLONG x) {\n  return pp1 &amp; (1 &lt;&lt; (x &amp; 0x3F)) ? isPerfectSquare(x) : false;\n}\n</code></pre>\n\n<p>The routine isPerfectSquare5 runs in about 1/3 the time on my core2 duo machine. I suspect that further tweaks along the same lines could reduce the time further on average, but every time you check, you are trading off more testing for more eliminating, so you can't go too much farther on that road.</p>\n\n<p>Certainly, rather than having a separate test for negative, you could check the high 6 bits the same way.</p>\n\n<p>Note that all I'm doing is eliminating possible squares, but when I have a potential case I have to call the original, inlined isPerfectSquare.</p>\n\n<p>The init2 routine is called once to initialize the static values of pp1 and pp2.\nNote that in my implementation in C++, I'm using unsigned long long, so since you're signed, you'd have to use the >>> operator.</p>\n\n<p>There is no intrinsic need to bounds check the array, but Java's optimizer has to figure this stuff out pretty quickly, so I don't blame them for that.</p>\n"},{"tags":[],"owner":{"account_id":30006,"reputation":1200,"user_id":81502,"accept_rate":50,"display_name":"bgiles"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1561500170,"creation_date":1237994585,"answer_id":682088,"question_id":295579,"body_markdown":"Project Euler is mentioned in the tags and many of the problems in it require checking numbers &gt;&gt; `2^64`.  Most of the optimizations mentioned above don&#39;t work easily when you are working with an 80 byte buffer.\r\n\r\nI used java BigInteger and a slightly modified version of Newton&#39;s method, one that works better with integers.  The problem was that exact squares `n^2` converged to `(n-1)` instead of `n` because `n^2-1 = (n-1)(n+1)` and the final error was just one step below the final divisor and the algorithm terminated.  It was easy to fix by adding one to the original argument before computing the error.  (Add two for cube roots, etc.)\r\n\r\nOne nice attribute of this algorithm is that you can immediately tell if the number is a perfect square - the final error (not correction) in Newton&#39;s method will be zero.  A simple modification also lets you quickly calculate `floor(sqrt(x))` instead of the closest integer.  This is handy with several Euler problems.","title":"Fastest way to determine if an integer&#39;s square root is an integer","body":"<p>Project Euler is mentioned in the tags and many of the problems in it require checking numbers >> <code>2^64</code>.  Most of the optimizations mentioned above don't work easily when you are working with an 80 byte buffer.</p>\n\n<p>I used java BigInteger and a slightly modified version of Newton's method, one that works better with integers.  The problem was that exact squares <code>n^2</code> converged to <code>(n-1)</code> instead of <code>n</code> because <code>n^2-1 = (n-1)(n+1)</code> and the final error was just one step below the final divisor and the algorithm terminated.  It was easy to fix by adding one to the original argument before computing the error.  (Add two for cube roots, etc.)</p>\n\n<p>One nice attribute of this algorithm is that you can immediately tell if the number is a perfect square - the final error (not correction) in Newton's method will be zero.  A simple modification also lets you quickly calculate <code>floor(sqrt(x))</code> instead of the closest integer.  This is handy with several Euler problems.</p>\n"},{"tags":[],"owner":{"account_id":20188,"reputation":1433,"user_id":48011,"display_name":"Jonny Heggheim"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1243215504,"creation_date":1243214548,"answer_id":905031,"question_id":295579,"body_markdown":"I like the idea to use an almost correct method on some of the input. Here is a version with a higher &quot;offset&quot;. The code seems to work and passes my simple test case.\r\n\r\nJust replace your:\r\n\r\n    if(n &lt; 410881L){...}\r\ncode with this one:\r\n\r\n    if (n &lt; 11043908100L) {\r\n        //John Carmack hack, converted to Java.\r\n        // See: http://www.codemaestro.com/reviews/9\r\n        int i;\r\n        float x2, y;\r\n\r\n        x2 = n * 0.5F;\r\n        y = n;\r\n        i = Float.floatToRawIntBits(y);\r\n        //using the magic number from \r\n        //http://www.lomont.org/Math/Papers/2003/InvSqrt.pdf\r\n        //since it more accurate\r\n        i = 0x5f375a86 - (i &gt;&gt; 1);\r\n        y = Float.intBitsToFloat(i);\r\n        y = y * (1.5F - (x2 * y * y));\r\n        y = y * (1.5F - (x2 * y * y)); //Newton iteration, more accurate\r\n\r\n        sqrt = Math.round(1.0F / y);\r\n    } else {\r\n        //Carmack hack gives incorrect answer for n &gt;= 11043908100.\r\n        sqrt = (long) Math.sqrt(n);\r\n    }\r\n\r\n","title":"Fastest way to determine if an integer&#39;s square root is an integer","body":"<p>I like the idea to use an almost correct method on some of the input. Here is a version with a higher \"offset\". The code seems to work and passes my simple test case.</p>\n\n<p>Just replace your:</p>\n\n<pre><code>if(n &lt; 410881L){...}\n</code></pre>\n\n<p>code with this one:</p>\n\n<pre><code>if (n &lt; 11043908100L) {\n    //John Carmack hack, converted to Java.\n    // See: http://www.codemaestro.com/reviews/9\n    int i;\n    float x2, y;\n\n    x2 = n * 0.5F;\n    y = n;\n    i = Float.floatToRawIntBits(y);\n    //using the magic number from \n    //http://www.lomont.org/Math/Papers/2003/InvSqrt.pdf\n    //since it more accurate\n    i = 0x5f375a86 - (i &gt;&gt; 1);\n    y = Float.intBitsToFloat(i);\n    y = y * (1.5F - (x2 * y * y));\n    y = y * (1.5F - (x2 * y * y)); //Newton iteration, more accurate\n\n    sqrt = Math.round(1.0F / y);\n} else {\n    //Carmack hack gives incorrect answer for n &gt;= 11043908100.\n    sqrt = (long) Math.sqrt(n);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":41028,"reputation":1596,"user_id":119151,"accept_rate":77,"display_name":"dstibbe"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1253785617,"creation_date":1253785617,"answer_id":1470707,"question_id":295579,"body_markdown":"&quot;I&#39;m looking for the fastest way to determine if a long value is a perfect square (i.e. its square root is another integer).&quot; \r\n\r\nThe answers are impressive, but I failed to see a simple check :\r\n\r\ncheck whether the first number on the right of the long it a member of the set (0,1,4,5,6,9) . If it is not, then it cannot possibly be a &#39;perfect square&#39; .\r\n\r\neg.\r\n\r\n4567 - cannot be a perfect square.\r\n","title":"Fastest way to determine if an integer&#39;s square root is an integer","body":"<p>\"I'm looking for the fastest way to determine if a long value is a perfect square (i.e. its square root is another integer).\" </p>\n\n<p>The answers are impressive, but I failed to see a simple check :</p>\n\n<p>check whether the first number on the right of the long it a member of the set (0,1,4,5,6,9) . If it is not, then it cannot possibly be a 'perfect square' .</p>\n\n<p>eg.</p>\n\n<p>4567 - cannot be a perfect square.</p>\n"},{"tags":[],"owner":{"account_id":7052,"reputation":48090,"user_id":12048,"accept_rate":94,"display_name":"finnw"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1273163860,"creation_date":1273152550,"answer_id":2781475,"question_id":295579,"body_markdown":"This is the fastest Java implementation I could come up with, using a combination of techniques suggested by others in this thread.\r\n\r\n* Mod-256 test\r\n* Inexact mod-3465 test (avoids integer division at the cost of some false positives)\r\n* Floating-point square root, round and compare with input value\r\n\r\nI also experimented with these modifications but they did not help performance:\r\n\r\n* Additional mod-255 test\r\n* Dividing the input value by powers of 4\r\n* Fast Inverse Square Root (to work for high values of N it needs 3 iterations, enough to make it slower than the hardware square root function.)\r\n\r\n&lt;p/&gt;\r\n\r\n    public class SquareTester {\r\n    \r\n        public static boolean isPerfectSquare(long n) {\r\n            if (n &lt; 0) {\r\n                return false;\r\n            } else {\r\n                switch ((byte) n) {\r\n                case -128: case -127: case -124: case -119: case -112:\r\n                case -111: case -103: case  -95: case  -92: case  -87:\r\n                case  -79: case  -71: case  -64: case  -63: case  -60:\r\n                case  -55: case  -47: case  -39: case  -31: case  -28:\r\n                case  -23: case  -15: case   -7: case    0: case    1:\r\n                case    4: case    9: case   16: case   17: case   25:\r\n                case   33: case   36: case   41: case   49: case   57:\r\n                case   64: case   65: case   68: case   73: case   81:\r\n                case   89: case   97: case  100: case  105: case  113:\r\n                case  121:\r\n                    long i = (n * INV3465) &gt;&gt;&gt; 52;\r\n                    if (! good3465[(int) i]) {\r\n                        return false;\r\n                    } else {\r\n                        long r = round(Math.sqrt(n));\r\n                        return r*r == n; \r\n                    }\r\n                default:\r\n                    return false;\r\n                }\r\n            }\r\n        }\r\n    \r\n        private static int round(double x) {\r\n            return (int) Double.doubleToRawLongBits(x + (double) (1L &lt;&lt; 52));\r\n        }\r\n    \r\n        /** 3465&lt;sup&gt;-1&lt;/sup&gt; modulo 2&lt;sup&gt;64&lt;/sup&gt; */\r\n        private static final long INV3465 = 0x8ffed161732e78b9L;\r\n    \r\n        private static final boolean[] good3465 =\r\n            new boolean[0x1000];\r\n    \r\n        static {\r\n            for (int r = 0; r &lt; 3465; ++ r) {\r\n                int i = (int) ((r * r * INV3465) &gt;&gt;&gt; 52);\r\n                good3465[i] = good3465[i+1] = true;\r\n            }\r\n        }\r\n    \r\n    }","title":"Fastest way to determine if an integer&#39;s square root is an integer","body":"<p>This is the fastest Java implementation I could come up with, using a combination of techniques suggested by others in this thread.</p>\n\n<ul>\n<li>Mod-256 test</li>\n<li>Inexact mod-3465 test (avoids integer division at the cost of some false positives)</li>\n<li>Floating-point square root, round and compare with input value</li>\n</ul>\n\n<p>I also experimented with these modifications but they did not help performance:</p>\n\n<ul>\n<li>Additional mod-255 test</li>\n<li>Dividing the input value by powers of 4</li>\n<li>Fast Inverse Square Root (to work for high values of N it needs 3 iterations, enough to make it slower than the hardware square root function.)</li>\n</ul>\n\n<p></p>\n\n<pre><code>public class SquareTester {\n\n    public static boolean isPerfectSquare(long n) {\n        if (n &lt; 0) {\n            return false;\n        } else {\n            switch ((byte) n) {\n            case -128: case -127: case -124: case -119: case -112:\n            case -111: case -103: case  -95: case  -92: case  -87:\n            case  -79: case  -71: case  -64: case  -63: case  -60:\n            case  -55: case  -47: case  -39: case  -31: case  -28:\n            case  -23: case  -15: case   -7: case    0: case    1:\n            case    4: case    9: case   16: case   17: case   25:\n            case   33: case   36: case   41: case   49: case   57:\n            case   64: case   65: case   68: case   73: case   81:\n            case   89: case   97: case  100: case  105: case  113:\n            case  121:\n                long i = (n * INV3465) &gt;&gt;&gt; 52;\n                if (! good3465[(int) i]) {\n                    return false;\n                } else {\n                    long r = round(Math.sqrt(n));\n                    return r*r == n; \n                }\n            default:\n                return false;\n            }\n        }\n    }\n\n    private static int round(double x) {\n        return (int) Double.doubleToRawLongBits(x + (double) (1L &lt;&lt; 52));\n    }\n\n    /** 3465&lt;sup&gt;-1&lt;/sup&gt; modulo 2&lt;sup&gt;64&lt;/sup&gt; */\n    private static final long INV3465 = 0x8ffed161732e78b9L;\n\n    private static final boolean[] good3465 =\n        new boolean[0x1000];\n\n    static {\n        for (int r = 0; r &lt; 3465; ++ r) {\n            int i = (int) ((r * r * INV3465) &gt;&gt;&gt; 52);\n            good3465[i] = good3465[i+1] = true;\n        }\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":683863,"reputation":1,"user_id":530074,"display_name":"nabam serbang"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1520286620,"creation_date":1291425754,"answer_id":4351380,"question_id":295579,"body_markdown":"Considering for general bit length (though I have used specific type here), I tried to design simplistic algo as below. Simple and obvious check for 0,1,2 or &lt;0 is required initially.\r\nFollowing is simple in sense that it doesn&#39;t try to use any existing maths functions. Most of the operator can be replaced with bit-wise operators. I haven&#39;t tested with any bench mark data though. I&#39;m neither expert at maths or computer algorithm design in particular, I would love to see you pointing out problem. I know there is lots of improvement chances there.\r\n\r\n    int main()\r\n    {\r\n    \tunsigned int c1=0 ,c2 = 0;  \r\n    \tunsigned int x = 0;  \r\n    \tunsigned int p = 0;  \r\n    \tint k1 = 0;  \r\n    \tscanf(&quot;%d&quot;,&amp;p);  \r\n    \tif(p % 2 == 0) {  \r\n    \t    x = p/2; \r\n    \t}  \r\n    \telse {  \r\n    \t    x = (p/2) +1;  \r\n    \t}  \r\n    \twhile(x) \r\n        {\r\n    \t    if((x*x) &gt; p) {  \r\n    \t\t    c1 = x;  \r\n    \t\t    x = x/2; \r\n    \t\t}else {  \r\n    \t\t    c2 = x;  \r\n    \t\t    break;  \r\n    \t\t}  \r\n    \t}  \r\n    \tif((p%2) != 0)  \r\n            c2++;\r\n    \r\n        while(c2 &lt; c1) \r\n        {  \r\n            if((c2 * c2 ) == p) {  \r\n                k1 = 1;  \r\n                break;  \r\n       \t    }  \r\n            c2++; \r\n        }  \r\n        if(k1)  \r\n            printf(&quot;\\n Perfect square for %d&quot;, c2);  \r\n        else  \r\n            printf(&quot;\\n Not perfect but nearest to :%d :&quot;, c2);  \r\n        return 0;  \r\n    }  \r\n\r\n","title":"Fastest way to determine if an integer&#39;s square root is an integer","body":"<p>Considering for general bit length (though I have used specific type here), I tried to design simplistic algo as below. Simple and obvious check for 0,1,2 or &lt;0 is required initially.\nFollowing is simple in sense that it doesn't try to use any existing maths functions. Most of the operator can be replaced with bit-wise operators. I haven't tested with any bench mark data though. I'm neither expert at maths or computer algorithm design in particular, I would love to see you pointing out problem. I know there is lots of improvement chances there.</p>\n\n<pre><code>int main()\n{\n    unsigned int c1=0 ,c2 = 0;  \n    unsigned int x = 0;  \n    unsigned int p = 0;  \n    int k1 = 0;  \n    scanf(\"%d\",&amp;p);  \n    if(p % 2 == 0) {  \n        x = p/2; \n    }  \n    else {  \n        x = (p/2) +1;  \n    }  \n    while(x) \n    {\n        if((x*x) &gt; p) {  \n            c1 = x;  \n            x = x/2; \n        }else {  \n            c2 = x;  \n            break;  \n        }  \n    }  \n    if((p%2) != 0)  \n        c2++;\n\n    while(c2 &lt; c1) \n    {  \n        if((c2 * c2 ) == p) {  \n            k1 = 1;  \n            break;  \n        }  \n        c2++; \n    }  \n    if(k1)  \n        printf(\"\\n Perfect square for %d\", c2);  \n    else  \n        printf(\"\\n Not perfect but nearest to :%d :\", c2);  \n    return 0;  \n}  \n</code></pre>\n"},{"tags":[],"owner":{"account_id":558241,"reputation":834,"user_id":920769,"accept_rate":79,"display_name":"Fractaly"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1323059388,"creation_date":1322973052,"answer_id":8373278,"question_id":295579,"body_markdown":"I checked all of the possible results when the last n bits of a square is observed. By successively examining more bits, up to 5/6th of inputs can be eliminated. I actually designed this to implement Fermat&#39;s Factorization algorithm, and it is very fast there.\r\n\r\n    public static boolean isSquare(final long val) {\r\n       if ((val &amp; 2) == 2 || (val &amp; 7) == 5) {\r\n         return false;\r\n       }\r\n       if ((val &amp; 11) == 8 || (val &amp; 31) == 20) {\r\n         return false;\r\n       }\r\n\r\n       if ((val &amp; 47) == 32 || (val &amp; 127) == 80) {\r\n         return false;\r\n       }\r\n\r\n       if ((val &amp; 191) == 128 || (val &amp; 511) == 320) {\r\n         return false;\r\n       }\r\n\r\n       // if((val &amp; a == b) || (val &amp; c == d){\r\n       //   return false;\r\n       // }\r\n       \r\n       if (!modSq[(int) (val % modSq.length)]) {\r\n            return false;\r\n       }\r\n       \r\n       final long root = (long) Math.sqrt(val);\r\n       return root * root == val;\r\n    }\r\nThe last bit of pseudocode can be used to extend the tests to eliminate more values. The tests above are for k = 0, 1, 2, 3\r\n\r\n&lt;ul&gt;&lt;li&gt;a is of the form (3 &lt;&lt; 2k) - 1\r\n    &lt;li&gt;b is of the form (2 &lt;&lt; 2k)\r\n    &lt;li&gt;c is of the form (2 &lt;&lt; 2k + 2) - 1\r\n    &lt;li&gt;d is of the form (2 &lt;&lt; 2k - 1) * 10\r\n\r\nIt first tests whether it has a  square residual with moduli of power of two, then it tests based on a final modulus, then it uses the Math.sqrt to do a final test. I came up with the idea from the top post, and attempted to extend upon it. I appreciate any comments or suggestions.\r\n\r\n**Update:** Using the test by a modulus, (modSq) and a modulus base of 44352, my test runs in 96% of the time of the one in the OP&#39;s update for numbers up to 1,000,000,000.","title":"Fastest way to determine if an integer&#39;s square root is an integer","body":"<p>I checked all of the possible results when the last n bits of a square is observed. By successively examining more bits, up to 5/6th of inputs can be eliminated. I actually designed this to implement Fermat's Factorization algorithm, and it is very fast there.</p>\n\n<pre><code>public static boolean isSquare(final long val) {\n   if ((val &amp; 2) == 2 || (val &amp; 7) == 5) {\n     return false;\n   }\n   if ((val &amp; 11) == 8 || (val &amp; 31) == 20) {\n     return false;\n   }\n\n   if ((val &amp; 47) == 32 || (val &amp; 127) == 80) {\n     return false;\n   }\n\n   if ((val &amp; 191) == 128 || (val &amp; 511) == 320) {\n     return false;\n   }\n\n   // if((val &amp; a == b) || (val &amp; c == d){\n   //   return false;\n   // }\n\n   if (!modSq[(int) (val % modSq.length)]) {\n        return false;\n   }\n\n   final long root = (long) Math.sqrt(val);\n   return root * root == val;\n}\n</code></pre>\n\n<p>The last bit of pseudocode can be used to extend the tests to eliminate more values. The tests above are for k = 0, 1, 2, 3</p>\n\n<p><li>a is of the form (3 &lt;&lt; 2k) - 1\n    <li>b is of the form (2 &lt;&lt; 2k)\n    <li>c is of the form (2 &lt;&lt; 2k + 2) - 1\n    <li>d is of the form (2 &lt;&lt; 2k - 1) * 10</p>\n\n<p>It first tests whether it has a  square residual with moduli of power of two, then it tests based on a final modulus, then it uses the Math.sqrt to do a final test. I came up with the idea from the top post, and attempted to extend upon it. I appreciate any comments or suggestions.</p>\n\n<p><strong>Update:</strong> Using the test by a modulus, (modSq) and a modulus base of 44352, my test runs in 96% of the time of the one in the OP's update for numbers up to 1,000,000,000.</p>\n"},{"tags":[],"owner":{"account_id":1968644,"reputation":32046,"user_id":1768232,"accept_rate":81,"display_name":"durron597"},"down_vote_count":0,"up_vote_count":25,"is_accepted":false,"score":25,"last_activity_date":1371145366,"creation_date":1370882347,"answer_id":17028771,"question_id":295579,"body_markdown":"I ran my own analysis of several of the algorithms in this thread and came up with some new results. You can see those old results in the edit history of this answer, but they&#39;re not accurate, as I made a mistake, and wasted time analyzing several algorithms which aren&#39;t close. However, pulling lessons from several different answers, I now have two algorithms that crush the &quot;winner&quot; of this thread. Here&#39;s the core thing I do differently than everyone else:\r\n\r\n\t// This is faster because a number is divisible by 2^4 or more only 6% of the time\r\n\t// and more than that a vanishingly small percentage.\r\n\twhile((x &amp; 0x3) == 0) x &gt;&gt;= 2;\r\n\t// This is effectively the same as the switch-case statement used in the original\r\n\t// answer. \r\n\tif((x &amp; 0x7) != 1) return false;\r\n\r\nHowever, this simple line, which most of the time adds one or two very fast instructions, greatly simplifies the `switch-case` statement into one if statement. However, it can add to the runtime if many of the tested numbers have significant power-of-two factors.\r\n\r\nThe algorithms below are as follows:\r\n\r\n - **Internet** - Kip&#39;s posted answer\r\n - **Durron** - My modified answer using the one-pass answer as a base\r\n - **DurronTwo** - My modified answer using the two-pass answer (by @JohnnyHeggheim), with some other slight modifications.\r\n\r\nHere is a sample runtime if the numbers are generated using `Math.abs(java.util.Random.nextLong())`\r\n\r\n     0% Scenario{vm=java, trial=0, benchmark=Internet} 39673.40 ns; ?=378.78 ns @ 3 trials\r\n    33% Scenario{vm=java, trial=0, benchmark=Durron} 37785.75 ns; ?=478.86 ns @ 10 trials\r\n    67% Scenario{vm=java, trial=0, benchmark=DurronTwo} 35978.10 ns; ?=734.10 ns @ 10 trials\r\n\r\n    benchmark   us linear runtime\r\n     Internet 39.7 ==============================\r\n       Durron 37.8 ============================\r\n    DurronTwo 36.0 ===========================\r\n\r\n    vm: java\r\n    trial: 0\r\n\r\nAnd here is a sample runtime if it&#39;s run on the first million longs only:\r\n\r\n     0% Scenario{vm=java, trial=0, benchmark=Internet} 2933380.84 ns; ?=56939.84 ns @ 10 trials\r\n    33% Scenario{vm=java, trial=0, benchmark=Durron} 2243266.81 ns; ?=50537.62 ns @ 10 trials\r\n    67% Scenario{vm=java, trial=0, benchmark=DurronTwo} 3159227.68 ns; ?=10766.22 ns @ 3 trials\r\n\r\n    benchmark   ms linear runtime\r\n     Internet 2.93 ===========================\r\n       Durron 2.24 =====================\r\n    DurronTwo 3.16 ==============================\r\n\r\n    vm: java\r\n    trial: 0\r\n\r\nAs you can see, `DurronTwo` does better for large inputs, because it gets to use the magic trick very very often, but gets clobbered compared to the first algorithm and `Math.sqrt` because the numbers are so much smaller. Meanwhile, the simpler `Durron` is a huge winner because it never has to divide by 4 many many times in the first million numbers.\r\n\r\nHere&#39;s `Durron`:\r\n\r\n\tpublic final static boolean isPerfectSquareDurron(long n) {\r\n\t\tif(n &lt; 0) return false;\r\n\t\tif(n == 0) return true;\r\n\t\t\r\n\t\tlong x = n;\r\n\t\t// This is faster because a number is divisible by 16 only 6% of the time\r\n\t\t// and more than that a vanishingly small percentage.\r\n\t\twhile((x &amp; 0x3) == 0) x &gt;&gt;= 2;\r\n\t\t// This is effectively the same as the switch-case statement used in the original\r\n\t\t// answer. \r\n\t\tif((x &amp; 0x7) == 1) {\r\n\t\r\n\t\t\tlong sqrt;\r\n\t\t\tif(x &lt; 410881L)\r\n\t\t\t{\r\n\t\t\t\tint i;\r\n\t\t\t\tfloat x2, y;\r\n\t\r\n\t\t\t\tx2 = x * 0.5F;\r\n\t\t\t\ty  = x;\r\n\t\t\t\ti  = Float.floatToRawIntBits(y);\r\n\t\t\t\ti  = 0x5f3759df - ( i &gt;&gt; 1 );\r\n\t\t\t\ty  = Float.intBitsToFloat(i);\r\n\t\t\t\ty  = y * ( 1.5F - ( x2 * y * y ) );\r\n\t\r\n\t\t\t\tsqrt = (long)(1.0F/y);\r\n\t\t\t} else {\r\n\t\t\t\tsqrt = (long) Math.sqrt(x);\r\n\t\t\t}\r\n\t\t\treturn sqrt*sqrt == x;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\nAnd `DurronTwo`\r\n\r\n\tpublic final static boolean isPerfectSquareDurronTwo(long n) {\r\n\t\tif(n &lt; 0) return false;\r\n\t\t// Needed to prevent infinite loop\r\n\t\tif(n == 0) return true;\r\n\t\t\r\n\t\tlong x = n;\r\n\t\twhile((x &amp; 0x3) == 0) x &gt;&gt;= 2;\r\n\t\tif((x &amp; 0x7) == 1) {\r\n\t\t\tlong sqrt;\r\n\t\t\tif (x &lt; 41529141369L) {\r\n\t\t\t\tint i;\r\n\t\t\t\tfloat x2, y;\r\n\t\r\n\t\t\t\tx2 = x * 0.5F;\r\n\t\t\t\ty = x;\r\n\t\t\t\ti = Float.floatToRawIntBits(y);\r\n\t\t\t\t//using the magic number from \r\n\t\t\t\t//http://www.lomont.org/Math/Papers/2003/InvSqrt.pdf\r\n\t\t\t\t//since it more accurate\r\n\t\t\t\ti = 0x5f375a86 - (i &gt;&gt; 1);\r\n\t\t\t\ty = Float.intBitsToFloat(i);\r\n\t\t\t\ty = y * (1.5F - (x2 * y * y));\r\n\t\t\t\ty = y * (1.5F - (x2 * y * y)); //Newton iteration, more accurate\r\n\t\t\t\tsqrt = (long) ((1.0F/y) + 0.2);\r\n\t\t\t} else {\r\n\t\t\t\t//Carmack hack gives incorrect answer for n &gt;= 41529141369.\r\n\t\t\t\tsqrt = (long) Math.sqrt(x);\r\n\t\t\t}\r\n\t\t\treturn sqrt*sqrt == x;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\nAnd my benchmark harness: (Requires Google caliper 0.1-rc5)\r\n\r\n\tpublic class SquareRootBenchmark {\r\n\t\tpublic static class Benchmark1 extends SimpleBenchmark {\r\n\t\t\tprivate static final int ARRAY_SIZE = 10000;\r\n\t\t\tlong[] trials = new long[ARRAY_SIZE];\r\n\t\r\n\t\t\t@Override\r\n\t\t\tprotected void setUp() throws Exception {\r\n\t\t\t\tRandom r = new Random();\r\n\t\t\t\tfor (int i = 0; i &lt; ARRAY_SIZE; i++) {\r\n\t\t\t\t\ttrials[i] = Math.abs(r.nextLong());\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\r\n\t\t\t\r\n\t\t\tpublic int timeInternet(int reps) {\r\n\t\t\t\tint trues = 0;\r\n\t\t\t\tfor(int i = 0; i &lt; reps; i++) {\r\n\t\t\t\t\tfor(int j = 0; j &lt; ARRAY_SIZE; j++) {\r\n\t\t\t\t\t\tif(SquareRootAlgs.isPerfectSquareInternet(trials[j])) trues++;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\treturn trues;   \r\n\t\t\t}\r\n\t\r\n\t\t\tpublic int timeDurron(int reps) {\r\n\t\t\t\tint trues = 0;\r\n\t\t\t\tfor(int i = 0; i &lt; reps; i++) {\r\n\t\t\t\t\tfor(int j = 0; j &lt; ARRAY_SIZE; j++) {\r\n\t\t\t\t\t\tif(SquareRootAlgs.isPerfectSquareDurron(trials[j])) trues++;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\treturn trues;   \r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tpublic int timeDurronTwo(int reps) {\r\n\t\t\t\tint trues = 0;\r\n\t\t\t\tfor(int i = 0; i &lt; reps; i++) {\r\n\t\t\t\t\tfor(int j = 0; j &lt; ARRAY_SIZE; j++) {\r\n\t\t\t\t\t\tif(SquareRootAlgs.isPerfectSquareDurronTwo(trials[j])) trues++;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\treturn trues;   \r\n\t\t\t}\r\n\t\t}\r\n\t\r\n\t\tpublic static void main(String... args) {\r\n\t\t\tRunner.main(Benchmark1.class, args);\r\n\t\t}\r\n\t}\r\n\r\n**UPDATE:** I&#39;ve made a new algorithm that is faster in some scenarios, slower in others, I&#39;ve gotten different benchmarks based on different inputs. If we calculate modulo `0xFFFFFF = 3 x 3 x 5 x 7 x 13 x 17 x 241`, we can eliminate 97.82% of numbers that cannot be squares. This can be (sort of) done in one line, with 5 bitwise operations:\r\n\r\n\tif (!goodLookupSquares[(int) ((n &amp; 0xFFFFFFl) + ((n &gt;&gt; 24) &amp; 0xFFFFFFl) + (n &gt;&gt; 48))]) return false;\r\n\r\nThe resulting index is either 1) the residue, 2) the residue `+ 0xFFFFFF`, or 3) the residue `+ 0x1FFFFFE`. Of course, we need to have a lookup table for residues modulo `0xFFFFFF`, which is about a 3mb file (in this case stored as ascii text decimal numbers, not optimal but clearly improvable with a `ByteBuffer` and so forth. But since that is precalculation it doesn&#39;t matter so much. [You can find the file here](http://www.stwing.org/~martinja/24residues_squares.txt) (or generate it yourself): \r\n\r\n\tpublic final static boolean isPerfectSquareDurronThree(long n) {\r\n\t\tif(n &lt; 0) return false;\r\n\t\tif(n == 0) return true;\r\n\t\t\r\n\t\tlong x = n;\r\n\t\twhile((x &amp; 0x3) == 0) x &gt;&gt;= 2;\r\n\t\tif((x &amp; 0x7) == 1) {\r\n\t\t\tif (!goodLookupSquares[(int) ((n &amp; 0xFFFFFFl) + ((n &gt;&gt; 24) &amp; 0xFFFFFFl) + (n &gt;&gt; 48))]) return false;\r\n\t\t\tlong sqrt;\r\n\t\t\tif(x &lt; 410881L)\r\n\t\t\t{\r\n\t\t\t\tint i;\r\n\t\t\t\tfloat x2, y;\r\n\t\r\n\t\t\t\tx2 = x * 0.5F;\r\n\t\t\t\ty  = x;\r\n\t\t\t\ti  = Float.floatToRawIntBits(y);\r\n\t\t\t\ti  = 0x5f3759df - ( i &gt;&gt; 1 );\r\n\t\t\t\ty  = Float.intBitsToFloat(i);\r\n\t\t\t\ty  = y * ( 1.5F - ( x2 * y * y ) );\r\n\t\r\n\t\t\t\tsqrt = (long)(1.0F/y);\r\n\t\t\t} else {\r\n\t\t\t\tsqrt = (long) Math.sqrt(x);\r\n\t\t\t}\r\n\t\t\treturn sqrt*sqrt == x;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\nI load it into a `boolean` array like this:\r\n\r\n\tprivate static boolean[] goodLookupSquares = null;\r\n\t\r\n\tpublic static void initGoodLookupSquares() throws Exception {\r\n\t\tScanner s = new Scanner(new File(&quot;24residues_squares.txt&quot;));\r\n\t\t\r\n\t\tgoodLookupSquares = new boolean[0x1FFFFFE];\r\n\t\t\r\n\t\twhile(s.hasNextLine()) {\r\n\t\t\tint residue = Integer.valueOf(s.nextLine());\r\n\t\t\tgoodLookupSquares[residue] = true;\r\n\t\t\tgoodLookupSquares[residue + 0xFFFFFF] = true;\r\n\t\t\tgoodLookupSquares[residue + 0x1FFFFFE] = true;\r\n\t\t}\r\n\t\t\r\n\t\ts.close();\r\n\t}\r\n\r\nExample runtime. It beat `Durron` (version one) in every trial I ran.\r\n\r\n     0% Scenario{vm=java, trial=0, benchmark=Internet} 40665.77 ns; ?=566.71 ns @ 10 trials\r\n    33% Scenario{vm=java, trial=0, benchmark=Durron} 38397.60 ns; ?=784.30 ns @ 10 trials\r\n    67% Scenario{vm=java, trial=0, benchmark=DurronThree} 36171.46 ns; ?=693.02 ns @ 10 trials\r\n\r\n      benchmark   us linear runtime\r\n       Internet 40.7 ==============================\r\n         Durron 38.4 ============================\r\n    DurronThree 36.2 ==========================\r\n\r\n    vm: java\r\n    trial: 0","title":"Fastest way to determine if an integer&#39;s square root is an integer","body":"<p>I ran my own analysis of several of the algorithms in this thread and came up with some new results. You can see those old results in the edit history of this answer, but they're not accurate, as I made a mistake, and wasted time analyzing several algorithms which aren't close. However, pulling lessons from several different answers, I now have two algorithms that crush the \"winner\" of this thread. Here's the core thing I do differently than everyone else:</p>\n\n<pre><code>// This is faster because a number is divisible by 2^4 or more only 6% of the time\n// and more than that a vanishingly small percentage.\nwhile((x &amp; 0x3) == 0) x &gt;&gt;= 2;\n// This is effectively the same as the switch-case statement used in the original\n// answer. \nif((x &amp; 0x7) != 1) return false;\n</code></pre>\n\n<p>However, this simple line, which most of the time adds one or two very fast instructions, greatly simplifies the <code>switch-case</code> statement into one if statement. However, it can add to the runtime if many of the tested numbers have significant power-of-two factors.</p>\n\n<p>The algorithms below are as follows:</p>\n\n<ul>\n<li><strong>Internet</strong> - Kip's posted answer</li>\n<li><strong>Durron</strong> - My modified answer using the one-pass answer as a base</li>\n<li><strong>DurronTwo</strong> - My modified answer using the two-pass answer (by @JohnnyHeggheim), with some other slight modifications.</li>\n</ul>\n\n<p>Here is a sample runtime if the numbers are generated using <code>Math.abs(java.util.Random.nextLong())</code></p>\n\n<pre><code> 0% Scenario{vm=java, trial=0, benchmark=Internet} 39673.40 ns; ?=378.78 ns @ 3 trials\n33% Scenario{vm=java, trial=0, benchmark=Durron} 37785.75 ns; ?=478.86 ns @ 10 trials\n67% Scenario{vm=java, trial=0, benchmark=DurronTwo} 35978.10 ns; ?=734.10 ns @ 10 trials\n\nbenchmark   us linear runtime\n Internet 39.7 ==============================\n   Durron 37.8 ============================\nDurronTwo 36.0 ===========================\n\nvm: java\ntrial: 0\n</code></pre>\n\n<p>And here is a sample runtime if it's run on the first million longs only:</p>\n\n<pre><code> 0% Scenario{vm=java, trial=0, benchmark=Internet} 2933380.84 ns; ?=56939.84 ns @ 10 trials\n33% Scenario{vm=java, trial=0, benchmark=Durron} 2243266.81 ns; ?=50537.62 ns @ 10 trials\n67% Scenario{vm=java, trial=0, benchmark=DurronTwo} 3159227.68 ns; ?=10766.22 ns @ 3 trials\n\nbenchmark   ms linear runtime\n Internet 2.93 ===========================\n   Durron 2.24 =====================\nDurronTwo 3.16 ==============================\n\nvm: java\ntrial: 0\n</code></pre>\n\n<p>As you can see, <code>DurronTwo</code> does better for large inputs, because it gets to use the magic trick very very often, but gets clobbered compared to the first algorithm and <code>Math.sqrt</code> because the numbers are so much smaller. Meanwhile, the simpler <code>Durron</code> is a huge winner because it never has to divide by 4 many many times in the first million numbers.</p>\n\n<p>Here's <code>Durron</code>:</p>\n\n<pre><code>public final static boolean isPerfectSquareDurron(long n) {\n    if(n &lt; 0) return false;\n    if(n == 0) return true;\n\n    long x = n;\n    // This is faster because a number is divisible by 16 only 6% of the time\n    // and more than that a vanishingly small percentage.\n    while((x &amp; 0x3) == 0) x &gt;&gt;= 2;\n    // This is effectively the same as the switch-case statement used in the original\n    // answer. \n    if((x &amp; 0x7) == 1) {\n\n        long sqrt;\n        if(x &lt; 410881L)\n        {\n            int i;\n            float x2, y;\n\n            x2 = x * 0.5F;\n            y  = x;\n            i  = Float.floatToRawIntBits(y);\n            i  = 0x5f3759df - ( i &gt;&gt; 1 );\n            y  = Float.intBitsToFloat(i);\n            y  = y * ( 1.5F - ( x2 * y * y ) );\n\n            sqrt = (long)(1.0F/y);\n        } else {\n            sqrt = (long) Math.sqrt(x);\n        }\n        return sqrt*sqrt == x;\n    }\n    return false;\n}\n</code></pre>\n\n<p>And <code>DurronTwo</code></p>\n\n<pre><code>public final static boolean isPerfectSquareDurronTwo(long n) {\n    if(n &lt; 0) return false;\n    // Needed to prevent infinite loop\n    if(n == 0) return true;\n\n    long x = n;\n    while((x &amp; 0x3) == 0) x &gt;&gt;= 2;\n    if((x &amp; 0x7) == 1) {\n        long sqrt;\n        if (x &lt; 41529141369L) {\n            int i;\n            float x2, y;\n\n            x2 = x * 0.5F;\n            y = x;\n            i = Float.floatToRawIntBits(y);\n            //using the magic number from \n            //http://www.lomont.org/Math/Papers/2003/InvSqrt.pdf\n            //since it more accurate\n            i = 0x5f375a86 - (i &gt;&gt; 1);\n            y = Float.intBitsToFloat(i);\n            y = y * (1.5F - (x2 * y * y));\n            y = y * (1.5F - (x2 * y * y)); //Newton iteration, more accurate\n            sqrt = (long) ((1.0F/y) + 0.2);\n        } else {\n            //Carmack hack gives incorrect answer for n &gt;= 41529141369.\n            sqrt = (long) Math.sqrt(x);\n        }\n        return sqrt*sqrt == x;\n    }\n    return false;\n}\n</code></pre>\n\n<p>And my benchmark harness: (Requires Google caliper 0.1-rc5)</p>\n\n<pre><code>public class SquareRootBenchmark {\n    public static class Benchmark1 extends SimpleBenchmark {\n        private static final int ARRAY_SIZE = 10000;\n        long[] trials = new long[ARRAY_SIZE];\n\n        @Override\n        protected void setUp() throws Exception {\n            Random r = new Random();\n            for (int i = 0; i &lt; ARRAY_SIZE; i++) {\n                trials[i] = Math.abs(r.nextLong());\n            }\n        }\n\n\n        public int timeInternet(int reps) {\n            int trues = 0;\n            for(int i = 0; i &lt; reps; i++) {\n                for(int j = 0; j &lt; ARRAY_SIZE; j++) {\n                    if(SquareRootAlgs.isPerfectSquareInternet(trials[j])) trues++;\n                }\n            }\n\n            return trues;   \n        }\n\n        public int timeDurron(int reps) {\n            int trues = 0;\n            for(int i = 0; i &lt; reps; i++) {\n                for(int j = 0; j &lt; ARRAY_SIZE; j++) {\n                    if(SquareRootAlgs.isPerfectSquareDurron(trials[j])) trues++;\n                }\n            }\n\n            return trues;   \n        }\n\n        public int timeDurronTwo(int reps) {\n            int trues = 0;\n            for(int i = 0; i &lt; reps; i++) {\n                for(int j = 0; j &lt; ARRAY_SIZE; j++) {\n                    if(SquareRootAlgs.isPerfectSquareDurronTwo(trials[j])) trues++;\n                }\n            }\n\n            return trues;   \n        }\n    }\n\n    public static void main(String... args) {\n        Runner.main(Benchmark1.class, args);\n    }\n}\n</code></pre>\n\n<p><strong>UPDATE:</strong> I've made a new algorithm that is faster in some scenarios, slower in others, I've gotten different benchmarks based on different inputs. If we calculate modulo <code>0xFFFFFF = 3 x 3 x 5 x 7 x 13 x 17 x 241</code>, we can eliminate 97.82% of numbers that cannot be squares. This can be (sort of) done in one line, with 5 bitwise operations:</p>\n\n<pre><code>if (!goodLookupSquares[(int) ((n &amp; 0xFFFFFFl) + ((n &gt;&gt; 24) &amp; 0xFFFFFFl) + (n &gt;&gt; 48))]) return false;\n</code></pre>\n\n<p>The resulting index is either 1) the residue, 2) the residue <code>+ 0xFFFFFF</code>, or 3) the residue <code>+ 0x1FFFFFE</code>. Of course, we need to have a lookup table for residues modulo <code>0xFFFFFF</code>, which is about a 3mb file (in this case stored as ascii text decimal numbers, not optimal but clearly improvable with a <code>ByteBuffer</code> and so forth. But since that is precalculation it doesn't matter so much. <a href=\"http://www.stwing.org/~martinja/24residues_squares.txt\" rel=\"noreferrer\">You can find the file here</a> (or generate it yourself): </p>\n\n<pre><code>public final static boolean isPerfectSquareDurronThree(long n) {\n    if(n &lt; 0) return false;\n    if(n == 0) return true;\n\n    long x = n;\n    while((x &amp; 0x3) == 0) x &gt;&gt;= 2;\n    if((x &amp; 0x7) == 1) {\n        if (!goodLookupSquares[(int) ((n &amp; 0xFFFFFFl) + ((n &gt;&gt; 24) &amp; 0xFFFFFFl) + (n &gt;&gt; 48))]) return false;\n        long sqrt;\n        if(x &lt; 410881L)\n        {\n            int i;\n            float x2, y;\n\n            x2 = x * 0.5F;\n            y  = x;\n            i  = Float.floatToRawIntBits(y);\n            i  = 0x5f3759df - ( i &gt;&gt; 1 );\n            y  = Float.intBitsToFloat(i);\n            y  = y * ( 1.5F - ( x2 * y * y ) );\n\n            sqrt = (long)(1.0F/y);\n        } else {\n            sqrt = (long) Math.sqrt(x);\n        }\n        return sqrt*sqrt == x;\n    }\n    return false;\n}\n</code></pre>\n\n<p>I load it into a <code>boolean</code> array like this:</p>\n\n<pre><code>private static boolean[] goodLookupSquares = null;\n\npublic static void initGoodLookupSquares() throws Exception {\n    Scanner s = new Scanner(new File(\"24residues_squares.txt\"));\n\n    goodLookupSquares = new boolean[0x1FFFFFE];\n\n    while(s.hasNextLine()) {\n        int residue = Integer.valueOf(s.nextLine());\n        goodLookupSquares[residue] = true;\n        goodLookupSquares[residue + 0xFFFFFF] = true;\n        goodLookupSquares[residue + 0x1FFFFFE] = true;\n    }\n\n    s.close();\n}\n</code></pre>\n\n<p>Example runtime. It beat <code>Durron</code> (version one) in every trial I ran.</p>\n\n<pre><code> 0% Scenario{vm=java, trial=0, benchmark=Internet} 40665.77 ns; ?=566.71 ns @ 10 trials\n33% Scenario{vm=java, trial=0, benchmark=Durron} 38397.60 ns; ?=784.30 ns @ 10 trials\n67% Scenario{vm=java, trial=0, benchmark=DurronThree} 36171.46 ns; ?=693.02 ns @ 10 trials\n\n  benchmark   us linear runtime\n   Internet 40.7 ==============================\n     Durron 38.4 ============================\nDurronThree 36.2 ==========================\n\nvm: java\ntrial: 0\n</code></pre>\n"},{"tags":[],"owner":{"account_id":283609,"reputation":45044,"user_id":581205,"accept_rate":72,"display_name":"maaartinus"},"down_vote_count":0,"up_vote_count":457,"is_accepted":false,"score":457,"last_activity_date":1518725921,"creation_date":1378661857,"answer_id":18686659,"question_id":295579,"body_markdown":"![](https://i.stack.imgur.com/UDUNr.png)\n\nI&#39;m pretty late to the party, but I hope to provide a better answer; shorter and (assuming my [benchmark][src] is correct) also much [faster][speed].\n\n    long goodMask; // 0xC840C04048404040 computed below\n    {\n        for (int i=0; i&lt;64; ++i) goodMask |= Long.MIN_VALUE &gt;&gt;&gt; (i*i);\n    }\n\n    public boolean isSquare(long x) {\n        // This tests if the 6 least significant bits are right.\n        // Moving the to be tested bit to the highest position saves us masking.\n        if (goodMask &lt;&lt; x &gt;= 0) return false;\n        final int numberOfTrailingZeros = Long.numberOfTrailingZeros(x);\n        // Each square ends with an even number of zeros.\n        if ((numberOfTrailingZeros &amp; 1) != 0) return false;\n        x &gt;&gt;= numberOfTrailingZeros;\n        // Now x is either 0 or odd.\n        // In binary each odd square ends with 001.\n        // Postpone the sign test until now; handle zero in the branch.\n        if ((x&amp;7) != 1 | x &lt;= 0) return x == 0;\n        // Do it in the classical way.\n        // The correctness is not trivial as the conversion from long to double is lossy!\n        final long tst = (long) Math.sqrt(x);\n        return tst * tst == x;\n    }\n\nThe first test catches most non-squares quickly. It uses a 64-item table packed in a long, so there&#39;s no array access cost (indirection and bounds checks). For a uniformly random `long`, there&#39;s a 81.25% probability of ending here.\n\nThe second test catches all numbers having an odd number of twos in their factorization. The method `Long.numberOfTrailingZeros` is very fast as it gets JIT-ed into a single i86 instruction.\n\nAfter dropping the trailing zeros, the third test handles numbers ending with 011, 101, or 111 in binary, which are no perfect squares. It also cares about negative numbers and also handles 0.\n\nThe final test falls back to `double` arithmetic. As `double` has only 53 bits mantissa, \nthe conversion from `long` to `double` includes rounding for big values. Nonetheless, the test is  correct (unless the [proof][] is wrong).\n\nTrying to incorporate the mod255 idea wasn&#39;t successful.\n\n[src]: \nhttps://www.dropbox.com/s/ad4r6oxfcilqkch/IsSquareBenchmark.java?dl=0\n\n[speed]: https://microbenchmarks.appspot.com/runs/185f228a-fd9b-44b4-8a7a-48d12101aece\n[proof]: https://math.stackexchange.com/questions/237865/show-that-floating-point-sqrtx-cdot-x-geq-x-for-all-long-x\n","title":"Fastest way to determine if an integer&#39;s square root is an integer","body":"<p><img src=\"https://i.stack.imgur.com/UDUNr.png\" alt=\"\" /></p>\n<p>I'm pretty late to the party, but I hope to provide a better answer; shorter and (assuming my <a href=\"https://www.dropbox.com/s/ad4r6oxfcilqkch/IsSquareBenchmark.java?dl=0\" rel=\"noreferrer\">benchmark</a> is correct) also much <a href=\"https://microbenchmarks.appspot.com/runs/185f228a-fd9b-44b4-8a7a-48d12101aece\" rel=\"noreferrer\">faster</a>.</p>\n<pre><code>long goodMask; // 0xC840C04048404040 computed below\n{\n    for (int i=0; i&lt;64; ++i) goodMask |= Long.MIN_VALUE &gt;&gt;&gt; (i*i);\n}\n\npublic boolean isSquare(long x) {\n    // This tests if the 6 least significant bits are right.\n    // Moving the to be tested bit to the highest position saves us masking.\n    if (goodMask &lt;&lt; x &gt;= 0) return false;\n    final int numberOfTrailingZeros = Long.numberOfTrailingZeros(x);\n    // Each square ends with an even number of zeros.\n    if ((numberOfTrailingZeros &amp; 1) != 0) return false;\n    x &gt;&gt;= numberOfTrailingZeros;\n    // Now x is either 0 or odd.\n    // In binary each odd square ends with 001.\n    // Postpone the sign test until now; handle zero in the branch.\n    if ((x&amp;7) != 1 | x &lt;= 0) return x == 0;\n    // Do it in the classical way.\n    // The correctness is not trivial as the conversion from long to double is lossy!\n    final long tst = (long) Math.sqrt(x);\n    return tst * tst == x;\n}\n</code></pre>\n<p>The first test catches most non-squares quickly. It uses a 64-item table packed in a long, so there's no array access cost (indirection and bounds checks). For a uniformly random <code>long</code>, there's a 81.25% probability of ending here.</p>\n<p>The second test catches all numbers having an odd number of twos in their factorization. The method <code>Long.numberOfTrailingZeros</code> is very fast as it gets JIT-ed into a single i86 instruction.</p>\n<p>After dropping the trailing zeros, the third test handles numbers ending with 011, 101, or 111 in binary, which are no perfect squares. It also cares about negative numbers and also handles 0.</p>\n<p>The final test falls back to <code>double</code> arithmetic. As <code>double</code> has only 53 bits mantissa,\nthe conversion from <code>long</code> to <code>double</code> includes rounding for big values. Nonetheless, the test is  correct (unless the <a href=\"https://math.stackexchange.com/questions/237865/show-that-floating-point-sqrtx-cdot-x-geq-x-for-all-long-x\">proof</a> is wrong).</p>\n<p>Trying to incorporate the mod255 idea wasn't successful.</p>\n"},{"tags":[],"owner":{"account_id":107038,"reputation":133820,"user_id":284795,"accept_rate":79,"display_name":"Colonel Panic"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1381918733,"creation_date":1381852114,"answer_id":19385572,"question_id":295579,"body_markdown":"An integer problem deserves an integer solution. Thus\r\n\r\nDo binary search on the (non-negative) integers to find the greatest integer t such that `t**2 &lt;= n`. Then test whether `r**2 = n` exactly. This takes time O(log n). \r\n\r\nIf you don&#39;t know how to binary search the positive integers because the set is unbounded, it&#39;s easy. You starting by computing your increasing function f (above `f(t) = t**2 - n`) on powers of two. When you see it turn positive, you&#39;ve found an upper bound. Then you can do standard binary search.\r\n","title":"Fastest way to determine if an integer&#39;s square root is an integer","body":"<p>An integer problem deserves an integer solution. Thus</p>\n\n<p>Do binary search on the (non-negative) integers to find the greatest integer t such that <code>t**2 &lt;= n</code>. Then test whether <code>r**2 = n</code> exactly. This takes time O(log n). </p>\n\n<p>If you don't know how to binary search the positive integers because the set is unbounded, it's easy. You starting by computing your increasing function f (above <code>f(t) = t**2 - n</code>) on powers of two. When you see it turn positive, you've found an upper bound. Then you can do standard binary search.</p>\n"},{"tags":[],"owner":{"account_id":971754,"reputation":48147,"user_id":1477667,"accept_rate":56,"display_name":"dfeuer"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1405279451,"creation_date":1405246635,"answer_id":24721612,"question_id":295579,"body_markdown":"The following simplification of maaartinus&#39;s solution appears to shave a few percentage points off the runtime, but I&#39;m not good enough at benchmarking to produce a benchmark I can trust:\r\n\r\n    long goodMask; // 0xC840C04048404040 computed below\r\n    {\r\n        for (int i=0; i&lt;64; ++i) goodMask |= Long.MIN_VALUE &gt;&gt;&gt; (i*i);\r\n    }\r\n    \r\n    public boolean isSquare(long x) {\r\n        // This tests if the 6 least significant bits are right.\r\n        // Moving the to be tested bit to the highest position saves us masking.\r\n        if (goodMask &lt;&lt; x &gt;= 0) return false;\r\n        // Remove an even number of trailing zeros, leaving at most one.\r\n        x &gt;&gt;= (Long.numberOfTrailingZeros(x) &amp; (-2);\r\n        // Repeat the test on the 6 least significant remaining bits.\r\n        if (goodMask &lt;&lt; x &gt;= 0 | x &lt;= 0) return x == 0;\r\n        // Do it in the classical way.\r\n        // The correctness is not trivial as the conversion from long to double is lossy!\r\n        final long tst = (long) Math.sqrt(x);\r\n        return tst * tst == x;\r\n    }\r\n\r\nIt would be worth checking how omitting the first test,\r\n\r\n    if (goodMask &lt;&lt; x &gt;= 0) return false;\r\n\r\nwould affect performance.","title":"Fastest way to determine if an integer&#39;s square root is an integer","body":"<p>The following simplification of maaartinus's solution appears to shave a few percentage points off the runtime, but I'm not good enough at benchmarking to produce a benchmark I can trust:</p>\n\n<pre><code>long goodMask; // 0xC840C04048404040 computed below\n{\n    for (int i=0; i&lt;64; ++i) goodMask |= Long.MIN_VALUE &gt;&gt;&gt; (i*i);\n}\n\npublic boolean isSquare(long x) {\n    // This tests if the 6 least significant bits are right.\n    // Moving the to be tested bit to the highest position saves us masking.\n    if (goodMask &lt;&lt; x &gt;= 0) return false;\n    // Remove an even number of trailing zeros, leaving at most one.\n    x &gt;&gt;= (Long.numberOfTrailingZeros(x) &amp; (-2);\n    // Repeat the test on the 6 least significant remaining bits.\n    if (goodMask &lt;&lt; x &gt;= 0 | x &lt;= 0) return x == 0;\n    // Do it in the classical way.\n    // The correctness is not trivial as the conversion from long to double is lossy!\n    final long tst = (long) Math.sqrt(x);\n    return tst * tst == x;\n}\n</code></pre>\n\n<p>It would be worth checking how omitting the first test,</p>\n\n<pre><code>if (goodMask &lt;&lt; x &gt;= 0) return false;\n</code></pre>\n\n<p>would affect performance.</p>\n"},{"tags":[],"owner":{"account_id":9366757,"reputation":793,"user_id":8031498,"accept_rate":67,"display_name":"Steve Storck"},"down_vote_count":3,"up_vote_count":5,"is_accepted":false,"score":2,"last_activity_date":1613413669,"creation_date":1507849699,"answer_id":46720183,"question_id":295579,"body_markdown":"Here is the simplest and most concise way, although I do not know how it compares in terms of CPU cycles.  This works great if you only wish to know if the root is a whole number.  If you really care if it is an integer, you can also figure that out.  Here is a simple (and pure) function:\r\n\r\n    private static final MathContext precision = new MathContext(20);\r\n\r\n    private static final Function&lt;Long, Boolean&gt; isRootWhole = (n) -&gt; {\r\n        long digit = n % 10;\r\n        if (digit == 2 || digit == 3 || digit == 7 || digit == 8) {\r\n            return false;\r\n        }\r\n        return new BigDecimal(n).sqrt(precision).scale() == 0;\r\n    };\r\n\r\nIf you do not need micro-optimization, this answer is better in terms of simplicity and maintainability.  If you will be calculating negative numbers, you will need to handle that accordingly, and send the absolute value into the function.  I have included a minor optimization because no perfect squares have a tens digit of 2, 3, 7, or 8 due to quadratic residues mod 10.\r\n\r\nOn my CPU, a run of this algorithm on 0 - 10,000,000 took an average of 1000 - 1100 nanoseconds per calculation.\r\n\r\nIf you are performing a lesser number of calculations, the earlier calculations take a bit longer.\r\n\r\nI had a negative comment that my previous edit did not work for large numbers.  The OP mentioned Longs, and the largest perfect square that is a Long is 9223372030926249001, so this method works for all Longs.","title":"Fastest way to determine if an integer&#39;s square root is an integer","body":"<p>Here is the simplest and most concise way, although I do not know how it compares in terms of CPU cycles.  This works great if you only wish to know if the root is a whole number.  If you really care if it is an integer, you can also figure that out.  Here is a simple (and pure) function:</p>\n<pre><code>private static final MathContext precision = new MathContext(20);\n\nprivate static final Function&lt;Long, Boolean&gt; isRootWhole = (n) -&gt; {\n    long digit = n % 10;\n    if (digit == 2 || digit == 3 || digit == 7 || digit == 8) {\n        return false;\n    }\n    return new BigDecimal(n).sqrt(precision).scale() == 0;\n};\n</code></pre>\n<p>If you do not need micro-optimization, this answer is better in terms of simplicity and maintainability.  If you will be calculating negative numbers, you will need to handle that accordingly, and send the absolute value into the function.  I have included a minor optimization because no perfect squares have a tens digit of 2, 3, 7, or 8 due to quadratic residues mod 10.</p>\n<p>On my CPU, a run of this algorithm on 0 - 10,000,000 took an average of 1000 - 1100 nanoseconds per calculation.</p>\n<p>If you are performing a lesser number of calculations, the earlier calculations take a bit longer.</p>\n<p>I had a negative comment that my previous edit did not work for large numbers.  The OP mentioned Longs, and the largest perfect square that is a Long is 9223372030926249001, so this method works for all Longs.</p>\n"},{"tags":[],"owner":{"account_id":5444163,"reputation":1840,"user_id":4331279,"accept_rate":75,"display_name":"MWB"},"down_vote_count":3,"up_vote_count":2,"is_accepted":false,"score":-1,"last_activity_date":1537979564,"creation_date":1537979564,"answer_id":52522407,"question_id":295579,"body_markdown":"Not sure if this is the fastest way, but this is something I stumbled upon  (long time ago in high-school) when I was bored and playing with my calculator during math class. At that time, I was really amazed this was working...\r\n\r\n\tpublic static boolean isIntRoot(int number) {\r\n\t\treturn isIntRootHelper(number, 1);\r\n\t}\r\n\t\r\n\tprivate static boolean isIntRootHelper(int number, int index) {\r\n\t\tif (number == index) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tif (number &lt; index) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn isIntRootHelper(number - 2 * index, index + 1);\r\n\t\t}\r\n\t}\r\n","title":"Fastest way to determine if an integer&#39;s square root is an integer","body":"<p>Not sure if this is the fastest way, but this is something I stumbled upon  (long time ago in high-school) when I was bored and playing with my calculator during math class. At that time, I was really amazed this was working...</p>\n\n<pre><code>public static boolean isIntRoot(int number) {\n    return isIntRootHelper(number, 1);\n}\n\nprivate static boolean isIntRootHelper(int number, int index) {\n    if (number == index) {\n        return true;\n    }\n    if (number &lt; index) {\n        return false;\n    }\n    else {\n        return isIntRootHelper(number - 2 * index, index + 1);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6333754,"reputation":2065,"user_id":4917881,"display_name":"aventurin"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1539816594,"creation_date":1539816594,"answer_id":52864659,"question_id":295579,"body_markdown":"# Newton&#39;s Method with integer arithmetic\r\n\r\nIf you wish to avoid non-integer operations you could use the method below. It basically uses Newton&#39;s Method modified for integer arithmetic.\r\n\r\n\t/**\r\n\t * Test if the given number is a perfect square.\r\n\t * @param n Must be greater than 0 and less\r\n\t *    than Long.MAX_VALUE.\r\n\t * @return &lt;code&gt;true&lt;/code&gt; if n is a perfect\r\n\t *    square, or &lt;code&gt;false&lt;/code&gt; otherwise.\r\n\t */\r\n\tpublic static boolean isSquare(long n)\r\n\t{\r\n\t\tlong x1 = n;\r\n\t\tlong x2 = 1L;\r\n\r\n\t\twhile (x1 &gt; x2)\r\n\t\t{\r\n\t\t\tx1 = (x1 + x2) / 2L;\r\n\t\t\tx2 = n / x1;\r\n\t\t}\r\n\r\n\t\treturn x1 == x2 &amp;&amp; n % x1 == 0L;\r\n\t}\r\n\r\nThis implementation can not compete with solutions that use `Math.sqrt`. However, its performance can be improved by using the filtering mechanisms described in some of the other posts.","title":"Fastest way to determine if an integer&#39;s square root is an integer","body":"<h1>Newton's Method with integer arithmetic</h1>\n\n<p>If you wish to avoid non-integer operations you could use the method below. It basically uses Newton's Method modified for integer arithmetic.</p>\n\n<pre><code>/**\n * Test if the given number is a perfect square.\n * @param n Must be greater than 0 and less\n *    than Long.MAX_VALUE.\n * @return &lt;code&gt;true&lt;/code&gt; if n is a perfect\n *    square, or &lt;code&gt;false&lt;/code&gt; otherwise.\n */\npublic static boolean isSquare(long n)\n{\n    long x1 = n;\n    long x2 = 1L;\n\n    while (x1 &gt; x2)\n    {\n        x1 = (x1 + x2) / 2L;\n        x2 = n / x1;\n    }\n\n    return x1 == x2 &amp;&amp; n % x1 == 0L;\n}\n</code></pre>\n\n<p>This implementation can not compete with solutions that use <code>Math.sqrt</code>. However, its performance can be improved by using the filtering mechanisms described in some of the other posts.</p>\n"},{"tags":[],"owner":{"account_id":1460523,"reputation":883,"user_id":1374975,"accept_rate":100,"display_name":"Albert van der Horst"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1545878576,"creation_date":1545878576,"answer_id":53939196,"question_id":295579,"body_markdown":"Calculating square roots by Newton&#39;s method is horrendously fast ... provided that the starting value is reasonable. However there is no reasonable starting value, and in practice we end with bisection and log(2^64) behaviour.  \r\nTo be really fast we need a fast way to get at a reasonable starting value, and that means we need to descend into machine language. \r\nIf a processor provides an instruction like POPCNT in the Pentium, that counts the leading zeroes we can use that to have a starting value with half the significant bits. With care we can find a a fixed number of Newton steps that will always suffice. \r\n(Thus foregoing the need to loop and have very fast execution.)\r\n\r\nA second solution is going via the floating point facility, which may have a fast sqrt calculation (like the i87 coprocessor.) Even an excursion via exp() and log() may be faster than Newton degenerated into a binary search. There is a tricky aspect to this, a processor dependant analysis of what and if refinement afterwards is necessary.\r\n\r\nA third solution solves a slightly different problem, but is well worth mentionning because the situation is described in the question. If you want to calculate a great many square roots for numbers that differ slightly, you can use Newton iteration, if you never reinitialise the starting value, but just leave it where the previous calculation left off. I&#39;ve used this with success in at least one Euler problem. ","title":"Fastest way to determine if an integer&#39;s square root is an integer","body":"<p>Calculating square roots by Newton's method is horrendously fast ... provided that the starting value is reasonable. However there is no reasonable starting value, and in practice we end with bisection and log(2^64) behaviour.<br>\nTo be really fast we need a fast way to get at a reasonable starting value, and that means we need to descend into machine language. \nIf a processor provides an instruction like POPCNT in the Pentium, that counts the leading zeroes we can use that to have a starting value with half the significant bits. With care we can find a a fixed number of Newton steps that will always suffice. \n(Thus foregoing the need to loop and have very fast execution.)</p>\n\n<p>A second solution is going via the floating point facility, which may have a fast sqrt calculation (like the i87 coprocessor.) Even an excursion via exp() and log() may be faster than Newton degenerated into a binary search. There is a tricky aspect to this, a processor dependant analysis of what and if refinement afterwards is necessary.</p>\n\n<p>A third solution solves a slightly different problem, but is well worth mentionning because the situation is described in the question. If you want to calculate a great many square roots for numbers that differ slightly, you can use Newton iteration, if you never reinitialise the starting value, but just leave it where the previous calculation left off. I've used this with success in at least one Euler problem. </p>\n"},{"tags":[],"owner":{"account_id":5444163,"reputation":1840,"user_id":4331279,"accept_rate":75,"display_name":"MWB"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1545930831,"creation_date":1545930831,"answer_id":53948574,"question_id":295579,"body_markdown":"**Here is a divide and conquer solution.** \r\n\r\nIf the square root of a natural number (`number`) is a natural number (`solution`), you can easily determine a range for `solution` based on the number of digits of `number`:\r\n\r\n - `number` has 1 digit: `solution` in range = 1 - 4\r\n - `number` has 2 digits: `solution` in range = 3 - 10\r\n - `number` has 3 digits: `solution` in range = 10 - 40\r\n - `number` has 4 digits: `solution` in range = 30 - 100\r\n - `number` has 5 digits: `solution` in range = 100 - 400\r\n\r\nNotice the repetition?\r\n\r\nYou can use this range in a binary search approach to see if there is a `solution` for which:\r\n\r\n    number == solution * solution\r\n\r\n**Here is the code**\r\n\r\nHere is my class SquareRootChecker\r\n\r\n    public class SquareRootChecker {\r\n    \r\n        private long number;\r\n        private long initialLow;\r\n        private long initialHigh;\r\n    \r\n        public SquareRootChecker(long number) {\r\n            this.number = number;\r\n    \r\n            initialLow = 1;\r\n            initialHigh = 4;\r\n            if (Long.toString(number).length() % 2 == 0) {\r\n                initialLow = 3;\r\n                initialHigh = 10;\r\n            }\r\n            for (long i = 0; i &lt; Long.toString(number).length() / 2; i++) {\r\n                initialLow *= 10;\r\n                initialHigh *= 10;\r\n            }\r\n            if (Long.toString(number).length() % 2 == 0) {\r\n                initialLow /= 10;\r\n                initialHigh /=10;\r\n            }\r\n        }\r\n    \r\n        public boolean checkSquareRoot() {\r\n            return findSquareRoot(initialLow, initialHigh, number);\r\n        }\r\n    \r\n        private boolean findSquareRoot(long low, long high, long number) {\r\n            long check = low + (high - low) / 2;\r\n            if (high &gt;= low) {\r\n                if (number == check * check) {\r\n                    return true;\r\n                }\r\n                else if (number &lt; check * check) {\r\n                    high = check - 1;\r\n                    return findSquareRoot(low, high, number);\r\n                }\r\n                else  {\r\n                    low = check + 1;\r\n                    return findSquareRoot(low, high, number);\r\n                }\r\n            }\r\n            return false;\r\n        }\r\n    \r\n    }\r\n\r\nAnd here is an example on how to use it.\r\n\r\n    long number =  1234567;\r\n    long square = number * number;\r\n    SquareRootChecker squareRootChecker = new SquareRootChecker(square);\r\n    System.out.println(square + &quot;: &quot; + squareRootChecker.checkSquareRoot()); //Prints &quot;1524155677489: true&quot;\r\n\r\n    long notSquare = square + 1;\r\n    squareRootChecker = new SquareRootChecker(notSquare);\r\n    System.out.println(notSquare + &quot;: &quot; + squareRootChecker.checkSquareRoot()); //Prints &quot;1524155677490: false&quot;\r\n","title":"Fastest way to determine if an integer&#39;s square root is an integer","body":"<p><strong>Here is a divide and conquer solution.</strong> </p>\n\n<p>If the square root of a natural number (<code>number</code>) is a natural number (<code>solution</code>), you can easily determine a range for <code>solution</code> based on the number of digits of <code>number</code>:</p>\n\n<ul>\n<li><code>number</code> has 1 digit: <code>solution</code> in range = 1 - 4</li>\n<li><code>number</code> has 2 digits: <code>solution</code> in range = 3 - 10</li>\n<li><code>number</code> has 3 digits: <code>solution</code> in range = 10 - 40</li>\n<li><code>number</code> has 4 digits: <code>solution</code> in range = 30 - 100</li>\n<li><code>number</code> has 5 digits: <code>solution</code> in range = 100 - 400</li>\n</ul>\n\n<p>Notice the repetition?</p>\n\n<p>You can use this range in a binary search approach to see if there is a <code>solution</code> for which:</p>\n\n<pre><code>number == solution * solution\n</code></pre>\n\n<p><strong>Here is the code</strong></p>\n\n<p>Here is my class SquareRootChecker</p>\n\n<pre><code>public class SquareRootChecker {\n\n    private long number;\n    private long initialLow;\n    private long initialHigh;\n\n    public SquareRootChecker(long number) {\n        this.number = number;\n\n        initialLow = 1;\n        initialHigh = 4;\n        if (Long.toString(number).length() % 2 == 0) {\n            initialLow = 3;\n            initialHigh = 10;\n        }\n        for (long i = 0; i &lt; Long.toString(number).length() / 2; i++) {\n            initialLow *= 10;\n            initialHigh *= 10;\n        }\n        if (Long.toString(number).length() % 2 == 0) {\n            initialLow /= 10;\n            initialHigh /=10;\n        }\n    }\n\n    public boolean checkSquareRoot() {\n        return findSquareRoot(initialLow, initialHigh, number);\n    }\n\n    private boolean findSquareRoot(long low, long high, long number) {\n        long check = low + (high - low) / 2;\n        if (high &gt;= low) {\n            if (number == check * check) {\n                return true;\n            }\n            else if (number &lt; check * check) {\n                high = check - 1;\n                return findSquareRoot(low, high, number);\n            }\n            else  {\n                low = check + 1;\n                return findSquareRoot(low, high, number);\n            }\n        }\n        return false;\n    }\n\n}\n</code></pre>\n\n<p>And here is an example on how to use it.</p>\n\n<pre><code>long number =  1234567;\nlong square = number * number;\nSquareRootChecker squareRootChecker = new SquareRootChecker(square);\nSystem.out.println(square + \": \" + squareRootChecker.checkSquareRoot()); //Prints \"1524155677489: true\"\n\nlong notSquare = square + 1;\nsquareRootChecker = new SquareRootChecker(notSquare);\nSystem.out.println(notSquare + \": \" + squareRootChecker.checkSquareRoot()); //Prints \"1524155677490: false\"\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1558254,"reputation":474,"user_id":5191852,"accept_rate":100,"display_name":"Viktor"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1547905465,"creation_date":1547905465,"answer_id":54267721,"question_id":295579,"body_markdown":"May be the best algorithm for the problem is a fast integer square root algorithm https://stackoverflow.com/a/51585204/5191852\r\n\r\nThere @Kde claims that three iterations of the Newton method would be sufficient for the accuracy of &#177;1 for 32 bit integers. Certainly, more iterations are needed for 64-bit integers, may be 6 or 7. ","title":"Fastest way to determine if an integer&#39;s square root is an integer","body":"<p>May be the best algorithm for the problem is a fast integer square root algorithm <a href=\"https://stackoverflow.com/a/51585204/5191852\">https://stackoverflow.com/a/51585204/5191852</a></p>\n\n<p>There @Kde claims that three iterations of the Newton method would be sufficient for the accuracy of ±1 for 32 bit integers. Certainly, more iterations are needed for 64-bit integers, may be 6 or 7. </p>\n"},{"tags":[],"owner":{"account_id":17011704,"reputation":9,"user_id":12306536,"display_name":"Sajjad Ali Vayani"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1572596919,"creation_date":1572594797,"answer_id":58655853,"question_id":295579,"body_markdown":"Square Root of a number, given that the number is a perfect square.\r\n\r\nThe complexity is log(n)\r\n\r\n \r\n\r\n    /**\r\n     * Calculate square root if the given number is a perfect square.\r\n     * \r\n     * Approach: Sum of n odd numbers is equals to the square root of n*n, given \r\n     * that n is a perfect square.\r\n     *\r\n     * @param number\r\n     * @return squareRoot\r\n     */\r\n    \r\n    public static int calculateSquareRoot(int number) {\r\n    \r\n        int sum=1;\r\n        int count =1;\r\n        int squareRoot=1;\r\n        while(sum&lt;number) {\r\n            count+=2;\r\n            sum+=count;\r\n            squareRoot++;\r\n        }\r\n        return squareRoot;\r\n    }","title":"Fastest way to determine if an integer&#39;s square root is an integer","body":"<p>Square Root of a number, given that the number is a perfect square.</p>\n\n<p>The complexity is log(n)</p>\n\n<pre><code>/**\n * Calculate square root if the given number is a perfect square.\n * \n * Approach: Sum of n odd numbers is equals to the square root of n*n, given \n * that n is a perfect square.\n *\n * @param number\n * @return squareRoot\n */\n\npublic static int calculateSquareRoot(int number) {\n\n    int sum=1;\n    int count =1;\n    int squareRoot=1;\n    while(sum&lt;number) {\n        count+=2;\n        sum+=count;\n        squareRoot++;\n    }\n    return squareRoot;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23951166,"reputation":23,"user_id":17942727,"display_name":"FrederickAmpsUp"},"down_vote_count":5,"up_vote_count":0,"is_accepted":false,"score":-5,"last_activity_date":1645737659,"creation_date":1645737659,"answer_id":71258391,"question_id":295579,"body_markdown":"```java\r\nstatic boolean isPerfectSquare (int input) {\r\n  return Math.sqrt(input) == (int) Math.sqrt(input);\r\n}\r\n```\r\nThis will return if the integer value of the square root of `input` is equal to the double value. This means it it is an integer, it will return `true`. Otherwise, it will return `false`.","title":"Fastest way to determine if an integer&#39;s square root is an integer","body":"<pre class=\"lang-java prettyprint-override\"><code>static boolean isPerfectSquare (int input) {\n  return Math.sqrt(input) == (int) Math.sqrt(input);\n}\n</code></pre>\n<p>This will return if the integer value of the square root of <code>input</code> is equal to the double value. This means it it is an integer, it will return <code>true</code>. Otherwise, it will return <code>false</code>.</p>\n"},{"tags":[],"owner":{"account_id":26879596,"reputation":1092,"user_id":20460267,"display_name":"Simon Goater"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1668285799,"creation_date":1668283984,"answer_id":74416232,"question_id":295579,"body_markdown":"This question got me wondering, so I did some simple coding and I&#39;m presenting it here because I think it&#39;s interesting, relevant, but I don&#39;t know how useful. There&#39;s a simple algorithm \r\n\r\n    a_n+1 = (a_n + x/a_n)/2\r\n\r\nfor calculating square roots, but it&#39;s meant to be used for decimals. I wondered what would happen if I just coded the same algorithm using integer maths. Would it even converge on the right answer? I didn&#39;t know, so I wrote a program...\r\n\r\n    #include &lt;stdio.h&gt;\r\n    #include &lt;stdint.h&gt;\r\n    #include &lt;stdlib.h&gt;\r\n    #include &lt;math.h&gt;\r\n    \r\n    _Bool isperfectsquare(uint64_t x, uint64_t *isqrtx) {\r\n      // NOTE: isqrtx approximate for non-squares. (benchmarked at 162ns 3GHz i5)\r\n      uint32_t i;\r\n      uint64_t ai;\r\n      ai = 1 + ((x &amp; 0xffff000000000000) &gt;&gt; 32) + ((x &amp; 0xffff00000000) &gt;&gt; 24) + ((x &amp; 0xffff0000) &gt;&gt; 16);\r\n      ai = (ai + x/ai)/2;\r\n      ai = (ai + x/ai)/2;\r\n      ai = (ai + x/ai)/2;\r\n      ai = (ai + x/ai)/2;\r\n      ai = (ai + x/ai)/2;\r\n      ai = (ai + x/ai)/2;\r\n      ai = (ai + x/ai)/2;\r\n      ai = (ai + x/ai)/2;\r\n      ai = (ai + x/ai)/2;\r\n      ai = (ai + x/ai)/2;\r\n      ai = (ai + x/ai)/2;\r\n      ai = (ai + x/ai)/2;\r\n      ai = ai &amp; 0xffffffff;\r\n      if (isqrtx != NULL) isqrtx[0] = ai;\r\n      return ai*ai == x;\r\n    }\r\n    \r\n    void main() {\r\n    \r\n      uint64_t x, isqrtx;\r\n      uint64_t i;\r\n      for (i=1; i&lt;0x100000000; i++) {\r\n        if (!isperfectsquare(i*i, &amp;isqrtx)) {\r\n          printf(&quot;Failed at %li&quot;, i);\r\n          exit(1);\r\n        }\r\n      }\r\n      printf(&quot;All OK.\\n&quot;);\r\n    } \r\n\r\nSo, it turns out that 12 iterations of the formula is enough to give correct results for all 64 bit unsigned longs that are perfect squares, and of course, non-squares will return false. \r\n\r\n    simon@simon-Inspiron-N5040:~$ time ./isqrt.bin \r\n    All OK.\r\n    \r\n    real\t11m37.096s\r\n    user\t11m35.053s\r\n    sys\t0m0.272s\r\n\r\nSo 697s/2^32 is approx 162ns. As it is, the function will have the same runtime for all inputs. Some of the measures detailed elsewhere in the discussion could speed it up for non-squares by checking the last four bits etc. Hope someone finds this interesting as I did.","title":"Fastest way to determine if an integer&#39;s square root is an integer","body":"<p>This question got me wondering, so I did some simple coding and I'm presenting it here because I think it's interesting, relevant, but I don't know how useful. There's a simple algorithm</p>\n<pre><code>a_n+1 = (a_n + x/a_n)/2\n</code></pre>\n<p>for calculating square roots, but it's meant to be used for decimals. I wondered what would happen if I just coded the same algorithm using integer maths. Would it even converge on the right answer? I didn't know, so I wrote a program...</p>\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdint.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;math.h&gt;\n\n_Bool isperfectsquare(uint64_t x, uint64_t *isqrtx) {\n  // NOTE: isqrtx approximate for non-squares. (benchmarked at 162ns 3GHz i5)\n  uint32_t i;\n  uint64_t ai;\n  ai = 1 + ((x &amp; 0xffff000000000000) &gt;&gt; 32) + ((x &amp; 0xffff00000000) &gt;&gt; 24) + ((x &amp; 0xffff0000) &gt;&gt; 16);\n  ai = (ai + x/ai)/2;\n  ai = (ai + x/ai)/2;\n  ai = (ai + x/ai)/2;\n  ai = (ai + x/ai)/2;\n  ai = (ai + x/ai)/2;\n  ai = (ai + x/ai)/2;\n  ai = (ai + x/ai)/2;\n  ai = (ai + x/ai)/2;\n  ai = (ai + x/ai)/2;\n  ai = (ai + x/ai)/2;\n  ai = (ai + x/ai)/2;\n  ai = (ai + x/ai)/2;\n  ai = ai &amp; 0xffffffff;\n  if (isqrtx != NULL) isqrtx[0] = ai;\n  return ai*ai == x;\n}\n\nvoid main() {\n\n  uint64_t x, isqrtx;\n  uint64_t i;\n  for (i=1; i&lt;0x100000000; i++) {\n    if (!isperfectsquare(i*i, &amp;isqrtx)) {\n      printf(&quot;Failed at %li&quot;, i);\n      exit(1);\n    }\n  }\n  printf(&quot;All OK.\\n&quot;);\n} \n</code></pre>\n<p>So, it turns out that 12 iterations of the formula is enough to give correct results for all 64 bit unsigned longs that are perfect squares, and of course, non-squares will return false.</p>\n<pre><code>simon@simon-Inspiron-N5040:~$ time ./isqrt.bin \nAll OK.\n\nreal    11m37.096s\nuser    11m35.053s\nsys 0m0.272s\n</code></pre>\n<p>So 697s/2^32 is approx 162ns. As it is, the function will have the same runtime for all inputs. Some of the measures detailed elsewhere in the discussion could speed it up for non-squares by checking the last four bits etc. Hope someone finds this interesting as I did.</p>\n"}],"owner":{"account_id":9921,"reputation":107674,"user_id":18511,"accept_rate":92,"display_name":"Kip"},"comment_count":32,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":327130,"favorite_count":0,"down_vote_count":4,"up_vote_count":1610,"accepted_answer_id":424936,"answer_count":37,"score":1606,"last_activity_date":1701112993,"creation_date":1226929401,"question_id":295579,"body_markdown":"I&#39;m looking for the fastest way to determine if a `long` value is a perfect square (i.e. its square root is another integer): \r\n\r\n 1. I&#39;ve done it the easy way, by using the built-in [`Math.sqrt()`][1]\r\n    function, but I&#39;m wondering if there is a way to do it faster by\r\n    restricting yourself to integer-only domain.\r\n 2. Maintaining a lookup table is impractical (since there are about\r\n    2&lt;sup&gt;31.5&lt;/sup&gt; integers whose square is less than 2&lt;sup&gt;63&lt;/sup&gt;).\r\n\r\nHere is the very simple and straightforward way I&#39;m doing it now:\r\n\r\n    public final static boolean isPerfectSquare(long n)\r\n    {\r\n      if (n &lt; 0)\r\n        return false;\r\n      \r\n      long tst = (long)(Math.sqrt(n) + 0.5);\r\n      return tst*tst == n;\r\n    }\r\n\r\n&lt;sub&gt;Note: I&#39;m using this function in many &lt;a href=&quot;http://projecteuler.net/&quot;&gt;Project Euler&lt;/a&gt; problems.  So no one else will ever have to maintain this code.  And this kind of micro-optimization could actually make a difference, since part of the challenge is to do every algorithm in less than a minute, and this function will need to be called millions of times in some problems.&lt;/sub&gt;\r\n\r\n---\r\n\r\nI&#39;ve tried the different solutions to the problem:\r\n\r\n* After exhaustive testing, I found that adding `0.5` to the result of Math.sqrt() is not necessary, at least not on my machine.\r\n* The &lt;a href=&quot;https://en.wikipedia.org/wiki/Fast_inverse_square_root&quot;&gt;fast inverse square root&lt;/a&gt; was faster, but it gave incorrect results for n &gt;= 410881.  However, as suggested by &lt;a href=&quot;https://stackoverflow.com/users/38426/bobbyshaftoe&quot;&gt;BobbyShaftoe&lt;/a&gt;, we can use the FISR hack for n &lt; 410881.\r\n* Newton&#39;s method was a good bit slower than `Math.sqrt()`.  This is probably because `Math.sqrt()` uses something similar to Newton&#39;s Method, but implemented in the hardware so it&#39;s much faster than in Java.  Also, Newton&#39;s Method still required use of doubles.\r\n* A modified Newton&#39;s method, which used a few tricks so that only integer math was involved, required some hacks to avoid overflow (I want this function to work with all positive 64-bit signed integers), and it was still slower than `Math.sqrt()`.\r\n* Binary chop was even slower.  This makes sense because the binary chop will on average require 16 passes to find the square root of a 64-bit number.\r\n* According to John&#39;s tests, using `or` statements is faster in C++ than using a `switch`, but in Java and C# there appears to be no difference between `or` and `switch`.\r\n* I also tried making a lookup table (as a private static array of 64 boolean values).  Then instead of either switch or `or` statement, I would just say `if(lookup[(int)(n&amp;0x3F)]) { test } else return false;`.  To my surprise, this was (just slightly) slower. This is because &lt;a href=&quot;https://stackoverflow.com/questions/299079/why-is-this-code-with-several-or-statements-slightly-faster-than-using-a-lookup-t#299205&quot;&gt;array bounds are checked in Java&lt;/a&gt;. \r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Math.html#sqrt(double)","title":"Fastest way to determine if an integer&#39;s square root is an integer","body":"<p>I'm looking for the fastest way to determine if a <code>long</code> value is a perfect square (i.e. its square root is another integer): </p>\n\n<ol>\n<li>I've done it the easy way, by using the built-in <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Math.html#sqrt(double)\" rel=\"noreferrer\"><code>Math.sqrt()</code></a>\nfunction, but I'm wondering if there is a way to do it faster by\nrestricting yourself to integer-only domain.</li>\n<li>Maintaining a lookup table is impractical (since there are about\n2<sup>31.5</sup> integers whose square is less than 2<sup>63</sup>).</li>\n</ol>\n\n<p>Here is the very simple and straightforward way I'm doing it now:</p>\n\n<pre><code>public final static boolean isPerfectSquare(long n)\n{\n  if (n &lt; 0)\n    return false;\n\n  long tst = (long)(Math.sqrt(n) + 0.5);\n  return tst*tst == n;\n}\n</code></pre>\n\n<p><sub>Note: I'm using this function in many <a href=\"http://projecteuler.net/\" rel=\"noreferrer\">Project Euler</a> problems.  So no one else will ever have to maintain this code.  And this kind of micro-optimization could actually make a difference, since part of the challenge is to do every algorithm in less than a minute, and this function will need to be called millions of times in some problems.</sub></p>\n\n<hr>\n\n<p>I've tried the different solutions to the problem:</p>\n\n<ul>\n<li>After exhaustive testing, I found that adding <code>0.5</code> to the result of Math.sqrt() is not necessary, at least not on my machine.</li>\n<li>The <a href=\"https://en.wikipedia.org/wiki/Fast_inverse_square_root\" rel=\"noreferrer\">fast inverse square root</a> was faster, but it gave incorrect results for n >= 410881.  However, as suggested by <a href=\"https://stackoverflow.com/users/38426/bobbyshaftoe\">BobbyShaftoe</a>, we can use the FISR hack for n &lt; 410881.</li>\n<li>Newton's method was a good bit slower than <code>Math.sqrt()</code>.  This is probably because <code>Math.sqrt()</code> uses something similar to Newton's Method, but implemented in the hardware so it's much faster than in Java.  Also, Newton's Method still required use of doubles.</li>\n<li>A modified Newton's method, which used a few tricks so that only integer math was involved, required some hacks to avoid overflow (I want this function to work with all positive 64-bit signed integers), and it was still slower than <code>Math.sqrt()</code>.</li>\n<li>Binary chop was even slower.  This makes sense because the binary chop will on average require 16 passes to find the square root of a 64-bit number.</li>\n<li>According to John's tests, using <code>or</code> statements is faster in C++ than using a <code>switch</code>, but in Java and C# there appears to be no difference between <code>or</code> and <code>switch</code>.</li>\n<li>I also tried making a lookup table (as a private static array of 64 boolean values).  Then instead of either switch or <code>or</code> statement, I would just say <code>if(lookup[(int)(n&amp;0x3F)]) { test } else return false;</code>.  To my surprise, this was (just slightly) slower. This is because <a href=\"https://stackoverflow.com/questions/299079/why-is-this-code-with-several-or-statements-slightly-faster-than-using-a-lookup-t#299205\">array bounds are checked in Java</a>. </li>\n</ul>\n"},{"tags":["java","jboss"],"comments":[{"owner":{"account_id":51161,"reputation":17015,"user_id":152794,"display_name":"James R. Perkins"},"score":0,"creation_date":1701112645,"post_id":77553603,"comment_id":136732400,"body_markdown":"Are you using WildFly or JBoss EAP? If so which version?","body":"Are you using WildFly or JBoss EAP? If so which version?"},{"owner":{"account_id":21827053,"reputation":1,"user_id":16122372,"display_name":"Kishan Yarlagadda"},"score":0,"creation_date":1701188428,"post_id":77553603,"comment_id":136743027,"body_markdown":"`jboss-eap-7.1`","body":"<code>jboss-eap-7.1</code>"},{"owner":{"account_id":51161,"reputation":17015,"user_id":152794,"display_name":"James R. Perkins"},"score":0,"creation_date":1701207595,"post_id":77553603,"comment_id":136746350,"body_markdown":"If you&#39;re including Jackson in your deployment there is a chance it&#39;s conflicting with the version provided by JBoss EAP 7.1. You may want to try to exclude Jackson from your deployment.","body":"If you&#39;re including Jackson in your deployment there is a chance it&#39;s conflicting with the version provided by JBoss EAP 7.1. You may want to try to exclude Jackson from your deployment."},{"owner":{"account_id":21827053,"reputation":1,"user_id":16122372,"display_name":"Kishan Yarlagadda"},"score":0,"creation_date":1701219881,"post_id":77553603,"comment_id":136747800,"body_markdown":"`Thanks it worked`","body":"<code>Thanks it worked</code>"}],"owner":{"account_id":21827053,"reputation":1,"user_id":16122372,"display_name":"Kishan Yarlagadda"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1701112599,"creation_date":1701035220,"question_id":77553603,"body_markdown":"    java.lang.IllegalAccessError: tried to access field com.fasterxml.jackson.core.JsonFactory.DEFAULT_ROOT_VALUE_SEPARATOR from class com.fasterxml.jackson.core.JsonFactoryBuilder \r\n        at com.fasterxml.jackson.core.JsonFactoryBuilder.&lt;init&gt;(JsonFactoryBuilder.java:36) \r\n        at io.swagger.v3.parser.ObjectMapperFactory.createJsonFactory(ObjectMapperFactory.java:41) \r\n        at io.swagger.v3.parser.ObjectMapperFactory.createJson(ObjectMapperFactory.java:18) \r\n        at io.swagger.v3.parser.ObjectMapperFactory.createJson(ObjectMapperFactory.java:14) \r\n        at io.swagger.v3.parser.OpenAPIV3Parser.&lt;clinit&gt;(OpenAPIV3Parser.java:43) at io.swagger.parser.OpenAPIParser.readContents(OpenAPIParser.java:28) \r\n        at com.atlassian.oai.validator.util.OpenApiLoader.readSwaggerParserResult(OpenApiLoader.java:63) \r\n        at com.atlassian.oai.validator.util.OpenApiLoader.loadApi(OpenApiLoader.java:46) \r\n        at com.atlassian.oai.validator.OpenApiInteractionValidator$Builder.build(OpenApiInteractionValidator.java:606)\r\n\r\n**tried the dependency tree. mvn dependecy:tree**\r\n\r\n/- com.atlassian.oai:swagger-request-validator-core:jar:2.18.0:compile [INFO] | +- io.swagger.parser.v3:swagger-parser:jar:2.0.29:compile [INFO] | | +- io.swagger.parser.v3:swagger-parser-v2-converter:jar:2.0.29:compile [INFO] | | | +- io.swagger:swagger-core:jar:1.6.3:compile [INFO] | | | | - io.swagger:swagger-models:jar:1.6.3:compile [INFO] | | | | - io.swagger:swagger-annotations:jar:1.6.3:compile [INFO] | | | +- io.swagger:swagger-parser:jar:1.0.56:compile [INFO] | | | +- io.swagger:swagger-compat-spec-parser:jar:1.0.56:compile [INFO] | | | | - com.github.java-json-tools:json-patch:jar:1.13:compile [INFO] | | | +- io.swagger.core.v3:swagger-models:jar:2.1.11:compile [INFO] | | | - io.swagger.parser.v3:swagger-parser-core:jar:2.0.29:compile [INFO] | | - io.swagger.parser.v3:swagger-parser-v3:jar:2.0.29:compile [INFO] | | - io.swagger.core.v3:swagger-core:jar:2.1.11:compile [INFO] | | +- jakarta.xml.bind:jakarta.xml.bind-api:jar:2.3.2:compile [INFO] | | | - jakarta.activation:jakarta.activation-api:jar:1.2.1:compile [INFO] | | +- com.fasterxml.jackson.datatype:jackson-datatype-jsr310:jar:2.15.0-rc2:compile [INFO] | | +- io.swagger.core.v3:swagger-annotations:jar:2.1.11:compile [INFO] | | - jakarta.validation:jakarta.validation-api:jar:2.0.2:compile/\r\n\r\n**is it due to the dependency conflict?**","title":"Jackson throwing the invalid access for the schema validation","body":"<pre><code>java.lang.IllegalAccessError: tried to access field com.fasterxml.jackson.core.JsonFactory.DEFAULT_ROOT_VALUE_SEPARATOR from class com.fasterxml.jackson.core.JsonFactoryBuilder \n    at com.fasterxml.jackson.core.JsonFactoryBuilder.&lt;init&gt;(JsonFactoryBuilder.java:36) \n    at io.swagger.v3.parser.ObjectMapperFactory.createJsonFactory(ObjectMapperFactory.java:41) \n    at io.swagger.v3.parser.ObjectMapperFactory.createJson(ObjectMapperFactory.java:18) \n    at io.swagger.v3.parser.ObjectMapperFactory.createJson(ObjectMapperFactory.java:14) \n    at io.swagger.v3.parser.OpenAPIV3Parser.&lt;clinit&gt;(OpenAPIV3Parser.java:43) at io.swagger.parser.OpenAPIParser.readContents(OpenAPIParser.java:28) \n    at com.atlassian.oai.validator.util.OpenApiLoader.readSwaggerParserResult(OpenApiLoader.java:63) \n    at com.atlassian.oai.validator.util.OpenApiLoader.loadApi(OpenApiLoader.java:46) \n    at com.atlassian.oai.validator.OpenApiInteractionValidator$Builder.build(OpenApiInteractionValidator.java:606)\n</code></pre>\n<p><strong>tried the dependency tree. mvn dependecy:tree</strong></p>\n<p>/- com.atlassian.oai:swagger-request-validator-core:jar:2.18.0:compile [INFO] | +- io.swagger.parser.v3:swagger-parser:jar:2.0.29:compile [INFO] | | +- io.swagger.parser.v3:swagger-parser-v2-converter:jar:2.0.29:compile [INFO] | | | +- io.swagger:swagger-core:jar:1.6.3:compile [INFO] | | | | - io.swagger:swagger-models:jar:1.6.3:compile [INFO] | | | | - io.swagger:swagger-annotations:jar:1.6.3:compile [INFO] | | | +- io.swagger:swagger-parser:jar:1.0.56:compile [INFO] | | | +- io.swagger:swagger-compat-spec-parser:jar:1.0.56:compile [INFO] | | | | - com.github.java-json-tools:json-patch:jar:1.13:compile [INFO] | | | +- io.swagger.core.v3:swagger-models:jar:2.1.11:compile [INFO] | | | - io.swagger.parser.v3:swagger-parser-core:jar:2.0.29:compile [INFO] | | - io.swagger.parser.v3:swagger-parser-v3:jar:2.0.29:compile [INFO] | | - io.swagger.core.v3:swagger-core:jar:2.1.11:compile [INFO] | | +- jakarta.xml.bind:jakarta.xml.bind-api:jar:2.3.2:compile [INFO] | | | - jakarta.activation:jakarta.activation-api:jar:1.2.1:compile [INFO] | | +- com.fasterxml.jackson.datatype:jackson-datatype-jsr310:jar:2.15.0-rc2:compile [INFO] | | +- io.swagger.core.v3:swagger-annotations:jar:2.1.11:compile [INFO] | | - jakarta.validation:jakarta.validation-api:jar:2.0.2:compile/</p>\n<p><strong>is it due to the dependency conflict?</strong></p>\n"},{"tags":["java","arrays"],"answers":[{"tags":[],"owner":{"account_id":21994,"reputation":73798,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1270243795,"creation_date":1270243795,"answer_id":2569296,"question_id":2569279,"body_markdown":"Count the total number of elements in originalArray.  Create new array of that length.  Copy elements one by one into the new array.\r\n\r\nI am unfamiliar with any library function to do so.","title":"How to flatten 2D array to 1D array?","body":"<p>Count the total number of elements in originalArray.  Create new array of that length.  Copy elements one by one into the new array.</p>\n\n<p>I am unfamiliar with any library function to do so.</p>\n"},{"tags":[],"owner":{"account_id":35487,"reputation":64776,"user_id":100516,"accept_rate":69,"display_name":"Roman"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1270243817,"creation_date":1270243817,"answer_id":2569301,"question_id":2569279,"body_markdown":"There will be 2 steps: \r\n\r\n1) find out total number of elements to create a new vector (1d array)\r\n\r\n2) iterate through your 2d array in predefined order and copy its elements to the created vector\r\n\r\n    int elementsNumber = 0;\r\n    \r\n    for (int i = 0; i &lt; originalArray.length; i++) {\r\n       elementsNumber += originalArray[i].length;\r\n    }\r\n    \r\n    int[] newArray = new int[elementsNumber];\r\n    int j = 0;\r\n    for (int i = 0; i &lt; originalArray.length; i++) {\r\n       System.arrayCopy (originalArray[i], 0, newArray, j, originalArray[i].length);\r\n       j += originalArray[i].length;\r\n    }","title":"How to flatten 2D array to 1D array?","body":"<p>There will be 2 steps: </p>\n\n<p>1) find out total number of elements to create a new vector (1d array)</p>\n\n<p>2) iterate through your 2d array in predefined order and copy its elements to the created vector</p>\n\n<pre><code>int elementsNumber = 0;\n\nfor (int i = 0; i &lt; originalArray.length; i++) {\n   elementsNumber += originalArray[i].length;\n}\n\nint[] newArray = new int[elementsNumber];\nint j = 0;\nfor (int i = 0; i &lt; originalArray.length; i++) {\n   System.arrayCopy (originalArray[i], 0, newArray, j, originalArray[i].length);\n   j += originalArray[i].length;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16209,"reputation":280472,"user_id":35070,"accept_rate":78,"display_name":"phihag"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1270244198,"creation_date":1270243893,"answer_id":2569309,"question_id":2569279,"body_markdown":"Since arrays can&#39;t be extended (i.e. you have to declare the size of an error upon initialization), you have to traverse the arrays twice:\r\n\r\n    int size = 0;\r\n    for (int[] ar : originalArray) size += ar.length;\r\n    int[] result = new int[size];\r\n    int pos = 0;\r\n    for (int[] ar : originalArray) {\r\n        System.arraycopy(ar, 0, result, pos, ar.length);\r\n        pos += ar.length;\r\n    }","title":"How to flatten 2D array to 1D array?","body":"<p>Since arrays can't be extended (i.e. you have to declare the size of an error upon initialization), you have to traverse the arrays twice:</p>\n\n<pre><code>int size = 0;\nfor (int[] ar : originalArray) size += ar.length;\nint[] result = new int[size];\nint pos = 0;\nfor (int[] ar : originalArray) {\n    System.arraycopy(ar, 0, result, pos, ar.length);\n    pos += ar.length;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":62440,"reputation":23185,"user_id":185541,"display_name":"rsp"},"down_vote_count":2,"up_vote_count":11,"is_accepted":true,"score":9,"last_activity_date":1618596087,"creation_date":1270243967,"answer_id":2569314,"question_id":2569279,"body_markdown":"A simple for loop will do, it is not difficult, but will depend on the order in which you want to copy the values. For instance (based on the fact that in your example the arrays all have the same length):\r\n\r\n    int[] newArray = new int[3 * a.length];\r\n    int index = 0;\r\n    for (int n = 0; n &lt; a.length; n++) {\r\n        newArray[index++] = a[n];\r\n        newArray[index++] = b[n];\r\n        newArray[index++] = c[n];\r\n    }\r\n\r\nor (different order, a, b, c can be of different lengths):\r\n\r\n    int[] newArray = new int[a.length + b.length + c.length];\r\n    System.arraycopy(a, 0, newArray, 0, a.length);\r\n    System.arraycopy(b, 0, newArray, a.length, b.length);\r\n    System.arraycopy(c, 0, newArray, a.length + b.length, c.length);\r\n\r\n","title":"How to flatten 2D array to 1D array?","body":"<p>A simple for loop will do, it is not difficult, but will depend on the order in which you want to copy the values. For instance (based on the fact that in your example the arrays all have the same length):</p>\n<pre><code>int[] newArray = new int[3 * a.length];\nint index = 0;\nfor (int n = 0; n &lt; a.length; n++) {\n    newArray[index++] = a[n];\n    newArray[index++] = b[n];\n    newArray[index++] = c[n];\n}\n</code></pre>\n<p>or (different order, a, b, c can be of different lengths):</p>\n<pre><code>int[] newArray = new int[a.length + b.length + c.length];\nSystem.arraycopy(a, 0, newArray, 0, a.length);\nSystem.arraycopy(b, 0, newArray, a.length, b.length);\nSystem.arraycopy(c, 0, newArray, a.length + b.length, c.length);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":69527,"reputation":40466,"user_id":202214,"display_name":"Kevin Bourrillion"},"down_vote_count":1,"up_vote_count":47,"is_accepted":false,"score":46,"last_activity_date":1701111671,"creation_date":1270704679,"answer_id":2597764,"question_id":2569279,"body_markdown":"With [Guava][1], you can use either\r\n\r\n`int[] all = Ints.concat(originalArray);`\r\n\r\nor \r\n\r\n`int[] all = Ints.concat(a, b, c);`\r\n\r\n\r\n  [1]: https://guava.dev/","title":"How to flatten 2D array to 1D array?","body":"<p>With <a href=\"https://guava.dev/\" rel=\"nofollow noreferrer\">Guava</a>, you can use either</p>\n<p><code>int[] all = Ints.concat(originalArray);</code></p>\n<p>or</p>\n<p><code>int[] all = Ints.concat(a, b, c);</code></p>\n"},{"tags":[],"owner":{"account_id":875840,"reputation":6908,"user_id":925504,"accept_rate":69,"display_name":"Nolesh"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1360333022,"creation_date":1360333022,"answer_id":14774529,"question_id":2569279,"body_markdown":"\r\n    int[] oneDArray = new int[arr.length*arr.length];\r\n\t\t//Flatten 2D array to 1D array...\r\n\t\tint s = 0;\r\n\t\tfor(int i = 0; i &lt; arr.length; i ++) \r\n\t          for(int j = 0; j &lt; arr.length; j ++){\t        \t  \t          \r\n\t        \t  oneDArray[s] = arr[i][j];\r\n\t        \t  s++;\r\n\t          }\t","title":"How to flatten 2D array to 1D array?","body":"<pre><code>int[] oneDArray = new int[arr.length*arr.length];\n    //Flatten 2D array to 1D array...\n    int s = 0;\n    for(int i = 0; i &lt; arr.length; i ++) \n          for(int j = 0; j &lt; arr.length; j ++){                           \n              oneDArray[s] = arr[i][j];\n              s++;\n          } \n</code></pre>\n"},{"tags":[],"owner":{"account_id":440158,"reputation":323221,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"down_vote_count":0,"up_vote_count":43,"is_accepted":false,"score":43,"last_activity_date":1422986279,"creation_date":1422986279,"answer_id":28305591,"question_id":2569279,"body_markdown":"With Java 8 you can &quot;flatMap&quot; the inner arrays:\r\n\r\n    int[] flatArray = Arrays.stream(originalArray)\r\n            .flatMapToInt(Arrays::stream)\r\n            .toArray();\r\n\r\nor:\r\n\r\n    int[] flatArray = Stream.of(a, b, c)\r\n            .flatMapToInt(Arrays::stream)\r\n            .toArray();\r\n","title":"How to flatten 2D array to 1D array?","body":"<p>With Java 8 you can \"flatMap\" the inner arrays:</p>\n\n<pre><code>int[] flatArray = Arrays.stream(originalArray)\n        .flatMapToInt(Arrays::stream)\n        .toArray();\n</code></pre>\n\n<p>or:</p>\n\n<pre><code>int[] flatArray = Stream.of(a, b, c)\n        .flatMapToInt(Arrays::stream)\n        .toArray();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15524669,"reputation":2739,"user_id":11199879,"display_name":"Kaplan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1587138884,"creation_date":1587138884,"answer_id":61275703,"question_id":2569279,"body_markdown":"*one-liner with* `IntStream`\r\n\r\n    IntStream.concat(\r\n        IntStream.concat( IntStream.of(originalArray[0]), IntStream.of(originalArray[1]) ),\r\n            IntStream.of(originalArray[2]) ).toArray();\r\n\r\ngets: `[1, 2, 6, 7, 2, 2, 44, 55, 2, 2, 44, 511, 33]`","title":"How to flatten 2D array to 1D array?","body":"<p><em>one-liner with</em> <code>IntStream</code></p>\n\n<pre><code>IntStream.concat(\n    IntStream.concat( IntStream.of(originalArray[0]), IntStream.of(originalArray[1]) ),\n        IntStream.of(originalArray[2]) ).toArray();\n</code></pre>\n\n<p>gets: <code>[1, 2, 6, 7, 2, 2, 44, 55, 2, 2, 44, 511, 33]</code></p>\n"},{"tags":[],"owner":{"account_id":7006182,"reputation":2025,"user_id":5370480,"display_name":"Dean Jain"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634684142,"creation_date":1634684142,"answer_id":69638449,"question_id":2569279,"body_markdown":"below code can merge varied 2D arrays (diff sizes of internal array) into a one dimensional array:\r\n\r\n     public static Integer[] merge2DArrays(int[][] twoDArray){\r\n            ArrayList&lt;Integer&gt; list = new ArrayList&lt;&gt;();\r\n            for (int i = 0; i &lt; twoDArray.length; i++) {\r\n                for (int j = 0; j &lt; twoDArray[i].length; j++) {\r\n                    list.add(twoDArray[i][j]);\r\n                }\r\n            }\r\n        return list.toArray(new Integer[list.size()]);\r\n        }","title":"How to flatten 2D array to 1D array?","body":"<p>below code can merge varied 2D arrays (diff sizes of internal array) into a one dimensional array:</p>\n<pre><code> public static Integer[] merge2DArrays(int[][] twoDArray){\n        ArrayList&lt;Integer&gt; list = new ArrayList&lt;&gt;();\n        for (int i = 0; i &lt; twoDArray.length; i++) {\n            for (int j = 0; j &lt; twoDArray[i].length; j++) {\n                list.add(twoDArray[i][j]);\n            }\n        }\n    return list.toArray(new Integer[list.size()]);\n    }\n</code></pre>\n"}],"owner":{"account_id":29808,"reputation":15451,"user_id":80796,"accept_rate":77,"display_name":"Jessy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":55499,"favorite_count":0,"down_vote_count":1,"up_vote_count":30,"accepted_answer_id":2569314,"answer_count":9,"score":29,"last_activity_date":1701111671,"creation_date":1270243573,"question_id":2569279,"body_markdown":"How can I flatten the 2 dimensions array `int originalArray[][]` to 1 dimension array?\r\n\r\n        int a [] = {1,2,6,7,2};\r\n        int b [] = {2,44,55,2};\r\n        int c [] = {2,44,511,33};\r\n        \r\n        int originalArray [][] = new int[][]{a,b,c};\r\n\r\n\r\n","title":"How to flatten 2D array to 1D array?","body":"<p>How can I flatten the 2 dimensions array <code>int originalArray[][]</code> to 1 dimension array?</p>\n\n<pre><code>    int a [] = {1,2,6,7,2};\n    int b [] = {2,44,55,2};\n    int c [] = {2,44,511,33};\n\n    int originalArray [][] = new int[][]{a,b,c};\n</code></pre>\n"},{"tags":["java","spring-boot","metrics","newrelic","open-telemetry"],"answers":[{"tags":[],"owner":{"account_id":3053597,"reputation":580,"user_id":2587704,"accept_rate":50,"display_name":"JackB"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1701111559,"creation_date":1701111559,"answer_id":77559316,"question_id":77558008,"body_markdown":"Configuring cardinality limits is still experimental, so the APIs you call to set the limits are internal and leave a lot to be desired in terms of ergonomics. This will change when the limits are marked as stable in the specification.\r\n\r\nYou need to use [SdkMeterProviderUtil#registerMetricReaderWithCardinalitySelect](https://github.com/open-telemetry/opentelemetry-java/blob/c57ca65f7f1455e2f9d72f3d2d626aaf2f2f9a81/sdk/metrics/src/main/java/io/opentelemetry/sdk/metrics/internal/SdkMeterProviderUtil.java#L53-L67), something like:\r\n```\r\nSdkMeterProviderBuilder meterProviderBuilder = SdkMeterProvider.builder();\r\nPeriodicMetricReader periodicMetricReader = PeriodicMetricReader.builder()\r\n  // configuration omitted for brevity\r\n  .build();\r\nSdkMeterProviderUtil.registerMetricReaderWithCardinalitySelector(meterProviderBuilder, periodicMetricReader, unused -&gt; 3000);\r\n```","title":"OpenTelemetry SDK Cardinality limit change","body":"<p>Configuring cardinality limits is still experimental, so the APIs you call to set the limits are internal and leave a lot to be desired in terms of ergonomics. This will change when the limits are marked as stable in the specification.</p>\n<p>You need to use <a href=\"https://github.com/open-telemetry/opentelemetry-java/blob/c57ca65f7f1455e2f9d72f3d2d626aaf2f2f9a81/sdk/metrics/src/main/java/io/opentelemetry/sdk/metrics/internal/SdkMeterProviderUtil.java#L53-L67\" rel=\"nofollow noreferrer\">SdkMeterProviderUtil#registerMetricReaderWithCardinalitySelect</a>, something like:</p>\n<pre><code>SdkMeterProviderBuilder meterProviderBuilder = SdkMeterProvider.builder();\nPeriodicMetricReader periodicMetricReader = PeriodicMetricReader.builder()\n  // configuration omitted for brevity\n  .build();\nSdkMeterProviderUtil.registerMetricReaderWithCardinalitySelector(meterProviderBuilder, periodicMetricReader, unused -&gt; 3000);\n</code></pre>\n"}],"owner":{"account_id":17420875,"reputation":5,"user_id":12626461,"display_name":"Marcin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":54,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77559316,"answer_count":1,"score":0,"last_activity_date":1701111559,"creation_date":1701098226,"question_id":77558008,"body_markdown":"I set up a configuration for openTelemtry in Spring Boot (New Relic exporter). I can see the metrics in New Relic so everything works fine. Also I see a lot of warnings about &quot;Cardinality Limit (2000)&quot;. By default cardinality is set to 2000. I&#39;m not sure how can I change it. I can see in optl docs something like this:\r\n\r\n&gt; aggregation_cardinality_limit: A positive integer value defining the maximum number of data points allowed to be emitted in a collection cycle by a single instrument. See cardinality limits, below.\r\n\r\nLink: https://opentelemetry.io/docs/specs/otel/metrics/sdk/#stream-configuration\r\n\r\nMy code:\r\n\r\n```\r\n @Bean\r\n    @ConditionalOnMissingBean\r\n    public OpenTelemetry openTelemetry() {\r\n        return OpenTelemetrySdk.builder()\r\n            .setMeterProvider(\r\n                SdkMeterProvider.builder()\r\n                    .setResource(\r\n                        Resource.getDefault().toBuilder()\r\n                            .put(&quot;service.name&quot;, getAppName())\r\n                            .put(&quot;instrumentation.provider&quot;, &quot;micrometer&quot;)\r\n                            .build())\r\n                    .registerMetricReader(\r\n                        PeriodicMetricReader.builder(\r\n                                OtlpGrpcMetricExporter.builder()\r\n                                    .setCompression(&quot;gzip&quot;)\r\n                                    .setEndpoint(properties.getEndpoint())\r\n                                    .addHeader(&quot;api-key&quot;, getLicenceKey())\r\n                                    .setAggregationTemporalitySelector(AggregationTemporalitySelector.deltaPreferred())\r\n                                    .setDefaultAggregationSelector(\r\n                                        DefaultAggregationSelector.getDefault()\r\n                                            .with(InstrumentType.HISTOGRAM, Aggregation.base2ExponentialBucketHistogram()))\r\n                                    .build())\r\n                            .setInterval(Duration.ofSeconds(properties.getInterval()))\r\n                            .build())\r\n                    .build())\r\n            .build();\r\n    }\r\n```\r\n\r\n\r\nI&#39;m not sure if I can just pass another &quot;                       .put(&quot;aggregation_cardinality_limit&quot;, 3000)&quot; to Resource.","title":"OpenTelemetry SDK Cardinality limit change","body":"<p>I set up a configuration for openTelemtry in Spring Boot (New Relic exporter). I can see the metrics in New Relic so everything works fine. Also I see a lot of warnings about &quot;Cardinality Limit (2000)&quot;. By default cardinality is set to 2000. I'm not sure how can I change it. I can see in optl docs something like this:</p>\n<blockquote>\n<p>aggregation_cardinality_limit: A positive integer value defining the maximum number of data points allowed to be emitted in a collection cycle by a single instrument. See cardinality limits, below.</p>\n</blockquote>\n<p>Link: <a href=\"https://opentelemetry.io/docs/specs/otel/metrics/sdk/#stream-configuration\" rel=\"nofollow noreferrer\">https://opentelemetry.io/docs/specs/otel/metrics/sdk/#stream-configuration</a></p>\n<p>My code:</p>\n<pre><code> @Bean\n    @ConditionalOnMissingBean\n    public OpenTelemetry openTelemetry() {\n        return OpenTelemetrySdk.builder()\n            .setMeterProvider(\n                SdkMeterProvider.builder()\n                    .setResource(\n                        Resource.getDefault().toBuilder()\n                            .put(&quot;service.name&quot;, getAppName())\n                            .put(&quot;instrumentation.provider&quot;, &quot;micrometer&quot;)\n                            .build())\n                    .registerMetricReader(\n                        PeriodicMetricReader.builder(\n                                OtlpGrpcMetricExporter.builder()\n                                    .setCompression(&quot;gzip&quot;)\n                                    .setEndpoint(properties.getEndpoint())\n                                    .addHeader(&quot;api-key&quot;, getLicenceKey())\n                                    .setAggregationTemporalitySelector(AggregationTemporalitySelector.deltaPreferred())\n                                    .setDefaultAggregationSelector(\n                                        DefaultAggregationSelector.getDefault()\n                                            .with(InstrumentType.HISTOGRAM, Aggregation.base2ExponentialBucketHistogram()))\n                                    .build())\n                            .setInterval(Duration.ofSeconds(properties.getInterval()))\n                            .build())\n                    .build())\n            .build();\n    }\n</code></pre>\n<p>I'm not sure if I can just pass another &quot;                       .put(&quot;aggregation_cardinality_limit&quot;, 3000)&quot; to Resource.</p>\n"},{"tags":["java","spring","spring-boot"],"answers":[{"tags":[],"owner":{"account_id":62516,"reputation":20965,"user_id":185723,"accept_rate":89,"display_name":"dimitrisli"},"down_vote_count":0,"up_vote_count":25,"is_accepted":true,"score":25,"last_activity_date":1515138547,"creation_date":1515104550,"answer_id":48104439,"question_id":48099355,"body_markdown":"**[Edit]**\r\n\r\nEditing answer adding more info because of the downvote.\r\n\r\nThe reason why you are not getting a callback by the listener is because you are not explicitly calling the **LifeCycle** `start()` method ([JavaDoc][1]).\r\n\r\nThis cascades down to your **ApplicationContext** normally via the **AbstractApplicationContext** on in Spring Boot case via the **ConfigurableApplicationContext**.\r\n\r\nExample of working code below demonstrating how your callback would work (just explicitly call the start() method)\r\n\r\n    import org.springframework.boot.SpringApplication;\r\n    import org.springframework.boot.autoconfigure.SpringBootApplication;\r\n    import org.springframework.context.ApplicationListener;\r\n    import org.springframework.context.ConfigurableApplicationContext;\r\n    import org.springframework.context.event.ContextStartedEvent;\r\n    import org.springframework.stereotype.Component;\r\n    \r\n    @SpringBootApplication\r\n    public class DemoApplication {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tConfigurableApplicationContext applicationContext = SpringApplication.run(DemoApplication.class, args);\r\n    \t\tapplicationContext.start();\r\n    \t}\r\n    \r\n    \t@Component\r\n    \tclass ContextStartedListener implements ApplicationListener&lt;ContextStartedEvent&gt; {\r\n    \r\n    \t\t@Override\r\n    \t\tpublic void onApplicationEvent(ContextStartedEvent event) {\r\n    \t\t\tSystem.out.println(&quot;Context started&quot;);\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\nThe reason why I suggested below the `ContextRefreshedEvent` callback instead is because behind the scenes the `refresh()` code is getting invoked.\r\n\r\nIf you drill down the `SpringApplication#run()` method [you&#39;ll eventually see it][2].\r\n\r\nAgain here&#39;s a working example of how this would work using the `ContextRefreshedEvent`:\r\n\r\n    import org.springframework.boot.SpringApplication;\r\n    import org.springframework.boot.autoconfigure.SpringBootApplication;\r\n    import org.springframework.context.ApplicationListener;\r\n    import org.springframework.context.event.ContextRefreshedEvent;\r\n    import org.springframework.stereotype.Component;\r\n    \r\n    @SpringBootApplication\r\n    public class DemoApplication {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tSpringApplication.run(DemoApplication.class, args);\r\n    \t}\r\n    \r\n    \t@Component\r\n    \tclass ContextStartedListener implements ApplicationListener&lt;ContextRefreshedEvent&gt; {\r\n    \r\n    \t\t@Override\r\n    \t\tpublic void onApplicationEvent(ContextRefreshedEvent event) {\r\n    \t\t\tSystem.out.println(&quot;Context refreshed&quot;);\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\n----------\r\n\r\n**[Before Edit]**\r\n\r\nChange the Generic type to `ContextRefreshedEvent` instead and then it should work.\r\n\r\nFor more details read [this article from the Spring Blog][3]. Just to quote the part about the `ContextRefreshedEvent`:\r\n\r\n&gt; [..]This allows MyListener to be notified when the context has *refreshed*\r\n&gt; and one can use that to run arbitrary code when the application\r\n&gt; context has fully started.[..]\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/context/Lifecycle.html#start--\r\n  [2]: https://github.com/spring-projects/spring-boot/blob/master/spring-boot-project/spring-boot/src/main/java/org/springframework/boot/SpringApplication.java#L327\r\n  [3]: https://spring.io/blog/2015/02/11/better-application-events-in-spring-framework-4-2","title":"ContextStartedEvent not firing in custom listener","body":"<p><strong>[Edit]</strong></p>\n\n<p>Editing answer adding more info because of the downvote.</p>\n\n<p>The reason why you are not getting a callback by the listener is because you are not explicitly calling the <strong>LifeCycle</strong> <code>start()</code> method (<a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/context/Lifecycle.html#start--\" rel=\"noreferrer\">JavaDoc</a>).</p>\n\n<p>This cascades down to your <strong>ApplicationContext</strong> normally via the <strong>AbstractApplicationContext</strong> on in Spring Boot case via the <strong>ConfigurableApplicationContext</strong>.</p>\n\n<p>Example of working code below demonstrating how your callback would work (just explicitly call the start() method)</p>\n\n<pre><code>import org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.context.ApplicationListener;\nimport org.springframework.context.ConfigurableApplicationContext;\nimport org.springframework.context.event.ContextStartedEvent;\nimport org.springframework.stereotype.Component;\n\n@SpringBootApplication\npublic class DemoApplication {\n\n    public static void main(String[] args) {\n        ConfigurableApplicationContext applicationContext = SpringApplication.run(DemoApplication.class, args);\n        applicationContext.start();\n    }\n\n    @Component\n    class ContextStartedListener implements ApplicationListener&lt;ContextStartedEvent&gt; {\n\n        @Override\n        public void onApplicationEvent(ContextStartedEvent event) {\n            System.out.println(\"Context started\");\n        }\n    }\n}\n</code></pre>\n\n<p>The reason why I suggested below the <code>ContextRefreshedEvent</code> callback instead is because behind the scenes the <code>refresh()</code> code is getting invoked.</p>\n\n<p>If you drill down the <code>SpringApplication#run()</code> method <a href=\"https://github.com/spring-projects/spring-boot/blob/master/spring-boot-project/spring-boot/src/main/java/org/springframework/boot/SpringApplication.java#L327\" rel=\"noreferrer\">you'll eventually see it</a>.</p>\n\n<p>Again here's a working example of how this would work using the <code>ContextRefreshedEvent</code>:</p>\n\n<pre><code>import org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.context.ApplicationListener;\nimport org.springframework.context.event.ContextRefreshedEvent;\nimport org.springframework.stereotype.Component;\n\n@SpringBootApplication\npublic class DemoApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(DemoApplication.class, args);\n    }\n\n    @Component\n    class ContextStartedListener implements ApplicationListener&lt;ContextRefreshedEvent&gt; {\n\n        @Override\n        public void onApplicationEvent(ContextRefreshedEvent event) {\n            System.out.println(\"Context refreshed\");\n        }\n    }\n}\n</code></pre>\n\n<hr>\n\n<p><strong>[Before Edit]</strong></p>\n\n<p>Change the Generic type to <code>ContextRefreshedEvent</code> instead and then it should work.</p>\n\n<p>For more details read <a href=\"https://spring.io/blog/2015/02/11/better-application-events-in-spring-framework-4-2\" rel=\"noreferrer\">this article from the Spring Blog</a>. Just to quote the part about the <code>ContextRefreshedEvent</code>:</p>\n\n<blockquote>\n  <p>[..]This allows MyListener to be notified when the context has <em>refreshed</em>\n  and one can use that to run arbitrary code when the application\n  context has fully started.[..]</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":111563,"reputation":13269,"user_id":294657,"accept_rate":85,"display_name":"kaqqao"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701109974,"creation_date":1701109974,"answer_id":77559187,"question_id":48099355,"body_markdown":"Answer by Phil Webb (from the Spring team) on [a similar issue](https://github.com/spring-projects/spring-boot/issues/27945) on their GitHub:\r\n\r\n&gt; The `ContextStartedEvent` is being published, but it&#39;s before any beans are registered so it&#39;s already happened by the time your `ContextStartedListener` `@Component` is created. You can use `SpringApplication.addListeners` if you want to listen for early events.","title":"ContextStartedEvent not firing in custom listener","body":"<p>Answer by Phil Webb (from the Spring team) on <a href=\"https://github.com/spring-projects/spring-boot/issues/27945\" rel=\"nofollow noreferrer\">a similar issue</a> on their GitHub:</p>\n<blockquote>\n<p>The <code>ContextStartedEvent</code> is being published, but it's before any beans are registered so it's already happened by the time your <code>ContextStartedListener</code> <code>@Component</code> is created. You can use <code>SpringApplication.addListeners</code> if you want to listen for early events.</p>\n</blockquote>\n"}],"owner":{"account_id":4081547,"reputation":4204,"user_id":3351924,"accept_rate":89,"display_name":"secondbreakfast"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8832,"favorite_count":0,"down_vote_count":0,"up_vote_count":12,"accepted_answer_id":48104439,"answer_count":2,"score":12,"last_activity_date":1701109974,"creation_date":1515082809,"question_id":48099355,"body_markdown":"I am trying to hook into the creation of the context using a custom application listener like this\r\n\r\n    @Component\r\n    public class ContextStartedListener implements ApplicationListener&lt;ContextStartedEvent&gt; {\r\n    \r\n        @Override\r\n        public void onApplicationEvent(ContextStartedEvent event) {\r\n            System.out.println(&quot;Context started&quot;); // this never happens\r\n        }\r\n    }\r\n\r\nBut the `onApplicationEvent` method never fires. If I use a different event such as `ContextRefreshedEvent` then it works just fine, but I need to hook into before it is created. Any advice? Thanks!","title":"ContextStartedEvent not firing in custom listener","body":"<p>I am trying to hook into the creation of the context using a custom application listener like this</p>\n\n<pre><code>@Component\npublic class ContextStartedListener implements ApplicationListener&lt;ContextStartedEvent&gt; {\n\n    @Override\n    public void onApplicationEvent(ContextStartedEvent event) {\n        System.out.println(\"Context started\"); // this never happens\n    }\n}\n</code></pre>\n\n<p>But the <code>onApplicationEvent</code> method never fires. If I use a different event such as <code>ContextRefreshedEvent</code> then it works just fine, but I need to hook into before it is created. Any advice? Thanks!</p>\n"},{"tags":["java","spring","spring-security"],"comments":[{"owner":{"account_id":1114420,"reputation":726,"user_id":1104124,"display_name":"brunocrt"},"score":0,"creation_date":1701109894,"post_id":77559124,"comment_id":136731959,"body_markdown":"I solved the issue reading the spring security configuration migrations page at https://docs.spring.io/spring-security/reference/5.8/migration/servlet/config.html basically I was combining wrongly the anyRequest method, so I just removed it","body":"I solved the issue reading the spring security configuration migrations page at <a href=\"https://docs.spring.io/spring-security/reference/5.8/migration/servlet/config.html\" rel=\"nofollow noreferrer\">docs.spring.io/spring-security/reference/5.8/migration/servl&zwnj;&#8203;et/&hellip;</a> basically I was combining wrongly the anyRequest method, so I just removed it"},{"owner":{"account_id":477214,"reputation":5260,"user_id":888580,"display_name":"lane.maxwell"},"score":1,"creation_date":1701109946,"post_id":77559124,"comment_id":136731968,"body_markdown":"The `anyRequest()` doesn&#39;t make sense here.  Also, come to think of it, it doesn&#39;t make sense for the `/api` endpoints either.  Do you really want to ignore security for `/api`?","body":"The <code>anyRequest()</code> doesn&#39;t make sense here.  Also, come to think of it, it doesn&#39;t make sense for the <code>&#47;api</code> endpoints either.  Do you really want to ignore security for <code>&#47;api</code>?"},{"owner":{"account_id":1114420,"reputation":726,"user_id":1104124,"display_name":"brunocrt"},"score":0,"creation_date":1701110030,"post_id":77559124,"comment_id":136731978,"body_markdown":"it was just for testing the application not for deploying it for any official environment","body":"it was just for testing the application not for deploying it for any official environment"}],"owner":{"account_id":1114420,"reputation":726,"user_id":1104124,"display_name":"brunocrt"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":0,"score":-2,"last_activity_date":1701109235,"creation_date":1701109235,"question_id":77559124,"body_markdown":"I&#39;m creating a Spring Boot configuration to allow/ignore HTTP requests to a specific path using the new WebSecurityCustomizer class from Spring Security 5.4 that deprecated the class WebSecurityConfigurerAdapter.\r\n\r\n```\r\n@Configuration\r\npublic class ApplicationConfiguration {\r\n    @Bean\r\n    public WebSecurityCustomizer webSecurityCustomizer() {\r\n        return (web) -&gt; web.ignoring().anyRequest().requestMatchers(&quot;/&quot;, &quot;/api&quot;);\r\n    }\r\n}\r\n```\r\n\r\nWhen I start the spring boot application it give the following Runtime error message\r\n\r\n\r\n```\r\n\tCaused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [jakarta.servlet.Filter]: Factory method &#39;springSecurityFilterChain&#39; threw exception with message: Can&#39;t configure mvcMatchers after anyRequest\r\n\t\tat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:171)\r\n\t\tat org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:650)\r\n\t\t... 21 common frames omitted\r\n\tCaused by: java.lang.IllegalStateException: Can&#39;t configure mvcMatchers after anyRequest\r\n\t\tat org.springframework.util.Assert.state(Assert.java:76)\r\n\t\tat org.springframework.security.config.annotation.web.AbstractRequestMatcherRegistry.createMvcMatchers(AbstractRequestMatcherRegistry.java:105)\r\n\t\tat org.springframework.security.config.annotation.web.AbstractRequestMatcherRegistry.requestMatchers(AbstractRequestMatcherRegistry.java:210)\r\n\t\tat org.springframework.security.config.annotation.web.AbstractRequestMatcherRegistry.requestMatchers(AbstractRequestMatcherRegistry.java:276)\r\n```\r\n\r\n\t ","title":"How to solve java.lang.IllegalStateException: Can&#39;t configure mvcMatchers after anyRequest error?","body":"<p>I'm creating a Spring Boot configuration to allow/ignore HTTP requests to a specific path using the new WebSecurityCustomizer class from Spring Security 5.4 that deprecated the class WebSecurityConfigurerAdapter.</p>\n<pre><code>@Configuration\npublic class ApplicationConfiguration {\n    @Bean\n    public WebSecurityCustomizer webSecurityCustomizer() {\n        return (web) -&gt; web.ignoring().anyRequest().requestMatchers(&quot;/&quot;, &quot;/api&quot;);\n    }\n}\n</code></pre>\n<p>When I start the spring boot application it give the following Runtime error message</p>\n<pre><code>    Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [jakarta.servlet.Filter]: Factory method 'springSecurityFilterChain' threw exception with message: Can't configure mvcMatchers after anyRequest\n        at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:171)\n        at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:650)\n        ... 21 common frames omitted\n    Caused by: java.lang.IllegalStateException: Can't configure mvcMatchers after anyRequest\n        at org.springframework.util.Assert.state(Assert.java:76)\n        at org.springframework.security.config.annotation.web.AbstractRequestMatcherRegistry.createMvcMatchers(AbstractRequestMatcherRegistry.java:105)\n        at org.springframework.security.config.annotation.web.AbstractRequestMatcherRegistry.requestMatchers(AbstractRequestMatcherRegistry.java:210)\n        at org.springframework.security.config.annotation.web.AbstractRequestMatcherRegistry.requestMatchers(AbstractRequestMatcherRegistry.java:276)\n</code></pre>\n"},{"tags":["java","android","audio","repeat"],"answers":[{"tags":[],"owner":{"account_id":1790714,"reputation":91128,"user_id":1631193,"accept_rate":71,"display_name":"Gabe Sechan"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1701031463,"creation_date":1701031162,"answer_id":77553415,"question_id":77553004,"body_markdown":"You should never make more than one MediaPlayer, they&#39;re heavyweight objects and take a lot of resources.  Instead, make a single media player, and use setDataSource to change the sound it&#39;s set to play (you need to stop the original sound first of course).\r\n\r\nThen the next thing to change is to structure your data.  Create a map of ids to sounds:\r\n\r\n    Map&lt;Int, Int&gt; sounds = new HashMap();\r\n    sounds.put(button1id, R.raw.hannaba);\r\n    sounds.put(button2id, R.raw.mannaba);\r\n    ...\r\n\r\nThen you can have a single click function:\r\n\r\n    public void buttonClick(View view) {\r\n       mediaPlayer.stop()\r\n       mediaPlayer.setDataSource(sounds.get(view.getId())\r\n       mediaPlayer.start()\r\n    }\r\n\r\nSet that as the onClickListener of all the buttons you want to act like that, and you only have to write it once.\r\n\r\n\r\n\r\n","title":"How to make an audio stop when another audio starts (bulk alot of audios)","body":"<p>You should never make more than one MediaPlayer, they're heavyweight objects and take a lot of resources.  Instead, make a single media player, and use setDataSource to change the sound it's set to play (you need to stop the original sound first of course).</p>\n<p>Then the next thing to change is to structure your data.  Create a map of ids to sounds:</p>\n<pre><code>Map&lt;Int, Int&gt; sounds = new HashMap();\nsounds.put(button1id, R.raw.hannaba);\nsounds.put(button2id, R.raw.mannaba);\n...\n</code></pre>\n<p>Then you can have a single click function:</p>\n<pre><code>public void buttonClick(View view) {\n   mediaPlayer.stop()\n   mediaPlayer.setDataSource(sounds.get(view.getId())\n   mediaPlayer.start()\n}\n</code></pre>\n<p>Set that as the onClickListener of all the buttons you want to act like that, and you only have to write it once.</p>\n"},{"tags":[],"owner":{"account_id":29439484,"reputation":94,"user_id":22557788,"display_name":"Davit Hovhannisyan"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1701108818,"creation_date":1701108818,"answer_id":77559084,"question_id":77553004,"body_markdown":"Try this way:\r\n\r\n    public void button1Text(View view) {\r\n        if (media2 != null &amp;&amp; media2.isPlaying()) {\r\n            media2.stop();\r\n            media2.release();\r\n        }\r\n    \r\n        media1 = MediaPlayer.create(QuranJ30MA.this, R.raw.hannaba);\r\n        media1.start();\r\n    }\r\n    \r\n    public void button2Text(View view) {\r\n        if (media1 != null &amp;&amp; media1.isPlaying()) {\r\n            media1.stop();\r\n            media1.release();\r\n        }\r\n    \r\n        media2 = MediaPlayer.create(QuranJ30MA.this, R.raw.mannaba);\r\n        media2.start();\r\n    }\r\n\r\n","title":"How to make an audio stop when another audio starts (bulk alot of audios)","body":"<p>Try this way:</p>\n<pre><code>public void button1Text(View view) {\n    if (media2 != null &amp;&amp; media2.isPlaying()) {\n        media2.stop();\n        media2.release();\n    }\n\n    media1 = MediaPlayer.create(QuranJ30MA.this, R.raw.hannaba);\n    media1.start();\n}\n\npublic void button2Text(View view) {\n    if (media1 != null &amp;&amp; media1.isPlaying()) {\n        media1.stop();\n        media1.release();\n    }\n\n    media2 = MediaPlayer.create(QuranJ30MA.this, R.raw.mannaba);\n    media2.start();\n}\n</code></pre>\n"}],"owner":{"account_id":29983605,"reputation":11,"user_id":22978063,"display_name":"Adham Ahmed"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1701108818,"creation_date":1701024054,"question_id":77553004,"body_markdown":"I have 30-31 buttons and i want one to play at a time so if i click on a button it will play then when i click on the other button that one stops no matter which one it is it will stop this is the sample of the code its basically like this all through and repeats but just the numbers change hence 1,2,3,4 etc etc. :\r\n\r\n\r\n```\r\n    public void Button1Text(View view) {\r\n        Media1 = MediaPlayer.create(QuranJ30MA.this, R.raw.hannaba);\r\n        Media1.start();\r\n    }\r\n\r\n    public void Button1Text2(View view) {\r\n        Button1p = MediaPlayer.create(QuranJ30MA.this, R.raw.mannaba);\r\n        Button1p.start();\r\n    }\r\n```\r\n\r\n\r\nI did try to look at others which wanted to do the same but since i am not very good with java I couldnt understand how to apply it on mine please also explain how it works if its not too much to ask i just want to learn thank you :)","title":"How to make an audio stop when another audio starts (bulk alot of audios)","body":"<p>I have 30-31 buttons and i want one to play at a time so if i click on a button it will play then when i click on the other button that one stops no matter which one it is it will stop this is the sample of the code its basically like this all through and repeats but just the numbers change hence 1,2,3,4 etc etc. :</p>\n<pre><code>    public void Button1Text(View view) {\n        Media1 = MediaPlayer.create(QuranJ30MA.this, R.raw.hannaba);\n        Media1.start();\n    }\n\n    public void Button1Text2(View view) {\n        Button1p = MediaPlayer.create(QuranJ30MA.this, R.raw.mannaba);\n        Button1p.start();\n    }\n</code></pre>\n<p>I did try to look at others which wanted to do the same but since i am not very good with java I couldnt understand how to apply it on mine please also explain how it works if its not too much to ask i just want to learn thank you :)</p>\n"},{"tags":["java","visual-studio-code"],"comments":[{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":1,"creation_date":1701108713,"post_id":77559033,"comment_id":136731748,"body_markdown":"Have you checked Stack Overflow to see if there have previously been questions about failure to find or load main class? https://stackoverflow.com/questions/18093928/what-does-could-not-find-or-load-main-class-mean","body":"Have you checked Stack Overflow to see if there have previously been questions about failure to find or load main class? <a href=\"https://stackoverflow.com/questions/18093928/what-does-could-not-find-or-load-main-class-mean\" title=\"what does could not find or load main class mean\">stackoverflow.com/questions/18093928/&hellip;</a>"},{"owner":{"account_id":25311208,"reputation":7305,"user_id":19133920,"display_name":"JialeDu"},"score":1,"creation_date":1701162369,"post_id":77559033,"comment_id":136738059,"body_markdown":"How do you execute the code? You can look at [this document](https://code.visualstudio.com/docs/java/java-tutorial) first.","body":"How do you execute the code? You can look at <a href=\"https://code.visualstudio.com/docs/java/java-tutorial\" rel=\"nofollow noreferrer\">this document</a> first."}],"owner":{"account_id":30006296,"reputation":1,"user_id":22995118,"display_name":"Nilkamal Sau"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1701108376,"creation_date":1701108107,"question_id":77559033,"body_markdown":"The program is lacking details, it is showing \r\n\r\nI tried-\r\n\r\n```\r\nimport java.lang.*;\r\n\r\nclass nir4{\r\n    public static void main(String args[]){\r\n        System.out.print(&quot;hi&quot;);\r\n    }\r\n}\r\n```\r\nBut out&gt; put came - \r\n\r\n```none\r\nC:\\Users\\Admin\\Documents\\.vscode\\.vscode&gt;  &amp; &#39;C:\\Program Files\\Eclipse Adoptium\\jdk-17.0.8.7-hotspot\\bin\\java.exe&#39; &#39;-XX:+ShowCodeDetailsInExceptionMessages&#39; &#39;-cp&#39; &#39;C:\\Users\\Admin\\AppData\\Roaming\\Code\\User\\workspaceStorage\\eedc908950fb8b2a0402f354e7b375a7\\redhat.java\\jdt_ws\\jdt.ls-java-project\\bin&#39; &#39;nir4&#39;\r\n\r\nError: Could not find or load main class nir4    \r\n\r\nCaused by: java.lang.ClassNotFoundException: nir4[text]\r\n(https://stackoverflow.com)\r\n```\r\n","title":"Why is it showing error after windows update in vs code while Java programming","body":"<p>The program is lacking details, it is showing</p>\n<p>I tried-</p>\n<pre><code>import java.lang.*;\n\nclass nir4{\n    public static void main(String args[]){\n        System.out.print(&quot;hi&quot;);\n    }\n}\n</code></pre>\n<p>But out&gt; put came -</p>\n<pre class=\"lang-none prettyprint-override\"><code>C:\\Users\\Admin\\Documents\\.vscode\\.vscode&gt;  &amp; 'C:\\Program Files\\Eclipse Adoptium\\jdk-17.0.8.7-hotspot\\bin\\java.exe' '-XX:+ShowCodeDetailsInExceptionMessages' '-cp' 'C:\\Users\\Admin\\AppData\\Roaming\\Code\\User\\workspaceStorage\\eedc908950fb8b2a0402f354e7b375a7\\redhat.java\\jdt_ws\\jdt.ls-java-project\\bin' 'nir4'\n\nError: Could not find or load main class nir4    \n\nCaused by: java.lang.ClassNotFoundException: nir4[text]\n(https://stackoverflow.com)\n</code></pre>\n"},{"tags":["java","caching","java-8","caffeine-cache"],"answers":[{"tags":[],"owner":{"account_id":10326,"reputation":9293,"user_id":19450,"display_name":"Ben Manes"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1701108166,"creation_date":1624471793,"answer_id":68105121,"question_id":68101454,"body_markdown":"Your assumption is close, except that it is slightly more optimized in practice.\r\n\r\n1. Cache reads and writes are performed on the underlying hash table and appended to internal ring buffers.\r\n2. When the buffers reach thresholds then a task is submitted to `Caffeine.executor` to call `Cache.cleanUp`. \r\n3. When this maintenance cycle runs (under a lock),\r\n    - The buffers are drained and the events replayed against the eviction policies (e.g. LRU reordering)\r\n    - Any evictable entry is discarded and a task is submitted to `Caffeine.executor` to call `RemovalListener.onRemoval`.\r\n    - The duration until the next entry will expire is [calculated][calculated] and submitted to the scheduler. This is guarded by a [pacer][pacer] so avoid excessive scheduling by ensuring that ~1s occurs between scheduled tasks.\r\n4. When the scheduler runs, a task is submitted to `Caffeine.executor` to call `Cache.cleanUp` (see #3).\r\n\r\nThe scheduler does the minimal amount of work and any processing is deferred to the executor. That maintenance work is cheap due to using O(1) algorithms so it may occur often based on the usage activity. It is optimized for small batches of work, so the enforced ~1s delay between scheduled calls helps capture more work per invocation. If the next expiration event is in the distant future then the scheduler won&#39;t run until then, though calling threads may trigger a maintenance cycle due to their activity on the cache (see #1,2).\r\n\r\n[calculated]: https://github.com/ben-manes/caffeine/blob/7bca129d01c9b6a3cb16454e2fa5ee0f4d00dd31/caffeine/src/main/java/com/github/benmanes/caffeine/cache/BoundedLocalCache.java#L835-L851 \r\n[pacer]: https://github.com/ben-manes/caffeine/blob/master/caffeine/src/main/java/com/github/benmanes/caffeine/cache/Pacer.java","title":"Caffeine combining both scheduler and executor service","body":"<p>Your assumption is close, except that it is slightly more optimized in practice.</p>\n<ol>\n<li>Cache reads and writes are performed on the underlying hash table and appended to internal ring buffers.</li>\n<li>When the buffers reach thresholds then a task is submitted to <code>Caffeine.executor</code> to call <code>Cache.cleanUp</code>.</li>\n<li>When this maintenance cycle runs (under a lock),\n<ul>\n<li>The buffers are drained and the events replayed against the eviction policies (e.g. LRU reordering)</li>\n<li>Any evictable entry is discarded and a task is submitted to <code>Caffeine.executor</code> to call <code>RemovalListener.onRemoval</code>.</li>\n<li>The duration until the next entry will expire is <a href=\"https://github.com/ben-manes/caffeine/blob/7bca129d01c9b6a3cb16454e2fa5ee0f4d00dd31/caffeine/src/main/java/com/github/benmanes/caffeine/cache/BoundedLocalCache.java#L835-L851\" rel=\"nofollow noreferrer\">calculated</a> and submitted to the scheduler. This is guarded by a <a href=\"https://github.com/ben-manes/caffeine/blob/master/caffeine/src/main/java/com/github/benmanes/caffeine/cache/Pacer.java\" rel=\"nofollow noreferrer\">pacer</a> so avoid excessive scheduling by ensuring that ~1s occurs between scheduled tasks.</li>\n</ul>\n</li>\n<li>When the scheduler runs, a task is submitted to <code>Caffeine.executor</code> to call <code>Cache.cleanUp</code> (see #3).</li>\n</ol>\n<p>The scheduler does the minimal amount of work and any processing is deferred to the executor. That maintenance work is cheap due to using O(1) algorithms so it may occur often based on the usage activity. It is optimized for small batches of work, so the enforced ~1s delay between scheduled calls helps capture more work per invocation. If the next expiration event is in the distant future then the scheduler won't run until then, though calling threads may trigger a maintenance cycle due to their activity on the cache (see #1,2).</p>\n"}],"owner":{"account_id":4890986,"reputation":1123,"user_id":3942132,"display_name":"Roie Beck"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2689,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":68105121,"answer_count":1,"score":2,"last_activity_date":1701108166,"creation_date":1624457215,"question_id":68101454,"body_markdown":"I am using caffeine in the following configuration:\r\n\r\n```\r\n    Cache&lt;String, String&gt; cache = Caffeine.newBuilder()\r\n                .executor(newWorkStealingPool(15))\r\n                .scheduler(createScheduler())\r\n                .expireAfterWrite(10, TimeUnit.SECONDS)\r\n                .maximumSize(MAXIMUM_CACHE_SIZE)\r\n                .removalListener(this::onRemoval)\r\n                .build();\r\n\r\n\r\n    private Scheduler createScheduler() {\r\n        return forScheduledExecutorService(newSingleThreadScheduledExecutor());\r\n    }\r\n```\r\n\r\nwill I be correct to assume that ```onRemoval``` method will be executed on the ```newWorkStealingPool(15)``` ForkJoinPool, and the scheduler will be invoked only to find the expired entries that needs to be evicted? \r\n\r\nmeaning it will go something like this:\r\n\r\n\r\n1. single thread scheduler is invoked (every  ~ 1 second)\r\n2. find all the expired entries to be evicted \r\n3. execute onRemoval for each of the evicted entries in the ```newWorkStealingPool(15)``` define in the cache builder?\r\n\r\nI didn&#39;t found documentation that explains this behavior, so I am asking here\r\n\r\nTnx ","title":"Caffeine combining both scheduler and executor service","body":"<p>I am using caffeine in the following configuration:</p>\n<pre><code>    Cache&lt;String, String&gt; cache = Caffeine.newBuilder()\n                .executor(newWorkStealingPool(15))\n                .scheduler(createScheduler())\n                .expireAfterWrite(10, TimeUnit.SECONDS)\n                .maximumSize(MAXIMUM_CACHE_SIZE)\n                .removalListener(this::onRemoval)\n                .build();\n\n\n    private Scheduler createScheduler() {\n        return forScheduledExecutorService(newSingleThreadScheduledExecutor());\n    }\n</code></pre>\n<p>will I be correct to assume that <code>onRemoval</code> method will be executed on the <code>newWorkStealingPool(15)</code> ForkJoinPool, and the scheduler will be invoked only to find the expired entries that needs to be evicted?</p>\n<p>meaning it will go something like this:</p>\n<ol>\n<li>single thread scheduler is invoked (every  ~ 1 second)</li>\n<li>find all the expired entries to be evicted</li>\n<li>execute onRemoval for each of the evicted entries in the <code>newWorkStealingPool(15)</code> define in the cache builder?</li>\n</ol>\n<p>I didn't found documentation that explains this behavior, so I am asking here</p>\n<p>Tnx</p>\n"},{"tags":["java","maven","spring-boot"],"comments":[{"owner":{"account_id":115767,"reputation":42976,"user_id":303810,"accept_rate":84,"display_name":"lexicore"},"score":0,"creation_date":1524413196,"post_id":49967207,"comment_id":86951583,"body_markdown":"First, any particular reason you need a `SNAPSHOT` version?","body":"First, any particular reason you need a <code>SNAPSHOT</code> version?"},{"owner":{"account_id":115767,"reputation":42976,"user_id":303810,"accept_rate":84,"display_name":"lexicore"},"score":0,"creation_date":1524413225,"post_id":49967207,"comment_id":86951592,"body_markdown":"Second, try with direct connection, without a proxy. Most of the time the problem is in the proxy.","body":"Second, try with direct connection, without a proxy. Most of the time the problem is in the proxy."},{"owner":{"account_id":13413346,"reputation":11,"user_id":9678891,"display_name":"elham"},"score":0,"creation_date":1524424632,"post_id":49967207,"comment_id":86955513,"body_markdown":"that is just a blind copy. i need to work with spring-boot immediately for a little project. but i dont know maven well.","body":"that is just a blind copy. i need to work with spring-boot immediately for a little project. but i dont know maven well."},{"owner":{"account_id":13413346,"reputation":11,"user_id":9678891,"display_name":"elham"},"score":0,"creation_date":1524425044,"post_id":49967207,"comment_id":86955653,"body_markdown":"this is the error i get without settings.xml.                                       Non-resolvable import POM:could not transfer artifact org.springframework.boot:spring-boot-dependencies:pom:2.1.0.BUILD-SNAPSHOT from/to spring-snapshots &lt;https://repo.spring.io/snapshot&gt; Access denied to: https://repo.spring.io/snapshot/org/springframework/boot/spring-boot-dependencies/2.1.0.BUILD-SNAPSHOT/spring-boot-dependencies-2.1.0.BUILD-SNAPSHOT.pom, ReasonPhrase:Forbidden @line 20 column 15","body":"this is the error i get without settings.xml.                                       Non-resolvable import POM:could not transfer artifact org.springframework.boot:spring-boot-dependencies:pom:2.1.0.&zwnj;&#8203;BUILD-SNAPSHOT from/to spring-snapshots &lt;<a href=\"https://repo.spring.io/snapshot\" rel=\"nofollow noreferrer\">repo.spring.io/snapshot</a>&gt; Access denied to: <a href=\"https://repo.spring.io/snapshot/org/springframework/boot/spring-boot-dependencies/2.1.0.BUILD-SNAPSHOT/spring-boot-dependencies-2.1.0.BUILD-SNAPSHOT.pom\" rel=\"nofollow noreferrer\">repo.spring.io/snapshot/org/springframework/boot/&hellip;</a>, ReasonPhrase:Forbidden @line 20 column 15"},{"owner":{"account_id":115767,"reputation":42976,"user_id":303810,"accept_rate":84,"display_name":"lexicore"},"score":0,"creation_date":1524426188,"post_id":49967207,"comment_id":86955981,"body_markdown":"So maybe you *don&#39;t* need the `SNAPSHOT` version in first place? Try `2.0.1.RELEASE` - it is available from the central Maven repo.","body":"So maybe you <i>don&#39;t</i> need the <code>SNAPSHOT</code> version in first place? Try <code>2.0.1.RELEASE</code> - it is available from the central Maven repo."}],"answers":[{"tags":[],"owner":{"account_id":13825062,"reputation":1,"user_id":9979606,"display_name":"Vidhyo kochi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1529688853,"creation_date":1529688853,"answer_id":50993028,"question_id":49967207,"body_markdown":"I faced the same issue. Got it resolved by adding maven-compiler-plugin in POM for java version 1.8 followed by a Maven force update.\r\n\r\n    &lt;plugin&gt;\r\n    \t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n    \t&lt;configuration&gt;\r\n    \t  &lt;source&gt;1.8&lt;/source&gt;\r\n    \t  &lt;target&gt;1.8&lt;/target&gt;\r\n    \t&lt;/configuration&gt;\r\n    &lt;/plugin&gt;\r\n\r\nInitially I configured my web project&#39;s JRE System library from SE 1.5 to 1.8 through IDE. But after updating project from Maven ( project -&gt; Maven -&gt; Update), the system library was automatically returning to older version - 1.5. \r\n\r\nAs spring boot 2.1.0 requires JDK 1.8+, added the compiler plugin and updated the project. It worked.","title":"Non-resolvable parent POM: Could not transfer artifact org.springframework.boot:spring-boot-dependencies:pom","body":"<p>I faced the same issue. Got it resolved by adding maven-compiler-plugin in POM for java version 1.8 followed by a Maven force update.</p>\n\n<pre><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n    &lt;configuration&gt;\n      &lt;source&gt;1.8&lt;/source&gt;\n      &lt;target&gt;1.8&lt;/target&gt;\n    &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n\n<p>Initially I configured my web project's JRE System library from SE 1.5 to 1.8 through IDE. But after updating project from Maven ( project -> Maven -> Update), the system library was automatically returning to older version - 1.5. </p>\n\n<p>As spring boot 2.1.0 requires JDK 1.8+, added the compiler plugin and updated the project. It worked.</p>\n"}],"owner":{"account_id":13413346,"reputation":11,"user_id":9678891,"display_name":"elham"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":8257,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1701108125,"creation_date":1524408484,"question_id":49967207,"body_markdown":"this is my pom.xml where i copied from [here][1]\r\n\r\n    &lt;groupId&gt;com.example&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;myproject&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\r\n\t&lt;dependencyManagement&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;!-- Override Spring Data release train provided by Spring Boot --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.data&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-data-releasetrain&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;Fowler-SR2&lt;/version&gt;\r\n\t\t\t&lt;type&gt;pom&lt;/type&gt;\r\n\t\t\t&lt;scope&gt;import&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-dependencies&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.1.0.BUILD-SNAPSHOT&lt;/version&gt;\r\n\t\t\t&lt;type&gt;pom&lt;/type&gt;\r\n\t\t\t&lt;scope&gt;import&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n&lt;/dependencyManagement&gt;\r\n\r\n\t&lt;!-- Additional lines to be added here... --&gt;\r\n\r\n\t&lt;!-- (you don&#39;t need this if you are using a .RELEASE version) --&gt;\r\n\t&lt;repositories&gt;\r\n\t\t&lt;repository&gt;\r\n\t\t\t&lt;id&gt;spring-snapshots&lt;/id&gt;\r\n\t\t\t&lt;url&gt;https://repo.spring.io/snapshot&lt;/url&gt;\r\n\t\t\t&lt;snapshots&gt;&lt;enabled&gt;true&lt;/enabled&gt;&lt;/snapshots&gt;\r\n\t\t&lt;/repository&gt;\r\n\t\t&lt;repository&gt;\r\n\t\t\t&lt;id&gt;spring-milestones&lt;/id&gt;\r\n\t\t\t&lt;url&gt;https://repo.spring.io/milestone&lt;/url&gt;\r\n\t\t&lt;/repository&gt;\r\n\t&lt;/repositories&gt;\r\n\t&lt;pluginRepositories&gt;\r\n\t\t&lt;pluginRepository&gt;\r\n\t\t\t&lt;id&gt;spring-snapshots&lt;/id&gt;\r\n\t\t\t&lt;url&gt;https://repo.spring.io/snapshot&lt;/url&gt;\r\n\t\t&lt;/pluginRepository&gt;\r\n\t\t&lt;pluginRepository&gt;\r\n\t\t\t&lt;id&gt;spring-milestones&lt;/id&gt;\r\n\t\t\t&lt;url&gt;https://repo.spring.io/milestone&lt;/url&gt;\r\n\t\t&lt;/pluginRepository&gt;\r\n\t&lt;/pluginRepositories&gt;\r\nwhen i write mvn package in command line i get the following error:\r\n\r\nNon-resolvable import POM:could not transfer artifact org.springframework.boot:spring-boot-dependencies:pom:2.1.0.BUILD-SNAPSHOT from/to spring-snapshots&lt;https://repo.spring.io/snapshot&gt; proxy.example.com @line 20 column 15\r\n\r\nand i also add a settings.xml in my home/.m2 with the following code\r\n\r\n   \r\n  \r\n\r\n    &lt;proxies&gt;\r\n       &lt;proxy&gt;\r\n          &lt;id&gt;example-proxy&lt;/id&gt;\r\n          &lt;active&gt;true&lt;/active&gt;\r\n          &lt;protocol&gt;http&lt;/protocol&gt;\r\n          &lt;host&gt;proxy.example.com&lt;/host&gt;\r\n          &lt;port&gt;8080&lt;/port&gt;          \r\n          &lt;nonProxyHosts&gt;www.google.com|*.example.com&lt;/nonProxyHosts&gt;\r\n        &lt;/proxy&gt;\r\n      &lt;/proxies&gt;\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-boot/docs/current-SNAPSHOT/reference/htmlsingle/#boot-documentation-getting-help\r\n","title":"Non-resolvable parent POM: Could not transfer artifact org.springframework.boot:spring-boot-dependencies:pom","body":"<p>this is my pom.xml where i copied from <a href=\"https://docs.spring.io/spring-boot/docs/current-SNAPSHOT/reference/htmlsingle/#boot-documentation-getting-help\" rel=\"nofollow noreferrer\">here</a></p>\n\n<pre><code>&lt;groupId&gt;com.example&lt;/groupId&gt;\n&lt;artifactId&gt;myproject&lt;/artifactId&gt;\n&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n\n&lt;dependencyManagement&gt;\n&lt;dependencies&gt;\n    &lt;!-- Override Spring Data release train provided by Spring Boot --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.data&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-data-releasetrain&lt;/artifactId&gt;\n        &lt;version&gt;Fowler-SR2&lt;/version&gt;\n        &lt;type&gt;pom&lt;/type&gt;\n        &lt;scope&gt;import&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-dependencies&lt;/artifactId&gt;\n        &lt;version&gt;2.1.0.BUILD-SNAPSHOT&lt;/version&gt;\n        &lt;type&gt;pom&lt;/type&gt;\n        &lt;scope&gt;import&lt;/scope&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre>\n\n<p></p>\n\n<pre><code>&lt;!-- Additional lines to be added here... --&gt;\n\n&lt;!-- (you don't need this if you are using a .RELEASE version) --&gt;\n&lt;repositories&gt;\n    &lt;repository&gt;\n        &lt;id&gt;spring-snapshots&lt;/id&gt;\n        &lt;url&gt;https://repo.spring.io/snapshot&lt;/url&gt;\n        &lt;snapshots&gt;&lt;enabled&gt;true&lt;/enabled&gt;&lt;/snapshots&gt;\n    &lt;/repository&gt;\n    &lt;repository&gt;\n        &lt;id&gt;spring-milestones&lt;/id&gt;\n        &lt;url&gt;https://repo.spring.io/milestone&lt;/url&gt;\n    &lt;/repository&gt;\n&lt;/repositories&gt;\n&lt;pluginRepositories&gt;\n    &lt;pluginRepository&gt;\n        &lt;id&gt;spring-snapshots&lt;/id&gt;\n        &lt;url&gt;https://repo.spring.io/snapshot&lt;/url&gt;\n    &lt;/pluginRepository&gt;\n    &lt;pluginRepository&gt;\n        &lt;id&gt;spring-milestones&lt;/id&gt;\n        &lt;url&gt;https://repo.spring.io/milestone&lt;/url&gt;\n    &lt;/pluginRepository&gt;\n&lt;/pluginRepositories&gt;\n</code></pre>\n\n<p>when i write mvn package in command line i get the following error:</p>\n\n<p>Non-resolvable import POM:could not transfer artifact org.springframework.boot:spring-boot-dependencies:pom:2.1.0.BUILD-SNAPSHOT from/to spring-snapshots<a href=\"https://repo.spring.io/snapshot\" rel=\"nofollow noreferrer\">https://repo.spring.io/snapshot</a> proxy.example.com @line 20 column 15</p>\n\n<p>and i also add a settings.xml in my home/.m2 with the following code</p>\n\n<pre><code>&lt;proxies&gt;\n   &lt;proxy&gt;\n      &lt;id&gt;example-proxy&lt;/id&gt;\n      &lt;active&gt;true&lt;/active&gt;\n      &lt;protocol&gt;http&lt;/protocol&gt;\n      &lt;host&gt;proxy.example.com&lt;/host&gt;\n      &lt;port&gt;8080&lt;/port&gt;          \n      &lt;nonProxyHosts&gt;www.google.com|*.example.com&lt;/nonProxyHosts&gt;\n    &lt;/proxy&gt;\n  &lt;/proxies&gt;\n</code></pre>\n"},{"tags":["java","mysql","servlets","taglib"],"owner":{"account_id":30006094,"reputation":1,"user_id":22994959,"display_name":"Dương Đức"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1701107492,"answer_count":0,"score":-1,"last_activity_date":1701107722,"creation_date":1701106281,"question_id":77558861,"body_markdown":"[enter image description here](https://i.stack.imgur.com/YfCiP.png)\r\nMy Tomcat local server doesn&#39;t see my MySQL database problem...\r\n&lt;%@ taglib uri=&quot;http://java.sun.com/jsp/jstl/core&quot; prefix=&quot;c&quot; %&gt;\r\n\t\tConnection c = null;\r\n\t\t\r\n\t\tString url = &quot;jdbc:mysql:://localhost:3306/db_khoangsan&quot;;\r\n\t\tString user = &quot;root&quot;;\r\n\t\tString password = &quot;29012020&quot;;\r\n\t\t\r\n\t\ttry {\r\n\t\t\tClass.forName(&quot;com.mysql.cj.jdbc.Driver&quot;);\r\n\t\t\tc = DriverManager.getConnection( url, user, password);\r\n\t\t} catch (SQLException e) {\r\n\t\t\te.printStackTrace();\r\n\t\t\t// TODO: handle exception\r\n\t}\r\n\r\n","title":"I am using Tomcat 8.5.96 and I cannot connect JDBC to my database with Tomcat. My Tomcat local server doesn&#39;t see my MySQL database problem","body":"<p><a href=\"https://i.stack.imgur.com/YfCiP.png\" rel=\"nofollow noreferrer\">enter image description here</a>\nMy Tomcat local server doesn't see my MySQL database problem...\n&lt;%@ taglib uri=&quot;http://java.sun.com/jsp/jstl/core&quot; prefix=&quot;c&quot; %&gt;\nConnection c = null;</p>\n<pre><code>    String url = &quot;jdbc:mysql:://localhost:3306/db_khoangsan&quot;;\n    String user = &quot;root&quot;;\n    String password = &quot;29012020&quot;;\n    \n    try {\n        Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;);\n        c = DriverManager.getConnection( url, user, password);\n    } catch (SQLException e) {\n        e.printStackTrace();\n        // TODO: handle exception\n}\n</code></pre>\n"},{"tags":["java","spring","microservices","spring-cloud"],"comments":[{"owner":{"account_id":7783967,"reputation":360,"user_id":5889494,"display_name":"Arpit"},"score":0,"creation_date":1701101605,"post_id":77558341,"comment_id":136730431,"body_markdown":"This question seems more suited for the SE stack exchange - https://softwareengineering.stackexchange.com/","body":"This question seems more suited for the SE stack exchange - <a href=\"https://softwareengineering.stackexchange.com/\">softwareengineering.stackexchange.com</a>"}],"answers":[{"tags":[],"owner":{"account_id":3618847,"reputation":867,"user_id":17695211,"display_name":"Alexey Veleshko"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701106148,"creation_date":1701106148,"answer_id":77558848,"question_id":77558341,"body_markdown":"Normally a user in the authentication service is identified by a unique synthetic key (user ID) which is created during the user registration. You can store the value of this key in your `createdBy` column of the product service. The necessary key should be passed to the product service as an argument of its REST API.\r\n\r\nIf case the product service needs more information about the user than just that user ID, you should foresee a dedicated REST API endpoint in the authentication service which returns the necessary info by the user ID.\r\n\r\nI believe you should look into Spring Security, it supports many typical authentication workflows. For more info see, for example, a [series of videos](https://www.youtube.com/playlist?list=PLEocw3gLFc8XRaRBZkhBEZ_R3tmvfkWZz) by Laurentiu Spilca on the subject, particularly regarding OAuth2 authentication server.\r\n","title":"How to share data between other microservices in spring boot?","body":"<p>Normally a user in the authentication service is identified by a unique synthetic key (user ID) which is created during the user registration. You can store the value of this key in your <code>createdBy</code> column of the product service. The necessary key should be passed to the product service as an argument of its REST API.</p>\n<p>If case the product service needs more information about the user than just that user ID, you should foresee a dedicated REST API endpoint in the authentication service which returns the necessary info by the user ID.</p>\n<p>I believe you should look into Spring Security, it supports many typical authentication workflows. For more info see, for example, a <a href=\"https://www.youtube.com/playlist?list=PLEocw3gLFc8XRaRBZkhBEZ_R3tmvfkWZz\" rel=\"nofollow noreferrer\">series of videos</a> by Laurentiu Spilca on the subject, particularly regarding OAuth2 authentication server.</p>\n"},{"tags":[],"owner":{"account_id":308139,"reputation":8189,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1701107419,"creation_date":1701107093,"answer_id":77558942,"question_id":77558341,"body_markdown":"Your use case is typically what OAuth2 solves: you `authenticate` service looks pretty much like an *OAuth2 authorization server* and your `product` service like an *OAuth2 resource server*.\r\n\r\nIf you had an *OAuth2 client* (like the gateway could be), then it could get an access token from the authorization server and authorize its requests to the resource server using this token. Resource server gets the info it needs about the client and the resource owner (authenticated user in your case) from the token (decoding it if it&#39;s a JWT or introspecting it on the authorization server otherwize).\r\n\r\nThe bad news is you can probably trash your `authenticate` service as OIDC providers like Keycloak or cloud offers like Cognito, Auth0, Okta, etc. do probably more and better than what you did. The good news being that this services exist already, actually do a lot (user registration, clients management, identity federation, multi-factor authentication, ...), are well documented, and are not that difficult to configure.\r\n\r\nMore details in my [OAuth2 essentials](https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials#oauth_essentials) and tutorials.","title":"How to share data between other microservices in spring boot?","body":"<p>Your use case is typically what OAuth2 solves: you <code>authenticate</code> service looks pretty much like an <em>OAuth2 authorization server</em> and your <code>product</code> service like an <em>OAuth2 resource server</em>.</p>\n<p>If you had an <em>OAuth2 client</em> (like the gateway could be), then it could get an access token from the authorization server and authorize its requests to the resource server using this token. Resource server gets the info it needs about the client and the resource owner (authenticated user in your case) from the token (decoding it if it's a JWT or introspecting it on the authorization server otherwize).</p>\n<p>The bad news is you can probably trash your <code>authenticate</code> service as OIDC providers like Keycloak or cloud offers like Cognito, Auth0, Okta, etc. do probably more and better than what you did. The good news being that this services exist already, actually do a lot (user registration, clients management, identity federation, multi-factor authentication, ...), are well documented, and are not that difficult to configure.</p>\n<p>More details in my <a href=\"https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials#oauth_essentials\" rel=\"nofollow noreferrer\">OAuth2 essentials</a> and tutorials.</p>\n"}],"owner":{"account_id":17514675,"reputation":23,"user_id":12701892,"display_name":"Nam Nguyen"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":65,"favorite_count":0,"down_vote_count":4,"up_vote_count":1,"closed_date":1701109131,"answer_count":2,"score":-3,"last_activity_date":1701107419,"creation_date":1701101418,"question_id":77558341,"body_markdown":"I am learning about microservices through spring boot cloud. I have 2 services `authenticate` and `product` and I call them both through the `gateway`, I encounter the following problem:\r\n\r\n - How can the product service know which user has logged in from the    authenticate service and retrieve that user&#39;s login information?\r\n\r\n - In the `product service`, I have a `products table` and it has a `createdBy column` that is the user stored in the `users table` at the `authenticate service`. How can I get creator information when getting list of products similar to Left Join?\r\n\r\n - How to share data between other services?\r\n              \r\nIn my project, each service will have a separate database, is that optimal?\r\n\r\nI&#39;ve been working on this for a few hours and still have no results, it seems quite difficult to do. Select the solution you&#39;re using. Thank you and happy coding\r\n","title":"How to share data between other microservices in spring boot?","body":"<p>I am learning about microservices through spring boot cloud. I have 2 services <code>authenticate</code> and <code>product</code> and I call them both through the <code>gateway</code>, I encounter the following problem:</p>\n<ul>\n<li><p>How can the product service know which user has logged in from the    authenticate service and retrieve that user's login information?</p>\n</li>\n<li><p>In the <code>product service</code>, I have a <code>products table</code> and it has a <code>createdBy column</code> that is the user stored in the <code>users table</code> at the <code>authenticate service</code>. How can I get creator information when getting list of products similar to Left Join?</p>\n</li>\n<li><p>How to share data between other services?</p>\n</li>\n</ul>\n<p>In my project, each service will have a separate database, is that optimal?</p>\n<p>I've been working on this for a few hours and still have no results, it seems quite difficult to do. Select the solution you're using. Thank you and happy coding</p>\n"},{"tags":["java","serializable"],"comments":[{"owner":{"account_id":85947,"reputation":5959,"user_id":239333,"accept_rate":95,"display_name":"Ritwik Bose"},"score":12,"creation_date":1281174073,"post_id":3429921,"comment_id":3571652,"body_markdown":"@skaffman Here&#39;s what it says for the class `Serializable`:\n\n`Serializability of a class is enabled by the class implementing the java.io.Serializable interface. Classes that do not implement this interface will not have any of their state serialized or deserialized. All subtypes of a serializable class are themselves serializable. The serialization interface has no methods or fields and serves only to identify the semantics of being serializable.`","body":"@skaffman Here&#39;s what it says for the class <code>Serializable</code>:  <code>Serializability of a class is enabled by the class implementing the java.io.Serializable interface. Classes that do not implement this interface will not have any of their state serialized or deserialized. All subtypes of a serializable class are themselves serializable. The serialization interface has no methods or fields and serves only to identify the semantics of being serializable.</code>"},{"owner":{"account_id":541586,"reputation":15722,"user_id":910201,"accept_rate":73,"display_name":"Xonatron"},"score":41,"creation_date":1329239218,"post_id":3429921,"comment_id":11701534,"body_markdown":"A great explanation if you already know what serialized and deserialized mean. (Not a compliment.) Such definitions help you understand the issue better technically once, and only once, you already have some knowledge on it.","body":"A great explanation if you already know what serialized and deserialized mean. (Not a compliment.) Such definitions help you understand the issue better technically once, and only once, you already have some knowledge on it."},{"owner":{"account_id":9288944,"reputation":1488,"user_id":6897913,"display_name":"linjiejun"},"score":0,"creation_date":1609222680,"post_id":3429921,"comment_id":115779986,"body_markdown":"@RitwikBose So , java.io.Serializable is a tag interface","body":"@RitwikBose So , java.io.Serializable is a tag interface"},{"owner":{"account_id":8782213,"reputation":972,"user_id":6565511,"accept_rate":100,"display_name":"Nathan majicvr.com"},"score":0,"creation_date":1673310785,"post_id":3429921,"comment_id":132466036,"body_markdown":"If you&#39;re new to java. This is a practical application of polymorphism. If a class implements an interface then that class can be passed on to anywhere its parent can be accepted as arguments. In this case the child class could be passed on to functions like Results.writeOutput(Serializable s)","body":"If you&#39;re new to java. This is a practical application of polymorphism. If a class implements an interface then that class can be passed on to anywhere its parent can be accepted as arguments. In this case the child class could be passed on to functions like Results.writeOutput(Serializable s)"}],"answers":[{"tags":[],"owner":{"account_id":65027,"reputation":2841,"user_id":191641,"display_name":"David"},"down_vote_count":0,"up_vote_count":43,"is_accepted":false,"score":43,"last_activity_date":1281173947,"creation_date":1281173947,"answer_id":3429935,"question_id":3429921,"body_markdown":"It means that instances of the class can be turned into a byte-stream (for example, to be saved to a file) and then converted back into classes again. This reloading could happen in a different instance of the program, or even on a different machine. Serialisation (in any language) involves all sorts of issues, though, especially when you&#39;ve got references to other objects inside the serialisable one.","title":"What does Serializable mean?","body":"<p>It means that instances of the class can be turned into a byte-stream (for example, to be saved to a file) and then converted back into classes again. This reloading could happen in a different instance of the program, or even on a different machine. Serialisation (in any language) involves all sorts of issues, though, especially when you've got references to other objects inside the serialisable one.</p>\n"},{"tags":[],"owner":{"account_id":1190,"reputation":492175,"user_id":1583,"accept_rate":100,"display_name":"Oded"},"down_vote_count":2,"up_vote_count":160,"is_accepted":true,"score":158,"last_activity_date":1473776577,"creation_date":1281174009,"answer_id":3429939,"question_id":3429921,"body_markdown":"[Serialization][1] is persisting an object from memory to a sequence of bits, for instance for saving onto the disk. Deserialization is the opposite - reading data from the disk to hydrate/create an object.\r\n\r\nIn the context of your question, it is an interface that if implemented in a class, this class can automatically be serialized and deserialized by different serializers.\r\n\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Serialization","title":"What does Serializable mean?","body":"<p><a href=\"http://en.wikipedia.org/wiki/Serialization\">Serialization</a> is persisting an object from memory to a sequence of bits, for instance for saving onto the disk. Deserialization is the opposite - reading data from the disk to hydrate/create an object.</p>\n\n<p>In the context of your question, it is an interface that if implemented in a class, this class can automatically be serialized and deserialized by different serializers.</p>\n"},{"tags":[],"owner":{"account_id":66751,"reputation":401,"user_id":195674,"accept_rate":100,"display_name":"AphexMunky"},"down_vote_count":2,"up_vote_count":8,"is_accepted":false,"score":6,"last_activity_date":1596093115,"creation_date":1281174018,"answer_id":3429940,"question_id":3429921,"body_markdown":"Serializable is called in like an interface but its more like a flag to the the Serialization subsystem, at runtime. It says this object can be saved. All the Objects instance variables with the exception of none serializable objects and ones mark volatile will be saved.\r\n\r\nImagine your application can change colour as an option, without keeping that setting external you would need to change the colour every time you ran it.","title":"What does Serializable mean?","body":"<p>Serializable is called in like an interface but its more like a flag to the the Serialization subsystem, at runtime. It says this object can be saved. All the Objects instance variables with the exception of none serializable objects and ones mark volatile will be saved.</p>\n<p>Imagine your application can change colour as an option, without keeping that setting external you would need to change the colour every time you ran it.</p>\n"},{"tags":[],"owner":{"account_id":95910,"reputation":238649,"user_id":260990,"accept_rate":81,"display_name":"jmj"},"down_vote_count":1,"up_vote_count":14,"is_accepted":false,"score":13,"last_activity_date":1281174460,"creation_date":1281174460,"answer_id":3429969,"question_id":3429921,"body_markdown":"Serialization involves saving the current state of an object to a stream, and restoring an equivalent object from that stream. The stream functions as a container for the object","title":"What does Serializable mean?","body":"<p>Serialization involves saving the current state of an object to a stream, and restoring an equivalent object from that stream. The stream functions as a container for the object</p>\n"},{"tags":[],"owner":{"account_id":10725,"reputation":9219,"user_id":20388,"accept_rate":100,"display_name":"Greg Sexton"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1281182008,"creation_date":1281182008,"answer_id":3430300,"question_id":3429921,"body_markdown":"Just to add to the other answers and with regards to generality. Serialization is sometimes known as archiving, for example in Objective-C. ","title":"What does Serializable mean?","body":"<p>Just to add to the other answers and with regards to generality. Serialization is sometimes known as archiving, for example in Objective-C. </p>\n"},{"tags":[],"owner":{"account_id":1003835,"reputation":1376,"user_id":1018075,"accept_rate":74,"display_name":"Mdhar9e"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1326445827,"creation_date":1326445827,"answer_id":8848161,"question_id":3429921,"body_markdown":"Serialization is a technique to storing or writing  the objects and data in to files. By using `ObjectOutputStream` and `FileOutputStream` classes. These classes having their specific methods to persist the objects. like `writeObject();`\r\n\r\nfor clear explantaion with figures . [See Here for more info][1]\r\n\r\n\r\n  [1]: http://javabynataraj.blogspot.com/2011/04/what-is-serialization-write-simple.html","title":"What does Serializable mean?","body":"<p>Serialization is a technique to storing or writing  the objects and data in to files. By using <code>ObjectOutputStream</code> and <code>FileOutputStream</code> classes. These classes having their specific methods to persist the objects. like <code>writeObject();</code></p>\n\n<p>for clear explantaion with figures . <a href=\"http://javabynataraj.blogspot.com/2011/04/what-is-serialization-write-simple.html\" rel=\"nofollow\">See Here for more info</a></p>\n"},{"tags":[],"owner":{"account_id":920174,"reputation":3428,"user_id":951984,"accept_rate":50,"display_name":"nanospeck"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1401702592,"creation_date":1401702075,"answer_id":23991535,"question_id":3429921,"body_markdown":"To present from another perspective. Serialization is a kind of interface called &#39;marker interface&#39;. A marker interface is an interface that contains no method declarations, but\r\nmerely designates (or “marks”) a class that implements the interface as having\r\nsome property. If you understand polymorphism this will make very much sense. In the case of the Serializable marker interface, the ObjectOutputStream.write(Object) method will fail if its argument does not implement the interface. This is a potential mistake in java, it could have been ObjectOutputStream.write(Serializable) \r\n\r\nHighly Recommended : Reading Item 37 from **Effective Java by Joshua Bloch** to learn more. ","title":"What does Serializable mean?","body":"<p>To present from another perspective. Serialization is a kind of interface called 'marker interface'. A marker interface is an interface that contains no method declarations, but\nmerely designates (or “marks”) a class that implements the interface as having\nsome property. If you understand polymorphism this will make very much sense. In the case of the Serializable marker interface, the ObjectOutputStream.write(Object) method will fail if its argument does not implement the interface. This is a potential mistake in java, it could have been ObjectOutputStream.write(Serializable) </p>\n\n<p>Highly Recommended : Reading Item 37 from <strong>Effective Java by Joshua Bloch</strong> to learn more. </p>\n"},{"tags":[],"owner":{"account_id":1465379,"reputation":28229,"user_id":1378388,"accept_rate":92,"display_name":"William Kinaan"},"down_vote_count":0,"up_vote_count":53,"is_accepted":false,"score":53,"last_activity_date":1440420964,"creation_date":1440420964,"answer_id":32182901,"question_id":3429921,"body_markdown":"Though most of the users have already given the answer, but I would like to add an example for those who need it in order to explain the idea:\r\n\r\nLet&#39;s say you have a class person like the following:\r\n\r\n    public class Person implements java.io.Serializable {\r\n    \t/**\r\n    \t * \r\n    \t */\r\n    \tprivate static final long serialVersionUID = 1L;\r\n    \tpublic String firstName;\r\n    \tpublic String lastName;\r\n    \tpublic int age;\r\n    \tpublic String address;\r\n    \r\n    \tpublic void play() {\r\n    \t\tSystem.out.println(String.format(\r\n    \t\t\t\t&quot;If I win, send me the trophy to this address: %s&quot;, address));\r\n    \t}\r\n    \t@Override\r\n    \tpublic String toString() {\r\n    \t\treturn String.format(&quot;.....Person......\\nFirst Name = %s\\nLast Name = %s&quot;, firstName, lastName);\r\n    \t}\r\n    }\r\n\r\nand then you create an object like this:\r\n\r\n    Person william = new Person();\r\n    \t\twilliam.firstName = &quot;William&quot;;\r\n    \t\twilliam.lastName = &quot;Kinaan&quot;;\r\n    \t\twilliam.age = 26;\r\n    \t\twilliam.address = &quot;Lisbon, Portugal&quot;;\r\n\r\nYou can serialise that object to many streams. I will do that to two streams:\r\n\r\n**Serialization to standard output:**\r\n\r\n    public static void serializeToStandardOutput(Person person)\r\n    \t\t\tthrows IOException {\r\n    \t\tOutputStream outStream = System.out;\r\n    \t\tObjectOutputStream stdObjectOut = new ObjectOutputStream(outStream);\r\n    \t\tstdObjectOut.writeObject(person);\r\n    \t\tstdObjectOut.close();\r\n    \t\toutStream.close();\r\n    \t}\r\n\r\n**Serialization to a file:**\r\n\r\n    public static void serializeToFile(Person person) throws IOException {\r\n    \t\tOutputStream outStream = new FileOutputStream(&quot;person.ser&quot;);\r\n    \t\tObjectOutputStream fileObjectOut = new ObjectOutputStream(outStream);\r\n    \t\tfileObjectOut.writeObject(person);\r\n    \t\tfileObjectOut.close();\r\n    \t\toutStream.close();\r\n    \t}\r\nThen:\r\n\r\n**Deserialize from file:**\r\n\r\n    public static void deserializeFromFile() throws IOException,\r\n    \t\t\tClassNotFoundException {\r\n    \t\tInputStream inStream = new FileInputStream(&quot;person.ser&quot;);\r\n    \t\tObjectInputStream fileObjectIn = new ObjectInputStream(inStream);\r\n    \t\tPerson person = (Person) fileObjectIn.readObject();\r\n    \t\tSystem.out.println(person);\r\n    \t\tfileObjectIn.close();\r\n    \t\tinStream.close();\r\n    \t}","title":"What does Serializable mean?","body":"<p>Though most of the users have already given the answer, but I would like to add an example for those who need it in order to explain the idea:</p>\n\n<p>Let's say you have a class person like the following:</p>\n\n<pre><code>public class Person implements java.io.Serializable {\n    /**\n     * \n     */\n    private static final long serialVersionUID = 1L;\n    public String firstName;\n    public String lastName;\n    public int age;\n    public String address;\n\n    public void play() {\n        System.out.println(String.format(\n                \"If I win, send me the trophy to this address: %s\", address));\n    }\n    @Override\n    public String toString() {\n        return String.format(\".....Person......\\nFirst Name = %s\\nLast Name = %s\", firstName, lastName);\n    }\n}\n</code></pre>\n\n<p>and then you create an object like this:</p>\n\n<pre><code>Person william = new Person();\n        william.firstName = \"William\";\n        william.lastName = \"Kinaan\";\n        william.age = 26;\n        william.address = \"Lisbon, Portugal\";\n</code></pre>\n\n<p>You can serialise that object to many streams. I will do that to two streams:</p>\n\n<p><strong>Serialization to standard output:</strong></p>\n\n<pre><code>public static void serializeToStandardOutput(Person person)\n            throws IOException {\n        OutputStream outStream = System.out;\n        ObjectOutputStream stdObjectOut = new ObjectOutputStream(outStream);\n        stdObjectOut.writeObject(person);\n        stdObjectOut.close();\n        outStream.close();\n    }\n</code></pre>\n\n<p><strong>Serialization to a file:</strong></p>\n\n<pre><code>public static void serializeToFile(Person person) throws IOException {\n        OutputStream outStream = new FileOutputStream(\"person.ser\");\n        ObjectOutputStream fileObjectOut = new ObjectOutputStream(outStream);\n        fileObjectOut.writeObject(person);\n        fileObjectOut.close();\n        outStream.close();\n    }\n</code></pre>\n\n<p>Then:</p>\n\n<p><strong>Deserialize from file:</strong></p>\n\n<pre><code>public static void deserializeFromFile() throws IOException,\n            ClassNotFoundException {\n        InputStream inStream = new FileInputStream(\"person.ser\");\n        ObjectInputStream fileObjectIn = new ObjectInputStream(inStream);\n        Person person = (Person) fileObjectIn.readObject();\n        System.out.println(person);\n        fileObjectIn.close();\n        inStream.close();\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3291773,"reputation":3668,"user_id":2769917,"accept_rate":65,"display_name":"Asif Mushtaq"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1445798931,"creation_date":1445798931,"answer_id":33333604,"question_id":3429921,"body_markdown":"**Serialization:** Writing State of Object to File/Network or anywhere. ( Mean Java Object Supported form to File Supported Form or Network Supported Form )\r\n\r\n**Deserialization:** Reading State of Object from File/Network or anywhere. ( Mean File/Network Supported form to Java Object Supported Form )","title":"What does Serializable mean?","body":"<p><strong>Serialization:</strong> Writing State of Object to File/Network or anywhere. ( Mean Java Object Supported form to File Supported Form or Network Supported Form )</p>\n\n<p><strong>Deserialization:</strong> Reading State of Object from File/Network or anywhere. ( Mean File/Network Supported form to Java Object Supported Form )</p>\n"},{"tags":[],"owner":{"account_id":1592127,"reputation":18171,"user_id":1475228,"accept_rate":84,"display_name":"Pritam Banerjee"},"down_vote_count":0,"up_vote_count":22,"is_accepted":false,"score":22,"last_activity_date":1493165460,"creation_date":1493165460,"answer_id":43622908,"question_id":3429921,"body_markdown":"[Here is a detailed explanation of the Serialization][1]: (my own blog)\r\n\r\n\r\n**Serialization:**\r\n\r\nSerialization is the process of serializing the state of an object is represented and stored in the form of a sequence of bytes. This can be stored in a file. The process to read the state of the object from the file and restoring it is called deserialization.\r\n\r\n\r\n**What is the need of Serialization?**\r\n\r\nIn modern day architecture, there is always a need to store object state and then retrieve it. For example in Hibernate, to store a object we should make the class Serializable. What it does, is that once the object state is saved in the form of bytes it can be transferred to another system which can then read from the state and retrieve the class. The object state can come from a database or a different jvm or from a separate component. With the help of Serialization we can retrieve the Object state.  \r\n\r\n\r\n**Code Example and explanation:**\r\n\r\nFirst let&#39;s have a look at the Item Class:\r\n\r\n    public class Item implements Serializable{\r\n    \r\n        /**\r\n        *  This is the Serializable class\r\n        */\r\n        private static final long serialVersionUID = 475918891428093041L;\r\n        private Long itemId;\r\n        private String itemName;\r\n        private transient Double itemCostPrice;\r\n        public Item(Long itemId, String itemName, Double itemCostPrice) {\r\n            super();\r\n            this.itemId = itemId;\r\n            this.itemName = itemName;\r\n            this.itemCostPrice = itemCostPrice;\r\n          }\r\n    \r\n          public Long getItemId() {\r\n              return itemId;\r\n          }\r\n    \r\n         @Override\r\n          public String toString() {\r\n              return &quot;Item [itemId=&quot; + itemId + &quot;, itemName=&quot; + itemName + &quot;, itemCostPrice=&quot; + itemCostPrice + &quot;]&quot;;\r\n           }\r\n    \r\n    \r\n           public void setItemId(Long itemId) {\r\n               this.itemId = itemId;\r\n           }\r\n    \r\n           public String getItemName() {\r\n               return itemName;\r\n           }\r\n           public void setItemName(String itemName) {\r\n                this.itemName = itemName;\r\n            }\r\n    \r\n           public Double getItemCostPrice() {\r\n                return itemCostPrice;\r\n            }\r\n    \r\n            public void setItemCostPrice(Double itemCostPrice) {\r\n                 this.itemCostPrice = itemCostPrice;\r\n            }\r\n    }\r\n\r\nIn the above code it can be seen that *Item* class implements *Serializable*. \r\n\r\nThis is the interface that enables a class to be serializable. \r\n\r\nNow we can see a variable called *serialVersionUID* is initialized to Long variable. This number is calculated by the compiler based on the state of the class and the class attributes. This is the number that will help the jvm identify the state of an object when it reads the state of the object from file. \r\n\r\nFor that we can have a look at the official Oracle Documentation:\r\n\r\n&gt; The serialization runtime associates with each serializable class a\r\n&gt; version number, called a serialVersionUID, which is used during\r\n&gt; deserialization to verify that the sender and receiver of a serialized\r\n&gt; object have loaded classes for that object that are compatible with\r\n&gt; respect to serialization. If the receiver has loaded a class for the\r\n&gt; object that has a different serialVersionUID than that of the\r\n&gt; corresponding sender&#39;s class, then deserialization will result in an\r\n&gt; InvalidClassException. A serializable class can declare its own\r\n&gt; serialVersionUID explicitly by declaring a field named\r\n&gt; &quot;serialVersionUID&quot; that must be static, final, and of type long:\r\n&gt; ANY-ACCESS-MODIFIER static final long serialVersionUID = 42L; If a\r\n&gt; serializable class does not explicitly declare a serialVersionUID,\r\n&gt; then the serialization runtime will calculate a default\r\n&gt; serialVersionUID value for that class based on various aspects of the\r\n&gt; class, as described in the Java(TM) Object Serialization\r\n&gt; Specification. However, it is strongly recommended that all\r\n&gt; serializable classes explicitly declare serialVersionUID values, since\r\n&gt; the default serialVersionUID computation is highly sensitive to class\r\n&gt; details that may vary depending on compiler implementations, and can\r\n&gt; thus result in unexpected InvalidClassExceptions during\r\n&gt; deserialization. Therefore, to guarantee a consistent serialVersionUID\r\n&gt; value across different java compiler implementations, a serializable\r\n&gt; class must declare an explicit serialVersionUID value. It is also\r\n&gt; strongly advised that explicit serialVersionUID declarations use the\r\n&gt; private modifier where possible, since such declarations apply only to\r\n&gt; the immediately declaring class--serialVersionUID fields are not\r\n&gt; useful as inherited members.\r\n\r\n\r\nIf you have noticed there is another keyword we have used which is *transient*.\r\n\r\nIf a field is not serializable, it must be marked transient. Here we marked the *itemCostPrice* as transient and don&#39;t want it to be written in a file\r\n\r\nNow let&#39;s have a look on how to write the state of an object in the file and then read it from there.\r\n\r\n    public class SerializationExample {\r\n    \r\n        public static void main(String[] args){\r\n            serialize();\r\n           deserialize();\r\n        } \r\n    \r\n        public static void serialize(){\r\n    \r\n             Item item = new Item(1L,&quot;Pen&quot;, 12.55);\r\n             System.out.println(&quot;Before Serialization&quot; + item);\r\n    \r\n             FileOutputStream fileOut;\r\n             try {\r\n                 fileOut = new FileOutputStream(&quot;/tmp/item.ser&quot;);\r\n                 ObjectOutputStream out = new ObjectOutputStream(fileOut);\r\n                 out.writeObject(item);\r\n                 out.close();\r\n                 fileOut.close();\r\n                 System.out.println(&quot;Serialized data is saved in /tmp/item.ser&quot;);\r\n               } catch (FileNotFoundException e) {\r\n    \r\n                      e.printStackTrace();\r\n               } catch (IOException e) {\r\n    \r\n                      e.printStackTrace();\r\n               }\r\n          }\r\n    \r\n        public static void deserialize(){\r\n            Item item;\r\n    \r\n            try {\r\n                    FileInputStream fileIn = new FileInputStream(&quot;/tmp/item.ser&quot;);\r\n                    ObjectInputStream in = new ObjectInputStream(fileIn);\r\n                    item = (Item) in.readObject();\r\n                    System.out.println(&quot;Serialized data is read from /tmp/item.ser&quot;);\r\n                    System.out.println(&quot;After Deserialization&quot; + item);\r\n            } catch (FileNotFoundException e) {\r\n                    e.printStackTrace();\r\n            } catch (IOException e) {\r\n                   e.printStackTrace();\r\n            } catch (ClassNotFoundException e) {\r\n                   e.printStackTrace();\r\n            }\r\n         }\r\n    }\r\n\r\nIn the above we can see an example of serialization and deserialization of an object. \r\n\r\nFor that we used two classes. For serializing the object we have used ObjectOutputStream. We have used the method writeObject to write the object in the file. \r\n\r\nFor Deserializing we have used ObjectInputStream which reads from the object from the file. It uses readObject to read the object data from the file. \r\n\r\nThe output of the above code would be like:\r\n\r\n    Before SerializationItem [itemId=1, itemName=Pen, itemCostPrice=12.55]\r\n    Serialized data is saved in /tmp/item.ser\r\n    After DeserializationItem [itemId=1, itemName=Pen, itemCostPrice=null]\r\n\r\nNotice that *itemCostPrice* from deserialized object is *null* as it was not written.\r\n\r\n\r\n  [1]: http://prinavtech.blogspot.com/2017/04/java-serialization-and-deserialization.html","title":"What does Serializable mean?","body":"<p><a href=\"http://prinavtech.blogspot.com/2017/04/java-serialization-and-deserialization.html\" rel=\"noreferrer\">Here is a detailed explanation of the Serialization</a>: (my own blog)</p>\n\n<p><strong>Serialization:</strong></p>\n\n<p>Serialization is the process of serializing the state of an object is represented and stored in the form of a sequence of bytes. This can be stored in a file. The process to read the state of the object from the file and restoring it is called deserialization.</p>\n\n<p><strong>What is the need of Serialization?</strong></p>\n\n<p>In modern day architecture, there is always a need to store object state and then retrieve it. For example in Hibernate, to store a object we should make the class Serializable. What it does, is that once the object state is saved in the form of bytes it can be transferred to another system which can then read from the state and retrieve the class. The object state can come from a database or a different jvm or from a separate component. With the help of Serialization we can retrieve the Object state.  </p>\n\n<p><strong>Code Example and explanation:</strong></p>\n\n<p>First let's have a look at the Item Class:</p>\n\n<pre><code>public class Item implements Serializable{\n\n    /**\n    *  This is the Serializable class\n    */\n    private static final long serialVersionUID = 475918891428093041L;\n    private Long itemId;\n    private String itemName;\n    private transient Double itemCostPrice;\n    public Item(Long itemId, String itemName, Double itemCostPrice) {\n        super();\n        this.itemId = itemId;\n        this.itemName = itemName;\n        this.itemCostPrice = itemCostPrice;\n      }\n\n      public Long getItemId() {\n          return itemId;\n      }\n\n     @Override\n      public String toString() {\n          return \"Item [itemId=\" + itemId + \", itemName=\" + itemName + \", itemCostPrice=\" + itemCostPrice + \"]\";\n       }\n\n\n       public void setItemId(Long itemId) {\n           this.itemId = itemId;\n       }\n\n       public String getItemName() {\n           return itemName;\n       }\n       public void setItemName(String itemName) {\n            this.itemName = itemName;\n        }\n\n       public Double getItemCostPrice() {\n            return itemCostPrice;\n        }\n\n        public void setItemCostPrice(Double itemCostPrice) {\n             this.itemCostPrice = itemCostPrice;\n        }\n}\n</code></pre>\n\n<p>In the above code it can be seen that <em>Item</em> class implements <em>Serializable</em>. </p>\n\n<p>This is the interface that enables a class to be serializable. </p>\n\n<p>Now we can see a variable called <em>serialVersionUID</em> is initialized to Long variable. This number is calculated by the compiler based on the state of the class and the class attributes. This is the number that will help the jvm identify the state of an object when it reads the state of the object from file. </p>\n\n<p>For that we can have a look at the official Oracle Documentation:</p>\n\n<blockquote>\n  <p>The serialization runtime associates with each serializable class a\n  version number, called a serialVersionUID, which is used during\n  deserialization to verify that the sender and receiver of a serialized\n  object have loaded classes for that object that are compatible with\n  respect to serialization. If the receiver has loaded a class for the\n  object that has a different serialVersionUID than that of the\n  corresponding sender's class, then deserialization will result in an\n  InvalidClassException. A serializable class can declare its own\n  serialVersionUID explicitly by declaring a field named\n  \"serialVersionUID\" that must be static, final, and of type long:\n  ANY-ACCESS-MODIFIER static final long serialVersionUID = 42L; If a\n  serializable class does not explicitly declare a serialVersionUID,\n  then the serialization runtime will calculate a default\n  serialVersionUID value for that class based on various aspects of the\n  class, as described in the Java(TM) Object Serialization\n  Specification. However, it is strongly recommended that all\n  serializable classes explicitly declare serialVersionUID values, since\n  the default serialVersionUID computation is highly sensitive to class\n  details that may vary depending on compiler implementations, and can\n  thus result in unexpected InvalidClassExceptions during\n  deserialization. Therefore, to guarantee a consistent serialVersionUID\n  value across different java compiler implementations, a serializable\n  class must declare an explicit serialVersionUID value. It is also\n  strongly advised that explicit serialVersionUID declarations use the\n  private modifier where possible, since such declarations apply only to\n  the immediately declaring class--serialVersionUID fields are not\n  useful as inherited members.</p>\n</blockquote>\n\n<p>If you have noticed there is another keyword we have used which is <em>transient</em>.</p>\n\n<p>If a field is not serializable, it must be marked transient. Here we marked the <em>itemCostPrice</em> as transient and don't want it to be written in a file</p>\n\n<p>Now let's have a look on how to write the state of an object in the file and then read it from there.</p>\n\n<pre><code>public class SerializationExample {\n\n    public static void main(String[] args){\n        serialize();\n       deserialize();\n    } \n\n    public static void serialize(){\n\n         Item item = new Item(1L,\"Pen\", 12.55);\n         System.out.println(\"Before Serialization\" + item);\n\n         FileOutputStream fileOut;\n         try {\n             fileOut = new FileOutputStream(\"/tmp/item.ser\");\n             ObjectOutputStream out = new ObjectOutputStream(fileOut);\n             out.writeObject(item);\n             out.close();\n             fileOut.close();\n             System.out.println(\"Serialized data is saved in /tmp/item.ser\");\n           } catch (FileNotFoundException e) {\n\n                  e.printStackTrace();\n           } catch (IOException e) {\n\n                  e.printStackTrace();\n           }\n      }\n\n    public static void deserialize(){\n        Item item;\n\n        try {\n                FileInputStream fileIn = new FileInputStream(\"/tmp/item.ser\");\n                ObjectInputStream in = new ObjectInputStream(fileIn);\n                item = (Item) in.readObject();\n                System.out.println(\"Serialized data is read from /tmp/item.ser\");\n                System.out.println(\"After Deserialization\" + item);\n        } catch (FileNotFoundException e) {\n                e.printStackTrace();\n        } catch (IOException e) {\n               e.printStackTrace();\n        } catch (ClassNotFoundException e) {\n               e.printStackTrace();\n        }\n     }\n}\n</code></pre>\n\n<p>In the above we can see an example of serialization and deserialization of an object. </p>\n\n<p>For that we used two classes. For serializing the object we have used ObjectOutputStream. We have used the method writeObject to write the object in the file. </p>\n\n<p>For Deserializing we have used ObjectInputStream which reads from the object from the file. It uses readObject to read the object data from the file. </p>\n\n<p>The output of the above code would be like:</p>\n\n<pre><code>Before SerializationItem [itemId=1, itemName=Pen, itemCostPrice=12.55]\nSerialized data is saved in /tmp/item.ser\nAfter DeserializationItem [itemId=1, itemName=Pen, itemCostPrice=null]\n</code></pre>\n\n<p>Notice that <em>itemCostPrice</em> from deserialized object is <em>null</em> as it was not written.</p>\n"},{"tags":[],"owner":{"account_id":2758007,"reputation":1760,"user_id":2375535,"accept_rate":57,"display_name":"Nomade"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1612458013,"creation_date":1612458013,"answer_id":66050293,"question_id":3429921,"body_markdown":"To serialize an object means to convert its state to a byte stream so that the byte stream can be reverted back into a copy of the object. A Java object is serializable if its class or any of its superclasses implements either the java.io.Serializable interface or its subinterface, java.io.Externalizable. Deserialization is the process of converting the serialized form of an object back into a copy of the object\r\n\r\nClick [here](https://docs.oracle.com/javase/tutorial/jndi/objects/serial.html#:~:text=To%20serialize%20an%20object%20means,interface%20or%20its%20subinterface%2C%20java) to see more.","title":"What does Serializable mean?","body":"<p>To serialize an object means to convert its state to a byte stream so that the byte stream can be reverted back into a copy of the object. A Java object is serializable if its class or any of its superclasses implements either the java.io.Serializable interface or its subinterface, java.io.Externalizable. Deserialization is the process of converting the serialized form of an object back into a copy of the object</p>\n<p>Click <a href=\"https://docs.oracle.com/javase/tutorial/jndi/objects/serial.html#:%7E:text=To%20serialize%20an%20object%20means,interface%20or%20its%20subinterface%2C%20java\" rel=\"nofollow noreferrer\">here</a> to see more.</p>\n"},{"tags":[],"owner":{"account_id":18552307,"reputation":441,"user_id":13518297,"display_name":"Ragab Mohamad"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675777765,"creation_date":1675777765,"answer_id":75374284,"question_id":3429921,"body_markdown":"**Serialization** is used to export application data into a file.\r\n \r\n**deserialization** to extract the data from the application .\r\n\r\nExample : \r\n\r\n    namespace DemoApplication\r\n    {\r\n      [Serializable]\r\n      class Tutorial\r\n      {\r\n      public int ID;\r\n      public String Name;\r\n       static void Main(string[] args)\r\n       {\r\n        Tutorial obj = new Tutorial();\r\n        obj.ID = 1;\r\n        obj.Name = &quot;.Net&quot;;\r\n    \r\n        IFormatter formatter = new BinaryFormatter();\r\n        Stream stream = new FileStream(@&quot;E:\\ExampleNew.txt&quot;,FileMode.Create,FileAccess.Write);\r\n    \r\n        formatter.Serialize(stream, obj);\r\n        stream.Close();\r\n    \r\n        stream = new FileStream(@&quot;E:\\ExampleNew.txt&quot;,FileMode.Open,FileAccess.Read);\r\n        Tutorial objnew = (Tutorial)formatter.Deserialize(stream);\r\n    \r\n        Console.WriteLine(objnew.ID);\r\n        Console.WriteLine(objnew.Name);\r\n    \r\n        Console.ReadKey();\r\n      }\r\n     }\r\n    }","title":"What does Serializable mean?","body":"<p><strong>Serialization</strong> is used to export application data into a file.</p>\n<p><strong>deserialization</strong> to extract the data from the application .</p>\n<p>Example :</p>\n<pre><code>namespace DemoApplication\n{\n  [Serializable]\n  class Tutorial\n  {\n  public int ID;\n  public String Name;\n   static void Main(string[] args)\n   {\n    Tutorial obj = new Tutorial();\n    obj.ID = 1;\n    obj.Name = &quot;.Net&quot;;\n\n    IFormatter formatter = new BinaryFormatter();\n    Stream stream = new FileStream(@&quot;E:\\ExampleNew.txt&quot;,FileMode.Create,FileAccess.Write);\n\n    formatter.Serialize(stream, obj);\n    stream.Close();\n\n    stream = new FileStream(@&quot;E:\\ExampleNew.txt&quot;,FileMode.Open,FileAccess.Read);\n    Tutorial objnew = (Tutorial)formatter.Deserialize(stream);\n\n    Console.WriteLine(objnew.ID);\n    Console.WriteLine(objnew.Name);\n\n    Console.ReadKey();\n  }\n }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11418021,"reputation":4780,"user_id":8370334,"display_name":"Abd Abughazaleh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701107167,"creation_date":1701075581,"answer_id":77555620,"question_id":3429921,"body_markdown":"`Serializable` is an interface called `marker-interface` just to tell Java I want to make **serialization** and **de-serialization** using this Java calss.\r\n\r\n**Serialization:**\r\nWrite to the file or any other storage like a database.\r\n\r\n**De-serialization:** read from a file or any other storage like a database.","title":"What does Serializable mean?","body":"<p><code>Serializable</code> is an interface called <code>marker-interface</code> just to tell Java I want to make <strong>serialization</strong> and <strong>de-serialization</strong> using this Java calss.</p>\n<p><strong>Serialization:</strong>\nWrite to the file or any other storage like a database.</p>\n<p><strong>De-serialization:</strong> read from a file or any other storage like a database.</p>\n"}],"owner":{"account_id":85947,"reputation":5959,"user_id":239333,"accept_rate":95,"display_name":"Ritwik Bose"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":127967,"favorite_count":0,"down_vote_count":2,"up_vote_count":170,"accepted_answer_id":3429939,"answer_count":13,"score":168,"last_activity_date":1701107167,"creation_date":1281173768,"question_id":3429921,"body_markdown":"What exactly does it mean for a class to be `Serializable` in Java?  Or in general, for that matter... ","title":"What does Serializable mean?","body":"<p>What exactly does it mean for a class to be <code>Serializable</code> in Java?  Or in general, for that matter... </p>\n"},{"tags":["java","spring-security","single-sign-on","saml-2.0","spring-security-saml2"],"answers":[{"tags":[],"owner":{"account_id":24440940,"reputation":3122,"user_id":18364656,"display_name":"Andrei Lisa"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1701107144,"creation_date":1701107144,"answer_id":77558951,"question_id":77557593,"body_markdown":"As an answer to your question I want to say that \r\n\r\n    org.springframework.security.extensions:spring-security-saml2-core:2.0.0.M31\r\n\r\nand\r\n\r\n    org.springframework.security.extensions:%20spring-security-saml%3A1.0.10.RELEASE\r\n\r\nWere removed from support more details you will be able to find [spring-security-saml-extensions-1-x-eol-on-october-6-2021][1]\r\n\r\n\r\nIt could also be seeing into [maven repository][2]\r\n\r\n\r\nBased on it you have to use \r\n\r\n    org.springframework.security:spring-security-saml2-service-provider\r\n\r\nThat is currently maintained you can check it also on [maven central repository][3] \r\n\r\nAlso a reference to [documentation][4]\r\n\r\n\r\n  [1]: https://spring.io/blog/2020/09/22/spring-security-saml-extensions-1-x-eol-on-october-6-2021\r\n  [2]: https://mvnrepository.com/artifact/org.springframework.security.extensions/spring-security-saml\r\n  [3]: https://mvnrepository.com/artifact/org.springframework.security/spring-security-saml2-service-provider\r\n  [4]: https://docs.spring.io/spring-security/reference/servlet/saml2/index.html","title":"Spring security SAML : Which lib to create an Identity provider to connect to service provider","body":"<p>As an answer to your question I want to say that</p>\n<pre><code>org.springframework.security.extensions:spring-security-saml2-core:2.0.0.M31\n</code></pre>\n<p>and</p>\n<pre><code>org.springframework.security.extensions:%20spring-security-saml%3A1.0.10.RELEASE\n</code></pre>\n<p>Were removed from support more details you will be able to find <a href=\"https://spring.io/blog/2020/09/22/spring-security-saml-extensions-1-x-eol-on-october-6-2021\" rel=\"nofollow noreferrer\">spring-security-saml-extensions-1-x-eol-on-october-6-2021</a></p>\n<p>It could also be seeing into <a href=\"https://mvnrepository.com/artifact/org.springframework.security.extensions/spring-security-saml\" rel=\"nofollow noreferrer\">maven repository</a></p>\n<p>Based on it you have to use</p>\n<pre><code>org.springframework.security:spring-security-saml2-service-provider\n</code></pre>\n<p>That is currently maintained you can check it also on <a href=\"https://mvnrepository.com/artifact/org.springframework.security/spring-security-saml2-service-provider\" rel=\"nofollow noreferrer\">maven central repository</a></p>\n<p>Also a reference to <a href=\"https://docs.spring.io/spring-security/reference/servlet/saml2/index.html\" rel=\"nofollow noreferrer\">documentation</a></p>\n"}],"owner":{"account_id":10826565,"reputation":3,"user_id":22993862,"display_name":"user22993862"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":2,"is_answered":true,"view_count":43,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":77558951,"answer_count":1,"score":-1,"last_activity_date":1701107144,"creation_date":1701094663,"question_id":77557593,"body_markdown":"I want to create an identityprovider to authenticate to an sso server using Spring security saml2. Can I create an ID using the &#39;org.springframework.security:spring-security-saml2-service-provider&#39; library or should I do this using &#39;org.springframework.security.extensions: spring-security-saml:1.0.10.RELEASE&#39; or &#39;org.springframework.security.extensions:spring-security-saml2-core:2.0.0.M31&#39;\r\n\r\nI have the impression that the documentation is mainly around setting up service providers","title":"Spring security SAML : Which lib to create an Identity provider to connect to service provider","body":"<p>I want to create an identityprovider to authenticate to an sso server using Spring security saml2. Can I create an ID using the 'org.springframework.security:spring-security-saml2-service-provider' library or should I do this using 'org.springframework.security.extensions: spring-security-saml:1.0.10.RELEASE' or 'org.springframework.security.extensions:spring-security-saml2-core:2.0.0.M31'</p>\n<p>I have the impression that the documentation is mainly around setting up service providers</p>\n"},{"tags":["java","spring-boot","api-gateway","spring-cloud-gateway"],"comments":[{"owner":{"account_id":25926563,"reputation":119,"user_id":19648355,"display_name":"Irremediable"},"score":0,"creation_date":1701108307,"post_id":77558926,"comment_id":136731680,"body_markdown":"&quot;but with no success&quot; is not describes your issue","body":"&quot;but with no success&quot; is not describes your issue"}],"owner":{"account_id":26315271,"reputation":1,"user_id":19978152,"display_name":"jacksparrow777"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1701106936,"creation_date":1701106936,"question_id":77558926,"body_markdown":"I am trying to modify the response body which is currently gzipped text/html format. As first step i want to log it in abstract filter factory class. \r\n\r\nSo far i have tried [https://stackoverflow.com/questions/68741402/how-to-set-request-body-in-gatewayfilter-with-spring-cloud-gateway](https://stackoverflow.com) and [https://stackoverflow.com/questions/71465870/how-to-get-original-response-body-in-spring-cloud-gateway-webflux-post-filter](https://stackoverflow.com) but with no success. The rewrite response itself do not work.  \r\n\r\n```\r\n@Component\r\npublic class ReportingGatewayFilterFactory extends AbstractGatewayFilterFactory&lt;ReportingGatewayFilterFactory.Config&gt; {\r\n\r\n    private static final Logger logger = LoggerFactory.getLogger(ReportingGatewayFilterFactory.class);\r\n\r\n    public ReportingGatewayFilterFactory() {\r\n        super(Config.class);\r\n    }\r\n\r\n\r\n    @Configuration\r\n    @ConfigurationProperties(prefix = &quot;custom-properties&quot;)\r\n    public static class Config {\r\n        ;\r\n    }\r\n\r\n    @Override\r\n    public GatewayFilter apply(Config config) {\r\n        return (exchange, chain) -&gt; {\r\n\r\n            String originalUriString = exchange.getRequest().getURI().toString();\r\n            String rewrittenUriString = originalUriString.replace(&quot;/mygateway/central_reporting/public/dashboards&quot;, &quot;/public/dashboards&quot;);\r\n            URI rewrittenUri = URI.create(rewrittenUriString); \r\n\r\n            ServerHttpRequest mutatedRequest = exchange.getRequest().mutate().uri(rewrittenUri).headers(headers -&gt; headers.remove(&quot;Authorization&quot;)).build();\r\n            ServerWebExchange mutatedExchange = exchange.mutate().request(mutatedRequest).build();\r\n\r\n            return chain.filter(mutatedExchange);\r\n\r\n        };\r\n    }\r\n    \r\n}\r\n```\r\n","title":"Log response body in spring cloud gateway in filterfactory class","body":"<p>I am trying to modify the response body which is currently gzipped text/html format. As first step i want to log it in abstract filter factory class.</p>\n<p>So far i have tried <a href=\"https://stackoverflow.com\">https://stackoverflow.com/questions/68741402/how-to-set-request-body-in-gatewayfilter-with-spring-cloud-gateway</a> and <a href=\"https://stackoverflow.com\">https://stackoverflow.com/questions/71465870/how-to-get-original-response-body-in-spring-cloud-gateway-webflux-post-filter</a> but with no success. The rewrite response itself do not work.</p>\n<pre><code>@Component\npublic class ReportingGatewayFilterFactory extends AbstractGatewayFilterFactory&lt;ReportingGatewayFilterFactory.Config&gt; {\n\n    private static final Logger logger = LoggerFactory.getLogger(ReportingGatewayFilterFactory.class);\n\n    public ReportingGatewayFilterFactory() {\n        super(Config.class);\n    }\n\n\n    @Configuration\n    @ConfigurationProperties(prefix = &quot;custom-properties&quot;)\n    public static class Config {\n        ;\n    }\n\n    @Override\n    public GatewayFilter apply(Config config) {\n        return (exchange, chain) -&gt; {\n\n            String originalUriString = exchange.getRequest().getURI().toString();\n            String rewrittenUriString = originalUriString.replace(&quot;/mygateway/central_reporting/public/dashboards&quot;, &quot;/public/dashboards&quot;);\n            URI rewrittenUri = URI.create(rewrittenUriString); \n\n            ServerHttpRequest mutatedRequest = exchange.getRequest().mutate().uri(rewrittenUri).headers(headers -&gt; headers.remove(&quot;Authorization&quot;)).build();\n            ServerWebExchange mutatedExchange = exchange.mutate().request(mutatedRequest).build();\n\n            return chain.filter(mutatedExchange);\n\n        };\n    }\n    \n}\n</code></pre>\n"},{"tags":["java","kotlin","thread-safety","blockchain","corda"],"answers":[{"tags":[],"owner":{"account_id":17248886,"reputation":105,"user_id":12489459,"display_name":"Benjamin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1678896540,"creation_date":1678896540,"answer_id":75747279,"question_id":75385788,"body_markdown":"When we call a flow from service it good practice to call it from its own Thread to avoid Dead locks of transaction update.\r\n\r\nInside @CordaService class\r\n\r\n  \r\n\r\n    private companion object {\r\n            val executor: Executor = Executors.newCachedThreadPool()\r\n          }\r\n        -------------------------------------------------------------------\r\n          executor.execute {\r\n            serviceHub.startFlow(RegisterCarFlow(update))\r\n          }","title":"serviceHub.startFlow from a cordaService class versus subFlow calling from Corda flow","body":"<p>When we call a flow from service it good practice to call it from its own Thread to avoid Dead locks of transaction update.</p>\n<p>Inside @CordaService class</p>\n<pre><code>private companion object {\n        val executor: Executor = Executors.newCachedThreadPool()\n      }\n    -------------------------------------------------------------------\n      executor.execute {\n        serviceHub.startFlow(RegisterCarFlow(update))\n      }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11113076,"reputation":563,"user_id":8158136,"display_name":"Veerabala J"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701106542,"creation_date":1701106542,"answer_id":77558889,"question_id":75385788,"body_markdown":"One problem associated with using custom threadPool is that it is complex to get the results back from the subFlow within the service or the flow which initiates the service. If we were to use Future or CompletableFuture then it would defeat the purpose of running these subflows concurrently.\r\nWe can use this approach more easily only when the subflow results are not needed for the initiator or the service.","title":"serviceHub.startFlow from a cordaService class versus subFlow calling from Corda flow","body":"<p>One problem associated with using custom threadPool is that it is complex to get the results back from the subFlow within the service or the flow which initiates the service. If we were to use Future or CompletableFuture then it would defeat the purpose of running these subflows concurrently.\nWe can use this approach more easily only when the subflow results are not needed for the initiator or the service.</p>\n"}],"owner":{"account_id":17248886,"reputation":105,"user_id":12489459,"display_name":"Benjamin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":62,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75747279,"answer_count":2,"score":0,"last_activity_date":1701106542,"creation_date":1675859267,"question_id":75385788,"body_markdown":"Is there a difference in calling one flow as **subflow** from another corda flow versus calling the same flow from a cordaservice class as **serviceHub.startFlow**?\r\n\r\nIn terms of thread utilization or suspending etc? \r\n\r\nI encountered a scenario where calling a flow from CordaService function got me error like \r\n`java.lang.IllegalArgumentException: Transaction context is missing. This might happen if a suspendable method is not annotated with @Suspendable annotation.`\r\n\r\nwhereas calling the same flows from another flow using subflows worked fine. ","title":"serviceHub.startFlow from a cordaService class versus subFlow calling from Corda flow","body":"<p>Is there a difference in calling one flow as <strong>subflow</strong> from another corda flow versus calling the same flow from a cordaservice class as <strong>serviceHub.startFlow</strong>?</p>\n<p>In terms of thread utilization or suspending etc?</p>\n<p>I encountered a scenario where calling a flow from CordaService function got me error like\n<code>java.lang.IllegalArgumentException: Transaction context is missing. This might happen if a suspendable method is not annotated with @Suspendable annotation.</code></p>\n<p>whereas calling the same flows from another flow using subflows worked fine.</p>\n"},{"tags":["java","spring-boot","spring-data-cassandra","jakarta-validation"],"comments":[{"owner":{"account_id":25926563,"reputation":119,"user_id":19648355,"display_name":"Irremediable"},"score":0,"creation_date":1701106809,"post_id":77558870,"comment_id":136731405,"body_markdown":"Try to check whether isValid() method get invoked. If not, most likely you need to add @Validated on your controller","body":"Try to check whether isValid() method get invoked. If not, most likely you need to add @Validated on your controller"}],"owner":{"account_id":42916,"reputation":22347,"user_id":125212,"accept_rate":52,"display_name":"Jackie"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1701106326,"creation_date":1701106326,"question_id":77558870,"body_markdown":"I have the following...\r\n\r\n```java\r\n\r\n@Column\r\n@ContactInfo\r\nprivate String contactInfo;\r\n...\r\nprivate static final String EMAIL_PATTERN = &quot;^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\\\.[a-zA-Z]{2,6}$&quot;;\r\n    \r\n@Override\r\npublic boolean isValid(String value, ConstraintValidatorContext context) {\r\n        if (value == null) {\r\n            return false;\r\n        }\r\n        PhoneNumberUtil phoneUtil = PhoneNumberUtil.getInstance();\r\n        try {\r\n            Phonenumber.PhoneNumber phoneNumber = phoneUtil.parse(value, &quot;US&quot;); // Specify default country code\r\n            if (phoneUtil.isValidNumber(phoneNumber)) {\r\n                return true; // Valid phone number\r\n            }\r\n        } catch (Exception e) {\r\n            // Not a valid phone number, try email next\r\n        }\r\n\r\n        // Next, try to validate as an email\r\n        return Pattern.matches(EMAIL_PATTERN, value);\r\n}\r\n\r\n@PostMapping(consumes = MediaType.APPLICATION_FORM_URLENCODED_VALUE)\r\npublic void addContact(@Valid PotentialContact contact) {\r\n        contact.setId(Uuids.timeBased());\r\n        potentialContactRepo.save(contact);\r\n}\r\n```\r\n\r\nBut when I run and pass sadsadsadsadsadas as contact info like this...\r\n\r\n```\r\nPOST http://localhost:8080/contact\r\n200\r\n36 ms\r\nPOST /contact HTTP/1.1\r\nUser-Agent: PostmanRuntime/7.31.0\r\nAccept: */*\r\nCache-Control: no-cache\r\nHost: localhost:8080\r\nAccept-Encoding: gzip, deflate, br\r\nConnection: keep-alive\r\nContent-Type: application/x-www-form-urlencoded\r\nContent-Length: 109\r\nCookie: JSESSIONID=5CF0280370CFA0403A4645392E34A907\r\n \r\nname=sadsadsadsadsadas&amp;contactInfo=sadsadsadsadsadas&amp;location=sadsadsadsadsadas&amp;description=sadsadsadsadsadas\r\n \r\nHTTP/1.1 200 OK\r\n```\r\n\r\nI would expect to get a 400 but instead I get a 200. What am I missing? Is there a more native way to handle this in Spring?","title":"How do I properly fail a validation of spring data cassandra using jakarta validations when passed to controller?","body":"<p>I have the following...</p>\n<pre class=\"lang-java prettyprint-override\"><code>\n@Column\n@ContactInfo\nprivate String contactInfo;\n...\nprivate static final String EMAIL_PATTERN = &quot;^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\\\.[a-zA-Z]{2,6}$&quot;;\n    \n@Override\npublic boolean isValid(String value, ConstraintValidatorContext context) {\n        if (value == null) {\n            return false;\n        }\n        PhoneNumberUtil phoneUtil = PhoneNumberUtil.getInstance();\n        try {\n            Phonenumber.PhoneNumber phoneNumber = phoneUtil.parse(value, &quot;US&quot;); // Specify default country code\n            if (phoneUtil.isValidNumber(phoneNumber)) {\n                return true; // Valid phone number\n            }\n        } catch (Exception e) {\n            // Not a valid phone number, try email next\n        }\n\n        // Next, try to validate as an email\n        return Pattern.matches(EMAIL_PATTERN, value);\n}\n\n@PostMapping(consumes = MediaType.APPLICATION_FORM_URLENCODED_VALUE)\npublic void addContact(@Valid PotentialContact contact) {\n        contact.setId(Uuids.timeBased());\n        potentialContactRepo.save(contact);\n}\n</code></pre>\n<p>But when I run and pass sadsadsadsadsadas as contact info like this...</p>\n<pre><code>POST http://localhost:8080/contact\n200\n36 ms\nPOST /contact HTTP/1.1\nUser-Agent: PostmanRuntime/7.31.0\nAccept: */*\nCache-Control: no-cache\nHost: localhost:8080\nAccept-Encoding: gzip, deflate, br\nConnection: keep-alive\nContent-Type: application/x-www-form-urlencoded\nContent-Length: 109\nCookie: JSESSIONID=5CF0280370CFA0403A4645392E34A907\n \nname=sadsadsadsadsadas&amp;contactInfo=sadsadsadsadsadas&amp;location=sadsadsadsadsadas&amp;description=sadsadsadsadsadas\n \nHTTP/1.1 200 OK\n</code></pre>\n<p>I would expect to get a 400 but instead I get a 200. What am I missing? Is there a more native way to handle this in Spring?</p>\n"},{"tags":["java","android","xml","kotlin","android-studio"],"owner":{"account_id":28193143,"reputation":39,"user_id":21548222,"display_name":"siflJebatkundy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":1,"is_answered":false,"view_count":15,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":0,"score":-2,"last_activity_date":1701106200,"creation_date":1701106200,"question_id":77558853,"body_markdown":"I have an issue with animations on some android devices. \r\n\r\nFor example I have Infinix X6516 where all animations are working fine. Then I have 8A and there is not working a single animation. To be more precise, animations such as PopupWindow.setAnimationStyle() or ActivityOptions.makeCustomAnimation() and so on. Does anybody has solution for this? Ive seen a case https://stackoverflow.com/questions/11904656/animation-not-working-on-all-devices, but I found no answer for my this.","title":"Animations not working on all android devices","body":"<p>I have an issue with animations on some android devices.</p>\n<p>For example I have Infinix X6516 where all animations are working fine. Then I have 8A and there is not working a single animation. To be more precise, animations such as PopupWindow.setAnimationStyle() or ActivityOptions.makeCustomAnimation() and so on. Does anybody has solution for this? Ive seen a case <a href=\"https://stackoverflow.com/questions/11904656/animation-not-working-on-all-devices\">Animation not working on all devices</a>, but I found no answer for my this.</p>\n"},{"tags":["java","project-reactor"],"comments":[{"owner":{"account_id":8986202,"reputation":194,"user_id":6699701,"display_name":"Amol Gharpure"},"score":0,"creation_date":1701096274,"post_id":77557671,"comment_id":136729162,"body_markdown":"check JMH Benchmarking Project :- https://github.com/openjdk/jmh","body":"check JMH Benchmarking Project :- <a href=\"https://github.com/openjdk/jmh\" rel=\"nofollow noreferrer\">github.com/openjdk/jmh</a>"},{"owner":{"account_id":18241932,"reputation":33,"user_id":13278813,"display_name":"piotrd"},"score":0,"creation_date":1701097446,"post_id":77557671,"comment_id":136729398,"body_markdown":"@AmolGharpure thanks for commenting. I am looking for a tool that will work as jprofiler/asyncprofiler in nin-reactive apps. More like flame graphs that show which methods take most time and where are the hotspots that I could optimize. As far as I know jmh is a benchmark that can be used to find whether given workflow meets timing criteria, but it will not find the exact spot that is responsible for poor performance","body":"@AmolGharpure thanks for commenting. I am looking for a tool that will work as jprofiler/asyncprofiler in nin-reactive apps. More like flame graphs that show which methods take most time and where are the hotspots that I could optimize. As far as I know jmh is a benchmark that can be used to find whether given workflow meets timing criteria, but it will not find the exact spot that is responsible for poor performance"},{"owner":{"account_id":372682,"reputation":22426,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1701099536,"post_id":77557671,"comment_id":136729940,"body_markdown":"Questions asking us to [recommend or find a book](https://stackoverflow.com/help/on-topic), tool, software library, tutorial or other off-site resource are off-topic for Stack Overflow as they tend to attract opinionated answers and spam. Instead, describe the problem and what has been done so far to solve it.","body":"Questions asking us to <a href=\"https://stackoverflow.com/help/on-topic\">recommend or find a book</a>, tool, software library, tutorial or other off-site resource are off-topic for Stack Overflow as they tend to attract opinionated answers and spam. Instead, describe the problem and what has been done so far to solve it."},{"owner":{"account_id":18241932,"reputation":33,"user_id":13278813,"display_name":"piotrd"},"score":0,"creation_date":1701103042,"post_id":77557671,"comment_id":136730676,"body_markdown":"@aled I appreciate your answer, but have you really read my question? The problem: finding hotspots in reactive application. What has been tried: I have used typical tools like visualVm to sample cpu. But the nature of reactive application makes it unusable","body":"@aled I appreciate your answer, but have you really read my question? The problem: finding hotspots in reactive application. What has been tried: I have used typical tools like visualVm to sample cpu. But the nature of reactive application makes it unusable"},{"owner":{"account_id":372682,"reputation":22426,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1701103773,"post_id":77557671,"comment_id":136730832,"body_markdown":"I was answering more to your previous comment: &quot;I am looking for a tool that will work as jprofiler/asyncprofiler in nin-reactive apps&quot;","body":"I was answering more to your previous comment: &quot;I am looking for a tool that will work as jprofiler/asyncprofiler in nin-reactive apps&quot;"}],"answers":[{"tags":[],"owner":{"account_id":1698812,"reputation":50,"user_id":1559510,"display_name":"Cojy"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1701105952,"creation_date":1701101878,"answer_id":77558393,"question_id":77557671,"body_markdown":"Maybe one solution could be to use a tracing system like sleuth/zipkin that would give you times across services and external calls.\r\nThen track down which service takes time depending on the request and then track with your visualvm\r\nAlso the zipkin can be used on prod afterwards if needed to keep tracking bottlenecks\r\n\r\nFor example a /first calls a /second service, all in reactor. The first has a sleep of 1.5s to simulate a slow response time.\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/AvCNt.png\r\n\r\n**To add specific method tracking**\r\neither register a bean\r\n\r\n    @Bean\r\n        public ObservedAspect observedAspect(ObservationRegistry observationRegistry) {\r\n            return new ObservedAspect(observationRegistry);\r\n        }\r\n\r\nthen you can use the **@Observed** annotation on the method you want to track.\r\n\r\nor use a decorator around a specific method (or directly create in the method but it&#39;s not clean)\r\n\r\n    Observation observation = Observation.start(&quot;MyImpl.findOne&quot;, observationRegistry);\r\n\r\nand do not forget to observation.stop()","title":"Performance profiling java reactive application","body":"<p>Maybe one solution could be to use a tracing system like sleuth/zipkin that would give you times across services and external calls.\nThen track down which service takes time depending on the request and then track with your visualvm\nAlso the zipkin can be used on prod afterwards if needed to keep tracking bottlenecks</p>\n<p>For example a /first calls a /second service, all in reactor. The first has a sleep of 1.5s to simulate a slow response time.\n<a href=\"https://i.stack.imgur.com/AvCNt.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/AvCNt.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>To add specific method tracking</strong>\neither register a bean</p>\n<pre><code>@Bean\n    public ObservedAspect observedAspect(ObservationRegistry observationRegistry) {\n        return new ObservedAspect(observationRegistry);\n    }\n</code></pre>\n<p>then you can use the <strong>@Observed</strong> annotation on the method you want to track.</p>\n<p>or use a decorator around a specific method (or directly create in the method but it's not clean)</p>\n<pre><code>Observation observation = Observation.start(&quot;MyImpl.findOne&quot;, observationRegistry);\n</code></pre>\n<p>and do not forget to observation.stop()</p>\n"}],"owner":{"account_id":18241932,"reputation":33,"user_id":13278813,"display_name":"piotrd"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":1,"is_answered":true,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77558393,"answer_count":1,"score":0,"last_activity_date":1701105952,"creation_date":1701095451,"question_id":77557671,"body_markdown":"JVM has a great set of tools to find the hotspots in your application.\r\nBy enabling JMX and connecting with JProfiler / VisualVm we can quite quickly find methods that take most time in our workflow. \r\n\r\nHowever, reactive application (project-reactor) slices our workflow in unnamed tasks that may accept random threads. What is more, waiting for external resources is done in reactive manner, so we won&#39;t see that given access has blocked our workflow. \r\n\r\nDo you have any ideas how to profile reactive application efficiently?\r\nI would like to avoid inserting some probes in code and doing it by logging. \r\n\r\nProject reactor solved problem with shuttered stacktraces by introducing agent that gathers stacktraces when bubbling the error up, thus we can see the whole image of where was our program at the time of an error.\r\n\r\nWhat about profiling? Although methods that take some time by themselves (like fanaout when iterating on collections) will be spotted, most common problems that involve db or external services access will be not. \r\n\r\nLooking for your opinions.\r\nRegards","title":"Performance profiling java reactive application","body":"<p>JVM has a great set of tools to find the hotspots in your application.\nBy enabling JMX and connecting with JProfiler / VisualVm we can quite quickly find methods that take most time in our workflow.</p>\n<p>However, reactive application (project-reactor) slices our workflow in unnamed tasks that may accept random threads. What is more, waiting for external resources is done in reactive manner, so we won't see that given access has blocked our workflow.</p>\n<p>Do you have any ideas how to profile reactive application efficiently?\nI would like to avoid inserting some probes in code and doing it by logging.</p>\n<p>Project reactor solved problem with shuttered stacktraces by introducing agent that gathers stacktraces when bubbling the error up, thus we can see the whole image of where was our program at the time of an error.</p>\n<p>What about profiling? Although methods that take some time by themselves (like fanaout when iterating on collections) will be spotted, most common problems that involve db or external services access will be not.</p>\n<p>Looking for your opinions.\nRegards</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":785560,"reputation":14879,"user_id":845414,"display_name":"Johannes Kuhn"},"score":4,"creation_date":1701105802,"post_id":77558789,"comment_id":136731243,"body_markdown":"https://docs.oracle.com/javase/specs/jls/se21/html/jls-9.html#jls-9.8","body":"<a href=\"https://docs.oracle.com/javase/specs/jls/se21/html/jls-9.html#jls-9.8\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/specs/jls/se21/html/jls-9.html#jls-9.&zwnj;&#8203;8</a>"},{"owner":{"account_id":1992310,"reputation":11172,"user_id":1786065,"accept_rate":91,"display_name":"Rogue"},"score":1,"creation_date":1701106870,"post_id":77558789,"comment_id":136731418,"body_markdown":"The `Comparator` does not represent `Object#equals`, that method exists for _every_ object. Rather, `Comparator&lt;T&gt;` provides an `int compare(T left, T right);` abstract method (and explicitly re-states the `#equals` method). Note that you can have more than one method in a functional interface, but they must be static or defaulted. You can only have _one_ abstract method for an interface to be a _functional_ interface. The JLS link above adds an exception: public methods of `Object` are excluded (so 1:1 re-declaration of them will not count).","body":"The <code>Comparator</code> does not represent <code>Object#equals</code>, that method exists for <i>every</i> object. Rather, <code>Comparator&lt;T&gt;</code> provides an <code>int compare(T left, T right);</code> abstract method (and explicitly re-states the <code>#equals</code> method). Note that you can have more than one method in a functional interface, but they must be static or defaulted. You can only have <i>one</i> abstract method for an interface to be a <i>functional</i> interface. The JLS link above adds an exception: public methods of <code>Object</code> are excluded (so 1:1 re-declaration of them will not count)."},{"owner":{"account_id":18348479,"reputation":1986,"user_id":13363175,"display_name":"notaorb"},"score":0,"creation_date":1701109509,"post_id":77558789,"comment_id":136731886,"body_markdown":"@Rogue https://docs.oracle.com/javase/8/docs/api/java/util/Comparator.html indicates equal and compare are both abstract so doesn’t Comparator have two abstract methods?","body":"@Rogue <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Comparator.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/8/docs/api/java/util/Comparator.html</a> indicates equal and compare are both abstract so doesn’t Comparator have two abstract methods?"},{"owner":{"account_id":1992310,"reputation":11172,"user_id":1786065,"accept_rate":91,"display_name":"Rogue"},"score":0,"creation_date":1701112342,"post_id":77558789,"comment_id":136732342,"body_markdown":"@notaorb hence the exception from the JLS link: public methods of `Object` are excluded from this &quot;1 abstract method&quot; rule. Since `boolean equals(Object other)` is defined in `Object` (and no Object method is abstract to begin with, but that&#39;s an aside), then the abstract method `boolean equals(Object other);` isn&#39;t counted: it&#39;s already implicitly covered/implemented by anything that could implement the interface, including lambdas.","body":"@notaorb hence the exception from the JLS link: public methods of <code>Object</code> are excluded from this &quot;1 abstract method&quot; rule. Since <code>boolean equals(Object other)</code> is defined in <code>Object</code> (and no Object method is abstract to begin with, but that&#39;s an aside), then the abstract method <code>boolean equals(Object other);</code> isn&#39;t counted: it&#39;s already implicitly covered/implemented by anything that could implement the interface, including lambdas."}],"owner":{"account_id":18348479,"reputation":1986,"user_id":13363175,"display_name":"notaorb"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1701105634,"creation_date":1701105634,"question_id":77558789,"body_markdown":"What happens if `Predicate&lt;T&gt;` contains multiple methods?  It&#39;s my understanding if they have the same argument signature this is not allowed.\r\n\r\nI ask because I&#39;m considering the `Comparator&lt;T&gt;` interface and it has multiple methods in the interface, but with different signatures.  I look at `TreeSet&lt;T&gt;` constructor `TreeSet(Comparator&lt;? super E&gt; comparator)` and it accepts a lambda, yet I&#39;m confused how that lambda represents `equals(Object obj)`.  Can anyone clarify this?\r\n\r\n    interface Predicate&lt;T&gt; {\r\n        boolean test(T t);\r\n    }\r\n    \r\n    public static void printPersons(\r\n        List&lt;Person&gt; roster, Predicate&lt;Person&gt; tester) {\r\n    \r\n        for (Person p : roster) {\r\n            if (tester.test(p)) {\r\n                p.printPerson();\r\n            }\r\n        }\r\n    }\r\n    \r\n    printPersons(\r\n        roster,\r\n        (Person p) -&gt; p.getGender() == Person.Sex.MALE\r\n            &amp;&amp; p.getAge() &gt;= 18\r\n            &amp;&amp; p.getAge() &lt;= 25\r\n    );\r\n\r\n","title":"Anonymous functions using interface with multiple methods?","body":"<p>What happens if <code>Predicate&lt;T&gt;</code> contains multiple methods?  It's my understanding if they have the same argument signature this is not allowed.</p>\n<p>I ask because I'm considering the <code>Comparator&lt;T&gt;</code> interface and it has multiple methods in the interface, but with different signatures.  I look at <code>TreeSet&lt;T&gt;</code> constructor <code>TreeSet(Comparator&lt;? super E&gt; comparator)</code> and it accepts a lambda, yet I'm confused how that lambda represents <code>equals(Object obj)</code>.  Can anyone clarify this?</p>\n<pre><code>interface Predicate&lt;T&gt; {\n    boolean test(T t);\n}\n\npublic static void printPersons(\n    List&lt;Person&gt; roster, Predicate&lt;Person&gt; tester) {\n\n    for (Person p : roster) {\n        if (tester.test(p)) {\n            p.printPerson();\n        }\n    }\n}\n\nprintPersons(\n    roster,\n    (Person p) -&gt; p.getGender() == Person.Sex.MALE\n        &amp;&amp; p.getAge() &gt;= 18\n        &amp;&amp; p.getAge() &lt;= 25\n);\n</code></pre>\n"},{"tags":["java","soap","digital-signature","xml-signature"],"owner":{"account_id":12696165,"reputation":27,"user_id":9224530,"display_name":"Michele Raso"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1701105442,"creation_date":1701084677,"question_id":77556545,"body_markdown":"hello i am developing a service for a SOAP call with x509 authentication and i need to sign the body and timestamp, but i can&#39;t get it to work java side while in SoapUI it does.\r\n\r\n\r\nThe error (with java code) is SSF_API_SIGNER_ERORS A signing opration not be performed or failed\r\n\r\n\r\nthe configuration in soapUi is this\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/HXtLp.png\r\n\r\nwhile my signature code is this\r\n\r\n\r\n          private void createDetachedSignature(SOAPElement signatureElement, PrivateKey privateKey, SOAPElement securityTokenReference, SOAPBody soapBody, SOAPElement timestamp) throws Exception {\r\n            \r\n            \r\n                String providerName = System.getProperty\r\n                        (&quot;jsr105Provider&quot;, &quot;org.jcp.xml.dsig.internal.dom.XMLDSigRI&quot;);\r\n                XMLSignatureFactory xmlSignatureFactory = XMLSignatureFactory.getInstance(&quot;DOM&quot;,\r\n                        (Provider) Class.forName(providerName).newInstance());\r\n            \r\n            \r\n                //Digest method\r\n                javax.xml.crypto.dsig.DigestMethod digestMethod = xmlSignatureFactory.newDigestMethod(&quot;http://www.w3.org/2000/09/xmldsig#sha1&quot;, null);\r\n                ArrayList&lt;Transform&gt; transformList = new ArrayList&lt;Transform&gt;();\r\n            \r\n            \r\n                //Transform\r\n                Transform envTransform = xmlSignatureFactory.newTransform(&quot;http://www.w3.org/2001/10/xml-exc-c14n#&quot;, (TransformParameterSpec) null);\r\n                transformList.add(envTransform);\r\n            \r\n            \r\n                //References\r\n            \r\n                ArrayList&lt;Reference&gt; refList = new ArrayList&lt;Reference&gt;();\r\n                Reference refTS = xmlSignatureFactory.newReference(&quot;#TS&quot;+UUID, digestMethod, transformList, null, null);\r\n                Reference refBody = xmlSignatureFactory.newReference(&quot;#Body&quot;+UUID, digestMethod, transformList, null, null);\r\n            \r\n            \r\n                refList.add(refBody);\r\n                refList.add(refTS);\r\n            \r\n            \r\n                javax.xml.crypto.dsig.CanonicalizationMethod cm = xmlSignatureFactory.newCanonicalizationMethod(&quot;http://www.w3.org/2001/10/xml-exc-c14n#&quot;,\r\n                        (C14NMethodParameterSpec) null);\r\n            \r\n                javax.xml.crypto.dsig.SignatureMethod sm = xmlSignatureFactory.newSignatureMethod(&quot;http://www.w3.org/2000/09/xmldsig#rsa-sha1&quot;, null);\r\n                SignedInfo signedInfo = xmlSignatureFactory.newSignedInfo(cm, sm, refList);\r\n            \r\n                signatureElement.setAttribute(&quot;Id&quot;, &quot;SIG&quot; + UUID);\r\n            \r\n                DOMSignContext signContext = new DOMSignContext(privateKey, signatureElement);\r\n                signContext.setDefaultNamespacePrefix(&quot;ds&quot;);\r\n                signContext.putNamespacePrefix(&quot;http://www.w3.org/2000/09/xmldsig#&quot;, &quot;ds&quot;);\r\n            \r\n            \r\n                //These are required for new Java versions\r\n                signContext.setIdAttributeNS\r\n                        (soapBody,\r\n                                &quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd&quot;, &quot;Id&quot;);\r\n            \r\n            \r\n                signContext.setIdAttributeNS\r\n                        (timestamp,\r\n                                &quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd&quot;, &quot;Id&quot;);\r\n            \r\n            \r\n                KeyInfoFactory keyFactory = KeyInfoFactory.getInstance();\r\n                DOMStructure domKeyInfo = new DOMStructure(securityTokenReference);\r\n                javax.xml.crypto.dsig.keyinfo.KeyInfo keyInfo = keyFactory.newKeyInfo(java.util.Collections.singletonList(domKeyInfo));\r\n                if (securityTokenReference instanceof Element) {\r\n                    Element keyInfoElement = (Element) securityTokenReference;\r\n                    keyInfoElement.setAttribute(&quot;Id&quot;, &quot;KI&quot; + UUID);\r\n                }\r\n                javax.xml.crypto.dsig.XMLSignature signature = xmlSignatureFactory.newXMLSignature(signedInfo, keyInfo);\r\n                signContext.setBaseURI(&quot;&quot;);\r\n            \r\n            \r\n                signature.sign(signContext);\r\n                String signatureValue = getSignatureValueAsString(signatureElement);\r\n                System.out.println(&quot;Signature Value: &quot; + signatureValue);\r\n            \r\n            \r\n                Element canonicalizationMethodElement = (Element) signatureElement.getElementsByTagNameNS(&quot;http://www.w3.org/2000/09/xmldsig#&quot;, &quot;CanonicalizationMethod&quot;).item(0);\r\n                addInclusiveNamespaces(canonicalizationMethodElement, &quot;soapenv urn&quot;);\r\n            \r\n                NodeList referenceNodes = signatureElement.getElementsByTagNameNS(&quot;http://www.w3.org/2000/09/xmldsig#&quot;, &quot;Reference&quot;);\r\n                for (int i = 0; i &lt; referenceNodes.getLength(); i++) {\r\n                    Element referenceElement = (Element) referenceNodes.item(i);\r\n                    Element transformsElement = (Element) referenceElement.getElementsByTagNameNS(&quot;http://www.w3.org/2000/09/xmldsig#&quot;, &quot;Transforms&quot;).item(0);\r\n                    Element transformElement = (Element) transformsElement.getElementsByTagNameNS(&quot;http://www.w3.org/2000/09/xmldsig#&quot;, &quot;Transform&quot;).item(0);\r\n            \r\n                    addInclusiveNamespaces(transformElement, &quot;wsse soapenv urn&quot;);\r\n                }\r\n            \r\n            \r\n            }\r\n\r\nI tried to compare the two requests and now I attach them to you\r\n\r\n\r\nSOAP UI REQUEST \r\n\r\n            &lt;soapenv:Envelope xmlns:soapenv=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot;\r\n            xmlns:urn=&quot;urn:sap-com:document:sap:rfc:functions&quot;&gt;\r\n            &lt;soapenv:Header&gt;\r\n                &lt;wsse:Security\r\n                    xmlns:wsse=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd&quot;\r\n                    xmlns:wsu=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd&quot;&gt;\r\n                    &lt;wsse:BinarySecurityToken\r\n                        EncodingType=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-soap-message-security-1.0#Base64Binary&quot;\r\n                        ValueType=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-x509-token-profile-1.0#X509v3&quot;\r\n                        wsu:Id=&quot;X509-8C92EF6DC231D5F4321700816423308691&quot;&gt;\r\n                        MIIIEjCCBfqgAwIBAgITHQAAZ/wkXidRhqKJ2wADAABn/DANBgkqhkiG...........&lt;/wsse:BinarySecurityToken&gt;\r\n                    &lt;wsu:Timestamp wsu:Id=&quot;TS-8C92EF6DC231D5F4321700816423307690&quot;&gt;\r\n                        &lt;wsu:Created&gt;2023-11-24T09:00:23Z&lt;/wsu:Created&gt;\r\n                        &lt;wsu:Expires&gt;2024-02-15T17:00:23Z&lt;/wsu:Expires&gt;\r\n                    &lt;/wsu:Timestamp&gt;\r\n                    &lt;ds:Signature Id=&quot;SIG-8C92EF6DC231D5F4321700816423348695&quot;\r\n                        xmlns:ds=&quot;http://www.w3.org/2000/09/xmldsig#&quot;&gt;\r\n                        &lt;ds:SignedInfo&gt;\r\n                            &lt;ds:CanonicalizationMethod Algorithm=&quot;http://www.w3.org/2001/10/xml-exc-c14n#&quot;&gt;\r\n                                &lt;ec:InclusiveNamespaces PrefixList=&quot;soapenv urn&quot;\r\n                                    xmlns:ec=&quot;http://www.w3.org/2001/10/xml-exc-c14n#&quot; /&gt;\r\n                            &lt;/ds:CanonicalizationMethod&gt;\r\n                            &lt;ds:SignatureMethod Algorithm=&quot;http://www.w3.org/2000/09/xmldsig#rsa-sha1&quot; /&gt;\r\n                            &lt;ds:Reference URI=&quot;#TS-8C92EF6DC231D5F4321700816423307690&quot;&gt;\r\n                                &lt;ds:Transforms&gt;\r\n                                    &lt;ds:Transform Algorithm=&quot;http://www.w3.org/2001/10/xml-exc-c14n#&quot;&gt;\r\n                                        &lt;ec:InclusiveNamespaces PrefixList=&quot;wsse soapenv urn&quot;\r\n                                            xmlns:ec=&quot;http://www.w3.org/2001/10/xml-exc-c14n#&quot; /&gt;\r\n                                    &lt;/ds:Transform&gt;\r\n                                &lt;/ds:Transforms&gt;\r\n                                &lt;ds:DigestMethod Algorithm=&quot;http://www.w3.org/2000/09/xmldsig#sha1&quot; /&gt;\r\n                                &lt;ds:DigestValue&gt;7KhZ1yTPuNhQ7OtTn32HcJQQ04U=&lt;/ds:DigestValue&gt;\r\n                            &lt;/ds:Reference&gt;\r\n                            &lt;ds:Reference URI=&quot;#id-8C92EF6DC231D5F4321700816423308694&quot;&gt;\r\n                                &lt;ds:Transforms&gt;\r\n                                    &lt;ds:Transform Algorithm=&quot;http://www.w3.org/2001/10/xml-exc-c14n#&quot;&gt;\r\n                                        &lt;ec:InclusiveNamespaces PrefixList=&quot;&quot;\r\n                                            xmlns:ec=&quot;http://www.w3.org/2001/10/xml-exc-c14n#&quot; /&gt;\r\n                                    &lt;/ds:Transform&gt;\r\n                                &lt;/ds:Transforms&gt;\r\n                                &lt;ds:DigestMethod Algorithm=&quot;http://www.w3.org/2000/09/xmldsig#sha1&quot; /&gt;\r\n                                &lt;ds:DigestValue&gt;t5f22r+WwrehIN/rbI7EFwLq7tM=&lt;/ds:DigestValue&gt;\r\n                            &lt;/ds:Reference&gt;\r\n                        &lt;/ds:SignedInfo&gt;\r\n                        &lt;ds:SignatureValue&gt;\r\n                            KRttsmdFmqCRQyTmo6/Cgs1Vj8EZ1y9YbObETjtcvhNQUBRny7tIKZE3bH4TwR69L2x0MsosaAcefeuT/OkowAa............&lt;/ds:SignatureValue&gt;\r\n                        &lt;ds:KeyInfo Id=&quot;KI-8C92EF6DC231D5F4321700816423308692&quot;&gt;\r\n                            &lt;wsse:SecurityTokenReference wsu:Id=&quot;STR-8C92EF6DC231D5F4321700816423308693&quot;&gt;\r\n                                &lt;wsse:Reference URI=&quot;#X509-8C92EF6DC231D5F4321700816423308691&quot;\r\n                                    ValueType=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-x509-token-profile-1.0#X509v3&quot; /&gt;\r\n                            &lt;/wsse:SecurityTokenReference&gt;\r\n                        &lt;/ds:KeyInfo&gt;\r\n                    &lt;/ds:Signature&gt;\r\n                &lt;/wsse:Security&gt;\r\n            &lt;/soapenv:Header&gt;\r\n            &lt;soapenv:Body wsu:Id=&quot;id-8C92EF6DC231D5F4321700816423308694&quot;\r\n                xmlns:wsu=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd&quot;&gt;\r\n                &lt;urn:SCHEMA_CC&gt;\r\n                    &lt;IV_BP&gt;3960915933&lt;/IV_BP&gt;\r\n                &lt;/urn:SCHEMA_CC&gt;\r\n            &lt;/soapenv:Body&gt;\r\n        &lt;/soapenv:Envelope&gt;\r\n\r\n\r\nMy request java \r\n\r\n \r\n\r\n                &lt;soapenv:Envelope xmlns:soapenv=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot;\r\n                xmlns:urn=&quot;urn:sap-com:document:sap:rfc:functions&quot;&gt;\r\n                &lt;soapenv:Header&gt;\r\n                    &lt;wsse:Security\r\n                        xmlns:wsse=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd&quot;\r\n                        xmlns:wsu=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd&quot;\r\n                        Id=&quot;SIG-1B1352404FC17AFA99AD1B962FA2A67E&quot;&gt;\r\n                        &lt;wsu:Timestamp wsu:Id=&quot;TS-1B1352404FC17AFA99AD1B962FA2A67E&quot;&gt;\r\n                            &lt;wsu:Created&gt;2023-11-24T08:18:32Z&lt;/wsu:Created&gt;\r\n                            &lt;wsu:Expires&gt;2023-11-24T08:19:02Z&lt;/wsu:Expires&gt;\r\n                        &lt;/wsu:Timestamp&gt;\r\n                        &lt;wsse:BinarySecurityToken\r\n                            EncodingType=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-soap-message-security-1.0#Base64Binary&quot;\r\n                            ValueType=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-x509-token-profile-1.0#X509v3&quot;\r\n                            wsu:Id=&quot;X509Token-1B1352404FC17AFA99AD1B962FA2A67E&quot;&gt;\r\n                            MIIIEjCCBfqgAwIBAgITHQAAZ/wkXidRhqKJ2wADAABn..........&lt;/wsse:BinarySecurityToken&gt;\r\n                        &lt;ds:Signature xmlns:ds=&quot;http://www.w3.org/2000/09/xmldsig#&quot;&gt;\r\n                            &lt;ds:SignedInfo&gt;\r\n                                &lt;ds:CanonicalizationMethod Algorithm=&quot;http://www.w3.org/2001/10/xml-exc-c14n#&quot;&gt;\r\n                                    &lt;ec:InclusiveNamespaces xmlns:ec=&quot;http://www.w3.org/2001/10/xml-exc-c14n#&quot;\r\n                                        PrefixList=&quot;soapenv urn&quot; /&gt;\r\n                                &lt;/ds:CanonicalizationMethod&gt;\r\n                                &lt;ds:SignatureMethod Algorithm=&quot;http://www.w3.org/2000/09/xmldsig#rsa-sha1&quot; /&gt;\r\n                                &lt;ds:Reference URI=&quot;#Body-1B1352404FC17AFA99AD1B962FA2A67E&quot;&gt;\r\n                                    &lt;ds:Transforms&gt;\r\n                                        &lt;ds:Transform Algorithm=&quot;http://www.w3.org/2001/10/xml-exc-c14n#&quot;&gt;\r\n                                            &lt;ec:InclusiveNamespaces\r\n                                                xmlns:ec=&quot;http://www.w3.org/2001/10/xml-exc-c14n#&quot;\r\n                                                PrefixList=&quot;wsse soapenv urn&quot; /&gt;\r\n                                        &lt;/ds:Transform&gt;\r\n                                    &lt;/ds:Transforms&gt;\r\n                                    &lt;ds:DigestMethod Algorithm=&quot;http://www.w3.org/2000/09/xmldsig#sha1&quot; /&gt;\r\n                                    &lt;ds:DigestValue&gt;qOQ+Nv9QAe63RePMKZkCfn2a8xI=&lt;/ds:DigestValue&gt;\r\n                                &lt;/ds:Reference&gt;\r\n                                &lt;ds:Reference URI=&quot;#TS-1B1352404FC17AFA99AD1B962FA2A67E&quot;&gt;\r\n                                    &lt;ds:Transforms&gt;\r\n                                        &lt;ds:Transform Algorithm=&quot;http://www.w3.org/2001/10/xml-exc-c14n#&quot;&gt;\r\n                                            &lt;ec:InclusiveNamespaces\r\n                                                xmlns:ec=&quot;http://www.w3.org/2001/10/xml-exc-c14n#&quot;\r\n                                                PrefixList=&quot;wsse soapenv urn&quot; /&gt;\r\n                                        &lt;/ds:Transform&gt;\r\n                                    &lt;/ds:Transforms&gt;\r\n                                    &lt;ds:DigestMethod Algorithm=&quot;http://www.w3.org/2000/09/xmldsig#sha1&quot; /&gt;\r\n                                    &lt;ds:DigestValue&gt;grbt4GpvYhKKUaetcW2HHMm91Mw=&lt;/ds:DigestValue&gt;\r\n                                &lt;/ds:Reference&gt;\r\n                            &lt;/ds:SignedInfo&gt;\r\n                            &lt;ds:SignatureValue&gt;agesPe4aOZPE9m1aI17MDz+oE5V7YNk7ox6q1WvmHWjd7EdH4XdqVq62dMnqkE2RRbI5TafX1qnK&amp;#13;\r\n                                udGLnMFcZu/gIYMUYmZ1RrwO6y39tLDWii8hEIZMYj/jIzAqi6d1jXh8GOjtmflYnIsRnidFgokV&amp;#13;\r\n                                /fgoMn7c548QlvEPyCokgFlS/aF4OF5uKqnb/yJ2ilRbeJBlG9QCO5rEUGmgeZ0untABzP+w76yg&amp;#13;\r\n                                PTkPaDTC8UHDQsG4XWMTYL+dyGfnHpYdqz5v+4BI53KfG0V7eqbdCZj9dzYN2MEel1NrgqQP2uQ8&amp;#13;\r\n                                .........&lt;/ds:SignatureValue&gt;\r\n                            &lt;ds:KeyInfo&gt;\r\n                                &lt;wsse:SecurityTokenReference Id=&quot;KI-1B1352404FC17AFA99AD1B962FA2A67E&quot;\r\n                                    wsu:Id=&quot;STR-1B1352404FC17AFA99AD1B962FA2A67E&quot;&gt;\r\n                                    &lt;wsse:Reference URI=&quot;#X509Token-1B1352404FC17AFA99AD1B962FA2A67E&quot;\r\n                                        ValueType=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-x509-token-profile-1.0#X509v3&quot; /&gt;\r\n                                &lt;/wsse:SecurityTokenReference&gt;\r\n                            &lt;/ds:KeyInfo&gt;\r\n                        &lt;/ds:Signature&gt;\r\n                    &lt;/wsse:Security&gt;\r\n                &lt;/soapenv:Header&gt;\r\n                &lt;soapenv:Body\r\n                    xmlns:wsu=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd&quot;\r\n                    wsu:Id=&quot;Body-1B1352404FC17AFA99AD1B962FA2A67E&quot;&gt;\r\n                    &lt;urn:GET_SCHEMA_CC xmlns:urn=&quot;http://www.example.com/urn&quot;&gt;\r\n                            &lt;IV_BP&gt;3960915933&lt;/IV_BP&gt;\r\n                    \r\n                    &lt;/urn:GET_SCHEMA_CC&gt;\r\n                &lt;/soapenv:Body&gt;\r\n            &lt;/soapenv:Envelope&gt;\r\n\r\nThe way to put the certificate in the securityBinaryToken seems correct to me, while the signature I don&#39;t know if it is the correct way to do it.\r\n\r\n","title":"SOAP SW-SECURITY SIGNATURE BINARY_TOKEN AND TIMESTAMP","body":"<p>hello i am developing a service for a SOAP call with x509 authentication and i need to sign the body and timestamp, but i can't get it to work java side while in SoapUI it does.</p>\n<p>The error (with java code) is SSF_API_SIGNER_ERORS A signing opration not be performed or failed</p>\n<p>the configuration in soapUi is this</p>\n<p><a href=\"https://i.stack.imgur.com/HXtLp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HXtLp.png\" alt=\"enter image description here\" /></a></p>\n<p>while my signature code is this</p>\n<pre><code>      private void createDetachedSignature(SOAPElement signatureElement, PrivateKey privateKey, SOAPElement securityTokenReference, SOAPBody soapBody, SOAPElement timestamp) throws Exception {\n        \n        \n            String providerName = System.getProperty\n                    (&quot;jsr105Provider&quot;, &quot;org.jcp.xml.dsig.internal.dom.XMLDSigRI&quot;);\n            XMLSignatureFactory xmlSignatureFactory = XMLSignatureFactory.getInstance(&quot;DOM&quot;,\n                    (Provider) Class.forName(providerName).newInstance());\n        \n        \n            //Digest method\n            javax.xml.crypto.dsig.DigestMethod digestMethod = xmlSignatureFactory.newDigestMethod(&quot;http://www.w3.org/2000/09/xmldsig#sha1&quot;, null);\n            ArrayList&lt;Transform&gt; transformList = new ArrayList&lt;Transform&gt;();\n        \n        \n            //Transform\n            Transform envTransform = xmlSignatureFactory.newTransform(&quot;http://www.w3.org/2001/10/xml-exc-c14n#&quot;, (TransformParameterSpec) null);\n            transformList.add(envTransform);\n        \n        \n            //References\n        \n            ArrayList&lt;Reference&gt; refList = new ArrayList&lt;Reference&gt;();\n            Reference refTS = xmlSignatureFactory.newReference(&quot;#TS&quot;+UUID, digestMethod, transformList, null, null);\n            Reference refBody = xmlSignatureFactory.newReference(&quot;#Body&quot;+UUID, digestMethod, transformList, null, null);\n        \n        \n            refList.add(refBody);\n            refList.add(refTS);\n        \n        \n            javax.xml.crypto.dsig.CanonicalizationMethod cm = xmlSignatureFactory.newCanonicalizationMethod(&quot;http://www.w3.org/2001/10/xml-exc-c14n#&quot;,\n                    (C14NMethodParameterSpec) null);\n        \n            javax.xml.crypto.dsig.SignatureMethod sm = xmlSignatureFactory.newSignatureMethod(&quot;http://www.w3.org/2000/09/xmldsig#rsa-sha1&quot;, null);\n            SignedInfo signedInfo = xmlSignatureFactory.newSignedInfo(cm, sm, refList);\n        \n            signatureElement.setAttribute(&quot;Id&quot;, &quot;SIG&quot; + UUID);\n        \n            DOMSignContext signContext = new DOMSignContext(privateKey, signatureElement);\n            signContext.setDefaultNamespacePrefix(&quot;ds&quot;);\n            signContext.putNamespacePrefix(&quot;http://www.w3.org/2000/09/xmldsig#&quot;, &quot;ds&quot;);\n        \n        \n            //These are required for new Java versions\n            signContext.setIdAttributeNS\n                    (soapBody,\n                            &quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd&quot;, &quot;Id&quot;);\n        \n        \n            signContext.setIdAttributeNS\n                    (timestamp,\n                            &quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd&quot;, &quot;Id&quot;);\n        \n        \n            KeyInfoFactory keyFactory = KeyInfoFactory.getInstance();\n            DOMStructure domKeyInfo = new DOMStructure(securityTokenReference);\n            javax.xml.crypto.dsig.keyinfo.KeyInfo keyInfo = keyFactory.newKeyInfo(java.util.Collections.singletonList(domKeyInfo));\n            if (securityTokenReference instanceof Element) {\n                Element keyInfoElement = (Element) securityTokenReference;\n                keyInfoElement.setAttribute(&quot;Id&quot;, &quot;KI&quot; + UUID);\n            }\n            javax.xml.crypto.dsig.XMLSignature signature = xmlSignatureFactory.newXMLSignature(signedInfo, keyInfo);\n            signContext.setBaseURI(&quot;&quot;);\n        \n        \n            signature.sign(signContext);\n            String signatureValue = getSignatureValueAsString(signatureElement);\n            System.out.println(&quot;Signature Value: &quot; + signatureValue);\n        \n        \n            Element canonicalizationMethodElement = (Element) signatureElement.getElementsByTagNameNS(&quot;http://www.w3.org/2000/09/xmldsig#&quot;, &quot;CanonicalizationMethod&quot;).item(0);\n            addInclusiveNamespaces(canonicalizationMethodElement, &quot;soapenv urn&quot;);\n        \n            NodeList referenceNodes = signatureElement.getElementsByTagNameNS(&quot;http://www.w3.org/2000/09/xmldsig#&quot;, &quot;Reference&quot;);\n            for (int i = 0; i &lt; referenceNodes.getLength(); i++) {\n                Element referenceElement = (Element) referenceNodes.item(i);\n                Element transformsElement = (Element) referenceElement.getElementsByTagNameNS(&quot;http://www.w3.org/2000/09/xmldsig#&quot;, &quot;Transforms&quot;).item(0);\n                Element transformElement = (Element) transformsElement.getElementsByTagNameNS(&quot;http://www.w3.org/2000/09/xmldsig#&quot;, &quot;Transform&quot;).item(0);\n        \n                addInclusiveNamespaces(transformElement, &quot;wsse soapenv urn&quot;);\n            }\n        \n        \n        }\n</code></pre>\n<p>I tried to compare the two requests and now I attach them to you</p>\n<p>SOAP UI REQUEST</p>\n<pre><code>        &lt;soapenv:Envelope xmlns:soapenv=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot;\n        xmlns:urn=&quot;urn:sap-com:document:sap:rfc:functions&quot;&gt;\n        &lt;soapenv:Header&gt;\n            &lt;wsse:Security\n                xmlns:wsse=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd&quot;\n                xmlns:wsu=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd&quot;&gt;\n                &lt;wsse:BinarySecurityToken\n                    EncodingType=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-soap-message-security-1.0#Base64Binary&quot;\n                    ValueType=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-x509-token-profile-1.0#X509v3&quot;\n                    wsu:Id=&quot;X509-8C92EF6DC231D5F4321700816423308691&quot;&gt;\n                    MIIIEjCCBfqgAwIBAgITHQAAZ/wkXidRhqKJ2wADAABn/DANBgkqhkiG...........&lt;/wsse:BinarySecurityToken&gt;\n                &lt;wsu:Timestamp wsu:Id=&quot;TS-8C92EF6DC231D5F4321700816423307690&quot;&gt;\n                    &lt;wsu:Created&gt;2023-11-24T09:00:23Z&lt;/wsu:Created&gt;\n                    &lt;wsu:Expires&gt;2024-02-15T17:00:23Z&lt;/wsu:Expires&gt;\n                &lt;/wsu:Timestamp&gt;\n                &lt;ds:Signature Id=&quot;SIG-8C92EF6DC231D5F4321700816423348695&quot;\n                    xmlns:ds=&quot;http://www.w3.org/2000/09/xmldsig#&quot;&gt;\n                    &lt;ds:SignedInfo&gt;\n                        &lt;ds:CanonicalizationMethod Algorithm=&quot;http://www.w3.org/2001/10/xml-exc-c14n#&quot;&gt;\n                            &lt;ec:InclusiveNamespaces PrefixList=&quot;soapenv urn&quot;\n                                xmlns:ec=&quot;http://www.w3.org/2001/10/xml-exc-c14n#&quot; /&gt;\n                        &lt;/ds:CanonicalizationMethod&gt;\n                        &lt;ds:SignatureMethod Algorithm=&quot;http://www.w3.org/2000/09/xmldsig#rsa-sha1&quot; /&gt;\n                        &lt;ds:Reference URI=&quot;#TS-8C92EF6DC231D5F4321700816423307690&quot;&gt;\n                            &lt;ds:Transforms&gt;\n                                &lt;ds:Transform Algorithm=&quot;http://www.w3.org/2001/10/xml-exc-c14n#&quot;&gt;\n                                    &lt;ec:InclusiveNamespaces PrefixList=&quot;wsse soapenv urn&quot;\n                                        xmlns:ec=&quot;http://www.w3.org/2001/10/xml-exc-c14n#&quot; /&gt;\n                                &lt;/ds:Transform&gt;\n                            &lt;/ds:Transforms&gt;\n                            &lt;ds:DigestMethod Algorithm=&quot;http://www.w3.org/2000/09/xmldsig#sha1&quot; /&gt;\n                            &lt;ds:DigestValue&gt;7KhZ1yTPuNhQ7OtTn32HcJQQ04U=&lt;/ds:DigestValue&gt;\n                        &lt;/ds:Reference&gt;\n                        &lt;ds:Reference URI=&quot;#id-8C92EF6DC231D5F4321700816423308694&quot;&gt;\n                            &lt;ds:Transforms&gt;\n                                &lt;ds:Transform Algorithm=&quot;http://www.w3.org/2001/10/xml-exc-c14n#&quot;&gt;\n                                    &lt;ec:InclusiveNamespaces PrefixList=&quot;&quot;\n                                        xmlns:ec=&quot;http://www.w3.org/2001/10/xml-exc-c14n#&quot; /&gt;\n                                &lt;/ds:Transform&gt;\n                            &lt;/ds:Transforms&gt;\n                            &lt;ds:DigestMethod Algorithm=&quot;http://www.w3.org/2000/09/xmldsig#sha1&quot; /&gt;\n                            &lt;ds:DigestValue&gt;t5f22r+WwrehIN/rbI7EFwLq7tM=&lt;/ds:DigestValue&gt;\n                        &lt;/ds:Reference&gt;\n                    &lt;/ds:SignedInfo&gt;\n                    &lt;ds:SignatureValue&gt;\n                        KRttsmdFmqCRQyTmo6/Cgs1Vj8EZ1y9YbObETjtcvhNQUBRny7tIKZE3bH4TwR69L2x0MsosaAcefeuT/OkowAa............&lt;/ds:SignatureValue&gt;\n                    &lt;ds:KeyInfo Id=&quot;KI-8C92EF6DC231D5F4321700816423308692&quot;&gt;\n                        &lt;wsse:SecurityTokenReference wsu:Id=&quot;STR-8C92EF6DC231D5F4321700816423308693&quot;&gt;\n                            &lt;wsse:Reference URI=&quot;#X509-8C92EF6DC231D5F4321700816423308691&quot;\n                                ValueType=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-x509-token-profile-1.0#X509v3&quot; /&gt;\n                        &lt;/wsse:SecurityTokenReference&gt;\n                    &lt;/ds:KeyInfo&gt;\n                &lt;/ds:Signature&gt;\n            &lt;/wsse:Security&gt;\n        &lt;/soapenv:Header&gt;\n        &lt;soapenv:Body wsu:Id=&quot;id-8C92EF6DC231D5F4321700816423308694&quot;\n            xmlns:wsu=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd&quot;&gt;\n            &lt;urn:SCHEMA_CC&gt;\n                &lt;IV_BP&gt;3960915933&lt;/IV_BP&gt;\n            &lt;/urn:SCHEMA_CC&gt;\n        &lt;/soapenv:Body&gt;\n    &lt;/soapenv:Envelope&gt;\n</code></pre>\n<p>My request java</p>\n<pre><code>            &lt;soapenv:Envelope xmlns:soapenv=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot;\n            xmlns:urn=&quot;urn:sap-com:document:sap:rfc:functions&quot;&gt;\n            &lt;soapenv:Header&gt;\n                &lt;wsse:Security\n                    xmlns:wsse=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd&quot;\n                    xmlns:wsu=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd&quot;\n                    Id=&quot;SIG-1B1352404FC17AFA99AD1B962FA2A67E&quot;&gt;\n                    &lt;wsu:Timestamp wsu:Id=&quot;TS-1B1352404FC17AFA99AD1B962FA2A67E&quot;&gt;\n                        &lt;wsu:Created&gt;2023-11-24T08:18:32Z&lt;/wsu:Created&gt;\n                        &lt;wsu:Expires&gt;2023-11-24T08:19:02Z&lt;/wsu:Expires&gt;\n                    &lt;/wsu:Timestamp&gt;\n                    &lt;wsse:BinarySecurityToken\n                        EncodingType=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-soap-message-security-1.0#Base64Binary&quot;\n                        ValueType=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-x509-token-profile-1.0#X509v3&quot;\n                        wsu:Id=&quot;X509Token-1B1352404FC17AFA99AD1B962FA2A67E&quot;&gt;\n                        MIIIEjCCBfqgAwIBAgITHQAAZ/wkXidRhqKJ2wADAABn..........&lt;/wsse:BinarySecurityToken&gt;\n                    &lt;ds:Signature xmlns:ds=&quot;http://www.w3.org/2000/09/xmldsig#&quot;&gt;\n                        &lt;ds:SignedInfo&gt;\n                            &lt;ds:CanonicalizationMethod Algorithm=&quot;http://www.w3.org/2001/10/xml-exc-c14n#&quot;&gt;\n                                &lt;ec:InclusiveNamespaces xmlns:ec=&quot;http://www.w3.org/2001/10/xml-exc-c14n#&quot;\n                                    PrefixList=&quot;soapenv urn&quot; /&gt;\n                            &lt;/ds:CanonicalizationMethod&gt;\n                            &lt;ds:SignatureMethod Algorithm=&quot;http://www.w3.org/2000/09/xmldsig#rsa-sha1&quot; /&gt;\n                            &lt;ds:Reference URI=&quot;#Body-1B1352404FC17AFA99AD1B962FA2A67E&quot;&gt;\n                                &lt;ds:Transforms&gt;\n                                    &lt;ds:Transform Algorithm=&quot;http://www.w3.org/2001/10/xml-exc-c14n#&quot;&gt;\n                                        &lt;ec:InclusiveNamespaces\n                                            xmlns:ec=&quot;http://www.w3.org/2001/10/xml-exc-c14n#&quot;\n                                            PrefixList=&quot;wsse soapenv urn&quot; /&gt;\n                                    &lt;/ds:Transform&gt;\n                                &lt;/ds:Transforms&gt;\n                                &lt;ds:DigestMethod Algorithm=&quot;http://www.w3.org/2000/09/xmldsig#sha1&quot; /&gt;\n                                &lt;ds:DigestValue&gt;qOQ+Nv9QAe63RePMKZkCfn2a8xI=&lt;/ds:DigestValue&gt;\n                            &lt;/ds:Reference&gt;\n                            &lt;ds:Reference URI=&quot;#TS-1B1352404FC17AFA99AD1B962FA2A67E&quot;&gt;\n                                &lt;ds:Transforms&gt;\n                                    &lt;ds:Transform Algorithm=&quot;http://www.w3.org/2001/10/xml-exc-c14n#&quot;&gt;\n                                        &lt;ec:InclusiveNamespaces\n                                            xmlns:ec=&quot;http://www.w3.org/2001/10/xml-exc-c14n#&quot;\n                                            PrefixList=&quot;wsse soapenv urn&quot; /&gt;\n                                    &lt;/ds:Transform&gt;\n                                &lt;/ds:Transforms&gt;\n                                &lt;ds:DigestMethod Algorithm=&quot;http://www.w3.org/2000/09/xmldsig#sha1&quot; /&gt;\n                                &lt;ds:DigestValue&gt;grbt4GpvYhKKUaetcW2HHMm91Mw=&lt;/ds:DigestValue&gt;\n                            &lt;/ds:Reference&gt;\n                        &lt;/ds:SignedInfo&gt;\n                        &lt;ds:SignatureValue&gt;agesPe4aOZPE9m1aI17MDz+oE5V7YNk7ox6q1WvmHWjd7EdH4XdqVq62dMnqkE2RRbI5TafX1qnK&amp;#13;\n                            udGLnMFcZu/gIYMUYmZ1RrwO6y39tLDWii8hEIZMYj/jIzAqi6d1jXh8GOjtmflYnIsRnidFgokV&amp;#13;\n                            /fgoMn7c548QlvEPyCokgFlS/aF4OF5uKqnb/yJ2ilRbeJBlG9QCO5rEUGmgeZ0untABzP+w76yg&amp;#13;\n                            PTkPaDTC8UHDQsG4XWMTYL+dyGfnHpYdqz5v+4BI53KfG0V7eqbdCZj9dzYN2MEel1NrgqQP2uQ8&amp;#13;\n                            .........&lt;/ds:SignatureValue&gt;\n                        &lt;ds:KeyInfo&gt;\n                            &lt;wsse:SecurityTokenReference Id=&quot;KI-1B1352404FC17AFA99AD1B962FA2A67E&quot;\n                                wsu:Id=&quot;STR-1B1352404FC17AFA99AD1B962FA2A67E&quot;&gt;\n                                &lt;wsse:Reference URI=&quot;#X509Token-1B1352404FC17AFA99AD1B962FA2A67E&quot;\n                                    ValueType=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-x509-token-profile-1.0#X509v3&quot; /&gt;\n                            &lt;/wsse:SecurityTokenReference&gt;\n                        &lt;/ds:KeyInfo&gt;\n                    &lt;/ds:Signature&gt;\n                &lt;/wsse:Security&gt;\n            &lt;/soapenv:Header&gt;\n            &lt;soapenv:Body\n                xmlns:wsu=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd&quot;\n                wsu:Id=&quot;Body-1B1352404FC17AFA99AD1B962FA2A67E&quot;&gt;\n                &lt;urn:GET_SCHEMA_CC xmlns:urn=&quot;http://www.example.com/urn&quot;&gt;\n                        &lt;IV_BP&gt;3960915933&lt;/IV_BP&gt;\n                \n                &lt;/urn:GET_SCHEMA_CC&gt;\n            &lt;/soapenv:Body&gt;\n        &lt;/soapenv:Envelope&gt;\n</code></pre>\n<p>The way to put the certificate in the securityBinaryToken seems correct to me, while the signature I don't know if it is the correct way to do it.</p>\n"},{"tags":["java","c#","serial-port","com-port"],"comments":[{"owner":{"account_id":957028,"reputation":15123,"user_id":982149,"accept_rate":100,"display_name":"Fildor"},"score":0,"creation_date":1700729898,"post_id":77535130,"comment_id":136690971,"body_markdown":"Is the behavior also inverted for other devices on the C# program? Meaning: The particular device in question results in ok output in C# and fails in java. Other devices result in ok output on java, but do they fail on C#? **If so**, then my guess would be that there is a configuration _on that particular device_ that&#39;s probably different from the others. If not, it cannot hurt to check that, anyway.","body":"Is the behavior also inverted for other devices on the C# program? Meaning: The particular device in question results in ok output in C# and fails in java. Other devices result in ok output on java, but do they fail on C#? <b>If so</b>, then my guess would be that there is a configuration <i>on that particular device</i> that&#39;s probably different from the others. If not, it cannot hurt to check that, anyway."},{"owner":{"account_id":957028,"reputation":15123,"user_id":982149,"accept_rate":100,"display_name":"Fildor"},"score":0,"creation_date":1700730103,"post_id":77535130,"comment_id":136691005,"body_markdown":"The interesting code would have been the implementations of the reading parts, btw. That&#39;s in C# the DataReceived-EventHandler, for example. _Maybe_ (have seen that in the past) it&#39;s as simple as a config for which line-endings to use...","body":"The interesting code would have been the implementations of the reading parts, btw. That&#39;s in C# the DataReceived-EventHandler, for example. <i>Maybe</i> (have seen that in the past) it&#39;s as simple as a config for which line-endings to use..."},{"owner":{"account_id":29972899,"reputation":21,"user_id":22969783,"display_name":"LEE Hin"},"score":0,"creation_date":1700795979,"post_id":77535130,"comment_id":136699862,"body_markdown":"no, there is no inverted result, i have also tested on some other device, and both java and c# can receive normal output, but only this particular device will return corrupted data in java while C# can still run normally, and I really have no idea on fixing the Java program.","body":"no, there is no inverted result, i have also tested on some other device, and both java and c# can receive normal output, but only this particular device will return corrupted data in java while C# can still run normally, and I really have no idea on fixing the Java program."},{"owner":{"account_id":957028,"reputation":15123,"user_id":982149,"accept_rate":100,"display_name":"Fildor"},"score":0,"creation_date":1700811379,"post_id":77535130,"comment_id":136701163,"body_markdown":"That is _very_ odd. But that also means that this very particular device must be sending data that is oh so _slightly_ different to the others&#39; that it affects the java but not C#. Right now, I cannot think of anything outside a line-ending that could do that, but there may be other things. So, if you cannot just use the C#, it may be worthwhile to inspect the raw data minisculy &quot;under the microscope&quot; to detect any systematic differences. When you find some, you&#39;ll probably be able to track down their cause and either account for it or change it or both.","body":"That is <i>very</i> odd. But that also means that this very particular device must be sending data that is oh so <i>slightly</i> different to the others&#39; that it affects the java but not C#. Right now, I cannot think of anything outside a line-ending that could do that, but there may be other things. So, if you cannot just use the C#, it may be worthwhile to inspect the raw data minisculy &quot;under the microscope&quot; to detect any systematic differences. When you find some, you&#39;ll probably be able to track down their cause and either account for it or change it or both."},{"owner":{"account_id":29972899,"reputation":21,"user_id":22969783,"display_name":"LEE Hin"},"score":0,"creation_date":1701048786,"post_id":77535130,"comment_id":136723036,"body_markdown":"Thank you very much, I will try to investigate in this direction","body":"Thank you very much, I will try to investigate in this direction"}],"answers":[{"tags":[],"owner":{"account_id":9777748,"reputation":1119,"user_id":7247051,"accept_rate":100,"display_name":"Ihdina"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701105090,"creation_date":1700727063,"answer_id":77535254,"question_id":77535130,"body_markdown":"Try like this:\r\n\r\n\timport java.io.ByteArrayOutputStream;\r\n\timport java.io.IOException;\r\n\timport java.util.Arrays;\r\n\r\n    private final static char CR = (char)0x0D;\r\n    private final static char LF = (char)0x0A;\r\n    private final static ByteArrayOutputStream stream = new ByteArrayOutputStream();\r\n\r\n    public static String bytesToHex(byte[] bytes) {\r\n        StringBuilder sb = new StringBuilder();\r\n        for (byte b : bytes) {\r\n          sb.append(String.format(&quot;%02x&quot;, b));\r\n        }\r\n        return sb.toString();\r\n    }\r\n\r\n\tpublic void readComm() {\r\n\t\ttry {\r\n\t\t\t\r\n\t\t\t// if data available\r\n\t\t\tint length = serialPort.bytesAvailable();\r\n\r\n\t\t\tif(length &gt; 0) {\t\t\r\n\r\n\t\t\t\t// read buffer\r\n\t\t\t\tbyte[] readBuffer = new byte[length];\r\n\t\t\t\t\r\n\t\t\t\t// read bytes and store in read readBuffer\r\n\t\t\t\tint numRead = serialPort.readBytes(readBuffer, readBuffer.length);\r\n\r\n\t\t\t\t// print length of data\r\n\t\t\t\tSystem.out.println(&quot;Read &quot; + numRead + &quot; bytes.&quot;);\r\n\r\n                // append data to stream \r\n                stream.write(readBuffer);\r\n\r\n                // stream to byte array\r\n                byte[] packets = stream.toByteArray();\r\n\r\n                // parsing data\r\n                for (int i = 0; i &lt; packets.length; ++i) {\t\t\t\t\r\n\r\n\t\t\t\t\t// detect CR LF on packets\r\n                    if(((char)packets[i] == CR) &amp;&amp; ((char)packets[i+1] == LF)) {\r\n\r\n\t\t\t\t\t\t// read completed data\r\n\t\t\t\t\t\tbyte[] completed = Arrays.copyOfRange(packets, 0, i);\r\n\t\t\t\t\t\tSystem.out.println(bytesToHex(completed));\r\n\r\n\t\t\t\t\t\t// stream discarded\r\n\t\t\t\t\t\tstream.reset(); \r\n\r\n                        // out looping\r\n                        break;\r\n                    }\r\n                }\r\n\t\t\t}\r\n\t\t} catch (Exception ex) {\r\n\t\t\tSystem.out.println(ex.getMessage());\r\n\t\t}\r\n\t}","title":"Data corruption issue in Java program using jSerialComm library, but in C# it is OK","body":"<p>Try like this:</p>\n<pre><code>import java.io.ByteArrayOutputStream;\nimport java.io.IOException;\nimport java.util.Arrays;\n\nprivate final static char CR = (char)0x0D;\nprivate final static char LF = (char)0x0A;\nprivate final static ByteArrayOutputStream stream = new ByteArrayOutputStream();\n\npublic static String bytesToHex(byte[] bytes) {\n    StringBuilder sb = new StringBuilder();\n    for (byte b : bytes) {\n      sb.append(String.format(&quot;%02x&quot;, b));\n    }\n    return sb.toString();\n}\n\npublic void readComm() {\n    try {\n        \n        // if data available\n        int length = serialPort.bytesAvailable();\n\n        if(length &gt; 0) {        \n\n            // read buffer\n            byte[] readBuffer = new byte[length];\n            \n            // read bytes and store in read readBuffer\n            int numRead = serialPort.readBytes(readBuffer, readBuffer.length);\n\n            // print length of data\n            System.out.println(&quot;Read &quot; + numRead + &quot; bytes.&quot;);\n\n            // append data to stream \n            stream.write(readBuffer);\n\n            // stream to byte array\n            byte[] packets = stream.toByteArray();\n\n            // parsing data\n            for (int i = 0; i &lt; packets.length; ++i) {              \n\n                // detect CR LF on packets\n                if(((char)packets[i] == CR) &amp;&amp; ((char)packets[i+1] == LF)) {\n\n                    // read completed data\n                    byte[] completed = Arrays.copyOfRange(packets, 0, i);\n                    System.out.println(bytesToHex(completed));\n\n                    // stream discarded\n                    stream.reset(); \n\n                    // out looping\n                    break;\n                }\n            }\n        }\n    } catch (Exception ex) {\n        System.out.println(ex.getMessage());\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":29972899,"reputation":21,"user_id":22969783,"display_name":"LEE Hin"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":104,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1701105090,"creation_date":1700725584,"question_id":77535130,"body_markdown":"I have a Java program that communicates with various devices to retrieve data via serial communication. I&#39;m using the jSerialComm library for this purpose.\r\n\r\nHowever, when I retrieve data from a particular device using this Java program, the data appears to be corrupted.\r\n\r\nSurprisingly, when I use a C# program without any external libraries to retrieve data from the same device, the data is received correctly, without any corruption.\r\n\r\nThe device configuration settings are as follows:\r\n\r\n```\r\nPort: COM3\r\nBaudRate: 2400\r\nParity: EVEN\r\nDatabits: 7\r\nStopbits: 1\r\n```\r\n- In my Java program, I&#39;m using the jSerialComm library, while in the C# program, I&#39;m not utilizing any external libraries.\r\n\r\n- My Java program can successfully detect and retrieve normal data from other devices using the same communication settings. The data corruption issue seems to be specific to this particular device.\r\n\r\nI have compared the logs from both programs and observed that the C# program consistently receives the expected data, whereas the Java program consistently receives corrupted data from this specific device. I have also attempted to modify the baud rate and parity settings in the Java program, but the issue persists.\r\n\r\nJava Program Connect Device:\r\n\r\n```\r\nSerialPort[] serialPorts = SerialPort.getCommPorts();\r\nfor (SerialPort port : serialPorts) {\r\n                if (DEVICE_PORT.equals(port.getSystemPortName())) {\r\n                    bolFound = true;\r\n                    serialPort = port;\r\n                    try {\r\n                        log.info(&quot;Opening port &#39;&quot; + DEVICE_PORT + &quot;&#39;...&quot;);\r\n                        log.info(&quot;Connecting to device &#39;&quot; + DEVICE_NAME + &quot;&#39;...&quot;);\r\n\r\n                        serialPort.setComPortParameters(DEVICE_RATE, DEVICE_DATABITS, DEVICE_STOPBITS, DEVICE_PARITY);\r\n                        serialPort.addDataListener(this);\r\n                        serialPort.openPort();\r\n\r\n...........\r\n```\r\nJava Data listening:\r\n```\r\n@Override\r\npublic int getListeningEvents() {\r\n    return SerialPort.LISTENING_EVENT_DATA_AVAILABLE;\r\n}\r\n\r\n@Override\r\npublic void serialEvent(SerialPortEvent event) {\r\n    switch (event.getEventType()) {\r\n        case SerialPort.LISTENING_EVENT_DATA_AVAILABLE:\r\n            readComm();\r\n            break;\r\n        default:\r\n            log.info(&quot;XXX default&quot;);\r\n            break;\r\n    }\r\n}\r\n\r\npublic void readComm() {\r\n\tlog.info(AppConfig.getInstance().getProperty(AppConfig.KEY_TEST_PORT, String.class) + &quot; Reading Comm...&quot;);\r\n\tbyte[] readBuffer = new byte[1024];\r\n\ttry {\r\n\t\tinputStream = serialPort.getInputStream();\r\n\t\tint len = 0;\r\n\t\t\t\r\n\t\twhile ((len = inputStream.read(readBuffer)) != -1) {\r\n\t\t\tlog.info(&quot;Real Time Response:&quot; + new String(readBuffer, 0, len));\r\n\t\t\tvalue += new String(readBuffer, 0, len);\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tlog.info(&quot;value:&quot; + value);\r\n\r\n\t\tif (isDataReady) {\r\n\t\t\t// process data\r\n\t\t\tvalue = &quot;&quot;; //reset data\r\n\t\t}\r\n\r\n\t} catch (IOException e) {\r\n\t\tintNumberOfFailure++;\r\n\t}\r\n}\r\n```\r\n\r\nJava Program Log File:\r\n```\r\n2023-11-09 10:38:58.165  INFO 21320 [Thread-117 thread] h.h.c.v.l.BaseListener                   : Trying to init Test Listener (COM5)...\r\n2023-11-09 10:38:58.350  INFO 21320 [Thread-117 thread] h.h.c.v.l.BaseListener                   : Opening port &#39;COM5&#39;...\r\n2023-11-09 10:38:58.350  INFO 21320 [Thread-117 thread] h.h.c.v.l.BaseListener                   : Connecting to device &#39;Testing&#39;...\r\n2023-11-09 10:38:58.350  INFO 21320 [Thread-117 thread] h.h.c.v.l.BaseListener                   : Opening port &#39;COM5&#39; Success\r\n2023-11-09 10:38:58.350  INFO 21320 [Thread-117 thread] h.h.c.v.l.BaseListener                   : Connecting to device &#39;Testing&#39; Success\r\n2023-11-09 10:38:59.211  INFO 21320 [Thread-120 thread] h.h.c.v.l.TestListener                   : COM5 Reading Comm...\r\n2023-11-09 10:38:59.215  INFO 21320 [Thread-120 thread] h.h.c.v.l.TestListener                   : Real Time Response:[ \r\n2023-11-09 10:38:59.217  INFO 21320 [Thread-120 thread] h.h.c.v.l.TestListener                   : value:[ \r\n2023-11-09 10:38:59.219  INFO 21320 [Thread-120 thread] h.h.c.v.l.TestListener                   : COM5 Reading Comm...\r\n2023-11-09 10:38:59.221  INFO 21320 [Thread-120 thread] h.h.c.v.l.TestListener                   : Real Time Response:l\r\n2023-11-09 10:38:59.222  INFO 21320 [Thread-120 thread] h.h.c.v.l.TestListener                   : value:[ l\r\n2023-11-09 10:38:59.225  INFO 21320 [Thread-120 thread] h.h.c.v.l.TestListener                   : COM5 Reading Comm...\r\n2023-11-09 10:38:59.227  INFO 21320 [Thread-120 thread] h.h.c.v.l.TestListener                   : Real Time Response:@\t1\r\n2023-11-09 10:38:59.229  INFO 21320 [Thread-120 thread] h.h.c.v.l.TestListener                   : value:[ l@\t1\r\n2023-11-09 10:39:00.215  INFO 21320 [Thread-120 thread] h.h.c.v.l.TestListener                   : COM5 Reading Comm...\r\n2023-11-09 10:39:00.215  INFO 21320 [Thread-120 thread] h.h.c.v.l.TestListener                   : Real Time Response:{=Um%\r\n2023-11-09 10:39:00.226  INFO 21320 [Thread-120 thread] h.h.c.v.l.TestListener                   : value:[ l@\t1{=Um%\r\n2023-11-09 10:39:00.230  INFO 21320 [Thread-120 thread] h.h.c.v.l.TestListener                   : COM5 Reading Comm...\r\n2023-11-09 10:39:00.232  INFO 21320 [Thread-120 thread] h.h.c.v.l.TestListener                   : Real Time Response:l\r\n2023-11-09 10:39:00.232  INFO 21320 [Thread-120 thread] h.h.c.v.l.TestListener                   : value:[ l@\t1{=Um%l\r\n2023-11-09 10:39:00.236  INFO 21320 [Thread-120 thread] h.h.c.v.l.TestListener                   : COM5 Reading Comm...\r\n2023-11-09 10:39:00.237  INFO 21320 [Thread-120 thread] h.h.c.v.l.TestListener                   : Real Time Response: ,a\r\n2023-11-09 10:39:00.238  INFO 21320 [Thread-120 thread] h.h.c.v.l.TestListener                   : value:[ l@\t1{=Um%l ,a\r\n2023-11-09 10:39:00.241  INFO 21320 [Thread-120 thread] h.h.c.v.l.TestListener                   : COM5 Reading Comm...\r\n2023-11-09 10:39:00.242  INFO 21320 [Thread-120 thread] h.h.c.v.l.TestListener                   : Real Time Response: \r\n2023-11-09 10:39:00.243  INFO 21320 [Thread-120 thread] h.h.c.v.l.TestListener                   : value:[ l@\t1{=Um%l ,a \r\n2023-11-09 10:39:01.202  INFO 21320 [Thread-120 thread] h.h.c.v.l.TestListener                   : COM5 Reading Comm...\r\n2023-11-09 10:39:01.217  INFO 21320 [Thread-120 thread] h.h.c.v.l.TestListener                   : Real Time Response:  \r\n2023-11-09 10:39:01.217  INFO 21320 [Thread-120 thread] h.h.c.v.l.TestListener                   : value:[ l@\t1{=Um%l ,a   \r\n\r\n```\r\nC# Program Connect Device:\r\n\r\n```\r\nstring portName = &quot;COM3&quot;;\r\nint baudRate = 2400;\r\nParity parity = Parity.Even;\r\nint dataBits = 7;\r\nStopBits stopBits = StopBits.One;\r\n\r\n_serialPort = new SerialPort(portName, baudRate, parity, dataBits, stopBits);\r\n\r\n_serialPort.DataReceived += SerialPort_DataReceived;\r\n\r\n_serialPort.Open();\r\n```\r\nC# Program Data listening:\r\n\r\n```\r\nConsole.WriteLine(&quot;Serial port opened. Press Enter to stop reading.&quot;);\r\n        _logWriter = new StreamWriter(&quot;log.txt&quot;, true);\r\n\r\n        while (true)\r\n        {\r\n            if (_serialPort.BytesToRead &gt; 0)\r\n            {\r\n                string data = _serialPort.ReadExisting();\r\n                DateTime now = DateTime.Now;\r\n\r\n                string logMessage = $&quot;[{now}] Received data: {data}&quot;;\r\n\r\n                Console.WriteLine(logMessage);\r\n                _logWriter.WriteLine($&quot;[{now}] Received data: {data}&quot;);\r\n                _logWriter.Flush(); // Flush the buffer to ensure data is written immediately\r\n\r\n            }\r\n        }\r\n```\r\n\r\nC# Program Log File:\r\n\r\n```\r\n[09/11/2023 10:53:09] Received data: US,+000091.50 kg\r\n\r\n[09/11/2023 10:53:09] Received data: US,+000091.50 kg\r\n\r\n[09/11/2023 10:53:10] Received data: US,+000091.50 kg\r\n\r\n[09/11/2023 10:53:10] Received data: US,+000091.50 kg\r\n\r\n[09/11/2023 10:53:10] Received data: S\r\n[09/11/2023 10:53:10] Received data: T,+171.4 cm\r\n\r\n[09/11/2023 10:53:11] Received data: ST,+000091.50 kg\r\n\r\n[09/11/2023 10:53:11] Received data: US,+0000\r\n[09/11/2023 10:53:11] Received data: 91.50 kg\r\n\r\n[09/11/2023 10:53:12] Received data: US,+000091.50 kg\r\n\r\n[09/11/2023 10:53:12] Received data: US,+000091.50 kg\r\n\r\n[09/11/2023 10:53:13] Received data: US,+00\r\n[09/11/2023 10:53:13] Received data: 0091.50 kg\r\n\r\n[09/11/2023 10:53:13] Received data: US,+000091.50 kg\r\n```\r\nMy goal is to understand why the Java program using the jSerialComm library encounters data corruption only with this specific device, while it can successfully retrieve normal data from other devices. How to modify my Java program to receive the data correctly from this particular device?","title":"Data corruption issue in Java program using jSerialComm library, but in C# it is OK","body":"<p>I have a Java program that communicates with various devices to retrieve data via serial communication. I'm using the jSerialComm library for this purpose.</p>\n<p>However, when I retrieve data from a particular device using this Java program, the data appears to be corrupted.</p>\n<p>Surprisingly, when I use a C# program without any external libraries to retrieve data from the same device, the data is received correctly, without any corruption.</p>\n<p>The device configuration settings are as follows:</p>\n<pre><code>Port: COM3\nBaudRate: 2400\nParity: EVEN\nDatabits: 7\nStopbits: 1\n</code></pre>\n<ul>\n<li><p>In my Java program, I'm using the jSerialComm library, while in the C# program, I'm not utilizing any external libraries.</p>\n</li>\n<li><p>My Java program can successfully detect and retrieve normal data from other devices using the same communication settings. The data corruption issue seems to be specific to this particular device.</p>\n</li>\n</ul>\n<p>I have compared the logs from both programs and observed that the C# program consistently receives the expected data, whereas the Java program consistently receives corrupted data from this specific device. I have also attempted to modify the baud rate and parity settings in the Java program, but the issue persists.</p>\n<p>Java Program Connect Device:</p>\n<pre><code>SerialPort[] serialPorts = SerialPort.getCommPorts();\nfor (SerialPort port : serialPorts) {\n                if (DEVICE_PORT.equals(port.getSystemPortName())) {\n                    bolFound = true;\n                    serialPort = port;\n                    try {\n                        log.info(&quot;Opening port '&quot; + DEVICE_PORT + &quot;'...&quot;);\n                        log.info(&quot;Connecting to device '&quot; + DEVICE_NAME + &quot;'...&quot;);\n\n                        serialPort.setComPortParameters(DEVICE_RATE, DEVICE_DATABITS, DEVICE_STOPBITS, DEVICE_PARITY);\n                        serialPort.addDataListener(this);\n                        serialPort.openPort();\n\n...........\n</code></pre>\n<p>Java Data listening:</p>\n<pre><code>@Override\npublic int getListeningEvents() {\n    return SerialPort.LISTENING_EVENT_DATA_AVAILABLE;\n}\n\n@Override\npublic void serialEvent(SerialPortEvent event) {\n    switch (event.getEventType()) {\n        case SerialPort.LISTENING_EVENT_DATA_AVAILABLE:\n            readComm();\n            break;\n        default:\n            log.info(&quot;XXX default&quot;);\n            break;\n    }\n}\n\npublic void readComm() {\n    log.info(AppConfig.getInstance().getProperty(AppConfig.KEY_TEST_PORT, String.class) + &quot; Reading Comm...&quot;);\n    byte[] readBuffer = new byte[1024];\n    try {\n        inputStream = serialPort.getInputStream();\n        int len = 0;\n            \n        while ((len = inputStream.read(readBuffer)) != -1) {\n            log.info(&quot;Real Time Response:&quot; + new String(readBuffer, 0, len));\n            value += new String(readBuffer, 0, len);\n            break;\n        }\n        log.info(&quot;value:&quot; + value);\n\n        if (isDataReady) {\n            // process data\n            value = &quot;&quot;; //reset data\n        }\n\n    } catch (IOException e) {\n        intNumberOfFailure++;\n    }\n}\n</code></pre>\n<p>Java Program Log File:</p>\n<pre><code>2023-11-09 10:38:58.165  INFO 21320 [Thread-117 thread] h.h.c.v.l.BaseListener                   : Trying to init Test Listener (COM5)...\n2023-11-09 10:38:58.350  INFO 21320 [Thread-117 thread] h.h.c.v.l.BaseListener                   : Opening port 'COM5'...\n2023-11-09 10:38:58.350  INFO 21320 [Thread-117 thread] h.h.c.v.l.BaseListener                   : Connecting to device 'Testing'...\n2023-11-09 10:38:58.350  INFO 21320 [Thread-117 thread] h.h.c.v.l.BaseListener                   : Opening port 'COM5' Success\n2023-11-09 10:38:58.350  INFO 21320 [Thread-117 thread] h.h.c.v.l.BaseListener                   : Connecting to device 'Testing' Success\n2023-11-09 10:38:59.211  INFO 21320 [Thread-120 thread] h.h.c.v.l.TestListener                   : COM5 Reading Comm...\n2023-11-09 10:38:59.215  INFO 21320 [Thread-120 thread] h.h.c.v.l.TestListener                   : Real Time Response:[ \n2023-11-09 10:38:59.217  INFO 21320 [Thread-120 thread] h.h.c.v.l.TestListener                   : value:[ \n2023-11-09 10:38:59.219  INFO 21320 [Thread-120 thread] h.h.c.v.l.TestListener                   : COM5 Reading Comm...\n2023-11-09 10:38:59.221  INFO 21320 [Thread-120 thread] h.h.c.v.l.TestListener                   : Real Time Response:l\n2023-11-09 10:38:59.222  INFO 21320 [Thread-120 thread] h.h.c.v.l.TestListener                   : value:[ l\n2023-11-09 10:38:59.225  INFO 21320 [Thread-120 thread] h.h.c.v.l.TestListener                   : COM5 Reading Comm...\n2023-11-09 10:38:59.227  INFO 21320 [Thread-120 thread] h.h.c.v.l.TestListener                   : Real Time Response:@ 1\n2023-11-09 10:38:59.229  INFO 21320 [Thread-120 thread] h.h.c.v.l.TestListener                   : value:[ l@   1\n2023-11-09 10:39:00.215  INFO 21320 [Thread-120 thread] h.h.c.v.l.TestListener                   : COM5 Reading Comm...\n2023-11-09 10:39:00.215  INFO 21320 [Thread-120 thread] h.h.c.v.l.TestListener                   : Real Time Response:{=Um%\n2023-11-09 10:39:00.226  INFO 21320 [Thread-120 thread] h.h.c.v.l.TestListener                   : value:[ l@   1{=Um%\n2023-11-09 10:39:00.230  INFO 21320 [Thread-120 thread] h.h.c.v.l.TestListener                   : COM5 Reading Comm...\n2023-11-09 10:39:00.232  INFO 21320 [Thread-120 thread] h.h.c.v.l.TestListener                   : Real Time Response:l\n2023-11-09 10:39:00.232  INFO 21320 [Thread-120 thread] h.h.c.v.l.TestListener                   : value:[ l@   1{=Um%l\n2023-11-09 10:39:00.236  INFO 21320 [Thread-120 thread] h.h.c.v.l.TestListener                   : COM5 Reading Comm...\n2023-11-09 10:39:00.237  INFO 21320 [Thread-120 thread] h.h.c.v.l.TestListener                   : Real Time Response: ,a\n2023-11-09 10:39:00.238  INFO 21320 [Thread-120 thread] h.h.c.v.l.TestListener                   : value:[ l@   1{=Um%l ,a\n2023-11-09 10:39:00.241  INFO 21320 [Thread-120 thread] h.h.c.v.l.TestListener                   : COM5 Reading Comm...\n2023-11-09 10:39:00.242  INFO 21320 [Thread-120 thread] h.h.c.v.l.TestListener                   : Real Time Response: \n2023-11-09 10:39:00.243  INFO 21320 [Thread-120 thread] h.h.c.v.l.TestListener                   : value:[ l@   1{=Um%l ,a \n2023-11-09 10:39:01.202  INFO 21320 [Thread-120 thread] h.h.c.v.l.TestListener                   : COM5 Reading Comm...\n2023-11-09 10:39:01.217  INFO 21320 [Thread-120 thread] h.h.c.v.l.TestListener                   : Real Time Response:  \n2023-11-09 10:39:01.217  INFO 21320 [Thread-120 thread] h.h.c.v.l.TestListener                   : value:[ l@   1{=Um%l ,a   \n\n</code></pre>\n<p>C# Program Connect Device:</p>\n<pre><code>string portName = &quot;COM3&quot;;\nint baudRate = 2400;\nParity parity = Parity.Even;\nint dataBits = 7;\nStopBits stopBits = StopBits.One;\n\n_serialPort = new SerialPort(portName, baudRate, parity, dataBits, stopBits);\n\n_serialPort.DataReceived += SerialPort_DataReceived;\n\n_serialPort.Open();\n</code></pre>\n<p>C# Program Data listening:</p>\n<pre><code>Console.WriteLine(&quot;Serial port opened. Press Enter to stop reading.&quot;);\n        _logWriter = new StreamWriter(&quot;log.txt&quot;, true);\n\n        while (true)\n        {\n            if (_serialPort.BytesToRead &gt; 0)\n            {\n                string data = _serialPort.ReadExisting();\n                DateTime now = DateTime.Now;\n\n                string logMessage = $&quot;[{now}] Received data: {data}&quot;;\n\n                Console.WriteLine(logMessage);\n                _logWriter.WriteLine($&quot;[{now}] Received data: {data}&quot;);\n                _logWriter.Flush(); // Flush the buffer to ensure data is written immediately\n\n            }\n        }\n</code></pre>\n<p>C# Program Log File:</p>\n<pre><code>[09/11/2023 10:53:09] Received data: US,+000091.50 kg\n\n[09/11/2023 10:53:09] Received data: US,+000091.50 kg\n\n[09/11/2023 10:53:10] Received data: US,+000091.50 kg\n\n[09/11/2023 10:53:10] Received data: US,+000091.50 kg\n\n[09/11/2023 10:53:10] Received data: S\n[09/11/2023 10:53:10] Received data: T,+171.4 cm\n\n[09/11/2023 10:53:11] Received data: ST,+000091.50 kg\n\n[09/11/2023 10:53:11] Received data: US,+0000\n[09/11/2023 10:53:11] Received data: 91.50 kg\n\n[09/11/2023 10:53:12] Received data: US,+000091.50 kg\n\n[09/11/2023 10:53:12] Received data: US,+000091.50 kg\n\n[09/11/2023 10:53:13] Received data: US,+00\n[09/11/2023 10:53:13] Received data: 0091.50 kg\n\n[09/11/2023 10:53:13] Received data: US,+000091.50 kg\n</code></pre>\n<p>My goal is to understand why the Java program using the jSerialComm library encounters data corruption only with this specific device, while it can successfully retrieve normal data from other devices. How to modify my Java program to receive the data correctly from this particular device?</p>\n"},{"tags":["java","spring-boot","gradle","openapi","openapi-generator"],"comments":[{"owner":{"account_id":18136109,"reputation":21,"user_id":13190636,"display_name":"altrof"},"score":0,"creation_date":1701248601,"post_id":77557530,"comment_id":136750912,"body_markdown":"@ojacomarket Yes I tried. But ChatGPT didn&#39;t provide any good solutions. I think in this case ChatGPT can&#39;t give any solution.","body":"@ojacomarket Yes I tried. But ChatGPT didn&#39;t provide any good solutions. I think in this case ChatGPT can&#39;t give any solution."}],"owner":{"account_id":18136109,"reputation":21,"user_id":13190636,"display_name":"altrof"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":90,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1701105048,"creation_date":1701094165,"question_id":77557530,"body_markdown":"My current setup for OpenAPI Generator in `build.gradle`.\r\n\r\n```groovy\r\ndef openApiGeneratorConfig = {\r\n    classpath configurations.openApiGenerator\r\n    systemProperties = [&quot;apis&quot;: &quot;&quot;, &quot;models&quot;: &quot;&quot;]\r\n    mainClass = &#39;org.openapitools.codegen.OpenAPIGenerator&#39;\r\n    args &#39;generate&#39;\r\n    args &#39;-o&#39;, &quot;$rootDir/external&quot;\r\n    args &#39;-t&#39;, &quot;$rootDir/external/src/main/resources/codegen/templates/&quot;\r\n    args &#39;--skip-validate-spec&#39;\r\n    args &quot;--import-mappings&quot;, &quot;Instant=java.time.Instant,YearMonth=java.time.YearMonth,LocalDateTime=java.time.LocalDateTime&quot;\r\n    args &quot;--type-mappings&quot;, &quot;double=BigDecimal&quot;\r\n}\r\n\r\ndef configFilesRoute = &quot;$rootDir/external/src/main/resources/config/swagger&quot;\r\n\r\ntask generateExternalApiClient(type: JavaExec) {\r\n    configure openApiGeneratorConfig\r\n    systemProperties = [&quot;apis&quot;: &quot;ContractSearch#findContractByCustomerId&quot;]\r\n    args &quot;-i&quot;, &quot;http://localhost:9901/v2/api-docs&quot;\r\n    args &quot;-c&quot;, &quot;$configFilesRoute/loan.json&quot;\r\n}\r\n```\r\n\r\nIn `ContractSearch` (Api) I have a lot of endpoints (operations) and I need to generate only one specific endpoint.\r\nSo before this (migrate to OpenAPI Generator), I used Swagger CodeGen and if I specified the operation after api with using symbol # as separator, then it worked fine, and it generated only one specific endpoint. \r\nBut now after migrating to OpenAPI Generator, it is not work in this behaviour. I googled and also checked documentation, didn&#39;t find any answer to my question.\r\n\r\nJava 17. Spring Boot 2.7, Gradle 8.2, OpenAPI Generator CLI 6.6.0\r\n\r\n\r\nI tried adding difference arguments in OpenAPI config, but also didn&#39;t help me.","title":"Generate only one specific endpoint from API","body":"<p>My current setup for OpenAPI Generator in <code>build.gradle</code>.</p>\n<pre><code>def openApiGeneratorConfig = {\n    classpath configurations.openApiGenerator\n    systemProperties = [&quot;apis&quot;: &quot;&quot;, &quot;models&quot;: &quot;&quot;]\n    mainClass = 'org.openapitools.codegen.OpenAPIGenerator'\n    args 'generate'\n    args '-o', &quot;$rootDir/external&quot;\n    args '-t', &quot;$rootDir/external/src/main/resources/codegen/templates/&quot;\n    args '--skip-validate-spec'\n    args &quot;--import-mappings&quot;, &quot;Instant=java.time.Instant,YearMonth=java.time.YearMonth,LocalDateTime=java.time.LocalDateTime&quot;\n    args &quot;--type-mappings&quot;, &quot;double=BigDecimal&quot;\n}\n\ndef configFilesRoute = &quot;$rootDir/external/src/main/resources/config/swagger&quot;\n\ntask generateExternalApiClient(type: JavaExec) {\n    configure openApiGeneratorConfig\n    systemProperties = [&quot;apis&quot;: &quot;ContractSearch#findContractByCustomerId&quot;]\n    args &quot;-i&quot;, &quot;http://localhost:9901/v2/api-docs&quot;\n    args &quot;-c&quot;, &quot;$configFilesRoute/loan.json&quot;\n}\n</code></pre>\n<p>In <code>ContractSearch</code> (Api) I have a lot of endpoints (operations) and I need to generate only one specific endpoint.\nSo before this (migrate to OpenAPI Generator), I used Swagger CodeGen and if I specified the operation after api with using symbol # as separator, then it worked fine, and it generated only one specific endpoint.\nBut now after migrating to OpenAPI Generator, it is not work in this behaviour. I googled and also checked documentation, didn't find any answer to my question.</p>\n<p>Java 17. Spring Boot 2.7, Gradle 8.2, OpenAPI Generator CLI 6.6.0</p>\n<p>I tried adding difference arguments in OpenAPI config, but also didn't help me.</p>\n"},{"tags":["java","sockets","tcp","netstat"],"comments":[{"owner":{"account_id":71739,"reputation":307143,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":1,"creation_date":1532024965,"post_id":51429224,"comment_id":89830196,"body_markdown":"What is `socket.accept(15000)`?","body":"What is <code>socket.accept(15000)</code>?"},{"owner":{"account_id":3540948,"reputation":5877,"user_id":2958086,"display_name":"Compass"},"score":0,"creation_date":1532025244,"post_id":51429224,"comment_id":89830340,"body_markdown":"Can you guarantee the service has stopped properly when told to stop?","body":"Can you guarantee the service has stopped properly when told to stop?"},{"owner":{"account_id":1977884,"reputation":346,"user_id":1775246,"display_name":"sbrisson"},"score":0,"creation_date":1532025800,"post_id":51429224,"comment_id":89830583,"body_markdown":"@EJP Fixed, I was meaning setSoTimeout(15000).","body":"@EJP Fixed, I was meaning setSoTimeout(15000)."},{"owner":{"account_id":1977884,"reputation":346,"user_id":1775246,"display_name":"sbrisson"},"score":0,"creation_date":1532025944,"post_id":51429224,"comment_id":89830656,"body_markdown":"@Compass The process is no longer listed in Task Manager nor ProcessExplorer.  I also get my last log message 2018-07-19 04:05:02,875 [main] INFO  CommunicationCoreServer - has shut down.","body":"@Compass The process is no longer listed in Task Manager nor ProcessExplorer.  I also get my last log message 2018-07-19 04:05:02,875 [main] INFO  CommunicationCoreServer - has shut down."},{"owner":{"account_id":71739,"reputation":307143,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1532025986,"post_id":51429224,"comment_id":89830675,"body_markdown":"What does setting an accept timeout have to do with it?","body":"What does setting an accept timeout have to do with it?"},{"owner":{"account_id":1977884,"reputation":346,"user_id":1775246,"display_name":"sbrisson"},"score":0,"creation_date":1532026389,"post_id":51429224,"comment_id":89830891,"body_markdown":"@EJP  I had read that we should never do a infinite timeout on accept.  Somebody saw issues (socket remained opened) with multi-core processors and infinite accept on socket.","body":"@EJP  I had read that we should never do a infinite timeout on accept.  Somebody saw issues (socket remained opened) with multi-core processors and infinite accept on socket."},{"owner":{"account_id":71739,"reputation":307143,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1532026530,"post_id":51429224,"comment_id":89830954,"body_markdown":"Read it where? Somebody such as who?","body":"Read it where? Somebody such as who?"},{"owner":{"account_id":1977884,"reputation":346,"user_id":1775246,"display_name":"sbrisson"},"score":0,"creation_date":1532027627,"post_id":51429224,"comment_id":89831465,"body_markdown":"@EJP Did a lot of search.  Can&#39;t find back the link.  Anyway, I agree that it shouldn&#39;t be related to the issue.  It did not fixed the problem anyway.","body":"@EJP Did a lot of search.  Can&#39;t find back the link.  Anyway, I agree that it shouldn&#39;t be related to the issue.  It did not fixed the problem anyway."}],"answers":[{"tags":[],"owner":{"account_id":1008829,"reputation":151,"user_id":1021863,"display_name":"JoSeMa"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1533288628,"creation_date":1533288628,"answer_id":51669524,"question_id":51429224,"body_markdown":"\r\nI am on the same problem here. I&#39;ve got several Java instances running as servers but as soon as any of those Java applications is killed and restarted then they fail to do so complaining that the port is still in use. Never happened before and I used to restart them every now and then.\r\n\r\nMy Windows server machine also received some new updates a few days ago.\r\n\r\nBy the way, I am using a tool to monitor ports and applications and those ports are not being used by any program, so the application is actually killed.\r\n\r\n","title":"Address already in use: JVM_Bind but no process is listed using port with netstat","body":"<p>I am on the same problem here. I've got several Java instances running as servers but as soon as any of those Java applications is killed and restarted then they fail to do so complaining that the port is still in use. Never happened before and I used to restart them every now and then.</p>\n\n<p>My Windows server machine also received some new updates a few days ago.</p>\n\n<p>By the way, I am using a tool to monitor ports and applications and those ports are not being used by any program, so the application is actually killed.</p>\n"},{"tags":[],"owner":{"account_id":1977884,"reputation":346,"user_id":1775246,"display_name":"sbrisson"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1535464496,"creation_date":1535464496,"answer_id":52059620,"question_id":51429224,"body_markdown":"\r\nA windows update affected the release of address/port after process shutdown.\r\n\r\nRefer to https://stackoverflow.com/questions/51666952/address-bind-exception-in-tomcat for solution.\r\n","title":"Address already in use: JVM_Bind but no process is listed using port with netstat","body":"<p>A windows update affected the release of address/port after process shutdown.</p>\n\n<p>Refer to <a href=\"https://stackoverflow.com/questions/51666952/address-bind-exception-in-tomcat\">Address Bind exception in Tomcat</a> for solution.</p>\n"},{"tags":[],"owner":{"account_id":19257070,"reputation":45,"user_id":14073726,"display_name":"Hackerman"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1701104970,"creation_date":1701104970,"answer_id":77558730,"question_id":51429224,"body_markdown":"I just ran into a similar scenario. I am building a java webserver, it uses mysql-j-connector for sql. \r\n\r\nMy goal was to upgrade the server, so first I shut it down via the administrative client. I compiled and tried to run the new version but it returned an error saying the address was already in use. I tried  using multiple tools (with and without root access) to try to shut down the process using the target port, but nothing worked. \r\n\r\nWhat I did to fix it was to use Htop\r\n\r\n    htop\r\n\r\nturns out the mysql-j-connectior was still running, am not sure why. I killed that process (which as mentioned before did not register as using the desired port number) and after that I was able to run the server. ","title":"Address already in use: JVM_Bind but no process is listed using port with netstat","body":"<p>I just ran into a similar scenario. I am building a java webserver, it uses mysql-j-connector for sql.</p>\n<p>My goal was to upgrade the server, so first I shut it down via the administrative client. I compiled and tried to run the new version but it returned an error saying the address was already in use. I tried  using multiple tools (with and without root access) to try to shut down the process using the target port, but nothing worked.</p>\n<p>What I did to fix it was to use Htop</p>\n<pre><code>htop\n</code></pre>\n<p>turns out the mysql-j-connectior was still running, am not sure why. I killed that process (which as mentioned before did not register as using the desired port number) and after that I was able to run the server.</p>\n"}],"owner":{"account_id":1977884,"reputation":346,"user_id":1775246,"display_name":"sbrisson"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1824,"favorite_count":0,"down_vote_count":1,"up_vote_count":4,"accepted_answer_id":52059620,"answer_count":3,"score":3,"last_activity_date":1701104970,"creation_date":1532023452,"question_id":51429224,"body_markdown":"I have a java process that make use of ServerSocket API (Java 8) and bind to the local port 12000.  Process runs under a Windows service Wrapper (exe4j).  I have a scheduled task that runs at 4am that stop the service and restart it after a couple of seconds.  That process is installed over 400 customers locations.\r\n\r\nEverything was running smooth until about last friday.  A few processes failed to restart properly at 4am.  On 2 servers I was able to connect and verify, the restart failed with both a &quot;Address already in use: JVM_Bind&quot;.  It&#39;s seems that the port 12000 was still in use by a the system.  \r\n\r\nI used every tools (processexplorer, tcpview, netstat -ano, name it) I know to try to find the process... with no success.  Only a machine reboot fixed the issue.  But problem came back a night or two later.  \r\n\r\nAfter some reading, I saw that I was doing a `sockect.accept()` with infinite timeout so I changed it for \r\n`\r\nsocket.setSoTimeout(15000);\r\nsocket.accept();\r\n` \r\ninstead.\r\n\r\nI putted the new version in place but the problem is still there.\r\n\r\nMachines got Windows updates. I did tests with the same Windows version fully updated but I can&#39;t reproduce.\r\n\r\nI&#39;m out of solution now.\r\n\r\nAny ideas\r\nThanks","title":"Address already in use: JVM_Bind but no process is listed using port with netstat","body":"<p>I have a java process that make use of ServerSocket API (Java 8) and bind to the local port 12000.  Process runs under a Windows service Wrapper (exe4j).  I have a scheduled task that runs at 4am that stop the service and restart it after a couple of seconds.  That process is installed over 400 customers locations.</p>\n\n<p>Everything was running smooth until about last friday.  A few processes failed to restart properly at 4am.  On 2 servers I was able to connect and verify, the restart failed with both a \"Address already in use: JVM_Bind\".  It's seems that the port 12000 was still in use by a the system.  </p>\n\n<p>I used every tools (processexplorer, tcpview, netstat -ano, name it) I know to try to find the process... with no success.  Only a machine reboot fixed the issue.  But problem came back a night or two later.  </p>\n\n<p>After some reading, I saw that I was doing a <code>sockect.accept()</code> with infinite timeout so I changed it for \n<code>\nsocket.setSoTimeout(15000);\nsocket.accept();\n</code> \ninstead.</p>\n\n<p>I putted the new version in place but the problem is still there.</p>\n\n<p>Machines got Windows updates. I did tests with the same Windows version fully updated but I can't reproduce.</p>\n\n<p>I'm out of solution now.</p>\n\n<p>Any ideas\nThanks</p>\n"},{"tags":["java","spring-boot","mockito"],"comments":[{"owner":{"account_id":4819600,"reputation":56500,"user_id":3890632,"display_name":"khelwood"},"score":0,"creation_date":1701105013,"post_id":77558718,"comment_id":136731088,"body_markdown":"To what null fields are you referring?","body":"To what null fields are you referring?"},{"owner":{"account_id":25926563,"reputation":119,"user_id":19648355,"display_name":"Irremediable"},"score":1,"creation_date":1701106463,"post_id":77558718,"comment_id":136731350,"body_markdown":"Spring validation works only with AOP proxied beans. @InjectMocks creates simple object instance, so validation will not work. You must get NovaConferenciaGateway instance from the Spring context.","body":"Spring validation works only with AOP proxied beans. @InjectMocks creates simple object instance, so validation will not work. You must get NovaConferenciaGateway instance from the Spring context."},{"owner":{"account_id":2280475,"reputation":2631,"user_id":2005682,"accept_rate":34,"display_name":"Fabio Ebner"},"score":0,"creation_date":1701108964,"post_id":77558718,"comment_id":136731792,"body_markdown":"tks @Irremediable","body":"tks @Irremediable"}],"owner":{"account_id":2280475,"reputation":2631,"user_id":2005682,"accept_rate":34,"display_name":"Fabio Ebner"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":2,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":0,"score":-1,"last_activity_date":1701104837,"creation_date":1701104837,"question_id":77558718,"body_markdown":"I have this class in a springboot project:\r\n\r\n\r\n\r\n    @Service\r\n    @Validated\r\n    public class NovaConferenciaGatewayImpl implements NovaConferenciaGateway {\r\n        private final ConferenciaMapper conferenciaMapper;\r\n        private final ConferenciaRepositoryGateway conferenciaRepositoryGateway;\r\n        private final ConferenciaItemRepositoryGateway conferenciaItemRepositoryGateway;\r\n    \r\n        public NovaConferenciaGatewayImpl(ConferenciaMapper conferenciaMapper, ConferenciaRepositoryGateway conferenciaRepositoryGateway, ConferenciaItemRepositoryGateway conferenciaItemRepositoryGateway) {\r\n            this.conferenciaMapper = conferenciaMapper;\r\n            this.conferenciaRepositoryGateway = conferenciaRepositoryGateway;\r\n            this.conferenciaItemRepositoryGateway = conferenciaItemRepositoryGateway;\r\n        }\r\n    \r\n        @Override\r\n        public Conferencia cadastrarConferencia(@NotNull UUID empresaId, @NotNull UUID usuarioId, @NotNull @Valid NovaConferenciaRequest novaConferenciaRequest) {\r\n            Conferencia novaConferencia = conferenciaMapper.fromRequest(novaConferenciaRequest);\r\n            novaConferencia.setCriado(LocalDateTime.now());\r\n            novaConferencia.setEmpresaId(empresaId);\r\n            novaConferencia.setUsuarioId(usuarioId);\r\n            return conferenciaRepositoryGateway.novaConferencia(novaConferencia);\r\n    \r\n        }\r\n    }\r\n\r\nIt&#39;s possibel to the @Valid in method cadastrarConferencia?\r\n\r\nI trying with this class\r\n\r\n    @ExtendWith(MockitoExtension.class)\r\n    @SpringBootTest\r\n    public class NovaConferenciaGatewayImplTest {\r\n    \r\n        @Spy\r\n        private  ConferenciaMapper conferenciaMapper = new ConferenciaMapperImpl();\r\n        @Mock\r\n        private  ConferenciaRepositoryGateway conferenciaRepositoryGateway;\r\n        @Mock\r\n        private  ConferenciaItemRepositoryGateway conferenciaItemRepositoryGateway;\r\n    \r\n        @InjectMocks\r\n        private NovaConferenciaGatewayImpl novaConferenciaGateway;\r\n    \r\n        @Test\r\n        public void cadastrarConferencia(){\r\n            @NotNull NovaConferenciaRequest novo = new NovaConferenciaRequest();\r\n            novo.setNome(&quot;Nome&quot;);\r\n            Conferencia conferencia = novaConferenciaGateway.cadastrarConferencia(UUID.fromString(&quot;e95d1fca-49fe-458e-92e2-df85b0786b49&quot;), UUID.fromString(&quot;2d1987af-b76a-4268-92da-1f37b7001ac5&quot;), novo);\r\n            Mockito.verify(conferenciaMapper).fromRequest(novo);\r\n        }\r\n    \r\n    }\r\n\r\n\r\nand this is my class NovaConferencia\r\n\r\n    @Data\r\n    @AllArgsConstructor\r\n    @NoArgsConstructor\r\n    public class NovaConferenciaRequest {\r\n        @NotBlank\r\n        private String nome;\r\n        @NotEmpty\r\n        @Valid\r\n        private Endereco endereco;\r\n        private Point localizacao;\r\n        @NotEmpty\r\n        @Valid\r\n        private List&lt;Informacao&gt; informacoes;\r\n        @NotEmpty\r\n        @Valid\r\n        private List&lt;NovaConferenciaItemRequest&gt; itens;\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n\r\nShouldn&#39;t my test return an error because of null fields?\r\n\r\ntks\r\n","title":"Test method in springboot with @Valid","body":"<p>I have this class in a springboot project:</p>\n<pre><code>@Service\n@Validated\npublic class NovaConferenciaGatewayImpl implements NovaConferenciaGateway {\n    private final ConferenciaMapper conferenciaMapper;\n    private final ConferenciaRepositoryGateway conferenciaRepositoryGateway;\n    private final ConferenciaItemRepositoryGateway conferenciaItemRepositoryGateway;\n\n    public NovaConferenciaGatewayImpl(ConferenciaMapper conferenciaMapper, ConferenciaRepositoryGateway conferenciaRepositoryGateway, ConferenciaItemRepositoryGateway conferenciaItemRepositoryGateway) {\n        this.conferenciaMapper = conferenciaMapper;\n        this.conferenciaRepositoryGateway = conferenciaRepositoryGateway;\n        this.conferenciaItemRepositoryGateway = conferenciaItemRepositoryGateway;\n    }\n\n    @Override\n    public Conferencia cadastrarConferencia(@NotNull UUID empresaId, @NotNull UUID usuarioId, @NotNull @Valid NovaConferenciaRequest novaConferenciaRequest) {\n        Conferencia novaConferencia = conferenciaMapper.fromRequest(novaConferenciaRequest);\n        novaConferencia.setCriado(LocalDateTime.now());\n        novaConferencia.setEmpresaId(empresaId);\n        novaConferencia.setUsuarioId(usuarioId);\n        return conferenciaRepositoryGateway.novaConferencia(novaConferencia);\n\n    }\n}\n</code></pre>\n<p>It's possibel to the @Valid in method cadastrarConferencia?</p>\n<p>I trying with this class</p>\n<pre><code>@ExtendWith(MockitoExtension.class)\n@SpringBootTest\npublic class NovaConferenciaGatewayImplTest {\n\n    @Spy\n    private  ConferenciaMapper conferenciaMapper = new ConferenciaMapperImpl();\n    @Mock\n    private  ConferenciaRepositoryGateway conferenciaRepositoryGateway;\n    @Mock\n    private  ConferenciaItemRepositoryGateway conferenciaItemRepositoryGateway;\n\n    @InjectMocks\n    private NovaConferenciaGatewayImpl novaConferenciaGateway;\n\n    @Test\n    public void cadastrarConferencia(){\n        @NotNull NovaConferenciaRequest novo = new NovaConferenciaRequest();\n        novo.setNome(&quot;Nome&quot;);\n        Conferencia conferencia = novaConferenciaGateway.cadastrarConferencia(UUID.fromString(&quot;e95d1fca-49fe-458e-92e2-df85b0786b49&quot;), UUID.fromString(&quot;2d1987af-b76a-4268-92da-1f37b7001ac5&quot;), novo);\n        Mockito.verify(conferenciaMapper).fromRequest(novo);\n    }\n\n}\n</code></pre>\n<p>and this is my class NovaConferencia</p>\n<pre><code>@Data\n@AllArgsConstructor\n@NoArgsConstructor\npublic class NovaConferenciaRequest {\n    @NotBlank\n    private String nome;\n    @NotEmpty\n    @Valid\n    private Endereco endereco;\n    private Point localizacao;\n    @NotEmpty\n    @Valid\n    private List&lt;Informacao&gt; informacoes;\n    @NotEmpty\n    @Valid\n    private List&lt;NovaConferenciaItemRequest&gt; itens;\n}\n</code></pre>\n<p>Shouldn't my test return an error because of null fields?</p>\n<p>tks</p>\n"},{"tags":["java","apache-spark"],"comments":[{"owner":{"account_id":1017255,"reputation":1526,"user_id":1028537,"display_name":"Chris"},"score":0,"creation_date":1701102595,"post_id":77558340,"comment_id":136730605,"body_markdown":"does sparkSession.sparkContext.setLogLevel(loggingLevel) work for you?","body":"does sparkSession.sparkContext.setLogLevel(loggingLevel) work for you?"},{"owner":{"account_id":5150443,"reputation":34158,"user_id":4125191,"display_name":"RealSkeptic"},"score":0,"creation_date":1701103513,"post_id":77558340,"comment_id":136730785,"body_markdown":"`log4j.xml` works for me, but you need to know the exact names of the loggers, as apparently the setup for root doesn&#39;t work for all of them.","body":"<code>log4j.xml</code> works for me, but you need to know the exact names of the loggers, as apparently the setup for root doesn&#39;t work for all of them."}],"owner":{"account_id":13474905,"reputation":19,"user_id":9722217,"display_name":"Tristpost"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1701104490,"creation_date":1701101415,"question_id":77558340,"body_markdown":"I run Spark 3.5.0 on a single Ubuntu Linux machine in local mode (no Hadoop). I build, package and execute the application with Maven, but no matter what I do, the console output from my application drowns in page after page of Spark logs that I want to stop.\r\n\r\n - First I tried copying and editing the Spark provided log4j template file, setting all log levels to warn - for good measure I stored the edited version as both log4j2.properties &amp; log4j.properties in the spark conf directory - no luck same non-relevant logs still printed.\r\n - Then I tried various programmatic answers like for instance `Configurator.setRootLevel(Level.ERROR)` or `LogManager.getLogger(&quot;org&quot;).setLevel(Level.WARN)` and other - no luck there either.\r\n\r\nAny suggestions that actually work for this setup are very much appreciated!","title":"How to set the log level from Spark in local mode from a Java application?","body":"<p>I run Spark 3.5.0 on a single Ubuntu Linux machine in local mode (no Hadoop). I build, package and execute the application with Maven, but no matter what I do, the console output from my application drowns in page after page of Spark logs that I want to stop.</p>\n<ul>\n<li>First I tried copying and editing the Spark provided log4j template file, setting all log levels to warn - for good measure I stored the edited version as both log4j2.properties &amp; log4j.properties in the spark conf directory - no luck same non-relevant logs still printed.</li>\n<li>Then I tried various programmatic answers like for instance <code>Configurator.setRootLevel(Level.ERROR)</code> or <code>LogManager.getLogger(&quot;org&quot;).setLevel(Level.WARN)</code> and other - no luck there either.</li>\n</ul>\n<p>Any suggestions that actually work for this setup are very much appreciated!</p>\n"},{"tags":["java","mapstruct","object-object-mapping"],"answers":[{"tags":[],"owner":{"account_id":23977205,"reputation":136,"user_id":17965148,"display_name":"Optimizer"},"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1642676612,"creation_date":1642676612,"answer_id":70785046,"question_id":70783906,"body_markdown":" Mapper Interface to map two objects into one will be like:\r\n  \r\n    @Mapper\r\n    public interface CalculateTimeMapper{\r\n         @Mapping(source = &quot;schedule.timezoneId&quot;, target = &quot;timezone&quot;)\r\n         @Mapping(source = &quot;availabilityRule.startEpoch&quot;, target = &quot;startTime&quot;)\r\n         AvailabilityRuleDTO toAvailabilityRuleDTO(AvailabilityRule\r\n                                                availabilityRule, Schedule schedule);\r\n    }\r\n\r\n\r\n\r\nYou can use below for reference:\r\n\r\n&lt;https://www.tutorialspoint.com/tutorial_view.htm?cid=mapstruct&amp;pid=mapstruct_mapping_multiple.htm&gt;","title":"Map multiple sources from multiple objects to one target","body":"<p>Mapper Interface to map two objects into one will be like:</p>\n<pre><code>@Mapper\npublic interface CalculateTimeMapper{\n     @Mapping(source = &quot;schedule.timezoneId&quot;, target = &quot;timezone&quot;)\n     @Mapping(source = &quot;availabilityRule.startEpoch&quot;, target = &quot;startTime&quot;)\n     AvailabilityRuleDTO toAvailabilityRuleDTO(AvailabilityRule\n                                            availabilityRule, Schedule schedule);\n}\n</code></pre>\n<p>You can use below for reference:</p>\n<p><a href=\"https://www.tutorialspoint.com/tutorial_view.htm?cid=mapstruct&amp;pid=mapstruct_mapping_multiple.htm\" rel=\"nofollow noreferrer\">https://www.tutorialspoint.com/tutorial_view.htm?cid=mapstruct&amp;pid=mapstruct_mapping_multiple.htm</a></p>\n"},{"tags":[],"owner":{"account_id":23191137,"reputation":1266,"user_id":17287498,"display_name":"Ben Zegveld"},"down_vote_count":0,"up_vote_count":17,"is_accepted":true,"score":17,"last_activity_date":1643788630,"creation_date":1643756257,"answer_id":70948648,"question_id":70783906,"body_markdown":"This can be done in several ways. Below you see 2 options. They do the same thing only one uses `qualifiedByName` while the other uses `expression`. Depending on your need one might fit better then the other.\r\n\r\n# Using a custom method found by mapstruct\r\n\r\n`qualifiedByName` required because otherwise mapstruct does not know which method to use.\r\n```\r\n    @Mapping(source = &quot;.&quot;, target = &quot;startTime&quot;, qualifiedByName = &quot;startTime&quot;)\r\n    @Mapping(source = &quot;.&quot;, target = &quot;endTime&quot;, qualifiedByName = &quot;endTime&quot;)\r\n    AvailabilityRuleDTO toAvailabilityRuleDTO(AvailabilityRule availabilityRule, @Context Schedule schedule);\r\n\r\n    @Named(&quot;startTime&quot;)\r\n    protected ZonedDateTime startTime(AvailabilityRule availabilityRule, @Context Schedule schedule) {\r\n        return convertTime(availabilityRule.startEpoch, schedule.timezoneId);\r\n    }\r\n\r\n    @Named(&quot;endTime&quot;)\r\n    protected ZonedDateTime endTime(AvailabilityRule availabilityRule, @Context Schedule schedule) {\r\n        return convertTime(availabilityRule.endEpoch, schedule.timezoneId);\r\n    }\r\n\r\n    private ZonedDateTime convertTime(long epoch, String timezoneId) {\r\n        Instant instant = Instant.ofEpochMilli(epoch);\r\n        ZonedDateTime time = LocalDateTime.from(instant).atZone(timezoneId);\r\n        return time;\r\n    }\r\n\r\n```\r\n\r\n# Using a custom method configured by an expression\r\n`@Named` used here to prevent mapstruct from accidentally using this method for other mapping actions. Without it it will most likely still work.\r\n```\r\n    @Mapping(target = &quot;startTime&quot;, expression = &quot;java(convertTime(availabilityRule.startEpoch, schedule.timezoneId))&quot; )\r\n    @Mapping(target = &quot;endTime&quot;, expression = &quot;java(convertTime(availabilityRule.endEpoch, schedule.timezoneId))&quot; )\r\n    AvailabilityRuleDTO toAvailabilityRuleDTO(AvailabilityRule\r\n                                                availabilityRule, Schedule schedule);\r\n\r\n\r\n    @Named(&quot;time&quot;)\r\n    protected ZonedDateTime convertTime(long epoch, String timezoneId) {\r\n        Instant instant = Instant.ofEpochMilli(epoch);\r\n        ZonedDateTime time = LocalDateTime.from(instant).atZone(timezoneId);\r\n        return time;\r\n    }\r\n```\r\n\r\n# Complete mapper including schedule\r\n```\r\n\r\n@Mapper\r\npublic abstract class ScheduleMapper {\r\n    @Mapping(target = &quot;timezone&quot;, source = &quot;timezoneId&quot;)\r\n    @Mapping(target = &quot;rules&quot;, expression = &quot;java(toAvailabilityRuleDTOs(schedule.getRules(), schedule))&quot;)\r\n    abstract ScheduleDTO toScheduleDTO(Schedule schedule);\r\n\r\n    @Named(&quot;rules&quot;)\r\n    abstract List&lt;AvailabilityRuleDTO&gt; toAvailabilityRuleDTOs(List&lt;AvailabilityRule&gt; rules, @Context Schedule schedule);\r\n\r\n    @Mapping(target = &quot;startTime&quot;, expression = &quot;java(convertTime(availabilityRule.startEpoch, schedule.timezoneId))&quot;)\r\n    @Mapping(target = &quot;endTime&quot;, expression = &quot;java(convertTime(availabilityRule.endEpoch, schedule.timezoneId))&quot;)\r\n    abstract AvailabilityRuleDTO toAvailabilityRuleDTO(AvailabilityRule availabilityRule, @Context Schedule schedule);\r\n\r\n    @Named(&quot;time&quot;)\r\n    protected ZonedDateTime convertTime(long epoch, ZoneId timezoneId) {\r\n        Instant instant = Instant.ofEpochMilli(epoch);\r\n        ZonedDateTime time = LocalDateTime.from(instant).atZone(timezoneId);\r\n        return time;\r\n    }\r\n\r\n    String map(ZoneId zoneId) {\r\n        return zoneId == null ? null : zoneId.getId();\r\n    }\r\n}\r\n```","title":"Map multiple sources from multiple objects to one target","body":"<p>This can be done in several ways. Below you see 2 options. They do the same thing only one uses <code>qualifiedByName</code> while the other uses <code>expression</code>. Depending on your need one might fit better then the other.</p>\n<h1>Using a custom method found by mapstruct</h1>\n<p><code>qualifiedByName</code> required because otherwise mapstruct does not know which method to use.</p>\n<pre><code>    @Mapping(source = &quot;.&quot;, target = &quot;startTime&quot;, qualifiedByName = &quot;startTime&quot;)\n    @Mapping(source = &quot;.&quot;, target = &quot;endTime&quot;, qualifiedByName = &quot;endTime&quot;)\n    AvailabilityRuleDTO toAvailabilityRuleDTO(AvailabilityRule availabilityRule, @Context Schedule schedule);\n\n    @Named(&quot;startTime&quot;)\n    protected ZonedDateTime startTime(AvailabilityRule availabilityRule, @Context Schedule schedule) {\n        return convertTime(availabilityRule.startEpoch, schedule.timezoneId);\n    }\n\n    @Named(&quot;endTime&quot;)\n    protected ZonedDateTime endTime(AvailabilityRule availabilityRule, @Context Schedule schedule) {\n        return convertTime(availabilityRule.endEpoch, schedule.timezoneId);\n    }\n\n    private ZonedDateTime convertTime(long epoch, String timezoneId) {\n        Instant instant = Instant.ofEpochMilli(epoch);\n        ZonedDateTime time = LocalDateTime.from(instant).atZone(timezoneId);\n        return time;\n    }\n\n</code></pre>\n<h1>Using a custom method configured by an expression</h1>\n<p><code>@Named</code> used here to prevent mapstruct from accidentally using this method for other mapping actions. Without it it will most likely still work.</p>\n<pre><code>    @Mapping(target = &quot;startTime&quot;, expression = &quot;java(convertTime(availabilityRule.startEpoch, schedule.timezoneId))&quot; )\n    @Mapping(target = &quot;endTime&quot;, expression = &quot;java(convertTime(availabilityRule.endEpoch, schedule.timezoneId))&quot; )\n    AvailabilityRuleDTO toAvailabilityRuleDTO(AvailabilityRule\n                                                availabilityRule, Schedule schedule);\n\n\n    @Named(&quot;time&quot;)\n    protected ZonedDateTime convertTime(long epoch, String timezoneId) {\n        Instant instant = Instant.ofEpochMilli(epoch);\n        ZonedDateTime time = LocalDateTime.from(instant).atZone(timezoneId);\n        return time;\n    }\n</code></pre>\n<h1>Complete mapper including schedule</h1>\n<pre><code>\n@Mapper\npublic abstract class ScheduleMapper {\n    @Mapping(target = &quot;timezone&quot;, source = &quot;timezoneId&quot;)\n    @Mapping(target = &quot;rules&quot;, expression = &quot;java(toAvailabilityRuleDTOs(schedule.getRules(), schedule))&quot;)\n    abstract ScheduleDTO toScheduleDTO(Schedule schedule);\n\n    @Named(&quot;rules&quot;)\n    abstract List&lt;AvailabilityRuleDTO&gt; toAvailabilityRuleDTOs(List&lt;AvailabilityRule&gt; rules, @Context Schedule schedule);\n\n    @Mapping(target = &quot;startTime&quot;, expression = &quot;java(convertTime(availabilityRule.startEpoch, schedule.timezoneId))&quot;)\n    @Mapping(target = &quot;endTime&quot;, expression = &quot;java(convertTime(availabilityRule.endEpoch, schedule.timezoneId))&quot;)\n    abstract AvailabilityRuleDTO toAvailabilityRuleDTO(AvailabilityRule availabilityRule, @Context Schedule schedule);\n\n    @Named(&quot;time&quot;)\n    protected ZonedDateTime convertTime(long epoch, ZoneId timezoneId) {\n        Instant instant = Instant.ofEpochMilli(epoch);\n        ZonedDateTime time = LocalDateTime.from(instant).atZone(timezoneId);\n        return time;\n    }\n\n    String map(ZoneId zoneId) {\n        return zoneId == null ? null : zoneId.getId();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":6981250,"reputation":629,"user_id":5524175,"display_name":"duplex143"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":18711,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"accepted_answer_id":70948648,"answer_count":2,"score":8,"last_activity_date":1701104075,"creation_date":1642671699,"question_id":70783906,"body_markdown":"I want to map the following classes\r\n```\r\nclass Schedule {\r\n    ZoneId timezoneId;\r\n    List&lt;AvailabilityRule&gt; rules;\r\n}\r\n```\r\n\r\n```\r\nclass AvailabilityRule {\r\n    long startEpoch;\r\n    long endEpoch;\r\n}\r\n```\r\nto these classes.\r\n```\r\nclass ScheduleDTO {\r\n    String timezone;\r\n    List&lt;AvailabilityRuleDTO&gt; rules;\r\n}\r\n```\r\n\r\n```\r\nclass AvailabilityRuleDTO {\r\n    ZonedDateTime startTime;\r\n    ZonedDateTime endTime;\r\n}\r\n```\r\n\r\nBoth `timezoneId` and `startEpoch` are needed for calculating `startTime`. \r\n\r\n```\r\nInstant instant = Instant.ofEpochMilli(startEpoch);\r\nZonedDateTime zonedDateTime = instant.atZone(timezoneId);\r\n        \r\n```\r\n\r\nHow can I achieve this using mapstruct? \r\n\r\nPseudo code of what I want\r\n```\r\n@Mapping(source = {&quot;startEpoch&quot;, &quot;timezoneId&quot;}, target = &quot;startTime&quot;, qualifiedByName = &quot;epochToString&quot;)\r\nAvailabilityRuleDTO toAvailabilityRuleDTO(AvailabilityRule\r\n                                            availabilityRule, Schedule schedule);\r\n```\r\n","title":"Map multiple sources from multiple objects to one target","body":"<p>I want to map the following classes</p>\n<pre><code>class Schedule {\n    ZoneId timezoneId;\n    List&lt;AvailabilityRule&gt; rules;\n}\n</code></pre>\n<pre><code>class AvailabilityRule {\n    long startEpoch;\n    long endEpoch;\n}\n</code></pre>\n<p>to these classes.</p>\n<pre><code>class ScheduleDTO {\n    String timezone;\n    List&lt;AvailabilityRuleDTO&gt; rules;\n}\n</code></pre>\n<pre><code>class AvailabilityRuleDTO {\n    ZonedDateTime startTime;\n    ZonedDateTime endTime;\n}\n</code></pre>\n<p>Both <code>timezoneId</code> and <code>startEpoch</code> are needed for calculating <code>startTime</code>.</p>\n<pre><code>Instant instant = Instant.ofEpochMilli(startEpoch);\nZonedDateTime zonedDateTime = instant.atZone(timezoneId);\n        \n</code></pre>\n<p>How can I achieve this using mapstruct?</p>\n<p>Pseudo code of what I want</p>\n<pre><code>@Mapping(source = {&quot;startEpoch&quot;, &quot;timezoneId&quot;}, target = &quot;startTime&quot;, qualifiedByName = &quot;epochToString&quot;)\nAvailabilityRuleDTO toAvailabilityRuleDTO(AvailabilityRule\n                                            availabilityRule, Schedule schedule);\n</code></pre>\n"},{"tags":["java","gradle","compiler-errors","compilation","minecraft"],"comments":[{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":0,"creation_date":1626792425,"post_id":68456894,"comment_id":120984675,"body_markdown":"Part of those 100 errors would probably be more useful in understanding what&#39;s wrong. Start with a couple from the top, for example.","body":"Part of those 100 errors would probably be more useful in understanding what&#39;s wrong. Start with a couple from the top, for example."},{"owner":{"account_id":22256600,"reputation":19,"user_id":16488683,"display_name":"Universe filatov"},"score":0,"creation_date":1626792463,"post_id":68456894,"comment_id":120984691,"body_markdown":"https://pastebin.com/Nrjje3Dn complete error","body":"<a href=\"https://pastebin.com/Nrjje3Dn\" rel=\"nofollow noreferrer\">pastebin.com/Nrjje3Dn</a> complete error"},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":2,"creation_date":1626792466,"post_id":68456894,"comment_id":120984693,"body_markdown":"Also please don&#39;t post text as images but post the text itself (nicely formatted of course to make it readable). And don&#39;t post links to code or text as those can break and other users might be wary of following them (or can&#39;t due to firewall rules). Do yourself a favor and put some effort into the question.","body":"Also please don&#39;t post text as images but post the text itself (nicely formatted of course to make it readable). And don&#39;t post links to code or text as those can break and other users might be wary of following them (or can&#39;t due to firewall rules). Do yourself a favor and put some effort into the question."},{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":3,"creation_date":1626792542,"post_id":68456894,"comment_id":120984738,"body_markdown":"Looks like this is using features from a java version that is higher than the one you&#39;re using.","body":"Looks like this is using features from a java version that is higher than the one you&#39;re using."},{"owner":{"account_id":17835,"reputation":303885,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1626793282,"post_id":68456894,"comment_id":120985115,"body_markdown":"@Universefilatov: please don&#39;t use external links or images instead of updating your question to contain the relevant error messages. Edit your question to contain them instead. And if there are too many error messages for that, then just post the first few (like 10). It&#39;s unlikely that anyone&#39;s going to read all of them anyway. [Please do not upload images of code/errors when asking a question.](//meta.stackoverflow.com/q/285551)","body":"@Universefilatov: please don&#39;t use external links or images instead of updating your question to contain the relevant error messages. Edit your question to contain them instead. And if there are too many error messages for that, then just post the first few (like 10). It&#39;s unlikely that anyone&#39;s going to read all of them anyway. <a href=\"//meta.stackoverflow.com/q/285551\">Please do not upload images of code/errors when asking a question.</a>"},{"owner":{"account_id":1119690,"reputation":15788,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"score":1,"creation_date":1626821081,"post_id":68456894,"comment_id":120994067,"body_markdown":"I strongly suspect that @FedericoklezCulloca is absolutely correct.  The compilation failure is due to a [pattern matching `instanceof` operator](https://docs.oracle.com/en/java/javase/16/language/pattern-matching-instanceof-operator.html) not being recognized by the compiler.  This feature was not added to the Java language until Java 16.  I&#39;m guessing the project&#39;s `build.gradle` isn&#39;t enforcing that version of Java, so it uses whatever version you&#39;re running the build as.  What version of Java are you using?  What do you get when you run `java --version`?","body":"I strongly suspect that @FedericoklezCulloca is absolutely correct.  The compilation failure is due to a <a href=\"https://docs.oracle.com/en/java/javase/16/language/pattern-matching-instanceof-operator.html\" rel=\"nofollow noreferrer\">pattern matching <code>instanceof</code> operator</a> not being recognized by the compiler.  This feature was not added to the Java language until Java 16.  I&#39;m guessing the project&#39;s <code>build.gradle</code> isn&#39;t enforcing that version of Java, so it uses whatever version you&#39;re running the build as.  What version of Java are you using?  What do you get when you run <code>java --version</code>?"},{"owner":{"account_id":213468,"reputation":103462,"user_id":466862,"display_name":"Mark Rotteveel"},"score":1,"creation_date":1627123197,"post_id":68456894,"comment_id":121075935,"body_markdown":"Please provide a [mre], including a build.gradle script, and specify the Java version you&#39;re using.","body":"Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, including a build.gradle script, and specify the Java version you&#39;re using."}],"answers":[{"tags":[],"owner":{"account_id":1119690,"reputation":15788,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1701103740,"creation_date":1627312930,"answer_id":68532485,"question_id":68456894,"body_markdown":"This appears to be due to an older version of Java being used to compile the code, when at least Java 16 must be used.  Using a new enough version of Java should fix this particular issue.\r\n\r\nThe compiler output is failing on some newer Java features: the [pattern matching `instanceof` operator](https://docs.oracle.com/en/java/javase/16/language/pattern-matching-instanceof-operator.html) added in Java 16, and [switch expressions](https://docs.oracle.com/en/java/javase/14/language/switch-expressions.html) added in Java 14.\r\n\r\n```lang-none\r\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\CommandsManager.java:52: error: &#39;)&#39; expected\r\n                    if (sender instanceof Player player) {\r\n                                                ^\r\n```\r\n\r\n```lang-none\r\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\mechanics\\provided\\custom\\CustomMechanicAction.java:17: error: &#39;;&#39; expected\r\n            CustomAction action = switch (params[0]) {\r\n                                                    ^\r\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\mechanics\\provided\\custom\\CustomMechanicAction.java:18: error: orphaned case\r\n                case &quot;command&quot; -&gt; new CommandAction(params);\r\n                ^\r\n```\r\n\r\nGiven that the failures are due to newer language features, this tells me that the issue is likely due to an older version of Java being used (Java 13 or earlier).\r\n\r\nThere are two ways to address this.  The first (and less portable) way is to ensure the build is running under a new enough version of Java.  For instance, when run under the command line, the `java --version` should indicate Java version of at least 16 before running the build.  If the version is too old, a newer version must be installed first.\r\n\r\nThe second approach is to specify the version of Java to be used within the Gradle build.  This will ensure that the build is always used with the correct version of Java.  With newer versions of Gradle, the [Java Toolchain](https://docs.gradle.org/current/userguide/toolchains.html) can be configured to use the proper version:\r\n\r\n```lang-groovy\r\njava {\r\n    toolchain {\r\n        languageVersion = JavaLanguageVersion.of(16)\r\n    }\r\n}\r\n```","title":"Gradle Java compilation error using pattern matching instanceof &amp; switch expressions","body":"<p>This appears to be due to an older version of Java being used to compile the code, when at least Java 16 must be used.  Using a new enough version of Java should fix this particular issue.</p>\n<p>The compiler output is failing on some newer Java features: the <a href=\"https://docs.oracle.com/en/java/javase/16/language/pattern-matching-instanceof-operator.html\" rel=\"nofollow noreferrer\">pattern matching <code>instanceof</code> operator</a> added in Java 16, and <a href=\"https://docs.oracle.com/en/java/javase/14/language/switch-expressions.html\" rel=\"nofollow noreferrer\">switch expressions</a> added in Java 14.</p>\n<pre class=\"lang-none prettyprint-override\"><code>D:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\CommandsManager.java:52: error: ')' expected\n                    if (sender instanceof Player player) {\n                                                ^\n</code></pre>\n<pre class=\"lang-none prettyprint-override\"><code>D:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\mechanics\\provided\\custom\\CustomMechanicAction.java:17: error: ';' expected\n            CustomAction action = switch (params[0]) {\n                                                    ^\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\mechanics\\provided\\custom\\CustomMechanicAction.java:18: error: orphaned case\n                case &quot;command&quot; -&gt; new CommandAction(params);\n                ^\n</code></pre>\n<p>Given that the failures are due to newer language features, this tells me that the issue is likely due to an older version of Java being used (Java 13 or earlier).</p>\n<p>There are two ways to address this.  The first (and less portable) way is to ensure the build is running under a new enough version of Java.  For instance, when run under the command line, the <code>java --version</code> should indicate Java version of at least 16 before running the build.  If the version is too old, a newer version must be installed first.</p>\n<p>The second approach is to specify the version of Java to be used within the Gradle build.  This will ensure that the build is always used with the correct version of Java.  With newer versions of Gradle, the <a href=\"https://docs.gradle.org/current/userguide/toolchains.html\" rel=\"nofollow noreferrer\">Java Toolchain</a> can be configured to use the proper version:</p>\n<pre class=\"lang-groovy prettyprint-override\"><code>java {\n    toolchain {\n        languageVersion = JavaLanguageVersion.of(16)\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":22256600,"reputation":19,"user_id":16488683,"display_name":"Universe filatov"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1320,"favorite_count":0,"down_vote_count":3,"up_vote_count":2,"answer_count":1,"score":-1,"last_activity_date":1701103740,"creation_date":1626792359,"question_id":68456894,"body_markdown":"I am getting the following error when compiling my Gradle Java project:\r\n\r\n```lang-none\r\n&gt; Task :compileJava FAILED\r\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\CommandsManager.java:52: error: &#39;)&#39; expected\r\n                    if (sender instanceof Player player) {\r\n                                                ^\r\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\CommandsManager.java:52: error: not a statement\r\n                    if (sender instanceof Player player) {\r\n                                                 ^\r\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\CommandsManager.java:52: error: &#39;;&#39; expected\r\n                    if (sender instanceof Player player) {\r\n                                                       ^\r\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\CommandsManager.java:56: error: &#39;else&#39; without &#39;if&#39;\r\n                    } else\r\n                      ^\r\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\RecipesCommand.java:38: error: &#39;)&#39; expected\r\n                    if (sender instanceof Player player) {\r\n                                                ^\r\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\RecipesCommand.java:38: error: not a statement\r\n                    if (sender instanceof Player player) {\r\n                                                 ^\r\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\RecipesCommand.java:38: error: &#39;;&#39; expected\r\n                    if (sender instanceof Player player) {\r\n                                                       ^\r\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\RecipesCommand.java:54: error: &#39;else&#39; without &#39;if&#39;\r\n                    } else\r\n                      ^\r\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\RecipesCommand.java:66: error: &#39;)&#39; expected\r\n                    if (sender instanceof Player player) {\r\n                                                ^\r\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\RecipesCommand.java:66: error: not a statement\r\n                    if (sender instanceof Player player) {\r\n                                                 ^\r\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\RecipesCommand.java:66: error: &#39;;&#39; expected\r\n                    if (sender instanceof Player player) {\r\n                                                       ^\r\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\RecipesCommand.java:72: error: &#39;else&#39; without &#39;if&#39;\r\n                    } else\r\n                      ^\r\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\RecipesCommand.java:81: error: &#39;)&#39; expected\r\n                    if (sender instanceof Player player) {\r\n                                                ^\r\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\RecipesCommand.java:81: error: not a statement\r\n                    if (sender instanceof Player player) {\r\n                                                 ^\r\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\RecipesCommand.java:81: error: &#39;;&#39; expected\r\n                    if (sender instanceof Player player) {\r\n                                                       ^\r\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\RecipesCommand.java:84: error: &#39;else&#39; without &#39;if&#39;\r\n                    } else\r\n                      ^\r\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\RecipesCommand.java:93: error: &#39;)&#39; expected\r\n                    if (sender instanceof Player player) {\r\n                                                ^\r\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\RecipesCommand.java:93: error: not a statement\r\n                    if (sender instanceof Player player) {\r\n                                                 ^\r\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\RecipesCommand.java:93: error: &#39;;&#39; expected\r\n                    if (sender instanceof Player player) {\r\n                                                       ^\r\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\RecipesCommand.java:96: error: &#39;else&#39; without &#39;if&#39;\r\n                    } else\r\n                      ^\r\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\RecipesCommand.java:107: error: &#39;)&#39; expected\r\n                    if (sender instanceof Player player) {\r\n                                                ^\r\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\RecipesCommand.java:107: error: not a statement\r\n                    if (sender instanceof Player player) {\r\n                                                 ^\r\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\RecipesCommand.java:107: error: &#39;;&#39; expected\r\n                    if (sender instanceof Player player) {\r\n                                                       ^\r\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\RecipesCommand.java:110: error: &#39;)&#39; expected\r\n                        if (recipe instanceof FurnaceBuilder furnace) {\r\n                                                            ^\r\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\RecipesCommand.java:110: error: not a statement\r\n                        if (recipe instanceof FurnaceBuilder furnace) {\r\n                                                             ^\r\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\RecipesCommand.java:110: error: &#39;;&#39; expected\r\n                        if (recipe instanceof FurnaceBuilder furnace) {\r\n                                                                    ^\r\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\RecipesCommand.java:115: error: &#39;else&#39; without &#39;if&#39;\r\n                    } else\r\n                      ^\r\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\RecipesCommand.java:125: error: &#39;)&#39; expected\r\n                    if (sender instanceof Player player) {\r\n                                                ^\r\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\RecipesCommand.java:125: error: not a statement\r\n                    if (sender instanceof Player player) {\r\n                                                 ^\r\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\RecipesCommand.java:125: error: &#39;;&#39; expected\r\n                    if (sender instanceof Player player) {\r\n                                                       ^\r\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\RecipesCommand.java:133: error: &#39;else&#39; without &#39;if&#39;\r\n                    } else\r\n                      ^\r\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\ReloadCommand.java:23: error: : expected\r\n                        case &quot;ITEMS&quot; -&gt; reloadItems(sender);\r\n                                    ^\r\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\ReloadCommand.java:23: error: illegal start of expression\r\n                        case &quot;ITEMS&quot; -&gt; reloadItems(sender);\r\n                                     ^\r\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\ReloadCommand.java:23: error: &#39;;&#39; expected\r\n                        case &quot;ITEMS&quot; -&gt; reloadItems(sender);\r\n                                                   ^\r\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\ReloadCommand.java:23: error: not a statement\r\n                        case &quot;ITEMS&quot; -&gt; reloadItems(sender);\r\n                                                    ^\r\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\ReloadCommand.java:23: error: &#39;;&#39; expected\r\n                        case &quot;ITEMS&quot; -&gt; reloadItems(sender);\r\n                                                          ^\r\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\ReloadCommand.java:24: error: : expected\r\n                        case &quot;PACK&quot; -&gt; reloadPack(OraxenPlugin.get(), sender);\r\n                                   ^\r\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\ReloadCommand.java:24: error: illegal start of expression\r\n                        case &quot;PACK&quot; -&gt; reloadPack(OraxenPlugin.get(), sender);\r\n                                    ^\r\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\ReloadCommand.java:24: error: &#39;;&#39; expected\r\n                        case &quot;PACK&quot; -&gt; reloadPack(OraxenPlugin.get(), sender);\r\n                                                 ^\r\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\ReloadCommand.java:24: error: &#39;;&#39; expected\r\n                        case &quot;PACK&quot; -&gt; reloadPack(OraxenPlugin.get(), sender);\r\n                                                                    ^\r\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\ReloadCommand.java:24: error: not a statement\r\n                        case &quot;PACK&quot; -&gt; reloadPack(OraxenPlugin.get(), sender);\r\n                                                                      ^\r\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\ReloadCommand.java:24: error: &#39;;&#39; expected\r\n                        case &quot;PACK&quot; -&gt; reloadPack(OraxenPlugin.get(), sender);\r\n                                                                            ^\r\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\ReloadCommand.java:25: error: : expected\r\n                        case &quot;RECIPES&quot; -&gt; RecipesManager.reload(OraxenPlugin.get());\r\n                                      ^\r\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\ReloadCommand.java:25: error: illegal start of expression\r\n                        case &quot;RECIPES&quot; -&gt; RecipesManager.reload(OraxenPlugin.get());\r\n                                       ^\r\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\ReloadCommand.java:25: error: &#39;;&#39; expected\r\n                        case &quot;RECIPES&quot; -&gt; RecipesManager.reload(OraxenPlugin.get());\r\n                                                        ^\r\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\ReloadCommand.java:26: error: : expected\r\n                        case &quot;CONFIGS&quot; -&gt; OraxenPlugin.get().reloadConfigs();\r\n                                      ^\r\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\ReloadCommand.java:26: error: illegal start of expression\r\n                        case &quot;CONFIGS&quot; -&gt; OraxenPlugin.get().reloadConfigs();\r\n                                       ^\r\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\ReloadCommand.java:26: error: &#39;;&#39; expected\r\n                        case &quot;CONFIGS&quot; -&gt; OraxenPlugin.get().reloadConfigs();\r\n                                                      ^\r\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\ReloadCommand.java:27: error: : expected\r\n                        default -&gt; {\r\n                               ^\r\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\ReloadCommand.java:27: error: illegal start of expression\r\n                        default -&gt; {\r\n                                ^\r\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\ReloadCommand.java:27: error: &#39;;&#39; expected\r\n                        default -&gt; {\r\n                                  ^\r\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\ReloadCommand.java:34: error: &#39;)&#39; expected\r\n                    }\r\n                     ^\r\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\ReloadCommand.java:35: error: illegal start of expression\r\n                });\r\n                 ^\r\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\RepairCommand.java:27: error: &#39;)&#39; expected\r\n                    if (sender instanceof Player player) {\r\n                                                ^\r\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\RepairCommand.java:27: error: not a statement\r\n                    if (sender instanceof Player player) {\r\n                                                 ^\r\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\RepairCommand.java:27: error: &#39;;&#39; expected\r\n                    if (sender instanceof Player player) {\r\n                                                       ^\r\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\RepairCommand.java:55: error: &#39;else&#39; without &#39;if&#39;\r\n                    } else {\r\n                      ^\r\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\RepairCommand.java:65: error: &#39;)&#39; expected\r\n        if (!(itemMeta instanceof Damageable damageable))\r\n                                            ^\r\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\RepairCommand.java:65: error: illegal start of expression\r\n        if (!(itemMeta instanceof Damageable damageable))\r\n                                                       ^\r\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\RepairCommand.java:65: error: &#39;;&#39; expected\r\n        if (!(itemMeta instanceof Damageable damageable))\r\n                                                        ^\r\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\font\\Glyph.java:8: error: class, interface, or enum expected\r\npublic record Glyph(String name, char character, String texture, int ascent,\r\n       ^\r\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\font\\Glyph.java:11: error: class, interface, or enum expected\r\n    public JsonObject toJson() {\r\n           ^\r\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\font\\Glyph.java:13: error: class, interface, or enum expected\r\n        JsonArray chars = new JsonArray();\r\n        ^\r\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\font\\Glyph.java:14: error: class, interface, or enum expected\r\n        chars.add(String.valueOf(character));\r\n        ^\r\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\font\\Glyph.java:15: error: class, interface, or enum expected\r\n        output.add(&quot;chars&quot;, chars);\r\n        ^\r\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\font\\Glyph.java:16: error: class, interface, or enum expected\r\n        output.addProperty(&quot;file&quot;, texture);\r\n        ^\r\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\font\\Glyph.java:17: error: class, interface, or enum expected\r\n        output.addProperty(&quot;ascent&quot;, 8);\r\n        ^\r\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\font\\Glyph.java:18: error: class, interface, or enum expected\r\n        output.addProperty(&quot;height&quot;, height);\r\n        ^\r\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\font\\Glyph.java:19: error: class, interface, or enum expected\r\n        output.addProperty(&quot;type&quot;, &quot;bitmap&quot;);\r\n        ^\r\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\font\\Glyph.java:20: error: class, interface, or enum expected\r\n        return output;\r\n        ^\r\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\font\\Glyph.java:21: error: class, interface, or enum expected\r\n    }\r\n    ^\r\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\font\\Glyph.java:23: error: class, interface, or enum expected\r\n    public boolean hasPermission(Player player) {\r\n           ^\r\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\font\\Glyph.java:25: error: class, interface, or enum expected\r\n    }\r\n    ^\r\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\items\\ItemBuilder.java:71: error: &#39;)&#39; expected\r\n        if (itemMeta instanceof PotionMeta potionMeta) {\r\n                                          ^\r\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\items\\ItemBuilder.java:71: error: not a statement\r\n        if (itemMeta instanceof PotionMeta potionMeta) {\r\n                                           ^\r\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\items\\ItemBuilder.java:71: error: &#39;;&#39; expected\r\n        if (itemMeta instanceof PotionMeta potionMeta) {\r\n                                                     ^\r\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\items\\ItemBuilder.java:80: error: &#39;)&#39; expected\r\n        if (itemMeta instanceof TropicalFishBucketMeta tropicalFishBucketMeta) {\r\n                                                      ^\r\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\items\\ItemBuilder.java:80: error: not a statement\r\n        if (itemMeta instanceof TropicalFishBucketMeta tropicalFishBucketMeta) {\r\n                                                       ^\r\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\items\\ItemBuilder.java:80: error: &#39;;&#39; expected\r\n        if (itemMeta instanceof TropicalFishBucketMeta tropicalFishBucketMeta) {\r\n                                                                             ^\r\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\items\\ItemBuilder.java:280: error: &#39;)&#39; expected\r\n        if (itemMeta instanceof Damageable damageable) {\r\n                                          ^\r\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\items\\ItemBuilder.java:280: error: not a statement\r\n        if (itemMeta instanceof Damageable damageable) {\r\n                                           ^\r\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\items\\ItemBuilder.java:280: error: &#39;;&#39; expected\r\n        if (itemMeta instanceof Damageable damageable) {\r\n                                                     ^\r\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\items\\ItemBuilder.java:287: error: &#39;)&#39; expected\r\n        if (itemMeta instanceof LeatherArmorMeta leatherArmorMeta) {\r\n                                                ^\r\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\items\\ItemBuilder.java:287: error: not a statement\r\n        if (itemMeta instanceof LeatherArmorMeta leatherArmorMeta) {\r\n                                                 ^\r\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\items\\ItemBuilder.java:287: error: &#39;;&#39; expected\r\n        if (itemMeta instanceof LeatherArmorMeta leatherArmorMeta) {\r\n                                                                 ^\r\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\items\\ItemBuilder.java:294: error: &#39;)&#39; expected\r\n        if (itemMeta instanceof PotionMeta potionMeta) {\r\n                                          ^\r\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\items\\ItemBuilder.java:294: error: not a statement\r\n        if (itemMeta instanceof PotionMeta potionMeta) {\r\n                                           ^\r\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\items\\ItemBuilder.java:294: error: &#39;;&#39; expected\r\n        if (itemMeta instanceof PotionMeta potionMeta) {\r\n                                                     ^\r\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\items\\ItemBuilder.java:309: error: &#39;)&#39; expected\r\n        if (itemMeta instanceof SkullMeta skullMeta) {\r\n                                         ^\r\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\items\\ItemBuilder.java:309: error: not a statement\r\n        if (itemMeta instanceof SkullMeta skullMeta) {\r\n                                          ^\r\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\items\\ItemBuilder.java:309: error: &#39;;&#39; expected\r\n        if (itemMeta instanceof SkullMeta skullMeta) {\r\n                                                   ^\r\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\items\\ItemBuilder.java:317: error: &#39;)&#39; expected\r\n        if (itemMeta instanceof TropicalFishBucketMeta tropicalFishBucketMeta) {\r\n                                                      ^\r\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\items\\ItemBuilder.java:317: error: not a statement\r\n        if (itemMeta instanceof TropicalFishBucketMeta tropicalFishBucketMeta) {\r\n                                                       ^\r\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\items\\ItemBuilder.java:317: error: &#39;;&#39; expected\r\n        if (itemMeta instanceof TropicalFishBucketMeta tropicalFishBucketMeta) {\r\n                                                                             ^\r\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\mechanics\\provided\\custom\\CustomMechanicAction.java:17: error: illegal start of expression\r\n            CustomAction action = switch (params[0]) {\r\n                                  ^\r\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\mechanics\\provided\\custom\\CustomMechanicAction.java:17: error: not a statement\r\n            CustomAction action = switch (params[0]) {\r\n                                         ^\r\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\mechanics\\provided\\custom\\CustomMechanicAction.java:17: error: &#39;;&#39; expected\r\n            CustomAction action = switch (params[0]) {\r\n                                                    ^\r\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\mechanics\\provided\\custom\\CustomMechanicAction.java:18: error: orphaned case\r\n                case &quot;command&quot; -&gt; new CommandAction(params);\r\n                ^\r\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\mechanics\\provided\\custom\\CustomMechanicAction.java:18: error: : expected\r\n                case &quot;command&quot; -&gt; new CommandAction(params);\r\n                              ^\r\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\mechanics\\provided\\custom\\CustomMechanicAction.java:18: error: illegal start of expression\r\n                case &quot;command&quot; -&gt; new CommandAction(params);\r\n                               ^\r\n100 errors\r\n \r\nFAILURE: Build failed with an exception.\r\n \r\n* What went wrong:\r\nExecution failed for task &#39;:compileJava&#39;.\r\n&gt; Compilation failed; see the compiler error output for details.\r\n \r\n* Try:\r\nRun with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output. Run with --scan to get full insights.\r\n \r\n* Get more help at https://help.gradle.org\r\n \r\nBUILD FAILED in 1s\r\n2 actionable tasks: 2 executed\r\n```","title":"Gradle Java compilation error using pattern matching instanceof &amp; switch expressions","body":"<p>I am getting the following error when compiling my Gradle Java project:</p>\n<pre class=\"lang-none prettyprint-override\"><code>&gt; Task :compileJava FAILED\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\CommandsManager.java:52: error: ')' expected\n                    if (sender instanceof Player player) {\n                                                ^\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\CommandsManager.java:52: error: not a statement\n                    if (sender instanceof Player player) {\n                                                 ^\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\CommandsManager.java:52: error: ';' expected\n                    if (sender instanceof Player player) {\n                                                       ^\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\CommandsManager.java:56: error: 'else' without 'if'\n                    } else\n                      ^\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\RecipesCommand.java:38: error: ')' expected\n                    if (sender instanceof Player player) {\n                                                ^\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\RecipesCommand.java:38: error: not a statement\n                    if (sender instanceof Player player) {\n                                                 ^\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\RecipesCommand.java:38: error: ';' expected\n                    if (sender instanceof Player player) {\n                                                       ^\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\RecipesCommand.java:54: error: 'else' without 'if'\n                    } else\n                      ^\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\RecipesCommand.java:66: error: ')' expected\n                    if (sender instanceof Player player) {\n                                                ^\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\RecipesCommand.java:66: error: not a statement\n                    if (sender instanceof Player player) {\n                                                 ^\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\RecipesCommand.java:66: error: ';' expected\n                    if (sender instanceof Player player) {\n                                                       ^\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\RecipesCommand.java:72: error: 'else' without 'if'\n                    } else\n                      ^\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\RecipesCommand.java:81: error: ')' expected\n                    if (sender instanceof Player player) {\n                                                ^\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\RecipesCommand.java:81: error: not a statement\n                    if (sender instanceof Player player) {\n                                                 ^\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\RecipesCommand.java:81: error: ';' expected\n                    if (sender instanceof Player player) {\n                                                       ^\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\RecipesCommand.java:84: error: 'else' without 'if'\n                    } else\n                      ^\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\RecipesCommand.java:93: error: ')' expected\n                    if (sender instanceof Player player) {\n                                                ^\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\RecipesCommand.java:93: error: not a statement\n                    if (sender instanceof Player player) {\n                                                 ^\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\RecipesCommand.java:93: error: ';' expected\n                    if (sender instanceof Player player) {\n                                                       ^\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\RecipesCommand.java:96: error: 'else' without 'if'\n                    } else\n                      ^\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\RecipesCommand.java:107: error: ')' expected\n                    if (sender instanceof Player player) {\n                                                ^\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\RecipesCommand.java:107: error: not a statement\n                    if (sender instanceof Player player) {\n                                                 ^\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\RecipesCommand.java:107: error: ';' expected\n                    if (sender instanceof Player player) {\n                                                       ^\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\RecipesCommand.java:110: error: ')' expected\n                        if (recipe instanceof FurnaceBuilder furnace) {\n                                                            ^\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\RecipesCommand.java:110: error: not a statement\n                        if (recipe instanceof FurnaceBuilder furnace) {\n                                                             ^\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\RecipesCommand.java:110: error: ';' expected\n                        if (recipe instanceof FurnaceBuilder furnace) {\n                                                                    ^\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\RecipesCommand.java:115: error: 'else' without 'if'\n                    } else\n                      ^\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\RecipesCommand.java:125: error: ')' expected\n                    if (sender instanceof Player player) {\n                                                ^\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\RecipesCommand.java:125: error: not a statement\n                    if (sender instanceof Player player) {\n                                                 ^\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\RecipesCommand.java:125: error: ';' expected\n                    if (sender instanceof Player player) {\n                                                       ^\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\RecipesCommand.java:133: error: 'else' without 'if'\n                    } else\n                      ^\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\ReloadCommand.java:23: error: : expected\n                        case &quot;ITEMS&quot; -&gt; reloadItems(sender);\n                                    ^\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\ReloadCommand.java:23: error: illegal start of expression\n                        case &quot;ITEMS&quot; -&gt; reloadItems(sender);\n                                     ^\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\ReloadCommand.java:23: error: ';' expected\n                        case &quot;ITEMS&quot; -&gt; reloadItems(sender);\n                                                   ^\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\ReloadCommand.java:23: error: not a statement\n                        case &quot;ITEMS&quot; -&gt; reloadItems(sender);\n                                                    ^\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\ReloadCommand.java:23: error: ';' expected\n                        case &quot;ITEMS&quot; -&gt; reloadItems(sender);\n                                                          ^\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\ReloadCommand.java:24: error: : expected\n                        case &quot;PACK&quot; -&gt; reloadPack(OraxenPlugin.get(), sender);\n                                   ^\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\ReloadCommand.java:24: error: illegal start of expression\n                        case &quot;PACK&quot; -&gt; reloadPack(OraxenPlugin.get(), sender);\n                                    ^\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\ReloadCommand.java:24: error: ';' expected\n                        case &quot;PACK&quot; -&gt; reloadPack(OraxenPlugin.get(), sender);\n                                                 ^\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\ReloadCommand.java:24: error: ';' expected\n                        case &quot;PACK&quot; -&gt; reloadPack(OraxenPlugin.get(), sender);\n                                                                    ^\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\ReloadCommand.java:24: error: not a statement\n                        case &quot;PACK&quot; -&gt; reloadPack(OraxenPlugin.get(), sender);\n                                                                      ^\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\ReloadCommand.java:24: error: ';' expected\n                        case &quot;PACK&quot; -&gt; reloadPack(OraxenPlugin.get(), sender);\n                                                                            ^\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\ReloadCommand.java:25: error: : expected\n                        case &quot;RECIPES&quot; -&gt; RecipesManager.reload(OraxenPlugin.get());\n                                      ^\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\ReloadCommand.java:25: error: illegal start of expression\n                        case &quot;RECIPES&quot; -&gt; RecipesManager.reload(OraxenPlugin.get());\n                                       ^\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\ReloadCommand.java:25: error: ';' expected\n                        case &quot;RECIPES&quot; -&gt; RecipesManager.reload(OraxenPlugin.get());\n                                                        ^\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\ReloadCommand.java:26: error: : expected\n                        case &quot;CONFIGS&quot; -&gt; OraxenPlugin.get().reloadConfigs();\n                                      ^\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\ReloadCommand.java:26: error: illegal start of expression\n                        case &quot;CONFIGS&quot; -&gt; OraxenPlugin.get().reloadConfigs();\n                                       ^\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\ReloadCommand.java:26: error: ';' expected\n                        case &quot;CONFIGS&quot; -&gt; OraxenPlugin.get().reloadConfigs();\n                                                      ^\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\ReloadCommand.java:27: error: : expected\n                        default -&gt; {\n                               ^\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\ReloadCommand.java:27: error: illegal start of expression\n                        default -&gt; {\n                                ^\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\ReloadCommand.java:27: error: ';' expected\n                        default -&gt; {\n                                  ^\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\ReloadCommand.java:34: error: ')' expected\n                    }\n                     ^\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\ReloadCommand.java:35: error: illegal start of expression\n                });\n                 ^\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\RepairCommand.java:27: error: ')' expected\n                    if (sender instanceof Player player) {\n                                                ^\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\RepairCommand.java:27: error: not a statement\n                    if (sender instanceof Player player) {\n                                                 ^\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\RepairCommand.java:27: error: ';' expected\n                    if (sender instanceof Player player) {\n                                                       ^\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\RepairCommand.java:55: error: 'else' without 'if'\n                    } else {\n                      ^\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\RepairCommand.java:65: error: ')' expected\n        if (!(itemMeta instanceof Damageable damageable))\n                                            ^\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\RepairCommand.java:65: error: illegal start of expression\n        if (!(itemMeta instanceof Damageable damageable))\n                                                       ^\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\commands\\RepairCommand.java:65: error: ';' expected\n        if (!(itemMeta instanceof Damageable damageable))\n                                                        ^\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\font\\Glyph.java:8: error: class, interface, or enum expected\npublic record Glyph(String name, char character, String texture, int ascent,\n       ^\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\font\\Glyph.java:11: error: class, interface, or enum expected\n    public JsonObject toJson() {\n           ^\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\font\\Glyph.java:13: error: class, interface, or enum expected\n        JsonArray chars = new JsonArray();\n        ^\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\font\\Glyph.java:14: error: class, interface, or enum expected\n        chars.add(String.valueOf(character));\n        ^\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\font\\Glyph.java:15: error: class, interface, or enum expected\n        output.add(&quot;chars&quot;, chars);\n        ^\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\font\\Glyph.java:16: error: class, interface, or enum expected\n        output.addProperty(&quot;file&quot;, texture);\n        ^\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\font\\Glyph.java:17: error: class, interface, or enum expected\n        output.addProperty(&quot;ascent&quot;, 8);\n        ^\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\font\\Glyph.java:18: error: class, interface, or enum expected\n        output.addProperty(&quot;height&quot;, height);\n        ^\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\font\\Glyph.java:19: error: class, interface, or enum expected\n        output.addProperty(&quot;type&quot;, &quot;bitmap&quot;);\n        ^\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\font\\Glyph.java:20: error: class, interface, or enum expected\n        return output;\n        ^\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\font\\Glyph.java:21: error: class, interface, or enum expected\n    }\n    ^\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\font\\Glyph.java:23: error: class, interface, or enum expected\n    public boolean hasPermission(Player player) {\n           ^\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\font\\Glyph.java:25: error: class, interface, or enum expected\n    }\n    ^\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\items\\ItemBuilder.java:71: error: ')' expected\n        if (itemMeta instanceof PotionMeta potionMeta) {\n                                          ^\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\items\\ItemBuilder.java:71: error: not a statement\n        if (itemMeta instanceof PotionMeta potionMeta) {\n                                           ^\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\items\\ItemBuilder.java:71: error: ';' expected\n        if (itemMeta instanceof PotionMeta potionMeta) {\n                                                     ^\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\items\\ItemBuilder.java:80: error: ')' expected\n        if (itemMeta instanceof TropicalFishBucketMeta tropicalFishBucketMeta) {\n                                                      ^\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\items\\ItemBuilder.java:80: error: not a statement\n        if (itemMeta instanceof TropicalFishBucketMeta tropicalFishBucketMeta) {\n                                                       ^\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\items\\ItemBuilder.java:80: error: ';' expected\n        if (itemMeta instanceof TropicalFishBucketMeta tropicalFishBucketMeta) {\n                                                                             ^\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\items\\ItemBuilder.java:280: error: ')' expected\n        if (itemMeta instanceof Damageable damageable) {\n                                          ^\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\items\\ItemBuilder.java:280: error: not a statement\n        if (itemMeta instanceof Damageable damageable) {\n                                           ^\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\items\\ItemBuilder.java:280: error: ';' expected\n        if (itemMeta instanceof Damageable damageable) {\n                                                     ^\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\items\\ItemBuilder.java:287: error: ')' expected\n        if (itemMeta instanceof LeatherArmorMeta leatherArmorMeta) {\n                                                ^\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\items\\ItemBuilder.java:287: error: not a statement\n        if (itemMeta instanceof LeatherArmorMeta leatherArmorMeta) {\n                                                 ^\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\items\\ItemBuilder.java:287: error: ';' expected\n        if (itemMeta instanceof LeatherArmorMeta leatherArmorMeta) {\n                                                                 ^\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\items\\ItemBuilder.java:294: error: ')' expected\n        if (itemMeta instanceof PotionMeta potionMeta) {\n                                          ^\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\items\\ItemBuilder.java:294: error: not a statement\n        if (itemMeta instanceof PotionMeta potionMeta) {\n                                           ^\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\items\\ItemBuilder.java:294: error: ';' expected\n        if (itemMeta instanceof PotionMeta potionMeta) {\n                                                     ^\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\items\\ItemBuilder.java:309: error: ')' expected\n        if (itemMeta instanceof SkullMeta skullMeta) {\n                                         ^\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\items\\ItemBuilder.java:309: error: not a statement\n        if (itemMeta instanceof SkullMeta skullMeta) {\n                                          ^\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\items\\ItemBuilder.java:309: error: ';' expected\n        if (itemMeta instanceof SkullMeta skullMeta) {\n                                                   ^\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\items\\ItemBuilder.java:317: error: ')' expected\n        if (itemMeta instanceof TropicalFishBucketMeta tropicalFishBucketMeta) {\n                                                      ^\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\items\\ItemBuilder.java:317: error: not a statement\n        if (itemMeta instanceof TropicalFishBucketMeta tropicalFishBucketMeta) {\n                                                       ^\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\items\\ItemBuilder.java:317: error: ';' expected\n        if (itemMeta instanceof TropicalFishBucketMeta tropicalFishBucketMeta) {\n                                                                             ^\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\mechanics\\provided\\custom\\CustomMechanicAction.java:17: error: illegal start of expression\n            CustomAction action = switch (params[0]) {\n                                  ^\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\mechanics\\provided\\custom\\CustomMechanicAction.java:17: error: not a statement\n            CustomAction action = switch (params[0]) {\n                                         ^\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\mechanics\\provided\\custom\\CustomMechanicAction.java:17: error: ';' expected\n            CustomAction action = switch (params[0]) {\n                                                    ^\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\mechanics\\provided\\custom\\CustomMechanicAction.java:18: error: orphaned case\n                case &quot;command&quot; -&gt; new CommandAction(params);\n                ^\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\mechanics\\provided\\custom\\CustomMechanicAction.java:18: error: : expected\n                case &quot;command&quot; -&gt; new CommandAction(params);\n                              ^\nD:\\compilar\\Oraxen-master\\src\\main\\java\\io\\th0rgal\\oraxen\\mechanics\\provided\\custom\\CustomMechanicAction.java:18: error: illegal start of expression\n                case &quot;command&quot; -&gt; new CommandAction(params);\n                               ^\n100 errors\n \nFAILURE: Build failed with an exception.\n \n* What went wrong:\nExecution failed for task ':compileJava'.\n&gt; Compilation failed; see the compiler error output for details.\n \n* Try:\nRun with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output. Run with --scan to get full insights.\n \n* Get more help at https://help.gradle.org\n \nBUILD FAILED in 1s\n2 actionable tasks: 2 executed\n</code></pre>\n"},{"tags":["java","exception","connection","rmi","remoteobject"],"answers":[{"tags":[],"owner":{"account_id":71739,"reputation":307143,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"down_vote_count":1,"up_vote_count":56,"is_accepted":true,"score":55,"last_activity_date":1364520807,"creation_date":1364520807,"answer_id":15696021,"question_id":15685686,"body_markdown":"This is [item A.1 in the RMI FAQ][1]. You need to either fix your /etc/hosts file or set the `java.rmi.server.hostname` property at the server.\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/technotes/guides/rmi/faq.html#domain","title":"java.rmi.ConnectException: Connection refused to host: 127.0.1.1;","body":"<p>This is <a href=\"http://docs.oracle.com/javase/7/docs/technotes/guides/rmi/faq.html#domain\" rel=\"noreferrer\">item A.1 in the RMI FAQ</a>. You need to either fix your /etc/hosts file or set the <code>java.rmi.server.hostname</code> property at the server.</p>\n"},{"tags":[],"owner":{"account_id":1059715,"reputation":131,"user_id":1061601,"display_name":"SVashisth"},"down_vote_count":2,"up_vote_count":4,"is_accepted":false,"score":2,"last_activity_date":1406549880,"creation_date":1370353128,"answer_id":16919422,"question_id":15685686,"body_markdown":"If you&#39;ve tried modifying etc/hosts and adding java.rmi.server.hostname property as well but still registry is being bind to 127.0.0.1\r\n\r\nthe issue for me was resolved after explicitly setting System property through code though the same property wasn&#39;t picked from jvm args\r\n\r\n","title":"java.rmi.ConnectException: Connection refused to host: 127.0.1.1;","body":"<p>If you've tried modifying etc/hosts and adding java.rmi.server.hostname property as well but still registry is being bind to 127.0.0.1</p>\n\n<p>the issue for me was resolved after explicitly setting System property through code though the same property wasn't picked from jvm args</p>\n"},{"tags":[],"owner":{"account_id":2615887,"reputation":209,"user_id":2264937,"display_name":"CJeremy"},"down_vote_count":2,"up_vote_count":5,"is_accepted":false,"score":3,"last_activity_date":1376013012,"creation_date":1376013012,"answer_id":18139018,"question_id":15685686,"body_markdown":"Maybe your rmiregistry not be created before client trying connect to your server and it would lead to this exception.In Linux, you can use &quot;netstat&quot; to check your rmiregistry be bond on the right port you assigned in java code.\r\n","title":"java.rmi.ConnectException: Connection refused to host: 127.0.1.1;","body":"<p>Maybe your rmiregistry not be created before client trying connect to your server and it would lead to this exception.In Linux, you can use \"netstat\" to check your rmiregistry be bond on the right port you assigned in java code.</p>\n"},{"tags":[],"owner":{"account_id":3352915,"reputation":7185,"user_id":2816571,"accept_rate":89,"display_name":"Paul"},"down_vote_count":1,"up_vote_count":10,"is_accepted":false,"score":9,"last_activity_date":1394116626,"creation_date":1394116626,"answer_id":22227585,"question_id":15685686,"body_markdown":"I found many of the Q&amp;A on this topic, not nothing was helping me - that&#39;s because my issue was more basic ( what can I say I am not a networking guru :) ).  My ip address in /etc/hosts was incorrect.  What I had tried included the following for CATALINA_OPTS:\r\n\r\n    CATALINA_OPTS=&quot;$CATALINA_OPTS -Djava.awt.headless=true -Xmx128M -server \r\n    -Dcom.sun.management.jmxremote \r\n    -Dcom.sun.management.jmxremote.port=7091 \r\n    -Dcom.sun.management.jmxremote.authenticate=false \r\n    -Dcom.sun.management.jmxremote.ssl=false\r\n    -Djava.rmi.server.hostname=A.B.C.D&quot;  #howeverI put the wrong ip here!\r\n\r\n    export CATALINA_OPTS\r\n\r\n\r\nMy problem was that I had changed my ip address many months ago, but never updated my /etc/hosts file.  it seems that by default the jconsole uses the hostname -i ip address in some fashion even though I was viewing local processes.  The best solution was to simply change the /etc/hosts file.\r\n\r\nThe other solution which can work is to get your correct ip address from /sbin/ifconfig and use that ip address when specifying the ip address in, for example, a catalina.sh script:\r\n \r\n    -Djava.rmi.server.hostname=A.B.C.D","title":"java.rmi.ConnectException: Connection refused to host: 127.0.1.1;","body":"<p>I found many of the Q&amp;A on this topic, not nothing was helping me - that's because my issue was more basic ( what can I say I am not a networking guru :) ).  My ip address in /etc/hosts was incorrect.  What I had tried included the following for CATALINA_OPTS:</p>\n\n<pre><code>CATALINA_OPTS=\"$CATALINA_OPTS -Djava.awt.headless=true -Xmx128M -server \n-Dcom.sun.management.jmxremote \n-Dcom.sun.management.jmxremote.port=7091 \n-Dcom.sun.management.jmxremote.authenticate=false \n-Dcom.sun.management.jmxremote.ssl=false\n-Djava.rmi.server.hostname=A.B.C.D\"  #howeverI put the wrong ip here!\n\nexport CATALINA_OPTS\n</code></pre>\n\n<p>My problem was that I had changed my ip address many months ago, but never updated my /etc/hosts file.  it seems that by default the jconsole uses the hostname -i ip address in some fashion even though I was viewing local processes.  The best solution was to simply change the /etc/hosts file.</p>\n\n<p>The other solution which can work is to get your correct ip address from /sbin/ifconfig and use that ip address when specifying the ip address in, for example, a catalina.sh script:</p>\n\n<pre><code>-Djava.rmi.server.hostname=A.B.C.D\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1859530,"reputation":2250,"user_id":1684389,"display_name":"Raydelto Hernandez"},"down_vote_count":1,"up_vote_count":21,"is_accepted":false,"score":20,"last_activity_date":1425255916,"creation_date":1425255916,"answer_id":28800991,"question_id":15685686,"body_markdown":"**PROBLEM SOLVED**\r\n\r\nI had exactly the same error. When the remote object got binded to the rmiregistry it was attached with the loopback IP Address which will obviously fail if you try to invoke a method from a remote address. In order to fix this we need to set the **java.rmi.server.hostname** property to the IP address where other devices can reach your rmiregistry over the network. It doesn&#39;t work when you try to set the parameter through the JVM. **It worked for me** just by adding the following line to my code just before binding the object to the rmiregistry:\r\n\r\n`System.setProperty(&quot;java.rmi.server.hostname&quot;,&quot;192.168.1.2&quot;);`\r\n\r\nIn this case the IP address on the local network of the PC binding the remote object on the RMI Registry is 192.168.1.2. ","title":"java.rmi.ConnectException: Connection refused to host: 127.0.1.1;","body":"<p><strong>PROBLEM SOLVED</strong></p>\n\n<p>I had exactly the same error. When the remote object got binded to the rmiregistry it was attached with the loopback IP Address which will obviously fail if you try to invoke a method from a remote address. In order to fix this we need to set the <strong>java.rmi.server.hostname</strong> property to the IP address where other devices can reach your rmiregistry over the network. It doesn't work when you try to set the parameter through the JVM. <strong>It worked for me</strong> just by adding the following line to my code just before binding the object to the rmiregistry:</p>\n\n<p><code>System.setProperty(\"java.rmi.server.hostname\",\"192.168.1.2\");</code></p>\n\n<p>In this case the IP address on the local network of the PC binding the remote object on the RMI Registry is 192.168.1.2. </p>\n"},{"tags":[],"owner":{"account_id":5022615,"reputation":2004,"user_id":4035655,"accept_rate":25,"display_name":"Ar maj"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1473198698,"creation_date":1473198698,"answer_id":39358386,"question_id":15685686,"body_markdown":"If you&#39;re running in a Linux environment, open the file `/etc/hosts.allow`\nadd the following line\n\n    ALL\n\n# [Wildcards][1]\n\nAlso check the `/etc/hostname` and `/etc/host` to see if there might be something wrong there.\n\nI had to change my `/ etc / host` from\n\n    127.0.0.1 localhost\n    127.0.1.1 AMK\n    \n\nto\n\n    127.0.0.1 localhost\n    127.0.0.1 AMK\n    \n\nalso wrote in `ALL` in the file `/etc/hosts.allow` which was previously completely empty\n\n# Now everything works \ndo not know how safe it is. you have to read more about possible options for `/etc/hosts.allow` to do something that requires a touch of security.\n\n  [1]: http://www.aboutlinux.info/2005/10/using-tcp-wrappers-to-secure-linux.html","title":"java.rmi.ConnectException: Connection refused to host: 127.0.1.1;","body":"<p>If you're running in a Linux environment, open the file <code>/etc/hosts.allow</code>\nadd the following line</p>\n<pre><code>ALL\n</code></pre>\n<h1><a href=\"http://www.aboutlinux.info/2005/10/using-tcp-wrappers-to-secure-linux.html\" rel=\"nofollow noreferrer\">Wildcards</a></h1>\n<p>Also check the <code>/etc/hostname</code> and <code>/etc/host</code> to see if there might be something wrong there.</p>\n<p>I had to change my <code>/ etc / host</code> from</p>\n<pre><code>127.0.0.1 localhost\n127.0.1.1 AMK\n</code></pre>\n<p>to</p>\n<pre><code>127.0.0.1 localhost\n127.0.0.1 AMK\n</code></pre>\n<p>also wrote in <code>ALL</code> in the file <code>/etc/hosts.allow</code> which was previously completely empty</p>\n<h1>Now everything works</h1>\n<p>do not know how safe it is. you have to read more about possible options for <code>/etc/hosts.allow</code> to do something that requires a touch of security.</p>\n"},{"tags":[],"owner":{"account_id":3731306,"reputation":689,"user_id":3103593,"display_name":"Joshua"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1476346664,"creation_date":1476346664,"answer_id":40015727,"question_id":15685686,"body_markdown":"It works for me after getting rid of &quot;::1&quot; in /etc/hosts.","title":"java.rmi.ConnectException: Connection refused to host: 127.0.1.1;","body":"<p>It works for me after getting rid of \"::1\" in /etc/hosts.</p>\n"},{"tags":[],"owner":{"account_id":3558487,"reputation":1004,"user_id":2971549,"display_name":"Saman Salehi"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1505281787,"creation_date":1505281787,"answer_id":46189761,"question_id":15685686,"body_markdown":"when you want to connect to remote server with **RMI** you must add a system property same as:\r\n\r\n    System.setProperty(&quot;java.rmi.server.hostname&quot;,&quot;Ip or DNS of the server&quot;);\r\nor add environment variable.\r\n\r\nFor me I got **Connection Refused** and solve it by adding this line of code in server side:\r\n\r\n     java -jar -Djava.rmi.server.hostname=&quot;ip or dns of the server&quot; packageName.jar\r\nThank to other guy for guide me to solve it.","title":"java.rmi.ConnectException: Connection refused to host: 127.0.1.1;","body":"<p>when you want to connect to remote server with <strong>RMI</strong> you must add a system property same as:</p>\n\n<pre><code>System.setProperty(\"java.rmi.server.hostname\",\"Ip or DNS of the server\");\n</code></pre>\n\n<p>or add environment variable.</p>\n\n<p>For me I got <strong>Connection Refused</strong> and solve it by adding this line of code in server side:</p>\n\n<pre><code> java -jar -Djava.rmi.server.hostname=\"ip or dns of the server\" packageName.jar\n</code></pre>\n\n<p>Thank to other guy for guide me to solve it.</p>\n"},{"tags":[],"owner":{"account_id":4977610,"reputation":169,"user_id":4003515,"display_name":"Jianxing Fan"},"down_vote_count":1,"up_vote_count":14,"is_accepted":false,"score":13,"last_activity_date":1633483136,"creation_date":1538127935,"answer_id":52552583,"question_id":15685686,"body_markdown":"you can use `LocateRegistry` such as:\r\n\r\n\r\n    Registry rgsty = LocateRegistry.createRegistry(1888);\r\n    rgsty.rebind(&quot;hello&quot;, hello);\r\n\r\n\r\n","title":"java.rmi.ConnectException: Connection refused to host: 127.0.1.1;","body":"<p>you can use <code>LocateRegistry</code> such as:</p>\n<pre><code>Registry rgsty = LocateRegistry.createRegistry(1888);\nrgsty.rebind(&quot;hello&quot;, hello);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8538329,"reputation":165,"user_id":6399245,"display_name":"Dinu94"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1547102581,"creation_date":1547102581,"answer_id":54123177,"question_id":15685686,"body_markdown":"I had the same exact problem and my issue was that I had 2 IP addresses from 2 different networks configured in the etc/hosts as below.\r\n\r\n    10.xxx.x.xxx    localhost\r\n    192.xxx.x.xxx   localhost\r\n\r\nThis should be because there was a conflict as to which IP to be used for the other devices to reach the rmiregistry over the network.\r\n\r\nOnce I removed the extra-record that is not required, I was able to solve the issue.\r\n\r\nSo my etc/hosts file had only the following record.\r\n\r\n    10.xxx.x.xxx    localhost\r\n\r\n","title":"java.rmi.ConnectException: Connection refused to host: 127.0.1.1;","body":"<p>I had the same exact problem and my issue was that I had 2 IP addresses from 2 different networks configured in the etc/hosts as below.</p>\n\n<pre><code>10.xxx.x.xxx    localhost\n192.xxx.x.xxx   localhost\n</code></pre>\n\n<p>This should be because there was a conflict as to which IP to be used for the other devices to reach the rmiregistry over the network.</p>\n\n<p>Once I removed the extra-record that is not required, I was able to solve the issue.</p>\n\n<p>So my etc/hosts file had only the following record.</p>\n\n<pre><code>10.xxx.x.xxx    localhost\n</code></pre>\n"},{"tags":[],"owner":{"account_id":147918,"reputation":1406,"user_id":359353,"accept_rate":57,"display_name":"Dula"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1548133561,"creation_date":1548133561,"answer_id":54301573,"question_id":15685686,"body_markdown":"On Windows make sure your Windows firewall is correctly configure / disabled. I had to disable the Windows firewall (because I didn&#39;t bother with configuring it) to get things to work even when I was testing with localhost.","title":"java.rmi.ConnectException: Connection refused to host: 127.0.1.1;","body":"<p>On Windows make sure your Windows firewall is correctly configure / disabled. I had to disable the Windows firewall (because I didn't bother with configuring it) to get things to work even when I was testing with localhost.</p>\n"},{"tags":[],"owner":{"account_id":4969482,"reputation":930,"user_id":3997782,"accept_rate":62,"display_name":"Leonardo Rignanese"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1567764750,"creation_date":1567764750,"answer_id":57820041,"question_id":15685686,"body_markdown":"In my case I was unable to edit the hosts file because using a pc from the university.\r\n\r\nI fixed the problem running rmiregistry in another port (instead of 1099) with:\r\n\r\n    rmiregistry &lt;port&gt;\r\n\r\nand then running the server on that port.\r\n\r\nIt was basically an error caused by occupied port.","title":"java.rmi.ConnectException: Connection refused to host: 127.0.1.1;","body":"<p>In my case I was unable to edit the hosts file because using a pc from the university.</p>\n\n<p>I fixed the problem running rmiregistry in another port (instead of 1099) with:</p>\n\n<pre><code>rmiregistry &lt;port&gt;\n</code></pre>\n\n<p>and then running the server on that port.</p>\n\n<p>It was basically an error caused by occupied port.</p>\n"},{"tags":[],"owner":{"account_id":17321602,"reputation":1,"user_id":12546933,"display_name":"Dr. Ahmad Abusukhon"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1576515995,"creation_date":1576514668,"answer_id":59360887,"question_id":15685686,"body_markdown":"When I got the same error on my machine (&quot;connection is refused&quot;), the reason was that I had defined the following on the server side: \r\n\r\n     Naming.rebind(&quot;rmi://localhost:8080/AddService&quot;\r\n       ,addService); \r\n\r\nThus the server binds both the IP = 127.0.0.1 and the port 8080.\r\n\r\nBut on the client side I had used:\r\n\r\n    AddServerInterface st = (AddServerInterface)Naming.lookup(&quot;rmi://localhost&quot;\r\n                            +&quot;/AddService&quot;);\r\n\r\nThus I forgot to add the port number after the localhost, so I rewrote the above command and added the port number 8080 as follows:\r\n\r\n    AddServerInterface st = (AddServerInterface)Naming.lookup(&quot;rmi://localhost:8080&quot;\r\n                            +&quot;/AddService&quot;);\r\n\r\nand everything worked fine.\r\n","title":"java.rmi.ConnectException: Connection refused to host: 127.0.1.1;","body":"<p>When I got the same error on my machine (\"connection is refused\"), the reason was that I had defined the following on the server side: </p>\n\n<pre><code> Naming.rebind(\"rmi://localhost:8080/AddService\"\n   ,addService); \n</code></pre>\n\n<p>Thus the server binds both the IP = 127.0.0.1 and the port 8080.</p>\n\n<p>But on the client side I had used:</p>\n\n<pre><code>AddServerInterface st = (AddServerInterface)Naming.lookup(\"rmi://localhost\"\n                        +\"/AddService\");\n</code></pre>\n\n<p>Thus I forgot to add the port number after the localhost, so I rewrote the above command and added the port number 8080 as follows:</p>\n\n<pre><code>AddServerInterface st = (AddServerInterface)Naming.lookup(\"rmi://localhost:8080\"\n                        +\"/AddService\");\n</code></pre>\n\n<p>and everything worked fine.</p>\n"},{"tags":[],"owner":{"account_id":17523593,"reputation":1,"user_id":12709109,"display_name":"Chimdesa Asebe"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1641875999,"creation_date":1578985069,"answer_id":59728842,"question_id":15685686,"body_markdown":"You can simply use:\r\n\r\non server side:\r\n\r\n    Registry &lt;objectName1&gt; = LocateRegistry.createRegistry(1099);\r\n    Registry &lt;objectName2&gt; = LocateRegistry.getRegistry();\r\n\r\n\r\non Client Side:\r\n\r\n    Registry &lt;object name you want&gt; = LocateRegistry.getRegistry();\r\n\r\n","title":"java.rmi.ConnectException: Connection refused to host: 127.0.1.1;","body":"<p>You can simply use:</p>\n<p>on server side:</p>\n<pre><code>Registry &lt;objectName1&gt; = LocateRegistry.createRegistry(1099);\nRegistry &lt;objectName2&gt; = LocateRegistry.getRegistry();\n</code></pre>\n<p>on Client Side:</p>\n<pre><code>Registry &lt;object name you want&gt; = LocateRegistry.getRegistry();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6696632,"reputation":3404,"user_id":5164462,"display_name":"User Rebo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701103661,"creation_date":1701103145,"answer_id":77558535,"question_id":15685686,"body_markdown":"## IntelliJ\r\n\r\nI used these flags in IntelliJs _VM Options_ to enable IPv6 only support, which lead to this error:\r\n\r\n\r\n```cmd\r\njava.lang.RuntimeException: java.rmi.ConnectException: Connection refused to host: ::1; nested exception is: java.net.ConnectException: Connection refused: connect in ExceptionUtil.rethrow(ExceptionUtil.java:138) Caused by: java.rmi.ConnectException: Connection refused to host: ::1; nested exception is: java.net.ConnectException: Connection refused: connect at java.rmi/sun.rmi.transport.tcp.TCPEndpoint.newSocket(TCPEndpoint.java:626) at java.rmi/sun.rmi.transport.tcp.TCPChannel.createConnection(TCPChannel.java:217) at java.rmi/sun.rmi.transport.tcp.TCPChannel.newConnection(TCPChannel.java:204) at java.rmi/sun.rmi.server.UnicastRef.newCall(UnicastRef.java:344) at java.rmi/sun.rmi.registry.RegistryImpl_Stub.lookup(RegistryImpl_Stub.java:116) in RemoteProcessSupport.lambda$acquire$2(RemoteProcessSupport.java:324) Caused by: java.net.ConnectException: Connection refused: connect at java.base/sun.nio.ch.Net.connect0(Native Method) at java.base/sun.nio.ch.Net.connect(Net.java:579) at java.base/sun.nio.ch.Net.connect(Net.java:568) at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:593) at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327) at java.base/java.net.Socket.connect(Socket.java:633) at java.base/java.net.Socket.connect(Socket.java:583) at java.base/java.net.Socket. (Socket.java:507) at java.base/java.net.Socket. (Socket.java:287) in RemoteServer$1.createSocket(RemoteServer.java:156) ... 22 more Suppressed: com.intellij.database.util.AsyncTask$Companion$FrameData: Async frame data: Submit -&gt; Prepare connection -&gt; \r\n```\r\n\r\nI commented the flags out with a `#`\r\n```cmd\r\n-Djava.net.preferIPv4Stack=false\r\n-Djava.net.preferIPv6Addresses=true\r\n```\r\n\r\nAnd started the postgres server via\r\n```cmd\r\npostgres -D &quot;C:\\Program Files\\PostgreSQL\\16\\data&quot;\r\n```","title":"java.rmi.ConnectException: Connection refused to host: 127.0.1.1;","body":"<h2>IntelliJ</h2>\n<p>I used these flags in IntelliJs <em>VM Options</em> to enable IPv6 only support, which lead to this error:</p>\n<pre><code>java.lang.RuntimeException: java.rmi.ConnectException: Connection refused to host: ::1; nested exception is: java.net.ConnectException: Connection refused: connect in ExceptionUtil.rethrow(ExceptionUtil.java:138) Caused by: java.rmi.ConnectException: Connection refused to host: ::1; nested exception is: java.net.ConnectException: Connection refused: connect at java.rmi/sun.rmi.transport.tcp.TCPEndpoint.newSocket(TCPEndpoint.java:626) at java.rmi/sun.rmi.transport.tcp.TCPChannel.createConnection(TCPChannel.java:217) at java.rmi/sun.rmi.transport.tcp.TCPChannel.newConnection(TCPChannel.java:204) at java.rmi/sun.rmi.server.UnicastRef.newCall(UnicastRef.java:344) at java.rmi/sun.rmi.registry.RegistryImpl_Stub.lookup(RegistryImpl_Stub.java:116) in RemoteProcessSupport.lambda$acquire$2(RemoteProcessSupport.java:324) Caused by: java.net.ConnectException: Connection refused: connect at java.base/sun.nio.ch.Net.connect0(Native Method) at java.base/sun.nio.ch.Net.connect(Net.java:579) at java.base/sun.nio.ch.Net.connect(Net.java:568) at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:593) at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327) at java.base/java.net.Socket.connect(Socket.java:633) at java.base/java.net.Socket.connect(Socket.java:583) at java.base/java.net.Socket. (Socket.java:507) at java.base/java.net.Socket. (Socket.java:287) in RemoteServer$1.createSocket(RemoteServer.java:156) ... 22 more Suppressed: com.intellij.database.util.AsyncTask$Companion$FrameData: Async frame data: Submit -&gt; Prepare connection -&gt; \n</code></pre>\n<p>I commented the flags out with a <code>#</code></p>\n<pre><code>-Djava.net.preferIPv4Stack=false\n-Djava.net.preferIPv6Addresses=true\n</code></pre>\n<p>And started the postgres server via</p>\n<pre><code>postgres -D &quot;C:\\Program Files\\PostgreSQL\\16\\data&quot;\n</code></pre>\n"}],"owner":{"account_id":2420278,"reputation":791,"user_id":2113403,"accept_rate":44,"display_name":"heythatsmekri"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":269996,"favorite_count":0,"down_vote_count":0,"up_vote_count":58,"accepted_answer_id":15696021,"answer_count":15,"score":58,"last_activity_date":1701103661,"creation_date":1364484147,"question_id":15685686,"body_markdown":"        java.rmi.ConnectException: Connection refused to host: 127.0.1.1; nested exception is:\r\n        java.net.ConnectException: Connection refused\r\n        at sun.rmi.transport.tcp.TCPEndpoint.newSocket(TCPEndpoint.java:619)\r\n        at sun.rmi.transport.tcp.TCPChannel.createConnection(TCPChannel.java:216)\r\n        at sun.rmi.transport.tcp.TCPChannel.newConnection(TCPChannel.java:202)\r\n        at sun.rmi.server.UnicastRef.invoke(UnicastRef.java:128)\r\n        at java.rmi.server.RemoteObjectInvocationHandler.invokeRemoteMethod(RemoteObjectInvocationHandler.java:194)\r\n        at java.rmi.server.RemoteObjectInvocationHandler.invoke(RemoteObjectInvocationHandler.java:148)\r\n        at com.sun.proxy.$Proxy0.notifyMe(Unknown Source)\r\n        at CallbackServerImpl.doCallback(CallbackServerImpl.java:149)\r\n        at CallbackServerImpl.registerForCallback(CallbackServerImpl.java:70)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\r\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.lang.reflect.Method.invoke(Method.java:601)\r\n        at sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:322)\r\n        at sun.rmi.transport.Transport$1.run(Transport.java:177)\r\n        at sun.rmi.transport.Transport$1.run(Transport.java:174)\r\n        at java.security.AccessController.doPrivileged(Native Method)\r\n        at sun.rmi.transport.Transport.serviceCall(Transport.java:173)\r\n        at sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:553)\r\n        at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:808)\r\n        at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:667)\r\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\r\n        at java.lang.Thread.run(Thread.java:722)\r\n        Caused by: java.net.ConnectException: Connection refused\r\n        at java.net.PlainSocketImpl.socketConnect(Native Method)\r\n        at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:339)\r\n        at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:200)\r\n        at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:182)\r\n        at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:391)\r\n        at java.net.Socket.connect(Socket.java:579)\r\n        at java.net.Socket.connect(Socket.java:528)\r\n        at java.net.Socket.&lt;init&gt;(Socket.java:425)\r\n        at java.net.Socket.&lt;init&gt;(Socket.java:208)\r\n        at sun.rmi.transport.proxy.RMIDirectSocketFactory.createSocket(RMIDirectSocketFactory.java:40)\r\n        at sun.rmi.transport.proxy.RMIMasterSocketFactory.createSocket(RMIMasterSocketFactory.java:146)\r\n        at sun.rmi.transport.tcp.TCPEndpoint.newSocket(TCPEndpoint.java:613)\r\n        ... 23 more\r\n\r\n\r\nI get this exception when I try to connect a remote client to my server. In both, server and client the hostName for the registryUrl of rmi is the public IP address of the server. I also tried to put localhost in server but the error doesn&#39;t change. \r\n\r\nMy java.policy is set to grant all connections to all ports and I have no firewalls enabled in the server or the client.\r\n\r\nAny suggestions what could be?","title":"java.rmi.ConnectException: Connection refused to host: 127.0.1.1;","body":"<pre><code>    java.rmi.ConnectException: Connection refused to host: 127.0.1.1; nested exception is:\n    java.net.ConnectException: Connection refused\n    at sun.rmi.transport.tcp.TCPEndpoint.newSocket(TCPEndpoint.java:619)\n    at sun.rmi.transport.tcp.TCPChannel.createConnection(TCPChannel.java:216)\n    at sun.rmi.transport.tcp.TCPChannel.newConnection(TCPChannel.java:202)\n    at sun.rmi.server.UnicastRef.invoke(UnicastRef.java:128)\n    at java.rmi.server.RemoteObjectInvocationHandler.invokeRemoteMethod(RemoteObjectInvocationHandler.java:194)\n    at java.rmi.server.RemoteObjectInvocationHandler.invoke(RemoteObjectInvocationHandler.java:148)\n    at com.sun.proxy.$Proxy0.notifyMe(Unknown Source)\n    at CallbackServerImpl.doCallback(CallbackServerImpl.java:149)\n    at CallbackServerImpl.registerForCallback(CallbackServerImpl.java:70)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:601)\n    at sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:322)\n    at sun.rmi.transport.Transport$1.run(Transport.java:177)\n    at sun.rmi.transport.Transport$1.run(Transport.java:174)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at sun.rmi.transport.Transport.serviceCall(Transport.java:173)\n    at sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:553)\n    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:808)\n    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:667)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n    at java.lang.Thread.run(Thread.java:722)\n    Caused by: java.net.ConnectException: Connection refused\n    at java.net.PlainSocketImpl.socketConnect(Native Method)\n    at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:339)\n    at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:200)\n    at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:182)\n    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:391)\n    at java.net.Socket.connect(Socket.java:579)\n    at java.net.Socket.connect(Socket.java:528)\n    at java.net.Socket.&lt;init&gt;(Socket.java:425)\n    at java.net.Socket.&lt;init&gt;(Socket.java:208)\n    at sun.rmi.transport.proxy.RMIDirectSocketFactory.createSocket(RMIDirectSocketFactory.java:40)\n    at sun.rmi.transport.proxy.RMIMasterSocketFactory.createSocket(RMIMasterSocketFactory.java:146)\n    at sun.rmi.transport.tcp.TCPEndpoint.newSocket(TCPEndpoint.java:613)\n    ... 23 more\n</code></pre>\n\n<p>I get this exception when I try to connect a remote client to my server. In both, server and client the hostName for the registryUrl of rmi is the public IP address of the server. I also tried to put localhost in server but the error doesn't change. </p>\n\n<p>My java.policy is set to grant all connections to all ports and I have no firewalls enabled in the server or the client.</p>\n\n<p>Any suggestions what could be?</p>\n"},{"tags":["java","spring","security","oauth-2.0","keycloak"],"comments":[{"owner":{"account_id":24440940,"reputation":3122,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1701073512,"post_id":77555031,"comment_id":136725083,"body_markdown":"In this case you have to use [resource-server](https://docs.spring.io/spring-security/reference/servlet/oauth2/resource-server/index.html) part not [client](https://docs.spring.io/spring-security/reference/servlet/oauth2/client/index.html) part","body":"In this case you have to use <a href=\"https://docs.spring.io/spring-security/reference/servlet/oauth2/resource-server/index.html\" rel=\"nofollow noreferrer\">resource-server</a> part not <a href=\"https://docs.spring.io/spring-security/reference/servlet/oauth2/client/index.html\" rel=\"nofollow noreferrer\">client</a> part"}],"answers":[{"tags":[],"owner":{"account_id":308139,"reputation":8189,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701103230,"creation_date":1701103230,"answer_id":77558544,"question_id":77555031,"body_markdown":"You &quot;login&quot; to an OAuth2 client (with `authorization_code` flow), not to an OAuth2 resource server and **requests to an OAuth2 client from a browser are authorized with sessions**, not `Bearer` tokens in authorization header. Before trying to configure your app as a resource server (and use tokens security), you should be sure that you can actually send tokens from what you are trying to consume it with (browsers are very bad candidates for that).\r\n\r\nAlso, **you should not mix `oauth2Login` and `oauth2ResourceServer` in the same filter chain**, the security is too different:\r\n- `oauth2Login` is based on sessions, requires CSRF protection (disabling it like you do is a mistake), and unauthorized requests to secured routes should probably be redirected to login (`302` status)\r\n- `oauth2ResourceServer` can (should?) be configured stateless (without session), is not exposed to CSRF attacks and unauthorized requests to secured routes should probably be answered `401 Unauthorized`.\r\n\r\nI suggest that you have a look at my [OAuth2 essentials](https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials#oauth_essentials) and tutorials.","title":"Keycloak + Spring 3","body":"<p>You &quot;login&quot; to an OAuth2 client (with <code>authorization_code</code> flow), not to an OAuth2 resource server and <strong>requests to an OAuth2 client from a browser are authorized with sessions</strong>, not <code>Bearer</code> tokens in authorization header. Before trying to configure your app as a resource server (and use tokens security), you should be sure that you can actually send tokens from what you are trying to consume it with (browsers are very bad candidates for that).</p>\n<p>Also, <strong>you should not mix <code>oauth2Login</code> and <code>oauth2ResourceServer</code> in the same filter chain</strong>, the security is too different:</p>\n<ul>\n<li><code>oauth2Login</code> is based on sessions, requires CSRF protection (disabling it like you do is a mistake), and unauthorized requests to secured routes should probably be redirected to login (<code>302</code> status)</li>\n<li><code>oauth2ResourceServer</code> can (should?) be configured stateless (without session), is not exposed to CSRF attacks and unauthorized requests to secured routes should probably be answered <code>401 Unauthorized</code>.</li>\n</ul>\n<p>I suggest that you have a look at my <a href=\"https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials#oauth_essentials\" rel=\"nofollow noreferrer\">OAuth2 essentials</a> and tutorials.</p>\n"}],"owner":{"account_id":20708491,"reputation":1,"user_id":16012408,"display_name":"kifor4ik"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1701103230,"creation_date":1701068643,"question_id":77555031,"body_markdown":"How I can enable **bearer-only ** mode for auth? \r\nNow when my request have no token app redirect me to KeyCloak login page but I want to get 403 forbidden.\r\n\r\nSecurityFilterChain\r\n```\r\n@Bean\r\npublic SecurityFilterChain configure(HttpSecurity http) throws Exception {\r\n    http.oauth2Login()\r\n            .and()\r\n            .csrf().disable();\r\n\r\n    http.oauth2ResourceServer().jwt();\r\n    http\r\n            .sessionManagement()\r\n            .sessionCreationPolicy(SessionCreationPolicy.ALWAYS);\r\n\r\n    http\r\n            .authorizeHttpRequests()\r\n            .requestMatchers(&quot;/test&quot;).permitAll()\r\n            .anyRequest().authenticated();\r\n\r\n    return http.build();\r\n}\r\n```\r\n\r\napplication.yml\r\n```\r\nspring:\r\n  security:\r\n    oauth2:\r\n      client:\r\n        registration:\r\n          keycloak:\r\n            client-id: paper_java\r\n            client-secret: JEEcO8mJhKzkcx2aZ2sgZ8E2JsSx4Lms\r\n            scope: openid\r\n            authorization-grant-type: authorization_code\r\n        provider:\r\n          keycloak:\r\n            issuer-uri: http://localhost:9999/realms/ss\r\n            user-name-attribute: preferred_username\r\n      resourceserver:\r\n        jwt:\r\n          issuer-uri: http://localhost:9999/realms/ss\r\n```\r\n\r\nIm trying to make keycloak only checking token validation service, but got login page.","title":"Keycloak + Spring 3","body":"<p>How I can enable **bearer-only ** mode for auth?\nNow when my request have no token app redirect me to KeyCloak login page but I want to get 403 forbidden.</p>\n<p>SecurityFilterChain</p>\n<pre><code>@Bean\npublic SecurityFilterChain configure(HttpSecurity http) throws Exception {\n    http.oauth2Login()\n            .and()\n            .csrf().disable();\n\n    http.oauth2ResourceServer().jwt();\n    http\n            .sessionManagement()\n            .sessionCreationPolicy(SessionCreationPolicy.ALWAYS);\n\n    http\n            .authorizeHttpRequests()\n            .requestMatchers(&quot;/test&quot;).permitAll()\n            .anyRequest().authenticated();\n\n    return http.build();\n}\n</code></pre>\n<p>application.yml</p>\n<pre><code>spring:\n  security:\n    oauth2:\n      client:\n        registration:\n          keycloak:\n            client-id: paper_java\n            client-secret: JEEcO8mJhKzkcx2aZ2sgZ8E2JsSx4Lms\n            scope: openid\n            authorization-grant-type: authorization_code\n        provider:\n          keycloak:\n            issuer-uri: http://localhost:9999/realms/ss\n            user-name-attribute: preferred_username\n      resourceserver:\n        jwt:\n          issuer-uri: http://localhost:9999/realms/ss\n</code></pre>\n<p>Im trying to make keycloak only checking token validation service, but got login page.</p>\n"},{"tags":["java","gradle","spotbugs"],"comments":[{"owner":{"account_id":469790,"reputation":1689,"user_id":876595,"display_name":"chehsunliu"},"score":0,"creation_date":1664300378,"post_id":73868117,"comment_id":130438495,"body_markdown":"What&#39;s the purpose of limiting SpotBugs tasks in sequential?","body":"What&#39;s the purpose of limiting SpotBugs tasks in sequential?"},{"owner":{"account_id":23204293,"reputation":66,"user_id":17298718,"display_name":"Mario Metushev"},"score":0,"creation_date":1664305413,"post_id":73868117,"comment_id":130440064,"body_markdown":"@chehsunliu SpotBugs task require a lot of resources, like 1GB of RAM. I don&#39;t have control which task will be executed at time and if gradle run more than 4 or 5 parallel Spotbugs tasks, my machine starting lock files for no reason and to fix that I need to restart the machine, nothing else helps even if you try to kill the process...\nSo that is the reason why I want only this task to run sequential :)","body":"@chehsunliu SpotBugs task require a lot of resources, like 1GB of RAM. I don&#39;t have control which task will be executed at time and if gradle run more than 4 or 5 parallel Spotbugs tasks, my machine starting lock files for no reason and to fix that I need to restart the machine, nothing else helps even if you try to kill the process... So that is the reason why I want only this task to run sequential :)"},{"owner":{"account_id":469790,"reputation":1689,"user_id":876595,"display_name":"chehsunliu"},"score":0,"creation_date":1664336038,"post_id":73868117,"comment_id":130445633,"body_markdown":"A workaround would be assigning cross-project task dependencies among all the SpotBugs tasks explicitly. But the gradle script might look ugly and not easy to maintain.\n\nIn my case, I do not run SpotBugs locally. I only run it on GitHub Actions.","body":"A workaround would be assigning cross-project task dependencies among all the SpotBugs tasks explicitly. But the gradle script might look ugly and not easy to maintain.  In my case, I do not run SpotBugs locally. I only run it on GitHub Actions."}],"answers":[{"tags":[],"owner":{"account_id":288740,"reputation":36420,"user_id":589329,"accept_rate":40,"display_name":"Vampire"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1701102948,"creation_date":1701102948,"answer_id":77558514,"question_id":73868117,"body_markdown":"To achieve what you want, you create a [shared build service](https://docs.gradle.org/current/userguide/build_services.html). This build service does not need to have any parameters and does not need to have any actual logic, it is only used for the sequencialising. You configure this build service to be used by maximum one task. And then you define all the tasks you want non-parallel to each other to use that service. This will cause only one of those tasks to run at the same time.","title":"Spotbugs sequential execution as gradle task","body":"<p>To achieve what you want, you create a <a href=\"https://docs.gradle.org/current/userguide/build_services.html\" rel=\"nofollow noreferrer\">shared build service</a>. This build service does not need to have any parameters and does not need to have any actual logic, it is only used for the sequencialising. You configure this build service to be used by maximum one task. And then you define all the tasks you want non-parallel to each other to use that service. This will cause only one of those tasks to run at the same time.</p>\n"}],"owner":{"account_id":23204293,"reputation":66,"user_id":17298718,"display_name":"Mario Metushev"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":97,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77558514,"answer_count":1,"score":1,"last_activity_date":1701102948,"creation_date":1664284041,"question_id":73868117,"body_markdown":"I have a problem with running spotbugs as sequential gradle task.\r\nI want to mentioned that the project is Java multi module based.\r\nI am running parallel gradle tasks at once(up to 8 like compile,test,…) on different modules and I do not want to change that behavior.\r\nWhat I want is just one gradle task, in my case that task is spotbugs to run sequentially and the other tasks to run in parallel.\r\nDoes gradle provides some option for that?\r\n\r\n**UPDATE**:\r\nUse the Gradle feature called BuildService :)\r\nhttps://docs.gradle.org/current/userguide/build_services.html ","title":"Spotbugs sequential execution as gradle task","body":"<p>I have a problem with running spotbugs as sequential gradle task.\nI want to mentioned that the project is Java multi module based.\nI am running parallel gradle tasks at once(up to 8 like compile,test,…) on different modules and I do not want to change that behavior.\nWhat I want is just one gradle task, in my case that task is spotbugs to run sequentially and the other tasks to run in parallel.\nDoes gradle provides some option for that?</p>\n<p><strong>UPDATE</strong>:\nUse the Gradle feature called BuildService :)\n<a href=\"https://docs.gradle.org/current/userguide/build_services.html\" rel=\"nofollow noreferrer\">https://docs.gradle.org/current/userguide/build_services.html</a></p>\n"},{"tags":["java","jpa","spring-data","repository","spring-data-jpa"],"comments":[{"owner":{"account_id":277416,"reputation":681828,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"score":2,"creation_date":1399206696,"post_id":23456197,"comment_id":35957216,"body_markdown":"Spring Data JPA heavily relies on Java naming conventions. You chose not to respect them by having an underscore in your field and accessor names. That&#39;s why you got bitten. Respect the Java naming conventions, and Spring Data JPA will be happy, and your code will be more readable as a bonus. Not that the column can be named as you want, including with underscores. What matters is your mapped field names.","body":"Spring Data JPA heavily relies on Java naming conventions. You chose not to respect them by having an underscore in your field and accessor names. That&#39;s why you got bitten. Respect the Java naming conventions, and Spring Data JPA will be happy, and your code will be more readable as a bonus. Not that the column can be named as you want, including with underscores. What matters is your mapped field names."},{"owner":{"account_id":1139113,"reputation":18996,"user_id":1123501,"accept_rate":89,"display_name":"Georgios Syngouroglou"},"score":0,"creation_date":1399207090,"post_id":23456197,"comment_id":35957343,"body_markdown":"Thank you very much for your comment. I didn&#39;t know about the java naming conventions. I found, also, this [stackoverflow question](http://stackoverflow.com/questions/150192/using-underscores-in-java-variables-and-method-names) that helped me too.","body":"Thank you very much for your comment. I didn&#39;t know about the java naming conventions. I found, also, this <a href=\"http://stackoverflow.com/questions/150192/using-underscores-in-java-variables-and-method-names\">stackoverflow question</a> that helped me too."}],"answers":[{"tags":[],"owner":{"account_id":9744,"reputation":80826,"user_id":18122,"accept_rate":80,"display_name":"Oliver Drotbohm"},"down_vote_count":14,"up_vote_count":59,"is_accepted":true,"score":45,"last_activity_date":1399301175,"creation_date":1399301175,"answer_id":23475349,"question_id":23456197,"body_markdown":"The underscore `_` is a reserved character in Spring Data query derivation (see the [reference docs][1] for details) to potentially allow manual property path description. So there are two options you have:\r\n\r\n1. Stick to the Java naming conventions of using [camel-case][2] for member variable names and everything will work as expected.\r\n2. Escape the `_` by using an additional underscore, i.e. rename your query method to `findByMunicipal__idOrderByLastnameDesc(…)`.\r\n\r\nI&#39;d recommend the former as you&#39;re not going to alienate fellow Java developers :).\r\n\r\n\r\n  [1]: http://docs.spring.io/spring-data/jpa/docs/current/reference/html/repositories.html#repositories.query-methods.query-property-expressions\r\n  [2]: http://en.wikipedia.org/wiki/CamelCase","title":"Spring-Data-Jpa Repository - Underscore on Entity Column Name","body":"<p>The underscore <code>_</code> is a reserved character in Spring Data query derivation (see the <a href=\"http://docs.spring.io/spring-data/jpa/docs/current/reference/html/repositories.html#repositories.query-methods.query-property-expressions\">reference docs</a> for details) to potentially allow manual property path description. So there are two options you have:</p>\n\n<ol>\n<li>Stick to the Java naming conventions of using <a href=\"http://en.wikipedia.org/wiki/CamelCase\">camel-case</a> for member variable names and everything will work as expected.</li>\n<li>Escape the <code>_</code> by using an additional underscore, i.e. rename your query method to <code>findByMunicipal__idOrderByLastnameDesc(…)</code>.</li>\n</ol>\n\n<p>I'd recommend the former as you're not going to alienate fellow Java developers :).</p>\n"},{"tags":[],"owner":{"account_id":2203785,"reputation":2039,"user_id":1947482,"display_name":"Valentyn Kolesnikov"},"down_vote_count":0,"up_vote_count":62,"is_accepted":false,"score":62,"last_activity_date":1478274328,"creation_date":1478274328,"answer_id":40426741,"question_id":23456197,"body_markdown":"I solved this error by renaming field to the name without underscore.\r\n\r\n    @Column(name = &quot;municipal_id&quot;, nullable = false)\r\n    private Integer municipalId; // &lt;-- field was renamed\r\n\r\n","title":"Spring-Data-Jpa Repository - Underscore on Entity Column Name","body":"<p>I solved this error by renaming field to the name without underscore.</p>\n\n<pre><code>@Column(name = \"municipal_id\", nullable = false)\nprivate Integer municipalId; // &lt;-- field was renamed\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13951257,"reputation":71,"user_id":10074718,"display_name":"Jagannath Nanda"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1531470678,"creation_date":1531468429,"answer_id":51320246,"question_id":23456197,"body_markdown":"Please add the following properties to **application.properties** file:\r\n\r\n    spring.jpa.hibernate.naming-strategy=org.hibernate.cfg.ImprovedNamingStrategy","title":"Spring-Data-Jpa Repository - Underscore on Entity Column Name","body":"<p>Please add the following properties to <strong>application.properties</strong> file:</p>\n\n<pre><code>spring.jpa.hibernate.naming-strategy=org.hibernate.cfg.ImprovedNamingStrategy\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8644989,"reputation":121,"user_id":6472461,"display_name":"C&#225;ssio Morales"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1701102630,"creation_date":1617035840,"answer_id":66858096,"question_id":23456197,"body_markdown":"According to the [Docs](https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#reference), underscore is a special character used by spring to separate properties names. If you really want to stick with snake case notation, you can set nativeQuery to true:\r\n\r\n    @Query(value = &quot;SELECT * FROM municipalperson WHERE municipal_id=?1 ORDER BY last_name DESC&quot;, nativeQuery = true)\r\n    List&lt;Municipalperson&gt; findByMunicipal_idOrderByLastnameDesc(int municipal_id);","title":"Spring-Data-Jpa Repository - Underscore on Entity Column Name","body":"<p>According to the <a href=\"https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#reference\" rel=\"nofollow noreferrer\">Docs</a>, underscore is a special character used by spring to separate properties names. If you really want to stick with snake case notation, you can set nativeQuery to true:</p>\n<pre><code>@Query(value = &quot;SELECT * FROM municipalperson WHERE municipal_id=?1 ORDER BY last_name DESC&quot;, nativeQuery = true)\nList&lt;Municipalperson&gt; findByMunicipal_idOrderByLastnameDesc(int municipal_id);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3067179,"reputation":699,"user_id":2598616,"display_name":"Gabriel Dimech"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1622620915,"creation_date":1622620915,"answer_id":67801176,"question_id":23456197,"body_markdown":"One other approach that worked for me is to use [@JsonProperty][1] to differentiate between field name used in REST request/response and that used for database.\r\nFor example:\r\n\r\n    @JsonProperty(&quot;municipalId&quot;)\r\n    private Integer municipal_id;\r\n\r\n  [1]: https://www.baeldung.com/jackson-annotations","title":"Spring-Data-Jpa Repository - Underscore on Entity Column Name","body":"<p>One other approach that worked for me is to use <a href=\"https://www.baeldung.com/jackson-annotations\" rel=\"nofollow noreferrer\">@JsonProperty</a> to differentiate between field name used in REST request/response and that used for database.\nFor example:</p>\n<pre><code>@JsonProperty(&quot;municipalId&quot;)\nprivate Integer municipal_id;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4803963,"reputation":21,"user_id":3879692,"display_name":"Ravendra Singh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681282342,"creation_date":1681282342,"answer_id":75992678,"question_id":23456197,"body_markdown":"Refer to the [official documentation here][1]\r\n- Because we treat the underscore character as a reserved character, we strongly advise following standard Java naming conventions (that is, not using underscores in property names but using camel case instead).\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-data/jdbc/docs/3.0.4/reference/html/#repositories.query-methods.query-property-expressions","title":"Spring-Data-Jpa Repository - Underscore on Entity Column Name","body":"<p>Refer to the <a href=\"https://docs.spring.io/spring-data/jdbc/docs/3.0.4/reference/html/#repositories.query-methods.query-property-expressions\" rel=\"nofollow noreferrer\">official documentation here</a></p>\n<ul>\n<li>Because we treat the underscore character as a reserved character, we strongly advise following standard Java naming conventions (that is, not using underscores in property names but using camel case instead).</li>\n</ul>\n"}],"owner":{"account_id":1139113,"reputation":18996,"user_id":1123501,"accept_rate":89,"display_name":"Georgios Syngouroglou"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":83801,"favorite_count":0,"down_vote_count":0,"up_vote_count":45,"accepted_answer_id":23475349,"answer_count":6,"score":45,"last_activity_date":1701102630,"creation_date":1399206357,"question_id":23456197,"body_markdown":"I am using spring-data-jpa on a spring webmvc project. I am facing an issue using [query creation](http://docs.spring.io/spring-data/data-jpa/docs/current/reference/html/jpa.repositories.html#jpa.query-methods.query-creation) on a Repository of one of my Entities. Below you can see my Entity, my Repository and the Exception.  \r\n  \r\n  My Entity:  \r\n  \r\n    @Entity\r\n    @Table(schema = &quot;mainschema&quot;)\r\n    @XmlRootElement\r\n    public class Municipalperson implements Serializable {\r\n\r\n        private static final long serialVersionUID = 1L;\r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        @Basic(optional = false)\r\n        @Column(nullable = false)\r\n        private Integer id;\r\n\r\n        @Basic(optional = false)\r\n        @Column(name = &quot;municipal_id&quot;, nullable = false)\r\n        private Integer municipal_id;\r\n\r\n        @Basic(optional = false)\r\n        @Column(nullable = false, length = 60)\r\n        private String firstname;\r\n\r\n        public Municipalperson(Integer id, Integer municipal_id, String firstname) {\r\n            this.id = id;\r\n            this.municipal_id = municipal_id;\r\n            this.firstname = firstname;\r\n        }\r\n\r\n\r\n        public Integer getId() {\r\n            return id;\r\n        }\r\n\r\n        public void setId(Integer id) {\r\n            this.id = id;\r\n        }\r\n\r\n        public Integer getMunicipal_id() {\r\n            return municipal_id;\r\n        }\r\n\r\n        public void setMunicipal_id(Integer municipal_id) {\r\n            this.municipal_id = municipal_id;\r\n        }\r\n\r\n        public String getFirstname() {\r\n            return firstname;\r\n        }\r\n\r\n        public void setFirstname(String firstname) {\r\n            this.firstname = firstname;\r\n        }\r\n    }\r\n  \r\nmy Repository:  \r\n  \r\n    @Repository\r\n    public interface MunicipalpersonRepository extends JpaRepository&lt;Municipalperson, Integer&gt; {\r\n\r\n        List&lt;Municipalperson&gt; findByMunicipal_idOrderByLastnameDesc(int municipal_id);\r\n    }\r\n  \r\nand the exception,  \r\n  \r\n    org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;municipalpersonRepository&#39;: Invocation of init method failed; nested exception is org.springframework.data.mapping.PropertyReferenceException: No property municipal found for type Municipalperson!  \r\n  \r\nI tried to set `municipal_id` as int, then as `Integer` and the same for the parameter `municipal_id` on my Repository, but none worked. Also, I renamed the Repository to `findByMunicipalidOrderByLastnameDesc` and `findByMunicipalIdOrderByLastnameDesc` but it didn&#39;t work either.  \r\n  \r\nFinally I **renamed** the `municipal_id` to `municipalId` (underscore removed) and also renamed getters/setters and the Repository (`findByMunicipalIdOrderByLastnameDesc`) and ***the issue was resolved***.  \r\n  \r\n  My question is why this is happening?","title":"Spring-Data-Jpa Repository - Underscore on Entity Column Name","body":"<p>I am using spring-data-jpa on a spring webmvc project. I am facing an issue using <a href=\"http://docs.spring.io/spring-data/data-jpa/docs/current/reference/html/jpa.repositories.html#jpa.query-methods.query-creation\" rel=\"noreferrer\">query creation</a> on a Repository of one of my Entities. Below you can see my Entity, my Repository and the Exception.  </p>\n\n<p>My Entity:  </p>\n\n<pre><code>@Entity\n@Table(schema = \"mainschema\")\n@XmlRootElement\npublic class Municipalperson implements Serializable {\n\n    private static final long serialVersionUID = 1L;\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Basic(optional = false)\n    @Column(nullable = false)\n    private Integer id;\n\n    @Basic(optional = false)\n    @Column(name = \"municipal_id\", nullable = false)\n    private Integer municipal_id;\n\n    @Basic(optional = false)\n    @Column(nullable = false, length = 60)\n    private String firstname;\n\n    public Municipalperson(Integer id, Integer municipal_id, String firstname) {\n        this.id = id;\n        this.municipal_id = municipal_id;\n        this.firstname = firstname;\n    }\n\n\n    public Integer getId() {\n        return id;\n    }\n\n    public void setId(Integer id) {\n        this.id = id;\n    }\n\n    public Integer getMunicipal_id() {\n        return municipal_id;\n    }\n\n    public void setMunicipal_id(Integer municipal_id) {\n        this.municipal_id = municipal_id;\n    }\n\n    public String getFirstname() {\n        return firstname;\n    }\n\n    public void setFirstname(String firstname) {\n        this.firstname = firstname;\n    }\n}\n</code></pre>\n\n<p>my Repository:  </p>\n\n<pre><code>@Repository\npublic interface MunicipalpersonRepository extends JpaRepository&lt;Municipalperson, Integer&gt; {\n\n    List&lt;Municipalperson&gt; findByMunicipal_idOrderByLastnameDesc(int municipal_id);\n}\n</code></pre>\n\n<p>and the exception,  </p>\n\n<pre><code>org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'municipalpersonRepository': Invocation of init method failed; nested exception is org.springframework.data.mapping.PropertyReferenceException: No property municipal found for type Municipalperson!  \n</code></pre>\n\n<p>I tried to set <code>municipal_id</code> as int, then as <code>Integer</code> and the same for the parameter <code>municipal_id</code> on my Repository, but none worked. Also, I renamed the Repository to <code>findByMunicipalidOrderByLastnameDesc</code> and <code>findByMunicipalIdOrderByLastnameDesc</code> but it didn't work either.  </p>\n\n<p>Finally I <strong>renamed</strong> the <code>municipal_id</code> to <code>municipalId</code> (underscore removed) and also renamed getters/setters and the Repository (<code>findByMunicipalIdOrderByLastnameDesc</code>) and <strong><em>the issue was resolved</em></strong>.  </p>\n\n<p>My question is why this is happening?</p>\n"},{"tags":["java","selenium-webdriver"],"comments":[{"owner":{"account_id":6077817,"reputation":1213,"user_id":4744568,"display_name":"pcalkins"},"score":1,"creation_date":1701196953,"post_id":77558376,"comment_id":136744645,"body_markdown":"WebDriverWaits are sort of pre-configured fluent waits.  Usually you&#39;d be working with WebDriverWaits.  Your question, as is, isn&#39;t very clear.  Can you copy/paste what the interviewer&#39;s question was?","body":"WebDriverWaits are sort of pre-configured fluent waits.  Usually you&#39;d be working with WebDriverWaits.  Your question, as is, isn&#39;t very clear.  Can you copy/paste what the interviewer&#39;s question was?"},{"owner":{"account_id":2427689,"reputation":664,"user_id":2119289,"accept_rate":20,"display_name":"Chandra Shekhar"},"score":0,"creation_date":1701226256,"post_id":77558376,"comment_id":136748379,"body_markdown":"Hey Cynol, If you have added code and asked for the solution , others can answer but you asked a general topic and multiple threads are already present for this. as @pcalkins suggested, in the realtime projects we gonna use customised waits as per project.","body":"Hey Cynol, If you have added code and asked for the solution , others can answer but you asked a general topic and multiple threads are already present for this. as @pcalkins suggested, in the realtime projects we gonna use customised waits as per project."}],"answers":[{"tags":[],"owner":{"account_id":30001393,"reputation":1,"user_id":22991307,"display_name":"Ankit kumar"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1701102549,"creation_date":1701102549,"answer_id":77558471,"question_id":77558376,"body_markdown":"Implicit Wait:\r\n\r\nImplicit wait sets a maximum time for the WebDriver to wait for an element to be present in the DOM. It is applied globally and is set once for the entire session.\r\nExplicit Wait with ExpectedConditions:\r\n\r\nUse explicit waits in combination with ExpectedConditions for more fine-grained control over waiting conditions.\r\nThread.sleep:\r\n\r\nWhile not recommended in all cases due to its static nature, you can use Thread.sleep() to pause the execution for a specified period.\r\nCustom Wait Functions:\r\n\r\nYou can create your own custom wait functions using loops and conditions based on specific requirements.\r\n","title":"What is the alternative function for fluent wait in selenium java?","body":"<p>Implicit Wait:</p>\n<p>Implicit wait sets a maximum time for the WebDriver to wait for an element to be present in the DOM. It is applied globally and is set once for the entire session.\nExplicit Wait with ExpectedConditions:</p>\n<p>Use explicit waits in combination with ExpectedConditions for more fine-grained control over waiting conditions.\nThread.sleep:</p>\n<p>While not recommended in all cases due to its static nature, you can use Thread.sleep() to pause the execution for a specified period.\nCustom Wait Functions:</p>\n<p>You can create your own custom wait functions using loops and conditions based on specific requirements.</p>\n"}],"owner":{"account_id":30005535,"reputation":1,"user_id":22994533,"display_name":"Cynol"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":1,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1701102549,"creation_date":1701101712,"question_id":77558376,"body_markdown":"What is the alternative function for fluent wait in selenium java? For ex.:- We can achieve assert true using if else condition, the same way how we can achieve fluent wait?\r\n\r\nInterviewer told me that he doesn&#39;t need a fluent wait syntax.","title":"What is the alternative function for fluent wait in selenium java?","body":"<p>What is the alternative function for fluent wait in selenium java? For ex.:- We can achieve assert true using if else condition, the same way how we can achieve fluent wait?</p>\n<p>Interviewer told me that he doesn't need a fluent wait syntax.</p>\n"},{"tags":["java","open-telemetry","open-telemetry-java"],"answers":[{"tags":[],"owner":{"account_id":7034556,"reputation":12315,"user_id":5389127,"display_name":"Ga&#235;l J"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701102062,"creation_date":1701102062,"answer_id":77558409,"question_id":77545106,"body_markdown":"_Even though the question is a bit broad, let me try to give some hints to users that would read it._\r\n\r\n1. Auto instrumentation with the java agent and manual instrumentation may live together with two distinct `OpenTelemetry` instances. The java agent would instantiate and register the global instance (`GlobalOpenTelemetry`) and your code may instantiate another `OpenTelemetry` but not register it as the global one.\r\n    * **This will work but should probably be avoided as long as possible** because you may encounter situations where some telemetry data would be &quot;attached&quot; to one `OpenTelemetry` instance or the other and you&#39;d loose &quot;correlation&quot;. For instance, with traces, you may get two traces instead of one.\r\n    * In this scenario, manual instrumentation may be configured either entirely manually by instantiating a `OpenTelemetrySdk` with manual configs, or by using environment variables / system properties as the java agent is doing thanks to `opentelemetry-sdk-extension-autoconfigure` dependency.\r\n1. Another approach, better when possible, is to use the java agent, configure it with environment variables / system properties and then **reuse the global instance in your code** thanks to `GlobalOpenTelemetry.get()`.\r\n    * If you&#39;re using a DI framework (Spring, Guice...), your code should rely on having a `OpenTelemetry` instance and use your framework to provide it by calling `GlobalOpenTelemetry.get()` at startup.","title":"Opentelemetry configuration for auto and manual instrumentation","body":"<p><em>Even though the question is a bit broad, let me try to give some hints to users that would read it.</em></p>\n<ol>\n<li>Auto instrumentation with the java agent and manual instrumentation may live together with two distinct <code>OpenTelemetry</code> instances. The java agent would instantiate and register the global instance (<code>GlobalOpenTelemetry</code>) and your code may instantiate another <code>OpenTelemetry</code> but not register it as the global one.\n<ul>\n<li><strong>This will work but should probably be avoided as long as possible</strong> because you may encounter situations where some telemetry data would be &quot;attached&quot; to one <code>OpenTelemetry</code> instance or the other and you'd loose &quot;correlation&quot;. For instance, with traces, you may get two traces instead of one.</li>\n<li>In this scenario, manual instrumentation may be configured either entirely manually by instantiating a <code>OpenTelemetrySdk</code> with manual configs, or by using environment variables / system properties as the java agent is doing thanks to <code>opentelemetry-sdk-extension-autoconfigure</code> dependency.</li>\n</ul>\n</li>\n<li>Another approach, better when possible, is to use the java agent, configure it with environment variables / system properties and then <strong>reuse the global instance in your code</strong> thanks to <code>GlobalOpenTelemetry.get()</code>.\n<ul>\n<li>If you're using a DI framework (Spring, Guice...), your code should rely on having a <code>OpenTelemetry</code> instance and use your framework to provide it by calling <code>GlobalOpenTelemetry.get()</code> at startup.</li>\n</ul>\n</li>\n</ol>\n"}],"owner":{"account_id":7034556,"reputation":12315,"user_id":5389127,"display_name":"Ga&#235;l J"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1701102062,"creation_date":1700851053,"question_id":77545106,"body_markdown":"In an application auto instrumented with the javaagent, it looks possible to add manual instrumentation according to the documentation.\r\n\r\n- For auto instrumentation, I know we can use environment variables or system properties. For instance `OTEL_TRACES_EXPORTER=logging` to enable logging exporter for traces.\r\n- Now, for manual instrumentation, we should instantiate somehow a `OpenTelemetrySdk` and register a `SdkTracerProvider` (configured either manually or via env variables/system properties as well)\r\n\r\nWhat happens if auto instrumentation configures some exporters (logging for instance) and manual instrumentation define another one (OTLP/HTTP for instance)? \r\n\r\nIs there a unique instance of `OpenTelemetry` in this case or two living each in &quot;different contexts&quot;?\r\n\r\n**Several questions but related to the same topic: how manual and auto instrumentation live together?**\r\n\r\n_(For additional context, I&#39;m looking to have manual metrics, auto instrumented traces and potentially some manual traces as well)_","title":"Opentelemetry configuration for auto and manual instrumentation","body":"<p>In an application auto instrumented with the javaagent, it looks possible to add manual instrumentation according to the documentation.</p>\n<ul>\n<li>For auto instrumentation, I know we can use environment variables or system properties. For instance <code>OTEL_TRACES_EXPORTER=logging</code> to enable logging exporter for traces.</li>\n<li>Now, for manual instrumentation, we should instantiate somehow a <code>OpenTelemetrySdk</code> and register a <code>SdkTracerProvider</code> (configured either manually or via env variables/system properties as well)</li>\n</ul>\n<p>What happens if auto instrumentation configures some exporters (logging for instance) and manual instrumentation define another one (OTLP/HTTP for instance)?</p>\n<p>Is there a unique instance of <code>OpenTelemetry</code> in this case or two living each in &quot;different contexts&quot;?</p>\n<p><strong>Several questions but related to the same topic: how manual and auto instrumentation live together?</strong></p>\n<p><em>(For additional context, I'm looking to have manual metrics, auto instrumented traces and potentially some manual traces as well)</em></p>\n"},{"tags":["java","c#",".net","executable-jar","java-interop"],"answers":[{"tags":[],"owner":{"account_id":12585,"reputation":303262,"user_id":24874,"accept_rate":78,"display_name":"Drew Noakes"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1701101755,"creation_date":1552747743,"answer_id":55198038,"question_id":55197995,"body_markdown":"IKVM is pretty heavyweight (not to mention discontinued) so if you can avoid it then it might be easier.\r\n\r\nIf the Java program can produce its output on STDOUT (i.e. write to the console) then you could read that output via your `Process` object.\r\n\r\nFor example:\r\n\r\n```\r\nProcess myProcess = new Process();\r\nmyProcess.StartInfo.UseShellExecute = false;\r\nmyProcess.StartInfo.FileName = &quot;java&quot;;\r\nmyProcess.StartInfo.Arguments = &quot;-jar D:\\\\myjava.jar&quot;;\r\nmyProcess.StartInfo.RedirectStandardOutput = true;\r\nmyProcess.Start();\r\nvar output = myProcess.StandardOutput.ReadToEnd();\r\n```\r\n\r\nYou may need to experiment with setting other properties on your `ProcessStartInfo`.","title":"Call Java method from .Net","body":"<p>IKVM is pretty heavyweight (not to mention discontinued) so if you can avoid it then it might be easier.</p>\n<p>If the Java program can produce its output on STDOUT (i.e. write to the console) then you could read that output via your <code>Process</code> object.</p>\n<p>For example:</p>\n<pre><code>Process myProcess = new Process();\nmyProcess.StartInfo.UseShellExecute = false;\nmyProcess.StartInfo.FileName = &quot;java&quot;;\nmyProcess.StartInfo.Arguments = &quot;-jar D:\\\\myjava.jar&quot;;\nmyProcess.StartInfo.RedirectStandardOutput = true;\nmyProcess.Start();\nvar output = myProcess.StandardOutput.ReadToEnd();\n</code></pre>\n<p>You may need to experiment with setting other properties on your <code>ProcessStartInfo</code>.</p>\n"}],"owner":{"account_id":15510991,"reputation":149,"user_id":11189731,"display_name":"C. Fabiani"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":570,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":55198038,"answer_count":1,"score":3,"last_activity_date":1701101755,"creation_date":1552747480,"question_id":55197995,"body_markdown":"I&#39;ve to call a java method from a C# .Net concole application.\r\n\r\nThe solution at the following [link][1] \r\n\r\n    Process myProcess = new Process();\r\n    Process.StartInfo.UseShellExecute = false;\r\n    myProcess.StartInfo.FileName = &quot;java&quot;;\r\n    myProcess.StartInfo.Arguments = &quot;-jar D:\\\\myjava.jar&quot;;\r\n    myProcess.Start();e\r\n\r\n\r\n\r\ndoesn&#39;t allow an usefull return value (e.g. a string object) from the jar file to the .Net console app.\r\n\r\nAnother approach could be use [IKVM][2] but the developments are over and it seems to be to old to be used in an stable enterprise solution.\r\n\r\nHow can I call a java method and geta string as result value? \r\n\r\n\r\n  [1]: https://forums.asp.net/t/2052058.aspx?How%20to%20call%20any%20Java%20method%20from%20C%20Net\r\n  [2]: https://www.ikvm.net/devguide/java2net.html","title":"Call Java method from .Net","body":"<p>I've to call a java method from a C# .Net concole application.</p>\n\n<p>The solution at the following <a href=\"https://forums.asp.net/t/2052058.aspx?How%20to%20call%20any%20Java%20method%20from%20C%20Net\" rel=\"nofollow noreferrer\">link</a> </p>\n\n<pre><code>Process myProcess = new Process();\nProcess.StartInfo.UseShellExecute = false;\nmyProcess.StartInfo.FileName = \"java\";\nmyProcess.StartInfo.Arguments = \"-jar D:\\\\myjava.jar\";\nmyProcess.Start();e\n</code></pre>\n\n<p>doesn't allow an usefull return value (e.g. a string object) from the jar file to the .Net console app.</p>\n\n<p>Another approach could be use <a href=\"https://www.ikvm.net/devguide/java2net.html\" rel=\"nofollow noreferrer\">IKVM</a> but the developments are over and it seems to be to old to be used in an stable enterprise solution.</p>\n\n<p>How can I call a java method and geta string as result value? </p>\n"},{"tags":["java","spring-boot","eclipse","debugging"],"comments":[{"owner":{"account_id":401843,"reputation":89758,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1701092034,"post_id":77557199,"comment_id":136728250,"body_markdown":"You&#39;re running maven, and maven is launching an entirely new JVM with your actual app. Which is entirely outside of eclipse&#39;s &quot;jurisdiction&quot; so to speak, and naturally wouldn&#39;t run any breakpoints. I&#39;m not posting this as an answer, because presumably you&#39;re looking for &quot;so, how do I fix that?&quot;. I don&#39;t have experience with m2 plugin / spring boot to tell you, unfortunately.","body":"You&#39;re running maven, and maven is launching an entirely new JVM with your actual app. Which is entirely outside of eclipse&#39;s &quot;jurisdiction&quot; so to speak, and naturally wouldn&#39;t run any breakpoints. I&#39;m not posting this as an answer, because presumably you&#39;re looking for &quot;so, how do I fix that?&quot;. I don&#39;t have experience with m2 plugin / spring boot to tell you, unfortunately."},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1701092977,"post_id":77557199,"comment_id":136728424,"body_markdown":"A call stack changes continuously during execution and is therefore only displayed for paused threads (hit the _Pause_ button to get the call stack). Please verify that the code is actually called by adding the line `System.out.println(&quot;I was here!&quot;);` or `System.err.println(&quot;I was here!&quot;);` before the first break point. What is the reason to run/debug your application via Maven (via the `exec-maven-plugin`? - please show your `pom.xml`) instead of directly?","body":"A call stack changes continuously during execution and is therefore only displayed for paused threads (hit the <i>Pause</i> button to get the call stack). Please verify that the code is actually called by adding the line <code>System.out.println(&quot;I was here!&quot;);</code> or <code>System.err.println(&quot;I was here!&quot;);</code> before the first break point. What is the reason to run/debug your application via Maven (via the <code>exec-maven-plugin</code>? - please show your <code>pom.xml</code>) instead of directly?"},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1701094619,"post_id":77557199,"comment_id":136728781,"body_markdown":"Please show your `pom.xml` as text, not as a cropped image.","body":"Please show your <code>pom.xml</code> as text, not as a cropped image."},{"owner":{"account_id":3591100,"reputation":930,"user_id":2997147,"accept_rate":52,"display_name":"FrankelStein"},"score":0,"creation_date":1701094642,"post_id":77557199,"comment_id":136728786,"body_markdown":"@rzwitserloot I run maven from Eclipse not from outside. so normally it should still be under Eclipse&#39;s &quot;jurisdiction&quot; ?. But I agree with you upon the fact that it&#39;s a maven related issue. I run a JUnit test with a breakpoint, it works just fine.","body":"@rzwitserloot I run maven from Eclipse not from outside. so normally it should still be under Eclipse&#39;s &quot;jurisdiction&quot; ?. But I agree with you upon the fact that it&#39;s a maven related issue. I run a JUnit test with a breakpoint, it works just fine."},{"owner":{"account_id":3591100,"reputation":930,"user_id":2997147,"accept_rate":52,"display_name":"FrankelStein"},"score":0,"creation_date":1701094864,"post_id":77557199,"comment_id":136728838,"body_markdown":"@howlger my code is called. the record is well added in H2 database, and also when I add a System.out, it&#39;s well displayed. I added the pom.xml as you requested.","body":"@howlger my code is called. the record is well added in H2 database, and also when I add a System.out, it&#39;s well displayed. I added the pom.xml as you requested."},{"owner":{"account_id":31180,"reputation":29173,"user_id":85421,"display_name":"user85421"},"score":1,"creation_date":1701095418,"post_id":77557199,"comment_id":136728953,"body_markdown":"you will probably have to start the application with an option to connect a remote debugger (`-agentlib:jdwp=transport=dt_socket,server=y,address=8000` or similar) and create/start a &quot;Remote Java Application&quot; configuration in Eclipse. I do not use Maven, no idea how to do that with it","body":"you will probably have to start the application with an option to connect a remote debugger (<code>-agentlib:jdwp=transport=dt_socket,server=y,address=8000</code> or similar) and create/start a &quot;Remote Java Application&quot; configuration in Eclipse. I do not use Maven, no idea how to do that with it"},{"owner":{"account_id":3591100,"reputation":930,"user_id":2997147,"accept_rate":52,"display_name":"FrankelStein"},"score":0,"creation_date":1701096811,"post_id":77557199,"comment_id":136729278,"body_markdown":"@howlger, did the pom.xml as text give you any insights ?","body":"@howlger, did the pom.xml as text give you any insights ?"},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1701097582,"post_id":77557199,"comment_id":136729431,"body_markdown":"You run/launch the Maven build script, which in turn executes your Spring Boot application. Better run/debug [the _start-class_](https://www.baeldung.com/spring-boot-main-class#maven) directly (in your `pom.xml` the _start-class_ is not configured; did you specified the _start-class_ via the Maven property [`loader.main`](https://www.baeldung.com/spring-boot-main-class#using-cli)?). Remote debugging is not needed, just run your Java application directly.","body":"You run/launch the Maven build script, which in turn executes your Spring Boot application. Better run/debug <a href=\"https://www.baeldung.com/spring-boot-main-class#maven\" rel=\"nofollow noreferrer\">the <i>start-class</i></a> directly (in your <code>pom.xml</code> the <i>start-class</i> is not configured; did you specified the <i>start-class</i> via the Maven property <a href=\"https://www.baeldung.com/spring-boot-main-class#using-cli\" rel=\"nofollow noreferrer\"><code>loader.main</code></a>?). Remote debugging is not needed, just run your Java application directly."},{"owner":{"account_id":3591100,"reputation":930,"user_id":2997147,"accept_rate":52,"display_name":"FrankelStein"},"score":0,"creation_date":1701098877,"post_id":77557199,"comment_id":136729790,"body_markdown":"@howlger it worked fine, thanx ! I executed the project as a Java application with the main class as an entry point, and not a maven execution. I still don&#39;t understand why the maven execution build doesn&#39;t work but, the Java app execution worked ! You can add that as an answer so that I Accept it.","body":"@howlger it worked fine, thanx ! I executed the project as a Java application with the main class as an entry point, and not a maven execution. I still don&#39;t understand why the maven execution build doesn&#39;t work but, the Java app execution worked ! You can add that as an answer so that I Accept it."},{"owner":{"account_id":3591100,"reputation":930,"user_id":2997147,"accept_rate":52,"display_name":"FrankelStein"},"score":0,"creation_date":1701101830,"post_id":77557199,"comment_id":136730468,"body_markdown":"I guess too (as @rzwitserloot suggested also). Although that&#39;s not what I would expect since maven is launched from Eclipse. I guess there might be an extra missing configuration somewhere to make the debug work from maven goal, or to &quot;synchronize&quot; the JVM launched by maven and Eclipse if I shall say.","body":"I guess too (as @rzwitserloot suggested also). Although that&#39;s not what I would expect since maven is launched from Eclipse. I guess there might be an extra missing configuration somewhere to make the debug work from maven goal, or to &quot;synchronize&quot; the JVM launched by maven and Eclipse if I shall say."},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1701160007,"post_id":77557199,"comment_id":136737661,"body_markdown":"The forked Java VM child processes are not executed by Maven core, but by a Maven plugin which is not part of Eclipse and which is downloaded into the local Maven repository first. As far as I know, Maven does not provide an API for that. Maven plugins can do what they want and a new version of a plugin can do it in a different way. In case of Maven-Surefire a Maven property tells Surefire to run the tests in debug mode. Surefire prints the info required to attach the debugger to the console from which Eclipse reads it. This works with different and hopefully with upcoming Surefire versions.","body":"The forked Java VM child processes are not executed by Maven core, but by a Maven plugin which is not part of Eclipse and which is downloaded into the local Maven repository first. As far as I know, Maven does not provide an API for that. Maven plugins can do what they want and a new version of a plugin can do it in a different way. In case of Maven-Surefire a Maven property tells Surefire to run the tests in debug mode. Surefire prints the info required to attach the debugger to the console from which Eclipse reads it. This works with different and hopefully with upcoming Surefire versions."}],"answers":[{"tags":[],"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1701101310,"creation_date":1701101310,"answer_id":77558333,"question_id":77557199,"body_markdown":"You debug the Maven build script, which in turn executes your Spring Boot application. If the Spring Boot application is executed in a separate (forked) JVM process (like e.g. [Maven-Surefire does][1]), then the application runs in a different Java VM instance than the one you debug (I don&#39;t know whether this is actually the case here).\r\n\r\nWhatever, better **debug your [Spring Boot start-class][2] directly as a *Java application***.\r\n\r\n\r\n  [1]: https://github.com/eclipse-m2e/m2e-core/blob/master/RELEASE_NOTES.md#automatically-launch-and-attach-remote-application-debugger-when-maven-plug-in-starts-a-forked-jvm-that-waits-for-a-debugger\r\n  [2]: https://www.baeldung.com/spring-boot-main-class#maven","title":"Eclipse not stopping at Debug Breakpoint","body":"<p>You debug the Maven build script, which in turn executes your Spring Boot application. If the Spring Boot application is executed in a separate (forked) JVM process (like e.g. <a href=\"https://github.com/eclipse-m2e/m2e-core/blob/master/RELEASE_NOTES.md#automatically-launch-and-attach-remote-application-debugger-when-maven-plug-in-starts-a-forked-jvm-that-waits-for-a-debugger\" rel=\"nofollow noreferrer\">Maven-Surefire does</a>), then the application runs in a different Java VM instance than the one you debug (I don't know whether this is actually the case here).</p>\n<p>Whatever, better <strong>debug your <a href=\"https://www.baeldung.com/spring-boot-main-class#maven\" rel=\"nofollow noreferrer\">Spring Boot start-class</a> directly as a <em>Java application</em></strong>.</p>\n"}],"owner":{"account_id":3591100,"reputation":930,"user_id":2997147,"accept_rate":52,"display_name":"FrankelStein"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":1,"is_answered":true,"view_count":79,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"accepted_answer_id":77558333,"answer_count":1,"score":-1,"last_activity_date":1701101310,"creation_date":1701090887,"question_id":77557199,"body_markdown":"I have a simple java, sprint boot project and I wanted to debug the code inside but when I launch the debug, Eclipse doesn&#39;t stop at any breakpoint.\r\n\r\nI tried to **clean the workspace**, **update maven projects**, **Delete and reimport the project**. try **debugging another project**. I even **changed the eclipse version** but none of these solutions that I found on other StackOverflow posts worked.\r\n\r\nAlso, the **&quot;Skip All Breakpoints&quot; button is not toggled on**.\r\n\r\nI noticed that the callstack is empty and I wonder if the problem may come from it ?\r\n\r\nVersions used:\r\n\r\n - JDK: 17 Eclipse:\r\n - 2023-09 (4.29.0)\r\n - Spring boot: 3.0.1\r\n\r\nAny thoughts ?\r\n\r\nHere is the debug view:\r\n\r\n[![Debug view][1]][1]\r\n\r\n\r\nHere is the code sample I am trying to debug:\r\n\r\n[![Code Sample][2]][2]\r\n\r\nHere is the maven pom.xml file I&#39;m using:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    \t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \t&lt;parent&gt;\r\n    \t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;3.0.1&lt;/version&gt;\r\n    \t\t&lt;relativePath /&gt; &lt;!-- lookup parent from repository --&gt;\r\n    \t&lt;/parent&gt;\r\n    \t&lt;groupId&gt;com.example&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;demo&lt;/artifactId&gt;\r\n    \t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n    \t&lt;name&gt;demo&lt;/name&gt;\r\n    \t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n    \t&lt;properties&gt;\r\n    \t\t&lt;java.version&gt;17&lt;/java.version&gt;\r\n    \t&lt;/properties&gt;\r\n    \r\n    \t&lt;dependencies&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n    \t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;\r\n    \t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n    \t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n    \t\t\t&lt;exclusions&gt;\r\n    \t\t\t\t&lt;exclusion&gt;\r\n    \t\t\t\t\t&lt;groupId&gt;org.junit.vintage&lt;/groupId&gt;\r\n    \t\t\t\t\t&lt;artifactId&gt;junit-vintage-engine&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;/exclusion&gt;\r\n    \t\t\t&lt;/exclusions&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springdoc&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;springdoc-openapi-starter-webmvc-ui&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;2.2.0&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;com.h2database&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;h2&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t&lt;/dependencies&gt;\r\n    \r\n    \r\n    \t&lt;build&gt;\r\n    \t\t&lt;plugins&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t&lt;/plugins&gt;\r\n    \t&lt;/build&gt;\r\n    \r\n    &lt;/project&gt;\r\n\r\n  [1]: https://i.stack.imgur.com/KMhCe.png\r\n  [2]: https://i.stack.imgur.com/sX08v.png\r\n\r\n","title":"Eclipse not stopping at Debug Breakpoint","body":"<p>I have a simple java, sprint boot project and I wanted to debug the code inside but when I launch the debug, Eclipse doesn't stop at any breakpoint.</p>\n<p>I tried to <strong>clean the workspace</strong>, <strong>update maven projects</strong>, <strong>Delete and reimport the project</strong>. try <strong>debugging another project</strong>. I even <strong>changed the eclipse version</strong> but none of these solutions that I found on other StackOverflow posts worked.</p>\n<p>Also, the <strong>&quot;Skip All Breakpoints&quot; button is not toggled on</strong>.</p>\n<p>I noticed that the callstack is empty and I wonder if the problem may come from it ?</p>\n<p>Versions used:</p>\n<ul>\n<li>JDK: 17 Eclipse:</li>\n<li>2023-09 (4.29.0)</li>\n<li>Spring boot: 3.0.1</li>\n</ul>\n<p>Any thoughts ?</p>\n<p>Here is the debug view:</p>\n<p><a href=\"https://i.stack.imgur.com/KMhCe.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/KMhCe.png\" alt=\"Debug view\" /></a></p>\n<p>Here is the code sample I am trying to debug:</p>\n<p><a href=\"https://i.stack.imgur.com/sX08v.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/sX08v.png\" alt=\"Code Sample\" /></a></p>\n<p>Here is the maven pom.xml file I'm using:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.0.1&lt;/version&gt;\n        &lt;relativePath /&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.example&lt;/groupId&gt;\n    &lt;artifactId&gt;demo&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;demo&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;org.junit.vintage&lt;/groupId&gt;\n                    &lt;artifactId&gt;junit-vintage-engine&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springdoc&lt;/groupId&gt;\n            &lt;artifactId&gt;springdoc-openapi-starter-webmvc-ui&lt;/artifactId&gt;\n            &lt;version&gt;2.2.0&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.h2database&lt;/groupId&gt;\n            &lt;artifactId&gt;h2&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n"},{"tags":["java","eclipse","jsf","glassfish"],"comments":[{"owner":{"account_id":187094,"reputation":5113,"user_id":424903,"display_name":"Gimby"},"score":0,"creation_date":1457709025,"post_id":35943009,"comment_id":59543595,"body_markdown":"No Eclipse doesn&#39;t have such a wizard built-in, the fact that Netbeans has it is only a minor convenience, in the end it is going to create a regular java class with some annotations already put on it. The bigger problem your screenshot is showing is that for some reason only very old versions of JSF are supported in your project, the tutorial requires JSF 2.1 or 2.2 by the looks of it. What happens when you set the dynamic web module facet to version 3.0 ? Can you then select JSF 2.1/2.2 ?","body":"No Eclipse doesn&#39;t have such a wizard built-in, the fact that Netbeans has it is only a minor convenience, in the end it is going to create a regular java class with some annotations already put on it. The bigger problem your screenshot is showing is that for some reason only very old versions of JSF are supported in your project, the tutorial requires JSF 2.1 or 2.2 by the looks of it. What happens when you set the dynamic web module facet to version 3.0 ? Can you then select JSF 2.1/2.2 ?"},{"owner":{"account_id":5660163,"reputation":12260,"user_id":4478047,"display_name":"Kukeltje"},"score":1,"creation_date":1457709349,"post_id":35943009,"comment_id":59543836,"body_markdown":"After Kepler came Lunar and now Mars... Maybe time to upgrade? And JBossTools plugin is much better in my opinion","body":"After Kepler came Lunar and now Mars... Maybe time to upgrade? And JBossTools plugin is much better in my opinion"}],"answers":[{"tags":[],"owner":{"account_id":4922689,"reputation":624,"user_id":3964849,"display_name":"Harish Barma"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1457758685,"creation_date":1457738100,"answer_id":35951596,"question_id":35943009,"body_markdown":"I see that version of JSF in your application is 1.1 and 1.2. \r\nIt is recommended to update it to use JSF(2.0/2.1/2.2).\r\n\r\nFor your question of creating Managed bean\r\n- create a dynamic web project\r\n  +set dynamic web module facet to version 3.0.\r\n  +set java server faces to atleast 2.0.\r\n- create package of your like in src folder\r\n  +right click on src folder  new -&gt; package(eg: com.firstApp.backing).\r\n- create a java class giving name you desire\r\n-annote class by \r\n\r\n    import javax.faces.bean.ManagedBean;\r\n    @ManagedBean\r\n    public class FirstBean implements Serializable{\r\n        `// your code`\r\n       }","title":"Cannot create Class of type &quot;JSF Managed Bean&quot; in Eclipse. JavaServer Faces category Missing","body":"<p>I see that version of JSF in your application is 1.1 and 1.2. \nIt is recommended to update it to use JSF(2.0/2.1/2.2).</p>\n\n<p>For your question of creating Managed bean\n- create a dynamic web project\n  +set dynamic web module facet to version 3.0.\n  +set java server faces to atleast 2.0.\n- create package of your like in src folder\n  +right click on src folder  new -> package(eg: com.firstApp.backing).\n- create a java class giving name you desire\n-annote class by </p>\n\n<pre><code>import javax.faces.bean.ManagedBean;\n@ManagedBean\npublic class FirstBean implements Serializable{\n    `// your code`\n   }\n</code></pre>\n"}],"owner":{"account_id":6300508,"reputation":431,"user_id":4895346,"accept_rate":29,"display_name":"Arthas"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1436,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1701101245,"creation_date":1457707344,"question_id":35943009,"body_markdown":"I am following this [Oracle tutorial][1]\r\n\r\n\r\nOne of the Steps is: &lt;br&gt;\r\nCreate the **RequestProducerBean** class\r\nRight-click on the **obe.beans** package and select **New -&gt; Other**.\r\nChoose **JavaServer Faces** from Categories and **JSF Managed Bean** from File Types. \r\n\r\nI do not have this option in my Eclipse. I have tried several things in the last 4 hours but unable to fix it.\r\nI am using GlassFish Tools for Kepler downloaded from [this site][2]. Here&#39;s a screenshot of when I **rightclick&gt;New&gt;Other** in PackageExplorer. &lt;br&gt;\r\n\r\n[![enter image description here][3]][3]\r\n\r\nAny idea how do I get it installed?\r\n\r\nAttaching a screenshot of my ProjectFacets\r\n\r\n[![enter image description here][4]][4]\r\n\r\n\r\n  [1]: http://www.oracle.com/webfolder/technetwork/tutorials/obe/java/JMS_pub_sub/JMS_pub_sub.html\r\n  [2]: https://glassfish.java.net/ide.html#eclipse\r\n  [3]: http://i.stack.imgur.com/qu58F.jpg\r\n  [4]: http://i.stack.imgur.com/qPRFx.jpg","title":"Cannot create Class of type &quot;JSF Managed Bean&quot; in Eclipse. JavaServer Faces category Missing","body":"<p>I am following this <a href=\"http://www.oracle.com/webfolder/technetwork/tutorials/obe/java/JMS_pub_sub/JMS_pub_sub.html\" rel=\"nofollow noreferrer\">Oracle tutorial</a></p>\n\n<p>One of the Steps is: <br>\nCreate the <strong>RequestProducerBean</strong> class\nRight-click on the <strong>obe.beans</strong> package and select <strong>New -> Other</strong>.\nChoose <strong>JavaServer Faces</strong> from Categories and <strong>JSF Managed Bean</strong> from File Types. </p>\n\n<p>I do not have this option in my Eclipse. I have tried several things in the last 4 hours but unable to fix it.\nI am using GlassFish Tools for Kepler downloaded from <a href=\"https://glassfish.java.net/ide.html#eclipse\" rel=\"nofollow noreferrer\">this site</a>. Here's a screenshot of when I <strong>rightclick>New>Other</strong> in PackageExplorer. <br></p>\n\n<p><a href=\"https://i.stack.imgur.com/qu58F.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qu58F.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>Any idea how do I get it installed?</p>\n\n<p>Attaching a screenshot of my ProjectFacets</p>\n\n<p><a href=\"https://i.stack.imgur.com/qPRFx.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qPRFx.jpg\" alt=\"enter image description here\"></a></p>\n"},{"tags":["java","mysql","eclipse","insert"],"comments":[{"owner":{"account_id":260172,"reputation":15404,"user_id":543572,"accept_rate":100,"display_name":"James-Jesse Drinkard"},"score":0,"creation_date":1344555224,"post_id":11893462,"comment_id":15829729,"body_markdown":"You need to provide more details than it doesn&#39;t work.  Is the mysql instance up and running? Can you get a connection? Where is it failing? Do you have a stack trace? Besides that, your statement: &quot;I&#39;m trying to input data into MySQL workbench through eclipse&quot; doesn&#39;t make any sense to me?","body":"You need to provide more details than it doesn&#39;t work.  Is the mysql instance up and running? Can you get a connection? Where is it failing? Do you have a stack trace? Besides that, your statement: &quot;I&#39;m trying to input data into MySQL workbench through eclipse&quot; doesn&#39;t make any sense to me?"},{"owner":{"account_id":180511,"reputation":8300,"user_id":413872,"accept_rate":95,"display_name":"travega"},"score":0,"creation_date":1344555255,"post_id":11893462,"comment_id":15829738,"body_markdown":"Ok so the terminology you need here is that you are trying to input data into you MySQL `database` rather then `workbench`. Workbench is just the name MySQL gives to their database management tool. Anyways, back to your question can you give some excerpts from the error message you get...?","body":"Ok so the terminology you need here is that you are trying to input data into you MySQL <code>database</code> rather then <code>workbench</code>. Workbench is just the name MySQL gives to their database management tool. Anyways, back to your question can you give some excerpts from the error message you get...?"},{"owner":{"account_id":1708270,"reputation":407,"user_id":1566884,"accept_rate":25,"display_name":"Ed Lee"},"score":0,"creation_date":1344555494,"post_id":11893462,"comment_id":15829796,"body_markdown":"I already have the db made. I&#39;m trying to insert the values in their respective spots.And the mysql instance is running","body":"I already have the db made. I&#39;m trying to insert the values in their respective spots.And the mysql instance is running"},{"owner":{"account_id":1708270,"reputation":407,"user_id":1566884,"accept_rate":25,"display_name":"Ed Lee"},"score":0,"creation_date":1344555569,"post_id":11893462,"comment_id":15829814,"body_markdown":"I didn&#39;t get any error messages. However when I refresh the db in MySQL workbench, the values do not appear.","body":"I didn&#39;t get any error messages. However when I refresh the db in MySQL workbench, the values do not appear."},{"owner":{"account_id":71085,"reputation":105190,"user_id":205608,"accept_rate":69,"display_name":"O. Jones"},"score":0,"creation_date":1344559174,"post_id":11893462,"comment_id":15830506,"body_markdown":"Do you need backticks rather than apostrophes in your table names? Did you check the result of your executeQuery statement? Is your connection rigged up to autocommit after each statement? It&#39;s good practice always to close your result sets and connections when you&#39;re done with them.","body":"Do you need backticks rather than apostrophes in your table names? Did you check the result of your executeQuery statement? Is your connection rigged up to autocommit after each statement? It&#39;s good practice always to close your result sets and connections when you&#39;re done with them."}],"answers":[{"tags":[],"owner":{"account_id":1669972,"reputation":2383,"user_id":1536611,"accept_rate":86,"display_name":"km1"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1344569241,"creation_date":1344569241,"answer_id":11895058,"question_id":11893462,"body_markdown":"Have you tried committing?\r\n      \r\n   `con.commit();`","title":"How to input data into MySQL from Eclipse","body":"<p>Have you tried committing?</p>\n\n<p><code>con.commit();</code></p>\n"},{"tags":[],"owner":{"account_id":1250235,"reputation":6632,"user_id":1210779,"accept_rate":65,"display_name":"Sai Ye Yan Naing Aye"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1344573719,"creation_date":1344573411,"answer_id":11895551,"question_id":11893462,"body_markdown":"Change your code likes this;\r\n\r\n        public class MySQL{\r\n              public static void main(String[] args)throws Exception{\r\n                  Class.forName(&quot;com.mysql.jdbc.Driver&quot;);\r\n                  try{\r\n                      Connection con = DriverManager.getConnection(&quot;jdbc:mysql://localhost:3306/database&quot;,&quot;root&quot;,&quot;root&quot;);\r\n                       PreparedStatement stmt = con.prepareStatement(&quot;INSERT INTO &#39;database&#39;.&#39;Table&#39;(Account_ID,First_Name,Last_Name) VALUES (?,?,?)&quot;);\r\n                       stmt.setString(1, &quot;hello12&quot;);\r\n                       stmt.setString(2, &quot;Ed&quot;);\r\n                       stmt.setString(3, &quot;Lee&quot;);\r\n                       stmt.executeUpdate();\r\n                  } catch (Exception e) {\r\n                       e.printStackTrace();\r\n                  } finally {\r\n                       stmt.close();\r\n                       con.close();\r\n                  }\r\n              }\r\n\r\n         }\r\n","title":"How to input data into MySQL from Eclipse","body":"<p>Change your code likes this;</p>\n\n<pre><code>    public class MySQL{\n          public static void main(String[] args)throws Exception{\n              Class.forName(\"com.mysql.jdbc.Driver\");\n              try{\n                  Connection con = DriverManager.getConnection(\"jdbc:mysql://localhost:3306/database\",\"root\",\"root\");\n                   PreparedStatement stmt = con.prepareStatement(\"INSERT INTO 'database'.'Table'(Account_ID,First_Name,Last_Name) VALUES (?,?,?)\");\n                   stmt.setString(1, \"hello12\");\n                   stmt.setString(2, \"Ed\");\n                   stmt.setString(3, \"Lee\");\n                   stmt.executeUpdate();\n              } catch (Exception e) {\n                   e.printStackTrace();\n              } finally {\n                   stmt.close();\n                   con.close();\n              }\n          }\n\n     }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2402,"reputation":14054,"user_id":3340,"accept_rate":93,"display_name":"Jacob Schoen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1344628349,"creation_date":1344627897,"answer_id":11908259,"question_id":11893462,"body_markdown":"As suggested by others you need to commit the changes you made in your sql statements. Here is how it should look:\r\n\r\n    import java.sql.Connection;\r\n    import java.sql.DriverManager;\r\n    import java.sql.PreparedStatement;\r\n    \r\n    public class MySQL{\r\n    \r\n        public static void main(String[] args) throws Exception {\r\n            Class.forName(&quot;com.mysql.jdbc.Driver&quot;);\r\n            Connection con = null;\r\n            PreparedStatement stmt = null;\r\n            try {\r\n                con = DriverManager.getConnection(&quot;jdbc:mysql://localhost:3306/database&quot;, &quot;root&quot;, &quot;root&quot;);\r\n                stmt = con.prepareStatement(&quot;INSERT INTO &#39;database&#39;.&#39;Table&#39;(Account_ID,First_Name,Last_Name) VALUES (?,?,?)&quot;);\r\n                stmt.setString(1, &quot;hello12&quot;);\r\n                stmt.setString(2, &quot;Ed&quot;);\r\n                stmt.setString(3, &quot;Lee&quot;);\r\n                stmt.executeUpdate();\r\n                conn.commit();\r\n            } catch (Exception e) {\r\n                e.printStackTrace();\r\n            } finally {\r\n                if (stmt != null) {\r\n                    try {\r\n                       stmt.close();\r\n                    } catch (SQLException ex) {\r\n                    }\r\n                }\r\n                if (con != null) {\r\n                    try {\r\n                       con.close();                    \r\n                    } catch (SQLException ex) {\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\nImport things to note that have been changed. \r\n\r\n- You declare the variables before the try block so that they are accessible in the finally block, but initialize them inside the try block in case they throw an exception.\r\n- The `PreparedStatement` replaces the new values with `?` syntax instead of being hard coded. In a real application those will end up being passed in, and if you just did String concatenation, you would be opening yourself up to SQL injection or other problems.\r\n- The finally block is used to free any resources regardless if an exception is thrown. So say you create the connection and prepared statement, but an error gets thrown executing it. The code in the finally block will still run to close the statement and connection, freeing those resources.","title":"How to input data into MySQL from Eclipse","body":"<p>As suggested by others you need to commit the changes you made in your sql statements. Here is how it should look:</p>\n\n<pre><code>import java.sql.Connection;\nimport java.sql.DriverManager;\nimport java.sql.PreparedStatement;\n\npublic class MySQL{\n\n    public static void main(String[] args) throws Exception {\n        Class.forName(\"com.mysql.jdbc.Driver\");\n        Connection con = null;\n        PreparedStatement stmt = null;\n        try {\n            con = DriverManager.getConnection(\"jdbc:mysql://localhost:3306/database\", \"root\", \"root\");\n            stmt = con.prepareStatement(\"INSERT INTO 'database'.'Table'(Account_ID,First_Name,Last_Name) VALUES (?,?,?)\");\n            stmt.setString(1, \"hello12\");\n            stmt.setString(2, \"Ed\");\n            stmt.setString(3, \"Lee\");\n            stmt.executeUpdate();\n            conn.commit();\n        } catch (Exception e) {\n            e.printStackTrace();\n        } finally {\n            if (stmt != null) {\n                try {\n                   stmt.close();\n                } catch (SQLException ex) {\n                }\n            }\n            if (con != null) {\n                try {\n                   con.close();                    \n                } catch (SQLException ex) {\n                }\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>Import things to note that have been changed. </p>\n\n<ul>\n<li>You declare the variables before the try block so that they are accessible in the finally block, but initialize them inside the try block in case they throw an exception.</li>\n<li>The <code>PreparedStatement</code> replaces the new values with <code>?</code> syntax instead of being hard coded. In a real application those will end up being passed in, and if you just did String concatenation, you would be opening yourself up to SQL injection or other problems.</li>\n<li>The finally block is used to free any resources regardless if an exception is thrown. So say you create the connection and prepared statement, but an error gets thrown executing it. The code in the finally block will still run to close the statement and connection, freeing those resources.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":3107277,"reputation":1237,"user_id":2629813,"accept_rate":100,"display_name":"Akshatha S R"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1499156585,"creation_date":1499156585,"answer_id":44900692,"question_id":11893462,"body_markdown":"Change the following line \r\n\r\n    PreparedStatement stmt = con.prepareStatement(&quot;INSERT INTO &#39;database&#39;.&#39;Table&#39;(Account_ID,First_Name,Last_Name) VALUES (&#39;hello12&#39;,&#39;Ed&#39;,&#39;Lee&#39;)&quot;);\r\n\r\nto \r\n\r\n    PreparedStatement stmt = con.prepareStatement(&quot;INSERT INTO `database`.`Table`(Account_ID,First_Name,Last_Name) VALUES (&#39;hello12&#39;,&#39;Ed&#39;,&#39;Lee&#39;)&quot;);\r\n\r\nthe single quotes used for the database name and the table name will throw a syntax error. Instead use ` this symbol. ","title":"How to input data into MySQL from Eclipse","body":"<p>Change the following line </p>\n\n<pre><code>PreparedStatement stmt = con.prepareStatement(\"INSERT INTO 'database'.'Table'(Account_ID,First_Name,Last_Name) VALUES ('hello12','Ed','Lee')\");\n</code></pre>\n\n<p>to </p>\n\n<pre><code>PreparedStatement stmt = con.prepareStatement(\"INSERT INTO `database`.`Table`(Account_ID,First_Name,Last_Name) VALUES ('hello12','Ed','Lee')\");\n</code></pre>\n\n<p>the single quotes used for the database name and the table name will throw a syntax error. Instead use ` this symbol. </p>\n"}],"owner":{"account_id":1708270,"reputation":407,"user_id":1566884,"accept_rate":25,"display_name":"Ed Lee"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":15318,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":4,"score":0,"last_activity_date":1701100990,"creation_date":1344555046,"question_id":11893462,"body_markdown":"I&#39;m trying to input data into MySQL database through eclipse. Here&#39;s what I have so far:\r\n\r\n    import java.sql.DriverManager;\r\n    import java.sql.Connection;\r\n    import java.sql.ResultSet;\r\n    import java.sql.PreparedStatement;\r\n    import com.mysql.jdbc.Statement;\r\n\r\n    public class MySQL{\r\n\r\n    public static void main(String[] args)throws Exception{\r\n\r\n        Class.forName(&quot;com.mysql.jdbc.Driver&quot;);\r\n    \r\n        Connection con = DriverManager.getConnection(&quot;jdbc:mysql://localhost:3306/database&quot;,&quot;root&quot;,&quot;root&quot;);\r\n    \r\n        PreparedStatement stmt = con.prepareStatement(&quot;INSERT INTO &#39;database&#39;.&#39;Table&#39;(Account_ID,First_Name,Last_Name) VALUES (&#39;hello12&#39;,&#39;Ed&#39;,&#39;Lee&#39;)&quot;);\r\n  \r\n        ResultSet result = stmt.executeQuery();}\r\n\r\n     }\r\n\r\nIt doesn&#39;t work for some reason...any ideas?","title":"How to input data into MySQL from Eclipse","body":"<p>I'm trying to input data into MySQL database through eclipse. Here's what I have so far:</p>\n\n<pre><code>import java.sql.DriverManager;\nimport java.sql.Connection;\nimport java.sql.ResultSet;\nimport java.sql.PreparedStatement;\nimport com.mysql.jdbc.Statement;\n\npublic class MySQL{\n\npublic static void main(String[] args)throws Exception{\n\n    Class.forName(\"com.mysql.jdbc.Driver\");\n\n    Connection con = DriverManager.getConnection(\"jdbc:mysql://localhost:3306/database\",\"root\",\"root\");\n\n    PreparedStatement stmt = con.prepareStatement(\"INSERT INTO 'database'.'Table'(Account_ID,First_Name,Last_Name) VALUES ('hello12','Ed','Lee')\");\n\n    ResultSet result = stmt.executeQuery();}\n\n }\n</code></pre>\n\n<p>It doesn't work for some reason...any ideas?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"score":1,"creation_date":1701101255,"post_id":77558282,"comment_id":136730350,"body_markdown":"You only print something if `s==i`. Seems that never evaluates to true. Set a breakpoint, debug this.","body":"You only print something if <code>s==i</code>. Seems that never evaluates to true. Set a breakpoint, debug this."},{"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"score":1,"creation_date":1701104981,"post_id":77558282,"comment_id":136731077,"body_markdown":"You need to initialize s to 0 inside the outer loop.","body":"You need to initialize s to 0 inside the outer loop."},{"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"score":1,"creation_date":1701105369,"post_id":77558282,"comment_id":136731151,"body_markdown":"Here&#39;s a tip.  In the future, put ubiquitous print statements inside your code to see what is going on, printing out interim values of variables. That is my first goto for debugging.  A debugger as @f1sh suggested would be better but there is a learning curve there which you should try and play with `before` you need it.   The best IDE&#39;s have them built in.","body":"Here&#39;s a tip.  In the future, put ubiquitous print statements inside your code to see what is going on, printing out interim values of variables. That is my first goto for debugging.  A debugger as @f1sh suggested would be better but there is a learning curve there which you should try and play with <code>before</code> you need it.   The best IDE&#39;s have them built in."}],"owner":{"account_id":25831509,"reputation":1,"user_id":19568597,"display_name":"Jonnalagedda KESAVA UMAMAHESWA"},"comment_count":3,"delete_vote_count":1,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"closed_date":1701103651,"answer_count":0,"score":-3,"last_activity_date":1701100882,"creation_date":1701100882,"question_id":77558282,"body_markdown":"I wrote following code and Ran:\r\npublic class Forloop1 {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tint i,n,d,s=0;\r\n\t\tfor(i=100;i&lt;1000;i++){\t\r\n\t\t\tn=i;\r\n\t\t\twhile(n&gt;0)\r\n\t\t\t{\r\n\t\t\t\td=n%10;\r\n\t\t\t\ts=s+(d*d*d);\r\n\t\t\t\tn=n/10;\r\n\t\t\t}\r\n\t\t\t\tif(s==i)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tSystem.out.println(i);\r\n\t\t\t\t\t}\t\t\t\t\r\n\t\t}\r\n\t}\r\n}\r\n\r\nNo errors shown. But, no output displayed.\r\nPlease correct.\r\n\r\nSolution / correction.\r\nTried below:\r\npublic class Forloop1 {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tint i,n,d,s=0;\r\n\t\tfor(i=100;i&lt;1000;i++){\t\r\n\t\t\tn=i;\r\n\t\t\twhile(n&gt;0)\r\n\t\t\t{\r\n\t\t\t\td=n%10;\r\n\t\t\t\ts=s+(d*d*d);\r\n\t\t\t\tn=n/10;\r\n\t\t\t}\r\n\t\t\t\tif(s==i)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tSystem.out.println(i);\r\n\t\t\t\t\t}\t\t\t\t\r\n\t\t}\r\n\t}\r\n}","title":"Finding 3 digit armstrong numbers in Java","body":"<p>I wrote following code and Ran:\npublic class Forloop1 {</p>\n<pre><code>public static void main(String[] args) {\n    int i,n,d,s=0;\n    for(i=100;i&lt;1000;i++){  \n        n=i;\n        while(n&gt;0)\n        {\n            d=n%10;\n            s=s+(d*d*d);\n            n=n/10;\n        }\n            if(s==i)\n                {\n                    System.out.println(i);\n                }               \n    }\n}\n</code></pre>\n<p>}</p>\n<p>No errors shown. But, no output displayed.\nPlease correct.</p>\n<p>Solution / correction.\nTried below:\npublic class Forloop1 {</p>\n<pre><code>public static void main(String[] args) {\n    int i,n,d,s=0;\n    for(i=100;i&lt;1000;i++){  \n        n=i;\n        while(n&gt;0)\n        {\n            d=n%10;\n            s=s+(d*d*d);\n            n=n/10;\n        }\n            if(s==i)\n                {\n                    System.out.println(i);\n                }               \n    }\n}\n</code></pre>\n<p>}</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":17835,"reputation":303885,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1701094484,"post_id":77557308,"comment_id":136728748,"body_markdown":"The Gradle build configuration has traditionally been Groovy and Kotlin is the &quot;new&quot; joiner. There was never a Java option, so either you are misremembering or you used a different tool. It seems like you&#39;re confusing the language for your application code with the language you use to configure your build. Please show us what your full code looks like and where you placed it relative to your project directory.","body":"The Gradle build configuration has traditionally been Groovy and Kotlin is the &quot;new&quot; joiner. There was never a Java option, so either you are misremembering or you used a different tool. It seems like you&#39;re confusing the language for your application code with the language you use to configure your build. Please show us what your full code looks like and where you placed it relative to your project directory."}],"answers":[{"tags":[],"owner":{"account_id":216120,"reputation":49213,"user_id":471160,"accept_rate":90,"display_name":"marcinj"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701100563,"creation_date":1701100563,"answer_id":77558255,"question_id":77557308,"body_markdown":"&gt;I have been away from android studio for a bit and there used to be a Java build configuration language option.\r\n\r\nCurrently for configuring builds gradle tool is used and scripting language is groovy or kotlin. Java was never an option here. For more details look in here:\r\n\r\nhttps://developer.android.com/build\r\n\r\n&gt; I tried using kotlin and I get an error of Expecting member declaration when I use public void startGame(View view){} I also imported android.view.View and it is gray. which says unused import. What am I missing?\r\n\r\nIt looks like you are trying to use java syntax in a kotlin file (*.kt). In kotlin you dont write `public void` for declaring functions, you should use `fun` keyword. A function should look like:\r\n\r\n    fun startGame(vide: View) {\r\n    }\r\n\r\nfor learning kotlin I suggest:\r\n\r\nhttps://developer.android.com/kotlin/learn","title":"where is the java build configuration language in Android Studio Giraffe | 2022.3.1","body":"<blockquote>\n<p>I have been away from android studio for a bit and there used to be a Java build configuration language option.</p>\n</blockquote>\n<p>Currently for configuring builds gradle tool is used and scripting language is groovy or kotlin. Java was never an option here. For more details look in here:</p>\n<p><a href=\"https://developer.android.com/build\" rel=\"nofollow noreferrer\">https://developer.android.com/build</a></p>\n<blockquote>\n<p>I tried using kotlin and I get an error of Expecting member declaration when I use public void startGame(View view){} I also imported android.view.View and it is gray. which says unused import. What am I missing?</p>\n</blockquote>\n<p>It looks like you are trying to use java syntax in a kotlin file (*.kt). In kotlin you dont write <code>public void</code> for declaring functions, you should use <code>fun</code> keyword. A function should look like:</p>\n<pre><code>fun startGame(vide: View) {\n}\n</code></pre>\n<p>for learning kotlin I suggest:</p>\n<p><a href=\"https://developer.android.com/kotlin/learn\" rel=\"nofollow noreferrer\">https://developer.android.com/kotlin/learn</a></p>\n"}],"owner":{"account_id":177027,"reputation":1131,"user_id":408112,"accept_rate":59,"display_name":"Dean-O"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1701100849,"creation_date":1701091871,"question_id":77557308,"body_markdown":"I have been away from android studio for a bit and there used to be a Java build configuration language option.  Not all that I see is 2 Kotlin options and one Groovy option.  I have an Udemy course I want to play with, and it is a Java based android tutorial.  I tried using Kotlin and I get an error of Expecting member declaration when I use public void startGame(View view){}  I also imported android.view.View and it is gray. Which says unused import.  What am I missing?\r\n\r\nI have googled for answers to this and have not found an option.  I have reached out to the Udemy author too and no reply.","title":"where is the java build configuration language in Android Studio Giraffe | 2022.3.1","body":"<p>I have been away from android studio for a bit and there used to be a Java build configuration language option.  Not all that I see is 2 Kotlin options and one Groovy option.  I have an Udemy course I want to play with, and it is a Java based android tutorial.  I tried using Kotlin and I get an error of Expecting member declaration when I use public void startGame(View view){}  I also imported android.view.View and it is gray. Which says unused import.  What am I missing?</p>\n<p>I have googled for answers to this and have not found an option.  I have reached out to the Udemy author too and no reply.</p>\n"},{"tags":["java","open-telemetry","open-telemetry-java"],"comments":[{"owner":{"account_id":111923,"reputation":649,"user_id":295416,"display_name":"trask"},"score":0,"creation_date":1701118323,"post_id":77558266,"comment_id":136733308,"body_markdown":"high cardinality of akka http metrics sounds like a bug, can you report an issue with more details at https://github.com/open-telemetry/opentelemetry-java-instrumentation/issues","body":"high cardinality of akka http metrics sounds like a bug, can you report an issue with more details at <a href=\"https://github.com/open-telemetry/opentelemetry-java-instrumentation/issues\" rel=\"nofollow noreferrer\">github.com/open-telemetry/opentelemetry-java-instrumentation&zwnj;&#8203;/&hellip;</a>"},{"owner":{"account_id":7034556,"reputation":12315,"user_id":5389127,"display_name":"Ga&#235;l J"},"score":0,"creation_date":1701155433,"post_id":77558266,"comment_id":136736923,"body_markdown":"@trask I opened a [discussion](https://github.com/open-telemetry/opentelemetry-java-instrumentation/discussions/9959), not sure it&#39;s necessarily a bug","body":"@trask I opened a <a href=\"https://github.com/open-telemetry/opentelemetry-java-instrumentation/discussions/9959\" rel=\"nofollow noreferrer\">discussion</a>, not sure it&#39;s necessarily a bug"}],"owner":{"account_id":7034556,"reputation":12315,"user_id":5389127,"display_name":"Ga&#235;l J"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1701100789,"creation_date":1701100716,"question_id":77558266,"body_markdown":"When using OpenTelemetry Java agent, we get many libraries auto instrumented.\r\n\r\nIt&#39;s possible to disable a library instrumentation with `OTEL_INSTRUMENTATION_[NAME]_ENABLED` but this disables all sorts of instrumentation: metrics and traces for instance.\r\n\r\n**Is there a way to disable a library instrumentation for only for some &quot;scope&quot; like only disable metrics but keep traces?**\r\n\r\nOr is the only way out of this to implement some filtering later (in OpenTelemetry collector for instance if using it)?\r\n\r\n---\r\n\r\nThe concrete use case for this is that I&#39;m using Akka HTTP in my application and I do want to collect its traces, but I really don&#39;t care about its metrics (there&#39;s a label with the route which makes it have a huge cardinality moreover).","title":"How to disable auto instrumentation of a library but only for metrics and keep traces","body":"<p>When using OpenTelemetry Java agent, we get many libraries auto instrumented.</p>\n<p>It's possible to disable a library instrumentation with <code>OTEL_INSTRUMENTATION_[NAME]_ENABLED</code> but this disables all sorts of instrumentation: metrics and traces for instance.</p>\n<p><strong>Is there a way to disable a library instrumentation for only for some &quot;scope&quot; like only disable metrics but keep traces?</strong></p>\n<p>Or is the only way out of this to implement some filtering later (in OpenTelemetry collector for instance if using it)?</p>\n<hr />\n<p>The concrete use case for this is that I'm using Akka HTTP in my application and I do want to collect its traces, but I really don't care about its metrics (there's a label with the route which makes it have a huge cardinality moreover).</p>\n"},{"tags":["java","spring","spring-security"],"comments":[{"owner":{"account_id":6463892,"reputation":15974,"user_id":5277820,"accept_rate":68,"display_name":"dur"},"score":3,"creation_date":1701079079,"post_id":77554644,"comment_id":136726074,"body_markdown":"Show your Spring Security `TRACE` logs. It shoud show the reason. But probably it is the missing CSRF token.","body":"Show your Spring Security <code>TRACE</code> logs. It shoud show the reason. But probably it is the missing CSRF token."},{"owner":{"account_id":42916,"reputation":22347,"user_id":125212,"accept_rate":52,"display_name":"Jackie"},"score":0,"creation_date":1701099070,"post_id":77554644,"comment_id":136729837,"body_markdown":"@dur The answer in my case wasn&#39;t telling me the csrf thing because I had accidentally deleted that while I was debugging a 415 issue. See post for full explanation but yeah thank you for that direction.","body":"@dur The answer in my case wasn&#39;t telling me the csrf thing because I had accidentally deleted that while I was debugging a 415 issue. See post for full explanation but yeah thank you for that direction."}],"answers":[{"tags":[],"owner":{"account_id":11464827,"reputation":291,"user_id":8403338,"display_name":"Mohamd Imran"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1701063101,"creation_date":1701063101,"answer_id":77554692,"question_id":77554644,"body_markdown":"It seems like Spring Security configuration what might be the cause for the 403 Forbidden response for your POST request. The `authorizeHttpRequests` method you&#39;ve shared is granting all requests `permitAll()` , so it should not be causing the issue. So i think Spring Security may be expecting a CSRF token for the POST request, and in Postman might not be sending it. Try disabling CSRF for now to see if it resolves the issue. You can do this by modifying your security configuration `.csrf().disable()` .\r\nAdd to your `authorizeHttpRequests` chain ::\r\n\r\n    .authorizeHttpRequests((authz) -&gt; authz\r\n        .anyRequest().permitAll()\r\n    )\r\n    .csrf().disable();\r\n\r\n\r\n\r\nSide Note : It is not a good idea Disabling CSRF for production, but it helps you in debugging\r\n\r\nAlso please check that you have the `@EnableWebSecurity` annotation added to your configuration class. This annotation enables Spring Security&#39;s web security support.\r\ne.g.\r\n\r\n    @EnableWebSecurity\r\n    public class SecurityConfig extends WebSecurityConfigurerAdapter {}\r\n\r\nHope this helps you \r\n\r\n","title":"Why is Spring Boot returning a 403 on POST when permitAll is being used?","body":"<p>It seems like Spring Security configuration what might be the cause for the 403 Forbidden response for your POST request. The <code>authorizeHttpRequests</code> method you've shared is granting all requests <code>permitAll()</code> , so it should not be causing the issue. So i think Spring Security may be expecting a CSRF token for the POST request, and in Postman might not be sending it. Try disabling CSRF for now to see if it resolves the issue. You can do this by modifying your security configuration <code>.csrf().disable()</code> .\nAdd to your <code>authorizeHttpRequests</code> chain ::</p>\n<pre><code>.authorizeHttpRequests((authz) -&gt; authz\n    .anyRequest().permitAll()\n)\n.csrf().disable();\n</code></pre>\n<p>Side Note : It is not a good idea Disabling CSRF for production, but it helps you in debugging</p>\n<p>Also please check that you have the <code>@EnableWebSecurity</code> annotation added to your configuration class. This annotation enables Spring Security's web security support.\ne.g.</p>\n<pre><code>@EnableWebSecurity\npublic class SecurityConfig extends WebSecurityConfigurerAdapter {}\n</code></pre>\n<p>Hope this helps you</p>\n"},{"tags":[],"owner":{"account_id":42916,"reputation":22347,"user_id":125212,"accept_rate":52,"display_name":"Jackie"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701099220,"creation_date":1701099220,"answer_id":77558121,"question_id":77554644,"body_markdown":"In my case the real answer that helped was from @dur I added \r\n\r\n```\r\nlogging:\r\n  level:\r\n    org.springframework: TRACE\r\n```\r\n\r\nand without going down a rabbit hole this lead me to finally see...\r\n\r\n```\r\nContent-Type &#39;application/x-www-form-urlencoded;charset=UTF-8&#39; is not supported\r\n```\r\n\r\nWhich lead me to [this answer][1]\r\n\r\nMoral in my case was don&#39;t use `@RequestBody` with form encoded.\r\n\r\n  [1]: https://stackoverflow.com/questions/34782025/http-post-request-with-content-type-application-x-www-form-urlencoded-not-workin","title":"Why is Spring Boot returning a 403 on POST when permitAll is being used?","body":"<p>In my case the real answer that helped was from @dur I added</p>\n<pre><code>logging:\n  level:\n    org.springframework: TRACE\n</code></pre>\n<p>and without going down a rabbit hole this lead me to finally see...</p>\n<pre><code>Content-Type 'application/x-www-form-urlencoded;charset=UTF-8' is not supported\n</code></pre>\n<p>Which lead me to <a href=\"https://stackoverflow.com/questions/34782025/http-post-request-with-content-type-application-x-www-form-urlencoded-not-workin\">this answer</a></p>\n<p>Moral in my case was don't use <code>@RequestBody</code> with form encoded.</p>\n"}],"owner":{"account_id":42916,"reputation":22347,"user_id":125212,"accept_rate":52,"display_name":"Jackie"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":1,"is_answered":true,"view_count":89,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":2,"score":0,"last_activity_date":1701099220,"creation_date":1701062190,"question_id":77554644,"body_markdown":"Ok I am a little confused, to debug I have reverted to this...\r\n\r\n```java \r\n.authorizeHttpRequests((authz) -&gt; authz.anyRequest().permitAll())\r\n```\r\n\r\nAnd I have the following\r\n\r\n```java\r\n@RestController\r\n@RequestMapping(&quot;contact&quot;)\r\npublic class LeadController {\r\n    @Autowired\r\n    private PotentialContactRepo potentialContactRepo;\r\n\r\n    @PostMapping(consumes = MediaType.APPLICATION_FORM_URLENCODED_VALUE)\r\n    public void addContact(@RequestBody PotentialContact contact) {\r\n        potentialContactRepo.save(contact);\r\n    }\r\n\r\n    @GetMapping\r\n    public ResponseEntity&lt;String&gt; getContact() {\r\n        return ResponseEntity.ok(&quot;Hello&quot;);\r\n    }\r\n}\r\n```\r\n\r\nBut when I call the post endpoint with postman I get a 403 but when I call the get I get a 200.\r\n\r\n```\r\nPOST /contact HTTP/1.1\r\nUser-Agent: PostmanRuntime/7.31.0\r\nAccept: */*\r\nCache-Control: no-cache\r\nHost: localhost:8080\r\nAccept-Encoding: gzip, deflate, br\r\nConnection: keep-alive\r\nContent-Type: application/x-www-form-urlencoded\r\nContent-Length: 151\r\n \r\nname=...&amp;contactInfo=...&amp;location=Wherever&amp;description=This%20is%20the%20description%3B!%40%23%24%23%24%40%24%40%23%24%40%23\r\n \r\nHTTP/1.1 403 Forbidden\r\nSet-Cookie: Path=/; HttpOnly\r\nX-Content-Type-Options: nosniff\r\nX-XSS-Protection: 0\r\nCache-Control: no-cache, no-store, max-age=0, must-revalidate\r\nPragma: no-cache\r\nExpires: 0\r\nX-Frame-Options: DENY\r\nContent-Type: application/json\r\nTransfer-Encoding: chunked\r\nDate: Mon, 27 Nov 2023 05:10:11 GMT\r\nKeep-Alive: timeout=60\r\nConnection: keep-alive\r\n```\r\n\r\nWhat am I missing?","title":"Why is Spring Boot returning a 403 on POST when permitAll is being used?","body":"<p>Ok I am a little confused, to debug I have reverted to this...</p>\n<pre class=\"lang-java prettyprint-override\"><code>.authorizeHttpRequests((authz) -&gt; authz.anyRequest().permitAll())\n</code></pre>\n<p>And I have the following</p>\n<pre class=\"lang-java prettyprint-override\"><code>@RestController\n@RequestMapping(&quot;contact&quot;)\npublic class LeadController {\n    @Autowired\n    private PotentialContactRepo potentialContactRepo;\n\n    @PostMapping(consumes = MediaType.APPLICATION_FORM_URLENCODED_VALUE)\n    public void addContact(@RequestBody PotentialContact contact) {\n        potentialContactRepo.save(contact);\n    }\n\n    @GetMapping\n    public ResponseEntity&lt;String&gt; getContact() {\n        return ResponseEntity.ok(&quot;Hello&quot;);\n    }\n}\n</code></pre>\n<p>But when I call the post endpoint with postman I get a 403 but when I call the get I get a 200.</p>\n<pre><code>POST /contact HTTP/1.1\nUser-Agent: PostmanRuntime/7.31.0\nAccept: */*\nCache-Control: no-cache\nHost: localhost:8080\nAccept-Encoding: gzip, deflate, br\nConnection: keep-alive\nContent-Type: application/x-www-form-urlencoded\nContent-Length: 151\n \nname=...&amp;contactInfo=...&amp;location=Wherever&amp;description=This%20is%20the%20description%3B!%40%23%24%23%24%40%24%40%23%24%40%23\n \nHTTP/1.1 403 Forbidden\nSet-Cookie: Path=/; HttpOnly\nX-Content-Type-Options: nosniff\nX-XSS-Protection: 0\nCache-Control: no-cache, no-store, max-age=0, must-revalidate\nPragma: no-cache\nExpires: 0\nX-Frame-Options: DENY\nContent-Type: application/json\nTransfer-Encoding: chunked\nDate: Mon, 27 Nov 2023 05:10:11 GMT\nKeep-Alive: timeout=60\nConnection: keep-alive\n</code></pre>\n<p>What am I missing?</p>\n"},{"tags":["java","multithreading","hibernate","spring"],"answers":[{"tags":[],"owner":{"account_id":186532,"reputation":13508,"user_id":423991,"accept_rate":91,"display_name":"K Erlandsson"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1282629426,"creation_date":1282629426,"answer_id":3553861,"question_id":3553845,"body_markdown":"[SessionFactory.openSession][1] creates a new session if that is all you need to know. If you need anything more, please elaborate.\r\n\r\n\r\n  [1]: http://docs.jboss.org/hibernate/stable/core/api/org/hibernate/SessionFactory.html#openSession()","title":"create a new hibernate session in multi-thread program","body":"<p><a href=\"http://docs.jboss.org/hibernate/stable/core/api/org/hibernate/SessionFactory.html#openSession()\" rel=\"nofollow noreferrer\">SessionFactory.openSession</a> creates a new session if that is all you need to know. If you need anything more, please elaborate.</p>\n"},{"tags":[],"owner":{"account_id":295514,"reputation":2157,"user_id":599971,"accept_rate":55,"display_name":"ejaenv"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701099215,"creation_date":1701099215,"answer_id":77558120,"question_id":3553845,"body_markdown":"To use multiple sessions and avoid LazyInitiazationException, you can simulate what OpenSessionInViewFilter does (one session per http request):\r\n\r\n\r\n    public class HibernateSessionManager {\r\n    \r\n        private final SessionFactory sessionFactory;\r\n    \r\n        public HibernateSessionManager(SessionFactory sessionFactory) {\r\n            this.sessionFactory = sessionFactory;\r\n        }\r\n    \r\n        public void openSession() {\r\n            // Obtain the current Hibernate session factory\r\n            Session session = sessionFactory.openSession();\r\n    \r\n            // Create a SessionHolder and associate it with the current thread\r\n            SessionHolder sessionHolder = new SessionHolder(session);\r\n            TransactionSynchronizationManager.bindResource(sessionFactory, sessionHolder);\r\n        }\r\n    \r\n        public Session getCurrentSession() {\r\n            // Retrieve the Hibernate session from the current SessionHolder\r\n            SessionHolder sessionHolder = (SessionHolder) TransactionSynchronizationManager.getResource(sessionFactory);\r\n            if (sessionHolder != null) {\r\n                return sessionHolder.getSession();\r\n            }\r\n            return null;\r\n        }\r\n    \r\n        public void closeSession() {\r\n            // Unbind the SessionHolder from the current thread and close the session\r\n            SessionHolder sessionHolder = (SessionHolder) TransactionSynchronizationManager.unbindResource(sessionFactory);\r\n            if (sessionHolder != null) {\r\n                Session session = sessionHolder.getSession();\r\n                session.close();\r\n            }\r\n        }\r\n    }\r\n\r\n(code generated with chatgpt)\r\n","title":"create a new hibernate session in multi-thread program","body":"<p>To use multiple sessions and avoid LazyInitiazationException, you can simulate what OpenSessionInViewFilter does (one session per http request):</p>\n<pre><code>public class HibernateSessionManager {\n\n    private final SessionFactory sessionFactory;\n\n    public HibernateSessionManager(SessionFactory sessionFactory) {\n        this.sessionFactory = sessionFactory;\n    }\n\n    public void openSession() {\n        // Obtain the current Hibernate session factory\n        Session session = sessionFactory.openSession();\n\n        // Create a SessionHolder and associate it with the current thread\n        SessionHolder sessionHolder = new SessionHolder(session);\n        TransactionSynchronizationManager.bindResource(sessionFactory, sessionHolder);\n    }\n\n    public Session getCurrentSession() {\n        // Retrieve the Hibernate session from the current SessionHolder\n        SessionHolder sessionHolder = (SessionHolder) TransactionSynchronizationManager.getResource(sessionFactory);\n        if (sessionHolder != null) {\n            return sessionHolder.getSession();\n        }\n        return null;\n    }\n\n    public void closeSession() {\n        // Unbind the SessionHolder from the current thread and close the session\n        SessionHolder sessionHolder = (SessionHolder) TransactionSynchronizationManager.unbindResource(sessionFactory);\n        if (sessionHolder != null) {\n            Session session = sessionHolder.getSession();\n            session.close();\n        }\n    }\n}\n</code></pre>\n<p>(code generated with chatgpt)</p>\n"}],"owner":{"account_id":53163,"reputation":1161,"user_id":158911,"accept_rate":42,"display_name":"Diablo.Wu"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1118,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1701099215,"creation_date":1282629097,"question_id":3553845,"body_markdown":"How to create a new hibernate session at a new thread ? The SessionFacatory was managed by Spring.","title":"create a new hibernate session in multi-thread program","body":"<p>How to create a new hibernate session at a new thread ? The SessionFacatory was managed by Spring.</p>\n"},{"tags":["java","jvm","jmap"],"comments":[{"owner":{"account_id":1710481,"reputation":22873,"user_id":1568658,"accept_rate":82,"display_name":"Eric"},"score":1,"creation_date":1484120446,"post_id":36764336,"comment_id":70374368,"body_markdown":"This is weird, seems you actual SurvivorRation is 6, not 8.","body":"This is weird, seems you actual SurvivorRation is 6, not 8."}],"answers":[{"tags":[],"owner":{"account_id":23121,"reputation":527336,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1461229224,"creation_date":1461228972,"answer_id":36764592,"question_id":36764336,"body_markdown":"Your eden to survivor ratio is 6:1, as the there is two survivors, the ratio of the survivors to young space is 1/8th\r\n\r\nThe Eden has a capacity of 1024.5 MB and 1024.5 / 6 = 107.75 which is pretty close to the 107.5 MB for each survivor spaces.","title":"Why does the ratio between each survivor space and eden does not match SurvivorRatio?","body":"<p>Your eden to survivor ratio is 6:1, as the there is two survivors, the ratio of the survivors to young space is 1/8th</p>\n\n<p>The Eden has a capacity of 1024.5 MB and 1024.5 / 6 = 107.75 which is pretty close to the 107.5 MB for each survivor spaces.</p>\n"},{"tags":[],"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1461234163,"creation_date":1461229013,"answer_id":36764618,"question_id":36764336,"body_markdown":"&lt;strike&gt;`SurvivorRatio = 8` means that each survivor space takes 1/8th of the young generation whose size is Eden + To + From. In your case The young generation size is 1365.5 MB and 1/8th of that would be 170,69 - assuming there&#39;s some rounding involved (or some other small space) the values are sound.&lt;/strike&gt;\r\n\r\n__Update:__ I had some misconception here. The values in your case would be valid, the spaces probably just haven&#39;t used their maximum capacity yet.\r\n\r\nTry running a test with `Xms=&lt;value of Xmx&gt;`.\r\n\r\nIn my case (with a jdk 1.6, 1.7 and 1.8) I used `SurvivorRatio=10` and got the following results (Java 8 had some slight differences):\r\n\r\n    Heap Configuration:\r\n      ...   \r\n      SurvivorRatio    = 10\r\n      ...\r\n\r\n    Heap Usage:\r\n    PS Young Generation\r\n    Eden Space:\r\n      capacity = 596508672 (568.875MB)  //Java 8 reported 569.5 here\r\n      used     = 536159440 (511.3214874267578MB)\r\n      free     = 60349232 (57.55351257324219MB)\r\n      89.8829246190741% used\r\n    From Space:\r\n      capacity = 59637760 (56.875MB)    //Java 8 reported 56.5 here\r\n      used     = 59626360 (56.86412811279297MB)\r\n      free     = 11400 (0.01087188720703125MB)\r\n      99.9808845939217% used\r\n    To Space:\r\n      capacity = 59637760 (56.875MB)    //Java 8 reported 56.5 here\r\n      used     = 0 (0.0MB)\r\n      free     = 59637760 (56.875MB)\r\n      0.0% used\r\n\r\nAs you can see, both survivor spaces are exactly 10% the size of the eden space. Without `Xms=&lt;Xmx&gt;` I got way lower percentages as the spaces didn&#39;t have to be increased yet.\r\n\r\n__Update 2:__\r\n\r\nApparantly the OP&#39;s spaces already aquired their maximum capacity with young generation having 1365 MB max (which is 33% of the 4096 MB max heap size). In that case the values look like the survivor ratio being 6 (i.e. each survivor space taking 1/8th of eden space) but jmap reporting a ratio of 8 indicates some kind of error/bug here (I did my tests with JVM version 21.0-b17 and 25.40-b25, i.e. the OP&#39;s version 24.80-b11 is somewhere in between).\r\n\r\n__Update 3:__\r\n\r\nI reran my tests twice with jdk 7:\r\n\r\nNo 1.: no `SurvivorRatio` set, i.e. default of 8 should be used:\r\n\r\n    Heap Configuration:\r\n       ...\r\n       SurvivorRatio    = 8\r\n       ...\r\n    \r\n    Heap Usage:\r\n    PS Young Generation\r\n    Eden Space:\r\n       capacity = 536870912 (512.0MB)\r\n       ...\r\n    From Space:\r\n       capacity = 89456640 (85.3125MB)\r\n       ...\r\n    To Space:\r\n       capacity = 89456640 (85.3125MB)\r\n       ...\r\n    \r\nNo 2.: explicit `SurvivorRatio=8` set:\r\n\r\n    Heap Configuration:\r\n       ...\r\n       SurvivorRatio    = 8\r\n       ...\r\n    \r\n    Heap Usage:\r\n    PS Young Generation\r\n    Eden Space:\r\n       capacity = 572653568 (546.125MB)\r\n       ...\r\n    From Space:\r\n       capacity = 71565312 (68.25MB)\r\n       ...\r\n    To Space:\r\n       capacity = 71565312 (68.25MB)\r\n       ...\r\n\r\nAs you can see there&#39;s a difference in the ratio even though a value of 8 is reported for both cases. Only the second case where the ratio was explicitly set to 8 fits the equation provided in the documentation which indicates in the default case there&#39;s some other ratio being used and jmap either reports a wrong ratio or the actual size calculation use a different value/formula. \r\n\r\nFrom the values the formulas look like this:\r\n\r\n- explicit survivor ratio: `size(survior space) = size(eden space)/survivorRatio` (example: `546.125 / 8 = 68.25` - see test 2)\r\n- implicit/default survivor ratio: `size(survior space) = size(young generation)/survivorRatio` (example: `682 / 8 = 85.25`- see test 1, values rounded a bit)\r\n\r\nNote: this also is true for jdk 1.8.","title":"Why does the ratio between each survivor space and eden does not match SurvivorRatio?","body":"<p><strike><code>SurvivorRatio = 8</code> means that each survivor space takes 1/8th of the young generation whose size is Eden + To + From. In your case The young generation size is 1365.5 MB and 1/8th of that would be 170,69 - assuming there's some rounding involved (or some other small space) the values are sound.</strike></p>\n\n<p><strong>Update:</strong> I had some misconception here. The values in your case would be valid, the spaces probably just haven't used their maximum capacity yet.</p>\n\n<p>Try running a test with <code>Xms=&lt;value of Xmx&gt;</code>.</p>\n\n<p>In my case (with a jdk 1.6, 1.7 and 1.8) I used <code>SurvivorRatio=10</code> and got the following results (Java 8 had some slight differences):</p>\n\n<pre><code>Heap Configuration:\n  ...   \n  SurvivorRatio    = 10\n  ...\n\nHeap Usage:\nPS Young Generation\nEden Space:\n  capacity = 596508672 (568.875MB)  //Java 8 reported 569.5 here\n  used     = 536159440 (511.3214874267578MB)\n  free     = 60349232 (57.55351257324219MB)\n  89.8829246190741% used\nFrom Space:\n  capacity = 59637760 (56.875MB)    //Java 8 reported 56.5 here\n  used     = 59626360 (56.86412811279297MB)\n  free     = 11400 (0.01087188720703125MB)\n  99.9808845939217% used\nTo Space:\n  capacity = 59637760 (56.875MB)    //Java 8 reported 56.5 here\n  used     = 0 (0.0MB)\n  free     = 59637760 (56.875MB)\n  0.0% used\n</code></pre>\n\n<p>As you can see, both survivor spaces are exactly 10% the size of the eden space. Without <code>Xms=&lt;Xmx&gt;</code> I got way lower percentages as the spaces didn't have to be increased yet.</p>\n\n<p><strong>Update 2:</strong></p>\n\n<p>Apparantly the OP's spaces already aquired their maximum capacity with young generation having 1365 MB max (which is 33% of the 4096 MB max heap size). In that case the values look like the survivor ratio being 6 (i.e. each survivor space taking 1/8th of eden space) but jmap reporting a ratio of 8 indicates some kind of error/bug here (I did my tests with JVM version 21.0-b17 and 25.40-b25, i.e. the OP's version 24.80-b11 is somewhere in between).</p>\n\n<p><strong>Update 3:</strong></p>\n\n<p>I reran my tests twice with jdk 7:</p>\n\n<p>No 1.: no <code>SurvivorRatio</code> set, i.e. default of 8 should be used:</p>\n\n<pre><code>Heap Configuration:\n   ...\n   SurvivorRatio    = 8\n   ...\n\nHeap Usage:\nPS Young Generation\nEden Space:\n   capacity = 536870912 (512.0MB)\n   ...\nFrom Space:\n   capacity = 89456640 (85.3125MB)\n   ...\nTo Space:\n   capacity = 89456640 (85.3125MB)\n   ...\n</code></pre>\n\n<p>No 2.: explicit <code>SurvivorRatio=8</code> set:</p>\n\n<pre><code>Heap Configuration:\n   ...\n   SurvivorRatio    = 8\n   ...\n\nHeap Usage:\nPS Young Generation\nEden Space:\n   capacity = 572653568 (546.125MB)\n   ...\nFrom Space:\n   capacity = 71565312 (68.25MB)\n   ...\nTo Space:\n   capacity = 71565312 (68.25MB)\n   ...\n</code></pre>\n\n<p>As you can see there's a difference in the ratio even though a value of 8 is reported for both cases. Only the second case where the ratio was explicitly set to 8 fits the equation provided in the documentation which indicates in the default case there's some other ratio being used and jmap either reports a wrong ratio or the actual size calculation use a different value/formula. </p>\n\n<p>From the values the formulas look like this:</p>\n\n<ul>\n<li>explicit survivor ratio: <code>size(survior space) = size(eden space)/survivorRatio</code> (example: <code>546.125 / 8 = 68.25</code> - see test 2)</li>\n<li>implicit/default survivor ratio: <code>size(survior space) = size(young generation)/survivorRatio</code> (example: <code>682 / 8 = 85.25</code>- see test 1, values rounded a bit)</li>\n</ul>\n\n<p>Note: this also is true for jdk 1.8.</p>\n"},{"tags":[],"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1461231159,"creation_date":1461231159,"answer_id":36765487,"question_id":36764336,"body_markdown":"It seems that at some time the formula for calculating the eden / survivor space size has changed.\r\n\r\nSee to https://searchcode.com/codesearch/view/17980811/, lines 52 to 54:\r\n\r\n&gt; The survivor ratio&#39;s are calculated &quot;raw&quot;, unlike the default gc, which adds 2 to the ratio value. We need to make sure the values are valid before using them.","title":"Why does the ratio between each survivor space and eden does not match SurvivorRatio?","body":"<p>It seems that at some time the formula for calculating the eden / survivor space size has changed.</p>\n\n<p>See to <a href=\"https://searchcode.com/codesearch/view/17980811/\" rel=\"nofollow\">https://searchcode.com/codesearch/view/17980811/</a>, lines 52 to 54:</p>\n\n<blockquote>\n  <p>The survivor ratio's are calculated \"raw\", unlike the default gc, which adds 2 to the ratio value. We need to make sure the values are valid before using them.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":13946209,"reputation":1093,"user_id":11389917,"display_name":"Kashinath Patekar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701098428,"creation_date":1701009888,"answer_id":77552143,"question_id":36764336,"body_markdown":"To expand upon, and to clarify the behaviour stated in [Thomas&#39;s answer][1], the difference in two cases is due to the way in which the cases of explicitly specifying `SurvivorRatio` flag and not specifying the same, are handled. Spoiler alert - jmap output (i.e. SurvivorRatio = 8) is also not exactly wrong. How, you ask? Follow along:\r\n\r\nThere are 3 options present related to Survivor ratio - `SurvivorRatio`, `MinSurvivorRatio`, and `InitialSurvivorRatio`. The defaults for these (can be found in source code [gc_globals.hpp][2]) are 8, 3, and 8 respectively. Also from source code it is clear that: \r\n\r\n - `SurvivorRatio` considers the ratio Eden:Survivor\r\n - `MinSurvivorRatio` and `InitialSurvivorRatio` consider the ratio YoungGen:Survivor\r\n\r\nAs per [this][3] Oracle bug ticket, \r\n&gt; The UseParallelGC collector uses\r\nthe command line flags `MinSurvivorRatio` and `InitialSurvivorRatio`.\r\n\r\n(Note that actually `Parallel scavenge` is the name of GC, and UseParallelGC is the flag to explicitly tell JVM to use this GC.)\r\n\r\nAnd as per [this][4] Oracle bug ticket, \r\n\r\n&gt; Assigning `SurivorRatio` a value of `k` will yield `InitialSurvivorRatio=(k+2)` and `MinSurvivorRatio=(k+2)` in case of `Parallel Scavenger`  \r\n\r\n(source code: [parallelArguments.cpp][5]) (Parallel Scavenger is default GC. As can be seen in code, the two flags will be assigned values in this manner only if the SurivorRatio is specified but these two flags are not specified.)\r\n\r\nIf `SurvivorRatio` and the other two flags are not specified, the defaults specified in `gc_globals.hpp` would be used. Parallel Scavenger would only care about `MinSurvivorRatio` and `InitialSurvivorRatio` defaults.\r\n\r\nHence,\r\n\r\n - If SurvivorRatio=8 option is specified (and the other two not), (k+2=10), it yields both min and initial YoungGen:Survivor ratio as 10:1\r\n - If none of the 3 flags specified, (no modification, use default) it yields  initial (and min) YoungGen:Survivor ratio as 8:1 (and 3:1).\r\n\r\nIn both cases, the value for SurvivorRatio is 8, hence jmap will output 8.\r\n\r\nThis answer assumes that the `XX:UseAdaptiveSizePolicy` flag is disabled (explicitly, as it is enabled by default), since as per IBM [docs][6]:\r\n&gt; Avoid trouble: -XX:SurvivorRatio= option is incompatible with the JVM parameter -XX:+UseAdaptiveSizePolicy. Please use either one according to your situation.\r\n\r\n\r\n\r\n  \r\n\r\n  [1]: https://stackoverflow.com/a/36764618/11389917\r\n  [2]: https://github.com/openjdk/jdk/blob/6aa197667ad05bd93adf3afc7b06adbfb2b18a22/src/hotspot/share/gc/shared/gc_globals.hpp#L470\r\n  [3]: https://bugs.java.com/bugdatabase/view_bug.do?bug_id=6368557\r\n  [4]: https://bugs.java.com/bugdatabase/view_bug.do?bug_id=6362902\r\n  [5]: https://github.com/openjdk/jdk/blob/6aa197667ad05bd93adf3afc7b06adbfb2b18a22/src/hotspot/share/gc/parallel/parallelArguments.cpp#L69\r\n  [6]: https://www.ibm.com/docs/en/was/9.0.5?topic=thjvmshu-sun-hotspot-jvm-tuning-parameters-solaris-hp-ux","title":"Why does the ratio between each survivor space and eden does not match SurvivorRatio?","body":"<p>To expand upon, and to clarify the behaviour stated in <a href=\"https://stackoverflow.com/a/36764618/11389917\">Thomas's answer</a>, the difference in two cases is due to the way in which the cases of explicitly specifying <code>SurvivorRatio</code> flag and not specifying the same, are handled. Spoiler alert - jmap output (i.e. SurvivorRatio = 8) is also not exactly wrong. How, you ask? Follow along:</p>\n<p>There are 3 options present related to Survivor ratio - <code>SurvivorRatio</code>, <code>MinSurvivorRatio</code>, and <code>InitialSurvivorRatio</code>. The defaults for these (can be found in source code <a href=\"https://github.com/openjdk/jdk/blob/6aa197667ad05bd93adf3afc7b06adbfb2b18a22/src/hotspot/share/gc/shared/gc_globals.hpp#L470\" rel=\"nofollow noreferrer\">gc_globals.hpp</a>) are 8, 3, and 8 respectively. Also from source code it is clear that:</p>\n<ul>\n<li><code>SurvivorRatio</code> considers the ratio Eden:Survivor</li>\n<li><code>MinSurvivorRatio</code> and <code>InitialSurvivorRatio</code> consider the ratio YoungGen:Survivor</li>\n</ul>\n<p>As per <a href=\"https://bugs.java.com/bugdatabase/view_bug.do?bug_id=6368557\" rel=\"nofollow noreferrer\">this</a> Oracle bug ticket,</p>\n<blockquote>\n<p>The UseParallelGC collector uses\nthe command line flags <code>MinSurvivorRatio</code> and <code>InitialSurvivorRatio</code>.</p>\n</blockquote>\n<p>(Note that actually <code>Parallel scavenge</code> is the name of GC, and UseParallelGC is the flag to explicitly tell JVM to use this GC.)</p>\n<p>And as per <a href=\"https://bugs.java.com/bugdatabase/view_bug.do?bug_id=6362902\" rel=\"nofollow noreferrer\">this</a> Oracle bug ticket,</p>\n<blockquote>\n<p>Assigning <code>SurivorRatio</code> a value of <code>k</code> will yield <code>InitialSurvivorRatio=(k+2)</code> and <code>MinSurvivorRatio=(k+2)</code> in case of <code>Parallel Scavenger</code></p>\n</blockquote>\n<p>(source code: <a href=\"https://github.com/openjdk/jdk/blob/6aa197667ad05bd93adf3afc7b06adbfb2b18a22/src/hotspot/share/gc/parallel/parallelArguments.cpp#L69\" rel=\"nofollow noreferrer\">parallelArguments.cpp</a>) (Parallel Scavenger is default GC. As can be seen in code, the two flags will be assigned values in this manner only if the SurivorRatio is specified but these two flags are not specified.)</p>\n<p>If <code>SurvivorRatio</code> and the other two flags are not specified, the defaults specified in <code>gc_globals.hpp</code> would be used. Parallel Scavenger would only care about <code>MinSurvivorRatio</code> and <code>InitialSurvivorRatio</code> defaults.</p>\n<p>Hence,</p>\n<ul>\n<li>If SurvivorRatio=8 option is specified (and the other two not), (k+2=10), it yields both min and initial YoungGen:Survivor ratio as 10:1</li>\n<li>If none of the 3 flags specified, (no modification, use default) it yields  initial (and min) YoungGen:Survivor ratio as 8:1 (and 3:1).</li>\n</ul>\n<p>In both cases, the value for SurvivorRatio is 8, hence jmap will output 8.</p>\n<p>This answer assumes that the <code>XX:UseAdaptiveSizePolicy</code> flag is disabled (explicitly, as it is enabled by default), since as per IBM <a href=\"https://www.ibm.com/docs/en/was/9.0.5?topic=thjvmshu-sun-hotspot-jvm-tuning-parameters-solaris-hp-ux\" rel=\"nofollow noreferrer\">docs</a>:</p>\n<blockquote>\n<p>Avoid trouble: -XX:SurvivorRatio= option is incompatible with the JVM parameter -XX:+UseAdaptiveSizePolicy. Please use either one according to your situation.</p>\n</blockquote>\n"}],"owner":{"account_id":7938945,"reputation":870,"user_id":5993797,"accept_rate":64,"display_name":"Yanhui Zhou"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2214,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":4,"score":1,"last_activity_date":1701098428,"creation_date":1461228344,"question_id":36764336,"body_markdown":"&gt; The [SurvivorRatio](https://docs.oracle.com/cd/E19159-01/819-3681/abeil/index.html) parameter controls the size of the two survivor spaces. For example, -XX:SurvivorRatio=6 sets the ratio between each survivor space and eden to be 1:6, each survivor space will be one eighth of the young generation.\r\n\r\nWhy does the space capacity of survivor and eden not match SurvivorRatio, as below? Produced by `jmap -heap 15760`.\r\n\r\n    Attaching to process ID 15760, please wait...\r\n    Debugger attached successfully.\r\n    Server compiler detected.\r\n    JVM version is 24.80-b11\r\n    \r\n    using thread-local object allocation.\r\n    Parallel GC with 8 thread(s)\r\n    \r\n    Heap Configuration:\r\n       MinHeapFreeRatio = 0\r\n       MaxHeapFreeRatio = 100\r\n       MaxHeapSize      = 4294967296 (4096.0MB)\r\n       NewSize          = 1310720 (1.25MB)\r\n       MaxNewSize       = 17592186044415 MB\r\n       OldSize          = 5439488 (5.1875MB)\r\n       NewRatio         = 2\r\n       SurvivorRatio    = 8\r\n       PermSize         = 21757952 (20.75MB)\r\n       MaxPermSize      = 1073741824 (1024.0MB)\r\n       G1HeapRegionSize = 0 (0.0MB)\r\n    \r\n    Heap Usage:\r\n    PS Young Generation\r\n    Eden Space:\r\n       capacity = 1074266112 (1024.5MB)\r\n       used     = 276841328 (264.01646423339844MB)\r\n       free     = 797424784 (760.4835357666016MB)\r\n       25.770274693352704% used\r\n    From Space:\r\n       capacity = 178782208 (170.5MB)\r\n       used     = 56996280 (54.35588836669922MB)\r\n       free     = 121785928 (116.14411163330078MB)\r\n       31.880286432081654% used\r\n    To Space:\r\n       capacity = 178782208 (170.5MB)\r\n       used     = 0 (0.0MB)\r\n       free     = 178782208 (170.5MB)\r\n       0.0% used\r\n    PS Old Generation\r\n       capacity = 2863661056 (2731.0MB)\r\n       used     = 98320 (0.0937652587890625MB)\r\n       free     = 2863562736 (2730.906234741211MB)\r\n       0.003433367220397748% used\r\n    PS Perm Generation\r\n       capacity = 47710208 (45.5MB)\r\n       used     = 47664440 (45.45635223388672MB)\r\n       free     = 45768 (0.04364776611328125MB)\r\n       99.90407084370707% used\r\n    \r\n    26132 interned Strings occupying 2933384 bytes.","title":"Why does the ratio between each survivor space and eden does not match SurvivorRatio?","body":"<blockquote>\n  <p>The <a href=\"https://docs.oracle.com/cd/E19159-01/819-3681/abeil/index.html\" rel=\"nofollow\">SurvivorRatio</a> parameter controls the size of the two survivor spaces. For example, -XX:SurvivorRatio=6 sets the ratio between each survivor space and eden to be 1:6, each survivor space will be one eighth of the young generation.</p>\n</blockquote>\n\n<p>Why does the space capacity of survivor and eden not match SurvivorRatio, as below? Produced by <code>jmap -heap 15760</code>.</p>\n\n<pre><code>Attaching to process ID 15760, please wait...\nDebugger attached successfully.\nServer compiler detected.\nJVM version is 24.80-b11\n\nusing thread-local object allocation.\nParallel GC with 8 thread(s)\n\nHeap Configuration:\n   MinHeapFreeRatio = 0\n   MaxHeapFreeRatio = 100\n   MaxHeapSize      = 4294967296 (4096.0MB)\n   NewSize          = 1310720 (1.25MB)\n   MaxNewSize       = 17592186044415 MB\n   OldSize          = 5439488 (5.1875MB)\n   NewRatio         = 2\n   SurvivorRatio    = 8\n   PermSize         = 21757952 (20.75MB)\n   MaxPermSize      = 1073741824 (1024.0MB)\n   G1HeapRegionSize = 0 (0.0MB)\n\nHeap Usage:\nPS Young Generation\nEden Space:\n   capacity = 1074266112 (1024.5MB)\n   used     = 276841328 (264.01646423339844MB)\n   free     = 797424784 (760.4835357666016MB)\n   25.770274693352704% used\nFrom Space:\n   capacity = 178782208 (170.5MB)\n   used     = 56996280 (54.35588836669922MB)\n   free     = 121785928 (116.14411163330078MB)\n   31.880286432081654% used\nTo Space:\n   capacity = 178782208 (170.5MB)\n   used     = 0 (0.0MB)\n   free     = 178782208 (170.5MB)\n   0.0% used\nPS Old Generation\n   capacity = 2863661056 (2731.0MB)\n   used     = 98320 (0.0937652587890625MB)\n   free     = 2863562736 (2730.906234741211MB)\n   0.003433367220397748% used\nPS Perm Generation\n   capacity = 47710208 (45.5MB)\n   used     = 47664440 (45.45635223388672MB)\n   free     = 45768 (0.04364776611328125MB)\n   99.90407084370707% used\n\n26132 interned Strings occupying 2933384 bytes.\n</code></pre>\n"},{"tags":["java","selenium","webdriver"],"comments":[{"owner":{"account_id":6701767,"reputation":47952,"user_id":5168011,"accept_rate":100,"display_name":"Guy"},"score":0,"creation_date":1452664961,"post_id":34759376,"comment_id":57264209,"body_markdown":"try `a.moveToElement(el).build().perform();`","body":"try <code>a.moveToElement(el).build().perform();</code>"},{"owner":{"account_id":3029527,"reputation":7159,"user_id":2568849,"accept_rate":79,"display_name":"Mesut GUNES"},"score":0,"creation_date":1452667015,"post_id":34759376,"comment_id":57265006,"body_markdown":"you may try sending space like `el.sendKeys(Keys.SPACE);`","body":"you may try sending space like <code>el.sendKeys(Keys.SPACE);</code>"},{"owner":{"account_id":2349610,"reputation":3207,"user_id":2058844,"accept_rate":64,"display_name":"Paras"},"score":1,"creation_date":1452668297,"post_id":34759376,"comment_id":57265588,"body_markdown":"Try `((JavascriptExecutor)driver).executeScript(&quot;window.scrollTo(0,document.body.scrollHeight);&quot;);`","body":"Try <code>((JavascriptExecutor)driver).executeScript(&quot;window.scrollTo(&zwnj;&#8203;0,document.body.scro&zwnj;&#8203;llHeight);&quot;);</code>"},{"owner":{"account_id":5494975,"reputation":227,"user_id":4366433,"accept_rate":0,"display_name":"Tanmay"},"score":0,"creation_date":1452672605,"post_id":34759376,"comment_id":57267784,"body_markdown":"I tried with a.moveToElement(el).build().perform() but it did not work. Why is that it is not working in Chrome but in Firefox only.","body":"I tried with a.moveToElement(el).build().perform() but it did not work. Why is that it is not working in Chrome but in Firefox only."},{"owner":{"account_id":6701767,"reputation":47952,"user_id":5168011,"accept_rate":100,"display_name":"Guy"},"score":0,"creation_date":1452684663,"post_id":34759376,"comment_id":57276025,"body_markdown":"Do you get any errors?","body":"Do you get any errors?"},{"owner":{"account_id":5494975,"reputation":227,"user_id":4366433,"accept_rate":0,"display_name":"Tanmay"},"score":1,"creation_date":1452685179,"post_id":34759376,"comment_id":57276390,"body_markdown":"@guy , i did not get any error. Code got executed on Chrome but the scroll down action did not happen.","body":"@guy , i did not get any error. Code got executed on Chrome but the scroll down action did not happen."},{"owner":{"account_id":7453887,"reputation":503,"user_id":5667709,"display_name":"Choi"},"score":0,"creation_date":1560500481,"post_id":34759376,"comment_id":99765045,"body_markdown":"Is it same to be a.moveByOffset(0, 1000000).release().perform(); ?","body":"Is it same to be a.moveByOffset(0, 1000000).release().perform(); ?"}],"answers":[{"tags":[],"owner":{"account_id":2349610,"reputation":3207,"user_id":2058844,"accept_rate":64,"display_name":"Paras"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1452671431,"creation_date":1452671431,"answer_id":34761101,"question_id":34759376,"body_markdown":"You can use `JavaScriptExecutor` for scrolling.\r\n\r\n***Scroll Down***\r\n\r\n    ((JavascriptExecutor)driver).executeScript(&quot;window.scrollTo(0,document.body.scr‌​ollHeight);&quot;);\r\n\r\n***Scroll Up***\r\n\r\n    ((JavascriptExecutor)driver).executeScript(&quot;window.scrollTo(0,0);&quot;);","title":"Not able to scroll down in Chromedriver by selenium webdriver(Java)","body":"<p>You can use <code>JavaScriptExecutor</code> for scrolling.</p>\n\n<p><strong><em>Scroll Down</em></strong></p>\n\n<pre><code>((JavascriptExecutor)driver).executeScript(\"window.scrollTo(0,document.body.scr‌​ollHeight);\");\n</code></pre>\n\n<p><strong><em>Scroll Up</em></strong></p>\n\n<pre><code>((JavascriptExecutor)driver).executeScript(\"window.scrollTo(0,0);\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6736297,"reputation":348,"user_id":5190974,"accept_rate":50,"display_name":"Sarah"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1475762338,"creation_date":1452715966,"answer_id":34776142,"question_id":34759376,"body_markdown":"Javascript Executer version (scrolls to bottom - best for my needs):\r\n\r\n    JavascriptExecutor jse = (JavascriptExecutor)driver;\r\n    jse.executeScript(&quot;window.scrollTo(0, document.body.scrollHeight);&quot;);\r\n\r\nWebdrvier only version:\r\n\r\n    driver.findElement(By.id(&quot;INSERT_A_INPUT_BOX&quot;)).sendKeys(Keys.PAGE_DOWN);\r\n\r\nThis version only scrolls down one page. At first it wouldn&#39;t work for me because I was trying to focus on a random element not an input element, but it does work when focusing on something you can type into","title":"Not able to scroll down in Chromedriver by selenium webdriver(Java)","body":"<p>Javascript Executer version (scrolls to bottom - best for my needs):</p>\n\n<pre><code>JavascriptExecutor jse = (JavascriptExecutor)driver;\njse.executeScript(\"window.scrollTo(0, document.body.scrollHeight);\");\n</code></pre>\n\n<p>Webdrvier only version:</p>\n\n<pre><code>driver.findElement(By.id(\"INSERT_A_INPUT_BOX\")).sendKeys(Keys.PAGE_DOWN);\n</code></pre>\n\n<p>This version only scrolls down one page. At first it wouldn't work for me because I was trying to focus on a random element not an input element, but it does work when focusing on something you can type into</p>\n"},{"tags":[],"owner":{"account_id":5494975,"reputation":227,"user_id":4366433,"accept_rate":0,"display_name":"Tanmay"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1475762243,"creation_date":1452749755,"answer_id":34782385,"question_id":34759376,"body_markdown":"So far below are my findings based on options I tired:\r\n\r\n1.**Action builder class** : Works in Firefox but not in Chrome.Not sure why it did not work in Chrome.\r\n\r\n2.`js.executeScript(&quot;window.scrollTo(0, document.body.scrollHeight);&quot;);`: It neither worked in Firefox and Chrome. I guess this is something not suitable in my case.\r\n\r\n3.`js.executeScript(&quot;arguments[0].scrollIntoView(true);&quot;,element);` :  It worked in both Firefox and Chrome.\r\n\r\n","title":"Not able to scroll down in Chromedriver by selenium webdriver(Java)","body":"<p>So far below are my findings based on options I tired:</p>\n\n<p>1.<strong>Action builder class</strong> : Works in Firefox but not in Chrome.Not sure why it did not work in Chrome.</p>\n\n<p>2.<code>js.executeScript(\"window.scrollTo(0, document.body.scrollHeight);\");</code>: It neither worked in Firefox and Chrome. I guess this is something not suitable in my case.</p>\n\n<p>3.<code>js.executeScript(\"arguments[0].scrollIntoView(true);\",element);</code> :  It worked in both Firefox and Chrome.</p>\n"},{"tags":[],"owner":{"account_id":6731826,"reputation":71,"user_id":5187862,"display_name":"CJDownUnder"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1476390527,"creation_date":1476390527,"answer_id":40030383,"question_id":34759376,"body_markdown":"I had a similar problem in Selenium (wrapped in Selenide):\r\n\r\nThis worked for me to scroll to a link that was off the bottom of the page:\r\n\r\n    if (isPhantomjs()){\r\n        $(byText(linkType)).scrollTo().click();\r\n    } else {\r\n        executeJavaScript(&quot;arguments[0].scrollIntoView(true);&quot;, $(byText(linkType)));\r\n        $(byText(linkType)).click();\r\n    }","title":"Not able to scroll down in Chromedriver by selenium webdriver(Java)","body":"<p>I had a similar problem in Selenium (wrapped in Selenide):</p>\n\n<p>This worked for me to scroll to a link that was off the bottom of the page:</p>\n\n<pre><code>if (isPhantomjs()){\n    $(byText(linkType)).scrollTo().click();\n} else {\n    executeJavaScript(\"arguments[0].scrollIntoView(true);\", $(byText(linkType)));\n    $(byText(linkType)).click();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5740823,"reputation":544,"user_id":4533583,"display_name":"Anuraj R"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1476624817,"creation_date":1476624817,"answer_id":40070855,"question_id":34759376,"body_markdown":"For Scroll down:\r\n\r\n    WebDriver driver = new ChromeDriver();\r\n    JavascriptExecutor jse = (JavascriptExecutor)driver;\r\n    jse.executeScript(&quot;window.scrollBy(0,250)&quot;, &quot;&quot;);\r\n\r\nOR,also\r\n\r\n    jse.executeScript(&quot;scroll(0, 250);&quot;);\r\n\r\nFor Scroll up:\r\n\r\n    jse.executeScript(&quot;window.scrollBy(0,-250)&quot;, &quot;&quot;);\r\n\r\nOR,\r\n\r\n    jse.executeScript(&quot;scroll(0, -250);&quot;);\r\n\r\n\r\nHope it will help you","title":"Not able to scroll down in Chromedriver by selenium webdriver(Java)","body":"<p>For Scroll down:</p>\n\n<pre><code>WebDriver driver = new ChromeDriver();\nJavascriptExecutor jse = (JavascriptExecutor)driver;\njse.executeScript(\"window.scrollBy(0,250)\", \"\");\n</code></pre>\n\n<p>OR,also</p>\n\n<pre><code>jse.executeScript(\"scroll(0, 250);\");\n</code></pre>\n\n<p>For Scroll up:</p>\n\n<pre><code>jse.executeScript(\"window.scrollBy(0,-250)\", \"\");\n</code></pre>\n\n<p>OR,</p>\n\n<pre><code>jse.executeScript(\"scroll(0, -250);\");\n</code></pre>\n\n<p>Hope it will help you</p>\n"},{"tags":[],"owner":{"account_id":20299347,"reputation":1,"user_id":14889145,"display_name":"user14889145"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1608923791,"creation_date":1608923791,"answer_id":65451038,"question_id":34759376,"body_markdown":"I am not a specialist at all of java but I use chromedriver from vba and face the same problem. As I am not able to locate the webelements by XPATH / JSON, I use the source code of the page instead, senkeys tab until the webelement I search get the focus then this element becomes the ***activeelement*** so the ***scrollintoview*** on the element is accessible and I can refresh the source code of the page...\r\n","title":"Not able to scroll down in Chromedriver by selenium webdriver(Java)","body":"<p>I am not a specialist at all of java but I use chromedriver from vba and face the same problem. As I am not able to locate the webelements by XPATH / JSON, I use the source code of the page instead, senkeys tab until the webelement I search get the focus then this element becomes the <em><strong>activeelement</strong></em> so the <em><strong>scrollintoview</strong></em> on the element is accessible and I can refresh the source code of the page...</p>\n"},{"tags":[],"owner":{"account_id":6792992,"reputation":166,"user_id":5229380,"display_name":"Unnati Solanki"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1609087977,"creation_date":1609087977,"answer_id":65468136,"question_id":34759376,"body_markdown":"If you are trying to click the element after scrolling then try below snippet. \r\n\r\n&gt; Actions action = new Actions(driver);\r\n&gt; \r\n&gt; action.moveToElement(element).click().perform();","title":"Not able to scroll down in Chromedriver by selenium webdriver(Java)","body":"<p>If you are trying to click the element after scrolling then try below snippet.</p>\n<blockquote>\n<p>Actions action = new Actions(driver);</p>\n<p>action.moveToElement(element).click().perform();</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":16209077,"reputation":389,"user_id":11703579,"display_name":"gbossa"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701097413,"creation_date":1701097413,"answer_id":77557906,"question_id":34759376,"body_markdown":"This is what worked for me.\r\n\r\n    Actions action = new Actions(driver);\r\n    action.sendKeys(Keys.PAGE_DOWN).perform();","title":"Not able to scroll down in Chromedriver by selenium webdriver(Java)","body":"<p>This is what worked for me.</p>\n<pre><code>Actions action = new Actions(driver);\naction.sendKeys(Keys.PAGE_DOWN).perform();\n</code></pre>\n"}],"owner":{"account_id":5494975,"reputation":227,"user_id":4366433,"accept_rate":0,"display_name":"Tanmay"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":31251,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"answer_count":8,"score":7,"last_activity_date":1701098383,"creation_date":1452664582,"question_id":34759376,"body_markdown":"I&#39;m trying to test scrolling functionality by selenium webdriver. Same is working in Firefox but not in chrome driver. Here is basic code I&#39;m using for scrolling.\r\n\r\n    Actions a = new Actions(driver);\r\n    WebElement el = driver.findElement(By.xpath(&quot;//*[@id=&#39;dsm-frame&#39;]&quot;));\r\n    a.moveToElement(el).clickAndHold().moveByOffset(0, 1000000).release().perform();\r\n\r\nIs there any specific reason that Action builder does not work in chrome? Kindly advise how it can be worked in Chrome driver.\r\n\r\nThanks","title":"Not able to scroll down in Chromedriver by selenium webdriver(Java)","body":"<p>I'm trying to test scrolling functionality by selenium webdriver. Same is working in Firefox but not in chrome driver. Here is basic code I'm using for scrolling.</p>\n\n<pre><code>Actions a = new Actions(driver);\nWebElement el = driver.findElement(By.xpath(\"//*[@id='dsm-frame']\"));\na.moveToElement(el).clickAndHold().moveByOffset(0, 1000000).release().perform();\n</code></pre>\n\n<p>Is there any specific reason that Action builder does not work in chrome? Kindly advise how it can be worked in Chrome driver.</p>\n\n<p>Thanks</p>\n"},{"tags":["java","docker","kubernetes","minikube"],"comments":[{"owner":{"account_id":2256817,"reputation":12199,"user_id":1987838,"accept_rate":100,"display_name":"Hackerman"},"score":0,"creation_date":1615668941,"post_id":66607112,"comment_id":117764813,"body_markdown":"Create another terminak tab and exceute the following command  `minikube tunnel`...then try to ping minikube","body":"Create another terminak tab and exceute the following command  <code>minikube tunnel</code>...then try to ping minikube"}],"answers":[{"tags":[],"owner":{"account_id":5968065,"reputation":14213,"user_id":4691279,"accept_rate":58,"display_name":"hagrawal7777"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1615699074,"creation_date":1615699074,"answer_id":66621325,"question_id":66607112,"body_markdown":"Recall that minikube is local Kubernetes - it runs a single-node Kubernetes cluster on your personal computer so that you can try out Kubernetes. Now, it doesn&#39;t run the Kubernetes cluster in your local box, it runs it inside a VM.\r\n\r\nThat is why you can&#39;t simply access Node IP from your local. Another way to see it is that in Kubernetes you can create NodePort Service to access your workload outside of your cluster but this doesn&#39;t work when you are running Kubernetes using minikube - and the reason is the same as mentioned above. \r\n\r\nNow, how you work around that is by using `minikube service &lt;&lt;YOUR_SERVICE_NAME&gt;&gt;` command.  This will create a tunnel to access your application - which is exposed using the Service - from outside of the K8S cluster.\r\n\r\n\r\n\r\n----------\r\n\r\nYou can try `minikube tunnel` as mentioned by @Hackerman but I have never tried it.","title":"minikube on WSL2 (windows 10) - minikube ip not reachable","body":"<p>Recall that minikube is local Kubernetes - it runs a single-node Kubernetes cluster on your personal computer so that you can try out Kubernetes. Now, it doesn't run the Kubernetes cluster in your local box, it runs it inside a VM.</p>\n<p>That is why you can't simply access Node IP from your local. Another way to see it is that in Kubernetes you can create NodePort Service to access your workload outside of your cluster but this doesn't work when you are running Kubernetes using minikube - and the reason is the same as mentioned above.</p>\n<p>Now, how you work around that is by using <code>minikube service &lt;&lt;YOUR_SERVICE_NAME&gt;&gt;</code> command.  This will create a tunnel to access your application - which is exposed using the Service - from outside of the K8S cluster.</p>\n<hr />\n<p>You can try <code>minikube tunnel</code> as mentioned by @Hackerman but I have never tried it.</p>\n"},{"tags":[],"owner":{"account_id":16854443,"reputation":6417,"user_id":12186585,"display_name":"acid_fuji"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1615796117,"creation_date":1615796117,"answer_id":66634409,"question_id":66607112,"body_markdown":"Just to add a bit on top of the previous answer. There is docker bridge limitation that makes it impossible to [route the traffic to Linux containers](https://docs.docker.com/docker-for-windows/networking/#i-cannot-ping-my-containers).  That is why the minikube tunnel and service were implemented as workaround for that. \r\n\r\n&gt; `minikube tunnel` runs as a process, creating a network route on the\r\n&gt; host to the service CIDR of the cluster using the cluster’s IP address\r\n&gt; as a gateway. The tunnel command exposes the external IP directly to\r\n&gt; any program running on the host operating system.\r\n\r\nAlternative way to that you may find interesting would be using an ingress which was enabled in [#9761](https://github.com/kubernetes/minikube/pull/9761) pull request: \r\n\r\n```bash \r\n.\\minikube-windows-amd64.exe addons enable ingress                                                                                           I1121 00:59:39.443965    3000 translate.go:89] Failed to load translation file for en: Asset translations/en.json not found\r\n* After the addon is enabled, please run &quot;minikube tunnel&quot; and your ingress resources would be available at &quot;127.0.0.1&quot;\r\n* Verifying ingress addon...\r\n* The &#39;ingress&#39; addon is enabled\r\n```\r\n","title":"minikube on WSL2 (windows 10) - minikube ip not reachable","body":"<p>Just to add a bit on top of the previous answer. There is docker bridge limitation that makes it impossible to <a href=\"https://docs.docker.com/docker-for-windows/networking/#i-cannot-ping-my-containers\" rel=\"nofollow noreferrer\">route the traffic to Linux containers</a>.  That is why the minikube tunnel and service were implemented as workaround for that.</p>\n<blockquote>\n<p><code>minikube tunnel</code> runs as a process, creating a network route on the\nhost to the service CIDR of the cluster using the cluster’s IP address\nas a gateway. The tunnel command exposes the external IP directly to\nany program running on the host operating system.</p>\n</blockquote>\n<p>Alternative way to that you may find interesting would be using an ingress which was enabled in <a href=\"https://github.com/kubernetes/minikube/pull/9761\" rel=\"nofollow noreferrer\">#9761</a> pull request:</p>\n<pre class=\"lang-sh prettyprint-override\"><code>.\\minikube-windows-amd64.exe addons enable ingress                                                                                           I1121 00:59:39.443965    3000 translate.go:89] Failed to load translation file for en: Asset translations/en.json not found\n* After the addon is enabled, please run &quot;minikube tunnel&quot; and your ingress resources would be available at &quot;127.0.0.1&quot;\n* Verifying ingress addon...\n* The 'ingress' addon is enabled\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9091772,"reputation":585,"user_id":7539092,"display_name":"SteveSims"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1629155916,"creation_date":1629155572,"answer_id":68810071,"question_id":66607112,"body_markdown":"On your windows system, after the creation of the container that is created by the initial &quot;minikube start&quot;, you can see the &quot;minikube instance&quot; by typing &quot;docker ps&quot;.   This is the minikube &#39;master&#39; node running in this container.\r\n\r\nIt would look something like this:\r\n\r\n    CONTAINER ID   IMAGE                                 COMMAND                  CREATED       STATUS             PORTS                                                                                                                                  NAMES\r\n    6293ca0ba5b0   gcr.io/k8s-minikube/kicbase:v0.0.25   &quot;/usr/local/bin/entr…&quot;   2 hours ago   Up About an hour   127.0.0.1:59539-&gt;22/tcp, 127.0.0.1:59540-&gt;2376/tcp, 127.0.0.1:59537-&gt;5000/tcp, 127.0.0.1:59538-&gt;8443/tcp, 127.0.0.1:59536-&gt;32443/tcp   minikube\r\n\r\nIn the PORTS column you will see ports that are forwarded by virtue of the way that minikube start the docker container.  You can see these kinds of forwards are handled by docker the same as for any contain that you might do a &quot;docker run -p port:port&quot;\r\n\r\nNotice that the first port forward in this list is the ssh port: &quot;127.0.0.1:59539-&gt;22/tcp&quot;.\r\n\r\nWhen you do a &quot;minikube tunnel&quot;, minikube will open ssh.exe instances that you can see in your windows task manager if you enable the Command Line display in the column settings.\r\n\r\nThose &#39;tunnels&#39; would look like this:\r\n\r\n    ssh -o UserKnownHostsFile=/dev/null -o StrictHostKeyChecking=no -N docker@127.0.0.1 -p 59539 -i C:\\Users\\steve.sims\\.minikube\\machines\\minikube\\id_rsa &quot;-L 8080:10.102.174.166:8080&quot;\r\n\r\nIf I take that command apart and only run this from the command prompt:\r\n\r\n    ssh docker@127.0.0.1 -p 59539 -i C:\\users\\steve.sims\\.minikube\\machines\\minikube\\id_rsa\r\n\r\nThen I get an interactive remote window into the minikube VM (or node).  Typing &#39;ifconfig eth0&#39; I get:\r\n\r\n    eth0: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500\r\n            inet 192.168.49.2  netmask 255.255.255.0  broadcast 192.168.49.255\r\n\r\nSo, indeed my minikube ip _is_ 192.168.49.2, but it is an internal address as the folks above mentioned.\r\n\r\nOther than that, the -N parameter on the ssh means &quot;no command&quot; and the -L on the end is the port forward flag in port-to-forward:destination-socket format.  Of course, so all of the tunnels are coming across that initial docker -p port:port forward that minikube established when the container was started.\r\n\r\nIf it is useful, you can create your own ssh instances from that line&#39;s format by script and they will work just as well.\r\n\r\n","title":"minikube on WSL2 (windows 10) - minikube ip not reachable","body":"<p>On your windows system, after the creation of the container that is created by the initial &quot;minikube start&quot;, you can see the &quot;minikube instance&quot; by typing &quot;docker ps&quot;.   This is the minikube 'master' node running in this container.</p>\n<p>It would look something like this:</p>\n<pre><code>CONTAINER ID   IMAGE                                 COMMAND                  CREATED       STATUS             PORTS                                                                                                                                  NAMES\n6293ca0ba5b0   gcr.io/k8s-minikube/kicbase:v0.0.25   &quot;/usr/local/bin/entr…&quot;   2 hours ago   Up About an hour   127.0.0.1:59539-&gt;22/tcp, 127.0.0.1:59540-&gt;2376/tcp, 127.0.0.1:59537-&gt;5000/tcp, 127.0.0.1:59538-&gt;8443/tcp, 127.0.0.1:59536-&gt;32443/tcp   minikube\n</code></pre>\n<p>In the PORTS column you will see ports that are forwarded by virtue of the way that minikube start the docker container.  You can see these kinds of forwards are handled by docker the same as for any contain that you might do a &quot;docker run -p port:port&quot;</p>\n<p>Notice that the first port forward in this list is the ssh port: &quot;127.0.0.1:59539-&gt;22/tcp&quot;.</p>\n<p>When you do a &quot;minikube tunnel&quot;, minikube will open ssh.exe instances that you can see in your windows task manager if you enable the Command Line display in the column settings.</p>\n<p>Those 'tunnels' would look like this:</p>\n<pre><code>ssh -o UserKnownHostsFile=/dev/null -o StrictHostKeyChecking=no -N docker@127.0.0.1 -p 59539 -i C:\\Users\\steve.sims\\.minikube\\machines\\minikube\\id_rsa &quot;-L 8080:10.102.174.166:8080&quot;\n</code></pre>\n<p>If I take that command apart and only run this from the command prompt:</p>\n<pre><code>ssh docker@127.0.0.1 -p 59539 -i C:\\users\\steve.sims\\.minikube\\machines\\minikube\\id_rsa\n</code></pre>\n<p>Then I get an interactive remote window into the minikube VM (or node).  Typing 'ifconfig eth0' I get:</p>\n<pre><code>eth0: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500\n        inet 192.168.49.2  netmask 255.255.255.0  broadcast 192.168.49.255\n</code></pre>\n<p>So, indeed my minikube ip <em>is</em> 192.168.49.2, but it is an internal address as the folks above mentioned.</p>\n<p>Other than that, the -N parameter on the ssh means &quot;no command&quot; and the -L on the end is the port forward flag in port-to-forward:destination-socket format.  Of course, so all of the tunnels are coming across that initial docker -p port:port forward that minikube established when the container was started.</p>\n<p>If it is useful, you can create your own ssh instances from that line's format by script and they will work just as well.</p>\n"},{"tags":[],"owner":{"account_id":3573563,"reputation":837,"user_id":2983359,"accept_rate":40,"display_name":"bizimunda"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686817409,"creation_date":1686817409,"answer_id":76480507,"question_id":66607112,"body_markdown":"**Solution is to run by the name of your service**\r\n\r\n    minikube service &lt;&lt;*your_service_name*&gt;&gt; \r\nhas worked for me as well. And this is the same solution I have seen on the minikube&#39;s official website. They have given an example of how to create a service. And if you want to expose that service then you have run the same command as above.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/VNIYl.png","title":"minikube on WSL2 (windows 10) - minikube ip not reachable","body":"<p><strong>Solution is to run by the name of your service</strong></p>\n<pre><code>minikube service &lt;&lt;*your_service_name*&gt;&gt; \n</code></pre>\n<p>has worked for me as well. And this is the same solution I have seen on the minikube's official website. They have given an example of how to create a service. And if you want to expose that service then you have run the same command as above.</p>\n<p><a href=\"https://i.stack.imgur.com/VNIYl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VNIYl.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":49726,"reputation":1669,"user_id":148203,"accept_rate":88,"display_name":"Hossein"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701098303,"creation_date":1701098303,"answer_id":77558015,"question_id":66607112,"body_markdown":"Run this command:\r\n\r\n    minikube service --all\r\n\r\nThis is a sample output:\r\n\r\n    |-----------|------------|-------------|--------------|\r\n    | NAMESPACE |    NAME    | TARGET PORT |     URL      |\r\n    |-----------|------------|-------------|--------------|\r\n    | default   | kubernetes |             | No node port |\r\n    |-----------|------------|-------------|--------------|\r\n    &#128575;  service default/kubernetes has no node port\r\n    |-----------|---------------|-------------|--------------|\r\n    | NAMESPACE |     NAME      | TARGET PORT |     URL      |\r\n    |-----------|---------------|-------------|--------------|\r\n    | default   | mongo-service |             | No node port |\r\n    |-----------|---------------|-------------|--------------|\r\n    &#128575;  service default/mongo-service has no node port\r\n    |-----------|----------------|-------------|---------------------------|\r\n    | NAMESPACE |      NAME      | TARGET PORT |            URL            |\r\n    |-----------|----------------|-------------|---------------------------|\r\n    | default   | webapp-service |        3000 | http://192.168.49.2:30100 |\r\n    |-----------|----------------|-------------|---------------------------|\r\n    &#127939;  Starting tunnel for service kubernetes.\r\n    &#127939;  Starting tunnel for service mongo-service.\r\n    &#127939;  Starting tunnel for service webapp-service.\r\n    |-----------|----------------|-------------|------------------------|\r\n    | NAMESPACE |      NAME      | TARGET PORT |          URL           |\r\n    |-----------|----------------|-------------|------------------------|\r\n    | default   | kubernetes     |             | http://127.0.0.1:34355 |\r\n    | default   | mongo-service  |             | http://127.0.0.1:43027 |\r\n    | default   | webapp-service |             | http://127.0.0.1:45361 |\r\n    |-----------|----------------|-------------|------------------------|\r\n    &#127881;  Opening service default/kubernetes in default browser...\r\n    &#128073;  http://127.0.0.1:34355\r\n    &#127881;  Opening service default/mongo-service in default browser...\r\n    &#128073;  http://127.0.0.1:43027\r\n    &#127881;  Opening service default/webapp-service in default browser...\r\n    &#128073;  http://127.0.0.1:45361\r\n    ❗  Because you are using a Docker driver on linux, the terminal needs to be open to run it.\r\n\r\nAnd at the end you can see list of ip/ports that you can access from Windows. For example, I can open my &quot;default/webapp-service&quot; service using &quot;http://127.0.0.1:45361&quot;. It will go throught the tunnel made by minikube. No extra configuration is needed.\r\n\r\n\r\nAnd here is the command documentation and details:\r\n\r\n    Returns the Kubernetes URL(s) for service(s) in your local cluster. In the case\r\n    of multiple URLs they will be printed one at a time.\r\n    \r\n    Available Commands:\r\n      list          Lists the URLs for the services in your local cluster\r\n    \r\n    Options:\r\n        --all=false:\r\n            Forwards all services in a namespace (defaults to &quot;false&quot;)\r\n    \r\n        --https=false:\r\n            Open the service URL with https instead of http (defaults to &quot;false&quot;)\r\n    \r\n        --interval=1:\r\n            The initial time interval for each check that wait performs in seconds\r\n    \r\n        -n, --namespace=&#39;default&#39;:\r\n            The service namespace\r\n    \r\n        --url=false:\r\n            Display the Kubernetes service URL in the CLI instead of opening it in\r\n            the default browser\r\n    \r\n        --wait=2:\r\n            Amount of time to wait for a service in seconds\r\n    \r\n    Usage:\r\n      minikube service [flags] SERVICE [options]\r\n    \r\n    Use &quot;minikube service &lt;command&gt; --help&quot; for more information about a given\r\n    command.\r\n    Use &quot;minikube options&quot; for a list of global command-line options (applies to all\r\n    commands).\r\n\r\n","title":"minikube on WSL2 (windows 10) - minikube ip not reachable","body":"<p>Run this command:</p>\n<pre><code>minikube service --all\n</code></pre>\n<p>This is a sample output:</p>\n<pre><code>|-----------|------------|-------------|--------------|\n| NAMESPACE |    NAME    | TARGET PORT |     URL      |\n|-----------|------------|-------------|--------------|\n| default   | kubernetes |             | No node port |\n|-----------|------------|-------------|--------------|\n😿  service default/kubernetes has no node port\n|-----------|---------------|-------------|--------------|\n| NAMESPACE |     NAME      | TARGET PORT |     URL      |\n|-----------|---------------|-------------|--------------|\n| default   | mongo-service |             | No node port |\n|-----------|---------------|-------------|--------------|\n😿  service default/mongo-service has no node port\n|-----------|----------------|-------------|---------------------------|\n| NAMESPACE |      NAME      | TARGET PORT |            URL            |\n|-----------|----------------|-------------|---------------------------|\n| default   | webapp-service |        3000 | http://192.168.49.2:30100 |\n|-----------|----------------|-------------|---------------------------|\n🏃  Starting tunnel for service kubernetes.\n🏃  Starting tunnel for service mongo-service.\n🏃  Starting tunnel for service webapp-service.\n|-----------|----------------|-------------|------------------------|\n| NAMESPACE |      NAME      | TARGET PORT |          URL           |\n|-----------|----------------|-------------|------------------------|\n| default   | kubernetes     |             | http://127.0.0.1:34355 |\n| default   | mongo-service  |             | http://127.0.0.1:43027 |\n| default   | webapp-service |             | http://127.0.0.1:45361 |\n|-----------|----------------|-------------|------------------------|\n🎉  Opening service default/kubernetes in default browser...\n👉  http://127.0.0.1:34355\n🎉  Opening service default/mongo-service in default browser...\n👉  http://127.0.0.1:43027\n🎉  Opening service default/webapp-service in default browser...\n👉  http://127.0.0.1:45361\n❗  Because you are using a Docker driver on linux, the terminal needs to be open to run it.\n</code></pre>\n<p>And at the end you can see list of ip/ports that you can access from Windows. For example, I can open my &quot;default/webapp-service&quot; service using &quot;http://127.0.0.1:45361&quot;. It will go throught the tunnel made by minikube. No extra configuration is needed.</p>\n<p>And here is the command documentation and details:</p>\n<pre><code>Returns the Kubernetes URL(s) for service(s) in your local cluster. In the case\nof multiple URLs they will be printed one at a time.\n\nAvailable Commands:\n  list          Lists the URLs for the services in your local cluster\n\nOptions:\n    --all=false:\n        Forwards all services in a namespace (defaults to &quot;false&quot;)\n\n    --https=false:\n        Open the service URL with https instead of http (defaults to &quot;false&quot;)\n\n    --interval=1:\n        The initial time interval for each check that wait performs in seconds\n\n    -n, --namespace='default':\n        The service namespace\n\n    --url=false:\n        Display the Kubernetes service URL in the CLI instead of opening it in\n        the default browser\n\n    --wait=2:\n        Amount of time to wait for a service in seconds\n\nUsage:\n  minikube service [flags] SERVICE [options]\n\nUse &quot;minikube service &lt;command&gt; --help&quot; for more information about a given\ncommand.\nUse &quot;minikube options&quot; for a list of global command-line options (applies to all\ncommands).\n</code></pre>\n"}],"owner":{"account_id":15982217,"reputation":61,"user_id":11533655,"display_name":"Mirosław Haręza"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9297,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":5,"score":6,"last_activity_date":1701098303,"creation_date":1615582611,"question_id":66607112,"body_markdown":"I&#39;ve installed the minikube instance on my local computer (--driver=docker). The minikube ip is 192.168.49.2. When I start minikube (minikube start --memory 7168) I get no errors on console. But trying to ping the minikube ip fails. What I do wrong?\r\n```\r\n$ kubectl get nodes -o wide\r\nNAME       STATUS   ROLES                  AGE   VERSION   INTERNAL-IP    EXTERNAL-IP   OS-IMAGE             KERNEL-VERSION                   CONTAINER-RUNTIME\r\nminikube   Ready    control-plane,master   9d    v1.20.2   192.168.49.2   &lt;none&gt;        Ubuntu 20.04.1 LTS   5.4.72-microsoft-standard-WSL2   docker://20.10.3\r\n```\r\n","title":"minikube on WSL2 (windows 10) - minikube ip not reachable","body":"<p>I've installed the minikube instance on my local computer (--driver=docker). The minikube ip is 192.168.49.2. When I start minikube (minikube start --memory 7168) I get no errors on console. But trying to ping the minikube ip fails. What I do wrong?</p>\n<pre><code>$ kubectl get nodes -o wide\nNAME       STATUS   ROLES                  AGE   VERSION   INTERNAL-IP    EXTERNAL-IP   OS-IMAGE             KERNEL-VERSION                   CONTAINER-RUNTIME\nminikube   Ready    control-plane,master   9d    v1.20.2   192.168.49.2   &lt;none&gt;        Ubuntu 20.04.1 LTS   5.4.72-microsoft-standard-WSL2   docker://20.10.3\n</code></pre>\n"},{"tags":["java","spring","spring-security","security-context"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1701098519,"post_id":77541213,"comment_id":136729684,"body_markdown":"Why are you writing this yourself? There is cors support in Spring Security / Spring MVC. Your `SessionFilter` seems like to interfere with Spring Session and I don&#39;t get your authentication provider. Feels like you are trying to work around the frameworks you are using.","body":"Why are you writing this yourself? There is cors support in Spring Security / Spring MVC. Your <code>SessionFilter</code> seems like to interfere with Spring Session and I don&#39;t get your authentication provider. Feels like you are trying to work around the frameworks you are using."},{"owner":{"account_id":29977679,"reputation":1,"user_id":22973488,"display_name":"Sugali Yougender"},"score":0,"creation_date":1701100220,"post_id":77541213,"comment_id":136730103,"body_markdown":"can you please add the correct code for session filter and cors support. Also for security context for springboot. I also have one question that, in springboot should i use UserDetailsService interface of springboot or my custom user entity is enough??","body":"can you please add the correct code for session filter and cors support. Also for security context for springboot. I also have one question that, in springboot should i use UserDetailsService interface of springboot or my custom user entity is enough??"},{"owner":{"account_id":2064278,"reputation":13118,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1701103370,"post_id":77541213,"comment_id":136730751,"body_markdown":"can i ask why you havnt read the documentation before asking here?","body":"can i ask why you havnt read the documentation before asking here?"},{"owner":{"account_id":29977679,"reputation":1,"user_id":22973488,"display_name":"Sugali Yougender"},"score":0,"creation_date":1701104040,"post_id":77541213,"comment_id":136730881,"body_markdown":"I have read and implemented but it seems not working. can you suggest why my authentication information is not getting stored in security context for other pages after login??","body":"I have read and implemented but it seems not working. can you suggest why my authentication information is not getting stored in security context for other pages after login??"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1701157686,"post_id":77541213,"comment_id":136737246,"body_markdown":"You don&#39;t need to implement anything, cors support is build into Spring Security as well as Spring MVC. Your session filter is something that is already being handled by Spring Session itself. Why you chose to implement them yourself defeats me, the same for the authentication provider. You should just implement a `UserDetailsService` and use that (or just provide the queries to Spring Security to map your data to the Sring Security user).","body":"You don&#39;t need to implement anything, cors support is build into Spring Security as well as Spring MVC. Your session filter is something that is already being handled by Spring Session itself. Why you chose to implement them yourself defeats me, the same for the authentication provider. You should just implement a <code>UserDetailsService</code> and use that (or just provide the queries to Spring Security to map your data to the Sring Security user)."},{"owner":{"account_id":29977679,"reputation":1,"user_id":22973488,"display_name":"Sugali Yougender"},"score":0,"creation_date":1701182021,"post_id":77541213,"comment_id":136741681,"body_markdown":"@M.Deinum so is it mandatory to implement UserDetailsService of spring security?? without implementing it we can&#39;t authenticate or authorize user??","body":"@M.Deinum so is it mandatory to implement UserDetailsService of spring security?? without implementing it we can&#39;t authenticate or authorize user??"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1701182757,"post_id":77541213,"comment_id":136741860,"body_markdown":"You don&#39;t need to implement it you can provide queries if they come from a database. You could also use an `AuthenticationProvider` but yours doesn&#39;t make sense, nor does it add anything to the regular one if you would wrap your `CustomerRepository` with a `UserDetailsService`.","body":"You don&#39;t need to implement it you can provide queries if they come from a database. You could also use an <code>AuthenticationProvider</code> but yours doesn&#39;t make sense, nor does it add anything to the regular one if you would wrap your <code>CustomerRepository</code> with a <code>UserDetailsService</code>."},{"owner":{"account_id":29977679,"reputation":1,"user_id":22973488,"display_name":"Sugali Yougender"},"score":0,"creation_date":1701183957,"post_id":77541213,"comment_id":136742106,"body_markdown":"I don&#39;t understant you @M.Deinum. can you provide any example code if possible please","body":"I don&#39;t understant you @M.Deinum. can you provide any example code if possible please"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1701184126,"post_id":77541213,"comment_id":136742133,"body_markdown":"What is it you don&#39;t understand? Ditch the code you have, create a `UserDetailsService` that uses your `CustomerREpository` to retrieve the user and that is it. Spring Security will do all the other things (password checks, user validation etc. etc.). What you are doing and writing is already provided by all the other frameworks and libraries you are using, you are working around them by your implementations of the filters, authentication providers etc.","body":"What is it you don&#39;t understand? Ditch the code you have, create a <code>UserDetailsService</code> that uses your <code>CustomerREpository</code> to retrieve the user and that is it. Spring Security will do all the other things (password checks, user validation etc. etc.). What you are doing and writing is already provided by all the other frameworks and libraries you are using, you are working around them by your implementations of the filters, authentication providers etc."},{"owner":{"account_id":29977679,"reputation":1,"user_id":22973488,"display_name":"Sugali Yougender"},"score":0,"creation_date":1701230527,"post_id":77541213,"comment_id":136748765,"body_markdown":"Can you please provide any link for the same","body":"Can you please provide any link for the same"}],"owner":{"account_id":29977679,"reputation":1,"user_id":22973488,"display_name":"Sugali Yougender"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":0,"score":-1,"last_activity_date":1701098301,"creation_date":1700808793,"question_id":77541213,"body_markdown":"I am not able to set the authentication information in security context for whole application.but I am able to do it in /login page but after login when I access other pages it is giving me null. Why? What is this behaviour.please help me. I am stuck in this issue.\r\nPlease find below code for reference \r\n\r\n```\r\n@Component\r\n@Order(Ordered.HIGHEST_PRECEDENCE+2) \r\npublic class CorsFilter implements Filter{\r\n\t\r\n\t@Autowired\r\n\tprivate LoginAuthenticationProvider loginAuthenticationProvider;\r\n\t\r\n\t@Override\r\n\tpublic void doFilter(ServletRequest req,ServletResponse res, FilterChain chain) throws IOException,ServletException{\r\n\t\tfinal HttpServletRequest request = (HttpServletRequest) req;\r\n\t\tfinal HttpServletResponse response = (HttpServletResponse) res;\r\n \r\n\t\tresponse.addHeader(&quot;Access-Control-Allow-Origin&quot;, &quot;*&quot;);\r\n\t\tresponse.addHeader(&quot;Access-Control-Allow-Methods&quot;,&quot;GET,POST,PUT,DELETE,OPTIONS&quot;);\r\n\t\tresponse.addHeader(&quot;Access-Control-Allow-Headers&quot;, &quot;Authorization,Content-Type,CustomerID&quot;);\r\n\t\tresponse.addHeader(&quot;Access-Control-Max-Age&quot;, &quot;3600&quot;);\r\n \r\n\t\tif(&quot;OPTIONS&quot;.equalsIgnoreCase(((HttpServletRequest)req).getMethod()))\r\n\t\t\tresponse.setStatus(HttpServletResponse.SC_OK);\r\n\t\telse\r\n\t\t  chain.doFilter(req, res);\r\n\t}\r\n\r\n}\r\n```\r\n\r\nBelow is my session filter\r\n\r\n```\r\n@Component\r\n@Order(Ordered.HIGHEST_PRECEDENCE+1)\r\npublic class SessionFilter implements Filter {\r\n\t\r\n\tprivate final Logger logger = LoggerFactory.getLogger(&quot;sessionFilterLogger&quot;);\r\n\tprivate boolean isCookiePresent = false;\r\n\tprivate String cookie = &quot;&quot;;\r\n\tprivate final long SESSION_TIMEOUT = 30*60*1000;\r\n\t\r\n\t\r\n\t@Autowired\r\n\tprivate UserSessionRepository sessionRepository;\r\n\r\n\t@Override\r\n\tpublic void doFilter(ServletRequest request, ServletResponse response, FilterChain chain)\r\n\t\t\tthrows IOException, ServletException {\r\n \r\n\t\tHttpServletRequest httpRequest = (HttpServletRequest) request;\r\n\t\tHttpServletResponse httpResponse = (HttpServletResponse) response;\r\n \r\n\t\tCookie[] cookies = httpRequest.getCookies();\r\n\t\tif(cookies==null) {\r\n\t\t\tlogger.debug(request.toString());\r\n\t\t\tchain.doFilter(request,response);\r\n\t\t\treturn;\r\n\t\t}\r\n \r\n\t\telse {\r\n\t\t\tfor(Cookie cookie:cookies) {\r\n\t\t\t\tif(cookie.getName().equals(&quot;username_session&quot;)) {\r\n\t\t\t\t\tthis.isCookiePresent = true;\r\n\t\t\t\t\tthis.cookie = cookie.getValue();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\t\t\t\r\n\t\t}\r\n\r\n \r\n\t\tif(this.isCookiePresent &amp;&amp; this.cookie!=null &amp;&amp; !this.cookie.isEmpty()) {\r\n\t\t\tUserSession userSession = sessionRepository.findBySession(this.cookie).get();\r\n\t\t\tlong currentTime = System.currentTimeMillis();\r\n\t\t\tlong last_access_time = userSession.getLast_access_time().getTime();\r\n\t\t\tif(currentTime-last_access_time&gt;this.SESSION_TIMEOUT) {\r\n\t\t\t\thttpResponse.sendRedirect(&quot;/login&quot;);\r\n\t\t\t\treturn;\r\n\t\t\t}else {\r\n\t\t\t\tUserSession usersession = new UserSession();\r\n\t\t\t\tusersession.setLast_access_time(new Timestamp(currentTime));\r\n\t\t\t\tsessionRepository.save(usersession);\r\n\t\t\t}\r\n\t\t}else {\r\n\t\t\thttpResponse.sendRedirect(&quot;/login&quot;);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tchain.doFilter(request, response);\r\n \r\n\t}\r\n\r\n}\r\n```\r\n\r\nBelow is my custom login provider\r\n\r\n\r\n```\r\n@Component\r\npublic class LoginAuthenticationProvider implements AuthenticationProvider {\r\n\t\r\n\t@Autowired\r\n\tprivate CustomerRepository customerRepository;\r\n\t\r\n\t@Autowired PasswordConfig passwordEncoder;\r\n\r\n\t@Override\r\n\tpublic Authentication authenticate(Authentication authentication) throws AuthenticationException {\r\n \r\n\t\tfinal Logger logger = LoggerFactory.getLogger(&quot;authProvider&quot;);\r\n \r\n\t\tString username = authentication.getName();\r\n\t\tString password = authentication.getCredentials().toString();\r\n\t\tCustomer user = customerRepository.getByUsername(username);\r\n \r\n\t\tif(password==null || password.isBlank() || password.isEmpty()) {\r\n//\t\t\tBoolean isUserExist = customerRepository.existsByUsername(username);\r\n\t\t\treturn new UsernamePasswordAuthenticationToken(username,user.getPassword());\r\n\t\t}\r\n\r\n \r\n\t\tif(passwordEncoder.encoder().matches(password, user.getPassword())) {\r\n\t\t\treturn new UsernamePasswordAuthenticationToken(username, password);\r\n\t\t}else {\r\n\t\t\tthrow new BadCredentialsException(&quot;Bad Credentials&quot;);\r\n\t\t}\r\n\t}\r\n\r\n\t@Override\r\n\tpublic boolean supports(Class&lt;?&gt; authentication) {\r\n\t\treturn UsernamePasswordAuthenticationToken.class.isAssignableFrom(authentication);\r\n\t}\r\n\r\n}\r\n```\r\nthis is &quot;CustomerManagerImpl&quot; class where i am adding the logic to store setAuthentication is secuity context using custom login provider\r\n```\tSecurityContextHolder.setStrategyName(SecurityContextHolder.MODE_INHERITABLETHREADLOCAL);\r\nSecurityContext context = SecurityContextHolder.createEmptyContext();\r\n\r\nCollection&lt;GrantedAuthority&gt; authorities = new ArrayList&lt;&gt;();\r\nauthorities.add(new SimpleGrantedAuthority(&quot;ROLE_USER&quot;));\r\nAuthentication authenticationToken = new UsernamePasswordAuthenticationToken(data.getUsername(),&quot;&quot;,authorities);\r\ncontext.setAuthentication(authenticationToken);\r\nSecurityContextHolder.setContext(context);\r\n\r\nuserSessionManager.createSession(data.getUsername(),req);\r\nString sessionID = userSessionManager.getSession(data.getUsername());\r\n\r\nAuthentication getAuthentication = SecurityContextHolder.getContext().getAuthentication();\r\n\r\nCookie cookie = new Cookie(&quot;username_session&quot;,sessionID);\r\ncookie.setPath(&quot;/&quot;);\r\ncookie.setMaxAge(1800);\r\ncookie.setHttpOnly(true);\r\nres.addCookie(cookie);\r\n```\r\n\r\nNow tell me where I am wrong. Why am I not able to set the authentication information in security context for the whole application. also why am I not able to see the cookie for all subsequent requests. Should I add the logic in a filter to add cookie to each requests? if yes consider writing the code.\r\n\r\nI tried to add authentication in security context after logging in but after logging in it is not being added in security context. It is giving me null.","title":"authentication information in security context is null for other pages like /home","body":"<p>I am not able to set the authentication information in security context for whole application.but I am able to do it in /login page but after login when I access other pages it is giving me null. Why? What is this behaviour.please help me. I am stuck in this issue.\nPlease find below code for reference</p>\n<pre><code>@Component\n@Order(Ordered.HIGHEST_PRECEDENCE+2) \npublic class CorsFilter implements Filter{\n    \n    @Autowired\n    private LoginAuthenticationProvider loginAuthenticationProvider;\n    \n    @Override\n    public void doFilter(ServletRequest req,ServletResponse res, FilterChain chain) throws IOException,ServletException{\n        final HttpServletRequest request = (HttpServletRequest) req;\n        final HttpServletResponse response = (HttpServletResponse) res;\n \n        response.addHeader(&quot;Access-Control-Allow-Origin&quot;, &quot;*&quot;);\n        response.addHeader(&quot;Access-Control-Allow-Methods&quot;,&quot;GET,POST,PUT,DELETE,OPTIONS&quot;);\n        response.addHeader(&quot;Access-Control-Allow-Headers&quot;, &quot;Authorization,Content-Type,CustomerID&quot;);\n        response.addHeader(&quot;Access-Control-Max-Age&quot;, &quot;3600&quot;);\n \n        if(&quot;OPTIONS&quot;.equalsIgnoreCase(((HttpServletRequest)req).getMethod()))\n            response.setStatus(HttpServletResponse.SC_OK);\n        else\n          chain.doFilter(req, res);\n    }\n\n}\n</code></pre>\n<p>Below is my session filter</p>\n<pre><code>@Component\n@Order(Ordered.HIGHEST_PRECEDENCE+1)\npublic class SessionFilter implements Filter {\n    \n    private final Logger logger = LoggerFactory.getLogger(&quot;sessionFilterLogger&quot;);\n    private boolean isCookiePresent = false;\n    private String cookie = &quot;&quot;;\n    private final long SESSION_TIMEOUT = 30*60*1000;\n    \n    \n    @Autowired\n    private UserSessionRepository sessionRepository;\n\n    @Override\n    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain)\n            throws IOException, ServletException {\n \n        HttpServletRequest httpRequest = (HttpServletRequest) request;\n        HttpServletResponse httpResponse = (HttpServletResponse) response;\n \n        Cookie[] cookies = httpRequest.getCookies();\n        if(cookies==null) {\n            logger.debug(request.toString());\n            chain.doFilter(request,response);\n            return;\n        }\n \n        else {\n            for(Cookie cookie:cookies) {\n                if(cookie.getName().equals(&quot;username_session&quot;)) {\n                    this.isCookiePresent = true;\n                    this.cookie = cookie.getValue();\n                    break;\n                }\n            }           \n        }\n\n \n        if(this.isCookiePresent &amp;&amp; this.cookie!=null &amp;&amp; !this.cookie.isEmpty()) {\n            UserSession userSession = sessionRepository.findBySession(this.cookie).get();\n            long currentTime = System.currentTimeMillis();\n            long last_access_time = userSession.getLast_access_time().getTime();\n            if(currentTime-last_access_time&gt;this.SESSION_TIMEOUT) {\n                httpResponse.sendRedirect(&quot;/login&quot;);\n                return;\n            }else {\n                UserSession usersession = new UserSession();\n                usersession.setLast_access_time(new Timestamp(currentTime));\n                sessionRepository.save(usersession);\n            }\n        }else {\n            httpResponse.sendRedirect(&quot;/login&quot;);\n            return;\n        }\n\n        chain.doFilter(request, response);\n \n    }\n\n}\n</code></pre>\n<p>Below is my custom login provider</p>\n<pre><code>@Component\npublic class LoginAuthenticationProvider implements AuthenticationProvider {\n    \n    @Autowired\n    private CustomerRepository customerRepository;\n    \n    @Autowired PasswordConfig passwordEncoder;\n\n    @Override\n    public Authentication authenticate(Authentication authentication) throws AuthenticationException {\n \n        final Logger logger = LoggerFactory.getLogger(&quot;authProvider&quot;);\n \n        String username = authentication.getName();\n        String password = authentication.getCredentials().toString();\n        Customer user = customerRepository.getByUsername(username);\n \n        if(password==null || password.isBlank() || password.isEmpty()) {\n//          Boolean isUserExist = customerRepository.existsByUsername(username);\n            return new UsernamePasswordAuthenticationToken(username,user.getPassword());\n        }\n\n \n        if(passwordEncoder.encoder().matches(password, user.getPassword())) {\n            return new UsernamePasswordAuthenticationToken(username, password);\n        }else {\n            throw new BadCredentialsException(&quot;Bad Credentials&quot;);\n        }\n    }\n\n    @Override\n    public boolean supports(Class&lt;?&gt; authentication) {\n        return UsernamePasswordAuthenticationToken.class.isAssignableFrom(authentication);\n    }\n\n}\n</code></pre>\n<p>this is &quot;CustomerManagerImpl&quot; class where i am adding the logic to store setAuthentication is secuity context using custom login provider</p>\n<pre><code>SecurityContext context = SecurityContextHolder.createEmptyContext();\n\nCollection&lt;GrantedAuthority&gt; authorities = new ArrayList&lt;&gt;();\nauthorities.add(new SimpleGrantedAuthority(&quot;ROLE_USER&quot;));\nAuthentication authenticationToken = new UsernamePasswordAuthenticationToken(data.getUsername(),&quot;&quot;,authorities);\ncontext.setAuthentication(authenticationToken);\nSecurityContextHolder.setContext(context);\n\nuserSessionManager.createSession(data.getUsername(),req);\nString sessionID = userSessionManager.getSession(data.getUsername());\n\nAuthentication getAuthentication = SecurityContextHolder.getContext().getAuthentication();\n\nCookie cookie = new Cookie(&quot;username_session&quot;,sessionID);\ncookie.setPath(&quot;/&quot;);\ncookie.setMaxAge(1800);\ncookie.setHttpOnly(true);\nres.addCookie(cookie);\n</code></pre>\n<p>Now tell me where I am wrong. Why am I not able to set the authentication information in security context for the whole application. also why am I not able to see the cookie for all subsequent requests. Should I add the logic in a filter to add cookie to each requests? if yes consider writing the code.</p>\n<p>I tried to add authentication in security context after logging in but after logging in it is not being added in security context. It is giving me null.</p>\n"},{"tags":["java","android","usb","usbserial"],"comments":[{"owner":{"account_id":50585,"reputation":39930,"user_id":150978,"accept_rate":78,"display_name":"Robert"},"score":0,"creation_date":1701097315,"post_id":77557031,"comment_id":136729377,"body_markdown":"I see where you send data to the device but where do you read the response?","body":"I see where you send data to the device but where do you read the response?"},{"owner":{"account_id":30002449,"reputation":1,"user_id":22992132,"display_name":"erbl"},"score":0,"creation_date":1701098813,"post_id":77557031,"comment_id":136729766,"body_markdown":"I have forgotten to add the method to read, it&#39;s added","body":"I have forgotten to add the method to read, it&#39;s added"}],"owner":{"account_id":30002449,"reputation":1,"user_id":22992132,"display_name":"erbl"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1701098267,"creation_date":1701089399,"question_id":77557031,"body_markdown":"I use usb-serial-[for-android project ](https://github.com/mik3y/usb-serial-for-android) to communicate with a device pluged in USB\r\nI can detect the device, open the port and send data BUT data received is always the data I just sent before\r\n\r\nI Also update the manifest to detect when the usb device is pluged or unpluged and run the application to manage it.\r\n\r\nThere is the code I use. Am I missing something?\r\n\r\n```\r\nUsbManager manager = (UsbManager) getSystemService(Context.USB_SERVICE);\r\n    UsbSerialProber usbDefaultProber = UsbSerialProber.getDefaultProber();\r\n\r\n    HashMap&lt;String, UsbDevice&gt; deviceList = manager.getDeviceList();\r\n    if (deviceList.isEmpty()) {\r\n        Toast.makeText(this, &quot;Aucun ph&#233;riph&#233;rique USB detect&#233;&quot;, Toast.LENGTH_LONG).show();\r\n        infos.setText(&quot;Aucun ph&#233;riph&#233;rique USB detect&#233;&quot;);\r\n    }\r\n\r\n    for (UsbDevice device : deviceList.values()) {\r\n        Toast.makeText(this, &quot;Device detect&#233; =&quot; + device.getProductName(), Toast.LENGTH_LONG).show();\r\n        Toast.makeText(this, &quot;Device Vendor =&quot; + device.getVendorId() + &quot; Product Id = &quot; + device.getProductId(), Toast.LENGTH_LONG).show();\r\n        UsbSerialDriver driver = usbDefaultProber.probeDevice(device);\r\n        if (driver == null) {\r\n            ProbeTable customTable = new ProbeTable();\r\n            customTable.addProduct(device.getVendorId(), device.getProductId(), Cp21xxSerialDriver.class);\r\n            UsbSerialProber customProber = new UsbSerialProber(customTable);\r\n            driver = customProber.probeDevice(device);\r\n        }\r\n        if (driver != null) {\r\n            Context c = getApplicationContext();\r\n            PendingIntent pendingIntent;\r\n            Intent notificationIntent = new Intent();\r\n            if (android.os.Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.S) {\r\n                pendingIntent = PendingIntent.getActivity(c,\r\n                        0, notificationIntent, PendingIntent.FLAG_UPDATE_CURRENT | PendingIntent.FLAG_MUTABLE);\r\n\r\n            } else {\r\n                pendingIntent = PendingIntent.getActivity(c,\r\n                        0, notificationIntent, PendingIntent.FLAG_UPDATE_CURRENT);\r\n\r\n            }\r\n            while (!manager.hasPermission(device)) {\r\n                manager.requestPermission(device, pendingIntent);\r\n            }\r\n            UsbDeviceConnection connection = manager.openDevice(device);\r\n            if (connection == null) {\r\n                Toast.makeText(this, &quot;Connexion impossible&quot;, Toast.LENGTH_LONG).show();\r\n                return;\r\n            }\r\n            infos.setText(&quot;Envoi en cours...&quot;);\r\n            Thread.sleep(1000);\r\n            Toast.makeText(this, &quot;Envoi en cours...&quot;, Toast.LENGTH_LONG).show();\r\n            UsbSerialPort port = driver.getPorts().get(0); // Most devices have just one port (port 0)\r\n            port.open(connection);\r\n            port.setParameters(1200, 8, UsbSerialPort.STOPBITS_2, UsbSerialPort.PARITY_NONE);\r\n            request = new byte[port.getReadEndpoint().getMaxPacketSize()];\r\n            request[0] = hexIntToByte(0x80);\r\n            request[1] = hexIntToByte(0x3F);\r\n            request[2] = hexIntToByte(0x01);           \r\n            byte crcMSByte = hexIntToByte(0x05);\r\n            byte crcLSByte = hexIntToByte(0x8A);\r\n            request[3] = crcMSByte;//CRC MSByte\r\n            request[4] = crcLSByte;//CRC LSByte\r\n            request[5] = hexIntToByte(0x0D);//Stop Byte\r\n            SerialInputOutputManager usbIoManager = new SerialInputOutputManager(port, this);\r\n            usbIoManager.start();\r\n            port.write(request, 0);\r\n            String infosText;\r\n            infosText = &quot;Informations \\n&quot;;\r\n            infosText += &quot;Data envoy&#233;e = &quot; + byteArrayToHexString(request) + &quot;\\n&quot;;\r\n            infos.setText(infosText);\r\n\r\n        } else {\r\n            Toast.makeText(this, &quot;AUCUN Driver disponible&quot;, Toast.LENGTH_LONG).show();\r\n        }\r\n    }\r\n\r\n    spinner.setVisibility(View.GONE);\r\n    } catch (Exception e) {\r\n        String erreur = e.toString();\r\n        Toast.makeText(this, &quot;Erreur = &quot; + erreur, Toast.LENGTH_LONG).show();\r\n        String erreurText;\r\n        erreurText = &quot;ERREUR \\n&quot;;\r\n        erreurText += &quot;Data envoy&#233;e = &quot; + byteArrayToHexString(request) + &quot;\\n&quot;;\r\n        erreurText += &quot;Erreur Message = &quot; + erreur + &quot;\\n&quot;;\r\n        infos.setText(erreurText);\r\n        spinner.setVisibility(View.GONE);\r\n\r\n    }  \r\n```\r\nTo read the data I have another method below\r\n\r\n    @Override\r\n    public void onNewData(byte[] data) {\r\n        runOnUiThread(() -&gt; { infos.append(byteArrayToHexString(data)); });\r\n    }","title":"USB Serial For Android - Echo only","body":"<p>I use usb-serial-<a href=\"https://github.com/mik3y/usb-serial-for-android\" rel=\"nofollow noreferrer\">for-android project </a> to communicate with a device pluged in USB\nI can detect the device, open the port and send data BUT data received is always the data I just sent before</p>\n<p>I Also update the manifest to detect when the usb device is pluged or unpluged and run the application to manage it.</p>\n<p>There is the code I use. Am I missing something?</p>\n<pre><code>UsbManager manager = (UsbManager) getSystemService(Context.USB_SERVICE);\n    UsbSerialProber usbDefaultProber = UsbSerialProber.getDefaultProber();\n\n    HashMap&lt;String, UsbDevice&gt; deviceList = manager.getDeviceList();\n    if (deviceList.isEmpty()) {\n        Toast.makeText(this, &quot;Aucun phériphérique USB detecté&quot;, Toast.LENGTH_LONG).show();\n        infos.setText(&quot;Aucun phériphérique USB detecté&quot;);\n    }\n\n    for (UsbDevice device : deviceList.values()) {\n        Toast.makeText(this, &quot;Device detecté =&quot; + device.getProductName(), Toast.LENGTH_LONG).show();\n        Toast.makeText(this, &quot;Device Vendor =&quot; + device.getVendorId() + &quot; Product Id = &quot; + device.getProductId(), Toast.LENGTH_LONG).show();\n        UsbSerialDriver driver = usbDefaultProber.probeDevice(device);\n        if (driver == null) {\n            ProbeTable customTable = new ProbeTable();\n            customTable.addProduct(device.getVendorId(), device.getProductId(), Cp21xxSerialDriver.class);\n            UsbSerialProber customProber = new UsbSerialProber(customTable);\n            driver = customProber.probeDevice(device);\n        }\n        if (driver != null) {\n            Context c = getApplicationContext();\n            PendingIntent pendingIntent;\n            Intent notificationIntent = new Intent();\n            if (android.os.Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.S) {\n                pendingIntent = PendingIntent.getActivity(c,\n                        0, notificationIntent, PendingIntent.FLAG_UPDATE_CURRENT | PendingIntent.FLAG_MUTABLE);\n\n            } else {\n                pendingIntent = PendingIntent.getActivity(c,\n                        0, notificationIntent, PendingIntent.FLAG_UPDATE_CURRENT);\n\n            }\n            while (!manager.hasPermission(device)) {\n                manager.requestPermission(device, pendingIntent);\n            }\n            UsbDeviceConnection connection = manager.openDevice(device);\n            if (connection == null) {\n                Toast.makeText(this, &quot;Connexion impossible&quot;, Toast.LENGTH_LONG).show();\n                return;\n            }\n            infos.setText(&quot;Envoi en cours...&quot;);\n            Thread.sleep(1000);\n            Toast.makeText(this, &quot;Envoi en cours...&quot;, Toast.LENGTH_LONG).show();\n            UsbSerialPort port = driver.getPorts().get(0); // Most devices have just one port (port 0)\n            port.open(connection);\n            port.setParameters(1200, 8, UsbSerialPort.STOPBITS_2, UsbSerialPort.PARITY_NONE);\n            request = new byte[port.getReadEndpoint().getMaxPacketSize()];\n            request[0] = hexIntToByte(0x80);\n            request[1] = hexIntToByte(0x3F);\n            request[2] = hexIntToByte(0x01);           \n            byte crcMSByte = hexIntToByte(0x05);\n            byte crcLSByte = hexIntToByte(0x8A);\n            request[3] = crcMSByte;//CRC MSByte\n            request[4] = crcLSByte;//CRC LSByte\n            request[5] = hexIntToByte(0x0D);//Stop Byte\n            SerialInputOutputManager usbIoManager = new SerialInputOutputManager(port, this);\n            usbIoManager.start();\n            port.write(request, 0);\n            String infosText;\n            infosText = &quot;Informations \\n&quot;;\n            infosText += &quot;Data envoyée = &quot; + byteArrayToHexString(request) + &quot;\\n&quot;;\n            infos.setText(infosText);\n\n        } else {\n            Toast.makeText(this, &quot;AUCUN Driver disponible&quot;, Toast.LENGTH_LONG).show();\n        }\n    }\n\n    spinner.setVisibility(View.GONE);\n    } catch (Exception e) {\n        String erreur = e.toString();\n        Toast.makeText(this, &quot;Erreur = &quot; + erreur, Toast.LENGTH_LONG).show();\n        String erreurText;\n        erreurText = &quot;ERREUR \\n&quot;;\n        erreurText += &quot;Data envoyée = &quot; + byteArrayToHexString(request) + &quot;\\n&quot;;\n        erreurText += &quot;Erreur Message = &quot; + erreur + &quot;\\n&quot;;\n        infos.setText(erreurText);\n        spinner.setVisibility(View.GONE);\n\n    }  \n</code></pre>\n<p>To read the data I have another method below</p>\n<pre><code>@Override\npublic void onNewData(byte[] data) {\n    runOnUiThread(() -&gt; { infos.append(byteArrayToHexString(data)); });\n}\n</code></pre>\n"},{"tags":["java","encryption","cryptography","paillier"],"comments":[{"owner":{"account_id":79153,"reputation":513935,"user_id":224671,"accept_rate":67,"display_name":"kennytm"},"score":0,"creation_date":1485628317,"post_id":41913097,"comment_id":71007945,"body_markdown":"How do you transform the big integer to byte array and back?","body":"How do you transform the big integer to byte array and back?"},{"owner":{"account_id":9568676,"reputation":3,"user_id":7107076,"display_name":"LPepe"},"score":0,"creation_date":1485875233,"post_id":41913097,"comment_id":71100474,"body_markdown":"i was using something like this `BigInteger m1 = new BigInteger(data);` and `m1.toByteArray()` but i change it as Maarten Bodewes proposed in his answer so the biginteger will always be positive","body":"i was using something like this <code>BigInteger m1 = new BigInteger(data);</code> and <code>m1.toByteArray()</code> but i change it as Maarten Bodewes proposed in his answer so the biginteger will always be positive"}],"answers":[{"tags":[],"owner":{"account_id":288696,"reputation":91230,"user_id":589259,"accept_rate":82,"display_name":"Maarten Bodewes"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1485697648,"creation_date":1485645295,"answer_id":41915938,"question_id":41913097,"body_markdown":"No, you cannot use negative numbers as everything is computed modulo n.\r\n\r\nYes, you can use any array, as long as the value, when converted to a number, is a number smaller than n.\r\n\r\nFor this you can use `new BigInteger(1, plaintext)` which will always result in a positive number. The first parameter is the sign.\r\n\r\nYou may need an encoding for specific structures, e.g. with zero bit values for the most significant bits (message-&gt; encode-&gt; convert to number -&gt; Paillier encryption -&gt; encode ciphertext and decode ciphertext -&gt; Paillier decryption -&gt; decode -&gt; message).\r\n\r\nSee [I2OSP](https://www.rfc-editor.org/rfc/rfc3447#section-4.1) and OS2IP for an example on how to encode / decode data to numbers.","title":"Can pailler cryptosystem encrypt and decrypt negative big integers?","body":"<p>No, you cannot use negative numbers as everything is computed modulo n.</p>\n<p>Yes, you can use any array, as long as the value, when converted to a number, is a number smaller than n.</p>\n<p>For this you can use <code>new BigInteger(1, plaintext)</code> which will always result in a positive number. The first parameter is the sign.</p>\n<p>You may need an encoding for specific structures, e.g. with zero bit values for the most significant bits (message-&gt; encode-&gt; convert to number -&gt; Paillier encryption -&gt; encode ciphertext and decode ciphertext -&gt; Paillier decryption -&gt; decode -&gt; message).</p>\n<p>See <a href=\"https://www.rfc-editor.org/rfc/rfc3447#section-4.1\" rel=\"nofollow noreferrer\">I2OSP</a> and OS2IP for an example on how to encode / decode data to numbers.</p>\n"},{"tags":[],"owner":{"account_id":10145406,"reputation":1333,"user_id":7846405,"display_name":"sefiks"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701098131,"creation_date":1701098131,"answer_id":77557996,"question_id":41913097,"body_markdown":"Paillier cryptosystem is defined over modulo n for plaintexts and n^2 for ciphertexts. So, if you even encrypt a negative number, it is going to have a positive equivalent for modulo n. This can be proven in python as:\r\n\r\n```python\r\n# pip install lightphe\r\nfrom lightphe import LightPHE\r\n \r\n# build a cryptosystem\r\ncs = LightPHE(algorithm_name = &#39;Paillier&#39;)\r\nmodulo = cs.cs.plaintext_modulo\r\n \r\n# define plaintexts\r\nm1 = -10\r\n \r\n# calculate ciphertexts\r\nc1 = cs.encrypt(m1)\r\n \r\n# performing homomorphic addition on ciphertexts\r\nassert cs.decrypt(c1) == m1 % modulo\r\n```","title":"Can pailler cryptosystem encrypt and decrypt negative big integers?","body":"<p>Paillier cryptosystem is defined over modulo n for plaintexts and n^2 for ciphertexts. So, if you even encrypt a negative number, it is going to have a positive equivalent for modulo n. This can be proven in python as:</p>\n<pre class=\"lang-py prettyprint-override\"><code># pip install lightphe\nfrom lightphe import LightPHE\n \n# build a cryptosystem\ncs = LightPHE(algorithm_name = 'Paillier')\nmodulo = cs.cs.plaintext_modulo\n \n# define plaintexts\nm1 = -10\n \n# calculate ciphertexts\nc1 = cs.encrypt(m1)\n \n# performing homomorphic addition on ciphertexts\nassert cs.decrypt(c1) == m1 % modulo\n</code></pre>\n"}],"owner":{"account_id":9568676,"reputation":3,"user_id":7107076,"display_name":"LPepe"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":607,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":41915938,"answer_count":2,"score":0,"last_activity_date":1701098131,"creation_date":1485627121,"question_id":41913097,"body_markdown":"I use paillier cryptosystem to encrypt and decrypt random data which at first are in the form of byte arrays and then i transform them to big integers and if the byte array become a negative big integer the decrypted number and the input number are different (basically it doesn&#39;t work with negative big integers). Is there a way to make this work without checking the input if it will become positive or negative ?","title":"Can pailler cryptosystem encrypt and decrypt negative big integers?","body":"<p>I use paillier cryptosystem to encrypt and decrypt random data which at first are in the form of byte arrays and then i transform them to big integers and if the byte array become a negative big integer the decrypted number and the input number are different (basically it doesn't work with negative big integers). Is there a way to make this work without checking the input if it will become positive or negative ?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":1,"creation_date":1701060543,"post_id":77554546,"comment_id":136723760,"body_markdown":"Can you use [markdown](https://stackoverflow.com/editing-help) to better format the stack trace?","body":"Can you use <a href=\"https://stackoverflow.com/editing-help\">markdown</a> to better format the stack trace?"}],"owner":{"account_id":26552595,"reputation":1,"user_id":20181674,"display_name":"Marydas Johnson"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":14,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":0,"score":-1,"last_activity_date":1701097993,"creation_date":1701059958,"question_id":77554546,"body_markdown":"while converting maven to gradle getting exception error stack\r\n\r\n```JSON\r\nClass&quot;:&quot;o.j.w.Bootstrap&quot;,&quot;Level&quot;:&quot; \r\n\r\nINFO&quot;,&quot;Thread&quot;:&quot;main&quot;,&quot;Message&quot;:&quot;WELD-ENV-000028: Weld initialization s\r\n\r\nkipped - no bean archive found;&quot;,&quot;TimeTaken&quot;:&quot;&quot;}\r\n```\r\n\r\n```\r\nException in thread &quot;main&quot; java.lang.reflect.InvocationTargetException\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        \r\nCaused by: java.lang.RuntimeException: java`your text`.lang.IllegalStateException: Singleton not set for STATIC_INSTANCE =&gt; []\r\n        at io.undertow.servlet.core.DeploymentManagerImpl.deploy(DeploymentManagerImpl.java:257)\r\n        at com.ge.hc.cloud.app.query.Application.main(Application.java:55)\r\n        ... 8 more\r\nCaused by: java.lang.IllegalStateException: Singleton not set for STATIC_INSTANCE =&gt; []\r\n        at org.jboss.weld.bootstrap.api.helpers.RegistrySingletonProvider$RegistrySingleton.get(RegistrySingletonProvider.java:28)\r\n```\r\n \r\nI have tried with bean.xml also but still this error is getting","title":"WELD-ENV-000028: Weld initialization s kipped - no bean archive found;","body":"<p>while converting maven to gradle getting exception error stack</p>\n<pre><code>Class&quot;:&quot;o.j.w.Bootstrap&quot;,&quot;Level&quot;:&quot; \n\nINFO&quot;,&quot;Thread&quot;:&quot;main&quot;,&quot;Message&quot;:&quot;WELD-ENV-000028: Weld initialization s\n\nkipped - no bean archive found;&quot;,&quot;TimeTaken&quot;:&quot;&quot;}\n</code></pre>\n<pre><code>Exception in thread &quot;main&quot; java.lang.reflect.InvocationTargetException\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        \nCaused by: java.lang.RuntimeException: java`your text`.lang.IllegalStateException: Singleton not set for STATIC_INSTANCE =&gt; []\n        at io.undertow.servlet.core.DeploymentManagerImpl.deploy(DeploymentManagerImpl.java:257)\n        at com.ge.hc.cloud.app.query.Application.main(Application.java:55)\n        ... 8 more\nCaused by: java.lang.IllegalStateException: Singleton not set for STATIC_INSTANCE =&gt; []\n        at org.jboss.weld.bootstrap.api.helpers.RegistrySingletonProvider$RegistrySingleton.get(RegistrySingletonProvider.java:28)\n</code></pre>\n<p>I have tried with bean.xml also but still this error is getting</p>\n"},{"tags":["java","spring","spring-boot","microservices"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1701098316,"post_id":77557955,"comment_id":136729627,"body_markdown":"What do you mean rollback? Do you want to rollback the `repository.save` or the result of the `webclient.get` call? The latter isn&#39;t possible, the first should work out-of-the-box.","body":"What do you mean rollback? Do you want to rollback the <code>repository.save</code> or the result of the <code>webclient.get</code> call? The latter isn&#39;t possible, the first should work out-of-the-box."},{"owner":{"account_id":8909811,"reputation":2612,"user_id":6650475,"display_name":"Andrew S"},"score":1,"creation_date":1701098631,"post_id":77557955,"comment_id":136729711,"body_markdown":"@Transactional (and rollback on exception) is only for the current DB connection within the executing microservice, and does not cross HTTP requests.  Distributed transactions are really really hard to get right.  Search on distributed transactions, two phase commit, and eventual consistency.  [Here](https://www.baeldung.com/transactions-across-microservices) is a good jumping off point - it&#39;s a long fall.","body":"@Transactional (and rollback on exception) is only for the current DB connection within the executing microservice, and does not cross HTTP requests.  Distributed transactions are really really hard to get right.  Search on distributed transactions, two phase commit, and eventual consistency.  <a href=\"https://www.baeldung.com/transactions-across-microservices\" rel=\"nofollow noreferrer\">Here</a> is a good jumping off point - it&#39;s a long fall."},{"owner":{"account_id":15103376,"reputation":48,"user_id":10899753,"display_name":"anme98"},"score":0,"creation_date":1701099763,"post_id":77557955,"comment_id":136729999,"body_markdown":"@M.Deinum yes I need to rollback every db task. So the db task behind `webclient.get` should get rollbacked by its own @Transactional annotation and `repository.save` should get rollbacked on the unsuccessful HTTP response.","body":"@M.Deinum yes I need to rollback every db task. So the db task behind <code>webclient.get</code> should get rollbacked by its own @Transactional annotation and <code>repository.save</code> should get rollbacked on the unsuccessful HTTP response."},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1701157595,"post_id":77557955,"comment_id":136737235,"body_markdown":"As long as the transaction aspect sees the exception it will rollback.","body":"As long as the transaction aspect sees the exception it will rollback."}],"owner":{"account_id":15103376,"reputation":48,"user_id":10899753,"display_name":"anme98"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":1,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":0,"score":-1,"last_activity_date":1701097781,"creation_date":1701097781,"question_id":77557955,"body_markdown":"I use several spring boot microservices which also have to execute DB transactions across several services for more complex tasks. Is it possible with the @Transactional annotation to perform rollbacks on unsuccessful HTTP responses? If not, how can I proceed in such cases?\r\n\r\nSo far I have always used the @Transactional annotation to reset the changes in case of internal errors.\r\n\r\nI would think of something like this:\r\n\r\n\r\n```\r\n@Transactional(rollbackFor = Exception.class)\r\npublic Flux&lt;Entity&gt; updateComplexDBTask(Entity entity) throws Exception {\r\n    entity.setX(&quot;X&quot;);\r\n    repository.save(entity)\r\n    try {\r\n         return this.webClient.get()\r\n                .uri(builder.build().toUri())\r\n                .retrieve();\r\n    } catch (Exception e) {\r\n         throw new Exception(e);\r\n    }\r\n}\r\n```\r\n","title":"Can I use the @Transactional Annotation to rollback on unsuccessful http responses?","body":"<p>I use several spring boot microservices which also have to execute DB transactions across several services for more complex tasks. Is it possible with the @Transactional annotation to perform rollbacks on unsuccessful HTTP responses? If not, how can I proceed in such cases?</p>\n<p>So far I have always used the @Transactional annotation to reset the changes in case of internal errors.</p>\n<p>I would think of something like this:</p>\n<pre><code>@Transactional(rollbackFor = Exception.class)\npublic Flux&lt;Entity&gt; updateComplexDBTask(Entity entity) throws Exception {\n    entity.setX(&quot;X&quot;);\n    repository.save(entity)\n    try {\n         return this.webClient.get()\n                .uri(builder.build().toUri())\n                .retrieve();\n    } catch (Exception e) {\n         throw new Exception(e);\n    }\n}\n</code></pre>\n"},{"tags":["java","pdfbox"],"comments":[{"owner":{"account_id":350117,"reputation":8653,"user_id":685806,"accept_rate":44,"display_name":"Pino"},"score":2,"creation_date":1701098581,"post_id":77557951,"comment_id":136729697,"body_markdown":"Does this answer your question? [Replace or remove text from PDF with PDFbox in Java](https://stackoverflow.com/questions/63592078/replace-or-remove-text-from-pdf-with-pdfbox-in-java)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/63592078/replace-or-remove-text-from-pdf-with-pdfbox-in-java\">Replace or remove text from PDF with PDFbox in Java</a>"},{"owner":{"account_id":255529,"reputation":17950,"user_id":535646,"accept_rate":40,"display_name":"Tilman Hausherr"},"score":0,"creation_date":1701099894,"post_id":77557951,"comment_id":136730033,"body_markdown":"There is a RemoveAllText.java example in the source code download. However this removes all. You could look with PDFDebugger at the content stream to see if there is some easy way to identify what you want to remove. Or you&#39;ll have to use a commercial tool like compart docbridge mill.","body":"There is a RemoveAllText.java example in the source code download. However this removes all. You could look with PDFDebugger at the content stream to see if there is some easy way to identify what you want to remove. Or you&#39;ll have to use a commercial tool like compart docbridge mill."},{"owner":{"account_id":1916831,"reputation":91501,"user_id":1729265,"display_name":"mkl"},"score":0,"creation_date":1701118662,"post_id":77557951,"comment_id":136733345,"body_markdown":"What do you actually mean by removing text? In particular do you hope that the remaining text will reflow? Or do you expect it to remain where it is? Also you say &quot;text&quot; - have you made sure that that &quot;text&quot; is drawn using text drawing instructions? Or does it merely have the look of text and actually is drawn as vector or bitmap images?","body":"What do you actually mean by removing text? In particular do you hope that the remaining text will reflow? Or do you expect it to remain where it is? Also you say &quot;text&quot; - have you made sure that that &quot;text&quot; is drawn using text drawing instructions? Or does it merely have the look of text and actually is drawn as vector or bitmap images?"},{"owner":{"account_id":14961660,"reputation":1403,"user_id":10801227,"display_name":"John"},"score":0,"creation_date":1701170843,"post_id":77557951,"comment_id":136739574,"body_markdown":"@mkl Yes, it is a text data. I have seen it in the PDFDebugger (Operations Tj and Td). I want to remove the part of the text, and the text that was left must stay in the same place.","body":"@mkl Yes, it is a text data. I have seen it in the PDFDebugger (Operations Tj and Td). I want to remove the part of the text, and the text that was left must stay in the same place."},{"owner":{"account_id":1916831,"reputation":91501,"user_id":1729265,"display_name":"mkl"},"score":0,"creation_date":1701180468,"post_id":77557951,"comment_id":136741342,"body_markdown":"Have you tried the answer @Pino has linked?","body":"Have you tried the answer @Pino has linked?"}],"owner":{"account_id":14961660,"reputation":1403,"user_id":10801227,"display_name":"John"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":2,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1701097757,"creation_date":1701097757,"question_id":77557951,"body_markdown":"I have some PDF files and I have to remove a part of the text, but I can&#39;t find out how can I do this. A ```PDPageContentStream``` does not have any ```get``` or ```remove``` methods. Can anyone give me advice or any ideas? \r\nI must use the ```PDFBOX``` library.","title":"Remove text from a PDF document","body":"<p>I have some PDF files and I have to remove a part of the text, but I can't find out how can I do this. A <code>PDPageContentStream</code> does not have any <code>get</code> or <code>remove</code> methods. Can anyone give me advice or any ideas?\nI must use the <code>PDFBOX</code> library.</p>\n"},{"tags":["java","database","jpa","web","persistence"],"comments":[{"owner":{"account_id":124855,"reputation":19802,"user_id":320220,"accept_rate":85,"display_name":"beerbajay"},"score":4,"creation_date":1338154822,"post_id":10777394,"comment_id":14015260,"body_markdown":"Is the database running on localhost on that server?","body":"Is the database running on localhost on that server?"},{"owner":{"account_id":361403,"reputation":135,"user_id":703980,"display_name":"Kenny Roberts"},"score":0,"creation_date":1338188618,"post_id":10777394,"comment_id":14020190,"body_markdown":"I&#39;m not sure so probably not. What can I do about it?","body":"I&#39;m not sure so probably not. What can I do about it?"},{"owner":{"account_id":124855,"reputation":19802,"user_id":320220,"accept_rate":85,"display_name":"beerbajay"},"score":1,"creation_date":1338190004,"post_id":10777394,"comment_id":14020541,"body_markdown":"Contact the system administrator and have them start it. Or start it yourself if there is no system administrator.","body":"Contact the system administrator and have them start it. Or start it yourself if there is no system administrator."},{"owner":{"account_id":2209650,"reputation":2966,"user_id":1951909,"accept_rate":80,"display_name":"SSC"},"score":0,"creation_date":1412378384,"post_id":10777394,"comment_id":41063161,"body_markdown":"Have a look http://docs.oracle.com/javaee/6/tutorial/doc/bnadi.html","body":"Have a look <a href=\"http://docs.oracle.com/javaee/6/tutorial/doc/bnadi.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javaee/6/tutorial/doc/bnadi.html</a>"}],"answers":[{"tags":[],"owner":{"account_id":308452,"reputation":29915,"user_id":620338,"accept_rate":85,"display_name":"Matt Handy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1338231566,"creation_date":1338231566,"answer_id":10789285,"question_id":10777394,"body_markdown":"Glassfish comes with Java DB bundled. That&#39;s why it works on your local machine. Your deployment server either has a different database server configuration (check your persistence.xml) or no database server running at that port.","title":"Java web project + JPA/JDBC &quot;Error connecting to server localhost on port 1527 with message Connection refused&quot;","body":"<p>Glassfish comes with Java DB bundled. That's why it works on your local machine. Your deployment server either has a different database server configuration (check your persistence.xml) or no database server running at that port.</p>\n"}],"owner":{"account_id":361403,"reputation":135,"user_id":703980,"display_name":"Kenny Roberts"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":8912,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1701097465,"creation_date":1338153880,"question_id":10777394,"body_markdown":"I have this old web project which is called &quot;Drinks Archive&quot;. You can, among other things, add, remove, list and edit drinks. It runs fine locally from NetBeans but when I deploy my project as a .war file to a server, which uses Tomcat 6, it gives the following error every time I try to do a database operation (e.g. add drink to db):\r\n\r\n&gt; javax.persistence.PersistenceException: Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.3.0.v20110604-r9504): org.eclipse.persistence.exceptions.DatabaseException\r\nInternal Exception: java.sql.SQLNonTransientConnectionException: java.net.ConnectException : Error connecting to server localhost on port 1527 with message Connection refused.\r\nError Code: 40000\r\n\torg.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.deploy(EntityManagerSetupImpl.java:501)\r\n\torg.eclipse.persistence.internal.jpa.EntityManagerFactoryDelegate.getDatabaseSession(EntityManagerFactoryDelegate.java:188)\r\n\torg.eclipse.persistence.internal.jpa.EntityManagerFactoryDelegate.createEntityManagerImpl(EntityManagerFactoryDelegate.java:277)\r\n\torg.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.createEntityManagerImpl(EntityManagerFactoryImpl.java:290)\r\n\torg.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.createEntityManager(EntityManagerFactoryImpl.java:268)\r\n\tarchive.Register.getEntityManager(Register.java:53)\r\n\tarchive.Register.getDrinks(Register.java:170)\r\n\tservlets.ListServlet.doGet(ListServlet.java:67)\r\n\tjavax.servlet.http.HttpServlet.service(HttpServlet.java:617)\r\n\tjavax.servlet.http.HttpServlet.service(HttpServlet.java:717)\r\n\r\nHere&#39;s my source code, (in NetBeans I use GlassFish as a server).\r\n\r\nRegister.java:\r\n\r\n    public class Register {\r\n    \r\n    private static Register instance;\r\n    private EntityManager em;\r\n    \r\n    private EntityManagerFactory emf = null;\r\n\r\n    public static Register getInstance() {\r\n        if (instance == null) {\r\n            instance = new Rekisteri();\r\n        }\r\n        \r\n        return instance;\r\n    }\r\n    \r\n    private Register() {\r\n        try {\r\n            Class.forName(&quot;org.apache.derby.jdbc.ClientDriver&quot;);\r\n        } catch (ClassNotFoundException ex) {\r\n            Logger.getLogger(Rekisteri.class.getName()).log(Level.SEVERE, null, ex);\r\n        }\r\n        emf = Persistence.createEntityManagerFactory(&quot;DrinksArchivePU&quot;);\r\n    }\r\n    \r\n    public EntityManager getEntityManager() {\r\n        return emf.createEntityManager();\r\n    }\r\n    \r\n    public void addDrink(Drink new) {\r\n        em = getEntityManager();\r\n        em.getTransaction().begin();\r\n        em.merge(new);\r\n        em.getTransaction().commit();     \r\n    }\r\n\r\n    etc...//\r\n    }\r\n\r\npersistence.xml:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;persistence version=&quot;2.0&quot; xmlns=&quot;http://java.sun.com/xml/ns/persistence&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd&quot;&gt;\r\n    &lt;persistence-unit name=&quot;DrinksArchivePU&quot; transaction-type=&quot;RESOURCE_LOCAL&quot;&gt;\r\n        &lt;provider&gt;org.eclipse.persistence.jpa.PersistenceProvider&lt;/provider&gt;\r\n        &lt;exclude-unlisted-classes&gt;false&lt;/exclude-unlisted-classes&gt;\r\n        &lt;properties&gt;\r\n            &lt;property name=&quot;eclipselink.jdbc.driver&quot; value=&quot;org.apache.derby.jdbc.ClientDriver&quot;/&gt;\r\n            &lt;property name=&quot;eclipselink.jdbc.user&quot; value=&quot;d&quot;/&gt; \r\n            &lt;property name=&quot;eclipselink.jdbc.password&quot; value=&quot;d&quot;/&gt; \r\n            &lt;property name=&quot;eclipselink.jdbc.url&quot; value=&quot;jdbc:derby://localhost:1527/drinks;create=true&quot;/&gt;\r\n            &lt;property name=&quot;eclipselink.ddl-generation&quot; value=&quot;drop-and-create-tables&quot;/&gt;\r\n            &lt;property name=&quot;eclipselink.ddl-generation.output-mode&quot; value=&quot;database&quot;/&gt;\r\n            &lt;property name=&quot;eclipselink.weaving&quot; value=&quot;false&quot;/&gt;\r\n            &lt;property name=&quot;eclipselink.logging.level&quot; value=&quot;FINE&quot;/&gt;\r\n        &lt;/properties&gt;\r\n    &lt;/persistence-unit&gt;\r\n&lt;/persistence&gt;\r\n\r\nI read that the problem could be because of derby network server not starting on my server but if that&#39;s so, how to fix it?\r\n\r\n**EDIT:** Fixed, I changed to HSQLDB JDBC Driver in my persistence.xml settings and after that it was all about adding different missing jar-files to my project in the server.\r\n\r\nHere&#39;s persistence.xml now:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;persistence version=&quot;2.0&quot; xmlns=&quot;http://java.sun.com/xml/ns/persistence&quot;  xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;  xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/persistence  http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd&quot;&gt;\r\n    &lt;persistence-unit name=&quot;DrinksAchivePU&quot; transaction-type=&quot;RESOURCE_LOCAL&quot;&gt;\r\n        \r\n        &lt;provider&gt;org.hibernate.ejb.HibernatePersistence&lt;/provider&gt;\r\n        \r\n        &lt;class&gt;archive.Ingredient&lt;/class&gt;\r\n        &lt;class&gt;archive.Review&lt;/class&gt;\r\n        &lt;class&gt;archive.Drink&lt;/class&gt;\r\n        &lt;class&gt;archive.DrinkCategory&lt;/class&gt;\r\n        &lt;class&gt;archive.User&lt;/class&gt;\r\n        &lt;class&gt;archive.Register&lt;/class&gt;\r\n    \r\n        &lt;properties&gt;\r\n            &lt;property name=&quot;javax.persistence.jdbc.driver&quot; value=&quot;org.hsqldb.jdbcDriver&quot;/&gt;\r\n            &lt;property name=&quot;javax.persistence.jdbc.url&quot; value=&quot;jdbc:hsqldb:mem:testdb;default_schema=true&quot;/&gt;\r\n            &lt;property name=&quot;javax.persistence.jdbc.user&quot; value=&quot;sa&quot;/&gt;\r\n            &lt;property name=&quot;javax.persistence.jdbc.password&quot; value=&quot;&quot;/&gt;\r\n            &lt;property name=&quot;hibernate.dialect&quot; value=&quot;org.hibernate.dialect.HSQLDialect&quot;/&gt;\r\n            &lt;property name=&quot;hibernate.hbm2ddl.auto&quot; value=&quot;update&quot;/&gt;\r\n        &lt;/properties&gt;\r\n    &lt;/persistence-unit&gt;\r\n&lt;/persistence&gt;\r\n","title":"Java web project + JPA/JDBC &quot;Error connecting to server localhost on port 1527 with message Connection refused&quot;","body":"<p>I have this old web project which is called \"Drinks Archive\". You can, among other things, add, remove, list and edit drinks. It runs fine locally from NetBeans but when I deploy my project as a .war file to a server, which uses Tomcat 6, it gives the following error every time I try to do a database operation (e.g. add drink to db):</p>\n\n<blockquote>\n  <p>javax.persistence.PersistenceException: Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.3.0.v20110604-r9504): org.eclipse.persistence.exceptions.DatabaseException\n  Internal Exception: java.sql.SQLNonTransientConnectionException: java.net.ConnectException : Error connecting to server localhost on port 1527 with message Connection refused.\n  Error Code: 40000\n      org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.deploy(EntityManagerSetupImpl.java:501)\n      org.eclipse.persistence.internal.jpa.EntityManagerFactoryDelegate.getDatabaseSession(EntityManagerFactoryDelegate.java:188)\n      org.eclipse.persistence.internal.jpa.EntityManagerFactoryDelegate.createEntityManagerImpl(EntityManagerFactoryDelegate.java:277)\n      org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.createEntityManagerImpl(EntityManagerFactoryImpl.java:290)\n      org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.createEntityManager(EntityManagerFactoryImpl.java:268)\n      archive.Register.getEntityManager(Register.java:53)\n      archive.Register.getDrinks(Register.java:170)\n      servlets.ListServlet.doGet(ListServlet.java:67)\n      javax.servlet.http.HttpServlet.service(HttpServlet.java:617)\n      javax.servlet.http.HttpServlet.service(HttpServlet.java:717)</p>\n</blockquote>\n\n<p>Here's my source code, (in NetBeans I use GlassFish as a server).</p>\n\n<p>Register.java:</p>\n\n<pre><code>public class Register {\n\nprivate static Register instance;\nprivate EntityManager em;\n\nprivate EntityManagerFactory emf = null;\n\npublic static Register getInstance() {\n    if (instance == null) {\n        instance = new Rekisteri();\n    }\n\n    return instance;\n}\n\nprivate Register() {\n    try {\n        Class.forName(\"org.apache.derby.jdbc.ClientDriver\");\n    } catch (ClassNotFoundException ex) {\n        Logger.getLogger(Rekisteri.class.getName()).log(Level.SEVERE, null, ex);\n    }\n    emf = Persistence.createEntityManagerFactory(\"DrinksArchivePU\");\n}\n\npublic EntityManager getEntityManager() {\n    return emf.createEntityManager();\n}\n\npublic void addDrink(Drink new) {\n    em = getEntityManager();\n    em.getTransaction().begin();\n    em.merge(new);\n    em.getTransaction().commit();     \n}\n\netc...//\n}\n</code></pre>\n\n<p>persistence.xml:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;persistence version=\"2.0\" xmlns=\"http://java.sun.com/xml/ns/persistence\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd\"&gt;\n&lt;persistence-unit name=\"DrinksArchivePU\" transaction-type=\"RESOURCE_LOCAL\"&gt;\n    &lt;provider&gt;org.eclipse.persistence.jpa.PersistenceProvider&lt;/provider&gt;\n    &lt;exclude-unlisted-classes&gt;false&lt;/exclude-unlisted-classes&gt;\n    &lt;properties&gt;\n        &lt;property name=\"eclipselink.jdbc.driver\" value=\"org.apache.derby.jdbc.ClientDriver\"/&gt;\n        &lt;property name=\"eclipselink.jdbc.user\" value=\"d\"/&gt; \n        &lt;property name=\"eclipselink.jdbc.password\" value=\"d\"/&gt; \n        &lt;property name=\"eclipselink.jdbc.url\" value=\"jdbc:derby://localhost:1527/drinks;create=true\"/&gt;\n        &lt;property name=\"eclipselink.ddl-generation\" value=\"drop-and-create-tables\"/&gt;\n        &lt;property name=\"eclipselink.ddl-generation.output-mode\" value=\"database\"/&gt;\n        &lt;property name=\"eclipselink.weaving\" value=\"false\"/&gt;\n        &lt;property name=\"eclipselink.logging.level\" value=\"FINE\"/&gt;\n    &lt;/properties&gt;\n&lt;/persistence-unit&gt;\n</code></pre>\n\n<p></p>\n\n<p>I read that the problem could be because of derby network server not starting on my server but if that's so, how to fix it?</p>\n\n<p><strong>EDIT:</strong> Fixed, I changed to HSQLDB JDBC Driver in my persistence.xml settings and after that it was all about adding different missing jar-files to my project in the server.</p>\n\n<p>Here's persistence.xml now:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;persistence version=\"2.0\" xmlns=\"http://java.sun.com/xml/ns/persistence\"  xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"  xsi:schemaLocation=\"http://java.sun.com/xml/ns/persistence  http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd\"&gt;\n&lt;persistence-unit name=\"DrinksAchivePU\" transaction-type=\"RESOURCE_LOCAL\"&gt;\n\n    &lt;provider&gt;org.hibernate.ejb.HibernatePersistence&lt;/provider&gt;\n\n    &lt;class&gt;archive.Ingredient&lt;/class&gt;\n    &lt;class&gt;archive.Review&lt;/class&gt;\n    &lt;class&gt;archive.Drink&lt;/class&gt;\n    &lt;class&gt;archive.DrinkCategory&lt;/class&gt;\n    &lt;class&gt;archive.User&lt;/class&gt;\n    &lt;class&gt;archive.Register&lt;/class&gt;\n\n    &lt;properties&gt;\n        &lt;property name=\"javax.persistence.jdbc.driver\" value=\"org.hsqldb.jdbcDriver\"/&gt;\n        &lt;property name=\"javax.persistence.jdbc.url\" value=\"jdbc:hsqldb:mem:testdb;default_schema=true\"/&gt;\n        &lt;property name=\"javax.persistence.jdbc.user\" value=\"sa\"/&gt;\n        &lt;property name=\"javax.persistence.jdbc.password\" value=\"\"/&gt;\n        &lt;property name=\"hibernate.dialect\" value=\"org.hibernate.dialect.HSQLDialect\"/&gt;\n        &lt;property name=\"hibernate.hbm2ddl.auto\" value=\"update\"/&gt;\n    &lt;/properties&gt;\n&lt;/persistence-unit&gt;\n</code></pre>\n\n<p></p>\n"},{"tags":["java","unit-testing","mockito","completable-future","powermockito"],"comments":[{"owner":{"account_id":4528798,"reputation":10533,"user_id":3679900,"accept_rate":48,"display_name":"y2k-shubham"},"score":0,"creation_date":1701160951,"post_id":77557045,"comment_id":136737832,"body_markdown":"One suggestion i got was to instead use `ExecutorService` for parallelization so that we can leverage [`MoreExecutors.newDirectExecutorService()`](https://guava.dev/releases/19.0/api/docs/com/google/common/util/concurrent/MoreExecutors.html#newDirectExecutorService()) for unit-tests (which will then run sequentially). While it certainly works, I don&#39;t want to do it because then effectively we run async computation in production while our unit-tests use synchronous computation, so such tests won&#39;t be very confident-inspiring.","body":"One suggestion i got was to instead use <code>ExecutorService</code> for parallelization so that we can leverage <a href=\"https://guava.dev/releases/19.0/api/docs/com/google/common/util/concurrent/MoreExecutors.html#newDirectExecutorService()\" rel=\"nofollow noreferrer\"><code>MoreExecutors.newDirectExecutorService()</code></a> for unit-tests (which will then run sequentially). While it certainly works, I don&#39;t want to do it because then effectively we run async computation in production while our unit-tests use synchronous computation, so such tests won&#39;t be very confident-inspiring."},{"owner":{"account_id":4528798,"reputation":10533,"user_id":3679900,"accept_rate":48,"display_name":"y2k-shubham"},"score":0,"creation_date":1701161050,"post_id":77557045,"comment_id":136737853,"body_markdown":"I also had a similar idea to try to somehow override the behaviour of `CompletableFuture.runAsync(..)` for tests so as to effectively make the underlying computation synchronous","body":"I also had a similar idea to try to somehow override the behaviour of <code>CompletableFuture.runAsync(..)</code> for tests so as to effectively make the underlying computation synchronous"},{"owner":{"account_id":3211603,"reputation":289287,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1701193483,"post_id":77557045,"comment_id":136744108,"body_markdown":"When you use `CompletableFuture.runAsync(…)` without specifying an executor, the [default Fork/Join pool](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/ForkJoinPool.html#commonPool()) will be used. In that case, your unit test can use [`ForkJoinPool.commonPool().awaitQuiescence(your own timeout)`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/ForkJoinPool.html#awaitQuiescence(long,java.util.concurrent.TimeUnit)) to wait for all asynchronous jobs to complete, before checking whether the expected methods have been invoked.","body":"When you use <code>CompletableFuture.runAsync(…)</code> without specifying an executor, the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/ForkJoinPool.html#commonPool()\" rel=\"nofollow noreferrer\">default Fork/Join pool</a> will be used. In that case, your unit test can use <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/ForkJoinPool.html#awaitQuiescence(long,java.util.concurrent.TimeUnit)\" rel=\"nofollow noreferrer\"><code>ForkJoinPool.commonPool().awaitQuiescence(your own timeout)</code></a> to wait for all asynchronous jobs to complete, before checking whether the expected methods have been invoked."}],"answers":[{"tags":[],"owner":{"account_id":4528798,"reputation":10533,"user_id":3679900,"accept_rate":48,"display_name":"y2k-shubham"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701097330,"creation_date":1701095834,"answer_id":77557713,"question_id":77557045,"body_markdown":"I *think* I might&#39;ve found a fix by using *a non-static method call being made after my static method call* as a &#39;proxy&#39; for hinting that our static method call must&#39;ve also happened\r\n\r\nI was logging an error metric in case my static method call fails as follows\r\n\r\n```\r\nimport java.util.concurrent.CompletableFuture;\r\n\r\nCompletableFuture.runAsync(() -&gt; {\r\n    try {\r\n        MyExternalServiceAccessor.myMethod(param1, param2);\r\n    } catch (final Exception e) {\r\n        // here metricLogger is injected into MyClass from outside so can be mocked for tests\r\n        metricLogger.logCounter(&quot;MyExternalServiceAccessor.myMethod:failure&quot;, 1);\r\n    }\r\n});\r\n```\r\n\r\nNow in above code\r\n - `metricLogger.logCounter(..)` call is a non-static call for which we can leverage mockito&#39;s [verification with timeout][1]\r\n - and since it occurs *after* our static `MyExternalServiceAccessor.myMethod(..)` call so we can be sure that if `logCounter` call has happened then `myMethod` call must&#39;ve also happened\r\n   - *although above statement is true only when we are unit-testing an error scenario where `myMethod` throws an exception*\r\n\r\nTherefore for an error scenario we write our test like this for waiting 100ms  before validating that expected methods invoked\r\n\r\n```\r\nverify(mockMetricLogger, timeout(100).times(1)).logCounter(eq(&quot;MyExternalServiceAccessor.myMethod:failure&quot;), eq(1));\r\nverifyStatic();\r\nMyExternalService.myMethod(eq(arg1), eq(arg2));\r\n```\r\n\r\nAnd for non-error scenario we can use the trick suggested in [this thread][2] to wait-and-verify that our mock was called &#39;zero&#39; times, i.e., not called even after waiting\r\n\r\n```\r\nverify(mockMetricLogger, timeout(100).times(0)).logCounter(eq(&quot;MyExternalServiceAccessor.myMethod:failure&quot;), eq(1));\r\nverifyStatic();\r\nMyExternalService.myMethod(eq(arg1), eq(arg2));\r\n```\r\n\r\nSo far my tests have been passing, but since (a) they were not too flaky to begin with and (b) we&#39;re dealing with notorious async issues that can show up intermittently, I&#39;m not certain if for non-error scenarios the flakiness has been completely eliminated or not.\r\n\r\n*(I can of course completely do away with the flakiness for example by also publishing a counter metric in success scenario and using that as a proxy, but don&#39;t want to do that just yet)*\r\n\r\n##### UPDATE-1\r\n\r\nI also had to test out the scenario where this entire block of async code is never called (due to upstream conditional expressions preventing flow from reaching up till this point where async block is triggered)\r\n\r\nFor that I leveraged `Mockito.never()` as suggested in [this thread][3]\r\n\r\n```\r\nverify(mockMetricLogger, timeout(100).times(0)).logCounter(eq(&quot;MyExternalServiceAccessor.myMethod:failure&quot;), eq(1));\r\nverifyStatic(never());\r\nMyExternalService.myMethod(eq(arg1), eq(arg2));\r\n```\r\n\r\n\r\n  [1]: https://javadoc.io/static/org.mockito/mockito-core/5.7.0/org/mockito/Mockito.html#22\r\n  [2]: https://stackoverflow.com/a/64460897/3679900\r\n  [3]: https://stackoverflow.com/q/50255565/3679900","title":"PowerMockito verifyStatic: validating async call to static method","body":"<p>I <em>think</em> I might've found a fix by using <em>a non-static method call being made after my static method call</em> as a 'proxy' for hinting that our static method call must've also happened</p>\n<p>I was logging an error metric in case my static method call fails as follows</p>\n<pre><code>import java.util.concurrent.CompletableFuture;\n\nCompletableFuture.runAsync(() -&gt; {\n    try {\n        MyExternalServiceAccessor.myMethod(param1, param2);\n    } catch (final Exception e) {\n        // here metricLogger is injected into MyClass from outside so can be mocked for tests\n        metricLogger.logCounter(&quot;MyExternalServiceAccessor.myMethod:failure&quot;, 1);\n    }\n});\n</code></pre>\n<p>Now in above code</p>\n<ul>\n<li><code>metricLogger.logCounter(..)</code> call is a non-static call for which we can leverage mockito's <a href=\"https://javadoc.io/static/org.mockito/mockito-core/5.7.0/org/mockito/Mockito.html#22\" rel=\"nofollow noreferrer\">verification with timeout</a></li>\n<li>and since it occurs <em>after</em> our static <code>MyExternalServiceAccessor.myMethod(..)</code> call so we can be sure that if <code>logCounter</code> call has happened then <code>myMethod</code> call must've also happened\n<ul>\n<li><em>although above statement is true only when we are unit-testing an error scenario where <code>myMethod</code> throws an exception</em></li>\n</ul>\n</li>\n</ul>\n<p>Therefore for an error scenario we write our test like this for waiting 100ms  before validating that expected methods invoked</p>\n<pre><code>verify(mockMetricLogger, timeout(100).times(1)).logCounter(eq(&quot;MyExternalServiceAccessor.myMethod:failure&quot;), eq(1));\nverifyStatic();\nMyExternalService.myMethod(eq(arg1), eq(arg2));\n</code></pre>\n<p>And for non-error scenario we can use the trick suggested in <a href=\"https://stackoverflow.com/a/64460897/3679900\">this thread</a> to wait-and-verify that our mock was called 'zero' times, i.e., not called even after waiting</p>\n<pre><code>verify(mockMetricLogger, timeout(100).times(0)).logCounter(eq(&quot;MyExternalServiceAccessor.myMethod:failure&quot;), eq(1));\nverifyStatic();\nMyExternalService.myMethod(eq(arg1), eq(arg2));\n</code></pre>\n<p>So far my tests have been passing, but since (a) they were not too flaky to begin with and (b) we're dealing with notorious async issues that can show up intermittently, I'm not certain if for non-error scenarios the flakiness has been completely eliminated or not.</p>\n<p><em>(I can of course completely do away with the flakiness for example by also publishing a counter metric in success scenario and using that as a proxy, but don't want to do that just yet)</em></p>\n<h5>UPDATE-1</h5>\n<p>I also had to test out the scenario where this entire block of async code is never called (due to upstream conditional expressions preventing flow from reaching up till this point where async block is triggered)</p>\n<p>For that I leveraged <code>Mockito.never()</code> as suggested in <a href=\"https://stackoverflow.com/q/50255565/3679900\">this thread</a></p>\n<pre><code>verify(mockMetricLogger, timeout(100).times(0)).logCounter(eq(&quot;MyExternalServiceAccessor.myMethod:failure&quot;), eq(1));\nverifyStatic(never());\nMyExternalService.myMethod(eq(arg1), eq(arg2));\n</code></pre>\n"}],"owner":{"account_id":4528798,"reputation":10533,"user_id":3679900,"accept_rate":48,"display_name":"y2k-shubham"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1701097330,"creation_date":1701089518,"question_id":77557045,"body_markdown":"I&#39;m making call to an external system via a `static` method\r\n\r\n```\r\nMyExternalServiceAccessor.myMethod(param1, param2);\r\n```\r\n\r\nAnd so far I&#39;ve been [unit-testing above using `PowerMockito`&#39;s `verifyStatic`][1] as follows\r\n\r\n```\r\nimport static org.mockito.Matchers.eq;\r\nimport static org.powermock.api.mockito.PowerMockito.mockStatic;\r\nimport static org.powermock.api.mockito.PowerMockito.verifyStatic;\r\n..\r\n\r\nmockStatic(MyExternalServiceAccessor.class);\r\n\r\n..\r\n\r\nverifyStatic();\r\nMyExternalService.myMethod(eq(arg1), eq(arg2));\r\n```\r\n\r\n---\r\n\r\nI now want to make above call &#39;async&#39; (*best-effort* call with *fire-and-forget* semantics, I don&#39;t care for the response); so taking reference from [here][2] I wrapped it inside `CompletableFuture.runAsync(..)` as follows\r\n\r\n```\r\nimport java.util.concurrent.CompletableFuture;\r\n\r\nCompletableFuture.runAsync(() -&gt; {\r\n    MyExternalServiceAccessor.myMethod(param1, param2);\r\n});\r\n```\r\n\r\nBut with this change as expected the unit-test has become flaky because due to the async invocation of `MyExternalServiceAccessor.myMethod(..)`, sometimes validation fails with following error\r\n\r\n```\r\njava.lang.RuntimeException: Wanted but not invoked com.company.team.service.serviceutils.MyClass.myFunctionBeingUnitTested(\r\n    null,\r\n    null\r\n);\r\nActually, there were zero interactions with this mock.\r\n```\r\n\r\n----\r\n\r\n - I&#39;m aware that `Mockito` supports [*verification with timeout*][3] for *non-`static`* methods; is there a `PowerMockito` (or `Mockito`) equivalent of the same for `static` methods?\r\n - If not then what are the alternatives? Can I cleverly rewrite my code and tests in a way to keep it async while still having unit-tests pass everytime?\r\n\r\n\r\n  [1]: https://import%20static%20org.powermock.api.mockito.PowerMockito.mockStatic;%20import%20static%20org.powermock.api.mockito.PowerMockito.verifyStatic;\r\n  [2]: https://sumantmishra.medium.com/java-asynchronous-process-using-completablefuture-755f08d98106\r\n  [3]: https://javadoc.io/static/org.mockito/mockito-core/5.7.0/org/mockito/Mockito.html#22","title":"PowerMockito verifyStatic: validating async call to static method","body":"<p>I'm making call to an external system via a <code>static</code> method</p>\n<pre><code>MyExternalServiceAccessor.myMethod(param1, param2);\n</code></pre>\n<p>And so far I've been <a href=\"https://import%20static%20org.powermock.api.mockito.PowerMockito.mockStatic;%20import%20static%20org.powermock.api.mockito.PowerMockito.verifyStatic;\" rel=\"nofollow noreferrer\">unit-testing above using <code>PowerMockito</code>'s <code>verifyStatic</code></a> as follows</p>\n<pre><code>import static org.mockito.Matchers.eq;\nimport static org.powermock.api.mockito.PowerMockito.mockStatic;\nimport static org.powermock.api.mockito.PowerMockito.verifyStatic;\n..\n\nmockStatic(MyExternalServiceAccessor.class);\n\n..\n\nverifyStatic();\nMyExternalService.myMethod(eq(arg1), eq(arg2));\n</code></pre>\n<hr />\n<p>I now want to make above call 'async' (<em>best-effort</em> call with <em>fire-and-forget</em> semantics, I don't care for the response); so taking reference from <a href=\"https://sumantmishra.medium.com/java-asynchronous-process-using-completablefuture-755f08d98106\" rel=\"nofollow noreferrer\">here</a> I wrapped it inside <code>CompletableFuture.runAsync(..)</code> as follows</p>\n<pre><code>import java.util.concurrent.CompletableFuture;\n\nCompletableFuture.runAsync(() -&gt; {\n    MyExternalServiceAccessor.myMethod(param1, param2);\n});\n</code></pre>\n<p>But with this change as expected the unit-test has become flaky because due to the async invocation of <code>MyExternalServiceAccessor.myMethod(..)</code>, sometimes validation fails with following error</p>\n<pre><code>java.lang.RuntimeException: Wanted but not invoked com.company.team.service.serviceutils.MyClass.myFunctionBeingUnitTested(\n    null,\n    null\n);\nActually, there were zero interactions with this mock.\n</code></pre>\n<hr />\n<ul>\n<li>I'm aware that <code>Mockito</code> supports <a href=\"https://javadoc.io/static/org.mockito/mockito-core/5.7.0/org/mockito/Mockito.html#22\" rel=\"nofollow noreferrer\"><em>verification with timeout</em></a> for <em>non-<code>static</code></em> methods; is there a <code>PowerMockito</code> (or <code>Mockito</code>) equivalent of the same for <code>static</code> methods?</li>\n<li>If not then what are the alternatives? Can I cleverly rewrite my code and tests in a way to keep it async while still having unit-tests pass everytime?</li>\n</ul>\n"},{"tags":["java","spring","spring-boot","spring-mvc"],"owner":{"account_id":30004893,"reputation":1,"user_id":22994045,"display_name":"freebyte"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1701096878,"creation_date":1701096849,"question_id":77557834,"body_markdown":"I have a little problem I can&#39;t work around. The idea is to have some generic controllers (and services) like this:\r\n\r\n**GenericPagingController** class that has a method like this: &lt;br&gt;\r\n`public ResponseEntity&lt;Page&lt;T1&gt;&gt; GetEntityPagedList(int page)`\r\n\r\n**GenericListController** class that has a method: &lt;br&gt;\r\n`public ResponseEntity&lt;List&lt;T1&gt;&gt; GetEntityList(int page)`\r\n\r\nand a **GenericCrudController** with methods like this: &lt;br&gt;\r\n`@PostMapping(&quot;&quot;) public ResponseEntity&lt;T1&gt; AddEntity(@RequestBody T3 entityDto)` &lt;br&gt;\r\n`@PutMapping(&quot;/{id}&quot;) public ResponseEntity&lt;T1&gt; UpdateEntity(@PathVariable ID id, @RequestBody T3 entityDto)` &lt;br&gt;\r\n`@DeleteMapping(&quot;/{id}&quot;) public ResponseEntity&lt;String&gt; DeleteEntity(@PathVariable ID id)` &lt;br&gt;\r\n\r\nAnd I want to have a base controller that uses those generic blocks something like this:\r\n\r\n```\r\n@RestController\r\n@RequestMapping(&quot;testing&quot;)\r\npublic class TestingController {\r\n    private GenericPagingController&lt;Test, TestRepository, Long&gt; genericPagingController;\r\n    private GenericCrudController&lt;Test, TestRepository, Long, TestRequestDTO&gt; genericCrudController;\r\n    public TestingController(TestRepository repository) {\r\n        genericPagingService = new GenericPagingService&lt;&gt;(repository);\r\n        genericCrudController = new GenericCrudController&lt;&gt;(repository);\r\n    }\r\n}\r\n```\r\n\r\nIs there a way to achieve this? I don&#39;t want to use interfaces, because I have a plenty of pretty much identical controllers and I think using some composition stuff can work\r\n\r\n\r\nI originally tried to extend multiple generic classes, but obviously Java can&#39;t do that.\r\nI also tried to come up with something with interfaces, but I don&#39;t think it can work well in this case","title":"Spring Rest Controller, but with composition","body":"<p>I have a little problem I can't work around. The idea is to have some generic controllers (and services) like this:</p>\n<p><strong>GenericPagingController</strong> class that has a method like this: <br>\n<code>public ResponseEntity&lt;Page&lt;T1&gt;&gt; GetEntityPagedList(int page)</code></p>\n<p><strong>GenericListController</strong> class that has a method: <br>\n<code>public ResponseEntity&lt;List&lt;T1&gt;&gt; GetEntityList(int page)</code></p>\n<p>and a <strong>GenericCrudController</strong> with methods like this: <br>\n<code>@PostMapping(&quot;&quot;) public ResponseEntity&lt;T1&gt; AddEntity(@RequestBody T3 entityDto)</code> <br>\n<code>@PutMapping(&quot;/{id}&quot;) public ResponseEntity&lt;T1&gt; UpdateEntity(@PathVariable ID id, @RequestBody T3 entityDto)</code> <br>\n<code>@DeleteMapping(&quot;/{id}&quot;) public ResponseEntity&lt;String&gt; DeleteEntity(@PathVariable ID id)</code> <br></p>\n<p>And I want to have a base controller that uses those generic blocks something like this:</p>\n<pre><code>@RestController\n@RequestMapping(&quot;testing&quot;)\npublic class TestingController {\n    private GenericPagingController&lt;Test, TestRepository, Long&gt; genericPagingController;\n    private GenericCrudController&lt;Test, TestRepository, Long, TestRequestDTO&gt; genericCrudController;\n    public TestingController(TestRepository repository) {\n        genericPagingService = new GenericPagingService&lt;&gt;(repository);\n        genericCrudController = new GenericCrudController&lt;&gt;(repository);\n    }\n}\n</code></pre>\n<p>Is there a way to achieve this? I don't want to use interfaces, because I have a plenty of pretty much identical controllers and I think using some composition stuff can work</p>\n<p>I originally tried to extend multiple generic classes, but obviously Java can't do that.\nI also tried to come up with something with interfaces, but I don't think it can work well in this case</p>\n"},{"tags":["java","spring","spring-boot","java-21","virtual-threads"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1699865936,"post_id":77472556,"comment_id":136580055,"body_markdown":"WIthout seeing your application this will be impossible to answer. I would also suggest to read-up on virtual threads especially on when to use them and when **not** to use them. They are useful in certain cases and in others they are not and will only degrade performance.","body":"WIthout seeing your application this will be impossible to answer. I would also suggest to read-up on virtual threads especially on when to use them and when <b>not</b> to use them. They are useful in certain cases and in others they are not and will only degrade performance."},{"owner":{"account_id":1939636,"reputation":28457,"user_id":1746118,"accept_rate":95,"display_name":"Naman"},"score":0,"creation_date":1699898052,"post_id":77472556,"comment_id":136585989,"body_markdown":"@M.Deinum What specifically at the application are you hinting towards that could be causing this? I thought(reason for asking) the change was pretty generic at the platform itself with the only primary line of code involved being `protocolHandler.setExecutor(Executors.newVirtualThreadPerTaskExecutor());`","body":"@M.Deinum What specifically at the application are you hinting towards that could be causing this? I thought(reason for asking) the change was pretty generic at the platform itself with the only primary line of code involved being <code>protocolHandler.setExecutor(Executors.newVirtualThreadPerTas&zwnj;&#8203;kExecutor());</code>"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1699901570,"post_id":77472556,"comment_id":136586499,"body_markdown":"Virtual Threads offer the most benefits when using them for IO bound tasks not for compute bound tasks. Another thing is that, depending on the version of Spring (Boot), you might run into thread pinning issues due to the use of the `syncronized` keyword and use of `ThreadLocal` s . A real effort has been made in Spring Framework 6 and up to change parts of the framework to work better with virtual threads.","body":"Virtual Threads offer the most benefits when using them for IO bound tasks not for compute bound tasks. Another thing is that, depending on the version of Spring (Boot), you might run into thread pinning issues due to the use of the <code>syncronized</code> keyword and use of <code>ThreadLocal</code> s . A real effort has been made in Spring Framework 6 and up to change parts of the framework to work better with virtual threads."},{"owner":{"account_id":1939636,"reputation":28457,"user_id":1746118,"accept_rate":95,"display_name":"Naman"},"score":0,"creation_date":1699952261,"post_id":77472556,"comment_id":136592058,"body_markdown":"@M.Deinum  The version of Spring Boot in use with my application is `3.1.4` which is most likely based on `spring-framework:6.0.12`. Thanks for highlighting though, I do understand that most likely boot [`3.2` would be GA soon](https://spring.io/blog/2023/09/09/all-together-now-spring-boot-3-2-graalvm-native-images-java-21-and-virtual) and would have [`6.1.0` with more work around virtual threads](https://github.com/spring-projects/spring-framework/issues?q=is%3Aissue+virtual+threads+is%3Aclosed). Would wait, try out the upgrade to follow up with my findings.","body":"@M.Deinum  The version of Spring Boot in use with my application is <code>3.1.4</code> which is most likely based on <code>spring-framework:6.0.12</code>. Thanks for highlighting though, I do understand that most likely boot <a href=\"https://spring.io/blog/2023/09/09/all-together-now-spring-boot-3-2-graalvm-native-images-java-21-and-virtual\" rel=\"nofollow noreferrer\"><code>3.2</code> would be GA soon</a> and would have <a href=\"https://github.com/spring-projects/spring-framework/issues?q=is%3Aissue+virtual+threads+is%3Aclosed\" rel=\"nofollow noreferrer\"><code>6.1.0</code> with more work around virtual threads</a>. Would wait, try out the upgrade to follow up with my findings."},{"owner":{"account_id":1939636,"reputation":28457,"user_id":1746118,"accept_rate":95,"display_name":"Naman"},"score":0,"creation_date":1701096257,"post_id":77472556,"comment_id":136729153,"body_markdown":"@M.Deinum Have upgraded to [`spring-boot:3.2`](https://spring.io/blog/2023/11/23/spring-boot-3-2-0-available-now), but the trend of the latencies remain same. Shall I consider that using virtual threads via spring boot is recommended only for certain applications?","body":"@M.Deinum Have upgraded to <a href=\"https://spring.io/blog/2023/11/23/spring-boot-3-2-0-available-now\" rel=\"nofollow noreferrer\"><code>spring-boot:3.2</code></a>, but the trend of the latencies remain same. Shall I consider that using virtual threads via spring boot is recommended only for certain applications?"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1701096565,"post_id":77472556,"comment_id":136729218,"body_markdown":"As mentioned, virtual threads, are only useful in IO situations not for concurrent computations. So if it isn&#39;t for IO don&#39;t use virtual threads as it will probably slow things down instead of speed things up, if it would at all. It isn&#39;t for gained performance but rather for less resource usage (the same with reactive).","body":"As mentioned, virtual threads, are only useful in IO situations not for concurrent computations. So if it isn&#39;t for IO don&#39;t use virtual threads as it will probably slow things down instead of speed things up, if it would at all. It isn&#39;t for gained performance but rather for less resource usage (the same with reactive)."},{"owner":{"account_id":1939636,"reputation":28457,"user_id":1746118,"accept_rate":95,"display_name":"Naman"},"score":0,"creation_date":1701096809,"post_id":77472556,"comment_id":136729276,"body_markdown":"@M.Deinum Got it, makes sense for me to revert to not using them for the current application. Thank you for your responses. I kind of presumed that there would be certain benefits(even small) if the framework is supporting it, but doesn&#39;t seem to be applicable for all.","body":"@M.Deinum Got it, makes sense for me to revert to not using them for the current application. Thank you for your responses. I kind of presumed that there would be certain benefits(even small) if the framework is supporting it, but doesn&#39;t seem to be applicable for all."}],"owner":{"account_id":1939636,"reputation":28457,"user_id":1746118,"accept_rate":95,"display_name":"Naman"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":171,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":0,"score":-1,"last_activity_date":1701096844,"creation_date":1699864004,"question_id":77472556,"body_markdown":"I have recently migrated one of our `spring-boot` applications deployed with `JDK-21` to making use of virtual threads referencing [this document](https://www.baeldung.com/spring-6-virtual-threads).\r\n\r\nThough with this change there is not much of a change in the application&#39;s average latency(~40ms), there is a slight difference in the **99th percentiles** as compared to those in the past. \r\n\r\n***Note*** - The gap between the present and the previous period lines in the image below after the hovered deployment time.\r\n[![enter image description here][1]][1]\r\n\r\n\r\nUpon observing the JVM metrics for this, the only correlation that I could draw was with the variation over an increased **Blocked** and **Waiting** thread count reported by the application.\r\n[![enter image description here][2]][2]\r\n\r\nAn obvious question that I have is whether moving to using virtual threads the way I did is correct or not. Any other factors to consider?\r\n\r\nAdditionally, what could have caused the change in the thread state reported via the metrics? Do note, roughly for a **day** these numbers were not as high, jittery pattern in the image.\r\n\r\n***Info*** - The application makes use of `spring-boot:3.1.4` which is based on `spring-framework:6.0.12`.\r\n\r\n  [1]: https://i.stack.imgur.com/UOwvH.jpg\r\n  [2]: https://i.stack.imgur.com/UQLxv.jpg","title":"Poor performance over Spring Boot application after moving to Virtual Thread","body":"<p>I have recently migrated one of our <code>spring-boot</code> applications deployed with <code>JDK-21</code> to making use of virtual threads referencing <a href=\"https://www.baeldung.com/spring-6-virtual-threads\" rel=\"nofollow noreferrer\">this document</a>.</p>\n<p>Though with this change there is not much of a change in the application's average latency(~40ms), there is a slight difference in the <strong>99th percentiles</strong> as compared to those in the past.</p>\n<p><em><strong>Note</strong></em> - The gap between the present and the previous period lines in the image below after the hovered deployment time.\n<a href=\"https://i.stack.imgur.com/UOwvH.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UOwvH.jpg\" alt=\"enter image description here\" /></a></p>\n<p>Upon observing the JVM metrics for this, the only correlation that I could draw was with the variation over an increased <strong>Blocked</strong> and <strong>Waiting</strong> thread count reported by the application.\n<a href=\"https://i.stack.imgur.com/UQLxv.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UQLxv.jpg\" alt=\"enter image description here\" /></a></p>\n<p>An obvious question that I have is whether moving to using virtual threads the way I did is correct or not. Any other factors to consider?</p>\n<p>Additionally, what could have caused the change in the thread state reported via the metrics? Do note, roughly for a <strong>day</strong> these numbers were not as high, jittery pattern in the image.</p>\n<p><em><strong>Info</strong></em> - The application makes use of <code>spring-boot:3.1.4</code> which is based on <code>spring-framework:6.0.12</code>.</p>\n"},{"tags":["java","slf4j"],"comments":[{"owner":{"account_id":6291890,"reputation":9545,"user_id":4889267,"accept_rate":100,"display_name":"Alan Kavanagh"},"score":0,"creation_date":1549983415,"post_id":54652836,"comment_id":96097208,"body_markdown":"Have you got one of `slf4j-nop.jar slf4j-simple.jar, slf4j-log4j12.jar, slf4j-jdk14.jar or logback-classic.jar` on the class path ?","body":"Have you got one of <code>slf4j-nop.jar slf4j-simple.jar, slf4j-log4j12.jar, slf4j-jdk14.jar or logback-classic.jar</code> on the class path ?"}],"answers":[{"tags":[],"owner":{"account_id":1535921,"reputation":3060,"user_id":1431979,"display_name":"Pierre C"},"down_vote_count":0,"up_vote_count":54,"is_accepted":true,"score":54,"last_activity_date":1604760610,"creation_date":1569727651,"answer_id":58152003,"question_id":54652836,"body_markdown":"As stated in [tutorialspoint][1] :\r\n\r\n&gt; SLF4J stands for Simple Logging Facade for Java. It provides a simple\r\n&gt; abstraction of all the logging frameworks. It enables a user to work\r\n&gt; with any of the logging frameworks such as Log4j, Logback, JUL\r\n&gt; (java.util.logging), etc. using single dependency.\r\n\r\nThis means that you have to provide a concrete java logging library on your classpath on top of the dependency for SLF4J itself (Example with Maven):\r\n\r\n    &lt;!-- https://mvnrepository.com/artifact/org.slf4j/slf4j-api --&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n        &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\r\n        &lt;version&gt;2.0.0-alpha0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nYou will also need to specify the dependency on your preferred logging library. For instance:\r\n\r\nFor **standard jdk1.4 logging** :\r\n\r\n     &lt;!-- https://mvnrepository.com/artifact/org.slf4j/slf4j-jdk14 --&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n        &lt;artifactId&gt;slf4j-jdk14&lt;/artifactId&gt;\r\n        &lt;version&gt;2.0.0-alpha0&lt;/version&gt;\r\n        &lt;scope&gt;runtime&lt;/scope&gt;\r\n    &lt;/dependency&gt;  \r\n\r\nFor **slf4j-simple logging** :\r\n\r\n\r\n    &lt;!-- https://mvnrepository.com/artifact/org.slf4j/slf4j-simple --&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n        &lt;artifactId&gt;slf4j-simple&lt;/artifactId&gt;\r\n        &lt;version&gt;2.0.0-alpha0&lt;/version&gt;\r\n        &lt;scope&gt;runtime&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n\r\nFor **log4j logging** :\r\n\r\n\r\n    &lt;!-- https://mvnrepository.com/artifact/org.slf4j/slf4j-log4j12 --&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n        &lt;artifactId&gt;slf4j-log4j12&lt;/artifactId&gt;\r\n        &lt;version&gt;2.0.0-alpha0&lt;/version&gt;\r\n        &lt;scope&gt;runtime&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n\r\n\r\n\r\n\r\n\r\n  [1]: https://www.tutorialspoint.com/slf4j/index.htm","title":"Found slf4j-api dependency but no providers were found","body":"<p>As stated in <a href=\"https://www.tutorialspoint.com/slf4j/index.htm\" rel=\"noreferrer\">tutorialspoint</a> :</p>\n<blockquote>\n<p>SLF4J stands for Simple Logging Facade for Java. It provides a simple\nabstraction of all the logging frameworks. It enables a user to work\nwith any of the logging frameworks such as Log4j, Logback, JUL\n(java.util.logging), etc. using single dependency.</p>\n</blockquote>\n<p>This means that you have to provide a concrete java logging library on your classpath on top of the dependency for SLF4J itself (Example with Maven):</p>\n<pre><code>&lt;!-- https://mvnrepository.com/artifact/org.slf4j/slf4j-api --&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n    &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\n    &lt;version&gt;2.0.0-alpha0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>You will also need to specify the dependency on your preferred logging library. For instance:</p>\n<p>For <strong>standard jdk1.4 logging</strong> :</p>\n<pre><code> &lt;!-- https://mvnrepository.com/artifact/org.slf4j/slf4j-jdk14 --&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n    &lt;artifactId&gt;slf4j-jdk14&lt;/artifactId&gt;\n    &lt;version&gt;2.0.0-alpha0&lt;/version&gt;\n    &lt;scope&gt;runtime&lt;/scope&gt;\n&lt;/dependency&gt;  \n</code></pre>\n<p>For <strong>slf4j-simple logging</strong> :</p>\n<pre><code>&lt;!-- https://mvnrepository.com/artifact/org.slf4j/slf4j-simple --&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n    &lt;artifactId&gt;slf4j-simple&lt;/artifactId&gt;\n    &lt;version&gt;2.0.0-alpha0&lt;/version&gt;\n    &lt;scope&gt;runtime&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>For <strong>log4j logging</strong> :</p>\n<pre><code>&lt;!-- https://mvnrepository.com/artifact/org.slf4j/slf4j-log4j12 --&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n    &lt;artifactId&gt;slf4j-log4j12&lt;/artifactId&gt;\n    &lt;version&gt;2.0.0-alpha0&lt;/version&gt;\n    &lt;scope&gt;runtime&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16765914,"reputation":111,"user_id":12119587,"display_name":"Priyanka B"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1632921851,"creation_date":1632921851,"answer_id":69377302,"question_id":54652836,"body_markdown":"Refer this Page: http://www.slf4j.org/codes.html#noProviders\r\n\r\nYou may add either of the following dependencies: Placing one (and only one) of slf4j-nop.jar slf4j-simple.jar, slf4j-log4j12.jar, slf4j-jdk14.jar or logback-classic.jar on the class path should solve the problem\r\n\r\nI used &quot;slf4j-simple&quot; maven dependency from https://mvnrepository.com/artifact/org.slf4j/log4j-over-slf4j\r\n","title":"Found slf4j-api dependency but no providers were found","body":"<p>Refer this Page: <a href=\"http://www.slf4j.org/codes.html#noProviders\" rel=\"nofollow noreferrer\">http://www.slf4j.org/codes.html#noProviders</a></p>\n<p>You may add either of the following dependencies: Placing one (and only one) of slf4j-nop.jar slf4j-simple.jar, slf4j-log4j12.jar, slf4j-jdk14.jar or logback-classic.jar on the class path should solve the problem</p>\n<p>I used &quot;slf4j-simple&quot; maven dependency from <a href=\"https://mvnrepository.com/artifact/org.slf4j/log4j-over-slf4j\" rel=\"nofollow noreferrer\">https://mvnrepository.com/artifact/org.slf4j/log4j-over-slf4j</a></p>\n"},{"tags":[],"owner":{"account_id":27402929,"reputation":31,"user_id":20904053,"display_name":"Sammie"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1675170515,"creation_date":1675170515,"answer_id":75297673,"question_id":54652836,"body_markdown":"This can be due to the version of slf4J API and you are using. try this changing the version like this.\r\n\r\n    &lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.7.25&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;","title":"Found slf4j-api dependency but no providers were found","body":"<p>This can be due to the version of slf4J API and you are using. try this changing the version like this.</p>\n<pre><code>&lt;dependency&gt;\n        &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n        &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\n        &lt;version&gt;1.7.25&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":126486,"reputation":4659,"user_id":323015,"accept_rate":43,"display_name":"subhashis"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1688780505,"creation_date":1688780505,"answer_id":76641026,"question_id":54652836,"body_markdown":"You can refer to [THIS][1]\r\n\r\nThis warning, i.e. not an error, message is reported when no SLF4J providers could be found on the class path. Placing one (and only one) of the many available providers such as slf4j-nop.jar slf4j-simple.jar, slf4j-reload4j.jar, slf4j-jdk14.jar or logback-classic.jar on the class path should solve the problem.\r\n\r\n\r\n  [1]: https://www.slf4j.org/codes.html","title":"Found slf4j-api dependency but no providers were found","body":"<p>You can refer to <a href=\"https://www.slf4j.org/codes.html\" rel=\"nofollow noreferrer\">THIS</a></p>\n<p>This warning, i.e. not an error, message is reported when no SLF4J providers could be found on the class path. Placing one (and only one) of the many available providers such as slf4j-nop.jar slf4j-simple.jar, slf4j-reload4j.jar, slf4j-jdk14.jar or logback-classic.jar on the class path should solve the problem.</p>\n"},{"tags":[],"owner":{"account_id":8046850,"reputation":372,"user_id":7862478,"display_name":"plotnik"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1691392473,"creation_date":1691391747,"answer_id":76849434,"question_id":54652836,"body_markdown":"To disable this message from a library that depends on `slf4j`, you can add `slf4j-nop` to your dependencies **before** your library, e.g.\r\n```\r\nimplementation &#39;org.slf4j:slf4j-nop:2.0.7&#39;\r\n```\r\n\r\nAt the time of writing, the latest version of `slf4j` is `2.0.7`,\r\nthis can be checked at https://central.sonatype.com/artifact/org.slf4j/slf4j-nop\r\n\r\nIf you need output from the library you are using, you can add `slf4j-simple` instead of `slf4j-nop`","title":"Found slf4j-api dependency but no providers were found","body":"<p>To disable this message from a library that depends on <code>slf4j</code>, you can add <code>slf4j-nop</code> to your dependencies <strong>before</strong> your library, e.g.</p>\n<pre><code>implementation 'org.slf4j:slf4j-nop:2.0.7'\n</code></pre>\n<p>At the time of writing, the latest version of <code>slf4j</code> is <code>2.0.7</code>,\nthis can be checked at <a href=\"https://central.sonatype.com/artifact/org.slf4j/slf4j-nop\" rel=\"nofollow noreferrer\">https://central.sonatype.com/artifact/org.slf4j/slf4j-nop</a></p>\n<p>If you need output from the library you are using, you can add <code>slf4j-simple</code> instead of <code>slf4j-nop</code></p>\n"},{"tags":[],"owner":{"account_id":510882,"reputation":3037,"user_id":1536133,"accept_rate":45,"display_name":"Gabriel Furstenheim"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701096739,"creation_date":1701086319,"answer_id":77556726,"question_id":54652836,"body_markdown":"In my case, this error was triggered from adding a new dependency: `com.amazonaws:DynamoDBLocal:2.0.0+`\r\n\r\nThe problem was fixed by adding `exclude(group = &quot;org.eclipse.jetty&quot;)`. As in:\r\n\r\n```\r\ntestImplementation(&quot;com.amazonaws:DynamoDBLocal:2.0.0+&quot;) {\r\n   exclude(group = &quot;org.eclipse.jetty&quot;)\r\n} \r\n\r\n```","title":"Found slf4j-api dependency but no providers were found","body":"<p>In my case, this error was triggered from adding a new dependency: <code>com.amazonaws:DynamoDBLocal:2.0.0+</code></p>\n<p>The problem was fixed by adding <code>exclude(group = &quot;org.eclipse.jetty&quot;)</code>. As in:</p>\n<pre><code>testImplementation(&quot;com.amazonaws:DynamoDBLocal:2.0.0+&quot;) {\n   exclude(group = &quot;org.eclipse.jetty&quot;)\n} \n\n</code></pre>\n"}],"owner":{"account_id":8954819,"reputation":1401,"user_id":8005819,"display_name":"Вячеслав Чернышов"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":171022,"favorite_count":0,"down_vote_count":0,"up_vote_count":38,"accepted_answer_id":58152003,"answer_count":6,"score":38,"last_activity_date":1701096739,"creation_date":1549983260,"question_id":54652836,"body_markdown":"I use Lombok.\r\nSome time ago when building a project, the compiler started issuing the following message:\r\n\r\n&gt; Found slf4j-api dependency but no providers were found.  Did you mean\r\n&gt; to add slf4j-simple? See https://www.slf4j.org/codes.html#noProviders\r\n&gt; .\r\n\r\nIf you follow the link, there is a rather vague comment:\r\n\r\n&gt; This warning, i.e. not an error, message is reported when no SLF4J\r\n&gt; providers could be found on the class path. Placing one (and only one)\r\n&gt; of slf4j-nop.jar slf4j-simple.jar, slf4j-log4j12.jar, slf4j-jdk14.jar\r\n&gt; or logback-classic.jar on the class path should solve the problem.\r\n&gt; Note that these providers must target slf4j-api 1.8 or later.\r\n&gt; \r\n&gt; In the absence of a provider, SLF4J will default to a no-operation\r\n&gt; (NOP) logger provider.\r\n&gt; \r\n&gt; Please note that slf4j-api version 1.8.x and later use the\r\n&gt; ServiceLoader mechanism. Earlier versions relied on the static binder\r\n&gt; mechanism which is no longer honored by slf4j-api. Please read the FAQ\r\n&gt; entry What has changed in SLF4J version 1.8.0? for further important\r\n&gt; details.\r\n&gt; \r\n&gt; If you are responsible for packaging an application and do not care\r\n&gt; about logging, then placing slf4j-nop.jar on the class path of your\r\n&gt; application will get rid of this warning message. Note that embedded\r\n&gt; components such as libraries or frameworks should not declare a\r\n&gt; dependency on any SLF4J providers but only depend on slf4j-api. When a\r\n&gt; library declares a compile-time dependency on a SLF4J provider, it\r\n&gt; imposes that provider on the end-user, thus negating SLF4J&#39;s purpose.\r\n\r\nI have no idea how to do it correctly. If you have an experience, please, explain me how to do it.","title":"Found slf4j-api dependency but no providers were found","body":"<p>I use Lombok.\nSome time ago when building a project, the compiler started issuing the following message:</p>\n\n<blockquote>\n  <p>Found slf4j-api dependency but no providers were found.  Did you mean\n  to add slf4j-simple? See <a href=\"https://www.slf4j.org/codes.html#noProviders\" rel=\"noreferrer\">https://www.slf4j.org/codes.html#noProviders</a>\n  .</p>\n</blockquote>\n\n<p>If you follow the link, there is a rather vague comment:</p>\n\n<blockquote>\n  <p>This warning, i.e. not an error, message is reported when no SLF4J\n  providers could be found on the class path. Placing one (and only one)\n  of slf4j-nop.jar slf4j-simple.jar, slf4j-log4j12.jar, slf4j-jdk14.jar\n  or logback-classic.jar on the class path should solve the problem.\n  Note that these providers must target slf4j-api 1.8 or later.</p>\n  \n  <p>In the absence of a provider, SLF4J will default to a no-operation\n  (NOP) logger provider.</p>\n  \n  <p>Please note that slf4j-api version 1.8.x and later use the\n  ServiceLoader mechanism. Earlier versions relied on the static binder\n  mechanism which is no longer honored by slf4j-api. Please read the FAQ\n  entry What has changed in SLF4J version 1.8.0? for further important\n  details.</p>\n  \n  <p>If you are responsible for packaging an application and do not care\n  about logging, then placing slf4j-nop.jar on the class path of your\n  application will get rid of this warning message. Note that embedded\n  components such as libraries or frameworks should not declare a\n  dependency on any SLF4J providers but only depend on slf4j-api. When a\n  library declares a compile-time dependency on a SLF4J provider, it\n  imposes that provider on the end-user, thus negating SLF4J's purpose.</p>\n</blockquote>\n\n<p>I have no idea how to do it correctly. If you have an experience, please, explain me how to do it.</p>\n"},{"tags":["java","testcontainers"],"comments":[{"owner":{"account_id":1670879,"reputation":1569,"user_id":1537370,"accept_rate":79,"display_name":"Damo"},"score":0,"creation_date":1601807876,"post_id":64182352,"comment_id":113515043,"body_markdown":"as a workaround, I can create a throwaway testcontainer and have it create the (damo) network as step 1, then mod docker-compose to join this external (damo) n/w. This of course then allows any further testcontainer join that network","body":"as a workaround, I can create a throwaway testcontainer and have it create the (damo) network as step 1, then mod docker-compose to join this external (damo) n/w. This of course then allows any further testcontainer join that network"},{"owner":{"account_id":57191,"reputation":7863,"user_id":171296,"accept_rate":100,"display_name":"tttppp"},"score":0,"creation_date":1619709877,"post_id":64182352,"comment_id":118993062,"body_markdown":"I was able to work around this problem by exposing the port from the docker-compose and then using `Testcontainers.exposeHostPorts(8200);` and then accessing this from the testcontainer with `http://host.testcontainers.internal:8200`  There are details about this approach here: https://www.testcontainers.org/features/networking/","body":"I was able to work around this problem by exposing the port from the docker-compose and then using <code>Testcontainers.exposeHostPorts(8200);</code> and then accessing this from the testcontainer with <code>http:&#47;&#47;host.testcontainers.internal:8200</code>  There are details about this approach here: <a href=\"https://www.testcontainers.org/features/networking/\" rel=\"nofollow noreferrer\">testcontainers.org/features/networking</a>"},{"owner":{"account_id":15267,"reputation":366,"user_id":3588231,"display_name":"Tim van der Leeuw"},"score":0,"creation_date":1625499477,"post_id":64182352,"comment_id":120637518,"body_markdown":"Why is your new image not referenced in the Compose file that you start, then build the image first next start the Compose file using that image?","body":"Why is your new image not referenced in the Compose file that you start, then build the image first next start the Compose file using that image?"}],"owner":{"account_id":1670879,"reputation":1569,"user_id":1537370,"accept_rate":79,"display_name":"Damo"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1914,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":0,"score":4,"last_activity_date":1701096357,"creation_date":1601714682,"question_id":64182352,"body_markdown":"I wish to create a network via docker-compose (via DockerComposeContainer) and have another container (created via ImageFromDockerfile) join that same network. Is this possible?\r\n\r\nAsked another way, can ImageFromDockerfile join an existing network?\r\n(For me the order is crucial, because when i start my image it needs to connect to all the services running through compose)\r\n\r\n\r\nThe moving parts I have tried include:\r\n\r\n\r\n1. The docker compose file\r\n```\r\nversion: &#39;3.6&#39;\r\n\r\nservices:\r\n  vault:\r\n    image: docker.x.com/x/vault:123-ytr\r\n    ports:\r\n      - 8200:8200\r\n    networks:\r\n      - gateway\r\n    environment:\r\n      - APP_NAME=requestlogidentityconsumer\r\n\r\nnetworks:\r\n  gateway:\r\n    name: damo\r\n```\r\n\r\n2. Executing above compose file via DockerComposeContainer (incl. create damo network)\r\n\r\n3. Attempt to build and run rlic-container and have it join damo n/w \r\n```\r\n    Network network =\r\n        Network.builder().createNetworkCmdModifier(cmd -&gt; cmd.withName(&quot;damo&quot;)).build();\r\n\r\n    new GenericContainer(\r\n            new ImageFromDockerfile(&quot;rlic-container&quot;, true)\r\n                .withFileFromFile(&quot;Dockerfile&quot;, DOCKER_FILE_PATH.toFile()))\r\n        .withNetwork(network)\r\n        .start();\r\n```\r\n\r\nWhen I run step 3 i get:\r\n\r\n```Caused by: com.github.dockerjava.api.exception.ConflictException: {&quot;message&quot;:&quot;network with name damo already exists&quot;}```\r\n\r\nWhich makes sense (in so far as network does exist from step 2), and ties back to my question of; can i write step 3 such that it joins an existing network?\r\n\r\nThanks\r\n","title":"Can Testcontainers join existing network?","body":"<p>I wish to create a network via docker-compose (via DockerComposeContainer) and have another container (created via ImageFromDockerfile) join that same network. Is this possible?</p>\n<p>Asked another way, can ImageFromDockerfile join an existing network?\n(For me the order is crucial, because when i start my image it needs to connect to all the services running through compose)</p>\n<p>The moving parts I have tried include:</p>\n<ol>\n<li>The docker compose file</li>\n</ol>\n<pre><code>version: '3.6'\n\nservices:\n  vault:\n    image: docker.x.com/x/vault:123-ytr\n    ports:\n      - 8200:8200\n    networks:\n      - gateway\n    environment:\n      - APP_NAME=requestlogidentityconsumer\n\nnetworks:\n  gateway:\n    name: damo\n</code></pre>\n<ol start=\"2\">\n<li><p>Executing above compose file via DockerComposeContainer (incl. create damo network)</p>\n</li>\n<li><p>Attempt to build and run rlic-container and have it join damo n/w</p>\n</li>\n</ol>\n<pre><code>    Network network =\n        Network.builder().createNetworkCmdModifier(cmd -&gt; cmd.withName(&quot;damo&quot;)).build();\n\n    new GenericContainer(\n            new ImageFromDockerfile(&quot;rlic-container&quot;, true)\n                .withFileFromFile(&quot;Dockerfile&quot;, DOCKER_FILE_PATH.toFile()))\n        .withNetwork(network)\n        .start();\n</code></pre>\n<p>When I run step 3 i get:</p>\n<p><code>Caused by: com.github.dockerjava.api.exception.ConflictException: {&quot;message&quot;:&quot;network with name damo already exists&quot;}</code></p>\n<p>Which makes sense (in so far as network does exist from step 2), and ties back to my question of; can i write step 3 such that it joins an existing network?</p>\n<p>Thanks</p>\n"},{"tags":["java","r","rjava"],"answers":[{"tags":[],"owner":{"account_id":6814076,"reputation":12687,"user_id":5295429,"display_name":"Oo.oO"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1701078655,"creation_date":1701078655,"answer_id":77555939,"question_id":77544492,"body_markdown":"The reason here is that your code looks for a method with `double` and you are defining it with `Double`\r\n\r\n```\r\n&gt; javap -s  Simple\r\nCompiled from &quot;Simple.java&quot;\r\npublic class Simple {\r\n  public Simple();\r\n    descriptor: ()V\r\n\r\n  public static java.lang.String performCurveFitting(java.lang.Double[], java.lang.Double[], java.lang.Double, java.lang.Double);\r\n    descriptor: ([Ljava/lang/Double;[Ljava/lang/Double;Ljava/lang/Double;Ljava/lang/Double;)Ljava/lang/String;\r\n\r\n  public static java.lang.String performCurveFitting2(double[], double[], double, double);\r\n    descriptor: ([D[DDD)Ljava/lang/String;\r\n}\r\n}\r\n```\r\n\r\nTry using `double` instead. Should be visible to your `R` code.\r\n\r\nWith `javap` command you can see the exact signature of your code. As you can see. Your signature is:\r\n\r\n```\r\n[Ljava/lang/Double;[Ljava/lang/Double;Ljava/lang/Double;Ljava/lang/Double;)Ljava/lang/String;\r\n```\r\n\r\nwhile your `R` code is looking for:\r\n\r\n```\r\n[D[DDD)Ljava/lang/String; \r\n```\r\n\r\nMost probably, `R` uses small Java&#39;s `doubles` whenever you are using `R` doubles passed to `Java`.","title":"rJava .jcall java method parameters input issue: with signature ([D[DDD)Ljava/lang/String; not found","body":"<p>The reason here is that your code looks for a method with <code>double</code> and you are defining it with <code>Double</code></p>\n<pre><code>&gt; javap -s  Simple\nCompiled from &quot;Simple.java&quot;\npublic class Simple {\n  public Simple();\n    descriptor: ()V\n\n  public static java.lang.String performCurveFitting(java.lang.Double[], java.lang.Double[], java.lang.Double, java.lang.Double);\n    descriptor: ([Ljava/lang/Double;[Ljava/lang/Double;Ljava/lang/Double;Ljava/lang/Double;)Ljava/lang/String;\n\n  public static java.lang.String performCurveFitting2(double[], double[], double, double);\n    descriptor: ([D[DDD)Ljava/lang/String;\n}\n}\n</code></pre>\n<p>Try using <code>double</code> instead. Should be visible to your <code>R</code> code.</p>\n<p>With <code>javap</code> command you can see the exact signature of your code. As you can see. Your signature is:</p>\n<pre><code>[Ljava/lang/Double;[Ljava/lang/Double;Ljava/lang/Double;Ljava/lang/Double;)Ljava/lang/String;\n</code></pre>\n<p>while your <code>R</code> code is looking for:</p>\n<pre><code>[D[DDD)Ljava/lang/String; \n</code></pre>\n<p>Most probably, <code>R</code> uses small Java's <code>doubles</code> whenever you are using <code>R</code> doubles passed to <code>Java</code>.</p>\n"}],"owner":{"account_id":4624957,"reputation":405,"user_id":3749036,"display_name":"Jui-Hua Hsieh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77555939,"answer_count":1,"score":0,"last_activity_date":1701095440,"creation_date":1700843067,"question_id":77544492,"body_markdown":"Here is my original java code with method of &quot;performCurveFitting&quot; method\r\n```\r\npublic static String performCurveFitting(Double[] conc, Double[] resp, Double classificationSD, Double minYrange) {\r\n        CurveFittingService fittingService = new CurveFittingServiceImpl();\r\n        FittingResult fittingResult = fittingService.doFit(conc, resp, classificationSD, minYrange);\r\n        \r\n        // Convert the fitting result to a String representation\r\n        return fittingResult.toString(); // Assuming FittingResult has overridden toString() method\r\n    }\r\n```\r\n\r\nIn R code, \r\n\r\nI did the following commands with no errors\r\n\r\n```\r\n.jinit(&#39;.&#39;)\r\n.jaddClassPath(&#39;inst/java/curve-fitting.jar&#39;)\r\ncurvefit &lt;- .jnew(&#39;gov/nih/ncats/ifx/qhts/curvefitting/CurveClassFit&#39;)\r\n.DollarNames(curvefit)\r\n```\r\n\r\nHowever, when I tested the method using the following command\r\n\r\n```\r\n.jcall(curvefit, returnSig = &quot;Ljava/lang/String;&quot;, method = &quot;performCurveFitting&quot;, c(5.5707525685E-10, 4.5123095805E-8, 1.2183235867E-6, 3.2894736842E-5),c(2,4,6,100), 5, 10)\r\n```\r\n\r\nI got this error\r\n&gt; Error in .jcall(curvefit, returnSig = &quot;Ljava/lang/String;&quot;, method = &quot;performCurveFitting&quot;,  : \r\n  method performCurveFitting with signature ([D[DDD)Ljava/lang/String; not found\r\n\r\nHow can I fix this error?\r\n\r\nThank you!\r\n\r\n\r\n","title":"rJava .jcall java method parameters input issue: with signature ([D[DDD)Ljava/lang/String; not found","body":"<p>Here is my original java code with method of &quot;performCurveFitting&quot; method</p>\n<pre><code>public static String performCurveFitting(Double[] conc, Double[] resp, Double classificationSD, Double minYrange) {\n        CurveFittingService fittingService = new CurveFittingServiceImpl();\n        FittingResult fittingResult = fittingService.doFit(conc, resp, classificationSD, minYrange);\n        \n        // Convert the fitting result to a String representation\n        return fittingResult.toString(); // Assuming FittingResult has overridden toString() method\n    }\n</code></pre>\n<p>In R code,</p>\n<p>I did the following commands with no errors</p>\n<pre><code>.jinit('.')\n.jaddClassPath('inst/java/curve-fitting.jar')\ncurvefit &lt;- .jnew('gov/nih/ncats/ifx/qhts/curvefitting/CurveClassFit')\n.DollarNames(curvefit)\n</code></pre>\n<p>However, when I tested the method using the following command</p>\n<pre><code>.jcall(curvefit, returnSig = &quot;Ljava/lang/String;&quot;, method = &quot;performCurveFitting&quot;, c(5.5707525685E-10, 4.5123095805E-8, 1.2183235867E-6, 3.2894736842E-5),c(2,4,6,100), 5, 10)\n</code></pre>\n<p>I got this error</p>\n<blockquote>\n<p>Error in .jcall(curvefit, returnSig = &quot;Ljava/lang/String;&quot;, method = &quot;performCurveFitting&quot;,  :\nmethod performCurveFitting with signature ([D[DDD)Ljava/lang/String; not found</p>\n</blockquote>\n<p>How can I fix this error?</p>\n<p>Thank you!</p>\n"},{"tags":["java","gradle","module","okhttp"],"comments":[{"owner":{"account_id":3618847,"reputation":867,"user_id":17695211,"display_name":"Alexey Veleshko"},"score":0,"creation_date":1701025342,"post_id":77008227,"comment_id":136721074,"body_markdown":"Works for me...","body":"Works for me..."}],"answers":[{"tags":[],"owner":{"account_id":1182555,"reputation":3471,"user_id":1157173,"accept_rate":71,"display_name":"Dorad"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700775024,"creation_date":1700606662,"answer_id":77526350,"question_id":77008227,"body_markdown":"What worked for me was this version combination:\r\n\r\n* `okio-3.5.0`\r\n* `okio-jvm-3.5.0`\r\n* `okhttp-4.11.0`\r\n* `kotlin-stdlib-1.6.20`","title":"java, okhttp, I get these exception: java.lang.NoClassDefFoundError: okio/Buffer, without module not","body":"<p>What worked for me was this version combination:</p>\n<ul>\n<li><code>okio-3.5.0</code></li>\n<li><code>okio-jvm-3.5.0</code></li>\n<li><code>okhttp-4.11.0</code></li>\n<li><code>kotlin-stdlib-1.6.20</code></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":29874264,"reputation":463,"user_id":22894892,"display_name":"Laurent Schoelens"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701095319,"creation_date":1701095319,"answer_id":77557654,"question_id":77008227,"body_markdown":"Not sure it&#39;ll answer your question but found this [issue][1] in okhttp repository discussing that okio and related dependencies does not support Java 9 Platform Module System (aka JPMS).\r\n\r\nAlso see that [other issue][2] which is related to the first one.\r\n\r\nMoreover, when you look at `okio-3.3.0.jar`&#39;s `MANIFEST.MF` file, you&#39;ll find that there&#39;s no `Automatic-Module-Name` directive (which is `Automatic-Module-Name: okio` in `okio-jvm-3.3.0.jar`). Since the `Builder` class is located in the okio&#39;s jar, that would explain why it can&#39;t resolve it with current configuration.\r\n\r\nKnowing that, is module support a *true* need in your project since it works without it ? \r\n\r\n  [1]: https://github.com/square/okhttp/issues/4184\r\n  [2]: https://github.com/square/okhttp/issues/6857","title":"java, okhttp, I get these exception: java.lang.NoClassDefFoundError: okio/Buffer, without module not","body":"<p>Not sure it'll answer your question but found this <a href=\"https://github.com/square/okhttp/issues/4184\" rel=\"nofollow noreferrer\">issue</a> in okhttp repository discussing that okio and related dependencies does not support Java 9 Platform Module System (aka JPMS).</p>\n<p>Also see that <a href=\"https://github.com/square/okhttp/issues/6857\" rel=\"nofollow noreferrer\">other issue</a> which is related to the first one.</p>\n<p>Moreover, when you look at <code>okio-3.3.0.jar</code>'s <code>MANIFEST.MF</code> file, you'll find that there's no <code>Automatic-Module-Name</code> directive (which is <code>Automatic-Module-Name: okio</code> in <code>okio-jvm-3.3.0.jar</code>). Since the <code>Builder</code> class is located in the okio's jar, that would explain why it can't resolve it with current configuration.</p>\n<p>Knowing that, is module support a <em>true</em> need in your project since it works without it ?</p>\n"}],"owner":{"account_id":29327881,"reputation":41,"user_id":22469969,"display_name":"Thomas"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":414,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":2,"score":4,"last_activity_date":1701095319,"creation_date":1693399957,"question_id":77008227,"body_markdown":"I use java 17 and okhttp-4.9.3. The call is:\r\n\r\n```java\r\nOkHttpClient httpClient = new OkHttpClient.Builder().build();\r\n```\r\n\r\nRunning the program, i get the exception:\r\n\r\n```\r\nException in thread &quot;ReadStationsThread&quot; java.lang.NoClassDefFoundError: okio/Buffer\r\nat okhttp3@4.9.3/okhttp3.ResponseBody$Companion.create(ResponseBody.kt:248)\r\nat okhttp3@4.9.3/okhttp3.ResponseBody$Companion.create$default(ResponseBody.kt:247)\r\nat okhttp3@4.9.3/okhttp3.internal.Util.\\&lt;clinit\\&gt;(Util.kt:65)\r\n```\r\n\r\nThe program can be build without error. I use gradle with these dependencies:\r\n\r\n```\r\nimplementation &#39;:okhttp-4.9.3&#39;\r\nimplementation &#39;:okio-3.3.0&#39;\r\nimplementation &#39;:okio-jvm-3.3.0&#39;\r\nimplementation &#39;:kotlin-stdlib-1.8.21&#39;\r\n```\r\n\r\nin the module-info.java is these:\r\n\r\n```\r\nrequires okhttp3; \r\nrequires okio; \r\nrequires kotlin.stdlib;\r\n```\r\n\r\nrunning the program, calls the exception. When i remove the mdule-info.java file, also running the program without modules, it works without problems. Anny idea what the module-info misses?","title":"java, okhttp, I get these exception: java.lang.NoClassDefFoundError: okio/Buffer, without module not","body":"<p>I use java 17 and okhttp-4.9.3. The call is:</p>\n<pre class=\"lang-java prettyprint-override\"><code>OkHttpClient httpClient = new OkHttpClient.Builder().build();\n</code></pre>\n<p>Running the program, i get the exception:</p>\n<pre><code>Exception in thread &quot;ReadStationsThread&quot; java.lang.NoClassDefFoundError: okio/Buffer\nat okhttp3@4.9.3/okhttp3.ResponseBody$Companion.create(ResponseBody.kt:248)\nat okhttp3@4.9.3/okhttp3.ResponseBody$Companion.create$default(ResponseBody.kt:247)\nat okhttp3@4.9.3/okhttp3.internal.Util.\\&lt;clinit\\&gt;(Util.kt:65)\n</code></pre>\n<p>The program can be build without error. I use gradle with these dependencies:</p>\n<pre><code>implementation ':okhttp-4.9.3'\nimplementation ':okio-3.3.0'\nimplementation ':okio-jvm-3.3.0'\nimplementation ':kotlin-stdlib-1.8.21'\n</code></pre>\n<p>in the module-info.java is these:</p>\n<pre><code>requires okhttp3; \nrequires okio; \nrequires kotlin.stdlib;\n</code></pre>\n<p>running the program, calls the exception. When i remove the mdule-info.java file, also running the program without modules, it works without problems. Anny idea what the module-info misses?</p>\n"},{"tags":["java","file-io"],"comments":[{"owner":{"account_id":2113991,"reputation":12074,"user_id":1878670,"accept_rate":66,"display_name":"Prateek"},"score":0,"creation_date":1356690315,"post_id":14067843,"comment_id":33212516,"body_markdown":"Please look for the question already answered on stackoverflow......... http://stackoverflow.com/questions/5759925/printwriter-vs-filewriter-in-java","body":"Please look for the question already answered on stackoverflow......... <a href=\"http://stackoverflow.com/questions/5759925/printwriter-vs-filewriter-in-java\" title=\"printwriter vs filewriter in java\">stackoverflow.com/questions/5759925/&hellip;</a>"},{"owner":{"account_id":39309,"reputation":4430,"user_id":113305,"accept_rate":94,"display_name":"Manu"},"score":0,"creation_date":1579184491,"post_id":14067843,"comment_id":105686962,"body_markdown":"That question is different than the one asked here.","body":"That question is different than the one asked here."}],"answers":[{"tags":[],"owner":{"account_id":2105298,"reputation":16079,"user_id":1871769,"accept_rate":60,"display_name":"Rahul"},"down_vote_count":0,"up_vote_count":10,"is_accepted":true,"score":10,"last_activity_date":1524204873,"creation_date":1356689463,"answer_id":14067913,"question_id":14067843,"body_markdown":"Although both of these internally uses a FileOutputStream , the main difference is that PrintWriter offers some additional methods for formatting like println and printf.\r\n\r\ncode snippets:\r\n\r\n    public PrintWriter(File file) throws FileNotFoundException {\r\n         this(new BufferedWriter(new OutputStreamWriter(new FileOutputStream(file))),\r\n         false);\r\n    }\r\n\r\n\r\n    public FileWriter(File file) throws IOException {\r\n           super(new FileOutputStream(file));\r\n    }\r\n\r\n\r\n\r\nMajor Differences : \r\n\r\n 1. FileWriter throws IOException in case of any IO failure.\r\n 2. None of the PrintWriter methods throws IOException, instead they set a boolean flag which can be obtained using checkError().\r\n 3. PrintWriter comes with an option of autoflush while creation(default is without autoflush) which will flush after every byte of data is written. In case of FileWriter, caller has to take care of invoking flush.\r\n\r\n","title":"Difference between PrintWriter and FileWriter class","body":"<p>Although both of these internally uses a FileOutputStream , the main difference is that PrintWriter offers some additional methods for formatting like println and printf.</p>\n\n<p>code snippets:</p>\n\n<pre><code>public PrintWriter(File file) throws FileNotFoundException {\n     this(new BufferedWriter(new OutputStreamWriter(new FileOutputStream(file))),\n     false);\n}\n\n\npublic FileWriter(File file) throws IOException {\n       super(new FileOutputStream(file));\n}\n</code></pre>\n\n<p>Major Differences : </p>\n\n<ol>\n<li>FileWriter throws IOException in case of any IO failure.</li>\n<li>None of the PrintWriter methods throws IOException, instead they set a boolean flag which can be obtained using checkError().</li>\n<li>PrintWriter comes with an option of autoflush while creation(default is without autoflush) which will flush after every byte of data is written. In case of FileWriter, caller has to take care of invoking flush.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":279975,"reputation":15386,"user_id":575421,"accept_rate":50,"display_name":"Mikita Belahlazau"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1356689508,"creation_date":1356689508,"answer_id":14067923,"question_id":14067843,"body_markdown":"`PrintWriter` gives you some handy methods for formatting like `println` and `printf`. So if you need to write printed text - you can use it. `FileWriter` is more like &quot;low-level&quot; writer that gives you ability to write only strings and char arrays. Basically I don&#39;t think there is a big difference what you choose.","title":"Difference between PrintWriter and FileWriter class","body":"<p><code>PrintWriter</code> gives you some handy methods for formatting like <code>println</code> and <code>printf</code>. So if you need to write printed text - you can use it. <code>FileWriter</code> is more like \"low-level\" writer that gives you ability to write only strings and char arrays. Basically I don't think there is a big difference what you choose.</p>\n"},{"tags":[],"owner":{"account_id":23121,"reputation":527336,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1356689517,"creation_date":1356689517,"answer_id":14067924,"question_id":14067843,"body_markdown":"From the source what PrintWriter does when you pass a File is to open it in a *buffered* way\r\n\r\n    public PrintWriter(File file) throws FileNotFoundException {\r\n        this(new BufferedWriter(new OutputStreamWriter(new FileOutputStream(file))),\r\n             false);\r\n    }\r\n\r\nif you pass it a FileWriter, it will open it, *without buffering*\r\n\r\n    public FileWriter(File file) throws IOException {\r\n        super(new FileOutputStream(file));\r\n    }\r\n\r\nThis means that the first example can be slightly more efficient.  However I would use the `File` without the `FileWriter` because to me it is simpler.\r\n\r\n\r\n","title":"Difference between PrintWriter and FileWriter class","body":"<p>From the source what PrintWriter does when you pass a File is to open it in a <em>buffered</em> way</p>\n\n<pre><code>public PrintWriter(File file) throws FileNotFoundException {\n    this(new BufferedWriter(new OutputStreamWriter(new FileOutputStream(file))),\n         false);\n}\n</code></pre>\n\n<p>if you pass it a FileWriter, it will open it, <em>without buffering</em></p>\n\n<pre><code>public FileWriter(File file) throws IOException {\n    super(new FileOutputStream(file));\n}\n</code></pre>\n\n<p>This means that the first example can be slightly more efficient.  However I would use the <code>File</code> without the <code>FileWriter</code> because to me it is simpler.</p>\n"},{"tags":[],"owner":{"account_id":2052678,"reputation":134073,"user_id":1831293,"accept_rate":91,"display_name":"Evgeniy Dorofeev"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1356689826,"creation_date":1356689826,"answer_id":14067982,"question_id":14067843,"body_markdown":"While FileWriter has only a basic set of methods, PrintWriter has a rich set of convinience methods, one of them is in your example - `PrintWriter.println`. \r\n\r\nYou should also keep in mind that &quot;methods in this class never throw I/O exceptions, although some of its constructors may. The client may inquire as to whether any errors have occurred by invoking checkError()&quot;\r\n\r\n","title":"Difference between PrintWriter and FileWriter class","body":"<p>While FileWriter has only a basic set of methods, PrintWriter has a rich set of convinience methods, one of them is in your example - <code>PrintWriter.println</code>. </p>\n\n<p>You should also keep in mind that \"methods in this class never throw I/O exceptions, although some of its constructors may. The client may inquire as to whether any errors have occurred by invoking checkError()\"</p>\n"},{"tags":[],"owner":{"account_id":21408140,"reputation":1,"user_id":15768956,"display_name":"Tpk Valentino"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1621177510,"creation_date":1621177510,"answer_id":67558227,"question_id":14067843,"body_markdown":"One of the most important differences between the two, is that with FileWriter you can append text to the end of an existing file, whereas with PrintWriter you cannot.","title":"Difference between PrintWriter and FileWriter class","body":"<p>One of the most important differences between the two, is that with FileWriter you can append text to the end of an existing file, whereas with PrintWriter you cannot.</p>\n"}],"owner":{"account_id":1506691,"reputation":1445,"user_id":1409913,"accept_rate":27,"display_name":"nakul"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":33321,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"accepted_answer_id":14067913,"answer_count":5,"score":11,"last_activity_date":1701094573,"creation_date":1356689170,"question_id":14067843,"body_markdown":"    try{\r\n\r\n        File file = new File(&quot;write.txt&quot;);\r\n        FileWriter writer = new FileWriter(file);\r\n\t\t\t\r\n        PrintWriter printWriter = new PrintWriter(writer);\r\n        printWriter.println(&quot;pqr&quot;);\r\n        printWriter.println(&quot;jkl&quot;);\r\n        printWriter.close();\r\n\t\t\t\r\n        PrintWriter printWriter = new PrintWriter(file);\r\n        printWriter.println(&quot;abc&quot;);\r\n        printWriter.println(&quot;xyz&quot;);\r\n        printWriter.close();\r\n    }\r\n\r\nI don&#39;t understand what is difference bet&#39;n these two way.\r\nIn which scenario i should use printWriter and fileWriter.","title":"Difference between PrintWriter and FileWriter class","body":"<pre><code>try{\n\n    File file = new File(\"write.txt\");\n    FileWriter writer = new FileWriter(file);\n\n    PrintWriter printWriter = new PrintWriter(writer);\n    printWriter.println(\"pqr\");\n    printWriter.println(\"jkl\");\n    printWriter.close();\n\n    PrintWriter printWriter = new PrintWriter(file);\n    printWriter.println(\"abc\");\n    printWriter.println(\"xyz\");\n    printWriter.close();\n}\n</code></pre>\n\n<p>I don't understand what is difference bet'n these two way.\nIn which scenario i should use printWriter and fileWriter.</p>\n"},{"tags":["java","methods","draw"],"comments":[{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":1,"creation_date":1701107058,"post_id":77557579,"comment_id":136731446,"body_markdown":"Add `System.out.println (` code at various key locations in your code. Have those line output where in the program they are along with values of variables that are key at those points. And / or use a debugger: Set breakpoints, and run the code (debugging mode). When the run hits a break point, check the values of variables. Run the code one-step-at-a-time while monitoring the values of variables and noting where the code goes.","body":"Add <code>System.out.println (</code> code at various key locations in your code. Have those line output where in the program they are along with values of variables that are key at those points. And / or use a debugger: Set breakpoints, and run the code (debugging mode). When the run hits a break point, check the values of variables. Run the code one-step-at-a-time while monitoring the values of variables and noting where the code goes."}],"owner":{"account_id":29599956,"reputation":1,"user_id":22685645,"display_name":"Christian"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1701094541,"creation_date":1701094541,"question_id":77557579,"body_markdown":"I&#39;m using StdDraw to create a snake program. When I run my program it jumps to the game over display without actually entering the game. I&#39;m sure there are quite a few things I have to fix, but please point me in the right direction\r\n\r\n\r\n```\r\n\r\nimport java.awt.event.KeyEvent;\r\nimport java.awt.Color;\r\nimport java.awt.Font;\r\nimport java.util.Random;\r\n\r\npublic final class Snake {\r\n   \r\n   // Enum for user input &amp; snake movement\r\n   enum Direction { UP, DOWN, LEFT, RIGHT }\r\n   private static Direction direction;\r\n   \r\n   // Declare game constants\r\n   private static int WIDTH = 800;\r\n   private static int HEIGHT = 800;\r\n   private static int UNIT_SIZE = 40;\r\n   private static int GAME_UNITS = (WIDTH * HEIGHT) / UNIT_SIZE;\r\n\r\n   // Grid for snake &amp; food coordinates\r\n   private static int[][] grid;          // Game board\r\n   private static int[] snakeX, snakeY;  // Arrays to store snake&#39;s body&#39;s coordinates\r\n   private static int foodX, foodY;      // Food&#39;s coordinates\r\n   \r\n   private static boolean gameOver;\r\n   private static int snakeLength;\r\n   private static int score;\r\n   private static Random random = new Random();\r\n   \r\n   // Main calls game methods\r\n   public static void main (final String[] args) { \r\n      StdDraw.enableDoubleBuffering();   // Smoother graphics\r\n      launchGame();                      // Launch game\r\n\r\n      // Loop to play game with functions\r\n      while (!gameOver) {\r\n         handleInput();                  // Controls\r\n         updateSnake();                  // Move snake\r\n         draw();                         // Draw game elements; snake, food, &amp; score\r\n         StdDraw.show();                 // Show graphics\r\n         StdDraw.pause (100);            // Pause to control game speed\r\n      }\r\n      \r\n      gameOverDisplay();                 // Game over display\r\n   }\r\n   \r\n   // Method initializes elements in game launch\r\n   private static void launchGame () {\r\n      // Create game window\r\n      StdDraw.setCanvasSize (WIDTH, HEIGHT);  // Canvas size\r\n      StdDraw.setXscale (0, WIDTH);           // X-axis scale\r\n      StdDraw.setYscale (0, HEIGHT);          // Y-axis scale\r\n\r\n      // Initialize game elements\r\n      direction = Direction.RIGHT;       // Default direction\r\n      gameOver = false;                  // Game over flag\r\n      snakeLength = 3;                   // Snake&#39;s initial length\r\n      score = 0;\r\n      \r\n      grid = new int[WIDTH / UNIT_SIZE][HEIGHT / UNIT_SIZE];\r\n      snakeX = new int[GAME_UNITS];      // Store x position of snake&#39;s body\r\n      snakeY = new int[GAME_UNITS];             // Store y position of snake&#39;s body\r\n      \r\n      // Initialize snake&#39;s position\r\n      for (int i = 0; i &lt; snakeLength; i++) {\r\n         // Place snake in the middle of the board\r\n         snakeX[i] = GAME_UNITS / 2 - i;   // Snake&#39;s body blocks\r\n         snakeY[i] = GAME_UNITS / 2;  \r\n      }\r\n      \r\n      spawnFood();\r\n   }\r\n   \r\n   // Method handles user input &amp; direction\r\n   private static void handleInput () {\r\n      // Check for arrow key presses\r\n      if (StdDraw.isKeyPressed (KeyEvent.VK_UP) &amp;&amp; direction != Direction.DOWN) {\r\n         direction = Direction.UP;\r\n      } else if (StdDraw.isKeyPressed (KeyEvent.VK_DOWN) &amp;&amp; direction != Direction.UP) {\r\n         direction = Direction.DOWN;\r\n      } else if (StdDraw.isKeyPressed (KeyEvent.VK_LEFT) &amp;&amp; direction != Direction.RIGHT) {\r\n         direction = Direction.LEFT;\r\n      } else if (StdDraw.isKeyPressed (KeyEvent.VK_RIGHT) &amp;&amp; direction != Direction.LEFT) {\r\n         direction = Direction.RIGHT;\r\n      }\r\n   }\r\n   \r\n   // Method updates game elements\r\n   private static void updateSnake () {\r\n      // Move snake&#39;s body\r\n      for (int i = snakeLength - 1; i &gt; 0; i--) {\r\n         // Block updates to next block&#39;s last position\r\n         snakeX[i] = snakeX[i - 1];\r\n         snakeY[i] = snakeY[i - 1];\r\n      }\r\n\r\n      // Move snake&#39;s head\r\n      if (direction == Direction.UP) {\r\n         snakeY[0]++;\r\n      } else if (direction == Direction.DOWN) {\r\n         snakeY[0]--;\r\n      } else if (direction == Direction.LEFT) {\r\n         snakeX[0]--;\r\n      } else if (direction == Direction.RIGHT) {\r\n         snakeX[0]++;\r\n      }  \r\n      \r\n      // Check for collisions\r\n      checkCollisions();\r\n      \r\n      // Check if food is eaten\r\n      if (snakeX[0] == foodX &amp;&amp; snakeY[0] == foodY) {\r\n         snakeLength++;\r\n         score++;\r\n         spawnFood();\r\n      }\r\n   }\r\n   \r\n   private static void checkCollisions () {\r\n      // Check if snake collides with walls\r\n      if (snakeX[0] &lt; 0 || snakeX[0] &gt;= WIDTH || snakeY[0] &lt; 0 || snakeY[0] &gt;= HEIGHT) {\r\n         gameOver = true;\r\n      }\r\n      \r\n      // Check if snake collides with itself\r\n      for (int i = 1; i &lt; snakeLength; i++) {\r\n         if (snakeX[0] == snakeX[i] || snakeY[0] == snakeY[i]) {\r\n            gameOver = true;\r\n         }\r\n      }\r\n   }\r\n   \r\n   private static void spawnFood () {\r\n      foodX = random.nextInt (WIDTH / UNIT_SIZE);\r\n      foodY = random.nextInt (HEIGHT / UNIT_SIZE);\r\n   }\r\n   \r\n   private static void draw () {\r\n      StdDraw.clear();\r\n      \r\n      // Draw snake\r\n      StdDraw.setPenColor (Color.GREEN);\r\n      for (int i = 0; i &lt; snakeLength; i++) {\r\n         StdDraw.filledSquare (snakeX[i] * UNIT_SIZE + UNIT_SIZE / 2.0,\r\n               snakeY[i] * UNIT_SIZE + UNIT_SIZE / 2.0, UNIT_SIZE / 2.0);\r\n      }      \r\n      \r\n      // Draw food\r\n      StdDraw.setPenColor (Color.RED); \r\n      StdDraw.filledSquare (foodX * UNIT_SIZE + UNIT_SIZE / 2.0,\r\n            foodY * UNIT_SIZE + UNIT_SIZE / 2.0, UNIT_SIZE / 2.0);      \r\n      \r\n      // Display score\r\n      StdDraw.setPenColor (Color.WHITE);\r\n      StdDraw.setFont (new Font (&quot;Arial&quot;, Font.BOLD, 20));\r\n      StdDraw.text (700, 780, &quot;Score: &quot; + score);      \r\n   }\r\n   \r\n   // Game over display\r\n   private static void gameOverDisplay () {\r\n      StdDraw.clear();\r\n\r\n      StdDraw.setPenColor (Color.BLACK);\r\n      StdDraw.setFont (new Font (&quot;Arial&quot;, Font.BOLD, 40));\r\n      StdDraw.text (400, 400, &quot;Game Over!&quot;);\r\n      StdDraw.text (400, 350, &quot;Score: &quot; + score);\r\n      StdDraw.setFont(new Font (&quot;Arial&quot;, Font.PLAIN, 20));\r\n      StdDraw.text (400, 300, &quot;Press Enter to Play Again&quot;);\r\n      \r\n      StdDraw.show();\r\n      StdDraw.pause (100);\r\n      \r\n      if (StdDraw.isKeyPressed (KeyEvent.VK_ENTER)) {\r\n         StdDraw.clear();\r\n         launchGame();\r\n      }\r\n   }\r\n}\r\n```\r\n\r\n\r\nThis is what I have so far. It&#39;s a work in progress but I want to start with actually getting my snake moving. Thank you","title":"I&#39;m unsure of how I should be calling my methods to draw my snake with StdDraw","body":"<p>I'm using StdDraw to create a snake program. When I run my program it jumps to the game over display without actually entering the game. I'm sure there are quite a few things I have to fix, but please point me in the right direction</p>\n<pre><code>\nimport java.awt.event.KeyEvent;\nimport java.awt.Color;\nimport java.awt.Font;\nimport java.util.Random;\n\npublic final class Snake {\n   \n   // Enum for user input &amp; snake movement\n   enum Direction { UP, DOWN, LEFT, RIGHT }\n   private static Direction direction;\n   \n   // Declare game constants\n   private static int WIDTH = 800;\n   private static int HEIGHT = 800;\n   private static int UNIT_SIZE = 40;\n   private static int GAME_UNITS = (WIDTH * HEIGHT) / UNIT_SIZE;\n\n   // Grid for snake &amp; food coordinates\n   private static int[][] grid;          // Game board\n   private static int[] snakeX, snakeY;  // Arrays to store snake's body's coordinates\n   private static int foodX, foodY;      // Food's coordinates\n   \n   private static boolean gameOver;\n   private static int snakeLength;\n   private static int score;\n   private static Random random = new Random();\n   \n   // Main calls game methods\n   public static void main (final String[] args) { \n      StdDraw.enableDoubleBuffering();   // Smoother graphics\n      launchGame();                      // Launch game\n\n      // Loop to play game with functions\n      while (!gameOver) {\n         handleInput();                  // Controls\n         updateSnake();                  // Move snake\n         draw();                         // Draw game elements; snake, food, &amp; score\n         StdDraw.show();                 // Show graphics\n         StdDraw.pause (100);            // Pause to control game speed\n      }\n      \n      gameOverDisplay();                 // Game over display\n   }\n   \n   // Method initializes elements in game launch\n   private static void launchGame () {\n      // Create game window\n      StdDraw.setCanvasSize (WIDTH, HEIGHT);  // Canvas size\n      StdDraw.setXscale (0, WIDTH);           // X-axis scale\n      StdDraw.setYscale (0, HEIGHT);          // Y-axis scale\n\n      // Initialize game elements\n      direction = Direction.RIGHT;       // Default direction\n      gameOver = false;                  // Game over flag\n      snakeLength = 3;                   // Snake's initial length\n      score = 0;\n      \n      grid = new int[WIDTH / UNIT_SIZE][HEIGHT / UNIT_SIZE];\n      snakeX = new int[GAME_UNITS];      // Store x position of snake's body\n      snakeY = new int[GAME_UNITS];             // Store y position of snake's body\n      \n      // Initialize snake's position\n      for (int i = 0; i &lt; snakeLength; i++) {\n         // Place snake in the middle of the board\n         snakeX[i] = GAME_UNITS / 2 - i;   // Snake's body blocks\n         snakeY[i] = GAME_UNITS / 2;  \n      }\n      \n      spawnFood();\n   }\n   \n   // Method handles user input &amp; direction\n   private static void handleInput () {\n      // Check for arrow key presses\n      if (StdDraw.isKeyPressed (KeyEvent.VK_UP) &amp;&amp; direction != Direction.DOWN) {\n         direction = Direction.UP;\n      } else if (StdDraw.isKeyPressed (KeyEvent.VK_DOWN) &amp;&amp; direction != Direction.UP) {\n         direction = Direction.DOWN;\n      } else if (StdDraw.isKeyPressed (KeyEvent.VK_LEFT) &amp;&amp; direction != Direction.RIGHT) {\n         direction = Direction.LEFT;\n      } else if (StdDraw.isKeyPressed (KeyEvent.VK_RIGHT) &amp;&amp; direction != Direction.LEFT) {\n         direction = Direction.RIGHT;\n      }\n   }\n   \n   // Method updates game elements\n   private static void updateSnake () {\n      // Move snake's body\n      for (int i = snakeLength - 1; i &gt; 0; i--) {\n         // Block updates to next block's last position\n         snakeX[i] = snakeX[i - 1];\n         snakeY[i] = snakeY[i - 1];\n      }\n\n      // Move snake's head\n      if (direction == Direction.UP) {\n         snakeY[0]++;\n      } else if (direction == Direction.DOWN) {\n         snakeY[0]--;\n      } else if (direction == Direction.LEFT) {\n         snakeX[0]--;\n      } else if (direction == Direction.RIGHT) {\n         snakeX[0]++;\n      }  \n      \n      // Check for collisions\n      checkCollisions();\n      \n      // Check if food is eaten\n      if (snakeX[0] == foodX &amp;&amp; snakeY[0] == foodY) {\n         snakeLength++;\n         score++;\n         spawnFood();\n      }\n   }\n   \n   private static void checkCollisions () {\n      // Check if snake collides with walls\n      if (snakeX[0] &lt; 0 || snakeX[0] &gt;= WIDTH || snakeY[0] &lt; 0 || snakeY[0] &gt;= HEIGHT) {\n         gameOver = true;\n      }\n      \n      // Check if snake collides with itself\n      for (int i = 1; i &lt; snakeLength; i++) {\n         if (snakeX[0] == snakeX[i] || snakeY[0] == snakeY[i]) {\n            gameOver = true;\n         }\n      }\n   }\n   \n   private static void spawnFood () {\n      foodX = random.nextInt (WIDTH / UNIT_SIZE);\n      foodY = random.nextInt (HEIGHT / UNIT_SIZE);\n   }\n   \n   private static void draw () {\n      StdDraw.clear();\n      \n      // Draw snake\n      StdDraw.setPenColor (Color.GREEN);\n      for (int i = 0; i &lt; snakeLength; i++) {\n         StdDraw.filledSquare (snakeX[i] * UNIT_SIZE + UNIT_SIZE / 2.0,\n               snakeY[i] * UNIT_SIZE + UNIT_SIZE / 2.0, UNIT_SIZE / 2.0);\n      }      \n      \n      // Draw food\n      StdDraw.setPenColor (Color.RED); \n      StdDraw.filledSquare (foodX * UNIT_SIZE + UNIT_SIZE / 2.0,\n            foodY * UNIT_SIZE + UNIT_SIZE / 2.0, UNIT_SIZE / 2.0);      \n      \n      // Display score\n      StdDraw.setPenColor (Color.WHITE);\n      StdDraw.setFont (new Font (&quot;Arial&quot;, Font.BOLD, 20));\n      StdDraw.text (700, 780, &quot;Score: &quot; + score);      \n   }\n   \n   // Game over display\n   private static void gameOverDisplay () {\n      StdDraw.clear();\n\n      StdDraw.setPenColor (Color.BLACK);\n      StdDraw.setFont (new Font (&quot;Arial&quot;, Font.BOLD, 40));\n      StdDraw.text (400, 400, &quot;Game Over!&quot;);\n      StdDraw.text (400, 350, &quot;Score: &quot; + score);\n      StdDraw.setFont(new Font (&quot;Arial&quot;, Font.PLAIN, 20));\n      StdDraw.text (400, 300, &quot;Press Enter to Play Again&quot;);\n      \n      StdDraw.show();\n      StdDraw.pause (100);\n      \n      if (StdDraw.isKeyPressed (KeyEvent.VK_ENTER)) {\n         StdDraw.clear();\n         launchGame();\n      }\n   }\n}\n</code></pre>\n<p>This is what I have so far. It's a work in progress but I want to start with actually getting my snake moving. Thank you</p>\n"},{"tags":["java","spring","http-headers"],"comments":[{"owner":{"account_id":2064278,"reputation":13118,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1574466268,"post_id":59002991,"comment_id":104256596,"body_markdown":"post your code, what headers, and how far you have gotten.","body":"post your code, what headers, and how far you have gotten."}],"answers":[{"tags":[],"owner":{"account_id":8637072,"reputation":3301,"user_id":8112217,"accept_rate":91,"display_name":"tsarenkotxt"},"down_vote_count":3,"up_vote_count":2,"is_accepted":true,"score":-1,"last_activity_date":1574471790,"creation_date":1574471790,"answer_id":59003716,"question_id":59002991,"body_markdown":"[HttpHeaders][1] implements [MultiValueMap][2], you can create a new mutable `HttpHeaders ` including `ReadOnlyHttpHeaders` and modify:\r\n```java\r\n\t\tHttpHeaders readOnlyHttpHeaders = ...\r\n\t\t\r\n\t\tHttpHeaders mutableHttpHeaders = new HttpHeaders(readOnlyHttpHeaders);\r\n\t\tmutableHttpHeaders.put(&quot;foo&quot;, List.of(&quot;bar&quot;));\r\n```\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/http/HttpHeaders.html\r\n  [2]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/util/MultiValueMap.html","title":"How do I modify a response&#39;s ReadOnlyHttpHeaders in Spring?","body":"<p><a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/http/HttpHeaders.html\" rel=\"nofollow noreferrer\">HttpHeaders</a> implements <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/util/MultiValueMap.html\" rel=\"nofollow noreferrer\">MultiValueMap</a>, you can create a new mutable <code>HttpHeaders</code> including <code>ReadOnlyHttpHeaders</code> and modify:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>        HttpHeaders readOnlyHttpHeaders = ...\n\n        HttpHeaders mutableHttpHeaders = new HttpHeaders(readOnlyHttpHeaders);\n        mutableHttpHeaders.put(\"foo\", List.of(\"bar\"));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16398995,"reputation":775,"user_id":11845598,"display_name":"ExploreEv"},"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1583984973,"creation_date":1583984973,"answer_id":60647375,"question_id":59002991,"body_markdown":"In case of above answer did not work for you, try below \r\n```\r\nHttpHeaders httpHeaders = HttpHeaders.writableHttpHeaders(httpEntity.getHeaders());\r\n```","title":"How do I modify a response&#39;s ReadOnlyHttpHeaders in Spring?","body":"<p>In case of above answer did not work for you, try below </p>\n\n<pre><code>HttpHeaders httpHeaders = HttpHeaders.writableHttpHeaders(httpEntity.getHeaders());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1921531,"reputation":16820,"user_id":1732936,"accept_rate":66,"display_name":"Xelian"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1607945303,"creation_date":1607945303,"answer_id":65288233,"question_id":59002991,"body_markdown":"    ServerHttpRequest request = exchange.getRequest().mutate().header(&quot;key&quot;, new String[] {&quot;value&quot;}).build();\r\n    \r\n    ServerWebExchange mutatedExchange = exchange.mutate().request(request).build();\r\n\r\nAnd the mutatedExchange  will have a header with the new key: value pair.","title":"How do I modify a response&#39;s ReadOnlyHttpHeaders in Spring?","body":"<pre><code>ServerHttpRequest request = exchange.getRequest().mutate().header(&quot;key&quot;, new String[] {&quot;value&quot;}).build();\n\nServerWebExchange mutatedExchange = exchange.mutate().request(request).build();\n</code></pre>\n<p>And the mutatedExchange  will have a header with the new key: value pair.</p>\n"},{"tags":[],"owner":{"account_id":7919511,"reputation":56,"user_id":5980949,"display_name":"Artem Yemelin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701094534,"creation_date":1701094534,"answer_id":77557577,"question_id":59002991,"body_markdown":"Make writeable header instance and use it:\r\n```\r\nHttpHeaders writableHeaders = HttpHeaders.writableHttpHeaders(headers);\r\nwritableHeaders.put(authHeader, List.of(OBFUSCATED_VALUE));\r\n```","title":"How do I modify a response&#39;s ReadOnlyHttpHeaders in Spring?","body":"<p>Make writeable header instance and use it:</p>\n<pre><code>HttpHeaders writableHeaders = HttpHeaders.writableHttpHeaders(headers);\nwritableHeaders.put(authHeader, List.of(OBFUSCATED_VALUE));\n</code></pre>\n"}],"owner":{"account_id":5201109,"reputation":145,"user_id":4160439,"display_name":"Jumpman"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5937,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":59003716,"answer_count":4,"score":5,"last_activity_date":1701094534,"creation_date":1574464510,"question_id":59002991,"body_markdown":"RestTemplate.exchange is returning a ResponseEntity with ReadOnlyHttpHeaders. I want to add/modify these headers but since it is read only how do I do that? ","title":"How do I modify a response&#39;s ReadOnlyHttpHeaders in Spring?","body":"<p>RestTemplate.exchange is returning a ResponseEntity with ReadOnlyHttpHeaders. I want to add/modify these headers but since it is read only how do I do that? </p>\n"},{"tags":["java","compiler-errors","lombok"],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89758,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1701092300,"creation_date":1701092300,"answer_id":77557349,"question_id":77556592,"body_markdown":"As the docs of `SuperBuilder` explain, you can&#39;t handwrite parts of the builder. It&#39;s way too complex, which is why you can&#39;t do it.\r\n\r\nif you absolutely insist, remove the handwritten `EventFinderBuilder`, throw the result through delombok (`java -jar lombok.jar delombok`), study that _very_ carefully, and then handroll things. And be aware it&#39;s not recommended. In the end wanting the complications of builders that can build across a type hierarchy with custom bells and whistles exceeds the lombok target of &quot;make boilerplate less annoying&quot; because it&#39;s no longer boilerplate at that point.\r\n","title":"Lombok not compiling an abstract generic superclass","body":"<p>As the docs of <code>SuperBuilder</code> explain, you can't handwrite parts of the builder. It's way too complex, which is why you can't do it.</p>\n<p>if you absolutely insist, remove the handwritten <code>EventFinderBuilder</code>, throw the result through delombok (<code>java -jar lombok.jar delombok</code>), study that <em>very</em> carefully, and then handroll things. And be aware it's not recommended. In the end wanting the complications of builders that can build across a type hierarchy with custom bells and whistles exceeds the lombok target of &quot;make boilerplate less annoying&quot; because it's no longer boilerplate at that point.</p>\n"},{"tags":[],"owner":{"account_id":6651855,"reputation":224820,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1701094398,"creation_date":1701094398,"answer_id":77557566,"question_id":77556592,"body_markdown":"When your class has generic type parameters, The builders that lombok generates will also have those type parameters. The builders are static classes, and so the `EventType` type parameter of `EventFinder` is not in scope in the builder classes.\r\n\r\nIf you want to write your own implementation for a part of the code that Lombok generates, the signature has to match exactly. You should declare the `EventType` type parameter too.\r\n\r\n```\r\npublic static abstract class EventFinderBuilder&lt;\r\n    EventType,\r\n    C extends EventFinder&lt;EventType&gt;, \r\n    B extends EventFinderBuilder&lt;EventType, C, B&gt;\r\n&gt; { ... }\r\n```\r\n\r\nBut as rzwitserloot said in their answer. This kind of defeats the purpose of Lombok. If you are adding a log for every field in your class, you might as well handwrite the entire builder yourself.","title":"Lombok not compiling an abstract generic superclass","body":"<p>When your class has generic type parameters, The builders that lombok generates will also have those type parameters. The builders are static classes, and so the <code>EventType</code> type parameter of <code>EventFinder</code> is not in scope in the builder classes.</p>\n<p>If you want to write your own implementation for a part of the code that Lombok generates, the signature has to match exactly. You should declare the <code>EventType</code> type parameter too.</p>\n<pre><code>public static abstract class EventFinderBuilder&lt;\n    EventType,\n    C extends EventFinder&lt;EventType&gt;, \n    B extends EventFinderBuilder&lt;EventType, C, B&gt;\n&gt; { ... }\n</code></pre>\n<p>But as rzwitserloot said in their answer. This kind of defeats the purpose of Lombok. If you are adding a log for every field in your class, you might as well handwrite the entire builder yourself.</p>\n"}],"owner":{"account_id":16283593,"reputation":241,"user_id":11758880,"display_name":"Kfir Doron"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77557566,"answer_count":2,"score":1,"last_activity_date":1701094398,"creation_date":1701085112,"question_id":77556592,"body_markdown":"I have this class:\r\n```java\r\n@SuperBuilder\r\npublic abstract class EventFinder&lt;EventType&gt; {\r\n    private final String accountId;\r\n\r\npublic abstract List&lt;EventType&gt; find();\r\n\r\n    public static abstract class EventFinderBuilder&lt;C extends EventFinder&lt;?&gt;, B extends EventFinderBuilder&lt;C, B&gt;&gt; {\r\n        public B accountId(String accountId) {\r\n            log.trace(&quot;Account ID: %1s&quot;.formatted(accountId));\r\n            this.accountId = accountId;\r\n            return self();\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nBeen trying to make `@SuperBuilder` work with it but to no avail, \r\nI&#39;m overriding some of the builder methods to include logs, which works great, \r\nCompiling outputs:\r\n```\r\nerror: wrong number of type arguments; required 2\r\n@SuperBuilder\r\n^\r\n```\r\n\r\n\r\nI can do it just fine by removing the abstract method from the class and simply implementing it in the subclasses, but I would like to declare it here as this is the parent.\r\n\r\n\r\n\r\nTried to play with the @SuperBuilder parameters, nothing helps, tried to remove the abstract method, which worked, but did not solve the issue.","title":"Lombok not compiling an abstract generic superclass","body":"<p>I have this class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@SuperBuilder\npublic abstract class EventFinder&lt;EventType&gt; {\n    private final String accountId;\n\npublic abstract List&lt;EventType&gt; find();\n\n    public static abstract class EventFinderBuilder&lt;C extends EventFinder&lt;?&gt;, B extends EventFinderBuilder&lt;C, B&gt;&gt; {\n        public B accountId(String accountId) {\n            log.trace(&quot;Account ID: %1s&quot;.formatted(accountId));\n            this.accountId = accountId;\n            return self();\n        }\n    }\n}\n</code></pre>\n<p>Been trying to make <code>@SuperBuilder</code> work with it but to no avail,\nI'm overriding some of the builder methods to include logs, which works great,\nCompiling outputs:</p>\n<pre><code>error: wrong number of type arguments; required 2\n@SuperBuilder\n^\n</code></pre>\n<p>I can do it just fine by removing the abstract method from the class and simply implementing it in the subclasses, but I would like to declare it here as this is the parent.</p>\n<p>Tried to play with the @SuperBuilder parameters, nothing helps, tried to remove the abstract method, which worked, but did not solve the issue.</p>\n"},{"tags":["java","performance","hibernate","hazelcast","second-level-cache"],"comments":[{"owner":{"account_id":5639587,"reputation":412,"user_id":4463900,"display_name":"Or&#231;un &#199;olak"},"score":0,"creation_date":1701242782,"post_id":77557334,"comment_id":136749928,"body_markdown":"You are seeing a jump from 0.000311366 seconds to 0.001093001 seconds, but the jump is insignificant.  With two members, half of the keys will be distributed to 2nd member, this adds the serialization and network overhead. Also in embedded mode HZ is running within the JVM of your application, using its resources. This means that anything happening in your app can affect HZ","body":"You are seeing a jump from 0.000311366 seconds to 0.001093001 seconds, but the jump is insignificant.  With two members, half of the keys will be distributed to 2nd member, this adds the serialization and network overhead. Also in embedded mode HZ is running within the JVM of your application, using its resources. This means that anything happening in your app can affect HZ"}],"answers":[{"tags":[],"owner":{"account_id":14230921,"reputation":836,"user_id":10280183,"display_name":"Mike Yawn"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1701093667,"creation_date":1701093667,"answer_id":77557475,"question_id":77557334,"body_markdown":"As a distributed cache, once Hazelcast grows beyond a single node you will start to see network performance impact the time needed for gets and puts, and this will always result in performance less than what can be achieved on a purely local (single node) solution. \r\n\r\nThere are configuration options that can improve the performance, but at the cost of less consistency/accuracy.\r\n\r\nWhen reading, a single-node cluster will always find the record locally (if it exists).  In a two-node cluster, we expect that 50% of gets will be satisfied locally, and 50% will require a network call.  As clusters get larger, an even larger percentage of gets will be remote.  So the performance degradation you see is a natural consequence of distributing data across the network.  With an embedded Hazelcast configuration, you can set the &#39;read-from-backups&#39; flag true, and this will allow a higher percentage of calls to be resolved locally - but some of those reads may be stale values if the primary copy of the data has been modified and the modification has not yet been propagated to the backup.  \r\n\r\nWhen writing, on a single node configuration Hazelcast writes the value and returns to the caller.  On a multi-node configuration, Hazelcast will write first to the primary node, and then to the configured number of synchronous backup nodes, before returning to the caller - so writes will take longer as there will always be a backup copy to write (assuming default configuration).  You can improve performance by switching from synchronous to asynchronous backups, or by turning off backups altogether, but each of these changes increases the chance of data loss in the event of a node outage.  If all cached data is known to be safely stored in a system of record where it can be reloaded after a failure, then this may be an acceptable risk.","title":"Hazelcast + Hibernate query slowdown when using second level cache","body":"<p>As a distributed cache, once Hazelcast grows beyond a single node you will start to see network performance impact the time needed for gets and puts, and this will always result in performance less than what can be achieved on a purely local (single node) solution.</p>\n<p>There are configuration options that can improve the performance, but at the cost of less consistency/accuracy.</p>\n<p>When reading, a single-node cluster will always find the record locally (if it exists).  In a two-node cluster, we expect that 50% of gets will be satisfied locally, and 50% will require a network call.  As clusters get larger, an even larger percentage of gets will be remote.  So the performance degradation you see is a natural consequence of distributing data across the network.  With an embedded Hazelcast configuration, you can set the 'read-from-backups' flag true, and this will allow a higher percentage of calls to be resolved locally - but some of those reads may be stale values if the primary copy of the data has been modified and the modification has not yet been propagated to the backup.</p>\n<p>When writing, on a single node configuration Hazelcast writes the value and returns to the caller.  On a multi-node configuration, Hazelcast will write first to the primary node, and then to the configured number of synchronous backup nodes, before returning to the caller - so writes will take longer as there will always be a backup copy to write (assuming default configuration).  You can improve performance by switching from synchronous to asynchronous backups, or by turning off backups altogether, but each of these changes increases the chance of data loss in the event of a node outage.  If all cached data is known to be safely stored in a system of record where it can be reloaded after a failure, then this may be an acceptable risk.</p>\n"}],"owner":{"account_id":4013265,"reputation":309,"user_id":3306106,"display_name":"BigMichi1"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77557475,"answer_count":1,"score":0,"last_activity_date":1701093667,"creation_date":1701092206,"question_id":77557334,"body_markdown":"we are currently using in Hibernate 6.3.1 as a second level cache Hazelcast 5.3.6.\r\n\r\nwe are experiencing a significant slow down in performance when a second node joins the cluster. currently Hazelcast is configured in embedded mode (`hazelcast.jcache.provider.type=member`) and in hibernate config we have `hibernate.cache.region.factory_class=jcache`, `hibernate.cache.use_second_level_cache=true` and `hibernate.cache.use_query_cache=true`\r\n\r\nHazelcast is configured in this way:\r\n\r\n```xml\r\n    &lt;advanced-network enabled=&quot;true&quot;&gt;\r\n        &lt;join&gt;\r\n            &lt;auto-detection enabled=&quot;false&quot;/&gt;\r\n            &lt;multicast enabled=&quot;true&quot;&gt;\r\n                &lt;multicast-group&gt;224.2.2.3&lt;/multicast-group&gt;\r\n                &lt;multicast-port&gt;54327&lt;/multicast-port&gt;\r\n                &lt;multicast-time-to-live&gt;32&lt;/multicast-time-to-live&gt;\r\n                &lt;multicast-timeout-seconds&gt;5&lt;/multicast-timeout-seconds&gt;\r\n            &lt;/multicast&gt;\r\n        &lt;/join&gt;\r\n\r\n        &lt;member-server-socket-endpoint-config&gt;\r\n            &lt;port&gt;5701&lt;/port&gt;\r\n            &lt;socket-options&gt;\r\n                &lt;keep-alive&gt;true&lt;/keep-alive&gt;\r\n                &lt;tcp-no-delay&gt;true&lt;/tcp-no-delay&gt;\r\n                &lt;buffer-direct&gt;true&lt;/buffer-direct&gt;\r\n            &lt;/socket-options&gt;\r\n        &lt;/member-server-socket-endpoint-config&gt;\r\n        &lt;client-server-socket-endpoint-config&gt;\r\n            &lt;port&gt;9090&lt;/port&gt;\r\n            &lt;socket-options&gt;\r\n                &lt;keep-alive&gt;true&lt;/keep-alive&gt;\r\n                &lt;tcp-no-delay&gt;true&lt;/tcp-no-delay&gt;\r\n                &lt;buffer-direct&gt;true&lt;/buffer-direct&gt;\r\n            &lt;/socket-options&gt;\r\n        &lt;/client-server-socket-endpoint-config&gt;\r\n    &lt;/advanced-network&gt;\r\n\r\n    &lt;cache name=&quot;*&quot;&gt;\r\n        &lt;statistics-enabled&gt;false&lt;/statistics-enabled&gt;\r\n        &lt;management-enabled&gt;false&lt;/management-enabled&gt;\r\n        &lt;in-memory-format&gt;BINARY&lt;/in-memory-format&gt;\r\n        &lt;expiry-policy-factory&gt;\r\n            &lt;timed-expiry-policy-factory expiry-policy-type=&quot;ETERNAL&quot;/&gt;\r\n        &lt;/expiry-policy-factory&gt;\r\n        &lt;eviction eviction-policy=&quot;LRU&quot; max-size-policy=&quot;ENTRY_COUNT&quot; size=&quot;10000&quot;/&gt;\r\n    &lt;/cache&gt;\r\n```\r\n\r\nwhen only one server is started we see in the Hibernate statistics output for one particular query:\r\n\r\n```\r\no.h.e.i.StatisticalLoggingSessionEventListener - Session Metrics {\r\n    13365 nanoseconds spent acquiring 3 JDBC connections;\r\n    9838 nanoseconds spent releasing 3 JDBC connections;\r\n    80964 nanoseconds spent preparing 3 JDBC statements;\r\n    1092652 nanoseconds spent executing 3 JDBC statements;\r\n    0 nanoseconds spent executing 0 JDBC batches;\r\n    311366 nanoseconds spent performing 2 L2C puts;\r\n    6779427 nanoseconds spent performing 45 L2C hits;\r\n    181972 nanoseconds spent performing 2 L2C misses;\r\n    0 nanoseconds spent executing 0 flushes (flushing a total of 0 entities and 0 collections);\r\n    0 nanoseconds spent executing 0 partial-flushes (flushing a total of 0 entities and 0 collections)\r\n}\r\n```\r\n\r\nwhen second server joins the same query produces:\r\n\r\n```\r\nINFO  o.h.e.i.StatisticalLoggingSessionEventListener - Session Metrics {\r\n    11922 nanoseconds spent acquiring 3 JDBC connections;\r\n    7064 nanoseconds spent releasing 3 JDBC connections;\r\n    69741 nanoseconds spent preparing 3 JDBC statements;\r\n    1039659 nanoseconds spent executing 3 JDBC statements;\r\n    0 nanoseconds spent executing 0 JDBC batches;\r\n    1093001 nanoseconds spent performing 2 L2C puts;\r\n    10632154 nanoseconds spent performing 45 L2C hits;\r\n    126368 nanoseconds spent performing 2 L2C misses;\r\n    0 nanoseconds spent executing 0 flushes (flushing a total of 0 entities and 0 collections);\r\n    0 nanoseconds spent executing 0 partial-flushes (flushing a total of 0 entities and 0 collections)\r\n}\r\n```\r\n\r\nL2C puts and hits taking 2 up to 3 times longer. As this is not the only query the time accumulates more and more and is then also noticeable in the UI.\r\n\r\nAny suggestion how to speed up the L2C hits and puts?","title":"Hazelcast + Hibernate query slowdown when using second level cache","body":"<p>we are currently using in Hibernate 6.3.1 as a second level cache Hazelcast 5.3.6.</p>\n<p>we are experiencing a significant slow down in performance when a second node joins the cluster. currently Hazelcast is configured in embedded mode (<code>hazelcast.jcache.provider.type=member</code>) and in hibernate config we have <code>hibernate.cache.region.factory_class=jcache</code>, <code>hibernate.cache.use_second_level_cache=true</code> and <code>hibernate.cache.use_query_cache=true</code></p>\n<p>Hazelcast is configured in this way:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>    &lt;advanced-network enabled=&quot;true&quot;&gt;\n        &lt;join&gt;\n            &lt;auto-detection enabled=&quot;false&quot;/&gt;\n            &lt;multicast enabled=&quot;true&quot;&gt;\n                &lt;multicast-group&gt;224.2.2.3&lt;/multicast-group&gt;\n                &lt;multicast-port&gt;54327&lt;/multicast-port&gt;\n                &lt;multicast-time-to-live&gt;32&lt;/multicast-time-to-live&gt;\n                &lt;multicast-timeout-seconds&gt;5&lt;/multicast-timeout-seconds&gt;\n            &lt;/multicast&gt;\n        &lt;/join&gt;\n\n        &lt;member-server-socket-endpoint-config&gt;\n            &lt;port&gt;5701&lt;/port&gt;\n            &lt;socket-options&gt;\n                &lt;keep-alive&gt;true&lt;/keep-alive&gt;\n                &lt;tcp-no-delay&gt;true&lt;/tcp-no-delay&gt;\n                &lt;buffer-direct&gt;true&lt;/buffer-direct&gt;\n            &lt;/socket-options&gt;\n        &lt;/member-server-socket-endpoint-config&gt;\n        &lt;client-server-socket-endpoint-config&gt;\n            &lt;port&gt;9090&lt;/port&gt;\n            &lt;socket-options&gt;\n                &lt;keep-alive&gt;true&lt;/keep-alive&gt;\n                &lt;tcp-no-delay&gt;true&lt;/tcp-no-delay&gt;\n                &lt;buffer-direct&gt;true&lt;/buffer-direct&gt;\n            &lt;/socket-options&gt;\n        &lt;/client-server-socket-endpoint-config&gt;\n    &lt;/advanced-network&gt;\n\n    &lt;cache name=&quot;*&quot;&gt;\n        &lt;statistics-enabled&gt;false&lt;/statistics-enabled&gt;\n        &lt;management-enabled&gt;false&lt;/management-enabled&gt;\n        &lt;in-memory-format&gt;BINARY&lt;/in-memory-format&gt;\n        &lt;expiry-policy-factory&gt;\n            &lt;timed-expiry-policy-factory expiry-policy-type=&quot;ETERNAL&quot;/&gt;\n        &lt;/expiry-policy-factory&gt;\n        &lt;eviction eviction-policy=&quot;LRU&quot; max-size-policy=&quot;ENTRY_COUNT&quot; size=&quot;10000&quot;/&gt;\n    &lt;/cache&gt;\n</code></pre>\n<p>when only one server is started we see in the Hibernate statistics output for one particular query:</p>\n<pre><code>o.h.e.i.StatisticalLoggingSessionEventListener - Session Metrics {\n    13365 nanoseconds spent acquiring 3 JDBC connections;\n    9838 nanoseconds spent releasing 3 JDBC connections;\n    80964 nanoseconds spent preparing 3 JDBC statements;\n    1092652 nanoseconds spent executing 3 JDBC statements;\n    0 nanoseconds spent executing 0 JDBC batches;\n    311366 nanoseconds spent performing 2 L2C puts;\n    6779427 nanoseconds spent performing 45 L2C hits;\n    181972 nanoseconds spent performing 2 L2C misses;\n    0 nanoseconds spent executing 0 flushes (flushing a total of 0 entities and 0 collections);\n    0 nanoseconds spent executing 0 partial-flushes (flushing a total of 0 entities and 0 collections)\n}\n</code></pre>\n<p>when second server joins the same query produces:</p>\n<pre><code>INFO  o.h.e.i.StatisticalLoggingSessionEventListener - Session Metrics {\n    11922 nanoseconds spent acquiring 3 JDBC connections;\n    7064 nanoseconds spent releasing 3 JDBC connections;\n    69741 nanoseconds spent preparing 3 JDBC statements;\n    1039659 nanoseconds spent executing 3 JDBC statements;\n    0 nanoseconds spent executing 0 JDBC batches;\n    1093001 nanoseconds spent performing 2 L2C puts;\n    10632154 nanoseconds spent performing 45 L2C hits;\n    126368 nanoseconds spent performing 2 L2C misses;\n    0 nanoseconds spent executing 0 flushes (flushing a total of 0 entities and 0 collections);\n    0 nanoseconds spent executing 0 partial-flushes (flushing a total of 0 entities and 0 collections)\n}\n</code></pre>\n<p>L2C puts and hits taking 2 up to 3 times longer. As this is not the only query the time accumulates more and more and is then also noticeable in the UI.</p>\n<p>Any suggestion how to speed up the L2C hits and puts?</p>\n"},{"tags":["java","c++","swig"],"comments":[{"owner":{"account_id":3618847,"reputation":867,"user_id":17695211,"display_name":"Alexey Veleshko"},"score":0,"creation_date":1701025779,"post_id":77538537,"comment_id":136721109,"body_markdown":"In your Update 2.0, what&#39;s your line supposed to do? I can&#39;t parse it too.","body":"In your Update 2.0, what&#39;s your line supposed to do? I can&#39;t parse it too."},{"owner":{"account_id":15845518,"reputation":163,"user_id":11432928,"display_name":"bleuj"},"score":1,"creation_date":1701032515,"post_id":77538537,"comment_id":136721777,"body_markdown":"It&#39;s a constructor definition for my class `Foo`, with an argument of `meters_t`, defaulting to 0 meters. `meters_t` is wrapped to a Java double, so I imagine the problem relates to `boost::units::si::meters`, but sadly I don&#39;t have much more information to the error than what is currently posted.","body":"It&#39;s a constructor definition for my class <code>Foo</code>, with an argument of <code>meters_t</code>, defaulting to 0 meters. <code>meters_t</code> is wrapped to a Java double, so I imagine the problem relates to <code>boost::units::si::meters</code>, but sadly I don&#39;t have much more information to the error than what is currently posted."}],"answers":[{"tags":[],"owner":{"account_id":4243,"reputation":1301696,"user_id":6309,"accept_rate":100,"display_name":"VonC"},"down_vote_count":1,"up_vote_count":2,"is_accepted":true,"score":1,"last_activity_date":1701093589,"creation_date":1701073737,"answer_id":77555451,"question_id":77538537,"body_markdown":"You have started on the right track with [typemaps](https://www.swig.org/Doc1.3/Typemaps.html). These are crucial for converting types between C++ and Java. But the errors suggest that SWIG is having trouble automatically converting between `meters_t` and `jdouble`. \r\n\r\nYou might need to provide *custom* typemaps to handle this conversion explicitly. You need to provide a way for SWIG to understand how to convert `meters_t` to `jdouble` and vice versa.\r\n\r\nTry and implement `%typemap(in)` and `%typemap(out)` for `meters_t`. These typemaps will define how to convert a `meters_t` object to a Java `double` when passing from C++ to Java, and vice versa.\r\n\r\nSWIG has limited support for parsing complex [default arguments](https://www.swig.org/Doc1.3/SWIG.html#SWIG_default_args)]. One solution is to simplify the default argument in the SWIG interface file, or provide an overloaded version of the constructor without the default argument for SWIG to wrap.\r\n\r\nIn your [SWIG interface file](https://www.swig.org/Doc1.3/SWIG.html#SWIG_nn47), implement the typemaps:\r\n\r\n```cpp\r\n%typemap(in) meters_t {\r\n    // Code to convert from jdouble to meters_t\r\n}\r\n\r\n%typemap(out) meters_t {\r\n    // Code to convert from meters_t to jdouble\r\n}\r\n\r\n// For the constructor issue\r\n%ignore Foo::Foo(meters_t);\r\n%extend Foo {\r\n    Foo() {\r\n        return new Foo(meters_t{0.0 * boost::units::si::meters});\r\n    }\r\n}\r\n```\r\n\r\nYou  need to fill in the conversion logic based on how `meters_t` can be converted to and from a `double`.\r\n\r\n```bash\r\nJava Side                     JNI Bridge                    C++ Side\r\n──────────                     ──────────                    ────────\r\n   jdouble                         |                     meters_t Object\r\n   (double)                        |                           |\r\n     |                             |                           |\r\n     |      [ JNI Conversion ]     |                           |\r\n     |----------------------------&gt;|                           |\r\n     |                             |    Construct meters_t     |\r\n     |                             |  using jdouble value      |\r\n     |                             |&lt;--------------------------|\r\n     |                             |                           |\r\n     |                             |      Extract double       |\r\n     |                             |  value from meters_t      |\r\n     |                             |--------------------------&gt;|\r\n     |                             |                           |\r\n     |&lt;----------------------------|                           |\r\n     |                             |                           |\r\n```\r\n\r\n------\r\n\r\nRegarding &quot;`Code to convert from jdouble to meters_t`&quot;, when converting from Java to C++, you will receive a Java `double` (represented as `jdouble` in C++ JNI code). You need to convert this to a `meters_t` object.  \r\nAssuming `meters_t` can be constructed or assigned from a `double`, the typemap might look like this:\r\n\r\n```cpp\r\n%typemap(in) meters_t {\r\n    $1 = meters_t($input * boost::units::si::meter);\r\n}\r\n```\r\n\r\nIn this typemap:\r\n- `$1` is the placeholder for the C++ argument (in this case, `meters_t`).\r\n- `$input` represents the input from Java (a `jdouble`).\r\n- The expression `$input * boost::units::si::meter` constructs a `meters_t` object from the Java double, assuming that `meters_t` can be initialized in this way.\r\n\r\n--------\r\n\r\nFor &quot;`Code to convert from meters_t to jdouble`&quot;:\r\n\r\nWhen converting from C++ to Java, you need to extract a `double` value from your `meters_t` object:\r\n\r\n```cpp\r\n%typemap(out) meters_t {\r\n    $result = (jdouble)$1.value();\r\n}\r\n```\r\n\r\nIn this typemap:\r\n- `$1` is the placeholder for the C++ `meters_t` object.\r\n- `$result` is the JNI representation of the Java type you are mapping to (`jdouble` in this case).\r\n- `$1.value()` is a hypothetical method or way to extract the `double` value from a `meters_t` object. You will need to replace this with the actual method or approach for extracting the numeric value from your `meters_t` type.\r\n\r\nMake sure that `meters_t` can be constructed from a `double` and has a method to extract its value as a `double`. If not, you will need to adapt the code to suit the actual interface of `meters_t`.  \r\nThese typemaps assume that `boost::units::si::meter` is the appropriate unit for conversion. Adjust if necessary based on your specific implementation of `meters_t`.\r\n\r\n----\r\n\r\n&gt; Unfortunately this has not corrected my current outstanding issue. I have actually already attempted what you suggested with ignoring the constructor and providing another.  \r\n`C:\\my_project\\src\\inc\\foo.h(line of the foo ctor): Syntax error in input(3)`. Given the error is in the `foo.h`, I feel like SWIG is unable to parse the default argument for whatever reason, where ignoring the code will not help; I imagine SWIG reading foo.h is independent of any directives in the SWIG Interface file?\r\n\r\nThe error `Syntax error in input(3)` does indeed suggest that SWIG is having trouble parsing the C++ code in your header file, specifically the constructor with the default argument in `foo.h`. That can happen when the syntax or constructs used in the C++ code are too complex or unfamiliar to SWIG.\r\n\r\nIf possible, simplify the constructor in the C++ header file. That means removing or altering the default argument in a way that SWIG can understand. For example, you could split the constructor into two: one without arguments and another taking a `meters_t` argument, handling the default case in the implementation rather than in the declaration.\r\n\r\n```cpp\r\n// Original:\r\n// Foo(meters_t meters = meters_t{ 0.0 * boost::units::si::meters });\r\n\r\n// Simplified:\r\nFoo();\r\nFoo(meters_t meters);\r\n```\r\n\r\nCreate an overloaded version of the constructor specifically for SWIG. That version would not have the complex default argument. Use [SWIG&#39;s `%ignore` directive](https://www.swig.org/Doc1.3/SWIG.html#SWIG_rename_ignore) to ignore the problematic constructor and expose only the simplified version.\r\n\r\nIn your SWIG interface file:\r\n```cpp\r\n%ignore Foo::Foo(meters_t meters = meters_t{ 0.0 * boost::units::si::meters });\r\n\r\n%extend Foo {\r\n    Foo() {\r\n        return new Foo(meters_t{0.0 * boost::units::si::meters});\r\n    }\r\n}\r\n```\r\n\r\nYou can also use [`%inline`](https://www.swig.org/Doc1.3/SWIG.html#SWIG_nn43) to provide an alternative, SWIG-friendly version of the problematic code directly in the interface file. That allows you to keep the original C++ code as is but provide a simplified version for SWIG to process.\r\n\r\n```cpp\r\n%inline %{\r\nclass Foo {\r\n    public:\r\n    Foo() : Foo(meters_t{0.0 * boost::units::si::meters}) {}\r\n    Foo(meters_t meters) { /* Constructor implementation */ }\r\n};\r\n%}\r\n```\r\n\r\nThe key is to create an interface that SWIG can parse without losing the functionality you need in the Java bindings.\r\n\r\n-------------\r\n\r\n&gt; Yeah, modifying the `ctor` to provide a `Foo()` and `Foo(meters_t meters)`, where moving the initialisation of `Foo::meters (meters = meters_t{ 0.0 * boost::units::si::meters })` to `Foo.cpp` corrects the issue.  \r\nI would really much prefer to SWIG wrap the code in question without having to alter the source code.  \r\nI feel like I am missing a boost header, but I have added the includes used in the `.h` file into my SWIG interface `%module MyModule { //some boost headers }`. In short, SWIG does not know what `boost::units::si::meter` is when it reads `Foo.h`!?\r\n\r\nI agree: you would prefer not to modify the original C++ source code to accommodate SWIG. The issue (where SWIG does not recognize `boost::units::si::meter`) is likely due to SWIG&#39;s limited understanding of complex C++ constructs, especially from libraries like [Boost](https://www.boost.org/).\r\n\r\nIncluding Boost headers in the SWIG interface file is a good start. However (again), SWIG might not fully understand or parse complex Boost constructs. Make sure you include the necessary Boost headers in your SWIG interface file, similar to how they are included in your C++ header files (though this might not always be feasible with complex templated types like those in Boost).\r\n\r\n```cpp\r\n%module MyModule\r\n%{\r\n#include &quot;foo.h&quot;\r\n#include &lt;boost/units/systems/si/length.hpp&gt;\r\n#include &lt;boost/units/systems/si/prefixes.hpp&gt;\r\n%}\r\n```\r\nAs mentioned before, use `%ignore` to exclude the problematic constructor from SWIG&#39;s processing.  \r\nThen, either use [`%extend`](https://www.swig.org/Doc1.3/SWIG.html#SWIG_adding_member_functions) to define a SWIG-friendly version of the constructor or [`%rename`](https://www.swig.org/Doc1.3/SWIG.html#SWIG_rename_ignore) to expose a different, simplified constructor to Java.\r\n\r\n```cpp\r\n%ignore Foo::Foo(meters_t meters = meters_t{ 0.0 * boost::units::si::meters });\r\n```\r\nAs a last resort, if SWIG struggles with the Boost types, consider creating a wrapper class in C++ that presents a simpler interface to SWIG. That wrapper would internally handle the Boost types and complexities, exposing only SWIG-friendly types and methods.\r\n\r\n- Create a `FooWrapper` class that simplifies the interface for SWIG.\r\n- Inside `FooWrapper`, manage the complex Boost interactions, exposing simpler methods for SWIG.\r\n\r\n```cpp\r\nclass FooWrapper {\r\npublic:\r\n    FooWrapper() : foo(0.0 * boost::units::si::meters) {}\r\n    explicit FooWrapper(double meters) : foo(meters * boost::units::si::meters) {}\r\n\r\nprivate:\r\n    Foo foo;\r\n};\r\n```\r\n\r\nThen in the SWIG interface file:\r\n\r\n```cpp\r\n%include &quot;FooWrapper.h&quot;\r\n```\r\n\r\nThe goal remains to find a balance between preserving the original C++ source code and providing SWIG with a form it can understand. In that context, creating a simplified interface or wrapper for SWIG can often be a practical solution, especially when dealing with complex libraries like Boost.\r\n","title":"Convert C++ custom unit type to primative Java type with SWIG","body":"<p>You have started on the right track with <a href=\"https://www.swig.org/Doc1.3/Typemaps.html\" rel=\"nofollow noreferrer\">typemaps</a>. These are crucial for converting types between C++ and Java. But the errors suggest that SWIG is having trouble automatically converting between <code>meters_t</code> and <code>jdouble</code>.</p>\n<p>You might need to provide <em>custom</em> typemaps to handle this conversion explicitly. You need to provide a way for SWIG to understand how to convert <code>meters_t</code> to <code>jdouble</code> and vice versa.</p>\n<p>Try and implement <code>%typemap(in)</code> and <code>%typemap(out)</code> for <code>meters_t</code>. These typemaps will define how to convert a <code>meters_t</code> object to a Java <code>double</code> when passing from C++ to Java, and vice versa.</p>\n<p>SWIG has limited support for parsing complex <a href=\"https://www.swig.org/Doc1.3/SWIG.html#SWIG_default_args\" rel=\"nofollow noreferrer\">default arguments</a>]. One solution is to simplify the default argument in the SWIG interface file, or provide an overloaded version of the constructor without the default argument for SWIG to wrap.</p>\n<p>In your <a href=\"https://www.swig.org/Doc1.3/SWIG.html#SWIG_nn47\" rel=\"nofollow noreferrer\">SWIG interface file</a>, implement the typemaps:</p>\n<pre class=\"lang-cpp prettyprint-override\"><code>%typemap(in) meters_t {\n    // Code to convert from jdouble to meters_t\n}\n\n%typemap(out) meters_t {\n    // Code to convert from meters_t to jdouble\n}\n\n// For the constructor issue\n%ignore Foo::Foo(meters_t);\n%extend Foo {\n    Foo() {\n        return new Foo(meters_t{0.0 * boost::units::si::meters});\n    }\n}\n</code></pre>\n<p>You  need to fill in the conversion logic based on how <code>meters_t</code> can be converted to and from a <code>double</code>.</p>\n<pre class=\"lang-bash prettyprint-override\"><code>Java Side                     JNI Bridge                    C++ Side\n──────────                     ──────────                    ────────\n   jdouble                         |                     meters_t Object\n   (double)                        |                           |\n     |                             |                           |\n     |      [ JNI Conversion ]     |                           |\n     |----------------------------&gt;|                           |\n     |                             |    Construct meters_t     |\n     |                             |  using jdouble value      |\n     |                             |&lt;--------------------------|\n     |                             |                           |\n     |                             |      Extract double       |\n     |                             |  value from meters_t      |\n     |                             |--------------------------&gt;|\n     |                             |                           |\n     |&lt;----------------------------|                           |\n     |                             |                           |\n</code></pre>\n<hr />\n<p>Regarding &quot;<code>Code to convert from jdouble to meters_t</code>&quot;, when converting from Java to C++, you will receive a Java <code>double</code> (represented as <code>jdouble</code> in C++ JNI code). You need to convert this to a <code>meters_t</code> object.<br />\nAssuming <code>meters_t</code> can be constructed or assigned from a <code>double</code>, the typemap might look like this:</p>\n<pre class=\"lang-cpp prettyprint-override\"><code>%typemap(in) meters_t {\n    $1 = meters_t($input * boost::units::si::meter);\n}\n</code></pre>\n<p>In this typemap:</p>\n<ul>\n<li><code>$1</code> is the placeholder for the C++ argument (in this case, <code>meters_t</code>).</li>\n<li><code>$input</code> represents the input from Java (a <code>jdouble</code>).</li>\n<li>The expression <code>$input * boost::units::si::meter</code> constructs a <code>meters_t</code> object from the Java double, assuming that <code>meters_t</code> can be initialized in this way.</li>\n</ul>\n<hr />\n<p>For &quot;<code>Code to convert from meters_t to jdouble</code>&quot;:</p>\n<p>When converting from C++ to Java, you need to extract a <code>double</code> value from your <code>meters_t</code> object:</p>\n<pre class=\"lang-cpp prettyprint-override\"><code>%typemap(out) meters_t {\n    $result = (jdouble)$1.value();\n}\n</code></pre>\n<p>In this typemap:</p>\n<ul>\n<li><code>$1</code> is the placeholder for the C++ <code>meters_t</code> object.</li>\n<li><code>$result</code> is the JNI representation of the Java type you are mapping to (<code>jdouble</code> in this case).</li>\n<li><code>$1.value()</code> is a hypothetical method or way to extract the <code>double</code> value from a <code>meters_t</code> object. You will need to replace this with the actual method or approach for extracting the numeric value from your <code>meters_t</code> type.</li>\n</ul>\n<p>Make sure that <code>meters_t</code> can be constructed from a <code>double</code> and has a method to extract its value as a <code>double</code>. If not, you will need to adapt the code to suit the actual interface of <code>meters_t</code>.<br />\nThese typemaps assume that <code>boost::units::si::meter</code> is the appropriate unit for conversion. Adjust if necessary based on your specific implementation of <code>meters_t</code>.</p>\n<hr />\n<blockquote>\n<p>Unfortunately this has not corrected my current outstanding issue. I have actually already attempted what you suggested with ignoring the constructor and providing another.<br />\n<code>C:\\my_project\\src\\inc\\foo.h(line of the foo ctor): Syntax error in input(3)</code>. Given the error is in the <code>foo.h</code>, I feel like SWIG is unable to parse the default argument for whatever reason, where ignoring the code will not help; I imagine SWIG reading foo.h is independent of any directives in the SWIG Interface file?</p>\n</blockquote>\n<p>The error <code>Syntax error in input(3)</code> does indeed suggest that SWIG is having trouble parsing the C++ code in your header file, specifically the constructor with the default argument in <code>foo.h</code>. That can happen when the syntax or constructs used in the C++ code are too complex or unfamiliar to SWIG.</p>\n<p>If possible, simplify the constructor in the C++ header file. That means removing or altering the default argument in a way that SWIG can understand. For example, you could split the constructor into two: one without arguments and another taking a <code>meters_t</code> argument, handling the default case in the implementation rather than in the declaration.</p>\n<pre class=\"lang-cpp prettyprint-override\"><code>// Original:\n// Foo(meters_t meters = meters_t{ 0.0 * boost::units::si::meters });\n\n// Simplified:\nFoo();\nFoo(meters_t meters);\n</code></pre>\n<p>Create an overloaded version of the constructor specifically for SWIG. That version would not have the complex default argument. Use <a href=\"https://www.swig.org/Doc1.3/SWIG.html#SWIG_rename_ignore\" rel=\"nofollow noreferrer\">SWIG's <code>%ignore</code> directive</a> to ignore the problematic constructor and expose only the simplified version.</p>\n<p>In your SWIG interface file:</p>\n<pre class=\"lang-cpp prettyprint-override\"><code>%ignore Foo::Foo(meters_t meters = meters_t{ 0.0 * boost::units::si::meters });\n\n%extend Foo {\n    Foo() {\n        return new Foo(meters_t{0.0 * boost::units::si::meters});\n    }\n}\n</code></pre>\n<p>You can also use <a href=\"https://www.swig.org/Doc1.3/SWIG.html#SWIG_nn43\" rel=\"nofollow noreferrer\"><code>%inline</code></a> to provide an alternative, SWIG-friendly version of the problematic code directly in the interface file. That allows you to keep the original C++ code as is but provide a simplified version for SWIG to process.</p>\n<pre class=\"lang-cpp prettyprint-override\"><code>%inline %{\nclass Foo {\n    public:\n    Foo() : Foo(meters_t{0.0 * boost::units::si::meters}) {}\n    Foo(meters_t meters) { /* Constructor implementation */ }\n};\n%}\n</code></pre>\n<p>The key is to create an interface that SWIG can parse without losing the functionality you need in the Java bindings.</p>\n<hr />\n<blockquote>\n<p>Yeah, modifying the <code>ctor</code> to provide a <code>Foo()</code> and <code>Foo(meters_t meters)</code>, where moving the initialisation of <code>Foo::meters (meters = meters_t{ 0.0 * boost::units::si::meters })</code> to <code>Foo.cpp</code> corrects the issue.<br />\nI would really much prefer to SWIG wrap the code in question without having to alter the source code.<br />\nI feel like I am missing a boost header, but I have added the includes used in the <code>.h</code> file into my SWIG interface <code>%module MyModule { //some boost headers }</code>. In short, SWIG does not know what <code>boost::units::si::meter</code> is when it reads <code>Foo.h</code>!?</p>\n</blockquote>\n<p>I agree: you would prefer not to modify the original C++ source code to accommodate SWIG. The issue (where SWIG does not recognize <code>boost::units::si::meter</code>) is likely due to SWIG's limited understanding of complex C++ constructs, especially from libraries like <a href=\"https://www.boost.org/\" rel=\"nofollow noreferrer\">Boost</a>.</p>\n<p>Including Boost headers in the SWIG interface file is a good start. However (again), SWIG might not fully understand or parse complex Boost constructs. Make sure you include the necessary Boost headers in your SWIG interface file, similar to how they are included in your C++ header files (though this might not always be feasible with complex templated types like those in Boost).</p>\n<pre class=\"lang-cpp prettyprint-override\"><code>%module MyModule\n%{\n#include &quot;foo.h&quot;\n#include &lt;boost/units/systems/si/length.hpp&gt;\n#include &lt;boost/units/systems/si/prefixes.hpp&gt;\n%}\n</code></pre>\n<p>As mentioned before, use <code>%ignore</code> to exclude the problematic constructor from SWIG's processing.<br />\nThen, either use <a href=\"https://www.swig.org/Doc1.3/SWIG.html#SWIG_adding_member_functions\" rel=\"nofollow noreferrer\"><code>%extend</code></a> to define a SWIG-friendly version of the constructor or <a href=\"https://www.swig.org/Doc1.3/SWIG.html#SWIG_rename_ignore\" rel=\"nofollow noreferrer\"><code>%rename</code></a> to expose a different, simplified constructor to Java.</p>\n<pre class=\"lang-cpp prettyprint-override\"><code>%ignore Foo::Foo(meters_t meters = meters_t{ 0.0 * boost::units::si::meters });\n</code></pre>\n<p>As a last resort, if SWIG struggles with the Boost types, consider creating a wrapper class in C++ that presents a simpler interface to SWIG. That wrapper would internally handle the Boost types and complexities, exposing only SWIG-friendly types and methods.</p>\n<ul>\n<li>Create a <code>FooWrapper</code> class that simplifies the interface for SWIG.</li>\n<li>Inside <code>FooWrapper</code>, manage the complex Boost interactions, exposing simpler methods for SWIG.</li>\n</ul>\n<pre class=\"lang-cpp prettyprint-override\"><code>class FooWrapper {\npublic:\n    FooWrapper() : foo(0.0 * boost::units::si::meters) {}\n    explicit FooWrapper(double meters) : foo(meters * boost::units::si::meters) {}\n\nprivate:\n    Foo foo;\n};\n</code></pre>\n<p>Then in the SWIG interface file:</p>\n<pre class=\"lang-cpp prettyprint-override\"><code>%include &quot;FooWrapper.h&quot;\n</code></pre>\n<p>The goal remains to find a balance between preserving the original C++ source code and providing SWIG with a form it can understand. In that context, creating a simplified interface or wrapper for SWIG can often be a practical solution, especially when dealing with complex libraries like Boost.</p>\n"}],"owner":{"account_id":15845518,"reputation":163,"user_id":11432928,"display_name":"bleuj"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":188,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":77555451,"answer_count":1,"score":5,"last_activity_date":1701093589,"creation_date":1700758213,"question_id":77538537,"body_markdown":"I have C++ code that I am attempting to provide Java bindings using SWIG.\r\n```\r\nstruct meters_t : public boost::units::quantity&lt;boost::units::si::length&gt; {};\r\n```\r\n\r\nI am hoping to try replace all references of `meters_t` to just be a `double` or `Java.lang.Double`.\r\n\r\nI&#39;ve attempted the following in my SWIG interface `.i` file:\r\n```\r\n%typemap(jstype) meters_t &quot;java.lang.Double&quot;\r\n%typemap(jtype) meters_t &quot;java.lang.Double&quot;\r\n%typemap(jni) meters_t &quot;jdouble&quot;\r\n...\r\n// Duplicated for const, const&amp;, &amp;\r\n%ignore meters_t\r\n%include &quot;my_include.h&quot;\r\n```\r\nHowever I am currently getting a typecast error\r\n```\r\nerror C2440: &#39;type cast&#39;: cannot convert from &#39;meters_t *&#39; to &#39;jdouble&#39;\r\nerror C2440: &#39;type cast&#39;: cannot convert from `jdouble` to `meters_t *`\r\n```\r\n\r\nDoes anyone have any advice to correct this? I am quickly losing hope that the idea of converting `meters_t` into a simple `double` will be possible :/\r\n\r\n**UPDATE:**\r\nI have also added the following\r\n```\r\n%typemap(javain) meters_t &quot;$javainput&quot;\r\n```\r\nWhich enables the Java bindings to be built, however when I attempt to use the Java bindings (on a different `struct` that takes `meters_t` as a constructor arg, it immediately throws an error\r\n```\r\nA fatal error has been detected by the Java Runtime Environment\r\nEXCEPTION_ACCESS_VIOLATION\r\n``` \r\n\r\n**UPDATE 2.0**\r\n\r\nI now have `meters_t` SWIG wrapped. My new problem is a class with a boost default argument, and I&#39;m getting the elusive `Syntax error in input(3).` error\r\n```\r\nFoo(meters_t meters = meters_t{ 0.0 * boost::units::si::meters });\r\n```","title":"Convert C++ custom unit type to primative Java type with SWIG","body":"<p>I have C++ code that I am attempting to provide Java bindings using SWIG.</p>\n<pre><code>struct meters_t : public boost::units::quantity&lt;boost::units::si::length&gt; {};\n</code></pre>\n<p>I am hoping to try replace all references of <code>meters_t</code> to just be a <code>double</code> or <code>Java.lang.Double</code>.</p>\n<p>I've attempted the following in my SWIG interface <code>.i</code> file:</p>\n<pre><code>%typemap(jstype) meters_t &quot;java.lang.Double&quot;\n%typemap(jtype) meters_t &quot;java.lang.Double&quot;\n%typemap(jni) meters_t &quot;jdouble&quot;\n...\n// Duplicated for const, const&amp;, &amp;\n%ignore meters_t\n%include &quot;my_include.h&quot;\n</code></pre>\n<p>However I am currently getting a typecast error</p>\n<pre><code>error C2440: 'type cast': cannot convert from 'meters_t *' to 'jdouble'\nerror C2440: 'type cast': cannot convert from `jdouble` to `meters_t *`\n</code></pre>\n<p>Does anyone have any advice to correct this? I am quickly losing hope that the idea of converting <code>meters_t</code> into a simple <code>double</code> will be possible :/</p>\n<p><strong>UPDATE:</strong>\nI have also added the following</p>\n<pre><code>%typemap(javain) meters_t &quot;$javainput&quot;\n</code></pre>\n<p>Which enables the Java bindings to be built, however when I attempt to use the Java bindings (on a different <code>struct</code> that takes <code>meters_t</code> as a constructor arg, it immediately throws an error</p>\n<pre><code>A fatal error has been detected by the Java Runtime Environment\nEXCEPTION_ACCESS_VIOLATION\n</code></pre>\n<p><strong>UPDATE 2.0</strong></p>\n<p>I now have <code>meters_t</code> SWIG wrapped. My new problem is a class with a boost default argument, and I'm getting the elusive <code>Syntax error in input(3).</code> error</p>\n<pre><code>Foo(meters_t meters = meters_t{ 0.0 * boost::units::si::meters });\n</code></pre>\n"},{"tags":["java","jax-rs","wildfly","resteasy","provider"],"comments":[{"owner":{"account_id":51161,"reputation":17015,"user_id":152794,"display_name":"James R. Perkins"},"score":0,"creation_date":1700843902,"post_id":77537708,"comment_id":136706422,"body_markdown":"Can you post a stacktrace?","body":"Can you post a stacktrace?"},{"owner":{"account_id":10503317,"reputation":51,"user_id":7741366,"display_name":"Cx Vercility"},"score":0,"creation_date":1700933614,"post_id":77537708,"comment_id":136713799,"body_markdown":"I can post one when I get back to work, but there really isn&#39;t anything useful to see there. It&#39;s just endless lines of wildfly/resteasy interceptor stuff and then 2 lines of my filter being called.","body":"I can post one when I get back to work, but there really isn&#39;t anything useful to see there. It&#39;s just endless lines of wildfly/resteasy interceptor stuff and then 2 lines of my filter being called."},{"owner":{"account_id":10503317,"reputation":51,"user_id":7741366,"display_name":"Cx Vercility"},"score":0,"creation_date":1701092396,"post_id":77537708,"comment_id":136728319,"body_markdown":"@JamesR.Perkins added one\nCurrently pondering whether to just implement a requestfilter in all deployments instead. whatever resteasy does, the one defined within the deployment itself should always be prioritized. At least thats what I hope/think","body":"@JamesR.Perkins added one Currently pondering whether to just implement a requestfilter in all deployments instead. whatever resteasy does, the one defined within the deployment itself should always be prioritized. At least thats what I hope/think"},{"owner":{"account_id":51161,"reputation":17015,"user_id":152794,"display_name":"James R. Perkins"},"score":0,"creation_date":1701104948,"post_id":77537708,"comment_id":136731070,"body_markdown":"What are you using to schedule jobs? It looks like the CDI context is not set. IoW what kind of executor are you using?","body":"What are you using to schedule jobs? It looks like the CDI context is not set. IoW what kind of executor are you using?"},{"owner":{"account_id":10503317,"reputation":51,"user_id":7741366,"display_name":"Cx Vercility"},"score":0,"creation_date":1701170270,"post_id":77537708,"comment_id":136739469,"body_markdown":"Im using the quartz scheduler. Jobs created by quartz arent CDI managed so that tracks (Class.newInstance() ). I can modify the job Factory to use CDi created instances (by CDI.current().select(xyz.class).get() ) However, the real issue is that the filter shouldn&#39;t be used in the first place.","body":"Im using the quartz scheduler. Jobs created by quartz arent CDI managed so that tracks (Class.newInstance() ). I can modify the job Factory to use CDi created instances (by CDI.current().select(xyz.class).get() ) However, the real issue is that the filter shouldn&#39;t be used in the first place."},{"owner":{"account_id":51161,"reputation":17015,"user_id":152794,"display_name":"James R. Perkins"},"score":0,"creation_date":1701187667,"post_id":77537708,"comment_id":136742866,"body_markdown":"It&#39;s hard to say what&#39;s really happening when the thread is created out of the scope of the container. Do you know the error is coming from a specific failure? The only way I&#39;d be able to see what is happening is with a reproducer which I assume is nearly impossible. I&#39;d highly suggest looking at Jakarta Concurrency for scheduling threads.","body":"It&#39;s hard to say what&#39;s really happening when the thread is created out of the scope of the container. Do you know the error is coming from a specific failure? The only way I&#39;d be able to see what is happening is with a reproducer which I assume is nearly impossible. I&#39;d highly suggest looking at Jakarta Concurrency for scheduling threads."},{"owner":{"account_id":10503317,"reputation":51,"user_id":7741366,"display_name":"Cx Vercility"},"score":0,"creation_date":1701255089,"post_id":77537708,"comment_id":136752103,"body_markdown":"I&#39;m not entirely sure what you&#39;re asking. The error itself occurs because the invoked RequestFilter injects HttpServletRequest, and the injections fails in the filter because there is no request to inject (since the actual call came from a scheduled thread). Why the filter is even invoked is my question so no clue there.\n\nTransitioning to jakarta concurrency is not an option for us for several reason im afraid, I also cannot share a reproducer because the container and code rely on company internal resources.","body":"I&#39;m not entirely sure what you&#39;re asking. The error itself occurs because the invoked RequestFilter injects HttpServletRequest, and the injections fails in the filter because there is no request to inject (since the actual call came from a scheduled thread). Why the filter is even invoked is my question so no clue there.  Transitioning to jakarta concurrency is not an option for us for several reason im afraid, I also cannot share a reproducer because the container and code rely on company internal resources."},{"owner":{"account_id":10503317,"reputation":51,"user_id":7741366,"display_name":"Cx Vercility"},"score":0,"creation_date":1701255220,"post_id":77537708,"comment_id":136752127,"body_markdown":"In the end I just ended up removing the provider annotation and manually registering the filter to every restclient / restproxy (eclipse microprofile) via .register/@registerprovider in the wildlfy27 environment.\nFortunately, there weren&#39;t that many since there&#39;s a massive amount of calls/methods but not that many different targets, meaning they use the same client/proxy.\n\nFor some reason, wildfly10 still works fine even with the provider annotation in more than 5 deployments. I&#39;m guessing something changed in resteasy between these versions.\n\nThanks for trying to help though!","body":"In the end I just ended up removing the provider annotation and manually registering the filter to every restclient / restproxy (eclipse microprofile) via .register/@registerprovider in the wildlfy27 environment. Fortunately, there weren&#39;t that many since there&#39;s a massive amount of calls/methods but not that many different targets, meaning they use the same client/proxy.  For some reason, wildfly10 still works fine even with the provider annotation in more than 5 deployments. I&#39;m guessing something changed in resteasy between these versions.  Thanks for trying to help though!"},{"owner":{"account_id":51161,"reputation":17015,"user_id":152794,"display_name":"James R. Perkins"},"score":0,"creation_date":1701281885,"post_id":77537708,"comment_id":136757525,"body_markdown":"I figured a reproducer would not be easy to do :) It would just be the only way I could see how the filter is getting registered. However, since it&#39;s coming from a deployment it should get discovered and added to the RESTEasy context. Given it is executed outside of a request, that&#39;s why the CDI context is out scope as you noted. I think your fix is the only way to do this. Even using a `ManagedExecutorService` would not work in this case. Sorry about the confusion there.","body":"I figured a reproducer would not be easy to do :) It would just be the only way I could see how the filter is getting registered. However, since it&#39;s coming from a deployment it should get discovered and added to the RESTEasy context. Given it is executed outside of a request, that&#39;s why the CDI context is out scope as you noted. I think your fix is the only way to do this. Even using a <code>ManagedExecutorService</code> would not work in this case. Sorry about the confusion there."}],"owner":{"account_id":10503317,"reputation":51,"user_id":7741366,"display_name":"Cx Vercility"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1701092342,"creation_date":1700750274,"question_id":77537708,"body_markdown":"I need some help understanding how Resteasy messes up my registered Providers\r\n\r\nI have 2 services, lets call them Scheduler and Process.\r\nProcess has a ClientRequestFilter annotated with @Provider that adds some headers to Rest Requests.\r\nScheduler regularly calls an entirely different service via Rest.It does not have a requestfilter, nor any dependency to Process. \r\n\r\nStill, *sometimes* when I start my wildfly27 container that contains these Services, my Scheduler will permanently throw Exceptions, whose stacktraces contain the Filter of my Process. (The filter injects HttpServletRequest, which isn&#39;t available there )\r\n\r\nNow as far as hours of googling got me, I think that all classes registered as providers are registered to the entire Resteasy runtime within wildfly, not just the specific deployment they&#39;re contained in.\r\n\r\nNow what I dont understand is why this behaviour appears to be completely random. Sometimes the container and services start just fine, sometimes they have this issue. The order in which they are deployed seems to have no effect on this.\r\nUndeploying the process which contains the requestfilter afterwards also does not change anything about this.\r\n\r\nRemoving the Provider annotation and instead listing the filter in the jakarta.ws.rs.ext.Providers file also had no effect.\r\n\r\nIt seems that a solution to this would be to manually register all resources and providers in the Application Class of the deployments, but I&#39;m not really that fond of manually adjusting numerous services that run within the same wildfly server and copying every single rest resource there.\r\nManually registering providers to every single rest client is also out of the question for the same reason.\r\n\r\nCan anyone clear up my confusion, and maybe even suggest a proper solution?\r\nThanks in advance\r\n\r\nstacktrace:\r\n```\r\njakarta.ws.rs.ProcessingException: org.jboss.weld.contexts.ContextNotActiveException: WELD-001303: No active contexts for scope type jakarta.enterprise.context.RequestScoped]\r\nwildfly27_1   | \tat deployment.scheduler.war//.scheduler.jobs.AbstractRestJob.execute(AbstractRestJob.java:61)\r\nwildfly27_1   | \tat deployment.scheduler.war//org.quartz.core.JobRunShell.run(JobRunShell.java:202)\r\nwildfly27_1   | \tat deployment.scheduler.war//org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:573)\r\nwildfly27_1   | Caused by: jakarta.ws.rs.ProcessingException: org.jboss.weld.contexts.ContextNotActiveException: WELD-001303: No active contexts for scope type jakarta.enterprise.context.RequestScoped\r\nwildfly27_1   | \tat org.jboss.resteasy.resteasy-client@6.2.1.Final//org.jboss.resteasy.client.jaxrs.internal.ClientInvocation.filterRequest(ClientInvocation.java:767)\r\nwildfly27_1   | \tat org.jboss.resteasy.resteasy-client@6.2.1.Final//org.jboss.resteasy.client.jaxrs.internal.ClientInvocation.invoke(ClientInvocation.java:499)\r\nwildfly27_1   | \tat org.jboss.resteasy.resteasy-client@6.2.1.Final//org.jboss.resteasy.client.jaxrs.internal.ClientInvocation.invoke(ClientInvocation.java:71)\r\nwildfly27_1   | \tat org.jboss.resteasy.resteasy-client@6.2.1.Final//org.jboss.resteasy.client.jaxrs.internal.ClientInvocationBuilder.get(ClientInvocationBuilder.java:198)\r\nwildfly27_1   | \tat deployment.scheduler.war//scheduler.jobs.RestGetJob.performRequest(RestGetJob.java:16)\r\nwildfly27_1   | \tat deployment.scheduler.war//scheduler.jobs.AbstractRestJob.execute(AbstractRestJob.java:45)\r\nwildfly27_1   | \t... 2 more\r\nwildfly27_1   | Caused by: org.jboss.weld.contexts.ContextNotActiveException: WELD-001303: No active contexts for scope type jakarta.enterprise.context.RequestScoped\r\nwildfly27_1   | \tat org.jboss.weld.core@5.1.0.Final//org.jboss.weld.manager.BeanManagerImpl.getContext(BeanManagerImpl.java:628)\r\nwildfly27_1   | \tat org.jboss.weld.core@5.1.0.Final//org.jboss.weld.bean.ContextualInstanceStrategy$DefaultContextualInstanceStrategy.getIfExists(ContextualInstanceStrategy.java:89)\r\nwildfly27_1   | \tat org.jboss.weld.core@5.1.0.Final//org.jboss.weld.bean.ContextualInstance.getIfExists(ContextualInstance.java:63)\r\nwildfly27_1   | \tat org.jboss.weld.core@5.1.0.Final//org.jboss.weld.bean.proxy.ContextBeanInstance.getInstance(ContextBeanInstance.java:87)\r\nwildfly27_1   | \tat org.jboss.weld.core@5.1.0.Final//org.jboss.weld.bean.proxy.ProxyMethodHandler.invoke(ProxyMethodHandler.java:105)\r\nwildfly27_1   | \tat org.jboss.weld.core@5.1.0.Final//org.jboss.weld.generated.proxies.servlet.http.HttpServletRequest$Proxy$_$$_WeldClientProxy.getRemoteUser(Unknown Source)\r\nwildfly27_1   | \tat deployment.process.war//process.core.remote.RequestFilter.filter(RequestFilter.java:20)\r\nwildfly27_1   | \tat deployment.process.war//process.core.remote.RequestFilter$Proxy$_$$_WeldClientProxy.filter(Unknown Source)\r\nwildfly27_1   | \tat org.jboss.resteasy.resteasy-client@6.2.1.Final//org.jboss.resteasy.client.jaxrs.internal.ClientInvocation.filterRequest(ClientInvocation.java:754)\r\nwildfly27_1   | \t... 7 more\r\n```","title":"JAX-RS Provider randomly acts server-wide","body":"<p>I need some help understanding how Resteasy messes up my registered Providers</p>\n<p>I have 2 services, lets call them Scheduler and Process.\nProcess has a ClientRequestFilter annotated with @Provider that adds some headers to Rest Requests.\nScheduler regularly calls an entirely different service via Rest.It does not have a requestfilter, nor any dependency to Process.</p>\n<p>Still, <em>sometimes</em> when I start my wildfly27 container that contains these Services, my Scheduler will permanently throw Exceptions, whose stacktraces contain the Filter of my Process. (The filter injects HttpServletRequest, which isn't available there )</p>\n<p>Now as far as hours of googling got me, I think that all classes registered as providers are registered to the entire Resteasy runtime within wildfly, not just the specific deployment they're contained in.</p>\n<p>Now what I dont understand is why this behaviour appears to be completely random. Sometimes the container and services start just fine, sometimes they have this issue. The order in which they are deployed seems to have no effect on this.\nUndeploying the process which contains the requestfilter afterwards also does not change anything about this.</p>\n<p>Removing the Provider annotation and instead listing the filter in the jakarta.ws.rs.ext.Providers file also had no effect.</p>\n<p>It seems that a solution to this would be to manually register all resources and providers in the Application Class of the deployments, but I'm not really that fond of manually adjusting numerous services that run within the same wildfly server and copying every single rest resource there.\nManually registering providers to every single rest client is also out of the question for the same reason.</p>\n<p>Can anyone clear up my confusion, and maybe even suggest a proper solution?\nThanks in advance</p>\n<p>stacktrace:</p>\n<pre><code>jakarta.ws.rs.ProcessingException: org.jboss.weld.contexts.ContextNotActiveException: WELD-001303: No active contexts for scope type jakarta.enterprise.context.RequestScoped]\nwildfly27_1   |     at deployment.scheduler.war//.scheduler.jobs.AbstractRestJob.execute(AbstractRestJob.java:61)\nwildfly27_1   |     at deployment.scheduler.war//org.quartz.core.JobRunShell.run(JobRunShell.java:202)\nwildfly27_1   |     at deployment.scheduler.war//org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:573)\nwildfly27_1   | Caused by: jakarta.ws.rs.ProcessingException: org.jboss.weld.contexts.ContextNotActiveException: WELD-001303: No active contexts for scope type jakarta.enterprise.context.RequestScoped\nwildfly27_1   |     at org.jboss.resteasy.resteasy-client@6.2.1.Final//org.jboss.resteasy.client.jaxrs.internal.ClientInvocation.filterRequest(ClientInvocation.java:767)\nwildfly27_1   |     at org.jboss.resteasy.resteasy-client@6.2.1.Final//org.jboss.resteasy.client.jaxrs.internal.ClientInvocation.invoke(ClientInvocation.java:499)\nwildfly27_1   |     at org.jboss.resteasy.resteasy-client@6.2.1.Final//org.jboss.resteasy.client.jaxrs.internal.ClientInvocation.invoke(ClientInvocation.java:71)\nwildfly27_1   |     at org.jboss.resteasy.resteasy-client@6.2.1.Final//org.jboss.resteasy.client.jaxrs.internal.ClientInvocationBuilder.get(ClientInvocationBuilder.java:198)\nwildfly27_1   |     at deployment.scheduler.war//scheduler.jobs.RestGetJob.performRequest(RestGetJob.java:16)\nwildfly27_1   |     at deployment.scheduler.war//scheduler.jobs.AbstractRestJob.execute(AbstractRestJob.java:45)\nwildfly27_1   |     ... 2 more\nwildfly27_1   | Caused by: org.jboss.weld.contexts.ContextNotActiveException: WELD-001303: No active contexts for scope type jakarta.enterprise.context.RequestScoped\nwildfly27_1   |     at org.jboss.weld.core@5.1.0.Final//org.jboss.weld.manager.BeanManagerImpl.getContext(BeanManagerImpl.java:628)\nwildfly27_1   |     at org.jboss.weld.core@5.1.0.Final//org.jboss.weld.bean.ContextualInstanceStrategy$DefaultContextualInstanceStrategy.getIfExists(ContextualInstanceStrategy.java:89)\nwildfly27_1   |     at org.jboss.weld.core@5.1.0.Final//org.jboss.weld.bean.ContextualInstance.getIfExists(ContextualInstance.java:63)\nwildfly27_1   |     at org.jboss.weld.core@5.1.0.Final//org.jboss.weld.bean.proxy.ContextBeanInstance.getInstance(ContextBeanInstance.java:87)\nwildfly27_1   |     at org.jboss.weld.core@5.1.0.Final//org.jboss.weld.bean.proxy.ProxyMethodHandler.invoke(ProxyMethodHandler.java:105)\nwildfly27_1   |     at org.jboss.weld.core@5.1.0.Final//org.jboss.weld.generated.proxies.servlet.http.HttpServletRequest$Proxy$_$$_WeldClientProxy.getRemoteUser(Unknown Source)\nwildfly27_1   |     at deployment.process.war//process.core.remote.RequestFilter.filter(RequestFilter.java:20)\nwildfly27_1   |     at deployment.process.war//process.core.remote.RequestFilter$Proxy$_$$_WeldClientProxy.filter(Unknown Source)\nwildfly27_1   |     at org.jboss.resteasy.resteasy-client@6.2.1.Final//org.jboss.resteasy.client.jaxrs.internal.ClientInvocation.filterRequest(ClientInvocation.java:754)\nwildfly27_1   |     ... 7 more\n</code></pre>\n"},{"tags":["java","sockets","networking","connection","socketexception"],"comments":[{"owner":{"account_id":2147,"reputation":38490,"user_id":2961,"accept_rate":79,"display_name":"Stu Thompson"},"score":2,"creation_date":1221486339,"post_id":62929,"comment_id":5046,"body_markdown":"Do you have stack traces from both sides?  Can you describe the network architecture a bit more?  (Over the wild Internet?  On the same machine?  Somewhere in between?)  Does it happen all the time?  Or intermittently?","body":"Do you have stack traces from both sides?  Can you describe the network architecture a bit more?  (Over the wild Internet?  On the same machine?  Somewhere in between?)  Does it happen all the time?  Or intermittently?"},{"owner":{"account_id":261142,"reputation":47108,"user_id":545127,"accept_rate":69,"display_name":"Raedwald"},"score":0,"creation_date":1542147226,"post_id":62929,"comment_id":93462339,"body_markdown":"See https://stackoverflow.com/questions/585599/whats-causing-my-java-net-socketexception-connection-reset","body":"See <a href=\"https://stackoverflow.com/questions/585599/whats-causing-my-java-net-socketexception-connection-reset\" title=\"whats causing my java net socketexception connection reset\">stackoverflow.com/questions/585599/&hellip;</a>"},{"owner":{"account_id":18030949,"reputation":250,"user_id":13105594,"display_name":"Florian-Martin"},"score":0,"creation_date":1612269165,"post_id":62929,"comment_id":116708675,"body_markdown":"I&#39;ve had the same problem using WAMP, but fixed it working on a remote server.","body":"I&#39;ve had the same problem using WAMP, but fixed it working on a remote server."},{"owner":{"account_id":6865447,"reputation":2052,"user_id":5278079,"display_name":"Sm Srikanth"},"score":0,"creation_date":1646896834,"post_id":62929,"comment_id":126237904,"body_markdown":"Generally, I am asking, can a SQL password expire result in this problem?","body":"Generally, I am asking, can a SQL password expire result in this problem?"}],"answers":[{"tags":[],"owner":{"account_id":3857,"reputation":21157,"user_id":5640,"accept_rate":100,"display_name":"GEOCHET"},"down_vote_count":1,"up_vote_count":23,"is_accepted":false,"score":22,"last_activity_date":1221486306,"creation_date":1221486306,"answer_id":62996,"question_id":62929,"body_markdown":"Whenever I have had odd issues like this, I usually sit down with a tool like [WireShark][1] and look at the raw data being passed back and forth. You might be surprised where things are being disconnected, and you are only being *notified* when you try and read.\r\n\r\n\r\n  [1]: http://www.wireshark.org/","title":"java.net.SocketException: Connection reset","body":"<p>Whenever I have had odd issues like this, I usually sit down with a tool like <a href=\"http://www.wireshark.org/\" rel=\"noreferrer\">WireShark</a> and look at the raw data being passed back and forth. You might be surprised where things are being disconnected, and you are only being <em>notified</em> when you try and read.</p>\n"},{"tags":[],"owner":{"account_id":2496,"reputation":266234,"user_id":3474,"accept_rate":83,"display_name":"erickson"},"down_vote_count":1,"up_vote_count":71,"is_accepted":false,"score":70,"last_activity_date":1412785253,"creation_date":1221487435,"answer_id":63155,"question_id":62929,"body_markdown":"Connection reset simply means that a TCP RST was received. This happens when your peer receives data that it can&#39;t process, and there can be various reasons for that.\r\n\r\nThe simplest is when you close the socket, and then write more data on the output stream. By closing the socket, you told your peer that you are done talking, and it can forget about your connection. When you send more data on that stream anyway, the peer rejects it with an RST to let you know it isn&#39;t listening.\r\n\r\nIn other cases, an intervening firewall or even the remote host itself might &quot;forget&quot; about your TCP connection. This could happen if you don&#39;t send any data for a long time (2 hours is a common time-out), or because the peer was rebooted and lost its information about active connections. Sending data on one of these defunct connections will cause a RST too.\r\n\r\n---\r\n\r\n*Update in response to additional information:* \r\n\r\nTake a close look at your handling of the `SocketTimeoutException`. This exception is raised if the configured timeout is exceeded while blocked on a socket operation. The state of the socket itself is not changed when this exception is thrown, but if your exception handler closes the socket, and then tries to write to it, you&#39;ll be in a connection reset condition. `setSoTimeout()` is meant to give you a clean way to break out of a `read()` operation that might otherwise block forever, without doing dirty things like closing the socket from another thread.\r\n","title":"java.net.SocketException: Connection reset","body":"<p>Connection reset simply means that a TCP RST was received. This happens when your peer receives data that it can't process, and there can be various reasons for that.</p>\n\n<p>The simplest is when you close the socket, and then write more data on the output stream. By closing the socket, you told your peer that you are done talking, and it can forget about your connection. When you send more data on that stream anyway, the peer rejects it with an RST to let you know it isn't listening.</p>\n\n<p>In other cases, an intervening firewall or even the remote host itself might \"forget\" about your TCP connection. This could happen if you don't send any data for a long time (2 hours is a common time-out), or because the peer was rebooted and lost its information about active connections. Sending data on one of these defunct connections will cause a RST too.</p>\n\n<hr>\n\n<p><em>Update in response to additional information:</em> </p>\n\n<p>Take a close look at your handling of the <code>SocketTimeoutException</code>. This exception is raised if the configured timeout is exceeded while blocked on a socket operation. The state of the socket itself is not changed when this exception is thrown, but if your exception handler closes the socket, and then tries to write to it, you'll be in a connection reset condition. <code>setSoTimeout()</code> is meant to give you a clean way to break out of a <code>read()</code> operation that might otherwise block forever, without doing dirty things like closing the socket from another thread.</p>\n"},{"tags":[],"owner":{"account_id":71739,"reputation":307143,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"down_vote_count":2,"up_vote_count":148,"is_accepted":false,"score":146,"last_activity_date":1432530111,"creation_date":1291003916,"answer_id":4300803,"question_id":62929,"body_markdown":"There are several possible causes.\r\n\r\n1. The other end has deliberately reset the connection, in a way which I will not document here. It is rare, and generally incorrect, for application software to do this, but it is not unknown for commercial software.\r\n\r\n2. More commonly, it is caused by writing to a connection that the other end has already closed normally. In other words an application protocol error.\r\n\r\n3. It can also be caused by closing a socket when there is unread data in the socket receive buffer.\r\n\r\n4. In Windows, &#39;software caused connection abort&#39;, which is not the same as &#39;connection reset&#39;, is caused by network problems sending from your end. There&#39;s a Microsoft knowledge base article about this.","title":"java.net.SocketException: Connection reset","body":"<p>There are several possible causes.</p>\n\n<ol>\n<li><p>The other end has deliberately reset the connection, in a way which I will not document here. It is rare, and generally incorrect, for application software to do this, but it is not unknown for commercial software.</p></li>\n<li><p>More commonly, it is caused by writing to a connection that the other end has already closed normally. In other words an application protocol error.</p></li>\n<li><p>It can also be caused by closing a socket when there is unread data in the socket receive buffer.</p></li>\n<li><p>In Windows, 'software caused connection abort', which is not the same as 'connection reset', is caused by network problems sending from your end. There's a Microsoft knowledge base article about this.</p></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":209068,"reputation":2211,"user_id":459904,"accept_rate":57,"display_name":"kml_ckr"},"down_vote_count":1,"up_vote_count":8,"is_accepted":false,"score":7,"last_activity_date":1301257813,"creation_date":1301257813,"answer_id":5452194,"question_id":62929,"body_markdown":"I had the same error. I found the solution for problem now. The problem was client program was finishing before server read the streams.","title":"java.net.SocketException: Connection reset","body":"<p>I had the same error. I found the solution for problem now. The problem was client program was finishing before server read the streams.</p>\n"},{"tags":[],"owner":{"account_id":120458,"reputation":471,"user_id":312921,"accept_rate":40,"display_name":"Scott S"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1374599423,"creation_date":1374599423,"answer_id":17816678,"question_id":62929,"body_markdown":"Embarrassing to say it, but when I had this problem, it was simply a mistake that I was closing the connection before I read all the data.  In cases with small strings being returned, it worked, but that was probably due to the whole response was buffered, before I closed it.\r\n\r\nIn cases of longer amounts of text being returned, the exception was thrown, since more then a buffer was coming back.\r\n\r\nYou might check for this oversight.  Remember opening a URL is like a file, be sure to close it (release the connection) once it has been fully read.","title":"java.net.SocketException: Connection reset","body":"<p>Embarrassing to say it, but when I had this problem, it was simply a mistake that I was closing the connection before I read all the data.  In cases with small strings being returned, it worked, but that was probably due to the whole response was buffered, before I closed it.</p>\n\n<p>In cases of longer amounts of text being returned, the exception was thrown, since more then a buffer was coming back.</p>\n\n<p>You might check for this oversight.  Remember opening a URL is like a file, be sure to close it (release the connection) once it has been fully read.</p>\n"},{"tags":[],"owner":{"account_id":1493724,"reputation":1565,"user_id":1400157,"accept_rate":67,"display_name":"pmartin8"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1405008473,"creation_date":1405008473,"answer_id":24681365,"question_id":62929,"body_markdown":"I also had this problem with a Java program trying to send a command on a server via SSH. The problem was with the machine executing the Java code. It didn&#39;t have the permission to connect to the remote server. The write() method was doing alright, but the read() method was throwing a java.net.SocketException: Connection reset. I fixed this problem with adding the client SSH key to the remote server known keys. \r\n\r\n","title":"java.net.SocketException: Connection reset","body":"<p>I also had this problem with a Java program trying to send a command on a server via SSH. The problem was with the machine executing the Java code. It didn't have the permission to connect to the remote server. The write() method was doing alright, but the read() method was throwing a java.net.SocketException: Connection reset. I fixed this problem with adding the client SSH key to the remote server known keys. </p>\n"},{"tags":[],"owner":{"account_id":350117,"reputation":8653,"user_id":685806,"accept_rate":44,"display_name":"Pino"},"down_vote_count":1,"up_vote_count":7,"is_accepted":false,"score":6,"last_activity_date":1505409502,"creation_date":1431087858,"answer_id":30123818,"question_id":62929,"body_markdown":"I had this problem with a SOA system written in Java.  I was running both the client and the server on different physical machines and they worked fine for a long time, then those nasty connection resets appeared in the client log and there wasn&#39;t anything strange in the server log.  Restarting both client and server didn&#39;t solve the problem.  Finally we discovered that the heap on the server side was rather full so we increased the memory available to the JVM: problem solved!  Note that there was no OutOfMemoryError in the log: memory was just scarce, not exhausted.","title":"java.net.SocketException: Connection reset","body":"<p>I had this problem with a SOA system written in Java.  I was running both the client and the server on different physical machines and they worked fine for a long time, then those nasty connection resets appeared in the client log and there wasn't anything strange in the server log.  Restarting both client and server didn't solve the problem.  Finally we discovered that the heap on the server side was rather full so we increased the memory available to the JVM: problem solved!  Note that there was no OutOfMemoryError in the log: memory was just scarce, not exhausted.</p>\n"},{"tags":[],"owner":{"account_id":179998,"reputation":5576,"user_id":413032,"accept_rate":59,"display_name":"Davut G&#252;rb&#252;z"},"down_vote_count":1,"up_vote_count":17,"is_accepted":false,"score":16,"last_activity_date":1606170742,"creation_date":1438330859,"answer_id":31741436,"question_id":62929,"body_markdown":"You should inspect full trace very carefully,\r\n\r\nI&#39;ve a server socket application and fixed a `java.net.SocketException: Connection reset` case.\r\n\r\nIn my case it happens while reading from a clientSocket `Socket` object which is closed its connection because of some reason. (Network lost,firewall or application crash or intended close)\r\n\r\nActually I was re-establishing connection when I got an error while reading from this Socket object.\r\n\r\n    Socket clientSocket = ServerSocket.accept();\r\n    is = new BufferedReader(new InputStreamReader(clientSocket.getInputStream()));\r\n    int readed = is.read(); // WHERE ERROR STARTS !!!\r\n\r\nThe interesting thing is `for my JAVA Socket` if a client connects to my `ServerSocket` and close its connection without sending anything `is.read()` is being called repeatedly.It seems because of being in an infinite while loop for reading from this socket you try to read from a closed connection. \r\nIf you use something like below for read operation;\r\n\r\n    while(true)\r\n    {\r\n      Receive();\r\n    }\r\n\r\nThen you get a stackTrace something like below on and on\r\n\r\n    java.net.SocketException: Socket is closed\r\n    \tat java.net.ServerSocket.accept(ServerSocket.java:494)\r\n\r\n  \r\nWhat I did is just closing ServerSocket and renewing my connection and waiting for further incoming client connections \r\n\r\n    String Receive() throws Exception\r\n    {\r\n    try {\t\t\t\t\t\r\n    \t\t\tint readed = is.read();\r\n               ....\r\n    }catch(Exception e)\r\n    {\r\n    \t\ttryReConnect();\r\n            logit(); //etc\r\n    }\r\n    \r\n    \r\n    //...\r\n    }\r\n\r\nThis reestablises my connection for unknown client socket losts\r\n\r\n    private void tryReConnect()\r\n        \t{\r\n        \t\ttry\r\n        \t\t{\r\n        \t\t\tServerSocket.close();\r\n                    //empty my old lost connection and let it get by garbage col. immediately \r\n                    clientSocket=null;\r\n            \t\tSystem.gc();\r\n                    //Wait a new client Socket connection and address this to my local variable\r\n        \t    \tclientSocket= ServerSocket.accept(); // Waiting for another Connection\r\n        \t\t    System.out.println(&quot;Connection established...&quot;);\r\n        \t\t}catch (Exception e) {\r\n        \t\t\tString message=&quot;ReConnect not successful &quot;+e.getMessage();\r\n        \t\t\tlogit();//etc...\r\n        \t\t}\r\n        \t}\r\n\r\nI couldn&#39;t find another way because as you see from below image you can&#39;t understand whether connection is lost or not without a `try and catch` ,because everything seems right . I got this snapshot while I was getting `Connection reset` continuously.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/T75Ul.png\r\n","title":"java.net.SocketException: Connection reset","body":"<p>You should inspect full trace very carefully,</p>\n<p>I've a server socket application and fixed a <code>java.net.SocketException: Connection reset</code> case.</p>\n<p>In my case it happens while reading from a clientSocket <code>Socket</code> object which is closed its connection because of some reason. (Network lost,firewall or application crash or intended close)</p>\n<p>Actually I was re-establishing connection when I got an error while reading from this Socket object.</p>\n<pre><code>Socket clientSocket = ServerSocket.accept();\nis = new BufferedReader(new InputStreamReader(clientSocket.getInputStream()));\nint readed = is.read(); // WHERE ERROR STARTS !!!\n</code></pre>\n<p>The interesting thing is <code>for my JAVA Socket</code> if a client connects to my <code>ServerSocket</code> and close its connection without sending anything <code>is.read()</code> is being called repeatedly.It seems because of being in an infinite while loop for reading from this socket you try to read from a closed connection.\nIf you use something like below for read operation;</p>\n<pre><code>while(true)\n{\n  Receive();\n}\n</code></pre>\n<p>Then you get a stackTrace something like below on and on</p>\n<pre><code>java.net.SocketException: Socket is closed\n    at java.net.ServerSocket.accept(ServerSocket.java:494)\n</code></pre>\n<p>What I did is just closing ServerSocket and renewing my connection and waiting for further incoming client connections</p>\n<pre><code>String Receive() throws Exception\n{\ntry {                   \n            int readed = is.read();\n           ....\n}catch(Exception e)\n{\n        tryReConnect();\n        logit(); //etc\n}\n\n\n//...\n}\n</code></pre>\n<p>This reestablises my connection for unknown client socket losts</p>\n<pre><code>private void tryReConnect()\n        {\n            try\n            {\n                ServerSocket.close();\n                //empty my old lost connection and let it get by garbage col. immediately \n                clientSocket=null;\n                System.gc();\n                //Wait a new client Socket connection and address this to my local variable\n                clientSocket= ServerSocket.accept(); // Waiting for another Connection\n                System.out.println(&quot;Connection established...&quot;);\n            }catch (Exception e) {\n                String message=&quot;ReConnect not successful &quot;+e.getMessage();\n                logit();//etc...\n            }\n        }\n</code></pre>\n<p>I couldn't find another way because as you see from below image you can't understand whether connection is lost or not without a <code>try and catch</code> ,because everything seems right . I got this snapshot while I was getting <code>Connection reset</code> continuously.</p>\n<p><a href=\"https://i.stack.imgur.com/T75Ul.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/T75Ul.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":2882532,"reputation":327,"user_id":2473061,"display_name":"Sumiya"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1565899993,"creation_date":1565899993,"answer_id":57515659,"question_id":62929,"body_markdown":"Check your server&#39;s Java version. Happened to me because my Weblogic 10.3.6 was on JDK 1.7.0_75 which was on TLSv1. The rest endpoint I was trying to consume was shutting down anything below TLSv1.2. \r\n\r\nBy default Weblogic was trying to negotiate the strongest shared protocol. See details here: https://stackoverflow.com/questions/34283829/issues-with-setting-https-protocols-system-property-for-https-connections.\r\n\r\nI added verbose SSL logging to identify the supported TLS. This indicated TLSv1 was being used for the handshake.&lt;br/&gt;\r\n`-Djavax.net.debug=ssl:handshake:verbose:keymanager:trustmanager -Djava.security.debug=access:stack`\r\n\r\nI resolved this by pushing the feature out to our JDK8-compatible product, JDK8 defaults to TLSv1.2. For those restricted to JDK7, I also successfully tested a workaround for Java 7 by upgrading to TLSv1.2. I used this answer: https://stackoverflow.com/questions/39157422/how-to-enable-tls-1-2-in-java-7","title":"java.net.SocketException: Connection reset","body":"<p>Check your server's Java version. Happened to me because my Weblogic 10.3.6 was on JDK 1.7.0_75 which was on TLSv1. The rest endpoint I was trying to consume was shutting down anything below TLSv1.2. </p>\n\n<p>By default Weblogic was trying to negotiate the strongest shared protocol. See details here: <a href=\"https://stackoverflow.com/questions/34283829/issues-with-setting-https-protocols-system-property-for-https-connections\">Issues with setting https.protocols System Property for HTTPS connections</a>.</p>\n\n<p>I added verbose SSL logging to identify the supported TLS. This indicated TLSv1 was being used for the handshake.<br/>\n<code>-Djavax.net.debug=ssl:handshake:verbose:keymanager:trustmanager -Djava.security.debug=access:stack</code></p>\n\n<p>I resolved this by pushing the feature out to our JDK8-compatible product, JDK8 defaults to TLSv1.2. For those restricted to JDK7, I also successfully tested a workaround for Java 7 by upgrading to TLSv1.2. I used this answer: <a href=\"https://stackoverflow.com/questions/39157422/how-to-enable-tls-1-2-in-java-7\">How to enable TLS 1.2 in Java 7</a></p>\n"},{"tags":[],"owner":{"account_id":2428271,"reputation":211,"user_id":2119761,"display_name":"bmck"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1591365644,"creation_date":1591365644,"answer_id":62217112,"question_id":62929,"body_markdown":"In my experience, I often encounter the following situations;\r\n\r\n1. If you work in a corporate company, contact the network and security team. Because in requests made to external services, it may be necessary to **give permission for the relevant endpoint.**\r\n\r\n2. Another issue is that the **SSL certificate may have expired** on the server where your application is running.","title":"java.net.SocketException: Connection reset","body":"<p>In my experience, I often encounter the following situations;</p>\n\n<ol>\n<li><p>If you work in a corporate company, contact the network and security team. Because in requests made to external services, it may be necessary to <strong>give permission for the relevant endpoint.</strong></p></li>\n<li><p>Another issue is that the <strong>SSL certificate may have expired</strong> on the server where your application is running.</p></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":4738367,"reputation":385,"user_id":3832031,"display_name":"tsotzolas"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1626938287,"creation_date":1626938287,"answer_id":68480666,"question_id":62929,"body_markdown":"In my case was `DNS problem` .  \r\nI put in `host file` the resolved IP and everything works fine. \r\nOf course it is not a permanent solution put this give me time to fix the DNS problem.","title":"java.net.SocketException: Connection reset","body":"<p>In my case was <code>DNS problem</code> .<br />\nI put in <code>host file</code> the resolved IP and everything works fine.\nOf course it is not a permanent solution put this give me time to fix the DNS problem.</p>\n"},{"tags":[],"owner":{"account_id":12203288,"reputation":165,"user_id":8907047,"display_name":"Thiago Ferreira"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1626970694,"creation_date":1626970694,"answer_id":68488293,"question_id":62929,"body_markdown":"I&#39;ve seen this problem. In my case, there was an error caused by reusing the same ClientRequest object in an specific Java class. That project was using [Jboss Resteasy][1].\r\n\r\n 1. Initially only one method was using/invoking the object ClientRequest (placed as global variable in the class) to do a request in an specific URL.\r\n 2. After that, another method was created to get data with another URL, reusing the same ClientRequest object, though.\r\n\r\n**The solution: in the same class was created another ClientRequest object and exclusively to not be reused.**\r\n\r\n  [1]: https://docs.jboss.org/resteasy/docs/3.0.13.Final/javadocs/org/jboss/resteasy/client/ClientRequest.html","title":"java.net.SocketException: Connection reset","body":"<p>I've seen this problem. In my case, there was an error caused by reusing the same ClientRequest object in an specific Java class. That project was using <a href=\"https://docs.jboss.org/resteasy/docs/3.0.13.Final/javadocs/org/jboss/resteasy/client/ClientRequest.html\" rel=\"nofollow noreferrer\">Jboss Resteasy</a>.</p>\n<ol>\n<li>Initially only one method was using/invoking the object ClientRequest (placed as global variable in the class) to do a request in an specific URL.</li>\n<li>After that, another method was created to get data with another URL, reusing the same ClientRequest object, though.</li>\n</ol>\n<p><strong>The solution: in the same class was created another ClientRequest object and exclusively to not be reused.</strong></p>\n"},{"tags":[],"owner":{"account_id":2880172,"reputation":1430,"user_id":2471275,"display_name":"Djek-Grif"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1645558775,"creation_date":1645558775,"answer_id":71227340,"question_id":62929,"body_markdown":"In my case it was problem with TSL version. I was using Retrofit with OkHttp client and after update ALB on server side I should have to delete my config with **connectionSpecs**:\r\n\r\n    OkHttpClient.Builder clientBuilder = new OkHttpClient.Builder();\r\n            List&lt;ConnectionSpec&gt; connectionSpecs = new ArrayList&lt;&gt;();\r\n            connectionSpecs.add(ConnectionSpec.COMPATIBLE_TLS);\r\n      //      clientBuilder.connectionSpecs(connectionSpecs);\r\n\r\nSo try to remove or add this config to use different TSL configurations.\r\n","title":"java.net.SocketException: Connection reset","body":"<p>In my case it was problem with TSL version. I was using Retrofit with OkHttp client and after update ALB on server side I should have to delete my config with <strong>connectionSpecs</strong>:</p>\n<pre><code>OkHttpClient.Builder clientBuilder = new OkHttpClient.Builder();\n        List&lt;ConnectionSpec&gt; connectionSpecs = new ArrayList&lt;&gt;();\n        connectionSpecs.add(ConnectionSpec.COMPATIBLE_TLS);\n  //      clientBuilder.connectionSpecs(connectionSpecs);\n</code></pre>\n<p>So try to remove or add this config to use different TSL configurations.</p>\n"},{"tags":[],"owner":{"account_id":1476987,"reputation":17785,"user_id":1387157,"accept_rate":94,"display_name":"MaVRoSCy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663924311,"creation_date":1663924311,"answer_id":73825492,"question_id":62929,"body_markdown":"I used to get the &#39;NotifyUtil::java.net.SocketException: Connection reset  at java.net.SocketInputStream.read(SocketInputStream.java:...&#39; message in the Apache Console of my Netbeans7.4 setup. \r\n\r\nI tried many solutions to get away from it, what worked for me is enabling the TLS on Tomcat. \r\n\r\nHere is how to: \r\n\r\n&gt; Create a keystore file to store the server&#39;s private key and\r\n&gt; self-signed certificate by executing the following command:\r\n&gt; \r\n&gt; Windows:\r\n&gt; \r\n&gt; &quot;%JAVA_HOME%\\bin\\keytool&quot; -genkey -alias tomcat -keyalg RSA\r\n&gt; \r\n&gt; Unix:\r\n&gt; \r\n&gt; $JAVA_HOME/bin/keytool -genkey -alias tomcat -keyalg RSA\r\n&gt; \r\n&gt; and specify a password value of &quot;changeit&quot;.\r\n\r\nAs per https://tomcat.apache.org/tomcat-7.0-doc/ssl-howto.html\r\n(This will create a .keystore file in your localuser dir)\r\n\r\nThen edit server.xml (uncomment and edit relevant lines) file (%CATALINA_HOME%apache-tomcat-7.0.41.0_base\\conf\\server.xml)  to enable SSL and TLS protocol:\r\n\r\n     &lt;Connector port=&quot;8443&quot; protocol=&quot;HTTP/1.1&quot; SSLEnabled=&quot;true&quot;\r\n                    maxThreads=&quot;150&quot; scheme=&quot;https&quot; secure=&quot;true&quot;\r\n                    clientAuth=&quot;false&quot; sslProtocol=&quot;TLS&quot; keystorePass=&quot;changeit&quot; /&gt;\r\n\r\n\r\nI hope this helps","title":"java.net.SocketException: Connection reset","body":"<p>I used to get the 'NotifyUtil::java.net.SocketException: Connection reset  at java.net.SocketInputStream.read(SocketInputStream.java:...' message in the Apache Console of my Netbeans7.4 setup.</p>\n<p>I tried many solutions to get away from it, what worked for me is enabling the TLS on Tomcat.</p>\n<p>Here is how to:</p>\n<blockquote>\n<p>Create a keystore file to store the server's private key and\nself-signed certificate by executing the following command:</p>\n<p>Windows:</p>\n<p>&quot;%JAVA_HOME%\\bin\\keytool&quot; -genkey -alias tomcat -keyalg RSA</p>\n<p>Unix:</p>\n<p>$JAVA_HOME/bin/keytool -genkey -alias tomcat -keyalg RSA</p>\n<p>and specify a password value of &quot;changeit&quot;.</p>\n</blockquote>\n<p>As per <a href=\"https://tomcat.apache.org/tomcat-7.0-doc/ssl-howto.html\" rel=\"nofollow noreferrer\">https://tomcat.apache.org/tomcat-7.0-doc/ssl-howto.html</a>\n(This will create a .keystore file in your localuser dir)</p>\n<p>Then edit server.xml (uncomment and edit relevant lines) file (%CATALINA_HOME%apache-tomcat-7.0.41.0_base\\conf\\server.xml)  to enable SSL and TLS protocol:</p>\n<pre><code> &lt;Connector port=&quot;8443&quot; protocol=&quot;HTTP/1.1&quot; SSLEnabled=&quot;true&quot;\n                maxThreads=&quot;150&quot; scheme=&quot;https&quot; secure=&quot;true&quot;\n                clientAuth=&quot;false&quot; sslProtocol=&quot;TLS&quot; keystorePass=&quot;changeit&quot; /&gt;\n</code></pre>\n<p>I hope this helps</p>\n"},{"tags":[],"owner":{"account_id":21586489,"reputation":21,"user_id":15916850,"display_name":"leksykoon"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1688373532,"creation_date":1688373532,"answer_id":76603132,"question_id":62929,"body_markdown":"I was also getting HTTP 500 error &quot;java.net.SocketException: Connection reset&quot;, and after couple of days of analyze it turned out that problem is caused by AWS NAT Gateway. I hope it will help someone to save a time and resolve the problem.\r\n\r\n**Infrastructure:**\r\n&lt;br&gt;\r\nAWS API Gateway (HTTP), AWS CloudMap, AWS Fargate.\r\n\r\n**Problem investigation:**\r\n&lt;br&gt;\r\nAfter deep investigation it turned out that the problem is caused by AWS NAT Gateway which keeps information about specific NAT translations for 350 sec and removes it if there is no traffic in that period.\r\nMy application uses Java HTTP client, which keeps connections for 20 minutes. Due to this, first 1 or 2 requests after time of 350 seconds ends with HTTP 500 Connection Reset. NAT Gateway doesn’t have information about that specific translations and it responds with RST flag - that’s why I saw “Connection Reset” in logs.\r\n\r\n**Implemented solution:**\r\n&lt;br&gt;\r\nChanging HTTP Java client to HTTP Apache client.\r\nHTTP Apache client properly keeps connection alive.\r\nOptionally you can adjust native Java HTTP client to send TCP keep-alive, or to close inactive connection earlier than 350sec.","title":"java.net.SocketException: Connection reset","body":"<p>I was also getting HTTP 500 error &quot;java.net.SocketException: Connection reset&quot;, and after couple of days of analyze it turned out that problem is caused by AWS NAT Gateway. I hope it will help someone to save a time and resolve the problem.</p>\n<p><strong>Infrastructure:</strong>\n<br>\nAWS API Gateway (HTTP), AWS CloudMap, AWS Fargate.</p>\n<p><strong>Problem investigation:</strong>\n<br>\nAfter deep investigation it turned out that the problem is caused by AWS NAT Gateway which keeps information about specific NAT translations for 350 sec and removes it if there is no traffic in that period.\nMy application uses Java HTTP client, which keeps connections for 20 minutes. Due to this, first 1 or 2 requests after time of 350 seconds ends with HTTP 500 Connection Reset. NAT Gateway doesn’t have information about that specific translations and it responds with RST flag - that’s why I saw “Connection Reset” in logs.</p>\n<p><strong>Implemented solution:</strong>\n<br>\nChanging HTTP Java client to HTTP Apache client.\nHTTP Apache client properly keeps connection alive.\nOptionally you can adjust native Java HTTP client to send TCP keep-alive, or to close inactive connection earlier than 350sec.</p>\n"},{"tags":[],"owner":{"account_id":1342236,"reputation":1244,"user_id":1283704,"display_name":"Michael Fayad"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1701092032,"creation_date":1699024726,"answer_id":77417829,"question_id":62929,"body_markdown":"I&#39;ve encountered a similar socket exception. We&#39;ve setup an MFT SFTP connection with two sequential control-m jobs each sending 10 files of 1Mo each for 1 minute to an external server. Sometimes, a file was missing on the external server with the following error in our MFT logs: \r\n\r\n    Error writing data to final destination. | Proxy error in reading file.\r\n    (...)\r\n    Failed to connect to ssh server. Exception: java.net.SocketTimeoutException\r\n\r\nWe fixed this anomaly by adding a 2 minutes delay between the scheduling of the two control-m jobs.","title":"java.net.SocketException: Connection reset","body":"<p>I've encountered a similar socket exception. We've setup an MFT SFTP connection with two sequential control-m jobs each sending 10 files of 1Mo each for 1 minute to an external server. Sometimes, a file was missing on the external server with the following error in our MFT logs:</p>\n<pre><code>Error writing data to final destination. | Proxy error in reading file.\n(...)\nFailed to connect to ssh server. Exception: java.net.SocketTimeoutException\n</code></pre>\n<p>We fixed this anomaly by adding a 2 minutes delay between the scheduling of the two control-m jobs.</p>\n"},{"tags":[],"owner":{"account_id":219006,"reputation":4141,"user_id":475635,"accept_rate":63,"display_name":"Francesco Marchioni"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700766768,"creation_date":1700766768,"answer_id":77539198,"question_id":62929,"body_markdown":"Overall, to find the root cause of the issue, I&#39;ve found helpful to trace incoming/outgoing tcp packets with a tool such as tcpdump.\r\nI&#39;ve found this article useful to show through a real session the detection of the root cause of the [Connection Reset Issue][1] by using a sample reproducer.\r\n\r\n\r\n  [1]: https://www.mastertheboss.com/java/how-to-solve-the-error-java-net-socketexception-connection-reset/","title":"java.net.SocketException: Connection reset","body":"<p>Overall, to find the root cause of the issue, I've found helpful to trace incoming/outgoing tcp packets with a tool such as tcpdump.\nI've found this article useful to show through a real session the detection of the root cause of the <a href=\"https://www.mastertheboss.com/java/how-to-solve-the-error-java-net-socketexception-connection-reset/\" rel=\"nofollow noreferrer\">Connection Reset Issue</a> by using a sample reproducer.</p>\n"}],"owner":{"display_name":"Darryl"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1154509,"favorite_count":0,"down_vote_count":1,"up_vote_count":185,"answer_count":17,"score":184,"last_activity_date":1701092032,"creation_date":1221485802,"question_id":62929,"body_markdown":"I am getting the following error trying to read from a socket. I&#39;m doing a `readInt()` on that `InputStream`, and I am getting this error. Perusing the documentation suggests that the client part of the connection closed the connection. In this scenario, I am the server.\r\n\r\nI have access to the client log files and it is not closing the connection, and its log files suggest I am closing the connection. So does anybody have an idea why this is happening? What else to check for? Does this arise when there are local resources that are perhaps reaching thresholds?\r\n\r\n---\r\n\r\nI do note that I have the following line:\r\n\r\n    socket.setSoTimeout(10000);\r\n\r\njust prior to the `readInt()`. There is a reason for this (long story), but just curious, are there circumstances under which this might lead to the indicated error? I have the server running in my IDE, and I happened to leave my IDE stuck on a breakpoint, and I then noticed the exact same errors begin appearing in my own logs in my IDE.\r\n\r\nAnyway, just mentioning it, hopefully not a red herring. ","title":"java.net.SocketException: Connection reset","body":"<p>I am getting the following error trying to read from a socket. I'm doing a <code>readInt()</code> on that <code>InputStream</code>, and I am getting this error. Perusing the documentation suggests that the client part of the connection closed the connection. In this scenario, I am the server.</p>\n<p>I have access to the client log files and it is not closing the connection, and its log files suggest I am closing the connection. So does anybody have an idea why this is happening? What else to check for? Does this arise when there are local resources that are perhaps reaching thresholds?</p>\n<hr />\n<p>I do note that I have the following line:</p>\n<pre><code>socket.setSoTimeout(10000);\n</code></pre>\n<p>just prior to the <code>readInt()</code>. There is a reason for this (long story), but just curious, are there circumstances under which this might lead to the indicated error? I have the server running in my IDE, and I happened to leave my IDE stuck on a breakpoint, and I then noticed the exact same errors begin appearing in my own logs in my IDE.</p>\n<p>Anyway, just mentioning it, hopefully not a red herring.</p>\n"},{"tags":["java","flutter","google-signin"],"comments":[{"owner":{"account_id":9141547,"reputation":573,"user_id":6799230,"display_name":"Pierre Janineh"},"score":0,"creation_date":1701093994,"post_id":77555951,"comment_id":136728642,"body_markdown":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer.","body":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer."}],"owner":{"account_id":19672969,"reputation":5,"user_id":14401820,"display_name":"Swann"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":2,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":0,"score":-2,"last_activity_date":1701091897,"creation_date":1701078732,"question_id":77555951,"body_markdown":"I&#39;m having trouble with the google_sign_in in flutter here&#39;s my error even though my sha keys are correct:\r\n[google sign in error](https://i.stack.imgur.com/lF5hm.png)\r\n\r\nwhile trying something I saw on this question (https://stackoverflow.com/questions/54557479/flutter-and-google-sign-in-plugin-platformexceptionsign-in-failed-com-google) I entered this command `./gradlew signingReport` I got this error :\r\n[gradlew error](https://i.stack.imgur.com/N07rd.png)\r\n\r\n\r\nI tried changing the java version for the project in Android studio but it looks like the project isn&#39;t recognize :\r\n[enter image description here](https://i.stack.imgur.com/NpgU8.jpg)\r\n[enter image description here](https://i.stack.imgur.com/BL1EM.jpg)\r\n\r\n\r\nWhen I tried to get to the java version option it doesn&#39;t appear :\r\n[enter image description here](https://i.stack.imgur.com/pUo4d.png)\r\n[enter image description here](https://i.stack.imgur.com/5GlP0.png)\r\n\r\n\r\nHope I&#39;ll get some answers","title":"Error with the google_sign_in in flutter and java version","body":"<p>I'm having trouble with the google_sign_in in flutter here's my error even though my sha keys are correct:\n<a href=\"https://i.stack.imgur.com/lF5hm.png\" rel=\"nofollow noreferrer\">google sign in error</a></p>\n<p>while trying something I saw on this question (<a href=\"https://stackoverflow.com/questions/54557479/flutter-and-google-sign-in-plugin-platformexceptionsign-in-failed-com-google\">Flutter and google_sign_in plugin: PlatformException(sign_in_failed, com.google.android.gms.common.api.ApiException: 10: , null)</a>) I entered this command <code>./gradlew signingReport</code> I got this error :\n<a href=\"https://i.stack.imgur.com/N07rd.png\" rel=\"nofollow noreferrer\">gradlew error</a></p>\n<p>I tried changing the java version for the project in Android studio but it looks like the project isn't recognize :\n<a href=\"https://i.stack.imgur.com/NpgU8.jpg\" rel=\"nofollow noreferrer\">enter image description here</a>\n<a href=\"https://i.stack.imgur.com/BL1EM.jpg\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>When I tried to get to the java version option it doesn't appear :\n<a href=\"https://i.stack.imgur.com/pUo4d.png\" rel=\"nofollow noreferrer\">enter image description here</a>\n<a href=\"https://i.stack.imgur.com/5GlP0.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>Hope I'll get some answers</p>\n"},{"tags":["java","apache-kafka","azure-functions","avro"],"comments":[{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1700847159,"post_id":77544241,"comment_id":136706892,"body_markdown":"What exactly is incomplete? What do you &quot;malformed&quot;. Looks like every field is there from the schema. Everything in the meeting record has a default of null... Have you tried using `ConsumerRecord&lt;K, Meeting&gt;`?","body":"What exactly is incomplete? What do you &quot;malformed&quot;. Looks like every field is there from the schema. Everything in the meeting record has a default of null... Have you tried using <code>ConsumerRecord&lt;K, Meeting&gt;</code>?"},{"owner":{"account_id":26735418,"reputation":3,"user_id":20377235,"display_name":"Luk&#225;š Bartoněk"},"score":0,"creation_date":1701071690,"post_id":77544241,"comment_id":136724862,"body_markdown":"When I use:\n\n                  dataType = &quot;string&quot;,\n                    avroSchema = avro,\n                    schemaRegistryUrl = &quot;%SchemaRegistry%&quot;,\n                    consumerGroup=&quot;%ConsumerGroup%&quot;) String kafkaEventData\n\nI give String which contains data only for first level. Next level contains only schema.\n\n{&quot;correlationId&quot;:&quot;iaymjxnlpnocbe&quot;,&quot;meeting&quot;:{&quot;Schema&quot;:{&quot;Fields&quot;:[{&quot;Name&quot;:&quot;assistanceType&quot;,&quot;aliases&quot;:null,&quot;Aliases&quot;:null,&quot;Pos&quot;:0,&quot;Documentation&quot;:&quot;Typ asistence na schuzce.&quot;,&quot;DefaultValue&quot;:null,&quot;Ordering&quot;:2,&quot;Schema&quot;:{&quot;Schemas&quot;:[{&quot;Name&quot;:&quot;null&quot;,&quot;Tag&quot;:0,&quot;Fullname&quot;:&quot;null&quot;},","body":"When I use:                    dataType = &quot;string&quot;,                     avroSchema = avro,                     schemaRegistryUrl = &quot;%SchemaRegistry%&quot;,                     consumerGroup=&quot;%ConsumerGroup%&quot;) String kafkaEventData  I give String which contains data only for first level. Next level contains only schema.  {&quot;correlationId&quot;:&quot;iaymjxnlpnocbe&quot;,&quot;meeting&quot;:{&quot;Schema&quot;:{&quot;Fiel&zwnj;&#8203;ds&quot;:[{&quot;Name&quot;:&quot;assist&zwnj;&#8203;anceType&quot;,&quot;aliases&quot;:&zwnj;&#8203;null,&quot;Aliases&quot;:null,&zwnj;&#8203;&quot;Pos&quot;:0,&quot;Documentati&zwnj;&#8203;on&quot;:&quot;Typ asistence na schuzce.&quot;,&quot;DefaultValue&quot;:null,&quot;Ordering&quot;:2,&quot;Schema&quot;:{&quot;Schema&zwnj;&#8203;s&quot;:[{&quot;Name&quot;:&quot;null&quot;,&quot;&zwnj;&#8203;Tag&quot;:0,&quot;Fullname&quot;:&quot;n&zwnj;&#8203;ull&quot;},"},{"owner":{"account_id":26735418,"reputation":3,"user_id":20377235,"display_name":"Luk&#225;š Bartoněk"},"score":0,"creation_date":1701071818,"post_id":77544241,"comment_id":136724878,"body_markdown":"When I use:\n\n                   avroSchema = avro,\n                    schemaRegistryUrl = &quot;%SchemaRegistry%&quot;,\n                    consumerGroup=&quot;%ConsumerGroup%&quot;) ConsumerRecord&lt;Object, Meeting&gt; kafkaEventData\n\nI give exception:\n\nMethod threw &#39;java.lang.NullPointerException&#39; exception. Cannot evaluate org.apache.kafka.clients.consumer.ConsumerRecord.toString()","body":"When I use:                     avroSchema = avro,                     schemaRegistryUrl = &quot;%SchemaRegistry%&quot;,                     consumerGroup=&quot;%ConsumerGroup%&quot;) ConsumerRecord&lt;Object, Meeting&gt; kafkaEventData  I give exception:  Method threw &#39;java.lang.NullPointerException&#39; exception. Cannot evaluate org.apache.kafka.clients.consumer.ConsumerRecord.toString()"}],"answers":[{"tags":[],"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1701090658,"creation_date":1701090658,"answer_id":77557166,"question_id":77544241,"body_markdown":"Ultimately, I think it&#39;s working as documented... You&#39;ll need to contact Azure support to get anything different... \r\n\r\nAccording to the documentation, if you use string, then you&#39;ll always get the whole record as json, and must manually deserialize using json first before you can process anything else. \r\n\r\nIf you don&#39;t want json, you can also supply datatype as binary, in which case, you&#39;ll still need to manually deserialize the data using Confluent deserializer class, but still, that may only be the value \r\n\r\nWhen using avro datatype, you can only supply a schema for the value, not also a key, assuming it were Avro as well.\r\n\r\n---\r\n\r\nYou can find an example here for getting the record headers and you&#39;ll have to do something similar to get the key\r\n\r\nhttps://github.com/Azure/azure-functions-kafka-extension/blob/dev/samples/java/confluent/src/main/java/com/contoso/kafka/KafkaTriggerWithHeaders.java\r\n\r\n","title":"Azure Functions - KafkaTrigger - Deserialize composite object with avro return null values on second level","body":"<p>Ultimately, I think it's working as documented... You'll need to contact Azure support to get anything different...</p>\n<p>According to the documentation, if you use string, then you'll always get the whole record as json, and must manually deserialize using json first before you can process anything else.</p>\n<p>If you don't want json, you can also supply datatype as binary, in which case, you'll still need to manually deserialize the data using Confluent deserializer class, but still, that may only be the value</p>\n<p>When using avro datatype, you can only supply a schema for the value, not also a key, assuming it were Avro as well.</p>\n<hr />\n<p>You can find an example here for getting the record headers and you'll have to do something similar to get the key</p>\n<p><a href=\"https://github.com/Azure/azure-functions-kafka-extension/blob/dev/samples/java/confluent/src/main/java/com/contoso/kafka/KafkaTriggerWithHeaders.java\" rel=\"nofollow noreferrer\">https://github.com/Azure/azure-functions-kafka-extension/blob/dev/samples/java/confluent/src/main/java/com/contoso/kafka/KafkaTriggerWithHeaders.java</a></p>\n"}],"owner":{"account_id":26735418,"reputation":3,"user_id":20377235,"display_name":"Luk&#225;š Bartoněk"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77557166,"answer_count":1,"score":0,"last_activity_date":1701090658,"creation_date":1700839989,"question_id":77544241,"body_markdown":"I&#39;am creating Azure Functions using KafkaTrigger to consume data from Kafka, where an Avro schema is registered. When i use dataType = &quot;binary&quot;, i can deserialize the message, but I&#39;m unable to get the message key, only value. When I use avroSchema = myAvro, I can get an object containing the key, but the data is in a malformed string format.\r\n\r\nI need deserialize complex object. Ideal with use schema registry.\r\n\r\n```\r\n@KafkaTrigger(\r\n    name = &quot;kafkaMeetingTrigger&quot;,\r\n    topic = &quot;topicName&quot;,\r\n    brokerList = &quot;%BrokerList%&quot;,\r\n    cardinality = Cardinality.ONE,\r\n    sslCertificateLocation = &quot;%KafkaCert%&quot;,\r\n    sslKeyLocation = &quot;%KafkaCert%&quot;,\r\n    sslCaLocation = &quot;%KafkaCert%&quot;,\r\n    protocol = BrokerProtocol.SSL,\r\n    dataType = &quot;binary&quot;,\r\n    schemaRegistryUrl = &quot;%SchemaRegistry%&quot;,\r\n    consumerGroup=&quot;%ConsumerGroup%&quot;) byte[] kafkaEventData,\r\n```\r\n\r\nThis return byte array with value from Kafka. Then I able to deserialize to my object, but key is lost.\r\n\r\n```\r\n@KafkaTrigger(\r\n    name = &quot;kafkaMeetingTrigger&quot;,\r\n    topic = &quot;topicName&quot;,\r\n    brokerList = &quot;%BrokerList%&quot;,\r\n    cardinality = Cardinality.ONE,\r\n    sslCertificateLocation = &quot;%KafkaCert%&quot;,\r\n    sslKeyLocation = &quot;%KafkaCert%&quot;,\r\n    sslCaLocation = &quot;%KafkaCert%&quot;,\r\n    protocol = BrokerProtocol.SSL,\r\n    avroSchema = avro,\r\n    consumerGroup=&quot;%ConsumerGroup%&quot;) Meeting kafkaEventData\r\n```\r\n\r\nThis return incomplete object.\r\n\r\n    {\r\n    &quot;correlationId&quot;: &quot;iaymjxnlpnocbe&quot;,\r\n    &quot;meeting&quot;:\r\n    {\r\n        &quot;assistanceType&quot;: null,\r\n        &quot;attendanceType&quot;: null,\r\n        &quot;clients&quot;: null,\r\n        &quot;communicationType&quot;: null\r\n    },\r\n    &quot;published&quot;: &quot;2023-11-24T11:31:05.105Z&quot;,\r\n    &quot;transactionId&quot;: &quot;ipdsrntgklkvliyt&quot;\r\n}\r\n\r\nExample of avro:\r\n\r\n```\r\n{\r\n  &quot;type&quot;: &quot;record&quot;,\r\n  &quot;name&quot;: &quot;Meeting_keyDataChanged&quot;,\r\n  &quot;namespace&quot;: &quot;cz.csas.avroschemas.meeting_keydatachanged.v03_02&quot;,\r\n  &quot;fields&quot;: [\r\n    {\r\n      &quot;name&quot;: &quot;correlationId&quot;,\r\n      &quot;type&quot;: &quot;string&quot;\r\n    },\r\n    {\r\n      &quot;name&quot;: &quot;meeting&quot;,\r\n      &quot;type&quot;: {\r\n        &quot;type&quot;: &quot;record&quot;,\r\n        &quot;name&quot;: &quot;Meeting&quot;,\r\n        &quot;fields&quot;: [\r\n          {\r\n            &quot;name&quot;: &quot;assistanceType&quot;,\r\n            &quot;type&quot;: [\r\n              &quot;null&quot;,\r\n              &quot;string&quot;\r\n            ],\r\n            &quot;default&quot;: null\r\n          },\r\n          {\r\n            &quot;name&quot;: &quot;attendanceType&quot;,\r\n            &quot;type&quot;: [\r\n              &quot;null&quot;,\r\n              &quot;string&quot;\r\n            ],\r\n            &quot;default&quot;: null\r\n          },\r\n          {\r\n            &quot;name&quot;: &quot;clients&quot;,\r\n            &quot;type&quot;: [\r\n              &quot;null&quot;,\r\n              {\r\n                &quot;type&quot;: &quot;array&quot;,\r\n                &quot;items&quot;: {\r\n                  &quot;type&quot;: &quot;record&quot;,\r\n                  &quot;name&quot;: &quot;Client&quot;,\r\n                  &quot;fields&quot;: [\r\n                    {\r\n                      &quot;name&quot;: &quot;clientType&quot;,\r\n                      &quot;type&quot;: &quot;string&quot;\r\n                    },\r\n                    {\r\n                      &quot;name&quot;: &quot;isPrimary&quot;,\r\n                      &quot;type&quot;: &quot;boolean&quot;\r\n                    }\r\n                  ]\r\n                }\r\n              }\r\n            ],\r\n            &quot;default&quot;: null\r\n          },\r\n       .........\r\n    {\r\n      &quot;name&quot;: &quot;published&quot;,\r\n      &quot;type&quot;: {\r\n        &quot;type&quot;: &quot;long&quot;,\r\n        &quot;logicalType&quot;: &quot;timestamp-millis&quot;\r\n      }\r\n    },\r\n    {\r\n      &quot;name&quot;: &quot;transactionId&quot;,\r\n      &quot;type&quot;: &quot;string&quot;\r\n    }\r\n  ]\r\n}\r\n```\r\n\r\n```\r\n@KafkaTrigger(\r\n   name = &quot;kafkaMeetingTrigger&quot;,\r\n   topic = &quot;EVT.Meeting_keyDataChanged_v03_02&quot;,\r\n   brokerList = &quot;%BrokerList%&quot;,\r\n   cardinality = Cardinality.ONE,\r\n   sslCertificateLocation = &quot;%KafkaCert%&quot;,\r\n   sslKeyLocation = &quot;%KafkaCert%&quot;,\r\n   sslCaLocation = &quot;%KafkaCert%&quot;,\r\n   protocol = BrokerProtocol.SSL,\r\n   avroSchema = avro,\r\n   schemaRegistryUrl = &quot;%SchemaRegistry%&quot;,\r\n   consumerGroup=&quot;%ConsumerGroup%&quot;) ConsumerRecord&lt;Object, Meeting&gt; kafkaEventData\r\n```\r\n\r\nThis return exception: Cannot evaluate org.apache.kafka.clients.consumer.ConsumerRecord.toString()\r\n\r\n```\r\n@KafkaTrigger(\r\n    name = &quot;kafkaMeetingTrigger&quot;,\r\n    topic = &quot;EVT.Meeting_keyDataChanged_v03_02&quot;,\r\n    brokerList = &quot;%BrokerList%&quot;,\r\n    cardinality = Cardinality.ONE,\r\n    sslCertificateLocation = &quot;%KafkaCert%&quot;,\r\n    sslKeyLocation = &quot;%KafkaCert%&quot;,\r\n    sslCaLocation = &quot;%KafkaCert%&quot;,\r\n    protocol = BrokerProtocol.SSL,\r\n    dataType = &quot;string&quot;,\r\n    avroSchema = avro,\r\n    schemaRegistryUrl = &quot;%SchemaRegistry%&quot;,\r\n    consumerGroup=&quot;%ConsumerGroup%&quot;) String kafkaEventData\r\n```\r\n\r\nThis return String which contains data only for first level. Next level contains only schema.\r\n\r\n```\r\n{&quot;correlationId&quot;:&quot;iaymjxnlpnocbe&quot;,&quot;meeting&quot;:{&quot;Schema&quot;:{&quot;Fields&quot;:[{&quot;Name&quot;:&quot;assistanceType&quot;,&quot;aliases&quot;:null,&quot;Aliases&quot;:null,&quot;Pos&quot;:0,&quot;Documentation&quot;:&quot;Typ asistence na schuzce.&quot;,&quot;DefaultValue&quot;:null,&quot;Ordering&quot;:2,&quot;Schema&quot;:{&quot;Schemas&quot;:[{&quot;Name&quot;:&quot;null&quot;,&quot;Tag&quot;:0,&quot;Fullname&quot;:&quot;null&quot;},{&quot;Name&quot;:&quot;string&quot;,&quot;Tag&quot;:7,&quot;Fullname&quot;:&quot;string&quot;}],&quot;Count&quot;:2,&quot;Name&quot;:&quot;union&quot;,&quot;Tag&quot;:12,&quot;Fullname&quot;:&quot;union&quot;}},{&quot;Name&quot;:&quot;attendanceType&quot;,&quot;aliases&quot;:null,&quot;Aliases&quot;:null,&quot;Pos&quot;:1,&quot;Documentation&quot;:&quot;Typ doprovodu na schuzce.&quot;,&quot;DefaultValue&quot;:null,&quot;Ordering&quot;:2,&quot;Schema&quot;:{&quot;Schemas&quot;:[{&quot;Name&quot;:&quot;null&quot;,&quot;Tag&quot;:0,&quot;Fullname&quot;:&quot;null&quot;},{&quot;Name&quot;:&quot;string&quot;,&quot;Tag&quot;:7,&quot;Fullname&quot;:&quot;string&quot;}],&quot;Count&quot;:2,&quot;Name&quot;:&quot;union&quot;,&quot;Tag&quot;:12,&quot;Fullname&quot;:&quot;union&quot;}},{&quot;Name&quot;:&quot;clients&quot;,&quot;aliases&quot;:null,&quot;Aliases&quot;:null,&quot;Pos&quot;:2,&quot;Documentation&quot;:null,&quot;DefaultValue&quot;:null,&quot;Ordering&quot;:2,&quot;Schema&quot;:{&quot;Schemas&quot;:[{&quot;Name&quot;:&quot;null&quot;,&quot;Tag&quot;:0,......\r\n```\r\n\r\nWhen I don&#39;t use avro I give whole object with key and offset, but Object can&#39;t deserialize.\r\n\r\n```\r\n@KafkaTrigger(\r\n    name = &quot;kafkaMeetingTrigger&quot;,\r\n    topic = &quot;EVT.Meeting_keyDataChanged_v03_02&quot;,\r\n    brokerList = &quot;%BrokerList%&quot;,\r\n    cardinality = Cardinality.ONE,\r\n    sslCertificateLocation = &quot;%KafkaCert%&quot;,\r\n    sslKeyLocation = &quot;%KafkaCert%&quot;,\r\n    sslCaLocation = &quot;%KafkaCert%&quot;,\r\n    protocol = BrokerProtocol.SSL,\r\n    dataType = &quot;string&quot;,\r\n    schemaRegistryUrl = &quot;%SchemaRegistry%&quot;,\r\n    consumerGroup=&quot;%ConsumerGroup%&quot;) String kafkaEventData\r\n```\r\n\r\nExample of result\r\n```\r\n{\r\n    &quot;Offset&quot;: 323,\r\n    &quot;Partition&quot;: 0,\r\n    &quot;Topic&quot;: &quot;EVT.Meeting_keyDataChanged_v03_02&quot;,\r\n    &quot;Timestamp&quot;: &quot;2023-11-27T07:46:12.435Z&quot;,\r\n    &quot;Value&quot;: &quot;\\u0000\\u0000\\u0000\\bE\\u001ciaymjxnlpnocbe\\u0002\\u0016kbsdkmeyalo\\u00022urhywvxlrixyuqhhmrioqvpxv\\u0002\\u0002&lt;mcxbasjpxwfbjmogfdlmyucmtkiffpHnmysbemqgyeqnelyhjboneshwjufsulyfpfv\\u0001\\u0000\\u0002.tslhjfloiepkmuneymnqbjc\\u0002(fxjlobrtqoaymkfwurqm\\u0002\\brxsy��ȑ�c\\u0000\\u0002Bsqnsoblhpfkobciourcjtpwxrgqnvdtrq\\u0002\\u001ewwntnicjjvcsglu\\u0002&amp;sdpdptdflhjlkrhxlls\\u00020msrqlxpjbdkkgbwsuslaeeql\\u0002&lt;nvttxsgwwlmgvtbhflbmdvtfceasvm\\u0002Nakybxmgwxlapymnfymqytjwdqcwfipivsnmjpmi\\u0002\\u0002\\bselt\\bpmep\\u0002:gcpxjxwrqtceoysrirqvdnllmhcdv\\u0002\\u001accbfdnjyrbtxi\\u0004tr��ȑ�cBxouriawfhfevlthfcfikpuaarjxfmmwkl\\u0002.gvoiukbrporvptduebdvucb\\u0002\\u0006xsp\\b\\u0002\\u0002(mfiudurtxmiejnynnjis\\u0002@qcohlkrkprlkuydljhpkilaxoxsvrrbg\\u0002\\u001anptiwyholnpfr\\u0001@usyyfhyjfoyoaulsvnyjnxcqicfscbkl\\u0002\\u0002Hsgduxxraimgjsduecbgyvypeupuhmvuqcwkc\\u0002\\u001ehxhupdrenujqcrx\\u00028khjhnbyjeihfkfrmkuuyepvxdhbv\\u00016vijyhthrgatcjxqbimfslksnrti\\u0002\\u0002Hrbudwdqichgdgwwgnscljauphjclxbrjpmoe\\u00024jxkknmcltpitgocsfdcrwjuvoc\\u0002\\bklpd\\u0001Jkuwvteymnagdcjvtjwlnvktwjfqbncgpxbhnh\\u0002\\u0002Jjgsfdxrsujpbkdbewkuudtsdajvmexniuwpxu\\u0002Fgerujewxkcnmexffsujlyibkbidnjxyiedr\\u0002\\u0000\\u0001.bdfyrklhntdbknmuxvrgwjc\\u0000��ȑ�c ipdsrntgklkvliyt&quot;,\r\n    &quot;Key&quot;: null,\r\n    &quot;Headers&quot;:\r\n    []\r\n}\r\n```\r\n\r\n","title":"Azure Functions - KafkaTrigger - Deserialize composite object with avro return null values on second level","body":"<p>I'am creating Azure Functions using KafkaTrigger to consume data from Kafka, where an Avro schema is registered. When i use dataType = &quot;binary&quot;, i can deserialize the message, but I'm unable to get the message key, only value. When I use avroSchema = myAvro, I can get an object containing the key, but the data is in a malformed string format.</p>\n<p>I need deserialize complex object. Ideal with use schema registry.</p>\n<pre><code>@KafkaTrigger(\n    name = &quot;kafkaMeetingTrigger&quot;,\n    topic = &quot;topicName&quot;,\n    brokerList = &quot;%BrokerList%&quot;,\n    cardinality = Cardinality.ONE,\n    sslCertificateLocation = &quot;%KafkaCert%&quot;,\n    sslKeyLocation = &quot;%KafkaCert%&quot;,\n    sslCaLocation = &quot;%KafkaCert%&quot;,\n    protocol = BrokerProtocol.SSL,\n    dataType = &quot;binary&quot;,\n    schemaRegistryUrl = &quot;%SchemaRegistry%&quot;,\n    consumerGroup=&quot;%ConsumerGroup%&quot;) byte[] kafkaEventData,\n</code></pre>\n<p>This return byte array with value from Kafka. Then I able to deserialize to my object, but key is lost.</p>\n<pre><code>@KafkaTrigger(\n    name = &quot;kafkaMeetingTrigger&quot;,\n    topic = &quot;topicName&quot;,\n    brokerList = &quot;%BrokerList%&quot;,\n    cardinality = Cardinality.ONE,\n    sslCertificateLocation = &quot;%KafkaCert%&quot;,\n    sslKeyLocation = &quot;%KafkaCert%&quot;,\n    sslCaLocation = &quot;%KafkaCert%&quot;,\n    protocol = BrokerProtocol.SSL,\n    avroSchema = avro,\n    consumerGroup=&quot;%ConsumerGroup%&quot;) Meeting kafkaEventData\n</code></pre>\n<p>This return incomplete object.</p>\n<pre><code>{\n&quot;correlationId&quot;: &quot;iaymjxnlpnocbe&quot;,\n&quot;meeting&quot;:\n{\n    &quot;assistanceType&quot;: null,\n    &quot;attendanceType&quot;: null,\n    &quot;clients&quot;: null,\n    &quot;communicationType&quot;: null\n},\n&quot;published&quot;: &quot;2023-11-24T11:31:05.105Z&quot;,\n&quot;transactionId&quot;: &quot;ipdsrntgklkvliyt&quot;\n</code></pre>\n<p>}</p>\n<p>Example of avro:</p>\n<pre><code>{\n  &quot;type&quot;: &quot;record&quot;,\n  &quot;name&quot;: &quot;Meeting_keyDataChanged&quot;,\n  &quot;namespace&quot;: &quot;cz.csas.avroschemas.meeting_keydatachanged.v03_02&quot;,\n  &quot;fields&quot;: [\n    {\n      &quot;name&quot;: &quot;correlationId&quot;,\n      &quot;type&quot;: &quot;string&quot;\n    },\n    {\n      &quot;name&quot;: &quot;meeting&quot;,\n      &quot;type&quot;: {\n        &quot;type&quot;: &quot;record&quot;,\n        &quot;name&quot;: &quot;Meeting&quot;,\n        &quot;fields&quot;: [\n          {\n            &quot;name&quot;: &quot;assistanceType&quot;,\n            &quot;type&quot;: [\n              &quot;null&quot;,\n              &quot;string&quot;\n            ],\n            &quot;default&quot;: null\n          },\n          {\n            &quot;name&quot;: &quot;attendanceType&quot;,\n            &quot;type&quot;: [\n              &quot;null&quot;,\n              &quot;string&quot;\n            ],\n            &quot;default&quot;: null\n          },\n          {\n            &quot;name&quot;: &quot;clients&quot;,\n            &quot;type&quot;: [\n              &quot;null&quot;,\n              {\n                &quot;type&quot;: &quot;array&quot;,\n                &quot;items&quot;: {\n                  &quot;type&quot;: &quot;record&quot;,\n                  &quot;name&quot;: &quot;Client&quot;,\n                  &quot;fields&quot;: [\n                    {\n                      &quot;name&quot;: &quot;clientType&quot;,\n                      &quot;type&quot;: &quot;string&quot;\n                    },\n                    {\n                      &quot;name&quot;: &quot;isPrimary&quot;,\n                      &quot;type&quot;: &quot;boolean&quot;\n                    }\n                  ]\n                }\n              }\n            ],\n            &quot;default&quot;: null\n          },\n       .........\n    {\n      &quot;name&quot;: &quot;published&quot;,\n      &quot;type&quot;: {\n        &quot;type&quot;: &quot;long&quot;,\n        &quot;logicalType&quot;: &quot;timestamp-millis&quot;\n      }\n    },\n    {\n      &quot;name&quot;: &quot;transactionId&quot;,\n      &quot;type&quot;: &quot;string&quot;\n    }\n  ]\n}\n</code></pre>\n<pre><code>@KafkaTrigger(\n   name = &quot;kafkaMeetingTrigger&quot;,\n   topic = &quot;EVT.Meeting_keyDataChanged_v03_02&quot;,\n   brokerList = &quot;%BrokerList%&quot;,\n   cardinality = Cardinality.ONE,\n   sslCertificateLocation = &quot;%KafkaCert%&quot;,\n   sslKeyLocation = &quot;%KafkaCert%&quot;,\n   sslCaLocation = &quot;%KafkaCert%&quot;,\n   protocol = BrokerProtocol.SSL,\n   avroSchema = avro,\n   schemaRegistryUrl = &quot;%SchemaRegistry%&quot;,\n   consumerGroup=&quot;%ConsumerGroup%&quot;) ConsumerRecord&lt;Object, Meeting&gt; kafkaEventData\n</code></pre>\n<p>This return exception: Cannot evaluate org.apache.kafka.clients.consumer.ConsumerRecord.toString()</p>\n<pre><code>@KafkaTrigger(\n    name = &quot;kafkaMeetingTrigger&quot;,\n    topic = &quot;EVT.Meeting_keyDataChanged_v03_02&quot;,\n    brokerList = &quot;%BrokerList%&quot;,\n    cardinality = Cardinality.ONE,\n    sslCertificateLocation = &quot;%KafkaCert%&quot;,\n    sslKeyLocation = &quot;%KafkaCert%&quot;,\n    sslCaLocation = &quot;%KafkaCert%&quot;,\n    protocol = BrokerProtocol.SSL,\n    dataType = &quot;string&quot;,\n    avroSchema = avro,\n    schemaRegistryUrl = &quot;%SchemaRegistry%&quot;,\n    consumerGroup=&quot;%ConsumerGroup%&quot;) String kafkaEventData\n</code></pre>\n<p>This return String which contains data only for first level. Next level contains only schema.</p>\n<pre><code>{&quot;correlationId&quot;:&quot;iaymjxnlpnocbe&quot;,&quot;meeting&quot;:{&quot;Schema&quot;:{&quot;Fields&quot;:[{&quot;Name&quot;:&quot;assistanceType&quot;,&quot;aliases&quot;:null,&quot;Aliases&quot;:null,&quot;Pos&quot;:0,&quot;Documentation&quot;:&quot;Typ asistence na schuzce.&quot;,&quot;DefaultValue&quot;:null,&quot;Ordering&quot;:2,&quot;Schema&quot;:{&quot;Schemas&quot;:[{&quot;Name&quot;:&quot;null&quot;,&quot;Tag&quot;:0,&quot;Fullname&quot;:&quot;null&quot;},{&quot;Name&quot;:&quot;string&quot;,&quot;Tag&quot;:7,&quot;Fullname&quot;:&quot;string&quot;}],&quot;Count&quot;:2,&quot;Name&quot;:&quot;union&quot;,&quot;Tag&quot;:12,&quot;Fullname&quot;:&quot;union&quot;}},{&quot;Name&quot;:&quot;attendanceType&quot;,&quot;aliases&quot;:null,&quot;Aliases&quot;:null,&quot;Pos&quot;:1,&quot;Documentation&quot;:&quot;Typ doprovodu na schuzce.&quot;,&quot;DefaultValue&quot;:null,&quot;Ordering&quot;:2,&quot;Schema&quot;:{&quot;Schemas&quot;:[{&quot;Name&quot;:&quot;null&quot;,&quot;Tag&quot;:0,&quot;Fullname&quot;:&quot;null&quot;},{&quot;Name&quot;:&quot;string&quot;,&quot;Tag&quot;:7,&quot;Fullname&quot;:&quot;string&quot;}],&quot;Count&quot;:2,&quot;Name&quot;:&quot;union&quot;,&quot;Tag&quot;:12,&quot;Fullname&quot;:&quot;union&quot;}},{&quot;Name&quot;:&quot;clients&quot;,&quot;aliases&quot;:null,&quot;Aliases&quot;:null,&quot;Pos&quot;:2,&quot;Documentation&quot;:null,&quot;DefaultValue&quot;:null,&quot;Ordering&quot;:2,&quot;Schema&quot;:{&quot;Schemas&quot;:[{&quot;Name&quot;:&quot;null&quot;,&quot;Tag&quot;:0,......\n</code></pre>\n<p>When I don't use avro I give whole object with key and offset, but Object can't deserialize.</p>\n<pre><code>@KafkaTrigger(\n    name = &quot;kafkaMeetingTrigger&quot;,\n    topic = &quot;EVT.Meeting_keyDataChanged_v03_02&quot;,\n    brokerList = &quot;%BrokerList%&quot;,\n    cardinality = Cardinality.ONE,\n    sslCertificateLocation = &quot;%KafkaCert%&quot;,\n    sslKeyLocation = &quot;%KafkaCert%&quot;,\n    sslCaLocation = &quot;%KafkaCert%&quot;,\n    protocol = BrokerProtocol.SSL,\n    dataType = &quot;string&quot;,\n    schemaRegistryUrl = &quot;%SchemaRegistry%&quot;,\n    consumerGroup=&quot;%ConsumerGroup%&quot;) String kafkaEventData\n</code></pre>\n<p>Example of result</p>\n<pre><code>{\n    &quot;Offset&quot;: 323,\n    &quot;Partition&quot;: 0,\n    &quot;Topic&quot;: &quot;EVT.Meeting_keyDataChanged_v03_02&quot;,\n    &quot;Timestamp&quot;: &quot;2023-11-27T07:46:12.435Z&quot;,\n    &quot;Value&quot;: &quot;\\u0000\\u0000\\u0000\\bE\\u001ciaymjxnlpnocbe\\u0002\\u0016kbsdkmeyalo\\u00022urhywvxlrixyuqhhmrioqvpxv\\u0002\\u0002&lt;mcxbasjpxwfbjmogfdlmyucmtkiffpHnmysbemqgyeqnelyhjboneshwjufsulyfpfv\\u0001\\u0000\\u0002.tslhjfloiepkmuneymnqbjc\\u0002(fxjlobrtqoaymkfwurqm\\u0002\\brxsy��ȑ�c\\u0000\\u0002Bsqnsoblhpfkobciourcjtpwxrgqnvdtrq\\u0002\\u001ewwntnicjjvcsglu\\u0002&amp;sdpdptdflhjlkrhxlls\\u00020msrqlxpjbdkkgbwsuslaeeql\\u0002&lt;nvttxsgwwlmgvtbhflbmdvtfceasvm\\u0002Nakybxmgwxlapymnfymqytjwdqcwfipivsnmjpmi\\u0002\\u0002\\bselt\\bpmep\\u0002:gcpxjxwrqtceoysrirqvdnllmhcdv\\u0002\\u001accbfdnjyrbtxi\\u0004tr��ȑ�cBxouriawfhfevlthfcfikpuaarjxfmmwkl\\u0002.gvoiukbrporvptduebdvucb\\u0002\\u0006xsp\\b\\u0002\\u0002(mfiudurtxmiejnynnjis\\u0002@qcohlkrkprlkuydljhpkilaxoxsvrrbg\\u0002\\u001anptiwyholnpfr\\u0001@usyyfhyjfoyoaulsvnyjnxcqicfscbkl\\u0002\\u0002Hsgduxxraimgjsduecbgyvypeupuhmvuqcwkc\\u0002\\u001ehxhupdrenujqcrx\\u00028khjhnbyjeihfkfrmkuuyepvxdhbv\\u00016vijyhthrgatcjxqbimfslksnrti\\u0002\\u0002Hrbudwdqichgdgwwgnscljauphjclxbrjpmoe\\u00024jxkknmcltpitgocsfdcrwjuvoc\\u0002\\bklpd\\u0001Jkuwvteymnagdcjvtjwlnvktwjfqbncgpxbhnh\\u0002\\u0002Jjgsfdxrsujpbkdbewkuudtsdajvmexniuwpxu\\u0002Fgerujewxkcnmexffsujlyibkbidnjxyiedr\\u0002\\u0000\\u0001.bdfyrklhntdbknmuxvrgwjc\\u0000��ȑ�c ipdsrntgklkvliyt&quot;,\n    &quot;Key&quot;: null,\n    &quot;Headers&quot;:\n    []\n}\n</code></pre>\n"},{"tags":["java","eclipse","tomcat","servlets"],"comments":[{"owner":{"account_id":15064163,"reputation":13519,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1700937080,"post_id":77549052,"comment_id":136714136,"body_markdown":"What do you mean with it &quot;generating&quot; the URL?","body":"What do you mean with it &quot;generating&quot; the URL?"},{"owner":{"account_id":26891959,"reputation":1,"user_id":20470572,"display_name":"user20470572"},"score":0,"creation_date":1700937625,"post_id":77549052,"comment_id":136714205,"body_markdown":"@dan1st on eclipse when we press run on server.. it automatically opens the web browzer with the correct url that is used to run the particular servlet we r trying to execute","body":"@dan1st on eclipse when we press run on server.. it automatically opens the web browzer with the correct url that is used to run the particular servlet we r trying to execute"},{"owner":{"account_id":13796,"reputation":19353,"user_id":27905,"display_name":"nitind"},"score":0,"creation_date":1700977746,"post_id":77549052,"comment_id":136716835,"body_markdown":"What version of Eclipse is it?","body":"What version of Eclipse is it?"},{"owner":{"account_id":26891959,"reputation":1,"user_id":20470572,"display_name":"user20470572"},"score":0,"creation_date":1700996874,"post_id":77549052,"comment_id":136718138,"body_markdown":"@nitind Version: 2023-09 (4.29.0)","body":"@nitind Version: 2023-09 (4.29.0)"},{"owner":{"account_id":13796,"reputation":19353,"user_id":27905,"display_name":"nitind"},"score":0,"creation_date":1701108316,"post_id":77549052,"comment_id":136731682,"body_markdown":"Is there a reason you&#39;re not extending `HttpServlet`?","body":"Is there a reason you&#39;re not extending <code>HttpServlet</code>?"},{"owner":{"account_id":26891959,"reputation":1,"user_id":20470572,"display_name":"user20470572"},"score":0,"creation_date":1701280934,"post_id":77549052,"comment_id":136757389,"body_markdown":"@nitind Just trying to learn all the ways to create a servlet","body":"@nitind Just trying to learn all the ways to create a servlet"}],"answers":[{"tags":[],"owner":{"account_id":13796,"reputation":19353,"user_id":27905,"display_name":"nitind"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1701090505,"creation_date":1701090175,"answer_id":77557104,"question_id":77549052,"body_markdown":"Odd. Sounds similar to [bug 577703][1], but I fixed that one. Can you open an issue at https://github.com/eclipse-servertools/servertools/issues and attach this project, or another minimal project that reproduces the problem? \r\n\r\n\r\n  [1]: https://bugs.eclipse.org/577703","title":"In eclipse when I try to create a Servlet by implementing the Servlet interface then the annotation method does not create the correct link on running","body":"<p>Odd. Sounds similar to <a href=\"https://bugs.eclipse.org/577703\" rel=\"nofollow noreferrer\">bug 577703</a>, but I fixed that one. Can you open an issue at <a href=\"https://github.com/eclipse-servertools/servertools/issues\" rel=\"nofollow noreferrer\">https://github.com/eclipse-servertools/servertools/issues</a> and attach this project, or another minimal project that reproduces the problem?</p>\n"}],"owner":{"account_id":26891959,"reputation":1,"user_id":20470572,"display_name":"user20470572"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1701090505,"creation_date":1700936041,"question_id":77549052,"body_markdown":"```My code is as follows:\r\n\r\nimport java.io.IOException;\r\n\r\nimport javax.servlet.Servlet;\r\nimport javax.servlet.ServletConfig;\r\nimport javax.servlet.ServletException;\r\nimport javax.servlet.ServletRequest;\r\nimport javax.servlet.ServletResponse;\r\nimport javax.servlet.annotation.WebServlet;\r\n\r\n@WebServlet(&quot;/impSer&quot;)\r\npublic class impSer implements Servlet {\r\n\t private transient ServletConfig config;\r\n\r\n\t    @Override\r\n\t    public void init(ServletConfig config) throws ServletException {\r\n\t        this.config = config;\r\n\t    }\r\n\r\n\t    @Override\r\n\t    public void service(ServletRequest req, ServletResponse res) throws ServletException, IOException {\r\n\t        System.out.println(&quot;Hello world&quot;);\r\n\t    }\r\n\r\n\t    @Override\r\n\t    public void destroy() {\r\n\t        System.out.println(&quot;h&quot;);\r\n\t    }\r\n\r\n\t    @Override\r\n\t    public ServletConfig getServletConfig() {\r\n\t        return this.config;\r\n\t    }\r\n\r\n\t    @Override\r\n\t    public String getServletInfo() {\r\n\t        return &quot;TheServletInter&quot;;\r\n\t    }\r\n}\r\n```\r\n\r\nI have saved my code in the src/main/java folder in the default package in my eclipse project named firstwebsite..\r\nWhen i run my code on the Tomcat server it generates this url \r\nhttp://localhost:8080/firstwebsite/WEB-INF/classes/impSer.java\r\nand gives Http Status 404-Not found error..\r\n\r\nI have used the annotation method so shouldnt it generate the correct url on running on server i.e. http://localhost:8080/firstwebsite/impSer \r\n\r\nWhen i type this manually it gives correct output.. but eclipse on running does not run the above url..\r\n\r\nI have Tomcat 9.. \r\n\r\nThe annotation method is working perfectly for Servlets created by extending GenericServlet and extending HttpServlet.. only the implementing Servlet interface is giving issues..\r\n\r\nI am new to Servlet programming so the helpp will be really appreciated.. Thank you","title":"In eclipse when I try to create a Servlet by implementing the Servlet interface then the annotation method does not create the correct link on running","body":"<pre><code>\nimport java.io.IOException;\n\nimport javax.servlet.Servlet;\nimport javax.servlet.ServletConfig;\nimport javax.servlet.ServletException;\nimport javax.servlet.ServletRequest;\nimport javax.servlet.ServletResponse;\nimport javax.servlet.annotation.WebServlet;\n\n@WebServlet(&quot;/impSer&quot;)\npublic class impSer implements Servlet {\n     private transient ServletConfig config;\n\n        @Override\n        public void init(ServletConfig config) throws ServletException {\n            this.config = config;\n        }\n\n        @Override\n        public void service(ServletRequest req, ServletResponse res) throws ServletException, IOException {\n            System.out.println(&quot;Hello world&quot;);\n        }\n\n        @Override\n        public void destroy() {\n            System.out.println(&quot;h&quot;);\n        }\n\n        @Override\n        public ServletConfig getServletConfig() {\n            return this.config;\n        }\n\n        @Override\n        public String getServletInfo() {\n            return &quot;TheServletInter&quot;;\n        }\n}\n</code></pre>\n<p>I have saved my code in the src/main/java folder in the default package in my eclipse project named firstwebsite..\nWhen i run my code on the Tomcat server it generates this url\nhttp://localhost:8080/firstwebsite/WEB-INF/classes/impSer.java\nand gives Http Status 404-Not found error..</p>\n<p>I have used the annotation method so shouldnt it generate the correct url on running on server i.e. http://localhost:8080/firstwebsite/impSer</p>\n<p>When i type this manually it gives correct output.. but eclipse on running does not run the above url..</p>\n<p>I have Tomcat 9..</p>\n<p>The annotation method is working perfectly for Servlets created by extending GenericServlet and extending HttpServlet.. only the implementing Servlet interface is giving issues..</p>\n<p>I am new to Servlet programming so the helpp will be really appreciated.. Thank you</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":3253096,"reputation":4401,"user_id":2987755,"accept_rate":50,"display_name":"dkb"},"score":2,"creation_date":1609649826,"post_id":65546614,"comment_id":115886256,"body_markdown":"This will help: https://openjdk.java.net/jeps/363, https://stackoverflow.com/q/52239570/2987755, above JVM flag will work with java version&lt;14 but not with greater than that.","body":"This will help: <a href=\"https://openjdk.java.net/jeps/363\" rel=\"nofollow noreferrer\">openjdk.java.net/jeps/363</a>, <a href=\"https://stackoverflow.com/q/52239570/2987755\">stackoverflow.com/q/52239570/2987755</a>, above JVM flag will work with java version&lt;14 but not with greater than that."}],"answers":[{"tags":[],"owner":{"account_id":394396,"reputation":52134,"user_id":756809,"accept_rate":89,"display_name":"Shai Almog"},"down_vote_count":1,"up_vote_count":5,"is_accepted":true,"score":4,"last_activity_date":1609735024,"creation_date":1609735024,"answer_id":65557730,"question_id":65546614,"body_markdown":"This is a problem with the netbeans build script but this isn&#39;t really relevant as Codename One only supports Java 8 and Java 11 (at this time) so you should use one of those versions at the moment.","title":"How to fix &quot;Unrecognized VM option &#39;UseConcMarkSweepGC&#39;&quot; error?","body":"<p>This is a problem with the netbeans build script but this isn't really relevant as Codename One only supports Java 8 and Java 11 (at this time) so you should use one of those versions at the moment.</p>\n"},{"tags":[],"owner":{"account_id":20599854,"reputation":175,"user_id":15121353,"display_name":"Mikhail U"},"down_vote_count":3,"up_vote_count":18,"is_accepted":false,"score":15,"last_activity_date":1665146350,"creation_date":1612168588,"answer_id":65989442,"question_id":65546614,"body_markdown":"Ignore unsupported VM options with another option:\r\n\r\n    -XX:+IgnoreUnrecognizedVMOptions","title":"How to fix &quot;Unrecognized VM option &#39;UseConcMarkSweepGC&#39;&quot; error?","body":"<p>Ignore unsupported VM options with another option:</p>\n<pre><code>-XX:+IgnoreUnrecognizedVMOptions\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15962832,"reputation":21,"user_id":11519381,"display_name":"Vinayak Gupta"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1650459254,"creation_date":1650459254,"answer_id":71940037,"question_id":65546614,"body_markdown":"run `export JAVA_HOME=$(/usr/libexec/java_home -v 1.8)`","title":"How to fix &quot;Unrecognized VM option &#39;UseConcMarkSweepGC&#39;&quot; error?","body":"<p>run <code>export JAVA_HOME=$(/usr/libexec/java_home -v 1.8)</code></p>\n"},{"tags":[],"owner":{"account_id":2580770,"reputation":574,"user_id":2237510,"display_name":"Jonathan Haar"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1660239016,"creation_date":1660239016,"answer_id":73324742,"question_id":65546614,"body_markdown":"Homebrew users:\r\n\r\nComment out these lines \r\n```\r\n# /usr/local/etc/elasticsearch/jvm.options\r\n\r\n## GC configuration\r\n#-XX:+UseConcMarkSweepGC\r\n#-XX:CMSInitiatingOccupancyFraction=75\r\n#-XX:+UseCMSInitiatingOccupancyOnly\r\n```\r\nThen if you get \r\n```\r\nInvalid -Xlog option &#39;-Xlog:gc*,gc+age=trace,safepoint:file=logs/gc.log:utctime,pid,tags:filecount=32,filesize=64m&#39;\r\n```\r\nUpdate the logging file path\r\n\r\n```\r\n# JDK 9+ GC logging\r\n9-:-Xlog:gc*,gc+age=trace,safepoint:file=logs/gc.log:utctime,pid,tags:filecount=32,filesize=64m\r\n```\r\nto\r\n```\r\n# JDK 9+ GC logging\r\n9-:-Xlog:gc*,gc+age=trace,safepoint:file=/usr/local/var/log/elasticsearch/gc.log:utctime,pid,tags:filecount=32,filesize=64m\r\n```\r\n\r\nSources\r\n\r\nhttps://stackoverflow.com/questions/64190908/brew-installed-elasticsearch-7-9-2-failing-on-macos\r\n\r\nhttps://stackoverflow.com/a/57993824/2237510","title":"How to fix &quot;Unrecognized VM option &#39;UseConcMarkSweepGC&#39;&quot; error?","body":"<p>Homebrew users:</p>\n<p>Comment out these lines</p>\n<pre><code># /usr/local/etc/elasticsearch/jvm.options\n\n## GC configuration\n#-XX:+UseConcMarkSweepGC\n#-XX:CMSInitiatingOccupancyFraction=75\n#-XX:+UseCMSInitiatingOccupancyOnly\n</code></pre>\n<p>Then if you get</p>\n<pre><code>Invalid -Xlog option '-Xlog:gc*,gc+age=trace,safepoint:file=logs/gc.log:utctime,pid,tags:filecount=32,filesize=64m'\n</code></pre>\n<p>Update the logging file path</p>\n<pre><code># JDK 9+ GC logging\n9-:-Xlog:gc*,gc+age=trace,safepoint:file=logs/gc.log:utctime,pid,tags:filecount=32,filesize=64m\n</code></pre>\n<p>to</p>\n<pre><code># JDK 9+ GC logging\n9-:-Xlog:gc*,gc+age=trace,safepoint:file=/usr/local/var/log/elasticsearch/gc.log:utctime,pid,tags:filecount=32,filesize=64m\n</code></pre>\n<p>Sources</p>\n<p><a href=\"https://stackoverflow.com/questions/64190908/brew-installed-elasticsearch-7-9-2-failing-on-macos\">Brew installed Elasticsearch 7.9.2 failing on macOS</a></p>\n<p><a href=\"https://stackoverflow.com/a/57993824/2237510\">https://stackoverflow.com/a/57993824/2237510</a></p>\n"},{"tags":[],"owner":{"account_id":6851712,"reputation":731,"user_id":5268711,"display_name":"bahri noredine"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701090449,"creation_date":1701090449,"answer_id":77557135,"question_id":65546614,"body_markdown":"i had the same i change the version from 21 to 11 (you can check with your version first), \r\nbe sure that the version is updated from cmd with this command\r\n\r\n    PATH=%JAVA_HOME%/bin;%PATH%\r\nafter that i go to wrapper.config and i chnage \r\n\r\n    #wrapper.java.command=/path/to/my/jdk/bin/java\r\n\r\nwith my path to java\r\n\r\n    wrapper.java.command=C:\\Program Files\\Java\\jdk-11\\bin\\java\r\ni execute StartSonar.bat and now is OK\r\n","title":"How to fix &quot;Unrecognized VM option &#39;UseConcMarkSweepGC&#39;&quot; error?","body":"<p>i had the same i change the version from 21 to 11 (you can check with your version first),\nbe sure that the version is updated from cmd with this command</p>\n<pre><code>PATH=%JAVA_HOME%/bin;%PATH%\n</code></pre>\n<p>after that i go to wrapper.config and i chnage</p>\n<pre><code>#wrapper.java.command=/path/to/my/jdk/bin/java\n</code></pre>\n<p>with my path to java</p>\n<pre><code>wrapper.java.command=C:\\Program Files\\Java\\jdk-11\\bin\\java\n</code></pre>\n<p>i execute StartSonar.bat and now is OK</p>\n"}],"owner":{"account_id":8972614,"reputation":313,"user_id":6690583,"display_name":"Patrick"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":58444,"favorite_count":0,"down_vote_count":0,"up_vote_count":18,"accepted_answer_id":65557730,"answer_count":5,"score":18,"last_activity_date":1701090449,"creation_date":1609647755,"question_id":65546614,"body_markdown":"I have followed the instructions for getting started with codenameone in IntelliJ, yet when I set up my first project, based on the sample app I get this error:\r\n\r\n```\r\n&quot;C:\\Program Files\\Java\\jdk-15.0.1\\bin\\java.exe&quot; -Xms128m -Xmx1014m -XX:ReservedCodeCacheSize=512m -XX:+UseConcMarkSweepGC -XX:SoftRefLRUPolicyMSPerMB=50 -XX:CICompilerCount=2 -XX:+HeapDumpOnOutOfMemoryError -XX:-OmitStackTraceInFastThrow -ea -Dsun.io.useCanonCaches=false -Djdk.http.auth.tunneling.disabledSchemes=\\&quot;\\&quot; -Djdk.attach.allowAttachSelf=true -Djdk.module.illegalAccess.silent=true -Dkotlinx.coroutines.debug=off &quot;-javaagent:C:\\Program Files\\JetBrains\\IntelliJ IDEA 2020.3.1\\lib\\idea_rt.jar=61544:C:\\Program Files\\JetBrains\\IntelliJ IDEA 2020.3.1\\bin&quot; -Dfile.encoding=UTF-8 -classpath &quot;C:\\Users\\reinp\\OneDrive - beuthhs\\beuth\\Patterns und Frameworks\\justtrivia\\out\\production\\justtrivia;C:\\Users\\reinp\\OneDrive - beuthhs\\beuth\\Patterns und Frameworks\\justtrivia\\src;C:\\Users\\reinp\\OneDrive - beuthhs\\beuth\\Patterns und Frameworks\\justtrivia\\lib\\CodenameOne.jar;C:\\Users\\reinp\\OneDrive - beuthhs\\beuth\\Patterns und Frameworks\\justtrivia\\JavaSE.jar;native\\internal_tmp;lib\\impl\\cls&quot; com.codename1.impl.javase.Simulator com.patrickreinbold.justtrivia.JustTrivia\r\nUnrecognized VM option &#39;UseConcMarkSweepGC&#39;\r\nError: Could not create the Java Virtual Machine.\r\nError: A fatal exception has occurred. Program will exit.\r\n\r\nProcess finished with exit code 1\r\n```\r\n\r\nI saw that this has to do with Java 8 but in the IntelliJ instructions it says nothing about using Java 8. Is Java 8 always necessary or can codenameone run with Java 15, too?\r\n\r\nEDIT:\r\nI have now got it to open by simply copying the first line with the java command and removing the UseConcMarkSweepGC flag, then running it in terminal. But I am still not sure if that is &quot;the correct way&quot; to do it or if something could break along the way now.\r\n\r\n","title":"How to fix &quot;Unrecognized VM option &#39;UseConcMarkSweepGC&#39;&quot; error?","body":"<p>I have followed the instructions for getting started with codenameone in IntelliJ, yet when I set up my first project, based on the sample app I get this error:</p>\n<pre><code>&quot;C:\\Program Files\\Java\\jdk-15.0.1\\bin\\java.exe&quot; -Xms128m -Xmx1014m -XX:ReservedCodeCacheSize=512m -XX:+UseConcMarkSweepGC -XX:SoftRefLRUPolicyMSPerMB=50 -XX:CICompilerCount=2 -XX:+HeapDumpOnOutOfMemoryError -XX:-OmitStackTraceInFastThrow -ea -Dsun.io.useCanonCaches=false -Djdk.http.auth.tunneling.disabledSchemes=\\&quot;\\&quot; -Djdk.attach.allowAttachSelf=true -Djdk.module.illegalAccess.silent=true -Dkotlinx.coroutines.debug=off &quot;-javaagent:C:\\Program Files\\JetBrains\\IntelliJ IDEA 2020.3.1\\lib\\idea_rt.jar=61544:C:\\Program Files\\JetBrains\\IntelliJ IDEA 2020.3.1\\bin&quot; -Dfile.encoding=UTF-8 -classpath &quot;C:\\Users\\reinp\\OneDrive - beuthhs\\beuth\\Patterns und Frameworks\\justtrivia\\out\\production\\justtrivia;C:\\Users\\reinp\\OneDrive - beuthhs\\beuth\\Patterns und Frameworks\\justtrivia\\src;C:\\Users\\reinp\\OneDrive - beuthhs\\beuth\\Patterns und Frameworks\\justtrivia\\lib\\CodenameOne.jar;C:\\Users\\reinp\\OneDrive - beuthhs\\beuth\\Patterns und Frameworks\\justtrivia\\JavaSE.jar;native\\internal_tmp;lib\\impl\\cls&quot; com.codename1.impl.javase.Simulator com.patrickreinbold.justtrivia.JustTrivia\nUnrecognized VM option 'UseConcMarkSweepGC'\nError: Could not create the Java Virtual Machine.\nError: A fatal exception has occurred. Program will exit.\n\nProcess finished with exit code 1\n</code></pre>\n<p>I saw that this has to do with Java 8 but in the IntelliJ instructions it says nothing about using Java 8. Is Java 8 always necessary or can codenameone run with Java 15, too?</p>\n<p>EDIT:\nI have now got it to open by simply copying the first line with the java command and removing the UseConcMarkSweepGC flag, then running it in terminal. But I am still not sure if that is &quot;the correct way&quot; to do it or if something could break along the way now.</p>\n"},{"tags":["java","apache-poi"],"comments":[{"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"score":1,"creation_date":1701078246,"post_id":77555737,"comment_id":136725938,"body_markdown":"See https://stackoverflow.com/questions/6686753/nosuchfielderror-java. Make sure you don&#39;t have older versions than `2.0.4` of `&lt;artifactId&gt;fr.opensagres.poi.xwpf.converter.core&lt;/artifactId&gt;` or of \n `&lt;artifactId&gt;xdocreport&lt;/artifactId&gt;` in your classpath. And recheck you compile-time classpath vs. run-time classpath.","body":"See <a href=\"https://stackoverflow.com/questions/6686753/nosuchfielderror-java\" title=\"nosuchfielderror java\">stackoverflow.com/questions/6686753/nosuchfielderror-java</a>. Make sure you don&#39;t have older versions than <code>2.0.4</code> of <code>&lt;artifactId&gt;fr.opensagres.poi.xwpf.converter.core&lt;&#47;artifactI&zwnj;&#8203;d&gt;</code> or of   <code>&lt;artifactId&gt;xdocreport&lt;&#47;artifactId&gt;</code> in your classpath. And recheck you compile-time classpath vs. run-time classpath."},{"owner":{"account_id":13645494,"reputation":49,"user_id":9844579,"display_name":"Lakshyya Kothari"},"score":0,"creation_date":1701080164,"post_id":77555737,"comment_id":136726266,"body_markdown":"@AxelRichter, I only have a single version of the artifact and tried doing a maven clean install. It did not resolve the issue.","body":"@AxelRichter, I only have a single version of the artifact and tried doing a maven clean install. It did not resolve the issue."},{"owner":{"account_id":213468,"reputation":103462,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1701090392,"post_id":77555737,"comment_id":136727965,"body_markdown":"Remove your dependency on Apache POI, so it is pulled in through opensagres, or make sure to use Apache POI 5.2.0, the version that opensagres xdocreport 2.0.4 is compiled against.","body":"Remove your dependency on Apache POI, so it is pulled in through opensagres, or make sure to use Apache POI 5.2.0, the version that opensagres xdocreport 2.0.4 is compiled against."}],"owner":{"account_id":13645494,"reputation":49,"user_id":9844579,"display_name":"Lakshyya Kothari"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1701079706,"answer_count":0,"score":-1,"last_activity_date":1701090277,"creation_date":1701076803,"question_id":77555737,"body_markdown":"I am trying to convert a word document to PDF using Apache POI and `fr.opensagres.poi.xwpf.converter.pdf` in Java, but I&#39;m getting the below error\r\n\r\n```none\r\nException in thread &quot;main&quot; java.lang.NoSuchFieldError: Factory\r\n\tat fr.opensagres.poi.xwpf.converter.core.styles.XWPFStylesDocument$ThemeDocumentVisitor.visitDocumentPart(XWPFStylesDocument.java:1564)\r\n\tat fr.opensagres.poi.xwpf.converter.core.styles.XWPFStylesDocument$DocumentVisitor.visitDocument(XWPFStylesDocument.java:1496)\r\n```\r\n\r\nIn the POM the following dependencies are present\r\n\r\n```xml\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;poi&lt;/artifactId&gt;\r\n\t&lt;version&gt;5.0.0&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;poi-ooxml&lt;/artifactId&gt;\r\n\t&lt;version&gt;5.0.0&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;fr.opensagres.xdocreport&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;fr.opensagres.poi.xwpf.converter.pdf&lt;/artifactId&gt;\r\n\t&lt;version&gt;2.0.4&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nThe line of code throwing the error is\r\n`PdfConverter.getInstance().convert(doc, outputStream, options);`\r\n\r\n","title":"java.lang.NoSuchFieldError: Factory when trying to convert word to pdf using Apache POI and opensagres","body":"<p>I am trying to convert a word document to PDF using Apache POI and <code>fr.opensagres.poi.xwpf.converter.pdf</code> in Java, but I'm getting the below error</p>\n<pre class=\"lang-none prettyprint-override\"><code>Exception in thread &quot;main&quot; java.lang.NoSuchFieldError: Factory\n    at fr.opensagres.poi.xwpf.converter.core.styles.XWPFStylesDocument$ThemeDocumentVisitor.visitDocumentPart(XWPFStylesDocument.java:1564)\n    at fr.opensagres.poi.xwpf.converter.core.styles.XWPFStylesDocument$DocumentVisitor.visitDocument(XWPFStylesDocument.java:1496)\n</code></pre>\n<p>In the POM the following dependencies are present</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\n    &lt;artifactId&gt;poi&lt;/artifactId&gt;\n    &lt;version&gt;5.0.0&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\n    &lt;artifactId&gt;poi-ooxml&lt;/artifactId&gt;\n    &lt;version&gt;5.0.0&lt;/version&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n    &lt;groupId&gt;fr.opensagres.xdocreport&lt;/groupId&gt;\n    &lt;artifactId&gt;fr.opensagres.poi.xwpf.converter.pdf&lt;/artifactId&gt;\n    &lt;version&gt;2.0.4&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>The line of code throwing the error is\n<code>PdfConverter.getInstance().convert(doc, outputStream, options);</code></p>\n"},{"tags":["java","date","junit","calendar","mocking"],"comments":[{"owner":{"account_id":138790,"reputation":61711,"user_id":343955,"accept_rate":85,"display_name":"adarshr"},"score":1,"creation_date":1329217959,"post_id":9275840,"comment_id":11693357,"body_markdown":"That line couldn&#39;t be compiling!","body":"That line couldn&#39;t be compiling!"},{"owner":{"account_id":36858,"reputation":113744,"user_id":105224,"accept_rate":73,"display_name":"Andreas Dolk"},"score":0,"creation_date":1329218101,"post_id":9275840,"comment_id":11693397,"body_markdown":"Is `today` a class member (field) or a local variable inside a method?","body":"Is <code>today</code> a class member (field) or a local variable inside a method?"},{"owner":{"account_id":127266,"reputation":8769,"user_id":324315,"accept_rate":66,"display_name":"Randomize"},"score":0,"creation_date":1329218241,"post_id":9275840,"comment_id":11693450,"body_markdown":"local variable inside a method","body":"local variable inside a method"},{"owner":{"account_id":7612423,"reputation":82476,"user_id":5772882,"display_name":"Anonymous"},"score":1,"creation_date":1567688229,"post_id":9275840,"comment_id":102043609,"body_markdown":"The modern version of the same question (with answer): [Writing and testing convenience methods using Java 8 Date/Time classes](https://stackoverflow.com/questions/52956373/writing-and-testing-convenience-methods-using-java-8-date-time-classes)","body":"The modern version of the same question (with answer): <a href=\"https://stackoverflow.com/questions/52956373/writing-and-testing-convenience-methods-using-java-8-date-time-classes\">Writing and testing convenience methods using Java 8 Date/Time classes</a>"},{"owner":{"account_id":322981,"reputation":310744,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":1,"creation_date":1676274171,"post_id":9275840,"comment_id":133096871,"body_markdown":"Update… FYI, the terrible `Calendar` class was years ago supplanted by the modern *java.time* classes defined in JSR 310.","body":"Update… FYI, the terrible <code>Calendar</code> class was years ago supplanted by the modern <i>java.time</i> classes defined in JSR 310."},{"owner":{"account_id":322981,"reputation":310744,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1701228680,"post_id":9275840,"comment_id":136748615,"body_markdown":"You can fake a clock with the `static` methods on the [`java.time.Clock`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/time/Clock.html) class. Pass the faked `Clock` instance to the various methods on various `java.time.*` classes.","body":"You can fake a clock with the <code>static</code> methods on the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/time/Clock.html\" rel=\"nofollow noreferrer\"><code>java.time.Clock</code></a> class. Pass the faked <code>Clock</code> instance to the various methods on various <code>java.time.*</code> classes."}],"answers":[{"tags":[],"owner":{"account_id":1016,"reputation":17962,"user_id":1348,"accept_rate":88,"display_name":"blank"},"down_vote_count":1,"up_vote_count":13,"is_accepted":false,"score":12,"last_activity_date":1329223115,"creation_date":1329218478,"answer_id":9275970,"question_id":9275840,"body_markdown":"Don&#39;t mock it - instead introduce a method you can mock that gets dates. Something like this:\r\n\r\n    interface Utility {\r\n\r\n        Date getDate();\r\n    }\r\n\r\n    Utilities implements Utility {\r\n    \r\n\r\n        public Date getDate() {\r\n\r\n            return Calendar.getInstance().getTime();\r\n        }\r\n\r\n    }\r\n\r\nThen you can inject this into your class or just use a helper class with a bunch of static methods with a load method for the interface:\r\n\r\n\r\n    public class AppUtil {\r\n    \r\n        private static Utility util = new Utilities();\r\n    \r\n        public static void load(Utility newUtil) {\r\n\r\n             this.util = newUtil;\r\n        }\r\n\r\n        public static Date getDate() {\r\n\r\n            return util.getDate();\r\n        }\r\n    \r\n    }\r\n\r\nThen in your application code: \r\n\r\n    private void doSomething() {\r\n       Date today = AppUtil.getDate();\r\n       ....\r\n    }\r\n\r\nYou can then just load a mock interface in your test methods.\r\n\r\n\r\n    @Test\r\n    public void shouldDoSomethingUseful() {\r\n         Utility mockUtility = // .. create mock here\r\n         AppUtil.load(mockUtility);\r\n         \r\n         // .. set up your expectations\r\n\r\n         // exercise the functionality\r\n         classUnderTest.doSomethingViaAPI();\r\n\r\n         // ... maybe assert something \r\n\r\n    }\r\n\r\nSee also https://stackoverflow.com/questions/1906344/should-you-only-mock-types-you-own and [Test smell - everything is mocked][1]\r\n\r\n\r\n  [1]: http://www.mockobjects.com/2007/04/test-smell-everything-is-mocked.html","title":"java: how to mock Calendar.getInstance()?","body":"<p>Don't mock it - instead introduce a method you can mock that gets dates. Something like this:</p>\n\n<pre><code>interface Utility {\n\n    Date getDate();\n}\n\nUtilities implements Utility {\n\n\n    public Date getDate() {\n\n        return Calendar.getInstance().getTime();\n    }\n\n}\n</code></pre>\n\n<p>Then you can inject this into your class or just use a helper class with a bunch of static methods with a load method for the interface:</p>\n\n<pre><code>public class AppUtil {\n\n    private static Utility util = new Utilities();\n\n    public static void load(Utility newUtil) {\n\n         this.util = newUtil;\n    }\n\n    public static Date getDate() {\n\n        return util.getDate();\n    }\n\n}\n</code></pre>\n\n<p>Then in your application code: </p>\n\n<pre><code>private void doSomething() {\n   Date today = AppUtil.getDate();\n   ....\n}\n</code></pre>\n\n<p>You can then just load a mock interface in your test methods.</p>\n\n<pre><code>@Test\npublic void shouldDoSomethingUseful() {\n     Utility mockUtility = // .. create mock here\n     AppUtil.load(mockUtility);\n\n     // .. set up your expectations\n\n     // exercise the functionality\n     classUnderTest.doSomethingViaAPI();\n\n     // ... maybe assert something \n\n}\n</code></pre>\n\n<p>See also <a href=\"https://stackoverflow.com/questions/1906344/should-you-only-mock-types-you-own\">Should you only mock types you own?</a> and <a href=\"http://www.mockobjects.com/2007/04/test-smell-everything-is-mocked.html\" rel=\"nofollow noreferrer\">Test smell - everything is mocked</a></p>\n"},{"tags":[],"owner":{"account_id":175711,"reputation":6306,"user_id":405906,"display_name":"BeRecursive"},"down_vote_count":1,"up_vote_count":19,"is_accepted":true,"score":18,"last_activity_date":1329218601,"creation_date":1329218601,"answer_id":9275994,"question_id":9275840,"body_markdown":"As far as I see it you have three sensible options:\r\n\r\n 1. Inject the ``Calendar`` instance in whatever method/class you set that day in.\r\n\r\n    ``private void method(final Calendar cal) \r\n    {\r\n        Date today = cal.getTime();\r\n    }``\r\n\r\n 2. Use [JodaTime][1] instead of ``Calendar``. This is less an option and more a case of a suggestion as JodaTime will make your life a lot easier. You will still need to inject this time in to the method.\r\n\r\n    ``DateTime dt = new DateTime();``\r\n\r\n    ``Date jdkDate = dt.toDate();``\r\n\r\n 3. Wrap ``Calendar`` inside some interface that allows you to fetch the time. You then just mock that interface and get it to return a constant ``Date``.\r\n\r\n    ``Date today = calendarInterfaceInstance.getCurrentDate()``\r\n\r\n\r\n  [1]: http://joda-time.sourceforge.net/userguide.html","title":"java: how to mock Calendar.getInstance()?","body":"<p>As far as I see it you have three sensible options:</p>\n\n<ol>\n<li><p>Inject the <code>Calendar</code> instance in whatever method/class you set that day in.</p>\n\n<p><code>private void method(final Calendar cal) \n{\n    Date today = cal.getTime();\n}</code></p></li>\n<li><p>Use <a href=\"http://joda-time.sourceforge.net/userguide.html\">JodaTime</a> instead of <code>Calendar</code>. This is less an option and more a case of a suggestion as JodaTime will make your life a lot easier. You will still need to inject this time in to the method.</p>\n\n<p><code>DateTime dt = new DateTime();</code></p>\n\n<p><code>Date jdkDate = dt.toDate();</code></p></li>\n<li><p>Wrap <code>Calendar</code> inside some interface that allows you to fetch the time. You then just mock that interface and get it to return a constant <code>Date</code>.</p>\n\n<p><code>Date today = calendarInterfaceInstance.getCurrentDate()</code></p></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":1085259,"reputation":78304,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1329218609,"creation_date":1329218609,"answer_id":9275997,"question_id":9275840,"body_markdown":"Write a class called `DateHelper` with a method `getCalendar` that returns `Calendar.getInstance()`.  Refactor the class that you&#39;re testing so that it has a member variable of type `DateHelper`, and a constructor that injects that member variable.  Use that constructor in your test, to inject a mock of `DateHelper`, in which `getCalendar` has been stubbed to return some known date.","title":"java: how to mock Calendar.getInstance()?","body":"<p>Write a class called <code>DateHelper</code> with a method <code>getCalendar</code> that returns <code>Calendar.getInstance()</code>.  Refactor the class that you're testing so that it has a member variable of type <code>DateHelper</code>, and a constructor that injects that member variable.  Use that constructor in your test, to inject a mock of <code>DateHelper</code>, in which <code>getCalendar</code> has been stubbed to return some known date.</p>\n"},{"tags":[],"owner":{"account_id":118571,"reputation":47102,"user_id":309683,"accept_rate":68,"display_name":"Behrang Saeedzadeh"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1346754187,"creation_date":1346754187,"answer_id":12261475,"question_id":9275840,"body_markdown":"You can mockit using JMockit. Here you can see how you can do it: [Mock Java Calendar - JMockit vs Mockito](http://www.codeproject.com/Articles/359900/Mock-Java-Calendar-JMockit-vs-Mockito).","title":"java: how to mock Calendar.getInstance()?","body":"<p>You can mockit using JMockit. Here you can see how you can do it: <a href=\"http://www.codeproject.com/Articles/359900/Mock-Java-Calendar-JMockit-vs-Mockito\" rel=\"nofollow\">Mock Java Calendar - JMockit vs Mockito</a>.</p>\n"},{"tags":[],"owner":{"account_id":2489020,"reputation":820,"user_id":2166900,"display_name":"GoGoris"},"down_vote_count":2,"up_vote_count":31,"is_accepted":false,"score":29,"last_activity_date":1460022392,"creation_date":1460022392,"answer_id":36472441,"question_id":9275840,"body_markdown":"You can mock it using PowerMock in combination with Mockito:\r\n\r\nOn top of your class:\r\n\r\n    @RunWith(PowerMockRunner.class)\r\n    @PrepareForTest({ClassThatCallsTheCalendar.class})\r\nThe key to success is that you have to put the class where you use Calendar in PrepareForTest instead of Calendar itself because it is a system class. (I personally had to search a lot before I found this) \r\n\r\nThen the mocking itself:\r\n\r\n    mockStatic(Calendar.class);\r\n    when(Calendar.getInstance()).thenReturn(calendar);","title":"java: how to mock Calendar.getInstance()?","body":"<p>You can mock it using PowerMock in combination with Mockito:</p>\n\n<p>On top of your class:</p>\n\n<pre><code>@RunWith(PowerMockRunner.class)\n@PrepareForTest({ClassThatCallsTheCalendar.class})\n</code></pre>\n\n<p>The key to success is that you have to put the class where you use Calendar in PrepareForTest instead of Calendar itself because it is a system class. (I personally had to search a lot before I found this) </p>\n\n<p>Then the mocking itself:</p>\n\n<pre><code>mockStatic(Calendar.class);\nwhen(Calendar.getInstance()).thenReturn(calendar);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1270906,"reputation":582,"user_id":1227193,"accept_rate":50,"display_name":"Surekha"},"down_vote_count":1,"up_vote_count":7,"is_accepted":false,"score":6,"last_activity_date":1460646893,"creation_date":1460646893,"answer_id":36627298,"question_id":9275840,"body_markdown":"Using Mockito and PowerMockito:\r\n\r\n    Calendar endOfMarch = Calendar.getInstance();\r\n\tendOfMarch.set(2011, Calendar.MARCH, 27);\r\n\tPowerMockito.mockStatic(Calendar.class);\r\n\tMockito.when(Calendar.getInstance()).thenReturn(endOfMarch);\r\nRefer to the [link][1] for the complete code.\r\n\r\n\r\n  [1]: https://github.com/7droids/PowerMock/blob/master/PowerMock/test/src/de/sevendroids/java/powermock/sample/PowerMockSampleClassWithStaticMethodTest.java","title":"java: how to mock Calendar.getInstance()?","body":"<p>Using Mockito and PowerMockito:</p>\n\n<pre><code>Calendar endOfMarch = Calendar.getInstance();\nendOfMarch.set(2011, Calendar.MARCH, 27);\nPowerMockito.mockStatic(Calendar.class);\nMockito.when(Calendar.getInstance()).thenReturn(endOfMarch);\n</code></pre>\n\n<p>Refer to the <a href=\"https://github.com/7droids/PowerMock/blob/master/PowerMock/test/src/de/sevendroids/java/powermock/sample/PowerMockSampleClassWithStaticMethodTest.java\" rel=\"noreferrer\">link</a> for the complete code.</p>\n"},{"tags":[],"owner":{"account_id":8354243,"reputation":8167,"user_id":6275174,"display_name":"Nicola Gallazzi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674812179,"creation_date":1674812179,"answer_id":75256266,"question_id":9275840,"body_markdown":"Avoid use `Calendar.getInstance()` and just use `Mockito` methods to return what you like.\r\nFor example:\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-kotlin --&gt;\r\n\r\n    @Test\r\n    fun italianLocale_returnsItalianFormatDate() {\r\n        val calendar: Calendar = Mockito.mock(Calendar::class.java)\r\n        Mockito.`when`(calendar.get(Calendar.DAY_OF_MONTH)).thenReturn(27)\r\n        Mockito.`when`(calendar.get(Calendar.YEAR)).thenReturn(2023)\r\n        Mockito.`when`(calendar.get(Calendar.MONTH)).thenReturn(1)\r\n        val formatted = calendar.toReadableDate()\r\n        assert(formatted == &quot;27/01/2023&quot;)\r\n    }\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\nimport Mockito in your gradle file with:\r\n\r\n    testImplementation (&quot;org.mockito.kotlin:mockito-kotlin:x.x.x&quot;)\r\nor (if you are using groovy)\r\n\r\n    testImplementation &quot;org.mockito.kotlin:mockito-kotlin:x.x.x&quot;","title":"java: how to mock Calendar.getInstance()?","body":"<p>Avoid use <code>Calendar.getInstance()</code> and just use <code>Mockito</code> methods to return what you like.\nFor example:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>@Test\nfun italianLocale_returnsItalianFormatDate() {\n    val calendar: Calendar = Mockito.mock(Calendar::class.java)\n    Mockito.`when`(calendar.get(Calendar.DAY_OF_MONTH)).thenReturn(27)\n    Mockito.`when`(calendar.get(Calendar.YEAR)).thenReturn(2023)\n    Mockito.`when`(calendar.get(Calendar.MONTH)).thenReturn(1)\n    val formatted = calendar.toReadableDate()\n    assert(formatted == &quot;27/01/2023&quot;)\n}\n</code></pre>\n<p>import Mockito in your gradle file with:</p>\n<pre><code>testImplementation (&quot;org.mockito.kotlin:mockito-kotlin:x.x.x&quot;)\n</code></pre>\n<p>or (if you are using groovy)</p>\n<pre><code>testImplementation &quot;org.mockito.kotlin:mockito-kotlin:x.x.x&quot;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4047119,"reputation":303,"user_id":3328022,"display_name":"inder"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1685962041,"creation_date":1685962041,"answer_id":76405684,"question_id":9275840,"body_markdown":"With Mockk\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n     private lateinit var calendar: Calendar\r\n\r\n        @Before\r\n        fun setup() {\r\n            calendar = mockk(relaxed = true)\r\n            mockkStatic(Calendar::class)\r\n            every { Calendar.getInstance() } returns calendar\r\n        }\r\n\r\n        @Test\r\n        fun `test date when date is less than 16 month is 0`() {\r\n            every { calendar[Calendar.DAY_OF_MONTH] } returns 12\r\n            every { calendar[Calendar.MONTH] } returns 0\r\n            every { calendar[Calendar.YEAR] } returns 2023\r\n\r\n          // assert here\r\n\r\n        }\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\nrefer to the link for [mockk][1] documentation\r\n\r\n\r\n  [1]: https://mockk.io/","title":"java: how to mock Calendar.getInstance()?","body":"<p>With Mockk</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code> private lateinit var calendar: Calendar\n\n    @Before\n    fun setup() {\n        calendar = mockk(relaxed = true)\n        mockkStatic(Calendar::class)\n        every { Calendar.getInstance() } returns calendar\n    }\n\n    @Test\n    fun `test date when date is less than 16 month is 0`() {\n        every { calendar[Calendar.DAY_OF_MONTH] } returns 12\n        every { calendar[Calendar.MONTH] } returns 0\n        every { calendar[Calendar.YEAR] } returns 2023\n\n      // assert here\n\n    }</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p>refer to the link for <a href=\"https://mockk.io/\" rel=\"nofollow noreferrer\">mockk</a> documentation</p>\n"},{"tags":[],"owner":{"account_id":10099125,"reputation":50,"user_id":7463534,"display_name":"Matouš Klugar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701090216,"creation_date":1701090216,"answer_id":77557111,"question_id":9275840,"body_markdown":"You can do that as follows using Junit 5 and Mockito\r\n\r\n    @Test\r\n    public void doSomething() {\r\n        listCalendarParams(&quot;now&quot;, Calendar.getInstance());\r\n        Calendar fakedCalendar = new GregorianCalendar(2023, Calendar.OCTOBER, 15, 10, 15);\r\n        listCalendarParams(&quot;mock&quot;, fakedCalendar);\r\n        try (MockedStatic&lt;Calendar&gt; mockedStatic = Mockito.mockStatic(Calendar.class, Mockito.CALLS_REAL_METHODS)) {\r\n            mockedStatic.when(Calendar::getInstance).thenReturn(fakedCalendar);\r\n            //This or any method here using Calendar.getInstance() will be replaced by mock defined above\r\n            Calendar calendar = Calendar.getInstance();\r\n            listCalendarParams(&quot;evaluated&quot;, calendar);\r\n            assertEquals(Calendar.OCTOBER, calendar.get(Calendar.MONTH));\r\n            assertEquals(15, calendar.get(Calendar.DAY_OF_MONTH));\r\n            assertEquals(10, calendar.get(Calendar.HOUR_OF_DAY));\r\n            assertEquals(15, calendar.get(Calendar.MINUTE));\r\n        }\r\n    }\r\n\r\n    private static void listCalendarParams(String nameOfCal, Calendar calendar) {\r\n        System.out.println(nameOfCal + &quot;:\\t&quot; +\r\n                new SimpleDateFormat(&quot;yyyy&#39;-&#39;MM&#39;-&#39;dd&#39;T&#39;HH&#39;:&#39;mm&#39;:&#39;ss&quot;)\r\n                        .format(calendar.getTime()));\r\n    }3\r\n\r\nOutput: \r\n\r\n    now:\t\t2023-11-27T14:00:48 //This will change anytime you run it.\r\n    mock:\t\t2023-10-15T10:15:00\r\n    evaluated:\t2023-10-15T10:15:00","title":"java: how to mock Calendar.getInstance()?","body":"<p>You can do that as follows using Junit 5 and Mockito</p>\n<pre><code>@Test\npublic void doSomething() {\n    listCalendarParams(&quot;now&quot;, Calendar.getInstance());\n    Calendar fakedCalendar = new GregorianCalendar(2023, Calendar.OCTOBER, 15, 10, 15);\n    listCalendarParams(&quot;mock&quot;, fakedCalendar);\n    try (MockedStatic&lt;Calendar&gt; mockedStatic = Mockito.mockStatic(Calendar.class, Mockito.CALLS_REAL_METHODS)) {\n        mockedStatic.when(Calendar::getInstance).thenReturn(fakedCalendar);\n        //This or any method here using Calendar.getInstance() will be replaced by mock defined above\n        Calendar calendar = Calendar.getInstance();\n        listCalendarParams(&quot;evaluated&quot;, calendar);\n        assertEquals(Calendar.OCTOBER, calendar.get(Calendar.MONTH));\n        assertEquals(15, calendar.get(Calendar.DAY_OF_MONTH));\n        assertEquals(10, calendar.get(Calendar.HOUR_OF_DAY));\n        assertEquals(15, calendar.get(Calendar.MINUTE));\n    }\n}\n\nprivate static void listCalendarParams(String nameOfCal, Calendar calendar) {\n    System.out.println(nameOfCal + &quot;:\\t&quot; +\n            new SimpleDateFormat(&quot;yyyy'-'MM'-'dd'T'HH':'mm':'ss&quot;)\n                    .format(calendar.getTime()));\n}3\n</code></pre>\n<p>Output:</p>\n<pre><code>now:        2023-11-27T14:00:48 //This will change anytime you run it.\nmock:       2023-10-15T10:15:00\nevaluated:  2023-10-15T10:15:00\n</code></pre>\n"}],"owner":{"account_id":127266,"reputation":8769,"user_id":324315,"accept_rate":66,"display_name":"Randomize"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":46612,"favorite_count":0,"down_vote_count":0,"up_vote_count":34,"accepted_answer_id":9275994,"answer_count":9,"score":34,"last_activity_date":1701090216,"creation_date":1329217845,"question_id":9275840,"body_markdown":"In my code I have something like this:\r\n\r\n    private void doSomething() {\r\n       Calendar today = Calendar.getInstance();\r\n       ....\r\n    }\r\n\r\nHow can I &quot;mock&quot; it in my junit test to return a specific date?","title":"java: how to mock Calendar.getInstance()?","body":"<p>In my code I have something like this:</p>\n\n<pre><code>private void doSomething() {\n   Calendar today = Calendar.getInstance();\n   ....\n}\n</code></pre>\n\n<p>How can I \"mock\" it in my junit test to return a specific date?</p>\n"},{"tags":["java","mysql","spring","spring-boot","jpa"],"comments":[{"owner":{"account_id":24440940,"reputation":3122,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1701008282,"post_id":77552017,"comment_id":136719217,"body_markdown":"can you change `spring.jpa.hibernate.ddl-auto=create-drop` to `spring.jpa.hibernate.ddl-auto=create` ? because `create-drop:` drop the schema at the end of the session","body":"can you change <code>spring.jpa.hibernate.ddl-auto=create-drop</code> to <code>spring.jpa.hibernate.ddl-auto=create</code> ? because <code>create-drop:</code> drop the schema at the end of the session"},{"owner":{"account_id":24440940,"reputation":3122,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1701022892,"post_id":77552017,"comment_id":136720770,"body_markdown":"witch version of spring-boot are you using ?","body":"witch version of spring-boot are you using ?"},{"owner":{"account_id":5514375,"reputation":156,"user_id":4379671,"display_name":"tricksSpecialist"},"score":0,"creation_date":1701027917,"post_id":77552017,"comment_id":136721301,"body_markdown":"some version of mysql needs you to create the DB first where the app will not create it and after that you will find your table","body":"some version of mysql needs you to create the DB first where the app will not create it and after that you will find your table"},{"owner":{"account_id":19535095,"reputation":2864,"user_id":14294053,"display_name":"Mar-Z"},"score":1,"creation_date":1701083759,"post_id":77552017,"comment_id":136726835,"body_markdown":"Most probably you have a version conflict. You can&#39;t mix javax-persistence with spring boot 3+ JPA (aka Jakarta). The best way to generate a clean pom.xml is to use https://start.spring.io/ and add only the dependencies needed like data-jpa and mysql.","body":"Most probably you have a version conflict. You can&#39;t mix javax-persistence with spring boot 3+ JPA (aka Jakarta). The best way to generate a clean pom.xml is to use <a href=\"https://start.spring.io/\" rel=\"nofollow noreferrer\">start.spring.io</a> and add only the dependencies needed like data-jpa and mysql."},{"owner":{"account_id":27767200,"reputation":59,"user_id":21198309,"display_name":"Zeke Cachi"},"score":0,"creation_date":1701126480,"post_id":77552017,"comment_id":136734359,"body_markdown":"@Mar-Z         that was the issue, I switched to Jakarta and it works now, thanks!","body":"@Mar-Z         that was the issue, I switched to Jakarta and it works now, thanks!"},{"owner":{"account_id":19535095,"reputation":2864,"user_id":14294053,"display_name":"Mar-Z"},"score":0,"creation_date":1701160089,"post_id":77552017,"comment_id":136737676,"body_markdown":"Cool. Thanks for feedback.","body":"Cool. Thanks for feedback."}],"answers":[{"tags":[],"owner":{"account_id":29995365,"reputation":1,"user_id":22986887,"display_name":"kwonjh0406"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701013289,"creation_date":1701013289,"answer_id":77552354,"question_id":77552017,"body_markdown":"In the application.properties file\r\n\r\n    spring.datasource.url=jdbc:mysql://localhost:3306/(my database)\r\n    spring.datasource.username=(my username)\r\n    spring.datasource.password=(my password)\r\n    spring.jpa.hibernate.ddl-auto=create-drop\r\n    spring.jpa.show-sql=true\r\n    spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect\r\n    spring.jpa.properties.hibernate.format_sql=true\r\n    spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\r\n    spring.jpa.properties.hibernate.show_sql=true\r\n    spring.jpa.generate-ddl=true\r\n\r\nHere, spring.jpa.hibernate.ddl-auto=create-drop means that the application creates tables when it starts and drops them when it exits. To view the tables after the application ends, you can change it to spring.jpa.hibernate.ddl-auto=update. The modified configuration would look like this:\r\n\r\n    spring.datasource.url=jdbc:mysql://localhost:3306/(my database)\r\n    spring.datasource.username=(my username)\r\n    spring.datasource.password=(my password)\r\n    spring.jpa.hibernate.ddl-auto=update\r\n    spring.jpa.show-sql=true\r\n    spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect\r\n    spring.jpa.properties.hibernate.format_sql=true\r\n    spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\r\n    spring.jpa.properties.hibernate.show_sql=true\r\n    spring.jpa.generate-ddl=true\r\n\r\nWith this change, the application retains the tables after it exits, allowing you to view them later.\r\n","title":"Java JPA doesn&#180;t create new table (MySQL)","body":"<p>In the application.properties file</p>\n<pre><code>spring.datasource.url=jdbc:mysql://localhost:3306/(my database)\nspring.datasource.username=(my username)\nspring.datasource.password=(my password)\nspring.jpa.hibernate.ddl-auto=create-drop\nspring.jpa.show-sql=true\nspring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect\nspring.jpa.properties.hibernate.format_sql=true\nspring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\nspring.jpa.properties.hibernate.show_sql=true\nspring.jpa.generate-ddl=true\n</code></pre>\n<p>Here, spring.jpa.hibernate.ddl-auto=create-drop means that the application creates tables when it starts and drops them when it exits. To view the tables after the application ends, you can change it to spring.jpa.hibernate.ddl-auto=update. The modified configuration would look like this:</p>\n<pre><code>spring.datasource.url=jdbc:mysql://localhost:3306/(my database)\nspring.datasource.username=(my username)\nspring.datasource.password=(my password)\nspring.jpa.hibernate.ddl-auto=update\nspring.jpa.show-sql=true\nspring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect\nspring.jpa.properties.hibernate.format_sql=true\nspring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\nspring.jpa.properties.hibernate.show_sql=true\nspring.jpa.generate-ddl=true\n</code></pre>\n<p>With this change, the application retains the tables after it exits, allowing you to view them later.</p>\n"},{"tags":[],"owner":{"account_id":29231405,"reputation":1,"user_id":22395035,"display_name":"kush parsaniya"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701069508,"creation_date":1701069508,"answer_id":77555089,"question_id":77552017,"body_markdown":"you use create-drop so table is created when you start application and dropped when you stop and if your application is runnig and still doesn&#39;t show table so try to do this : check database name is match to spring database , and try to do refresh in mysqlworkbench  ","title":"Java JPA doesn&#180;t create new table (MySQL)","body":"<p>you use create-drop so table is created when you start application and dropped when you stop and if your application is runnig and still doesn't show table so try to do this : check database name is match to spring database , and try to do refresh in mysqlworkbench</p>\n"},{"tags":[],"owner":{"account_id":28248238,"reputation":1,"user_id":21594907,"display_name":"Shamalka Nilaweera"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701086638,"creation_date":1701086638,"answer_id":77556752,"question_id":77552017,"body_markdown":"\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;mysql&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\ntry this in pom file","title":"Java JPA doesn&#180;t create new table (MySQL)","body":"<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;mysql&lt;/groupId&gt;\n        &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>try this in pom file</p>\n"},{"tags":[],"owner":{"account_id":30004053,"reputation":1,"user_id":22993407,"display_name":"Sonal Gaud"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701090183,"creation_date":1701090183,"answer_id":77557106,"question_id":77552017,"body_markdown":"Seems like your sql is not connected make sure you add the mysql connector jar file\r\nOr can simply add this command in your pom.xml file\r\n\r\n`&lt;groupId&gt;mysql&lt;/groupId&gt; \r\n&lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n&lt;version&gt;8.0.23&lt;/version&gt; &lt;!-- Use the latest version available --&gt; \r\n&lt;/dependency&gt;`\r\n\r\n \r\nSometimes it is cause you don&#39;t have relevant port, check your port in mysql client command line \r\nby this code \r\nmysql -h your_host -P your_port -u your_username -p -e &quot;SELECT @@port;&quot;\r\n\r\nI hope this helps!\r\n","title":"Java JPA doesn&#180;t create new table (MySQL)","body":"<p>Seems like your sql is not connected make sure you add the mysql connector jar file\nOr can simply add this command in your pom.xml file</p>\n<p><code>&lt;groupId&gt;mysql&lt;/groupId&gt;  &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt; &lt;version&gt;8.0.23&lt;/version&gt; &lt;!-- Use the latest version available --&gt;  &lt;/dependency&gt;</code></p>\n<p>Sometimes it is cause you don't have relevant port, check your port in mysql client command line\nby this code\nmysql -h your_host -P your_port -u your_username -p -e &quot;SELECT @@port;&quot;</p>\n<p>I hope this helps!</p>\n"}],"owner":{"account_id":27767200,"reputation":59,"user_id":21198309,"display_name":"Zeke Cachi"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":85,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":4,"score":0,"last_activity_date":1701090183,"creation_date":1701007742,"question_id":77552017,"body_markdown":"i&#180;m currently learning Spring Boot, and trying to set up JPA with a MySQL database. Everything looks fine, the project starts correctly, no visible errors, but...no table is created on my db. I&#180;ve checked everywhere and everything seems fine, i have no clue what&#180;s causing that behaviour...\r\nI&#180;ll leave the relevant parts of the code: \r\nProjectApplication.java:\r\n\r\n    package com.first.project;\r\n    \r\n    import org.springframework.boot.SpringApplication;\r\n    import org.springframework.boot.autoconfigure.SpringBootApplication;\r\n    \r\n    @SpringBootApplication\r\n    public class ProjectApplication {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tSpringApplication.run(ProjectApplication.class, args);\r\n    \t}\r\n    \r\n    \r\n    }\r\n\r\nMy Student class: \r\n\r\n    package com.first.project.student;\r\n    \r\n    import org.springframework.data.annotation.Id;\r\n    \r\n    import javax.persistence.Entity;\r\n    import javax.persistence.GeneratedValue;\r\n    import javax.persistence.GenerationType;\r\n    import javax.persistence.Table;\r\n    import java.time.LocalDate;\r\n    \r\n    @Entity\r\n    @Table\r\n    public class Student {\r\n      @Id\r\n      @GeneratedValue(\r\n              strategy = GenerationType.IDENTITY\r\n      )\r\n      private Long id;\r\n      private String name;\r\n      private String email;\r\n      private LocalDate dateOfBirth;\r\n      private Integer age;\r\n    \r\n      public Student() {\r\n      }\r\n      public Student(Long studentId, String studentName, String studentEmail, LocalDate studentDoB, Integer studentAge) {\r\n        this.id = studentId;\r\n        this.name = studentName;\r\n        this.email = studentEmail;\r\n        this.dateOfBirth = studentDoB;\r\n        this.age = studentAge;\r\n      }\r\n    \r\n      public Student(String studentName, String studentEmail, LocalDate studentDoB, Integer studentAge) {\r\n        this.name = studentName;\r\n        this.email = studentEmail;\r\n        this.dateOfBirth = studentDoB;\r\n        this.age = studentAge;\r\n      }\r\n    \r\n      public Long getId() {\r\n        return id;\r\n      }\r\n    \r\n      public void setId(Long id) {\r\n        this.id = id;\r\n      }\r\n    \r\n      public String getName() {\r\n        return name;\r\n      }\r\n    \r\n      public void setName(String name) {\r\n        this.name = name;\r\n      }\r\n    \r\n      public String getEmail() {\r\n        return email;\r\n      }\r\n    \r\n      public void setEmail(String email) {\r\n        this.email = email;\r\n      }\r\n    \r\n      public LocalDate getDateOfBirth() {\r\n        return dateOfBirth;\r\n      }\r\n    \r\n      public void setDateOfBirth(LocalDate dateOfBirth) {\r\n        this.dateOfBirth = dateOfBirth;\r\n      }\r\n    \r\n      public Integer getAge() {\r\n        return age;\r\n      }\r\n    \r\n      public void setAge(Integer age) {\r\n        this.age = age;\r\n      }\r\n    \r\n      @Override\r\n      public String toString() {\r\n        return &quot;Student{&quot; +\r\n                &quot;id=&quot; + id +\r\n                &quot;, name=&#39;&quot; + name + &#39;\\&#39;&#39; +\r\n                &quot;, email=&#39;&quot; + email + &#39;\\&#39;&#39; +\r\n                &quot;, dateOfBirth=&quot; + dateOfBirth +\r\n                &quot;, age=&quot; + age +\r\n                &#39;}&#39;;\r\n      }\r\n    }\r\napplication.properties: \r\n\r\n    spring.datasource.url=jdbc:mysql://localhost:3306/(my database)\r\n    spring.datasource.username=(my username)\r\n    spring.datasource.password=(my password)\r\n    spring.jpa.hibernate.ddl-auto=create-drop\r\n    spring.jpa.show-sql=true\r\n    spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect\r\n    spring.jpa.properties.hibernate.format_sql=true\r\n    spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\r\n    spring.jpa.properties.hibernate.show_sql=true\r\n    spring.jpa.generate-ddl=true\r\n\r\nThe dependencies from my pom.xml file: \r\n\r\n        &lt;dependencies&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-data-jdbc&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;com.mysql&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;javax.persistence&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;javax.persistence-api&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;2.2&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t&lt;/dependencies&gt;\r\n\r\nInside the main package i have ProjectAplication, and a subpackage with the Student class inside. \r\n\r\nAny thoughts?\r\n\r\n","title":"Java JPA doesn&#180;t create new table (MySQL)","body":"<p>i´m currently learning Spring Boot, and trying to set up JPA with a MySQL database. Everything looks fine, the project starts correctly, no visible errors, but...no table is created on my db. I´ve checked everywhere and everything seems fine, i have no clue what´s causing that behaviour...\nI´ll leave the relevant parts of the code:\nProjectApplication.java:</p>\n<pre><code>package com.first.project;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\npublic class ProjectApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(ProjectApplication.class, args);\n    }\n\n\n}\n</code></pre>\n<p>My Student class:</p>\n<pre><code>package com.first.project.student;\n\nimport org.springframework.data.annotation.Id;\n\nimport javax.persistence.Entity;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.GenerationType;\nimport javax.persistence.Table;\nimport java.time.LocalDate;\n\n@Entity\n@Table\npublic class Student {\n  @Id\n  @GeneratedValue(\n          strategy = GenerationType.IDENTITY\n  )\n  private Long id;\n  private String name;\n  private String email;\n  private LocalDate dateOfBirth;\n  private Integer age;\n\n  public Student() {\n  }\n  public Student(Long studentId, String studentName, String studentEmail, LocalDate studentDoB, Integer studentAge) {\n    this.id = studentId;\n    this.name = studentName;\n    this.email = studentEmail;\n    this.dateOfBirth = studentDoB;\n    this.age = studentAge;\n  }\n\n  public Student(String studentName, String studentEmail, LocalDate studentDoB, Integer studentAge) {\n    this.name = studentName;\n    this.email = studentEmail;\n    this.dateOfBirth = studentDoB;\n    this.age = studentAge;\n  }\n\n  public Long getId() {\n    return id;\n  }\n\n  public void setId(Long id) {\n    this.id = id;\n  }\n\n  public String getName() {\n    return name;\n  }\n\n  public void setName(String name) {\n    this.name = name;\n  }\n\n  public String getEmail() {\n    return email;\n  }\n\n  public void setEmail(String email) {\n    this.email = email;\n  }\n\n  public LocalDate getDateOfBirth() {\n    return dateOfBirth;\n  }\n\n  public void setDateOfBirth(LocalDate dateOfBirth) {\n    this.dateOfBirth = dateOfBirth;\n  }\n\n  public Integer getAge() {\n    return age;\n  }\n\n  public void setAge(Integer age) {\n    this.age = age;\n  }\n\n  @Override\n  public String toString() {\n    return &quot;Student{&quot; +\n            &quot;id=&quot; + id +\n            &quot;, name='&quot; + name + '\\'' +\n            &quot;, email='&quot; + email + '\\'' +\n            &quot;, dateOfBirth=&quot; + dateOfBirth +\n            &quot;, age=&quot; + age +\n            '}';\n  }\n}\n</code></pre>\n<p>application.properties:</p>\n<pre><code>spring.datasource.url=jdbc:mysql://localhost:3306/(my database)\nspring.datasource.username=(my username)\nspring.datasource.password=(my password)\nspring.jpa.hibernate.ddl-auto=create-drop\nspring.jpa.show-sql=true\nspring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect\nspring.jpa.properties.hibernate.format_sql=true\nspring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\nspring.jpa.properties.hibernate.show_sql=true\nspring.jpa.generate-ddl=true\n</code></pre>\n<p>The dependencies from my pom.xml file:</p>\n<pre><code>    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jdbc&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.mysql&lt;/groupId&gt;\n            &lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.persistence&lt;/groupId&gt;\n            &lt;artifactId&gt;javax.persistence-api&lt;/artifactId&gt;\n            &lt;version&gt;2.2&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n</code></pre>\n<p>Inside the main package i have ProjectAplication, and a subpackage with the Student class inside.</p>\n<p>Any thoughts?</p>\n"},{"tags":["java","android","firebase","firebase-realtime-database","firebase-authentication"],"comments":[{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":1,"creation_date":1701085218,"post_id":77556539,"comment_id":136727055,"body_markdown":"Is `onComplete` even triggered? Or are you getting any errors?","body":"Is <code>onComplete</code> even triggered? Or are you getting any errors?"},{"owner":{"account_id":26018024,"reputation":95,"user_id":19726095,"display_name":"Md Abu Rayhan"},"score":0,"creation_date":1701087076,"post_id":77556539,"comment_id":136727370,"body_markdown":"It&#39;s not getting any error and also not triggering the database onComplete","body":"It&#39;s not getting any error and also not triggering the database onComplete"}],"answers":[{"tags":[],"owner":{"account_id":72426,"reputation":573694,"user_id":209103,"accept_rate":73,"display_name":"Frank van Puffelen"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1701090172,"creation_date":1701085253,"answer_id":77556605,"question_id":77556539,"body_markdown":"Since neither the `onComplete` or `onFailure` log is written, most likely your app is not connected to the database. A common way for this to happen is when your `google-services.json` file was downloaded before you created the database.\r\n\r\nThe way to fix this is to re-download `google-services.json` and replace the one in your app with an up to date version.\r\n\r\nAn alternative way to work around the problem is by specifying the URL of your database in your code when you get your `FirebaseDatabase` instance:\r\n```\r\nprivate FirebaseDatabase database = FirebaseDatabase.getInstance(&quot;your database URL here&quot;);\r\n```\r\n\r\nAlso see:\r\n\r\n* https://stackoverflow.com/questions/68173632/google-firebase-real-time-database-not-working-as-everything-is-set-correctly/68179677#68179677\r\n* https://stackoverflow.com/questions/68806876/firebase-realtime-database-connection-killed-different-region/68807113#68807113\r\n* https://stackoverflow.com/questions/67858941/database-reference-works-only-by-url/67860298#67860298","title":"Firebase Authentication with Google Sign-In not Writing Data to Realtime Database","body":"<p>Since neither the <code>onComplete</code> or <code>onFailure</code> log is written, most likely your app is not connected to the database. A common way for this to happen is when your <code>google-services.json</code> file was downloaded before you created the database.</p>\n<p>The way to fix this is to re-download <code>google-services.json</code> and replace the one in your app with an up to date version.</p>\n<p>An alternative way to work around the problem is by specifying the URL of your database in your code when you get your <code>FirebaseDatabase</code> instance:</p>\n<pre><code>private FirebaseDatabase database = FirebaseDatabase.getInstance(&quot;your database URL here&quot;);\n</code></pre>\n<p>Also see:</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/68173632/google-firebase-real-time-database-not-working-as-everything-is-set-correctly/68179677#68179677\">Google Firebase Real-time Database Not Working as everything is set correctly</a></li>\n<li><a href=\"https://stackoverflow.com/questions/68806876/firebase-realtime-database-connection-killed-different-region/68807113#68807113\">Firebase Realtime Database connection killed: Different Region</a></li>\n<li><a href=\"https://stackoverflow.com/questions/67858941/database-reference-works-only-by-url/67860298#67860298\">database reference works only by URL</a></li>\n</ul>\n"}],"owner":{"account_id":26018024,"reputation":95,"user_id":19726095,"display_name":"Md Abu Rayhan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77556605,"answer_count":1,"score":0,"last_activity_date":1701090172,"creation_date":1701084598,"question_id":77556539,"body_markdown":"I am encountering an issue with my Android app&#39;s Firebase authentication using Google Sign-In. The authentication process works correctly, but the user data is not being written to the Firebase Realtime Database as expected.\r\n\r\nI have ensured that the Firebase Realtime Database rules allow both read and write operations when the user is authenticated. Here are my current rules:\r\n\r\n     {\r\n      &quot;rules&quot;: {\r\n        &quot;.read&quot;: &quot;auth != null&quot;,\r\n        &quot;.write&quot;: &quot;auth != null&quot;\r\n       }\r\n     }\r\n\r\nDespite this, when a user successfully signs in with Google, the app logs the correct user information, but the data is not reflected in the Firebase Realtime Database.\r\n\r\nHere is a snippet of the relevant code:\r\n\r\n\r\n    public class SignInActivity extends AppCompatActivity {    \r\n        private SignInViewModel signInViewModel;\r\n        private FirebaseAuth auth = FirebaseAuth.getInstance();\r\n        private ActivitySignInBinding binding;\r\n        private SignInClickHandler clickHandler;\r\n        private Button googleSignInBtn;\r\n        private GoogleSignInOptions gso;\r\n        private GoogleSignInClient gsc;\r\n        private FirebaseDatabase database = FirebaseDatabase.getInstance();\r\n        private int RC_SIGN_IN = 20;\r\n    \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_sign_in);\r\n            binding = DataBindingUtil.setContentView(this, R.layout.activity_sign_in);\r\n            signInViewModel = new ViewModelProvider(this).get(SignInViewModel.class);\r\n            clickHandler = new SignInClickHandler(this, signInViewModel);\r\n            binding.setClickHandler(clickHandler);\r\n    \r\n            googleSignInBtn = binding.googleLogInButton;\r\n            gso = new GoogleSignInOptions.Builder(GoogleSignInOptions.DEFAULT_SIGN_IN).requestEmail().\r\n                    requestIdToken(getString(R.string.default_web_client_id))\r\n                    .requestEmail().build();\r\n    \r\n            gsc = GoogleSignIn.getClient(this, gso);\r\n    \r\n            googleSignInBtn.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View v) {\r\n                    googleSignIn();\r\n                }\r\n            });\r\n    \r\n    \r\n        }\r\n    \r\n        private void googleSignIn() {\r\n            Intent signInIntent = gsc.getSignInIntent();\r\n            startActivityForResult(signInIntent, RC_SIGN_IN);\r\n        }\r\n    \r\n        @Override\r\n        protected void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {\r\n            super.onActivityResult(requestCode, resultCode, data);\r\n    \r\n            if (requestCode == RC_SIGN_IN){\r\n                Task&lt;GoogleSignInAccount&gt; task = GoogleSignIn.getSignedInAccountFromIntent(data);\r\n    \r\n                try {\r\n                    GoogleSignInAccount account = task.getResult(ApiException.class);\r\n                    firebaseAuth(account.getIdToken());\r\n                } catch (ApiException e) {\r\n                    Toast.makeText(this, &quot;&quot;+e.getMessage(), Toast.LENGTH_SHORT).show();\r\n                }\r\n            }\r\n    \r\n        }\r\n    \r\n        private void firebaseAuth(String idToken) {\r\n            AuthCredential credential = GoogleAuthProvider.getCredential(idToken, null);\r\n            auth.signInWithCredential(credential)\r\n                    .addOnCompleteListener(this, new OnCompleteListener&lt;AuthResult&gt;() {\r\n                        @Override\r\n                        public void onComplete(@NonNull Task&lt;AuthResult&gt; task) {\r\n                            if (task.isSuccessful()) {\r\n                                FirebaseUser user = auth.getCurrentUser();\r\n    \r\n                                Map&lt;String, Object&gt; map = new HashMap&lt;&gt;();\r\n                                map.put(&quot;id&quot;, user.getUid());\r\n                                map.put(&quot;name&quot;, user.getDisplayName());\r\n                                String photoUrl = (user.getPhotoUrl() != null) ? user.getPhotoUrl().toString() : &quot;&quot;;\r\n                                map.put(&quot;profile&quot;, photoUrl);\r\n    \r\n                                Log.d(&quot;FirebaseGoogleAuth&quot;, &quot;id&quot; + user.getUid() + &quot; &quot; + user.getDisplayName() + &quot; &quot; + photoUrl);\r\n                                database.getReference()\r\n                                        .child(&quot;users&quot;)\r\n                                        .child(user.getUid())\r\n                                        .setValue(map)\r\n                                        .addOnCompleteListener(new OnCompleteListener&lt;Void&gt;() {\r\n                                            @Override\r\n                                            public void onComplete(@NonNull Task&lt;Void&gt; task) {\r\n                                                Log.d(&quot;FirebaseGoogleAuth&quot;, &quot;Data write successful&quot;);\r\n                                                Intent intent = new Intent(getApplicationContext(), FeedActivity.class);\r\n                                                startActivity(intent);\r\n                                                finish();\r\n                                            }\r\n                                        })\r\n                                        .addOnFailureListener(new OnFailureListener() {\r\n                                            @Override\r\n                                            public void onFailure(@NonNull Exception e) {\r\n                                                Log.d(&quot;FirebaseGoogleAuth&quot;, &quot;error realtime database &quot; + e.getMessage().toString());\r\n                                            }\r\n                                        });\r\n                            } else {\r\n                                Toast.makeText(SignInActivity.this, &quot;Authentication failed.&quot;, Toast.LENGTH_SHORT).show();\r\n                            }\r\n                        }\r\n                    });\r\n        }\r\n        \r\n    \r\n        @Override\r\n        protected void onStart() {\r\n            super.onStart();\r\n            FirebaseUser currentUser = auth.getCurrentUser();\r\n            if (currentUser != null){\r\n                startActivity(new Intent(SignInActivity.this, FeedActivity.class));\r\n                finish();\r\n            }\r\n    \r\n        }\r\n    }\r\n\r\nBuild Gradle (App level):\r\n\r\n    plugins {\r\n        id &#39;com.android.application&#39;\r\n        id &#39;com.google.gms.google-services&#39;\r\n    }\r\n    \r\n    android {\r\n        namespace &#39;com.arsoftltd.lolipop&#39;\r\n        compileSdk 34\r\n    \r\n        defaultConfig {\r\n            applicationId &quot;com.arsoftltd.lolipop&quot;\r\n            minSdk 24\r\n            targetSdk 34\r\n            versionCode 1\r\n            versionName &quot;1.0&quot;\r\n    \r\n            testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\r\n        }\r\n    \r\n        buildTypes {\r\n            release {\r\n                minifyEnabled false\r\n                proguardFiles getDefaultProguardFile(&#39;proguard-android-optimize.txt&#39;), &#39;proguard-rules.pro&#39;\r\n            }\r\n        }\r\n        compileOptions {\r\n            sourceCompatibility JavaVersion.VERSION_1_8\r\n            targetCompatibility JavaVersion.VERSION_1_8\r\n        }\r\n        buildFeatures{\r\n            dataBinding true\r\n        }\r\n    }\r\n    \r\n    dependencies {\r\n    \r\n        implementation &#39;androidx.appcompat:appcompat:1.6.1&#39;\r\n        implementation &#39;com.google.android.material:material:1.10.0&#39;\r\n        implementation &#39;androidx.constraintlayout:constraintlayout:2.1.4&#39;\r\n        testImplementation &#39;junit:junit:4.13.2&#39;\r\n        androidTestImplementation &#39;androidx.test.ext:junit:1.1.5&#39;\r\n        androidTestImplementation &#39;androidx.test.espresso:espresso-core:3.5.1&#39;\r\n    \r\n    \r\n        // Import the Firebase BoM\r\n        implementation platform(&#39;com.google.firebase:firebase-bom:32.6.0&#39;)\r\n    \r\n        // When using the BoM, don&#39;t specify versions in Firebase dependencies\r\n        implementation &#39;com.google.firebase:firebase-analytics&#39;\r\n    \r\n        // Firebase Authentication\r\n        implementation &#39;com.google.firebase:firebase-auth&#39;\r\n        implementation &quot;com.google.android.gms:play-services-auth:20.7.0&quot;\r\n    \r\n        implementation &#39;com.firebaseui:firebase-ui-auth:8.0.2&#39;\r\n    \r\n        // Firebase realtime database\r\n        implementation &quot;com.google.firebase:firebase-database&quot;\r\n    \r\n    \r\n        // Facebook Sdk\r\n        implementation &#39;com.facebook.android:facebook-android-sdk:[8,9)&#39;\r\n    \r\n        // SSP SDP library\r\n        implementation &#39;com.intuit.ssp:ssp-android:1.1.0&#39;\r\n        implementation &#39;com.intuit.sdp:sdp-android:1.1.0&#39;\r\n    \r\n    \r\n    \r\n    }\r\nThe log output during authentication shows the correct user information:\r\n\r\n    2023-11-27 17:17:59.062 28378-28378 FirebaseGoogleAuth com.arsoftltd.lolipop D idpuhGxZmHw7YfW49R4ZGfHJsLmus2 Md Abu Rayhan https://lh3.googleusercontent.com/a/ACg8ocIujr5T5CNmjjEps2SKElmg5ROz0Qbdl0cNcfPAUwcnvQ=s96-c\r\n\r\nI would appreciate any insights or suggestions on why the user data is not being written to the Firebase Realtime Database despite successful authentication. Thank you in advance!","title":"Firebase Authentication with Google Sign-In not Writing Data to Realtime Database","body":"<p>I am encountering an issue with my Android app's Firebase authentication using Google Sign-In. The authentication process works correctly, but the user data is not being written to the Firebase Realtime Database as expected.</p>\n<p>I have ensured that the Firebase Realtime Database rules allow both read and write operations when the user is authenticated. Here are my current rules:</p>\n<pre><code> {\n  &quot;rules&quot;: {\n    &quot;.read&quot;: &quot;auth != null&quot;,\n    &quot;.write&quot;: &quot;auth != null&quot;\n   }\n }\n</code></pre>\n<p>Despite this, when a user successfully signs in with Google, the app logs the correct user information, but the data is not reflected in the Firebase Realtime Database.</p>\n<p>Here is a snippet of the relevant code:</p>\n<pre><code>public class SignInActivity extends AppCompatActivity {    \n    private SignInViewModel signInViewModel;\n    private FirebaseAuth auth = FirebaseAuth.getInstance();\n    private ActivitySignInBinding binding;\n    private SignInClickHandler clickHandler;\n    private Button googleSignInBtn;\n    private GoogleSignInOptions gso;\n    private GoogleSignInClient gsc;\n    private FirebaseDatabase database = FirebaseDatabase.getInstance();\n    private int RC_SIGN_IN = 20;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_sign_in);\n        binding = DataBindingUtil.setContentView(this, R.layout.activity_sign_in);\n        signInViewModel = new ViewModelProvider(this).get(SignInViewModel.class);\n        clickHandler = new SignInClickHandler(this, signInViewModel);\n        binding.setClickHandler(clickHandler);\n\n        googleSignInBtn = binding.googleLogInButton;\n        gso = new GoogleSignInOptions.Builder(GoogleSignInOptions.DEFAULT_SIGN_IN).requestEmail().\n                requestIdToken(getString(R.string.default_web_client_id))\n                .requestEmail().build();\n\n        gsc = GoogleSignIn.getClient(this, gso);\n\n        googleSignInBtn.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                googleSignIn();\n            }\n        });\n\n\n    }\n\n    private void googleSignIn() {\n        Intent signInIntent = gsc.getSignInIntent();\n        startActivityForResult(signInIntent, RC_SIGN_IN);\n    }\n\n    @Override\n    protected void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {\n        super.onActivityResult(requestCode, resultCode, data);\n\n        if (requestCode == RC_SIGN_IN){\n            Task&lt;GoogleSignInAccount&gt; task = GoogleSignIn.getSignedInAccountFromIntent(data);\n\n            try {\n                GoogleSignInAccount account = task.getResult(ApiException.class);\n                firebaseAuth(account.getIdToken());\n            } catch (ApiException e) {\n                Toast.makeText(this, &quot;&quot;+e.getMessage(), Toast.LENGTH_SHORT).show();\n            }\n        }\n\n    }\n\n    private void firebaseAuth(String idToken) {\n        AuthCredential credential = GoogleAuthProvider.getCredential(idToken, null);\n        auth.signInWithCredential(credential)\n                .addOnCompleteListener(this, new OnCompleteListener&lt;AuthResult&gt;() {\n                    @Override\n                    public void onComplete(@NonNull Task&lt;AuthResult&gt; task) {\n                        if (task.isSuccessful()) {\n                            FirebaseUser user = auth.getCurrentUser();\n\n                            Map&lt;String, Object&gt; map = new HashMap&lt;&gt;();\n                            map.put(&quot;id&quot;, user.getUid());\n                            map.put(&quot;name&quot;, user.getDisplayName());\n                            String photoUrl = (user.getPhotoUrl() != null) ? user.getPhotoUrl().toString() : &quot;&quot;;\n                            map.put(&quot;profile&quot;, photoUrl);\n\n                            Log.d(&quot;FirebaseGoogleAuth&quot;, &quot;id&quot; + user.getUid() + &quot; &quot; + user.getDisplayName() + &quot; &quot; + photoUrl);\n                            database.getReference()\n                                    .child(&quot;users&quot;)\n                                    .child(user.getUid())\n                                    .setValue(map)\n                                    .addOnCompleteListener(new OnCompleteListener&lt;Void&gt;() {\n                                        @Override\n                                        public void onComplete(@NonNull Task&lt;Void&gt; task) {\n                                            Log.d(&quot;FirebaseGoogleAuth&quot;, &quot;Data write successful&quot;);\n                                            Intent intent = new Intent(getApplicationContext(), FeedActivity.class);\n                                            startActivity(intent);\n                                            finish();\n                                        }\n                                    })\n                                    .addOnFailureListener(new OnFailureListener() {\n                                        @Override\n                                        public void onFailure(@NonNull Exception e) {\n                                            Log.d(&quot;FirebaseGoogleAuth&quot;, &quot;error realtime database &quot; + e.getMessage().toString());\n                                        }\n                                    });\n                        } else {\n                            Toast.makeText(SignInActivity.this, &quot;Authentication failed.&quot;, Toast.LENGTH_SHORT).show();\n                        }\n                    }\n                });\n    }\n    \n\n    @Override\n    protected void onStart() {\n        super.onStart();\n        FirebaseUser currentUser = auth.getCurrentUser();\n        if (currentUser != null){\n            startActivity(new Intent(SignInActivity.this, FeedActivity.class));\n            finish();\n        }\n\n    }\n}\n</code></pre>\n<p>Build Gradle (App level):</p>\n<pre><code>plugins {\n    id 'com.android.application'\n    id 'com.google.gms.google-services'\n}\n\nandroid {\n    namespace 'com.arsoftltd.lolipop'\n    compileSdk 34\n\n    defaultConfig {\n        applicationId &quot;com.arsoftltd.lolipop&quot;\n        minSdk 24\n        targetSdk 34\n        versionCode 1\n        versionName &quot;1.0&quot;\n\n        testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\n    }\n\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\n        }\n    }\n    compileOptions {\n        sourceCompatibility JavaVersion.VERSION_1_8\n        targetCompatibility JavaVersion.VERSION_1_8\n    }\n    buildFeatures{\n        dataBinding true\n    }\n}\n\ndependencies {\n\n    implementation 'androidx.appcompat:appcompat:1.6.1'\n    implementation 'com.google.android.material:material:1.10.0'\n    implementation 'androidx.constraintlayout:constraintlayout:2.1.4'\n    testImplementation 'junit:junit:4.13.2'\n    androidTestImplementation 'androidx.test.ext:junit:1.1.5'\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.5.1'\n\n\n    // Import the Firebase BoM\n    implementation platform('com.google.firebase:firebase-bom:32.6.0')\n\n    // When using the BoM, don't specify versions in Firebase dependencies\n    implementation 'com.google.firebase:firebase-analytics'\n\n    // Firebase Authentication\n    implementation 'com.google.firebase:firebase-auth'\n    implementation &quot;com.google.android.gms:play-services-auth:20.7.0&quot;\n\n    implementation 'com.firebaseui:firebase-ui-auth:8.0.2'\n\n    // Firebase realtime database\n    implementation &quot;com.google.firebase:firebase-database&quot;\n\n\n    // Facebook Sdk\n    implementation 'com.facebook.android:facebook-android-sdk:[8,9)'\n\n    // SSP SDP library\n    implementation 'com.intuit.ssp:ssp-android:1.1.0'\n    implementation 'com.intuit.sdp:sdp-android:1.1.0'\n\n\n\n}\n</code></pre>\n<p>The log output during authentication shows the correct user information:</p>\n<pre><code>2023-11-27 17:17:59.062 28378-28378 FirebaseGoogleAuth com.arsoftltd.lolipop D idpuhGxZmHw7YfW49R4ZGfHJsLmus2 Md Abu Rayhan https://lh3.googleusercontent.com/a/ACg8ocIujr5T5CNmjjEps2SKElmg5ROz0Qbdl0cNcfPAUwcnvQ=s96-c\n</code></pre>\n<p>I would appreciate any insights or suggestions on why the user data is not being written to the Firebase Realtime Database despite successful authentication. Thank you in advance!</p>\n"},{"tags":["java","user-interface","javasound"],"comments":[{"owner":{"account_id":3159259,"reputation":109665,"user_id":2670892,"display_name":"greg-449"},"score":2,"creation_date":1701089467,"post_id":77556997,"comment_id":136727796,"body_markdown":"Which Java GUI? There are several - SWT, JavaFX, Swing...","body":"Which Java GUI? There are several - SWT, JavaFX, Swing..."},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1701103064,"post_id":77556997,"comment_id":136730684,"body_markdown":"Check out: https://stackoverflow.com/a/64509714/131872 for an example that will replay the sound every time a button is clicked.","body":"Check out: <a href=\"https://stackoverflow.com/a/64509714/131872\">stackoverflow.com/a/64509714/131872</a> for an example that will replay the sound every time a button is clicked."}],"answers":[{"tags":[],"owner":{"account_id":7393149,"reputation":79,"user_id":5625966,"display_name":"John m"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1701089814,"creation_date":1701089814,"answer_id":77557077,"question_id":77556997,"body_markdown":"Its been a while since I did this.\r\nI would say in your action handler that is where you want to get your sound and then play it.\r\nSo somthing like this:\r\n\r\n      JButton b1 = new JButton(&quot;Cool button&quot;); // Make button\r\n\r\n      // Create action listener -  play the sound when the button is pressed\r\n      ActionListener listener = new ActionListener() {\r\n         File localSoundFile = new File(&quot;path_to_sound&quot;);\r\n         AudioInputStream audioIn = AudioSystem.getAudioInputStream(localSoundFile);   \r\n         Clip clip = AudioSystem.getClip();\r\n         clip.open(audioIn);\r\n         clip.start();   \r\n         // Other action handler stuff\r\n      }\r\n      b1.addActionListener(listener); // Attatch listener to the button\r\n      \r\n\r\nChange the code to work with whatever gui framwork you are using, but the overall design should be something similar","title":"Sound effects to Radio Buttons in Java GUI","body":"<p>Its been a while since I did this.\nI would say in your action handler that is where you want to get your sound and then play it.\nSo somthing like this:</p>\n<pre><code>  JButton b1 = new JButton(&quot;Cool button&quot;); // Make button\n\n  // Create action listener -  play the sound when the button is pressed\n  ActionListener listener = new ActionListener() {\n     File localSoundFile = new File(&quot;path_to_sound&quot;);\n     AudioInputStream audioIn = AudioSystem.getAudioInputStream(localSoundFile);   \n     Clip clip = AudioSystem.getClip();\n     clip.open(audioIn);\n     clip.start();   \n     // Other action handler stuff\n  }\n  b1.addActionListener(listener); // Attatch listener to the button\n  \n</code></pre>\n<p>Change the code to work with whatever gui framwork you are using, but the overall design should be something similar</p>\n"}],"owner":{"account_id":30003922,"reputation":1,"user_id":22993306,"display_name":"Divo "},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1701103638,"answer_count":1,"score":0,"last_activity_date":1701089814,"creation_date":1701089097,"question_id":77556997,"body_markdown":"How do you add sounds effects  to radio Buttons in Java GUI? For example the click sounds when clicking the radio Buttons. Please tell me and explain how.\r\n\r\nI didn&#39;t try or copied all of those examples and explanations in YouTube years ago are cause they&#39;re somewhat Vague and not really exaggerated I just really want to know how. I just wanna know what are the basics. Please do Share. Thank you.","title":"Sound effects to Radio Buttons in Java GUI","body":"<p>How do you add sounds effects  to radio Buttons in Java GUI? For example the click sounds when clicking the radio Buttons. Please tell me and explain how.</p>\n<p>I didn't try or copied all of those examples and explanations in YouTube years ago are cause they're somewhat Vague and not really exaggerated I just really want to know how. I just wanna know what are the basics. Please do Share. Thank you.</p>\n"},{"tags":["java","jwt","jjwt"],"answers":[{"tags":[],"owner":{"account_id":14439307,"reputation":1,"user_id":22993334,"display_name":"Leo Barreto"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701089153,"creation_date":1701089153,"answer_id":77556999,"question_id":77350596,"body_markdown":"Can you try this:\r\n\r\n    var parser = Jwts.parser().verifyWith(getKey()).build();\r\n    return  parser.parseSignedClaims(token).getPayload();","title":"Cannot parse JWT by new version of jjwt library","body":"<p>Can you try this:</p>\n<pre><code>var parser = Jwts.parser().verifyWith(getKey()).build();\nreturn  parser.parseSignedClaims(token).getPayload();\n</code></pre>\n"}],"owner":{"account_id":2073128,"reputation":427,"user_id":1847148,"accept_rate":25,"display_name":"b3lowster"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":353,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1701089153,"creation_date":1698136469,"question_id":77350596,"body_markdown":"I&#39;ve updated jjwt to version 0.12.3. I use a keystore PKCS12 to sign jwt and validate it. But now I&#39;m getting errror: ***JWS verification key must be either a SecretKey (for MAC algorithms) or a PublicKey (for Signature algorithms).*** Everything works fine on the version 0.9.1\r\n\r\n```\r\nprivate static Key getKey() throws Exception {\r\n        KeyStore keystore = KeyStore.getInstance(&quot;PKCS12&quot;);\r\n        keystore.load(GenerateValidateKey.class.getResourceAsStream(&quot;/test.p12&quot;), &quot;test&quot;.toCharArray());\r\n        Enumeration aliases = keystore.aliases();\r\n        String keyAlias = &quot;&quot;;\r\n        while (aliases.hasMoreElements()) {\r\n            keyAlias = (String) aliases.nextElement();\r\n        }\r\n        return keystore.getKey(keyAlias, &quot;test&quot;.toCharArray());\r\n    }\r\n```\r\n\r\n```\r\nMap&lt;String, Object&gt; claims = new HashMap&lt;&gt;();\r\n            claims.put(&quot;aud&quot;, &quot;test&quot;);\r\n            claims.put(&quot;sub&quot;, &quot;test&quot;);\r\n\r\nString token = Jwts.builder().signWith(SignatureAlgorithm.RS256, getKey())\r\n                    .setSubject(&quot;test&quot;)\r\n                    .setExpiration(Date.from(expiration.atStartOfDay(ZoneId.systemDefault()).toInstant()))\r\n                    .setIssuedAt(Date.from(now.atStartOfDay(ZoneId.systemDefault()).toInstant()))\r\n                    .setClaims(claims)\r\n                    .compact();\r\n```\r\n\r\n```\r\nClaims claims = Jwts.parser()\r\n                                .setSigningKey(getKey())\r\n                                .requireAudience(&quot;test&quot;)\r\n                                .build()\r\n                                .parseClaimsJws(token)\r\n                                .getBody();\r\n```","title":"Cannot parse JWT by new version of jjwt library","body":"<p>I've updated jjwt to version 0.12.3. I use a keystore PKCS12 to sign jwt and validate it. But now I'm getting errror: <em><strong>JWS verification key must be either a SecretKey (for MAC algorithms) or a PublicKey (for Signature algorithms).</strong></em> Everything works fine on the version 0.9.1</p>\n<pre><code>private static Key getKey() throws Exception {\n        KeyStore keystore = KeyStore.getInstance(&quot;PKCS12&quot;);\n        keystore.load(GenerateValidateKey.class.getResourceAsStream(&quot;/test.p12&quot;), &quot;test&quot;.toCharArray());\n        Enumeration aliases = keystore.aliases();\n        String keyAlias = &quot;&quot;;\n        while (aliases.hasMoreElements()) {\n            keyAlias = (String) aliases.nextElement();\n        }\n        return keystore.getKey(keyAlias, &quot;test&quot;.toCharArray());\n    }\n</code></pre>\n<pre><code>Map&lt;String, Object&gt; claims = new HashMap&lt;&gt;();\n            claims.put(&quot;aud&quot;, &quot;test&quot;);\n            claims.put(&quot;sub&quot;, &quot;test&quot;);\n\nString token = Jwts.builder().signWith(SignatureAlgorithm.RS256, getKey())\n                    .setSubject(&quot;test&quot;)\n                    .setExpiration(Date.from(expiration.atStartOfDay(ZoneId.systemDefault()).toInstant()))\n                    .setIssuedAt(Date.from(now.atStartOfDay(ZoneId.systemDefault()).toInstant()))\n                    .setClaims(claims)\n                    .compact();\n</code></pre>\n<pre><code>Claims claims = Jwts.parser()\n                                .setSigningKey(getKey())\n                                .requireAudience(&quot;test&quot;)\n                                .build()\n                                .parseClaimsJws(token)\n                                .getBody();\n</code></pre>\n"},{"tags":["java","spring-boot","kotlin","spring-data-jpa"],"comments":[{"owner":{"account_id":5613556,"reputation":2315,"user_id":4445625,"accept_rate":50,"display_name":"Marc Stroebel"},"score":0,"creation_date":1701088387,"post_id":77556876,"comment_id":136727619,"body_markdown":"are there any jpa related entries in application.properties file? Is it packaged into the jar? Adjust class path settings if running from cmdline to include the properties file","body":"are there any jpa related entries in application.properties file? Is it packaged into the jar? Adjust class path settings if running from cmdline to include the properties file"},{"owner":{"account_id":9181835,"reputation":355,"user_id":6825377,"accept_rate":33,"display_name":"Rishi S"},"score":0,"creation_date":1701088955,"post_id":77556876,"comment_id":136727712,"body_markdown":"Yes, the application.yaml is packaged in the jar. The JPA entries are here :","body":"Yes, the application.yaml is packaged in the jar. The JPA entries are here :"},{"owner":{"account_id":15064163,"reputation":13519,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1701089857,"post_id":77556876,"comment_id":136727874,"body_markdown":"Which Spring version are you using? Can you reproduce the issue using a new project from Spring Initializr? Does changing `@ConfigurationPropertiesScan( &quot;com.myapp.workspace.config&quot; )` to `@ConfigurationPropertiesScan( &quot;com.myapp.workspace&quot; )` change anything?","body":"Which Spring version are you using? Can you reproduce the issue using a new project from Spring Initializr? Does changing <code>@ConfigurationPropertiesScan( &quot;com.myapp.workspace.config&quot; )</code> to <code>@ConfigurationPropertiesScan( &quot;com.myapp.workspace&quot; )</code> change anything?"},{"owner":{"account_id":9181835,"reputation":355,"user_id":6825377,"accept_rate":33,"display_name":"Rishi S"},"score":0,"creation_date":1701090501,"post_id":77556876,"comment_id":136727983,"body_markdown":"Spring boot v 3.1.2 . Using @ConfigurationPropertiesScan( &quot;com.myapp.workspace&quot; ) does not change anything. Apparently it is something to do with the way the jar got generated or the dependencies associated with it since the code runs fine when i do a gradlew bootRun","body":"Spring boot v 3.1.2 . Using @ConfigurationPropertiesScan( &quot;com.myapp.workspace&quot; ) does not change anything. Apparently it is something to do with the way the jar got generated or the dependencies associated with it since the code runs fine when i do a gradlew bootRun"},{"owner":{"account_id":3430916,"reputation":3799,"user_id":3059385,"accept_rate":40,"display_name":"Christopher Schneider"},"score":1,"creation_date":1701100861,"post_id":77556876,"comment_id":136730264,"body_markdown":"Almost assured that something is getting omitted from your jar. I would inspect your  jar to make sure everything you expect is there. There&#39;s not enough information here to answer your question. Would need to see how you&#39;re building your jar. When you run in IntelliJ by the way, you can see the launch parameters in the first line. It&#39;s truncated by default.","body":"Almost assured that something is getting omitted from your jar. I would inspect your  jar to make sure everything you expect is there. There&#39;s not enough information here to answer your question. Would need to see how you&#39;re building your jar. When you run in IntelliJ by the way, you can see the launch parameters in the first line. It&#39;s truncated by default."},{"owner":{"account_id":9181835,"reputation":355,"user_id":6825377,"accept_rate":33,"display_name":"Rishi S"},"score":0,"creation_date":1701144923,"post_id":77556876,"comment_id":136735978,"body_markdown":"Resolved the issue by using the plain jar generated by the gradle build and pointing to dependencies jar folder in the classpath, instead of using the fat jar generated by gradle bootJar. Thanks for the inputs.","body":"Resolved the issue by using the plain jar generated by the gradle build and pointing to dependencies jar folder in the classpath, instead of using the fat jar generated by gradle bootJar. Thanks for the inputs."}],"owner":{"account_id":9181835,"reputation":355,"user_id":6825377,"accept_rate":33,"display_name":"Rishi S"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":2,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1701089074,"creation_date":1701087828,"question_id":77556876,"body_markdown":"I have a springboot application that runs fine  (using JPA) from IntelliJ and also using gradlew bootRun from the command line. \r\nHowwever, when I generate jars for the application using bootJar and run the application using java -cp &lt;path to the folder with all dependencies including spring&gt; I see that Spring does not find the JPA repositories : \r\n\r\n    @SpringBootApplication\r\n    @EnableAutoConfiguration\r\n    @ComponentScan( basePackages = [ &quot;com.myapp.workspace&quot;] )\r\n    @ConfigurationPropertiesScan( &quot;com.myapp.workspace.config&quot; )\r\n    @EnableConfigurationProperties(Settings::class, Git::class, RTC::class)\r\n    public class MyMain(\r\n           @Autowired\r\n    \t\tprivate val projectAreaRepository: ProjectAreaRepository,\r\n\r\n\r\nThe projectAreaRespository is in com.myapp.workspace.repository. The command line I am using is:\r\n\r\n    java -cp c:\\jars\\* com.myapp.workspace.MyMain\r\n\r\nThis code runs perfectly fine when I do a gradlew bootRun from the command line. Also from inside IntelliJ. So I assume all my annotations are correct.\r\n\r\nThe log shows : \r\n\r\n    2023-11-27T17:20:09.145+05:30 DEBUG 26900 --- [           main] s.c.a.AnnotationConfigApplicationContext : Refreshing org.springframework.context.annotation.AnnotationConfigApplicationContext@30ea8c23\r\n    2023-11-27T17:20:09.689+05:30  INFO 26900 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.\r\n    2023-11-27T17:20:09.705+05:30  INFO 26900 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 13 ms. Found 0 JPA repository interfaces.\r\nAnd further down : \r\n\r\n    Parameter 2 of constructor in com.myapp.workspace.MyMain required a bean of type &#39;com.myapp.workspace.repository.ProjectAreaRepository&#39; that could not be found.\r\n    \r\n    The injection point has the following annotations:\r\n            - @org.springframework.beans.factory.annotation.Autowired(required=true)\r\n    \r\n    \r\n        Action:\r\n        \r\n        Consider defining a bean of type &#39;com.myapp.workspace.repository.ProjectAreaRepository&#39; in your configuration.\r\n        \r\n        2023-11-27T17:20:11.503+05:30 ERROR 26900 --- [           main] c.i.r.workspace.MyMain$Companion  : Error creating bean with name &#39;myMain&#39;: Unsatisfied dependency expressed through constructor parameter 2: No qualifying bean of type &#39;com.myapp.workspace.repository.ProjectAreaRepository&#39; available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}\r\n        \r\n        org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;myMain&#39;: Unsatisfied dependency expressed through constructor parameter 2: No qualifying bean of type &#39;com.myapp.workspace.repository.ProjectAreaRepository&#39; available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}\r\n                at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:800) ~[spring-beans-6.0.11.jar:6.0.11]\r\n\r\nAny hints on what could be wrong is highly appreciated.\r\n\r\n Following JPA entries are in the application.yaml and the yaml is as well part of the jar :\r\n\r\nThe JPA entries are here :\r\n\r\n  \r\n\r\n      datasource:\r\n            driverClassName: org.h2.Driver\r\n            url: jdbc:h2:./DataSpring/rtc.workspace.h2;AUTO_SERVER=TRUE\r\n            username: sa\r\n            password: sa\r\n        jpa:\r\n            database-platform: org.hibernate.dialect.H2Dialect\r\n            hibernate:\r\n                ddl-auto: update\r\n            open-in-view: false\r\n            show-sql: false\r\n            properties:\r\n                hibernate:\r\n                    enable_lazy_load_no_trans: true\r\n        h2:\r\n            console:\r\n                enabled: true\r\n                path:    /h2-console\r\n                settings:\r\n                    trace: true\r\n                    web-allow-others: true\r\n\r\n","title":"Springboot application does not find JPA repositories when run from command line jar","body":"<p>I have a springboot application that runs fine  (using JPA) from IntelliJ and also using gradlew bootRun from the command line.\nHowwever, when I generate jars for the application using bootJar and run the application using java -cp  I see that Spring does not find the JPA repositories :</p>\n<pre><code>@SpringBootApplication\n@EnableAutoConfiguration\n@ComponentScan( basePackages = [ &quot;com.myapp.workspace&quot;] )\n@ConfigurationPropertiesScan( &quot;com.myapp.workspace.config&quot; )\n@EnableConfigurationProperties(Settings::class, Git::class, RTC::class)\npublic class MyMain(\n       @Autowired\n        private val projectAreaRepository: ProjectAreaRepository,\n</code></pre>\n<p>The projectAreaRespository is in com.myapp.workspace.repository. The command line I am using is:</p>\n<pre><code>java -cp c:\\jars\\* com.myapp.workspace.MyMain\n</code></pre>\n<p>This code runs perfectly fine when I do a gradlew bootRun from the command line. Also from inside IntelliJ. So I assume all my annotations are correct.</p>\n<p>The log shows :</p>\n<pre><code>2023-11-27T17:20:09.145+05:30 DEBUG 26900 --- [           main] s.c.a.AnnotationConfigApplicationContext : Refreshing org.springframework.context.annotation.AnnotationConfigApplicationContext@30ea8c23\n2023-11-27T17:20:09.689+05:30  INFO 26900 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.\n2023-11-27T17:20:09.705+05:30  INFO 26900 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 13 ms. Found 0 JPA repository interfaces.\n</code></pre>\n<p>And further down :</p>\n<pre><code>Parameter 2 of constructor in com.myapp.workspace.MyMain required a bean of type 'com.myapp.workspace.repository.ProjectAreaRepository' that could not be found.\n\nThe injection point has the following annotations:\n        - @org.springframework.beans.factory.annotation.Autowired(required=true)\n\n\n    Action:\n    \n    Consider defining a bean of type 'com.myapp.workspace.repository.ProjectAreaRepository' in your configuration.\n    \n    2023-11-27T17:20:11.503+05:30 ERROR 26900 --- [           main] c.i.r.workspace.MyMain$Companion  : Error creating bean with name 'myMain': Unsatisfied dependency expressed through constructor parameter 2: No qualifying bean of type 'com.myapp.workspace.repository.ProjectAreaRepository' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}\n    \n    org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'myMain': Unsatisfied dependency expressed through constructor parameter 2: No qualifying bean of type 'com.myapp.workspace.repository.ProjectAreaRepository' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}\n            at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:800) ~[spring-beans-6.0.11.jar:6.0.11]\n</code></pre>\n<p>Any hints on what could be wrong is highly appreciated.</p>\n<p>Following JPA entries are in the application.yaml and the yaml is as well part of the jar :</p>\n<p>The JPA entries are here :</p>\n<pre><code>  datasource:\n        driverClassName: org.h2.Driver\n        url: jdbc:h2:./DataSpring/rtc.workspace.h2;AUTO_SERVER=TRUE\n        username: sa\n        password: sa\n    jpa:\n        database-platform: org.hibernate.dialect.H2Dialect\n        hibernate:\n            ddl-auto: update\n        open-in-view: false\n        show-sql: false\n        properties:\n            hibernate:\n                enable_lazy_load_no_trans: true\n    h2:\n        console:\n            enabled: true\n            path:    /h2-console\n            settings:\n                trace: true\n                web-allow-others: true\n</code></pre>\n"},{"tags":["java","amazon-web-services","amazon-s3","spring-batch"],"comments":[{"owner":{"account_id":368650,"reputation":3742,"user_id":715592,"accept_rate":71,"display_name":"NullPointerException"},"score":0,"creation_date":1588122910,"post_id":50685891,"comment_id":108777531,"body_markdown":"looking for same solution but still not much results in 2020. were you able to figure out how to stream to a file on S3","body":"looking for same solution but still not much results in 2020. were you able to figure out how to stream to a file on S3"},{"owner":{"account_id":368650,"reputation":3742,"user_id":715592,"accept_rate":71,"display_name":"NullPointerException"},"score":0,"creation_date":1643129145,"post_id":50685891,"comment_id":125255584,"body_markdown":"Again in 2022, but no answers","body":"Again in 2022, but no answers"}],"answers":[{"tags":[],"owner":{"account_id":6482932,"reputation":29552,"user_id":5019386,"display_name":"Mahmoud Ben Hassine"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1701089074,"creation_date":1551453831,"answer_id":54947585,"question_id":50685891,"body_markdown":"[Spring Cloud AWS adds](http://cloud.spring.io/spring-cloud-static/spring-cloud-aws/1.2.3.RELEASE/multi/multi__resource_handling.html#_resource_handling) support for the Amazon S3 service to load and write resources with the resource loader and the s3 protocol. Once you have [configured the AWS resource loader](http://cloud.spring.io/spring-cloud-static/spring-cloud-aws/1.2.3.RELEASE/multi/multi__resource_handling.html#_configuring_the_resource_loader), you can write a custom Spring Batch writer like:\r\n\r\n    import java.io.OutputStream;\r\n    import java.util.List;\r\n    \r\n    import org.springframework.batch.item.ItemWriter;\r\n    import org.springframework.core.io.ResourceLoader;\r\n    import org.springframework.core.io.WritableResource;\r\n    \r\n    public class AwsS3ItemWriter implements ItemWriter&lt;String&gt; {\r\n    \r\n    \tprivate ResourceLoader resourceLoader;\r\n    \r\n    \tprivate WritableResource resource;\r\n    \r\n    \tpublic AwsS3ItemWriter(ResourceLoader resourceLoader, String resource) {\r\n    \t\tthis.resourceLoader = resourceLoader;\r\n    \t\tthis.resource = (WritableResource) this.resourceLoader.getResource(resource);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void write(List&lt;? extends String&gt; items) throws Exception {\r\n    \t\ttry (OutputStream outputStream = resource.getOutputStream()) {\r\n    \t\t\tfor (String item : items) {\r\n    \t\t\t\toutputStream.write(item.getBytes());\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\nThen you should be able to use this writer with an S3 resource like `s3://myBucket/myFile.log`.\r\n\r\n&gt; Is there anyway we can do that ?\r\n\r\nPlease note that I did not compile/test the previous code. I just wanted to give you a starting point of how to do it.\r\n\r\n**EDIT:** The previous snippet might write a file per chunk, which is not correct. Here is an updated version where the output stream is initialized only once.\r\n\r\n\r\n```\r\nimport java.io.IOException;\r\nimport java.io.OutputStream;\r\n\r\nimport org.springframework.batch.item.Chunk;\r\nimport org.springframework.batch.item.ExecutionContext;\r\nimport org.springframework.batch.item.ItemStreamException;\r\nimport org.springframework.batch.item.ItemStreamWriter;\r\nimport org.springframework.core.io.WritableResource;\r\n\r\npublic class AwsS3ItemWriter implements ItemStreamWriter&lt;String&gt; {\r\n\r\n    private final WritableResource resource;\r\n\r\n    private OutputStream outputStream;\r\n\r\n    @Override\r\n    public void open(ExecutionContext executionContext) throws ItemStreamException {\r\n        try {\r\n            this.outputStream = resource.getOutputStream();\r\n        } catch (IOException e) {\r\n            throw new ItemStreamException(&quot;Unable to get output stream&quot;, e);\r\n        }\r\n    }\r\n\r\n    public AwsS3ItemWriter(WritableResource resource) {\r\n        this.resource = resource;\r\n    }\r\n\r\n    @Override\r\n    public void write(Chunk&lt;? extends String&gt; items) throws Exception {\r\n        for (String item : items) {\r\n            outputStream.write(item.getBytes());\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void close() throws ItemStreamException {\r\n        try {\r\n            outputStream.close();\r\n        } catch (IOException e) {\r\n            throw new ItemStreamException(&quot;Unable to close output stream&quot;, e);\r\n        }\r\n    }\r\n    \r\n}\r\n```","title":"spring batch file writer to write directly to amazon s3 storage without PutObjectRequest","body":"<p><a href=\"http://cloud.spring.io/spring-cloud-static/spring-cloud-aws/1.2.3.RELEASE/multi/multi__resource_handling.html#_resource_handling\" rel=\"nofollow noreferrer\">Spring Cloud AWS adds</a> support for the Amazon S3 service to load and write resources with the resource loader and the s3 protocol. Once you have <a href=\"http://cloud.spring.io/spring-cloud-static/spring-cloud-aws/1.2.3.RELEASE/multi/multi__resource_handling.html#_configuring_the_resource_loader\" rel=\"nofollow noreferrer\">configured the AWS resource loader</a>, you can write a custom Spring Batch writer like:</p>\n<pre><code>import java.io.OutputStream;\nimport java.util.List;\n\nimport org.springframework.batch.item.ItemWriter;\nimport org.springframework.core.io.ResourceLoader;\nimport org.springframework.core.io.WritableResource;\n\npublic class AwsS3ItemWriter implements ItemWriter&lt;String&gt; {\n\n    private ResourceLoader resourceLoader;\n\n    private WritableResource resource;\n\n    public AwsS3ItemWriter(ResourceLoader resourceLoader, String resource) {\n        this.resourceLoader = resourceLoader;\n        this.resource = (WritableResource) this.resourceLoader.getResource(resource);\n    }\n\n    @Override\n    public void write(List&lt;? extends String&gt; items) throws Exception {\n        try (OutputStream outputStream = resource.getOutputStream()) {\n            for (String item : items) {\n                outputStream.write(item.getBytes());\n            }\n        }\n    }\n}\n</code></pre>\n<p>Then you should be able to use this writer with an S3 resource like <code>s3://myBucket/myFile.log</code>.</p>\n<blockquote>\n<p>Is there anyway we can do that ?</p>\n</blockquote>\n<p>Please note that I did not compile/test the previous code. I just wanted to give you a starting point of how to do it.</p>\n<p><strong>EDIT:</strong> The previous snippet might write a file per chunk, which is not correct. Here is an updated version where the output stream is initialized only once.</p>\n<pre><code>import java.io.IOException;\nimport java.io.OutputStream;\n\nimport org.springframework.batch.item.Chunk;\nimport org.springframework.batch.item.ExecutionContext;\nimport org.springframework.batch.item.ItemStreamException;\nimport org.springframework.batch.item.ItemStreamWriter;\nimport org.springframework.core.io.WritableResource;\n\npublic class AwsS3ItemWriter implements ItemStreamWriter&lt;String&gt; {\n\n    private final WritableResource resource;\n\n    private OutputStream outputStream;\n\n    @Override\n    public void open(ExecutionContext executionContext) throws ItemStreamException {\n        try {\n            this.outputStream = resource.getOutputStream();\n        } catch (IOException e) {\n            throw new ItemStreamException(&quot;Unable to get output stream&quot;, e);\n        }\n    }\n\n    public AwsS3ItemWriter(WritableResource resource) {\n        this.resource = resource;\n    }\n\n    @Override\n    public void write(Chunk&lt;? extends String&gt; items) throws Exception {\n        for (String item : items) {\n            outputStream.write(item.getBytes());\n        }\n    }\n\n    @Override\n    public void close() throws ItemStreamException {\n        try {\n            outputStream.close();\n        } catch (IOException e) {\n            throw new ItemStreamException(&quot;Unable to close output stream&quot;, e);\n        }\n    }\n    \n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11867601,"reputation":63,"user_id":8684705,"display_name":"pi lak"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1553179393,"creation_date":1553179393,"answer_id":55283039,"question_id":50685891,"body_markdown":"The problem is that the ***OutputStream*** will only write the last ***List&lt;? extends String&gt; items*** sent by the step...\r\nI think you might need to write a temporary file on file system and then send the whole file in a separate tasklet\r\n\r\nSee this example : \r\nhttps://github.com/TerrenceMiao/AWS/blob/master/dynamodb-java/src/main/java/org/paradise/microservice/userpreference/service/writer/CSVFileWriter.java","title":"spring batch file writer to write directly to amazon s3 storage without PutObjectRequest","body":"<p>The problem is that the <strong><em>OutputStream</em></strong> will only write the last <strong><em>List items</em></strong> sent by the step...\nI think you might need to write a temporary file on file system and then send the whole file in a separate tasklet</p>\n\n<p>See this example : \n<a href=\"https://github.com/TerrenceMiao/AWS/blob/master/dynamodb-java/src/main/java/org/paradise/microservice/userpreference/service/writer/CSVFileWriter.java\" rel=\"nofollow noreferrer\">https://github.com/TerrenceMiao/AWS/blob/master/dynamodb-java/src/main/java/org/paradise/microservice/userpreference/service/writer/CSVFileWriter.java</a></p>\n"},{"tags":[],"owner":{"account_id":17549638,"reputation":11,"user_id":12730292,"display_name":"Nephanis"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1579252029,"creation_date":1579252029,"answer_id":59784170,"question_id":50685891,"body_markdown":"I had the same thing to do. Because spring has no clas to write to a stream alone I made one my self like above example:\r\n\r\nYou need to classes for this. A Resource class which implements WriteableResource and extends AbstractResource:\r\n\r\n...\r\n\r\n    public class S3Resource extends AbstractResource implements WritableResource {\r\n    \r\n       ByteArrayOutputStream resource = new ByteArrayOutputStream();\r\n    \r\n        @Override\r\n        public String getDescription() {\r\n            return null;\r\n        }\r\n    \r\n        @Override\r\n        public InputStream getInputStream() throws IOException {\r\n            return new ByteArrayInputStream(resource.toByteArray());\r\n        }\r\n    \r\n        @Override\r\n        public OutputStream getOutputStream() throws IOException {\r\n            return resource;\r\n        }\r\n    }\r\n\r\nAnd your writer which extends ItemWriter&lt;T&gt;:\r\n\r\n\r\n    public class AmazonStreamWriter&lt;T&gt; implements ItemWriter&lt;T&gt;{\r\n    \r\n        private WritableResource resource;\r\n        private LineAggregator&lt;T&gt; lineAggregator;\r\n        private String lineSeparator;\r\n    \r\n        public String getLineSeparator() {\r\n            return lineSeparator;\r\n        }\r\n    \r\n        public void setLineSeparator(String lineSeparator) {\r\n            this.lineSeparator = lineSeparator;\r\n        }\r\n    \r\n        AmazonStreamWriter(WritableResource resource){\r\n            this.resource = resource;\r\n        }\r\n    \r\n        public WritableResource getResource() {\r\n            return resource;\r\n        }\r\n    \r\n        public void setResource(WritableResource resource) {\r\n            this.resource = resource;\r\n        }\r\n    \r\n        public LineAggregator&lt;T&gt; getLineAggregator() {\r\n            return lineAggregator;\r\n        }\r\n    \r\n        public void setLineAggregator(LineAggregator&lt;T&gt; lineAggregator) {\r\n            this.lineAggregator = lineAggregator;\r\n        }\r\n    \r\n        @Override\r\n        public void write(List&lt;? extends T&gt; items) throws Exception {\r\n            try (OutputStream outputStream = resource.getOutputStream()) {\r\n                    StringBuilder lines = new StringBuilder();\r\n                    Iterator var3 = items.iterator();\r\n    \r\n                    while(var3.hasNext()) {\r\n                        T item = (T) var3.next();\r\n    lines.append(this.lineAggregator.aggregate(item)).append(this.lineSeparator);\r\n                    }\r\n                    outputStream.write(lines.toString().getBytes());\r\n            }\r\n        }\r\n    }\r\n\r\nWith this setup you will write your Item-Information you recieve from your database and write it to your Customresource via an OutputStream. The filled resource then can be used in one of your Steps zu open an InputStream and upload to S3 via Client.\r\nI did it with:   `amazonS3.putObject(awsBucketName, awsBucketKey , resource.getInputStream(), new ObjectMetadata());`\r\n\r\nMy solution may be not the perfect aproach, but from here on you can optimize it.\r\n","title":"spring batch file writer to write directly to amazon s3 storage without PutObjectRequest","body":"<p>I had the same thing to do. Because spring has no clas to write to a stream alone I made one my self like above example:</p>\n\n<p>You need to classes for this. A Resource class which implements WriteableResource and extends AbstractResource:</p>\n\n<p>...</p>\n\n<pre><code>public class S3Resource extends AbstractResource implements WritableResource {\n\n   ByteArrayOutputStream resource = new ByteArrayOutputStream();\n\n    @Override\n    public String getDescription() {\n        return null;\n    }\n\n    @Override\n    public InputStream getInputStream() throws IOException {\n        return new ByteArrayInputStream(resource.toByteArray());\n    }\n\n    @Override\n    public OutputStream getOutputStream() throws IOException {\n        return resource;\n    }\n}\n</code></pre>\n\n<p>And your writer which extends ItemWriter:</p>\n\n<pre><code>public class AmazonStreamWriter&lt;T&gt; implements ItemWriter&lt;T&gt;{\n\n    private WritableResource resource;\n    private LineAggregator&lt;T&gt; lineAggregator;\n    private String lineSeparator;\n\n    public String getLineSeparator() {\n        return lineSeparator;\n    }\n\n    public void setLineSeparator(String lineSeparator) {\n        this.lineSeparator = lineSeparator;\n    }\n\n    AmazonStreamWriter(WritableResource resource){\n        this.resource = resource;\n    }\n\n    public WritableResource getResource() {\n        return resource;\n    }\n\n    public void setResource(WritableResource resource) {\n        this.resource = resource;\n    }\n\n    public LineAggregator&lt;T&gt; getLineAggregator() {\n        return lineAggregator;\n    }\n\n    public void setLineAggregator(LineAggregator&lt;T&gt; lineAggregator) {\n        this.lineAggregator = lineAggregator;\n    }\n\n    @Override\n    public void write(List&lt;? extends T&gt; items) throws Exception {\n        try (OutputStream outputStream = resource.getOutputStream()) {\n                StringBuilder lines = new StringBuilder();\n                Iterator var3 = items.iterator();\n\n                while(var3.hasNext()) {\n                    T item = (T) var3.next();\nlines.append(this.lineAggregator.aggregate(item)).append(this.lineSeparator);\n                }\n                outputStream.write(lines.toString().getBytes());\n        }\n    }\n}\n</code></pre>\n\n<p>With this setup you will write your Item-Information you recieve from your database and write it to your Customresource via an OutputStream. The filled resource then can be used in one of your Steps zu open an InputStream and upload to S3 via Client.\nI did it with:   <code>amazonS3.putObject(awsBucketName, awsBucketKey , resource.getInputStream(), new ObjectMetadata());</code></p>\n\n<p>My solution may be not the perfect aproach, but from here on you can optimize it.</p>\n"}],"owner":{"account_id":4336322,"reputation":175,"user_id":3540722,"display_name":"user3540722"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7664,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":3,"score":5,"last_activity_date":1701089074,"creation_date":1528133560,"question_id":50685891,"body_markdown":"I&#39;m trying to upload a file to amazon s3. Instead of uploading, I want to read the data from database using spring batch and write the file directly into the s3 storage. Is there anyway we can do that ?","title":"spring batch file writer to write directly to amazon s3 storage without PutObjectRequest","body":"<p>I'm trying to upload a file to amazon s3. Instead of uploading, I want to read the data from database using spring batch and write the file directly into the s3 storage. Is there anyway we can do that ?</p>\n"},{"tags":["java","spring","spring-boot","spring-context"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1701088825,"post_id":77556963,"comment_id":136727691,"body_markdown":"Your test doesn&#39;t make sense. You are using `@SpringBootTest` but are starting the application yourself in an `@BeforeClass`. You should ditch your `@BeforeClass` as that doesn&#39;t make sense and renders the `@SpringBootTest` useless.","body":"Your test doesn&#39;t make sense. You are using <code>@SpringBootTest</code> but are starting the application yourself in an <code>@BeforeClass</code>. You should ditch your <code>@BeforeClass</code> as that doesn&#39;t make sense and renders the <code>@SpringBootTest</code> useless."},{"owner":{"account_id":24068880,"reputation":1,"user_id":20652402,"display_name":"bb-bb-1"},"score":0,"creation_date":1701089435,"post_id":77556963,"comment_id":136727792,"body_markdown":"How Can I do that, I am not able to understand since this code was written by old age developers. :) ? please help","body":"How Can I do that, I am not able to understand since this code was written by old age developers. :) ? please help"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1701090047,"post_id":77556963,"comment_id":136727904,"body_markdown":"As stated your test is pointless. The `@SpringBootTest` is useless due to the code in the `@BeforeClass` start by removing that method, as that will use the `@SpringBootTest` your current test doesn&#39;t. I also wonder what it tests, as it looks like an integration tests but a lot of mocking is going on.","body":"As stated your test is pointless. The <code>@SpringBootTest</code> is useless due to the code in the <code>@BeforeClass</code> start by removing that method, as that will use the <code>@SpringBootTest</code> your current test doesn&#39;t. I also wonder what it tests, as it looks like an integration tests but a lot of mocking is going on."}],"owner":{"account_id":24068880,"reputation":1,"user_id":20652402,"display_name":"bb-bb-1"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1701088720,"creation_date":1701088720,"question_id":77556963,"body_markdown":"I have my Test cases written like this\r\n\r\n```\r\n@RunWith(SpringJUnit4ClassRunner.class)\r\n@SpringBootTest(classes = { Application.class }, webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)\r\n@DirtiesContext(classMode = DirtiesContext.ClassMode.AFTER_CLASS)\r\n@TestPropertySource(locations = {&quot;file:../config/abc.properties&quot;,\r\n        &quot;classpath:abc-override.properties&quot;})\r\npublic abstract class AbstractTest\r\n{\r\n    static final Mockery mockery = new Mockery()\r\n    {\r\n        {\r\n            setImposteriser(ClassImposteriser.INSTANCE);\r\n        }\r\n    };\r\n\r\n    static RestTemplate restTemplate = mockery.mock(RestTemplate.class);\r\n\r\n    private static MongoClient mongoClient;\r\n\r\n    static ConfigurableApplicationContext context;\r\n\r\n    @BeforeClass\r\n    public static void start()\r\n    {\r\n \r\n        EmbeddedMongo embeddedMongo = new EmbeddedMongo(EmbeddedMongoDefaultConfiguration.instance());\r\n        mongoClient = embeddedMongo.start();\r\n\r\n        String[] args = { &quot;--server.port=&quot; + SocketUtils.findAvailableTcpPort(8000, 9000) };\r\n        // below is line #131\r\n        context = SpringApplication.run(Application.class, args);//Error coming on this line\r\n        \r\n        Module&lt;?&gt; module = context.getBean(Module.class);\r\n       \r\n    }\r\n\r\n    @Test\r\n    public void sample_test() {\r\n\r\n    }\r\n}\r\n```\r\n\r\n\r\n\r\nGetting below issue:\r\n```\r\norg.springframework.cloud.commons.ConfigDataMissingEnvironmentPostProcessor$ImportException: No spring.config.import set\r\n\r\nat org.springframework.cloud.commons.ConfigDataMissingEnvironmentPostProcessor.postProcessEnvironment(ConfigDataMissingEnvironmentPostProcessor.java:79)\r\nat com.abc.AbstractTest.start(AbstractTest.java:131) -&gt; I have indicated in previous code the line no 131, please see\r\n```\r\n\r\n\r\nMy Project structure looks like this:\r\n\r\n[project structure][1]\r\n\r\n\r\nMy abc-override.properties has this content:\r\n```\r\n# Logging levels across packages (optional)\r\nlogging.level.root=WARN\r\nspring.cloud.config.import-check.enabled=false\r\n\r\n```\r\n\r\n\r\nIn the test case I am confident that @TestPropertySource is correct and it will load the properties properly since I have used this lot of times.\r\n```\r\n@TestPropertySource(locations = {&quot;file:../config/abc.properties&quot;,\r\n        &quot;classpath:abc-override.properties&quot;})\r\n\r\n```\r\n\r\nI have investigated the issue of **No spring.config.import set**.\r\n\r\n**Issue is** my test is loading the context in static way and that is creating the problem and and it&#39;s not loading config so spring.cloud.import set to false is not active\r\n\r\nIt is loading context like this:\r\n\r\n ```\r\n// below is line #131\r\n context = SpringApplication.run(Application.class, args);//Error coming on this line\r\n Module&lt;?&gt; module = context.getBean(Module.class);\r\n```\r\n\r\nMy Goal is how can I write this test in better way so that context will be loaded properly.\r\nI want to rewrite this unit test and load the context in a way the **abc.propertie**s and **abc-override.properties** are loaded first\r\n\r\nAny help would be highly appreciated. Thanks!\r\n\r\n  [1]: https://i.stack.imgur.com/S7zCn.pnga","title":"Config properties are not loaded with @SpringBootTest","body":"<p>I have my Test cases written like this</p>\n<pre><code>@RunWith(SpringJUnit4ClassRunner.class)\n@SpringBootTest(classes = { Application.class }, webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)\n@DirtiesContext(classMode = DirtiesContext.ClassMode.AFTER_CLASS)\n@TestPropertySource(locations = {&quot;file:../config/abc.properties&quot;,\n        &quot;classpath:abc-override.properties&quot;})\npublic abstract class AbstractTest\n{\n    static final Mockery mockery = new Mockery()\n    {\n        {\n            setImposteriser(ClassImposteriser.INSTANCE);\n        }\n    };\n\n    static RestTemplate restTemplate = mockery.mock(RestTemplate.class);\n\n    private static MongoClient mongoClient;\n\n    static ConfigurableApplicationContext context;\n\n    @BeforeClass\n    public static void start()\n    {\n \n        EmbeddedMongo embeddedMongo = new EmbeddedMongo(EmbeddedMongoDefaultConfiguration.instance());\n        mongoClient = embeddedMongo.start();\n\n        String[] args = { &quot;--server.port=&quot; + SocketUtils.findAvailableTcpPort(8000, 9000) };\n        // below is line #131\n        context = SpringApplication.run(Application.class, args);//Error coming on this line\n        \n        Module&lt;?&gt; module = context.getBean(Module.class);\n       \n    }\n\n    @Test\n    public void sample_test() {\n\n    }\n}\n</code></pre>\n<p>Getting below issue:</p>\n<pre><code>org.springframework.cloud.commons.ConfigDataMissingEnvironmentPostProcessor$ImportException: No spring.config.import set\n\nat org.springframework.cloud.commons.ConfigDataMissingEnvironmentPostProcessor.postProcessEnvironment(ConfigDataMissingEnvironmentPostProcessor.java:79)\nat com.abc.AbstractTest.start(AbstractTest.java:131) -&gt; I have indicated in previous code the line no 131, please see\n</code></pre>\n<p>My Project structure looks like this:</p>\n<p><a href=\"https://i.stack.imgur.com/S7zCn.pnga\" rel=\"nofollow noreferrer\">project structure</a></p>\n<p>My abc-override.properties has this content:</p>\n<pre><code># Logging levels across packages (optional)\nlogging.level.root=WARN\nspring.cloud.config.import-check.enabled=false\n\n</code></pre>\n<p>In the test case I am confident that @TestPropertySource is correct and it will load the properties properly since I have used this lot of times.</p>\n<pre><code>@TestPropertySource(locations = {&quot;file:../config/abc.properties&quot;,\n        &quot;classpath:abc-override.properties&quot;})\n\n</code></pre>\n<p>I have investigated the issue of <strong>No spring.config.import set</strong>.</p>\n<p><strong>Issue is</strong> my test is loading the context in static way and that is creating the problem and and it's not loading config so spring.cloud.import set to false is not active</p>\n<p>It is loading context like this:</p>\n<pre><code>// below is line #131\ncontext = SpringApplication.run(Application.class, args);//Error coming on this line\nModule&lt;?&gt; module = context.getBean(Module.class);\n</code></pre>\n<p>My Goal is how can I write this test in better way so that context will be loaded properly.\nI want to rewrite this unit test and load the context in a way the <strong>abc.propertie</strong>s and <strong>abc-override.properties</strong> are loaded first</p>\n<p>Any help would be highly appreciated. Thanks!</p>\n"},{"tags":["java","spring-boot","spring-webflux","reactive-programming"],"comments":[{"owner":{"account_id":11400015,"reputation":1904,"user_id":8357251,"display_name":"gdomo"},"score":0,"creation_date":1701084827,"post_id":77554885,"comment_id":136727000,"body_markdown":"Does `processStreamDataFlux` return Flux and `discordClient. ... .createMessage` - Mono?","body":"Does <code>processStreamDataFlux</code> return Flux and <code>discordClient. ... .createMessage</code> - Mono?"},{"owner":{"account_id":21726590,"reputation":41,"user_id":16035933,"display_name":"James K J"},"score":0,"creation_date":1701086983,"post_id":77554885,"comment_id":136727353,"body_markdown":"processStreamDataFlux returns flux and discordClient. ... .createMessage.  doesn&#39;t return anything. It just sends a message on doOnCompleteCall @gdomo","body":"processStreamDataFlux returns flux and discordClient. ... .createMessage.  doesn&#39;t return anything. It just sends a message on doOnCompleteCall @gdomo"}],"answers":[{"tags":[],"owner":{"account_id":15013161,"reputation":71,"user_id":10836980,"display_name":"Azn9"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701088719,"creation_date":1701088719,"answer_id":77556962,"question_id":77554885,"body_markdown":"Instead of using `doOnComplete` which is using a Runnable as parameter, you can use `collectList` which will return a Mono&lt;List&lt;?&gt;&gt;. After that, you can use `flatMap` on this Mono and call the `createMessage` as the return statement of the flat map.","title":"how to overcome blockOptional is blocking in spring web flux","body":"<p>Instead of using <code>doOnComplete</code> which is using a Runnable as parameter, you can use <code>collectList</code> which will return a Mono&lt;List&lt;?&gt;&gt;. After that, you can use <code>flatMap</code> on this Mono and call the <code>createMessage</code> as the return statement of the flat map.</p>\n"}],"owner":{"account_id":21726590,"reputation":41,"user_id":16035933,"display_name":"James K J"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":63,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1701088719,"creation_date":1701066468,"question_id":77554885,"body_markdown":"I&#39;m currently working on a streaming exercise, and here&#39;s the situation: I&#39;m receiving a stream of tokens when I hit an endpoint, and my job is to save each of these tokens as they arrive. After the entire stream is processed, I need to use the Discord client to send the collected tokens to a Discord channel. I&#39;ve included the code signature below. The problem I&#39;m encountering is that `blockOptional() is causing blocking, and it&#39;s not supported in the reactor-http-nio-15 thread`. Any advice on how to address this issue would be greatly appreciated.\r\n\r\n\r\n```\r\nvar dataStream = chatBotRPCService.getResponseUsingStreaming(message.getContent());\r\n\r\n\r\n// data stream is of type Flux&lt;Object&gt;\r\n\r\n\r\nprocessStreamDataFlux(dataStream, message, chatBot, dmMessage, externalFunctionCallCount, answer, response)\r\n    .doOnComplete(() -&gt; {\r\n          \r\n           //send the accumulated tokens to discord  \r\n           \r\n           // The issue happens at the below line of code. \r\n\r\n           messageData = discordClient\r\n                    .getChannelById(Snowflake.of(message.getThreadId()))\r\n                    .createMessage(\r\n                            MultipartRequest.ofRequest(messageRequest\r\n                            )).blockOptional();\r\n       \r\n    })\r\n    .subscribe(tokens -&gt; {\r\n    });\r\n\r\n\r\n```\r\n\r\n\r\n`Issue: blockOptional() is blocking, which is not supported in thread reactor-http-nio-15`\r\n\r\n\r\ndiscord client is built on the package `https://github.com/Discord4J/Discord4J`\r\n","title":"how to overcome blockOptional is blocking in spring web flux","body":"<p>I'm currently working on a streaming exercise, and here's the situation: I'm receiving a stream of tokens when I hit an endpoint, and my job is to save each of these tokens as they arrive. After the entire stream is processed, I need to use the Discord client to send the collected tokens to a Discord channel. I've included the code signature below. The problem I'm encountering is that <code>blockOptional() is causing blocking, and it's not supported in the reactor-http-nio-15 thread</code>. Any advice on how to address this issue would be greatly appreciated.</p>\n<pre><code>var dataStream = chatBotRPCService.getResponseUsingStreaming(message.getContent());\n\n\n// data stream is of type Flux&lt;Object&gt;\n\n\nprocessStreamDataFlux(dataStream, message, chatBot, dmMessage, externalFunctionCallCount, answer, response)\n    .doOnComplete(() -&gt; {\n          \n           //send the accumulated tokens to discord  \n           \n           // The issue happens at the below line of code. \n\n           messageData = discordClient\n                    .getChannelById(Snowflake.of(message.getThreadId()))\n                    .createMessage(\n                            MultipartRequest.ofRequest(messageRequest\n                            )).blockOptional();\n       \n    })\n    .subscribe(tokens -&gt; {\n    });\n\n\n</code></pre>\n<p><code>Issue: blockOptional() is blocking, which is not supported in thread reactor-http-nio-15</code></p>\n<p>discord client is built on the package <code>https://github.com/Discord4J/Discord4J</code></p>\n"},{"tags":["java","multithreading","synchronization"],"comments":[{"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"score":0,"creation_date":1701085486,"post_id":77556278,"comment_id":136727099,"body_markdown":"Comparing the result from `collatzLength()` with some sample value from https://challenges.wolframcloud.com/challenge/length-of-the-collatz-sequence it seems that `collatzLength()` returns the correct length. The question is: what should your counts A and B signify? Why do you expect the values 17 and 15 for those counts for the specified inputs?","body":"Comparing the result from <code>collatzLength()</code> with some sample value from <a href=\"https://challenges.wolframcloud.com/challenge/length-of-the-collatz-sequence\" rel=\"nofollow noreferrer\">challenges.wolframcloud.com/challenge/&hellip;</a> it seems that <code>collatzLength()</code> returns the correct length. The question is: what should your counts A and B signify? Why do you expect the values 17 and 15 for those counts for the specified inputs?"},{"owner":{"account_id":21892257,"reputation":1,"user_id":16179072,"display_name":"williamj987"},"score":0,"creation_date":1701086050,"post_id":77556278,"comment_id":136727184,"body_markdown":"Count A signifies a list length that is at least as large as half of the integer itself, and Count B signifies a list length that is less than half of the integer itself if that makes sense. And I expected 17 and 15 because I thought it would be logically correct.","body":"Count A signifies a list length that is at least as large as half of the integer itself, and Count B signifies a list length that is less than half of the integer itself if that makes sense. And I expected 17 and 15 because I thought it would be logically correct."},{"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"score":0,"creation_date":1701088104,"post_id":77556278,"comment_id":136727550,"body_markdown":"Your current code `if (length &gt;= i) incrementCountA();` increments count A if the list length is at least as large as integer itself. If I replace that with `if (length &gt;= i / 2) incrementCountA();` (that would match your description) and the corresponding condition for count B I get 23 for count A and 9 for count B.","body":"Your current code <code>if (length &gt;= i) incrementCountA();</code> increments count A if the list length is at least as large as integer itself. If I replace that with <code>if (length &gt;= i &#47; 2) incrementCountA();</code> (that would match your description) and the corresponding condition for count B I get 23 for count A and 9 for count B."},{"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"score":0,"creation_date":1701088168,"post_id":77556278,"comment_id":136727563,"body_markdown":"BTW it would be easier to change the conditions for count A and count B if you where using and if - else construct: `if (length &gt;= i) incrementCountA(); else incrementCountB();`","body":"BTW it would be easier to change the conditions for count A and count B if you where using and if - else construct: <code>if (length &gt;= i) incrementCountA(); else incrementCountB();</code>"},{"owner":{"account_id":422870,"reputation":25925,"user_id":801894,"display_name":"Solomon Slow"},"score":1,"creation_date":1701092090,"post_id":77556278,"comment_id":136728264,"body_markdown":"&quot;Is there something wrong with my Collatz sequence...?&quot; Have you tested your `CollatzRunner` class in a single-threaded test program? That would be my first step.","body":"&quot;Is there something wrong with my Collatz sequence...?&quot; Have you tested your <code>CollatzRunner</code> class in a single-threaded test program? That would be my first step."}],"owner":{"account_id":21892257,"reputation":1,"user_id":16179072,"display_name":"williamj987"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":2,"is_answered":false,"view_count":65,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":0,"score":-2,"last_activity_date":1701088438,"creation_date":1701082048,"question_id":77556278,"body_markdown":"I&#39;m practicing using multi-threading in Java using a command line, but I&#39;ve been stuck for a while. Here is what I have so far:\r\n\r\n```\r\npublic class MultithreadPractice {\r\n\r\n    // Shared counters for criteria A and B, initialized to 0\r\n    private static int countA = 0;\r\n    private static int countB = 0;\r\n\r\n    // Synchronized methods to update counts safely\r\n    private static synchronized void incrementCountA() {\r\n        countA++;\r\n    }\r\n\r\n    private static synchronized void incrementCountB() {\r\n        countB++;\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        if (args.length != 3) {\r\n            System.out.println(&quot;Please provide three arguments: a, b, and n&quot;);\r\n            return;\r\n        }\r\n\r\n        int a = Integer.parseInt(args[0]);\r\n        int b = Integer.parseInt(args[1]);\r\n        int n = Integer.parseInt(args[2]);\r\n\r\n        // Validate input\r\n        if (a % 2 == 0 || b % 2 == 0 || a &gt; b || n &lt;= 0) {\r\n            System.out.println(&quot;Invalid input. Ensure a and b are odd and a &lt; b, and n is positive.&quot;);\r\n            return;\r\n        }\r\n\r\n        int range = (b - a) / 2 + 1; // Number of odd integers in the range\r\n        int chunkSize = range / n; // Size of each chunk to be processed by each thread\r\n        int remainder = range % n; // Remaining numbers after even division\r\n\r\n        Thread[] threads = new Thread[n];\r\n\r\n        for (int i = 0; i &lt; n; i++) {\r\n            int start = a + 2 * (i * chunkSize);\r\n            int end = start + 2 * chunkSize - 2;\r\n            if (i == n - 1) {\r\n                end += 2 * remainder; // Add the remaining numbers to the last thread\r\n            }\r\n\r\n            threads[i] = new Thread(new CollatzRunner(start, end));\r\n            threads[i].start();\r\n        }\r\n\r\n        // Wait for all threads to finish\r\n        try {\r\n            for (Thread thread : threads) {\r\n                thread.join();\r\n            }\r\n        } catch (InterruptedException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        // Print results\r\n        System.out.println(&quot;Using &quot; + n + &quot; threads.&quot;);\r\n        System.out.println(&quot;Count for (A) is &quot; + countA + &quot;.&quot;);\r\n        System.out.println(&quot;Count for (B) is &quot; + countB + &quot;.&quot;);\r\n    }\r\n\r\n    static class CollatzRunner implements Runnable {\r\n        private final int start;\r\n        private final int end;\r\n\r\n        CollatzRunner(int start, int end) {\r\n            this.start = start;\r\n            this.end = end;\r\n        }\r\n\r\n        @Override\r\n        public void run() {\r\n            for (int i = start; i &lt;= end; i += 2) {\r\n                int length = collatzLength(i);\r\n                if (length &gt;= i) incrementCountA();\r\n                if (length &lt; i) incrementCountB();\r\n            }\r\n        }\r\n\r\n        private int collatzLength(int n) {\r\n            int steps = 0;\r\n            long num = n;\r\n            while (num != 1) {\r\n                if (num % 2 == 0) num /= 2;\r\n                else num = 3 * num + 1;\r\n                steps++;\r\n            }\r\n            return steps;\r\n        }\r\n    }\r\n}\r\n```\r\nI expect my result to give me something like this in the command line:\r\n\r\njava MultithreadPractice 11 73 4\r\n\r\n \r\n**Using 4 threads.**\r\n\r\n**Count for (A) is 17.**\r\n\r\n**Count for (B) is 15.**\r\n\r\nBut instead, I got 11 for A and 21 for B. Is there something wrong with my Collatz sequence or am I missing something?\r\n\r\n","title":"Multi-threading with odd numbers","body":"<p>I'm practicing using multi-threading in Java using a command line, but I've been stuck for a while. Here is what I have so far:</p>\n<pre><code>public class MultithreadPractice {\n\n    // Shared counters for criteria A and B, initialized to 0\n    private static int countA = 0;\n    private static int countB = 0;\n\n    // Synchronized methods to update counts safely\n    private static synchronized void incrementCountA() {\n        countA++;\n    }\n\n    private static synchronized void incrementCountB() {\n        countB++;\n    }\n\n    public static void main(String[] args) {\n        if (args.length != 3) {\n            System.out.println(&quot;Please provide three arguments: a, b, and n&quot;);\n            return;\n        }\n\n        int a = Integer.parseInt(args[0]);\n        int b = Integer.parseInt(args[1]);\n        int n = Integer.parseInt(args[2]);\n\n        // Validate input\n        if (a % 2 == 0 || b % 2 == 0 || a &gt; b || n &lt;= 0) {\n            System.out.println(&quot;Invalid input. Ensure a and b are odd and a &lt; b, and n is positive.&quot;);\n            return;\n        }\n\n        int range = (b - a) / 2 + 1; // Number of odd integers in the range\n        int chunkSize = range / n; // Size of each chunk to be processed by each thread\n        int remainder = range % n; // Remaining numbers after even division\n\n        Thread[] threads = new Thread[n];\n\n        for (int i = 0; i &lt; n; i++) {\n            int start = a + 2 * (i * chunkSize);\n            int end = start + 2 * chunkSize - 2;\n            if (i == n - 1) {\n                end += 2 * remainder; // Add the remaining numbers to the last thread\n            }\n\n            threads[i] = new Thread(new CollatzRunner(start, end));\n            threads[i].start();\n        }\n\n        // Wait for all threads to finish\n        try {\n            for (Thread thread : threads) {\n                thread.join();\n            }\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        }\n\n        // Print results\n        System.out.println(&quot;Using &quot; + n + &quot; threads.&quot;);\n        System.out.println(&quot;Count for (A) is &quot; + countA + &quot;.&quot;);\n        System.out.println(&quot;Count for (B) is &quot; + countB + &quot;.&quot;);\n    }\n\n    static class CollatzRunner implements Runnable {\n        private final int start;\n        private final int end;\n\n        CollatzRunner(int start, int end) {\n            this.start = start;\n            this.end = end;\n        }\n\n        @Override\n        public void run() {\n            for (int i = start; i &lt;= end; i += 2) {\n                int length = collatzLength(i);\n                if (length &gt;= i) incrementCountA();\n                if (length &lt; i) incrementCountB();\n            }\n        }\n\n        private int collatzLength(int n) {\n            int steps = 0;\n            long num = n;\n            while (num != 1) {\n                if (num % 2 == 0) num /= 2;\n                else num = 3 * num + 1;\n                steps++;\n            }\n            return steps;\n        }\n    }\n}\n</code></pre>\n<p>I expect my result to give me something like this in the command line:</p>\n<p>java MultithreadPractice 11 73 4</p>\n<p><strong>Using 4 threads.</strong></p>\n<p><strong>Count for (A) is 17.</strong></p>\n<p><strong>Count for (B) is 15.</strong></p>\n<p>But instead, I got 11 for A and 21 for B. Is there something wrong with my Collatz sequence or am I missing something?</p>\n"},{"tags":["java","firebase-cloud-messaging","progressive-web-apps"],"owner":{"account_id":25884378,"reputation":1,"user_id":19612803,"display_name":"Thomas Barth"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1701088312,"creation_date":1701088312,"question_id":77556921,"body_markdown":"I have installed my Progressive Web App on my Android mobile phone. When I send a push notification to this app (with my user token), a bell appears in the top bar. When I pull down the bar, I see the notification box with the title and text. When I tap this box, the window closes, but the app in the background does not come to the foreground! What do I have to do so that my installed app, which is in the background, comes to the foreground? \r\n\r\nI would also like to prevent this notification from asking whether the URL should be opened in the browser! This has already happened. The default browser should not be opened, but the already installed app should be brought to the foreground. \r\n\r\nI send the message via the Firebase SDK with a Java app on my server.  Here I can only specify a title and text for the notification message, but no click action. Or can I? \r\n\r\n\r\nMy method for creating the notification\r\n```\r\npublic static Message.Builder createMessage(String title, String body, String user_token) {\r\n\t\tNotification notification = Notification.builder().setTitle(title).setBody(body).build();\r\n\t\t\t\t\r\n\t\tMessage.Builder message = Message.builder().setNotification(notification).setToken(user_token);\r\n\t\t\r\n\t\treturn message;\r\n\t}\r\n```\r\n\r\nHere is the url to the document I used for orientation [FirebaseMessagingSnippet](https://github.com/firebase/firebase-admin-java/blob/b4ab5903fb337b6023e331feb317f0866872c439/src/test/java/com/google/firebase/snippets/FirebaseMessagingSnippets.java)\r\n\r\n\r\n\r\n\r\nWhen I tap on the notification box, I expect the pwa to be brought to the foreground.","title":"How to define the click action in a push notification for Progressive Web App (PWA)?","body":"<p>I have installed my Progressive Web App on my Android mobile phone. When I send a push notification to this app (with my user token), a bell appears in the top bar. When I pull down the bar, I see the notification box with the title and text. When I tap this box, the window closes, but the app in the background does not come to the foreground! What do I have to do so that my installed app, which is in the background, comes to the foreground?</p>\n<p>I would also like to prevent this notification from asking whether the URL should be opened in the browser! This has already happened. The default browser should not be opened, but the already installed app should be brought to the foreground.</p>\n<p>I send the message via the Firebase SDK with a Java app on my server.  Here I can only specify a title and text for the notification message, but no click action. Or can I?</p>\n<p>My method for creating the notification</p>\n<pre><code>public static Message.Builder createMessage(String title, String body, String user_token) {\n        Notification notification = Notification.builder().setTitle(title).setBody(body).build();\n                \n        Message.Builder message = Message.builder().setNotification(notification).setToken(user_token);\n        \n        return message;\n    }\n</code></pre>\n<p>Here is the url to the document I used for orientation <a href=\"https://github.com/firebase/firebase-admin-java/blob/b4ab5903fb337b6023e331feb317f0866872c439/src/test/java/com/google/firebase/snippets/FirebaseMessagingSnippets.java\" rel=\"nofollow noreferrer\">FirebaseMessagingSnippet</a></p>\n<p>When I tap on the notification box, I expect the pwa to be brought to the foreground.</p>\n"},{"tags":["java","spring","hibernate","spring-data-jpa","jpql"],"comments":[{"owner":{"account_id":5644665,"reputation":35941,"user_id":4467208,"accept_rate":51,"display_name":"Murat Karag&#246;z"},"score":0,"creation_date":1701086776,"post_id":77556669,"comment_id":136727320,"body_markdown":"Probably because delete all expects an Iterable. Why not call it `deleteBy...`?","body":"Probably because delete all expects an Iterable. Why not call it <code>deleteBy...</code>?"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":4,"creation_date":1701088307,"post_id":77556669,"comment_id":136727603,"body_markdown":"The delete query is generated by Spring Data **not** hibernate. Next to that what might seem logical to you, might not be to hibernate as that only has the metadata it can operate on.","body":"The delete query is generated by Spring Data <b>not</b> hibernate. Next to that what might seem logical to you, might not be to hibernate as that only has the metadata it can operate on."},{"owner":{"account_id":23090602,"reputation":59,"user_id":18073200,"display_name":"denstran"},"score":0,"creation_date":1701089427,"post_id":77556669,"comment_id":136727790,"body_markdown":"@MuratKarag&#246;z because i want to delete all entities with one go, will `deleteBy...` handle this?","body":"@MuratKarag&#246;z because i want to delete all entities with one go, will <code>deleteBy...</code> handle this?"},{"owner":{"account_id":23090602,"reputation":59,"user_id":18073200,"display_name":"denstran"},"score":0,"creation_date":1701089568,"post_id":77556669,"comment_id":136727813,"body_markdown":"@M.Deinum oh, i didnt know about this, but still whats the difference between my custom query and `deleteAllBy...` method? How does it work?","body":"@M.Deinum oh, i didnt know about this, but still whats the difference between my custom query and <code>deleteAllBy...</code> method? How does it work?"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1701090002,"post_id":77556669,"comment_id":136727896,"body_markdown":"You would need to look at the query builder in Spring Data to determine what that is doing. I would suspect that there is even a `SELECT` before the `DELETE` instances. Why, because else Hibernate won&#39;t know what to delete as it would need the entity mapping to determine if nested relationships need to be deleted as well.","body":"You would need to look at the query builder in Spring Data to determine what that is doing. I would suspect that there is even a <code>SELECT</code> before the <code>DELETE</code> instances. Why, because else Hibernate won&#39;t know what to delete as it would need the entity mapping to determine if nested relationships need to be deleted as well."},{"owner":{"account_id":23090602,"reputation":59,"user_id":18073200,"display_name":"denstran"},"score":0,"creation_date":1701091458,"post_id":77556669,"comment_id":136728159,"body_markdown":"@M.Deinum just checked it out, yeah, there is really a `SELECT` query before deleting entity, now i understand why, but I also noticed that if i am using custom query for deleting department entities, there is no such query, so is it better to use custom queries for updating / deleting entities? Or maybe there is not such query because I am executing this query first: `@Query(value = &quot;DELETE FROM Employee e WHERE e.department.id IN (SELECT d.id from Department d where d.companyBranch.id = :companyBranchId)&quot;)` ?","body":"@M.Deinum just checked it out, yeah, there is really a <code>SELECT</code> query before deleting entity, now i understand why, but I also noticed that if i am using custom query for deleting department entities, there is no such query, so is it better to use custom queries for updating / deleting entities? Or maybe there is not such query because I am executing this query first: <code>@Query(value = &quot;DELETE FROM Employee e WHERE e.department.id IN (SELECT d.id from Department d where d.companyBranch.id = :companyBranchId)&quot;)</code> ?"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":2,"creation_date":1701091948,"post_id":77556669,"comment_id":136728239,"body_markdown":"If you provide a query that will be executed as is, it will not use the JPA metamodel then to traverse relations etc. etc.","body":"If you provide a query that will be executed as is, it will not use the JPA metamodel then to traverse relations etc. etc."}],"owner":{"account_id":23090602,"reputation":59,"user_id":18073200,"display_name":"denstran"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1701088309,"creation_date":1701085920,"question_id":77556669,"body_markdown":"In my project I was using this method for my entity repository\r\n\r\n    void deleteAllByCompanyBranch_Id(Long companyBranchId);\r\n\r\nAnd the result was a little bit weird, Hibernate generated DELETE query for each entity, instead of doing it only once and I can&#39;t understand why. Here is Hibernate&#39;s log\r\n\r\n    Hibernate: \r\n        delete \r\n        from\r\n            department \r\n        where\r\n            id=?\r\n    Hibernate: \r\n        delete \r\n        from\r\n            department \r\n        where\r\n            id=?\r\n    Hibernate: \r\n        delete \r\n        from\r\n            department \r\n        where\r\n            id=?\r\n    Hibernate: \r\n        delete \r\n        from\r\n            department \r\n        where\r\n            id=?\r\n\r\nAs you can see Hibernate generates four delete queries for each row related to company branch.\r\n\r\nIf I am using a custom query like this\r\n\r\n    @Modifying\r\n    @Query(value = &quot;DELETE Department d WHERE d.companyBranch.id = :companyBranchId&quot;)\r\n    void deleteAllByCompanyBranch_Id(Long companyBranchId);\r\n\r\nHibernate generates only one query\r\n\r\n    Hibernate: \r\n        delete \r\n        from\r\n            department \r\n        where\r\n            company_branch_id=?\r\n\r\nWhy can&#39;t hibernate do the same for `deleteAllBy...` method from Spring Data JPA? What&#39;s the point of this query method if it can not delete all entities with one query? When should I use it and when should I not?","title":"How does deleteAllBy... method work in Spring Data JPA? Why does it it make more DELETE queries then needed?","body":"<p>In my project I was using this method for my entity repository</p>\n<pre><code>void deleteAllByCompanyBranch_Id(Long companyBranchId);\n</code></pre>\n<p>And the result was a little bit weird, Hibernate generated DELETE query for each entity, instead of doing it only once and I can't understand why. Here is Hibernate's log</p>\n<pre><code>Hibernate: \n    delete \n    from\n        department \n    where\n        id=?\nHibernate: \n    delete \n    from\n        department \n    where\n        id=?\nHibernate: \n    delete \n    from\n        department \n    where\n        id=?\nHibernate: \n    delete \n    from\n        department \n    where\n        id=?\n</code></pre>\n<p>As you can see Hibernate generates four delete queries for each row related to company branch.</p>\n<p>If I am using a custom query like this</p>\n<pre><code>@Modifying\n@Query(value = &quot;DELETE Department d WHERE d.companyBranch.id = :companyBranchId&quot;)\nvoid deleteAllByCompanyBranch_Id(Long companyBranchId);\n</code></pre>\n<p>Hibernate generates only one query</p>\n<pre><code>Hibernate: \n    delete \n    from\n        department \n    where\n        company_branch_id=?\n</code></pre>\n<p>Why can't hibernate do the same for <code>deleteAllBy...</code> method from Spring Data JPA? What's the point of this query method if it can not delete all entities with one query? When should I use it and when should I not?</p>\n"},{"tags":["java","swing","vlc"],"answers":[{"tags":[],"owner":{"account_id":468855,"reputation":5925,"user_id":875083,"display_name":"Joachim Rohde"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701088097,"creation_date":1701088097,"answer_id":77556901,"question_id":77541885,"body_markdown":"This is a bug. One of the main developers mentioned in the [VLC forum][1] that you cannot do anything about it (except a massive refactoring of VLC itself)\r\n\r\n\r\n  [1]: https://forum.videolan.org/viewtopic.php?f=14&amp;t=163540&amp;p=540959&amp;hilit=black%20screen#p540959","title":"VLC When the video list is played, a black screen remains for 1s","body":"<p>This is a bug. One of the main developers mentioned in the <a href=\"https://forum.videolan.org/viewtopic.php?f=14&amp;t=163540&amp;p=540959&amp;hilit=black%20screen#p540959\" rel=\"nofollow noreferrer\">VLC forum</a> that you cannot do anything about it (except a massive refactoring of VLC itself)</p>\n"}],"owner":{"account_id":29418799,"reputation":1,"user_id":22540963,"display_name":"Curtain Hello"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":62,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1701088097,"creation_date":1700816544,"question_id":77541885,"body_markdown":"When recirculating a playlist video, there will be a black screen for about 1 second each time a video is played while switching to the next video\r\n\r\nversion\r\nvlcj: 3.8.0\r\njava: 1.8.0_131 Oracle Corporation\r\nvlc: 3.0.8 Vetinari, changeset 3.0.8-0-gf350b6b5a7\r\n\r\n\r\n    mediaPlayerComponent.getMediaPlayer().addMediaPlayerEventListener(new MediaPlayerEventAdapter() {\r\n            @Override\r\n            public void finished(MediaPlayer mediaPlayer) {\r\n                 // loop play\r\n                if (LIST_PROGRAM_PLAY_LOOP.equals(playMode)) {\r\n                    if (mrlList.size() == 1) {\r\n                        mediaPlayer.setRepeat(true);\r\n                    } else {\r\n                        if (++playIndex &gt;= mrlList.size()) {\r\n                            playIndex = 0;\r\n                        }\r\n                        mediaPlayer.prepareMedia(mrlList.get(playIndex));\r\n                        playingMrl = mrlList.get(playIndex);\r\n                        mediaPlayer.play();\r\n                    }\r\n\r\n                }\r\n            }\r\n    }\r\n\r\n\r\n\r\nOn a computer with a core display, the problem will be more prominent, is there any way I can optimize it","title":"VLC When the video list is played, a black screen remains for 1s","body":"<p>When recirculating a playlist video, there will be a black screen for about 1 second each time a video is played while switching to the next video</p>\n<p>version\nvlcj: 3.8.0\njava: 1.8.0_131 Oracle Corporation\nvlc: 3.0.8 Vetinari, changeset 3.0.8-0-gf350b6b5a7</p>\n<pre><code>mediaPlayerComponent.getMediaPlayer().addMediaPlayerEventListener(new MediaPlayerEventAdapter() {\n        @Override\n        public void finished(MediaPlayer mediaPlayer) {\n             // loop play\n            if (LIST_PROGRAM_PLAY_LOOP.equals(playMode)) {\n                if (mrlList.size() == 1) {\n                    mediaPlayer.setRepeat(true);\n                } else {\n                    if (++playIndex &gt;= mrlList.size()) {\n                        playIndex = 0;\n                    }\n                    mediaPlayer.prepareMedia(mrlList.get(playIndex));\n                    playingMrl = mrlList.get(playIndex);\n                    mediaPlayer.play();\n                }\n\n            }\n        }\n}\n</code></pre>\n<p>On a computer with a core display, the problem will be more prominent, is there any way I can optimize it</p>\n"},{"tags":["java","spring-boot","hibernate","spring-data-jpa"],"comments":[{"owner":{"account_id":164042,"reputation":669,"user_id":386564,"accept_rate":20,"display_name":"Thirdman"},"score":0,"creation_date":1700813834,"post_id":77541229,"comment_id":136701542,"body_markdown":"It looks like this is a bug in spring-boot 3.2 =&gt; \nhttps://github.com/spring-projects/spring-data-jpa/issues/3239 and will be fixed soon. \nThe bug is already closed.\nHibernate 6.3 had the bug and spring did not support 6.4 where it was fixed. So the delivery of the above issue will hopefully fix my problem.","body":"It looks like this is a bug in spring-boot 3.2 =&gt;  <a href=\"https://github.com/spring-projects/spring-data-jpa/issues/3239\" rel=\"nofollow noreferrer\">github.com/spring-projects/spring-data-jpa/issues/3239</a> and will be fixed soon.  The bug is already closed. Hibernate 6.3 had the bug and spring did not support 6.4 where it was fixed. So the delivery of the above issue will hopefully fix my problem."}],"answers":[{"tags":[],"owner":{"account_id":164042,"reputation":669,"user_id":386564,"accept_rate":20,"display_name":"Thirdman"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1701087395,"creation_date":1701087395,"answer_id":77556825,"question_id":77541229,"body_markdown":"We found the problem.\r\nWe are using an abstract super class for all Entities. In this class we use generics for the ID class (with `Entity` being an interface with `T getId();` method:\r\n\r\n    public abstract class AbstractEntity&lt;T&gt; implements Entity&lt;T&gt; {\r\n    @Id\r\n    private T id;\r\n\r\nThis worked until Spring Boot Data 3.1.5.\r\n\r\nFrom 3.2.0 on the `T` class must not be a generic type. **In our case it must `extend Long`** in order to work, since we use a `Long` for all ids... :\r\n\r\n    public abstract class AbstractEntity&lt;T extends Long&gt; implements Entity&lt;T&gt; {\r\n    @Id\r\n    private T id;\r\n\r\nThe generic was introduced with composite Id-classes in mind.\r\n\r\nWe will change the code and use `Long` directly, since we never use composite ids in this project.\r\n\r\nThat was all. Not a spring boot / spring data jpa bug or the like.\r\n\r\nHope this helps somebody else.","title":"Validation failed for query for method upgrading from Spring Boot 3.1.5 to 3.2.0","body":"<p>We found the problem.\nWe are using an abstract super class for all Entities. In this class we use generics for the ID class (with <code>Entity</code> being an interface with <code>T getId();</code> method:</p>\n<pre><code>public abstract class AbstractEntity&lt;T&gt; implements Entity&lt;T&gt; {\n@Id\nprivate T id;\n</code></pre>\n<p>This worked until Spring Boot Data 3.1.5.</p>\n<p>From 3.2.0 on the <code>T</code> class must not be a generic type. <strong>In our case it must <code>extend Long</code></strong> in order to work, since we use a <code>Long</code> for all ids... :</p>\n<pre><code>public abstract class AbstractEntity&lt;T extends Long&gt; implements Entity&lt;T&gt; {\n@Id\nprivate T id;\n</code></pre>\n<p>The generic was introduced with composite Id-classes in mind.</p>\n<p>We will change the code and use <code>Long</code> directly, since we never use composite ids in this project.</p>\n<p>That was all. Not a spring boot / spring data jpa bug or the like.</p>\n<p>Hope this helps somebody else.</p>\n"}],"owner":{"account_id":164042,"reputation":669,"user_id":386564,"accept_rate":20,"display_name":"Thirdman"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":335,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":77556825,"answer_count":1,"score":1,"last_activity_date":1701087395,"creation_date":1700809119,"question_id":77541229,"body_markdown":"I upgraded from Spring Boot (Data) 3.1.5 to 3.2.0.\r\n\r\nSeveral of my queries in the Repositories throw exceptions now on application start in the validation phase:\r\n\r\n`Caused by: Cannot compare left expression of type &#39;java.lang.Object&#39; with right expression of type &#39;java.lang.Long&#39;.`\r\n\r\n\r\n\r\nE.g.:\r\n\r\n            @Query(value = &quot;SELECT new com.my.service.crud.ReferencedObject(p.id, p.name, r.name) FROM MyEntityA p join MyEntityB r on (p.aId = r.id) WHERE &quot; +\r\n                           &quot; p.aId = :projectId and exists (select id from EntityC where cId = p.id and dTypeId = :uutId)&quot;)\r\n            List&lt;ReferencedObject&gt; findReferencesToUtilType(@Param(&quot;projectId&quot;) Long projectId, @Param(&quot;uutId&quot;) Long utilTypeId);\r\n\r\nThis (anonymized) Code worked fine with 3.1.5 and returned a list of ReferencedObjects.\r\nI even get errors on finders that return `Optional&lt;Entity&gt;` and e.g. `findByIdAndOtherAttr(...)`.\r\n\r\n\r\n\r\nThe underlying cause is\r\n\r\n    Caused by: org.hibernate.query.SemanticException: Cannot compare left expression of type &#39;java.lang.Long&#39; with right expression of type &#39;java.lang.Object&#39;\r\n\r\n\tat org.hibernate.query.sqm.internal.TypecheckUtil.assertComparable(TypecheckUtil.java:338)\r\n\tat org.hibernate.query.sqm.tree.predicate.SqmComparisonPredicate.&lt;init&gt;(SqmComparisonPredicate.java:48)\r\n\tat org.hibernate.query.sqm.tree.predicate.SqmComparisonPredicate.&lt;init&gt;(SqmComparisonPredicate.java:34)\r\n\tat org.hibernate.query.hql.internal.SemanticQueryBuilder.createComparisonPredicate(SemanticQueryBuilder.java:2447)\r\n\tat org.hibernate.query.hql.internal.SemanticQueryBuilder.visitComparisonPredicate(SemanticQueryBuilder.java:2391)\r\n\tat org.hibernate.query.hql.internal.SemanticQueryBuilder.visitComparisonPredicate(SemanticQueryBuilder.java:268)\r\n\tat org.hibernate.grammars.hql.HqlParser$ComparisonPredicateContext.accept(HqlParser.java:6071)\r\n\tat org.hibernate.query.hql.internal.SemanticQueryBuilder.visitGroupedPredicate(SemanticQueryBuilder.java:2251)\r\n\tat org.hibernate.query.hql.internal.SemanticQueryBuilder.visitGroupedPredicate(SemanticQueryBuilder.java:268)\r\n\tat org.hibernate.grammars.hql.HqlParser$GroupedPredicateContext.accept(HqlParser.java:5994)\r\n\tat org.hibernate.query.hql.internal.SemanticQueryBuilder.consumeJoin(SemanticQueryBuilder.java:2129)\r\n\tat org.hibernate.query.hql.internal.SemanticQueryBuilder.visitEntityWithJoins(SemanticQueryBuilder.java:1921)\r\n\tat org.hibernate.query.hql.internal.SemanticQueryBuilder.visitFromClause(SemanticQueryBuilder.java:1900)\r\n\tat org.hibernate.query.hql.internal.SemanticQueryBuilder.visitQuery(SemanticQueryBuilder.java:1147)\r\n\tat org.hibernate.query.hql.internal.SemanticQueryBuilder.visitQuerySpecExpression(SemanticQueryBuilder.java:940)\r\n\tat org.hibernate.query.hql.internal.SemanticQueryBuilder.visitQuerySpecExpression(SemanticQueryBuilder.java:268)\r\n\tat org.hibernate.grammars.hql.HqlParser$QuerySpecExpressionContext.accept(HqlParser.java:1844)\r\n\tat org.hibernate.query.hql.internal.SemanticQueryBuilder.visitSimpleQueryGroup(SemanticQueryBuilder.java:925)\r\n\tat org.hibernate.query.hql.internal.SemanticQueryBuilder.visitSimpleQueryGroup(SemanticQueryBuilder.java:268)\r\n\tat org.hibernate.grammars.hql.HqlParser$SimpleQueryGroupContext.accept(HqlParser.java:1718)\r\n\tat org.hibernate.query.hql.internal.SemanticQueryBuilder.visitSelectStatement(SemanticQueryBuilder.java:442)\r\n\tat org.hibernate.query.hql.internal.SemanticQueryBuilder.visitStatement(SemanticQueryBuilder.java:401)\r\n\tat org.hibernate.query.hql.internal.SemanticQueryBuilder.buildSemanticModel(SemanticQueryBuilder.java:310)\r\n\tat org.hibernate.query.hql.internal.StandardHqlTranslator.translate(StandardHqlTranslator.java:71)\r\n\tat org.hibernate.query.internal.QueryInterpretationCacheStandardImpl.createHqlInterpretation(QueryInterpretationCacheStandardImpl.java:165)\r\n\tat org.hibernate.query.internal.QueryInterpretationCacheStandardImpl.resolveHqlInterpretation(QueryInterpretationCacheStandardImpl.java:147)\r\n\tat org.hibernate.internal.AbstractSharedSessionContract.interpretHql(AbstractSharedSessionContract.java:744)\r\n\tat org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:794)\r\n\t... 43 common frames omitted\r\n\r\n\r\nI found this https://discourse.hibernate.org/t/upgrade-to-6-3-rc1-cannot-compare-left-expression-of-type-java-sql-timestamp-with-right-expression-of-type-com-model-entity-impl-user/8034/5\r\nwhere the Hibernate Team member said, that one is comparing apples with oranges...\r\n\r\nDoes anyone have a link to a migration guide?\r\n\r\nWhat do I have to do to get my queries working again?\r\n\r\nIn the release notes of Spring Boot 3.2.0 I only found a hint that &quot;deprecated features have been dereleased now&quot;.\r\n\r\nThanks for any hint!","title":"Validation failed for query for method upgrading from Spring Boot 3.1.5 to 3.2.0","body":"<p>I upgraded from Spring Boot (Data) 3.1.5 to 3.2.0.</p>\n<p>Several of my queries in the Repositories throw exceptions now on application start in the validation phase:</p>\n<p><code>Caused by: Cannot compare left expression of type 'java.lang.Object' with right expression of type 'java.lang.Long'.</code></p>\n<p>E.g.:</p>\n<pre><code>        @Query(value = &quot;SELECT new com.my.service.crud.ReferencedObject(p.id, p.name, r.name) FROM MyEntityA p join MyEntityB r on (p.aId = r.id) WHERE &quot; +\n                       &quot; p.aId = :projectId and exists (select id from EntityC where cId = p.id and dTypeId = :uutId)&quot;)\n        List&lt;ReferencedObject&gt; findReferencesToUtilType(@Param(&quot;projectId&quot;) Long projectId, @Param(&quot;uutId&quot;) Long utilTypeId);\n</code></pre>\n<p>This (anonymized) Code worked fine with 3.1.5 and returned a list of ReferencedObjects.\nI even get errors on finders that return <code>Optional&lt;Entity&gt;</code> and e.g. <code>findByIdAndOtherAttr(...)</code>.</p>\n<p>The underlying cause is</p>\n<pre><code>Caused by: org.hibernate.query.SemanticException: Cannot compare left expression of type 'java.lang.Long' with right expression of type 'java.lang.Object'\n\nat org.hibernate.query.sqm.internal.TypecheckUtil.assertComparable(TypecheckUtil.java:338)\nat org.hibernate.query.sqm.tree.predicate.SqmComparisonPredicate.&lt;init&gt;(SqmComparisonPredicate.java:48)\nat org.hibernate.query.sqm.tree.predicate.SqmComparisonPredicate.&lt;init&gt;(SqmComparisonPredicate.java:34)\nat org.hibernate.query.hql.internal.SemanticQueryBuilder.createComparisonPredicate(SemanticQueryBuilder.java:2447)\nat org.hibernate.query.hql.internal.SemanticQueryBuilder.visitComparisonPredicate(SemanticQueryBuilder.java:2391)\nat org.hibernate.query.hql.internal.SemanticQueryBuilder.visitComparisonPredicate(SemanticQueryBuilder.java:268)\nat org.hibernate.grammars.hql.HqlParser$ComparisonPredicateContext.accept(HqlParser.java:6071)\nat org.hibernate.query.hql.internal.SemanticQueryBuilder.visitGroupedPredicate(SemanticQueryBuilder.java:2251)\nat org.hibernate.query.hql.internal.SemanticQueryBuilder.visitGroupedPredicate(SemanticQueryBuilder.java:268)\nat org.hibernate.grammars.hql.HqlParser$GroupedPredicateContext.accept(HqlParser.java:5994)\nat org.hibernate.query.hql.internal.SemanticQueryBuilder.consumeJoin(SemanticQueryBuilder.java:2129)\nat org.hibernate.query.hql.internal.SemanticQueryBuilder.visitEntityWithJoins(SemanticQueryBuilder.java:1921)\nat org.hibernate.query.hql.internal.SemanticQueryBuilder.visitFromClause(SemanticQueryBuilder.java:1900)\nat org.hibernate.query.hql.internal.SemanticQueryBuilder.visitQuery(SemanticQueryBuilder.java:1147)\nat org.hibernate.query.hql.internal.SemanticQueryBuilder.visitQuerySpecExpression(SemanticQueryBuilder.java:940)\nat org.hibernate.query.hql.internal.SemanticQueryBuilder.visitQuerySpecExpression(SemanticQueryBuilder.java:268)\nat org.hibernate.grammars.hql.HqlParser$QuerySpecExpressionContext.accept(HqlParser.java:1844)\nat org.hibernate.query.hql.internal.SemanticQueryBuilder.visitSimpleQueryGroup(SemanticQueryBuilder.java:925)\nat org.hibernate.query.hql.internal.SemanticQueryBuilder.visitSimpleQueryGroup(SemanticQueryBuilder.java:268)\nat org.hibernate.grammars.hql.HqlParser$SimpleQueryGroupContext.accept(HqlParser.java:1718)\nat org.hibernate.query.hql.internal.SemanticQueryBuilder.visitSelectStatement(SemanticQueryBuilder.java:442)\nat org.hibernate.query.hql.internal.SemanticQueryBuilder.visitStatement(SemanticQueryBuilder.java:401)\nat org.hibernate.query.hql.internal.SemanticQueryBuilder.buildSemanticModel(SemanticQueryBuilder.java:310)\nat org.hibernate.query.hql.internal.StandardHqlTranslator.translate(StandardHqlTranslator.java:71)\nat org.hibernate.query.internal.QueryInterpretationCacheStandardImpl.createHqlInterpretation(QueryInterpretationCacheStandardImpl.java:165)\nat org.hibernate.query.internal.QueryInterpretationCacheStandardImpl.resolveHqlInterpretation(QueryInterpretationCacheStandardImpl.java:147)\nat org.hibernate.internal.AbstractSharedSessionContract.interpretHql(AbstractSharedSessionContract.java:744)\nat org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:794)\n... 43 common frames omitted\n</code></pre>\n<p>I found this <a href=\"https://discourse.hibernate.org/t/upgrade-to-6-3-rc1-cannot-compare-left-expression-of-type-java-sql-timestamp-with-right-expression-of-type-com-model-entity-impl-user/8034/5\" rel=\"nofollow noreferrer\">https://discourse.hibernate.org/t/upgrade-to-6-3-rc1-cannot-compare-left-expression-of-type-java-sql-timestamp-with-right-expression-of-type-com-model-entity-impl-user/8034/5</a>\nwhere the Hibernate Team member said, that one is comparing apples with oranges...</p>\n<p>Does anyone have a link to a migration guide?</p>\n<p>What do I have to do to get my queries working again?</p>\n<p>In the release notes of Spring Boot 3.2.0 I only found a hint that &quot;deprecated features have been dereleased now&quot;.</p>\n<p>Thanks for any hint!</p>\n"},{"tags":["java","encryption","cryptography","openssl"],"comments":[{"owner":{"account_id":360576,"reputation":60355,"user_id":702638,"accept_rate":98,"display_name":"Hunter McMillen"},"score":0,"creation_date":1395667911,"post_id":22610761,"comment_id":34428312,"body_markdown":"There may be some unprintable ascii characters in your file? Try using the `-base64` option.","body":"There may be some unprintable ascii characters in your file? Try using the <code>-base64</code> option."},{"owner":{"account_id":259073,"reputation":8102,"user_id":541688,"display_name":"Oleg Estekhin"},"score":0,"creation_date":1395668911,"post_id":22610761,"comment_id":34428998,"body_markdown":"Seems like duplicate of http://stackoverflow.com/questions/19161716/bad-magic-number-error-when-trying-to-decrypt-file-in-openssl","body":"Seems like duplicate of <a href=\"http://stackoverflow.com/questions/19161716/bad-magic-number-error-when-trying-to-decrypt-file-in-openssl\" title=\"bad magic number error when trying to decrypt file in openssl\">stackoverflow.com/questions/19161716/&hellip;</a>"},{"owner":{"account_id":218057,"reputation":67728,"user_id":474189,"accept_rate":72,"display_name":"Duncan Jones"},"score":0,"creation_date":1395672196,"post_id":22610761,"comment_id":34431393,"body_markdown":"Side comment: if you want ECB mode, then specify it. Change `&quot;AES&quot;` to `&quot;AES/ECB/&lt;padding&gt;&quot;` to avoid ambiguity. (Where `&lt;padding&gt;` is your preferred padding scheme). Relying on defaults is an unwise thing to do.","body":"Side comment: if you want ECB mode, then specify it. Change <code>&quot;AES&quot;</code> to <code>&quot;AES&#47;ECB&#47;&lt;padding&gt;&quot;</code> to avoid ambiguity. (Where <code>&lt;padding&gt;</code> is your preferred padding scheme). Relying on defaults is an unwise thing to do."},{"owner":{"account_id":301110,"reputation":98844,"user_id":608639,"accept_rate":64,"display_name":"jww"},"score":1,"creation_date":1395688207,"post_id":22610761,"comment_id":34442371,"body_markdown":"possible duplicate of [AES encrypt with openssl decrypt using java](http://stackoverflow.com/questions/14486814/aes-encrypt-with-openssl-decrypt-using-java)","body":"possible duplicate of <a href=\"http://stackoverflow.com/questions/14486814/aes-encrypt-with-openssl-decrypt-using-java\">AES encrypt with openssl decrypt using java</a>"}],"answers":[{"tags":[],"owner":{"account_id":288696,"reputation":91230,"user_id":589259,"accept_rate":82,"display_name":"Maarten Bodewes"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1395682221,"creation_date":1395682221,"answer_id":22616478,"question_id":22610761,"body_markdown":"The problem is with the key. The `-k` argument expects a passphrase, not a file. In turn, when a passphrase is used by the openssl encryption routine, a magic and salt is put in front of the encrypted result. That&#39;s the magic that cannot be found.\r\n\r\nTo use the openssl command line, print out the key in hex and use the `-K` option instead of the lowercase `-k` option.\r\n\r\nYou could also use:\r\n\r\n    `cat aes.key`\r\n\r\nas argument after `-K`, given that aes.key contains the key in hexadecimals.\r\n","title":"AES - simple encrypt in Java, decrypt with openssl","body":"<p>The problem is with the key. The <code>-k</code> argument expects a passphrase, not a file. In turn, when a passphrase is used by the openssl encryption routine, a magic and salt is put in front of the encrypted result. That's the magic that cannot be found.</p>\n\n<p>To use the openssl command line, print out the key in hex and use the <code>-K</code> option instead of the lowercase <code>-k</code> option.</p>\n\n<p>You could also use:</p>\n\n<pre><code>`cat aes.key`\n</code></pre>\n\n<p>as argument after <code>-K</code>, given that aes.key contains the key in hexadecimals.</p>\n"},{"tags":[],"owner":{"account_id":2316085,"reputation":9998,"user_id":2873507,"accept_rate":70,"display_name":"Vic Seedoubleyew"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1556401391,"creation_date":1556396457,"answer_id":55884564,"question_id":22610761,"body_markdown":"The problem is indeed due to the key that is computed from the password by OpenSSL.\r\n\r\nMost likely the reason is that OpenSSL has its own algorithm to derive a key, [EVP_BytesToKey][1], from the password, and that is not the same as Java&#39;s.\r\n\r\nThe only solution I found was to use a Java reimplementation of that algorithm:\r\n\r\n    private static final int KEY_LENGTH = 32;    \r\n\r\n    private byte[] deriveKey(String encryptionPassword, byte[] salt) throws NoSuchAlgorithmException {\r\n        final byte[] passAndSalt = ArrayUtils.addAll(encryptionPassword.getBytes(), salt);\r\n        byte[] hash = new byte[0];\r\n        byte[] keyAndIv = new byte[0];\r\n        for (int i = 0; i &lt; 3 &amp;&amp; keyAndIv.length &lt; KEY_LENGTH; i++) {\r\n            final byte[] dataToHash = ArrayUtils.addAll(hash, passAndSalt);\r\n            final MessageDigest md = MessageDigest.getInstance(&quot;SHA-256&quot;);\r\n            hash = md.digest(dataToHash);\r\n            keyAndIv = ArrayUtils.addAll(keyAndIv, hash);\r\n        }\r\n        return Arrays.copyOfRange(keyAndIv, 0, KEY_LENGTH);\r\n    }\r\n\r\n`ArrayUtils` is part of Apache Commons library.\r\n\r\nFull usage:\r\n\r\n    IvParameterSpec initializationVectorSpec = new IvParameterSpec(\r\n                    Hex.decodeHex(encryptionInitializationVector.toCharArray()));\r\n\r\n    cipher = Cipher.getInstance(&quot;AES/CBC/PKCS5Padding&quot;);\r\n    byte[] salt = new SecureRandom().generateSeed(8);\r\n    byte[] key = deriveKey(encryptionPassword, salt);\r\n    Key keySpec = new SecretKeySpec(key, &quot;AES&quot;);\r\n    cipher.init(Cipher.ENCRYPT_MODE, keySpec, initializationVectorSpec);\r\n\r\n    byte[] rawEncryptedInput = cipher.doFinal(input.getBytes());\r\n    byte[] encryptedInputWithPrependedSalt = ArrayUtils.addAll(ArrayUtils.addAll(\r\n                    &quot;Salted__&quot;.getBytes(), salt), rawEncryptedInput);\r\n    return Base64.getEncoder()\r\n                    .encodeToString(encryptedInputWithPrependedSalt);\r\n\r\nCredit to [this answer][1] for showing me the way.\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/41495143/2873507","title":"AES - simple encrypt in Java, decrypt with openssl","body":"<p>The problem is indeed due to the key that is computed from the password by OpenSSL.</p>\n\n<p>Most likely the reason is that OpenSSL has its own algorithm to derive a key, <a href=\"https://stackoverflow.com/a/41495143/2873507\">EVP_BytesToKey</a>, from the password, and that is not the same as Java's.</p>\n\n<p>The only solution I found was to use a Java reimplementation of that algorithm:</p>\n\n<pre><code>private static final int KEY_LENGTH = 32;    \n\nprivate byte[] deriveKey(String encryptionPassword, byte[] salt) throws NoSuchAlgorithmException {\n    final byte[] passAndSalt = ArrayUtils.addAll(encryptionPassword.getBytes(), salt);\n    byte[] hash = new byte[0];\n    byte[] keyAndIv = new byte[0];\n    for (int i = 0; i &lt; 3 &amp;&amp; keyAndIv.length &lt; KEY_LENGTH; i++) {\n        final byte[] dataToHash = ArrayUtils.addAll(hash, passAndSalt);\n        final MessageDigest md = MessageDigest.getInstance(\"SHA-256\");\n        hash = md.digest(dataToHash);\n        keyAndIv = ArrayUtils.addAll(keyAndIv, hash);\n    }\n    return Arrays.copyOfRange(keyAndIv, 0, KEY_LENGTH);\n}\n</code></pre>\n\n<p><code>ArrayUtils</code> is part of Apache Commons library.</p>\n\n<p>Full usage:</p>\n\n<pre><code>IvParameterSpec initializationVectorSpec = new IvParameterSpec(\n                Hex.decodeHex(encryptionInitializationVector.toCharArray()));\n\ncipher = Cipher.getInstance(\"AES/CBC/PKCS5Padding\");\nbyte[] salt = new SecureRandom().generateSeed(8);\nbyte[] key = deriveKey(encryptionPassword, salt);\nKey keySpec = new SecretKeySpec(key, \"AES\");\ncipher.init(Cipher.ENCRYPT_MODE, keySpec, initializationVectorSpec);\n\nbyte[] rawEncryptedInput = cipher.doFinal(input.getBytes());\nbyte[] encryptedInputWithPrependedSalt = ArrayUtils.addAll(ArrayUtils.addAll(\n                \"Salted__\".getBytes(), salt), rawEncryptedInput);\nreturn Base64.getEncoder()\n                .encodeToString(encryptedInputWithPrependedSalt);\n</code></pre>\n\n<p>Credit to <a href=\"https://stackoverflow.com/a/41495143/2873507\">this answer</a> for showing me the way.</p>\n"},{"tags":[],"owner":{"account_id":6579605,"reputation":81,"user_id":5084271,"display_name":"SebastianM"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701087331,"creation_date":1701087331,"answer_id":77556814,"question_id":22610761,"body_markdown":"I was struggling with the same issue for a few days. My task was to encode file using AES/CBC/PKCS5PADDING and given password phrase in java so that it should be decodeable with command like follow:\r\n\r\n&gt; .\\openssl.exe enc -d -aes-256-cbc -in &quot;test_enc.txt&quot; -out &quot;test_dec.txt&quot; -iter 1000000\r\n\r\nWhen I encoded the file using simple code (like this https://www.baeldung.com/java-cipher-input-output-stream) I kept getting &#39;bad magic number&#39; or &#39;bad decrypt&#39; after some modifications.\r\nFinally, basing on openssl code (https://github.com/openssl/openssl/blob/master/apps/enc.c) I&#39;ve managed to write code that works. Below is the result:\r\n\r\n    import lombok.SneakyThrows;\r\n\r\n    import javax.crypto.Cipher;\r\n    import javax.crypto.CipherOutputStream;\r\n    import javax.crypto.SecretKey;\r\n    import javax.crypto.SecretKeyFactory;\r\n    import javax.crypto.spec.IvParameterSpec;\r\n    import javax.crypto.spec.PBEKeySpec;\r\n    import javax.crypto.spec.SecretKeySpec;\r\n    import java.io.OutputStream;\r\n    import java.security.SecureRandom;\r\n    import java.security.spec.KeySpec;\r\n    import java.util.Arrays;\r\n    \r\n    import static java.nio.charset.StandardCharsets.US_ASCII;\r\n    \r\n    public class EncryptionUtil {\r\n    \r\n        private static final int KEY_LENGTH = 32;\r\n        private static final int IV_LENGTH = 16;\r\n    \r\n        /** OpenSSL&#39;s magic initial bytes. */\r\n        private static final String SALTED_STR = &quot;Salted__&quot;;\r\n        private static final byte[] SALTED_MAGIC = SALTED_STR.getBytes(US_ASCII);\r\n    \r\n        @SneakyThrows\r\n        public static OutputStream encodeOutputStream(OutputStream outputStream, String password) {\r\n            Cipher cipher = Cipher.getInstance(&quot;AES/CBC/PKCS5PADDING&quot;);\r\n    \r\n            byte[] salt = new SecureRandom().generateSeed(8);\r\n            SecretKeyFactory factory = SecretKeyFactory.getInstance(&quot;PBKDF2WithHmacSHA256&quot;);\r\n            KeySpec spec = new PBEKeySpec(password.toCharArray(), salt, 1000000, (KEY_LENGTH + IV_LENGTH)*8);\r\n            byte[] encodedKey = factory.generateSecret(spec).getEncoded();\r\n            SecretKey secretKey = new SecretKeySpec(Arrays.copyOfRange(encodedKey, 0, KEY_LENGTH), &quot;AES&quot;);\r\n            IvParameterSpec iv = new IvParameterSpec(Arrays.copyOfRange(encodedKey, KEY_LENGTH, encodedKey.length));\r\n\r\n            outputStream.write(SALTED_MAGIC);\r\n            outputStream.write(salt);\r\n\r\n            cipher.init(Cipher.ENCRYPT_MODE, secretKey, iv);\r\n\r\n            return new CipherOutputStream(outputStream, cipher);\r\n        }\r\n    }\r\n\r\nAbove code we can simply use for example like this:\r\n\r\n    try (InputStream in = new FileInputStream(inFilePath);\r\n         OutputStream encryptedOutputStream = EncryptionUtil.encodeOutputStream(new FileOutputStream(encFilePath), &quot;password&quot;)) {\r\n         IOUtils.copy(in, encryptedOutputStream);\r\n    }\r\n\r\nApart from source openssl code, it is also inspired with code presented in another topic: https://stackoverflow.com/a/41495143 but I suppose there is EVP_BytesToKey method (https://www.openssl.org/docs/man3.1/man3/EVP_BytesToKey.html) used (like in @Vic&#39;s answer) and I required PBKDF2 (https://www.openssl.org/docs/man3.0/man7/EVP_KDF-PBKDF2.html).","title":"AES - simple encrypt in Java, decrypt with openssl","body":"<p>I was struggling with the same issue for a few days. My task was to encode file using AES/CBC/PKCS5PADDING and given password phrase in java so that it should be decodeable with command like follow:</p>\n<blockquote>\n<p>.\\openssl.exe enc -d -aes-256-cbc -in &quot;test_enc.txt&quot; -out &quot;test_dec.txt&quot; -iter 1000000</p>\n</blockquote>\n<p>When I encoded the file using simple code (like this <a href=\"https://www.baeldung.com/java-cipher-input-output-stream\" rel=\"nofollow noreferrer\">https://www.baeldung.com/java-cipher-input-output-stream</a>) I kept getting 'bad magic number' or 'bad decrypt' after some modifications.\nFinally, basing on openssl code (<a href=\"https://github.com/openssl/openssl/blob/master/apps/enc.c\" rel=\"nofollow noreferrer\">https://github.com/openssl/openssl/blob/master/apps/enc.c</a>) I've managed to write code that works. Below is the result:</p>\n<pre><code>import lombok.SneakyThrows;\n\nimport javax.crypto.Cipher;\nimport javax.crypto.CipherOutputStream;\nimport javax.crypto.SecretKey;\nimport javax.crypto.SecretKeyFactory;\nimport javax.crypto.spec.IvParameterSpec;\nimport javax.crypto.spec.PBEKeySpec;\nimport javax.crypto.spec.SecretKeySpec;\nimport java.io.OutputStream;\nimport java.security.SecureRandom;\nimport java.security.spec.KeySpec;\nimport java.util.Arrays;\n\nimport static java.nio.charset.StandardCharsets.US_ASCII;\n\npublic class EncryptionUtil {\n\n    private static final int KEY_LENGTH = 32;\n    private static final int IV_LENGTH = 16;\n\n    /** OpenSSL's magic initial bytes. */\n    private static final String SALTED_STR = &quot;Salted__&quot;;\n    private static final byte[] SALTED_MAGIC = SALTED_STR.getBytes(US_ASCII);\n\n    @SneakyThrows\n    public static OutputStream encodeOutputStream(OutputStream outputStream, String password) {\n        Cipher cipher = Cipher.getInstance(&quot;AES/CBC/PKCS5PADDING&quot;);\n\n        byte[] salt = new SecureRandom().generateSeed(8);\n        SecretKeyFactory factory = SecretKeyFactory.getInstance(&quot;PBKDF2WithHmacSHA256&quot;);\n        KeySpec spec = new PBEKeySpec(password.toCharArray(), salt, 1000000, (KEY_LENGTH + IV_LENGTH)*8);\n        byte[] encodedKey = factory.generateSecret(spec).getEncoded();\n        SecretKey secretKey = new SecretKeySpec(Arrays.copyOfRange(encodedKey, 0, KEY_LENGTH), &quot;AES&quot;);\n        IvParameterSpec iv = new IvParameterSpec(Arrays.copyOfRange(encodedKey, KEY_LENGTH, encodedKey.length));\n\n        outputStream.write(SALTED_MAGIC);\n        outputStream.write(salt);\n\n        cipher.init(Cipher.ENCRYPT_MODE, secretKey, iv);\n\n        return new CipherOutputStream(outputStream, cipher);\n    }\n}\n</code></pre>\n<p>Above code we can simply use for example like this:</p>\n<pre><code>try (InputStream in = new FileInputStream(inFilePath);\n     OutputStream encryptedOutputStream = EncryptionUtil.encodeOutputStream(new FileOutputStream(encFilePath), &quot;password&quot;)) {\n     IOUtils.copy(in, encryptedOutputStream);\n}\n</code></pre>\n<p>Apart from source openssl code, it is also inspired with code presented in another topic: <a href=\"https://stackoverflow.com/a/41495143\">https://stackoverflow.com/a/41495143</a> but I suppose there is EVP_BytesToKey method (<a href=\"https://www.openssl.org/docs/man3.1/man3/EVP_BytesToKey.html\" rel=\"nofollow noreferrer\">https://www.openssl.org/docs/man3.1/man3/EVP_BytesToKey.html</a>) used (like in @Vic's answer) and I required PBKDF2 (<a href=\"https://www.openssl.org/docs/man3.0/man7/EVP_KDF-PBKDF2.html\" rel=\"nofollow noreferrer\">https://www.openssl.org/docs/man3.0/man7/EVP_KDF-PBKDF2.html</a>).</p>\n"}],"owner":{"account_id":773917,"reputation":2085,"user_id":818316,"accept_rate":68,"display_name":"kabal"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9754,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":3,"score":5,"last_activity_date":1701087331,"creation_date":1395667552,"question_id":22610761,"body_markdown":"I am trying to do a simple AES encryption in Java, using Java Cryto, that can then be decrypted in ObjectiveC, using OpenSSL.\r\n\r\nas I am not doing the ObjectiveC side, I want to make sure it works, using the openSSL command line, but I always get &quot;bad magic number&quot;\r\n\r\nHere is my Java code\r\n\r\n    public class EncryptionUtils {\r\n\t\r\n\tprivate static final String AES_CIPHER_METHOD = &quot;AES&quot;;\r\n\tprivate static final int AES_KEY_SIZE = 128;\r\n\t\r\n\tpublic static byte[] generateAesKey() throws NoSuchAlgorithmException {\r\n\t\tKeyGenerator keyGenerator = KeyGenerator.getInstance(AES_CIPHER_METHOD);\r\n\t\tkeyGenerator.init(AES_KEY_SIZE);\r\n\t    SecretKey key = keyGenerator.generateKey();\r\n\t    return key.getEncoded();\r\n\t}\r\n\t\r\n\tpublic static SecretKeySpec createAesKeySpec(byte[] aesKey) {\r\n\t\treturn new SecretKeySpec(aesKey, AES_CIPHER_METHOD);\r\n\t}\r\n\t\r\n\tpublic static void aesEncryptFile(File in, File out, SecretKeySpec aesKeySpec) throws InvalidKeyException, NoSuchAlgorithmException, NoSuchPaddingException, IOException {\r\n\t\tCipher aesCipher = Cipher.getInstance(AES_CIPHER_METHOD);\r\n\t\taesCipher.init(Cipher.ENCRYPT_MODE, aesKeySpec);\r\n\t\tInputStream inputStream = new FileInputStream(in);\r\n\t\ttry {\r\n\t\t\tOutputStream outputStream = new CipherOutputStream(new FileOutputStream(out), aesCipher);\r\n\t\t\ttry {\r\n\t\t\t\tIOUtils.copy(inputStream , outputStream);\r\n\t\t\t} finally {\r\n\t\t\t\toutputStream.close();\r\n\t\t\t}\r\n\t\t} finally {\r\n\t\t\tinputStream.close();\r\n\t\t}\r\n\t}\r\n\t}\r\n\r\n\r\n    //testcode\r\n    @Test\r\n    public void testAesEncryptFile() throws IOException, InvalidKeyException, IllegalBlockSizeException, BadPaddingException, NoSuchAlgorithmException, NoSuchPaddingException {\r\n\t    byte[] aesKey = EncryptionUtils.generateAesKey();\r\n\t    SecretKeySpec aesKeySpec = EncryptionUtils.createAesKeySpec(aesKey);\r\n\t    EncryptionUtils.aesEncryptFile(new File(&quot;C:\\\\test\\\\test.txt&quot;), new File(&quot;C:\\\\test\\\\test-encrypted.txt&quot;), aesKeySpec);\r\n\t    \r\n\t    FileOutputStream outputStream = new FileOutputStream(&quot;C:\\\\test\\\\aes.key&quot;);\r\n        outputStream.write(aesKey);\r\n        outputStream.close();\r\n    }\r\n\t\r\n\t@Test\r\n    public void testAesDecryptFile() throws IOException, InvalidKeyException, IllegalBlockSizeException, BadPaddingException, NoSuchAlgorithmException, NoSuchPaddingException {\r\n\t    FileInputStream keyFis = new FileInputStream(&quot;C:\\\\test\\\\aes.key&quot;);\r\n        ByteArrayOutputStream keyBaos = new ByteArrayOutputStream();\r\n        IOUtils.copy(keyFis, keyBaos);\r\n        \r\n        SecretKeySpec keySpec = new SecretKeySpec(keyBaos.toByteArray(), &quot;AES&quot;);\r\n        Cipher cipher = Cipher.getInstance(&quot;AES&quot;);\r\n        cipher.init(Cipher.DECRYPT_MODE, keySpec);\r\n        \r\n        FileInputStream fileInputStream = new FileInputStream(&quot;C:\\\\test\\\\test-encrypted.txt&quot;);\r\n        ByteArrayOutputStream baos = new ByteArrayOutputStream();\r\n        IOUtils.copy(fileInputStream, baos);\r\n        \r\n        byte[] decrypted = cipher.doFinal(baos.toByteArray());\r\n        FileOutputStream outputStream = new FileOutputStream(&quot;C:\\\\test\\\\test-decrypted.txt&quot;);\r\n        outputStream.write(decrypted);\r\n        outputStream.close();\r\n        \r\n    }\r\n\r\n\r\nNow that runs as expected, file &quot;test-encrypted.txt&quot; is indeed encrypted, and &quot;test-decrypted.txt&quot; == &quot;test.txt&quot;\r\n\r\n\r\nI then tried to run a decryption on the command line using OpenSSL\r\n\r\n    openssl enc -d -aes-128-ecb -in test-encrypted.txt -k aes.key\r\n\r\nhowever, this always give me \r\n\r\n    bad magic number\r\n\r\nFrom what I can see, the using algorithm &quot;AES&quot; in Java uses &quot;ECB&quot; mode by default, so the above should work. What am I doing wrong.\r\n\r\n\r\n","title":"AES - simple encrypt in Java, decrypt with openssl","body":"<p>I am trying to do a simple AES encryption in Java, using Java Cryto, that can then be decrypted in ObjectiveC, using OpenSSL.</p>\n\n<p>as I am not doing the ObjectiveC side, I want to make sure it works, using the openSSL command line, but I always get \"bad magic number\"</p>\n\n<p>Here is my Java code</p>\n\n<pre><code>public class EncryptionUtils {\n\nprivate static final String AES_CIPHER_METHOD = \"AES\";\nprivate static final int AES_KEY_SIZE = 128;\n\npublic static byte[] generateAesKey() throws NoSuchAlgorithmException {\n    KeyGenerator keyGenerator = KeyGenerator.getInstance(AES_CIPHER_METHOD);\n    keyGenerator.init(AES_KEY_SIZE);\n    SecretKey key = keyGenerator.generateKey();\n    return key.getEncoded();\n}\n\npublic static SecretKeySpec createAesKeySpec(byte[] aesKey) {\n    return new SecretKeySpec(aesKey, AES_CIPHER_METHOD);\n}\n\npublic static void aesEncryptFile(File in, File out, SecretKeySpec aesKeySpec) throws InvalidKeyException, NoSuchAlgorithmException, NoSuchPaddingException, IOException {\n    Cipher aesCipher = Cipher.getInstance(AES_CIPHER_METHOD);\n    aesCipher.init(Cipher.ENCRYPT_MODE, aesKeySpec);\n    InputStream inputStream = new FileInputStream(in);\n    try {\n        OutputStream outputStream = new CipherOutputStream(new FileOutputStream(out), aesCipher);\n        try {\n            IOUtils.copy(inputStream , outputStream);\n        } finally {\n            outputStream.close();\n        }\n    } finally {\n        inputStream.close();\n    }\n}\n}\n\n\n//testcode\n@Test\npublic void testAesEncryptFile() throws IOException, InvalidKeyException, IllegalBlockSizeException, BadPaddingException, NoSuchAlgorithmException, NoSuchPaddingException {\n    byte[] aesKey = EncryptionUtils.generateAesKey();\n    SecretKeySpec aesKeySpec = EncryptionUtils.createAesKeySpec(aesKey);\n    EncryptionUtils.aesEncryptFile(new File(\"C:\\\\test\\\\test.txt\"), new File(\"C:\\\\test\\\\test-encrypted.txt\"), aesKeySpec);\n\n    FileOutputStream outputStream = new FileOutputStream(\"C:\\\\test\\\\aes.key\");\n    outputStream.write(aesKey);\n    outputStream.close();\n}\n\n@Test\npublic void testAesDecryptFile() throws IOException, InvalidKeyException, IllegalBlockSizeException, BadPaddingException, NoSuchAlgorithmException, NoSuchPaddingException {\n    FileInputStream keyFis = new FileInputStream(\"C:\\\\test\\\\aes.key\");\n    ByteArrayOutputStream keyBaos = new ByteArrayOutputStream();\n    IOUtils.copy(keyFis, keyBaos);\n\n    SecretKeySpec keySpec = new SecretKeySpec(keyBaos.toByteArray(), \"AES\");\n    Cipher cipher = Cipher.getInstance(\"AES\");\n    cipher.init(Cipher.DECRYPT_MODE, keySpec);\n\n    FileInputStream fileInputStream = new FileInputStream(\"C:\\\\test\\\\test-encrypted.txt\");\n    ByteArrayOutputStream baos = new ByteArrayOutputStream();\n    IOUtils.copy(fileInputStream, baos);\n\n    byte[] decrypted = cipher.doFinal(baos.toByteArray());\n    FileOutputStream outputStream = new FileOutputStream(\"C:\\\\test\\\\test-decrypted.txt\");\n    outputStream.write(decrypted);\n    outputStream.close();\n\n}\n</code></pre>\n\n<p>Now that runs as expected, file \"test-encrypted.txt\" is indeed encrypted, and \"test-decrypted.txt\" == \"test.txt\"</p>\n\n<p>I then tried to run a decryption on the command line using OpenSSL</p>\n\n<pre><code>openssl enc -d -aes-128-ecb -in test-encrypted.txt -k aes.key\n</code></pre>\n\n<p>however, this always give me </p>\n\n<pre><code>bad magic number\n</code></pre>\n\n<p>From what I can see, the using algorithm \"AES\" in Java uses \"ECB\" mode by default, so the above should work. What am I doing wrong.</p>\n"},{"tags":["java","spring","hibernate","spring-mvc"],"comments":[{"owner":{"account_id":2437979,"reputation":1980,"user_id":2127357,"accept_rate":90,"display_name":"CAPS LOCK"},"score":0,"creation_date":1461235796,"post_id":25514740,"comment_id":61112319,"body_markdown":"Was this ever resolved?","body":"Was this ever resolved?"}],"answers":[{"tags":[],"owner":{"account_id":1270321,"reputation":340,"user_id":1226773,"display_name":"birya"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1409086553,"creation_date":1409086553,"answer_id":25514991,"question_id":25514740,"body_markdown":"The proper way to get object by its id will be \r\n\r\n   \r\n\r\n       public Setting get(final String key) {\r\n          return (Setting)  sessionFactory.getCurrentSession().get(Setting.class, key);\r\n       }","title":"Method threw &#39;org.hibernate.LazyInitializationException&#39; exception","body":"<p>The proper way to get object by its id will be </p>\n\n<pre><code>   public Setting get(final String key) {\n      return (Setting)  sessionFactory.getCurrentSession().get(Setting.class, key);\n   }\n</code></pre>\n"}],"owner":{"account_id":1590801,"reputation":3115,"user_id":1474153,"accept_rate":35,"display_name":"Robertas Setkus"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":9991,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1701086690,"creation_date":1409085477,"question_id":25514740,"body_markdown":"I am getting `LazyInitializationException` while using `createQuery()`, `load()` or `get()` methods. Configuration is based on annotations.\r\n\r\nThis is exception which I am getting:\r\n\r\n    Method threw &#39;org.hibernate.LazyInitializationException&#39; exception. Cannot evaluate lt.package.to.Setting_$$_jvstfff_0.toString()\r\n\r\nSchema structure:\r\n\r\n    CREATE TABLE IF NOT EXISTS `Settings` (\r\n      `key` varchar(255) COLLATE utf8_lithuanian_ci NOT NULL,\r\n      `value` varchar(255) COLLATE utf8_lithuanian_ci DEFAULT NULL,\r\n      PRIMARY KEY (`key`)\r\n    ) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_lithuanian_ci;\r\n\r\nPersistenceConfig.java\r\n\r\n    @Configuration\r\n    @ComponentScan(basePackages= {&quot;lt.setkus.sandbox.persistence&quot;})\r\n    @EnableTransactionManagement\r\n    @PropertySource({&quot;/WEB-INF/properties/configuration.properties&quot;})\r\n    public class PersistenceConfig {\r\n    \r\n        @Autowired\r\n        private Environment environment;\r\n    \r\n        private Properties getHibernateProperties() {\r\n            Properties properties = new Properties();\r\n    \r\n            properties.setProperty(&quot;hibernate.hbm2ddl.auto&quot;, environment.getProperty(&quot;hibernate.hbm2ddl.auto&quot;));\r\n            properties.setProperty(&quot;hibernate.dialect&quot;, environment.getProperty(&quot;hibernate.dialect&quot;));\r\n            properties.setProperty(&quot;hibernate.globally_quoted_identifiers&quot;, &quot;true&quot;);\r\n    \r\n            return properties;\r\n        }\r\n    \r\n        @Bean\r\n        public LocalSessionFactoryBean provideSessionFactoryBean() {\r\n            LocalSessionFactoryBean localSessionFactoryBean = new LocalSessionFactoryBean();\r\n    \r\n            localSessionFactoryBean.setDataSource(getDataSource());\r\n            localSessionFactoryBean.setPackagesToScan(&quot;lt.setkus.sandbox.persistence.domain&quot;);\r\n            localSessionFactoryBean.setHibernateProperties(getHibernateProperties());\r\n    \r\n            return localSessionFactoryBean;\r\n        }\r\n    \t\r\n    \t@Bean\r\n    \tpublic DataSource getDataSource() {\r\n    \t\tDriverManagerDataSource dataSource = new DriverManagerDataSource();\r\n    \t\t\r\n    \t\tdataSource.setDriverClassName(environment.getProperty(&quot;jdbc.driver&quot;));\r\n    \t\tdataSource.setUrl(environment.getProperty(&quot;jdbc.url&quot;));\r\n    \t\tdataSource.setUsername(environment.getProperty(&quot;jdbc.user&quot;));\r\n    \t\tdataSource.setPassword(environment.getProperty(&quot;jdbc.password&quot;));\r\n    \t\t\r\n    \t\treturn dataSource;\r\n    \t}\r\n    \r\n        @Bean\r\n        @Autowired\r\n        public HibernateTransactionManager provideTransactionManager(SessionFactory sessionFactory) {\r\n            HibernateTransactionManager hibernateTransactioManager = new HibernateTransactionManager();\r\n            hibernateTransactioManager.setSessionFactory(sessionFactory);\r\n    \r\n            return hibernateTransactioManager;\r\n        }\r\n    \r\n        @Bean\r\n        public PersistenceExceptionTranslationPostProcessor provideExceptionTranslationPostProcessor() {\r\n            return new PersistenceExceptionTranslationPostProcessor();\r\n        }\r\n    \t\r\n    \t@Bean\r\n    \tpublic PostItemRepository postItemRepository() {\r\n    \t\treturn new FacebookPostRepository();\r\n    \t}\r\n    \t\r\n    \t@Bean\r\n    \tpublic PostPersistenceService postPersistenceService(PostItemRepository postItemRepository) {\r\n    \t\treturn new PostPersistenceEventHandler(postItemRepository);\r\n    \t}\r\n    \r\n        @Bean\r\n        public SettingRepository provideSettingRepository() {\r\n            return new SettingDatabaseRepository();\r\n        }\r\n    \r\n        @Bean\r\n        public SettingPersistenceService provideSettingPersistenceService(SettingRepository settingRepository) {\r\n            return new SettingPersistenceEventHandler(settingRepository);\r\n        }\r\n    }\r\n\r\nDomain model class\r\n\r\n    @Entity\r\n    @Table(name = &quot;settings&quot;)\r\n    public class Setting implements Serializable {\r\n        @Id\r\n        @Column(name = &quot;key&quot;, unique = true)\r\n        private String key;\r\n    \r\n        @Column(name = &quot;value&quot;)\r\n        private String value;\r\n    \r\n        public String getKey() {\r\n            return key;\r\n        }\r\n    \r\n        public void setKey(String key) {\r\n            this.key = key;\r\n        }\r\n    \r\n        public String getValue() {\r\n            return value;\r\n        }\r\n    \r\n        public void setValue(String value) {\r\n            this.value = value;\r\n        }\r\n    \r\n        public SettingDetails toSettingDetails() {\r\n            SettingDetails settingDetails = new SettingDetails();\r\n            BeanUtils.copyProperties(this, settingDetails);\r\n    \r\n            return settingDetails;\r\n        }\r\n    \r\n        public static Setting fromSettingDetails(SettingDetails settingDetails) {\r\n            Setting setting = new Setting();\r\n            BeanUtils.copyProperties(settingDetails, setting);\r\n    \r\n            return setting;\r\n        }\r\n    }\r\n\r\nService layer\r\n\r\n    public class SettingDatabaseRepository implements SettingRepository {\r\n    \r\n        @Autowired\r\n        private SessionFactory sessionFactory;\r\n    \r\n        @Override\r\n        @Transactional\r\n        public Setting get(final String key) {\r\n           return (Setting)sessionFactory.getCurrentSession().get(Setting.class, key);\r\n        }\r\n    }\r\n\r\n\r\nI really can&#39;t find any mistake which is causing these exceptions. What I am doing wrong?\r\n","title":"Method threw &#39;org.hibernate.LazyInitializationException&#39; exception","body":"<p>I am getting <code>LazyInitializationException</code> while using <code>createQuery()</code>, <code>load()</code> or <code>get()</code> methods. Configuration is based on annotations.</p>\n\n<p>This is exception which I am getting:</p>\n\n<pre><code>Method threw 'org.hibernate.LazyInitializationException' exception. Cannot evaluate lt.package.to.Setting_$$_jvstfff_0.toString()\n</code></pre>\n\n<p>Schema structure:</p>\n\n<pre><code>CREATE TABLE IF NOT EXISTS `Settings` (\n  `key` varchar(255) COLLATE utf8_lithuanian_ci NOT NULL,\n  `value` varchar(255) COLLATE utf8_lithuanian_ci DEFAULT NULL,\n  PRIMARY KEY (`key`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_lithuanian_ci;\n</code></pre>\n\n<p>PersistenceConfig.java</p>\n\n<pre><code>@Configuration\n@ComponentScan(basePackages= {\"lt.setkus.sandbox.persistence\"})\n@EnableTransactionManagement\n@PropertySource({\"/WEB-INF/properties/configuration.properties\"})\npublic class PersistenceConfig {\n\n    @Autowired\n    private Environment environment;\n\n    private Properties getHibernateProperties() {\n        Properties properties = new Properties();\n\n        properties.setProperty(\"hibernate.hbm2ddl.auto\", environment.getProperty(\"hibernate.hbm2ddl.auto\"));\n        properties.setProperty(\"hibernate.dialect\", environment.getProperty(\"hibernate.dialect\"));\n        properties.setProperty(\"hibernate.globally_quoted_identifiers\", \"true\");\n\n        return properties;\n    }\n\n    @Bean\n    public LocalSessionFactoryBean provideSessionFactoryBean() {\n        LocalSessionFactoryBean localSessionFactoryBean = new LocalSessionFactoryBean();\n\n        localSessionFactoryBean.setDataSource(getDataSource());\n        localSessionFactoryBean.setPackagesToScan(\"lt.setkus.sandbox.persistence.domain\");\n        localSessionFactoryBean.setHibernateProperties(getHibernateProperties());\n\n        return localSessionFactoryBean;\n    }\n\n    @Bean\n    public DataSource getDataSource() {\n        DriverManagerDataSource dataSource = new DriverManagerDataSource();\n\n        dataSource.setDriverClassName(environment.getProperty(\"jdbc.driver\"));\n        dataSource.setUrl(environment.getProperty(\"jdbc.url\"));\n        dataSource.setUsername(environment.getProperty(\"jdbc.user\"));\n        dataSource.setPassword(environment.getProperty(\"jdbc.password\"));\n\n        return dataSource;\n    }\n\n    @Bean\n    @Autowired\n    public HibernateTransactionManager provideTransactionManager(SessionFactory sessionFactory) {\n        HibernateTransactionManager hibernateTransactioManager = new HibernateTransactionManager();\n        hibernateTransactioManager.setSessionFactory(sessionFactory);\n\n        return hibernateTransactioManager;\n    }\n\n    @Bean\n    public PersistenceExceptionTranslationPostProcessor provideExceptionTranslationPostProcessor() {\n        return new PersistenceExceptionTranslationPostProcessor();\n    }\n\n    @Bean\n    public PostItemRepository postItemRepository() {\n        return new FacebookPostRepository();\n    }\n\n    @Bean\n    public PostPersistenceService postPersistenceService(PostItemRepository postItemRepository) {\n        return new PostPersistenceEventHandler(postItemRepository);\n    }\n\n    @Bean\n    public SettingRepository provideSettingRepository() {\n        return new SettingDatabaseRepository();\n    }\n\n    @Bean\n    public SettingPersistenceService provideSettingPersistenceService(SettingRepository settingRepository) {\n        return new SettingPersistenceEventHandler(settingRepository);\n    }\n}\n</code></pre>\n\n<p>Domain model class</p>\n\n<pre><code>@Entity\n@Table(name = \"settings\")\npublic class Setting implements Serializable {\n    @Id\n    @Column(name = \"key\", unique = true)\n    private String key;\n\n    @Column(name = \"value\")\n    private String value;\n\n    public String getKey() {\n        return key;\n    }\n\n    public void setKey(String key) {\n        this.key = key;\n    }\n\n    public String getValue() {\n        return value;\n    }\n\n    public void setValue(String value) {\n        this.value = value;\n    }\n\n    public SettingDetails toSettingDetails() {\n        SettingDetails settingDetails = new SettingDetails();\n        BeanUtils.copyProperties(this, settingDetails);\n\n        return settingDetails;\n    }\n\n    public static Setting fromSettingDetails(SettingDetails settingDetails) {\n        Setting setting = new Setting();\n        BeanUtils.copyProperties(settingDetails, setting);\n\n        return setting;\n    }\n}\n</code></pre>\n\n<p>Service layer</p>\n\n<pre><code>public class SettingDatabaseRepository implements SettingRepository {\n\n    @Autowired\n    private SessionFactory sessionFactory;\n\n    @Override\n    @Transactional\n    public Setting get(final String key) {\n       return (Setting)sessionFactory.getCurrentSession().get(Setting.class, key);\n    }\n}\n</code></pre>\n\n<p>I really can't find any mistake which is causing these exceptions. What I am doing wrong?</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9826,"page":32,"page_size":100}
