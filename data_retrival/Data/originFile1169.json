{"items":[{"tags":["java","data-structures","recursion","nested-loops","linkedhashmap"],"comments":[{"owner":{"account_id":200733,"reputation":4871,"user_id":446747,"accept_rate":75,"display_name":"josh.trow"},"score":0,"creation_date":1331067320,"post_id":9591561,"comment_id":12165019,"body_markdown":"Quick question - why `Vector`? http://stackoverflow.com/questions/1386275/why-java-vector-class-is-considered-obsolete-or-deprecated","body":"Quick question - why <code>Vector</code>? <a href=\"http://stackoverflow.com/questions/1386275/why-java-vector-class-is-considered-obsolete-or-deprecated\" title=\"why java vector class is considered obsolete or deprecated\">stackoverflow.com/questions/1386275/&hellip;</a>"},{"owner":{"account_id":483323,"reputation":36115,"user_id":898289,"accept_rate":92,"display_name":"Adam"},"score":0,"creation_date":1331067512,"post_id":9591561,"comment_id":12165101,"body_markdown":"Why are all the uniqueCombinations of length 3? What is the significance of the entry [3,2] in the input?","body":"Why are all the uniqueCombinations of length 3? What is the significance of the entry [3,2] in the input?"},{"owner":{"account_id":19804,"reputation":5310,"user_id":46717,"accept_rate":95,"display_name":"Chris Drappier"},"score":0,"creation_date":1331068069,"post_id":9591561,"comment_id":12165317,"body_markdown":"@josh.trow it&#39;s a Vector because it&#39;s a Vector.  I don&#39;t have a good explanation for you. I&#39;m not really a big fan of static typing.","body":"@josh.trow it&#39;s a Vector because it&#39;s a Vector.  I don&#39;t have a good explanation for you. I&#39;m not really a big fan of static typing."},{"owner":{"account_id":19804,"reputation":5310,"user_id":46717,"accept_rate":95,"display_name":"Chris Drappier"},"score":0,"creation_date":1331068078,"post_id":9591561,"comment_id":12165322,"body_markdown":"@Adam the unique combinations have a length of three because dataStructure.size() == 3 in this scenario. if there were 4 elements in the top level of dataStructure, then each one would be 4..","body":"@Adam the unique combinations have a length of three because dataStructure.size() == 3 in this scenario. if there were 4 elements in the top level of dataStructure, then each one would be 4.."},{"owner":{"account_id":110658,"reputation":9404,"user_id":292728,"accept_rate":87,"display_name":"Kevin K"},"score":0,"creation_date":1331070014,"post_id":9591561,"comment_id":12166089,"body_markdown":"What is the significance of the `Integer` key in the LHM?  Should the ordering for the combination arrays be based on the order of the keys, or the ordering of the LHM? (i.e. if I added keys 3,2,1 in that order to the LHM, should I use the same ordering or 1,2,3) Suppose I have mappings for keys 1,2,4,6...should the combination array skip 3 and 5 or use some special value? (e.g. 0, -1, etc.)","body":"What is the significance of the <code>Integer</code> key in the LHM?  Should the ordering for the combination arrays be based on the order of the keys, or the ordering of the LHM? (i.e. if I added keys 3,2,1 in that order to the LHM, should I use the same ordering or 1,2,3) Suppose I have mappings for keys 1,2,4,6...should the combination array skip 3 and 5 or use some special value? (e.g. 0, -1, etc.)"},{"owner":{"account_id":110658,"reputation":9404,"user_id":292728,"accept_rate":87,"display_name":"Kevin K"},"score":0,"creation_date":1331070344,"post_id":9591561,"comment_id":12166212,"body_markdown":"Nevermind, it&#39;s clearer now with the `String` example","body":"Nevermind, it&#39;s clearer now with the <code>String</code> example"}],"answers":[{"tags":[],"owner":{"account_id":20937,"reputation":167577,"user_id":50476,"accept_rate":100,"display_name":"Bart Kiers"},"down_vote_count":0,"up_vote_count":22,"is_accepted":true,"score":22,"last_activity_date":1518427148,"creation_date":1331067404,"answer_id":9591777,"question_id":9591561,"body_markdown":"Try something like this:\r\n\r\n    public static void generate(int[][] sets) {\r\n        int solutions = 1;\r\n        for(int i = 0; i &lt; sets.length; solutions *= sets[i].length, i++);\r\n        for(int i = 0; i &lt; solutions; i++) {\r\n            int j = 1;\r\n            for(int[] set : sets) {\r\n                System.out.print(set[(i/j)%set.length] + &quot; &quot;);\r\n                j *= set.length;\r\n            }\r\n            System.out.println();\r\n        }\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        generate(new int[][]{{1,2,3}, {3,2}, {5,6,7}});\r\n    }\r\n\r\n\r\nwhich will print:\r\n\r\n    1 3 5\r\n    2 3 5\r\n    3 3 5\r\n    1 2 5\r\n    2 2 5\r\n    3 2 5\r\n    1 3 6\r\n    2 3 6\r\n    3 3 6\r\n    1 2 6\r\n    2 2 6\r\n    3 2 6\r\n    1 3 7\r\n    2 3 7\r\n    3 3 7\r\n    1 2 7\r\n    2 2 7\r\n    3 2 7\r\n\r\nI&#39;ve implemented the algorithm above based on (I believe) one of Knuth&#39;s [TAOCP](http://www-cs-staff.stanford.edu/~uno/taocp.html) books (in the comments @chikitin has a more specific reference: it is in&#1113105;&#1113106;&#1113102; &#1113107;&#1113108;PRE FASCICLE 2A section 7.2.1.1 Generating All n-tuple, of The Art Of Computer Programming by Knuth, Addison Wesley).\r\n\r\nNote that I&#39;ve named the arrays `set`, but they needn&#39;t hold unique elements, of course. The time I used it, they did contain unique elements, hence the name.\r\n\r\n## EDIT\r\n\r\nIt&#39;s pretty much a 1-on-1 translation:\r\n\r\n    import java.util.Arrays;\r\n    import java.util.LinkedHashMap;\r\n    import java.util.Vector;\r\n    \r\n    public class Foo {\r\n        \r\n        private LinkedHashMap&lt;String, Vector&lt;String&gt;&gt; dataStructure;\r\n    \r\n        public Foo(LinkedHashMap&lt;String, Vector&lt;String&gt;&gt; dataStructure){\r\n            this.dataStructure = dataStructure;\r\n        }\r\n    \r\n        public String[][] allUniqueCombinations(){\r\n            int n = dataStructure.keySet().size();\r\n            int solutions = 1;\r\n            \r\n            for(Vector&lt;String&gt; vector : dataStructure.values()) {\r\n                solutions *= vector.size();            \r\n            }\r\n            \r\n            String[][] allCombinations = new String[solutions + 1][];\r\n            allCombinations[0] = dataStructure.keySet().toArray(new String[n]);\r\n    \r\n            for(int i = 0; i &lt; solutions; i++) {\r\n                Vector&lt;String&gt; combination = new Vector&lt;String&gt;(n);\r\n                int j = 1;\r\n                for(Vector&lt;String&gt; vec : dataStructure.values()) {\r\n                    combination.add(vec.get((i/j)%vec.size()));\r\n                    j *= vec.size();\r\n                }\r\n                allCombinations[i + 1] = combination.toArray(new String[n]);\r\n            }\r\n    \r\n            return allCombinations;\r\n        }\r\n        \r\n        public static void main(String[] args) {\r\n            LinkedHashMap&lt;String, Vector&lt;String&gt;&gt; data = new LinkedHashMap&lt;String, Vector&lt;String&gt;&gt;();\r\n            data.put(&quot;foo&quot;, new Vector&lt;String&gt;(Arrays.asList(&quot;1&quot;, &quot;2&quot;, &quot;3&quot;)));\r\n            data.put(&quot;bar&quot;, new Vector&lt;String&gt;(Arrays.asList(&quot;3&quot;, &quot;2&quot;)));\r\n            data.put(&quot;baz&quot;, new Vector&lt;String&gt;(Arrays.asList(&quot;5&quot;, &quot;6&quot;, &quot;7&quot;)));\r\n    \r\n            Foo foo = new Foo(data);\r\n            \r\n            for(String[] combination : foo.allUniqueCombinations()) {\r\n                System.out.println(Arrays.toString(combination));            \r\n            }\r\n        }\r\n    }\r\n\r\nIf you run the class above, the following is printed:\r\n\r\n    [foo, bar, baz]\r\n    [1, 3, 5]\r\n    [2, 3, 5]\r\n    [3, 3, 5]\r\n    [1, 2, 5]\r\n    [2, 2, 5]\r\n    [3, 2, 5]\r\n    [1, 3, 6]\r\n    [2, 3, 6]\r\n    [3, 3, 6]\r\n    [1, 2, 6]\r\n    [2, 2, 6]\r\n    [3, 2, 6]\r\n    [1, 3, 7]\r\n    [2, 3, 7]\r\n    [3, 3, 7]\r\n    [1, 2, 7]\r\n    [2, 2, 7]\r\n    [3, 2, 7]","title":"Cartesian Product of a List of Lists","body":"<p>Try something like this:</p>\n\n<pre><code>public static void generate(int[][] sets) {\n    int solutions = 1;\n    for(int i = 0; i &lt; sets.length; solutions *= sets[i].length, i++);\n    for(int i = 0; i &lt; solutions; i++) {\n        int j = 1;\n        for(int[] set : sets) {\n            System.out.print(set[(i/j)%set.length] + \" \");\n            j *= set.length;\n        }\n        System.out.println();\n    }\n}\n\npublic static void main(String[] args) {\n    generate(new int[][]{{1,2,3}, {3,2}, {5,6,7}});\n}\n</code></pre>\n\n<p>which will print:</p>\n\n<pre><code>1 3 5\n2 3 5\n3 3 5\n1 2 5\n2 2 5\n3 2 5\n1 3 6\n2 3 6\n3 3 6\n1 2 6\n2 2 6\n3 2 6\n1 3 7\n2 3 7\n3 3 7\n1 2 7\n2 2 7\n3 2 7\n</code></pre>\n\n<p>I've implemented the algorithm above based on (I believe) one of Knuth's <a href=\"http://www-cs-staff.stanford.edu/~uno/taocp.html\" rel=\"noreferrer\">TAOCP</a> books (in the comments @chikitin has a more specific reference: it is in􏰑􏰒􏰎 􏰓􏰔PRE FASCICLE 2A section 7.2.1.1 Generating All n-tuple, of The Art Of Computer Programming by Knuth, Addison Wesley).</p>\n\n<p>Note that I've named the arrays <code>set</code>, but they needn't hold unique elements, of course. The time I used it, they did contain unique elements, hence the name.</p>\n\n<h2>EDIT</h2>\n\n<p>It's pretty much a 1-on-1 translation:</p>\n\n<pre><code>import java.util.Arrays;\nimport java.util.LinkedHashMap;\nimport java.util.Vector;\n\npublic class Foo {\n\n    private LinkedHashMap&lt;String, Vector&lt;String&gt;&gt; dataStructure;\n\n    public Foo(LinkedHashMap&lt;String, Vector&lt;String&gt;&gt; dataStructure){\n        this.dataStructure = dataStructure;\n    }\n\n    public String[][] allUniqueCombinations(){\n        int n = dataStructure.keySet().size();\n        int solutions = 1;\n\n        for(Vector&lt;String&gt; vector : dataStructure.values()) {\n            solutions *= vector.size();            \n        }\n\n        String[][] allCombinations = new String[solutions + 1][];\n        allCombinations[0] = dataStructure.keySet().toArray(new String[n]);\n\n        for(int i = 0; i &lt; solutions; i++) {\n            Vector&lt;String&gt; combination = new Vector&lt;String&gt;(n);\n            int j = 1;\n            for(Vector&lt;String&gt; vec : dataStructure.values()) {\n                combination.add(vec.get((i/j)%vec.size()));\n                j *= vec.size();\n            }\n            allCombinations[i + 1] = combination.toArray(new String[n]);\n        }\n\n        return allCombinations;\n    }\n\n    public static void main(String[] args) {\n        LinkedHashMap&lt;String, Vector&lt;String&gt;&gt; data = new LinkedHashMap&lt;String, Vector&lt;String&gt;&gt;();\n        data.put(\"foo\", new Vector&lt;String&gt;(Arrays.asList(\"1\", \"2\", \"3\")));\n        data.put(\"bar\", new Vector&lt;String&gt;(Arrays.asList(\"3\", \"2\")));\n        data.put(\"baz\", new Vector&lt;String&gt;(Arrays.asList(\"5\", \"6\", \"7\")));\n\n        Foo foo = new Foo(data);\n\n        for(String[] combination : foo.allUniqueCombinations()) {\n            System.out.println(Arrays.toString(combination));            \n        }\n    }\n}\n</code></pre>\n\n<p>If you run the class above, the following is printed:</p>\n\n<pre><code>[foo, bar, baz]\n[1, 3, 5]\n[2, 3, 5]\n[3, 3, 5]\n[1, 2, 5]\n[2, 2, 5]\n[3, 2, 5]\n[1, 3, 6]\n[2, 3, 6]\n[3, 3, 6]\n[1, 2, 6]\n[2, 2, 6]\n[3, 2, 6]\n[1, 3, 7]\n[2, 3, 7]\n[3, 3, 7]\n[1, 2, 7]\n[2, 2, 7]\n[3, 2, 7]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1016018,"reputation":4728,"user_id":1027568,"display_name":"Shlomi"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1331067748,"creation_date":1331067748,"answer_id":9591868,"question_id":9591561,"body_markdown":"Here is a [link][1], its c#, but i am sure you could work with that!\r\n\r\n\r\n  [1]: http://fir3pho3nixx.blogspot.com/2011/01/recursion-cross-product-of-multiple.html","title":"Cartesian Product of a List of Lists","body":"<p>Here is a <a href=\"http://fir3pho3nixx.blogspot.com/2011/01/recursion-cross-product-of-multiple.html\" rel=\"nofollow\">link</a>, its c#, but i am sure you could work with that!</p>\n"},{"tags":[],"owner":{"account_id":69149,"reputation":233552,"user_id":201359,"accept_rate":100,"display_name":"&#211;scar L&#243;pez"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1331128744,"creation_date":1331082603,"answer_id":9594404,"question_id":9591561,"body_markdown":"Take a look at the following two methods, they do exactly what you asked for. I wrote them to be generic, it doesn&#39;t matter how long your lists are or how many keys exist in the map, the combinations generated are correct.\r\n\r\nThe code below is _iterative_, based on the algorithm of Python&#39;s [`itertools.product()`](http://docs.python.org/library/itertools.html#itertools.product) function for calculating the Cartesian product of a list of lists.\r\n\r\n    public String[][] allUniqueCombinations() {\r\n\r\n    \tList&lt;String&gt; labels = new ArrayList&lt;String&gt;();\r\n    \tList&lt;List&lt;String&gt;&gt; lists = new ArrayList&lt;List&lt;String&gt;&gt;();\r\n\r\n    \tfor (Map.Entry&lt;String, Vector&lt;String&gt;&gt; entry : dataStructure.entrySet()) {\r\n    \t\tlabels.add(entry.getKey());\r\n    \t\tlists.add(entry.getValue());\r\n    \t}\r\n\r\n    \tList&lt;List&lt;String&gt;&gt; combinations = product(lists);\r\n    \tint m = combinations.size() + 1;\r\n    \tint n = labels.size();\r\n    \tString[][] answer = new String[m][n];\r\n\r\n    \tfor (int i = 0; i &lt; n; i++)\r\n    \t\tanswer[0][i] = labels.get(i);\r\n    \tfor (int i = 1; i &lt; m; i++)\r\n    \t\tfor (int j = 0; j &lt; n; j++)\r\n    \t\t\tanswer[i][j] = combinations.get(i-1).get(j);\r\n\r\n    \treturn answer;\r\n\r\n    }\r\n\r\n    private List&lt;List&lt;String&gt;&gt; product(List&lt;List&lt;String&gt;&gt; lists) {\r\n\r\n    \tList&lt;List&lt;String&gt;&gt; result = new ArrayList&lt;List&lt;String&gt;&gt;();\r\n    \tresult.add(new ArrayList&lt;String&gt;());\r\n\r\n    \tfor (List&lt;String&gt; e : lists) {\r\n    \t\tList&lt;List&lt;String&gt;&gt; tmp1 = new ArrayList&lt;List&lt;String&gt;&gt;();\r\n    \t\tfor (List&lt;String&gt; x : result) {\r\n    \t\t\tfor (String y : e) {\r\n    \t\t\t\tList&lt;String&gt; tmp2 = new ArrayList&lt;String&gt;(x);\r\n    \t\t\t\ttmp2.add(y);\r\n    \t\t\t\ttmp1.add(tmp2);\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\tresult = tmp1;\r\n    \t}\r\n\r\n    \treturn result;\r\n\r\n    }\r\n\r\nI tested them with the example in the question:\r\n\r\n\tLinkedHashMap&lt;String, Vector&lt;String&gt;&gt; sample = \r\n        new LinkedHashMap&lt;String, Vector&lt;String&gt;&gt;();\r\n\r\n\tVector&lt;String&gt; v1 = new Vector&lt;String&gt;();\r\n\tv1.add(&quot;1&quot;); v1.add(&quot;2&quot;); v1.add(&quot;3&quot;);\r\n\tVector&lt;String&gt; v2 = new Vector&lt;String&gt;();\r\n\tv2.add(&quot;3&quot;); v2.add(&quot;2&quot;);\r\n\tVector&lt;String&gt; v3 = new Vector&lt;String&gt;();\r\n\tv3.add(&quot;5&quot;); v3.add(&quot;6&quot;); v3.add(&quot;7&quot;);\r\n\r\n\tsample.put(&quot;foo&quot;, v1);\r\n\tsample.put(&quot;bar&quot;, v2);\r\n\tsample.put(&quot;baz&quot;, v3);\r\n\r\n\tFoo foo = new Foo(sample);\r\n\tString[][] ans = foo.allUniqueCombinations();\r\n\tfor (String[] row : ans)\r\n\t\tSystem.out.println(Arrays.toString(row));\r\n\r\nThe answer that gets printed is the expected (although the combinations appear in a different order):\r\n\r\n    [foo, bar, baz]\r\n    [1, 3, 5]\r\n    [1, 3, 6]\r\n    [1, 3, 7]\r\n    [1, 2, 5]\r\n    [1, 2, 6]\r\n    [1, 2, 7]\r\n    [2, 3, 5]\r\n    [2, 3, 6]\r\n    [2, 3, 7]\r\n    [2, 2, 5]\r\n    [2, 2, 6]\r\n    [2, 2, 7]\r\n    [3, 3, 5]\r\n    [3, 3, 6]\r\n    [3, 3, 7]\r\n    [3, 2, 5]\r\n    [3, 2, 6]\r\n    [3, 2, 7]","title":"Cartesian Product of a List of Lists","body":"<p>Take a look at the following two methods, they do exactly what you asked for. I wrote them to be generic, it doesn't matter how long your lists are or how many keys exist in the map, the combinations generated are correct.</p>\n\n<p>The code below is <em>iterative</em>, based on the algorithm of Python's <a href=\"http://docs.python.org/library/itertools.html#itertools.product\" rel=\"nofollow\"><code>itertools.product()</code></a> function for calculating the Cartesian product of a list of lists.</p>\n\n<pre><code>public String[][] allUniqueCombinations() {\n\n    List&lt;String&gt; labels = new ArrayList&lt;String&gt;();\n    List&lt;List&lt;String&gt;&gt; lists = new ArrayList&lt;List&lt;String&gt;&gt;();\n\n    for (Map.Entry&lt;String, Vector&lt;String&gt;&gt; entry : dataStructure.entrySet()) {\n        labels.add(entry.getKey());\n        lists.add(entry.getValue());\n    }\n\n    List&lt;List&lt;String&gt;&gt; combinations = product(lists);\n    int m = combinations.size() + 1;\n    int n = labels.size();\n    String[][] answer = new String[m][n];\n\n    for (int i = 0; i &lt; n; i++)\n        answer[0][i] = labels.get(i);\n    for (int i = 1; i &lt; m; i++)\n        for (int j = 0; j &lt; n; j++)\n            answer[i][j] = combinations.get(i-1).get(j);\n\n    return answer;\n\n}\n\nprivate List&lt;List&lt;String&gt;&gt; product(List&lt;List&lt;String&gt;&gt; lists) {\n\n    List&lt;List&lt;String&gt;&gt; result = new ArrayList&lt;List&lt;String&gt;&gt;();\n    result.add(new ArrayList&lt;String&gt;());\n\n    for (List&lt;String&gt; e : lists) {\n        List&lt;List&lt;String&gt;&gt; tmp1 = new ArrayList&lt;List&lt;String&gt;&gt;();\n        for (List&lt;String&gt; x : result) {\n            for (String y : e) {\n                List&lt;String&gt; tmp2 = new ArrayList&lt;String&gt;(x);\n                tmp2.add(y);\n                tmp1.add(tmp2);\n            }\n        }\n        result = tmp1;\n    }\n\n    return result;\n\n}\n</code></pre>\n\n<p>I tested them with the example in the question:</p>\n\n<pre><code>LinkedHashMap&lt;String, Vector&lt;String&gt;&gt; sample = \n    new LinkedHashMap&lt;String, Vector&lt;String&gt;&gt;();\n\nVector&lt;String&gt; v1 = new Vector&lt;String&gt;();\nv1.add(\"1\"); v1.add(\"2\"); v1.add(\"3\");\nVector&lt;String&gt; v2 = new Vector&lt;String&gt;();\nv2.add(\"3\"); v2.add(\"2\");\nVector&lt;String&gt; v3 = new Vector&lt;String&gt;();\nv3.add(\"5\"); v3.add(\"6\"); v3.add(\"7\");\n\nsample.put(\"foo\", v1);\nsample.put(\"bar\", v2);\nsample.put(\"baz\", v3);\n\nFoo foo = new Foo(sample);\nString[][] ans = foo.allUniqueCombinations();\nfor (String[] row : ans)\n    System.out.println(Arrays.toString(row));\n</code></pre>\n\n<p>The answer that gets printed is the expected (although the combinations appear in a different order):</p>\n\n<pre><code>[foo, bar, baz]\n[1, 3, 5]\n[1, 3, 6]\n[1, 3, 7]\n[1, 2, 5]\n[1, 2, 6]\n[1, 2, 7]\n[2, 3, 5]\n[2, 3, 6]\n[2, 3, 7]\n[2, 2, 5]\n[2, 2, 6]\n[2, 2, 7]\n[3, 3, 5]\n[3, 3, 6]\n[3, 3, 7]\n[3, 2, 5]\n[3, 2, 6]\n[3, 2, 7]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":120028,"reputation":35734,"user_id":312172,"accept_rate":86,"display_name":"user unknown"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1331092232,"creation_date":1331092232,"answer_id":9595560,"question_id":9591561,"body_markdown":"A LinkedHashMap of Vectors of Strings is ... - troublesome. I had to spend much time in converting a solution to use it, but in the end, I don&#39;t produce an ArrayOfArrays, but a List of List and keep the last step to the reader. \r\n\r\n    import java.util.*;\r\n    /**\r\n    \tCartesianProductLHM   \r\n    */\r\n    public class CartesianProductLHM\r\n    {\r\n    \tLinkedHashMap &lt;String, Vector&lt;String&gt;&gt; dataStructure;\r\n    \r\n    \tpublic CartesianProductLHM (final String[] data) {\r\n    \t\tdataStructure = new LinkedHashMap &lt;String, Vector&lt;String&gt;&gt; ();\r\n    \t\tfor (String str : data)\r\n    \t\t{\r\n    \t\t\tString [] kv = str.split (&quot;:&quot;);\r\n    \t\t\tString [] values = kv[1].split (&quot;,&quot;); \r\n    \t\t\tVector &lt;String&gt; v = new Vector &lt;String&gt; ();\r\n    \t\t\tfor (String s: values) {\r\n    \t\t\t\tv.add (s);\r\n    \t\t\t//\tSystem.out.print (s); \r\n    \t\t\t}\r\n    \t\t\t// System.out.println (&quot;\\n---&quot;);\r\n    \t\t\tdataStructure.put (kv[0], v);\r\n    \t\t}\r\n    \t\t// System.out.println (&quot;\t---\t---\t---&quot;);\r\n    \t}\r\n    \t\r\n    \tList &lt;String&gt; getCombiFor (final int i, final List &lt;List &lt;String&gt;&gt; livs) \r\n    \t{\r\n    \t\tList &lt;String&gt; ls = new ArrayList &lt;String&gt; ();\r\n    \t\tif (! livs.isEmpty ()) {\r\n    \t\t\tList &lt;String&gt; vs = livs.remove (0); \r\n    \t\t\tint idx = i % vs.size (); \r\n    \t\t\tString elem = vs.get (idx);\r\n    \t\t\tls.add (elem);\r\n    \t\t\tls.addAll (getCombiFor (i / vs.size (), livs));\r\n    \t\t}\r\n    \t\treturn ls;\r\n    \t}\r\n    \t\r\n    \tList &lt;String&gt; getOuterCombiFor (int i, List &lt;List &lt;String&gt;&gt; coll) \r\n    \t{\r\n    \t\tList &lt;String&gt; ls = new ArrayList &lt;String&gt; ();\r\n    \t\tif (! coll.isEmpty ()) {\r\n    \t\t\tList &lt;List &lt;String&gt;&gt; livs = new ArrayList &lt;List &lt;String&gt;&gt; ();\r\n    \t\t\tfor (List&lt;String&gt; li : coll) \r\n    \t\t\t{\r\n    \t\t\t\tlivs.add (li);\r\n    \t\t\t}\t\r\n    \t\t\tls.addAll (getCombiFor (i, livs));\r\n    \t\t} \r\n    \t\treturn ls;\t\r\n    \t}   \r\n    \t\r\n    \tpublic List &lt;List &lt;String&gt;&gt; allUniqueCombinations () {\r\n    \t\tCollection &lt;Vector &lt;String&gt;&gt; li = dataStructure.values (); \r\n    \t\tList &lt;List &lt;String&gt;&gt; lls = new ArrayList &lt;List &lt;String&gt;&gt; ();\r\n    \t\tfor (Vector &lt;String&gt; vs : li) {\r\n    \t\t\tList &lt;String&gt; l = new ArrayList &lt;String&gt; ();\r\n    \t\t\tfor (String s : vs) {\r\n    \t\t\t\tl.add (s);\r\n    \t\t\t}\r\n    \t\t\tlls.add (l);\r\n    \t\t}\r\n    \t\tint count = 1;\r\n    \t\tfor (Vector &lt;String&gt; vec: li) {\r\n    \t\t\tcount *= vec.size ();\r\n    \t\t}\t\t\r\n    \t\tList &lt;List &lt;String&gt;&gt; result = new ArrayList &lt;List &lt;String&gt;&gt; ();\r\n    \t\tfor (int i = 0; i &lt; count; ++i) \r\n    \t\t{\r\n    \t\t\tList &lt;String&gt; l = getOuterCombiFor (i, lls);\r\n    \t\t\tresult.add (l);\r\n    \t\t}\r\n    \t\treturn result;\t\r\n    \t}\r\n    \r\n    \tpublic static void main (String args[])\r\n    \t{\r\n    \t\tString[] arr = {&quot;foo:1,2,3&quot;, &quot;bar:a,b&quot;, &quot;baz:5,6,7&quot;};\r\n    \t\tCartesianProductLHM cp = new CartesianProductLHM (arr);\r\n    \t\tList &lt;List &lt;String&gt;&gt; lls = cp.allUniqueCombinations ();\r\n    \t\tfor (List &lt;String&gt; ls : lls) \r\n    \t\t{\r\n    \t\t\tfor (String s : ls)\r\n    \t\t\t\tSystem.out.print (s + &quot;\\t&quot;);\r\n    \t\t\tSystem.out.println ();\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\nWell - yes, and I parse some test data. \r\n\r\nThe main idea is, that you have some Lists (abc, 12, defg, ...) and you have 3 possibilities at pos 0, 2 at pos 1, 4 at pos 3 and so on, so 3*2*4 combinations so far. \r\n\r\nFrom the numbers 0 to 23 you can pick from each sublist with modulo, and hand the rest of the number divided by the size of the previous list and the remaining lists recursively to the procedure, until there is no list left.","title":"Cartesian Product of a List of Lists","body":"<p>A LinkedHashMap of Vectors of Strings is ... - troublesome. I had to spend much time in converting a solution to use it, but in the end, I don't produce an ArrayOfArrays, but a List of List and keep the last step to the reader. </p>\n\n<pre><code>import java.util.*;\n/**\n    CartesianProductLHM   \n*/\npublic class CartesianProductLHM\n{\n    LinkedHashMap &lt;String, Vector&lt;String&gt;&gt; dataStructure;\n\n    public CartesianProductLHM (final String[] data) {\n        dataStructure = new LinkedHashMap &lt;String, Vector&lt;String&gt;&gt; ();\n        for (String str : data)\n        {\n            String [] kv = str.split (\":\");\n            String [] values = kv[1].split (\",\"); \n            Vector &lt;String&gt; v = new Vector &lt;String&gt; ();\n            for (String s: values) {\n                v.add (s);\n            //  System.out.print (s); \n            }\n            // System.out.println (\"\\n---\");\n            dataStructure.put (kv[0], v);\n        }\n        // System.out.println (\"    --- --- ---\");\n    }\n\n    List &lt;String&gt; getCombiFor (final int i, final List &lt;List &lt;String&gt;&gt; livs) \n    {\n        List &lt;String&gt; ls = new ArrayList &lt;String&gt; ();\n        if (! livs.isEmpty ()) {\n            List &lt;String&gt; vs = livs.remove (0); \n            int idx = i % vs.size (); \n            String elem = vs.get (idx);\n            ls.add (elem);\n            ls.addAll (getCombiFor (i / vs.size (), livs));\n        }\n        return ls;\n    }\n\n    List &lt;String&gt; getOuterCombiFor (int i, List &lt;List &lt;String&gt;&gt; coll) \n    {\n        List &lt;String&gt; ls = new ArrayList &lt;String&gt; ();\n        if (! coll.isEmpty ()) {\n            List &lt;List &lt;String&gt;&gt; livs = new ArrayList &lt;List &lt;String&gt;&gt; ();\n            for (List&lt;String&gt; li : coll) \n            {\n                livs.add (li);\n            }   \n            ls.addAll (getCombiFor (i, livs));\n        } \n        return ls;  \n    }   \n\n    public List &lt;List &lt;String&gt;&gt; allUniqueCombinations () {\n        Collection &lt;Vector &lt;String&gt;&gt; li = dataStructure.values (); \n        List &lt;List &lt;String&gt;&gt; lls = new ArrayList &lt;List &lt;String&gt;&gt; ();\n        for (Vector &lt;String&gt; vs : li) {\n            List &lt;String&gt; l = new ArrayList &lt;String&gt; ();\n            for (String s : vs) {\n                l.add (s);\n            }\n            lls.add (l);\n        }\n        int count = 1;\n        for (Vector &lt;String&gt; vec: li) {\n            count *= vec.size ();\n        }       \n        List &lt;List &lt;String&gt;&gt; result = new ArrayList &lt;List &lt;String&gt;&gt; ();\n        for (int i = 0; i &lt; count; ++i) \n        {\n            List &lt;String&gt; l = getOuterCombiFor (i, lls);\n            result.add (l);\n        }\n        return result;  \n    }\n\n    public static void main (String args[])\n    {\n        String[] arr = {\"foo:1,2,3\", \"bar:a,b\", \"baz:5,6,7\"};\n        CartesianProductLHM cp = new CartesianProductLHM (arr);\n        List &lt;List &lt;String&gt;&gt; lls = cp.allUniqueCombinations ();\n        for (List &lt;String&gt; ls : lls) \n        {\n            for (String s : ls)\n                System.out.print (s + \"\\t\");\n            System.out.println ();\n        }\n    }\n}\n</code></pre>\n\n<p>Well - yes, and I parse some test data. </p>\n\n<p>The main idea is, that you have some Lists (abc, 12, defg, ...) and you have 3 possibilities at pos 0, 2 at pos 1, 4 at pos 3 and so on, so 3*2*4 combinations so far. </p>\n\n<p>From the numbers 0 to 23 you can pick from each sublist with modulo, and hand the rest of the number divided by the size of the previous list and the remaining lists recursively to the procedure, until there is no list left.</p>\n"},{"tags":[],"owner":{"account_id":1016018,"reputation":4728,"user_id":1027568,"display_name":"Shlomi"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1343172590,"creation_date":1343171015,"answer_id":11640557,"question_id":9591561,"body_markdown":"You could also solve this really easily with [Functional Java&#39;s List monad][1]:\r\n\r\n    import fj.data.List;\r\n    \r\n    public class cartesian {\r\n     public static void main(String[] args) {\r\n      List&lt;String&gt;  foo = List.list(&quot;a&quot;, &quot;b&quot;);\r\n      List&lt;Integer&gt; bar = List.list(1,2,3);\r\n      List&lt;Float&gt;   baz = List.list(0.2f,0.4f,0.3f);\r\n    \t\t\r\n      List&lt;P3&lt;String, Integer, Float&gt;&gt; \r\n      // the Cartesian product is assembled into a list of P3&#39;s\r\n      result = foo.bind(bar, baz, P.&lt;String, Integer, Float&gt;p3()); \r\n\r\n      String out = Show.listShow(Show.p3Show(Show.stringShow, Show.intShow, Show.floatShow))\r\n                   .showS(result);\r\n      System.out.println(out);\r\n     }\r\n    }\r\n\r\n\r\n  [1]: https://github.com/functionaljava/functionaljava/blob/master/core/src/main/java/fj/data/List.java#L483","title":"Cartesian Product of a List of Lists","body":"<p>You could also solve this really easily with <a href=\"https://github.com/functionaljava/functionaljava/blob/master/core/src/main/java/fj/data/List.java#L483\" rel=\"nofollow\">Functional Java's List monad</a>:</p>\n\n<pre><code>import fj.data.List;\n\npublic class cartesian {\n public static void main(String[] args) {\n  List&lt;String&gt;  foo = List.list(\"a\", \"b\");\n  List&lt;Integer&gt; bar = List.list(1,2,3);\n  List&lt;Float&gt;   baz = List.list(0.2f,0.4f,0.3f);\n\n  List&lt;P3&lt;String, Integer, Float&gt;&gt; \n  // the Cartesian product is assembled into a list of P3's\n  result = foo.bind(bar, baz, P.&lt;String, Integer, Float&gt;p3()); \n\n  String out = Show.listShow(Show.p3Show(Show.stringShow, Show.intShow, Show.floatShow))\n               .showS(result);\n  System.out.println(out);\n }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":308519,"reputation":13279,"user_id":620448,"accept_rate":67,"display_name":"Ulises"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1354984172,"creation_date":1354982931,"answer_id":13779215,"question_id":9591561,"body_markdown":"I&#39;m late to the party but I followed Shiomi&#39;s link and translated the functions into Java. The result is an easy to follow and understand algorithm (I may be a little slow since I had a hard time understanding Bart Kiers&#39; solution).\r\n\r\nHere it is (the key is an int, replacing to String should be straightforward):\r\n\r\n**Usage**\r\n\r\n        public void testProduct(){\r\n    \t\tMap&lt;Integer, List&lt;String&gt;&gt; data =   new LinkedHashMap&lt;Integer, List&lt;String&gt;&gt;(){{\t\t\t\t\r\n\t\t\t\tput(0, new ArrayList&lt;String&gt;(){{\r\n\t\t\t\t\tadd(&quot;John&quot;); add(&quot;Sarah&quot;);\t\t\t\t\t\t\r\n\t\t\t\t}});\t\t\t\t\r\n\t\t\t\tput(1, new ArrayList&lt;String&gt;(){{\r\n\t\t\t\t\tadd(&quot;Red&quot;); add(&quot;Green&quot;); add(&quot;Blue&quot;); add(&quot;Orange&quot;);\r\n\t\t\t\t}});\r\n\t\t\t\tput(2, new ArrayList&lt;String&gt;(){{\r\n\t\t\t\t\tadd(&quot;Apple&quot;); add(&quot;Tomatoe&quot;); add(&quot;Bananna&quot;);\t\t\t\t\t\r\n\t\t\t\t}});\r\n\t\t}};\r\n    \t\t\r\n    \t\tList&lt;String[]&gt; product =  GetCrossProduct(data);\r\n    \t\tfor(String[] o : product)\r\n    \t\t\tSystem.out.println(Arrays.toString(o));\r\n    \t\t\r\n    \t}\r\n\r\n\r\n**Result**\r\n\r\n    [John, Red, Apple]\r\n    [John, Red, Tomatoe]\r\n    [John, Red, Bananna]\r\n    [John, Green, Apple]\r\n    [John, Green, Tomatoe]\r\n    [John, Green, Bananna]\r\n    [John, Blue, Apple]\r\n    [John, Blue, Tomatoe]\r\n    [John, Blue, Bananna]\r\n    [John, Orange, Apple]\r\n    [John, Orange, Tomatoe]\r\n    [John, Orange, Bananna]\r\n    [Sarah, Red, Apple]\r\n    [Sarah, Red, Tomatoe]\r\n    [Sarah, Red, Bananna]\r\n    [Sarah, Green, Apple]\r\n    [Sarah, Green, Tomatoe]\r\n    [Sarah, Green, Bananna]\r\n    [Sarah, Blue, Apple]\r\n    [Sarah, Blue, Tomatoe]\r\n    [Sarah, Blue, Bananna]\r\n    [Sarah, Orange, Apple]\r\n    [Sarah, Orange, Tomatoe]\r\n    [Sarah, Orange, Bananna]\r\n\r\n**Cartesian Product Functions**\r\n\r\n        public static List&lt;String[]&gt; GetCrossProduct(Map&lt;Integer, List&lt;String&gt;&gt; lists)\r\n        {\r\n    \t\tList&lt;String[]&gt; results = new ArrayList&lt;String[]&gt;();\r\n            GetCrossProduct(results, lists, 0, new String[(lists.size())]);\r\n            return results;\r\n        }\r\n\r\n        private void GetCrossProduct(List&lt;String[]&gt; results, Map&lt;Integer, List&lt;String&gt;&gt; lists, int depth, String[] current)\r\n        {\r\n            for (int i = 0; i &lt; lists.get(depth).size(); i++)\r\n            {\r\n            \tcurrent[depth] = lists.get(depth).get(i);            \r\n                if (depth &lt; lists.keySet().size() - 1)\r\n                    GetCrossProduct(results, lists, depth + 1, current);\r\n                else{\r\n                    results.add(Arrays.copyOf(current,current.length));                \r\n                }\r\n            }\r\n        }   \t","title":"Cartesian Product of a List of Lists","body":"<p>I'm late to the party but I followed Shiomi's link and translated the functions into Java. The result is an easy to follow and understand algorithm (I may be a little slow since I had a hard time understanding Bart Kiers' solution).</p>\n\n<p>Here it is (the key is an int, replacing to String should be straightforward):</p>\n\n<p><strong>Usage</strong></p>\n\n<pre><code>    public void testProduct(){\n        Map&lt;Integer, List&lt;String&gt;&gt; data =   new LinkedHashMap&lt;Integer, List&lt;String&gt;&gt;(){{                \n            put(0, new ArrayList&lt;String&gt;(){{\n                add(\"John\"); add(\"Sarah\");                      \n            }});                \n            put(1, new ArrayList&lt;String&gt;(){{\n                add(\"Red\"); add(\"Green\"); add(\"Blue\"); add(\"Orange\");\n            }});\n            put(2, new ArrayList&lt;String&gt;(){{\n                add(\"Apple\"); add(\"Tomatoe\"); add(\"Bananna\");                   \n            }});\n    }};\n\n        List&lt;String[]&gt; product =  GetCrossProduct(data);\n        for(String[] o : product)\n            System.out.println(Arrays.toString(o));\n\n    }\n</code></pre>\n\n<p><strong>Result</strong></p>\n\n<pre><code>[John, Red, Apple]\n[John, Red, Tomatoe]\n[John, Red, Bananna]\n[John, Green, Apple]\n[John, Green, Tomatoe]\n[John, Green, Bananna]\n[John, Blue, Apple]\n[John, Blue, Tomatoe]\n[John, Blue, Bananna]\n[John, Orange, Apple]\n[John, Orange, Tomatoe]\n[John, Orange, Bananna]\n[Sarah, Red, Apple]\n[Sarah, Red, Tomatoe]\n[Sarah, Red, Bananna]\n[Sarah, Green, Apple]\n[Sarah, Green, Tomatoe]\n[Sarah, Green, Bananna]\n[Sarah, Blue, Apple]\n[Sarah, Blue, Tomatoe]\n[Sarah, Blue, Bananna]\n[Sarah, Orange, Apple]\n[Sarah, Orange, Tomatoe]\n[Sarah, Orange, Bananna]\n</code></pre>\n\n<p><strong>Cartesian Product Functions</strong></p>\n\n<pre><code>    public static List&lt;String[]&gt; GetCrossProduct(Map&lt;Integer, List&lt;String&gt;&gt; lists)\n    {\n        List&lt;String[]&gt; results = new ArrayList&lt;String[]&gt;();\n        GetCrossProduct(results, lists, 0, new String[(lists.size())]);\n        return results;\n    }\n\n    private void GetCrossProduct(List&lt;String[]&gt; results, Map&lt;Integer, List&lt;String&gt;&gt; lists, int depth, String[] current)\n    {\n        for (int i = 0; i &lt; lists.get(depth).size(); i++)\n        {\n            current[depth] = lists.get(depth).get(i);            \n            if (depth &lt; lists.keySet().size() - 1)\n                GetCrossProduct(results, lists, depth + 1, current);\n            else{\n                results.add(Arrays.copyOf(current,current.length));                \n            }\n        }\n    }       \n</code></pre>\n"},{"tags":[],"owner":{"account_id":38671,"reputation":7249,"user_id":111160,"accept_rate":80,"display_name":"Adrian Panasiuk"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1463749796,"creation_date":1365119957,"answer_id":15823771,"question_id":9591561,"body_markdown":"How about generating the product lazily, ie. only create the tuple when you&#39;re accessing it?\r\n\r\n    /**\r\n    * A random access view of tuples of a cartesian product of ArrayLists\r\n    *\r\n    * Orders tuples in the natural order of the cartesian product\r\n    *\r\n    * @param T the type for both the values and the stored tuples, ie. values of the cartesian factors are singletons\r\n    * While the type of input sets is List&lt;T&gt; with elements being treated as singletons\r\n    *\r\n    */\r\n\r\n    abstract public class CartesianProductView&lt;T&gt; extends AbstractList&lt;T&gt; {\r\n\r\n    private final List&lt;List&lt;T&gt;&gt; factors;\r\n    private final int size;\r\n\r\n    /**\r\n     * @param factors the length of the factors (ie. the elements of the factors argument) should not change,\r\n     *  otherwise get may not return all tuples, or throw exceptions when trying to access the factors outside of range\r\n     */\r\n    public CartesianProductView(List&lt;List&lt;T&gt;&gt; factors) {\r\n        this.factors = new ArrayList&lt;&gt;(factors);\r\n        Collections.reverse(this.factors);\r\n        int acc = 1;\r\n        for (Iterator&lt;List&lt;T&gt;&gt; iter = this.factors.iterator(); iter.hasNext(); ) {\r\n            acc *= iter.next().size();\r\n        }\r\n        this.size = acc;\r\n    }\r\n\r\n    @Override\r\n    public T get(int index) {\r\n        if (index &lt; 0 || index &gt;= size()) {\r\n            throw new IndexOutOfBoundsException(String.format(&quot;index %d &gt; size() %d&quot;, index, size()));\r\n        }\r\n\r\n        T acc = null;\r\n        for (Iterator&lt;List&lt;T&gt;&gt; iter = factors.iterator(); iter.hasNext();) {\r\n            List&lt;T&gt; set = iter.next();\r\n            acc = makeTupleOrSingleton(set.get(index % set.size()), acc);\r\n            index /= set.size();\r\n        }\r\n        return acc;\r\n    }\r\n\r\n    @Override\r\n    public int size() {\r\n        return size;\r\n    }\r\n\r\n    private T makeTupleOrSingleton(T left, T right) {\r\n        if (right == null) {\r\n            return left;\r\n        }\r\n        return makeTuple(left, right);\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param left      a singleton of a value\r\n     * @param right     a tuple of values taken from the cartesian product factors, with null representing the empty set\r\n     * @return          the sum of left and right, with the value of left being put in front\r\n     */\r\n    abstract protected T makeTuple(T left, T right);\r\n    }\r\n\r\nand use it like this\r\n\r\n    final List&lt;List&lt;String&gt;&gt; l1 = new ArrayList&lt;List&lt;String&gt;&gt;() {{ add(singletonList(&quot;a&quot;)); add(singletonList(&quot;b&quot;)); add(singletonList(&quot;c&quot;)); }};\r\n    final List&lt;List&lt;String&gt;&gt; l2 = new ArrayList&lt;List&lt;String&gt;&gt;() {{ add(singletonList(&quot;X&quot;)); add(singletonList(&quot;Y&quot;)); }};\r\n    final List&lt;List&lt;String&gt;&gt; l3 = new ArrayList&lt;List&lt;String&gt;&gt;() {{ add(singletonList(&quot;1&quot;)); add(singletonList(&quot;2&quot;)); add(singletonList(&quot;3&quot;)); add(singletonList(&quot;4&quot;)); }};\r\n\r\n\r\n    List&lt;List&lt;List&lt;String&gt;&gt;&gt; in = new ArrayList&lt;List&lt;List&lt;String&gt;&gt;&gt;() {{ add(l1); add(l2); add(l3); }};\r\n\r\n    List&lt;List&lt;String&gt;&gt; a = new CartesianProductView&lt;List&lt;String&gt;&gt;(in) {\r\n\r\n        @Override\r\n        protected List&lt;String&gt; makeTuple(final List&lt;String&gt; left, final List&lt;String&gt; right) {\r\n            return new ArrayList&lt;String&gt;() {{ add(left.get(0)); addAll(right); }};\r\n        }\r\n\r\n    };\r\n\r\n    System.out.println(a);\r\n\r\nThe result:\r\n\r\n    [[a, X, 1], [a, X, 2], [a, X, 3], [a, X, 4], [a, Y, 1], [a, Y, 2], [a, Y, 3], [a, Y, 4], [b, X, 1], [b, X, 2], [b, X, 3], [b, X, 4], [b, Y, 1], [b, Y, 2], [b, Y, 3], [b, Y, 4], [c, X, 1], [c, X, 2], [c, X, 3], [c, X, 4], [c, Y, 1], [c, Y, 2], [c, Y, 3], [c, Y, 4]]\r\n\r\nAs an added bonus, you can use it join strings all with all:\r\n\r\n    final List&lt;String&gt; l1 = new ArrayList&lt;String&gt;() {{ add(&quot;a&quot;); add(&quot;b&quot;); add(&quot;c&quot;); }};\r\n    final List&lt;String&gt; l2 = new ArrayList&lt;String&gt;() {{ add(&quot;X&quot;); add(&quot;Y&quot;); }};\r\n    final List&lt;String&gt; l3 = new ArrayList&lt;String&gt;() {{ add(&quot;1&quot;); add(&quot;2&quot;); add(&quot;3&quot;); add(&quot;4&quot;); }};\r\n\r\n\r\n    List&lt;List&lt;String&gt;&gt; in = new ArrayList&lt;List&lt;String&gt;&gt;() {{ add(l1); add(l2); add(l3); }};\r\n\r\n    List&lt;String&gt; a = new CartesianProductView&lt;String&gt;(in) {\r\n\r\n        @Override\r\n        protected String makeTuple(String left, String right) {\r\n            return String.format(&quot;%s%s&quot;, left, right);\r\n        }\r\n\r\n    };\r\n\r\n    System.out.println(a);\r\n\r\nThe result:\r\n\r\n    [aX1, aX2, aX3, aX4, aY1, aY2, aY3, aY4, bX1, bX2, bX3, bX4, bY1, bY2, bY3, bY4, cX1, cX2, cX3, cX4, cY1, cY2, cY3, cY4]\r\n\r\n","title":"Cartesian Product of a List of Lists","body":"<p>How about generating the product lazily, ie. only create the tuple when you're accessing it?</p>\n\n<pre><code>/**\n* A random access view of tuples of a cartesian product of ArrayLists\n*\n* Orders tuples in the natural order of the cartesian product\n*\n* @param T the type for both the values and the stored tuples, ie. values of the cartesian factors are singletons\n* While the type of input sets is List&lt;T&gt; with elements being treated as singletons\n*\n*/\n\nabstract public class CartesianProductView&lt;T&gt; extends AbstractList&lt;T&gt; {\n\nprivate final List&lt;List&lt;T&gt;&gt; factors;\nprivate final int size;\n\n/**\n * @param factors the length of the factors (ie. the elements of the factors argument) should not change,\n *  otherwise get may not return all tuples, or throw exceptions when trying to access the factors outside of range\n */\npublic CartesianProductView(List&lt;List&lt;T&gt;&gt; factors) {\n    this.factors = new ArrayList&lt;&gt;(factors);\n    Collections.reverse(this.factors);\n    int acc = 1;\n    for (Iterator&lt;List&lt;T&gt;&gt; iter = this.factors.iterator(); iter.hasNext(); ) {\n        acc *= iter.next().size();\n    }\n    this.size = acc;\n}\n\n@Override\npublic T get(int index) {\n    if (index &lt; 0 || index &gt;= size()) {\n        throw new IndexOutOfBoundsException(String.format(\"index %d &gt; size() %d\", index, size()));\n    }\n\n    T acc = null;\n    for (Iterator&lt;List&lt;T&gt;&gt; iter = factors.iterator(); iter.hasNext();) {\n        List&lt;T&gt; set = iter.next();\n        acc = makeTupleOrSingleton(set.get(index % set.size()), acc);\n        index /= set.size();\n    }\n    return acc;\n}\n\n@Override\npublic int size() {\n    return size;\n}\n\nprivate T makeTupleOrSingleton(T left, T right) {\n    if (right == null) {\n        return left;\n    }\n    return makeTuple(left, right);\n}\n\n/**\n *\n * @param left      a singleton of a value\n * @param right     a tuple of values taken from the cartesian product factors, with null representing the empty set\n * @return          the sum of left and right, with the value of left being put in front\n */\nabstract protected T makeTuple(T left, T right);\n}\n</code></pre>\n\n<p>and use it like this</p>\n\n<pre><code>final List&lt;List&lt;String&gt;&gt; l1 = new ArrayList&lt;List&lt;String&gt;&gt;() {{ add(singletonList(\"a\")); add(singletonList(\"b\")); add(singletonList(\"c\")); }};\nfinal List&lt;List&lt;String&gt;&gt; l2 = new ArrayList&lt;List&lt;String&gt;&gt;() {{ add(singletonList(\"X\")); add(singletonList(\"Y\")); }};\nfinal List&lt;List&lt;String&gt;&gt; l3 = new ArrayList&lt;List&lt;String&gt;&gt;() {{ add(singletonList(\"1\")); add(singletonList(\"2\")); add(singletonList(\"3\")); add(singletonList(\"4\")); }};\n\n\nList&lt;List&lt;List&lt;String&gt;&gt;&gt; in = new ArrayList&lt;List&lt;List&lt;String&gt;&gt;&gt;() {{ add(l1); add(l2); add(l3); }};\n\nList&lt;List&lt;String&gt;&gt; a = new CartesianProductView&lt;List&lt;String&gt;&gt;(in) {\n\n    @Override\n    protected List&lt;String&gt; makeTuple(final List&lt;String&gt; left, final List&lt;String&gt; right) {\n        return new ArrayList&lt;String&gt;() {{ add(left.get(0)); addAll(right); }};\n    }\n\n};\n\nSystem.out.println(a);\n</code></pre>\n\n<p>The result:</p>\n\n<pre><code>[[a, X, 1], [a, X, 2], [a, X, 3], [a, X, 4], [a, Y, 1], [a, Y, 2], [a, Y, 3], [a, Y, 4], [b, X, 1], [b, X, 2], [b, X, 3], [b, X, 4], [b, Y, 1], [b, Y, 2], [b, Y, 3], [b, Y, 4], [c, X, 1], [c, X, 2], [c, X, 3], [c, X, 4], [c, Y, 1], [c, Y, 2], [c, Y, 3], [c, Y, 4]]\n</code></pre>\n\n<p>As an added bonus, you can use it join strings all with all:</p>\n\n<pre><code>final List&lt;String&gt; l1 = new ArrayList&lt;String&gt;() {{ add(\"a\"); add(\"b\"); add(\"c\"); }};\nfinal List&lt;String&gt; l2 = new ArrayList&lt;String&gt;() {{ add(\"X\"); add(\"Y\"); }};\nfinal List&lt;String&gt; l3 = new ArrayList&lt;String&gt;() {{ add(\"1\"); add(\"2\"); add(\"3\"); add(\"4\"); }};\n\n\nList&lt;List&lt;String&gt;&gt; in = new ArrayList&lt;List&lt;String&gt;&gt;() {{ add(l1); add(l2); add(l3); }};\n\nList&lt;String&gt; a = new CartesianProductView&lt;String&gt;(in) {\n\n    @Override\n    protected String makeTuple(String left, String right) {\n        return String.format(\"%s%s\", left, right);\n    }\n\n};\n\nSystem.out.println(a);\n</code></pre>\n\n<p>The result:</p>\n\n<pre><code>[aX1, aX2, aX3, aX4, aY1, aY2, aY3, aY4, bX1, bX2, bX3, bX4, bY1, bY2, bY3, bY4, cX1, cX2, cX3, cX4, cY1, cY2, cY3, cY4]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1123894,"reputation":805,"user_id":1111601,"accept_rate":60,"display_name":"Bulba"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1410801683,"creation_date":1410801683,"answer_id":25853435,"question_id":9591561,"body_markdown":"I know it&#39;s long after you needed the answer, but somehow I can&#39;t refrain from noticing that one could switch to Groovy, at least for some part of a Java application, and write a wrapper class to match the desired interface. The Groovy code for such permutations is \r\n\r\n    myListOfLists.combinations()\r\n\r\nEver since I started using Groovy in my Java applications, it&#39;s much faster to write them and way more interesting to debug/profile them (ehem...)","title":"Cartesian Product of a List of Lists","body":"<p>I know it's long after you needed the answer, but somehow I can't refrain from noticing that one could switch to Groovy, at least for some part of a Java application, and write a wrapper class to match the desired interface. The Groovy code for such permutations is </p>\n\n<pre><code>myListOfLists.combinations()\n</code></pre>\n\n<p>Ever since I started using Groovy in my Java applications, it's much faster to write them and way more interesting to debug/profile them (ehem...)</p>\n"},{"tags":[],"owner":{"account_id":108817,"reputation":111646,"user_id":288671,"display_name":"Vitalii Fedorenko"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1431466953,"creation_date":1431466953,"answer_id":30201937,"question_id":9591561,"body_markdown":"Guava has a utility method which returns a cartesian product of the given list of sets: [Sets.cartesianProduct][1].\r\n\r\n\r\n  [1]: http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/collect/Sets.html#cartesianProduct(java.util.List)","title":"Cartesian Product of a List of Lists","body":"<p>Guava has a utility method which returns a cartesian product of the given list of sets: <a href=\"http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/collect/Sets.html#cartesianProduct(java.util.List)\" rel=\"nofollow\">Sets.cartesianProduct</a>.</p>\n"},{"tags":[],"owner":{"account_id":2665129,"reputation":2351,"user_id":3605029,"accept_rate":55,"display_name":"sujithvm"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1476869311,"creation_date":1476869311,"answer_id":40127389,"question_id":9591561,"body_markdown":"You can generate the combinations recursively. \r\n\r\n    public class Main {\r\n    \tpublic static void main(String[] args) {\r\n    \t\tint[][] arr = new int[][] { { 1, 2, 3 }, { 3, 2 }, { 5, 6, 7 } };\r\n    \t\tcartesianProduct(arr, 0, new int[arr.length]);\r\n    \t}\r\n    \r\n    \tprivate static void cartesianProduct(int[][] arr, int level, int[] cp) {\r\n    \t\tif (level == arr.length) {\r\n    \t\t\tfor (int x : cp)\r\n    \t\t\t\tSystem.out.print(x + &quot; &quot;);\r\n    \t\t\tSystem.out.println();\r\n    \t\t\treturn;\r\n    \t\t}\r\n    \r\n    \t\tfor (int i = 0; i &lt; arr[level].length; i++) {\r\n    \t\t\tcp[level] = arr[level][i];\r\n    \t\t\tcartesianProduct(arr, level + 1, cp);\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\nOutput : \r\n\r\n    1 3 5 \r\n    1 3 6 \r\n    1 3 7 \r\n    1 2 5 \r\n    1 2 6 \r\n    1 2 7 \r\n    2 3 5 \r\n    2 3 6 \r\n    2 3 7 \r\n    2 2 5 \r\n    2 2 6 \r\n    2 2 7 \r\n    3 3 5 \r\n    3 3 6 \r\n    3 3 7 \r\n    3 2 5 \r\n    3 2 6 \r\n    3 2 7 \r\n\r\n","title":"Cartesian Product of a List of Lists","body":"<p>You can generate the combinations recursively. </p>\n\n<pre><code>public class Main {\n    public static void main(String[] args) {\n        int[][] arr = new int[][] { { 1, 2, 3 }, { 3, 2 }, { 5, 6, 7 } };\n        cartesianProduct(arr, 0, new int[arr.length]);\n    }\n\n    private static void cartesianProduct(int[][] arr, int level, int[] cp) {\n        if (level == arr.length) {\n            for (int x : cp)\n                System.out.print(x + \" \");\n            System.out.println();\n            return;\n        }\n\n        for (int i = 0; i &lt; arr[level].length; i++) {\n            cp[level] = arr[level][i];\n            cartesianProduct(arr, level + 1, cp);\n        }\n    }\n}\n</code></pre>\n\n<p>Output : </p>\n\n<pre><code>1 3 5 \n1 3 6 \n1 3 7 \n1 2 5 \n1 2 6 \n1 2 7 \n2 3 5 \n2 3 6 \n2 3 7 \n2 2 5 \n2 2 6 \n2 2 7 \n3 3 5 \n3 3 6 \n3 3 7 \n3 2 5 \n3 2 6 \n3 2 7 \n</code></pre>\n"},{"tags":[],"owner":{"account_id":6869002,"reputation":887,"user_id":5280195,"accept_rate":20,"display_name":"ankushbbbr"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1574929926,"creation_date":1574929926,"answer_id":59084579,"question_id":9591561,"body_markdown":"Recursive solution:\r\n\r\n    public &lt;T&gt; List&lt;List&lt;T&gt;&gt; cartesianProduct(int i, List&lt;T&gt;... a) {\r\n        if(i == a.length ) {\r\n            List&lt;List&lt;T&gt;&gt; result = new ArrayList&lt;&gt;();\r\n            result.add(new ArrayList());\r\n            return result;\r\n        }\r\n        List&lt;List&lt;T&gt;&gt; next = cartesianProduct(i+1, a);\r\n        List&lt;List&lt;T&gt;&gt; result = new ArrayList&lt;&gt;();\r\n        for(int j=0; j &lt; a[i].size(); j++) {\r\n            for(int k=0; k &lt; next.size(); k++) {\r\n                List&lt;T&gt; concat = new ArrayList();\r\n                concat.add(a[i].get(j));\r\n                concat.addAll(next.get(k));\r\n                result.add(concat);\r\n            }\r\n        }\r\n        return result;\r\n    }","title":"Cartesian Product of a List of Lists","body":"<p>Recursive solution:</p>\n\n<pre><code>public &lt;T&gt; List&lt;List&lt;T&gt;&gt; cartesianProduct(int i, List&lt;T&gt;... a) {\n    if(i == a.length ) {\n        List&lt;List&lt;T&gt;&gt; result = new ArrayList&lt;&gt;();\n        result.add(new ArrayList());\n        return result;\n    }\n    List&lt;List&lt;T&gt;&gt; next = cartesianProduct(i+1, a);\n    List&lt;List&lt;T&gt;&gt; result = new ArrayList&lt;&gt;();\n    for(int j=0; j &lt; a[i].size(); j++) {\n        for(int k=0; k &lt; next.size(); k++) {\n            List&lt;T&gt; concat = new ArrayList();\n            concat.add(a[i].get(j));\n            concat.addAll(next.get(k));\n            result.add(concat);\n        }\n    }\n    return result;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11076006,"reputation":390,"user_id":8132714,"display_name":"shashi ranjan"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1658406068,"creation_date":1603792662,"answer_id":64551980,"question_id":9591561,"body_markdown":"Thanks to Vitalii Fedorenko, I could achive the same for list by using\r\n\r\n    Lists.cartesianProduct(..) \r\n\r\nfrom https://guava.dev/releases/23.5-jre/api/docs/com/google/common/collect/Lists.html#cartesianProduct-java.util.List...-\r\n\r\nI think, if it is required for a production code then it is better to rely on tried and tested library like Guava rather than building our own.","title":"Cartesian Product of a List of Lists","body":"<p>Thanks to Vitalii Fedorenko, I could achive the same for list by using</p>\n<pre><code>Lists.cartesianProduct(..) \n</code></pre>\n<p>from <a href=\"https://guava.dev/releases/23.5-jre/api/docs/com/google/common/collect/Lists.html#cartesianProduct-java.util.List...-\" rel=\"nofollow noreferrer\">https://guava.dev/releases/23.5-jre/api/docs/com/google/common/collect/Lists.html#cartesianProduct-java.util.List...-</a></p>\n<p>I think, if it is required for a production code then it is better to rely on tried and tested library like Guava rather than building our own.</p>\n"}],"owner":{"account_id":19804,"reputation":5310,"user_id":46717,"accept_rate":95,"display_name":"Chris Drappier"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":25193,"favorite_count":0,"down_vote_count":0,"up_vote_count":25,"accepted_answer_id":9591777,"answer_count":12,"score":25,"last_activity_date":1658406068,"creation_date":1331066609,"question_id":9591561,"body_markdown":"I have a problem that is really kind of a general programming question, but my implementation is in Java, so I will provide my examples that way\r\n\r\nI have a class like this:\r\n```java\r\npublic class Foo {\r\n    LinkedHashMap&lt;String, Vector&lt;String&gt;&gt; dataStructure;\r\n\r\n    public Foo(LinkedHashMap&lt;String, Vector&lt;String&gt;&gt; dataStructure) {\r\n        this.dataStructure = dataStructure;\r\n    }\r\n\r\n    public String[][] allUniqueCombinations() {\r\n        //this is what I need to do\r\n    }\r\n}\r\n```\r\nI need to generate a nested array from my `LinkedHashMap` that represents every unique combination of all values in the LHM. for example, if my LHM looks like this (pseudocode, but I think you can get the idea..):\r\n```\r\n{&quot;foo&quot; =&gt; [&quot;1&quot;,&quot;2&quot;,&quot;3&quot;], &quot;bar&quot; =&gt; [&quot;3&quot;,&quot;2&quot;], &quot;baz&quot; =&gt; [&quot;5&quot;,&quot;6&quot;,&quot;7&quot;]};\r\n```\r\nthen my `String[][]` should look like this:\r\n```\r\n{\r\n   {&quot;foo&quot;,&quot;bar&quot;,&quot;baz&quot;},\r\n   {&quot;1&quot;,&quot;3&quot;,&quot;5&quot;},\r\n   {&quot;1&quot;,&quot;2&quot;,&quot;5&quot;},\r\n   {&quot;1&quot;,&quot;3&quot;,&quot;6&quot;},\r\n   {&quot;1&quot;,&quot;2&quot;,&quot;6&quot;},\r\n   {&quot;1&quot;,&quot;3&quot;,&quot;7&quot;},\r\n   {&quot;1&quot;,&quot;2&quot;,&quot;7&quot;},\r\n   {&quot;2&quot;,&quot;3&quot;,&quot;5&quot;},\r\n   {&quot;2&quot;,&quot;2&quot;,&quot;5&quot;},\r\n   {&quot;2&quot;,&quot;3&quot;,&quot;6&quot;},\r\n   {&quot;2&quot;,&quot;2&quot;,&quot;6&quot;},\r\n   {&quot;2&quot;,&quot;3&quot;,&quot;7&quot;},\r\n   {&quot;2&quot;,&quot;2&quot;,&quot;7&quot;},\r\n   {&quot;3&quot;,&quot;3&quot;,&quot;5&quot;},\r\n   {&quot;3&quot;,&quot;2&quot;,&quot;5&quot;},\r\n   {&quot;3&quot;,&quot;3&quot;,&quot;6&quot;},\r\n   {&quot;3&quot;,&quot;2&quot;,&quot;6&quot;},\r\n   {&quot;3&quot;,&quot;3&quot;,&quot;7&quot;},\r\n   {&quot;3&quot;,&quot;2&quot;,&quot;7&quot;},\r\n}\r\n```\r\nI think that&#39;s all of them, I made that manually (obviously) so I might have missed a set, but I think this illustrates what I&#39;m trying to do. It doesn&#39;t matter what order each set comes in, so long as all unique combinations are present. Also to be clear, you don&#39;t know how many elements are in the LHM, nor how many elements are in each subsequent Vector.  I have found answers that match the case where you want every unique combination of all elements in a single array, but nothing that fits this exactly.\r\n\r\n**Update:** I changed my types to strings because my real world example is actually strings. I was trying to use integers to make the example more readable, but the answers I&#39;ve gotten so far do not translate well to strings.  So, yes they are numbers, but in my actual case, they will be strings that wouldn&#39;t make much sense to anyone but people who use this particular application. so, this is just an abstraction of it.\r\n","title":"Cartesian Product of a List of Lists","body":"<p>I have a problem that is really kind of a general programming question, but my implementation is in Java, so I will provide my examples that way</p>\n<p>I have a class like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Foo {\n    LinkedHashMap&lt;String, Vector&lt;String&gt;&gt; dataStructure;\n\n    public Foo(LinkedHashMap&lt;String, Vector&lt;String&gt;&gt; dataStructure) {\n        this.dataStructure = dataStructure;\n    }\n\n    public String[][] allUniqueCombinations() {\n        //this is what I need to do\n    }\n}\n</code></pre>\n<p>I need to generate a nested array from my <code>LinkedHashMap</code> that represents every unique combination of all values in the LHM. for example, if my LHM looks like this (pseudocode, but I think you can get the idea..):</p>\n<pre><code>{&quot;foo&quot; =&gt; [&quot;1&quot;,&quot;2&quot;,&quot;3&quot;], &quot;bar&quot; =&gt; [&quot;3&quot;,&quot;2&quot;], &quot;baz&quot; =&gt; [&quot;5&quot;,&quot;6&quot;,&quot;7&quot;]};\n</code></pre>\n<p>then my <code>String[][]</code> should look like this:</p>\n<pre><code>{\n   {&quot;foo&quot;,&quot;bar&quot;,&quot;baz&quot;},\n   {&quot;1&quot;,&quot;3&quot;,&quot;5&quot;},\n   {&quot;1&quot;,&quot;2&quot;,&quot;5&quot;},\n   {&quot;1&quot;,&quot;3&quot;,&quot;6&quot;},\n   {&quot;1&quot;,&quot;2&quot;,&quot;6&quot;},\n   {&quot;1&quot;,&quot;3&quot;,&quot;7&quot;},\n   {&quot;1&quot;,&quot;2&quot;,&quot;7&quot;},\n   {&quot;2&quot;,&quot;3&quot;,&quot;5&quot;},\n   {&quot;2&quot;,&quot;2&quot;,&quot;5&quot;},\n   {&quot;2&quot;,&quot;3&quot;,&quot;6&quot;},\n   {&quot;2&quot;,&quot;2&quot;,&quot;6&quot;},\n   {&quot;2&quot;,&quot;3&quot;,&quot;7&quot;},\n   {&quot;2&quot;,&quot;2&quot;,&quot;7&quot;},\n   {&quot;3&quot;,&quot;3&quot;,&quot;5&quot;},\n   {&quot;3&quot;,&quot;2&quot;,&quot;5&quot;},\n   {&quot;3&quot;,&quot;3&quot;,&quot;6&quot;},\n   {&quot;3&quot;,&quot;2&quot;,&quot;6&quot;},\n   {&quot;3&quot;,&quot;3&quot;,&quot;7&quot;},\n   {&quot;3&quot;,&quot;2&quot;,&quot;7&quot;},\n}\n</code></pre>\n<p>I think that's all of them, I made that manually (obviously) so I might have missed a set, but I think this illustrates what I'm trying to do. It doesn't matter what order each set comes in, so long as all unique combinations are present. Also to be clear, you don't know how many elements are in the LHM, nor how many elements are in each subsequent Vector.  I have found answers that match the case where you want every unique combination of all elements in a single array, but nothing that fits this exactly.</p>\n<p><strong>Update:</strong> I changed my types to strings because my real world example is actually strings. I was trying to use integers to make the example more readable, but the answers I've gotten so far do not translate well to strings.  So, yes they are numbers, but in my actual case, they will be strings that wouldn't make much sense to anyone but people who use this particular application. so, this is just an abstraction of it.</p>\n"},{"tags":["java","arraylist","collections"],"comments":[{"owner":{"account_id":11901543,"reputation":2366,"user_id":8709389,"accept_rate":14,"display_name":"zhh"},"score":0,"creation_date":1533018330,"post_id":51606628,"comment_id":90178552,"body_markdown":"Sort, then take first, second, thrid, fourth...","body":"Sort, then take first, second, thrid, fourth..."},{"owner":{"account_id":3557648,"reputation":8235,"user_id":2970960,"accept_rate":43,"display_name":"Jai"},"score":1,"creation_date":1533018478,"post_id":51606628,"comment_id":90178621,"body_markdown":"You already did 95% of the complex work here, and you couldn&#39;t find how to do the remaining 5%, which is to sort and get the n-th element.","body":"You already did 95% of the complex work here, and you couldn&#39;t find how to do the remaining 5%, which is to sort and get the n-th element."},{"owner":{"account_id":13989967,"reputation":1,"user_id":10104145,"display_name":"Vinodh Kumar"},"score":0,"creation_date":1533018701,"post_id":51606628,"comment_id":90178744,"body_markdown":"Sir, Can you explain In detail!","body":"Sir, Can you explain In detail!"},{"owner":{"account_id":5144424,"reputation":2664,"user_id":4337151,"display_name":"dehasi"},"score":0,"creation_date":1533022732,"post_id":51606628,"comment_id":90180800,"body_markdown":"have you looked at `heap`?","body":"have you looked at <code>heap</code>?"}],"answers":[{"tags":[],"owner":{"account_id":13929428,"reputation":1,"user_id":10057939,"display_name":"Mario Lengauer"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1533018455,"creation_date":1533018455,"answer_id":51606707,"question_id":51606628,"body_markdown":"Search again the max without the first max, so you get the second max.","title":"How can I call second largest number from arrayList using collections","body":"<p>Search again the max without the first max, so you get the second max.</p>\n"},{"tags":[],"owner":{"account_id":8886305,"reputation":1872,"user_id":6634462,"accept_rate":0,"display_name":"Ravindra Kumar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1533018681,"creation_date":1533018681,"answer_id":51606768,"question_id":51606628,"body_markdown":"Try this code:- \r\n\r\n\r\n    Collections.sort(electionresdashlist);\r\n    \t\t\t\t\t\t \r\n    System.out.println( &quot;maxPartyid:::&quot;+electionresdashlist.get(0).getPartyNamesDTO());\r\n    System.out.println( &quot;2nd maxPartyid:::&quot;+electionresdashlist.get(1).getPartyNamesDTO());\r\n    System.out.println( &quot;3rd maxPartyid:::&quot;+electionresdashlist.get(2).getPartyNamesDTO());\r\n    \r\n                 \r\n    in DTO :\r\n    public class PartyNamesDTO implements Comparable&lt;PartyNamesDTO&gt;{\r\n    \r\n    \tprivate String partyId;\r\n    \tpublic String getPartyId() {\r\n    \t\treturn partyId;\r\n    \t}\r\n    \tpublic void setPartyId(String partyId) {\r\n    \t\tthis.partyId = partyId;\r\n    \t}\r\n    \tprivate Integer votes;\r\n    \t\r\n    \t\r\n    \tpublic Integer getVotes() {\r\n    \t\treturn votes;\r\n    \t}\r\n    \tpublic void setVotes(Integer votes) {\r\n    \t\tthis.votes = votes;\r\n    \t}\r\n    \t\r\n    \t@Override\r\n            public int compareTo(PartyNamesDTO emp) {\r\n                return this.votes.compareTo(emp.getVotes());\r\n            }\r\n    \t\r\n            public String toString(){\r\n                return partyId;\r\n            }\r\n    }  \r\n\r\n      \r\n             ","title":"How can I call second largest number from arrayList using collections","body":"<p>Try this code:- </p>\n\n<pre><code>Collections.sort(electionresdashlist);\n\nSystem.out.println( \"maxPartyid:::\"+electionresdashlist.get(0).getPartyNamesDTO());\nSystem.out.println( \"2nd maxPartyid:::\"+electionresdashlist.get(1).getPartyNamesDTO());\nSystem.out.println( \"3rd maxPartyid:::\"+electionresdashlist.get(2).getPartyNamesDTO());\n\n\nin DTO :\npublic class PartyNamesDTO implements Comparable&lt;PartyNamesDTO&gt;{\n\n    private String partyId;\n    public String getPartyId() {\n        return partyId;\n    }\n    public void setPartyId(String partyId) {\n        this.partyId = partyId;\n    }\n    private Integer votes;\n\n\n    public Integer getVotes() {\n        return votes;\n    }\n    public void setVotes(Integer votes) {\n        this.votes = votes;\n    }\n\n    @Override\n        public int compareTo(PartyNamesDTO emp) {\n            return this.votes.compareTo(emp.getVotes());\n        }\n\n        public String toString(){\n            return partyId;\n        }\n}  \n</code></pre>\n"},{"tags":[],"owner":{"account_id":10045730,"reputation":554,"user_id":7427212,"display_name":"Mohammad Faraz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1533018795,"creation_date":1533018795,"answer_id":51606796,"question_id":51606628,"body_markdown":"    long largest=0, secondLargest=-1, thirdLargest=-2;\r\n    listName.forEach(item -&gt; {\r\n    if(item &gt; largest) {\r\n        thirdLargest = secondLargest\r\n        secondLargest = largest;\r\n        largest = list.get(i);\r\n      }\r\n      if(item &gt; secondLargest &amp;&amp; item != largest) {\r\n       thirdLargest = secondLargest; \r\n       secondLargest = item;\r\n      }\r\n      if(item&gt;thirdLargest &amp;&amp; item != secondLargest) {\r\n       thirdLargest = item;\r\n      }\r\n    });\r\n\r\n\r\nOther approach is using comparator arrange the list elements based on no of votes and top 3 will give you your results","title":"How can I call second largest number from arrayList using collections","body":"<pre><code>long largest=0, secondLargest=-1, thirdLargest=-2;\nlistName.forEach(item -&gt; {\nif(item &gt; largest) {\n    thirdLargest = secondLargest\n    secondLargest = largest;\n    largest = list.get(i);\n  }\n  if(item &gt; secondLargest &amp;&amp; item != largest) {\n   thirdLargest = secondLargest; \n   secondLargest = item;\n  }\n  if(item&gt;thirdLargest &amp;&amp; item != secondLargest) {\n   thirdLargest = item;\n  }\n});\n</code></pre>\n\n<p>Other approach is using comparator arrange the list elements based on no of votes and top 3 will give you your results</p>\n"},{"tags":[],"owner":{"account_id":13798611,"reputation":37875,"user_id":9959152,"display_name":"Ryuzaki L"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1533019027,"creation_date":1533019027,"answer_id":51606854,"question_id":51606628,"body_markdown":"Since you implemented the `Comparable` interface on `PartyNamesDTO` you can just do \r\n\r\n    Collections.sort(electionresdashlist)\r\nwhich will make your list sorted according to `compareTo` logic and if your sorting is ascending order then you can get max record as\r\n\r\n    electionresdashlist.get(electionresdashlist.size()-1);\r\n    electionresdashlist.get(electionresdashlist.size()-2);\r\n    electionresdashlist.get(electionresdashlist.size()-3);\r\nand if it is descending order the other way around","title":"How can I call second largest number from arrayList using collections","body":"<p>Since you implemented the <code>Comparable</code> interface on <code>PartyNamesDTO</code> you can just do </p>\n\n<pre><code>Collections.sort(electionresdashlist)\n</code></pre>\n\n<p>which will make your list sorted according to <code>compareTo</code> logic and if your sorting is ascending order then you can get max record as</p>\n\n<pre><code>electionresdashlist.get(electionresdashlist.size()-1);\nelectionresdashlist.get(electionresdashlist.size()-2);\nelectionresdashlist.get(electionresdashlist.size()-3);\n</code></pre>\n\n<p>and if it is descending order the other way around</p>\n"},{"tags":[],"owner":{"account_id":5144424,"reputation":2664,"user_id":4337151,"display_name":"dehasi"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1533023433,"creation_date":1533023433,"answer_id":51608124,"question_id":51606628,"body_markdown":"You can use java 8 streams to sort and skip unnecessary elements\r\n\r\n    list.stream().sorted(Comparator.reverseOrder()).limit(2).skip(1).findFirst()\r\n\r\n`findFirst()` returns an `Optional&lt;T&gt;` of your object.","title":"How can I call second largest number from arrayList using collections","body":"<p>You can use java 8 streams to sort and skip unnecessary elements</p>\n\n<pre><code>list.stream().sorted(Comparator.reverseOrder()).limit(2).skip(1).findFirst()\n</code></pre>\n\n<p><code>findFirst()</code> returns an <code>Optional&lt;T&gt;</code> of your object.</p>\n"},{"tags":[],"owner":{"account_id":6696763,"reputation":51,"user_id":5164560,"display_name":"Saheb"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1579853435,"creation_date":1579853435,"answer_id":59892575,"question_id":51606628,"body_markdown":"    static void getKthHighest(List&lt;Integer&gt; list, int k) {\r\n\t\tOptional&lt;Integer&gt; element = list.stream().sorted(Collections.reverseOrder()).limit(k).skip(k - 1).findFirst();\r\n\t\tif(element.isPresent()) {\r\n\t\t\tSystem.out.println(element.get());\r\n\t\t}\r\n\t}","title":"How can I call second largest number from arrayList using collections","body":"<pre><code>static void getKthHighest(List&lt;Integer&gt; list, int k) {\n    Optional&lt;Integer&gt; element = list.stream().sorted(Collections.reverseOrder()).limit(k).skip(k - 1).findFirst();\n    if(element.isPresent()) {\n        System.out.println(element.get());\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16927737,"reputation":11,"user_id":12242925,"display_name":"jlmv dxb"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1595376139,"creation_date":1595353359,"answer_id":63020115,"question_id":51606628,"body_markdown":"    get last -1\r\n    PartyNamesDTO tmpObj = partyList.stream().sorted(Comparator.reverseOrder()).skip(1).findFirst().get();\r\n    \r\n    get first-1\r\n    PartyNamesDTO tmpObj = partyList.stream().sorted(Comparator.naturalOrder()).skip(1).findFirst().get();\r\n\r\nThis may help you.","title":"How can I call second largest number from arrayList using collections","body":"<pre><code>get last -1\nPartyNamesDTO tmpObj = partyList.stream().sorted(Comparator.reverseOrder()).skip(1).findFirst().get();\n\nget first-1\nPartyNamesDTO tmpObj = partyList.stream().sorted(Comparator.naturalOrder()).skip(1).findFirst().get();\n</code></pre>\n<p>This may help you.</p>\n"},{"tags":[],"owner":{"account_id":11849909,"reputation":1,"user_id":8671509,"display_name":"Susmita"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1622204348,"creation_date":1622204348,"answer_id":67738726,"question_id":51606628,"body_markdown":"    Integer[] arr= {80,19,32,150,2,78};\r\n    IntStream arrstream=Arrays.stream(arr);\r\n    OptionalInt firstmaxNum=stream.max();\r\n\r\n    IntStream secondmaxstream=Arrays.stream(arr);\r\n    OptionalInt secondMaximum=stream1.filter(s-&gt;s!=maxNum.getAsInt()).max();\r\n\r\n    System.out.println(&quot; first maximum number :&quot; +firstmaxNum.getAsInt());\r\n    System.out.println(&quot; second maximum number :&quot; +secondMaximum.getAsInt());}","title":"How can I call second largest number from arrayList using collections","body":"<pre><code>Integer[] arr= {80,19,32,150,2,78};\nIntStream arrstream=Arrays.stream(arr);\nOptionalInt firstmaxNum=stream.max();\n\nIntStream secondmaxstream=Arrays.stream(arr);\nOptionalInt secondMaximum=stream1.filter(s-&gt;s!=maxNum.getAsInt()).max();\n\nSystem.out.println(&quot; first maximum number :&quot; +firstmaxNum.getAsInt());\nSystem.out.println(&quot; second maximum number :&quot; +secondMaximum.getAsInt());}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16526095,"reputation":21,"user_id":11940818,"display_name":"Kamlesh Sharma"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1622312856,"creation_date":1622312856,"answer_id":67754622,"question_id":51606628,"body_markdown":"```\r\nInteger integer2 = numbers.stream().max((x,y)-&gt;x.compareTo(y)).get();\r\n\t\t\r\nInteger integer3 = numbers.stream().filter(x-&gt;x&lt;integer2).max((x,y)-&gt;x.compareTo(y)).get();\r\n\t\t\r\nSystem.out.println(&quot;Second max is: &quot;+integer3);\r\n\t\t","title":"How can I call second largest number from arrayList using collections","body":"<pre><code>Integer integer2 = numbers.stream().max((x,y)-&gt;x.compareTo(y)).get();\n        \nInteger integer3 = numbers.stream().filter(x-&gt;x&lt;integer2).max((x,y)-&gt;x.compareTo(y)).get();\n        \nSystem.out.println(&quot;Second max is: &quot;+integer3);\n        \n</code></pre>\n"},{"tags":[],"owner":{"account_id":22984490,"reputation":71,"user_id":17110888,"display_name":"Amod Kunwar"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1633861106,"creation_date":1633860853,"answer_id":69514255,"question_id":51606628,"body_markdown":"    list.stream().sorted(Collections.reverseOrder()).distinct().limit(2).skip(1).findFirst().get()","title":"How can I call second largest number from arrayList using collections","body":"<pre><code>list.stream().sorted(Collections.reverseOrder()).distinct().limit(2).skip(1).findFirst().get()\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22100088,"reputation":31,"user_id":16356696,"display_name":"Jay Patel"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1644252111,"creation_date":1644217345,"answer_id":71014591,"question_id":51606628,"body_markdown":"I have a simple solution to find an *nth* highest element from the Array List:\r\n```java\r\nArrayList&lt;Integer&gt; arr = new ArrayList&lt;&gt;(Arrays.asList(12,44,76,1,8,9,9));\r\n\r\nint highest = arr.stream().sorted(Collections.reverseOrder()).collect(Collectors.toList()).get(n-1);\r\n```","title":"How can I call second largest number from arrayList using collections","body":"<p>I have a simple solution to find an <em>nth</em> highest element from the Array List:</p>\n<pre class=\"lang-java prettyprint-override\"><code>ArrayList&lt;Integer&gt; arr = new ArrayList&lt;&gt;(Arrays.asList(12,44,76,1,8,9,9));\n\nint highest = arr.stream().sorted(Collections.reverseOrder()).collect(Collectors.toList()).get(n-1);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7990585,"reputation":11,"user_id":6028555,"display_name":"Anil Vighne"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658406010,"creation_date":1658405423,"answer_id":73065929,"question_id":51606628,"body_markdown":"if the list is like below\r\n\r\nList&lt;Integer&gt; numbers = Arrays.asList(5, 9, 11, 2, 8, 21, 1, 21);\r\n&lt;br/&gt;\r\ngetKthHighest(numbers, 2);\r\n\r\n\r\n&lt;pre&gt;\r\nstatic void getKthHighest(List&lt;Integer&gt; list, int k) {\r\n        Optional&lt;Integer&gt; element = list.stream().sorted(Collections.reverseOrder()).distinct().limit(k).skip(k - 1).findFirst();\r\n        if (element.isPresent()) {\r\n            System.out.println(element.get());\r\n        }\r\n    }\r\n&lt;/pre&gt;\r\n\r\n@Saheb provided a good answer but needs to Add distinct() for better results. if 2 no are duplicates then it will help.","title":"How can I call second largest number from arrayList using collections","body":"<p>if the list is like below</p>\n<p>List numbers = Arrays.asList(5, 9, 11, 2, 8, 21, 1, 21);\n<br/>\ngetKthHighest(numbers, 2);</p>\n<pre>\nstatic void getKthHighest(List list, int k) {\n        Optional element = list.stream().sorted(Collections.reverseOrder()).distinct().limit(k).skip(k - 1).findFirst();\n        if (element.isPresent()) {\n            System.out.println(element.get());\n        }\n    }\n</pre>\n<p>@Saheb provided a good answer but needs to Add distinct() for better results. if 2 no are duplicates then it will help.</p>\n"}],"owner":{"account_id":13989967,"reputation":1,"user_id":10104145,"display_name":"Vinodh Kumar"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":22361,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":12,"score":0,"last_activity_date":1658406010,"creation_date":1533018127,"question_id":51606628,"body_markdown":"I need highest, second highest and third highest numbers from my `ArrayList`. I am getting max value (i.e. highest number) by calling `Collections.max()` but I also need the second largest and the third largest values.  \r\nMy Code:\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    maxPartyid = \r\n    Collections.max(electionresdashlist.get(k).getPartyNamesDTO());  //1st Highest\r\n    \t\t\t\t\t\t \r\n    System.out.println( &quot;maxPartyid:::&quot;+maxPartyid);\r\n                 \r\n    in DTO :\r\n    public class PartyNamesDTO implements Comparable&lt;PartyNamesDTO&gt;{\r\n\r\n    \tprivate String partyId;\r\n    \tpublic String getPartyId() {\r\n    \t\treturn partyId;\r\n    \t}\r\n    \tpublic void setPartyId(String partyId) {\r\n    \t\tthis.partyId = partyId;\r\n    \t}\r\n    \tprivate Integer votes;\r\n    \t\r\n    \t\r\n    \tpublic Integer getVotes() {\r\n    \t\treturn votes;\r\n    \t}\r\n    \tpublic void setVotes(Integer votes) {\r\n    \t\tthis.votes = votes;\r\n    \t}\r\n    \t\r\n    \t@Override\r\n            public int compareTo(PartyNamesDTO emp) {\r\n                return this.votes.compareTo(emp.getVotes());\r\n            }\r\n    \t\r\n            public String toString(){\r\n                return partyId;\r\n            }\r\n    }        \r\n                 \r\n                 \r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n ","title":"How can I call second largest number from arrayList using collections","body":"<p>I need highest, second highest and third highest numbers from my <code>ArrayList</code>. I am getting max value (i.e. highest number) by calling <code>Collections.max()</code> but I also need the second largest and the third largest values.<br />\nMy Code:</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>maxPartyid = \nCollections.max(electionresdashlist.get(k).getPartyNamesDTO());  //1st Highest\n                         \nSystem.out.println( \"maxPartyid:::\"+maxPartyid);\n             \nin DTO :\npublic class PartyNamesDTO implements Comparable&lt;PartyNamesDTO&gt;{\n\n    private String partyId;\n    public String getPartyId() {\n        return partyId;\n    }\n    public void setPartyId(String partyId) {\n        this.partyId = partyId;\n    }\n    private Integer votes;\n    \n    \n    public Integer getVotes() {\n        return votes;\n    }\n    public void setVotes(Integer votes) {\n        this.votes = votes;\n    }\n    \n    @Override\n        public int compareTo(PartyNamesDTO emp) {\n            return this.votes.compareTo(emp.getVotes());\n        }\n    \n        public String toString(){\n            return partyId;\n        }\n}        \n             \n             </code></pre>\r\n</div>\r\n</div>\r\n</p>\n"},{"tags":["java","web-services","soap","jax-ws","soapui"],"answers":[{"tags":[],"owner":{"account_id":11432603,"reputation":21,"user_id":8380905,"display_name":"bartosz"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1501232918,"creation_date":1501232918,"answer_id":45369353,"question_id":45347681,"body_markdown":"please enable addressing feature:\r\n\r\n    TerytWs1 teryt = new TerytWs1();\r\n    //teryt.setHandlerResolver(new HeaderHandlerResolver());\r\n    WebServiceFeature wsAddressing = new AddressingFeature(true);\r\n    ITerytWs1 client = teryt.getCustom(wsAddressing);\r\n","title":"Integrating with TERYT - Polish Government web service","body":"<p>please enable addressing feature:</p>\n\n<pre><code>TerytWs1 teryt = new TerytWs1();\n//teryt.setHandlerResolver(new HeaderHandlerResolver());\nWebServiceFeature wsAddressing = new AddressingFeature(true);\nITerytWs1 client = teryt.getCustom(wsAddressing);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12008420,"reputation":1,"user_id":8786009,"display_name":"casmonido"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1508182037,"creation_date":1508177642,"answer_id":46776609,"question_id":45347681,"body_markdown":"I managed to do connect to TERYT using JAX-WS. \r\n\r\nFirst, you need to generate classes for the client using wsimport. Among the generated classes there will be ITerytWs1 and TerytWs1 - they are the only ones of interest to you at this point.\r\nThen you can add the SOAPHandler class to handle the headers, like so:\r\n\r\n    public class TerytHeaderHandler implements SOAPHandler&lt;SOAPMessageContext&gt;\r\n    {\r\n    \tprivate String wsUser;\r\n    \tprivate String wsPassword;\r\n    \r\n    \tpublic TerytHeaderHandler(String wsUser, String wsPassord)\r\n    \t{\r\n    \t\tthis.wsUser = wsUser;\r\n    \t\tthis.wsPassword = wsPassord;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic boolean handleMessage(SOAPMessageContext smc)\r\n    \t{\r\n    \t\tBoolean outboundProperty = (Boolean) smc.get(MessageContext.MESSAGE_OUTBOUND_PROPERTY);\r\n    \t\tif (outboundProperty.booleanValue())\r\n    \t\t{\r\n    \t\t\ttry\r\n    \t\t\t{\r\n    \t\t\t\tSOAPEnvelope envelope = smc.getMessage().getSOAPPart().getEnvelope();\r\n    \t\t\t\tSOAPHeader header = envelope.getHeader(); \r\n    \t\t\t\tSOAPElement security = header.addChildElement(&quot;Security&quot;, &quot;wsse&quot;, \r\n    \t\t\t\t\t\t&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd&quot;);\r\n    \t\t\t\tSOAPElement usernameToken = security.addChildElement(&quot;UsernameToken&quot;, &quot;wsse&quot;);\r\n    \t\t\t\tSOAPElement username = usernameToken.addChildElement(&quot;Username&quot;, &quot;wsse&quot;);\r\n    \t\t\t\tusername.addTextNode(wsUser);\r\n    \t\t\t\tSOAPElement password = usernameToken.addChildElement(&quot;Password&quot;, &quot;wsse&quot;);\r\n    \t\t\t\tpassword.setAttribute(&quot;Type&quot;,\r\n    \t\t\t\t\t\t&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText&quot;);\r\n    \t\t\t\tpassword.addTextNode(wsPassword);\r\n    \t\t\t} catch (Exception e)\r\n    \t\t\t{\r\n    \t\t\t\te.printStackTrace();\r\n    \t\t\t}\r\n    \t\t} else\r\n    \t\t{\r\n    \t\t\t//This handler does nothing with the response from the Web Service\r\n    \t\t\t//even though it should probably check its mustUnderstand headers\r\n    \t\t\tSOAPMessage message = smc.getMessage();\r\n    \t\t}\r\n    \t\treturn outboundProperty;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic boolean handleFault(SOAPMessageContext context)\r\n    \t{\r\n    \t\t// TODO Auto-generated method stub\r\n    \t\treturn false;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void close(MessageContext context)\r\n    \t{\r\n    \t\t// TODO Auto-generated method stub\r\n    \t}\r\n    \r\n    \t// Gets the header blocks that can be processed by this Handler instance.\r\n    \t@Override\r\n    \tpublic Set&lt;QName&gt; getHeaders()\r\n    \t{\r\n            QName securityHeader = new QName(&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd&quot;, \r\n                    &quot;Security&quot;); \r\n            HashSet&lt;QName&gt; headers = new HashSet&lt;QName&gt;(); \r\n            headers.add(securityHeader);         \r\n            return headers; \r\n    \t}\r\n    }\r\n\r\nThen you use it all like this: \r\n\r\n    public class Main {\r\n    public static void main(String[] args) {\r\n    \tITerytWs1 instance = new TerytWs1().getCustom(new AddressingFeature(true));\r\n    \tBinding binding = ((BindingProvider) instance).getBinding();\r\n    \tList&lt;Handler&gt; handlerList = binding.getHandlerChain();\r\n    \tif (handlerList == null)\r\n    \t\thandlerList = new ArrayList&lt;Handler&gt;();\t\r\n    \thandlerList.add(new TerytHeaderHandler(&quot;TestPubliczny&quot;, &quot;1234abcd&quot;));\r\n    \tbinding.setHandlerChain(handlerList);\r\n    \tSystem.out.println(instance.czyZalogowany());\r\n    }\r\n    }\r\n\r\nIn my case, I had a problem with the getHeaders() function. Managed to deal with it thanks to the suggestion on some other question here on StackOverflow.","title":"Integrating with TERYT - Polish Government web service","body":"<p>I managed to do connect to TERYT using JAX-WS. </p>\n\n<p>First, you need to generate classes for the client using wsimport. Among the generated classes there will be ITerytWs1 and TerytWs1 - they are the only ones of interest to you at this point.\nThen you can add the SOAPHandler class to handle the headers, like so:</p>\n\n<pre><code>public class TerytHeaderHandler implements SOAPHandler&lt;SOAPMessageContext&gt;\n{\n    private String wsUser;\n    private String wsPassword;\n\n    public TerytHeaderHandler(String wsUser, String wsPassord)\n    {\n        this.wsUser = wsUser;\n        this.wsPassword = wsPassord;\n    }\n\n    @Override\n    public boolean handleMessage(SOAPMessageContext smc)\n    {\n        Boolean outboundProperty = (Boolean) smc.get(MessageContext.MESSAGE_OUTBOUND_PROPERTY);\n        if (outboundProperty.booleanValue())\n        {\n            try\n            {\n                SOAPEnvelope envelope = smc.getMessage().getSOAPPart().getEnvelope();\n                SOAPHeader header = envelope.getHeader(); \n                SOAPElement security = header.addChildElement(\"Security\", \"wsse\", \n                        \"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd\");\n                SOAPElement usernameToken = security.addChildElement(\"UsernameToken\", \"wsse\");\n                SOAPElement username = usernameToken.addChildElement(\"Username\", \"wsse\");\n                username.addTextNode(wsUser);\n                SOAPElement password = usernameToken.addChildElement(\"Password\", \"wsse\");\n                password.setAttribute(\"Type\",\n                        \"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText\");\n                password.addTextNode(wsPassword);\n            } catch (Exception e)\n            {\n                e.printStackTrace();\n            }\n        } else\n        {\n            //This handler does nothing with the response from the Web Service\n            //even though it should probably check its mustUnderstand headers\n            SOAPMessage message = smc.getMessage();\n        }\n        return outboundProperty;\n    }\n\n    @Override\n    public boolean handleFault(SOAPMessageContext context)\n    {\n        // TODO Auto-generated method stub\n        return false;\n    }\n\n    @Override\n    public void close(MessageContext context)\n    {\n        // TODO Auto-generated method stub\n    }\n\n    // Gets the header blocks that can be processed by this Handler instance.\n    @Override\n    public Set&lt;QName&gt; getHeaders()\n    {\n        QName securityHeader = new QName(\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd\", \n                \"Security\"); \n        HashSet&lt;QName&gt; headers = new HashSet&lt;QName&gt;(); \n        headers.add(securityHeader);         \n        return headers; \n    }\n}\n</code></pre>\n\n<p>Then you use it all like this: </p>\n\n<pre><code>public class Main {\npublic static void main(String[] args) {\n    ITerytWs1 instance = new TerytWs1().getCustom(new AddressingFeature(true));\n    Binding binding = ((BindingProvider) instance).getBinding();\n    List&lt;Handler&gt; handlerList = binding.getHandlerChain();\n    if (handlerList == null)\n        handlerList = new ArrayList&lt;Handler&gt;(); \n    handlerList.add(new TerytHeaderHandler(\"TestPubliczny\", \"1234abcd\"));\n    binding.setHandlerChain(handlerList);\n    System.out.println(instance.czyZalogowany());\n}\n}\n</code></pre>\n\n<p>In my case, I had a problem with the getHeaders() function. Managed to deal with it thanks to the suggestion on some other question here on StackOverflow.</p>\n"}],"owner":{"account_id":1055332,"reputation":2619,"user_id":1058196,"display_name":"msi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1451,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1658405394,"creation_date":1501150168,"question_id":45347681,"body_markdown":"I am trying to connect (without success) to the following WS using Java:\r\n\r\n - Service address - https://uslugaterytws1test.stat.gov.pl/terytws1.svc\r\n - WSDL address -\r\n   https://uslugaterytws1test.stat.gov.pl/wsdl/terytws1.wsdl\r\n - User - TestPubliczny\r\n - Password - 1234abcd\r\n\r\nI tried to use soapui without success. Tried Basic and NTLM authentication, and I always get the following error:\r\n\r\n    &lt;s:Envelope xmlns:s=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot; xmlns:a=&quot;http://www.w3.org/2005/08/addressing&quot;&gt;\r\n       &lt;s:Header&gt;\r\n          &lt;a:Action s:mustUnderstand=&quot;1&quot;&gt;http://www.w3.org/2005/08/addressing/soap/fault&lt;/a:Action&gt;\r\n       &lt;/s:Header&gt;\r\n       &lt;s:Body&gt;\r\n          &lt;s:Fault&gt;\r\n             &lt;faultcode xmlns:a=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd&quot;&gt;a:InvalidSecurity&lt;/faultcode&gt;\r\n             &lt;faultstring xml:lang=&quot;en-US&quot;&gt;An error occurred when verifying security for the message.&lt;/faultstring&gt;\r\n          &lt;/s:Fault&gt;\r\n       &lt;/s:Body&gt;\r\n    &lt;/s:Envelope&gt;\r\n\r\n\r\nThe official instructions for this web service shows following example to connect using C#. I havn&#39;t tested this, but I assume it works correctly.\r\n\r\n    try { \r\n      var proxy = new ChannelFactory&lt;ServiceReferenceWCF.ITerytWs1&gt;(&quot;custom&quot;);\r\n      proxy.Credentials.UserName.UserName = login;\r\n      proxy.Credentials.UserName.Password = haslo;\r\n      var result = proxy.CreateChannel(); \r\n      var test = result.CzyZalogowany(); // should return true if connected correctly\r\n    } catch (Exception ex) { }\r\n\r\nAnd below setting:\r\n\r\n       &lt;client&gt;\r\n          &lt;endpoint address=&quot;https://uslugaterytws1.stat.gov.pl/TerytWs1.svc&quot; binding=&quot;customBinding&quot; bindingConfiguration=&quot;custom&quot; contract=&quot;ServiceReference1.ITerytWs1&quot; name=&quot;custom&quot; /&gt;\r\n       &lt;/client&gt;\r\n       &lt;bindings&gt;\r\n          &lt;customBinding&gt;\r\n             &lt;binding name=&quot;custom&quot;&gt;\r\n                &lt;security defaultAlgorithmSuite=&quot;Default&quot; authenticationMode=&quot;UserNameOverTransport&quot; requireDerivedKeys=&quot;true&quot; includeTimestamp=&quot;true&quot; messageSecurityVersion=&quot;WSSecurity11WSTrustFebruary2005WSSecureConversationFebruary2005WSSecurityPolicy11BasicSecurityProfile10&quot;&gt;\r\n                   &lt;localClientSettings detectReplays=&quot;false&quot; /&gt;\r\n                   &lt;localServiceSettings detectReplays=&quot;false&quot; /&gt;\r\n                &lt;/security&gt;\r\n                &lt;textMessageEncoding messageVersion=&quot;Soap11WSAddressing10&quot; /&gt;\r\n                &lt;httpsTransport maxReceivedMessageSize=&quot;2147483647&quot; maxBufferPoolSize=&quot;2147483647&quot; /&gt;\r\n             &lt;/binding&gt;\r\n          &lt;/customBinding&gt;\r\n       &lt;/bindings&gt;\r\n\r\nSo I tried to connect using Java following way:\r\n\r\n    public static void main(String[] args) {\r\n        try {\r\n            final String wsdlResourcePath = &quot;wsdl/jaxb/teryt/terytws1.wsdl&quot;;\r\n            final String url = &quot;https://uslugaterytws1test.stat.gov.pl/TerytWs1.svc&quot;;\r\n            ITerytWs1 teryt = createSoapEndpoint((wsdlLocation) -&gt; new TerytWs1(wsdlLocation).getCustom(), wsdlResourcePath, url);\r\n            System.out.println(teryt.czyZalogowany());\r\n        } catch (Exception e) { }\r\n    }\r\n\r\n    private static &lt;SOAP&gt; SOAP createSoapEndpoint(SoapCreator&lt;SOAP&gt; soapCreator, String wsdlResourcePath, String url) {\r\n        ClassLoader cl = Thread.currentThread().getContextClassLoader();\r\n        URL wsdlLocation = cl.getResource(wsdlResourcePath);\r\n        SOAP soap = soapCreator.create(wsdlLocation);\r\n\r\n        BindingProvider provider = (BindingProvider) soap;\r\n\r\n        Map&lt;String, Object&gt; context = provider.getRequestContext();\r\n        context.put(BindingProvider.USERNAME_PROPERTY, &quot;TestPubliczny&quot;);\r\n        context.put(BindingProvider.PASSWORD_PROPERTY, &quot;1234abcd&quot;);\r\n        context.put(BindingProvider.ENDPOINT_ADDRESS_PROPERTY, url);\r\n        return soap;\r\n    }\r\n\r\nUnfortunately the code freezes during call &quot;teryt.czyZalogowany()&quot;. Gives no timeout - anything, just processing this line for ever, or is being blocked at it.\r\n\r\nMy Java code produces following warning messages:\r\n\r\n&gt; WARNING: WSP0075: Policy assertion\r\n&gt; &quot;{http://schemas.xmlsoap.org/ws/2005/07/securitypolicy}SignedSupportingTokens&quot;\r\n&gt; was evaluated as &quot;UNKNOWN&quot;. lip 27, 2017 11:58:35 AM\r\n&gt; [com.sun.xml.internal.ws.policy.EffectiveAlternativeSelector] \r\n&gt; selectAlternatives WARNING: WSP0075: Policy assertion\r\n&gt; &quot;{http://schemas.xmlsoap.org/ws/2005/07/securitypolicy}TransportBinding&quot;\r\n&gt; was evaluated as &quot;UNKNOWN&quot;. lip 27, 2017 11:58:35 AM\r\n&gt; [com.sun.xml.internal.ws.policy.EffectiveAlternativeSelector] \r\n&gt; selectAlternatives WARNING: WSP0075: Policy assertion\r\n&gt; &quot;{http://schemas.xmlsoap.org/ws/2005/07/securitypolicy}Trust10&quot; was\r\n&gt; evaluated as &quot;UNKNOWN&quot;. lip 27, 2017 11:58:35 AM\r\n&gt; [com.sun.xml.internal.ws.policy.EffectiveAlternativeSelector] \r\n&gt; selectAlternatives WARNING: WSP0075: Policy assertion\r\n&gt; &quot;{http://schemas.xmlsoap.org/ws/2005/07/securitypolicy}Wss11&quot; was\r\n&gt; evaluated as &quot;UNKNOWN&quot;. lip 27, 2017 11:58:35 AM\r\n&gt; [com.sun.xml.internal.ws.policy.EffectiveAlternativeSelector] \r\n&gt; selectAlternatives WARNING: WSP0075: Policy assertion\r\n&gt; &quot;{http://www.w3.org/2006/05/addressing/wsdl}UsingAddressing&quot; was\r\n&gt; evaluated as &quot;UNKNOWN&quot;. lip 27, 2017 11:58:35 AM\r\n&gt; [com.sun.xml.internal.ws.policy.EffectiveAlternativeSelector] \r\n&gt; selectAlternatives WARNING: WSP0019: Suboptimal policy alternative\r\n&gt; selected on the client side with fitness &quot;UNKNOWN&quot;.\r\n\r\n\r\nPerhaps someone knows more about this kind of problem, or will be able to connect to this WS straight away with his own config - at the moment I don&#39;t have a single clue what could be the issue, and I see a &quot;time-wasting&quot; perspective in front of me... so please help.","title":"Integrating with TERYT - Polish Government web service","body":"<p>I am trying to connect (without success) to the following WS using Java:</p>\n\n<ul>\n<li>Service address - <a href=\"https://uslugaterytws1test.stat.gov.pl/terytws1.svc\" rel=\"nofollow noreferrer\">https://uslugaterytws1test.stat.gov.pl/terytws1.svc</a></li>\n<li>WSDL address -\n<a href=\"https://uslugaterytws1test.stat.gov.pl/wsdl/terytws1.wsdl\" rel=\"nofollow noreferrer\">https://uslugaterytws1test.stat.gov.pl/wsdl/terytws1.wsdl</a></li>\n<li>User - TestPubliczny</li>\n<li>Password - 1234abcd</li>\n</ul>\n\n<p>I tried to use soapui without success. Tried Basic and NTLM authentication, and I always get the following error:</p>\n\n<pre><code>&lt;s:Envelope xmlns:s=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:a=\"http://www.w3.org/2005/08/addressing\"&gt;\n   &lt;s:Header&gt;\n      &lt;a:Action s:mustUnderstand=\"1\"&gt;http://www.w3.org/2005/08/addressing/soap/fault&lt;/a:Action&gt;\n   &lt;/s:Header&gt;\n   &lt;s:Body&gt;\n      &lt;s:Fault&gt;\n         &lt;faultcode xmlns:a=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd\"&gt;a:InvalidSecurity&lt;/faultcode&gt;\n         &lt;faultstring xml:lang=\"en-US\"&gt;An error occurred when verifying security for the message.&lt;/faultstring&gt;\n      &lt;/s:Fault&gt;\n   &lt;/s:Body&gt;\n&lt;/s:Envelope&gt;\n</code></pre>\n\n<p>The official instructions for this web service shows following example to connect using C#. I havn't tested this, but I assume it works correctly.</p>\n\n<pre><code>try { \n  var proxy = new ChannelFactory&lt;ServiceReferenceWCF.ITerytWs1&gt;(\"custom\");\n  proxy.Credentials.UserName.UserName = login;\n  proxy.Credentials.UserName.Password = haslo;\n  var result = proxy.CreateChannel(); \n  var test = result.CzyZalogowany(); // should return true if connected correctly\n} catch (Exception ex) { }\n</code></pre>\n\n<p>And below setting:</p>\n\n<pre><code>   &lt;client&gt;\n      &lt;endpoint address=\"https://uslugaterytws1.stat.gov.pl/TerytWs1.svc\" binding=\"customBinding\" bindingConfiguration=\"custom\" contract=\"ServiceReference1.ITerytWs1\" name=\"custom\" /&gt;\n   &lt;/client&gt;\n   &lt;bindings&gt;\n      &lt;customBinding&gt;\n         &lt;binding name=\"custom\"&gt;\n            &lt;security defaultAlgorithmSuite=\"Default\" authenticationMode=\"UserNameOverTransport\" requireDerivedKeys=\"true\" includeTimestamp=\"true\" messageSecurityVersion=\"WSSecurity11WSTrustFebruary2005WSSecureConversationFebruary2005WSSecurityPolicy11BasicSecurityProfile10\"&gt;\n               &lt;localClientSettings detectReplays=\"false\" /&gt;\n               &lt;localServiceSettings detectReplays=\"false\" /&gt;\n            &lt;/security&gt;\n            &lt;textMessageEncoding messageVersion=\"Soap11WSAddressing10\" /&gt;\n            &lt;httpsTransport maxReceivedMessageSize=\"2147483647\" maxBufferPoolSize=\"2147483647\" /&gt;\n         &lt;/binding&gt;\n      &lt;/customBinding&gt;\n   &lt;/bindings&gt;\n</code></pre>\n\n<p>So I tried to connect using Java following way:</p>\n\n<pre><code>public static void main(String[] args) {\n    try {\n        final String wsdlResourcePath = \"wsdl/jaxb/teryt/terytws1.wsdl\";\n        final String url = \"https://uslugaterytws1test.stat.gov.pl/TerytWs1.svc\";\n        ITerytWs1 teryt = createSoapEndpoint((wsdlLocation) -&gt; new TerytWs1(wsdlLocation).getCustom(), wsdlResourcePath, url);\n        System.out.println(teryt.czyZalogowany());\n    } catch (Exception e) { }\n}\n\nprivate static &lt;SOAP&gt; SOAP createSoapEndpoint(SoapCreator&lt;SOAP&gt; soapCreator, String wsdlResourcePath, String url) {\n    ClassLoader cl = Thread.currentThread().getContextClassLoader();\n    URL wsdlLocation = cl.getResource(wsdlResourcePath);\n    SOAP soap = soapCreator.create(wsdlLocation);\n\n    BindingProvider provider = (BindingProvider) soap;\n\n    Map&lt;String, Object&gt; context = provider.getRequestContext();\n    context.put(BindingProvider.USERNAME_PROPERTY, \"TestPubliczny\");\n    context.put(BindingProvider.PASSWORD_PROPERTY, \"1234abcd\");\n    context.put(BindingProvider.ENDPOINT_ADDRESS_PROPERTY, url);\n    return soap;\n}\n</code></pre>\n\n<p>Unfortunately the code freezes during call \"teryt.czyZalogowany()\". Gives no timeout - anything, just processing this line for ever, or is being blocked at it.</p>\n\n<p>My Java code produces following warning messages:</p>\n\n<blockquote>\n  <p>WARNING: WSP0075: Policy assertion\n  \"{<a href=\"http://schemas.xmlsoap.org/ws/2005/07/securitypolicy\" rel=\"nofollow noreferrer\">http://schemas.xmlsoap.org/ws/2005/07/securitypolicy</a>}SignedSupportingTokens\"\n  was evaluated as \"UNKNOWN\". lip 27, 2017 11:58:35 AM\n  [com.sun.xml.internal.ws.policy.EffectiveAlternativeSelector] \n  selectAlternatives WARNING: WSP0075: Policy assertion\n  \"{<a href=\"http://schemas.xmlsoap.org/ws/2005/07/securitypolicy\" rel=\"nofollow noreferrer\">http://schemas.xmlsoap.org/ws/2005/07/securitypolicy</a>}TransportBinding\"\n  was evaluated as \"UNKNOWN\". lip 27, 2017 11:58:35 AM\n  [com.sun.xml.internal.ws.policy.EffectiveAlternativeSelector] \n  selectAlternatives WARNING: WSP0075: Policy assertion\n  \"{<a href=\"http://schemas.xmlsoap.org/ws/2005/07/securitypolicy\" rel=\"nofollow noreferrer\">http://schemas.xmlsoap.org/ws/2005/07/securitypolicy</a>}Trust10\" was\n  evaluated as \"UNKNOWN\". lip 27, 2017 11:58:35 AM\n  [com.sun.xml.internal.ws.policy.EffectiveAlternativeSelector] \n  selectAlternatives WARNING: WSP0075: Policy assertion\n  \"{<a href=\"http://schemas.xmlsoap.org/ws/2005/07/securitypolicy\" rel=\"nofollow noreferrer\">http://schemas.xmlsoap.org/ws/2005/07/securitypolicy</a>}Wss11\" was\n  evaluated as \"UNKNOWN\". lip 27, 2017 11:58:35 AM\n  [com.sun.xml.internal.ws.policy.EffectiveAlternativeSelector] \n  selectAlternatives WARNING: WSP0075: Policy assertion\n  \"{<a href=\"http://www.w3.org/2006/05/addressing/wsdl\" rel=\"nofollow noreferrer\">http://www.w3.org/2006/05/addressing/wsdl</a>}UsingAddressing\" was\n  evaluated as \"UNKNOWN\". lip 27, 2017 11:58:35 AM\n  [com.sun.xml.internal.ws.policy.EffectiveAlternativeSelector] \n  selectAlternatives WARNING: WSP0019: Suboptimal policy alternative\n  selected on the client side with fitness \"UNKNOWN\".</p>\n</blockquote>\n\n<p>Perhaps someone knows more about this kind of problem, or will be able to connect to this WS straight away with his own config - at the moment I don't have a single clue what could be the issue, and I see a \"time-wasting\" perspective in front of me... so please help.</p>\n"},{"tags":["java","mysql","spring-boot","api","hibernate"],"comments":[{"owner":{"account_id":9571720,"reputation":6305,"user_id":7109162,"accept_rate":84,"display_name":"XtremeBaumer"},"score":1,"creation_date":1658404581,"post_id":73065648,"comment_id":129046053,"body_markdown":"Hibernate is not the tool for this. You would need to either update a class file or an XML file at runtime. The issue is that this is then only available to that specific user. At best you can let the user alter the table, but propagating it to hibernate/java code isn&#39;t feasible at all","body":"Hibernate is not the tool for this. You would need to either update a class file or an XML file at runtime. The issue is that this is then only available to that specific user. At best you can let the user alter the table, but propagating it to hibernate/java code isn&#39;t feasible at all"},{"owner":{"account_id":208830,"reputation":10240,"user_id":459557,"display_name":"vanje"},"score":0,"creation_date":1658413571,"post_id":73065648,"comment_id":129050075,"body_markdown":"If your program is not specifically designed to manage database schemas, then wanting the user to dynamically add additional columns themselves usually means that your data model needs improvement.","body":"If your program is not specifically designed to manage database schemas, then wanting the user to dynamically add additional columns themselves usually means that your data model needs improvement."}],"answers":[{"tags":[],"owner":{"account_id":3954011,"reputation":47,"user_id":3263231,"display_name":"styp"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1658405256,"creation_date":1658405256,"answer_id":73065885,"question_id":73065648,"body_markdown":"What you are specifically asking here would need changes to your entities during runtime, and that is not possible. You can achieve a similar solution by adding one additional column `customerAttributes` to the `User` table and store that information as map:\r\n\r\n```\r\n@Convert(converter = HashMapConverter.class)\r\nprivate Map&lt;String, Object&gt; customerAttributes;\r\n```\r\n\r\nThere is a good tutorial for that: https://www.baeldung.com/hibernate-persist-json-object","title":"How to dynamically add columns in Database?","body":"<p>What you are specifically asking here would need changes to your entities during runtime, and that is not possible. You can achieve a similar solution by adding one additional column <code>customerAttributes</code> to the <code>User</code> table and store that information as map:</p>\n<pre><code>@Convert(converter = HashMapConverter.class)\nprivate Map&lt;String, Object&gt; customerAttributes;\n</code></pre>\n<p>There is a good tutorial for that: <a href=\"https://www.baeldung.com/hibernate-persist-json-object\" rel=\"nofollow noreferrer\">https://www.baeldung.com/hibernate-persist-json-object</a></p>\n"}],"owner":{"account_id":18395236,"reputation":1,"user_id":13399886,"display_name":"Hunain Ali Abbasi"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":461,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1658533319,"answer_count":1,"score":0,"last_activity_date":1658405256,"creation_date":1658404136,"question_id":73065648,"body_markdown":"I have a spring boot project with Mysql &amp; Hibernate, all I need is to provide a privilege to the user to change or alter columns of the database dynamically(runtime), I haven&#39;t found any good approach for that XML approach is quite hectic and will require a lot changes to be made.\r\n\r\nExample:\r\n\r\nA table User with columns \r\n&quot;Username&quot; &amp; &quot;Password&quot;\r\n\r\nAnd from UI client will add another column &quot;email&quot; so it should make changes in Database table.","title":"How to dynamically add columns in Database?","body":"<p>I have a spring boot project with Mysql &amp; Hibernate, all I need is to provide a privilege to the user to change or alter columns of the database dynamically(runtime), I haven't found any good approach for that XML approach is quite hectic and will require a lot changes to be made.</p>\n<p>Example:</p>\n<p>A table User with columns\n&quot;Username&quot; &amp; &quot;Password&quot;</p>\n<p>And from UI client will add another column &quot;email&quot; so it should make changes in Database table.</p>\n"},{"tags":["java","spring-boot","spring-data-jpa","mappedsuperclass","table-per-class"],"comments":[{"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"score":0,"creation_date":1658402650,"post_id":73065177,"comment_id":129045365,"body_markdown":"TL;DR for me, but did you consider **discriminator** (table inheritance).","body":"TL;DR for me, but did you consider <b>discriminator</b> (table inheritance)."},{"owner":{"account_id":14245148,"reputation":949,"user_id":10582056,"display_name":"ahrooran"},"score":0,"creation_date":1658403073,"post_id":73065177,"comment_id":129045501,"body_markdown":"@JoopEggen The child tables are already created and I cannot change that now. discriminator won&#39;t work.","body":"@JoopEggen The child tables are already created and I cannot change that now. discriminator won&#39;t work."}],"answers":[{"tags":[],"owner":{"account_id":25822,"reputation":78747,"user_id":66686,"accept_rate":87,"display_name":"Jens Schauder"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1658405185,"creation_date":1658405185,"answer_id":73065865,"question_id":73065177,"body_markdown":"You can simplify this a little by:\r\n\r\n```\r\niterate over the list.\r\n    foreach:\r\n        do an instanceof check\r\n        save with the matching repository.\r\n```\r\n\r\nSo no need to create the intermediate lists. \r\nSince your JPA implementation will delay the updates anyway nothing is gained by using `saveAll`.\r\n","title":"Updating a child entity","body":"<p>You can simplify this a little by:</p>\n<pre><code>iterate over the list.\n    foreach:\n        do an instanceof check\n        save with the matching repository.\n</code></pre>\n<p>So no need to create the intermediate lists.\nSince your JPA implementation will delay the updates anyway nothing is gained by using <code>saveAll</code>.</p>\n"}],"owner":{"account_id":14245148,"reputation":949,"user_id":10582056,"display_name":"ahrooran"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":68,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1658405185,"creation_date":1658401941,"question_id":73065177,"body_markdown":"This is bit lengthy but a simple conceptual problem. Please take some time to read :)\r\n\r\nI have 2 tables with exactly same columns except their primary keys are different. So I have created a `@MappedSuperclass` with common columns and have child classes annotated with `@Entity`\r\n\r\n    @MappedSuperclass\r\n    public abstract class AbstractCorporateAction {\r\n    \r\n        @ManyToOne(fetch = FetchType.EAGER)\r\n        @JoinColumn(name = &quot;ticker_serial&quot;, nullable = false, insertable = false, updatable = false)\r\n        @ToString.Exclude\r\n        private Ticker ticker;\r\n    \r\n        @Column(name = &quot;corp_act_type&quot;, nullable = false, precision = 4)\r\n        private BigInteger corpActType;\r\n    \r\n        @Column(name = &quot;number_of_shares&quot;, precision = 20)\r\n        private BigInteger numberOfShares;\r\n    }\r\n\r\n\r\nHere are the child classes:\r\n\r\n    @Entity\r\n    @Table(name = &quot;corporate_actions&quot;, schema = &quot;dfn_content_data&quot;)\r\n    public class ContentDataCorporateAction extends AbstractCorporateAction {\r\n    \r\n        @Id\r\n        @Column(name = &quot;action_id&quot;, precision = 10)\r\n        private BigInteger id;\r\n    }\r\n\r\n    @Entity\r\n    @Table(name = &quot;corporate_actions&quot;, schema = &quot;dfn_ms_history&quot;)\r\n    public class MsHistoryCorporateAction extends AbstractCorporateAction {\r\n    \r\n        @Id\r\n        @Column(name = &quot;id&quot;)\r\n        private BigInteger id;\r\n    \r\n        @Column(name = &quot;source_action_id&quot;, length = 20, unique = true)\r\n        private String sourceActionId;\r\n    }\r\n\r\nYou can see primary key of one child class is `action_id` while other is just `id`. My task is to retrieve rows from both, do some calculation, update corresponding fields and push back.\r\n\r\nI did all except the last part which is pushing back to DB. I now have a list of data: `List&lt;AbstractCorporateAction&gt;` and I want to push back.\r\n\r\n1. I tried creating a DAO by extending `extends JpaRepository&lt;AbstractCorporateAction, BigInteger&gt;`. But failed because there is no `@Id` attribute in `AbstractCorporateAction`\r\n\r\n\r\n    org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;abstractCorporateActionDao&#39; defined in com.gtn.ca_adjustments.repository.calculation.AbstractCorporateActionDao defined in @EnableJpaRepositories declared on CalculationPersistenceConfiguration: Invocation of init method failed; nested exception is java.lang.IllegalArgumentException: This class [class com.gtn.ca_adjustments.entity.calculation.AbstractCorporateAction] does not define an IdClass\r\n\r\n2. I then tried to convert this to an inheritance table\r\n\r\n    @Entity\r\n    @Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)\r\n    public abstract class AbstractCorporateAction {\r\n    }\r\n\r\nAgain failed because there is no common Id.\r\n\r\nWhat can I do at this point?\r\n\r\nI have tried:\r\n\r\n    interface ContentDataCorporateActionDao extends JpaRepository&lt;ContentDataCorporateAction, BigInteger&gt; {\r\n    \r\n    }\r\n    \r\n    interface MsHistoryCorporateActionDao extends JpaRepository&lt;MsHistoryCorporateAction, BigInteger&gt; {\r\n    \r\n    }\r\n    \r\n    @Repository\r\n    public class AbstractCorporateActionDao {\r\n    \r\n        // Autowire both\r\n        private final ContentDataCorporateActionDao contentDataCorporateActionDao;\r\n    \r\n        private final MsHistoryCorporateActionDao msHistoryCorporateActionDao;\r\n    \r\n        @Transactional\r\n        public void saveAll(List&lt;AbstractCorporateAction&gt; abstractCorporateActions) {\r\n            \r\n            // 1. filter all actions belong to first child class into a list\r\n            // 2. filter all actions belong to second child class into another list\r\n            \r\n            // 3. for each list -&gt; saveALl() to corresponding dao\r\n            \r\n        }\r\n    }\r\n\r\nIS this approach the only one? This seems too much for the task.\r\n","title":"Updating a child entity","body":"<p>This is bit lengthy but a simple conceptual problem. Please take some time to read :)</p>\n<p>I have 2 tables with exactly same columns except their primary keys are different. So I have created a <code>@MappedSuperclass</code> with common columns and have child classes annotated with <code>@Entity</code></p>\n<pre><code>@MappedSuperclass\npublic abstract class AbstractCorporateAction {\n\n    @ManyToOne(fetch = FetchType.EAGER)\n    @JoinColumn(name = &quot;ticker_serial&quot;, nullable = false, insertable = false, updatable = false)\n    @ToString.Exclude\n    private Ticker ticker;\n\n    @Column(name = &quot;corp_act_type&quot;, nullable = false, precision = 4)\n    private BigInteger corpActType;\n\n    @Column(name = &quot;number_of_shares&quot;, precision = 20)\n    private BigInteger numberOfShares;\n}\n</code></pre>\n<p>Here are the child classes:</p>\n<pre><code>@Entity\n@Table(name = &quot;corporate_actions&quot;, schema = &quot;dfn_content_data&quot;)\npublic class ContentDataCorporateAction extends AbstractCorporateAction {\n\n    @Id\n    @Column(name = &quot;action_id&quot;, precision = 10)\n    private BigInteger id;\n}\n\n@Entity\n@Table(name = &quot;corporate_actions&quot;, schema = &quot;dfn_ms_history&quot;)\npublic class MsHistoryCorporateAction extends AbstractCorporateAction {\n\n    @Id\n    @Column(name = &quot;id&quot;)\n    private BigInteger id;\n\n    @Column(name = &quot;source_action_id&quot;, length = 20, unique = true)\n    private String sourceActionId;\n}\n</code></pre>\n<p>You can see primary key of one child class is <code>action_id</code> while other is just <code>id</code>. My task is to retrieve rows from both, do some calculation, update corresponding fields and push back.</p>\n<p>I did all except the last part which is pushing back to DB. I now have a list of data: <code>List&lt;AbstractCorporateAction&gt;</code> and I want to push back.</p>\n<ol>\n<li><p>I tried creating a DAO by extending <code>extends JpaRepository&lt;AbstractCorporateAction, BigInteger&gt;</code>. But failed because there is no <code>@Id</code> attribute in <code>AbstractCorporateAction</code></p>\n<p>org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'abstractCorporateActionDao' defined in com.gtn.ca_adjustments.repository.calculation.AbstractCorporateActionDao defined in @EnableJpaRepositories declared on CalculationPersistenceConfiguration: Invocation of init method failed; nested exception is java.lang.IllegalArgumentException: This class [class com.gtn.ca_adjustments.entity.calculation.AbstractCorporateAction] does not define an IdClass</p>\n</li>\n<li><p>I then tried to convert this to an inheritance table</p>\n<p>@Entity\n@Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)\npublic abstract class AbstractCorporateAction {\n}</p>\n</li>\n</ol>\n<p>Again failed because there is no common Id.</p>\n<p>What can I do at this point?</p>\n<p>I have tried:</p>\n<pre><code>interface ContentDataCorporateActionDao extends JpaRepository&lt;ContentDataCorporateAction, BigInteger&gt; {\n\n}\n\ninterface MsHistoryCorporateActionDao extends JpaRepository&lt;MsHistoryCorporateAction, BigInteger&gt; {\n\n}\n\n@Repository\npublic class AbstractCorporateActionDao {\n\n    // Autowire both\n    private final ContentDataCorporateActionDao contentDataCorporateActionDao;\n\n    private final MsHistoryCorporateActionDao msHistoryCorporateActionDao;\n\n    @Transactional\n    public void saveAll(List&lt;AbstractCorporateAction&gt; abstractCorporateActions) {\n        \n        // 1. filter all actions belong to first child class into a list\n        // 2. filter all actions belong to second child class into another list\n        \n        // 3. for each list -&gt; saveALl() to corresponding dao\n        \n    }\n}\n</code></pre>\n<p>IS this approach the only one? This seems too much for the task.</p>\n"},{"tags":["java","hibernate","jpa","join"],"answers":[{"tags":[],"owner":{"account_id":5689409,"reputation":256,"user_id":4497895,"display_name":"jjbravo"},"down_vote_count":0,"up_vote_count":24,"is_accepted":true,"score":24,"last_activity_date":1422348277,"creation_date":1422348277,"answer_id":28166309,"question_id":27945738,"body_markdown":"You can use @WhereJoinTable annotation. It applies to the association table\r\n\r\n    @OneToMany\r\n    @JoinTable(\r\n      name=&quot;Contract_Party&quot;, \r\n      joinColumns = {@JoinColumn(name=&quot;party_id&quot;,referencedColumnName=&quot;party_id&quot;)},\r\n      inverseJoinColumns = {@JoinColumn(name=&quot;contract_id&quot;, referencedColumnName=&quot;contract_id&quot;)}\r\n    }\r\n    @WhereJoinTable  ( &quot;ROLE = &#39;SIGNER&#39; &quot;)\r\n    private List&lt;Contract&gt; contracts;","title":"JPA @JoinTable with extra join conditions","body":"<p>You can use @WhereJoinTable annotation. It applies to the association table</p>\n\n<pre><code>@OneToMany\n@JoinTable(\n  name=\"Contract_Party\", \n  joinColumns = {@JoinColumn(name=\"party_id\",referencedColumnName=\"party_id\")},\n  inverseJoinColumns = {@JoinColumn(name=\"contract_id\", referencedColumnName=\"contract_id\")}\n}\n@WhereJoinTable  ( \"ROLE = 'SIGNER' \")\nprivate List&lt;Contract&gt; contracts;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5022643,"reputation":800,"user_id":4035668,"display_name":"Thiago Ara&#250;jo"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1493121603,"creation_date":1493121603,"answer_id":43610083,"question_id":27945738,"body_markdown":"\r\nYou must use:\r\n\r\n\r\n    @WhereJoinTable(clause = &quot;ROLE =&#39;SIGNER&#39;&quot;)","title":"JPA @JoinTable with extra join conditions","body":"<p>You must use:</p>\n\n<pre><code>@WhereJoinTable(clause = \"ROLE ='SIGNER'\")\n</code></pre>\n"}],"owner":{"account_id":3385476,"reputation":604,"user_id":2841522,"display_name":"Vitaljok"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":30082,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"accepted_answer_id":28166309,"answer_count":2,"score":11,"last_activity_date":1658405121,"creation_date":1421247200,"question_id":27945738,"body_markdown":"I have spent couple of hours searching around and did not found anything similar to my case.\r\n\r\nLet&#39;s assume following many-to-many data model:\r\n&lt;pre&gt;\r\nContract (any business entity)\r\n- contract_id\r\n- other fields\r\n\r\nParty (another business entity)\r\n- party_id\r\n- other fields\r\n\r\nContract_Party (relations between first two \r\nwith additional role indicator, e.g. owner, signer, seller, etc)\r\n- contract_id\r\n- party_id\r\n- role\r\n&lt;/pre&gt;\r\n\r\nNow let&#39;s assume I want to map **all** contracts related to party (uni-directional). It can be done using following annotations in `Party` entity class:\r\n\r\n    @OneToMany\r\n    @JoinTable(\r\n      name=&quot;Contract_Party&quot;, \r\n      joinColumns = {@JoinColumn(name=&quot;party_id&quot;, referencedColumnName=&quot;party_id&quot;)},\r\n      inverseJoinColumns = {@JoinColumn(name=&quot;contract_id&quot;, referencedColumnName=&quot;contract_id&quot;)}\r\n    }\r\n    private List&lt;Contract&gt; contracts;\r\n\r\nThat is fine.\r\n\r\nBut what I&#39;m looking for is how to map contracts with **particular role**?\r\n\r\n    @OneToMany\r\n    @??? ( &quot;ROLE = &#39;SIGNER&#39; &quot;)\r\n    private List&lt;Contract&gt; signedContracts;\r\n\r\nTechnically I&#39;m looking for a way to add **extra condition** into JOIN statement.\r\n\r\nSo far found following ideas in similar topics:\r\n \r\n - map join table as separate entity, and perform filtering by role using custom queries;\r\n - Hibernate has @JoinFormula annotation, but no way to apply it inside @JoinTable;\r\n - Hibernate also has @Where annotation, but it adds condition for Contract table not for join table;\r\n - use @MapKeyColumn and return Map instead of List, but I can have multiple contracts per one role;\r\n - create a view on DB side (this one works indeed :)\r\n\r\nThanks!","title":"JPA @JoinTable with extra join conditions","body":"<p>I have spent couple of hours searching around and did not found anything similar to my case.</p>\n\n<p>Let's assume following many-to-many data model:</p>\n\n<pre>\nContract (any business entity)\n- contract_id\n- other fields\n\nParty (another business entity)\n- party_id\n- other fields\n\nContract_Party (relations between first two \nwith additional role indicator, e.g. owner, signer, seller, etc)\n- contract_id\n- party_id\n- role\n</pre>\n\n<p>Now let's assume I want to map <strong>all</strong> contracts related to party (uni-directional). It can be done using following annotations in <code>Party</code> entity class:</p>\n\n<pre><code>@OneToMany\n@JoinTable(\n  name=\"Contract_Party\", \n  joinColumns = {@JoinColumn(name=\"party_id\", referencedColumnName=\"party_id\")},\n  inverseJoinColumns = {@JoinColumn(name=\"contract_id\", referencedColumnName=\"contract_id\")}\n}\nprivate List&lt;Contract&gt; contracts;\n</code></pre>\n\n<p>That is fine.</p>\n\n<p>But what I'm looking for is how to map contracts with <strong>particular role</strong>?</p>\n\n<pre><code>@OneToMany\n@??? ( \"ROLE = 'SIGNER' \")\nprivate List&lt;Contract&gt; signedContracts;\n</code></pre>\n\n<p>Technically I'm looking for a way to add <strong>extra condition</strong> into JOIN statement.</p>\n\n<p>So far found following ideas in similar topics:</p>\n\n<ul>\n<li>map join table as separate entity, and perform filtering by role using custom queries;</li>\n<li>Hibernate has @JoinFormula annotation, but no way to apply it inside @JoinTable;</li>\n<li>Hibernate also has @Where annotation, but it adds condition for Contract table not for join table;</li>\n<li>use @MapKeyColumn and return Map instead of List, but I can have multiple contracts per one role;</li>\n<li>create a view on DB side (this one works indeed :)</li>\n</ul>\n\n<p>Thanks!</p>\n"},{"tags":["java","security","process","unsafe"],"answers":[{"tags":[],"owner":{"account_id":19311709,"reputation":41,"user_id":14117248,"display_name":"krukah"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1658344088,"creation_date":1658344088,"answer_id":73056974,"question_id":73054948,"body_markdown":"In later versions of Java, `Unsafe` has been reinforced with several security upgrades that basically were put in place to prevent code like this. Most, if not all, of these changes can be overridden with some JVM compile-time arguments.\r\n\r\nHowever, there are restrictions about what parts of the address space are accessible by processes within and outside of the JVM, that might vary between operating systems. So the actual answer likely lies in your OS&#39;s memory management unit, and I would guess that most would prohibit this kind of behavior.","title":"Does Java unsafe allow process hollowing?","body":"<p>In later versions of Java, <code>Unsafe</code> has been reinforced with several security upgrades that basically were put in place to prevent code like this. Most, if not all, of these changes can be overridden with some JVM compile-time arguments.</p>\n<p>However, there are restrictions about what parts of the address space are accessible by processes within and outside of the JVM, that might vary between operating systems. So the actual answer likely lies in your OS's memory management unit, and I would guess that most would prohibit this kind of behavior.</p>\n"}],"owner":{"account_id":3280644,"reputation":4811,"user_id":3582831,"display_name":"0xh3xa"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":159,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1658404980,"creation_date":1658333660,"question_id":73054948,"body_markdown":"The sun `Unsafe` class has methods that manipulate memory address location, my question can these methods allow performing process hollowing which attaches/copies code to another process inside the JVM?\r\n\r\n```\r\n    private static Unsafe unsafe;\r\n\r\n    static {\r\n        try {\r\n            Field field = Unsafe.class.getDeclaredField(&quot;theUnsafe&quot;);\r\n            field.setAccessible(true);\r\n            unsafe = (Unsafe) field.get(null);\r\n        } catch (Exception e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n\r\npublic static void processHollowing(Object obj) {\r\n    unsafe.setMemory(...);\r\n    unsafe.copyMemory(...);\r\n}\r\n```","title":"Does Java unsafe allow process hollowing?","body":"<p>The sun <code>Unsafe</code> class has methods that manipulate memory address location, my question can these methods allow performing process hollowing which attaches/copies code to another process inside the JVM?</p>\n<pre><code>    private static Unsafe unsafe;\n\n    static {\n        try {\n            Field field = Unsafe.class.getDeclaredField(&quot;theUnsafe&quot;);\n            field.setAccessible(true);\n            unsafe = (Unsafe) field.get(null);\n        } catch (Exception e) {\n            throw new RuntimeException(e);\n        }\n    }\n\npublic static void processHollowing(Object obj) {\n    unsafe.setMemory(...);\n    unsafe.copyMemory(...);\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","applicationcontext"],"comments":[{"owner":{"account_id":71985,"reputation":7903,"user_id":208013,"display_name":"Mirek Pluta"},"score":0,"creation_date":1658398529,"post_id":73064273,"comment_id":129043902,"body_markdown":"There is simpler approach: https://www.baeldung.com/spring-yaml-inject-map","body":"There is simpler approach: <a href=\"https://www.baeldung.com/spring-yaml-inject-map\" rel=\"nofollow noreferrer\">baeldung.com/spring-yaml-inject-map</a>"},{"owner":{"account_id":236518,"reputation":3191,"user_id":504060,"accept_rate":71,"display_name":"kiltek"},"score":0,"creation_date":1658399395,"post_id":73064273,"comment_id":129044215,"body_markdown":"I do not want to use yaml.","body":"I do not want to use yaml."}],"answers":[{"tags":[],"owner":{"account_id":5157566,"reputation":60,"user_id":4130364,"display_name":"Sandeep Kumar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658401675,"creation_date":1658401675,"answer_id":73065128,"question_id":73064273,"body_markdown":"follow code code snippet\r\n \r\n```\r\n@Component\r\n@ConfigurationProperties(prefix = &quot;xxx&quot;)\r\npublic class MyConfig {\r\n\r\n   private Map&lt;String, List&lt;String&gt;&gt; iWantToBeInitialized;\r\n    \r\n}\r\n```\r\n\r\n```\r\napplication.yml\r\n==================\r\n\r\nxxx:\r\n  iWantToBeInitialized:\r\n    a-key:\r\n      - a-value\r\n    b-key:\r\n      - b1-value\r\n      - b2-value\r\n```","title":"Initializing Map from application.propeties in SpringBoot","body":"<p>follow code code snippet</p>\n<pre><code>@Component\n@ConfigurationProperties(prefix = &quot;xxx&quot;)\npublic class MyConfig {\n\n   private Map&lt;String, List&lt;String&gt;&gt; iWantToBeInitialized;\n    \n}\n</code></pre>\n<pre><code>application.yml\n==================\n\nxxx:\n  iWantToBeInitialized:\n    a-key:\n      - a-value\n    b-key:\n      - b1-value\n      - b2-value\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10466881,"reputation":166,"user_id":7716050,"display_name":"hugoalexandremf"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1658404867,"creation_date":1658404867,"answer_id":73065795,"question_id":73064273,"body_markdown":"This expression works for me:\r\n\r\n    populate.map.content={{key1: {&#39;value1&#39;, &#39;value1&#39;}, key2: {&#39;value2&#39;, &#39;value2&#39;}, key3: {&#39;value3&#39;, &#39;value3&#39;}}\r\n\r\nThe logs show that `Map&lt;String, List&lt;String&gt;&gt; propertyname` is correctly initialized:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/DRvAS.png","title":"Initializing Map from application.propeties in SpringBoot","body":"<p>This expression works for me:</p>\n<pre><code>populate.map.content={{key1: {'value1', 'value1'}, key2: {'value2', 'value2'}, key3: {'value3', 'value3'}}\n</code></pre>\n<p>The logs show that <code>Map&lt;String, List&lt;String&gt;&gt; propertyname</code> is correctly initialized:</p>\n<p><a href=\"https://i.stack.imgur.com/DRvAS.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/DRvAS.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":236518,"reputation":3191,"user_id":504060,"accept_rate":71,"display_name":"kiltek"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":723,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1658404867,"creation_date":1658398063,"question_id":73064273,"body_markdown":"I want to initialize a class field by using Spring&#39;s `@Value` Annotation.\r\n\r\nThe class field has the type `Map&lt;String, List&lt;String&gt;&gt;`.\r\n\r\nI have tried using Spring&#39;s Expression Language, but I must be doing something wrong because it throws the following error, while loading the Spring Application Context:\r\n\r\n```\r\nCaused by: org.springframework.beans.factory.UnsatisfiedDependencyException: \r\nError creating bean with name &#39;myConfig&#39;: \r\nUnsatisfied dependency expressed through field &#39;iWantToBeInitialized&#39;; \r\nnested exception is org.springframework.beans.factory.BeanExpressionException: \r\nExpression parsing failed; nested exception is org.springframework.expression.spel.SpelParseException: \r\nEL1041E: After parsing a valid expression, there is still more data in the expression: &#39;a&#39;\r\n```\r\n\r\nThis is the code for `MyConfig.java`:\r\n```\r\n@Configuration\r\npublic class MyConfig {\r\n\r\n    @Value(&quot;#{&#39;${foo.bar.mymap}&#39;}&quot;)\r\n    Map&lt;String, List&lt;String&gt;&gt; iWantToBeInitialized;\r\n    \r\n}\r\n```\r\n\r\nThis is the code for `application.properties`:\r\n```\r\nfoo.bar.mymap=${baz.bub.other:{&#39;a-key&#39;:{&#39;a-value&#39;},&#39;b-key&#39;:{&#39;b1-value&#39;,&#39;b2-value&#39;},&#39;c-key&#39;:{&#39;c1-value&#39;}}}\r\n```\r\n\r\nIt looks like it begins parsing the `a` of the `a-key`, but it isn&#39;t able to figure out to parse a map from it.\r\n\r\nI have tried searching and stumbeld over a couple of Spring mechanisms including defining a &quot;Custom Property Something&quot;, but I could not figure out how to extrapolate the solution of those examples on to my specific usecase.\r\n\r\nCan someone point me into the right direction?\r\n\r\n\r\n----------\r\n\r\n\r\n**Update 1:**\r\n\r\n\r\nI have tried to apply [this solution][1].\r\n\r\nIt leads to the following Exception:\r\n```\r\nCaused by: org.springframework.beans.factory.UnsatisfiedDependencyException: \r\nError creating bean with name &#39;myConfig&#39;: \r\nUnsatisfied dependency expressed through field &#39;myMap&#39;; nested exception is org.springframework.beans.factory.BeanExpressionException: \r\nExpression parsing failed; nested exception is org.springframework.expression.spel.SpelEvaluationException: \r\nEL1008E: Property or field &#39;value1&#39; cannot be found on object of type &#39;org.springframework.beans.factory.config.BeanExpressionContext&#39; - maybe not public or not valid?\r\n```\r\n\r\n**Update 2:**\r\n\r\nFollow up on [the solution][1] mentioned in Update 1:\r\n\r\nI edited the answer and it solved the problem in the fashion I was searching for.\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/70068753/504060","title":"Initializing Map from application.propeties in SpringBoot","body":"<p>I want to initialize a class field by using Spring's <code>@Value</code> Annotation.</p>\n<p>The class field has the type <code>Map&lt;String, List&lt;String&gt;&gt;</code>.</p>\n<p>I have tried using Spring's Expression Language, but I must be doing something wrong because it throws the following error, while loading the Spring Application Context:</p>\n<pre><code>Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: \nError creating bean with name 'myConfig': \nUnsatisfied dependency expressed through field 'iWantToBeInitialized'; \nnested exception is org.springframework.beans.factory.BeanExpressionException: \nExpression parsing failed; nested exception is org.springframework.expression.spel.SpelParseException: \nEL1041E: After parsing a valid expression, there is still more data in the expression: 'a'\n</code></pre>\n<p>This is the code for <code>MyConfig.java</code>:</p>\n<pre><code>@Configuration\npublic class MyConfig {\n\n    @Value(&quot;#{'${foo.bar.mymap}'}&quot;)\n    Map&lt;String, List&lt;String&gt;&gt; iWantToBeInitialized;\n    \n}\n</code></pre>\n<p>This is the code for <code>application.properties</code>:</p>\n<pre><code>foo.bar.mymap=${baz.bub.other:{'a-key':{'a-value'},'b-key':{'b1-value','b2-value'},'c-key':{'c1-value'}}}\n</code></pre>\n<p>It looks like it begins parsing the <code>a</code> of the <code>a-key</code>, but it isn't able to figure out to parse a map from it.</p>\n<p>I have tried searching and stumbeld over a couple of Spring mechanisms including defining a &quot;Custom Property Something&quot;, but I could not figure out how to extrapolate the solution of those examples on to my specific usecase.</p>\n<p>Can someone point me into the right direction?</p>\n<hr />\n<p><strong>Update 1:</strong></p>\n<p>I have tried to apply <a href=\"https://stackoverflow.com/a/70068753/504060\">this solution</a>.</p>\n<p>It leads to the following Exception:</p>\n<pre><code>Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: \nError creating bean with name 'myConfig': \nUnsatisfied dependency expressed through field 'myMap'; nested exception is org.springframework.beans.factory.BeanExpressionException: \nExpression parsing failed; nested exception is org.springframework.expression.spel.SpelEvaluationException: \nEL1008E: Property or field 'value1' cannot be found on object of type 'org.springframework.beans.factory.config.BeanExpressionContext' - maybe not public or not valid?\n</code></pre>\n<p><strong>Update 2:</strong></p>\n<p>Follow up on <a href=\"https://stackoverflow.com/a/70068753/504060\">the solution</a> mentioned in Update 1:</p>\n<p>I edited the answer and it solved the problem in the fashion I was searching for.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":6,"creation_date":1658402703,"post_id":73065288,"comment_id":129045385,"body_markdown":"Depends on what `// TODO` actually does, but it&#39;s very likely you&#39;ll have to find a compromise between memory usage and time taken. You can rarely have both.","body":"Depends on what <code>&#47;&#47; TODO</code> actually does, but it&#39;s very likely you&#39;ll have to find a compromise between memory usage and time taken. You can rarely have both."},{"owner":{"account_id":2803497,"reputation":25202,"user_id":2411243,"display_name":"Zabuzard"},"score":1,"creation_date":1658402725,"post_id":73065288,"comment_id":129045390,"body_markdown":"Your performance issue does **not** come from iterating `folder.listFiles()` itself. It is either somewhere else or purely the fact that you process each file sequentially instead of introducing multithreading. In any case, we can not help you with that little detail. Please read [ask]. Voting to close because missing detail.","body":"Your performance issue does <b>not</b> come from iterating <code>folder.listFiles()</code> itself. It is either somewhere else or purely the fact that you process each file sequentially instead of introducing multithreading. In any case, we can not help you with that little detail. Please read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>. Voting to close because missing detail."}],"answers":[{"tags":[],"owner":{"account_id":9621752,"reputation":483,"user_id":7142748,"display_name":"jhueg"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1658404394,"creation_date":1658402921,"answer_id":73065357,"question_id":73065288,"body_markdown":"With the information you provided: You should parallize it and could use java NIO and streams for that. In it&#39;s simplest form:\r\n\r\n~~~\r\nFiles.list(Path.of(&quot;/path/to/dir&quot;))\r\n        .parallel()\r\n        .forEach(path -&gt; {\r\n            // convert it to file if needed, but try to stick with Path and NIO\r\n            var file = path.toFile();\r\n            // TODO\r\n        });\r\n~~~\r\n\r\nIf you wan&#39;t to exclude some files you also can filter the list first with `Stream::filter`. Since there are no more details available it could be:\r\n- Based on file name:\r\n~~~\r\nFiles.list(Path.of(&quot;/path/to/dir&quot;))\r\n                .parallel()\r\n                .filter(path -&gt; path.getFileName().toString().contains(&quot;filterMe&quot;))\r\n                .forEach(path -&gt; {\r\n                    // convert it to file if needed, but try to stick with Path and NIO\r\n                    var file = path.toFile();\r\n                    // TODO\r\n                });\r\n~~~\r\n\r\n- Based on content. In this case it would be more efficient to read the content first. If it is text just map it to `String`:\r\n\r\n~~~\r\nFiles.list(Path.of(&quot;/path/to/dir&quot;))\r\n        .parallel()\r\n        .map(path -&gt; {\r\n            try {\r\n                return Files.readString(path);\r\n            } catch (IOException e) {\r\n                throw new RuntimeException(e);\r\n            }\r\n        })\r\n        .filter(text -&gt; text.contains(&quot;filterMe&quot;))\r\n        .forEach(text -&gt; {\r\n            // Todo\r\n        });\r\n~~~\r\n\r\nIf the content of the files are in a binary format, you must first process it and map it to an object so java can handle it.\r\n\r\nFor more details on Javas `Stream API` please see tutorials like that: [Baeldung - The Java 8 Stream API Tutorial](https://www.baeldung.com/java-8-streams)","title":"Iterate a large files of a directory","body":"<p>With the information you provided: You should parallize it and could use java NIO and streams for that. In it's simplest form:</p>\n<pre><code>Files.list(Path.of(&quot;/path/to/dir&quot;))\n        .parallel()\n        .forEach(path -&gt; {\n            // convert it to file if needed, but try to stick with Path and NIO\n            var file = path.toFile();\n            // TODO\n        });\n</code></pre>\n<p>If you wan't to exclude some files you also can filter the list first with <code>Stream::filter</code>. Since there are no more details available it could be:</p>\n<ul>\n<li>Based on file name:</li>\n</ul>\n<pre><code>Files.list(Path.of(&quot;/path/to/dir&quot;))\n                .parallel()\n                .filter(path -&gt; path.getFileName().toString().contains(&quot;filterMe&quot;))\n                .forEach(path -&gt; {\n                    // convert it to file if needed, but try to stick with Path and NIO\n                    var file = path.toFile();\n                    // TODO\n                });\n</code></pre>\n<ul>\n<li>Based on content. In this case it would be more efficient to read the content first. If it is text just map it to <code>String</code>:</li>\n</ul>\n<pre><code>Files.list(Path.of(&quot;/path/to/dir&quot;))\n        .parallel()\n        .map(path -&gt; {\n            try {\n                return Files.readString(path);\n            } catch (IOException e) {\n                throw new RuntimeException(e);\n            }\n        })\n        .filter(text -&gt; text.contains(&quot;filterMe&quot;))\n        .forEach(text -&gt; {\n            // Todo\n        });\n</code></pre>\n<p>If the content of the files are in a binary format, you must first process it and map it to an object so java can handle it.</p>\n<p>For more details on Javas <code>Stream API</code> please see tutorials like that: <a href=\"https://www.baeldung.com/java-8-streams\" rel=\"nofollow noreferrer\">Baeldung - The Java 8 Stream API Tutorial</a></p>\n"}],"owner":{"account_id":11238818,"reputation":21,"user_id":8243924,"display_name":"Aka"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":155,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1658403281,"answer_count":1,"score":-1,"last_activity_date":1658404394,"creation_date":1658402490,"question_id":73065288,"body_markdown":"I have a directory with more than 100,000 files and I need to iterate all of them so i can deal with each file. currentlly i am using this code to read direcory files\r\n\r\n    for (File fileEntry : folder.listFiles()) {\r\n        // TODO\r\n    }\r\n\r\nbut there problem in perfermoce,is there a way to do it without taking a lot of time and with memory problemes.\r\n\r\nI am using java 11.","title":"Iterate a large files of a directory","body":"<p>I have a directory with more than 100,000 files and I need to iterate all of them so i can deal with each file. currentlly i am using this code to read direcory files</p>\n<pre><code>for (File fileEntry : folder.listFiles()) {\n    // TODO\n}\n</code></pre>\n<p>but there problem in perfermoce,is there a way to do it without taking a lot of time and with memory problemes.</p>\n<p>I am using java 11.</p>\n"},{"tags":["java","gis","anylogic"],"answers":[{"tags":[],"owner":{"account_id":25842137,"reputation":111,"user_id":19577539,"display_name":"Sjoerd "},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658325910,"creation_date":1658236154,"answer_id":73037537,"question_id":73023838,"body_markdown":"Looks like gisRegion is just one of the regions? If it is, it makes sense only a random point is chosen inside one region.\r\n\r\nTo solve this, you can try something like this(just figured it out myself):\r\n\r\nFirst create a multiregion and add both regions to it.\r\nThen choose a random region.\r\nThen for this random region, choose a random point inside this region.\r\n\r\n \r\n\r\n    GISMultiRegion multiregion = new GISMultiRegion();\r\n    multiregion.add(gisRegion);\r\n    multiregion.add(gisRegion1);\r\n    \r\n    GISRegion region = multiregion.randomRegionInside();\r\n    Point gisPoint = region.randomPointInside();\r\n    \r\n    myAgents(0).setLocation(gisPoint);\r\n\r\n\r\n\r\n","title":"Random GIS Point on the Anylogic map","body":"<p>Looks like gisRegion is just one of the regions? If it is, it makes sense only a random point is chosen inside one region.</p>\n<p>To solve this, you can try something like this(just figured it out myself):</p>\n<p>First create a multiregion and add both regions to it.\nThen choose a random region.\nThen for this random region, choose a random point inside this region.</p>\n<pre><code>GISMultiRegion multiregion = new GISMultiRegion();\nmultiregion.add(gisRegion);\nmultiregion.add(gisRegion1);\n\nGISRegion region = multiregion.randomRegionInside();\nPoint gisPoint = region.randomPointInside();\n\nmyAgents(0).setLocation(gisPoint);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":25842137,"reputation":111,"user_id":19577539,"display_name":"Sjoerd "},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1658404348,"creation_date":1658385937,"answer_id":73061774,"question_id":73023838,"body_markdown":"So then you automatically have a multiregion right?\r\nIf you create regions consisting of more than one region you should also have a multiregion visible in the projecttree.\r\n\r\nYou could then still use the same logic as described above, code would then be:\r\n\r\n    GISRegion region = Nederland.randomRegionInside();\r\n    Point gisPoint = region.randomPointInside();\r\n    \r\n    myAgents(0).setLocation(gisPoint);\r\n\r\n\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/i6qXQ.png\r\n\r\n\r\nOk, so in case you&#39;re using the method `map.searchFirstRegion(municipalityName)`\r\nit obviously doesnt work as you intend because there are still 2 regions and it only selects the first one. If you, for example do the same with the US, it keeps on placing the agent on just one of the many US regions, a small island. So the method you&#39;re using is not the correct one.\r\n\r\nSince this is a region consisting of 2 regions, this is a multiregion.  So instead of looking for the first region, you should look for the first multiregion. For this you could use code like below:\r\n\r\n    GISMultiRegion multiregion =  map.searchFirstMultiRegion(&quot;United States of America&quot;);\r\n    GISRegion region = multiregion.randomRegionInside();\r\n    Point gisPoint = region.randomPointInside();\r\n    myAgents(0).setLocation(gisPoint);\r\n\r\n\r\n","title":"Random GIS Point on the Anylogic map","body":"<p>So then you automatically have a multiregion right?\nIf you create regions consisting of more than one region you should also have a multiregion visible in the projecttree.</p>\n<p>You could then still use the same logic as described above, code would then be:</p>\n<pre><code>GISRegion region = Nederland.randomRegionInside();\nPoint gisPoint = region.randomPointInside();\n\nmyAgents(0).setLocation(gisPoint);\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/i6qXQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/i6qXQ.png\" alt=\"enter image description here\" /></a></p>\n<p>Ok, so in case you're using the method <code>map.searchFirstRegion(municipalityName)</code>\nit obviously doesnt work as you intend because there are still 2 regions and it only selects the first one. If you, for example do the same with the US, it keeps on placing the agent on just one of the many US regions, a small island. So the method you're using is not the correct one.</p>\n<p>Since this is a region consisting of 2 regions, this is a multiregion.  So instead of looking for the first region, you should look for the first multiregion. For this you could use code like below:</p>\n<pre><code>GISMultiRegion multiregion =  map.searchFirstMultiRegion(&quot;United States of America&quot;);\nGISRegion region = multiregion.randomRegionInside();\nPoint gisPoint = region.randomPointInside();\nmyAgents(0).setLocation(gisPoint);\n</code></pre>\n"}],"owner":{"account_id":25497837,"reputation":53,"user_id":19291632,"display_name":"dkdelta"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":147,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1658404348,"creation_date":1658153904,"question_id":73023838,"body_markdown":"The Anylogic map has a GIS Regions consists more than one area separated from each other.\r\nFor example:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/3lpGH.png\r\n\r\nIf I try to generate a random GIS Points in this GIS Region with next method:\r\n\r\n    gisPoint = gisRegion.randomPointInside();\r\n\r\nthe Anylogic generate them in only one area of GIS Region (I don&#39;t understand how it choose a specific area)!\r\nHow can i solve this problem?\r\n\r\nThanks for your help!\r\n","title":"Random GIS Point on the Anylogic map","body":"<p>The Anylogic map has a GIS Regions consists more than one area separated from each other.\nFor example:</p>\n<p><a href=\"https://i.stack.imgur.com/3lpGH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3lpGH.png\" alt=\"enter image description here\" /></a></p>\n<p>If I try to generate a random GIS Points in this GIS Region with next method:</p>\n<pre><code>gisPoint = gisRegion.randomPointInside();\n</code></pre>\n<p>the Anylogic generate them in only one area of GIS Region (I don't understand how it choose a specific area)!\nHow can i solve this problem?</p>\n<p>Thanks for your help!</p>\n"},{"tags":["java","performance","apache-kafka","architecture","kafka-consumer-api"],"comments":[{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1658240599,"post_id":73034796,"comment_id":128999468,"body_markdown":"Please share your existing consumer code. How exactly are you starting 10 per instance? And no, you cannot set the number of partitions per consumer using subscribe method; you can only do this with manual assignment","body":"Please share your existing consumer code. How exactly are you starting 10 per instance? And no, you cannot set the number of partitions per consumer using subscribe method; you can only do this with manual assignment"}],"answers":[{"tags":[],"owner":{"account_id":11253290,"reputation":1289,"user_id":9167731,"display_name":"Semyon Kirekov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1658404302,"creation_date":1658403547,"answer_id":73065495,"question_id":73034796,"body_markdown":"Well, it&#39;s about [partition.assignment.strategy](https://docs.confluent.io/platform/current/installation/configuration/consumer-configs.html#consumerconfigs_partition.assignment.strategy) Kafka property. The default value is `RangeAssignor` which leads to assigning partitions on topic basis. That leads to spreading load between consumers unfairly.\r\n\r\nWe set the property to `RoundRobinAssignor` and it helped.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/QwL0G.png\r\n\r\nThough you should be careful when you deploy new version with different `partition.assignment.strategy`. Suppose you have 5 running consumers with `RangeAssignor` strategy. Then you redeploy one with `RoundRobinAssignor` strategy. In this case, you get an exception on consumer replacement. Because all consumers in one consumer group should provide the same `partition.assignment.strategy`. The problem is described [in this StackOverflow question](https://stackoverflow.com/questions/51486969/the-group-members-supported-protocols-are-incompatible-with-those-of-existing-m)\r\n\r\nSo, if you want to change the `partition.assignment.strategy`, you have several options:\r\n\r\n1. Redeploy all consumers and then deploy new ones.\r\n2. Specify new `group.id` for the new consumers.\r\n\r\nBoth of these ways have pros and cons.","title":"Kafka Consumer RegExp: stale consumers","body":"<p>Well, it's about <a href=\"https://docs.confluent.io/platform/current/installation/configuration/consumer-configs.html#consumerconfigs_partition.assignment.strategy\" rel=\"nofollow noreferrer\">partition.assignment.strategy</a> Kafka property. The default value is <code>RangeAssignor</code> which leads to assigning partitions on topic basis. That leads to spreading load between consumers unfairly.</p>\n<p>We set the property to <code>RoundRobinAssignor</code> and it helped.</p>\n<p><a href=\"https://i.stack.imgur.com/QwL0G.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QwL0G.png\" alt=\"enter image description here\" /></a></p>\n<p>Though you should be careful when you deploy new version with different <code>partition.assignment.strategy</code>. Suppose you have 5 running consumers with <code>RangeAssignor</code> strategy. Then you redeploy one with <code>RoundRobinAssignor</code> strategy. In this case, you get an exception on consumer replacement. Because all consumers in one consumer group should provide the same <code>partition.assignment.strategy</code>. The problem is described <a href=\"https://stackoverflow.com/questions/51486969/the-group-members-supported-protocols-are-incompatible-with-those-of-existing-m\">in this StackOverflow question</a></p>\n<p>So, if you want to change the <code>partition.assignment.strategy</code>, you have several options:</p>\n<ol>\n<li>Redeploy all consumers and then deploy new ones.</li>\n<li>Specify new <code>group.id</code> for the new consumers.</li>\n</ol>\n<p>Both of these ways have pros and cons.</p>\n"}],"owner":{"account_id":11253290,"reputation":1289,"user_id":9167731,"display_name":"Semyon Kirekov"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":471,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73065495,"answer_count":1,"score":1,"last_activity_date":1658404302,"creation_date":1658224317,"question_id":73034796,"body_markdown":"I subscribe to [Kafka Topics by RegExp](https://kafka.apache.org/26/javadoc/index.html?org/apache/kafka/clients/consumer/KafkaConsumer.html). There are 5 topics matching the given pattern. Four of them has 10 partitions. And the last topic has 12 partitions. So, there are 52 partitions at all.\r\n\r\nI have 5 running instances and each of them starts 10 consumers. So, there are 50 consumers at all. I expect that the load is spread horizontally across all the consumers. So, each consumer reads 1 partition except two of them because total number of consumers is less than the whole partitions count.\r\n\r\nThough the reality is a bit different.\r\n\r\n[![A single consumer reads multiple partitions][1]][1]\r\n\r\n\r\n[![Most consumers remains stale][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/4yNBe.png\r\n  [2]: https://i.stack.imgur.com/JkGQW.png\r\n\r\nIn short, here is what happens\r\n\r\n1. There are 50 consumers subscribing to multiple topics by RegExp. All found topics has 52 partitions totally.\r\n2. Each consumer tries to subscribe to 1 partition from each found topic. There are also two consumer subscribed to 1 partition from the single topic because the latter has 12 but not 10 partitions.\r\n3. 12 consumers are working whilst 38 remains stale due to unavailable partitions to read.\r\n\r\nIs there any way to force Kafka consumer to read 1 partition maximum with RegExp subscription? In this case, I can make all consumers start work. Or maybe there is a different approach that allows to read multiple topics respecting the number of partitions and running consumers?","title":"Kafka Consumer RegExp: stale consumers","body":"<p>I subscribe to <a href=\"https://kafka.apache.org/26/javadoc/index.html?org/apache/kafka/clients/consumer/KafkaConsumer.html\" rel=\"nofollow noreferrer\">Kafka Topics by RegExp</a>. There are 5 topics matching the given pattern. Four of them has 10 partitions. And the last topic has 12 partitions. So, there are 52 partitions at all.</p>\n<p>I have 5 running instances and each of them starts 10 consumers. So, there are 50 consumers at all. I expect that the load is spread horizontally across all the consumers. So, each consumer reads 1 partition except two of them because total number of consumers is less than the whole partitions count.</p>\n<p>Though the reality is a bit different.</p>\n<p><a href=\"https://i.stack.imgur.com/4yNBe.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4yNBe.png\" alt=\"A single consumer reads multiple partitions\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/JkGQW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JkGQW.png\" alt=\"Most consumers remains stale\" /></a></p>\n<p>In short, here is what happens</p>\n<ol>\n<li>There are 50 consumers subscribing to multiple topics by RegExp. All found topics has 52 partitions totally.</li>\n<li>Each consumer tries to subscribe to 1 partition from each found topic. There are also two consumer subscribed to 1 partition from the single topic because the latter has 12 but not 10 partitions.</li>\n<li>12 consumers are working whilst 38 remains stale due to unavailable partitions to read.</li>\n</ol>\n<p>Is there any way to force Kafka consumer to read 1 partition maximum with RegExp subscription? In this case, I can make all consumers start work. Or maybe there is a different approach that allows to read multiple topics respecting the number of partitions and running consumers?</p>\n"},{"tags":["java","terraform"],"comments":[{"owner":{"account_id":13466552,"reputation":19713,"user_id":9716597,"display_name":"L. F."},"score":1,"creation_date":1560765330,"post_id":56628680,"comment_id":99829699,"body_markdown":"@AUsername I approved your edit, but it may be better to let the OP learn how to post code as code himself rather than just doing it for him in the future.","body":"@AUsername I approved your edit, but it may be better to let the OP learn how to post code as code himself rather than just doing it for him in the future."},{"owner":{"account_id":233032,"reputation":43536,"user_id":498256,"accept_rate":100,"display_name":"BMW"},"score":0,"creation_date":1560767541,"post_id":56628680,"comment_id":99830817,"body_markdown":"So you need show us what you have did first.","body":"So you need show us what you have did first."}],"answers":[{"tags":[],"owner":{"account_id":15952099,"reputation":477,"user_id":11511226,"display_name":"B-Schmidt"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1560769501,"creation_date":1560769501,"answer_id":56630002,"question_id":56628680,"body_markdown":"You could use a Regex to find the various variables, then parse the found variables using another Regex. One way to do this would be the following\r\n\r\n    Map&lt;String, Map&lt;String,String&gt;&gt; parse(String input){\r\n        HashMap&lt;String, Map&lt;String, String&gt;&gt; variables = new HashMap&lt;&gt;();\r\n        Matcher variableMatcher = Pattern.compile(&quot;variable \\&quot;(\\\\S+?)\\&quot;\\\\s*\\\\{\\\\s*((?:.|\\\\n)+?)\\\\s*}&quot;).matcher(input);\r\n        Pattern bodyElementPattern = Pattern.compile(&quot;(\\\\S+)\\\\s*=\\\\s*\\&quot;(.+)\\&quot;&quot;);\r\n        while (variableMatcher.find()){\r\n            HashMap&lt;String, String&gt; bodyElements = new HashMap&lt;&gt;();\r\n            Matcher bodyElementMatcher = bodyElementPattern.matcher(variableMatcher.group(2));\r\n            while (bodyElementMatcher.find()){\r\n                bodyElements.put(bodyElementMatcher.group(1),bodyElementMatcher.group(2));\r\n            }\r\n            variables.put(variableMatcher.group(1),bodyElements);\r\n        }\r\n        return variables;\r\n    }\r\n\r\nHere you are going to get a map of variable name to variable contents, where the variable Contents are represented as another map of the components&#39; names and values.\r\n","title":"Can we parse a terraform &quot;variables.tf&quot; file in Java? If so how to implement the same","body":"<p>You could use a Regex to find the various variables, then parse the found variables using another Regex. One way to do this would be the following</p>\n\n<pre><code>Map&lt;String, Map&lt;String,String&gt;&gt; parse(String input){\n    HashMap&lt;String, Map&lt;String, String&gt;&gt; variables = new HashMap&lt;&gt;();\n    Matcher variableMatcher = Pattern.compile(\"variable \\\"(\\\\S+?)\\\"\\\\s*\\\\{\\\\s*((?:.|\\\\n)+?)\\\\s*}\").matcher(input);\n    Pattern bodyElementPattern = Pattern.compile(\"(\\\\S+)\\\\s*=\\\\s*\\\"(.+)\\\"\");\n    while (variableMatcher.find()){\n        HashMap&lt;String, String&gt; bodyElements = new HashMap&lt;&gt;();\n        Matcher bodyElementMatcher = bodyElementPattern.matcher(variableMatcher.group(2));\n        while (bodyElementMatcher.find()){\n            bodyElements.put(bodyElementMatcher.group(1),bodyElementMatcher.group(2));\n        }\n        variables.put(variableMatcher.group(1),bodyElements);\n    }\n    return variables;\n}\n</code></pre>\n\n<p>Here you are going to get a map of variable name to variable contents, where the variable Contents are represented as another map of the components' names and values.</p>\n"},{"tags":[],"owner":{"account_id":25703500,"reputation":11,"user_id":19463202,"display_name":"Yuri Blaise"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1658404119,"creation_date":1658403812,"answer_id":73065563,"question_id":56628680,"body_markdown":"In case someone wants to use just one line and get only the default value if its available. Here is what I did.\r\n\r\n    pattern_string = &quot;(?:variable.*\\\\\\&quot;(\\\\w+)\\\\\\&quot;(?:.*\\\\s)*?(?:\\\\s*default\\\\s*=\\\\s*(\\\\S*)|}))&quot;;\r\n    \r\n    Pattern pattern = Pattern.compile(pattern_string);\r\n    Matcher matcher = pattern.matcher(tfFile);\r\n\r\n    while (matcher.find()) {\r\n       String variable_name = matcher.group(1);\r\n       String default_value = matcher.group(2);\r\n       if (default_value == null) {\r\n         // do stuff\r\n       }\r\n    }\r\n\r\nYou can find a break down of the regex here https://regex101.com/r/Ec3ykt","title":"Can we parse a terraform &quot;variables.tf&quot; file in Java? If so how to implement the same","body":"<p>In case someone wants to use just one line and get only the default value if its available. Here is what I did.</p>\n<pre><code>pattern_string = &quot;(?:variable.*\\\\\\&quot;(\\\\w+)\\\\\\&quot;(?:.*\\\\s)*?(?:\\\\s*default\\\\s*=\\\\s*(\\\\S*)|}))&quot;;\n\nPattern pattern = Pattern.compile(pattern_string);\nMatcher matcher = pattern.matcher(tfFile);\n\nwhile (matcher.find()) {\n   String variable_name = matcher.group(1);\n   String default_value = matcher.group(2);\n   if (default_value == null) {\n     // do stuff\n   }\n}\n</code></pre>\n<p>You can find a break down of the regex here <a href=\"https://regex101.com/r/Ec3ykt\" rel=\"nofollow noreferrer\">https://regex101.com/r/Ec3ykt</a></p>\n"}],"owner":{"account_id":16082803,"reputation":89,"user_id":11608277,"display_name":"IT_Guy"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1442,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":56630002,"answer_count":2,"score":2,"last_activity_date":1658404119,"creation_date":1560764501,"question_id":56628680,"body_markdown":"Please find the Sample snippet of Variable.tf file, I want to fetch only the subscription_id, plan_id, user_id. I don&#39;t want to fetch location, since it already have default value set.\r\n\r\n\r\n    variable &quot;subscription_id&quot; {\r\n    description = &quot;My subscription id&quot;\r\n    }\r\n\r\n    variable &quot;plan_id&quot; {\r\n    description = &quot;My tenant id&quot;\r\n    }\r\n\r\n    variable &quot;user_id&quot; {\r\n    description = &quot;My user id&quot;\r\n    }\r\n\r\n    variable &quot;location&quot; {\r\n    type=&quot;string&quot;\r\n    default=&quot;Sydney&quot;\r\n    description=&quot;The name of the location in which your account is \r\n    created. &quot;\r\n    } \r\n\r\n------------------------------------------------------------------------------\r\n  [1]: https://i.stack.imgur.com/RKSAP.png","title":"Can we parse a terraform &quot;variables.tf&quot; file in Java? If so how to implement the same","body":"<p>Please find the Sample snippet of Variable.tf file, I want to fetch only the subscription_id, plan_id, user_id. I don't want to fetch location, since it already have default value set.</p>\n\n<pre><code>variable \"subscription_id\" {\ndescription = \"My subscription id\"\n}\n\nvariable \"plan_id\" {\ndescription = \"My tenant id\"\n}\n\nvariable \"user_id\" {\ndescription = \"My user id\"\n}\n\nvariable \"location\" {\ntype=\"string\"\ndefault=\"Sydney\"\ndescription=\"The name of the location in which your account is \ncreated. \"\n} \n</code></pre>\n\n<hr>\n"},{"tags":["java","soap","spring-ws"],"answers":[{"tags":[],"owner":{"account_id":208839,"reputation":1399,"user_id":459572,"accept_rate":23,"display_name":"Donz"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1498058360,"creation_date":1498058360,"answer_id":44680147,"question_id":44678662,"body_markdown":"JAXBElement is here because you have custom type. If you point nillable=true you get the same. As you already understood you need to do your request and response simple elements, so JAXBElement wrapper won&#39;t be needed.\r\n\r\nANd it&#39;s good practice to put real data model in one xsd and its wrappers like request and response element in another. In that case you can change the representation of your data model with different wrappers without changing data model itself.","title":"No adapter for endpoint. Is your endpoint annotated with @Endpoint, or does it implement a supported interface like MessageHandler or PayloadEndpoint?","body":"<p>JAXBElement is here because you have custom type. If you point nillable=true you get the same. As you already understood you need to do your request and response simple elements, so JAXBElement wrapper won't be needed.</p>\n\n<p>ANd it's good practice to put real data model in one xsd and its wrappers like request and response element in another. In that case you can change the representation of your data model with different wrappers without changing data model itself.</p>\n"}],"owner":{"account_id":2282745,"reputation":482,"user_id":2007471,"accept_rate":75,"display_name":"facundop"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3407,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":44680147,"answer_count":1,"score":3,"last_activity_date":1658404102,"creation_date":1498054546,"question_id":44678662,"body_markdown":"I am struggling with an Spring-WS project.\r\n\r\nIn my Endpoint class, if I don&#39;t specify I&#39;m receiving/returning a JAXBElement, I get the following error: No adapter for endpoint; Is your endpoint annotated with @Endpoint, or does it implement a supported interface like MessageHandler or PayloadEndpoint?\r\n\r\nFor instance, this method will work OK:\r\n\r\n\t@PayloadRoot(namespace = NAMESPACE_URI, localPart = &quot;pingRequest&quot;)\r\n\t@ResponsePayload\r\n\tpublic JAXBElement&lt;PingResponse&gt; pingRequest(@RequestPayload JAXBElement&lt;PingRequest&gt; request) {\r\n\t\tPingResponse response = service.ping();\r\n\t\treturn new JAXBElement&lt;PingResponse&gt;(request.getName(), PingResponse.class, response);\r\n\t}\r\n\r\nBut this one will cause the error mentioned above:\r\n\r\n\t@PayloadRoot(namespace = NAMESPACE_URI, localPart = &quot;pingRequest&quot;)\r\n\t@ResponsePayload\r\n\tpublic PingResponse pingRequest(@RequestPayload PingRequest request) {\r\n\t\treturn service.ping();\r\n\t}\r\n\r\nIs there any way for me to simply return the element I want instead of wrapping it up in a JAXBElement?\r\n\r\nI have a few methods declared like that, and I noticed I only need to wrap them as JAXBElements when I&#39;m using elements imported from another XSD.\r\n\r\nFor instance, if I have my XSD defined like this:\r\n\r\n\t&lt;xs:element name=&quot;pingRequest&quot;&gt;\r\n\t\t&lt;xs:complexType&gt;\r\n\t\t\t&lt;xs:sequence&gt;\r\n\t\t\t&lt;/xs:sequence&gt;\r\n\t\t&lt;/xs:complexType&gt;\r\n\t&lt;/xs:element&gt;\r\n\t&lt;xs:element name=&quot;pingResponse&quot;&gt;\r\n\t\t&lt;xs:complexType&gt;\r\n\t\t\t&lt;xs:sequence&gt;\r\n\t\t\t\t&lt;xs:element name=&quot;return&quot; type=&quot;xs:string&quot; /&gt;\r\n\t\t\t&lt;/xs:sequence&gt;\r\n\t\t&lt;/xs:complexType&gt;\r\n\t&lt;/xs:element&gt;\r\n\r\nIt will work without specifying JAXBElement in the signature. But if I want to export that and use it in another XSD like this:\r\n\r\nservice.xsd\r\n\r\n    &lt;xs:schema xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema&quot;\r\n    \txmlns:tns=&quot;http://example.com/service&quot;\r\n    \telementFormDefault=&quot;qualified&quot;\r\n    \ttargetNamespace=&quot;http://example.com/service&quot;\r\n    \txmlns:customlib=&quot;http://example.com/customlib&quot;&gt;\r\n    \t\r\n    \t&lt;xs:import namespace=&quot;http://example.com/customlib&quot;\r\n        schemaLocation=&quot;../customlib.xsd&quot; /&gt;\r\n    \t\r\n    \t&lt;xs:element name=&quot;pingRequest&quot; type=&quot;customlib:pingRequest&quot; /&gt;\r\n    \r\n    \t&lt;xs:element name=&quot;pingResponse&quot; type=&quot;customlib:pingResponse&quot; /&gt;\r\n\r\ncustomlib.xsd:\r\n\r\n    &lt;xs:schema xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema&quot;\r\n    \txmlns:tns=&quot;http://example.com/customlib&quot; \r\n        elementFormDefault=&quot;unqualified&quot;\r\n    \ttargetNamespace=&quot;http://example.com/customlib&quot;&gt;\r\n    \r\n    \t&lt;xs:complexType name=&quot;pingRequest&quot;&gt;\r\n    \t&lt;/xs:complexType&gt;\r\n    \r\n    \t&lt;xs:complexType name=&quot;pingResponse&quot;&gt;\r\n    \t\t&lt;xs:sequence&gt;\r\n    \t\t\t&lt;xs:element name=&quot;return&quot; type=&quot;xs:string&quot; /&gt;\r\n    \t\t&lt;/xs:sequence&gt;\r\n    \t&lt;/xs:complexType&gt;\r\n    \r\n    &lt;/xs:schema&gt;\r\n\r\nThen it won&#39;t work. I&#39;m not sure what to google for to get the desired effect.","title":"No adapter for endpoint. Is your endpoint annotated with @Endpoint, or does it implement a supported interface like MessageHandler or PayloadEndpoint?","body":"<p>I am struggling with an Spring-WS project.</p>\n\n<p>In my Endpoint class, if I don't specify I'm receiving/returning a JAXBElement, I get the following error: No adapter for endpoint; Is your endpoint annotated with @Endpoint, or does it implement a supported interface like MessageHandler or PayloadEndpoint?</p>\n\n<p>For instance, this method will work OK:</p>\n\n<pre><code>@PayloadRoot(namespace = NAMESPACE_URI, localPart = \"pingRequest\")\n@ResponsePayload\npublic JAXBElement&lt;PingResponse&gt; pingRequest(@RequestPayload JAXBElement&lt;PingRequest&gt; request) {\n    PingResponse response = service.ping();\n    return new JAXBElement&lt;PingResponse&gt;(request.getName(), PingResponse.class, response);\n}\n</code></pre>\n\n<p>But this one will cause the error mentioned above:</p>\n\n<pre><code>@PayloadRoot(namespace = NAMESPACE_URI, localPart = \"pingRequest\")\n@ResponsePayload\npublic PingResponse pingRequest(@RequestPayload PingRequest request) {\n    return service.ping();\n}\n</code></pre>\n\n<p>Is there any way for me to simply return the element I want instead of wrapping it up in a JAXBElement?</p>\n\n<p>I have a few methods declared like that, and I noticed I only need to wrap them as JAXBElements when I'm using elements imported from another XSD.</p>\n\n<p>For instance, if I have my XSD defined like this:</p>\n\n<pre><code>&lt;xs:element name=\"pingRequest\"&gt;\n    &lt;xs:complexType&gt;\n        &lt;xs:sequence&gt;\n        &lt;/xs:sequence&gt;\n    &lt;/xs:complexType&gt;\n&lt;/xs:element&gt;\n&lt;xs:element name=\"pingResponse\"&gt;\n    &lt;xs:complexType&gt;\n        &lt;xs:sequence&gt;\n            &lt;xs:element name=\"return\" type=\"xs:string\" /&gt;\n        &lt;/xs:sequence&gt;\n    &lt;/xs:complexType&gt;\n&lt;/xs:element&gt;\n</code></pre>\n\n<p>It will work without specifying JAXBElement in the signature. But if I want to export that and use it in another XSD like this:</p>\n\n<p>service.xsd</p>\n\n<pre><code>&lt;xs:schema xmlns:xs=\"http://www.w3.org/2001/XMLSchema\"\n    xmlns:tns=\"http://example.com/service\"\n    elementFormDefault=\"qualified\"\n    targetNamespace=\"http://example.com/service\"\n    xmlns:customlib=\"http://example.com/customlib\"&gt;\n\n    &lt;xs:import namespace=\"http://example.com/customlib\"\n    schemaLocation=\"../customlib.xsd\" /&gt;\n\n    &lt;xs:element name=\"pingRequest\" type=\"customlib:pingRequest\" /&gt;\n\n    &lt;xs:element name=\"pingResponse\" type=\"customlib:pingResponse\" /&gt;\n</code></pre>\n\n<p>customlib.xsd:</p>\n\n<pre><code>&lt;xs:schema xmlns:xs=\"http://www.w3.org/2001/XMLSchema\"\n    xmlns:tns=\"http://example.com/customlib\" \n    elementFormDefault=\"unqualified\"\n    targetNamespace=\"http://example.com/customlib\"&gt;\n\n    &lt;xs:complexType name=\"pingRequest\"&gt;\n    &lt;/xs:complexType&gt;\n\n    &lt;xs:complexType name=\"pingResponse\"&gt;\n        &lt;xs:sequence&gt;\n            &lt;xs:element name=\"return\" type=\"xs:string\" /&gt;\n        &lt;/xs:sequence&gt;\n    &lt;/xs:complexType&gt;\n\n&lt;/xs:schema&gt;\n</code></pre>\n\n<p>Then it won't work. I'm not sure what to google for to get the desired effect.</p>\n"},{"tags":["java","hibernate","jpa","h2","persistence.xml"],"comments":[{"owner":{"account_id":8646527,"reputation":685,"user_id":6473557,"accept_rate":0,"display_name":"Thomson Ignesious"},"score":0,"creation_date":1615267209,"post_id":66539583,"comment_id":117631604,"body_markdown":"there is no `integer`  data type instead, use `int`\nhttp://www.h2database.com/html/datatypes.html#int_type","body":"there is no <code>integer</code>  data type instead, use <code>int</code> <a href=\"http://www.h2database.com/html/datatypes.html#int_type\" rel=\"nofollow noreferrer\">h2database.com/html/datatypes.html#int_type</a>"},{"owner":{"account_id":5973669,"reputation":6765,"user_id":4695271,"accept_rate":69,"display_name":"x80486"},"score":0,"creation_date":1615300342,"post_id":66539583,"comment_id":117644463,"body_markdown":"I understand, but somehow the `integer` type works, not sure if it&#39;s because I have `MODE=PostgreSQL;`. Anyway, the issue is with the file format: statements must be placed on a single line (each). Somehow looks like the parser doesn&#39;t understand new lines, etc.","body":"I understand, but somehow the <code>integer</code> type works, not sure if it&#39;s because I have <code>MODE=PostgreSQL;</code>. Anyway, the issue is with the file format: statements must be placed on a single line (each). Somehow looks like the parser doesn&#39;t understand new lines, etc."}],"answers":[{"tags":[],"owner":{"account_id":5973669,"reputation":6765,"user_id":4695271,"accept_rate":69,"display_name":"x80486"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1615300798,"creation_date":1615300798,"answer_id":66548999,"question_id":66539583,"body_markdown":"Somehow I find this insane. The problem was that each statement must be on its own line. For instance, this wouldn&#39;t work:\r\n\r\n```sql\r\ncreate table spell_books (\r\n  id         uuid,\r\n  name       varchar(150) not null,\r\n  updated_at timestamp    not null default current_timestamp(),\r\n  version    integer      not null\r\n);\r\n```\r\n\r\n...but this works:\r\n\r\n```sql\r\ncreate table spell_books (id uuid, name varchar(150) not null, updated_at timestamp not null default current_timestamp(), version integer not null);\r\n```","title":"JPA always fails to create (H2) database schema and tables when using DDL scripts","body":"<p>Somehow I find this insane. The problem was that each statement must be on its own line. For instance, this wouldn't work:</p>\n<pre class=\"lang-sql prettyprint-override\"><code>create table spell_books (\n  id         uuid,\n  name       varchar(150) not null,\n  updated_at timestamp    not null default current_timestamp(),\n  version    integer      not null\n);\n</code></pre>\n<p>...but this works:</p>\n<pre class=\"lang-sql prettyprint-override\"><code>create table spell_books (id uuid, name varchar(150) not null, updated_at timestamp not null default current_timestamp(), version integer not null);\n</code></pre>\n"}],"owner":{"account_id":5973669,"reputation":6765,"user_id":4695271,"accept_rate":69,"display_name":"x80486"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":792,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":66548999,"answer_count":1,"score":0,"last_activity_date":1658404065,"creation_date":1615253803,"question_id":66539583,"body_markdown":"I&#39;m using JPA on a standard Java project. I have a `persistence.xml` deployment descriptor that looks like:\r\n\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;persistence xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns=&quot;http://xmlns.jcp.org/xml/ns/persistence&quot;\r\n    xsi:schemaLocation=&quot;http://xmlns.jcp.org/xml/ns/persistence http://xmlns.jcp.org/xml/ns/persistence/persistence_2_2.xsd&quot;\r\n    version=&quot;2.2&quot;&gt;\r\n  &lt;persistence-unit name=&quot;test&quot; transaction-type=&quot;RESOURCE_LOCAL&quot;&gt;\r\n    &lt;class&gt;...&lt;/class&gt;\r\n\r\n    &lt;properties&gt;\r\n      &lt;property name=&quot;javax.persistence.jdbc.driver&quot; value=&quot;org.h2.Driver&quot; /&gt;\r\n      &lt;property name=&quot;javax.persistence.jdbc.password&quot; value=&quot;&quot; /&gt;\r\n      &lt;property name=&quot;javax.persistence.jdbc.url&quot; value=&quot;jdbc:h2:mem:java_design_patterns;DB_CLOSE_DELAY=-1;MODE=PostgreSQL;&quot; /&gt;\r\n      &lt;property name=&quot;javax.persistence.jdbc.user&quot; value=&quot;sa&quot; /&gt;\r\n      &lt;property name=&quot;javax.persistence.schema-generation.create-script-source&quot; value=&quot;database/schema.h2.sql&quot; /&gt;\r\n      &lt;property name=&quot;javax.persistence.schema-generation.database.action&quot; value=&quot;drop-and-create&quot; /&gt;\r\n      &lt;property name=&quot;javax.persistence.sql-load-script-source&quot; value=&quot;database/data.sql&quot; /&gt;\r\n\r\n      &lt;property name=&quot;hibernate.format_sql&quot; value=&quot;true&quot; /&gt;\r\n      &lt;property name=&quot;hibernate.show_sql&quot; value=&quot;false&quot; /&gt;\r\n    &lt;/properties&gt;\r\n  &lt;/persistence-unit&gt;\r\n&lt;/persistence&gt;\r\n```\r\n\r\nThe script `schema.h2.sql` contains:\r\n\r\n```sql\r\n---\r\n--- CREATE TABLE STATEMENT(S)\r\n---\r\ncreate table spell_books (\r\n  id         uuid,\r\n  name       varchar(150) not null,\r\n  updated_at timestamp    not null default current_timestamp(),\r\n  version    integer      not null\r\n);\r\n\r\ncreate table spells (\r\n  id            uuid,\r\n  name          varchar(150) not null,\r\n  updated_at    timestamp    not null default current_timestamp(),\r\n  version       integer      not null,\r\n\r\n  spell_book_id uuid\r\n);\r\n\r\ncreate table wizards (\r\n  id         uuid,\r\n  name       varchar(150) not null,\r\n  updated_at timestamp    not null default current_timestamp(),\r\n  version    integer      not null\r\n);\r\n\r\ncreate table wizards_spell_books (\r\n  spell_book_id uuid      not null,\r\n  wizard_id     uuid      not null,\r\n  updated_at    timestamp not null default current_timestamp()\r\n);\r\n\r\n\r\n---\r\n--- ALTER TABLE STATEMENT(S)\r\n---\r\nalter table spell_books add primary key (id);\r\n\r\nalter table spells add primary key (id);\r\nalter table spells add foreign key (spell_book_id) references spell_books (id);\r\n\r\nalter table wizards add primary key (id);\r\n\r\nalter table wizards_spell_books add foreign key (spell_book_id) references spell_books (id);\r\nalter table wizards_spell_books add foreign key (wizard_id) references wizards (id);\r\n```\r\n\r\nWith this configuration, I&#39;m expecting that any time I run my tests JPA should be able to generate the schema (and populate the data, only used by the tests), but so far I&#39;m always getting errors like these:\r\n\r\n```shell\r\n03-08-2021 20:22:33,414 |-  WARN in org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl:72 [main] - HHH10001002: Using Hibernate built-in connection pool (not for production use!)\r\n03-08-2021 20:22:34,001 |-  WARN in org.hibernate.tool.schema.internal.ExceptionHandlerLoggedImpl:27 [main] - GenerationTarget encountered exception accepting command : Error executing DDL &quot;\r\n    create table spell_books (\r\n       &quot; via JDBC Statement\r\norg.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL &quot;\r\n    create table spell_books (\r\n       &quot; via JDBC Statement\r\n\tat org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:67) ~[hibernate-core-5.4.28.Final.jar:5.4.28.Final]\r\n\tat org.hibernate.tool.schema.internal.SchemaCreatorImpl.applySqlString(SchemaCreatorImpl.java:439) ~[hibernate-core-5.4.28.Final.jar:5.4.28.Final]\r\n\tat org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromScript(SchemaCreatorImpl.java:192) ~[hibernate-core-5.4.28.Final.jar:5.4.28.Final]\r\n\tat org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:162) ~[hibernate-core-5.4.28.Final.jar:5.4.28.Final]\r\n\tat org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:135) ~[hibernate-core-5.4.28.Final.jar:5.4.28.Final]\r\n\tat org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:121) ~[hibernate-core-5.4.28.Final.jar:5.4.28.Final]\r\n\tat org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:156) ~[hibernate-core-5.4.28.Final.jar:5.4.28.Final]\r\n\tat org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:73) ~[hibernate-core-5.4.28.Final.jar:5.4.28.Final]\r\n\tat org.hibernate.internal.SessionFactoryImpl.&lt;init&gt;(SessionFactoryImpl.java:318) ~[hibernate-core-5.4.28.Final.jar:5.4.28.Final]\r\n\tat org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:468) ~[hibernate-core-5.4.28.Final.jar:5.4.28.Final]\r\n\tat org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1259) ~[hibernate-core-5.4.28.Final.jar:5.4.28.Final]\r\n\tat org.hibernate.jpa.HibernatePersistenceProvider.createEntityManagerFactory(HibernatePersistenceProvider.java:56) ~[hibernate-core-5.4.28.Final.jar:5.4.28.Final]\r\n\tat javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:79) ~[javax.persistence-api-2.2.jar:2.2]\r\n\tat javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:54) ~[javax.persistence-api-2.2.jar:2.2]\r\n\tat org.acme.service_layer.support.EntityManagerProducer.entityManagerFactory(EntityManagerProducer.java:23) ~[classes/:?]\r\n\tat org.acme.service_layer.support.EntityManagerProducer.getEntityManager(EntityManagerProducer.java:29) ~[classes/:?]\r\n\tat jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:?]\r\n\tat jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:?]\r\n\tat jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]\r\n\tat java.lang.reflect.Method.invoke(Method.java:566) ~[?:?]\r\n\tat org.jboss.weld.injection.StaticMethodInjectionPoint.invoke(StaticMethodInjectionPoint.java:95) ~[weld-se-shaded-4.0.0.Final.jar:4.0.0.Final]\r\n\tat org.jboss.weld.injection.StaticMethodInjectionPoint.invoke(StaticMethodInjectionPoint.java:85) ~[weld-se-shaded-4.0.0.Final.jar:4.0.0.Final]\r\n\tat org.jboss.weld.injection.producer.ProducerMethodProducer.produce(ProducerMethodProducer.java:103) ~[weld-se-shaded-4.0.0.Final.jar:4.0.0.Final]\r\n\tat org.jboss.weld.injection.producer.AbstractMemberProducer.produce(AbstractMemberProducer.java:161) ~[weld-se-shaded-4.0.0.Final.jar:4.0.0.Final]\r\n\tat org.jboss.weld.bean.AbstractProducerBean.create(AbstractProducerBean.java:180) ~[weld-se-shaded-4.0.0.Final.jar:4.0.0.Final]\r\n\tat org.jboss.weld.junit.ContextImpl.get(ContextImpl.java:69) ~[weld-junit-common-3.0.0.Final.jar:3.0.0.Final]\r\n\tat org.jboss.weld.bean.ContextualInstanceStrategy$DefaultContextualInstanceStrategy.get(ContextualInstanceStrategy.java:100) ~[weld-se-shaded-4.0.0.Final.jar:4.0.0.Final]\r\n\tat org.jboss.weld.bean.ContextualInstanceStrategy$CachingContextualInstanceStrategy.get(ContextualInstanceStrategy.java:177) ~[weld-se-shaded-4.0.0.Final.jar:4.0.0.Final]\r\n\tat org.jboss.weld.bean.ContextualInstance.get(ContextualInstance.java:50) ~[weld-se-shaded-4.0.0.Final.jar:4.0.0.Final]\r\n\tat org.jboss.weld.bean.proxy.ContextBeanInstance.getInstance(ContextBeanInstance.java:102) ~[weld-se-shaded-4.0.0.Final.jar:4.0.0.Final]\r\n\tat org.jboss.weld.bean.proxy.ProxyMethodHandler.invoke(ProxyMethodHandler.java:105) ~[weld-se-shaded-4.0.0.Final.jar:4.0.0.Final]\r\n\tat org.jboss.weldx.persistence.EntityManager$1053374383$Proxy$_$$_WeldClientProxy.getCriteriaBuilder(Unknown Source) ~[weld-se-shaded-4.0.0.Final.jar:?]\r\n\tat org.acme.service_layer.persistence.SpellBookDao.findByName(SpellBookDao.java:19) ~[classes/:?]\r\n\tat org.acme.service_layer.persistence.SpellBookDaoTest.create(SpellBookDaoTest.java:37) ~[classes/:?]\r\n\tat jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:?]\r\n\tat jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:?]\r\n\tat jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]\r\n\tat java.lang.reflect.Method.invoke(Method.java:566) ~[?:?]\r\n\tat org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:628) ~[junit-platform-commons-1.4.1.jar:1.4.1]\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:117) ~[junit-jupiter-engine-5.4.1.jar:5.4.1]\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:184) ~[junit-jupiter-engine-5.4.1.jar:5.4.1]\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.4.1.jar:1.4.1]\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:180) ~[junit-jupiter-engine-5.4.1.jar:5.4.1]\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:127) ~[junit-jupiter-engine-5.4.1.jar:5.4.1]\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68) ~[junit-jupiter-engine-5.4.1.jar:5.4.1]\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:135) ~[junit-platform-engine-1.4.1.jar:1.4.1]\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.4.1.jar:1.4.1]\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:125) ~[junit-platform-engine-1.4.1.jar:1.4.1]\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:135) ~[junit-platform-engine-1.4.1.jar:1.4.1]\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:123) ~[junit-platform-engine-1.4.1.jar:1.4.1]\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.4.1.jar:1.4.1]\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:122) ~[junit-platform-engine-1.4.1.jar:1.4.1]\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:80) ~[junit-platform-engine-1.4.1.jar:1.4.1]\r\n\tat java.util.ArrayList.forEach(ArrayList.java:1541) ~[?:?]\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38) ~[junit-platform-engine-1.4.1.jar:1.4.1]\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:139) ~[junit-platform-engine-1.4.1.jar:1.4.1]\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.4.1.jar:1.4.1]\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:125) ~[junit-platform-engine-1.4.1.jar:1.4.1]\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:135) ~[junit-platform-engine-1.4.1.jar:1.4.1]\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:123) ~[junit-platform-engine-1.4.1.jar:1.4.1]\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.4.1.jar:1.4.1]\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:122) ~[junit-platform-engine-1.4.1.jar:1.4.1]\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:80) ~[junit-platform-engine-1.4.1.jar:1.4.1]\r\n\tat java.util.ArrayList.forEach(ArrayList.java:1541) ~[?:?]\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38) ~[junit-platform-engine-1.4.1.jar:1.4.1]\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:139) ~[junit-platform-engine-1.4.1.jar:1.4.1]\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.4.1.jar:1.4.1]\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:125) ~[junit-platform-engine-1.4.1.jar:1.4.1]\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:135) ~[junit-platform-engine-1.4.1.jar:1.4.1]\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:123) ~[junit-platform-engine-1.4.1.jar:1.4.1]\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.4.1.jar:1.4.1]\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:122) ~[junit-platform-engine-1.4.1.jar:1.4.1]\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:80) ~[junit-platform-engine-1.4.1.jar:1.4.1]\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:32) ~[junit-platform-engine-1.4.1.jar:1.4.1]\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.4.1.jar:1.4.1]\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:51) ~[junit-platform-engine-1.4.1.jar:1.4.1]\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:229) ~[junit-platform-launcher-1.4.1.jar:1.4.1]\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:197) ~[junit-platform-launcher-1.4.1.jar:1.4.1]\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:211) [junit-platform-launcher-1.4.1.jar:1.4.1]\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:191) [junit-platform-launcher-1.4.1.jar:1.4.1]\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128) [junit-platform-launcher-1.4.1.jar:1.4.1]\r\n\tat com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:71) [junit5-rt.jar:?]\r\n\tat com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:33) [junit-rt.jar:?]\r\n\tat com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:220) [junit-rt.jar:?]\r\n\tat com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:53) [junit-rt.jar:?]\r\nCaused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Syntax error in SQL statement &quot;\r\n    CREATE TABLE SPELL_BOOKS (\r\n       [*]&quot;; expected &quot;identifier&quot;; SQL statement:\r\n\r\n    create table spell_books (\r\n        [42001-200]\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:453) ~[h2-1.4.200.jar:1.4.200]\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:429) ~[h2-1.4.200.jar:1.4.200]\r\n\tat org.h2.message.DbException.getSyntaxError(DbException.java:243) ~[h2-1.4.200.jar:1.4.200]\r\n\tat org.h2.command.Parser.readColumnIdentifier(Parser.java:4976) ~[h2-1.4.200.jar:1.4.200]\r\n\tat org.h2.command.Parser.parseTableColumnDefinition(Parser.java:8437) ~[h2-1.4.200.jar:1.4.200]\r\n\tat org.h2.command.Parser.parseCreateTable(Parser.java:8379) ~[h2-1.4.200.jar:1.4.200]\r\n\tat org.h2.command.Parser.parseCreate(Parser.java:6276) ~[h2-1.4.200.jar:1.4.200]\r\n\tat org.h2.command.Parser.parsePrepared(Parser.java:903) ~[h2-1.4.200.jar:1.4.200]\r\n\tat org.h2.command.Parser.parse(Parser.java:843) ~[h2-1.4.200.jar:1.4.200]\r\n\tat org.h2.command.Parser.parse(Parser.java:815) ~[h2-1.4.200.jar:1.4.200]\r\n\tat org.h2.command.Parser.prepareCommand(Parser.java:738) ~[h2-1.4.200.jar:1.4.200]\r\n\tat org.h2.engine.Session.prepareLocal(Session.java:657) ~[h2-1.4.200.jar:1.4.200]\r\n\tat org.h2.engine.Session.prepareCommand(Session.java:595) ~[h2-1.4.200.jar:1.4.200]\r\n\tat org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1235) ~[h2-1.4.200.jar:1.4.200]\r\n\tat org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:212) ~[h2-1.4.200.jar:1.4.200]\r\n\tat org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:201) ~[h2-1.4.200.jar:1.4.200]\r\n\tat org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:54) ~[hibernate-core-5.4.28.Final.jar:5.4.28.Final]\r\n\t... 84 more\r\n03-08-2021 20:22:34,160 |-  WARN in org.hibernate.engine.jdbc.spi.SqlExceptionHelper:137 [main] - SQL Error: 42102, SQLState: 42S02\r\n03-08-2021 20:22:34,161 |- ERROR in org.hibernate.engine.jdbc.spi.SqlExceptionHelper:142 [main] - Table &quot;SPELL_BOOKS&quot; not found; SQL statement:\r\nselect spellbook0_.id as id1_0_, spellbook0_.version as version2_0_, spellbook0_.name as name3_0_ from spell_books spellbook0_ where spellbook0_.name=? [42102-200]\r\n\r\njavax.persistence.PersistenceException: org.hibernate.exception.SQLGrammarException: could not prepare statement\r\n\r\n\tat org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:154)\r\n\tat org.hibernate.query.internal.AbstractProducedQuery.list(AbstractProducedQuery.java:1602)\r\n\tat org.hibernate.query.internal.AbstractProducedQuery.getSingleResult(AbstractProducedQuery.java:1641)\r\n\tat org.hibernate.query.criteria.internal.compile.CriteriaQueryTypeQueryAdapter.getSingleResult(CriteriaQueryTypeQueryAdapter.java:111)\r\n\tat org.acme.service_layer.persistence.SpellBookDao.findByName(SpellBookDao.java:24)\r\n\tat org.acme.service_layer.persistence.SpellBookDaoTest.create(SpellBookDaoTest.java:37)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n\tat org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:628)\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:117)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:184)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:180)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:127)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:135)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:125)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:135)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:123)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:122)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:80)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1541)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:125)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:135)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:123)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:122)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:80)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1541)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:125)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:135)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:123)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:122)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:80)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:32)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:51)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:229)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:197)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:211)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:191)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128)\r\n\tat com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:71)\r\n\tat com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:33)\r\n\tat com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:220)\r\n\tat com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:53)\r\nCaused by: org.hibernate.exception.SQLGrammarException: could not prepare statement\r\n\tat org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:63)\r\n\tat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:42)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:113)\r\n\tat org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:186)\r\n\tat org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareQueryStatement(StatementPreparerImpl.java:151)\r\n\tat org.hibernate.loader.Loader.prepareQueryStatement(Loader.java:2103)\r\n\tat org.hibernate.loader.Loader.executeQueryStatement(Loader.java:2040)\r\n\tat org.hibernate.loader.Loader.executeQueryStatement(Loader.java:2018)\r\n\tat org.hibernate.loader.Loader.doQuery(Loader.java:948)\r\n\tat org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:349)\r\n\tat org.hibernate.loader.Loader.doList(Loader.java:2849)\r\n\tat org.hibernate.loader.Loader.doList(Loader.java:2831)\r\n\tat org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2663)\r\n\tat org.hibernate.loader.Loader.list(Loader.java:2658)\r\n\tat org.hibernate.loader.hql.QueryLoader.list(QueryLoader.java:506)\r\n\tat org.hibernate.hql.internal.ast.QueryTranslatorImpl.list(QueryTranslatorImpl.java:400)\r\n\tat org.hibernate.engine.query.spi.HQLQueryPlan.performList(HQLQueryPlan.java:219)\r\n\tat org.hibernate.internal.SessionImpl.list(SessionImpl.java:1414)\r\n\tat org.hibernate.query.internal.AbstractProducedQuery.doList(AbstractProducedQuery.java:1625)\r\n\tat org.hibernate.query.internal.AbstractProducedQuery.list(AbstractProducedQuery.java:1593)\r\n\t... 55 more\r\nCaused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table &quot;SPELL_BOOKS&quot; not found; SQL statement:\r\nselect spellbook0_.id as id1_0_, spellbook0_.version as version2_0_, spellbook0_.name as name3_0_ from spell_books spellbook0_ where spellbook0_.name=? [42102-200]\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:453)\r\n\tat org.h2.message.DbException.getJdbcSQLException(DbException.java:429)\r\n\tat org.h2.message.DbException.get(DbException.java:205)\r\n\tat org.h2.message.DbException.get(DbException.java:181)\r\n\tat org.h2.command.Parser.readTableOrView(Parser.java:7628)\r\n\tat org.h2.command.Parser.readTableFilter(Parser.java:1970)\r\n\tat org.h2.command.Parser.parseSelectFromPart(Parser.java:2827)\r\n\tat org.h2.command.Parser.parseSelect(Parser.java:2959)\r\n\tat org.h2.command.Parser.parseQuerySub(Parser.java:2817)\r\n\tat org.h2.command.Parser.parseSelectUnion(Parser.java:2649)\r\n\tat org.h2.command.Parser.parseQuery(Parser.java:2620)\r\n\tat org.h2.command.Parser.parsePrepared(Parser.java:868)\r\n\tat org.h2.command.Parser.parse(Parser.java:843)\r\n\tat org.h2.command.Parser.parse(Parser.java:815)\r\n\tat org.h2.command.Parser.prepareCommand(Parser.java:738)\r\n\tat org.h2.engine.Session.prepareLocal(Session.java:657)\r\n\tat org.h2.engine.Session.prepareCommand(Session.java:595)\r\n\tat org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1235)\r\n\tat org.h2.jdbc.JdbcPreparedStatement.&lt;init&gt;(JdbcPreparedStatement.java:76)\r\n\tat org.h2.jdbc.JdbcConnection.prepareStatement(JdbcConnection.java:352)\r\n\tat org.hibernate.engine.jdbc.internal.StatementPreparerImpl$5.doPrepare(StatementPreparerImpl.java:149)\r\n\tat org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:176)\r\n\t... 71 more\r\n```\r\n\r\nI can&#39;t tell what&#39;s wrong with the DDL script(s).\r\n\r\nCan someone point me to what am I doing wrong here?","title":"JPA always fails to create (H2) database schema and tables when using DDL scripts","body":"<p>I'm using JPA on a standard Java project. I have a <code>persistence.xml</code> deployment descriptor that looks like:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;persistence xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns=&quot;http://xmlns.jcp.org/xml/ns/persistence&quot;\n    xsi:schemaLocation=&quot;http://xmlns.jcp.org/xml/ns/persistence http://xmlns.jcp.org/xml/ns/persistence/persistence_2_2.xsd&quot;\n    version=&quot;2.2&quot;&gt;\n  &lt;persistence-unit name=&quot;test&quot; transaction-type=&quot;RESOURCE_LOCAL&quot;&gt;\n    &lt;class&gt;...&lt;/class&gt;\n\n    &lt;properties&gt;\n      &lt;property name=&quot;javax.persistence.jdbc.driver&quot; value=&quot;org.h2.Driver&quot; /&gt;\n      &lt;property name=&quot;javax.persistence.jdbc.password&quot; value=&quot;&quot; /&gt;\n      &lt;property name=&quot;javax.persistence.jdbc.url&quot; value=&quot;jdbc:h2:mem:java_design_patterns;DB_CLOSE_DELAY=-1;MODE=PostgreSQL;&quot; /&gt;\n      &lt;property name=&quot;javax.persistence.jdbc.user&quot; value=&quot;sa&quot; /&gt;\n      &lt;property name=&quot;javax.persistence.schema-generation.create-script-source&quot; value=&quot;database/schema.h2.sql&quot; /&gt;\n      &lt;property name=&quot;javax.persistence.schema-generation.database.action&quot; value=&quot;drop-and-create&quot; /&gt;\n      &lt;property name=&quot;javax.persistence.sql-load-script-source&quot; value=&quot;database/data.sql&quot; /&gt;\n\n      &lt;property name=&quot;hibernate.format_sql&quot; value=&quot;true&quot; /&gt;\n      &lt;property name=&quot;hibernate.show_sql&quot; value=&quot;false&quot; /&gt;\n    &lt;/properties&gt;\n  &lt;/persistence-unit&gt;\n&lt;/persistence&gt;\n</code></pre>\n<p>The script <code>schema.h2.sql</code> contains:</p>\n<pre class=\"lang-sql prettyprint-override\"><code>---\n--- CREATE TABLE STATEMENT(S)\n---\ncreate table spell_books (\n  id         uuid,\n  name       varchar(150) not null,\n  updated_at timestamp    not null default current_timestamp(),\n  version    integer      not null\n);\n\ncreate table spells (\n  id            uuid,\n  name          varchar(150) not null,\n  updated_at    timestamp    not null default current_timestamp(),\n  version       integer      not null,\n\n  spell_book_id uuid\n);\n\ncreate table wizards (\n  id         uuid,\n  name       varchar(150) not null,\n  updated_at timestamp    not null default current_timestamp(),\n  version    integer      not null\n);\n\ncreate table wizards_spell_books (\n  spell_book_id uuid      not null,\n  wizard_id     uuid      not null,\n  updated_at    timestamp not null default current_timestamp()\n);\n\n\n---\n--- ALTER TABLE STATEMENT(S)\n---\nalter table spell_books add primary key (id);\n\nalter table spells add primary key (id);\nalter table spells add foreign key (spell_book_id) references spell_books (id);\n\nalter table wizards add primary key (id);\n\nalter table wizards_spell_books add foreign key (spell_book_id) references spell_books (id);\nalter table wizards_spell_books add foreign key (wizard_id) references wizards (id);\n</code></pre>\n<p>With this configuration, I'm expecting that any time I run my tests JPA should be able to generate the schema (and populate the data, only used by the tests), but so far I'm always getting errors like these:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>03-08-2021 20:22:33,414 |-  WARN in org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl:72 [main] - HHH10001002: Using Hibernate built-in connection pool (not for production use!)\n03-08-2021 20:22:34,001 |-  WARN in org.hibernate.tool.schema.internal.ExceptionHandlerLoggedImpl:27 [main] - GenerationTarget encountered exception accepting command : Error executing DDL &quot;\n    create table spell_books (\n       &quot; via JDBC Statement\norg.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL &quot;\n    create table spell_books (\n       &quot; via JDBC Statement\n    at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:67) ~[hibernate-core-5.4.28.Final.jar:5.4.28.Final]\n    at org.hibernate.tool.schema.internal.SchemaCreatorImpl.applySqlString(SchemaCreatorImpl.java:439) ~[hibernate-core-5.4.28.Final.jar:5.4.28.Final]\n    at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromScript(SchemaCreatorImpl.java:192) ~[hibernate-core-5.4.28.Final.jar:5.4.28.Final]\n    at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:162) ~[hibernate-core-5.4.28.Final.jar:5.4.28.Final]\n    at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:135) ~[hibernate-core-5.4.28.Final.jar:5.4.28.Final]\n    at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:121) ~[hibernate-core-5.4.28.Final.jar:5.4.28.Final]\n    at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:156) ~[hibernate-core-5.4.28.Final.jar:5.4.28.Final]\n    at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:73) ~[hibernate-core-5.4.28.Final.jar:5.4.28.Final]\n    at org.hibernate.internal.SessionFactoryImpl.&lt;init&gt;(SessionFactoryImpl.java:318) ~[hibernate-core-5.4.28.Final.jar:5.4.28.Final]\n    at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:468) ~[hibernate-core-5.4.28.Final.jar:5.4.28.Final]\n    at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1259) ~[hibernate-core-5.4.28.Final.jar:5.4.28.Final]\n    at org.hibernate.jpa.HibernatePersistenceProvider.createEntityManagerFactory(HibernatePersistenceProvider.java:56) ~[hibernate-core-5.4.28.Final.jar:5.4.28.Final]\n    at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:79) ~[javax.persistence-api-2.2.jar:2.2]\n    at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:54) ~[javax.persistence-api-2.2.jar:2.2]\n    at org.acme.service_layer.support.EntityManagerProducer.entityManagerFactory(EntityManagerProducer.java:23) ~[classes/:?]\n    at org.acme.service_layer.support.EntityManagerProducer.getEntityManager(EntityManagerProducer.java:29) ~[classes/:?]\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:?]\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:?]\n    at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]\n    at java.lang.reflect.Method.invoke(Method.java:566) ~[?:?]\n    at org.jboss.weld.injection.StaticMethodInjectionPoint.invoke(StaticMethodInjectionPoint.java:95) ~[weld-se-shaded-4.0.0.Final.jar:4.0.0.Final]\n    at org.jboss.weld.injection.StaticMethodInjectionPoint.invoke(StaticMethodInjectionPoint.java:85) ~[weld-se-shaded-4.0.0.Final.jar:4.0.0.Final]\n    at org.jboss.weld.injection.producer.ProducerMethodProducer.produce(ProducerMethodProducer.java:103) ~[weld-se-shaded-4.0.0.Final.jar:4.0.0.Final]\n    at org.jboss.weld.injection.producer.AbstractMemberProducer.produce(AbstractMemberProducer.java:161) ~[weld-se-shaded-4.0.0.Final.jar:4.0.0.Final]\n    at org.jboss.weld.bean.AbstractProducerBean.create(AbstractProducerBean.java:180) ~[weld-se-shaded-4.0.0.Final.jar:4.0.0.Final]\n    at org.jboss.weld.junit.ContextImpl.get(ContextImpl.java:69) ~[weld-junit-common-3.0.0.Final.jar:3.0.0.Final]\n    at org.jboss.weld.bean.ContextualInstanceStrategy$DefaultContextualInstanceStrategy.get(ContextualInstanceStrategy.java:100) ~[weld-se-shaded-4.0.0.Final.jar:4.0.0.Final]\n    at org.jboss.weld.bean.ContextualInstanceStrategy$CachingContextualInstanceStrategy.get(ContextualInstanceStrategy.java:177) ~[weld-se-shaded-4.0.0.Final.jar:4.0.0.Final]\n    at org.jboss.weld.bean.ContextualInstance.get(ContextualInstance.java:50) ~[weld-se-shaded-4.0.0.Final.jar:4.0.0.Final]\n    at org.jboss.weld.bean.proxy.ContextBeanInstance.getInstance(ContextBeanInstance.java:102) ~[weld-se-shaded-4.0.0.Final.jar:4.0.0.Final]\n    at org.jboss.weld.bean.proxy.ProxyMethodHandler.invoke(ProxyMethodHandler.java:105) ~[weld-se-shaded-4.0.0.Final.jar:4.0.0.Final]\n    at org.jboss.weldx.persistence.EntityManager$1053374383$Proxy$_$$_WeldClientProxy.getCriteriaBuilder(Unknown Source) ~[weld-se-shaded-4.0.0.Final.jar:?]\n    at org.acme.service_layer.persistence.SpellBookDao.findByName(SpellBookDao.java:19) ~[classes/:?]\n    at org.acme.service_layer.persistence.SpellBookDaoTest.create(SpellBookDaoTest.java:37) ~[classes/:?]\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:?]\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:?]\n    at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]\n    at java.lang.reflect.Method.invoke(Method.java:566) ~[?:?]\n    at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:628) ~[junit-platform-commons-1.4.1.jar:1.4.1]\n    at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:117) ~[junit-jupiter-engine-5.4.1.jar:5.4.1]\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:184) ~[junit-jupiter-engine-5.4.1.jar:5.4.1]\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.4.1.jar:1.4.1]\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:180) ~[junit-jupiter-engine-5.4.1.jar:5.4.1]\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:127) ~[junit-jupiter-engine-5.4.1.jar:5.4.1]\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68) ~[junit-jupiter-engine-5.4.1.jar:5.4.1]\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:135) ~[junit-platform-engine-1.4.1.jar:1.4.1]\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.4.1.jar:1.4.1]\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:125) ~[junit-platform-engine-1.4.1.jar:1.4.1]\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:135) ~[junit-platform-engine-1.4.1.jar:1.4.1]\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:123) ~[junit-platform-engine-1.4.1.jar:1.4.1]\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.4.1.jar:1.4.1]\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:122) ~[junit-platform-engine-1.4.1.jar:1.4.1]\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:80) ~[junit-platform-engine-1.4.1.jar:1.4.1]\n    at java.util.ArrayList.forEach(ArrayList.java:1541) ~[?:?]\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38) ~[junit-platform-engine-1.4.1.jar:1.4.1]\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:139) ~[junit-platform-engine-1.4.1.jar:1.4.1]\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.4.1.jar:1.4.1]\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:125) ~[junit-platform-engine-1.4.1.jar:1.4.1]\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:135) ~[junit-platform-engine-1.4.1.jar:1.4.1]\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:123) ~[junit-platform-engine-1.4.1.jar:1.4.1]\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.4.1.jar:1.4.1]\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:122) ~[junit-platform-engine-1.4.1.jar:1.4.1]\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:80) ~[junit-platform-engine-1.4.1.jar:1.4.1]\n    at java.util.ArrayList.forEach(ArrayList.java:1541) ~[?:?]\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38) ~[junit-platform-engine-1.4.1.jar:1.4.1]\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:139) ~[junit-platform-engine-1.4.1.jar:1.4.1]\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.4.1.jar:1.4.1]\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:125) ~[junit-platform-engine-1.4.1.jar:1.4.1]\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:135) ~[junit-platform-engine-1.4.1.jar:1.4.1]\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:123) ~[junit-platform-engine-1.4.1.jar:1.4.1]\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.4.1.jar:1.4.1]\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:122) ~[junit-platform-engine-1.4.1.jar:1.4.1]\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:80) ~[junit-platform-engine-1.4.1.jar:1.4.1]\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:32) ~[junit-platform-engine-1.4.1.jar:1.4.1]\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.4.1.jar:1.4.1]\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:51) ~[junit-platform-engine-1.4.1.jar:1.4.1]\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:229) ~[junit-platform-launcher-1.4.1.jar:1.4.1]\n    at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:197) ~[junit-platform-launcher-1.4.1.jar:1.4.1]\n    at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:211) [junit-platform-launcher-1.4.1.jar:1.4.1]\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:191) [junit-platform-launcher-1.4.1.jar:1.4.1]\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128) [junit-platform-launcher-1.4.1.jar:1.4.1]\n    at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:71) [junit5-rt.jar:?]\n    at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:33) [junit-rt.jar:?]\n    at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:220) [junit-rt.jar:?]\n    at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:53) [junit-rt.jar:?]\nCaused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Syntax error in SQL statement &quot;\n    CREATE TABLE SPELL_BOOKS (\n       [*]&quot;; expected &quot;identifier&quot;; SQL statement:\n\n    create table spell_books (\n        [42001-200]\n    at org.h2.message.DbException.getJdbcSQLException(DbException.java:453) ~[h2-1.4.200.jar:1.4.200]\n    at org.h2.message.DbException.getJdbcSQLException(DbException.java:429) ~[h2-1.4.200.jar:1.4.200]\n    at org.h2.message.DbException.getSyntaxError(DbException.java:243) ~[h2-1.4.200.jar:1.4.200]\n    at org.h2.command.Parser.readColumnIdentifier(Parser.java:4976) ~[h2-1.4.200.jar:1.4.200]\n    at org.h2.command.Parser.parseTableColumnDefinition(Parser.java:8437) ~[h2-1.4.200.jar:1.4.200]\n    at org.h2.command.Parser.parseCreateTable(Parser.java:8379) ~[h2-1.4.200.jar:1.4.200]\n    at org.h2.command.Parser.parseCreate(Parser.java:6276) ~[h2-1.4.200.jar:1.4.200]\n    at org.h2.command.Parser.parsePrepared(Parser.java:903) ~[h2-1.4.200.jar:1.4.200]\n    at org.h2.command.Parser.parse(Parser.java:843) ~[h2-1.4.200.jar:1.4.200]\n    at org.h2.command.Parser.parse(Parser.java:815) ~[h2-1.4.200.jar:1.4.200]\n    at org.h2.command.Parser.prepareCommand(Parser.java:738) ~[h2-1.4.200.jar:1.4.200]\n    at org.h2.engine.Session.prepareLocal(Session.java:657) ~[h2-1.4.200.jar:1.4.200]\n    at org.h2.engine.Session.prepareCommand(Session.java:595) ~[h2-1.4.200.jar:1.4.200]\n    at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1235) ~[h2-1.4.200.jar:1.4.200]\n    at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:212) ~[h2-1.4.200.jar:1.4.200]\n    at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:201) ~[h2-1.4.200.jar:1.4.200]\n    at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:54) ~[hibernate-core-5.4.28.Final.jar:5.4.28.Final]\n    ... 84 more\n03-08-2021 20:22:34,160 |-  WARN in org.hibernate.engine.jdbc.spi.SqlExceptionHelper:137 [main] - SQL Error: 42102, SQLState: 42S02\n03-08-2021 20:22:34,161 |- ERROR in org.hibernate.engine.jdbc.spi.SqlExceptionHelper:142 [main] - Table &quot;SPELL_BOOKS&quot; not found; SQL statement:\nselect spellbook0_.id as id1_0_, spellbook0_.version as version2_0_, spellbook0_.name as name3_0_ from spell_books spellbook0_ where spellbook0_.name=? [42102-200]\n\njavax.persistence.PersistenceException: org.hibernate.exception.SQLGrammarException: could not prepare statement\n\n    at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:154)\n    at org.hibernate.query.internal.AbstractProducedQuery.list(AbstractProducedQuery.java:1602)\n    at org.hibernate.query.internal.AbstractProducedQuery.getSingleResult(AbstractProducedQuery.java:1641)\n    at org.hibernate.query.criteria.internal.compile.CriteriaQueryTypeQueryAdapter.getSingleResult(CriteriaQueryTypeQueryAdapter.java:111)\n    at org.acme.service_layer.persistence.SpellBookDao.findByName(SpellBookDao.java:24)\n    at org.acme.service_layer.persistence.SpellBookDaoTest.create(SpellBookDaoTest.java:37)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n    at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:628)\n    at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:117)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:184)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:180)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:127)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:135)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:125)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:135)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:123)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:122)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:80)\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1541)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:139)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:125)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:135)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:123)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:122)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:80)\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1541)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:139)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:125)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:135)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:123)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:122)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:80)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:32)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:51)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:229)\n    at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:197)\n    at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:211)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:191)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128)\n    at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:71)\n    at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:33)\n    at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:220)\n    at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:53)\nCaused by: org.hibernate.exception.SQLGrammarException: could not prepare statement\n    at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:63)\n    at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:42)\n    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:113)\n    at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:186)\n    at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareQueryStatement(StatementPreparerImpl.java:151)\n    at org.hibernate.loader.Loader.prepareQueryStatement(Loader.java:2103)\n    at org.hibernate.loader.Loader.executeQueryStatement(Loader.java:2040)\n    at org.hibernate.loader.Loader.executeQueryStatement(Loader.java:2018)\n    at org.hibernate.loader.Loader.doQuery(Loader.java:948)\n    at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:349)\n    at org.hibernate.loader.Loader.doList(Loader.java:2849)\n    at org.hibernate.loader.Loader.doList(Loader.java:2831)\n    at org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2663)\n    at org.hibernate.loader.Loader.list(Loader.java:2658)\n    at org.hibernate.loader.hql.QueryLoader.list(QueryLoader.java:506)\n    at org.hibernate.hql.internal.ast.QueryTranslatorImpl.list(QueryTranslatorImpl.java:400)\n    at org.hibernate.engine.query.spi.HQLQueryPlan.performList(HQLQueryPlan.java:219)\n    at org.hibernate.internal.SessionImpl.list(SessionImpl.java:1414)\n    at org.hibernate.query.internal.AbstractProducedQuery.doList(AbstractProducedQuery.java:1625)\n    at org.hibernate.query.internal.AbstractProducedQuery.list(AbstractProducedQuery.java:1593)\n    ... 55 more\nCaused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table &quot;SPELL_BOOKS&quot; not found; SQL statement:\nselect spellbook0_.id as id1_0_, spellbook0_.version as version2_0_, spellbook0_.name as name3_0_ from spell_books spellbook0_ where spellbook0_.name=? [42102-200]\n    at org.h2.message.DbException.getJdbcSQLException(DbException.java:453)\n    at org.h2.message.DbException.getJdbcSQLException(DbException.java:429)\n    at org.h2.message.DbException.get(DbException.java:205)\n    at org.h2.message.DbException.get(DbException.java:181)\n    at org.h2.command.Parser.readTableOrView(Parser.java:7628)\n    at org.h2.command.Parser.readTableFilter(Parser.java:1970)\n    at org.h2.command.Parser.parseSelectFromPart(Parser.java:2827)\n    at org.h2.command.Parser.parseSelect(Parser.java:2959)\n    at org.h2.command.Parser.parseQuerySub(Parser.java:2817)\n    at org.h2.command.Parser.parseSelectUnion(Parser.java:2649)\n    at org.h2.command.Parser.parseQuery(Parser.java:2620)\n    at org.h2.command.Parser.parsePrepared(Parser.java:868)\n    at org.h2.command.Parser.parse(Parser.java:843)\n    at org.h2.command.Parser.parse(Parser.java:815)\n    at org.h2.command.Parser.prepareCommand(Parser.java:738)\n    at org.h2.engine.Session.prepareLocal(Session.java:657)\n    at org.h2.engine.Session.prepareCommand(Session.java:595)\n    at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1235)\n    at org.h2.jdbc.JdbcPreparedStatement.&lt;init&gt;(JdbcPreparedStatement.java:76)\n    at org.h2.jdbc.JdbcConnection.prepareStatement(JdbcConnection.java:352)\n    at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$5.doPrepare(StatementPreparerImpl.java:149)\n    at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:176)\n    ... 71 more\n</code></pre>\n<p>I can't tell what's wrong with the DDL script(s).</p>\n<p>Can someone point me to what am I doing wrong here?</p>\n"},{"tags":["java","performance","swing","javafx"],"comments":[{"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"score":5,"creation_date":1495546122,"post_id":44136040,"comment_id":75290926,"body_markdown":"The difference in performance (beyond any small difference) is almost invariably due to inexperience in the toolkit that is slower. But since I do Swing rather than Java-FX, I&#39;ll leave it to the Java-FX gurus to spot the inefficiencies in that code.","body":"The difference in performance (beyond any small difference) is almost invariably due to inexperience in the toolkit that is slower. But since I do Swing rather than Java-FX, I&#39;ll leave it to the Java-FX gurus to spot the inefficiencies in that code."},{"owner":{"account_id":5237964,"reputation":6741,"user_id":4185959,"accept_rate":64,"display_name":"Itai"},"score":0,"creation_date":1495547625,"post_id":44136040,"comment_id":75292137,"body_markdown":"This may be completely off, but in attempt to rule out any unrelated issues it may be interesting to use `Point2D.Double` for the Swing implementation. My guess is that it won&#39;t make too much of a difference, but one can&#39;t help but wonder how much of an effect using `double` instead of `int` has on the JavaFX version&#39;s performance...","body":"This may be completely off, but in attempt to rule out any unrelated issues it may be interesting to use <code>Point2D.Double</code> for the Swing implementation. My guess is that it won&#39;t make too much of a difference, but one can&#39;t help but wonder how much of an effect using <code>double</code> instead of <code>int</code> has on the JavaFX version&#39;s performance..."},{"owner":{"account_id":4962253,"reputation":18492,"user_id":3992939,"accept_rate":73,"display_name":"c0der"},"score":0,"creation_date":1495548553,"post_id":44136040,"comment_id":75292896,"body_markdown":"@sillyfly Thanks for the suggestion. I just ran a test using `java.awt.Point` in the javafx implementation, to see the impact of the reduced accuracy. It made a small change reducing the overall time from ~12 sec to ~11.","body":"@sillyfly Thanks for the suggestion. I just ran a test using <code>java.awt.Point</code> in the javafx implementation, to see the impact of the reduced accuracy. It made a small change reducing the overall time from ~12 sec to ~11."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":1,"creation_date":1495550131,"post_id":44136040,"comment_id":75294033,"body_markdown":"@AndrewThompson’s assessment is correct.  Your inexperience with JavaFX, much like in your Swing code, needs to be corrected before performance issues can be attributed to the toolkit.","body":"@AndrewThompson’s assessment is correct.  Your inexperience with JavaFX, much like in your Swing code, needs to be corrected before performance issues can be attributed to the toolkit."},{"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"score":3,"creation_date":1495555904,"post_id":44136040,"comment_id":75298248,"body_markdown":"The Swing example _flattens_ the image to 360,000 pixels; the JavaFX example strokes almost 2.4 million polygons. Have you tried [this example](https://stackoverflow.com/a/44056730/230513) with the triangles?","body":"The Swing example <i>flattens</i> the image to 360,000 pixels; the JavaFX example strokes almost 2.4 million polygons. Have you tried <a href=\"https://stackoverflow.com/a/44056730/230513\">this example</a> with the triangles?"},{"owner":{"account_id":4962253,"reputation":18492,"user_id":3992939,"accept_rate":73,"display_name":"c0der"},"score":0,"creation_date":1495556559,"post_id":44136040,"comment_id":75298642,"body_markdown":"I did not try to convert the fractal trees to triangles, but I will. Can you explain where do you see a difference between the two implementation ? The number of triangles counted is the same in both.","body":"I did not try to convert the fractal trees to triangles, but I will. Can you explain where do you see a difference between the two implementation ? The number of triangles counted is the same in both."}],"answers":[{"tags":[],"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"down_vote_count":0,"up_vote_count":25,"is_accepted":true,"score":25,"last_activity_date":1658403898,"creation_date":1495562252,"answer_id":44141878,"question_id":44136040,"body_markdown":"The Swing example _flattens_ the image to 600&lt;sup&gt;2&lt;/sup&gt; = 360,000 pixels. In contrast, the JavaFX example strokes almost 2.4 million overlapping polygons when finally rendered. Note that your JavaFX example measures _both_ the time to compose the fractal _and_ the time to render it in the [scene graph][1].\r\n\r\nIf you want to preserve the strokes comprising the fractal, compose the result in a `Canvas`, as shown [here][2].\r\n\r\nIf a flat `Image` is sufficient, compose the result in a `BufferedImage`, convert it to a JavaFX `Image`, and display it in an `ImageView`, as shown below. The JavaFX result is over a second _faster_ than the Swing example on my  hardware.\r\n\r\nBecause [`SwingFXUtils.toFXImage`][3] makes a _copy_, a background `Task&lt;Image&gt;` could continue to update a single `BufferedImage` while publishing interim `Image` results via `updateValue()`. Alternatively, this [`MandelbrotSet`][4] features a `Task` that updates a `WritableImage` via its `PixelWriter`.\r\n\r\n[![image][5]][5]\r\n\r\n    import java.awt.Color;\r\n    import java.awt.Graphics2D;\r\n    import java.awt.Point;\r\n    import java.awt.Polygon;\r\n    import java.awt.image.BufferedImage;\r\n    import javafx.application.Application;\r\n    import javafx.embed.swing.SwingFXUtils;\r\n    import javafx.scene.Scene;\r\n    import javafx.scene.image.Image;\r\n    import javafx.scene.image.ImageView;\r\n    import javafx.scene.image.WritableImage;\r\n    import javafx.scene.layout.StackPane;\r\n    import javafx.stage.Stage;\r\n    \r\n    /**\r\n     * @see https://stackoverflow.com/q/44136040/230513\r\n     */\r\n    public class BufferedImageTest extends Application {\r\n    \r\n        private static final int PANEL_WIDTH = 600, PANEL_HEIGHT = 600;\r\n        private static final int TRI_WIDTH = 500, TRI_HEIGHT = 500;\r\n        private static final int SIDE_GAP = (PANEL_WIDTH - TRI_WIDTH) / 2;\r\n        private static final int TOP_GAP = (PANEL_HEIGHT - TRI_HEIGHT) / 2;\r\n        private final int numberOfLevels = 13;\r\n        private int countTriangles;\r\n    \r\n        @Override\r\n        public void start(Stage stage) {\r\n            stage.setTitle(&quot;BufferedImageTest&quot;);\r\n            StackPane root = new StackPane();\r\n            Scene scene = new Scene(root);\r\n            root.getChildren().add(new ImageView(createImage()));\r\n            stage.setScene(scene);\r\n            stage.show();\r\n        }\r\n    \r\n        private Image createImage() {\r\n            BufferedImage bi = new BufferedImage(\r\n                PANEL_WIDTH, PANEL_HEIGHT, BufferedImage.TYPE_INT_ARGB);\r\n            Graphics2D g = bi.createGraphics();\r\n            g.setPaint(Color.white);\r\n            g.fillRect(0, 0, PANEL_WIDTH, PANEL_HEIGHT);\r\n            Point top = new Point(PANEL_WIDTH / 2, TOP_GAP);\r\n            Point left = new Point(SIDE_GAP, TOP_GAP + TRI_HEIGHT);\r\n            Point right = new Point(SIDE_GAP + TRI_WIDTH, TOP_GAP + TRI_HEIGHT);\r\n            g.setColor(Color.red);\r\n            long startTime = System.currentTimeMillis();\r\n            drawTriangle(g, numberOfLevels, top, left, right);\r\n            g.setPaint(Color.black);\r\n            g.drawString(&quot;Number of triangles: &quot; + countTriangles, 15, 15);\r\n            g.drawString(&quot;Time : &quot; + (System.currentTimeMillis() - startTime) + &quot; ms&quot;, 15, 35);\r\n            g.drawString(&quot;Levels: &quot; + numberOfLevels, 15, 50);\r\n            WritableImage image = SwingFXUtils.toFXImage(bi, null);\r\n            g.dispose();\r\n            return image;\r\n        }\r\n    \r\n        private void drawTriangle(Graphics2D g, int levels, Point top, Point left, Point right) {\r\n            if (levels &lt; 0) {\r\n                return;\r\n            }\r\n            countTriangles++;\r\n            Polygon tri = new Polygon();\r\n            tri.addPoint(top.x, top.y);\r\n            tri.addPoint(left.x, left.y);\r\n            tri.addPoint(right.x, right.y);\r\n            g.drawPolygon(tri);\r\n    \r\n            // Get the midpoint on each edge in the triangle\r\n            Point p12 = midpoint(top, left);\r\n            Point p23 = midpoint(left, right);\r\n            Point p31 = midpoint(right, top);\r\n    \r\n            // recurse on 3 triangular areas\r\n            drawTriangle(g, levels - 1, top, p12, p31);\r\n            drawTriangle(g, levels - 1, p12, left, p23);\r\n            drawTriangle(g, levels - 1, p31, p23, right);\r\n        }\r\n    \r\n        private Point midpoint(Point p1, Point p2) {\r\n            return new Point((p1.x + p2.x) / 2, (p1.y + p2.y) / 2);\r\n        }\r\n    \r\n        public static void main(String[] args) {\r\n            launch(args);\r\n        }\r\n    \r\n    }\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/javafx/get-started-tutorial/jfx-architecture.htm\r\n  [2]: https://stackoverflow.com/a/44056730/230513\r\n  [3]: https://docs.oracle.com/javase/8/javafx/api/javafx/embed/swing/SwingFXUtils.html#toFXImage-java.awt.image.BufferedImage-javafx.scene.image.WritableImage-\r\n  [4]: https://github.com/openjdk/jfx/tree/master/apps/samples/MandelbrotSet\r\n  [5]: https://i.stack.imgur.com/ZsYce.png\r\n  [6]: https://i.stack.imgur.com/8X8ti.png","title":"Performance of JavaFx Gui vs Swing","body":"<p>The Swing example <em>flattens</em> the image to 600<sup>2</sup> = 360,000 pixels. In contrast, the JavaFX example strokes almost 2.4 million overlapping polygons when finally rendered. Note that your JavaFX example measures <em>both</em> the time to compose the fractal <em>and</em> the time to render it in the <a href=\"https://docs.oracle.com/javase/8/javafx/get-started-tutorial/jfx-architecture.htm\" rel=\"nofollow noreferrer\">scene graph</a>.</p>\n<p>If you want to preserve the strokes comprising the fractal, compose the result in a <code>Canvas</code>, as shown <a href=\"https://stackoverflow.com/a/44056730/230513\">here</a>.</p>\n<p>If a flat <code>Image</code> is sufficient, compose the result in a <code>BufferedImage</code>, convert it to a JavaFX <code>Image</code>, and display it in an <code>ImageView</code>, as shown below. The JavaFX result is over a second <em>faster</em> than the Swing example on my  hardware.</p>\n<p>Because <a href=\"https://docs.oracle.com/javase/8/javafx/api/javafx/embed/swing/SwingFXUtils.html#toFXImage-java.awt.image.BufferedImage-javafx.scene.image.WritableImage-\" rel=\"nofollow noreferrer\"><code>SwingFXUtils.toFXImage</code></a> makes a <em>copy</em>, a background <code>Task&lt;Image&gt;</code> could continue to update a single <code>BufferedImage</code> while publishing interim <code>Image</code> results via <code>updateValue()</code>. Alternatively, this <a href=\"https://github.com/openjdk/jfx/tree/master/apps/samples/MandelbrotSet\" rel=\"nofollow noreferrer\"><code>MandelbrotSet</code></a> features a <code>Task</code> that updates a <code>WritableImage</code> via its <code>PixelWriter</code>.</p>\n<p><a href=\"https://i.stack.imgur.com/ZsYce.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZsYce.png\" alt=\"image\" /></a></p>\n<pre><code>import java.awt.Color;\nimport java.awt.Graphics2D;\nimport java.awt.Point;\nimport java.awt.Polygon;\nimport java.awt.image.BufferedImage;\nimport javafx.application.Application;\nimport javafx.embed.swing.SwingFXUtils;\nimport javafx.scene.Scene;\nimport javafx.scene.image.Image;\nimport javafx.scene.image.ImageView;\nimport javafx.scene.image.WritableImage;\nimport javafx.scene.layout.StackPane;\nimport javafx.stage.Stage;\n\n/**\n * @see https://stackoverflow.com/q/44136040/230513\n */\npublic class BufferedImageTest extends Application {\n\n    private static final int PANEL_WIDTH = 600, PANEL_HEIGHT = 600;\n    private static final int TRI_WIDTH = 500, TRI_HEIGHT = 500;\n    private static final int SIDE_GAP = (PANEL_WIDTH - TRI_WIDTH) / 2;\n    private static final int TOP_GAP = (PANEL_HEIGHT - TRI_HEIGHT) / 2;\n    private final int numberOfLevels = 13;\n    private int countTriangles;\n\n    @Override\n    public void start(Stage stage) {\n        stage.setTitle(&quot;BufferedImageTest&quot;);\n        StackPane root = new StackPane();\n        Scene scene = new Scene(root);\n        root.getChildren().add(new ImageView(createImage()));\n        stage.setScene(scene);\n        stage.show();\n    }\n\n    private Image createImage() {\n        BufferedImage bi = new BufferedImage(\n            PANEL_WIDTH, PANEL_HEIGHT, BufferedImage.TYPE_INT_ARGB);\n        Graphics2D g = bi.createGraphics();\n        g.setPaint(Color.white);\n        g.fillRect(0, 0, PANEL_WIDTH, PANEL_HEIGHT);\n        Point top = new Point(PANEL_WIDTH / 2, TOP_GAP);\n        Point left = new Point(SIDE_GAP, TOP_GAP + TRI_HEIGHT);\n        Point right = new Point(SIDE_GAP + TRI_WIDTH, TOP_GAP + TRI_HEIGHT);\n        g.setColor(Color.red);\n        long startTime = System.currentTimeMillis();\n        drawTriangle(g, numberOfLevels, top, left, right);\n        g.setPaint(Color.black);\n        g.drawString(&quot;Number of triangles: &quot; + countTriangles, 15, 15);\n        g.drawString(&quot;Time : &quot; + (System.currentTimeMillis() - startTime) + &quot; ms&quot;, 15, 35);\n        g.drawString(&quot;Levels: &quot; + numberOfLevels, 15, 50);\n        WritableImage image = SwingFXUtils.toFXImage(bi, null);\n        g.dispose();\n        return image;\n    }\n\n    private void drawTriangle(Graphics2D g, int levels, Point top, Point left, Point right) {\n        if (levels &lt; 0) {\n            return;\n        }\n        countTriangles++;\n        Polygon tri = new Polygon();\n        tri.addPoint(top.x, top.y);\n        tri.addPoint(left.x, left.y);\n        tri.addPoint(right.x, right.y);\n        g.drawPolygon(tri);\n\n        // Get the midpoint on each edge in the triangle\n        Point p12 = midpoint(top, left);\n        Point p23 = midpoint(left, right);\n        Point p31 = midpoint(right, top);\n\n        // recurse on 3 triangular areas\n        drawTriangle(g, levels - 1, top, p12, p31);\n        drawTriangle(g, levels - 1, p12, left, p23);\n        drawTriangle(g, levels - 1, p31, p23, right);\n    }\n\n    private Point midpoint(Point p1, Point p2) {\n        return new Point((p1.x + p2.x) / 2, (p1.y + p2.y) / 2);\n    }\n\n    public static void main(String[] args) {\n        launch(args);\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":4962253,"reputation":18492,"user_id":3992939,"accept_rate":73,"display_name":"c0der"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":18039,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"accepted_answer_id":44141878,"answer_count":1,"score":11,"last_activity_date":1658403898,"creation_date":1495545558,"question_id":44136040,"body_markdown":"I wrote two simple programs, both draw the same Sierpinski Triangle:\r\n[![enter image description here][1]][1]\r\n&lt;br&gt;One program was implemented using swing, and one using javafx.\r\nThere is a very significant performance difference, swing implementation being consistently much faster:&lt;br&gt;&lt;br&gt;\r\n[![enter image description here][2]][2]\r\n\r\n&lt;br&gt;(In this test case : Swing over 1 sec. Javafx over 12 seconds) &lt;br&gt;Is it to be expected or is there something very wrong with my javafx implementation ? \r\n\r\n**Swing implementation** \r\n\r\n    import java.awt.BorderLayout;\r\n    import java.awt.Color;\r\n    import java.awt.Dimension;\r\n    import java.awt.Font;\r\n    import java.awt.Graphics;\r\n    import java.awt.Graphics2D;\r\n    import java.awt.Point;\r\n    import java.awt.Polygon;\r\n    import java.awt.image.BufferedImage;\r\n    import javax.swing.JFrame;\r\n    import javax.swing.JPanel;\r\n    import javax.swing.SwingUtilities;\r\n    \r\n    public class SimpleSrpnskTriSw {\r\n    \r\n    \tprivate Triangles triPanel;\r\n    \r\n    \tSimpleSrpnskTriSw(int numberOfLevels){\r\n    \r\n    \t\tJFrame frame = new JFrame(&quot;Sierpinski Triangles (swing)&quot;);\r\n    \t\tframe.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n    \r\n    \t\ttriPanel = new Triangles();\r\n    \t\tframe.add(triPanel, BorderLayout.CENTER);\r\n    \t\tframe.pack();\r\n    \r\n    \t\tframe.setResizable(false);\r\n    \t\tframe.setVisible(true);\r\n    \r\n    \t\ttriPanel.draw(numberOfLevels);\r\n    \t}\r\n    \r\n    \tclass Triangles extends JPanel{\r\n    \r\n    \t\tprivate static final int PANEL_WIDTH =600, PANEL_HEIGHT = 600;\r\n    \t\tprivate static final int TRI_WIDTH= 500, TRI_HEIGHT= 500;\r\n    \t\tprivate static final int SIDE_GAP = (PANEL_WIDTH - TRI_WIDTH)/2;\r\n    \t\tprivate static final int TOP_GAP = (PANEL_HEIGHT - TRI_HEIGHT)/2;\r\n    \r\n    \t\tprivate int countTriangles;\r\n    \t\tprivate long startTime;\r\n    \t\tboolean working;\r\n    \t\tprivate int numberOfLevels = 0;\r\n    \r\n    \t\tTriangles() {\r\n    \r\n    \t\t\tsetPreferredSize(new Dimension(PANEL_WIDTH, PANEL_HEIGHT));\r\n    \t\t\tstartTime = System.currentTimeMillis();\r\n    \t\t\tcountTriangles = 0;\r\n    \t\t\tworking = true;\r\n    \t\t\tdraw();\r\n    \t\t}\r\n    \r\n    \t\tvoid draw(int numLevels) {\r\n    \r\n    \t\t\tnumberOfLevels = numLevels;\r\n    \t\t\tworking = true;\r\n    \t\t\tdraw();\r\n    \t\t}\r\n    \r\n    \t\tvoid draw() {\r\n    \r\n    \t\t\tstartTime = System.currentTimeMillis();\r\n    \t\t\tcountTriangles = 0;\r\n    \r\n    \t\t\tSwingUtilities.invokeLater(new Runnable() {\r\n    \t\t\t\t@Override\r\n    \t\t\t\tpublic void run() {\r\n    \r\n    \t\t\t\t\trepaint();\r\n    \t\t\t\t}\r\n    \t\t\t});\r\n    \t\t}\r\n    \r\n    \t\t@Override\r\n    \t\tpublic void paintComponent(Graphics g) {\r\n    \r\n    \t\t\tsuper.paintComponent(g);\r\n    \t\t\tg.setFont(new Font(&quot;Ariel&quot;, Font.PLAIN, 14));\r\n    \r\n    \t\t\tif(working) {\r\n    \r\n    \t\t\t\tg.setColor(getBackground());\r\n    \t\t\t\tg.fillRect(0,0,PANEL_WIDTH,PANEL_HEIGHT);\r\n    \t\t\t\tg.setColor(getForeground());\r\n    \r\n    \t\t\t\tg.drawString(&quot;Working.........&quot;, 15, 15);\r\n    \t\t\t\tworking = false;\r\n    \t\t\t\treturn;\r\n    \t\t\t}\r\n    \r\n    \t\t\tif(numberOfLevels &lt;= 0 ) {\r\n    \t\t\t\treturn;\r\n    \t\t\t}\r\n    \t\t\tPoint top = new Point(PANEL_WIDTH/2, TOP_GAP);\r\n    \t\t\tPoint left = new Point(SIDE_GAP, TOP_GAP+ TRI_HEIGHT);\r\n    \t\t\tPoint right = new Point(SIDE_GAP + TRI_WIDTH, TOP_GAP+ TRI_HEIGHT);\r\n    \r\n    \t\t\tBufferedImage bi = getBufferedImage(top, left, right);\r\n    \t\t\tGraphics2D g2d = (Graphics2D) g;\r\n    \t\t\tg2d.drawImage(bi,0,0, this);\r\n    \r\n    \t\t\tg.drawString(&quot;Number of triangles: &quot;+ countTriangles, 15, 15);\r\n    \t\t\tg.drawString(&quot;Time : &quot;+ (System.currentTimeMillis()- startTime)+ &quot; mili seconds&quot;, 15, 35);\r\n    \t\t\tg.drawString(&quot;Levels: &quot;+ numberOfLevels, 15, 50);\r\n    \t\t}\r\n    \r\n    \t\tprivate BufferedImage getBufferedImage(Point top, Point left, Point right) {\r\n    \r\n    \t\t\tBufferedImage bi = new BufferedImage(PANEL_WIDTH,PANEL_HEIGHT,\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t\tBufferedImage.TYPE_INT_ARGB);\r\n    \t\t\tdrawTriangle(bi, numberOfLevels, top, left, right);\r\n    \t\t\treturn bi;\r\n    \t\t}\r\n    \r\n    \t\tprivate void drawTriangle(BufferedImage bi, int levels, Point top, Point left, Point right) {\r\n    \r\n    \t\t\tif(levels &lt; 0) {\r\n    \t\t\t\treturn ;\r\n    \t\t\t}\r\n    \r\n    \t\t\tcountTriangles++;\r\n    \t\t\tGraphics g = bi.getGraphics();\r\n    \t\t\tg.setColor(Color.RED);\r\n    \r\n    \t\t\tPolygon tri = new Polygon();\r\n    \t\t\ttri.addPoint(top.x, top.y);  //use top,left right rather than fixed points\r\n    \t\t\ttri.addPoint(left.x, left.y);\r\n    \t\t\ttri.addPoint(right.x, right.y);\r\n    \t\t\tg.drawPolygon(tri);\r\n    \r\n    \t\t\t// Get the midpoint on each edge in the triangle\r\n    \t\t\tPoint p12 = midpoint(top, left);\r\n    \t\t\tPoint p23 = midpoint(left, right);\r\n    \t\t\tPoint p31 = midpoint(right, top);\r\n    \r\n    \t\t\t// recurse on 3 triangular areas\r\n    \t\t\tdrawTriangle(bi, levels - 1, top, p12, p31);\r\n    \t\t\tdrawTriangle(bi, levels - 1, p12, left, p23);\r\n    \t\t\tdrawTriangle(bi, levels - 1, p31, p23, right);\r\n    \t\t}\r\n    \r\n    \t\tprivate Point midpoint(Point p1, Point p2) {\r\n    \r\n    \t\t\treturn new Point((p1.x + p2.x) / 2, (p1.y + p2.y) / 2);\r\n    \t\t}\r\n    \t}\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \r\n    \t\tnew SimpleSrpnskTriSw(13);\r\n    \t}\r\n    }\r\n\r\n**JavaFx implementation**\r\n\r\n    import javafx.application.Application;\r\n    import javafx.application.Platform;\r\n    import javafx.concurrent.Task;\r\n    import javafx.geometry.Insets;\r\n    import javafx.geometry.Point2D;\r\n    import javafx.geometry.Pos;\r\n    import javafx.scene.Scene;\r\n    import javafx.scene.canvas.Canvas;\r\n    import javafx.scene.canvas.GraphicsContext;\r\n    import javafx.scene.image.WritableImage;\r\n    import javafx.scene.layout.AnchorPane;\r\n    import javafx.scene.layout.BorderPane;\r\n    import javafx.scene.layout.Pane;\r\n    import javafx.scene.paint.Color;\r\n    import javafx.stage.Stage;\r\n    \r\n    public class SimpleSrpnskTriFx extends Application {\r\n    \r\n    \tprivate final int PADDING = 5;\r\n    \tprivate static int numberOfLevels;\r\n    \r\n    \tpublic static void launch(String... args){\r\n    \r\n    \t\tnumberOfLevels = 8;\r\n    \r\n    \t\tif((args != null) &amp;&amp; (args.length &gt; 0)) {\r\n    \r\n    \t\t\ttry {\r\n    \t\t\t\tint num = Integer.parseInt(args[0]);\r\n    \t\t\t\tnumberOfLevels =  num ;\r\n    \t\t\t} catch (NumberFormatException ex) {\r\n    \t\t\t\tex.printStackTrace();\r\n    \t\t\t\treturn;\r\n    \t\t\t}\r\n    \t\t}\r\n    \r\n    \t\tApplication.launch(args);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void start(Stage stage) {\r\n    \r\n    \t\tstage.setOnCloseRequest((ae) -&gt; {\r\n    \t\t\tPlatform.exit();\r\n    \t\t\tSystem.exit(0);\r\n    \t\t});\r\n    \r\n    \t\tstage.setTitle(&quot;Sierpinski Triangles (fx)&quot;);\r\n    \r\n    \t\tBorderPane mainPane = new BorderPane();\r\n    \t\tmainPane.setPadding(new Insets(PADDING));\r\n    \r\n    \t\tPane triPanel = new Triangles();\r\n    \r\n    \t\tBorderPane.setAlignment(triPanel, Pos.CENTER);\r\n    \t\tmainPane.setCenter(triPanel);\r\n    \r\n    \t\tScene scene = new Scene(mainPane);\r\n    \r\n    \t\tstage.setScene(scene);\r\n    \t\tstage.centerOnScreen();\r\n    \r\n    \t\tstage.setResizable(false);\r\n    \t\tstage.show();\r\n    \t}\r\n    \r\n    \tclass Triangles extends AnchorPane{\r\n    \r\n    \t\tprivate static final int PANEL_WIDTH =600, PANEL_HEIGHT = 600;\r\n    \t\tprivate static final int TRI_WIDTH= 500, TRI_HEIGHT= 500;\r\n    \t\tprivate static final int SIDE_GAP = (PANEL_WIDTH - TRI_WIDTH)/2;\r\n    \t\tprivate static final int TOP_GAP = (PANEL_HEIGHT - TRI_HEIGHT)/2;\r\n    \t\tprivate int countTriangles;\r\n    \t\tprivate long startTime;\r\n    \t\tprivate Point2D top, left, right;\r\n    \r\n    \t\tprivate Canvas canvas;\r\n    \t\tprivate Canvas backgroundCanvas;\r\n    \t\tprivate GraphicsContext gc;\r\n    \r\n    \t\tTriangles(){\r\n    \r\n    \t\t\tsetPrefSize(PANEL_WIDTH, PANEL_HEIGHT);\r\n    \r\n    \t\t\tcanvas = getCanvas();\r\n    \t\t\tbackgroundCanvas = getCanvas();\r\n    \t\t\tgc = backgroundCanvas.getGraphicsContext2D();\r\n    \t\t\tgetChildren().add(canvas);\r\n    \t\t\tdraw(numberOfLevels);\r\n    \t\t}\r\n    \r\n    \t\tvoid draw(int numberLevels) {\r\n    \r\n    \t\t\tPlatform.runLater(new Runnable() {\r\n    \r\n    \t\t\t\t@Override\r\n    \t\t\t\tpublic void run() {\r\n    \r\n    \t\t\t\t\tcanvas.getGraphicsContext2D().fillText(&quot;Working....&quot;,5,15);\r\n    \t\t\t\t\tsetStartPoints();\r\n    \r\n    \t\t\t\t\tstartTime = System.currentTimeMillis();\r\n    \t\t\t\t\tcountTriangles = 0;\r\n    \r\n    \t\t\t\t\tRunTask task = new RunTask(numberLevels, top, left, right);\r\n    \t\t\t\t\tThread thread = new Thread(task);\r\n    \t\t\t\t\tthread.setDaemon(true);\r\n    \t\t\t\t\tthread.start();\r\n    \t\t\t\t}\r\n    \t\t\t});\r\n    \t\t}\r\n    \r\n    \t\tprivate void drawTriangle( int levels, Point2D top, Point2D left, Point2D right) {\r\n    \r\n    \t\t\tif(levels &lt; 0) {//add stop criteria\r\n    \t\t\t\treturn ;\r\n    \t\t\t}\r\n    \r\n    \t\t\tgc.strokePolygon( //implementing with strokeLine did not make much difference\r\n    \t\t\t\t\tnew double[]{\r\n    \t\t\t\t\t\t\ttop.getX(),left.getX(),right.getX()\r\n    \t\t\t\t\t},\r\n    \t\t\t\t\tnew double[]{\r\n    \t\t\t\t\t\t\ttop.getY(),left.getY(), right.getY()\r\n    \t\t\t\t\t},\r\n    \t\t\t\t\t3);\r\n    \r\n    \t\t\tcountTriangles++;\r\n    \r\n    \t\t\t//Get the midpoint on each edge in the triangle\r\n    \t\t\tPoint2D p12 = midpoint(top, left);\r\n    \t\t\tPoint2D p23 = midpoint(left, right);\r\n    \t\t\tPoint2D p31 = midpoint(right, top);\r\n    \r\n    \t\t\t// recurse on 3 triangular areas\r\n    \t\t\tdrawTriangle(levels - 1, top, p12, p31);\r\n    \t\t\tdrawTriangle(levels - 1, p12, left, p23);\r\n    \t\t\tdrawTriangle(levels - 1, p31, p23, right);\r\n    \t\t}\r\n    \r\n    \t\tprivate void setStartPoints() {\r\n    \r\n    \t\t\ttop = new Point2D(getPrefWidth()/2, TOP_GAP);\r\n    \t\t\tleft = new Point2D(SIDE_GAP, TOP_GAP + TRI_HEIGHT);\r\n    \t\t\tright = new Point2D(SIDE_GAP + TRI_WIDTH, TOP_GAP + TRI_WIDTH);\r\n    \t\t}\r\n    \r\n    \t\tprivate Point2D midpoint(Point2D p1, Point2D p2) {\r\n    \r\n    \t\t\treturn new Point2D((p1.getX() + p2.getX()) /\r\n    \t\t\t\t\t2, (p1.getY() + p2.getY()) / 2);\r\n    \t\t}\r\n    \r\n    \t\tprivate void updateGraphics(boolean success){\r\n    \r\n    \t\t\tif(success) {\r\n    \r\n    \t\t\t\tcopyCanvas();\r\n    \r\n    \t\t\t\tGraphicsContext gc = canvas.getGraphicsContext2D();\r\n    \t\t\t\tgc.fillText(&quot;Number of triangles: &quot;+ countTriangles,5,15);\r\n    \t\t\t\tgc.fillText(&quot;Time : &quot;+ (System.currentTimeMillis()- startTime )+ &quot; mili seconds&quot;, 5,35);\r\n    \t\t\t\tgc.fillText(&quot;Levels: &quot;+ numberOfLevels,5,55);\r\n    \t\t\t}\r\n    \r\n    \t\t}\r\n    \r\n    \t\tprivate Canvas getCanvas() {\r\n    \r\n    \t\t\tCanvas canvas = new Canvas();\r\n    \t\t\tcanvas.widthProperty().bind(widthProperty());\r\n    \t\t\tcanvas.heightProperty().bind(heightProperty());\r\n    \t\t\tcanvas.getGraphicsContext2D().setStroke(Color.RED);\r\n    \t\t\tcanvas.getGraphicsContext2D().setLineWidth(0.3f);\r\n    \r\n    \t\t\treturn canvas;\r\n    \t\t}\r\n    \r\n    \t\tprivate void copyCanvas() {\r\n    \r\n    \t\t\tWritableImage image = backgroundCanvas.snapshot(null, null);\r\n    \t\t\tcanvas.getGraphicsContext2D().drawImage(image, 0, 0);\r\n    \t\t}\r\n    \r\n    \t\t/**\r\n    \t\t */\r\n    \t\tclass RunTask extends Task&lt;Void&gt;{\r\n    \r\n    \t\t\tprivate int levels;\r\n    \t\t\tprivate Point2D top, left;\r\n    \t\t\tprivate Point2D right;\r\n    \r\n    \t\t\tRunTask(int levels, Point2D top, Point2D left, Point2D right){\r\n    \r\n    \t\t\t\tthis.levels = levels;\r\n    \t\t\t\tthis.top = top;\r\n    \t\t\t\tthis.left = left;\r\n    \t\t\t\tthis.right = right;\r\n    \r\n    \t\t\t\tstartTime = System.currentTimeMillis();\r\n    \t\t\t\tcountTriangles = 0;\r\n    \t\t\t}\r\n    \r\n    \t\t\t@Override public Void call() {\r\n    \r\n    \t\t\t\tdrawTriangle(levels,top, left, right);\r\n    \t\t\t\treturn null;\r\n    \t\t\t}\r\n    \r\n    \t\t\t@Override\r\n    \t\t\tprotected void succeeded() {\r\n    \r\n    \t\t\t\tupdateGraphics(true);\r\n    \t\t\t\tsuper.succeeded();\r\n    \t\t\t}\r\n    \r\n    \t\t\t@Override\r\n    \t\t\tprotected void failed() {\r\n    \r\n    \t\t\t\tupdateGraphics(false);\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tlaunch(&quot;13&quot;);\r\n    \t}\r\n    }\r\n\r\n  [1]: https://i.stack.imgur.com/QuLUv.jpg\r\n  [2]: https://i.stack.imgur.com/HpexV.jpg\r\n","title":"Performance of JavaFx Gui vs Swing","body":"<p>I wrote two simple programs, both draw the same Sierpinski Triangle:\n<a href=\"https://i.stack.imgur.com/QuLUv.jpg\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/QuLUv.jpg\" alt=\"enter image description here\"></a>\n<br>One program was implemented using swing, and one using javafx.\nThere is a very significant performance difference, swing implementation being consistently much faster:<br><br>\n<a href=\"https://i.stack.imgur.com/HpexV.jpg\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/HpexV.jpg\" alt=\"enter image description here\"></a></p>\n\n<p><br>(In this test case : Swing over 1 sec. Javafx over 12 seconds) <br>Is it to be expected or is there something very wrong with my javafx implementation ? </p>\n\n<p><strong>Swing implementation</strong> </p>\n\n<pre><code>import java.awt.BorderLayout;\nimport java.awt.Color;\nimport java.awt.Dimension;\nimport java.awt.Font;\nimport java.awt.Graphics;\nimport java.awt.Graphics2D;\nimport java.awt.Point;\nimport java.awt.Polygon;\nimport java.awt.image.BufferedImage;\nimport javax.swing.JFrame;\nimport javax.swing.JPanel;\nimport javax.swing.SwingUtilities;\n\npublic class SimpleSrpnskTriSw {\n\n    private Triangles triPanel;\n\n    SimpleSrpnskTriSw(int numberOfLevels){\n\n        JFrame frame = new JFrame(\"Sierpinski Triangles (swing)\");\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n\n        triPanel = new Triangles();\n        frame.add(triPanel, BorderLayout.CENTER);\n        frame.pack();\n\n        frame.setResizable(false);\n        frame.setVisible(true);\n\n        triPanel.draw(numberOfLevels);\n    }\n\n    class Triangles extends JPanel{\n\n        private static final int PANEL_WIDTH =600, PANEL_HEIGHT = 600;\n        private static final int TRI_WIDTH= 500, TRI_HEIGHT= 500;\n        private static final int SIDE_GAP = (PANEL_WIDTH - TRI_WIDTH)/2;\n        private static final int TOP_GAP = (PANEL_HEIGHT - TRI_HEIGHT)/2;\n\n        private int countTriangles;\n        private long startTime;\n        boolean working;\n        private int numberOfLevels = 0;\n\n        Triangles() {\n\n            setPreferredSize(new Dimension(PANEL_WIDTH, PANEL_HEIGHT));\n            startTime = System.currentTimeMillis();\n            countTriangles = 0;\n            working = true;\n            draw();\n        }\n\n        void draw(int numLevels) {\n\n            numberOfLevels = numLevels;\n            working = true;\n            draw();\n        }\n\n        void draw() {\n\n            startTime = System.currentTimeMillis();\n            countTriangles = 0;\n\n            SwingUtilities.invokeLater(new Runnable() {\n                @Override\n                public void run() {\n\n                    repaint();\n                }\n            });\n        }\n\n        @Override\n        public void paintComponent(Graphics g) {\n\n            super.paintComponent(g);\n            g.setFont(new Font(\"Ariel\", Font.PLAIN, 14));\n\n            if(working) {\n\n                g.setColor(getBackground());\n                g.fillRect(0,0,PANEL_WIDTH,PANEL_HEIGHT);\n                g.setColor(getForeground());\n\n                g.drawString(\"Working.........\", 15, 15);\n                working = false;\n                return;\n            }\n\n            if(numberOfLevels &lt;= 0 ) {\n                return;\n            }\n            Point top = new Point(PANEL_WIDTH/2, TOP_GAP);\n            Point left = new Point(SIDE_GAP, TOP_GAP+ TRI_HEIGHT);\n            Point right = new Point(SIDE_GAP + TRI_WIDTH, TOP_GAP+ TRI_HEIGHT);\n\n            BufferedImage bi = getBufferedImage(top, left, right);\n            Graphics2D g2d = (Graphics2D) g;\n            g2d.drawImage(bi,0,0, this);\n\n            g.drawString(\"Number of triangles: \"+ countTriangles, 15, 15);\n            g.drawString(\"Time : \"+ (System.currentTimeMillis()- startTime)+ \" mili seconds\", 15, 35);\n            g.drawString(\"Levels: \"+ numberOfLevels, 15, 50);\n        }\n\n        private BufferedImage getBufferedImage(Point top, Point left, Point right) {\n\n            BufferedImage bi = new BufferedImage(PANEL_WIDTH,PANEL_HEIGHT,\n                                                            BufferedImage.TYPE_INT_ARGB);\n            drawTriangle(bi, numberOfLevels, top, left, right);\n            return bi;\n        }\n\n        private void drawTriangle(BufferedImage bi, int levels, Point top, Point left, Point right) {\n\n            if(levels &lt; 0) {\n                return ;\n            }\n\n            countTriangles++;\n            Graphics g = bi.getGraphics();\n            g.setColor(Color.RED);\n\n            Polygon tri = new Polygon();\n            tri.addPoint(top.x, top.y);  //use top,left right rather than fixed points\n            tri.addPoint(left.x, left.y);\n            tri.addPoint(right.x, right.y);\n            g.drawPolygon(tri);\n\n            // Get the midpoint on each edge in the triangle\n            Point p12 = midpoint(top, left);\n            Point p23 = midpoint(left, right);\n            Point p31 = midpoint(right, top);\n\n            // recurse on 3 triangular areas\n            drawTriangle(bi, levels - 1, top, p12, p31);\n            drawTriangle(bi, levels - 1, p12, left, p23);\n            drawTriangle(bi, levels - 1, p31, p23, right);\n        }\n\n        private Point midpoint(Point p1, Point p2) {\n\n            return new Point((p1.x + p2.x) / 2, (p1.y + p2.y) / 2);\n        }\n    }\n\n    public static void main(String[] args) {\n\n        new SimpleSrpnskTriSw(13);\n    }\n}\n</code></pre>\n\n<p><strong>JavaFx implementation</strong></p>\n\n<pre><code>import javafx.application.Application;\nimport javafx.application.Platform;\nimport javafx.concurrent.Task;\nimport javafx.geometry.Insets;\nimport javafx.geometry.Point2D;\nimport javafx.geometry.Pos;\nimport javafx.scene.Scene;\nimport javafx.scene.canvas.Canvas;\nimport javafx.scene.canvas.GraphicsContext;\nimport javafx.scene.image.WritableImage;\nimport javafx.scene.layout.AnchorPane;\nimport javafx.scene.layout.BorderPane;\nimport javafx.scene.layout.Pane;\nimport javafx.scene.paint.Color;\nimport javafx.stage.Stage;\n\npublic class SimpleSrpnskTriFx extends Application {\n\n    private final int PADDING = 5;\n    private static int numberOfLevels;\n\n    public static void launch(String... args){\n\n        numberOfLevels = 8;\n\n        if((args != null) &amp;&amp; (args.length &gt; 0)) {\n\n            try {\n                int num = Integer.parseInt(args[0]);\n                numberOfLevels =  num ;\n            } catch (NumberFormatException ex) {\n                ex.printStackTrace();\n                return;\n            }\n        }\n\n        Application.launch(args);\n    }\n\n    @Override\n    public void start(Stage stage) {\n\n        stage.setOnCloseRequest((ae) -&gt; {\n            Platform.exit();\n            System.exit(0);\n        });\n\n        stage.setTitle(\"Sierpinski Triangles (fx)\");\n\n        BorderPane mainPane = new BorderPane();\n        mainPane.setPadding(new Insets(PADDING));\n\n        Pane triPanel = new Triangles();\n\n        BorderPane.setAlignment(triPanel, Pos.CENTER);\n        mainPane.setCenter(triPanel);\n\n        Scene scene = new Scene(mainPane);\n\n        stage.setScene(scene);\n        stage.centerOnScreen();\n\n        stage.setResizable(false);\n        stage.show();\n    }\n\n    class Triangles extends AnchorPane{\n\n        private static final int PANEL_WIDTH =600, PANEL_HEIGHT = 600;\n        private static final int TRI_WIDTH= 500, TRI_HEIGHT= 500;\n        private static final int SIDE_GAP = (PANEL_WIDTH - TRI_WIDTH)/2;\n        private static final int TOP_GAP = (PANEL_HEIGHT - TRI_HEIGHT)/2;\n        private int countTriangles;\n        private long startTime;\n        private Point2D top, left, right;\n\n        private Canvas canvas;\n        private Canvas backgroundCanvas;\n        private GraphicsContext gc;\n\n        Triangles(){\n\n            setPrefSize(PANEL_WIDTH, PANEL_HEIGHT);\n\n            canvas = getCanvas();\n            backgroundCanvas = getCanvas();\n            gc = backgroundCanvas.getGraphicsContext2D();\n            getChildren().add(canvas);\n            draw(numberOfLevels);\n        }\n\n        void draw(int numberLevels) {\n\n            Platform.runLater(new Runnable() {\n\n                @Override\n                public void run() {\n\n                    canvas.getGraphicsContext2D().fillText(\"Working....\",5,15);\n                    setStartPoints();\n\n                    startTime = System.currentTimeMillis();\n                    countTriangles = 0;\n\n                    RunTask task = new RunTask(numberLevels, top, left, right);\n                    Thread thread = new Thread(task);\n                    thread.setDaemon(true);\n                    thread.start();\n                }\n            });\n        }\n\n        private void drawTriangle( int levels, Point2D top, Point2D left, Point2D right) {\n\n            if(levels &lt; 0) {//add stop criteria\n                return ;\n            }\n\n            gc.strokePolygon( //implementing with strokeLine did not make much difference\n                    new double[]{\n                            top.getX(),left.getX(),right.getX()\n                    },\n                    new double[]{\n                            top.getY(),left.getY(), right.getY()\n                    },\n                    3);\n\n            countTriangles++;\n\n            //Get the midpoint on each edge in the triangle\n            Point2D p12 = midpoint(top, left);\n            Point2D p23 = midpoint(left, right);\n            Point2D p31 = midpoint(right, top);\n\n            // recurse on 3 triangular areas\n            drawTriangle(levels - 1, top, p12, p31);\n            drawTriangle(levels - 1, p12, left, p23);\n            drawTriangle(levels - 1, p31, p23, right);\n        }\n\n        private void setStartPoints() {\n\n            top = new Point2D(getPrefWidth()/2, TOP_GAP);\n            left = new Point2D(SIDE_GAP, TOP_GAP + TRI_HEIGHT);\n            right = new Point2D(SIDE_GAP + TRI_WIDTH, TOP_GAP + TRI_WIDTH);\n        }\n\n        private Point2D midpoint(Point2D p1, Point2D p2) {\n\n            return new Point2D((p1.getX() + p2.getX()) /\n                    2, (p1.getY() + p2.getY()) / 2);\n        }\n\n        private void updateGraphics(boolean success){\n\n            if(success) {\n\n                copyCanvas();\n\n                GraphicsContext gc = canvas.getGraphicsContext2D();\n                gc.fillText(\"Number of triangles: \"+ countTriangles,5,15);\n                gc.fillText(\"Time : \"+ (System.currentTimeMillis()- startTime )+ \" mili seconds\", 5,35);\n                gc.fillText(\"Levels: \"+ numberOfLevels,5,55);\n            }\n\n        }\n\n        private Canvas getCanvas() {\n\n            Canvas canvas = new Canvas();\n            canvas.widthProperty().bind(widthProperty());\n            canvas.heightProperty().bind(heightProperty());\n            canvas.getGraphicsContext2D().setStroke(Color.RED);\n            canvas.getGraphicsContext2D().setLineWidth(0.3f);\n\n            return canvas;\n        }\n\n        private void copyCanvas() {\n\n            WritableImage image = backgroundCanvas.snapshot(null, null);\n            canvas.getGraphicsContext2D().drawImage(image, 0, 0);\n        }\n\n        /**\n         */\n        class RunTask extends Task&lt;Void&gt;{\n\n            private int levels;\n            private Point2D top, left;\n            private Point2D right;\n\n            RunTask(int levels, Point2D top, Point2D left, Point2D right){\n\n                this.levels = levels;\n                this.top = top;\n                this.left = left;\n                this.right = right;\n\n                startTime = System.currentTimeMillis();\n                countTriangles = 0;\n            }\n\n            @Override public Void call() {\n\n                drawTriangle(levels,top, left, right);\n                return null;\n            }\n\n            @Override\n            protected void succeeded() {\n\n                updateGraphics(true);\n                super.succeeded();\n            }\n\n            @Override\n            protected void failed() {\n\n                updateGraphics(false);\n            }\n        }\n    }\n\n    public static void main(String[] args) {\n        launch(\"13\");\n    }\n}\n</code></pre>\n"},{"tags":["java","apache-kafka","apache-kafka-streams","kafka-join"],"comments":[{"owner":{"account_id":18551013,"reputation":13,"user_id":13517253,"display_name":"user13517253"},"score":0,"creation_date":1657913473,"post_id":72989422,"comment_id":128931329,"body_markdown":"There is a problem with my logic. I create a KStream (messageKStream) from my user message topic (contactMessage). Then use that KStream to get a count of messages per key over a tumbling window, filter out any keys that have more than a count 3, persisted in a KTable. Then I use that same KStream again and join it with the KTable. The two uses of the KStream do not run sequentially.","body":"There is a problem with my logic. I create a KStream (messageKStream) from my user message topic (contactMessage). Then use that KStream to get a count of messages per key over a tumbling window, filter out any keys that have more than a count 3, persisted in a KTable. Then I use that same KStream again and join it with the KTable. The two uses of the KStream do not run sequentially."}],"answers":[{"tags":[],"owner":{"account_id":18551013,"reputation":13,"user_id":13517253,"display_name":"user13517253"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1658403834,"creation_date":1658403599,"answer_id":73065513,"question_id":72989422,"body_markdown":"Wrong approach. Used aggregate() to resolve this.\r\njoin() won&#39;t work.","title":"How to use Kafka Streams to only process messages sent less than 3 times per key (UserId) over a given time window","body":"<p>Wrong approach. Used aggregate() to resolve this.\njoin() won't work.</p>\n"}],"owner":{"account_id":18551013,"reputation":13,"user_id":13517253,"display_name":"user13517253"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":319,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73065513,"answer_count":1,"score":1,"last_activity_date":1658403834,"creation_date":1657863024,"question_id":72989422,"body_markdown":"I want to limit the number of message sent to the User over a given time period. I have topic of message to be sent and I can get a count of message per key (UserId) over a time window, but if I try and join that count KTable to a KStream of the original messages I get inconsistent results. It seems to work the first time I run it, but then either the count per key doesn&#39;t reset when the window expires or the count is 1 for every message with the same key. Almost as if the suppress stops working. \r\n\r\nI wrote a Quarkus app to implement this:\r\n```\r\n   @Produces\r\n    public Topology buildTopology() {\r\n        log.info(&quot;Starting topology ....&quot;);\r\n\r\n        StreamsBuilder streamsBuilder = new StreamsBuilder();\r\n\r\n        KStream&lt;String, ContactMessage&gt; messageKStream = streamsBuilder.stream(contactMessage,\r\n                Consumed.with(AppSerdes.String(), AppSerdes.ContactMessage()));\r\n                        //.peek((key,value)-&gt; System.out.println(&quot;Incoming record. key=&quot; + key + &quot; value=&quot; + value.toString()));\r\n\r\n        KTable&lt;Windowed&lt;String&gt;, Long&gt; KT01 = messageKStream.groupByKey(Grouped.with(AppSerdes.String(),AppSerdes.ContactMessage()))\r\n                .windowedBy(TimeWindows.ofSizeAndGrace(Duration.ofMinutes(windowDuration),Duration.ofSeconds(gracePeriod)))\r\n                .count()\r\n                .suppress(Suppressed.untilWindowCloses(unbounded()));\r\n\r\n        KTable&lt;String, String&gt; KT02 = KT01.toStream()\r\n                .peek((wKey, value) -&gt; System.out.println(&quot;Outgoing message. key=&quot; +wKey.key() + &quot; value=&quot; + value +\r\n                        &quot; Window start: &quot; + Instant.ofEpochMilli(wKey.window().start()).atOffset(ZoneOffset.UTC) +\r\n                        &quot; Window end: &quot; + Instant.ofEpochMilli(wKey.window().end()).atOffset(ZoneOffset.UTC)))\r\n                .map((wKey, value)-&gt; KeyValue.pair(wKey.key(), value))\r\n                .peek((k,v)-&gt; System.out.println(&quot;After map: k=&quot;+k+&quot; value=&quot;+v))\r\n                .filter((key,value)-&gt; value &lt; 3 )    // &amp;&amp; value !=0\r\n                .map((key, value) -&gt; KeyValue.pair(key, value.toString()))\r\n                .peek((k,v)-&gt; System.out.println(&quot;After filter. key: &quot;+ k +&quot; value: &quot;+v))\r\n                .toTable();\r\n\r\n        ValueJoiner&lt;ContactMessage, String, String&gt; valueJoiner = (leftValue, rightValue) -&gt; leftValue.toString() + rightValue;\r\n        messageKStream.join(\r\n                KT02,\r\n                valueJoiner,\r\n                Joined.with(Serdes.String(),AppSerdes.ContactMessage(), Serdes.String())\r\n        ).peek((k,v)-&gt; System.out.println(&quot;Join output- &quot;+k+&quot; &quot;+v)).to(outboundMessage);\r\nreturn streamsBuilder.build();\r\n```\r\nI&#39;m guessing there is a better way to do this. Any input would be appreciated. thanks","title":"How to use Kafka Streams to only process messages sent less than 3 times per key (UserId) over a given time window","body":"<p>I want to limit the number of message sent to the User over a given time period. I have topic of message to be sent and I can get a count of message per key (UserId) over a time window, but if I try and join that count KTable to a KStream of the original messages I get inconsistent results. It seems to work the first time I run it, but then either the count per key doesn't reset when the window expires or the count is 1 for every message with the same key. Almost as if the suppress stops working.</p>\n<p>I wrote a Quarkus app to implement this:</p>\n<pre><code>   @Produces\n    public Topology buildTopology() {\n        log.info(&quot;Starting topology ....&quot;);\n\n        StreamsBuilder streamsBuilder = new StreamsBuilder();\n\n        KStream&lt;String, ContactMessage&gt; messageKStream = streamsBuilder.stream(contactMessage,\n                Consumed.with(AppSerdes.String(), AppSerdes.ContactMessage()));\n                        //.peek((key,value)-&gt; System.out.println(&quot;Incoming record. key=&quot; + key + &quot; value=&quot; + value.toString()));\n\n        KTable&lt;Windowed&lt;String&gt;, Long&gt; KT01 = messageKStream.groupByKey(Grouped.with(AppSerdes.String(),AppSerdes.ContactMessage()))\n                .windowedBy(TimeWindows.ofSizeAndGrace(Duration.ofMinutes(windowDuration),Duration.ofSeconds(gracePeriod)))\n                .count()\n                .suppress(Suppressed.untilWindowCloses(unbounded()));\n\n        KTable&lt;String, String&gt; KT02 = KT01.toStream()\n                .peek((wKey, value) -&gt; System.out.println(&quot;Outgoing message. key=&quot; +wKey.key() + &quot; value=&quot; + value +\n                        &quot; Window start: &quot; + Instant.ofEpochMilli(wKey.window().start()).atOffset(ZoneOffset.UTC) +\n                        &quot; Window end: &quot; + Instant.ofEpochMilli(wKey.window().end()).atOffset(ZoneOffset.UTC)))\n                .map((wKey, value)-&gt; KeyValue.pair(wKey.key(), value))\n                .peek((k,v)-&gt; System.out.println(&quot;After map: k=&quot;+k+&quot; value=&quot;+v))\n                .filter((key,value)-&gt; value &lt; 3 )    // &amp;&amp; value !=0\n                .map((key, value) -&gt; KeyValue.pair(key, value.toString()))\n                .peek((k,v)-&gt; System.out.println(&quot;After filter. key: &quot;+ k +&quot; value: &quot;+v))\n                .toTable();\n\n        ValueJoiner&lt;ContactMessage, String, String&gt; valueJoiner = (leftValue, rightValue) -&gt; leftValue.toString() + rightValue;\n        messageKStream.join(\n                KT02,\n                valueJoiner,\n                Joined.with(Serdes.String(),AppSerdes.ContactMessage(), Serdes.String())\n        ).peek((k,v)-&gt; System.out.println(&quot;Join output- &quot;+k+&quot; &quot;+v)).to(outboundMessage);\nreturn streamsBuilder.build();\n</code></pre>\n<p>I'm guessing there is a better way to do this. Any input would be appreciated. thanks</p>\n"},{"tags":["java","gradle","intellij-idea","gradle-plugin"],"comments":[{"owner":{"account_id":36734,"reputation":392127,"user_id":104891,"display_name":"CrazyCoder"},"score":1,"creation_date":1595972676,"post_id":63142990,"comment_id":111658440,"body_markdown":"How do you define the dependency in your project? The sources are available at https://repo.gradle.org/gradle/libs-releases-local/org/gradle/gradle-core-api/5.6.1/. Did you add this repository in `build.gradle`?","body":"How do you define the dependency in your project? The sources are available at <a href=\"https://repo.gradle.org/gradle/libs-releases-local/org/gradle/gradle-core-api/5.6.1/\" rel=\"nofollow noreferrer\">repo.gradle.org/gradle/libs-releases-local/org/gradle/&hellip;</a>. Did you add this repository in <code>build.gradle</code>?"},{"owner":{"account_id":51571,"reputation":34238,"user_id":154133,"accept_rate":57,"display_name":"friederbluemle"},"score":0,"creation_date":1596095978,"post_id":63142990,"comment_id":111702568,"body_markdown":"Thanks @CrazyCoder - That brought me a little closer. First I had to downgrade to Gradle 6.1.1 (somehow that&#39;s the last published version with the link you posted). Then it was possible to _manually_ attach the download sources jar file. Automatic download still does not work, even after adding a custom repository to the build script.","body":"Thanks @CrazyCoder - That brought me a little closer. First I had to downgrade to Gradle 6.1.1 (somehow that&#39;s the last published version with the link you posted). Then it was possible to <i>manually</i> attach the download sources jar file. Automatic download still does not work, even after adding a custom repository to the build script."},{"owner":{"account_id":2273465,"reputation":15439,"user_id":2000323,"display_name":"Andrey"},"score":0,"creation_date":1596097265,"post_id":63142990,"comment_id":111703219,"body_markdown":"How do you declare this dependency in build script? Do you have gradle composite build? Do you use Groovy DSL?","body":"How do you declare this dependency in build script? Do you have gradle composite build? Do you use Groovy DSL?"},{"owner":{"account_id":2273465,"reputation":15439,"user_id":2000323,"display_name":"Andrey"},"score":3,"creation_date":1596097974,"post_id":63142990,"comment_id":111703573,"body_markdown":"Looks like [IDEA-221322](https://youtrack.jetbrains.com/issue/IDEA-221322), [IDEA-197970](https://youtrack.jetbrains.com/issue/IDEA-197970).","body":"Looks like <a href=\"https://youtrack.jetbrains.com/issue/IDEA-221322\" rel=\"nofollow noreferrer\">IDEA-221322</a>, <a href=\"https://youtrack.jetbrains.com/issue/IDEA-197970\" rel=\"nofollow noreferrer\">IDEA-197970</a>."},{"owner":{"account_id":51571,"reputation":34238,"user_id":154133,"accept_rate":57,"display_name":"friederbluemle"},"score":0,"creation_date":1596101418,"post_id":63142990,"comment_id":111705205,"body_markdown":"Thanks @Andrey - It does indeed look like it&#39;s related to those tickets.","body":"Thanks @Andrey - It does indeed look like it&#39;s related to those tickets."},{"owner":{"account_id":51571,"reputation":34238,"user_id":154133,"accept_rate":57,"display_name":"friederbluemle"},"score":0,"creation_date":1612044192,"post_id":63142990,"comment_id":116645501,"body_markdown":"@CrazyCoder - Do you happen to know if/where Gradle releases _after_ 6.1.1 are published? repo.gradle.org, as well as mvnrepository, etc appear to only contain versions &lt;= 6.1.1","body":"@CrazyCoder - Do you happen to know if/where Gradle releases <i>after</i> 6.1.1 are published? repo.gradle.org, as well as mvnrepository, etc appear to only contain versions &lt;= 6.1.1"}],"answers":[{"tags":[],"owner":{"account_id":145555,"reputation":21469,"user_id":355438,"display_name":"Ilya Serbis"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1612357279,"creation_date":1612357279,"answer_id":66028108,"question_id":63142990,"body_markdown":"According to [this excellent manual][1] you should add `gradleApi()` as a `runtimeOnly` dependency:\r\n\r\n    dependencies {\r\n       //...\r\n       runtimeOnly(gradleApi())\r\n       \r\n\r\n\r\n  [1]: https://github.com/croz-ltd/klokwrk-project/blob/master/support/documentation/article/debugging-gradle-from-idea/debugging-gradle-from-idea.md","title":"How to attach gradle-api sources in IntelliJ","body":"<p>According to <a href=\"https://github.com/croz-ltd/klokwrk-project/blob/master/support/documentation/article/debugging-gradle-from-idea/debugging-gradle-from-idea.md\" rel=\"nofollow noreferrer\">this excellent manual</a> you should add <code>gradleApi()</code> as a <code>runtimeOnly</code> dependency:</p>\n<pre><code>dependencies {\n   //...\n   runtimeOnly(gradleApi())\n   \n</code></pre>\n"},{"tags":[],"owner":{"account_id":6283683,"reputation":3277,"user_id":4883754,"display_name":"Jess Chen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1618203121,"creation_date":1618201912,"answer_id":67052691,"question_id":63142990,"body_markdown":"I guess that, the default Intellij config `use gradle from gradle-wrapper.properties file` will use `/gradle/wrapper/gradle-wrapper.jar`, but it doesn&#39;t contain source code. what you need is a jar like `gradle-wrapper-all.jar`. But I don&#39;t know how to let Gradle redownload that. Just setting `Wrapper.DistributionType.ALL` is not working.\r\n\r\n## Solution\r\n\r\n1. set `Wrapper.DistributionType.ALL` \r\n```\r\nwrapper {\r\n    jarFile = file(System.getProperty(&quot;user.dir&quot;) + &#39;/gradle/wrapper/gradle-wrapper.jar&#39;)\r\n    gradleVersion = &#39;6.7.1&#39;\r\n    distributionType = Wrapper.DistributionType.ALL\r\n}\r\n```\r\n\r\n2. **I download Gradle, and use it**. Set two things here and refresh it.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\nHere is the source code, the version is right and with `all` in the name (`gradle-6.7.1-all`):\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/k11j3.png\r\n  [2]: https://i.stack.imgur.com/mAxbT.png","title":"How to attach gradle-api sources in IntelliJ","body":"<p>I guess that, the default Intellij config <code>use gradle from gradle-wrapper.properties file</code> will use <code>/gradle/wrapper/gradle-wrapper.jar</code>, but it doesn't contain source code. what you need is a jar like <code>gradle-wrapper-all.jar</code>. But I don't know how to let Gradle redownload that. Just setting <code>Wrapper.DistributionType.ALL</code> is not working.</p>\n<h2>Solution</h2>\n<ol>\n<li>set <code>Wrapper.DistributionType.ALL</code></li>\n</ol>\n<pre><code>wrapper {\n    jarFile = file(System.getProperty(&quot;user.dir&quot;) + '/gradle/wrapper/gradle-wrapper.jar')\n    gradleVersion = '6.7.1'\n    distributionType = Wrapper.DistributionType.ALL\n}\n</code></pre>\n<ol start=\"2\">\n<li><strong>I download Gradle, and use it</strong>. Set two things here and refresh it.</li>\n</ol>\n<p><a href=\"https://i.stack.imgur.com/k11j3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/k11j3.png\" alt=\"enter image description here\" /></a></p>\n<p>Here is the source code, the version is right and with <code>all</code> in the name (<code>gradle-6.7.1-all</code>):</p>\n<p><a href=\"https://i.stack.imgur.com/mAxbT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/mAxbT.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":317343,"reputation":1,"user_id":2863125,"display_name":"Andrew"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658403801,"creation_date":1658403801,"answer_id":73065560,"question_id":63142990,"body_markdown":"1. delete gradle dir\r\n2. run &quot;gradle wrapper&quot;\r\n3. check the suffix &quot;-all&quot; in the file gradle/wrapper/gradle-wrapper.properties\r\nsample:\r\ndistributionUrl=https\\://services.gradle.org/distributions/gradle-7.5-all.zip","title":"How to attach gradle-api sources in IntelliJ","body":"<ol>\n<li>delete gradle dir</li>\n<li>run &quot;gradle wrapper&quot;</li>\n<li>check the suffix &quot;-all&quot; in the file gradle/wrapper/gradle-wrapper.properties\nsample:\ndistributionUrl=https://services.gradle.org/distributions/gradle-7.5-all.zip</li>\n</ol>\n"}],"owner":{"account_id":51571,"reputation":34238,"user_id":154133,"accept_rate":57,"display_name":"friederbluemle"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1189,"favorite_count":0,"down_vote_count":1,"up_vote_count":7,"answer_count":3,"score":6,"last_activity_date":1658403801,"creation_date":1595971504,"question_id":63142990,"body_markdown":"I&#39;m working on a custom Gradle plugin. For some reason IntelliJ is unable to find the sources of the `gradle-api` artifact and only shows the decompiled .class file. I am already using the `-all` distribution of the Gradle Wrapper (which includes _some_ sources, but apparently not the ones I need right here). Clicking **Download...** results in an error:\r\n\r\n```text\r\nSources not found: Sources for &#39;gradle-api-6.5.1.jar&#39; not found\r\n```\r\n\r\nHow do I correctly attach/choose sources for `gradle-api` in IntelliJ?\r\n\r\n[![IntelliJ][1]][1]\r\n\r\nEDIT:\r\n\r\nI have a minimal Gradle plugin with code like that (taken from the [official samples][2]):\r\n\r\n```\r\nplugins {\r\n    id &#39;java-gradle-plugin&#39;\r\n}\r\n\r\nrepositories {\r\n    jcenter()\r\n}\r\n\r\ndependencies {\r\n    testImplementation &#39;junit:junit:4.13&#39;\r\n}\r\n\r\ngradlePlugin {\r\n    // ...\r\n}\r\n```\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/8yrdE.png\r\n  [2]: https://docs.gradle.org/current/samples/sample_gradle_plugin.html","title":"How to attach gradle-api sources in IntelliJ","body":"<p>I'm working on a custom Gradle plugin. For some reason IntelliJ is unable to find the sources of the <code>gradle-api</code> artifact and only shows the decompiled .class file. I am already using the <code>-all</code> distribution of the Gradle Wrapper (which includes <em>some</em> sources, but apparently not the ones I need right here). Clicking <strong>Download...</strong> results in an error:</p>\n<pre><code>Sources not found: Sources for 'gradle-api-6.5.1.jar' not found\n</code></pre>\n<p>How do I correctly attach/choose sources for <code>gradle-api</code> in IntelliJ?</p>\n<p><a href=\"https://i.stack.imgur.com/8yrdE.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/8yrdE.png\" alt=\"IntelliJ\" /></a></p>\n<p>EDIT:</p>\n<p>I have a minimal Gradle plugin with code like that (taken from the <a href=\"https://docs.gradle.org/current/samples/sample_gradle_plugin.html\" rel=\"noreferrer\">official samples</a>):</p>\n<pre><code>plugins {\n    id 'java-gradle-plugin'\n}\n\nrepositories {\n    jcenter()\n}\n\ndependencies {\n    testImplementation 'junit:junit:4.13'\n}\n\ngradlePlugin {\n    // ...\n}\n</code></pre>\n"},{"tags":["java","android","modal-dialog"],"comments":[{"owner":{"account_id":13837518,"reputation":673,"user_id":9988706,"display_name":"Gobu CSG"},"score":0,"creation_date":1657099843,"post_id":72880977,"comment_id":128726858,"body_markdown":"Share your same codes... Others can&#39;t help you","body":"Share your same codes... Others can&#39;t help you"},{"owner":{"account_id":4448387,"reputation":343,"user_id":3621075,"display_name":"user3621075"},"score":0,"creation_date":1657192549,"post_id":72880977,"comment_id":128754866,"body_markdown":"I am endeavouring to build a sample app to demonstrate the issue but, as one might expect all works OK in this sample!","body":"I am endeavouring to build a sample app to demonstrate the issue but, as one might expect all works OK in this sample!"},{"owner":{"account_id":13837518,"reputation":673,"user_id":9988706,"display_name":"Gobu CSG"},"score":0,"creation_date":1657193049,"post_id":72880977,"comment_id":128755030,"body_markdown":"Share your dialog layout and if your setting some params in your dialog fragment share those codes... Might be others can identify... Otherwise how can give idea... It&#39;s a generic details","body":"Share your dialog layout and if your setting some params in your dialog fragment share those codes... Might be others can identify... Otherwise how can give idea... It&#39;s a generic details"},{"owner":{"account_id":4448387,"reputation":343,"user_id":3621075,"display_name":"user3621075"},"score":0,"creation_date":1657288496,"post_id":72880977,"comment_id":128781769,"body_markdown":"I have amended the question and added a bit of information.","body":"I have amended the question and added a bit of information."},{"owner":{"account_id":13837518,"reputation":673,"user_id":9988706,"display_name":"Gobu CSG"},"score":0,"creation_date":1657372489,"post_id":72880977,"comment_id":128797451,"body_markdown":"Is it Java or Kotlin? You shared mingled source.\n\nand You haven&#39;t added your style.","body":"Is it Java or Kotlin? You shared mingled source.  and You haven&#39;t added your style."},{"owner":{"account_id":13837518,"reputation":673,"user_id":9988706,"display_name":"Gobu CSG"},"score":0,"creation_date":1657374072,"post_id":72880977,"comment_id":128797760,"body_markdown":"Is it full screen brown or wrap_content? Share your style R.style.DialogStyle. and no need to overide onCreateDialog.  You already removed setStyle(DialogFragment.STYLE_NO_TITLE, Your Theme).","body":"Is it full screen brown or wrap_content? Share your style R.style.DialogStyle. and no need to overide onCreateDialog.  You already removed setStyle(DialogFragment.STYLE_NO_TITLE, Your Theme)."},{"owner":{"account_id":4448387,"reputation":343,"user_id":3621075,"display_name":"user3621075"},"score":0,"creation_date":1657534994,"post_id":72880977,"comment_id":128824835,"body_markdown":"I have updated the question with additional information as requested. The app is all Java. Still the situation that, seemingly, the exact same layout and code displays a dialog differently in the live app and the test app on the Galaxy Tab S7. device.","body":"I have updated the question with additional information as requested. The app is all Java. Still the situation that, seemingly, the exact same layout and code displays a dialog differently in the live app and the test app on the Galaxy Tab S7. device."},{"owner":{"account_id":13837518,"reputation":673,"user_id":9988706,"display_name":"Gobu CSG"},"score":0,"creation_date":1657536020,"post_id":72880977,"comment_id":128825204,"body_markdown":"Remove your onStart functionality \n\nSet theme  setStyle(DialogFragment.STYLE_NO_TITLE, android.R.style.Theme_NoTitleBar_Fullscreen);","body":"Remove your onStart functionality   Set theme  setStyle(DialogFragment.STYLE_NO_TITLE, android.R.style.Theme_NoTitleBar_Fullscreen);"},{"owner":{"account_id":4448387,"reputation":343,"user_id":3621075,"display_name":"user3621075"},"score":0,"creation_date":1657575250,"post_id":72880977,"comment_id":128839114,"body_markdown":"Removing the onStart functionality and setting theme to setStyle(DialogFragment.STYLE_NO_TITLE, android.R.style.Theme_NoTitleBar_Fullscreen); produces a full screen dialog which is not what is required.","body":"Removing the onStart functionality and setting theme to setStyle(DialogFragment.STYLE_NO_TITLE, android.R.style.Theme_NoTitleBar_Fullscreen); produces a full screen dialog which is not what is required."}],"answers":[{"tags":[],"owner":{"account_id":16846220,"reputation":58,"user_id":12180320,"display_name":"Thazin Soe"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1657706923,"creation_date":1657601436,"answer_id":72947175,"question_id":72880977,"body_markdown":"I think the problem is in `onStart()` method.\r\nCan you try to change like following?\r\n\r\n        @Override\r\n        public void onStart() {\r\n            super.onStart();\r\n            Window win = getDialog().getWindow();\r\n            if (win == null)\r\n                return;\r\n    \r\n            DisplayMetrics dm = new DisplayMetrics();\r\n            ((Activity) mContext).getWindowManager().getDefaultDisplay().getMetrics(dm);\r\n            WindowManager.LayoutParams params = win.getAttributes();\r\n            int contextRect = getContextRect((Activity) mContext);\r\n    \r\n            params.gravity = Gravity.CENTER; //you can change Gravity in here\r\n            params.width = ViewGroup.LayoutParams.MATCH_PARENT; //you can change width in here\r\n            int screenHeight = contextRect == 0 ? ViewGroup.LayoutParams.MATCH_PARENT : contextRect;\r\n            params.height = screenHeight;\r\n            win.setAttributes(params);\r\n        }\r\n    \r\n        private int getContextRect(Activity activity) {\r\n            Rect outRect = new Rect();\r\n            activity.getWindow().getDecorView().getWindowVisibleDisplayFrame(outRect);\r\n            return outRect.height();\r\n        }","title":"Android Dialog cropping problem on Android 12 devices","body":"<p>I think the problem is in <code>onStart()</code> method.\nCan you try to change like following?</p>\n<pre><code>    @Override\n    public void onStart() {\n        super.onStart();\n        Window win = getDialog().getWindow();\n        if (win == null)\n            return;\n\n        DisplayMetrics dm = new DisplayMetrics();\n        ((Activity) mContext).getWindowManager().getDefaultDisplay().getMetrics(dm);\n        WindowManager.LayoutParams params = win.getAttributes();\n        int contextRect = getContextRect((Activity) mContext);\n\n        params.gravity = Gravity.CENTER; //you can change Gravity in here\n        params.width = ViewGroup.LayoutParams.MATCH_PARENT; //you can change width in here\n        int screenHeight = contextRect == 0 ? ViewGroup.LayoutParams.MATCH_PARENT : contextRect;\n        params.height = screenHeight;\n        win.setAttributes(params);\n    }\n\n    private int getContextRect(Activity activity) {\n        Rect outRect = new Rect();\n        activity.getWindow().getDecorView().getWindowVisibleDisplayFrame(outRect);\n        return outRect.height();\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12708218,"reputation":335,"user_id":9232719,"display_name":"Ayush Sth"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1657808495,"creation_date":1657808495,"answer_id":72982086,"question_id":72880977,"body_markdown":"this may help \r\n\r\n       override fun onCreate(savedInstanceState: Bundle?) {\r\n        super.onCreate(savedInstanceState)\r\n        setStyle(STYLE_NORMAL, R.style.FullscreenDialogStyle)\r\n        dialog?.let {\r\n            it.window?.setLayout(\r\n                WindowManager.LayoutParams.MATCH_PARENT,\r\n                WindowManager.LayoutParams.MATCH_PARENT\r\n            )\r\n        }\r\n    }\r\n\r\n        &lt;style name=&quot;FullscreenDialogStyle&quot;&gt;\r\n        &lt;item name=&quot;android:windowFrame&quot;&gt;@null&lt;/item&gt;\r\n        &lt;item name=&quot;android:windowIsFloating&quot;&gt;true&lt;/item&gt;\r\n        &lt;item name=&quot;android:windowContentOverlay&quot;&gt;@null&lt;/item&gt;\r\n        &lt;item name=&quot;android:windowAnimationStyle&quot;&gt;@android:style/Animation.Dialog&lt;/item&gt;\r\n        &lt;item name=&quot;android:windowSoftInputMode&quot;&gt;stateUnspecified|adjustPan&lt;/item&gt;\r\n    &lt;/style&gt;","title":"Android Dialog cropping problem on Android 12 devices","body":"<p>this may help</p>\n<pre><code>   override fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n    setStyle(STYLE_NORMAL, R.style.FullscreenDialogStyle)\n    dialog?.let {\n        it.window?.setLayout(\n            WindowManager.LayoutParams.MATCH_PARENT,\n            WindowManager.LayoutParams.MATCH_PARENT\n        )\n    }\n}\n\n    &lt;style name=&quot;FullscreenDialogStyle&quot;&gt;\n    &lt;item name=&quot;android:windowFrame&quot;&gt;@null&lt;/item&gt;\n    &lt;item name=&quot;android:windowIsFloating&quot;&gt;true&lt;/item&gt;\n    &lt;item name=&quot;android:windowContentOverlay&quot;&gt;@null&lt;/item&gt;\n    &lt;item name=&quot;android:windowAnimationStyle&quot;&gt;@android:style/Animation.Dialog&lt;/item&gt;\n    &lt;item name=&quot;android:windowSoftInputMode&quot;&gt;stateUnspecified|adjustPan&lt;/item&gt;\n&lt;/style&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4448387,"reputation":343,"user_id":3621075,"display_name":"user3621075"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1658403637,"creation_date":1658403637,"answer_id":73065524,"question_id":72880977,"body_markdown":"This problem has been resolved by an update by Samsung! I have no idea what the underlying problem was but it no longer is an issue. Thanks to all those who put some thought into it.","title":"Android Dialog cropping problem on Android 12 devices","body":"<p>This problem has been resolved by an update by Samsung! I have no idea what the underlying problem was but it no longer is an issue. Thanks to all those who put some thought into it.</p>\n"}],"owner":{"account_id":4448387,"reputation":343,"user_id":3621075,"display_name":"user3621075"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":386,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73065524,"answer_count":3,"score":0,"last_activity_date":1658403637,"creation_date":1657099498,"question_id":72880977,"body_markdown":"We have a number of Apps on the market that use DialogFragment (the AppCompatDialogFragment version). We are finding that on certain devices, Samsung TAB S7 for one, dialogs are truncated so that information and action buttons at the bottom are not displayed. Nothing I have tried will resolve this issue in a way that is consistent across all devices. I have produces a simple layout and code to demonstrate. This code when inserted in to the live app displays as per the truncated image, in a newly created test app it displays normally on the same device! All theming, manifest settings appear similar. I have spent many days on this so any suggestions would be much appreciated.\r\n\r\n\r\n    package com.example.dialogclipping;\r\n    \r\n    \r\n    import android.os.Bundle;\r\n    import android.view.LayoutInflater;\r\n    import android.view.View;\r\n    import android.view.ViewGroup;\r\n    \r\n    import androidx.annotation.NonNull;\r\n    import androidx.annotation.Nullable;\r\n    import androidx.appcompat.app.AppCompatDialogFragment;\r\n    import androidx.fragment.app.DialogFragment;\r\n    \r\n    public class DlgTest extends AppCompatDialogFragment {\r\n    \r\n    \r\n    \r\n        static DlgTest newInstance() {\r\n    \r\n            return new DlgTest();\r\n        }\r\n    \r\n        @Override\r\n        public void onCreate(@Nullable Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n    \r\n            setStyle(DialogFragment.STYLE_NO_TITLE, R.style.DialogStyle);\r\n    \r\n        }\r\n    \r\n        @Override\r\n        public void onStart() {\r\n            super.onStart();\r\n            int targetWidth = 1000;\r\n            int targetHeight = 0;\r\n    \r\n            // check if specific size setting is required\r\n            if (targetWidth != 0 || targetHeight != 0) {\r\n    \r\n                var dialog = getDialog();\r\n                if (dialog == null) return;\r\n                var window = dialog.getWindow();\r\n                if (window == null) return;\r\n    \r\n                var lp = window.getAttributes();\r\n                // overwrite dimensions as appropriate\r\n                if (targetWidth &gt; 0) lp.width = targetWidth;\r\n                if (targetHeight &gt; 0) lp.height = targetHeight;\r\n                window.setAttributes(lp);\r\n            }\r\n    \r\n        }\r\n    \r\n    \r\n    \r\n        @Nullable\r\n        @Override\r\n        public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {\r\n            View view = inflater.inflate(R.layout.dlg_test_layout, container, false);\r\n            return view;\r\n        }\r\n        int index = 2;\r\n    \r\n        @Override\r\n        public void onViewCreated(@NonNull View view, @Nullable Bundle savedInstanceState) {\r\n            super.onViewCreated(view, savedInstanceState);\r\n    \r\n            view.setBackgroundColor(0xFF92580C);\r\n            final var closeButton = view.findViewById(R.id.yesButton);\r\n            closeButton.setOnClickListener(v -&gt; {\r\n                /*\r\n                var message = &quot;Height is &quot; + view.getHeight() + &quot;; bottom view at &quot; + bottomField.getBottom();\r\n                legend.setText(message);\r\n                var afterField = view.findViewById(fields[index]);\r\n                afterField.setVisibility(View.VISIBLE);\r\n                index = (index + 1) % fields.length;\r\n    \r\n                 */\r\n                //dismiss();\r\n            });\r\n        }\r\n    }\r\n\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;LinearLayout android:id=&quot;@+id/SettingsDialog&quot;\r\n        xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:gravity=&quot;center_horizontal&quot;\r\n        android:paddingLeft=&quot;20dp&quot;\r\n        android:paddingRight=&quot;20dp&quot;\r\n        android:paddingTop=&quot;8dp&quot;\r\n        android:paddingBottom=&quot;8dp&quot;\r\n        android:orientation=&quot;vertical&quot;&gt;\r\n    \r\n        &lt;TextView\r\n            android:id=&quot;@+id/header&quot;\r\n            style=&quot;@style/DialogText.Heading&quot;\r\n            android:minEms=&quot;16&quot;\r\n            android:layout_gravity=&quot;left&quot;\r\n            android:text=&quot;Header line&quot;/&gt;\r\n    \r\n        &lt;View\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;120dp&quot;\r\n            android:background=&quot;@color/blue&quot;/&gt;\r\n    \r\n        &lt;View\r\n            android:id=&quot;@+id/middleView&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;3dp&quot;\r\n            android:layout_marginTop=&quot;10dp&quot;\r\n            android:background=&quot;@color/black&quot;&gt;\r\n    \r\n        &lt;/View&gt;\r\n        &lt;LinearLayout\r\n            android:id=&quot;@+id/ButtonBar&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:orientation=&quot;horizontal&quot;\r\n            android:layout_gravity=&quot;right&quot;&gt;\r\n    \r\n            &lt;Button\r\n                android:id=&quot;@+id/yesButton&quot;\r\n                style=&quot;@style/DialogButton.Large&quot;\r\n                android:textSize=&quot;20dp&quot;\r\n                android:layout_width=&quot;0dip&quot;\r\n                android:layout_weight=&quot;2&quot;\r\n                android:text=&quot;Close&quot;\r\n                android:visibility=&quot;visible&quot;/&gt;\r\n    \r\n        &lt;/LinearLayout&gt;\r\n    \r\n        &lt;View\r\n            android:id=&quot;@+id/bottomView&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;3dp&quot;\r\n            android:background=&quot;@color/blue&quot;&gt;\r\n    \r\n        &lt;/View&gt;\r\n    &lt;/LinearLayout&gt;\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n        package=&quot;com.example.dialogclipping&quot;&gt;\r\n    \r\n        &lt;supports-screens\r\n            android:anyDensity=&quot;true&quot;\r\n            android:largeScreens=&quot;true&quot;\r\n            android:normalScreens=&quot;true&quot;\r\n            android:smallScreens=&quot;false&quot;\r\n            android:xlargeScreens=&quot;true&quot;/&gt;\r\n    \r\n    \r\n        &lt;application\r\n            android:allowBackup=&quot;true&quot;\r\n            android:dataExtractionRules=&quot;@xml/data_extraction_rules&quot;\r\n            android:fullBackupContent=&quot;@xml/backup_rules&quot;\r\n            android:icon=&quot;@mipmap/ic_launcher&quot;\r\n            android:label=&quot;@string/app_name&quot;\r\n            android:resizeableActivity=&quot;false&quot;\r\n            android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\r\n            android:supportsRtl=&quot;true&quot;\r\n            android:theme=&quot;@style/AppBaseTheme&quot;\r\n            tools:targetApi=&quot;31&quot;&gt;\r\n            &lt;activity\r\n                android:name=&quot;.MainActivity&quot;\r\n                android:screenOrientation=&quot;sensorLandscape&quot;\r\n                android:configChanges=&quot;orientation|keyboardHidden|screenSize|smallestScreenSize&quot;\r\n                android:exported=&quot;true&quot;&gt;\r\n                &lt;intent-filter&gt;\r\n                    &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n    \r\n                    &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n                &lt;/intent-filter&gt;\r\n            &lt;/activity&gt;\r\n        &lt;/application&gt;\r\n    \r\n    &lt;/manifest&gt;\r\n\r\n    &lt;resources xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\r\n        &lt;!-- Base application theme. --&gt;\r\n        &lt;style name=&quot;AppBaseTheme&quot; parent=&quot;Theme.AppCompat.NoActionBar&quot;&gt;\r\n        &lt;/style&gt;\r\n    \r\n    \r\n        &lt;style name=&quot;DialogStyle&quot; parent=&quot;Theme.AppCompat.Dialog&quot;&gt;\r\n        &lt;/style&gt;\r\n\r\n[![Real app image][1]][1]\r\n\r\n\r\n[![Test app image][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/uBtQv.png\r\n  [2]: https://i.stack.imgur.com/HSiDL.png","title":"Android Dialog cropping problem on Android 12 devices","body":"<p>We have a number of Apps on the market that use DialogFragment (the AppCompatDialogFragment version). We are finding that on certain devices, Samsung TAB S7 for one, dialogs are truncated so that information and action buttons at the bottom are not displayed. Nothing I have tried will resolve this issue in a way that is consistent across all devices. I have produces a simple layout and code to demonstrate. This code when inserted in to the live app displays as per the truncated image, in a newly created test app it displays normally on the same device! All theming, manifest settings appear similar. I have spent many days on this so any suggestions would be much appreciated.</p>\n<pre><code>package com.example.dialogclipping;\n\n\nimport android.os.Bundle;\nimport android.view.LayoutInflater;\nimport android.view.View;\nimport android.view.ViewGroup;\n\nimport androidx.annotation.NonNull;\nimport androidx.annotation.Nullable;\nimport androidx.appcompat.app.AppCompatDialogFragment;\nimport androidx.fragment.app.DialogFragment;\n\npublic class DlgTest extends AppCompatDialogFragment {\n\n\n\n    static DlgTest newInstance() {\n\n        return new DlgTest();\n    }\n\n    @Override\n    public void onCreate(@Nullable Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n\n        setStyle(DialogFragment.STYLE_NO_TITLE, R.style.DialogStyle);\n\n    }\n\n    @Override\n    public void onStart() {\n        super.onStart();\n        int targetWidth = 1000;\n        int targetHeight = 0;\n\n        // check if specific size setting is required\n        if (targetWidth != 0 || targetHeight != 0) {\n\n            var dialog = getDialog();\n            if (dialog == null) return;\n            var window = dialog.getWindow();\n            if (window == null) return;\n\n            var lp = window.getAttributes();\n            // overwrite dimensions as appropriate\n            if (targetWidth &gt; 0) lp.width = targetWidth;\n            if (targetHeight &gt; 0) lp.height = targetHeight;\n            window.setAttributes(lp);\n        }\n\n    }\n\n\n\n    @Nullable\n    @Override\n    public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {\n        View view = inflater.inflate(R.layout.dlg_test_layout, container, false);\n        return view;\n    }\n    int index = 2;\n\n    @Override\n    public void onViewCreated(@NonNull View view, @Nullable Bundle savedInstanceState) {\n        super.onViewCreated(view, savedInstanceState);\n\n        view.setBackgroundColor(0xFF92580C);\n        final var closeButton = view.findViewById(R.id.yesButton);\n        closeButton.setOnClickListener(v -&gt; {\n            /*\n            var message = &quot;Height is &quot; + view.getHeight() + &quot;; bottom view at &quot; + bottomField.getBottom();\n            legend.setText(message);\n            var afterField = view.findViewById(fields[index]);\n            afterField.setVisibility(View.VISIBLE);\n            index = (index + 1) % fields.length;\n\n             */\n            //dismiss();\n        });\n    }\n}\n\n\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;LinearLayout android:id=&quot;@+id/SettingsDialog&quot;\n    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    android:gravity=&quot;center_horizontal&quot;\n    android:paddingLeft=&quot;20dp&quot;\n    android:paddingRight=&quot;20dp&quot;\n    android:paddingTop=&quot;8dp&quot;\n    android:paddingBottom=&quot;8dp&quot;\n    android:orientation=&quot;vertical&quot;&gt;\n\n    &lt;TextView\n        android:id=&quot;@+id/header&quot;\n        style=&quot;@style/DialogText.Heading&quot;\n        android:minEms=&quot;16&quot;\n        android:layout_gravity=&quot;left&quot;\n        android:text=&quot;Header line&quot;/&gt;\n\n    &lt;View\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;120dp&quot;\n        android:background=&quot;@color/blue&quot;/&gt;\n\n    &lt;View\n        android:id=&quot;@+id/middleView&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;3dp&quot;\n        android:layout_marginTop=&quot;10dp&quot;\n        android:background=&quot;@color/black&quot;&gt;\n\n    &lt;/View&gt;\n    &lt;LinearLayout\n        android:id=&quot;@+id/ButtonBar&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:orientation=&quot;horizontal&quot;\n        android:layout_gravity=&quot;right&quot;&gt;\n\n        &lt;Button\n            android:id=&quot;@+id/yesButton&quot;\n            style=&quot;@style/DialogButton.Large&quot;\n            android:textSize=&quot;20dp&quot;\n            android:layout_width=&quot;0dip&quot;\n            android:layout_weight=&quot;2&quot;\n            android:text=&quot;Close&quot;\n            android:visibility=&quot;visible&quot;/&gt;\n\n    &lt;/LinearLayout&gt;\n\n    &lt;View\n        android:id=&quot;@+id/bottomView&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;3dp&quot;\n        android:background=&quot;@color/blue&quot;&gt;\n\n    &lt;/View&gt;\n&lt;/LinearLayout&gt;\n\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    package=&quot;com.example.dialogclipping&quot;&gt;\n\n    &lt;supports-screens\n        android:anyDensity=&quot;true&quot;\n        android:largeScreens=&quot;true&quot;\n        android:normalScreens=&quot;true&quot;\n        android:smallScreens=&quot;false&quot;\n        android:xlargeScreens=&quot;true&quot;/&gt;\n\n\n    &lt;application\n        android:allowBackup=&quot;true&quot;\n        android:dataExtractionRules=&quot;@xml/data_extraction_rules&quot;\n        android:fullBackupContent=&quot;@xml/backup_rules&quot;\n        android:icon=&quot;@mipmap/ic_launcher&quot;\n        android:label=&quot;@string/app_name&quot;\n        android:resizeableActivity=&quot;false&quot;\n        android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\n        android:supportsRtl=&quot;true&quot;\n        android:theme=&quot;@style/AppBaseTheme&quot;\n        tools:targetApi=&quot;31&quot;&gt;\n        &lt;activity\n            android:name=&quot;.MainActivity&quot;\n            android:screenOrientation=&quot;sensorLandscape&quot;\n            android:configChanges=&quot;orientation|keyboardHidden|screenSize|smallestScreenSize&quot;\n            android:exported=&quot;true&quot;&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\n\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\n            &lt;/intent-filter&gt;\n        &lt;/activity&gt;\n    &lt;/application&gt;\n\n&lt;/manifest&gt;\n\n&lt;resources xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\n    &lt;!-- Base application theme. --&gt;\n    &lt;style name=&quot;AppBaseTheme&quot; parent=&quot;Theme.AppCompat.NoActionBar&quot;&gt;\n    &lt;/style&gt;\n\n\n    &lt;style name=&quot;DialogStyle&quot; parent=&quot;Theme.AppCompat.Dialog&quot;&gt;\n    &lt;/style&gt;\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/uBtQv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/uBtQv.png\" alt=\"Real app image\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/HSiDL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HSiDL.png\" alt=\"Test app image\" /></a></p>\n"},{"tags":["java","hibernate","hibernate-criteria"],"owner":{"account_id":25639712,"reputation":31,"user_id":19408825,"display_name":"HyperFreak"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":347,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":0,"score":3,"last_activity_date":1658403610,"creation_date":1658327687,"question_id":73053566,"body_markdown":"How can the proper Solution (answered Jun 27, 2018 at 6:01 from user Vlad Mihalcea) https://stackoverflow.com/a/51055523/19408825 be transfered in Hibernate commands instead of query Strings?\r\nThe proper sample solution:\r\n\r\n        List&lt;Post&gt; posts = entityManager\r\n        .createQuery(\r\n            &quot;select distinct p &quot; +\r\n            &quot;from Post p &quot; +\r\n            &quot;left join fetch p.comments &quot; +\r\n            &quot;where p.id between :minId and :maxId &quot;, Post.class)\r\n        .setParameter(&quot;minId&quot;, 1L)\r\n        .setParameter(&quot;maxId&quot;, 50L)\r\n        .setHint(QueryHints.PASS_DISTINCT_THROUGH, false)\r\n        .getResultList();\r\n        \r\n        posts = entityManager\r\n        .createQuery(\r\n            &quot;select distinct p &quot; +\r\n            &quot;from Post p &quot; +\r\n            &quot;left join fetch p.tags t &quot; +\r\n            &quot;where p in :posts &quot;, Post.class)\r\n        .setParameter(&quot;posts&quot;, posts)\r\n        .setHint(QueryHints.PASS_DISTINCT_THROUGH, false)\r\n        .getResultList();\r\n\r\nAccording to coding guidlines we must use Hibernate commands instead of the Strings. I already put weeks of work into it and one of my 50 different trials (which are not working) look something like the following.\r\n\r\nClass Post:\r\n\r\n        // Post Class with two lists that are needed in the same time\r\n        public class Post {\r\n            \r\n            ...\r\n        \r\n            @OneToMany(mappedBy = &quot;post&quot;, fetch = FetchType.LAZY)\r\n            private List&lt;Comment&gt; comments;\r\n        \r\n            @OneToMany(mappedBy = &quot;post&quot;, fetch = FetchType.LAZY)\r\n            private List&lt;Tag&gt; tags;\r\n        \t\r\n    \t    ...\r\n        }\r\n\r\nClass PostService:\r\n\r\n        public class PostService {\r\n        \t...\r\n        \t\r\n        \tpublic List&lt;Post&gt; findingAllPosts() {\r\n        \t\tCriteriaBuilder builder = entityManager.getCriteriaBuilder();\r\n        \t\t\r\n                CriteriaQuery&lt;Post&gt; criteria = builder.createQuery(Post.class);\r\n                Root&lt;Post&gt; root = criteria.from(Post.class);\r\n        \t\t\r\n        \t\troot.fetch(Post_.comments, JoinType.LEFT);\r\n        \t\tcriteria.select(root);\r\n        \t\tcriteria.distinct(true);\r\n        \t\t\r\n        \t\tList&lt;Post&gt; posts = entityManager\r\n        \t\t\t\t.createQuery(criteria)\r\n        \t\t\t\t.setHint(QueryHints.HINT_PASS_DISTINCT_THROUGH, false)\r\n        \t\t\t\t.getResultList();\r\n        \t\t\r\n        \t\troot.fetch(Post_.tags, JoinType.LEFT);\r\n        \t\t// different approaches ... one is:\r\n        \t\tcriteria.select(root)\r\n        \t\t\t.where(root\r\n        \t\t\t\t.in(&quot;:posts&quot;)\r\n        \t\t\t);\r\n\t\t        \r\n        \t\tposts = entityManager\r\n        \t\t\t.createQuery(criteria)\r\n        \t\t\t.setParameter(&quot;posts&quot;, posts)\r\n        \t\t\t.setHint(QueryHints.HINT_PASS_DISTINCT_THROUGH, false)\r\n        \t\t\t.getResultList();\r\n        \t\t\t\r\n        \t\treturn posts;\r\n        \t}\r\n        }\r\n\r\nThis and similar other Trials throw the Exception:\r\n\r\n        org.hibernate.QueryException:\r\n        query specified join fetching, but the owner of the\r\n        fetched association was not present in the select list\r\n        [FromElement{explicit,not a collection join,fetch join,\r\n        fetch non-lazy properties,\r\n        classAlias=generatedAlias1,\r\n        role=at.test.Post.comments,\r\n        tableName=TEST.COMMENT,\r\n        tableAlias=comment1_,\r\n        origin=TEST.POST post0_,columns={post0_.ID ,className=at.test.Comment}}]\r\n        [\r\n        select distinct generatedAlias0\r\n        from at.test.Post as generatedAlias0\r\n        left join fetch generatedAlias0.comments as generatedAlias1\r\n        left join fetch generatedAlias0.tags as generatedAlias0\r\n        where generatedAlias0 in (:param0)\r\n        ]:\r\n        javax.ejb.EJBTransactionRolledbackException:\r\n        org.hibernate.QueryException:\r\n        query specified join fetching, but the owner of the\r\n        fetched association was not present in the select list\r\n        [FromElement{explicit,not a collection join,fetch join,\r\n        fetch non-lazy properties,\r\n        classAlias=generatedAlias1,\r\n        role=at.test.Post.comments,\r\n        tableName=TEST.COMMENT,\r\n        tableAlias=comment1_,\r\n        origin=TEST.POST post0_,\r\n        columns={post0_.ID ,className=at.test.Comment}}]\r\n        [\r\n        select distinct generatedAlias0\r\n        from at.test.Post as generatedAlias0\r\n        left join fetch generatedAlias0.comments as generatedAlias1\r\n        left join fetch generatedAlias0.tags as generatedAlias0\r\n        where generatedAlias0 in (:param0)]\r\n        \r\nWhere I am unsure is, how I use the &quot;in&quot; clause in Hibernate. Maybe there is an Problem in the line\r\n\r\n        ... &quot;where p in :posts &quot;, Post.class)\r\n\r\nwhich I translated to\r\n\r\n        ... .where(root.in(&quot;:posts&quot;));\r\n\r\nDoes anybody know how to use the &quot;in&quot;-Clause in the right way?\r\nOr how can this Query Strings can be translated to Hibernate commands like I tried?\r\n\r\nThanks a lot in advance! Would be very important.","title":"Solve MultipleBagFetchException in Hibernate with Hibernate commands instead of query strings - How?","body":"<p>How can the proper Solution (answered Jun 27, 2018 at 6:01 from user Vlad Mihalcea) <a href=\"https://stackoverflow.com/a/51055523/19408825\">https://stackoverflow.com/a/51055523/19408825</a> be transfered in Hibernate commands instead of query Strings?\nThe proper sample solution:</p>\n<pre><code>    List&lt;Post&gt; posts = entityManager\n    .createQuery(\n        &quot;select distinct p &quot; +\n        &quot;from Post p &quot; +\n        &quot;left join fetch p.comments &quot; +\n        &quot;where p.id between :minId and :maxId &quot;, Post.class)\n    .setParameter(&quot;minId&quot;, 1L)\n    .setParameter(&quot;maxId&quot;, 50L)\n    .setHint(QueryHints.PASS_DISTINCT_THROUGH, false)\n    .getResultList();\n    \n    posts = entityManager\n    .createQuery(\n        &quot;select distinct p &quot; +\n        &quot;from Post p &quot; +\n        &quot;left join fetch p.tags t &quot; +\n        &quot;where p in :posts &quot;, Post.class)\n    .setParameter(&quot;posts&quot;, posts)\n    .setHint(QueryHints.PASS_DISTINCT_THROUGH, false)\n    .getResultList();\n</code></pre>\n<p>According to coding guidlines we must use Hibernate commands instead of the Strings. I already put weeks of work into it and one of my 50 different trials (which are not working) look something like the following.</p>\n<p>Class Post:</p>\n<pre><code>    // Post Class with two lists that are needed in the same time\n    public class Post {\n        \n        ...\n    \n        @OneToMany(mappedBy = &quot;post&quot;, fetch = FetchType.LAZY)\n        private List&lt;Comment&gt; comments;\n    \n        @OneToMany(mappedBy = &quot;post&quot;, fetch = FetchType.LAZY)\n        private List&lt;Tag&gt; tags;\n        \n        ...\n    }\n</code></pre>\n<p>Class PostService:</p>\n<pre><code>    public class PostService {\n        ...\n        \n        public List&lt;Post&gt; findingAllPosts() {\n            CriteriaBuilder builder = entityManager.getCriteriaBuilder();\n            \n            CriteriaQuery&lt;Post&gt; criteria = builder.createQuery(Post.class);\n            Root&lt;Post&gt; root = criteria.from(Post.class);\n            \n            root.fetch(Post_.comments, JoinType.LEFT);\n            criteria.select(root);\n            criteria.distinct(true);\n            \n            List&lt;Post&gt; posts = entityManager\n                    .createQuery(criteria)\n                    .setHint(QueryHints.HINT_PASS_DISTINCT_THROUGH, false)\n                    .getResultList();\n            \n            root.fetch(Post_.tags, JoinType.LEFT);\n            // different approaches ... one is:\n            criteria.select(root)\n                .where(root\n                    .in(&quot;:posts&quot;)\n                );\n            \n            posts = entityManager\n                .createQuery(criteria)\n                .setParameter(&quot;posts&quot;, posts)\n                .setHint(QueryHints.HINT_PASS_DISTINCT_THROUGH, false)\n                .getResultList();\n                \n            return posts;\n        }\n    }\n</code></pre>\n<p>This and similar other Trials throw the Exception:</p>\n<pre><code>    org.hibernate.QueryException:\n    query specified join fetching, but the owner of the\n    fetched association was not present in the select list\n    [FromElement{explicit,not a collection join,fetch join,\n    fetch non-lazy properties,\n    classAlias=generatedAlias1,\n    role=at.test.Post.comments,\n    tableName=TEST.COMMENT,\n    tableAlias=comment1_,\n    origin=TEST.POST post0_,columns={post0_.ID ,className=at.test.Comment}}]\n    [\n    select distinct generatedAlias0\n    from at.test.Post as generatedAlias0\n    left join fetch generatedAlias0.comments as generatedAlias1\n    left join fetch generatedAlias0.tags as generatedAlias0\n    where generatedAlias0 in (:param0)\n    ]:\n    javax.ejb.EJBTransactionRolledbackException:\n    org.hibernate.QueryException:\n    query specified join fetching, but the owner of the\n    fetched association was not present in the select list\n    [FromElement{explicit,not a collection join,fetch join,\n    fetch non-lazy properties,\n    classAlias=generatedAlias1,\n    role=at.test.Post.comments,\n    tableName=TEST.COMMENT,\n    tableAlias=comment1_,\n    origin=TEST.POST post0_,\n    columns={post0_.ID ,className=at.test.Comment}}]\n    [\n    select distinct generatedAlias0\n    from at.test.Post as generatedAlias0\n    left join fetch generatedAlias0.comments as generatedAlias1\n    left join fetch generatedAlias0.tags as generatedAlias0\n    where generatedAlias0 in (:param0)]\n    \n</code></pre>\n<p>Where I am unsure is, how I use the &quot;in&quot; clause in Hibernate. Maybe there is an Problem in the line</p>\n<pre><code>    ... &quot;where p in :posts &quot;, Post.class)\n</code></pre>\n<p>which I translated to</p>\n<pre><code>    ... .where(root.in(&quot;:posts&quot;));\n</code></pre>\n<p>Does anybody know how to use the &quot;in&quot;-Clause in the right way?\nOr how can this Query Strings can be translated to Hibernate commands like I tried?</p>\n<p>Thanks a lot in advance! Would be very important.</p>\n"},{"tags":["java","android","android-layout"],"comments":[{"owner":{"account_id":5560717,"reputation":679,"user_id":4410109,"accept_rate":32,"display_name":"Abdul Aleem"},"score":0,"creation_date":1519499553,"post_id":48966333,"comment_id":84938891,"body_markdown":"can you please post your Android Manifest?","body":"can you please post your Android Manifest?"},{"owner":{"account_id":4713289,"reputation":1682,"user_id":3813188,"accept_rate":65,"display_name":"Bassinator"},"score":0,"creation_date":1519501776,"post_id":48966333,"comment_id":84939549,"body_markdown":"@AbdulAleem Done, manifest added.","body":"@AbdulAleem Done, manifest added."}],"answers":[{"tags":[],"owner":{"account_id":5560717,"reputation":679,"user_id":4410109,"accept_rate":32,"display_name":"Abdul Aleem"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1519502472,"creation_date":1519502472,"answer_id":48967034,"question_id":48966333,"body_markdown":"Please try adding below line in your manifest activity\r\n\r\n    android:windowSoftInputMode=&quot;adjustResize&quot;\r\n\r\nFor example:\r\n\r\n    &lt;activity\r\n            android:name=&quot;.view.activities.StudentDetailActivity&quot;\r\n            android:windowSoftInputMode=&quot;adjustResize&quot; /&gt;\r\n\r\nYour dialog size will be adjusted, whenever keyboard gets up. Hope it helps","title":"soft keyboard is covering bottom sheet dialog","body":"<p>Please try adding below line in your manifest activity</p>\n\n<pre><code>android:windowSoftInputMode=\"adjustResize\"\n</code></pre>\n\n<p>For example:</p>\n\n<pre><code>&lt;activity\n        android:name=\".view.activities.StudentDetailActivity\"\n        android:windowSoftInputMode=\"adjustResize\" /&gt;\n</code></pre>\n\n<p>Your dialog size will be adjusted, whenever keyboard gets up. Hope it helps</p>\n"},{"tags":[],"owner":{"account_id":10270629,"reputation":309,"user_id":7579123,"display_name":"ddassa"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1519506885,"creation_date":1519506885,"answer_id":48967677,"question_id":48966333,"body_markdown":"If you have a very large ui on bottomsheet, best thing is to use NestedScrollView with fixed size;\r\n\r\n    &lt;android.support.v4.widget.NestedScrollView xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;500dp&quot;\r\n        android:background=&quot;@color/colorWhite&quot;\r\n        android:orientation=&quot;vertical&quot;&gt;\r\n    \r\n    ......Other views\r\n    \r\n    &lt;/android.support.v4.widget.NestedScrollView&gt;\r\n\r\nalso have a BottomSheetBehavior like following in your bottomSheet;\r\n\r\ndefine a member variable\r\n\r\n    private BottomSheetBehavior.BottomSheetCallback mBottomSheetBehaviorCallback = new BottomSheetBehavior.BottomSheetCallback() {\r\n\r\n        @Override\r\n        public void onStateChanged(@NonNull View bottomSheet, int newState) {\r\n            if (newState == BottomSheetBehavior.STATE_HIDDEN) {\r\n                dismiss();\r\n            }\r\n        }\r\n\r\n        @Override\r\n        public void onSlide(@NonNull View bottomSheet, float slideOffset) {\r\n        }\r\n    };\r\n\r\nand then set it\r\n\r\n    @Override\r\n    public void setupDialog(Dialog dialog, int style) {\r\n        super.setupDialog(dialog, style);\r\n        View contentView = View.inflate(getContext(), R.layout.content_register, null);\r\n        ButterKnife.bind(this, contentView);\r\n        dialog.setContentView(contentView);\r\n\r\n        CoordinatorLayout.LayoutParams params = (CoordinatorLayout.LayoutParams) ((View) contentView.getParent()).getLayoutParams();\r\n        CoordinatorLayout.Behavior behavior = params.getBehavior();\r\n\r\n        if( behavior != null &amp;&amp; behavior instanceof BottomSheetBehavior ) {\r\n            ((BottomSheetBehavior) behavior).setBottomSheetCallback(mBottomSheetBehaviorCallback);\r\n            ((BottomSheetBehavior) behavior).setState(BottomSheetBehavior.STATE_EXPANDED);\r\n        }\r\n    }","title":"soft keyboard is covering bottom sheet dialog","body":"<p>If you have a very large ui on bottomsheet, best thing is to use NestedScrollView with fixed size;</p>\n\n<pre><code>&lt;android.support.v4.widget.NestedScrollView xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"500dp\"\n    android:background=\"@color/colorWhite\"\n    android:orientation=\"vertical\"&gt;\n\n......Other views\n\n&lt;/android.support.v4.widget.NestedScrollView&gt;\n</code></pre>\n\n<p>also have a BottomSheetBehavior like following in your bottomSheet;</p>\n\n<p>define a member variable</p>\n\n<pre><code>private BottomSheetBehavior.BottomSheetCallback mBottomSheetBehaviorCallback = new BottomSheetBehavior.BottomSheetCallback() {\n\n    @Override\n    public void onStateChanged(@NonNull View bottomSheet, int newState) {\n        if (newState == BottomSheetBehavior.STATE_HIDDEN) {\n            dismiss();\n        }\n    }\n\n    @Override\n    public void onSlide(@NonNull View bottomSheet, float slideOffset) {\n    }\n};\n</code></pre>\n\n<p>and then set it</p>\n\n<pre><code>@Override\npublic void setupDialog(Dialog dialog, int style) {\n    super.setupDialog(dialog, style);\n    View contentView = View.inflate(getContext(), R.layout.content_register, null);\n    ButterKnife.bind(this, contentView);\n    dialog.setContentView(contentView);\n\n    CoordinatorLayout.LayoutParams params = (CoordinatorLayout.LayoutParams) ((View) contentView.getParent()).getLayoutParams();\n    CoordinatorLayout.Behavior behavior = params.getBehavior();\n\n    if( behavior != null &amp;&amp; behavior instanceof BottomSheetBehavior ) {\n        ((BottomSheetBehavior) behavior).setBottomSheetCallback(mBottomSheetBehaviorCallback);\n        ((BottomSheetBehavior) behavior).setState(BottomSheetBehavior.STATE_EXPANDED);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":359338,"reputation":918,"user_id":700693,"accept_rate":79,"display_name":"Evren Ozturk"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658403150,"creation_date":1658403150,"answer_id":73065412,"question_id":48966333,"body_markdown":"I had the exact same error.\r\nIn my ugly case it was Huawei device specific.\r\nMy activity and dialog themes already had the option:\r\n\r\n    &lt;item name=&quot;android:windowSoftInputMode&quot;&gt;adjustResize&lt;/item&gt;\r\n\r\n**The only thing required was:**\r\n\r\n    &lt;item name=&quot;android:windowIsFloating&quot;&gt;false&lt;/item&gt;\r\n\r\nSo the final bottom sheet dialog style is:\r\n\r\n        &lt;style name=&quot;CustomBottomSheetDialogTheme&quot; parent=&quot;Theme.AppCompat.Light.Dialog&quot;&gt;\r\n            &lt;item name=&quot;android:windowBackground&quot;&gt;@null&lt;/item&gt;\r\n            &lt;item name=&quot;android:windowIsFloating&quot;&gt;false&lt;/item&gt;\r\n            &lt;item name=&quot;android:windowSoftInputMode&quot;&gt;adjustResize&lt;/item&gt;\r\n        &lt;/style&gt;\r\n\r\nI hope it helps.","title":"soft keyboard is covering bottom sheet dialog","body":"<p>I had the exact same error.\nIn my ugly case it was Huawei device specific.\nMy activity and dialog themes already had the option:</p>\n<pre><code>&lt;item name=&quot;android:windowSoftInputMode&quot;&gt;adjustResize&lt;/item&gt;\n</code></pre>\n<p><strong>The only thing required was:</strong></p>\n<pre><code>&lt;item name=&quot;android:windowIsFloating&quot;&gt;false&lt;/item&gt;\n</code></pre>\n<p>So the final bottom sheet dialog style is:</p>\n<pre><code>    &lt;style name=&quot;CustomBottomSheetDialogTheme&quot; parent=&quot;Theme.AppCompat.Light.Dialog&quot;&gt;\n        &lt;item name=&quot;android:windowBackground&quot;&gt;@null&lt;/item&gt;\n        &lt;item name=&quot;android:windowIsFloating&quot;&gt;false&lt;/item&gt;\n        &lt;item name=&quot;android:windowSoftInputMode&quot;&gt;adjustResize&lt;/item&gt;\n    &lt;/style&gt;\n</code></pre>\n<p>I hope it helps.</p>\n"}],"owner":{"account_id":4713289,"reputation":1682,"user_id":3813188,"accept_rate":65,"display_name":"Bassinator"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10276,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"answer_count":3,"score":11,"last_activity_date":1658403150,"creation_date":1519497530,"question_id":48966333,"body_markdown":"I&#39;ve searched all over the related questions on SO, tried basically all of their solutions, and have gotten nowhere. I want to have a bottom sheet modal dialog with a a few `EditText` and other components in it, using `BottomSheetDialogFragment`, which is easy enough.\r\n\r\nThe problem I am having is that the soft keyboard covers half the dialog. No settings I change seem to make _any_ difference in anything. Did something change in the API? No amount of googling seems to be revealing a solution. What currently happens: keyboard does not cover the edit text that is currently selected, but it covers the dialog below it. I want the whole dialog to be visible at all times and move when the keyboard opens.\r\n\r\nHere is my Fragment class:\r\n\r\n    public class GoalUpdateFormDialogFragment extends BottomSheetDialogFragment {\r\n    \r\n        @Override\r\n        public void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n        }\r\n    \r\n        @Override\r\n        public View onCreateView(@NonNull LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {\r\n            View view = inflater.inflate(R.layout.goal_update_form, container, false);\r\n    \r\n            assert getDialog().getWindow() != null;\r\n    \r\n            getActivity().getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_ADJUST_RESIZE);\r\n            getDialog().getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_ADJUST_RESIZE);\r\n    \r\n            return view;\r\n        }\r\n    \r\n    }\r\n\r\nHere is the dialog layout file I am using:\r\n\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;LinearLayout android:id=&quot;@+id/goal_update_bottom_sheet&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:orientation=&quot;vertical&quot;\r\n        android:layout_margin=&quot;5dp&quot;\r\n        xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        app:layout_behavior=&quot;@string/bottom_sheet_behavior&quot;\r\n        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;&gt;\r\n    \r\n        &lt;LinearLayout\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:orientation=&quot;horizontal&quot;\r\n            android:layout_margin=&quot;5dp&quot;&gt;\r\n    \r\n            &lt;TextView\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:text=&quot;@string/progress_update_hint&quot;/&gt;\r\n    \r\n            &lt;EditText\r\n                android:id=&quot;@+id/goal_progress_number_picker&quot;\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:hint=&quot;@string/goal_progress_box_hint&quot;\r\n                android:inputType=&quot;number&quot;/&gt;\r\n    \r\n        &lt;/LinearLayout&gt;\r\n    \r\n        &lt;EditText\r\n            android:id=&quot;@+id/goal_update_comment_box&quot;\r\n            style=&quot;@style/Widget.AppCompat.EditText&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:gravity=&quot;top&quot;\r\n            android:hint=&quot;@string/comment&quot;\r\n            android:lines=&quot;4&quot;\r\n            android:maxLines=&quot;6&quot;\r\n            android:inputType=&quot;textMultiLine&quot;/&gt;\r\n    \r\n        &lt;LinearLayout\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:orientation=&quot;horizontal&quot;&gt;\r\n    \r\n            &lt;TextView\r\n                android:id=&quot;@+id/image_attachment_file_name&quot;\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:text=&quot;@string/image_file_name_placeholder&quot;\r\n                android:layout_marginStart=&quot;10dp&quot;\r\n                android:layout_marginTop=&quot;5dp&quot;\r\n                android:layout_marginBottom=&quot;5dp&quot;/&gt;\r\n    \r\n            &lt;ImageButton\r\n                android:id=&quot;@+id/delete_attachment_button&quot;\r\n                android:layout_width=&quot;24dp&quot;\r\n                android:layout_height=&quot;24dp&quot;\r\n                android:layout_marginStart=&quot;4dp&quot;\r\n                android:layout_gravity=&quot;center_vertical&quot;\r\n                android:background=&quot;@drawable/transparent&quot;\r\n                android:alpha=&quot;0.54&quot;\r\n                android:src=&quot;@drawable/ic_delete_black_24dp&quot;/&gt;\r\n    \r\n        &lt;/LinearLayout&gt;\r\n    \r\n        &lt;RelativeLayout\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:gravity=&quot;start&quot;&gt;\r\n    \r\n            &lt;ImageButton\r\n                android:id=&quot;@+id/attach_file_button&quot;\r\n                android:layout_width=&quot;32dp&quot;\r\n                android:layout_height=&quot;32dp&quot;\r\n                android:background=&quot;@drawable/transparent&quot;\r\n                android:src=&quot;@drawable/ic_attach_file_black_24dp&quot;\r\n                android:alpha=&quot;0.54&quot;/&gt;\r\n    \r\n            &lt;ImageButton\r\n                android:id=&quot;@+id/attach_image_button&quot;\r\n                android:layout_width=&quot;32dp&quot;\r\n                android:layout_height=&quot;32dp&quot;\r\n                android:background=&quot;@drawable/transparent&quot;\r\n                android:layout_toEndOf=&quot;@id/attach_file_button&quot;\r\n                android:src=&quot;@drawable/ic_add_a_photo_black_24dp&quot;\r\n                android:alpha=&quot;0.54&quot;/&gt;\r\n    \r\n            &lt;TextView\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:text=&quot;@string/max_one_attachment&quot;\r\n                android:layout_toEndOf=&quot;@id/attach_image_button&quot;\r\n                android:layout_centerVertical=&quot;true&quot;\r\n                android:layout_marginStart=&quot;10dp&quot;\r\n                android:alpha=&quot;0.5&quot;/&gt;\r\n    \r\n            &lt;ImageButton\r\n                android:id=&quot;@+id/submit_button&quot;\r\n                android:layout_width=&quot;32dp&quot;\r\n                android:layout_height=&quot;32dp&quot;\r\n                android:src=&quot;@drawable/ic_send_black_24dp&quot;\r\n                android:background=&quot;@drawable/transparent&quot;\r\n                android:layout_alignParentEnd=&quot;true&quot;\r\n                android:alpha=&quot;0.54&quot;/&gt;\r\n    \r\n        &lt;/RelativeLayout&gt;\r\n    \r\n    &lt;/LinearLayout&gt;\r\n\r\nAnd here is the activity layout in which the dialog will be displayed over:\r\n\r\n    &lt;android.support.design.widget.CoordinatorLayout\r\n        xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n        tools:context=&quot;com.iepone.classroom.view.activities.StudentDetailActivity&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;&gt;\r\n    \r\n        &lt;RelativeLayout\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;match_parent&quot;&gt;\r\n    \r\n            &lt;LinearLayout\r\n                android:orientation=&quot;vertical&quot;\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;match_parent&quot;&gt;\r\n    \r\n                &lt;TextView\r\n                    android:layout_width=&quot;match_parent&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:text=&quot;@string/todo&quot;\r\n                    android:layout_gravity=&quot;center&quot;\r\n                    android:textAlignment=&quot;center&quot;/&gt;\r\n    \r\n                &lt;Button\r\n                    android:id=&quot;@+id/pick_image_button&quot;\r\n                    android:layout_width=&quot;wrap_content&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:text=&quot;Pick image&quot;\r\n                    android:onClick=&quot;onClickPickImage&quot;/&gt;\r\n    \r\n                &lt;Button\r\n                    android:id=&quot;@+id/test_comment_box_button&quot;\r\n                    android:layout_width=&quot;wrap_content&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:text=&quot;Test comment box&quot;\r\n                    android:onClick=&quot;onClickTestCommentBox&quot;/&gt;\r\n    \r\n                &lt;ImageView\r\n                    android:id=&quot;@+id/test_image_view&quot;\r\n                    android:layout_width=&quot;wrap_content&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;/&gt;\r\n    \r\n            &lt;/LinearLayout&gt;\r\n    \r\n        &lt;/RelativeLayout&gt;\r\n    \r\n    &lt;/android.support.design.widget.CoordinatorLayout&gt;\r\n\r\n\r\nEDIT: Per request, here is the android manifest, with irrelevant bits removed:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n        package=&quot;REDACTED&quot;&gt;\r\n   \r\n        &lt;application\r\n            android:allowBackup=&quot;true&quot;\r\n            android:icon=&quot;@mipmap/ic_launcher&quot;\r\n            android:supportsRtl=&quot;true&quot;\r\n            android:theme=&quot;@style/AppTheme&quot;\r\n            tools:replace=&quot;android:label&quot;&gt;\r\n            &lt;activity\r\n                android:name=&quot;.view.activities.SplashActivity&quot;\r\n                android:theme=&quot;@style/SplashTheme&quot;&gt;\r\n                &lt;intent-filter&gt;\r\n                    &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n    \r\n                    &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n                &lt;/intent-filter&gt;\r\n            &lt;/activity&gt;\r\n            &lt;activity\r\n                android:name=&quot;.view.activities.MainActivity&quot;\r\n                android:theme=&quot;@style/MainActivityTheme&quot; /&gt;\r\n            &lt;activity\r\n                android:name=&quot;.view.activities.StudentDetailActivity&quot;/&gt;\r\n        &lt;/application&gt;\r\n    \r\n    &lt;/manifest&gt;","title":"soft keyboard is covering bottom sheet dialog","body":"<p>I've searched all over the related questions on SO, tried basically all of their solutions, and have gotten nowhere. I want to have a bottom sheet modal dialog with a a few <code>EditText</code> and other components in it, using <code>BottomSheetDialogFragment</code>, which is easy enough.</p>\n\n<p>The problem I am having is that the soft keyboard covers half the dialog. No settings I change seem to make <em>any</em> difference in anything. Did something change in the API? No amount of googling seems to be revealing a solution. What currently happens: keyboard does not cover the edit text that is currently selected, but it covers the dialog below it. I want the whole dialog to be visible at all times and move when the keyboard opens.</p>\n\n<p>Here is my Fragment class:</p>\n\n<pre><code>public class GoalUpdateFormDialogFragment extends BottomSheetDialogFragment {\n\n    @Override\n    public void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n    }\n\n    @Override\n    public View onCreateView(@NonNull LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {\n        View view = inflater.inflate(R.layout.goal_update_form, container, false);\n\n        assert getDialog().getWindow() != null;\n\n        getActivity().getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_ADJUST_RESIZE);\n        getDialog().getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_ADJUST_RESIZE);\n\n        return view;\n    }\n\n}\n</code></pre>\n\n<p>Here is the dialog layout file I am using:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;LinearLayout android:id=\"@+id/goal_update_bottom_sheet\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"wrap_content\"\n    android:orientation=\"vertical\"\n    android:layout_margin=\"5dp\"\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    app:layout_behavior=\"@string/bottom_sheet_behavior\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"&gt;\n\n    &lt;LinearLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:orientation=\"horizontal\"\n        android:layout_margin=\"5dp\"&gt;\n\n        &lt;TextView\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"\n            android:text=\"@string/progress_update_hint\"/&gt;\n\n        &lt;EditText\n            android:id=\"@+id/goal_progress_number_picker\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"\n            android:hint=\"@string/goal_progress_box_hint\"\n            android:inputType=\"number\"/&gt;\n\n    &lt;/LinearLayout&gt;\n\n    &lt;EditText\n        android:id=\"@+id/goal_update_comment_box\"\n        style=\"@style/Widget.AppCompat.EditText\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:gravity=\"top\"\n        android:hint=\"@string/comment\"\n        android:lines=\"4\"\n        android:maxLines=\"6\"\n        android:inputType=\"textMultiLine\"/&gt;\n\n    &lt;LinearLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:orientation=\"horizontal\"&gt;\n\n        &lt;TextView\n            android:id=\"@+id/image_attachment_file_name\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"\n            android:text=\"@string/image_file_name_placeholder\"\n            android:layout_marginStart=\"10dp\"\n            android:layout_marginTop=\"5dp\"\n            android:layout_marginBottom=\"5dp\"/&gt;\n\n        &lt;ImageButton\n            android:id=\"@+id/delete_attachment_button\"\n            android:layout_width=\"24dp\"\n            android:layout_height=\"24dp\"\n            android:layout_marginStart=\"4dp\"\n            android:layout_gravity=\"center_vertical\"\n            android:background=\"@drawable/transparent\"\n            android:alpha=\"0.54\"\n            android:src=\"@drawable/ic_delete_black_24dp\"/&gt;\n\n    &lt;/LinearLayout&gt;\n\n    &lt;RelativeLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:gravity=\"start\"&gt;\n\n        &lt;ImageButton\n            android:id=\"@+id/attach_file_button\"\n            android:layout_width=\"32dp\"\n            android:layout_height=\"32dp\"\n            android:background=\"@drawable/transparent\"\n            android:src=\"@drawable/ic_attach_file_black_24dp\"\n            android:alpha=\"0.54\"/&gt;\n\n        &lt;ImageButton\n            android:id=\"@+id/attach_image_button\"\n            android:layout_width=\"32dp\"\n            android:layout_height=\"32dp\"\n            android:background=\"@drawable/transparent\"\n            android:layout_toEndOf=\"@id/attach_file_button\"\n            android:src=\"@drawable/ic_add_a_photo_black_24dp\"\n            android:alpha=\"0.54\"/&gt;\n\n        &lt;TextView\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"\n            android:text=\"@string/max_one_attachment\"\n            android:layout_toEndOf=\"@id/attach_image_button\"\n            android:layout_centerVertical=\"true\"\n            android:layout_marginStart=\"10dp\"\n            android:alpha=\"0.5\"/&gt;\n\n        &lt;ImageButton\n            android:id=\"@+id/submit_button\"\n            android:layout_width=\"32dp\"\n            android:layout_height=\"32dp\"\n            android:src=\"@drawable/ic_send_black_24dp\"\n            android:background=\"@drawable/transparent\"\n            android:layout_alignParentEnd=\"true\"\n            android:alpha=\"0.54\"/&gt;\n\n    &lt;/RelativeLayout&gt;\n\n&lt;/LinearLayout&gt;\n</code></pre>\n\n<p>And here is the activity layout in which the dialog will be displayed over:</p>\n\n<pre><code>&lt;android.support.design.widget.CoordinatorLayout\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    tools:context=\"com.iepone.classroom.view.activities.StudentDetailActivity\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"&gt;\n\n    &lt;RelativeLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"&gt;\n\n        &lt;LinearLayout\n            android:orientation=\"vertical\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"match_parent\"&gt;\n\n            &lt;TextView\n                android:layout_width=\"match_parent\"\n                android:layout_height=\"wrap_content\"\n                android:text=\"@string/todo\"\n                android:layout_gravity=\"center\"\n                android:textAlignment=\"center\"/&gt;\n\n            &lt;Button\n                android:id=\"@+id/pick_image_button\"\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:text=\"Pick image\"\n                android:onClick=\"onClickPickImage\"/&gt;\n\n            &lt;Button\n                android:id=\"@+id/test_comment_box_button\"\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:text=\"Test comment box\"\n                android:onClick=\"onClickTestCommentBox\"/&gt;\n\n            &lt;ImageView\n                android:id=\"@+id/test_image_view\"\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"/&gt;\n\n        &lt;/LinearLayout&gt;\n\n    &lt;/RelativeLayout&gt;\n\n&lt;/android.support.design.widget.CoordinatorLayout&gt;\n</code></pre>\n\n<p>EDIT: Per request, here is the android manifest, with irrelevant bits removed:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    package=\"REDACTED\"&gt;\n\n    &lt;application\n        android:allowBackup=\"true\"\n        android:icon=\"@mipmap/ic_launcher\"\n        android:supportsRtl=\"true\"\n        android:theme=\"@style/AppTheme\"\n        tools:replace=\"android:label\"&gt;\n        &lt;activity\n            android:name=\".view.activities.SplashActivity\"\n            android:theme=\"@style/SplashTheme\"&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=\"android.intent.action.MAIN\" /&gt;\n\n                &lt;category android:name=\"android.intent.category.LAUNCHER\" /&gt;\n            &lt;/intent-filter&gt;\n        &lt;/activity&gt;\n        &lt;activity\n            android:name=\".view.activities.MainActivity\"\n            android:theme=\"@style/MainActivityTheme\" /&gt;\n        &lt;activity\n            android:name=\".view.activities.StudentDetailActivity\"/&gt;\n    &lt;/application&gt;\n\n&lt;/manifest&gt;\n</code></pre>\n"},{"tags":["java","android-studio","gradle","release"],"owner":{"account_id":25861549,"reputation":11,"user_id":19593949,"display_name":"Mart Lintz"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":389,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1658402926,"creation_date":1658402926,"question_id":73065358,"body_markdown":"**Logs**\r\nRun gradle/gradle-build-action@v2.2.2\r\nGradle User Home already exists: will not restore from cache.\r\n/home/runner/work/File-Explorer/File-Explorer/gradlew assembleRelease\r\nWelcome to Gradle 7.5!\r\nHere are the highlights of this release:\r\n - Support for Java 18\r\n - Support for building with Groovy 4\r\n - Much more responsive continuous builds\r\n - Improved diagnostics for dependency resolution\r\nFor more details see https://docs.gradle.org/7.5/release-notes.html\r\nStarting a Gradle Daemon (subsequent builds will be faster)\r\nWARNING:We recommend using a newer Android Gradle plugin to use compileSdk = 33\r\nThis Android Gradle plugin (7.2.1) was tested up to compileSdk = 32\r\nThis warning can be suppressed by adding\r\n    android.suppressUnsupportedCompileSdk=33\r\nto this project&#39;s gradle.properties\r\nThe build will continue, but you are strongly encouraged to update your project to\r\nuse a newer Android Gradle Plugin that has been tested with compileSdk = 33\r\n&gt; Task :build-logic:preBuild UP-TO-DATE\r\n&gt; Task :build-logic:preReleaseBuild UP-TO-DATE\r\n&gt; Task :kotlinc:preBuild UP-TO-DATE\r\n&gt; Task :kotlinc:preReleaseBuild UP-TO-DATE\r\n&gt; Task :kotlinc:compileReleaseAidl NO-SOURCE\r\n&gt; Task :build-logic:compileReleaseAidl NO-SOURCE\r\n&gt; Task :build-logic:mergeReleaseJniLibFolders\r\n&gt; Task :build-logic:mergeReleaseNativeLibs NO-SOURCE\r\n&gt; Task :build-logic:stripReleaseDebugSymbols NO-SOURCE\r\n&gt; Task :kotlinc:packageReleaseRenderscript NO-SOURCE\r\n&gt; Task :build-logic:compileReleaseRenderscript NO-SOURCE\r\n&gt; Task :build-logic:copyReleaseJniLibsProjectAndLocalJars\r\n&gt; Task :build-logic:generateReleaseBuildConfig\r\n&gt; Task :build-logic:generateReleaseResValues\r\n&gt; Task :build-logic:generateReleaseResources\r\n&gt; Task :build-logic:packageReleaseResources\r\n&gt; Task :build-logic:parseReleaseLocalResources\r\n&gt; Task :kotlinc:compileReleaseRenderscript NO-SOURCE\r\n&gt; Task :kotlinc:generateReleaseResValues\r\n&gt; Task :kotlinc:generateReleaseResources\r\n&gt; Task :kotlinc:packageReleaseResources\r\n&gt; Task :kotlinc:parseReleaseLocalResources\r\n&gt; Task :build-logic:processReleaseManifest\r\n&gt; Task :kotlinc:processReleaseManifest\r\n&gt; Task :kotlinc:generateReleaseBuildConfig\r\n&gt; Task :kotlinc:javaPreCompileRelease\r\n&gt; Task :build-logic:javaPreCompileRelease\r\n&gt; Task :build-logic:mergeReleaseShaders\r\n&gt; Task :build-logic:compileReleaseShaders NO-SOURCE\r\n&gt; Task :build-logic:generateReleaseAssets UP-TO-DATE\r\n&gt; Task :build-logic:packageReleaseAssets\r\n&gt; Task :build-logic:packageReleaseRenderscript NO-SOURCE\r\n&gt; Task :build-logic:prepareLintJarForPublish\r\n&gt; Task :build-logic:prepareReleaseArtProfile\r\n&gt; Task :kotlinc:generateReleaseRFile\r\n&gt; Task :build-logic:processReleaseJavaRes\r\n&gt; Task :build-logic:generateReleaseRFile\r\n&gt; Task :build-logic:mergeReleaseJavaResource\r\n&gt; Task :build-logic:writeReleaseAarMetadata\r\n&gt; Task :kotlinc:mergeReleaseJniLibFolders\r\n&gt; Task :kotlinc:mergeReleaseNativeLibs NO-SOURCE\r\n&gt; Task :kotlinc:stripReleaseDebugSymbols NO-SOURCE\r\n&gt; Task :kotlinc:copyReleaseJniLibsProjectAndLocalJars\r\n&gt; Task :kotlinc:mergeReleaseShaders\r\n&gt; Task :kotlinc:compileReleaseShaders NO-SOURCE\r\n&gt; Task :kotlinc:generateReleaseAssets UP-TO-DATE\r\n&gt; Task :kotlinc:packageReleaseAssets\r\n&gt; Task :kotlinc:prepareLintJarForPublish\r\n&gt; Task :kotlinc:prepareReleaseArtProfile\r\n&gt; Task :kotlinc:processReleaseJavaRes\r\n&gt; Task :kotlinc:writeReleaseAarMetadata\r\n&gt; Task :app:buildKotlinToolingMetadata\r\n&gt; Task :app:preBuild UP-TO-DATE\r\n&gt; Task :app:preReleaseBuild UP-TO-DATE\r\n&gt; Task :app:compileReleaseAidl NO-SOURCE\r\n&gt; Task :app:compileReleaseRenderscript NO-SOURCE\r\n&gt; Task :app:generateReleaseBuildConfig\r\n&gt; Task :app:checkReleaseAarMetadata\r\n&gt; Task :app:generateReleaseResValues\r\n&gt; Task :app:generateReleaseResources\r\n&gt; Task :app:mergeReleaseResources\r\n&gt; Task :app:mapReleaseSourceSetPaths\r\n&gt; Task :app:createReleaseCompatibleScreenManifests\r\n&gt; Task :app:extractDeepLinksRelease\r\n&gt; Task :build-logic:extractDeepLinksRelease\r\n&gt; Task :kotlinc:extractDeepLinksRelease\r\n&gt; Task :app:processReleaseMainManifest\r\n&gt; Task :app:processReleaseManifest\r\n&gt; Task :app:processReleaseManifestForPackage\r\n&gt; Task :build-logic:compileReleaseLibraryResources\r\n&gt; Task :kotlinc:compileReleaseLibraryResources\r\n&gt; Task :app:processReleaseResources\r\n&gt; Task :app:javaPreCompileRelease\r\n&gt; Task :app:extractProguardFiles\r\n&gt; Task :build-logic:bundleLibResRelease\r\n&gt; Task :build-logic:writeReleaseLintModelMetadata\r\n&gt; Task :kotlinc:writeReleaseLintModelMetadata\r\n&gt; Task :app:mergeReleaseJniLibFolders\r\n&gt; Task :build-logic:copyReleaseJniLibsProjectOnly\r\n&gt; Task :kotlinc:copyReleaseJniLibsProjectOnly\r\n&gt; Task :app:mergeReleaseNativeLibs NO-SOURCE\r\n&gt; Task :app:stripReleaseDebugSymbols NO-SOURCE\r\n&gt; Task :app:extractReleaseNativeSymbolTables NO-SOURCE\r\n&gt; Task :app:mergeReleaseNativeDebugMetadata NO-SOURCE\r\n&gt; Task :app:checkReleaseDuplicateClasses\r\n&gt; Task :kotlinc:compileReleaseKotlin\r\nw: /home/runner/work/File-Explorer/File-Explorer/kotlinc/src/main/java/org/jetbrains/kotlin/cli/jvm/plugins/ServiceLoaderLite.kt: (52, 13): Unsafe use of a nullable receiver of type MutableList&lt;Service&gt;\r\nw: /home/runner/work/File-Explorer/File-Explorer/kotlinc/src/main/java/org/jetbrains/kotlin/cli/jvm/plugins/ServiceLoaderLite.kt: (75, 43): &#39;toLowerCase(): String&#39; is deprecated. Use lowercase() instead.\r\nw: /home/runner/work/File-Explorer/File-Explorer/kotlinc/src/main/java/org/jetbrains/kotlin/utils/PathUtil.kt: (132, 24): Unsafe use of a nullable receiver of type File?\r\nw: /home/runner/work/File-Explorer/File-Explorer/kotlinc/src/main/java/org/jetbrains/kotlin/utils/PathUtil.kt: (132, 24): Type mismatch: inferred type is File? but File was expected\r\nw: /home/runner/work/File-Explorer/File-Explorer/kotlinc/src/main/java/org/jetbrains/kotlin/utils/PathUtil.kt: (145, 34): Unsafe use of a nullable receiver of type File?\r\nw: /home/runner/work/File-Explorer/File-Explorer/kotlinc/src/main/java/org/jetbrains/kotlin/utils/PathUtil.kt: (165, 35): Type mismatch: inferred type is String? but String was expected\r\n&gt; Task :app:desugarReleaseFileDependencies\r\n&gt; Task :kotlinc:compileReleaseJavaWithJavac\r\nNote: Some input files use or override a deprecated API.\r\nNote: Recompile with -Xlint:deprecation for details.\r\nNote: Some input files use unchecked or unsafe operations.\r\nNote: Recompile with -Xlint:unchecked for details.\r\n&gt; Task :kotlinc:bundleLibCompileToJarRelease\r\n&gt; Task :build-logic:extractReleaseAnnotations\r\n&gt; Task :build-logic:compileReleaseJavaWithJavac\r\nNote: Some input files use or override a deprecated API.\r\nNote: Recompile with -Xlint:deprecation for details.\r\nNote: Some input files use unchecked or unsafe operations.\r\nNote: Recompile with -Xlint:unchecked for details.\r\n&gt; Task :build-logic:mergeReleaseGeneratedProguardFiles\r\n&gt; Task :build-logic:mergeReleaseConsumerProguardFiles\r\n&gt; Task :build-logic:syncReleaseLibJars\r\n&gt; Task :build-logic:bundleReleaseLocalLintAar\r\n&gt; Task :kotlinc:extractReleaseAnnotations\r\n&gt; Task :kotlinc:mergeReleaseGeneratedProguardFiles\r\n&gt; Task :kotlinc:mergeReleaseConsumerProguardFiles\r\n&gt; Task :build-logic:bundleLibCompileToJarRelease\r\n&gt; Task :app:compileReleaseKotlin NO-SOURCE\r\n&gt; Task :kotlinc:mergeReleaseJavaResource\r\n&gt; Task :app:compileReleaseJavaWithJavac\r\nNote: [1] Wrote GeneratedAppGlideModule with: []\r\nNote: Some input files use or override a deprecated API.\r\nNote: Recompile with -Xlint:deprecation for details.\r\n&gt; Task :kotlinc:syncReleaseLibJars\r\n&gt; Task :kotlinc:bundleReleaseLocalLintAar\r\n&gt; Task :kotlinc:bundleLibResRelease\r\n&gt; Task :kotlinc:bundleLibRuntimeToJarRelease\r\n&gt; Task :kotlinc:createFullJarRelease\r\n&gt; Task :build-logic:bundleLibRuntimeToJarRelease\r\n&gt; Task :app:mergeExtDexRelease\r\n&gt; Task :build-logic:createFullJarRelease\r\n&gt; Task :build-logic:bundleLibRuntimeToDirRelease\r\n&gt; Task :app:lintVitalAnalyzeRelease\r\n&gt; Task :app:lintVitalReportRelease\r\n&gt; Task :app:lintVitalRelease\r\n&gt; Task :kotlinc:bundleLibRuntimeToDirRelease\r\n&gt; Task :app:dexBuilderRelease\r\n&gt; Task :app:mergeReleaseArtProfile\r\n&gt; Task :app:mergeReleaseShaders\r\n&gt; Task :app:compileReleaseShaders NO-SOURCE\r\n&gt; Task :app:generateReleaseAssets UP-TO-DATE\r\n&gt; Task :app:mergeReleaseAssets\r\n&gt; Task :app:compressReleaseAssets\r\n&gt; Task :app:processReleaseJavaRes NO-SOURCE\r\n&gt; Task :app:mergeReleaseJavaResource\r\n&gt; Task :app:optimizeReleaseResources\r\n&gt; Task :app:collectReleaseDependencies\r\n&gt; Task :app:sdkReleaseDependencyData\r\n&gt; Task :app:writeReleaseAppMetadata\r\n&gt; Task :app:writeReleaseSigningConfigVersions\r\n&gt; Task :build-logic:bundleReleaseAar\r\n&gt; Task :build-logic:mergeReleaseResources\r\n&gt; Task :build-logic:mapReleaseSourceSetPaths\r\n&gt; Task :build-logic:verifyReleaseResources\r\n&gt; Task :build-logic:assembleRelease\r\n&gt; Task :kotlinc:bundleReleaseAar\r\n&gt; Task :kotlinc:mergeReleaseResources\r\n&gt; Task :kotlinc:mapReleaseSourceSetPaths\r\n&gt; Task :kotlinc:verifyReleaseResources\r\n&gt; Task :kotlinc:assembleRelease\r\n&gt; Task :app:mergeDexRelease FAILED\r\nERROR:/home/runner/work/File-Explorer/File-Explorer/build-logic/build/.transforms/63709c9a363d9d7c070fd985789aef5f/transformed/release/org/w3c/dom/html/HTMLDOMImplementation.dex: D8: Type org.w3c.dom.html.HTMLDOMImplementation is defined multiple times: /home/runner/work/File-Explorer/File-Explorer/build-logic/build/.transforms/63709c9a363d9d7c070fd985789aef5f/transformed/release/org/w3c/dom/html/HTMLDOMImplementation.dex, /home/runner/work/File-Explorer/File-Explorer/app/build/intermediates/external_libs_dex/release/mergeExtDexRelease/classes7.dex\r\ncom.android.builder.dexing.DexArchiveMergerException: Error while merging dex archives: \r\nLearn how to resolve the issue at https://developer.android.com/studio/build/dependencies#duplicate_classes.\r\nType org.w3c.dom.html.HTMLDOMImplementation is defined multiple times: /home/runner/work/File-Explorer/File-Explorer/build-logic/build/.transforms/63709c9a363d9d7c070fd985789aef5f/transformed/release/org/w3c/dom/html/HTMLDOMImplementation.dex, /home/runner/work/File-Explorer/File-Explorer/app/build/intermediates/external_libs_dex/release/mergeExtDexRelease/classes7.dex\r\n\tat com.android.builder.dexing.D8DexArchiveMerger.getExceptionToRethrow(D8DexArchiveMerger.java:151)\r\n\tat com.android.builder.dexing.D8DexArchiveMerger.mergeDexArchives(D8DexArchiveMerger.java:138)\r\n\tat com.android.build.gradle.internal.tasks.DexMergingWorkAction.merge(DexMergingTask.kt:859)\r\n\tat com.android.build.gradle.internal.tasks.DexMergingWorkAction.run(DexMergingTask.kt:805)\r\n\tat com.android.build.gradle.internal.profile.ProfileAwareWorkAction.execute(ProfileAwareWorkAction.kt:74)\r\n\tat org.gradle.workers.internal.DefaultWorkerServer.execute(DefaultWorkerServer.java:63)\r\n\tat org.gradle.workers.internal.NoIsolationWorkerFactory$1$1.create(NoIsolationWorkerFactory.java:66)\r\n\tat org.gradle.workers.internal.NoIsolationWorkerFactory$1$1.create(NoIsolationWorkerFactory.java:62)\r\n\tat org.gradle.internal.classloader.ClassLoaderUtils.executeInClassloader(ClassLoaderUtils.java:100)\r\n\tat org.gradle.workers.internal.NoIsolationWorkerFactory$1.lambda$execute$0(NoIsolationWorkerFactory.java:62)\r\n\tat org.gradle.workers.internal.AbstractWorker$1.call(AbstractWorker.java:44)\r\n\tat org.gradle.workers.internal.AbstractWorker$1.call(AbstractWorker.java:41)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:204)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:199)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:66)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:59)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:157)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:59)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationRunner.call(DefaultBuildOperationRunner.java:53)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationExecutor.call(DefaultBuildOperationExecutor.java:73)\r\n\tat org.gradle.workers.internal.AbstractWorker.executeWrappedInBuildOperation(AbstractWorker.java:41)\r\n\tat org.gradle.workers.internal.NoIsolationWorkerFactory$1.execute(NoIsolationWorkerFactory.java:59)\r\n\tat org.gradle.workers.internal.DefaultWorkerExecutor.lambda$submitWork$2(DefaultWorkerExecutor.java:205)\r\n\tat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\r\n\tat org.gradle.internal.work.DefaultConditionalExecutionQueue$ExecutionRunner.runExecution(DefaultConditionalExecutionQueue.java:187)\r\n\tat org.gradle.internal.work.DefaultConditionalExecutionQueue$ExecutionRunner.access$700(DefaultConditionalExecutionQueue.java:120)\r\n\tat org.gradle.internal.work.DefaultConditionalExecutionQueue$ExecutionRunner$1.run(DefaultConditionalExecutionQueue.java:162)\r\n\tat org.gradle.internal.Factories$1.create(Factories.java:31)\r\n\tat org.gradle.internal.work.DefaultWorkerLeaseService.withLocks(DefaultWorkerLeaseService.java:249)\r\n\tat org.gradle.internal.work.DefaultWorkerLeaseService.runAsWorkerThread(DefaultWorkerLeaseService.java:109)\r\n\tat org.gradle.internal.work.DefaultWorkerLeaseService.runAsWorkerThread(DefaultWorkerLeaseService.java:114)\r\n\tat org.gradle.internal.work.DefaultConditionalExecutionQueue$ExecutionRunner.runBatch(DefaultConditionalExecutionQueue.java:157)\r\n\tat org.gradle.internal.work.DefaultConditionalExecutionQueue$ExecutionRunner.run(DefaultConditionalExecutionQueue.java:126)\r\n\tat java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)\r\n\tat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\r\n\tat org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:64)\r\n\tat org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:48)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\r\n\tat java.base/java.lang.Thread.run(Thread.java:833)\r\nCaused by: com.android.tools.r8.CompilationFailedException: Compilation failed to complete, origin: /home/runner/work/File-Explorer/File-Explorer/build-logic/build/.transforms/63709c9a363d9d7c070fd985789aef5f/transformed/release/org/w3c/dom/html/HTMLDOMImplementation.dex\r\n\tat Version.fakeStackEntry(Version_3.2.60.java:0)\r\n\tat com.android.tools.r8.internal.bi.a(R8_3.2.60_61a204e00a4460bee78ec2913234dc5e1a3a501d9754e757835d117b7e302ba3:68)\r\n\tat com.android.tools.r8.internal.bi.a(R8_3.2.60_61a204e00a4460bee78ec2913234dc5e1a3a501d9754e757835d117b7e302ba3:28)\r\n\tat com.android.tools.r8.internal.bi.a(R8_3.2.60_61a204e00a4460bee78ec2913234dc5e1a3a501d9754e757835d117b7e302ba3:27)\r\n\tat com.android.tools.r8.internal.bi.b(R8_3.2.60_61a204e00a4460bee78ec2913234dc5e1a3a501d9754e757835d117b7e302ba3:3)\r\n\tat com.android.tools.r8.D8.run(R8_3.2.60_61a204e00a4460bee78ec2913234dc5e1a3a501d9754e757835d117b7e302ba3:11)\r\n\tat com.android.builder.dexing.D8DexArchiveMerger.mergeDexArchives(D8DexArchiveMerger.java:136)\r\n\t... 38 more\r\nCaused by: com.android.tools.r8.internal.a: Type org.w3c.dom.html.HTMLDOMImplementation is defined multiple times: /home/runner/work/File-Explorer/File-Explorer/build-logic/build/.transforms/63709c9a363d9d7c070fd985789aef5f/transformed/release/org/w3c/dom/html/HTMLDOMImplementation.dex, /home/runner/work/File-Explorer/File-Explorer/app/build/intermediates/external_libs_dex/release/mergeExtDexRelease/classes7.dex\r\n\tat com.android.tools.r8.internal.uQ.a(R8_3.2.60_61a204e00a4460bee78ec2913234dc5e1a3a501d9754e757835d117b7e302ba3:14)\r\n\tat com.android.tools.r8.internal.uQ.a(R8_3.2.60_61a204e00a4460bee78ec2913234dc5e1a3a501d9754e757835d117b7e302ba3:22)\r\n\tat com.android.tools.r8.internal.yK.b(R8_3.2.60_61a204e00a4460bee78ec2913234dc5e1a3a501d9754e757835d117b7e302ba3:7)\r\n\tat com.android.tools.r8.internal.yK.a(R8_3.2.60_61a204e00a4460bee78ec2913234dc5e1a3a501d9754e757835d117b7e302ba3:23)\r\n\tat com.android.tools.r8.internal.yK.a(R8_3.2.60_61a204e00a4460bee78ec2913234dc5e1a3a501d9754e757835d117b7e302ba3:10)\r\n\tat java.base/java.util.concurrent.ConcurrentHashMap.merge(ConcurrentHashMap.java:2056)\r\n\tat com.android.tools.r8.internal.yK.a(R8_3.2.60_61a204e00a4460bee78ec2913234dc5e1a3a501d9754e757835d117b7e302ba3:6)\r\n\tat com.android.tools.r8.graph.A2$a.e(R8_3.2.60_61a204e00a4460bee78ec2913234dc5e1a3a501d9754e757835d117b7e302ba3:4)\r\n\tat com.android.tools.r8.dex.b.a(R8_3.2.60_61a204e00a4460bee78ec2913234dc5e1a3a501d9754e757835d117b7e302ba3:105)\r\n\tat com.android.tools.r8.dex.b.a(R8_3.2.60_61a204e00a4460bee78ec2913234dc5e1a3a501d9754e757835d117b7e302ba3:28)\r\n\tat com.android.tools.r8.D8.a(R8_3.2.60_61a204e00a4460bee78ec2913234dc5e1a3a501d9754e757835d117b7e302ba3:26)\r\n\tat com.android.tools.r8.D8.d(R8_3.2.60_61a204e00a4460bee78ec2913234dc5e1a3a501d9754e757835d117b7e302ba3:593)\r\n\tat com.android.tools.r8.D8.b(R8_3.2.60_61a204e00a4460bee78ec2913234dc5e1a3a501d9754e757835d117b7e302ba3:1)\r\n\tat com.android.tools.r8.internal.bi.a(R8_3.2.60_61a204e00a4460bee78ec2913234dc5e1a3a501d9754e757835d117b7e302ba3:24)\r\n\t... 41 more\r\nFAILURE: Build failed with an exception.\r\n* What went wrong:\r\nExecution failed for task &#39;:app:mergeDexRelease&#39;.\r\n&gt; A failure occurred while executing com.android.build.gradle.internal.tasks.DexMergingTaskDelegate\r\n   &gt; There was a failure while executing work items\r\n      &gt; A failure occurred while executing com.android.build.gradle.internal.tasks.DexMergingWorkAction\r\n         &gt; com.android.builder.dexing.DexArchiveMergerException: Error while merging dex archives: \r\n           Learn how to resolve the issue at https://developer.android.com/studio/build/dependencies#duplicate_classes.\r\n           Type org.w3c.dom.html.HTMLDOMImplementation is defined multiple times: /home/runner/work/File-Explorer/File-Explorer/build-logic/build/.transforms/63709c9a363d9d7c070fd985789aef5f/transformed/release/org/w3c/dom/html/HTMLDOMImplementation.dex, /home/runner/work/File-Explorer/File-Explorer/app/build/intermediates/external_libs_dex/release/mergeExtDexRelease/classes7.dex\r\n* Try:\r\n&gt; Run with --stacktrace option to get the stack trace.\r\n&gt; Run with --info or --debug option to get more log output.\r\n&gt; Run with --scan to get full insights.\r\n* Get more help at https://help.gradle.org\r\nBUILD FAILED in 4m 13s\r\nDeprecated Gradle features were used in this build, making it incompatible with Gradle 8.0.\r\nYou can use &#39;--warning-mode all&#39; to show the individual deprecation warnings and determine if they come from your own scripts or plugins.\r\nSee https://docs.gradle.org/7.5/userguide/command_line_interface.html#sec:command_line_warnings\r\n105 actionable tasks: 105 executed\r\nError: Gradle build failed: see console output for details\r\n0s\r\n1s\r\n0s\r\n0s\r\n0s","title":"How solve app:mergeDexRelease Failed issue?","body":"<p><strong>Logs</strong>\nRun gradle/gradle-build-action@v2.2.2\nGradle User Home already exists: will not restore from cache.\n/home/runner/work/File-Explorer/File-Explorer/gradlew assembleRelease\nWelcome to Gradle 7.5!\nHere are the highlights of this release:</p>\n<ul>\n<li>Support for Java 18</li>\n<li>Support for building with Groovy 4</li>\n<li>Much more responsive continuous builds</li>\n<li>Improved diagnostics for dependency resolution\nFor more details see <a href=\"https://docs.gradle.org/7.5/release-notes.html\" rel=\"nofollow noreferrer\">https://docs.gradle.org/7.5/release-notes.html</a>\nStarting a Gradle Daemon (subsequent builds will be faster)\nWARNING:We recommend using a newer Android Gradle plugin to use compileSdk = 33\nThis Android Gradle plugin (7.2.1) was tested up to compileSdk = 32\nThis warning can be suppressed by adding\nandroid.suppressUnsupportedCompileSdk=33\nto this project's gradle.properties\nThe build will continue, but you are strongly encouraged to update your project to\nuse a newer Android Gradle Plugin that has been tested with compileSdk = 33</li>\n</ul>\n<blockquote>\n<p>Task :build-logic:preBuild UP-TO-DATE\nTask :build-logic:preReleaseBuild UP-TO-DATE\nTask :kotlinc:preBuild UP-TO-DATE\nTask :kotlinc:preReleaseBuild UP-TO-DATE\nTask :kotlinc:compileReleaseAidl NO-SOURCE\nTask :build-logic:compileReleaseAidl NO-SOURCE\nTask :build-logic:mergeReleaseJniLibFolders\nTask :build-logic:mergeReleaseNativeLibs NO-SOURCE\nTask :build-logic:stripReleaseDebugSymbols NO-SOURCE\nTask :kotlinc:packageReleaseRenderscript NO-SOURCE\nTask :build-logic:compileReleaseRenderscript NO-SOURCE\nTask :build-logic:copyReleaseJniLibsProjectAndLocalJars\nTask :build-logic:generateReleaseBuildConfig\nTask :build-logic:generateReleaseResValues\nTask :build-logic:generateReleaseResources\nTask :build-logic:packageReleaseResources\nTask :build-logic:parseReleaseLocalResources\nTask :kotlinc:compileReleaseRenderscript NO-SOURCE\nTask :kotlinc:generateReleaseResValues\nTask :kotlinc:generateReleaseResources\nTask :kotlinc:packageReleaseResources\nTask :kotlinc:parseReleaseLocalResources\nTask :build-logic:processReleaseManifest\nTask :kotlinc:processReleaseManifest\nTask :kotlinc:generateReleaseBuildConfig\nTask :kotlinc:javaPreCompileRelease\nTask :build-logic:javaPreCompileRelease\nTask :build-logic:mergeReleaseShaders\nTask :build-logic:compileReleaseShaders NO-SOURCE\nTask :build-logic:generateReleaseAssets UP-TO-DATE\nTask :build-logic:packageReleaseAssets\nTask :build-logic:packageReleaseRenderscript NO-SOURCE\nTask :build-logic:prepareLintJarForPublish\nTask :build-logic:prepareReleaseArtProfile\nTask :kotlinc:generateReleaseRFile\nTask :build-logic:processReleaseJavaRes\nTask :build-logic:generateReleaseRFile\nTask :build-logic:mergeReleaseJavaResource\nTask :build-logic:writeReleaseAarMetadata\nTask :kotlinc:mergeReleaseJniLibFolders\nTask :kotlinc:mergeReleaseNativeLibs NO-SOURCE\nTask :kotlinc:stripReleaseDebugSymbols NO-SOURCE\nTask :kotlinc:copyReleaseJniLibsProjectAndLocalJars\nTask :kotlinc:mergeReleaseShaders\nTask :kotlinc:compileReleaseShaders NO-SOURCE\nTask :kotlinc:generateReleaseAssets UP-TO-DATE\nTask :kotlinc:packageReleaseAssets\nTask :kotlinc:prepareLintJarForPublish\nTask :kotlinc:prepareReleaseArtProfile\nTask :kotlinc:processReleaseJavaRes\nTask :kotlinc:writeReleaseAarMetadata\nTask :app:buildKotlinToolingMetadata\nTask :app:preBuild UP-TO-DATE\nTask :app:preReleaseBuild UP-TO-DATE\nTask :app:compileReleaseAidl NO-SOURCE\nTask :app:compileReleaseRenderscript NO-SOURCE\nTask :app:generateReleaseBuildConfig\nTask :app:checkReleaseAarMetadata\nTask :app:generateReleaseResValues\nTask :app:generateReleaseResources\nTask :app:mergeReleaseResources\nTask :app:mapReleaseSourceSetPaths\nTask :app:createReleaseCompatibleScreenManifests\nTask :app:extractDeepLinksRelease\nTask :build-logic:extractDeepLinksRelease\nTask :kotlinc:extractDeepLinksRelease\nTask :app:processReleaseMainManifest\nTask :app:processReleaseManifest\nTask :app:processReleaseManifestForPackage\nTask :build-logic:compileReleaseLibraryResources\nTask :kotlinc:compileReleaseLibraryResources\nTask :app:processReleaseResources\nTask :app:javaPreCompileRelease\nTask :app:extractProguardFiles\nTask :build-logic:bundleLibResRelease\nTask :build-logic:writeReleaseLintModelMetadata\nTask :kotlinc:writeReleaseLintModelMetadata\nTask :app:mergeReleaseJniLibFolders\nTask :build-logic:copyReleaseJniLibsProjectOnly\nTask :kotlinc:copyReleaseJniLibsProjectOnly\nTask :app:mergeReleaseNativeLibs NO-SOURCE\nTask :app:stripReleaseDebugSymbols NO-SOURCE\nTask :app:extractReleaseNativeSymbolTables NO-SOURCE\nTask :app:mergeReleaseNativeDebugMetadata NO-SOURCE\nTask :app:checkReleaseDuplicateClasses\nTask :kotlinc:compileReleaseKotlin\nw: /home/runner/work/File-Explorer/File-Explorer/kotlinc/src/main/java/org/jetbrains/kotlin/cli/jvm/plugins/ServiceLoaderLite.kt: (52, 13): Unsafe use of a nullable receiver of type MutableList\nw: /home/runner/work/File-Explorer/File-Explorer/kotlinc/src/main/java/org/jetbrains/kotlin/cli/jvm/plugins/ServiceLoaderLite.kt: (75, 43): 'toLowerCase(): String' is deprecated. Use lowercase() instead.\nw: /home/runner/work/File-Explorer/File-Explorer/kotlinc/src/main/java/org/jetbrains/kotlin/utils/PathUtil.kt: (132, 24): Unsafe use of a nullable receiver of type File?\nw: /home/runner/work/File-Explorer/File-Explorer/kotlinc/src/main/java/org/jetbrains/kotlin/utils/PathUtil.kt: (132, 24): Type mismatch: inferred type is File? but File was expected\nw: /home/runner/work/File-Explorer/File-Explorer/kotlinc/src/main/java/org/jetbrains/kotlin/utils/PathUtil.kt: (145, 34): Unsafe use of a nullable receiver of type File?\nw: /home/runner/work/File-Explorer/File-Explorer/kotlinc/src/main/java/org/jetbrains/kotlin/utils/PathUtil.kt: (165, 35): Type mismatch: inferred type is String? but String was expected\nTask :app:desugarReleaseFileDependencies\nTask :kotlinc:compileReleaseJavaWithJavac\nNote: Some input files use or override a deprecated API.\nNote: Recompile with -Xlint:deprecation for details.\nNote: Some input files use unchecked or unsafe operations.\nNote: Recompile with -Xlint:unchecked for details.\nTask :kotlinc:bundleLibCompileToJarRelease\nTask :build-logic:extractReleaseAnnotations\nTask :build-logic:compileReleaseJavaWithJavac\nNote: Some input files use or override a deprecated API.\nNote: Recompile with -Xlint:deprecation for details.\nNote: Some input files use unchecked or unsafe operations.\nNote: Recompile with -Xlint:unchecked for details.\nTask :build-logic:mergeReleaseGeneratedProguardFiles\nTask :build-logic:mergeReleaseConsumerProguardFiles\nTask :build-logic:syncReleaseLibJars\nTask :build-logic:bundleReleaseLocalLintAar\nTask :kotlinc:extractReleaseAnnotations\nTask :kotlinc:mergeReleaseGeneratedProguardFiles\nTask :kotlinc:mergeReleaseConsumerProguardFiles\nTask :build-logic:bundleLibCompileToJarRelease\nTask :app:compileReleaseKotlin NO-SOURCE\nTask :kotlinc:mergeReleaseJavaResource\nTask :app:compileReleaseJavaWithJavac\nNote: [1] Wrote GeneratedAppGlideModule with: []\nNote: Some input files use or override a deprecated API.\nNote: Recompile with -Xlint:deprecation for details.\nTask :kotlinc:syncReleaseLibJars\nTask :kotlinc:bundleReleaseLocalLintAar\nTask :kotlinc:bundleLibResRelease\nTask :kotlinc:bundleLibRuntimeToJarRelease\nTask :kotlinc:createFullJarRelease\nTask :build-logic:bundleLibRuntimeToJarRelease\nTask :app:mergeExtDexRelease\nTask :build-logic:createFullJarRelease\nTask :build-logic:bundleLibRuntimeToDirRelease\nTask :app:lintVitalAnalyzeRelease\nTask :app:lintVitalReportRelease\nTask :app:lintVitalRelease\nTask :kotlinc:bundleLibRuntimeToDirRelease\nTask :app:dexBuilderRelease\nTask :app:mergeReleaseArtProfile\nTask :app:mergeReleaseShaders\nTask :app:compileReleaseShaders NO-SOURCE\nTask :app:generateReleaseAssets UP-TO-DATE\nTask :app:mergeReleaseAssets\nTask :app:compressReleaseAssets\nTask :app:processReleaseJavaRes NO-SOURCE\nTask :app:mergeReleaseJavaResource\nTask :app:optimizeReleaseResources\nTask :app:collectReleaseDependencies\nTask :app:sdkReleaseDependencyData\nTask :app:writeReleaseAppMetadata\nTask :app:writeReleaseSigningConfigVersions\nTask :build-logic:bundleReleaseAar\nTask :build-logic:mergeReleaseResources\nTask :build-logic:mapReleaseSourceSetPaths\nTask :build-logic:verifyReleaseResources\nTask :build-logic:assembleRelease\nTask :kotlinc:bundleReleaseAar\nTask :kotlinc:mergeReleaseResources\nTask :kotlinc:mapReleaseSourceSetPaths\nTask :kotlinc:verifyReleaseResources\nTask :kotlinc:assembleRelease\nTask :app:mergeDexRelease FAILED\nERROR:/home/runner/work/File-Explorer/File-Explorer/build-logic/build/.transforms/63709c9a363d9d7c070fd985789aef5f/transformed/release/org/w3c/dom/html/HTMLDOMImplementation.dex: D8: Type org.w3c.dom.html.HTMLDOMImplementation is defined multiple times: /home/runner/work/File-Explorer/File-Explorer/build-logic/build/.transforms/63709c9a363d9d7c070fd985789aef5f/transformed/release/org/w3c/dom/html/HTMLDOMImplementation.dex, /home/runner/work/File-Explorer/File-Explorer/app/build/intermediates/external_libs_dex/release/mergeExtDexRelease/classes7.dex\ncom.android.builder.dexing.DexArchiveMergerException: Error while merging dex archives:\nLearn how to resolve the issue at <a href=\"https://developer.android.com/studio/build/dependencies#duplicate_classes\" rel=\"nofollow noreferrer\">https://developer.android.com/studio/build/dependencies#duplicate_classes</a>.\nType org.w3c.dom.html.HTMLDOMImplementation is defined multiple times: /home/runner/work/File-Explorer/File-Explorer/build-logic/build/.transforms/63709c9a363d9d7c070fd985789aef5f/transformed/release/org/w3c/dom/html/HTMLDOMImplementation.dex, /home/runner/work/File-Explorer/File-Explorer/app/build/intermediates/external_libs_dex/release/mergeExtDexRelease/classes7.dex\nat com.android.builder.dexing.D8DexArchiveMerger.getExceptionToRethrow(D8DexArchiveMerger.java:151)\nat com.android.builder.dexing.D8DexArchiveMerger.mergeDexArchives(D8DexArchiveMerger.java:138)\nat com.android.build.gradle.internal.tasks.DexMergingWorkAction.merge(DexMergingTask.kt:859)\nat com.android.build.gradle.internal.tasks.DexMergingWorkAction.run(DexMergingTask.kt:805)\nat com.android.build.gradle.internal.profile.ProfileAwareWorkAction.execute(ProfileAwareWorkAction.kt:74)\nat org.gradle.workers.internal.DefaultWorkerServer.execute(DefaultWorkerServer.java:63)\nat org.gradle.workers.internal.NoIsolationWorkerFactory$1$1.create(NoIsolationWorkerFactory.java:66)\nat org.gradle.workers.internal.NoIsolationWorkerFactory$1$1.create(NoIsolationWorkerFactory.java:62)\nat org.gradle.internal.classloader.ClassLoaderUtils.executeInClassloader(ClassLoaderUtils.java:100)\nat org.gradle.workers.internal.NoIsolationWorkerFactory$1.lambda$execute$0(NoIsolationWorkerFactory.java:62)\nat org.gradle.workers.internal.AbstractWorker$1.call(AbstractWorker.java:44)\nat org.gradle.workers.internal.AbstractWorker$1.call(AbstractWorker.java:41)\nat org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:204)\nat org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:199)\nat org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:66)\nat org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:59)\nat org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:157)\nat org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:59)\nat org.gradle.internal.operations.DefaultBuildOperationRunner.call(DefaultBuildOperationRunner.java:53)\nat org.gradle.internal.operations.DefaultBuildOperationExecutor.call(DefaultBuildOperationExecutor.java:73)\nat org.gradle.workers.internal.AbstractWorker.executeWrappedInBuildOperation(AbstractWorker.java:41)\nat org.gradle.workers.internal.NoIsolationWorkerFactory$1.execute(NoIsolationWorkerFactory.java:59)\nat org.gradle.workers.internal.DefaultWorkerExecutor.lambda$submitWork$2(DefaultWorkerExecutor.java:205)\nat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\nat org.gradle.internal.work.DefaultConditionalExecutionQueue$ExecutionRunner.runExecution(DefaultConditionalExecutionQueue.java:187)\nat org.gradle.internal.work.DefaultConditionalExecutionQueue$ExecutionRunner.access$700(DefaultConditionalExecutionQueue.java:120)\nat org.gradle.internal.work.DefaultConditionalExecutionQueue$ExecutionRunner$1.run(DefaultConditionalExecutionQueue.java:162)\nat org.gradle.internal.Factories$1.create(Factories.java:31)\nat org.gradle.internal.work.DefaultWorkerLeaseService.withLocks(DefaultWorkerLeaseService.java:249)\nat org.gradle.internal.work.DefaultWorkerLeaseService.runAsWorkerThread(DefaultWorkerLeaseService.java:109)\nat org.gradle.internal.work.DefaultWorkerLeaseService.runAsWorkerThread(DefaultWorkerLeaseService.java:114)\nat org.gradle.internal.work.DefaultConditionalExecutionQueue$ExecutionRunner.runBatch(DefaultConditionalExecutionQueue.java:157)\nat org.gradle.internal.work.DefaultConditionalExecutionQueue$ExecutionRunner.run(DefaultConditionalExecutionQueue.java:126)\nat java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)\nat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\nat org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:64)\nat org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:48)\nat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\nat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\nat java.base/java.lang.Thread.run(Thread.java:833)\nCaused by: com.android.tools.r8.CompilationFailedException: Compilation failed to complete, origin: /home/runner/work/File-Explorer/File-Explorer/build-logic/build/.transforms/63709c9a363d9d7c070fd985789aef5f/transformed/release/org/w3c/dom/html/HTMLDOMImplementation.dex\nat Version.fakeStackEntry(Version_3.2.60.java:0)\nat com.android.tools.r8.internal.bi.a(R8_3.2.60_61a204e00a4460bee78ec2913234dc5e1a3a501d9754e757835d117b7e302ba3:68)\nat com.android.tools.r8.internal.bi.a(R8_3.2.60_61a204e00a4460bee78ec2913234dc5e1a3a501d9754e757835d117b7e302ba3:28)\nat com.android.tools.r8.internal.bi.a(R8_3.2.60_61a204e00a4460bee78ec2913234dc5e1a3a501d9754e757835d117b7e302ba3:27)\nat com.android.tools.r8.internal.bi.b(R8_3.2.60_61a204e00a4460bee78ec2913234dc5e1a3a501d9754e757835d117b7e302ba3:3)\nat com.android.tools.r8.D8.run(R8_3.2.60_61a204e00a4460bee78ec2913234dc5e1a3a501d9754e757835d117b7e302ba3:11)\nat com.android.builder.dexing.D8DexArchiveMerger.mergeDexArchives(D8DexArchiveMerger.java:136)\n... 38 more\nCaused by: com.android.tools.r8.internal.a: Type org.w3c.dom.html.HTMLDOMImplementation is defined multiple times: /home/runner/work/File-Explorer/File-Explorer/build-logic/build/.transforms/63709c9a363d9d7c070fd985789aef5f/transformed/release/org/w3c/dom/html/HTMLDOMImplementation.dex, /home/runner/work/File-Explorer/File-Explorer/app/build/intermediates/external_libs_dex/release/mergeExtDexRelease/classes7.dex\nat com.android.tools.r8.internal.uQ.a(R8_3.2.60_61a204e00a4460bee78ec2913234dc5e1a3a501d9754e757835d117b7e302ba3:14)\nat com.android.tools.r8.internal.uQ.a(R8_3.2.60_61a204e00a4460bee78ec2913234dc5e1a3a501d9754e757835d117b7e302ba3:22)\nat com.android.tools.r8.internal.yK.b(R8_3.2.60_61a204e00a4460bee78ec2913234dc5e1a3a501d9754e757835d117b7e302ba3:7)\nat com.android.tools.r8.internal.yK.a(R8_3.2.60_61a204e00a4460bee78ec2913234dc5e1a3a501d9754e757835d117b7e302ba3:23)\nat com.android.tools.r8.internal.yK.a(R8_3.2.60_61a204e00a4460bee78ec2913234dc5e1a3a501d9754e757835d117b7e302ba3:10)\nat java.base/java.util.concurrent.ConcurrentHashMap.merge(ConcurrentHashMap.java:2056)\nat com.android.tools.r8.internal.yK.a(R8_3.2.60_61a204e00a4460bee78ec2913234dc5e1a3a501d9754e757835d117b7e302ba3:6)\nat com.android.tools.r8.graph.A2$a.e(R8_3.2.60_61a204e00a4460bee78ec2913234dc5e1a3a501d9754e757835d117b7e302ba3:4)\nat com.android.tools.r8.dex.b.a(R8_3.2.60_61a204e00a4460bee78ec2913234dc5e1a3a501d9754e757835d117b7e302ba3:105)\nat com.android.tools.r8.dex.b.a(R8_3.2.60_61a204e00a4460bee78ec2913234dc5e1a3a501d9754e757835d117b7e302ba3:28)\nat com.android.tools.r8.D8.a(R8_3.2.60_61a204e00a4460bee78ec2913234dc5e1a3a501d9754e757835d117b7e302ba3:26)\nat com.android.tools.r8.D8.d(R8_3.2.60_61a204e00a4460bee78ec2913234dc5e1a3a501d9754e757835d117b7e302ba3:593)\nat com.android.tools.r8.D8.b(R8_3.2.60_61a204e00a4460bee78ec2913234dc5e1a3a501d9754e757835d117b7e302ba3:1)\nat com.android.tools.r8.internal.bi.a(R8_3.2.60_61a204e00a4460bee78ec2913234dc5e1a3a501d9754e757835d117b7e302ba3:24)\n... 41 more\nFAILURE: Build failed with an exception.</p>\n</blockquote>\n<ul>\n<li>What went wrong:\nExecution failed for task ':app:mergeDexRelease'.</li>\n</ul>\n<blockquote>\n<p>A failure occurred while executing com.android.build.gradle.internal.tasks.DexMergingTaskDelegate\nThere was a failure while executing work items\n&gt; A failure occurred while executing com.android.build.gradle.internal.tasks.DexMergingWorkAction\n&gt; com.android.builder.dexing.DexArchiveMergerException: Error while merging dex archives:\nLearn how to resolve the issue at <a href=\"https://developer.android.com/studio/build/dependencies#duplicate_classes\" rel=\"nofollow noreferrer\">https://developer.android.com/studio/build/dependencies#duplicate_classes</a>.\nType org.w3c.dom.html.HTMLDOMImplementation is defined multiple times: /home/runner/work/File-Explorer/File-Explorer/build-logic/build/.transforms/63709c9a363d9d7c070fd985789aef5f/transformed/release/org/w3c/dom/html/HTMLDOMImplementation.dex, /home/runner/work/File-Explorer/File-Explorer/app/build/intermediates/external_libs_dex/release/mergeExtDexRelease/classes7.dex</p>\n</blockquote>\n<ul>\n<li>Try:</li>\n</ul>\n<blockquote>\n<p>Run with --stacktrace option to get the stack trace.\nRun with --info or --debug option to get more log output.\nRun with --scan to get full insights.</p>\n</blockquote>\n<ul>\n<li>Get more help at <a href=\"https://help.gradle.org\" rel=\"nofollow noreferrer\">https://help.gradle.org</a>\nBUILD FAILED in 4m 13s\nDeprecated Gradle features were used in this build, making it incompatible with Gradle 8.0.\nYou can use '--warning-mode all' to show the individual deprecation warnings and determine if they come from your own scripts or plugins.\nSee <a href=\"https://docs.gradle.org/7.5/userguide/command_line_interface.html#sec:command_line_warnings\" rel=\"nofollow noreferrer\">https://docs.gradle.org/7.5/userguide/command_line_interface.html#sec:command_line_warnings</a>\n105 actionable tasks: 105 executed\nError: Gradle build failed: see console output for details\n0s\n1s\n0s\n0s\n0s</li>\n</ul>\n"},{"tags":["java","eclipse"],"comments":[{"owner":{"account_id":195331,"reputation":275408,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"score":1,"creation_date":1394065481,"post_id":22212365,"comment_id":33724159,"body_markdown":"Might be easier to write a script to do this. Just recur over your source directory.","body":"Might be easier to write a script to do this. Just recur over your source directory."},{"owner":{"account_id":948306,"reputation":2363,"user_id":975066,"display_name":"Justin Jasmann"},"score":0,"creation_date":1394065667,"post_id":22212365,"comment_id":33724227,"body_markdown":"I don&#39;t believe it&#39;s possible to rename multiple source files at once in Eclipse. +1 to a script.","body":"I don&#39;t believe it&#39;s possible to rename multiple source files at once in Eclipse. +1 to a script."}],"answers":[{"tags":[],"owner":{"account_id":3421530,"reputation":3695,"user_id":2868955,"accept_rate":85,"display_name":"Evdzhan Mustafa"},"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1394065636,"creation_date":1394065636,"answer_id":22212402,"question_id":22212365,"body_markdown":"Right click on file name -&gt; Refactor -&gt; Rename  -&gt; Use the new name then press enter. Confirm any prompts. This will change any references. But I am afraid there is no way to do that for multiple files.","title":"Rename multiple files in eclipse","body":"<p>Right click on file name -> Refactor -> Rename  -> Use the new name then press enter. Confirm any prompts. This will change any references. But I am afraid there is no way to do that for multiple files.</p>\n"},{"tags":[],"owner":{"account_id":4416291,"reputation":375,"user_id":3597809,"accept_rate":50,"display_name":"patricmj"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1483950303,"creation_date":1483950303,"answer_id":41543772,"question_id":22212365,"body_markdown":"This might help some other people crashing in here. If you wanna replace multiple file names use powershell:\r\n\r\n    Get-ChildItem -Filter “*currentfilename*” -Recurse | Rename-Item -NewName {$_.name -replace ‘currentfilename’,’newfilename’ }","title":"Rename multiple files in eclipse","body":"<p>This might help some other people crashing in here. If you wanna replace multiple file names use powershell:</p>\n\n<pre><code>Get-ChildItem -Filter “*currentfilename*” -Recurse | Rename-Item -NewName {$_.name -replace ‘currentfilename’,’newfilename’ }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8625831,"reputation":720,"user_id":6459098,"display_name":"U_R_Naveen UR_Naveen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658402808,"creation_date":1658402808,"answer_id":73065338,"question_id":22212365,"body_markdown":"I can tell you in windows explorer, Select your first folder from the list, hit F2, paste or append to the file name, then hit tab, paste or append to the second file name, hit tab and repeat....","title":"Rename multiple files in eclipse","body":"<p>I can tell you in windows explorer, Select your first folder from the list, hit F2, paste or append to the file name, then hit tab, paste or append to the second file name, hit tab and repeat....</p>\n"}],"owner":{"account_id":1088393,"reputation":1269,"user_id":1083581,"accept_rate":21,"display_name":"happybuddha"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5919,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":3,"score":4,"last_activity_date":1658402808,"creation_date":1394065432,"question_id":22212365,"body_markdown":"How can I rename multiple files in eclipse and update their references as well ? \r\n\r\nFor ex. I got these classes in many packages in my project : \r\n\r\n    com.a.b.c.Fooclass1\r\n    com.a.b.c.Fooclass2 \r\n    com.a.b.c.Fooclass3\r\n    com.a.b.c.BarFooclass1\r\n    com.a.b.c.Dontworryclass\r\n\r\nI want to replace `Foo` with `BAR`.&lt;br/&gt;\r\nHow can I replace `Foo` with `BAR` in the class names of all those classes in my project, which have `Foo` in their name. \r\n\r\n**Edit** : I *really know* how to use refactor in eclipse for a single file ! I wanted to know a solution for multiple files. \r\n","title":"Rename multiple files in eclipse","body":"<p>How can I rename multiple files in eclipse and update their references as well ? </p>\n\n<p>For ex. I got these classes in many packages in my project : </p>\n\n<pre><code>com.a.b.c.Fooclass1\ncom.a.b.c.Fooclass2 \ncom.a.b.c.Fooclass3\ncom.a.b.c.BarFooclass1\ncom.a.b.c.Dontworryclass\n</code></pre>\n\n<p>I want to replace <code>Foo</code> with <code>BAR</code>.<br/>\nHow can I replace <code>Foo</code> with <code>BAR</code> in the class names of all those classes in my project, which have <code>Foo</code> in their name. </p>\n\n<p><strong>Edit</strong> : I <em>really know</em> how to use refactor in eclipse for a single file ! I wanted to know a solution for multiple files. </p>\n"},{"tags":["java","javafx","java-module","fontmetrics"],"comments":[{"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"score":0,"creation_date":1658406029,"post_id":73065265,"comment_id":129046667,"body_markdown":"Is your application intended to be a [tag:java-module] having a [tag:module-info] file?","body":"Is your application intended to be a <a href=\"https://stackoverflow.com/questions/tagged/java-module\">java-module</a> having a <a href=\"https://stackoverflow.com/questions/tagged/module-info\">module-info</a> file?"},{"owner":{"account_id":1044029,"reputation":1363,"user_id":1049393,"accept_rate":67,"display_name":"coderodde"},"score":0,"creation_date":1658406372,"post_id":73065265,"comment_id":129046812,"body_markdown":"No, I managed to run another JavaFX app without FontMetrics and module-info.java. Here, I would prefer to avoid making my app a module.","body":"No, I managed to run another JavaFX app without FontMetrics and module-info.java. Here, I would prefer to avoid making my app a module."},{"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"score":0,"creation_date":1658407345,"post_id":73065265,"comment_id":129047248,"body_markdown":"Can you simply remove `module-info.java`?","body":"Can you simply remove <code>module-info.java</code>?"},{"owner":{"account_id":1044029,"reputation":1363,"user_id":1049393,"accept_rate":67,"display_name":"coderodde"},"score":0,"creation_date":1658408730,"post_id":73065265,"comment_id":129047898,"body_markdown":"@trashgod No `module-info.java` to begin with.","body":"@trashgod No <code>module-info.java</code> to begin with."},{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":1,"creation_date":1658425292,"post_id":73065265,"comment_id":129054441,"body_markdown":"I was wondering what FontMetrics was.  I found [another question which refers to it](https://stackoverflow.com/a/32238954/1155209).   It would appear to be com.sun api which, generally, should not be used by app code.  There are probably command line override switches you can add to your app to allow it to violate encapsulation to access com.sun classes.  I do not know what those are and would not post such info here in any case.","body":"I was wondering what FontMetrics was.  I found <a href=\"https://stackoverflow.com/a/32238954/1155209\">another question which refers to it</a>.   It would appear to be com.sun api which, generally, should not be used by app code.  There are probably command line override switches you can add to your app to allow it to violate encapsulation to access com.sun classes.  I do not know what those are and would not post such info here in any case."},{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":2,"creation_date":1658426773,"post_id":73065265,"comment_id":129054933,"body_markdown":"This is relatively basic module stuff. Modules were added in Java 9, and JavaFX was modularized at the same time. If you don&#39;t know what modules are, see [Understanding Java 9 Modules](https://www.oracle.com/corporate/features/understanding-java-9-modules.html). Basically, you&#39;re trying to access private API (i.e., a class in a package that is not exported to your code). JavaFX does not want you to use such classes. But if you are okay with relying on private API (which you should avoid), then you need to add an `--add-exports javafx.graphics/com.sun.javafx.tk=ALL-UNNAMED` VM argument.","body":"This is relatively basic module stuff. Modules were added in Java 9, and JavaFX was modularized at the same time. If you don&#39;t know what modules are, see <a href=\"https://www.oracle.com/corporate/features/understanding-java-9-modules.html\" rel=\"nofollow noreferrer\">Understanding Java 9 Modules</a>. Basically, you&#39;re trying to access private API (i.e., a class in a package that is not exported to your code). JavaFX does not want you to use such classes. But if you are okay with relying on private API (which you should avoid), then you need to add an <code>--add-exports javafx.graphics&#47;com.sun.javafx.tk=ALL-UNNAMED</code> VM argument."},{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":2,"creation_date":1658426897,"post_id":73065265,"comment_id":129054972,"body_markdown":"That will fix the specific error in your question. If you come across similar errors, just read the error message and add another `--add-exports` argument as needed. The format of the argument is `--add-exports &lt;source-module&gt;/&lt;source-package&gt;=&lt;target-module&gt;`. The `ALL-UNNAMED` value for `&lt;target-module&gt;` means to export the package to code in the unnamed module, which is where all code on the class-path ends up (as opposed to the module-path). There&#39;s one unnamed module per `ClassLoader`, though that&#39;s not really important here.","body":"That will fix the specific error in your question. If you come across similar errors, just read the error message and add another <code>--add-exports</code> argument as needed. The format of the argument is <code>--add-exports &lt;source-module&gt;&#47;&lt;source-package&gt;=&lt;target-module&gt;</code>. The <code>ALL-UNNAMED</code> value for <code>&lt;target-module&gt;</code> means to export the package to code in the unnamed module, which is where all code on the class-path ends up (as opposed to the module-path). There&#39;s one unnamed module per <code>ClassLoader</code>, though that&#39;s not really important here."},{"owner":{"account_id":1044029,"reputation":1363,"user_id":1049393,"accept_rate":67,"display_name":"coderodde"},"score":0,"creation_date":1658479916,"post_id":73065265,"comment_id":129066389,"body_markdown":"@Slaw Your 2nd last comment solves it! Thank you so much!","body":"@Slaw Your 2nd last comment solves it! Thank you so much!"}],"owner":{"account_id":1044029,"reputation":1363,"user_id":1049393,"accept_rate":67,"display_name":"coderodde"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":555,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1658402393,"creation_date":1658402393,"question_id":73065265,"body_markdown":"I run my JavaFX app with VM options:\r\n\r\n    --module-path &quot;C:\\Software\\javafx-sdk-18.0.1\\lib&quot; --add-modules javafx.base,javafx.controls,javafx.fxml,javafx.graphics\r\n\r\nyet when I try to run the app, I get:\r\n\r\n    Caused by: java.lang.IllegalAccessError: class MyWindow (in unnamed module @0xb083ee4) cannot access class com.sun.javafx.tk.Toolkit (in module javafx.graphics) because module javafx.graphics does not export com.sun.javafx.tk to unnamed module @0xb083ee4\r\n\r\n(As a small note, I rely on `FontMetrics`, if this makes difference.)\r\n\r\nI am wondering what&#39;s going on and how to fix it?","title":"MyClass cannot access class com.sun.javafx.tk.Toolkit because module javafx.graphics does not export com.sun.javafx.tk to unnamed module","body":"<p>I run my JavaFX app with VM options:</p>\n<pre><code>--module-path &quot;C:\\Software\\javafx-sdk-18.0.1\\lib&quot; --add-modules javafx.base,javafx.controls,javafx.fxml,javafx.graphics\n</code></pre>\n<p>yet when I try to run the app, I get:</p>\n<pre><code>Caused by: java.lang.IllegalAccessError: class MyWindow (in unnamed module @0xb083ee4) cannot access class com.sun.javafx.tk.Toolkit (in module javafx.graphics) because module javafx.graphics does not export com.sun.javafx.tk to unnamed module @0xb083ee4\n</code></pre>\n<p>(As a small note, I rely on <code>FontMetrics</code>, if this makes difference.)</p>\n<p>I am wondering what's going on and how to fix it?</p>\n"},{"tags":["java","javafx","javafx-8"],"comments":[{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":2,"creation_date":1658306849,"post_id":73048234,"comment_id":129016390,"body_markdown":"[mcve] please..","body":"<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> please.."},{"owner":{"account_id":25851431,"reputation":51,"user_id":19585355,"display_name":"Kipoti"},"score":0,"creation_date":1658308123,"post_id":73048234,"comment_id":129016885,"body_markdown":"I added my code, can you help me?","body":"I added my code, can you help me?"},{"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"score":2,"creation_date":1658309339,"post_id":73048234,"comment_id":129017340,"body_markdown":"Should you not simply combine normal alignment with _padding_?","body":"Should you not simply combine normal alignment with <i>padding</i>?"},{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":3,"creation_date":1658311000,"post_id":73048234,"comment_id":129018014,"body_markdown":"okay, did a quick test: @JoopEggen is spot on, play with combinations of  alignement and padding rules, f.i. `setStyle(&quot;-fx-alignment: CENTER-RIGHT; -fx-padding: 0 10 0 0;&quot;)`","body":"okay, did a quick test: @JoopEggen is spot on, play with combinations of  alignement and padding rules, f.i. <code>setStyle(&quot;-fx-alignment: CENTER-RIGHT; -fx-padding: 0 10 0 0;&quot;)</code>"},{"owner":{"account_id":25851431,"reputation":51,"user_id":19585355,"display_name":"Kipoti"},"score":3,"creation_date":1658313000,"post_id":73048234,"comment_id":129018815,"body_markdown":"thanks, kleopatra, this is good idea, my problem is resolved!","body":"thanks, kleopatra, this is good idea, my problem is resolved!"},{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":2,"creation_date":1658322445,"post_id":73048234,"comment_id":129022628,"body_markdown":"you might consider posting a self-answer for future readers with the same problem :)","body":"you might consider posting a self-answer for future readers with the same problem :)"}],"answers":[{"tags":[],"owner":{"account_id":25851431,"reputation":51,"user_id":19585355,"display_name":"Kipoti"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658401183,"creation_date":1658401183,"answer_id":73065007,"question_id":73048234,"body_markdown":"If you have a similar problem, where you need to be able to control the alignment in a column from the desired table, then this solution can help you:\r\n\r\n ``` \r\n/**\r\n* Get scrollBar from current tableView or treeTableView\r\n*/\r\nSet&lt;Node&gt; scrollBars = treeTableViewFileName.lookupAll(&quot;.scroll-bar&quot;);\r\nOptional&lt;Node&gt; verticalScrollBar = scrollBars.stream()\r\n    .filter(node -&gt;((ScrollBar) node).getOrientation().equals(Orientation.VERTICAL))\r\n    .findAny();\r\n\r\nverticalScrollBar.ifPresent(node -&gt; \r\n  node.visibleProperty().addListener((observable, oldValue, newValue) -&gt; {\r\n    if(newValue) { //If scrollBar is visible?\r\n        //column FileSize\r\n        ((TreeTableColumn) ThreadTreeTableViewFileName.treeTableViewFileName.getColumns().get(1)).setStyle(&quot;-fx-alignment: CENTER-RIGHT; -fx-padding: 0 90 0 0;&quot;);\r\n    } else { //Else scrollBar is hide\r\n        //column FileSize\r\n    ((TreeTableColumn) ThreadTreeTableViewFileName.treeTableViewFileName.getColumns().get(1)).setStyle(&quot;-fx-alignment: CENTER-RIGHT; -fx-padding: 0 5 0 0;&quot;);\r\n    }\r\n  })\r\n);\r\n\r\n``` \r\n\r\nIf you need to change the style of a column when a vertical scroll bar appears in this table, then this may be one of the solutions to the problem.\r\n\r\n\r\n","title":"javafx - Can I set custom alignment in a column?","body":"<p>If you have a similar problem, where you need to be able to control the alignment in a column from the desired table, then this solution can help you:</p>\n<pre><code>/**\n* Get scrollBar from current tableView or treeTableView\n*/\nSet&lt;Node&gt; scrollBars = treeTableViewFileName.lookupAll(&quot;.scroll-bar&quot;);\nOptional&lt;Node&gt; verticalScrollBar = scrollBars.stream()\n   .filter(node -&gt;((ScrollBar) node).getOrientation().equals(Orientation.VERTICAL))\n   .findAny();\n\nverticalScrollBar.ifPresent(node -&gt; \n node.visibleProperty().addListener((observable, oldValue, newValue) -&gt; {\n   if(newValue) { //If scrollBar is visible?\n       //column FileSize\n       ((TreeTableColumn) ThreadTreeTableViewFileName.treeTableViewFileName.getColumns().get(1)).setStyle(&quot;-fx-alignment: CENTER-RIGHT; -fx-padding: 0 90 0 0;&quot;);\n   } else { //Else scrollBar is hide\n       //column FileSize\n   ((TreeTableColumn) ThreadTreeTableViewFileName.treeTableViewFileName.getColumns().get(1)).setStyle(&quot;-fx-alignment: CENTER-RIGHT; -fx-padding: 0 5 0 0;&quot;);\n   }\n })\n);\n\n</code></pre>\n<p>If you need to change the style of a column when a vertical scroll bar appears in this table, then this may be one of the solutions to the problem.</p>\n"}],"owner":{"account_id":25851431,"reputation":51,"user_id":19585355,"display_name":"Kipoti"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":142,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1658401183,"creation_date":1658305463,"question_id":73048234,"body_markdown":"I need to make custom alignment in my TreeTableView column.\r\n\r\nI test css style:\r\n\r\n``` \r\n-fx-alignment: CENTER-RIGHT;\r\n``` \r\n\r\nand my column has alignment:\r\n\r\n[start picture][1]\r\n\r\nBut I need to be able to choose the alignment myself, for example by setting it so that in the end the text is not in the middle or right or left, but has an indent on the right, similar to this:\r\n\r\n[1) picture1 - before changes][2]\r\n\r\n[2) picture2 - after changes][3]\r\n\r\n  [1]: https://i.stack.imgur.com/BHvoN.png\r\n  [2]: https://i.stack.imgur.com/lff3E.png\r\n  [3]: https://i.stack.imgur.com/kpoqb.png\r\n\r\nI know there are many different types of alignment, I have tested these: \r\n\r\n```\r\n-fx-text-alignment: [ top-left | top-center | top-right | center-left | center | center-right bottom-left | bottom-center | bottom-right | baseline-left | baseline-center | baseline-right ]\r\n```\r\n\r\n----------\r\n\r\nBut I never found something similar to dynamic alignment change, tell me please, is it possible to adjust the alignment in such a way that you can, for example, indent 1, 2 or 4 characters on the right or do something similar?\r\n\r\n\r\nmy test:\r\n\r\n```\r\npublic void test_initTestTableView() {\r\n        \r\n    TableView&lt;RecordFileName&gt; testTableView = controller.getTestTableView();\r\n    testTableView.setPlaceholder(new Label(&quot; &quot;));\r\n    TableColumn&lt;RecordFileName, String&gt; column1 = (TableColumn) testTableView.getColumns().get(0);\r\n    column1.setCellValueFactory(new PropertyValueFactory&lt;&gt;(&quot;fileName&quot;));\r\n    \r\n    TableColumn&lt;RecordFileName, String&gt; column2 = (TableColumn) testTableView.getColumns().get(1);\r\n    column2.setCellValueFactory(new PropertyValueFactory&lt;&gt;(&quot;fileSize&quot;));\r\n        \r\n    column2.setStyle(&quot;-fx-alignment: CENTER-RIGHT;&quot;);\r\n    ObservableList&lt;RecordFileName&gt; list_rows = testTableView.getItems();\r\n    list_rows.add(new RecordFileName(&quot;name1&quot;, &quot;1&quot;));\r\n    list_rows.add(new RecordFileName(&quot;name2&quot;, &quot;2&quot;));\r\n    list_rows.add(new RecordFileName(&quot;name3&quot;, &quot;3&quot;));\r\n    list_rows.add(new RecordFileName(&quot;name4&quot;, &quot;4&quot;));\r\n}\r\n\r\n\r\n```\r\n\r\nRecordFileName.java: \r\n\r\n```\r\nimport javafx.beans.property.ObjectProperty;\r\nimport javafx.beans.property.SimpleObjectProperty;\r\n\r\npublic class RecordFileName {\r\n    \r\n    private final ObjectProperty&lt;String&gt; fileName;\r\n    \r\n    private final ObjectProperty&lt;String&gt; fileSize;\r\n    \r\n    public RecordFileName (String name, String size) {\r\n        this.fileName = new SimpleObjectProperty&lt;&gt;(this, &quot;fileName&quot;);\r\n        this.fileName.set(name);\r\n        \r\n        this.fileSize = new SimpleObjectProperty&lt;&gt;(this, &quot;fileSize&quot;);\r\n        this.fileSize.set(size); //Добавить отступ справа от значения\r\n    }\r\n    \r\n    public final ObjectProperty&lt;String&gt; fileNameProperty() {\r\n        return this.fileName;\r\n    }\r\n    \r\n    public final ObjectProperty&lt;String&gt; fileSizeProperty() {\r\n        return this.fileSize;\r\n    }\r\n}\r\n\r\n```\r\n\r\nmain.fxml\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n\r\n&lt;!--\r\n  Copyright (c) 2015, 2019, Gluon and/or its affiliates.\r\n  All rights reserved. Use is subject to license terms.\r\n\r\n  This file is available and licensed under the following license:\r\n\r\n  Redistribution and use in source and binary forms, with or without\r\n  modification, are permitted provided that the following conditions\r\n  are met:\r\n\r\n  - Redistributions of source code must retain the above copyright\r\n    notice, this list of conditions and the following disclaimer.\r\n  - Redistributions in binary form must reproduce the above copyright\r\n    notice, this list of conditions and the following disclaimer in\r\n    the documentation and/or other materials provided with the distribution.\r\n  - Neither the name of Oracle Corporation nor the names of its\r\n    contributors may be used to endorse or promote products derived\r\n    from this software without specific prior written permission.\r\n\r\n  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\r\n  &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\r\n  LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\r\n  A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\r\n  OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\r\n  SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\r\n  LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\r\n  DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\r\n  THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n  (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\r\n  OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n--&gt;\r\n\r\n&lt;?import javafx.scene.control.Menu?&gt;\r\n&lt;?import javafx.scene.control.MenuBar?&gt;\r\n&lt;?import javafx.scene.control.MenuItem?&gt;\r\n&lt;?import javafx.scene.control.SeparatorMenuItem?&gt;\r\n&lt;?import javafx.scene.control.TableColumn?&gt;\r\n&lt;?import javafx.scene.control.TableView?&gt;\r\n&lt;?import javafx.scene.layout.Pane?&gt;\r\n&lt;?import javafx.scene.layout.VBox?&gt;\r\n\r\n&lt;VBox fx:id=&quot;vbox&quot; prefHeight=&quot;277.0&quot; prefWidth=&quot;1025.0&quot; xmlns=&quot;http://javafx.com/javafx/17&quot; xmlns:fx=&quot;http://javafx.com/fxml/1&quot; fx:controller=&quot;com.mycompany.stackexp.GUI.Controller_MainGUI&quot;&gt;\r\n    &lt;children&gt;\r\n        &lt;MenuBar VBox.vgrow=&quot;NEVER&quot;&gt;\r\n            &lt;menus&gt;\r\n                &lt;Menu mnemonicParsing=&quot;false&quot; text=&quot;File&quot;&gt;\r\n                    &lt;items&gt;\r\n                        &lt;MenuItem fx:id=&quot;menuItemStart&quot; mnemonicParsing=&quot;false&quot; onAction=&quot;#onMenuItemClick_StartStop&quot; text=&quot;Stop&quot; /&gt;\r\n                        &lt;MenuItem fx:id=&quot;menuItemClear&quot; mnemonicParsing=&quot;false&quot; onAction=&quot;#onMenuItemClick_Clear&quot; text=&quot;Clear&quot; /&gt;\r\n                        &lt;SeparatorMenuItem mnemonicParsing=&quot;false&quot; /&gt;\r\n                        &lt;MenuItem fx:id=&quot;menuItemExit&quot; mnemonicParsing=&quot;false&quot; onAction=&quot;#onMenuItemClick_Exit&quot; text=&quot;Exit&quot; /&gt;\r\n                    &lt;/items&gt;\r\n                &lt;/Menu&gt;\r\n                &lt;Menu mnemonicParsing=&quot;false&quot; text=&quot;Settings&quot;&gt;\r\n                    &lt;items&gt;\r\n                        &lt;MenuItem mnemonicParsing=&quot;false&quot; onAction=&quot;#onMenuItemClick_Configuration&quot; text=&quot;Configuration&quot; /&gt;\r\n                    &lt;/items&gt;\r\n                &lt;/Menu&gt;\r\n            &lt;/menus&gt;\r\n        &lt;/MenuBar&gt;\r\n      &lt;Pane prefHeight=&quot;239.0&quot; prefWidth=&quot;1025.0&quot;&gt;\r\n         &lt;children&gt;\r\n            &lt;TableView fx:id=&quot;testTableView&quot; layoutX=&quot;44.0&quot; layoutY=&quot;8.0&quot; prefHeight=&quot;212.0&quot; prefWidth=&quot;281.0&quot;&gt;\r\n              &lt;columns&gt;\r\n                &lt;TableColumn fx:id=&quot;testColumn1&quot; prefWidth=&quot;135.0&quot; text=&quot;test_FileName&quot; /&gt;\r\n                &lt;TableColumn fx:id=&quot;testColumn2&quot; prefWidth=&quot;127.0&quot; text=&quot;test_FileSize&quot; /&gt;\r\n              &lt;/columns&gt;\r\n            &lt;/TableView&gt;\r\n         &lt;/children&gt;\r\n      &lt;/Pane&gt;\r\n    &lt;/children&gt;\r\n&lt;/VBox&gt;\r\n\r\n```\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"javafx - Can I set custom alignment in a column?","body":"<p>I need to make custom alignment in my TreeTableView column.</p>\n<p>I test css style:</p>\n<pre><code>-fx-alignment: CENTER-RIGHT;\n</code></pre>\n<p>and my column has alignment:</p>\n<p><a href=\"https://i.stack.imgur.com/BHvoN.png\" rel=\"nofollow noreferrer\">start picture</a></p>\n<p>But I need to be able to choose the alignment myself, for example by setting it so that in the end the text is not in the middle or right or left, but has an indent on the right, similar to this:</p>\n<p><a href=\"https://i.stack.imgur.com/lff3E.png\" rel=\"nofollow noreferrer\">1) picture1 - before changes</a></p>\n<p><a href=\"https://i.stack.imgur.com/kpoqb.png\" rel=\"nofollow noreferrer\">2) picture2 - after changes</a></p>\n<p>I know there are many different types of alignment, I have tested these:</p>\n<pre><code>-fx-text-alignment: [ top-left | top-center | top-right | center-left | center | center-right bottom-left | bottom-center | bottom-right | baseline-left | baseline-center | baseline-right ]\n</code></pre>\n<hr />\n<p>But I never found something similar to dynamic alignment change, tell me please, is it possible to adjust the alignment in such a way that you can, for example, indent 1, 2 or 4 characters on the right or do something similar?</p>\n<p>my test:</p>\n<pre><code>public void test_initTestTableView() {\n        \n    TableView&lt;RecordFileName&gt; testTableView = controller.getTestTableView();\n    testTableView.setPlaceholder(new Label(&quot; &quot;));\n    TableColumn&lt;RecordFileName, String&gt; column1 = (TableColumn) testTableView.getColumns().get(0);\n    column1.setCellValueFactory(new PropertyValueFactory&lt;&gt;(&quot;fileName&quot;));\n    \n    TableColumn&lt;RecordFileName, String&gt; column2 = (TableColumn) testTableView.getColumns().get(1);\n    column2.setCellValueFactory(new PropertyValueFactory&lt;&gt;(&quot;fileSize&quot;));\n        \n    column2.setStyle(&quot;-fx-alignment: CENTER-RIGHT;&quot;);\n    ObservableList&lt;RecordFileName&gt; list_rows = testTableView.getItems();\n    list_rows.add(new RecordFileName(&quot;name1&quot;, &quot;1&quot;));\n    list_rows.add(new RecordFileName(&quot;name2&quot;, &quot;2&quot;));\n    list_rows.add(new RecordFileName(&quot;name3&quot;, &quot;3&quot;));\n    list_rows.add(new RecordFileName(&quot;name4&quot;, &quot;4&quot;));\n}\n\n\n</code></pre>\n<p>RecordFileName.java:</p>\n<pre><code>import javafx.beans.property.ObjectProperty;\nimport javafx.beans.property.SimpleObjectProperty;\n\npublic class RecordFileName {\n    \n    private final ObjectProperty&lt;String&gt; fileName;\n    \n    private final ObjectProperty&lt;String&gt; fileSize;\n    \n    public RecordFileName (String name, String size) {\n        this.fileName = new SimpleObjectProperty&lt;&gt;(this, &quot;fileName&quot;);\n        this.fileName.set(name);\n        \n        this.fileSize = new SimpleObjectProperty&lt;&gt;(this, &quot;fileSize&quot;);\n        this.fileSize.set(size); //Добавить отступ справа от значения\n    }\n    \n    public final ObjectProperty&lt;String&gt; fileNameProperty() {\n        return this.fileName;\n    }\n    \n    public final ObjectProperty&lt;String&gt; fileSizeProperty() {\n        return this.fileSize;\n    }\n}\n\n</code></pre>\n<p>main.fxml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n\n&lt;!--\n  Copyright (c) 2015, 2019, Gluon and/or its affiliates.\n  All rights reserved. Use is subject to license terms.\n\n  This file is available and licensed under the following license:\n\n  Redistribution and use in source and binary forms, with or without\n  modification, are permitted provided that the following conditions\n  are met:\n\n  - Redistributions of source code must retain the above copyright\n    notice, this list of conditions and the following disclaimer.\n  - Redistributions in binary form must reproduce the above copyright\n    notice, this list of conditions and the following disclaimer in\n    the documentation and/or other materials provided with the distribution.\n  - Neither the name of Oracle Corporation nor the names of its\n    contributors may be used to endorse or promote products derived\n    from this software without specific prior written permission.\n\n  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n  &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n  LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n  A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n  OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n  SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n  LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n  DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n  THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n  (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n  OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n--&gt;\n\n&lt;?import javafx.scene.control.Menu?&gt;\n&lt;?import javafx.scene.control.MenuBar?&gt;\n&lt;?import javafx.scene.control.MenuItem?&gt;\n&lt;?import javafx.scene.control.SeparatorMenuItem?&gt;\n&lt;?import javafx.scene.control.TableColumn?&gt;\n&lt;?import javafx.scene.control.TableView?&gt;\n&lt;?import javafx.scene.layout.Pane?&gt;\n&lt;?import javafx.scene.layout.VBox?&gt;\n\n&lt;VBox fx:id=&quot;vbox&quot; prefHeight=&quot;277.0&quot; prefWidth=&quot;1025.0&quot; xmlns=&quot;http://javafx.com/javafx/17&quot; xmlns:fx=&quot;http://javafx.com/fxml/1&quot; fx:controller=&quot;com.mycompany.stackexp.GUI.Controller_MainGUI&quot;&gt;\n    &lt;children&gt;\n        &lt;MenuBar VBox.vgrow=&quot;NEVER&quot;&gt;\n            &lt;menus&gt;\n                &lt;Menu mnemonicParsing=&quot;false&quot; text=&quot;File&quot;&gt;\n                    &lt;items&gt;\n                        &lt;MenuItem fx:id=&quot;menuItemStart&quot; mnemonicParsing=&quot;false&quot; onAction=&quot;#onMenuItemClick_StartStop&quot; text=&quot;Stop&quot; /&gt;\n                        &lt;MenuItem fx:id=&quot;menuItemClear&quot; mnemonicParsing=&quot;false&quot; onAction=&quot;#onMenuItemClick_Clear&quot; text=&quot;Clear&quot; /&gt;\n                        &lt;SeparatorMenuItem mnemonicParsing=&quot;false&quot; /&gt;\n                        &lt;MenuItem fx:id=&quot;menuItemExit&quot; mnemonicParsing=&quot;false&quot; onAction=&quot;#onMenuItemClick_Exit&quot; text=&quot;Exit&quot; /&gt;\n                    &lt;/items&gt;\n                &lt;/Menu&gt;\n                &lt;Menu mnemonicParsing=&quot;false&quot; text=&quot;Settings&quot;&gt;\n                    &lt;items&gt;\n                        &lt;MenuItem mnemonicParsing=&quot;false&quot; onAction=&quot;#onMenuItemClick_Configuration&quot; text=&quot;Configuration&quot; /&gt;\n                    &lt;/items&gt;\n                &lt;/Menu&gt;\n            &lt;/menus&gt;\n        &lt;/MenuBar&gt;\n      &lt;Pane prefHeight=&quot;239.0&quot; prefWidth=&quot;1025.0&quot;&gt;\n         &lt;children&gt;\n            &lt;TableView fx:id=&quot;testTableView&quot; layoutX=&quot;44.0&quot; layoutY=&quot;8.0&quot; prefHeight=&quot;212.0&quot; prefWidth=&quot;281.0&quot;&gt;\n              &lt;columns&gt;\n                &lt;TableColumn fx:id=&quot;testColumn1&quot; prefWidth=&quot;135.0&quot; text=&quot;test_FileName&quot; /&gt;\n                &lt;TableColumn fx:id=&quot;testColumn2&quot; prefWidth=&quot;127.0&quot; text=&quot;test_FileSize&quot; /&gt;\n              &lt;/columns&gt;\n            &lt;/TableView&gt;\n         &lt;/children&gt;\n      &lt;/Pane&gt;\n    &lt;/children&gt;\n&lt;/VBox&gt;\n\n</code></pre>\n"},{"tags":["java","php","continuous-integration","sonarqube"],"comments":[{"owner":{"account_id":12695732,"reputation":3368,"user_id":9224219,"display_name":"Datz"},"score":0,"creation_date":1658398716,"post_id":69914147,"comment_id":129043972,"body_markdown":"Same for Java. Java 16 and Java 17 is not supported by the latest LTS release and I would love to import the &quot;Sonar way&quot; Java quality profile!","body":"Same for Java. Java 16 and Java 17 is not supported by the latest LTS release and I would love to import the &quot;Sonar way&quot; Java quality profile!"}],"owner":{"account_id":11659634,"reputation":11,"user_id":8538376,"display_name":"Vincenzo S."},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":279,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1658401135,"creation_date":1636550965,"question_id":69914147,"body_markdown":"In sonarqube the quality profiles available in PHP are only the followings: \r\n - Drupal\r\n - PSR-2\r\n - Sonar Way\r\n\r\nAs explained here [PSR-2][1] and here [PSR-12][2], PSR-2 is deprecated.\r\nSo why sonarqube still use this profile instead of the new one? \r\nIs there a way to download and import the new PSR-12 ?\r\nI tried googling about quality profiles, but I found only documentation on building new profiles from scratch.\r\n\r\n(My projects are mostly built on Laravel, so if there are some quality profiles specific to this framework, could add more control on top of PSR-12)\r\n\r\n\r\n\r\n  [1]: https://www.php-fig.org/psr/psr-2/\r\n  [2]: https://www.php-fig.org/psr/psr-12/\r\n","title":"Where can I &quot;update&quot; the quality profiles of PHP in sonarqube?","body":"<p>In sonarqube the quality profiles available in PHP are only the followings:</p>\n<ul>\n<li>Drupal</li>\n<li>PSR-2</li>\n<li>Sonar Way</li>\n</ul>\n<p>As explained here <a href=\"https://www.php-fig.org/psr/psr-2/\" rel=\"nofollow noreferrer\">PSR-2</a> and here <a href=\"https://www.php-fig.org/psr/psr-12/\" rel=\"nofollow noreferrer\">PSR-12</a>, PSR-2 is deprecated.\nSo why sonarqube still use this profile instead of the new one?\nIs there a way to download and import the new PSR-12 ?\nI tried googling about quality profiles, but I found only documentation on building new profiles from scratch.</p>\n<p>(My projects are mostly built on Laravel, so if there are some quality profiles specific to this framework, could add more control on top of PSR-12)</p>\n"},{"tags":["java","android","android-studio","kotlin","android-room"],"answers":[{"tags":[],"owner":{"account_id":7349100,"reputation":10066,"user_id":5595926,"display_name":"ΓDΛ"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658398928,"creation_date":1658398928,"answer_id":73064490,"question_id":73064116,"body_markdown":"There is a sorting error in the relevant lines.\r\n\r\n    day1Adapter.submitList(data.filter { it.Japanese_Language_Proficiency_Test == 4 })\r\n    binding.spacedRecyclerviewDay1.adapter = day1Adapter\r\n\r\nYou should use **submitlist** after assigning adapter","title":"E/RecyclerView: No adapter attached; skipping layout in my fragment","body":"<p>There is a sorting error in the relevant lines.</p>\n<pre><code>day1Adapter.submitList(data.filter { it.Japanese_Language_Proficiency_Test == 4 })\nbinding.spacedRecyclerviewDay1.adapter = day1Adapter\n</code></pre>\n<p>You should use <strong>submitlist</strong> after assigning adapter</p>\n"},{"tags":[],"owner":{"account_id":21319272,"reputation":809,"user_id":15692700,"display_name":"Muhammad Rio"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658400647,"creation_date":1658400647,"answer_id":73064869,"question_id":73064116,"body_markdown":"set your adapter inside `initUI` function\r\n\r\n```kotlin\r\nprivate fun initUI() {\r\n    ...code\r\n    spacedRecyclerAdapter = SpacedRecyclerAdapter()\r\n    binding.spacedRecyclerview.adapter = spacedRecyclerAdapter\r\n\r\n    day1Adapter = SpacedRecyclerAdapter()\r\n    binding.spacedRecyclerviewDay1.adapter = day1Adapter\r\n    ...code\r\n    getData()\r\n}\r\n\r\nprivate fun getData() {\r\n    kanjiViewModel.kanjiList.observe(viewLifecycleOwner, { data -&gt;\r\n        spacedRecyclerAdapter.submitList(data.filter { it.spacedstatus == 0 })\r\n        day1Adapter.submitList(data.filter { it.Japanese_Language_Proficiency_Test == 4 })\r\n    })\r\n}\r\n```","title":"E/RecyclerView: No adapter attached; skipping layout in my fragment","body":"<p>set your adapter inside <code>initUI</code> function</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>private fun initUI() {\n    ...code\n    spacedRecyclerAdapter = SpacedRecyclerAdapter()\n    binding.spacedRecyclerview.adapter = spacedRecyclerAdapter\n\n    day1Adapter = SpacedRecyclerAdapter()\n    binding.spacedRecyclerviewDay1.adapter = day1Adapter\n    ...code\n    getData()\n}\n\nprivate fun getData() {\n    kanjiViewModel.kanjiList.observe(viewLifecycleOwner, { data -&gt;\n        spacedRecyclerAdapter.submitList(data.filter { it.spacedstatus == 0 })\n        day1Adapter.submitList(data.filter { it.Japanese_Language_Proficiency_Test == 4 })\n    })\n}\n</code></pre>\n"}],"owner":{"account_id":25860868,"reputation":28,"user_id":19593383,"display_name":"Bradboyee"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":92,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1658400647,"creation_date":1658397317,"question_id":73064116,"body_markdown":"I can run this and I also got data appear but I got this warning on my Run terminal\r\n&quot;E/RecyclerView: No adapter attached; skipping layout\r\n    No adapter attached; skipping layout&quot;\r\n\r\nHow can I solve this\r\n\r\n    class SpacedFragment : Fragment() {\r\n        private lateinit var kanjiViewModel : KanjiViewModel\r\n        private lateinit var spacedRecyclerAdapter : SpacedRecyclerAdapter\r\n        private lateinit var day1Adapter: SpacedRecyclerAdapter\r\n        private var _binding : FragmentSpacedBinding? = null\r\n        private val binding get() = _binding!!\r\n        override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle? ): View {\r\n            _binding = FragmentSpacedBinding.inflate(inflater,container,false)\r\n            return binding.root\r\n        }\r\n\r\n    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {\r\n        super.onViewCreated(view, savedInstanceState)\r\n        initUI()\r\n    }\r\n\r\n    private fun initUI() {\r\n        val dao = KanjiDatabase.getInstance(requireContext()).dao()\r\n        val repository = KanjiRepository(dao)\r\n        val factory = KanjiViewModelFactory(repository)\r\n        kanjiViewModel = ViewModelProvider(this,factory)[KanjiViewModel::class.java]\r\n        //adapter\r\n        spacedRecyclerAdapter = SpacedRecyclerAdapter()\r\n        day1Adapter = SpacedRecyclerAdapter()\r\n        //layoutManager\r\n        binding.spacedRecyclerview.layoutManager = GridLayoutManager(context,5)\r\n        binding.spacedRecyclerviewDay1.layoutManager = GridLayoutManager(context,5)\r\n        getData()\r\n    }\r\n\r\n    private fun getData() {\r\n        kanjiViewModel.kanjiList.observe(viewLifecycleOwner, { data -&gt;\r\n            spacedRecyclerAdapter.submitList(data.filter { it.spacedstatus == 0 })\r\n            binding.spacedRecyclerview.adapter = spacedRecyclerAdapter\r\n            day1Adapter.submitList(data.filter { it.Japanese_Language_Proficiency_Test == 4 })\r\n            binding.spacedRecyclerviewDay1.adapter = day1Adapter\r\n        })\r\n    }\r\n    override fun onDestroyView() {\r\n        super.onDestroyView()\r\n        _binding = null\r\n    }\r\n}","title":"E/RecyclerView: No adapter attached; skipping layout in my fragment","body":"<p>I can run this and I also got data appear but I got this warning on my Run terminal\n&quot;E/RecyclerView: No adapter attached; skipping layout\nNo adapter attached; skipping layout&quot;</p>\n<p>How can I solve this</p>\n<pre><code>class SpacedFragment : Fragment() {\n    private lateinit var kanjiViewModel : KanjiViewModel\n    private lateinit var spacedRecyclerAdapter : SpacedRecyclerAdapter\n    private lateinit var day1Adapter: SpacedRecyclerAdapter\n    private var _binding : FragmentSpacedBinding? = null\n    private val binding get() = _binding!!\n    override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle? ): View {\n        _binding = FragmentSpacedBinding.inflate(inflater,container,false)\n        return binding.root\n    }\n\noverride fun onViewCreated(view: View, savedInstanceState: Bundle?) {\n    super.onViewCreated(view, savedInstanceState)\n    initUI()\n}\n\nprivate fun initUI() {\n    val dao = KanjiDatabase.getInstance(requireContext()).dao()\n    val repository = KanjiRepository(dao)\n    val factory = KanjiViewModelFactory(repository)\n    kanjiViewModel = ViewModelProvider(this,factory)[KanjiViewModel::class.java]\n    //adapter\n    spacedRecyclerAdapter = SpacedRecyclerAdapter()\n    day1Adapter = SpacedRecyclerAdapter()\n    //layoutManager\n    binding.spacedRecyclerview.layoutManager = GridLayoutManager(context,5)\n    binding.spacedRecyclerviewDay1.layoutManager = GridLayoutManager(context,5)\n    getData()\n}\n\nprivate fun getData() {\n    kanjiViewModel.kanjiList.observe(viewLifecycleOwner, { data -&gt;\n        spacedRecyclerAdapter.submitList(data.filter { it.spacedstatus == 0 })\n        binding.spacedRecyclerview.adapter = spacedRecyclerAdapter\n        day1Adapter.submitList(data.filter { it.Japanese_Language_Proficiency_Test == 4 })\n        binding.spacedRecyclerviewDay1.adapter = day1Adapter\n    })\n}\noverride fun onDestroyView() {\n    super.onDestroyView()\n    _binding = null\n}\n</code></pre>\n<p>}</p>\n"},{"tags":["java","spring-boot","maven"],"comments":[{"owner":{"account_id":5613556,"reputation":2315,"user_id":4445625,"accept_rate":50,"display_name":"Marc Stroebel"},"score":0,"creation_date":1658402212,"post_id":73064864,"comment_id":129045225,"body_markdown":"try this tutorial: https://www.baeldung.com/thymeleaf-in-spring-mvc","body":"try this tutorial: <a href=\"https://www.baeldung.com/thymeleaf-in-spring-mvc\" rel=\"nofollow noreferrer\">baeldung.com/thymeleaf-in-spring-mvc</a>"},{"owner":{"account_id":19052506,"reputation":1223,"user_id":13910368,"display_name":"M123"},"score":0,"creation_date":1658405851,"post_id":73064864,"comment_id":129046591,"body_markdown":"Nowhere does the `thymeleaf&#39; dependency appear in pom.xml.","body":"Nowhere does the `thymeleaf&#39; dependency appear in pom.xml."},{"owner":{"account_id":19052506,"reputation":1223,"user_id":13910368,"display_name":"M123"},"score":0,"creation_date":1658406164,"post_id":73064864,"comment_id":129046721,"body_markdown":"https://dev.to/reytech-lesson/spring-boot-hello-world-example-by-using-spring-initilizr-b7o","body":"<a href=\"https://dev.to/reytech-lesson/spring-boot-hello-world-example-by-using-spring-initilizr-b7o\" rel=\"nofollow noreferrer\">dev.to/reytech-lesson/&hellip;</a>"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1658406627,"post_id":73064864,"comment_id":129046926,"body_markdown":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a [minimal reproducible example](https://stackoverflow.com/help/minimal-reproducible-example).","body":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}],"owner":{"account_id":25860969,"reputation":1,"user_id":19593463,"display_name":"vijaykumar bandi"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":179,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1658400637,"creation_date":1658400637,"question_id":73064864,"body_markdown":"hi friends i creating simple spring boot web application and i getting 404 error but according to spring boot my code is correct  \r\ncan you see my code\r\n\r\nthis is my pom.xml file\r\n\r\n \r\n\r\n    `&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    \txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    \t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \t&lt;parent&gt;\r\n    \t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;2.7.1&lt;/version&gt;\r\n    \t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n    \t&lt;/parent&gt;\r\n    \t&lt;groupId&gt;com.example&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;login&lt;/artifactId&gt;\r\n    \t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n    \t&lt;name&gt;login&lt;/name&gt;\r\n    \t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n    \t&lt;properties&gt;\r\n    \t\t&lt;java.version&gt;17&lt;/java.version&gt;\r\n    \t&lt;/properties&gt;\r\n    \t&lt;dependencies&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t &lt;!-- https://mvnrepository.com/artifact/org.apache.tomcat/tomcat-jasper --&gt;\r\n          &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.tomcat&lt;/groupId&gt;\r\n            &lt;artifactId&gt;tomcat-jasper&lt;/artifactId&gt;\r\n             &lt;version&gt;9.0.64&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;!-- https://mvnrepository.com/artifact/io.springfox/springfox-swagger-ui --&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;io.springfox&lt;/groupId&gt;\r\n        &lt;artifactId&gt;springfox-swagger-ui&lt;/artifactId&gt;\r\n        &lt;version&gt;2.7.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n        &lt;!-- https://mvnrepository.com/artifact/io.springfox/springfox-swagger2 --&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;io.springfox&lt;/groupId&gt;\r\n        &lt;artifactId&gt;springfox-swagger2&lt;/artifactId&gt;\r\n        &lt;version&gt;2.7.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n        \r\n    \r\n    \t&lt;/dependencies&gt;\r\n    \r\n    \t&lt;build&gt;\r\n    \t\t&lt;plugins&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t&lt;/plugins&gt;\r\n    \t&lt;/build&gt;\r\n    \r\n    &lt;/project&gt;\r\n    `\r\n\r\nand i saw some videos and added **jasper dependency and swagger dependency **\r\neven though my error not resolved \r\n \r\nthis is my controller\r\n\r\n     `package com.example.demo;\r\n    \r\n    import org.springframework.stereotype.Controller;\r\n    import org.springframework.web.bind.annotation.GetMapping;\r\n    import org.springframework.web.bind.annotation.ResponseBody;\r\n    \r\n    @Controller\r\n    public class AppController {\r\n    \t\r\n    \t@GetMapping(&quot;/&quot;)\r\n    \t\r\n    \tpublic String viem(){\r\n    \t\t\r\n    \t\treturn &quot;login&quot;;\r\n    \t\t\r\n    \t}\r\n    \r\n    }\r\n    `\r\n\r\n   \r\n\r\nthis is my html file \r\n\r\n    `&lt;!DOCTYPE html&gt;\r\n    &lt;html&gt;\r\n    &lt;head&gt;\r\n    &lt;meta charset=&quot;ISO-8859-1&quot;&gt;\r\n    &lt;title&gt;Insert title here&lt;/title&gt;\r\n    &lt;/head&gt;\r\n    &lt;body&gt;\r\n    hi friends!!!\r\n    &lt;/body&gt;\r\n    &lt;/html&gt;`\r\n    \r\n        this is my main class \r\n      `package com.example.demo;\r\n    \r\n    import org.springframework.boot.SpringApplication;\r\n    import org.springframework.boot.autoconfigure.SpringBootApplication;\r\n    \r\n    @SpringBootApplication\r\n    public class LoginApplication {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tSpringApplication.run(LoginApplication.class, args);\r\n    \t}\r\n    \r\n    }\r\n    `\r\n\r\n in console didn&#39;t came any exception\r\n       \r\n    \r\n        `\r\n          .   ____          _            __ _ _\r\n         /\\\\ / ___&#39;_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\r\n        ( ( )\\___ | &#39;_ | &#39;_| | &#39;_ \\/ _` | \\ \\ \\ \\\r\n         \\\\\r\n\r\n/  ___)| |_)| | | | | || (_| |  ) ) ) )\r\n      &#39;  |____| .__|_| |_|_| |_\\__, | / / / /\r\n     =========|_|==============|___/=/_/_/_/\r\n     :: Spring Boot ::                (v2.7.1)\r\n    \r\n    2022-07-21 15:29:18.856  INFO 4592 --- [           main] com.example.demo.LoginApplication        : Starting LoginApplication using Java 17.0.2 on DESKTOP-QQ1B52I with PID 4592 (C:\\Users\\dell\\Documents\\workspace-spring-tool-suite-4-4.14.1.RELEASE\\login\\target\\classes started by dell in C:\\Users\\dell\\Documents\\workspace-spring-tool-suite-4-4.14.1.RELEASE\\login)\r\n    2022-07-21 15:29:18.862  INFO 4592 --- [           main] com.example.demo.LoginApplication        : No active profile set, falling back to 1 default profile: &quot;default&quot;\r\n    2022-07-21 15:29:19.877  INFO 4592 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8082 (http)\r\n    2022-07-21 15:29:19.889  INFO 4592 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]\r\n    2022-07-21 15:29:19.889  INFO 4592 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.64]\r\n    2022-07-21 15:29:20.144  INFO 4592 --- [           main] org.apache.jasper.servlet.TldScanner     : At least one JAR was scanned for TLDs yet contained no TLDs. Enable debug logging for this logger for a complete list of JARs that were scanned but no TLDs were found in them. Skipping unneeded JARs during scanning can improve startup time and JSP compilation time.\r\n    2022-07-21 15:29:20.153  INFO 4592 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext\r\n    2022-07-21 15:29:20.153  INFO 4592 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1229 ms\r\n    2022-07-21 15:29:20.584  INFO 4592 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8082 (http) with context path &#39;&#39;\r\n    2022-07-21 15:29:20.596  INFO 4592 --- [           main] com.example.demo.LoginApplication        : Started LoginApplication in 2.146 seconds (JVM running for 3.001)\r\n    2022-07-21 15:29:33.986  INFO 4592 --- [nio-8082-exec-3] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet &#39;dispatcherServlet&#39;\r\n    2022-07-21 15:29:33.987  INFO 4592 --- [nio-8082-exec-3] o.s.web.servlet.DispatcherServlet        : Initializing Servlet &#39;dispatcherServlet&#39;\r\n    2022-07-21 15:29:33.990  INFO 4592 --- [nio-8082-exec-3] o.s.web.servlet.DispatcherServlet        : Completed initialization in 3 ms\r\n    `\r\n but browser  i getting this error\r\n   \r\n  `Whitelabel Error Page\r\n    This application has no explicit mapping for /error, so you are seeing this as a fallback.\r\n    \r\n    Thu Jul 21 15:29:36 IST 2022\r\n    There was an unexpected error (type=Not Found, status=404).`\r\n\r\n    \r\n\r\n\r\n    \r\n\r\n\r\n","title":"How to fix 404 error using thymleaf and spring boot","body":"<p>hi friends i creating simple spring boot web application and i getting 404 error but according to spring boot my code is correct<br />\ncan you see my code</p>\n<p>this is my pom.xml file</p>\n<pre><code>`&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.7.1&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.example&lt;/groupId&gt;\n    &lt;artifactId&gt;login&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;login&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n         &lt;!-- https://mvnrepository.com/artifact/org.apache.tomcat/tomcat-jasper --&gt;\n      &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.tomcat&lt;/groupId&gt;\n        &lt;artifactId&gt;tomcat-jasper&lt;/artifactId&gt;\n         &lt;version&gt;9.0.64&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;!-- https://mvnrepository.com/artifact/io.springfox/springfox-swagger-ui --&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;io.springfox&lt;/groupId&gt;\n    &lt;artifactId&gt;springfox-swagger-ui&lt;/artifactId&gt;\n    &lt;version&gt;2.7.0&lt;/version&gt;\n&lt;/dependency&gt;\n    &lt;!-- https://mvnrepository.com/artifact/io.springfox/springfox-swagger2 --&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;io.springfox&lt;/groupId&gt;\n    &lt;artifactId&gt;springfox-swagger2&lt;/artifactId&gt;\n    &lt;version&gt;2.7.0&lt;/version&gt;\n&lt;/dependency&gt;\n    \n\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n`\n</code></pre>\n<p>and i saw some videos and added **jasper dependency and swagger dependency **\neven though my error not resolved</p>\n<p>this is my controller</p>\n<pre><code> `package com.example.demo;\n\nimport org.springframework.stereotype.Controller;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.ResponseBody;\n\n@Controller\npublic class AppController {\n    \n    @GetMapping(&quot;/&quot;)\n    \n    public String viem(){\n        \n        return &quot;login&quot;;\n        \n    }\n\n}\n`\n</code></pre>\n<p>this is my html file</p>\n<pre><code>`&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n&lt;meta charset=&quot;ISO-8859-1&quot;&gt;\n&lt;title&gt;Insert title here&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\nhi friends!!!\n&lt;/body&gt;\n&lt;/html&gt;`\n\n    this is my main class \n  `package com.example.demo;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\npublic class LoginApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(LoginApplication.class, args);\n    }\n\n}\n`\n</code></pre>\n<p>in console didn't came any exception</p>\n<pre><code>    `\n      .   ____          _            __ _ _\n     /\\\\ / ___'_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\n    ( ( )\\___ | '_ | '_| | '_ \\/ _` | \\ \\ \\ \\\n     \\\\\n</code></pre>\n<p>/  <strong><em>)| |</em>)| | | | | || (<em>| |  ) ) ) )\n'  |</em></strong><em>| .__|</em>| |<em>|</em>| |<em>_</em>, | / / / /\n=========|<em>|==============|</em>__/=/<em>/</em>/_/\n:: Spring Boot ::                (v2.7.1)</p>\n<pre><code>2022-07-21 15:29:18.856  INFO 4592 --- [           main] com.example.demo.LoginApplication        : Starting LoginApplication using Java 17.0.2 on DESKTOP-QQ1B52I with PID 4592 (C:\\Users\\dell\\Documents\\workspace-spring-tool-suite-4-4.14.1.RELEASE\\login\\target\\classes started by dell in C:\\Users\\dell\\Documents\\workspace-spring-tool-suite-4-4.14.1.RELEASE\\login)\n2022-07-21 15:29:18.862  INFO 4592 --- [           main] com.example.demo.LoginApplication        : No active profile set, falling back to 1 default profile: &quot;default&quot;\n2022-07-21 15:29:19.877  INFO 4592 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8082 (http)\n2022-07-21 15:29:19.889  INFO 4592 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]\n2022-07-21 15:29:19.889  INFO 4592 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.64]\n2022-07-21 15:29:20.144  INFO 4592 --- [           main] org.apache.jasper.servlet.TldScanner     : At least one JAR was scanned for TLDs yet contained no TLDs. Enable debug logging for this logger for a complete list of JARs that were scanned but no TLDs were found in them. Skipping unneeded JARs during scanning can improve startup time and JSP compilation time.\n2022-07-21 15:29:20.153  INFO 4592 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext\n2022-07-21 15:29:20.153  INFO 4592 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1229 ms\n2022-07-21 15:29:20.584  INFO 4592 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8082 (http) with context path ''\n2022-07-21 15:29:20.596  INFO 4592 --- [           main] com.example.demo.LoginApplication        : Started LoginApplication in 2.146 seconds (JVM running for 3.001)\n2022-07-21 15:29:33.986  INFO 4592 --- [nio-8082-exec-3] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'\n2022-07-21 15:29:33.987  INFO 4592 --- [nio-8082-exec-3] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'\n2022-07-21 15:29:33.990  INFO 4592 --- [nio-8082-exec-3] o.s.web.servlet.DispatcherServlet        : Completed initialization in 3 ms\n`\n</code></pre>\n<p>but browser  i getting this error</p>\n<p>`Whitelabel Error Page\nThis application has no explicit mapping for /error, so you are seeing this as a fallback.</p>\n<pre><code>Thu Jul 21 15:29:36 IST 2022\nThere was an unexpected error (type=Not Found, status=404).`\n</code></pre>\n"},{"tags":["java","matrix","spiral"],"comments":[{"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"score":0,"creation_date":1658398721,"post_id":73064241,"comment_id":129043978,"body_markdown":"You should use a debugger and step through your code. It appears your loop performs correct until the last line through the center. You probably write, 29 and 30 correctly, then overwrite 29 with 31.","body":"You should use a debugger and step through your code. It appears your loop performs correct until the last line through the center. You probably write, 29 and 30 correctly, then overwrite 29 with 31."}],"answers":[{"tags":[],"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658400303,"creation_date":1658400303,"answer_id":73064776,"question_id":73064241,"body_markdown":"The _while_ condition is valid for filling a number.\r\nBut before every _for_ loop the condition must still hold.\r\n\r\n    while (startRows &lt;= endRows &amp;&amp; startCol &lt;= endCol){\r\n        for (int i = startCol; i &lt;= endCol; i++){\r\n            mat[startRows][i] = counter;\r\n            counter++;\r\n        }\r\n        startRows++;\r\n\r\n        for (int j = startRows; j &lt;= endRows; j++){\r\n            mat[j][endCol] = counter;\r\n            counter++;\r\n        }\r\n        endCol--;\r\n\r\n        if (startRows &gt; endRows) {\r\n            break;\r\n        }\r\n        for (int l = endCol; l &gt;= startCol; l--){\r\n            mat[endRows][l] = counter;\r\n            counter++;\r\n        }\r\n        endRows--;\r\n\r\n        if (startCol &gt; endCol) {\r\n            break;\r\n        }\r\n        for(int y = endRows; y &gt;= startRows; y--){\r\n            mat[y][startCol] = counter;\r\n            counter++;\r\n        }\r\n        startCol++;\r\n    }\r\n\r\nI added two breaks on going back.\r\n\r\nOtherwise the algorithm is quite elegant, and maybe you can find a way to clean up my hacky conditions.\r\n\r\nI did not test the code.\r\n\r\nYou might have written tracing code to see the logic. A log statement after every `counter++;`.","title":"Spiral Matrix java","body":"<p>The <em>while</em> condition is valid for filling a number.\nBut before every <em>for</em> loop the condition must still hold.</p>\n<pre><code>while (startRows &lt;= endRows &amp;&amp; startCol &lt;= endCol){\n    for (int i = startCol; i &lt;= endCol; i++){\n        mat[startRows][i] = counter;\n        counter++;\n    }\n    startRows++;\n\n    for (int j = startRows; j &lt;= endRows; j++){\n        mat[j][endCol] = counter;\n        counter++;\n    }\n    endCol--;\n\n    if (startRows &gt; endRows) {\n        break;\n    }\n    for (int l = endCol; l &gt;= startCol; l--){\n        mat[endRows][l] = counter;\n        counter++;\n    }\n    endRows--;\n\n    if (startCol &gt; endCol) {\n        break;\n    }\n    for(int y = endRows; y &gt;= startRows; y--){\n        mat[y][startCol] = counter;\n        counter++;\n    }\n    startCol++;\n}\n</code></pre>\n<p>I added two breaks on going back.</p>\n<p>Otherwise the algorithm is quite elegant, and maybe you can find a way to clean up my hacky conditions.</p>\n<p>I did not test the code.</p>\n<p>You might have written tracing code to see the logic. A log statement after every <code>counter++;</code>.</p>\n"}],"owner":{"account_id":13915000,"reputation":1,"user_id":10047094,"display_name":"Max.ZiLvova"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":670,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1658400303,"creation_date":1658397893,"question_id":73064241,"body_markdown":"I tried to solve the problem, but it didn&#39;t work.\r\ndescription:\r\nimplement its static method:\r\n\r\n* `int[][] spiral(int rows, int columns)`\\\r\n  Return a two-dimensional array coming in the form of a table and containing numbers from `1` up to `rows * columns`. The size of the table will be specified by the given parameters.\\\r\n  Numbers fill the &quot;table&quot; clockwise from the top-level corner in a spiral manner.\\\r\n  For example, for parameter values `(3, 4)`, the output array should be:\r\n    ```\r\n     1  2  3  4\r\n    10 11 12  5\r\n     9  8  7  6\r\n\r\n    static int[][] spiral(int rows, int columns) {\r\n       int mat[][] = new int[rows][columns];\r\n        int counter = 1;\r\n        int startCol = 0;\r\n        int endCol = columns - 1;\r\n        int startRows = 0;\r\n        int endRows = rows -1;\r\n\r\n        while (startRows &lt;= endRows &amp;&amp; startCol &lt;= endCol){\r\n            for (int i = startCol; i &lt;= endCol; i++){\r\n                mat[startRows][i] = counter;\r\n                counter++;\r\n            }\r\n            startRows++;\r\n\r\n            for (int j = startRows; j &lt;= endRows; j++){\r\n                mat[j][endCol] = counter;\r\n                counter++;\r\n            }\r\n            endCol--;\r\n\r\n            for (int l = endCol; l &gt;= startCol; l--){\r\n                mat[endRows][l] = counter;\r\n                counter++;\r\n            }\r\n            endRows--;\r\n\r\n            for(int y = endRows; y &gt;= startRows; y--){\r\n                mat[y][startCol] = counter;\r\n                counter++;\r\n            }\r\n            startCol++;\r\n        }\r\n\r\n        return mat;\r\n    }\r\n}\r\n\r\nExpected :\r\n&gt;[[1;2;3;4;5;6];  \r\n[18;19;20;21;22;7];  \r\n[17;28;29;30;23;8];  \r\n[16;27;26;25;24;9];  \r\n[15;14;13;12;11;10]]\r\n\r\nActual   :\r\n&gt;[[1;2;3;4;5;6];  \r\n[18;19;20;21;22;7];  \r\n[17;28;31;30;23;8];  \r\n[16;27;26;25;24;9];  \r\n[15;14;13;12;11;10]]\r\n\r\n","title":"Spiral Matrix java","body":"<p>I tried to solve the problem, but it didn't work.\ndescription:\nimplement its static method:</p>\n<ul>\n<li><code>int[][] spiral(int rows, int columns)</code><br />\nReturn a two-dimensional array coming in the form of a table and containing numbers from <code>1</code> up to <code>rows * columns</code>. The size of the table will be specified by the given parameters.<br />\nNumbers fill the &quot;table&quot; clockwise from the top-level corner in a spiral manner.<br />\nFor example, for parameter values <code>(3, 4)</code>, the output array should be:\n<pre><code> 1  2  3  4\n10 11 12  5\n 9  8  7  6\n\nstatic int[][] spiral(int rows, int columns) {\n   int mat[][] = new int[rows][columns];\n    int counter = 1;\n    int startCol = 0;\n    int endCol = columns - 1;\n    int startRows = 0;\n    int endRows = rows -1;\n\n    while (startRows &lt;= endRows &amp;&amp; startCol &lt;= endCol){\n        for (int i = startCol; i &lt;= endCol; i++){\n            mat[startRows][i] = counter;\n            counter++;\n        }\n        startRows++;\n\n        for (int j = startRows; j &lt;= endRows; j++){\n            mat[j][endCol] = counter;\n            counter++;\n        }\n        endCol--;\n\n        for (int l = endCol; l &gt;= startCol; l--){\n            mat[endRows][l] = counter;\n            counter++;\n        }\n        endRows--;\n\n        for(int y = endRows; y &gt;= startRows; y--){\n            mat[y][startCol] = counter;\n            counter++;\n        }\n        startCol++;\n    }\n\n    return mat;\n}\n</code></pre>\n</li>\n</ul>\n<p>}</p>\n<p>Expected :</p>\n<blockquote>\n<p>[[1;2;3;4;5;6];<br />\n[18;19;20;21;22;7];<br />\n[17;28;29;30;23;8];<br />\n[16;27;26;25;24;9];<br />\n[15;14;13;12;11;10]]</p>\n</blockquote>\n<p>Actual   :</p>\n<blockquote>\n<p>[[1;2;3;4;5;6];<br />\n[18;19;20;21;22;7];<br />\n[17;28;31;30;23;8];<br />\n[16;27;26;25;24;9];<br />\n[15;14;13;12;11;10]]</p>\n</blockquote>\n"},{"tags":["java","bash"],"owner":{"account_id":24232267,"reputation":11,"user_id":18185877,"display_name":"Husin Habsyi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":318,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1658399914,"creation_date":1644633995,"question_id":71088578,"body_markdown":"Does anyone have a similar issue with me, currently I&#39;m trying to do testing apps using android  Android Studio, but I got an error like this after executing UIAutomatorviewer?\r\n\r\n    &gt; Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError:\r\n    &gt; org/eclipse/swt/custom/TableTreeItem\r\n\r\n\r\nBelow is my configuration on Bash_Profile\r\n\r\n    export ANDROID_HOME=~/Library/Android/sdk\r\n    export JAVA_HOME=/Library/Java/JavaVirtualMachines/zulu-8.jdk/Contents/Home\r\n    export ANDROID_HOME=/Users/husinhabsyi/Library/Android/sdk\r\n    export PATH=$PATH:$JAVA_HOME/bin\r\n    export PATH=$PATH:$JAVA_HOME/lib\r\n    export PATH=$PATH:$ANDROID_HOME/emulator\r\n    export PATH=$PATH:$ANDROID_HOME/platform-tools\r\n    export PATH=$PATH:$ANDROID_HOME/tools\r\n    export PATH=$PATH:$ANDROID_HOME/build-tools\r\n    export PATH=$PATH:$ANDROID_HOME/tools/bin\r\n    export PATH=$PATH:$ANDROID_HOME/tools/lib/x86_64\r\n                                                    \r\n\r\n","title":"Get Error while running UIAUTOMATORVIEW in MAC M1 ( Monterey )","body":"<p>Does anyone have a similar issue with me, currently I'm trying to do testing apps using android  Android Studio, but I got an error like this after executing UIAutomatorviewer?</p>\n<pre><code>&gt; Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError:\n&gt; org/eclipse/swt/custom/TableTreeItem\n</code></pre>\n<p>Below is my configuration on Bash_Profile</p>\n<pre><code>export ANDROID_HOME=~/Library/Android/sdk\nexport JAVA_HOME=/Library/Java/JavaVirtualMachines/zulu-8.jdk/Contents/Home\nexport ANDROID_HOME=/Users/husinhabsyi/Library/Android/sdk\nexport PATH=$PATH:$JAVA_HOME/bin\nexport PATH=$PATH:$JAVA_HOME/lib\nexport PATH=$PATH:$ANDROID_HOME/emulator\nexport PATH=$PATH:$ANDROID_HOME/platform-tools\nexport PATH=$PATH:$ANDROID_HOME/tools\nexport PATH=$PATH:$ANDROID_HOME/build-tools\nexport PATH=$PATH:$ANDROID_HOME/tools/bin\nexport PATH=$PATH:$ANDROID_HOME/tools/lib/x86_64\n                                                \n</code></pre>\n"},{"tags":["java","validation","enums","spring-data-jpa"],"comments":[{"owner":{"account_id":7788702,"reputation":836,"user_id":5892518,"display_name":"Harsh"},"score":0,"creation_date":1658399073,"post_id":73064430,"comment_id":129044109,"body_markdown":"You can define an ENUM within your class! By default when your value will not map to the ENUM value, it should return IllegalArgumentException, similarly you can also handle that exception in ENUM itself","body":"You can define an ENUM within your class! By default when your value will not map to the ENUM value, it should return IllegalArgumentException, similarly you can also handle that exception in ENUM itself"},{"owner":{"account_id":4018615,"reputation":2239,"user_id":3309799,"accept_rate":33,"display_name":"Chris Neve"},"score":0,"creation_date":1658399360,"post_id":73064430,"comment_id":129044199,"body_markdown":"I believe setting the type to your enum should work: private System systemName;","body":"I believe setting the type to your enum should work: private System systemName;"}],"answers":[{"tags":[],"owner":{"account_id":7788702,"reputation":836,"user_id":5892518,"display_name":"Harsh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658399439,"creation_date":1658399439,"answer_id":73064595,"question_id":73064430,"body_markdown":"You can write your own method in `ENUM`\r\n\r\n***Something like this*** \r\n\r\n    public static MyEnum fromValue(String value) {\r\n        for (MyEnum b : MyEnum.values()) {\r\n          if (b.value.equals(value)) {\r\n            return b;\r\n          }\r\n        }\r\n        throw new IllegalArgumentException(&quot;Unexpected value &#39;&quot; + value + &quot;&#39;&quot;);\r\n      }\r\n\r\n\r\nAlternatively, if your Enum is part of your class, I think , Java should automatically handle and throw IllegalArgumentException if the value cannot be mapped !","title":"JPA: Validate fetched field against an Enum","body":"<p>You can write your own method in <code>ENUM</code></p>\n<p><em><strong>Something like this</strong></em></p>\n<pre><code>public static MyEnum fromValue(String value) {\n    for (MyEnum b : MyEnum.values()) {\n      if (b.value.equals(value)) {\n        return b;\n      }\n    }\n    throw new IllegalArgumentException(&quot;Unexpected value '&quot; + value + &quot;'&quot;);\n  }\n</code></pre>\n<p>Alternatively, if your Enum is part of your class, I think , Java should automatically handle and throw IllegalArgumentException if the value cannot be mapped !</p>\n"},{"tags":[],"owner":{"account_id":9571720,"reputation":6305,"user_id":7109162,"accept_rate":84,"display_name":"XtremeBaumer"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1658399605,"creation_date":1658399605,"answer_id":73064632,"question_id":73064430,"body_markdown":"Set the field type to the enum.\r\n\r\n    @Column(name = &quot;system_name&quot;, nullable = false, length = 255)\r\n    @Enumerated(EnumType.STRING)\r\n    private System systemName;\r\n\r\n\r\nThis will cause an error if you encounter a value not defined in the enum.\r\n\r\nYou also have to set `EnumType.STRING` explicitly, as it defaults to `EnumType.ORDINAL` which would correspond to the enum ordinal value instead of the name","title":"JPA: Validate fetched field against an Enum","body":"<p>Set the field type to the enum.</p>\n<pre><code>@Column(name = &quot;system_name&quot;, nullable = false, length = 255)\n@Enumerated(EnumType.STRING)\nprivate System systemName;\n</code></pre>\n<p>This will cause an error if you encounter a value not defined in the enum.</p>\n<p>You also have to set <code>EnumType.STRING</code> explicitly, as it defaults to <code>EnumType.ORDINAL</code> which would correspond to the enum ordinal value instead of the name</p>\n"}],"owner":{"account_id":3216552,"reputation":2553,"user_id":2715083,"accept_rate":57,"display_name":"Somjit"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":154,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":73064632,"answer_count":2,"score":2,"last_activity_date":1658399605,"creation_date":1658398712,"question_id":73064430,"body_markdown":"I have an entity like so:\r\n\r\n```java\r\n\r\n@Entity\r\n@Table(name = &quot;MyTable&quot;, schema = &quot;test&quot;)\r\n@Getter @Setter\r\npublic class PurgeSystemsEntity {\r\n\r\n    @Id\r\n    @Column(name = &quot;id&quot;, nullable = false)\r\n    private int id;\r\n\r\n    @Column(name = &quot;system_name&quot;, nullable = false, length = 255)\r\n    private String systemName;\r\n.\r\n.\r\n}\r\n```\r\n\r\nHow do I validate that the string obtained from DB (*like when doing a `.findAll()`*) in `systemName` field is one of the possible options defined in the **Enum** `System` :\r\n\r\n```java\r\n    public static enum System {\r\n        PROD, DEV, QA;\r\n    }\r\n```\r\n\r\nSo, If a row is fetched with `systemName` value being &#39;STAGING&#39;, it should throw an exception immediately.\r\n\r\nIs there some elegant way to do this? ","title":"JPA: Validate fetched field against an Enum","body":"<p>I have an entity like so:</p>\n<pre class=\"lang-java prettyprint-override\"><code>\n@Entity\n@Table(name = &quot;MyTable&quot;, schema = &quot;test&quot;)\n@Getter @Setter\npublic class PurgeSystemsEntity {\n\n    @Id\n    @Column(name = &quot;id&quot;, nullable = false)\n    private int id;\n\n    @Column(name = &quot;system_name&quot;, nullable = false, length = 255)\n    private String systemName;\n.\n.\n}\n</code></pre>\n<p>How do I validate that the string obtained from DB (<em>like when doing a <code>.findAll()</code></em>) in <code>systemName</code> field is one of the possible options defined in the <strong>Enum</strong> <code>System</code> :</p>\n<pre class=\"lang-java prettyprint-override\"><code>    public static enum System {\n        PROD, DEV, QA;\n    }\n</code></pre>\n<p>So, If a row is fetched with <code>systemName</code> value being 'STAGING', it should throw an exception immediately.</p>\n<p>Is there some elegant way to do this?</p>\n"},{"tags":["java","android-studio","updates","delete-row","tablelayout"],"comments":[{"owner":{"account_id":25780177,"reputation":11,"user_id":19525922,"display_name":"Muhammad Robi Rahman"},"score":0,"creation_date":1658399834,"post_id":73064455,"comment_id":129044374,"body_markdown":"@JumperBot_ I am sorry, but I am not a native speaker and its just a language barrier. I will delete it soon. thank you for commenting.","body":"@JumperBot_ I am sorry, but I am not a native speaker and its just a language barrier. I will delete it soon. thank you for commenting."}],"answers":[{"tags":[],"owner":{"account_id":23099636,"reputation":23,"user_id":17209222,"display_name":"Anka"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1658399490,"creation_date":1658399490,"answer_id":73064601,"question_id":73064455,"body_markdown":"Update Process:\r\n\r\nFor this process, we first right click on our table and add the Mouse Click event&gt;Mouse clicked event.\r\n\r\nInside this event part:\r\n\r\n    lbl_id.setText(jTable1.getValueAt(jTable1.getSelectedRow(),0).toString());\r\n       txt_name.setText(jTable1.getValueAt(jTable1.getSelectedRow(),1).toString());\r\n       txt_surname.setText(jTable1.getValueAt(jTable1.getSelectedRow(),2).toString());\r\n       txt_email.setText(jTable1.getValueAt(jTable1.getSelectedRow(),3).toString());\r\n       txt_password.setText(jTable1.getValueAt(jTable1.getSelectedRow(),4).toString());\r\n\r\n\r\nTo summarize, first of all, we sent the data from the table to the label and textfield fields. Now we leave the values ​​in the label and textfield fields and place them in the question mark places in the sql update query. We use PreparedStatement while doing this.\r\n\r\nDelete Operation:\r\n\r\n    String id=lbl_id. getText ( ) ;\r\n        \r\n        \r\n        \r\n        String query= &quot;DELETE FROM `users` WHERE id=?&quot; ;\r\n        PreparedStatement ps;\r\n        try {\r\n                ps=MyConnection. getConnection ( ) . prepareStatement ( query ) ;\r\n                ps. setString ( 1 , id ) ;\r\n                ps. executeUpdate ( ) ;\r\n                if ( ps. executeUpdate ( ) == 0 ) {\r\n                    JOptionPane. showMessageDialog ( null, &quot;Deleted&quot; ) ;\r\n                    \r\n                }\r\n                get_value ( ) ;\r\n                \r\n        } catch ( Exception e ) {   \r\n        }\r\n\r\nWe do the same with the delete query. This time all we need is the id. So we just got the id value. After the process is finished, we called the function to pull data from the table again. Thus, our table will be updated after deletion or update.\r\n\r\n","title":"How To Delete And Update Data From Table Layout","body":"<p>Update Process:</p>\n<p>For this process, we first right click on our table and add the Mouse Click event&gt;Mouse clicked event.</p>\n<p>Inside this event part:</p>\n<pre><code>lbl_id.setText(jTable1.getValueAt(jTable1.getSelectedRow(),0).toString());\n   txt_name.setText(jTable1.getValueAt(jTable1.getSelectedRow(),1).toString());\n   txt_surname.setText(jTable1.getValueAt(jTable1.getSelectedRow(),2).toString());\n   txt_email.setText(jTable1.getValueAt(jTable1.getSelectedRow(),3).toString());\n   txt_password.setText(jTable1.getValueAt(jTable1.getSelectedRow(),4).toString());\n</code></pre>\n<p>To summarize, first of all, we sent the data from the table to the label and textfield fields. Now we leave the values ​​in the label and textfield fields and place them in the question mark places in the sql update query. We use PreparedStatement while doing this.</p>\n<p>Delete Operation:</p>\n<pre><code>String id=lbl_id. getText ( ) ;\n    \n    \n    \n    String query= &quot;DELETE FROM `users` WHERE id=?&quot; ;\n    PreparedStatement ps;\n    try {\n            ps=MyConnection. getConnection ( ) . prepareStatement ( query ) ;\n            ps. setString ( 1 , id ) ;\n            ps. executeUpdate ( ) ;\n            if ( ps. executeUpdate ( ) == 0 ) {\n                JOptionPane. showMessageDialog ( null, &quot;Deleted&quot; ) ;\n                \n            }\n            get_value ( ) ;\n            \n    } catch ( Exception e ) {   \n    }\n</code></pre>\n<p>We do the same with the delete query. This time all we need is the id. So we just got the id value. After the process is finished, we called the function to pull data from the table again. Thus, our table will be updated after deletion or update.</p>\n"}],"owner":{"account_id":25780177,"reputation":11,"user_id":19525922,"display_name":"Muhammad Robi Rahman"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":88,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"answer_count":1,"score":-1,"last_activity_date":1658399490,"creation_date":1658398794,"question_id":73064455,"body_markdown":"[Picture Of Table Layout Table][1]\r\n\r\n  [1]: https://i.stack.imgur.com/vguKF.jpg\r\n\r\nFirstly, you can check the image in the link. I want to update and delete a table row by clicking &quot;pilih aksi&quot;. anyone can help me? thank you. ","title":"How To Delete And Update Data From Table Layout","body":"<p><a href=\"https://i.stack.imgur.com/vguKF.jpg\" rel=\"nofollow noreferrer\">Picture Of Table Layout Table</a></p>\n<p>Firstly, you can check the image in the link. I want to update and delete a table row by clicking &quot;pilih aksi&quot;. anyone can help me? thank you.</p>\n"},{"tags":["java","junit","mockito","aws-sdk"],"comments":[{"owner":{"account_id":15956467,"reputation":4079,"user_id":11514534,"display_name":"second"},"score":0,"creation_date":1574973920,"post_id":59095394,"comment_id":104425341,"body_markdown":"If you can not simply create a matching `ResponseInputStream` object, you probably want to enable final mocking as described in the [docu](https://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/Mockito.html). Are you sure about the class though, I can&#39;t see a  `readAllBytes()` method on that class (at least in the [`latest version`](https://sdk.amazonaws.com/java/api/latest/software/amazon/awssdk/core/ResponseInputStream.html)) ?","body":"If you can not simply create a matching <code>ResponseInputStream</code> object, you probably want to enable final mocking as described in the <a href=\"https://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/Mockito.html\" rel=\"nofollow noreferrer\">docu</a>. Are you sure about the class though, I can&#39;t see a  <code>readAllBytes()</code> method on that class (at least in the <a href=\"https://sdk.amazonaws.com/java/api/latest/software/amazon/awssdk/core/ResponseInputStream.html\" rel=\"nofollow noreferrer\"><code>latest version</code></a>) ?"},{"owner":{"account_id":4370300,"reputation":1338,"user_id":3564882,"accept_rate":77,"display_name":"Gavi"},"score":0,"creation_date":1575069840,"post_id":59095394,"comment_id":104454902,"body_markdown":"s3Client.getObject(getObjectRequest) returns a ResponseInputStream&lt;GetObjectResponse&gt; which undirectly extends java.io.InputStream","body":"s3Client.getObject(getObjectRequest) returns a ResponseInputStream&lt;GetObjectResponse&gt; which undirectly extends java.io.InputStream"},{"owner":{"account_id":15956467,"reputation":4079,"user_id":11514534,"display_name":"second"},"score":0,"creation_date":1575105246,"post_id":59095394,"comment_id":104459977,"body_markdown":"Apparently the method was added in java 9 while the documentation I linked refers to an older java version which did not have that method.","body":"Apparently the method was added in java 9 while the documentation I linked refers to an older java version which did not have that method."}],"answers":[{"tags":[],"owner":{"account_id":16461387,"reputation":1032,"user_id":11892360,"display_name":"Mike Dalrymple"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1579583599,"creation_date":1579583599,"answer_id":59834532,"question_id":59095394,"body_markdown":"I was able to get this going in Spock with a GroovyMock that uses Objenesis.  I know it&#39;s not the original poster&#39;s stack but this came up in my search so I thought I&#39;d respond here in case parts of this help anyone else.\r\n\r\n## S3Repo to Test ##\r\n```groovy\r\nimport software.amazon.awssdk.services.s3.S3Client\r\nimport software.amazon.awssdk.services.s3.model.GetObjectRequest\r\n\r\nclass S3Repo {\r\n    S3Client s3\r\n    String bucket\r\n\r\n    def getS3ObjectText(String key) {\r\n        def response\r\n        try {\r\n            response = s3.getObject(GetObjectRequest\r\n                    .builder().bucket(bucket).key(key).build() as GetObjectRequest)\r\n            return response.text\r\n        } finally {\r\n            if (response) response.close()\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n## Spock Test ##\r\n```groovy\r\nimport software.amazon.awssdk.core.ResponseInputStream\r\nimport software.amazon.awssdk.services.s3.S3Client\r\nimport software.amazon.awssdk.services.s3.model.GetObjectRequest\r\nimport spock.lang.Specification\r\n\r\nclass S3RepoTest extends Specification {\r\n\r\n    def &quot;get object text&quot;() {\r\n        given:\r\n        def response = GroovyMock(ResponseInputStream)\r\n        def s3Text = &#39;this would be in file stored in s3&#39;\r\n        def key = &#39;my-file.txt&#39;\r\n        def s3 = Mock(S3Client)\r\n        def bucket = &#39;mock-bucket&#39;\r\n        def repo = new S3Repo(s3: s3, bucket: bucket)\r\n\r\n        when:\r\n        def text = repo.getS3ObjectText(key)\r\n\r\n        then:\r\n        1 * s3.getObject(_) &gt;&gt; { args -&gt;\r\n            def req = args.first() as GetObjectRequest\r\n            assert req.bucket() == bucket\r\n            assert req.key() == key\r\n            return response\r\n        }\r\n        1 * response.text &gt;&gt; s3Text\r\n\r\n        and:\r\n        text == s3Text\r\n    }\r\n}\r\n```\r\n\r\nI think the critical piece here is the `GroovyMock` which requires Objenesis.  You can certainly test your Java code with Groovy and you could probably use the `GroovyMock` in JUnit.  \r\n\r\n","title":"How can I unit test the getObject method of the AWS S3 SDK using Java?","body":"<p>I was able to get this going in Spock with a GroovyMock that uses Objenesis.  I know it's not the original poster's stack but this came up in my search so I thought I'd respond here in case parts of this help anyone else.</p>\n\n<h2>S3Repo to Test</h2>\n\n<pre><code>import software.amazon.awssdk.services.s3.S3Client\nimport software.amazon.awssdk.services.s3.model.GetObjectRequest\n\nclass S3Repo {\n    S3Client s3\n    String bucket\n\n    def getS3ObjectText(String key) {\n        def response\n        try {\n            response = s3.getObject(GetObjectRequest\n                    .builder().bucket(bucket).key(key).build() as GetObjectRequest)\n            return response.text\n        } finally {\n            if (response) response.close()\n        }\n    }\n}\n</code></pre>\n\n<h2>Spock Test</h2>\n\n<pre><code>import software.amazon.awssdk.core.ResponseInputStream\nimport software.amazon.awssdk.services.s3.S3Client\nimport software.amazon.awssdk.services.s3.model.GetObjectRequest\nimport spock.lang.Specification\n\nclass S3RepoTest extends Specification {\n\n    def \"get object text\"() {\n        given:\n        def response = GroovyMock(ResponseInputStream)\n        def s3Text = 'this would be in file stored in s3'\n        def key = 'my-file.txt'\n        def s3 = Mock(S3Client)\n        def bucket = 'mock-bucket'\n        def repo = new S3Repo(s3: s3, bucket: bucket)\n\n        when:\n        def text = repo.getS3ObjectText(key)\n\n        then:\n        1 * s3.getObject(_) &gt;&gt; { args -&gt;\n            def req = args.first() as GetObjectRequest\n            assert req.bucket() == bucket\n            assert req.key() == key\n            return response\n        }\n        1 * response.text &gt;&gt; s3Text\n\n        and:\n        text == s3Text\n    }\n}\n</code></pre>\n\n<p>I think the critical piece here is the <code>GroovyMock</code> which requires Objenesis.  You can certainly test your Java code with Groovy and you could probably use the <code>GroovyMock</code> in JUnit.  </p>\n"},{"tags":[],"owner":{"account_id":4370300,"reputation":1338,"user_id":3564882,"accept_rate":77,"display_name":"Gavi"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1587246698,"creation_date":1587246698,"answer_id":61296722,"question_id":59095394,"body_markdown":"The problem is solved.\r\nIn a maven project you can add a file named &quot;org.mockito.plugins.MockMaker&quot; in the folder &quot;src/test/resources/mockito-extensions&quot;.\r\n\r\nInside the file, add &quot;mock-maker-inline&quot; without quotes.\r\n\r\nFrom now Mockito will be able to mock final classes also.","title":"How can I unit test the getObject method of the AWS S3 SDK using Java?","body":"<p>The problem is solved.\nIn a maven project you can add a file named \"org.mockito.plugins.MockMaker\" in the folder \"src/test/resources/mockito-extensions\".</p>\n\n<p>Inside the file, add \"mock-maker-inline\" without quotes.</p>\n\n<p>From now Mockito will be able to mock final classes also.</p>\n"},{"tags":[],"owner":{"account_id":5979555,"reputation":11,"user_id":4699112,"display_name":"aakarsh saxena"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1593940505,"creation_date":1593940505,"answer_id":62738870,"question_id":59095394,"body_markdown":"I did this in a gradle project.\r\nAdd the following dependencies -\r\n\r\n```\r\n    testCompile group: &#39;net.bytebuddy&#39;, name: &#39;byte-buddy-agent&#39;, version: &#39;1.9.10&#39;\r\n    testCompile group: &#39;org.mockito&#39;, name: &#39;mockito-inline&#39;, version: &#39;2.7.21&#39;\r\n    compile group: &#39;net.bytebuddy&#39;, name: &#39;byte-buddy&#39;, version: &#39;1.9.10&#39;\r\n```\r\n\r\nThe bytebuddy dependencies are compile dependencies required for mockito-core to support mockito-inline dependencies. (Ref - https://howtodoinjava.com/mockito/plugin-mockmaker-error/\r\nhttps://mvnrepository.com/artifact/org.mockito/mockito-core/2.27.2 (see compile dependencies here))\r\n\r\nWas able to mock the getObject method after this.","title":"How can I unit test the getObject method of the AWS S3 SDK using Java?","body":"<p>I did this in a gradle project.\nAdd the following dependencies -</p>\n<pre><code>    testCompile group: 'net.bytebuddy', name: 'byte-buddy-agent', version: '1.9.10'\n    testCompile group: 'org.mockito', name: 'mockito-inline', version: '2.7.21'\n    compile group: 'net.bytebuddy', name: 'byte-buddy', version: '1.9.10'\n</code></pre>\n<p>The bytebuddy dependencies are compile dependencies required for mockito-core to support mockito-inline dependencies. (Ref - <a href=\"https://howtodoinjava.com/mockito/plugin-mockmaker-error/\" rel=\"nofollow noreferrer\">https://howtodoinjava.com/mockito/plugin-mockmaker-error/</a>\n<a href=\"https://mvnrepository.com/artifact/org.mockito/mockito-core/2.27.2\" rel=\"nofollow noreferrer\">https://mvnrepository.com/artifact/org.mockito/mockito-core/2.27.2</a> (see compile dependencies here))</p>\n<p>Was able to mock the getObject method after this.</p>\n"},{"tags":[],"owner":{"account_id":17991712,"reputation":91,"user_id":13075671,"display_name":"iulian16"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1606218886,"creation_date":1606218886,"answer_id":64985963,"question_id":59095394,"body_markdown":"In case anyone is still looking for a different solution this is how I did it:\\\r\n**This is the code that needs to be mocked:**\r\n\r\n    InputStream objectStream =\r\n        this.s3Client.getObject(\r\n            GetObjectRequest.builder().bucket(bucket).key(key).build(),\r\n            ResponseTransformer.toInputStream());\r\n\r\n**This is how to mock it:**\r\n\r\n    S3Client s3Client = Mockito.mock(S3Client.class);\r\n    String bucket = &quot;bucket&quot;;\r\n    String key = &quot;key&quot;;\r\n    InputStream objectStream = getFakeInputStream();\r\n    when(s3Client.getObject(\r\n            Mockito.any(GetObjectRequest.class),\r\n            ArgumentMatchers\r\n                .&lt;ResponseTransformer&lt;GetObjectResponse, ResponseInputStream&lt;GetObjectResponse&gt;&gt;&gt;\r\n                    any()))\r\n        .then(\r\n            invocation -&gt; {\r\n              GetObjectRequest getObjectRequest = invocation.getArgument(0);\r\n              assertEquals(bucket, getObjectRequest.bucket());\r\n              assertEquals(key, getObjectRequest.key());\r\n\r\n              return new ResponseInputStream&lt;&gt;(\r\n                  GetObjectResponse.builder().build(), AbortableInputStream.create(objectStream));\r\n            });","title":"How can I unit test the getObject method of the AWS S3 SDK using Java?","body":"<p>In case anyone is still looking for a different solution this is how I did it:<br />\n<strong>This is the code that needs to be mocked:</strong></p>\n<pre><code>InputStream objectStream =\n    this.s3Client.getObject(\n        GetObjectRequest.builder().bucket(bucket).key(key).build(),\n        ResponseTransformer.toInputStream());\n</code></pre>\n<p><strong>This is how to mock it:</strong></p>\n<pre><code>S3Client s3Client = Mockito.mock(S3Client.class);\nString bucket = &quot;bucket&quot;;\nString key = &quot;key&quot;;\nInputStream objectStream = getFakeInputStream();\nwhen(s3Client.getObject(\n        Mockito.any(GetObjectRequest.class),\n        ArgumentMatchers\n            .&lt;ResponseTransformer&lt;GetObjectResponse, ResponseInputStream&lt;GetObjectResponse&gt;&gt;&gt;\n                any()))\n    .then(\n        invocation -&gt; {\n          GetObjectRequest getObjectRequest = invocation.getArgument(0);\n          assertEquals(bucket, getObjectRequest.bucket());\n          assertEquals(key, getObjectRequest.key());\n\n          return new ResponseInputStream&lt;&gt;(\n              GetObjectResponse.builder().build(), AbortableInputStream.create(objectStream));\n        });\n</code></pre>\n"},{"tags":[],"owner":{"account_id":390441,"reputation":32048,"user_id":750510,"accept_rate":98,"display_name":"madhead"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1642424233,"creation_date":1642424233,"answer_id":70741747,"question_id":59095394,"body_markdown":"I have an addition to all the great answers here.\r\n\r\nThere is an opinion that **developers should not mock the types and APIs they don&#39;t own**. Here are a few links on this topic:\r\n\r\n - [Should you only mock types you own?][1]\r\n - [TDD: Only mock types you own][2]\r\n - [Don&#39;t Mock What You Don&#39;t Own][3]\r\n\r\nTLDR: by mocking you introduce some assumptions of how things should work into your tests. So your tests are not really black-box anymore, while they should be. Your assumptions may be wrong. Or the API you&#39;ve mocked could change, making your mocks and tests drift and stale. This could result in a broken code passing the tests.\r\n\r\nNeed an example? Consider this code:\r\n\r\n```java\r\n@Test\r\nvoid test() throws Exception {\r\n    GetObjectRequest request = GetObjectRequest\r\n        .builder()\r\n        .bucket(&quot;bucket&quot;)\r\n        .key(&quot;file.json&quot;)\r\n        .range(&quot;bytes=0-0,-1&quot;)\r\n        .build();\r\n    ResponseInputStream&lt;GetObjectResponse&gt; response = client.getObject(request);\r\n    byte[] bytes = response.readAllBytes();\r\n\r\n    Assertions.assertEquals(&quot;{}&quot;, new String(bytes));\r\n}\r\n```\r\n\r\nOne would expect it to successfully read first and last bytes of a JSON file. Which would give `{}` (assuming there are no extra whitespaces or newlines). So she mocks the `getObject` and returns those bytes.\r\n\r\nWhat happens in the reality? She&#39;ll get the whole JSON, not just the first and last bytes, because\r\n\r\n&gt;Amazon S3 doesn&#39;t support retrieving multiple ranges of data per GET request. \r\n\r\nThis is just how it works *in the real world*: no exceptions, no warnings, just the whole content being returned.\r\n\r\nIf you leave only one range, let&#39;s say only the first byte, it would work:\r\n\r\n```java\r\n@Test\r\nvoid test() throws Exception {\r\n    GetObjectRequest request = GetObjectRequest\r\n        .builder()\r\n        .bucket(&quot;bucket&quot;)\r\n        .key(&quot;file.json&quot;)\r\n        .range(&quot;bytes=0-0&quot;)\r\n        .build();\r\n    ResponseInputStream&lt;GetObjectResponse&gt; response = client.getObject(request);\r\n    byte[] bytes = response.readAllBytes();\r\n\r\n    Assertions.assertEquals(&quot;{&quot;, new String(bytes));\r\n}\r\n```\r\n\r\nAlthough this example is completely made-up, and cases like this are rare, I hope you&#39;ve got the idea.\r\n\r\nSolution?\r\n\r\nIntegration tests! Yes, it&#39;s a higher level and writing them is more effort, but they make it possible to catch bugs like the one above.\r\n\r\nSo, next time think about writing an integration test and using a real thing instead of a mock. For some technologies you would even find an official lightweight implementations. Like [DynamoDB Local][4]. Or use a mock that is closer to the original API. Like a [LocalStack][5].\r\n\r\nAnd if you are a lucky user of Java/Kotlin and JUnit 5 I would like to recommend you to use [`aws-junit5`][6], a set of JUnit 5 extensions for AWS. I am it&#39;s author. These extensions can be used to inject clients for AWS services provided by tools like LocalStack or any other AWS-compatible API (including the real AWS, of course). Both AWS Java SDK v 2.x and v 1.x are supported. You `aws-junit5` to inject clients for S3, DynamoDB, Kinesis, SES, SNS and SQS. Read more in the [user guide][7].\r\n\r\n  [1]: https://stackoverflow.com/q/1906344/750510\r\n  [2]: https://www.markhneedham.com/blog/2009/12/13/tdd-only-mock-types-you-own\r\n  [3]: https://maksimivanov.com/posts/dont-mock-what-you-dont-own\r\n  [4]: https://hub.docker.com/r/amazon/dynamodb-local\r\n  [5]: https://localstack.cloud\r\n  [6]: https://madhead.me/posts/aws-junit5\r\n  [7]: https://madhead.github.io/aws-junit5/asciidoc","title":"How can I unit test the getObject method of the AWS S3 SDK using Java?","body":"<p>I have an addition to all the great answers here.</p>\n<p>There is an opinion that <strong>developers should not mock the types and APIs they don't own</strong>. Here are a few links on this topic:</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/q/1906344/750510\">Should you only mock types you own?</a></li>\n<li><a href=\"https://www.markhneedham.com/blog/2009/12/13/tdd-only-mock-types-you-own\" rel=\"nofollow noreferrer\">TDD: Only mock types you own</a></li>\n<li><a href=\"https://maksimivanov.com/posts/dont-mock-what-you-dont-own\" rel=\"nofollow noreferrer\">Don't Mock What You Don't Own</a></li>\n</ul>\n<p>TLDR: by mocking you introduce some assumptions of how things should work into your tests. So your tests are not really black-box anymore, while they should be. Your assumptions may be wrong. Or the API you've mocked could change, making your mocks and tests drift and stale. This could result in a broken code passing the tests.</p>\n<p>Need an example? Consider this code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Test\nvoid test() throws Exception {\n    GetObjectRequest request = GetObjectRequest\n        .builder()\n        .bucket(&quot;bucket&quot;)\n        .key(&quot;file.json&quot;)\n        .range(&quot;bytes=0-0,-1&quot;)\n        .build();\n    ResponseInputStream&lt;GetObjectResponse&gt; response = client.getObject(request);\n    byte[] bytes = response.readAllBytes();\n\n    Assertions.assertEquals(&quot;{}&quot;, new String(bytes));\n}\n</code></pre>\n<p>One would expect it to successfully read first and last bytes of a JSON file. Which would give <code>{}</code> (assuming there are no extra whitespaces or newlines). So she mocks the <code>getObject</code> and returns those bytes.</p>\n<p>What happens in the reality? She'll get the whole JSON, not just the first and last bytes, because</p>\n<blockquote>\n<p>Amazon S3 doesn't support retrieving multiple ranges of data per GET request.</p>\n</blockquote>\n<p>This is just how it works <em>in the real world</em>: no exceptions, no warnings, just the whole content being returned.</p>\n<p>If you leave only one range, let's say only the first byte, it would work:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Test\nvoid test() throws Exception {\n    GetObjectRequest request = GetObjectRequest\n        .builder()\n        .bucket(&quot;bucket&quot;)\n        .key(&quot;file.json&quot;)\n        .range(&quot;bytes=0-0&quot;)\n        .build();\n    ResponseInputStream&lt;GetObjectResponse&gt; response = client.getObject(request);\n    byte[] bytes = response.readAllBytes();\n\n    Assertions.assertEquals(&quot;{&quot;, new String(bytes));\n}\n</code></pre>\n<p>Although this example is completely made-up, and cases like this are rare, I hope you've got the idea.</p>\n<p>Solution?</p>\n<p>Integration tests! Yes, it's a higher level and writing them is more effort, but they make it possible to catch bugs like the one above.</p>\n<p>So, next time think about writing an integration test and using a real thing instead of a mock. For some technologies you would even find an official lightweight implementations. Like <a href=\"https://hub.docker.com/r/amazon/dynamodb-local\" rel=\"nofollow noreferrer\">DynamoDB Local</a>. Or use a mock that is closer to the original API. Like a <a href=\"https://localstack.cloud\" rel=\"nofollow noreferrer\">LocalStack</a>.</p>\n<p>And if you are a lucky user of Java/Kotlin and JUnit 5 I would like to recommend you to use <a href=\"https://madhead.me/posts/aws-junit5\" rel=\"nofollow noreferrer\"><code>aws-junit5</code></a>, a set of JUnit 5 extensions for AWS. I am it's author. These extensions can be used to inject clients for AWS services provided by tools like LocalStack or any other AWS-compatible API (including the real AWS, of course). Both AWS Java SDK v 2.x and v 1.x are supported. You <code>aws-junit5</code> to inject clients for S3, DynamoDB, Kinesis, SES, SNS and SQS. Read more in the <a href=\"https://madhead.github.io/aws-junit5/asciidoc\" rel=\"nofollow noreferrer\">user guide</a>.</p>\n"},{"tags":[],"owner":{"account_id":5971257,"reputation":86,"user_id":4693517,"display_name":"Zhang Mingxiang"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1658399404,"creation_date":1658398967,"answer_id":73064495,"question_id":59095394,"body_markdown":"You&#39;re going to mock S3Client instead of ResponseInputStream&lt;GetObjectResponse&gt;.\r\n\r\n```\r\n  @Mock\r\n  S3Client s3;\r\n\r\n\r\n  String storageKey = &quot;123&quot;;\r\n  byte[] data = new byte[] {11, 22, 33, 44, 55, 66, 77, 88, 99};\r\n\r\n\r\n  @Test\r\n  public void testGet() throws Exception {\r\n    ResponseInputStream&lt;GetObjectResponse&gt; res =new ResponseInputStream(\r\n            GetObjectResponse.builder().build(),\r\n            AbortableInputStream.create(new ByteArrayInputStream(data)));\r\n    when(s3.getObject(GetObjectRequest.builder().bucket(bucketName).key(storageKey).build()))\r\n            .thenReturn(res);\r\n\r\n    byte[] dataRetrieved = targetInstance.download(storageKey); // virtual code\r\n    assertThat(dataRetrieved).containsExactly(data);\r\n  }\r\n```","title":"How can I unit test the getObject method of the AWS S3 SDK using Java?","body":"<p>You're going to mock S3Client instead of ResponseInputStream.</p>\n<pre><code>  @Mock\n  S3Client s3;\n\n\n  String storageKey = &quot;123&quot;;\n  byte[] data = new byte[] {11, 22, 33, 44, 55, 66, 77, 88, 99};\n\n\n  @Test\n  public void testGet() throws Exception {\n    ResponseInputStream&lt;GetObjectResponse&gt; res =new ResponseInputStream(\n            GetObjectResponse.builder().build(),\n            AbortableInputStream.create(new ByteArrayInputStream(data)));\n    when(s3.getObject(GetObjectRequest.builder().bucket(bucketName).key(storageKey).build()))\n            .thenReturn(res);\n\n    byte[] dataRetrieved = targetInstance.download(storageKey); // virtual code\n    assertThat(dataRetrieved).containsExactly(data);\n  }\n</code></pre>\n"}],"owner":{"account_id":4370300,"reputation":1338,"user_id":3564882,"accept_rate":77,"display_name":"Gavi"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":20520,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"accepted_answer_id":61296722,"answer_count":6,"score":9,"last_activity_date":1658399404,"creation_date":1574970432,"question_id":59095394,"body_markdown":"I&#39;m working with Java and I&#39;m using the AWS SDK for interact with S3.\r\nI&#39;ve the following method and I want to unit test it\r\n\r\n    private final S3Client s3Client;\r\n    ...\r\n    ...\r\n    public byte[] download(String key) throws IOException {\r\n        GetObjectRequest getObjectRequest = GetObjectRequest.builder()\r\n                .bucket(&quot;myBucket&quot;)\r\n                .key(key)\r\n                .build();\r\n        return s3Client.getObject(getObjectRequest).readAllBytes();\r\n    }\r\n\r\nFor this purpose I&#39;m using JUnit 5 and Mockito.\r\nThe problem is that I don&#39;t know how to mock the result of \r\n\r\n    s3Client.getObject(getObjectRequest) \r\n\r\nbecause the return type \r\n\r\n    ResponseInputStream&lt;GetObjectResponse&gt; \r\n\r\nis a final class. \r\n\r\nAny idea or suggestions?\r\nThank you","title":"How can I unit test the getObject method of the AWS S3 SDK using Java?","body":"<p>I'm working with Java and I'm using the AWS SDK for interact with S3.\nI've the following method and I want to unit test it</p>\n\n<pre><code>private final S3Client s3Client;\n...\n...\npublic byte[] download(String key) throws IOException {\n    GetObjectRequest getObjectRequest = GetObjectRequest.builder()\n            .bucket(\"myBucket\")\n            .key(key)\n            .build();\n    return s3Client.getObject(getObjectRequest).readAllBytes();\n}\n</code></pre>\n\n<p>For this purpose I'm using JUnit 5 and Mockito.\nThe problem is that I don't know how to mock the result of </p>\n\n<pre><code>s3Client.getObject(getObjectRequest) \n</code></pre>\n\n<p>because the return type </p>\n\n<pre><code>ResponseInputStream&lt;GetObjectResponse&gt; \n</code></pre>\n\n<p>is a final class. </p>\n\n<p>Any idea or suggestions?\nThank you</p>\n"},{"tags":["java","xml","xsd"],"comments":[{"owner":{"account_id":7853217,"reputation":533,"user_id":5936192,"display_name":"HaroldH"},"score":0,"creation_date":1658396927,"post_id":73063788,"comment_id":129043235,"body_markdown":"Have you thought about serializing the XML into another data format (e.g. binary), split that binary, and reconstruct it when all the pieces are sent?","body":"Have you thought about serializing the XML into another data format (e.g. binary), split that binary, and reconstruct it when all the pieces are sent?"},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":1,"creation_date":1658403233,"post_id":73063788,"comment_id":129045564,"body_markdown":"Java has extensive XML handling built in already: certainly enough for this task with a bit of coding on your part. No need for an external library. Off topic.","body":"Java has extensive XML handling built in already: certainly enough for this task with a bit of coding on your part. No need for an external library. Off topic."},{"owner":{"account_id":529122,"reputation":158120,"user_id":415448,"accept_rate":33,"display_name":"Michael Kay"},"score":0,"creation_date":1658411891,"post_id":73063788,"comment_id":129049356,"body_markdown":"You&#39;ve fallen foul of the moderation guidelines by asking the question the wrong way. Just describe the problem you want to solve; if there&#39;s a library that helps in the solution, people answering are allowed to recommend it. I know it seems a crazy rule because we all want to reuse code rather than writing it ourselves, but that&#39;s the rule, and moderators take pride in enforcing the rules.","body":"You&#39;ve fallen foul of the moderation guidelines by asking the question the wrong way. Just describe the problem you want to solve; if there&#39;s a library that helps in the solution, people answering are allowed to recommend it. I know it seems a crazy rule because we all want to reuse code rather than writing it ourselves, but that&#39;s the rule, and moderators take pride in enforcing the rules."}],"answers":[{"tags":[],"owner":{"account_id":2016713,"reputation":26480,"user_id":1803853,"accept_rate":71,"display_name":"Davide Lorenzo MARINO"},"down_vote_count":1,"up_vote_count":1,"is_accepted":true,"score":0,"last_activity_date":1658396864,"creation_date":1658396864,"answer_id":73064025,"question_id":73063788,"body_markdown":"There is no automatic way to split a big xml in several smaller xml.\r\n\r\nAs an extreme simplification a single xml represent a single object with properties.\r\nSplitting it in different xmls means splitting a single object in multiple objects. This is not something that can be done automatically.\r\n\r\nLet show a simple example. Imagine to have this xml\r\n\r\n    &lt;note&gt;\r\n      &lt;to&gt;Tove&lt;/to&gt;\r\n      &lt;from&gt;Jani&lt;/from&gt;\r\n      &lt;heading&gt;Reminder&lt;/heading&gt;\r\n      &lt;body&gt;Don&#39;t forget me this weekend!&lt;/body&gt;\r\n    &lt;/note&gt;\r\n\r\nHow do you split it? Is the following a valid way to split it? (It is a business decision how to split and recombine it).\r\n\r\n    &lt;note&gt;\r\n      &lt;to&gt;Tove&lt;/to&gt;\r\n      &lt;from&gt;Jani&lt;/from&gt;\r\n    &lt;/note&gt;\r\n\r\n    &lt;note&gt;\r\n      &lt;heading&gt;Reminder&lt;/heading&gt;\r\n      &lt;body&gt;Don&#39;t forget me this weekend!&lt;/body&gt;\r\n    &lt;/note&gt;\r\n\r\nIf the problem is not related to spliting a big xml to smaller xmls, but to split a single big file to smaller files you can split it as\r\n\r\n    &lt;note&gt;\r\n      &lt;to&gt;Tove&lt;/to&gt;\r\n      &lt;from&gt;Jani&lt;/from&gt;\r\n\r\nand\r\n\r\n      &lt;heading&gt;Reminder&lt;/heading&gt;\r\n      &lt;body&gt;Don&#39;t forget me this weekend!&lt;/body&gt;\r\n    &lt;/note&gt;\r\n\r\nBut if the problem is the size of the file to send it over the internet or to save space when saving it, consider also to compress it. Compressing an xml file results in a very smaller compressed result. Eventually you can split the compressed file.\r\n\r\nIf the problem instead is to hold in memory the whole file simply don&#39;t do that.  Use a SAX parser instead of a DOM parser so you can hold in memory just a little portion of the original xml. A [Sax parser][1] is:\r\n\r\n&gt; **SAX** (Simple API for XML) **is an event-driven online algorithm for parsing XML documents**, with an API developed by the XML-DEV mailing list.[1] SAX provides a mechanism for reading data from an XML document that is an alternative to that provided by the Document Object Model (DOM). Where the DOM operates on the document as a whole—building the full abstract syntax tree of an XML document for convenience of the user—SAX parsers operate on each piece of the XML document sequentially, issuing parsing events while making a single pass[clarification needed] through the input stream.\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Simple_API_for_XML","title":"There is a Java Library for splitting a large XML file into smaller valid XML with a max KB size?","body":"<p>There is no automatic way to split a big xml in several smaller xml.</p>\n<p>As an extreme simplification a single xml represent a single object with properties.\nSplitting it in different xmls means splitting a single object in multiple objects. This is not something that can be done automatically.</p>\n<p>Let show a simple example. Imagine to have this xml</p>\n<pre><code>&lt;note&gt;\n  &lt;to&gt;Tove&lt;/to&gt;\n  &lt;from&gt;Jani&lt;/from&gt;\n  &lt;heading&gt;Reminder&lt;/heading&gt;\n  &lt;body&gt;Don't forget me this weekend!&lt;/body&gt;\n&lt;/note&gt;\n</code></pre>\n<p>How do you split it? Is the following a valid way to split it? (It is a business decision how to split and recombine it).</p>\n<pre><code>&lt;note&gt;\n  &lt;to&gt;Tove&lt;/to&gt;\n  &lt;from&gt;Jani&lt;/from&gt;\n&lt;/note&gt;\n\n&lt;note&gt;\n  &lt;heading&gt;Reminder&lt;/heading&gt;\n  &lt;body&gt;Don't forget me this weekend!&lt;/body&gt;\n&lt;/note&gt;\n</code></pre>\n<p>If the problem is not related to spliting a big xml to smaller xmls, but to split a single big file to smaller files you can split it as</p>\n<pre><code>&lt;note&gt;\n  &lt;to&gt;Tove&lt;/to&gt;\n  &lt;from&gt;Jani&lt;/from&gt;\n</code></pre>\n<p>and</p>\n<pre><code>  &lt;heading&gt;Reminder&lt;/heading&gt;\n  &lt;body&gt;Don't forget me this weekend!&lt;/body&gt;\n&lt;/note&gt;\n</code></pre>\n<p>But if the problem is the size of the file to send it over the internet or to save space when saving it, consider also to compress it. Compressing an xml file results in a very smaller compressed result. Eventually you can split the compressed file.</p>\n<p>If the problem instead is to hold in memory the whole file simply don't do that.  Use a SAX parser instead of a DOM parser so you can hold in memory just a little portion of the original xml. A <a href=\"https://en.wikipedia.org/wiki/Simple_API_for_XML\" rel=\"nofollow noreferrer\">Sax parser</a> is:</p>\n<blockquote>\n<p><strong>SAX</strong> (Simple API for XML) <strong>is an event-driven online algorithm for parsing XML documents</strong>, with an API developed by the XML-DEV mailing list.<a href=\"https://en.wikipedia.org/wiki/Simple_API_for_XML\" rel=\"nofollow noreferrer\">1</a> SAX provides a mechanism for reading data from an XML document that is an alternative to that provided by the Document Object Model (DOM). Where the DOM operates on the document as a whole—building the full abstract syntax tree of an XML document for convenience of the user—SAX parsers operate on each piece of the XML document sequentially, issuing parsing events while making a single pass[clarification needed] through the input stream.</p>\n</blockquote>\n"}],"owner":{"account_id":25860614,"reputation":45,"user_id":19593165,"display_name":"Dimitri"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":180,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1658403193,"accepted_answer_id":73064025,"answer_count":1,"score":0,"last_activity_date":1658399324,"creation_date":1658395815,"question_id":73063788,"body_markdown":"I need to find a java library that has the methods to build a service capable of taking a very large and complex XML (with XSD) and splitting it into smaller XMLs with a defined size (for example 200KB x file).\r\n\r\nIs there any library that does this?\r\nOr maybe there is already some code on github that does this?\r\n\r\nIn my XML there is a Big List of element in a specific point of the file. My idea is to split the BIG XML in smaller XMLs that contains the same list but with the elements divided among them, so as to divide the workload.\r\n\r\n[This is a schematic image][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/3aaQB.png","title":"There is a Java Library for splitting a large XML file into smaller valid XML with a max KB size?","body":"<p>I need to find a java library that has the methods to build a service capable of taking a very large and complex XML (with XSD) and splitting it into smaller XMLs with a defined size (for example 200KB x file).</p>\n<p>Is there any library that does this?\nOr maybe there is already some code on github that does this?</p>\n<p>In my XML there is a Big List of element in a specific point of the file. My idea is to split the BIG XML in smaller XMLs that contains the same list but with the elements divided among them, so as to divide the workload.</p>\n<p><a href=\"https://i.stack.imgur.com/3aaQB.png\" rel=\"nofollow noreferrer\">This is a schematic image</a></p>\n"},{"tags":["java","android","android-studio","news-ticker","whatsapp-stickers"],"answers":[{"tags":[],"owner":{"account_id":174550,"reputation":2139,"user_id":403991,"display_name":"Jan Misker"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1609533069,"creation_date":1609533069,"answer_id":65533452,"question_id":63543630,"body_markdown":"This is likely because the code uses the Fresco library, which has to be initialized as follows:\r\n\r\n    Fresco.initialize(this);\r\n\r\nWhere `this` shall be a `Context`. See the [Fresco docs][1] for more.\r\n\r\n \r\n\r\n\r\n  [1]: https://frescolib.org/docs/index.html","title":"NativeLoader has not been initialized. To use standard native library loading","body":"<p>This is likely because the code uses the Fresco library, which has to be initialized as follows:</p>\n<pre><code>Fresco.initialize(this);\n</code></pre>\n<p>Where <code>this</code> shall be a <code>Context</code>. See the <a href=\"https://frescolib.org/docs/index.html\" rel=\"noreferrer\">Fresco docs</a> for more.</p>\n"}],"owner":{"account_id":19044113,"reputation":704,"user_id":13903584,"display_name":"Muhammad Asad"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1292,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":1,"score":4,"last_activity_date":1658399307,"creation_date":1598159723,"question_id":63543630,"body_markdown":"getting an error while fetching a WhatsApp sticker pack in my app\r\n   \r\n\r\n    NativeLoader has not been initialized. To use standard native library loading, call nativeloader.Init(new SystemDelegate()).\r\n    \r\nwhy this error show in logcat and sticker packs cannot fetch anyone solves this issue","title":"NativeLoader has not been initialized. To use standard native library loading","body":"<p>getting an error while fetching a WhatsApp sticker pack in my app</p>\n<pre><code>NativeLoader has not been initialized. To use standard native library loading, call nativeloader.Init(new SystemDelegate()).\n</code></pre>\n<p>why this error show in logcat and sticker packs cannot fetch anyone solves this issue</p>\n"},{"tags":["java","apache-kafka","apache-zookeeper"],"comments":[{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1542908850,"post_id":53428903,"comment_id":93745869,"body_markdown":"You don&#39;t need sudo to run these commands","body":"You don&#39;t need sudo to run these commands"}],"answers":[{"tags":[],"owner":{"account_id":8972075,"reputation":27597,"user_id":6690200,"accept_rate":100,"display_name":"xingbin"},"down_vote_count":0,"up_vote_count":205,"is_accepted":true,"score":205,"last_activity_date":1633664043,"creation_date":1542883344,"answer_id":53429129,"question_id":53428903,"body_markdown":"I find the answer on the [QUICKSTART][1]:\r\n\r\n&gt; Option `zookeeper` is deprecated, use `--bootstrap-server` instead.\r\n\r\nNow it works:\r\n\r\n    bin/kafka-console-consumer.sh --bootstrap-server localhost:9092 --topic test --from-beginning\r\n\r\n\r\n  [1]: https://kafka.apache.org/quickstart","title":"zookeeper is not a recognized option when executing kafka-console-consumer.sh","body":"<p>I find the answer on the <a href=\"https://kafka.apache.org/quickstart\" rel=\"noreferrer\">QUICKSTART</a>:</p>\n<blockquote>\n<p>Option <code>zookeeper</code> is deprecated, use <code>--bootstrap-server</code> instead.</p>\n</blockquote>\n<p>Now it works:</p>\n<pre><code>bin/kafka-console-consumer.sh --bootstrap-server localhost:9092 --topic test --from-beginning\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6426777,"reputation":99,"user_id":4981626,"display_name":"Gurpreet Singh"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1547035663,"creation_date":1547035663,"answer_id":54109798,"question_id":53428903,"body_markdown":"For windows users use\r\n\r\n    bin/kafka-console-consumer.bat --bootstrap-server localhost:9092 --topic test --from-beginning\r\n\r\n","title":"zookeeper is not a recognized option when executing kafka-console-consumer.sh","body":"<p>For windows users use</p>\n\n<pre><code>bin/kafka-console-consumer.bat --bootstrap-server localhost:9092 --topic test --from-beginning\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6857272,"reputation":861,"user_id":5272467,"display_name":"black_pottery_beauty"},"down_vote_count":2,"up_vote_count":22,"is_accepted":false,"score":20,"last_activity_date":1619811055,"creation_date":1571037161,"answer_id":58371707,"question_id":53428903,"body_markdown":"For windows \r\n\r\n**To start zookeeper**\r\n\r\n    C:\\kafka-2.12&gt;.\\bin\\windows\\zookeeper-server-start.bat .\\config\\server.properties\r\n\r\n**To start Kafka Broker**\r\n\r\n    C:\\kafka-2.12&gt;.\\bin\\windows\\kafka-server-start.bat .\\config\\server.properties\r\n\r\n**To Create topic** \r\n\r\n    C:\\kafka-2.12\\bin\\windows&gt;kafka-topics.bat --create --zookeeper localhost:2181 --replication-factor 1 --partitions 1 --topic test\r\n\r\n**Start Producer**\r\n\r\n    C:\\kafka-2.12\\bin\\windows&gt;kafka-console-producer.bat --broker-list localhost:9092 --topic test\r\n\r\n**To create consumer**\r\n\r\n    C:\\kafka-2.12\\bin\\windows&gt;kafka-console-consumer.bat --bootstrap-server localhost:9092 --topic test --from-beginning\r\n\r\n**Topic creation With multi partition with replication factor 1**\r\n\r\n    C:\\kafka-2.12\\bin\\windows&gt;kafka-topics --zookeeper localhost:2181 --topic first_topic --create --partitions 3 --replication-factor 1\r\n\r\n**To get the list of topic created in system**\r\n\r\n    C:\\kafka-2.12\\bin\\windows&gt;kafka-topics --zookeeper localhost:2181 --list\r\n\r\n**To get the description of topic created in system**\r\n\r\n    C:\\kafka-2.12\\bin\\windows&gt;kafka-topics.bat --describe --zookeeper localhost:2181 --topic test\r\n\r\n**To delete topic test created in system**\r\n\r\n    C:\\kafka-2.12\\bin\\windows&gt;kafka-run-class.bat kafka.admin.TopicCommand --delete --topic test --zookeeper localhost:2181\r\n\r\n**To read message from beginning of topic test created in system(version&gt;2.0)**\r\n\r\n    C:\\kafka-2.12\\bin\\windows&gt;kafka-console-consumer.bat --bootstrap-server localhost:9092 --topic test --from-beginn","title":"zookeeper is not a recognized option when executing kafka-console-consumer.sh","body":"<p>For windows</p>\n<p><strong>To start zookeeper</strong></p>\n<pre><code>C:\\kafka-2.12&gt;.\\bin\\windows\\zookeeper-server-start.bat .\\config\\server.properties\n</code></pre>\n<p><strong>To start Kafka Broker</strong></p>\n<pre><code>C:\\kafka-2.12&gt;.\\bin\\windows\\kafka-server-start.bat .\\config\\server.properties\n</code></pre>\n<p><strong>To Create topic</strong></p>\n<pre><code>C:\\kafka-2.12\\bin\\windows&gt;kafka-topics.bat --create --zookeeper localhost:2181 --replication-factor 1 --partitions 1 --topic test\n</code></pre>\n<p><strong>Start Producer</strong></p>\n<pre><code>C:\\kafka-2.12\\bin\\windows&gt;kafka-console-producer.bat --broker-list localhost:9092 --topic test\n</code></pre>\n<p><strong>To create consumer</strong></p>\n<pre><code>C:\\kafka-2.12\\bin\\windows&gt;kafka-console-consumer.bat --bootstrap-server localhost:9092 --topic test --from-beginning\n</code></pre>\n<p><strong>Topic creation With multi partition with replication factor 1</strong></p>\n<pre><code>C:\\kafka-2.12\\bin\\windows&gt;kafka-topics --zookeeper localhost:2181 --topic first_topic --create --partitions 3 --replication-factor 1\n</code></pre>\n<p><strong>To get the list of topic created in system</strong></p>\n<pre><code>C:\\kafka-2.12\\bin\\windows&gt;kafka-topics --zookeeper localhost:2181 --list\n</code></pre>\n<p><strong>To get the description of topic created in system</strong></p>\n<pre><code>C:\\kafka-2.12\\bin\\windows&gt;kafka-topics.bat --describe --zookeeper localhost:2181 --topic test\n</code></pre>\n<p><strong>To delete topic test created in system</strong></p>\n<pre><code>C:\\kafka-2.12\\bin\\windows&gt;kafka-run-class.bat kafka.admin.TopicCommand --delete --topic test --zookeeper localhost:2181\n</code></pre>\n<p><strong>To read message from beginning of topic test created in system(version&gt;2.0)</strong></p>\n<pre><code>C:\\kafka-2.12\\bin\\windows&gt;kafka-console-consumer.bat --bootstrap-server localhost:9092 --topic test --from-beginn\n</code></pre>\n"},{"tags":[],"owner":{"account_id":21395683,"reputation":1553,"user_id":15758781,"display_name":"Lunatic"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1648207695,"creation_date":1648207695,"answer_id":71616217,"question_id":53428903,"body_markdown":" **UPDATE**\r\n\r\n - From version 2.1.* the previous answers may not work, always check the official [documentation][1] , this answer provided with version `3.1.0` .\r\n\r\nFor Linux kernel base systems\r\n\r\n    ./kafka-topics.sh --create --topic yourTopicname --bootstrap-server localhost:9092\r\n\r\nFor Windows systems\r\n\r\n    ./kafka-topics.bat --create --topic quickstart-events --bootstrap-server localhost:9092\r\n\r\nNo need to pass `--from-beginning` when there is no initial offset and overload the creation command with desired [configs][2]\r\n\r\n\r\n  [1]: https://kafka.apache.org/quickstart\r\n  [2]: https://kafka.apache.org/documentation/#topicconfigs","title":"zookeeper is not a recognized option when executing kafka-console-consumer.sh","body":"<p><strong>UPDATE</strong></p>\n<ul>\n<li>From version 2.1.* the previous answers may not work, always check the official <a href=\"https://kafka.apache.org/quickstart\" rel=\"nofollow noreferrer\">documentation</a> , this answer provided with version <code>3.1.0</code> .</li>\n</ul>\n<p>For Linux kernel base systems</p>\n<pre><code>./kafka-topics.sh --create --topic yourTopicname --bootstrap-server localhost:9092\n</code></pre>\n<p>For Windows systems</p>\n<pre><code>./kafka-topics.bat --create --topic quickstart-events --bootstrap-server localhost:9092\n</code></pre>\n<p>No need to pass <code>--from-beginning</code> when there is no initial offset and overload the creation command with desired <a href=\"https://kafka.apache.org/documentation/#topicconfigs\" rel=\"nofollow noreferrer\">configs</a></p>\n"}],"owner":{"account_id":8972075,"reputation":27597,"user_id":6690200,"accept_rate":100,"display_name":"xingbin"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":76880,"favorite_count":0,"down_vote_count":0,"up_vote_count":84,"accepted_answer_id":53429129,"answer_count":4,"score":84,"last_activity_date":1658399244,"creation_date":1542882636,"question_id":53428903,"body_markdown":"I&#39;m learning how to use Kafka on this website [link][1](except I&#39;m using port 2182 in zookeeper), but it shows:\r\n\r\n&gt; zookeeper is not a recognized option\r\n\r\nafter executing:\r\n\r\n&gt; sudo ./bin/kafka-console-consumer.sh --topic test --zookeeper\r\n&gt; localhost:2182\r\n\r\nHow to fix it?\r\n\r\nEnv:\r\n\r\n    kafka_2.11-2.1.0\r\n    zookeeper-3.4.10\r\n\r\n\r\n  [1]: https://data-artisans.com/blog/kafka-flink-a-practical-how-to\r\n  [2]: https://stackoverflow.com/questions/53341838/kafka-consumer-zookeeper-is-not-a-recognized-option","title":"zookeeper is not a recognized option when executing kafka-console-consumer.sh","body":"<p>I'm learning how to use Kafka on this website <a href=\"https://data-artisans.com/blog/kafka-flink-a-practical-how-to\" rel=\"noreferrer\">link</a>(except I'm using port 2182 in zookeeper), but it shows:</p>\n<blockquote>\n<p>zookeeper is not a recognized option</p>\n</blockquote>\n<p>after executing:</p>\n<blockquote>\n<p>sudo ./bin/kafka-console-consumer.sh --topic test --zookeeper\nlocalhost:2182</p>\n</blockquote>\n<p>How to fix it?</p>\n<p>Env:</p>\n<pre><code>kafka_2.11-2.1.0\nzookeeper-3.4.10\n</code></pre>\n"},{"tags":["java","itext","digital-signature"],"answers":[{"tags":[],"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1656843164,"creation_date":1656843164,"answer_id":72845625,"question_id":72845489,"body_markdown":"&gt;So what is wrong here, am I missing something ? All I need is to sign the file, add DSS and be able to validate this signature that it covers all the document.\r\n\r\nBut exactly this obviously is impossible.\r\n\r\nWhen you have a signed PDF and add verification information to it, then you do this by adding an incremental update to the PDF carrying these data.\r\n\r\nNow obviously the signature does not cover the full document anymore, in particular it does not cover the incremental update with the verification information.\r\n\r\nSo, what is wrong here, is your expectation that after adding something to a signed PDF, the signature would still cover the full document.\r\n\r\nAnd another error is that you think that a signature not covering the full document is invalid.","title":"Adding DSS to a pdf makes it invalid","body":"<blockquote>\n<p>So what is wrong here, am I missing something ? All I need is to sign the file, add DSS and be able to validate this signature that it covers all the document.</p>\n</blockquote>\n<p>But exactly this obviously is impossible.</p>\n<p>When you have a signed PDF and add verification information to it, then you do this by adding an incremental update to the PDF carrying these data.</p>\n<p>Now obviously the signature does not cover the full document anymore, in particular it does not cover the incremental update with the verification information.</p>\n<p>So, what is wrong here, is your expectation that after adding something to a signed PDF, the signature would still cover the full document.</p>\n<p>And another error is that you think that a signature not covering the full document is invalid.</p>\n"},{"tags":[],"owner":{"account_id":10637612,"reputation":141,"user_id":7833829,"display_name":"Omar Raed"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1658399081,"creation_date":1658399081,"answer_id":73064524,"question_id":72845489,"body_markdown":"I Solved it by using signDeferred method instead of signDetached.\r\n\r\nThe problem occurs when trying to add DSS to the pdf dictionary after signing because it&#39;s considered as Editing the file after signing it so the signature does not covers the whole document anymore.\r\n\r\nThe solution was to use signDeferred method, It works by first use signExternalContainer method to modify the pdf dictionary and leave a blank placeholder for the signature to be added lately, then use the signDeferred method to fill this blank placeholder with the signature.\r\n\r\nCheck the official IText7 documentation for the signDeferred method :\r\n[IText7 signDeferred][1]\r\n\r\nThe documentation shows how to sign using signDeferred but without adding crl or timestamp to the DSS so you can check my implementation [here][2] for adding crl and embedded timestamp with signDeferred method.\r\n\r\n  [1]: https://kb.itextpdf.com/home/it7kb/examples/digital-signatures-chapter-4#Digitalsignatureschapter4-c4_09_deferredsigning\r\n\r\n[2]: https://github.com/OmarRaed/digital-signature-samples/blob/main/SignDeferred","title":"Adding DSS to a pdf makes it invalid","body":"<p>I Solved it by using signDeferred method instead of signDetached.</p>\n<p>The problem occurs when trying to add DSS to the pdf dictionary after signing because it's considered as Editing the file after signing it so the signature does not covers the whole document anymore.</p>\n<p>The solution was to use signDeferred method, It works by first use signExternalContainer method to modify the pdf dictionary and leave a blank placeholder for the signature to be added lately, then use the signDeferred method to fill this blank placeholder with the signature.</p>\n<p>Check the official IText7 documentation for the signDeferred method :\n<a href=\"https://kb.itextpdf.com/home/it7kb/examples/digital-signatures-chapter-4#Digitalsignatureschapter4-c4_09_deferredsigning\" rel=\"nofollow noreferrer\">IText7 signDeferred</a></p>\n<p>The documentation shows how to sign using signDeferred but without adding crl or timestamp to the DSS so you can check my implementation <a href=\"https://github.com/OmarRaed/digital-signature-samples/blob/main/SignDeferred\" rel=\"nofollow noreferrer\">here</a> for adding crl and embedded timestamp with signDeferred method.</p>\n"}],"owner":{"account_id":10637612,"reputation":141,"user_id":7833829,"display_name":"Omar Raed"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":266,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73064524,"answer_count":2,"score":0,"last_activity_date":1658399081,"creation_date":1656841675,"question_id":72845489,"body_markdown":"I&#39;m working on a PDF Signer/Validator and I&#39;m using Itext7.\r\n\r\nFirst I sign the pdf using the signDetached method from Itext7 :\r\n\r\n    signer.signDetached(digest, pks, chain, crlClients, ocspClient, tsaClient, 0, signatureType);\r\n\r\nSecond I add LTV info using these lines of code :\r\n\r\n    PdfReader   reader = new PdfReader(src);\r\n    PdfWriter writer = new PdfWriter(dest2);\r\n    PdfDocument pdfDoc = new PdfDocument(reader, writer, new \r\n        StampingProperties().useAppendMode());\r\n\r\n    LtvVerification v = new LtvVerification(pdfDoc);\r\n    SignatureUtil signatureUtil = new SignatureUtil(pdfDoc);\r\n\r\n    List&lt;String&gt; names = signatureUtil.getSignatureNames();\r\n    String sigName = names.get(names.size() - 1);\r\n\r\n    for (String name : names){\r\n        v.addVerification(name, ocsp, crl, LtvVerification.CertificateOption.WHOLE_CHAIN,\r\n            LtvVerification.Level.OCSP_CRL, LtvVerification.CertificateInclusion.YES);\r\n    }\r\n\r\n    v.merge();\r\n\r\nAt this point the file is signed and DSS is added. but when I try to validate the file here where the problem comes, I&#39;m using Itext7 method to verify that the signature covers the whole document :\r\n\r\n    signatureUtil.signatureCoversWholeDocument(name);\r\n\r\nBut it keeps failing because the signature does not covers all the document although the file is not altered after signing only the DSS info is added and after more digging I found that the checkWhetherSignatureCoversWholeDocument() method inside the signatureCoversWholeDocument() method is the reason why it fails when it comes to check the byte ranges \r\n\r\n    this.tokens.getSafeFile().length() == (long)(byteRange[2] + byteRange[3])\r\n\r\nThis check always fail and that is the reason why it says that the file does not covers all document.\r\n\r\nSo what is wrong here, am I missing something ? All I need is to sign the file, add DSS and be able to validate this signature that it covers all the document .\r\n\r\n","title":"Adding DSS to a pdf makes it invalid","body":"<p>I'm working on a PDF Signer/Validator and I'm using Itext7.</p>\n<p>First I sign the pdf using the signDetached method from Itext7 :</p>\n<pre><code>signer.signDetached(digest, pks, chain, crlClients, ocspClient, tsaClient, 0, signatureType);\n</code></pre>\n<p>Second I add LTV info using these lines of code :</p>\n<pre><code>PdfReader   reader = new PdfReader(src);\nPdfWriter writer = new PdfWriter(dest2);\nPdfDocument pdfDoc = new PdfDocument(reader, writer, new \n    StampingProperties().useAppendMode());\n\nLtvVerification v = new LtvVerification(pdfDoc);\nSignatureUtil signatureUtil = new SignatureUtil(pdfDoc);\n\nList&lt;String&gt; names = signatureUtil.getSignatureNames();\nString sigName = names.get(names.size() - 1);\n\nfor (String name : names){\n    v.addVerification(name, ocsp, crl, LtvVerification.CertificateOption.WHOLE_CHAIN,\n        LtvVerification.Level.OCSP_CRL, LtvVerification.CertificateInclusion.YES);\n}\n\nv.merge();\n</code></pre>\n<p>At this point the file is signed and DSS is added. but when I try to validate the file here where the problem comes, I'm using Itext7 method to verify that the signature covers the whole document :</p>\n<pre><code>signatureUtil.signatureCoversWholeDocument(name);\n</code></pre>\n<p>But it keeps failing because the signature does not covers all the document although the file is not altered after signing only the DSS info is added and after more digging I found that the checkWhetherSignatureCoversWholeDocument() method inside the signatureCoversWholeDocument() method is the reason why it fails when it comes to check the byte ranges</p>\n<pre><code>this.tokens.getSafeFile().length() == (long)(byteRange[2] + byteRange[3])\n</code></pre>\n<p>This check always fail and that is the reason why it says that the file does not covers all document.</p>\n<p>So what is wrong here, am I missing something ? All I need is to sign the file, add DSS and be able to validate this signature that it covers all the document .</p>\n"},{"tags":["java","pdf","itext","pdfbox"],"comments":[{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":0,"creation_date":1599372234,"post_id":63757726,"comment_id":112751089,"body_markdown":"As mentioned in a comment to the answer you referred to, code like that only works with very specific documents. The text you want to replace may be contained piece-wise as arguments of different instructions, it doesn&#39;t even need to be in reading order, and the encoding does not need to be ASCII-like.","body":"As mentioned in a comment to the answer you referred to, code like that only works with very specific documents. The text you want to replace may be contained piece-wise as arguments of different instructions, it doesn&#39;t even need to be in reading order, and the encoding does not need to be ASCII-like."},{"owner":{"account_id":255529,"reputation":17950,"user_id":535646,"accept_rate":40,"display_name":"Tilman Hausherr"},"score":0,"creation_date":1599377203,"post_id":63757726,"comment_id":112751970,"body_markdown":"see https://pdfbox.apache.org/2.0/migration.html#why-was-the-replacetext-example-removed%3F Look into the page content stream of your PDF with PDFDebugger or RUPS. (Or is the number in a form field?)","body":"see <a href=\"https://pdfbox.apache.org/2.0/migration.html#why-was-the-replacetext-example-removed%3F\" rel=\"nofollow noreferrer\">pdfbox.apache.org/2.0/&hellip;</a> Look into the page content stream of your PDF with PDFDebugger or RUPS. (Or is the number in a form field?)"}],"answers":[{"tags":[],"owner":{"account_id":1277033,"reputation":3170,"user_id":1232051,"display_name":"Rinkesh"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1658398582,"creation_date":1658398582,"answer_id":73064405,"question_id":63757726,"body_markdown":"you can convert your PDF to an Image then with help of Google Cloud OCR\r\nand then mask text and convert it back to PDF.\r\n\r\n**Here is Sample Project in javascript.**\r\n\r\n[https://github.com/rinkeshjain/aadhaar-mask][1] \r\n\r\n\r\n  [1]: https://github.com/rinkeshjain/aadhaar-mask","title":"Masking aadhaar number in an UIDAI aadhaar pdf","body":"<p>you can convert your PDF to an Image then with help of Google Cloud OCR\nand then mask text and convert it back to PDF.</p>\n<p><strong>Here is Sample Project in javascript.</strong></p>\n<p><a href=\"https://github.com/rinkeshjain/aadhaar-mask\" rel=\"nofollow noreferrer\">https://github.com/rinkeshjain/aadhaar-mask</a></p>\n"}],"owner":{"account_id":17463308,"reputation":47,"user_id":12660525,"display_name":"mzn"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":698,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1658398582,"creation_date":1599333637,"question_id":63757726,"body_markdown":"Does anybody know how to mask aadhaar number in an aadhaar pdf downloaded from UIDAI website. \r\n\r\nI have already tried below code for itext. It is not working for an aadhaar PDF but is working for other normal pdfs\r\n\r\n    public static void main(String[] args) throws IOException, DocumentException {\r\n\t    File file = new File(DEST);\r\n\t    file.getParentFile().mkdirs();\r\n\t    new MainClassName().manipulatePdf(SRC, DEST);\r\n\t}\r\n\r\n\tpublic void manipulatePdf(String src, String dest) throws IOException, DocumentException {\r\n\t    PdfReader reader = new PdfReader(src);\r\n\t    PdfDictionary dict = reader.getPageN(1);\r\n\t    PdfObject object = dict.getDirectObject(PdfName.CONTENTS);\r\n\t    PdfArray refs = null;\r\n\t    if (dict.get(PdfName.CONTENTS).isArray()) {\r\n\t        refs = dict.getAsArray(PdfName.CONTENTS);\r\n\t    } else if (dict.get(PdfName.CONTENTS).isIndirect()) {\r\n\t        refs = new PdfArray(dict.get(PdfName.CONTENTS));\r\n\t    }\r\n\t    for (int i = 0; i &lt; refs.getArrayList().size(); i++) {\r\n\t        PRStream stream = (PRStream) refs.getDirectObject(i);\r\n\t        byte[] data = PdfReader.getStreamBytes(stream);\r\n\t        stream.setData(new String(data).replace(&quot;8989 7890 4567&quot;, &quot;XXXX XXXX 4567&quot;).getBytes());\r\n\t    }\r\n\t    PdfStamper stamper = new PdfStamper(reader, new FileOutputStream(dest));\r\n\t    stamper.close();\r\n\t    reader.close();\r\n\t}\r\n\r\nTried suggestions from this post too (i.e, using pdfbox)\r\nhttps://stackoverflow.com/questions/52027733/search-and-replace-text-in-pdf-using-java\r\n\r\nEven that is not working for an aadhaar PDF but is working for a normal pdf\r\n\r\n(I know we can download a masked aadhaar pdf from UIDAI website itself, but I need to do it through JAVA)","title":"Masking aadhaar number in an UIDAI aadhaar pdf","body":"<p>Does anybody know how to mask aadhaar number in an aadhaar pdf downloaded from UIDAI website.</p>\n<p>I have already tried below code for itext. It is not working for an aadhaar PDF but is working for other normal pdfs</p>\n<pre><code>public static void main(String[] args) throws IOException, DocumentException {\n    File file = new File(DEST);\n    file.getParentFile().mkdirs();\n    new MainClassName().manipulatePdf(SRC, DEST);\n}\n\npublic void manipulatePdf(String src, String dest) throws IOException, DocumentException {\n    PdfReader reader = new PdfReader(src);\n    PdfDictionary dict = reader.getPageN(1);\n    PdfObject object = dict.getDirectObject(PdfName.CONTENTS);\n    PdfArray refs = null;\n    if (dict.get(PdfName.CONTENTS).isArray()) {\n        refs = dict.getAsArray(PdfName.CONTENTS);\n    } else if (dict.get(PdfName.CONTENTS).isIndirect()) {\n        refs = new PdfArray(dict.get(PdfName.CONTENTS));\n    }\n    for (int i = 0; i &lt; refs.getArrayList().size(); i++) {\n        PRStream stream = (PRStream) refs.getDirectObject(i);\n        byte[] data = PdfReader.getStreamBytes(stream);\n        stream.setData(new String(data).replace(&quot;8989 7890 4567&quot;, &quot;XXXX XXXX 4567&quot;).getBytes());\n    }\n    PdfStamper stamper = new PdfStamper(reader, new FileOutputStream(dest));\n    stamper.close();\n    reader.close();\n}\n</code></pre>\n<p>Tried suggestions from this post too (i.e, using pdfbox)\n<a href=\"https://stackoverflow.com/questions/52027733/search-and-replace-text-in-pdf-using-java\">Search and replace text in PDF using JAVA</a></p>\n<p>Even that is not working for an aadhaar PDF but is working for a normal pdf</p>\n<p>(I know we can download a masked aadhaar pdf from UIDAI website itself, but I need to do it through JAVA)</p>\n"},{"tags":["java","intellij-idea","option-type"],"comments":[{"owner":{"account_id":1992310,"reputation":11172,"user_id":1786065,"accept_rate":91,"display_name":"Rogue"},"score":2,"creation_date":1657554041,"post_id":72941007,"comment_id":128832501,"body_markdown":"Note that `b.get()` will be evaluated regardless of `b.isPresent()` being true. You may want `a.orElseGet(b::get)`, since this will not evaluate `b.get()` unless `a` is not present.","body":"Note that <code>b.get()</code> will be evaluated regardless of <code>b.isPresent()</code> being true. You may want <code>a.orElseGet(b::get)</code>, since this will not evaluate <code>b.get()</code> unless <code>a</code> is not present."},{"owner":{"account_id":11296302,"reputation":2929,"user_id":8283737,"accept_rate":89,"display_name":"Arun Gowda"},"score":0,"creation_date":1657554282,"post_id":72941007,"comment_id":128832605,"body_markdown":"@Rogue `b.get()` gets executed iff `a.isPresent()` is false. And in that case `b.isPresent()` must be true since it is an OR condition","body":"@Rogue <code>b.get()</code> gets executed iff <code>a.isPresent()</code> is false. And in that case <code>b.isPresent()</code> must be true since it is an OR condition"},{"owner":{"account_id":1992310,"reputation":11172,"user_id":1786065,"accept_rate":91,"display_name":"Rogue"},"score":3,"creation_date":1657554392,"post_id":72941007,"comment_id":128832654,"body_markdown":"@ArunGowda you will still evaluate `b.get()` when calling `#orElse`, as it will need to be evaluated to be passed as a parameter to `#orElse`. Using `#orElseGet` will accept a `Supplier&lt;T&gt;`, which will only be evaluated in the case you specified.","body":"@ArunGowda you will still evaluate <code>b.get()</code> when calling <code>#orElse</code>, as it will need to be evaluated to be passed as a parameter to <code>#orElse</code>. Using <code>#orElseGet</code> will accept a <code>Supplier&lt;T&gt;</code>, which will only be evaluated in the case you specified."},{"owner":{"account_id":2538731,"reputation":2578,"user_id":2205089,"display_name":"Alin Gabriel Arhip"},"score":1,"creation_date":1657674357,"post_id":72941007,"comment_id":128865145,"body_markdown":"I would argue using `ifPresent` and `get` is a code smell, because used like this kind of defeats the use of `Optional` in the first place. `Optional` provides chainable methods over values that can exist or not, and they check if the value is present, if you intend to get the value from it. `orElse` does an internal check for `null`, which is exactly what `isPresent` does, therefore you can chain operations like this: `log.info(a.orElse(b.orElse(&quot;a and be are null&quot;)));`","body":"I would argue using <code>ifPresent</code> and <code>get</code> is a code smell, because used like this kind of defeats the use of <code>Optional</code> in the first place. <code>Optional</code> provides chainable methods over values that can exist or not, and they check if the value is present, if you intend to get the value from it. <code>orElse</code> does an internal check for <code>null</code>, which is exactly what <code>isPresent</code> does, therefore you can chain operations like this: <code>log.info(a.orElse(b.orElse(&quot;a and be are null&quot;)));</code>"},{"owner":{"account_id":1259977,"reputation":883,"user_id":1579877,"display_name":"Aron_dc"},"score":1,"creation_date":1658398212,"post_id":72941007,"comment_id":129043767,"body_markdown":"@AlinGabrielArhip In my given example you&#39;re absolutely right. I&#39;ve ommited some more logic that depends on the isPresent. I will edit my post so it will be clearer.","body":"@AlinGabrielArhip In my given example you&#39;re absolutely right. I&#39;ve ommited some more logic that depends on the isPresent. I will edit my post so it will be clearer."}],"answers":[{"tags":[],"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1657553947,"creation_date":1657553635,"answer_id":72941068,"question_id":72941007,"body_markdown":"&gt; I get that the or is evaluated from left to right in a lazy way\r\n\r\nYes, which means that if `a.isPresent()` returns true, `b.isPresent()` won&#39;t be evaluated and the condition will be true regardless. At which point your `b.get()` will throw an exception if `b.isPresent()` is false.\r\n\r\nSince you&#39;re using `a.orElse` further down, you can simply check whether `b.isPresent()`, since `orElse` won&#39;t throw an exception if `a` is empty. So\r\n\r\n    if(b.isPresent()){\r\n      log.info(a.orElse(b.get()));\r\n    }\r\n\r\nshouldn&#39;t give a warning.\r\n\r\n(I&#39;m assuming this is a toy example, so I won&#39;t comment further on the abuse of `Optional` that is going on here)","title":"Nested Optional.get generates warning when checked and chained in orElse()","body":"<blockquote>\n<p>I get that the or is evaluated from left to right in a lazy way</p>\n</blockquote>\n<p>Yes, which means that if <code>a.isPresent()</code> returns true, <code>b.isPresent()</code> won't be evaluated and the condition will be true regardless. At which point your <code>b.get()</code> will throw an exception if <code>b.isPresent()</code> is false.</p>\n<p>Since you're using <code>a.orElse</code> further down, you can simply check whether <code>b.isPresent()</code>, since <code>orElse</code> won't throw an exception if <code>a</code> is empty. So</p>\n<pre><code>if(b.isPresent()){\n  log.info(a.orElse(b.get()));\n}\n</code></pre>\n<p>shouldn't give a warning.</p>\n<p>(I'm assuming this is a toy example, so I won't comment further on the abuse of <code>Optional</code> that is going on here)</p>\n"},{"tags":[],"owner":{"account_id":2645973,"reputation":65777,"user_id":2288659,"accept_rate":90,"display_name":"Silvio Mayolo"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1657554099,"creation_date":1657554099,"answer_id":72941162,"question_id":72941007,"body_markdown":"Yes-ish. `||` short-circuits but `orElse` doesn&#39;t, so `b.get` still runs and raises an exception if `b` is absent, even if `a` is present. That&#39;s why Java provides [`orElseGet`](https://docs.oracle.com/javase/8/docs/api/java/util/Optional.html#orElseGet-java.util.function.Supplier-), which takes a `Supplier` (i.e. a zero-argument function) to be called if we actually *need* to run the &#39;else&#39; part.\r\n\r\n    log.info(a.orElseGet(() -&gt; b.get()));\r\n\r\nNow, I don&#39;t have IntelliJ available on this computer right now, but I suspect it will still complain. The static analysis engine (probably) doesn&#39;t understand the interaction between `orElseGet` and `||`. Generally, when I encounter situations like this, I factor the offending code out into a separate function.\r\n\r\n    void onFirst&lt;T&gt;(Optional&lt;T&gt; first, Optional&lt;T&gt; second, Consumer&lt;T&gt; consumer) {\r\n      if (first.isPresent()) {\r\n        consumer.accept(first.get());\r\n      } else if (second.isPresent()) {\r\n        consumer.accept(second.get());\r\n      }\r\n    }\r\n\r\n    // Then call as\r\n    onFirst(a, b, (value) -&gt; log.info(value));\r\n\r\nA bit more wordy, but it passes static analysis muster. And the extra wordiness is off in a separate helper function that can be reused.","title":"Nested Optional.get generates warning when checked and chained in orElse()","body":"<p>Yes-ish. <code>||</code> short-circuits but <code>orElse</code> doesn't, so <code>b.get</code> still runs and raises an exception if <code>b</code> is absent, even if <code>a</code> is present. That's why Java provides <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Optional.html#orElseGet-java.util.function.Supplier-\" rel=\"nofollow noreferrer\"><code>orElseGet</code></a>, which takes a <code>Supplier</code> (i.e. a zero-argument function) to be called if we actually <em>need</em> to run the 'else' part.</p>\n<pre><code>log.info(a.orElseGet(() -&gt; b.get()));\n</code></pre>\n<p>Now, I don't have IntelliJ available on this computer right now, but I suspect it will still complain. The static analysis engine (probably) doesn't understand the interaction between <code>orElseGet</code> and <code>||</code>. Generally, when I encounter situations like this, I factor the offending code out into a separate function.</p>\n<pre><code>void onFirst&lt;T&gt;(Optional&lt;T&gt; first, Optional&lt;T&gt; second, Consumer&lt;T&gt; consumer) {\n  if (first.isPresent()) {\n    consumer.accept(first.get());\n  } else if (second.isPresent()) {\n    consumer.accept(second.get());\n  }\n}\n\n// Then call as\nonFirst(a, b, (value) -&gt; log.info(value));\n</code></pre>\n<p>A bit more wordy, but it passes static analysis muster. And the extra wordiness is off in a separate helper function that can be reused.</p>\n"}],"owner":{"account_id":1259977,"reputation":883,"user_id":1579877,"display_name":"Aron_dc"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":102,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":72941162,"answer_count":2,"score":0,"last_activity_date":1658398269,"creation_date":1657553348,"question_id":72941007,"body_markdown":"I&#39;ve just stumbled upon a warning generated by IntelliJ and I&#39;m wondering, do I miss something or is IntelliJ just ignoring the right side of the following or clause?\r\n\r\nExample Code:\r\n```\r\n  Random random = new Random();\r\n  public void test(){\r\n    Optional&lt;String&gt; a = Optional.ofNullable(random.nextInt(10)&gt;5?&quot;something&quot;:null);\r\n    Optional&lt;String&gt; b = Optional.ofNullable(random.nextInt(10)&gt;5?&quot;something&quot;:null);\r\n    if(a.isPresent() || b.isPresent()){\r\n      log.info(a.orElse(b.get()));\r\n      //Some more stuff that is depends on a or b being present\r\n    }\r\n  }\r\n```\r\nThe warning ```&#39;Optional.get()&#39; without &#39;isPresent()&#39; check ``` is shown on the ```b.get()```.\r\nI get that the or is evaluated from left to right in a lazy way but I would assume that either ```a``` or ```b``` has to have a value present as it&#39;s checked explicitly in the if.\r\n\r\nIs that an error in IntelliJ&#39;s static code analysis?","title":"Nested Optional.get generates warning when checked and chained in orElse()","body":"<p>I've just stumbled upon a warning generated by IntelliJ and I'm wondering, do I miss something or is IntelliJ just ignoring the right side of the following or clause?</p>\n<p>Example Code:</p>\n<pre><code>  Random random = new Random();\n  public void test(){\n    Optional&lt;String&gt; a = Optional.ofNullable(random.nextInt(10)&gt;5?&quot;something&quot;:null);\n    Optional&lt;String&gt; b = Optional.ofNullable(random.nextInt(10)&gt;5?&quot;something&quot;:null);\n    if(a.isPresent() || b.isPresent()){\n      log.info(a.orElse(b.get()));\n      //Some more stuff that is depends on a or b being present\n    }\n  }\n</code></pre>\n<p>The warning <code>'Optional.get()' without 'isPresent()' check </code> is shown on the <code>b.get()</code>.\nI get that the or is evaluated from left to right in a lazy way but I would assume that either <code>a</code> or <code>b</code> has to have a value present as it's checked explicitly in the if.</p>\n<p>Is that an error in IntelliJ's static code analysis?</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1658397832,"post_id":73064100,"comment_id":129043615,"body_markdown":"getFilesDir() is a private storage location for your app only. No other app has access or can find it. Use a different location.","body":"getFilesDir() is a private storage location for your app only. No other app has access or can find it. Use a different location."}],"answers":[{"tags":[],"owner":{"account_id":18318368,"reputation":742,"user_id":13339685,"display_name":"mohit48"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658398128,"creation_date":1658398128,"answer_id":73064284,"question_id":73064100,"body_markdown":"`context.getFilesDir()` give you the path for files directory that lies inside the app folder present in /data of Android which a normal user cannot access. To make the file accessible to user, you need to save it in a public directory.\r\n\r\nYou can do it like this: (the code is in kotlin but you can easily convert it in JAVA)\r\n\r\n    val path = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DOCUMENTS)\r\n    val dir = File(path.absolutePath)\r\n    if(!dir.exists())\r\n        dir.mkdirs()\r\n\r\n    val file = File(&quot;$path/Text.txt&quot;)\r\n    if (!file.exists()) {\r\n        file.createNewFile();\r\n    }\r\n    var content = &quot;&quot;    //todo: write your csv content here\r\n    val fw = FileWriter(file.absoluteFile)\r\n    val bw = BufferedWriter(fw)\r\n    bw.write(content)\r\n    bw.close()\r\n    file.renameTo(File(&quot;$path/${name}.csv&quot;))\r\n    File(&quot;$path/Text.txt&quot;).delete()\r\n\r\nYou can also try writing the content directly to .csv instead of .txt but it failed for me.","title":"Saving a csv log file in internal storage","body":"<p><code>context.getFilesDir()</code> give you the path for files directory that lies inside the app folder present in /data of Android which a normal user cannot access. To make the file accessible to user, you need to save it in a public directory.</p>\n<p>You can do it like this: (the code is in kotlin but you can easily convert it in JAVA)</p>\n<pre><code>val path = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DOCUMENTS)\nval dir = File(path.absolutePath)\nif(!dir.exists())\n    dir.mkdirs()\n\nval file = File(&quot;$path/Text.txt&quot;)\nif (!file.exists()) {\n    file.createNewFile();\n}\nvar content = &quot;&quot;    //todo: write your csv content here\nval fw = FileWriter(file.absoluteFile)\nval bw = BufferedWriter(fw)\nbw.write(content)\nbw.close()\nfile.renameTo(File(&quot;$path/${name}.csv&quot;))\nFile(&quot;$path/Text.txt&quot;).delete()\n</code></pre>\n<p>You can also try writing the content directly to .csv instead of .txt but it failed for me.</p>\n"}],"owner":{"account_id":6767435,"reputation":39,"user_id":5211997,"display_name":"Alula48"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":286,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1658398128,"creation_date":1658397231,"question_id":73064100,"body_markdown":"Description: I&#39;m trying to log the data I have coming from firestore into a csv file, and I have the following methods to do it.\r\n\r\n    public interface ExportPojo {\r\n    String generateExportValues();\r\n    String generateExportHeaders();}\r\n\r\n\r\n----------\r\n\r\n\r\n    public static File generateCSV(Context context, Collection&lt;? extends ExportPojo&gt; values, Class&lt;? extends ExportPojo&gt; type) {\r\n        StringBuilder csv = new StringBuilder();\r\n        String header;\r\n        try {\r\n            header = type.newInstance().generateExportHeaders();\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n            return null;\r\n        }\r\n        csv.append(header).append(&quot;\\n&quot;);\r\n        for (ExportPojo entry : values) {\r\n            csv.append(entry.generateExportValues());\r\n            csv.append(&quot;\\n&quot;);\r\n        }\r\n        return writeStringToFile(context, csv.toString(), &quot;.csv&quot;);\r\n    }\r\n\r\n\r\n----------\r\n\r\n    public static File writeStringToFile(Context context, String data, String format) {\r\n        File dir = new File(context.getFilesDir(), &quot;/manage/&quot;);\r\n        // create this directory if not already created\r\n        dir.mkdir();\r\n        // create the file in which we will write the contents\r\n        String timestamp =\r\n                new SimpleDateFormat(&quot;E MMM yyyy H-m-s&quot;, Locale.getDefault()).format(new Date());\r\n        final File file = new File(dir, timestamp + format);\r\n        try {\r\n            FileOutputStream os = new FileOutputStream(file);\r\n            os.write(data.getBytes());\r\n            os.close();\r\n            return file;\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n        return null;\r\n    }\r\n\r\nProblem: The client would like the user to navigate the file directory, find the csv file, and open it. But after running the methods, I can&#39;t find the exported file. I&#39;ve logged `csv.tostring()` and it looks like the data is okay. What am I doing wrong?","title":"Saving a csv log file in internal storage","body":"<p>Description: I'm trying to log the data I have coming from firestore into a csv file, and I have the following methods to do it.</p>\n<pre><code>public interface ExportPojo {\nString generateExportValues();\nString generateExportHeaders();}\n</code></pre>\n<hr />\n<pre><code>public static File generateCSV(Context context, Collection&lt;? extends ExportPojo&gt; values, Class&lt;? extends ExportPojo&gt; type) {\n    StringBuilder csv = new StringBuilder();\n    String header;\n    try {\n        header = type.newInstance().generateExportHeaders();\n    } catch (Exception e) {\n        e.printStackTrace();\n        return null;\n    }\n    csv.append(header).append(&quot;\\n&quot;);\n    for (ExportPojo entry : values) {\n        csv.append(entry.generateExportValues());\n        csv.append(&quot;\\n&quot;);\n    }\n    return writeStringToFile(context, csv.toString(), &quot;.csv&quot;);\n}\n</code></pre>\n<hr />\n<pre><code>public static File writeStringToFile(Context context, String data, String format) {\n    File dir = new File(context.getFilesDir(), &quot;/manage/&quot;);\n    // create this directory if not already created\n    dir.mkdir();\n    // create the file in which we will write the contents\n    String timestamp =\n            new SimpleDateFormat(&quot;E MMM yyyy H-m-s&quot;, Locale.getDefault()).format(new Date());\n    final File file = new File(dir, timestamp + format);\n    try {\n        FileOutputStream os = new FileOutputStream(file);\n        os.write(data.getBytes());\n        os.close();\n        return file;\n    } catch (Exception e) {\n        e.printStackTrace();\n    }\n    return null;\n}\n</code></pre>\n<p>Problem: The client would like the user to navigate the file directory, find the csv file, and open it. But after running the methods, I can't find the exported file. I've logged <code>csv.tostring()</code> and it looks like the data is okay. What am I doing wrong?</p>\n"},{"tags":["java","jwt","sap-pi","json-web-signature"],"answers":[{"tags":[],"owner":{"account_id":15305690,"reputation":26,"user_id":11042529,"display_name":"faizan khan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1658397900,"creation_date":1658397714,"answer_id":73064197,"question_id":72792589,"body_markdown":"Instead of appending byte array, encode it in base64 then append it\r\n\r\nsigned = sig.sign();\r\n\t\t\ttoken.append(Base64.getUrlEncoder().withoutPadding().encodeToString(signed));\r\n\r\n","title":"JWS Signing with RSA 256 privatekey with Algorithm RSASSA-PKCS1-v1.5 SHA-256","body":"<p>Instead of appending byte array, encode it in base64 then append it</p>\n<p>signed = sig.sign();\ntoken.append(Base64.getUrlEncoder().withoutPadding().encodeToString(signed));</p>\n"}],"owner":{"account_id":25674439,"reputation":3,"user_id":19438127,"display_name":"Harry"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":967,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73064197,"answer_count":1,"score":0,"last_activity_date":1658397900,"creation_date":1656447020,"question_id":72792589,"body_markdown":"I need some help with JWS Signing with RSA 256 privatekey -RSASSA-PKCS1-v1.5 SHA-256&lt;br /&gt;\r\nI m working on SAP PI/PO.&lt;br /&gt;\r\nI am unable to retrieve the RSA privatekey saved in server&#39;s OS folder, so I &lt;br /&gt;am trying to pass the pem(base64 encoded) key as a string.&lt;br /&gt;\r\nMy requirement is to generate Header &amp; payload &amp; signed it.&lt;br /&gt;\r\n\r\nSample input Header:&lt;br /&gt;\r\n```\r\n{&quot;alg&quot;: &quot;RS256&quot;,&quot;kid&quot;: &quot;asff1233dd&quot;}\r\n```\r\n\r\nsample Json Payload:&lt;br /&gt;\r\n```\r\n{&quot;CompInvoiceId&quot;: &quot;0009699521&quot;,&quot;IssueDtm&quot;: &quot;20220623&quot;}&lt;br /&gt;\r\n```\r\nError: I am able to generate Header.payload in base64 url encode but the &lt;br /&gt;signature part is getting corrupted when I convert the privatekey to &lt;br /&gt;PKCS8encoding.&lt;br /&gt;\r\nThe generated JWS looks like:&lt;br /&gt;\r\neyJhbGciOiJSUzI1NiIsImtpZCI6Imh5d3kzaHIifQ.eyJDb21waW52b2ljZSI6IjAwOTk5MzMzI&lt;br /&gt;iwic3VibWl0SWQiOiIxMjM0NSJ9.[B@42ace6ba&lt;br /&gt;\r\nThis is signature part which is getting corrupted - [B@42ace6ba&lt;br /&gt;\r\nKindly help with below code:&lt;br /&gt;\r\nThis is because of this declaration `byte[] signed = null`, when I remove&lt;br/&gt;\r\nthat it just throws&lt;br /&gt;error as cannot find variable for signed.&lt;br /&gt;\r\nPlease help me with passing privatekey &amp; signature.&lt;br /&gt;\r\nThe Java code I am working on:&lt;br /&gt;\r\nI am passing :&lt;br /&gt;\r\nJson data= data,&lt;br /&gt;\r\nheader = header&lt;br /&gt;\r\nPrivatekey in base64 = key&lt;br /&gt;\r\n\r\n    String jwsToken(String key, String data, String header, Container container) throws \r\n    StreamTransformationException{\r\n    String tok = null;\r\n    byte[] signed = null;\r\n    try {\r\n    StringBuffer token = new StringBuffer();\r\n    //Encode the JWT Header and add it to our string to sign\r\n    token.append(Base64.getUrlEncoder().withoutPadding().encodeToString(header.getBytes(&quot;UTF- \r\n    8&quot;)));\r\n    token.append(&quot;.&quot;);\r\n    //Encode the Json payload\r\n    token.append(Base64.getUrlEncoder().withoutPadding().encodeToString(data.getBytes(&quot;UTF-8&quot;)));\r\n    //Separate with a period\r\n    token.append(&quot;.&quot;);\r\n    //String signedPayload = \r\n    Base64.getUrlEncoder().withoutPadding().encodeToString(signature.sign());\r\n    PrivateKey privatekey = null;\r\n    String privateKeyPEM = key;\r\n    //String key = new String(Files.readAllBytes(file.toPath()), Charset.defaultCharset());\r\n    byte[] decodePrivateKey = Base64.getDecoder().decode(key);\r\n    KeyFactory keyFactory = KeyFactory.getInstance(&quot;RSA&quot;);\r\n    PKCS8EncodedKeySpec keySpec = new PKCS8EncodedKeySpec(decodePrivateKey);\r\n    privatekey = (PrivateKey) keyFactory.generatePrivate(keySpec);\r\n    Signature sig = Signature.getInstance( &quot;SHA256withRSA&quot; );\r\n    sig.initSign( ( PrivateKey ) privatekey );\r\n    sig.update(token.toString().getBytes(&quot;UTF-8&quot;));\r\n    signed=sig.sign();\r\n    tok = (token.toString());\r\n    }\r\n    catch (Exception e) {\r\n    e.printStackTrace();\r\n    }\r\n    return tok;\r\n    }","title":"JWS Signing with RSA 256 privatekey with Algorithm RSASSA-PKCS1-v1.5 SHA-256","body":"<p>I need some help with JWS Signing with RSA 256 privatekey -RSASSA-PKCS1-v1.5 SHA-256<br />\nI m working on SAP PI/PO.<br />\nI am unable to retrieve the RSA privatekey saved in server's OS folder, so I <br />am trying to pass the pem(base64 encoded) key as a string.<br />\nMy requirement is to generate Header &amp; payload &amp; signed it.<br /></p>\n<p>Sample input Header:<br /></p>\n<pre><code>{&quot;alg&quot;: &quot;RS256&quot;,&quot;kid&quot;: &quot;asff1233dd&quot;}\n</code></pre>\n<p>sample Json Payload:<br /></p>\n<pre><code>{&quot;CompInvoiceId&quot;: &quot;0009699521&quot;,&quot;IssueDtm&quot;: &quot;20220623&quot;}&lt;br /&gt;\n</code></pre>\n<p>Error: I am able to generate Header.payload in base64 url encode but the <br />signature part is getting corrupted when I convert the privatekey to <br />PKCS8encoding.<br />\nThe generated JWS looks like:<br />\neyJhbGciOiJSUzI1NiIsImtpZCI6Imh5d3kzaHIifQ.eyJDb21waW52b2ljZSI6IjAwOTk5MzMzI<br />iwic3VibWl0SWQiOiIxMjM0NSJ9.[B@42ace6ba<br />\nThis is signature part which is getting corrupted - [B@42ace6ba<br />\nKindly help with below code:<br />\nThis is because of this declaration <code>byte[] signed = null</code>, when I remove<br/>\nthat it just throws<br />error as cannot find variable for signed.<br />\nPlease help me with passing privatekey &amp; signature.<br />\nThe Java code I am working on:<br />\nI am passing :<br />\nJson data= data,<br />\nheader = header<br />\nPrivatekey in base64 = key<br /></p>\n<pre><code>String jwsToken(String key, String data, String header, Container container) throws \nStreamTransformationException{\nString tok = null;\nbyte[] signed = null;\ntry {\nStringBuffer token = new StringBuffer();\n//Encode the JWT Header and add it to our string to sign\ntoken.append(Base64.getUrlEncoder().withoutPadding().encodeToString(header.getBytes(&quot;UTF- \n8&quot;)));\ntoken.append(&quot;.&quot;);\n//Encode the Json payload\ntoken.append(Base64.getUrlEncoder().withoutPadding().encodeToString(data.getBytes(&quot;UTF-8&quot;)));\n//Separate with a period\ntoken.append(&quot;.&quot;);\n//String signedPayload = \nBase64.getUrlEncoder().withoutPadding().encodeToString(signature.sign());\nPrivateKey privatekey = null;\nString privateKeyPEM = key;\n//String key = new String(Files.readAllBytes(file.toPath()), Charset.defaultCharset());\nbyte[] decodePrivateKey = Base64.getDecoder().decode(key);\nKeyFactory keyFactory = KeyFactory.getInstance(&quot;RSA&quot;);\nPKCS8EncodedKeySpec keySpec = new PKCS8EncodedKeySpec(decodePrivateKey);\nprivatekey = (PrivateKey) keyFactory.generatePrivate(keySpec);\nSignature sig = Signature.getInstance( &quot;SHA256withRSA&quot; );\nsig.initSign( ( PrivateKey ) privatekey );\nsig.update(token.toString().getBytes(&quot;UTF-8&quot;));\nsigned=sig.sign();\ntok = (token.toString());\n}\ncatch (Exception e) {\ne.printStackTrace();\n}\nreturn tok;\n}\n</code></pre>\n"},{"tags":["java","spring","keycloak","keycloak-services","keycloak-rest-api"],"comments":[{"owner":{"account_id":3302687,"reputation":3037,"user_id":2778422,"display_name":"zaerymoghaddam"},"score":0,"creation_date":1658310659,"post_id":73046361,"comment_id":129017885,"body_markdown":"Do you want to send the `project_id` as a parameter because you don&#39;t have access to it in Keycloak OR is it because it&#39;s really dynamic and can be different every time a user tries to login to the Keycloak?","body":"Do you want to send the <code>project_id</code> as a parameter because you don&#39;t have access to it in Keycloak OR is it because it&#39;s really dynamic and can be different every time a user tries to login to the Keycloak?"},{"owner":{"account_id":4328490,"reputation":1080,"user_id":3534593,"accept_rate":67,"display_name":"coretechie"},"score":0,"creation_date":1658312813,"post_id":73046361,"comment_id":129018739,"body_markdown":"because it&#39;s really dynamic and can be different every time a user tries to access a REST API endpoint. A user passes it currently to the APIs","body":"because it&#39;s really dynamic and can be different every time a user tries to access a REST API endpoint. A user passes it currently to the APIs"},{"owner":{"account_id":3302687,"reputation":3037,"user_id":2778422,"display_name":"zaerymoghaddam"},"score":1,"creation_date":1658315205,"post_id":73046361,"comment_id":129019645,"body_markdown":"Unfortunately, as far as I know, there is no way to access the parameters coming in the request in the authenticator implementation. Otherwise, you could store those parameters in the authentication session and then access them via `KeycloakSession` object that would be accessible in your mapper implementation. I remember once I needed to do something dynamic based on a parameter passed to Keycloak, and there were no way to access them based on Keycloak&#39;s domain model :(","body":"Unfortunately, as far as I know, there is no way to access the parameters coming in the request in the authenticator implementation. Otherwise, you could store those parameters in the authentication session and then access them via <code>KeycloakSession</code> object that would be accessible in your mapper implementation. I remember once I needed to do something dynamic based on a parameter passed to Keycloak, and there were no way to access them based on Keycloak&#39;s domain model :("},{"owner":{"account_id":4328490,"reputation":1080,"user_id":3534593,"accept_rate":67,"display_name":"coretechie"},"score":0,"creation_date":1658321196,"post_id":73046361,"comment_id":129022094,"body_markdown":"I came across this https://www.keycloak.org/docs/latest/authorization_services/#_service_authorization_my_resources Do you think it is a good idea to store resources in Keycloak and authorize them via this model? I haven&#39;t read the document in its entirety, but based on a quick glance, it seems to have something to do with what I&#39;m trying to accomplish here.","body":"I came across this <a href=\"https://www.keycloak.org/docs/latest/authorization_services/#_service_authorization_my_resources\" rel=\"nofollow noreferrer\">keycloak.org/docs/latest/authorization_services/&hellip;</a> Do you think it is a good idea to store resources in Keycloak and authorize them via this model? I haven&#39;t read the document in its entirety, but based on a quick glance, it seems to have something to do with what I&#39;m trying to accomplish here."},{"owner":{"account_id":3302687,"reputation":3037,"user_id":2778422,"display_name":"zaerymoghaddam"},"score":1,"creation_date":1658322901,"post_id":73046361,"comment_id":129022861,"body_markdown":"Yes. That&#39;s the way the Authorization works in Keycloak (and generally all such IdP servers). It&#39;s based on the well-known patterns like PDP/PEP/PIP/PAP. But that&#39;s a big topic. You should really think about it thoroughly and do some proof of concepts before getting into it. It&#39;s generally a chatty protocol, but maybe if you just try to define your resources there (and not the resource instances) then it would be OK. I have never used it before, but seems quite comprehensive if you know how to utilize it in your system.","body":"Yes. That&#39;s the way the Authorization works in Keycloak (and generally all such IdP servers). It&#39;s based on the well-known patterns like PDP/PEP/PIP/PAP. But that&#39;s a big topic. You should really think about it thoroughly and do some proof of concepts before getting into it. It&#39;s generally a chatty protocol, but maybe if you just try to define your resources there (and not the resource instances) then it would be OK. I have never used it before, but seems quite comprehensive if you know how to utilize it in your system."},{"owner":{"account_id":4328490,"reputation":1080,"user_id":3534593,"accept_rate":67,"display_name":"coretechie"},"score":0,"creation_date":1658323974,"post_id":73046361,"comment_id":129023417,"body_markdown":"https://www.keycloak.org/docs/9.0/authorization_services/ This says that claims can be dynamically added to the token in Claim Information Point (CIP), CIP is a part of Policy Enforcement Point (PEP). PEP is a (or can be) one of the Keycloak OIDC adapters. You mentioned the PEP pattern above. Are these 2 talking about the same thing? I am confused.","body":"<a href=\"https://www.keycloak.org/docs/9.0/authorization_services/\" rel=\"nofollow noreferrer\">keycloak.org/docs/9.0/authorization_services</a> This says that claims can be dynamically added to the token in Claim Information Point (CIP), CIP is a part of Policy Enforcement Point (PEP). PEP is a (or can be) one of the Keycloak OIDC adapters. You mentioned the PEP pattern above. Are these 2 talking about the same thing? I am confused."},{"owner":{"account_id":3302687,"reputation":3037,"user_id":2778422,"display_name":"zaerymoghaddam"},"score":0,"creation_date":1658397806,"post_id":73046361,"comment_id":129043601,"body_markdown":"Yes, they&#39;re the same thing. Unfortunately as I mentioned, I don&#39;t have experiences in this part of the Keycloak. But I&#39;ll put what I found as an answer, as I would not be read only as a comment.","body":"Yes, they&#39;re the same thing. Unfortunately as I mentioned, I don&#39;t have experiences in this part of the Keycloak. But I&#39;ll put what I found as an answer, as I would not be read only as a comment."},{"owner":{"account_id":4328490,"reputation":1080,"user_id":3534593,"accept_rate":67,"display_name":"coretechie"},"score":0,"creation_date":1658809654,"post_id":73046361,"comment_id":129137329,"body_markdown":"When you say, &quot;Otherwise, you could store those parameters in the authentication session and then access them via KeycloakSession object that would be accessible in your mapper implementation.&quot; Does this also mean that I have to implement my User Storage SPI for accessing authentication sessions? Where do I access it?","body":"When you say, &quot;Otherwise, you could store those parameters in the authentication session and then access them via KeycloakSession object that would be accessible in your mapper implementation.&quot; Does this also mean that I have to implement my User Storage SPI for accessing authentication sessions? Where do I access it?"},{"owner":{"account_id":3302687,"reputation":3037,"user_id":2778422,"display_name":"zaerymoghaddam"},"score":0,"creation_date":1658909921,"post_id":73046361,"comment_id":129166309,"body_markdown":"The KeycloakSession is available almost to all sorts of providers that you can implement and it gives you an access point to call Keycloak APIs. It normally gets passed to the provider factory classes as a constructor parameter. But as I mentioned, I didn&#39;t manage to find a way to access request parameters in authenticators to put in the KeycloakSession.","body":"The KeycloakSession is available almost to all sorts of providers that you can implement and it gives you an access point to call Keycloak APIs. It normally gets passed to the provider factory classes as a constructor parameter. But as I mentioned, I didn&#39;t manage to find a way to access request parameters in authenticators to put in the KeycloakSession."}],"answers":[{"tags":[],"owner":{"account_id":3302687,"reputation":3037,"user_id":2778422,"display_name":"zaerymoghaddam"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658397819,"creation_date":1658397819,"answer_id":73064226,"question_id":73046361,"body_markdown":"Following our discussion in the comments and based on what I can see in the [Keycloak documentation][1], you can setup the Keycloak adapter on your client application to also act as a Policy Enforcer Point, aka. PEP by updating your `keycloak.json` with attributes like this\r\n```json\r\n&quot;policy-enforcer&quot;: {\r\n    &quot;paths&quot;: [\r\n      {\r\n        &quot;path&quot;: &quot;/protected/resource&quot;,\r\n        &quot;claim-information-point&quot;: {\r\n          &quot;claims&quot;: {\r\n            &quot;project_id_claim&quot;: &quot;{request.parameter[&#39;project_id&#39;]}&quot;\r\n          }\r\n        }\r\n      }\r\n    ]\r\n}\r\n```\r\nBy doing so, the Keycloak adapter will send a request to Keycloak authorization server together with the `project_id_claim` to see if current user (that owns the current token) is allowed to access requested URL or not.\r\nI think then you may be able to add a custom policy (e.g. using [JavaScript-Based Policy][2]) to query your db or backend service to see if given user with provided project_id is authorized or not. If that doesn&#39;t work, I guess you should try implementing a custom &quot;PolicyProvider&quot; interface and use that one instead. However I&#39;m not sure how/if it would appear in the UI. \r\n\r\nI should mention that I have never tried this before and these are all based on my experiences on how similar stuff is done the Keycloak and reading their documentation.\r\n\r\n  [1]: https://www.keycloak.org/docs/9.0/authorization_services/\r\n  [2]: https://www.keycloak.org/docs/latest/authorization_services/#_policy_js\r\n  [3]: https://www.keycloak.org/docs/latest/authorization_services/#_policy_regex","title":"Keycloak Custom Claims : Can you add parameters at runtime while querying external database","body":"<p>Following our discussion in the comments and based on what I can see in the <a href=\"https://www.keycloak.org/docs/9.0/authorization_services/\" rel=\"nofollow noreferrer\">Keycloak documentation</a>, you can setup the Keycloak adapter on your client application to also act as a Policy Enforcer Point, aka. PEP by updating your <code>keycloak.json</code> with attributes like this</p>\n<pre class=\"lang-json prettyprint-override\"><code>&quot;policy-enforcer&quot;: {\n    &quot;paths&quot;: [\n      {\n        &quot;path&quot;: &quot;/protected/resource&quot;,\n        &quot;claim-information-point&quot;: {\n          &quot;claims&quot;: {\n            &quot;project_id_claim&quot;: &quot;{request.parameter['project_id']}&quot;\n          }\n        }\n      }\n    ]\n}\n</code></pre>\n<p>By doing so, the Keycloak adapter will send a request to Keycloak authorization server together with the <code>project_id_claim</code> to see if current user (that owns the current token) is allowed to access requested URL or not.\nI think then you may be able to add a custom policy (e.g. using <a href=\"https://www.keycloak.org/docs/latest/authorization_services/#_policy_js\" rel=\"nofollow noreferrer\">JavaScript-Based Policy</a>) to query your db or backend service to see if given user with provided project_id is authorized or not. If that doesn't work, I guess you should try implementing a custom &quot;PolicyProvider&quot; interface and use that one instead. However I'm not sure how/if it would appear in the UI.</p>\n<p>I should mention that I have never tried this before and these are all based on my experiences on how similar stuff is done the Keycloak and reading their documentation.</p>\n"}],"owner":{"account_id":4328490,"reputation":1080,"user_id":3534593,"accept_rate":67,"display_name":"coretechie"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2369,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1658397819,"creation_date":1658294806,"question_id":73046361,"body_markdown":"Purpose: I want to fetch custom claims based on certain fields passed to keycloak custom implementation, which is internal to the application and not present within keycloak. I am working on migrating a legacy application in spring to keycloak for authentication but we want to continue to use the existing application&#39;s authorization. Existing authorization is ABAC based and is heavily dependent on dynamic resources.\r\n\r\nLook at [this][1] solution to create custom mappers and claims. Can I pass some variables before step # 5, so that custom claims are fetched on that variable-based information? I have not yet tried implementing it but assuming that this will be internally called by Keycloak, (I have implemented User Storage SPI so I assumed that). \r\n\r\nEg:\r\n\r\nThe user has a mapping to resource_1, which depends upon which Project (internal to the application and not stored within keycloak) the user belongs to.\r\nSo based on the user as well as its project_id, I want to call the external database and fetch the mapping to the resource.\r\n\r\nChallenge:\r\n\r\n&gt; How and where do I pass the project_id? I cannot store it in keycloak\r\n&gt; because it is dynamic and not static.  Is it even possible?\r\n\r\n\r\nOne more eg,\r\n\r\nSome value that I would like to put in the claim for my situation which can only be transferred via HTTP request, like below, but in Java custom mapper implementation,\r\n\r\n```\r\nhttp://localhost:8080/auth/realms/tsp_openapi/login-actions/authenticate?session_code=_N7IcTaPF3vTtkPtIKQweKyCQRaXyVu2JF-fgcWQd40&amp;execution=8975a242-0d40-4a47-992c-6ea7dd91728e&amp;client_id=pplantoo&amp;tab_id=fXCfFj3BG2c&amp;**project_id=2232123321**\r\n```\r\n  [1]: https://stackoverflow.com/a/63311019/3534593","title":"Keycloak Custom Claims : Can you add parameters at runtime while querying external database","body":"<p>Purpose: I want to fetch custom claims based on certain fields passed to keycloak custom implementation, which is internal to the application and not present within keycloak. I am working on migrating a legacy application in spring to keycloak for authentication but we want to continue to use the existing application's authorization. Existing authorization is ABAC based and is heavily dependent on dynamic resources.</p>\n<p>Look at <a href=\"https://stackoverflow.com/a/63311019/3534593\">this</a> solution to create custom mappers and claims. Can I pass some variables before step # 5, so that custom claims are fetched on that variable-based information? I have not yet tried implementing it but assuming that this will be internally called by Keycloak, (I have implemented User Storage SPI so I assumed that).</p>\n<p>Eg:</p>\n<p>The user has a mapping to resource_1, which depends upon which Project (internal to the application and not stored within keycloak) the user belongs to.\nSo based on the user as well as its project_id, I want to call the external database and fetch the mapping to the resource.</p>\n<p>Challenge:</p>\n<blockquote>\n<p>How and where do I pass the project_id? I cannot store it in keycloak\nbecause it is dynamic and not static.  Is it even possible?</p>\n</blockquote>\n<p>One more eg,</p>\n<p>Some value that I would like to put in the claim for my situation which can only be transferred via HTTP request, like below, but in Java custom mapper implementation,</p>\n<pre><code>http://localhost:8080/auth/realms/tsp_openapi/login-actions/authenticate?session_code=_N7IcTaPF3vTtkPtIKQweKyCQRaXyVu2JF-fgcWQd40&amp;execution=8975a242-0d40-4a47-992c-6ea7dd91728e&amp;client_id=pplantoo&amp;tab_id=fXCfFj3BG2c&amp;**project_id=2232123321**\n</code></pre>\n"},{"tags":["java","android","kotlin"],"comments":[{"owner":{"account_id":111736,"reputation":11811,"user_id":295004,"display_name":"Morrison Chang"},"score":1,"creation_date":1648200997,"post_id":71614464,"comment_id":126569476,"body_markdown":"1) Which low end devices  2) What is their [Performance class](https://developer.android.com/topic/performance/performance-class) 3) What is the [Operating Mode](https://developer.android.com/training/camerax/analyze#operating-modes)","body":"1) Which low end devices  2) What is their <a href=\"https://developer.android.com/topic/performance/performance-class\" rel=\"nofollow noreferrer\">Performance class</a> 3) What is the <a href=\"https://developer.android.com/training/camerax/analyze#operating-modes\" rel=\"nofollow noreferrer\">Operating Mode</a>"},{"owner":{"account_id":24663349,"reputation":43,"user_id":18559348,"display_name":"GeorgeRaspberry"},"score":0,"creation_date":1648204330,"post_id":71614464,"comment_id":126570600,"body_markdown":"@MorrisonChang\n1) Unknown Chinese manufacturer, phone is from the 120$ price range\n2) Could not retrieve it, phone has Android 10 on it...\n3) Operating mode is: `ImageAnalysis.STRATEGY_KEEP_ONLY_LATEST`","body":"@MorrisonChang 1) Unknown Chinese manufacturer, phone is from the 120$ price range 2) Could not retrieve it, phone has Android 10 on it... 3) Operating mode is: <code>ImageAnalysis.STRATEGY_KEEP_ONLY_LATEST</code>"},{"owner":{"account_id":24663349,"reputation":43,"user_id":18559348,"display_name":"GeorgeRaspberry"},"score":0,"creation_date":1649320498,"post_id":71614464,"comment_id":126847285,"body_markdown":"@MorrisonChang\nJust tested this out on a Xiaomi Redmi Note 10 Pro (high-end device) and the same thing happened, same type of images occured. I am going to try and test different YUV formats, I was using only Nv21 until now.","body":"@MorrisonChang Just tested this out on a Xiaomi Redmi Note 10 Pro (high-end device) and the same thing happened, same type of images occured. I am going to try and test different YUV formats, I was using only Nv21 until now."},{"owner":{"account_id":7380874,"reputation":177,"user_id":5617627,"display_name":"wol"},"score":0,"creation_date":1653551428,"post_id":71614464,"comment_id":127880797,"body_markdown":"Does anyone has answer on this? I am facing exactly same situation. it was working until now but suddenly stopped working on device and emulator too. after couple of rebuilds emulator started working again but android device gives same output as for OP. I own Xiaomi mi A2 Lite","body":"Does anyone has answer on this? I am facing exactly same situation. it was working until now but suddenly stopped working on device and emulator too. after couple of rebuilds emulator started working again but android device gives same output as for OP. I own Xiaomi mi A2 Lite"}],"owner":{"account_id":24663349,"reputation":43,"user_id":18559348,"display_name":"GeorgeRaspberry"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":223,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":0,"score":3,"last_activity_date":1658397647,"creation_date":1648199367,"question_id":71614464,"body_markdown":"While using the `analyze()` function in `ImageAnalysis.Analyzer` class to retrieve a picture and operate on it (do something with it), I am encountering different behavior on different Android devices. The same code, when run on a solid Samsung device returns a regular picture that I can use. But when run on a lower-end android device, it does not.\r\n\r\nThe analyze code:\r\n\r\n```\r\n    private class NAnalyzer implements ImageAnalysis.Analyzer {\r\n\r\n        @Override\r\n        public void analyze(@NonNull ImageProxy image) {\r\n            time = System.nanoTime();\r\n\r\n            ImageProxy.PlaneProxy[] planes = image.getPlanes();\r\n\r\n            ByteBuffer yBuffer = planes[0].getBuffer(); //Y\r\n            ByteBuffer uBuffer = planes[1].getBuffer(); //U\r\n            ByteBuffer vBuffer = planes[2].getBuffer(); //V\r\n\r\n            int ySize = yBuffer.remaining();\r\n            int uSize = uBuffer.remaining();\r\n            int vSize = vBuffer.remaining();\r\n\r\n            byte[] nv21 = new byte[(ySize + uSize + vSize)];\r\n\r\n            yBuffer.get(nv21, 0, ySize);\r\n            vBuffer.get(nv21, ySize, vSize);\r\n            uBuffer.get(nv21, ySize + vSize, uSize);\r\n\r\n            YuvImage yuvImage = new YuvImage(nv21, ImageFormat.NV21, image.getWidth(), image.getHeight(), null);\r\n            ByteArrayOutputStream stream = new ByteArrayOutputStream();\r\n            yuvImage.compressToJpeg(new Rect(0,0, yuvImage.getWidth(), yuvImage.getHeight()), 100, stream);\r\n\r\n            byte[] imageBytes = stream.toByteArray();\r\n            \r\n            //raw = data container\r\n            raw = imageBytes;\r\n            \r\n            //nRunnable - operates the picture\r\n            nRunnable.run();\r\n            image.close();\r\n        }\r\n    }\r\n```\r\n\r\n[The low-end picture can be found here][1]\r\n\r\nI assume that this is a hardware issue, but if anyone knows otherwise I would appreciate the help.\r\n\r\n  [1]: https://i.stack.imgur.com/J8pFR.jpg","title":"Image.Analyzer gives out unclear picture from camera on certain devices","body":"<p>While using the <code>analyze()</code> function in <code>ImageAnalysis.Analyzer</code> class to retrieve a picture and operate on it (do something with it), I am encountering different behavior on different Android devices. The same code, when run on a solid Samsung device returns a regular picture that I can use. But when run on a lower-end android device, it does not.</p>\n<p>The analyze code:</p>\n<pre><code>    private class NAnalyzer implements ImageAnalysis.Analyzer {\n\n        @Override\n        public void analyze(@NonNull ImageProxy image) {\n            time = System.nanoTime();\n\n            ImageProxy.PlaneProxy[] planes = image.getPlanes();\n\n            ByteBuffer yBuffer = planes[0].getBuffer(); //Y\n            ByteBuffer uBuffer = planes[1].getBuffer(); //U\n            ByteBuffer vBuffer = planes[2].getBuffer(); //V\n\n            int ySize = yBuffer.remaining();\n            int uSize = uBuffer.remaining();\n            int vSize = vBuffer.remaining();\n\n            byte[] nv21 = new byte[(ySize + uSize + vSize)];\n\n            yBuffer.get(nv21, 0, ySize);\n            vBuffer.get(nv21, ySize, vSize);\n            uBuffer.get(nv21, ySize + vSize, uSize);\n\n            YuvImage yuvImage = new YuvImage(nv21, ImageFormat.NV21, image.getWidth(), image.getHeight(), null);\n            ByteArrayOutputStream stream = new ByteArrayOutputStream();\n            yuvImage.compressToJpeg(new Rect(0,0, yuvImage.getWidth(), yuvImage.getHeight()), 100, stream);\n\n            byte[] imageBytes = stream.toByteArray();\n            \n            //raw = data container\n            raw = imageBytes;\n            \n            //nRunnable - operates the picture\n            nRunnable.run();\n            image.close();\n        }\n    }\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/J8pFR.jpg\" rel=\"nofollow noreferrer\">The low-end picture can be found here</a></p>\n<p>I assume that this is a hardware issue, but if anyone knows otherwise I would appreciate the help.</p>\n"},{"tags":["java","spring-boot","junit","spring-security"],"answers":[{"tags":[],"owner":{"account_id":16826591,"reputation":89,"user_id":12165732,"display_name":"Timo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658397141,"creation_date":1658397141,"answer_id":73064075,"question_id":73061414,"body_markdown":"You have already the headers in the `headers` variable. Here you can set your authorization header:\r\n`headers.setBasicAuth(&quot;admin&quot;, &quot;admin&quot;);`","title":"Spring boot Junit with spring security Authentication","body":"<p>You have already the headers in the <code>headers</code> variable. Here you can set your authorization header:\n<code>headers.setBasicAuth(&quot;admin&quot;, &quot;admin&quot;);</code></p>\n"}],"owner":{"account_id":5883650,"reputation":570,"user_id":4632306,"accept_rate":60,"display_name":"Srinath Murugula"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":116,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1658397141,"creation_date":1658383622,"question_id":73061414,"body_markdown":"Below is my code for junit test\r\n\r\n    \r\n      MvcResult mvcResult = (MvcResult) mvc.perform(MockMvcRequestBuilders.put(uri).headers(headers)\r\n\t\t\t\t.contentType(MediaType.APPLICATION_JSON).content(json)).andReturn();\r\n\r\nand I need to include authentication in the above code. username is &#39;admin&#39; and password is also &#39;admin&#39;.\r\n\r\nHow to do it? Please help me.\r\n","title":"Spring boot Junit with spring security Authentication","body":"<p>Below is my code for junit test</p>\n<pre><code>  MvcResult mvcResult = (MvcResult) mvc.perform(MockMvcRequestBuilders.put(uri).headers(headers)\n            .contentType(MediaType.APPLICATION_JSON).content(json)).andReturn();\n</code></pre>\n<p>and I need to include authentication in the above code. username is 'admin' and password is also 'admin'.</p>\n<p>How to do it? Please help me.</p>\n"},{"tags":["javascript","java","html","function","jsp"],"comments":[{"owner":{"account_id":17138137,"reputation":8143,"user_id":12402732,"display_name":"Simone Rossaini"},"score":0,"creation_date":1658396524,"post_id":73063829,"comment_id":129043056,"body_markdown":"`Java !== Javascript` (delete tag)","body":"<code>Java !== Javascript</code> (delete tag)"},{"owner":{"account_id":17138137,"reputation":8143,"user_id":12402732,"display_name":"Simone Rossaini"},"score":0,"creation_date":1658396567,"post_id":73063829,"comment_id":129043082,"body_markdown":"Use use `user.value` instead use `username.value`","body":"Use use <code>user.value</code> instead use <code>username.value</code>"}],"answers":[{"tags":[],"owner":{"account_id":19053511,"reputation":1,"user_id":13911184,"display_name":"RUPIN BHUGRA"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658396916,"creation_date":1658396916,"answer_id":73064032,"question_id":73063829,"body_markdown":"specify # before id name with querySelectorAll as its an id.\r\n\r\n    var list = document.querySelectorAll(&quot;#list&quot;);\r\n\r\nAnd add break when it find a match, as it is again setting green, after matching the next option.\r\n\r\n    if (list[i].value === user.value) {\r\n        alert.style.color = &#39;red&#39;;\r\n        break;\r\n    }\r\n","title":"Select option tag call in javascript function","body":"<p>specify # before id name with querySelectorAll as its an id.</p>\n<pre><code>var list = document.querySelectorAll(&quot;#list&quot;);\n</code></pre>\n<p>And add break when it find a match, as it is again setting green, after matching the next option.</p>\n<pre><code>if (list[i].value === user.value) {\n    alert.style.color = 'red';\n    break;\n}\n</code></pre>\n"}],"owner":{"account_id":25788051,"reputation":1,"user_id":19532534,"display_name":"Giuseppe_Baro"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1658396916,"creation_date":1658395987,"question_id":73063829,"body_markdown":"good morning everyone. I have this form in which there is this select tag and the various input fields.\r\n\r\n    &lt;form class=&quot;membership-form webform&quot; name=&quot;CreaUtente&quot;\r\n    \t\t\t\t\t\taction=&quot;CreaUtente&quot; onsubmit=&quot;document.required()&quot; method=&quot;post&quot;\r\n    \t\t\t\t\t\trole=&quot;form&quot;&gt;\r\n    \t\t\t\t\t\t&lt;!-- VALORI UTENTE --&gt;\r\n    \t\t\t\t\t\t&lt;h6 class=&quot;modal-title&quot; id=&quot;membershipFormLabel&quot;&gt;Dati utente&lt;/h6&gt;\r\n    \t\t\t\t\t\t&lt;select name=&quot;select&quot; class=&quot;form-control&quot; hidden required&gt;\r\n    \t\t\t\t\t\t\t&lt;%\r\n    \t\t\t\t\t\t\tfor (int j = 0; j &lt; utenti.size(); j++) {\r\n    \t\t\t\t\t\t\t%&gt;\r\n    \t\t\t\t\t\t\t&lt;option id=&quot;list&quot;&gt;\r\n    \t\t\t\t\t\t\t\t&lt;%=utenti.elementAt(j).getUsername().toString()%&gt;\r\n    \t\t\t\t\t\t\t&lt;/option&gt;\r\n    \t\t\t\t\t\t\t&lt;%\r\n    \t\t\t\t\t\t\t}\r\n    \t\t\t\t\t\t\t%&gt;\r\n    \t\t\t\t\t\t&lt;/select&gt;\r\n    \t\t\t\t\t\t&lt;input type=&quot;text&quot; class=&quot;form-control&quot; name=&quot;nome&quot;\r\n    \t\t\t\t\t\t\tplaceholder=&quot;Nome&quot; required&gt; &lt;input type=&quot;text&quot;\r\n    \t\t\t\t\t\t\tclass=&quot;form-control&quot; name=&quot;cognome&quot; placeholder=&quot;Cognome&quot;\r\n    \t\t\t\t\t\t\trequired&gt; &lt;input type=&quot;text&quot; class=&quot;form-control&quot;\r\n    \t\t\t\t\t\t\tname=&quot;email&quot; placeholder=&quot;email&quot;&gt; &lt;input type=&quot;date&quot;\r\n    \t\t\t\t\t\t\tclass=&quot;form-control&quot; name=&quot;data&quot; placeholder=&quot;data di nascita&quot;\r\n    \t\t\t\t\t\t\trequired&gt; \r\n    \t\t\t\t\t\t\t\r\n    \t\t\t\t\t\t\t&lt;input type=&quot;text&quot; class=&quot;form-control&quot;\r\n    \t\t\t\t\t\t\tname=&quot;username&quot; id=&quot;user&quot; onkeyup=&quot;return Control()&quot; placeholder=&quot;codice fiscale&quot; required&gt; \r\n    \t\t\t\t\t\t\t&lt;p id=&quot;alert&quot;&gt;warning&lt;/p&gt;\r\n    \t\t\t\t\t\t\t\r\n    \t\t\t\t\t\t\t&lt;input\r\n    \t\t\t\t\t\t\ttype=&quot;password&quot; class=&quot;form-control&quot; name=&quot;password&quot;\r\n    \t\t\t\t\t\t\tplaceholder=&quot;Password&quot; required&gt;&lt;input type=&quot;text&quot;\r\n    \t\t\t\t\t\t\tclass=&quot;form-control&quot; name=&quot;numero&quot;\r\n    \t\t\t\t\t\t\tplaceholder=&quot;numero di telefono&quot;&gt;\r\n    \r\n    \t\t\t\t\t\t&lt;button type=&quot;submit&quot; class=&quot;form-control&quot; id=&quot;submit-button&quot;\r\n    \t\t\t\t\t\t\tname=&quot;Accedi&quot;\r\n    \t\t\t\t\t\t\tstyle=&quot;background-color: #343a40 !important; color: white !important&quot;&gt;Crea&lt;/button&gt;\r\n    \t\t\t\t\t&lt;/form&gt;` \r\n\r\nI would like to make a function in javascript to check that the value I write in the &quot;username&quot; field is not already present in the select tag. How could I do? I tried this but it doesn&#39;t work. \r\n\r\n    `function Control(){\r\n    \t\tvar username = document.getElementById(&quot;user&quot;);\r\n    \t\tvar list = document.querySelectorAll(&quot;list&quot;);\r\n    \t\tvar alert = document.getElementById(&quot;alert&quot;)\r\n    \t\t\r\n    \t\tfor(let i=0; i &lt; list.length; i++){\r\n    \t\t\tif(list[i].value === user.value){\r\n    \t\t\t\t\r\n    \t\t\t\talert.style.color=&#39;red&#39;;\r\n    \t\t\t}\r\n    \t\t\telse{\r\n    \t\t\t\t\r\n    \t\t\t\talert.style.color=&#39;green&#39;;\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}`","title":"Select option tag call in javascript function","body":"<p>good morning everyone. I have this form in which there is this select tag and the various input fields.</p>\n<pre><code>&lt;form class=&quot;membership-form webform&quot; name=&quot;CreaUtente&quot;\n                        action=&quot;CreaUtente&quot; onsubmit=&quot;document.required()&quot; method=&quot;post&quot;\n                        role=&quot;form&quot;&gt;\n                        &lt;!-- VALORI UTENTE --&gt;\n                        &lt;h6 class=&quot;modal-title&quot; id=&quot;membershipFormLabel&quot;&gt;Dati utente&lt;/h6&gt;\n                        &lt;select name=&quot;select&quot; class=&quot;form-control&quot; hidden required&gt;\n                            &lt;%\n                            for (int j = 0; j &lt; utenti.size(); j++) {\n                            %&gt;\n                            &lt;option id=&quot;list&quot;&gt;\n                                &lt;%=utenti.elementAt(j).getUsername().toString()%&gt;\n                            &lt;/option&gt;\n                            &lt;%\n                            }\n                            %&gt;\n                        &lt;/select&gt;\n                        &lt;input type=&quot;text&quot; class=&quot;form-control&quot; name=&quot;nome&quot;\n                            placeholder=&quot;Nome&quot; required&gt; &lt;input type=&quot;text&quot;\n                            class=&quot;form-control&quot; name=&quot;cognome&quot; placeholder=&quot;Cognome&quot;\n                            required&gt; &lt;input type=&quot;text&quot; class=&quot;form-control&quot;\n                            name=&quot;email&quot; placeholder=&quot;email&quot;&gt; &lt;input type=&quot;date&quot;\n                            class=&quot;form-control&quot; name=&quot;data&quot; placeholder=&quot;data di nascita&quot;\n                            required&gt; \n                            \n                            &lt;input type=&quot;text&quot; class=&quot;form-control&quot;\n                            name=&quot;username&quot; id=&quot;user&quot; onkeyup=&quot;return Control()&quot; placeholder=&quot;codice fiscale&quot; required&gt; \n                            &lt;p id=&quot;alert&quot;&gt;warning&lt;/p&gt;\n                            \n                            &lt;input\n                            type=&quot;password&quot; class=&quot;form-control&quot; name=&quot;password&quot;\n                            placeholder=&quot;Password&quot; required&gt;&lt;input type=&quot;text&quot;\n                            class=&quot;form-control&quot; name=&quot;numero&quot;\n                            placeholder=&quot;numero di telefono&quot;&gt;\n\n                        &lt;button type=&quot;submit&quot; class=&quot;form-control&quot; id=&quot;submit-button&quot;\n                            name=&quot;Accedi&quot;\n                            style=&quot;background-color: #343a40 !important; color: white !important&quot;&gt;Crea&lt;/button&gt;\n                    &lt;/form&gt;` \n</code></pre>\n<p>I would like to make a function in javascript to check that the value I write in the &quot;username&quot; field is not already present in the select tag. How could I do? I tried this but it doesn't work.</p>\n<pre><code>`function Control(){\n        var username = document.getElementById(&quot;user&quot;);\n        var list = document.querySelectorAll(&quot;list&quot;);\n        var alert = document.getElementById(&quot;alert&quot;)\n        \n        for(let i=0; i &lt; list.length; i++){\n            if(list[i].value === user.value){\n                \n                alert.style.color='red';\n            }\n            else{\n                \n                alert.style.color='green';\n            }\n        }\n    }`\n</code></pre>\n"},{"tags":["java","android","methods","compiler-errors"],"comments":[{"owner":{"account_id":19254723,"reputation":2061,"user_id":14071914,"display_name":"JustAnotherDeveloper"},"score":2,"creation_date":1658247537,"post_id":73040375,"comment_id":129002264,"body_markdown":"I don&#39;t see those methods implemented in the `Oval` class you posted. The only method you have posted is the `main()` method.","body":"I don&#39;t see those methods implemented in the <code>Oval</code> class you posted. The only method you have posted is the <code>main()</code> method."},{"owner":{"account_id":18967205,"reputation":1,"user_id":13841489,"display_name":"bruh"},"score":0,"creation_date":1658247591,"post_id":73040375,"comment_id":129002285,"body_markdown":"Sorry im new what do you mean by that?","body":"Sorry im new what do you mean by that?"},{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":1,"creation_date":1658247645,"post_id":73040375,"comment_id":129002306,"body_markdown":"@bruh those method don&#39;t work because you have to define them yourself, they are not automatically generated by the compiler.","body":"@bruh those method don&#39;t work because you have to define them yourself, they are not automatically generated by the compiler."},{"owner":{"account_id":19254723,"reputation":2061,"user_id":14071914,"display_name":"JustAnotherDeveloper"},"score":2,"creation_date":1658247691,"post_id":73040375,"comment_id":129002328,"body_markdown":"I mean that you need to code those methods yourself, and you haven&#39;t done it as far as we can see. You really need to learn the basics of the language if you didn&#39;t know this, I suggest you read this before you keep writing code: https://docs.oracle.com/javase/tutorial/java/index.html. And also this: https://docs.oracle.com/javase/tutorial/java/javaOO/methods.html","body":"I mean that you need to code those methods yourself, and you haven&#39;t done it as far as we can see. You really need to learn the basics of the language if you didn&#39;t know this, I suggest you read this before you keep writing code: <a href=\"https://docs.oracle.com/javase/tutorial/java/index.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/tutorial/java/index.html</a>. And also this: <a href=\"https://docs.oracle.com/javase/tutorial/java/javaOO/methods.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/tutorial/java/javaOO/methods.html</a>"}],"answers":[{"tags":[],"owner":{"account_id":25846019,"reputation":56,"user_id":19580863,"display_name":"Filotimo"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1658396597,"creation_date":1658260577,"answer_id":73042800,"question_id":73040375,"body_markdown":"It seems that you need to create separate methods for the actual get/set methods, as you only have the main method. Perhaps you can do something outside of the main method, like this:\r\n\r\n    public double getLength(){\r\n      return length;\r\n    }\r\n    public void setLength(double length){\r\n      this.length = length;\r\n    }\r\n    \r\n    public double getWidth(){\r\n      return width;\r\n    }\r\n    public void setLength(double width){\r\n      this.width = width;\r\n    }\r\n","title":"Why does my setLength/getLength and setWidth/getWidth not work","body":"<p>It seems that you need to create separate methods for the actual get/set methods, as you only have the main method. Perhaps you can do something outside of the main method, like this:</p>\n<pre><code>public double getLength(){\n  return length;\n}\npublic void setLength(double length){\n  this.length = length;\n}\n\npublic double getWidth(){\n  return width;\n}\npublic void setLength(double width){\n  this.width = width;\n}\n</code></pre>\n"}],"owner":{"account_id":18967205,"reputation":1,"user_id":13841489,"display_name":"bruh"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":116,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":1,"score":-2,"last_activity_date":1658396597,"creation_date":1658247442,"question_id":73040375,"body_markdown":"My setLength/getLength and setWidth/getWidth do not work. Apparently it&#39;s because it cannot find the symbol but I do not know what it means by this.\r\n\r\nI tried everything it just seems not to work no matter how hard I try\r\n\r\n        package practice;\r\n    \r\n    import java.util.Scanner;\r\n    \r\n    public class Oval {\r\n    \r\n      private double width;\r\n      private double length;\r\n    \r\n      public static void main(String[] args) {\r\n    \r\n      Oval oval = new Oval();\r\n      oval.setLength(102.13);\r\n      System.out.println(&quot;the circle&#39;s length is: &quot; + oval.getLength());\r\n    \r\n      oval.setWidth(211.02);\r\n      System.out.printf(&quot;The circle&#39;s width is: &quot; + oval.getWidth());\r\n    \r\n      String str = &quot;Given the length %, .4f and the width %, .4f,\\n\\t &quot; + &quot;the circle&#39;s     area is %,.4f sq.ft\\n&quot;;\r\n      System.out.printf(str, oval.getLength(), oval.getWidth, oval.getArea());\r\n      }\r\n    }","title":"Why does my setLength/getLength and setWidth/getWidth not work","body":"<p>My setLength/getLength and setWidth/getWidth do not work. Apparently it's because it cannot find the symbol but I do not know what it means by this.</p>\n<p>I tried everything it just seems not to work no matter how hard I try</p>\n<pre><code>    package practice;\n\nimport java.util.Scanner;\n\npublic class Oval {\n\n  private double width;\n  private double length;\n\n  public static void main(String[] args) {\n\n  Oval oval = new Oval();\n  oval.setLength(102.13);\n  System.out.println(&quot;the circle's length is: &quot; + oval.getLength());\n\n  oval.setWidth(211.02);\n  System.out.printf(&quot;The circle's width is: &quot; + oval.getWidth());\n\n  String str = &quot;Given the length %, .4f and the width %, .4f,\\n\\t &quot; + &quot;the circle's     area is %,.4f sq.ft\\n&quot;;\n  System.out.printf(str, oval.getLength(), oval.getWidth, oval.getArea());\n  }\n}\n</code></pre>\n"},{"tags":["java","maven","lavaplayer"],"comments":[{"owner":{"account_id":14719989,"reputation":5877,"user_id":10630900,"display_name":"Minn"},"score":0,"creation_date":1658347609,"post_id":73057162,"comment_id":129032289,"body_markdown":"The version is 1.3.77 or 1.3.78, not 1.3.7","body":"The version is 1.3.77 or 1.3.78, not 1.3.7"},{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1658348776,"post_id":73057162,"comment_id":129032599,"body_markdown":"The given repository `https://m2.dv8tion.net/releases` seemed to only accessible via credentials... do you have them?","body":"The given repository <code>https:&#47;&#47;m2.dv8tion.net&#47;releases</code> seemed to only accessible via credentials... do you have them?"},{"owner":{"account_id":22656947,"reputation":83,"user_id":16830698,"display_name":"TomSmail"},"score":0,"creation_date":1658392581,"post_id":73057162,"comment_id":129041440,"body_markdown":"changing  to 1.3.77 sadly still has the same issue, but thank you for the suggestion. I was confused as to why that link showed a &quot;NoSuchKey&quot; code. I will try and workout how to get credentials for it. Thanks!","body":"changing  to 1.3.77 sadly still has the same issue, but thank you for the suggestion. I was confused as to why that link showed a &quot;NoSuchKey&quot; code. I will try and workout how to get credentials for it. Thanks!"}],"owner":{"account_id":22656947,"reputation":83,"user_id":16830698,"display_name":"TomSmail"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":359,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1658396564,"creation_date":1658345121,"question_id":73057162,"body_markdown":"I am trying to import lavaplayer in my Maven pom.xml file. The issue is that there seems to be an error with importing it. \r\n```\r\n&lt;repositories&gt;\r\n    &lt;repository&gt;\r\n        &lt;id&gt;dv8tion&lt;/id&gt;\r\n        &lt;name&gt;m2-dv8tion&lt;/name&gt;\r\n        &lt;url&gt;https://m2.dv8tion.net/releases&lt;/url&gt;\r\n    &lt;/repository&gt;\r\n&lt;/repositories&gt;\r\n\r\n&lt;dependencies&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;net.dv8tion&lt;/groupId&gt;\r\n        &lt;artifactId&gt;JDA&lt;/artifactId&gt;\r\n        &lt;version&gt;5.0.0-alpha.12&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;com.sedmelluq&lt;/groupId&gt;\r\n        &lt;artifactId&gt;lavaplayer&lt;/artifactId&gt;\r\n        &lt;version&gt;1.3.7&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n&lt;/dependencies&gt;\r\n```\r\nThe second import in dependencies is red, the error being that the library is not found. What could I bed doing wrong?","title":"Lavaplayer &quot;dependency not found&quot;","body":"<p>I am trying to import lavaplayer in my Maven pom.xml file. The issue is that there seems to be an error with importing it.</p>\n<pre><code>&lt;repositories&gt;\n    &lt;repository&gt;\n        &lt;id&gt;dv8tion&lt;/id&gt;\n        &lt;name&gt;m2-dv8tion&lt;/name&gt;\n        &lt;url&gt;https://m2.dv8tion.net/releases&lt;/url&gt;\n    &lt;/repository&gt;\n&lt;/repositories&gt;\n\n&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;net.dv8tion&lt;/groupId&gt;\n        &lt;artifactId&gt;JDA&lt;/artifactId&gt;\n        &lt;version&gt;5.0.0-alpha.12&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.sedmelluq&lt;/groupId&gt;\n        &lt;artifactId&gt;lavaplayer&lt;/artifactId&gt;\n        &lt;version&gt;1.3.7&lt;/version&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre>\n<p>The second import in dependencies is red, the error being that the library is not found. What could I bed doing wrong?</p>\n"},{"tags":["java","spring","spring-boot","maven"],"comments":[{"owner":{"account_id":8354266,"reputation":355,"user_id":6275189,"display_name":"nkengbeza"},"score":0,"creation_date":1615553461,"post_id":66600210,"comment_id":117732934,"body_markdown":"Can you post a snippet of the class containing your main method?","body":"Can you post a snippet of the class containing your main method?"},{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1615554098,"post_id":66600210,"comment_id":117733194,"body_markdown":"First which Java version do you use?","body":"First which Java version do you use?"},{"owner":{"account_id":1136217,"reputation":14336,"user_id":1121249,"accept_rate":86,"display_name":"rkosegi"},"score":0,"creation_date":1615554429,"post_id":66600210,"comment_id":117733350,"body_markdown":"Does this answer your question? [How to fix java.lang.UnsupportedClassVersionError: Unsupported major.minor version](https://stackoverflow.com/questions/10382929/how-to-fix-java-lang-unsupportedclassversionerror-unsupported-major-minor-versi)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/10382929/how-to-fix-java-lang-unsupportedclassversionerror-unsupported-major-minor-versi\">How to fix java.lang.UnsupportedClassVersionError: Unsupported major.minor version</a>"}],"answers":[{"tags":[],"owner":{"account_id":2835239,"reputation":1221,"user_id":2435969,"accept_rate":7,"display_name":"Prabhat Yadav"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1631010842,"creation_date":1631010842,"answer_id":69086608,"question_id":66600210,"body_markdown":" As per shared code snippt you  re doing two thing worng with @SpringBootApplication annotation .\r\n  1.  you are **not** using     **@SpringBootApplication** on the main method class(**DemoApplication.java**). so add the @SpringBootApplication annotation on the class DemoApplication.java\r\n  2. you are using **@SpringBootApplication** on the Test Class(**DemoApplicationTests**) with @SpringbootTest so remove the @SpringBootApplication from the DemoApplicationTests.java.","title":"IllegalState Failed to load ApplicationCon","body":"<p>As per shared code snippt you  re doing two thing worng with @SpringBootApplication annotation .</p>\n<ol>\n<li>you are <strong>not</strong> using     <strong>@SpringBootApplication</strong> on the main method class(<strong>DemoApplication.java</strong>). so add the @SpringBootApplication annotation on the class DemoApplication.java</li>\n<li>you are using <strong>@SpringBootApplication</strong> on the Test Class(<strong>DemoApplicationTests</strong>) with @SpringbootTest so remove the @SpringBootApplication from the DemoApplicationTests.java.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":9274442,"reputation":546,"user_id":6887485,"display_name":"Hargun Singh"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1658396409,"creation_date":1658396409,"answer_id":73063936,"question_id":66600210,"body_markdown":"If you are new and not using testing, remove\r\n\r\n    @Test\r\n    void contextLoads() {\r\n    }\r\nfrom the test file. This solved the issue for me.\r\n\r\n**Note:** This is not a solution but a workaround for new users not using testing.","title":"IllegalState Failed to load ApplicationCon","body":"<p>If you are new and not using testing, remove</p>\n<pre><code>@Test\nvoid contextLoads() {\n}\n</code></pre>\n<p>from the test file. This solved the issue for me.</p>\n<p><strong>Note:</strong> This is not a solution but a workaround for new users not using testing.</p>\n"}],"owner":{"account_id":20937815,"reputation":547,"user_id":15382624,"display_name":"ibrahim koz"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10496,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":2,"score":4,"last_activity_date":1658396409,"creation_date":1615553241,"question_id":66600210,"body_markdown":"I am getting my feet wet for 2 or 3 days in backend. I decided to go with Spring but I encounter the following error when I try to get build using the command line &quot;mvn package&quot;:\r\n\r\n```\r\n[ERROR] Tests run: 1, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 4.393 s &lt;&lt;&lt; FAILURE! - in com.example.demo.DemoApplicationTests\r\n[ERROR] contextLoads  Time elapsed: 0.001 s  &lt;&lt;&lt; ERROR!\r\njava.lang.IllegalStateException: Failed to load ApplicationContext\r\nCaused by: org.springframework.beans.factory.BeanDefinitionStoreException: Failed to read candidate component class: file [C:\\dev\\demo\\target\\classes\r\n\\com\\example\\demo\\DemoApplication.class]; nested exception is org.springframework.beans.factory.CannotLoadBeanClassException: Error loading class [co\r\nm.example.demo.DemoApplication] for bean with name &#39;demoApplication&#39; defined in file [C:\\dev\\demo\\target\\classes\\com\\example\\demo\\DemoApplication.cla\r\nss]: problem with class file or dependent class; nested exception is java.lang.UnsupportedClassVersionError: com/example/demo/DemoApplication has bee\r\nn compiled by a more recent version of the Java Runtime (class file version 55.0), this version of the Java Runtime only recognizes class file versio\r\nns up to 52.0\r\nCaused by: org.springframework.beans.factory.CannotLoadBeanClassException: Error loading class [com.example.demo.DemoApplication] for bean with name\r\n&#39;demoApplication&#39; defined in file [C:\\dev\\demo\\target\\classes\\com\\example\\demo\\DemoApplication.class]: problem with class file or dependent class; ne\r\nsted exception is java.lang.UnsupportedClassVersionError: com/example/demo/DemoApplication has been compiled by a more recent version of the Java Run\r\ntime (class file version 55.0), this version of the Java Runtime only recognizes class file versions up to 52.0\r\nCaused by: java.lang.UnsupportedClassVersionError: com/example/demo/DemoApplication has been compiled by a more recent version of the Java Runtime (c\r\nlass file version 55.0), this version of the Java Runtime only recognizes class file versions up to 52.0\r\n[INFO]\r\n[INFO] Results:\r\n[INFO]\r\n[ERROR] Errors: \r\n[ERROR]   DemoApplicationTests.contextLoads &#187; IllegalState Failed to load ApplicationCon...\r\n[INFO]\r\n[ERROR] Tests run: 1, Failures: 0, Errors: 1, Skipped: 0\r\n[INFO]\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] BUILD FAILURE\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] Total time:  11.347 s\r\n[INFO] Finished at: 2021-03-12T15:19:33+03:00\r\n[INFO] ------------------------------------------------------------------------\r\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:2.22.2:test (default-test) on project demo: There are test failures.\r\n[ERROR]\r\n[ERROR] Please refer to C:\\dev\\demo\\target\\surefire-reports for the individual test results.\r\n[ERROR] Please refer to dump files (if any exist) [date].dump, [date]-jvmRun[N].dump and [date].dumpstream.\r\n[ERROR] -&gt; [Help 1]\r\n[ERROR]\r\n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\r\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\r\n[ERROR]\r\n[ERROR] For more information about the errors and possible solutions, please read the following articles:\r\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException**\r\n\r\n```\r\nDemoApplication.java seems as below:\r\n```\r\npackage com.example.demo;\r\n\r\nimport org.springframework.boot.*;\r\nimport org.springframework.boot.autoconfigure.*;\r\nimport org.springframework.web.bind.annotation.*;\r\n\r\n@RestController\r\n@EnableAutoConfiguration\r\npublic class DemoApplication {\r\n\r\n    @RequestMapping(&quot;/&quot;)\r\n    String home() {\r\n        return &quot;Hello World!&quot;;\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        SpringApplication.run(DemoApplication.class, args);\r\n    }\r\n\r\n}\r\n```\r\n\r\nDemoApplicationTests.java seems as below:\r\n```\r\npackage com.example.demo;\r\n\r\nimport org.junit.jupiter.api.Test;\r\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\r\nimport org.springframework.boot.test.context.SpringBootTest;\r\nimport org.springframework.test.context.ContextConfiguration;\r\n\r\n@SpringBootTest\r\n@SpringBootApplication\r\nclass DemoApplicationTests {\r\n\r\n    @Test\r\n    void contextLoads() {\r\n    }\r\n\r\n}\r\n```\r\n\r\nAnd this is my pom.xml file.\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    &lt;parent&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n        &lt;version&gt;2.4.3&lt;/version&gt;\r\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n    &lt;/parent&gt;\r\n    &lt;groupId&gt;com.example&lt;/groupId&gt;\r\n    &lt;artifactId&gt;demo&lt;/artifactId&gt;\r\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n    &lt;name&gt;demo&lt;/name&gt;\r\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n    &lt;properties&gt;\r\n        &lt;java.version&gt;1.6&lt;/java.version&gt;\r\n    &lt;/properties&gt;\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n            &lt;scope&gt;runtime&lt;/scope&gt;\r\n            &lt;optional&gt;true&lt;/optional&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;2.4.3&lt;/version&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n&lt;/project&gt;\r\n\r\n```\r\nAnd the project directory is as seen below:\r\n```\r\nC:.\r\n├───.idea\r\n│   ├───codeStyles\r\n│   └───libraries\r\n├───.mvn\r\n│   └───wrapper\r\n├───src\r\n│   ├───main\r\n│   │   ├───java\r\n│   │   │   └───com\r\n│   │   │       └───example\r\n│   │   │           └───demo\r\n│   │   └───resources\r\n│   └───test\r\n│       └───java\r\n│           └───com\r\n│               └───example\r\n│                   └───demo\r\n└───target\r\n    ├───classes\r\n    │   └───com\r\n    │       └───example\r\n    │           └───demo\r\n    ├───generated-sources\r\n    │   └───annotations\r\n    ├───generated-test-sources\r\n    │   └───test-annotations\r\n    ├───maven-status\r\n    │   └───maven-compiler-plugin\r\n    │       ├───compile\r\n    │       │   └───default-compile\r\n    │       └───testCompile\r\n    │           └───default-testCompile\r\n    ├───surefire-reports\r\n    └───test-classes\r\n        └───com\r\n            └───example\r\n                └───demo\r\n```\r\n\r\nMy java version:\r\n```\r\nopenjdk version &quot;1.8.0_275&quot;\r\nOpenJDK Runtime Environment (build 1.8.0_275-b01)\r\nOpenJDK 64-Bit Server VM (build 25.275-b01, mixed mode)\r\n```\r\n\r\nI don&#39;t know too much about Maven and Spring. It will be great if you demonstrate clearly.","title":"IllegalState Failed to load ApplicationCon","body":"<p>I am getting my feet wet for 2 or 3 days in backend. I decided to go with Spring but I encounter the following error when I try to get build using the command line &quot;mvn package&quot;:</p>\n<pre><code>[ERROR] Tests run: 1, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 4.393 s &lt;&lt;&lt; FAILURE! - in com.example.demo.DemoApplicationTests\n[ERROR] contextLoads  Time elapsed: 0.001 s  &lt;&lt;&lt; ERROR!\njava.lang.IllegalStateException: Failed to load ApplicationContext\nCaused by: org.springframework.beans.factory.BeanDefinitionStoreException: Failed to read candidate component class: file [C:\\dev\\demo\\target\\classes\n\\com\\example\\demo\\DemoApplication.class]; nested exception is org.springframework.beans.factory.CannotLoadBeanClassException: Error loading class [co\nm.example.demo.DemoApplication] for bean with name 'demoApplication' defined in file [C:\\dev\\demo\\target\\classes\\com\\example\\demo\\DemoApplication.cla\nss]: problem with class file or dependent class; nested exception is java.lang.UnsupportedClassVersionError: com/example/demo/DemoApplication has bee\nn compiled by a more recent version of the Java Runtime (class file version 55.0), this version of the Java Runtime only recognizes class file versio\nns up to 52.0\nCaused by: org.springframework.beans.factory.CannotLoadBeanClassException: Error loading class [com.example.demo.DemoApplication] for bean with name\n'demoApplication' defined in file [C:\\dev\\demo\\target\\classes\\com\\example\\demo\\DemoApplication.class]: problem with class file or dependent class; ne\nsted exception is java.lang.UnsupportedClassVersionError: com/example/demo/DemoApplication has been compiled by a more recent version of the Java Run\ntime (class file version 55.0), this version of the Java Runtime only recognizes class file versions up to 52.0\nCaused by: java.lang.UnsupportedClassVersionError: com/example/demo/DemoApplication has been compiled by a more recent version of the Java Runtime (c\nlass file version 55.0), this version of the Java Runtime only recognizes class file versions up to 52.0\n[INFO]\n[INFO] Results:\n[INFO]\n[ERROR] Errors: \n[ERROR]   DemoApplicationTests.contextLoads » IllegalState Failed to load ApplicationCon...\n[INFO]\n[ERROR] Tests run: 1, Failures: 0, Errors: 1, Skipped: 0\n[INFO]\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD FAILURE\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time:  11.347 s\n[INFO] Finished at: 2021-03-12T15:19:33+03:00\n[INFO] ------------------------------------------------------------------------\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:2.22.2:test (default-test) on project demo: There are test failures.\n[ERROR]\n[ERROR] Please refer to C:\\dev\\demo\\target\\surefire-reports for the individual test results.\n[ERROR] Please refer to dump files (if any exist) [date].dump, [date]-jvmRun[N].dump and [date].dumpstream.\n[ERROR] -&gt; [Help 1]\n[ERROR]\n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\n[ERROR]\n[ERROR] For more information about the errors and possible solutions, please read the following articles:\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException**\n\n</code></pre>\n<p>DemoApplication.java seems as below:</p>\n<pre><code>package com.example.demo;\n\nimport org.springframework.boot.*;\nimport org.springframework.boot.autoconfigure.*;\nimport org.springframework.web.bind.annotation.*;\n\n@RestController\n@EnableAutoConfiguration\npublic class DemoApplication {\n\n    @RequestMapping(&quot;/&quot;)\n    String home() {\n        return &quot;Hello World!&quot;;\n    }\n\n    public static void main(String[] args) {\n        SpringApplication.run(DemoApplication.class, args);\n    }\n\n}\n</code></pre>\n<p>DemoApplicationTests.java seems as below:</p>\n<pre><code>package com.example.demo;\n\nimport org.junit.jupiter.api.Test;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.boot.test.context.SpringBootTest;\nimport org.springframework.test.context.ContextConfiguration;\n\n@SpringBootTest\n@SpringBootApplication\nclass DemoApplicationTests {\n\n    @Test\n    void contextLoads() {\n    }\n\n}\n</code></pre>\n<p>And this is my pom.xml file.</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.4.3&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.example&lt;/groupId&gt;\n    &lt;artifactId&gt;demo&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;demo&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;1.6&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.4.3&lt;/version&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n\n</code></pre>\n<p>And the project directory is as seen below:</p>\n<pre><code>C:.\n├───.idea\n│   ├───codeStyles\n│   └───libraries\n├───.mvn\n│   └───wrapper\n├───src\n│   ├───main\n│   │   ├───java\n│   │   │   └───com\n│   │   │       └───example\n│   │   │           └───demo\n│   │   └───resources\n│   └───test\n│       └───java\n│           └───com\n│               └───example\n│                   └───demo\n└───target\n    ├───classes\n    │   └───com\n    │       └───example\n    │           └───demo\n    ├───generated-sources\n    │   └───annotations\n    ├───generated-test-sources\n    │   └───test-annotations\n    ├───maven-status\n    │   └───maven-compiler-plugin\n    │       ├───compile\n    │       │   └───default-compile\n    │       └───testCompile\n    │           └───default-testCompile\n    ├───surefire-reports\n    └───test-classes\n        └───com\n            └───example\n                └───demo\n</code></pre>\n<p>My java version:</p>\n<pre><code>openjdk version &quot;1.8.0_275&quot;\nOpenJDK Runtime Environment (build 1.8.0_275-b01)\nOpenJDK 64-Bit Server VM (build 25.275-b01, mixed mode)\n</code></pre>\n<p>I don't know too much about Maven and Spring. It will be great if you demonstrate clearly.</p>\n"},{"tags":["java","text","anylogic"],"answers":[{"tags":[],"owner":{"account_id":22333256,"reputation":503,"user_id":16554239,"display_name":"mczandrea"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1658396397,"creation_date":1658320612,"answer_id":73051769,"question_id":73041290,"body_markdown":"You can simply use a String argument for the `setText` method of the button element, so you can use `button1.setText(&quot;My new button label&quot;)`. \r\n\r\n(It is probably defined as an Object in the documentation, because the method also works with integer, boolean, etc. type arguments.)\r\n\r\nIf you need to change the appearance too during runtime, a possible solution is using a Rounded rectangle (or any other shape) and a Text element on top of it instead of the standard Button. The shapes have &#39;On click&#39; properties where you can call the desired action. Text doesn&#39;t have a built-in method to make it bold, but you have lots of other options for customization this way even if you only write simpler code.","title":"Anylogic change button label dynamically","body":"<p>You can simply use a String argument for the <code>setText</code> method of the button element, so you can use <code>button1.setText(&quot;My new button label&quot;)</code>.</p>\n<p>(It is probably defined as an Object in the documentation, because the method also works with integer, boolean, etc. type arguments.)</p>\n<p>If you need to change the appearance too during runtime, a possible solution is using a Rounded rectangle (or any other shape) and a Text element on top of it instead of the standard Button. The shapes have 'On click' properties where you can call the desired action. Text doesn't have a built-in method to make it bold, but you have lots of other options for customization this way even if you only write simpler code.</p>\n"}],"owner":{"account_id":5481231,"reputation":309,"user_id":4357631,"accept_rate":76,"display_name":"Skalwalker"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":131,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73051769,"answer_count":1,"score":0,"last_activity_date":1658396397,"creation_date":1658252086,"question_id":73041290,"body_markdown":"I am trying to change the text of an already created Button. On the document page there is a reference saying that there is a property ```setText​(java.lang.Object text)``` that sets the button label text. However how do I create the text object? At first I thought I should create a ShapeText and pass it as the text argument, but when I tried to do it it changed the label of the button for the name of the ShapeText object reference.\r\n\r\nI used this constructor and assigned to the button: \r\n```\r\nShapeText new_text = new ShapeText​(true, 190.0, 190.0, 0, black, &quot;My new button label&quot;, my_new_font, alignment)\r\n\r\nbutton1.setText(new_text)\r\n```\r\nHowever the label of the button doesn&#39;t change to &quot;My new button label&quot;. What am I missing?\r\n","title":"Anylogic change button label dynamically","body":"<p>I am trying to change the text of an already created Button. On the document page there is a reference saying that there is a property <code>setText​(java.lang.Object text)</code> that sets the button label text. However how do I create the text object? At first I thought I should create a ShapeText and pass it as the text argument, but when I tried to do it it changed the label of the button for the name of the ShapeText object reference.</p>\n<p>I used this constructor and assigned to the button:</p>\n<pre><code>ShapeText new_text = new ShapeText​(true, 190.0, 190.0, 0, black, &quot;My new button label&quot;, my_new_font, alignment)\n\nbutton1.setText(new_text)\n</code></pre>\n<p>However the label of the button doesn't change to &quot;My new button label&quot;. What am I missing?</p>\n"},{"tags":["java","methods","return-type"],"comments":[{"owner":{"account_id":910745,"reputation":829,"user_id":944678,"accept_rate":100,"display_name":"mrkhrts"},"score":4,"creation_date":1316435082,"post_id":7470861,"comment_id":9039959,"body_markdown":"Hm.............? Using such data structures _is_ the standard, no?","body":"Hm.............? Using such data structures <i>is</i> the standard, no?"},{"owner":{"account_id":114848,"reputation":134179,"user_id":301832,"accept_rate":60,"display_name":"Donal Fellows"},"score":0,"creation_date":1316435084,"post_id":7470861,"comment_id":9039962,"body_markdown":"Because nobody&#39;s done the work to take one of those custom solutions and standardize it, of course!","body":"Because nobody&#39;s done the work to take one of those custom solutions and standardize it, of course!"},{"owner":{"account_id":399566,"reputation":5316,"user_id":765009,"accept_rate":60,"display_name":"toto2"},"score":12,"creation_date":1316435145,"post_id":7470861,"comment_id":9039988,"body_markdown":"There is a standard way: it&#39;s called an object.","body":"There is a standard way: it&#39;s called an object."},{"owner":{"account_id":912890,"reputation":45749,"user_id":946312,"accept_rate":63,"display_name":"Saket"},"score":0,"creation_date":1316435338,"post_id":7470861,"comment_id":9040041,"body_markdown":"yes, those are standard data structure, but aren&#39;t there ways to put it as part of the language construct rather than wrapping it within collections? a simple analogy, if I may, is that you could pass in multiple arguments to a method in two ways: (a). Have a single parameter variable which is a List&lt;?&gt; and extract individual params from it or (b). have different parameter variables for each argument.  Just thinking out loud...","body":"yes, those are standard data structure, but aren&#39;t there ways to put it as part of the language construct rather than wrapping it within collections? a simple analogy, if I may, is that you could pass in multiple arguments to a method in two ways: (a). Have a single parameter variable which is a List&lt;?&gt; and extract individual params from it or (b). have different parameter variables for each argument.  Just thinking out loud..."},{"owner":{"account_id":138790,"reputation":61721,"user_id":343955,"accept_rate":85,"display_name":"adarshr"},"score":0,"creation_date":1316435404,"post_id":7470861,"comment_id":9040062,"body_markdown":"What you&#39;re trying to do is non-standard. Standard approaches include using maps, lists or custom objects!","body":"What you&#39;re trying to do is non-standard. Standard approaches include using maps, lists or custom objects!"},{"owner":{"account_id":912890,"reputation":45749,"user_id":946312,"accept_rate":63,"display_name":"Saket"},"score":0,"creation_date":1316435537,"post_id":7470861,"comment_id":9040104,"body_markdown":"@adarshr - perhaps it sounds &#39;non-standard&#39; because there is no standard as such **yet**, which is what am trying to look for :)  Again, I&#39;m just trying to open up the discussion.","body":"@adarshr - perhaps it sounds &#39;non-standard&#39; because there is no standard as such <b>yet</b>, which is what am trying to look for :)  Again, I&#39;m just trying to open up the discussion."},{"owner":{"account_id":261142,"reputation":47118,"user_id":545127,"accept_rate":69,"display_name":"Raedwald"},"score":0,"creation_date":1316436236,"post_id":7470861,"comment_id":9040302,"body_markdown":"Possible duplicate of http://stackoverflow.com/questions/457629/how-to-return-multiple-objects-from-a-java-method","body":"Possible duplicate of <a href=\"http://stackoverflow.com/questions/457629/how-to-return-multiple-objects-from-a-java-method\" title=\"how to return multiple objects from a java method\">stackoverflow.com/questions/457629/&hellip;</a>"},{"owner":{"account_id":912890,"reputation":45749,"user_id":946312,"accept_rate":63,"display_name":"Saket"},"score":0,"creation_date":1316436315,"post_id":7470861,"comment_id":9040332,"body_markdown":"I did see the above post, which talks about **how** to do this. But what I&#39;m trying to open up is why should such means be needed.","body":"I did see the above post, which talks about <b>how</b> to do this. But what I&#39;m trying to open up is why should such means be needed."},{"owner":{"account_id":261142,"reputation":47118,"user_id":545127,"accept_rate":69,"display_name":"Raedwald"},"score":0,"creation_date":1316436411,"post_id":7470861,"comment_id":9040364,"body_markdown":"&quot;I&#39;m just trying to open up the discussion&quot;: discussions are not the recommended style here. See http://stackoverflow.com/faq#dontask","body":"&quot;I&#39;m just trying to open up the discussion&quot;: discussions are not the recommended style here. See <a href=\"http://stackoverflow.com/faq#dontask\">stackoverflow.com/faq#dontask</a>"},{"owner":{"account_id":912890,"reputation":45749,"user_id":946312,"accept_rate":63,"display_name":"Saket"},"score":0,"creation_date":1316436526,"post_id":7470861,"comment_id":9040387,"body_markdown":"@Raedwald - &#39;discussion&#39;...not literally :) . I&#39;m trying to (along with may be some others as well) understand/learn the theory behind it.","body":"@Raedwald - &#39;discussion&#39;...not literally :) . I&#39;m trying to (along with may be some others as well) understand/learn the theory behind it."},{"owner":{"account_id":261142,"reputation":47118,"user_id":545127,"accept_rate":69,"display_name":"Raedwald"},"score":0,"creation_date":1316436681,"post_id":7470861,"comment_id":9040429,"body_markdown":"See also: http://stackoverflow.com/questions/457775/does-java-need-tuples","body":"See also: <a href=\"http://stackoverflow.com/questions/457775/does-java-need-tuples\">stackoverflow.com/questions/457775/does-java-need-tuples</a>"},{"owner":{"account_id":15387,"reputation":63718,"user_id":32453,"accept_rate":92,"display_name":"rogerdpack"},"score":0,"creation_date":1366142719,"post_id":7470861,"comment_id":22895864,"body_markdown":"Maybe java is doing it to force you to use &quot;named&quot; style return values, so there is no confusion as to what is begin returned...","body":"Maybe java is doing it to force you to use &quot;named&quot; style return values, so there is no confusion as to what is begin returned..."},{"owner":{"account_id":229007,"reputation":457,"user_id":491686,"accept_rate":86,"display_name":"titania424"},"score":0,"creation_date":1381336073,"post_id":7470861,"comment_id":28542352,"body_markdown":"Other languages do this by having a pass-by-reference syntax (or a pseudo pass-by-reference, like using &amp; (address operator) in C or C++.  That was the way people got around it &quot;back in the old days&quot;.  I&#39;m trying to decide how to do this for something and I may chose the private static class explained below as the selected answer.","body":"Other languages do this by having a pass-by-reference syntax (or a pseudo pass-by-reference, like using &amp; (address operator) in C or C++.  That was the way people got around it &quot;back in the old days&quot;.  I&#39;m trying to decide how to do this for something and I may chose the private static class explained below as the selected answer."},{"owner":{"account_id":5714867,"reputation":2001,"user_id":4515489,"display_name":"jk7"},"score":0,"creation_date":1515611097,"post_id":7470861,"comment_id":83369466,"body_markdown":"Why not create your own Tuple class like in [this question](https://stackoverflow.com/questions/16867158/return-tuple-from-java-method) ?","body":"Why not create your own Tuple class like in <a href=\"https://stackoverflow.com/questions/16867158/return-tuple-from-java-method\">this question</a> ?"}],"answers":[{"tags":[],"owner":{"account_id":204659,"reputation":37539,"user_id":453005,"accept_rate":100,"display_name":"DwB"},"down_vote_count":7,"up_vote_count":17,"is_accepted":false,"score":10,"last_activity_date":1316435147,"creation_date":1316435147,"answer_id":7470912,"question_id":7470861,"body_markdown":"Java methods return exactly zero or one value; that **is** the standard for java.  If you need multiple values returned, create an object with the multiple values and return it.","title":"Return multiple values from a Java method: why no n-tuple objects?","body":"<p>Java methods return exactly zero or one value; that <strong>is</strong> the standard for java.  If you need multiple values returned, create an object with the multiple values and return it.</p>\n"},{"tags":[],"owner":{"account_id":10836,"reputation":196641,"user_id":20654,"accept_rate":80,"display_name":"OscarRyz"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1316435325,"creation_date":1316435325,"answer_id":7470940,"question_id":7470861,"body_markdown":"Because returning multiple value from a method is not a recommended practice ( in Java ). \r\n\r\n\r\nIf you need unrelated values from a method you need a different datastructure like an object containing those values. If you need multiple instances of the same class ( ie several Strings  )  you need to return either an array, or some collection depending on your needs. \r\n\r\n\r\nReturning multiple values in other languages ( Go for instance ) are used for instance to return an eror code, but  Java was designed differently using exceptions. ","title":"Return multiple values from a Java method: why no n-tuple objects?","body":"<p>Because returning multiple value from a method is not a recommended practice ( in Java ). </p>\n\n<p>If you need unrelated values from a method you need a different datastructure like an object containing those values. If you need multiple instances of the same class ( ie several Strings  )  you need to return either an array, or some collection depending on your needs. </p>\n\n<p>Returning multiple values in other languages ( Go for instance ) are used for instance to return an eror code, but  Java was designed differently using exceptions. </p>\n"},{"tags":[],"owner":{"account_id":422333,"reputation":79,"user_id":801049,"display_name":"Psychologist"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1316435670,"creation_date":1316435670,"answer_id":7471002,"question_id":7470861,"body_markdown":"If you want to return two objects you usually want to return a single object that encapsulates the two objects instead.","title":"Return multiple values from a Java method: why no n-tuple objects?","body":"<p>If you want to return two objects you usually want to return a single object that encapsulates the two objects instead.</p>\n"},{"tags":[],"owner":{"account_id":123612,"reputation":48061,"user_id":318174,"accept_rate":71,"display_name":"Adam Gent"},"down_vote_count":0,"up_vote_count":66,"is_accepted":true,"score":66,"last_activity_date":1433284110,"creation_date":1316435796,"answer_id":7471030,"question_id":7470861,"body_markdown":"I assume the OP means &quot;Why does Java not support n-tuple objects?&quot;. \r\nPython, Haskell, Lisp, ML etc have heterogeneous n-tuple capabilities. Also often times the ability to apparently return multiple objects in a language is syntactical sugar (ie in python return &#39;a&#39;,&#39;b&#39;).\r\n\r\nThe reason of course is language design and consistency. Java prefers being very explicit and does not like anonymous data structures (although I wish we had anonymous closures).\r\n\r\nFor example in Java there is no way to say I would like a callback that takes these type parameters and returns this. Some people feel this a huge weakness others like the consistency and explicitness.\r\n\r\nIMHO although its annoying I frequently combat this issue by making static inline classes:\r\n\r\n    private static class Combo {\r\n       String name;\r\n       int weight;\r\n    }\r\n\r\nYes its tedious but then later on I often reuse and refactor those classes making them top level and adding behavior. Infact one of the advantages with going this route is that its much easier to add new fields where is the anonymous data structure (like in FP languages) it becomes much more difficult to add a field (you end up changing a ton of code).\r\n\r\nI should note that for 2-tuples some people use (or abuse) `java.util.Map.Entry` as there is an `java.util.AbstractMap.SimpleEntry` in Java 6. Also Some people now use [Commons Lang3&#39;s Pair support (2-tuple)][1].\r\n\r\nScala has n-tuple support by sort of cheating and having a whole bunch of 2-16 tuple interfaces that are standard in the language and are syntactically hidden from the programmer. \r\n\r\nFor purely educational reasons you may want to see how other [languages accomplish this][2].\r\n\r\n**UPDATE: for Java 8**\r\n\r\nJava 8 will/maybe (so heres my number... call me maybe) support an interface called `java.lang.BiValue` with a concrete implementation that you can use called `java.lang.BiVal` . These classes are to help support the new lambda functionality. But notice this is only for 2-tuples.\r\n\r\n**UPDATE: for 2015**\r\n\r\nJava 8 did *not* gain support for tuples.\r\n\r\n**UPDATE: from author 2015**\r\n\r\nIf you still would like tuple support there are three libraries that support tuples well:\r\n\r\n * [javatuples][3] - Supports JDK 5 and above. Up to 10-tuple.\r\n * [JOOλ][4] - From the author of jOOQ but requires JDK 8.\r\n * [Commons Lang 3][5] - Now supports a Triple (3-tuple) and supports JDK 6 and above.\r\n\r\n\r\n  [1]: http://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/tuple/package-summary.html\r\n  [2]: http://rosettacode.org/wiki/Return_multiple_values\r\n  [3]: http://www.javatuples.org/\r\n  [4]: https://github.com/jOOQ/jOOL\r\n  [5]: https://commons.apache.org/proper/commons-lang/","title":"Return multiple values from a Java method: why no n-tuple objects?","body":"<p>I assume the OP means \"Why does Java not support n-tuple objects?\". \nPython, Haskell, Lisp, ML etc have heterogeneous n-tuple capabilities. Also often times the ability to apparently return multiple objects in a language is syntactical sugar (ie in python return 'a','b').</p>\n\n<p>The reason of course is language design and consistency. Java prefers being very explicit and does not like anonymous data structures (although I wish we had anonymous closures).</p>\n\n<p>For example in Java there is no way to say I would like a callback that takes these type parameters and returns this. Some people feel this a huge weakness others like the consistency and explicitness.</p>\n\n<p>IMHO although its annoying I frequently combat this issue by making static inline classes:</p>\n\n<pre><code>private static class Combo {\n   String name;\n   int weight;\n}\n</code></pre>\n\n<p>Yes its tedious but then later on I often reuse and refactor those classes making them top level and adding behavior. Infact one of the advantages with going this route is that its much easier to add new fields where is the anonymous data structure (like in FP languages) it becomes much more difficult to add a field (you end up changing a ton of code).</p>\n\n<p>I should note that for 2-tuples some people use (or abuse) <code>java.util.Map.Entry</code> as there is an <code>java.util.AbstractMap.SimpleEntry</code> in Java 6. Also Some people now use <a href=\"http://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/tuple/package-summary.html\" rel=\"noreferrer\">Commons Lang3's Pair support (2-tuple)</a>.</p>\n\n<p>Scala has n-tuple support by sort of cheating and having a whole bunch of 2-16 tuple interfaces that are standard in the language and are syntactically hidden from the programmer. </p>\n\n<p>For purely educational reasons you may want to see how other <a href=\"http://rosettacode.org/wiki/Return_multiple_values\" rel=\"noreferrer\">languages accomplish this</a>.</p>\n\n<p><strong>UPDATE: for Java 8</strong></p>\n\n<p>Java 8 will/maybe (so heres my number... call me maybe) support an interface called <code>java.lang.BiValue</code> with a concrete implementation that you can use called <code>java.lang.BiVal</code> . These classes are to help support the new lambda functionality. But notice this is only for 2-tuples.</p>\n\n<p><strong>UPDATE: for 2015</strong></p>\n\n<p>Java 8 did <em>not</em> gain support for tuples.</p>\n\n<p><strong>UPDATE: from author 2015</strong></p>\n\n<p>If you still would like tuple support there are three libraries that support tuples well:</p>\n\n<ul>\n<li><a href=\"http://www.javatuples.org/\" rel=\"noreferrer\">javatuples</a> - Supports JDK 5 and above. Up to 10-tuple.</li>\n<li><a href=\"https://github.com/jOOQ/jOOL\" rel=\"noreferrer\">JOOλ</a> - From the author of jOOQ but requires JDK 8.</li>\n<li><a href=\"https://commons.apache.org/proper/commons-lang/\" rel=\"noreferrer\">Commons Lang 3</a> - Now supports a Triple (3-tuple) and supports JDK 6 and above.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":295085,"reputation":3747,"user_id":599307,"accept_rate":100,"display_name":"Travis"},"down_vote_count":3,"up_vote_count":8,"is_accepted":false,"score":5,"last_activity_date":1316436769,"creation_date":1316436769,"answer_id":7471239,"question_id":7470861,"body_markdown":"There are plenty of hackish ways to accomplish this, one way would be to return an `Object[]`, but then you&#39;ve got indices to worry about, and null pointer checks, it just gets nasty. Another way is to return a `String`, but then you&#39;ve got to parse it, and it gets nasty. \r\n\r\n**I think the real question is why?**\r\n\r\nHere&#39;s the rub - If I were working on a project with you, and I saw this type of behavior, I&#39;d rewrite it so you could see how it should be handled. If you provide a code sample, I&#39;ll rewrite it to illustrate.\r\n\r\nWrite your methods with a single responsibility, if they need to return more data than they have the ability to, you should likely either use an object, or break it into smaller methods.\r\n","title":"Return multiple values from a Java method: why no n-tuple objects?","body":"<p>There are plenty of hackish ways to accomplish this, one way would be to return an <code>Object[]</code>, but then you've got indices to worry about, and null pointer checks, it just gets nasty. Another way is to return a <code>String</code>, but then you've got to parse it, and it gets nasty. </p>\n\n<p><strong>I think the real question is why?</strong></p>\n\n<p>Here's the rub - If I were working on a project with you, and I saw this type of behavior, I'd rewrite it so you could see how it should be handled. If you provide a code sample, I'll rewrite it to illustrate.</p>\n\n<p>Write your methods with a single responsibility, if they need to return more data than they have the ability to, you should likely either use an object, or break it into smaller methods.</p>\n"},{"tags":[],"owner":{"account_id":6352818,"reputation":79,"user_id":4931236,"display_name":"Paul Hamilton"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1432362729,"creation_date":1432360764,"answer_id":30409415,"question_id":7470861,"body_markdown":"There is a new style of pattern available, and fits in with the &quot;all asynchronous&quot; nature that you might see in languages such as JavaScript.\r\n\r\nA lot of my code looks like this nowadays :-)\r\n\r\n    public class Class1 {\r\n    \r\n    \tpublic interface Callback {\r\n    \t   void setData(String item1, String item2);\r\n    \t}\r\n    \tpublic void getThing(Callback callback) {\r\n    \t\tcallback.setData(&quot;a&quot;, &quot;b&quot;);\r\n    \t}\r\n    }\r\n    \r\n    public class Class2 {\r\n    \r\n    \tpublic void doWithThing(Class1 o) {\r\n    \t\to.getThing(new Class1.Callback() {\r\n    \t\t\tpublic void setData(String item1, String item2) {\r\n    \t\t\t\t... do something with item 1 and item 2 ...\r\n    \t\t\t}\r\n    \t\t});\r\n    \t}\r\n    \t\r\n    }\r\n\r\nNo new objects to create and not that many extra classes since the interface is an inner class of the object.\r\n\r\nThis is what makes Swift so awesome. The code can look like this:\r\n\r\n    o.getThing({ item1, item2 -&gt; Void in\r\n    \t... do something with item 1 and item 2 ...\r\n    });\r\n\r\nAnd since the only argument is the block, even this:\r\n\r\n    o.getThing { item1, item2 -&gt; Void in\r\n    \t... do something with item 1 and item 2 ...\r\n    };\r\n\r\nJava needs work to make callback laden code a lot easier to read.","title":"Return multiple values from a Java method: why no n-tuple objects?","body":"<p>There is a new style of pattern available, and fits in with the \"all asynchronous\" nature that you might see in languages such as JavaScript.</p>\n\n<p>A lot of my code looks like this nowadays :-)</p>\n\n<pre><code>public class Class1 {\n\n    public interface Callback {\n       void setData(String item1, String item2);\n    }\n    public void getThing(Callback callback) {\n        callback.setData(\"a\", \"b\");\n    }\n}\n\npublic class Class2 {\n\n    public void doWithThing(Class1 o) {\n        o.getThing(new Class1.Callback() {\n            public void setData(String item1, String item2) {\n                ... do something with item 1 and item 2 ...\n            }\n        });\n    }\n\n}\n</code></pre>\n\n<p>No new objects to create and not that many extra classes since the interface is an inner class of the object.</p>\n\n<p>This is what makes Swift so awesome. The code can look like this:</p>\n\n<pre><code>o.getThing({ item1, item2 -&gt; Void in\n    ... do something with item 1 and item 2 ...\n});\n</code></pre>\n\n<p>And since the only argument is the block, even this:</p>\n\n<pre><code>o.getThing { item1, item2 -&gt; Void in\n    ... do something with item 1 and item 2 ...\n};\n</code></pre>\n\n<p>Java needs work to make callback laden code a lot easier to read.</p>\n"},{"tags":[],"owner":{"account_id":3014567,"reputation":56,"user_id":2557118,"display_name":"Mihai"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658396178,"creation_date":1658381315,"answer_id":73061112,"question_id":7470861,"body_markdown":"I felt myself the need to return multiple values. And I was looking for a &quot;pair&quot; or &quot;tuple&quot; value.\r\nBut after that, I&#39;ve seen how I use the return type:\r\n    \r\n    // scala\r\n    tuple(0)\r\n    tuple(1)\r\n\r\nWhat 0 and 1 means and in which order?\r\nI think it is better to be explicit about what they mean. Create a small static class inside the object containing the method.\r\n\r\nJust an example that comes into my mind. Maybe not the best:\r\n\r\n    public class SomeClass {\r\n        \r\n        public TimeInterval getValability(Voucher voucher) {\r\n            .....\r\n        }\r\n        \r\n        //value objects should be immutable\r\n        public static class TimeInterval {\r\n            public final LocalDate startDate;\r\n            public final LocalDate endDate;\r\n            private TimeInterval(LocalDate startDate, LocalDate endDate) {\r\n                this.startDate = startDate;\r\n                this.endDate = endDate;\r\n            }\r\n        }\r\n    \r\n    }\r\n\r\nthen the person reading the code understand the result of the function:\r\n\r\n    TimeInterval interval = someClassInstance.getValability(voucher);\r\n    if(interval.startDate ......\r\n\r\ninstead of:\r\n\r\n    // from https://www.javatuples.org/\r\n    Pair interval = someClassInstance.getValability(voucher);\r\n    if(interval.getValue0() ......\r\n\r\nI don&#39;t know your use case, but maybe your function is doing two things (Single Responsibility Principle)? \r\n\r\n### Edited: ###\r\n\r\nOr maybe this example that I&#39;ve found in my code will be more realistic:\r\n\r\n    @AllArgsConstructor\r\n    @Getter\r\n    public static class ResponseStatus {\r\n        private final boolean isFailed;\r\n        private final String failureReason;\r\n    }\r\n\r\nwith usage:\r\n\r\n    if (responseStatus.isFailed()) {\r\n        customerHttpResponse.setAsFailed();\r\n        customerHttpResponse.setResponseBody(responseStatus.getFailureReason());\r\n        .....\r\n    }\r\n\r\nIn that way the client code is easier to read in my opinion.","title":"Return multiple values from a Java method: why no n-tuple objects?","body":"<p>I felt myself the need to return multiple values. And I was looking for a &quot;pair&quot; or &quot;tuple&quot; value.\nBut after that, I've seen how I use the return type:</p>\n<pre><code>// scala\ntuple(0)\ntuple(1)\n</code></pre>\n<p>What 0 and 1 means and in which order?\nI think it is better to be explicit about what they mean. Create a small static class inside the object containing the method.</p>\n<p>Just an example that comes into my mind. Maybe not the best:</p>\n<pre><code>public class SomeClass {\n    \n    public TimeInterval getValability(Voucher voucher) {\n        .....\n    }\n    \n    //value objects should be immutable\n    public static class TimeInterval {\n        public final LocalDate startDate;\n        public final LocalDate endDate;\n        private TimeInterval(LocalDate startDate, LocalDate endDate) {\n            this.startDate = startDate;\n            this.endDate = endDate;\n        }\n    }\n\n}\n</code></pre>\n<p>then the person reading the code understand the result of the function:</p>\n<pre><code>TimeInterval interval = someClassInstance.getValability(voucher);\nif(interval.startDate ......\n</code></pre>\n<p>instead of:</p>\n<pre><code>// from https://www.javatuples.org/\nPair interval = someClassInstance.getValability(voucher);\nif(interval.getValue0() ......\n</code></pre>\n<p>I don't know your use case, but maybe your function is doing two things (Single Responsibility Principle)?</p>\n<h3>Edited:</h3>\n<p>Or maybe this example that I've found in my code will be more realistic:</p>\n<pre><code>@AllArgsConstructor\n@Getter\npublic static class ResponseStatus {\n    private final boolean isFailed;\n    private final String failureReason;\n}\n</code></pre>\n<p>with usage:</p>\n<pre><code>if (responseStatus.isFailed()) {\n    customerHttpResponse.setAsFailed();\n    customerHttpResponse.setResponseBody(responseStatus.getFailureReason());\n    .....\n}\n</code></pre>\n<p>In that way the client code is easier to read in my opinion.</p>\n"}],"owner":{"account_id":912890,"reputation":45749,"user_id":946312,"accept_rate":63,"display_name":"Saket"},"comment_count":14,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":80837,"favorite_count":0,"down_vote_count":1,"up_vote_count":57,"accepted_answer_id":7471030,"answer_count":7,"score":56,"last_activity_date":1658396178,"creation_date":1316434982,"question_id":7470861,"body_markdown":"Why isn&#39;t there a (standard, Java certified) solution, as part of the Java language itself, to return multiple values from a Java method, rather than developers having to use their own means, such as Maps, Lists, Pairs, etc.? Why does Java not support n-tuple objects?\r\n\r\nEspecially thinking for trivial private methods that may modify two objects together (in tandem), and in which case a typed-object as a return sounds overkill.","title":"Return multiple values from a Java method: why no n-tuple objects?","body":"<p>Why isn't there a (standard, Java certified) solution, as part of the Java language itself, to return multiple values from a Java method, rather than developers having to use their own means, such as Maps, Lists, Pairs, etc.? Why does Java not support n-tuple objects?</p>\n\n<p>Especially thinking for trivial private methods that may modify two objects together (in tandem), and in which case a typed-object as a return sounds overkill.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1658398555,"post_id":73063666,"comment_id":129043915,"body_markdown":"What is `zipFilePath`? and does it name a directory or a file?","body":"What is <code>zipFilePath</code>? and does it name a directory or a file?"}],"answers":[{"tags":[],"owner":{"account_id":10428850,"reputation":175,"user_id":7689280,"display_name":"Mio"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1658395839,"creation_date":1658395783,"answer_id":73063777,"question_id":73063666,"body_markdown":"According to:\r\nhttps://stackoverflow.com/questions/28670576/getting-java-nio-file-accessdeniedexception-when-trying-to-write-to-a-folder\r\n\r\nI think you should add the filename and the extension to your &#39;zipFilePath&#39;, for example: &quot;C:\\Users\\XXXXX\\Desktop\\zippedFile.zip&quot;","title":"java.nio.file.AccessDeniedException error?","body":"<p>According to:\n<a href=\"https://stackoverflow.com/questions/28670576/getting-java-nio-file-accessdeniedexception-when-trying-to-write-to-a-folder\">Getting &quot;java.nio.file.AccessDeniedException&quot; when trying to write to a folder</a></p>\n<p>I think you should add the filename and the extension to your 'zipFilePath', for example: &quot;C:\\Users\\XXXXX\\Desktop\\zippedFile.zip&quot;</p>\n"}],"owner":{"account_id":5708598,"reputation":8967,"user_id":4511325,"accept_rate":66,"display_name":"None"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3351,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73063777,"answer_count":1,"score":0,"last_activity_date":1658395839,"creation_date":1658395276,"question_id":73063666,"body_markdown":"Im trying to zip my created folder. Right now im testing localy and it create folder but after that i want to zip it.\r\n\r\nThis is my code for zip:\r\n\r\n    public static void pack(final String sourceDirPath, final String zipFilePath) throws IOException {\r\n        Path p = Files.createFile(Paths.get(zipFilePath));\r\n        try (ZipOutputStream zs = new ZipOutputStream(Files.newOutputStream(p))) {\r\n            Path pp = Paths.get(sourceDirPath);\r\n            Files.walk(pp).filter(path -&gt; !Files.isDirectory(path)).forEach(path -&gt; {\r\n                ZipEntry zipEntry = new ZipEntry(pp.relativize(path).toString());\r\n                try {\r\n                    zs.putNextEntry(zipEntry);\r\n                    Files.copy(path, zs);\r\n                    zs.closeEntry();\r\n                } catch (IOException e) {\r\n                    System.err.println(e);\r\n                }\r\n            });\r\n        } }\r\n\r\nBut im getting an error AccessDeniedException. Is there any option to zip created folder, i dont want to zip file because in that folder i will have subfolders, so i want to zip main folder. Any suggestion how can i achive that?","title":"java.nio.file.AccessDeniedException error?","body":"<p>Im trying to zip my created folder. Right now im testing localy and it create folder but after that i want to zip it.</p>\n<p>This is my code for zip:</p>\n<pre><code>public static void pack(final String sourceDirPath, final String zipFilePath) throws IOException {\n    Path p = Files.createFile(Paths.get(zipFilePath));\n    try (ZipOutputStream zs = new ZipOutputStream(Files.newOutputStream(p))) {\n        Path pp = Paths.get(sourceDirPath);\n        Files.walk(pp).filter(path -&gt; !Files.isDirectory(path)).forEach(path -&gt; {\n            ZipEntry zipEntry = new ZipEntry(pp.relativize(path).toString());\n            try {\n                zs.putNextEntry(zipEntry);\n                Files.copy(path, zs);\n                zs.closeEntry();\n            } catch (IOException e) {\n                System.err.println(e);\n            }\n        });\n    } }\n</code></pre>\n<p>But im getting an error AccessDeniedException. Is there any option to zip created folder, i dont want to zip file because in that folder i will have subfolders, so i want to zip main folder. Any suggestion how can i achive that?</p>\n"},{"tags":["java","database","oracle","jpa","querydsl"],"comments":[{"owner":{"account_id":189341,"reputation":1768,"user_id":428627,"display_name":"giorgiga"},"score":0,"creation_date":1593034162,"post_id":62557762,"comment_id":110642358,"body_markdown":"I see nothing strange in a query with `distinct` being slower than the corresponding query without `distinct`... what precisely doesn&#39;t seem to add up for you?","body":"I see nothing strange in a query with <code>distinct</code> being slower than the corresponding query without <code>distinct</code>... what precisely doesn&#39;t seem to add up for you?"},{"owner":{"account_id":12579386,"reputation":6314,"user_id":9150652,"display_name":"MauriceNino"},"score":0,"creation_date":1593072945,"post_id":62557762,"comment_id":110652902,"body_markdown":"That its like 20x slower or something. Like unusable slow and a lot slower than the native Oracle SQL query @giorgiga","body":"That its like 20x slower or something. Like unusable slow and a lot slower than the native Oracle SQL query @giorgiga"},{"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"score":0,"creation_date":1658396429,"post_id":62557762,"comment_id":129043010,"body_markdown":"Maybe explicitly using [joins](http://querydsl.com/static/querydsl/5.0.0/reference/html_single/#d0e317) makes a difference, especially if a leftJoin or such might make DISTINCT superfluous, as DISTINCT is heavy.","body":"Maybe explicitly using <a href=\"http://querydsl.com/static/querydsl/5.0.0/reference/html_single/#d0e317\" rel=\"nofollow noreferrer\">joins</a> makes a difference, especially if a leftJoin or such might make DISTINCT superfluous, as DISTINCT is heavy."}],"answers":[{"tags":[],"owner":{"account_id":2408521,"reputation":3734,"user_id":2104280,"accept_rate":78,"display_name":"Jan-Willem Gmelig Meyling"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1593033486,"creation_date":1593033486,"answer_id":62564228,"question_id":62557762,"body_markdown":"Any optimization that could have been done by limit and offset (i.e. stopping execution early) is basically eliminated by the distinct clause. This is just how distinct works out in your SQL query execution plan and is unrelated to QueryDSL.\r\n\r\nYou could consider creating a materialized view in your database that indexes the distinct values for this projection, and then query that in QueryDSL instead. The materialized view keeps track of the distinct names so that this intensive computation doesn&#39;t have to be done at query time. For this approach you will have to create an entity that maps to the materialized view, but that is perfectly well possible.\r\n\r\nYou can create a materialized view for Oracle using:\r\n\r\n    CREATE MATERIALIZED VIEW mv_names\r\n\tREFRESH WITH ROWID \r\n   \tAS SELECT  qTabA.col1, qTabB.col1, qTabC.col1, qTabC.col2 FROM tableA, tableB, tableC WHERE ...; \r\n\r\nThen query in Querydsl:\r\n\r\n    queryFactory.select(QNameView.nameView).from(QNameView.nameView)\r\n        .offset(offset)\r\n        .limit(limit)\r\n        .fetch();\r\n\r\nYou could also consider keyset pagination for very large pagination results. Because very large offsets will also affect your query performance (anything before the offset still has to be visited to be skipped...)\r\n\r\nIn order to do so, sort the result, and keep track of which name was the last one in your previous call. Then just add a where clause that eliminates any entries lower than that value, so you can omit the offset clause. Make sure to index this column on the materialized view for optimal performance.","title":"QueryDsl distinct query too slow","body":"<p>Any optimization that could have been done by limit and offset (i.e. stopping execution early) is basically eliminated by the distinct clause. This is just how distinct works out in your SQL query execution plan and is unrelated to QueryDSL.</p>\n<p>You could consider creating a materialized view in your database that indexes the distinct values for this projection, and then query that in QueryDSL instead. The materialized view keeps track of the distinct names so that this intensive computation doesn't have to be done at query time. For this approach you will have to create an entity that maps to the materialized view, but that is perfectly well possible.</p>\n<p>You can create a materialized view for Oracle using:</p>\n<pre><code>CREATE MATERIALIZED VIEW mv_names\nREFRESH WITH ROWID \nAS SELECT  qTabA.col1, qTabB.col1, qTabC.col1, qTabC.col2 FROM tableA, tableB, tableC WHERE ...; \n</code></pre>\n<p>Then query in Querydsl:</p>\n<pre><code>queryFactory.select(QNameView.nameView).from(QNameView.nameView)\n    .offset(offset)\n    .limit(limit)\n    .fetch();\n</code></pre>\n<p>You could also consider keyset pagination for very large pagination results. Because very large offsets will also affect your query performance (anything before the offset still has to be visited to be skipped...)</p>\n<p>In order to do so, sort the result, and keep track of which name was the last one in your previous call. Then just add a where clause that eliminates any entries lower than that value, so you can omit the offset clause. Make sure to index this column on the materialized view for optimal performance.</p>\n"}],"owner":{"account_id":12579386,"reputation":6314,"user_id":9150652,"display_name":"MauriceNino"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1685,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1658395590,"creation_date":1593009956,"question_id":62557762,"body_markdown":"I am using QueryDsl in Java with an Oracle Database.\r\n\r\nMy query looks like this (Real names changed to dummy names, but the query is exactly the same):\r\n\r\n```java\r\nQTableA qTabA = QTableA.tableA;\r\nQTableB qTabB = QTableA.tableB;\r\nQTableC qTabC = QTableA.tableC;\r\n\r\n\r\nList&lt;ResultClass&gt; result = queryFactory\r\n\t\t.select(Projections.constructor(ResultClass.class, qTabA.col1, qTabB.col1, qTabC.col1, qTabC.col2))\r\n\t\t.from(qTabA, qTabB, qTabC)\r\n\t\t.where(qTabA.col2.eq(123))\r\n\t\t.where(qTabA.col3.eq(&quot;test&quot;))\r\n\t\t.where(qTabA.col4.eq(qTabB.col2))\r\n\t\t.where(qTabA.col4.eq(qTabC.col2))\r\n\t\t.distinct()\r\n        .offset(offset)\r\n        .limit(limit)\r\n        .fetch();\r\n```\r\n\r\nThe query would fetch around 1.5M rows, that&#39;s why I work with `offset()` and `limit()`. \r\n\r\nI can&#39;t use `.iterator()` either because that fails when you want to commit your transaction while the iterator isn&#39;t closed yet.\r\n\r\nSince I added the distinct, my query went really slow → unusable slow.\r\n\r\nI can&#39;t do  the distinct check in the Java code though, because I can&#39;t load all the data in the memory at once (that&#39;s why I use offset and limit).\r\n\r\nDoes someone have a clue what I am doing wrong, or how I could do it better?","title":"QueryDsl distinct query too slow","body":"<p>I am using QueryDsl in Java with an Oracle Database.</p>\n<p>My query looks like this (Real names changed to dummy names, but the query is exactly the same):</p>\n<pre class=\"lang-java prettyprint-override\"><code>QTableA qTabA = QTableA.tableA;\nQTableB qTabB = QTableA.tableB;\nQTableC qTabC = QTableA.tableC;\n\n\nList&lt;ResultClass&gt; result = queryFactory\n        .select(Projections.constructor(ResultClass.class, qTabA.col1, qTabB.col1, qTabC.col1, qTabC.col2))\n        .from(qTabA, qTabB, qTabC)\n        .where(qTabA.col2.eq(123))\n        .where(qTabA.col3.eq(&quot;test&quot;))\n        .where(qTabA.col4.eq(qTabB.col2))\n        .where(qTabA.col4.eq(qTabC.col2))\n        .distinct()\n        .offset(offset)\n        .limit(limit)\n        .fetch();\n</code></pre>\n<p>The query would fetch around 1.5M rows, that's why I work with <code>offset()</code> and <code>limit()</code>.</p>\n<p>I can't use <code>.iterator()</code> either because that fails when you want to commit your transaction while the iterator isn't closed yet.</p>\n<p>Since I added the distinct, my query went really slow → unusable slow.</p>\n<p>I can't do  the distinct check in the Java code though, because I can't load all the data in the memory at once (that's why I use offset and limit).</p>\n<p>Does someone have a clue what I am doing wrong, or how I could do it better?</p>\n"},{"tags":["java","spring","thymeleaf"],"comments":[{"owner":{"account_id":6475519,"reputation":4496,"user_id":5014221,"accept_rate":71,"display_name":"Ashish Patil"},"score":0,"creation_date":1658403121,"post_id":73063712,"comment_id":129045524,"body_markdown":"Can you try using `onChange` event in your input?","body":"Can you try using <code>onChange</code> event in your input?"},{"owner":{"account_id":6475519,"reputation":4496,"user_id":5014221,"accept_rate":71,"display_name":"Ashish Patil"},"score":0,"creation_date":1658404219,"post_id":73063712,"comment_id":129045945,"body_markdown":"as you have to use onChange event when you change your date input else it won&#39;t work","body":"as you have to use onChange event when you change your date input else it won&#39;t work"},{"owner":{"account_id":17750,"reputation":25470,"user_id":40064,"accept_rate":69,"display_name":"Wim Deblauwe"},"score":0,"creation_date":1658497086,"post_id":73063712,"comment_id":129072771,"body_markdown":"Thymeleaf runs on the server. So updates to the date input in the browser do not reflect in Thymeleaf. You need to either do a post via a form with the date values, or use JavaScript to update the URL of the link on the client side.","body":"Thymeleaf runs on the server. So updates to the date input in the browser do not reflect in Thymeleaf. You need to either do a post via a form with the date values, or use JavaScript to update the URL of the link on the client side."}],"owner":{"account_id":23039207,"reputation":19,"user_id":17157586,"display_name":"ser_jordan14"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":507,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1658395497,"creation_date":1658395497,"question_id":73063712,"body_markdown":"I&#39;m building a support page that will download a report between two input dates, and I need some help figuring out how to pass those dates to get downloaded. \r\n\r\nI&#39;ve tried a method I saw on here, but it doesn&#39;t update the date in the link when the date is changed in the input.\r\n\r\nMy controller looks like:\r\n\r\n        \r\n        @Controller\r\n        public class SupportController {\r\n          @GetMapping(&quot;/reports&quot;)\r\n          public void getReports(Model model) {\r\n    \r\n             DateInputs inputs = new DateInputs();\r\n             //Setting initial values\r\n             inputs.setStart(LocalDate.now().minusDays(1));\r\n             inputs.setEnd(LocalDate.now());\r\n             model.addAttribute(&quot;inputs&quot;, inputs);\r\n           }\r\n    \r\n          @ResponseBody\r\n          @GetMapping(&quot;/reporting/download&quot;)\r\n          public void downloadReports(HttpServletResponse response, @RequestParam String start, \r\n          @RequestParam String end) {\r\n    \r\n             reportService.exportReport(response, start, end);\r\n           }\r\n        }\r\n\r\nThe Inputs class:\r\n\r\n    @Data\r\n    Public class DateInputs {\r\n      @DateTimeFormat(pattern = &quot;yyyy-MM-dd&quot;)\r\n      private LocalDate start;\r\n\r\n      @DateTimeFormat(pattern = &quot;yyyy-MM-dd&quot;)\r\n      private LocalDate end;\r\n    }\r\n    \r\n\r\nAnd my template\r\n\r\n    &lt;!DOCTYPE html&gt;\r\n    &lt;html xmlns:th=&quot;http://wwww.thymeleaf.org&quot;&gt;\r\n    &lt;body&gt;\r\n      &lt;div&gt;\r\n        &lt;input type=&quot;date&quot; th:value=&quot;${inputs.start}&quot; th:field=&quot;${inputs.start}&quot; /&gt;\r\n        &lt;input type=&quot;date&quot; th:value=&quot;${inputs.end}&quot; th:field=&quot;${inputs.end}&quot; /&gt;\r\n      &lt;/div&gt;\r\n\r\n    &lt;a th:href=&quot;@{|/reports/download?start=${inputs.start}&amp;end=${inputs.end}|}&quot;&gt;\r\n      &lt;h3 th:text=&quot;|Download|&quot;&gt;&lt;/h3&gt;\r\n    &lt;/a&gt;\r\n    &lt;/body&gt;\r\n    &lt;/html&gt;\r\n\r\nAnyone know how I can go about this? Thanks!\r\n\r\n\r\n\r\n","title":"Using thymeleaf, how can I pass a date from an input as a request param in a link in the same template?","body":"<p>I'm building a support page that will download a report between two input dates, and I need some help figuring out how to pass those dates to get downloaded.</p>\n<p>I've tried a method I saw on here, but it doesn't update the date in the link when the date is changed in the input.</p>\n<p>My controller looks like:</p>\n<pre><code>    @Controller\n    public class SupportController {\n      @GetMapping(&quot;/reports&quot;)\n      public void getReports(Model model) {\n\n         DateInputs inputs = new DateInputs();\n         //Setting initial values\n         inputs.setStart(LocalDate.now().minusDays(1));\n         inputs.setEnd(LocalDate.now());\n         model.addAttribute(&quot;inputs&quot;, inputs);\n       }\n\n      @ResponseBody\n      @GetMapping(&quot;/reporting/download&quot;)\n      public void downloadReports(HttpServletResponse response, @RequestParam String start, \n      @RequestParam String end) {\n\n         reportService.exportReport(response, start, end);\n       }\n    }\n</code></pre>\n<p>The Inputs class:</p>\n<pre><code>@Data\nPublic class DateInputs {\n  @DateTimeFormat(pattern = &quot;yyyy-MM-dd&quot;)\n  private LocalDate start;\n\n  @DateTimeFormat(pattern = &quot;yyyy-MM-dd&quot;)\n  private LocalDate end;\n}\n</code></pre>\n<p>And my template</p>\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html xmlns:th=&quot;http://wwww.thymeleaf.org&quot;&gt;\n&lt;body&gt;\n  &lt;div&gt;\n    &lt;input type=&quot;date&quot; th:value=&quot;${inputs.start}&quot; th:field=&quot;${inputs.start}&quot; /&gt;\n    &lt;input type=&quot;date&quot; th:value=&quot;${inputs.end}&quot; th:field=&quot;${inputs.end}&quot; /&gt;\n  &lt;/div&gt;\n\n&lt;a th:href=&quot;@{|/reports/download?start=${inputs.start}&amp;end=${inputs.end}|}&quot;&gt;\n  &lt;h3 th:text=&quot;|Download|&quot;&gt;&lt;/h3&gt;\n&lt;/a&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<p>Anyone know how I can go about this? Thanks!</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":3294086,"reputation":3607,"user_id":2771717,"display_name":"Autocrab"},"score":1,"creation_date":1658393996,"post_id":73063359,"comment_id":129042000,"body_markdown":"show how you call `postData`","body":"show how you call <code>postData</code>"},{"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"score":0,"creation_date":1658394134,"post_id":73063359,"comment_id":129042038,"body_markdown":"At some point you are calling `date.toString()` but you actually want `createdTime` there. An ideal candidate for that mixup would be in the call of that method, so I agree with @Autocrab.","body":"At some point you are calling <code>date.toString()</code> but you actually want <code>createdTime</code> there. An ideal candidate for that mixup would be in the call of that method, so I agree with @Autocrab."},{"owner":{"account_id":8796709,"reputation":172,"user_id":6574387,"display_name":"Jaeseo Lee"},"score":0,"creation_date":1658394910,"post_id":73063359,"comment_id":129042362,"body_markdown":"@Autocrab I put the code how to call it. Thanks!","body":"@Autocrab I put the code how to call it. Thanks!"},{"owner":{"account_id":7768865,"reputation":403,"user_id":5879171,"display_name":"DB377"},"score":1,"creation_date":1658395298,"post_id":73063359,"comment_id":129042526,"body_markdown":"createdTime variable in your code is already a string value. So you don&#39;t need to add toString() to that.","body":"createdTime variable in your code is already a string value. So you don&#39;t need to add toString() to that."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1658399689,"post_id":73063359,"comment_id":129044321,"body_markdown":"Consider not using `Date` and `SimpleDateFormat`. Those classes are troublesome and long outdated. Look into java.time, the modern Java date and time API. And if for Android API level lower than 26 additionally look into core library desugaring.","body":"Consider not using <code>Date</code> and <code>SimpleDateFormat</code>. Those classes are troublesome and long outdated. Look into java.time, the modern Java date and time API. And if for Android API level lower than 26 additionally look into core library desugaring."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1658399793,"post_id":73063359,"comment_id":129044355,"body_markdown":"Probably related: [How do I print my Java object without getting &quot;SomeType@2f92e0f4&quot;?](https://stackoverflow.com/questions/29140402/how-do-i-print-my-java-object-without-getting-sometype2f92e0f4)","body":"Probably related: <a href=\"https://stackoverflow.com/questions/29140402/how-do-i-print-my-java-object-without-getting-sometype2f92e0f4\">How do I print my Java object without getting &quot;SomeType@2f92e0f4&quot;?</a>"},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1658399910,"post_id":73063359,"comment_id":129044399,"body_markdown":"Using the `Date` class and naming a variable that is *not* a `Date` with the name `date` is confusing -- it could also possibly confuse yourself? I recommend better and more consistent naming. Both for yourself and for those users on Stack Overflow that are supposed to read and understand your code.","body":"Using the <code>Date</code> class and naming a variable that is <i>not</i> a <code>Date</code> with the name <code>date</code> is confusing -- it could also possibly confuse yourself? I recommend better and more consistent naming. Both for yourself and for those users on Stack Overflow that are supposed to read and understand your code."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1658411472,"post_id":73063359,"comment_id":129049146,"body_markdown":"[I cannot reproduce (this is a link).](https://ideone.com/Ok5hc4)","body":"<a href=\"https://ideone.com/Ok5hc4\" rel=\"nofollow noreferrer\">I cannot reproduce (this is a link).</a>"},{"owner":{"account_id":8796709,"reputation":172,"user_id":6574387,"display_name":"Jaeseo Lee"},"score":0,"creation_date":1658470743,"post_id":73063359,"comment_id":129063507,"body_markdown":"@OleV.V. thanks for your help. right. also I didnt see that objectType things when I debugged. I will try to apply your related link. Thanks!","body":"@OleV.V. thanks for your help. right. also I didnt see that objectType things when I debugged. I will try to apply your related link. Thanks!"},{"owner":{"account_id":8796709,"reputation":172,"user_id":6574387,"display_name":"Jaeseo Lee"},"score":0,"creation_date":1658470783,"post_id":73063359,"comment_id":129063512,"body_markdown":"@OleV.V. Right. I will write a code with better naming. thanks!","body":"@OleV.V. Right. I will write a code with better naming. thanks!"}],"answers":[{"tags":[],"owner":{"account_id":3294086,"reputation":3607,"user_id":2771717,"display_name":"Autocrab"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658395142,"creation_date":1658395142,"answer_id":73063626,"question_id":73063359,"body_markdown":"You should pass `createdTime.format(date)` instead of `createdTime.toString()`.\r\n\r\n\r\n","title":"Converting date to string is not working well","body":"<p>You should pass <code>createdTime.format(date)</code> instead of <code>createdTime.toString()</code>.</p>\n"},{"tags":[],"owner":{"account_id":5031827,"reputation":420,"user_id":5599966,"accept_rate":71,"display_name":"Mor Blau"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658395460,"creation_date":1658395460,"answer_id":73063701,"question_id":73063359,"body_markdown":"`createdTime` is already String. The code that you posted cannot cause the text that you&#39;ve shown. You will get the text `java.text.SimpleDateFormat@4f76f1a0` only if you pass the `SimpleDateFormat` object which you named date.\r\n\r\nMake sure that the code you&#39;ve provided is actually the one that is running. Make sure everything is recompiled successfully.","title":"Converting date to string is not working well","body":"<p><code>createdTime</code> is already String. The code that you posted cannot cause the text that you've shown. You will get the text <code>java.text.SimpleDateFormat@4f76f1a0</code> only if you pass the <code>SimpleDateFormat</code> object which you named date.</p>\n<p>Make sure that the code you've provided is actually the one that is running. Make sure everything is recompiled successfully.</p>\n"}],"owner":{"account_id":8796709,"reputation":172,"user_id":6574387,"display_name":"Jaeseo Lee"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":87,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1658395460,"creation_date":1658393839,"question_id":73063359,"body_markdown":"I&#39;m trying to post date data by using retrofit2 in Android Java.\r\nI don&#39;t know why it happened. Because I wrote code to convert Date to String.\r\nAlso when debugging, I could check string result.\r\n\r\n - My Goal: &quot;created_time&quot;: &quot;2022-07-15 18:17:20&quot;\r\n \r\n - Result: &quot;created_time&quot;: &quot;java.text.SimpleDateFormat@4f76f1a0&quot;\r\n\r\n```\r\nDate dt = new Date();\r\nSimpleDateFormat date = new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss&quot;);\r\nLog.d(&quot;DATE&quot;,date.format(dt).toString());\r\nString createdTime = date.format(dt);\r\n\r\npostData(useridx, deviceid, correlation, tempvalue, intensity, shutterspeed, createdTime.toString());\r\n\r\nprivate void postData(String user_idx, String device_id, String correlation, String value, String intensity, String shutterspeed, String created_time) {\r\n\r\n        // on below line we are creating a retrofit\r\n        // builder and passing our base url\r\n        Retrofit retrofit = new Retrofit.Builder()\r\n                .baseUrl(&quot;URL&quot;)\r\n                // as we are sending data in json format so\r\n                // we have to add Gson converter factory\r\n                .addConverterFactory(GsonConverterFactory.create())\r\n                // at last we are building our retrofit builder.\r\n                .build();\r\n        // below line is to create an instance for our retrofit api class.\r\n        RetrofitAPI retrofitAPI = retrofit.create(RetrofitAPI.class);\r\n\r\n        // passing data from our text fields to our modal class.\r\n        MeasureDataClass modal = new MeasureDataClass(user_idx, device_id, correlation, value, intensity, shutterspeed, created_time);\r\n\r\n        // calling a method to create a post and passing our modal class.\r\n        Call&lt;MeasureDataClass&gt; call = retrofitAPI.createPost(modal);\r\n\r\n        // on below line we are executing our method.\r\n        call.enqueue(new Callback&lt;MeasureDataClass&gt;() {\r\n            @Override\r\n            public void onResponse(Call&lt;MeasureDataClass&gt; call, Response&lt;MeasureDataClass&gt; response) {\r\n\r\n                // we are getting response from our body\r\n                // and passing it to our modal class.\r\n                MeasureDataClass responseFromAPI = response.body();\r\n            }\r\n\r\n            @Override\r\n            public void onFailure(Call&lt;MeasureDataClass&gt; call, Throwable t) {\r\n                // setting text to our text view when\r\n                // we get error response from API.\r\n                Log.e(&quot;POST RESPONSE ERROR&quot;, &quot;POST ERROR&quot;);\r\n            }\r\n        });\r\n    }\r\n\r\n ","title":"Converting date to string is not working well","body":"<p>I'm trying to post date data by using retrofit2 in Android Java.\nI don't know why it happened. Because I wrote code to convert Date to String.\nAlso when debugging, I could check string result.</p>\n<ul>\n<li><p>My Goal: &quot;created_time&quot;: &quot;2022-07-15 18:17:20&quot;</p>\n</li>\n<li><p>Result: &quot;created_time&quot;: &quot;java.text.SimpleDateFormat@4f76f1a0&quot;</p>\n</li>\n</ul>\n<pre><code>Date dt = new Date();\nSimpleDateFormat date = new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss&quot;);\nLog.d(&quot;DATE&quot;,date.format(dt).toString());\nString createdTime = date.format(dt);\n\npostData(useridx, deviceid, correlation, tempvalue, intensity, shutterspeed, createdTime.toString());\n\nprivate void postData(String user_idx, String device_id, String correlation, String value, String intensity, String shutterspeed, String created_time) {\n\n        // on below line we are creating a retrofit\n        // builder and passing our base url\n        Retrofit retrofit = new Retrofit.Builder()\n                .baseUrl(&quot;URL&quot;)\n                // as we are sending data in json format so\n                // we have to add Gson converter factory\n                .addConverterFactory(GsonConverterFactory.create())\n                // at last we are building our retrofit builder.\n                .build();\n        // below line is to create an instance for our retrofit api class.\n        RetrofitAPI retrofitAPI = retrofit.create(RetrofitAPI.class);\n\n        // passing data from our text fields to our modal class.\n        MeasureDataClass modal = new MeasureDataClass(user_idx, device_id, correlation, value, intensity, shutterspeed, created_time);\n\n        // calling a method to create a post and passing our modal class.\n        Call&lt;MeasureDataClass&gt; call = retrofitAPI.createPost(modal);\n\n        // on below line we are executing our method.\n        call.enqueue(new Callback&lt;MeasureDataClass&gt;() {\n            @Override\n            public void onResponse(Call&lt;MeasureDataClass&gt; call, Response&lt;MeasureDataClass&gt; response) {\n\n                // we are getting response from our body\n                // and passing it to our modal class.\n                MeasureDataClass responseFromAPI = response.body();\n            }\n\n            @Override\n            public void onFailure(Call&lt;MeasureDataClass&gt; call, Throwable t) {\n                // setting text to our text view when\n                // we get error response from API.\n                Log.e(&quot;POST RESPONSE ERROR&quot;, &quot;POST ERROR&quot;);\n            }\n        });\n    }\n\n \n</code></pre>\n"},{"tags":["java","command-line","resources"],"comments":[{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":1,"creation_date":1658373546,"post_id":73060301,"comment_id":129036995,"body_markdown":"You should look for the manifest file inside the Jar file, it will have the dependencies listed in it.","body":"You should look for the manifest file inside the Jar file, it will have the dependencies listed in it."}],"answers":[{"tags":[],"owner":{"account_id":23020603,"reputation":341,"user_id":17141716,"display_name":"peterz"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1658395366,"creation_date":1658395366,"answer_id":73063683,"question_id":73060301,"body_markdown":"You should put the pdfbox jar, and any other dependencies, on the classpath:\r\n```\r\njava -classpath .;pdfbox-app.jar NPCGenerator -p\r\n```\r\nWithout that, Java doesn&#39;t know where to look for `org/apache/pdfbox` classes. It looks for `.class` files relative to the default classpath (which is just `.`, the current directory), but does not look inside jars.","title":"How to access Java dependency on command line?","body":"<p>You should put the pdfbox jar, and any other dependencies, on the classpath:</p>\n<pre><code>java -classpath .;pdfbox-app.jar NPCGenerator -p\n</code></pre>\n<p>Without that, Java doesn't know where to look for <code>org/apache/pdfbox</code> classes. It looks for <code>.class</code> files relative to the default classpath (which is just <code>.</code>, the current directory), but does not look inside jars.</p>\n"}],"owner":{"account_id":6885505,"reputation":913,"user_id":5407757,"accept_rate":62,"display_name":"Daniel R. Collins"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":62,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73063683,"answer_count":1,"score":0,"last_activity_date":1658395366,"creation_date":1658373482,"question_id":73060301,"body_markdown":"I have a moderately old, small Java application which has an option to read and export PDF files using the Apache PDFBox library (hereunder, &quot;pdfbox-app.jar&quot;). All the files, including this resource, are stored in a single flat folder.\r\n\r\nThis works fine when called from a JAR file:\r\n\r\n```\r\nD:\\Prog\\!GitHub\\Arena&gt;java -jar Athena.jar NPCGenerator -p\r\nOED NPC Generator\r\n-----------------\r\nWriting Gwenllian-ElfFtr1Wiz1.pdf\r\n```\r\n\r\nIt similarly works fine when run from my IDE (jGrasp).\r\n\r\nBut it fails when called from the command line, outside of its JAR:\r\n\r\n```\r\nD:\\Prog\\!GitHub\\Arena&gt;java NPCGenerator -p\r\nOED NPC Generator\r\n-----------------\r\nWriting Eoin-HalflingFtr1.pdf\r\nException in thread &quot;main&quot; java.lang.NoClassDefFoundError: org/apache/pdfbox/pdmodel/PDDoc\r\nument\r\n        at CharacterPDF.writePDF(CharacterPDF.java:49)\r\n        at NPCGenerator.printToPDF(NPCGenerator.java:294)\r\n        at NPCGenerator.makeAllNPCs(NPCGenerator.java:270)\r\n        at NPCGenerator.main(NPCGenerator.java:308)\r\nCaused by: java.lang.ClassNotFoundException: org.apache.pdfbox.pdmodel.PDDocument\r\n        at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.j\r\nava:641)\r\n        at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoader\r\ns.java:188)\r\n        at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520)\r\n        ... 4 more\r\n```\r\n\r\nWhat should I be doing to run this on the command line outside of its own JAR?","title":"How to access Java dependency on command line?","body":"<p>I have a moderately old, small Java application which has an option to read and export PDF files using the Apache PDFBox library (hereunder, &quot;pdfbox-app.jar&quot;). All the files, including this resource, are stored in a single flat folder.</p>\n<p>This works fine when called from a JAR file:</p>\n<pre><code>D:\\Prog\\!GitHub\\Arena&gt;java -jar Athena.jar NPCGenerator -p\nOED NPC Generator\n-----------------\nWriting Gwenllian-ElfFtr1Wiz1.pdf\n</code></pre>\n<p>It similarly works fine when run from my IDE (jGrasp).</p>\n<p>But it fails when called from the command line, outside of its JAR:</p>\n<pre><code>D:\\Prog\\!GitHub\\Arena&gt;java NPCGenerator -p\nOED NPC Generator\n-----------------\nWriting Eoin-HalflingFtr1.pdf\nException in thread &quot;main&quot; java.lang.NoClassDefFoundError: org/apache/pdfbox/pdmodel/PDDoc\nument\n        at CharacterPDF.writePDF(CharacterPDF.java:49)\n        at NPCGenerator.printToPDF(NPCGenerator.java:294)\n        at NPCGenerator.makeAllNPCs(NPCGenerator.java:270)\n        at NPCGenerator.main(NPCGenerator.java:308)\nCaused by: java.lang.ClassNotFoundException: org.apache.pdfbox.pdmodel.PDDocument\n        at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.j\nava:641)\n        at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoader\ns.java:188)\n        at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520)\n        ... 4 more\n</code></pre>\n<p>What should I be doing to run this on the command line outside of its own JAR?</p>\n"},{"tags":["java","android","android-activity","reflection","android-application-class"],"comments":[{"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"score":0,"creation_date":1658394759,"post_id":73063513,"comment_id":129042297,"body_markdown":"Is that even possible? If you run a plain old java `main`, what&#39;s the current `Activity` supposed to be?","body":"Is that even possible? If you run a plain old java <code>main</code>, what&#39;s the current <code>Activity</code> supposed to be?"},{"owner":{"account_id":10528158,"reputation":334,"user_id":7758485,"display_name":"DiLDoST"},"score":0,"creation_date":1658394895,"post_id":73063513,"comment_id":129042353,"body_markdown":"There&#39;s another thing called ANDROID JAVA CONSOLE apart than JAVA CONSOLE. the ANDROID JAVA CONSOLE is able to access ANDROID api because it runs in Android. An example is AIDE ;-)","body":"There&#39;s another thing called ANDROID JAVA CONSOLE apart than JAVA CONSOLE. the ANDROID JAVA CONSOLE is able to access ANDROID api because it runs in Android. An example is AIDE ;-)"},{"owner":{"account_id":10528158,"reputation":334,"user_id":7758485,"display_name":"DiLDoST"},"score":0,"creation_date":1658394928,"post_id":73063513,"comment_id":129042376,"body_markdown":"Further than that. It&#39;s just an example of static not really a console program","body":"Further than that. It&#39;s just an example of static not really a console program"},{"owner":{"account_id":10528158,"reputation":334,"user_id":7758485,"display_name":"DiLDoST"},"score":0,"creation_date":1658395195,"post_id":73063513,"comment_id":129042481,"body_markdown":"**what&#39;s the current ```Activity``` supposed to be?** In AIDE it&#39;s the console activity which shows result. And as am telling again, it&#39;s just an example","body":"<b>what&#39;s the current <code>Activity</code> supposed to be?</b> In AIDE it&#39;s the console activity which shows result. And as am telling again, it&#39;s just an example"},{"owner":{"account_id":10528158,"reputation":334,"user_id":7758485,"display_name":"DiLDoST"},"score":0,"creation_date":1658395324,"post_id":73063513,"comment_id":129042538,"body_markdown":"Edit: hope it doesn&#39;t confuses u no more ;-)","body":"Edit: hope it doesn&#39;t confuses u no more ;-)"}],"answers":[{"tags":[],"owner":{"account_id":10528158,"reputation":334,"user_id":7758485,"display_name":"DiLDoST"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1658395275,"creation_date":1658394582,"answer_id":73063514,"question_id":73063513,"body_markdown":"Yes it&#39;s possible like this:\r\n\r\n\tpublic static void YOUR_FUNCTION(){\r\n\t\tApplication app = getApplication();\r\n\t\tActivity act = getActivity();\r\n\t\tContext c = /* app or act, both are Contexts so u can use them as needed */;\r\n\r\n\t\t// USE THEM\r\n\t}\r\n\r\n\tpublic static Activity getActivity() {\r\n\t\ttry{\r\n\t\t\tClass activityThreadClass = Class.forName(&quot;android.app.ActivityThread&quot;);\r\n\t\t\tObject activityThread = activityThreadClass.getMethod(&quot;currentActivityThread&quot;).invoke(null);\r\n\t\t\tField activitiesField = activityThreadClass.getDeclaredField(&quot;mActivities&quot;);\r\n\t\t\tactivitiesField.setAccessible(true);\r\n\r\n\t\t\tMap&lt;Object, Object&gt; activities = (Map&lt;Object, Object&gt;) activitiesField.get(activityThread);\r\n\r\n\t\t\tfor (Object activityRecord : activities.values()) {\r\n\t\t\t\ttry\r\n\t\t\t\t{\r\n\t\t\t\t\tClass activityRecordClass = activityRecord.getClass();\r\n\t\t\t\t\tField pausedField = activityRecordClass.getDeclaredField(&quot;paused&quot;);\r\n\t\t\t\t\tpausedField.setAccessible(true);\r\n\r\n\t\t\t\t\tboolean paused=pausedField.getBoolean(activityRecord);\r\n\r\n\t\t\t\t\tField activityField = activityRecordClass.getDeclaredField(&quot;activity&quot;);\r\n\t\t\t\t\tactivityField.setAccessible(true);\r\n\t\t\t\t\tActivity activity = (Activity) activityField.get(activityRecord);\r\n\r\n\t\t\t\t\tif(!paused){\r\n\t\t\t\t\t\treturn activity;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tcatch (Throwable e)\r\n\t\t\t\t{}\r\n\t\t\t}\r\n\t\t}catch (Throwable e)\r\n\t\t{}\r\n\t\treturn null;\r\n\t}\r\n\t\r\n\tpublic static Application getApplicationContext(){\r\n\t\ttry\r\n\t\t{\r\n\t\t\tApplication i=(Application)Class.forName(&quot;android.app.ActivityThread&quot;)\r\n\t\t\t\t.getMethod(&quot;currentApplication&quot;).invoke(null, null);\r\n\t\t\t\t\r\n\t\t\tif(i==null){\r\n\t\t\t\tthrow new NullPointerException();\r\n\t\t\t}\r\n\t\t\treturn i;\r\n\t\t}\r\n\t\tcatch (Throwable e)\r\n\t\t{\r\n\t\t\ttry\r\n\t\t\t{\r\n\t\t\t\tApplication i=(Application)Class.forName(&quot;android.app.AppGlobals&quot;)\r\n\t\t\t\t\t.getMethod(&quot;getInitialApplication&quot;).invoke(null, null);\r\n\t\t\t\tif(i==null){\r\n\t\t\t\t\tthrow new NullPointerException();\r\n\t\t\t\t}\r\n\t\t\t\treturn i;\r\n\t\t\t}\r\n\t\t\tcatch (Throwable e2)\r\n\t\t\t{\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t","title":"Is it possible to access Context, Application, Activity anywhere statically?","body":"<p>Yes it's possible like this:</p>\n<pre><code>public static void YOUR_FUNCTION(){\n    Application app = getApplication();\n    Activity act = getActivity();\n    Context c = /* app or act, both are Contexts so u can use them as needed */;\n\n    // USE THEM\n}\n\npublic static Activity getActivity() {\n    try{\n        Class activityThreadClass = Class.forName(&quot;android.app.ActivityThread&quot;);\n        Object activityThread = activityThreadClass.getMethod(&quot;currentActivityThread&quot;).invoke(null);\n        Field activitiesField = activityThreadClass.getDeclaredField(&quot;mActivities&quot;);\n        activitiesField.setAccessible(true);\n\n        Map&lt;Object, Object&gt; activities = (Map&lt;Object, Object&gt;) activitiesField.get(activityThread);\n\n        for (Object activityRecord : activities.values()) {\n            try\n            {\n                Class activityRecordClass = activityRecord.getClass();\n                Field pausedField = activityRecordClass.getDeclaredField(&quot;paused&quot;);\n                pausedField.setAccessible(true);\n\n                boolean paused=pausedField.getBoolean(activityRecord);\n\n                Field activityField = activityRecordClass.getDeclaredField(&quot;activity&quot;);\n                activityField.setAccessible(true);\n                Activity activity = (Activity) activityField.get(activityRecord);\n\n                if(!paused){\n                    return activity;\n                }\n            }\n            catch (Throwable e)\n            {}\n        }\n    }catch (Throwable e)\n    {}\n    return null;\n}\n\npublic static Application getApplicationContext(){\n    try\n    {\n        Application i=(Application)Class.forName(&quot;android.app.ActivityThread&quot;)\n            .getMethod(&quot;currentApplication&quot;).invoke(null, null);\n            \n        if(i==null){\n            throw new NullPointerException();\n        }\n        return i;\n    }\n    catch (Throwable e)\n    {\n        try\n        {\n            Application i=(Application)Class.forName(&quot;android.app.AppGlobals&quot;)\n                .getMethod(&quot;getInitialApplication&quot;).invoke(null, null);\n            if(i==null){\n                throw new NullPointerException();\n            }\n            return i;\n        }\n        catch (Throwable e2)\n        {\n            return null;\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":10528158,"reputation":334,"user_id":7758485,"display_name":"DiLDoST"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":380,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"accepted_answer_id":73063514,"answer_count":1,"score":-1,"last_activity_date":1658395275,"creation_date":1658394582,"question_id":73063513,"body_markdown":"So the question is, is it really possible to access ```Context```, ```Application``` and specially ```Activity``` anywhere. Like as in other static class methods without passing parameters?\r\n\r\nEg:\r\n\r\n    public static class YOUR_CLASS{\r\n\r\n        public static void YOUR_FUNCTION(){\r\n            Application app = /* GET APPLICATION */;\r\n            Activity act = /* GET ACTIVITY */;\r\n            Context c = /* GET CONTEXT */;\r\n\r\n            // USE THEM\r\n        }\r\n    }","title":"Is it possible to access Context, Application, Activity anywhere statically?","body":"<p>So the question is, is it really possible to access <code>Context</code>, <code>Application</code> and specially <code>Activity</code> anywhere. Like as in other static class methods without passing parameters?</p>\n<p>Eg:</p>\n<pre><code>public static class YOUR_CLASS{\n\n    public static void YOUR_FUNCTION(){\n        Application app = /* GET APPLICATION */;\n        Activity act = /* GET ACTIVITY */;\n        Context c = /* GET CONTEXT */;\n\n        // USE THEM\n    }\n}\n</code></pre>\n"},{"tags":["java","apache-kafka","spring-kafka","confluent-schema-registry"],"comments":[{"owner":{"account_id":14118777,"reputation":99,"user_id":10199889,"display_name":"Vichukano"},"score":0,"creation_date":1640685107,"post_id":70241651,"comment_id":124631964,"body_markdown":"Has same issue, but it reproduces only if i try to send in ForkJoinPool.common-worker threads.","body":"Has same issue, but it reproduces only if i try to send in ForkJoinPool.common-worker threads."}],"answers":[{"tags":[],"owner":{"account_id":3226885,"reputation":61,"user_id":2723030,"display_name":"Sebastian"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1658395123,"creation_date":1657792895,"answer_id":72978704,"question_id":70241651,"body_markdown":"I got the same issue. As @Vichukano mentioned, it&#39;s a classloader issue related to the executor where the task run (in this case, ForkJoinPool).\r\nHow do you define the `DefaultKafkaProducerFactory` you are using? \r\nStarting in `spring-kafka v2.8.0`, they [added a flag](https://github.com/spring-projects/spring-kafka/pull/2276) to configure the serializer when creating a new producer (same feature for consumer factory). You should configure (if you need it) your serializer beforehand and set this flag to false, e.g.:\r\n\r\n```\r\n  @Bean\r\n  ProducerFactory producerFactory(SchemaRegistryClient registryClient, KafkaProperties kafkaProperties) {\r\n    var serializer = new KafkaAvroSerializer(registryClient);\r\n    var configs = kafkaProperties.buildProducerProperties();\r\n\r\n    serializer.configure(configs, false);\r\n\r\n    return new DefaultKafkaProducerFactory(configs, new StringSerializer(), serializer, false);\r\n  }\r\n```","title":"Spring Kafka-ConfigException: Invalid value TopicNameStrategy for configuration key.subject.name.strategy: Class TopicNameStrategy could not be found","body":"<p>I got the same issue. As @Vichukano mentioned, it's a classloader issue related to the executor where the task run (in this case, ForkJoinPool).\nHow do you define the <code>DefaultKafkaProducerFactory</code> you are using?\nStarting in <code>spring-kafka v2.8.0</code>, they <a href=\"https://github.com/spring-projects/spring-kafka/pull/2276\" rel=\"nofollow noreferrer\">added a flag</a> to configure the serializer when creating a new producer (same feature for consumer factory). You should configure (if you need it) your serializer beforehand and set this flag to false, e.g.:</p>\n<pre><code>  @Bean\n  ProducerFactory producerFactory(SchemaRegistryClient registryClient, KafkaProperties kafkaProperties) {\n    var serializer = new KafkaAvroSerializer(registryClient);\n    var configs = kafkaProperties.buildProducerProperties();\n\n    serializer.configure(configs, false);\n\n    return new DefaultKafkaProducerFactory(configs, new StringSerializer(), serializer, false);\n  }\n</code></pre>\n"}],"owner":{"account_id":23558506,"reputation":31,"user_id":17600166,"display_name":"Gautam Baindur"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2115,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1658395123,"creation_date":1638772629,"question_id":70241651,"body_markdown":"we just deployed a kafka producer to prod and facing a weird issue that didn&#39;t popup in non-prod. The service is a spring boot microservice that receives a REST HTTP request and uses spring kafka to publish an event onto a topic. The Microservice is hosted on AWS ECS. The java version for this API is set to java 11. Below is the error:\r\n\r\n```\r\norg.apache.kafka.common.KafkaException: Failed to construct kafka producer\r\n\tat org.apache.kafka.clients.producer.KafkaProducer.&lt;init&gt;(KafkaProducer.java:441)\r\n\tat org.apache.kafka.clients.producer.KafkaProducer.&lt;init&gt;(KafkaProducer.java:291)\r\n\tat org.springframework.kafka.core.DefaultKafkaProducerFactory.createRawProducer(DefaultKafkaProducerFactory.java:743)\r\n\tat org.springframework.kafka.core.DefaultKafkaProducerFactory.createKafkaProducer(DefaultKafkaProducerFactory.java:584)\r\n\tat org.springframework.kafka.core.DefaultKafkaProducerFactory.doCreateProducer(DefaultKafkaProducerFactory.java:544)\r\n\tat org.springframework.kafka.core.DefaultKafkaProducerFactory.createProducer(DefaultKafkaProducerFactory.java:519)\r\n\tat org.springframework.kafka.core.DefaultKafkaProducerFactory.createProducer(DefaultKafkaProducerFactory.java:513)\r\n\tat org.springframework.kafka.core.KafkaTemplate.getTheProducer(KafkaTemplate.java:683)\r\n\tat org.springframework.kafka.core.KafkaTemplate.doSend(KafkaTemplate.java:569)\r\n\tat org.springframework.kafka.core.KafkaTemplate.send(KafkaTemplate.java:386)\r\n\tat com.nab.ms.hs.lodgement.producer.HardshipCaseSubmitEventProducer.publishHardshipCaseSubmitEvent(HardshipCaseSubmitEventProducer.java:47)\r\n\tat com.nab.ms.hs.lodgement.application.CreateHardshipRequestService.lambda$publishHardshipCaseSubmitEvent$0(CreateHardshipRequestService.java:108)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1541)\r\n\tat com.nab.ms.hs.lodgement.application.CreateHardshipRequestService.processAccountRequest(CreateHardshipRequestService.java:103)\r\n\tat com.nab.ms.hs.lodgement.application.CreateHardshipRequestService.processNewHardshipRequest(CreateHardshipRequestService.java:75)\r\n\tat com.nab.ms.hs.lodgement.application.HardshipNewRequestService.lambda$processNewHardshipRequest$0(HardshipNewRequestService.java:46)\r\n\tat java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1736)\r\n\tat java.base/java.util.concurrent.CompletableFuture$AsyncRun.exec(CompletableFuture.java:1728)\r\n\tat java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:290)\r\n\tat java.base/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1020)\r\n\tat java.base/java.util.concurrent.ForkJoinPool.scan(ForkJoinPool.java:1656)\r\n\tat java.base/java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1594)\r\n\tat java.base/java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:183)\r\nCaused by: java.lang.ExceptionInInitializerError: null\r\n\tat io.confluent.kafka.serializers.KafkaAvroSerializer.configure(KafkaAvroSerializer.java:50)\r\n\tat org.apache.kafka.clients.producer.KafkaProducer.&lt;init&gt;(KafkaProducer.java:368)\r\n\t... 22 common frames omitted\r\nCaused by: org.apache.kafka.common.config.ConfigException: Invalid value io.confluent.kafka.serializers.subject.TopicNameStrategy for configuration key.subject.name.strategy: Class io.confluent.kafka.serializers.subject.TopicNameStrategy could not be found.\r\n\tat org.apache.kafka.common.config.ConfigDef.parseType(ConfigDef.java:729)\r\n```\r\n\r\nbelow are the dependencies when i run the ```./gradlew dependencies --configuration=runtimeClasspath ``` command\r\n```\r\n+--- org.springframework.kafka:spring-kafka:2.7.1\r\n|    |    +--- org.springframework:spring-context:5.3.7 (*)\r\n|    |    +--- org.springframework:spring-messaging:5.3.7\r\n|    |    |    +--- org.springframework:spring-beans:5.3.7 (*)\r\n|    |    |    \\--- org.springframework:spring-core:5.3.7 (*)\r\n|    |    +--- org.springframework:spring-tx:5.3.7 (*)\r\n|    |    +--- org.springframework.retry:spring-retry:1.3.1\r\n|    |    +--- org.apache.kafka:kafka-clients:2.7.1\r\n|    |    |    +--- com.github.luben:zstd-jni:1.4.5-6\r\n|    |    |    +--- org.lz4:lz4-java:1.7.1\r\n|    |    |    +--- org.xerial.snappy:snappy-java:1.1.7.7\r\n|    |    |    \\--- org.slf4j:slf4j-api:1.7.30\r\n|    |    +--- org.jetbrains.kotlin:kotlin-stdlib:1.4.32\r\n|    |    |    +--- org.jetbrains.kotlin:kotlin-stdlib-common:1.4.32\r\n|    |    |    \\--- org.jetbrains:annotations:13.0\r\n|    |    \\--- com.google.code.findbugs:jsr305:3.0.2\r\n|    +--- org.apache.avro:avro:1.10.2\r\n|    |    +--- com.fasterxml.jackson.core:jackson-core:2.12.2 -&gt; 2.11.4\r\n|    |    +--- com.fasterxml.jackson.core:jackson-databind:2.12.2 -&gt; 2.11.4 (*)\r\n|    |    +--- org.apache.commons:commons-compress:1.20\r\n|    |    \\--- org.slf4j:slf4j-api:1.7.30\r\n|    +--- org.apache.kafka:kafka-clients:2.7.1 (*)\r\n|    +--- org.apache.kafka:kafka-streams:2.7.1 -&gt; 2.6.2\r\n|    |    +--- org.apache.kafka:kafka-clients:2.6.2 -&gt; 2.7.1 (*)\r\n|    |    +--- org.apache.kafka:connect-json:2.6.2\r\n|    |    |    +--- org.apache.kafka:connect-api:2.6.2\r\n|    |    |    |    +--- org.apache.kafka:kafka-clients:2.6.2 -&gt; 2.7.1 (*)\r\n|    |    |    |    \\--- org.slf4j:slf4j-api:1.7.30\r\n|    |    |    +--- com.fasterxml.jackson.core:jackson-databind:2.10.5.1 -&gt; 2.11.4 (*)\r\n|    |    |    +--- com.fasterxml.jackson.datatype:jackson-datatype-jdk8:2.10.5 -&gt; 2.11.4 (*)\r\n|    |    |    \\--- org.slf4j:slf4j-api:1.7.30\r\n|    |    +--- org.slf4j:slf4j-api:1.7.30\r\n|    |    \\--- org.rocksdb:rocksdbjni:5.18.4\r\n|    +--- io.confluent:common-config:6.1.1\r\n|    |    +--- io.confluent:common-utils:6.1.1\r\n|    |    |    \\--- org.slf4j:slf4j-api:1.7.30\r\n|    |    \\--- org.slf4j:slf4j-api:1.7.30\r\n|    +--- io.confluent:common-utils:6.1.1 (*)\r\n|    +--- io.confluent:kafka-avro-serializer:6.1.1\r\n|    |    +--- org.apache.avro:avro:1.9.2 -&gt; 1.10.2 (*)\r\n|    |    +--- io.confluent:kafka-schema-serializer:6.1.1\r\n|    |    |    +--- io.confluent:kafka-schema-registry-client:6.1.1\r\n|    |    |    |    +--- org.apache.kafka:kafka-clients:6.1.1-ccs -&gt; 2.7.1 (*)\r\n|    |    |    |    +--- org.apache.avro:avro:1.9.2 -&gt; 1.10.2 (*)\r\n|    |    |    |    +--- com.fasterxml.jackson.core:jackson-databind:2.10.5.1 -&gt; 2.11.4 (*)\r\n|    |    |    |    +--- jakarta.ws.rs:jakarta.ws.rs-api:2.1.6\r\n|    |    |    |    +--- org.glassfish.jersey.core:jersey-common:2.31 -&gt; 2.32\r\n|    |    |    |    |    +--- jakarta.ws.rs:jakarta.ws.rs-api:2.1.6\r\n|    |    |    |    |    +--- jakarta.annotation:jakarta.annotation-api:1.3.5\r\n|    |    |    |    |    +--- org.glassfish.hk2.external:jakarta.inject:2.6.1\r\n|    |    |    |    |    \\--- org.glassfish.hk2:osgi-resource-locator:1.0.3\r\n|    |    |    |    +--- io.swagger:swagger-annotations:1.6.2\r\n|    |    |    |    \\--- io.confluent:common-utils:6.1.1 (*)\r\n|    |    |    \\--- io.confluent:common-utils:6.1.1 (*)\r\n|    |    +--- io.confluent:kafka-schema-registry-client:6.1.1 (*)\r\n|    |    \\--- io.confluent:common-utils:6.1.1 (*)\r\n|    +--- io.confluent:kafka-schema-registry-client:6.1.1 (*)\r\n|    +--- io.confluent:kafka-streams-avro-serde:6.1.1\r\n|    |    +--- io.confluent:kafka-avro-serializer:6.1.1 (*)\r\n|    |    +--- io.confluent:kafka-schema-registry-client:6.1.1 (*)\r\n|    |    +--- org.apache.avro:avro:1.9.2 -&gt; 1.10.2 (*)\r\n|    |    \\--- io.confluent:common-utils:6.1.1 (*)\r\n|    +--- org.springframework.boot:spring-boot-starter:2.4.5 -&gt; 2.4.6 (*)\r\n```\r\nBelow is the producer code:\r\n```\r\n@Service\r\n@Slf4j\r\npublic class EventProducer {\r\n\r\n  private final KafkaTemplate&lt;EventKey, SubmitEvent&gt; hardshipProducer;\r\n  \r\n  @Value(&quot;${app.kafka.topic.hardship.case.submit.event.name}&quot;)\r\n  private String topicName;\r\n\r\n  public EventProducer(KafkaTemplate&lt;EventKey, SubmitEvent&gt; hardshipProducer) {\r\n    this.hardshipProducer = hardshipProducer;\r\n  }\r\n\r\n  @SneakyThrows\r\n  public void publishHardshipCaseSubmitEvent(HardshipCaseSubmitEvent hardshipCaseSubmitEvent, HardshipData hardshipData) {\r\n    \r\n    ListenableFuture&lt;SendResult&lt;EventKey, SubmitEvent&gt;&gt; future = hardshipProducer.send(topicName,\r\n        EventKey.newBuilder().setCaseId(hardshipData.getHsCaseId()).build(),\r\n        hardshipCaseSubmitEvent);\r\n    future.addCallback(new ListenableFutureCallback&lt;&gt;() {\r\n      @SneakyThrows\r\n      @Override\r\n      public void onFailure(@NonNull Throwable ex) {\r\n        log.error(&quot;Exception = &quot; + ex.getMessage() + &quot; publishing hardshipCaseSubmitEvent for meId = &quot; + hardshipCaseSubmitEvent.getData().getMeId() + &quot;, correlation id=&quot; + correlationId + &quot;, caseId=&quot; + hardshipData.getHsCaseId(), ex);\r\n      }\r\n\r\n      @Override\r\n      public void onSuccess(SendResult&lt;HardshipEventKey, HardshipCaseSubmitEvent&gt; result) {\r\n        \r\n          log.info(&quot;hardshipCaseSubmitEvent event status = success, partition= {}, offset= {}, meId={}, correlation id={}, caseId={}&quot;,\r\n              result.getRecordMetadata().partition(),\r\n              result.getRecordMetadata().offset(),\r\n              hardshipCaseSubmitEvent.getData().getMeId().toString(),\r\n              correlationId,\r\n              hardshipData.getHsCaseId());\r\n        }\r\n      \r\n    });\r\n    hardshipProducer.flush();\r\n  }\r\n}\r\n```\r\n\r\nAlso to note that, the event is produced successfully sometimes and fails sometimes with the above error. I have logged the event body to compare and find no difference whatsoever. I have checked the war files present in the container instances and found that all jar files dependencies are there as expected. The Topic subjects have been setup with TopicNameStrategy and the same is provided in the yml config as well.\r\nPlease let me know if anybody has any idea\r\n\r\nEDIT: add the configs here\r\n```\r\nnabkafka:\r\n  kafka:\r\n    allow.auto.create.topics: false\r\n    schema-registry:\r\n      cache-size: 2048\r\n      auto.register.schemas: false\r\n      key-subject-name-strategy: Topic\r\n      value-subject-name-strategy: Topic\r\n      subject-name-strategy: Topic\r\n      ssl:\r\n        protocol: SSL\r\n        key-store-location: file:${infrastructure.services.ssl.keyStorePath}\r\n        key-store-password: ${infrastructure.services.ssl.keyStorePassword}\r\n        key-password: ${infrastructure.services.ssl.keyStorePassword}\r\n        trust-store-location: file:${infrastructure.services.ssl.trustStorePath}\r\n        trust-store-password: ${infrastructure.services.ssl.trustStorePassword}\r\n        trust-store-type: JKS\r\n        key-store-type: JKS\r\n    producer:\r\n      acks: all\r\n      key-serializer: io.confluent.kafka.serializers.KafkaAvroSerializer\r\n      value-serializer: io.confluent.kafka.serializers.KafkaAvroSerializer\r\n      properties:\r\n        auto.register.schemas: false\r\n    ssl:\r\n      key-store-location: file:${infrastructure.services.ssl.keyStorePath}\r\n      key-store-password: ${infrastructure.services.ssl.keyStorePassword}\r\n      key-password: ${infrastructure.services.ssl.keyStorePassword}\r\n      trust-store-location: file:${infrastructure.services.ssl.trustStorePath}\r\n      trust-store-password: ${infrastructure.services.ssl.trustStorePassword}\r\n```\r\nPlease note that we use a wrapper over spring kafka which works perfectly fine in the organization and even in our non-prod env.","title":"Spring Kafka-ConfigException: Invalid value TopicNameStrategy for configuration key.subject.name.strategy: Class TopicNameStrategy could not be found","body":"<p>we just deployed a kafka producer to prod and facing a weird issue that didn't popup in non-prod. The service is a spring boot microservice that receives a REST HTTP request and uses spring kafka to publish an event onto a topic. The Microservice is hosted on AWS ECS. The java version for this API is set to java 11. Below is the error:</p>\n<pre><code>org.apache.kafka.common.KafkaException: Failed to construct kafka producer\n    at org.apache.kafka.clients.producer.KafkaProducer.&lt;init&gt;(KafkaProducer.java:441)\n    at org.apache.kafka.clients.producer.KafkaProducer.&lt;init&gt;(KafkaProducer.java:291)\n    at org.springframework.kafka.core.DefaultKafkaProducerFactory.createRawProducer(DefaultKafkaProducerFactory.java:743)\n    at org.springframework.kafka.core.DefaultKafkaProducerFactory.createKafkaProducer(DefaultKafkaProducerFactory.java:584)\n    at org.springframework.kafka.core.DefaultKafkaProducerFactory.doCreateProducer(DefaultKafkaProducerFactory.java:544)\n    at org.springframework.kafka.core.DefaultKafkaProducerFactory.createProducer(DefaultKafkaProducerFactory.java:519)\n    at org.springframework.kafka.core.DefaultKafkaProducerFactory.createProducer(DefaultKafkaProducerFactory.java:513)\n    at org.springframework.kafka.core.KafkaTemplate.getTheProducer(KafkaTemplate.java:683)\n    at org.springframework.kafka.core.KafkaTemplate.doSend(KafkaTemplate.java:569)\n    at org.springframework.kafka.core.KafkaTemplate.send(KafkaTemplate.java:386)\n    at com.nab.ms.hs.lodgement.producer.HardshipCaseSubmitEventProducer.publishHardshipCaseSubmitEvent(HardshipCaseSubmitEventProducer.java:47)\n    at com.nab.ms.hs.lodgement.application.CreateHardshipRequestService.lambda$publishHardshipCaseSubmitEvent$0(CreateHardshipRequestService.java:108)\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1541)\n    at com.nab.ms.hs.lodgement.application.CreateHardshipRequestService.processAccountRequest(CreateHardshipRequestService.java:103)\n    at com.nab.ms.hs.lodgement.application.CreateHardshipRequestService.processNewHardshipRequest(CreateHardshipRequestService.java:75)\n    at com.nab.ms.hs.lodgement.application.HardshipNewRequestService.lambda$processNewHardshipRequest$0(HardshipNewRequestService.java:46)\n    at java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1736)\n    at java.base/java.util.concurrent.CompletableFuture$AsyncRun.exec(CompletableFuture.java:1728)\n    at java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:290)\n    at java.base/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1020)\n    at java.base/java.util.concurrent.ForkJoinPool.scan(ForkJoinPool.java:1656)\n    at java.base/java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1594)\n    at java.base/java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:183)\nCaused by: java.lang.ExceptionInInitializerError: null\n    at io.confluent.kafka.serializers.KafkaAvroSerializer.configure(KafkaAvroSerializer.java:50)\n    at org.apache.kafka.clients.producer.KafkaProducer.&lt;init&gt;(KafkaProducer.java:368)\n    ... 22 common frames omitted\nCaused by: org.apache.kafka.common.config.ConfigException: Invalid value io.confluent.kafka.serializers.subject.TopicNameStrategy for configuration key.subject.name.strategy: Class io.confluent.kafka.serializers.subject.TopicNameStrategy could not be found.\n    at org.apache.kafka.common.config.ConfigDef.parseType(ConfigDef.java:729)\n</code></pre>\n<p>below are the dependencies when i run the <code>./gradlew dependencies --configuration=runtimeClasspath </code> command</p>\n<pre><code>+--- org.springframework.kafka:spring-kafka:2.7.1\n|    |    +--- org.springframework:spring-context:5.3.7 (*)\n|    |    +--- org.springframework:spring-messaging:5.3.7\n|    |    |    +--- org.springframework:spring-beans:5.3.7 (*)\n|    |    |    \\--- org.springframework:spring-core:5.3.7 (*)\n|    |    +--- org.springframework:spring-tx:5.3.7 (*)\n|    |    +--- org.springframework.retry:spring-retry:1.3.1\n|    |    +--- org.apache.kafka:kafka-clients:2.7.1\n|    |    |    +--- com.github.luben:zstd-jni:1.4.5-6\n|    |    |    +--- org.lz4:lz4-java:1.7.1\n|    |    |    +--- org.xerial.snappy:snappy-java:1.1.7.7\n|    |    |    \\--- org.slf4j:slf4j-api:1.7.30\n|    |    +--- org.jetbrains.kotlin:kotlin-stdlib:1.4.32\n|    |    |    +--- org.jetbrains.kotlin:kotlin-stdlib-common:1.4.32\n|    |    |    \\--- org.jetbrains:annotations:13.0\n|    |    \\--- com.google.code.findbugs:jsr305:3.0.2\n|    +--- org.apache.avro:avro:1.10.2\n|    |    +--- com.fasterxml.jackson.core:jackson-core:2.12.2 -&gt; 2.11.4\n|    |    +--- com.fasterxml.jackson.core:jackson-databind:2.12.2 -&gt; 2.11.4 (*)\n|    |    +--- org.apache.commons:commons-compress:1.20\n|    |    \\--- org.slf4j:slf4j-api:1.7.30\n|    +--- org.apache.kafka:kafka-clients:2.7.1 (*)\n|    +--- org.apache.kafka:kafka-streams:2.7.1 -&gt; 2.6.2\n|    |    +--- org.apache.kafka:kafka-clients:2.6.2 -&gt; 2.7.1 (*)\n|    |    +--- org.apache.kafka:connect-json:2.6.2\n|    |    |    +--- org.apache.kafka:connect-api:2.6.2\n|    |    |    |    +--- org.apache.kafka:kafka-clients:2.6.2 -&gt; 2.7.1 (*)\n|    |    |    |    \\--- org.slf4j:slf4j-api:1.7.30\n|    |    |    +--- com.fasterxml.jackson.core:jackson-databind:2.10.5.1 -&gt; 2.11.4 (*)\n|    |    |    +--- com.fasterxml.jackson.datatype:jackson-datatype-jdk8:2.10.5 -&gt; 2.11.4 (*)\n|    |    |    \\--- org.slf4j:slf4j-api:1.7.30\n|    |    +--- org.slf4j:slf4j-api:1.7.30\n|    |    \\--- org.rocksdb:rocksdbjni:5.18.4\n|    +--- io.confluent:common-config:6.1.1\n|    |    +--- io.confluent:common-utils:6.1.1\n|    |    |    \\--- org.slf4j:slf4j-api:1.7.30\n|    |    \\--- org.slf4j:slf4j-api:1.7.30\n|    +--- io.confluent:common-utils:6.1.1 (*)\n|    +--- io.confluent:kafka-avro-serializer:6.1.1\n|    |    +--- org.apache.avro:avro:1.9.2 -&gt; 1.10.2 (*)\n|    |    +--- io.confluent:kafka-schema-serializer:6.1.1\n|    |    |    +--- io.confluent:kafka-schema-registry-client:6.1.1\n|    |    |    |    +--- org.apache.kafka:kafka-clients:6.1.1-ccs -&gt; 2.7.1 (*)\n|    |    |    |    +--- org.apache.avro:avro:1.9.2 -&gt; 1.10.2 (*)\n|    |    |    |    +--- com.fasterxml.jackson.core:jackson-databind:2.10.5.1 -&gt; 2.11.4 (*)\n|    |    |    |    +--- jakarta.ws.rs:jakarta.ws.rs-api:2.1.6\n|    |    |    |    +--- org.glassfish.jersey.core:jersey-common:2.31 -&gt; 2.32\n|    |    |    |    |    +--- jakarta.ws.rs:jakarta.ws.rs-api:2.1.6\n|    |    |    |    |    +--- jakarta.annotation:jakarta.annotation-api:1.3.5\n|    |    |    |    |    +--- org.glassfish.hk2.external:jakarta.inject:2.6.1\n|    |    |    |    |    \\--- org.glassfish.hk2:osgi-resource-locator:1.0.3\n|    |    |    |    +--- io.swagger:swagger-annotations:1.6.2\n|    |    |    |    \\--- io.confluent:common-utils:6.1.1 (*)\n|    |    |    \\--- io.confluent:common-utils:6.1.1 (*)\n|    |    +--- io.confluent:kafka-schema-registry-client:6.1.1 (*)\n|    |    \\--- io.confluent:common-utils:6.1.1 (*)\n|    +--- io.confluent:kafka-schema-registry-client:6.1.1 (*)\n|    +--- io.confluent:kafka-streams-avro-serde:6.1.1\n|    |    +--- io.confluent:kafka-avro-serializer:6.1.1 (*)\n|    |    +--- io.confluent:kafka-schema-registry-client:6.1.1 (*)\n|    |    +--- org.apache.avro:avro:1.9.2 -&gt; 1.10.2 (*)\n|    |    \\--- io.confluent:common-utils:6.1.1 (*)\n|    +--- org.springframework.boot:spring-boot-starter:2.4.5 -&gt; 2.4.6 (*)\n</code></pre>\n<p>Below is the producer code:</p>\n<pre><code>@Service\n@Slf4j\npublic class EventProducer {\n\n  private final KafkaTemplate&lt;EventKey, SubmitEvent&gt; hardshipProducer;\n  \n  @Value(&quot;${app.kafka.topic.hardship.case.submit.event.name}&quot;)\n  private String topicName;\n\n  public EventProducer(KafkaTemplate&lt;EventKey, SubmitEvent&gt; hardshipProducer) {\n    this.hardshipProducer = hardshipProducer;\n  }\n\n  @SneakyThrows\n  public void publishHardshipCaseSubmitEvent(HardshipCaseSubmitEvent hardshipCaseSubmitEvent, HardshipData hardshipData) {\n    \n    ListenableFuture&lt;SendResult&lt;EventKey, SubmitEvent&gt;&gt; future = hardshipProducer.send(topicName,\n        EventKey.newBuilder().setCaseId(hardshipData.getHsCaseId()).build(),\n        hardshipCaseSubmitEvent);\n    future.addCallback(new ListenableFutureCallback&lt;&gt;() {\n      @SneakyThrows\n      @Override\n      public void onFailure(@NonNull Throwable ex) {\n        log.error(&quot;Exception = &quot; + ex.getMessage() + &quot; publishing hardshipCaseSubmitEvent for meId = &quot; + hardshipCaseSubmitEvent.getData().getMeId() + &quot;, correlation id=&quot; + correlationId + &quot;, caseId=&quot; + hardshipData.getHsCaseId(), ex);\n      }\n\n      @Override\n      public void onSuccess(SendResult&lt;HardshipEventKey, HardshipCaseSubmitEvent&gt; result) {\n        \n          log.info(&quot;hardshipCaseSubmitEvent event status = success, partition= {}, offset= {}, meId={}, correlation id={}, caseId={}&quot;,\n              result.getRecordMetadata().partition(),\n              result.getRecordMetadata().offset(),\n              hardshipCaseSubmitEvent.getData().getMeId().toString(),\n              correlationId,\n              hardshipData.getHsCaseId());\n        }\n      \n    });\n    hardshipProducer.flush();\n  }\n}\n</code></pre>\n<p>Also to note that, the event is produced successfully sometimes and fails sometimes with the above error. I have logged the event body to compare and find no difference whatsoever. I have checked the war files present in the container instances and found that all jar files dependencies are there as expected. The Topic subjects have been setup with TopicNameStrategy and the same is provided in the yml config as well.\nPlease let me know if anybody has any idea</p>\n<p>EDIT: add the configs here</p>\n<pre><code>nabkafka:\n  kafka:\n    allow.auto.create.topics: false\n    schema-registry:\n      cache-size: 2048\n      auto.register.schemas: false\n      key-subject-name-strategy: Topic\n      value-subject-name-strategy: Topic\n      subject-name-strategy: Topic\n      ssl:\n        protocol: SSL\n        key-store-location: file:${infrastructure.services.ssl.keyStorePath}\n        key-store-password: ${infrastructure.services.ssl.keyStorePassword}\n        key-password: ${infrastructure.services.ssl.keyStorePassword}\n        trust-store-location: file:${infrastructure.services.ssl.trustStorePath}\n        trust-store-password: ${infrastructure.services.ssl.trustStorePassword}\n        trust-store-type: JKS\n        key-store-type: JKS\n    producer:\n      acks: all\n      key-serializer: io.confluent.kafka.serializers.KafkaAvroSerializer\n      value-serializer: io.confluent.kafka.serializers.KafkaAvroSerializer\n      properties:\n        auto.register.schemas: false\n    ssl:\n      key-store-location: file:${infrastructure.services.ssl.keyStorePath}\n      key-store-password: ${infrastructure.services.ssl.keyStorePassword}\n      key-password: ${infrastructure.services.ssl.keyStorePassword}\n      trust-store-location: file:${infrastructure.services.ssl.trustStorePath}\n      trust-store-password: ${infrastructure.services.ssl.trustStorePassword}\n</code></pre>\n<p>Please note that we use a wrapper over spring kafka which works perfectly fine in the organization and even in our non-prod env.</p>\n"},{"tags":["java","sql","postgresql","jooq"],"answers":[{"tags":[],"owner":{"account_id":1156433,"reputation":1407,"user_id":1136905,"accept_rate":83,"display_name":"swaechter"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1657742125,"creation_date":1657742125,"answer_id":72971925,"question_id":72970089,"body_markdown":"After reading another question https://stackoverflow.com/questions/55238643/jooq-join-with-nested-subquery (and not realizing the solution) and playing around with generating Java code via https://www.jooq.org/translate/, it clicked. In combination with reading https://www.jooq.org/doc/latest/manual/sql-building/column-expressions/scalar-subqueries/ one can simple add the subquery as `IN()` condition before executing the query. To be honest I am not sure if this is the most performant solution. The `searchDocuments` method then looks like this:\r\n\r\n```java\r\n    private List&lt;CustomDocument&gt; searchDocuments(UUID documentId, String fileName, Integer fileSize, Map&lt;UUID, String&gt; attributes) {\r\n        // Get the transaction manager\r\n        TransactionManager transactionManager = getBean(TransactionManager.class);\r\n\r\n        // Get the initial condition\r\n        Condition condition = DSL.noCondition();\r\n\r\n        // Check for an optional document ID\r\n        if (documentId != null) {\r\n            condition = condition.and(DOCUMENT.ID.eq(documentId));\r\n        }\r\n\r\n        // Check for an optional file name\r\n        if (fileName != null) {\r\n            condition = condition.and(DOCUMENT.FILE_NAME.eq(fileName));\r\n        }\r\n\r\n        // Check for an optional file size\r\n        if (fileSize != null) {\r\n            condition = condition.and(DOCUMENT.FILE_SIZE.eq(fileSize));\r\n        }\r\n\r\n        // Check for optional document attributes\r\n        if (attributes != null &amp;&amp; !attributes.isEmpty()) {\r\n            for (Map.Entry&lt;UUID, String&gt; entry : attributes.entrySet()) {\r\n                condition = condition.and(DOCUMENT.ID.in(select(DOCUMENT_ATTRIBUTE.DOCUMENT_ID).from(DOCUMENT_ATTRIBUTE).where(DOCUMENT_ATTRIBUTE.DOCUMENT_ID.eq(DOCUMENT.ID).and(DOCUMENT_ATTRIBUTE.ARCHIVE_ATTRIBUTE_ID.eq(entry.getKey()).and(DOCUMENT_ATTRIBUTE.VALUE.eq(entry.getValue()))))));\r\n            }\r\n        }\r\n\r\n        // Create the query\r\n        return transactionManager.getDslContext().select(\r\n            DOCUMENT.ID,\r\n            DOCUMENT.FILE_NAME,\r\n            DOCUMENT.FILE_SIZE,\r\n            multiset(\r\n                selectDistinct(\r\n                    DOCUMENT_ATTRIBUTE.DOCUMENT_ID,\r\n                    DOCUMENT_ATTRIBUTE.ARCHIVE_ATTRIBUTE_ID,\r\n                    DOCUMENT_ATTRIBUTE.VALUE\r\n                ).from(DOCUMENT_ATTRIBUTE).where(DOCUMENT_ATTRIBUTE.DOCUMENT_ID.eq(DOCUMENT.ID))\r\n            ).convertFrom(record -&gt; record.map(record1 -&gt; new CustomDocumentAttribute(record1.value1(), record1.value2(), record1.value3())))\r\n        ).from(DOCUMENT\r\n        ).where(condition\r\n        ).fetch(record -&gt; new CustomDocument(record.value1(), record.value2(), record.value3(), record.value4()));\r\n    }\r\n```","title":"How to generate arbitrary subqueries/joins in a Jooq query","body":"<p>After reading another question <a href=\"https://stackoverflow.com/questions/55238643/jooq-join-with-nested-subquery\">jOOQ - join with nested subquery</a> (and not realizing the solution) and playing around with generating Java code via <a href=\"https://www.jooq.org/translate/\" rel=\"nofollow noreferrer\">https://www.jooq.org/translate/</a>, it clicked. In combination with reading <a href=\"https://www.jooq.org/doc/latest/manual/sql-building/column-expressions/scalar-subqueries/\" rel=\"nofollow noreferrer\">https://www.jooq.org/doc/latest/manual/sql-building/column-expressions/scalar-subqueries/</a> one can simple add the subquery as <code>IN()</code> condition before executing the query. To be honest I am not sure if this is the most performant solution. The <code>searchDocuments</code> method then looks like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    private List&lt;CustomDocument&gt; searchDocuments(UUID documentId, String fileName, Integer fileSize, Map&lt;UUID, String&gt; attributes) {\n        // Get the transaction manager\n        TransactionManager transactionManager = getBean(TransactionManager.class);\n\n        // Get the initial condition\n        Condition condition = DSL.noCondition();\n\n        // Check for an optional document ID\n        if (documentId != null) {\n            condition = condition.and(DOCUMENT.ID.eq(documentId));\n        }\n\n        // Check for an optional file name\n        if (fileName != null) {\n            condition = condition.and(DOCUMENT.FILE_NAME.eq(fileName));\n        }\n\n        // Check for an optional file size\n        if (fileSize != null) {\n            condition = condition.and(DOCUMENT.FILE_SIZE.eq(fileSize));\n        }\n\n        // Check for optional document attributes\n        if (attributes != null &amp;&amp; !attributes.isEmpty()) {\n            for (Map.Entry&lt;UUID, String&gt; entry : attributes.entrySet()) {\n                condition = condition.and(DOCUMENT.ID.in(select(DOCUMENT_ATTRIBUTE.DOCUMENT_ID).from(DOCUMENT_ATTRIBUTE).where(DOCUMENT_ATTRIBUTE.DOCUMENT_ID.eq(DOCUMENT.ID).and(DOCUMENT_ATTRIBUTE.ARCHIVE_ATTRIBUTE_ID.eq(entry.getKey()).and(DOCUMENT_ATTRIBUTE.VALUE.eq(entry.getValue()))))));\n            }\n        }\n\n        // Create the query\n        return transactionManager.getDslContext().select(\n            DOCUMENT.ID,\n            DOCUMENT.FILE_NAME,\n            DOCUMENT.FILE_SIZE,\n            multiset(\n                selectDistinct(\n                    DOCUMENT_ATTRIBUTE.DOCUMENT_ID,\n                    DOCUMENT_ATTRIBUTE.ARCHIVE_ATTRIBUTE_ID,\n                    DOCUMENT_ATTRIBUTE.VALUE\n                ).from(DOCUMENT_ATTRIBUTE).where(DOCUMENT_ATTRIBUTE.DOCUMENT_ID.eq(DOCUMENT.ID))\n            ).convertFrom(record -&gt; record.map(record1 -&gt; new CustomDocumentAttribute(record1.value1(), record1.value2(), record1.value3())))\n        ).from(DOCUMENT\n        ).where(condition\n        ).fetch(record -&gt; new CustomDocument(record.value1(), record.value2(), record.value3(), record.value4()));\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":247217,"reputation":213455,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1658395121,"creation_date":1658395121,"answer_id":73063624,"question_id":72970089,"body_markdown":"### Regarding your questions\r\n\r\n&gt; 1.) How can I achieve this arbitrary adding of subqueries?\r\n\r\nYou already found a solution to that question in [your own answer][1], though I&#39;ll suggest an alternative that I personally prefer. Your approach creates N subqueries hitting your table N times.\r\n\r\n&gt; 2.) Is a INNER JOIN more performant than a subquery?\r\n\r\nThere&#39;s no general rule to this. It&#39;s all just relational algebra. If the optimiser can prove two expressions are the same thing, they can be transformed to each other. However, an `INNER JOIN` is not the exact same thing as a semi join, i.e. an `IN` predicate (although sometimes it is, in the presence of constraints). So the two operators aren&#39;t exactly equivalent, logically\r\n\r\n### An alternative approach\r\n\r\nYour own approach maps the `Map&lt;UUID, String&gt;` to subqueries, hitting the `DOCUMENT_ATTRIBUTE` N times. I&#39;m guessing that the PG optimiser might not be able to see through this and factor out the common parts into a single subquery (though technically, it could). So, I&#39;d rather create a single subquery of the form:\r\n\r\n```sql\r\nWHERE document.id IN (\r\n  SELECT a.document_id\r\n  FROM document_attribute AS a\r\n  WHERE (a.archive_attribute_id, a.value) IN (\r\n    (?, ?),\r\n    (?, ?), ...\r\n  )\r\n)\r\n```\r\n\r\nOr, dynamically, with jOOQ:\r\n\r\n```java\r\nDOCUMENT.ID.in(\r\n  select(DOCUMENT_ATTRIBUTE_DOCUMENT_ID)\r\n  .from(DOCUMENT_ATTRIBUTE)\r\n  .where(row(DOCUMENT_ATTRIBUTE.ARCHIVE_ATTRIBUTE_ID, DOCUMENT_ATTRIBUTE.VALUE).in(\r\n    attributes.entrySet().stream().collect(Rows.toRowList(\r\n      Entry::getKey,\r\n      Entry::getValue\r\n    ))\r\n  ))\r\n)\r\n```\r\n\r\nUsing [`org.jooq.Rows::toRowList`][2] collectors.\r\n\r\n&gt; Note: I don&#39;t think you have to further correlate the `IN` predicate&#39;s subquery by specifying a `DOCUMENT_ATTRIBUTE.DOCUMENT_ID.eq(DOCUMENT.ID)` predicate. That correlation is already implied by using `IN` itself.\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/72971925/521799\r\n  [2]: https://www.jooq.org/javadoc/latest/org.jooq/org/jooq/Rows.html#toRowList(java.util.function.Function,java.util.function.Function)","title":"How to generate arbitrary subqueries/joins in a Jooq query","body":"<h3>Regarding your questions</h3>\n<blockquote>\n<p>1.) How can I achieve this arbitrary adding of subqueries?</p>\n</blockquote>\n<p>You already found a solution to that question in <a href=\"https://stackoverflow.com/a/72971925/521799\">your own answer</a>, though I'll suggest an alternative that I personally prefer. Your approach creates N subqueries hitting your table N times.</p>\n<blockquote>\n<p>2.) Is a INNER JOIN more performant than a subquery?</p>\n</blockquote>\n<p>There's no general rule to this. It's all just relational algebra. If the optimiser can prove two expressions are the same thing, they can be transformed to each other. However, an <code>INNER JOIN</code> is not the exact same thing as a semi join, i.e. an <code>IN</code> predicate (although sometimes it is, in the presence of constraints). So the two operators aren't exactly equivalent, logically</p>\n<h3>An alternative approach</h3>\n<p>Your own approach maps the <code>Map&lt;UUID, String&gt;</code> to subqueries, hitting the <code>DOCUMENT_ATTRIBUTE</code> N times. I'm guessing that the PG optimiser might not be able to see through this and factor out the common parts into a single subquery (though technically, it could). So, I'd rather create a single subquery of the form:</p>\n<pre class=\"lang-sql prettyprint-override\"><code>WHERE document.id IN (\n  SELECT a.document_id\n  FROM document_attribute AS a\n  WHERE (a.archive_attribute_id, a.value) IN (\n    (?, ?),\n    (?, ?), ...\n  )\n)\n</code></pre>\n<p>Or, dynamically, with jOOQ:</p>\n<pre class=\"lang-java prettyprint-override\"><code>DOCUMENT.ID.in(\n  select(DOCUMENT_ATTRIBUTE_DOCUMENT_ID)\n  .from(DOCUMENT_ATTRIBUTE)\n  .where(row(DOCUMENT_ATTRIBUTE.ARCHIVE_ATTRIBUTE_ID, DOCUMENT_ATTRIBUTE.VALUE).in(\n    attributes.entrySet().stream().collect(Rows.toRowList(\n      Entry::getKey,\n      Entry::getValue\n    ))\n  ))\n)\n</code></pre>\n<p>Using <a href=\"https://www.jooq.org/javadoc/latest/org.jooq/org/jooq/Rows.html#toRowList(java.util.function.Function,java.util.function.Function)\" rel=\"nofollow noreferrer\"><code>org.jooq.Rows::toRowList</code></a> collectors.</p>\n<blockquote>\n<p>Note: I don't think you have to further correlate the <code>IN</code> predicate's subquery by specifying a <code>DOCUMENT_ATTRIBUTE.DOCUMENT_ID.eq(DOCUMENT.ID)</code> predicate. That correlation is already implied by using <code>IN</code> itself.</p>\n</blockquote>\n"}],"owner":{"account_id":1156433,"reputation":1407,"user_id":1136905,"accept_rate":83,"display_name":"swaechter"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":358,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73063624,"answer_count":2,"score":1,"last_activity_date":1658395121,"creation_date":1657731978,"question_id":72970089,"body_markdown":"**Situation**: I am porting our application to Jooq to eliminate several n+1 problems and ensure custom queries are type-safe (DB server is Postgresql 13). In my example we have documents (ID, file name, file size). Each document can have several unqique document attributes (Document ID as FK, archive attribute ID - the type of the attribute and the value). Example data:\r\n\r\nDocument:\r\n\r\n```\r\nacme=&gt; select id, file_name, file_size from document;\r\n                  id                  |        file_name        | file_size \r\n--------------------------------------+-------------------------+-----------\r\n 1ae56478-d27c-4b68-b6c0-a8bdf36dd341 | My Really cool book.pdf |     13264\r\n(1 row)\r\n```\r\n\r\nDocument Attributes:\r\n\r\n```\r\nacme=&gt; select * from document_attribute ;\r\n             document_id              |         archive_attribute_id         |   value    \r\n--------------------------------------+--------------------------------------+------------\r\n 1ae56478-d27c-4b68-b6c0-a8bdf36dd341 | b334e287-887f-4173-956d-c068edc881f8 | JustReleased\r\n 1ae56478-d27c-4b68-b6c0-a8bdf36dd341 | 2f86a675-4cb2-4609-8e77-c2063ab155f1 | Tax\r\n 1ae56478-d27c-4b68-b6c0-a8bdf36dd341 | 30bb9696-fc18-4c87-b6bd-5e01497ca431 | ShippingRequired\r\n 1ae56478-d27c-4b68-b6c0-a8bdf36dd341 | 2eb04674-1dcb-4fbc-93c3-73491deb7de2 | Bestseller\r\n 1ae56478-d27c-4b68-b6c0-a8bdf36dd341 | a8e2f902-bf04-42e8-8ac9-94cdbf4b6778 | Paperback\r\n(5 rows)\r\n```\r\n\r\nOne can search via custom created JDBC prepared statement for these documents and their attribute. A user was able to create this query for a document ID and two document attributes with matching value, which returned the book &#39;My Really cool book.pdf&#39;:\r\n\r\n```\r\nSELECT d.id FROM document d WHERE d.id = &#39;1ae56478-d27c-4b68-b6c0-a8bdf36dd341&#39;\r\nAND d.id IN(SELECT da.document_id AS id0 FROM document_attribute da WHERE da.archive_attribute_id = &#39;2eb04674-1dcb-4fbc-93c3-73491deb7de2&#39; AND da.value = &#39;Bestseller&#39;)\r\nAND d.id IN(SELECT da.document_id AS id1 FROM document_attribute da WHERE da.archive_attribute_id = &#39;a8e2f902-bf04-42e8-8ac9-94cdbf4b6778&#39; AND da.value = &#39;Paperback&#39;);\r\n```\r\n\r\n(After that the application fetches all document attributes for the returned document IDs - thus the n + 1 problem we want to solve)\r\n\r\nPlease note that all document values and document attributes are optional. One can only search for the file name or file size of a document but also several document attributes.\r\n\r\n**Question/Problems:**\r\n\r\nI wanted to port this code to Jooq and use a multiset, but I am struggeling how to apply the arbitrary subquery or join condition to the document attributes:\r\n\r\n1.) How can I achieve this arbitrary adding of subqueries?\r\n\r\n2.) Is a INNER JOIN more performant than a subquery?\r\n\r\nCode:\r\n\r\n```java\r\nimport org.jooq.Condition;\r\nimport org.jooq.impl.DSL;\r\nimport org.junit.jupiter.api.Test;\r\n\r\nimport java.util.List;\r\nimport java.util.Map;\r\nimport java.util.UUID;\r\n\r\nimport static org.jooq.impl.DSL.multiset;\r\nimport static org.jooq.impl.DSL.selectDistinct;\r\n\r\npublic class InSelectExample extends BaseTest {\r\n\r\n    private record CustomDocumentAttribute(\r\n        UUID documentId, // ID of the document the attribute belongs to\r\n        UUID archiveAttributeId, // There are predefined attribute types in our application. This ID  references them\r\n        String value // Real value of this attribute for the document\r\n    ) {\r\n    }\r\n\r\n    private record CustomDocument(\r\n        UUID documentId, // ID of the document\r\n        String fileName, // File name of the document\r\n        Integer fileSize, // File size in bytes of the document\r\n        List&lt;CustomDocumentAttribute&gt; attributes // Attributes the document has\r\n    ) {\r\n    }\r\n\r\n    @Test\r\n    public void findPdfDocumentsWithParameters() {\r\n        // Should print the single book\r\n        List&lt;CustomDocument&gt; documents = searchDocuments(UUID.fromString(&quot;1ae56478-d27c-4b68-b6c0-a8bdf36dd341&quot;), &quot;My Really cool book.pdf&quot;, 13264, Map.of(\r\n            UUID.fromString(&quot;2eb04674-1dcb-4fbc-93c3-73491deb7de2&quot;), &quot;Bestseller&quot;,\r\n            UUID.fromString(&quot;a8e2f902-bf04-42e8-8ac9-94cdbf4b6778&quot;), &quot;Paperback&quot;\r\n        ));\r\n        System.out.println(&quot;Size: &quot; + documents.size()); // Should return 1 document\r\n\r\n        // Should print no books because one of the document attribute value doesn&#39;t match (Booklet instead of Paperback)\r\n        documents = searchDocuments(UUID.fromString(&quot;1ae56478-d27c-4b68-b6c0-a8bdf36dd341&quot;), &quot;My Really cool book.pdf&quot;, 13264, Map.of(\r\n            UUID.fromString(&quot;2eb04674-1dcb-4fbc-93c3-73491deb7de2&quot;), &quot;Bestseller&quot;,\r\n            UUID.fromString(&quot;a8e2f902-bf04-42e8-8ac9-94cdbf4b6778&quot;), &quot;Booklet&quot;\r\n        ));\r\n        System.out.println(&quot;Size: &quot; + documents.size()); // Should return 0 documents\r\n    }\r\n\r\n    private List&lt;CustomDocument&gt; searchDocuments(UUID documentId, String fileName, Integer fileSize, Map&lt;UUID, String&gt; attributes) {\r\n        // Get the transaction manager\r\n        TransactionManager transactionManager = getBean(TransactionManager.class);\r\n\r\n        // Get the initial condition\r\n        Condition condition = DSL.noCondition();\r\n\r\n        // Check for an optional document ID\r\n        if (documentId != null) {\r\n            condition = condition.and(DOCUMENT.ID.eq(documentId));\r\n        }\r\n\r\n        // Check for an optional file name\r\n        if (fileName != null) {\r\n            condition = condition.and(DOCUMENT.FILE_NAME.eq(fileName));\r\n        }\r\n\r\n        // Check for an optional file size\r\n        if (fileSize != null) {\r\n            condition = condition.and(DOCUMENT.FILE_SIZE.eq(fileSize));\r\n        }\r\n\r\n        // Create the query\r\n        var step1 = transactionManager.getDslContext().select(\r\n            DOCUMENT.ID,\r\n            DOCUMENT.FILE_NAME,\r\n            DOCUMENT.FILE_SIZE,\r\n            multiset(\r\n                selectDistinct(\r\n                    DOCUMENT_ATTRIBUTE.DOCUMENT_ID,\r\n                    DOCUMENT_ATTRIBUTE.ARCHIVE_ATTRIBUTE_ID,\r\n                    DOCUMENT_ATTRIBUTE.VALUE\r\n                ).from(DOCUMENT_ATTRIBUTE).where(DOCUMENT_ATTRIBUTE.DOCUMENT_ID.eq(DOCUMENT.ID))\r\n            ).convertFrom(record -&gt; record.map(record1 -&gt; new CustomDocumentAttribute(record1.value1(), record1.value2(), record1.value3())))\r\n        ).from(DOCUMENT\r\n        ).where(condition);\r\n\r\n        // TODO: What to do here?\r\n        var step3 = ...? What type?\r\n        for (Map.Entry&lt;UUID, String&gt; attributeEntry : attributes.entrySet()) {\r\n            // ???\r\n            // Reference: AND d.id IN(SELECT da.document_id AS id0 FROM document_attribute da WHERE da.archive_attribute_id = ? AND da.value = ?)\r\n            var step2 = step1.and(...??????)\r\n        }\r\n\r\n        // Finally fetch and return\r\n        return step1.fetch(record -&gt; new CustomDocument(record.value1(), record.value2(), record.value3(), record.value4()));\r\n    }\r\n}\r\n```\r\n","title":"How to generate arbitrary subqueries/joins in a Jooq query","body":"<p><strong>Situation</strong>: I am porting our application to Jooq to eliminate several n+1 problems and ensure custom queries are type-safe (DB server is Postgresql 13). In my example we have documents (ID, file name, file size). Each document can have several unqique document attributes (Document ID as FK, archive attribute ID - the type of the attribute and the value). Example data:</p>\n<p>Document:</p>\n<pre><code>acme=&gt; select id, file_name, file_size from document;\n                  id                  |        file_name        | file_size \n--------------------------------------+-------------------------+-----------\n 1ae56478-d27c-4b68-b6c0-a8bdf36dd341 | My Really cool book.pdf |     13264\n(1 row)\n</code></pre>\n<p>Document Attributes:</p>\n<pre><code>acme=&gt; select * from document_attribute ;\n             document_id              |         archive_attribute_id         |   value    \n--------------------------------------+--------------------------------------+------------\n 1ae56478-d27c-4b68-b6c0-a8bdf36dd341 | b334e287-887f-4173-956d-c068edc881f8 | JustReleased\n 1ae56478-d27c-4b68-b6c0-a8bdf36dd341 | 2f86a675-4cb2-4609-8e77-c2063ab155f1 | Tax\n 1ae56478-d27c-4b68-b6c0-a8bdf36dd341 | 30bb9696-fc18-4c87-b6bd-5e01497ca431 | ShippingRequired\n 1ae56478-d27c-4b68-b6c0-a8bdf36dd341 | 2eb04674-1dcb-4fbc-93c3-73491deb7de2 | Bestseller\n 1ae56478-d27c-4b68-b6c0-a8bdf36dd341 | a8e2f902-bf04-42e8-8ac9-94cdbf4b6778 | Paperback\n(5 rows)\n</code></pre>\n<p>One can search via custom created JDBC prepared statement for these documents and their attribute. A user was able to create this query for a document ID and two document attributes with matching value, which returned the book 'My Really cool book.pdf':</p>\n<pre><code>SELECT d.id FROM document d WHERE d.id = '1ae56478-d27c-4b68-b6c0-a8bdf36dd341'\nAND d.id IN(SELECT da.document_id AS id0 FROM document_attribute da WHERE da.archive_attribute_id = '2eb04674-1dcb-4fbc-93c3-73491deb7de2' AND da.value = 'Bestseller')\nAND d.id IN(SELECT da.document_id AS id1 FROM document_attribute da WHERE da.archive_attribute_id = 'a8e2f902-bf04-42e8-8ac9-94cdbf4b6778' AND da.value = 'Paperback');\n</code></pre>\n<p>(After that the application fetches all document attributes for the returned document IDs - thus the n + 1 problem we want to solve)</p>\n<p>Please note that all document values and document attributes are optional. One can only search for the file name or file size of a document but also several document attributes.</p>\n<p><strong>Question/Problems:</strong></p>\n<p>I wanted to port this code to Jooq and use a multiset, but I am struggeling how to apply the arbitrary subquery or join condition to the document attributes:</p>\n<p>1.) How can I achieve this arbitrary adding of subqueries?</p>\n<p>2.) Is a INNER JOIN more performant than a subquery?</p>\n<p>Code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import org.jooq.Condition;\nimport org.jooq.impl.DSL;\nimport org.junit.jupiter.api.Test;\n\nimport java.util.List;\nimport java.util.Map;\nimport java.util.UUID;\n\nimport static org.jooq.impl.DSL.multiset;\nimport static org.jooq.impl.DSL.selectDistinct;\n\npublic class InSelectExample extends BaseTest {\n\n    private record CustomDocumentAttribute(\n        UUID documentId, // ID of the document the attribute belongs to\n        UUID archiveAttributeId, // There are predefined attribute types in our application. This ID  references them\n        String value // Real value of this attribute for the document\n    ) {\n    }\n\n    private record CustomDocument(\n        UUID documentId, // ID of the document\n        String fileName, // File name of the document\n        Integer fileSize, // File size in bytes of the document\n        List&lt;CustomDocumentAttribute&gt; attributes // Attributes the document has\n    ) {\n    }\n\n    @Test\n    public void findPdfDocumentsWithParameters() {\n        // Should print the single book\n        List&lt;CustomDocument&gt; documents = searchDocuments(UUID.fromString(&quot;1ae56478-d27c-4b68-b6c0-a8bdf36dd341&quot;), &quot;My Really cool book.pdf&quot;, 13264, Map.of(\n            UUID.fromString(&quot;2eb04674-1dcb-4fbc-93c3-73491deb7de2&quot;), &quot;Bestseller&quot;,\n            UUID.fromString(&quot;a8e2f902-bf04-42e8-8ac9-94cdbf4b6778&quot;), &quot;Paperback&quot;\n        ));\n        System.out.println(&quot;Size: &quot; + documents.size()); // Should return 1 document\n\n        // Should print no books because one of the document attribute value doesn't match (Booklet instead of Paperback)\n        documents = searchDocuments(UUID.fromString(&quot;1ae56478-d27c-4b68-b6c0-a8bdf36dd341&quot;), &quot;My Really cool book.pdf&quot;, 13264, Map.of(\n            UUID.fromString(&quot;2eb04674-1dcb-4fbc-93c3-73491deb7de2&quot;), &quot;Bestseller&quot;,\n            UUID.fromString(&quot;a8e2f902-bf04-42e8-8ac9-94cdbf4b6778&quot;), &quot;Booklet&quot;\n        ));\n        System.out.println(&quot;Size: &quot; + documents.size()); // Should return 0 documents\n    }\n\n    private List&lt;CustomDocument&gt; searchDocuments(UUID documentId, String fileName, Integer fileSize, Map&lt;UUID, String&gt; attributes) {\n        // Get the transaction manager\n        TransactionManager transactionManager = getBean(TransactionManager.class);\n\n        // Get the initial condition\n        Condition condition = DSL.noCondition();\n\n        // Check for an optional document ID\n        if (documentId != null) {\n            condition = condition.and(DOCUMENT.ID.eq(documentId));\n        }\n\n        // Check for an optional file name\n        if (fileName != null) {\n            condition = condition.and(DOCUMENT.FILE_NAME.eq(fileName));\n        }\n\n        // Check for an optional file size\n        if (fileSize != null) {\n            condition = condition.and(DOCUMENT.FILE_SIZE.eq(fileSize));\n        }\n\n        // Create the query\n        var step1 = transactionManager.getDslContext().select(\n            DOCUMENT.ID,\n            DOCUMENT.FILE_NAME,\n            DOCUMENT.FILE_SIZE,\n            multiset(\n                selectDistinct(\n                    DOCUMENT_ATTRIBUTE.DOCUMENT_ID,\n                    DOCUMENT_ATTRIBUTE.ARCHIVE_ATTRIBUTE_ID,\n                    DOCUMENT_ATTRIBUTE.VALUE\n                ).from(DOCUMENT_ATTRIBUTE).where(DOCUMENT_ATTRIBUTE.DOCUMENT_ID.eq(DOCUMENT.ID))\n            ).convertFrom(record -&gt; record.map(record1 -&gt; new CustomDocumentAttribute(record1.value1(), record1.value2(), record1.value3())))\n        ).from(DOCUMENT\n        ).where(condition);\n\n        // TODO: What to do here?\n        var step3 = ...? What type?\n        for (Map.Entry&lt;UUID, String&gt; attributeEntry : attributes.entrySet()) {\n            // ???\n            // Reference: AND d.id IN(SELECT da.document_id AS id0 FROM document_attribute da WHERE da.archive_attribute_id = ? AND da.value = ?)\n            var step2 = step1.and(...??????)\n        }\n\n        // Finally fetch and return\n        return step1.fetch(record -&gt; new CustomDocument(record.value1(), record.value2(), record.value3(), record.value4()));\n    }\n}\n</code></pre>\n"},{"tags":["java","android","firebase","firebase-realtime-database"],"answers":[{"tags":[],"owner":{"account_id":9825780,"reputation":1022,"user_id":7278919,"accept_rate":100,"display_name":"Yunus Kulyyev"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1528844254,"creation_date":1528844254,"answer_id":50826956,"question_id":50826697,"body_markdown":"You can get all of the children nodes of the parent &quot;Forum&quot; node. Just use getChildren() method. Then just randomly select one of the child node at position index.\r\n\r\n    DataSnapshot snapshot = dataSnapshot.child(&quot;Forums&quot;);\r\n    Iterable&lt;DataSnapshot&gt; children = snapshot.getChildren();\r\n\r\n    for (DataSnapshot child: children) {\r\n    \t\tObject obj = child.getValue(Object.class);\r\n    }\r\n\r\n ","title":"Firebase data retrieve with random keys","body":"<p>You can get all of the children nodes of the parent \"Forum\" node. Just use getChildren() method. Then just randomly select one of the child node at position index.</p>\n\n<pre><code>DataSnapshot snapshot = dataSnapshot.child(\"Forums\");\nIterable&lt;DataSnapshot&gt; children = snapshot.getChildren();\n\nfor (DataSnapshot child: children) {\n        Object obj = child.getValue(Object.class);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11835172,"reputation":1783,"user_id":8660721,"display_name":"Mohammad Sommakia"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1528935319,"creation_date":1528856621,"answer_id":50828256,"question_id":50826697,"body_markdown":"first you should write your class model **&quot;FormusModel&quot;** to store the data from server \r\nyou can use this \r\n\r\n  \r\n\r\n  \r\n\r\n      &gt;   &gt; \r\n\r\n    rootRef.child(&quot;Forums&quot;).addChildEventListener(new\r\n        &gt; ChildEventListener() {\r\n        &gt;     &gt;                 @Override\r\n        &gt;     &gt;                 public void onChildAdded(DataSnapshot dataSnapshot, String s) {\r\n        &gt;     &gt;                     ForumsModel model = dataSnapshot.getValue(FormusModel.class);\r\n    //now you can use model.getname();.... \r\n        &gt;     }\r\n\r\n*Note:* you must implemnt another method like **onChildCahnge** listener\r\n","title":"Firebase data retrieve with random keys","body":"<p>first you should write your class model <strong>\"FormusModel\"</strong> to store the data from server \nyou can use this </p>\n\n<pre><code>  &gt;   &gt; \n\nrootRef.child(\"Forums\").addChildEventListener(new\n    &gt; ChildEventListener() {\n    &gt;     &gt;                 @Override\n    &gt;     &gt;                 public void onChildAdded(DataSnapshot dataSnapshot, String s) {\n    &gt;     &gt;                     ForumsModel model = dataSnapshot.getValue(FormusModel.class);\n//now you can use model.getname();.... \n    &gt;     }\n</code></pre>\n\n<p><em>Note:</em> you must implemnt another method like <strong>onChildCahnge</strong> listener</p>\n"},{"tags":[],"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1658394776,"creation_date":1528873335,"answer_id":50830928,"question_id":50826697,"body_markdown":"To display the values of all the children under `Forums` node, please use the following lines of code:\r\n\r\n\tDatabaseReference db = FirebaseDatabase.getInstance().getReference();\r\n\tDatabaseReference forumsRef = db.child(&quot;Forums&quot;);\r\n\tValueEventListener valueEventListener = new ValueEventListener() {\r\n\t\t@Override\r\n\t\tpublic void onDataChange(DataSnapshot dataSnapshot) {\r\n\t\t\tfor(DataSnapshot ds : dataSnapshot.getChildren()) {\r\n\t\t\t\tString name = ds.child(&quot;name&quot;).getValue(String.class);\r\n\t\t\t\tString ques = ds.child(&quot;ques&quot;).getValue(String.class);\r\n\t\t\t\tString title = ds.child(&quot;title&quot;).getValue(String.class);\r\n\t\t\t\tString uid = ds.child(&quot;uid&quot;).getValue(String.class);\r\n\t\t\t\tLog.d(&quot;TAG&quot;, name + &quot; / &quot; + ques + &quot; / &quot; + title + &quot; / &quot; + uid);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t@Override\r\n\t\tpublic void onCancelled(DatabaseError error) {\r\n            Log.d(&quot;TAG&quot;, error.getMessage()); //Never ignore potential errors!\r\n        }\r\n\t};\r\n\tforumsRef.addListenerForSingleValueEvent(valueEventListener);","title":"Firebase data retrieve with random keys","body":"<p>To display the values of all the children under <code>Forums</code> node, please use the following lines of code:</p>\n<pre><code>DatabaseReference db = FirebaseDatabase.getInstance().getReference();\nDatabaseReference forumsRef = db.child(&quot;Forums&quot;);\nValueEventListener valueEventListener = new ValueEventListener() {\n    @Override\n    public void onDataChange(DataSnapshot dataSnapshot) {\n        for(DataSnapshot ds : dataSnapshot.getChildren()) {\n            String name = ds.child(&quot;name&quot;).getValue(String.class);\n            String ques = ds.child(&quot;ques&quot;).getValue(String.class);\n            String title = ds.child(&quot;title&quot;).getValue(String.class);\n            String uid = ds.child(&quot;uid&quot;).getValue(String.class);\n            Log.d(&quot;TAG&quot;, name + &quot; / &quot; + ques + &quot; / &quot; + title + &quot; / &quot; + uid);\n        }\n    }\n\n    @Override\n    public void onCancelled(DatabaseError error) {\n        Log.d(&quot;TAG&quot;, error.getMessage()); //Never ignore potential errors!\n    }\n};\nforumsRef.addListenerForSingleValueEvent(valueEventListener);\n</code></pre>\n"}],"owner":{"account_id":9699040,"reputation":433,"user_id":7194599,"display_name":"mechaadi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":754,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":50830928,"answer_count":3,"score":0,"last_activity_date":1658394776,"creation_date":1528842538,"question_id":50826697,"body_markdown":"I have a firebase data structure for my android app and I want to retrieve the data from random keys generated by push() method which is child of Forum node which is a child of root of the database. Please suggest me a way to do this. Thanks.\r\n\r\n\r\n[![data structure][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/NKKcP.png","title":"Firebase data retrieve with random keys","body":"<p>I have a firebase data structure for my android app and I want to retrieve the data from random keys generated by push() method which is child of Forum node which is a child of root of the database. Please suggest me a way to do this. Thanks.</p>\n\n<p><a href=\"https://i.stack.imgur.com/NKKcP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/NKKcP.png\" alt=\"data structure\"></a></p>\n"},{"tags":["java","spring-boot","docker","maven","classnotfoundexception"],"comments":[{"owner":{"account_id":10988855,"reputation":84,"user_id":8073567,"display_name":"nbalodi"},"score":0,"creation_date":1658338449,"post_id":73055912,"comment_id":129029422,"body_markdown":"Your problem seems to be same as that of below answer. Please look into it.\n\nhttps://stackoverflow.com/questions/61548934/error-when-running-docker-container-noclassdeffounderror","body":"Your problem seems to be same as that of below answer. Please look into it.  <a href=\"https://stackoverflow.com/questions/61548934/error-when-running-docker-container-noclassdeffounderror\" title=\"error when running docker container noclassdeffounderror\">stackoverflow.com/questions/61548934/&hellip;</a>"},{"owner":{"account_id":16826591,"reputation":89,"user_id":12165732,"display_name":"Timo"},"score":0,"creation_date":1658338521,"post_id":73055912,"comment_id":129029434,"body_markdown":"Looking good to me &#128522;\nYou can check the size of the jar file. When everything is built correctly by the spring maven plugin this should be a fat jar with ~30MB.","body":"Looking good to me 😊 You can check the size of the jar file. When everything is built correctly by the spring maven plugin this should be a fat jar with ~30MB."},{"owner":{"account_id":4308080,"reputation":1029,"user_id":3519951,"accept_rate":60,"display_name":"JM Lord"},"score":0,"creation_date":1658339722,"post_id":73055912,"comment_id":129029851,"body_markdown":"Please edit to put more of the stacktrace, so we know what it was looking for.","body":"Please edit to put more of the stacktrace, so we know what it was looking for."}],"answers":[{"tags":[],"owner":{"account_id":25810482,"reputation":13,"user_id":19551344,"display_name":"Griffin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658343004,"creation_date":1658342902,"answer_id":73056780,"question_id":73055912,"body_markdown":"The problem appeared to be with my Dockerfile. This is what I changed it to\r\n\r\n    FROM maven:3.8.4-openjdk-17 as builder\r\n    WORKDIR /home/maven\r\n    COPY src src\r\n    COPY ./*.json .\r\n    COPY ./*.yml .\r\n    COPY ./*.xml .\r\n    COPY ./*.sh .\r\n    \r\n    RUN mvn -s ./settings.xml clean package\r\n    \r\n    FROM openjdk:17-oracle\r\n    EXPOSE 8088\r\n    WORKDIR /home/maven\r\n    COPY --from=builder /home/maven/target/Program-0.0.1-SNAPSHOT.jar ./app.jar\r\n    ENTRYPOINT [&quot;java&quot;,&quot;-jar&quot;,&quot;app.jar&quot;]\r\n\r\n","title":"Docker error: Exception in thread &quot;main&quot; java.lang.ClassNotFoundException","body":"<p>The problem appeared to be with my Dockerfile. This is what I changed it to</p>\n<pre><code>FROM maven:3.8.4-openjdk-17 as builder\nWORKDIR /home/maven\nCOPY src src\nCOPY ./*.json .\nCOPY ./*.yml .\nCOPY ./*.xml .\nCOPY ./*.sh .\n\nRUN mvn -s ./settings.xml clean package\n\nFROM openjdk:17-oracle\nEXPOSE 8088\nWORKDIR /home/maven\nCOPY --from=builder /home/maven/target/Program-0.0.1-SNAPSHOT.jar ./app.jar\nENTRYPOINT [&quot;java&quot;,&quot;-jar&quot;,&quot;app.jar&quot;]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13867576,"reputation":120,"user_id":10011738,"display_name":"amir rad"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658352900,"creation_date":1658352900,"answer_id":73058377,"question_id":73055912,"body_markdown":"Please edit your docker file with:\r\n\r\nFROM maven:3.8.4 AS maven\r\n\r\nWORKDIR /home/maven\r\n\r\nCOPY . /home/maven\r\n\r\nFROM adoptopenjdk/openjdk17:alpine-jre\r\n\r\nARG JAR_FILE=Program-0.0.1-SNAPSHOT.jar\r\n\r\nWORKDIR /home/maven\r\n\r\nCOPY --from=maven /home/maven/app/target/${JAR_FILE} /app\r\n\r\nENTRYPOINT [&quot;java&quot;,&quot;-jar&quot;,&quot;Program-0.0.1-SNAPSHOT.jar&quot;]\r\n","title":"Docker error: Exception in thread &quot;main&quot; java.lang.ClassNotFoundException","body":"<p>Please edit your docker file with:</p>\n<p>FROM maven:3.8.4 AS maven</p>\n<p>WORKDIR /home/maven</p>\n<p>COPY . /home/maven</p>\n<p>FROM adoptopenjdk/openjdk17:alpine-jre</p>\n<p>ARG JAR_FILE=Program-0.0.1-SNAPSHOT.jar</p>\n<p>WORKDIR /home/maven</p>\n<p>COPY --from=maven /home/maven/app/target/${JAR_FILE} /app</p>\n<p>ENTRYPOINT [&quot;java&quot;,&quot;-jar&quot;,&quot;Program-0.0.1-SNAPSHOT.jar&quot;]</p>\n"}],"owner":{"account_id":25810482,"reputation":13,"user_id":19551344,"display_name":"Griffin"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":867,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1658394678,"creation_date":1658338215,"question_id":73055912,"body_markdown":"My maven-spring boot project runs fine when I do so outside of Docker. But once I dockerize it I get an &quot;Exception in thread &quot;main&quot; java.lang.ClassNotFoundException&quot; when I try to run it. Searching this problem I&#39;m told you need to make sure you have the spring-boot-maven-plugin in your plugin management and plugins inside pom.xml, and to include the main class therein. I&#39;ve done this but the problem persists. My docker file looks like this:\r\n\r\n    FROM maven:3.8.4-openjdk-17 as builder\r\n    RUN mkdir -p /home/maven\r\n    COPY src /home/maven/\r\n    COPY chg.json /home/maven/\r\n    COPY manifest-QA.yml /home/maven/\r\n    COPY manifest-za.yml /home/maven/\r\n    COPY manifest-zb.yml /home/maven/\r\n    COPY pom.xml /home/maven/\r\n    COPY service-account.json /home/maven/\r\n    COPY sonar-project.properties /home/maven/\r\n    COPY checkLocksmith.sh /home/maven/\r\n    COPY buildConfig.json /home/maven/\r\n    COPY settings.xml /home/maven/\r\n    WORKDIR /home/maven\r\n    RUN mvn -s ./settings.xml clean package\r\n    FROM openjdk:17-oracle\r\n    EXPOSE 8080\r\n    WORKDIR /home/maven\r\n    COPY --from=builder /home/maven/target/Program-0.0.1-SNAPSHOT.jar ./app.jar\r\n    ENTRYPOINT [&quot;java&quot;,&quot;-jar&quot;,&quot;app.jar&quot;]\r\n\r\n","title":"Docker error: Exception in thread &quot;main&quot; java.lang.ClassNotFoundException","body":"<p>My maven-spring boot project runs fine when I do so outside of Docker. But once I dockerize it I get an &quot;Exception in thread &quot;main&quot; java.lang.ClassNotFoundException&quot; when I try to run it. Searching this problem I'm told you need to make sure you have the spring-boot-maven-plugin in your plugin management and plugins inside pom.xml, and to include the main class therein. I've done this but the problem persists. My docker file looks like this:</p>\n<pre><code>FROM maven:3.8.4-openjdk-17 as builder\nRUN mkdir -p /home/maven\nCOPY src /home/maven/\nCOPY chg.json /home/maven/\nCOPY manifest-QA.yml /home/maven/\nCOPY manifest-za.yml /home/maven/\nCOPY manifest-zb.yml /home/maven/\nCOPY pom.xml /home/maven/\nCOPY service-account.json /home/maven/\nCOPY sonar-project.properties /home/maven/\nCOPY checkLocksmith.sh /home/maven/\nCOPY buildConfig.json /home/maven/\nCOPY settings.xml /home/maven/\nWORKDIR /home/maven\nRUN mvn -s ./settings.xml clean package\nFROM openjdk:17-oracle\nEXPOSE 8080\nWORKDIR /home/maven\nCOPY --from=builder /home/maven/target/Program-0.0.1-SNAPSHOT.jar ./app.jar\nENTRYPOINT [&quot;java&quot;,&quot;-jar&quot;,&quot;app.jar&quot;]\n</code></pre>\n"},{"tags":["java","spring-boot","spring-cloud-netflix"],"answers":[{"tags":[],"owner":{"account_id":14726837,"reputation":31,"user_id":10635467,"display_name":"Gowtham"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1594613749,"creation_date":1594613749,"answer_id":62869166,"question_id":62868281,"body_markdown":"The error itself says that you have two beans with the same name. Try renaming one of those. Or use the property it suggests in application.properties file. Even if it&#39;s not working then give me the snapshot of Discovery Client and Server Classes.","title":"bean &#39;eurekaRegistration&#39;, defined in class path resource could not be registered","body":"<p>The error itself says that you have two beans with the same name. Try renaming one of those. Or use the property it suggests in application.properties file. Even if it's not working then give me the snapshot of Discovery Client and Server Classes.</p>\n"},{"tags":[],"owner":{"account_id":3457386,"reputation":81,"user_id":2895577,"display_name":"Vishal Verma"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1645897641,"creation_date":1645897641,"answer_id":71278987,"question_id":62868281,"body_markdown":"The answer can be found here-&lt;https://chowdera.com/2021/12/202112211422209581.html&gt;\r\n\r\n**The dependency is incorrect** needs to be changed \r\n\r\n**from** *spring-cloud-netflix-eureka-server*\r\n\r\n**to** *spring-cloud-starter-netflix-eureka-server*\r\n\r\n\r\n\r\n","title":"bean &#39;eurekaRegistration&#39;, defined in class path resource could not be registered","body":"<p>The answer can be found here-<a href=\"https://chowdera.com/2021/12/202112211422209581.html\" rel=\"noreferrer\">https://chowdera.com/2021/12/202112211422209581.html</a></p>\n<p><strong>The dependency is incorrect</strong> needs to be changed</p>\n<p><strong>from</strong> <em>spring-cloud-netflix-eureka-server</em></p>\n<p><strong>to</strong> <em>spring-cloud-starter-netflix-eureka-server</em></p>\n"},{"tags":[],"owner":{"account_id":8362258,"reputation":1639,"user_id":6280135,"display_name":"Maninder"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1653687388,"creation_date":1653687388,"answer_id":72411306,"question_id":62868281,"body_markdown":"    &lt;dependency&gt;\r\n                      &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n                      &lt;artifactId&gt;spring-cloud-starter-netflix-eureka-server&lt;/artifactId&gt;\r\n                      &lt;version&gt;3.1.1&lt;/version&gt;\r\n                &lt;/dependency&gt;","title":"bean &#39;eurekaRegistration&#39;, defined in class path resource could not be registered","body":"<pre><code>&lt;dependency&gt;\n                  &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n                  &lt;artifactId&gt;spring-cloud-starter-netflix-eureka-server&lt;/artifactId&gt;\n                  &lt;version&gt;3.1.1&lt;/version&gt;\n            &lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7969730,"reputation":1,"user_id":6014853,"display_name":"Dinesh Edirisinghe"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658394676,"creation_date":1658394676,"answer_id":73063538,"question_id":62868281,"body_markdown":"I had the same issue, then changing the maven dependency from  **&quot;spring-cloud-netflix-eureka-server&quot;** to **&quot;spring-cloud-starter-netflix-eureka-server&quot;** solved the issue for me ","title":"bean &#39;eurekaRegistration&#39;, defined in class path resource could not be registered","body":"<p>I had the same issue, then changing the maven dependency from  <strong>&quot;spring-cloud-netflix-eureka-server&quot;</strong> to <strong>&quot;spring-cloud-starter-netflix-eureka-server&quot;</strong> solved the issue for me</p>\n"}],"owner":{"account_id":12019463,"reputation":1937,"user_id":8793412,"accept_rate":88,"display_name":"Karthikeyan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2660,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":4,"score":1,"last_activity_date":1658394676,"creation_date":1594605764,"question_id":62868281,"body_markdown":"I have configured my `eureka discovery server` and it is up and running in local host `http:\\\\localhost:8761`. But when am trying to configure `eureka discovery client` (in another project in intellij) it was build properly but application is not starting and its giving the below error.\r\n\r\nPlease find the stack trace below.\r\n\r\n\t\t  .   ____          _            __ _ _\r\n\t\t /\\\\ / ___&#39;_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\r\n\t\t( ( )\\___ | &#39;_ | &#39;_| | &#39;_ \\/ _` | \\ \\ \\ \\\r\n\t\t \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\r\n\t\t  &#39;  |____| .__|_| |_|_| |_\\__, | / / / /\r\n\t\t =========|_|==============|___/=/_/_/_/\r\n\t\t :: Spring Boot ::        (v2.1.6.RELEASE)\r\n\r\n\t\t2020-07-13 07:12:37.271  INFO 14932 --- [           main] c.l.m.s.c.CoreServicesApplication        : Starting CoreServicesApplication on DESKTOP-5ENMOJ0 with PID 14932 (D:\\AngularCourse\\core-services\\out\\production\\classes started by Karthikeyan in D:\\AngularCourse\\core-services)\r\n\t\t2020-07-13 07:12:37.277  INFO 14932 --- [           main] c.l.m.s.c.CoreServicesApplication        : No active profile set, falling back to default profiles: default\r\n\t\t2020-07-13 07:12:39.277  INFO 14932 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data repositories in DEFAULT mode.\r\n\t\t2020-07-13 07:12:39.430  INFO 14932 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 134ms. Found 3 repository interfaces.\r\n\t\t2020-07-13 07:12:39.611  WARN 14932 --- [           main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.support.BeanDefinitionOverrideException: Invalid bean definition with name &#39;eurekaRegistration&#39; defined in class path resource [org/springframework/cloud/netflix/eureka/EurekaClientAutoConfiguration$EurekaClientConfiguration.class]: Cannot register bean definition [Root bean: class [null]; scope=; abstract=false; lazyInit=false; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.cloud.netflix.eureka.EurekaClientAutoConfiguration$EurekaClientConfiguration; factoryMethodName=eurekaRegistration; initMethodName=null; destroyMethodName=(inferred); defined in class path resource [org/springframework/cloud/netflix/eureka/EurekaClientAutoConfiguration$EurekaClientConfiguration.class]] for bean &#39;eurekaRegistration&#39;: There is already [Root bean: class [null]; scope=; abstract=false; lazyInit=false; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.cloud.netflix.eureka.EurekaClientAutoConfiguration$RefreshableEurekaClientConfiguration; factoryMethodName=eurekaRegistration; initMethodName=null; destroyMethodName=(inferred); defined in class path resource [org/springframework/cloud/netflix/eureka/EurekaClientAutoConfiguration$RefreshableEurekaClientConfiguration.class]] bound.\r\n\t\t2020-07-13 07:12:39.630  INFO 14932 --- [           main] ConditionEvaluationReportLoggingListener : \r\n\r\n\t\tError starting ApplicationContext. To display the conditions report re-run your application with &#39;debug&#39; enabled.\r\n\t\t2020-07-13 07:12:39.632 ERROR 14932 --- [           main] o.s.b.d.LoggingFailureAnalysisReporter   : \r\n\r\n\t\t***************************\r\n\t\tAPPLICATION FAILED TO START\r\n\t\t***************************\r\n\r\n\t\tDescription:\r\n\r\n\t\tThe bean &#39;eurekaRegistration&#39;, defined in class path resource [org/springframework/cloud/netflix/eureka/EurekaClientAutoConfiguration$EurekaClientConfiguration.class], could not be registered. A bean with that name has already been defined in class path resource [org/springframework/cloud/netflix/eureka/EurekaClientAutoConfiguration$RefreshableEurekaClientConfiguration.class] and overriding is disabled.\r\n\r\n\t\tAction:\r\n\r\n\t\tConsider renaming one of the beans or enabling overriding by setting spring.main.allow-bean-definition-overriding=true\r\n\r\n\r\n\t\tProcess finished with exit code 1\r\n\r\n\r\nPlease find my `build.gradle` file.\r\n\r\n\r\n\t\tplugins {\r\n\t\t\tid &#39;org.springframework.boot&#39; version &#39;2.1.6.RELEASE&#39;\r\n\t\t\tid &#39;io.spring.dependency-management&#39; version &#39;1.0.9.RELEASE&#39;\r\n\t\t\tid &#39;java&#39;\r\n\t\t\tid &#39;war&#39;\r\n\t\t}\r\n\r\n\t\tgroup = &#39;com.lti.mod.services&#39;\r\n\t\tversion = &#39;0.0.1-SNAPSHOT&#39;\r\n\t\tsourceCompatibility = &#39;1.8&#39;\r\n\r\n\t\tconfigurations {\r\n\t\t\tcompileOnly {\r\n\t\t\t\textendsFrom annotationProcessor\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\trepositories {\r\n\t\t\tmavenCentral()\r\n\t\t}\r\n\r\n\t\tdependencies {\r\n\t\t\timplementation(&#39;io.jsonwebtoken:jjwt:0.9.1&#39;)\r\n\t\t\timplementation(&#39;org.springframework.cloud:spring-cloud-netflix-eureka-server:2.1.5.RELEASE&#39;)\r\n\t\t\timplementation &#39;org.springframework.boot:spring-boot-starter-data-jpa&#39;\r\n\t\t\timplementation &#39;org.springframework.boot:spring-boot-starter-data-rest&#39;\r\n\t\t\timplementation &#39;org.springframework.boot:spring-boot-starter-security&#39;\r\n\t\t\timplementation &#39;org.springframework.boot:spring-boot-starter-web&#39;\r\n\t\t\timplementation &#39;org.liquibase:liquibase-core&#39;\r\n\t\t\t/*compile group: &#39;io.jsonwebtoken&#39;, name: &#39;jjwt&#39;, version: &#39;0.9.1&#39;*/\r\n\t\t\tcompileOnly &#39;org.projectlombok:lombok&#39;\r\n\t\t\truntimeOnly &#39;mysql:mysql-connector-java&#39;\r\n\t\t\tannotationProcessor &#39;org.projectlombok:lombok&#39;\r\n\t\t\tprovidedRuntime &#39;org.springframework.boot:spring-boot-starter-tomcat&#39;\r\n\t\t\ttestImplementation(&#39;org.springframework.boot:spring-boot-starter-test&#39;) {\r\n\t\t\t\texclude group: &#39;org.junit.vintage&#39;, module: &#39;junit-vintage-engine&#39;\r\n\t\t\t}\r\n\t\t\ttestImplementation &#39;org.springframework.security:spring-security-test&#39;\r\n\t\t}\r\n\r\n\t\ttest {\r\n\t\t\tuseJUnitPlatform()\r\n\t\t}\r\n\r\n\r\nPlease find my `application.properties` file.\r\n\r\n\t\tspring.application.name=core-services\r\n\r\n\t\t#datasource\r\n\t\tspring.datasource.url=jdbc:mysql://localhost:3306/moddb?useUnicode=true&amp;useLegacyDatetimeCode=false&amp;serverTimezone=UTC&amp;createDatabaseIfNotExist=true&amp;allowPublicKeyRetrieval=true&amp;userSSL=true\r\n\t\tspring.datasource.username=root\r\n\t\tspring.datasource.password=root\r\n\t\tspring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\r\n\r\n\t\tspring.jpa.hibernate.ddl-auto=none\r\n\r\n\t\t#liquibase\r\n\t\tspring.liquibase.change-log=classpath:/db/changelog/db.changelog-master.xml\r\n\r\n\t\t#jwt\r\n\t\tapp.jwt.secret=RandomSecretKey\r\n\t\t#1 day\r\n\t\tapp.jwt.expiration-in-ms=86400000\r\n\t\tapp.jwt.token.prefix=Bearer\r\n\t\tapp.jwt.header.string=Authorization\r\n\r\n\t\t#eureka\r\n\t\teureka.client.servie-url.default-zone=http://localhost:8761\r\n\t\t#indicates the frequency the client sends heartbeat to server to indicate that it is alive.\r\n\t\teureka.instance.lease-renewal-interval-in-seconds=30\r\n\t\t#incicates the duration the server waits since it received the last heartbeat before it can evict an instance from its registry\r\n\t\teureka.instance.lease-expiration-duration-in-seconds=90\r\n\r\n\t\t#load balancing\r\n\t\tribbon.eureka.enabled=true","title":"bean &#39;eurekaRegistration&#39;, defined in class path resource could not be registered","body":"<p>I have configured my <code>eureka discovery server</code> and it is up and running in local host <code>http:\\\\localhost:8761</code>. But when am trying to configure <code>eureka discovery client</code> (in another project in intellij) it was build properly but application is not starting and its giving the below error.</p>\n<p>Please find the stack trace below.</p>\n<pre><code>      .   ____          _            __ _ _\n     /\\\\ / ___'_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\n    ( ( )\\___ | '_ | '_| | '_ \\/ _` | \\ \\ \\ \\\n     \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\n      '  |____| .__|_| |_|_| |_\\__, | / / / /\n     =========|_|==============|___/=/_/_/_/\n     :: Spring Boot ::        (v2.1.6.RELEASE)\n\n    2020-07-13 07:12:37.271  INFO 14932 --- [           main] c.l.m.s.c.CoreServicesApplication        : Starting CoreServicesApplication on DESKTOP-5ENMOJ0 with PID 14932 (D:\\AngularCourse\\core-services\\out\\production\\classes started by Karthikeyan in D:\\AngularCourse\\core-services)\n    2020-07-13 07:12:37.277  INFO 14932 --- [           main] c.l.m.s.c.CoreServicesApplication        : No active profile set, falling back to default profiles: default\n    2020-07-13 07:12:39.277  INFO 14932 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data repositories in DEFAULT mode.\n    2020-07-13 07:12:39.430  INFO 14932 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 134ms. Found 3 repository interfaces.\n    2020-07-13 07:12:39.611  WARN 14932 --- [           main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.support.BeanDefinitionOverrideException: Invalid bean definition with name 'eurekaRegistration' defined in class path resource [org/springframework/cloud/netflix/eureka/EurekaClientAutoConfiguration$EurekaClientConfiguration.class]: Cannot register bean definition [Root bean: class [null]; scope=; abstract=false; lazyInit=false; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.cloud.netflix.eureka.EurekaClientAutoConfiguration$EurekaClientConfiguration; factoryMethodName=eurekaRegistration; initMethodName=null; destroyMethodName=(inferred); defined in class path resource [org/springframework/cloud/netflix/eureka/EurekaClientAutoConfiguration$EurekaClientConfiguration.class]] for bean 'eurekaRegistration': There is already [Root bean: class [null]; scope=; abstract=false; lazyInit=false; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.cloud.netflix.eureka.EurekaClientAutoConfiguration$RefreshableEurekaClientConfiguration; factoryMethodName=eurekaRegistration; initMethodName=null; destroyMethodName=(inferred); defined in class path resource [org/springframework/cloud/netflix/eureka/EurekaClientAutoConfiguration$RefreshableEurekaClientConfiguration.class]] bound.\n    2020-07-13 07:12:39.630  INFO 14932 --- [           main] ConditionEvaluationReportLoggingListener : \n\n    Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.\n    2020-07-13 07:12:39.632 ERROR 14932 --- [           main] o.s.b.d.LoggingFailureAnalysisReporter   : \n\n    ***************************\n    APPLICATION FAILED TO START\n    ***************************\n\n    Description:\n\n    The bean 'eurekaRegistration', defined in class path resource [org/springframework/cloud/netflix/eureka/EurekaClientAutoConfiguration$EurekaClientConfiguration.class], could not be registered. A bean with that name has already been defined in class path resource [org/springframework/cloud/netflix/eureka/EurekaClientAutoConfiguration$RefreshableEurekaClientConfiguration.class] and overriding is disabled.\n\n    Action:\n\n    Consider renaming one of the beans or enabling overriding by setting spring.main.allow-bean-definition-overriding=true\n\n\n    Process finished with exit code 1\n</code></pre>\n<p>Please find my <code>build.gradle</code> file.</p>\n<pre><code>    plugins {\n        id 'org.springframework.boot' version '2.1.6.RELEASE'\n        id 'io.spring.dependency-management' version '1.0.9.RELEASE'\n        id 'java'\n        id 'war'\n    }\n\n    group = 'com.lti.mod.services'\n    version = '0.0.1-SNAPSHOT'\n    sourceCompatibility = '1.8'\n\n    configurations {\n        compileOnly {\n            extendsFrom annotationProcessor\n        }\n    }\n\n    repositories {\n        mavenCentral()\n    }\n\n    dependencies {\n        implementation('io.jsonwebtoken:jjwt:0.9.1')\n        implementation('org.springframework.cloud:spring-cloud-netflix-eureka-server:2.1.5.RELEASE')\n        implementation 'org.springframework.boot:spring-boot-starter-data-jpa'\n        implementation 'org.springframework.boot:spring-boot-starter-data-rest'\n        implementation 'org.springframework.boot:spring-boot-starter-security'\n        implementation 'org.springframework.boot:spring-boot-starter-web'\n        implementation 'org.liquibase:liquibase-core'\n        /*compile group: 'io.jsonwebtoken', name: 'jjwt', version: '0.9.1'*/\n        compileOnly 'org.projectlombok:lombok'\n        runtimeOnly 'mysql:mysql-connector-java'\n        annotationProcessor 'org.projectlombok:lombok'\n        providedRuntime 'org.springframework.boot:spring-boot-starter-tomcat'\n        testImplementation('org.springframework.boot:spring-boot-starter-test') {\n            exclude group: 'org.junit.vintage', module: 'junit-vintage-engine'\n        }\n        testImplementation 'org.springframework.security:spring-security-test'\n    }\n\n    test {\n        useJUnitPlatform()\n    }\n</code></pre>\n<p>Please find my <code>application.properties</code> file.</p>\n<pre><code>    spring.application.name=core-services\n\n    #datasource\n    spring.datasource.url=jdbc:mysql://localhost:3306/moddb?useUnicode=true&amp;useLegacyDatetimeCode=false&amp;serverTimezone=UTC&amp;createDatabaseIfNotExist=true&amp;allowPublicKeyRetrieval=true&amp;userSSL=true\n    spring.datasource.username=root\n    spring.datasource.password=root\n    spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\n\n    spring.jpa.hibernate.ddl-auto=none\n\n    #liquibase\n    spring.liquibase.change-log=classpath:/db/changelog/db.changelog-master.xml\n\n    #jwt\n    app.jwt.secret=RandomSecretKey\n    #1 day\n    app.jwt.expiration-in-ms=86400000\n    app.jwt.token.prefix=Bearer\n    app.jwt.header.string=Authorization\n\n    #eureka\n    eureka.client.servie-url.default-zone=http://localhost:8761\n    #indicates the frequency the client sends heartbeat to server to indicate that it is alive.\n    eureka.instance.lease-renewal-interval-in-seconds=30\n    #incicates the duration the server waits since it received the last heartbeat before it can evict an instance from its registry\n    eureka.instance.lease-expiration-duration-in-seconds=90\n\n    #load balancing\n    ribbon.eureka.enabled=true\n</code></pre>\n"},{"tags":["java","json","excel","spring-boot","rest"],"comments":[{"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"score":0,"creation_date":1658393611,"post_id":73063211,"comment_id":129041846,"body_markdown":"Do you want the content of the excel file there? I would suggest to encode it using something like base64, then just read it from that json like any other string. The client of course has to create the json request accordingly.","body":"Do you want the content of the excel file there? I would suggest to encode it using something like base64, then just read it from that json like any other string. The client of course has to create the json request accordingly."},{"owner":{"account_id":15683450,"reputation":47,"user_id":11791924,"display_name":"FPS Bard"},"score":0,"creation_date":1658394263,"post_id":73063211,"comment_id":129042089,"body_markdown":"Yes, i need opportunity to content excel file in json. without encoding/decoding to base64 if it is possible.","body":"Yes, i need opportunity to content excel file in json. without encoding/decoding to base64 if it is possible."},{"owner":{"account_id":9621752,"reputation":483,"user_id":7142748,"display_name":"jhueg"},"score":0,"creation_date":1658394444,"post_id":73063211,"comment_id":129042168,"body_markdown":"It&#39;s technically not possible without encoding, because json is text and excel is a binary format. But see the example I posted, encoding/decoding it is really simple","body":"It&#39;s technically not possible without encoding, because json is text and excel is a binary format. But see the example I posted, encoding/decoding it is really simple"},{"owner":{"account_id":15683450,"reputation":47,"user_id":11791924,"display_name":"FPS Bard"},"score":1,"creation_date":1658394592,"post_id":73063211,"comment_id":129042227,"body_markdown":"Thank you for your answer, i thought it is possible","body":"Thank you for your answer, i thought it is possible"}],"answers":[{"tags":[],"owner":{"account_id":9621752,"reputation":483,"user_id":7142748,"display_name":"jhueg"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1658394136,"creation_date":1658394136,"answer_id":73063417,"question_id":73063211,"body_markdown":"You can&#39;t include it directly but you can encode it as string.\r\n\r\nThe client sending that json request to your spring boot application can encode the file to base64 and include the resulting string in the json as text.\r\n\r\nSomething like that:\r\n~~~\r\nbyte[] fileContent = readExcelFile(file); // Use InputStreams to read all bytes of the excel\r\n\r\nString encodedFile = Base64.getEncoder().encodeToString(fileContent);\r\n\r\ndoRequest(encodedFile); // Do request, set &#39;encodedFile&#39; as value of &#39;searchValue&#39; in json\r\n~~~\r\n\r\nYour json would then look something like that:\r\n\r\n~~~\r\n{\r\n    &quot;searchKey&quot;: &quot;test1&quot;,\r\n    &quot;searchValue&quot;: &quot;SGVsbG8gU3RhY2tPdmVyZmxvdyE=...&quot;\r\n}\r\n~~~\r\n\r\nIn your spring boot application simply decode it to bytes again and save it as file or use it directly with a `ByteArrayInputStream`.\r\n\r\n~~~\r\nvar searchValue = getFromJson(json); // get the value from your json / dto\r\n\r\nbyte[] decodedBytes = Base64.getDecoder().decode(searchValue);\r\n\r\n// Save to a file then use it\r\nsaveToFile(decodedBytes); \r\n// Or\r\n// Use it directly as InputStream without saving it to file\r\nvar inputStream = new ByteArrayInputStream(decodedBytes); \r\n~~~\r\n\r\nSee this baeldung tutorial for more information on how to use Base64: https://www.baeldung.com/java-base64-encode-and-decode  \r\nAnd this one for the `ByteArrayInputStream`: https://www.baeldung.com/convert-byte-array-to-input-stream","title":"Consume Json with excel file in spring boot rest api","body":"<p>You can't include it directly but you can encode it as string.</p>\n<p>The client sending that json request to your spring boot application can encode the file to base64 and include the resulting string in the json as text.</p>\n<p>Something like that:</p>\n<pre><code>byte[] fileContent = readExcelFile(file); // Use InputStreams to read all bytes of the excel\n\nString encodedFile = Base64.getEncoder().encodeToString(fileContent);\n\ndoRequest(encodedFile); // Do request, set 'encodedFile' as value of 'searchValue' in json\n</code></pre>\n<p>Your json would then look something like that:</p>\n<pre><code>{\n    &quot;searchKey&quot;: &quot;test1&quot;,\n    &quot;searchValue&quot;: &quot;SGVsbG8gU3RhY2tPdmVyZmxvdyE=...&quot;\n}\n</code></pre>\n<p>In your spring boot application simply decode it to bytes again and save it as file or use it directly with a <code>ByteArrayInputStream</code>.</p>\n<pre><code>var searchValue = getFromJson(json); // get the value from your json / dto\n\nbyte[] decodedBytes = Base64.getDecoder().decode(searchValue);\n\n// Save to a file then use it\nsaveToFile(decodedBytes); \n// Or\n// Use it directly as InputStream without saving it to file\nvar inputStream = new ByteArrayInputStream(decodedBytes); \n</code></pre>\n<p>See this baeldung tutorial for more information on how to use Base64: <a href=\"https://www.baeldung.com/java-base64-encode-and-decode\" rel=\"nofollow noreferrer\">https://www.baeldung.com/java-base64-encode-and-decode</a><br />\nAnd this one for the <code>ByteArrayInputStream</code>: <a href=\"https://www.baeldung.com/convert-byte-array-to-input-stream\" rel=\"nofollow noreferrer\">https://www.baeldung.com/convert-byte-array-to-input-stream</a></p>\n"}],"owner":{"account_id":15683450,"reputation":47,"user_id":11791924,"display_name":"FPS Bard"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":822,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73063417,"answer_count":1,"score":1,"last_activity_date":1658394483,"creation_date":1658393190,"question_id":73063211,"body_markdown":"Is it possible with spring boot and for example apache poi to get POST request json format with excel file inside? \r\nfor example : \r\n```\r\nPOST api/testrequest/ \r\nContent-Type: application/json  //(maybe another type?)\r\n{\r\n    &quot;searchKey&quot;: &quot;test1&quot;,\r\n    &quot;searchValue&quot;: file.excel\r\n}\r\n```\r\nAnd fetch it to Object?\r\n\r\nNow I did something like this :\r\n\r\nController method :\r\n```\r\n@PostMapping(\r\n      value = &quot;excelentity&quot;,\r\n      consumes = {MediaType.MULTIPART_FORM_DATA_VALUE, MediaType.APPLICATION_JSON_VALUE})\r\n  public String getExcelAndParseItToEntity(@RequestBody ExcelTemplate file) {\r\n    String fileName = file.getFile().getOriginalFilename();\r\n    log.info(fileName);\r\n    \r\n    return &quot;test case&quot;;\r\n  }\r\n```\r\n\r\nAnd Java Object :\r\n```\r\n@Getter\r\n@Setter\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\n@ToString\r\npublic class ExcelTemplate {\r\n    private MultipartFile file;\r\n    private String name;\r\n}\r\n```\r\n\r\nBut it doesn&#39;t work ","title":"Consume Json with excel file in spring boot rest api","body":"<p>Is it possible with spring boot and for example apache poi to get POST request json format with excel file inside?\nfor example :</p>\n<pre><code>POST api/testrequest/ \nContent-Type: application/json  //(maybe another type?)\n{\n    &quot;searchKey&quot;: &quot;test1&quot;,\n    &quot;searchValue&quot;: file.excel\n}\n</code></pre>\n<p>And fetch it to Object?</p>\n<p>Now I did something like this :</p>\n<p>Controller method :</p>\n<pre><code>@PostMapping(\n      value = &quot;excelentity&quot;,\n      consumes = {MediaType.MULTIPART_FORM_DATA_VALUE, MediaType.APPLICATION_JSON_VALUE})\n  public String getExcelAndParseItToEntity(@RequestBody ExcelTemplate file) {\n    String fileName = file.getFile().getOriginalFilename();\n    log.info(fileName);\n    \n    return &quot;test case&quot;;\n  }\n</code></pre>\n<p>And Java Object :</p>\n<pre><code>@Getter\n@Setter\n@AllArgsConstructor\n@NoArgsConstructor\n@ToString\npublic class ExcelTemplate {\n    private MultipartFile file;\n    private String name;\n}\n</code></pre>\n<p>But it doesn't work</p>\n"},{"tags":["java","swing"],"comments":[{"owner":{"account_id":969721,"reputation":344518,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":1,"creation_date":1658389913,"post_id":73062346,"comment_id":129040562,"body_markdown":"You really need to start making use of the [geometry](https://docs.oracle.com/javase/tutorial/2d/geometry/index.html) APIs, they have built in collision detection","body":"You really need to start making use of the <a href=\"https://docs.oracle.com/javase/tutorial/2d/geometry/index.html\" rel=\"nofollow noreferrer\">geometry</a> APIs, they have built in collision detection"},{"owner":{"account_id":25159273,"reputation":23,"user_id":19003703,"display_name":"rhian"},"score":0,"creation_date":1658391940,"post_id":73062346,"comment_id":129041225,"body_markdown":"why is my code not working though? @MadProgrammer","body":"why is my code not working though? @MadProgrammer"},{"owner":{"account_id":969721,"reputation":344518,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1658399670,"post_id":73062346,"comment_id":129044314,"body_markdown":"One of the issues you&#39;re not reseting the position of the ball after the collision, so it kind of &quot;bounces&quot; within the paddle.  You should also be making use of `if-else if-else` statements, as once you&#39;ve determine that you&#39;ve hit the paddle, it&#39;s kind of obvious that you don&#39;t need to do any more checking","body":"One of the issues you&#39;re not reseting the position of the ball after the collision, so it kind of &quot;bounces&quot; within the paddle.  You should also be making use of <code>if-else if-else</code> statements, as once you&#39;ve determine that you&#39;ve hit the paddle, it&#39;s kind of obvious that you don&#39;t need to do any more checking"},{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":0,"creation_date":1658403474,"post_id":73062346,"comment_id":129045665,"body_markdown":"unrelated: don&#39;t name custom classes the same as framework classes","body":"unrelated: don&#39;t name custom classes the same as framework classes"}],"answers":[{"tags":[],"owner":{"display_name":"user10589862"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1658393557,"creation_date":1658393557,"answer_id":73063304,"question_id":73062346,"body_markdown":"the signature for fillOval is as follows: (x_position, y_position, width, height). And in your signature, you try to use ballSpeedX and ballSpeedY as the width and height.\r\n\r\nSo when you do ballSpeedX or ballSpeedY *= -1. Swing tries to draw an oval, with negative measures, which is not possible, and thus fails to show the ball","title":"Ball will not bounce off paddle nor wall in my brick breaker game","body":"<p>the signature for fillOval is as follows: (x_position, y_position, width, height). And in your signature, you try to use ballSpeedX and ballSpeedY as the width and height.</p>\n<p>So when you do ballSpeedX or ballSpeedY *= -1. Swing tries to draw an oval, with negative measures, which is not possible, and thus fails to show the ball</p>\n"}],"owner":{"account_id":25159273,"reputation":23,"user_id":19003703,"display_name":"rhian"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":54,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73063304,"answer_count":1,"score":1,"last_activity_date":1658393557,"creation_date":1658389042,"question_id":73062346,"body_markdown":"I have been sitting here for 5 hours trying to make my ball bounce off the paddle and the walls when it hits it but it just goes straight through the walls and paddle then re enters through the top and the same cycle continues. I don&#39;t know where I am going wrong\r\n\r\nMy MainWindow class:\r\n\r\n    \r\n    import javax.swing.*;\r\n    import java.awt.*;\r\n    import java.awt.event.*;\r\n    import java.awt.image.BufferedImage;\r\n\r\n    public class MainWindow extends JPanel implements KeyListener, ActionListener {\r\n\r\n    private boolean gameRunning = true;\r\n    private int BOARD_WIDTH = 500;\r\n    private int BOARD_HEIGHT = 500;\r\n    private Thread animator;\r\n    private BufferedImage img;\r\n    private Dimension dimension;\r\n    private int ballX = 20;\r\n    private int ballY = 200;\r\n    private int ballSpeedX = 4;\r\n    private int ballSpeedY = 5;\r\n    private int ballWidth = 20;\r\n    private Brick[] bricks = new Brick[24];\r\n    private boolean[] showBrick = new boolean[24];\r\n    private int paddleX = BOARD_WIDTH/2;\r\n    private int paddleY = BOARD_HEIGHT-50;\r\n    private int paddleW = 100;\r\n    private int paddleH = 10;\r\n    boolean paddleLeft = false;\r\n    boolean paddleRight = true;\r\n    private Timer timer;\r\n    private int delay = 50;\r\n\r\n\r\n    public MainWindow(){\r\n        addKeyListener(this);\r\n        //addMouseListener(this);\r\n        setFocusable(true);\r\n        dimension = new Dimension(BOARD_WIDTH, BOARD_HEIGHT);\r\n        setBackground(Color.BLACK);\r\n\r\n        int x = 20;\r\n        int y = 20;\r\n        int count = 1;\r\n        for(int i = 0; i &lt; bricks.length; i++){\r\n            bricks[i] = new Brick(x, y, 50, 10);\r\n            showBrick[i] = true;\r\n            x += 55;\r\n            if (count%8 == 0){\r\n                x = 20;\r\n                y += 20;\r\n            }\r\n            count++;\r\n        }\r\n        timer = new Timer(delay, this);\r\n        timer.start();\r\n\r\n        //if (animator == null || !gameRunning) {\r\n          // animator = new Thread(this);\r\n            //animator.start();\r\n        //}\r\n        setDoubleBuffered(true);\r\n    }\r\n\r\n    public void paint(Graphics g) {\r\n        super.paint(g);\r\n        g.setColor(Color.pink);\r\n        g.fillRect(0,0, dimension.width, dimension.height);\r\n        g.setColor(Color.black);\r\n\r\n        // for the bricks\r\n        for(int i = 0; i&lt;bricks.length; i++) {\r\n            if(showBrick[i])\r\n                g.fillRect(bricks[i].getBrickX(), bricks[i].getBrickY(),bricks[i].getBrickW(),bricks[i].getBrickH());\r\n\r\n        }\r\n        // for the paddle\r\n        g.fillRect(paddleX, paddleY, paddleW, paddleH);\r\n\r\n        // for the ball\r\n        g.fillOval(ballX, ballY, ballSpeedX,ballSpeedY);\r\n\r\n\r\n        //if (gameRunning){\r\n            //ballX+=ballSpeedX;\r\n          //  movingBall();\r\n            //repaint();\r\n\r\n        //}\r\n        g.dispose();\r\n    }\r\n\r\n    private void movingBall(){\r\n\r\n    }\r\n\r\n       \r\n    @Override\r\n    public void keyTyped(KeyEvent e) {\r\n        //if (e.getKeyCode() == KeyEvent.VK_RIGHT){\r\n          //  paddleX+=5;\r\n        //}\r\n\r\n    }\r\n\r\n    @Override\r\n    public void keyPressed(KeyEvent e) {\r\n        int key = e.getKeyCode();\r\n        if (e.getKeyCode() == KeyEvent.VK_RIGHT){\r\n            if(paddleX &gt;= 385){\r\n                paddleRight = false;\r\n            }\r\n            else {\r\n                //ballX+=ballSpeedX;\r\n                paddleRight = true;\r\n                paddleX+=5;\r\n                repaint();\r\n            }\r\n        }\r\n        if (e.getKeyCode() == KeyEvent.VK_LEFT){\r\n            if(paddleX &lt;= 10){\r\n                paddleLeft = false;\r\n            }\r\n            else {\r\n                paddleLeft = false;\r\n                paddleX-=5;\r\n                repaint();\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    @Override\r\n    public void keyReleased(KeyEvent e) {\r\n        int key = e.getKeyCode();\r\n        if (e.getKeyCode() == KeyEvent.VK_RIGHT){\r\n            paddleRight = false;\r\n        }\r\n        if (e.getKeyCode() == KeyEvent.VK_LEFT){\r\n            paddleLeft = false;\r\n        }\r\n\r\n    }\r\n\r\n   \r\n    @Override\r\n    public void actionPerformed(ActionEvent e) {\r\n        timer.start();\r\n        if(ballX &lt; 0 || ballX &gt; BOARD_WIDTH){\r\n            ballSpeedX = ballSpeedX * -1;\r\n        }\r\n        if(ballY &lt; 0){\r\n            ballSpeedY = ballSpeedY * -1;\r\n\r\n        }\r\n        if(ballY &gt; BOARD_HEIGHT){\r\n            ballX = 20;\r\n            ballY = 200;\r\n            ballSpeedY *= -1;\r\n        }\r\n        if(ballX == paddleX &amp;&amp; ballY == paddleY){\r\n            ballSpeedY *= -1;\r\n        }\r\n        if(ballX + ballWidth &gt; paddleX &amp;&amp; ballX &lt; paddleX + paddleW &amp;&amp; ballY + ballWidth &gt; paddleY &amp;&amp; ballY &lt; paddleY + paddleH) {\r\n            ballSpeedY *= -1;\r\n        }\r\n        ballX += ballSpeedX;\r\n        ballY += ballSpeedY;\r\n        repaint();\r\n        //System.out.println(&quot;its working&quot;);\r\n    }\r\n\r\n    }\r\n\r\nMy Window class:\r\n\r\n    import javax.swing.*;\r\n\r\n    public class Window {\r\n\r\n    public Window() {\r\n\r\n        JFrame frame = new JFrame(&quot;Brick Builder Game&quot;);\r\n        frame.setDefaultCloseOperation(frame.DISPOSE_ON_CLOSE);\r\n        frame.setSize(500,500);\r\n        frame.add(new MainWindow());\r\n        frame.setVisible(true);\r\n        frame.setResizable(false);\r\n\r\n    }\r\n\r\n    public static void main(String[] args){\r\n        new Window();\r\n    }\r\n    }\r\n\r\nMy brick class:\r\n\r\n    public class Brick {\r\n\r\n    // X-position of brick\r\n    private int brickX;\r\n    // Y-position of brick\r\n    private int brickY;\r\n    // width of brick\r\n    private int brickW;\r\n    // height of brick\r\n    private int brickH;\r\n\r\n    public Brick(int brickX, int brickY, int brickW, int brickH) {\r\n        this.brickX = brickX;\r\n        this.brickY = brickY;\r\n        this.brickW = brickW;\r\n        this.brickH = brickH;\r\n    }\r\n\r\n    public int getBrickX(){\r\n        return brickX;\r\n    }\r\n\r\n    public int getBrickY(){\r\n        return brickY;\r\n    }\r\n    public int getBrickW(){\r\n        return brickW;\r\n    }\r\n    public int getBrickH(){\r\n        return brickH;\r\n    }\r\n\r\n    }\r\n\r\n\r\n","title":"Ball will not bounce off paddle nor wall in my brick breaker game","body":"<p>I have been sitting here for 5 hours trying to make my ball bounce off the paddle and the walls when it hits it but it just goes straight through the walls and paddle then re enters through the top and the same cycle continues. I don't know where I am going wrong</p>\n<p>My MainWindow class:</p>\n<pre><code>import javax.swing.*;\nimport java.awt.*;\nimport java.awt.event.*;\nimport java.awt.image.BufferedImage;\n\npublic class MainWindow extends JPanel implements KeyListener, ActionListener {\n\nprivate boolean gameRunning = true;\nprivate int BOARD_WIDTH = 500;\nprivate int BOARD_HEIGHT = 500;\nprivate Thread animator;\nprivate BufferedImage img;\nprivate Dimension dimension;\nprivate int ballX = 20;\nprivate int ballY = 200;\nprivate int ballSpeedX = 4;\nprivate int ballSpeedY = 5;\nprivate int ballWidth = 20;\nprivate Brick[] bricks = new Brick[24];\nprivate boolean[] showBrick = new boolean[24];\nprivate int paddleX = BOARD_WIDTH/2;\nprivate int paddleY = BOARD_HEIGHT-50;\nprivate int paddleW = 100;\nprivate int paddleH = 10;\nboolean paddleLeft = false;\nboolean paddleRight = true;\nprivate Timer timer;\nprivate int delay = 50;\n\n\npublic MainWindow(){\n    addKeyListener(this);\n    //addMouseListener(this);\n    setFocusable(true);\n    dimension = new Dimension(BOARD_WIDTH, BOARD_HEIGHT);\n    setBackground(Color.BLACK);\n\n    int x = 20;\n    int y = 20;\n    int count = 1;\n    for(int i = 0; i &lt; bricks.length; i++){\n        bricks[i] = new Brick(x, y, 50, 10);\n        showBrick[i] = true;\n        x += 55;\n        if (count%8 == 0){\n            x = 20;\n            y += 20;\n        }\n        count++;\n    }\n    timer = new Timer(delay, this);\n    timer.start();\n\n    //if (animator == null || !gameRunning) {\n      // animator = new Thread(this);\n        //animator.start();\n    //}\n    setDoubleBuffered(true);\n}\n\npublic void paint(Graphics g) {\n    super.paint(g);\n    g.setColor(Color.pink);\n    g.fillRect(0,0, dimension.width, dimension.height);\n    g.setColor(Color.black);\n\n    // for the bricks\n    for(int i = 0; i&lt;bricks.length; i++) {\n        if(showBrick[i])\n            g.fillRect(bricks[i].getBrickX(), bricks[i].getBrickY(),bricks[i].getBrickW(),bricks[i].getBrickH());\n\n    }\n    // for the paddle\n    g.fillRect(paddleX, paddleY, paddleW, paddleH);\n\n    // for the ball\n    g.fillOval(ballX, ballY, ballSpeedX,ballSpeedY);\n\n\n    //if (gameRunning){\n        //ballX+=ballSpeedX;\n      //  movingBall();\n        //repaint();\n\n    //}\n    g.dispose();\n}\n\nprivate void movingBall(){\n\n}\n\n   \n@Override\npublic void keyTyped(KeyEvent e) {\n    //if (e.getKeyCode() == KeyEvent.VK_RIGHT){\n      //  paddleX+=5;\n    //}\n\n}\n\n@Override\npublic void keyPressed(KeyEvent e) {\n    int key = e.getKeyCode();\n    if (e.getKeyCode() == KeyEvent.VK_RIGHT){\n        if(paddleX &gt;= 385){\n            paddleRight = false;\n        }\n        else {\n            //ballX+=ballSpeedX;\n            paddleRight = true;\n            paddleX+=5;\n            repaint();\n        }\n    }\n    if (e.getKeyCode() == KeyEvent.VK_LEFT){\n        if(paddleX &lt;= 10){\n            paddleLeft = false;\n        }\n        else {\n            paddleLeft = false;\n            paddleX-=5;\n            repaint();\n        }\n    }\n\n}\n\n@Override\npublic void keyReleased(KeyEvent e) {\n    int key = e.getKeyCode();\n    if (e.getKeyCode() == KeyEvent.VK_RIGHT){\n        paddleRight = false;\n    }\n    if (e.getKeyCode() == KeyEvent.VK_LEFT){\n        paddleLeft = false;\n    }\n\n}\n\n\n@Override\npublic void actionPerformed(ActionEvent e) {\n    timer.start();\n    if(ballX &lt; 0 || ballX &gt; BOARD_WIDTH){\n        ballSpeedX = ballSpeedX * -1;\n    }\n    if(ballY &lt; 0){\n        ballSpeedY = ballSpeedY * -1;\n\n    }\n    if(ballY &gt; BOARD_HEIGHT){\n        ballX = 20;\n        ballY = 200;\n        ballSpeedY *= -1;\n    }\n    if(ballX == paddleX &amp;&amp; ballY == paddleY){\n        ballSpeedY *= -1;\n    }\n    if(ballX + ballWidth &gt; paddleX &amp;&amp; ballX &lt; paddleX + paddleW &amp;&amp; ballY + ballWidth &gt; paddleY &amp;&amp; ballY &lt; paddleY + paddleH) {\n        ballSpeedY *= -1;\n    }\n    ballX += ballSpeedX;\n    ballY += ballSpeedY;\n    repaint();\n    //System.out.println(&quot;its working&quot;);\n}\n\n}\n</code></pre>\n<p>My Window class:</p>\n<pre><code>import javax.swing.*;\n\npublic class Window {\n\npublic Window() {\n\n    JFrame frame = new JFrame(&quot;Brick Builder Game&quot;);\n    frame.setDefaultCloseOperation(frame.DISPOSE_ON_CLOSE);\n    frame.setSize(500,500);\n    frame.add(new MainWindow());\n    frame.setVisible(true);\n    frame.setResizable(false);\n\n}\n\npublic static void main(String[] args){\n    new Window();\n}\n}\n</code></pre>\n<p>My brick class:</p>\n<pre><code>public class Brick {\n\n// X-position of brick\nprivate int brickX;\n// Y-position of brick\nprivate int brickY;\n// width of brick\nprivate int brickW;\n// height of brick\nprivate int brickH;\n\npublic Brick(int brickX, int brickY, int brickW, int brickH) {\n    this.brickX = brickX;\n    this.brickY = brickY;\n    this.brickW = brickW;\n    this.brickH = brickH;\n}\n\npublic int getBrickX(){\n    return brickX;\n}\n\npublic int getBrickY(){\n    return brickY;\n}\npublic int getBrickW(){\n    return brickW;\n}\npublic int getBrickH(){\n    return brickH;\n}\n\n}\n</code></pre>\n"},{"tags":["java","performance","list","stop-words","processing-efficiency"],"comments":[{"owner":{"account_id":1963969,"reputation":2728,"user_id":1764693,"accept_rate":100,"display_name":"slipperyseal"},"score":0,"creation_date":1453270511,"post_id":34892688,"comment_id":57523223,"body_markdown":"looks good to me. how big is list S going to be? if it&#39;s especially large the solution might be to not load words into the list to begin with and do the processing on an Input/Output stream level. But I would only do that if you actually had a performance or memory problem with the current implementation.","body":"looks good to me. how big is list S going to be? if it&#39;s especially large the solution might be to not load words into the list to begin with and do the processing on an Input/Output stream level. But I would only do that if you actually had a performance or memory problem with the current implementation."},{"owner":{"account_id":1963969,"reputation":2728,"user_id":1764693,"accept_rate":100,"display_name":"slipperyseal"},"score":0,"creation_date":1453270630,"post_id":34892688,"comment_id":57523281,"body_markdown":"instead of removing the strings from the list (causing an internal copy down), you could set nulls where the stop words are. then when you output the list, ignore the nulls, or copy the list at the end, and exclude the nulls at that point.","body":"instead of removing the strings from the list (causing an internal copy down), you could set nulls where the stop words are. then when you output the list, ignore the nulls, or copy the list at the end, and exclude the nulls at that point."},{"owner":{"account_id":7672293,"reputation":29,"user_id":5814122,"display_name":"Shorbhaja"},"score":0,"creation_date":1453276040,"post_id":34892688,"comment_id":57525624,"body_markdown":"It&#39;s not removing the stopwords from the List.","body":"It&#39;s not removing the stopwords from the List."}],"answers":[{"tags":[],"owner":{"account_id":7656576,"reputation":11,"user_id":5803215,"display_name":"LChukka"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1453270657,"creation_date":1453270657,"answer_id":34892831,"question_id":34892688,"body_markdown":"\r\nTry  the below changes suggested:\r\n\r\n    public static List&lt;String&gt; removedText(List&lt;String&gt; S)\r\n\t{\r\n\t    Iterator&lt;String&gt; text = S.iterator();\r\n\r\n\t    while(text.hasNext())\r\n\t    {\r\n\t        String token = text.next();\r\n\t        if(hs.contains(token))\r\n\t        {\r\n\r\n\t                S.remove(token); ////Changed text.next() --&gt; token\r\n\t        }\r\n\t       // text = S.iterator(); why the need to re-assign?\r\n\t    }\r\n\t    return S;\r\n\t}","title":"Most time efficient way to remove stop words in Java from an array of strings","body":"<p>Try  the below changes suggested:</p>\n\n<pre><code>public static List&lt;String&gt; removedText(List&lt;String&gt; S)\n{\n    Iterator&lt;String&gt; text = S.iterator();\n\n    while(text.hasNext())\n    {\n        String token = text.next();\n        if(hs.contains(token))\n        {\n\n                S.remove(token); ////Changed text.next() --&gt; token\n        }\n       // text = S.iterator(); why the need to re-assign?\n    }\n    return S;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2818342,"reputation":299858,"user_id":2422776,"display_name":"Mureinik"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1453277178,"creation_date":1453277178,"answer_id":34894606,"question_id":34892688,"body_markdown":"You shouldn&#39;t manipulate the list while iterating over it. Moreover, you&#39;re calling `next()` twice under the same loop that evaluates `hasNext()`. Instead, you should use the iterator to remove the item:\r\n\r\n    public static List&lt;String&gt; removedText(List&lt;String&gt; s) {\r\n        Iterator&lt;String&gt; text = s.iterator();\r\n    \r\n        while (text.hasNext()) {\r\n            String token = text.next();\r\n            if (hs.contains(token)) {\r\n                text.remove();\r\n            }\r\n        }\r\n        return s;\r\n    }\r\n\r\nBut that&#39;s a bit of &quot;reinventing the wheel&quot;, instead, you could just use the [`removeAll(Collcetion)`](https://docs.oracle.com/javase/7/docs/api/java/util/Collection.html#removeAll(java.util.Collection)) method:\r\n\r\n    s.removeAll(hs);","title":"Most time efficient way to remove stop words in Java from an array of strings","body":"<p>You shouldn't manipulate the list while iterating over it. Moreover, you're calling <code>next()</code> twice under the same loop that evaluates <code>hasNext()</code>. Instead, you should use the iterator to remove the item:</p>\n\n<pre><code>public static List&lt;String&gt; removedText(List&lt;String&gt; s) {\n    Iterator&lt;String&gt; text = s.iterator();\n\n    while (text.hasNext()) {\n        String token = text.next();\n        if (hs.contains(token)) {\n            text.remove();\n        }\n    }\n    return s;\n}\n</code></pre>\n\n<p>But that's a bit of \"reinventing the wheel\", instead, you could just use the <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/Collection.html#removeAll(java.util.Collection)\" rel=\"nofollow\"><code>removeAll(Collcetion)</code></a> method:</p>\n\n<pre><code>s.removeAll(hs);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1044190,"reputation":2567,"user_id":1049527,"accept_rate":96,"display_name":"ZaoTaoBao"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1453277977,"creation_date":1453277977,"answer_id":34894811,"question_id":34892688,"body_markdown":"maybe you can use org/apache/commons/lang/ArrayUtils inside loop.\r\n\r\n    stopwords = ArrayUtils.removeElement(stopwords, element)\r\n\r\nhttps://commons.apache.org/proper/commons-lang/javadocs/api-2.6/org/apache/commons/lang/ArrayUtils.html","title":"Most time efficient way to remove stop words in Java from an array of strings","body":"<p>maybe you can use org/apache/commons/lang/ArrayUtils inside loop.</p>\n\n<pre><code>stopwords = ArrayUtils.removeElement(stopwords, element)\n</code></pre>\n\n<p><a href=\"https://commons.apache.org/proper/commons-lang/javadocs/api-2.6/org/apache/commons/lang/ArrayUtils.html\" rel=\"nofollow\">https://commons.apache.org/proper/commons-lang/javadocs/api-2.6/org/apache/commons/lang/ArrayUtils.html</a></p>\n"},{"tags":[],"owner":{"account_id":1890578,"reputation":1280,"user_id":1708774,"accept_rate":65,"display_name":"Martin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658393147,"creation_date":1658393147,"answer_id":73063201,"question_id":34892688,"body_markdown":"I think that the most efficient way is use the binarySearch method with a sorted list of terms\r\n\r\n\r\n    int indexStop = Collections.binarySearch(EncyclopediaHelper.getStopWords(), string, String::compareToIgnoreCase);\r\n    \r\n    boolean stop = indexStop &gt; 0 \r\n\r\nMore information here: https://stackoverflow.com/questions/24275415/what-is-the-performance-of-collections-binarysearch-over-manually-searching-a-li","title":"Most time efficient way to remove stop words in Java from an array of strings","body":"<p>I think that the most efficient way is use the binarySearch method with a sorted list of terms</p>\n<pre><code>int indexStop = Collections.binarySearch(EncyclopediaHelper.getStopWords(), string, String::compareToIgnoreCase);\n\nboolean stop = indexStop &gt; 0 \n</code></pre>\n<p>More information here: <a href=\"https://stackoverflow.com/questions/24275415/what-is-the-performance-of-collections-binarysearch-over-manually-searching-a-li\">What is the performance of Collections.binarySearch over manually searching a list?</a></p>\n"}],"owner":{"account_id":7672293,"reputation":29,"user_id":5814122,"display_name":"Shorbhaja"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1864,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":34894606,"answer_count":4,"score":2,"last_activity_date":1658393147,"creation_date":1453270034,"question_id":34892688,"body_markdown":"How do I remove these stopwords in the most efficient way. The approach below doesn&#39;t remove the stopwords. What am I missing?\r\n\r\nIs there any other way to do this?\r\n\r\nI want to accomplish this in the most time efficient way in Java.\r\n\r\n\r\n\tpublic static HashSet&lt;String&gt; hs = new HashSet&lt;String&gt;();\r\n\t\r\n\t\r\n\tpublic static String[] stopwords = {&quot;a&quot;, &quot;able&quot;, &quot;about&quot;,\r\n\t\t\t&quot;across&quot;, &quot;after&quot;, &quot;all&quot;, &quot;almost&quot;, &quot;also&quot;, &quot;am&quot;, &quot;among&quot;, &quot;an&quot;,\r\n\t\t\t&quot;and&quot;, &quot;any&quot;, &quot;are&quot;, &quot;as&quot;, &quot;at&quot;, &quot;b&quot;, &quot;be&quot;, &quot;because&quot;, &quot;been&quot;,\r\n\t\t\t&quot;but&quot;, &quot;by&quot;, &quot;c&quot;, &quot;can&quot;, &quot;cannot&quot;, &quot;could&quot;, &quot;d&quot;, &quot;dear&quot;, &quot;did&quot;,\r\n\t\t\t&quot;do&quot;, &quot;does&quot;, &quot;e&quot;, &quot;either&quot;, &quot;else&quot;, &quot;ever&quot;, &quot;every&quot;, &quot;f&quot;, &quot;for&quot;,\r\n\t\t\t&quot;from&quot;, &quot;g&quot;, &quot;get&quot;, &quot;got&quot;, &quot;h&quot;, &quot;had&quot;, &quot;has&quot;, &quot;have&quot;, &quot;he&quot;, &quot;her&quot;,\r\n\t\t\t&quot;hers&quot;, &quot;him&quot;, &quot;his&quot;, &quot;how&quot;, &quot;however&quot;, &quot;i&quot;, &quot;if&quot;, &quot;in&quot;, &quot;into&quot;,\r\n\t\t\t&quot;is&quot;, &quot;it&quot;, &quot;its&quot;, &quot;j&quot;, &quot;just&quot;, &quot;k&quot;, &quot;l&quot;, &quot;least&quot;, &quot;let&quot;, &quot;like&quot;,\r\n\t\t\t&quot;likely&quot;, &quot;m&quot;, &quot;may&quot;, &quot;me&quot;, &quot;might&quot;, &quot;most&quot;, &quot;must&quot;, &quot;my&quot;,\r\n\t\t\t&quot;neither&quot;, &quot;n&quot;, &quot;no&quot;, &quot;nor&quot;, &quot;not&quot;, &quot;o&quot;, &quot;of&quot;, &quot;off&quot;, &quot;often&quot;,\r\n\t\t\t&quot;on&quot;, &quot;only&quot;, &quot;or&quot;, &quot;other&quot;, &quot;our&quot;, &quot;own&quot;, &quot;p&quot;, &quot;q&quot;, &quot;r&quot;, &quot;rather&quot;,\r\n\t\t\t&quot;s&quot;, &quot;said&quot;, &quot;say&quot;, &quot;says&quot;, &quot;she&quot;, &quot;should&quot;, &quot;since&quot;, &quot;so&quot;, &quot;some&quot;,\r\n\t\t\t&quot;t&quot;, &quot;than&quot;, &quot;that&quot;, &quot;the&quot;, &quot;their&quot;, &quot;them&quot;, &quot;then&quot;, &quot;there&quot;,\r\n\t\t\t&quot;these&quot;, &quot;they&quot;, &quot;this&quot;, &quot;tis&quot;, &quot;to&quot;, &quot;too&quot;, &quot;twas&quot;, &quot;u&quot;, &quot;us&quot;,\r\n\t\t\t&quot;v&quot;, &quot;w&quot;, &quot;wants&quot;, &quot;was&quot;, &quot;we&quot;, &quot;were&quot;, &quot;what&quot;, &quot;when&quot;, &quot;where&quot;,\r\n\t\t\t&quot;which&quot;, &quot;while&quot;, &quot;who&quot;, &quot;whom&quot;, &quot;why&quot;, &quot;will&quot;, &quot;with&quot;, &quot;would&quot;,\r\n\t\t\t&quot;x&quot;, &quot;y&quot;, &quot;yet&quot;, &quot;you&quot;, &quot;your&quot;, &quot;z&quot;};\r\n\tpublic StopWords()\r\n\t{\r\n\t\tint len= stopwords.length;\r\n\t\tfor(int i=0;i&lt;len;i++)\r\n\t\t{\r\n\t\t\ths.add(stopwords[i]);\r\n\t\t}\r\n\t\tSystem.out.println(hs);\r\n\t}\r\n\r\n\tpublic List&lt;String&gt; removedText(List&lt;String&gt; S)\r\n\t{\r\n\t\tIterator&lt;String&gt; text = S.iterator();\r\n\t\t\r\n\t\twhile(text.hasNext())\r\n\t\t{\r\n\t\t\tString token = text.next();\r\n\t\t\tif(hs.contains(token))\r\n\t\t\t{\r\n\t\t\t\t\r\n\t\t\t\t\tS.remove(text.next());\r\n\t\t\t}\r\n\t\t\ttext = S.iterator();\r\n\t\t}\r\n\t\treturn S;\r\n\t}\r\n","title":"Most time efficient way to remove stop words in Java from an array of strings","body":"<p>How do I remove these stopwords in the most efficient way. The approach below doesn't remove the stopwords. What am I missing?</p>\n\n<p>Is there any other way to do this?</p>\n\n<p>I want to accomplish this in the most time efficient way in Java.</p>\n\n<pre><code>public static HashSet&lt;String&gt; hs = new HashSet&lt;String&gt;();\n\n\npublic static String[] stopwords = {\"a\", \"able\", \"about\",\n        \"across\", \"after\", \"all\", \"almost\", \"also\", \"am\", \"among\", \"an\",\n        \"and\", \"any\", \"are\", \"as\", \"at\", \"b\", \"be\", \"because\", \"been\",\n        \"but\", \"by\", \"c\", \"can\", \"cannot\", \"could\", \"d\", \"dear\", \"did\",\n        \"do\", \"does\", \"e\", \"either\", \"else\", \"ever\", \"every\", \"f\", \"for\",\n        \"from\", \"g\", \"get\", \"got\", \"h\", \"had\", \"has\", \"have\", \"he\", \"her\",\n        \"hers\", \"him\", \"his\", \"how\", \"however\", \"i\", \"if\", \"in\", \"into\",\n        \"is\", \"it\", \"its\", \"j\", \"just\", \"k\", \"l\", \"least\", \"let\", \"like\",\n        \"likely\", \"m\", \"may\", \"me\", \"might\", \"most\", \"must\", \"my\",\n        \"neither\", \"n\", \"no\", \"nor\", \"not\", \"o\", \"of\", \"off\", \"often\",\n        \"on\", \"only\", \"or\", \"other\", \"our\", \"own\", \"p\", \"q\", \"r\", \"rather\",\n        \"s\", \"said\", \"say\", \"says\", \"she\", \"should\", \"since\", \"so\", \"some\",\n        \"t\", \"than\", \"that\", \"the\", \"their\", \"them\", \"then\", \"there\",\n        \"these\", \"they\", \"this\", \"tis\", \"to\", \"too\", \"twas\", \"u\", \"us\",\n        \"v\", \"w\", \"wants\", \"was\", \"we\", \"were\", \"what\", \"when\", \"where\",\n        \"which\", \"while\", \"who\", \"whom\", \"why\", \"will\", \"with\", \"would\",\n        \"x\", \"y\", \"yet\", \"you\", \"your\", \"z\"};\npublic StopWords()\n{\n    int len= stopwords.length;\n    for(int i=0;i&lt;len;i++)\n    {\n        hs.add(stopwords[i]);\n    }\n    System.out.println(hs);\n}\n\npublic List&lt;String&gt; removedText(List&lt;String&gt; S)\n{\n    Iterator&lt;String&gt; text = S.iterator();\n\n    while(text.hasNext())\n    {\n        String token = text.next();\n        if(hs.contains(token))\n        {\n\n                S.remove(text.next());\n        }\n        text = S.iterator();\n    }\n    return S;\n}\n</code></pre>\n"},{"tags":["java","spring-boot","spring-batch","completable-future"],"comments":[{"owner":{"account_id":15159660,"reputation":1770,"user_id":10939204,"display_name":"Traian GEICU"},"score":0,"creation_date":1658305635,"post_id":73047799,"comment_id":129015945,"body_markdown":"my advice is to test with native rdbms-query (pl-sql, or whatever). Should be faster. Also any schedule should be based on native rdbms-query (eg: means work exclusively with on rdbms provided environment: pl-sql, t-sql). Any usage through intermediary layer JPA/Hibernate can not be faster. (including any &quot;intermediary schedulers&quot; ... but this is another story)","body":"my advice is to test with native rdbms-query (pl-sql, or whatever). Should be faster. Also any schedule should be based on native rdbms-query (eg: means work exclusively with on rdbms provided environment: pl-sql, t-sql). Any usage through intermediary layer JPA/Hibernate can not be faster. (including any &quot;intermediary schedulers&quot; ... but this is another story)"}],"answers":[{"tags":[],"owner":{"account_id":384402,"reputation":1902,"user_id":740888,"display_name":"httPants"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1658392838,"creation_date":1658392838,"answer_id":73063139,"question_id":73047799,"body_markdown":"The benefit of spring batch in this scenario is that it breaks up a single transaction that can potentially involve millions of rows into multiple smaller transactions (assuming you use chunk processing).  If you try to delete millions of rows in a single transaction the rollback log for the transaction can be huge, which can make the database actually take much longer than it would for multiple small transactions.  ","title":"Deleting many records from DB: Spring batch benefits?","body":"<p>The benefit of spring batch in this scenario is that it breaks up a single transaction that can potentially involve millions of rows into multiple smaller transactions (assuming you use chunk processing).  If you try to delete millions of rows in a single transaction the rollback log for the transaction can be huge, which can make the database actually take much longer than it would for multiple small transactions.</p>\n"}],"owner":{"account_id":3216552,"reputation":2553,"user_id":2715083,"accept_rate":57,"display_name":"Somjit"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":490,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1658392838,"creation_date":1658303297,"question_id":73047799,"body_markdown":"**Scenario:**\r\n\r\nCreate a spring boot project that will, twice a month, do:\r\n1. Read info from a master table, which contains which table to delete, and criteria for deletion\r\n2. Find all the keys from the specified deletion table, which meet the deletion criteria\r\n3. Actually delete all the records based on the keys found above.\r\n\r\nNow, some tables can have large volumes of data, in order of millions of rows, but most will be smaller tables &lt; 10k rows to delete.\r\n\r\n\r\n**Question:**\r\n\r\nGiven the above scenario, my boss suggested we look into Spring Batch. I am trying to understand is there any particular benefit Spring Batch will provide? as opposed to a normal scheduler that spins of multiple threads, and each thread parallelly deleting records from tables specified in the Master table? ","title":"Deleting many records from DB: Spring batch benefits?","body":"<p><strong>Scenario:</strong></p>\n<p>Create a spring boot project that will, twice a month, do:</p>\n<ol>\n<li>Read info from a master table, which contains which table to delete, and criteria for deletion</li>\n<li>Find all the keys from the specified deletion table, which meet the deletion criteria</li>\n<li>Actually delete all the records based on the keys found above.</li>\n</ol>\n<p>Now, some tables can have large volumes of data, in order of millions of rows, but most will be smaller tables &lt; 10k rows to delete.</p>\n<p><strong>Question:</strong></p>\n<p>Given the above scenario, my boss suggested we look into Spring Batch. I am trying to understand is there any particular benefit Spring Batch will provide? as opposed to a normal scheduler that spins of multiple threads, and each thread parallelly deleting records from tables specified in the Master table?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":11380920,"reputation":8254,"user_id":8343843,"display_name":"Alexey R."},"score":0,"creation_date":1658391630,"post_id":73062820,"comment_id":129041130,"body_markdown":"I think that means that in `requireNonNull(Object, String)` you already have to have a string object somewhere before you perform a check. But in supplier case, you message might be created when `get` is called so that having this `obj == null` false you won&#39;t spend resources for creating and storing error message.","body":"I think that means that in <code>requireNonNull(Object, String)</code> you already have to have a string object somewhere before you perform a check. But in supplier case, you message might be created when <code>get</code> is called so that having this <code>obj == null</code> false you won&#39;t spend resources for creating and storing error message."}],"answers":[{"tags":[],"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1658392449,"creation_date":1658392449,"answer_id":73063051,"question_id":73062820,"body_markdown":"Those two methods use a similar technique for slightly different reasons.\r\n\r\nFirst of all: a `Supplier&lt;SomeType&gt;` can be provided instead of a `SomeType` if it&#39;s unknown if the value will actually be required when the method is called. This can delay creation of the `SomeType` object until it&#39;s actually used, avoiding the time/memory cost of the creation when it&#39;s unnecessary.\r\n\r\nImagine for example a line like this:\r\n\r\n    requireNonNull(someParameter, &quot;someParameter was not given for &quot; + someOtherParameter);\r\n\r\nIf this line is executed the error message string (the second parameter) will *always* be constructed, no matter if `someParameter` is `null` or not. This is wasteful, we&#39;d rather postpone creating the error message until it&#39;s actually needed. But writing `if (someParameter == null)` before this each time defeats the purpose of the method (since that&#39;s basically all it does), so we try to find a different way.\r\n\r\nWhat if instead of providing an error message, we provide something that can *produce* the error message if and when it&#39;s really needed. That something is a `Supplier&lt;String&gt;`. One simple way to implement such a provider is with a lambda:\r\n\r\n    requireNonNull(someParameter, () -&gt; &quot;someParameter was not given for &quot; + someOtherParameter);\r\n\r\nNow the actual creation of the error string is only executed when `someParameter` is actually `null`.\r\n\r\nOften this kind of optimization is minor, but in some cases (for example inside of a frequently called method) this kind of optimization can have real tangible benefits.\r\n\r\n`requireNonNullElseGet` uses the same technique, but instead of a supplier for an error message it takes a supplier of an alternate value:\r\n\r\n   MyAwesomeObject foo = getSomeAwesomeObject();\r\n   MyAwesomeObject fooOrDefault = requireNonNullElseGet(foo, AwesomeObjectFactory::expensiveCreationMethod);\r\n\r\nHere we use a method reference to point tell `requireNonNullElseGet` how to acquire a `MyAwesomeObject` if (and only if) `foo` is null.\r\n\r\nIf instead we did the (probably more readable)\r\n\r\n    MyAwesomeObject fooOrDefault = requireNonNullElse(foo, AwesomeObjectFactory.expensiveCreationMethod());\r\n\r\nthen `expensiveCreationMethod` would *always* be executed, no matter if the result is actually needed or not.","title":"If line doesn&#39;t executed still object creation happens","body":"<p>Those two methods use a similar technique for slightly different reasons.</p>\n<p>First of all: a <code>Supplier&lt;SomeType&gt;</code> can be provided instead of a <code>SomeType</code> if it's unknown if the value will actually be required when the method is called. This can delay creation of the <code>SomeType</code> object until it's actually used, avoiding the time/memory cost of the creation when it's unnecessary.</p>\n<p>Imagine for example a line like this:</p>\n<pre><code>requireNonNull(someParameter, &quot;someParameter was not given for &quot; + someOtherParameter);\n</code></pre>\n<p>If this line is executed the error message string (the second parameter) will <em>always</em> be constructed, no matter if <code>someParameter</code> is <code>null</code> or not. This is wasteful, we'd rather postpone creating the error message until it's actually needed. But writing <code>if (someParameter == null)</code> before this each time defeats the purpose of the method (since that's basically all it does), so we try to find a different way.</p>\n<p>What if instead of providing an error message, we provide something that can <em>produce</em> the error message if and when it's really needed. That something is a <code>Supplier&lt;String&gt;</code>. One simple way to implement such a provider is with a lambda:</p>\n<pre><code>requireNonNull(someParameter, () -&gt; &quot;someParameter was not given for &quot; + someOtherParameter);\n</code></pre>\n<p>Now the actual creation of the error string is only executed when <code>someParameter</code> is actually <code>null</code>.</p>\n<p>Often this kind of optimization is minor, but in some cases (for example inside of a frequently called method) this kind of optimization can have real tangible benefits.</p>\n<p><code>requireNonNullElseGet</code> uses the same technique, but instead of a supplier for an error message it takes a supplier of an alternate value:</p>\n<p>MyAwesomeObject foo = getSomeAwesomeObject();\nMyAwesomeObject fooOrDefault = requireNonNullElseGet(foo, AwesomeObjectFactory::expensiveCreationMethod);</p>\n<p>Here we use a method reference to point tell <code>requireNonNullElseGet</code> how to acquire a <code>MyAwesomeObject</code> if (and only if) <code>foo</code> is null.</p>\n<p>If instead we did the (probably more readable)</p>\n<pre><code>MyAwesomeObject fooOrDefault = requireNonNullElse(foo, AwesomeObjectFactory.expensiveCreationMethod());\n</code></pre>\n<p>then <code>expensiveCreationMethod</code> would <em>always</em> be executed, no matter if the result is actually needed or not.</p>\n"},{"tags":[],"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658392704,"creation_date":1658392704,"answer_id":73063110,"question_id":73062820,"body_markdown":"You read a bit too much in the javadoc.\r\n\r\nThis form of `requireNonNull` does not need a possible costly message String, i.e. composed of expression on variables. Instead a message supplier is passed, which might compose that String expression.\r\n\r\n    // requireNonNull(Object, String)\r\n    // Costly whether x is null or not: message used or not.\r\n    Objects.requireNonNull(x, &quot;Error in &quot; + map.get(&quot;x&quot;) + &quot;, &quot; + user.fullName());\r\n\r\n    // requireNonNull(Object, Supplier&lt;String&gt;)\r\n    // Only when x is null, a message is evaluated.\r\n    Objects.requireNonNull(x, () -&gt; &quot;Error in &quot; + map.get(&quot;x&quot;) + &quot;, &quot; + user.fullName());\r\n\r\nThe documentation wants to express that the _message_ will only be created when needed - with a messageSupplier.\r\n\r\nThe code looks a bit more complex, as passing `null` for messageSupplier is allowed.\r\n","title":"If line doesn&#39;t executed still object creation happens","body":"<p>You read a bit too much in the javadoc.</p>\n<p>This form of <code>requireNonNull</code> does not need a possible costly message String, i.e. composed of expression on variables. Instead a message supplier is passed, which might compose that String expression.</p>\n<pre><code>// requireNonNull(Object, String)\n// Costly whether x is null or not: message used or not.\nObjects.requireNonNull(x, &quot;Error in &quot; + map.get(&quot;x&quot;) + &quot;, &quot; + user.fullName());\n\n// requireNonNull(Object, Supplier&lt;String&gt;)\n// Only when x is null, a message is evaluated.\nObjects.requireNonNull(x, () -&gt; &quot;Error in &quot; + map.get(&quot;x&quot;) + &quot;, &quot; + user.fullName());\n</code></pre>\n<p>The documentation wants to express that the <em>message</em> will only be created when needed - with a messageSupplier.</p>\n<p>The code looks a bit more complex, as passing <code>null</code> for messageSupplier is allowed.</p>\n"}],"owner":{"account_id":18467057,"reputation":52,"user_id":13452926,"display_name":"Mammad Yahyayev"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":76,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":73063051,"answer_count":2,"score":-1,"last_activity_date":1658392704,"creation_date":1658391387,"question_id":73062820,"body_markdown":"When I read java docs about **Objects** class, I got confused about object creation. It says\r\n\r\n&gt; Unlike the method requireNonNull(Object, String), this method allows creation of the message to be deferred until after the null check is made\r\n\r\nHere is the method body\r\n\r\n    public static &lt;T&gt; T requireNonNull(T obj, Supplier&lt;String&gt; messageSupplier) {\r\n        if (obj == null)\r\n            throw new NullPointerException(messageSupplier == null ?\r\n                                           null : messageSupplier.get());\r\n        return obj;\r\n    }\r\nIf **messageSupplier** is null, will object get created?\r\n\r\n\r\nWhat about this code\r\n\r\n    public static &lt;T&gt; T requireNonNullElseGet(T obj, Supplier&lt;? extends T&gt; supplier) {\r\n        return (obj != null) ? obj\r\n                : requireNonNull(requireNonNull(supplier, &quot;supplier&quot;).get(), &quot;supplier.get()&quot;);\r\n    }\r\n\r\nIf **obj** is not null, will object creation happen?","title":"If line doesn&#39;t executed still object creation happens","body":"<p>When I read java docs about <strong>Objects</strong> class, I got confused about object creation. It says</p>\n<blockquote>\n<p>Unlike the method requireNonNull(Object, String), this method allows creation of the message to be deferred until after the null check is made</p>\n</blockquote>\n<p>Here is the method body</p>\n<pre><code>public static &lt;T&gt; T requireNonNull(T obj, Supplier&lt;String&gt; messageSupplier) {\n    if (obj == null)\n        throw new NullPointerException(messageSupplier == null ?\n                                       null : messageSupplier.get());\n    return obj;\n}\n</code></pre>\n<p>If <strong>messageSupplier</strong> is null, will object get created?</p>\n<p>What about this code</p>\n<pre><code>public static &lt;T&gt; T requireNonNullElseGet(T obj, Supplier&lt;? extends T&gt; supplier) {\n    return (obj != null) ? obj\n            : requireNonNull(requireNonNull(supplier, &quot;supplier&quot;).get(), &quot;supplier.get()&quot;);\n}\n</code></pre>\n<p>If <strong>obj</strong> is not null, will object creation happen?</p>\n"},{"tags":["java","arraylist","apache-poi"],"comments":[{"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"score":1,"creation_date":1658374716,"post_id":73059937,"comment_id":129037148,"body_markdown":"Why not simply put a `VLOOKUP` formula in column D of first Excel and let Excel do this task?","body":"Why not simply put a <code>VLOOKUP</code> formula in column D of first Excel and let Excel do this task?"},{"owner":{"account_id":8938634,"reputation":21,"user_id":6668589,"display_name":"JackofallTrade"},"score":0,"creation_date":1658376252,"post_id":73059937,"comment_id":129037355,"body_markdown":"@AxelRichter You can assume not a fan of doing manual task and excel.","body":"@AxelRichter You can assume not a fan of doing manual task and excel."},{"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"score":1,"creation_date":1658379920,"post_id":73059937,"comment_id":129037962,"body_markdown":"If you would read the lookup data into a `Map`, second Excel column A as the key, column B as the value, then the lookup would be as simple as `Map.get(Object key)` for a given key.","body":"If you would read the lookup data into a <code>Map</code>, second Excel column A as the key, column B as the value, then the lookup would be as simple as <code>Map.get(Object key)</code> for a given key."}],"owner":{"account_id":8938634,"reputation":21,"user_id":6668589,"display_name":"JackofallTrade"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":151,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1658392583,"creation_date":1658369467,"question_id":73059937,"body_markdown":"[![Excel Tables][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/s1nUF.png\r\n\r\nCheck my Excel Tables SNAP above pasted \r\n\r\nBy below CODE of java I have read the data and fetch in a arraylist;\r\n\r\n    workbook = WorkbookFactory.create(new File(SAMPLE_XLSX_FILE_PATH));\r\n    \t\t\tArrayList&lt;String&gt; comps = new ArrayList&lt;String&gt;();\r\n    \t\t\tfor (Sheet sheet : workbook) {\r\n    \t\t\t\tSystem.out.println(&quot;=&gt; &quot; + sheet.getSheetName());\r\n    \t\t\t}\r\n    \r\n    \t\t\tSheet sheet = workbook.getSheetAt(0);\r\n    \t\t\tDataFormatter dataFormatter = new DataFormatter();\r\n    \t\t\tfor (Row row : sheet) {\r\n    \t\t\t\tfor (Cell cell : row) {\r\n    \t\t\t\t\tString tempValue = dataFormatter.formatCellValue(cell);\r\n    \t\t\t\t\t// System.out.println(tempValue);\r\n    \t\t\t\t\tcomps.add(tempValue);\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t\tfor (int i = 2; i &lt; comps.size(); i++) {\r\n    \t\t\t\tSystem.out.println(comps.get(i));\r\n    \t\t\t}\r\n\r\nOutput is like below after reading and storing into arraylist\r\n\r\n    A\r\n    B\r\n    1\r\n    AA\r\n    2\r\n    BB\r\n    3\r\n    CC\r\n\r\nNow, In first table in my snap, I want to compare Column A to Second Table Column A and when there is a match then in D column of first table I need to put the data of Column B from Second Table. Simply this vlookup between 2 excels. I want to do it by java.\r\n\r\nAs per my understanding I need to read the first table as well like I did for second table and store it in a Arraylist then start comparing and write it in Column D of first table and save it.\r\n\r\nAnyone can help me  with next step? Appreciate the code on this context. ","title":"Do Vlookup on Excel by Java","body":"<p><a href=\"https://i.stack.imgur.com/s1nUF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/s1nUF.png\" alt=\"Excel Tables\" /></a></p>\n<p>Check my Excel Tables SNAP above pasted</p>\n<p>By below CODE of java I have read the data and fetch in a arraylist;</p>\n<pre><code>workbook = WorkbookFactory.create(new File(SAMPLE_XLSX_FILE_PATH));\n            ArrayList&lt;String&gt; comps = new ArrayList&lt;String&gt;();\n            for (Sheet sheet : workbook) {\n                System.out.println(&quot;=&gt; &quot; + sheet.getSheetName());\n            }\n\n            Sheet sheet = workbook.getSheetAt(0);\n            DataFormatter dataFormatter = new DataFormatter();\n            for (Row row : sheet) {\n                for (Cell cell : row) {\n                    String tempValue = dataFormatter.formatCellValue(cell);\n                    // System.out.println(tempValue);\n                    comps.add(tempValue);\n                }\n            }\n            for (int i = 2; i &lt; comps.size(); i++) {\n                System.out.println(comps.get(i));\n            }\n</code></pre>\n<p>Output is like below after reading and storing into arraylist</p>\n<pre><code>A\nB\n1\nAA\n2\nBB\n3\nCC\n</code></pre>\n<p>Now, In first table in my snap, I want to compare Column A to Second Table Column A and when there is a match then in D column of first table I need to put the data of Column B from Second Table. Simply this vlookup between 2 excels. I want to do it by java.</p>\n<p>As per my understanding I need to read the first table as well like I did for second table and store it in a Arraylist then start comparing and write it in Column D of first table and save it.</p>\n<p>Anyone can help me  with next step? Appreciate the code on this context.</p>\n"},{"tags":["java","selenium","selenium-chromedriver","webdriver"],"answers":[{"tags":[],"owner":{"account_id":24427245,"reputation":11,"user_id":18352674,"display_name":"Anh Tester"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646215750,"creation_date":1646215750,"answer_id":71320855,"question_id":71124007,"body_markdown":"Please using following code:\r\n\r\n        TakesScreenshot scrShot =((TakesScreenshot)driver);\r\n        File srcFile = scrShot.getScreenshotAs(OutputType.FILE);\r\n        if(srcFile != null)\r\n        {\r\n            File saveFileName = new File(&quot;test1.png&quot;);\r\n            FileHandler.copy(srcFile, saveFileName);\r\n        }","title":"Java-Selenium- Unable to find an exact match for CDP version 98, so returning the closest version found: 97","body":"<p>Please using following code:</p>\n<pre><code>    TakesScreenshot scrShot =((TakesScreenshot)driver);\n    File srcFile = scrShot.getScreenshotAs(OutputType.FILE);\n    if(srcFile != null)\n    {\n        File saveFileName = new File(&quot;test1.png&quot;);\n        FileHandler.copy(srcFile, saveFileName);\n    }\n</code></pre>\n"}],"owner":{"account_id":14168968,"reputation":303,"user_id":10236130,"display_name":"Matthew Pans"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":835,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1658392538,"creation_date":1644917376,"question_id":71124007,"body_markdown":"I have created a maven project for taking a screenshot from the webpage URL which I have given in my code. I am using chrome driver version 98 and selenium version 4.1.2. I&#39;m getting a warning message with the CDP versions when running my code.\r\nHere is my code.\r\nTakeScreenshot.java\r\n\r\n    public class Takescreenshot\r\n    {\r\n    \tprivate static final File SrcnewFile = null;\r\n    \r\n        public static void main(String[] args) throws Exception\r\n    \t{\r\n    \t\tWebDriver driver ;\r\n    \t\tWebDriverManager.chromedriver().clearCache();\r\n        \t//System.setProperty(&quot;webdriver.chrome.driver&quot;,&quot;C:\\drivers/chromedriver.exe&quot;);\r\n    \t\tWebDriverManager.chromedriver().setup();\r\n    \t\tdriver = new ChromeDriver();\r\n        \tdriver.get(&quot;https://www.amazon.in/&quot;);\r\n        \tTakesScreenshot scrShot =((TakesScreenshot)driver);\r\n        \tFile SrcFile=scrShot.getScreenshotAs(OutputType.FILE);\r\n        \tif(null!=null) \r\n        \t{\r\n        \t\tFile DestFile=new File(&quot;c:test/test1.png&quot;);\r\n         \t\tFileUtils.copyFile(SrcFile, DestFile);\r\n         \t\tFileUtils.getFile(SrcnewFile, (&quot;c://test1.png&quot;));\r\n         \t\t driver.quit();  \r\n        \t}\r\n        }\r\n    }\r\n\r\n\r\nWhen I try to run my program the following error shows up.\r\n\r\n        Starting ChromeDriver 98.0.4758.80 (7f0488e8ba0d8e019187c6325a16c29d9b7f4989-refs/branch-heads/4758@{#972}) on port 58811\r\n    Only local connections are allowed.\r\n    \r\n        Please see https://chromedriver.chromium.org/security-considerations for suggestions on keeping ChromeDriver safe.\r\n        ChromeDriver was started successfully.\r\n        Feb 15, 2022 12:53:33 PM org.openqa.selenium.remote.ProtocolHandshake createSession\r\n        INFO: Detected dialect: W3C\r\n        Feb 15, 2022 12:53:33 PM org.openqa.selenium.devtools.CdpVersionFinder findNearestMatch\r\n        WARNING: Unable to find an exact match for CDP version 98, so returning the closest version found: 97\r\n        Feb 15, 2022 12:53:33 PM org.openqa.selenium.devtools.CdpVersionFinder findNearestMatch\r\n        INFO: Found CDP implementation for version 98 of 97\r\nI&#39;m using Maven. My pom.xml file looks like this\r\n \r\n\r\n   \r\n\r\n     &lt;dependency&gt;\r\n        &lt;groupId&gt;com.google.guava&lt;/groupId&gt;\r\n        &lt;artifactId&gt;guava&lt;/artifactId&gt;\r\n        &lt;version&gt;31.0.1-jre&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    \t&lt;!-- https://mvnrepository.com/artifact/commons-io/commons-io --&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;commons-io&lt;/groupId&gt;\r\n        &lt;artifactId&gt;commons-io&lt;/artifactId&gt;\r\n        &lt;version&gt;2.7&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    \t&lt;dependency&gt;\r\n        &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\r\n        &lt;artifactId&gt;selenium-java&lt;/artifactId&gt;\r\n        &lt;version&gt;4.1.2&lt;/version&gt;\r\n    &lt;/dependency&gt;   \r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;io.github.bonigarcia&lt;/groupId&gt;\r\n      &lt;artifactId&gt;webdrivermanager&lt;/artifactId&gt;\r\n      &lt;version&gt;3.6.2&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\nWhen I run the java program the chrome browser will open and the page is loaded, but the screenshot of the page is not generating and couldn&#39;t be saved in the local machine. Could anyone please help me to resolve it?\r\n\r\n","title":"Java-Selenium- Unable to find an exact match for CDP version 98, so returning the closest version found: 97","body":"<p>I have created a maven project for taking a screenshot from the webpage URL which I have given in my code. I am using chrome driver version 98 and selenium version 4.1.2. I'm getting a warning message with the CDP versions when running my code.\nHere is my code.\nTakeScreenshot.java</p>\n<pre><code>public class Takescreenshot\n{\n    private static final File SrcnewFile = null;\n\n    public static void main(String[] args) throws Exception\n    {\n        WebDriver driver ;\n        WebDriverManager.chromedriver().clearCache();\n        //System.setProperty(&quot;webdriver.chrome.driver&quot;,&quot;C:\\drivers/chromedriver.exe&quot;);\n        WebDriverManager.chromedriver().setup();\n        driver = new ChromeDriver();\n        driver.get(&quot;https://www.amazon.in/&quot;);\n        TakesScreenshot scrShot =((TakesScreenshot)driver);\n        File SrcFile=scrShot.getScreenshotAs(OutputType.FILE);\n        if(null!=null) \n        {\n            File DestFile=new File(&quot;c:test/test1.png&quot;);\n            FileUtils.copyFile(SrcFile, DestFile);\n            FileUtils.getFile(SrcnewFile, (&quot;c://test1.png&quot;));\n             driver.quit();  \n        }\n    }\n}\n</code></pre>\n<p>When I try to run my program the following error shows up.</p>\n<pre><code>    Starting ChromeDriver 98.0.4758.80 (7f0488e8ba0d8e019187c6325a16c29d9b7f4989-refs/branch-heads/4758@{#972}) on port 58811\nOnly local connections are allowed.\n\n    Please see https://chromedriver.chromium.org/security-considerations for suggestions on keeping ChromeDriver safe.\n    ChromeDriver was started successfully.\n    Feb 15, 2022 12:53:33 PM org.openqa.selenium.remote.ProtocolHandshake createSession\n    INFO: Detected dialect: W3C\n    Feb 15, 2022 12:53:33 PM org.openqa.selenium.devtools.CdpVersionFinder findNearestMatch\n    WARNING: Unable to find an exact match for CDP version 98, so returning the closest version found: 97\n    Feb 15, 2022 12:53:33 PM org.openqa.selenium.devtools.CdpVersionFinder findNearestMatch\n    INFO: Found CDP implementation for version 98 of 97\n</code></pre>\n<p>I'm using Maven. My pom.xml file looks like this</p>\n<pre><code> &lt;dependency&gt;\n    &lt;groupId&gt;com.google.guava&lt;/groupId&gt;\n    &lt;artifactId&gt;guava&lt;/artifactId&gt;\n    &lt;version&gt;31.0.1-jre&lt;/version&gt;\n&lt;/dependency&gt;\n    &lt;!-- https://mvnrepository.com/artifact/commons-io/commons-io --&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;commons-io&lt;/groupId&gt;\n    &lt;artifactId&gt;commons-io&lt;/artifactId&gt;\n    &lt;version&gt;2.7&lt;/version&gt;\n&lt;/dependency&gt;\n    &lt;dependency&gt;\n    &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\n    &lt;artifactId&gt;selenium-java&lt;/artifactId&gt;\n    &lt;version&gt;4.1.2&lt;/version&gt;\n&lt;/dependency&gt;   \n&lt;dependency&gt;\n  &lt;groupId&gt;io.github.bonigarcia&lt;/groupId&gt;\n  &lt;artifactId&gt;webdrivermanager&lt;/artifactId&gt;\n  &lt;version&gt;3.6.2&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>When I run the java program the chrome browser will open and the page is loaded, but the screenshot of the page is not generating and couldn't be saved in the local machine. Could anyone please help me to resolve it?</p>\n"},{"tags":["java","spring","ms-word","apache-poi"],"answers":[{"tags":[],"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1650518562,"creation_date":1650471010,"answer_id":71942934,"question_id":71941703,"body_markdown":"Apache POI does not support tracking changes up to now.\r\n\r\nAs you see in your XML, your code places an empty `w:ins` element above the `w:r` element. But Microsoft Word wraps the `w:r` element with the `w:ins` element. The `w:r` element is a child element of the `w:ins` element.\r\n\r\nOne possibility to code that would be having a class `XWPFInsRun` which extends `XWPFRun` and a method to create such `XWPFInsRun` in a `XWPFParagraph`. Doing this one has all options of `XWPFRun` extended by the options of  `CTRunTrackChange` - author and date for example.\r\n\r\nComplete example:\r\n\r\n    import java.io.FileOutputStream;\r\n    \r\n    import org.apache.poi.xwpf.usermodel.*;\r\n    import org.openxmlformats.schemas.wordprocessingml.x2006.main.*;\r\n    \r\n    public class CreateWordInsRun {\r\n        \r\n     static XWPFInsRun createInsRun(XWPFParagraph paragraph, String author, java.util.Calendar date) {\r\n      CTRunTrackChange trackChange = paragraph.getCTP().addNewIns();\r\n      trackChange.setAuthor(author);\r\n      trackChange.setDate(date);\r\n      trackChange.addNewR();\r\n      return new XWPFInsRun(\r\n        trackChange,\r\n        trackChange.getRArray(0),\r\n        paragraph\r\n       );\r\n     }\r\n    \r\n     public static void main(String[] args) throws Exception {\r\n    \r\n      XWPFDocument doc = new XWPFDocument();\r\n    \r\n      XWPFParagraph paragraph = doc.createParagraph();\r\n      XWPFRun run = paragraph.createRun();\r\n      run.setText(&quot;Paragraph 1&quot;);\r\n    \r\n      paragraph = doc.createParagraph();\r\n      XWPFInsRun insRun = createInsRun(paragraph, &quot;Kane&quot;, new java.util.GregorianCalendar());\r\n      insRun.setText(&quot;Paragraph 2 inserted by Kane&quot;);\r\n      System.out.println(insRun.getAuthor());\r\n      System.out.println(insRun.getDate());\r\n      \r\n      paragraph = doc.createParagraph();\r\n      run = paragraph.createRun();\r\n      run.setText(&quot;Paragraph 3&quot;);\r\n        \r\n      FileOutputStream out = new FileOutputStream(&quot;./WordDocument.docx&quot;);\r\n      doc.write(out);\r\n      out.close();\r\n      doc.close();    \r\n     }\r\n     \r\n     static class XWPFInsRun extends XWPFRun {\r\n      private CTRunTrackChange trackChange;\r\n      public XWPFInsRun(CTRunTrackChange trackChange, CTR run, IRunBody p) {\r\n       super(run, p);\r\n       this.trackChange = trackChange;\r\n      }\r\n      public String getAuthor() {\r\n       return this.trackChange.getAuthor();   \r\n      }\r\n      public void setAuthor(String author) {\r\n       this.trackChange.setAuthor(author);   \r\n      }\r\n      public java.util.Calendar getDate() {\r\n       return this.trackChange.getDate();   \r\n      }\r\n      public void setDate(java.util.Calendar date) {\r\n       this.trackChange.setDate(date);   \r\n      }\r\n      //... further methods\r\n     }\r\n    }","title":"Apache poi: insert text in a paragraph and view track changes in a word document","body":"<p>Apache POI does not support tracking changes up to now.</p>\n<p>As you see in your XML, your code places an empty <code>w:ins</code> element above the <code>w:r</code> element. But Microsoft Word wraps the <code>w:r</code> element with the <code>w:ins</code> element. The <code>w:r</code> element is a child element of the <code>w:ins</code> element.</p>\n<p>One possibility to code that would be having a class <code>XWPFInsRun</code> which extends <code>XWPFRun</code> and a method to create such <code>XWPFInsRun</code> in a <code>XWPFParagraph</code>. Doing this one has all options of <code>XWPFRun</code> extended by the options of  <code>CTRunTrackChange</code> - author and date for example.</p>\n<p>Complete example:</p>\n<pre><code>import java.io.FileOutputStream;\n\nimport org.apache.poi.xwpf.usermodel.*;\nimport org.openxmlformats.schemas.wordprocessingml.x2006.main.*;\n\npublic class CreateWordInsRun {\n    \n static XWPFInsRun createInsRun(XWPFParagraph paragraph, String author, java.util.Calendar date) {\n  CTRunTrackChange trackChange = paragraph.getCTP().addNewIns();\n  trackChange.setAuthor(author);\n  trackChange.setDate(date);\n  trackChange.addNewR();\n  return new XWPFInsRun(\n    trackChange,\n    trackChange.getRArray(0),\n    paragraph\n   );\n }\n\n public static void main(String[] args) throws Exception {\n\n  XWPFDocument doc = new XWPFDocument();\n\n  XWPFParagraph paragraph = doc.createParagraph();\n  XWPFRun run = paragraph.createRun();\n  run.setText(&quot;Paragraph 1&quot;);\n\n  paragraph = doc.createParagraph();\n  XWPFInsRun insRun = createInsRun(paragraph, &quot;Kane&quot;, new java.util.GregorianCalendar());\n  insRun.setText(&quot;Paragraph 2 inserted by Kane&quot;);\n  System.out.println(insRun.getAuthor());\n  System.out.println(insRun.getDate());\n  \n  paragraph = doc.createParagraph();\n  run = paragraph.createRun();\n  run.setText(&quot;Paragraph 3&quot;);\n    \n  FileOutputStream out = new FileOutputStream(&quot;./WordDocument.docx&quot;);\n  doc.write(out);\n  out.close();\n  doc.close();    \n }\n \n static class XWPFInsRun extends XWPFRun {\n  private CTRunTrackChange trackChange;\n  public XWPFInsRun(CTRunTrackChange trackChange, CTR run, IRunBody p) {\n   super(run, p);\n   this.trackChange = trackChange;\n  }\n  public String getAuthor() {\n   return this.trackChange.getAuthor();   \n  }\n  public void setAuthor(String author) {\n   this.trackChange.setAuthor(author);   \n  }\n  public java.util.Calendar getDate() {\n   return this.trackChange.getDate();   \n  }\n  public void setDate(java.util.Calendar date) {\n   this.trackChange.setDate(date);   \n  }\n  //... further methods\n }\n}\n</code></pre>\n"}],"owner":{"account_id":19272771,"reputation":9,"user_id":14086391,"display_name":"Kane"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":896,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71942934,"answer_count":1,"score":0,"last_activity_date":1658392396,"creation_date":1650465940,"question_id":71941703,"body_markdown":"I&#180;m using Apache poi library with java 11. I&#180;m trying to see the track changes after adding a new text into a paragraph in a word document:\r\n\r\n     private void setSectionRun(XWPFParagraph paragraph){\r\n        // insert xml node\r\n        paragraph.getCTP().addNewIns().setAuthor(&quot;Kane&quot;);\r\n\r\n        XWPFRun newRun = paragraph.createRun();\r\n        newRun.setText(&quot;. Hello world&quot;);\r\n        paragraph.addRun(newRun);\r\n    }\r\n\r\n\r\nAnd I get the following output in document.xml. In this case the track changes is not working:\r\n\r\n    &lt;w:ins w:author=&quot;Kane&quot;/&gt;\r\n\t&lt;w:r&gt;\r\n\t\t&lt;w:t&gt;. Hello world&lt;/w:t&gt;\r\n\t&lt;/w:r&gt;\r\n\r\nIn any case, if I manually edit the document I can see the track changes and accept or reject the insertion with the following result:\r\n\r\n    &lt;w:ins w:id=&quot;0&quot; w:author=&quot;Kane&quot; w:date=&quot;2022-04-20T15:33:00Z&quot;&gt;\r\n\t\t&lt;w:r w:rsidR=&quot;00B00A22&quot;&gt;\r\n\t\t\t&lt;w:t&gt;. Hello world&lt;/w:t&gt;\r\n\t\t&lt;/w:r&gt;\r\n\t&lt;/w:ins&gt;\r\n\r\nThe problem is that I can&#39;t activate the track changes when I insert a new text in a paragraph with Apache poi. \r\n\r\nOn the other hand, with `newRun.getCTR().getRPr().addNewRPrChange().setAuthor(&quot;Kane&quot;)`\r\nthe format changes of a `XWPFRun`are detected and I can see the change control correctly, but not the new text insertions at the paragraph level.\r\n\r\nIs there a way to enable the track change on new text inserts?\r\n\r\nThanks in advance.\r\n\r\n\r\n\r\n","title":"Apache poi: insert text in a paragraph and view track changes in a word document","body":"<p>I´m using Apache poi library with java 11. I´m trying to see the track changes after adding a new text into a paragraph in a word document:</p>\n<pre><code> private void setSectionRun(XWPFParagraph paragraph){\n    // insert xml node\n    paragraph.getCTP().addNewIns().setAuthor(&quot;Kane&quot;);\n\n    XWPFRun newRun = paragraph.createRun();\n    newRun.setText(&quot;. Hello world&quot;);\n    paragraph.addRun(newRun);\n}\n</code></pre>\n<p>And I get the following output in document.xml. In this case the track changes is not working:</p>\n<pre><code>&lt;w:ins w:author=&quot;Kane&quot;/&gt;\n&lt;w:r&gt;\n    &lt;w:t&gt;. Hello world&lt;/w:t&gt;\n&lt;/w:r&gt;\n</code></pre>\n<p>In any case, if I manually edit the document I can see the track changes and accept or reject the insertion with the following result:</p>\n<pre><code>&lt;w:ins w:id=&quot;0&quot; w:author=&quot;Kane&quot; w:date=&quot;2022-04-20T15:33:00Z&quot;&gt;\n    &lt;w:r w:rsidR=&quot;00B00A22&quot;&gt;\n        &lt;w:t&gt;. Hello world&lt;/w:t&gt;\n    &lt;/w:r&gt;\n&lt;/w:ins&gt;\n</code></pre>\n<p>The problem is that I can't activate the track changes when I insert a new text in a paragraph with Apache poi.</p>\n<p>On the other hand, with <code>newRun.getCTR().getRPr().addNewRPrChange().setAuthor(&quot;Kane&quot;)</code>\nthe format changes of a <code>XWPFRun</code>are detected and I can see the change control correctly, but not the new text insertions at the paragraph level.</p>\n<p>Is there a way to enable the track change on new text inserts?</p>\n<p>Thanks in advance.</p>\n"},{"tags":["java","spring","spring-boot"],"answers":[{"tags":[],"owner":{"account_id":18431035,"reputation":582,"user_id":13426164,"display_name":"Kris"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1658392312,"creation_date":1658392312,"answer_id":73063017,"question_id":73062036,"body_markdown":"you could do:\r\n\r\n        Yaml yaml = new Yaml();\r\n        InputStream inputStream = getResourceAsStream(&quot;application.yml&quot;);\r\n        Map&lt;String, Object&gt; properties = yaml.loadAs(inputStream, Map.class);\r\n\r\n        final ObjectMapper mapper = new ObjectMapper();\r\n        final Employee obj = mapper.convertValue(properties.get(&quot;employee&quot;), Employee.class);\r\n\r\nthis basically creates a map of all properties, gets just the employee props and builds the Employee instance from that.","title":"How to convert few yaml properties to class in spring boot","body":"<p>you could do:</p>\n<pre><code>    Yaml yaml = new Yaml();\n    InputStream inputStream = getResourceAsStream(&quot;application.yml&quot;);\n    Map&lt;String, Object&gt; properties = yaml.loadAs(inputStream, Map.class);\n\n    final ObjectMapper mapper = new ObjectMapper();\n    final Employee obj = mapper.convertValue(properties.get(&quot;employee&quot;), Employee.class);\n</code></pre>\n<p>this basically creates a map of all properties, gets just the employee props and builds the Employee instance from that.</p>\n"}],"owner":{"account_id":18241043,"reputation":259,"user_id":13278063,"display_name":"Susmitha"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":828,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73063017,"answer_count":1,"score":1,"last_activity_date":1658392312,"creation_date":1658387408,"question_id":73062036,"body_markdown":"I have following application-yml.\r\n\r\n```\r\nserver:\r\n  port: 9090\r\n\r\nspring:\r\n   application:\r\n      name: employee-management\r\n\r\nemployee:\r\n   details:\r\n     firstname: John\r\n     lastname: DK\r\n\r\n     firstname: Henry\r\n     lastname: K\r\n\r\n     firstname: Sofiya\r\n     lastname: H\r\n```\r\n\r\nAnd my Java class\r\n```\r\n@Builder\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\n@Configuration\r\n@ConfigurationProperties(prefix = &quot;employee&quot;)\r\npublic class Employee{\r\n  public List&lt;Name&gt; details;\r\n}\r\n```\r\n\r\nBut along with employee properties, it&#39;s also reading other spring properties. \r\n```\r\nYaml yaml = new Yaml();\r\n    InputStream inputStream = class.getClassLoader().getResourceAsStream(&quot;application.yml),\r\n    Employee obj = yaml.loadAs(inputStream, Employee.class);\r\n```\r\n\r\nI am getting this following error.\r\n\r\n```\r\nCannot create property=server for JavaBean=com.example.common.util.Employee@7d365620\r\n in &#39;reader&#39;, line 1, column 1:\r\n    server:\r\n    ^\r\nUnable to find property &#39;server&#39; on class: com.example.common.util.Employee\r\n in &#39;reader&#39;, line 2, column 3:\r\n      port: 9090\r\n```\r\nHow can I avoid other spring properties while reading the resource file?\r\nThanks in Advance!\r\n","title":"How to convert few yaml properties to class in spring boot","body":"<p>I have following application-yml.</p>\n<pre><code>server:\n  port: 9090\n\nspring:\n   application:\n      name: employee-management\n\nemployee:\n   details:\n     firstname: John\n     lastname: DK\n\n     firstname: Henry\n     lastname: K\n\n     firstname: Sofiya\n     lastname: H\n</code></pre>\n<p>And my Java class</p>\n<pre><code>@Builder\n@AllArgsConstructor\n@NoArgsConstructor\n@Configuration\n@ConfigurationProperties(prefix = &quot;employee&quot;)\npublic class Employee{\n  public List&lt;Name&gt; details;\n}\n</code></pre>\n<p>But along with employee properties, it's also reading other spring properties.</p>\n<pre><code>Yaml yaml = new Yaml();\n    InputStream inputStream = class.getClassLoader().getResourceAsStream(&quot;application.yml),\n    Employee obj = yaml.loadAs(inputStream, Employee.class);\n</code></pre>\n<p>I am getting this following error.</p>\n<pre><code>Cannot create property=server for JavaBean=com.example.common.util.Employee@7d365620\n in 'reader', line 1, column 1:\n    server:\n    ^\nUnable to find property 'server' on class: com.example.common.util.Employee\n in 'reader', line 2, column 3:\n      port: 9090\n</code></pre>\n<p>How can I avoid other spring properties while reading the resource file?\nThanks in Advance!</p>\n"},{"tags":["java","android","set","fragment"],"comments":[{"owner":{"account_id":1849514,"reputation":193868,"user_id":1676363,"accept_rate":100,"display_name":"ianhanniballake"},"score":0,"creation_date":1658204165,"post_id":73030907,"comment_id":128986942,"body_markdown":"Did you read the [guide to communicating between fragments](https://developer.android.com/guide/fragments/communicate)?","body":"Did you read the <a href=\"https://developer.android.com/guide/fragments/communicate\" rel=\"nofollow noreferrer\">guide to communicating between fragments</a>?"},{"owner":{"account_id":13113788,"reputation":10080,"user_id":9473786,"display_name":"Tyler V"},"score":0,"creation_date":1658205298,"post_id":73030907,"comment_id":128987135,"body_markdown":"Using LiveData on a shared activity level ViewModel is probably the best approach to handle this.","body":"Using LiveData on a shared activity level ViewModel is probably the best approach to handle this."}],"answers":[{"tags":[],"owner":{"account_id":1790714,"reputation":91128,"user_id":1631193,"accept_rate":71,"display_name":"Gabe Sechan"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1658204117,"creation_date":1658204117,"answer_id":73031046,"question_id":73030907,"body_markdown":"You don&#39;t, directly.  There&#39;s a couple of ways you can do this, but Fragment A and Fragment B shouldn&#39;t know about each other.  They&#39;re independent.  Instead, Fragment A should define an interface it calls when an event (such as changing the value of its textview) occurs.  This can be a callback function in an interface, a message bus, an Observable, a view model, or a variety of other mechanisms.  In Fragment B, you have an API that sets the value.  This can be a function call, passing in an observable you subscribe to which sets the value, passing in a message bus that will tell it when the value changes, using a ViewModel and subscribing to updates to that, etc.\r\n\r\nThen the Activity is in charge of wiring up the interface on A to effect the interface on B.  Which way you choose depends on what technologies the rest of your app uses.","title":"how to call a ui component of a fragment from another fragment Android","body":"<p>You don't, directly.  There's a couple of ways you can do this, but Fragment A and Fragment B shouldn't know about each other.  They're independent.  Instead, Fragment A should define an interface it calls when an event (such as changing the value of its textview) occurs.  This can be a callback function in an interface, a message bus, an Observable, a view model, or a variety of other mechanisms.  In Fragment B, you have an API that sets the value.  This can be a function call, passing in an observable you subscribe to which sets the value, passing in a message bus that will tell it when the value changes, using a ViewModel and subscribing to updates to that, etc.</p>\n<p>Then the Activity is in charge of wiring up the interface on A to effect the interface on B.  Which way you choose depends on what technologies the rest of your app uses.</p>\n"}],"owner":{"account_id":25288183,"reputation":37,"user_id":19114746,"display_name":"mauricio romero"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":103,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1658392237,"creation_date":1658202587,"question_id":73030907,"body_markdown":"how can I call a ui component defined in a fragment A from a fragment B. I have declared textview in fragment A and I want to set a calculated value in textview present in fragment B.I use java to develop the app. Greetings","title":"how to call a ui component of a fragment from another fragment Android","body":"<p>how can I call a ui component defined in a fragment A from a fragment B. I have declared textview in fragment A and I want to set a calculated value in textview present in fragment B.I use java to develop the app. Greetings</p>\n"},{"tags":["java","android","android-layout","textview"],"comments":[{"owner":{"account_id":321736,"reputation":34179,"user_id":640731,"accept_rate":85,"display_name":"Krishnabhadra"},"score":3,"creation_date":1364465833,"post_id":15679147,"comment_id":22258188,"body_markdown":"possible duplicate of http://stackoverflow.com/questions/12037377/how-to-get-number-of-lines-of-textview","body":"possible duplicate of <a href=\"http://stackoverflow.com/questions/12037377/how-to-get-number-of-lines-of-textview\" title=\"how to get number of lines of textview\">stackoverflow.com/questions/12037377/&hellip;</a>"},{"owner":{"account_id":1325917,"reputation":6746,"user_id":1270706,"accept_rate":83,"display_name":"Nandha"},"score":10,"creation_date":1364469153,"post_id":15679147,"comment_id":22260056,"body_markdown":"It is not a duplicate question. why u vote to close this question? it is good question and someone is answered my question and it is correct answer.","body":"It is not a duplicate question. why u vote to close this question? it is good question and someone is answered my question and it is correct answer."},{"owner":{"account_id":256607,"reputation":496,"user_id":537454,"accept_rate":100,"display_name":"moscro"},"score":2,"creation_date":1372453473,"post_id":15679147,"comment_id":25217622,"body_markdown":"Confirmed not a duplicate.  I&#39;ve used this in my own solution because of a need to calculate the number of lines without using a preloaded view (because the preloaded view was shortened by the &quot;SetMaxLines&quot; method of the TextView).  The duplicate thread provided doesn&#39;t cover this possibility.  Upvoting both solution and question because they were extremely useful.","body":"Confirmed not a duplicate.  I&#39;ve used this in my own solution because of a need to calculate the number of lines without using a preloaded view (because the preloaded view was shortened by the &quot;SetMaxLines&quot; method of the TextView).  The duplicate thread provided doesn&#39;t cover this possibility.  Upvoting both solution and question because they were extremely useful."},{"owner":{"account_id":4021281,"reputation":438,"user_id":3311526,"display_name":"Sanders"},"score":0,"creation_date":1395685984,"post_id":15679147,"comment_id":34441075,"body_markdown":"Reworded into a real question. I have a better answer to this question so I would appreciate it being reopened.","body":"Reworded into a real question. I have a better answer to this question so I would appreciate it being reopened."},{"owner":{"account_id":3482475,"reputation":27230,"user_id":2914140,"accept_rate":69,"display_name":"CoolMind"},"score":0,"creation_date":1604934559,"post_id":15679147,"comment_id":114491438,"body_markdown":"@Sanders, it was reopened, but they forgot to notify you. :)","body":"@Sanders, it was reopened, but they forgot to notify you. :)"}],"answers":[{"tags":[],"owner":{"account_id":1116028,"reputation":11319,"user_id":1107317,"accept_rate":100,"display_name":"Triode"},"down_vote_count":2,"up_vote_count":31,"is_accepted":true,"score":29,"last_activity_date":1606901900,"creation_date":1364465866,"answer_id":15679207,"question_id":15679147,"body_markdown":"    final Rect bounds = new Rect();\r\n    final Paint paint = new Paint();\r\n    paint.setTextSize(currentTextSize);\r\n    paint.getTextBounds(testString, 0, testString.length(), bounds);\r\n\r\nNow divide the width of text with the width of your TextView to get the total number of lines. \r\n\r\n    final int numLines = (int) Math.ceil((float) bounds.width() / currentSize);\r\n\r\n**currentSize** : Expected size of the view in which the text will be rendered. The size should not go beyond the screen width. ","title":"How to get line count of textview before rendering?","body":"<pre><code>final Rect bounds = new Rect();\nfinal Paint paint = new Paint();\npaint.setTextSize(currentTextSize);\npaint.getTextBounds(testString, 0, testString.length(), bounds);\n</code></pre>\n<p>Now divide the width of text with the width of your TextView to get the total number of lines.</p>\n<pre><code>final int numLines = (int) Math.ceil((float) bounds.width() / currentSize);\n</code></pre>\n<p><strong>currentSize</strong> : Expected size of the view in which the text will be rendered. The size should not go beyond the screen width.</p>\n"},{"tags":[],"owner":{"account_id":153802,"reputation":8952,"user_id":369317,"accept_rate":73,"display_name":"Denys Kniazhev-Support Ukraine"},"down_vote_count":0,"up_vote_count":33,"is_accepted":false,"score":33,"last_activity_date":1523174752,"creation_date":1423997020,"answer_id":28525249,"question_id":15679147,"body_markdown":"The accepted answer doesn&#39;t work when a whole word is placed on the next line in order to avoid breaking the word: \r\n\r\n    |hello   |\r\n    |world!  |\r\n\r\nThe only way to be 100% sure about the number of lines is to use the same text flow engine that TextView uses. Since TextView doesn&#39;t share its re-flow logic here&#39;s a custom string processor which splits text into multiple lines each of which fits the given width. It also does its best to not break the words unless the whole word does not fit:\r\n\r\n    public List&lt;String&gt; splitWordsIntoStringsThatFit(String source, float maxWidthPx, Paint paint) {\r\n        ArrayList&lt;String&gt; result = new ArrayList&lt;&gt;();\r\n\r\n        ArrayList&lt;String&gt; currentLine = new ArrayList&lt;&gt;();\r\n\r\n        String[] sources = source.split(&quot;\\\\s&quot;);\r\n        for(String chunk : sources) {\r\n            if(paint.measureText(chunk) &lt; maxWidthPx) {\r\n                processFitChunk(maxWidthPx, paint, result, currentLine, chunk);\r\n            } else {\r\n                //the chunk is too big, split it.\r\n                List&lt;String&gt; splitChunk = splitIntoStringsThatFit(chunk, maxWidthPx, paint);\r\n                for(String chunkChunk : splitChunk) {\r\n                    processFitChunk(maxWidthPx, paint, result, currentLine, chunkChunk);\r\n                }\r\n            }\r\n        }\r\n\r\n        if(! currentLine.isEmpty()) {\r\n            result.add(TextUtils.join(&quot; &quot;, currentLine));\r\n        }\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * Splits a string to multiple strings each of which does not exceed the width\r\n     * of maxWidthPx.\r\n     */\r\n    private List&lt;String&gt; splitIntoStringsThatFit(String source, float maxWidthPx, Paint paint) {\r\n        if(TextUtils.isEmpty(source) || paint.measureText(source) &lt;= maxWidthPx) {\r\n            return Arrays.asList(source);\r\n        }\r\n\r\n        ArrayList&lt;String&gt; result = new ArrayList&lt;&gt;();\r\n        int start = 0;\r\n        for(int i = 1; i &lt;= source.length(); i++) {\r\n            String substr = source.substring(start, i);\r\n            if(paint.measureText(substr) &gt;= maxWidthPx) {\r\n                //this one doesn&#39;t fit, take the previous one which fits\r\n                String fits = source.substring(start, i - 1);\r\n                result.add(fits);\r\n                start = i - 1;\r\n            }\r\n            if (i == source.length()) {\r\n                String fits = source.substring(start, i);\r\n                result.add(fits);\r\n            }\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * Processes the chunk which does not exceed maxWidth.\r\n     */\r\n    private void processFitChunk(float maxWidth, Paint paint, ArrayList&lt;String&gt; result, ArrayList&lt;String&gt; currentLine, String chunk) {\r\n        currentLine.add(chunk);\r\n        String currentLineStr = TextUtils.join(&quot; &quot;, currentLine);\r\n        if (paint.measureText(currentLineStr) &gt;= maxWidth) {\r\n            //remove chunk\r\n            currentLine.remove(currentLine.size() - 1);\r\n            result.add(TextUtils.join(&quot; &quot;, currentLine));\r\n            currentLine.clear();\r\n            //ok because chunk fits\r\n            currentLine.add(chunk);\r\n        }\r\n    }\r\n\r\nHere&#39;s a part of a unit test:\r\n\r\n        String text = &quot;Hello this is a very long and meanless chunk: abcdefghijkonetuhosnahrc.pgraoneuhnotehurc.pgansohtunsaohtu. Hope you like it!&quot;;\r\n        Paint paint = new Paint();\r\n        paint.setTextSize(30);\r\n        paint.setTypeface(Typeface.DEFAULT_BOLD);\r\n\r\n        List&lt;String&gt; strings = splitWordsIntoStringsThatFit(text, 50, paint);\r\n        assertEquals(3, strings.size());\r\n        assertEquals(&quot;Hello this is a very long and meanless chunk:&quot;, strings.get(0));\r\n        assertEquals(&quot;abcdefghijkonetuhosnahrc.pgraoneuhnotehurc.pganso&quot;, strings.get(1));\r\n        assertEquals(&quot;htunsaohtu. Hope you like it!&quot;, strings.get(2));\r\n\r\nNow one can be 100% sure about the line count in TextView without a need to render it:\r\n\r\n    TextView textView = ...         //text view must be of fixed width\r\n\r\n    Paint paint = new Paint();\r\n    paint.setTextSize(yourTextViewTextSizePx);\r\n    paint.setTypeface(yourTextViewTypeface);\r\n\r\n    float textViewWidthPx = ...;\r\n\r\n    List&lt;String&gt; strings = splitWordsIntoStringsThatFit(yourText, textViewWidthPx, paint);\r\n    textView.setText(TextUtils.join(&quot;\\n&quot;, strings);\r\n\r\n    int lineCount = strings.size();        //will be the same as textView.getLineCount()","title":"How to get line count of textview before rendering?","body":"<p>The accepted answer doesn't work when a whole word is placed on the next line in order to avoid breaking the word: </p>\n\n<pre><code>|hello   |\n|world!  |\n</code></pre>\n\n<p>The only way to be 100% sure about the number of lines is to use the same text flow engine that TextView uses. Since TextView doesn't share its re-flow logic here's a custom string processor which splits text into multiple lines each of which fits the given width. It also does its best to not break the words unless the whole word does not fit:</p>\n\n<pre><code>public List&lt;String&gt; splitWordsIntoStringsThatFit(String source, float maxWidthPx, Paint paint) {\n    ArrayList&lt;String&gt; result = new ArrayList&lt;&gt;();\n\n    ArrayList&lt;String&gt; currentLine = new ArrayList&lt;&gt;();\n\n    String[] sources = source.split(\"\\\\s\");\n    for(String chunk : sources) {\n        if(paint.measureText(chunk) &lt; maxWidthPx) {\n            processFitChunk(maxWidthPx, paint, result, currentLine, chunk);\n        } else {\n            //the chunk is too big, split it.\n            List&lt;String&gt; splitChunk = splitIntoStringsThatFit(chunk, maxWidthPx, paint);\n            for(String chunkChunk : splitChunk) {\n                processFitChunk(maxWidthPx, paint, result, currentLine, chunkChunk);\n            }\n        }\n    }\n\n    if(! currentLine.isEmpty()) {\n        result.add(TextUtils.join(\" \", currentLine));\n    }\n    return result;\n}\n\n/**\n * Splits a string to multiple strings each of which does not exceed the width\n * of maxWidthPx.\n */\nprivate List&lt;String&gt; splitIntoStringsThatFit(String source, float maxWidthPx, Paint paint) {\n    if(TextUtils.isEmpty(source) || paint.measureText(source) &lt;= maxWidthPx) {\n        return Arrays.asList(source);\n    }\n\n    ArrayList&lt;String&gt; result = new ArrayList&lt;&gt;();\n    int start = 0;\n    for(int i = 1; i &lt;= source.length(); i++) {\n        String substr = source.substring(start, i);\n        if(paint.measureText(substr) &gt;= maxWidthPx) {\n            //this one doesn't fit, take the previous one which fits\n            String fits = source.substring(start, i - 1);\n            result.add(fits);\n            start = i - 1;\n        }\n        if (i == source.length()) {\n            String fits = source.substring(start, i);\n            result.add(fits);\n        }\n    }\n\n    return result;\n}\n\n/**\n * Processes the chunk which does not exceed maxWidth.\n */\nprivate void processFitChunk(float maxWidth, Paint paint, ArrayList&lt;String&gt; result, ArrayList&lt;String&gt; currentLine, String chunk) {\n    currentLine.add(chunk);\n    String currentLineStr = TextUtils.join(\" \", currentLine);\n    if (paint.measureText(currentLineStr) &gt;= maxWidth) {\n        //remove chunk\n        currentLine.remove(currentLine.size() - 1);\n        result.add(TextUtils.join(\" \", currentLine));\n        currentLine.clear();\n        //ok because chunk fits\n        currentLine.add(chunk);\n    }\n}\n</code></pre>\n\n<p>Here's a part of a unit test:</p>\n\n<pre><code>    String text = \"Hello this is a very long and meanless chunk: abcdefghijkonetuhosnahrc.pgraoneuhnotehurc.pgansohtunsaohtu. Hope you like it!\";\n    Paint paint = new Paint();\n    paint.setTextSize(30);\n    paint.setTypeface(Typeface.DEFAULT_BOLD);\n\n    List&lt;String&gt; strings = splitWordsIntoStringsThatFit(text, 50, paint);\n    assertEquals(3, strings.size());\n    assertEquals(\"Hello this is a very long and meanless chunk:\", strings.get(0));\n    assertEquals(\"abcdefghijkonetuhosnahrc.pgraoneuhnotehurc.pganso\", strings.get(1));\n    assertEquals(\"htunsaohtu. Hope you like it!\", strings.get(2));\n</code></pre>\n\n<p>Now one can be 100% sure about the line count in TextView without a need to render it:</p>\n\n<pre><code>TextView textView = ...         //text view must be of fixed width\n\nPaint paint = new Paint();\npaint.setTextSize(yourTextViewTextSizePx);\npaint.setTypeface(yourTextViewTypeface);\n\nfloat textViewWidthPx = ...;\n\nList&lt;String&gt; strings = splitWordsIntoStringsThatFit(yourText, textViewWidthPx, paint);\ntextView.setText(TextUtils.join(\"\\n\", strings);\n\nint lineCount = strings.size();        //will be the same as textView.getLineCount()\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2994330,"reputation":1144,"user_id":2541156,"display_name":"Anh Duy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1522655436,"creation_date":1522655436,"answer_id":49607374,"question_id":15679147,"body_markdown":"Reference: https://stackoverflow.com/questions/19908003/getting-height-of-text-view-before-rendering-to-layout/49607117#49607117\r\n\r\nGet line of TextView before rendering.\r\n\r\nThis is my code base the link above. It&#39;s working for me.\r\n\r\n    private int widthMeasureSpec;\r\n    private int heightMeasureSpec;\r\n    private int heightOfEachLine;\r\n    private int paddingFirstLine;\r\n    private void calculateHeightOfEachLine() {\r\n        WindowManager wm = (WindowManager) context.getSystemService(Context.WINDOW_SERVICE);\r\n        Display display = wm.getDefaultDisplay();\r\n        Point size = new Point();\r\n        display.getSize(size);\r\n        int deviceWidth = size.x;\r\n        widthMeasureSpec = View.MeasureSpec.makeMeasureSpec(deviceWidth, View.MeasureSpec.AT_MOST);\r\n        heightMeasureSpec = View.MeasureSpec.makeMeasureSpec(0, View.MeasureSpec.UNSPECIFIED);\r\n        //1 line = 76; 2 lines = 76 + 66; 3 lines = 76 + 66 + 66\r\n        //=&gt; height of first line = 76 pixel; height of second line = third line =... n line = 66 pixel\r\n        int heightOfFirstLine = getHeightOfTextView(&quot;A&quot;);\r\n        int heightOfSecondLine = getHeightOfTextView(&quot;A\\nA&quot;) - heightOfFirstLine;\r\n        paddingFirstLine = heightOfFirstLine - heightOfSecondLine;\r\n        heightOfEachLine = heightOfSecondLine;\r\n    }\r\n    \r\n    private int getHeightOfTextView(String text) {\r\n        // Getting height of text view before rendering to layout\r\n        TextView textView = new TextView(context);\r\n        textView.setPadding(10, 0, 10, 0);\r\n        //textView.setTypeface(typeface);\r\n        textView.setTextSize(TypedValue.COMPLEX_UNIT_PX, context.getResources().getDimension(R.dimen.tv_size_14sp));\r\n        textView.setText(text, TextView.BufferType.SPANNABLE);\r\n        textView.measure(widthMeasureSpec, heightMeasureSpec);\r\n        return textView.getMeasuredHeight();\r\n    }\r\n    \r\n    private int getLineCountOfTextViewBeforeRendering(String text) {\r\n        return (getHeightOfTextView(text) - paddingFirstLine) / heightOfEachLine;\r\n    }\r\nNote: This code also must be set for real textview on screen\r\n\r\n    textView.setTextSize(TypedValue.COMPLEX_UNIT_PX, context.getResources().getDimension(R.dimen.tv_size_14sp));","title":"How to get line count of textview before rendering?","body":"<p>Reference: <a href=\"https://stackoverflow.com/questions/19908003/getting-height-of-text-view-before-rendering-to-layout/49607117#49607117\">Getting height of text view before rendering to layout</a></p>\n\n<p>Get line of TextView before rendering.</p>\n\n<p>This is my code base the link above. It's working for me.</p>\n\n<pre><code>private int widthMeasureSpec;\nprivate int heightMeasureSpec;\nprivate int heightOfEachLine;\nprivate int paddingFirstLine;\nprivate void calculateHeightOfEachLine() {\n    WindowManager wm = (WindowManager) context.getSystemService(Context.WINDOW_SERVICE);\n    Display display = wm.getDefaultDisplay();\n    Point size = new Point();\n    display.getSize(size);\n    int deviceWidth = size.x;\n    widthMeasureSpec = View.MeasureSpec.makeMeasureSpec(deviceWidth, View.MeasureSpec.AT_MOST);\n    heightMeasureSpec = View.MeasureSpec.makeMeasureSpec(0, View.MeasureSpec.UNSPECIFIED);\n    //1 line = 76; 2 lines = 76 + 66; 3 lines = 76 + 66 + 66\n    //=&gt; height of first line = 76 pixel; height of second line = third line =... n line = 66 pixel\n    int heightOfFirstLine = getHeightOfTextView(\"A\");\n    int heightOfSecondLine = getHeightOfTextView(\"A\\nA\") - heightOfFirstLine;\n    paddingFirstLine = heightOfFirstLine - heightOfSecondLine;\n    heightOfEachLine = heightOfSecondLine;\n}\n\nprivate int getHeightOfTextView(String text) {\n    // Getting height of text view before rendering to layout\n    TextView textView = new TextView(context);\n    textView.setPadding(10, 0, 10, 0);\n    //textView.setTypeface(typeface);\n    textView.setTextSize(TypedValue.COMPLEX_UNIT_PX, context.getResources().getDimension(R.dimen.tv_size_14sp));\n    textView.setText(text, TextView.BufferType.SPANNABLE);\n    textView.measure(widthMeasureSpec, heightMeasureSpec);\n    return textView.getMeasuredHeight();\n}\n\nprivate int getLineCountOfTextViewBeforeRendering(String text) {\n    return (getHeightOfTextView(text) - paddingFirstLine) / heightOfEachLine;\n}\n</code></pre>\n\n<p>Note: This code also must be set for real textview on screen</p>\n\n<pre><code>textView.setTextSize(TypedValue.COMPLEX_UNIT_PX, context.getResources().getDimension(R.dimen.tv_size_14sp));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8805789,"reputation":1758,"user_id":6580534,"display_name":"M. Palsich"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1522853939,"creation_date":1522853939,"answer_id":49654308,"question_id":15679147,"body_markdown":"If you know or can determine the width of the TextView&#39;s parent, you are able to invoke a view measurement which results in line count being calculated.\r\n\r\n    val parentWidth = PARENT_WIDTH // assumes this is known/can be found\r\n    myTextView.measure(\r\n        MeasureSpec.makeMeasureSpec(parentWidth, MeasureSpec.EXACTLY),\r\n        MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED))\r\n\r\nThe TextView&#39;s `layout` is no longer null and you can check the calculated line count with `myTextView.lineCount`.","title":"How to get line count of textview before rendering?","body":"<p>If you know or can determine the width of the TextView's parent, you are able to invoke a view measurement which results in line count being calculated.</p>\n\n<pre><code>val parentWidth = PARENT_WIDTH // assumes this is known/can be found\nmyTextView.measure(\n    MeasureSpec.makeMeasureSpec(parentWidth, MeasureSpec.EXACTLY),\n    MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED))\n</code></pre>\n\n<p>The TextView's <code>layout</code> is no longer null and you can check the calculated line count with <code>myTextView.lineCount</code>.</p>\n"},{"tags":[],"owner":{"account_id":250818,"reputation":3403,"user_id":527759,"accept_rate":0,"display_name":"Eugene Popovich"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1574341256,"creation_date":1574341256,"answer_id":58975681,"question_id":15679147,"body_markdown":"The [@denis-kniazhev][1] answer is very good. However it uses custom logic to break text into lines. It is possible to use standard `TextView` layout components to measure text.\r\n\r\nThat is how it may look like:\r\n\r\n    TextView myTextView = findViewById(R.id.text);\r\n    TextMeasurementUtils.TextMeasurementParams params = TextMeasurementUtils.TextMeasurementParams.Builder\r\n    .from(myTextView).build();\r\n    List&lt;CharSequence&gt; lines = TextMeasurementUtils.getTextLines(text, params);\r\n\r\nTextMeasurementUtils.java\r\n\r\n    import android.os.Build;\r\n    import android.text.Layout;\r\n    import android.text.StaticLayout;\r\n    import android.text.TextDirectionHeuristic;\r\n    import android.text.TextPaint;\r\n    import android.widget.TextView;\r\n    \r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    \r\n    public class TextMeasurementUtils {\r\n        /**\r\n         * Split text into lines using specified parameters and the same algorithm\r\n         * as used by the {@link TextView} component\r\n         *\r\n         * @param text   the text to split\r\n         * @param params the measurement parameters\r\n         * @return\r\n         */\r\n        public static List&lt;CharSequence&gt; getTextLines(CharSequence text, TextMeasurementParams params) {\r\n            StaticLayout layout;\r\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M) {\r\n                StaticLayout.Builder builder = StaticLayout.Builder\r\n                        .obtain(text, 0, text.length(), params.textPaint, params.width)\r\n                        .setAlignment(params.alignment)\r\n                        .setLineSpacing(params.lineSpacingExtra, params.lineSpacingMultiplier)\r\n                        .setIncludePad(params.includeFontPadding)\r\n                        .setBreakStrategy(params.breakStrategy)\r\n                        .setHyphenationFrequency(params.hyphenationFrequency);\r\n                if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\r\n                    builder.setJustificationMode(params.justificationMode);\r\n                }\r\n                if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.P) {\r\n                    builder.setUseLineSpacingFromFallbacks(params.useFallbackLineSpacing);\r\n                }\r\n                if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.Q) {\r\n                    builder.setTextDirection((TextDirectionHeuristic) params.textDirectionHeuristic);\r\n                }\r\n                layout = builder.build();\r\n            } else {\r\n                layout = new StaticLayout(\r\n                        text,\r\n                        params.textPaint,\r\n                        params.width,\r\n                        params.alignment,\r\n                        params.lineSpacingMultiplier,\r\n                        params.lineSpacingExtra,\r\n                        params.includeFontPadding);\r\n            }\r\n            List&lt;CharSequence&gt; result = new ArrayList&lt;&gt;();\r\n            for (int i = 0; i &lt; layout.getLineCount(); i++) {\r\n                result.add(layout.getText().subSequence(layout.getLineStart(i), layout.getLineEnd(i)));\r\n            }\r\n            return result;\r\n        }\r\n    \r\n        /**\r\n         * The text measurement parameters\r\n         */\r\n        public static class TextMeasurementParams {\r\n            public final TextPaint textPaint;\r\n            public final Layout.Alignment alignment;\r\n            public final float lineSpacingExtra;\r\n            public final float lineSpacingMultiplier;\r\n            public final boolean includeFontPadding;\r\n            public final int breakStrategy;\r\n            public final int hyphenationFrequency;\r\n            public final int justificationMode;\r\n            public final boolean useFallbackLineSpacing;\r\n            public final Object textDirectionHeuristic;\r\n            public final int width;\r\n    \r\n            private TextMeasurementParams(Builder builder) {\r\n                textPaint = requireNonNull(builder.textPaint);\r\n                alignment = requireNonNull(builder.alignment);\r\n                lineSpacingExtra = builder.lineSpacingExtra;\r\n                lineSpacingMultiplier = builder.lineSpacingMultiplier;\r\n                includeFontPadding = builder.includeFontPadding;\r\n                breakStrategy = builder.breakStrategy;\r\n                hyphenationFrequency = builder.hyphenationFrequency;\r\n                justificationMode = builder.justificationMode;\r\n                useFallbackLineSpacing = builder.useFallbackLineSpacing;\r\n                textDirectionHeuristic = builder.textDirectionHeuristic;\r\n                width = builder.width;\r\n            }\r\n    \r\n    \r\n            public static final class Builder {\r\n                private TextPaint textPaint;\r\n                private Layout.Alignment alignment;\r\n                private float lineSpacingExtra;\r\n                private float lineSpacingMultiplier = 1.0f;\r\n                private boolean includeFontPadding = true;\r\n                private int breakStrategy;\r\n                private int hyphenationFrequency;\r\n                private int justificationMode;\r\n                private boolean useFallbackLineSpacing;\r\n                private Object textDirectionHeuristic;\r\n                private int width;\r\n    \r\n                public Builder() {\r\n                }\r\n    \r\n                public Builder(TextMeasurementParams copy) {\r\n                    this.textPaint = copy.textPaint;\r\n                    this.alignment = copy.alignment;\r\n                    this.lineSpacingExtra = copy.lineSpacingExtra;\r\n                    this.lineSpacingMultiplier = copy.lineSpacingMultiplier;\r\n                    this.includeFontPadding = copy.includeFontPadding;\r\n                    this.breakStrategy = copy.breakStrategy;\r\n                    this.hyphenationFrequency = copy.hyphenationFrequency;\r\n                    this.justificationMode = copy.justificationMode;\r\n                    this.useFallbackLineSpacing = copy.useFallbackLineSpacing;\r\n                    this.textDirectionHeuristic = copy.textDirectionHeuristic;\r\n                    this.width = copy.width;\r\n                }\r\n    \r\n                public static Builder from(TextView view) {\r\n                    Layout layout = view.getLayout();\r\n                    Builder result = new Builder()\r\n                            .textPaint(layout.getPaint())\r\n                            .alignment(layout.getAlignment())\r\n                            .width(view.getWidth() -\r\n                                    view.getCompoundPaddingLeft() - view.getCompoundPaddingRight());\r\n                    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.JELLY_BEAN) {\r\n                        result.lineSpacingExtra(view.getLineSpacingExtra())\r\n                                .lineSpacingMultiplier(view.getLineSpacingMultiplier())\r\n                                .includeFontPadding(view.getIncludeFontPadding());\r\n                        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M) {\r\n                            result.breakStrategy(view.getBreakStrategy())\r\n                                    .hyphenationFrequency(view.getHyphenationFrequency());\r\n                        }\r\n                        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\r\n                            result.justificationMode(view.getJustificationMode());\r\n                        }\r\n                        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.P) {\r\n                            result.useFallbackLineSpacing(view.isFallbackLineSpacing());\r\n                        }\r\n                        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.Q) {\r\n                            result.textDirectionHeuristic(view.getTextDirectionHeuristic());\r\n                        }\r\n                    }\r\n                    return result;\r\n                }\r\n    \r\n                public Builder textPaint(TextPaint val) {\r\n                    textPaint = val;\r\n                    return this;\r\n                }\r\n    \r\n                public Builder alignment(Layout.Alignment val) {\r\n                    alignment = val;\r\n                    return this;\r\n                }\r\n    \r\n                public Builder lineSpacingExtra(float val) {\r\n                    lineSpacingExtra = val;\r\n                    return this;\r\n                }\r\n    \r\n                public Builder lineSpacingMultiplier(float val) {\r\n                    lineSpacingMultiplier = val;\r\n                    return this;\r\n                }\r\n    \r\n                public Builder includeFontPadding(boolean val) {\r\n                    includeFontPadding = val;\r\n                    return this;\r\n                }\r\n    \r\n                public Builder breakStrategy(int val) {\r\n                    breakStrategy = val;\r\n                    return this;\r\n                }\r\n    \r\n                public Builder hyphenationFrequency(int val) {\r\n                    hyphenationFrequency = val;\r\n                    return this;\r\n                }\r\n    \r\n                public Builder justificationMode(int val) {\r\n                    justificationMode = val;\r\n                    return this;\r\n                }\r\n    \r\n                public Builder useFallbackLineSpacing(boolean val) {\r\n                    useFallbackLineSpacing = val;\r\n                    return this;\r\n                }\r\n    \r\n                public Builder textDirectionHeuristic(Object val) {\r\n                    textDirectionHeuristic = val;\r\n                    return this;\r\n                }\r\n    \r\n                public Builder width(int val) {\r\n                    width = val;\r\n                    return this;\r\n                }\r\n    \r\n                public TextMeasurementParams build() {\r\n                    return new TextMeasurementParams(this);\r\n                }\r\n            }\r\n        }\r\n\r\n        public static &lt;T&gt; T requireNonNull(T obj) {\r\n          if (obj == null)\r\n              throw new NullPointerException();\r\n          return obj;\r\n        }\r\n    }\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/28525249/527759","title":"How to get line count of textview before rendering?","body":"<p>The <a href=\"https://stackoverflow.com/a/28525249/527759\">@denis-kniazhev</a> answer is very good. However it uses custom logic to break text into lines. It is possible to use standard <code>TextView</code> layout components to measure text.</p>\n\n<p>That is how it may look like:</p>\n\n<pre><code>TextView myTextView = findViewById(R.id.text);\nTextMeasurementUtils.TextMeasurementParams params = TextMeasurementUtils.TextMeasurementParams.Builder\n.from(myTextView).build();\nList&lt;CharSequence&gt; lines = TextMeasurementUtils.getTextLines(text, params);\n</code></pre>\n\n<p>TextMeasurementUtils.java</p>\n\n<pre><code>import android.os.Build;\nimport android.text.Layout;\nimport android.text.StaticLayout;\nimport android.text.TextDirectionHeuristic;\nimport android.text.TextPaint;\nimport android.widget.TextView;\n\nimport java.util.ArrayList;\nimport java.util.List;\n\npublic class TextMeasurementUtils {\n    /**\n     * Split text into lines using specified parameters and the same algorithm\n     * as used by the {@link TextView} component\n     *\n     * @param text   the text to split\n     * @param params the measurement parameters\n     * @return\n     */\n    public static List&lt;CharSequence&gt; getTextLines(CharSequence text, TextMeasurementParams params) {\n        StaticLayout layout;\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M) {\n            StaticLayout.Builder builder = StaticLayout.Builder\n                    .obtain(text, 0, text.length(), params.textPaint, params.width)\n                    .setAlignment(params.alignment)\n                    .setLineSpacing(params.lineSpacingExtra, params.lineSpacingMultiplier)\n                    .setIncludePad(params.includeFontPadding)\n                    .setBreakStrategy(params.breakStrategy)\n                    .setHyphenationFrequency(params.hyphenationFrequency);\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\n                builder.setJustificationMode(params.justificationMode);\n            }\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.P) {\n                builder.setUseLineSpacingFromFallbacks(params.useFallbackLineSpacing);\n            }\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.Q) {\n                builder.setTextDirection((TextDirectionHeuristic) params.textDirectionHeuristic);\n            }\n            layout = builder.build();\n        } else {\n            layout = new StaticLayout(\n                    text,\n                    params.textPaint,\n                    params.width,\n                    params.alignment,\n                    params.lineSpacingMultiplier,\n                    params.lineSpacingExtra,\n                    params.includeFontPadding);\n        }\n        List&lt;CharSequence&gt; result = new ArrayList&lt;&gt;();\n        for (int i = 0; i &lt; layout.getLineCount(); i++) {\n            result.add(layout.getText().subSequence(layout.getLineStart(i), layout.getLineEnd(i)));\n        }\n        return result;\n    }\n\n    /**\n     * The text measurement parameters\n     */\n    public static class TextMeasurementParams {\n        public final TextPaint textPaint;\n        public final Layout.Alignment alignment;\n        public final float lineSpacingExtra;\n        public final float lineSpacingMultiplier;\n        public final boolean includeFontPadding;\n        public final int breakStrategy;\n        public final int hyphenationFrequency;\n        public final int justificationMode;\n        public final boolean useFallbackLineSpacing;\n        public final Object textDirectionHeuristic;\n        public final int width;\n\n        private TextMeasurementParams(Builder builder) {\n            textPaint = requireNonNull(builder.textPaint);\n            alignment = requireNonNull(builder.alignment);\n            lineSpacingExtra = builder.lineSpacingExtra;\n            lineSpacingMultiplier = builder.lineSpacingMultiplier;\n            includeFontPadding = builder.includeFontPadding;\n            breakStrategy = builder.breakStrategy;\n            hyphenationFrequency = builder.hyphenationFrequency;\n            justificationMode = builder.justificationMode;\n            useFallbackLineSpacing = builder.useFallbackLineSpacing;\n            textDirectionHeuristic = builder.textDirectionHeuristic;\n            width = builder.width;\n        }\n\n\n        public static final class Builder {\n            private TextPaint textPaint;\n            private Layout.Alignment alignment;\n            private float lineSpacingExtra;\n            private float lineSpacingMultiplier = 1.0f;\n            private boolean includeFontPadding = true;\n            private int breakStrategy;\n            private int hyphenationFrequency;\n            private int justificationMode;\n            private boolean useFallbackLineSpacing;\n            private Object textDirectionHeuristic;\n            private int width;\n\n            public Builder() {\n            }\n\n            public Builder(TextMeasurementParams copy) {\n                this.textPaint = copy.textPaint;\n                this.alignment = copy.alignment;\n                this.lineSpacingExtra = copy.lineSpacingExtra;\n                this.lineSpacingMultiplier = copy.lineSpacingMultiplier;\n                this.includeFontPadding = copy.includeFontPadding;\n                this.breakStrategy = copy.breakStrategy;\n                this.hyphenationFrequency = copy.hyphenationFrequency;\n                this.justificationMode = copy.justificationMode;\n                this.useFallbackLineSpacing = copy.useFallbackLineSpacing;\n                this.textDirectionHeuristic = copy.textDirectionHeuristic;\n                this.width = copy.width;\n            }\n\n            public static Builder from(TextView view) {\n                Layout layout = view.getLayout();\n                Builder result = new Builder()\n                        .textPaint(layout.getPaint())\n                        .alignment(layout.getAlignment())\n                        .width(view.getWidth() -\n                                view.getCompoundPaddingLeft() - view.getCompoundPaddingRight());\n                if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.JELLY_BEAN) {\n                    result.lineSpacingExtra(view.getLineSpacingExtra())\n                            .lineSpacingMultiplier(view.getLineSpacingMultiplier())\n                            .includeFontPadding(view.getIncludeFontPadding());\n                    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M) {\n                        result.breakStrategy(view.getBreakStrategy())\n                                .hyphenationFrequency(view.getHyphenationFrequency());\n                    }\n                    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\n                        result.justificationMode(view.getJustificationMode());\n                    }\n                    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.P) {\n                        result.useFallbackLineSpacing(view.isFallbackLineSpacing());\n                    }\n                    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.Q) {\n                        result.textDirectionHeuristic(view.getTextDirectionHeuristic());\n                    }\n                }\n                return result;\n            }\n\n            public Builder textPaint(TextPaint val) {\n                textPaint = val;\n                return this;\n            }\n\n            public Builder alignment(Layout.Alignment val) {\n                alignment = val;\n                return this;\n            }\n\n            public Builder lineSpacingExtra(float val) {\n                lineSpacingExtra = val;\n                return this;\n            }\n\n            public Builder lineSpacingMultiplier(float val) {\n                lineSpacingMultiplier = val;\n                return this;\n            }\n\n            public Builder includeFontPadding(boolean val) {\n                includeFontPadding = val;\n                return this;\n            }\n\n            public Builder breakStrategy(int val) {\n                breakStrategy = val;\n                return this;\n            }\n\n            public Builder hyphenationFrequency(int val) {\n                hyphenationFrequency = val;\n                return this;\n            }\n\n            public Builder justificationMode(int val) {\n                justificationMode = val;\n                return this;\n            }\n\n            public Builder useFallbackLineSpacing(boolean val) {\n                useFallbackLineSpacing = val;\n                return this;\n            }\n\n            public Builder textDirectionHeuristic(Object val) {\n                textDirectionHeuristic = val;\n                return this;\n            }\n\n            public Builder width(int val) {\n                width = val;\n                return this;\n            }\n\n            public TextMeasurementParams build() {\n                return new TextMeasurementParams(this);\n            }\n        }\n    }\n\n    public static &lt;T&gt; T requireNonNull(T obj) {\n      if (obj == null)\n          throw new NullPointerException();\n      return obj;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3482475,"reputation":27230,"user_id":2914140,"accept_rate":69,"display_name":"CoolMind"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1605179684,"creation_date":1604934079,"answer_id":64754080,"question_id":15679147,"body_markdown":"Thanks to [Eugene Popovich][1] I got:\r\n\r\n    import android.os.Build\r\n    import android.text.Layout\r\n    import android.text.StaticLayout\r\n    import android.text.TextDirectionHeuristic\r\n    import android.text.TextPaint\r\n    import android.widget.TextView\r\n    \r\n    \r\n    object TextMeasurementUtil {\r\n        /**\r\n         * Split text into lines using specified parameters and the same algorithm\r\n         * as used by the [TextView] component\r\n         *\r\n         * @param text   the text to split\r\n         * @param params the measurement parameters\r\n         * @return\r\n         */\r\n        fun getTextLines(text: CharSequence, params: TextViewParams): List&lt;CharSequence&gt; {\r\n            val layout = getStaticLayout(text, params)\r\n            return (0 until layout.lineCount).map {\r\n                layout.text.subSequence(layout.getLineStart(it), layout.getLineEnd(it))\r\n            }\r\n        }\r\n    \r\n        fun getTextLineCount(text: CharSequence, params: TextViewParams): Int {\r\n            val layout = getStaticLayout(text, params)\r\n            return layout.lineCount\r\n        }\r\n    \r\n        fun getTextLines(textView: TextView): List&lt;CharSequence&gt; {\r\n            val layout = getStaticLayout(textView)\r\n            return (0 until layout.lineCount).map {\r\n                layout.text.subSequence(layout.getLineStart(it), layout.getLineEnd(it))\r\n            }\r\n        }\r\n    \r\n        fun getTextLineCount(textView: TextView): Int {\r\n            val layout = getStaticLayout(textView)\r\n            return layout.lineCount\r\n        }\r\n    \r\n        /**\r\n         * The text measurement parameters\r\n         */\r\n        fun getTextViewParams(textView: TextView): TextViewParams {\r\n            val layout = textView.layout\r\n            val width = textView.width - textView.compoundPaddingLeft - textView.compoundPaddingRight\r\n            var lineSpacingExtra = 0f\r\n            var lineSpacingMultiplier = 1.0f\r\n            var includeFontPadding = true\r\n            var breakStrategy = 0\r\n            var hyphenationFrequency = 0\r\n            var justificationMode = 0\r\n            var useFallbackLineSpacing = false\r\n            var textDirectionHeuristic: TextDirectionHeuristic? = null\r\n    \r\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.JELLY_BEAN) {\r\n                lineSpacingExtra = textView.lineSpacingExtra\r\n                lineSpacingMultiplier = textView.lineSpacingMultiplier\r\n                includeFontPadding = textView.includeFontPadding\r\n                if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M) {\r\n                    breakStrategy = textView.breakStrategy\r\n                    hyphenationFrequency = textView.hyphenationFrequency\r\n                }\r\n                if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\r\n                    justificationMode = textView.justificationMode\r\n                }\r\n                if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.P) {\r\n                    useFallbackLineSpacing = textView.isFallbackLineSpacing\r\n                }\r\n                if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.Q) {\r\n                    textDirectionHeuristic = textView.textDirectionHeuristic\r\n                }\r\n            }\r\n    \r\n            return TextViewParams(\r\n                textPaint = layout.paint,\r\n                alignment = layout.alignment,\r\n                lineSpacingExtra = lineSpacingExtra,\r\n                lineSpacingMultiplier = lineSpacingMultiplier,\r\n                includeFontPadding = includeFontPadding,\r\n                breakStrategy = breakStrategy,\r\n                hyphenationFrequency = hyphenationFrequency,\r\n                justificationMode = justificationMode,\r\n                useFallbackLineSpacing = useFallbackLineSpacing,\r\n                textDirectionHeuristic = textDirectionHeuristic,\r\n                width = width\r\n            )\r\n        }\r\n    \r\n        private fun getStaticLayout(text: CharSequence,\r\n                                    params: TextViewParams): StaticLayout =\r\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M) {\r\n                val builder = StaticLayout.Builder\r\n                    .obtain(text, 0, text.length, params.textPaint, params.width)\r\n                    .setAlignment(params.alignment)\r\n                    .setLineSpacing(params.lineSpacingExtra, params.lineSpacingMultiplier)\r\n                    .setIncludePad(params.includeFontPadding)\r\n                    .setBreakStrategy(params.breakStrategy)\r\n                    .setHyphenationFrequency(params.hyphenationFrequency)\r\n                if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\r\n                    builder.setJustificationMode(params.justificationMode)\r\n                }\r\n                if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.P) {\r\n                    builder.setUseLineSpacingFromFallbacks(params.useFallbackLineSpacing)\r\n                }\r\n                if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.Q) {\r\n                    builder.setTextDirection(params.textDirectionHeuristic!!)\r\n                }\r\n                builder.build()\r\n            } else {\r\n                @Suppress(&quot;DEPRECATION&quot;)\r\n                StaticLayout(\r\n                    text,\r\n                    params.textPaint,\r\n                    params.width,\r\n                    params.alignment,\r\n                    params.lineSpacingMultiplier,\r\n                    params.lineSpacingExtra,\r\n                    params.includeFontPadding)\r\n            }\r\n    \r\n        private fun getStaticLayout(textView: TextView): StaticLayout =\r\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M) {\r\n                val builder = StaticLayout.Builder\r\n                    .obtain(textView.text, 0, textView.text.length, textView.layout.paint,\r\n                        textView.width)\r\n                    .setAlignment(textView.layout.alignment)\r\n                    .setLineSpacing(textView.lineSpacingExtra, textView.lineSpacingMultiplier)\r\n                    .setIncludePad(textView.includeFontPadding)\r\n                    .setBreakStrategy(textView.breakStrategy)\r\n                    .setHyphenationFrequency(textView.hyphenationFrequency)\r\n                if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\r\n                    builder.setJustificationMode(textView.justificationMode)\r\n                }\r\n                if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.P) {\r\n                    builder.setUseLineSpacingFromFallbacks(textView.isFallbackLineSpacing)\r\n                }\r\n                if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.Q) {\r\n                    builder.setTextDirection(textView.textDirectionHeuristic)\r\n                }\r\n                builder.build()\r\n            } else {\r\n                @Suppress(&quot;DEPRECATION&quot;)\r\n                StaticLayout(\r\n                    textView.text,\r\n                    textView.layout.paint,\r\n                    textView.width,\r\n                    textView.layout.alignment,\r\n                    textView.lineSpacingMultiplier,\r\n                    textView.lineSpacingExtra,\r\n                    textView.includeFontPadding)\r\n            }\r\n    \r\n        data class TextViewParams(\r\n            val textPaint: TextPaint,\r\n            val alignment: Layout.Alignment,\r\n            val lineSpacingExtra: Float,\r\n            val lineSpacingMultiplier: Float,\r\n            val includeFontPadding: Boolean,\r\n            val breakStrategy: Int,\r\n            val hyphenationFrequency: Int,\r\n            val justificationMode: Int,\r\n            val useFallbackLineSpacing: Boolean,\r\n            val textDirectionHeuristic: TextDirectionHeuristic?,\r\n            val width: Int\r\n        )\r\n    }\r\n\r\nUsage:\r\n\r\n1. If you want to print different texts in equal `TextView`s (for instance, in `RecyclerView` with one or similar `ViewHolder`s):\r\n\r\n        val params = TextMeasurementUtil.getTextViewParams(textView)\r\n\r\n        val lines = TextMeasurementUtil.getTextLines(textView.text, params)\r\n        val count = TextMeasurementUtil.getTextLineCount(textView.text, params)\r\n\r\n2. In any other case:\r\n\r\n        val lines = TextMeasurementUtil.getTextLines(textView)\r\n        val count = TextMeasurementUtil.getTextLineCount(textView)\r\n\r\nIn `RecyclerView` you won&#39;t know parameters of `TextView` until you call `post` or [doOnPreDraw][2] method, so use:\r\n\r\n    textView.doOnPreDraw {\r\n        val lines = TextMeasurementUtil.getTextLines(textView)\r\n        val count = TextMeasurementUtil.getTextLineCount(textView)\r\n    }\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/58975681/2914140\r\n  [2]: https://stackoverflow.com/a/28136027/2914140","title":"How to get line count of textview before rendering?","body":"<p>Thanks to <a href=\"https://stackoverflow.com/a/58975681/2914140\">Eugene Popovich</a> I got:</p>\n<pre><code>import android.os.Build\nimport android.text.Layout\nimport android.text.StaticLayout\nimport android.text.TextDirectionHeuristic\nimport android.text.TextPaint\nimport android.widget.TextView\n\n\nobject TextMeasurementUtil {\n    /**\n     * Split text into lines using specified parameters and the same algorithm\n     * as used by the [TextView] component\n     *\n     * @param text   the text to split\n     * @param params the measurement parameters\n     * @return\n     */\n    fun getTextLines(text: CharSequence, params: TextViewParams): List&lt;CharSequence&gt; {\n        val layout = getStaticLayout(text, params)\n        return (0 until layout.lineCount).map {\n            layout.text.subSequence(layout.getLineStart(it), layout.getLineEnd(it))\n        }\n    }\n\n    fun getTextLineCount(text: CharSequence, params: TextViewParams): Int {\n        val layout = getStaticLayout(text, params)\n        return layout.lineCount\n    }\n\n    fun getTextLines(textView: TextView): List&lt;CharSequence&gt; {\n        val layout = getStaticLayout(textView)\n        return (0 until layout.lineCount).map {\n            layout.text.subSequence(layout.getLineStart(it), layout.getLineEnd(it))\n        }\n    }\n\n    fun getTextLineCount(textView: TextView): Int {\n        val layout = getStaticLayout(textView)\n        return layout.lineCount\n    }\n\n    /**\n     * The text measurement parameters\n     */\n    fun getTextViewParams(textView: TextView): TextViewParams {\n        val layout = textView.layout\n        val width = textView.width - textView.compoundPaddingLeft - textView.compoundPaddingRight\n        var lineSpacingExtra = 0f\n        var lineSpacingMultiplier = 1.0f\n        var includeFontPadding = true\n        var breakStrategy = 0\n        var hyphenationFrequency = 0\n        var justificationMode = 0\n        var useFallbackLineSpacing = false\n        var textDirectionHeuristic: TextDirectionHeuristic? = null\n\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.JELLY_BEAN) {\n            lineSpacingExtra = textView.lineSpacingExtra\n            lineSpacingMultiplier = textView.lineSpacingMultiplier\n            includeFontPadding = textView.includeFontPadding\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M) {\n                breakStrategy = textView.breakStrategy\n                hyphenationFrequency = textView.hyphenationFrequency\n            }\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\n                justificationMode = textView.justificationMode\n            }\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.P) {\n                useFallbackLineSpacing = textView.isFallbackLineSpacing\n            }\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.Q) {\n                textDirectionHeuristic = textView.textDirectionHeuristic\n            }\n        }\n\n        return TextViewParams(\n            textPaint = layout.paint,\n            alignment = layout.alignment,\n            lineSpacingExtra = lineSpacingExtra,\n            lineSpacingMultiplier = lineSpacingMultiplier,\n            includeFontPadding = includeFontPadding,\n            breakStrategy = breakStrategy,\n            hyphenationFrequency = hyphenationFrequency,\n            justificationMode = justificationMode,\n            useFallbackLineSpacing = useFallbackLineSpacing,\n            textDirectionHeuristic = textDirectionHeuristic,\n            width = width\n        )\n    }\n\n    private fun getStaticLayout(text: CharSequence,\n                                params: TextViewParams): StaticLayout =\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M) {\n            val builder = StaticLayout.Builder\n                .obtain(text, 0, text.length, params.textPaint, params.width)\n                .setAlignment(params.alignment)\n                .setLineSpacing(params.lineSpacingExtra, params.lineSpacingMultiplier)\n                .setIncludePad(params.includeFontPadding)\n                .setBreakStrategy(params.breakStrategy)\n                .setHyphenationFrequency(params.hyphenationFrequency)\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\n                builder.setJustificationMode(params.justificationMode)\n            }\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.P) {\n                builder.setUseLineSpacingFromFallbacks(params.useFallbackLineSpacing)\n            }\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.Q) {\n                builder.setTextDirection(params.textDirectionHeuristic!!)\n            }\n            builder.build()\n        } else {\n            @Suppress(&quot;DEPRECATION&quot;)\n            StaticLayout(\n                text,\n                params.textPaint,\n                params.width,\n                params.alignment,\n                params.lineSpacingMultiplier,\n                params.lineSpacingExtra,\n                params.includeFontPadding)\n        }\n\n    private fun getStaticLayout(textView: TextView): StaticLayout =\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M) {\n            val builder = StaticLayout.Builder\n                .obtain(textView.text, 0, textView.text.length, textView.layout.paint,\n                    textView.width)\n                .setAlignment(textView.layout.alignment)\n                .setLineSpacing(textView.lineSpacingExtra, textView.lineSpacingMultiplier)\n                .setIncludePad(textView.includeFontPadding)\n                .setBreakStrategy(textView.breakStrategy)\n                .setHyphenationFrequency(textView.hyphenationFrequency)\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\n                builder.setJustificationMode(textView.justificationMode)\n            }\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.P) {\n                builder.setUseLineSpacingFromFallbacks(textView.isFallbackLineSpacing)\n            }\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.Q) {\n                builder.setTextDirection(textView.textDirectionHeuristic)\n            }\n            builder.build()\n        } else {\n            @Suppress(&quot;DEPRECATION&quot;)\n            StaticLayout(\n                textView.text,\n                textView.layout.paint,\n                textView.width,\n                textView.layout.alignment,\n                textView.lineSpacingMultiplier,\n                textView.lineSpacingExtra,\n                textView.includeFontPadding)\n        }\n\n    data class TextViewParams(\n        val textPaint: TextPaint,\n        val alignment: Layout.Alignment,\n        val lineSpacingExtra: Float,\n        val lineSpacingMultiplier: Float,\n        val includeFontPadding: Boolean,\n        val breakStrategy: Int,\n        val hyphenationFrequency: Int,\n        val justificationMode: Int,\n        val useFallbackLineSpacing: Boolean,\n        val textDirectionHeuristic: TextDirectionHeuristic?,\n        val width: Int\n    )\n}\n</code></pre>\n<p>Usage:</p>\n<ol>\n<li><p>If you want to print different texts in equal <code>TextView</code>s (for instance, in <code>RecyclerView</code> with one or similar <code>ViewHolder</code>s):</p>\n<pre><code> val params = TextMeasurementUtil.getTextViewParams(textView)\n\n val lines = TextMeasurementUtil.getTextLines(textView.text, params)\n val count = TextMeasurementUtil.getTextLineCount(textView.text, params)\n</code></pre>\n</li>\n<li><p>In any other case:</p>\n<pre><code> val lines = TextMeasurementUtil.getTextLines(textView)\n val count = TextMeasurementUtil.getTextLineCount(textView)\n</code></pre>\n</li>\n</ol>\n<p>In <code>RecyclerView</code> you won't know parameters of <code>TextView</code> until you call <code>post</code> or <a href=\"https://stackoverflow.com/a/28136027/2914140\">doOnPreDraw</a> method, so use:</p>\n<pre><code>textView.doOnPreDraw {\n    val lines = TextMeasurementUtil.getTextLines(textView)\n    val count = TextMeasurementUtil.getTextLineCount(textView)\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17207654,"reputation":116,"user_id":12457847,"display_name":"Gerardo Daghero"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1613426747,"creation_date":1613426747,"answer_id":66215994,"question_id":15679147,"body_markdown":"Use kotlin extension function `doOnPreDraw` to know the line count before the view is rendered. Example: \r\n\r\n    my_text_view.text = &quot;text with multiple lines \\n\\n\\n&quot;\r\n    my_text_view.doOnPreDraw {\r\n\r\n        // before it is drawn, use lineCount...\r\n        print(my_text_view.lineCount)\r\n    }\r\n\r\nhttps://developer.android.com/reference/kotlin/androidx/core/view/package-summary#doonpredraw","title":"How to get line count of textview before rendering?","body":"<p>Use kotlin extension function <code>doOnPreDraw</code> to know the line count before the view is rendered. Example:</p>\n<pre><code>my_text_view.text = &quot;text with multiple lines \\n\\n\\n&quot;\nmy_text_view.doOnPreDraw {\n\n    // before it is drawn, use lineCount...\n    print(my_text_view.lineCount)\n}\n</code></pre>\n<p><a href=\"https://developer.android.com/reference/kotlin/androidx/core/view/package-summary#doonpredraw\" rel=\"nofollow noreferrer\">https://developer.android.com/reference/kotlin/androidx/core/view/package-summary#doonpredraw</a></p>\n"}],"owner":{"account_id":1325917,"reputation":6746,"user_id":1270706,"accept_rate":83,"display_name":"Nandha"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":31597,"favorite_count":0,"down_vote_count":3,"up_vote_count":49,"accepted_answer_id":15679207,"answer_count":7,"score":46,"last_activity_date":1658391788,"creation_date":1364465708,"question_id":15679147,"body_markdown":"How can I get the number of lines a string will take up in a `TextView` before it is rendered. \r\n\r\nA `ViewTreeObserver` will not work because those are only fired after it is rendered.","title":"How to get line count of textview before rendering?","body":"<p>How can I get the number of lines a string will take up in a <code>TextView</code> before it is rendered. </p>\n\n<p>A <code>ViewTreeObserver</code> will not work because those are only fired after it is rendered.</p>\n"},{"tags":["java","methods","call","stack-trace"],"comments":[{"owner":{"account_id":1992310,"reputation":11172,"user_id":1786065,"accept_rate":91,"display_name":"Rogue"},"score":0,"creation_date":1657733653,"post_id":72970384,"comment_id":128882963,"body_markdown":"To get an _instance_ of the calling class: no. You can get stack trace details about it, but the actual instance can only be retrieved if you passed it to the call. However, within `Person#call`, you know which `Person` is calling `Main#call` (as it would be the `this` keyword). You can see this in a debugger as well, when inside `Main#call`, there is no `Person` to refer to.","body":"To get an <i>instance</i> of the calling class: no. You can get stack trace details about it, but the actual instance can only be retrieved if you passed it to the call. However, within <code>Person#call</code>, you know which <code>Person</code> is calling <code>Main#call</code> (as it would be the <code>this</code> keyword). You can see this in a debugger as well, when inside <code>Main#call</code>, there is no <code>Person</code> to refer to."},{"owner":{"account_id":22463658,"reputation":26,"user_id":18954735,"display_name":"RORAK"},"score":0,"creation_date":1657733844,"post_id":72970384,"comment_id":128883009,"body_markdown":"@Rogue I don&#39;t want to use it in this person case. I&#39;m making some lock security class, where only objects that created the lock can access it. And if you passed the object as an argument, it&#39;d be super easy to bypass... I could use some security code, but that is also unsafe because reflection is a thing...","body":"@Rogue I don&#39;t want to use it in this person case. I&#39;m making some lock security class, where only objects that created the lock can access it. And if you passed the object as an argument, it&#39;d be super easy to bypass... I could use some security code, but that is also unsafe because reflection is a thing..."},{"owner":{"account_id":1992310,"reputation":11172,"user_id":1786065,"accept_rate":91,"display_name":"Rogue"},"score":0,"creation_date":1657734040,"post_id":72970384,"comment_id":128883059,"body_markdown":"I&#39;ve created a [similar tool](https://github.com/Codelanx/CodelanxCommons/blob/master/src/main/java/com/codelanx/commons/util/Reflections.java#L71-L136) years back, and it is not without several drawbacks. First and foremost, these checks can be invalidated by anyone adept enough to do so. Secondly, your code can be decompiled and recompiled. You can still pass the object that you want to access the Lock, so it can internally check if that object should get access, raising an exception if they do not. Preventing the call itself will not happen, and the stacktrace check will be very expensive.","body":"I&#39;ve created a <a href=\"https://github.com/Codelanx/CodelanxCommons/blob/master/src/main/java/com/codelanx/commons/util/Reflections.java#L71-L136\" rel=\"nofollow noreferrer\">similar tool</a> years back, and it is not without several drawbacks. First and foremost, these checks can be invalidated by anyone adept enough to do so. Secondly, your code can be decompiled and recompiled. You can still pass the object that you want to access the Lock, so it can internally check if that object should get access, raising an exception if they do not. Preventing the call itself will not happen, and the stacktrace check will be very expensive."},{"owner":{"account_id":1992310,"reputation":11172,"user_id":1786065,"accept_rate":91,"display_name":"Rogue"},"score":0,"creation_date":1657734178,"post_id":72970384,"comment_id":128883108,"body_markdown":"If the question is reopened, there&#39;s a plausible solution using package-private and two separate classes: one to hold the `Lock` once it is created, and another to specify who may access it. For now, I would add more details regarding the actual classes you wish to restrict access with (e.g. are they continuously created throughout your program&#39;s lifetime, and is it for only known classes or potentially any new class)","body":"If the question is reopened, there&#39;s a plausible solution using package-private and two separate classes: one to hold the <code>Lock</code> once it is created, and another to specify who may access it. For now, I would add more details regarding the actual classes you wish to restrict access with (e.g. are they continuously created throughout your program&#39;s lifetime, and is it for only known classes or potentially any new class)"},{"owner":{"account_id":22463658,"reputation":26,"user_id":18954735,"display_name":"RORAK"},"score":0,"creation_date":1657734376,"post_id":72970384,"comment_id":128883170,"body_markdown":"@Rogue and can package-private classes be accessed using reflection?","body":"@Rogue and can package-private classes be accessed using reflection?"},{"owner":{"account_id":1992310,"reputation":11172,"user_id":1786065,"accept_rate":91,"display_name":"Rogue"},"score":0,"creation_date":1657734475,"post_id":72970384,"comment_id":128883198,"body_markdown":"Yes they can. You are not going to circumvent reflection in any easy manner. The old java way was through the use of a SecurityManager, which has since been deprecated. You should include more information regarding your specific situation (loading third-party plugins?), as there may be other tools available than what has been mentioned thus far.","body":"Yes they can. You are not going to circumvent reflection in any easy manner. The old java way was through the use of a SecurityManager, which has since been deprecated. You should include more information regarding your specific situation (loading third-party plugins?), as there may be other tools available than what has been mentioned thus far."},{"owner":{"account_id":236189,"reputation":2903,"user_id":503510,"accept_rate":81,"display_name":"Tintin"},"score":0,"creation_date":1657740656,"post_id":72970384,"comment_id":128885212,"body_markdown":"Why do you need this? It smells of an underlying design issue unless this is purely for curiosity.","body":"Why do you need this? It smells of an underlying design issue unless this is purely for curiosity."},{"owner":{"account_id":22463658,"reputation":26,"user_id":18954735,"display_name":"RORAK"},"score":0,"creation_date":1657820397,"post_id":72970384,"comment_id":128907130,"body_markdown":"@Tintin I&#39;m making library for users where interfaces can have fields in storage and I need to check if the interface accessing the field is the same that created the field...","body":"@Tintin I&#39;m making library for users where interfaces can have fields in storage and I need to check if the interface accessing the field is the same that created the field..."}],"answers":[{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1658391765,"creation_date":1657946258,"answer_id":73001556,"question_id":72970384,"body_markdown":"There isn&#39;t a way to do it that can&#39;t be subverted with relative ease.   Which renders this kind of pointless as a security mechanism.\r\n\r\nNote that it might be (have been!) possible to do something using `SecurityManager`, but that assumes that your code is only called from code that is in a &quot;sandbox&quot;.  And all sorts of things would need to be disabled in the sandbox ... starting with reflection ... which would be too burdensome for a modern Java programmer.\r\n\r\nBasically, if you have a security mechanism that needs to be enforced against the users of your code, then it needs to be done **outside** of the JVM where their code runs.  Typically you would perform the checks on a remote server ... that your users cannot interfere with.   \r\n\r\n&lt;sup&gt;(The &quot;do it in a server&quot; approach may be unworkable or unacceptable to you.  In that case: sorry but there is no real solution.  Only approaches that give you the illusion that you have solved the problem.)&lt;/sup&gt;\r\n\r\nYou noted this:\r\n\r\n&gt; It should be possible because debuggers can use that.\r\n\r\nSorry, but no.\r\n\r\nDebuggers use a debug-agent to access the state of the JVM they are debugging.  Unfortunately (or maybe fortunately, depending on your perspective!) a JVM cannot use a debug-agent on itself.  It doesn&#39;t work.  \r\n\r\nMy understanding is that the debug-agent code pauses all threads in the target JVM while it is doing its thing.  When a JVM tries to &quot;debug itself&quot;, that includes the thread in the JVM that is trying to use the agent.  Instant deadlock.\r\n\r\nAnd besides, someone wanting to subvert *any* agent-based security mechanism simply needs to not attach the agent when they start their JVM.\r\n\r\n\r\n","title":"Is there any way to get reference to object that called a method in java?","body":"<p>There isn't a way to do it that can't be subverted with relative ease.   Which renders this kind of pointless as a security mechanism.</p>\n<p>Note that it might be (have been!) possible to do something using <code>SecurityManager</code>, but that assumes that your code is only called from code that is in a &quot;sandbox&quot;.  And all sorts of things would need to be disabled in the sandbox ... starting with reflection ... which would be too burdensome for a modern Java programmer.</p>\n<p>Basically, if you have a security mechanism that needs to be enforced against the users of your code, then it needs to be done <strong>outside</strong> of the JVM where their code runs.  Typically you would perform the checks on a remote server ... that your users cannot interfere with.</p>\n<p><sup>(The &quot;do it in a server&quot; approach may be unworkable or unacceptable to you.  In that case: sorry but there is no real solution.  Only approaches that give you the illusion that you have solved the problem.)</sup></p>\n<p>You noted this:</p>\n<blockquote>\n<p>It should be possible because debuggers can use that.</p>\n</blockquote>\n<p>Sorry, but no.</p>\n<p>Debuggers use a debug-agent to access the state of the JVM they are debugging.  Unfortunately (or maybe fortunately, depending on your perspective!) a JVM cannot use a debug-agent on itself.  It doesn't work.</p>\n<p>My understanding is that the debug-agent code pauses all threads in the target JVM while it is doing its thing.  When a JVM tries to &quot;debug itself&quot;, that includes the thread in the JVM that is trying to use the agent.  Instant deadlock.</p>\n<p>And besides, someone wanting to subvert <em>any</em> agent-based security mechanism simply needs to not attach the agent when they start their JVM.</p>\n"}],"owner":{"account_id":22463658,"reputation":26,"user_id":18954735,"display_name":"RORAK"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":97,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"accepted_answer_id":73001556,"answer_count":1,"score":-2,"last_activity_date":1658391765,"creation_date":1657733460,"question_id":72970384,"body_markdown":"I need some way to get an instance of a class that called some method. For example, in this program, I want to get the instance of `Person` (named Jack here) that called method `Main.call()`.\r\n```java\r\npublic class Main {\r\n   public static Person p;\r\n   public static void main(String[] args) {\r\n      p = new Person(&quot;Jack&quot;);\r\n      p.call();\r\n   }\r\n   public static void call() {\r\n      Object caller = Magic.getTrace()[1].getObject(); // This is what I need\r\n      System.out.println(((Person)caller).getName()); // Output: Jack\r\n      Class&lt;?&gt; clazz = Magic.getTrace()[2].getClass(); // This too\r\n      System.out.println(clazz.getName()); // Output: Main\r\n}\r\npublic class Person {\r\n   private String name;\r\n   public Person(String _name) {\r\n      name = _name\r\n   }\r\n   public String getName() { return name; }\r\n   public void call() {\r\n      Main.call();\r\n   }\r\n}\r\n```\r\n\r\nSo, is there any way to accomplish that? It should be possible because debuggers can use that.\r\n\r\nFor mods: **I don&#39;t want the NAME of the class, but the INSTANCE**...\r\n\r\nThanks!","title":"Is there any way to get reference to object that called a method in java?","body":"<p>I need some way to get an instance of a class that called some method. For example, in this program, I want to get the instance of <code>Person</code> (named Jack here) that called method <code>Main.call()</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Main {\n   public static Person p;\n   public static void main(String[] args) {\n      p = new Person(&quot;Jack&quot;);\n      p.call();\n   }\n   public static void call() {\n      Object caller = Magic.getTrace()[1].getObject(); // This is what I need\n      System.out.println(((Person)caller).getName()); // Output: Jack\n      Class&lt;?&gt; clazz = Magic.getTrace()[2].getClass(); // This too\n      System.out.println(clazz.getName()); // Output: Main\n}\npublic class Person {\n   private String name;\n   public Person(String _name) {\n      name = _name\n   }\n   public String getName() { return name; }\n   public void call() {\n      Main.call();\n   }\n}\n</code></pre>\n<p>So, is there any way to accomplish that? It should be possible because debuggers can use that.</p>\n<p>For mods: <strong>I don't want the NAME of the class, but the INSTANCE</strong>...</p>\n<p>Thanks!</p>\n"},{"tags":["java","drools","kie"],"comments":[{"owner":{"account_id":11296302,"reputation":2929,"user_id":8283737,"accept_rate":89,"display_name":"Arun Gowda"},"score":0,"creation_date":1618395020,"post_id":67057246,"comment_id":118586486,"body_markdown":"Could you help us with the imports? I can&#39;t find `KieServicesConfiguration` and `KieServicesClient` in drools 7.49 version. What dependency am I missing here.?","body":"Could you help us with the imports? I can&#39;t find <code>KieServicesConfiguration</code> and <code>KieServicesClient</code> in drools 7.49 version. What dependency am I missing here.?"},{"owner":{"account_id":4926499,"reputation":310,"user_id":3967613,"display_name":"m b"},"score":0,"creation_date":1618399171,"post_id":67057246,"comment_id":118588257,"body_markdown":"@ArunGowda It is in kie-server-client-7.49.0.Final.jar Dependency &lt;dependency&gt;\n\t\t\t&lt;groupId&gt;org.kie.server&lt;/groupId&gt;\n\t\t\t&lt;artifactId&gt;kie-server-client&lt;/artifactId&gt;\n\t\t\t&lt;version&gt;7.49.0.Final&lt;/version&gt;\n\t\t&lt;/dependency&gt;","body":"@ArunGowda It is in kie-server-client-7.49.0.Final.jar Dependency &lt;dependency&gt; \t\t\t&lt;groupId&gt;org.kie.server&lt;/groupId&gt; \t\t\t&lt;artifactId&gt;kie-server-client&lt;/artifactId&gt; \t\t\t&lt;version&gt;7.49.0.Final&lt;/version&gt; \t\t&lt;/dependency&gt;"},{"owner":{"account_id":4926499,"reputation":310,"user_id":3967613,"display_name":"m b"},"score":0,"creation_date":1618399217,"post_id":67057246,"comment_id":118588269,"body_markdown":"Here are the imports import org.kie.server.client.KieServicesClient;\nimport org.kie.server.client.KieServicesConfiguration;","body":"Here are the imports import org.kie.server.client.KieServicesClient; import org.kie.server.client.KieServicesConfiguration;"}],"answers":[{"tags":[],"owner":{"account_id":1197384,"reputation":6314,"user_id":1168802,"display_name":"Esteban Aliverti"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1618390503,"creation_date":1618245484,"answer_id":67062272,"question_id":67057246,"body_markdown":"The [Business Central REST API][1] is what you are looking for.\r\n\r\nWith this API you can get your projects and the git URL of each of them. If you want, you can then use a git client to access the project assets.\r\n\r\nAnother possibility is to use the [KIE Server REST APIs][2], but I never used them before. The documentation mentions a Swagger endpoint that you can use to see what information is available through these endpoints.\r\n\r\n\r\n  [1]: https://docs.jboss.org/drools/release/7.52.0.Final/drools-docs/html_single/index.html#knowledge-store-rest-api-con_drl-rules\r\n  [2]: https://docs.jboss.org/drools/release/7.52.0.Final/drools-docs/html_single/index.html#kie-server-rest-api-endpoints-ref_kie-apis","title":"How to get Rule Data from Business Central Drools","body":"<p>The <a href=\"https://docs.jboss.org/drools/release/7.52.0.Final/drools-docs/html_single/index.html#knowledge-store-rest-api-con_drl-rules\" rel=\"nofollow noreferrer\">Business Central REST API</a> is what you are looking for.</p>\n<p>With this API you can get your projects and the git URL of each of them. If you want, you can then use a git client to access the project assets.</p>\n<p>Another possibility is to use the <a href=\"https://docs.jboss.org/drools/release/7.52.0.Final/drools-docs/html_single/index.html#kie-server-rest-api-endpoints-ref_kie-apis\" rel=\"nofollow noreferrer\">KIE Server REST APIs</a>, but I never used them before. The documentation mentions a Swagger endpoint that you can use to see what information is available through these endpoints.</p>\n"}],"owner":{"account_id":4926499,"reputation":310,"user_id":3967613,"display_name":"m b"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":645,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1658390963,"creation_date":1618225420,"question_id":67057246,"body_markdown":"I am using business central and Drools 7.49. I have configured my rules through Business Central and I am able to fire the rules and get the result successfully. Now what I need is an API preferably returning a JSON containing all the rules description as I want to show the rules set in Business Central my space, project and package.\r\n\r\nIs there a way I could get the rules details that I have configured.\r\n\r\nDo let me know if any additional information is required.\r\nHere is my project details.\r\nSpace: iot-platform-space\r\nProject:  iot-temperature-service\r\nContainer: IOTTreeContainer\r\n\r\nBelow is the code I am having to connect to Business Central\r\n\r\n    URL = http://x.x.x.x:8080/kie-server/services/rest/server\r\n\r\n    KieServicesConfiguration conf = KieServicesFactory.newRestConfiguration(URL, USER, PASSWORD);\r\n    \r\n    KieServicesClient kieServicesClient = KieServicesFactory.newKieServicesClient(conf);\r\n\r\n\r\nI want an object of KieContainer from this to get all the rules.\r\n\r\nHere is the code to get the rules.\r\n\r\n    KieBase kieBase = kieContainer.getKieBase();\r\n    \t\tCollection&lt;KiePackage&gt; kiePackages = kieBase.getKiePackages();\r\n    List&lt;Rule&gt; ruleList = kiePackages.stream().flatMap(kiePackage -&gt; kiePackage.getRules().stream()).collect(Collectors.toList());\r\n\r\n\r\nHow to get KieContainer object from kieServiceClient or any other way to get it.\r\n\r\n","title":"How to get Rule Data from Business Central Drools","body":"<p>I am using business central and Drools 7.49. I have configured my rules through Business Central and I am able to fire the rules and get the result successfully. Now what I need is an API preferably returning a JSON containing all the rules description as I want to show the rules set in Business Central my space, project and package.</p>\n<p>Is there a way I could get the rules details that I have configured.</p>\n<p>Do let me know if any additional information is required.\nHere is my project details.\nSpace: iot-platform-space\nProject:  iot-temperature-service\nContainer: IOTTreeContainer</p>\n<p>Below is the code I am having to connect to Business Central</p>\n<pre><code>URL = http://x.x.x.x:8080/kie-server/services/rest/server\n\nKieServicesConfiguration conf = KieServicesFactory.newRestConfiguration(URL, USER, PASSWORD);\n\nKieServicesClient kieServicesClient = KieServicesFactory.newKieServicesClient(conf);\n</code></pre>\n<p>I want an object of KieContainer from this to get all the rules.</p>\n<p>Here is the code to get the rules.</p>\n<pre><code>KieBase kieBase = kieContainer.getKieBase();\n        Collection&lt;KiePackage&gt; kiePackages = kieBase.getKiePackages();\nList&lt;Rule&gt; ruleList = kiePackages.stream().flatMap(kiePackage -&gt; kiePackage.getRules().stream()).collect(Collectors.toList());\n</code></pre>\n<p>How to get KieContainer object from kieServiceClient or any other way to get it.</p>\n"},{"tags":["java","javafx"],"comments":[{"owner":{"account_id":2819940,"reputation":12538,"user_id":2423906,"accept_rate":100,"display_name":"SedJ601"},"score":1,"creation_date":1566917681,"post_id":57677244,"comment_id":101801672,"body_markdown":"See: [How to create a Minimal, Reproducible Example.](https://stackoverflow.com/help/minimal-reproducible-example)","body":"See: <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">How to create a Minimal, Reproducible Example.</a>"},{"owner":{"account_id":2819940,"reputation":12538,"user_id":2423906,"accept_rate":100,"display_name":"SedJ601"},"score":0,"creation_date":1566917786,"post_id":57677244,"comment_id":101801733,"body_markdown":"https://o7planning.org/en/11079/javafx-tableview-tutorial","body":"<a href=\"https://o7planning.org/en/11079/javafx-tableview-tutorial\" rel=\"nofollow noreferrer\">o7planning.org/en/11079/javafx-tableview-tutorial</a>"},{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":0,"creation_date":1566918013,"post_id":57677244,"comment_id":101801865,"body_markdown":"you can subclass TextFieldTableCell just the same as any other cell","body":"you can subclass TextFieldTableCell just the same as any other cell"},{"owner":{"account_id":11827645,"reputation":3065,"user_id":9011164,"accept_rate":50,"display_name":"KunLun"},"score":0,"creation_date":1566919325,"post_id":57677244,"comment_id":101802592,"body_markdown":"@Sedrick How I can give a `Minimal, Reproducible Example` when I don&#39;t have code for what I want. My problem is not an error. Also your link don&#39;t help me. I know how to make cell editable, but I don&#39;t know how to make text of cell colorful, when it is editable.","body":"@Sedrick How I can give a <code>Minimal, Reproducible Example</code> when I don&#39;t have code for what I want. My problem is not an error. Also your link don&#39;t help me. I know how to make cell editable, but I don&#39;t know how to make text of cell colorful, when it is editable."},{"owner":{"account_id":11827645,"reputation":3065,"user_id":9011164,"accept_rate":50,"display_name":"KunLun"},"score":0,"creation_date":1566920327,"post_id":57677244,"comment_id":101803142,"body_markdown":"@kleopatra I call `TextFieldTableCell.forTableColumn()` which is a static method which return a `CallBack` which make my cell editable. I want to edit that `CallBack` to apply, besides editable cell, a color to text, based on value.","body":"@kleopatra I call <code>TextFieldTableCell.forTableColumn()</code> which is a static method which return a <code>CallBack</code> which make my cell editable. I want to edit that <code>CallBack</code> to apply, besides editable cell, a color to text, based on value."},{"owner":{"account_id":2819940,"reputation":12538,"user_id":2423906,"accept_rate":100,"display_name":"SedJ601"},"score":1,"creation_date":1566921033,"post_id":57677244,"comment_id":101803499,"body_markdown":"No one wants to recreate a whole project to fix your code. At the very least you can post code of a running program up to the point where you are. That way we can copy that code and edit it instead of starting from scratch.","body":"No one wants to recreate a whole project to fix your code. At the very least you can post code of a running program up to the point where you are. That way we can copy that code and edit it instead of starting from scratch."},{"owner":{"account_id":11827645,"reputation":3065,"user_id":9011164,"accept_rate":50,"display_name":"KunLun"},"score":0,"creation_date":1566922992,"post_id":57677244,"comment_id":101804364,"body_markdown":"@Sedrick I&#39;m sorry for my misunderstood. I added a sample code.","body":"@Sedrick I&#39;m sorry for my misunderstood. I added a sample code."},{"owner":{"account_id":3583958,"reputation":80987,"user_id":2991525,"display_name":"fabian"},"score":0,"creation_date":1566929609,"post_id":57677244,"comment_id":101807097,"body_markdown":"Note that your `TableCell` implementation is incomplete: `updateItem` needs to be able to deal with the case when the cell becomes empty. Otherwise you&#39;ll get unexpected results, if you remove items from the table or grow the size of the table in a way that results in empty rows being shown...","body":"Note that your <code>TableCell</code> implementation is incomplete: <code>updateItem</code> needs to be able to deal with the case when the cell becomes empty. Otherwise you&#39;ll get unexpected results, if you remove items from the table or grow the size of the table in a way that results in empty rows being shown..."}],"answers":[{"tags":[],"owner":{"account_id":2819940,"reputation":12538,"user_id":2423906,"accept_rate":100,"display_name":"SedJ601"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1567002059,"creation_date":1566933432,"answer_id":57680970,"question_id":57677244,"body_markdown":"The key is to `extend` `TableCell` as @fabian suggested.\r\n\r\n&gt;Main\r\n\r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    import javafx.application.Application;\r\n    import javafx.beans.property.SimpleStringProperty;\r\n    import javafx.collections.FXCollections;\r\n    import javafx.scene.Scene;\r\n    import javafx.scene.control.TableCell;\r\n    import javafx.scene.control.TableColumn;\r\n    import javafx.scene.control.TableView;\r\n    import javafx.stage.Stage;\r\n    import javafx.util.Callback;\r\n    \r\n    /**\r\n     *\r\n     * @author blj0011\r\n     */\r\n    public class JavaFXTestingGround extends Application\r\n    {\r\n    \r\n        /**\r\n         * @param args the command line arguments\r\n         */\r\n        public static void main(String[] args)\r\n        {\r\n            launch(args);\r\n        }\r\n    \r\n        @Override\r\n        public void start(Stage primaryStage) throws Exception\r\n        {\r\n            List&lt;String&gt; test = new ArrayList&lt;&gt;();\r\n            test.add(&quot;done(green)&quot;);\r\n            test.add(&quot;done(green)&quot;);\r\n            test.add(&quot;fail(red)&quot;);\r\n            test.add(&quot;done(green)&quot;);\r\n    \r\n            TableView&lt;String&gt; tableView = new TableView&lt;&gt;();\r\n            tableView.setColumnResizePolicy(TableView.UNCONSTRAINED_RESIZE_POLICY);\r\n            tableView.setEditable(true);\r\n    \r\n            TableColumn&lt;String, String&gt; col = new TableColumn&lt;&gt;(&quot;Column&quot;);\r\n            col.setCellValueFactory(data -&gt; new SimpleStringProperty(data.getValue()));\r\n            col.setCellFactory((param) -&gt; new CustomCellFactory());\r\n            //I want to apply a color based by value from cell\r\n    \r\n            tableView.getColumns().add(col);\r\n    \r\n            tableView.setItems(FXCollections.observableArrayList(test));\r\n    \r\n            primaryStage.setScene(new Scene(tableView));\r\n    \r\n            primaryStage.show();\r\n        }\r\n    }\r\n\r\n&gt;CustomCellFactory\r\n\r\n    import javafx.application.Platform;\r\n    import javafx.scene.control.ContentDisplay;\r\n    import javafx.scene.control.TableCell;\r\n    import javafx.scene.control.TextField;\r\n    import javafx.scene.input.KeyCode;\r\n    import javafx.scene.paint.Color;\r\n    import javafx.scene.text.Text;\r\n    \r\n    /**\r\n     *\r\n     * @author blj0011\r\n     */\r\n    public class CustomCellFactory&lt;T&gt; extends TableCell&lt;T, String&gt;\r\n    {\r\n    \r\n        TextField textField = new TextField();\r\n        Text text = new Text();\r\n    \r\n        public CustomCellFactory()\r\n        {\r\n            textField.setOnKeyPressed(keyEvent -&gt; {\r\n                if (keyEvent.getCode() == KeyCode.ENTER) {\r\n                    commitEdit(textField.getText());\r\n                }\r\n            });\r\n        }\r\n    \r\n        @Override\r\n        public void commitEdit(String newValue)\r\n        {\r\n            super.commitEdit(newValue);\r\n            setContentDisplay(ContentDisplay.GRAPHIC_ONLY);\r\n        }\r\n    \r\n        @Override\r\n        public void startEdit()\r\n        {\r\n            super.startEdit();\r\n            if (!isEmpty()) {\r\n                setGraphic(textField);\r\n                setContentDisplay(ContentDisplay.GRAPHIC_ONLY);\r\n                textField.setText(text.getText());\r\n                Platform.runLater(() -&gt; textField.requestFocus());\r\n            }\r\n        }\r\n    \r\n        @Override\r\n        public void cancelEdit()\r\n        {\r\n            super.cancelEdit();\r\n            setContentDisplay(ContentDisplay.TEXT_ONLY);\r\n        }\r\n    \r\n        @Override\r\n        protected void updateItem(String item, boolean empty)\r\n        {\r\n            super.updateItem(item, empty);\r\n    \r\n            if (item == null || empty) {\r\n                setText(null);\r\n            }\r\n            else {\r\n                if (item.equals(&quot;error&quot;)) {\r\n                    text.setFill(Color.RED);\r\n                }\r\n                else {\r\n                    text.setFill(Color.BLACK);\r\n                }\r\n    \r\n                text.setText(item);\r\n                setGraphic(text);\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/xACGz.png\r\n\r\n\r\n&gt;Update: I found [This](https://gist.github.com/james-d/be5bbd6255a4640a5357#file-editcell-java-L109) while failing to live up to @kleopatra suggestion.\r\n\r\n**Main**\r\n\r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    import javafx.application.Application;\r\n    import javafx.beans.property.SimpleStringProperty;\r\n    import javafx.collections.FXCollections;\r\n    import javafx.scene.Scene;\r\n    import javafx.scene.control.TableCell;\r\n    import javafx.scene.control.TableColumn;\r\n    import javafx.scene.control.TableView;\r\n    import javafx.stage.Stage;\r\n    import javafx.util.Callback;\r\n    \r\n    /**\r\n     *\r\n     * @author blj0011\r\n     */\r\n    public class JavaFXTestingGround extends Application\r\n    {\r\n    \r\n        /**\r\n         * @param args the command line arguments\r\n         */\r\n        public static void main(String[] args)\r\n        {\r\n            launch(args);\r\n        }\r\n    \r\n        @Override\r\n        public void start(Stage primaryStage) throws Exception\r\n        {\r\n            List&lt;String&gt; test = new ArrayList&lt;&gt;();\r\n            test.add(&quot;done(green)&quot;);\r\n            test.add(&quot;done(green)&quot;);\r\n            test.add(&quot;fail(red)&quot;);\r\n            test.add(&quot;done(green)&quot;);\r\n    \r\n            TableView&lt;String&gt; tableView = new TableView&lt;&gt;();\r\n            tableView.setColumnResizePolicy(TableView.UNCONSTRAINED_RESIZE_POLICY);\r\n            tableView.setEditable(true);\r\n    \r\n            TableColumn&lt;String, String&gt; col = new TableColumn&lt;&gt;(&quot;Column&quot;);\r\n            col.setCellValueFactory(data -&gt; new SimpleStringProperty(data.getValue()));\r\n            col.setCellFactory(column -&gt; EditCell.createStringEditCell());\r\n            //I want to apply a color based by value from cell\r\n    \r\n            tableView.getColumns().add(col);\r\n    \r\n            tableView.setItems(FXCollections.observableArrayList(test));\r\n    \r\n            primaryStage.setScene(new Scene(tableView));\r\n    \r\n            primaryStage.show();\r\n        }\r\n    }\r\n\r\n**EditCell**\r\n\r\n    import javafx.event.Event;\r\n    import javafx.scene.control.ContentDisplay;\r\n    import javafx.scene.control.TableCell;\r\n    import javafx.scene.control.TableColumn;\r\n    import javafx.scene.control.TableColumn.CellEditEvent;\r\n    import javafx.scene.control.TablePosition;\r\n    import javafx.scene.control.TableView;\r\n    import javafx.scene.control.TextField;\r\n    import javafx.scene.input.KeyEvent;\r\n    import javafx.scene.paint.Color;\r\n    import javafx.util.StringConverter;\r\n    \r\n    public class EditCell&lt;S, T&gt; extends TableCell&lt;S, T&gt;\r\n    {\r\n    \r\n        // Text field for editing\r\n        // TODO: allow this to be a plugable control.\r\n        private final TextField textField = new TextField();\r\n    \r\n        // Converter for converting the text in the text field to the user type, and vice-versa:\r\n        private final StringConverter&lt;T&gt; converter;\r\n    \r\n        public EditCell(StringConverter&lt;T&gt; converter)\r\n        {\r\n            this.converter = converter;\r\n    \r\n            itemProperty().addListener((obx, oldItem, newItem) -&gt; {\r\n                if (newItem == null) {\r\n                    setText(null);\r\n                }\r\n                else {\r\n                    setText(converter.toString(newItem));\r\n                }\r\n            });\r\n            setGraphic(textField);\r\n            setContentDisplay(ContentDisplay.TEXT_ONLY);\r\n    \r\n            textField.setOnAction(evt -&gt; {\r\n                commitEdit(this.converter.fromString(textField.getText()));\r\n            });\r\n            textField.focusedProperty().addListener((obs, wasFocused, isNowFocused) -&gt; {\r\n                if (!isNowFocused) {\r\n                    commitEdit(this.converter.fromString(textField.getText()));\r\n                }\r\n            });\r\n            textField.addEventFilter(KeyEvent.KEY_PRESSED, event -&gt; {\r\n                if (null != event.getCode()) {\r\n                    switch (event.getCode()) {\r\n                        case ESCAPE:\r\n                            textField.setText(converter.toString(getItem()));\r\n                            cancelEdit();\r\n                            event.consume();\r\n                            break;\r\n                        case RIGHT:\r\n                            getTableView().getSelectionModel().selectRightCell();\r\n                            event.consume();\r\n                            break;\r\n                        case LEFT:\r\n                            getTableView().getSelectionModel().selectLeftCell();\r\n                            event.consume();\r\n                            break;\r\n                        case UP:\r\n                            getTableView().getSelectionModel().selectAboveCell();\r\n                            event.consume();\r\n                            break;\r\n                        case DOWN:\r\n                            getTableView().getSelectionModel().selectBelowCell();\r\n                            event.consume();\r\n                            break;\r\n                        default:\r\n                            break;\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    \r\n        /**\r\n         * Convenience converter that does nothing (converts Strings to themselves\r\n         * and vice-versa...).\r\n         */\r\n        public static final StringConverter&lt;String&gt; IDENTITY_CONVERTER = new StringConverter&lt;String&gt;()\r\n        {\r\n    \r\n            @Override\r\n            public String toString(String object)\r\n            {\r\n                return object;\r\n            }\r\n    \r\n            @Override\r\n            public String fromString(String string)\r\n            {\r\n                return string;\r\n            }\r\n    \r\n        };\r\n    \r\n        /**\r\n         * Convenience method for creating an EditCell for a String value.\r\n         *\r\n         * @param &lt;S&gt;\r\n         * @return\r\n         */\r\n        public static &lt;S&gt; EditCell&lt;S, String&gt; createStringEditCell()\r\n        {\r\n            return new EditCell&lt;&gt;(IDENTITY_CONVERTER);\r\n        }\r\n    \r\n        // set the text of the text field and display the graphic\r\n        @Override\r\n        public void startEdit()\r\n        {\r\n            super.startEdit();\r\n            textField.setText(converter.toString(getItem()));\r\n            setContentDisplay(ContentDisplay.GRAPHIC_ONLY);\r\n            textField.requestFocus();\r\n        }\r\n    \r\n        // revert to text display\r\n        @Override\r\n        public void cancelEdit()\r\n        {\r\n            super.cancelEdit();\r\n            setContentDisplay(ContentDisplay.TEXT_ONLY);\r\n        }\r\n    \r\n        // commits the edit. Update property if possible and revert to text display\r\n        @Override\r\n        public void commitEdit(T item)\r\n        {\r\n    \r\n            // This block is necessary to support commit on losing focus, because the baked-in mechanism\r\n            // sets our editing state to false before we can intercept the loss of focus.\r\n            // The default commitEdit(...) method simply bails if we are not editing...\r\n            if (!isEditing() &amp;&amp; !item.equals(getItem())) {\r\n                TableView&lt;S&gt; table = getTableView();\r\n                if (table != null) {\r\n                    TableColumn&lt;S, T&gt; column = getTableColumn();\r\n                    CellEditEvent&lt;S, T&gt; event = new CellEditEvent&lt;&gt;(table,\r\n                            new TablePosition&lt;&gt;(table, getIndex(), column),\r\n                            TableColumn.editCommitEvent(), item);\r\n                    Event.fireEvent(column, event);\r\n                }\r\n            }\r\n    \r\n            if (item.equals(&quot;error&quot;)) {\r\n                setTextFill(Color.RED);\r\n            }\r\n            else {\r\n                setTextFill(Color.BLACK);\r\n            }\r\n    \r\n            super.commitEdit(item);\r\n    \r\n            setContentDisplay(ContentDisplay.TEXT_ONLY);\r\n        }\r\n    \r\n    }\r\n\r\n","title":"JavaFX - Combine two CellFactory - TextFieldTableCell.forTableColumn() and custom one","body":"<p>The key is to <code>extend</code> <code>TableCell</code> as @fabian suggested.</p>\n\n<blockquote>\n  <p>Main</p>\n</blockquote>\n\n<pre><code>import java.util.ArrayList;\nimport java.util.List;\nimport javafx.application.Application;\nimport javafx.beans.property.SimpleStringProperty;\nimport javafx.collections.FXCollections;\nimport javafx.scene.Scene;\nimport javafx.scene.control.TableCell;\nimport javafx.scene.control.TableColumn;\nimport javafx.scene.control.TableView;\nimport javafx.stage.Stage;\nimport javafx.util.Callback;\n\n/**\n *\n * @author blj0011\n */\npublic class JavaFXTestingGround extends Application\n{\n\n    /**\n     * @param args the command line arguments\n     */\n    public static void main(String[] args)\n    {\n        launch(args);\n    }\n\n    @Override\n    public void start(Stage primaryStage) throws Exception\n    {\n        List&lt;String&gt; test = new ArrayList&lt;&gt;();\n        test.add(\"done(green)\");\n        test.add(\"done(green)\");\n        test.add(\"fail(red)\");\n        test.add(\"done(green)\");\n\n        TableView&lt;String&gt; tableView = new TableView&lt;&gt;();\n        tableView.setColumnResizePolicy(TableView.UNCONSTRAINED_RESIZE_POLICY);\n        tableView.setEditable(true);\n\n        TableColumn&lt;String, String&gt; col = new TableColumn&lt;&gt;(\"Column\");\n        col.setCellValueFactory(data -&gt; new SimpleStringProperty(data.getValue()));\n        col.setCellFactory((param) -&gt; new CustomCellFactory());\n        //I want to apply a color based by value from cell\n\n        tableView.getColumns().add(col);\n\n        tableView.setItems(FXCollections.observableArrayList(test));\n\n        primaryStage.setScene(new Scene(tableView));\n\n        primaryStage.show();\n    }\n}\n</code></pre>\n\n<blockquote>\n  <p>CustomCellFactory</p>\n</blockquote>\n\n<pre><code>import javafx.application.Platform;\nimport javafx.scene.control.ContentDisplay;\nimport javafx.scene.control.TableCell;\nimport javafx.scene.control.TextField;\nimport javafx.scene.input.KeyCode;\nimport javafx.scene.paint.Color;\nimport javafx.scene.text.Text;\n\n/**\n *\n * @author blj0011\n */\npublic class CustomCellFactory&lt;T&gt; extends TableCell&lt;T, String&gt;\n{\n\n    TextField textField = new TextField();\n    Text text = new Text();\n\n    public CustomCellFactory()\n    {\n        textField.setOnKeyPressed(keyEvent -&gt; {\n            if (keyEvent.getCode() == KeyCode.ENTER) {\n                commitEdit(textField.getText());\n            }\n        });\n    }\n\n    @Override\n    public void commitEdit(String newValue)\n    {\n        super.commitEdit(newValue);\n        setContentDisplay(ContentDisplay.GRAPHIC_ONLY);\n    }\n\n    @Override\n    public void startEdit()\n    {\n        super.startEdit();\n        if (!isEmpty()) {\n            setGraphic(textField);\n            setContentDisplay(ContentDisplay.GRAPHIC_ONLY);\n            textField.setText(text.getText());\n            Platform.runLater(() -&gt; textField.requestFocus());\n        }\n    }\n\n    @Override\n    public void cancelEdit()\n    {\n        super.cancelEdit();\n        setContentDisplay(ContentDisplay.TEXT_ONLY);\n    }\n\n    @Override\n    protected void updateItem(String item, boolean empty)\n    {\n        super.updateItem(item, empty);\n\n        if (item == null || empty) {\n            setText(null);\n        }\n        else {\n            if (item.equals(\"error\")) {\n                text.setFill(Color.RED);\n            }\n            else {\n                text.setFill(Color.BLACK);\n            }\n\n            text.setText(item);\n            setGraphic(text);\n        }\n    }\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/xACGz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xACGz.png\" alt=\"enter image description here\"></a></p>\n\n<blockquote>\n  <p>Update: I found <a href=\"https://gist.github.com/james-d/be5bbd6255a4640a5357#file-editcell-java-L109\" rel=\"nofollow noreferrer\">This</a> while failing to live up to @kleopatra suggestion.</p>\n</blockquote>\n\n<p><strong>Main</strong></p>\n\n<pre><code>import java.util.ArrayList;\nimport java.util.List;\nimport javafx.application.Application;\nimport javafx.beans.property.SimpleStringProperty;\nimport javafx.collections.FXCollections;\nimport javafx.scene.Scene;\nimport javafx.scene.control.TableCell;\nimport javafx.scene.control.TableColumn;\nimport javafx.scene.control.TableView;\nimport javafx.stage.Stage;\nimport javafx.util.Callback;\n\n/**\n *\n * @author blj0011\n */\npublic class JavaFXTestingGround extends Application\n{\n\n    /**\n     * @param args the command line arguments\n     */\n    public static void main(String[] args)\n    {\n        launch(args);\n    }\n\n    @Override\n    public void start(Stage primaryStage) throws Exception\n    {\n        List&lt;String&gt; test = new ArrayList&lt;&gt;();\n        test.add(\"done(green)\");\n        test.add(\"done(green)\");\n        test.add(\"fail(red)\");\n        test.add(\"done(green)\");\n\n        TableView&lt;String&gt; tableView = new TableView&lt;&gt;();\n        tableView.setColumnResizePolicy(TableView.UNCONSTRAINED_RESIZE_POLICY);\n        tableView.setEditable(true);\n\n        TableColumn&lt;String, String&gt; col = new TableColumn&lt;&gt;(\"Column\");\n        col.setCellValueFactory(data -&gt; new SimpleStringProperty(data.getValue()));\n        col.setCellFactory(column -&gt; EditCell.createStringEditCell());\n        //I want to apply a color based by value from cell\n\n        tableView.getColumns().add(col);\n\n        tableView.setItems(FXCollections.observableArrayList(test));\n\n        primaryStage.setScene(new Scene(tableView));\n\n        primaryStage.show();\n    }\n}\n</code></pre>\n\n<p><strong>EditCell</strong></p>\n\n<pre><code>import javafx.event.Event;\nimport javafx.scene.control.ContentDisplay;\nimport javafx.scene.control.TableCell;\nimport javafx.scene.control.TableColumn;\nimport javafx.scene.control.TableColumn.CellEditEvent;\nimport javafx.scene.control.TablePosition;\nimport javafx.scene.control.TableView;\nimport javafx.scene.control.TextField;\nimport javafx.scene.input.KeyEvent;\nimport javafx.scene.paint.Color;\nimport javafx.util.StringConverter;\n\npublic class EditCell&lt;S, T&gt; extends TableCell&lt;S, T&gt;\n{\n\n    // Text field for editing\n    // TODO: allow this to be a plugable control.\n    private final TextField textField = new TextField();\n\n    // Converter for converting the text in the text field to the user type, and vice-versa:\n    private final StringConverter&lt;T&gt; converter;\n\n    public EditCell(StringConverter&lt;T&gt; converter)\n    {\n        this.converter = converter;\n\n        itemProperty().addListener((obx, oldItem, newItem) -&gt; {\n            if (newItem == null) {\n                setText(null);\n            }\n            else {\n                setText(converter.toString(newItem));\n            }\n        });\n        setGraphic(textField);\n        setContentDisplay(ContentDisplay.TEXT_ONLY);\n\n        textField.setOnAction(evt -&gt; {\n            commitEdit(this.converter.fromString(textField.getText()));\n        });\n        textField.focusedProperty().addListener((obs, wasFocused, isNowFocused) -&gt; {\n            if (!isNowFocused) {\n                commitEdit(this.converter.fromString(textField.getText()));\n            }\n        });\n        textField.addEventFilter(KeyEvent.KEY_PRESSED, event -&gt; {\n            if (null != event.getCode()) {\n                switch (event.getCode()) {\n                    case ESCAPE:\n                        textField.setText(converter.toString(getItem()));\n                        cancelEdit();\n                        event.consume();\n                        break;\n                    case RIGHT:\n                        getTableView().getSelectionModel().selectRightCell();\n                        event.consume();\n                        break;\n                    case LEFT:\n                        getTableView().getSelectionModel().selectLeftCell();\n                        event.consume();\n                        break;\n                    case UP:\n                        getTableView().getSelectionModel().selectAboveCell();\n                        event.consume();\n                        break;\n                    case DOWN:\n                        getTableView().getSelectionModel().selectBelowCell();\n                        event.consume();\n                        break;\n                    default:\n                        break;\n                }\n            }\n        });\n    }\n\n    /**\n     * Convenience converter that does nothing (converts Strings to themselves\n     * and vice-versa...).\n     */\n    public static final StringConverter&lt;String&gt; IDENTITY_CONVERTER = new StringConverter&lt;String&gt;()\n    {\n\n        @Override\n        public String toString(String object)\n        {\n            return object;\n        }\n\n        @Override\n        public String fromString(String string)\n        {\n            return string;\n        }\n\n    };\n\n    /**\n     * Convenience method for creating an EditCell for a String value.\n     *\n     * @param &lt;S&gt;\n     * @return\n     */\n    public static &lt;S&gt; EditCell&lt;S, String&gt; createStringEditCell()\n    {\n        return new EditCell&lt;&gt;(IDENTITY_CONVERTER);\n    }\n\n    // set the text of the text field and display the graphic\n    @Override\n    public void startEdit()\n    {\n        super.startEdit();\n        textField.setText(converter.toString(getItem()));\n        setContentDisplay(ContentDisplay.GRAPHIC_ONLY);\n        textField.requestFocus();\n    }\n\n    // revert to text display\n    @Override\n    public void cancelEdit()\n    {\n        super.cancelEdit();\n        setContentDisplay(ContentDisplay.TEXT_ONLY);\n    }\n\n    // commits the edit. Update property if possible and revert to text display\n    @Override\n    public void commitEdit(T item)\n    {\n\n        // This block is necessary to support commit on losing focus, because the baked-in mechanism\n        // sets our editing state to false before we can intercept the loss of focus.\n        // The default commitEdit(...) method simply bails if we are not editing...\n        if (!isEditing() &amp;&amp; !item.equals(getItem())) {\n            TableView&lt;S&gt; table = getTableView();\n            if (table != null) {\n                TableColumn&lt;S, T&gt; column = getTableColumn();\n                CellEditEvent&lt;S, T&gt; event = new CellEditEvent&lt;&gt;(table,\n                        new TablePosition&lt;&gt;(table, getIndex(), column),\n                        TableColumn.editCommitEvent(), item);\n                Event.fireEvent(column, event);\n            }\n        }\n\n        if (item.equals(\"error\")) {\n            setTextFill(Color.RED);\n        }\n        else {\n            setTextFill(Color.BLACK);\n        }\n\n        super.commitEdit(item);\n\n        setContentDisplay(ContentDisplay.TEXT_ONLY);\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11827645,"reputation":3065,"user_id":9011164,"accept_rate":50,"display_name":"KunLun"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1567001923,"creation_date":1567001923,"answer_id":57694541,"question_id":57677244,"body_markdown":"I finally found I can use `TextFieldTableCell.forTableColumn()` with customization.\r\n\r\nJust need to override `TextFieldTableCell`.\r\n\r\n\tprivate static class CustomCell extends TextFieldTableCell&lt;String, String&gt;{\r\n\r\n\t\t@Override\r\n\t\tpublic void updateItem(String item, boolean empty){\r\n\r\n\t\t\tsuper.updateItem(item, empty);\r\n\r\n            if(item == null || empty) {\r\n                setText(null);\r\n                return;\r\n            }\r\n\r\n\t\t\tif(!isEmpty()){\r\n\r\n\t\t\t\tif(item.equals(&quot;error&quot;)){\r\n\r\n\t\t\t\t\tthis.setTextFill(Color.RED);\r\n\t\t\t\t\tsetText(item);\r\n\r\n\t\t\t\t}else{\r\n\r\n\t\t\t\t\tthis.setTextFill(Color.BLACK);\r\n\t\t\t\t\tsetText(item);\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\nI was fixed on idea that `setCellFactory` get as parameter a `CallBack`.\r\n\r\nSo I was tried a lot of ways to get a `CallBack` which returns a `TableCell`\r\n\r\nAfter I saw the answer of @Sedrick.\r\n\r\nI found I can send an lambda implementation like: `setCellFactory(e -&gt; new CustomCell())`.\r\n\r\nThanks to @Sedrick and @kleopatra.","title":"JavaFX - Combine two CellFactory - TextFieldTableCell.forTableColumn() and custom one","body":"<p>I finally found I can use <code>TextFieldTableCell.forTableColumn()</code> with customization.</p>\n\n<p>Just need to override <code>TextFieldTableCell</code>.</p>\n\n<pre><code>private static class CustomCell extends TextFieldTableCell&lt;String, String&gt;{\n\n    @Override\n    public void updateItem(String item, boolean empty){\n\n        super.updateItem(item, empty);\n\n        if(item == null || empty) {\n            setText(null);\n            return;\n        }\n\n        if(!isEmpty()){\n\n            if(item.equals(\"error\")){\n\n                this.setTextFill(Color.RED);\n                setText(item);\n\n            }else{\n\n                this.setTextFill(Color.BLACK);\n                setText(item);\n\n            }\n\n        }\n\n    }\n\n}\n</code></pre>\n\n<p>I was fixed on idea that <code>setCellFactory</code> get as parameter a <code>CallBack</code>.</p>\n\n<p>So I was tried a lot of ways to get a <code>CallBack</code> which returns a <code>TableCell</code></p>\n\n<p>After I saw the answer of @Sedrick.</p>\n\n<p>I found I can send an lambda implementation like: <code>setCellFactory(e -&gt; new CustomCell())</code>.</p>\n\n<p>Thanks to @Sedrick and @kleopatra.</p>\n"},{"tags":[],"owner":{"account_id":13575931,"reputation":11,"user_id":19592205,"display_name":"Жорж Парадокс"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658390671,"creation_date":1658388869,"answer_id":73062304,"question_id":57677244,"body_markdown":"    import javafx.geometry.Pos;\r\n    import javafx.scene.control.TableCell;\r\n    import javafx.scene.control.TableColumn;\r\n    import javafx.scene.control.cell.TextFieldTableCell;\r\n    import javafx.scene.layout.*;\r\n    import javafx.scene.paint.Color;\r\n    import javafx.util.Callback;\r\n    import javafx.util.StringConverter;\r\n\r\n    class className {\r\n        private void initColumnTableValue() {\r\n            TableColumn&lt;User, Number&gt; columnId = new TableColumn&lt;&gt;(&quot;ID&quot;);\r\n            columnId.setCellFactory(getTextFieldCellFactoryId());\r\n        }\r\n    \r\n    \r\n        /*\r\n         * Returns the factory to a cell with a text field for editing\r\n         * but with the ability to customize cells\r\n         */\r\n        private Callback&lt;TableColumn&lt;User, Number&gt;, TableCell&lt;User, Number&gt;&gt; getTextFieldCellFactoryId() {\r\n            return CustomTextFieldTableCell.&lt;User, Number&gt;forTableColumn(\r\n                    new StringConverter&lt;Number&gt;() {\r\n                        @Override\r\n                        public String toString(Number number) {\r\n                            return number == null ? &quot;&quot; : number.toString();\r\n                        }\r\n    \r\n                        @Override\r\n                        public Number fromString(String s) {\r\n                            try {\r\n                                return Integer.valueOf(s);\r\n                            } catch (Exception e) {\r\n                                return null;\r\n                            }\r\n                        }\r\n                    }\r\n            );\r\n        }\r\n    }\r\n    \r\n    /**\r\n     * Creates a changed factory for the production of editable cells, \r\n     * but with the ability to customize cells\r\n     */\r\n    public class CustomTextFieldTableCell extends TextFieldTableCell&lt;User, Number&gt; {\r\n        public CustomTextFieldTableCell(StringConverter&lt;Number&gt; var0) {super(var0);}\r\n        { setAlignment(Pos.TOP_CENTER); }\r\n    \r\n        @Override\r\n        public void updateItem(Number value, boolean empty){\r\n            super.updateItem(value, empty);\r\n            if (value == null || empty)\r\n                setText(&quot;&quot;);\r\n            else {\r\n                if ((int)value % 2 == 0)\r\n                    setBorder(new Border(new BorderStroke(Color.BLUE, BorderStrokeStyle.DASHED,\r\n                            new CornerRadii(4), new BorderWidths(1))));\r\n                setText(value.toString());\r\n            }\r\n        }\r\n    \r\n        public static &lt;User, Number&gt; Callback&lt;TableColumn&lt;User, Number&gt;, TableCell&lt;User, Number&gt;&gt; forTableColumn(StringConverter&lt;Number&gt; var0) {\r\n            return new Callback&lt;TableColumn&lt;User, Number&gt;, TableCell&lt;User, Number&gt;&gt;() {\r\n                @Override\r\n                public TableCell&lt;User, Number&gt; call(TableColumn&lt;User, Number&gt; var1) {\r\n                    return (TableCell&lt;User, Number&gt;) new CustomTextFieldTableCell((StringConverter&lt;java.lang.Number&gt;) var0);\r\n                }\r\n            };\r\n        }\r\n    }","title":"JavaFX - Combine two CellFactory - TextFieldTableCell.forTableColumn() and custom one","body":"<pre><code>import javafx.geometry.Pos;\nimport javafx.scene.control.TableCell;\nimport javafx.scene.control.TableColumn;\nimport javafx.scene.control.cell.TextFieldTableCell;\nimport javafx.scene.layout.*;\nimport javafx.scene.paint.Color;\nimport javafx.util.Callback;\nimport javafx.util.StringConverter;\n\nclass className {\n    private void initColumnTableValue() {\n        TableColumn&lt;User, Number&gt; columnId = new TableColumn&lt;&gt;(&quot;ID&quot;);\n        columnId.setCellFactory(getTextFieldCellFactoryId());\n    }\n\n\n    /*\n     * Returns the factory to a cell with a text field for editing\n     * but with the ability to customize cells\n     */\n    private Callback&lt;TableColumn&lt;User, Number&gt;, TableCell&lt;User, Number&gt;&gt; getTextFieldCellFactoryId() {\n        return CustomTextFieldTableCell.&lt;User, Number&gt;forTableColumn(\n                new StringConverter&lt;Number&gt;() {\n                    @Override\n                    public String toString(Number number) {\n                        return number == null ? &quot;&quot; : number.toString();\n                    }\n\n                    @Override\n                    public Number fromString(String s) {\n                        try {\n                            return Integer.valueOf(s);\n                        } catch (Exception e) {\n                            return null;\n                        }\n                    }\n                }\n        );\n    }\n}\n\n/**\n * Creates a changed factory for the production of editable cells, \n * but with the ability to customize cells\n */\npublic class CustomTextFieldTableCell extends TextFieldTableCell&lt;User, Number&gt; {\n    public CustomTextFieldTableCell(StringConverter&lt;Number&gt; var0) {super(var0);}\n    { setAlignment(Pos.TOP_CENTER); }\n\n    @Override\n    public void updateItem(Number value, boolean empty){\n        super.updateItem(value, empty);\n        if (value == null || empty)\n            setText(&quot;&quot;);\n        else {\n            if ((int)value % 2 == 0)\n                setBorder(new Border(new BorderStroke(Color.BLUE, BorderStrokeStyle.DASHED,\n                        new CornerRadii(4), new BorderWidths(1))));\n            setText(value.toString());\n        }\n    }\n\n    public static &lt;User, Number&gt; Callback&lt;TableColumn&lt;User, Number&gt;, TableCell&lt;User, Number&gt;&gt; forTableColumn(StringConverter&lt;Number&gt; var0) {\n        return new Callback&lt;TableColumn&lt;User, Number&gt;, TableCell&lt;User, Number&gt;&gt;() {\n            @Override\n            public TableCell&lt;User, Number&gt; call(TableColumn&lt;User, Number&gt; var1) {\n                return (TableCell&lt;User, Number&gt;) new CustomTextFieldTableCell((StringConverter&lt;java.lang.Number&gt;) var0);\n            }\n        };\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":11827645,"reputation":3065,"user_id":9011164,"accept_rate":50,"display_name":"KunLun"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1515,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1658390671,"creation_date":1566917231,"question_id":57677244,"body_markdown":"I have a TableColumn:\r\n\r\n    TableColumn&lt;Foo, String&gt; colStatus = new TableColumn(&quot;Status&quot;);\r\n\tcolStatus.setCellValueFactory(new PropertyValueFactory&lt;&gt;(&quot;statusElement&quot;));\r\n\r\nOn this table I want to apply this cellFactory `TextFieldTableCell.forTableColumn()` which will make cell editable.\r\n\r\nBut I also want to combine this one with a custom cellFactory:\r\n\r\n    colStatus.setCellFactory(new Callback&lt;&gt;() {\r\n    \r\n    \tpublic TableCell&lt;Foo, String&gt; call(TableColumn param) {\r\n    \r\n    \t\treturn new TableCell&lt;&gt;() {\r\n    \r\n    \t\t\t@Override\r\n    \t\t\tpublic void updateItem(String item, boolean empty) {\r\n    \r\n    \t\t\t\tsuper.updateItem(item, empty);\r\n    \r\n    \t\t\t\tif (!isEmpty()){\r\n    \r\n    \t\t\t\t\tif(item.equals(&quot;error&quot;)){\r\n    \r\n    \t\t\t\t\t\tthis.setTextFill(Color.RED);\r\n    \t\t\t\t\t\tsetText(item);\r\n    \t\t\t\t\t\r\n    \t\t\t\t\t}else{\r\n    \t\t\t\t\t\r\n    \t\t\t\t\t\tthis.setTextFill(Color.Black);\r\n    \t\t\t\t\t\tsetText(item);\r\n    \t\t\t\t\t\t\r\n    \t\t\t\t\t}\r\n    \r\n    \t\t\t\t}\r\n    \r\n    \t\t\t}\r\n    \t\t};\r\n    \t}\r\n    \r\n    });\r\n\r\nThis cell factory sets text color of cell, based by cell value.\r\n\r\nBut I don&#39;t know how to make the cell editable but also to customize his color, based on value.\r\n\r\nHere is MCVE:\r\n\r\n    @Override\r\n\tpublic void start(Stage primaryStage){\r\n\r\n\t\tList&lt;String&gt; test = new ArrayList&lt;&gt;();\r\n\t\ttest.add(&quot;done(green)&quot;);\r\n\t\ttest.add(&quot;done(green)&quot;);\r\n\t\ttest.add(&quot;fail(red)&quot;);\r\n\t\ttest.add(&quot;done(green)&quot;);\r\n\r\n\t\tTableView&lt;String&gt; tableView = new TableView&lt;&gt;();\r\n\t\ttableView.setColumnResizePolicy(TableView.UNCONSTRAINED_RESIZE_POLICY);\r\n\t\ttableView.setEditable(true);\r\n\r\n\t\tTableColumn&lt;String, String&gt; col = new TableColumn&lt;&gt;(&quot;Column&quot;);\r\n\t\tcol.setCellValueFactory(data -&gt; new SimpleStringProperty(data.getValue()));\r\n\t\tcol.setCellFactory(TextFieldTableCell.forTableColumn());\r\n\t\t//I want to apply a color based by value from cell\r\n\r\n\t\ttableView.getColumns().add(col);\r\n\r\n\t\ttableView.setItems(FXCollections.observableArrayList(test));\r\n\r\n\t\tprimaryStage.setScene(new Scene(tableView));\r\n\r\n\t\tprimaryStage.show();\r\n\r\n\t}","title":"JavaFX - Combine two CellFactory - TextFieldTableCell.forTableColumn() and custom one","body":"<p>I have a TableColumn:</p>\n\n<pre><code>TableColumn&lt;Foo, String&gt; colStatus = new TableColumn(\"Status\");\ncolStatus.setCellValueFactory(new PropertyValueFactory&lt;&gt;(\"statusElement\"));\n</code></pre>\n\n<p>On this table I want to apply this cellFactory <code>TextFieldTableCell.forTableColumn()</code> which will make cell editable.</p>\n\n<p>But I also want to combine this one with a custom cellFactory:</p>\n\n<pre><code>colStatus.setCellFactory(new Callback&lt;&gt;() {\n\n    public TableCell&lt;Foo, String&gt; call(TableColumn param) {\n\n        return new TableCell&lt;&gt;() {\n\n            @Override\n            public void updateItem(String item, boolean empty) {\n\n                super.updateItem(item, empty);\n\n                if (!isEmpty()){\n\n                    if(item.equals(\"error\")){\n\n                        this.setTextFill(Color.RED);\n                        setText(item);\n\n                    }else{\n\n                        this.setTextFill(Color.Black);\n                        setText(item);\n\n                    }\n\n                }\n\n            }\n        };\n    }\n\n});\n</code></pre>\n\n<p>This cell factory sets text color of cell, based by cell value.</p>\n\n<p>But I don't know how to make the cell editable but also to customize his color, based on value.</p>\n\n<p>Here is MCVE:</p>\n\n<pre><code>@Override\npublic void start(Stage primaryStage){\n\n    List&lt;String&gt; test = new ArrayList&lt;&gt;();\n    test.add(\"done(green)\");\n    test.add(\"done(green)\");\n    test.add(\"fail(red)\");\n    test.add(\"done(green)\");\n\n    TableView&lt;String&gt; tableView = new TableView&lt;&gt;();\n    tableView.setColumnResizePolicy(TableView.UNCONSTRAINED_RESIZE_POLICY);\n    tableView.setEditable(true);\n\n    TableColumn&lt;String, String&gt; col = new TableColumn&lt;&gt;(\"Column\");\n    col.setCellValueFactory(data -&gt; new SimpleStringProperty(data.getValue()));\n    col.setCellFactory(TextFieldTableCell.forTableColumn());\n    //I want to apply a color based by value from cell\n\n    tableView.getColumns().add(col);\n\n    tableView.setItems(FXCollections.observableArrayList(test));\n\n    primaryStage.setScene(new Scene(tableView));\n\n    primaryStage.show();\n\n}\n</code></pre>\n"},{"tags":["java","apache-kafka","kafka-consumer-api"],"answers":[{"tags":[],"owner":{"account_id":1653300,"reputation":968,"user_id":1523450,"display_name":"cdr89"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1658336912,"creation_date":1658335872,"answer_id":73055447,"question_id":73055371,"body_markdown":"From the Spring-Kafka API, in the Kafka message you should have an header called &quot;RECEIVED_TOPIC&quot; that contains the information you are looking for.\r\n\r\nCheck out this link:\r\nhttps://github.com/spring-projects/spring-kafka/issues/290\r\n","title":"Get the name of the Kafka topic from a consumed message","body":"<p>From the Spring-Kafka API, in the Kafka message you should have an header called &quot;RECEIVED_TOPIC&quot; that contains the information you are looking for.</p>\n<p>Check out this link:\n<a href=\"https://github.com/spring-projects/spring-kafka/issues/290\" rel=\"nofollow noreferrer\">https://github.com/spring-projects/spring-kafka/issues/290</a></p>\n"},{"tags":[],"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1658336974,"creation_date":1658336974,"answer_id":73055664,"question_id":73055371,"body_markdown":"From the Java API, you can access [`ConsumerRecord.topic()`](https://kafka.apache.org/32/javadoc/org/apache/kafka/clients/consumer/ConsumerRecord.html#topic()) regardless of how you are subscribing to the data. \r\n\r\n&gt; I would like to grab 123_456 and 789_10112\r\n\r\nGiven the string of the topic, use `substring` or `split(&quot;_&quot;, 1)` methods","title":"Get the name of the Kafka topic from a consumed message","body":"<p>From the Java API, you can access <a href=\"https://kafka.apache.org/32/javadoc/org/apache/kafka/clients/consumer/ConsumerRecord.html#topic()\" rel=\"nofollow noreferrer\"><code>ConsumerRecord.topic()</code></a> regardless of how you are subscribing to the data.</p>\n<blockquote>\n<p>I would like to grab 123_456 and 789_10112</p>\n</blockquote>\n<p>Given the string of the topic, use <code>substring</code> or <code>split(&quot;_&quot;, 1)</code> methods</p>\n"},{"tags":[],"owner":{"account_id":6475519,"reputation":4496,"user_id":5014221,"accept_rate":71,"display_name":"Ashish Patil"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1658390231,"creation_date":1658337524,"answer_id":73055763,"question_id":73055371,"body_markdown":"Though other answers are correct, just explaining a little bit further :\r\n\r\n\r\nLets say, your key value pair is of type `String, String` then :\r\n\r\n    ConsumerRecords&lt;String,String&gt; recs = kafkaConsumer.poll();\r\n    \r\n    Iterator&lt;ConsumerRecord&lt;String,String&gt;&gt; itr= recs.iterator();\r\n    while(itr.hasNext()){\r\n       String topicName = itr.next().topic(); \r\n        //then do split operation with topic name.\r\n    }","title":"Get the name of the Kafka topic from a consumed message","body":"<p>Though other answers are correct, just explaining a little bit further :</p>\n<p>Lets say, your key value pair is of type <code>String, String</code> then :</p>\n<pre><code>ConsumerRecords&lt;String,String&gt; recs = kafkaConsumer.poll();\n\nIterator&lt;ConsumerRecord&lt;String,String&gt;&gt; itr= recs.iterator();\nwhile(itr.hasNext()){\n   String topicName = itr.next().topic(); \n    //then do split operation with topic name.\n}\n</code></pre>\n"}],"owner":{"account_id":5068854,"reputation":3050,"user_id":4068218,"accept_rate":7,"display_name":"Hari Rao"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":878,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73055447,"answer_count":3,"score":0,"last_activity_date":1658390231,"creation_date":1658335537,"question_id":73055371,"body_markdown":"1. I am listening to multiple Kafka topics using regex pattern \r\n 2. The name of the topics for eg **worker_123_456_topic**, \r\n    **worker_789_10112_topic** etc \r\n 3. I would like to grab **123_456** and **789_10112** \r\n 4. Hence is there anyway to know the name of the topic from the message consumed?\r\n\r\nAny leads are much appreciated! Thanks\r\n  \r\n","title":"Get the name of the Kafka topic from a consumed message","body":"<ol>\n<li>I am listening to multiple Kafka topics using regex pattern</li>\n<li>The name of the topics for eg <strong>worker_123_456_topic</strong>,\n<strong>worker_789_10112_topic</strong> etc</li>\n<li>I would like to grab <strong>123_456</strong> and <strong>789_10112</strong></li>\n<li>Hence is there anyway to know the name of the topic from the message consumed?</li>\n</ol>\n<p>Any leads are much appreciated! Thanks</p>\n"},{"tags":["java","spring","hessian"],"owner":{"account_id":15857379,"reputation":129,"user_id":11441432,"display_name":"Marvin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1658389405,"creation_date":1658389405,"question_id":73062420,"body_markdown":"I have a legacy Spring Boot Application using the HessianServiceExporter. The application uses serializable DTOs, which use a different naming convention than usual. This throws Sonar errors which I would like to solve similar to the @JsonProperty Annotation. The annotation does not work, which was expected. \r\n```java\r\n    private static final long serialVersionUID = 1L;\r\n\r\n    private String _uniqueName;\r\n    private String _damageCategoryText;\r\n```\r\nIs there a way to rename these fields without changing the external representation?","title":"@JsonProperty alternative in Spring Hessian","body":"<p>I have a legacy Spring Boot Application using the HessianServiceExporter. The application uses serializable DTOs, which use a different naming convention than usual. This throws Sonar errors which I would like to solve similar to the @JsonProperty Annotation. The annotation does not work, which was expected.</p>\n<pre class=\"lang-java prettyprint-override\"><code>    private static final long serialVersionUID = 1L;\n\n    private String _uniqueName;\n    private String _damageCategoryText;\n</code></pre>\n<p>Is there a way to rename these fields without changing the external representation?</p>\n"},{"tags":["java","spring","hibernate","jpa","persistence"],"answers":[{"tags":[],"owner":{"account_id":1038596,"reputation":34548,"user_id":1045142,"accept_rate":67,"display_name":"Simon Martinelli"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1658389079,"creation_date":1658386460,"answer_id":73061883,"question_id":73061356,"body_markdown":"Have a look at the class `MergePersistenceUnitManager`\r\n\r\nThere they merge all the `persistence-*.xml` files and then use `DefaultPersistenceUnitManager` from Spring to programmatically configure JPA.\r\n","title":"How to spread the same persistence unit over multiple files?","body":"<p>Have a look at the class <code>MergePersistenceUnitManager</code></p>\n<p>There they merge all the <code>persistence-*.xml</code> files and then use <code>DefaultPersistenceUnitManager</code> from Spring to programmatically configure JPA.</p>\n"}],"owner":{"account_id":25851996,"reputation":13,"user_id":19586211,"display_name":"slarkwithskadi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":87,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73061883,"answer_count":1,"score":0,"last_activity_date":1658389079,"creation_date":1658383234,"question_id":73061356,"body_markdown":"I have single persistence.xml file in resources\\META-INF directory. Provider class, database connection settings, native queries are in this file. I&#39;m reading BroadlearCommerce sources to study spring and hibernate better and noticed that they dont&#39; have persistence.xml file at all. Instead, they have multiple files like persistence-common.xml, persistence-cms.xml etc.\r\n\r\nInside each of them there is persistence-unit name=&quot;blPU&quot;, that mean persistence unit with the same name exists in multiple files. First I thought that hibernate can detect them and join together info from the same PU because of &quot;persistence-&quot; prefix, but it turned out it can&#39;t, when I tried to do the same trick and placed my native queries into a separate file.\r\n\r\nProbably it&#39;s a spring or some else library feature. Could you tell me how can I achieve this?","title":"How to spread the same persistence unit over multiple files?","body":"<p>I have single persistence.xml file in resources\\META-INF directory. Provider class, database connection settings, native queries are in this file. I'm reading BroadlearCommerce sources to study spring and hibernate better and noticed that they dont' have persistence.xml file at all. Instead, they have multiple files like persistence-common.xml, persistence-cms.xml etc.</p>\n<p>Inside each of them there is persistence-unit name=&quot;blPU&quot;, that mean persistence unit with the same name exists in multiple files. First I thought that hibernate can detect them and join together info from the same PU because of &quot;persistence-&quot; prefix, but it turned out it can't, when I tried to do the same trick and placed my native queries into a separate file.</p>\n<p>Probably it's a spring or some else library feature. Could you tell me how can I achieve this?</p>\n"},{"tags":["java","spring-boot","reactive-programming"],"comments":[{"owner":{"account_id":151394,"reputation":52351,"user_id":365237,"accept_rate":96,"display_name":"eis"},"score":0,"creation_date":1613420757,"post_id":66214586,"comment_id":117065110,"body_markdown":"you&#39;ve anonymized the code quite well so it&#39;s not really possible to figure out what is the purpose of this code. however, you should try converting the initial parameter list to reactive list, then flatmap those items to executions and combine the results. but going into more details than that is not possible with this information... we don&#39;t know what are these b, c, f objects for.","body":"you&#39;ve anonymized the code quite well so it&#39;s not really possible to figure out what is the purpose of this code. however, you should try converting the initial parameter list to reactive list, then flatmap those items to executions and combine the results. but going into more details than that is not possible with this information... we don&#39;t know what are these b, c, f objects for."}],"answers":[{"tags":[],"owner":{"account_id":11799867,"reputation":11,"user_id":8633818,"display_name":"Sandeep Chebrolu"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1658388952,"creation_date":1658140702,"answer_id":73020970,"question_id":66214586,"body_markdown":"`Mono.block()` will return the response after the computation is done.\r\n\r\nBelow code should work.\r\n\r\n    return Mono.just(object2).block();\r\n\r\n","title":"How i can return a response if it depends of a Mono object?","body":"<p><code>Mono.block()</code> will return the response after the computation is done.</p>\n<p>Below code should work.</p>\n<pre><code>return Mono.just(object2).block();\n</code></pre>\n"}],"owner":{"account_id":11766701,"reputation":123,"user_id":9910648,"display_name":"Juan Sanchez"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":514,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1658388952,"creation_date":1613418900,"question_id":66214586,"body_markdown":"I am new with reactive programing and i need help to understeand this scenario.\r\n    \r\n    @autowired\r\n    private e;\r\n\r\n    private Mono&lt;b&gt; method1(list&lt;a&gt; object1){\r\n       \r\n      b object2 = new b();\r\n      c object3 = new c();\r\n      f object5 = new f();\r\n    \r\n      for (a obj : object1) {\r\n           Mono&lt;d&gt; object4 = e.getD(obj.getSomething(), obj.getSomething2());\r\n          //I need stop this mapping when a condition is Meet and continue the logic downstream \r\n           object4.map(mapper-&gt;{\r\n                int status= mapper.getStatus();\r\n                if(status == 200){\r\n                    object2.setSomethingElse(mapper.getValue1());\r\n                    object3.setSomethingElse(mapper.getValue2());\r\n                   //do something and stop execution\r\n                    object5.setSomethingElse2(mapper.getValue3());\r\n                }\r\n                //if that condition is not meet then continue\r\n                //more logic doing other set to other values of object2 and 3\r\n           });\r\n\r\n      }\r\n      object3.setF(object5);\r\n      object2.setB(object3);\r\n      return Mono.just(object2);\r\n    }\r\n\r\nthe problem is that when i map into the loop i need to return a response but i dont want do it in that moment i want that the loop ends mapping all values of the dependencies objects and then continue the execution of the method. i hope someone understeand me. I repeat i am new with reactive programing so i dont know if i doing something wrong.","title":"How i can return a response if it depends of a Mono object?","body":"<p>I am new with reactive programing and i need help to understeand this scenario.</p>\n<pre><code>@autowired\nprivate e;\n\nprivate Mono&lt;b&gt; method1(list&lt;a&gt; object1){\n   \n  b object2 = new b();\n  c object3 = new c();\n  f object5 = new f();\n\n  for (a obj : object1) {\n       Mono&lt;d&gt; object4 = e.getD(obj.getSomething(), obj.getSomething2());\n      //I need stop this mapping when a condition is Meet and continue the logic downstream \n       object4.map(mapper-&gt;{\n            int status= mapper.getStatus();\n            if(status == 200){\n                object2.setSomethingElse(mapper.getValue1());\n                object3.setSomethingElse(mapper.getValue2());\n               //do something and stop execution\n                object5.setSomethingElse2(mapper.getValue3());\n            }\n            //if that condition is not meet then continue\n            //more logic doing other set to other values of object2 and 3\n       });\n\n  }\n  object3.setF(object5);\n  object2.setB(object3);\n  return Mono.just(object2);\n}\n</code></pre>\n<p>the problem is that when i map into the loop i need to return a response but i dont want do it in that moment i want that the loop ends mapping all values of the dependencies objects and then continue the execution of the method. i hope someone understeand me. I repeat i am new with reactive programing so i dont know if i doing something wrong.</p>\n"},{"tags":["java","database","hibernate","postgresql","orm"],"answers":[{"tags":[],"owner":{"account_id":1012936,"reputation":145168,"user_id":1025118,"accept_rate":100,"display_name":"Vlad Mihalcea"},"down_vote_count":0,"up_vote_count":16,"is_accepted":true,"score":16,"last_activity_date":1658388907,"creation_date":1431812784,"answer_id":30281095,"question_id":30280683,"body_markdown":"The [`hbmddl`](https://vladmihalcea.com/hibernate-hbm2ddl-auto-schema/) tool can only create tables for an existing schema, and it can&#39;t create a schema for you. The database must exist prior to running the tool. That&#39;s because a database must be created by an administrator, and it should get an owner assigned.\r\n\r\nBecause in most applications, the application can only access a database role with restrictive privileges, there&#39;s no need for such a feature.\r\n\r\nPostgreSQL doesn&#39;t support creating the database on-the-fly, from the connection URL. You can add an `InitializingBean` at application startup connecting to the database server using the administrator account and the default PostgreSQL database and issue a `CREATE DATABASE` if the application DB doesn&#39;t exist.\r\n\r\nOr use Testcontainers to bootstrap the DB in Docker, [like this](https://www.testcontainers.org/modules/databases/jdbc/).","title":"Create PostgreSQL database on the fly using Hibernate even if the DB doesn&#39;t exist","body":"<p>The <a href=\"https://vladmihalcea.com/hibernate-hbm2ddl-auto-schema/\" rel=\"nofollow noreferrer\"><code>hbmddl</code></a> tool can only create tables for an existing schema, and it can't create a schema for you. The database must exist prior to running the tool. That's because a database must be created by an administrator, and it should get an owner assigned.</p>\n<p>Because in most applications, the application can only access a database role with restrictive privileges, there's no need for such a feature.</p>\n<p>PostgreSQL doesn't support creating the database on-the-fly, from the connection URL. You can add an <code>InitializingBean</code> at application startup connecting to the database server using the administrator account and the default PostgreSQL database and issue a <code>CREATE DATABASE</code> if the application DB doesn't exist.</p>\n<p>Or use Testcontainers to bootstrap the DB in Docker, <a href=\"https://www.testcontainers.org/modules/databases/jdbc/\" rel=\"nofollow noreferrer\">like this</a>.</p>\n"}],"owner":{"account_id":5080543,"reputation":2464,"user_id":4076806,"accept_rate":88,"display_name":"Ueli Hofstetter"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":14176,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":30281095,"answer_count":1,"score":4,"last_activity_date":1658388907,"creation_date":1431809738,"question_id":30280683,"body_markdown":"Using H2, \r\n\r\n    Environment.HBM2DDL_AUTO, &quot;create&quot;\r\n\r\ncreates the database if it does not exist yet.\r\n\r\nHowever, in Postgres, the non existing DB is not created and thus an exception which says something like &quot;DB does not exist&quot; is thrown. Is there a way to configure Postgres to create a non existing database on demand? \r\n\r\nThe following configuration files can be used to reproduce the problem:\r\n\r\nWorks fine using H2:\r\n\r\n    package test.postgressql;\r\n    \r\n    import java.util.Properties;\r\n    \r\n    import javax.sql.DataSource;\r\n    \r\n    import org.hibernate.cfg.Environment;\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.context.annotation.Bean;\r\n    import org.springframework.context.annotation.ComponentScan;\r\n    import org.springframework.context.annotation.Configuration;\r\n    import org.springframework.context.annotation.PropertySource;\r\n    import org.springframework.data.jpa.repository.config.EnableJpaRepositories;\r\n    import org.springframework.jdbc.datasource.DriverManagerDataSource;\r\n    import org.springframework.orm.hibernate4.HibernateExceptionTranslator;\r\n    import org.springframework.orm.jpa.JpaTransactionManager;\r\n    import org.springframework.orm.jpa.JpaVendorAdapter;\r\n    import org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean;\r\n    import org.springframework.orm.jpa.vendor.Database;\r\n    import org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter;\r\n    import org.springframework.transaction.PlatformTransactionManager;\r\n    import org.springframework.transaction.annotation.EnableTransactionManagement;\r\n    \r\n    @Configuration\r\n    @PropertySource(&quot;file:C:/springconfig/qpmlib.properties&quot;)\r\n    @ComponentScan(basePackages = {&quot;test.postgressql&quot;})\r\n    @EnableJpaRepositories(basePackages = { &quot;test.postgressql&quot; })\r\n    @EnableTransactionManagement\r\n    public abstract class H2DBConfig {\r\n    \r\n    \t@Autowired\r\n    \torg.springframework.core.env.Environment env;\r\n    \r\n    \tpublic static final String DB_NAME = getNewDBName();\r\n    \r\n    \t@Bean\r\n    \tpublic DataSource dataSource() {\r\n    \t\tDriverManagerDataSource dmds = new DriverManagerDataSource();\r\n    \t\tdmds.setDriverClassName(&quot;org.h2.Driver&quot;);\r\n    \t\tdmds.setUrl(&quot;jdbc:h2:tcp://localhost/~/&quot; + DB_NAME );\r\n    \t\tdmds.setUsername(env.getProperty(&quot;h2user&quot;));\r\n    \t\tdmds.setPassword(env.getProperty(&quot;h2pw&quot;));\r\n    \t\treturn dmds;\r\n    \t}\r\n    \t\r\n    \tprivate static String getNewDBName() {\r\n    \t\treturn &quot;H2DBTest&quot;;\r\n    \t}\r\n    \r\n    \t@Bean\r\n    \tpublic LocalContainerEntityManagerFactoryBean entityManagerFactory() {\r\n    \t\tLocalContainerEntityManagerFactoryBean factory = new LocalContainerEntityManagerFactoryBean();\r\n    \t\tfactory.setDataSource(dataSource());\r\n    \t\tfactory.setPersistenceUnitName(DB_NAME);\r\n    \t\tfactory.setPackagesToScan(&quot;test.postgressql&quot;);\r\n    \t\tfactory.setJpaVendorAdapter(jpaAdapter());\r\n    \t\tfactory.setJpaProperties(jpaProperties());\r\n    \t\tfactory.afterPropertiesSet();\r\n    \t\treturn factory;\r\n    \t}\r\n    \r\n    \t@Bean\r\n    \tpublic PlatformTransactionManager transactionManager() {\r\n    \t\tJpaTransactionManager txm = new JpaTransactionManager(\r\n    \t\t\t\tentityManagerFactory().getObject());\r\n    \t\treturn txm;\r\n    \t}\r\n    \r\n    \t@Bean\r\n    \tpublic JpaVendorAdapter jpaAdapter() {\r\n    \t\tHibernateJpaVendorAdapter adapter = new HibernateJpaVendorAdapter();\r\n    \t\tadapter.setDatabase(Database.H2);\r\n    \t\tadapter.setGenerateDdl(true);\r\n    \t\tadapter.setShowSql(true);\r\n    \t\treturn adapter;\r\n    \t}\r\n    \r\n    \t@Bean\r\n    \tpublic HibernateExceptionTranslator exceptionTranslator() {\r\n    \t\treturn new HibernateExceptionTranslator();\r\n    \t}\r\n    \r\n    \tpublic Properties jpaProperties() {\r\n    \t\tProperties properties = new Properties();\r\n    \t\tproperties.put(Environment.SHOW_SQL, &quot;true&quot;);\r\n    \t\tproperties.put(Environment.HBM2DDL_AUTO, &quot;create&quot;);\r\n    \t\tproperties.put(Environment.DIALECT,&quot;org.hibernate.dialect.H2Dialect&quot;);\r\n    \t\treturn properties;\r\n    \t}\r\n    \r\n    }\r\n\r\nFails using Postgres\r\n\r\n    package test.postgressql;\r\n    \r\n    import java.util.Properties;\r\n    \r\n    import javax.sql.DataSource;\r\n    \r\n    import org.hibernate.cfg.Environment;\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.context.annotation.Bean;\r\n    import org.springframework.context.annotation.ComponentScan;\r\n    import org.springframework.context.annotation.Configuration;\r\n    import org.springframework.context.annotation.PropertySource;\r\n    import org.springframework.data.jpa.repository.config.EnableJpaRepositories;\r\n    import org.springframework.jdbc.datasource.DriverManagerDataSource;\r\n    import org.springframework.orm.hibernate4.HibernateExceptionTranslator;\r\n    import org.springframework.orm.jpa.JpaTransactionManager;\r\n    import org.springframework.orm.jpa.JpaVendorAdapter;\r\n    import org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean;\r\n    import org.springframework.orm.jpa.vendor.Database;\r\n    import org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter;\r\n    import org.springframework.transaction.PlatformTransactionManager;\r\n    import org.springframework.transaction.annotation.EnableTransactionManagement;\r\n    \r\n    @Configuration\r\n    @PropertySource(&quot;file:C:/springconfig/qpmlib.properties&quot;)\r\n    @ComponentScan(basePackages = {&quot;test.postgressql&quot;})\r\n    @EnableJpaRepositories(basePackages = { &quot;test.postgressql&quot; })\r\n    @EnableTransactionManagement\r\n    public abstract class PGDBConfig {\r\n    \r\n    \t@Autowired\r\n    \torg.springframework.core.env.Environment env;\r\n    \r\n    \tpublic static final String DB_NAME = getNewDBName();\r\n    \r\n    \t@Bean\r\n    \tpublic DataSource dataSource() {\r\n    \t\tDriverManagerDataSource dmds = new DriverManagerDataSource();\r\n    \t\tdmds.setDriverClassName(&quot;org.postgresql.Driver&quot;);\r\n    \t\tdmds.setUrl(&quot;jdbc:postgresql://localhost:5432/&quot; + DB_NAME);\r\n    \t\tdmds.setUsername(env.getProperty(&quot;postgresuser&quot;));\r\n    \t\tdmds.setPassword(env.getProperty(&quot;postgrespw&quot;));\r\n    \t\treturn dmds;\r\n    \t}\r\n    \r\n    \tprivate static String getNewDBName() {\r\n    \t\treturn &quot;PostgresDBTest&quot;;\r\n    \t}\r\n    \r\n    \t@Bean\r\n    \tpublic LocalContainerEntityManagerFactoryBean entityManagerFactory() {\r\n    \t\tLocalContainerEntityManagerFactoryBean factory = new LocalContainerEntityManagerFactoryBean();\r\n    \t\tfactory.setDataSource(dataSource());\r\n    \t\tfactory.setPersistenceUnitName(DB_NAME);\r\n    \t\tfactory.setPackagesToScan(&quot;test.postgressql&quot;);\r\n    \t\tfactory.setJpaVendorAdapter(jpaAdapter());\r\n    \t\tfactory.setJpaProperties(jpaProperties());\r\n    \t\tfactory.afterPropertiesSet();\r\n    \t\treturn factory;\r\n    \t}\r\n    \r\n    \t@Bean\r\n    \tpublic PlatformTransactionManager transactionManager() {\r\n    \t\tJpaTransactionManager txm = new JpaTransactionManager(\r\n    \t\t\t\tentityManagerFactory().getObject());\r\n    \t\treturn txm;\r\n    \t}\r\n    \r\n    \t@Bean\r\n    \tpublic JpaVendorAdapter jpaAdapter() {\r\n    \t\tHibernateJpaVendorAdapter adapter = new HibernateJpaVendorAdapter();\r\n     \t\tadapter.setDatabase(Database.POSTGRESQL);\r\n    \t\tadapter.setGenerateDdl(true);\r\n    \t\tadapter.setShowSql(true);\r\n    \t\treturn adapter;\r\n    \t}\r\n    \r\n    \t@Bean\r\n    \tpublic HibernateExceptionTranslator exceptionTranslator() {\r\n    \t\treturn new HibernateExceptionTranslator();\r\n    \t}\r\n    \r\n    \tpublic Properties jpaProperties() {\r\n    \t\tProperties properties = new Properties();\r\n    \t\tproperties.put(Environment.SHOW_SQL, &quot;true&quot;);\r\n    \t\tproperties.put(Environment.HBM2DDL_AUTO, &quot;create&quot;);\r\n    \t\tproperties.put(Environment.DIALECT,&quot;org.hibernate.dialect.PostgreSQL9Dialect&quot;);\r\n    \t\treturn properties;\r\n    \t}\r\n    }\r\n\r\n","title":"Create PostgreSQL database on the fly using Hibernate even if the DB doesn&#39;t exist","body":"<p>Using H2, </p>\n\n<pre><code>Environment.HBM2DDL_AUTO, \"create\"\n</code></pre>\n\n<p>creates the database if it does not exist yet.</p>\n\n<p>However, in Postgres, the non existing DB is not created and thus an exception which says something like \"DB does not exist\" is thrown. Is there a way to configure Postgres to create a non existing database on demand? </p>\n\n<p>The following configuration files can be used to reproduce the problem:</p>\n\n<p>Works fine using H2:</p>\n\n<pre><code>package test.postgressql;\n\nimport java.util.Properties;\n\nimport javax.sql.DataSource;\n\nimport org.hibernate.cfg.Environment;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.ComponentScan;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.context.annotation.PropertySource;\nimport org.springframework.data.jpa.repository.config.EnableJpaRepositories;\nimport org.springframework.jdbc.datasource.DriverManagerDataSource;\nimport org.springframework.orm.hibernate4.HibernateExceptionTranslator;\nimport org.springframework.orm.jpa.JpaTransactionManager;\nimport org.springframework.orm.jpa.JpaVendorAdapter;\nimport org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean;\nimport org.springframework.orm.jpa.vendor.Database;\nimport org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter;\nimport org.springframework.transaction.PlatformTransactionManager;\nimport org.springframework.transaction.annotation.EnableTransactionManagement;\n\n@Configuration\n@PropertySource(\"file:C:/springconfig/qpmlib.properties\")\n@ComponentScan(basePackages = {\"test.postgressql\"})\n@EnableJpaRepositories(basePackages = { \"test.postgressql\" })\n@EnableTransactionManagement\npublic abstract class H2DBConfig {\n\n    @Autowired\n    org.springframework.core.env.Environment env;\n\n    public static final String DB_NAME = getNewDBName();\n\n    @Bean\n    public DataSource dataSource() {\n        DriverManagerDataSource dmds = new DriverManagerDataSource();\n        dmds.setDriverClassName(\"org.h2.Driver\");\n        dmds.setUrl(\"jdbc:h2:tcp://localhost/~/\" + DB_NAME );\n        dmds.setUsername(env.getProperty(\"h2user\"));\n        dmds.setPassword(env.getProperty(\"h2pw\"));\n        return dmds;\n    }\n\n    private static String getNewDBName() {\n        return \"H2DBTest\";\n    }\n\n    @Bean\n    public LocalContainerEntityManagerFactoryBean entityManagerFactory() {\n        LocalContainerEntityManagerFactoryBean factory = new LocalContainerEntityManagerFactoryBean();\n        factory.setDataSource(dataSource());\n        factory.setPersistenceUnitName(DB_NAME);\n        factory.setPackagesToScan(\"test.postgressql\");\n        factory.setJpaVendorAdapter(jpaAdapter());\n        factory.setJpaProperties(jpaProperties());\n        factory.afterPropertiesSet();\n        return factory;\n    }\n\n    @Bean\n    public PlatformTransactionManager transactionManager() {\n        JpaTransactionManager txm = new JpaTransactionManager(\n                entityManagerFactory().getObject());\n        return txm;\n    }\n\n    @Bean\n    public JpaVendorAdapter jpaAdapter() {\n        HibernateJpaVendorAdapter adapter = new HibernateJpaVendorAdapter();\n        adapter.setDatabase(Database.H2);\n        adapter.setGenerateDdl(true);\n        adapter.setShowSql(true);\n        return adapter;\n    }\n\n    @Bean\n    public HibernateExceptionTranslator exceptionTranslator() {\n        return new HibernateExceptionTranslator();\n    }\n\n    public Properties jpaProperties() {\n        Properties properties = new Properties();\n        properties.put(Environment.SHOW_SQL, \"true\");\n        properties.put(Environment.HBM2DDL_AUTO, \"create\");\n        properties.put(Environment.DIALECT,\"org.hibernate.dialect.H2Dialect\");\n        return properties;\n    }\n\n}\n</code></pre>\n\n<p>Fails using Postgres</p>\n\n<pre><code>package test.postgressql;\n\nimport java.util.Properties;\n\nimport javax.sql.DataSource;\n\nimport org.hibernate.cfg.Environment;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.ComponentScan;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.context.annotation.PropertySource;\nimport org.springframework.data.jpa.repository.config.EnableJpaRepositories;\nimport org.springframework.jdbc.datasource.DriverManagerDataSource;\nimport org.springframework.orm.hibernate4.HibernateExceptionTranslator;\nimport org.springframework.orm.jpa.JpaTransactionManager;\nimport org.springframework.orm.jpa.JpaVendorAdapter;\nimport org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean;\nimport org.springframework.orm.jpa.vendor.Database;\nimport org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter;\nimport org.springframework.transaction.PlatformTransactionManager;\nimport org.springframework.transaction.annotation.EnableTransactionManagement;\n\n@Configuration\n@PropertySource(\"file:C:/springconfig/qpmlib.properties\")\n@ComponentScan(basePackages = {\"test.postgressql\"})\n@EnableJpaRepositories(basePackages = { \"test.postgressql\" })\n@EnableTransactionManagement\npublic abstract class PGDBConfig {\n\n    @Autowired\n    org.springframework.core.env.Environment env;\n\n    public static final String DB_NAME = getNewDBName();\n\n    @Bean\n    public DataSource dataSource() {\n        DriverManagerDataSource dmds = new DriverManagerDataSource();\n        dmds.setDriverClassName(\"org.postgresql.Driver\");\n        dmds.setUrl(\"jdbc:postgresql://localhost:5432/\" + DB_NAME);\n        dmds.setUsername(env.getProperty(\"postgresuser\"));\n        dmds.setPassword(env.getProperty(\"postgrespw\"));\n        return dmds;\n    }\n\n    private static String getNewDBName() {\n        return \"PostgresDBTest\";\n    }\n\n    @Bean\n    public LocalContainerEntityManagerFactoryBean entityManagerFactory() {\n        LocalContainerEntityManagerFactoryBean factory = new LocalContainerEntityManagerFactoryBean();\n        factory.setDataSource(dataSource());\n        factory.setPersistenceUnitName(DB_NAME);\n        factory.setPackagesToScan(\"test.postgressql\");\n        factory.setJpaVendorAdapter(jpaAdapter());\n        factory.setJpaProperties(jpaProperties());\n        factory.afterPropertiesSet();\n        return factory;\n    }\n\n    @Bean\n    public PlatformTransactionManager transactionManager() {\n        JpaTransactionManager txm = new JpaTransactionManager(\n                entityManagerFactory().getObject());\n        return txm;\n    }\n\n    @Bean\n    public JpaVendorAdapter jpaAdapter() {\n        HibernateJpaVendorAdapter adapter = new HibernateJpaVendorAdapter();\n        adapter.setDatabase(Database.POSTGRESQL);\n        adapter.setGenerateDdl(true);\n        adapter.setShowSql(true);\n        return adapter;\n    }\n\n    @Bean\n    public HibernateExceptionTranslator exceptionTranslator() {\n        return new HibernateExceptionTranslator();\n    }\n\n    public Properties jpaProperties() {\n        Properties properties = new Properties();\n        properties.put(Environment.SHOW_SQL, \"true\");\n        properties.put(Environment.HBM2DDL_AUTO, \"create\");\n        properties.put(Environment.DIALECT,\"org.hibernate.dialect.PostgreSQL9Dialect\");\n        return properties;\n    }\n}\n</code></pre>\n"},{"tags":["java","spring","apache-camel"],"owner":{"account_id":3533737,"reputation":981,"user_id":2952564,"accept_rate":74,"display_name":"Burner"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":352,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1658388793,"creation_date":1658388793,"question_id":73062291,"body_markdown":"in Camel 2.17 it was possible to create a request with `ProducerTemplate.requestBodyAndHeaders` in a `RouteBuilder class` method `configure`. In Camel 3.17 it not working anymore. Because there are a condition in `DefaultProducerCache.class`:\r\n\r\n    public Exchange send(Endpoint endpoint, Exchange exchange, Processor resultProcessor) {\r\n        if (this.camelContext.isStopped()) {\r\n            exchange.setException(new RejectedExecutionException(&quot;CamelContext is stopped&quot;));\r\n            return exchange;\r\n        }\r\n\r\n`camelContext.isStopped()` is `true`. But that is not right. `BaseService.class`:\r\n\r\n     public boolean isStopped() {\r\n            return this.status &lt; 4 || this.status &gt;= 9;\r\n        }\r\n\r\nbut 0,1,2,3 are starting status. And there I am. I start the CamelContext and load some configuration on startup with a request. But this is not working anymore.\r\n\r\nIs there another solution?\r\n\r\nMy code is:\r\n\r\n    public class defaultRoutes extends RouteBuilder {\r\n    \tpublic void configure() throws Exception {\r\n        \tProducerTemplate template=this.camelContext.createProducerTemplate();\r\n    \t\tObject answer=null;\r\n    \t\tMap&lt;String,Object&gt; headers = new HashMap&lt;String, Object&gt;();\r\n    \t\t...\r\n\t\t\t/// For Debug\r\n    \t\t//while (this.camelContext.getStatus() != ServiceStatus.Started) {\r\n    \t\t//\tSystem.err.println(&quot;Camel Context has Status: &quot; + this.camelContext.getStatus());\r\n    \t\t//\t//Status is Stopped, never started\r\n    \t\t//\tsleep(1000);\r\n    \t\t//}\r\n    \t\tString uri = &quot;http://SomeUrlToGetXMLConfig.html&quot;;\r\n    \t\ttry {\r\n    \t\t\tanswer=template.requestBodyAndHeaders(\r\n    \t\t\t\t\turi,\r\n    \t\t\t\t\t&quot;&quot;,\r\n    \t\t\t\t\theaders, String.class);\r\n    \t\t} catch (Exception e) {\r\n    \t\t\t...\r\n    \t\t} finally {\r\n    \t\t\ttemplate.stop();\r\n    \t\t}\r\n    \t\t...\r\n    \t\tfor (int i = 0; i &lt; SomeUrlToGetXMLConfig.size(); i++) {\r\n    \t\t\tfrom(&quot;activemq:XYZ&quot; + SomeUrlToGetXMLConfig[i])\r\n    \t\t\t\t.process(new doSomething())\r\n    \t\t\t\t.toD(&quot;activemq:AABB&quot; + SomeUrlToGetXMLConfig[i]);\r\n    \t\t}\r\n\r\nFramework is Spring. Not Spring Boot.\r\n\r\nThank you for any help.","title":"How to use ProducerTemplate.requestBodyAndHeaders on CamelContext Status &lt; 4?","body":"<p>in Camel 2.17 it was possible to create a request with <code>ProducerTemplate.requestBodyAndHeaders</code> in a <code>RouteBuilder class</code> method <code>configure</code>. In Camel 3.17 it not working anymore. Because there are a condition in <code>DefaultProducerCache.class</code>:</p>\n<pre><code>public Exchange send(Endpoint endpoint, Exchange exchange, Processor resultProcessor) {\n    if (this.camelContext.isStopped()) {\n        exchange.setException(new RejectedExecutionException(&quot;CamelContext is stopped&quot;));\n        return exchange;\n    }\n</code></pre>\n<p><code>camelContext.isStopped()</code> is <code>true</code>. But that is not right. <code>BaseService.class</code>:</p>\n<pre><code> public boolean isStopped() {\n        return this.status &lt; 4 || this.status &gt;= 9;\n    }\n</code></pre>\n<p>but 0,1,2,3 are starting status. And there I am. I start the CamelContext and load some configuration on startup with a request. But this is not working anymore.</p>\n<p>Is there another solution?</p>\n<p>My code is:</p>\n<pre><code>public class defaultRoutes extends RouteBuilder {\n    public void configure() throws Exception {\n        ProducerTemplate template=this.camelContext.createProducerTemplate();\n        Object answer=null;\n        Map&lt;String,Object&gt; headers = new HashMap&lt;String, Object&gt;();\n        ...\n        /// For Debug\n        //while (this.camelContext.getStatus() != ServiceStatus.Started) {\n        //  System.err.println(&quot;Camel Context has Status: &quot; + this.camelContext.getStatus());\n        //  //Status is Stopped, never started\n        //  sleep(1000);\n        //}\n        String uri = &quot;http://SomeUrlToGetXMLConfig.html&quot;;\n        try {\n            answer=template.requestBodyAndHeaders(\n                    uri,\n                    &quot;&quot;,\n                    headers, String.class);\n        } catch (Exception e) {\n            ...\n        } finally {\n            template.stop();\n        }\n        ...\n        for (int i = 0; i &lt; SomeUrlToGetXMLConfig.size(); i++) {\n            from(&quot;activemq:XYZ&quot; + SomeUrlToGetXMLConfig[i])\n                .process(new doSomething())\n                .toD(&quot;activemq:AABB&quot; + SomeUrlToGetXMLConfig[i]);\n        }\n</code></pre>\n<p>Framework is Spring. Not Spring Boot.</p>\n<p>Thank you for any help.</p>\n"},{"tags":["java","spring","spring-boot","spring-mvc","spring-data-jpa"],"answers":[{"tags":[],"owner":{"account_id":213468,"reputation":103488,"user_id":466862,"display_name":"Mark Rotteveel"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1658388728,"creation_date":1658388257,"answer_id":73062198,"question_id":73062119,"body_markdown":"You don&#39;t **need** to do this. The direct equivalent would be a method in your `UserRepository` interface defined as `List&lt;User&gt; findByName(String name)`. You can also use JPA named queries, the `@Query` annotation, etc.\r\n\r\nThe usage of additional interfaces and implementation classes is intended for advanced use cases that are not (easily) possible in the queries Spring Data JPA generates for you based on method names, annotations, etc. It is not intended for easy use cases like the query you show.\r\n\r\nAnd the reason why, is because that is how Spring Data JPA is designed. I highly recommend you read the full [Spring Data JPA documentation][1]. You&#39;ll notice that the solution in your question is [just a minor part][2] of the documentation, which makes clear that this is an escape hatch, not the primary way of using Spring Data JPA.\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-data/jpa/docs/current/reference/html/\r\n  [2]: https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#repositories.custom-implementations","title":"How to make a custom method in Spring Data JPA","body":"<p>You don't <strong>need</strong> to do this. The direct equivalent would be a method in your <code>UserRepository</code> interface defined as <code>List&lt;User&gt; findByName(String name)</code>. You can also use JPA named queries, the <code>@Query</code> annotation, etc.</p>\n<p>The usage of additional interfaces and implementation classes is intended for advanced use cases that are not (easily) possible in the queries Spring Data JPA generates for you based on method names, annotations, etc. It is not intended for easy use cases like the query you show.</p>\n<p>And the reason why, is because that is how Spring Data JPA is designed. I highly recommend you read the full <a href=\"https://docs.spring.io/spring-data/jpa/docs/current/reference/html/\" rel=\"nofollow noreferrer\">Spring Data JPA documentation</a>. You'll notice that the solution in your question is <a href=\"https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#repositories.custom-implementations\" rel=\"nofollow noreferrer\">just a minor part</a> of the documentation, which makes clear that this is an escape hatch, not the primary way of using Spring Data JPA.</p>\n"}],"owner":{"account_id":25696055,"reputation":85,"user_id":19456723,"display_name":"nikolaPantelic98"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1558,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73062198,"answer_count":1,"score":0,"last_activity_date":1658388728,"creation_date":1658387820,"question_id":73062119,"body_markdown":"Currently, I&#39;m learning about Spring Data JPA, and I found that I need to create a custom interface to make a custom methods. I wonder if someone can explain to me why this is so. Let&#39;s say I have entity `User` with fields: `userId` and `name`. Also, I have `UserRepository`:\r\n```\r\npublic interface UserRepository extends JpaRepository&lt;User, Long&gt; {...}\r\n```\r\nI found that I need to make new interface - `UserRepositoryCustom` where I should make custom abstract methods. Also, after that, I found that I need to make class `UserRepositoryImpl` which implements `UserRepositoryCustom`. Let&#39;s take a look at the code I made:\r\n```\r\n@Repository\r\npublic class UserRepositoryImpl implements UserRepositoryCustom{\r\n\r\n    @PersistenceContext\r\n    private EntityManager entityManager;\r\n\r\n    @Override\r\n    public List&lt;User&gt; findUserByName(String name) {\r\n        Query query = entityManager.createNativeQuery(&quot;SELECT em.* FROM User em &quot; +\r\n                &quot;WHERE em.name = ?1&quot;, User.class);\r\n        query.setParameter(1, name);\r\n        return query.getResultList();\r\n    }\r\n}\r\n```\r\nCan you please explain why I need `UserRepositoryCustom` and `UserRepositoryImpl` in foreground, And why do I need `EntityManager` and `@PersistenceContext` above it? Every piece of information is of great importance to me, because that way I will be able to extract what is most important for me, which is to understand.\r\n\r\nI found this code, which is working fine, online, but I need to understand it.","title":"How to make a custom method in Spring Data JPA","body":"<p>Currently, I'm learning about Spring Data JPA, and I found that I need to create a custom interface to make a custom methods. I wonder if someone can explain to me why this is so. Let's say I have entity <code>User</code> with fields: <code>userId</code> and <code>name</code>. Also, I have <code>UserRepository</code>:</p>\n<pre><code>public interface UserRepository extends JpaRepository&lt;User, Long&gt; {...}\n</code></pre>\n<p>I found that I need to make new interface - <code>UserRepositoryCustom</code> where I should make custom abstract methods. Also, after that, I found that I need to make class <code>UserRepositoryImpl</code> which implements <code>UserRepositoryCustom</code>. Let's take a look at the code I made:</p>\n<pre><code>@Repository\npublic class UserRepositoryImpl implements UserRepositoryCustom{\n\n    @PersistenceContext\n    private EntityManager entityManager;\n\n    @Override\n    public List&lt;User&gt; findUserByName(String name) {\n        Query query = entityManager.createNativeQuery(&quot;SELECT em.* FROM User em &quot; +\n                &quot;WHERE em.name = ?1&quot;, User.class);\n        query.setParameter(1, name);\n        return query.getResultList();\n    }\n}\n</code></pre>\n<p>Can you please explain why I need <code>UserRepositoryCustom</code> and <code>UserRepositoryImpl</code> in foreground, And why do I need <code>EntityManager</code> and <code>@PersistenceContext</code> above it? Every piece of information is of great importance to me, because that way I will be able to extract what is most important for me, which is to understand.</p>\n<p>I found this code, which is working fine, online, but I need to understand it.</p>\n"},{"tags":["java","eclipse","spring-boot","soap-client"],"answers":[{"tags":[],"owner":{"account_id":11573210,"reputation":774,"user_id":8479386,"display_name":"Karan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1586108554,"creation_date":1586108554,"answer_id":61046797,"question_id":61046373,"body_markdown":"I am not sure why its working but it is, I added following line at the start of the test method and its working\r\n\r\n    System.setProperty(&quot;org.apache.commons.logging.LogFactory&quot;, &quot;org.apache.commons.logging.impl.LogFactoryImpl&quot;);","title":"java.lang.ExceptionInInitializerError in unit test for class genereted using WSDL","body":"<p>I am not sure why its working but it is, I added following line at the start of the test method and its working</p>\n\n<pre><code>System.setProperty(\"org.apache.commons.logging.LogFactory\", \"org.apache.commons.logging.impl.LogFactoryImpl\");\n</code></pre>\n"}],"owner":{"account_id":11573210,"reputation":774,"user_id":8479386,"display_name":"Karan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":746,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1658388597,"creation_date":1586106640,"question_id":61046373,"body_markdown":"I am consuming a SOAP web service successfully. Now, I am trying to write some unit tests but when the test access the class (EmployeeInfo) generated using WSDL then it is giving following error.\r\n\r\n    java.lang.ExceptionInInitializerError\r\n    \tat org.apache.axis.description.TypeDesc.&lt;clinit&gt;(TypeDesc.java:61)\r\n    \tat com.www.soapservice.schema.EmployeeInfo.&lt;clinit&gt;(EmployeeInfo.java:106) \r\n\r\nThe unit test I wrote is as follows\r\n\r\n    @RunWith(SpringRunner.class)\r\n    @SpringBootTest\r\n    public class RecordsManagerTests {\r\n    \t\r\n    \t@Mock\r\n    \tprivate SoapClient soapClient;\r\n    \t\r\n    \t@Test\r\n    \tpublic void sampletest() {\r\n    \t\tMockito.when(soapClient.getFullEmployeeInfoById(Mockito.anyLong())).thenReturn(new EmployeeInfo());\r\n    \t\t\r\n    \t\tRecordsManagerImpl sut = new RecordsManagerImpl(soapClient);\r\n    \t\t\r\n    \t\tsut.getEmployeeInformation(999);\r\n        }\r\n    \t\r\n    }\r\n\r\nI searched for this issue but only could find mocking the service.","title":"java.lang.ExceptionInInitializerError in unit test for class genereted using WSDL","body":"<p>I am consuming a SOAP web service successfully. Now, I am trying to write some unit tests but when the test access the class (EmployeeInfo) generated using WSDL then it is giving following error.</p>\n\n<pre><code>java.lang.ExceptionInInitializerError\n    at org.apache.axis.description.TypeDesc.&lt;clinit&gt;(TypeDesc.java:61)\n    at com.www.soapservice.schema.EmployeeInfo.&lt;clinit&gt;(EmployeeInfo.java:106) \n</code></pre>\n\n<p>The unit test I wrote is as follows</p>\n\n<pre><code>@RunWith(SpringRunner.class)\n@SpringBootTest\npublic class RecordsManagerTests {\n\n    @Mock\n    private SoapClient soapClient;\n\n    @Test\n    public void sampletest() {\n        Mockito.when(soapClient.getFullEmployeeInfoById(Mockito.anyLong())).thenReturn(new EmployeeInfo());\n\n        RecordsManagerImpl sut = new RecordsManagerImpl(soapClient);\n\n        sut.getEmployeeInformation(999);\n    }\n\n}\n</code></pre>\n\n<p>I searched for this issue but only could find mocking the service.</p>\n"},{"tags":["java","amazon-web-services","spring-boot","aws-lambda","spring-batch"],"comments":[{"owner":{"account_id":13455741,"reputation":4930,"user_id":9709361,"display_name":"cgrim"},"score":0,"creation_date":1538489439,"post_id":52609780,"comment_id":92154588,"body_markdown":"Can you provide some lines from the stack trace especially which class was not found?","body":"Can you provide some lines from the stack trace especially which class was not found?"},{"owner":{"account_id":14455833,"reputation":660,"user_id":10443925,"display_name":"Maana"},"score":0,"creation_date":1538490432,"post_id":52609780,"comment_id":92155195,"body_markdown":"Class not found: my.package.Handler: java.lang.ClassNotFoundException\njava.lang.ClassNotFoundException: my.package.Handler\nat java.net.URLClassLoader.findClass(URLClassLoader.java:381)\nat java.lang.ClassLoader.loadClass(ClassLoader.java:424)\nat java.lang.ClassLoader.loadClass(ClassLoader.java:357)\nat java.lang.Class.forName0(Native Method)\nat java.lang.Class.forName(Class.java:348)","body":"Class not found: my.package.Handler: java.lang.ClassNotFoundException java.lang.ClassNotFoundException: my.package.Handler at java.net.URLClassLoader.findClass(URLClassLoader.java:381) at java.lang.ClassLoader.loadClass(ClassLoader.java:424) at java.lang.ClassLoader.loadClass(ClassLoader.java:357) at java.lang.Class.forName0(Native Method) at java.lang.Class.forName(Class.java:348)"},{"owner":{"account_id":352393,"reputation":7153,"user_id":6404321,"display_name":"walen"},"score":0,"creation_date":1538490582,"post_id":52609780,"comment_id":92155287,"body_markdown":"What do you mean _&quot;little to no resource available&quot;_? There&#39;re lots of tutorials on the web and you also have the official documentation: https://docs.aws.amazon.com/lambda/latest/dg/welcome.html. In short: you don&#39;t need a Spring Boot app anymore, just upload your `Handler` class and use the AWS Control Panel to tell AWS when it should run it.","body":"What do you mean <i>&quot;little to no resource available&quot;</i>? There&#39;re lots of tutorials on the web and you also have the official documentation: <a href=\"https://docs.aws.amazon.com/lambda/latest/dg/welcome.html\" rel=\"nofollow noreferrer\">docs.aws.amazon.com/lambda/latest/dg/welcome.html</a>. In short: you don&#39;t need a Spring Boot app anymore, just upload your <code>Handler</code> class and use the AWS Control Panel to tell AWS when it should run it."}],"answers":[{"tags":[],"owner":{"account_id":3846782,"reputation":785,"user_id":3188057,"display_name":"harsh tibrewal"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1538489425,"creation_date":1538489425,"answer_id":52610177,"question_id":52609780,"body_markdown":"That&#39;s because the gradle dependencies are not in the jar you are deploying in the lambda function. The jar needs to have all the dependency jars injected. ","title":"Spring Boot App with Batch does not working in Amazon AWS Lambda environment","body":"<p>That's because the gradle dependencies are not in the jar you are deploying in the lambda function. The jar needs to have all the dependency jars injected. </p>\n"},{"tags":[],"owner":{"account_id":6482932,"reputation":29552,"user_id":5019386,"display_name":"Mahmoud Ben Hassine"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1538498212,"creation_date":1538498212,"answer_id":52612701,"question_id":52609780,"body_markdown":"I recommend using the [Spring Boot gradle plugin](https://docs.spring.io/spring-boot/docs/current/gradle-plugin/reference/html/) to create an executable jar with all dependencies included.\r\n\r\nThen you can create a AWS Lambda function that runs this jar with `java -jar mybatchjob.jar`.\r\n\r\nHope this helps.","title":"Spring Boot App with Batch does not working in Amazon AWS Lambda environment","body":"<p>I recommend using the <a href=\"https://docs.spring.io/spring-boot/docs/current/gradle-plugin/reference/html/\" rel=\"nofollow noreferrer\">Spring Boot gradle plugin</a> to create an executable jar with all dependencies included.</p>\n\n<p>Then you can create a AWS Lambda function that runs this jar with <code>java -jar mybatchjob.jar</code>.</p>\n\n<p>Hope this helps.</p>\n"},{"tags":[],"owner":{"account_id":5528407,"reputation":29,"user_id":4389221,"display_name":"Sri"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1538500915,"creation_date":1538500915,"answer_id":52613336,"question_id":52609780,"body_markdown":"Its due to dependencies are missing in the jar you deployed in Lambda function. create a single Jar with all dependencies and re deploy it once again\r\n\r\n\r\nNo need to change the handler info : my.package.Handler::handleRequest","title":"Spring Boot App with Batch does not working in Amazon AWS Lambda environment","body":"<p>Its due to dependencies are missing in the jar you deployed in Lambda function. create a single Jar with all dependencies and re deploy it once again</p>\n\n<p>No need to change the handler info : my.package.Handler::handleRequest</p>\n"},{"tags":[],"owner":{"account_id":5133120,"reputation":113,"user_id":4112670,"display_name":"Victor Mikhailov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658388234,"creation_date":1658388234,"answer_id":73062192,"question_id":52609780,"body_markdown":"it is bad idea to use Spring Boot in Lambda.\r\ntechnically you can, but Lambda supposed to start quick and finish quick.\r\nSpring Boot apps has long initialisation and loading time, which is irrelevant for server application running all the time, but quite critical for serverless lambdas, spawned on demand. \r\nwe use lambdas written in Kotlin, but without Spring. you can look at Micronaut, which also offers dependency injection in similar fashion, but without reflection","title":"Spring Boot App with Batch does not working in Amazon AWS Lambda environment","body":"<p>it is bad idea to use Spring Boot in Lambda.\ntechnically you can, but Lambda supposed to start quick and finish quick.\nSpring Boot apps has long initialisation and loading time, which is irrelevant for server application running all the time, but quite critical for serverless lambdas, spawned on demand.\nwe use lambdas written in Kotlin, but without Spring. you can look at Micronaut, which also offers dependency injection in similar fashion, but without reflection</p>\n"}],"owner":{"account_id":14455833,"reputation":660,"user_id":10443925,"display_name":"Maana"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1201,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":52612701,"answer_count":4,"score":-1,"last_activity_date":1658388234,"creation_date":1538488262,"question_id":52609780,"body_markdown":"My spring batch boot application is read file and insert in to database. I am new to AWS Lambda functionality, their is very little to no resource available.\r\n\r\nWhen I test the jar on AWS lambda got `ClassNotFoundException`. \r\n\r\n    @SpringBootApplication\r\n    @EnableAutoConfiguration\r\n    @EnableJpaRepositories(&quot;my.repository&quot;)\r\n    @ComponentScan(&quot;my.package&quot;)\r\n    @EnableScheduling\r\n    public class Main implements RequestHandler&lt;KinesisEvent, String&gt;{\r\n\r\n\t@Autowired\r\n\tJobLauncher launcher;\r\n\t\r\n\t@Autowired\r\n\tJob job;\r\n\t\r\n\tpublic static void startApp(){\r\n        System.exit(SpringApplication\r\n                .exit(SpringApplication.run(Main.class)));\r\n    }\r\n\r\n---------------------------------------------\r\n\r\n    public class Handler implements RequestHandler&lt;KinesisEvent, String&gt; {\r\n\r\n    @Override\r\n    public String handleRequest(KinesisEvent input, Context context) {\r\n        context.getLogger().log(&quot;Input: &quot; + input);\r\n\r\n        Main.startApp();\r\n        // TODO: implement your handler\r\n        return &quot;Hello from Lambda&quot;;\r\n    }\r\n\r\n-----------------------------------------\r\n\r\n    My _build.gradle_:\r\n\r\n    dependencies {\r\n\t\r\n   \tcompile &#39;org.springframework.batch:spring-batch-core:4.0.0.RELEASE&#39;\r\n    compile &#39;org.springframework.boot:spring-boot-starter-batch:2.0.4.RELEASE&#39;\r\n    compile &#39;org.springframework.boot:spring-boot-starter-data- \r\n    jpa:2.0.4.RELEASE&#39;\r\n    compile &#39;com.microsoft.sqlserver:mssql-jdbc:6.1.0.jre8&#39;\r\n    compile &#39;com.google.code.gson:gson:2.8.2&#39;\r\n\tcompile &#39;com.amazonaws:aws-lambda-java-core:1.2.0&#39;\r\n    compile &#39;com.amazonaws:aws-lambda-java-events:2.1.0&#39;\r\n      \r\n    }\r\n    jar {\r\n    manifest{\r\n        baseName = &quot;${projectName}&quot;\r\n        version = (&quot;${project.archiveVersion}&quot;)\r\n     }\r\n    } \r\n\r\n    task buildZip(type: Zip) {\r\n    from compileJava\r\n    from processResources              \r\n    into(&#39;lib&#39;) {\r\n        from configurations.compileClasspath\r\n     }           \r\n    }\r\n    build.dependsOn buildZip\r\n   \r\n\r\n----------------------------------------------\r\n   \r\n    Handler info on AWS Lambda- \r\n    my.package.Handler::handleRequest\r\n\r\n-------------------------------------------\r\n\r\n    Class not found: my.package.Handler: \r\n    java.lang.ClassNotFoundException\r\n    java.lang.ClassNotFoundException: my.package.Handler\r\n    at java.net.URLClassLoader.findClass(URLClassLoader.java:381)\r\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:424)\r\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:357)\r\n    at java.lang.Class.forName0(Native Method)\r\n    at java.lang.Class.forName(Class.java:348)\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/htRW8.png","title":"Spring Boot App with Batch does not working in Amazon AWS Lambda environment","body":"<p>My spring batch boot application is read file and insert in to database. I am new to AWS Lambda functionality, their is very little to no resource available.</p>\n\n<p>When I test the jar on AWS lambda got <code>ClassNotFoundException</code>. </p>\n\n<pre><code>@SpringBootApplication\n@EnableAutoConfiguration\n@EnableJpaRepositories(\"my.repository\")\n@ComponentScan(\"my.package\")\n@EnableScheduling\npublic class Main implements RequestHandler&lt;KinesisEvent, String&gt;{\n\n@Autowired\nJobLauncher launcher;\n\n@Autowired\nJob job;\n\npublic static void startApp(){\n    System.exit(SpringApplication\n            .exit(SpringApplication.run(Main.class)));\n}\n</code></pre>\n\n<hr>\n\n<pre><code>public class Handler implements RequestHandler&lt;KinesisEvent, String&gt; {\n\n@Override\npublic String handleRequest(KinesisEvent input, Context context) {\n    context.getLogger().log(\"Input: \" + input);\n\n    Main.startApp();\n    // TODO: implement your handler\n    return \"Hello from Lambda\";\n}\n</code></pre>\n\n<hr>\n\n<pre><code>My _build.gradle_:\n\ndependencies {\n\ncompile 'org.springframework.batch:spring-batch-core:4.0.0.RELEASE'\ncompile 'org.springframework.boot:spring-boot-starter-batch:2.0.4.RELEASE'\ncompile 'org.springframework.boot:spring-boot-starter-data- \njpa:2.0.4.RELEASE'\ncompile 'com.microsoft.sqlserver:mssql-jdbc:6.1.0.jre8'\ncompile 'com.google.code.gson:gson:2.8.2'\ncompile 'com.amazonaws:aws-lambda-java-core:1.2.0'\ncompile 'com.amazonaws:aws-lambda-java-events:2.1.0'\n\n}\njar {\nmanifest{\n    baseName = \"${projectName}\"\n    version = (\"${project.archiveVersion}\")\n }\n} \n\ntask buildZip(type: Zip) {\nfrom compileJava\nfrom processResources              \ninto('lib') {\n    from configurations.compileClasspath\n }           \n}\nbuild.dependsOn buildZip\n</code></pre>\n\n<hr>\n\n<pre><code>Handler info on AWS Lambda- \nmy.package.Handler::handleRequest\n</code></pre>\n\n<hr>\n\n<pre><code>Class not found: my.package.Handler: \njava.lang.ClassNotFoundException\njava.lang.ClassNotFoundException: my.package.Handler\nat java.net.URLClassLoader.findClass(URLClassLoader.java:381)\nat java.lang.ClassLoader.loadClass(ClassLoader.java:424)\nat java.lang.ClassLoader.loadClass(ClassLoader.java:357)\nat java.lang.Class.forName0(Native Method)\nat java.lang.Class.forName(Class.java:348)\n</code></pre>\n"},{"tags":["java","android","database","sqlite","android-sqlite"],"answers":[{"tags":[],"owner":{"account_id":14535244,"reputation":161554,"user_id":10498828,"display_name":"forpas"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1555496505,"creation_date":1555495969,"answer_id":55725186,"question_id":55719798,"body_markdown":"In this line:\r\n\r\n    public static final String TABLE_NAME=&quot;register.db&quot;;\r\n\r\nI guess by mistake, you define the table&#39;s name the same as the database&#39;s name,&lt;br/&gt;\r\nalthough in the `CREATE` statement: \r\n\r\n    sqLiteDatabase.execSQL(&quot;CREATE TABLE registeruser (.....)&quot;);\r\nyou create the table with name `registeruser`. &lt;br/&gt;\r\nLater in your code you always use the variable `TABLE_NAME` which is different than the created table. &lt;br/&gt;\r\nAlso, since you have defined variables for the names of the table and the columns, don&#39;t hardcode them again.&lt;br/&gt;\r\nChange the declaration to:\r\n\r\n    public static final String TABLE_NAME=&quot;registeruser&quot;;\r\nand the `CREATE` statement to:\r\n\r\n    sqLiteDatabase.execSQL(\r\n        &quot;CREATE TABLE &quot; + TABLE_NAME + &quot; (&quot; + \r\n            COL_1 + &quot; INTEGER PRIMARY KEY AUTOINCREMENT, &quot; +\r\n            COL_2 + &quot; TEXT, &quot; + \r\n            COL_3 + &quot; TEXT, &quot; +\r\n            COL_4 + &quot; TEXT, &quot; +\r\n            COL_5 + &quot; TEXT, &quot; +\r\n            COL_6 + &quot; TEXT)&quot;\r\n    );\r\n\r\nthen uninstall the app from the device to delete the database and rerun so the database is recreated with the proper name for the table.&lt;br/&gt;","title":"Can&#39;t find database on DB browser SQLite?","body":"<p>In this line:</p>\n\n<pre><code>public static final String TABLE_NAME=\"register.db\";\n</code></pre>\n\n<p>I guess by mistake, you define the table's name the same as the database's name,<br/>\nalthough in the <code>CREATE</code> statement: </p>\n\n<pre><code>sqLiteDatabase.execSQL(\"CREATE TABLE registeruser (.....)\");\n</code></pre>\n\n<p>you create the table with name <code>registeruser</code>. <br/>\nLater in your code you always use the variable <code>TABLE_NAME</code> which is different than the created table. <br/>\nAlso, since you have defined variables for the names of the table and the columns, don't hardcode them again.<br/>\nChange the declaration to:</p>\n\n<pre><code>public static final String TABLE_NAME=\"registeruser\";\n</code></pre>\n\n<p>and the <code>CREATE</code> statement to:</p>\n\n<pre><code>sqLiteDatabase.execSQL(\n    \"CREATE TABLE \" + TABLE_NAME + \" (\" + \n        COL_1 + \" INTEGER PRIMARY KEY AUTOINCREMENT, \" +\n        COL_2 + \" TEXT, \" + \n        COL_3 + \" TEXT, \" +\n        COL_4 + \" TEXT, \" +\n        COL_5 + \" TEXT, \" +\n        COL_6 + \" TEXT)\"\n);\n</code></pre>\n\n<p>then uninstall the app from the device to delete the database and rerun so the database is recreated with the proper name for the table.<br/></p>\n"}],"owner":{"account_id":13610909,"reputation":61,"user_id":9818449,"display_name":"Laurel Ted"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1018,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":55725186,"answer_count":1,"score":1,"last_activity_date":1658388194,"creation_date":1555474649,"question_id":55719798,"body_markdown":"I am a beginner and creating a registration database for a school project, when I go to DB Browser for SQLite and open my file there are no tables or contents? Would it have something to do with my use of onCreate or onUpgrade? I&#39;ve done a lot of research but the results I get are always from a really long time ago, and also I really do not understand them. When I enter information on my emulator I also get the error code &#39;SQLiteException: no such table&#39;. I am really unsure of what to do with my code.\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n```\r\npackage android.example.rise;\r\n\r\nimport android.content.ContentValues;\r\nimport android.content.Context;\r\nimport android.database.Cursor;\r\nimport android.database.sqlite.SQLiteDatabase;\r\nimport android.database.sqlite.SQLiteOpenHelper;\r\nimport android.nfc.Tag;\r\nimport android.text.Html;\r\nimport android.util.Log;\r\n\r\npublic class DatabaseHelper extends SQLiteOpenHelper {\r\n    public static final String DATABASE_NAME=&quot;register.db&quot;;\r\n    public static final String TABLE_NAME=&quot;register.db&quot;;\r\n    public static final String COL_1=&quot;ID&quot;;\r\n    public static final String COL_2=&quot;first&quot;;\r\n    public static final String COL_3=&quot;second&quot;;\r\n    public static final String COL_4=&quot;last&quot;;\r\n    public static final String COL_5=&quot;email&quot;;\r\n    public static final String COL_6=&quot;password&quot;;\r\n\r\n    public DatabaseHelper(Context context) {\r\n        super(context, DATABASE_NAME, null, 1);\r\n    }\r\n\r\n    @Override\r\n    public void onCreate(SQLiteDatabase sqLiteDatabase) {\r\n        sqLiteDatabase.execSQL(&quot;CREATE TABLE registeruser (ID INTEGER PRIMARY KEY AUTOINCREMENT, first TEXT, second TEXT, last TEXT, email TEXT, password TEXT)&quot;);\r\n    }\r\n\r\n    @Override\r\n    public void onUpgrade(SQLiteDatabase sqLiteDatabase, int oldVersion, int newVersion) {\r\n        sqLiteDatabase.execSQL(&quot;DROP TABLE IF EXISTS &quot; + TABLE_NAME);\r\n        onCreate(sqLiteDatabase);\r\n\r\n    }\r\n\r\n    public long addUser(String first, String middle, String last, String user, String password) {\r\n        SQLiteDatabase db = this.getWritableDatabase();\r\n        ContentValues contentValues = new ContentValues();\r\n        contentValues.put(&quot;first&quot;, first);\r\n        contentValues.put(&quot;second&quot;, middle);\r\n        contentValues.put(&quot;last&quot;, last);\r\n        contentValues.put(&quot;email&quot;, user);\r\n        contentValues.put(&quot;password&quot;, password);\r\n        long res = db.insert(&quot;registeruser&quot;, null, contentValues);\r\n        return res;\r\n\r\n    }\r\n\r\n    public boolean checkUser(String email, String password){\r\n        String[] column = {COL_1};\r\n        SQLiteDatabase db = getReadableDatabase();\r\n        String selection = COL_5 + &quot;=?&quot; + &quot; and &quot; + COL_6 + &quot;=?&quot;;\r\n        String[] selectionArgs = { email, password } ;\r\n        Cursor cursor = db.query(TABLE_NAME,column,selection,selectionArgs,null,null,null);\r\n        int count = cursor.getCount();\r\n        cursor.close();\r\n        db.close();\r\n\r\n        if(count&gt;0)\r\n            return true;\r\n        else\r\n            return false;\r\n    }\r\n\r\n}\r\n```","title":"Can&#39;t find database on DB browser SQLite?","body":"<p>I am a beginner and creating a registration database for a school project, when I go to DB Browser for SQLite and open my file there are no tables or contents? Would it have something to do with my use of onCreate or onUpgrade? I've done a lot of research but the results I get are always from a really long time ago, and also I really do not understand them. When I enter information on my emulator I also get the error code 'SQLiteException: no such table'. I am really unsure of what to do with my code.</p>\n\n<pre><code>package android.example.rise;\n\nimport android.content.ContentValues;\nimport android.content.Context;\nimport android.database.Cursor;\nimport android.database.sqlite.SQLiteDatabase;\nimport android.database.sqlite.SQLiteOpenHelper;\nimport android.nfc.Tag;\nimport android.text.Html;\nimport android.util.Log;\n\npublic class DatabaseHelper extends SQLiteOpenHelper {\n    public static final String DATABASE_NAME=\"register.db\";\n    public static final String TABLE_NAME=\"register.db\";\n    public static final String COL_1=\"ID\";\n    public static final String COL_2=\"first\";\n    public static final String COL_3=\"second\";\n    public static final String COL_4=\"last\";\n    public static final String COL_5=\"email\";\n    public static final String COL_6=\"password\";\n\n    public DatabaseHelper(Context context) {\n        super(context, DATABASE_NAME, null, 1);\n    }\n\n    @Override\n    public void onCreate(SQLiteDatabase sqLiteDatabase) {\n        sqLiteDatabase.execSQL(\"CREATE TABLE registeruser (ID INTEGER PRIMARY KEY AUTOINCREMENT, first TEXT, second TEXT, last TEXT, email TEXT, password TEXT)\");\n    }\n\n    @Override\n    public void onUpgrade(SQLiteDatabase sqLiteDatabase, int oldVersion, int newVersion) {\n        sqLiteDatabase.execSQL(\"DROP TABLE IF EXISTS \" + TABLE_NAME);\n        onCreate(sqLiteDatabase);\n\n    }\n\n    public long addUser(String first, String middle, String last, String user, String password) {\n        SQLiteDatabase db = this.getWritableDatabase();\n        ContentValues contentValues = new ContentValues();\n        contentValues.put(\"first\", first);\n        contentValues.put(\"second\", middle);\n        contentValues.put(\"last\", last);\n        contentValues.put(\"email\", user);\n        contentValues.put(\"password\", password);\n        long res = db.insert(\"registeruser\", null, contentValues);\n        return res;\n\n    }\n\n    public boolean checkUser(String email, String password){\n        String[] column = {COL_1};\n        SQLiteDatabase db = getReadableDatabase();\n        String selection = COL_5 + \"=?\" + \" and \" + COL_6 + \"=?\";\n        String[] selectionArgs = { email, password } ;\n        Cursor cursor = db.query(TABLE_NAME,column,selection,selectionArgs,null,null,null);\n        int count = cursor.getCount();\n        cursor.close();\n        db.close();\n\n        if(count&gt;0)\n            return true;\n        else\n            return false;\n    }\n\n}\n</code></pre>\n"},{"tags":["java","count","removeall"],"comments":[{"owner":{"account_id":7413926,"reputation":5474,"user_id":11374957,"display_name":"Kaan"},"score":2,"creation_date":1658379871,"post_id":73060845,"comment_id":129037956,"body_markdown":"What have you tried so far? How did it go? Or are you just asking for someone else to solve this for you?","body":"What have you tried so far? How did it go? Or are you just asking for someone else to solve this for you?"},{"owner":{"account_id":19520952,"reputation":13,"user_id":14282854,"display_name":"Roshni Sinha"},"score":0,"creation_date":1658380614,"post_id":73060845,"comment_id":129038084,"body_markdown":"I was unable to figure out the correct approach to solve this so was seeking help from the community","body":"I was unable to figure out the correct approach to solve this so was seeking help from the community"}],"answers":[{"tags":[],"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1658388103,"creation_date":1658381601,"answer_id":73061150,"question_id":73060845,"body_markdown":"The below code iterates through the characters in the input. It counts consecutive digits and determines the maximum number of consecutive digits as well as what that digit is. It then creates a string containing the maximum digit, the maximum number of consecutive occurrences. For the example input in your question, that means means a string of five `0` (zero), i.e. `00000`. Finally, it removes the string of five `0` by replacing it with an empty string.\r\n```java\r\npublic class Main {\r\n\r\n    public static void main(String[] args) {\r\n        String input = &quot;567000003460046&quot;;\r\n        System.out.println(&quot; Input: &quot; + input);\r\n        char current = &#39;\\u0000&#39;; // Unicode code point for null character.\r\n        char maxChar = current;\r\n        int count = 0;\r\n        int max = 0;\r\n        for (char ch : input.toCharArray()) {\r\n            if (ch != current) {\r\n                if (count &gt; max) {\r\n                    max = count;\r\n                    maxChar = current;\r\n                }\r\n                count = 0;\r\n                current = ch;\r\n            }\r\n            count++;\r\n        }\r\n        StringBuilder remove = new StringBuilder(max);\r\n        for (int i = 0; i &lt; max; i++) {\r\n            remove.append(maxChar);\r\n        }\r\n        String output = input.replaceAll(remove.toString(), &quot;&quot;);\r\n        System.out.println(&quot;Output: &quot; + output);\r\n    }\r\n}\r\n```\r\nRunning the above code produces the following output:\r\n```none\r\n Input: 567000003460046\r\nOutput: 5673460046\r\n```\r\n","title":"JAVA logic: How to remove only max occurrence of given character?","body":"<p>The below code iterates through the characters in the input. It counts consecutive digits and determines the maximum number of consecutive digits as well as what that digit is. It then creates a string containing the maximum digit, the maximum number of consecutive occurrences. For the example input in your question, that means means a string of five <code>0</code> (zero), i.e. <code>00000</code>. Finally, it removes the string of five <code>0</code> by replacing it with an empty string.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Main {\n\n    public static void main(String[] args) {\n        String input = &quot;567000003460046&quot;;\n        System.out.println(&quot; Input: &quot; + input);\n        char current = '\\u0000'; // Unicode code point for null character.\n        char maxChar = current;\n        int count = 0;\n        int max = 0;\n        for (char ch : input.toCharArray()) {\n            if (ch != current) {\n                if (count &gt; max) {\n                    max = count;\n                    maxChar = current;\n                }\n                count = 0;\n                current = ch;\n            }\n            count++;\n        }\n        StringBuilder remove = new StringBuilder(max);\n        for (int i = 0; i &lt; max; i++) {\n            remove.append(maxChar);\n        }\n        String output = input.replaceAll(remove.toString(), &quot;&quot;);\n        System.out.println(&quot;Output: &quot; + output);\n    }\n}\n</code></pre>\n<p>Running the above code produces the following output:</p>\n<pre class=\"lang-none prettyprint-override\"><code> Input: 567000003460046\nOutput: 5673460046\n</code></pre>\n"}],"owner":{"account_id":19520952,"reputation":13,"user_id":14282854,"display_name":"Roshni Sinha"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":99,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73061150,"answer_count":1,"score":0,"last_activity_date":1658388103,"creation_date":1658379049,"question_id":73060845,"body_markdown":"Input: 567000003460046  \r\nOutput: 5673460046  \r\n(As `0` was present 5 times and 2 times but we have to remove the max presence and retain remaining.)","title":"JAVA logic: How to remove only max occurrence of given character?","body":"<p>Input: 567000003460046<br />\nOutput: 5673460046<br />\n(As <code>0</code> was present 5 times and 2 times but we have to remove the max presence and retain remaining.)</p>\n"},{"tags":["java","date","dateformatter"],"comments":[{"owner":{"account_id":6780825,"reputation":155680,"user_id":5221149,"display_name":"Andreas"},"score":1,"creation_date":1606376237,"post_id":65017630,"comment_id":114946528,"body_markdown":"Seems like a *DOH!* moment: Simply check for the existence of the separator character: `if (date.indexOf(&#39;/&#39;) != -1) { /* pattern #3 */ } else if (date.indexOf(&#39;-&#39;) != -1) { /* pattern #2 */ } else { /* pattern #1 */ }`","body":"Seems like a <i>DOH!</i> moment: Simply check for the existence of the separator character: <code>if (date.indexOf(&#39;&#47;&#39;) != -1) { &#47;* pattern #3 *&#47; } else if (date.indexOf(&#39;-&#39;) != -1) { &#47;* pattern #2 *&#47; } else { &#47;* pattern #1 *&#47; }</code>"},{"owner":{"account_id":2933712,"reputation":6419,"user_id":2513200,"accept_rate":83,"display_name":"Hulk"},"score":1,"creation_date":1606377871,"post_id":65017630,"comment_id":114947107,"body_markdown":"I don&#39;t think there is a way to find out which of the optional formats matched after parsing with `formatter`. If you need this information, you&#39;ll have to check the patterns separately.","body":"I don&#39;t think there is a way to find out which of the optional formats matched after parsing with <code>formatter</code>. If you need this information, you&#39;ll have to check the patterns separately."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1606451030,"post_id":65017630,"comment_id":114971131,"body_markdown":"`LocalDateTime.parse(date, formatter)` can’t work since there is no time of day in your strings. Stick to `LocalDate`.","body":"<code>LocalDateTime.parse(date, formatter)</code> can’t work since there is no time of day in your strings. Stick to <code>LocalDate</code>."}],"answers":[{"tags":[],"owner":{"account_id":8546,"reputation":17688,"user_id":15472,"accept_rate":87,"display_name":"tucuxi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1606381554,"creation_date":1606381554,"answer_id":65018928,"question_id":65017630,"body_markdown":"After looking at the documentation, there seems to be no way to see which of the optional formats succeeded. So the easy way out is to build a collection of formatters to try, and to use them in order until one succeeds. However, this is ugly: *you are using exceptions for flow-control*\r\n\r\n    LocalDateTime time = null;\r\n    DateTimeFormatter goodFormatter = null;\r\n    for (DateTimeFormatter formatter : formats) {\r\n        try {\r\n            time = LocalDateTime.parse(date, formatter);\r\n            goodFormatter = formatter;\r\n            break;\r\n        } catch (DateTimeParseException dtpe) {\r\n            // not really exceptional - bad coding practice\r\n        }\r\n    }\r\n    // if goodFormatter != null, there you have it\r\n\r\nAn [existing question on SO](https://stackoverflow.com/questions/35626873/how-to-check-if-the-date-conforms-to-a-specific-dateformat-without-using-excepti) deals with this problem. My suggested answer goes along the lines of [one of its answers](https://stackoverflow.com/a/35627668/15472).\r\n\r\nA cleaner option may be to use your formats both as regular expressions (to only examine likely candidates) and as actual date formats (to parse only the good candidates). This comes at a cost in readability, and will still throw exceptions when parsing ambiguous formats, because the format-to-regex code is very simplistic:\r\n\r\n    enum FormatCandidate {\r\n        YMD(&quot;yyyyMMdd&quot;),\r\n        YMD_DASHED(&quot;yyyy-MM-dd&quot;),\r\n        MDY_SLASHED(&quot;MM/dd/yyyy&quot;);\r\n\r\n        private final Pattern pattern;\r\n        public final DateTimeFormatter formatter;  // immutable &amp; thread safe\r\n\r\n        FormatCandidate(String format) {\r\n            // THIS ONLY WORKS FOR SIMPLE EXAMPLES; modify for more complex ones!\r\n            this.pattern = Pattern.compile(format\r\n                  .replaceAll(&quot;[-/]&quot;, &quot;\\\\\\0&quot;)  // preserved characters\r\n                  .replaceAll(&quot;[yMd]&quot;,&quot;\\\\d&quot;)   // digits\r\n            ));\r\n            this.formatter = new DateTimeFormatterBuilder()\r\n                  .appendPattern(format).toFormatter();\r\n        }\r\n\r\n        // this should really be available in the DateTimeFormatter class\r\n        public boolean canParse(String date) {\r\n            return pattern.matcher(date).matches();\r\n        }\r\n    }\r\n\r\nThe initial code could now be written as:\r\n\r\n    DateTimeFormatter goodFormatter = null;\r\n    for (FormatCandidate candidate : FormatCandidate.values()) {\r\n        if (candidate.canParse(date)) {\r\n           goodFormatter = candidate.format;\r\n           break;\r\n        }\r\n    }\r\n \r\n    LocalDateTime time = null;   \r\n    try {\r\n        time = LocalDateTime.(date, candidate.formatter);\r\n    } catch (DateTimeParseException dtpe) {\r\n        // now we can complain, saying that date does not match this particular\r\n        // expected output\r\n    }\r\n\r\nBefore complicating this further, I would probably just go with ugly exceptions-as-control-flow (1st code snippet) as a lesser evil to re-implementing a time-parsing library.\r\n\r\n**disclaimer: above code is un-tested and may not compile and/or perform as expected** ","title":"How to get date pattern for a date in Java","body":"<p>After looking at the documentation, there seems to be no way to see which of the optional formats succeeded. So the easy way out is to build a collection of formatters to try, and to use them in order until one succeeds. However, this is ugly: <em>you are using exceptions for flow-control</em></p>\n<pre><code>LocalDateTime time = null;\nDateTimeFormatter goodFormatter = null;\nfor (DateTimeFormatter formatter : formats) {\n    try {\n        time = LocalDateTime.parse(date, formatter);\n        goodFormatter = formatter;\n        break;\n    } catch (DateTimeParseException dtpe) {\n        // not really exceptional - bad coding practice\n    }\n}\n// if goodFormatter != null, there you have it\n</code></pre>\n<p>An <a href=\"https://stackoverflow.com/questions/35626873/how-to-check-if-the-date-conforms-to-a-specific-dateformat-without-using-excepti\">existing question on SO</a> deals with this problem. My suggested answer goes along the lines of <a href=\"https://stackoverflow.com/a/35627668/15472\">one of its answers</a>.</p>\n<p>A cleaner option may be to use your formats both as regular expressions (to only examine likely candidates) and as actual date formats (to parse only the good candidates). This comes at a cost in readability, and will still throw exceptions when parsing ambiguous formats, because the format-to-regex code is very simplistic:</p>\n<pre><code>enum FormatCandidate {\n    YMD(&quot;yyyyMMdd&quot;),\n    YMD_DASHED(&quot;yyyy-MM-dd&quot;),\n    MDY_SLASHED(&quot;MM/dd/yyyy&quot;);\n\n    private final Pattern pattern;\n    public final DateTimeFormatter formatter;  // immutable &amp; thread safe\n\n    FormatCandidate(String format) {\n        // THIS ONLY WORKS FOR SIMPLE EXAMPLES; modify for more complex ones!\n        this.pattern = Pattern.compile(format\n              .replaceAll(&quot;[-/]&quot;, &quot;\\\\\\0&quot;)  // preserved characters\n              .replaceAll(&quot;[yMd]&quot;,&quot;\\\\d&quot;)   // digits\n        ));\n        this.formatter = new DateTimeFormatterBuilder()\n              .appendPattern(format).toFormatter();\n    }\n\n    // this should really be available in the DateTimeFormatter class\n    public boolean canParse(String date) {\n        return pattern.matcher(date).matches();\n    }\n}\n</code></pre>\n<p>The initial code could now be written as:</p>\n<pre><code>DateTimeFormatter goodFormatter = null;\nfor (FormatCandidate candidate : FormatCandidate.values()) {\n    if (candidate.canParse(date)) {\n       goodFormatter = candidate.format;\n       break;\n    }\n}\n\nLocalDateTime time = null;   \ntry {\n    time = LocalDateTime.(date, candidate.formatter);\n} catch (DateTimeParseException dtpe) {\n    // now we can complain, saying that date does not match this particular\n    // expected output\n}\n</code></pre>\n<p>Before complicating this further, I would probably just go with ugly exceptions-as-control-flow (1st code snippet) as a lesser evil to re-implementing a time-parsing library.</p>\n<p><strong>disclaimer: above code is un-tested and may not compile and/or perform as expected</strong></p>\n"},{"tags":[],"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1606769016,"creation_date":1606452001,"answer_id":65032172,"question_id":65017630,"body_markdown":"I think I agree with Andreas in the comment: It’s quite simple to take a taste of the date string to determine its format.\r\n\r\n\tpublic static String getPattern(String dateString) {\r\n\t\tif (dateString.length() == 8) { // compact format\r\n\t\t\treturn &quot;uuuuMMdd&quot;;\r\n\t\t} else if (dateString.charAt(2) == &#39;/&#39;) {\r\n\t\t\treturn &quot;MM/dd/uuuu&quot;;\r\n\t\t} else {\r\n\t\t\treturn &quot;uuuu-MM-dd&quot;;\r\n\t\t}\r\n\t}\r\n\r\nTry it with the sample strings from your question:\r\n\r\n\t\tString[] strDates = new String[]{\r\n\t            &quot;20180429&quot;,\r\n\t            &quot;2018-04-29&quot;,\r\n\t            &quot;04/29/2018&quot;,\r\n\t            &quot;01/20/1999&quot;,\r\n\t            &quot;1899-12-25&quot;,\r\n\t            &quot;2020-02-29&quot;, // leap year this year\r\n\t            &quot;00010101&quot;,\r\n\t            &quot;19160229&quot; // leap year past\r\n\t    };\r\n\r\n\t    for(String date: strDates) {\r\n\t        String pattern = getPattern(date);\r\n\t        DateTimeFormatter formatter = DateTimeFormatter.ofPattern(pattern);\r\n\t\t\tLocalDate parsedDate = LocalDate.parse(date, formatter);\r\n\t\t\tSystem.out.format(&quot;%-10s pattern: %-10s parsed: %s%n&quot;, date, pattern, parsedDate);\r\n\t    }\r\n\r\nOutput is:\r\n\r\n&gt;     20180429   pattern: uuuuMMdd   parsed: 2018-04-29\r\n&gt;     2018-04-29 pattern: uuuu-MM-dd parsed: 2018-04-29\r\n&gt;     04/29/2018 pattern: MM/dd/uuuu parsed: 2018-04-29\r\n&gt;     01/20/1999 pattern: MM/dd/uuuu parsed: 1999-01-20\r\n&gt;     1899-12-25 pattern: uuuu-MM-dd parsed: 1899-12-25\r\n&gt;     2020-02-29 pattern: uuuu-MM-dd parsed: 2020-02-29\r\n&gt;     00010101   pattern: uuuuMMdd   parsed: 0001-01-01\r\n&gt;     19160229   pattern: uuuuMMdd   parsed: 1916-02-29\r\n\r\nIf you prefer a more dynamic, automatic and extensible solution:\r\n\r\n\tprivate static final String[] formatPatterns = { &quot;uuuuMMdd&quot;, &quot;uuuu-MM-dd&quot;, &quot;MM/dd/uuuu&quot; };\r\n\t\r\n\tpublic static String getPattern(String dateString) {\r\n\t\tfor (String pattern : formatPatterns) {\r\n\t\t\ttry {\r\n\t\t        DateTimeFormatter formatter = DateTimeFormatter.ofPattern(pattern);\r\n\t\t\t\tLocalDate.parse(dateString, formatter);\r\n\t\t\t\t// If we ended up here, using the pattern was successful\r\n\t\t\t\treturn pattern;\r\n\t\t\t} catch (DateTimeParseException dtpe) {\r\n\t\t\t\t// Do nothing, try next pattern\r\n\t\t\t}\r\n\t\t}\r\n\t\tthrow new IllegalArgumentException(&quot;We don’t know the format pattern string for &quot; + dateString);\r\n\t}\r\n","title":"How to get date pattern for a date in Java","body":"<p>I think I agree with Andreas in the comment: It’s quite simple to take a taste of the date string to determine its format.</p>\n<pre><code>public static String getPattern(String dateString) {\n    if (dateString.length() == 8) { // compact format\n        return &quot;uuuuMMdd&quot;;\n    } else if (dateString.charAt(2) == '/') {\n        return &quot;MM/dd/uuuu&quot;;\n    } else {\n        return &quot;uuuu-MM-dd&quot;;\n    }\n}\n</code></pre>\n<p>Try it with the sample strings from your question:</p>\n<pre><code>    String[] strDates = new String[]{\n            &quot;20180429&quot;,\n            &quot;2018-04-29&quot;,\n            &quot;04/29/2018&quot;,\n            &quot;01/20/1999&quot;,\n            &quot;1899-12-25&quot;,\n            &quot;2020-02-29&quot;, // leap year this year\n            &quot;00010101&quot;,\n            &quot;19160229&quot; // leap year past\n    };\n\n    for(String date: strDates) {\n        String pattern = getPattern(date);\n        DateTimeFormatter formatter = DateTimeFormatter.ofPattern(pattern);\n        LocalDate parsedDate = LocalDate.parse(date, formatter);\n        System.out.format(&quot;%-10s pattern: %-10s parsed: %s%n&quot;, date, pattern, parsedDate);\n    }\n</code></pre>\n<p>Output is:</p>\n<blockquote>\n<pre><code>20180429   pattern: uuuuMMdd   parsed: 2018-04-29\n2018-04-29 pattern: uuuu-MM-dd parsed: 2018-04-29\n04/29/2018 pattern: MM/dd/uuuu parsed: 2018-04-29\n01/20/1999 pattern: MM/dd/uuuu parsed: 1999-01-20\n1899-12-25 pattern: uuuu-MM-dd parsed: 1899-12-25\n2020-02-29 pattern: uuuu-MM-dd parsed: 2020-02-29\n00010101   pattern: uuuuMMdd   parsed: 0001-01-01\n19160229   pattern: uuuuMMdd   parsed: 1916-02-29\n</code></pre>\n</blockquote>\n<p>If you prefer a more dynamic, automatic and extensible solution:</p>\n<pre><code>private static final String[] formatPatterns = { &quot;uuuuMMdd&quot;, &quot;uuuu-MM-dd&quot;, &quot;MM/dd/uuuu&quot; };\n\npublic static String getPattern(String dateString) {\n    for (String pattern : formatPatterns) {\n        try {\n            DateTimeFormatter formatter = DateTimeFormatter.ofPattern(pattern);\n            LocalDate.parse(dateString, formatter);\n            // If we ended up here, using the pattern was successful\n            return pattern;\n        } catch (DateTimeParseException dtpe) {\n            // Do nothing, try next pattern\n        }\n    }\n    throw new IllegalArgumentException(&quot;We don’t know the format pattern string for &quot; + dateString);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19157023,"reputation":11,"user_id":13993650,"display_name":"Tim Segall"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658387996,"creation_date":1658097701,"answer_id":73015842,"question_id":65017630,"body_markdown":"FTA, of which I am the author, (https://github.com/tsegall/fta) is designed to solve exactly this problem (among others). It currently parses thousands of formats and does not do it via a predefined set, so typically runs extremely quickly. Here is an example, the first line is approximately the provided set of samples, the second line has a set of additional samples:\r\n\r\n    \tpublic static void main(final String[] args) {\r\n\t\tString[] strDates = {\r\n\t\t\t\t&quot;20180429&quot;, &quot;2018-04-29&quot;, &quot;04/29/2018&quot;, &quot;01/20/1999&quot;, &quot;1899-12-25&quot;, &quot;2020-02-29&quot;, &quot;20010101&quot;, &quot;19160229&quot;,\r\n\t\t\t\t&quot;2018.04.29&quot;, &quot;2018.29.04&quot;, &quot;04.29.2018&quot;, &quot;29.04.2018&quot;, &quot;04.2018.29&quot;, &quot;29.2018.04&quot;, &quot;2020/2/29&quot;,\r\n\t\t};\r\n\r\n\r\n\t\tfinal DateTimeParser dtp = new DateTimeParser();\r\n\r\n\t\tfor(String date: strDates) {\r\n\t\t\tString pattern = dtp.determineFormatString(date);\r\n\t\t\tDateTimeFormatter formatter = DateTimeFormatter.ofPattern(pattern);\r\n\t\t\tLocalDate parsedDate = LocalDate.parse(date, formatter);\r\n\t\t\tSystem.out.format(&quot;%-10s pattern: %-10s parsed: %s%n&quot;, date, pattern, parsedDate);\r\n\t\t}\r\n\t}\r\n\r\nWhich will give the following output:\r\n\r\n    20180429   pattern: yyyyMMdd   parsed: 2018-04-29\r\n    2018-04-29 pattern: yyyy-MM-dd parsed: 2018-04-29\r\n    04/29/2018 pattern: MM/dd/yyyy parsed: 2018-04-29\r\n    01/20/1999 pattern: MM/dd/yyyy parsed: 1999-01-20\r\n    1899-12-25 pattern: yyyy-MM-dd parsed: 1899-12-25\r\n    2020-02-29 pattern: yyyy-MM-dd parsed: 2020-02-29\r\n    20010101   pattern: yyyyMMdd   parsed: 2001-01-01\r\n    19160229   pattern: yyyyMMdd   parsed: 1916-02-29\r\n    2018.04.29 pattern: yyyy.MM.dd parsed: 2018-04-29\r\n    2018.29.04 pattern: yyyy.dd.MM parsed: 2018-04-29\r\n    04.29.2018 pattern: MM.dd.yyyy parsed: 2018-04-29\r\n    29.04.2018 pattern: dd.MM.yyyy parsed: 2018-04-29\r\n    04.2018.29 pattern: MM.yyyy.dd parsed: 2018-04-29\r\n    29.2018.04 pattern: dd.yyyy.MM parsed: 2018-04-29\r\n    2020/2/29  pattern: yyyy/M/dd  parsed: 2020-02-29\r\n\r\n\r\n","title":"How to get date pattern for a date in Java","body":"<p>FTA, of which I am the author, (<a href=\"https://github.com/tsegall/fta\" rel=\"nofollow noreferrer\">https://github.com/tsegall/fta</a>) is designed to solve exactly this problem (among others). It currently parses thousands of formats and does not do it via a predefined set, so typically runs extremely quickly. Here is an example, the first line is approximately the provided set of samples, the second line has a set of additional samples:</p>\n<pre><code>    public static void main(final String[] args) {\n    String[] strDates = {\n            &quot;20180429&quot;, &quot;2018-04-29&quot;, &quot;04/29/2018&quot;, &quot;01/20/1999&quot;, &quot;1899-12-25&quot;, &quot;2020-02-29&quot;, &quot;20010101&quot;, &quot;19160229&quot;,\n            &quot;2018.04.29&quot;, &quot;2018.29.04&quot;, &quot;04.29.2018&quot;, &quot;29.04.2018&quot;, &quot;04.2018.29&quot;, &quot;29.2018.04&quot;, &quot;2020/2/29&quot;,\n    };\n\n\n    final DateTimeParser dtp = new DateTimeParser();\n\n    for(String date: strDates) {\n        String pattern = dtp.determineFormatString(date);\n        DateTimeFormatter formatter = DateTimeFormatter.ofPattern(pattern);\n        LocalDate parsedDate = LocalDate.parse(date, formatter);\n        System.out.format(&quot;%-10s pattern: %-10s parsed: %s%n&quot;, date, pattern, parsedDate);\n    }\n}\n</code></pre>\n<p>Which will give the following output:</p>\n<pre><code>20180429   pattern: yyyyMMdd   parsed: 2018-04-29\n2018-04-29 pattern: yyyy-MM-dd parsed: 2018-04-29\n04/29/2018 pattern: MM/dd/yyyy parsed: 2018-04-29\n01/20/1999 pattern: MM/dd/yyyy parsed: 1999-01-20\n1899-12-25 pattern: yyyy-MM-dd parsed: 1899-12-25\n2020-02-29 pattern: yyyy-MM-dd parsed: 2020-02-29\n20010101   pattern: yyyyMMdd   parsed: 2001-01-01\n19160229   pattern: yyyyMMdd   parsed: 1916-02-29\n2018.04.29 pattern: yyyy.MM.dd parsed: 2018-04-29\n2018.29.04 pattern: yyyy.dd.MM parsed: 2018-04-29\n04.29.2018 pattern: MM.dd.yyyy parsed: 2018-04-29\n29.04.2018 pattern: dd.MM.yyyy parsed: 2018-04-29\n04.2018.29 pattern: MM.yyyy.dd parsed: 2018-04-29\n29.2018.04 pattern: dd.yyyy.MM parsed: 2018-04-29\n2020/2/29  pattern: yyyy/M/dd  parsed: 2020-02-29\n</code></pre>\n"}],"owner":{"account_id":1469313,"reputation":5983,"user_id":1381266,"accept_rate":46,"display_name":"Galet"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":577,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1658387996,"creation_date":1606375467,"question_id":65017630,"body_markdown":"    public void parsedate(String date) {\r\n        DateTimeFormatter formatter = null;\r\n\r\n        formatter = new DateTimeFormatterBuilder()\r\n                .appendOptional(DateTimeFormatter.ofPattern(&quot;yyyyMMdd&quot;))\r\n                .appendOptional(DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd&quot;))\r\n                .appendOptional(DateTimeFormatter.ofPattern(&quot;MM/dd/yyyy&quot;)).toFormatter();\r\n        TemporalAccessor parse = formatter.parse(date);\r\n        System.out.println(&quot;original&quot; + date);\r\n        \r\n        return LocalDateTime.parse(date, formatter);\r\n    }\r\n\r\n        String[] strDates = new String[]{\r\n                &quot;20180429&quot;,\r\n                &quot;2018-04-29&quot;,\r\n                &quot;04/29/2018&quot;,\r\n                &quot;01/20/1999&quot;,\r\n                &quot;1899-12-25&quot;,\r\n                &quot;2020-02-29&quot;, // leap year future\r\n                &quot;00010101&quot;,\r\n                &quot;19160229&quot; // leap year past\r\n        };\r\n\r\n        for(String date: strDates) {\r\n            parsedate(date);\r\n        }\r\n\r\n\r\nI am parsing dates with multiple date patterns. I will pass the date string to parsedate method. My date string is parsed. But I want to get the pattern of the date which is parsed.\r\n\r\nExample:\r\n\r\nInput date: &quot;2018-04-29&quot;\r\nProcess: parsedate(&quot;2018-04-29&quot;)\r\nOutput: date parsed successfully\r\n\r\nMy expectation is get the pattern as &quot;yyyy-MM-dd&quot; for Input date: &quot;2018-04-29&quot;. How to get it?","title":"How to get date pattern for a date in Java","body":"<pre><code>public void parsedate(String date) {\n    DateTimeFormatter formatter = null;\n\n    formatter = new DateTimeFormatterBuilder()\n            .appendOptional(DateTimeFormatter.ofPattern(&quot;yyyyMMdd&quot;))\n            .appendOptional(DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd&quot;))\n            .appendOptional(DateTimeFormatter.ofPattern(&quot;MM/dd/yyyy&quot;)).toFormatter();\n    TemporalAccessor parse = formatter.parse(date);\n    System.out.println(&quot;original&quot; + date);\n    \n    return LocalDateTime.parse(date, formatter);\n}\n\n    String[] strDates = new String[]{\n            &quot;20180429&quot;,\n            &quot;2018-04-29&quot;,\n            &quot;04/29/2018&quot;,\n            &quot;01/20/1999&quot;,\n            &quot;1899-12-25&quot;,\n            &quot;2020-02-29&quot;, // leap year future\n            &quot;00010101&quot;,\n            &quot;19160229&quot; // leap year past\n    };\n\n    for(String date: strDates) {\n        parsedate(date);\n    }\n</code></pre>\n<p>I am parsing dates with multiple date patterns. I will pass the date string to parsedate method. My date string is parsed. But I want to get the pattern of the date which is parsed.</p>\n<p>Example:</p>\n<p>Input date: &quot;2018-04-29&quot;\nProcess: parsedate(&quot;2018-04-29&quot;)\nOutput: date parsed successfully</p>\n<p>My expectation is get the pattern as &quot;yyyy-MM-dd&quot; for Input date: &quot;2018-04-29&quot;. How to get it?</p>\n"},{"tags":["java","spring","annotations","aop","factory"],"answers":[{"tags":[],"owner":{"account_id":343938,"reputation":141,"user_id":675956,"accept_rate":75,"display_name":"Jafoy"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1658387886,"creation_date":1374011604,"answer_id":17687687,"question_id":17687240,"body_markdown":"If I&#39;m reading this correctly, you should be able to define them in a JavaConfig `@Configuration` annotated class and then use them elsewhere.\r\n\r\nFrom the docs ([Spring][1]):\r\n\r\n    @Configuration\r\n    public class AppConfig {\r\n      @Bean\r\n      public MyService myService() {\r\n          return new MyServiceImpl();\r\n      }\r\n    }\r\n\r\nYou could do something similar:\r\n\r\n    @Configuration\r\n    public class InterfaceConfig {\r\n      @Bean\r\n      public HelloWorldInterface helloWorldInterface() {\r\n          return MyProxyUtil.getInstance(HelloWorldInterface.class);\r\n      }\r\n    }\r\n\r\nAt that point, Spring would use that definition whenever that bean was needed.\r\n\r\nYou&#39;d have to link in the `@Configuration` class somehow (classpath scanning, programmatically, etc), but that depends on how you&#39;re setting up your application context.\r\n\r\nI think this should work. I&#39;ve used JavaConfig quite a bit, but never quite like this. But it seems reasonable.\r\n\r\n  [1]: http://static.springsource.org/spring/docs/current/spring-framework-reference/html/beans.html#beans-java-basic-concepts","title":"Spring: Delegate to custom proxy wrapper for interface injection","body":"<p>If I'm reading this correctly, you should be able to define them in a JavaConfig <code>@Configuration</code> annotated class and then use them elsewhere.</p>\n<p>From the docs (<a href=\"http://static.springsource.org/spring/docs/current/spring-framework-reference/html/beans.html#beans-java-basic-concepts\" rel=\"nofollow noreferrer\">Spring</a>):</p>\n<pre><code>@Configuration\npublic class AppConfig {\n  @Bean\n  public MyService myService() {\n      return new MyServiceImpl();\n  }\n}\n</code></pre>\n<p>You could do something similar:</p>\n<pre><code>@Configuration\npublic class InterfaceConfig {\n  @Bean\n  public HelloWorldInterface helloWorldInterface() {\n      return MyProxyUtil.getInstance(HelloWorldInterface.class);\n  }\n}\n</code></pre>\n<p>At that point, Spring would use that definition whenever that bean was needed.</p>\n<p>You'd have to link in the <code>@Configuration</code> class somehow (classpath scanning, programmatically, etc), but that depends on how you're setting up your application context.</p>\n<p>I think this should work. I've used JavaConfig quite a bit, but never quite like this. But it seems reasonable.</p>\n"},{"tags":[],"owner":{"account_id":465283,"reputation":10569,"user_id":869264,"display_name":"Jose Luis Martin"},"down_vote_count":0,"up_vote_count":12,"is_accepted":true,"score":12,"last_activity_date":1374091113,"creation_date":1374013913,"answer_id":17688098,"question_id":17687240,"body_markdown":"Yes, you need to implement a  `AutowireCandidateResolver`.\r\n\r\nFor example:\r\n\r\n\r\n    public class ProxyAutowiredCandidateResolver extends SimpleAutowireCandidateResolver {\r\n    \r\n    \t@Override\r\n    \tpublic Object getSuggestedValue(DependencyDescriptor descriptor) {\r\n    \t\tString dependencyClassName = descriptor.getDependencyType().getSimpleName();\r\n    \t\tif (dependencyClassName.endsWith(&quot;Interface&quot;)) {\r\n    \t\t\treturn MyProxyUtil.getInstance(descriptor.getDependencyType());\r\n    \t\t}\r\n    \t\t\r\n    \t\treturn super.getSuggestedValue(descriptor);\r\n    \t}\r\n    \r\n    }\r\n\r\n\r\nYou could use a `BeanFactoryPostProcessor` to configure it in the application context:\r\n\r\n    public class AutowireCandidateResolverConfigurer implements BeanFactoryPostProcessor {\r\n    \r\n    \tprivate AutowireCandidateResolver autowireCandidateResolver;\r\n    \t\r\n    \tpublic void postProcessBeanFactory(\r\n    \t\t\tConfigurableListableBeanFactory beanFactory) throws BeansException {\r\n    \t\tDefaultListableBeanFactory  bf = (DefaultListableBeanFactory) beanFactory;\r\n    \t\tbf.setAutowireCandidateResolver(autowireCandidateResolver);\r\n    \t\t\r\n    \t\t\r\n    \t}\r\n    \r\n    \tpublic AutowireCandidateResolver getAutowireCandidateResolver() {\r\n    \t\treturn autowireCandidateResolver;\r\n    \t}\r\n    \r\n    \tpublic void setAutowireCandidateResolver(\r\n    \r\n    \t\t\tAutowireCandidateResolver autowireCandidateResolver) {\r\n    \t\tthis.autowireCandidateResolver = autowireCandidateResolver;\r\n    \t}\r\n    \r\n    }\r\n\r\n    &lt;bean id=&quot;autowireCandidateResolverConfigurer&quot; class=&quot;AutowireCandidateResolverConfigurer&quot;&gt;\r\n    \t\t&lt;property name=&quot;autowireCandidateResolver&quot;&gt;\r\n    \t\t\t&lt;bean class=&quot;ProxyAutowiredCandidateResolver&quot; /&gt;\r\n    \t\t&lt;/property&gt;\r\n    &lt;/bean&gt;","title":"Spring: Delegate to custom proxy wrapper for interface injection","body":"<p>Yes, you need to implement a  <code>AutowireCandidateResolver</code>.</p>\n\n<p>For example:</p>\n\n<pre><code>public class ProxyAutowiredCandidateResolver extends SimpleAutowireCandidateResolver {\n\n    @Override\n    public Object getSuggestedValue(DependencyDescriptor descriptor) {\n        String dependencyClassName = descriptor.getDependencyType().getSimpleName();\n        if (dependencyClassName.endsWith(\"Interface\")) {\n            return MyProxyUtil.getInstance(descriptor.getDependencyType());\n        }\n\n        return super.getSuggestedValue(descriptor);\n    }\n\n}\n</code></pre>\n\n<p>You could use a <code>BeanFactoryPostProcessor</code> to configure it in the application context:</p>\n\n<pre><code>public class AutowireCandidateResolverConfigurer implements BeanFactoryPostProcessor {\n\n    private AutowireCandidateResolver autowireCandidateResolver;\n\n    public void postProcessBeanFactory(\n            ConfigurableListableBeanFactory beanFactory) throws BeansException {\n        DefaultListableBeanFactory  bf = (DefaultListableBeanFactory) beanFactory;\n        bf.setAutowireCandidateResolver(autowireCandidateResolver);\n\n\n    }\n\n    public AutowireCandidateResolver getAutowireCandidateResolver() {\n        return autowireCandidateResolver;\n    }\n\n    public void setAutowireCandidateResolver(\n\n            AutowireCandidateResolver autowireCandidateResolver) {\n        this.autowireCandidateResolver = autowireCandidateResolver;\n    }\n\n}\n\n&lt;bean id=\"autowireCandidateResolverConfigurer\" class=\"AutowireCandidateResolverConfigurer\"&gt;\n        &lt;property name=\"autowireCandidateResolver\"&gt;\n            &lt;bean class=\"ProxyAutowiredCandidateResolver\" /&gt;\n        &lt;/property&gt;\n&lt;/bean&gt;\n</code></pre>\n"}],"owner":{"account_id":38834,"reputation":3597,"user_id":111716,"accept_rate":92,"display_name":"case nelson"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5678,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"accepted_answer_id":17688098,"answer_count":2,"score":8,"last_activity_date":1658387886,"creation_date":1374009761,"question_id":17687240,"body_markdown":"In a very large legacy application I have interfaces and classes that do **not** implement those interfaces. \r\n\r\nThe interfaces are generated based on the class so the signatures are the same (except the interface adds another exception on top) and the names are similar (so it&#39;s easy to find the class name from the interface name).\r\n\r\nTo get an implementation of the interface we do a bunch of processing and logging calls but basically use `java.lang.reflect.Proxy` to delegate to the class. Simplified it looks like this:\r\n\r\n    // This will create a proxy and invoke handler that calls HelloWorld.doSomething\r\n    HelloWorldInterface i = MyProxyUtil.getInstance(HelloWorldInterface.class);\r\n    i.doSomething();\r\n    \r\n    public interface HelloWorldInterface {\r\n        public void doSomething() throws Exception;  \r\n    }\r\n\r\n    public class HelloWorld {\r\n        public void doSomething() {\r\n         //something\r\n        }\r\n    }\r\n\r\nIs it possible with Spring annotation processing, to generically `@Autowire` all fields of type `*Interface` and have spring use `MyProxyUtil.getInstance(*Interface.class)` to inject the implementation?\r\n\r\nSuch that \r\n\r\n    @Autowire HelloWorldInterface a;\r\n    \r\n    HelloWorldInterface b = MyProxyUtil.getInstance(HelloWorldInterface.class);\r\n    \r\n    @Autowire AnotherInterface c;\r\n    \r\n    AnotherInterface d = MyProxyUtil.getInstance(AnotherInterface.class);\r\n    \r\n    \r\n    a == b\r\n    c == d\r\n\r\n","title":"Spring: Delegate to custom proxy wrapper for interface injection","body":"<p>In a very large legacy application I have interfaces and classes that do <strong>not</strong> implement those interfaces. </p>\n\n<p>The interfaces are generated based on the class so the signatures are the same (except the interface adds another exception on top) and the names are similar (so it's easy to find the class name from the interface name).</p>\n\n<p>To get an implementation of the interface we do a bunch of processing and logging calls but basically use <code>java.lang.reflect.Proxy</code> to delegate to the class. Simplified it looks like this:</p>\n\n<pre><code>// This will create a proxy and invoke handler that calls HelloWorld.doSomething\nHelloWorldInterface i = MyProxyUtil.getInstance(HelloWorldInterface.class);\ni.doSomething();\n\npublic interface HelloWorldInterface {\n    public void doSomething() throws Exception;  \n}\n\npublic class HelloWorld {\n    public void doSomething() {\n     //something\n    }\n}\n</code></pre>\n\n<p>Is it possible with Spring annotation processing, to generically <code>@Autowire</code> all fields of type <code>*Interface</code> and have spring use <code>MyProxyUtil.getInstance(*Interface.class)</code> to inject the implementation?</p>\n\n<p>Such that </p>\n\n<pre><code>@Autowire HelloWorldInterface a;\n\nHelloWorldInterface b = MyProxyUtil.getInstance(HelloWorldInterface.class);\n\n@Autowire AnotherInterface c;\n\nAnotherInterface d = MyProxyUtil.getInstance(AnotherInterface.class);\n\n\na == b\nc == d\n</code></pre>\n"},{"tags":["java","android","firebase","firebase-realtime-database"],"comments":[{"owner":{"account_id":72426,"reputation":573714,"user_id":209103,"accept_rate":73,"display_name":"Frank van Puffelen"},"score":0,"creation_date":1658326883,"post_id":73046823,"comment_id":129024729,"body_markdown":"It is unclear how you identify the user. Are they signed in with another authentication system? Or are they self-identified only? Please edit your question (there&#39;s a link right under it) to answer these questions, and provide more context on the problem.","body":"It is unclear how you identify the user. Are they signed in with another authentication system? Or are they self-identified only? Please edit your question (there&#39;s a link right under it) to answer these questions, and provide more context on the problem."}],"owner":{"account_id":20926613,"reputation":91,"user_id":15373902,"display_name":"Abhas Sharma"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1658387885,"creation_date":1658298188,"question_id":73046823,"body_markdown":"Understand this as I want to create a group chat feature into our current application. Like there are multiple teams and I want to allow teams to chat within themselves. Now I haven&#39;t used firebase auth for authentication. Users are signed in with other authentication system so I have an  arrayList of authenticated users. I want to set the security rules for firebase database that only user available in that arrayList can read or write the messages from database. How can I do that?","title":"How can I set the rules in Firebase database for particular user set without using firebase auth?","body":"<p>Understand this as I want to create a group chat feature into our current application. Like there are multiple teams and I want to allow teams to chat within themselves. Now I haven't used firebase auth for authentication. Users are signed in with other authentication system so I have an  arrayList of authenticated users. I want to set the security rules for firebase database that only user available in that arrayList can read or write the messages from database. How can I do that?</p>\n"},{"tags":["java","multithreading","notify"],"comments":[{"owner":{"account_id":1781872,"reputation":14665,"user_id":1624376,"accept_rate":76,"display_name":"Aubin"},"score":1,"creation_date":1350744211,"post_id":12989397,"comment_id":17619972,"body_markdown":"AMHO the answers are appropriate but you may optimize this code with instantiation: the three classes are the same except the status literal value. You may add a parameter, I suggest executionOrder, to have only one class. Give a name to the thread with setName() or with super() and use it in the exception reporting.","body":"AMHO the answers are appropriate but you may optimize this code with instantiation: the three classes are the same except the status literal value. You may add a parameter, I suggest executionOrder, to have only one class. Give a name to the thread with setName() or with super() and use it in the exception reporting."},{"owner":{"account_id":996598,"reputation":6067,"user_id":1012372,"accept_rate":49,"display_name":"Jayesh"},"score":0,"creation_date":1350744834,"post_id":12989397,"comment_id":17620112,"body_markdown":"true...I will optimize it....thanks Aubin.","body":"true...I will optimize it....thanks Aubin."}],"answers":[{"tags":[],"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1350743563,"creation_date":1350743563,"answer_id":12989444,"question_id":12989397,"body_markdown":"You need to replace\r\n\r\n    if (notifyAllExample.status!=1)\r\n\r\nwith\r\n\r\n    while (notifyAllExample.status!=1)\r\n\r\nand same thing in the other 2 classes. If not, then as soon as the wait exits the thread continues without knowing if it is its turn.\r\n","title":"running 3 threads in sequence java","body":"<p>You need to replace</p>\n\n<pre><code>if (notifyAllExample.status!=1)\n</code></pre>\n\n<p>with</p>\n\n<pre><code>while (notifyAllExample.status!=1)\n</code></pre>\n\n<p>and same thing in the other 2 classes. If not, then as soon as the wait exits the thread continues without knowing if it is its turn.</p>\n"},{"tags":[],"owner":{"account_id":299251,"reputation":335905,"user_id":605744,"accept_rate":100,"display_name":"Tomasz Nurkiewicz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1350743614,"creation_date":1350743614,"answer_id":12989450,"question_id":12989397,"body_markdown":"Replace:\r\n\r\n    if(notifyAllExample.status!=1){\r\n       notifyAllExample.wait();\r\n    }\r\n\r\nwith:\r\n\r\n    while(notifyAllExample.status!=1){\r\n       notifyAllExample.wait();\r\n    }\r\n\r\nin all classes accordingly.","title":"running 3 threads in sequence java","body":"<p>Replace:</p>\n\n<pre><code>if(notifyAllExample.status!=1){\n   notifyAllExample.wait();\n}\n</code></pre>\n\n<p>with:</p>\n\n<pre><code>while(notifyAllExample.status!=1){\n   notifyAllExample.wait();\n}\n</code></pre>\n\n<p>in all classes accordingly.</p>\n"},{"tags":[],"owner":{"account_id":86297,"reputation":23984,"user_id":240078,"accept_rate":58,"display_name":"Vikdor"},"down_vote_count":0,"up_vote_count":14,"is_accepted":true,"score":14,"last_activity_date":1350744245,"creation_date":1350743647,"answer_id":12989454,"question_id":12989397,"body_markdown":"Convert those IF statements to WHILE statements to get the desired behavior:\r\n\r\n    if (notifyAllExample.status != 2){\r\n        notifyAllExample.wait();\r\n    }\r\n\r\nto\r\n\r\n    while (notifyAllExample.status != 2){\r\n        notifyAllExample.wait();\r\n    }\r\n\r\nThis will ensure that if a thread is notified, it won&#39;t go out of the while loop until the status value is what it expects.\r\n\r\nAlso, mark `status` as volatile so that the threads won&#39;t have a local copy.","title":"running 3 threads in sequence java","body":"<p>Convert those IF statements to WHILE statements to get the desired behavior:</p>\n\n<pre><code>if (notifyAllExample.status != 2){\n    notifyAllExample.wait();\n}\n</code></pre>\n\n<p>to</p>\n\n<pre><code>while (notifyAllExample.status != 2){\n    notifyAllExample.wait();\n}\n</code></pre>\n\n<p>This will ensure that if a thread is notified, it won't go out of the while loop until the status value is what it expects.</p>\n\n<p>Also, mark <code>status</code> as volatile so that the threads won't have a local copy.</p>\n"},{"tags":[],"owner":{"account_id":4333615,"reputation":309,"user_id":3538381,"display_name":"Manoj Saxena"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1397615961,"creation_date":1397614790,"answer_id":23097860,"question_id":12989397,"body_markdown":"     public class RunThreadsInOrder implements Runnable {\r\n    \r\n    \tstatic int numThread = 1;\r\n    \tstatic int threadAllowedToRun = 1;\r\n    \tint myThreadID;\r\n    \tprivate static Object myLock = new Object();\r\n    \r\n    \tpublic RunThreadsInOrder() {\r\n    \t\tthis.myThreadID = numThread++;\r\n    \t\tSystem.out.println(&quot;Thread ID:&quot; + myThreadID);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void run() {\r\n    \t\tsynchronized (myLock) {\r\n    \t\t\twhile (myThreadID != threadAllowedToRun) {\r\n    \t\t\t\ttry {\r\n    \t\t\t\t\tmyLock.wait();\r\n    \t\t\t\t} catch (InterruptedException e) {\r\n    \r\n    \t\t\t\t} catch (Exception e) {}\r\n    \t\t\t}\r\n    \t\t\ttry {\r\n    \t\t\t\tThread.sleep(2000);\r\n    \t\t\t} catch (InterruptedException e) {\r\n    \t\t\t}\r\n    \r\n    \t\t\tSystem.out.println(&quot;myThreadID is running: &quot; + myThreadID);\r\n    \t\t\tmyLock.notifyAll();\r\n    \t\t\tthreadAllowedToRun++;\r\n    \t\t}\r\n    \t}\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\t// TODO Auto-generated method stub\r\n    \r\n    \t\tThread t1 = new Thread(new RunThreadsInOrder());\r\n    \t\tThread t2 = new Thread(new RunThreadsInOrder());\r\n    \t\tThread t3 = new Thread(new RunThreadsInOrder());\r\n    \t\tThread t4 = new Thread(new RunThreadsInOrder());\r\n    \t\tThread t5 = new Thread(new RunThreadsInOrder());\r\n    \t\tThread t6 = new Thread(new RunThreadsInOrder());\r\n    \t\tThread t7 = new Thread(new RunThreadsInOrder());\r\n    \r\n    \t\tt7.start();\r\n    \t\tt6.start();\r\n    \t\tt5.start();\r\n    \t\tt4.start();\r\n    \t\tt3.start();\r\n    \t\tt2.start();\r\n    \t\tt1.start();\r\n    \r\n    \t}\r\n    }\r\n\r\n","title":"running 3 threads in sequence java","body":"<pre><code> public class RunThreadsInOrder implements Runnable {\n\n    static int numThread = 1;\n    static int threadAllowedToRun = 1;\n    int myThreadID;\n    private static Object myLock = new Object();\n\n    public RunThreadsInOrder() {\n        this.myThreadID = numThread++;\n        System.out.println(\"Thread ID:\" + myThreadID);\n    }\n\n    @Override\n    public void run() {\n        synchronized (myLock) {\n            while (myThreadID != threadAllowedToRun) {\n                try {\n                    myLock.wait();\n                } catch (InterruptedException e) {\n\n                } catch (Exception e) {}\n            }\n            try {\n                Thread.sleep(2000);\n            } catch (InterruptedException e) {\n            }\n\n            System.out.println(\"myThreadID is running: \" + myThreadID);\n            myLock.notifyAll();\n            threadAllowedToRun++;\n        }\n    }\n\n    public static void main(String[] args) {\n        // TODO Auto-generated method stub\n\n        Thread t1 = new Thread(new RunThreadsInOrder());\n        Thread t2 = new Thread(new RunThreadsInOrder());\n        Thread t3 = new Thread(new RunThreadsInOrder());\n        Thread t4 = new Thread(new RunThreadsInOrder());\n        Thread t5 = new Thread(new RunThreadsInOrder());\n        Thread t6 = new Thread(new RunThreadsInOrder());\n        Thread t7 = new Thread(new RunThreadsInOrder());\n\n        t7.start();\n        t6.start();\n        t5.start();\n        t4.start();\n        t3.start();\n        t2.start();\n        t1.start();\n\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":538573,"reputation":4901,"user_id":906514,"display_name":"Yadu"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1399161538,"creation_date":1399161538,"answer_id":23451084,"question_id":12989397,"body_markdown":"I think it&#39;s simpler to achieve this using join.\r\nExample:\r\n\r\n        public static void main(String[] args) {    \r\n        final Thread t1 = new Thread(&quot;t1&quot;) {\r\n            @Override\r\n            public void run() {\r\n                System.out.println(&quot;i am thread: &quot; + Thread.currentThread().getName());\r\n            }\r\n        };\r\n\r\n        final Thread t2 = new Thread(t1, &quot;t2&quot;) {\r\n            @Override\r\n            public void run() {\r\n                t1.start();\r\n                try {\r\n                    t1.join();\r\n                } catch ( InterruptedException e ) {\r\n                    // TODO Auto-generated catch block\r\n                    e.printStackTrace();\r\n                }\r\n                System.out.println(&quot;i am thread: &quot; + Thread.currentThread().getName());\r\n            }\r\n        };\r\n\r\n        Thread t3 = new Thread(t2, &quot;t3&quot;) {\r\n            @Override\r\n            public void run() {\r\n                t2.start();\r\n                try {\r\n                    t2.join();\r\n                } catch ( InterruptedException e ) {\r\n                    // TODO Auto-generated catch block\r\n                    e.printStackTrace();\r\n                }\r\n                System.out.println(&quot;i am thread: &quot; + Thread.currentThread().getName());\r\n            }\r\n        };\r\n\r\n        t3.start();\r\n}","title":"running 3 threads in sequence java","body":"<p>I think it's simpler to achieve this using join.\nExample:</p>\n\n<pre><code>    public static void main(String[] args) {    \n    final Thread t1 = new Thread(\"t1\") {\n        @Override\n        public void run() {\n            System.out.println(\"i am thread: \" + Thread.currentThread().getName());\n        }\n    };\n\n    final Thread t2 = new Thread(t1, \"t2\") {\n        @Override\n        public void run() {\n            t1.start();\n            try {\n                t1.join();\n            } catch ( InterruptedException e ) {\n                // TODO Auto-generated catch block\n                e.printStackTrace();\n            }\n            System.out.println(\"i am thread: \" + Thread.currentThread().getName());\n        }\n    };\n\n    Thread t3 = new Thread(t2, \"t3\") {\n        @Override\n        public void run() {\n            t2.start();\n            try {\n                t2.join();\n            } catch ( InterruptedException e ) {\n                // TODO Auto-generated catch block\n                e.printStackTrace();\n            }\n            System.out.println(\"i am thread: \" + Thread.currentThread().getName());\n        }\n    };\n\n    t3.start();\n</code></pre>\n\n<p>}</p>\n"},{"tags":[],"owner":{"account_id":2841389,"reputation":94,"user_id":2440945,"display_name":"Visu"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1470301242,"creation_date":1461835252,"answer_id":36910354,"question_id":12989397,"body_markdown":"Here is my solution please try and let me know \r\n\r\n    package thread;\r\n    \r\n    class SyncPrinter {\r\n    \tpublic static void main(String[] args) {\r\n    \t\tSyncPrinterAction printAction1 = new SyncPrinterAction(new int[]{1,5,9,13}, true);\r\n    \t\tSyncPrinterAction printAction2 = new SyncPrinterAction(new int[]{2,6,10,14}, true);\r\n    \t\tSyncPrinterAction printAction3 = new SyncPrinterAction(new int[]{3,7,11,15}, true);\r\n    \t\tSyncPrinterAction printAction4 = new SyncPrinterAction(new int[]{4,8,12,16}, false);\r\n    \t\t\r\n    \t\tprintAction1.setDependentAction(printAction4);\r\n    \t\tprintAction2.setDependentAction(printAction1);\r\n    \t\tprintAction3.setDependentAction(printAction2);\r\n    \t\tprintAction4.setDependentAction(printAction3);\r\n    \t\t\r\n    \t\tnew Thread(printAction1, &quot;T1&quot;).start();;\t\t\r\n    \t\tnew Thread(printAction2, &quot;T2&quot;).start();\r\n    \t\tnew Thread(printAction3, &quot;T3&quot;).start();\t\t\r\n    \t\tnew Thread(printAction4, &quot;T4&quot;).start();\r\n    \t\t\r\n    \r\n    \t\t\r\n    \t}\r\n    }\r\n    \r\n    class SyncPrinterAction implements Runnable {\r\n    \r\n    \tprivate volatile boolean dependent;\r\n    \tprivate SyncPrinterAction dependentAction;\r\n    \tint[] data;\r\n    \r\n    \tpublic void setDependentAction(SyncPrinterAction dependentAction){\r\n    \t\tthis.dependentAction = dependentAction;\r\n    \t\t\r\n    \t}\r\n    \t\r\n    \tpublic SyncPrinterAction( int[] data, boolean dependent) {\r\n    \t\tthis.data = data;\r\n    \t\tthis.dependent = dependent;\r\n    \t}\r\n    \t\r\n    \tpublic SyncPrinterAction( int[] data, SyncPrinterAction dependentAction, boolean dependent) {\r\n    \t\tthis.dependentAction = dependentAction;\r\n    \t\tthis.data = data;\r\n    \t\tthis.dependent = dependent;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void run() {\r\n    \t\tsynchronized (this) {\r\n    \r\n    \t\t\tfor (int value : data) {\r\n    \t\t\t\t\r\n    \t\t\t\ttry {\r\n    \t\t\t\t\twhile(dependentAction.isDependent())\r\n    \t\t\t\t\t\t//System.out.println(&quot;\\t\\t&quot;+Thread.currentThread().getName() + &quot; :: Waithing for dependent action to complete&quot;);\r\n    \t\t\t\t\twait(100);\r\n    \t\t\t\t} catch (InterruptedException e) {\r\n    \t\t\t\t\te.printStackTrace();\r\n    \t\t\t\t}\r\n    \t\t\t\t\r\n    \t\t\t\tdependentAction.setDependent(true);\r\n    \t\t\t\t\r\n    \t\t\t\tSystem.out.println(Thread.currentThread().getName() + &quot; :: &quot; +value);\r\n    \t\t\t\tdependent = false;\r\n    \t\t\t}\r\n    \r\n    \t\t}\r\n    \r\n    \t}\r\n    \r\n    \tprivate void setDependent(boolean dependent) {\r\n    \t\tthis.dependent = dependent;\r\n    \t\t\r\n    \t}\r\n    \r\n    \tprivate boolean isDependent() {\r\n    \t\treturn dependent;\r\n    \t}\r\n    \r\n    }","title":"running 3 threads in sequence java","body":"<p>Here is my solution please try and let me know </p>\n\n<pre><code>package thread;\n\nclass SyncPrinter {\n    public static void main(String[] args) {\n        SyncPrinterAction printAction1 = new SyncPrinterAction(new int[]{1,5,9,13}, true);\n        SyncPrinterAction printAction2 = new SyncPrinterAction(new int[]{2,6,10,14}, true);\n        SyncPrinterAction printAction3 = new SyncPrinterAction(new int[]{3,7,11,15}, true);\n        SyncPrinterAction printAction4 = new SyncPrinterAction(new int[]{4,8,12,16}, false);\n\n        printAction1.setDependentAction(printAction4);\n        printAction2.setDependentAction(printAction1);\n        printAction3.setDependentAction(printAction2);\n        printAction4.setDependentAction(printAction3);\n\n        new Thread(printAction1, \"T1\").start();;        \n        new Thread(printAction2, \"T2\").start();\n        new Thread(printAction3, \"T3\").start();     \n        new Thread(printAction4, \"T4\").start();\n\n\n\n    }\n}\n\nclass SyncPrinterAction implements Runnable {\n\n    private volatile boolean dependent;\n    private SyncPrinterAction dependentAction;\n    int[] data;\n\n    public void setDependentAction(SyncPrinterAction dependentAction){\n        this.dependentAction = dependentAction;\n\n    }\n\n    public SyncPrinterAction( int[] data, boolean dependent) {\n        this.data = data;\n        this.dependent = dependent;\n    }\n\n    public SyncPrinterAction( int[] data, SyncPrinterAction dependentAction, boolean dependent) {\n        this.dependentAction = dependentAction;\n        this.data = data;\n        this.dependent = dependent;\n    }\n\n    @Override\n    public void run() {\n        synchronized (this) {\n\n            for (int value : data) {\n\n                try {\n                    while(dependentAction.isDependent())\n                        //System.out.println(\"\\t\\t\"+Thread.currentThread().getName() + \" :: Waithing for dependent action to complete\");\n                    wait(100);\n                } catch (InterruptedException e) {\n                    e.printStackTrace();\n                }\n\n                dependentAction.setDependent(true);\n\n                System.out.println(Thread.currentThread().getName() + \" :: \" +value);\n                dependent = false;\n            }\n\n        }\n\n    }\n\n    private void setDependent(boolean dependent) {\n        this.dependent = dependent;\n\n    }\n\n    private boolean isDependent() {\n        return dependent;\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8957792,"reputation":11,"user_id":6681518,"display_name":"Ameya"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1476328505,"creation_date":1470384943,"answer_id":38784417,"question_id":12989397,"body_markdown":"        public class Main {\r\n            public static void main(String[] args) throws IOException{\r\n            Thread t1 = new Thread(new A(), &quot;1&quot;);\r\n            Thread t2 = new Thread(new A(), &quot;2&quot;);\r\n            Thread t3 = new Thread(new A(), &quot;3&quot;);\r\n    \r\n            t1.start();\r\n            try{\r\n                t1.join();\r\n            }catch (Exception e){\r\n    \r\n            }\r\n            t2.start();\r\n            try{\r\n                t2.join();\r\n            }catch (Exception e){\r\n    \r\n            }\r\n            t3.start();\r\n            try{\r\n                t3.join();\r\n            }catch (Exception e){\r\n    \r\n            }\r\n    \r\n    \r\n        }\r\n    }\r\n    \r\n        class A implements Runnable{\r\n        public void run(){\r\n            System.out.println(Thread.currentThread().getName());\r\n        }\r\n    }\r\n\r\nor you can use Executor Framework\r\n\r\n    public class Sequence {\r\n        int valve = 1;\r\n        public static void main(String[] args){\r\n            Sequence s = new Sequence();\r\n            ExecutorService es = Executors.newFixedThreadPool(3);\r\n    \r\n            List&lt;Runnable&gt; rList = new ArrayList&lt;&gt;();\r\n            rList.add(new A(s));\r\n            rList.add(new B(s));\r\n            rList.add(new C(s));\r\n    \r\n            for(int i = 0; i &lt; rList.size(); i++){\r\n                es.submit(rList.get(i));\r\n            }\r\n            es.shutdown();\r\n    \r\n        }\r\n    }\r\n\r\n    class A implements Runnable{\r\n        Sequence s;\r\n    \r\n        A(Sequence s){\r\n            this.s = s;\r\n        }\r\n    \r\n        public void run(){\r\n            synchronized (s) {\r\n                for (int i = 0; i &lt; 10; i++) {\r\n                    while (s.valve != 1) {\r\n                        try {\r\n                            s.wait();\r\n                        } catch (InterruptedException e) {\r\n                            e.printStackTrace();\r\n                        }\r\n                    }\r\n                    System.out.println(&quot;A&quot;);\r\n                    s.valve = 2;\r\n                    s.notifyAll();\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    class B implements Runnable{\r\n        Sequence s;\r\n    \r\n        B(Sequence s){\r\n            this.s = s;\r\n        }\r\n    \r\n        public void run() {\r\n            synchronized (s) {\r\n                for (int i = 0; i &lt; 10; i++) {\r\n                    while (s.valve != 2) {\r\n                        try {\r\n                            s.wait();\r\n                        } catch (InterruptedException e) {\r\n                            e.printStackTrace();\r\n                        }\r\n                    }\r\n                    System.out.println(&quot;B&quot;);\r\n                    s.valve = 3;\r\n                    s.notifyAll();\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    class C implements Runnable{\r\n        Sequence s;\r\n    \r\n        C(Sequence s){\r\n            this.s = s;\r\n        }\r\n    \r\n        public void run() {\r\n            synchronized (s) {\r\n                for(int i = 0; i &lt; 10; i++) {\r\n                    while (s.valve != 3) {\r\n                        try {\r\n                            s.wait();\r\n                        } catch (InterruptedException e) {\r\n                            e.printStackTrace();\r\n                        }\r\n                    }\r\n                    System.out.println(&quot;C&quot;);\r\n                    s.valve = 1;\r\n                    s.notifyAll();\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\nIn the first case the join for each thread causes the threads to wait for one another. In the second case a list stores the threads and executor executes them one after another creating 3 threads\r\n\r\nAnother way to do this is where only one runnable class is present and communication between thread is done via static variable in the main class and a variable in the runnable class\r\n\r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    import java.util.concurrent.Executor;\r\n    import java.util.concurrent.ExecutorService;\r\n    import java.util.concurrent.Executors;\r\n    \r\n    public class Seq {\r\n        int i = 1;\r\n        public static void main(String[] args){\r\n            Seq s = new Seq();\r\n            Common c1 = new Common(s, 1);\r\n            Common c2 = new Common(s, 2);\r\n            Common c3 = new Common(s, 3);\r\n    \r\n            List&lt;Runnable&gt; l = new ArrayList&lt;&gt;();\r\n            l.add(c1);\r\n            l.add(c2);\r\n            l.add(c3);\r\n    \r\n            ExecutorService es = Executors.newFixedThreadPool(3);\r\n            for(int i = 0; i &lt; 3; i++){\r\n                es.submit(l.get(i));\r\n            }\r\n            es.shutdown();\r\n        }\r\n    }\r\n    \r\n    class Common implements Runnable{\r\n        Seq s;\r\n        int o;\r\n    \r\n        Common(Seq s, int o){\r\n            this.s = s;\r\n            this.o = o;\r\n        }\r\n    \r\n        public void run(){\r\n            synchronized (s) {\r\n                for (int z = 0; z &lt; 100; z++) {\r\n                    if(s.i &gt; 3)\r\n                        s.i = 1;\r\n                    while (s.i != o) {\r\n                        try {\r\n                            s.wait();\r\n                        } catch (InterruptedException e) {\r\n                            e.printStackTrace();\r\n                        }\r\n                    }\r\n                    System.out.println(o);\r\n                    s.i++;\r\n                    s.notifyAll();\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n","title":"running 3 threads in sequence java","body":"<pre><code>    public class Main {\n        public static void main(String[] args) throws IOException{\n        Thread t1 = new Thread(new A(), \"1\");\n        Thread t2 = new Thread(new A(), \"2\");\n        Thread t3 = new Thread(new A(), \"3\");\n\n        t1.start();\n        try{\n            t1.join();\n        }catch (Exception e){\n\n        }\n        t2.start();\n        try{\n            t2.join();\n        }catch (Exception e){\n\n        }\n        t3.start();\n        try{\n            t3.join();\n        }catch (Exception e){\n\n        }\n\n\n    }\n}\n\n    class A implements Runnable{\n    public void run(){\n        System.out.println(Thread.currentThread().getName());\n    }\n}\n</code></pre>\n\n<p>or you can use Executor Framework</p>\n\n<pre><code>public class Sequence {\n    int valve = 1;\n    public static void main(String[] args){\n        Sequence s = new Sequence();\n        ExecutorService es = Executors.newFixedThreadPool(3);\n\n        List&lt;Runnable&gt; rList = new ArrayList&lt;&gt;();\n        rList.add(new A(s));\n        rList.add(new B(s));\n        rList.add(new C(s));\n\n        for(int i = 0; i &lt; rList.size(); i++){\n            es.submit(rList.get(i));\n        }\n        es.shutdown();\n\n    }\n}\n\nclass A implements Runnable{\n    Sequence s;\n\n    A(Sequence s){\n        this.s = s;\n    }\n\n    public void run(){\n        synchronized (s) {\n            for (int i = 0; i &lt; 10; i++) {\n                while (s.valve != 1) {\n                    try {\n                        s.wait();\n                    } catch (InterruptedException e) {\n                        e.printStackTrace();\n                    }\n                }\n                System.out.println(\"A\");\n                s.valve = 2;\n                s.notifyAll();\n            }\n        }\n    }\n}\n\nclass B implements Runnable{\n    Sequence s;\n\n    B(Sequence s){\n        this.s = s;\n    }\n\n    public void run() {\n        synchronized (s) {\n            for (int i = 0; i &lt; 10; i++) {\n                while (s.valve != 2) {\n                    try {\n                        s.wait();\n                    } catch (InterruptedException e) {\n                        e.printStackTrace();\n                    }\n                }\n                System.out.println(\"B\");\n                s.valve = 3;\n                s.notifyAll();\n            }\n        }\n    }\n}\n\nclass C implements Runnable{\n    Sequence s;\n\n    C(Sequence s){\n        this.s = s;\n    }\n\n    public void run() {\n        synchronized (s) {\n            for(int i = 0; i &lt; 10; i++) {\n                while (s.valve != 3) {\n                    try {\n                        s.wait();\n                    } catch (InterruptedException e) {\n                        e.printStackTrace();\n                    }\n                }\n                System.out.println(\"C\");\n                s.valve = 1;\n                s.notifyAll();\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>In the first case the join for each thread causes the threads to wait for one another. In the second case a list stores the threads and executor executes them one after another creating 3 threads</p>\n\n<p>Another way to do this is where only one runnable class is present and communication between thread is done via static variable in the main class and a variable in the runnable class</p>\n\n<pre><code>import java.util.ArrayList;\nimport java.util.List;\nimport java.util.concurrent.Executor;\nimport java.util.concurrent.ExecutorService;\nimport java.util.concurrent.Executors;\n\npublic class Seq {\n    int i = 1;\n    public static void main(String[] args){\n        Seq s = new Seq();\n        Common c1 = new Common(s, 1);\n        Common c2 = new Common(s, 2);\n        Common c3 = new Common(s, 3);\n\n        List&lt;Runnable&gt; l = new ArrayList&lt;&gt;();\n        l.add(c1);\n        l.add(c2);\n        l.add(c3);\n\n        ExecutorService es = Executors.newFixedThreadPool(3);\n        for(int i = 0; i &lt; 3; i++){\n            es.submit(l.get(i));\n        }\n        es.shutdown();\n    }\n}\n\nclass Common implements Runnable{\n    Seq s;\n    int o;\n\n    Common(Seq s, int o){\n        this.s = s;\n        this.o = o;\n    }\n\n    public void run(){\n        synchronized (s) {\n            for (int z = 0; z &lt; 100; z++) {\n                if(s.i &gt; 3)\n                    s.i = 1;\n                while (s.i != o) {\n                    try {\n                        s.wait();\n                    } catch (InterruptedException e) {\n                        e.printStackTrace();\n                    }\n                }\n                System.out.println(o);\n                s.i++;\n                s.notifyAll();\n            }\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6319752,"reputation":11,"user_id":4908312,"display_name":"Mayank Singh"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1488306503,"creation_date":1488306503,"answer_id":42516190,"question_id":12989397,"body_markdown":"I was asked to write a similar program in an interview with the added condition that it should be extensible in a way that we can provide our own count of threads and they should print characters with the first thread printing &#39;A&#39; and then the subsequent threads printing B, C, D and so on. Here&#39;s how I did it.\r\n\r\n\r\n\tpublic class AlternateCharPrinter {\r\n\t\r\n\t\tpublic static char ch = 65;\r\n\t\r\n\t\tprivate static void createAndStartThreads(int count) {\r\n\t\t\tObject lock = new Object();\r\n\t\t\tfor (int i = 0; i &lt; count; i++) {\r\n\t\t\t\tnew Thread(new AlternateCharRunner((char) (65 + i), lock)).start();\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\tpublic static void main(String[] args) {\r\n\t\t\tcreateAndStartThreads(4);\r\n\t\t}\r\n\t\r\n\t}\r\n\t\r\n\tclass AlternateCharRunner implements Runnable {\r\n\t\r\n\t\tprivate char ch;\r\n\t\tprivate Object lock;\r\n\t\tprivate static int runnerCount;\r\n\t\r\n\t\tpublic AlternateCharRunner(char ch, Object lock) {\r\n\t\t\tthis.ch = ch;\r\n\t\t\tthis.lock = lock;\r\n\t\t\trunnerCount++;\r\n\t\t}\r\n\t\r\n\t\t@Override\r\n\t\tpublic void run() {\r\n\t\t\twhile (true) {\r\n\t\t\t\tsynchronized (lock) {\r\n\t\t\t\t\twhile (ch != AlternateCharPrinter.ch) {\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\tlock.wait();\r\n\t\t\t\t\t\t} catch (InterruptedException e) {\r\n\t\t\t\t\t\t\te.printStackTrace();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tSystem.out.println(AlternateCharPrinter.ch++);\r\n\t\t\t\t\tif (AlternateCharPrinter.ch == (65 + runnerCount)) {\r\n\t\t\t\t\t\tAlternateCharPrinter.ch = 65;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlock.notifyAll();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\r\n\t}\r\n","title":"running 3 threads in sequence java","body":"<p>I was asked to write a similar program in an interview with the added condition that it should be extensible in a way that we can provide our own count of threads and they should print characters with the first thread printing 'A' and then the subsequent threads printing B, C, D and so on. Here's how I did it.</p>\n\n<pre><code>public class AlternateCharPrinter {\n\n    public static char ch = 65;\n\n    private static void createAndStartThreads(int count) {\n        Object lock = new Object();\n        for (int i = 0; i &lt; count; i++) {\n            new Thread(new AlternateCharRunner((char) (65 + i), lock)).start();\n        }\n\n    }\n\n    public static void main(String[] args) {\n        createAndStartThreads(4);\n    }\n\n}\n\nclass AlternateCharRunner implements Runnable {\n\n    private char ch;\n    private Object lock;\n    private static int runnerCount;\n\n    public AlternateCharRunner(char ch, Object lock) {\n        this.ch = ch;\n        this.lock = lock;\n        runnerCount++;\n    }\n\n    @Override\n    public void run() {\n        while (true) {\n            synchronized (lock) {\n                while (ch != AlternateCharPrinter.ch) {\n                    try {\n                        lock.wait();\n                    } catch (InterruptedException e) {\n                        e.printStackTrace();\n                    }\n                }\n                System.out.println(AlternateCharPrinter.ch++);\n                if (AlternateCharPrinter.ch == (65 + runnerCount)) {\n                    AlternateCharPrinter.ch = 65;\n                }\n                lock.notifyAll();\n            }\n        }\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3077582,"reputation":61,"user_id":2606558,"display_name":"Niraj Kumar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1511238052,"creation_date":1510947581,"answer_id":47358116,"question_id":12989397,"body_markdown":"The simplest solution to solve this can be following way:\r\n\r\n\r\n\r\n\r\n\r\n    public class PrintInOrder implements Runnable {\r\n\t\r\n    private int valueToPrint;\r\n\tprivate int id;\r\n\tprivate static int turn = 1;\r\n\tprivate static int RESET_TURN_THRESHOLD = 3;\r\n\t\r\n\tpublic PrintInOrder() {\r\n\t\tthis.valueToPrint = -1;\r\n\t}\r\n\r\n\tpublic PrintInOrder(int id, int val) {\r\n\t\tthis.id = id;\r\n\t\tthis.valueToPrint = val;\r\n\t}\r\n\t\r\n\t@Override\r\n\tpublic void run() {\r\n\t\t\twhile(true) {\r\n\t\t\t\tif (turn == this.id) {\r\n\t\t\t\t\tSystem.out.println(Thread.currentThread().getName() + &quot;::::&quot; + valueToPrint);\r\n\t\t\t\t\tturn++;\r\n\t\t\t\t}\r\n\t\t\t\tif (turn &gt; RESET_TURN_THRESHOLD) {\r\n\t\t\t\t\tturn = 1;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\r\n\t}\r\n\t\r\n\tpublic static void main(String []args) {\r\n\t\tThread t1 = new Thread(new PrintInOrder(1, 1));\r\n\t\tt1.setName(&quot;THREAD-1&quot;);\r\n\t\tt1.start();\r\n\t\tThread t2 = new Thread(new PrintInOrder(2, 2));\r\n\t\tt2.setName(&quot;THREAD-2&quot;);\r\n\t\tt2.start();\r\n\t\tThread t3 = new Thread(new PrintInOrder(3, 3));\r\n\t\tt3.setName(&quot;THREAD-3&quot;);\r\n\t\tt3.start();\r\n\t}\r\n\t\r\n}\r\n\r\n    /*\r\n    OUTPUT::::\r\n    THREAD-1::::1\r\n    THREAD-2::::2\r\n    THREAD-3::::3\r\n    THREAD-1::::1\r\n    THREAD-2::::2\r\n    THREAD-3::::3\r\n    THREAD-1::::1\r\n    THREAD-2::::2\r\n    THREAD-3::::3\r\n    THREAD-1::::1\r\n    THREAD-2::::2\r\n    THREAD-3::::3\r\n    THREAD-1::::1\r\n    THREAD-2::::2\r\n    THREAD-3::::3\r\n    THREAD-1::::1\r\n    THREAD-2::::2\r\n    THREAD-3::::3\r\n    ...\r\n    */","title":"running 3 threads in sequence java","body":"<p>The simplest solution to solve this can be following way:</p>\n\n<pre><code>public class PrintInOrder implements Runnable {\n\nprivate int valueToPrint;\nprivate int id;\nprivate static int turn = 1;\nprivate static int RESET_TURN_THRESHOLD = 3;\n\npublic PrintInOrder() {\n    this.valueToPrint = -1;\n}\n\npublic PrintInOrder(int id, int val) {\n    this.id = id;\n    this.valueToPrint = val;\n}\n\n@Override\npublic void run() {\n        while(true) {\n            if (turn == this.id) {\n                System.out.println(Thread.currentThread().getName() + \"::::\" + valueToPrint);\n                turn++;\n            }\n            if (turn &gt; RESET_TURN_THRESHOLD) {\n                turn = 1;\n            }\n        }\n\n}\n\npublic static void main(String []args) {\n    Thread t1 = new Thread(new PrintInOrder(1, 1));\n    t1.setName(\"THREAD-1\");\n    t1.start();\n    Thread t2 = new Thread(new PrintInOrder(2, 2));\n    t2.setName(\"THREAD-2\");\n    t2.start();\n    Thread t3 = new Thread(new PrintInOrder(3, 3));\n    t3.setName(\"THREAD-3\");\n    t3.start();\n}\n</code></pre>\n\n<p>}</p>\n\n<pre><code>/*\nOUTPUT::::\nTHREAD-1::::1\nTHREAD-2::::2\nTHREAD-3::::3\nTHREAD-1::::1\nTHREAD-2::::2\nTHREAD-3::::3\nTHREAD-1::::1\nTHREAD-2::::2\nTHREAD-3::::3\nTHREAD-1::::1\nTHREAD-2::::2\nTHREAD-3::::3\nTHREAD-1::::1\nTHREAD-2::::2\nTHREAD-3::::3\nTHREAD-1::::1\nTHREAD-2::::2\nTHREAD-3::::3\n...\n*/\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5673210,"reputation":1,"user_id":4487262,"display_name":"Shail"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1590625153,"creation_date":1590625153,"answer_id":62054939,"question_id":12989397,"body_markdown":"Here is my solution -\r\n\r\nI have created three threads each thread knows what it needs to print and what comes after it.\r\n\r\nI have also created a Class NLock which holds the next word which needs to be printed.\r\n\r\nWhenever a thread is able to acquire NLock lock then it checks \r\nif it&#39;s his turn if yes then it prints the word and set the next value to be printed in NLock or else it waits till it&#39;s his turn\r\n\r\n\tpublic class SynchronizeThreeThreads {\r\n\t\t\r\n\t\tpublic static void main(String args[]) throws InterruptedException {\r\n\t\t\tNLock lock=new NLock(&quot;A&quot;);\r\n\t\t\tThread a =new Thread(new PrintInOrder(&quot;A&quot;,&quot;B&quot;,lock));\r\n\t\t\tThread b =new Thread(new PrintInOrder(&quot;B&quot;,&quot;C&quot;,lock));\r\n\t\t\tThread c =new Thread(new PrintInOrder(&quot;C&quot;,&quot;A&quot;,lock));\r\n\t\t\t\r\n\t\t\ta.start();\r\n\t\t\tb.start();\r\n\t\t\tc.start();\r\n\t\t\tc.join(); // Once all is done main thread will exit\r\n\t\t\tSystem.out.println(&quot;Done&quot;);\r\n\t\t}\r\n\t}\r\n\t\r\n\tclass NLock{\r\n\t\t private String value;\r\n\t\t \r\n\t\t public NLock(String value) {\r\n\t\t\t this.value=value;\r\n\t\t }\r\n\t\t \r\n\t\t public String getValue() {\r\n\t\t\t return value;\r\n\t\t }\r\n\t\t \r\n\t\t public void setValue(String next) {\r\n\t\t\t this.value=next;\r\n\t\t }\r\n\t\t \r\n\t}\r\n\t\r\n\tclass PrintInOrder implements Runnable{\r\n\t\t\r\n\t\tprivate String word;\r\n\t\t\r\n\t\tprivate String next;\r\n\t\t\r\n\t\tprivate NLock lock;\r\n\t\t\r\n\t\tpublic PrintInOrder(String word, String next,NLock lock){\r\n\t\t\tthis.word=word;\r\n\t\t\tthis.next=next;\r\n\t\t\tthis.lock=lock;\r\n\t\t}\r\n\t\r\n\t\t@Override\r\n\t\tpublic void run() {\r\n\t\t\tint i=0;\r\n\t\t\twhile(i&lt;3) {\r\n\t\t\t\tsynchronized (lock) {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\t//Check if it&#39;s my turn\r\n\t\t\t\t\t\tif(lock.getValue().equals(word)) {\r\n\t\t\t\t\t\t\tSystem.out.println(this.word);\r\n\t\t\t\t\t\t\t//Set what next needs to be printed\r\n\t\t\t\t\t\t\t//So that when that thread wakes up it knows that it&#39;s his turn\r\n\t\t\t\t\t\t\tlock.setValue(next);\r\n\t\t\t\t\t\t\ti++;\r\n\t\t\t\t\t\t\tlock.notifyAll();\r\n\t\t\t\t\t\t\tThread.sleep(100);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse //Nope not my turn wait\r\n\t\t\t\t\t\t\tlock.wait();\r\n\t\t\t\t\t} catch (InterruptedException e) {\r\n\t\t\t\t\t\te.printStackTrace();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\nBelow is the output\r\n\r\nA\r\nB\r\nC\r\nA\r\nB\r\nC\r\nA\r\nB\r\nC\r\nDone\r\n\r\n\r\n","title":"running 3 threads in sequence java","body":"<p>Here is my solution -</p>\n\n<p>I have created three threads each thread knows what it needs to print and what comes after it.</p>\n\n<p>I have also created a Class NLock which holds the next word which needs to be printed.</p>\n\n<p>Whenever a thread is able to acquire NLock lock then it checks \nif it's his turn if yes then it prints the word and set the next value to be printed in NLock or else it waits till it's his turn</p>\n\n<pre><code>public class SynchronizeThreeThreads {\n\n    public static void main(String args[]) throws InterruptedException {\n        NLock lock=new NLock(\"A\");\n        Thread a =new Thread(new PrintInOrder(\"A\",\"B\",lock));\n        Thread b =new Thread(new PrintInOrder(\"B\",\"C\",lock));\n        Thread c =new Thread(new PrintInOrder(\"C\",\"A\",lock));\n\n        a.start();\n        b.start();\n        c.start();\n        c.join(); // Once all is done main thread will exit\n        System.out.println(\"Done\");\n    }\n}\n\nclass NLock{\n     private String value;\n\n     public NLock(String value) {\n         this.value=value;\n     }\n\n     public String getValue() {\n         return value;\n     }\n\n     public void setValue(String next) {\n         this.value=next;\n     }\n\n}\n\nclass PrintInOrder implements Runnable{\n\n    private String word;\n\n    private String next;\n\n    private NLock lock;\n\n    public PrintInOrder(String word, String next,NLock lock){\n        this.word=word;\n        this.next=next;\n        this.lock=lock;\n    }\n\n    @Override\n    public void run() {\n        int i=0;\n        while(i&lt;3) {\n            synchronized (lock) {\n                try {\n                    //Check if it's my turn\n                    if(lock.getValue().equals(word)) {\n                        System.out.println(this.word);\n                        //Set what next needs to be printed\n                        //So that when that thread wakes up it knows that it's his turn\n                        lock.setValue(next);\n                        i++;\n                        lock.notifyAll();\n                        Thread.sleep(100);\n                    }\n                    else //Nope not my turn wait\n                        lock.wait();\n                } catch (InterruptedException e) {\n                    e.printStackTrace();\n                }\n            }\n\n        }\n    }\n}\n</code></pre>\n\n<p>Below is the output</p>\n\n<p>A\nB\nC\nA\nB\nC\nA\nB\nC\nDone</p>\n"},{"tags":[],"owner":{"account_id":3091204,"reputation":319,"user_id":2617244,"display_name":"Vivek Dhiman"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658387287,"creation_date":1658387287,"answer_id":73062016,"question_id":12989397,"body_markdown":"This is my attempt to solve the same. Any suggestions are welcome. This is the complete running code.\r\n\r\n    import lombok.SneakyThrows;\r\n    import lombok.extern.slf4j.Slf4j;\r\n    \r\n    import java.util.List;\r\n    import java.util.concurrent.atomic.AtomicInteger;\r\n    \r\n    @Slf4j\r\n    public class SeqExecution {\r\n    \tstatic class SeqThread extends Thread {\r\n    \t\tprivate static final Object lock = new Object();\r\n    \t\tprivate static final AtomicInteger AUTO_COUNTER = new AtomicInteger();\r\n    \t\tprivate static final TrackExecution trackExecution = new TrackExecution();\r\n    \r\n    \t\tprivate final int seqNo;\r\n    \r\n    \t\tSeqThread(Runnable runnable) {\r\n    \t\t\tsuper(runnable);\r\n    \t\t\tthis.seqNo = AUTO_COUNTER.getAndIncrement();\r\n    \t\t}\r\n    \r\n    \t\t@SneakyThrows\r\n    \t\t@Override\r\n    \t\tpublic void run() {\r\n    \t\t\twhile (true) {\r\n    \t\t\t\tsynchronized (lock) {\r\n    \t\t\t\t\twhile (trackExecution.CUR_EXECUTION.get() != this.seqNo) {\r\n    \t\t\t\t\t\ttry {\r\n    \t\t\t\t\t\t\tlock.wait(100);\r\n    \t\t\t\t\t\t} catch (Exception e) {}\r\n    \t\t\t\t\t}\r\n    \r\n    \t\t\t\t\t//log.info(&quot;Thread: {} is running&quot;, this.seqNo);\r\n    \t\t\t\t\tsuper.run();\r\n    \t\t\t\t\tsleep(1000);\r\n    \t\t\t\t\ttrackExecution.increment();\r\n    \t\t\t\t\tlock.notifyAll();\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t}\r\n    \r\n    \t\tstatic class TrackExecution {\r\n    \t\t\tprivate final AtomicInteger CUR_EXECUTION = new AtomicInteger();\r\n    \r\n    \t\t\tint get() {\r\n    \t\t\t\treturn CUR_EXECUTION.get();\r\n    \t\t\t}\r\n    \r\n    \t\t\tsynchronized void increment() {\r\n    \t\t\t\tvar val = CUR_EXECUTION.incrementAndGet();\r\n    \r\n    \t\t\t\tif (val &gt;= SeqThread.AUTO_COUNTER.get()) {\r\n    \t\t\t\t\tCUR_EXECUTION.set(0);\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \r\n    \t\t}\r\n    \t}\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tfinal var seqThreads = List.of(new SeqThread(() -&gt; System.out.print(&quot;A &quot;)),\r\n    \t\t\tnew SeqThread(() -&gt; System.out.print(&quot;B &quot;)),\r\n    \t\t\tnew SeqThread(() -&gt; System.out.print(&quot;C &quot;)));\r\n    \t\tseqThreads.forEach(Thread::start);\r\n    \t\tseqThreads.forEach(t -&gt; {\r\n    \t\t\ttry {\r\n    \t\t\t\tt.join();\r\n    \t\t\t} catch (Exception e) {\r\n    \t\t\t\tlog.warn(e.getMessage(), e);\r\n    \t\t\t}\r\n    \t\t});\r\n    \t}\r\n    }","title":"running 3 threads in sequence java","body":"<p>This is my attempt to solve the same. Any suggestions are welcome. This is the complete running code.</p>\n<pre><code>import lombok.SneakyThrows;\nimport lombok.extern.slf4j.Slf4j;\n\nimport java.util.List;\nimport java.util.concurrent.atomic.AtomicInteger;\n\n@Slf4j\npublic class SeqExecution {\n    static class SeqThread extends Thread {\n        private static final Object lock = new Object();\n        private static final AtomicInteger AUTO_COUNTER = new AtomicInteger();\n        private static final TrackExecution trackExecution = new TrackExecution();\n\n        private final int seqNo;\n\n        SeqThread(Runnable runnable) {\n            super(runnable);\n            this.seqNo = AUTO_COUNTER.getAndIncrement();\n        }\n\n        @SneakyThrows\n        @Override\n        public void run() {\n            while (true) {\n                synchronized (lock) {\n                    while (trackExecution.CUR_EXECUTION.get() != this.seqNo) {\n                        try {\n                            lock.wait(100);\n                        } catch (Exception e) {}\n                    }\n\n                    //log.info(&quot;Thread: {} is running&quot;, this.seqNo);\n                    super.run();\n                    sleep(1000);\n                    trackExecution.increment();\n                    lock.notifyAll();\n                }\n            }\n        }\n\n        static class TrackExecution {\n            private final AtomicInteger CUR_EXECUTION = new AtomicInteger();\n\n            int get() {\n                return CUR_EXECUTION.get();\n            }\n\n            synchronized void increment() {\n                var val = CUR_EXECUTION.incrementAndGet();\n\n                if (val &gt;= SeqThread.AUTO_COUNTER.get()) {\n                    CUR_EXECUTION.set(0);\n                }\n            }\n\n        }\n    }\n\n    public static void main(String[] args) {\n        final var seqThreads = List.of(new SeqThread(() -&gt; System.out.print(&quot;A &quot;)),\n            new SeqThread(() -&gt; System.out.print(&quot;B &quot;)),\n            new SeqThread(() -&gt; System.out.print(&quot;C &quot;)));\n        seqThreads.forEach(Thread::start);\n        seqThreads.forEach(t -&gt; {\n            try {\n                t.join();\n            } catch (Exception e) {\n                log.warn(e.getMessage(), e);\n            }\n        });\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":996598,"reputation":6067,"user_id":1012372,"accept_rate":49,"display_name":"Jayesh"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":37211,"favorite_count":0,"down_vote_count":0,"up_vote_count":16,"accepted_answer_id":12989454,"answer_count":11,"score":16,"last_activity_date":1658387287,"creation_date":1350743182,"question_id":12989397,"body_markdown":"I have 3 threads \r\n1st printing A\r\n2nd printing B\r\n3rd printing C\r\n\r\nI want to print in sequence A B C A B C A B C and so on.....\r\n\r\nSo I wrote the program below, but I am not able to achieve the same.\r\nI am aware of the problem that when status=1 at that time say for example B1 and C1 thread are waiting and when I do notifyAll() both waiting thread wake up and depending on CPU allocation it might print B or C.\r\n\r\nin this case I want only B to be printed after A.\r\n\r\nwhat modification I need to do.\r\n\r\n\r\n    public class NotifyAllExample {\r\n    \r\n    \tint status=1;\r\n    \tpublic static void main(String[] args) {\r\n    \r\n    \t\tNotifyAllExample notifyAllExample = new NotifyAllExample();\r\n    \r\n    \t\tA1 a=new A1(notifyAllExample);\r\n    \t\tB1 b=new B1(notifyAllExample);\r\n    \t\tC1 c=new C1(notifyAllExample);\r\n    \r\n    \t\ta.start();\r\n    \t\tb.start();\r\n    \t\tc.start();\r\n    \t}\r\n    }\r\n    \r\n    class A1 extends Thread{\r\n    \tNotifyAllExample notifyAllExample;\r\n    \r\n    \tA1(NotifyAllExample notifyAllExample){\r\n    \t\tthis.notifyAllExample = notifyAllExample;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void run() {\r\n    \r\n    \t\ttry{\r\n    \t\t\tsynchronized (notifyAllExample) {\r\n    \r\n    \t\t\t\tfor (int i = 0; i &lt; 100; i++) {\r\n    \r\n    \t\t\t\t\tif(notifyAllExample.status!=1){\r\n    \t\t\t\t\t\tnotifyAllExample.wait();\r\n    \t\t\t\t\t}\r\n    \r\n    \t\t\t\t\tSystem.out.print(&quot;A &quot;);\r\n    \t\t\t\t\tnotifyAllExample.status = 2;\r\n    \t\t\t\t\tnotifyAllExample.notifyAll();\r\n    \t\t\t\t}\r\n    \r\n    \t\t\t}\r\n    \t\t}catch (Exception e) {\r\n    \t\t\tSystem.out.println(&quot;Exception 1 :&quot;+e.getMessage());\r\n    \t\t}\r\n    \r\n    \t}\r\n    \r\n    }\r\n    \r\n    class B1 extends Thread{\r\n    \r\n    \tNotifyAllExample notifyAllExample;\r\n    \r\n    \tB1(NotifyAllExample notifyAllExample){\r\n    \t\tthis.notifyAllExample = notifyAllExample;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void run() {\r\n    \r\n    \t\ttry{\r\n    \t\t\tsynchronized (notifyAllExample) {\r\n    \r\n    \t\t\t\tfor (int i = 0; i &lt; 100; i++) {\r\n    \r\n    \t\t\t\t\tif(notifyAllExample.status!=2){\r\n    \t\t\t\t\t\tnotifyAllExample.wait();\r\n    \t\t\t\t\t}\r\n    \r\n    \t\t\t\t\tSystem.out.print(&quot;B &quot;);\r\n    \t\t\t\t\tnotifyAllExample.status = 3;\r\n    \t\t\t\t\tnotifyAllExample.notifyAll();\r\n    \t\t\t\t}\r\n    \r\n    \t\t\t}\r\n    \t\t}catch (Exception e) {\r\n    \t\t\tSystem.out.println(&quot;Exception 2 :&quot;+e.getMessage());\r\n    \t\t}\r\n    \r\n    \t}\r\n    }\r\n    \r\n    \r\n    class C1 extends Thread{\r\n    \r\n    \tNotifyAllExample notifyAllExample;\r\n    \r\n    \tC1(NotifyAllExample notifyAllExample){\r\n    \t\tthis.notifyAllExample = notifyAllExample;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void run() {\r\n    \r\n    \t\ttry{\r\n    \t\t\tsynchronized (notifyAllExample) {\r\n    \r\n    \t\t\t\tfor (int i = 0; i &lt; 100; i++) {\r\n    \r\n    \t\t\t\t\tif(notifyAllExample.status!=3){\r\n    \t\t\t\t\t\tnotifyAllExample.wait();\r\n    \t\t\t\t\t}\r\n    \r\n    \t\t\t\t\tSystem.out.print(&quot;C &quot;);\r\n    \t\t\t\t\tnotifyAllExample.status = 1;\r\n    \t\t\t\t\tnotifyAllExample.notifyAll();\r\n    \t\t\t\t}\r\n    \r\n    \t\t\t}\r\n    \t\t}catch (Exception e) {\r\n    \t\t\tSystem.out.println(&quot;Exception 3 :&quot;+e.getMessage());\r\n    \t\t}\r\n    \r\n    \t}\r\n    }","title":"running 3 threads in sequence java","body":"<p>I have 3 threads \n1st printing A\n2nd printing B\n3rd printing C</p>\n\n<p>I want to print in sequence A B C A B C A B C and so on.....</p>\n\n<p>So I wrote the program below, but I am not able to achieve the same.\nI am aware of the problem that when status=1 at that time say for example B1 and C1 thread are waiting and when I do notifyAll() both waiting thread wake up and depending on CPU allocation it might print B or C.</p>\n\n<p>in this case I want only B to be printed after A.</p>\n\n<p>what modification I need to do.</p>\n\n<pre><code>public class NotifyAllExample {\n\n    int status=1;\n    public static void main(String[] args) {\n\n        NotifyAllExample notifyAllExample = new NotifyAllExample();\n\n        A1 a=new A1(notifyAllExample);\n        B1 b=new B1(notifyAllExample);\n        C1 c=new C1(notifyAllExample);\n\n        a.start();\n        b.start();\n        c.start();\n    }\n}\n\nclass A1 extends Thread{\n    NotifyAllExample notifyAllExample;\n\n    A1(NotifyAllExample notifyAllExample){\n        this.notifyAllExample = notifyAllExample;\n    }\n\n    @Override\n    public void run() {\n\n        try{\n            synchronized (notifyAllExample) {\n\n                for (int i = 0; i &lt; 100; i++) {\n\n                    if(notifyAllExample.status!=1){\n                        notifyAllExample.wait();\n                    }\n\n                    System.out.print(\"A \");\n                    notifyAllExample.status = 2;\n                    notifyAllExample.notifyAll();\n                }\n\n            }\n        }catch (Exception e) {\n            System.out.println(\"Exception 1 :\"+e.getMessage());\n        }\n\n    }\n\n}\n\nclass B1 extends Thread{\n\n    NotifyAllExample notifyAllExample;\n\n    B1(NotifyAllExample notifyAllExample){\n        this.notifyAllExample = notifyAllExample;\n    }\n\n    @Override\n    public void run() {\n\n        try{\n            synchronized (notifyAllExample) {\n\n                for (int i = 0; i &lt; 100; i++) {\n\n                    if(notifyAllExample.status!=2){\n                        notifyAllExample.wait();\n                    }\n\n                    System.out.print(\"B \");\n                    notifyAllExample.status = 3;\n                    notifyAllExample.notifyAll();\n                }\n\n            }\n        }catch (Exception e) {\n            System.out.println(\"Exception 2 :\"+e.getMessage());\n        }\n\n    }\n}\n\n\nclass C1 extends Thread{\n\n    NotifyAllExample notifyAllExample;\n\n    C1(NotifyAllExample notifyAllExample){\n        this.notifyAllExample = notifyAllExample;\n    }\n\n    @Override\n    public void run() {\n\n        try{\n            synchronized (notifyAllExample) {\n\n                for (int i = 0; i &lt; 100; i++) {\n\n                    if(notifyAllExample.status!=3){\n                        notifyAllExample.wait();\n                    }\n\n                    System.out.print(\"C \");\n                    notifyAllExample.status = 1;\n                    notifyAllExample.notifyAll();\n                }\n\n            }\n        }catch (Exception e) {\n            System.out.println(\"Exception 3 :\"+e.getMessage());\n        }\n\n    }\n}\n</code></pre>\n"},{"tags":["java","kotlin","reactive-programming","spring-webflux","project-reactor"],"answers":[{"tags":[],"owner":{"account_id":11436413,"reputation":179,"user_id":8383688,"display_name":"Laughing_Man"},"down_vote_count":1,"up_vote_count":0,"is_accepted":true,"score":-1,"last_activity_date":1658386990,"creation_date":1658307679,"answer_id":73048716,"question_id":73047797,"body_markdown":"The problem was that to save an object we need to use `.flatMap` not just `.map`. Because `.map` just transforms elements and `.flatMap` converts them to new **Publishers**.\r\nhttps://projectreactor.io/docs/core/release/api/reactor/core/publisher/Mono.html","title":"How to update a Webflux object from repository and save it back","body":"<p>The problem was that to save an object we need to use <code>.flatMap</code> not just <code>.map</code>. Because <code>.map</code> just transforms elements and <code>.flatMap</code> converts them to new <strong>Publishers</strong>.\n<a href=\"https://projectreactor.io/docs/core/release/api/reactor/core/publisher/Mono.html\" rel=\"nofollow noreferrer\">https://projectreactor.io/docs/core/release/api/reactor/core/publisher/Mono.html</a></p>\n"}],"owner":{"account_id":11436413,"reputation":179,"user_id":8383688,"display_name":"Laughing_Man"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":593,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73048716,"answer_count":1,"score":0,"last_activity_date":1658386990,"creation_date":1658303274,"question_id":73047797,"body_markdown":"I want to 1) get an object from my repository, 2) update that object and then 3) save it back.\r\n\r\nI&#39;ve already done first two things:\r\n\r\n    fun updateUniversity(id: ObjectId,\r\n                         newName: String,\r\n                         newCity: String,\r\n                         newYearOfFoundation: Int): Mono&lt;University&gt; {\r\n        return universityRepository\r\n            .findById(id)\r\n            .switchIfEmpty(Mono.error(NoSuchElementException()))\r\n            .map {\r\n                if (newCity.isNotEmpty()) it.city = newCity\r\n                if (newName.isNotEmpty()) it.name = newName\r\n                if (newYearOfFoundation != -1) it.yearOfFoundation = newYearOfFoundation\r\n                return@map it\r\n            }\r\n    }\r\n\r\nBut I can&#39;t save the result. If I try to save my object through map `.map{ universityRepository.save(it) }` I get an error Type Mismatch, cause it returns Mono in Mono.\r\n\r\n`.then{ universityRepository.save(it) }` also is not my case, because I need to pass a value (which I don&#39;t have) in save function.\r\n\r\nI can call `.block()` but it smells too.\r\n\r\nSo could anyone show what the last line should be to save my updated object back in the repository?","title":"How to update a Webflux object from repository and save it back","body":"<p>I want to 1) get an object from my repository, 2) update that object and then 3) save it back.</p>\n<p>I've already done first two things:</p>\n<pre><code>fun updateUniversity(id: ObjectId,\n                     newName: String,\n                     newCity: String,\n                     newYearOfFoundation: Int): Mono&lt;University&gt; {\n    return universityRepository\n        .findById(id)\n        .switchIfEmpty(Mono.error(NoSuchElementException()))\n        .map {\n            if (newCity.isNotEmpty()) it.city = newCity\n            if (newName.isNotEmpty()) it.name = newName\n            if (newYearOfFoundation != -1) it.yearOfFoundation = newYearOfFoundation\n            return@map it\n        }\n}\n</code></pre>\n<p>But I can't save the result. If I try to save my object through map <code>.map{ universityRepository.save(it) }</code> I get an error Type Mismatch, cause it returns Mono in Mono.</p>\n<p><code>.then{ universityRepository.save(it) }</code> also is not my case, because I need to pass a value (which I don't have) in save function.</p>\n<p>I can call <code>.block()</code> but it smells too.</p>\n<p>So could anyone show what the last line should be to save my updated object back in the repository?</p>\n"},{"tags":["java","mongodb","spring-boot","spring-data-mongodb"],"comments":[{"owner":{"account_id":10846480,"reputation":8784,"user_id":7975771,"accept_rate":12,"display_name":"varman"},"score":1,"creation_date":1597932272,"post_id":63506136,"comment_id":112298657,"body_markdown":"Does https://stackoverflow.com/a/63401555/7975771 help you?","body":"Does <a href=\"https://stackoverflow.com/a/63401555/7975771\">stackoverflow.com/a/63401555/7975771</a> help you?"},{"owner":{"display_name":"user14104736"},"score":1,"creation_date":1597991717,"post_id":63506136,"comment_id":112317802,"body_markdown":"Yaa It&#39;s helpful","body":"Yaa It&#39;s helpful"}],"answers":[{"tags":[],"owner":{"account_id":21983723,"reputation":670,"user_id":16258342,"display_name":"Pranta Palit"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658386586,"creation_date":1658386586,"answer_id":73061903,"question_id":63506136,"body_markdown":"You can create an object-list (ex: contents) with updated data and use `contentRepository.saveAll(contents);` It will update using one db call.","title":"How to update multiple record at once/one db interaction in mongodb using springboot application","body":"<p>You can create an object-list (ex: contents) with updated data and use <code>contentRepository.saveAll(contents);</code> It will update using one db call.</p>\n"}],"owner":{"display_name":"user14104736"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":197,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1658386586,"creation_date":1597929990,"question_id":63506136,"body_markdown":"I have a requirement where i have 100 plus data in mongodb collection ,i need to update each object in the collection but mongoTemplate.findAndModify will update one at a time .So here db interaction will be 100 which is not effective.I need to do update using one db call.Is there any approach. ","title":"How to update multiple record at once/one db interaction in mongodb using springboot application","body":"<p>I have a requirement where i have 100 plus data in mongodb collection ,i need to update each object in the collection but mongoTemplate.findAndModify will update one at a time .So here db interaction will be 100 which is not effective.I need to do update using one db call.Is there any approach.</p>\n"},{"tags":["java","spring","plsql","spring-data-r2dbc","r2dbc"],"comments":[{"owner":{"account_id":4746850,"reputation":1232,"user_id":3837961,"display_name":"Bartosz Olchowik"},"score":0,"creation_date":1658837514,"post_id":73061887,"comment_id":129146433,"body_markdown":"Can you show your stored procedure declaration ?","body":"Can you show your stored procedure declaration ?"}],"owner":{"account_id":13859672,"reputation":139,"user_id":10005612,"display_name":"Nirmal Khedkar"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":470,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1658386494,"creation_date":1658386494,"question_id":73061887,"body_markdown":"For example, in JDBC we specify `typeName` the following way:\r\n```\r\nString procedure = &quot;{? = call CREATE_A_PERSON (?)}&quot;;\r\nCallableStatement statement = conn.prepareCall(procedure);\r\nstatement.registerOutParameter(1, java.sql.Types.STRUCT, &quot;UDO_PERSON&quot;);\r\nstatement.setString(2, &quot;YOURE NAME&quot;);\r\nstatement.execute();\r\n```\r\n\r\nAs mentioned [in this answer on StackOverflow](https://stackoverflow.com/questions/8286769/how-do-i-call-by-jdbc-a-pl-sql-function-that-returns-an-udo-and-interpret-that-r/8293991#8293991).\r\n\r\nIn R2DBC, the same can be done using `Parameters.in` or `Parameters.out`. But for objects like arrays or structures, I&#39;ve not been able to find any way to pass the `typeName` (`UDO_PERSON` in above) to the connection statement. How do I do that?\r\n\r\n```\r\nParameters.out(R2dbcType.COLLECTION,&quot;UDO_PERSON&quot;)\r\n```\r\nThe above throws a &quot;cannot resolve method&quot; error.","title":"How to specify parameter type in R2DBC when using stored procedures?","body":"<p>For example, in JDBC we specify <code>typeName</code> the following way:</p>\n<pre><code>String procedure = &quot;{? = call CREATE_A_PERSON (?)}&quot;;\nCallableStatement statement = conn.prepareCall(procedure);\nstatement.registerOutParameter(1, java.sql.Types.STRUCT, &quot;UDO_PERSON&quot;);\nstatement.setString(2, &quot;YOURE NAME&quot;);\nstatement.execute();\n</code></pre>\n<p>As mentioned <a href=\"https://stackoverflow.com/questions/8286769/how-do-i-call-by-jdbc-a-pl-sql-function-that-returns-an-udo-and-interpret-that-r/8293991#8293991\">in this answer on StackOverflow</a>.</p>\n<p>In R2DBC, the same can be done using <code>Parameters.in</code> or <code>Parameters.out</code>. But for objects like arrays or structures, I've not been able to find any way to pass the <code>typeName</code> (<code>UDO_PERSON</code> in above) to the connection statement. How do I do that?</p>\n<pre><code>Parameters.out(R2dbcType.COLLECTION,&quot;UDO_PERSON&quot;)\n</code></pre>\n<p>The above throws a &quot;cannot resolve method&quot; error.</p>\n"},{"tags":["java","hibernate","jpa"],"answers":[{"tags":[],"owner":{"account_id":1038596,"reputation":34548,"user_id":1045142,"accept_rate":67,"display_name":"Simon Martinelli"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658386320,"creation_date":1658386320,"answer_id":73061845,"question_id":73059253,"body_markdown":"It&#39;s not Hibernate but Spring Data JPA.\r\n\r\nAnd it creates Criteria API queries.\r\n\r\nYou can checkout the code here:\r\nhttps://github.com/spring-projects/spring-data-jpa","title":"How are derived query methods implemented in Hibernate?","body":"<p>It's not Hibernate but Spring Data JPA.</p>\n<p>And it creates Criteria API queries.</p>\n<p>You can checkout the code here:\n<a href=\"https://github.com/spring-projects/spring-data-jpa\" rel=\"nofollow noreferrer\">https://github.com/spring-projects/spring-data-jpa</a></p>\n"}],"owner":{"account_id":357788,"reputation":1967,"user_id":698182,"accept_rate":57,"display_name":"ekcrisp"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":96,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1658386320,"creation_date":1658360884,"question_id":73059253,"body_markdown":"In Hibernate you can use the method name on a repository interface to define a query. I am curious about how this is implemented in hibernate, what does the generated concrete implementation use? Criteria API? Raw query SQL? Something else? Also when/how do these methods get generated? Is it when the app starts?","title":"How are derived query methods implemented in Hibernate?","body":"<p>In Hibernate you can use the method name on a repository interface to define a query. I am curious about how this is implemented in hibernate, what does the generated concrete implementation use? Criteria API? Raw query SQL? Something else? Also when/how do these methods get generated? Is it when the app starts?</p>\n"},{"tags":["java","input","methods","nosuchelementexception"],"comments":[{"owner":{"account_id":25276572,"reputation":379,"user_id":19370273,"display_name":"Leaderboard"},"score":0,"creation_date":1658242921,"post_id":73039264,"comment_id":129000454,"body_markdown":"I&#39;m confused. Did you use ``keyboard.close()`` on _all four_ functions? Also note that Java has garbage collection, though I may be misunderstanding the context of &quot;resource leak&quot;.","body":"I&#39;m confused. Did you use <code>keyboard.close()</code> on <i>all four</i> functions? Also note that Java has garbage collection, though I may be misunderstanding the context of &quot;resource leak&quot;."},{"owner":{"account_id":3159259,"reputation":109666,"user_id":2670892,"display_name":"greg-449"},"score":1,"creation_date":1658242956,"post_id":73039264,"comment_id":129000474,"body_markdown":"Don&#39;t use `double` for currency [Why not use Double or Float to represent currency?](https://stackoverflow.com/q/3730019/2670892)","body":"Don&#39;t use <code>double</code> for currency <a href=\"https://stackoverflow.com/q/3730019/2670892\">Why not use Double or Float to represent currency?</a>"},{"owner":{"account_id":318670,"reputation":15681,"user_id":636009,"display_name":"David Conrad"},"score":2,"creation_date":1658243203,"post_id":73039264,"comment_id":129000597,"body_markdown":"You should not close a `Scanner` that is wrapping `System.in` since you did not open `System.in`. If you are getting a warning, the warning is simply incorrect. However, there is no need to create it four times. You can create one `Scanner` in your `main` method and pass it as a parameter to all the methods that need to use it.","body":"You should not close a <code>Scanner</code> that is wrapping <code>System.in</code> since you did not open <code>System.in</code>. If you are getting a warning, the warning is simply incorrect. However, there is no need to create it four times. You can create one <code>Scanner</code> in your <code>main</code> method and pass it as a parameter to all the methods that need to use it."}],"answers":[{"tags":[],"owner":{"account_id":8049065,"reputation":804,"user_id":6068297,"display_name":"Level_Up"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1658243779,"creation_date":1658243779,"answer_id":73039531,"question_id":73039264,"body_markdown":"You don&#39;t need to close Scanner that is wrapping System.in as David Conrad pointed in the comments. Normally you should have one Scanner associated with System.in. On your place I will created it in main method and pass it as parameter in the methods.\r\n\r\nIf you really do not want to be show this warning you can add ` @SuppressWarnings(&quot;resource&quot;)` on the top of the scanner.\r\n\r\n     //Running \r\n    public static void main(String[] args) \r\n    {\r\n        @SuppressWarnings(&quot;resource&quot;)\r\n        Scanner keyboard = new Scanner(System.in);\r\n        requestAmount(keyboard);\r\n        requestRate(keyboard);\r\n        displayResult();\r\n        \r\n    }","title":"Not sure how to close inputs correctly","body":"<p>You don't need to close Scanner that is wrapping System.in as David Conrad pointed in the comments. Normally you should have one Scanner associated with System.in. On your place I will created it in main method and pass it as parameter in the methods.</p>\n<p>If you really do not want to be show this warning you can add <code> @SuppressWarnings(&quot;resource&quot;)</code> on the top of the scanner.</p>\n<pre><code> //Running \npublic static void main(String[] args) \n{\n    @SuppressWarnings(&quot;resource&quot;)\n    Scanner keyboard = new Scanner(System.in);\n    requestAmount(keyboard);\n    requestRate(keyboard);\n    displayResult();\n    \n}\n</code></pre>\n"}],"owner":{"account_id":25845650,"reputation":1,"user_id":19580548,"display_name":"user19580548"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1658386247,"creation_date":1658242764,"question_id":73039264,"body_markdown":"I have some code in which multiple methods use the keyboard, and are called consecutively in the main method. The exercise I am doing specifically asks for the 4 separate methods so I cannot put them altogether. Originally, I used `keyboard.close()` at the end of each method, but this would cause a `NoSuchElementException` when the second method is run, regardless of the order they&#39;re called. By removing the `keyboard.close()`, the code now works, however I now have warnings for a resource leak as the keyboard isn&#39;t closed. Can anyone point me to a way to close the inputs without getting an error? Any help would be greatly appreciated. \r\n\r\n```java\r\nimport java.util.*;\r\n\r\npublic class CurrencyConverter {\r\n    static double money;\r\n    static double xr;\r\n\r\n    //Running \r\n    public static void main(String[] args)\r\n    {\r\n\r\n        requestAmount();\r\n        requestRate();\r\n        displayResult();\r\n\r\n    }\r\n\r\n    //Retrieving amount of money to be exchanged based on user input\r\n    public static void requestAmount()\r\n    {\r\n        System.out.println(&quot;Please enter quanitity of money to be exchanged:&quot;);\r\n        Scanner keyboard = new Scanner(System.in);\r\n        money = keyboard.nextDouble();\r\n    }\r\n\r\n    //Retrieving exchange rate from user input\r\n    public static void requestRate()\r\n    {\r\n        System.out.println(&quot;Please enter exchange rate:&quot;);\r\n        Scanner keyboard = new Scanner(System.in);\r\n        xr = keyboard.nextDouble();\r\n    }\r\n\r\n    //Converting currency\r\n    public static double conversionCalculator(double moneyIn, double xrIn)\r\n    {\r\n        return moneyIn*xrIn;\r\n    }\r\n\r\n    //Display amount of converted currency\r\n    public static void displayResult()\r\n    {\r\n        System.out.println(&quot;Amount of currency post-conversion = &quot; + conversionCalculator(money, xr));\r\n    }\r\n\r\n\r\n}\r\n    \r\n/*\r\nDesign and implement a program that converts a sum of money to a different\r\ncurrency. The amount of money to be converted, and the exchange rate, are\r\nentered by the user. The program should have separate methods for:\r\n• obtaining the sum of money from the user;\r\n• obtaining the exchange rate from the user;\r\n• making the conversion;\r\n• displaying the result.\r\n*/\r\n```","title":"Not sure how to close inputs correctly","body":"<p>I have some code in which multiple methods use the keyboard, and are called consecutively in the main method. The exercise I am doing specifically asks for the 4 separate methods so I cannot put them altogether. Originally, I used <code>keyboard.close()</code> at the end of each method, but this would cause a <code>NoSuchElementException</code> when the second method is run, regardless of the order they're called. By removing the <code>keyboard.close()</code>, the code now works, however I now have warnings for a resource leak as the keyboard isn't closed. Can anyone point me to a way to close the inputs without getting an error? Any help would be greatly appreciated.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.*;\n\npublic class CurrencyConverter {\n    static double money;\n    static double xr;\n\n    //Running \n    public static void main(String[] args)\n    {\n\n        requestAmount();\n        requestRate();\n        displayResult();\n\n    }\n\n    //Retrieving amount of money to be exchanged based on user input\n    public static void requestAmount()\n    {\n        System.out.println(&quot;Please enter quanitity of money to be exchanged:&quot;);\n        Scanner keyboard = new Scanner(System.in);\n        money = keyboard.nextDouble();\n    }\n\n    //Retrieving exchange rate from user input\n    public static void requestRate()\n    {\n        System.out.println(&quot;Please enter exchange rate:&quot;);\n        Scanner keyboard = new Scanner(System.in);\n        xr = keyboard.nextDouble();\n    }\n\n    //Converting currency\n    public static double conversionCalculator(double moneyIn, double xrIn)\n    {\n        return moneyIn*xrIn;\n    }\n\n    //Display amount of converted currency\n    public static void displayResult()\n    {\n        System.out.println(&quot;Amount of currency post-conversion = &quot; + conversionCalculator(money, xr));\n    }\n\n\n}\n    \n/*\nDesign and implement a program that converts a sum of money to a different\ncurrency. The amount of money to be converted, and the exchange rate, are\nentered by the user. The program should have separate methods for:\n• obtaining the sum of money from the user;\n• obtaining the exchange rate from the user;\n• making the conversion;\n• displaying the result.\n*/\n</code></pre>\n"},{"tags":["java","spring","openapi","springdoc"],"owner":{"account_id":123693,"reputation":4352,"user_id":318306,"accept_rate":87,"display_name":"Eugene"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":479,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1658386092,"creation_date":1658386092,"question_id":73061802,"body_markdown":"In my project, there is an **OpenAPI 3.0.1** spec. One of the schema components has property of type `array`.\r\n\r\n```yml\r\ncomponents:\r\n  schemas:\r\n    cardKey:\r\n      description: ...\r\n      format: base64\r\n      type: string\r\n    \r\n    newRequest:\r\n      description: ...\r\n      properties:\r\n        cardKeyList:\r\n          description: ...\r\n          items:\r\n            $ref: &#39;#/components/schemas/cardKey&#39;\r\n          minItems: 1\r\n          type: array\r\n      required:\r\n      - cards\r\n```\r\n\r\nThe issue is, that in Java it translates to:\r\n```java\r\n@Valid\r\nprivate List&lt;String&gt; cardKeyList = new ArrayList&lt;&gt;();\r\n```\r\nbut I can&#39;t seem to find a way, to specify, that `cardKey`, that is present in that `ArrayList` can&#39;t be `null` as in `minLength`, must be at least 1.\r\n\r\nAs an additional info the project is written in *Java 17* and is based on *Spring Boot*. *OpenAPI* spec is used with *SpringDoc*.","title":"How to specify in OpenAPI components/schemas, that named String property is not-nullable/required?","body":"<p>In my project, there is an <strong>OpenAPI 3.0.1</strong> spec. One of the schema components has property of type <code>array</code>.</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>components:\n  schemas:\n    cardKey:\n      description: ...\n      format: base64\n      type: string\n    \n    newRequest:\n      description: ...\n      properties:\n        cardKeyList:\n          description: ...\n          items:\n            $ref: '#/components/schemas/cardKey'\n          minItems: 1\n          type: array\n      required:\n      - cards\n</code></pre>\n<p>The issue is, that in Java it translates to:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Valid\nprivate List&lt;String&gt; cardKeyList = new ArrayList&lt;&gt;();\n</code></pre>\n<p>but I can't seem to find a way, to specify, that <code>cardKey</code>, that is present in that <code>ArrayList</code> can't be <code>null</code> as in <code>minLength</code>, must be at least 1.</p>\n<p>As an additional info the project is written in <em>Java 17</em> and is based on <em>Spring Boot</em>. <em>OpenAPI</em> spec is used with <em>SpringDoc</em>.</p>\n"},{"tags":["java","swing","fractals"],"comments":[{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":1,"creation_date":1658090814,"post_id":73014523,"comment_id":128959023,"body_markdown":"don&#39;t override paint","body":"don&#39;t override paint"},{"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"score":0,"creation_date":1658098218,"post_id":73014523,"comment_id":128960140,"body_markdown":"You can iterate your image in a worker like [this](https://stackoverflow.com/a/25043676/230513).","body":"You can iterate your image in a worker like <a href=\"https://stackoverflow.com/a/25043676/230513\">this</a>."},{"owner":{"account_id":1564273,"reputation":1454,"user_id":1453413,"display_name":"HoRn"},"score":0,"creation_date":1658122671,"post_id":73014523,"comment_id":128963177,"body_markdown":"Please check grammar according to [ask] when posting","body":"Please check grammar according to <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> when posting"}],"answers":[{"tags":[],"owner":{"account_id":19075915,"reputation":803,"user_id":13929206,"display_name":"Programmer"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1658087962,"creation_date":1658087962,"answer_id":73014963,"question_id":73014523,"body_markdown":"You can create a `BufferedImage`, edit it, and than add it to you frame inside a `JLable`, like this:\r\n```\r\nJLabel lable = new JLabel(new ImageIcon(yourBufferedImage));\r\nframe.addLabel();\r\n```\r\nThis will prevent you from re-calculating your image every time you repaint it.\r\nTo update the image, you should edit your `BufferedImage` and than update your label icon, like this:\r\n```\r\nlabel.setIcon(new ImageIcon(yourBufferedImage));\r\nlabel.repaint();\r\n```","title":"how to draw image pixel by piexel in swing","body":"<p>You can create a <code>BufferedImage</code>, edit it, and than add it to you frame inside a <code>JLable</code>, like this:</p>\n<pre><code>JLabel lable = new JLabel(new ImageIcon(yourBufferedImage));\nframe.addLabel();\n</code></pre>\n<p>This will prevent you from re-calculating your image every time you repaint it.\nTo update the image, you should edit your <code>BufferedImage</code> and than update your label icon, like this:</p>\n<pre><code>label.setIcon(new ImageIcon(yourBufferedImage));\nlabel.repaint();\n</code></pre>\n"}],"owner":{"account_id":25506775,"reputation":59,"user_id":19299127,"display_name":"Joshua"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":133,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":73014963,"answer_count":1,"score":1,"last_activity_date":1658385463,"creation_date":1658084050,"question_id":73014523,"body_markdown":"I recently created a program to explore Mandelbrot&#39;s fractal and after calculated the image I drew it but in a weird way. How can I paint it in clean way? The only way I found is to override the paint method and fill rectangle of 1 pixel (I know the function to get the color is horrible but it&#39;s to make a compact code even if it&#39;s useless).\r\n```java\r\nimport java.awt.Color;\r\nimport javax.swing.JFrame;\r\npublic class Mandelbrot{\r\n    public static void main(String[] args) {\r\n        var panel = new javax.swing.JComponent() {\r\n            public void paint(java.awt.Graphics g) {\r\n                for (int i = 0; i &lt; 1000000; i++) {\r\n                    g.setColor(function(((i % 1000) / 500.0)/zoom + x, (i / 500000.0) / zoom + y, 1));\r\n                    g.fillRect(i % 1000, i / 1000, 1, 1);\r\n                }\r\n            }\r\n        };\r\n        panel.addMouseListener(new java.awt.event.MouseAdapter() {\r\n            @Override\r\n            public void mouseClicked(java.awt.event.MouseEvent e) {\r\n                x += (e.getX() / 1000.0) / zoom;\r\n                y += (e.getY() / 1000.0) / zoom;\r\n                zoom = e.getButton() == 1 ? zoom * 2 : (zoom == 1 ? 1 : zoom / 2);\r\n                panel.repaint();\r\n                System.out.println(&quot;zoom : X&quot; + zoom);\r\n            }\r\n        });\r\n        panel.setBounds(0, 0, 1024, 1024);\r\n        var frame = new JFrame(&quot;FRACTAL&quot;);\r\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n        frame.setSize(1000, 1000);\r\n        frame.add(panel);\r\n        frame.setLocationRelativeTo(null);\r\n        frame.setVisible(true);\r\n    }\r\n    private static double a, b, temp, x = -1.5, y = -1;\r\n    private static int zoom = 1;\r\n    public static Color function(double real, double imag, int accuracy) {\r\n        a = 0; b = 0;\r\n        int max= 1024 * accuracy;\r\n        while(max &gt; 0 &amp;&amp; a*a + b*b &lt; 4){\r\n            temp = a;\r\n            a = a*a - b*b + real;\r\n            b = 2*temp*b + imag;\r\n            max--;\r\n        }\r\n        max = (1024*accuracy - max) / accuracy;\r\n        return max == 1024 ? Color.BLACK : new Color(max &lt; 256 ? 255:(max &lt; 512 ? 511 - max : 0), max &lt; 256 ? max : (max &lt; 768 ? 255 : 1023 - max), max &lt; 512 ? 0 : (max &lt; 768 ? max - 512 : 255));\r\n    }\r\n}\r\n```","title":"how to draw image pixel by piexel in swing","body":"<p>I recently created a program to explore Mandelbrot's fractal and after calculated the image I drew it but in a weird way. How can I paint it in clean way? The only way I found is to override the paint method and fill rectangle of 1 pixel (I know the function to get the color is horrible but it's to make a compact code even if it's useless).</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.awt.Color;\nimport javax.swing.JFrame;\npublic class Mandelbrot{\n    public static void main(String[] args) {\n        var panel = new javax.swing.JComponent() {\n            public void paint(java.awt.Graphics g) {\n                for (int i = 0; i &lt; 1000000; i++) {\n                    g.setColor(function(((i % 1000) / 500.0)/zoom + x, (i / 500000.0) / zoom + y, 1));\n                    g.fillRect(i % 1000, i / 1000, 1, 1);\n                }\n            }\n        };\n        panel.addMouseListener(new java.awt.event.MouseAdapter() {\n            @Override\n            public void mouseClicked(java.awt.event.MouseEvent e) {\n                x += (e.getX() / 1000.0) / zoom;\n                y += (e.getY() / 1000.0) / zoom;\n                zoom = e.getButton() == 1 ? zoom * 2 : (zoom == 1 ? 1 : zoom / 2);\n                panel.repaint();\n                System.out.println(&quot;zoom : X&quot; + zoom);\n            }\n        });\n        panel.setBounds(0, 0, 1024, 1024);\n        var frame = new JFrame(&quot;FRACTAL&quot;);\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        frame.setSize(1000, 1000);\n        frame.add(panel);\n        frame.setLocationRelativeTo(null);\n        frame.setVisible(true);\n    }\n    private static double a, b, temp, x = -1.5, y = -1;\n    private static int zoom = 1;\n    public static Color function(double real, double imag, int accuracy) {\n        a = 0; b = 0;\n        int max= 1024 * accuracy;\n        while(max &gt; 0 &amp;&amp; a*a + b*b &lt; 4){\n            temp = a;\n            a = a*a - b*b + real;\n            b = 2*temp*b + imag;\n            max--;\n        }\n        max = (1024*accuracy - max) / accuracy;\n        return max == 1024 ? Color.BLACK : new Color(max &lt; 256 ? 255:(max &lt; 512 ? 511 - max : 0), max &lt; 256 ? max : (max &lt; 768 ? 255 : 1023 - max), max &lt; 512 ? 0 : (max &lt; 768 ? max - 512 : 255));\n    }\n}\n</code></pre>\n"},{"tags":["java","spring-security"],"comments":[{"owner":{"account_id":2064278,"reputation":13129,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1658412362,"post_id":73060692,"comment_id":129049555,"body_markdown":"please do not post images of text it is against the rules","body":"please do not post images of text it is against the rules"}],"answers":[{"tags":[],"owner":{"account_id":11822107,"reputation":35,"user_id":8650947,"display_name":"Siful Islam Ove"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658385308,"creation_date":1658385308,"answer_id":73061661,"question_id":73060692,"body_markdown":"Checking authorization won&#39;t be good practice after all. But you can do with \r\nfollowing code snippets:\r\n \r\n```\r\nObject principal= SecurityContextHolder.getContext().getAuthentication().getPrincipal();\r\n \r\nif (principal instanceof UserDetails) {\r\n  String username = ((UserDetails)principal).getUsername();\r\n} else {\r\n  String username = principal.toString();\r\n}\r\n```\r\n\r\nHere every time you need to do it manually and that will be a costly task!!\r\n\r\nHere is content for more information about spring security : \r\nhttps://spring.io/guides/topicals/spring-security-architecture\r\n\r\n","title":"Ways to check @PreAuthorize in spring Security?","body":"<p>Checking authorization won't be good practice after all. But you can do with\nfollowing code snippets:</p>\n<pre><code>Object principal= SecurityContextHolder.getContext().getAuthentication().getPrincipal();\n \nif (principal instanceof UserDetails) {\n  String username = ((UserDetails)principal).getUsername();\n} else {\n  String username = principal.toString();\n}\n</code></pre>\n<p>Here every time you need to do it manually and that will be a costly task!!</p>\n<p>Here is content for more information about spring security :\n<a href=\"https://spring.io/guides/topicals/spring-security-architecture\" rel=\"nofollow noreferrer\">https://spring.io/guides/topicals/spring-security-architecture</a></p>\n"}],"owner":{"account_id":25858668,"reputation":1,"user_id":19591476,"display_name":"Tuấn Nguyễn"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":362,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1658385308,"creation_date":1658377553,"question_id":73060692,"body_markdown":"I am currently checking authority like this.\r\n\r\n    @PreAuthorize(&quot;hasRole(&#39;ADMIN&#39;) or hasAuthority(&#39;GET_BOOK&#39;)&quot;)\r\n    @PostMapping(&quot;/find&quot;)\r\n    public Pagination&lt;BookDTO&gt; find(@Valid @RequestBody QueryCriteria queryCriteria) {\r\n        return bookService.find(queryCriteria);\r\n    }\r\n\r\nBut I don&#39;t know if there is another way to check, I want to check in method.\r\n\r\n\r\n    @PostMapping(&quot;/find&quot;)\r\n    public Pagination&lt;BookDTO&gt; find(@Valid @RequestBody QueryCriteria queryCriteria) {\r\n        // Check PreAuthorize here\r\n          .....\r\n\r\n        return bookService.find(queryCriteria);\r\n    }\r\n\r\nExample as Entity Graph:\r\n- 1 : There is a way to write : [image example 1][1]\r\n- 2 : Another spelling is: [image example 2][2]\r\n\r\nThanks you !\r\n\r\n  [1]: https://i.stack.imgur.com/i4e11.png\r\n  [2]: https://i.stack.imgur.com/Nc8gJ.png","title":"Ways to check @PreAuthorize in spring Security?","body":"<p>I am currently checking authority like this.</p>\n<pre><code>@PreAuthorize(&quot;hasRole('ADMIN') or hasAuthority('GET_BOOK')&quot;)\n@PostMapping(&quot;/find&quot;)\npublic Pagination&lt;BookDTO&gt; find(@Valid @RequestBody QueryCriteria queryCriteria) {\n    return bookService.find(queryCriteria);\n}\n</code></pre>\n<p>But I don't know if there is another way to check, I want to check in method.</p>\n<pre><code>@PostMapping(&quot;/find&quot;)\npublic Pagination&lt;BookDTO&gt; find(@Valid @RequestBody QueryCriteria queryCriteria) {\n    // Check PreAuthorize here\n      .....\n\n    return bookService.find(queryCriteria);\n}\n</code></pre>\n<p>Example as Entity Graph:</p>\n<ul>\n<li>1 : There is a way to write : <a href=\"https://i.stack.imgur.com/i4e11.png\" rel=\"nofollow noreferrer\">image example 1</a></li>\n<li>2 : Another spelling is: <a href=\"https://i.stack.imgur.com/Nc8gJ.png\" rel=\"nofollow noreferrer\">image example 2</a></li>\n</ul>\n<p>Thanks you !</p>\n"},{"tags":["java","spring-boot","gradle","build.gradle"],"comments":[{"owner":{"account_id":1713714,"reputation":781,"user_id":1571268,"accept_rate":78,"display_name":"criztovyl"},"score":1,"creation_date":1658385454,"post_id":73061645,"comment_id":129039216,"body_markdown":"You should share a snippet how you build.gradle files look like, how you sdd the dependency.","body":"You should share a snippet how you build.gradle files look like, how you sdd the dependency."},{"owner":{"account_id":23889058,"reputation":99,"user_id":17888932,"display_name":"Priyanka Sharma"},"score":0,"creation_date":1658400084,"post_id":73061645,"comment_id":129044455,"body_markdown":"dependencies {\n    implementation group: &#39;javax.servlet&#39;, name: &#39;javax.servlet-api&#39;, version: &#39;4.0.1&#39;\n   \timplementation &#39;org.springframework.boot:spring-boot-starter-security&#39;\n}","body":"dependencies {     implementation group: &#39;javax.servlet&#39;, name: &#39;javax.servlet-api&#39;, version: &#39;4.0.1&#39;    \timplementation &#39;org.springframework.boot:spring-boot-starter-security&#39; }"},{"owner":{"account_id":23889058,"reputation":99,"user_id":17888932,"display_name":"Priyanka Sharma"},"score":0,"creation_date":1658482909,"post_id":73061645,"comment_id":129067635,"body_markdown":"@criztovyl the idea is that same line of dependency\n`dependencies { implementation group: &#39;javax.servlet&#39;, name: &#39;javax.servlet-api&#39;, version: &#39;4.0.1&#39; implementation &#39;org.springframework.boot:spring-boot-starter-security&#39; }`\nneed to be added in the Project A and Project B which is consuming Project A for the list of dependencies, in order to run the service smoothly.  Actual behaviour should be Project A build.gradle should be the only place where the spring-boot-starter-secuirty needs to be added.","body":"@criztovyl the idea is that same line of dependency <code>dependencies { implementation group: &#39;javax.servlet&#39;, name: &#39;javax.servlet-api&#39;, version: &#39;4.0.1&#39; implementation &#39;org.springframework.boot:spring-boot-starter-security&#39; }</code> need to be added in the Project A and Project B which is consuming Project A for the list of dependencies, in order to run the service smoothly.  Actual behaviour should be Project A build.gradle should be the only place where the spring-boot-starter-secuirty needs to be added."}],"owner":{"account_id":23889058,"reputation":99,"user_id":17888932,"display_name":"Priyanka Sharma"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":122,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1658385188,"creation_date":1658385188,"question_id":73061645,"body_markdown":"I have build.gradle in a common project which is been shared by other microservices and each microservice has its own build.gradle also.\r\nThere is one dependency as &#39;org.springframework.boot:spring-boot-starter-security&#39;\r\nThis is added in build.gradle of common project(Project A) and is been consumed by other project(Project B). The issue is the service throws error and we need to add the same dependency (&#39;org.springframework.boot:spring-boot-starter-security&#39;) in build.gradle of Project B also. \r\nDo someone know the reason behind it ?","title":"Some of the gradle dependency needs to be declared twice to be available for the microservice. Why?","body":"<p>I have build.gradle in a common project which is been shared by other microservices and each microservice has its own build.gradle also.\nThere is one dependency as 'org.springframework.boot:spring-boot-starter-security'\nThis is added in build.gradle of common project(Project A) and is been consumed by other project(Project B). The issue is the service throws error and we need to add the same dependency ('org.springframework.boot:spring-boot-starter-security') in build.gradle of Project B also.\nDo someone know the reason behind it ?</p>\n"},{"tags":["java","spring","spring-boot","kotlin","validation"],"answers":[{"tags":[],"owner":{"account_id":1658807,"reputation":31819,"user_id":1527544,"accept_rate":54,"display_name":"Antoniossss"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1658385035,"creation_date":1658385035,"answer_id":73061622,"question_id":73061472,"body_markdown":"You just add it as an annotation property\r\n\r\n    annotation class ValidMinimalInterval(\r\n        val message: String = &quot;The cron string doesn&#39;t fit in the minimal interval of 60 minutes&quot;,\r\n        val groups: Array&lt;KClass&lt;*&gt;&gt; = [],\r\n        val payload: Array&lt;KClass&lt;out Payload&gt;&gt; = []\r\n        val min: Integer //or whatever it is in Kotlin\r\n        \r\n    )","title":"How to create custom validator with parameters in spring boot?","body":"<p>You just add it as an annotation property</p>\n<pre><code>annotation class ValidMinimalInterval(\n    val message: String = &quot;The cron string doesn't fit in the minimal interval of 60 minutes&quot;,\n    val groups: Array&lt;KClass&lt;*&gt;&gt; = [],\n    val payload: Array&lt;KClass&lt;out Payload&gt;&gt; = []\n    val min: Integer //or whatever it is in Kotlin\n    \n)\n</code></pre>\n"}],"owner":{"display_name":"user15941734"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":477,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73061622,"answer_count":1,"score":0,"last_activity_date":1658385035,"creation_date":1658384000,"question_id":73061472,"body_markdown":"I have written a validator for cron string that checks for a minimal interval. \r\n```\r\n@Constraint(validatedBy = [ValidMinimalInterval.JsonStringValidator::class])\r\n@Target(AnnotationTarget.FIELD, AnnotationTarget.CLASS, AnnotationTarget.PROPERTY_GETTER)\r\n@Retention(AnnotationRetention.RUNTIME)\r\n@MustBeDocumented\r\nannotation class ValidMinimalInterval(\r\n    val message: String = &quot;The cron string doesn&#39;t fit in the minimal interval of 60 minutes&quot;,\r\n    val groups: Array&lt;KClass&lt;*&gt;&gt; = [],\r\n    val payload: Array&lt;KClass&lt;out Payload&gt;&gt; = []\r\n) {\r\n    class JsonStringValidator :\r\n        ConstraintValidator&lt;ValidMinimalInterval?, String?&gt; {\r\n        override fun initialize(jsonString: ValidMinimalInterval?) {}\r\n        override fun isValid(string: String?, context: ConstraintValidatorContext): Boolean {\r\n            return string?.let {\r\n                val min = 1000 * 3600\r\n                val cron = CronExpression(string)\r\n                val execDate = cron.getNextValidTimeAfter(Date())\r\n                val nextExecDate = cron.getNextValidTimeAfter(execDate)\r\n                val diff = nextExecDate.time - execDate.time\r\n                diff &gt;= min\r\n            } ?: true\r\n        }\r\n    }\r\n}\r\n```\r\nThis works fine, but I want the validator to take in the parameter for minimal interval like `@ValidMinimalInterval(min = 1000 * 3600)`. How can I achieve that?","title":"How to create custom validator with parameters in spring boot?","body":"<p>I have written a validator for cron string that checks for a minimal interval.</p>\n<pre><code>@Constraint(validatedBy = [ValidMinimalInterval.JsonStringValidator::class])\n@Target(AnnotationTarget.FIELD, AnnotationTarget.CLASS, AnnotationTarget.PROPERTY_GETTER)\n@Retention(AnnotationRetention.RUNTIME)\n@MustBeDocumented\nannotation class ValidMinimalInterval(\n    val message: String = &quot;The cron string doesn't fit in the minimal interval of 60 minutes&quot;,\n    val groups: Array&lt;KClass&lt;*&gt;&gt; = [],\n    val payload: Array&lt;KClass&lt;out Payload&gt;&gt; = []\n) {\n    class JsonStringValidator :\n        ConstraintValidator&lt;ValidMinimalInterval?, String?&gt; {\n        override fun initialize(jsonString: ValidMinimalInterval?) {}\n        override fun isValid(string: String?, context: ConstraintValidatorContext): Boolean {\n            return string?.let {\n                val min = 1000 * 3600\n                val cron = CronExpression(string)\n                val execDate = cron.getNextValidTimeAfter(Date())\n                val nextExecDate = cron.getNextValidTimeAfter(execDate)\n                val diff = nextExecDate.time - execDate.time\n                diff &gt;= min\n            } ?: true\n        }\n    }\n}\n</code></pre>\n<p>This works fine, but I want the validator to take in the parameter for minimal interval like <code>@ValidMinimalInterval(min = 1000 * 3600)</code>. How can I achieve that?</p>\n"},{"tags":["java","php","encryption","bouncycastle"],"comments":[{"owner":{"account_id":12359353,"reputation":42427,"user_id":9014097,"display_name":"Topaco"},"score":0,"creation_date":1658384004,"post_id":73061435,"comment_id":129038820,"body_markdown":"In the PHP code `$key` is not used anywhere.","body":"In the PHP code <code>$key</code> is not used anywhere."},{"owner":{"account_id":4602102,"reputation":81,"user_id":3732518,"display_name":"prashant"},"score":0,"creation_date":1658384138,"post_id":73061435,"comment_id":129038854,"body_markdown":"My bad. I have modified the code. thanks.","body":"My bad. I have modified the code. thanks."},{"owner":{"account_id":12359353,"reputation":42427,"user_id":9014097,"display_name":"Topaco"},"score":0,"creation_date":1658384508,"post_id":73061435,"comment_id":129038949,"body_markdown":"In the PHP code there is no hex decoding of the key, which is probably an (unnoticed) bug. In the Java code, the key is hex decoded, which results in incompatibility. The PHP code shortens the too long key implicitly (to 32 bytes for AES-256). In the Java code this has to happen explicitly.","body":"In the PHP code there is no hex decoding of the key, which is probably an (unnoticed) bug. In the Java code, the key is hex decoded, which results in incompatibility. The PHP code shortens the too long key implicitly (to 32 bytes for AES-256). In the Java code this has to happen explicitly."}],"answers":[{"tags":[],"owner":{"account_id":4602102,"reputation":81,"user_id":3732518,"display_name":"prashant"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658384995,"creation_date":1658384995,"answer_id":73061615,"question_id":73061435,"body_markdown":"As @topaco brilliantly pointed out, PHP is implicitly shortening the key.\r\n\r\nReplace \r\n```\r\n//Using Bouncycastle (org.bouncycastle.util.encoders.Hex) for Hex to byte\r\nSecretKeySpec secretKey=new SecretKeySpec(Hex.decode(hexString),&quot;AES&quot;);\r\n```\r\nwith \r\n```\r\nSecretKeySpec secretKey = new SecretKeySpec(key.substring(0,32).getBytes(), &quot;AES&quot;);\r\n```\r\n\r\nWorked like a charm","title":"Unable to decrypt a file using Java that was encrypted using PHP","body":"<p>As @topaco brilliantly pointed out, PHP is implicitly shortening the key.</p>\n<p>Replace</p>\n<pre><code>//Using Bouncycastle (org.bouncycastle.util.encoders.Hex) for Hex to byte\nSecretKeySpec secretKey=new SecretKeySpec(Hex.decode(hexString),&quot;AES&quot;);\n</code></pre>\n<p>with</p>\n<pre><code>SecretKeySpec secretKey = new SecretKeySpec(key.substring(0,32).getBytes(), &quot;AES&quot;);\n</code></pre>\n<p>Worked like a charm</p>\n"}],"owner":{"account_id":4602102,"reputation":81,"user_id":3732518,"display_name":"prashant"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":144,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1658384995,"creation_date":1658383789,"question_id":73061435,"body_markdown":"My customer encrypted a file using the following PHP code snippet\r\n\r\n```\r\n$key=&quot;c5ff6db1e2f1d27d294047b220516312da1b4ba899035692e893e16815fc1234&quot;;\r\n\r\n$content = file_get_contents(filename);\r\n$ivlen = openssl_cipher_iv_length($cipher=&quot;AES-256-CBC&quot;);\r\n$iv = openssl_random_pseudo_bytes($ivlen);\r\n\r\n$cipherText_raw = openssl_encrypt($this-&gt;plaintext, $cipher, \r\n                         $key, $options=OPENSSL_RAW_DATA, $iv);\r\n\r\n$encode = base64_encode( $iv.$cipherText_raw );//Append IV and encode\r\n\r\n```\r\nI am trying to decrypt using Java with this code\r\n```\r\nString hexString = &quot;c5ff6db1e2f1d27d294047b220516312da1b4ba899035692e893e16815fc1234&quot;;\r\n\r\n//Using Bouncycastle (org.bouncycastle.util.encoders.Hex) for Hex to byte\r\nSecretKeySpec secretKey=new SecretKeySpec(Hex.decode(hexString),&quot;AES&quot;);\r\n\r\nString content = Files.readString(Paths.get(&quot;abc.xml&quot;), StandardCharsets.UTF_8);\r\n\r\nbyte[] arrDecode  = Base64.getDecoder().decode(content);\r\n//Extract IV\r\nbyte[] arrIV = Arrays.copyOfRange(arrDecode,0,16);\r\n//Extract Encrypted Content\r\nbyte[] arrEnc = Arrays.copyOfRange(arrDecode,16,arrDecode.length);\r\n\r\nCipher cipher = Cipher.getInstance(&quot;AES/CBC/PKCS5Padding&quot;);\r\ncipher.init(Cipher.DECRYPT_MODE, secretKey, new IvParameterSpec(arrIV));\r\nbyte[]  xx = cipher.doFinal(arrEnc);\r\n\r\n```\r\nThe decrypt does not work. I get the below error\r\n```\r\njavax.crypto.BadPaddingException: Given final block not properly padded. Such issues can arise if a bad key is used during decryption.\r\n```\r\nIf I use cipher.update(arrEnc) I get load of junk characters.\r\n\r\nI am sure I am missing something. Not able to figure that out. I have also tried Bouncycastle with same result - \r\n   Cipher.getInstance(&quot;AES/CBC/PKCS7Padding&quot;, &quot;BCFIPS&quot;);","title":"Unable to decrypt a file using Java that was encrypted using PHP","body":"<p>My customer encrypted a file using the following PHP code snippet</p>\n<pre><code>$key=&quot;c5ff6db1e2f1d27d294047b220516312da1b4ba899035692e893e16815fc1234&quot;;\n\n$content = file_get_contents(filename);\n$ivlen = openssl_cipher_iv_length($cipher=&quot;AES-256-CBC&quot;);\n$iv = openssl_random_pseudo_bytes($ivlen);\n\n$cipherText_raw = openssl_encrypt($this-&gt;plaintext, $cipher, \n                         $key, $options=OPENSSL_RAW_DATA, $iv);\n\n$encode = base64_encode( $iv.$cipherText_raw );//Append IV and encode\n\n</code></pre>\n<p>I am trying to decrypt using Java with this code</p>\n<pre><code>String hexString = &quot;c5ff6db1e2f1d27d294047b220516312da1b4ba899035692e893e16815fc1234&quot;;\n\n//Using Bouncycastle (org.bouncycastle.util.encoders.Hex) for Hex to byte\nSecretKeySpec secretKey=new SecretKeySpec(Hex.decode(hexString),&quot;AES&quot;);\n\nString content = Files.readString(Paths.get(&quot;abc.xml&quot;), StandardCharsets.UTF_8);\n\nbyte[] arrDecode  = Base64.getDecoder().decode(content);\n//Extract IV\nbyte[] arrIV = Arrays.copyOfRange(arrDecode,0,16);\n//Extract Encrypted Content\nbyte[] arrEnc = Arrays.copyOfRange(arrDecode,16,arrDecode.length);\n\nCipher cipher = Cipher.getInstance(&quot;AES/CBC/PKCS5Padding&quot;);\ncipher.init(Cipher.DECRYPT_MODE, secretKey, new IvParameterSpec(arrIV));\nbyte[]  xx = cipher.doFinal(arrEnc);\n\n</code></pre>\n<p>The decrypt does not work. I get the below error</p>\n<pre><code>javax.crypto.BadPaddingException: Given final block not properly padded. Such issues can arise if a bad key is used during decryption.\n</code></pre>\n<p>If I use cipher.update(arrEnc) I get load of junk characters.</p>\n<p>I am sure I am missing something. Not able to figure that out. I have also tried Bouncycastle with same result -\nCipher.getInstance(&quot;AES/CBC/PKCS7Padding&quot;, &quot;BCFIPS&quot;);</p>\n"}],"has_more":true,"backoff":10,"quota_max":10000,"quota_remaining":8823,"page":1169,"page_size":100}
