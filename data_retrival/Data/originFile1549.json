{"items":[{"tags":["java","spring","hibernate","jpa"],"comments":[{"owner":{"account_id":13795447,"reputation":1007,"user_id":9956773,"display_name":"frank"},"score":0,"creation_date":1646295859,"post_id":71326709,"comment_id":126089170,"body_markdown":"just don&#39;t put the single id in an extra Class.  Put ``` @ID @GeneratedValue(strategy = GenerationType.AUTO) @Column(name = &quot;ORDER_NR&quot;) private Long id;``` in your Order Class instead.","body":"just don&#39;t put the single id in an extra Class.  Put ``` @ID @GeneratedValue(strategy = GenerationType.AUTO) @Column(name = &quot;ORDER_NR&quot;) private Long id;``` in your Order Class instead."},{"owner":{"account_id":18007703,"reputation":11,"user_id":13088085,"display_name":"Stefan Th&#246;ni"},"score":0,"creation_date":1646318417,"post_id":71326709,"comment_id":126097482,"body_markdown":"@frank thanks but id really like to have typed Ids for all Domain Objects to avoid &#39;primitive obsession&#39;","body":"@frank thanks but id really like to have typed Ids for all Domain Objects to avoid &#39;primitive obsession&#39;"},{"owner":{"account_id":13795447,"reputation":1007,"user_id":9956773,"display_name":"frank"},"score":0,"creation_date":1646325238,"post_id":71326709,"comment_id":126100501,"body_markdown":"But for a database-generated Id a Long is a perfect match, it&#39;s not like storing a telephonenumber in an Integer, or a postal code in a String or something. Therefore using a Long for a generated Id isn&#39;t an example for &#39;primitive obsession&#39;.","body":"But for a database-generated Id a Long is a perfect match, it&#39;s not like storing a telephonenumber in an Integer, or a postal code in a String or something. Therefore using a Long for a generated Id isn&#39;t an example for &#39;primitive obsession&#39;."}],"owner":{"account_id":18007703,"reputation":11,"user_id":13088085,"display_name":"Stefan Th&#246;ni"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":187,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1646241645,"creation_date":1646241645,"question_id":71326709,"body_markdown":"Im am mightly confused right now. What i am trying to do seems very simple. I have one Entity called &#39;Order&#39; with a member &#39;OrderId&#39;. The OrderId has only one property which is a long. this value is what i am trying to generate using @GeneratedValue. \r\n\r\nAs a database i am using h2 right now. Whenever i try to store something i receive the following error: \r\n```\r\norg.hibernate.id.IdentifierGenerationException: null id generated for:class xyz.Order\r\n```\r\n\r\nIt&#39;s not obvous to me what i am doing wrong. \r\n\r\nOrder.java: \r\n\r\n ```\r\n@Getter\r\n@ToString\r\n@EqualsAndHashCode\r\n@NoArgsConstructor(access = PROTECTED)\r\n@Entity(name = &quot;ORDER_TABLE&quot;)\r\npublic class Order {\r\n\r\n\t@EmbeddedId\r\n\tprivate OrderNr orderNr;\r\n\r\n\t@Column(name = &quot;STATE&quot;)\r\n\tprivate OrderState orderState;\r\n\r\n\t@Embedded\r\n\tprivate OtoId otoId;\r\n\r\n\t@Column(name = &quot;customer_wish_date&quot;)\r\n\tprivate LocalDate customerWishDate;\r\n\r\n\tprivate Order(Builder builder) {\r\n\t\tcheckArgument(nonNull(builder.otoId), &quot;OTO ID must not be null&quot;);\r\n\t\tcheckArgument(nonNull(builder.customerWishDate), &quot;CustomerWishDate must not be null&quot;);\r\n\t\tcheckArgument(builder.customerWishDate.isAfter(LocalDate.now()) || builder.customerWishDate.isEqual(LocalDate.now()), &quot;CustomerWishDate must be today or in the future&quot;);\r\n\r\n\t\tthis.otoId = builder.otoId;\r\n\t\tthis.customerWishDate = builder.customerWishDate;\r\n\t\tthis.orderState = OrderState.ENTERED;\r\n\t}\r\n\r\n\tprivate void changeState(OrderState newState, OrderStateChangeEventPublisher changeEventPublisher) {\r\n\t\tOrderState previousState = this.orderState;\r\n\t\tthis.orderState = newState;\r\n\t\tchangeEventPublisher.publish(this, new OrderStateTransition(previousState, this.orderState));\r\n\t}\r\n\r\n\tpublic void hold(OrderStateChangeEventPublisher changeEventPublisher) {\r\n\t\tchangeState(orderState.holding(), changeEventPublisher);\r\n\t}\r\n\r\n\tpublic void startFulfillment(OrderStateChangeEventPublisher changeEventPublisher) {\r\n\t\tchangeState(orderState.entered(), changeEventPublisher);\r\n\t}\r\n\r\n\tpublic void cancel(OrderStateChangeEventPublisher changeEventPublisher) {\r\n\t\tchangeState(orderState.canceled(), changeEventPublisher);\r\n\t}\r\n\r\n\tpublic static Builder builder() {\r\n\t\treturn new Builder();\r\n\t}\r\n\r\n\tpublic static final class Builder {\r\n\t\tpublic Builder() {\r\n\t\t}\r\n\r\n\t\tpublic Order build() {\r\n\t\t\treturn new Order(this);\r\n\t\t}\r\n\r\n\t\tprivate OtoId otoId;\r\n\r\n\t\tprivate LocalDate customerWishDate;\r\n\r\n\t\tpublic Builder otoId(OtoId otoId) {\r\n\t\t\tthis.otoId = otoId;\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\tpublic Builder customerWishDate(LocalDate customerWishDate) {\r\n\t\t\tthis.customerWishDate = customerWishDate;\r\n\t\t\treturn this;\r\n\t\t}\r\n\t}\r\n}\r\n```\r\nOrderNr.java: \r\n\r\n```\r\n@NoArgsConstructor(access = PROTECTED)\r\n@EqualsAndHashCode\r\n@Getter\r\n@ToString\r\n@Embeddable\r\npublic class OrderNr implements Serializable {\r\n\r\n\t@GeneratedValue(strategy = GenerationType.AUTO)\r\n\t@Column(name = &quot;ORDER_NR&quot;)\r\n\tprivate long value;\r\n\r\n\tpublic OrderNr(Long value) {\r\n\t\tcheckArgument(nonNull(value), &quot;OrderNr value must not be null&quot;);\r\n\t\tthis.value = value;\r\n\t}\r\n\r\n}\r\n\r\n```\r\n\r\n","title":"Strongly Typed ID Autogeneratation (@EmbeddedId &amp; @GenerateValue)","body":"<p>Im am mightly confused right now. What i am trying to do seems very simple. I have one Entity called 'Order' with a member 'OrderId'. The OrderId has only one property which is a long. this value is what i am trying to generate using @GeneratedValue.</p>\n<p>As a database i am using h2 right now. Whenever i try to store something i receive the following error:</p>\n<pre><code>org.hibernate.id.IdentifierGenerationException: null id generated for:class xyz.Order\n</code></pre>\n<p>It's not obvous to me what i am doing wrong.</p>\n<p>Order.java:</p>\n<pre><code>@Getter\n@ToString\n@EqualsAndHashCode\n@NoArgsConstructor(access = PROTECTED)\n@Entity(name = &quot;ORDER_TABLE&quot;)\npublic class Order {\n\n   @EmbeddedId\n   private OrderNr orderNr;\n\n   @Column(name = &quot;STATE&quot;)\n   private OrderState orderState;\n\n   @Embedded\n   private OtoId otoId;\n\n   @Column(name = &quot;customer_wish_date&quot;)\n   private LocalDate customerWishDate;\n\n   private Order(Builder builder) {\n       checkArgument(nonNull(builder.otoId), &quot;OTO ID must not be null&quot;);\n       checkArgument(nonNull(builder.customerWishDate), &quot;CustomerWishDate must not be null&quot;);\n       checkArgument(builder.customerWishDate.isAfter(LocalDate.now()) || builder.customerWishDate.isEqual(LocalDate.now()), &quot;CustomerWishDate must be today or in the future&quot;);\n\n       this.otoId = builder.otoId;\n       this.customerWishDate = builder.customerWishDate;\n       this.orderState = OrderState.ENTERED;\n   }\n\n   private void changeState(OrderState newState, OrderStateChangeEventPublisher changeEventPublisher) {\n       OrderState previousState = this.orderState;\n       this.orderState = newState;\n       changeEventPublisher.publish(this, new OrderStateTransition(previousState, this.orderState));\n   }\n\n   public void hold(OrderStateChangeEventPublisher changeEventPublisher) {\n       changeState(orderState.holding(), changeEventPublisher);\n   }\n\n   public void startFulfillment(OrderStateChangeEventPublisher changeEventPublisher) {\n       changeState(orderState.entered(), changeEventPublisher);\n   }\n\n   public void cancel(OrderStateChangeEventPublisher changeEventPublisher) {\n       changeState(orderState.canceled(), changeEventPublisher);\n   }\n\n   public static Builder builder() {\n       return new Builder();\n   }\n\n   public static final class Builder {\n       public Builder() {\n       }\n\n       public Order build() {\n           return new Order(this);\n       }\n\n       private OtoId otoId;\n\n       private LocalDate customerWishDate;\n\n       public Builder otoId(OtoId otoId) {\n           this.otoId = otoId;\n           return this;\n       }\n\n       public Builder customerWishDate(LocalDate customerWishDate) {\n           this.customerWishDate = customerWishDate;\n           return this;\n       }\n   }\n}\n</code></pre>\n<p>OrderNr.java:</p>\n<pre><code>@NoArgsConstructor(access = PROTECTED)\n@EqualsAndHashCode\n@Getter\n@ToString\n@Embeddable\npublic class OrderNr implements Serializable {\n\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    @Column(name = &quot;ORDER_NR&quot;)\n    private long value;\n\n    public OrderNr(Long value) {\n        checkArgument(nonNull(value), &quot;OrderNr value must not be null&quot;);\n        this.value = value;\n    }\n\n}\n\n</code></pre>\n"},{"tags":["java","integration-testing","junit5","wiremock"],"answers":[{"tags":[],"owner":{"account_id":9504657,"reputation":7440,"user_id":7064617,"display_name":"JCompetence"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1646130666,"creation_date":1646128687,"answer_id":71306657,"question_id":71304804,"body_markdown":"Would retrieving the DSL from `WireMockRunTimeInfo` sufficient in your case?\r\n\r\nhttps://wiremock.org/docs/junit-jupiter/\r\n\r\nhttps://javadoc.io/doc/com.github.tomakehurst/wiremock-jre8/latest/com/github/tomakehurst/wiremock/junit5/WireMockRuntimeInfo.html#getWireMock--\r\n\r\n\r\nFrom `WireMockRunTimeInfo` , there is a `getWireMock()` method which returns WireMock. \r\n\r\n\r\nExample:\r\n\r\n\r\n    @WireMockTest\r\n    public class DeclarativeWireMockTest {\r\n    \r\n        @Test\r\n        void test_something_with_wiremock(WireMockRuntimeInfo wmRuntimeInfo) {\r\n            // The static DSL will be automatically configured for you\r\n            stubFor(get(&quot;/static-dsl&quot;).willReturn(ok()));\r\n          \r\n            // Instance DSL can be obtained from the runtime info parameter\r\n            WireMock wireMock = wmRuntimeInfo.getWireMock();\r\n        \r\n            wireMock.register(get(&quot;/instance-dsl&quot;).willReturn(ok()));\r\n           \r\n            // Info such as port numbers is also available\r\n            int port = wmRuntimeInfo.getHttpPort();\r\n            \r\n            // Do some testing...\r\n        }\r\n    }\r\n\r\n","title":"How to get to a WireMockServer from Junit 5 WireMockTest test case","body":"<p>Would retrieving the DSL from <code>WireMockRunTimeInfo</code> sufficient in your case?</p>\n<p><a href=\"https://wiremock.org/docs/junit-jupiter/\" rel=\"nofollow noreferrer\">https://wiremock.org/docs/junit-jupiter/</a></p>\n<p><a href=\"https://javadoc.io/doc/com.github.tomakehurst/wiremock-jre8/latest/com/github/tomakehurst/wiremock/junit5/WireMockRuntimeInfo.html#getWireMock--\" rel=\"nofollow noreferrer\">https://javadoc.io/doc/com.github.tomakehurst/wiremock-jre8/latest/com/github/tomakehurst/wiremock/junit5/WireMockRuntimeInfo.html#getWireMock--</a></p>\n<p>From <code>WireMockRunTimeInfo</code> , there is a <code>getWireMock()</code> method which returns WireMock.</p>\n<p>Example:</p>\n<pre><code>@WireMockTest\npublic class DeclarativeWireMockTest {\n\n    @Test\n    void test_something_with_wiremock(WireMockRuntimeInfo wmRuntimeInfo) {\n        // The static DSL will be automatically configured for you\n        stubFor(get(&quot;/static-dsl&quot;).willReturn(ok()));\n      \n        // Instance DSL can be obtained from the runtime info parameter\n        WireMock wireMock = wmRuntimeInfo.getWireMock();\n    \n        wireMock.register(get(&quot;/instance-dsl&quot;).willReturn(ok()));\n       \n        // Info such as port numbers is also available\n        int port = wmRuntimeInfo.getHttpPort();\n        \n        // Do some testing...\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":991044,"reputation":3556,"user_id":1008361,"display_name":"Tom"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1646241497,"creation_date":1646241497,"answer_id":71326677,"question_id":71304804,"body_markdown":"There&#39;s a better option in newer versions of WireMock than calling `addMockServiceRequestListener`, which is to register a `PostServeAction` implementation as an extension when configuring JUnit:\r\n\r\n```\r\n@RegisterExtension\r\nstatic WireMockExtension wm =\r\n    WireMockExtension.newInstance()\r\n          .options(wireMockConfig().dynamicPort()\r\n              .extensions(new PostServeAction() {\r\n                @Override\r\n                public String getName() {\r\n                  return &quot;my-action&quot;;\r\n                }\r\n\r\n                @Override\r\n                public void doGlobalAction(ServeEvent serveEvent, Admin admin) {\r\n                  // Do something\r\n                }\r\n              }))\r\n          .build();\r\n``` \r\n\r\n`PostServeAction` implementations are the &quot;proper&quot; way to listen for events and will still work in future versions, whereas listeners will be deprecated and removed eventually. They also are given more context about the request than listeners.","title":"How to get to a WireMockServer from Junit 5 WireMockTest test case","body":"<p>There's a better option in newer versions of WireMock than calling <code>addMockServiceRequestListener</code>, which is to register a <code>PostServeAction</code> implementation as an extension when configuring JUnit:</p>\n<pre><code>@RegisterExtension\nstatic WireMockExtension wm =\n    WireMockExtension.newInstance()\n          .options(wireMockConfig().dynamicPort()\n              .extensions(new PostServeAction() {\n                @Override\n                public String getName() {\n                  return &quot;my-action&quot;;\n                }\n\n                @Override\n                public void doGlobalAction(ServeEvent serveEvent, Admin admin) {\n                  // Do something\n                }\n              }))\n          .build();\n</code></pre>\n<p><code>PostServeAction</code> implementations are the &quot;proper&quot; way to listen for events and will still work in future versions, whereas listeners will be deprecated and removed eventually. They also are given more context about the request than listeners.</p>\n"}],"owner":{"account_id":477949,"reputation":5596,"user_id":889742,"accept_rate":28,"display_name":"Gonen I"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4654,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1646241497,"creation_date":1646118071,"question_id":71304804,"body_markdown":"Wire mock has a `addMockServiceRequestListener` function available on the JUnit4 Rule or on a wiremock server instance.\r\n\r\nHow do I get to that function from a test class annotated with JUnit 5&#39;s `@WireMockTest` annotation?\r\n\r\nMore generally, how do I get an instance of the `WireMockServer` from a test in a class that uses `@WireMockTest` ? ","title":"How to get to a WireMockServer from Junit 5 WireMockTest test case","body":"<p>Wire mock has a <code>addMockServiceRequestListener</code> function available on the JUnit4 Rule or on a wiremock server instance.</p>\n<p>How do I get to that function from a test class annotated with JUnit 5's <code>@WireMockTest</code> annotation?</p>\n<p>More generally, how do I get an instance of the <code>WireMockServer</code> from a test in a class that uses <code>@WireMockTest</code> ?</p>\n"},{"tags":["java","grails","build"],"comments":[{"owner":{"account_id":4327054,"reputation":26992,"user_id":3533584,"display_name":"Jeff Scott Brown"},"score":0,"creation_date":1633632744,"post_id":69467231,"comment_id":122818548,"body_markdown":"Can you share the relevant output from `./gradlew bootRun --stacktrace`? (maybe put it in a gist if it is really long).","body":"Can you share the relevant output from <code>.&#47;gradlew bootRun --stacktrace</code>? (maybe put it in a gist if it is really long)."},{"owner":{"account_id":4327054,"reputation":26992,"user_id":3533584,"display_name":"Jeff Scott Brown"},"score":0,"creation_date":1633632799,"post_id":69467231,"comment_id":122818578,"body_markdown":"Is the problem definitely that Java cannot be found?","body":"Is the problem definitely that Java cannot be found?"},{"owner":{"account_id":997267,"reputation":3667,"user_id":1012914,"accept_rate":64,"display_name":"Michele"},"score":0,"creation_date":1633717727,"post_id":69467231,"comment_id":122843439,"body_markdown":"@JeffScottBrown see update with stacktrace.  The problem is it can&#39;t start java.exe, not that it can&#39;t find java.","body":"@JeffScottBrown see update with stacktrace.  The problem is it can&#39;t start java.exe, not that it can&#39;t find java."},{"owner":{"account_id":4327054,"reputation":26992,"user_id":3533584,"display_name":"Jeff Scott Brown"},"score":0,"creation_date":1633717843,"post_id":69467231,"comment_id":122843470,"body_markdown":"&quot;The problem is it can&#39;t start java.exe, not that it can&#39;t find java.&quot; - Right.  I see the title of hte quesiton changed now.  Are you using pathingJar?","body":"&quot;The problem is it can&#39;t start java.exe, not that it can&#39;t find java.&quot; - Right.  I see the title of hte quesiton changed now.  Are you using pathingJar?"},{"owner":{"account_id":997267,"reputation":3667,"user_id":1012914,"accept_rate":64,"display_name":"Michele"},"score":0,"creation_date":1633717955,"post_id":69467231,"comment_id":122843519,"body_markdown":"I don&#39;t know what pathingJar is","body":"I don&#39;t know what pathingJar is"},{"owner":{"account_id":4327054,"reputation":26992,"user_id":3533584,"display_name":"Jeff Scott Brown"},"score":0,"creation_date":1633718085,"post_id":69467231,"comment_id":122843564,"body_markdown":"&quot;I don&#39;t know what pathingJar is&quot; - https://github.com/grails/grails-core/issues?q=is%3Aissue+pathingJar+ or google search for &quot;gradle pathingJar&quot;","body":"&quot;I don&#39;t know what pathingJar is&quot; - <a href=\"https://github.com/grails/grails-core/issues?q=is%3Aissue+pathingJar+\" rel=\"nofollow noreferrer\">github.com/grails/grails-core/issues?q=is%3Aissue+pathingJar&zwnj;&#8203;+</a> or google search for &quot;gradle pathingJar&quot;"},{"owner":{"account_id":997267,"reputation":3667,"user_id":1012914,"accept_rate":64,"display_name":"Michele"},"score":0,"creation_date":1633719198,"post_id":69467231,"comment_id":122843960,"body_markdown":"@JeffScottBrown - see update6.  I added something to my build.gradle.  I&#39;m not sure if that&#39;s all that is needed.","body":"@JeffScottBrown - see update6.  I added something to my build.gradle.  I&#39;m not sure if that&#39;s all that is needed."},{"owner":{"account_id":997267,"reputation":3667,"user_id":1012914,"accept_rate":64,"display_name":"Michele"},"score":0,"creation_date":1633721295,"post_id":69467231,"comment_id":122844580,"body_markdown":"@JeffScottBrown - I added pathing jar, but it&#39;s building forever.  Was I supposed to do other than what I have in the update6? It hasn&#39;t failed yet, so that&#39;s good...","body":"@JeffScottBrown - I added pathing jar, but it&#39;s building forever.  Was I supposed to do other than what I have in the update6? It hasn&#39;t failed yet, so that&#39;s good..."}],"answers":[{"tags":[],"owner":{"account_id":1816920,"reputation":29,"user_id":4976680,"display_name":"Satender Joon"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1633530047,"creation_date":1633530047,"answer_id":69467513,"question_id":69467231,"body_markdown":"Two ways you can try:\r\n\r\nIn gradle.properties in the .gradle directory in your HOME_DIRECTORY set org.gradle.java.home=/path_to_jdk_directory\r\nor:\r\n\r\nIn your build.gradle\r\n\r\n compileJava.options.fork = true\r\n compileJava.options.forkOptions.executable = &#39;/path_to_javac&#39;","title":"Grails - Execution failed for task bootRun. A problem occurred starting process command java.exe","body":"<p>Two ways you can try:</p>\n<p>In gradle.properties in the .gradle directory in your HOME_DIRECTORY set org.gradle.java.home=/path_to_jdk_directory\nor:</p>\n<p>In your build.gradle</p>\n<p>compileJava.options.fork = true\ncompileJava.options.forkOptions.executable = '/path_to_javac'</p>\n"},{"tags":[],"owner":{"account_id":15514966,"reputation":1,"user_id":11192776,"display_name":"Jordan_Dev"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646240118,"creation_date":1646240118,"answer_id":71326393,"question_id":69467231,"body_markdown":"If on windows try ./gradlew bootRun ( this solved my issue ) ","title":"Grails - Execution failed for task bootRun. A problem occurred starting process command java.exe","body":"<p>If on windows try ./gradlew bootRun ( this solved my issue )</p>\n"}],"owner":{"account_id":997267,"reputation":3667,"user_id":1012914,"accept_rate":64,"display_name":"Michele"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":3759,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1646240118,"creation_date":1633528921,"question_id":69467231,"body_markdown":"There&#39;s an existing Grails project, and unfortunately all people who worked on it left the co.\r\n\r\nWhen I do at windows 10 command prompt (not running as admin)\r\n\r\n    gradlew bootRun --debug\r\n\r\nI see \r\n\r\n    ...\r\n    09:01:21.398 [DEBUG] [org.gradle.process.internal.DefaultExecHandle] Changing state to: STARTING\r\n    09:01:21.398 [DEBUG] [org.gradle.process.internal.DefaultExecHandle] Waiting until process started: command &#39;C:\\Program Files\\Java\\jdk1.8.0_291\\bin\\java.exe&#39;.\r\n    09:01:21.412 [DEBUG] [org.gradle.process.internal.DefaultExecHandle] Changing state to: FAILED\r\n    09:01:21.412 [DEBUG] [org.gradle.process.internal.DefaultExecHandle] Process &#39;command &#39;C:\\Program Files\\Java\\jdk1.8.0_291\\bin\\java.exe&#39;&#39; finished with exit value -1 (state: FAILED)\r\n    09:01:21.412 [DEBUG] [org.gradle.api.internal.tasks.execution.ResolveTaskArtifactStateTaskExecuter] Removed task artifact state for {} from context.\r\n    09:01:21.413 [DEBUG] [org.gradle.api.internal.tasks.execution.ExecuteAtMostOnceTaskExecuter] Finished executing task &#39;:bootRun&#39;\r\n    09:01:21.413 [LIFECYCLE] [class org.gradle.internal.buildevents.TaskExecutionLogger] :bootRun FAILED\r\n    09:01:21.413 [INFO] [org.gradle.execution.taskgraph.AbstractTaskPlanExecutor] :bootRun (Thread[Daemon worker Thread 2,5,main]) completed. Took 0.214 secs.\r\n    09:01:21.413 [DEBUG] [org.gradle.internal.operations.DefaultBuildOperationWorkerRegistry] Worker root.8 completed (0 in use)\r\n    09:01:21.413 [DEBUG] [org.gradle.execution.taskgraph.AbstractTaskPlanExecutor] Task worker [Thread[Daemon worker Thread 2,5,main]] finished, busy: 1.458 secs, idle: 0.0 secs\r\n    09:01:21.414 [ERROR] [org.gradle.internal.buildevents.BuildExceptionReporter]\r\n    09:01:21.414 [ERROR] [org.gradle.internal.buildevents.BuildExceptionReporter] FAILURE: Build failed with an exception.\r\n    09:01:21.415 [ERROR] [org.gradle.internal.buildevents.BuildExceptionReporter]\r\n    09:01:21.415 [ERROR] [org.gradle.internal.buildevents.BuildExceptionReporter] * What went wrong:\r\n    09:01:21.415 [ERROR] [org.gradle.internal.buildevents.BuildExceptionReporter] Execution failed for task &#39;:bootRun&#39;.\r\n    09:01:21.415 [ERROR] [org.gradle.internal.buildevents.BuildExceptionReporter] &gt; A problem occurred starting process &#39;command &#39;C:\\Program Files\\Java\\jdk1.8.0_291\\bin\\java.exe&#39;&#39;\r\n    09:01:21.415 [ERROR] [org.gradle.internal.buildevents.BuildExceptionReporter]\r\n    09:01:21.415 [ERROR] [org.gradle.internal.buildevents.BuildExceptionReporter] * Try:\r\n    09:01:21.415 [ERROR] [org.gradle.internal.buildevents.BuildExceptionReporter] Run with --stacktrace option to get the stack trace.\r\n    09:01:21.415 [LIFECYCLE] [org.gradle.internal.buildevents.BuildResultLogger]\r\n    09:01:21.415 [LIFECYCLE] [org.gradle.internal.buildevents.BuildResultLogger] BUILD FAILED\r\n    09:01:21.415 [LIFECYCLE] [org.gradle.internal.buildevents.BuildResultLogger]\r\n    ...\r\n\r\nI tried \r\n\r\n    gradlew clean build \r\n\r\nlike I saw recommended somewhere and it didn&#39;t help.\r\n\r\nI looked at \r\n\r\n    java -version\r\n    \r\n    java version &quot;1.8.0_281&quot;\r\n    Java(TM) SE Runtime Environment (build 1.8.0_281-b09)\r\n    Java HotSpot(TM) Client VM (build 25.281-b09, mixed mode, sharing)\r\n\r\nand \r\n\r\n    grails -version\r\n    | Grails Version: 4.0.0\r\n    | JVM Version: 1.8.0_291\r\n\r\n[This article][1] seems to think I should have a src/main/java in my project, but I don&#39;t have that dir.  How do I create/get it? I can&#39;t rebuild the project since it&#39;s huge. That article mentioned adding sourceSets somewhere, but it didn&#39;t say where to add it.\r\n\r\nAny idea why it won&#39;t build and doesn&#39;t find java, and how to fix it?\r\n\r\nIn my windows 10 environment setup I see both system variables of java_home and java_jdk are set to:\r\n\r\n    c:\\Program Files\\Java\\jdk1.8.0_291\r\n\r\nUpdate: Maybe this is the issue.  java -version shows 1.8.0_281.  Java home is 1.8.0_291.  How do I get java -version to show correct/installed version? I do have 1.8.0_291 in my Program files/Java dir.\r\n\r\nUpdate2:\r\nI tried creating gradle.properties file in home/me/.gradle dir with these contents, using double slashes because I had error and saw fix in [link][2]:\r\n\r\n    org.gradle.java.home=C:\\\\Program Files\\\\Java\\\\jdk1.8.0_291\r\n\r\nIn my windows 10 command prompt window I ran and saw this error:\r\n\r\n    gradlew bootRun --debug\r\n    Changing state to: STARTING\r\n    12:39:02.908 [DEBUG] [org.gradle.process.internal.DefaultExecHandle] Waiting until process started: command &#39;C:\\Program Files\\Java\\jdk1.8.0_291\\bin\\java.exe&#39;.\r\n    12:39:02.910 [DEBUG] [org.gradle.process.internal.DefaultExecHandle] Changing state to: FAILED\r\n    12:39:02.910 [DEBUG] [org.gradle.process.internal.DefaultExecHandle] Process &#39;command &#39;C:\\Program Files\\Java\\jdk1.8.0_291\\bin\\java.exe&#39;&#39; finished with exit value -1 (state: FAILED)\r\n    12:39:02.910 [DEBUG] [org.gradle.api.internal.tasks.execution.ResolveTaskArtifactStateTaskExecuter] Removed task artifact state for {} from context.\r\n    12:39:02.910 [DEBUG] [org.gradle.api.internal.tasks.execution.ExecuteAtMostOnceTaskExecuter] Finished executing task &#39;:bootRun&#39;\r\n    12:39:02.910 [LIFECYCLE] [class org.gradle.internal.buildevents.TaskExecutionLogger] :bootRun FAILED\r\n    12:39:02.911 [INFO] [org.gradle.execution.taskgraph.AbstractTaskPlanExecutor] :bootRun (Thread[Daemon worker,5,main]) completed. Took 0.245 secs.\r\n    12:39:02.911 [DEBUG] [org.gradle.internal.operations.DefaultBuildOperationWorkerRegistry] Worker root.8 completed (0 in use)\r\n    12:39:02.911 [DEBUG] [org.gradle.execution.taskgraph.AbstractTaskPlanExecutor] Task worker [Thread[Daemon worker,5,main]] finished, busy: 1.989 secs, idle: 0.001 secs\r\n    12:39:02.919 [ERROR] [org.gradle.internal.buildevents.BuildExceptionReporter]\r\n    12:39:02.919 [ERROR] [org.gradle.internal.buildevents.BuildExceptionReporter] FAILURE: Build failed with an exception.\r\n    12:39:02.919 [ERROR] [org.gradle.internal.buildevents.BuildExceptionReporter]\r\n    12:39:02.919 [ERROR] [org.gradle.internal.buildevents.BuildExceptionReporter] * What went wrong:\r\n    12:39:02.919 [ERROR] [org.gradle.internal.buildevents.BuildExceptionReporter] Execution failed for task &#39;:bootRun&#39;.\r\n    12:39:02.919 [ERROR] [org.gradle.internal.buildevents.BuildExceptionReporter] &gt; A problem occurred starting process &#39;command &#39;C:\\Program Files\\Java\\jdk1.8.0_291\\bin\\java.exe&#39;&#39;\r\n    12:39:02.919 [ERROR] [org.gradle.internal.buildevents.BuildExceptionReporter]\r\n    12:39:02.919 [ERROR] [org.gradle.internal.buildevents.BuildExceptionReporter] * Try:\r\n    12:39:02.919 [ERROR] [org.gradle.internal.buildevents.BuildExceptionReporter] Run with --stacktrace option to get the stack trace.\r\n    12:39:02.920 [LIFECYCLE] [org.gradle.internal.buildevents.BuildResultLogger]\r\n    12:39:02.920 [LIFECYCLE] [org.gradle.internal.buildevents.BuildResultLogger] BUILD FAILED\r\n\r\nStill not sure what is causing error.  I tried with running command prompt as administrator, and see the same error.\r\n\r\nUpdate3:\r\n\r\nTrying this...I found build.gradle in grailsapp folder. for some reason Intellij Idea isn&#39;t showing it.  I added this \r\n\r\n    compileJava {\r\n    \t\toptions.fork = true \r\n    \t\toptions.forkOptions.executable = &#39;${JAVA_HOME}/bin/javac.exe&#39;\r\n    }\r\n\r\nI still get the build failure \r\n\r\n    08:34:20.026 [DEBUG] [org.gradle.process.internal.DefaultExecHandle] Process &#39;command &#39;C:\\Program Files\\Java\\jdk1.8.0_291\\bin\\java.exe&#39;&#39; finished with exit value -1 (state: FAILED)\r\n    08:34:20.026 [DEBUG] [org.gradle.api.internal.tasks.execution.ResolveTaskArtifactStateTaskExecuter] Removed task artifact state for {} from context.\r\n    08:34:20.027 [DEBUG] [org.gradle.api.internal.tasks.execution.ExecuteAtMostOnceTaskExecuter] Finished executing task &#39;:bootRun&#39;\r\n    08:34:20.027 [LIFECYCLE] [class org.gradle.internal.buildevents.TaskExecutionLogger] :bootRun FAILED\r\n    08:34:20.027 [INFO] [org.gradle.execution.taskgraph.AbstractTaskPlanExecutor] :bootRun (Thread[Daemon worker Thread 2,5,main]) completed. Took 0.212 secs.\r\n    08:34:20.027 [DEBUG] [org.gradle.internal.operations.DefaultBuildOperationWorkerRegistry] Worker root.8 completed (0 in use)\r\n    08:34:20.027 [DEBUG] [org.gradle.execution.taskgraph.AbstractTaskPlanExecutor] Task worker [Thread[Daemon worker Thread 2,5,main]] finished, busy: 1.528 secs, idle: 0.001 secs\r\n    08:34:20.028 [ERROR] [org.gradle.internal.buildevents.BuildExceptionReporter]\r\n    08:34:20.028 [ERROR] [org.gradle.internal.buildevents.BuildExceptionReporter] FAILURE: Build failed with an exception.\r\n    08:34:20.029 [ERROR] [org.gradle.internal.buildevents.BuildExceptionReporter]\r\n    08:34:20.029 [ERROR] [org.gradle.internal.buildevents.BuildExceptionReporter] * What went wrong:\r\n    08:34:20.029 [ERROR] [org.gradle.internal.buildevents.BuildExceptionReporter] Execution failed for task &#39;:bootRun&#39;.\r\n    08:34:20.029 [ERROR] [org.gradle.internal.buildevents.BuildExceptionReporter] &gt; A problem occurred starting process &#39;command &#39;C:\\Program Files\\Java\\jdk1.8.0_291\\bin\\java.exe&#39;&#39;\r\n    08:34:20.029 [ERROR] [org.gradle.internal.buildevents.BuildExceptionReporter]\r\n    08:34:20.029 [ERROR] [org.gradle.internal.buildevents.BuildExceptionReporter] * Try:\r\n    08:34:20.029 [ERROR] [org.gradle.internal.buildevents.BuildExceptionReporter] Run with --stacktrace option to get the stack trace.\r\n    08:34:20.029 [LIFECYCLE] [org.gradle.internal.buildevents.BuildResultLogger]\r\n    08:34:20.029 [LIFECYCLE] [org.gradle.internal.buildevents.BuildResultLogger] BUILD FAILED\r\n\r\nUpdate4:\r\nstacktrace results:\r\n\r\n    gradlew bootRun --stacktrace\r\n    :compileJava NO-SOURCE\r\n    :compileGroovy UP-TO-DATE\r\n    :generateGitProperties UP-TO-DATE\r\n    :buildProperties UP-TO-DATE\r\n    :processResources\r\n    :classes\r\n    :findMainClass\r\n    :bootRun FAILED\r\n    \r\n    FAILURE: Build failed with an exception.\r\n    \r\n    * What went wrong:\r\n    Execution failed for task &#39;:bootRun&#39;.\r\n    &gt; A problem occurred starting process &#39;command &#39;C:\\Program Files\\Java\\jdk1.8.0_291\\bin\\java.exe&#39;&#39;\r\n    \r\n    * Try:\r\n    Run with --info or --debug option to get more log output.\r\n    \r\n    * Exception is:\r\n    org.gradle.api.tasks.TaskExecutionException: Execution failed for task &#39;:bootRun&#39;.\r\n            at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeActions(ExecuteActionsTaskExecuter.java:98)\r\n            at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.execute(ExecuteActionsTaskExecuter.java:68)\r\n            at org.gradle.api.internal.tasks.execution.SkipUpToDateTaskExecuter.execute(SkipUpToDateTaskExecuter.java:62)\r\n            at org.gradle.api.internal.tasks.execution.ValidatingTaskExecuter.execute(ValidatingTaskExecuter.java:58)\r\n            at org.gradle.api.internal.tasks.execution.SkipEmptySourceFilesTaskExecuter.execute(SkipEmptySourceFilesTaskExecuter.java:88)\r\n            at org.gradle.api.internal.tasks.execution.ResolveTaskArtifactStateTaskExecuter.execute(ResolveTaskArtifactStateTaskExecuter.java:46)\r\n            at org.gradle.api.internal.tasks.execution.SkipTaskWithNoActionsExecuter.execute(SkipTaskWithNoActionsExecuter.java:51)\r\n            at org.gradle.api.internal.tasks.execution.SkipOnlyIfTaskExecuter.execute(SkipOnlyIfTaskExecuter.java:54)\r\n            at org.gradle.api.internal.tasks.execution.ExecuteAtMostOnceTaskExecuter.execute(ExecuteAtMostOnceTaskExecuter.java:43)\r\n            at org.gradle.api.internal.tasks.execution.CatchExceptionTaskExecuter.execute(CatchExceptionTaskExecuter.java:34)\r\n            at org.gradle.execution.taskgraph.DefaultTaskGraphExecuter$EventFiringTaskWorker$1.execute(DefaultTaskGraphExecuter.java:236)\r\n            at org.gradle.execution.taskgraph.DefaultTaskGraphExecuter$EventFiringTaskWorker$1.execute(DefaultTaskGraphExecuter.java:228)\r\n            at org.gradle.internal.Transformers$4.transform(Transformers.java:169)\r\n            at org.gradle.internal.progress.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:106)\r\n            at org.gradle.internal.progress.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:61)\r\n            at org.gradle.execution.taskgraph.DefaultTaskGraphExecuter$EventFiringTaskWorker.execute(DefaultTaskGraphExecuter.java:228)\r\n            at org.gradle.execution.taskgraph.DefaultTaskGraphExecuter$EventFiringTaskWorker.execute(DefaultTaskGraphExecuter.java:215)\r\n            at org.gradle.execution.taskgraph.AbstractTaskPlanExecutor$TaskExecutorWorker.processTask(AbstractTaskPlanExecutor.java:77)\r\n            at org.gradle.execution.taskgraph.AbstractTaskPlanExecutor$TaskExecutorWorker.run(AbstractTaskPlanExecutor.java:58)\r\n            at org.gradle.execution.taskgraph.DefaultTaskPlanExecutor.process(DefaultTaskPlanExecutor.java:32)\r\n            at org.gradle.execution.taskgraph.DefaultTaskGraphExecuter.execute(DefaultTaskGraphExecuter.java:113)\r\n            at org.gradle.execution.SelectedTaskExecutionAction.execute(SelectedTaskExecutionAction.java:37)\r\n            at org.gradle.execution.DefaultBuildExecuter.execute(DefaultBuildExecuter.java:37)\r\n            at org.gradle.execution.DefaultBuildExecuter.access$000(DefaultBuildExecuter.java:23)\r\n            at org.gradle.execution.DefaultBuildExecuter$1.proceed(DefaultBuildExecuter.java:43)\r\n            at org.gradle.execution.DryRunBuildExecutionAction.execute(DryRunBuildExecutionAction.java:32)\r\n            at org.gradle.execution.DefaultBuildExecuter.execute(DefaultBuildExecuter.java:37)\r\n            at org.gradle.execution.DefaultBuildExecuter.execute(DefaultBuildExecuter.java:30)\r\n            at org.gradle.initialization.DefaultGradleLauncher$RunTasksAction.execute(DefaultGradleLauncher.java:230)\r\n            at org.gradle.initialization.DefaultGradleLauncher$RunTasksAction.execute(DefaultGradleLauncher.java:227)\r\n            at org.gradle.internal.Transformers$4.transform(Transformers.java:169)\r\n            at org.gradle.internal.progress.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:106)\r\n            at org.gradle.internal.progress.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:56)\r\n            at org.gradle.initialization.DefaultGradleLauncher.doBuildStages(DefaultGradleLauncher.java:161)\r\n            at org.gradle.initialization.DefaultGradleLauncher.doBuild(DefaultGradleLauncher.java:112)\r\n            at org.gradle.initialization.DefaultGradleLauncher.run(DefaultGradleLauncher.java:95)\r\n            at org.gradle.launcher.exec.GradleBuildController.run(GradleBuildController.java:66)\r\n            at org.gradle.tooling.internal.provider.ExecuteBuildActionRunner.run(ExecuteBuildActionRunner.java:28)\r\n            at org.gradle.launcher.exec.ChainingBuildActionRunner.run(ChainingBuildActionRunner.java:35)\r\n            at org.gradle.launcher.exec.InProcessBuildActionExecuter.execute(InProcessBuildActionExecuter.java:41)\r\n            at org.gradle.launcher.exec.InProcessBuildActionExecuter.execute(InProcessBuildActionExecuter.java:26)\r\n            at org.gradle.tooling.internal.provider.ContinuousBuildActionExecuter.execute(ContinuousBuildActionExecuter.java:75)\r\n            at org.gradle.tooling.internal.provider.ContinuousBuildActionExecuter.execute(ContinuousBuildActionExecuter.java:49)\r\n            at org.gradle.tooling.internal.provider.ServicesSetupBuildActionExecuter.execute(ServicesSetupBuildActionExecuter.java:49)\r\n            at org.gradle.tooling.internal.provider.ServicesSetupBuildActionExecuter.execute(ServicesSetupBuildActionExecuter.java:31)\r\n            at org.gradle.launcher.daemon.server.exec.ExecuteBuild.doBuild(ExecuteBuild.java:67)\r\n            at org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:36)\r\n            at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\r\n            at org.gradle.launcher.daemon.server.exec.WatchForDisconnection.execute(WatchForDisconnection.java:37)\r\n            at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\r\n            at org.gradle.launcher.daemon.server.exec.ResetDeprecationLogger.execute(ResetDeprecationLogger.java:26)\r\n            at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\r\n            at org.gradle.launcher.daemon.server.exec.RequestStopIfSingleUsedDaemon.execute(RequestStopIfSingleUsedDaemon.java:34)\r\n            at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\r\n            at org.gradle.launcher.daemon.server.exec.ForwardClientInput$2.call(ForwardClientInput.java:74)\r\n            at org.gradle.launcher.daemon.server.exec.ForwardClientInput$2.call(ForwardClientInput.java:72)\r\n            at org.gradle.util.Swapper.swap(Swapper.java:38)\r\n            at org.gradle.launcher.daemon.server.exec.ForwardClientInput.execute(ForwardClientInput.java:72)\r\n            at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\r\n            at org.gradle.launcher.daemon.server.exec.LogAndCheckHealth.execute(LogAndCheckHealth.java:55)\r\n            at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\r\n            at org.gradle.launcher.daemon.server.exec.LogToClient.doBuild(LogToClient.java:60)\r\n            at org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:36)\r\n            at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\r\n            at org.gradle.launcher.daemon.server.exec.EstablishBuildEnvironment.doBuild(EstablishBuildEnvironment.java:72)\r\n            at org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:36)\r\n            at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\r\n            at org.gradle.launcher.daemon.server.exec.StartBuildOrRespondWithBusy$1.run(StartBuildOrRespondWithBusy.java:50)\r\n            at org.gradle.launcher.daemon.server.DaemonStateCoordinator$1.run(DaemonStateCoordinator.java:297)\r\n            at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:63)\r\n            at org.gradle.internal.concurrent.StoppableExecutorImpl$1.run(StoppableExecutorImpl.java:46)\r\n    Caused by: org.gradle.process.internal.ExecException: A problem occurred starting process &#39;command &#39;C:\\Program Files\\Java\\jdk1.8.0_291\\bin\\java.exe&#39;&#39;\r\n            at org.gradle.process.internal.DefaultExecHandle.setEndStateInfo(DefaultExecHandle.java:198)\r\n            at org.gradle.process.internal.DefaultExecHandle.failed(DefaultExecHandle.java:329)\r\n            at org.gradle.process.internal.ExecHandleRunner.run(ExecHandleRunner.java:86)\r\n            ... 2 more\r\n    Caused by: net.rubygrapefruit.platform.NativeException: Could not start &#39;C:\\Program Files\\Java\\jdk1.8.0_291\\bin\\java.exe&#39;\r\n            at net.rubygrapefruit.platform.internal.DefaultProcessLauncher.start(DefaultProcessLauncher.java:27)\r\n            at net.rubygrapefruit.platform.internal.WindowsProcessLauncher.start(WindowsProcessLauncher.java:22)\r\n            at net.rubygrapefruit.platform.internal.WrapperProcessLauncher.start(WrapperProcessLauncher.java:36)\r\n            at org.gradle.process.internal.ExecHandleRunner.run(ExecHandleRunner.java:68)\r\n            ... 2 more\r\n    Caused by: java.io.IOException: Cannot run program &quot;C:\\Program Files\\Java\\jdk1.8.0_291\\bin\\java.exe&quot; (in directory &quot;C:\\Users\\mcleary\\grailsapp&quot;): CreateProcess error=206, The filename or extension is too long\r\n            at net.rubygrapefruit.platform.internal.DefaultProcessLauncher.start(DefaultProcessLauncher.java:25)\r\n            ... 5 more\r\n    Caused by: java.io.IOException: CreateProcess error=206, The filename or extension is too long\r\n            ... 6 more\r\n    \r\n    \r\n    BUILD FAILED\r\n    \r\n    Total time: 3.197 secs\r\n\r\nUpdate5:\r\nI have %JAVA_HOME%\\bin in my path environment variable, but not java.exe specifically there. I don&#39;t think I&#39;ve ever seen java.exe there.\r\n\r\nUpdate6:\r\nLooking at [pathingJar][3], I&#39;m adding \r\n\r\n    grails { pathingJar = true } \r\n\r\nto build.gradle.  I&#39;m not sure if I have to create a file too?\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/26634000/gradle-skipping-task-compilejava-as-it-has-no-source-files\r\n  [2]: https://stackoverflow.com/questions/39010338/java-home-supplied-via-org-gradle-java-home-is-invalid-invalid-directory-us\r\n  [3]: https://docs.grails.org/latest/guide/gettingStarted.html","title":"Grails - Execution failed for task bootRun. A problem occurred starting process command java.exe","body":"<p>There's an existing Grails project, and unfortunately all people who worked on it left the co.</p>\n<p>When I do at windows 10 command prompt (not running as admin)</p>\n<pre><code>gradlew bootRun --debug\n</code></pre>\n<p>I see</p>\n<pre><code>...\n09:01:21.398 [DEBUG] [org.gradle.process.internal.DefaultExecHandle] Changing state to: STARTING\n09:01:21.398 [DEBUG] [org.gradle.process.internal.DefaultExecHandle] Waiting until process started: command 'C:\\Program Files\\Java\\jdk1.8.0_291\\bin\\java.exe'.\n09:01:21.412 [DEBUG] [org.gradle.process.internal.DefaultExecHandle] Changing state to: FAILED\n09:01:21.412 [DEBUG] [org.gradle.process.internal.DefaultExecHandle] Process 'command 'C:\\Program Files\\Java\\jdk1.8.0_291\\bin\\java.exe'' finished with exit value -1 (state: FAILED)\n09:01:21.412 [DEBUG] [org.gradle.api.internal.tasks.execution.ResolveTaskArtifactStateTaskExecuter] Removed task artifact state for {} from context.\n09:01:21.413 [DEBUG] [org.gradle.api.internal.tasks.execution.ExecuteAtMostOnceTaskExecuter] Finished executing task ':bootRun'\n09:01:21.413 [LIFECYCLE] [class org.gradle.internal.buildevents.TaskExecutionLogger] :bootRun FAILED\n09:01:21.413 [INFO] [org.gradle.execution.taskgraph.AbstractTaskPlanExecutor] :bootRun (Thread[Daemon worker Thread 2,5,main]) completed. Took 0.214 secs.\n09:01:21.413 [DEBUG] [org.gradle.internal.operations.DefaultBuildOperationWorkerRegistry] Worker root.8 completed (0 in use)\n09:01:21.413 [DEBUG] [org.gradle.execution.taskgraph.AbstractTaskPlanExecutor] Task worker [Thread[Daemon worker Thread 2,5,main]] finished, busy: 1.458 secs, idle: 0.0 secs\n09:01:21.414 [ERROR] [org.gradle.internal.buildevents.BuildExceptionReporter]\n09:01:21.414 [ERROR] [org.gradle.internal.buildevents.BuildExceptionReporter] FAILURE: Build failed with an exception.\n09:01:21.415 [ERROR] [org.gradle.internal.buildevents.BuildExceptionReporter]\n09:01:21.415 [ERROR] [org.gradle.internal.buildevents.BuildExceptionReporter] * What went wrong:\n09:01:21.415 [ERROR] [org.gradle.internal.buildevents.BuildExceptionReporter] Execution failed for task ':bootRun'.\n09:01:21.415 [ERROR] [org.gradle.internal.buildevents.BuildExceptionReporter] &gt; A problem occurred starting process 'command 'C:\\Program Files\\Java\\jdk1.8.0_291\\bin\\java.exe''\n09:01:21.415 [ERROR] [org.gradle.internal.buildevents.BuildExceptionReporter]\n09:01:21.415 [ERROR] [org.gradle.internal.buildevents.BuildExceptionReporter] * Try:\n09:01:21.415 [ERROR] [org.gradle.internal.buildevents.BuildExceptionReporter] Run with --stacktrace option to get the stack trace.\n09:01:21.415 [LIFECYCLE] [org.gradle.internal.buildevents.BuildResultLogger]\n09:01:21.415 [LIFECYCLE] [org.gradle.internal.buildevents.BuildResultLogger] BUILD FAILED\n09:01:21.415 [LIFECYCLE] [org.gradle.internal.buildevents.BuildResultLogger]\n...\n</code></pre>\n<p>I tried</p>\n<pre><code>gradlew clean build \n</code></pre>\n<p>like I saw recommended somewhere and it didn't help.</p>\n<p>I looked at</p>\n<pre><code>java -version\n\njava version &quot;1.8.0_281&quot;\nJava(TM) SE Runtime Environment (build 1.8.0_281-b09)\nJava HotSpot(TM) Client VM (build 25.281-b09, mixed mode, sharing)\n</code></pre>\n<p>and</p>\n<pre><code>grails -version\n| Grails Version: 4.0.0\n| JVM Version: 1.8.0_291\n</code></pre>\n<p><a href=\"https://stackoverflow.com/questions/26634000/gradle-skipping-task-compilejava-as-it-has-no-source-files\">This article</a> seems to think I should have a src/main/java in my project, but I don't have that dir.  How do I create/get it? I can't rebuild the project since it's huge. That article mentioned adding sourceSets somewhere, but it didn't say where to add it.</p>\n<p>Any idea why it won't build and doesn't find java, and how to fix it?</p>\n<p>In my windows 10 environment setup I see both system variables of java_home and java_jdk are set to:</p>\n<pre><code>c:\\Program Files\\Java\\jdk1.8.0_291\n</code></pre>\n<p>Update: Maybe this is the issue.  java -version shows 1.8.0_281.  Java home is 1.8.0_291.  How do I get java -version to show correct/installed version? I do have 1.8.0_291 in my Program files/Java dir.</p>\n<p>Update2:\nI tried creating gradle.properties file in home/me/.gradle dir with these contents, using double slashes because I had error and saw fix in <a href=\"https://stackoverflow.com/questions/39010338/java-home-supplied-via-org-gradle-java-home-is-invalid-invalid-directory-us\">link</a>:</p>\n<pre><code>org.gradle.java.home=C:\\\\Program Files\\\\Java\\\\jdk1.8.0_291\n</code></pre>\n<p>In my windows 10 command prompt window I ran and saw this error:</p>\n<pre><code>gradlew bootRun --debug\nChanging state to: STARTING\n12:39:02.908 [DEBUG] [org.gradle.process.internal.DefaultExecHandle] Waiting until process started: command 'C:\\Program Files\\Java\\jdk1.8.0_291\\bin\\java.exe'.\n12:39:02.910 [DEBUG] [org.gradle.process.internal.DefaultExecHandle] Changing state to: FAILED\n12:39:02.910 [DEBUG] [org.gradle.process.internal.DefaultExecHandle] Process 'command 'C:\\Program Files\\Java\\jdk1.8.0_291\\bin\\java.exe'' finished with exit value -1 (state: FAILED)\n12:39:02.910 [DEBUG] [org.gradle.api.internal.tasks.execution.ResolveTaskArtifactStateTaskExecuter] Removed task artifact state for {} from context.\n12:39:02.910 [DEBUG] [org.gradle.api.internal.tasks.execution.ExecuteAtMostOnceTaskExecuter] Finished executing task ':bootRun'\n12:39:02.910 [LIFECYCLE] [class org.gradle.internal.buildevents.TaskExecutionLogger] :bootRun FAILED\n12:39:02.911 [INFO] [org.gradle.execution.taskgraph.AbstractTaskPlanExecutor] :bootRun (Thread[Daemon worker,5,main]) completed. Took 0.245 secs.\n12:39:02.911 [DEBUG] [org.gradle.internal.operations.DefaultBuildOperationWorkerRegistry] Worker root.8 completed (0 in use)\n12:39:02.911 [DEBUG] [org.gradle.execution.taskgraph.AbstractTaskPlanExecutor] Task worker [Thread[Daemon worker,5,main]] finished, busy: 1.989 secs, idle: 0.001 secs\n12:39:02.919 [ERROR] [org.gradle.internal.buildevents.BuildExceptionReporter]\n12:39:02.919 [ERROR] [org.gradle.internal.buildevents.BuildExceptionReporter] FAILURE: Build failed with an exception.\n12:39:02.919 [ERROR] [org.gradle.internal.buildevents.BuildExceptionReporter]\n12:39:02.919 [ERROR] [org.gradle.internal.buildevents.BuildExceptionReporter] * What went wrong:\n12:39:02.919 [ERROR] [org.gradle.internal.buildevents.BuildExceptionReporter] Execution failed for task ':bootRun'.\n12:39:02.919 [ERROR] [org.gradle.internal.buildevents.BuildExceptionReporter] &gt; A problem occurred starting process 'command 'C:\\Program Files\\Java\\jdk1.8.0_291\\bin\\java.exe''\n12:39:02.919 [ERROR] [org.gradle.internal.buildevents.BuildExceptionReporter]\n12:39:02.919 [ERROR] [org.gradle.internal.buildevents.BuildExceptionReporter] * Try:\n12:39:02.919 [ERROR] [org.gradle.internal.buildevents.BuildExceptionReporter] Run with --stacktrace option to get the stack trace.\n12:39:02.920 [LIFECYCLE] [org.gradle.internal.buildevents.BuildResultLogger]\n12:39:02.920 [LIFECYCLE] [org.gradle.internal.buildevents.BuildResultLogger] BUILD FAILED\n</code></pre>\n<p>Still not sure what is causing error.  I tried with running command prompt as administrator, and see the same error.</p>\n<p>Update3:</p>\n<p>Trying this...I found build.gradle in grailsapp folder. for some reason Intellij Idea isn't showing it.  I added this</p>\n<pre><code>compileJava {\n        options.fork = true \n        options.forkOptions.executable = '${JAVA_HOME}/bin/javac.exe'\n}\n</code></pre>\n<p>I still get the build failure</p>\n<pre><code>08:34:20.026 [DEBUG] [org.gradle.process.internal.DefaultExecHandle] Process 'command 'C:\\Program Files\\Java\\jdk1.8.0_291\\bin\\java.exe'' finished with exit value -1 (state: FAILED)\n08:34:20.026 [DEBUG] [org.gradle.api.internal.tasks.execution.ResolveTaskArtifactStateTaskExecuter] Removed task artifact state for {} from context.\n08:34:20.027 [DEBUG] [org.gradle.api.internal.tasks.execution.ExecuteAtMostOnceTaskExecuter] Finished executing task ':bootRun'\n08:34:20.027 [LIFECYCLE] [class org.gradle.internal.buildevents.TaskExecutionLogger] :bootRun FAILED\n08:34:20.027 [INFO] [org.gradle.execution.taskgraph.AbstractTaskPlanExecutor] :bootRun (Thread[Daemon worker Thread 2,5,main]) completed. Took 0.212 secs.\n08:34:20.027 [DEBUG] [org.gradle.internal.operations.DefaultBuildOperationWorkerRegistry] Worker root.8 completed (0 in use)\n08:34:20.027 [DEBUG] [org.gradle.execution.taskgraph.AbstractTaskPlanExecutor] Task worker [Thread[Daemon worker Thread 2,5,main]] finished, busy: 1.528 secs, idle: 0.001 secs\n08:34:20.028 [ERROR] [org.gradle.internal.buildevents.BuildExceptionReporter]\n08:34:20.028 [ERROR] [org.gradle.internal.buildevents.BuildExceptionReporter] FAILURE: Build failed with an exception.\n08:34:20.029 [ERROR] [org.gradle.internal.buildevents.BuildExceptionReporter]\n08:34:20.029 [ERROR] [org.gradle.internal.buildevents.BuildExceptionReporter] * What went wrong:\n08:34:20.029 [ERROR] [org.gradle.internal.buildevents.BuildExceptionReporter] Execution failed for task ':bootRun'.\n08:34:20.029 [ERROR] [org.gradle.internal.buildevents.BuildExceptionReporter] &gt; A problem occurred starting process 'command 'C:\\Program Files\\Java\\jdk1.8.0_291\\bin\\java.exe''\n08:34:20.029 [ERROR] [org.gradle.internal.buildevents.BuildExceptionReporter]\n08:34:20.029 [ERROR] [org.gradle.internal.buildevents.BuildExceptionReporter] * Try:\n08:34:20.029 [ERROR] [org.gradle.internal.buildevents.BuildExceptionReporter] Run with --stacktrace option to get the stack trace.\n08:34:20.029 [LIFECYCLE] [org.gradle.internal.buildevents.BuildResultLogger]\n08:34:20.029 [LIFECYCLE] [org.gradle.internal.buildevents.BuildResultLogger] BUILD FAILED\n</code></pre>\n<p>Update4:\nstacktrace results:</p>\n<pre><code>gradlew bootRun --stacktrace\n:compileJava NO-SOURCE\n:compileGroovy UP-TO-DATE\n:generateGitProperties UP-TO-DATE\n:buildProperties UP-TO-DATE\n:processResources\n:classes\n:findMainClass\n:bootRun FAILED\n\nFAILURE: Build failed with an exception.\n\n* What went wrong:\nExecution failed for task ':bootRun'.\n&gt; A problem occurred starting process 'command 'C:\\Program Files\\Java\\jdk1.8.0_291\\bin\\java.exe''\n\n* Try:\nRun with --info or --debug option to get more log output.\n\n* Exception is:\norg.gradle.api.tasks.TaskExecutionException: Execution failed for task ':bootRun'.\n        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeActions(ExecuteActionsTaskExecuter.java:98)\n        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.execute(ExecuteActionsTaskExecuter.java:68)\n        at org.gradle.api.internal.tasks.execution.SkipUpToDateTaskExecuter.execute(SkipUpToDateTaskExecuter.java:62)\n        at org.gradle.api.internal.tasks.execution.ValidatingTaskExecuter.execute(ValidatingTaskExecuter.java:58)\n        at org.gradle.api.internal.tasks.execution.SkipEmptySourceFilesTaskExecuter.execute(SkipEmptySourceFilesTaskExecuter.java:88)\n        at org.gradle.api.internal.tasks.execution.ResolveTaskArtifactStateTaskExecuter.execute(ResolveTaskArtifactStateTaskExecuter.java:46)\n        at org.gradle.api.internal.tasks.execution.SkipTaskWithNoActionsExecuter.execute(SkipTaskWithNoActionsExecuter.java:51)\n        at org.gradle.api.internal.tasks.execution.SkipOnlyIfTaskExecuter.execute(SkipOnlyIfTaskExecuter.java:54)\n        at org.gradle.api.internal.tasks.execution.ExecuteAtMostOnceTaskExecuter.execute(ExecuteAtMostOnceTaskExecuter.java:43)\n        at org.gradle.api.internal.tasks.execution.CatchExceptionTaskExecuter.execute(CatchExceptionTaskExecuter.java:34)\n        at org.gradle.execution.taskgraph.DefaultTaskGraphExecuter$EventFiringTaskWorker$1.execute(DefaultTaskGraphExecuter.java:236)\n        at org.gradle.execution.taskgraph.DefaultTaskGraphExecuter$EventFiringTaskWorker$1.execute(DefaultTaskGraphExecuter.java:228)\n        at org.gradle.internal.Transformers$4.transform(Transformers.java:169)\n        at org.gradle.internal.progress.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:106)\n        at org.gradle.internal.progress.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:61)\n        at org.gradle.execution.taskgraph.DefaultTaskGraphExecuter$EventFiringTaskWorker.execute(DefaultTaskGraphExecuter.java:228)\n        at org.gradle.execution.taskgraph.DefaultTaskGraphExecuter$EventFiringTaskWorker.execute(DefaultTaskGraphExecuter.java:215)\n        at org.gradle.execution.taskgraph.AbstractTaskPlanExecutor$TaskExecutorWorker.processTask(AbstractTaskPlanExecutor.java:77)\n        at org.gradle.execution.taskgraph.AbstractTaskPlanExecutor$TaskExecutorWorker.run(AbstractTaskPlanExecutor.java:58)\n        at org.gradle.execution.taskgraph.DefaultTaskPlanExecutor.process(DefaultTaskPlanExecutor.java:32)\n        at org.gradle.execution.taskgraph.DefaultTaskGraphExecuter.execute(DefaultTaskGraphExecuter.java:113)\n        at org.gradle.execution.SelectedTaskExecutionAction.execute(SelectedTaskExecutionAction.java:37)\n        at org.gradle.execution.DefaultBuildExecuter.execute(DefaultBuildExecuter.java:37)\n        at org.gradle.execution.DefaultBuildExecuter.access$000(DefaultBuildExecuter.java:23)\n        at org.gradle.execution.DefaultBuildExecuter$1.proceed(DefaultBuildExecuter.java:43)\n        at org.gradle.execution.DryRunBuildExecutionAction.execute(DryRunBuildExecutionAction.java:32)\n        at org.gradle.execution.DefaultBuildExecuter.execute(DefaultBuildExecuter.java:37)\n        at org.gradle.execution.DefaultBuildExecuter.execute(DefaultBuildExecuter.java:30)\n        at org.gradle.initialization.DefaultGradleLauncher$RunTasksAction.execute(DefaultGradleLauncher.java:230)\n        at org.gradle.initialization.DefaultGradleLauncher$RunTasksAction.execute(DefaultGradleLauncher.java:227)\n        at org.gradle.internal.Transformers$4.transform(Transformers.java:169)\n        at org.gradle.internal.progress.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:106)\n        at org.gradle.internal.progress.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:56)\n        at org.gradle.initialization.DefaultGradleLauncher.doBuildStages(DefaultGradleLauncher.java:161)\n        at org.gradle.initialization.DefaultGradleLauncher.doBuild(DefaultGradleLauncher.java:112)\n        at org.gradle.initialization.DefaultGradleLauncher.run(DefaultGradleLauncher.java:95)\n        at org.gradle.launcher.exec.GradleBuildController.run(GradleBuildController.java:66)\n        at org.gradle.tooling.internal.provider.ExecuteBuildActionRunner.run(ExecuteBuildActionRunner.java:28)\n        at org.gradle.launcher.exec.ChainingBuildActionRunner.run(ChainingBuildActionRunner.java:35)\n        at org.gradle.launcher.exec.InProcessBuildActionExecuter.execute(InProcessBuildActionExecuter.java:41)\n        at org.gradle.launcher.exec.InProcessBuildActionExecuter.execute(InProcessBuildActionExecuter.java:26)\n        at org.gradle.tooling.internal.provider.ContinuousBuildActionExecuter.execute(ContinuousBuildActionExecuter.java:75)\n        at org.gradle.tooling.internal.provider.ContinuousBuildActionExecuter.execute(ContinuousBuildActionExecuter.java:49)\n        at org.gradle.tooling.internal.provider.ServicesSetupBuildActionExecuter.execute(ServicesSetupBuildActionExecuter.java:49)\n        at org.gradle.tooling.internal.provider.ServicesSetupBuildActionExecuter.execute(ServicesSetupBuildActionExecuter.java:31)\n        at org.gradle.launcher.daemon.server.exec.ExecuteBuild.doBuild(ExecuteBuild.java:67)\n        at org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:36)\n        at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\n        at org.gradle.launcher.daemon.server.exec.WatchForDisconnection.execute(WatchForDisconnection.java:37)\n        at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\n        at org.gradle.launcher.daemon.server.exec.ResetDeprecationLogger.execute(ResetDeprecationLogger.java:26)\n        at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\n        at org.gradle.launcher.daemon.server.exec.RequestStopIfSingleUsedDaemon.execute(RequestStopIfSingleUsedDaemon.java:34)\n        at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\n        at org.gradle.launcher.daemon.server.exec.ForwardClientInput$2.call(ForwardClientInput.java:74)\n        at org.gradle.launcher.daemon.server.exec.ForwardClientInput$2.call(ForwardClientInput.java:72)\n        at org.gradle.util.Swapper.swap(Swapper.java:38)\n        at org.gradle.launcher.daemon.server.exec.ForwardClientInput.execute(ForwardClientInput.java:72)\n        at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\n        at org.gradle.launcher.daemon.server.exec.LogAndCheckHealth.execute(LogAndCheckHealth.java:55)\n        at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\n        at org.gradle.launcher.daemon.server.exec.LogToClient.doBuild(LogToClient.java:60)\n        at org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:36)\n        at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\n        at org.gradle.launcher.daemon.server.exec.EstablishBuildEnvironment.doBuild(EstablishBuildEnvironment.java:72)\n        at org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:36)\n        at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:120)\n        at org.gradle.launcher.daemon.server.exec.StartBuildOrRespondWithBusy$1.run(StartBuildOrRespondWithBusy.java:50)\n        at org.gradle.launcher.daemon.server.DaemonStateCoordinator$1.run(DaemonStateCoordinator.java:297)\n        at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:63)\n        at org.gradle.internal.concurrent.StoppableExecutorImpl$1.run(StoppableExecutorImpl.java:46)\nCaused by: org.gradle.process.internal.ExecException: A problem occurred starting process 'command 'C:\\Program Files\\Java\\jdk1.8.0_291\\bin\\java.exe''\n        at org.gradle.process.internal.DefaultExecHandle.setEndStateInfo(DefaultExecHandle.java:198)\n        at org.gradle.process.internal.DefaultExecHandle.failed(DefaultExecHandle.java:329)\n        at org.gradle.process.internal.ExecHandleRunner.run(ExecHandleRunner.java:86)\n        ... 2 more\nCaused by: net.rubygrapefruit.platform.NativeException: Could not start 'C:\\Program Files\\Java\\jdk1.8.0_291\\bin\\java.exe'\n        at net.rubygrapefruit.platform.internal.DefaultProcessLauncher.start(DefaultProcessLauncher.java:27)\n        at net.rubygrapefruit.platform.internal.WindowsProcessLauncher.start(WindowsProcessLauncher.java:22)\n        at net.rubygrapefruit.platform.internal.WrapperProcessLauncher.start(WrapperProcessLauncher.java:36)\n        at org.gradle.process.internal.ExecHandleRunner.run(ExecHandleRunner.java:68)\n        ... 2 more\nCaused by: java.io.IOException: Cannot run program &quot;C:\\Program Files\\Java\\jdk1.8.0_291\\bin\\java.exe&quot; (in directory &quot;C:\\Users\\mcleary\\grailsapp&quot;): CreateProcess error=206, The filename or extension is too long\n        at net.rubygrapefruit.platform.internal.DefaultProcessLauncher.start(DefaultProcessLauncher.java:25)\n        ... 5 more\nCaused by: java.io.IOException: CreateProcess error=206, The filename or extension is too long\n        ... 6 more\n\n\nBUILD FAILED\n\nTotal time: 3.197 secs\n</code></pre>\n<p>Update5:\nI have %JAVA_HOME%\\bin in my path environment variable, but not java.exe specifically there. I don't think I've ever seen java.exe there.</p>\n<p>Update6:\nLooking at <a href=\"https://docs.grails.org/latest/guide/gettingStarted.html\" rel=\"nofollow noreferrer\">pathingJar</a>, I'm adding</p>\n<pre><code>grails { pathingJar = true } \n</code></pre>\n<p>to build.gradle.  I'm not sure if I have to create a file too?</p>\n"},{"tags":["java","xml","docx4j"],"comments":[{"owner":{"account_id":2436112,"reputation":5684,"user_id":2125973,"accept_rate":38,"display_name":"Thusitha Thilina Dayaratne"},"score":0,"creation_date":1408115253,"post_id":25328779,"comment_id":39485607,"body_markdown":"check whether it is null if so write &quot;&quot;","body":"check whether it is null if so write &quot;&quot;"},{"owner":{"account_id":3418583,"reputation":1409,"user_id":2866836,"accept_rate":87,"display_name":"Manuela"},"score":0,"creation_date":1408115364,"post_id":25328779,"comment_id":39485660,"body_markdown":"Thanks, I would have a try!","body":"Thanks, I would have a try!"}],"answers":[{"tags":[],"owner":{"account_id":30580,"reputation":15467,"user_id":1031689,"accept_rate":67,"display_name":"JasonPlutext"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1408147594,"creation_date":1408147594,"answer_id":25335778,"question_id":25328779,"body_markdown":"You can add a file OpenDoPE/placeholder.xml to your classpath, containing for example:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;\r\n    &lt;w:r xmlns:w=&quot;http://schemas.openxmlformats.org/wordprocessingml/2006/main&quot;&gt;\r\n      &lt;w:rPr&gt;\r\n        &lt;w:rStyle w:val=&quot;PlaceholderText&quot;/&gt;\r\n      &lt;/w:rPr&gt;\r\n      &lt;w:t&gt; &lt;/w:t&gt;\r\n    &lt;/w:r&gt;","title":"How to remove &quot;Click here to enter text&quot; for empty contents in docx4j","body":"<p>You can add a file OpenDoPE/placeholder.xml to your classpath, containing for example:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?&gt;\n&lt;w:r xmlns:w=\"http://schemas.openxmlformats.org/wordprocessingml/2006/main\"&gt;\n  &lt;w:rPr&gt;\n    &lt;w:rStyle w:val=\"PlaceholderText\"/&gt;\n  &lt;/w:rPr&gt;\n  &lt;w:t&gt; &lt;/w:t&gt;\n&lt;/w:r&gt;\n</code></pre>\n"}],"owner":{"account_id":3418583,"reputation":1409,"user_id":2866836,"accept_rate":87,"display_name":"Manuela"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":889,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":25335778,"answer_count":1,"score":2,"last_activity_date":1646239450,"creation_date":1408114654,"question_id":25328779,"body_markdown":"I am using docx4j 3.1.0 to convert data from xml into word. If there&#39;s no content (null) in one field, then it will generate &quot;Click here to enter text&quot; in the exported file. How can I get rid of it? ","title":"How to remove &quot;Click here to enter text&quot; for empty contents in docx4j","body":"<p>I am using docx4j 3.1.0 to convert data from xml into word. If there's no content (null) in one field, then it will generate \"Click here to enter text\" in the exported file. How can I get rid of it? </p>\n"},{"tags":["java","websocket","apache-zookeeper","java-websocket"],"owner":{"account_id":8016571,"reputation":1174,"user_id":6046655,"accept_rate":50,"display_name":"Harshit"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":129,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1646239316,"creation_date":1646224850,"question_id":71322871,"body_markdown":"**Background** :\r\n \r\nI have a use-case where i need to ***consume*** a web-socket stream\r\n: *wss://stream.xyz.com:port/stream* \r\n\r\nI already have a basic setup up and running (a single instance &#39;A&#39; is listening to the stream), but want to make this listener service HA (auto Failover incase my listener server &#39;A&#39; goes down).\r\n\r\n**Question** :\r\n\r\nAre there any well structured solutions/libraries around the same. 1 tempting option i see here is using zoo-keeper. But reaching out to the community to understand if there are already some other well defined practices/abstractions around the same problem.","title":"Websocket : Making web-socket listeners highly available?","body":"<p><strong>Background</strong> :</p>\n<p>I have a use-case where i need to <em><strong>consume</strong></em> a web-socket stream\n: <em>wss://stream.xyz.com:port/stream</em></p>\n<p>I already have a basic setup up and running (a single instance 'A' is listening to the stream), but want to make this listener service HA (auto Failover incase my listener server 'A' goes down).</p>\n<p><strong>Question</strong> :</p>\n<p>Are there any well structured solutions/libraries around the same. 1 tempting option i see here is using zoo-keeper. But reaching out to the community to understand if there are already some other well defined practices/abstractions around the same problem.</p>\n"},{"tags":["python","java"],"comments":[{"owner":{"account_id":213468,"reputation":103486,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1646238674,"post_id":71274699,"comment_id":126075287,"body_markdown":"It doesn&#39;t work because `&gt;` is functionality of your shell, and the way `runtime.exec` works does not involve your shell. You either need to execute without the redirect and read the default output of your process and write it to a file yourself, or you need to call exec in a way that invokes your shell to perform the redirect for you.","body":"It doesn&#39;t work because <code>&gt;</code> is functionality of your shell, and the way <code>runtime.exec</code> works does not involve your shell. You either need to execute without the redirect and read the default output of your process and write it to a file yourself, or you need to call exec in a way that invokes your shell to perform the redirect for you."},{"owner":{"account_id":24355622,"reputation":1,"user_id":18290852,"display_name":"medinaracing"},"score":0,"creation_date":1646350279,"post_id":71274699,"comment_id":126108102,"body_markdown":"@MarkRotteveel you are right, I solved with this `exec(new String[]{&quot;bash&quot;,&quot;-c&quot;,terminal},null,new File(path))`. Thank you for your support.","body":"@MarkRotteveel you are right, I solved with this <code>exec(new String[]{&quot;bash&quot;,&quot;-c&quot;,terminal},null,new File(path))</code>. Thank you for your support."}],"owner":{"account_id":24355622,"reputation":1,"user_id":18290852,"display_name":"medinaracing"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1646238797,"answer_count":0,"score":0,"last_activity_date":1646238575,"creation_date":1645858788,"question_id":71274699,"body_markdown":"I&#39;m trying run a Python file with argument in Java code. When I run the file in Mac Os terminal, it works perfectly, but when I tried in Java code, it doesn&#39;t work.\r\n\r\nIn terminal I type this:\r\n\r\n    python import.py 10477 &gt; out.txt\r\n\r\nThat command generates a out.txt correctly, but it doesn&#39;t work in my Java code. I tried with this:\r\n\r\n    String path = &quot;/Users/Atlas/Desktop/Job/Python&quot;;\r\n    String textValue = textFixVersion.getText(); # Get value from a TextBox\r\n    \r\n    if(releaseRadio.isSelected()) { # Radio Button\r\n\r\n         String terminal = &quot;python import.py &quot; + textValue + &quot; &gt; out.txt&quot;;\r\n    \r\n         try {\r\n               Process process = Runtime.getRuntime().exec(terminal,null,new File(path));\r\n         }\r\n         catch (IOException ex) {\r\n               Logger.getLogger(Atlass.class.getName()).log(Level.SEVERE, null, ex);\r\n         }\r\n    }\r\n\r\nThis code is the same when I execute Jar files within my Java code and it working perfectly. I&#39;m working with Python 3.9.10.","title":"How can I run python file with arguments in Java code","body":"<p>I'm trying run a Python file with argument in Java code. When I run the file in Mac Os terminal, it works perfectly, but when I tried in Java code, it doesn't work.</p>\n<p>In terminal I type this:</p>\n<pre><code>python import.py 10477 &gt; out.txt\n</code></pre>\n<p>That command generates a out.txt correctly, but it doesn't work in my Java code. I tried with this:</p>\n<pre><code>String path = &quot;/Users/Atlas/Desktop/Job/Python&quot;;\nString textValue = textFixVersion.getText(); # Get value from a TextBox\n\nif(releaseRadio.isSelected()) { # Radio Button\n\n     String terminal = &quot;python import.py &quot; + textValue + &quot; &gt; out.txt&quot;;\n\n     try {\n           Process process = Runtime.getRuntime().exec(terminal,null,new File(path));\n     }\n     catch (IOException ex) {\n           Logger.getLogger(Atlass.class.getName()).log(Level.SEVERE, null, ex);\n     }\n}\n</code></pre>\n<p>This code is the same when I execute Jar files within my Java code and it working perfectly. I'm working with Python 3.9.10.</p>\n"},{"tags":["java","refactoring"],"comments":[{"owner":{"account_id":45934,"reputation":203669,"user_id":135589,"accept_rate":100,"display_name":"Jesper"},"score":1,"creation_date":1646235404,"post_id":71325263,"comment_id":126073817,"body_markdown":"No, not in a type-safe way or without using reflection, because Java does not have [duck typing](https://en.wikipedia.org/wiki/Duck_typing) (or structural typing), so there is no way to work with unrelated types that happen to have a particular method. Obvious solution is make an interface with the method, then make `ClassA` and `ClassB` implement the interface, and accept a `List&lt;MyInterface&gt;` in the method.","body":"No, not in a type-safe way or without using reflection, because Java does not have <a href=\"https://en.wikipedia.org/wiki/Duck_typing\" rel=\"nofollow noreferrer\">duck typing</a> (or structural typing), so there is no way to work with unrelated types that happen to have a particular method. Obvious solution is make an interface with the method, then make <code>ClassA</code> and <code>ClassB</code> implement the interface, and accept a <code>List&lt;MyInterface&gt;</code> in the method."},{"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"score":1,"creation_date":1646235499,"post_id":71325263,"comment_id":126073856,"body_markdown":"Or well, you could create a wrapper class that can be created from either a ClassA or a ClassB instance, and that implements the necessary interface. But of course, that means one wrapper object per original object in the lists. And then you can have doStuff(String str, List &lt; WrapperClass &gt;)","body":"Or well, you could create a wrapper class that can be created from either a ClassA or a ClassB instance, and that implements the necessary interface. But of course, that means one wrapper object per original object in the lists. And then you can have doStuff(String str, List &lt; WrapperClass &gt;)"},{"owner":{"account_id":15777655,"reputation":1762,"user_id":11385052,"display_name":"Ryan"},"score":1,"creation_date":1646235513,"post_id":71325263,"comment_id":126073864,"body_markdown":"No, with a caveat, there has to be some commonality between the objects if you&#39;re going to use them the same way.  HOWEVER, You could use reflection to lookup of the method name and invoke it directly, but I would STRONGLY advise against such code.","body":"No, with a caveat, there has to be some commonality between the objects if you&#39;re going to use them the same way.  HOWEVER, You could use reflection to lookup of the method name and invoke it directly, but I would STRONGLY advise against such code."},{"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"score":0,"creation_date":1646236319,"post_id":71325263,"comment_id":126074256,"body_markdown":"There are some issues with the things above. -1- Does `getObjValue()` return `boolean`,, or did you rather intend `map(s -&gt; s.getObjValue())` -2- That `collect(Collectors.toList()).findFirst()` -3- (findFirst) ifPresent throw` stays too long in the Stream, better `if (... .anyMatch(...)) throw`. -4- Please `throw new IllegalStateException` or `IllegalArgumentException` rather than the base `RuntimeException`","body":"There are some issues with the things above. -1- Does <code>getObjValue()</code> return <code>boolean</code>,, or did you rather intend <code>map(s -&gt; s.getObjValue())</code> -2- That <code>collect(Collectors.toList()).findFirst()</code> -3- (findFirst) ifPresent throw` stays too long in the Stream, better <code>if (... .anyMatch(...)) throw</code>. -4- Please <code>throw new IllegalStateException</code> or <code>IllegalArgumentException</code> rather than the base <code>RuntimeException</code>"},{"owner":{"account_id":3189863,"reputation":154,"user_id":2694442,"display_name":"Vlad A"},"score":0,"creation_date":1646236538,"post_id":71325263,"comment_id":126074360,"body_markdown":"the predicate is s -&gt; s.getObjValue().equalsIgnoreCase(str), I will edit. Thanks","body":"the predicate is s -&gt; s.getObjValue().equalsIgnoreCase(str), I will edit. Thanks"}],"answers":[{"tags":[],"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1646238455,"creation_date":1646237973,"answer_id":71325948,"question_id":71325263,"body_markdown":"Its not possible to completely eliminate the duplication if classA and classB do not share a common interface or superclass that declares `String getObjValue()`.\r\n\r\nI&#39;m assuming that the line 3 of `doStuffB()` (the line `.collect(Collectors.toList())` that prevents your sample code from compiling) can be safely removed, so that `doStuffA()` and `doStuffB()` do really the same thing.\r\n\r\nYou can then reduce the bulk of the duplication by factoring out the stream processing and using a `Predicate` :\r\n\r\n    public void doStuffA(String str, List&lt;ClassA&gt; list) {\r\n        doStuff(str, list, s -&gt; s.getObjValue().equalsIgnoreCase(str));\r\n    }\r\n\r\n    public void doStuffB(String str, List&lt;ClassB&gt; list) {\r\n        doStuff(str, list, s -&gt; s.getObjValue().equalsIgnoreCase(str));\r\n    }\r\n\r\n    private &lt;T&gt; void doStuff(String str, List&lt;T&gt; list, Predicate&lt;? super T&gt; predicate) {\r\n        list.stream()\r\n            .filter(predicate)\r\n            .findFirst()\r\n            .ifPresent( obj -&gt; {\r\n                throw new RuntimeException();\r\n            });\r\n    }\r\n","title":"Refactoring methods using Java generics","body":"<p>Its not possible to completely eliminate the duplication if classA and classB do not share a common interface or superclass that declares <code>String getObjValue()</code>.</p>\n<p>I'm assuming that the line 3 of <code>doStuffB()</code> (the line <code>.collect(Collectors.toList())</code> that prevents your sample code from compiling) can be safely removed, so that <code>doStuffA()</code> and <code>doStuffB()</code> do really the same thing.</p>\n<p>You can then reduce the bulk of the duplication by factoring out the stream processing and using a <code>Predicate</code> :</p>\n<pre><code>public void doStuffA(String str, List&lt;ClassA&gt; list) {\n    doStuff(str, list, s -&gt; s.getObjValue().equalsIgnoreCase(str));\n}\n\npublic void doStuffB(String str, List&lt;ClassB&gt; list) {\n    doStuff(str, list, s -&gt; s.getObjValue().equalsIgnoreCase(str));\n}\n\nprivate &lt;T&gt; void doStuff(String str, List&lt;T&gt; list, Predicate&lt;? super T&gt; predicate) {\n    list.stream()\n        .filter(predicate)\n        .findFirst()\n        .ifPresent( obj -&gt; {\n            throw new RuntimeException();\n        });\n}\n</code></pre>\n"}],"owner":{"account_id":3189863,"reputation":154,"user_id":2694442,"display_name":"Vlad A"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71325948,"answer_count":1,"score":0,"last_activity_date":1646238455,"creation_date":1646235119,"question_id":71325263,"body_markdown":"I have the following two methods:\r\n```\r\npublic void doStuffA(String str, List&lt;ClassA&gt; list){\r\n    list.stream()\r\n            .filter(s -&gt; s.getObjValue().equalsIgnoreCase(str))\r\n            .findFirst()\r\n            .ifPresent( obj -&gt;{\r\n                throw new RuntimeException();\r\n            });\r\n}\r\n\r\npublic void doStuffB(String str, List&lt;ClassB&gt; list){\r\n    list.stream()\r\n            .filter(s -&gt; s.getObjValue().equalsIgnoreCase(str))\r\n            .collect(Collectors.toList())\r\n            .findFirst()\r\n            .ifPresent( obj -&gt;{\r\n                throw new RuntimeException();\r\n            });\r\n}\r\n```\r\nBoth ClassA and Class B have the same method getObjValue, but they have no relationship. they dont inherit from common class or interface.\r\n    Since the methods are almost identical, can I somehow use generics to deduplicate this code with a method that has a signature like this one:\r\n```\r\npublic void doStuffB(String str, List&lt;?&gt; list)\r\n```","title":"Refactoring methods using Java generics","body":"<p>I have the following two methods:</p>\n<pre><code>public void doStuffA(String str, List&lt;ClassA&gt; list){\n    list.stream()\n            .filter(s -&gt; s.getObjValue().equalsIgnoreCase(str))\n            .findFirst()\n            .ifPresent( obj -&gt;{\n                throw new RuntimeException();\n            });\n}\n\npublic void doStuffB(String str, List&lt;ClassB&gt; list){\n    list.stream()\n            .filter(s -&gt; s.getObjValue().equalsIgnoreCase(str))\n            .collect(Collectors.toList())\n            .findFirst()\n            .ifPresent( obj -&gt;{\n                throw new RuntimeException();\n            });\n}\n</code></pre>\n<p>Both ClassA and Class B have the same method getObjValue, but they have no relationship. they dont inherit from common class or interface.\nSince the methods are almost identical, can I somehow use generics to deduplicate this code with a method that has a signature like this one:</p>\n<pre><code>public void doStuffB(String str, List&lt;?&gt; list)\n</code></pre>\n"},{"tags":["java","json","rest","jersey","jax-rs"],"answers":[{"tags":[],"owner":{"display_name":"user1907906"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1374846932,"creation_date":1374846932,"answer_id":17883245,"question_id":17883177,"body_markdown":"Return a `Response` (a class from JAX-RS) with `UserClass` as the entity. On the `Response` you can set HTTP headers.","title":"Custom response header Jersey/Java","body":"<p>Return a <code>Response</code> (a class from JAX-RS) with <code>UserClass</code> as the entity. On the <code>Response</code> you can set HTTP headers.</p>\n"},{"tags":[],"owner":{"account_id":195331,"reputation":275408,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"down_vote_count":0,"up_vote_count":38,"is_accepted":true,"score":38,"last_activity_date":1381528740,"creation_date":1374846949,"answer_id":17883255,"question_id":17883177,"body_markdown":"Just inject a `@Context HttpServletResponse response` as a method argument. Change the headers on that\r\n\r\n    @Produces(MediaType.APPLICATION_JSON)\r\n    public UserClass getValues(@Context HttpHeaders header, @Context HttpServletResponse response) {\r\n        response.setHeader(&quot;yourheadername&quot;, &quot;yourheadervalue&quot;);\r\n        ...\r\n    }","title":"Custom response header Jersey/Java","body":"<p>Just inject a <code>@Context HttpServletResponse response</code> as a method argument. Change the headers on that</p>\n\n<pre><code>@Produces(MediaType.APPLICATION_JSON)\npublic UserClass getValues(@Context HttpHeaders header, @Context HttpServletResponse response) {\n    response.setHeader(\"yourheadername\", \"yourheadervalue\");\n    ...\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2905043,"reputation":1741,"user_id":2490666,"display_name":"Alex P"},"down_vote_count":0,"up_vote_count":59,"is_accepted":false,"score":59,"last_activity_date":1390209103,"creation_date":1390209103,"answer_id":21230009,"question_id":17883177,"body_markdown":"I think using `javax.ws.rs.core.Response` is more elegant and it is a part of Jersey. Just to extend previous answer, here is a simple example:\r\n\r\n        @GET\r\n    \t@Produces({ MediaType.APPLICATION_JSON })\r\n    \t@Path(&quot;/values&quot;)\r\n    \tpublic Response getValues(String body) {\r\n    \t\t\r\n    \t\t//Prepare your entity\r\n    \t\t\r\n    \t\tResponse response = Response.status(200).\r\n    \t\t\t\tentity(yourEntity).\r\n    \t\t\t\theader(&quot;yourHeaderName&quot;, &quot;yourHeaderValue&quot;).build();\r\n    \t\t\r\n    \t\treturn response;\r\n    \t}","title":"Custom response header Jersey/Java","body":"<p>I think using <code>javax.ws.rs.core.Response</code> is more elegant and it is a part of Jersey. Just to extend previous answer, here is a simple example:</p>\n\n<pre><code>    @GET\n    @Produces({ MediaType.APPLICATION_JSON })\n    @Path(\"/values\")\n    public Response getValues(String body) {\n\n        //Prepare your entity\n\n        Response response = Response.status(200).\n                entity(yourEntity).\n                header(\"yourHeaderName\", \"yourHeaderValue\").build();\n\n        return response;\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1448228,"reputation":3218,"user_id":1366016,"accept_rate":60,"display_name":"Wheezil"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646238175,"creation_date":1646238175,"answer_id":71325997,"question_id":17883177,"body_markdown":"I found that the HttpServletResponse approach did not work.  Instead, we installed a custom response filter:\r\n\r\n    @Provider\r\n    public class MyFilter implements ContainerResponseFilter {\r\n    \t@Override\r\n    \tpublic void filter(ContainerRequestContext requestContext, ContainerResponseContext ctx) throws IOException {\r\n    \t\tArrayList&lt;Object&gt; valueList = new ArrayList&lt;&gt;();\r\n    \t\tvalueList.add(&quot;my-header-value&quot;);\r\n    \t\tctx.getHeaders().put(&quot;My-header&quot;, valueList);\r\n    \t\t...\r\n        }\r\n    }\r\n\r\nAnd the web app:\r\n\r\n    public class MyApp extends Application {\r\n    \tstatic Set&lt;Object&gt; singletons = new LinkedHashSet&lt;&gt;();\r\n    \tpublic static void setSingletons(Set&lt;Object&gt; singletons) {\r\n    \t\tMyApp.singletons = singletons;\r\n    \t}\r\n    \t@Override\r\n    \tpublic Set&lt;Object&gt; getSingletons() {\r\n    \t\treturn singletons;\r\n    \t}\r\n    }\r\n\r\n    Set&lt;Object&gt; singletons = new LinkedHashSet&lt;&gt;();\r\n    singletons.add(new MyFilter());\r\n    MyApp.setSingletons(singletons);\r\n\r\n\r\n","title":"Custom response header Jersey/Java","body":"<p>I found that the HttpServletResponse approach did not work.  Instead, we installed a custom response filter:</p>\n<pre><code>@Provider\npublic class MyFilter implements ContainerResponseFilter {\n    @Override\n    public void filter(ContainerRequestContext requestContext, ContainerResponseContext ctx) throws IOException {\n        ArrayList&lt;Object&gt; valueList = new ArrayList&lt;&gt;();\n        valueList.add(&quot;my-header-value&quot;);\n        ctx.getHeaders().put(&quot;My-header&quot;, valueList);\n        ...\n    }\n}\n</code></pre>\n<p>And the web app:</p>\n<pre><code>public class MyApp extends Application {\n    static Set&lt;Object&gt; singletons = new LinkedHashSet&lt;&gt;();\n    public static void setSingletons(Set&lt;Object&gt; singletons) {\n        MyApp.singletons = singletons;\n    }\n    @Override\n    public Set&lt;Object&gt; getSingletons() {\n        return singletons;\n    }\n}\n\nSet&lt;Object&gt; singletons = new LinkedHashSet&lt;&gt;();\nsingletons.add(new MyFilter());\nMyApp.setSingletons(singletons);\n</code></pre>\n"}],"owner":{"account_id":2908093,"reputation":551,"user_id":2492930,"accept_rate":78,"display_name":"Namenoobie"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":46402,"favorite_count":0,"down_vote_count":0,"up_vote_count":30,"accepted_answer_id":17883255,"answer_count":4,"score":30,"last_activity_date":1646238175,"creation_date":1374846751,"question_id":17883177,"body_markdown":"I am trying to achieve the following.\r\n\r\nRead a custom header and its value from Request:\r\n\r\n    name: username\r\n\r\nNow, on response, I would like to return the same header `name:value` pair in HTTP response.\r\n\r\nI am using Jersey 2.0 implementation of JAX-RS webservice.\r\n\r\nWhen I send the request URL `Http://localhost/test/`, the request headers are also passed (for the time being, though Firefox plugin - hardcoding them). \r\n\r\nOn receiving the request for that URL, the following method is invoked:\r\n\r\n    @GET\r\n    @Produces(MediaType.APPLICATION_JSON)\r\n    public UserClass getValues(@Context HttpHeaders header) {\r\n    \tMultivaluedMap&lt;String, String&gt; headerParams = header.getRequestHeaders();\r\n    \tString userKey = &quot;name&quot;;\r\n    \theaderParams.get(userKey);\r\n            \t\t\r\n    \t// ...\r\n    \r\n        return user_object;\r\n    }\r\n\r\nHow may I achieve this? Any pointers would be great!\r\n\r\n","title":"Custom response header Jersey/Java","body":"<p>I am trying to achieve the following.</p>\n\n<p>Read a custom header and its value from Request:</p>\n\n<pre><code>name: username\n</code></pre>\n\n<p>Now, on response, I would like to return the same header <code>name:value</code> pair in HTTP response.</p>\n\n<p>I am using Jersey 2.0 implementation of JAX-RS webservice.</p>\n\n<p>When I send the request URL <code>Http://localhost/test/</code>, the request headers are also passed (for the time being, though Firefox plugin - hardcoding them). </p>\n\n<p>On receiving the request for that URL, the following method is invoked:</p>\n\n<pre><code>@GET\n@Produces(MediaType.APPLICATION_JSON)\npublic UserClass getValues(@Context HttpHeaders header) {\n    MultivaluedMap&lt;String, String&gt; headerParams = header.getRequestHeaders();\n    String userKey = \"name\";\n    headerParams.get(userKey);\n\n    // ...\n\n    return user_object;\n}\n</code></pre>\n\n<p>How may I achieve this? Any pointers would be great!</p>\n"},{"tags":["java","android","serialization","sharedpreferences","unchecked-cast"],"comments":[{"owner":{"account_id":10396927,"reputation":68267,"user_id":7666442,"display_name":"AskNilesh"},"score":0,"creation_date":1536055308,"post_id":52163688,"comment_id":91276837,"body_markdown":"Did you check this https://stackoverflow.com/questions/197986/what-causes-javac-to-issue-the-uses-unchecked-or-unsafe-operations-warning and this https://stackoverflow.com/questions/23749786/uses-unchecked-or-unsafe-operations","body":"Did you check this <a href=\"https://stackoverflow.com/questions/197986/what-causes-javac-to-issue-the-uses-unchecked-or-unsafe-operations-warning\" title=\"what causes javac to issue the uses unchecked or unsafe operations warning\">stackoverflow.com/questions/197986/&hellip;</a> and this <a href=\"https://stackoverflow.com/questions/23749786/uses-unchecked-or-unsafe-operations\" title=\"uses unchecked or unsafe operations\">stackoverflow.com/questions/23749786/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":7614550,"reputation":955,"user_id":5774447,"display_name":"Oldskultxo"},"down_vote_count":0,"up_vote_count":13,"is_accepted":true,"score":13,"last_activity_date":1536059020,"creation_date":1536058598,"answer_id":52164693,"question_id":52163688,"body_markdown":"In this case that warinig is shown because you are parsing directly the result of \r\n\r\n    input.readObject();\r\n\r\nThat returns an Object of type Object, (that is so generic), into an ArrayList, and the compiler tries to say you that, it could be any other type of objects.\r\n\r\nIn my opinion its not an important warning if that instruction in your code is always returning ArrayList&lt;MyObject&gt;, so i would add to your method definition.\r\n\r\n    @SuppressWarnings(&quot;unchecked&quot;)","title":"Unsafe or unchecked operations warning","body":"<p>In this case that warinig is shown because you are parsing directly the result of </p>\n\n<pre><code>input.readObject();\n</code></pre>\n\n<p>That returns an Object of type Object, (that is so generic), into an ArrayList, and the compiler tries to say you that, it could be any other type of objects.</p>\n\n<p>In my opinion its not an important warning if that instruction in your code is always returning ArrayList, so i would add to your method definition.</p>\n\n<pre><code>@SuppressWarnings(\"unchecked\")\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14765318,"reputation":1569,"user_id":10663537,"display_name":"Jhakiz"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1560891781,"creation_date":1560891781,"answer_id":56657006,"question_id":52163688,"body_markdown":"I had the same problem and solved it by adding :\r\n\r\n    @SuppressWarnings(&quot;unchecked&quot;)\r\n    public class className extends AppCompatActivity {\r\n    ...\r\n    }\r\n\r\nI hope this will help","title":"Unsafe or unchecked operations warning","body":"<p>I had the same problem and solved it by adding :</p>\n\n<pre><code>@SuppressWarnings(\"unchecked\")\npublic class className extends AppCompatActivity {\n...\n}\n</code></pre>\n\n<p>I hope this will help</p>\n"},{"tags":[],"owner":{"account_id":9809771,"reputation":6806,"user_id":10699119,"display_name":"Sana Ebadi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1572202623,"creation_date":1572202623,"answer_id":58582383,"question_id":52163688,"body_markdown":"I solved this problem with add :\r\n\r\n    @SuppressWarnings(&quot;unchecked&quot;)\r\n    public class CommLockInfoManager {","title":"Unsafe or unchecked operations warning","body":"<p>I solved this problem with add :</p>\n\n<pre><code>@SuppressWarnings(\"unchecked\")\npublic class CommLockInfoManager {\n</code></pre>\n"},{"tags":[],"owner":{"account_id":24028585,"reputation":11,"user_id":18009876,"display_name":"rates336"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646238078,"creation_date":1646238078,"answer_id":71325979,"question_id":52163688,"body_markdown":"To everyone who gave answer earlier.\r\nIf you write\r\n\r\n    @SuppressWarnings(&quot;unchecked&quot;)\r\n\r\nYou tell to java:\r\n&quot;Please not check what is under the command.&quot;\r\nThis is not solution this error.\r\nIf you want to the solve the problem you must don&#39;t use interface and select some name class.","title":"Unsafe or unchecked operations warning","body":"<p>To everyone who gave answer earlier.\nIf you write</p>\n<pre><code>@SuppressWarnings(&quot;unchecked&quot;)\n</code></pre>\n<p>You tell to java:\n&quot;Please not check what is under the command.&quot;\nThis is not solution this error.\nIf you want to the solve the problem you must don't use interface and select some name class.</p>\n"}],"owner":{"account_id":7528450,"reputation":6499,"user_id":5717640,"accept_rate":98,"display_name":"Nerdy Bunz"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":36840,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":52164693,"answer_count":4,"score":3,"last_activity_date":1646238078,"creation_date":1536055216,"question_id":52163688,"body_markdown":"In an app I am using SharedPrefernces to save/load (serialize/deserialize) some objects.\r\n\r\nThis is the deserialization code:\r\n\r\n    private void loadData() {\r\n    \r\n        String str = sharedPreferences.getString(PREF_TAG, null);\r\n    \r\n        byte[] bytes = Base64.decode(str, Base64.DEFAULT);\r\n    \r\n        try {\r\n            ByteArrayInputStream bais = new ByteArrayInputStream(bytes);\r\n            ObjectInputStream input = new ObjectInputStream(bais);\r\n            arrayOfObjects = (ArrayList&lt;MyObject&gt;) input.readObject();\r\n        } catch (Exception e) {\r\n            Log.i(&quot;BUG&quot;, &quot;error decoding serialized objects: &quot; + e.toString());\r\n        }\r\n    \r\n        if (arrayOfObjects == null) {\r\n            Log.i(&quot;BUG&quot;, &quot;serious problem!&quot;);\r\n        }\r\n    \r\n    }\r\n\r\nBut whenever I compile this project, the line:\r\n\r\n    arrayOfObjects = (ArrayList&lt;MyObject&gt;) input.readObject();\r\n\r\ncauses a warning that the class containing this method &quot;uses unchecked or unsafe operations.&quot;\r\n\r\nHow can I get rid of this warning or change my code to be more safe?","title":"Unsafe or unchecked operations warning","body":"<p>In an app I am using SharedPrefernces to save/load (serialize/deserialize) some objects.</p>\n\n<p>This is the deserialization code:</p>\n\n<pre><code>private void loadData() {\n\n    String str = sharedPreferences.getString(PREF_TAG, null);\n\n    byte[] bytes = Base64.decode(str, Base64.DEFAULT);\n\n    try {\n        ByteArrayInputStream bais = new ByteArrayInputStream(bytes);\n        ObjectInputStream input = new ObjectInputStream(bais);\n        arrayOfObjects = (ArrayList&lt;MyObject&gt;) input.readObject();\n    } catch (Exception e) {\n        Log.i(\"BUG\", \"error decoding serialized objects: \" + e.toString());\n    }\n\n    if (arrayOfObjects == null) {\n        Log.i(\"BUG\", \"serious problem!\");\n    }\n\n}\n</code></pre>\n\n<p>But whenever I compile this project, the line:</p>\n\n<pre><code>arrayOfObjects = (ArrayList&lt;MyObject&gt;) input.readObject();\n</code></pre>\n\n<p>causes a warning that the class containing this method \"uses unchecked or unsafe operations.\"</p>\n\n<p>How can I get rid of this warning or change my code to be more safe?</p>\n"},{"tags":["java","kotlin","jdbc","clickhouse"],"comments":[{"owner":{"account_id":213468,"reputation":103486,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1646222274,"post_id":71314115,"comment_id":126068476,"body_markdown":"Please post the full exception stacktrace, not just the exception message. In any case, a possible cause could be that the ClickHouse driver is not fully JDBC compliant.","body":"Please post the full exception stacktrace, not just the exception message. In any case, a possible cause could be that the ClickHouse driver is not fully JDBC compliant."},{"owner":{"account_id":2485865,"reputation":1351,"user_id":2164300,"accept_rate":44,"display_name":"usman"},"score":0,"creation_date":1646401106,"post_id":71314115,"comment_id":126120099,"body_markdown":"First of all use clickhouse-client (asycn in nature with http), as clickhouse-jdbc is sync in nature. Otherwise you will be facing performance issues. https://github.com/ClickHouse/clickhouse-jdbc have details and examples posted already.","body":"First of all use clickhouse-client (asycn in nature with http), as clickhouse-jdbc is sync in nature. Otherwise you will be facing performance issues. <a href=\"https://github.com/ClickHouse/clickhouse-jdbc\" rel=\"nofollow noreferrer\">github.com/ClickHouse/clickhouse-jdbc</a> have details and examples posted already."},{"owner":{"account_id":19118721,"reputation":6319,"user_id":13963086,"display_name":"k314159"},"score":0,"creation_date":1649431876,"post_id":71314115,"comment_id":126881916,"body_markdown":"If the suggested fix at https://github.com/ClickHouse/clickhouse-jdbc/issues/849 works, please post it as a solution for future readers.","body":"If the suggested fix at <a href=\"https://github.com/ClickHouse/clickhouse-jdbc/issues/849\" rel=\"nofollow noreferrer\">github.com/ClickHouse/clickhouse-jdbc/issues/849</a> works, please post it as a solution for future readers."}],"owner":{"account_id":940676,"reputation":24354,"user_id":968801,"accept_rate":63,"display_name":"jhamm"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1029,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1646237991,"creation_date":1646165437,"question_id":71314115,"body_markdown":"I am new to ClickHouse. I am running version 27.2.2.1. \r\n\r\nI have a Java/Kotlin project. I am using `clickhouse-jdbc`, version `0.3.2-patch5` to connect to the database. \r\n\r\nHere is how I am connecting to the database \r\n```kotlin\r\n@Bean(name = [&quot;clickhouseDS&quot;])\r\nfun clickhouseDataSource(): DataSource {\r\n    val dataSource = SimpleDriverDataSource()\r\n    dataSource.setDriverClass(ClickHouseDriver::class.java)\r\n    dataSource.url = jdbcUrl\r\n    dataSource.username = dbUsername\r\n    dataSource.password = dbPassword\r\n    val properties = Properties()\r\n    properties.setProperty(&quot;namedParameter&quot;, &quot;true&quot;)\r\n    dataSource.connectionProperties = properties\r\n    logger.info(&quot;postgresDS: $jdbcUrl | $dbUsername&quot;)\r\n    return dataSource\r\n}\r\n```\r\nI can verify that I am connected to the db and can make queries if I hard code the parameters. Here is an example which works:\r\n\r\n```sql\r\nSELECT *\r\n   FROM parcel p\r\n   WHERE p.parcel_id IN (&#39;c41f29ad-885a-4199-b1b3-475ee0d5913e&#39;, &#39;e5682ace-61af-489e-8000-1c7577a58a0f&#39;)\r\n```\r\n\r\nI am using \r\n```kotlin\r\nnamedParameterJdbcTemplate.query(sql.sql, sql.params) { rs: ResultSet, _: Int -&gt; createEntity(rs) }\r\n```\r\n\r\nIf I try to create a parameterized version of the same query\r\n```sql\r\nSELECT *\r\n  FROM parcel p\r\n  WHERE p.parcel_id IN (:parcelIds)\r\n```\r\n\r\nAnd then call the query the same way, I get this error \r\n\r\n```none\r\norg.springframework.jdbc.UncategorizedSQLException: PreparedStatementCallback; uncategorized SQLException for SQL [\r\n            SELECT *\r\n            FROM parcel p\r\n         WHERE p.parcel_id IN (?, ?) ]; SQL state [HY000]; error code [0]; Parameter index must between 1 and 0 but we got 1; nested exception is java.sql.SQLException: Parameter index must between 1 and 0 but we got 1\r\n\tat org.springframework.jdbc.core.JdbcTemplate.translateException(JdbcTemplate.java:1542) ~[spring-jdbc-5.3.16.jar:5.3.16]\r\n\tat org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:667) ~[spring-jdbc-5.3.16.jar:5.3.16]\r\n\tat org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:713) ~[spring-jdbc-5.3.16.jar:5.3.16]\r\n\tat org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:738) ~[spring-jdbc-5.3.16.jar:5.3.16]\r\n\tat org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:794) ~[spring-jdbc-5.3.16.jar:5.3.16]\r\n\tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.query(NamedParameterJdbcTemplate.java:209) ~[spring-jdbc-5.3.16.jar:5.3.16]\r\n\tat com.aeonai.parcel.repository.ParcelRepository.findAllByIds(ParcelRepository.kt:30) ~[classes/:na]\r\n\tat com.aeonai.parcel.grpcservice.ParcelGrpcService.loadParcelGeometry(ParcelGrpcService.kt:38) ~[classes/:na]\r\n\tat com.aeonai.parcel.proto.ParcelServiceGrpc$MethodHandlers.invoke(ParcelServiceGrpc.java:347) ~[classes/:na]\r\n\tat io.grpc.stub.ServerCalls$UnaryServerCallHandler$UnaryServerCallListener.onHalfClose(ServerCalls.java:182) ~[grpc-stub-1.44.0.jar:1.44.0]\r\n\tat io.grpc.internal.ServerCallImpl$ServerStreamListenerImpl.halfClosed(ServerCallImpl.java:340) ~[grpc-core-1.43.2.jar:1.43.2]\r\n\tat io.grpc.internal.ServerImpl$JumpToApplicationThreadServerStreamListener$1HalfClosed.runInContext(ServerImpl.java:866) ~[grpc-core-1.43.2.jar:1.43.2]\r\n\tat io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37) ~[grpc-core-1.43.2.jar:1.43.2]\r\n\tat io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133) ~[grpc-core-1.43.2.jar:1.43.2]\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130) ~[na:na]\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:630) ~[na:na]\r\n\tat java.base/java.lang.Thread.run(Thread.java:832) ~[na:na]\r\nCaused by: java.sql.SQLException: Parameter index must between 1 and 0 but we got 1\r\n\tat com.clickhouse.jdbc.SqlExceptionUtils.clientError(SqlExceptionUtils.java:43) ~[clickhouse-jdbc-0.3.2-patch5-http.jar:clickhouse-jdbc 0.3.2-patch5 (revision: 3d921d4)]\r\n\tat com.clickhouse.jdbc.internal.SqlBasedPreparedStatement.toArrayIndex(SqlBasedPreparedStatement.java:214) ~[clickhouse-jdbc-0.3.2-patch5-http.jar:clickhouse-jdbc 0.3.2-patch5 (revision: 3d921d4)]\r\n\tat com.clickhouse.jdbc.internal.SqlBasedPreparedStatement.setObject(SqlBasedPreparedStatement.java:379) ~[clickhouse-jdbc-0.3.2-patch5-http.jar:clickhouse-jdbc 0.3.2-patch5 (revision: 3d921d4)]\r\n\tat org.springframework.jdbc.core.StatementCreatorUtils.setValue(StatementCreatorUtils.java:409) ~[spring-jdbc-5.3.16.jar:5.3.16]\r\n\tat org.springframework.jdbc.core.StatementCreatorUtils.setParameterValueInternal(StatementCreatorUtils.java:231) ~[spring-jdbc-5.3.16.jar:5.3.16]\r\n\tat org.springframework.jdbc.core.StatementCreatorUtils.setParameterValue(StatementCreatorUtils.java:146) ~[spring-jdbc-5.3.16.jar:5.3.16]\r\n\tat org.springframework.jdbc.core.PreparedStatementCreatorFactory$PreparedStatementCreatorImpl.setValues(PreparedStatementCreatorFactory.java:278) ~[spring-jdbc-5.3.16.jar:5.3.16]\r\n\tat org.springframework.jdbc.core.PreparedStatementCreatorFactory$PreparedStatementCreatorImpl.createPreparedStatement(PreparedStatementCreatorFactory.java:241) ~[spring-jdbc-5.3.16.jar:5.3.16]\r\n\tat org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:649) ~[spring-jdbc-5.3.16.jar:5.3.16]\r\n\t... 15 common frames omitted\r\n```\r\n\r\nThe query that is created is \r\n```sql\r\nSELECT *\r\n  FROM parcel p\r\n  WHERE p.parcel_id IN (?, ?)\r\n```\r\nThe ids are never added into the query. I am not sure what I am missing. I use this exact pattern all the time with a PostgreSQL db and an Oracle db, but when I am using the ClickHouse Driver it does not work.\r\n\r\nWhat am I missing?","title":"Why are namedJdbcTemplate not working with clickhouse-jdbc?","body":"<p>I am new to ClickHouse. I am running version 27.2.2.1.</p>\n<p>I have a Java/Kotlin project. I am using <code>clickhouse-jdbc</code>, version <code>0.3.2-patch5</code> to connect to the database.</p>\n<p>Here is how I am connecting to the database</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>@Bean(name = [&quot;clickhouseDS&quot;])\nfun clickhouseDataSource(): DataSource {\n    val dataSource = SimpleDriverDataSource()\n    dataSource.setDriverClass(ClickHouseDriver::class.java)\n    dataSource.url = jdbcUrl\n    dataSource.username = dbUsername\n    dataSource.password = dbPassword\n    val properties = Properties()\n    properties.setProperty(&quot;namedParameter&quot;, &quot;true&quot;)\n    dataSource.connectionProperties = properties\n    logger.info(&quot;postgresDS: $jdbcUrl | $dbUsername&quot;)\n    return dataSource\n}\n</code></pre>\n<p>I can verify that I am connected to the db and can make queries if I hard code the parameters. Here is an example which works:</p>\n<pre class=\"lang-sql prettyprint-override\"><code>SELECT *\n   FROM parcel p\n   WHERE p.parcel_id IN ('c41f29ad-885a-4199-b1b3-475ee0d5913e', 'e5682ace-61af-489e-8000-1c7577a58a0f')\n</code></pre>\n<p>I am using</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>namedParameterJdbcTemplate.query(sql.sql, sql.params) { rs: ResultSet, _: Int -&gt; createEntity(rs) }\n</code></pre>\n<p>If I try to create a parameterized version of the same query</p>\n<pre class=\"lang-sql prettyprint-override\"><code>SELECT *\n  FROM parcel p\n  WHERE p.parcel_id IN (:parcelIds)\n</code></pre>\n<p>And then call the query the same way, I get this error</p>\n<pre class=\"lang-none prettyprint-override\"><code>org.springframework.jdbc.UncategorizedSQLException: PreparedStatementCallback; uncategorized SQLException for SQL [\n            SELECT *\n            FROM parcel p\n         WHERE p.parcel_id IN (?, ?) ]; SQL state [HY000]; error code [0]; Parameter index must between 1 and 0 but we got 1; nested exception is java.sql.SQLException: Parameter index must between 1 and 0 but we got 1\n    at org.springframework.jdbc.core.JdbcTemplate.translateException(JdbcTemplate.java:1542) ~[spring-jdbc-5.3.16.jar:5.3.16]\n    at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:667) ~[spring-jdbc-5.3.16.jar:5.3.16]\n    at org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:713) ~[spring-jdbc-5.3.16.jar:5.3.16]\n    at org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:738) ~[spring-jdbc-5.3.16.jar:5.3.16]\n    at org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:794) ~[spring-jdbc-5.3.16.jar:5.3.16]\n    at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.query(NamedParameterJdbcTemplate.java:209) ~[spring-jdbc-5.3.16.jar:5.3.16]\n    at com.aeonai.parcel.repository.ParcelRepository.findAllByIds(ParcelRepository.kt:30) ~[classes/:na]\n    at com.aeonai.parcel.grpcservice.ParcelGrpcService.loadParcelGeometry(ParcelGrpcService.kt:38) ~[classes/:na]\n    at com.aeonai.parcel.proto.ParcelServiceGrpc$MethodHandlers.invoke(ParcelServiceGrpc.java:347) ~[classes/:na]\n    at io.grpc.stub.ServerCalls$UnaryServerCallHandler$UnaryServerCallListener.onHalfClose(ServerCalls.java:182) ~[grpc-stub-1.44.0.jar:1.44.0]\n    at io.grpc.internal.ServerCallImpl$ServerStreamListenerImpl.halfClosed(ServerCallImpl.java:340) ~[grpc-core-1.43.2.jar:1.43.2]\n    at io.grpc.internal.ServerImpl$JumpToApplicationThreadServerStreamListener$1HalfClosed.runInContext(ServerImpl.java:866) ~[grpc-core-1.43.2.jar:1.43.2]\n    at io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37) ~[grpc-core-1.43.2.jar:1.43.2]\n    at io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133) ~[grpc-core-1.43.2.jar:1.43.2]\n    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130) ~[na:na]\n    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:630) ~[na:na]\n    at java.base/java.lang.Thread.run(Thread.java:832) ~[na:na]\nCaused by: java.sql.SQLException: Parameter index must between 1 and 0 but we got 1\n    at com.clickhouse.jdbc.SqlExceptionUtils.clientError(SqlExceptionUtils.java:43) ~[clickhouse-jdbc-0.3.2-patch5-http.jar:clickhouse-jdbc 0.3.2-patch5 (revision: 3d921d4)]\n    at com.clickhouse.jdbc.internal.SqlBasedPreparedStatement.toArrayIndex(SqlBasedPreparedStatement.java:214) ~[clickhouse-jdbc-0.3.2-patch5-http.jar:clickhouse-jdbc 0.3.2-patch5 (revision: 3d921d4)]\n    at com.clickhouse.jdbc.internal.SqlBasedPreparedStatement.setObject(SqlBasedPreparedStatement.java:379) ~[clickhouse-jdbc-0.3.2-patch5-http.jar:clickhouse-jdbc 0.3.2-patch5 (revision: 3d921d4)]\n    at org.springframework.jdbc.core.StatementCreatorUtils.setValue(StatementCreatorUtils.java:409) ~[spring-jdbc-5.3.16.jar:5.3.16]\n    at org.springframework.jdbc.core.StatementCreatorUtils.setParameterValueInternal(StatementCreatorUtils.java:231) ~[spring-jdbc-5.3.16.jar:5.3.16]\n    at org.springframework.jdbc.core.StatementCreatorUtils.setParameterValue(StatementCreatorUtils.java:146) ~[spring-jdbc-5.3.16.jar:5.3.16]\n    at org.springframework.jdbc.core.PreparedStatementCreatorFactory$PreparedStatementCreatorImpl.setValues(PreparedStatementCreatorFactory.java:278) ~[spring-jdbc-5.3.16.jar:5.3.16]\n    at org.springframework.jdbc.core.PreparedStatementCreatorFactory$PreparedStatementCreatorImpl.createPreparedStatement(PreparedStatementCreatorFactory.java:241) ~[spring-jdbc-5.3.16.jar:5.3.16]\n    at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:649) ~[spring-jdbc-5.3.16.jar:5.3.16]\n    ... 15 common frames omitted\n</code></pre>\n<p>The query that is created is</p>\n<pre class=\"lang-sql prettyprint-override\"><code>SELECT *\n  FROM parcel p\n  WHERE p.parcel_id IN (?, ?)\n</code></pre>\n<p>The ids are never added into the query. I am not sure what I am missing. I use this exact pattern all the time with a PostgreSQL db and an Oracle db, but when I am using the ClickHouse Driver it does not work.</p>\n<p>What am I missing?</p>\n"},{"tags":["java","java-8","hashmap","java-stream"],"comments":[{"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"score":1,"creation_date":1646152120,"post_id":71311568,"comment_id":126050465,"body_markdown":"`fistMap.get(secondMap.get(&quot;key1&quot;))` will return `&quot;hello&quot;` - is that what you wanted to achieve?","body":"<code>fistMap.get(secondMap.get(&quot;key1&quot;))</code> will return <code>&quot;hello&quot;</code> - is that what you wanted to achieve?"}],"answers":[{"tags":[],"owner":{"account_id":3352721,"reputation":1057,"user_id":2816429,"display_name":"HariHaravelan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1646152385,"creation_date":1646152385,"answer_id":71311721,"question_id":71311568,"body_markdown":"The below code should work, for what you are trying to do\r\n\r\n     public static void main(final String[] args) throws Exception {\r\n        HashMap&lt;String, String&gt; keyToValue = new HashMap&lt;String, String&gt;() {{\r\n            put(&quot;a&quot;, &quot;hello&quot;);\r\n            put(&quot;b&quot;, &quot;bye&quot;);\r\n            put(&quot;c&quot;, &quot;good morning&quot;);\r\n        }};\r\n        HashMap&lt;String, String&gt; keyToSecondaryKey = new HashMap&lt;String, String&gt;() {{\r\n            put(&quot;key1&quot;, &quot;a&quot;);\r\n            put(&quot;key2&quot;, &quot;b&quot;);\r\n            put(&quot;key3&quot;, &quot;c&quot;);\r\n        }};\r\n\r\n        keyToSecondaryKey.entrySet().forEach(e-&gt; {\r\n            e.setValue(keyToValue.get(e.getValue()));\r\n        });\r\n\r\n        System.out.println(keyToSecondaryKey);\r\n    }","title":"How to map Key Value pair from one map onto another","body":"<p>The below code should work, for what you are trying to do</p>\n<pre><code> public static void main(final String[] args) throws Exception {\n    HashMap&lt;String, String&gt; keyToValue = new HashMap&lt;String, String&gt;() {{\n        put(&quot;a&quot;, &quot;hello&quot;);\n        put(&quot;b&quot;, &quot;bye&quot;);\n        put(&quot;c&quot;, &quot;good morning&quot;);\n    }};\n    HashMap&lt;String, String&gt; keyToSecondaryKey = new HashMap&lt;String, String&gt;() {{\n        put(&quot;key1&quot;, &quot;a&quot;);\n        put(&quot;key2&quot;, &quot;b&quot;);\n        put(&quot;key3&quot;, &quot;c&quot;);\n    }};\n\n    keyToSecondaryKey.entrySet().forEach(e-&gt; {\n        e.setValue(keyToValue.get(e.getValue()));\n    });\n\n    System.out.println(keyToSecondaryKey);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2975918,"reputation":755,"user_id":2526969,"display_name":"frascu"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1646152493,"creation_date":1646152493,"answer_id":71311742,"question_id":71311568,"body_markdown":"In this way:\r\n\r\n```java\r\nMap&lt;String, String&gt; map1 = new HashMap&lt;&gt;();\r\nmap1.put(&quot;a&quot;, &quot;hello&quot;);\r\nmap1.put(&quot;b&quot;, &quot;bye&quot;);\r\nmap1.put(&quot;c&quot;, &quot;good morning&quot;);\r\n\r\nMap&lt;String, String&gt; map2 = new HashMap&lt;&gt;();\r\nmap2.put(&quot;key1&quot;, &quot;a&quot;);\r\nmap2.put(&quot;key2&quot;, &quot;b&quot;);\r\nmap2.put(&quot;key3&quot;, &quot;c&quot;);\r\n\r\nmap2.forEach((key2, value2) -&gt; map2.put(key2, map1.get(value2)));\r\n```","title":"How to map Key Value pair from one map onto another","body":"<p>In this way:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Map&lt;String, String&gt; map1 = new HashMap&lt;&gt;();\nmap1.put(&quot;a&quot;, &quot;hello&quot;);\nmap1.put(&quot;b&quot;, &quot;bye&quot;);\nmap1.put(&quot;c&quot;, &quot;good morning&quot;);\n\nMap&lt;String, String&gt; map2 = new HashMap&lt;&gt;();\nmap2.put(&quot;key1&quot;, &quot;a&quot;);\nmap2.put(&quot;key2&quot;, &quot;b&quot;);\nmap2.put(&quot;key3&quot;, &quot;c&quot;);\n\nmap2.forEach((key2, value2) -&gt; map2.put(key2, map1.get(value2)));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1646237899,"creation_date":1646152881,"answer_id":71311833,"question_id":71311568,"body_markdown":"Apparently you want a third map made of keys from the second map, and matching values from the first map.\r\n\r\n```java\r\nMap&lt; String , String &gt; thirdMap = new HashMap&lt;&gt;() ;\r\nfor ( Map.Entry&lt; String , String &gt; entry : secondMap.entrySet() ) {\r\n    thirdMap.put(\r\n        entry.getKey() ,                  // Second maps key.\r\n        firstMap.get( entry.getValue() )  // First maps value.\r\n    );\r\n}\r\n```","title":"How to map Key Value pair from one map onto another","body":"<p>Apparently you want a third map made of keys from the second map, and matching values from the first map.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Map&lt; String , String &gt; thirdMap = new HashMap&lt;&gt;() ;\nfor ( Map.Entry&lt; String , String &gt; entry : secondMap.entrySet() ) {\n    thirdMap.put(\n        entry.getKey() ,                  // Second maps key.\n        firstMap.get( entry.getValue() )  // First maps value.\n    );\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1646158024,"creation_date":1646154076,"answer_id":71312075,"question_id":71311568,"body_markdown":"This may work for you.  Note that this creates a third map.\r\n```\r\nMap&lt;String, String&gt; map1 =\r\n\t\tMap.of(&quot;a&quot;, &quot;hello&quot;, &quot;b&quot;, &quot;bye&quot;, &quot;c&quot;, &quot;good morning&quot;);\r\n\r\nMap&lt;String, String&gt; map2 =\r\n\t\tMap.of(&quot;key1&quot;, &quot;a&quot;, &quot;key2&quot;, &quot;b&quot;, &quot;key3&quot;, &quot;c&quot;);\r\n```\r\n- Stream the entry set of `map2`\r\n- Use that `entry&#39;s key` as the key to the result map\r\n- use that  `entry&#39;s value` as the key to retrieve the value of `map1`\r\n```\r\nMap&lt;String, String&gt; result = map2.entrySet().stream()\r\n\t\t.collect(Collectors.toMap(Entry::getKey,\r\n\t\t\t\te-&gt;map1.get(e.getValue())));\r\n\t\t\r\nresult.entrySet().forEach(System.out::println);\t\t\r\n```\r\nprints\r\n```\r\nkey1=hello\r\nkey2=bye\r\nkey3=good morning","title":"How to map Key Value pair from one map onto another","body":"<p>This may work for you.  Note that this creates a third map.</p>\n<pre><code>Map&lt;String, String&gt; map1 =\n        Map.of(&quot;a&quot;, &quot;hello&quot;, &quot;b&quot;, &quot;bye&quot;, &quot;c&quot;, &quot;good morning&quot;);\n\nMap&lt;String, String&gt; map2 =\n        Map.of(&quot;key1&quot;, &quot;a&quot;, &quot;key2&quot;, &quot;b&quot;, &quot;key3&quot;, &quot;c&quot;);\n</code></pre>\n<ul>\n<li>Stream the entry set of <code>map2</code></li>\n<li>Use that <code>entry's key</code> as the key to the result map</li>\n<li>use that  <code>entry's value</code> as the key to retrieve the value of <code>map1</code></li>\n</ul>\n<pre><code>Map&lt;String, String&gt; result = map2.entrySet().stream()\n        .collect(Collectors.toMap(Entry::getKey,\n                e-&gt;map1.get(e.getValue())));\n        \nresult.entrySet().forEach(System.out::println);     \n</code></pre>\n<p>prints</p>\n<pre><code>key1=hello\nkey2=bye\nkey3=good morning\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646155293,"creation_date":1646155293,"answer_id":71312339,"question_id":71311568,"body_markdown":"As I&#39;ve mentioned in the comment the statement below will print `&quot;hello&quot;`. And there&#39;s no need to do create a **third map** if you want to access the content of these two maps right in the same code.\r\n\r\n    System.out.println(fistMap.get(secondMap.get(&quot;key1&quot;))); \r\n\r\nWith the following code, you can iterate print the **keys** of the second map and the **values** of the first map (with the assumption that *all* values of the second map are present in the first map as keys).\r\n\r\n    fistMap.forEach((k, v) -&gt; System.out.println(k + &quot; -&gt; &quot; + secondMap.get(v)));\r\n\r\nAnd only if you need to pass the data from these two maps to another part of your application it might make sense to create the third combined map. It could be done with the **Stream IPA** like that:\r\n\r\n    Map&lt;String, String&gt; combinedMap = \r\n           secondMap.keySet().stream()\r\n                .collect(Collectors.toMap(Function.identity(), // key of the new map\r\n                                          k -&gt; fistMap.get(secondMap.get(k)))); // value of the new map","title":"How to map Key Value pair from one map onto another","body":"<p>As I've mentioned in the comment the statement below will print <code>&quot;hello&quot;</code>. And there's no need to do create a <strong>third map</strong> if you want to access the content of these two maps right in the same code.</p>\n<pre><code>System.out.println(fistMap.get(secondMap.get(&quot;key1&quot;))); \n</code></pre>\n<p>With the following code, you can iterate print the <strong>keys</strong> of the second map and the <strong>values</strong> of the first map (with the assumption that <em>all</em> values of the second map are present in the first map as keys).</p>\n<pre><code>fistMap.forEach((k, v) -&gt; System.out.println(k + &quot; -&gt; &quot; + secondMap.get(v)));\n</code></pre>\n<p>And only if you need to pass the data from these two maps to another part of your application it might make sense to create the third combined map. It could be done with the <strong>Stream IPA</strong> like that:</p>\n<pre><code>Map&lt;String, String&gt; combinedMap = \n       secondMap.keySet().stream()\n            .collect(Collectors.toMap(Function.identity(), // key of the new map\n                                      k -&gt; fistMap.get(secondMap.get(k)))); // value of the new map\n</code></pre>\n"}],"owner":{"account_id":5864273,"reputation":61,"user_id":4618856,"display_name":"SEED"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2848,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":71311833,"answer_count":5,"score":1,"last_activity_date":1646237899,"creation_date":1646151644,"question_id":71311568,"body_markdown":"If I have a map with the following data:\r\n\r\n    &quot;a&quot;, &quot;hello&quot;\r\n    &quot;b&quot;, &quot;bye&quot;\r\n    &quot;c&quot;, &quot;good morning&quot;\r\n\r\nand a second map with the following data:\r\n\r\n    &quot;key1&quot;,&quot;a&quot;\r\n    &quot;key2&quot;, &quot;b&quot;\r\n    &quot;key3&quot;, &quot;c&quot;\r\n\r\nis it then possible to perform an operation such that I can map the value of my second map onto the key as my first map? Which would result in the final map looking like this:\r\n\r\n    &quot;key1&quot;,&quot;hello&quot;\r\n    &quot;key2&quot;, &quot;bye&quot;\r\n    &quot;key3&quot;, &quot;good morning&quot;\r\n        \r\n\r\n","title":"How to map Key Value pair from one map onto another","body":"<p>If I have a map with the following data:</p>\n<pre><code>&quot;a&quot;, &quot;hello&quot;\n&quot;b&quot;, &quot;bye&quot;\n&quot;c&quot;, &quot;good morning&quot;\n</code></pre>\n<p>and a second map with the following data:</p>\n<pre><code>&quot;key1&quot;,&quot;a&quot;\n&quot;key2&quot;, &quot;b&quot;\n&quot;key3&quot;, &quot;c&quot;\n</code></pre>\n<p>is it then possible to perform an operation such that I can map the value of my second map onto the key as my first map? Which would result in the final map looking like this:</p>\n<pre><code>&quot;key1&quot;,&quot;hello&quot;\n&quot;key2&quot;, &quot;bye&quot;\n&quot;key3&quot;, &quot;good morning&quot;\n    \n</code></pre>\n"},{"tags":["java","gradle","building","jline"],"answers":[{"tags":[],"owner":{"account_id":1227667,"reputation":116,"user_id":1192929,"display_name":"quotidian-ennui"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646237892,"creation_date":1646237307,"answer_id":71325791,"question_id":71316527,"body_markdown":"It&#39;s basically because your classpath doesn&#39;t include &quot;jline&quot; and the other stuffs required by your application.\r\n\r\n- Just use the application plugin and let that do the right thing (this is the right answer...)\r\n\r\nBut if it&#39;s a utility thing that you&#39;re doing...\r\n\r\n- Create a task that does the right thing and just run it via gradle (since you have no arguments)\r\n```\r\ndef asFileUrl(filepath) {\r\n  return &quot;file:///&quot; + new java.net.URI(null, filepath, null).toASCIIString();\r\n}\r\n\r\n\r\ntask LauncherJar(type: Jar) {\r\n    appendix = &quot;launcher&quot;\r\n    ext.launcherClasspath = { -&gt;\r\n      def verifyLibs = [\r\n              configurations.runtimeClasspath.collect { asFileUrl(it.getCanonicalPath()) }.join(&#39; &#39;),\r\n              asFileUrl(jar.archivePath.getCanonicalPath())\r\n              ]\r\n      return verifyLibs.join(&#39; &#39;)\r\n    }\r\n    manifest {\r\n        attributes (&quot;Class-Path&quot;: launcherClasspath())\r\n    }\r\n}\r\n\r\ntask execMyJar(type: JavaExec, dependsOn: [jar, LauncherJar]) {\r\n    group = &#39;Execution&#39;\r\n    description = &#39;Do The thing that needs doing&#39;\r\n    classpath = files(LauncherJar.archivePath)\r\n    mainClass = &#39;me.tl0x.Main&#39;\r\n}\r\n\r\n```\r\n\r\nThen you can just do `gradle execMyJar`.\r\n\r\nNote that here, I&#39;m creating a launcher jar with the `Class-Path` element in the Manifest file. The reason for that is to avoid the situation (Windows only?) where your command line is too long... It might not matter in your case since you haven&#39;t got that many dependencies listed (but I don&#39;t know about transitive dependencies).","title":"Running jar results in ClassNotFoundException (Gradle)","body":"<p>It's basically because your classpath doesn't include &quot;jline&quot; and the other stuffs required by your application.</p>\n<ul>\n<li>Just use the application plugin and let that do the right thing (this is the right answer...)</li>\n</ul>\n<p>But if it's a utility thing that you're doing...</p>\n<ul>\n<li>Create a task that does the right thing and just run it via gradle (since you have no arguments)</li>\n</ul>\n<pre><code>def asFileUrl(filepath) {\n  return &quot;file:///&quot; + new java.net.URI(null, filepath, null).toASCIIString();\n}\n\n\ntask LauncherJar(type: Jar) {\n    appendix = &quot;launcher&quot;\n    ext.launcherClasspath = { -&gt;\n      def verifyLibs = [\n              configurations.runtimeClasspath.collect { asFileUrl(it.getCanonicalPath()) }.join(' '),\n              asFileUrl(jar.archivePath.getCanonicalPath())\n              ]\n      return verifyLibs.join(' ')\n    }\n    manifest {\n        attributes (&quot;Class-Path&quot;: launcherClasspath())\n    }\n}\n\ntask execMyJar(type: JavaExec, dependsOn: [jar, LauncherJar]) {\n    group = 'Execution'\n    description = 'Do The thing that needs doing'\n    classpath = files(LauncherJar.archivePath)\n    mainClass = 'me.tl0x.Main'\n}\n\n</code></pre>\n<p>Then you can just do <code>gradle execMyJar</code>.</p>\n<p>Note that here, I'm creating a launcher jar with the <code>Class-Path</code> element in the Manifest file. The reason for that is to avoid the situation (Windows only?) where your command line is too long... It might not matter in your case since you haven't got that many dependencies listed (but I don't know about transitive dependencies).</p>\n"}],"owner":{"account_id":24331004,"reputation":34,"user_id":18269851,"display_name":"seriouslyForWhat"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":466,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1646237892,"creation_date":1646185268,"question_id":71316527,"body_markdown":"So I&#39;m relatively inexperienced on how gradle works, and I need some help getting my jar working. My application generates some files through the terminal. However, when I try to run the jar, it gives me an error.\r\n\r\n\r\n\r\n# build.gradle: \r\n\r\n```\r\n\r\nplugins {\r\n    id &#39;java&#39;\r\n}\r\n\r\ngroup &#39;me.tl0x&#39;\r\nversion &#39;1.0&#39;\r\n\r\nrepositories {\r\n    mavenCentral()\r\n}\r\n\r\njar {\r\n    manifest {\r\n        attributes (\r\n                &#39;Main-Class&#39;: &#39;me.tl0x.Main&#39;\r\n        )\r\n    }\r\n}\r\n\r\ndependencies {\r\n    testImplementation &#39;org.junit.jupiter:junit-jupiter-api:5.8.1&#39;\r\n    testRuntimeOnly &#39;org.junit.jupiter:junit-jupiter-engine:5.8.1&#39;\r\n\r\n    implementation &#39;org.freemarker:freemarker:2.3.29&#39;\r\n    implementation &#39;com.google.code.gson:gson:2.8.6&#39;\r\n    implementation &#39;org.jline:jline:3.21.0&#39;\r\n    implementation &#39;org.fusesource.jansi:jansi:2.4.0&#39;\r\n\r\n}\r\n\r\ntest {\r\n    useJUnitPlatform()\r\n}\r\n\r\n```\r\n\r\n\r\n# Error Message: \r\n\r\n```\r\nPS C:\\Path&gt; java -jar ./build/libs/FabricModGenerator-1.0.jar\r\nException in thread &quot;main&quot; java.lang.NoClassDefFoundError: org/jline/terminal/TerminalBuilder\r\n        at me.tl0x.terminal.Interface.&lt;init&gt;(Interface.java:29)\r\n        at me.tl0x.Main.main(Main.java:48)\r\nCaused by: java.lang.ClassNotFoundException: org.jline.terminal.TerminalBuilder\r\n        at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:636)\r\n        at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:182)\r\n        at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:519)\r\n        ... 2 more\r\n```\r\n\r\nAny help would be greatly appreciated.","title":"Running jar results in ClassNotFoundException (Gradle)","body":"<p>So I'm relatively inexperienced on how gradle works, and I need some help getting my jar working. My application generates some files through the terminal. However, when I try to run the jar, it gives me an error.</p>\n<h1>build.gradle:</h1>\n<pre><code>\nplugins {\n    id 'java'\n}\n\ngroup 'me.tl0x'\nversion '1.0'\n\nrepositories {\n    mavenCentral()\n}\n\njar {\n    manifest {\n        attributes (\n                'Main-Class': 'me.tl0x.Main'\n        )\n    }\n}\n\ndependencies {\n    testImplementation 'org.junit.jupiter:junit-jupiter-api:5.8.1'\n    testRuntimeOnly 'org.junit.jupiter:junit-jupiter-engine:5.8.1'\n\n    implementation 'org.freemarker:freemarker:2.3.29'\n    implementation 'com.google.code.gson:gson:2.8.6'\n    implementation 'org.jline:jline:3.21.0'\n    implementation 'org.fusesource.jansi:jansi:2.4.0'\n\n}\n\ntest {\n    useJUnitPlatform()\n}\n\n</code></pre>\n<h1>Error Message:</h1>\n<pre><code>PS C:\\Path&gt; java -jar ./build/libs/FabricModGenerator-1.0.jar\nException in thread &quot;main&quot; java.lang.NoClassDefFoundError: org/jline/terminal/TerminalBuilder\n        at me.tl0x.terminal.Interface.&lt;init&gt;(Interface.java:29)\n        at me.tl0x.Main.main(Main.java:48)\nCaused by: java.lang.ClassNotFoundException: org.jline.terminal.TerminalBuilder\n        at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:636)\n        at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:182)\n        at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:519)\n        ... 2 more\n</code></pre>\n<p>Any help would be greatly appreciated.</p>\n"},{"tags":["java","spring","hibernate-validator","spring-validator"],"answers":[{"tags":[],"owner":{"account_id":2706275,"reputation":41,"user_id":2335819,"display_name":"Romain R"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1367408918,"creation_date":1367408918,"answer_id":16317582,"question_id":16317207,"body_markdown":"For sure you can use Bean Validation inside your controller, just add an annotation on the property like you did in your model.\r\nBut the best way would be use a Date type in your model instead of string.","title":"Spring Validation Between Two Date Fields?","body":"<p>For sure you can use Bean Validation inside your controller, just add an annotation on the property like you did in your model.\nBut the best way would be use a Date type in your model instead of string.</p>\n"},{"tags":[],"owner":{"account_id":2590947,"reputation":1058,"user_id":2245668,"display_name":"kevin847"},"down_vote_count":0,"up_vote_count":14,"is_accepted":true,"score":14,"last_activity_date":1367448160,"creation_date":1367448160,"answer_id":16327652,"question_id":16317207,"body_markdown":"If you want to validate that fromDate is before toDate, you can write a custom validator to perform this multi-field validation. You write a custom validator, and you also define a custom annotation which is placed on the bean being validated.\r\n\r\n See the following answers for more information.\r\n\r\n+ https://stackoverflow.com/questions/1972933/cross-field-validation-with-hibernate-validator-jsr-303\r\n+ https://stackoverflow.com/questions/1700295/java-bean-validation-jsr303-constraints-involving-relationship-between-several","title":"Spring Validation Between Two Date Fields?","body":"<p>If you want to validate that fromDate is before toDate, you can write a custom validator to perform this multi-field validation. You write a custom validator, and you also define a custom annotation which is placed on the bean being validated.</p>\n\n<p>See the following answers for more information.</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/1972933/cross-field-validation-with-hibernate-validator-jsr-303\">Cross field validation with Hibernate Validator (JSR 303)</a></li>\n<li><a href=\"https://stackoverflow.com/questions/1700295/java-bean-validation-jsr303-constraints-involving-relationship-between-several\">Java Bean Validation (JSR303) constraints involving relationship between several bean properties</a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":11825858,"reputation":1015,"user_id":8653765,"display_name":"M. Dudek"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1622644328,"creation_date":1622644328,"answer_id":67807163,"question_id":16317207,"body_markdown":"Based on the number of times the question is displayed, I conclude that a lot of people still end up here looking for a validator for a date range.\r\n\r\nSuppose we have a DTO containing another DTO (or class with `@Embeddable` annotation) with two fields with `LocalDate` (or other date representation, it&#39;s only example).\r\n\r\n```java\r\nclass MyDto {\r\n\r\n    @ValidDateRange // &lt;-- target annotation\r\n    private DateRange dateRange;\r\n    \r\n    // getters, setters, etc.\r\n}\r\n```\r\n\r\n```java\r\nclass DateRange {\r\n\r\n    private LocalDate startOfRange;\r\n    private LocalDate endOfRange;\r\n\r\n    // getters, setters, etc.\r\n}\r\n```\r\n\r\nNow, we can declare our own `@ValidDateRange` annotation:\r\n\r\n```java\r\n@Documented\r\n@Constraint(validatedBy = DateRangeValidator.class)\r\n@Target({ElementType.FIELD})\r\n@Retention(RetentionPolicy.RUNTIME)\r\n@interface ValidDateRange {\r\n\r\n    String message() default &quot;Start date must be before end date&quot;;\r\n\r\n    Class&lt;?&gt;[] groups() default { };\r\n\r\n    Class&lt;? extends Payload&gt;[] payload() default { };\r\n}\r\n```\r\n\r\nWriting the validator itself also comes down to a few lines of code:\r\n\r\n```java\r\nclass DateRangeValidator implements ConstraintValidator&lt;ValidDateRange, DateRange&gt; {\r\n    @Override\r\n    public boolean isValid(DateRange value, ConstraintValidatorContext context) {\r\n        return value.getStartOfRange().isBefore(value.getEndOfRange());\r\n    }\r\n}\r\n```","title":"Spring Validation Between Two Date Fields?","body":"<p>Based on the number of times the question is displayed, I conclude that a lot of people still end up here looking for a validator for a date range.</p>\n<p>Suppose we have a DTO containing another DTO (or class with <code>@Embeddable</code> annotation) with two fields with <code>LocalDate</code> (or other date representation, it's only example).</p>\n<pre class=\"lang-java prettyprint-override\"><code>class MyDto {\n\n    @ValidDateRange // &lt;-- target annotation\n    private DateRange dateRange;\n    \n    // getters, setters, etc.\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>class DateRange {\n\n    private LocalDate startOfRange;\n    private LocalDate endOfRange;\n\n    // getters, setters, etc.\n}\n</code></pre>\n<p>Now, we can declare our own <code>@ValidDateRange</code> annotation:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Documented\n@Constraint(validatedBy = DateRangeValidator.class)\n@Target({ElementType.FIELD})\n@Retention(RetentionPolicy.RUNTIME)\n@interface ValidDateRange {\n\n    String message() default &quot;Start date must be before end date&quot;;\n\n    Class&lt;?&gt;[] groups() default { };\n\n    Class&lt;? extends Payload&gt;[] payload() default { };\n}\n</code></pre>\n<p>Writing the validator itself also comes down to a few lines of code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class DateRangeValidator implements ConstraintValidator&lt;ValidDateRange, DateRange&gt; {\n    @Override\n    public boolean isValid(DateRange value, ConstraintValidatorContext context) {\n        return value.getStartOfRange().isBefore(value.getEndOfRange());\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":1761756,"reputation":1871,"user_id":1608679,"accept_rate":96,"display_name":"Java Developer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":33926,"favorite_count":0,"down_vote_count":1,"up_vote_count":7,"accepted_answer_id":16327652,"answer_count":3,"score":6,"last_activity_date":1646237817,"creation_date":1367407338,"question_id":16317207,"body_markdown":"In my Spring Application, i&#39;m Using `Hibernate Validator` for Validation Purpose.\r\n\r\nWhen i&#39;m doing simple Validation like `@NotEmpty`, `@Email` .. i&#39;m easily working \r\n\r\nBut When coming to Date field, giving Problem...\r\n\r\nProblem is in my Jsp page i&#39;m getting values type as String then i&#39;m convert String to Date..\r\n\r\nHear is my Example...\r\n\r\n    @NotEmpty(message = &quot;Write Some Description&quot;)\r\n\tprivate String description;\r\n        \r\n\tprivate String fromDateMonth;\r\n\r\n\tprivate String fromDateYear;\r\n    \r\n    private String toDateMonth;\r\n\r\n\tprivate String toDateYear;\r\n\r\ni&#39;m converting this `fromDateMonth` and `fromDateYear` into Date in this my Controller class.\r\n\r\nSo is their any Possibility to add Validator Annotation in Controller class?\r\n\r\nOther wise what should i&#39;m do hear? give me suggestions...\r\n","title":"Spring Validation Between Two Date Fields?","body":"<p>In my Spring Application, i'm Using <code>Hibernate Validator</code> for Validation Purpose.</p>\n\n<p>When i'm doing simple Validation like <code>@NotEmpty</code>, <code>@Email</code> .. i'm easily working </p>\n\n<p>But When coming to Date field, giving Problem...</p>\n\n<p>Problem is in my Jsp page i'm getting values type as String then i'm convert String to Date..</p>\n\n<p>Hear is my Example...</p>\n\n<pre><code>@NotEmpty(message = \"Write Some Description\")\nprivate String description;\n\nprivate String fromDateMonth;\n\nprivate String fromDateYear;\n\nprivate String toDateMonth;\n\nprivate String toDateYear;\n</code></pre>\n\n<p>i'm converting this <code>fromDateMonth</code> and <code>fromDateYear</code> into Date in this my Controller class.</p>\n\n<p>So is their any Possibility to add Validator Annotation in Controller class?</p>\n\n<p>Other wise what should i'm do hear? give me suggestions...</p>\n"},{"tags":["java","selenium"],"comments":[{"owner":{"account_id":104911,"reputation":119202,"user_id":280244,"accept_rate":81,"display_name":"Ralph"},"score":0,"creation_date":1296043752,"post_id":4804335,"comment_id":5324594,"body_markdown":"What do you mean by &quot;capture and webpage&quot;, you could only capture HTTP requests, and so on, but not a webpage.","body":"What do you mean by &quot;capture and webpage&quot;, you could only capture HTTP requests, and so on, but not a webpage."},{"owner":{"account_id":700480,"reputation":81,"user_id":590548,"display_name":"rathna"},"score":0,"creation_date":1296044146,"post_id":4804335,"comment_id":5324664,"body_markdown":"i mean the screen short using selenium","body":"i mean the screen short using selenium"}],"answers":[{"tags":[],"owner":{"account_id":236137,"reputation":523,"user_id":503424,"display_name":"Freek Kalter"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1296045730,"creation_date":1296045730,"answer_id":4804689,"question_id":4804335,"body_markdown":"I think this is what you are looking for. But try to be mores specific if it is not.\r\n\r\n&gt; captureEntirePageScreenshot (\r\n&gt; filename,kwargs )\r\n&gt;     Saves the entire contents of the current window canvas to a PNG file.\r\n&gt; Contrast this with the\r\n&gt; captureScreenshot command, which\r\n&gt; captures the contents of the OS\r\n&gt; viewport (i.e. whatever is currently\r\n&gt; being displayed on the monitor), and\r\n&gt; is implemented in the RC only.\r\n&gt; Currently this only works in Firefox\r\n&gt; when running in chrome mode, and in IE\r\n&gt; non-HTA using the EXPERIMENTAL\r\n&gt; &quot;Snapsie&quot; utility. The Firefox\r\n&gt; implementation is mostly borrowed from\r\n&gt; the Screengrab! Firefox extension.\r\n&gt; Please see http://www.screengrab.org\r\n&gt; and http://snapsie.sourceforge.net/\r\n&gt; for details.\r\n&gt; \r\n&gt;     Arguments:\r\n&gt; \r\n&gt;         * filename - the path to the file to persist the screenshot as. No\r\n&gt; filename extension will be appended by\r\n&gt; default. Directories will not be\r\n&gt; created if they do not exist, and an\r\n&gt; exception will be thrown, possibly by\r\n&gt; native code.\r\n&gt;         * kwargs - a kwargs string that modifies the way the screenshot\r\n&gt; is captured. Example:\r\n&gt; &quot;background=#CCFFDD&quot; . Currently valid\r\n&gt; options:\r\n&gt; \r\n&gt;           background\r\n&gt;               the background CSS for the HTML document. This may be useful\r\n&gt; to set for capturing screenshots of\r\n&gt; less-than-ideal layouts, for example\r\n&gt; where absolute positioning causes the\r\n&gt; calculation of the canvas dimension to\r\n&gt; fail and a black background is exposed\r\n&gt; (possibly obscuring black text).\r\n\r\n","title":"How to capture a remote website using Java Selenium","body":"<p>I think this is what you are looking for. But try to be mores specific if it is not.</p>\n\n<blockquote>\n  <p>captureEntirePageScreenshot (\n  filename,kwargs )\n      Saves the entire contents of the current window canvas to a PNG file.\n  Contrast this with the\n  captureScreenshot command, which\n  captures the contents of the OS\n  viewport (i.e. whatever is currently\n  being displayed on the monitor), and\n  is implemented in the RC only.\n  Currently this only works in Firefox\n  when running in chrome mode, and in IE\n  non-HTA using the EXPERIMENTAL\n  \"Snapsie\" utility. The Firefox\n  implementation is mostly borrowed from\n  the Screengrab! Firefox extension.\n  Please see <a href=\"http://www.screengrab.org\" rel=\"nofollow\">http://www.screengrab.org</a>\n  and <a href=\"http://snapsie.sourceforge.net/\" rel=\"nofollow\">http://snapsie.sourceforge.net/</a>\n  for details.</p>\n\n<pre><code>Arguments:\n\n    * filename - the path to the file to persist the screenshot as. No\n</code></pre>\n  \n  <p>filename extension will be appended by\n  default. Directories will not be\n  created if they do not exist, and an\n  exception will be thrown, possibly by\n  native code.\n          * kwargs - a kwargs string that modifies the way the screenshot\n  is captured. Example:\n  \"background=#CCFFDD\" . Currently valid\n  options:</p>\n\n<pre><code>      background\n          the background CSS for the HTML document. This may be useful\n</code></pre>\n  \n  <p>to set for capturing screenshots of\n  less-than-ideal layouts, for example\n  where absolute positioning causes the\n  calculation of the canvas dimension to\n  fail and a black background is exposed\n  (possibly obscuring black text).</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":6000,"reputation":46780,"user_id":9922,"accept_rate":62,"display_name":"rbrayb"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1296525474,"creation_date":1296525474,"answer_id":4858138,"question_id":4804335,"body_markdown":"See here: [Capturing screenshots from remote Selenium RC][1].\r\n\r\nIn essence:\r\n\r\n&quot;To solve this you can use the captureScreenshotToString and captureEntirePageScreenshotToString commands, which return a Base64 encoded String of the screenshot, which you can then decode and save to disk on your testrunner machine.&quot;\r\n\r\n[1]: http://seleniumexamples.com/blog/examples/capturing-screenshots-from-remote-selenium-rc/\r\n","title":"How to capture a remote website using Java Selenium","body":"<p>See here: <a href=\"http://seleniumexamples.com/blog/examples/capturing-screenshots-from-remote-selenium-rc/\" rel=\"nofollow\">Capturing screenshots from remote Selenium RC</a>.</p>\n\n<p>In essence:</p>\n\n<p>\"To solve this you can use the captureScreenshotToString and captureEntirePageScreenshotToString commands, which return a Base64 encoded String of the screenshot, which you can then decode and save to disk on your testrunner machine.\"</p>\n"},{"tags":[],"owner":{"account_id":8909543,"reputation":128,"user_id":6650289,"accept_rate":0,"display_name":"akhilesh gulati"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1488171337,"creation_date":1488171337,"answer_id":42478070,"question_id":4804335,"body_markdown":"    public static void getSnapShot(WebDriver driver, String event) {\r\n    \t {\r\n    \t\ttry {\r\n    \t\t\tFile scrFile = ((TakesScreenshot) driver).getScreenshotAs(OutputType.FILE);\r\n    \t\t\tBufferedImage originalImage = ImageIO.read(scrFile);\r\n    \t\t\t//int type = originalImage.getType() == 0 ? BufferedImage.TYPE_INT_ARGB : originalImage.getType();\r\n    \t\t\tBufferedImage resizedImage = CommonUtilities.resizeImage(originalImage, IMG_HEIGHT, IMG_WIDTH);\r\n    \t\t\tImageIO.write(resizedImage, &quot;jpg&quot;, new File(path + &quot;/&quot;+ testCaseId + &quot;/img/&quot; + index + &quot;.jpg&quot;));\r\n    \t\t\tImage jpeg = Image.getInstance(path + &quot;/&quot; + testCaseId + &quot;/img/&quot;+ index + &quot;.jpg&quot;);\r\n    \t\t\tjpeg.setAlignment(Image.MIDDLE);\r\n                \r\n    \t\t\t++index;\r\n    \t\t} catch (Exception  e) {\r\n    \t\t\te.printStackTrace();\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\n","title":"How to capture a remote website using Java Selenium","body":"<pre><code>public static void getSnapShot(WebDriver driver, String event) {\n     {\n        try {\n            File scrFile = ((TakesScreenshot) driver).getScreenshotAs(OutputType.FILE);\n            BufferedImage originalImage = ImageIO.read(scrFile);\n            //int type = originalImage.getType() == 0 ? BufferedImage.TYPE_INT_ARGB : originalImage.getType();\n            BufferedImage resizedImage = CommonUtilities.resizeImage(originalImage, IMG_HEIGHT, IMG_WIDTH);\n            ImageIO.write(resizedImage, \"jpg\", new File(path + \"/\"+ testCaseId + \"/img/\" + index + \".jpg\"));\n            Image jpeg = Image.getInstance(path + \"/\" + testCaseId + \"/img/\"+ index + \".jpg\");\n            jpeg.setAlignment(Image.MIDDLE);\n\n            ++index;\n        } catch (Exception  e) {\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12512971,"reputation":23,"user_id":9107366,"display_name":"Arun"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1513702370,"creation_date":1513702370,"answer_id":47891664,"question_id":4804335,"body_markdown":"I like to use PhantomJS driver for taking screenshots.\r\n\r\n    public class Test {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\t//PhantomJS headless driver\r\n    \t\tFile file = new File(&quot;D:\\\\Webdriver\\\\phantomjs-2.1.1-windows\\\\bin\\\\phantomjs.exe&quot;);\r\n    \t\tSystem.setProperty(&quot;phantomjs.binary.path&quot;, file.getAbsolutePath());\r\n    \t\tWebDriver driver = new PhantomJSDriver();\r\n    \t\t\r\n    \t\t//Set Size here\r\n    \t\tdriver.manage().window().setSize(new Dimension(1600,900));\r\n    \t\t\r\n    \t\t//To wait until the element get visible or invisible.\r\n    \t\tWebDriverWait wait = new WebDriverWait(driver, 25);\r\n    \t\t\r\n    \t\t//To access url.\r\n    \t\tdriver.get(&quot;https://www.google.co.in&quot;);\r\n    \t\t\r\n    \t\t//For wait until the element get visible.\r\n    \t\twait.until(ExpectedConditions.visibilityOfElementLocated(By.id(&quot;lst-ib&quot;)));\r\n    \t\t\r\n    \t\tFile shot=((TakesScreenshot)driver).getScreenshotAs(OutputType.FILE);\r\n    \t\tFileUtils.copyFile(shot, new File(&quot;D:\\\\Webdriver\\\\Capture.jpg&quot;));\r\n    \t}\r\n    \r\n    }","title":"How to capture a remote website using Java Selenium","body":"<p>I like to use PhantomJS driver for taking screenshots.</p>\n\n<pre><code>public class Test {\n\n    public static void main(String[] args) {\n        //PhantomJS headless driver\n        File file = new File(\"D:\\\\Webdriver\\\\phantomjs-2.1.1-windows\\\\bin\\\\phantomjs.exe\");\n        System.setProperty(\"phantomjs.binary.path\", file.getAbsolutePath());\n        WebDriver driver = new PhantomJSDriver();\n\n        //Set Size here\n        driver.manage().window().setSize(new Dimension(1600,900));\n\n        //To wait until the element get visible or invisible.\n        WebDriverWait wait = new WebDriverWait(driver, 25);\n\n        //To access url.\n        driver.get(\"https://www.google.co.in\");\n\n        //For wait until the element get visible.\n        wait.until(ExpectedConditions.visibilityOfElementLocated(By.id(\"lst-ib\")));\n\n        File shot=((TakesScreenshot)driver).getScreenshotAs(OutputType.FILE);\n        FileUtils.copyFile(shot, new File(\"D:\\\\Webdriver\\\\Capture.jpg\"));\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9518986,"reputation":11,"user_id":7074451,"display_name":"Jatin gangwani"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1516096794,"creation_date":1516096794,"answer_id":48278558,"question_id":4804335,"body_markdown":"It takes full page screenshot of chrome webpage.  \r\n   \r\n    System.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;F:\\\\chromedriver.exe&quot;); \r\n\r\n    ChromeOptions options = new ChromeOptions();\r\n    options.addArguments(&quot;--start-maximized&quot;);\r\n    WebDriver driver = new ChromeDriver(options);   \r\n    String baseUrl = &quot;https://www.google.co.in&quot;;\r\n\r\n    driver.get(baseUrl);        \r\n    String fullscreen =Keys.chord(Keys.F11);\r\n    driver.findElement(By.cssSelector(&quot;body&quot;)).sendKeys(fullscreen);\r\n\r\n    TakesScreenshot scrShot =((TakesScreenshot)driver);  \r\n    File SrcFile=scrShot.getScreenshotAs(OutputType.FILE);   \r\n    File DestFile=new File(&quot;F://test.png&quot;);  \r\n    FileUtils.copyFile(SrcFile, DestFile);   \r\n    driver.close();","title":"How to capture a remote website using Java Selenium","body":"<p>It takes full page screenshot of chrome webpage.  </p>\n\n<pre><code>System.setProperty(\"webdriver.chrome.driver\", \"F:\\\\chromedriver.exe\"); \n\nChromeOptions options = new ChromeOptions();\noptions.addArguments(\"--start-maximized\");\nWebDriver driver = new ChromeDriver(options);   \nString baseUrl = \"https://www.google.co.in\";\n\ndriver.get(baseUrl);        \nString fullscreen =Keys.chord(Keys.F11);\ndriver.findElement(By.cssSelector(\"body\")).sendKeys(fullscreen);\n\nTakesScreenshot scrShot =((TakesScreenshot)driver);  \nFile SrcFile=scrShot.getScreenshotAs(OutputType.FILE);   \nFile DestFile=new File(\"F://test.png\");  \nFileUtils.copyFile(SrcFile, DestFile);   \ndriver.close();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":24328637,"reputation":96,"user_id":18267832,"display_name":"Marko Delic"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646236957,"creation_date":1646236957,"answer_id":71325706,"question_id":4804335,"body_markdown":"I see a lot of answers explaining screenshots, but just incase you are asking how to get the entire source of the page use the following method:\r\n\r\n      String pageSource = driver.getPageSource();\r\n\r\n[Here is a runnable example.][1]\r\n\r\n\r\n  [1]: https://mx1.maxtaf.com/cases/4e5bc8b7-e5b1-4579-ae77-ec712f872bd7?projectId=bugtestproject2","title":"How to capture a remote website using Java Selenium","body":"<p>I see a lot of answers explaining screenshots, but just incase you are asking how to get the entire source of the page use the following method:</p>\n<pre><code>  String pageSource = driver.getPageSource();\n</code></pre>\n<p><a href=\"https://mx1.maxtaf.com/cases/4e5bc8b7-e5b1-4579-ae77-ec712f872bd7?projectId=bugtestproject2\" rel=\"nofollow noreferrer\">Here is a runnable example.</a></p>\n"}],"owner":{"account_id":700480,"reputation":81,"user_id":590548,"display_name":"rathna"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":846,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":6,"score":1,"last_activity_date":1646236957,"creation_date":1296043287,"question_id":4804335,"body_markdown":"can anyone tell me how I can capture a webpage using Java Selenium? With an example....","title":"How to capture a remote website using Java Selenium","body":"<p>can anyone tell me how I can capture a webpage using Java Selenium? With an example....</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":2,"creation_date":1646236715,"post_id":71325586,"comment_id":126074468,"body_markdown":"&quot;But when I catch the SuppressValidation, the ValidationException goes uncaught&quot; - please provide a [mcve] to explain more clearly what you mean. Note that catching `SuppressValidationException` won&#39;t catch any instances of plain `ValidationException`... if something is using `throw new ValidationException(...)` how would you expect `SuppressValidationException` to come into play?","body":"&quot;But when I catch the SuppressValidation, the ValidationException goes uncaught&quot; - please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> to explain more clearly what you mean. Note that catching <code>SuppressValidationException</code> won&#39;t catch any instances of plain <code>ValidationException</code>... if something is using <code>throw new ValidationException(...)</code> how would you expect <code>SuppressValidationException</code> to come into play?"},{"owner":{"account_id":21804,"reputation":7207,"user_id":53300,"accept_rate":53,"display_name":"DaveH"},"score":0,"creation_date":1646237163,"post_id":71325586,"comment_id":126074654,"body_markdown":"What performance hit are you hoping to minimise? It seems likely that you won&#39;t be able to stop the exception being thrown, all you can change is how you react to it when it is thrown.","body":"What performance hit are you hoping to minimise? It seems likely that you won&#39;t be able to stop the exception being thrown, all you can change is how you react to it when it is thrown."},{"owner":{"account_id":5321617,"reputation":23,"user_id":4244910,"display_name":"techieIntern"},"score":0,"creation_date":1646237901,"post_id":71325586,"comment_id":126074943,"body_markdown":"@JonSkeet I suppose one reason I thought it would come into play is that if I have two catch blocks, Intellij throws a warning stating they are identical. So I was hoping since that one extends the other exception, it would be caught when the other is referenced.","body":"@JonSkeet I suppose one reason I thought it would come into play is that if I have two catch blocks, Intellij throws a warning stating they are identical. So I was hoping since that one extends the other exception, it would be caught when the other is referenced."},{"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1646238380,"post_id":71325586,"comment_id":126075161,"body_markdown":"&quot;if I have two catch blocks, Intellij throws a warning stating they are identical&quot; - well that would depend on the precise nature of the blocks. A catch block for ValidationException would catch SuppressValidationException, but not the other way round...","body":"&quot;if I have two catch blocks, Intellij throws a warning stating they are identical&quot; - well that would depend on the precise nature of the blocks. A catch block for ValidationException would catch SuppressValidationException, but not the other way round..."}],"answers":[{"tags":[],"owner":{"account_id":48638,"reputation":5943,"user_id":144578,"accept_rate":79,"display_name":"Sebastiaan van den Broek"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646236671,"creation_date":1646236671,"answer_id":71325631,"question_id":71325586,"body_markdown":"You could write a simple wrapper around the class of this external library that actually throws this exception, just pass through any method calls to the one with the same name, and catch exceptions if appropriate and rethrow a simpler version.\r\n\r\nAlso, whether you actually log the stacktrace will also depend on your logging framework and it can probably also be configured to not do that.","title":"How to override a method of an external library?","body":"<p>You could write a simple wrapper around the class of this external library that actually throws this exception, just pass through any method calls to the one with the same name, and catch exceptions if appropriate and rethrow a simpler version.</p>\n<p>Also, whether you actually log the stacktrace will also depend on your logging framework and it can probably also be configured to not do that.</p>\n"}],"owner":{"account_id":5321617,"reputation":23,"user_id":4244910,"display_name":"techieIntern"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":78,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1646236671,"creation_date":1646236514,"question_id":71325586,"body_markdown":"I want to suppress the stacktrace of a specific exception: org.everit.json.schema.ValidationException.\r\n\r\nThis particular exception is thrown a lot in our application, and I want to limit the performance hit.\r\n\r\nI tried extending it with my own:\r\n\r\n```\r\npublic class SuppressValidationException extends ValidationException {\r\n\r\n  public SuppressEveritValidationException(Schema violatedSchema,\r\n      Class&lt;?&gt; expectedType, Object actualValue) {\r\n    super(violatedSchema, expectedType, actualValue);\r\n  }\r\n\r\n  public SuppressEveritValidationException(Schema violatedSchema, Class&lt;?&gt; expectedType,\r\n      Object actualValue, String keyword) {\r\n    super(violatedSchema, expectedType, actualValue, keyword);\r\n  }\r\n\r\n  @Override\r\n  public Throwable fillInStackTrace() {\r\n    return this;\r\n  }\r\n}\r\n```\r\n\r\nBut when I catch the SuppressValidation, the ValidationException goes uncaught. Is there a way to achieve what I am trying to do?","title":"How to override a method of an external library?","body":"<p>I want to suppress the stacktrace of a specific exception: org.everit.json.schema.ValidationException.</p>\n<p>This particular exception is thrown a lot in our application, and I want to limit the performance hit.</p>\n<p>I tried extending it with my own:</p>\n<pre><code>public class SuppressValidationException extends ValidationException {\n\n  public SuppressEveritValidationException(Schema violatedSchema,\n      Class&lt;?&gt; expectedType, Object actualValue) {\n    super(violatedSchema, expectedType, actualValue);\n  }\n\n  public SuppressEveritValidationException(Schema violatedSchema, Class&lt;?&gt; expectedType,\n      Object actualValue, String keyword) {\n    super(violatedSchema, expectedType, actualValue, keyword);\n  }\n\n  @Override\n  public Throwable fillInStackTrace() {\n    return this;\n  }\n}\n</code></pre>\n<p>But when I catch the SuppressValidation, the ValidationException goes uncaught. Is there a way to achieve what I am trying to do?</p>\n"},{"tags":["java","recursion","tree","nodes"],"comments":[{"owner":{"account_id":7142980,"reputation":323253,"user_id":5459839,"display_name":"trincot"},"score":0,"creation_date":1646248333,"post_id":71325554,"comment_id":126078745,"body_markdown":"What is `getAsNode`? I hope it is not scanning the whole tree to find an IP address...","body":"What is <code>getAsNode</code>? I hope it is not scanning the whole tree to find an IP address..."},{"owner":{"account_id":24022098,"reputation":1,"user_id":18004235,"display_name":"zepnex"},"score":0,"creation_date":1646382451,"post_id":71325554,"comment_id":126113825,"body_markdown":"Well basically it does, but i am storing every node in another list so i dont have to iterate through the tree.\nBut i already fixed this issue.","body":"Well basically it does, but i am storing every node in another list so i dont have to iterate through the tree. But i already fixed this issue."},{"owner":{"account_id":7142980,"reputation":323253,"user_id":5459839,"display_name":"trincot"},"score":0,"creation_date":1646386181,"post_id":71325554,"comment_id":126115065,"body_markdown":"Yes, but it looks wrong to pass as argument `node.getParent().getAddress()` only to do `getAsNode(newRoot)` again in the recursive call. It is not your question, I know, but it would be nice to answer this question with a cleaner base to work from.","body":"Yes, but it looks wrong to pass as argument <code>node.getParent().getAddress()</code> only to do <code>getAsNode(newRoot)</code> again in the recursive call. It is not your question, I know, but it would be nice to answer this question with a cleaner base to work from."}],"owner":{"account_id":24022098,"reputation":1,"user_id":18004235,"display_name":"zepnex"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":177,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1646236371,"creation_date":1646236371,"question_id":71325554,"body_markdown":"Basically what I have is a class Node, which contains an IP, it&#39;s parent node and a list of children:\r\n```\r\npublic class Node implements Comparable&lt;Node&gt; {\r\n\r\n    private final IP address;\r\n    private List&lt;Node&gt; children;\r\n    private Node parent;\r\n\r\n    /**\r\n     * @param address  IP-Address\r\n     * @param children List of children this node has\r\n     */\r\n\r\n    public Node(IP address, List&lt;Node&gt; children) {\r\n        this.address = address;\r\n        this.children = children;\r\n        if (!children.isEmpty()) {\r\n            for (Node child : children) {\r\n                child.parent = this;\r\n            }\r\n            Collections.sort(children);\r\n        }\r\n    }\r\n\r\n    public void setChildren(List&lt;Node&gt; children) {\r\n        this.children = children;\r\n    }\r\n\r\n    public List&lt;Node&gt; getChildren() {\r\n        return children;\r\n    }\r\n\r\n    public IP getAddress() {\r\n        return address;\r\n    }\r\n\r\n    public Node getParent() {\r\n        return parent;\r\n    }\r\n\r\n    public void setParent(Node parent) {\r\n        this.parent = parent;\r\n    }\r\n\r\n    @Override\r\n    public int compareTo(Node o) {\r\n        return this.address.compareTo(o.address);\r\n    }\r\n}\r\n```\r\n\r\nSo an tree structure can look like this: [Tree with 85 as root][1]\r\n(the numbers are displaying the first octet of an IP as decimal)\r\n\r\nAnd a tree with changed root looks like this: [Tree with changed root][2]\r\nnote that i changed the prior root 85 with 39\r\n\r\nNow where i need help is to finde a good and clean way to change the root and the parent/children of every node.\r\n\r\nRight now my methode looks like this but it&#39;s very ugly:\r\n```\r\npublic void changeRoot(IP newRoot, Node newParent) {\r\n        Node node = getAsNode(newRoot);\r\n        if (newParent == null) {\r\n            changeRoot(node.getParent().getAddress(), node);\r\n            node.getChildren().add(node.getParent());\r\n            node.setParent(newParent);\r\n        } else if (node.getParent() == null) {\r\n            node.getChildren().remove(newParent);\r\n            node.setParent(newParent);\r\n        } else {\r\n            changeRoot(node.getParent().getAddress(), node);\r\n            node.getChildren().add(node.getParent());\r\n            node.getChildren().remove(newParent);\r\n            node.setParent(newParent);\r\n        }\r\n        if (node.getParent() == null) {\r\n            network.remove(root);\r\n            root = node;\r\n            network.add(root);\r\n        }\r\n    }\r\n```\r\n\r\nAnd in the class network i am storing the current root node, a list of all nodes in this network snd a list the network which contains the root node and possible subnetworks.\r\n\r\n```\r\npublic class Network extends AddressParser{\r\n\r\n    List&lt;Node&gt; network = new ArrayList&lt;&gt;();\r\n \r\n    SortedSet&lt;Node&gt; allNodes = new TreeSet&lt;&gt;();\r\n\r\n    Node root;\r\n}\r\n```\r\n\r\nThanks for your help in advance!\r\n\r\n  [1]: https://i.stack.imgur.com/kCQIJ.png\r\n  [2]: https://i.stack.imgur.com/nbpvi.png","title":"Change root of a &quot;custom&quot; tree with another node of the tree","body":"<p>Basically what I have is a class Node, which contains an IP, it's parent node and a list of children:</p>\n<pre><code>public class Node implements Comparable&lt;Node&gt; {\n\n    private final IP address;\n    private List&lt;Node&gt; children;\n    private Node parent;\n\n    /**\n     * @param address  IP-Address\n     * @param children List of children this node has\n     */\n\n    public Node(IP address, List&lt;Node&gt; children) {\n        this.address = address;\n        this.children = children;\n        if (!children.isEmpty()) {\n            for (Node child : children) {\n                child.parent = this;\n            }\n            Collections.sort(children);\n        }\n    }\n\n    public void setChildren(List&lt;Node&gt; children) {\n        this.children = children;\n    }\n\n    public List&lt;Node&gt; getChildren() {\n        return children;\n    }\n\n    public IP getAddress() {\n        return address;\n    }\n\n    public Node getParent() {\n        return parent;\n    }\n\n    public void setParent(Node parent) {\n        this.parent = parent;\n    }\n\n    @Override\n    public int compareTo(Node o) {\n        return this.address.compareTo(o.address);\n    }\n}\n</code></pre>\n<p>So an tree structure can look like this: <a href=\"https://i.stack.imgur.com/kCQIJ.png\" rel=\"nofollow noreferrer\">Tree with 85 as root</a>\n(the numbers are displaying the first octet of an IP as decimal)</p>\n<p>And a tree with changed root looks like this: <a href=\"https://i.stack.imgur.com/nbpvi.png\" rel=\"nofollow noreferrer\">Tree with changed root</a>\nnote that i changed the prior root 85 with 39</p>\n<p>Now where i need help is to finde a good and clean way to change the root and the parent/children of every node.</p>\n<p>Right now my methode looks like this but it's very ugly:</p>\n<pre><code>public void changeRoot(IP newRoot, Node newParent) {\n        Node node = getAsNode(newRoot);\n        if (newParent == null) {\n            changeRoot(node.getParent().getAddress(), node);\n            node.getChildren().add(node.getParent());\n            node.setParent(newParent);\n        } else if (node.getParent() == null) {\n            node.getChildren().remove(newParent);\n            node.setParent(newParent);\n        } else {\n            changeRoot(node.getParent().getAddress(), node);\n            node.getChildren().add(node.getParent());\n            node.getChildren().remove(newParent);\n            node.setParent(newParent);\n        }\n        if (node.getParent() == null) {\n            network.remove(root);\n            root = node;\n            network.add(root);\n        }\n    }\n</code></pre>\n<p>And in the class network i am storing the current root node, a list of all nodes in this network snd a list the network which contains the root node and possible subnetworks.</p>\n<pre><code>public class Network extends AddressParser{\n\n    List&lt;Node&gt; network = new ArrayList&lt;&gt;();\n \n    SortedSet&lt;Node&gt; allNodes = new TreeSet&lt;&gt;();\n\n    Node root;\n}\n</code></pre>\n<p>Thanks for your help in advance!</p>\n"},{"tags":["java","maven","maven-plugin","maven-release-plugin","maven-mojo"],"comments":[{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":1,"creation_date":1646250837,"post_id":71325484,"comment_id":126079578,"body_markdown":"If you defined a property like you did you have to give it either as configuration in the pom file...of your plugin or via a system property during a goal call of your plugin. The given example are just calling maven-release-plugin but not your own plugin so this can&#39;t be working...","body":"If you defined a property like you did you have to give it either as configuration in the pom file...of your plugin or via a system property during a goal call of your plugin. The given example are just calling maven-release-plugin but not your own plugin so this can&#39;t be working..."}],"owner":{"account_id":1147294,"reputation":405,"user_id":1129766,"accept_rate":70,"display_name":"Johann Goulley"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":225,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1646236364,"creation_date":1646236039,"question_id":71325484,"body_markdown":"I try to get the value of a system property in a custom maven MOJO, like described here : https://maven.apache.org/developers/mojo-api-specification.html.\r\nThe property which I try to get the value is &quot;releaseVersion&quot; from the following command line :\r\n\r\n````mvn -DdevelopmentVersion=0.0.0.7-SNAPSHOT -DreleaseVersion=0.0.0.6 -Dresume=false release:clean release:prepare release:perform````\r\n\r\nIn my custom MOJO, I try to inject the system property in an attribute with the following code :\r\n\r\n````\r\n@Mojo(name = &quot;release-change&quot;, defaultPhase = LifecyclePhase.COMPILE)\r\npublic class ReleaseChangesMojo extends AbstractMojo\r\n{\r\n    @Parameter(property = &quot;releaseVersion&quot;, defaultValue = &quot;${releaseVersion}&quot;, required = true)\r\n    private String releaseVersion;\r\n````\r\nMy pom.xml contains this to launch my MOJO :\r\n````\r\n      &lt;plugin&gt;\r\n        &lt;groupId&gt;fr.my.plugin&lt;/groupId&gt;\r\n        &lt;artifactId&gt;my-release-maven-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;0.0.5&lt;/version&gt;\r\n      &lt;/plugin&gt;\r\n    &lt;/plugins&gt;\r\n\r\n    &lt;pluginManagement&gt;\r\n      &lt;plugins&gt;\r\n        &lt;plugin&gt;\r\n          &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n          &lt;artifactId&gt;maven-release-plugin&lt;/artifactId&gt;\r\n          &lt;version&gt;2.5.3&lt;/version&gt;\r\n          ...\r\n          &lt;configuration combine.self=&quot;override&quot;&gt;\r\n            &lt;preparationGoals&gt;clean verify&lt;/preparationGoals&gt;\r\n            &lt;goals&gt;deploy&lt;/goals&gt;\r\n            &lt;completionGoals&gt;my-release:release-change&lt;/completionGoals&gt;\r\n          ...\r\n          &lt;/configuration&gt;\r\n        &lt;/plugin&gt;\r\n      &lt;/plugins&gt;\r\n    &lt;/pluginManagement&gt;\r\n````\r\n\r\nBut on execution, I get the following error :\r\n\r\n````[ERROR] Failed to execute goal plugin:my-release-maven-plugin:0.0.5:release-change (default-cli) on project exemple: The parameters &#39;releaseVersion&#39; for goal fr.my.plugin:my-release-maven-plugin:0.0.5:release-change are missing or invalid -&gt; [Help 1]````\r\n\r\nDo you have any idea why the system property is not injected in my MOJO ?","title":"Can&#39;t get system parameter from custom maven MOJO","body":"<p>I try to get the value of a system property in a custom maven MOJO, like described here : <a href=\"https://maven.apache.org/developers/mojo-api-specification.html\" rel=\"nofollow noreferrer\">https://maven.apache.org/developers/mojo-api-specification.html</a>.\nThe property which I try to get the value is &quot;releaseVersion&quot; from the following command line :</p>\n<p><code>mvn -DdevelopmentVersion=0.0.0.7-SNAPSHOT -DreleaseVersion=0.0.0.6 -Dresume=false release:clean release:prepare release:perform</code></p>\n<p>In my custom MOJO, I try to inject the system property in an attribute with the following code :</p>\n<pre><code>@Mojo(name = &quot;release-change&quot;, defaultPhase = LifecyclePhase.COMPILE)\npublic class ReleaseChangesMojo extends AbstractMojo\n{\n    @Parameter(property = &quot;releaseVersion&quot;, defaultValue = &quot;${releaseVersion}&quot;, required = true)\n    private String releaseVersion;\n</code></pre>\n<p>My pom.xml contains this to launch my MOJO :</p>\n<pre><code>      &lt;plugin&gt;\n        &lt;groupId&gt;fr.my.plugin&lt;/groupId&gt;\n        &lt;artifactId&gt;my-release-maven-plugin&lt;/artifactId&gt;\n        &lt;version&gt;0.0.5&lt;/version&gt;\n      &lt;/plugin&gt;\n    &lt;/plugins&gt;\n\n    &lt;pluginManagement&gt;\n      &lt;plugins&gt;\n        &lt;plugin&gt;\n          &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n          &lt;artifactId&gt;maven-release-plugin&lt;/artifactId&gt;\n          &lt;version&gt;2.5.3&lt;/version&gt;\n          ...\n          &lt;configuration combine.self=&quot;override&quot;&gt;\n            &lt;preparationGoals&gt;clean verify&lt;/preparationGoals&gt;\n            &lt;goals&gt;deploy&lt;/goals&gt;\n            &lt;completionGoals&gt;my-release:release-change&lt;/completionGoals&gt;\n          ...\n          &lt;/configuration&gt;\n        &lt;/plugin&gt;\n      &lt;/plugins&gt;\n    &lt;/pluginManagement&gt;\n</code></pre>\n<p>But on execution, I get the following error :</p>\n<p><code>[ERROR] Failed to execute goal plugin:my-release-maven-plugin:0.0.5:release-change (default-cli) on project exemple: The parameters 'releaseVersion' for goal fr.my.plugin:my-release-maven-plugin:0.0.5:release-change are missing or invalid -&gt; [Help 1]</code></p>\n<p>Do you have any idea why the system property is not injected in my MOJO ?</p>\n"},{"tags":["java","android","android-11"],"comments":[{"owner":{"account_id":39846,"reputation":991143,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":1,"creation_date":1602518383,"post_id":64321017,"comment_id":113739609,"body_markdown":"Check Logcat to see if the camera app that happens to be your default is logging any messages of relevance around the time that you invoke this `Intent`.","body":"Check Logcat to see if the camera app that happens to be your default is logging any messages of relevance around the time that you invoke this <code>Intent</code>."},{"owner":{"account_id":314932,"reputation":5757,"user_id":630407,"accept_rate":83,"display_name":"Paul"},"score":0,"creation_date":1602519404,"post_id":64321017,"comment_id":113740012,"body_markdown":"Thank you, that does lead somewhere. I updated the question and I have a little more to go on now.","body":"Thank you, that does lead somewhere. I updated the question and I have a little more to go on now."},{"owner":{"account_id":39846,"reputation":991143,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":3,"creation_date":1602519845,"post_id":64321017,"comment_id":113740167,"body_markdown":"You are not going to be able to write to the root of external storage next year, once your `targetSdkVersion` reaches 30. I *strongly* recommend that you write this image somewhere else -- your app should be able to contribute to `Pictures/`, for example. If you absolutely must write here in the short term, you will need to add `android:requestLegacyExternalStorage=&quot;true&quot;` in the `&lt;application&gt;` element of the manifest.","body":"You are not going to be able to write to the root of external storage next year, once your <code>targetSdkVersion</code> reaches 30. I <i>strongly</i> recommend that you write this image somewhere else -- your app should be able to contribute to <code>Pictures&#47;</code>, for example. If you absolutely must write here in the short term, you will need to add <code>android:requestLegacyExternalStorage=&quot;true&quot;</code> in the <code>&lt;application&gt;</code> element of the manifest."},{"owner":{"account_id":314932,"reputation":5757,"user_id":630407,"accept_rate":83,"display_name":"Paul"},"score":0,"creation_date":1602522432,"post_id":64321017,"comment_id":113741257,"body_markdown":"Wow, I owe you a beer. I would have never found this. Thank you!","body":"Wow, I owe you a beer. I would have never found this. Thank you!"}],"answers":[{"tags":[],"owner":{"account_id":314932,"reputation":5757,"user_id":630407,"accept_rate":83,"display_name":"Paul"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1613140232,"creation_date":1602522386,"answer_id":64322243,"question_id":64321017,"body_markdown":"Truly @CommonsWare deserves the credit here. The issue was the `getTempFileString()` call in the source code. I was attempting to save the file to a temp path so I could delete it right after. The file only exists shortly. Google blocked access to this. The `Camera` application received an error about not being able to save to this path, however it did not throw an error or display a message. It just returned a result of `RESULT_CANCELED` back to my application. I fixed this by updating the path used to the local cache directory `getExternalCacheDir()` and am using a sub directory inside that.\r\n\r\n**Edit:** Adding the code that worked for me. Removed app specific text, and the error handling to keep it short and simple.\r\n\r\n    Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);\r\n    \r\n    File path = new File(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES), &quot;My Application Directory&quot;);\r\n    \r\n    if (!path.exists()) {\r\n       path.mkdir();\r\n    }\r\n    \r\n    File imageFile = File.createTempFile(&quot;Your file Name&quot;, &quot;.jpg&quot;, path);\r\n    \r\n    Context context = getActivity().getBaseContext();\r\n    Uri uri = FileProvider.getUriForFile(context, context.getApplicationContext().getPackageName() + &quot;.provider&quot;, imageFile);\r\n    \r\n    intent.putExtra(MediaStore.EXTRA_OUTPUT, uri);\r\n    intent.addFlags(Intent.FLAG_GRANT_WRITE_URI_PERMISSION | Intent.FLAG_GRANT_READ_URI_PERMISSION);\r\n    \r\n    List&lt;ResolveInfo&gt; resInfoList = context.getPackageManager().queryIntentActivities(intent, PackageManager.MATCH_DEFAULT_ONLY);\r\n    for (ResolveInfo resolveInfo : resInfoList) {\r\n       String packageName = resolveInfo.activityInfo.packageName;\r\n       context.grantUriPermission(packageName, CurrentUri, Intent.FLAG_GRANT_WRITE_URI_PERMISSION | Intent.FLAG_GRANT_READ_URI_PERMISSION);\r\n    }\r\n\r\n    startActivityForResult(intent, IMAGE_CAPTURE); // IMAGE_CAPTURE = 0","title":"Cannot take a photo programmatically on Android 11 - intent returns canceled status","body":"<p>Truly @CommonsWare deserves the credit here. The issue was the <code>getTempFileString()</code> call in the source code. I was attempting to save the file to a temp path so I could delete it right after. The file only exists shortly. Google blocked access to this. The <code>Camera</code> application received an error about not being able to save to this path, however it did not throw an error or display a message. It just returned a result of <code>RESULT_CANCELED</code> back to my application. I fixed this by updating the path used to the local cache directory <code>getExternalCacheDir()</code> and am using a sub directory inside that.</p>\n<p><strong>Edit:</strong> Adding the code that worked for me. Removed app specific text, and the error handling to keep it short and simple.</p>\n<pre><code>Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);\n\nFile path = new File(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES), &quot;My Application Directory&quot;);\n\nif (!path.exists()) {\n   path.mkdir();\n}\n\nFile imageFile = File.createTempFile(&quot;Your file Name&quot;, &quot;.jpg&quot;, path);\n\nContext context = getActivity().getBaseContext();\nUri uri = FileProvider.getUriForFile(context, context.getApplicationContext().getPackageName() + &quot;.provider&quot;, imageFile);\n\nintent.putExtra(MediaStore.EXTRA_OUTPUT, uri);\nintent.addFlags(Intent.FLAG_GRANT_WRITE_URI_PERMISSION | Intent.FLAG_GRANT_READ_URI_PERMISSION);\n\nList&lt;ResolveInfo&gt; resInfoList = context.getPackageManager().queryIntentActivities(intent, PackageManager.MATCH_DEFAULT_ONLY);\nfor (ResolveInfo resolveInfo : resInfoList) {\n   String packageName = resolveInfo.activityInfo.packageName;\n   context.grantUriPermission(packageName, CurrentUri, Intent.FLAG_GRANT_WRITE_URI_PERMISSION | Intent.FLAG_GRANT_READ_URI_PERMISSION);\n}\n\nstartActivityForResult(intent, IMAGE_CAPTURE); // IMAGE_CAPTURE = 0\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13843819,"reputation":1011,"user_id":9993413,"display_name":"Z3R0"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1624453847,"creation_date":1624453847,"answer_id":68100508,"question_id":64321017,"body_markdown":"you shouldn&#39;t use &quot;getExternalStoragePublicDirectory()&quot; because this is SHARED STORAGE behaviour and from (probably) 5 july 2021 all applications on the Play Store MUST target android SDK 30 and use Scoped Storage only (so you can&#39;t use &quot;requestLegacyStorage&quot;, idk about &quot;preserveLegacyStorage&quot;).\r\n\r\nI suggest you to change the destination path  to:\r\n\r\n    context.getExternalFilesDir(null).getPath();\r\n\r\nHave a nice Day &amp; a Nice Coding :D","title":"Cannot take a photo programmatically on Android 11 - intent returns canceled status","body":"<p>you shouldn't use &quot;getExternalStoragePublicDirectory()&quot; because this is SHARED STORAGE behaviour and from (probably) 5 july 2021 all applications on the Play Store MUST target android SDK 30 and use Scoped Storage only (so you can't use &quot;requestLegacyStorage&quot;, idk about &quot;preserveLegacyStorage&quot;).</p>\n<p>I suggest you to change the destination path  to:</p>\n<pre><code>context.getExternalFilesDir(null).getPath();\n</code></pre>\n<p>Have a nice Day &amp; a Nice Coding :D</p>\n"},{"tags":[],"owner":{"account_id":11445074,"reputation":548,"user_id":8389251,"display_name":"Antares"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646236343,"creation_date":1646236343,"answer_id":71325547,"question_id":64321017,"body_markdown":"This is a strange behaviour but if you use **MediaStore.EXTRA_OUTPUT** flag method *onActivityResult()* will always return null data and you are expected to look for your data at location you pointed out here:\r\n\r\n    CurrentUri = FileProvider.getUriForFile(context, context.getApplicationContext().getPackageName() + &quot;.provider&quot;, CurrentFile);\r\n\r\nSo there are two different ways of handling result you are looking for\r\n","title":"Cannot take a photo programmatically on Android 11 - intent returns canceled status","body":"<p>This is a strange behaviour but if you use <strong>MediaStore.EXTRA_OUTPUT</strong> flag method <em>onActivityResult()</em> will always return null data and you are expected to look for your data at location you pointed out here:</p>\n<pre><code>CurrentUri = FileProvider.getUriForFile(context, context.getApplicationContext().getPackageName() + &quot;.provider&quot;, CurrentFile);\n</code></pre>\n<p>So there are two different ways of handling result you are looking for</p>\n"}],"owner":{"account_id":314932,"reputation":5757,"user_id":630407,"accept_rate":83,"display_name":"Paul"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9378,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":3,"score":4,"last_activity_date":1646236343,"creation_date":1602517422,"question_id":64321017,"body_markdown":"Starting an intent:\r\n\r\n      Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);\r\n      CurrentFile = new File(getTempFileString());\r\n      CurrentUri = FileProvider.getUriForFile(context, context.getApplicationContext().getPackageName() + &quot;.provider&quot;, CurrentFile);\r\n      intent.putExtra(MediaStore.EXTRA_OUTPUT, CurrentUri);\r\n      intent.addFlags(Intent.FLAG_GRANT_WRITE_URI_PERMISSION | Intent.FLAG_GRANT_READ_URI_PERMISSION);\r\n      startActivityForResult(intent, IMAGE_CAPTURE);\r\n\r\nUsed to work. It no longer does. My method that starts after the intent is:\r\n\r\n    public void onActivityResult(int requestCode, int resultCode, Intent data) {\r\n    }\r\n\r\nThe `resultCode` used to be `RESULT_OK` but is now `RESULT_CANCELED`.\r\n\r\nIf I stop checking the resultCode and just go past this, I find that the photo doesn&#39;t exist.\r\n\r\nBased on CommonsWare&#39;s comment I extracted the logs. Of the 654 lines generated during this operation, four seem relevant.\r\n\r\n    2020-10-12 11:03:04.301 1471-1763/? E/MediaProvider: Creating a non-default top level directory or deleting an existing one is not allowed!\r\n    2020-10-12 11:03:04.310 477-2112/? I/AppsFilter: interaction: PackageSetting{240e1c6 com.[my app package]/10151} -&gt; PackageSetting{193734c com.android.camera2/10124} BLOCKED\r\n    2020-10-12 11:03:04.553 390-9884/? W/ServiceManager: Permission failure: android.permission.SYSTEM_CAMERA from uid=10124 pid=11746\r\n    2020-10-12 11:03:14.097 11746-11746/? E/CAM_StateSavePic: exception while saving result to URI: Optional.of(content://[my app package].provider/external_files/[The SD card path I asked for]/1602518584301.jpg)\r\n\r\nI am asking the file to get saved here:\r\n\r\n    new File(Environment.getExternalStorageDirectory(), getString(a.getApplicationInfo().labelRes))\r\n\r\nThis seems to be the issue.","title":"Cannot take a photo programmatically on Android 11 - intent returns canceled status","body":"<p>Starting an intent:</p>\n<pre><code>  Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);\n  CurrentFile = new File(getTempFileString());\n  CurrentUri = FileProvider.getUriForFile(context, context.getApplicationContext().getPackageName() + &quot;.provider&quot;, CurrentFile);\n  intent.putExtra(MediaStore.EXTRA_OUTPUT, CurrentUri);\n  intent.addFlags(Intent.FLAG_GRANT_WRITE_URI_PERMISSION | Intent.FLAG_GRANT_READ_URI_PERMISSION);\n  startActivityForResult(intent, IMAGE_CAPTURE);\n</code></pre>\n<p>Used to work. It no longer does. My method that starts after the intent is:</p>\n<pre><code>public void onActivityResult(int requestCode, int resultCode, Intent data) {\n}\n</code></pre>\n<p>The <code>resultCode</code> used to be <code>RESULT_OK</code> but is now <code>RESULT_CANCELED</code>.</p>\n<p>If I stop checking the resultCode and just go past this, I find that the photo doesn't exist.</p>\n<p>Based on CommonsWare's comment I extracted the logs. Of the 654 lines generated during this operation, four seem relevant.</p>\n<pre><code>2020-10-12 11:03:04.301 1471-1763/? E/MediaProvider: Creating a non-default top level directory or deleting an existing one is not allowed!\n2020-10-12 11:03:04.310 477-2112/? I/AppsFilter: interaction: PackageSetting{240e1c6 com.[my app package]/10151} -&gt; PackageSetting{193734c com.android.camera2/10124} BLOCKED\n2020-10-12 11:03:04.553 390-9884/? W/ServiceManager: Permission failure: android.permission.SYSTEM_CAMERA from uid=10124 pid=11746\n2020-10-12 11:03:14.097 11746-11746/? E/CAM_StateSavePic: exception while saving result to URI: Optional.of(content://[my app package].provider/external_files/[The SD card path I asked for]/1602518584301.jpg)\n</code></pre>\n<p>I am asking the file to get saved here:</p>\n<pre><code>new File(Environment.getExternalStorageDirectory(), getString(a.getApplicationInfo().labelRes))\n</code></pre>\n<p>This seems to be the issue.</p>\n"},{"tags":["java","apache-flink","flink-streaming"],"comments":[{"owner":{"account_id":6178987,"reputation":13196,"user_id":4815083,"display_name":"Till Rohrmann"},"score":0,"creation_date":1495636633,"post_id":44159256,"comment_id":75339370,"body_markdown":"Do you want to batch the data before writing it to Cassandra or shall each record be written to Cassandra as soon as the 10 minutes have passed?","body":"Do you want to batch the data before writing it to Cassandra or shall each record be written to Cassandra as soon as the 10 minutes have passed?"},{"owner":{"account_id":984414,"reputation":709,"user_id":1003301,"accept_rate":48,"display_name":"john"},"score":0,"creation_date":1495639379,"post_id":44159256,"comment_id":75341638,"body_markdown":"Yes I want to batch it before writing to Cassandra but only records that are 10 minutes old should be written.","body":"Yes I want to batch it before writing to Cassandra but only records that are 10 minutes old should be written."},{"owner":{"account_id":6178987,"reputation":13196,"user_id":4815083,"display_name":"Till Rohrmann"},"score":0,"creation_date":1496048749,"post_id":44159256,"comment_id":75486502,"body_markdown":"How long shall the batch be? A specific number of elements or batches of 1 minute?","body":"How long shall the batch be? A specific number of elements or batches of 1 minute?"},{"owner":{"account_id":984414,"reputation":709,"user_id":1003301,"accept_rate":48,"display_name":"john"},"score":0,"creation_date":1496058232,"post_id":44159256,"comment_id":75492360,"body_markdown":"I want batches of 1 minute.","body":"I want batches of 1 minute."},{"owner":{"account_id":984414,"reputation":709,"user_id":1003301,"accept_rate":48,"display_name":"john"},"score":0,"creation_date":1496150367,"post_id":44159256,"comment_id":75534868,"body_markdown":"We decided to ignore this approach and build a delay into our Kafka Consumer.","body":"We decided to ignore this approach and build a delay into our Kafka Consumer."},{"owner":{"account_id":3234933,"reputation":354,"user_id":2729389,"accept_rate":71,"display_name":"simpleusr"},"score":0,"creation_date":1547562704,"post_id":44159256,"comment_id":95228560,"body_markdown":"@john we have a similar requiremeent, how did you achive it? Is your consumer in flink?","body":"@john we have a similar requiremeent, how did you achive it? Is your consumer in flink?"},{"owner":{"account_id":984414,"reputation":709,"user_id":1003301,"accept_rate":48,"display_name":"john"},"score":0,"creation_date":1547566819,"post_id":44159256,"comment_id":95231174,"body_markdown":"@simpleusr We overrided the KafkaConsumer and implemented the delay logic before committing the offset.","body":"@simpleusr We overrided the KafkaConsumer and implemented the delay logic before committing the offset."},{"owner":{"account_id":3234933,"reputation":354,"user_id":2729389,"accept_rate":71,"display_name":"simpleusr"},"score":0,"creation_date":1547573072,"post_id":44159256,"comment_id":95234631,"body_markdown":"@john is it possible to share the code?","body":"@john is it possible to share the code?"},{"owner":{"account_id":984414,"reputation":709,"user_id":1003301,"accept_rate":48,"display_name":"john"},"score":0,"creation_date":1547586605,"post_id":44159256,"comment_id":95240334,"body_markdown":"@simpleusr I added some details above. I hope that&#39;s enough.","body":"@simpleusr I added some details above. I hope that&#39;s enough."},{"owner":{"account_id":3234933,"reputation":354,"user_id":2729389,"accept_rate":71,"display_name":"simpleusr"},"score":0,"creation_date":1548136597,"post_id":44159256,"comment_id":95424031,"body_markdown":"@john thanks for details. As far as I understand, with this implementation a single consumer record blocks the whole fetch loop right (This seems to be occuring in a for lop)?  Or am I mistaken? And how do you use ConsumerRecordFunction? Could you also give detail about that? Many thanks...","body":"@john thanks for details. As far as I understand, with this implementation a single consumer record blocks the whole fetch loop right (This seems to be occuring in a for lop)?  Or am I mistaken? And how do you use ConsumerRecordFunction? Could you also give detail about that? Many thanks..."},{"owner":{"account_id":984414,"reputation":709,"user_id":1003301,"accept_rate":48,"display_name":"john"},"score":0,"creation_date":1548138871,"post_id":44159256,"comment_id":95424811,"body_markdown":"Your correct, it does block the fetch loop. The ConsumerRecordFunction encapsulates the delay function ive already shared. Its abit of a crude solution but so far it has worked for us quite well in production.","body":"Your correct, it does block the fetch loop. The ConsumerRecordFunction encapsulates the delay function ive already shared. Its abit of a crude solution but so far it has worked for us quite well in production."},{"owner":{"account_id":3234933,"reputation":354,"user_id":2729389,"accept_rate":71,"display_name":"simpleusr"},"score":0,"creation_date":1548152767,"post_id":44159256,"comment_id":95432107,"body_markdown":"@john Many thanks for your valuable info. In my flink verson DelayedFetcher will need to derive from Kafka09Fetcher and its runFetchLoop is full of private variables, so I will apply your delaying ConsumerRecordFunction in emitRecord call and this should not make any difference. By the way why did you chose this instead of windowing? I was planning to use windowing for delay but could not succeed and then finally came accross your solution. Thanks again https://stackoverflow.com/questions/54255101/apache-flink-job-simple-windowing-problem-java-lang-runtimeexception-segmen","body":"@john Many thanks for your valuable info. In my flink verson DelayedFetcher will need to derive from Kafka09Fetcher and its runFetchLoop is full of private variables, so I will apply your delaying ConsumerRecordFunction in emitRecord call and this should not make any difference. By the way why did you chose this instead of windowing? I was planning to use windowing for delay but could not succeed and then finally came accross your solution. Thanks again <a href=\"https://stackoverflow.com/questions/54255101/apache-flink-job-simple-windowing-problem-java-lang-runtimeexception-segmen\" title=\"apache flink job simple windowing problem java lang runtimeexception segmen\">stackoverflow.com/questions/54255101/&hellip;</a>"},{"owner":{"account_id":984414,"reputation":709,"user_id":1003301,"accept_rate":48,"display_name":"john"},"score":0,"creation_date":1548156788,"post_id":44159256,"comment_id":95434441,"body_markdown":"I couldnt find a way to implement it using windowing, plus the volume of data we would have to store in that window would require alot of memory, this was a better tradeoff.","body":"I couldnt find a way to implement it using windowing, plus the volume of data we would have to store in that window would require alot of memory, this was a better tradeoff."},{"owner":{"account_id":3234933,"reputation":354,"user_id":2729389,"accept_rate":71,"display_name":"simpleusr"},"score":0,"creation_date":1548159875,"post_id":44159256,"comment_id":95436032,"body_markdown":"@john Thanks again...","body":"@john Thanks again..."}],"owner":{"account_id":984414,"reputation":709,"user_id":1003301,"accept_rate":48,"display_name":"john"},"comment_count":14,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1188,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1646236114,"creation_date":1495631074,"question_id":44159256,"body_markdown":"I am wondering is possible with Flink windowing to induce a 10 minute delay from when the data enters the pipeline until it is written to a table in Cassandra.\r\n\r\nMy initial intention was to write each transaction to a table in Cassandra and query the table using a range key at the web layer but due to the volume of data, I am looking at options to delay the write for N seconds. This means that my table will only ever have data that is at least 10 minutes old.\r\n\r\nThe small diagram below shows 10 minute windows that roll every minute. As time moves on I only want to write data to Cassandra that is older than 10 minutes (the parts in green). I guess is this even possible with Flink? \r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/2H8VD.png\r\n\r\nI could create 11 minute windows that roll every minute but I would end up throwing 90% of the data away, which seems a waste.\r\n\r\n\r\n**Final Solution**\r\n\r\nI created my own flavour of `FlinkKafkaConsumer09` called `DelayedKafkaConsumer` The main reason for this is to override the creation of the `KafkaFetcher`\r\n\r\n    public class DelayedKafkaConsumer&lt;T&gt; extends FlinkKafkaConsumer09&lt;T&gt; {\r\n    \r\n    \tprivate ConsumerRecordFunction applyDelayAction;\r\n    \r\n    \t.............\r\n    \r\n    \t@Override\r\n    \tprotected AbstractFetcher&lt;T, ?&gt; createFetcher(SourceContext&lt;T&gt; sourceContext, Map&lt;KafkaTopicPartition, Long&gt; assignedPartitionsWithInitialOffsets,\r\n    \t\t\t\t\t\t\t\t\t\t\t\t  SerializedValue&lt;AssignerWithPeriodicWatermarks&lt;T&gt;&gt; watermarksPeriodic,\r\n    \t\t\t\t\t\t\t\t\t\t\t\t  SerializedValue&lt;AssignerWithPunctuatedWatermarks&lt;T&gt;&gt; watermarksPunctuated,\r\n    \t\t\t\t\t\t\t\t\t\t\t\t  StreamingRuntimeContext runtimeContext, OffsetCommitMode offsetCommitMode) throws Exception {\r\n    \t\treturn new DelayedKafkaFetcher&lt;&gt;(\r\n    \t\t\tsourceContext, assignedPartitionsWithInitialOffsets, watermarksPeriodic, watermarksPunctuated,\r\n    \t\t\truntimeContext.getProcessingTimeService(), runtimeContext.getExecutionConfig().getAutoWatermarkInterval(),\r\n    \t\t\truntimeContext.getUserCodeClassLoader(), runtimeContext.getTaskNameWithSubtasks(),\r\n    \t\t\truntimeContext.getMetricGroup(), this.deserializer, this.properties, this.pollTimeout, useMetrics, applyDelayAction);\r\n    \t}\r\n\r\nThe `DelayedKafkaFetcher` has a small piece of code in it&#39;s `runFetchLoop` that sleeps for n milliseconds before emmitting the record. \r\n\r\n    private void delayMessage(Long msgTransactTime, Long nowMinusDelay) throws InterruptedException {\r\n    \r\n    \t\tif (msgTransactTime &gt; nowMinusDelay) {\r\n    \t\t\tLong sleepTimeout = msgTransactTime - nowMinusDelay;\r\n    \t\t\tif (LOGGER.isDebugEnabled()) {\r\n    \t\t\t\tLOGGER.debug(format(&quot;Message with transaction time {0}ms is not older than {1}ms. Sleeping for {2}&quot;, msgTransactTime, nowMinusDelay, sleepTimeout));\r\n    \t\t\t}\r\n    \t\t\tTimeUnit.MILLISECONDS.sleep(sleepTimeout);\r\n    \t\t}\r\n    \t}","title":"Apache Flink Using Windows to induce a delay before writing to Sink","body":"<p>I am wondering is possible with Flink windowing to induce a 10 minute delay from when the data enters the pipeline until it is written to a table in Cassandra.</p>\n\n<p>My initial intention was to write each transaction to a table in Cassandra and query the table using a range key at the web layer but due to the volume of data, I am looking at options to delay the write for N seconds. This means that my table will only ever have data that is at least 10 minutes old.</p>\n\n<p>The small diagram below shows 10 minute windows that roll every minute. As time moves on I only want to write data to Cassandra that is older than 10 minutes (the parts in green). I guess is this even possible with Flink? </p>\n\n<p><a href=\"https://i.stack.imgur.com/2H8VD.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2H8VD.png\" alt=\"enter image description here\"></a></p>\n\n<p>I could create 11 minute windows that roll every minute but I would end up throwing 90% of the data away, which seems a waste.</p>\n\n<p><strong>Final Solution</strong></p>\n\n<p>I created my own flavour of <code>FlinkKafkaConsumer09</code> called <code>DelayedKafkaConsumer</code> The main reason for this is to override the creation of the <code>KafkaFetcher</code></p>\n\n<pre><code>public class DelayedKafkaConsumer&lt;T&gt; extends FlinkKafkaConsumer09&lt;T&gt; {\n\n    private ConsumerRecordFunction applyDelayAction;\n\n    .............\n\n    @Override\n    protected AbstractFetcher&lt;T, ?&gt; createFetcher(SourceContext&lt;T&gt; sourceContext, Map&lt;KafkaTopicPartition, Long&gt; assignedPartitionsWithInitialOffsets,\n                                                  SerializedValue&lt;AssignerWithPeriodicWatermarks&lt;T&gt;&gt; watermarksPeriodic,\n                                                  SerializedValue&lt;AssignerWithPunctuatedWatermarks&lt;T&gt;&gt; watermarksPunctuated,\n                                                  StreamingRuntimeContext runtimeContext, OffsetCommitMode offsetCommitMode) throws Exception {\n        return new DelayedKafkaFetcher&lt;&gt;(\n            sourceContext, assignedPartitionsWithInitialOffsets, watermarksPeriodic, watermarksPunctuated,\n            runtimeContext.getProcessingTimeService(), runtimeContext.getExecutionConfig().getAutoWatermarkInterval(),\n            runtimeContext.getUserCodeClassLoader(), runtimeContext.getTaskNameWithSubtasks(),\n            runtimeContext.getMetricGroup(), this.deserializer, this.properties, this.pollTimeout, useMetrics, applyDelayAction);\n    }\n</code></pre>\n\n<p>The <code>DelayedKafkaFetcher</code> has a small piece of code in it's <code>runFetchLoop</code> that sleeps for n milliseconds before emmitting the record. </p>\n\n<pre><code>private void delayMessage(Long msgTransactTime, Long nowMinusDelay) throws InterruptedException {\n\n        if (msgTransactTime &gt; nowMinusDelay) {\n            Long sleepTimeout = msgTransactTime - nowMinusDelay;\n            if (LOGGER.isDebugEnabled()) {\n                LOGGER.debug(format(\"Message with transaction time {0}ms is not older than {1}ms. Sleeping for {2}\", msgTransactTime, nowMinusDelay, sleepTimeout));\n            }\n            TimeUnit.MILLISECONDS.sleep(sleepTimeout);\n        }\n    }\n</code></pre>\n"},{"tags":["java","runtimeexception","numberformatexception","invocationtargetexception"],"comments":[{"owner":{"account_id":231683,"reputation":4218,"user_id":496038,"display_name":"pringi"},"score":0,"creation_date":1646236545,"post_id":71325460,"comment_id":126074366,"body_markdown":"One of your inputs is &quot;true&quot; and this is not a number, hence Caused by: java.lang.NumberFormatException: For input string: &quot;true&quot;","body":"One of your inputs is &quot;true&quot; and this is not a number, hence Caused by: java.lang.NumberFormatException: For input string: &quot;true&quot;"},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1646247469,"post_id":71325460,"comment_id":126078447,"body_markdown":"`at com.example.demo/com.example.demo.ReadShapeFile.createCircle(ReadShapeFile.java:32)`  Which line of your code is line 32?","body":"<code>at com.example.demo&#47;com.example.demo.ReadShapeFile.createCircle&zwnj;&#8203;(ReadShapeFile.java:&zwnj;&#8203;32)</code>  Which line of your code is line 32?"},{"owner":{"account_id":24430376,"reputation":1,"user_id":18355394,"display_name":"Alwin Binu"},"score":0,"creation_date":1646299908,"post_id":71325460,"comment_id":126090596,"body_markdown":"Line 32 is int diameter = Integer.parseInt(currentShape[6]);","body":"Line 32 is int diameter = Integer.parseInt(currentShape[6]);"}],"owner":{"account_id":24430376,"reputation":1,"user_id":18355394,"display_name":"Alwin Binu"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":378,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1646235936,"creation_date":1646235936,"question_id":71325460,"body_markdown":"Hi to print out values from values from a file but I am getting this error. Can anyone help point out the problem. I am using a pre made class for the exact format of the data from the file using toString. Therefore the problem is with the code I just provided and I am not sure where I have gone wrong.\r\n\r\nPlease enter a shape file to open:\r\nTwoRedCircles.txt\r\n*\r\n\r\n    Exception in Application start method\r\n    java.lang.reflect.InvocationTargetException\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n    \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n    \tat javafx.graphics/com.sun.javafx.application.LauncherImpl.launchApplicationWithArgs(LauncherImpl.java:467)\r\n    \tat javafx.graphics/com.sun.javafx.application.LauncherImpl.launchApplication(LauncherImpl.java:366)\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n    \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n    \tat java.base/sun.launcher.LauncherHelper$FXHelper.main(LauncherHelper.java:1071)\r\n    Caused by: java.lang.RuntimeException: Exception in Application start method\r\n    \tat javafx.graphics/com.sun.javafx.application.LauncherImpl.launchApplication1(LauncherImpl.java:903)\r\n    \tat javafx.graphics/com.sun.javafx.application.LauncherImpl.lambda$launchApplication$2(LauncherImpl.java:198)\r\n    \tat java.base/java.lang.Thread.run(Thread.java:833)\r\n    Caused by: java.lang.NumberFormatException: For input string: &quot;true&quot;\r\n    \tat java.base/java.lang.NumberFormatException.forInputString(NumberFormatException.java:67)\r\n    \tat java.base/java.lang.Integer.parseInt(Integer.java:668)\r\n    \tat java.base/java.lang.Integer.parseInt(Integer.java:786)\r\n    \tat com.example.demo/com.example.demo.ReadShapeFile.createCircle(ReadShapeFile.java:32)\r\n    \tat com.example.demo/com.example.demo.ReadShapeFile.readDataFile(ReadShapeFile.java:60)\r\n    \tat com.example.demo/com.example.demo.ReadShapeFile.readDataFile(ReadShapeFile.java:82)\r\n    \tat com.example.demo/com.example.demo.BouncingShapesWindow.initShapes(BouncingShapesWindow.java:56)\r\n    \tat com.example.demo/com.example.demo.BouncingShapesWindow.&lt;init&gt;(BouncingShapesWindow.java:42)\r\n    \tat com.example.demo/com.example.demo.Main.start(Main.java:43)\r\n    \tat javafx.graphics/com.sun.javafx.application.LauncherImpl.lambda$launchApplication1$9(LauncherImpl.java:849)\r\n    \tat javafx.graphics/com.sun.javafx.application.PlatformImpl.lambda$runAndWait$12(PlatformImpl.java:474)\r\n    \tat javafx.graphics/com.sun.javafx.application.PlatformImpl.lambda$runLater$10(PlatformImpl.java:447)\r\n    \tat java.base/java.security.AccessController.doPrivileged(AccessController.java:399)\r\n    \tat javafx.graphics/com.sun.javafx.application.PlatformImpl.lambda$runLater$11(PlatformImpl.java:446)\r\n    \tat javafx.graphics/com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:96)\r\n    \tat javafx.graphics/com.sun.glass.ui.win.WinApplication._runLoop(Native Method)\r\n    \tat javafx.graphics/com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:174)\r\n    \t... 1 more\r\n    Exception running application com.example.demo.Main\r\n\r\n*\r\n\r\n\r\n\r\n&gt; This is my code below.\r\n\r\n\r\n\r\n    package com.example.demo;\r\n    \r\n    \r\n    import javafx.scene.paint.Color; import java.io.*; import java.util.Scanner;\r\n\r\n    public class ReadShapeFile {\r\n\r\n\r\n\tprivate static Circle createCircle(String[] currentShape) {\r\n\t\t// &lt;px&gt; &lt;py&gt; &lt;vx&gt; &lt;vy&gt; &lt;filled?&gt; &lt;diameter&gt;&lt;r&gt; &lt;g&gt; &lt;b&gt; &lt;insertion time&gt;\r\n\t\tint px = Integer.parseInt(currentShape[1]);\r\n\t\tint py = Integer.parseInt(currentShape[2]);\r\n\t\tint vx = Integer.parseInt(currentShape[3]);\r\n\t\tint vy = Integer.parseInt(currentShape[4]);\r\n\t\tboolean filled = false;\r\n\t\tif (currentShape[5].equals(&quot;true&quot;)) {\r\n\t\t\tfilled = true;\r\n\t\t}\r\n\t\tint diameter = Integer.parseInt(currentShape[6]);\r\n\t\tint r = Integer.parseInt(currentShape[7]);\r\n\t\tint g = Integer.parseInt(currentShape[8]);\r\n\t\tint b = Integer.parseInt(currentShape[9]);\r\n\t\tColor color = Color.rgb(r, g, b);\r\n\t\tint insertionTime = Integer.parseInt(currentShape[10]);\r\n\r\n\t\treturn new Circle(insertionTime, px, py, vx, vy, diameter, color, filled);\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * Reads the data file used by the program and returns the constructed queue\r\n\t *\r\n\t * @param in the scanner of the file\r\n\t * @return the queue represented by the data file\r\n\t */\r\n\tprivate static Queue&lt;ClosedShape&gt; readDataFile(Scanner in) {\r\n\t\tQueue&lt;ClosedShape&gt; shapeQueue = new Queue&lt;ClosedShape&gt;();\r\n\r\n\t\t//read in the shape files and place them on the Queue\r\n\r\n\t\t//Right now, returning an empty Queue.  You need to change this.\r\n\r\n\t\twhile (in.hasNextLine()) {\r\n\t\t\tString[] currentShape = in.nextLine().split(&quot; &quot;);\r\n\r\n\t\t\tif (currentShape[0].equals(&quot;circle&quot;)) {\r\n\t\t\t\tClosedShape shape = createCircle(currentShape);\r\n\t\t\t\tshapeQueue.enqueue(shape);\r\n\t\t\t\tSystem.out.println(shape.toString());\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn shapeQueue;\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * Method to read the file and return a queue of shapes from this file. The\r\n\t * program should handle the file not found exception here and shut down the\r\n\t * program gracefully.\r\n\t *\r\n\t * @param filename the name of the file\r\n\t * @return the queue of shapes from the file\r\n\t */\r\n\tpublic static Queue&lt;ClosedShape&gt; readDataFile(String filename) {\r\n\t\t// HINT: You might want to open a file here.\r\n\t\tFile newFile = new File(filename);\r\n\t\ttry {\r\n\t\t\tScanner in = new Scanner(newFile); //null is not sensible. Please change\r\n\t\t\treturn ReadShapeFile.readDataFile(in);\r\n\t\t} catch (FileNotFoundException e) {\r\n\t\t\tSystem.out.print(&quot;Could not find &quot; + filename);\r\n\t\t\tSystem.exit(0);\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\n","title":"Error when trying to read in from a text file. including InvocationTargetException, .RuntimeException and NumberFormatException","body":"<p>Hi to print out values from values from a file but I am getting this error. Can anyone help point out the problem. I am using a pre made class for the exact format of the data from the file using toString. Therefore the problem is with the code I just provided and I am not sure where I have gone wrong.</p>\n<p>Please enter a shape file to open:\nTwoRedCircles.txt\n*</p>\n<pre><code>Exception in Application start method\njava.lang.reflect.InvocationTargetException\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at javafx.graphics/com.sun.javafx.application.LauncherImpl.launchApplicationWithArgs(LauncherImpl.java:467)\n    at javafx.graphics/com.sun.javafx.application.LauncherImpl.launchApplication(LauncherImpl.java:366)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at java.base/sun.launcher.LauncherHelper$FXHelper.main(LauncherHelper.java:1071)\nCaused by: java.lang.RuntimeException: Exception in Application start method\n    at javafx.graphics/com.sun.javafx.application.LauncherImpl.launchApplication1(LauncherImpl.java:903)\n    at javafx.graphics/com.sun.javafx.application.LauncherImpl.lambda$launchApplication$2(LauncherImpl.java:198)\n    at java.base/java.lang.Thread.run(Thread.java:833)\nCaused by: java.lang.NumberFormatException: For input string: &quot;true&quot;\n    at java.base/java.lang.NumberFormatException.forInputString(NumberFormatException.java:67)\n    at java.base/java.lang.Integer.parseInt(Integer.java:668)\n    at java.base/java.lang.Integer.parseInt(Integer.java:786)\n    at com.example.demo/com.example.demo.ReadShapeFile.createCircle(ReadShapeFile.java:32)\n    at com.example.demo/com.example.demo.ReadShapeFile.readDataFile(ReadShapeFile.java:60)\n    at com.example.demo/com.example.demo.ReadShapeFile.readDataFile(ReadShapeFile.java:82)\n    at com.example.demo/com.example.demo.BouncingShapesWindow.initShapes(BouncingShapesWindow.java:56)\n    at com.example.demo/com.example.demo.BouncingShapesWindow.&lt;init&gt;(BouncingShapesWindow.java:42)\n    at com.example.demo/com.example.demo.Main.start(Main.java:43)\n    at javafx.graphics/com.sun.javafx.application.LauncherImpl.lambda$launchApplication1$9(LauncherImpl.java:849)\n    at javafx.graphics/com.sun.javafx.application.PlatformImpl.lambda$runAndWait$12(PlatformImpl.java:474)\n    at javafx.graphics/com.sun.javafx.application.PlatformImpl.lambda$runLater$10(PlatformImpl.java:447)\n    at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)\n    at javafx.graphics/com.sun.javafx.application.PlatformImpl.lambda$runLater$11(PlatformImpl.java:446)\n    at javafx.graphics/com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:96)\n    at javafx.graphics/com.sun.glass.ui.win.WinApplication._runLoop(Native Method)\n    at javafx.graphics/com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:174)\n    ... 1 more\nException running application com.example.demo.Main\n</code></pre>\n<ul>\n<li></li>\n</ul>\n<blockquote>\n<p>This is my code below.</p>\n</blockquote>\n<pre><code>package com.example.demo;\n\n\nimport javafx.scene.paint.Color; import java.io.*; import java.util.Scanner;\n\npublic class ReadShapeFile {\n\n\nprivate static Circle createCircle(String[] currentShape) {\n    // &lt;px&gt; &lt;py&gt; &lt;vx&gt; &lt;vy&gt; &lt;filled?&gt; &lt;diameter&gt;&lt;r&gt; &lt;g&gt; &lt;b&gt; &lt;insertion time&gt;\n    int px = Integer.parseInt(currentShape[1]);\n    int py = Integer.parseInt(currentShape[2]);\n    int vx = Integer.parseInt(currentShape[3]);\n    int vy = Integer.parseInt(currentShape[4]);\n    boolean filled = false;\n    if (currentShape[5].equals(&quot;true&quot;)) {\n        filled = true;\n    }\n    int diameter = Integer.parseInt(currentShape[6]);\n    int r = Integer.parseInt(currentShape[7]);\n    int g = Integer.parseInt(currentShape[8]);\n    int b = Integer.parseInt(currentShape[9]);\n    Color color = Color.rgb(r, g, b);\n    int insertionTime = Integer.parseInt(currentShape[10]);\n\n    return new Circle(insertionTime, px, py, vx, vy, diameter, color, filled);\n}\n\n\n/**\n * Reads the data file used by the program and returns the constructed queue\n *\n * @param in the scanner of the file\n * @return the queue represented by the data file\n */\nprivate static Queue&lt;ClosedShape&gt; readDataFile(Scanner in) {\n    Queue&lt;ClosedShape&gt; shapeQueue = new Queue&lt;ClosedShape&gt;();\n\n    //read in the shape files and place them on the Queue\n\n    //Right now, returning an empty Queue.  You need to change this.\n\n    while (in.hasNextLine()) {\n        String[] currentShape = in.nextLine().split(&quot; &quot;);\n\n        if (currentShape[0].equals(&quot;circle&quot;)) {\n            ClosedShape shape = createCircle(currentShape);\n            shapeQueue.enqueue(shape);\n            System.out.println(shape.toString());\n        }\n    }\n    return shapeQueue;\n}\n\n\n/**\n * Method to read the file and return a queue of shapes from this file. The\n * program should handle the file not found exception here and shut down the\n * program gracefully.\n *\n * @param filename the name of the file\n * @return the queue of shapes from the file\n */\npublic static Queue&lt;ClosedShape&gt; readDataFile(String filename) {\n    // HINT: You might want to open a file here.\n    File newFile = new File(filename);\n    try {\n        Scanner in = new Scanner(newFile); //null is not sensible. Please change\n        return ReadShapeFile.readDataFile(in);\n    } catch (FileNotFoundException e) {\n        System.out.print(&quot;Could not find &quot; + filename);\n        System.exit(0);\n    }\n    return null;\n}\n</code></pre>\n<p>}</p>\n"},{"tags":["java","android"],"answers":[{"tags":[],"owner":{"account_id":5282904,"reputation":18287,"user_id":4217682,"accept_rate":50,"display_name":"snachmsm"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1646216682,"creation_date":1646216682,"answer_id":71321047,"question_id":71320919,"body_markdown":"set `LinkMovementMethod` for your `TextView`\r\n\r\n    textView.setMovementMethod(LinkMovementMethod.getInstance());\r\n\r\nbe aware that `Html.fromHtml` isn&#39;t handling all HTML tags, only few basic of them. some list and examples in [HERE](https://abhiandroid.com/ui/html). if you need more complex html parsing/drawing/handling just use `WebView` and one of `setData` methods","title":"How to recognize and select specific html element in Android?","body":"<p>set <code>LinkMovementMethod</code> for your <code>TextView</code></p>\n<pre><code>textView.setMovementMethod(LinkMovementMethod.getInstance());\n</code></pre>\n<p>be aware that <code>Html.fromHtml</code> isn't handling all HTML tags, only few basic of them. some list and examples in <a href=\"https://abhiandroid.com/ui/html\" rel=\"nofollow noreferrer\">HERE</a>. if you need more complex html parsing/drawing/handling just use <code>WebView</code> and one of <code>setData</code> methods</p>\n"}],"owner":{"account_id":21644177,"reputation":81,"user_id":17483997,"display_name":"Brad Cruise"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":83,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1646235921,"creation_date":1646216020,"question_id":71320919,"body_markdown":"in my Android application I am showing the result from a Website using API. However, this result is retrieved in html form. For example, the API sends a simple &quot;Hello World&quot; text in this form ```&lt;p&gt;Hello World&lt;/p&gt;``` or a URL link in this form ```&lt;a class=&quot;ps-media__link ps-media-link&quot; href=&quot;https://www.example.com/&quot; rel=&quot;nofollow noopener&quot; target=&quot;_blank&quot;&gt;https://www.example.com/&lt;/a&gt;``` or it may include both ```&lt;p&gt;&lt;/p&gt; and &lt;a&gt;&lt;/a&gt;``` tag inside. So, what I am trying to do is to check if the result is URL and if it is URL then it should be clickable and open with Webview(like it happens on Instagram when the user clicks on the link and shows up the website). Here is what I have tried in my code:\r\n\r\n    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.N) {\r\n                holder.postTxt.setText(Html.fromHtml(post.getPost(), Html.FROM_HTML_MODE_COMPACT));\r\n            } else {\r\n                holder.postTxt.setText(Html.fromHtml(post.getPost()));\r\n            }\r\n\r\n\r\n**EDIT:** Here is the Textview inside the xml file:\r\n\r\n    &lt;TextView\r\n                android:id=&quot;@+id/post_text&quot;\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:layout_marginLeft=&quot;25dp&quot;\r\n                android:layout_marginTop=&quot;10dp&quot;\r\n                android:layout_marginRight=&quot;25dp&quot;\r\n                android:text=&quot;Hello World&quot;\r\n                android:textColor=&quot;@color/black&quot;\r\n                android:textSize=&quot;15sp&quot;\r\n                android:textColorLink=&quot;@color/purple_500&quot;\r\n                android:clickable=&quot;true&quot;/&gt;\r\n\r\nThis method recognizes what type of html element is but it isn&#39;t clickable when it comes to links. SO, what should I do in order to make the textview clickable ONLY when it is a link? I am using Android Studio. Any answer will be appreciated, thanks in advance!!","title":"How to recognize and select specific html element in Android?","body":"<p>in my Android application I am showing the result from a Website using API. However, this result is retrieved in html form. For example, the API sends a simple &quot;Hello World&quot; text in this form <code>&lt;p&gt;Hello World&lt;/p&gt;</code> or a URL link in this form <code>&lt;a class=&quot;ps-media__link ps-media-link&quot; href=&quot;https://www.example.com/&quot; rel=&quot;nofollow noopener&quot; target=&quot;_blank&quot;&gt;https://www.example.com/&lt;/a&gt;</code> or it may include both <code>&lt;p&gt;&lt;/p&gt; and &lt;a&gt;&lt;/a&gt;</code> tag inside. So, what I am trying to do is to check if the result is URL and if it is URL then it should be clickable and open with Webview(like it happens on Instagram when the user clicks on the link and shows up the website). Here is what I have tried in my code:</p>\n<pre><code>if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.N) {\n            holder.postTxt.setText(Html.fromHtml(post.getPost(), Html.FROM_HTML_MODE_COMPACT));\n        } else {\n            holder.postTxt.setText(Html.fromHtml(post.getPost()));\n        }\n</code></pre>\n<p><strong>EDIT:</strong> Here is the Textview inside the xml file:</p>\n<pre><code>&lt;TextView\n            android:id=&quot;@+id/post_text&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:layout_marginLeft=&quot;25dp&quot;\n            android:layout_marginTop=&quot;10dp&quot;\n            android:layout_marginRight=&quot;25dp&quot;\n            android:text=&quot;Hello World&quot;\n            android:textColor=&quot;@color/black&quot;\n            android:textSize=&quot;15sp&quot;\n            android:textColorLink=&quot;@color/purple_500&quot;\n            android:clickable=&quot;true&quot;/&gt;\n</code></pre>\n<p>This method recognizes what type of html element is but it isn't clickable when it comes to links. SO, what should I do in order to make the textview clickable ONLY when it is a link? I am using Android Studio. Any answer will be appreciated, thanks in advance!!</p>\n"},{"tags":["java","spring","tomcat","intellij-idea"],"answers":[{"tags":[],"owner":{"account_id":4946914,"reputation":256,"user_id":3982034,"accept_rate":43,"display_name":"Surge"},"down_vote_count":2,"up_vote_count":11,"is_accepted":true,"score":9,"last_activity_date":1444666659,"creation_date":1444666659,"answer_id":33085734,"question_id":33055786,"body_markdown":"**Step 1.**\r\n\r\nDownload the `tomcat` with the tar.gz extension. \r\n**NB.** The `tar.gz` extention \r\n\r\n**Step 2.**\r\n\r\nUnzip the file and make sure the folder name remain `tomcat`, save it to your library.\r\n\r\n**Step 3.**\r\n\r\nAccess the preference settings on your intellijIDEA\r\n\r\n - Under Build, Execution and Deployment, select application server.\r\n - Attempt to add a new server, click `+` and select `Tomcat Server` from the drop down.\r\n - Click on the `...` elipse to select the folder you have unziped earlier into your library. \r\n - select the `tomcat` folder and boom.\r\n\r\n\r\nYou are good to go, ready for use.","title":"Warning the selected directory is not a valid tomcat home","body":"<p><strong>Step 1.</strong></p>\n\n<p>Download the <code>tomcat</code> with the tar.gz extension. \n<strong>NB.</strong> The <code>tar.gz</code> extention </p>\n\n<p><strong>Step 2.</strong></p>\n\n<p>Unzip the file and make sure the folder name remain <code>tomcat</code>, save it to your library.</p>\n\n<p><strong>Step 3.</strong></p>\n\n<p>Access the preference settings on your intellijIDEA</p>\n\n<ul>\n<li>Under Build, Execution and Deployment, select application server.</li>\n<li>Attempt to add a new server, click <code>+</code> and select <code>Tomcat Server</code> from the drop down.</li>\n<li>Click on the <code>...</code> elipse to select the folder you have unziped earlier into your library. </li>\n<li>select the <code>tomcat</code> folder and boom.</li>\n</ul>\n\n<p>You are good to go, ready for use.</p>\n"},{"tags":[],"owner":{"account_id":4095273,"reputation":1557,"user_id":3362244,"accept_rate":60,"display_name":"teuber789"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1466533386,"creation_date":1466533386,"answer_id":37951861,"question_id":33055786,"body_markdown":"I did what CallmeSurge suggested, except I had to change the following:\r\n\r\n**Step 3: Create a new Tomcat Runtime Configuration**\r\n\r\n - Select the Runtime Configurations box (top right hand corner of the screen), and select Edit Configurations.\r\n - Select the green + sign at the top left corner of the box.\r\n - Select Tomcat (you may have to expand the box to see it)\r\n - Give your new configuration a name\r\n - In the Server tab, in the Application Server box, select the tomcat folder you created in steps 1 and 2.\r\n - In the Deployment tab, select the build artifact you want to deploy. (Note: if you don&#39;t have a build artifact configured for your project, you&#39;ll have to configure one first).\r\n - Save the new configuration.\r\n\r\nNow, deploying to tomcat is as easy as selecting the runtime configuration you just created and hitting the Debug or Run arrows.","title":"Warning the selected directory is not a valid tomcat home","body":"<p>I did what CallmeSurge suggested, except I had to change the following:</p>\n\n<p><strong>Step 3: Create a new Tomcat Runtime Configuration</strong></p>\n\n<ul>\n<li>Select the Runtime Configurations box (top right hand corner of the screen), and select Edit Configurations.</li>\n<li>Select the green + sign at the top left corner of the box.</li>\n<li>Select Tomcat (you may have to expand the box to see it)</li>\n<li>Give your new configuration a name</li>\n<li>In the Server tab, in the Application Server box, select the tomcat folder you created in steps 1 and 2.</li>\n<li>In the Deployment tab, select the build artifact you want to deploy. (Note: if you don't have a build artifact configured for your project, you'll have to configure one first).</li>\n<li>Save the new configuration.</li>\n</ul>\n\n<p>Now, deploying to tomcat is as easy as selecting the runtime configuration you just created and hitting the Debug or Run arrows.</p>\n"},{"tags":[],"owner":{"account_id":2160179,"reputation":1146,"user_id":1914507,"display_name":"Stepan"},"down_vote_count":1,"up_vote_count":23,"is_accepted":false,"score":22,"last_activity_date":1484550000,"creation_date":1484550000,"answer_id":41671003,"question_id":33055786,"body_markdown":"Try selecting the `libexec` subdirectory in IntelliJ - i.e. `/usr/local/Cellar/tomcat/8.5.9/libexec`","title":"Warning the selected directory is not a valid tomcat home","body":"<p>Try selecting the <code>libexec</code> subdirectory in IntelliJ - i.e. <code>/usr/local/Cellar/tomcat/8.5.9/libexec</code></p>\n"},{"tags":[],"owner":{"account_id":7979415,"reputation":349,"user_id":6021355,"display_name":"jackson"},"down_vote_count":0,"up_vote_count":31,"is_accepted":false,"score":31,"last_activity_date":1573833705,"creation_date":1510730834,"answer_id":47301650,"question_id":33055786,"body_markdown":"If you are using **IDEA on Linux platform**, use the command:\r\n\r\n`chmod 755 -R apache-tomcat-&lt;&lt;Your-tomcat-version&gt;&gt;`\r\n\r\nThen try to restart your service again.","title":"Warning the selected directory is not a valid tomcat home","body":"<p>If you are using <strong>IDEA on Linux platform</strong>, use the command:</p>\n\n<p><code>chmod 755 -R apache-tomcat-&lt;&lt;Your-tomcat-version&gt;&gt;</code></p>\n\n<p>Then try to restart your service again.</p>\n"},{"tags":[],"owner":{"account_id":9052,"reputation":11722,"user_id":16549,"accept_rate":75,"display_name":"kervin"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1511222581,"creation_date":1511222581,"answer_id":47403163,"question_id":33055786,"body_markdown":"This recently came up for me on Ubuntu 17.04\r\n\r\nWhat worked for me\r\n\r\n    cd /var/lib/tomcat8\r\n    rmdir lib/\r\n    ln -s /usr/share/tomcat8/lib/ .\r\n    ln -s /usr/share/tomcat8/bin/ .\r\n\r\nI&#39;m not sure this is the best fix but it worked for me.  For some reason the default install left the tomcat8/lib directory empty while the real libraries are under the share directory.","title":"Warning the selected directory is not a valid tomcat home","body":"<p>This recently came up for me on Ubuntu 17.04</p>\n\n<p>What worked for me</p>\n\n<pre><code>cd /var/lib/tomcat8\nrmdir lib/\nln -s /usr/share/tomcat8/lib/ .\nln -s /usr/share/tomcat8/bin/ .\n</code></pre>\n\n<p>I'm not sure this is the best fix but it worked for me.  For some reason the default install left the tomcat8/lib directory empty while the real libraries are under the share directory.</p>\n"},{"tags":[],"owner":{"account_id":4550057,"reputation":57,"user_id":3695638,"display_name":"RDONALDSON"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1566817335,"creation_date":1566502139,"answer_id":57615962,"question_id":33055786,"body_markdown":"**Authorise permissions on Tomcat folder**:\r\n\r\n - Open tomcat location e.g. C:\\Program Files\\Apache Software Foundation\\Tomcat 9.0\r\n\r\n - Double click this folder.\r\n\r\n - Authorise permissions.\r\n\r\nNow try creating the server...","title":"Warning the selected directory is not a valid tomcat home","body":"<p><strong>Authorise permissions on Tomcat folder</strong>:</p>\n\n<ul>\n<li><p>Open tomcat location e.g. C:\\Program Files\\Apache Software Foundation\\Tomcat 9.0</p></li>\n<li><p>Double click this folder.</p></li>\n<li><p>Authorise permissions.</p></li>\n</ul>\n\n<p>Now try creating the server...</p>\n"},{"tags":[],"owner":{"account_id":17689779,"reputation":26,"user_id":12841844,"display_name":"Evgeniy"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1585227227,"creation_date":1585227227,"answer_id":60867741,"question_id":33055786,"body_markdown":"   There may be a situation where the folder will be inaccessible to the user due to lack of rights. Try to open the root folder of Tomcat and click OK to get rights to it. This worked for me.\r\n","title":"Warning the selected directory is not a valid tomcat home","body":"<p>There may be a situation where the folder will be inaccessible to the user due to lack of rights. Try to open the root folder of Tomcat and click OK to get rights to it. This worked for me.</p>\n"},{"tags":[],"owner":{"account_id":10020875,"reputation":399,"user_id":7410625,"display_name":"robivictor"},"down_vote_count":0,"up_vote_count":20,"is_accepted":false,"score":20,"last_activity_date":1631722055,"creation_date":1592198121,"answer_id":62381751,"question_id":33055786,"body_markdown":"**Problem:**\r\n\r\n[![enter image description here][1]][1]\r\n\r\nThis happens because intellijIDEA doesn&#39;t have enough permission\r\nto read and write on the tomcat home folder, this happens on linux machines.\r\n\r\n**Solution**\r\n\r\nlet your tomcat root folder = &quot;/opt/tomcat&quot;\r\nthen this command which will set the right privilege level for intellijIDEA.\r\n\r\n$ sudo chmod 755 -R /opt/tomcat\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/rEBzT.png\r\n  [2]: https://i.stack.imgur.com/n71UQ.png","title":"Warning the selected directory is not a valid tomcat home","body":"<p><strong>Problem:</strong></p>\n<p><a href=\"https://i.stack.imgur.com/rEBzT.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/rEBzT.png\" alt=\"enter image description here\" /></a></p>\n<p>This happens because intellijIDEA doesn't have enough permission\nto read and write on the tomcat home folder, this happens on linux machines.</p>\n<p><strong>Solution</strong></p>\n<p>let your tomcat root folder = &quot;/opt/tomcat&quot;\nthen this command which will set the right privilege level for intellijIDEA.</p>\n<p>$ sudo chmod 755 -R /opt/tomcat</p>\n<p><a href=\"https://i.stack.imgur.com/n71UQ.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/n71UQ.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":6835753,"reputation":11,"user_id":5257824,"display_name":"Pedro Gon&#231;alves"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1603644294,"creation_date":1603644294,"answer_id":64526256,"question_id":33055786,"body_markdown":"In Windows I just executed Intellij as administrator and it solved my problem.","title":"Warning the selected directory is not a valid tomcat home","body":"<p>In Windows I just executed Intellij as administrator and it solved my problem.</p>\n"}],"owner":{"account_id":4751960,"reputation":1059,"user_id":3841782,"display_name":"Olatunde Garuba"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":34314,"favorite_count":0,"down_vote_count":0,"up_vote_count":24,"accepted_answer_id":33085734,"answer_count":9,"score":24,"last_activity_date":1646235921,"creation_date":1444491906,"question_id":33055786,"body_markdown":"I installed Tomcat with home brew `brew install tomcat`. On Selecting Tomcat server to add a server to the application server I get this\r\n\r\n&gt; Warning the selected directory is not a valid tomcat home.\r\n\r\nHowever, running `catalina start` starts the tomcat server on my terminal.","title":"Warning the selected directory is not a valid tomcat home","body":"<p>I installed Tomcat with home brew <code>brew install tomcat</code>. On Selecting Tomcat server to add a server to the application server I get this</p>\n\n<blockquote>\n  <p>Warning the selected directory is not a valid tomcat home.</p>\n</blockquote>\n\n<p>However, running <code>catalina start</code> starts the tomcat server on my terminal.</p>\n"},{"tags":["java","sql","jooq"],"comments":[{"owner":{"account_id":2094057,"reputation":506072,"user_id":1863229,"accept_rate":58,"display_name":"Tim Biegeleisen"},"score":0,"creation_date":1499403771,"post_id":44962787,"comment_id":76900744,"body_markdown":"You might have to use a raw native query here.  The `likeRegex()` method may only accept the pattern.  This would make sense because it should be exposed as being DB independent.","body":"You might have to use a raw native query here.  The <code>likeRegex()</code> method may only accept the pattern.  This would make sense because it should be exposed as being DB independent."},{"owner":{"account_id":874712,"reputation":19505,"user_id":924597,"accept_rate":79,"display_name":"Shorn"},"score":0,"creation_date":1499406755,"post_id":44962787,"comment_id":76901747,"body_markdown":"@TimBiegeleisen Good idea - do you know if that can be done with JOOQ at the condition level?  I don&#39;t want to turn this thing into a complete native query because it would get quite complex (better to stick with the lowercase workaround I think).","body":"@TimBiegeleisen Good idea - do you know if that can be done with JOOQ at the condition level?  I don&#39;t want to turn this thing into a complete native query because it would get quite complex (better to stick with the lowercase workaround I think)."},{"owner":{"account_id":2094057,"reputation":506072,"user_id":1863229,"accept_rate":58,"display_name":"Tim Biegeleisen"},"score":0,"creation_date":1499407091,"post_id":44962787,"comment_id":76901871,"body_markdown":"Here&#39;s the thing: If JOOQ is sitting on top of JDBC, then there may not be a way to do this, because making a regex case insensitive in Postgres is a DB specific thing.","body":"Here&#39;s the thing: If JOOQ is sitting on top of JDBC, then there may not be a way to do this, because making a regex case insensitive in Postgres is a DB specific thing."},{"owner":{"account_id":247217,"reputation":213455,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"score":3,"creation_date":1499412496,"post_id":44962787,"comment_id":76904730,"body_markdown":"@TimBiegeleisen: Hold my beer ;)","body":"@TimBiegeleisen: Hold my beer ;)"}],"answers":[{"tags":[],"owner":{"account_id":247217,"reputation":213455,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1499419414,"creation_date":1499412703,"answer_id":44965037,"question_id":44962787,"body_markdown":"If ever the jOOQ API is missing vendor-specific functionality, the answer is [&quot;plain SQL&quot;][1]. In your case, simply write this:\r\n\r\n### PostgreSQL-specific solution\r\n\r\n    Condition condition = DSL.trueCondition();\r\n    if( isNotBlank(email) ){\r\n      condition = condition.and(&quot;{0} ~* {1}&quot;, APP_USER.EMAIL, DSL.val(email));\r\n    }\r\n\r\nThe method [`Condition.and(String, QueryPart...)`][2] is just convenience for creating an explicit plain SQL `Condition` through [`DSL.condition(String, QueryPart...)`][3]:\r\n\r\n    Condition condition = DSL.trueCondition();\r\n    if( isNotBlank(email) ){\r\n      condition = condition.and(DSL.condition(&quot;{0} ~* {1}&quot;, APP_USER.EMAIL, DSL.val(email)));\r\n    }\r\n\r\n### Vendor-agnostic solution\r\n\r\nIf you want to be vendor-agnostic, you&#39;d have to wrap the above code in your own utility and resort to using a [`CustomCondition`][4]\r\n\r\n    public static Condition caseInsensitiveLikeRegex(Field&lt;String&gt; field, String regex) {\r\n        return new CustomCondition() {\r\n            @Override\r\n            public void accept(Context&lt;?&gt; ctx) {\r\n                if (ctx.family() == POSTGRES)\r\n                    ctx.visit(DSL.condition(&quot;{0} ~* {1}&quot;, field, DSL.val(regex));\r\n                else\r\n                    ctx.visit(field.lower().likeRegex(regex.toLowerCase()));\r\n            }\r\n        }\r\n    }\r\n\r\nThe `regex.toLowerCase()` call is not 100% correct, of course, as it lower cases both the regex content, as well as the escaped patterns, such as `\\B` for backslash, but you get the idea.\r\n\r\n\r\n  [1]: https://www.jooq.org/doc/latest/manual/sql-building/plain-sql/\r\n  [2]: https://www.jooq.org/javadoc/latest/org/jooq/Condition.html#and-java.lang.String-org.jooq.QueryPart...-\r\n  [3]: https://www.jooq.org/javadoc/latest/org/jooq/impl/DSL.html#condition-java.lang.String-org.jooq.QueryPart...-\r\n  [4]: https://www.jooq.org/javadoc/latest/org/jooq/impl/CustomCondition.html","title":"Case insensitive regex with Postgres and JOOQ?","body":"<p>If ever the jOOQ API is missing vendor-specific functionality, the answer is <a href=\"https://www.jooq.org/doc/latest/manual/sql-building/plain-sql/\" rel=\"nofollow noreferrer\">\"plain SQL\"</a>. In your case, simply write this:</p>\n\n<h3>PostgreSQL-specific solution</h3>\n\n<pre><code>Condition condition = DSL.trueCondition();\nif( isNotBlank(email) ){\n  condition = condition.and(\"{0} ~* {1}\", APP_USER.EMAIL, DSL.val(email));\n}\n</code></pre>\n\n<p>The method <a href=\"https://www.jooq.org/javadoc/latest/org/jooq/Condition.html#and-java.lang.String-org.jooq.QueryPart...-\" rel=\"nofollow noreferrer\"><code>Condition.and(String, QueryPart...)</code></a> is just convenience for creating an explicit plain SQL <code>Condition</code> through <a href=\"https://www.jooq.org/javadoc/latest/org/jooq/impl/DSL.html#condition-java.lang.String-org.jooq.QueryPart...-\" rel=\"nofollow noreferrer\"><code>DSL.condition(String, QueryPart...)</code></a>:</p>\n\n<pre><code>Condition condition = DSL.trueCondition();\nif( isNotBlank(email) ){\n  condition = condition.and(DSL.condition(\"{0} ~* {1}\", APP_USER.EMAIL, DSL.val(email)));\n}\n</code></pre>\n\n<h3>Vendor-agnostic solution</h3>\n\n<p>If you want to be vendor-agnostic, you'd have to wrap the above code in your own utility and resort to using a <a href=\"https://www.jooq.org/javadoc/latest/org/jooq/impl/CustomCondition.html\" rel=\"nofollow noreferrer\"><code>CustomCondition</code></a></p>\n\n<pre><code>public static Condition caseInsensitiveLikeRegex(Field&lt;String&gt; field, String regex) {\n    return new CustomCondition() {\n        @Override\n        public void accept(Context&lt;?&gt; ctx) {\n            if (ctx.family() == POSTGRES)\n                ctx.visit(DSL.condition(\"{0} ~* {1}\", field, DSL.val(regex));\n            else\n                ctx.visit(field.lower().likeRegex(regex.toLowerCase()));\n        }\n    }\n}\n</code></pre>\n\n<p>The <code>regex.toLowerCase()</code> call is not 100% correct, of course, as it lower cases both the regex content, as well as the escaped patterns, such as <code>\\B</code> for backslash, but you get the idea.</p>\n"},{"tags":[],"owner":{"account_id":24430507,"reputation":1,"user_id":18355504,"display_name":"Deviprasad Shetty"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646235804,"creation_date":1646235804,"answer_id":71325429,"question_id":44962787,"body_markdown":"You can also use this\r\n\r\n    condition=condition.and(APP_USER.EMAIL.likeIgnoreCase(&quot;%&quot;+email+&quot;%&quot;));\r\n\r\n\r\n","title":"Case insensitive regex with Postgres and JOOQ?","body":"<p>You can also use this</p>\n<pre><code>condition=condition.and(APP_USER.EMAIL.likeIgnoreCase(&quot;%&quot;+email+&quot;%&quot;));\n</code></pre>\n"}],"owner":{"account_id":874712,"reputation":19505,"user_id":924597,"accept_rate":79,"display_name":"Shorn"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1524,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":44965037,"answer_count":2,"score":5,"last_activity_date":1646235804,"creation_date":1499403220,"question_id":44962787,"body_markdown":"I currently use this code with JOOQ:\r\n\r\n    Condition condition = DSL.trueCondition();\r\n    if( isNotBlank(email) ){\r\n      condition = condition.and(APP_USER.EMAIL.likeRegex(email));\r\n    }\r\n\r\nThat ends up issuing Postgres specific SQL that does the regex match in the DB:\r\n\r\n    app_user.email ~ &#39;{email regex}&#39;\r\n\r\nIs it possible to get JOOQ to issue the [case insensitive][1] version: `app_user.email ~* &#39;{email regex}&#39;`?\r\n\r\n----------\r\n\r\n\r\nMy current workaround is to use this code:\r\n\r\n    if( isNotBlank(email) ){\r\n      condition = condition.and(\r\n        APP_USER.EMAIL.lower().likeRegex(email.toLowerCase()) );\r\n    }\r\n\r\n  [1]: https://www.postgresql.org/docs/9.1/static/functions-matching.html#FUNCTIONS-POSIX-REGEXP","title":"Case insensitive regex with Postgres and JOOQ?","body":"<p>I currently use this code with JOOQ:</p>\n\n<pre><code>Condition condition = DSL.trueCondition();\nif( isNotBlank(email) ){\n  condition = condition.and(APP_USER.EMAIL.likeRegex(email));\n}\n</code></pre>\n\n<p>That ends up issuing Postgres specific SQL that does the regex match in the DB:</p>\n\n<pre><code>app_user.email ~ '{email regex}'\n</code></pre>\n\n<p>Is it possible to get JOOQ to issue the <a href=\"https://www.postgresql.org/docs/9.1/static/functions-matching.html#FUNCTIONS-POSIX-REGEXP\" rel=\"nofollow noreferrer\">case insensitive</a> version: <code>app_user.email ~* '{email regex}'</code>?</p>\n\n<hr>\n\n<p>My current workaround is to use this code:</p>\n\n<pre><code>if( isNotBlank(email) ){\n  condition = condition.and(\n    APP_USER.EMAIL.lower().likeRegex(email.toLowerCase()) );\n}\n</code></pre>\n"},{"tags":["java","spring-boot","graphql","newrelic","apm"],"comments":[{"owner":{"account_id":3019489,"reputation":927,"user_id":2560858,"accept_rate":6,"display_name":"Rahul Saini"},"score":0,"creation_date":1642401481,"post_id":66180090,"comment_id":125051632,"body_markdown":"@Micheal Have you got this answer? actually I have same question didn&#39;t get any solution also for the Node application with graphQL","body":"@Micheal Have you got this answer? actually I have same question didn&#39;t get any solution also for the Node application with graphQL"},{"owner":{"account_id":87650,"reputation":1185,"user_id":242925,"accept_rate":86,"display_name":"Todd W Crone"},"score":0,"creation_date":1646235578,"post_id":66180090,"comment_id":126073902,"body_markdown":"Node is a little different.  I&#39;ll see if I can find documentation but I think Andr&#233; is going to post a link to some hopefully helpful documentation for the Java version soon.","body":"Node is a little different.  I&#39;ll see if I can find documentation but I think Andr&#233; is going to post a link to some hopefully helpful documentation for the Java version soon."},{"owner":{"account_id":87650,"reputation":1185,"user_id":242925,"accept_rate":86,"display_name":"Todd W Crone"},"score":0,"creation_date":1646235633,"post_id":66180090,"comment_id":126073934,"body_markdown":"@RahulSaini perhaps it might make sense to ask a similar question with Node tags etc. if possible so its easier to find.","body":"@RahulSaini perhaps it might make sense to ask a similar question with Node tags etc. if possible so its easier to find."},{"owner":{"account_id":87650,"reputation":1185,"user_id":242925,"accept_rate":86,"display_name":"Todd W Crone"},"score":0,"creation_date":1646235706,"post_id":66180090,"comment_id":126073977,"body_markdown":"Tag me or whatever on the Node question and I&#39;ll get someone from the Node team to answer or I&#39;ll find the information and and answer for you.","body":"Tag me or whatever on the Node question and I&#39;ll get someone from the Node team to answer or I&#39;ll find the information and and answer for you."}],"answers":[{"tags":[],"owner":{"account_id":2037566,"reputation":305,"user_id":1819539,"display_name":"Oscar Jiang"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1614067063,"creation_date":1614067063,"answer_id":66329159,"question_id":66180090,"body_markdown":"You can use an AOP to set transaction name base on graphql method. It will look like below.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/G4pm8.png","title":"GraphQL Query resolvers as separate Web transactions","body":"<p>You can use an AOP to set transaction name base on graphql method. It will look like below.</p>\n<p><a href=\"https://i.stack.imgur.com/G4pm8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/G4pm8.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":91652,"reputation":458,"user_id":251542,"display_name":"Andr&#233; Onuki"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1646235506,"creation_date":1646235506,"answer_id":71325370,"question_id":66180090,"body_markdown":"The New Relic Java agent starting with version 7.4.0 (Oct 2021) has auto-instrumentation for GraphQL. Use 7.4.3 or higher though.\r\n\r\nWith it the transactions are going to be named based on the query.\r\n\r\nCheck the [documentation][1].\r\n\r\n\r\n  [1]: https://github.com/newrelic/newrelic-java-agent/tree/main/instrumentation/graphql-java-16.2","title":"GraphQL Query resolvers as separate Web transactions","body":"<p>The New Relic Java agent starting with version 7.4.0 (Oct 2021) has auto-instrumentation for GraphQL. Use 7.4.3 or higher though.</p>\n<p>With it the transactions are going to be named based on the query.</p>\n<p>Check the <a href=\"https://github.com/newrelic/newrelic-java-agent/tree/main/instrumentation/graphql-java-16.2\" rel=\"nofollow noreferrer\">documentation</a>.</p>\n"}],"owner":{"account_id":17194705,"reputation":657,"user_id":12447757,"display_name":"Michael George"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":465,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1646235796,"creation_date":1613170615,"question_id":66180090,"body_markdown":"I have a Java Spring Boot service exposing GraphQL API. NewRelic identify all the queries as ```configuredGraphQLHttpServlet``` Web transaction as all of them are exposed via a single /graphql API . How can we track each GraphQL query resolver as different web transactions?","title":"GraphQL Query resolvers as separate Web transactions","body":"<p>I have a Java Spring Boot service exposing GraphQL API. NewRelic identify all the queries as <code>configuredGraphQLHttpServlet</code> Web transaction as all of them are exposed via a single /graphql API . How can we track each GraphQL query resolver as different web transactions?</p>\n"},{"tags":["java","validation","constraints"],"answers":[{"tags":[],"owner":{"account_id":1190548,"reputation":4725,"user_id":1163457,"accept_rate":91,"display_name":"dtrunk"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1373437000,"creation_date":1373375705,"answer_id":17549144,"question_id":17542694,"body_markdown":"One could use `Object` and check its type with `instanceof`:\r\n\r\n    public class OptionsValidator implements ConstraintValidator&lt;Options, Object&gt; {\r\n    \tprivate List&lt;String&gt; values;\r\n    \tprivate boolean optional;\r\n    \r\n    \t@Override\r\n    \tpublic void initialize(Options params) {\r\n    \t\tvalues = Arrays.asList(params.values().data);\r\n    \t\toptional = params.optional();\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic boolean isValid(Object value, ConstraintValidatorContext constraintValidatorContext) {\r\n    \t\tif (optional &amp;&amp; value == null) {\r\n    \t\t\treturn true;\r\n    \t\t}\r\n    \r\n    \t\tif (value instanceof String[]) {\r\n    \t\t\tString[] valArray = (String[]) value;\r\n    \t\t\tif (!optional &amp;&amp; valArray.length == 0) {\r\n    \t\t\t\treturn false;\r\n    \t\t\t}\r\n    \r\n    \t\t\tfor (String val : valArray) {\r\n    \t\t\t\tif (!values.contains(val)) {\r\n    \t\t\t\t\treturn false;\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n\r\n    \t\t\treturn true;\r\n    \t\t} else if (value instanceof String) {\r\n    \t\t\tString val = (String) value;\r\n    \t\t\tif (optional &amp;&amp; val.trim() == &quot;&quot;) {\r\n    \t\t\t\treturn true;\r\n    \t\t\t}\r\n    \r\n    \t\t\treturn val != null &amp;&amp; values.contains(val);\r\n    \t\t}\r\n    \r\n    \t\treturn false;\r\n    \t}\r\n    }","title":"Custom Constraint(Validator) for different Types","body":"<p>One could use <code>Object</code> and check its type with <code>instanceof</code>:</p>\n\n<pre><code>public class OptionsValidator implements ConstraintValidator&lt;Options, Object&gt; {\n    private List&lt;String&gt; values;\n    private boolean optional;\n\n    @Override\n    public void initialize(Options params) {\n        values = Arrays.asList(params.values().data);\n        optional = params.optional();\n    }\n\n    @Override\n    public boolean isValid(Object value, ConstraintValidatorContext constraintValidatorContext) {\n        if (optional &amp;&amp; value == null) {\n            return true;\n        }\n\n        if (value instanceof String[]) {\n            String[] valArray = (String[]) value;\n            if (!optional &amp;&amp; valArray.length == 0) {\n                return false;\n            }\n\n            for (String val : valArray) {\n                if (!values.contains(val)) {\n                    return false;\n                }\n            }\n\n            return true;\n        } else if (value instanceof String) {\n            String val = (String) value;\n            if (optional &amp;&amp; val.trim() == \"\") {\n                return true;\n            }\n\n            return val != null &amp;&amp; values.contains(val);\n        }\n\n        return false;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5752727,"reputation":1642,"user_id":4541832,"display_name":"Maciej Lach"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1646235770,"creation_date":1646235770,"answer_id":71325420,"question_id":17542694,"body_markdown":"You can reuse the same annotation to validate different classes by providing more than one ConstraintValidators implementing the constraint. In the `@Constraint` annotation definition fill the `validatedBy` all applicable classes:\r\n\r\n    @Target( { METHOD, FIELD, ANNOTATION_TYPE })\r\n    @Retention(RUNTIME)\r\n    @Constraint(validatedBy = {OptionsValidator.class, OptionsStringArrayValidator.class})\r\n    @Documented\r\n    public @interface Options {\r\n       ...\r\n    }\r\n\r\nand create corresponding implementations:\r\n\r\n    public class OptionsValidator implements ConstraintValidator&lt;Options, String&gt; {...}\r\n    public class OptionsStringArrayValidator implements ConstraintValidator&lt;Options, String[]&gt; {...}","title":"Custom Constraint(Validator) for different Types","body":"<p>You can reuse the same annotation to validate different classes by providing more than one ConstraintValidators implementing the constraint. In the <code>@Constraint</code> annotation definition fill the <code>validatedBy</code> all applicable classes:</p>\n<pre><code>@Target( { METHOD, FIELD, ANNOTATION_TYPE })\n@Retention(RUNTIME)\n@Constraint(validatedBy = {OptionsValidator.class, OptionsStringArrayValidator.class})\n@Documented\npublic @interface Options {\n   ...\n}\n</code></pre>\n<p>and create corresponding implementations:</p>\n<pre><code>public class OptionsValidator implements ConstraintValidator&lt;Options, String&gt; {...}\npublic class OptionsStringArrayValidator implements ConstraintValidator&lt;Options, String[]&gt; {...}\n</code></pre>\n"}],"owner":{"account_id":1190548,"reputation":4725,"user_id":1163457,"accept_rate":91,"display_name":"dtrunk"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3764,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":71325420,"answer_count":2,"score":3,"last_activity_date":1646235770,"creation_date":1373355744,"question_id":17542694,"body_markdown":"On the frontend side there&#39;s a form containing a selectbox filled with some options. The model contains a field which will be validated by my custom constraint:\r\n\r\n    private @Options(values=OptionKeys.SALUTATIONS) String salutation;\r\n\r\nWhich works great. Now I would like to have checkboxes or a multi value selectbox on the frontend side which uses the following snippet:\r\n\r\n    private @Options(values=OptionKeys.INTERESTS, optional=true) String[] interests;\r\n\r\nHere&#39;s the constraint interface and the validator code:\r\n\r\n    @Target( { METHOD, FIELD, ANNOTATION_TYPE })\r\n    @Retention(RUNTIME)\r\n    @Constraint(validatedBy = OptionsValidator.class)\r\n    @Documented\r\n    public @interface Options {\r\n        String message() default &quot;{com.example.web.form.constraints.Options.message}&quot;;\r\n        Class&lt;? extends Payload&gt;[] payload() default {};\r\n        Class&lt;?&gt;[] groups() default {};\r\n        boolean optional() default false;\r\n        OptionKeys values();\r\n    }\r\n    \r\n    public class OptionsValidator implements ConstraintValidator&lt;Options, String&gt; {\r\n    \r\n        private List&lt;String&gt; values;\r\n        private boolean optional;\r\n    \r\n        @Override\r\n        public void initialize(Options params) {\r\n            values = Arrays.asList(params.values().data);\r\n            optional = params.optional();\r\n        }\r\n    \r\n        @Override\r\n        public boolean isValid(String value, ConstraintValidatorContext constraintValidatorContext) {\r\n            if (optional &amp;&amp; StringUtils.isBlank(value)) {\r\n                return true;\r\n            }\r\n    \r\n            return value != null &amp;&amp; values.contains(value);\r\n        }\r\n    \r\n    }\r\n\r\n    public static enum OptionKeys {\r\n    \tSALUTATIONS(new String[] {\r\n    \t\t\t&quot;m&quot;,\r\n    \t\t\t&quot;f&quot;\r\n    \t}),\r\n    \r\n    \tINTERESTS(new String[] {\r\n    \t\t\t&quot;dummy&quot;\r\n    \t});\r\n    \r\n    \tpublic final String[] data;\r\n    \tOptionKeys(String[] data) {\r\n    \t\tthis.data = data;\r\n    \t}\r\n    }\r\n\r\nIs it possible to extend the validator somehow to also check `String[]` values or do I have to write another one (e.g. `@MultiOptions`)?","title":"Custom Constraint(Validator) for different Types","body":"<p>On the frontend side there's a form containing a selectbox filled with some options. The model contains a field which will be validated by my custom constraint:</p>\n\n<pre><code>private @Options(values=OptionKeys.SALUTATIONS) String salutation;\n</code></pre>\n\n<p>Which works great. Now I would like to have checkboxes or a multi value selectbox on the frontend side which uses the following snippet:</p>\n\n<pre><code>private @Options(values=OptionKeys.INTERESTS, optional=true) String[] interests;\n</code></pre>\n\n<p>Here's the constraint interface and the validator code:</p>\n\n<pre><code>@Target( { METHOD, FIELD, ANNOTATION_TYPE })\n@Retention(RUNTIME)\n@Constraint(validatedBy = OptionsValidator.class)\n@Documented\npublic @interface Options {\n    String message() default \"{com.example.web.form.constraints.Options.message}\";\n    Class&lt;? extends Payload&gt;[] payload() default {};\n    Class&lt;?&gt;[] groups() default {};\n    boolean optional() default false;\n    OptionKeys values();\n}\n\npublic class OptionsValidator implements ConstraintValidator&lt;Options, String&gt; {\n\n    private List&lt;String&gt; values;\n    private boolean optional;\n\n    @Override\n    public void initialize(Options params) {\n        values = Arrays.asList(params.values().data);\n        optional = params.optional();\n    }\n\n    @Override\n    public boolean isValid(String value, ConstraintValidatorContext constraintValidatorContext) {\n        if (optional &amp;&amp; StringUtils.isBlank(value)) {\n            return true;\n        }\n\n        return value != null &amp;&amp; values.contains(value);\n    }\n\n}\n\npublic static enum OptionKeys {\n    SALUTATIONS(new String[] {\n            \"m\",\n            \"f\"\n    }),\n\n    INTERESTS(new String[] {\n            \"dummy\"\n    });\n\n    public final String[] data;\n    OptionKeys(String[] data) {\n        this.data = data;\n    }\n}\n</code></pre>\n\n<p>Is it possible to extend the validator somehow to also check <code>String[]</code> values or do I have to write another one (e.g. <code>@MultiOptions</code>)?</p>\n"},{"tags":["java","spring","cucumber","configurationproperty"],"comments":[{"owner":{"account_id":7955034,"reputation":2789,"user_id":6004650,"accept_rate":80,"display_name":"MikeJRamsey56"},"score":0,"creation_date":1531167970,"post_id":51248332,"comment_id":89485964,"body_markdown":"You are missing @ContextConfiguration(...)  on your step definitions class declaration.  See for example [QandA](https://stackoverflow.com/questions/37859073/cucumber-java-with-spring-boot-integration-spring-autowired-throws-nullpointe)","body":"You are missing @ContextConfiguration(...)  on your step definitions class declaration.  See for example <a href=\"https://stackoverflow.com/questions/37859073/cucumber-java-with-spring-boot-integration-spring-autowired-throws-nullpointe\">QandA</a>"},{"owner":{"account_id":5417035,"reputation":112,"user_id":4311916,"display_name":"Can Bezmen"},"score":0,"creation_date":1531200782,"post_id":51248332,"comment_id":89494257,"body_markdown":"I have already seen that answer but It doesn&#39;t work. @SpringBootTest also initialize spring context but idea give the error that I explained above..","body":"I have already seen that answer but It doesn&#39;t work. @SpringBootTest also initialize spring context but idea give the error that I explained above.."},{"owner":{"account_id":13139344,"reputation":955,"user_id":9491394,"display_name":"MangduYogii"},"score":0,"creation_date":1554901260,"post_id":51248332,"comment_id":97920348,"body_markdown":"In that property configuration class include @ConfigurationProperties(prefix = &quot;application.yaml&quot;) or else you can use @TestPropertySource(&quot;classpath:application.yaml&quot;) in the SomeSteps Class which is your @SpringBootTest class","body":"In that property configuration class include @ConfigurationProperties(prefix = &quot;application.yaml&quot;) or else you can use @TestPropertySource(&quot;classpath:application.yaml&quot;) in the SomeSteps Class which is your @SpringBootTest class"}],"answers":[{"tags":[],"owner":{"account_id":313594,"reputation":2936,"user_id":628318,"display_name":"drekbour"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1646235568,"creation_date":1646235568,"answer_id":71325381,"question_id":51248332,"body_markdown":"Newer Spring Boot auto-enables `@ConfigurationProperties` so a vanilla `@SpringBootTest` just works.  Through cucumber-junit .. the same thing _doesn&#39;t_ work and must be configured &quot;the old way&quot; by adding `@EnableConfigurationProperties` onto your test-step context.\r\n\r\nCucumber 7 example:\r\n```java\r\n@CucumberContextConfiguration\r\n@EnableConfigurationProperties // &lt;&lt;&lt; Add this\r\n@SpringBootTest\r\n```","title":"Cucumber Spring Test @ConfigurationProperties not injecting properties to fields of object","body":"<p>Newer Spring Boot auto-enables <code>@ConfigurationProperties</code> so a vanilla <code>@SpringBootTest</code> just works.  Through cucumber-junit .. the same thing <em>doesn't</em> work and must be configured &quot;the old way&quot; by adding <code>@EnableConfigurationProperties</code> onto your test-step context.</p>\n<p>Cucumber 7 example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@CucumberContextConfiguration\n@EnableConfigurationProperties // &lt;&lt;&lt; Add this\n@SpringBootTest\n</code></pre>\n"}],"owner":{"account_id":5417035,"reputation":112,"user_id":4311916,"display_name":"Can Bezmen"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2460,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1646235568,"creation_date":1531147735,"question_id":51248332,"body_markdown":"I develop springboot + cucumber and selenium based test atuomation.\r\nMy spring cucumber infrastructure formed from https://github.com/cucumber/cucumber-jvm/tree/master/spring. \r\n\r\n    @RunWith(Cucumber.class)\r\n    @CucumberOptions(\r\n        plugin = &quot;json:out/cucumber.json&quot;,\r\n        features = {&quot;classpath:features&quot;},\r\n        glue = {&quot;my.package&quot;})\r\n    public class SeleniumCukes{}\r\n\r\nMy property class is\r\n\r\n    @Data\r\n    @Configuration\r\n    @ConfigurationProperties(prefix = &quot;application&quot;)\r\n    public class ApplicationProperty {\r\n        private String baseUrl;\r\n    }\r\n\r\nMy application.yml is \r\n\r\n    application:\r\n       base-url: https://www.google.com/\r\n\r\nMy Step Definition is \r\n\r\n    public class SomeStep{\r\n       @Autowired\r\n       private SomePage somePage;\r\n       \r\n       @Autowired\r\n       private ApplicationProperty applicationProperty;\r\n       \r\n       @Given(&quot;^Go to Some Page$&quot;)\r\n       public void catalogUserIsOnTheLoginPage() throws Throwable {\r\n           somePage.navigateTo(&quot;some url&quot;);\r\n           applicationProperty.getBaseUrl(); //Cucumber spring do not inject configuration property here.\r\n       }\r\n       ...etc\r\n    }\r\n\r\nWhen I annotate my step definition with @SpringBootTest\r\n\r\n    @SpringBootTest\r\n    public class SomeStep{\r\n       @Autowired\r\n       private SomePage somePage;\r\n       \r\n       @Autowired\r\n       private ApplicationProperty applicationProperty;\r\n       \r\n       @Given(&quot;^Go to Some Page$&quot;)\r\n       public void catalogUserIsOnTheLoginPage() throws Throwable {\r\n           somePage.navigateTo(&quot;some url&quot;);\r\n           applicationProperty.getBaseUrl(); //Cucumber spring do inject configuration property here.\r\n       }\r\n       ...etc\r\n       \r\n    }\r\nNow spring inject application property but IntelliJ give me an error:\r\ncould not autowire. no beans &#39;somePage&#39; of type found .\r\n\r\ndependencies are: \r\n\r\n    dependencies {\r\n        compile(&#39;org.springframework.boot:spring-boot-starter&#39;)\r\n        compile(&#39;org.seleniumhq.selenium:selenium-server:3.13.0&#39;)\r\n        compile(&#39;org.projectlombok:lombok&#39;)\r\n        testCompile(&#39;org.springframework.boot:spring-boot-starter-test&#39;)\r\n        testCompile(&#39;io.cucumber:cucumber-java:2.4.0&#39;)\r\n        testCompile(&#39;io.cucumber:cucumber-junit:2.4.0&#39;)\r\n        testCompile(&#39;io.cucumber:cucumber-spring:2.4.0&#39;)\r\n        testCompile(&#39;org.springframework:spring-tx&#39;)\r\n}\r\nSpring boot version is 2.0.3.RELEASE","title":"Cucumber Spring Test @ConfigurationProperties not injecting properties to fields of object","body":"<p>I develop springboot + cucumber and selenium based test atuomation.\nMy spring cucumber infrastructure formed from <a href=\"https://github.com/cucumber/cucumber-jvm/tree/master/spring\" rel=\"nofollow noreferrer\">https://github.com/cucumber/cucumber-jvm/tree/master/spring</a>. </p>\n\n<pre><code>@RunWith(Cucumber.class)\n@CucumberOptions(\n    plugin = \"json:out/cucumber.json\",\n    features = {\"classpath:features\"},\n    glue = {\"my.package\"})\npublic class SeleniumCukes{}\n</code></pre>\n\n<p>My property class is</p>\n\n<pre><code>@Data\n@Configuration\n@ConfigurationProperties(prefix = \"application\")\npublic class ApplicationProperty {\n    private String baseUrl;\n}\n</code></pre>\n\n<p>My application.yml is </p>\n\n<pre><code>application:\n   base-url: https://www.google.com/\n</code></pre>\n\n<p>My Step Definition is </p>\n\n<pre><code>public class SomeStep{\n   @Autowired\n   private SomePage somePage;\n\n   @Autowired\n   private ApplicationProperty applicationProperty;\n\n   @Given(\"^Go to Some Page$\")\n   public void catalogUserIsOnTheLoginPage() throws Throwable {\n       somePage.navigateTo(\"some url\");\n       applicationProperty.getBaseUrl(); //Cucumber spring do not inject configuration property here.\n   }\n   ...etc\n}\n</code></pre>\n\n<p>When I annotate my step definition with @SpringBootTest</p>\n\n<pre><code>@SpringBootTest\npublic class SomeStep{\n   @Autowired\n   private SomePage somePage;\n\n   @Autowired\n   private ApplicationProperty applicationProperty;\n\n   @Given(\"^Go to Some Page$\")\n   public void catalogUserIsOnTheLoginPage() throws Throwable {\n       somePage.navigateTo(\"some url\");\n       applicationProperty.getBaseUrl(); //Cucumber spring do inject configuration property here.\n   }\n   ...etc\n\n}\n</code></pre>\n\n<p>Now spring inject application property but IntelliJ give me an error:\ncould not autowire. no beans 'somePage' of type found .</p>\n\n<p>dependencies are: </p>\n\n<pre><code>dependencies {\n    compile('org.springframework.boot:spring-boot-starter')\n    compile('org.seleniumhq.selenium:selenium-server:3.13.0')\n    compile('org.projectlombok:lombok')\n    testCompile('org.springframework.boot:spring-boot-starter-test')\n    testCompile('io.cucumber:cucumber-java:2.4.0')\n    testCompile('io.cucumber:cucumber-junit:2.4.0')\n    testCompile('io.cucumber:cucumber-spring:2.4.0')\n    testCompile('org.springframework:spring-tx')\n</code></pre>\n\n<p>}\nSpring boot version is 2.0.3.RELEASE</p>\n"},{"tags":["java","arrays"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1646276242,"post_id":71324916,"comment_id":126085395,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"answers":[{"tags":[],"owner":{"account_id":15777655,"reputation":1762,"user_id":11385052,"display_name":"Ryan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646235270,"creation_date":1646235270,"answer_id":71325292,"question_id":71324916,"body_markdown":"Here&#39;s how I would do it.  First, create a class to handle your bounds objects:\r\n\r\n    public static class Bounds {\r\n\t\tprivate int lowerBounds;\r\n\t\tprivate int upperBounds;\r\n\t\tprivate int count = 0;\r\n\t\t\r\n\t\tpublic Bounds(int low, int high) {\r\n\t\t\tlowerBounds = low;\r\n\t\t\tupperBounds = high;\r\n\t\t}\r\n\t\t\r\n\t\tpublic int getLowerBounds() {\r\n\t\t\treturn lowerBounds;\r\n\t\t}\r\n\r\n\t\tpublic int getUpperBounds() {\r\n\t\t\treturn upperBounds;\r\n\t\t}\r\n\r\n\t\tpublic void checkValue(int value) {\r\n\t\t\tif (lowerBounds &lt;= value &amp;&amp; value &lt; upperBounds) {\r\n\t\t\t\tcount++;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tpublic String toString() {\r\n\t\t\treturn lowerBounds + &quot;\\t\\t&quot; + upperBounds + &quot;\\t\\t\\t&quot; + count;\r\n\t\t}\r\n\t}\r\n\r\nNotice, this also handles string output.\r\n\r\nThen initialize your bounds.  I&#39;m not following exactly your bounds, but you can fix that to do what you need:\r\n\r\n    List&lt;Bounds&gt; boundsList= new ArrayList&lt;&gt;();\r\n    for (int i = 0; i &lt; 100; i+=10) {\r\n    \tboundsList.add(new Bounds(i, i+9));\r\n    }\r\n\r\nThen you can do your calculations\r\n\r\n     for (int value : values) {\r\n    \tfor (Bounds bounds : boundsList) {\r\n    \t\tbounds.checkValue(value);\r\n    \t}\r\n    }\r\n\r\nThen you can output:\r\n\r\n    for (Bounds bounds : boundsList) {\r\n    \tSystem.out.println(bounds);\r\n    }","title":"How to get array elements in frequency in between two array?","body":"<p>Here's how I would do it.  First, create a class to handle your bounds objects:</p>\n<pre><code>public static class Bounds {\n    private int lowerBounds;\n    private int upperBounds;\n    private int count = 0;\n    \n    public Bounds(int low, int high) {\n        lowerBounds = low;\n        upperBounds = high;\n    }\n    \n    public int getLowerBounds() {\n        return lowerBounds;\n    }\n\n    public int getUpperBounds() {\n        return upperBounds;\n    }\n\n    public void checkValue(int value) {\n        if (lowerBounds &lt;= value &amp;&amp; value &lt; upperBounds) {\n            count++;\n        }\n    }\n    \n    public String toString() {\n        return lowerBounds + &quot;\\t\\t&quot; + upperBounds + &quot;\\t\\t\\t&quot; + count;\n    }\n}\n</code></pre>\n<p>Notice, this also handles string output.</p>\n<p>Then initialize your bounds.  I'm not following exactly your bounds, but you can fix that to do what you need:</p>\n<pre><code>List&lt;Bounds&gt; boundsList= new ArrayList&lt;&gt;();\nfor (int i = 0; i &lt; 100; i+=10) {\n    boundsList.add(new Bounds(i, i+9));\n}\n</code></pre>\n<p>Then you can do your calculations</p>\n<pre><code> for (int value : values) {\n    for (Bounds bounds : boundsList) {\n        bounds.checkValue(value);\n    }\n}\n</code></pre>\n<p>Then you can output:</p>\n<pre><code>for (Bounds bounds : boundsList) {\n    System.out.println(bounds);\n}\n</code></pre>\n"}],"owner":{"account_id":24429809,"reputation":1,"user_id":18354900,"display_name":"Expedition"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1646235270,"creation_date":1646233545,"question_id":71324916,"body_markdown":"    int []data = new int [SamData.length];\r\n    int count = 0;\r\n    for(int i=0;i&lt;sampleInt;i++) {\r\n        for(int f=0;f&lt;UpLimit[0]; f++, UpLimit[0]++){\r\n            if(20 &lt;= UpLimit[i]){\r\n                count++;\r\n            }\r\n        }\r\n    System.out.println(LowLimit[i] + &quot;\\t\\t&quot; + UpLimit[i] + &quot;\\t\\t\\t&quot; + count);\r\n    }\r\n    }\r\n\r\n\r\n\r\n    \r\n\r\n1. what I need is if the user inputted values, for example...\r\n    \r\n    value1: 8\r\n    value2: 16\r\n    value3: 3\r\n    value4: 13\r\n    value5: 24\r\n    \r\n    it should check if the values are in between the upper and lower numbers.\r\n    for example\r\n    \r\n    0-9 = 2          //(3,8)\r\n    10-20 = 2        //(13,16)\r\n    20-30 = 1        //(24)\r\n    30-40 = 0\r\n    and so on...\r\n    \r\n    but in the code it just show...\r\n    0-9 = 1\r\n    10-20 = 2        \r\n    20-30 = 3        \r\n    30-40 = 4\r\n    and so on.\r\n\r\n","title":"How to get array elements in frequency in between two array?","body":"<pre><code>int []data = new int [SamData.length];\nint count = 0;\nfor(int i=0;i&lt;sampleInt;i++) {\n    for(int f=0;f&lt;UpLimit[0]; f++, UpLimit[0]++){\n        if(20 &lt;= UpLimit[i]){\n            count++;\n        }\n    }\nSystem.out.println(LowLimit[i] + &quot;\\t\\t&quot; + UpLimit[i] + &quot;\\t\\t\\t&quot; + count);\n}\n}\n</code></pre>\n<ol>\n<li><p>what I need is if the user inputted values, for example...</p>\n<p>value1: 8\nvalue2: 16\nvalue3: 3\nvalue4: 13\nvalue5: 24</p>\n<p>it should check if the values are in between the upper and lower numbers.\nfor example</p>\n<p>0-9 = 2          //(3,8)\n10-20 = 2        //(13,16)\n20-30 = 1        //(24)\n30-40 = 0\nand so on...</p>\n<p>but in the code it just show...\n0-9 = 1\n10-20 = 2<br />\n20-30 = 3<br />\n30-40 = 4\nand so on.</p>\n</li>\n</ol>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":1801353,"reputation":81710,"user_id":1639625,"display_name":"tobias_k"},"score":5,"creation_date":1646234799,"post_id":71325175,"comment_id":126073527,"body_markdown":"`null` can not be cast/unboxed to `int`, but you can just do `for (Integer el : ...) {`","body":"<code>null</code> can not be cast/unboxed to <code>int</code>, but you can just do <code>for (Integer el : ...) {</code>"}],"answers":[{"tags":[],"owner":{"account_id":1801353,"reputation":81710,"user_id":1639625,"display_name":"tobias_k"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1646235024,"creation_date":1646235024,"answer_id":71325238,"question_id":71325175,"body_markdown":"If you do `for(int el : integerArrayList)`, or e.g. `int x = integerArrayList.get(k)`, then you [&quot;unbox&quot;][1] the `Integer` in the list to an `int`. And while an `Integer` may be `null`, and `int` _must_ have a proper `int` value (even if this value is `0`), but not `null`.\r\n\r\nTo fix it, just use `Integer` instead of `int`, i.e.\r\n\r\n    for(Integer el : integerArrayList)\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/tutorial/java/data/autoboxing.html","title":"For-each loop with null value in ArrayList","body":"<p>If you do <code>for(int el : integerArrayList)</code>, or e.g. <code>int x = integerArrayList.get(k)</code>, then you <a href=\"https://docs.oracle.com/javase/tutorial/java/data/autoboxing.html\" rel=\"nofollow noreferrer\">&quot;unbox&quot;</a> the <code>Integer</code> in the list to an <code>int</code>. And while an <code>Integer</code> may be <code>null</code>, and <code>int</code> <em>must</em> have a proper <code>int</code> value (even if this value is <code>0</code>), but not <code>null</code>.</p>\n<p>To fix it, just use <code>Integer</code> instead of <code>int</code>, i.e.</p>\n<pre><code>for(Integer el : integerArrayList)\n</code></pre>\n"}],"owner":{"account_id":7739148,"reputation":3345,"user_id":5859654,"display_name":"Nemanja"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":418,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1646235024,"creation_date":1646234697,"question_id":71325175,"body_markdown":"Consider this simple example :\r\n\r\n    List&lt;Integer&gt; integerArrayList = new ArrayList&lt;&gt;();\r\n            integerArrayList.add(5);\r\n            integerArrayList.add(6);\r\n            integerArrayList.add(7);\r\n            integerArrayList.add(null);\r\n      \r\n    \r\n     for(int i=0;i&lt;integerArrayList.size();i++){\r\n             System.out.println(integerArrayList.get(i));\r\n         }\r\n    \r\n      \r\nThis code will print `[5,6,7,null]` but, if I use `for-each` loop like this :\r\n\r\n \r\n\r\n      for(int el : integerArrayList)\r\n           System.out.println(el);\r\n        \r\n\r\nThen this code will throw `NullPointerException`, and I don&#39;t understand why.\r\n\r\nAs far as I know, for-each loop above is equivalent to this :\r\n\r\n    for (Iterator&lt;Integer&gt; i = integerArrayList.iterator(); i.hasNext();) {\r\n                Integer item = i.next();\r\n                System.out.println(item);\r\n            }\r\n\r\nBut this loop doesn&#39;t throw `NullPointerException`!\r\n\r\nI would like to know what is the explanation for this.\r\n\r\nThanks in advance.\r\n\r\n","title":"For-each loop with null value in ArrayList","body":"<p>Consider this simple example :</p>\n<pre><code>List&lt;Integer&gt; integerArrayList = new ArrayList&lt;&gt;();\n        integerArrayList.add(5);\n        integerArrayList.add(6);\n        integerArrayList.add(7);\n        integerArrayList.add(null);\n  \n\n for(int i=0;i&lt;integerArrayList.size();i++){\n         System.out.println(integerArrayList.get(i));\n     }\n\n  \n</code></pre>\n<p>This code will print <code>[5,6,7,null]</code> but, if I use <code>for-each</code> loop like this :</p>\n<pre><code>  for(int el : integerArrayList)\n       System.out.println(el);\n    \n</code></pre>\n<p>Then this code will throw <code>NullPointerException</code>, and I don't understand why.</p>\n<p>As far as I know, for-each loop above is equivalent to this :</p>\n<pre><code>for (Iterator&lt;Integer&gt; i = integerArrayList.iterator(); i.hasNext();) {\n            Integer item = i.next();\n            System.out.println(item);\n        }\n</code></pre>\n<p>But this loop doesn't throw <code>NullPointerException</code>!</p>\n<p>I would like to know what is the explanation for this.</p>\n<p>Thanks in advance.</p>\n"},{"tags":["java","spring","spring-boot","thymeleaf"],"comments":[{"owner":{"account_id":1535561,"reputation":7664,"user_id":1431720,"accept_rate":89,"display_name":"Robert"},"score":1,"creation_date":1646251471,"post_id":71325015,"comment_id":126079785,"body_markdown":"Please don&#39;t post images of code or errors; see [ask].","body":"Please don&#39;t post images of code or errors; see <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>."}],"answers":[{"tags":[],"owner":{"account_id":439171,"reputation":169,"user_id":5588940,"display_name":"Sunil Gollapinni"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646235024,"creation_date":1646235024,"answer_id":71325237,"question_id":71325015,"body_markdown":"I do see that already you have a get-mapping for /email-verification, so can you use different name for this thymeleaf file here.\r\n\r\nMake sure you&#39;re using same name for URL path and template file.","title":"Spring boot thymeleaf","body":"<p>I do see that already you have a get-mapping for /email-verification, so can you use different name for this thymeleaf file here.</p>\n<p>Make sure you're using same name for URL path and template file.</p>\n"}],"owner":{"account_id":24429844,"reputation":11,"user_id":18354928,"display_name":"Aziz Boughattas"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":209,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1646235024,"creation_date":1646233949,"question_id":71325015,"body_markdown":"im using spring boot 2.6.3 and i tried to use thymeleaf recently to get a confirmation message with html after i confirm my account via mail (im just using confirmation mail to verify the new accounts) so i watched some videos about thymeleaf and i marked that all the videos have a folder named templates and static in the src/main/ressources and i dont have them o so i created a folder named templates and in the folder i created a html file just to try it if it (the html file contains simple message hello world) so like you can see in the screenshots i got my controller done and it returns the name of the html file .. i dont know why i keep receiving it as simple string message ``\r\n here is the screenshots\r\n  [1]: https://i.stack.imgur.com/y9JGY.png\r\n  [2]: https://i.stack.imgur.com/5JxjI.png\r\n  [3]: https://i.stack.imgur.com/KkLgO.png","title":"Spring boot thymeleaf","body":"<p>im using spring boot 2.6.3 and i tried to use thymeleaf recently to get a confirmation message with html after i confirm my account via mail (im just using confirmation mail to verify the new accounts) so i watched some videos about thymeleaf and i marked that all the videos have a folder named templates and static in the src/main/ressources and i dont have them o so i created a folder named templates and in the folder i created a html file just to try it if it (the html file contains simple message hello world) so like you can see in the screenshots i got my controller done and it returns the name of the html file .. i dont know why i keep receiving it as simple string message ``\nhere is the screenshots\n[1]: <a href=\"https://i.stack.imgur.com/y9JGY.png\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/y9JGY.png</a>\n[2]: <a href=\"https://i.stack.imgur.com/5JxjI.png\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/5JxjI.png</a>\n[3]: <a href=\"https://i.stack.imgur.com/KkLgO.png\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/KkLgO.png</a></p>\n"},{"tags":["java","xml","postman"],"answers":[{"tags":[],"owner":{"account_id":1488087,"reputation":4476,"user_id":1395874,"accept_rate":85,"display_name":"zinon"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1646234569,"creation_date":1646234569,"answer_id":71325152,"question_id":71324179,"body_markdown":"Thanks to [MI&#39;s blog][1] the following dependency is needed in `pom.xml`.\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;com.fasterxml.jackson.dataformat&lt;/groupId&gt;\r\n      &lt;artifactId&gt;jackson-dataformat-xml&lt;/artifactId&gt;\r\n      &lt;version&gt;2.11.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n  [1]: https://www.miguoliang.com/how-to-fix-415-unsupported-media-type-in-swagger-ui-and-spring-boot.html","title":"Unsupported Media Type for application/xml even though I use MediaType.APPLICATION_XML_VALUE","body":"<p>Thanks to <a href=\"https://www.miguoliang.com/how-to-fix-415-unsupported-media-type-in-swagger-ui-and-spring-boot.html\" rel=\"nofollow noreferrer\">MI's blog</a> the following dependency is needed in <code>pom.xml</code>.</p>\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;com.fasterxml.jackson.dataformat&lt;/groupId&gt;\n  &lt;artifactId&gt;jackson-dataformat-xml&lt;/artifactId&gt;\n  &lt;version&gt;2.11.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":1488087,"reputation":4476,"user_id":1395874,"accept_rate":85,"display_name":"zinon"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":517,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":71325152,"answer_count":1,"score":1,"last_activity_date":1646234569,"creation_date":1646230546,"question_id":71324179,"body_markdown":"I run the following curl command through `postman`.\r\n\r\n    curl --location --request POST &#39;http://localhost:8080/cefcy/get_eD_XML&#39; \\\r\n    --header &#39;Content-Type: application/xml&#39; \\\r\n    --header &#39;Cookie: JSESSIONID=800845E7C67023C8B0B3C8CF7B6EB0E4&#39; \\\r\n    --data-raw &#39;&lt;ClinicalDocument xmlns=&quot;urn:hl7-org:v3&quot; xmlns:epsos=&quot;urn:epsos-org:ep:medication&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&gt;&lt;typeId extension=&quot;POCD_HD000040&quot; root=&quot;2.16.840.1.113883.1.3&quot;/&gt;&lt;/ClinicalDocument&gt;&#39;\r\n\r\nIn my java spring boot project I have the following: \r\n\r\n    @SessionScope\r\n    @RestController\r\n    public class eD  extends Ctr  {\r\n    \tprivate final static Logger LOG = LoggerFactory.getLogger(eD.class);\r\n\t\r\n\t@RequestMapping(value = &quot;/get_eD_XML&quot;, method=RequestMethod.POST,\r\n\t        produces = {MediaType.APPLICATION_JSON_VALUE},consumes={MediaType.APPLICATION_XML_VALUE, MediaType.TEXT_XML_VALUE})\r\n\tprotected String eD_XML(@RequestBody ObjectNode model,HttpServletRequest request, \r\n\t\t\tHttpServletResponse response) throws ServletException, IOException, NoSuchAlgorithmException {\r\n\t\t\r\n\t\tString eD = IOUtils.toString(request.getReader()); //trying to read the xml file\r\n       }\r\n    }\r\n\r\nHowever, in postman I get the following response:\r\n\r\n    {\r\n        &quot;timestamp&quot;: &quot;2022-03-02T14:12:30.070+00:00&quot;,\r\n        &quot;status&quot;: 415,\r\n        &quot;error&quot;: &quot;Unsupported Media Type&quot;,\r\n        &quot;message&quot;: &quot;&quot;,\r\n        &quot;path&quot;: &quot;/cefcy/get_eD_XML&quot;\r\n    }\r\n\r\n","title":"Unsupported Media Type for application/xml even though I use MediaType.APPLICATION_XML_VALUE","body":"<p>I run the following curl command through <code>postman</code>.</p>\n<pre><code>curl --location --request POST 'http://localhost:8080/cefcy/get_eD_XML' \\\n--header 'Content-Type: application/xml' \\\n--header 'Cookie: JSESSIONID=800845E7C67023C8B0B3C8CF7B6EB0E4' \\\n--data-raw '&lt;ClinicalDocument xmlns=&quot;urn:hl7-org:v3&quot; xmlns:epsos=&quot;urn:epsos-org:ep:medication&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&gt;&lt;typeId extension=&quot;POCD_HD000040&quot; root=&quot;2.16.840.1.113883.1.3&quot;/&gt;&lt;/ClinicalDocument&gt;'\n</code></pre>\n<p>In my java spring boot project I have the following:</p>\n<pre><code>@SessionScope\n@RestController\npublic class eD  extends Ctr  {\n    private final static Logger LOG = LoggerFactory.getLogger(eD.class);\n\n@RequestMapping(value = &quot;/get_eD_XML&quot;, method=RequestMethod.POST,\n        produces = {MediaType.APPLICATION_JSON_VALUE},consumes={MediaType.APPLICATION_XML_VALUE, MediaType.TEXT_XML_VALUE})\nprotected String eD_XML(@RequestBody ObjectNode model,HttpServletRequest request, \n        HttpServletResponse response) throws ServletException, IOException, NoSuchAlgorithmException {\n    \n    String eD = IOUtils.toString(request.getReader()); //trying to read the xml file\n   }\n}\n</code></pre>\n<p>However, in postman I get the following response:</p>\n<pre><code>{\n    &quot;timestamp&quot;: &quot;2022-03-02T14:12:30.070+00:00&quot;,\n    &quot;status&quot;: 415,\n    &quot;error&quot;: &quot;Unsupported Media Type&quot;,\n    &quot;message&quot;: &quot;&quot;,\n    &quot;path&quot;: &quot;/cefcy/get_eD_XML&quot;\n}\n</code></pre>\n"},{"tags":["java","multithreading","concurrency","atomic","compare-and-swap"],"comments":[{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1646242210,"post_id":71325131,"comment_id":126076652,"body_markdown":"What happens when the new action is scheduled right between `if (invalidationVersion != invalidationCount.get()) return;` and `T value = computeFunction.call();`? Then, you have overlapping computations. The logic of the first code snippet can be simplified though. Just by replacing the three `AtomicBoolean`s by a single `AtomicInteger` using three bits. Since there are several adjacent uses of the `AtomicBoolean`s (i.e. theres no action with inter-thread semantics in-between), the single `AtomicInteger` allows to reduce the number of accesses.","body":"What happens when the new action is scheduled right between <code>if (invalidationVersion != invalidationCount.get()) return;</code> and <code>T value = computeFunction.call();</code>? Then, you have overlapping computations. The logic of the first code snippet can be simplified though. Just by replacing the three <code>AtomicBoolean</code>s by a single <code>AtomicInteger</code> using three bits. Since there are several adjacent uses of the <code>AtomicBoolean</code>s (i.e. theres no action with inter-thread semantics in-between), the single <code>AtomicInteger</code> allows to reduce the number of accesses."},{"owner":{"account_id":15545149,"reputation":1170,"user_id":11214643,"display_name":"Delark"},"score":0,"creation_date":1646246007,"post_id":71325131,"comment_id":126077952,"body_markdown":"Thanks for your response @Holger, I&#39;ve made a list of all the possible scenarios of the first code, if by &quot;overlapping&quot; you mean 2 consecutive calls with the different result, that also happens in the first one (under a special case).\nIf you mean the same result computed twice, that happens also, it is just that the first computation is not dispatched the same computation is performed again and this time dispatched.\nIf you mean asynchronously, then the first code is still in the need to perform the second call AFTER the first dispatch was cancelled (the computation was still performed).","body":"Thanks for your response @Holger, I&#39;ve made a list of all the possible scenarios of the first code, if by &quot;overlapping&quot; you mean 2 consecutive calls with the different result, that also happens in the first one (under a special case). If you mean the same result computed twice, that happens also, it is just that the first computation is not dispatched the same computation is performed again and this time dispatched. If you mean asynchronously, then the first code is still in the need to perform the second call AFTER the first dispatch was cancelled (the computation was still performed)."},{"owner":{"account_id":15545149,"reputation":1170,"user_id":11214643,"display_name":"Delark"},"score":0,"creation_date":1646246362,"post_id":71325131,"comment_id":126078071,"body_markdown":"There is a definite advantage on the first code, and it is that it prevents the unnecessary creation of threads, which means the semaphore begins to work EVEN BEFORE the execution begins, that is what makes the task so complex, the problem is that it makes the task a lot more slow, so I believe we should also take into account what is the context of the code being used on, ...","body":"There is a definite advantage on the first code, and it is that it prevents the unnecessary creation of threads, which means the semaphore begins to work EVEN BEFORE the execution begins, that is what makes the task so complex, the problem is that it makes the task a lot more slow, so I believe we should also take into account what is the context of the code being used on, ..."},{"owner":{"account_id":15545149,"reputation":1170,"user_id":11214643,"display_name":"Delark"},"score":0,"creation_date":1646246373,"post_id":71325131,"comment_id":126078077,"body_markdown":"if it will spawn thousands of calls then I believe the first one may be preferred, but if the memory is enough to handle multiple threads or if the calls would not be that much, then I believe my option is a valid one, maybe I am looking for too much excuses to use my code lol.","body":"if it will spawn thousands of calls then I believe the first one may be preferred, but if the memory is enough to handle multiple threads or if the calls would not be that much, then I believe my option is a valid one, maybe I am looking for too much excuses to use my code lol."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1646292800,"post_id":71325131,"comment_id":126088296,"body_markdown":"Depends on `getQueryExecutor()`. Normally, you would have a limit in executors. In fact, you could have a single threaded executor with a queue capacity of one, naturally preventing submitting a new job when there is a pending one. Besides that, I cant tell for sure whether the first variant permits overlapping or not. Thats why I would use a single atomic integer for the state, to have far fewer state transitions and easy to understand code. Thats also the advantage of your variant, I can see immediately that concurrent calls of `computeFunction.call()` are possible.","body":"Depends on <code>getQueryExecutor()</code>. Normally, you would have a limit in executors. In fact, you could have a single threaded executor with a queue capacity of one, naturally preventing submitting a new job when there is a pending one. Besides that, I cant tell for sure whether the first variant permits overlapping or not. Thats why I would use a single atomic integer for the state, to have far fewer state transitions and easy to understand code. Thats also the advantage of your variant, I can see immediately that concurrent calls of <code>computeFunction.call()</code> are possible."}],"owner":{"account_id":15545149,"reputation":1170,"user_id":11214643,"display_name":"Delark"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":111,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1646234484,"creation_date":1646234484,"question_id":71325131,"body_markdown":"I was about to write something about this, but maybe it is better to have a second opinion before appearing like a fool...\r\n\r\nSo the idea in the next piece of code (android&#39;s room package v2.4.1, RoomTrackingLiveData), is that the winner thread is kept alive, and is forced to check for contention that may have entered the process (coming from losing threads) while computing.\r\nWhile fail CAS operations performed by these losing threads keep them out from entering and executing code, preventing repeating signals (mComputeFunction.call() OR postValue()).\r\n\r\n        final Runnable mRefreshRunnable = new Runnable() {\r\n            @WorkerThread\r\n            @Override\r\n            public void run() {\r\n                if (mRegisteredObserver.compareAndSet(false, true)) {\r\n                    mDatabase.getInvalidationTracker().addWeakObserver(mObserver);\r\n                }\r\n                boolean computed;\r\n                do {\r\n                    computed = false;\r\n                    if (mComputing.compareAndSet(false, true)) {\r\n                        try {\r\n                            T value = null;\r\n                            while (mInvalid.compareAndSet(true, false)) {\r\n                                computed = true;\r\n                                try {\r\n                                    value = mComputeFunction.call();\r\n                                } catch (Exception e) {\r\n                                    throw new RuntimeException(&quot;Exception while computing database&quot;\r\n                                            + &quot; live data.&quot;, e);\r\n                                }\r\n                            }\r\n                            if (computed) {\r\n                                postValue(value);\r\n                            }\r\n                        } finally {\r\n                            mComputing.set(false);\r\n                        }\r\n                    }\r\n                } while (computed &amp;&amp; mInvalid.get());\r\n            }\r\n        };\r\n\r\n        final Runnable mInvalidationRunnable = new Runnable() {\r\n            @MainThread\r\n            @Override\r\n            public void run() {\r\n                boolean isActive = hasActiveObservers();\r\n                if (mInvalid.compareAndSet(false, true)) {\r\n                    if (isActive) {\r\n                        getQueryExecutor().execute(mRefreshRunnable);\r\n                    }\r\n                }\r\n            }\r\n        };\r\n\r\n\r\nThe most obvious thing here is that atomics are being used for everything they are not good at:\r\n\r\nIdentifying losers and ignoring winners (what reactive patterns need).\r\n\r\nAND a happens once behavior, performed by the loser thread.\r\n\r\nSo this is completely counter intuitive to what atomics are able to achieve, since they are extremely good at defining winners, AND anything that requires a &quot;happens once&quot; becomes impossible to ensure state consistency (the last one is suitable to start a philosophical debate about concurrency, and I will definitely agree with any conclusion).\r\n\r\nIf atomics are used as: &quot;Contention checkers&quot; and &quot;Contention blockers&quot; then we can implement the exact principle with a volatile check of an atomic reference after a successful CAS.\r\n\r\nAnd checking this volatile against the snapshot/witness during every other step of the process.\r\n\r\n          private final AtomicInteger invalidationCount = new AtomicInteger();\r\n\r\n\r\n          private final IntFunction&lt;Runnable&gt; invalidationRunnableFun = invalidationVersion -&gt; (Runnable) () -&gt; {\r\n              if (invalidationVersion != invalidationCount.get()) return;\r\n              try {\r\n                  T value = computeFunction.call();\r\n                  if (invalidationVersion != invalidationCount.get()) return; //In case computation takes too long...\r\n                  postValue(value);\r\n              } catch (Exception e) {\r\n                  e.printStackTrace();\r\n              }\r\n          };\r\n          getQueryExecutor().execute(invalidationRunnableFun.apply(invalidationCount.incrementAndGet()));\r\n\r\nIn this case, each thread is left with the individual responsibility of checking their position in the contention lane, if their position moved and is not at the front anymore, it means that a new thread entered the process, and they should stop further processing.\r\n\r\nThis alternative is so laughably simple that my first question is: \r\n\r\nWhy didn&#39;t they do it like this?\r\n\r\nMaybe my solution has a flaw... but the thing about the first alternative (the nested spin-lock) is that it follows the idea that an atomic CAS operation cannot be verified a second time, and that a verification can only be achieved with a cmpxchg process.... which is... false.\r\n\r\nIt also follows the common (but wrong) believe that what you define after a successful CAS is the sacred word of GOD... as I&#39;ve seen code seldom check for concurrency issues once they enter the if body.\r\n\r\n                if (mInvalid.compareAndSet(false, true)) {\r\n                    // Ummm... yes... mInvalid is still true...\r\n                    // Let&#39;s use a second atomicReference just in case...\r\n                }\r\n\r\nIt also follows common code conventions that involve &quot;double-&lt;enter something\\&gt;&quot; in concurrency scenarios.\r\n\r\nSo only because the first code follows those ideas, is that I am inclined to believe that my solution is a valid and better alternative.\r\n\r\nEven though there is an argument in favor of the &quot;nested spin-lock&quot; option, but does not hold up much:\r\n\r\nThe first alternative is &quot;safer&quot; precisely because it is SLOWER, so it has MORE time to identify contention at the end of the current of incoming threads.\r\n\r\nBUT is not even 100% safe because of the &quot;happens once&quot; thing that is impossible to ensure.\r\n\r\nThere is also a behavior with the code, that, when it reaches the end of a **continuos flow** of incoming threads, 2 signals are dispatched one after the other, the second to last one, and then the last one.\r\n\r\nBut IF it is safer because it is slower, wouldn&#39;t that defeat the goal of using atomics, since their usage is supposed to be with the aim of being a better performance alternative in the first place?\r\n\r\n\r\n\r\n","title":"Nested spin-lock vs volatile check","body":"<p>I was about to write something about this, but maybe it is better to have a second opinion before appearing like a fool...</p>\n<p>So the idea in the next piece of code (android's room package v2.4.1, RoomTrackingLiveData), is that the winner thread is kept alive, and is forced to check for contention that may have entered the process (coming from losing threads) while computing.\nWhile fail CAS operations performed by these losing threads keep them out from entering and executing code, preventing repeating signals (mComputeFunction.call() OR postValue()).</p>\n<pre><code>    final Runnable mRefreshRunnable = new Runnable() {\n        @WorkerThread\n        @Override\n        public void run() {\n            if (mRegisteredObserver.compareAndSet(false, true)) {\n                mDatabase.getInvalidationTracker().addWeakObserver(mObserver);\n            }\n            boolean computed;\n            do {\n                computed = false;\n                if (mComputing.compareAndSet(false, true)) {\n                    try {\n                        T value = null;\n                        while (mInvalid.compareAndSet(true, false)) {\n                            computed = true;\n                            try {\n                                value = mComputeFunction.call();\n                            } catch (Exception e) {\n                                throw new RuntimeException(&quot;Exception while computing database&quot;\n                                        + &quot; live data.&quot;, e);\n                            }\n                        }\n                        if (computed) {\n                            postValue(value);\n                        }\n                    } finally {\n                        mComputing.set(false);\n                    }\n                }\n            } while (computed &amp;&amp; mInvalid.get());\n        }\n    };\n\n    final Runnable mInvalidationRunnable = new Runnable() {\n        @MainThread\n        @Override\n        public void run() {\n            boolean isActive = hasActiveObservers();\n            if (mInvalid.compareAndSet(false, true)) {\n                if (isActive) {\n                    getQueryExecutor().execute(mRefreshRunnable);\n                }\n            }\n        }\n    };\n</code></pre>\n<p>The most obvious thing here is that atomics are being used for everything they are not good at:</p>\n<p>Identifying losers and ignoring winners (what reactive patterns need).</p>\n<p>AND a happens once behavior, performed by the loser thread.</p>\n<p>So this is completely counter intuitive to what atomics are able to achieve, since they are extremely good at defining winners, AND anything that requires a &quot;happens once&quot; becomes impossible to ensure state consistency (the last one is suitable to start a philosophical debate about concurrency, and I will definitely agree with any conclusion).</p>\n<p>If atomics are used as: &quot;Contention checkers&quot; and &quot;Contention blockers&quot; then we can implement the exact principle with a volatile check of an atomic reference after a successful CAS.</p>\n<p>And checking this volatile against the snapshot/witness during every other step of the process.</p>\n<pre><code>      private final AtomicInteger invalidationCount = new AtomicInteger();\n\n\n      private final IntFunction&lt;Runnable&gt; invalidationRunnableFun = invalidationVersion -&gt; (Runnable) () -&gt; {\n          if (invalidationVersion != invalidationCount.get()) return;\n          try {\n              T value = computeFunction.call();\n              if (invalidationVersion != invalidationCount.get()) return; //In case computation takes too long...\n              postValue(value);\n          } catch (Exception e) {\n              e.printStackTrace();\n          }\n      };\n      getQueryExecutor().execute(invalidationRunnableFun.apply(invalidationCount.incrementAndGet()));\n</code></pre>\n<p>In this case, each thread is left with the individual responsibility of checking their position in the contention lane, if their position moved and is not at the front anymore, it means that a new thread entered the process, and they should stop further processing.</p>\n<p>This alternative is so laughably simple that my first question is:</p>\n<p>Why didn't they do it like this?</p>\n<p>Maybe my solution has a flaw... but the thing about the first alternative (the nested spin-lock) is that it follows the idea that an atomic CAS operation cannot be verified a second time, and that a verification can only be achieved with a cmpxchg process.... which is... false.</p>\n<p>It also follows the common (but wrong) believe that what you define after a successful CAS is the sacred word of GOD... as I've seen code seldom check for concurrency issues once they enter the if body.</p>\n<pre><code>            if (mInvalid.compareAndSet(false, true)) {\n                // Ummm... yes... mInvalid is still true...\n                // Let's use a second atomicReference just in case...\n            }\n</code></pre>\n<p>It also follows common code conventions that involve &quot;double-&lt;enter something&gt;&quot; in concurrency scenarios.</p>\n<p>So only because the first code follows those ideas, is that I am inclined to believe that my solution is a valid and better alternative.</p>\n<p>Even though there is an argument in favor of the &quot;nested spin-lock&quot; option, but does not hold up much:</p>\n<p>The first alternative is &quot;safer&quot; precisely because it is SLOWER, so it has MORE time to identify contention at the end of the current of incoming threads.</p>\n<p>BUT is not even 100% safe because of the &quot;happens once&quot; thing that is impossible to ensure.</p>\n<p>There is also a behavior with the code, that, when it reaches the end of a <strong>continuos flow</strong> of incoming threads, 2 signals are dispatched one after the other, the second to last one, and then the last one.</p>\n<p>But IF it is safer because it is slower, wouldn't that defeat the goal of using atomics, since their usage is supposed to be with the aim of being a better performance alternative in the first place?</p>\n"},{"tags":["java","azure-servicebus-topics","azure-managed-identity"],"answers":[{"tags":[],"owner":{"account_id":23585381,"reputation":837,"user_id":17623897,"display_name":"SuryasriKamini-MT"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1646210390,"creation_date":1646210390,"answer_id":71319685,"question_id":71293461,"body_markdown":"**Please check the below steps if they help to workaround -** \r\n\r\n - `java.lang.NoSuchMethodError` majorly occurs due to version conflicts of dependencies.\r\n - There may be few methods or libraries not compatible or missing in the project.\r\n - To resolve this, try upgrading or even downgrading the dependent versions.\r\n - In some cases, removing the unnecessary dependencies also works.\r\n - Please check this official [java doc of SilentParameter](https://javadoc.io/static/com.microsoft.azure/msal4j/1.6.0/com/microsoft/aad/msal4j/SilentParameters.SilentParametersBuilder.html) class and its related methods.\r\n - In general, `NoSuchMethodError` error happens if class A expects a method in class B which was compiled but at run time the other classes does not have that method. Here the method can be a third party `jar` library or normal method in the classes.\r\n - Sometimes it might be, you have complied the code against a version of some library that can also be the `JDK` itself, but your runtime is having other `versions` and it might be the case of one of the modules where you have added a method, forgot to compile, so at runtime it is using the old version. \r\n","title":"java.lang.NoSuchMethodError: &#39;com.microsoft.aad.msal4j.SilentParameters$SilentParametersBuilder using azure sdk for java service bus","body":"<p><strong>Please check the below steps if they help to workaround -</strong></p>\n<ul>\n<li><code>java.lang.NoSuchMethodError</code> majorly occurs due to version conflicts of dependencies.</li>\n<li>There may be few methods or libraries not compatible or missing in the project.</li>\n<li>To resolve this, try upgrading or even downgrading the dependent versions.</li>\n<li>In some cases, removing the unnecessary dependencies also works.</li>\n<li>Please check this official <a href=\"https://javadoc.io/static/com.microsoft.azure/msal4j/1.6.0/com/microsoft/aad/msal4j/SilentParameters.SilentParametersBuilder.html\" rel=\"nofollow noreferrer\">java doc of SilentParameter</a> class and its related methods.</li>\n<li>In general, <code>NoSuchMethodError</code> error happens if class A expects a method in class B which was compiled but at run time the other classes does not have that method. Here the method can be a third party <code>jar</code> library or normal method in the classes.</li>\n<li>Sometimes it might be, you have complied the code against a version of some library that can also be the <code>JDK</code> itself, but your runtime is having other <code>versions</code> and it might be the case of one of the modules where you have added a method, forgot to compile, so at runtime it is using the old version.</li>\n</ul>\n"}],"owner":{"account_id":21417269,"reputation":23,"user_id":15776311,"display_name":"LegendMVB"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2795,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71319685,"answer_count":1,"score":0,"last_activity_date":1646234180,"creation_date":1646043515,"question_id":71293461,"body_markdown":"Im trying to send messages to my azure service bus topic using managed identity. None of the messages are sent to the topic. I have no problem when using connectionString instead of credential.\r\n\r\n**ServiceBusSenderClient**\r\n```\r\n    String namespace = getNamespace();\r\n    TokenCredential credential = new DefaultAzureCredentialBuilder()\r\n        .build();\r\n\r\n    ServiceBusSenderClient senderClient = new ServiceBusClientBuilder()\r\n        .credential(namespace, credential)\r\n        .sender()\r\n        .topicName(topicName)\r\n        .buildClient();\r\n    senderClient.sendMessage(new ServiceBusMessage(&quot;TESTTEST&quot;));\r\n```\r\n```\r\n2022-02-28 10:52:11.671  INFO 14901 --- [   scheduling-1] c.azure.identity.EnvironmentCredential   : Azure Identity =&gt; EnvironmentCredential invoking ClientSecretCredential\r\n2022-02-28 10:52:11.685  INFO 14901 --- [   scheduling-1] c.a.c.i.jackson.JacksonVersion           : Package versions: jackson-annotations=2.11.3, jackson-core=2.11.3, jackson-databind=2.11.3, jackson-dataformat-xml=2.11.3, jackson-datatype-jsr310=2.11.3, azure-core=1.23.1, Troubleshooting version conflicts: https://aka.ms/azsdk/java/dependency/troubleshoot\r\n2022-02-28 10:52:11.749  INFO 14901 --- [   scheduling-1] c.a.m.s.i.ServiceBusConnectionProcessor  : namespace[https://xxxx-xxxx-xxx-xxx-xx.servicebus.windows.net/] entityPath[N/A]: Setting next AMQP channel.\r\n2022-02-28 10:52:11.749  INFO 14901 --- [   scheduling-1] c.a.m.s.i.ServiceBusConnectionProcessor  : namespace[https://xxxx-xxxx-xxx-xxx-xx.servicebus.windows.net/] entityPath[N/A]: Next AMQP channel received, updating 0 current subscribers\r\n2022-02-28 10:52:11.751  INFO 14901 --- [   scheduling-1] c.a.m.s.ServiceBusClientBuilder          : # of open clients with shared connection: 1\r\n2022-02-28 10:52:11.770  INFO 14901 --- [   scheduling-1] c.a.c.a.i.ReactorConnection              : connectionId[MF_6e344f_1646041931731]: Creating and starting connection to https://xxxx-xxxx-xxx-xxx-xx.servicebus.windows.net/:5671\r\n2022-02-28 10:52:11.783  INFO 14901 --- [   scheduling-1] c.a.c.a.implementation.ReactorExecutor   : connectionId[MF_6e344f_1646041931731] message[Starting reactor.]\r\n2022-02-28 10:52:11.786  INFO 14901 --- [ctor-executor-1] c.a.c.a.i.handler.ConnectionHandler      : onConnectionInit connectionId[MF_6e344f_1646041931731] hostname[https://xxxx-xxxx-xxx-xxx-xx.servicebus.windows.net/] amqpHostname[https://xxxx-xxxx-xxx-xxx-xx.servicebus.windows.net/]\r\n2022-02-28 10:52:11.786  INFO 14901 --- [ctor-executor-1] c.a.c.a.i.handler.ReactorHandler         : connectionId[MF_6e344f_1646041931731] reactor.onReactorInit\r\n2022-02-28 10:52:11.786  INFO 14901 --- [ctor-executor-1] c.a.c.a.i.handler.ConnectionHandler      : onConnectionLocalOpen connectionId[MF_6e344f_1646041931731] hostname[https://xxxx-xxxx-xxx-xxx-xx.servicebus.windows.net/] errorCondition[null] errorDescription[null]\r\n2022-02-28 10:52:11.828  INFO 14901 --- [ctor-executor-1] c.a.c.a.i.handler.ConnectionHandler      : onConnectionBound connectionId[MF_6e344f_1646041931731] hostname[https://xxxx-xxxx-xxx-xxx-xx.servicebus.windows.net/] peerDetails[https://xxxx-xxxx-xxx-xxx-xx.servicebus.windows.net/:5671]\r\n2022-02-28 10:52:12.021  INFO 14901 --- [ctor-executor-1] c.a.c.a.i.handler.StrictTlsContextSpi    : SSLv2Hello was an enabled protocol. Filtering out.\r\n2022-02-28 10:52:12.136  WARN 14901 --- [ctor-executor-1] c.a.c.a.i.handler.ConnectionHandler      : onTransportError hostname[https://xxxx-xxxx-xxx-xxx-xx.servicebus.windows.net/], connectionId[MF_6e344f_1646041931731], error[Connection reset by peer]\r\n2022-02-28 10:52:12.139  INFO 14901 --- [ctor-executor-1] c.a.c.a.i.ReactorConnection              : connectionId[MF_6e344f_1646041931731] signal[Connection reset by peer, errorContext[NAMESPACE: https://xxxx-xxxx-xxx-xxx-xx.servicebus.windows.net/. ERROR CONTEXT: N/A], isTransient[false], initiatedByClient[false]]: Disposing of ReactorConnection.\r\n2022-02-28 10:52:12.151  INFO 14901 --- [ctor-executor-1] c.a.c.a.i.handler.ConnectionHandler      : onConnectionUnbound hostname[https://xxxx-xxxx-xxx-xxx-xx.servicebus.windows.net/], connectionId[MF_6e344f_1646041931731], state[ACTIVE], remoteState[UNINITIALIZED]\r\n2022-02-28 10:52:12.157  INFO 14901 --- [ctor-executor-1] c.a.c.a.i.ReactorConnection              : connectionId[MF_6e344f_1646041931731] Closing executor.\r\n2022-02-28 10:52:12.159  INFO 14901 --- [ctor-executor-1] c.a.c.a.i.handler.ConnectionHandler      : onConnectionLocalClose connectionId[MF_6e344f_1646041931731] hostname[https://xxxx-xxxx-xxx-xxx-xx.servicebus.windows.net/] errorCondition[null] errorDescription[null]\r\n2022-02-28 10:52:16.167  INFO 14901 --- [ctor-executor-1] c.a.c.a.implementation.ReactorExecutor   : connectionId[MF_6e344f_1646041931731] message[Processing all pending tasks and closing old reactor.]\r\n2022-02-28 10:52:16.169  INFO 14901 --- [ctor-executor-1] c.a.c.a.i.ReactorDispatcher              : connectionId[MF_6e344f_1646041931731] Reactor selectable is being disposed.\r\n2022-02-28 10:52:16.170  INFO 14901 --- [ctor-executor-1] c.a.c.a.i.ReactorConnection              : onConnectionShutdown connectionId[MF_6e344f_1646041931731], hostName[https://xxxx-xxxx-xxx-xxx-xx.servicebus.windows.net/], message[Shutting down], shutdown signal[false]\r\n2022-02-28 10:52:16.187 ERROR 14901 --- [ctor-executor-1] reactor.core.publisher.Operators         : Operator called default onErrorDropped\r\n\r\nreactor.core.Exceptions$ErrorCallbackNotImplemented: com.azure.core.amqp.exception.AmqpException: Connection reset by peer, errorContext[NAMESPACE: https://xxxx-xxxx-xxx-xxx-xx.servicebus.windows.net/. ERROR CONTEXT: N/A]\r\nCaused by: com.azure.core.amqp.exception.AmqpException: Connection reset by peer, errorContext[NAMESPACE: https://xxxx-xxxx-xxx-xxx-xx.servicebus.windows.net/. ERROR CONTEXT: N/A]\r\n\tat com.azure.core.amqp.implementation.ExceptionUtil.toException(ExceptionUtil.java:85) ~[azure-core-amqp-2.3.7.jar:2.3.7]\r\n\tat com.azure.core.amqp.implementation.handler.ConnectionHandler.notifyErrorContext(ConnectionHandler.java:325) ~[azure-core-amqp-2.3.7.jar:2.3.7]\r\n\tat com.azure.core.amqp.implementation.handler.ConnectionHandler.onTransportError(ConnectionHandler.java:228) ~[azure-core-amqp-2.3.7.jar:2.3.7]\r\n\tat org.apache.qpid.proton.engine.BaseHandler.handle(BaseHandler.java:191) ~[proton-j-0.33.8.jar:na]\r\n\tat org.apache.qpid.proton.engine.impl.EventImpl.dispatch(EventImpl.java:108) ~[proton-j-0.33.8.jar:na]\r\n\tat org.apache.qpid.proton.reactor.impl.ReactorImpl.dispatch(ReactorImpl.java:324) ~[proton-j-0.33.8.jar:na]\r\n\tat org.apache.qpid.proton.reactor.impl.ReactorImpl.process(ReactorImpl.java:291) ~[proton-j-0.33.8.jar:na]\r\n\tat com.azure.core.amqp.implementation.ReactorExecutor.run(ReactorExecutor.java:92) ~[azure-core-amqp-2.3.7.jar:2.3.7]\r\n\tat reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:68) ~[reactor-core-3.4.1.jar:3.4.1]\r\n\tat reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:28) ~[reactor-core-3.4.1.jar:3.4.1]\r\n\tat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]\r\n\tat java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304) ~[na:na]\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]\r\n\tat java.base/java.lang.Thread.run(Thread.java:829) ~[na:na]\r\n```\r\n\r\nEDIT:\r\nAfter changing the namespace from https://xxxx-xxxx-xxx-xxx-xx.servicebus.windows.net/ to xxxx-xxxx-xxx-xxx-xx.servicebus.windows.net, I got a little further.\r\n\r\n```2022-02-28 16:08:14.350  INFO 18303 --- [   scheduling-1] c.azure.identity.EnvironmentCredential   : Azure Identity =&gt; EnvironmentCredential invoking ClientSecretCredential\r\n2022-02-28 16:08:14.362  INFO 18303 --- [   scheduling-1] c.a.c.i.jackson.JacksonVersion           : Package versions: jackson-annotations=2.11.3, jackson-core=2.11.3, jackson-databind=2.11.3, jackson-dataformat-xml=2.11.3, jackson-datatype-jsr310=2.11.3, azure-core=1.23.1, Troubleshooting version conflicts: https://aka.ms/azsdk/java/dependency/troubleshoot\r\n2022-02-28 16:08:14.423  INFO 18303 --- [   scheduling-1] c.a.m.s.i.ServiceBusConnectionProcessor  : namespace[xxxx-xxxx-xxx-xxx-xx.servicebus.windows.net] entityPath[N/A]: Setting next AMQP channel.\r\n2022-02-28 16:08:14.423  INFO 18303 --- [   scheduling-1] c.a.m.s.i.ServiceBusConnectionProcessor  : namespace[xxxx-xxxx-xxx-xxx-xx.servicebus.windows.net] entityPath[N/A]: Next AMQP channel received, updating 0 current subscribers\r\n2022-02-28 16:08:14.424  INFO 18303 --- [   scheduling-1] c.a.m.s.ServiceBusClientBuilder          : # of open clients with shared connection: 1\r\n2022-02-28 16:08:14.442  INFO 18303 --- [   scheduling-1] c.a.c.a.i.ReactorConnection              : connectionId[MF_2bb2ea_1646060894406]: Creating and starting connection to xxxx-xxxx-xxx-xxx-xx.servicebus.windows.net:5671\r\n2022-02-28 16:08:14.454  INFO 18303 --- [   scheduling-1] c.a.c.a.implementation.ReactorExecutor   : connectionId[MF_2bb2ea_1646060894406] message[Starting reactor.]\r\n2022-02-28 16:08:14.456  INFO 18303 --- [ctor-executor-1] c.a.c.a.i.handler.ConnectionHandler      : onConnectionInit connectionId[MF_2bb2ea_1646060894406] hostname[xxxx-xxxx-xxx-xxx-xx.servicebus.windows.net] amqpHostname[xxxx-xxxx-xxx-xxx-xx.servicebus.windows.net]\r\n2022-02-28 16:08:14.456  INFO 18303 --- [ctor-executor-1] c.a.c.a.i.handler.ReactorHandler         : connectionId[MF_2bb2ea_1646060894406] reactor.onReactorInit\r\n2022-02-28 16:08:14.456  INFO 18303 --- [ctor-executor-1] c.a.c.a.i.handler.ConnectionHandler      : onConnectionLocalOpen connectionId[MF_2bb2ea_1646060894406] hostname[xxxx-xxxx-xxx-xxx-xx.servicebus.windows.net] errorCondition[null] errorDescription[null]\r\n2022-02-28 16:08:14.496  INFO 18303 --- [ctor-executor-1] c.a.c.a.i.handler.ConnectionHandler      : onConnectionBound connectionId[MF_2bb2ea_1646060894406] hostname[xxxx-xxxx-xxx-xxx-xx.servicebus.windows.net] peerDetails[xxxx-xxxx-xxx-xxx-xx.servicebus.windows.net:5671]\r\n2022-02-28 16:08:14.656  INFO 18303 --- [ctor-executor-1] c.a.c.a.i.handler.StrictTlsContextSpi    : SSLv2Hello was an enabled protocol. Filtering out.\r\n2022-02-28 16:08:14.979  INFO 18303 --- [ctor-executor-1] c.a.c.a.i.handler.ConnectionHandler      : onConnectionRemoteOpen hostname[xxxx-xxxx-xxx-xxx-xx.servicebus.windows.net], connectionId[MF_2bb2ea_1646060894406], remoteContainer[4faee4fd82174e4e8afdc32b31b04f28_G10]\r\n2022-02-28 16:08:14.980  INFO 18303 --- [ctor-executor-1] c.a.m.s.i.ServiceBusConnectionProcessor  : namespace[xxxx-xxxx-xxx-xxx-xx.servicebus.windows.net] entityPath[N/A]: Channel is now active.\r\n2022-02-28 16:08:15.056  INFO 18303 --- [ctor-executor-1] c.a.c.a.i.handler.SessionHandler         : onSessionRemoteOpen connectionId[MF_2bb2ea_1646060894406], entityName[mdm-asset-topic], sessionIncCapacity[0], sessionOutgoingWindow[2147483647]\r\n2022-02-28 16:08:15.071  INFO 18303 --- [ctor-executor-1] c.a.c.a.i.ReactorConnection              : Setting CBS channel.\r\n2022-02-28 16:08:15.127  INFO 18303 --- [ctor-executor-1] c.a.c.a.i.handler.SessionHandler         : onSessionRemoteOpen connectionId[MF_2bb2ea_1646060894406], entityName[cbs-session], sessionIncCapacity[0], sessionOutgoingWindow[2147483647]\r\n2022-02-28 16:08:15.136  INFO 18303 --- [ctor-executor-1] c.a.c.a.i.ReactorConnection              : connectionId[MF_2bb2ea_1646060894406] entityPath[$cbs] linkName[cbs] Emitting new response channel.\r\n2022-02-28 16:08:15.137  INFO 18303 --- [ctor-executor-1] c.a.c.a.i.RequestResponseChannel:$cbs    : namespace[MF_2bb2ea_1646060894406] entityPath[$cbs]: Setting next AMQP channel.\r\n2022-02-28 16:08:15.137  INFO 18303 --- [ctor-executor-1] c.a.c.a.i.RequestResponseChannel:$cbs    : namespace[MF_2bb2ea_1646060894406] entityPath[$cbs]: Next AMQP channel received, updating 1 current subscribers\r\n2022-02-28 16:08:15.196 ERROR 18303 --- [ctor-executor-1] reactor.core.scheduler.Schedulers        : Scheduler worker in group main failed with an uncaught exception\r\n\r\njava.lang.NoSuchMethodError: &#39;com.microsoft.aad.msal4j.SilentParameters$SilentParametersBuilder com.microsoft.aad.msal4j.SilentParameters$SilentParametersBuilder.tenant(java.lang.String)&#39;\r\nat com.azure.identity.implementation.IdentityClient.lambda$authenticateWithConfidentialClientCache$29(IdentityClient.java:771) ~[azure-identity-1.4.4.jar:1.4.4]\r\nat reactor.core.publisher.Mono.lambda$fromFuture$2(Mono.java:649) ~[reactor-core-3.4.1.jar:3.4.1]\r\nat reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:44) ~[reactor-core-3.4.1.jar:3.4.1]\r\nat reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:64) ~[reactor-core-3.4.1.jar:3.4.1]\r\nat reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:157) ~[reactor-core-3.4.1.jar:3.4.1]\r\nat reactor.core.publisher.Operators$MonoSubscriber.complete(Operators.java:1784) ~[reactor-core-3.4.1.jar:3.4.1]\r\nat reactor.core.publisher.MonoCacheTime$CoordinatorSubscriber.signalCached(MonoCacheTime.java:328) ~[reactor-core-3.4.1.jar:3.4.1]\r\nat reactor.core.publisher.MonoCacheTime$CoordinatorSubscriber.onNext(MonoCacheTime.java:345) ~[reactor-core-3.4.1.jar:3.4.1]\r\nat reactor.core.publisher.Operators$ScalarSubscription.request(Operators.java:2346) ~[reactor-core-3.4.1.jar:3.4.1]\r\nat reactor.core.publisher.MonoCacheTime$CoordinatorSubscriber.onSubscribe(MonoCacheTime.java:284) ~[reactor-core-3.4.1.jar:3.4.1]\r\nat reactor.core.publisher.MonoJust.subscribe(MonoJust.java:54) ~[reactor-core-3.4.1.jar:3.4.1]\r\nat reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:52) ~[reactor-core-3.4.1.jar:3.4.1]\r\nat reactor.core.publisher.MonoCacheTime.subscribeOrReturn(MonoCacheTime.java:134) ~[reactor-core-3.4.1.jar:3.4.1]\r\nat reactor.core.publisher.Mono.subscribe(Mono.java:4031) ~[reactor-core-3.4.1.jar:3.4.1]\r\nat reactor.core.publisher.FluxFlatMap$FlatMapMain.onNext(FluxFlatMap.java:425) ~[reactor-core-3.4.1.jar:3.4.1]\r\nat reactor.core.publisher.FluxIterable$IterableSubscription.slowPath(FluxIterable.java:270) ~[reactor-core-3.4.1.jar:3.4.1]\r\nat reactor.core.publisher.FluxIterable$IterableSubscription.request(FluxIterable.java:228) ~[reactor-core-3.4.1.jar:3.4.1]\r\nat reactor.core.publisher.FluxFlatMap$FlatMapMain.onSubscribe(FluxFlatMap.java:370) ~[reactor-core-3.4.1.jar:3.4.1]\r\nat reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:164) ~[reactor-core-3.4.1.jar:3.4.1]\r\nat reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:86) ~[reactor-core-3.4.1.jar:3.4.1]\r\nat reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:64) ~[reactor-core-3.4.1.jar:3.4.1]\r\nat reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:157) ~[reactor-core-3.4.1.jar:3.4.1]\r\nat reactor.core.publisher.Operators$MonoSubscriber.complete(Operators.java:1784) ~[reactor-core-3.4.1.jar:3.4.1]\r\nat com.azure.core.amqp.implementation.AmqpChannelProcessor$ChannelSubscriber.onNext(AmqpChannelProcessor.java:389) ~[azure-core-amqp-2.3.7.jar:2.3.7]\r\nat com.azure.core.amqp.implementation.AmqpChannelProcessor.lambda$onNext$0(AmqpChannelProcessor.java:96) ~[azure-core-amqp-2.3.7.jar:2.3.7]\r\nat java.base/java.util.concurrent.ConcurrentLinkedDeque.forEach(ConcurrentLinkedDeque.java:1650) ~[na:na]\r\nat com.azure.core.amqp.implementation.AmqpChannelProcessor.onNext(AmqpChannelProcessor.java:96) ~[azure-core-amqp-2.3.7.jar:2.3.7]\r\nat reactor.core.publisher.FluxRepeatPredicate$RepeatPredicateSubscriber.onNext(FluxRepeatPredicate.java:85) ~[reactor-core-3.4.1.jar:3.4.1]\r\nat reactor.core.publisher.FluxPeekFuseable$PeekFuseableSubscriber.onNext(FluxPeekFuseable.java:210) ~[reactor-core-3.4.1.jar:3.4.1]\r\nat reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onNext(FluxMapFuseable.java:127) ~[reactor-core-3.4.1.jar:3.4.1]\r\nat reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onNext(FluxMapFuseable.java:127) ~[reactor-core-3.4.1.jar:3.4.1]\r\nat reactor.core.publisher.Operators$MonoSubscriber.complete(Operators.java:1784) ~[reactor-core-3.4.1.jar:3.4.1]\r\nat reactor.core.publisher.MonoFlatMap$FlatMapInner.onNext(MonoFlatMap.java:249) ~[reactor-core-3.4.1.jar:3.4.1]\r\nat reactor.core.publisher.Operators$MonoSubscriber.complete(Operators.java:1784) ~[reactor-core-3.4.1.jar:3.4.1]\r\nat reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.drain(MonoIgnoreThen.java:148) ~[reactor-core-3.4.1.jar:3.4.1]\r\nat reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.ignoreDone(MonoIgnoreThen.java:191) ~[reactor-core-3.4.1.jar:3.4.1]\r\nat reactor.core.publisher.MonoIgnoreThen$ThenIgnoreInner.onComplete(MonoIgnoreThen.java:248) ~[reactor-core-3.4.1.jar:3.4.1]\r\nat reactor.core.publisher.SerializedSubscriber.onComplete(SerializedSubscriber.java:146) ~[reactor-core-3.4.1.jar:3.4.1]\r\nat reactor.core.publisher.SerializedSubscriber.onComplete(SerializedSubscriber.java:146) ~[reactor-core-3.4.1.jar:3.4.1]\r\nat reactor.core.publisher.FluxTimeout$TimeoutMainSubscriber.onComplete(FluxTimeout.java:233) ~[reactor-core-3.4.1.jar:3.4.1]\r\nat reactor.core.publisher.MonoNext$NextSubscriber.onComplete(MonoNext.java:102) ~[reactor-core-3.4.1.jar:3.4.1]\r\nat reactor.core.publisher.MonoNext$NextSubscriber.onNext(MonoNext.java:83) ~[reactor-core-3.4.1.jar:3.4.1]\r\nat reactor.core.publisher.FluxFilterFuseable$FilterFuseableSubscriber.onNext(FluxFilterFuseable.java:118) ~[reactor-core-3.4.1.jar:3.4.1]\r\nat reactor.core.publisher.FluxReplay$SizeBoundReplayBuffer.replayNormal(FluxReplay.java:814) ~[reactor-core-3.4.1.jar:3.4.1]\r\nat reactor.core.publisher.FluxReplay$SizeBoundReplayBuffer.replay(FluxReplay.java:898) ~[reactor-core-3.4.1.jar:3.4.1]\r\nat reactor.core.publisher.FluxReplay$ReplaySubscriber.onNext(FluxReplay.java:1246) ~[reactor-core-3.4.1.jar:3.4.1]\r\nat reactor.core.publisher.FluxPeek$PeekSubscriber.onNext(FluxPeek.java:199) ~[reactor-core-3.4.1.jar:3.4.1]\r\nat reactor.core.publisher.FluxPeek$PeekSubscriber.onNext(FluxPeek.java:199) ~[reactor-core-3.4.1.jar:3.4.1]\r\nat reactor.core.publisher.FluxMap$MapSubscriber.onNext(FluxMap.java:120) ~[reactor-core-3.4.1.jar:3.4.1]\r\nat reactor.core.publisher.FluxDistinctUntilChanged$DistinctUntilChangedSubscriber.tryOnNext(FluxDistinctUntilChanged.java:148) ~[reactor-core-3.4.1.jar:3.4.1]\r\nat reactor.core.publisher.FluxDistinctUntilChanged$DistinctUntilChangedSubscriber.onNext(FluxDistinctUntilChanged.java:101) ~[reactor-core-3.4.1.jar:3.4.1]\r\nat reactor.core.publisher.FluxReplay$SizeBoundReplayBuffer.replayNormal(FluxReplay.java:814) ~[reactor-core-3.4.1.jar:3.4.1]\r\nat reactor.core.publisher.FluxReplay$SizeBoundReplayBuffer.replay(FluxReplay.java:898) ~[reactor-core-3.4.1.jar:3.4.1]\r\nat reactor.core.publisher.ReplayProcessor.tryEmitNext(ReplayProcessor.java:508) ~[reactor-core-3.4.1.jar:3.4.1]\r\nat reactor.core.publisher.SinkManySerialized.tryEmitNext(SinkManySerialized.java:97) ~[reactor-core-3.4.1.jar:3.4.1]\r\nat reactor.core.publisher.InternalManySink.emitNext(InternalManySink.java:27) ~[reactor-core-3.4.1.jar:3.4.1]\r\nat com.azure.core.amqp.implementation.handler.Handler.onNext(Handler.java:87) ~[azure-core-amqp-2.3.7.jar:2.3.7]\r\nat com.azure.core.amqp.implementation.handler.SessionHandler.onSessionRemoteOpen(SessionHandler.java:84) ~[azure-core-amqp-2.3.7.jar:2.3.7]\r\nat org.apache.qpid.proton.engine.BaseHandler.handle(BaseHandler.java:146) ~[proton-j-0.33.8.jar:na]\r\nat org.apache.qpid.proton.engine.impl.EventImpl.dispatch(EventImpl.java:108) ~[proton-j-0.33.8.jar:na]\r\nat org.apache.qpid.proton.reactor.impl.ReactorImpl.dispatch(ReactorImpl.java:324) ~[proton-j-0.33.8.jar:na]\r\nat org.apache.qpid.proton.reactor.impl.ReactorImpl.process(ReactorImpl.java:291) ~[proton-j-0.33.8.jar:na]\r\nat com.azure.core.amqp.implementation.ReactorExecutor.run(ReactorExecutor.java:92) ~[azure-core-amqp-2.3.7.jar:2.3.7]\r\nat reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:68) ~[reactor-core-3.4.1.jar:3.4.1]\r\nat reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:28) ~[reactor-core-3.4.1.jar:3.4.1]\r\nat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]\r\nat java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304) ~[na:na]\r\nat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]\r\nat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]\r\nat java.base/java.lang.Thread.run(Thread.java:829) ~[na:na]\r\n\r\n2022-02-28 16:08:19.199  INFO 18303 --- [ctor-executor-1] c.a.c.a.implementation.ReactorExecutor   : connectionId[MF_2bb2ea_1646060894406] message[Processing all pending tasks and closing old reactor.]\r\n2022-02-28 16:08:19.200  INFO 18303 --- [ctor-executor-1] c.a.c.a.i.handler.SessionHandler         : onSessionRemoteOpen connectionId[MF_2bb2ea_1646060894406], entityName[cbs-session], sessionIncCapacity[0], sessionOutgoingWindow[2147483647]\r\n2022-02-28 16:08:19.201  INFO 18303 --- [ctor-executor-1] c.a.c.a.i.ReactorDispatcher              : connectionId[MF_2bb2ea_1646060894406] Reactor selectable is being disposed.\r\n2022-02-28 16:08:19.201  INFO 18303 --- [ctor-executor-1] c.a.c.a.i.ReactorConnection              : onConnectionShutdown connectionId[MF_2bb2ea_1646060894406], hostName[xxxx-xxxx-xxx-xxx-xx.servicebus.windows.net], message[Shutting down], shutdown signal[false]\r\n2022-02-28 16:08:19.201  INFO 18303 --- [ctor-executor-1] c.a.c.a.i.ReactorConnection              : connectionId[MF_2bb2ea_1646060894406] signal[connectionId[MF_2bb2ea_1646060894406] Reactor selectable is disposed., isTransient[false], initiatedByClient[false]]: Disposing of ReactorConnection.\r\n2022-02-28 16:08:19.201  INFO 18303 --- [ctor-executor-1] c.a.m.s.i.ServiceBusConnectionProcessor  : namespace[xxxx-xxxx-xxx-xxx-xx.servicebus.windows.net] entityPath[N/A]: Channel is closed. Requesting upstream.\r\n2022-02-28 16:08:19.202  INFO 18303 --- [ctor-executor-1] c.a.m.s.i.ServiceBusConnectionProcessor  : namespace[xxxx-xxxx-xxx-xxx-xx.servicebus.windows.net] entityPath[N/A]: Connection not requested, yet. Requesting one.\r\n2022-02-28 16:08:19.202  INFO 18303 --- [ctor-executor-1] c.a.m.s.i.ServiceBusConnectionProcessor  : namespace[xxxx-xxxx-xxx-xxx-xx.servicebus.windows.net] entityPath[N/A]: Setting next AMQP channel.\r\n2022-02-28 16:08:19.202  INFO 18303 --- [ctor-executor-1] c.a.m.s.i.ServiceBusConnectionProcessor  : namespace[xxxx-xxxx-xxx-xxx-xx.servicebus.windows.net] entityPath[N/A]: Next AMQP channel received, updating 0 current subscribers\r\n2022-02-28 16:08:19.225  INFO 18303 --- [ctor-executor-1] c.a.c.a.i.ReactorConnection              : onConnectionShutdown connectionId[MF_2bb2ea_1646060894406], hostName[xxxx-xxxx-xxx-xxx-xx.servicebus.windows.net], message[Shutting down], shutdown signal[true]\r\n2022-02-28 16:08:19.227  INFO 18303 --- [ctor-executor-1] c.a.c.a.i.ReactorConnection              : onConnectionShutdown connectionId[MF_2bb2ea_1646060894406], hostName[xxxx-xxxx-xxx-xxx-xx.servicebus.windows.net], message[Shutting down], shutdown signal[false]\r\n2022-02-28 16:09:19.224  INFO 18303 --- [     parallel-1] c.a.c.a.i.RequestResponseChannel         : connectionId[MF_2bb2ea_1646060894406] linkName[cbs] Timed out waiting for RequestResponseChannel to complete closing. Manually closing.\r\n2022-02-28 16:09:19.227  WARN 18303 --- [     parallel-1] c.a.c.a.i.ReactorDispatcher              : ReactorDispatcher instance is closed. Should not continue dispatching work to this reactor.\r\n2022-02-28 16:09:19.227  INFO 18303 --- [     parallel-1] c.a.c.a.i.ReactorConnection              : connectionId[MF_2bb2ea_1646060894406] Could not schedule closeConnection work. Manually disposing.\r\n2022-02-28 16:09:19.229  INFO 18303 --- [     parallel-1] c.a.c.a.i.ReactorConnection              : connectionId[MF_2bb2ea_1646060894406] Closing executor.\r\n```\r\n\r\n**RESOLVED**\r\nSolved the problem by changing azure-identity package from 1.4.4 to 1.3.7 ","title":"java.lang.NoSuchMethodError: &#39;com.microsoft.aad.msal4j.SilentParameters$SilentParametersBuilder using azure sdk for java service bus","body":"<p>Im trying to send messages to my azure service bus topic using managed identity. None of the messages are sent to the topic. I have no problem when using connectionString instead of credential.</p>\n<p><strong>ServiceBusSenderClient</strong></p>\n<pre><code>    String namespace = getNamespace();\n    TokenCredential credential = new DefaultAzureCredentialBuilder()\n        .build();\n\n    ServiceBusSenderClient senderClient = new ServiceBusClientBuilder()\n        .credential(namespace, credential)\n        .sender()\n        .topicName(topicName)\n        .buildClient();\n    senderClient.sendMessage(new ServiceBusMessage(&quot;TESTTEST&quot;));\n</code></pre>\n<pre><code>2022-02-28 10:52:11.671  INFO 14901 --- [   scheduling-1] c.azure.identity.EnvironmentCredential   : Azure Identity =&gt; EnvironmentCredential invoking ClientSecretCredential\n2022-02-28 10:52:11.685  INFO 14901 --- [   scheduling-1] c.a.c.i.jackson.JacksonVersion           : Package versions: jackson-annotations=2.11.3, jackson-core=2.11.3, jackson-databind=2.11.3, jackson-dataformat-xml=2.11.3, jackson-datatype-jsr310=2.11.3, azure-core=1.23.1, Troubleshooting version conflicts: https://aka.ms/azsdk/java/dependency/troubleshoot\n2022-02-28 10:52:11.749  INFO 14901 --- [   scheduling-1] c.a.m.s.i.ServiceBusConnectionProcessor  : namespace[https://xxxx-xxxx-xxx-xxx-xx.servicebus.windows.net/] entityPath[N/A]: Setting next AMQP channel.\n2022-02-28 10:52:11.749  INFO 14901 --- [   scheduling-1] c.a.m.s.i.ServiceBusConnectionProcessor  : namespace[https://xxxx-xxxx-xxx-xxx-xx.servicebus.windows.net/] entityPath[N/A]: Next AMQP channel received, updating 0 current subscribers\n2022-02-28 10:52:11.751  INFO 14901 --- [   scheduling-1] c.a.m.s.ServiceBusClientBuilder          : # of open clients with shared connection: 1\n2022-02-28 10:52:11.770  INFO 14901 --- [   scheduling-1] c.a.c.a.i.ReactorConnection              : connectionId[MF_6e344f_1646041931731]: Creating and starting connection to https://xxxx-xxxx-xxx-xxx-xx.servicebus.windows.net/:5671\n2022-02-28 10:52:11.783  INFO 14901 --- [   scheduling-1] c.a.c.a.implementation.ReactorExecutor   : connectionId[MF_6e344f_1646041931731] message[Starting reactor.]\n2022-02-28 10:52:11.786  INFO 14901 --- [ctor-executor-1] c.a.c.a.i.handler.ConnectionHandler      : onConnectionInit connectionId[MF_6e344f_1646041931731] hostname[https://xxxx-xxxx-xxx-xxx-xx.servicebus.windows.net/] amqpHostname[https://xxxx-xxxx-xxx-xxx-xx.servicebus.windows.net/]\n2022-02-28 10:52:11.786  INFO 14901 --- [ctor-executor-1] c.a.c.a.i.handler.ReactorHandler         : connectionId[MF_6e344f_1646041931731] reactor.onReactorInit\n2022-02-28 10:52:11.786  INFO 14901 --- [ctor-executor-1] c.a.c.a.i.handler.ConnectionHandler      : onConnectionLocalOpen connectionId[MF_6e344f_1646041931731] hostname[https://xxxx-xxxx-xxx-xxx-xx.servicebus.windows.net/] errorCondition[null] errorDescription[null]\n2022-02-28 10:52:11.828  INFO 14901 --- [ctor-executor-1] c.a.c.a.i.handler.ConnectionHandler      : onConnectionBound connectionId[MF_6e344f_1646041931731] hostname[https://xxxx-xxxx-xxx-xxx-xx.servicebus.windows.net/] peerDetails[https://xxxx-xxxx-xxx-xxx-xx.servicebus.windows.net/:5671]\n2022-02-28 10:52:12.021  INFO 14901 --- [ctor-executor-1] c.a.c.a.i.handler.StrictTlsContextSpi    : SSLv2Hello was an enabled protocol. Filtering out.\n2022-02-28 10:52:12.136  WARN 14901 --- [ctor-executor-1] c.a.c.a.i.handler.ConnectionHandler      : onTransportError hostname[https://xxxx-xxxx-xxx-xxx-xx.servicebus.windows.net/], connectionId[MF_6e344f_1646041931731], error[Connection reset by peer]\n2022-02-28 10:52:12.139  INFO 14901 --- [ctor-executor-1] c.a.c.a.i.ReactorConnection              : connectionId[MF_6e344f_1646041931731] signal[Connection reset by peer, errorContext[NAMESPACE: https://xxxx-xxxx-xxx-xxx-xx.servicebus.windows.net/. ERROR CONTEXT: N/A], isTransient[false], initiatedByClient[false]]: Disposing of ReactorConnection.\n2022-02-28 10:52:12.151  INFO 14901 --- [ctor-executor-1] c.a.c.a.i.handler.ConnectionHandler      : onConnectionUnbound hostname[https://xxxx-xxxx-xxx-xxx-xx.servicebus.windows.net/], connectionId[MF_6e344f_1646041931731], state[ACTIVE], remoteState[UNINITIALIZED]\n2022-02-28 10:52:12.157  INFO 14901 --- [ctor-executor-1] c.a.c.a.i.ReactorConnection              : connectionId[MF_6e344f_1646041931731] Closing executor.\n2022-02-28 10:52:12.159  INFO 14901 --- [ctor-executor-1] c.a.c.a.i.handler.ConnectionHandler      : onConnectionLocalClose connectionId[MF_6e344f_1646041931731] hostname[https://xxxx-xxxx-xxx-xxx-xx.servicebus.windows.net/] errorCondition[null] errorDescription[null]\n2022-02-28 10:52:16.167  INFO 14901 --- [ctor-executor-1] c.a.c.a.implementation.ReactorExecutor   : connectionId[MF_6e344f_1646041931731] message[Processing all pending tasks and closing old reactor.]\n2022-02-28 10:52:16.169  INFO 14901 --- [ctor-executor-1] c.a.c.a.i.ReactorDispatcher              : connectionId[MF_6e344f_1646041931731] Reactor selectable is being disposed.\n2022-02-28 10:52:16.170  INFO 14901 --- [ctor-executor-1] c.a.c.a.i.ReactorConnection              : onConnectionShutdown connectionId[MF_6e344f_1646041931731], hostName[https://xxxx-xxxx-xxx-xxx-xx.servicebus.windows.net/], message[Shutting down], shutdown signal[false]\n2022-02-28 10:52:16.187 ERROR 14901 --- [ctor-executor-1] reactor.core.publisher.Operators         : Operator called default onErrorDropped\n\nreactor.core.Exceptions$ErrorCallbackNotImplemented: com.azure.core.amqp.exception.AmqpException: Connection reset by peer, errorContext[NAMESPACE: https://xxxx-xxxx-xxx-xxx-xx.servicebus.windows.net/. ERROR CONTEXT: N/A]\nCaused by: com.azure.core.amqp.exception.AmqpException: Connection reset by peer, errorContext[NAMESPACE: https://xxxx-xxxx-xxx-xxx-xx.servicebus.windows.net/. ERROR CONTEXT: N/A]\n    at com.azure.core.amqp.implementation.ExceptionUtil.toException(ExceptionUtil.java:85) ~[azure-core-amqp-2.3.7.jar:2.3.7]\n    at com.azure.core.amqp.implementation.handler.ConnectionHandler.notifyErrorContext(ConnectionHandler.java:325) ~[azure-core-amqp-2.3.7.jar:2.3.7]\n    at com.azure.core.amqp.implementation.handler.ConnectionHandler.onTransportError(ConnectionHandler.java:228) ~[azure-core-amqp-2.3.7.jar:2.3.7]\n    at org.apache.qpid.proton.engine.BaseHandler.handle(BaseHandler.java:191) ~[proton-j-0.33.8.jar:na]\n    at org.apache.qpid.proton.engine.impl.EventImpl.dispatch(EventImpl.java:108) ~[proton-j-0.33.8.jar:na]\n    at org.apache.qpid.proton.reactor.impl.ReactorImpl.dispatch(ReactorImpl.java:324) ~[proton-j-0.33.8.jar:na]\n    at org.apache.qpid.proton.reactor.impl.ReactorImpl.process(ReactorImpl.java:291) ~[proton-j-0.33.8.jar:na]\n    at com.azure.core.amqp.implementation.ReactorExecutor.run(ReactorExecutor.java:92) ~[azure-core-amqp-2.3.7.jar:2.3.7]\n    at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:68) ~[reactor-core-3.4.1.jar:3.4.1]\n    at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:28) ~[reactor-core-3.4.1.jar:3.4.1]\n    at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]\n    at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304) ~[na:na]\n    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]\n    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]\n    at java.base/java.lang.Thread.run(Thread.java:829) ~[na:na]\n</code></pre>\n<p>EDIT:\nAfter changing the namespace from <a href=\"https://xxxx-xxxx-xxx-xxx-xx.servicebus.windows.net/\" rel=\"nofollow noreferrer\">https://xxxx-xxxx-xxx-xxx-xx.servicebus.windows.net/</a> to xxxx-xxxx-xxx-xxx-xx.servicebus.windows.net, I got a little further.</p>\n<pre><code>2022-02-28 16:08:14.362  INFO 18303 --- [   scheduling-1] c.a.c.i.jackson.JacksonVersion           : Package versions: jackson-annotations=2.11.3, jackson-core=2.11.3, jackson-databind=2.11.3, jackson-dataformat-xml=2.11.3, jackson-datatype-jsr310=2.11.3, azure-core=1.23.1, Troubleshooting version conflicts: https://aka.ms/azsdk/java/dependency/troubleshoot\n2022-02-28 16:08:14.423  INFO 18303 --- [   scheduling-1] c.a.m.s.i.ServiceBusConnectionProcessor  : namespace[xxxx-xxxx-xxx-xxx-xx.servicebus.windows.net] entityPath[N/A]: Setting next AMQP channel.\n2022-02-28 16:08:14.423  INFO 18303 --- [   scheduling-1] c.a.m.s.i.ServiceBusConnectionProcessor  : namespace[xxxx-xxxx-xxx-xxx-xx.servicebus.windows.net] entityPath[N/A]: Next AMQP channel received, updating 0 current subscribers\n2022-02-28 16:08:14.424  INFO 18303 --- [   scheduling-1] c.a.m.s.ServiceBusClientBuilder          : # of open clients with shared connection: 1\n2022-02-28 16:08:14.442  INFO 18303 --- [   scheduling-1] c.a.c.a.i.ReactorConnection              : connectionId[MF_2bb2ea_1646060894406]: Creating and starting connection to xxxx-xxxx-xxx-xxx-xx.servicebus.windows.net:5671\n2022-02-28 16:08:14.454  INFO 18303 --- [   scheduling-1] c.a.c.a.implementation.ReactorExecutor   : connectionId[MF_2bb2ea_1646060894406] message[Starting reactor.]\n2022-02-28 16:08:14.456  INFO 18303 --- [ctor-executor-1] c.a.c.a.i.handler.ConnectionHandler      : onConnectionInit connectionId[MF_2bb2ea_1646060894406] hostname[xxxx-xxxx-xxx-xxx-xx.servicebus.windows.net] amqpHostname[xxxx-xxxx-xxx-xxx-xx.servicebus.windows.net]\n2022-02-28 16:08:14.456  INFO 18303 --- [ctor-executor-1] c.a.c.a.i.handler.ReactorHandler         : connectionId[MF_2bb2ea_1646060894406] reactor.onReactorInit\n2022-02-28 16:08:14.456  INFO 18303 --- [ctor-executor-1] c.a.c.a.i.handler.ConnectionHandler      : onConnectionLocalOpen connectionId[MF_2bb2ea_1646060894406] hostname[xxxx-xxxx-xxx-xxx-xx.servicebus.windows.net] errorCondition[null] errorDescription[null]\n2022-02-28 16:08:14.496  INFO 18303 --- [ctor-executor-1] c.a.c.a.i.handler.ConnectionHandler      : onConnectionBound connectionId[MF_2bb2ea_1646060894406] hostname[xxxx-xxxx-xxx-xxx-xx.servicebus.windows.net] peerDetails[xxxx-xxxx-xxx-xxx-xx.servicebus.windows.net:5671]\n2022-02-28 16:08:14.656  INFO 18303 --- [ctor-executor-1] c.a.c.a.i.handler.StrictTlsContextSpi    : SSLv2Hello was an enabled protocol. Filtering out.\n2022-02-28 16:08:14.979  INFO 18303 --- [ctor-executor-1] c.a.c.a.i.handler.ConnectionHandler      : onConnectionRemoteOpen hostname[xxxx-xxxx-xxx-xxx-xx.servicebus.windows.net], connectionId[MF_2bb2ea_1646060894406], remoteContainer[4faee4fd82174e4e8afdc32b31b04f28_G10]\n2022-02-28 16:08:14.980  INFO 18303 --- [ctor-executor-1] c.a.m.s.i.ServiceBusConnectionProcessor  : namespace[xxxx-xxxx-xxx-xxx-xx.servicebus.windows.net] entityPath[N/A]: Channel is now active.\n2022-02-28 16:08:15.056  INFO 18303 --- [ctor-executor-1] c.a.c.a.i.handler.SessionHandler         : onSessionRemoteOpen connectionId[MF_2bb2ea_1646060894406], entityName[mdm-asset-topic], sessionIncCapacity[0], sessionOutgoingWindow[2147483647]\n2022-02-28 16:08:15.071  INFO 18303 --- [ctor-executor-1] c.a.c.a.i.ReactorConnection              : Setting CBS channel.\n2022-02-28 16:08:15.127  INFO 18303 --- [ctor-executor-1] c.a.c.a.i.handler.SessionHandler         : onSessionRemoteOpen connectionId[MF_2bb2ea_1646060894406], entityName[cbs-session], sessionIncCapacity[0], sessionOutgoingWindow[2147483647]\n2022-02-28 16:08:15.136  INFO 18303 --- [ctor-executor-1] c.a.c.a.i.ReactorConnection              : connectionId[MF_2bb2ea_1646060894406] entityPath[$cbs] linkName[cbs] Emitting new response channel.\n2022-02-28 16:08:15.137  INFO 18303 --- [ctor-executor-1] c.a.c.a.i.RequestResponseChannel:$cbs    : namespace[MF_2bb2ea_1646060894406] entityPath[$cbs]: Setting next AMQP channel.\n2022-02-28 16:08:15.137  INFO 18303 --- [ctor-executor-1] c.a.c.a.i.RequestResponseChannel:$cbs    : namespace[MF_2bb2ea_1646060894406] entityPath[$cbs]: Next AMQP channel received, updating 1 current subscribers\n2022-02-28 16:08:15.196 ERROR 18303 --- [ctor-executor-1] reactor.core.scheduler.Schedulers        : Scheduler worker in group main failed with an uncaught exception\n\njava.lang.NoSuchMethodError: 'com.microsoft.aad.msal4j.SilentParameters$SilentParametersBuilder com.microsoft.aad.msal4j.SilentParameters$SilentParametersBuilder.tenant(java.lang.String)'\nat com.azure.identity.implementation.IdentityClient.lambda$authenticateWithConfidentialClientCache$29(IdentityClient.java:771) ~[azure-identity-1.4.4.jar:1.4.4]\nat reactor.core.publisher.Mono.lambda$fromFuture$2(Mono.java:649) ~[reactor-core-3.4.1.jar:3.4.1]\nat reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:44) ~[reactor-core-3.4.1.jar:3.4.1]\nat reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:64) ~[reactor-core-3.4.1.jar:3.4.1]\nat reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:157) ~[reactor-core-3.4.1.jar:3.4.1]\nat reactor.core.publisher.Operators$MonoSubscriber.complete(Operators.java:1784) ~[reactor-core-3.4.1.jar:3.4.1]\nat reactor.core.publisher.MonoCacheTime$CoordinatorSubscriber.signalCached(MonoCacheTime.java:328) ~[reactor-core-3.4.1.jar:3.4.1]\nat reactor.core.publisher.MonoCacheTime$CoordinatorSubscriber.onNext(MonoCacheTime.java:345) ~[reactor-core-3.4.1.jar:3.4.1]\nat reactor.core.publisher.Operators$ScalarSubscription.request(Operators.java:2346) ~[reactor-core-3.4.1.jar:3.4.1]\nat reactor.core.publisher.MonoCacheTime$CoordinatorSubscriber.onSubscribe(MonoCacheTime.java:284) ~[reactor-core-3.4.1.jar:3.4.1]\nat reactor.core.publisher.MonoJust.subscribe(MonoJust.java:54) ~[reactor-core-3.4.1.jar:3.4.1]\nat reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:52) ~[reactor-core-3.4.1.jar:3.4.1]\nat reactor.core.publisher.MonoCacheTime.subscribeOrReturn(MonoCacheTime.java:134) ~[reactor-core-3.4.1.jar:3.4.1]\nat reactor.core.publisher.Mono.subscribe(Mono.java:4031) ~[reactor-core-3.4.1.jar:3.4.1]\nat reactor.core.publisher.FluxFlatMap$FlatMapMain.onNext(FluxFlatMap.java:425) ~[reactor-core-3.4.1.jar:3.4.1]\nat reactor.core.publisher.FluxIterable$IterableSubscription.slowPath(FluxIterable.java:270) ~[reactor-core-3.4.1.jar:3.4.1]\nat reactor.core.publisher.FluxIterable$IterableSubscription.request(FluxIterable.java:228) ~[reactor-core-3.4.1.jar:3.4.1]\nat reactor.core.publisher.FluxFlatMap$FlatMapMain.onSubscribe(FluxFlatMap.java:370) ~[reactor-core-3.4.1.jar:3.4.1]\nat reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:164) ~[reactor-core-3.4.1.jar:3.4.1]\nat reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:86) ~[reactor-core-3.4.1.jar:3.4.1]\nat reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:64) ~[reactor-core-3.4.1.jar:3.4.1]\nat reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:157) ~[reactor-core-3.4.1.jar:3.4.1]\nat reactor.core.publisher.Operators$MonoSubscriber.complete(Operators.java:1784) ~[reactor-core-3.4.1.jar:3.4.1]\nat com.azure.core.amqp.implementation.AmqpChannelProcessor$ChannelSubscriber.onNext(AmqpChannelProcessor.java:389) ~[azure-core-amqp-2.3.7.jar:2.3.7]\nat com.azure.core.amqp.implementation.AmqpChannelProcessor.lambda$onNext$0(AmqpChannelProcessor.java:96) ~[azure-core-amqp-2.3.7.jar:2.3.7]\nat java.base/java.util.concurrent.ConcurrentLinkedDeque.forEach(ConcurrentLinkedDeque.java:1650) ~[na:na]\nat com.azure.core.amqp.implementation.AmqpChannelProcessor.onNext(AmqpChannelProcessor.java:96) ~[azure-core-amqp-2.3.7.jar:2.3.7]\nat reactor.core.publisher.FluxRepeatPredicate$RepeatPredicateSubscriber.onNext(FluxRepeatPredicate.java:85) ~[reactor-core-3.4.1.jar:3.4.1]\nat reactor.core.publisher.FluxPeekFuseable$PeekFuseableSubscriber.onNext(FluxPeekFuseable.java:210) ~[reactor-core-3.4.1.jar:3.4.1]\nat reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onNext(FluxMapFuseable.java:127) ~[reactor-core-3.4.1.jar:3.4.1]\nat reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onNext(FluxMapFuseable.java:127) ~[reactor-core-3.4.1.jar:3.4.1]\nat reactor.core.publisher.Operators$MonoSubscriber.complete(Operators.java:1784) ~[reactor-core-3.4.1.jar:3.4.1]\nat reactor.core.publisher.MonoFlatMap$FlatMapInner.onNext(MonoFlatMap.java:249) ~[reactor-core-3.4.1.jar:3.4.1]\nat reactor.core.publisher.Operators$MonoSubscriber.complete(Operators.java:1784) ~[reactor-core-3.4.1.jar:3.4.1]\nat reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.drain(MonoIgnoreThen.java:148) ~[reactor-core-3.4.1.jar:3.4.1]\nat reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.ignoreDone(MonoIgnoreThen.java:191) ~[reactor-core-3.4.1.jar:3.4.1]\nat reactor.core.publisher.MonoIgnoreThen$ThenIgnoreInner.onComplete(MonoIgnoreThen.java:248) ~[reactor-core-3.4.1.jar:3.4.1]\nat reactor.core.publisher.SerializedSubscriber.onComplete(SerializedSubscriber.java:146) ~[reactor-core-3.4.1.jar:3.4.1]\nat reactor.core.publisher.SerializedSubscriber.onComplete(SerializedSubscriber.java:146) ~[reactor-core-3.4.1.jar:3.4.1]\nat reactor.core.publisher.FluxTimeout$TimeoutMainSubscriber.onComplete(FluxTimeout.java:233) ~[reactor-core-3.4.1.jar:3.4.1]\nat reactor.core.publisher.MonoNext$NextSubscriber.onComplete(MonoNext.java:102) ~[reactor-core-3.4.1.jar:3.4.1]\nat reactor.core.publisher.MonoNext$NextSubscriber.onNext(MonoNext.java:83) ~[reactor-core-3.4.1.jar:3.4.1]\nat reactor.core.publisher.FluxFilterFuseable$FilterFuseableSubscriber.onNext(FluxFilterFuseable.java:118) ~[reactor-core-3.4.1.jar:3.4.1]\nat reactor.core.publisher.FluxReplay$SizeBoundReplayBuffer.replayNormal(FluxReplay.java:814) ~[reactor-core-3.4.1.jar:3.4.1]\nat reactor.core.publisher.FluxReplay$SizeBoundReplayBuffer.replay(FluxReplay.java:898) ~[reactor-core-3.4.1.jar:3.4.1]\nat reactor.core.publisher.FluxReplay$ReplaySubscriber.onNext(FluxReplay.java:1246) ~[reactor-core-3.4.1.jar:3.4.1]\nat reactor.core.publisher.FluxPeek$PeekSubscriber.onNext(FluxPeek.java:199) ~[reactor-core-3.4.1.jar:3.4.1]\nat reactor.core.publisher.FluxPeek$PeekSubscriber.onNext(FluxPeek.java:199) ~[reactor-core-3.4.1.jar:3.4.1]\nat reactor.core.publisher.FluxMap$MapSubscriber.onNext(FluxMap.java:120) ~[reactor-core-3.4.1.jar:3.4.1]\nat reactor.core.publisher.FluxDistinctUntilChanged$DistinctUntilChangedSubscriber.tryOnNext(FluxDistinctUntilChanged.java:148) ~[reactor-core-3.4.1.jar:3.4.1]\nat reactor.core.publisher.FluxDistinctUntilChanged$DistinctUntilChangedSubscriber.onNext(FluxDistinctUntilChanged.java:101) ~[reactor-core-3.4.1.jar:3.4.1]\nat reactor.core.publisher.FluxReplay$SizeBoundReplayBuffer.replayNormal(FluxReplay.java:814) ~[reactor-core-3.4.1.jar:3.4.1]\nat reactor.core.publisher.FluxReplay$SizeBoundReplayBuffer.replay(FluxReplay.java:898) ~[reactor-core-3.4.1.jar:3.4.1]\nat reactor.core.publisher.ReplayProcessor.tryEmitNext(ReplayProcessor.java:508) ~[reactor-core-3.4.1.jar:3.4.1]\nat reactor.core.publisher.SinkManySerialized.tryEmitNext(SinkManySerialized.java:97) ~[reactor-core-3.4.1.jar:3.4.1]\nat reactor.core.publisher.InternalManySink.emitNext(InternalManySink.java:27) ~[reactor-core-3.4.1.jar:3.4.1]\nat com.azure.core.amqp.implementation.handler.Handler.onNext(Handler.java:87) ~[azure-core-amqp-2.3.7.jar:2.3.7]\nat com.azure.core.amqp.implementation.handler.SessionHandler.onSessionRemoteOpen(SessionHandler.java:84) ~[azure-core-amqp-2.3.7.jar:2.3.7]\nat org.apache.qpid.proton.engine.BaseHandler.handle(BaseHandler.java:146) ~[proton-j-0.33.8.jar:na]\nat org.apache.qpid.proton.engine.impl.EventImpl.dispatch(EventImpl.java:108) ~[proton-j-0.33.8.jar:na]\nat org.apache.qpid.proton.reactor.impl.ReactorImpl.dispatch(ReactorImpl.java:324) ~[proton-j-0.33.8.jar:na]\nat org.apache.qpid.proton.reactor.impl.ReactorImpl.process(ReactorImpl.java:291) ~[proton-j-0.33.8.jar:na]\nat com.azure.core.amqp.implementation.ReactorExecutor.run(ReactorExecutor.java:92) ~[azure-core-amqp-2.3.7.jar:2.3.7]\nat reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:68) ~[reactor-core-3.4.1.jar:3.4.1]\nat reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:28) ~[reactor-core-3.4.1.jar:3.4.1]\nat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]\nat java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304) ~[na:na]\nat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]\nat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]\nat java.base/java.lang.Thread.run(Thread.java:829) ~[na:na]\n\n2022-02-28 16:08:19.199  INFO 18303 --- [ctor-executor-1] c.a.c.a.implementation.ReactorExecutor   : connectionId[MF_2bb2ea_1646060894406] message[Processing all pending tasks and closing old reactor.]\n2022-02-28 16:08:19.200  INFO 18303 --- [ctor-executor-1] c.a.c.a.i.handler.SessionHandler         : onSessionRemoteOpen connectionId[MF_2bb2ea_1646060894406], entityName[cbs-session], sessionIncCapacity[0], sessionOutgoingWindow[2147483647]\n2022-02-28 16:08:19.201  INFO 18303 --- [ctor-executor-1] c.a.c.a.i.ReactorDispatcher              : connectionId[MF_2bb2ea_1646060894406] Reactor selectable is being disposed.\n2022-02-28 16:08:19.201  INFO 18303 --- [ctor-executor-1] c.a.c.a.i.ReactorConnection              : onConnectionShutdown connectionId[MF_2bb2ea_1646060894406], hostName[xxxx-xxxx-xxx-xxx-xx.servicebus.windows.net], message[Shutting down], shutdown signal[false]\n2022-02-28 16:08:19.201  INFO 18303 --- [ctor-executor-1] c.a.c.a.i.ReactorConnection              : connectionId[MF_2bb2ea_1646060894406] signal[connectionId[MF_2bb2ea_1646060894406] Reactor selectable is disposed., isTransient[false], initiatedByClient[false]]: Disposing of ReactorConnection.\n2022-02-28 16:08:19.201  INFO 18303 --- [ctor-executor-1] c.a.m.s.i.ServiceBusConnectionProcessor  : namespace[xxxx-xxxx-xxx-xxx-xx.servicebus.windows.net] entityPath[N/A]: Channel is closed. Requesting upstream.\n2022-02-28 16:08:19.202  INFO 18303 --- [ctor-executor-1] c.a.m.s.i.ServiceBusConnectionProcessor  : namespace[xxxx-xxxx-xxx-xxx-xx.servicebus.windows.net] entityPath[N/A]: Connection not requested, yet. Requesting one.\n2022-02-28 16:08:19.202  INFO 18303 --- [ctor-executor-1] c.a.m.s.i.ServiceBusConnectionProcessor  : namespace[xxxx-xxxx-xxx-xxx-xx.servicebus.windows.net] entityPath[N/A]: Setting next AMQP channel.\n2022-02-28 16:08:19.202  INFO 18303 --- [ctor-executor-1] c.a.m.s.i.ServiceBusConnectionProcessor  : namespace[xxxx-xxxx-xxx-xxx-xx.servicebus.windows.net] entityPath[N/A]: Next AMQP channel received, updating 0 current subscribers\n2022-02-28 16:08:19.225  INFO 18303 --- [ctor-executor-1] c.a.c.a.i.ReactorConnection              : onConnectionShutdown connectionId[MF_2bb2ea_1646060894406], hostName[xxxx-xxxx-xxx-xxx-xx.servicebus.windows.net], message[Shutting down], shutdown signal[true]\n2022-02-28 16:08:19.227  INFO 18303 --- [ctor-executor-1] c.a.c.a.i.ReactorConnection              : onConnectionShutdown connectionId[MF_2bb2ea_1646060894406], hostName[xxxx-xxxx-xxx-xxx-xx.servicebus.windows.net], message[Shutting down], shutdown signal[false]\n2022-02-28 16:09:19.224  INFO 18303 --- [     parallel-1] c.a.c.a.i.RequestResponseChannel         : connectionId[MF_2bb2ea_1646060894406] linkName[cbs] Timed out waiting for RequestResponseChannel to complete closing. Manually closing.\n2022-02-28 16:09:19.227  WARN 18303 --- [     parallel-1] c.a.c.a.i.ReactorDispatcher              : ReactorDispatcher instance is closed. Should not continue dispatching work to this reactor.\n2022-02-28 16:09:19.227  INFO 18303 --- [     parallel-1] c.a.c.a.i.ReactorConnection              : connectionId[MF_2bb2ea_1646060894406] Could not schedule closeConnection work. Manually disposing.\n2022-02-28 16:09:19.229  INFO 18303 --- [     parallel-1] c.a.c.a.i.ReactorConnection              : connectionId[MF_2bb2ea_1646060894406] Closing executor.\n</code></pre>\n<p><strong>RESOLVED</strong>\nSolved the problem by changing azure-identity package from 1.4.4 to 1.3.7</p>\n"},{"tags":["java","android","firebase","firebase-realtime-database"],"answers":[{"tags":[],"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1646222308,"creation_date":1646222308,"answer_id":71322313,"question_id":71321751,"body_markdown":"You cannot keep your app always in sync with the Firebase servers, while the app is in the background because the Android OS will eventually close it in favor of other apps.\r\n\r\nWhen you enable offline persistence, it means your app writes the data locally to the device so you can continue to work with it **while offline**, or even if the user or operating system restarts the app.\r\n\r\nIf you want to perform some actions while the app is in the background, you should consider using a [service][1].\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/51452004/how-to-keep-firebasedatabase-connection-always-online-at-least-for-few-hours/51455510","title":"How to make a worker to setvalue in Firebase Database when app is closed and internet recovered?","body":"<p>You cannot keep your app always in sync with the Firebase servers, while the app is in the background because the Android OS will eventually close it in favor of other apps.</p>\n<p>When you enable offline persistence, it means your app writes the data locally to the device so you can continue to work with it <strong>while offline</strong>, or even if the user or operating system restarts the app.</p>\n<p>If you want to perform some actions while the app is in the background, you should consider using a <a href=\"https://stackoverflow.com/questions/51452004/how-to-keep-firebasedatabase-connection-always-online-at-least-for-few-hours/51455510\">service</a>.</p>\n"}],"owner":{"account_id":22915727,"reputation":25,"user_id":17052350,"display_name":"dvox"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":76,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":71322313,"answer_count":1,"score":0,"last_activity_date":1646234048,"creation_date":1646219828,"question_id":71321751,"body_markdown":"Now in my app, if I have persistence disk enabled... if I setvalue while offline and close app, the value sets only when I reopen it. But I want to set it when internet connection recovers. Any solution?\r\nI use firebase for android studio with java.","title":"How to make a worker to setvalue in Firebase Database when app is closed and internet recovered?","body":"<p>Now in my app, if I have persistence disk enabled... if I setvalue while offline and close app, the value sets only when I reopen it. But I want to set it when internet connection recovers. Any solution?\nI use firebase for android studio with java.</p>\n"},{"tags":["java","certificate","weblogic","newrelic","truststore"],"answers":[{"tags":[],"owner":{"account_id":91652,"reputation":458,"user_id":251542,"display_name":"Andr&#233; Onuki"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1646233965,"creation_date":1646233965,"answer_id":71325018,"question_id":70974309,"body_markdown":"The Java agent relies on the default X.509 CertificateFactory that only accepts `.pem` files.\r\n\r\nRelevant lines:\r\n\r\n    try (InputStream is = new BufferedInputStream(new FileInputStream(caBundlePath))) {\r\n      CertificateFactory cf = CertificateFactory.getInstance(&quot;X.509&quot;);\r\n      // ...\r\n      caCerts.add((X509Certificate) cf.generateCertificate(is));\r\n      // ...\r\n    }\r\nhttps://github.com/newrelic/newrelic-java-agent/blob/f18215d145bd6992c0fe74a8c503459799e108ca/newrelic-agent/src/main/java/com/newrelic/agent/transport/apache/ApacheSSLManager.java#L54-L58\r\n\r\nIf you can override the SPI for the X.509 CertificateFactory for one that accepts `.pks` files you might be able to use your file.","title":"NewRelic java agent unable to identify .jks trust store","body":"<p>The Java agent relies on the default X.509 CertificateFactory that only accepts <code>.pem</code> files.</p>\n<p>Relevant lines:</p>\n<pre><code>try (InputStream is = new BufferedInputStream(new FileInputStream(caBundlePath))) {\n  CertificateFactory cf = CertificateFactory.getInstance(&quot;X.509&quot;);\n  // ...\n  caCerts.add((X509Certificate) cf.generateCertificate(is));\n  // ...\n}\n</code></pre>\n<p><a href=\"https://github.com/newrelic/newrelic-java-agent/blob/f18215d145bd6992c0fe74a8c503459799e108ca/newrelic-agent/src/main/java/com/newrelic/agent/transport/apache/ApacheSSLManager.java#L54-L58\" rel=\"nofollow noreferrer\">https://github.com/newrelic/newrelic-java-agent/blob/f18215d145bd6992c0fe74a8c503459799e108ca/newrelic-agent/src/main/java/com/newrelic/agent/transport/apache/ApacheSSLManager.java#L54-L58</a></p>\n<p>If you can override the SPI for the X.509 CertificateFactory for one that accepts <code>.pks</code> files you might be able to use your file.</p>\n"}],"owner":{"account_id":14468258,"reputation":1645,"user_id":10451021,"display_name":"Salman"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":79,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1646233965,"creation_date":1643903444,"question_id":70974309,"body_markdown":"We are using a NewRelic java agent to monitor java application. The application uses a custom trust store with .jks extension. However the agent by default or by explicitly specifying the path to the trust store does not identify the trust store and throws an error.\r\n\r\nHow can we use this trust store without changing the extension as we need to use as it is.\r\n\r\n&gt; INFO: Using ca_bundle_path:\r\n&gt; D:\\Java\\jdk1.8.0_311\\jre\\lib\\security\\cacerts\r\n&gt; 2022-01-24T16:55:40,590+0530 [7048 1] com.newrelic ERROR: Unable to\r\n&gt; generate ca_bundle_path certificate. Verify the certificate format.\r\n&gt; Will not process further certs.\r\n&gt; java.security.cert.CertificateException: Could not parse certificate:\r\n&gt; java.io.IOException: Empty input","title":"NewRelic java agent unable to identify .jks trust store","body":"<p>We are using a NewRelic java agent to monitor java application. The application uses a custom trust store with .jks extension. However the agent by default or by explicitly specifying the path to the trust store does not identify the trust store and throws an error.</p>\n<p>How can we use this trust store without changing the extension as we need to use as it is.</p>\n<blockquote>\n<p>INFO: Using ca_bundle_path:\nD:\\Java\\jdk1.8.0_311\\jre\\lib\\security\\cacerts\n2022-01-24T16:55:40,590+0530 [7048 1] com.newrelic ERROR: Unable to\ngenerate ca_bundle_path certificate. Verify the certificate format.\nWill not process further certs.\njava.security.cert.CertificateException: Could not parse certificate:\njava.io.IOException: Empty input</p>\n</blockquote>\n"},{"tags":["java","spring-boot-actuator","controller-tests"],"answers":[{"tags":[],"owner":{"account_id":17228781,"reputation":3548,"user_id":12473843,"display_name":"Sergey Tsypanov"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1646232419,"creation_date":1646221899,"answer_id":71322238,"question_id":71321300,"body_markdown":"I guess *I&#39;m narrowing down the context* is the answer to your question: Spring includes only the controller into its context skipping everything else. Try to include `HealthEndpointAutoConfiguration` too.","title":"No qualifying bean of type &#39;org.springframework.boot.actuate.health.HealthEndpoint&#39; in controller test","body":"<p>I guess <em>I'm narrowing down the context</em> is the answer to your question: Spring includes only the controller into its context skipping everything else. Try to include <code>HealthEndpointAutoConfiguration</code> too.</p>\n"},{"tags":[],"owner":{"account_id":10413480,"reputation":3922,"user_id":10950272,"display_name":"makozaki"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646232699,"creation_date":1646232699,"answer_id":71324709,"question_id":71321300,"body_markdown":"I fixed the problem by creating `TestApplication.java` which includes only one controller of my application. Then I&#39;m testing by loading test app into context `@SpringBootTest(classes = TestApplication.class)`.\r\n\r\n```java\r\n@SpringBootApplication\r\n@Import(AppStatusRestController.class)\r\npublic class TestApplication {\r\n    public static void main(String[] args) {\r\n        SpringApplication.run(TestApplication.class, args);\r\n    }\r\n}\r\n```\r\n\r\n```java\r\n@SpringBootTest(classes = TestApplication.class)\r\n@AutoConfigureMockMvc\r\n@TestPropertySource(properties = { &quot;management.endpoints.web.exposure.include=health,info&quot; })\r\nclass AppStatusRestControllerTest {\r\n\r\n    @Autowired\r\n    private MockMvc mockMvc;\r\n\r\n    @Test\r\n    void version() throws Exception {\r\n        MvcResult mvcResult = this.mockMvc.perform(get(&quot;/status&quot;)).andReturn();\r\n        String contentAsString = mvcResult.getResponse().getContentAsString();\r\n        ObjectMapper objectMapper = new ObjectMapper();\r\n        Status result = objectMapper.readValue(contentAsString, Status.class);\r\n        assertEquals(result.getStatus(), &quot;UP&quot;);\r\n    }\r\n}\r\n```","title":"No qualifying bean of type &#39;org.springframework.boot.actuate.health.HealthEndpoint&#39; in controller test","body":"<p>I fixed the problem by creating <code>TestApplication.java</code> which includes only one controller of my application. Then I'm testing by loading test app into context <code>@SpringBootTest(classes = TestApplication.class)</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@SpringBootApplication\n@Import(AppStatusRestController.class)\npublic class TestApplication {\n    public static void main(String[] args) {\n        SpringApplication.run(TestApplication.class, args);\n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@SpringBootTest(classes = TestApplication.class)\n@AutoConfigureMockMvc\n@TestPropertySource(properties = { &quot;management.endpoints.web.exposure.include=health,info&quot; })\nclass AppStatusRestControllerTest {\n\n    @Autowired\n    private MockMvc mockMvc;\n\n    @Test\n    void version() throws Exception {\n        MvcResult mvcResult = this.mockMvc.perform(get(&quot;/status&quot;)).andReturn();\n        String contentAsString = mvcResult.getResponse().getContentAsString();\n        ObjectMapper objectMapper = new ObjectMapper();\n        Status result = objectMapper.readValue(contentAsString, Status.class);\n        assertEquals(result.getStatus(), &quot;UP&quot;);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13580418,"reputation":676,"user_id":9796589,"display_name":"red"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1646233734,"creation_date":1646233734,"answer_id":71324974,"question_id":71321300,"body_markdown":"You can use `@SpringBootTest()` with no classes and it will work too. In this case, Spring will load the full context for executing the tests.\r\n\r\n```\r\n@SpringBootTest()\r\n@AutoConfigureMockMvc\r\n@TestPropertySource(properties = { &quot;management.endpoints.web.exposure.include=health,info&quot; })\r\nclass AppStatusRestControllerTest {\r\n\r\n    @Autowired\r\n    private MockMvc mockMvc;\r\n\r\n    @Test\r\n    void version() throws Exception {\r\n        MvcResult mvcResult = this.mockMvc.perform(get(&quot;/status&quot;)).andReturn();\r\n        String contentAsString = mvcResult.getResponse().getContentAsString();\r\n        ObjectMapper objectMapper = new ObjectMapper();\r\n        Status result = objectMapper.readValue(contentAsString, Status.class);\r\n        assertEquals(result.getStatus(), &quot;UP&quot;);\r\n    }\r\n}\r\n```","title":"No qualifying bean of type &#39;org.springframework.boot.actuate.health.HealthEndpoint&#39; in controller test","body":"<p>You can use <code>@SpringBootTest()</code> with no classes and it will work too. In this case, Spring will load the full context for executing the tests.</p>\n<pre><code>@SpringBootTest()\n@AutoConfigureMockMvc\n@TestPropertySource(properties = { &quot;management.endpoints.web.exposure.include=health,info&quot; })\nclass AppStatusRestControllerTest {\n\n    @Autowired\n    private MockMvc mockMvc;\n\n    @Test\n    void version() throws Exception {\n        MvcResult mvcResult = this.mockMvc.perform(get(&quot;/status&quot;)).andReturn();\n        String contentAsString = mvcResult.getResponse().getContentAsString();\n        ObjectMapper objectMapper = new ObjectMapper();\n        Status result = objectMapper.readValue(contentAsString, Status.class);\n        assertEquals(result.getStatus(), &quot;UP&quot;);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":10413480,"reputation":3922,"user_id":10950272,"display_name":"makozaki"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4197,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":71322238,"answer_count":3,"score":2,"last_activity_date":1646233734,"creation_date":1646217728,"question_id":71321300,"body_markdown":"I wrote a controller which combines actuator info.\r\n```java\r\n@RestController\r\n@Slf4j\r\npublic class AppStatusRestController {\r\n    private final HealthEndpoint healthEndpoint;\r\n    private final InfoEndpoint infoEndpoint;\r\n\r\n    public AppStatusRestController(HealthEndpoint healthEndpoint, InfoEndpoint infoEndpoint) {\r\n        this.healthEndpoint = healthEndpoint;\r\n        this.infoEndpoint = infoEndpoint;\r\n    }\r\n\r\n    @GetMapping(&quot;/status&quot;)\r\n    public Status status() {\r\n        Map&lt;String, Object&gt; info = infoEndpoint.info();\r\n        return Status.builder()\r\n                .status(healthEndpoint.health().getStatus().getCode())\r\n                .appName(&quot;My application&quot;)\r\n                .version(((Map&lt;String, Object&gt;) info.get(&quot;build&quot;)).get(&quot;version&quot;).toString())\r\n                .buildDateTime(((Map&lt;String, Object&gt;) info.get(&quot;build&quot;)).get(&quot;timestamp&quot;).toString())\r\n                .build();\r\n    }\r\n}\r\n```\r\n\r\nIn my test I get an error `No qualifying bean of type &#39;org.springframework.boot.actuate.health.HealthEndpoint&#39;`.\r\n```java\r\n@SpringBootTest(classes = AppStatusRestController.class)\r\n@TestPropertySource(properties = &quot;management.endpoints.web.exposure.include=*&quot;)\r\nclass AppStatusRestControllerTest {\r\n\r\n    @Test\r\n    void status() {\r\n    }\r\n}\r\n```\r\nHow can I actiavate default spring actuator beans in controller test(`@SpringBootTest`/`@WebMvcTest`)?","title":"No qualifying bean of type &#39;org.springframework.boot.actuate.health.HealthEndpoint&#39; in controller test","body":"<p>I wrote a controller which combines actuator info.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@RestController\n@Slf4j\npublic class AppStatusRestController {\n    private final HealthEndpoint healthEndpoint;\n    private final InfoEndpoint infoEndpoint;\n\n    public AppStatusRestController(HealthEndpoint healthEndpoint, InfoEndpoint infoEndpoint) {\n        this.healthEndpoint = healthEndpoint;\n        this.infoEndpoint = infoEndpoint;\n    }\n\n    @GetMapping(&quot;/status&quot;)\n    public Status status() {\n        Map&lt;String, Object&gt; info = infoEndpoint.info();\n        return Status.builder()\n                .status(healthEndpoint.health().getStatus().getCode())\n                .appName(&quot;My application&quot;)\n                .version(((Map&lt;String, Object&gt;) info.get(&quot;build&quot;)).get(&quot;version&quot;).toString())\n                .buildDateTime(((Map&lt;String, Object&gt;) info.get(&quot;build&quot;)).get(&quot;timestamp&quot;).toString())\n                .build();\n    }\n}\n</code></pre>\n<p>In my test I get an error <code>No qualifying bean of type 'org.springframework.boot.actuate.health.HealthEndpoint'</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@SpringBootTest(classes = AppStatusRestController.class)\n@TestPropertySource(properties = &quot;management.endpoints.web.exposure.include=*&quot;)\nclass AppStatusRestControllerTest {\n\n    @Test\n    void status() {\n    }\n}\n</code></pre>\n<p>How can I actiavate default spring actuator beans in controller test(<code>@SpringBootTest</code>/<code>@WebMvcTest</code>)?</p>\n"},{"tags":["java","multithreading","concurrency"],"comments":[{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1645532858,"post_id":71212008,"comment_id":125891312,"body_markdown":"Your understanding was true before Java&#160;5. And it still would be true when the field is modified after publication.","body":"Your understanding was true before Java 5. And it still would be true when the field is modified after publication."}],"answers":[{"tags":[],"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1645473905,"creation_date":1645473019,"answer_id":71212240,"question_id":71212008,"body_markdown":"No, because `volatile` being used establishes a happens-before relationship. Without it various reorderings and other things are allowed, which make the inconsistent state possible, but with it the JVM must give you the expected outcome.\r\n\r\nIn this case `volatile` is **not** used for the visibility effects (threads seeing up to date values), but the safe publishing provided by the happpens-before. This feature of `volatile` is often left out when its use is explained.","title":"Can another thread see an effectively immutable object in an inconsistent state if it is published with a volatile reference?","body":"<p>No, because <code>volatile</code> being used establishes a happens-before relationship. Without it various reorderings and other things are allowed, which make the inconsistent state possible, but with it the JVM must give you the expected outcome.</p>\n<p>In this case <code>volatile</code> is <strong>not</strong> used for the visibility effects (threads seeing up to date values), but the safe publishing provided by the happpens-before. This feature of <code>volatile</code> is often left out when its use is explained.</p>\n"},{"tags":[],"owner":{"account_id":24334457,"reputation":31,"user_id":18272775,"display_name":"user18272775"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1645482567,"creation_date":1645482567,"answer_id":71213773,"question_id":71212008,"body_markdown":"[The answer above](https://stackoverflow.com/a/71212240) is correct.  \r\n\r\nJust keep in mind that  `effectively immutable + safe publication` behaves unintuitively in some cases.  \r\nFor instance:\r\n1) If\r\n   - at first `thread 1` safely publishes object `o` to `thread 2`\r\n   - then `thread 2` unsafely publishes object `o` to `thread 3`\r\n   \r\n   in the end `thread 3` can see object `o` in an inconsistent state  \r\n   See [[1]](https://stackoverflow.com/questions/10254456/effectively-immutable-object/10254521#comment13189477_10254521) and [[2]](https://stackoverflow.com/q/66214096)\r\n2) also [this](https://shipilev.net/blog/2016/close-encounters-of-jmm-kind/#wishful-volatiles-are-finals)\r\n\r\nReal immutable objects have no such problems.","title":"Can another thread see an effectively immutable object in an inconsistent state if it is published with a volatile reference?","body":"<p><a href=\"https://stackoverflow.com/a/71212240\">The answer above</a> is correct.</p>\n<p>Just keep in mind that  <code>effectively immutable + safe publication</code> behaves unintuitively in some cases.<br />\nFor instance:</p>\n<ol>\n<li><p>If</p>\n<ul>\n<li>at first <code>thread 1</code> safely publishes object <code>o</code> to <code>thread 2</code></li>\n<li>then <code>thread 2</code> unsafely publishes object <code>o</code> to <code>thread 3</code></li>\n</ul>\n<p>in the end <code>thread 3</code> can see object <code>o</code> in an inconsistent state<br />\nSee <a href=\"https://stackoverflow.com/questions/10254456/effectively-immutable-object/10254521#comment13189477_10254521\">[1]</a> and <a href=\"https://stackoverflow.com/q/66214096\">[2]</a></p>\n</li>\n<li><p>also <a href=\"https://shipilev.net/blog/2016/close-encounters-of-jmm-kind/#wishful-volatiles-are-finals\" rel=\"nofollow noreferrer\">this</a></p>\n</li>\n</ol>\n<p>Real immutable objects have no such problems.</p>\n"},{"tags":[],"owner":{"account_id":1056871,"reputation":117729,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1646233694,"creation_date":1645609597,"answer_id":71234632,"question_id":71212008,"body_markdown":"The [accepted answer](https://stackoverflow.com/a/71212240/1059372) is simple, yet great. `volatile` is rarely explained and used for safe publishing, yet it provides the needed guarantees. \r\n\r\n\r\nimho, to properly prove that this works with volatile, there are some things that need explaining. \r\n\r\nThe first one is &quot;program order&quot;, or the perceivable order in which things happen within a thread. We can draw this to easier grasp things:\r\n\r\n     --------------- T1 -------------\r\n     | write to num or this.num=num |\r\n     --------------------------------\r\n                     |\r\n                    \\|/  (PO)\r\n     --------------- T1 -------------\r\n     |    write Wrapper instance    |\r\n     --------------------------------\r\n                     |\r\n                    \\|/  (??)\r\n     --------------- T2 -------------\r\n     |    read Wrapper instance     |\r\n     --------------------------------\r\n                     |\r\n                    \\|/  (PO)\r\n     --------------- T2 -------------\r\n     |      read num first time     |\r\n     --------------------------------\r\n                     |\r\n                    \\|/  (PO)\r\n     --------------- T2 -------------\r\n     |      read num second time    |\r\n     --------------------------------\r\n  \r\n`T1` and `T2` are thread1 and thread2 and `PO` is program order. Now a rule in the `JLS` says this:\r\n\r\n&gt; If x and y are actions of the same thread and x comes before y in program order, then hb(x, y). \r\n\r\nAs such we can replace `PO` in the above drawing with `HB` (happens-before). \r\n\r\nAt the same time, if `wrapper` instance is _not_ volatile, there is no special relation between _writing_ to `wrapper` (from `T1`) and _reading_ from `wrapper` in `T2`. \r\n\r\nWe need to also introduce here _happen-before consistency_:\r\n\r\n&gt; a _read_ sees the last _write_ in happens-before order, or _any other_ write.\r\n\r\nSince we do not have a full chain of happens-before here (that `??` does not establish one), we get that : &quot;...or any other read&quot;, which means we can read _different_ values in those two reads of `num` (in that `num != num`).\r\n\r\n---\r\n\r\nIf you make `wrapper` instance `volatile`, `JLS` says that:\r\n\r\n&gt; A write to a volatile field (&#167;8.3.1.4) happens-before every subsequent read of that field. \r\n\r\nAs such, we have this now:\r\n\r\n\r\n     --------------- T1 -------------\r\n     | write to num or this.num=num |\r\n     --------------------------------\r\n                     |\r\n                    \\|/  (HB)\r\n     --------------- T1 -------------\r\n     |    write Wrapper instance    |\r\n     --------------------------------\r\n                     |\r\n                    \\|/  (HB)\r\n     --------------- T2 -------------\r\n     |    read Wrapper instance     |\r\n     --------------------------------\r\n                     |\r\n                    \\|/  (HB)\r\n     --------------- T2 -------------\r\n     |      read num first time     |\r\n     --------------------------------\r\n                     |\r\n                    \\|/  (HB)\r\n     --------------- T2 -------------\r\n     |      read num second time    |\r\n     --------------------------------\r\n\r\n \r\nNow, happens-before consistency says : &quot;a _read_ sees the last _write_ in happens-before order...&quot;; the key part here is &quot;in happens-before order&quot;. This means that _both_ reads of `num` will see the write of it (again: in happens before order).\r\n  \r\n\r\n\r\n\r\n\r\n \r\n\r\n\r\n\r\n","title":"Can another thread see an effectively immutable object in an inconsistent state if it is published with a volatile reference?","body":"<p>The <a href=\"https://stackoverflow.com/a/71212240/1059372\">accepted answer</a> is simple, yet great. <code>volatile</code> is rarely explained and used for safe publishing, yet it provides the needed guarantees.</p>\n<p>imho, to properly prove that this works with volatile, there are some things that need explaining.</p>\n<p>The first one is &quot;program order&quot;, or the perceivable order in which things happen within a thread. We can draw this to easier grasp things:</p>\n<pre><code> --------------- T1 -------------\n | write to num or this.num=num |\n --------------------------------\n                 |\n                \\|/  (PO)\n --------------- T1 -------------\n |    write Wrapper instance    |\n --------------------------------\n                 |\n                \\|/  (??)\n --------------- T2 -------------\n |    read Wrapper instance     |\n --------------------------------\n                 |\n                \\|/  (PO)\n --------------- T2 -------------\n |      read num first time     |\n --------------------------------\n                 |\n                \\|/  (PO)\n --------------- T2 -------------\n |      read num second time    |\n --------------------------------\n</code></pre>\n<p><code>T1</code> and <code>T2</code> are thread1 and thread2 and <code>PO</code> is program order. Now a rule in the <code>JLS</code> says this:</p>\n<blockquote>\n<p>If x and y are actions of the same thread and x comes before y in program order, then hb(x, y).</p>\n</blockquote>\n<p>As such we can replace <code>PO</code> in the above drawing with <code>HB</code> (happens-before).</p>\n<p>At the same time, if <code>wrapper</code> instance is <em>not</em> volatile, there is no special relation between <em>writing</em> to <code>wrapper</code> (from <code>T1</code>) and <em>reading</em> from <code>wrapper</code> in <code>T2</code>.</p>\n<p>We need to also introduce here <em>happen-before consistency</em>:</p>\n<blockquote>\n<p>a <em>read</em> sees the last <em>write</em> in happens-before order, or <em>any other</em> write.</p>\n</blockquote>\n<p>Since we do not have a full chain of happens-before here (that <code>??</code> does not establish one), we get that : &quot;...or any other read&quot;, which means we can read <em>different</em> values in those two reads of <code>num</code> (in that <code>num != num</code>).</p>\n<hr />\n<p>If you make <code>wrapper</code> instance <code>volatile</code>, <code>JLS</code> says that:</p>\n<blockquote>\n<p>A write to a volatile field (8.3.1.4) happens-before every subsequent read of that field.</p>\n</blockquote>\n<p>As such, we have this now:</p>\n<pre><code> --------------- T1 -------------\n | write to num or this.num=num |\n --------------------------------\n                 |\n                \\|/  (HB)\n --------------- T1 -------------\n |    write Wrapper instance    |\n --------------------------------\n                 |\n                \\|/  (HB)\n --------------- T2 -------------\n |    read Wrapper instance     |\n --------------------------------\n                 |\n                \\|/  (HB)\n --------------- T2 -------------\n |      read num first time     |\n --------------------------------\n                 |\n                \\|/  (HB)\n --------------- T2 -------------\n |      read num second time    |\n --------------------------------\n</code></pre>\n<p>Now, happens-before consistency says : &quot;a <em>read</em> sees the last <em>write</em> in happens-before order...&quot;; the key part here is &quot;in happens-before order&quot;. This means that <em>both</em> reads of <code>num</code> will see the write of it (again: in happens before order).</p>\n"}],"owner":{"account_id":7280482,"reputation":75,"user_id":5550425,"display_name":"Roman Horbovyi"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":136,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":71212240,"answer_count":3,"score":4,"last_activity_date":1646233694,"creation_date":1645471877,"question_id":71212008,"body_markdown":"According to Java Concurrency in Action if we have the following class:\r\n```\r\npublic class Wrapper {\r\n  private int num;\r\n\r\n  public Wrapper(int num) {\r\n    this.num = num;\r\n  }\r\n\r\n  public void assertCorrectness() {\r\n    if (num != num)\r\n      throw new AssertionError(&quot;This is false&quot;);\r\n  }\r\n}\r\n```\r\nand we initialise an instance of this class and publish it in a non-safe way (through a simple public field for example), then the assertCorrectness() might indeed throw an AssertionError, if called from another thread. In other words, this means that some another thread might see an up-to-date reference to the instance, but the state of the instance itself could be out-of-date (so a thread can see an object exists but it is in a partially constructed / inconsistent state).\r\n\r\nOn the other hand, it is said that publishing an instance of this class through a volatile reference is considered safe. However it was my understanding that volatile just guarantees that any thread will always see an up-to-date version of a reference, but not the object&#39;s state being referenced. So we can be sure that if one thread assigns a new instance of the Wrapper class to a volatile field, then all the other threads will see that the reference was updated. But is there a risk that they will still see an object in an inconsistent / partially constructed state?\r\n\r\n\r\n","title":"Can another thread see an effectively immutable object in an inconsistent state if it is published with a volatile reference?","body":"<p>According to Java Concurrency in Action if we have the following class:</p>\n<pre><code>public class Wrapper {\n  private int num;\n\n  public Wrapper(int num) {\n    this.num = num;\n  }\n\n  public void assertCorrectness() {\n    if (num != num)\n      throw new AssertionError(&quot;This is false&quot;);\n  }\n}\n</code></pre>\n<p>and we initialise an instance of this class and publish it in a non-safe way (through a simple public field for example), then the assertCorrectness() might indeed throw an AssertionError, if called from another thread. In other words, this means that some another thread might see an up-to-date reference to the instance, but the state of the instance itself could be out-of-date (so a thread can see an object exists but it is in a partially constructed / inconsistent state).</p>\n<p>On the other hand, it is said that publishing an instance of this class through a volatile reference is considered safe. However it was my understanding that volatile just guarantees that any thread will always see an up-to-date version of a reference, but not the object's state being referenced. So we can be sure that if one thread assigns a new instance of the Wrapper class to a volatile field, then all the other threads will see that the reference was updated. But is there a risk that they will still see an object in an inconsistent / partially constructed state?</p>\n"},{"tags":["java","database","anylogic","agent"],"answers":[{"tags":[],"owner":{"account_id":4999683,"reputation":3818,"user_id":4019094,"display_name":"Jaco-Ben Vosloo"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1646232351,"creation_date":1646232351,"answer_id":71324621,"question_id":71324560,"body_markdown":"For text comparisons, you need to use `.equals()` as it compares the contents of the string, whereas `==` compares if they are the same object\r\n \r\nSo you should use `((Person)agent).name.equals(&quot;ahmed&quot;)` this will give you true if the name of the agent is &quot;ahmed&quot;\r\n\r\nYou can read more [here][1]\r\n\r\n\r\n  [1]: https://www.javatpoint.com/string-comparison-in-java","title":"how to seperate agents based on their attributes (if attributes are assigned in a table)","body":"<p>For text comparisons, you need to use <code>.equals()</code> as it compares the contents of the string, whereas <code>==</code> compares if they are the same object</p>\n<p>So you should use <code>((Person)agent).name.equals(&quot;ahmed&quot;)</code> this will give you true if the name of the agent is &quot;ahmed&quot;</p>\n<p>You can read more <a href=\"https://www.javatpoint.com/string-comparison-in-java\" rel=\"nofollow noreferrer\">here</a></p>\n"}],"owner":{"account_id":24429636,"reputation":1,"user_id":18354750,"display_name":"affan khan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1646232351,"creation_date":1646232132,"question_id":71324560,"body_markdown":"I have made a table with columns[date,name,sex,and age] and linked this to an agent. I want to separate the agents with a specific name(attribute) to specific block using select output box. I have created name as a parameter for the agent from the table. But when I try to put condition in select output block ((Person)agent).name == &quot;ahmed&quot; or agent.name==&quot;ahmed&quot; no conditions went true and all are bypassed to false port. \r\n\r\n![please refer to all details in image][1]. \r\n\r\nI have also tried to declare the variable in an agent and tried to pass it in select_output but the same result. \r\nI am able to print the names of the agent using traceln(agent.name) in the action box. BUT in the condition it&#39;s not working... any help would be great thank u in advance. \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/U1pLX.png","title":"how to seperate agents based on their attributes (if attributes are assigned in a table)","body":"<p>I have made a table with columns[date,name,sex,and age] and linked this to an agent. I want to separate the agents with a specific name(attribute) to specific block using select output box. I have created name as a parameter for the agent from the table. But when I try to put condition in select output block ((Person)agent).name == &quot;ahmed&quot; or agent.name==&quot;ahmed&quot; no conditions went true and all are bypassed to false port.</p>\n<p><img src=\"https://i.stack.imgur.com/U1pLX.png\" alt=\"please refer to all details in image\" />.</p>\n<p>I have also tried to declare the variable in an agent and tried to pass it in select_output but the same result.\nI am able to print the names of the agent using traceln(agent.name) in the action box. BUT in the condition it's not working... any help would be great thank u in advance.</p>\n"},{"tags":["java","algorithm","recursion","data-structures","dynamic-programming"],"comments":[{"owner":{"account_id":11982943,"reputation":208,"user_id":8768284,"display_name":"Judger"},"score":0,"creation_date":1510019042,"post_id":47148594,"comment_id":81247371,"body_markdown":"The `int[] f` argument is a little confusing. If you need a flag you can use `AtomicBoolean`. Also it seems like your for loop is only executed once.","body":"The <code>int[] f</code> argument is a little confusing. If you need a flag you can use <code>AtomicBoolean</code>. Also it seems like your for loop is only executed once."},{"owner":{"account_id":7964233,"reputation":9,"user_id":6010961,"display_name":"Jaharsh "},"score":0,"creation_date":1510019643,"post_id":47148594,"comment_id":81247538,"body_markdown":"int[] f is flag that gets passed by reference so I can cut down iterations once I&#39;ve reached the end . I&#39;ll try learning about AtomicBoolean , will it be a pass by reference datatype , since I need to maintain the value across different calls.","body":"int[] f is flag that gets passed by reference so I can cut down iterations once I&#39;ve reached the end . I&#39;ll try learning about AtomicBoolean , will it be a pass by reference datatype , since I need to maintain the value across different calls."},{"owner":{"account_id":7964233,"reputation":9,"user_id":6010961,"display_name":"Jaharsh "},"score":0,"creation_date":1510019733,"post_id":47148594,"comment_id":81247565,"body_markdown":"The for loop gets executed once in each recursive call , overall n*n","body":"The for loop gets executed once in each recursive call , overall n*n"},{"owner":{"account_id":11982943,"reputation":208,"user_id":8768284,"display_name":"Judger"},"score":0,"creation_date":1510033169,"post_id":47148594,"comment_id":81250937,"body_markdown":"I&#39;m saying that in your for loop, `i++` is never executed because no matter what the method returns in the end of the first iteration when i=1","body":"I&#39;m saying that in your for loop, <code>i++</code> is never executed because no matter what the method returns in the end of the first iteration when i=1"},{"owner":{"account_id":7964233,"reputation":9,"user_id":6010961,"display_name":"Jaharsh "},"score":0,"creation_date":1510033914,"post_id":47148594,"comment_id":81251237,"body_markdown":"Nope , the above solution works perfectly fine for small inputs (tested) . The for loop with iterate each time the function comes back from its child call to the current call . You might wanna trace the calls if you are still confused .","body":"Nope , the above solution works perfectly fine for small inputs (tested) . The for loop with iterate each time the function comes back from its child call to the current call . You might wanna trace the calls if you are still confused ."}],"answers":[{"tags":[],"owner":{"account_id":14206439,"reputation":38683,"user_id":10262805,"display_name":"Yilmaz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646232290,"creation_date":1646232290,"answer_id":71324604,"question_id":47148594,"body_markdown":"This can be solved in `T:O(N)` with greedy algorithm:\r\n\r\n    class Solution {\r\n        public int jump(int[] nums) {\r\n            int res=0, l=0, r=0;\r\n            while(r&lt;(nums.length-1)){\r\n                int farthest=0;\r\n                for (int i=l;i&lt;r+1;i++){\r\n                    farthest=Integer.max(farthest,i+nums[i]);\r\n                }\r\n                l=r+1;\r\n                r=farthest;\r\n                res++;\r\n            }\r\n            return res;\r\n        }\r\n    }\r\n\r\n## Explanation\r\n\r\n      nums = [2,3,1,1,4]\r\n\r\n you jump 2 steps. you get the index 2.so you are jumping elements [3,1]. Nov you loop through [3,1] and check which one will take you to the further. In this case it is 3. Then update the variables. Increase `res=1` \r\n\r\nFrom element 3 which is index-1. you jump 3 steps, jumping [1,1,4]. Now loop through [1,1,4] find the farthest. which is 4. increase `res=2`. Since out of while loop, return res=2. \r\n\r\n- It seems to have two nested loops, but if you look carefully, total iteration is N.\r\n\r\n","title":"Jump Game Correction","body":"<p>This can be solved in <code>T:O(N)</code> with greedy algorithm:</p>\n<pre><code>class Solution {\n    public int jump(int[] nums) {\n        int res=0, l=0, r=0;\n        while(r&lt;(nums.length-1)){\n            int farthest=0;\n            for (int i=l;i&lt;r+1;i++){\n                farthest=Integer.max(farthest,i+nums[i]);\n            }\n            l=r+1;\n            r=farthest;\n            res++;\n        }\n        return res;\n    }\n}\n</code></pre>\n<h2>Explanation</h2>\n<pre><code>  nums = [2,3,1,1,4]\n</code></pre>\n<p>you jump 2 steps. you get the index 2.so you are jumping elements [3,1]. Nov you loop through [3,1] and check which one will take you to the further. In this case it is 3. Then update the variables. Increase <code>res=1</code></p>\n<p>From element 3 which is index-1. you jump 3 steps, jumping [1,1,4]. Now loop through [1,1,4] find the farthest. which is 4. increase <code>res=2</code>. Since out of while loop, return res=2.</p>\n<ul>\n<li>It seems to have two nested loops, but if you look carefully, total iteration is N.</li>\n</ul>\n"}],"owner":{"account_id":7964233,"reputation":9,"user_id":6010961,"display_name":"Jaharsh "},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":187,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1646232290,"creation_date":1510018359,"question_id":47148594,"body_markdown":"I&#39;m not sure how to improve my solution for the jump game question (https://leetcode.com/problems/jump-game/description/) .It seems logically correct but I encounter a java.lang.Stackoverflow error for large inputs like [nums=[1,1,1,1,1,1,1,........]]\r\n\r\nI know that I&#39;m overflowing due to too many recursive calls , how can i optimize it ?\r\n\r\n    class Solution {\r\n      public boolean canJump(int[] nums) {\r\n        int []f = new int[1];\r\n        f[0] = 0;\r\n        return help(nums,0,f);\r\n      }\r\n      public static boolean help(int[]nums, int c, int[] f) {\r\n        if(c==nums.length-1) {\r\n          f[0] =1;\r\n          return true;\r\n        }\r\n        if(f[0]==1) return true;\r\n        int val = nums[c];\r\n        for(int i = 1; i &lt;= val; i++) {\r\n          if(f[0]==1) return true;\r\n          return help(nums,(c + i), f);\r\n        }\r\n        return false;\r\n      }\r\n    }\r\n\r\n\r\n","title":"Jump Game Correction","body":"<p>I'm not sure how to improve my solution for the jump game question (<a href=\"https://leetcode.com/problems/jump-game/description/\" rel=\"nofollow noreferrer\">https://leetcode.com/problems/jump-game/description/</a>) .It seems logically correct but I encounter a java.lang.Stackoverflow error for large inputs like [nums=[1,1,1,1,1,1,1,........]]</p>\n\n<p>I know that I'm overflowing due to too many recursive calls , how can i optimize it ?</p>\n\n<pre><code>class Solution {\n  public boolean canJump(int[] nums) {\n    int []f = new int[1];\n    f[0] = 0;\n    return help(nums,0,f);\n  }\n  public static boolean help(int[]nums, int c, int[] f) {\n    if(c==nums.length-1) {\n      f[0] =1;\n      return true;\n    }\n    if(f[0]==1) return true;\n    int val = nums[c];\n    for(int i = 1; i &lt;= val; i++) {\n      if(f[0]==1) return true;\n      return help(nums,(c + i), f);\n    }\n    return false;\n  }\n}\n</code></pre>\n"},{"tags":["java","maven","intellij-idea","jetty","rmi"],"comments":[{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1408406573,"post_id":25373565,"comment_id":39568178,"body_markdown":"So obviously IntelliJ is using port 1099, probably for an RMI Registry of its own.","body":"So obviously IntelliJ is using port 1099, probably for an RMI Registry of its own."}],"answers":[{"tags":[],"owner":{"account_id":2591978,"reputation":425,"user_id":2246490,"display_name":"Showdawn"},"down_vote_count":0,"up_vote_count":27,"is_accepted":true,"score":27,"last_activity_date":1614270142,"creation_date":1408415208,"answer_id":25374805,"question_id":25373565,"body_markdown":"I am sure IntelliJ Idea does not use 1099 port internally. I have used this PORT for Tomcat. I would suggest checking if any of idea plugins that you have installed are running on this port. Most of the operating systems can give you the application name that is running on that port. \r\n\r\nEg: `lsof -w -n -i tcp:8080` would give me the application running on **8080** on my linux machine. \r\n\r\nHope this helps.","title":"IntelliJ Idea IDE using port 1099","body":"<p>I am sure IntelliJ Idea does not use 1099 port internally. I have used this PORT for Tomcat. I would suggest checking if any of idea plugins that you have installed are running on this port. Most of the operating systems can give you the application name that is running on that port.</p>\n<p>Eg: <code>lsof -w -n -i tcp:8080</code> would give me the application running on <strong>8080</strong> on my linux machine.</p>\n<p>Hope this helps.</p>\n"},{"tags":[],"owner":{"account_id":5439058,"reputation":111,"user_id":4327601,"display_name":"Michael Christensen"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1447334711,"creation_date":1447334711,"answer_id":33672472,"question_id":25373565,"body_markdown":"On my Mac a process called &quot;fsnotifier&quot; is using port 1099. A google on this indicates that it&#39;s an IntelliJ file system watcher. Solved by using a different port for JMX.","title":"IntelliJ Idea IDE using port 1099","body":"<p>On my Mac a process called \"fsnotifier\" is using port 1099. A google on this indicates that it's an IntelliJ file system watcher. Solved by using a different port for JMX.</p>\n"},{"tags":[],"owner":{"account_id":2070382,"reputation":1791,"user_id":1845013,"accept_rate":60,"display_name":"jsaddwater"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1454412604,"creation_date":1454412604,"answer_id":35152237,"question_id":25373565,"body_markdown":"In my case I got disconnected from the JBoss instance that I had started in IDEA, and the server continued to run, thus using the 1099 port for JMX.\r\n\r\nYou can either kill the server process using that port (it&#39;ll be a java process using a lot of memory) or create a remote debug configuration that you can use in case you don&#39;t want to restart the server. Use the same debug ports for the local and remote debug configurations.\r\n\r\n","title":"IntelliJ Idea IDE using port 1099","body":"<p>In my case I got disconnected from the JBoss instance that I had started in IDEA, and the server continued to run, thus using the 1099 port for JMX.</p>\n\n<p>You can either kill the server process using that port (it'll be a java process using a lot of memory) or create a remote debug configuration that you can use in case you don't want to restart the server. Use the same debug ports for the local and remote debug configurations.</p>\n"},{"tags":[],"owner":{"account_id":1425921,"reputation":491,"user_id":1349454,"display_name":"Oubenal Mohcine"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1476209359,"creation_date":1476209359,"answer_id":39983829,"question_id":25373565,"body_markdown":"make sure you have localhost defined in your `/etc/hosts` file, and that it&#39;s defined only once\r\n\r\n    localhost         127.0.0.1\r\nit was leaving the maven process in intelliJ hanging which caused the `port 1099 already in use` error even after changing the jmx port to something different. ","title":"IntelliJ Idea IDE using port 1099","body":"<p>make sure you have localhost defined in your <code>/etc/hosts</code> file, and that it's defined only once</p>\n\n<pre><code>localhost         127.0.0.1\n</code></pre>\n\n<p>it was leaving the maven process in intelliJ hanging which caused the <code>port 1099 already in use</code> error even after changing the jmx port to something different. </p>\n"},{"tags":[],"owner":{"account_id":12087751,"reputation":111,"user_id":8835617,"display_name":"Neelima"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1508997077,"creation_date":1508996958,"answer_id":46946711,"question_id":25373565,"body_markdown":"Go to terminal and kill the session\r\n\r\n    ps -aef | grep 1099\r\n    kill -9 PID","title":"IntelliJ Idea IDE using port 1099","body":"<p>Go to terminal and kill the session</p>\n\n<pre><code>ps -aef | grep 1099\nkill -9 PID\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3723758,"reputation":11894,"user_id":3600553,"accept_rate":71,"display_name":"Du-Lacoste"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1555900083,"creation_date":1555900083,"answer_id":55788475,"question_id":25373565,"body_markdown":"Since it is easy to tackle with **Terminal**.\r\nOpen the Terminal and type following.\r\n\r\n    fuser 1099/tcp\r\n\r\nIf a process uses above port, it should return something output like this.\r\n\r\n    1099/tcp:            2222\r\n\r\nThe last column value (2222) is referred to the Process ID (**PID**).\r\n\r\nJust **KILL** it as follows.\r\n\r\n    kill -9 2222\r\n\r\nNow you can start debugging. ","title":"IntelliJ Idea IDE using port 1099","body":"<p>Since it is easy to tackle with <strong>Terminal</strong>.\nOpen the Terminal and type following.</p>\n\n<pre><code>fuser 1099/tcp\n</code></pre>\n\n<p>If a process uses above port, it should return something output like this.</p>\n\n<pre><code>1099/tcp:            2222\n</code></pre>\n\n<p>The last column value (2222) is referred to the Process ID (<strong>PID</strong>).</p>\n\n<p>Just <strong>KILL</strong> it as follows.</p>\n\n<pre><code>kill -9 2222\n</code></pre>\n\n<p>Now you can start debugging. </p>\n"},{"tags":[],"owner":{"account_id":11847624,"reputation":941,"user_id":8669765,"display_name":"Shashank Bodkhe"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1561449786,"creation_date":1561449786,"answer_id":56749452,"question_id":25373565,"body_markdown":"on windows : \r\n\r\nstep 1] find the process : netstat -ano  or netstat -aon |find /i &quot;listening&quot; |find &quot;Port no&quot;\r\n\r\n\r\n\r\nstep 2] kill the process : Taskkill /F /IM (Process id obtained from above step)\r\n\r\nPlease see example below:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/JDFoK.png","title":"IntelliJ Idea IDE using port 1099","body":"<p>on windows : </p>\n\n<p>step 1] find the process : netstat -ano  or netstat -aon |find /i \"listening\" |find \"Port no\"</p>\n\n<p>step 2] kill the process : Taskkill /F /IM (Process id obtained from above step)</p>\n\n<p>Please see example below:</p>\n\n<p><a href=\"https://i.stack.imgur.com/JDFoK.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/JDFoK.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":[],"owner":{"account_id":6651349,"reputation":4535,"user_id":7756492,"display_name":"ucMedia"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646232161,"creation_date":1646232161,"answer_id":71324570,"question_id":25373565,"body_markdown":"On windows command line :\r\n&lt;br&gt;&lt;br&gt;\r\n**1.** find which process uses port 1099\r\n \r\n**`netstat -ano -p tcp |find &quot;1099&quot;`**\r\n\r\n[![enter image description here][1]][1]\r\n\r\n**2.** Process with PID 2112 is listening on port 1099. Now we can query task list to find the process.\r\n\r\n**`tasklist |find &quot;2112&quot;`**\r\n\r\n\r\n[![enter image description here][2]][2]\r\n\r\nAlso You can check the windows task manager.\r\n[![enter image description here][3]][3]\r\n&lt;br&gt;&lt;br&gt;\r\n**3.** Kill the process from task manager, by right click on the item and selecting *End task* or via command line :\r\n&lt;br&gt;\r\n**`taskkill /F /PID 2112`**\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/5ExZw.png\r\n  [2]: https://i.stack.imgur.com/WQreF.png\r\n  [3]: https://i.stack.imgur.com/ylETK.png","title":"IntelliJ Idea IDE using port 1099","body":"<p>On windows command line :\n<br><br>\n<strong>1.</strong> find which process uses port 1099</p>\n<p><strong><code>netstat -ano -p tcp |find &quot;1099&quot;</code></strong></p>\n<p><a href=\"https://i.stack.imgur.com/5ExZw.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5ExZw.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>2.</strong> Process with PID 2112 is listening on port 1099. Now we can query task list to find the process.</p>\n<p><strong><code>tasklist |find &quot;2112&quot;</code></strong></p>\n<p><a href=\"https://i.stack.imgur.com/WQreF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/WQreF.png\" alt=\"enter image description here\" /></a></p>\n<p>Also You can check the windows task manager.\n<a href=\"https://i.stack.imgur.com/ylETK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ylETK.png\" alt=\"enter image description here\" /></a>\n<br><br>\n<strong>3.</strong> Kill the process from task manager, by right click on the item and selecting <em>End task</em> or via command line :\n<br>\n<strong><code>taskkill /F /PID 2112</code></strong></p>\n"}],"owner":{"account_id":2852923,"reputation":233,"user_id":2449715,"display_name":"migo"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":41163,"favorite_count":0,"down_vote_count":0,"up_vote_count":22,"accepted_answer_id":25374805,"answer_count":8,"score":22,"last_activity_date":1646232161,"creation_date":1408404393,"question_id":25373565,"body_markdown":"I&#39;m using IntelliJ Idea Community Edition IDE and I&#39;m trying to run a Maven WebApp with       Jetty by command line. I&#39;m on a RedHat box\r\n\r\nI run this command:\r\n\r\n    mvn clean install -P deployJetty -Djetty.port=8083\r\n\r\nAnd I get this error:\r\n\r\n    Listening for transport dt_socket at address: 5005\r\n    Error: Exception thrown by the agent : java.rmi.server.ExportException: Port already in use: 1099; nested exception is: \r\n    \tjava.net.BindException: Address already in use\r\n\r\n\r\nThe funny thing is that when I close IntelliJ Idea, the 1099 port is released.\r\nI can&#39;t find the reason why and how Idea is using this port.\r\n\r\nAny ideas ? Thank you.\r\n\r\nNote: As a workaround, I&#39;m closing Idea, running Jetty and then opening Idea (and I guess forcing it to pick another port)","title":"IntelliJ Idea IDE using port 1099","body":"<p>I'm using IntelliJ Idea Community Edition IDE and I'm trying to run a Maven WebApp with       Jetty by command line. I'm on a RedHat box</p>\n\n<p>I run this command:</p>\n\n<pre><code>mvn clean install -P deployJetty -Djetty.port=8083\n</code></pre>\n\n<p>And I get this error:</p>\n\n<pre><code>Listening for transport dt_socket at address: 5005\nError: Exception thrown by the agent : java.rmi.server.ExportException: Port already in use: 1099; nested exception is: \n    java.net.BindException: Address already in use\n</code></pre>\n\n<p>The funny thing is that when I close IntelliJ Idea, the 1099 port is released.\nI can't find the reason why and how Idea is using this port.</p>\n\n<p>Any ideas ? Thank you.</p>\n\n<p>Note: As a workaround, I'm closing Idea, running Jetty and then opening Idea (and I guess forcing it to pick another port)</p>\n"},{"tags":["java","eclipse","maven"],"comments":[{"owner":{"account_id":231683,"reputation":4218,"user_id":496038,"display_name":"pringi"},"score":0,"creation_date":1646232493,"post_id":71324559,"comment_id":126072488,"body_markdown":"What do you have in your settings.xml in .m2 folder? Do you have those artefacts published in which repository?","body":"What do you have in your settings.xml in .m2 folder? Do you have those artefacts published in which repository?"},{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1646235826,"post_id":71324559,"comment_id":126074034,"body_markdown":"This dependency does not exist in central repository. You have to use a repository manager and configure the appropriate repository in your repository","body":"This dependency does not exist in central repository. You have to use a repository manager and configure the appropriate repository in your repository"},{"owner":{"account_id":21698830,"reputation":1,"user_id":18354853,"display_name":"oceanbreeze"},"score":0,"creation_date":1646240674,"post_id":71324559,"comment_id":126076074,"body_markdown":"I tried to use artefacts published in mvnrepository.com/artifact/com.portal.pcm/pcm/7.5, i just copy and add in pom.xml. I have to add in settings.xml too?","body":"I tried to use artefacts published in mvnrepository.com/artifact/com.portal.pcm/pcm/7.5, i just copy and add in pom.xml. I have to add in settings.xml too?"},{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1646250887,"post_id":71324559,"comment_id":126079587,"body_markdown":"The mvnrepository.com is not a consumable maven repository...","body":"The mvnrepository.com is not a consumable maven repository..."}],"owner":{"account_id":21698830,"reputation":1,"user_id":18354853,"display_name":"oceanbreeze"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":737,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1646232130,"creation_date":1646232130,"question_id":71324559,"body_markdown":"```\r\nThe container &#39;Maven Dependencies&#39; references non existing library &#39;C:\\.m2\\repository\\com\\portal\\pcm\\12.0.3\\pcm-12.0.3.jar&#39;\r\n\r\n```\r\n\r\nIf i check the folder there are files that have the same name as the jar but end on **jar.lastUpdated.**\r\n\r\nI tried maven clean and maven update which did not work. I delete the ***.jar.lastUpdated** in m2, but did not work too.\r\n\r\nThe line in my pom.xml is:\r\n\r\n```\r\nMissing artifact com.portal:pcm:jar:12.0.3\r\nMissing artifact com.portal:pcmext:jar:12.0.3\r\nMissing artifact com.portal:pcmext:jar:12.0.3\r\n\r\n```\r\n\r\nThis block is the one with the marker where it states the artifact is missing.\r\n\r\n```\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.portal&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;pcm&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;12.0.3&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.portal&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;pcmext&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;12.0.3&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.portal&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;pfc&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;12.0.3&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n```\r\n\r\nI tried to use a version suggested by mvnrepository.com/artifact/com.portal.pcm/pcm/7.5, but didnt work too.\r\n\r\n```\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;com.portal.pcm&lt;/groupId&gt;\r\n    &lt;artifactId&gt;pcm&lt;/artifactId&gt;\r\n    &lt;version&gt;7.5&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;com.portal.pcm&lt;/groupId&gt;\r\n    &lt;artifactId&gt;pcmext&lt;/artifactId&gt;\r\n    &lt;version&gt;7.5&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;com.portal.pcm&lt;/groupId&gt;\r\n    &lt;artifactId&gt;pfc&lt;/artifactId&gt;\r\n    &lt;version&gt;7.5&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\ni guess dependency configuration is incorrect, but which is correct?","title":"Maven Dependencies .jar non existing library","body":"<pre><code>The container 'Maven Dependencies' references non existing library 'C:\\.m2\\repository\\com\\portal\\pcm\\12.0.3\\pcm-12.0.3.jar'\n\n</code></pre>\n<p>If i check the folder there are files that have the same name as the jar but end on <strong>jar.lastUpdated.</strong></p>\n<p>I tried maven clean and maven update which did not work. I delete the *<strong>.jar.lastUpdated</strong> in m2, but did not work too.</p>\n<p>The line in my pom.xml is:</p>\n<pre><code>Missing artifact com.portal:pcm:jar:12.0.3\nMissing artifact com.portal:pcmext:jar:12.0.3\nMissing artifact com.portal:pcmext:jar:12.0.3\n\n</code></pre>\n<p>This block is the one with the marker where it states the artifact is missing.</p>\n<pre><code>        &lt;dependency&gt;\n            &lt;groupId&gt;com.portal&lt;/groupId&gt;\n            &lt;artifactId&gt;pcm&lt;/artifactId&gt;\n            &lt;version&gt;12.0.3&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.portal&lt;/groupId&gt;\n            &lt;artifactId&gt;pcmext&lt;/artifactId&gt;\n            &lt;version&gt;12.0.3&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.portal&lt;/groupId&gt;\n            &lt;artifactId&gt;pfc&lt;/artifactId&gt;\n            &lt;version&gt;12.0.3&lt;/version&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>I tried to use a version suggested by mvnrepository.com/artifact/com.portal.pcm/pcm/7.5, but didnt work too.</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.portal.pcm&lt;/groupId&gt;\n    &lt;artifactId&gt;pcm&lt;/artifactId&gt;\n    &lt;version&gt;7.5&lt;/version&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n    &lt;groupId&gt;com.portal.pcm&lt;/groupId&gt;\n    &lt;artifactId&gt;pcmext&lt;/artifactId&gt;\n    &lt;version&gt;7.5&lt;/version&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n    &lt;groupId&gt;com.portal.pcm&lt;/groupId&gt;\n    &lt;artifactId&gt;pfc&lt;/artifactId&gt;\n    &lt;version&gt;7.5&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>i guess dependency configuration is incorrect, but which is correct?</p>\n"},{"tags":["java","spring-boot","groovy"],"answers":[{"tags":[],"owner":{"account_id":4327054,"reputation":26992,"user_id":3533584,"display_name":"Jeff Scott Brown"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1646231670,"creation_date":1646231670,"answer_id":71324451,"question_id":71320287,"body_markdown":"There are a lot of different ways to do it and there isn&#39;t enough information in the question to know for sure what the best solution for you is going to be, but one way to do it is to create a `GroovyShell` and evaluate the script in that shell.\r\n\r\n    import groovy.lang.GroovyShell;\r\n    \r\n    public class GroovyDemo {\r\n        public static void main(String[] args) {\r\n            System.out.println(&quot;This represents some random code&quot;);\r\n    \r\n            String groovyScript = &quot;println &#39;first line of Groovy output&#39;\\n&quot; +\r\n                    &quot;println &#39;second line of Groovy output&#39;&quot;;\r\n    \r\n            GroovyShell groovyShell = new GroovyShell();\r\n\r\n            // instead of passing a String you could pass a\r\n            // URI, a File, a Reader, etc... See GroovyShell javadocs\r\n            groovyShell.evaluate(groovyScript);\r\n    \r\n            System.out.println(&quot;This represents some more random code&quot;);\r\n        }\r\n    }\r\n\r\nOutput:\r\n\r\n    This represents some random code\r\n    first line of Groovy output\r\n    second line of Groovy output\r\n    This represents some more random code\r\n\r\n","title":"How to run a Groovy script in my Spring Boot Application?","body":"<p>There are a lot of different ways to do it and there isn't enough information in the question to know for sure what the best solution for you is going to be, but one way to do it is to create a <code>GroovyShell</code> and evaluate the script in that shell.</p>\n<pre><code>import groovy.lang.GroovyShell;\n\npublic class GroovyDemo {\n    public static void main(String[] args) {\n        System.out.println(&quot;This represents some random code&quot;);\n\n        String groovyScript = &quot;println 'first line of Groovy output'\\n&quot; +\n                &quot;println 'second line of Groovy output'&quot;;\n\n        GroovyShell groovyShell = new GroovyShell();\n\n        // instead of passing a String you could pass a\n        // URI, a File, a Reader, etc... See GroovyShell javadocs\n        groovyShell.evaluate(groovyScript);\n\n        System.out.println(&quot;This represents some more random code&quot;);\n    }\n}\n</code></pre>\n<p>Output:</p>\n<pre><code>This represents some random code\nfirst line of Groovy output\nsecond line of Groovy output\nThis represents some more random code\n</code></pre>\n"}],"owner":{"account_id":22424548,"reputation":23,"user_id":16631369,"display_name":"Random Name"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1399,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"accepted_answer_id":71324451,"answer_count":1,"score":-2,"last_activity_date":1646231670,"creation_date":1646213249,"question_id":71320287,"body_markdown":"So I have an existing spring boot app. I want to add a Groovy script (let&#39;s say &quot;HelloWorld.groovy&quot;) to display the message hello world. how can i do this? \r\nbelow is how i want it took like : \r\n\r\n    // some random code here\r\n    // ...\r\n    // ...\r\n    // groovy script : &quot;HelloWorld&quot; to be executed\r\n    // some random code ...\r\n\r\n\r\n\r\n","title":"How to run a Groovy script in my Spring Boot Application?","body":"<p>So I have an existing spring boot app. I want to add a Groovy script (let's say &quot;HelloWorld.groovy&quot;) to display the message hello world. how can i do this?\nbelow is how i want it took like :</p>\n<pre><code>// some random code here\n// ...\n// ...\n// groovy script : &quot;HelloWorld&quot; to be executed\n// some random code ...\n</code></pre>\n"},{"tags":["java","selenium","google-chrome","selenium-webdriver","selenium-chromedriver"],"answers":[{"tags":[],"owner":{"account_id":3760398,"reputation":4555,"user_id":3125587,"accept_rate":88,"display_name":"Pivoman"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1646230726,"creation_date":1646229492,"answer_id":71323966,"question_id":71323442,"body_markdown":"&gt; `Starting ChromeDriver 99.0.4844.51`\r\n\r\n&gt; `Current browser version is 98.0.4758.102`\r\n\r\nYour chrome driver is for chrome version, which is not out yet. You have several solutions:\r\n\r\n -  You can download actual ChromeDriver 98.0.4758.102 from [here][1] and use it.\r\n\r\n -  You can download **Chrome Beta** (currently 99.0.4844.51) or **Chrome Dev** (currently 100.0.4896.12), where you have access to newer versions.\r\n\r\n -  If you are using **WebDriverManager** from `io.github.bonigarcia`, you have to set correctly browserVersion and driverVersion:\r\n\r\n        WebDriverManager.chromedriver().browserVersion(&quot;98.0.4758.102&quot;).setup();\r\n        WebDriverManager.chromedriver().driverVersion(&quot;98.0.4758.102&quot;).setup();\r\n\r\n  [1]: https://chromedriver.chromium.org/downloads","title":"This version of ChromeDriver only supports Chrome version 99 Current browser version is 98.0.4758.102","body":"<blockquote>\n<p><code>Starting ChromeDriver 99.0.4844.51</code></p>\n</blockquote>\n<blockquote>\n<p><code>Current browser version is 98.0.4758.102</code></p>\n</blockquote>\n<p>Your chrome driver is for chrome version, which is not out yet. You have several solutions:</p>\n<ul>\n<li><p>You can download actual ChromeDriver 98.0.4758.102 from <a href=\"https://chromedriver.chromium.org/downloads\" rel=\"nofollow noreferrer\">here</a> and use it.</p>\n</li>\n<li><p>You can download <strong>Chrome Beta</strong> (currently 99.0.4844.51) or <strong>Chrome Dev</strong> (currently 100.0.4896.12), where you have access to newer versions.</p>\n</li>\n<li><p>If you are using <strong>WebDriverManager</strong> from <code>io.github.bonigarcia</code>, you have to set correctly browserVersion and driverVersion:</p>\n<pre><code>WebDriverManager.chromedriver().browserVersion(&quot;98.0.4758.102&quot;).setup();\nWebDriverManager.chromedriver().driverVersion(&quot;98.0.4758.102&quot;).setup();\n</code></pre>\n</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":10049107,"reputation":186627,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1646231324,"creation_date":1646231324,"answer_id":71324365,"question_id":71323442,"body_markdown":"This error message...\r\n\r\n\tStarting ChromeDriver 99.0.4844.51 (d537ec02474b5afe23684e7963d538896c63ac77-refs/branch-heads/4844@{#875}) on port 59895\r\n\t.\r\n\tException in thread &quot;Thread-4&quot; org.openqa.selenium.SessionNotCreatedException: Could not start a new session. Response code 500. Message: session not created: This version of ChromeDriver only supports Chrome version 99\r\n\tCurrent browser version is 98.0.4758.102 with binary path C:\\Program Files\\Google\\Chrome\\Application\\chrome.exe\r\n\r\n...implies that the [ChromeDriver](https://stackoverflow.com/a/59927747/7429447) was unable to initiate/spawn a new _Browsing Context_ i.e. [tag:google-chrome] session.\r\n\r\nYour main issue is the **incompatibility** between the version of the binaries you are using as follows:\r\n\r\n- You are using _chrome=98.0_\r\n- Release Notes of [_ChromeDriver v98.0_](https://chromedriver.storage.googleapis.com/index.html?path=98.0.4758.48/) clearly mentions the following :\r\n\r\n&gt;Supports Chrome version 98\r\n\r\n- But you are using _chromedriver=99.0_ \r\n- Release Notes of [_chromedriver=99.0_](https://chromedriver.storage.googleapis.com/99.0.4844.51/notes.txt) clearly mentions the following :\r\n\r\n&gt;Supports Chrome version 99\r\n\r\n\r\n\r\nSo there is a clear mismatch between _chromedriver=91.0_ and the _chrome=96.0.4664.45_\r\n\r\n\r\n----------\r\n\r\n\r\n\r\nSolution\r\n--------\r\nEnsure that:\r\n\r\n- _ChromeDriver_ is updated to  current [ChromeDriver v99.0](https://chromedriver.storage.googleapis.com/index.html?path=99.0.4844.51/) level.\r\n- _Chrome Browser_ is updated to  current _chrome=99_ (as per [chromedriver=99.0.4844.51 release notes](https://chromedriver.storage.googleapis.com/99.0.4844.51/notes.txt)).\r\n\r\n![Chrome v99](https://i.stack.imgur.com/52g1y.png)","title":"This version of ChromeDriver only supports Chrome version 99 Current browser version is 98.0.4758.102","body":"<p>This error message...</p>\n<pre><code>Starting ChromeDriver 99.0.4844.51 (d537ec02474b5afe23684e7963d538896c63ac77-refs/branch-heads/4844@{#875}) on port 59895\n.\nException in thread &quot;Thread-4&quot; org.openqa.selenium.SessionNotCreatedException: Could not start a new session. Response code 500. Message: session not created: This version of ChromeDriver only supports Chrome version 99\nCurrent browser version is 98.0.4758.102 with binary path C:\\Program Files\\Google\\Chrome\\Application\\chrome.exe\n</code></pre>\n<p>...implies that the <a href=\"https://stackoverflow.com/a/59927747/7429447\">ChromeDriver</a> was unable to initiate/spawn a new <em>Browsing Context</em> i.e. <a href=\"/questions/tagged/google-chrome\" class=\"post-tag\" title=\"show questions tagged &#39;google-chrome&#39;\" rel=\"tag\">google-chrome</a> session.</p>\n<p>Your main issue is the <strong>incompatibility</strong> between the version of the binaries you are using as follows:</p>\n<ul>\n<li>You are using <em>chrome=98.0</em></li>\n<li>Release Notes of <a href=\"https://chromedriver.storage.googleapis.com/index.html?path=98.0.4758.48/\" rel=\"nofollow noreferrer\"><em>ChromeDriver v98.0</em></a> clearly mentions the following :</li>\n</ul>\n<blockquote>\n<p>Supports Chrome version 98</p>\n</blockquote>\n<ul>\n<li>But you are using <em>chromedriver=99.0</em></li>\n<li>Release Notes of <a href=\"https://chromedriver.storage.googleapis.com/99.0.4844.51/notes.txt\" rel=\"nofollow noreferrer\"><em>chromedriver=99.0</em></a> clearly mentions the following :</li>\n</ul>\n<blockquote>\n<p>Supports Chrome version 99</p>\n</blockquote>\n<p>So there is a clear mismatch between <em>chromedriver=91.0</em> and the <em>chrome=96.0.4664.45</em></p>\n<hr />\n<h2>Solution</h2>\n<p>Ensure that:</p>\n<ul>\n<li><em>ChromeDriver</em> is updated to  current <a href=\"https://chromedriver.storage.googleapis.com/index.html?path=99.0.4844.51/\" rel=\"nofollow noreferrer\">ChromeDriver v99.0</a> level.</li>\n<li><em>Chrome Browser</em> is updated to  current <em>chrome=99</em> (as per <a href=\"https://chromedriver.storage.googleapis.com/99.0.4844.51/notes.txt\" rel=\"nofollow noreferrer\">chromedriver=99.0.4844.51 release notes</a>).</li>\n</ul>\n<p><img src=\"https://i.stack.imgur.com/52g1y.png\" alt=\"Chrome v99\" /></p>\n"}],"owner":{"account_id":18490732,"reputation":1487,"user_id":13470437,"display_name":"Asmoun"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":14259,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":71323966,"answer_count":2,"score":2,"last_activity_date":1646231324,"creation_date":1646227376,"question_id":71323442,"body_markdown":"My current chrome version : **98.0.4758.102**\r\n\r\nMy current selenium version: **4.1.1** and cannot download **chrome 99**. My **chrome 98** is updated to the last version, how do I get **chrome 99** assuming it&#39;s a beta version?\r\n\r\nTrace log : \r\n\r\n    ChromeDriver was started successfully.\r\n    Starting ChromeDriver 99.0.4844.51 (d537ec02474b5afe23684e7963d538896c63ac77-refs/branch-heads/4844@{#875}) on port 59895\r\n    Only local connections are allowed.\r\n    Please see https://chromedriver.chromium.org/security-considerations for suggestions on keeping ChromeDriver safe.\r\n    ChromeDriver was started successfully.\r\n    Exception in thread &quot;Thread-4&quot; org.openqa.selenium.SessionNotCreatedException: Could not start a new session. Response code 500. Message: session not created: This version of ChromeDriver only supports Chrome version 99\r\n    Current browser version is 98.0.4758.102 with binary path C:\\Program Files\\Google\\Chrome\\Application\\chrome.exe\r\n    Build info: version: &#39;4.1.1&#39;, revision: &#39;e8fcc2cecf&#39;\r\n    System info: host: &#39;L-QLT-005&#39;, ip: &#39;10.1.1.2&#39;, os.name: &#39;Windows 10&#39;, os.arch: &#39;amd64&#39;, os.version: &#39;10.0&#39;, java.version: &#39;17.0.2&#39;\r\n    Driver info: org.openqa.selenium.chrome.ChromeDriver\r\n    Command: [null, newSession {capabilities=[Capabilities {browserName: chrome, goog:chromeOptions: {args: [--start-maximized, --disable-extensions, --incognito, --disable-popup-blocking, --no-sandbox, --ignore-certificate-errors], extensions: []}}], desiredCapabilities=Capabilities {browserName: chrome, goog:chromeOptions: {args: [--start-maximized, --disable-extensions, --incognito, --disable-popup-blocking, --no-sandbox, --ignore-certificate-errors], extensions: []}}}]\r\n    \tat org.seleniumhq.selenium.remote_driver/org.openqa.selenium.remote.ProtocolHandshake.createSession(ProtocolHandshake.java:126)\r\n    \tat org.seleniumhq.selenium.remote_driver/org.openqa.selenium.remote.ProtocolHandshake.createSession(ProtocolHandshake.java:84)\r\n    \tat org.seleniumhq.selenium.remote_driver/org.openqa.selenium.remote.ProtocolHandshake.createSession(ProtocolHandshake.java:62)\r\n    \tat org.seleniumhq.selenium.remote_driver/org.openqa.selenium.remote.HttpCommandExecutor.execute(HttpCommandExecutor.java:156)\r\n    \tat org.seleniumhq.selenium.remote_driver/org.openqa.selenium.remote.service.DriverCommandExecutor.invokeExecute(DriverCommandExecutor.java:167)\r\n    \tat org.seleniumhq.selenium.remote_driver/org.openqa.selenium.remote.service.DriverCommandExecutor.execute(DriverCommandExecutor.java:142)\r\n    \tat org.seleniumhq.selenium.remote_driver/org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:543)\r\n    \tat org.seleniumhq.selenium.remote_driver/org.openqa.selenium.remote.RemoteWebDriver.startSession(RemoteWebDriver.java:230)\r\n    \tat org.seleniumhq.selenium.remote_driver/org.openqa.selenium.remote.RemoteWebDriver.&lt;init&gt;(RemoteWebDriver.java:151)\r\n    \tat org.seleniumhq.selenium.chromium_driver/org.openqa.selenium.chromium.ChromiumDriver.&lt;init&gt;(ChromiumDriver.java:108)\r\n    \tat org.seleniumhq.selenium.chrome_driver/org.openqa.selenium.chrome.ChromeDriver.&lt;init&gt;(ChromeDriver.java:104)\r\n    \tat org.seleniumhq.selenium.chrome_driver/org.openqa.selenium.chrome.ChromeDriver.&lt;init&gt;(ChromeDriver.java:91)\r\n    \tat org.seleniumhq.selenium.chrome_driver/org.openqa.selenium.chrome.ChromeDriver.&lt;init&gt;(ChromeDriver.java:80)\r\n    \tat io.beyn.spell/io.beyn.spell.Library.startBrowserChecker(Library.java:58)\r\n    \tat io.beyn.spell/io.beyn.spell.FXMLDocumentController.lambda$Event$5(FXMLDocumentController.java:188)","title":"This version of ChromeDriver only supports Chrome version 99 Current browser version is 98.0.4758.102","body":"<p>My current chrome version : <strong>98.0.4758.102</strong></p>\n<p>My current selenium version: <strong>4.1.1</strong> and cannot download <strong>chrome 99</strong>. My <strong>chrome 98</strong> is updated to the last version, how do I get <strong>chrome 99</strong> assuming it's a beta version?</p>\n<p>Trace log :</p>\n<pre><code>ChromeDriver was started successfully.\nStarting ChromeDriver 99.0.4844.51 (d537ec02474b5afe23684e7963d538896c63ac77-refs/branch-heads/4844@{#875}) on port 59895\nOnly local connections are allowed.\nPlease see https://chromedriver.chromium.org/security-considerations for suggestions on keeping ChromeDriver safe.\nChromeDriver was started successfully.\nException in thread &quot;Thread-4&quot; org.openqa.selenium.SessionNotCreatedException: Could not start a new session. Response code 500. Message: session not created: This version of ChromeDriver only supports Chrome version 99\nCurrent browser version is 98.0.4758.102 with binary path C:\\Program Files\\Google\\Chrome\\Application\\chrome.exe\nBuild info: version: '4.1.1', revision: 'e8fcc2cecf'\nSystem info: host: 'L-QLT-005', ip: '10.1.1.2', os.name: 'Windows 10', os.arch: 'amd64', os.version: '10.0', java.version: '17.0.2'\nDriver info: org.openqa.selenium.chrome.ChromeDriver\nCommand: [null, newSession {capabilities=[Capabilities {browserName: chrome, goog:chromeOptions: {args: [--start-maximized, --disable-extensions, --incognito, --disable-popup-blocking, --no-sandbox, --ignore-certificate-errors], extensions: []}}], desiredCapabilities=Capabilities {browserName: chrome, goog:chromeOptions: {args: [--start-maximized, --disable-extensions, --incognito, --disable-popup-blocking, --no-sandbox, --ignore-certificate-errors], extensions: []}}}]\n    at org.seleniumhq.selenium.remote_driver/org.openqa.selenium.remote.ProtocolHandshake.createSession(ProtocolHandshake.java:126)\n    at org.seleniumhq.selenium.remote_driver/org.openqa.selenium.remote.ProtocolHandshake.createSession(ProtocolHandshake.java:84)\n    at org.seleniumhq.selenium.remote_driver/org.openqa.selenium.remote.ProtocolHandshake.createSession(ProtocolHandshake.java:62)\n    at org.seleniumhq.selenium.remote_driver/org.openqa.selenium.remote.HttpCommandExecutor.execute(HttpCommandExecutor.java:156)\n    at org.seleniumhq.selenium.remote_driver/org.openqa.selenium.remote.service.DriverCommandExecutor.invokeExecute(DriverCommandExecutor.java:167)\n    at org.seleniumhq.selenium.remote_driver/org.openqa.selenium.remote.service.DriverCommandExecutor.execute(DriverCommandExecutor.java:142)\n    at org.seleniumhq.selenium.remote_driver/org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:543)\n    at org.seleniumhq.selenium.remote_driver/org.openqa.selenium.remote.RemoteWebDriver.startSession(RemoteWebDriver.java:230)\n    at org.seleniumhq.selenium.remote_driver/org.openqa.selenium.remote.RemoteWebDriver.&lt;init&gt;(RemoteWebDriver.java:151)\n    at org.seleniumhq.selenium.chromium_driver/org.openqa.selenium.chromium.ChromiumDriver.&lt;init&gt;(ChromiumDriver.java:108)\n    at org.seleniumhq.selenium.chrome_driver/org.openqa.selenium.chrome.ChromeDriver.&lt;init&gt;(ChromeDriver.java:104)\n    at org.seleniumhq.selenium.chrome_driver/org.openqa.selenium.chrome.ChromeDriver.&lt;init&gt;(ChromeDriver.java:91)\n    at org.seleniumhq.selenium.chrome_driver/org.openqa.selenium.chrome.ChromeDriver.&lt;init&gt;(ChromeDriver.java:80)\n    at io.beyn.spell/io.beyn.spell.Library.startBrowserChecker(Library.java:58)\n    at io.beyn.spell/io.beyn.spell.FXMLDocumentController.lambda$Event$5(FXMLDocumentController.java:188)\n</code></pre>\n"},{"tags":["java","android"],"answers":[{"tags":[],"owner":{"account_id":6416007,"reputation":1491,"user_id":4974176,"accept_rate":96,"display_name":"Vodet"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646231304,"creation_date":1646231304,"answer_id":71324361,"question_id":71324218,"body_markdown":"You have already done everything uncomment your removeItem method and add `pictureAdapter.notifyDataSetChanged()` at the end of removeItem method\r\n\r\nThis will reload the data set of your adapter\r\n\r\nIf you know the position of the deleted element you can use \r\n\r\n    pictureAdapter.notifyItemRemoved(position)\r\n\r\nThis will tell your adapter you remove an item from the data set on a specific position\r\n\r\n","title":"How to refresh fragment with recycle view when we delete some image file from recycle view in Android java","body":"<p>You have already done everything uncomment your removeItem method and add <code>pictureAdapter.notifyDataSetChanged()</code> at the end of removeItem method</p>\n<p>This will reload the data set of your adapter</p>\n<p>If you know the position of the deleted element you can use</p>\n<pre><code>pictureAdapter.notifyItemRemoved(position)\n</code></pre>\n<p>This will tell your adapter you remove an item from the data set on a specific position</p>\n"}],"owner":{"account_id":24429426,"reputation":1,"user_id":18354565,"display_name":"Jitendra Nihalani"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":74,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1646231304,"creation_date":1646230703,"question_id":71324218,"body_markdown":"fragment_picture.xml\r\n```\r\n&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:id=&quot;@+id/picture_fragment&quot;\r\n    android:layout_height=&quot;match_parent&quot;\r\n    android:background=&quot;#F1F1F1&quot;&gt;\r\n\r\n    &lt;androidx.swiperefreshlayout.widget.SwipeRefreshLayout\r\n        android:id=&quot;@+id/swipeRefresh&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;&gt;\r\n\r\n        &lt;androidx.recyclerview.widget.RecyclerView\r\n            android:id=&quot;@+id/rcv_picture&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;match_parent&quot;\r\n            app:layoutManager=&quot;androidx.recyclerview.widget.GridLayoutManager&quot;\r\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n            app:spanCount=&quot;1&quot;\r\n            android:visibility=&quot;gone&quot;\r\n            tools:listitem=&quot;@layout/item_picture&quot; /&gt;\r\n    &lt;/androidx.swiperefreshlayout.widget.SwipeRefreshLayout&gt;\r\n\r\n    &lt;androidx.constraintlayout.widget.Group\r\n        android:id=&quot;@+id/group_no_data&quot;\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:visibility=&quot;visible&quot;\r\n        app:constraint_referenced_ids=&quot;imv_no_data,tv_no_data&quot; /&gt;\r\n\r\n    &lt;androidx.appcompat.widget.AppCompatImageView\r\n        android:id=&quot;@+id/imv_no_data&quot;\r\n        android:layout_width=&quot;@dimen/_100sdp&quot;\r\n        android:layout_height=&quot;@dimen/_100sdp&quot;\r\n        android:layout_marginBottom=&quot;@dimen/_12sdp&quot;\r\n        android:padding=&quot;@dimen/_8sdp&quot;\r\n        android:src=&quot;@drawable/ic_no_image&quot;\r\n        app:layout_constraintBottom_toTopOf=&quot;@id/tv_no_data&quot;\r\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n        app:layout_constraintStart_toStartOf=&quot;parent&quot; /&gt;\r\n\r\n    &lt;androidx.appcompat.widget.AppCompatTextView\r\n        android:id=&quot;@+id/tv_no_data&quot;\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:layout_marginBottom=&quot;@dimen/_16sdp&quot;\r\n        android:text=&quot;@string/no_image&quot;\r\n        android:textColor=&quot;@color/color_828282&quot;\r\n        android:textSize=&quot;@dimen/_14sdp&quot;\r\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n        app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\r\n\r\n    &lt;ProgressBar\r\n        android:visibility=&quot;gone&quot;\r\n        android:id=&quot;@+id/progress&quot;\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:layout_marginTop=&quot;@dimen/_16sdp&quot;\r\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n        app:layout_constraintTop_toBottomOf=&quot;@+id/tv_no_data&quot; /&gt;\r\n\r\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\r\n```\r\n\r\nFragmentPicture.java\r\n\r\n```\r\npublic class PictureFragment extends BaseFragment&lt;FragmentPictureBinding&gt; {\r\n\r\n    private static final int REQUEST_PERMISSION_DELETE = 376;\r\n    private PictureAdapter pictureAdapter;\r\n    private int pos;\r\n    SwipeRefreshLayout swipeRefresh;\r\n\r\n    @Override\r\n    protected void initView() {\r\n        pictureAdapter = new PictureAdapter(new ArrayList&lt;&gt;(), getContext());\r\n        pictureAdapter.setCallBackAdapter(item -&gt; openMedia(item.getPath()));\r\n\r\n        pictureAdapter.setCallBackPicture(new PictureAdapter.CallBackPicture() {\r\n            @Override\r\n            public void onClickMore(String s, int adapterPosition, View v) {\r\n                showPopupMenuMore(s, adapterPosition, v);\r\n            }\r\n        });\r\n\r\n\r\n        binding.rcvPicture.setAdapter(pictureAdapter);\r\n        binding.swipeRefresh.setOnRefreshListener(() -&gt; {\r\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M) {\r\n                if (ContextCompat.checkSelfPermission(getContext(), Manifest.permission.READ_EXTERNAL_STORAGE) == PackageManager.PERMISSION_GRANTED\r\n                        || ContextCompat.checkSelfPermission(getContext(), Manifest.permission.WRITE_EXTERNAL_STORAGE) == PackageManager.PERMISSION_GRANTED) {\r\n                    getData();\r\n                }else {\r\n                    if (getActivity() instanceof MainActivity){\r\n\r\n                        ((MainActivity) getActivity()).askPermissionStorageMain();\r\n                    }\r\n                }\r\n            } else {\r\n                getData();\r\n            }\r\n            binding.swipeRefresh.setRefreshing(false);\r\n        });\r\n        binding.swipeRefresh.setColorSchemeResources(R.color.color_accent,\r\n                android.R.color.holo_green_dark,\r\n                android.R.color.holo_orange_dark,\r\n                android.R.color.holo_blue_dark);\r\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M) {\r\n            if (ContextCompat.checkSelfPermission(getContext(), Manifest.permission.READ_EXTERNAL_STORAGE) == PackageManager.PERMISSION_GRANTED\r\n                    || ContextCompat.checkSelfPermission(getContext(), Manifest.permission.WRITE_EXTERNAL_STORAGE) == PackageManager.PERMISSION_GRANTED) {\r\n                getData();\r\n            }\r\n        } else {\r\n            getData();\r\n        }\r\n    }\r\n\r\n    public void onCLickMore(String item, int pos, View view) {\r\n        showPopupMenuMore(item, pos, view);\r\n    }\r\n\r\n    private void showPopupMenuMore(String item, int pos, View view) {\r\n        PopupMenu popupMenu = new PopupMenu(getContext(), view);\r\n        popupMenu.inflate(R.menu.popup_menu_more_picture);\r\n        popupMenu.show();\r\n//        popupMenu.getMenu().getItem(1).setEnabled(PreferencesHelper.getBoolean(PreferencesHelper.KEY_SAVE_AS_GIF, true));\r\n        popupMenu.setOnMenuItemClickListener(menuItem -&gt;{\r\n            switch (menuItem.getItemId()) {\r\n                case R.id.share_picture:\r\n                    shareMedia(item);\r\n                    break;\r\n                case R.id.delete_picture:\r\n                    this.pos = pos;\r\n                    deletePhoto(item);\r\n                    break;\r\n            }\r\n            return true;\r\n        });\r\n    }\r\n\r\n    private void getData() {\r\n        getAllFilesInPicture()\r\n                .subscribeOn(Schedulers.computation())\r\n                .observeOn(AndroidSchedulers.mainThread())\r\n                .flatMap(this::mapFiles)\r\n                .subscribe(datas -&gt; {\r\n                    if (datas.isEmpty()) {\r\n                        binding.rcvPicture.setVisibility(View.GONE);\r\n                        binding.groupNoData.setVisibility(View.VISIBLE);\r\n                    } else {\r\n                        binding.rcvPicture.setVisibility(View.VISIBLE);\r\n                        binding.groupNoData.setVisibility(View.GONE);\r\n                        pictureAdapter.addDatas(datas);\r\n                    }\r\n                },throwable -&gt; {\r\n                });\r\n    }\r\n\r\n    public Single&lt;File[]&gt; getAllFilesInPicture() {\r\n        return Single.create(sub -&gt; {\r\n            File[] listFile = Storage.getFilesImageInStorage(requireContext());\r\n\r\n            if (listFile != null) {\r\n                sub.onSuccess(listFile);\r\n            } else {\r\n                sub.onSuccess(new File[]{});\r\n            }\r\n        });\r\n    }\r\n\r\n    public Single&lt;List&lt;VideoFile&gt;&gt; mapFiles(@NonNull File[] listFile) {\r\n        return Single.create(sub -&gt; {\r\n            long previousDate = 0;\r\n            List&lt;VideoFile&gt; videoFiles = new ArrayList&lt;&gt;();\r\n\r\n            Arrays.sort(listFile, (f1, f2) -&gt; Long.compare(f1.lastModified(), f2.lastModified()));\r\n            List&lt;String&gt; pictureFile = new ArrayList&lt;&gt;();\r\n            for (int i = listFile.length - 1; i &gt;= 0; i--) {\r\n                VideoFile videoFile = new VideoFile();\r\n                if (!Toolbox.isSameDay(previousDate, listFile[i].lastModified())) {\r\n                    VideoFile header = new VideoFile();\r\n                    header.setHeader(true);\r\n                    header.setLastModified(listFile[i].lastModified());\r\n                    videoFiles.add(header);\r\n                }\r\n                videoFile.setPath(listFile[i].getAbsolutePath());\r\n                videoFile.setName(listFile[i].getName());\r\n                videoFile.setSize(listFile[i].length());\r\n                BitmapFactory.Options options = new BitmapFactory.Options();\r\n                options.inJustDecodeBounds = true;\r\n                BitmapFactory.decodeFile(new File(listFile[i].getPath()).getAbsolutePath(), options);\r\n                int imageHeight = options.outHeight;\r\n                int imageWidth = options.outWidth;\r\n                videoFile.setResolution(imageWidth+&quot;x&quot;+imageHeight);\r\n                videoFile.setSize(listFile[i].length());\r\n                videoFile.setLastModified(listFile[i].lastModified());\r\n                videoFiles.add(videoFile);\r\n                previousDate = listFile[i].lastModified();\r\n\r\n                pictureFile.add(listFile[i].getAbsolutePath());\r\n\r\n            }\r\n            sub.onSuccess(videoFiles);\r\n        });\r\n    }\r\n\r\n    @Override\r\n    protected void initControl() {\r\n\r\n    }\r\n\r\n    private void itemToItem(String filepath){\r\n\r\n    }\r\n\r\n    private void openMedia(String filePath) {\r\n\r\n        Uri fileUri = FileProvider.getUriForFile(\r\n                getContext(), getContext().getPackageName() + &quot;.provider&quot;,\r\n                new File(filePath));\r\n        try {\r\n            Intent openVideoIntent = new Intent();\r\n            openVideoIntent.setAction(Intent.ACTION_VIEW)\r\n                    .addFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION | Intent.FLAG_ACTIVITY_NEW_TASK)\r\n                    .setDataAndType(\r\n                            fileUri,\r\n                            getContext().getContentResolver().getType(fileUri));\r\n            getContext().startActivity(openVideoIntent);\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n    private void shareMedia(String filePath) {\r\n        Uri fileUri = FileProvider.getUriForFile(\r\n                getContext(), getContext().getPackageName() + &quot;.provider&quot;,\r\n                new File(filePath));\r\n        Intent shareIntent = new Intent()\r\n                .setAction(Intent.ACTION_SEND)\r\n                .putExtra(Intent.EXTRA_STREAM, fileUri)\r\n                .setType(filePath.endsWith(&quot;.mp4&quot;) ? &quot;video/mp4&quot; : &quot;image/*&quot;);\r\n        shareIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);\r\n        getContext().startActivity(shareIntent);\r\n    }\r\n\r\n    protected void deletePhoto(String path) {\r\n        AlertDialog.Builder alert = new AlertDialog.Builder(getActivity());\r\n        alert.setTitle(&quot;Delete&quot;);\r\n        alert.setMessage(&quot;Do you want to delete this image ?&quot;);\r\n\r\n        alert.setPositiveButton(&quot;Yes&quot;, new DialogInterface.OnClickListener() {\r\n            @Override\r\n            public void onClick(DialogInterface dialog, int which) {\r\n                //This will delete my Image from recycleView\r\n                deleteMedia(path);\r\n                //I Wan&#39;t to add here code for refreshing recycle view\r\n\r\n            }\r\n        });\r\n        alert.setNegativeButton(&quot;No&quot;, new DialogInterface.OnClickListener() {\r\n            @Override\r\n            public void onClick(DialogInterface dialog, int which) {\r\n\r\n                dialog.dismiss();\r\n            }\r\n        });\r\n\r\n        alert.show();\r\n\r\n    }\r\n\r\n    private void deleteMedia(String filePath) {\r\n        if (Build.VERSION.SDK_INT &lt;= Build.VERSION_CODES.Q) {\r\n            new File(filePath).delete();\r\n            //removeItem(pos);\r\n            MediaScannerConnection.scanFile(getActivity(),\r\n                    new String[]{filePath}, new String[]{&quot;video/mp4&quot;},\r\n                    (path1, uri) -&gt; {\r\n\r\n                    });\r\n        } else {\r\n            MediaScannerConnection.scanFile(getActivity(),\r\n                    new String[]{filePath}, new String[]{&quot;video/mp4&quot;},\r\n                    (path1, uri) -&gt; {\r\n                        if (uri != null) {\r\n                            try {\r\n                                if (getActivity().getContentResolver().delete(uri, null, null) != -1) {\r\n                                \r\n                                    //removeItem(pos);\r\n                                }\r\n                                swipeRefresh.setRefreshing(false);\r\n                            } catch (SecurityException e) {\r\n                                List&lt;Uri&gt; uris = new ArrayList&lt;&gt;();\r\n                                uris.add(uri);\r\n                                requestDeletePermission(uris);\r\n                            }\r\n                        }\r\n                    });\r\n        }\r\n\r\n    }\r\n\r\n    private void requestDeletePermission(List&lt;Uri&gt; uriList) {\r\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.R) {\r\n            try {\r\n                PendingIntent pi = MediaStore.createDeleteRequest(getActivity().getContentResolver(), uriList);\r\n                startIntentSenderForResult(pi.getIntentSender(), REQUEST_PERMISSION_DELETE, null, 0, 0,\r\n                        0, null);\r\n            } catch (IntentSender.SendIntentException e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n    }\r\n\r\n    private void removeItem(int pos) {\r\n        getBaseActivity().runOnUiThread(() -&gt; {\r\n            pictureAdapter.getList().remove(pos);\r\n            pictureAdapter.notifyItemRemoved(pos);\r\n            if (pictureAdapter.getList().get(pictureAdapter.getList().size() - 1).isHeader()) {\r\n                pictureAdapter.getList().remove(pictureAdapter.getList().size() - 1);\r\n                pictureAdapter.notifyItemRemoved(pictureAdapter.getList().size() - 1);\r\n            }\r\n            if (pictureAdapter.getList().isEmpty()) {\r\n                binding.rcvPicture.setVisibility(View.GONE);\r\n                binding.groupNoData.setVisibility(View.VISIBLE);\r\n                binding.progress.setVisibility(View.GONE);\r\n            } else {\r\n                binding.rcvPicture.setVisibility(View.VISIBLE);\r\n                binding.groupNoData.setVisibility(View.GONE);\r\n            }\r\n\r\n            //Have?\r\n        });\r\n    }\r\n\r\n\r\n\r\n    @Override\r\n    protected boolean isNeedRefresh() {\r\n        return true;\r\n    }\r\n\r\n    @Override\r\n    protected FragmentPictureBinding getViewBinding(LayoutInflater inflater, ViewGroup container) {\r\n        return FragmentPictureBinding.inflate(LayoutInflater.from(getContext()));\r\n    }\r\n\r\n    @Override\r\n    public void onReceivedEvent(RxBusType type, Object data) {\r\n        switch (type) {\r\n            case SCREEN_SHOT:\r\n            case NOTI_MEDIA_CHANGE:\r\n                getData();\r\n                break;\r\n        }\r\n    }\r\n}\r\n\r\n```\r\nI added popup menu on picture_item of recycle view and when we press delete button of popup menu I send String path of that image to deletePhoto(item); and that method delete image.\r\n\r\nafter delete image we have to manually refresh fragment by pull refresh But can add any automatic method for refreshing fragment In this case?\r\n\r\nPlease see deletePhoto method where I deleted photo but when \r\nI tried refresh with removepos method its crash\r\n\r\nI tried also many methods from stackoverflow but did not worked on my case\r\nPlease help me","title":"How to refresh fragment with recycle view when we delete some image file from recycle view in Android java","body":"<p>fragment_picture.xml</p>\n<pre><code>&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:id=&quot;@+id/picture_fragment&quot;\n    android:layout_height=&quot;match_parent&quot;\n    android:background=&quot;#F1F1F1&quot;&gt;\n\n    &lt;androidx.swiperefreshlayout.widget.SwipeRefreshLayout\n        android:id=&quot;@+id/swipeRefresh&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;match_parent&quot;&gt;\n\n        &lt;androidx.recyclerview.widget.RecyclerView\n            android:id=&quot;@+id/rcv_picture&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;match_parent&quot;\n            app:layoutManager=&quot;androidx.recyclerview.widget.GridLayoutManager&quot;\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\n            app:spanCount=&quot;1&quot;\n            android:visibility=&quot;gone&quot;\n            tools:listitem=&quot;@layout/item_picture&quot; /&gt;\n    &lt;/androidx.swiperefreshlayout.widget.SwipeRefreshLayout&gt;\n\n    &lt;androidx.constraintlayout.widget.Group\n        android:id=&quot;@+id/group_no_data&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:visibility=&quot;visible&quot;\n        app:constraint_referenced_ids=&quot;imv_no_data,tv_no_data&quot; /&gt;\n\n    &lt;androidx.appcompat.widget.AppCompatImageView\n        android:id=&quot;@+id/imv_no_data&quot;\n        android:layout_width=&quot;@dimen/_100sdp&quot;\n        android:layout_height=&quot;@dimen/_100sdp&quot;\n        android:layout_marginBottom=&quot;@dimen/_12sdp&quot;\n        android:padding=&quot;@dimen/_8sdp&quot;\n        android:src=&quot;@drawable/ic_no_image&quot;\n        app:layout_constraintBottom_toTopOf=&quot;@id/tv_no_data&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot; /&gt;\n\n    &lt;androidx.appcompat.widget.AppCompatTextView\n        android:id=&quot;@+id/tv_no_data&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:layout_marginBottom=&quot;@dimen/_16sdp&quot;\n        android:text=&quot;@string/no_image&quot;\n        android:textColor=&quot;@color/color_828282&quot;\n        android:textSize=&quot;@dimen/_14sdp&quot;\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\n\n    &lt;ProgressBar\n        android:visibility=&quot;gone&quot;\n        android:id=&quot;@+id/progress&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:layout_marginTop=&quot;@dimen/_16sdp&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintTop_toBottomOf=&quot;@+id/tv_no_data&quot; /&gt;\n\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n</code></pre>\n<p>FragmentPicture.java</p>\n<pre><code>public class PictureFragment extends BaseFragment&lt;FragmentPictureBinding&gt; {\n\n    private static final int REQUEST_PERMISSION_DELETE = 376;\n    private PictureAdapter pictureAdapter;\n    private int pos;\n    SwipeRefreshLayout swipeRefresh;\n\n    @Override\n    protected void initView() {\n        pictureAdapter = new PictureAdapter(new ArrayList&lt;&gt;(), getContext());\n        pictureAdapter.setCallBackAdapter(item -&gt; openMedia(item.getPath()));\n\n        pictureAdapter.setCallBackPicture(new PictureAdapter.CallBackPicture() {\n            @Override\n            public void onClickMore(String s, int adapterPosition, View v) {\n                showPopupMenuMore(s, adapterPosition, v);\n            }\n        });\n\n\n        binding.rcvPicture.setAdapter(pictureAdapter);\n        binding.swipeRefresh.setOnRefreshListener(() -&gt; {\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M) {\n                if (ContextCompat.checkSelfPermission(getContext(), Manifest.permission.READ_EXTERNAL_STORAGE) == PackageManager.PERMISSION_GRANTED\n                        || ContextCompat.checkSelfPermission(getContext(), Manifest.permission.WRITE_EXTERNAL_STORAGE) == PackageManager.PERMISSION_GRANTED) {\n                    getData();\n                }else {\n                    if (getActivity() instanceof MainActivity){\n\n                        ((MainActivity) getActivity()).askPermissionStorageMain();\n                    }\n                }\n            } else {\n                getData();\n            }\n            binding.swipeRefresh.setRefreshing(false);\n        });\n        binding.swipeRefresh.setColorSchemeResources(R.color.color_accent,\n                android.R.color.holo_green_dark,\n                android.R.color.holo_orange_dark,\n                android.R.color.holo_blue_dark);\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M) {\n            if (ContextCompat.checkSelfPermission(getContext(), Manifest.permission.READ_EXTERNAL_STORAGE) == PackageManager.PERMISSION_GRANTED\n                    || ContextCompat.checkSelfPermission(getContext(), Manifest.permission.WRITE_EXTERNAL_STORAGE) == PackageManager.PERMISSION_GRANTED) {\n                getData();\n            }\n        } else {\n            getData();\n        }\n    }\n\n    public void onCLickMore(String item, int pos, View view) {\n        showPopupMenuMore(item, pos, view);\n    }\n\n    private void showPopupMenuMore(String item, int pos, View view) {\n        PopupMenu popupMenu = new PopupMenu(getContext(), view);\n        popupMenu.inflate(R.menu.popup_menu_more_picture);\n        popupMenu.show();\n//        popupMenu.getMenu().getItem(1).setEnabled(PreferencesHelper.getBoolean(PreferencesHelper.KEY_SAVE_AS_GIF, true));\n        popupMenu.setOnMenuItemClickListener(menuItem -&gt;{\n            switch (menuItem.getItemId()) {\n                case R.id.share_picture:\n                    shareMedia(item);\n                    break;\n                case R.id.delete_picture:\n                    this.pos = pos;\n                    deletePhoto(item);\n                    break;\n            }\n            return true;\n        });\n    }\n\n    private void getData() {\n        getAllFilesInPicture()\n                .subscribeOn(Schedulers.computation())\n                .observeOn(AndroidSchedulers.mainThread())\n                .flatMap(this::mapFiles)\n                .subscribe(datas -&gt; {\n                    if (datas.isEmpty()) {\n                        binding.rcvPicture.setVisibility(View.GONE);\n                        binding.groupNoData.setVisibility(View.VISIBLE);\n                    } else {\n                        binding.rcvPicture.setVisibility(View.VISIBLE);\n                        binding.groupNoData.setVisibility(View.GONE);\n                        pictureAdapter.addDatas(datas);\n                    }\n                },throwable -&gt; {\n                });\n    }\n\n    public Single&lt;File[]&gt; getAllFilesInPicture() {\n        return Single.create(sub -&gt; {\n            File[] listFile = Storage.getFilesImageInStorage(requireContext());\n\n            if (listFile != null) {\n                sub.onSuccess(listFile);\n            } else {\n                sub.onSuccess(new File[]{});\n            }\n        });\n    }\n\n    public Single&lt;List&lt;VideoFile&gt;&gt; mapFiles(@NonNull File[] listFile) {\n        return Single.create(sub -&gt; {\n            long previousDate = 0;\n            List&lt;VideoFile&gt; videoFiles = new ArrayList&lt;&gt;();\n\n            Arrays.sort(listFile, (f1, f2) -&gt; Long.compare(f1.lastModified(), f2.lastModified()));\n            List&lt;String&gt; pictureFile = new ArrayList&lt;&gt;();\n            for (int i = listFile.length - 1; i &gt;= 0; i--) {\n                VideoFile videoFile = new VideoFile();\n                if (!Toolbox.isSameDay(previousDate, listFile[i].lastModified())) {\n                    VideoFile header = new VideoFile();\n                    header.setHeader(true);\n                    header.setLastModified(listFile[i].lastModified());\n                    videoFiles.add(header);\n                }\n                videoFile.setPath(listFile[i].getAbsolutePath());\n                videoFile.setName(listFile[i].getName());\n                videoFile.setSize(listFile[i].length());\n                BitmapFactory.Options options = new BitmapFactory.Options();\n                options.inJustDecodeBounds = true;\n                BitmapFactory.decodeFile(new File(listFile[i].getPath()).getAbsolutePath(), options);\n                int imageHeight = options.outHeight;\n                int imageWidth = options.outWidth;\n                videoFile.setResolution(imageWidth+&quot;x&quot;+imageHeight);\n                videoFile.setSize(listFile[i].length());\n                videoFile.setLastModified(listFile[i].lastModified());\n                videoFiles.add(videoFile);\n                previousDate = listFile[i].lastModified();\n\n                pictureFile.add(listFile[i].getAbsolutePath());\n\n            }\n            sub.onSuccess(videoFiles);\n        });\n    }\n\n    @Override\n    protected void initControl() {\n\n    }\n\n    private void itemToItem(String filepath){\n\n    }\n\n    private void openMedia(String filePath) {\n\n        Uri fileUri = FileProvider.getUriForFile(\n                getContext(), getContext().getPackageName() + &quot;.provider&quot;,\n                new File(filePath));\n        try {\n            Intent openVideoIntent = new Intent();\n            openVideoIntent.setAction(Intent.ACTION_VIEW)\n                    .addFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION | Intent.FLAG_ACTIVITY_NEW_TASK)\n                    .setDataAndType(\n                            fileUri,\n                            getContext().getContentResolver().getType(fileUri));\n            getContext().startActivity(openVideoIntent);\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n\n    private void shareMedia(String filePath) {\n        Uri fileUri = FileProvider.getUriForFile(\n                getContext(), getContext().getPackageName() + &quot;.provider&quot;,\n                new File(filePath));\n        Intent shareIntent = new Intent()\n                .setAction(Intent.ACTION_SEND)\n                .putExtra(Intent.EXTRA_STREAM, fileUri)\n                .setType(filePath.endsWith(&quot;.mp4&quot;) ? &quot;video/mp4&quot; : &quot;image/*&quot;);\n        shareIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);\n        getContext().startActivity(shareIntent);\n    }\n\n    protected void deletePhoto(String path) {\n        AlertDialog.Builder alert = new AlertDialog.Builder(getActivity());\n        alert.setTitle(&quot;Delete&quot;);\n        alert.setMessage(&quot;Do you want to delete this image ?&quot;);\n\n        alert.setPositiveButton(&quot;Yes&quot;, new DialogInterface.OnClickListener() {\n            @Override\n            public void onClick(DialogInterface dialog, int which) {\n                //This will delete my Image from recycleView\n                deleteMedia(path);\n                //I Wan't to add here code for refreshing recycle view\n\n            }\n        });\n        alert.setNegativeButton(&quot;No&quot;, new DialogInterface.OnClickListener() {\n            @Override\n            public void onClick(DialogInterface dialog, int which) {\n\n                dialog.dismiss();\n            }\n        });\n\n        alert.show();\n\n    }\n\n    private void deleteMedia(String filePath) {\n        if (Build.VERSION.SDK_INT &lt;= Build.VERSION_CODES.Q) {\n            new File(filePath).delete();\n            //removeItem(pos);\n            MediaScannerConnection.scanFile(getActivity(),\n                    new String[]{filePath}, new String[]{&quot;video/mp4&quot;},\n                    (path1, uri) -&gt; {\n\n                    });\n        } else {\n            MediaScannerConnection.scanFile(getActivity(),\n                    new String[]{filePath}, new String[]{&quot;video/mp4&quot;},\n                    (path1, uri) -&gt; {\n                        if (uri != null) {\n                            try {\n                                if (getActivity().getContentResolver().delete(uri, null, null) != -1) {\n                                \n                                    //removeItem(pos);\n                                }\n                                swipeRefresh.setRefreshing(false);\n                            } catch (SecurityException e) {\n                                List&lt;Uri&gt; uris = new ArrayList&lt;&gt;();\n                                uris.add(uri);\n                                requestDeletePermission(uris);\n                            }\n                        }\n                    });\n        }\n\n    }\n\n    private void requestDeletePermission(List&lt;Uri&gt; uriList) {\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.R) {\n            try {\n                PendingIntent pi = MediaStore.createDeleteRequest(getActivity().getContentResolver(), uriList);\n                startIntentSenderForResult(pi.getIntentSender(), REQUEST_PERMISSION_DELETE, null, 0, 0,\n                        0, null);\n            } catch (IntentSender.SendIntentException e) {\n                e.printStackTrace();\n            }\n        }\n    }\n\n    private void removeItem(int pos) {\n        getBaseActivity().runOnUiThread(() -&gt; {\n            pictureAdapter.getList().remove(pos);\n            pictureAdapter.notifyItemRemoved(pos);\n            if (pictureAdapter.getList().get(pictureAdapter.getList().size() - 1).isHeader()) {\n                pictureAdapter.getList().remove(pictureAdapter.getList().size() - 1);\n                pictureAdapter.notifyItemRemoved(pictureAdapter.getList().size() - 1);\n            }\n            if (pictureAdapter.getList().isEmpty()) {\n                binding.rcvPicture.setVisibility(View.GONE);\n                binding.groupNoData.setVisibility(View.VISIBLE);\n                binding.progress.setVisibility(View.GONE);\n            } else {\n                binding.rcvPicture.setVisibility(View.VISIBLE);\n                binding.groupNoData.setVisibility(View.GONE);\n            }\n\n            //Have?\n        });\n    }\n\n\n\n    @Override\n    protected boolean isNeedRefresh() {\n        return true;\n    }\n\n    @Override\n    protected FragmentPictureBinding getViewBinding(LayoutInflater inflater, ViewGroup container) {\n        return FragmentPictureBinding.inflate(LayoutInflater.from(getContext()));\n    }\n\n    @Override\n    public void onReceivedEvent(RxBusType type, Object data) {\n        switch (type) {\n            case SCREEN_SHOT:\n            case NOTI_MEDIA_CHANGE:\n                getData();\n                break;\n        }\n    }\n}\n\n</code></pre>\n<p>I added popup menu on picture_item of recycle view and when we press delete button of popup menu I send String path of that image to deletePhoto(item); and that method delete image.</p>\n<p>after delete image we have to manually refresh fragment by pull refresh But can add any automatic method for refreshing fragment In this case?</p>\n<p>Please see deletePhoto method where I deleted photo but when\nI tried refresh with removepos method its crash</p>\n<p>I tried also many methods from stackoverflow but did not worked on my case\nPlease help me</p>\n"},{"tags":["java","spring-boot","jms","ibm-mq"],"comments":[{"owner":{"account_id":895964,"reputation":15035,"user_id":933250,"accept_rate":77,"display_name":"Shashi"},"score":2,"creation_date":1646205562,"post_id":71318579,"comment_id":126062936,"body_markdown":"IBM MQ 9.0 and above supports &quot;Shared Subscription&quot; where a single subscription can be opened by more than one consumers and published messages are distributed among the available consumers. The shared subscription ensures that only one of the consumers get the published message, not all. Have look here: https://www.ibm.com/docs/en/ibm-mq/9.0?topic=server-using-jms-20-shared-subscriptions.","body":"IBM MQ 9.0 and above supports &quot;Shared Subscription&quot; where a single subscription can be opened by more than one consumers and published messages are distributed among the available consumers. The shared subscription ensures that only one of the consumers get the published message, not all. Have look here: <a href=\"https://www.ibm.com/docs/en/ibm-mq/9.0?topic=server-using-jms-20-shared-subscriptions\" rel=\"nofollow noreferrer\">ibm.com/docs/en/ibm-mq/&hellip;</a>."},{"owner":{"account_id":5032228,"reputation":7304,"user_id":4042083,"accept_rate":50,"display_name":"Morag Hughson"},"score":0,"creation_date":1646209568,"post_id":71318579,"comment_id":126064099,"body_markdown":"What is the reason given to you that you can only have a topic?","body":"What is the reason given to you that you can only have a topic?"},{"owner":{"account_id":1055119,"reputation":414,"user_id":1058027,"accept_rate":80,"display_name":"Kevin"},"score":0,"creation_date":1646367685,"post_id":71318579,"comment_id":126110788,"body_markdown":"@Shashi thank you very much. this is what I wanted.","body":"@Shashi thank you very much. this is what I wanted."}],"answers":[{"tags":[],"owner":{"account_id":11434008,"reputation":30690,"user_id":8381946,"display_name":"Justin Bertram"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1646231300,"creation_date":1646229683,"answer_id":71324008,"question_id":71318579,"body_markdown":"JMS topics, generally speaking, provide publish-subscribe semantics in which every consumer/subscriber gets every message sent to the topic. However, there is a way to get point-to-point semantics with multiple consumers on a JMS topic - shared subscriptions.\r\n\r\nShared subscriptions are available from JMS 2 onward. When using this feature multiple consumers/subscribers can share the _same_ subscription and only one of those consumers will receive a given message.\r\n\r\nThe simplest way to create a shared subscription is by using [`javax.jms.Session.createSharedConsumer()`][1]. This will create a shared, non-durable subscription and unlike when creating a durable subscription setting the client ID on the connection is _optional_. There are other related methods for creating shared, durable subscriptions, using selectors, etc.\r\n\r\nIn short, as long as all the consumers are creating a shared subscription using the same subscription name then you can get the point-to-point semantics you need.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javaee/7/api/javax/jms/Session.html#createSharedConsumer-javax.jms.Topic-java.lang.String-","title":"JMS, consume a message from a topic only once","body":"<p>JMS topics, generally speaking, provide publish-subscribe semantics in which every consumer/subscriber gets every message sent to the topic. However, there is a way to get point-to-point semantics with multiple consumers on a JMS topic - shared subscriptions.</p>\n<p>Shared subscriptions are available from JMS 2 onward. When using this feature multiple consumers/subscribers can share the <em>same</em> subscription and only one of those consumers will receive a given message.</p>\n<p>The simplest way to create a shared subscription is by using <a href=\"https://docs.oracle.com/javaee/7/api/javax/jms/Session.html#createSharedConsumer-javax.jms.Topic-java.lang.String-\" rel=\"nofollow noreferrer\"><code>javax.jms.Session.createSharedConsumer()</code></a>. This will create a shared, non-durable subscription and unlike when creating a durable subscription setting the client ID on the connection is <em>optional</em>. There are other related methods for creating shared, durable subscriptions, using selectors, etc.</p>\n<p>In short, as long as all the consumers are creating a shared subscription using the same subscription name then you can get the point-to-point semantics you need.</p>\n"}],"owner":{"account_id":1055119,"reputation":414,"user_id":1058027,"accept_rate":80,"display_name":"Kevin"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":852,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":71324008,"answer_count":1,"score":2,"last_activity_date":1646231300,"creation_date":1646204389,"question_id":71318579,"body_markdown":"I have a requirement to establish a point to point communication with publisher and consumer in my application. What I&#39;m given is a topic. So I should make sure the message in the topic will be consumed only once and only one instance should consume it. (There are multiple instances of the consumer.) \r\n\r\nI understand message queue is the solution for the above requirement. But I will have to work with the topic given instead.\r\n\r\nI tried one sample application and my all my consumer instances consumed the message in the topic. I planned to use a table to keep a track of message processing but it does not seem like a good solution. We use IBM MQ with spring boot JMS. Is this something doable?","title":"JMS, consume a message from a topic only once","body":"<p>I have a requirement to establish a point to point communication with publisher and consumer in my application. What I'm given is a topic. So I should make sure the message in the topic will be consumed only once and only one instance should consume it. (There are multiple instances of the consumer.)</p>\n<p>I understand message queue is the solution for the above requirement. But I will have to work with the topic given instead.</p>\n<p>I tried one sample application and my all my consumer instances consumed the message in the topic. I planned to use a table to keep a track of message processing but it does not seem like a good solution. We use IBM MQ with spring boot JMS. Is this something doable?</p>\n"},{"tags":["java","syntax","predicate"],"comments":[{"owner":{"account_id":7414275,"reputation":14648,"user_id":5640649,"accept_rate":91,"display_name":"lealceldeiro"},"score":0,"creation_date":1646225686,"post_id":71323029,"comment_id":126069662,"body_markdown":"What about `List&lt;Predicate&lt;MyClass&gt;&gt; checks = Arrays.asList(a -&gt; myClassHelper.isCond1(a), a -&gt; myClassHelper.isCond2(a));` ?","body":"What about <code>List&lt;Predicate&lt;MyClass&gt;&gt; checks = Arrays.asList(a -&gt; myClassHelper.isCond1(a), a -&gt; myClassHelper.isCond2(a));</code> ?"},{"owner":{"account_id":24145984,"reputation":23,"user_id":18111577,"display_name":"i_have_no_clue_man"},"score":0,"creation_date":1646226086,"post_id":71323029,"comment_id":126069802,"body_markdown":"@lealceldeiro This appears to work when I explicitly cast `a` to `MyClass`. Would there perhaps be a way to do this while still using the method reference operator(::)?","body":"@lealceldeiro This appears to work when I explicitly cast <code>a</code> to <code>MyClass</code>. Would there perhaps be a way to do this while still using the method reference operator(::)?"}],"answers":[{"tags":[],"owner":{"account_id":1063012,"reputation":71986,"user_id":1064245,"accept_rate":82,"display_name":"M A"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1646225994,"creation_date":1646225994,"answer_id":71323134,"question_id":71323029,"body_markdown":"The first statement should work but you forgot to specify the predicate type `Predicate&lt;MyClass&gt;`, otherwise the compiler cannot infer it from the method references:\r\n\r\n    List&lt;Predicate&lt;MyClass&gt;&gt; checks2 = Arrays.asList(myClassHelper::isCond1, myClassHelper::isCond2);\r\n\r\nOr using lambdas:\r\n\r\n    List&lt;Predicate&lt;MyClass&gt;&gt; checks3 = Arrays.asList(a -&gt; myClassHelper.isCond1(a), a -&gt; myClassHelper.isCond2(a));","title":"Java - How do I create Predicates as Arrays.asList() arguments?","body":"<p>The first statement should work but you forgot to specify the predicate type <code>Predicate&lt;MyClass&gt;</code>, otherwise the compiler cannot infer it from the method references:</p>\n<pre><code>List&lt;Predicate&lt;MyClass&gt;&gt; checks2 = Arrays.asList(myClassHelper::isCond1, myClassHelper::isCond2);\n</code></pre>\n<p>Or using lambdas:</p>\n<pre><code>List&lt;Predicate&lt;MyClass&gt;&gt; checks3 = Arrays.asList(a -&gt; myClassHelper.isCond1(a), a -&gt; myClassHelper.isCond2(a));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10777133,"reputation":7282,"user_id":7928721,"display_name":"samabcde"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646231200,"creation_date":1646231200,"answer_id":71324336,"question_id":71323029,"body_markdown":"If you want to convert multiple `Predicate` to \r\n\r\n### List \r\n[`List.of`][1] since JKD 9 is a better API(e.g the return list is immutable, rejecting null), check [What is the difference between List.of and Arrays.asList?](https://stackoverflow.com/questions/46579074/what-is-the-difference-between-list-of-and-arrays-aslist) for details.\r\n\r\n### Stream\r\n[`Stream.of`][2] is even better if you actually want to use Stream API.\r\n\r\n### Predicate\r\nIf there are multiple MyClass to test, combining the Predicate to one give your more flexibility, and looks more natural.\r\n```java\r\nimport java.util.*;\r\nimport java.util.function.Predicate;\r\nimport java.util.stream.Stream;\r\n\r\npublic class MultiplePredicate {\r\n    public static void main(String[] args) {\r\n        List&lt;MyClass&gt; items = new ArrayList&lt;&gt;();\r\n        items.add(new MyClass(1));\r\n        items.add(new MyClass(2));\r\n        items.add(new MyClass(3));\r\n        //                                          drawback as compiler not smart enough\r\n        Predicate&lt;MyClass&gt; allCondNotMatch = Stream.&lt;Predicate&lt;MyClass&gt;&gt;of(MyClassHelper::isCond1, MyClassHelper::isCond2)\r\n                .map(Predicate::not)\r\n                .reduce((myClass) -&gt; true, Predicate::and);\r\n        List&lt;MyClass&gt; itemsWithAllCondNotMatch = items.stream().filter(allCondNotMatch).toList();\r\n        System.out.println(itemsWithAllCondNotMatch);\r\n    }\r\n\r\n    public static class MyClassHelper {\r\n        public static boolean isCond1(MyClass myClass) {\r\n            return myClass.value == 1;\r\n        }\r\n\r\n        public static boolean isCond2(MyClass myClass) {\r\n            return myClass.value == 2;\r\n        }\r\n    }\r\n\r\n    public static class MyClass {\r\n        private final int value;\r\n\r\n        public MyClass(int value) {\r\n            this.value = value;\r\n        }\r\n\r\n        @Override\r\n        public String toString() {\r\n            return &quot;MyClass{&quot; +\r\n                    &quot;value=&quot; + value +\r\n                    &#39;}&#39;;\r\n        }\r\n    }\r\n}\r\n\r\n```\r\n\r\n\r\n  [1]:\r\nhttps://docs.oracle.com/en/java/javase/16/docs/api/java.base/java/util/List.html#of(E...)\r\n  [2]: https://docs.oracle.com/en/java/javase/16/docs/api/java.base/java/util/stream/Stream.html#of(T...)\r\n","title":"Java - How do I create Predicates as Arrays.asList() arguments?","body":"<p>If you want to convert multiple <code>Predicate</code> to</p>\n<h3>List</h3>\n<p><a href=\"https://docs.oracle.com/en/java/javase/16/docs/api/java.base/java/util/List.html#of(E...)\" rel=\"nofollow noreferrer\"><code>List.of</code></a> since JKD 9 is a better API(e.g the return list is immutable, rejecting null), check <a href=\"https://stackoverflow.com/questions/46579074/what-is-the-difference-between-list-of-and-arrays-aslist\">What is the difference between List.of and Arrays.asList?</a> for details.</p>\n<h3>Stream</h3>\n<p><a href=\"https://docs.oracle.com/en/java/javase/16/docs/api/java.base/java/util/stream/Stream.html#of(T...)\" rel=\"nofollow noreferrer\"><code>Stream.of</code></a> is even better if you actually want to use Stream API.</p>\n<h3>Predicate</h3>\n<p>If there are multiple MyClass to test, combining the Predicate to one give your more flexibility, and looks more natural.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.*;\nimport java.util.function.Predicate;\nimport java.util.stream.Stream;\n\npublic class MultiplePredicate {\n    public static void main(String[] args) {\n        List&lt;MyClass&gt; items = new ArrayList&lt;&gt;();\n        items.add(new MyClass(1));\n        items.add(new MyClass(2));\n        items.add(new MyClass(3));\n        //                                          drawback as compiler not smart enough\n        Predicate&lt;MyClass&gt; allCondNotMatch = Stream.&lt;Predicate&lt;MyClass&gt;&gt;of(MyClassHelper::isCond1, MyClassHelper::isCond2)\n                .map(Predicate::not)\n                .reduce((myClass) -&gt; true, Predicate::and);\n        List&lt;MyClass&gt; itemsWithAllCondNotMatch = items.stream().filter(allCondNotMatch).toList();\n        System.out.println(itemsWithAllCondNotMatch);\n    }\n\n    public static class MyClassHelper {\n        public static boolean isCond1(MyClass myClass) {\n            return myClass.value == 1;\n        }\n\n        public static boolean isCond2(MyClass myClass) {\n            return myClass.value == 2;\n        }\n    }\n\n    public static class MyClass {\n        private final int value;\n\n        public MyClass(int value) {\n            this.value = value;\n        }\n\n        @Override\n        public String toString() {\n            return &quot;MyClass{&quot; +\n                    &quot;value=&quot; + value +\n                    '}';\n        }\n    }\n}\n\n</code></pre>\n"}],"owner":{"account_id":24145984,"reputation":23,"user_id":18111577,"display_name":"i_have_no_clue_man"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":435,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":71323134,"answer_count":2,"score":2,"last_activity_date":1646231200,"creation_date":1646225569,"question_id":71323029,"body_markdown":"I have a few predicates that I want to put in a list so I can then call stream().noneMatch() on my list. I successfully did this by creating named Predicates but how can I create them within an Arrays.asList()&#39;s argument list?  \r\n  \r\nHere&#39;s the working code that I&#39;d like to convert:\r\n\r\n```java\r\nArrayList&lt;Predicate&lt;MyClass&gt;&gt; checks = new ArrayList&lt;&gt;();\r\nPredicate&lt;MyClass&gt; isCond1 = myClassHelper::isCond1;\r\nPredicate&lt;MyClass&gt; isCond2 = myClassHelper::isCond2;\r\nchecks.add(isCond1);\r\nchecks.add(isCond2);\r\n```  \r\n\r\nI&#39;d expect the result of the conversion to look something like this:\r\n```\r\nList&lt;Predicate&gt; checks = Arrays.asList(myClassHelper::isCond1, myClassHelper::isCond2);\r\n```\r\nor\r\n```\r\nList&lt;Predicate&gt; checks = Arrays.asList(a -&gt; myClassHelper::isCond1, a -&gt; myClassHelper::isCond2);\r\n```\r\n(neither of these are correct)    \r\nWhere can I specify the argument for the conditions here?\r\n\r\nSorry if this could have been titled better, I always struggle with that.","title":"Java - How do I create Predicates as Arrays.asList() arguments?","body":"<p>I have a few predicates that I want to put in a list so I can then call stream().noneMatch() on my list. I successfully did this by creating named Predicates but how can I create them within an Arrays.asList()'s argument list?</p>\n<p>Here's the working code that I'd like to convert:</p>\n<pre class=\"lang-java prettyprint-override\"><code>ArrayList&lt;Predicate&lt;MyClass&gt;&gt; checks = new ArrayList&lt;&gt;();\nPredicate&lt;MyClass&gt; isCond1 = myClassHelper::isCond1;\nPredicate&lt;MyClass&gt; isCond2 = myClassHelper::isCond2;\nchecks.add(isCond1);\nchecks.add(isCond2);\n</code></pre>\n<p>I'd expect the result of the conversion to look something like this:</p>\n<pre><code>List&lt;Predicate&gt; checks = Arrays.asList(myClassHelper::isCond1, myClassHelper::isCond2);\n</code></pre>\n<p>or</p>\n<pre><code>List&lt;Predicate&gt; checks = Arrays.asList(a -&gt; myClassHelper::isCond1, a -&gt; myClassHelper::isCond2);\n</code></pre>\n<p>(neither of these are correct)<br />\nWhere can I specify the argument for the conditions here?</p>\n<p>Sorry if this could have been titled better, I always struggle with that.</p>\n"},{"tags":["java","file","delete-file"],"comments":[{"owner":{"account_id":8766622,"reputation":1498,"user_id":6554747,"accept_rate":100,"display_name":"progyammer"},"score":0,"creation_date":1516387514,"post_id":48347442,"comment_id":83681238,"body_markdown":"Would it be a good idea to change the permission of the file?","body":"Would it be a good idea to change the permission of the file?"},{"owner":{"account_id":55989,"reputation":17809,"user_id":167745,"accept_rate":76,"display_name":"Stewart"},"score":0,"creation_date":1516394083,"post_id":48347442,"comment_id":83684509,"body_markdown":"Unix file permissions can be easily restricted to a single user. Create a user and run your JVM from that user.","body":"Unix file permissions can be easily restricted to a single user. Create a user and run your JVM from that user."},{"owner":{"account_id":6095312,"reputation":33135,"user_id":4756299,"display_name":"Andrew Henle"},"score":1,"creation_date":1516407397,"post_id":48347442,"comment_id":83689370,"body_markdown":"*On Linux, if a file is deleted while opened, then Linux will rename the file and then automatically delete the file when it is closed.*  Not usually.  POSIX-type systems usually just remove the directory entry for the file immediately.  Some filesystems (NFS) do behave as you noted, but that&#39;s not normal.","body":"<i>On Linux, if a file is deleted while opened, then Linux will rename the file and then automatically delete the file when it is closed.</i>  Not usually.  POSIX-type systems usually just remove the directory entry for the file immediately.  Some filesystems (NFS) do behave as you noted, but that&#39;s not normal."},{"owner":{"account_id":3421244,"reputation":35863,"user_id":2868801,"display_name":"dave_thompson_085"},"score":1,"creation_date":1516409898,"post_id":48347442,"comment_id":83689863,"body_markdown":"In Unix file delete, or more exactly unlink, requires write permission to the _containing directory_ not the file itself. (`rm` without `-f` _prompts_ if you don&#39;t have write on a file, but succeeds if you confirm.) But if you&#39;re creating the file (and dir entry) (by opening it) you need write on the dir for _that_. @Stewart: OP says it&#39;s another thread in the same java process, which you can&#39;t isolate by userid.","body":"In Unix file delete, or more exactly unlink, requires write permission to the <i>containing directory</i> not the file itself. (<code>rm</code> without <code>-f</code> <i>prompts</i> if you don&#39;t have write on a file, but succeeds if you confirm.) But if you&#39;re creating the file (and dir entry) (by opening it) you need write on the dir for <i>that</i>. @Stewart: OP says it&#39;s another thread in the same java process, which you can&#39;t isolate by userid."},{"owner":{"account_id":3421244,"reputation":35863,"user_id":2868801,"display_name":"dave_thompson_085"},"score":0,"creation_date":1516410194,"post_id":48347442,"comment_id":83689912,"body_markdown":"Assuming no JNI/JNA and your program isn&#39;t already running under a `SecurityManager` you could add one with a set of permissions that includes everything you need _except_ delete on the given file (or if suitable all files), which will probably require numerous tries to get right, and see where it throws an exception, unless your code has any handler that swallows the exception. Or you could run under a debugger and set breakpoints at `File.delete` and `Files.delete` and `deleteIfExists` and maybe some others I&#39;ve missed.","body":"Assuming no JNI/JNA and your program isn&#39;t already running under a <code>SecurityManager</code> you could add one with a set of permissions that includes everything you need <i>except</i> delete on the given file (or if suitable all files), which will probably require numerous tries to get right, and see where it throws an exception, unless your code has any handler that swallows the exception. Or you could run under a debugger and set breakpoints at <code>File.delete</code> and <code>Files.delete</code> and <code>deleteIfExists</code> and maybe some others I&#39;ve missed."},{"owner":{"account_id":55989,"reputation":17809,"user_id":167745,"accept_rate":76,"display_name":"Stewart"},"score":0,"creation_date":1516440984,"post_id":48347442,"comment_id":83695652,"body_markdown":"@dave_thompson_085  Another thread in the same process?  Then surely OP has access to the source, and with detective work can find the culprit.  Unless the codebase is such an awful mess ...........","body":"@dave_thompson_085  Another thread in the same process?  Then surely OP has access to the source, and with detective work can find the culprit.  Unless the codebase is such an awful mess ..........."},{"owner":{"account_id":111410,"reputation":8252,"user_id":294317,"accept_rate":69,"display_name":"Nathan"},"score":0,"creation_date":1516455331,"post_id":48347442,"comment_id":83700003,"body_markdown":"@Stewart Given that the program has 185k lines of code and I have access to the source, can you propose the type of detective work to do?","body":"@Stewart Given that the program has 185k lines of code and I have access to the source, can you propose the type of detective work to do?"},{"owner":{"account_id":111410,"reputation":8252,"user_id":294317,"accept_rate":69,"display_name":"Nathan"},"score":0,"creation_date":1516455522,"post_id":48347442,"comment_id":83700072,"body_markdown":"@dave_thompson_085 Can you make your `SecurityManager` comment an answer?  This seems like a very viable solution since the `SecurityManager` can dump the call stack of any file being deleted which matches a given pattern without the overhead of conditional breakpoints.  I can also log additional diagnostic information to determine why the deleting thread decided to delete the file.","body":"@dave_thompson_085 Can you make your <code>SecurityManager</code> comment an answer?  This seems like a very viable solution since the <code>SecurityManager</code> can dump the call stack of any file being deleted which matches a given pattern without the overhead of conditional breakpoints.  I can also log additional diagnostic information to determine why the deleting thread decided to delete the file."},{"owner":{"account_id":55989,"reputation":17809,"user_id":167745,"accept_rate":76,"display_name":"Stewart"},"score":0,"creation_date":1516455701,"post_id":48347442,"comment_id":83700133,"body_markdown":"@nathan In a completely unknown situation, I would probably begin with a global find/grep of the filename, patterns &amp; variations thereof, or the directory name. If that turned up nothing, a global find/grep for all uses of `java.io.*` or `nio` packages.","body":"@nathan In a completely unknown situation, I would probably begin with a global find/grep of the filename, patterns &amp; variations thereof, or the directory name. If that turned up nothing, a global find/grep for all uses of <code>java.io.*</code> or <code>nio</code> packages."},{"owner":{"account_id":111410,"reputation":8252,"user_id":294317,"accept_rate":69,"display_name":"Nathan"},"score":1,"creation_date":1516458127,"post_id":48347442,"comment_id":83701009,"body_markdown":"@Stewart I did a global find and went through all 100 uses of `File.delete()`.  A few of them could delete the file in question, but it is hard to say if they do.  I added some logging statements for each one... now to run the code and wait for the issue to reproduce in a day or so.","body":"@Stewart I did a global find and went through all 100 uses of <code>File.delete()</code>.  A few of them could delete the file in question, but it is hard to say if they do.  I added some logging statements for each one... now to run the code and wait for the issue to reproduce in a day or so."},{"owner":{"account_id":55989,"reputation":17809,"user_id":167745,"accept_rate":76,"display_name":"Stewart"},"score":0,"creation_date":1516459015,"post_id":48347442,"comment_id":83701304,"body_markdown":"@Nathan Any detective work is mostly just aquiring written evidence and waiting. Just ask the police ;)","body":"@Nathan Any detective work is mostly just aquiring written evidence and waiting. Just ask the police ;)"},{"owner":{"account_id":68986,"reputation":21295,"user_id":200987,"accept_rate":69,"display_name":"oligofren"},"score":0,"creation_date":1624398574,"post_id":48347442,"comment_id":120347462,"body_markdown":"A bit late to the show, but most (every?) debugger has _conditional_ breakpoints, meaning you could add a breakpoint, then rightclick-&gt;Edit and add a condition on when it should break. The condition would then be if the file&#39;s name matched a given filename.","body":"A bit late to the show, but most (every?) debugger has <i>conditional</i> breakpoints, meaning you could add a breakpoint, then rightclick-&gt;Edit and add a condition on when it should break. The condition would then be if the file&#39;s name matched a given filename."},{"owner":{"account_id":111410,"reputation":8252,"user_id":294317,"accept_rate":69,"display_name":"Nathan"},"score":1,"creation_date":1624402766,"post_id":48347442,"comment_id":120348314,"body_markdown":"@oligofren You may have missed this in my question.  If I add a conditional breakpoint, then the program runs too slowly.","body":"@oligofren You may have missed this in my question.  If I add a conditional breakpoint, then the program runs too slowly."},{"owner":{"account_id":68986,"reputation":21295,"user_id":200987,"accept_rate":69,"display_name":"oligofren"},"score":0,"creation_date":1624403366,"post_id":48347442,"comment_id":120348417,"body_markdown":"Ah, final sentence.","body":"Ah, final sentence."}],"answers":[{"tags":[],"owner":{"account_id":111410,"reputation":8252,"user_id":294317,"accept_rate":69,"display_name":"Nathan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1646230895,"creation_date":1646230895,"answer_id":71324267,"question_id":48347442,"body_markdown":"The JDK&#39;s file locking mechanism only protects the file from other processes and not threads from the same process.\r\n\r\nSo, I wrote a read/write file locking framework.  If any thread is holding a read or write lock on a file, then all other threads cannot write or delete the file.  If a thread is holding a read lock on a file, then it can&#39;t write or delete the file.  While a thread has a read or write lock on a file, none of the ancestor directories can be deleted.\r\n\r\nThis framework flushed out the bugs very quickly.  I have not seen a problem since.","title":"Prevent and Detect Deletion of an Open File","body":"<p>The JDK's file locking mechanism only protects the file from other processes and not threads from the same process.</p>\n<p>So, I wrote a read/write file locking framework.  If any thread is holding a read or write lock on a file, then all other threads cannot write or delete the file.  If a thread is holding a read lock on a file, then it can't write or delete the file.  While a thread has a read or write lock on a file, none of the ancestor directories can be deleted.</p>\n<p>This framework flushed out the bugs very quickly.  I have not seen a problem since.</p>\n"}],"owner":{"account_id":111410,"reputation":8252,"user_id":294317,"accept_rate":69,"display_name":"Nathan"},"comment_count":14,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":671,"favorite_count":0,"down_vote_count":1,"up_vote_count":4,"accepted_answer_id":71324267,"answer_count":1,"score":3,"last_activity_date":1646230895,"creation_date":1516386631,"question_id":48347442,"body_markdown":"My Java program opens a file and slowly writes to the file.  When the operation is completed, the program closes the file and moves the file to its final resting place in another directory.  The problem is that as the operation is running, another thread in the same Java program deletes the file.\r\n\r\nWindows will not allow the deletion of a file while it is open.  Linux allows the file to be deleted while open.  On NFS file systems, Linux will rename the file and then automatically delete the file when it is closed.  How do I prevent the deletion of files while they are open?\r\n\r\nHow do I figure out what is deleting the file?  How do I get the call stack of the Java thread in my program that is deleting the file?\r\n\r\nChanging the file owner will not work since another thread in the same process is deleting the file.\r\n\r\nThe program is actively writing to the file so removing the write permission on the file will not work.  Removing the write permission on the directory will not work either since the directory has other files being created and deleted.\r\n\r\nThe program has 185k lines of code.  There are many calls to `File.delete()` throughout the code.  I could set a breakpoint on `File.delete()`, `Files.delete()`, etc.  However, the program is creating and deleting a lot of files quickly.  This will generate a lot of breakpoint hits burying the needle in the haystack.  I could make the breakpoint conditional but then the program will run very slowly.","title":"Prevent and Detect Deletion of an Open File","body":"<p>My Java program opens a file and slowly writes to the file.  When the operation is completed, the program closes the file and moves the file to its final resting place in another directory.  The problem is that as the operation is running, another thread in the same Java program deletes the file.</p>\n\n<p>Windows will not allow the deletion of a file while it is open.  Linux allows the file to be deleted while open.  On NFS file systems, Linux will rename the file and then automatically delete the file when it is closed.  How do I prevent the deletion of files while they are open?</p>\n\n<p>How do I figure out what is deleting the file?  How do I get the call stack of the Java thread in my program that is deleting the file?</p>\n\n<p>Changing the file owner will not work since another thread in the same process is deleting the file.</p>\n\n<p>The program is actively writing to the file so removing the write permission on the file will not work.  Removing the write permission on the directory will not work either since the directory has other files being created and deleted.</p>\n\n<p>The program has 185k lines of code.  There are many calls to <code>File.delete()</code> throughout the code.  I could set a breakpoint on <code>File.delete()</code>, <code>Files.delete()</code>, etc.  However, the program is creating and deleting a lot of files quickly.  This will generate a lot of breakpoint hits burying the needle in the haystack.  I could make the breakpoint conditional but then the program will run very slowly.</p>\n"},{"tags":["java","memory","type-conversion"],"answers":[{"tags":[],"owner":{"account_id":1529248,"reputation":92157,"user_id":1426891,"display_name":"Jeff Bowman"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1646230685,"creation_date":1646230685,"answer_id":71324215,"question_id":71324128,"body_markdown":"Infinity (including positive and negative infinity) is a [special value in floating-point arithmetic](https://en.wikipedia.org/wiki/Floating-point_arithmetic#Infinities) as defined in the floating-point standard [IEEE 754](https://en.wikipedia.org/wiki/IEEE_754). Certain operations produce the value infinity, [including overflow](https://en.wikipedia.org/wiki/Floating-point_arithmetic#Dealing_with_exceptional_cases), and it is appropriately formatted as a string.\r\n\r\nAs described in the [rationale section of the Wikipedia article](https://en.wikipedia.org/wiki/Floating-point_arithmetic#IEEE_754_design_rationale):\r\n\r\n&gt; The special values such as infinity and NaN ensure that the floating-point arithmetic is algebraically complete: every floating-point operation produces a well-defined result and will notby defaultthrow a machine interrupt or trap. Moreover, the choices of special values returned in exceptional cases were designed to give the correct answer in many cases. For instance, under IEEE 754 arithmetic, continued fractions such as R(z) := 7  3/[z  2  1/(z  7 + 10/[z  2  2/(z  3)])] will give the correct answer on all inputs, as the potential divide by zero, e.g. for z = 3, is correctly handled by giving +infinity, and so such exceptions can be safely ignored. As noted by Kahan, the unhandled trap consecutive to a floating-point to 16-bit integer conversion overflow that caused the loss of an Ariane 5 rocket would not have happened under the default IEEE 754 floating-point policy.","title":"why we get output as &#39;infinity&#39; after the range of float is exceeded","body":"<p>Infinity (including positive and negative infinity) is a <a href=\"https://en.wikipedia.org/wiki/Floating-point_arithmetic#Infinities\" rel=\"nofollow noreferrer\">special value in floating-point arithmetic</a> as defined in the floating-point standard <a href=\"https://en.wikipedia.org/wiki/IEEE_754\" rel=\"nofollow noreferrer\">IEEE 754</a>. Certain operations produce the value infinity, <a href=\"https://en.wikipedia.org/wiki/Floating-point_arithmetic#Dealing_with_exceptional_cases\" rel=\"nofollow noreferrer\">including overflow</a>, and it is appropriately formatted as a string.</p>\n<p>As described in the <a href=\"https://en.wikipedia.org/wiki/Floating-point_arithmetic#IEEE_754_design_rationale\" rel=\"nofollow noreferrer\">rationale section of the Wikipedia article</a>:</p>\n<blockquote>\n<p>The special values such as infinity and NaN ensure that the floating-point arithmetic is algebraically complete: every floating-point operation produces a well-defined result and will notby defaultthrow a machine interrupt or trap. Moreover, the choices of special values returned in exceptional cases were designed to give the correct answer in many cases. For instance, under IEEE 754 arithmetic, continued fractions such as R(z) := 7  3/[z  2  1/(z  7 + 10/[z  2  2/(z  3)])] will give the correct answer on all inputs, as the potential divide by zero, e.g. for z = 3, is correctly handled by giving +infinity, and so such exceptions can be safely ignored. As noted by Kahan, the unhandled trap consecutive to a floating-point to 16-bit integer conversion overflow that caused the loss of an Ariane 5 rocket would not have happened under the default IEEE 754 floating-point policy.</p>\n</blockquote>\n"}],"owner":{"account_id":11491503,"reputation":1,"user_id":8422318,"display_name":"Ashutosh jha"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":198,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1646230685,"creation_date":1646230301,"question_id":71324128,"body_markdown":"I am trying to figure out, when value of float exceed&#39;s the range i.e. greater than 3.4E38 it gives the output as &#39;infinity&#39;. I understand that when float holds max_value all the bits in exponent bit will be holding &#39;1&#39; i.e. 11111111 and as soon as it exceeds the range it becomes 100000000 but Exponent bit can only hold 8 bit so &#39;1&#39; will be trucated and only &#39;00000000&#39; will be stored in the exponent block which is equal to 0. So, how output screen prints &#39;infinity&#39;?\r\n\r\n&#39;&#39;&#39;\r\n\r\n    public class MyClass\r\n    {\r\n        public static void main(String args[]) \r\n        {\r\n            float f=(float)3.4E+76;\r\n            System.out.println(f);\r\n        }\r\n    }\r\n&#39;&#39;&#39;\r\n\r\n\r\n[output of the above code][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/eiCRi.png","title":"why we get output as &#39;infinity&#39; after the range of float is exceeded","body":"<p>I am trying to figure out, when value of float exceed's the range i.e. greater than 3.4E38 it gives the output as 'infinity'. I understand that when float holds max_value all the bits in exponent bit will be holding '1' i.e. 11111111 and as soon as it exceeds the range it becomes 100000000 but Exponent bit can only hold 8 bit so '1' will be trucated and only '00000000' will be stored in the exponent block which is equal to 0. So, how output screen prints 'infinity'?</p>\n<p>'''</p>\n<pre><code>public class MyClass\n{\n    public static void main(String args[]) \n    {\n        float f=(float)3.4E+76;\n        System.out.println(f);\n    }\n}\n</code></pre>\n<p>'''</p>\n<p><a href=\"https://i.stack.imgur.com/eiCRi.png\" rel=\"nofollow noreferrer\">output of the above code</a></p>\n"},{"tags":["java","unit-testing","junit","mockito"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1646179446,"post_id":71315779,"comment_id":126058456,"body_markdown":"Consider refactoring your code to use dependency injection, so that you can avoid PowerMockito.","body":"Consider refactoring your code to use dependency injection, so that you can avoid PowerMockito."}],"answers":[{"tags":[],"owner":{"account_id":1233070,"reputation":9484,"user_id":1197251,"display_name":"dominicoder"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646181823,"creation_date":1646181823,"answer_id":71316226,"question_id":71315779,"body_markdown":"&gt; My issue is that processRequest() is not being mocked properly, because the source code version of the method is actually being run rather than the mock. When I step through each line of my unit test in debug mode, I always end up in the body of the makeHttpRequest() function.\r\n\r\nI think your question is wrong - `processRequest`, based on your example, is a method on `InterfaceOne` while `mock` is an instance of `InterfaceTwo`.\r\n\r\nI assume you meant:\r\n\r\n    InterfaceTwo.when(mock.makeHttpRequest()).thenReturn(&quot;zzzz&quot;);\r\n\r\nIn any case ...\r\n\r\n    What am I doing wrong?\r\n\r\nYou think you&#39;re mocking something when you&#39;re not at all. Let&#39;s break down your example:\r\n\r\n    // First you create an instance of InterfaceOneImpl - OK\r\n    InterfaceOne interfaceOneImpl = new InterfaceOneImpl();\r\n\r\n    // Next you create a mock of InterfaceTwo (I think? I don&#39;t use PowerMock) - OK\r\n    InterfaceTwo mock = PowerMockito.mock(InterfaceTwoImpl.class);\r\n\r\n    // Then you tell the mock you created that it should return &quot;zzzz&quot; - OK\r\n    InterfaceTwo.when(mock.processRequest()).thenReturn(&quot;zzzz&quot;);\r\n\r\n    // Finally you call a method on your instance. YOU DO NOT USE &quot;mock&quot; in\r\n    // any way shape or form. As it&#39;s defined, &quot;processRequest&quot; creates a NEW\r\n    // instance of InterfaceTwo: InterfaceTwo obj = new InterfaceTwoImpl();\r\n    // and uses THAT instance. So of course you will always end up with the\r\n    // real method being called. You&#39;re creating a mock and literally never\r\n    // using it.\r\n    String reqStr = interfaceOneImpl.processRequest();\r\n\r\nTo fix: actually use your mock. Either by passing it in the function:\r\n\r\n    // Pass the object to use as an argument\r\n    public String processRequest(InterfaceTwo obj){\r\n        ...\r\n        obj.makeHttpRequest();\r\n        ...\r\n    }\r\n\r\n    // And then your test:\r\n    @Test\r\n    public void testProcessRequest() {\r\n        InterfaceOne interfaceOneImpl = new InterfaceOneImpl();\r\n        InterfaceTwo mock = PowerMockito.mock(InterfaceTwoImpl.class);\r\n        InterfaceTwo.when(mock.processRequest()).thenReturn(&quot;zzzz&quot;);\r\n\r\n        // NOW you can use the mock\r\n        String reqStr = interfaceOneImpl.processRequest(mock);\r\n    }\r\n\r\nOr by passing it through to the class:\r\n\r\n    public class InterfaceOneImpl implements InterfaceOne {\r\n    \r\n    public InterfaceOneImpl(InterfaceTwo obj) {\r\n        this.obj = obj;\r\n    }\r\n\r\n    public String processRequest(...){\r\n            ...\r\n            obj.makeHttpRequest();\r\n            ...\r\n        }\r\n    }\r\n\r\n    // And then your test\r\n    @Test\r\n    public void testProcessRequest(){\r\n        InterfaceTwo mock = PowerMockito.mock(InterfaceTwoImpl.class);\r\n        InterfaceTwo.when(mock.processRequest()).thenReturn(&quot;zzzz&quot;);\r\n\r\n        // Now interface one will use the mock to do the request\r\n        InterfaceOne interfaceOneImpl = new InterfaceOneImpl(mock);\r\n        String reqStr = interfaceOneImpl.processRequest();\r\n        \r\n        //a bunch of failed assertions\r\n    }","title":"Mockito: Can&#39;t mock method called on object","body":"<blockquote>\n<p>My issue is that processRequest() is not being mocked properly, because the source code version of the method is actually being run rather than the mock. When I step through each line of my unit test in debug mode, I always end up in the body of the makeHttpRequest() function.</p>\n</blockquote>\n<p>I think your question is wrong - <code>processRequest</code>, based on your example, is a method on <code>InterfaceOne</code> while <code>mock</code> is an instance of <code>InterfaceTwo</code>.</p>\n<p>I assume you meant:</p>\n<pre><code>InterfaceTwo.when(mock.makeHttpRequest()).thenReturn(&quot;zzzz&quot;);\n</code></pre>\n<p>In any case ...</p>\n<pre><code>What am I doing wrong?\n</code></pre>\n<p>You think you're mocking something when you're not at all. Let's break down your example:</p>\n<pre><code>// First you create an instance of InterfaceOneImpl - OK\nInterfaceOne interfaceOneImpl = new InterfaceOneImpl();\n\n// Next you create a mock of InterfaceTwo (I think? I don't use PowerMock) - OK\nInterfaceTwo mock = PowerMockito.mock(InterfaceTwoImpl.class);\n\n// Then you tell the mock you created that it should return &quot;zzzz&quot; - OK\nInterfaceTwo.when(mock.processRequest()).thenReturn(&quot;zzzz&quot;);\n\n// Finally you call a method on your instance. YOU DO NOT USE &quot;mock&quot; in\n// any way shape or form. As it's defined, &quot;processRequest&quot; creates a NEW\n// instance of InterfaceTwo: InterfaceTwo obj = new InterfaceTwoImpl();\n// and uses THAT instance. So of course you will always end up with the\n// real method being called. You're creating a mock and literally never\n// using it.\nString reqStr = interfaceOneImpl.processRequest();\n</code></pre>\n<p>To fix: actually use your mock. Either by passing it in the function:</p>\n<pre><code>// Pass the object to use as an argument\npublic String processRequest(InterfaceTwo obj){\n    ...\n    obj.makeHttpRequest();\n    ...\n}\n\n// And then your test:\n@Test\npublic void testProcessRequest() {\n    InterfaceOne interfaceOneImpl = new InterfaceOneImpl();\n    InterfaceTwo mock = PowerMockito.mock(InterfaceTwoImpl.class);\n    InterfaceTwo.when(mock.processRequest()).thenReturn(&quot;zzzz&quot;);\n\n    // NOW you can use the mock\n    String reqStr = interfaceOneImpl.processRequest(mock);\n}\n</code></pre>\n<p>Or by passing it through to the class:</p>\n<pre><code>public class InterfaceOneImpl implements InterfaceOne {\n\npublic InterfaceOneImpl(InterfaceTwo obj) {\n    this.obj = obj;\n}\n\npublic String processRequest(...){\n        ...\n        obj.makeHttpRequest();\n        ...\n    }\n}\n\n// And then your test\n@Test\npublic void testProcessRequest(){\n    InterfaceTwo mock = PowerMockito.mock(InterfaceTwoImpl.class);\n    InterfaceTwo.when(mock.processRequest()).thenReturn(&quot;zzzz&quot;);\n\n    // Now interface one will use the mock to do the request\n    InterfaceOne interfaceOneImpl = new InterfaceOneImpl(mock);\n    String reqStr = interfaceOneImpl.processRequest();\n    \n    //a bunch of failed assertions\n}\n</code></pre>\n"}],"owner":{"account_id":21629803,"reputation":111,"user_id":15953563,"display_name":"dawg"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1365,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1646230670,"creation_date":1646177249,"question_id":71315779,"body_markdown":"I&#39;m not allowed to post real code, but this is basically what&#39;s going on:\r\n\r\n -  We have a class `InterfaceOneImpl` that implements an interface `InterfaceOne` and a `InterfaceTwoImpl` that implements an `InterfaceTwo`\r\n\r\n - `InterfaceTwoImpl` gets instantiated in `InterfaceOneImpl`, and `InterfaceTwoImpl.makeHttpRequest()` gets called, but I need to mock this function in my unit tests because I obviously don&#39;t want to make http requests in them. `makeHttpRequest` is a public, non-static function that returns a String\r\n\r\nMy code does something like this:\r\n````\r\npublic class InterfaceOneImpl implements InterfaceOne{\r\n    public String processRequest(...){\r\n        ...\r\n        InterfaceTwo obj = new InterfaceTwoImpl();\r\n        obj.makeHttpRequest();\r\n        ...\r\n    }\r\n}\r\n````\r\n\r\nMy test class looks like this:\r\n````\r\npublic TestInterfaceOneImpl {\r\n    ....\r\n    @Test\r\n    public void testProcessRequest(){\r\n        InterfaceOne interfaceOneImpl = new InterfaceOneImpl();\r\n        InterfaceTwo mock = PowerMockito.mock(InterfaceTwoImpl.class);\r\n        InterfaceTwo.when(mock.processRequest()).thenReturn(&quot;zzzz&quot;);\r\nPowerMockito.whenNew(RiskValidationRestClientImpl.class).withNoArguments().thenReturn((RiskValidationRestClientImpl) mock);\r\n        String reqStr = interfaceOneImpl.processRequest();\r\n        \r\n        //a bunch of failed assertions\r\n    }\r\n}\r\n````\r\nMy issue is that processRequest() is not being mocked properly, because the source code version of the method is actually being run rather than the mock. When I step through each line of my unit test in debug mode, I always end up in the body of the makeHttpRequest() function. What am I doing wrong?","title":"Mockito: Can&#39;t mock method called on object","body":"<p>I'm not allowed to post real code, but this is basically what's going on:</p>\n<ul>\n<li><p>We have a class <code>InterfaceOneImpl</code> that implements an interface <code>InterfaceOne</code> and a <code>InterfaceTwoImpl</code> that implements an <code>InterfaceTwo</code></p>\n</li>\n<li><p><code>InterfaceTwoImpl</code> gets instantiated in <code>InterfaceOneImpl</code>, and <code>InterfaceTwoImpl.makeHttpRequest()</code> gets called, but I need to mock this function in my unit tests because I obviously don't want to make http requests in them. <code>makeHttpRequest</code> is a public, non-static function that returns a String</p>\n</li>\n</ul>\n<p>My code does something like this:</p>\n<pre><code>public class InterfaceOneImpl implements InterfaceOne{\n    public String processRequest(...){\n        ...\n        InterfaceTwo obj = new InterfaceTwoImpl();\n        obj.makeHttpRequest();\n        ...\n    }\n}\n</code></pre>\n<p>My test class looks like this:</p>\n<pre><code>public TestInterfaceOneImpl {\n    ....\n    @Test\n    public void testProcessRequest(){\n        InterfaceOne interfaceOneImpl = new InterfaceOneImpl();\n        InterfaceTwo mock = PowerMockito.mock(InterfaceTwoImpl.class);\n        InterfaceTwo.when(mock.processRequest()).thenReturn(&quot;zzzz&quot;);\nPowerMockito.whenNew(RiskValidationRestClientImpl.class).withNoArguments().thenReturn((RiskValidationRestClientImpl) mock);\n        String reqStr = interfaceOneImpl.processRequest();\n        \n        //a bunch of failed assertions\n    }\n}\n</code></pre>\n<p>My issue is that processRequest() is not being mocked properly, because the source code version of the method is actually being run rather than the mock. When I step through each line of my unit test in debug mode, I always end up in the body of the makeHttpRequest() function. What am I doing wrong?</p>\n"},{"tags":["java","spring","spring-mvc","jsr"],"answers":[{"tags":[],"owner":{"account_id":252480,"reputation":7492,"user_id":530549,"display_name":"Ritesh"},"down_vote_count":0,"up_vote_count":185,"is_accepted":true,"score":185,"last_activity_date":1583063994,"creation_date":1298901852,"answer_id":5142960,"question_id":5142065,"body_markdown":"You need to decorate `addresses` member of `UserAddressesForm` with `@Valid` annotation. See section 3.1.3 and 3.5.1 of [JSR 303: Bean Validation][1]. As I explained in my answer to the question [Is there a standard way to enable JSR 303 Bean Validation using annotated method][2], this is the real use of `@Valid` annotation as per JSR 303.\r\n\r\n**Edit**\r\nExample code: [Hibernate Validator- Object Graph][3]. (The list of passengers in Car)\r\n\r\n**Edit** From [Hibernate Validator 6][4] Reference doc:\r\n\r\n&gt; In versions prior to 6, Hibernate Validator supported cascaded validation for a subset of container elements and it was implemented at the container level (e.g. you would use `@Valid private List&lt;Person&gt;` to enable cascaded validation for `Person`).\r\n&gt; \r\n&gt; This is still supported but is not recommended. Please use container\r\n&gt; element level `@Valid` annotations instead as it is more expressive.\r\n\r\nExample:\r\n\r\n    public class Car {\r\n        \r\n            private List&lt;@NotNull @Valid Person&gt; passengers = new ArrayList&lt;Person&gt;();\r\n       \r\n            private Map&lt;@Valid Part, List&lt;@Valid Manufacturer&gt;&gt; partManufacturers = new HashMap&lt;&gt;();\r\n       \r\n           //...\r\n       }\r\n\r\nAlso see what&#39;s new in [Bean Validation 2.0/Jakarta Bean Validation][5].\r\n\r\n\r\n  [1]: http://beanvalidation.org/1.0/spec/#constraintdeclarationvalidationprocess\r\n  [2]: https://stackoverflow.com/questions/4900077/is-there-a-standard-way-to-enable-jsr-303-bean-validation-using-annotated-method\r\n  [3]: http://docs.jboss.org/hibernate/validator/4.1/reference/en-US/html/validator-usingvalidator.html#d0e410\r\n  [4]: https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/?v=6.1#section-object-graph-validation\r\n  [5]: https://beanvalidation.org/2.0/spec/#whatsnew-20","title":"@Valid annotation is not validating the list of child objects","body":"<p>You need to decorate <code>addresses</code> member of <code>UserAddressesForm</code> with <code>@Valid</code> annotation. See section 3.1.3 and 3.5.1 of <a href=\"http://beanvalidation.org/1.0/spec/#constraintdeclarationvalidationprocess\" rel=\"noreferrer\">JSR 303: Bean Validation</a>. As I explained in my answer to the question <a href=\"https://stackoverflow.com/questions/4900077/is-there-a-standard-way-to-enable-jsr-303-bean-validation-using-annotated-method\">Is there a standard way to enable JSR 303 Bean Validation using annotated method</a>, this is the real use of <code>@Valid</code> annotation as per JSR 303.</p>\n\n<p><strong>Edit</strong>\nExample code: <a href=\"http://docs.jboss.org/hibernate/validator/4.1/reference/en-US/html/validator-usingvalidator.html#d0e410\" rel=\"noreferrer\">Hibernate Validator- Object Graph</a>. (The list of passengers in Car)</p>\n\n<p><strong>Edit</strong> From <a href=\"https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/?v=6.1#section-object-graph-validation\" rel=\"noreferrer\">Hibernate Validator 6</a> Reference doc:</p>\n\n<blockquote>\n  <p>In versions prior to 6, Hibernate Validator supported cascaded validation for a subset of container elements and it was implemented at the container level (e.g. you would use <code>@Valid private List&lt;Person&gt;</code> to enable cascaded validation for <code>Person</code>).</p>\n  \n  <p>This is still supported but is not recommended. Please use container\n  element level <code>@Valid</code> annotations instead as it is more expressive.</p>\n</blockquote>\n\n<p>Example:</p>\n\n<pre><code>public class Car {\n\n        private List&lt;@NotNull @Valid Person&gt; passengers = new ArrayList&lt;Person&gt;();\n\n        private Map&lt;@Valid Part, List&lt;@Valid Manufacturer&gt;&gt; partManufacturers = new HashMap&lt;&gt;();\n\n       //...\n   }\n</code></pre>\n\n<p>Also see what's new in <a href=\"https://beanvalidation.org/2.0/spec/#whatsnew-20\" rel=\"noreferrer\">Bean Validation 2.0/Jakarta Bean Validation</a>.</p>\n"},{"tags":[],"owner":{"account_id":3750645,"reputation":28034,"user_id":3118209,"accept_rate":93,"display_name":"Arpit Aggarwal"},"down_vote_count":0,"up_vote_count":32,"is_accepted":false,"score":32,"last_activity_date":1475682773,"creation_date":1475682773,"answer_id":39878618,"question_id":5142065,"body_markdown":"Adding to @Ritesh answer, `@Valid` constraint will instruct the Bean Validator to delve to the type of its applied property and validate all constraints found there. Answer with code to your question, the validator, when seeing a `@Valid` constraint on `addresses` property, will explore the `AddressForm` class and validate all `JSR 303` constraints found inside, as follows:\r\n\r\n    public class UserAddressesForm {\r\n    \r\n        @NotEmpty\r\n        private String firstName;\r\n    \r\n        @NotEmpty\r\n        private String lastName;\r\n    \r\n        @Valid\r\n        private List&lt;AddressForm&gt; addresses;\r\n    \r\n    ...\r\n    setters and getters \r\n    \r\n    public class AddressForm {\r\n    \r\n        @NotEmpty\r\n        private String customName;\r\n        @NotEmpty\r\n        private String city;\r\n        @NotEmpty\r\n        private String streetAn;\r\n        @NotEmpty\r\n        private String streetHn;\r\n        @NotEmpty\r\n        private String addressCountry;\r\n        @NotEmpty\r\n        private String postCode;\r\n    ...\r\n    setters and getters\r\n\r\n\r\n","title":"@Valid annotation is not validating the list of child objects","body":"<p>Adding to @Ritesh answer, <code>@Valid</code> constraint will instruct the Bean Validator to delve to the type of its applied property and validate all constraints found there. Answer with code to your question, the validator, when seeing a <code>@Valid</code> constraint on <code>addresses</code> property, will explore the <code>AddressForm</code> class and validate all <code>JSR 303</code> constraints found inside, as follows:</p>\n\n<pre><code>public class UserAddressesForm {\n\n    @NotEmpty\n    private String firstName;\n\n    @NotEmpty\n    private String lastName;\n\n    @Valid\n    private List&lt;AddressForm&gt; addresses;\n\n...\nsetters and getters \n\npublic class AddressForm {\n\n    @NotEmpty\n    private String customName;\n    @NotEmpty\n    private String city;\n    @NotEmpty\n    private String streetAn;\n    @NotEmpty\n    private String streetHn;\n    @NotEmpty\n    private String addressCountry;\n    @NotEmpty\n    private String postCode;\n...\nsetters and getters\n</code></pre>\n"},{"tags":[],"owner":{"account_id":965131,"reputation":585,"user_id":988689,"accept_rate":50,"display_name":"Tapan Banker"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1550354380,"creation_date":1550354380,"answer_id":54728081,"question_id":5142065,"body_markdown":"In the  class UserAddressesForm add the following lines\r\n```\r\n@Valid\r\nprivate List&lt;AddressForm&gt; addresses;\r\n``` ","title":"@Valid annotation is not validating the list of child objects","body":"<p>In the  class UserAddressesForm add the following lines</p>\n\n<pre><code>@Valid\nprivate List&lt;AddressForm&gt; addresses;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7471795,"reputation":1830,"user_id":5679543,"display_name":"Waqas Ahmed"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1556311324,"creation_date":1556311324,"answer_id":55874688,"question_id":5142065,"body_markdown":"Working solution.    \r\n\r\n    public class UserAddressesForm {\r\n    \r\n        @NotEmpty(message=&quot;firstName is required&quot;)\r\n        private String firstName;\r\n    \r\n        @NotEmpty(message=&quot;lastNameis required&quot;)\r\n        private String lastName;\r\n    \r\n        @NotNull(message=&quot;addresses attributes are required&quot;)\r\n        @Valid\r\n        private List&lt;AddressForm&gt; addresses;\r\n    \r\n    ...\r\n    setters and getters \r\n    \r\n    public class AddressForm {\r\n    \r\n        @NotEmpty(message=&quot;customNameis required&quot;)\r\n        private String customName;\r\n        @NotEmpty\r\n        private String city;\r\n        @NotEmpty\r\n        private String streetAn;\r\n        @NotEmpty\r\n        private String streetHn;\r\n        @NotEmpty\r\n        private String addressCountry;\r\n        @NotEmpty\r\n        private String postCode;\r\n    ...\r\n    setters and getters","title":"@Valid annotation is not validating the list of child objects","body":"<p>Working solution.    </p>\n\n<pre><code>public class UserAddressesForm {\n\n    @NotEmpty(message=\"firstName is required\")\n    private String firstName;\n\n    @NotEmpty(message=\"lastNameis required\")\n    private String lastName;\n\n    @NotNull(message=\"addresses attributes are required\")\n    @Valid\n    private List&lt;AddressForm&gt; addresses;\n\n...\nsetters and getters \n\npublic class AddressForm {\n\n    @NotEmpty(message=\"customNameis required\")\n    private String customName;\n    @NotEmpty\n    private String city;\n    @NotEmpty\n    private String streetAn;\n    @NotEmpty\n    private String streetHn;\n    @NotEmpty\n    private String addressCountry;\n    @NotEmpty\n    private String postCode;\n...\nsetters and getters\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8292791,"reputation":1,"user_id":6233851,"display_name":"Singla Deepanshu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637790495,"creation_date":1637781622,"answer_id":70101803,"question_id":5142065,"body_markdown":"I implemented all the suggestions and annotated child field in the parent class with with `@Valid` but still the child entities were not getting validated.\r\n\r\nLuckily it is resolved now and the issue was because of the dependency. \r\nAs a solution I used below dependency \r\n```xml\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\r\n&lt;/dependency&gt;\r\n```\r\ninstead of \r\n```xml\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;javax.validation&lt;/groupId&gt;\r\n    &lt;artifactId&gt;validation-api&lt;/artifactId&gt;\r\n&lt;/dependency&gt;\r\n```","title":"@Valid annotation is not validating the list of child objects","body":"<p>I implemented all the suggestions and annotated child field in the parent class with with <code>@Valid</code> but still the child entities were not getting validated.</p>\n<p>Luckily it is resolved now and the issue was because of the dependency.\nAs a solution I used below dependency</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>instead of</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;javax.validation&lt;/groupId&gt;\n    &lt;artifactId&gt;validation-api&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17147194,"reputation":29,"user_id":12409927,"display_name":"Nodi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646229972,"creation_date":1646229972,"answer_id":71324065,"question_id":5142065,"body_markdown":"For me, it was `@NotNull`, in the child, and not a `@NotEmpty` annotation. I had to put a `@NotNull` before the `@Valid` annontation to make it work.\r\n\r\n**like this:**\r\n\r\n    private List&lt;@NotNull @Valid YourObject&gt; yourObjects;\r\n\r\n","title":"@Valid annotation is not validating the list of child objects","body":"<p>For me, it was <code>@NotNull</code>, in the child, and not a <code>@NotEmpty</code> annotation. I had to put a <code>@NotNull</code> before the <code>@Valid</code> annontation to make it work.</p>\n<p><strong>like this:</strong></p>\n<pre><code>private List&lt;@NotNull @Valid YourObject&gt; yourObjects;\n</code></pre>\n"}],"owner":{"account_id":303781,"reputation":3824,"user_id":612925,"accept_rate":67,"display_name":"tomasz-mer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":72838,"favorite_count":0,"down_vote_count":0,"up_vote_count":113,"accepted_answer_id":5142960,"answer_count":6,"score":113,"last_activity_date":1646229972,"creation_date":1298896564,"question_id":5142065,"body_markdown":"Main model classes are as follows :\r\n\r\n    public class UserAddressesForm {\r\n    \r\n    \t@NotEmpty\r\n    \tprivate String firstName;\r\n    \r\n    \t@NotEmpty\r\n    \tprivate String lastName;\r\n    \r\n    \tprivate List&lt;AddressForm&gt; addresses;\r\n    \r\n        // setters and getters \r\n    \r\n    }\r\n\r\n\r\n---    \r\n    \r\n    public class AddressForm {\r\n    \t\r\n    \t@NotEmpty\r\n    \tprivate String customName;\r\n    \t@NotEmpty\r\n    \tprivate String city;\r\n    \t@NotEmpty\r\n    \tprivate String streetAn;\r\n    \t@NotEmpty\r\n    \tprivate String streetHn;\r\n    \t@NotEmpty\r\n    \tprivate String addressCountry;\r\n    \t@NotEmpty\r\n    \tprivate String postCode;\r\n        \r\n        // setters and getters\r\n    }\r\n\r\n\r\nAn endpoint in one of my controllers :\r\n\r\n    @RequestMapping(value = &quot;/up&quot;, method = RequestMethod.POST)\r\n    public String completeForm(@Valid @ModelAttribute(&quot;userAddressesForm&quot;) UserAddressesForm userAddressesForm,  \r\n    \t\t\tBindingResult result, HttpServletRequest req) {\r\n\r\n     // logic here \r\n\r\n    }\r\n\r\n\r\nA `.jsp` page :\r\n\r\n    &lt;form:form commandName=&quot;userAddressesForm&quot; action=&quot;registered&quot;&gt;\r\n    \t&lt;table&gt;\r\n    \r\n    \t\t&lt;tr&gt;\r\n    \t\t\t&lt;td class=&quot;formLabels&quot;&gt;&lt;form:label path=&quot;firstName&quot;&gt;\r\n    \t\t\t\t&lt;spring:message code=&quot;label.name&quot; /&gt;\r\n    \t\t\t&lt;/form:label&gt;&lt;/td&gt;\r\n    \t\t\t&lt;td&gt;&lt;form:input path=&quot;firstName&quot; /&gt;&lt;/td&gt;\r\n    \t\t\t&lt;td&gt;&lt;form:errors path=&quot;firstName&quot; cssClass=&quot;error&quot; /&gt;&lt;/td&gt;\r\n    \t\t&lt;/tr&gt;\r\n    \t\t&lt;tr&gt;\r\n    \t\t\t&lt;td class=&quot;formLabels&quot;&gt;&lt;form:label path=&quot;lastName&quot;&gt;\r\n    \t\t\t\t&lt;spring:message code=&quot;label.surname&quot; /&gt;\r\n    \t\t\t&lt;/form:label&gt;&lt;/td&gt;\r\n    \t\t\t&lt;td&gt;&lt;form:input path=&quot;lastName&quot; /&gt;&lt;/td&gt;\r\n    \t\t\t&lt;td&gt;&lt;form:errors path=&quot;lastName&quot; cssClass=&quot;error&quot; /&gt;&lt;/td&gt;\r\n    \t\t&lt;/tr&gt;\r\n    \t&lt;/table&gt;\r\n    \t\r\n    \t&lt;c:forEach items=&quot;${userAddressesForm.addresses}&quot; varStatus=&quot;gridRow&quot;&gt;\t\r\n    \t\t&lt;div id=&quot;main_address&quot; class=&quot;address_data_form&quot;&gt;\r\n    \t\t\t&lt;fieldset&gt;\r\n    \t\t\t\t&lt;legend&gt;&lt;spring:message code=&quot;label.stepThreeMainAddressInfo&quot; /&gt;&lt;/legend&gt;\r\n    \t\t\t\t&lt;a href=&quot;#&quot; class=&quot;deleteItem&quot;&gt;&lt;/a&gt;\r\n    \t\t\t\t&lt;table&gt;\r\n    \t\t\t\t\t&lt;tr&gt;\t\t\t\r\n    \t\t\t\t\t\t&lt;td class=&quot;formLabels&quot;&gt;\r\n    \t\t\t\t\t\t\t&lt;spring:message code=&quot;label.address.custom.name&quot; /&gt;\r\n    \t\t\t\t\t\t&lt;/td&gt;\r\n    \t\t\t\t\t\t&lt;td&gt;\r\n    \t\t\t\t\t\t\t&lt;spring:bind path=&quot;addresses[${gridRow.index}].customName&quot;&gt;\r\n    \t\t\t\t\t\t\t\t&lt;input type=&quot;input&quot; name=&quot;&lt;c:out value=&quot;${status.expression}&quot;/&gt;&quot;\r\n    \t\t\t\t\t\t\t\t\tid=&quot;&lt;c:out value=&quot;${status.expression}&quot;/&gt;&quot;\r\n    \t\t\t\t\t\t\t\t\tvalue=&quot;&lt;c:out value=&quot;${status.value}&quot;/&gt;&quot; /&gt;\r\n    \t\t\t\t\t\t\t\t\t&lt;form:errors path=&quot;${status.expression}&quot;/&gt;\r\n    \t\t\t\t\t\t\t&lt;/spring:bind&gt;\r\n    \t\t\t\t\t\t&lt;/td&gt;\t\r\n    \t\t\t\t\t&lt;/tr&gt;\t\t\t\t\r\n    \t\t\t\t\t&lt;tr&gt;\t\t\t\r\n    \t\t\t\t\t\t&lt;td class=&quot;formLabels&quot;&gt;\r\n    \t\t\t\t\t\t\t&lt;spring:message code=&quot;label.streetAnStreetHn&quot; /&gt;\r\n    \t\t\t\t\t\t&lt;/td&gt;\r\n    \t\t\t\t\t\t&lt;td&gt;\r\n    \t\t\t\t\t\t\t&lt;spring:bind path=&quot;addresses[${gridRow.index}].streetAn&quot;&gt;\r\n    \t\t\t\t\t\t\t\t&lt;input type=&quot;input&quot; name=&quot;&lt;c:out value=&quot;${status.expression}&quot;/&gt;&quot;\r\n    \t\t\t\t\t\t\t\t\tid=&quot;&lt;c:out value=&quot;${status.expression}&quot;/&gt;&quot;\r\n    \t\t\t\t\t\t\t\t\tvalue=&quot;&lt;c:out value=&quot;${status.value}&quot;/&gt;&quot; /&gt;\r\n    \t\t\t\t\t\t\t&lt;/spring:bind&gt;\r\n    \t\t\t\t\t\t\t&lt;spring:bind path=&quot;addresses[${gridRow.index}].streetHn&quot;&gt;\r\n    \t\t\t\t\t\t\t&lt;input type=&quot;input&quot; name=&quot;&lt;c:out value=&quot;${status.expression}&quot;/&gt;&quot;\r\n    \t\t\t\t\t\t\t\tid=&quot;&lt;c:out value=&quot;${status.expression}&quot;/&gt;&quot;\r\n    \t\t\t\t\t\t\t\tvalue=&quot;&lt;c:out value=&quot;${status.value}&quot;/&gt;&quot; &gt;\r\n    \t\t\t\t\t\t\t&lt;form:errors path=&quot;addresses[${gridRow.index}].streetHn&quot;/&gt;\r\n    \t\t\t\t\t\t\t&lt;/spring:bind&gt;\r\n    \t\t\t\t\t\t\t\r\n    \t\t\t\t\t\t&lt;/td&gt;\r\n    \t\t\t\t\t&lt;/tr&gt;\r\n    \t\t\t\t\t&lt;tr&gt;\t\t\t\t\t\t\r\n    \t\t\t\t\t\t&lt;td class=&quot;formLabels&quot;&gt;\r\n    \t\t\t\t\t\t\t&lt;spring:message code=&quot;label.postCode&quot; /&gt;\r\n    \t\t\t\t\t\t&lt;/td&gt;\r\n    \t\t\t\t\t\t&lt;td&gt;\r\n    \t\t\t\t\t\t\t&lt;spring:bind path=&quot;addresses[${gridRow.index}].postCode&quot;&gt;\r\n    \t\t\t\t\t\t\t\t&lt;input type=&quot;input&quot; name=&quot;&lt;c:out value=&quot;${status.expression}&quot;/&gt;&quot;\r\n    \t\t\t\t\t\t\t\t\tid=&quot;&lt;c:out value=&quot;${status.expression}&quot;/&gt;&quot;\r\n    \t\t\t\t\t\t\t\t\tvalue=&quot;&lt;c:out value=&quot;${status.value}&quot;/&gt;&quot; /&gt;\r\n    \t\t\t\t\t\t\t&lt;/spring:bind&gt;\r\n    \t\t\t\t\t\t&lt;/td&gt;\t\t\t\t\t\r\n    \t\t\t\t\t&lt;/tr&gt;\r\n    \t\t\t\t\t&lt;tr&gt;\t\t\t\t\r\n    \t\t\t\t\t\t&lt;td class=&quot;formLabels&quot;&gt;\r\n    \t\t\t\t\t\t\t&lt;spring:message code=&quot;label.city&quot; /&gt;\r\n    \t\t\t\t\t\t&lt;/td&gt;\r\n    \t\t\t\t\t\t&lt;td&gt;\r\n    \t\t\t\t\t\t\t&lt;spring:bind path=&quot;addresses[${gridRow.index}].city&quot;&gt;\r\n    \t\t\t\t\t\t\t\t&lt;input type=&quot;input&quot; name=&quot;&lt;c:out value=&quot;${status.expression}&quot;/&gt;&quot;\r\n    \t\t\t\t\t\t\t\t\tid=&quot;&lt;c:out value=&quot;${status.expression}&quot;/&gt;&quot;\r\n    \t\t\t\t\t\t\t\t\tvalue=&quot;&lt;c:out value=&quot;${status.value}&quot;/&gt;&quot; /&gt;\r\n    \t\t\t\t\t\t\t\t&lt;form:errors path=&quot;addresses[${gridRow.index}].city&quot; cssClass=&quot;error&quot; /&gt;\r\n    \t\t\t\t\t\t\t&lt;/spring:bind&gt;\r\n    \t\t\t\t\t\t&lt;/td&gt;\r\n    \t\t\t\t\t&lt;/tr&gt;\t\t\r\n    \t\t\t\t&lt;/table&gt;\t\r\n    \t\t\t&lt;/fieldset&gt;\r\n    \t\t&lt;/div&gt;\r\n    \t&lt;/c:forEach&gt;\r\n\r\n\r\nWhy `@Valid` is not validating the `List&lt;AddressForm&gt; addresses` present in `UserAddressesForm` class ?","title":"@Valid annotation is not validating the list of child objects","body":"<p>Main model classes are as follows :</p>\n<pre><code>public class UserAddressesForm {\n\n    @NotEmpty\n    private String firstName;\n\n    @NotEmpty\n    private String lastName;\n\n    private List&lt;AddressForm&gt; addresses;\n\n    // setters and getters \n\n}\n</code></pre>\n<hr />\n<pre><code>public class AddressForm {\n    \n    @NotEmpty\n    private String customName;\n    @NotEmpty\n    private String city;\n    @NotEmpty\n    private String streetAn;\n    @NotEmpty\n    private String streetHn;\n    @NotEmpty\n    private String addressCountry;\n    @NotEmpty\n    private String postCode;\n    \n    // setters and getters\n}\n</code></pre>\n<p>An endpoint in one of my controllers :</p>\n<pre><code>@RequestMapping(value = &quot;/up&quot;, method = RequestMethod.POST)\npublic String completeForm(@Valid @ModelAttribute(&quot;userAddressesForm&quot;) UserAddressesForm userAddressesForm,  \n            BindingResult result, HttpServletRequest req) {\n\n // logic here \n\n}\n</code></pre>\n<p>A <code>.jsp</code> page :</p>\n<pre><code>&lt;form:form commandName=&quot;userAddressesForm&quot; action=&quot;registered&quot;&gt;\n    &lt;table&gt;\n\n        &lt;tr&gt;\n            &lt;td class=&quot;formLabels&quot;&gt;&lt;form:label path=&quot;firstName&quot;&gt;\n                &lt;spring:message code=&quot;label.name&quot; /&gt;\n            &lt;/form:label&gt;&lt;/td&gt;\n            &lt;td&gt;&lt;form:input path=&quot;firstName&quot; /&gt;&lt;/td&gt;\n            &lt;td&gt;&lt;form:errors path=&quot;firstName&quot; cssClass=&quot;error&quot; /&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n            &lt;td class=&quot;formLabels&quot;&gt;&lt;form:label path=&quot;lastName&quot;&gt;\n                &lt;spring:message code=&quot;label.surname&quot; /&gt;\n            &lt;/form:label&gt;&lt;/td&gt;\n            &lt;td&gt;&lt;form:input path=&quot;lastName&quot; /&gt;&lt;/td&gt;\n            &lt;td&gt;&lt;form:errors path=&quot;lastName&quot; cssClass=&quot;error&quot; /&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n    &lt;/table&gt;\n    \n    &lt;c:forEach items=&quot;${userAddressesForm.addresses}&quot; varStatus=&quot;gridRow&quot;&gt;  \n        &lt;div id=&quot;main_address&quot; class=&quot;address_data_form&quot;&gt;\n            &lt;fieldset&gt;\n                &lt;legend&gt;&lt;spring:message code=&quot;label.stepThreeMainAddressInfo&quot; /&gt;&lt;/legend&gt;\n                &lt;a href=&quot;#&quot; class=&quot;deleteItem&quot;&gt;&lt;/a&gt;\n                &lt;table&gt;\n                    &lt;tr&gt;            \n                        &lt;td class=&quot;formLabels&quot;&gt;\n                            &lt;spring:message code=&quot;label.address.custom.name&quot; /&gt;\n                        &lt;/td&gt;\n                        &lt;td&gt;\n                            &lt;spring:bind path=&quot;addresses[${gridRow.index}].customName&quot;&gt;\n                                &lt;input type=&quot;input&quot; name=&quot;&lt;c:out value=&quot;${status.expression}&quot;/&gt;&quot;\n                                    id=&quot;&lt;c:out value=&quot;${status.expression}&quot;/&gt;&quot;\n                                    value=&quot;&lt;c:out value=&quot;${status.value}&quot;/&gt;&quot; /&gt;\n                                    &lt;form:errors path=&quot;${status.expression}&quot;/&gt;\n                            &lt;/spring:bind&gt;\n                        &lt;/td&gt;   \n                    &lt;/tr&gt;               \n                    &lt;tr&gt;            \n                        &lt;td class=&quot;formLabels&quot;&gt;\n                            &lt;spring:message code=&quot;label.streetAnStreetHn&quot; /&gt;\n                        &lt;/td&gt;\n                        &lt;td&gt;\n                            &lt;spring:bind path=&quot;addresses[${gridRow.index}].streetAn&quot;&gt;\n                                &lt;input type=&quot;input&quot; name=&quot;&lt;c:out value=&quot;${status.expression}&quot;/&gt;&quot;\n                                    id=&quot;&lt;c:out value=&quot;${status.expression}&quot;/&gt;&quot;\n                                    value=&quot;&lt;c:out value=&quot;${status.value}&quot;/&gt;&quot; /&gt;\n                            &lt;/spring:bind&gt;\n                            &lt;spring:bind path=&quot;addresses[${gridRow.index}].streetHn&quot;&gt;\n                            &lt;input type=&quot;input&quot; name=&quot;&lt;c:out value=&quot;${status.expression}&quot;/&gt;&quot;\n                                id=&quot;&lt;c:out value=&quot;${status.expression}&quot;/&gt;&quot;\n                                value=&quot;&lt;c:out value=&quot;${status.value}&quot;/&gt;&quot; &gt;\n                            &lt;form:errors path=&quot;addresses[${gridRow.index}].streetHn&quot;/&gt;\n                            &lt;/spring:bind&gt;\n                            \n                        &lt;/td&gt;\n                    &lt;/tr&gt;\n                    &lt;tr&gt;                        \n                        &lt;td class=&quot;formLabels&quot;&gt;\n                            &lt;spring:message code=&quot;label.postCode&quot; /&gt;\n                        &lt;/td&gt;\n                        &lt;td&gt;\n                            &lt;spring:bind path=&quot;addresses[${gridRow.index}].postCode&quot;&gt;\n                                &lt;input type=&quot;input&quot; name=&quot;&lt;c:out value=&quot;${status.expression}&quot;/&gt;&quot;\n                                    id=&quot;&lt;c:out value=&quot;${status.expression}&quot;/&gt;&quot;\n                                    value=&quot;&lt;c:out value=&quot;${status.value}&quot;/&gt;&quot; /&gt;\n                            &lt;/spring:bind&gt;\n                        &lt;/td&gt;                   \n                    &lt;/tr&gt;\n                    &lt;tr&gt;                \n                        &lt;td class=&quot;formLabels&quot;&gt;\n                            &lt;spring:message code=&quot;label.city&quot; /&gt;\n                        &lt;/td&gt;\n                        &lt;td&gt;\n                            &lt;spring:bind path=&quot;addresses[${gridRow.index}].city&quot;&gt;\n                                &lt;input type=&quot;input&quot; name=&quot;&lt;c:out value=&quot;${status.expression}&quot;/&gt;&quot;\n                                    id=&quot;&lt;c:out value=&quot;${status.expression}&quot;/&gt;&quot;\n                                    value=&quot;&lt;c:out value=&quot;${status.value}&quot;/&gt;&quot; /&gt;\n                                &lt;form:errors path=&quot;addresses[${gridRow.index}].city&quot; cssClass=&quot;error&quot; /&gt;\n                            &lt;/spring:bind&gt;\n                        &lt;/td&gt;\n                    &lt;/tr&gt;       \n                &lt;/table&gt;    \n            &lt;/fieldset&gt;\n        &lt;/div&gt;\n    &lt;/c:forEach&gt;\n</code></pre>\n<p>Why <code>@Valid</code> is not validating the <code>List&lt;AddressForm&gt; addresses</code> present in <code>UserAddressesForm</code> class ?</p>\n"},{"tags":["java","switch-statement","refactoring"],"comments":[{"owner":{"account_id":1937019,"reputation":4428,"user_id":1744230,"accept_rate":100,"display_name":"QBrute"},"score":8,"creation_date":1646229427,"post_id":71323924,"comment_id":126071122,"body_markdown":"Well the obvious first solution would be to extract the contents of each `case` into separate methods.","body":"Well the obvious first solution would be to extract the contents of each <code>case</code> into separate methods."},{"owner":{"account_id":1134419,"reputation":1,"user_id":1119791,"display_name":"mathyas"},"score":1,"creation_date":1646229546,"post_id":71323924,"comment_id":126071176,"body_markdown":"check this: https://stackoverflow.com/questions/31676586/java-switch-case-menu-scanner. Regards!","body":"check this: <a href=\"https://stackoverflow.com/questions/31676586/java-switch-case-menu-scanner\" title=\"java switch case menu scanner\">stackoverflow.com/questions/31676586/&hellip;</a>. Regards!"},{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":1,"creation_date":1646229955,"post_id":71323924,"comment_id":126071344,"body_markdown":"A further refactoring would be to create a class to represent a menu option (with its title and &quot;body&quot;); then you could programmatically print the list, and then execute the right item, rather than having to remember to get the numbers to match up.","body":"A further refactoring would be to create a class to represent a menu option (with its title and &quot;body&quot;); then you could programmatically print the list, and then execute the right item, rather than having to remember to get the numbers to match up."},{"owner":{"account_id":17724803,"reputation":73,"user_id":12868854,"display_name":"Dio Brando"},"score":0,"creation_date":1646269614,"post_id":71323924,"comment_id":126084259,"body_markdown":"Ah yes, so I decided to create class that contain method which represent all of my switch case statement and It works just fine, thanks","body":"Ah yes, so I decided to create class that contain method which represent all of my switch case statement and It works just fine, thanks"}],"owner":{"account_id":17724803,"reputation":73,"user_id":12868854,"display_name":"Dio Brando"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":121,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1646229345,"creation_date":1646229345,"question_id":71323924,"body_markdown":"So my code literally working just fine, but I want to refactor my massive main file so it can be maintained. As you can see on my code, it&#39;s contain a bunch of expression on the switch statement and it looks a bit mess for me. How to refactor the switch statement ? Should I use interface or abstract class or something like that to simplify it ? Any insight would be helpful, TIA.\r\n\r\n```\r\nstatic void tampilMenu(ArrayList&lt;Person&gt; p) {\r\n        boolean quit = false;\r\n        do {\r\n            System.out.println(&quot;==== Pilih Menu ====&quot;);\r\n            System.out.println(&quot;1.Buat Objek Person!&quot;);\r\n            System.out.println(&quot;2.Buat Akun Bank pada Objek Person!&quot;);\r\n            System.out.println(&quot;3.Lihat daftar rekening dari objek Person!&quot;);\r\n            System.out.println(&quot;4.Setor Uang ke Rekening dari objek Person&quot;);\r\n            System.out.println(&quot;5.Tarik Uang dari Rekening objek Person&quot;);\r\n            System.out.println(&quot;6.Transfer Uang!&quot;);\r\n            System.out.println(&quot;7.Tampilkan daftar Objek Person!&quot;);\r\n            System.out.println(&quot;=======================&quot;);\r\n\r\n            Scanner in = new Scanner(System.in);\r\n            System.out.println(&quot;Pilih Menu no : &quot;);\r\n            String menu = in.nextLine();\r\n\r\n            switch (menu) {\r\n                // buat objek person baru\r\n                case &quot;1&quot; -&gt; {\r\n                    try {\r\n                        String nama;\r\n                        int umur;\r\n                        do {\r\n                            System.out.println(&quot;Nama objek Person : (tidak boleh blank) &quot;);\r\n                            nama = in.nextLine();\r\n                            nama = nama.replaceAll(&quot;\\\\s&quot;, &quot;&quot;);\r\n                        } while (nama.equals(&quot;&quot;));\r\n                        System.out.println(&quot;Umur : &quot;);\r\n                        umur = in.nextInt();\r\n                        p.add(new Person(nama, umur));\r\n                    } catch (Exception e) {\r\n                        System.out.println(&quot;Terjadi kesalahan input!&quot;);\r\n                    }\r\n                }\r\n                // buka akun bank dari objek person yang ada\r\n                case &quot;2&quot; -&gt; {\r\n                    try {\r\n                        // list objek person yang ada\r\n                        for (int i = 0; i &lt; p.size(); i++) {\r\n                            System.out.println(String.format(&quot;%d. [nama: %s]&quot;, i + 1, p.get(i).getNama()));\r\n                        }\r\n                        System.out.println(&quot;Pilih [No.Urut] objek person yang akan dibuat akun bank ? contoh: 1&quot;);\r\n                        int i = Integer.parseInt(in.nextLine());\r\n                        System.out.println(&quot;Ketik Nama Bank : (contoh: BRI / BCA / BSI / BNI /...)&quot;);\r\n                        String namaBank = in.nextLine();\r\n                        System.out.println(&quot;Ketik Kode Bank 3 digit angka: (contoh: 002 / 003 / 005 / 006 /...)&quot;);\r\n                        String kdBank = in.nextLine();\r\n                        System.out.println(&quot;Masukkan jumlah setoran awal Rp. : (tanpa pemisah ribuan,contoh: 100000)&quot;);\r\n                        Double setorAwal = in.nextDouble();\r\n                        p.get(i - 1).bukaAkunBank(namaBank, kdBank, setorAwal);\r\n                    } catch (Exception e) {\r\n                        System.out.println(&quot;Terjadi kesalahan input atau belum ada objek Person yang dibuat!&quot;);\r\n                    }\r\n\r\n                }\r\n                // lihat daftar rekening dari objek person yang ada\r\n                case &quot;3&quot; -&gt; {\r\n                    try {\r\n                        // list objek person yang ada\r\n                        for (int i = 0; i &lt; p.size(); i++) {\r\n                            System.out.println(String.format(&quot;%d. [nama: %s]&quot;, i + 1, p.get(i).getNama()));\r\n                        }\r\n                        System.out.println(\r\n                                &quot;Pilih [No.Urut] objek person yg ingin dilihat daftar rekeningnya ? contoh: 1&quot;);\r\n                        int i = Integer.parseInt(in.nextLine());\r\n                        // tampilkan list rekening bank dari objek person terpilih\r\n                        p.get(i - 1).tampilListRekeningBank();\r\n                    } catch (Exception e) {\r\n                        System.out.println(&quot;Terjadi kesalahan input atau belum ada objek Person yang dibuat!&quot;);\r\n                    }\r\n                }\r\n                // setor uang ke salah satu rekening dari objek person\r\n                case &quot;4&quot; -&gt; {\r\n                    try {\r\n                        // list objek person yang ada\r\n                        for (int i = 0; i &lt; p.size(); i++) {\r\n                            System.out.println(String.format(&quot;%d. [nama: %s]&quot;, i + 1, p.get(i).getNama()));\r\n                        }\r\n                        System.out.println(&quot;Pilih [No.Urut] objek person yg ingin setor ? contoh: 1 / 2&quot;);\r\n                        int i = Integer.parseInt(in.nextLine());\r\n                        // tampilkan daftar rekening dari objek terpilih\r\n                        p.get(i - 1).tampilListRekeningBank();\r\n                        System.out.println(\r\n                                &quot;Pilih Nomor Rekening objek person yg ingin disetor (9 digit)? contoh: 002393873&quot;);\r\n                        String noRek = in.nextLine();\r\n                        System.out.println(&quot;Masukkan jumlah uang (Rp.) yang ingin disetor ? contoh: 10000&quot;);\r\n                        Double jumlahUang = in.nextDouble();\r\n                        // Setorkan ke akunbank dari objek person terkait\r\n                        BankAccount ba = p.get(i - 1).getAkunBank(noRek);\r\n                        // setor dilakukan\r\n                        ba.setor(jumlahUang);\r\n                        // tampilkan saldo akhir dari rek. yang disetor\r\n                        System.out.println(String.format(&quot;Saldo akhir objek %s no.rek %s Bank %s adalah %.2f&quot;,\r\n                                p.get(i - 1).getNama(),\r\n                                noRek,\r\n                                p.get(i - 1).getAkunBank(noRek).getBank(),\r\n                                p.get(i - 1).getAkunBank(noRek).getSaldo()));\r\n                    } catch (Exception e) {\r\n                        System.out.println(&quot;Terjadi kesalahan Input atau No. Rekening Tidak Terdaftar!!&quot;);\r\n                    }\r\n                }\r\n                // tarik uang dari salah satu rekening objek person\r\n                case &quot;5&quot; -&gt; {\r\n                    try {\r\n                        // list objek person yang ada\r\n                        for (int i = 0; i &lt; p.size(); i++) {\r\n                            System.out.println(String.format(&quot;%d. [nama: %s]&quot;, i + 1, p.get(i).getNama()));\r\n                        }\r\n                        System.out.println(\r\n                                &quot;Pilih [No.Urut] objek person yg ingin melakukan penarikan uang ? contoh: 1 / 2&quot;);\r\n                        int i = Integer.parseInt(in.nextLine());\r\n                        // tampilkan daftar rekening dari objek terpilih\r\n                        p.get(i - 1).tampilListRekeningBank();\r\n                        System.out.println(\r\n                                &quot;Pilih Nomor Rekening objek person yg ingin ditarik (9 digit)? contoh: 002393873&quot;);\r\n                        String noRek = in.nextLine();\r\n                        System.out.println(\r\n                                &quot;Masukkan jumlah uang (Rp.) yang ingin ditarik (Pastikan saldo tersedia)? contoh: 10000&quot;);\r\n                        Double jumlahUang = in.nextDouble();\r\n                        if (p.get(i - 1).getAkunBank(noRek).getSaldo() &lt; jumlahUang) {\r\n                            System.out.println(&quot;Saldo tidak mencukupi!&quot;);\r\n                        } else {\r\n\r\n                            // Setorkan ke akunbank dari objek person terkait\r\n                            BankAccount ba = p.get(i - 1).getAkunBank(noRek);\r\n                            ba.tarikSaldo(jumlahUang);\r\n                            System.out.println(String.format(&quot;Saldo akhir objek %s no.rek %s Bank %s adalah %.2f&quot;,\r\n                                    p.get(i - 1).getNama(),\r\n                                    noRek,\r\n                                    p.get(i - 1).getAkunBank(noRek).getBank(),\r\n                                    p.get(i - 1).getAkunBank(noRek).getSaldo()));\r\n                        }\r\n                    } catch (Exception e) {\r\n                        System.out.println(&quot;Terjadi kesalahan Input atau No. Rekening Tidak Terdaftar!!&quot;);\r\n                    }\r\n                }\r\n                case &quot;6&quot; -&gt; {\r\n                    try {\r\n                        // list objek person yang ada\r\n                        for (int i = 0; i &lt; p.size(); i++) {\r\n                            System.out.println(String.format(&quot;%d. [nama: %s]&quot;, i + 1, p.get(i).getNama()));\r\n                        }\r\n                        System.out.println(\r\n                                &quot;Pilih [No.Urut] objek person yg ingin melakukan transfer/kirim uang ? contoh: 1 / 2&quot;);\r\n                        int i = Integer.parseInt(in.nextLine());\r\n                        // tampilkan daftar rekening dari objek terpilih\r\n                        p.get(i - 1).tampilListRekeningBank();\r\n                        System.out.println(&quot;Pilih Nomor Rekening Pengirim (9 digit)? contoh: 002393873&quot;);\r\n                        String noRek = in.nextLine();\r\n                        System.out.println(\r\n                                &quot;Masukkan jumlah uang (Rp.) yang ingin dikirim (Pastikan saldo tersedia)? contoh: 10000&quot;);\r\n                        Double jumlahUang = Double.parseDouble(in.nextLine());\r\n                        if (p.get(i - 1).getAkunBank(noRek).getSaldo() &lt; jumlahUang) {\r\n                            System.out.println(&quot;Saldo tidak mencukupi!&quot;);\r\n                        } else {\r\n                            // Dapatkan akun bank yang digunakan untuk mengirim/transfer\r\n                            BankAccount ba = p.get(i - 1).getAkunBank(noRek);\r\n                            // Pilih penerima Transfer dari list objek person yang ada\r\n                            for (int x = 0; x &lt; p.size(); x++) {\r\n                                System.out.println(String.format(&quot;%d. [nama: %s]&quot;, x + 1, p.get(x).getNama()));\r\n                            }\r\n                            System.out.println(&quot;Pilih [No.Urut] objek person  penerima transfer uang ? contoh: 1 / 2&quot;);\r\n                            int x = Integer.parseInt(in.nextLine());\r\n                            // tampilkan daftar rekening Penerima transfer (objek Person)\r\n                            p.get(x - 1).tampilListRekeningBank();\r\n                            System.out.println(&quot;Pilih Nomor Rekening Penerima (9 digit)? contoh: 002393873&quot;);\r\n                            String noRekPenerima = in.nextLine();\r\n                            // transfer\r\n                            ba.transfer(jumlahUang, p.get(x - 1), noRekPenerima);\r\n                            // informasi saldo pengirim dan penerima\r\n                            System.out\r\n                                    .println(String.format(\r\n                                            &quot; (Pengirim) Saldo akhir objek %s no.rek %s Bank %s adalah %.2f&quot;,\r\n                                            p.get(i - 1).getNama(),\r\n                                            noRek,\r\n                                            p.get(i - 1).getAkunBank(noRek).getBank(),\r\n                                            p.get(i - 1).getAkunBank(noRek).getSaldo()));\r\n                            System.out\r\n                                    .println(String.format(\r\n                                            &quot; (Penerima) Saldo akhir objek %s no.rek %s Bank %s adalah %.2f&quot;,\r\n                                            p.get(x - 1).getNama(),\r\n                                            noRekPenerima,\r\n                                            p.get(x - 1).getAkunBank(noRekPenerima).getBank(),\r\n                                            p.get(x - 1).getAkunBank(noRekPenerima).getSaldo()));\r\n                        }\r\n                    } catch (Exception e) {\r\n                        System.out.println(&quot;Terjadi kesalahan Input atau No. Rekening Tidak Terdaftar!!&quot;);\r\n                    }\r\n                }\r\n                // tampilkan daftar objek Person yang ada\r\n                case &quot;7&quot; -&gt; {\r\n                    for (int i = 0; i &lt; p.size(); i++) {\r\n                        System.out\r\n                                .println(String.format(&quot;%d. [nama: %s] [umur: %d] [total saldo semua bank : Rp. %.2f]&quot;,\r\n                                        i + 1,\r\n                                        p.get(i).getNama(),\r\n                                        p.get(i).getUmur(),\r\n                                        p.get(i).rekapSaldoRekening()));\r\n\r\n                    }\r\n                }\r\n                // program dihentikan/selesai\r\n                default -&gt; {\r\n                    System.out.println(&quot;Inputan Tidak Terdaftar, Program dihentikan!&quot;);\r\n                    quit = true;\r\n                }\r\n            }\r\n        } while (!quit);\r\n\r\n    public static void main(String[] args) {\r\n        ArrayList&lt;Person&gt; p = new ArrayList();\r\n        tampilMenu(p);\r\n    }\r\n```","title":"Refactor Switch Case in Java","body":"<p>So my code literally working just fine, but I want to refactor my massive main file so it can be maintained. As you can see on my code, it's contain a bunch of expression on the switch statement and it looks a bit mess for me. How to refactor the switch statement ? Should I use interface or abstract class or something like that to simplify it ? Any insight would be helpful, TIA.</p>\n<pre><code>static void tampilMenu(ArrayList&lt;Person&gt; p) {\n        boolean quit = false;\n        do {\n            System.out.println(&quot;==== Pilih Menu ====&quot;);\n            System.out.println(&quot;1.Buat Objek Person!&quot;);\n            System.out.println(&quot;2.Buat Akun Bank pada Objek Person!&quot;);\n            System.out.println(&quot;3.Lihat daftar rekening dari objek Person!&quot;);\n            System.out.println(&quot;4.Setor Uang ke Rekening dari objek Person&quot;);\n            System.out.println(&quot;5.Tarik Uang dari Rekening objek Person&quot;);\n            System.out.println(&quot;6.Transfer Uang!&quot;);\n            System.out.println(&quot;7.Tampilkan daftar Objek Person!&quot;);\n            System.out.println(&quot;=======================&quot;);\n\n            Scanner in = new Scanner(System.in);\n            System.out.println(&quot;Pilih Menu no : &quot;);\n            String menu = in.nextLine();\n\n            switch (menu) {\n                // buat objek person baru\n                case &quot;1&quot; -&gt; {\n                    try {\n                        String nama;\n                        int umur;\n                        do {\n                            System.out.println(&quot;Nama objek Person : (tidak boleh blank) &quot;);\n                            nama = in.nextLine();\n                            nama = nama.replaceAll(&quot;\\\\s&quot;, &quot;&quot;);\n                        } while (nama.equals(&quot;&quot;));\n                        System.out.println(&quot;Umur : &quot;);\n                        umur = in.nextInt();\n                        p.add(new Person(nama, umur));\n                    } catch (Exception e) {\n                        System.out.println(&quot;Terjadi kesalahan input!&quot;);\n                    }\n                }\n                // buka akun bank dari objek person yang ada\n                case &quot;2&quot; -&gt; {\n                    try {\n                        // list objek person yang ada\n                        for (int i = 0; i &lt; p.size(); i++) {\n                            System.out.println(String.format(&quot;%d. [nama: %s]&quot;, i + 1, p.get(i).getNama()));\n                        }\n                        System.out.println(&quot;Pilih [No.Urut] objek person yang akan dibuat akun bank ? contoh: 1&quot;);\n                        int i = Integer.parseInt(in.nextLine());\n                        System.out.println(&quot;Ketik Nama Bank : (contoh: BRI / BCA / BSI / BNI /...)&quot;);\n                        String namaBank = in.nextLine();\n                        System.out.println(&quot;Ketik Kode Bank 3 digit angka: (contoh: 002 / 003 / 005 / 006 /...)&quot;);\n                        String kdBank = in.nextLine();\n                        System.out.println(&quot;Masukkan jumlah setoran awal Rp. : (tanpa pemisah ribuan,contoh: 100000)&quot;);\n                        Double setorAwal = in.nextDouble();\n                        p.get(i - 1).bukaAkunBank(namaBank, kdBank, setorAwal);\n                    } catch (Exception e) {\n                        System.out.println(&quot;Terjadi kesalahan input atau belum ada objek Person yang dibuat!&quot;);\n                    }\n\n                }\n                // lihat daftar rekening dari objek person yang ada\n                case &quot;3&quot; -&gt; {\n                    try {\n                        // list objek person yang ada\n                        for (int i = 0; i &lt; p.size(); i++) {\n                            System.out.println(String.format(&quot;%d. [nama: %s]&quot;, i + 1, p.get(i).getNama()));\n                        }\n                        System.out.println(\n                                &quot;Pilih [No.Urut] objek person yg ingin dilihat daftar rekeningnya ? contoh: 1&quot;);\n                        int i = Integer.parseInt(in.nextLine());\n                        // tampilkan list rekening bank dari objek person terpilih\n                        p.get(i - 1).tampilListRekeningBank();\n                    } catch (Exception e) {\n                        System.out.println(&quot;Terjadi kesalahan input atau belum ada objek Person yang dibuat!&quot;);\n                    }\n                }\n                // setor uang ke salah satu rekening dari objek person\n                case &quot;4&quot; -&gt; {\n                    try {\n                        // list objek person yang ada\n                        for (int i = 0; i &lt; p.size(); i++) {\n                            System.out.println(String.format(&quot;%d. [nama: %s]&quot;, i + 1, p.get(i).getNama()));\n                        }\n                        System.out.println(&quot;Pilih [No.Urut] objek person yg ingin setor ? contoh: 1 / 2&quot;);\n                        int i = Integer.parseInt(in.nextLine());\n                        // tampilkan daftar rekening dari objek terpilih\n                        p.get(i - 1).tampilListRekeningBank();\n                        System.out.println(\n                                &quot;Pilih Nomor Rekening objek person yg ingin disetor (9 digit)? contoh: 002393873&quot;);\n                        String noRek = in.nextLine();\n                        System.out.println(&quot;Masukkan jumlah uang (Rp.) yang ingin disetor ? contoh: 10000&quot;);\n                        Double jumlahUang = in.nextDouble();\n                        // Setorkan ke akunbank dari objek person terkait\n                        BankAccount ba = p.get(i - 1).getAkunBank(noRek);\n                        // setor dilakukan\n                        ba.setor(jumlahUang);\n                        // tampilkan saldo akhir dari rek. yang disetor\n                        System.out.println(String.format(&quot;Saldo akhir objek %s no.rek %s Bank %s adalah %.2f&quot;,\n                                p.get(i - 1).getNama(),\n                                noRek,\n                                p.get(i - 1).getAkunBank(noRek).getBank(),\n                                p.get(i - 1).getAkunBank(noRek).getSaldo()));\n                    } catch (Exception e) {\n                        System.out.println(&quot;Terjadi kesalahan Input atau No. Rekening Tidak Terdaftar!!&quot;);\n                    }\n                }\n                // tarik uang dari salah satu rekening objek person\n                case &quot;5&quot; -&gt; {\n                    try {\n                        // list objek person yang ada\n                        for (int i = 0; i &lt; p.size(); i++) {\n                            System.out.println(String.format(&quot;%d. [nama: %s]&quot;, i + 1, p.get(i).getNama()));\n                        }\n                        System.out.println(\n                                &quot;Pilih [No.Urut] objek person yg ingin melakukan penarikan uang ? contoh: 1 / 2&quot;);\n                        int i = Integer.parseInt(in.nextLine());\n                        // tampilkan daftar rekening dari objek terpilih\n                        p.get(i - 1).tampilListRekeningBank();\n                        System.out.println(\n                                &quot;Pilih Nomor Rekening objek person yg ingin ditarik (9 digit)? contoh: 002393873&quot;);\n                        String noRek = in.nextLine();\n                        System.out.println(\n                                &quot;Masukkan jumlah uang (Rp.) yang ingin ditarik (Pastikan saldo tersedia)? contoh: 10000&quot;);\n                        Double jumlahUang = in.nextDouble();\n                        if (p.get(i - 1).getAkunBank(noRek).getSaldo() &lt; jumlahUang) {\n                            System.out.println(&quot;Saldo tidak mencukupi!&quot;);\n                        } else {\n\n                            // Setorkan ke akunbank dari objek person terkait\n                            BankAccount ba = p.get(i - 1).getAkunBank(noRek);\n                            ba.tarikSaldo(jumlahUang);\n                            System.out.println(String.format(&quot;Saldo akhir objek %s no.rek %s Bank %s adalah %.2f&quot;,\n                                    p.get(i - 1).getNama(),\n                                    noRek,\n                                    p.get(i - 1).getAkunBank(noRek).getBank(),\n                                    p.get(i - 1).getAkunBank(noRek).getSaldo()));\n                        }\n                    } catch (Exception e) {\n                        System.out.println(&quot;Terjadi kesalahan Input atau No. Rekening Tidak Terdaftar!!&quot;);\n                    }\n                }\n                case &quot;6&quot; -&gt; {\n                    try {\n                        // list objek person yang ada\n                        for (int i = 0; i &lt; p.size(); i++) {\n                            System.out.println(String.format(&quot;%d. [nama: %s]&quot;, i + 1, p.get(i).getNama()));\n                        }\n                        System.out.println(\n                                &quot;Pilih [No.Urut] objek person yg ingin melakukan transfer/kirim uang ? contoh: 1 / 2&quot;);\n                        int i = Integer.parseInt(in.nextLine());\n                        // tampilkan daftar rekening dari objek terpilih\n                        p.get(i - 1).tampilListRekeningBank();\n                        System.out.println(&quot;Pilih Nomor Rekening Pengirim (9 digit)? contoh: 002393873&quot;);\n                        String noRek = in.nextLine();\n                        System.out.println(\n                                &quot;Masukkan jumlah uang (Rp.) yang ingin dikirim (Pastikan saldo tersedia)? contoh: 10000&quot;);\n                        Double jumlahUang = Double.parseDouble(in.nextLine());\n                        if (p.get(i - 1).getAkunBank(noRek).getSaldo() &lt; jumlahUang) {\n                            System.out.println(&quot;Saldo tidak mencukupi!&quot;);\n                        } else {\n                            // Dapatkan akun bank yang digunakan untuk mengirim/transfer\n                            BankAccount ba = p.get(i - 1).getAkunBank(noRek);\n                            // Pilih penerima Transfer dari list objek person yang ada\n                            for (int x = 0; x &lt; p.size(); x++) {\n                                System.out.println(String.format(&quot;%d. [nama: %s]&quot;, x + 1, p.get(x).getNama()));\n                            }\n                            System.out.println(&quot;Pilih [No.Urut] objek person  penerima transfer uang ? contoh: 1 / 2&quot;);\n                            int x = Integer.parseInt(in.nextLine());\n                            // tampilkan daftar rekening Penerima transfer (objek Person)\n                            p.get(x - 1).tampilListRekeningBank();\n                            System.out.println(&quot;Pilih Nomor Rekening Penerima (9 digit)? contoh: 002393873&quot;);\n                            String noRekPenerima = in.nextLine();\n                            // transfer\n                            ba.transfer(jumlahUang, p.get(x - 1), noRekPenerima);\n                            // informasi saldo pengirim dan penerima\n                            System.out\n                                    .println(String.format(\n                                            &quot; (Pengirim) Saldo akhir objek %s no.rek %s Bank %s adalah %.2f&quot;,\n                                            p.get(i - 1).getNama(),\n                                            noRek,\n                                            p.get(i - 1).getAkunBank(noRek).getBank(),\n                                            p.get(i - 1).getAkunBank(noRek).getSaldo()));\n                            System.out\n                                    .println(String.format(\n                                            &quot; (Penerima) Saldo akhir objek %s no.rek %s Bank %s adalah %.2f&quot;,\n                                            p.get(x - 1).getNama(),\n                                            noRekPenerima,\n                                            p.get(x - 1).getAkunBank(noRekPenerima).getBank(),\n                                            p.get(x - 1).getAkunBank(noRekPenerima).getSaldo()));\n                        }\n                    } catch (Exception e) {\n                        System.out.println(&quot;Terjadi kesalahan Input atau No. Rekening Tidak Terdaftar!!&quot;);\n                    }\n                }\n                // tampilkan daftar objek Person yang ada\n                case &quot;7&quot; -&gt; {\n                    for (int i = 0; i &lt; p.size(); i++) {\n                        System.out\n                                .println(String.format(&quot;%d. [nama: %s] [umur: %d] [total saldo semua bank : Rp. %.2f]&quot;,\n                                        i + 1,\n                                        p.get(i).getNama(),\n                                        p.get(i).getUmur(),\n                                        p.get(i).rekapSaldoRekening()));\n\n                    }\n                }\n                // program dihentikan/selesai\n                default -&gt; {\n                    System.out.println(&quot;Inputan Tidak Terdaftar, Program dihentikan!&quot;);\n                    quit = true;\n                }\n            }\n        } while (!quit);\n\n    public static void main(String[] args) {\n        ArrayList&lt;Person&gt; p = new ArrayList();\n        tampilMenu(p);\n    }\n</code></pre>\n"},{"tags":["java","mongodb","spring-boot","audit-logging"],"comments":[{"owner":{"account_id":2242741,"reputation":6993,"user_id":1976843,"display_name":"JEY"},"score":0,"creation_date":1646230920,"post_id":71323910,"comment_id":126071777,"body_markdown":"Take a look at HandlerInterceptor. You can also use aspect (aspectj)","body":"Take a look at HandlerInterceptor. You can also use aspect (aspectj)"},{"owner":{"account_id":1202607,"reputation":1770,"user_id":1172945,"accept_rate":74,"display_name":"Tugrul"},"score":0,"creation_date":1646251980,"post_id":71323910,"comment_id":126079944,"body_markdown":"Create a RequestScoped WorkerContext into a HandlerIntercepter and log it. Just all, also spring provides some builtin interceptors for that type of operations.","body":"Create a RequestScoped WorkerContext into a HandlerIntercepter and log it. Just all, also spring provides some builtin interceptors for that type of operations."}],"owner":{"account_id":20084832,"reputation":1,"user_id":14726652,"display_name":"kaczy77"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1646229280,"creation_date":1646229280,"question_id":71323910,"body_markdown":"I was looking on the internet but unfortunately I couldn&#39;t find the answer. It seems to me that the topic is not clear and no solution seemed to be completely correct or complete. I need explanation step by step what and why.\r\n\r\nFor my REST API, I have a mongo database. For each request that comes to the endpoint, I would like to log such a request with the information what/who/when and what was in the body. I would like to log each such request with such information and then save it to the mongo db. \r\nExample endpoint below.\r\n\r\n    @PostMapping\r\n        @ResponseStatus(HttpStatus.CREATED)\r\n        public WorkerDto createWorker(@RequestBody WorkerDto workerDto) {\r\n            Worker worker = objectsMapper.dtoWorkerToWorker(workerDto);\r\n            return objectsMapper.workerToDtoWorker(workerService.createWorker(worker));\r\n        }\r\n\r\n","title":"Add audtiting for endpoint","body":"<p>I was looking on the internet but unfortunately I couldn't find the answer. It seems to me that the topic is not clear and no solution seemed to be completely correct or complete. I need explanation step by step what and why.</p>\n<p>For my REST API, I have a mongo database. For each request that comes to the endpoint, I would like to log such a request with the information what/who/when and what was in the body. I would like to log each such request with such information and then save it to the mongo db.\nExample endpoint below.</p>\n<pre><code>@PostMapping\n    @ResponseStatus(HttpStatus.CREATED)\n    public WorkerDto createWorker(@RequestBody WorkerDto workerDto) {\n        Worker worker = objectsMapper.dtoWorkerToWorker(workerDto);\n        return objectsMapper.workerToDtoWorker(workerService.createWorker(worker));\n    }\n</code></pre>\n"},{"tags":["java","recursion","ftp"],"answers":[{"tags":[],"owner":{"account_id":1503465,"reputation":1125,"user_id":1407398,"display_name":"ejb_guy"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1337772226,"creation_date":1337772226,"answer_id":10718927,"question_id":10718843,"body_markdown":"  \r\n    upload(fileName){\r\n      If (filename is not dir){\r\n       ftpFile();\r\n       return;\r\n     }\r\n     listoffiles = get the list of all files in dir \r\n        for each file : listoffiles {\r\n        upload(file)\r\n     }\r\n   }","title":"Copy all directories to server by FTP using Java","body":"<pre><code>upload(fileName){\n  If (filename is not dir){\n   ftpFile();\n   return;\n }\n listoffiles = get the list of all files in dir \n    for each file : listoffiles {\n    upload(file)\n }\n</code></pre>\n\n<p>}</p>\n"},{"tags":[],"owner":{"account_id":414217,"reputation":6579,"user_id":788324,"display_name":"creemama"},"down_vote_count":0,"up_vote_count":10,"is_accepted":true,"score":10,"last_activity_date":1337776949,"creation_date":1337776118,"answer_id":10719929,"question_id":10718843,"body_markdown":"The following is an example of a recursive solution to the problem:\r\n\r\n    public void saveFilesToServer(String remoteDest, File localSrc) throws IOException {\r\n    \tFTPClient ftp = new FTPClient();\r\n    \tftp.connect(&quot;ftp.foobar.com&quot;);\r\n    \tif (!FTPReply.isPositiveCompletion(ftp.getReplyCode())) {\r\n    \t\tftp.disconnect();\r\n    \t\tlog.fatal(&quot;FTP not disconnected&quot;);\r\n    \t}\r\n    \r\n    \tftp.login(&quot;foo&quot;, &quot;qwerty&quot;);\r\n    \tlog.info(&quot;Connected to server .&quot;);\r\n    \tlog.info(ftp.getReplyString());\r\n    \r\n    \tftp.changeWorkingDirectory(remoteDest);\r\n    \tftp.setFileType(FTPClient.BINARY_FILE_TYPE);\r\n    \r\n    \ttry {\r\n    \t\tupload(localSrc, ftp);\r\n    \t}\r\n    \tfinally {\r\n    \t\tftp.disconnect();\r\n    \t\tlog.info(&quot;FTP disconnected&quot;);\t\t\t\r\n    \t}\r\n    }\r\n    \r\n    public void upload(File src, FTPClient ftp) throws IOException {\r\n    \tif (src.isDirectory()) {\r\n    \t\tftp.makeDirectory(src.getName());\r\n    \t\tftp.changeWorkingDirectory(src.getName());\r\n    \t\tfor (File file : src.listFiles()) {\r\n    \t\t\tupload(file, ftp);\r\n    \t\t}\r\n    \t\tftp.changeToParentDirectory();\r\n    \t}\r\n    \telse {\r\n    \t\tInputStream srcStream = null;\r\n    \t\ttry {\r\n    \t\t\tsrcStream = src.toURI().toURL().openStream();\r\n    \t\t\tftp.storeFile(src.getName(), srcStream);\r\n    \t\t}\r\n    \t\tfinally {\r\n    \t\t\tIOUtils.closeQuietly(srcStream);\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\n[`IOUtils`](http://commons.apache.org/io/api-release/org/apache/commons/io/IOUtils.html) is a part of [Apache Commons IO](http://commons.apache.org/io/).","title":"Copy all directories to server by FTP using Java","body":"<p>The following is an example of a recursive solution to the problem:</p>\n\n<pre><code>public void saveFilesToServer(String remoteDest, File localSrc) throws IOException {\n    FTPClient ftp = new FTPClient();\n    ftp.connect(\"ftp.foobar.com\");\n    if (!FTPReply.isPositiveCompletion(ftp.getReplyCode())) {\n        ftp.disconnect();\n        log.fatal(\"FTP not disconnected\");\n    }\n\n    ftp.login(\"foo\", \"qwerty\");\n    log.info(\"Connected to server .\");\n    log.info(ftp.getReplyString());\n\n    ftp.changeWorkingDirectory(remoteDest);\n    ftp.setFileType(FTPClient.BINARY_FILE_TYPE);\n\n    try {\n        upload(localSrc, ftp);\n    }\n    finally {\n        ftp.disconnect();\n        log.info(\"FTP disconnected\");           \n    }\n}\n\npublic void upload(File src, FTPClient ftp) throws IOException {\n    if (src.isDirectory()) {\n        ftp.makeDirectory(src.getName());\n        ftp.changeWorkingDirectory(src.getName());\n        for (File file : src.listFiles()) {\n            upload(file, ftp);\n        }\n        ftp.changeToParentDirectory();\n    }\n    else {\n        InputStream srcStream = null;\n        try {\n            srcStream = src.toURI().toURL().openStream();\n            ftp.storeFile(src.getName(), srcStream);\n        }\n        finally {\n            IOUtils.closeQuietly(srcStream);\n        }\n    }\n}\n</code></pre>\n\n<p><a href=\"http://commons.apache.org/io/api-release/org/apache/commons/io/IOUtils.html\" rel=\"noreferrer\"><code>IOUtils</code></a> is a part of <a href=\"http://commons.apache.org/io/\" rel=\"noreferrer\">Apache Commons IO</a>.</p>\n"}],"owner":{"account_id":981663,"reputation":17502,"user_id":1001224,"accept_rate":82,"display_name":"lolo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8658,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":10719929,"answer_count":2,"score":6,"last_activity_date":1646228957,"creation_date":1337771891,"question_id":10718843,"body_markdown":"I need to copy a directory from the local disk to a server. \r\nThe directory contains a lot of directories, subdirectories, and files. (Think of a hierarchy tree of directories).\r\n\r\nHere is an example to copy one file:\r\n\r\n     public void saveFilesToServer() throws IOException {\r\n\t\tFTPClient ftp = new FTPClient();\r\n\t\tftp.connect(ftp.foobar.com);\r\n\t\tif (!FTPReply.isPositiveCompletion(ftp.getReplyCode())) {\r\n\t\t\tftp.disconnect();\r\n\t\t\tlog.fatal(&quot;FTP not disconnected&quot;);\r\n\t\t}\r\n\r\n\t\tftp.login(&quot;foo&quot;, &quot;qwerty&quot;);\r\n\t\tlog.info(&quot;Connected to server .&quot;);\r\n\t\tlog.info(ftp.getReplyString());\r\n\t\tftp.changeWorkingDirectory(&quot;test&quot;);\r\n\t\tftp.makeDirectory(&quot;somedir&quot;);\r\n\t\tftp.changeWorkingDirectory(&quot;somedir&quot;);\r\n\t\tftp.setFileType(FTPClient.BINARY_FILE_TYPE);\t\r\n\t\tjava.io.File srcFolder = new java.io.File(folderPath);\t\t\r\n\t\tFileInputStream fis = new FileInputStream(srcFolder);\r\n\t\tftp.storeFile (fileName, fis);\r\n\t\tftp.disconnect();\r\n\t\tlog.info(&quot;FTP disconnected&quot;);\r\n\t}\r\n\r\nNow, I need to copy a directory (`somedir`) with all the subdirectories and files of `somedir`. \r\n\r\nI think the algorithm should use recursion.\r\nDoes someone know how?","title":"Copy all directories to server by FTP using Java","body":"<p>I need to copy a directory from the local disk to a server. \nThe directory contains a lot of directories, subdirectories, and files. (Think of a hierarchy tree of directories).</p>\n\n<p>Here is an example to copy one file:</p>\n\n<pre><code> public void saveFilesToServer() throws IOException {\n    FTPClient ftp = new FTPClient();\n    ftp.connect(ftp.foobar.com);\n    if (!FTPReply.isPositiveCompletion(ftp.getReplyCode())) {\n        ftp.disconnect();\n        log.fatal(\"FTP not disconnected\");\n    }\n\n    ftp.login(\"foo\", \"qwerty\");\n    log.info(\"Connected to server .\");\n    log.info(ftp.getReplyString());\n    ftp.changeWorkingDirectory(\"test\");\n    ftp.makeDirectory(\"somedir\");\n    ftp.changeWorkingDirectory(\"somedir\");\n    ftp.setFileType(FTPClient.BINARY_FILE_TYPE);    \n    java.io.File srcFolder = new java.io.File(folderPath);      \n    FileInputStream fis = new FileInputStream(srcFolder);\n    ftp.storeFile (fileName, fis);\n    ftp.disconnect();\n    log.info(\"FTP disconnected\");\n}\n</code></pre>\n\n<p>Now, I need to copy a directory (<code>somedir</code>) with all the subdirectories and files of <code>somedir</code>. </p>\n\n<p>I think the algorithm should use recursion.\nDoes someone know how?</p>\n"},{"tags":["java","guava"],"answers":[{"tags":[],"owner":{"account_id":231683,"reputation":4218,"user_id":496038,"display_name":"pringi"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1646228649,"creation_date":1646228649,"answer_id":71323768,"question_id":71323692,"body_markdown":"You can do something like this:\r\n\r\n    Map&lt;String, String[]&gt; items = new HashMap&lt;&gt;();\r\n    items.put(&quot;s1&quot;, new String[] {&quot;abc&quot;, &quot;def&quot;});\r\n    items.put(&quot;s2&quot;, new String[] {&quot;123&quot;, &quot;456&quot;});\r\n    \r\n    System.out.println(items.entrySet().stream().map(es -&gt; es.getKey() + &quot;=&quot; + String.join(&quot;,&quot;, es.getValue())).collect(\r\n        Collectors.toList()));","title":"Convert a Map&lt;String, String[]&gt; to a delimited String","body":"<p>You can do something like this:</p>\n<pre><code>Map&lt;String, String[]&gt; items = new HashMap&lt;&gt;();\nitems.put(&quot;s1&quot;, new String[] {&quot;abc&quot;, &quot;def&quot;});\nitems.put(&quot;s2&quot;, new String[] {&quot;123&quot;, &quot;456&quot;});\n\nSystem.out.println(items.entrySet().stream().map(es -&gt; es.getKey() + &quot;=&quot; + String.join(&quot;,&quot;, es.getValue())).collect(\n    Collectors.toList()));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8517137,"reputation":835,"user_id":6385232,"display_name":"geanakuch"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1646228788,"creation_date":1646228788,"answer_id":71323810,"question_id":71323692,"body_markdown":"You could do this using streams:\r\n\r\n    items.entrySet().stream().map(e -&gt; e.getKey() + &quot;=&quot; + Stream.of(e.getValue()).collect(Collectors.joining(&quot;,&quot;))).collect(Collectors.joining(&quot;,&quot;));","title":"Convert a Map&lt;String, String[]&gt; to a delimited String","body":"<p>You could do this using streams:</p>\n<pre><code>items.entrySet().stream().map(e -&gt; e.getKey() + &quot;=&quot; + Stream.of(e.getValue()).collect(Collectors.joining(&quot;,&quot;))).collect(Collectors.joining(&quot;,&quot;));\n</code></pre>\n"}],"owner":{"account_id":6845934,"reputation":33,"user_id":5264762,"display_name":"Fernando Ruscitti"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1646228788,"creation_date":1646228352,"question_id":71323692,"body_markdown":"What is the best way to convert a Java Map&lt;String, String[]&gt; to a delimited String?\r\n\r\nExample using guava:\r\n\r\n    Map&lt;String, String[]&gt; items = new HashMap&lt;&gt;();\r\n    items.put(&quot;s1&quot;, new String[] {&quot;abc&quot;, &quot;def&quot;});\r\n    items.put(&quot;s2&quot;, new String[] {&quot;123&quot;, &quot;456&quot;});\r\n    System.out.println(Joiner.on(&#39;,&#39;).withKeyValueSeparator(&#39;=&#39;).join(items));\r\n\r\nDo not flatten the String[]:\r\n\r\n    s1=**[Ljava.lang.String;@2e98be86**,s2=[Ljava.lang.String;@b676908\r\n\r\nThanks.","title":"Convert a Map&lt;String, String[]&gt; to a delimited String","body":"<p>What is the best way to convert a Java Map&lt;String, String[]&gt; to a delimited String?</p>\n<p>Example using guava:</p>\n<pre><code>Map&lt;String, String[]&gt; items = new HashMap&lt;&gt;();\nitems.put(&quot;s1&quot;, new String[] {&quot;abc&quot;, &quot;def&quot;});\nitems.put(&quot;s2&quot;, new String[] {&quot;123&quot;, &quot;456&quot;});\nSystem.out.println(Joiner.on(',').withKeyValueSeparator('=').join(items));\n</code></pre>\n<p>Do not flatten the String[]:</p>\n<pre><code>s1=**[Ljava.lang.String;@2e98be86**,s2=[Ljava.lang.String;@b676908\n</code></pre>\n<p>Thanks.</p>\n"},{"tags":["java","integration-testing","rest-assured"],"answers":[{"tags":[],"owner":{"account_id":1607778,"reputation":4341,"user_id":1487469,"accept_rate":76,"display_name":"Pramod S. Nikam"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1573808999,"creation_date":1573807986,"answer_id":58873351,"question_id":58863261,"body_markdown":"Do **note/store clientid and secret** that you get from uaa server: \r\n\r\n  Then First try to call uaa for tokens :\r\n\r\n \r\n\r\n        Response response =\r\n             given()\r\n    .header(&quot;Authorization&quot;,&lt;client id&gt;:&lt;client secret&gt;)\r\n    .contentType(&quot;application/x-www-form-urlencoded&quot;)\r\n    .formParam(&quot;grant_type&quot;,&quot;authorization_code&quot;)                                                   .formParam(&quot;redirect_uri&quot;,REDIRECT_URL)\r\n    .formParam(&quot;response_type&quot;,&quot;code&quot;)\r\n    .formParam(&quot;code&quot;, AUTHORIZATION_CODE)\r\n    .formParam(&quot;client_id&quot;, CLIENT_ID)\r\n    .formParam(&quot;client_secret&quot;, CLIENT_SECRET)\r\n            .when()\r\n     .post(BASE_URI+&quot;/oauth2/token&quot;);\r\n\r\nThen Fetch out information of access token and token type like below:\r\n    \r\n        JSONObject jsonObject = new JSONObject(response.getBody().asString());\r\n        String accessToken = jsonObject.get(&quot;access_token&quot;).toString();\r\n        String tokenType = jsonObject.get(&quot;token_type&quot;).toString();\r\n        log.info(&quot;Oauth Token with type &quot; + tokenType + &quot;   &quot; + accessToken);\r\n\r\nLastly call your endpoint by passing access token in **header**:\r\n\r\n    Response response =\r\n          given()\r\n              .headers(\r\n                  &quot;Authorization&quot;,\r\n                  &quot;Bearer &quot; + accessToken,\r\n                  &quot;Content-Type&quot;,\r\n                  ContentType.JSON,\r\n                  &quot;Accept&quot;,\r\n                  ContentType.JSON)\r\n              .when()\r\n              .get(url)\r\n              .then()\r\n              .contentType(ContentType.JSON)\r\n              .extract()\r\n              .response();\r\n\r\n","title":"How to write java code REST Assured code to get authorization token?","body":"<p>Do <strong>note/store clientid and secret</strong> that you get from uaa server: </p>\n\n<p>Then First try to call uaa for tokens :</p>\n\n<pre><code>    Response response =\n         given()\n.header(\"Authorization\",&lt;client id&gt;:&lt;client secret&gt;)\n.contentType(\"application/x-www-form-urlencoded\")\n.formParam(\"grant_type\",\"authorization_code\")                                                   .formParam(\"redirect_uri\",REDIRECT_URL)\n.formParam(\"response_type\",\"code\")\n.formParam(\"code\", AUTHORIZATION_CODE)\n.formParam(\"client_id\", CLIENT_ID)\n.formParam(\"client_secret\", CLIENT_SECRET)\n        .when()\n .post(BASE_URI+\"/oauth2/token\");\n</code></pre>\n\n<p>Then Fetch out information of access token and token type like below:</p>\n\n<pre><code>    JSONObject jsonObject = new JSONObject(response.getBody().asString());\n    String accessToken = jsonObject.get(\"access_token\").toString();\n    String tokenType = jsonObject.get(\"token_type\").toString();\n    log.info(\"Oauth Token with type \" + tokenType + \"   \" + accessToken);\n</code></pre>\n\n<p>Lastly call your endpoint by passing access token in <strong>header</strong>:</p>\n\n<pre><code>Response response =\n      given()\n          .headers(\n              \"Authorization\",\n              \"Bearer \" + accessToken,\n              \"Content-Type\",\n              ContentType.JSON,\n              \"Accept\",\n              ContentType.JSON)\n          .when()\n          .get(url)\n          .then()\n          .contentType(ContentType.JSON)\n          .extract()\n          .response();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10936572,"reputation":61,"user_id":8038066,"display_name":"S.Sabari Giri Nathan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1573808580,"creation_date":1573808580,"answer_id":58873507,"question_id":58863261,"body_markdown":"Below is an algorithm/snippet of how your code should look like:\r\n\r\n**Prerequisites:**\r\n\r\n 1. Initial OAuth token and clientID should be taken and stored (in a DB or any data\r\n    storage).\r\n 2. Time of OAuth token generation must be stored\r\n 3. Refresh token must be stored.\r\n 4. Validity (For how long the current OAuth token is valid) of OAuth token must be known/stored.\r\n\r\n**Algorithm:**\r\n \r\n\r\n     long validityOfOAuthToken = DB.get (&quot;validityOfOAuthToken&quot;);\r\n     long OAuthGeneratedTimeInMillis = DB.get (&quot;oAuthGeneratedTime&quot;);\r\n     long currentTimeInMillis = DateTime.now (DateTimeZone.UTC).getMillis ( );\r\n     if (currentTimeInMillis - OAuthGeneratedTimeInMillis &gt; validityOfOAuthToken)\r\n     {\r\n        String clientID = DB.get (&quot;clientID&quot;);\r\n        String refreshToken = DB.get (&quot;refreshToken&quot;);\r\n        String accessToken = generateAccessToken (clientID, refreshToken); // API Invocation to get access token via refresh token\r\n        DB.save (&quot;oauthToken&quot;, accessToken);\r\n        DB.save (&quot;oAuthGeneratedTime&quot;, DateTime.now (DateTimeZone.UTC).getMillis ( ));\r\n        return accessToken;\r\n     }\r\n     else\r\n     {\r\n        return DB.get (&quot;oauthToken&quot;);\r\n     }\r\n\r\n","title":"How to write java code REST Assured code to get authorization token?","body":"<p>Below is an algorithm/snippet of how your code should look like:</p>\n\n<p><strong>Prerequisites:</strong></p>\n\n<ol>\n<li>Initial OAuth token and clientID should be taken and stored (in a DB or any data\nstorage).</li>\n<li>Time of OAuth token generation must be stored</li>\n<li>Refresh token must be stored.</li>\n<li>Validity (For how long the current OAuth token is valid) of OAuth token must be known/stored.</li>\n</ol>\n\n<p><strong>Algorithm:</strong></p>\n\n<pre><code> long validityOfOAuthToken = DB.get (\"validityOfOAuthToken\");\n long OAuthGeneratedTimeInMillis = DB.get (\"oAuthGeneratedTime\");\n long currentTimeInMillis = DateTime.now (DateTimeZone.UTC).getMillis ( );\n if (currentTimeInMillis - OAuthGeneratedTimeInMillis &gt; validityOfOAuthToken)\n {\n    String clientID = DB.get (\"clientID\");\n    String refreshToken = DB.get (\"refreshToken\");\n    String accessToken = generateAccessToken (clientID, refreshToken); // API Invocation to get access token via refresh token\n    DB.save (\"oauthToken\", accessToken);\n    DB.save (\"oAuthGeneratedTime\", DateTime.now (DateTimeZone.UTC).getMillis ( ));\n    return accessToken;\n }\n else\n {\n    return DB.get (\"oauthToken\");\n }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2500437,"reputation":1762,"user_id":2175704,"display_name":"Sameera De Silva"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1575632375,"creation_date":1575551984,"answer_id":59196102,"question_id":58863261,"body_markdown":"Please try this .\r\nUsing `&quot;client_secret&quot;` and `&quot;client_id&quot;` it creates a `bearerToken` and later we can use it to authenticate.\r\n\r\n```java\r\nRestAssured.baseURI = &quot;http://coop.apps.symfonycasts.com/&quot;;\r\nRestAssured.basePath = &quot;/token&quot;;\r\n\r\n// client_secret is different from oauth2 token\r\nResponse response = given()\r\n            .formParam(&quot;client_id&quot;,&quot;samapp&quot;)\r\n            .formParam(&quot;client_secret&quot;,&quot;f56f459193cee56817c2a99c205654b7&quot;)\r\n            .formParam(&quot;grant_type&quot;, &quot;client_credentials&quot;).post(&quot;&quot;);\r\n\r\n//To get token\r\nString bearerToken = response.jsonPath().get(&quot;access_token&quot;);\r\n\r\nSystem.out.println(&quot;The bearer token value is &quot;+bearerToken);\r\n\r\nAssert.assertEquals(200, response.getStatusCode(),&quot;Status code mismatches&quot;);\r\n```","title":"How to write java code REST Assured code to get authorization token?","body":"<p>Please try this .\nUsing <code>\"client_secret\"</code> and <code>\"client_id\"</code> it creates a <code>bearerToken</code> and later we can use it to authenticate.</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>RestAssured.baseURI = \"http://coop.apps.symfonycasts.com/\";\nRestAssured.basePath = \"/token\";\n\n// client_secret is different from oauth2 token\nResponse response = given()\n            .formParam(\"client_id\",\"samapp\")\n            .formParam(\"client_secret\",\"f56f459193cee56817c2a99c205654b7\")\n            .formParam(\"grant_type\", \"client_credentials\").post(\"\");\n\n//To get token\nString bearerToken = response.jsonPath().get(\"access_token\");\n\nSystem.out.println(\"The bearer token value is \"+bearerToken);\n\nAssert.assertEquals(200, response.getStatusCode(),\"Status code mismatches\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1317329,"reputation":401,"user_id":1263912,"accept_rate":73,"display_name":"Boon"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1631628086,"creation_date":1631628086,"answer_id":69179221,"question_id":58863261,"body_markdown":"This should work - \r\n\r\n\r\n    public class AuthenticationUtils {\r\n    \r\n        public static String generateOAuth2Token() {\r\n            return &quot;Bearer &quot;+RestAssured.given().auth().basic(&quot;{YOUR_USERNAME}&quot;, &quot;{YOUR_PASSWORD}&quot;)\r\n                    .formParam(&quot;client_id&quot;, &quot;{YOUR_CLIENT_ID}&quot;)\r\n                    .formParam(&quot;client_secret&quot;, &quot;{YOUR_SECRET}&quot;)\r\n                    .formParam(&quot;grant_type&quot;, &quot;client_credentials&quot;)\r\n                    .formParam(&quot;{ANY_OTHER_TOKEN_NAME}&quot;, &quot;{TOKEN_VALUE}&quot;)\r\n                    .formParam(&quot;redirect_uri&quot;, &quot;{http://take-me-here-next.com/api/endpoint}&quot;)\r\n                    \r\n                    .when().post(&quot;https://{YOUR_TOKEN_URL}/oauth2/v2.0/token&quot;)\r\n                    .then()\r\n                    .extract().path(&quot;access_token&quot;);\r\n            \r\n        }\r\n}\r\n\r\nsubstitute values within {} with your&#39;s\r\n","title":"How to write java code REST Assured code to get authorization token?","body":"<p>This should work -</p>\n<pre><code>public class AuthenticationUtils {\n\n    public static String generateOAuth2Token() {\n        return &quot;Bearer &quot;+RestAssured.given().auth().basic(&quot;{YOUR_USERNAME}&quot;, &quot;{YOUR_PASSWORD}&quot;)\n                .formParam(&quot;client_id&quot;, &quot;{YOUR_CLIENT_ID}&quot;)\n                .formParam(&quot;client_secret&quot;, &quot;{YOUR_SECRET}&quot;)\n                .formParam(&quot;grant_type&quot;, &quot;client_credentials&quot;)\n                .formParam(&quot;{ANY_OTHER_TOKEN_NAME}&quot;, &quot;{TOKEN_VALUE}&quot;)\n                .formParam(&quot;redirect_uri&quot;, &quot;{http://take-me-here-next.com/api/endpoint}&quot;)\n                \n                .when().post(&quot;https://{YOUR_TOKEN_URL}/oauth2/v2.0/token&quot;)\n                .then()\n                .extract().path(&quot;access_token&quot;);\n        \n    }\n</code></pre>\n<p>}</p>\n<p>substitute values within {} with your's</p>\n"},{"tags":[],"owner":{"account_id":15566835,"reputation":11,"user_id":11230314,"display_name":"Vikas Mishra"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646228536,"creation_date":1646228536,"answer_id":71323740,"question_id":58863261,"body_markdown":"Grant type in question posted is Authrization code but everyone replied for client credential","title":"How to write java code REST Assured code to get authorization token?","body":"<p>Grant type in question posted is Authrization code but everyone replied for client credential</p>\n"}],"owner":{"account_id":2039595,"reputation":99,"user_id":1821127,"display_name":"Dragan Stanisavljevic"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":4362,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":5,"score":0,"last_activity_date":1646228536,"creation_date":1573754858,"question_id":58863261,"body_markdown":"I need to create tests using RestAssured - Java for testing REST API. In order to get an authentication token (OAuth 2.0), I need to send from postman request filled as in the screen below. However, in java tests, I can not use postman. Any idea how it should look like java code to get authentication token? \r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/yajt1.png","title":"How to write java code REST Assured code to get authorization token?","body":"<p>I need to create tests using RestAssured - Java for testing REST API. In order to get an authentication token (OAuth 2.0), I need to send from postman request filled as in the screen below. However, in java tests, I can not use postman. Any idea how it should look like java code to get authentication token? </p>\n\n<p><a href=\"https://i.stack.imgur.com/yajt1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yajt1.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":231683,"reputation":4218,"user_id":496038,"display_name":"pringi"},"score":0,"creation_date":1646229088,"post_id":71323736,"comment_id":126070981,"body_markdown":"Does this answer your question? [Inserting into Sorted LinkedList Java](https://stackoverflow.com/questions/18144820/inserting-into-sorted-linkedlist-java)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/18144820/inserting-into-sorted-linkedlist-java\">Inserting into Sorted LinkedList Java</a>"},{"owner":{"account_id":24204483,"reputation":13,"user_id":18161888,"display_name":"Zagamania"},"score":0,"creation_date":1646230295,"post_id":71323736,"comment_id":126071481,"body_markdown":"@pringi Sorry, it does not help","body":"@pringi Sorry, it does not help"},{"owner":{"account_id":4629221,"reputation":2621,"user_id":3752185,"display_name":"Janar"},"score":0,"creation_date":1646230501,"post_id":71323736,"comment_id":126071568,"body_markdown":"what exactly are you having a problem with? seems like the posted link should answer the question","body":"what exactly are you having a problem with? seems like the posted link should answer the question"}],"owner":{"account_id":24204483,"reputation":13,"user_id":18161888,"display_name":"Zagamania"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1646228524,"creation_date":1646228524,"question_id":71323736,"body_markdown":"**My idea was to create a &quot;For&quot; loop right after the &quot;if&quot; statement where &quot;basket != null&quot;, in that way trying to add that prices are in ascending order, but have been trying for some time and still no results. I had to create class names string in t and double as private ones, so there is no misunderstanding.**\r\n   \r\n\r\npublic static void add (Hash Map&lt;String, Linked List&lt;Product&gt;&gt; order) {\r\n\t\tLinked List&lt;Product&gt; basket;\r\n\r\n\t\tSystem. out. print(&quot;clients ID: &quot;);\r\n\t\tString id = sc. next();\r\n\t\tProduct p = Product. input Product(s c);\r\n\t\tbasket = order. get(id);\r\n\t\tif (basket != null) {\r\n\t\t\tbasket. add(p);\r\n\t\t} else {\r\n\t\t\tbasket = new Linked List&lt;Product&gt;();\r\n\t\t\tbasket. add(p);\r\n\t\t\torder. put(id, basket);\r\n\t\t\r\n\r\n\r\n    \r\n    \t\r\n    \r\n     ","title":"How to create a sequence by using LinkedList and Hashmap in the class &quot;add&quot; that all the prices of the products are in ascending order?","body":"<p><strong>My idea was to create a &quot;For&quot; loop right after the &quot;if&quot; statement where &quot;basket != null&quot;, in that way trying to add that prices are in ascending order, but have been trying for some time and still no results. I had to create class names string in t and double as private ones, so there is no misunderstanding.</strong></p>\n<p>public static void add (Hash Map&lt;String, Linked List&gt; order) {\nLinked List basket;</p>\n<pre><code>    System. out. print(&quot;clients ID: &quot;);\n    String id = sc. next();\n    Product p = Product. input Product(s c);\n    basket = order. get(id);\n    if (basket != null) {\n        basket. add(p);\n    } else {\n        basket = new Linked List&lt;Product&gt;();\n        basket. add(p);\n        order. put(id, basket);\n    \n\n\n\n    \n\n \n</code></pre>\n"},{"tags":["java","json"],"comments":[{"owner":{"account_id":1387645,"reputation":7926,"user_id":1319284,"accept_rate":69,"display_name":"kutschkem"},"score":0,"creation_date":1646223449,"post_id":71322446,"comment_id":126068860,"body_markdown":"What is JSON_MAPPER? Out of all the code, the only interesting one for the question seems to be `JSON_MAPPER.writeValue(scoreFile, scores);` but is badly explained.","body":"What is JSON_MAPPER? Out of all the code, the only interesting one for the question seems to be <code>JSON_MAPPER.writeValue(scoreFile, scores);</code> but is badly explained."},{"owner":{"account_id":13115303,"reputation":1248,"user_id":9474700,"display_name":"behrad"},"score":0,"creation_date":1646224136,"post_id":71322446,"comment_id":126069100,"body_markdown":"where did you define JSON_MAPPER?","body":"where did you define JSON_MAPPER?"},{"owner":{"account_id":9537825,"reputation":1490,"user_id":7275056,"display_name":"vsfDawg"},"score":0,"creation_date":1646224671,"post_id":71322446,"comment_id":126069296,"body_markdown":"Code is incomplete.  The method `writeFile()` uses three undefined variables: JSON_MAPPER, scorefile, scores.  Please include full stacktrace and indicate where it is being thrown.","body":"Code is incomplete.  The method <code>writeFile()</code> uses three undefined variables: JSON_MAPPER, scorefile, scores.  Please include full stacktrace and indicate where it is being thrown."},{"owner":{"account_id":2819940,"reputation":12538,"user_id":2423906,"accept_rate":100,"display_name":"SedJ601"},"score":0,"creation_date":1651257095,"post_id":71322446,"comment_id":127329647,"body_markdown":"I would suggest you not try any answer posted so far. Please look into a Java JSON API. I think Java offers one, but there are two that are popular. `Jackson`, which I do not like, and `GSON`, which I love. I would suggest researching one of these and using one in your application. There is a chance you will run into pitfalls if you use any answer posted so far.","body":"I would suggest you not try any answer posted so far. Please look into a Java JSON API. I think Java offers one, but there are two that are popular. <code>Jackson</code>, which I do not like, and <code>GSON</code>, which I love. I would suggest researching one of these and using one in your application. There is a chance you will run into pitfalls if you use any answer posted so far."}],"answers":[{"tags":[],"owner":{"account_id":10519995,"reputation":109,"user_id":7752882,"display_name":"Awais Rashid"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646228213,"creation_date":1646228213,"answer_id":71323657,"question_id":71322446,"body_markdown":"We can do something like this\r\n\r\n    public class Main {\r\n    private final String FILE_PATH = &quot;/tmp/scores.json&quot;;\r\n\r\n    public static void main(String[] args) {\r\n        new Main();\r\n    }\r\n\r\n    public Main() {\r\n        toJson();\r\n        fromJson();\r\n    }\r\n\r\n    private void toJson() {\r\n        ObjectMapper objectMapper = new ObjectMapper();\r\n\r\n        Scores scores1 = new Scores(1, &quot;Game-1&quot;, &quot;1&quot;);\r\n        Scores scores2 = new Scores(2, &quot;Game-2&quot;, &quot;2&quot;);\r\n\r\n        try {\r\n            new ObjectMapper().writeValue(new File(FILE_PATH), List.of(scores1, scores2));\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n    private void fromJson() {\r\n        try {\r\n            var scores = new ObjectMapper().readValue(new File(FILE_PATH), List.class);\r\n            System.out.println(scores);\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n    public class Scores {\r\n\r\n        private int gameMode;\r\n        private String name;\r\n        private String score;\r\n\r\n        public Scores(int gameMode, String name, String score) {\r\n            this.gameMode = gameMode;\r\n            this.name = name;\r\n            this.score = score;\r\n        }\r\n\r\n        public int getGameMode() {\r\n            return gameMode;\r\n        }\r\n\r\n        public String getName() {\r\n            return name;\r\n        }\r\n\r\n        public String getScore() {\r\n            return score;\r\n        }\r\n\r\n        @Override\r\n        public String toString() {\r\n            return &quot;Scores{&quot; +\r\n                    &quot;gameMode=&quot; + gameMode +\r\n                    &quot;, name=&#39;&quot; + name + &#39;\\&#39;&#39; +\r\n                    &quot;, score=&#39;&quot; + score + &#39;\\&#39;&#39; +\r\n                    &#39;}&#39;;\r\n        }\r\n    }\r\n}","title":"Save Arraylist of Objects into Json File","body":"<p>We can do something like this</p>\n<pre><code>public class Main {\nprivate final String FILE_PATH = &quot;/tmp/scores.json&quot;;\n\npublic static void main(String[] args) {\n    new Main();\n}\n\npublic Main() {\n    toJson();\n    fromJson();\n}\n\nprivate void toJson() {\n    ObjectMapper objectMapper = new ObjectMapper();\n\n    Scores scores1 = new Scores(1, &quot;Game-1&quot;, &quot;1&quot;);\n    Scores scores2 = new Scores(2, &quot;Game-2&quot;, &quot;2&quot;);\n\n    try {\n        new ObjectMapper().writeValue(new File(FILE_PATH), List.of(scores1, scores2));\n    } catch (IOException e) {\n        e.printStackTrace();\n    }\n}\n\nprivate void fromJson() {\n    try {\n        var scores = new ObjectMapper().readValue(new File(FILE_PATH), List.class);\n        System.out.println(scores);\n    } catch (IOException e) {\n        e.printStackTrace();\n    }\n}\n\npublic class Scores {\n\n    private int gameMode;\n    private String name;\n    private String score;\n\n    public Scores(int gameMode, String name, String score) {\n        this.gameMode = gameMode;\n        this.name = name;\n        this.score = score;\n    }\n\n    public int getGameMode() {\n        return gameMode;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public String getScore() {\n        return score;\n    }\n\n    @Override\n    public String toString() {\n        return &quot;Scores{&quot; +\n                &quot;gameMode=&quot; + gameMode +\n                &quot;, name='&quot; + name + '\\'' +\n                &quot;, score='&quot; + score + '\\'' +\n                '}';\n    }\n}\n</code></pre>\n<p>}</p>\n"}],"owner":{"display_name":"user17174904"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1260,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1646228213,"creation_date":1646222934,"question_id":71322446,"body_markdown":"I want to save Scores into a JSON File. I wanted to make it like that:\r\nI save my data into a class, which is placed into a ArrayList. So that I can just load my scores from the JSON File when I start my game.\r\n\r\n```\r\npackage at.htlhl.javafxtetris.externLogic;\r\n\r\npublic class Scores {\r\n\r\n    int gameMode;\r\n    String name;\r\n    String score;\r\n\r\n    public Scores(int gameMode, String name, String score){\r\n        this.gameMode = gameMode;\r\n        this.name = name;\r\n        this.score = score;\r\n    }\r\n\r\n    public int getGameMode() {\r\n        return gameMode;\r\n    }\r\n\r\n    public String getName() {\r\n        return name;\r\n    }\r\n\r\n    public String getScore() {\r\n        return score;\r\n    }\r\n}\r\n\r\npublic void writeFile(){\r\n\r\n    System.out.println(&quot;File wird geschrieben&quot;);\r\n\r\n\r\n    scoreFile = new File(MODEL_FILE_PATH);\r\n    if(!scoreFile.exists()){\r\n        scoreFile.mkdir();\r\n    }\r\n\r\n\r\n    try {\r\n        JSON_MAPPER.writeValue(scoreFile, scores);\r\n        // or JSON_MAPPER.writerWithDefaultPrettyPrinter().writeValue(scoreFile, scores);\r\n    } catch (IOException e) {\r\n        e.printStackTrace();\r\n    }\r\n\r\n\r\n}\r\n\r\n```\r\nBut when I try it, I get this \r\n\r\n    invaliddefinitionexception","title":"Save Arraylist of Objects into Json File","body":"<p>I want to save Scores into a JSON File. I wanted to make it like that:\nI save my data into a class, which is placed into a ArrayList. So that I can just load my scores from the JSON File when I start my game.</p>\n<pre><code>package at.htlhl.javafxtetris.externLogic;\n\npublic class Scores {\n\n    int gameMode;\n    String name;\n    String score;\n\n    public Scores(int gameMode, String name, String score){\n        this.gameMode = gameMode;\n        this.name = name;\n        this.score = score;\n    }\n\n    public int getGameMode() {\n        return gameMode;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public String getScore() {\n        return score;\n    }\n}\n\npublic void writeFile(){\n\n    System.out.println(&quot;File wird geschrieben&quot;);\n\n\n    scoreFile = new File(MODEL_FILE_PATH);\n    if(!scoreFile.exists()){\n        scoreFile.mkdir();\n    }\n\n\n    try {\n        JSON_MAPPER.writeValue(scoreFile, scores);\n        // or JSON_MAPPER.writerWithDefaultPrettyPrinter().writeValue(scoreFile, scores);\n    } catch (IOException e) {\n        e.printStackTrace();\n    }\n\n\n}\n\n</code></pre>\n<p>But when I try it, I get this</p>\n<pre><code>invaliddefinitionexception\n</code></pre>\n"},{"tags":["java","android","android-studio","soundpool"],"answers":[{"tags":[],"owner":{"account_id":5282904,"reputation":18287,"user_id":4217682,"accept_rate":50,"display_name":"snachmsm"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1646224062,"creation_date":1646224062,"answer_id":71322703,"question_id":71322571,"body_markdown":"set up `setOnLoadCompleteListener` BEFORE `load` call (which should use `sampleId`, as `game_over` may be not assigned yet)\r\n\r\n    soundPool.setOnLoadCompleteListener(new SoundPool.OnLoadCompleteListener() {\r\n        @Override\r\n        public void onLoadComplete(SoundPool soundPool, int sampleId, int status) {\r\n            soundPool.play(sampleId, 1, 1, 1, 1, 1f);\r\n        }\r\n    });\r\n    game_over = soundPool.load(this, R.raw.test, 1);\r\n\r\nafaik all `load` methods of `SoundPool` are synchronous -  they are returning ID of already loaded audio file. setting `OnLoadCompleteListener` AFTER loading audio will cause no call for this listener, as there is nothing more to load","title":"Soundpool is not playing any sound","body":"<p>set up <code>setOnLoadCompleteListener</code> BEFORE <code>load</code> call (which should use <code>sampleId</code>, as <code>game_over</code> may be not assigned yet)</p>\n<pre><code>soundPool.setOnLoadCompleteListener(new SoundPool.OnLoadCompleteListener() {\n    @Override\n    public void onLoadComplete(SoundPool soundPool, int sampleId, int status) {\n        soundPool.play(sampleId, 1, 1, 1, 1, 1f);\n    }\n});\ngame_over = soundPool.load(this, R.raw.test, 1);\n</code></pre>\n<p>afaik all <code>load</code> methods of <code>SoundPool</code> are synchronous -  they are returning ID of already loaded audio file. setting <code>OnLoadCompleteListener</code> AFTER loading audio will cause no call for this listener, as there is nothing more to load</p>\n"},{"tags":[],"owner":{"account_id":21558009,"reputation":58,"user_id":15892949,"display_name":"Inomie"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646228166,"creation_date":1646228166,"answer_id":71323641,"question_id":71322571,"body_markdown":"This code is now working. Why it was not playing on my phone was because it was using the system volume and not the music volume. Hope this will help someone else in the future.","title":"Soundpool is not playing any sound","body":"<p>This code is now working. Why it was not playing on my phone was because it was using the system volume and not the music volume. Hope this will help someone else in the future.</p>\n"}],"owner":{"account_id":21558009,"reputation":58,"user_id":15892949,"display_name":"Inomie"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":136,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71322703,"answer_count":2,"score":0,"last_activity_date":1646228166,"creation_date":1646223467,"question_id":71322571,"body_markdown":"Im trying to make soundpool work because I need to use it for a prodject. The problem is that it&#39;s not playing any sound. Im just trying to play a test sound to see if it works. Hope someone can see what im doing wrong here.\r\n\r\n    public class MainActivity extends AppCompatActivity {\r\n\r\n    SoundPool soundPool;\r\n    int game_over;\r\n\r\n    @Override\r\n    protected void onCreate(\r\n            Bundle savedInstanceState)\r\n    {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP) {\r\n            AudioAttributes audioAttributes = new AudioAttributes\r\n                    .Builder()\r\n                    .setUsage(AudioAttributes.USAGE_ASSISTANCE_SONIFICATION)\r\n                    .setContentType(AudioAttributes.CONTENT_TYPE_SONIFICATION)\r\n                    .build();\r\n            soundPool = new SoundPool\r\n                    .Builder()\r\n                    .setMaxStreams(4)\r\n                    .setAudioAttributes(audioAttributes)\r\n                    .build();\r\n        }\r\n        \r\n        game_over = soundPool.load(this, R.raw.test, 1);\r\n        soundPool.setOnLoadCompleteListener(new SoundPool.OnLoadCompleteListener() {\r\n            @Override\r\n            public void onLoadComplete(SoundPool soundPool, int sampleId, int status) {\r\n                soundPool.play(game_over, 1, 1, 1, 1, 1f);\r\n            }\r\n        });\r\n    }\r\n}","title":"Soundpool is not playing any sound","body":"<p>Im trying to make soundpool work because I need to use it for a prodject. The problem is that it's not playing any sound. Im just trying to play a test sound to see if it works. Hope someone can see what im doing wrong here.</p>\n<pre><code>public class MainActivity extends AppCompatActivity {\n\nSoundPool soundPool;\nint game_over;\n\n@Override\nprotected void onCreate(\n        Bundle savedInstanceState)\n{\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_main);\n\n    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP) {\n        AudioAttributes audioAttributes = new AudioAttributes\n                .Builder()\n                .setUsage(AudioAttributes.USAGE_ASSISTANCE_SONIFICATION)\n                .setContentType(AudioAttributes.CONTENT_TYPE_SONIFICATION)\n                .build();\n        soundPool = new SoundPool\n                .Builder()\n                .setMaxStreams(4)\n                .setAudioAttributes(audioAttributes)\n                .build();\n    }\n    \n    game_over = soundPool.load(this, R.raw.test, 1);\n    soundPool.setOnLoadCompleteListener(new SoundPool.OnLoadCompleteListener() {\n        @Override\n        public void onLoadComplete(SoundPool soundPool, int sampleId, int status) {\n            soundPool.play(game_over, 1, 1, 1, 1, 1f);\n        }\n    });\n}\n</code></pre>\n<p>}</p>\n"},{"tags":["java","java-stream","collectors"],"comments":[{"owner":{"account_id":18243171,"reputation":19300,"user_id":13279831,"display_name":"Nowhere Man"},"score":0,"creation_date":1646227660,"post_id":71323085,"comment_id":126070380,"body_markdown":"What do you mean by _summarizing_ the `data` column?","body":"What do you mean by <i>summarizing</i> the <code>data</code> column?"},{"owner":{"account_id":15839392,"reputation":565,"user_id":13189473,"display_name":"MrNobody"},"score":0,"creation_date":1646227885,"post_id":71323085,"comment_id":126070470,"body_markdown":"Summarizing the data means that each entry&#39;s `data` is written to a ByteArrayOutputStream until the limit is reached. To be more precise                     `storedData.write(entry.getData());` this line does this job. So for example we have entry1 with a byte array [1,2,3] and entry2 with byte array [3,4,5] then it will be sumamrzied in storedData as [1,2,3,4,5]. And when this storedData has reached the limit it will become a quartet (chunk) which contains the summarized data/timestamps/ids and it will be processed.","body":"Summarizing the data means that each entry&#39;s <code>data</code> is written to a ByteArrayOutputStream until the limit is reached. To be more precise                     <code>storedData.write(entry.getData());</code> this line does this job. So for example we have entry1 with a byte array [1,2,3] and entry2 with byte array [3,4,5] then it will be sumamrzied in storedData as [1,2,3,4,5]. And when this storedData has reached the limit it will become a quartet (chunk) which contains the summarized data/timestamps/ids and it will be processed."},{"owner":{"account_id":249169,"reputation":19388,"user_id":525036,"accept_rate":25,"display_name":"Didier L"},"score":0,"creation_date":1646242030,"post_id":71323085,"comment_id":126076574,"body_markdown":"I dont think this implementation should be slow, but collectors are not really designed for that use case: a collector should be used to aggregate the data, not to send it to some external sink (hence also this weird usage of a list of only 1 element that gets replace after each processing). Note that if you have 350k entries, and each entry only has 1 byte, 20kb chunks will already give you 18 chunks. If entries are bigger (e.g. 1kb) that could create a lot of chunks already. Also, are you sure it isnt the `process()` method that is slow? Try replacing it with a no-op maybe.","body":"I dont think this implementation should be slow, but collectors are not really designed for that use case: a collector should be used to aggregate the data, not to send it to some external sink (hence also this weird usage of a list of only 1 element that gets replace after each processing). Note that if you have 350k entries, and each entry only has 1 byte, 20kb chunks will already give you 18 chunks. If entries are bigger (e.g. 1kb) that could create a lot of chunks already. Also, are you sure it isnt the <code>process()</code> method that is slow? Try replacing it with a no-op maybe."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1646244356,"post_id":71323085,"comment_id":126077421,"body_markdown":"`new Date(entry.getTimestamp())` appears *six times* in the code. This is already bad quality from source code perspective, but also a waste of resources. Why not keep the `long` returned by `entry.getTimestamp()` and only use that `long`? Likewise, `new ArrayList&lt;&gt;(Arrays.asList(entry.getId()))` (learn about `Collections.singletonList()`) But also this dealing with `ByteArrayOutputStream` implies lots of unnecessary data copying.","body":"<code>new Date(entry.getTimestamp())</code> appears <i>six times</i> in the code. This is already bad quality from source code perspective, but also a waste of resources. Why not keep the <code>long</code> returned by <code>entry.getTimestamp()</code> and only use that <code>long</code>? Likewise, <code>new ArrayList&lt;&gt;(Arrays.asList(entry.getId()))</code> (learn about <code>Collections.singletonList()</code>) But also this dealing with <code>ByteArrayOutputStream</code> implies lots of unnecessary data copying."},{"owner":{"account_id":15839392,"reputation":565,"user_id":13189473,"display_name":"MrNobody"},"score":0,"creation_date":1646301590,"post_id":71323085,"comment_id":126091258,"body_markdown":"@Didler 100% that not the process method is the time consumer, I thought about the same at first so I replaced the method call with a log.info, but same results. I agree with you I think it&#39;s the collector fault, but I am still not sure what I should replace it with.\n\nA good article about this: https://www.daniellas.tech/posts/speed-of-stream.html","body":"@Didler 100% that not the process method is the time consumer, I thought about the same at first so I replaced the method call with a log.info, but same results. I agree with you I think it&#39;s the collector fault, but I am still not sure what I should replace it with.  A good article about this: <a href=\"https://www.daniellas.tech/posts/speed-of-stream.html\" rel=\"nofollow noreferrer\">daniellas.tech/posts/speed-of-stream.html</a>"},{"owner":{"account_id":15839392,"reputation":565,"user_id":13189473,"display_name":"MrNobody"},"score":0,"creation_date":1646301595,"post_id":71323085,"comment_id":126091261,"body_markdown":"@Holger I agree there are redundant things which could be done better as you mentioned, I will correct them. However I do not think that these solutions justify this excessive processing time. But thank you for your observations","body":"@Holger I agree there are redundant things which could be done better as you mentioned, I will correct them. However I do not think that these solutions justify this excessive processing time. But thank you for your observations"}],"owner":{"account_id":15839392,"reputation":565,"user_id":13189473,"display_name":"MrNobody"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":178,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1646227639,"creation_date":1646225787,"question_id":71323085,"body_markdown":"I&#39;ve got a university assignment, but my solution&#39;s performance is not good enough so I would like to know how to improve it. I would like to say in advance that I am very new in functional Java programming/streams and my solution is quite basic IMHO.\r\n\r\nThe dataset: I have a large amount of entries around 350k+. Each entry contains a `data` column which is a byte array and stores some dummy string data, a `timestamp` which indicates the date of addition and the `id` of the entry. The entries are queried with Spring Data JPA Stream.\r\n\r\nThe entry&#39;s model:\r\n```java\r\npublic class Entry {\r\n   private long id;\r\n   private long timeStamp;\r\n   private byte[] data;\r\n}\r\n```\r\n\r\nThe problem: The `data` column of each entry has to be summed up to a given `data size limit`, when the limit is reached I have to make a chunk out of the collected data. A chunk must contain: the collected data, the ID of all processed entries, the earliest and latest entry&#39;s timestamp which is present in a chunk.\r\n\r\nAn example: Lets say we have a data size limit `20kb`. The database contains 350k entries, and if we summarize the `data` of all entries we get `100kb`. So in this case we have to make 5 chunks of 20kb. Each chunk should contain 20kb data, the processed entries and the the earliest and latest timestamp of entries in the chunk.\r\n\r\nMy solution: The accumulator is a list with 1 element which is a quartet of: earliest timestamp, latest timestamp, the collected data, and the processed entries ids. When the accumulated data size has reached the specified limit we call a `process` method to process that one chunk and we reinitialize the accumulator for the new chunk processing. If it is not reached we just write the current entry&#39;s data into the stored data ByteArrayOutputStream and we continue with processing of entries. \r\n\r\nThe last chunk of data will be processed after the collect function individually.\r\n\r\n```java\r\nprivate Collector&lt;Entry,  List&lt;Quartet&lt;Date, Date, ByteArrayOutputStream, List&lt;Long&gt;&gt;&gt;,  List&lt;Quartet&lt;Date, Date, ByteArrayOutputStream, List&lt;Long&gt;&gt;&gt;&gt; myCustomCollector (int limit) {\r\n\treturn Collector.of(\r\n\t\t\tArrayList::new,\r\n\t\t\t(accumulatorList, entry) -&gt; {\r\n\t\t\t\tif(accumulatorList.isEmpty()) {\r\n\t\t\t\t\taccumulatorList.add(Quartet.with(new Date(entry.getTimestamp()), new Date(entry.getTimestamp()), new ByteArrayOutputStream(limit), new ArrayList&lt;&gt;(Arrays.asList(entry.getId()))));\r\n\t\t\t\t} else {\r\n\t\t\t\t\tByteArrayOutputStream storedData=accumulatorList.get(0).getValue2();\r\n\r\n\t\t\t\t\tif(storedData.size() + entry.getData().length &lt; limit) {\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\tstoredData.write(entry.getData());\r\n\r\n\t\t\t\t\t\t\tDate earliest=accumulatorList.get(0).getValue0();\r\n\t\t\t\t\t\t\tDate latest=accumulatorList.get(0).getValue1();\r\n\t\t\t\t\t\t\tList&lt;Long&gt; containedIds= new ArrayList&lt;&gt;(accumulatorList.get(0).getValue3());\r\n\r\n\t\t\t\t\t\t\tearliest = entry.getTimestamp() &lt; earliest.getTime() ? new Date(entry.getTimestamp()) : earliest;\r\n\t\t\t\t\t\t\tlatest = entry.getTimestamp() &gt; latest.getTime() ? new Date(entry.getTimestamp()) : latest;\r\n\t\t\t\t\t\t\tcontainedIds.add(entry.getId());\r\n\t\t\t\t\t\t\taccumulatorList.set(0,Quartet.with(earliest,latest,storedData,containedIds));\r\n\t\t\t\t\t\t} catch (IOException e) {\r\n\t\t\t\t\t\t    e.printStackTrace();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// process the elements in the chunk\r\n\t\t\t\t\t\tprocess(accumulatorList.get(0));\r\n\t\t\t\t\t\taccumulatorList.set(0, Quartet.with(new Date(entry.getTimestamp()), new Date(entry.getTimestamp()), new ByteArrayOutputStream(limit), new ArrayList&lt;&gt;(Arrays.asList(entry.getId()))));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t(finalList,accList) -&gt; {\r\n\t\t\t\tfinalList.addAll(accList);\r\n\t\t\t\treturn finalList;\r\n\t\t\t}\r\n\t);\r\n}\r\n```\r\n\r\n\r\nThe question: This solution works fast for small number of entries, but with large numbers as 350k+ it runs around 5-6 minutes. So my question is why is that and how can I improve the performance? Additionally, can I achieve the same result with the stream processing functions, and how? It would have a better performance than a custom collector? (I felt that my task is quite complex with a lot of summarizing/comparing for using lambdas)\r\n\r\n","title":"Why is a custom collector processing very slow at large number of entries?","body":"<p>I've got a university assignment, but my solution's performance is not good enough so I would like to know how to improve it. I would like to say in advance that I am very new in functional Java programming/streams and my solution is quite basic IMHO.</p>\n<p>The dataset: I have a large amount of entries around 350k+. Each entry contains a <code>data</code> column which is a byte array and stores some dummy string data, a <code>timestamp</code> which indicates the date of addition and the <code>id</code> of the entry. The entries are queried with Spring Data JPA Stream.</p>\n<p>The entry's model:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Entry {\n   private long id;\n   private long timeStamp;\n   private byte[] data;\n}\n</code></pre>\n<p>The problem: The <code>data</code> column of each entry has to be summed up to a given <code>data size limit</code>, when the limit is reached I have to make a chunk out of the collected data. A chunk must contain: the collected data, the ID of all processed entries, the earliest and latest entry's timestamp which is present in a chunk.</p>\n<p>An example: Lets say we have a data size limit <code>20kb</code>. The database contains 350k entries, and if we summarize the <code>data</code> of all entries we get <code>100kb</code>. So in this case we have to make 5 chunks of 20kb. Each chunk should contain 20kb data, the processed entries and the the earliest and latest timestamp of entries in the chunk.</p>\n<p>My solution: The accumulator is a list with 1 element which is a quartet of: earliest timestamp, latest timestamp, the collected data, and the processed entries ids. When the accumulated data size has reached the specified limit we call a <code>process</code> method to process that one chunk and we reinitialize the accumulator for the new chunk processing. If it is not reached we just write the current entry's data into the stored data ByteArrayOutputStream and we continue with processing of entries.</p>\n<p>The last chunk of data will be processed after the collect function individually.</p>\n<pre class=\"lang-java prettyprint-override\"><code>private Collector&lt;Entry,  List&lt;Quartet&lt;Date, Date, ByteArrayOutputStream, List&lt;Long&gt;&gt;&gt;,  List&lt;Quartet&lt;Date, Date, ByteArrayOutputStream, List&lt;Long&gt;&gt;&gt;&gt; myCustomCollector (int limit) {\n    return Collector.of(\n            ArrayList::new,\n            (accumulatorList, entry) -&gt; {\n                if(accumulatorList.isEmpty()) {\n                    accumulatorList.add(Quartet.with(new Date(entry.getTimestamp()), new Date(entry.getTimestamp()), new ByteArrayOutputStream(limit), new ArrayList&lt;&gt;(Arrays.asList(entry.getId()))));\n                } else {\n                    ByteArrayOutputStream storedData=accumulatorList.get(0).getValue2();\n\n                    if(storedData.size() + entry.getData().length &lt; limit) {\n                        try {\n                            storedData.write(entry.getData());\n\n                            Date earliest=accumulatorList.get(0).getValue0();\n                            Date latest=accumulatorList.get(0).getValue1();\n                            List&lt;Long&gt; containedIds= new ArrayList&lt;&gt;(accumulatorList.get(0).getValue3());\n\n                            earliest = entry.getTimestamp() &lt; earliest.getTime() ? new Date(entry.getTimestamp()) : earliest;\n                            latest = entry.getTimestamp() &gt; latest.getTime() ? new Date(entry.getTimestamp()) : latest;\n                            containedIds.add(entry.getId());\n                            accumulatorList.set(0,Quartet.with(earliest,latest,storedData,containedIds));\n                        } catch (IOException e) {\n                            e.printStackTrace();\n                        }\n                    } else {\n                        // process the elements in the chunk\n                        process(accumulatorList.get(0));\n                        accumulatorList.set(0, Quartet.with(new Date(entry.getTimestamp()), new Date(entry.getTimestamp()), new ByteArrayOutputStream(limit), new ArrayList&lt;&gt;(Arrays.asList(entry.getId()))));\n                    }\n                }\n            },\n            (finalList,accList) -&gt; {\n                finalList.addAll(accList);\n                return finalList;\n            }\n    );\n}\n</code></pre>\n<p>The question: This solution works fast for small number of entries, but with large numbers as 350k+ it runs around 5-6 minutes. So my question is why is that and how can I improve the performance? Additionally, can I achieve the same result with the stream processing functions, and how? It would have a better performance than a custom collector? (I felt that my task is quite complex with a lot of summarizing/comparing for using lambdas)</p>\n"},{"tags":["java","tomcat","servlets","apache-tomee","java-ee-8"],"comments":[{"owner":{"account_id":3340852,"reputation":1493,"user_id":2807177,"display_name":"gmanjon"},"score":1,"creation_date":1640168043,"post_id":70443374,"comment_id":124529766,"body_markdown":"This is not a duplicate. This question is about decoupling business layer (EJB) and front layer (Servlets). The referenced duplicate is about show messages in presentation layer (jsp).","body":"This is not a duplicate. This question is about decoupling business layer (EJB) and front layer (Servlets). The referenced duplicate is about show messages in presentation layer (jsp)."},{"owner":{"account_id":13009853,"reputation":395,"user_id":9403279,"display_name":"cidra"},"score":0,"creation_date":1640430034,"post_id":70443374,"comment_id":124586483,"body_markdown":"@gmanjon all questions on SO are seen as either duplicates or XY problems by many people","body":"@gmanjon all questions on SO are seen as either duplicates or XY problems by many people"}],"answers":[{"tags":[],"owner":{"account_id":4809624,"reputation":3467,"user_id":3883475,"accept_rate":85,"display_name":"Ironluca"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1640151884,"creation_date":1640151884,"answer_id":70444718,"question_id":70443374,"body_markdown":"Your question relates more to design approach rather than implementation, therefore it can have more than one answer. However, in your context of 3-tier application one you are following is:\r\n\r\nJSP (client browser) --&gt; Servlet --&gt; EJB --&gt; Database\r\n\r\nWhich is traditionally used and a sound approach, from that perspective (and this is strictly my view), you can do the data validations in the servlet layer, preferably with a framework like Java Validation Framework. The interceptor approach would also be sound, servlet filters can be leveraged here to provide the validation.","title":"How can I pass errors from service layer to vanilla Java Servlets?","body":"<p>Your question relates more to design approach rather than implementation, therefore it can have more than one answer. However, in your context of 3-tier application one you are following is:</p>\n<p>JSP (client browser) --&gt; Servlet --&gt; EJB --&gt; Database</p>\n<p>Which is traditionally used and a sound approach, from that perspective (and this is strictly my view), you can do the data validations in the servlet layer, preferably with a framework like Java Validation Framework. The interceptor approach would also be sound, servlet filters can be leveraged here to provide the validation.</p>\n"}],"owner":{"account_id":13009853,"reputation":395,"user_id":9403279,"display_name":"cidra"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":97,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1640166046,"answer_count":1,"score":0,"last_activity_date":1646227555,"creation_date":1640137418,"question_id":70443374,"body_markdown":"I&#39;m currently using TomEE 8.0.8 WebProfile. I can&#39;t use Spring nor anything else besides what&#39;s included in TomEE.  \r\n\r\nI&#39;m trying to implement a 3 tier application. The application has already been implemented in a 2 tier way (Business logic is written in HTTPServlet classes, which call DAOs and then dispatch to .jsp files). I&#39;m having some difficulties trying not to tie up business logic with Servlet implementation details.  \r\n\r\n\r\n\r\nAll my service classes are Stateless EJB with methods which may take DTOs as parameters and return other DTOs as result.  \r\n\r\nThese service classes should return more than one error if needed (for example: bad length for attr 1, bad format for attr 2, empty attr 3): my idea was to create a custom Exception with a `List&lt;&gt;` of errors to throw from service layer. However, I don&#39;t know if this is approach is correct nor if there is some clean way to handle these exception on the controllers, without &quot;try/catch&quot; everywhere.  (Maybe an interceptor? Is it possible with vanilla servlets?)  ","title":"How can I pass errors from service layer to vanilla Java Servlets?","body":"<p>I'm currently using TomEE 8.0.8 WebProfile. I can't use Spring nor anything else besides what's included in TomEE.</p>\n<p>I'm trying to implement a 3 tier application. The application has already been implemented in a 2 tier way (Business logic is written in HTTPServlet classes, which call DAOs and then dispatch to .jsp files). I'm having some difficulties trying not to tie up business logic with Servlet implementation details.</p>\n<p>All my service classes are Stateless EJB with methods which may take DTOs as parameters and return other DTOs as result.</p>\n<p>These service classes should return more than one error if needed (for example: bad length for attr 1, bad format for attr 2, empty attr 3): my idea was to create a custom Exception with a <code>List&lt;&gt;</code> of errors to throw from service layer. However, I don't know if this is approach is correct nor if there is some clean way to handle these exception on the controllers, without &quot;try/catch&quot; everywhere.  (Maybe an interceptor? Is it possible with vanilla servlets?)</p>\n"},{"tags":["java","inheritance","static"],"comments":[{"owner":{"account_id":318397,"reputation":203598,"user_id":635608,"display_name":"Mat"},"score":0,"creation_date":1335244424,"post_id":10291949,"comment_id":13242733,"body_markdown":"http://stackoverflow.com/questions/4716040/does-subclasses-inherit-private-fields has interesting info.","body":"<a href=\"http://stackoverflow.com/questions/4716040/does-subclasses-inherit-private-fields\" title=\"does subclasses inherit private fields\">stackoverflow.com/questions/4716040/&hellip;</a> has interesting info."},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1429415914,"post_id":10291949,"comment_id":47585415,"body_markdown":"That&#39;s not what it says in my copy, 1st edition. Please provide an actual quotation.","body":"That&#39;s not what it says in my copy, 1st edition. Please provide an actual quotation."},{"owner":{"account_id":1455702,"reputation":15682,"user_id":1371329,"accept_rate":64,"display_name":"jaco0646"},"score":0,"creation_date":1460039971,"post_id":10291949,"comment_id":60569048,"body_markdown":"related: http://stackoverflow.com/questions/25169175/why-are-class-static-methods-inherited-but-not-interface-static-methods","body":"related: <a href=\"http://stackoverflow.com/questions/25169175/why-are-class-static-methods-inherited-but-not-interface-static-methods\" title=\"why are class static methods inherited but not interface static methods\">stackoverflow.com/questions/25169175/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":58517,"reputation":6414,"user_id":175156,"accept_rate":78,"display_name":"yincrash"},"down_vote_count":0,"up_vote_count":216,"is_accepted":true,"score":216,"last_activity_date":1561403809,"creation_date":1335244274,"answer_id":10292034,"question_id":10291949,"body_markdown":"All methods that are accessible are inherited by subclasses. \r\n\r\nFrom the Sun Java [Tutorials][1]:\r\n\r\n&gt; A subclass inherits all of the public and protected members of its parent, no matter what package the subclass is in. If the subclass is in the same package as its parent, it also inherits the package-private members of the parent. You can use the inherited members as is, replace them, hide them, or supplement them with new members\r\n\r\nThe only difference with inherited static (class) methods and inherited non-static (instance) methods is that when you write a new static method with the same signature, the old static method is just hidden, not overridden.\r\n\r\nFrom the [page][2] on the difference between overriding and hiding.  \r\n\r\n&gt; The distinction between hiding and overriding has important implications. The version of the overridden method that gets invoked is the one in the subclass. The version of the hidden method that gets invoked depends on whether it is invoked from the superclass or the subclass\r\n\r\n\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/tutorial/java/IandI/subclasses.html\r\n  [2]: http://docs.oracle.com/javase/tutorial/java/IandI/override.html","title":"Are static methods inherited in Java?","body":"<p>All methods that are accessible are inherited by subclasses. </p>\n\n<p>From the Sun Java <a href=\"http://docs.oracle.com/javase/tutorial/java/IandI/subclasses.html\" rel=\"noreferrer\">Tutorials</a>:</p>\n\n<blockquote>\n  <p>A subclass inherits all of the public and protected members of its parent, no matter what package the subclass is in. If the subclass is in the same package as its parent, it also inherits the package-private members of the parent. You can use the inherited members as is, replace them, hide them, or supplement them with new members</p>\n</blockquote>\n\n<p>The only difference with inherited static (class) methods and inherited non-static (instance) methods is that when you write a new static method with the same signature, the old static method is just hidden, not overridden.</p>\n\n<p>From the <a href=\"http://docs.oracle.com/javase/tutorial/java/IandI/override.html\" rel=\"noreferrer\">page</a> on the difference between overriding and hiding.  </p>\n\n<blockquote>\n  <p>The distinction between hiding and overriding has important implications. The version of the overridden method that gets invoked is the one in the subclass. The version of the hidden method that gets invoked depends on whether it is invoked from the superclass or the subclass</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":550810,"reputation":15344,"user_id":915484,"accept_rate":85,"display_name":"Kai"},"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1335244379,"creation_date":1335244379,"answer_id":10292043,"question_id":10291949,"body_markdown":"B.display() works because static declaration makes the method/member to belong to the class, and not any particular class instance (aka Object). You can read more about it [here][1].\r\n\r\nAnother thing to note is that you cannot override a static method, you can have your sub class declare a static method with the same signature, but its behavior may be different than what you&#39;d expect. This is probably the reason why it is not considered inherited. You can check out the problematic scenario and the explanation [here][2].\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html\r\n  [2]: http://geekexplains.blogspot.com/2008/06/can-you-override-static-methods-in-java.html","title":"Are static methods inherited in Java?","body":"<p>B.display() works because static declaration makes the method/member to belong to the class, and not any particular class instance (aka Object). You can read more about it <a href=\"http://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html\" rel=\"noreferrer\">here</a>.</p>\n\n<p>Another thing to note is that you cannot override a static method, you can have your sub class declare a static method with the same signature, but its behavior may be different than what you'd expect. This is probably the reason why it is not considered inherited. You can check out the problematic scenario and the explanation <a href=\"http://geekexplains.blogspot.com/2008/06/can-you-override-static-methods-in-java.html\" rel=\"noreferrer\">here</a>.</p>\n"},{"tags":[],"owner":{"account_id":3277687,"reputation":35,"user_id":2759187,"display_name":"Pavan"},"down_vote_count":6,"up_vote_count":4,"is_accepted":false,"score":-2,"last_activity_date":1378655187,"creation_date":1378655187,"answer_id":18685560,"question_id":10291949,"body_markdown":"Static members are universal members. They can be accessed from anywhere.","title":"Are static methods inherited in Java?","body":"<p>Static members are universal members. They can be accessed from anywhere.</p>\n"},{"tags":[],"owner":{"account_id":1937706,"reputation":1634,"user_id":1744745,"accept_rate":0,"display_name":"Praveen Kumar"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1403606373,"creation_date":1403606373,"answer_id":24384490,"question_id":10291949,"body_markdown":"Static methods are inherited in Java but they don&#39;t take part in polymorphism. If we attempt to override the static methods they will just hide the superclass static methods instead of overriding them. ","title":"Are static methods inherited in Java?","body":"<p>Static methods are inherited in Java but they don't take part in polymorphism. If we attempt to override the static methods they will just hide the superclass static methods instead of overriding them. </p>\n"},{"tags":[],"owner":{"account_id":4803026,"reputation":1,"user_id":3879069,"display_name":"shubham"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1429414862,"creation_date":1406351007,"answer_id":24967726,"question_id":10291949,"body_markdown":"All the public and protected members can be inherited from any class while the default or package members can also be inherited from the class within the same package as that of the superclass. It does not depend whether it is static or non static member.\r\n\r\nBut it is also true that static member function do not take part in dynamic binding. If the signature of that static method is same in both parent and child class then concept of Shadowing applies, not polymorphism.","title":"Are static methods inherited in Java?","body":"<p>All the public and protected members can be inherited from any class while the default or package members can also be inherited from the class within the same package as that of the superclass. It does not depend whether it is static or non static member.</p>\n\n<p>But it is also true that static member function do not take part in dynamic binding. If the signature of that static method is same in both parent and child class then concept of Shadowing applies, not polymorphism.</p>\n"},{"tags":[],"owner":{"account_id":4995718,"reputation":1,"user_id":4016405,"display_name":"user4016405"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1410090102,"creation_date":1410087678,"answer_id":25709488,"question_id":10291949,"body_markdown":"Static method is inherited in subclass but it is not polymorphism. When you writing the implementation of static method, the parent&#39;s class method is over hidden, not overridden. Think, if it is not inherited then how you can be able to access without `classname.staticMethodname();`?","title":"Are static methods inherited in Java?","body":"<p>Static method is inherited in subclass but it is not polymorphism. When you writing the implementation of static method, the parent's class method is over hidden, not overridden. Think, if it is not inherited then how you can be able to access without <code>classname.staticMethodname();</code>?</p>\n"},{"tags":[],"owner":{"account_id":4462709,"reputation":811,"user_id":3631077,"accept_rate":25,"display_name":"Gaurav"},"down_vote_count":3,"up_vote_count":32,"is_accepted":false,"score":29,"last_activity_date":1552049528,"creation_date":1416548841,"answer_id":27054897,"question_id":10291949,"body_markdown":"You can experience the difference in following code, which is slightly modification over your code.\r\n\r\n    class A {\r\n        public static void display() {\r\n            System.out.println(&quot;Inside static method of superclass&quot;);\r\n        }\r\n    }\r\n    \r\n    class B extends A {\r\n        public void show() {\r\n            display();\r\n        }\r\n    \r\n        public static void display() {\r\n            System.out.println(&quot;Inside static method of this class&quot;);\r\n        }\r\n    }\r\n    \r\n    public class Test {\r\n        public static void main(String[] args) {\r\n            B b = new B();\r\n            // prints: Inside static method of this class\r\n            b.display();\r\n    \r\n            A a = new B();\r\n            // prints: Inside static method of superclass\r\n            a.display();\r\n        }\r\n    }\r\n\r\nThis is due to static methods are class methods.\r\n\r\nA.display() and B.display() will call method of their respective classes.","title":"Are static methods inherited in Java?","body":"<p>You can experience the difference in following code, which is slightly modification over your code.</p>\n\n<pre><code>class A {\n    public static void display() {\n        System.out.println(\"Inside static method of superclass\");\n    }\n}\n\nclass B extends A {\n    public void show() {\n        display();\n    }\n\n    public static void display() {\n        System.out.println(\"Inside static method of this class\");\n    }\n}\n\npublic class Test {\n    public static void main(String[] args) {\n        B b = new B();\n        // prints: Inside static method of this class\n        b.display();\n\n        A a = new B();\n        // prints: Inside static method of superclass\n        a.display();\n    }\n}\n</code></pre>\n\n<p>This is due to static methods are class methods.</p>\n\n<p>A.display() and B.display() will call method of their respective classes.</p>\n"},{"tags":[],"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1429415937,"creation_date":1429415016,"answer_id":29725529,"question_id":10291949,"body_markdown":"If that&#39;s what the book really says, it&#39;s wrong.[1]\r\n\r\nThe [Java Language Specification #8.4.8](http://docs.oracle.com/javase/specs/jls/se8/html/jls-8.html#jls-8.4.8) states:\r\n\r\n&gt; # 8.4.8 Inheritance, Overriding, and Hiding\r\n&gt;\r\n&gt; A class C inherits from its direct superclass all concrete methods m (both static and instance) of the superclass for which all of the following are true:\r\n&gt;\r\n&gt; -    m is a member of the direct superclass of C.\r\n&gt;\r\n&gt;-    m is public, protected, or declared with package access in the same package as C.\r\n&gt;\r\n&gt;-    No method declared in C has a signature that is a subsignature (&#167;8.4.2) of the signature of m.\r\n\r\n[1] It doesn&#39;t say that in my copy, 1st edition, 2000.","title":"Are static methods inherited in Java?","body":"<p>If that's what the book really says, it's wrong.[1]</p>\n\n<p>The <a href=\"http://docs.oracle.com/javase/specs/jls/se8/html/jls-8.html#jls-8.4.8\" rel=\"noreferrer\">Java Language Specification #8.4.8</a> states:</p>\n\n<blockquote>\n  <h1>8.4.8 Inheritance, Overriding, and Hiding</h1>\n  \n  <p>A class C inherits from its direct superclass all concrete methods m (both static and instance) of the superclass for which all of the following are true:</p>\n  \n  <ul>\n  <li><p>m is a member of the direct superclass of C.</p></li>\n  <li><p>m is public, protected, or declared with package access in the same package as C.</p></li>\n  <li><p>No method declared in C has a signature that is a subsignature (8.4.2) of the signature of m.</p></li>\n  </ul>\n</blockquote>\n\n<p>[1] It doesn't say that in my copy, 1st edition, 2000.</p>\n"},{"tags":[],"owner":{"account_id":5671028,"reputation":9,"user_id":4485636,"display_name":"Manav Garekar"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1434637282,"creation_date":1430893966,"answer_id":30069188,"question_id":10291949,"body_markdown":"You can override static methods, but if you try to use polymorphism, then they work according to class scope(Contrary to what we normally expect).\r\n\r\n    public class A {\r\n    \r\n    \tpublic static void display(){\r\n    \t\tSystem.out.println(&quot;in static method of A&quot;);\r\n    \t}\r\n    }\r\n    \r\n    public class B extends A {\r\n    \r\n    \tvoid show(){\r\n    \t\tdisplay();\r\n    \t}\r\n    \r\n         public static void display(){\r\n    \t\tSystem.out.println(&quot;in static method of B&quot;);\r\n    \t}\r\n    \r\n    }\r\n    public class Test {\r\n    \r\n    \tpublic static void main(String[] args){\r\n    \t\tB obj =new B();\r\n    \t\tobj.show();\r\n    \t\t\r\n    \t\tA a_obj=new B();\r\n    \t\ta_obj.display();\r\n    \t\t\r\n    \t\t\r\n    \t}\r\n    \t\r\n    \t\r\n    }\r\n\r\nIN first case, o/p is the &quot;in static method of B&quot; # successful override \r\nIn 2nd case,  o/p is &quot;in static method of A&quot; # Static method - will not consider polymorphism","title":"Are static methods inherited in Java?","body":"<p>You can override static methods, but if you try to use polymorphism, then they work according to class scope(Contrary to what we normally expect).</p>\n\n<pre><code>public class A {\n\n    public static void display(){\n        System.out.println(\"in static method of A\");\n    }\n}\n\npublic class B extends A {\n\n    void show(){\n        display();\n    }\n\n     public static void display(){\n        System.out.println(\"in static method of B\");\n    }\n\n}\npublic class Test {\n\n    public static void main(String[] args){\n        B obj =new B();\n        obj.show();\n\n        A a_obj=new B();\n        a_obj.display();\n\n\n    }\n\n\n}\n</code></pre>\n\n<p>IN first case, o/p is the \"in static method of B\" # successful override \nIn 2nd case,  o/p is \"in static method of A\" # Static method - will not consider polymorphism</p>\n"},{"tags":[],"owner":{"account_id":7647701,"reputation":9,"user_id":5797704,"display_name":"Ashwini E"},"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1452927136,"creation_date":1452927136,"answer_id":34824385,"question_id":10291949,"body_markdown":"Static members will not be inherited to subclass because inheritance is only for non-static members.. \r\nAnd static members will be loaded inside static pool by class loader. Inheritance is only for those members which are loaded inside the object","title":"Are static methods inherited in Java?","body":"<p>Static members will not be inherited to subclass because inheritance is only for non-static members.. \nAnd static members will be loaded inside static pool by class loader. Inheritance is only for those members which are loaded inside the object</p>\n"},{"tags":[],"owner":{"account_id":5813310,"reputation":11,"user_id":4583714,"display_name":"NGK"},"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1459736664,"creation_date":1459736664,"answer_id":36393699,"question_id":10291949,"body_markdown":"We can declare static methods with same signature in subclass, but it is not considered overriding as there wont be any run-time polymorphism.Because since all static members of a class are loaded at the time of class loading so it decide at compile time(overriding at run time) Hence the answer is No.","title":"Are static methods inherited in Java?","body":"<p>We can declare static methods with same signature in subclass, but it is not considered overriding as there wont be any run-time polymorphism.Because since all static members of a class are loaded at the time of class loading so it decide at compile time(overriding at run time) Hence the answer is No.</p>\n"},{"tags":[],"owner":{"account_id":10135870,"reputation":548,"user_id":7487430,"display_name":"Noman_ibrahim"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1506545718,"creation_date":1506545718,"answer_id":46457079,"question_id":10291949,"body_markdown":"This concept is not that easy as it looks. We can access static members without inheritance, which is HasA-relation. We can access static members by extending the parent class also. That doesn&#39;t imply that it is an ISA-relation (Inheritance). Actually static members belong to the class, and static is not an access modifier. As long as the access modifiers permit to access the static members we can use them in other classes. Like if it is public then it will be accessible inside the same package and also outside the package. For private we can&#39;t use it anywhere. For default, we can use it only within the package. But for protected we have to extend the super class. So getting the static method to other class does not depend on being Static. It depends on Access modifiers. So, in my opinion, Static members can access if the access modifiers permit. Otherwise, we can use them like we use by Hasa-relation. And has a relation is not inheritance. Again we can not override the static method. If we can use other method but cant override it, then it is HasA-relation. If we can&#39;t override them it won&#39;t be inheritance.So the writer was 100% correct.","title":"Are static methods inherited in Java?","body":"<p>This concept is not that easy as it looks. We can access static members without inheritance, which is HasA-relation. We can access static members by extending the parent class also. That doesn't imply that it is an ISA-relation (Inheritance). Actually static members belong to the class, and static is not an access modifier. As long as the access modifiers permit to access the static members we can use them in other classes. Like if it is public then it will be accessible inside the same package and also outside the package. For private we can't use it anywhere. For default, we can use it only within the package. But for protected we have to extend the super class. So getting the static method to other class does not depend on being Static. It depends on Access modifiers. So, in my opinion, Static members can access if the access modifiers permit. Otherwise, we can use them like we use by Hasa-relation. And has a relation is not inheritance. Again we can not override the static method. If we can use other method but cant override it, then it is HasA-relation. If we can't override them it won't be inheritance.So the writer was 100% correct.</p>\n"},{"tags":[],"owner":{"account_id":3557648,"reputation":8235,"user_id":2970960,"accept_rate":43,"display_name":"Jai"},"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1518146960,"creation_date":1518146960,"answer_id":48698335,"question_id":10291949,"body_markdown":"Many have voiced out their answer in words. This is an extended explanation in codes:\r\n\r\n\tpublic class A {\r\n\t\tpublic static void test() {\r\n\t\t\tSystem.out.println(&quot;A&quot;);\r\n\t\t}\r\n\t\tpublic static void test2() {\r\n\t\t\tSystem.out.println(&quot;Test&quot;);\r\n\t\t}\r\n\t}\r\n\t\r\n\tpublic class B extends A {\r\n\t\tpublic static void test() {\r\n\t\t\tSystem.out.println(&quot;B&quot;);\r\n\t\t}\r\n\t}\r\n\r\n    // Called statically\r\n    A.test();\r\n\tB.test();\r\n    System.out.println();\r\n\r\n    // Called statically, testing static inheritance\r\n    A.test2();\r\n\tB.test2();\r\n    System.out.println();\r\n\r\n    // Called via instance object\r\n    A a = new A();\r\n\tB b = new B();\r\n\ta.test();\r\n\tb.test();\r\n    System.out.println();\r\n\r\n    // Testing inheritance via instance call\r\n\ta.test2();\r\n\tb.test2();\r\n    System.out.println();\r\n\t\r\n    // Testing whether calling static method via instance object is dependent on compile or runtime type\r\n\t((A) b).hi();\r\n    System.out.println();\r\n\r\n    // Testing whether null instance works\r\n    A nullObj = null;\r\n    nullObj.hi();\r\n\r\nResults:\r\n\r\n    A\r\n    B\r\n\r\n    Test\r\n    Test\r\n\r\n    A\r\n    B\r\n\r\n    Test\r\n    Test\r\n\r\n    A\r\n\r\n    A\r\n\r\nTherefore, this is the conclusion:\r\n\r\n1. When we call the static in a static manner via &lt;class name&gt;.&lt;method name&gt;, it will look for the static defined in that class, or the class nearest to that in the inheritance chain. This proves that static methods are inherited.\r\n2. When static method is called from an instance, it calls the static method defined in the compile-time type.\r\n3. Static method can be called from a `null` instance. My guess is that the compiler will use the variable type to find the class during compilation, and translate that to the appropriate static method call.\r\n\r\n","title":"Are static methods inherited in Java?","body":"<p>Many have voiced out their answer in words. This is an extended explanation in codes:</p>\n\n<pre><code>public class A {\n    public static void test() {\n        System.out.println(\"A\");\n    }\n    public static void test2() {\n        System.out.println(\"Test\");\n    }\n}\n\npublic class B extends A {\n    public static void test() {\n        System.out.println(\"B\");\n    }\n}\n\n// Called statically\nA.test();\nB.test();\nSystem.out.println();\n\n// Called statically, testing static inheritance\nA.test2();\nB.test2();\nSystem.out.println();\n\n// Called via instance object\nA a = new A();\nB b = new B();\na.test();\nb.test();\nSystem.out.println();\n\n// Testing inheritance via instance call\na.test2();\nb.test2();\nSystem.out.println();\n\n// Testing whether calling static method via instance object is dependent on compile or runtime type\n((A) b).hi();\nSystem.out.println();\n\n// Testing whether null instance works\nA nullObj = null;\nnullObj.hi();\n</code></pre>\n\n<p>Results:</p>\n\n<pre><code>A\nB\n\nTest\nTest\n\nA\nB\n\nTest\nTest\n\nA\n\nA\n</code></pre>\n\n<p>Therefore, this is the conclusion:</p>\n\n<ol>\n<li>When we call the static in a static manner via ., it will look for the static defined in that class, or the class nearest to that in the inheritance chain. This proves that static methods are inherited.</li>\n<li>When static method is called from an instance, it calls the static method defined in the compile-time type.</li>\n<li>Static method can be called from a <code>null</code> instance. My guess is that the compiler will use the variable type to find the class during compilation, and translate that to the appropriate static method call.</li>\n</ol>\n"},{"tags":[],"owner":{"display_name":"user1134181"},"down_vote_count":0,"up_vote_count":23,"is_accepted":false,"score":23,"last_activity_date":1532666005,"creation_date":1532666005,"answer_id":51550809,"question_id":10291949,"body_markdown":"Static methods in Java are inherited, but can not be overridden. If you declare the same method in a subclass, you hide the superclass method instead of overriding it. Static methods are not polymorphic. At the compile time, the static method will be statically linked.\r\n\r\nExample:\r\n\r\n    public class Writer {\r\n    \tpublic static void write() {\r\n    \t\tSystem.out.println(&quot;Writing&quot;);\r\n    \t}\r\n    }\r\n    \r\n    public class Author extends Writer {\r\n    \tpublic static void write() {\r\n    \t\tSystem.out.println(&quot;Writing book&quot;);\r\n    \t}\r\n    }\r\n    \r\n    public class Programmer extends Writer {\r\n    \t\r\n    \tpublic static void write() {\r\n    \t\tSystem.out.println(&quot;Writing code&quot;);\r\n    \t}\r\n    \t\r\n    \tpublic static void main(String[] args) {\r\n    \t\tWriter w = new Programmer();\r\n    \t\tw.write();\r\n    \t\t\r\n    \t\tWriter secondWriter = new Author();\r\n    \t\tsecondWriter.write();\r\n    \t\t\r\n    \t\tWriter thirdWriter = null;\r\n    \t\tthirdWriter.write();\r\n    \t\t\r\n    \t\tAuthor firstAuthor = new Author();\r\n    \t\tfirstAuthor.write();\r\n    \t}\r\n    }\r\n\r\nYou&#39;ll get the following:\r\n\r\n    Writing\r\n    Writing\r\n    Writing\r\n    Writing book\r\n\r\n","title":"Are static methods inherited in Java?","body":"<p>Static methods in Java are inherited, but can not be overridden. If you declare the same method in a subclass, you hide the superclass method instead of overriding it. Static methods are not polymorphic. At the compile time, the static method will be statically linked.</p>\n\n<p>Example:</p>\n\n<pre><code>public class Writer {\n    public static void write() {\n        System.out.println(\"Writing\");\n    }\n}\n\npublic class Author extends Writer {\n    public static void write() {\n        System.out.println(\"Writing book\");\n    }\n}\n\npublic class Programmer extends Writer {\n\n    public static void write() {\n        System.out.println(\"Writing code\");\n    }\n\n    public static void main(String[] args) {\n        Writer w = new Programmer();\n        w.write();\n\n        Writer secondWriter = new Author();\n        secondWriter.write();\n\n        Writer thirdWriter = null;\n        thirdWriter.write();\n\n        Author firstAuthor = new Author();\n        firstAuthor.write();\n    }\n}\n</code></pre>\n\n<p>You'll get the following:</p>\n\n<pre><code>Writing\nWriting\nWriting\nWriting book\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12109605,"reputation":19,"user_id":8847024,"display_name":"Venkatesh"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1646227308,"creation_date":1646227308,"answer_id":71323423,"question_id":10291949,"body_markdown":"Static methods in class are inherited while static methods in interface aren&#39;t inherited.\r\n\r\nStatic methods in class can be invoked using instance while static methods in interface can be invoked only through interface name as they aren&#39;t inherited","title":"Are static methods inherited in Java?","body":"<p>Static methods in class are inherited while static methods in interface aren't inherited.</p>\n<p>Static methods in class can be invoked using instance while static methods in interface can be invoked only through interface name as they aren't inherited</p>\n"}],"owner":{"account_id":210685,"reputation":6675,"user_id":462445,"accept_rate":82,"display_name":"Algorithmist"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":188553,"favorite_count":0,"down_vote_count":0,"up_vote_count":172,"accepted_answer_id":10292034,"answer_count":15,"score":172,"last_activity_date":1646227308,"creation_date":1335243631,"question_id":10291949,"body_markdown":"I was reading _A Programmers Guide to\r\nJava SCJP Certification_ by Khalid Mughal.\r\n\r\nIn the Inheritance chapter, it explains that\r\n\r\n&gt; Inheritance of members is closely tied to their declared\r\n&gt; accessibility. If a superclass member is accessible by its simple name\r\n&gt; in the subclass (without the use of any extra syntax like super), that\r\n&gt; member is considered inherited\r\n\r\nIt also mentions that static methods are not inherited. But the code below is perfectlly fine:\r\n\r\n    class A\r\n    {\r\n        public static void display()\r\n        {\r\n            System.out.println(&quot;Inside static method of superclass&quot;);\r\n        }\r\n    }\r\n \r\n    class B extends A\r\n    {\r\n        public void show()\r\n        {\r\n            // This works - accessing display() by its simple name -\r\n            // meaning it is inherited according to the book.\r\n            display();\r\n        }\r\n    }\r\n\r\nHow am I able to directly use `display()` in class `B`? Even more, `B.display()` also works.\r\n\r\nDoes the book&#39;s explanation only apply to instance methods?","title":"Are static methods inherited in Java?","body":"<p>I was reading <em>A Programmers Guide to\nJava SCJP Certification</em> by Khalid Mughal.</p>\n\n<p>In the Inheritance chapter, it explains that</p>\n\n<blockquote>\n  <p>Inheritance of members is closely tied to their declared\n  accessibility. If a superclass member is accessible by its simple name\n  in the subclass (without the use of any extra syntax like super), that\n  member is considered inherited</p>\n</blockquote>\n\n<p>It also mentions that static methods are not inherited. But the code below is perfectlly fine:</p>\n\n<pre><code>class A\n{\n    public static void display()\n    {\n        System.out.println(\"Inside static method of superclass\");\n    }\n}\n\nclass B extends A\n{\n    public void show()\n    {\n        // This works - accessing display() by its simple name -\n        // meaning it is inherited according to the book.\n        display();\n    }\n}\n</code></pre>\n\n<p>How am I able to directly use <code>display()</code> in class <code>B</code>? Even more, <code>B.display()</code> also works.</p>\n\n<p>Does the book's explanation only apply to instance methods?</p>\n"},{"tags":["java","visual-studio-code"],"comments":[{"owner":{"account_id":22398818,"reputation":3,"user_id":16609647,"display_name":"1ndianSp1ces"},"score":0,"creation_date":1646226840,"post_id":71323277,"comment_id":126070074,"body_markdown":"Maybe this link can help you. It&#39;s a similar problem [https://stackoverflow.com/questions/61826895/how-to-avoid-vs-code-warning-myfile-java-is-a-non-project-file-only-syntax](https://stackoverflow.com/questions/61826895/how-to-avoid-vs-code-warning-myfile-java-is-a-non-project-file-only-syntax)","body":"Maybe this link can help you. It&#39;s a similar problem <a href=\"https://stackoverflow.com/questions/61826895/how-to-avoid-vs-code-warning-myfile-java-is-a-non-project-file-only-syntax\">https://stackoverflow.com/questions/61826895/how-to-avoid-vs&zwnj;&#8203;-code-warning-myfile&zwnj;&#8203;-java-is-a-non-proje&zwnj;&#8203;ct-file-only-syntax</a>"}],"answers":[{"tags":[],"owner":{"account_id":24429068,"reputation":21,"user_id":18354252,"display_name":"Julio Cauan"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1646227203,"creation_date":1646227203,"answer_id":71323389,"question_id":71323277,"body_markdown":"If you&#39;re using the &quot;Extension Pack for Java&quot; in vscode, just press ctrl+shift+p and look for &quot;Java: Create Java Project&quot; or follow this tutorial: https://code.visualstudio.com/docs/java/java-tutorial","title":"How can I create java project in Vscode","body":"<p>If you're using the &quot;Extension Pack for Java&quot; in vscode, just press ctrl+shift+p and look for &quot;Java: Create Java Project&quot; or follow this tutorial: <a href=\"https://code.visualstudio.com/docs/java/java-tutorial\" rel=\"nofollow noreferrer\">https://code.visualstudio.com/docs/java/java-tutorial</a></p>\n"}],"owner":{"account_id":21007907,"reputation":23,"user_id":15437231,"display_name":"hac_tony"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1398,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1646267343,"answer_count":1,"score":1,"last_activity_date":1646227203,"creation_date":1646226635,"question_id":71323277,"body_markdown":"when i use vscode to run the java, i can run it successfully. However, the vscode appears this problem which confuses me[![tue problem][1]][1]\r\n\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/82wiP.png\r\n  [2]: https://i.stack.imgur.com/8bI0r.png","title":"How can I create java project in Vscode","body":"<p>when i use vscode to run the java, i can run it successfully. However, the vscode appears this problem which confuses me<a href=\"https://i.stack.imgur.com/82wiP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/82wiP.png\" alt=\"tue problem\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/8bI0r.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8bI0r.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","android","android-gradle-plugin","proguard","android-r8"],"comments":[{"owner":{"account_id":1919838,"reputation":28264,"user_id":1731626,"display_name":"Sergio"},"score":0,"creation_date":1645457262,"post_id":71208594,"comment_id":125870452,"body_markdown":"this is not a valid method definition in java","body":"this is not a valid method definition in java"},{"owner":{"account_id":339902,"reputation":1200,"user_id":669647,"accept_rate":73,"display_name":"penkzhou"},"score":0,"creation_date":1646227230,"post_id":71208594,"comment_id":126070210,"body_markdown":"can you share the whole crash stack?","body":"can you share the whole crash stack?"}],"answers":[{"tags":[],"owner":{"account_id":2812752,"reputation":4008,"user_id":2418642,"display_name":"sgjesse"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1646227049,"creation_date":1646227049,"answer_id":71323359,"question_id":71208594,"body_markdown":"R8 does whole program optimization, and if the method does not have a keep rule R8 can do whatever it wants with the method including changing modifiers. If you want to make sure the method stays you can add a keep rule like this:\r\n```\r\n-keep class &lt;class name holding method&gt; {\r\n  private void init();\r\n}\r\n```\r\nthen the method should not be touched by R8.\r\n\r\nIs the `LinkageError` caused by adding code at runtime which is not processed by R8? For whole program optimization and boundaries to code not known to R8 must be covered by a keep rule.","title":"Android Studio Private method becomes public final after compile","body":"<p>R8 does whole program optimization, and if the method does not have a keep rule R8 can do whatever it wants with the method including changing modifiers. If you want to make sure the method stays you can add a keep rule like this:</p>\n<pre><code>-keep class &lt;class name holding method&gt; {\n  private void init();\n}\n</code></pre>\n<p>then the method should not be touched by R8.</p>\n<p>Is the <code>LinkageError</code> caused by adding code at runtime which is not processed by R8? For whole program optimization and boundaries to code not known to R8 must be covered by a keep rule.</p>\n"}],"owner":{"account_id":7127941,"reputation":409,"user_id":5450254,"accept_rate":0,"display_name":"alphanso"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":183,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1646227049,"creation_date":1645456121,"question_id":71208594,"body_markdown":"Using android studio AGP 7.0, Java 11 and minifyEnabled=true\r\n\r\nfollowing is my method\r\n\r\n    private void init(){\r\n    }\r\n\r\n**after compile this becomes public final init()** due to which I am getting run time crash saying LinkageError how come access specifier is getting change after compile?","title":"Android Studio Private method becomes public final after compile","body":"<p>Using android studio AGP 7.0, Java 11 and minifyEnabled=true</p>\n<p>following is my method</p>\n<pre><code>private void init(){\n}\n</code></pre>\n<p><strong>after compile this becomes public final init()</strong> due to which I am getting run time crash saying LinkageError how come access specifier is getting change after compile?</p>\n"},{"tags":["java","azure","jwt","access-token","nimbus-jose-jwt"],"answers":[{"tags":[],"owner":{"account_id":12368896,"reputation":24911,"user_id":9019885,"display_name":"Gary Archer"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1646226930,"creation_date":1646163001,"answer_id":71313699,"question_id":71306470,"body_markdown":"You need to `expose an API scope` in Azure, and get the client to use that. Also ensure that there is no `nonce` field in the JWT header of the access token. My [blog post](https://authguidance.com/2017/12/01/azure-ad-spa-code-sample/) has further info.\r\n\r\n**AZURE AD BEHAVIOR**\r\n\r\nThe above behavior is quite specific to Microsoft, and is required when using Azure AD as a provider:\r\n\r\n- Tokens with a nonce field in the JWT header are designed only for MS APIs, eg Graph, and use an in-house validation mechanism. The intent is for these to always fail validation in custom APIs.\r\n\r\n- Tokens for your own custom APIs must be retrieved via clients that request custom scopes. Note that the OAuth client configured in Azure AD can be a logical entry, rather than needing to maintain one for each individual API.\r\n\r\nI believe the MS behavior is based on [OAuth resource indicators](https://datatracker.ietf.org/doc/html/rfc8707), though my personal preference is to use more mainstream techniques of [scopes](https://curity.io/resources/learn/scope-best-practices/), [claims](https://curity.io/resources/learn/claims-best-practices/) and audience checks when receiving access tokens in APIs.","title":"Can&#39;t verify access token signature from azure using nimbus","body":"<p>You need to <code>expose an API scope</code> in Azure, and get the client to use that. Also ensure that there is no <code>nonce</code> field in the JWT header of the access token. My <a href=\"https://authguidance.com/2017/12/01/azure-ad-spa-code-sample/\" rel=\"nofollow noreferrer\">blog post</a> has further info.</p>\n<p><strong>AZURE AD BEHAVIOR</strong></p>\n<p>The above behavior is quite specific to Microsoft, and is required when using Azure AD as a provider:</p>\n<ul>\n<li><p>Tokens with a nonce field in the JWT header are designed only for MS APIs, eg Graph, and use an in-house validation mechanism. The intent is for these to always fail validation in custom APIs.</p>\n</li>\n<li><p>Tokens for your own custom APIs must be retrieved via clients that request custom scopes. Note that the OAuth client configured in Azure AD can be a logical entry, rather than needing to maintain one for each individual API.</p>\n</li>\n</ul>\n<p>I believe the MS behavior is based on <a href=\"https://datatracker.ietf.org/doc/html/rfc8707\" rel=\"nofollow noreferrer\">OAuth resource indicators</a>, though my personal preference is to use more mainstream techniques of <a href=\"https://curity.io/resources/learn/scope-best-practices/\" rel=\"nofollow noreferrer\">scopes</a>, <a href=\"https://curity.io/resources/learn/claims-best-practices/\" rel=\"nofollow noreferrer\">claims</a> and audience checks when receiving access tokens in APIs.</p>\n"}],"owner":{"account_id":10158876,"reputation":388,"user_id":7503033,"display_name":"Ace of Spade"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1881,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71313699,"answer_count":1,"score":0,"last_activity_date":1646226930,"creation_date":1646127826,"question_id":71306470,"body_markdown":"following this [example](https://connect2id.com/products/nimbus-jose-jwt/examples/validating-jwt-access-tokens) I wrote some code to validate an access token return by implicit flow from azure. \r\n\r\n\r\n    RemoteJWKSet remoteJWKSet = new RemoteJWKSet(new URL(jwksUri));\r\n    JWSKeySelector keySelector = new JWSVerificationKeySelector(JWSAlgorithm.RS256, remoteJWKSet);\r\n\r\n    ConfigurableJWTProcessor jwtProcessor = new DefaultJWTProcessor&lt;&gt;();\r\n\r\n    jwtProcessor.setJWTClaimsSetVerifier(new DefaultJWTClaimsVerifier(\r\n          new JWTClaimsSet.Builder().issuer(&quot;https://sts.windows.net/3283e312-f73b-47d0-81c6-75e3ac726c21/&quot;).build(),\r\n                    new HashSet&lt;&gt;(Arrays.asList(&quot;sub&quot;, &quot;iat&quot;, &quot;exp&quot;, &quot;scp&quot;))));\r\n\r\n    jwtProcessor.setJWSKeySelector(keySelector);\r\n\r\n    JWTClaimsSet claimsSet = jwtProcessor.process(accessToken.getValue(), null);\r\n\r\n\r\nBut the verification fails and I get:\r\n\r\n```\r\ncom.nimbusds.jose.proc.BadJWSException: Signed JWT rejected: Invalid signature\r\n\tat com.nimbusds.jwt.proc.DefaultJWTProcessor.process(DefaultJWTProcessor.java:378)\r\n\tat com.nimbusds.jwt.proc.DefaultJWTProcessor.process(DefaultJWTProcessor.java:303)\r\n\tat com.nimbusds.jwt.proc.DefaultJWTProcessor.process(DefaultJWTProcessor.java:294)\r\n```\r\n\r\nI think I don&#39;t need `DefaultJWTClaimsVerifier` part, but removing it doesn&#39;t change anything. I iust keept it to stick with the example.\r\n\r\nDo you know why this happends?\r\n\r\nThanks for your help.\r\n\r\nPS: Can&#39;t verify with jwt.io. I pasted access_token and the first entry from &quot;keys&quot; section from jwk.","title":"Can&#39;t verify access token signature from azure using nimbus","body":"<p>following this <a href=\"https://connect2id.com/products/nimbus-jose-jwt/examples/validating-jwt-access-tokens\" rel=\"nofollow noreferrer\">example</a> I wrote some code to validate an access token return by implicit flow from azure.</p>\n<pre><code>RemoteJWKSet remoteJWKSet = new RemoteJWKSet(new URL(jwksUri));\nJWSKeySelector keySelector = new JWSVerificationKeySelector(JWSAlgorithm.RS256, remoteJWKSet);\n\nConfigurableJWTProcessor jwtProcessor = new DefaultJWTProcessor&lt;&gt;();\n\njwtProcessor.setJWTClaimsSetVerifier(new DefaultJWTClaimsVerifier(\n      new JWTClaimsSet.Builder().issuer(&quot;https://sts.windows.net/3283e312-f73b-47d0-81c6-75e3ac726c21/&quot;).build(),\n                new HashSet&lt;&gt;(Arrays.asList(&quot;sub&quot;, &quot;iat&quot;, &quot;exp&quot;, &quot;scp&quot;))));\n\njwtProcessor.setJWSKeySelector(keySelector);\n\nJWTClaimsSet claimsSet = jwtProcessor.process(accessToken.getValue(), null);\n</code></pre>\n<p>But the verification fails and I get:</p>\n<pre><code>com.nimbusds.jose.proc.BadJWSException: Signed JWT rejected: Invalid signature\n    at com.nimbusds.jwt.proc.DefaultJWTProcessor.process(DefaultJWTProcessor.java:378)\n    at com.nimbusds.jwt.proc.DefaultJWTProcessor.process(DefaultJWTProcessor.java:303)\n    at com.nimbusds.jwt.proc.DefaultJWTProcessor.process(DefaultJWTProcessor.java:294)\n</code></pre>\n<p>I think I don't need <code>DefaultJWTClaimsVerifier</code> part, but removing it doesn't change anything. I iust keept it to stick with the example.</p>\n<p>Do you know why this happends?</p>\n<p>Thanks for your help.</p>\n<p>PS: Can't verify with jwt.io. I pasted access_token and the first entry from &quot;keys&quot; section from jwk.</p>\n"},{"tags":["java","android","gradle"],"comments":[{"owner":{"account_id":11859106,"reputation":498,"user_id":8678319,"display_name":"kashyap"},"score":0,"creation_date":1652805119,"post_id":71296372,"comment_id":127693271,"body_markdown":"Hi @SMGhost, Can you share your solution here. I&#39;m also facing same problem.","body":"Hi @SMGhost, Can you share your solution here. I&#39;m also facing same problem."},{"owner":{"account_id":1260573,"reputation":3927,"user_id":1218970,"accept_rate":83,"display_name":"SMGhost"},"score":0,"creation_date":1652852344,"post_id":71296372,"comment_id":127703419,"body_markdown":"@kashyap, I&#39;ve abandoned the idea of using this approach, but I did tried answered solution before that and it worked.","body":"@kashyap, I&#39;ve abandoned the idea of using this approach, but I did tried answered solution before that and it worked."}],"answers":[{"tags":[],"owner":{"account_id":2812752,"reputation":4008,"user_id":2418642,"display_name":"sgjesse"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1646226228,"creation_date":1646226228,"answer_id":71323184,"question_id":71296372,"body_markdown":"R8 does not allow multiple definitions of the same class in the input to its compilation. AGP will pass all app classes together with all direct dependencies and their transitive dependencies to R8 producing this error. If you want to replace a class in a library your best option is to download that library as a JAR, remove the class files you want to replace and provide that specific JAR as a file dependency. Remember to then also add any direct dependencies of that library as explicit dependencies.\r\n\r\nThere might be a way to filter out parts of a dependency in Gradle, but I have looked for it before, and did not find any other way to accomplish this. Basically what you would like to be able do is to specify a dependency (JAR/AAR) and then be able to filter out specific `.class` files from it.","title":"Overridden library java class fails during release build with r8","body":"<p>R8 does not allow multiple definitions of the same class in the input to its compilation. AGP will pass all app classes together with all direct dependencies and their transitive dependencies to R8 producing this error. If you want to replace a class in a library your best option is to download that library as a JAR, remove the class files you want to replace and provide that specific JAR as a file dependency. Remember to then also add any direct dependencies of that library as explicit dependencies.</p>\n<p>There might be a way to filter out parts of a dependency in Gradle, but I have looked for it before, and did not find any other way to accomplish this. Basically what you would like to be able do is to specify a dependency (JAR/AAR) and then be able to filter out specific <code>.class</code> files from it.</p>\n"}],"owner":{"account_id":1260573,"reputation":3927,"user_id":1218970,"accept_rate":83,"display_name":"SMGhost"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":183,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":71323184,"answer_count":1,"score":1,"last_activity_date":1646226228,"creation_date":1646057871,"question_id":71296372,"body_markdown":"Currently I&#39;m using library. Assume it&#39;s called **com.example**. And it has a file **com.example.File.java** which I have overridden by creating my own **File.java** under same path of **com.example** in my **app** project. It works as expected with debug builds, where I successfully inject my own version of **File.java**. But when I try to build release using r8 I get error:\r\n\r\n    Type com.example.File$1 is defined multiple times: &lt;...&gt;\r\n\r\nSo I tried using android packaging options:\r\n\r\n    packagingOptions {\r\n        exclude &#39;com/example/**&#39;\r\n    }\r\n\r\nIn hopes of at least completely removing mentioned file (and all others in that path), but I still get same error. How to properly exclude file from packagingOptions or is this not the right place for that?","title":"Overridden library java class fails during release build with r8","body":"<p>Currently I'm using library. Assume it's called <strong>com.example</strong>. And it has a file <strong>com.example.File.java</strong> which I have overridden by creating my own <strong>File.java</strong> under same path of <strong>com.example</strong> in my <strong>app</strong> project. It works as expected with debug builds, where I successfully inject my own version of <strong>File.java</strong>. But when I try to build release using r8 I get error:</p>\n<pre><code>Type com.example.File$1 is defined multiple times: &lt;...&gt;\n</code></pre>\n<p>So I tried using android packaging options:</p>\n<pre><code>packagingOptions {\n    exclude 'com/example/**'\n}\n</code></pre>\n<p>In hopes of at least completely removing mentioned file (and all others in that path), but I still get same error. How to properly exclude file from packagingOptions or is this not the right place for that?</p>\n"},{"tags":["java","multithreading","readwritelock"],"answers":[{"tags":[],"owner":{"account_id":916980,"reputation":8820,"user_id":2580516,"display_name":"Warren Dew"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1446016175,"creation_date":1446016175,"answer_id":33384952,"question_id":33384822,"body_markdown":"In the case of multithreaded code with both reads and writes, if a thread neglects to obtain a lock while reading, it risks reading inconsistent or garbage data due to a simultaneous write.  For example, it could read a long variable just as that long variable was being written, and it could read the high half of the old value and the low half of the new value, which means the value it read would be complete garbage, something that was never actually written.\r\n\r\nIf a thread with a read lock writes without the write lock, it could cause other reading threads to read garbage data in a similar manner.","title":"Why to use a readlock?","body":"<p>In the case of multithreaded code with both reads and writes, if a thread neglects to obtain a lock while reading, it risks reading inconsistent or garbage data due to a simultaneous write.  For example, it could read a long variable just as that long variable was being written, and it could read the high half of the old value and the low half of the new value, which means the value it read would be complete garbage, something that was never actually written.</p>\n\n<p>If a thread with a read lock writes without the write lock, it could cause other reading threads to read garbage data in a similar manner.</p>\n"},{"tags":[],"owner":{"account_id":4208732,"reputation":1205,"user_id":3447032,"display_name":"gokareless"},"down_vote_count":1,"up_vote_count":8,"is_accepted":false,"score":7,"last_activity_date":1549897683,"creation_date":1549897683,"answer_id":54633486,"question_id":33384822,"body_markdown":"Duplicating **@Solomon Slow** comment here, as it helped me personally:\r\n\r\n&gt; Read locks and write locks come in pairs: If thread **R** holds a *read lock*, it **blocks** thread **W** from obtaining the corresponding *write lock*, but it **does not block** thread **S** from getting the same *read lock*. A reader/writer lock pair allows any number of readers to &quot;own&quot; the read lock at the same time, OR it allows one writer to own the write lock, but it never allows a reader and a writer at the same time, and it never allows more than one writer at the same time.","title":"Why to use a readlock?","body":"<p>Duplicating <strong>@Solomon Slow</strong> comment here, as it helped me personally:</p>\n\n<blockquote>\n  <p>Read locks and write locks come in pairs: If thread <strong>R</strong> holds a <em>read lock</em>, it <strong>blocks</strong> thread <strong>W</strong> from obtaining the corresponding <em>write lock</em>, but it <strong>does not block</strong> thread <strong>S</strong> from getting the same <em>read lock</em>. A reader/writer lock pair allows any number of readers to \"own\" the read lock at the same time, OR it allows one writer to own the write lock, but it never allows a reader and a writer at the same time, and it never allows more than one writer at the same time.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":485625,"reputation":5104,"user_id":902036,"accept_rate":60,"display_name":"dz902"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1550734743,"creation_date":1550734743,"answer_id":54801639,"question_id":33384822,"body_markdown":"This is interesting as the name &quot;readlock&quot; or &quot;reader-lock&quot; is probably a bit misleading.\r\n\r\nI found it easier to think it as a **mode switch**, you switch to *read-only mode*, or *write-only mode*. You switch mode by acquiring corresponding locks.","title":"Why to use a readlock?","body":"<p>This is interesting as the name \"readlock\" or \"reader-lock\" is probably a bit misleading.</p>\n\n<p>I found it easier to think it as a <strong>mode switch</strong>, you switch to <em>read-only mode</em>, or <em>write-only mode</em>. You switch mode by acquiring corresponding locks.</p>\n"},{"tags":[],"owner":{"account_id":10957698,"reputation":61,"user_id":8051929,"display_name":"Echo Zeng"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646226073,"creation_date":1646226073,"answer_id":71323151,"question_id":33384822,"body_markdown":"Like if you want a row in this table, and you do not want any cell would be changed during the period, so you can add one read-lock.\r\n\r\nOther guys can also read, it doesn&#39;t matter.","title":"Why to use a readlock?","body":"<p>Like if you want a row in this table, and you do not want any cell would be changed during the period, so you can add one read-lock.</p>\n<p>Other guys can also read, it doesn't matter.</p>\n"}],"owner":{"account_id":4890996,"reputation":1347,"user_id":3942142,"accept_rate":36,"display_name":"jayendra bhatt"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4694,"favorite_count":0,"down_vote_count":1,"up_vote_count":6,"answer_count":4,"score":5,"last_activity_date":1646226073,"creation_date":1446015714,"question_id":33384822,"body_markdown":"I read that a write lock is exclusive and a read lock is shared , so a piece of code which in readlock anyway  can be accessed by multiple threads . What if no read lock is acquired by the threads in contention . Any way they are going to read only . Also what if a Thread acquiring a readlock tries to write something ?\r\n\r\n\r\nThanks","title":"Why to use a readlock?","body":"<p>I read that a write lock is exclusive and a read lock is shared , so a piece of code which in readlock anyway  can be accessed by multiple threads . What if no read lock is acquired by the threads in contention . Any way they are going to read only . Also what if a Thread acquiring a readlock tries to write something ?</p>\n\n<p>Thanks</p>\n"},{"tags":["java","build","jar"],"comments":[{"owner":{"account_id":130400,"reputation":52061,"user_id":329637,"accept_rate":75,"display_name":"RoflcoptrException"},"score":0,"creation_date":1313763653,"post_id":7122955,"comment_id":8535861,"body_markdown":"Maybe you have compiled the source two times?","body":"Maybe you have compiled the source two times?"},{"owner":{"account_id":484834,"reputation":708,"user_id":900765,"display_name":"Stoney"},"score":3,"creation_date":1313763842,"post_id":7122955,"comment_id":8535907,"body_markdown":"What happens when you extract the jar?","body":"What happens when you extract the jar?"},{"owner":{"account_id":102965,"reputation":415230,"user_id":276052,"accept_rate":80,"display_name":"aioobe"},"score":0,"creation_date":1313763845,"post_id":7122955,"comment_id":8535910,"body_markdown":"How does the `Foo.java` look?","body":"How does the <code>Foo.java</code> look?"},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":1,"creation_date":1313763856,"post_id":7122955,"comment_id":8535912,"body_markdown":"Any information on the build process you&#39;re using?","body":"Any information on the build process you&#39;re using?"},{"owner":{"account_id":484834,"reputation":708,"user_id":900765,"display_name":"Stoney"},"score":2,"creation_date":1313763857,"post_id":7122955,"comment_id":8535913,"body_markdown":"How are you creating the jar?","body":"How are you creating the jar?"},{"owner":{"account_id":21298,"reputation":381,"user_id":51633,"accept_rate":62,"display_name":"yottamoto"},"score":0,"creation_date":1313764000,"post_id":7122955,"comment_id":8535952,"body_markdown":"Added info above. Just using the standard ant jar task.","body":"Added info above. Just using the standard ant jar task."},{"owner":{"account_id":21298,"reputation":381,"user_id":51633,"accept_rate":62,"display_name":"yottamoto"},"score":0,"creation_date":1313764291,"post_id":7122955,"comment_id":8536056,"body_markdown":"I see the double class files with jar -tf jarfile.jar or when I view it in a zip program. When I unpack the files, the zip program asks if it should overwrite the existing file.","body":"I see the double class files with jar -tf jarfile.jar or when I view it in a zip program. When I unpack the files, the zip program asks if it should overwrite the existing file."}],"answers":[{"tags":[],"owner":{"account_id":313901,"reputation":2255,"user_id":628781,"display_name":"Ken Brittain"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1313764949,"creation_date":1313764949,"answer_id":7123260,"question_id":7122955,"body_markdown":"Are you using the Ant Jar task? If so then you can most definitely get duplicate files in the same jar file. The **duplicate** attribute is used to stop that.\r\n\r\n&gt; Please note that the zip format allows multiple files of the same fully-qualified name to exist\r\n&gt; within a single archive. This has been documented as causing various problems for unsuspecting\r\n&gt; users. If you wish to avoid this behavior you must set the duplicate attribute to a value other\r\n&gt; than its default, &quot;add&quot;.\r\n\r\nFrom the Ant Manual Page: http://ant.apache.org/manual/Tasks/jar.html","title":"Each class has two classfiles in jar file","body":"<p>Are you using the Ant Jar task? If so then you can most definitely get duplicate files in the same jar file. The <strong>duplicate</strong> attribute is used to stop that.</p>\n\n<blockquote>\n  <p>Please note that the zip format allows multiple files of the same fully-qualified name to exist\n  within a single archive. This has been documented as causing various problems for unsuspecting\n  users. If you wish to avoid this behavior you must set the duplicate attribute to a value other\n  than its default, \"add\".</p>\n</blockquote>\n\n<p>From the Ant Manual Page: <a href=\"http://ant.apache.org/manual/Tasks/jar.html\" rel=\"nofollow\">http://ant.apache.org/manual/Tasks/jar.html</a></p>\n"},{"tags":[],"owner":{"account_id":21298,"reputation":381,"user_id":51633,"accept_rate":62,"display_name":"yottamoto"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1314008833,"creation_date":1314008833,"answer_id":7146101,"question_id":7122955,"body_markdown":"I think I found the problem. This is the jar task:\r\n\r\n\t\t&lt;jar basedir=&quot;${build.class.dir}&quot; jarfile=&quot;${dist.dir}/${subproject}.jar&quot;&gt;\r\n\t\t\t&lt;fileset dir=&quot;${build.class.dir}&quot; /&gt;\r\n\t\t&lt;/jar&gt;\r\n\r\nAs I read in the Ant website\r\n\r\n&gt;This task forms an **implicit** FileSet and supports most attributes of &lt;fileset&gt; (dir becomes &gt;basedir) as well as the nested &lt;include&gt;, &lt;exclude&gt; and &lt;patternset&gt; elements.\r\n\r\nSo it would seem that either the &lt;fileset&gt; tag or basedir is uneccessary. At least it works.fine if I comment out the fileset tag.\r\n\r\nThanks for your help and pointers!","title":"Each class has two classfiles in jar file","body":"<p>I think I found the problem. This is the jar task:</p>\n\n<pre><code>    &lt;jar basedir=\"${build.class.dir}\" jarfile=\"${dist.dir}/${subproject}.jar\"&gt;\n        &lt;fileset dir=\"${build.class.dir}\" /&gt;\n    &lt;/jar&gt;\n</code></pre>\n\n<p>As I read in the Ant website</p>\n\n<blockquote>\n  <p>This task forms an <strong>implicit</strong> FileSet and supports most attributes of  (dir becomes >basedir) as well as the nested ,  and  elements.</p>\n</blockquote>\n\n<p>So it would seem that either the  tag or basedir is uneccessary. At least it works.fine if I comment out the fileset tag.</p>\n\n<p>Thanks for your help and pointers!</p>\n"},{"tags":[],"owner":{"account_id":24428422,"reputation":1,"user_id":18353692,"display_name":"Chus"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646224567,"creation_date":1646224567,"answer_id":71322810,"question_id":7122955,"body_markdown":"I got the same issue. I found out that just removing the fileset tag (a child tag of the jar tag) will make the final jar file not have 2 duplicate classes.\r\nAs shown in the picture, just remove the fileset tag in the pink block.\r\n[picture](https://i.stack.imgur.com/UmAJY.png)","title":"Each class has two classfiles in jar file","body":"<p>I got the same issue. I found out that just removing the fileset tag (a child tag of the jar tag) will make the final jar file not have 2 duplicate classes.\nAs shown in the picture, just remove the fileset tag in the pink block.\n<a href=\"https://i.stack.imgur.com/UmAJY.png\" rel=\"nofollow noreferrer\">picture</a></p>\n"}],"owner":{"account_id":21298,"reputation":381,"user_id":51633,"accept_rate":62,"display_name":"yottamoto"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1455,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":7146101,"answer_count":3,"score":2,"last_activity_date":1646224567,"creation_date":1313763555,"question_id":7122955,"body_markdown":"I have a jar file which has two class files per java file.\r\n\r\nJava:\r\n\r\n    Foo.java\r\n    Bar.java\r\nClassfile:\r\n\r\n    Foo.class\r\n    Foo.class\r\n    Bar.class\r\n    Bar.class\r\n\r\nI have verified that there is only one java files per class. The java files do not any contain inner classes.\r\nI am using the ant jar-task to create the jar file. Before I execute the task, there is only one class file per class in the build directory.\r\n\t\r\nI see the double class files with jar -tf jarfile.jar or when I view it in a zip program. When I unpack the files, the zip program asks if it should overwrite the existing file.\r\n\r\nHow can this happen?","title":"Each class has two classfiles in jar file","body":"<p>I have a jar file which has two class files per java file.</p>\n\n<p>Java:</p>\n\n<pre><code>Foo.java\nBar.java\n</code></pre>\n\n<p>Classfile:</p>\n\n<pre><code>Foo.class\nFoo.class\nBar.class\nBar.class\n</code></pre>\n\n<p>I have verified that there is only one java files per class. The java files do not any contain inner classes.\nI am using the ant jar-task to create the jar file. Before I execute the task, there is only one class file per class in the build directory.</p>\n\n<p>I see the double class files with jar -tf jarfile.jar or when I view it in a zip program. When I unpack the files, the zip program asks if it should overwrite the existing file.</p>\n\n<p>How can this happen?</p>\n"},{"tags":["java","android","kotlin","junit","retrofit2"],"comments":[{"owner":{"account_id":11597370,"reputation":432,"user_id":8495710,"display_name":"Arslan Shoukat"},"score":0,"creation_date":1567672317,"post_id":57801029,"comment_id":102034876,"body_markdown":"Show code with other tests.","body":"Show code with other tests."},{"owner":{"account_id":11597370,"reputation":432,"user_id":8495710,"display_name":"Arslan Shoukat"},"score":0,"creation_date":1567672358,"post_id":57801029,"comment_id":102034903,"body_markdown":"This error happens when you try to execute asynchronous task in your test.","body":"This error happens when you try to execute asynchronous task in your test."},{"owner":{"account_id":9728106,"reputation":546,"user_id":10381236,"display_name":"Idris Stack"},"score":0,"creation_date":1567676443,"post_id":57801029,"comment_id":102037093,"body_markdown":"There are lots of tests , I cant post them here @ArslanShoukat","body":"There are lots of tests , I cant post them here @ArslanShoukat"},{"owner":{"account_id":9728106,"reputation":546,"user_id":10381236,"display_name":"Idris Stack"},"score":0,"creation_date":1567676470,"post_id":57801029,"comment_id":102037104,"body_markdown":"Yes , it happens when youy try to execute asynchronous task in your task.","body":"Yes , it happens when youy try to execute asynchronous task in your task."},{"owner":{"account_id":5980169,"reputation":3138,"user_id":4699509,"display_name":"Natig Babayev"},"score":0,"creation_date":1567683897,"post_id":57801029,"comment_id":102041168,"body_markdown":"Could you post at least one another test that you have so we can try out and give you reasonable answer?","body":"Could you post at least one another test that you have so we can try out and give you reasonable answer?"}],"answers":[{"tags":[],"owner":{"account_id":9728106,"reputation":546,"user_id":10381236,"display_name":"Idris Stack"},"down_vote_count":3,"up_vote_count":2,"is_accepted":false,"score":-1,"last_activity_date":1568111862,"creation_date":1568111862,"answer_id":57869014,"question_id":57801029,"body_markdown":"Actually, I finally got the answer, it&#39;s in the link below:\r\n[Answer][1]\r\n\r\n\r\n  [1]: http://tools.android.com/tech-docs/unit-testing-support#TOC-Method-...-not-mocked.-","title":"Unit Test Fails : java.lang.RuntimeException: Method getMainLooper in android.os.Looper not mocked","body":"<p>Actually, I finally got the answer, it's in the link below:\n<a href=\"http://tools.android.com/tech-docs/unit-testing-support#TOC-Method-...-not-mocked.-\" rel=\"nofollow noreferrer\">Answer</a></p>\n"},{"tags":[],"owner":{"account_id":12256183,"reputation":187,"user_id":8945157,"display_name":"PhantomThief"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1646092228,"creation_date":1646092228,"answer_id":71302310,"question_id":57801029,"body_markdown":"Adding this fixed the issue for me.\r\n```\r\nandroid {\r\n  // ...\r\n  testOptions { \r\n    unitTests.returnDefaultValues = true\r\n  }\r\n}\r\n```","title":"Unit Test Fails : java.lang.RuntimeException: Method getMainLooper in android.os.Looper not mocked","body":"<p>Adding this fixed the issue for me.</p>\n<pre><code>android {\n  // ...\n  testOptions { \n    unitTests.returnDefaultValues = true\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5617923,"reputation":31,"user_id":4448640,"display_name":"Yoganandu"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1646224436,"creation_date":1646224436,"answer_id":71322778,"question_id":57801029,"body_markdown":"I found the solution by Liz here and it worked for me. It was a silly mistake. Glad to find a solution after a long trials. https://stackoverflow.com/a/69109928\r\n\r\nPasting the solution for easy reference\r\n\r\nIn case none of the solutions worked alike in my case, if you are using a later version of Gradle and you are using androix, make sure you import from androix in your build gradle.\r\n\r\nimplementation &#39;androidx.arch.core:core-testing:$version&#39;\r\n\r\ninstead of\r\n\r\nimplementation &#39;android.arch.core:core-testing:$version&#39;","title":"Unit Test Fails : java.lang.RuntimeException: Method getMainLooper in android.os.Looper not mocked","body":"<p>I found the solution by Liz here and it worked for me. It was a silly mistake. Glad to find a solution after a long trials. <a href=\"https://stackoverflow.com/a/69109928\">https://stackoverflow.com/a/69109928</a></p>\n<p>Pasting the solution for easy reference</p>\n<p>In case none of the solutions worked alike in my case, if you are using a later version of Gradle and you are using androix, make sure you import from androix in your build gradle.</p>\n<p>implementation 'androidx.arch.core:core-testing:$version'</p>\n<p>instead of</p>\n<p>implementation 'android.arch.core:core-testing:$version'</p>\n"}],"owner":{"account_id":9728106,"reputation":546,"user_id":10381236,"display_name":"Idris Stack"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6948,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":3,"score":2,"last_activity_date":1646224436,"creation_date":1567670687,"question_id":57801029,"body_markdown":"Am having a challenge, where my test passes when I run it alone but fails when I run all the tests, it shows me this error message :\r\n\r\n&gt; java.lang.RuntimeException: Method getMainLooper in android.os.Looper\r\n&gt; not mocked. See http://g.co/androidstudio/not-mocked for details.\r\n&gt; \r\n&gt; \tat android.os.Looper.getMainLooper(Looper.java) \tat\r\n&gt; retrofit2.Platform$Android$MainThreadExecutor.&lt;init&gt;(Platform.java:172)\r\n&gt; \tat\r\n&gt; retrofit2.Platform$Android.defaultCallbackExecutor(Platform.java:145)\r\n&gt; \tat retrofit2.Retrofit$Builder.build(Retrofit.java:585) \tat\r\n&gt; com.andela.mrm.notifications.SlackService.getApi(SlackService.kt:26)\r\n&gt; \tat\r\n&gt; com.andela.mrm.notifications.SlackServiceTest.getAPI(SlackServiceTest.kt:12)\r\n&gt; \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) \tat\r\n&gt; sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n&gt; \tat\r\n&gt; sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n&gt; \tat java.lang.reflect.Method.invoke(Method.java:498) \tat\r\n&gt; org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)\r\n&gt; \tat\r\n&gt; org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\r\n&gt; \tat\r\n&gt; org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)\r\n&gt; \tat\r\n&gt; org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)\r\n&gt; \tat org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325) \tat\r\n&gt; org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)\r\n&gt; \tat\r\n&gt; org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)\r\n&gt; \tat org.junit.runners.ParentRunner$3.run(ParentRunner.java:290) \tat\r\n&gt; org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71) \tat\r\n&gt; org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288) \tat\r\n&gt; org.junit.runners.ParentRunner.access$000(ParentRunner.java:58) \tat\r\n&gt; org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268) \tat\r\n&gt; org.junit.runners.ParentRunner.run(ParentRunner.java:363) \tat\r\n&gt; org.junit.runners.Suite.runChild(Suite.java:128) \tat\r\n&gt; org.junit.runners.Suite.runChild(Suite.java:27) \tat\r\n&gt; org.junit.runners.ParentRunner$3.run(ParentRunner.java:290) \tat\r\n&gt; org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71) \tat\r\n&gt; org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288) \tat\r\n&gt; org.junit.runners.ParentRunner.access$000(ParentRunner.java:58) \tat\r\n&gt; org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268) \tat\r\n&gt; org.junit.runners.ParentRunner.run(ParentRunner.java:363) \tat\r\n&gt; org.junit.runner.JUnitCore.run(JUnitCore.java:137) \tat\r\n&gt; com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:68)\r\n&gt; \tat\r\n&gt; com.intellij.rt.execution.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:47)\r\n&gt; \tat\r\n&gt; com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:242)\r\n&gt; \tat\r\n&gt; com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:70)\r\n\r\n\r\nBelow is the Retrofit instance I want to test :\r\n\r\n\r\n    class SlackService {\r\n    \r\n        private var retrofit: Retrofit? = null\r\n    \r\n        /**\r\n         * This method creates a new instance of the API interface.\r\n         *\r\n         * @return The API interface\r\n         */\r\n        val api: SlackApi\r\n            get() {\r\n                val baseURL = &quot;https://hooks.slack.com/&quot;\r\n                val client = ApiService.getOkHttpClient()\r\n                if (retrofit == null) {\r\n                    retrofit = Retrofit.Builder()\r\n                            .baseUrl(baseURL)\r\n                            .client(client)\r\n                            .build()\r\n                }\r\n                return retrofit!!.create(SlackApi::class.java)\r\n            }\r\n    }\r\n\r\n\r\n\r\nAnd then, this is a test for the Retrofit Instance :\r\n\r\n\r\n    class SlackServiceTest {\r\n    \r\n        @Test\r\n        fun getAPI() {\r\n            val slackService = SlackService()\r\n            assertNotNull(slackService.api)\r\n        }\r\n    }\r\n\r\n\r\nI managed to see some similar [issues][1] via here but they are related with RxJava , and am not using it, how can I be helped ?\r\n\r\nThanks\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/43356314/android-rxjava-2-junit-test-getmainlooper-in-android-os-looper-not-mocked-runt","title":"Unit Test Fails : java.lang.RuntimeException: Method getMainLooper in android.os.Looper not mocked","body":"<p>Am having a challenge, where my test passes when I run it alone but fails when I run all the tests, it shows me this error message :</p>\n\n<blockquote>\n  <p>java.lang.RuntimeException: Method getMainLooper in android.os.Looper\n  not mocked. See <a href=\"http://g.co/androidstudio/not-mocked\" rel=\"nofollow noreferrer\">http://g.co/androidstudio/not-mocked</a> for details.</p>\n  \n  <p>at android.os.Looper.getMainLooper(Looper.java)     at\n  retrofit2.Platform$Android$MainThreadExecutor.(Platform.java:172)\n    at\n  retrofit2.Platform$Android.defaultCallbackExecutor(Platform.java:145)\n    at retrofit2.Retrofit$Builder.build(Retrofit.java:585)  at\n  com.andela.mrm.notifications.SlackService.getApi(SlackService.kt:26)\n    at\n  com.andela.mrm.notifications.SlackServiceTest.getAPI(SlackServiceTest.kt:12)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)  at\n  sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at\n  sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)     at\n  org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)\n    at\n  org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\n    at\n  org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)\n    at\n  org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)\n    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)    at\n  org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)\n    at\n  org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)\n    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)  at\n  org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)   at\n  org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)     at\n  org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)   at\n  org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)  at\n  org.junit.runners.ParentRunner.run(ParentRunner.java:363)     at\n  org.junit.runners.Suite.runChild(Suite.java:128)  at\n  org.junit.runners.Suite.runChild(Suite.java:27)   at\n  org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)   at\n  org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)   at\n  org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)     at\n  org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)   at\n  org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)  at\n  org.junit.runners.ParentRunner.run(ParentRunner.java:363)     at\n  org.junit.runner.JUnitCore.run(JUnitCore.java:137)    at\n  com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:68)\n    at\n  com.intellij.rt.execution.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:47)\n    at\n  com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:242)\n    at\n  com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:70)</p>\n</blockquote>\n\n<p>Below is the Retrofit instance I want to test :</p>\n\n<pre><code>class SlackService {\n\n    private var retrofit: Retrofit? = null\n\n    /**\n     * This method creates a new instance of the API interface.\n     *\n     * @return The API interface\n     */\n    val api: SlackApi\n        get() {\n            val baseURL = \"https://hooks.slack.com/\"\n            val client = ApiService.getOkHttpClient()\n            if (retrofit == null) {\n                retrofit = Retrofit.Builder()\n                        .baseUrl(baseURL)\n                        .client(client)\n                        .build()\n            }\n            return retrofit!!.create(SlackApi::class.java)\n        }\n}\n</code></pre>\n\n<p>And then, this is a test for the Retrofit Instance :</p>\n\n<pre><code>class SlackServiceTest {\n\n    @Test\n    fun getAPI() {\n        val slackService = SlackService()\n        assertNotNull(slackService.api)\n    }\n}\n</code></pre>\n\n<p>I managed to see some similar <a href=\"https://stackoverflow.com/questions/43356314/android-rxjava-2-junit-test-getmainlooper-in-android-os-looper-not-mocked-runt\">issues</a> via here but they are related with RxJava , and am not using it, how can I be helped ?</p>\n\n<p>Thanks</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":355102,"reputation":3643,"user_id":693854,"accept_rate":89,"display_name":"Mark Meyer"},"score":0,"creation_date":1362589195,"post_id":15253406,"comment_id":21511636,"body_markdown":"The buffer is a `char[]` where the characters will go, and index is the start of that array where you want to start the copy.  Just create a char[] of size 3 and set index to 0.  Although substring would probably be better","body":"The buffer is a <code>char[]</code> where the characters will go, and index is the start of that array where you want to start the copy.  Just create a char[] of size 3 and set index to 0.  Although substring would probably be better"},{"owner":{"account_id":7808791,"reputation":895,"user_id":5905741,"accept_rate":71,"display_name":"Amit Mahajan"},"score":0,"creation_date":1494450066,"post_id":15253406,"comment_id":74839151,"body_markdown":"agree with mark convert to char[] (String.toCharArray() and then print last 3)","body":"agree with mark convert to char[] (String.toCharArray() and then print last 3)"}],"answers":[{"tags":[],"owner":{"account_id":260152,"reputation":39795,"user_id":543539,"accept_rate":82,"display_name":"Egor"},"down_vote_count":0,"up_vote_count":209,"is_accepted":true,"score":209,"last_activity_date":1622941039,"creation_date":1362589163,"answer_id":15253450,"question_id":15253406,"body_markdown":"Why not just `String substr = word.substring(word.length() - 3)`?\r\n\r\n**Update**\r\n\r\nPlease make sure you check that the `String` is at least 3 characters long before calling `substring()`:\r\n\r\n    if (word.length() == 3) {\r\n      return word;\r\n    } else if (word.length() &gt; 3) {\r\n      return word.substring(word.length() - 3);\r\n    } else {\r\n      // whatever is appropriate in this case\r\n      throw new IllegalArgumentException(&quot;word has fewer than 3 characters!&quot;);\r\n    }","title":"Get the last three chars from any string - Java","body":"<p>Why not just <code>String substr = word.substring(word.length() - 3)</code>?</p>\n<p><strong>Update</strong></p>\n<p>Please make sure you check that the <code>String</code> is at least 3 characters long before calling <code>substring()</code>:</p>\n<pre><code>if (word.length() == 3) {\n  return word;\n} else if (word.length() &gt; 3) {\n  return word.substring(word.length() - 3);\n} else {\n  // whatever is appropriate in this case\n  throw new IllegalArgumentException(&quot;word has fewer than 3 characters!&quot;);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":162919,"reputation":53273,"user_id":384706,"accept_rate":64,"display_name":"Cratylus"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1362599827,"creation_date":1362589163,"answer_id":15253451,"question_id":15253406,"body_markdown":"`String newString = originalString.substring(originalString.length()-3);`","title":"Get the last three chars from any string - Java","body":"<p><code>String newString = originalString.substring(originalString.length()-3);</code></p>\n"},{"tags":[],"owner":{"account_id":162734,"reputation":1911,"user_id":384386,"accept_rate":74,"display_name":"celestialorb"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1362589231,"creation_date":1362589231,"answer_id":15253476,"question_id":15253406,"body_markdown":"The `getChars` string method does not return a value, instead it dumps its result into your buffer (or destination) array.  The index parameter describes the start offset in your destination array.\r\n\r\nTry this [link][1] for a more verbose description of the `getChars` method.\r\n\r\nI agree with the others on this, I think substring would be a better way to handle what you&#39;re trying to accomplish.\r\n\r\n  [1]: http://www.tutorialspoint.com/java/java_string_getchars.htm","title":"Get the last three chars from any string - Java","body":"<p>The <code>getChars</code> string method does not return a value, instead it dumps its result into your buffer (or destination) array.  The index parameter describes the start offset in your destination array.</p>\n\n<p>Try this <a href=\"http://www.tutorialspoint.com/java/java_string_getchars.htm\" rel=\"nofollow\">link</a> for a more verbose description of the <code>getChars</code> method.</p>\n\n<p>I agree with the others on this, I think substring would be a better way to handle what you're trying to accomplish.</p>\n"},{"tags":[],"owner":{"account_id":556274,"reputation":14256,"user_id":1065868,"accept_rate":77,"display_name":"Matt Busche"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1524104737,"creation_date":1362589246,"answer_id":15253482,"question_id":15253406,"body_markdown":"You can use a substring\r\n\r\n    String word = &quot;onetwotwoone&quot;\r\n    int lenght = word.length(); //Note this should be function.\r\n    String numbers = word.substring(word.length() - 3);\r\n\r\n","title":"Get the last three chars from any string - Java","body":"<p>You can use a substring</p>\n\n<pre><code>String word = \"onetwotwoone\"\nint lenght = word.length(); //Note this should be function.\nString numbers = word.substring(word.length() - 3);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2269981,"reputation":923,"user_id":1997676,"accept_rate":12,"display_name":"Chris"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1362589628,"creation_date":1362589276,"answer_id":15253492,"question_id":15253406,"body_markdown":"    public String getLastThree(String myString) {\r\n        if(myString.length() &gt; 3)\r\n            return myString.substring(myString.length()-3);\r\n        else\r\n            return myString;\r\n    }","title":"Get the last three chars from any string - Java","body":"<pre><code>public String getLastThree(String myString) {\n    if(myString.length() &gt; 3)\n        return myString.substring(myString.length()-3);\n    else\n        return myString;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1580982,"reputation":57898,"user_id":1468366,"accept_rate":78,"display_name":"MvG"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1362589606,"creation_date":1362589277,"answer_id":15253493,"question_id":15253406,"body_markdown":"If you want the `String` composed of the last three characters, you can use [`substring(int)`][1]:\r\n\r\n    String new_word = word.substring(word.length() - 3);\r\n\r\nIf you actually want them as a character array, you should write\r\n\r\n    char[] buffer = new char[3];\r\n    int length = word.length();\r\n    word.getChars(length - 3, length, buffer, 0);\r\n\r\nThe first two arguments to [`getChars`][2] denote the portion of the string you want to extract. The third argument is the array into which that portion will be put. And the last argument gives the position in the buffer where the operation starts.\r\n\r\nIf the string has less than three characters, you&#39;ll get an exception in either of the above cases, so you might want to check for that.\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#substring%28int%29\r\n  [2]: http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#getChars%28int,%20int,%20char%5B%5D,%20int%29","title":"Get the last three chars from any string - Java","body":"<p>If you want the <code>String</code> composed of the last three characters, you can use <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#substring%28int%29\" rel=\"nofollow\"><code>substring(int)</code></a>:</p>\n\n<pre><code>String new_word = word.substring(word.length() - 3);\n</code></pre>\n\n<p>If you actually want them as a character array, you should write</p>\n\n<pre><code>char[] buffer = new char[3];\nint length = word.length();\nword.getChars(length - 3, length, buffer, 0);\n</code></pre>\n\n<p>The first two arguments to <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#getChars%28int,%20int,%20char%5B%5D,%20int%29\" rel=\"nofollow\"><code>getChars</code></a> denote the portion of the string you want to extract. The third argument is the array into which that portion will be put. And the last argument gives the position in the buffer where the operation starts.</p>\n\n<p>If the string has less than three characters, you'll get an exception in either of the above cases, so you might want to check for that.</p>\n"},{"tags":[],"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"down_vote_count":1,"up_vote_count":17,"is_accepted":false,"score":16,"last_activity_date":1525725953,"creation_date":1362589341,"answer_id":15253508,"question_id":15253406,"body_markdown":"Here&#39;s some terse code that does the job using regex:\r\n\r\n    String last3 = str.replaceAll(&quot;.*?(.?.?.?)?$&quot;, &quot;$1&quot;);\r\n\r\nThis code returns *up to* 3; if there are less than 3 it just returns the string.\r\n\r\nThis is how to do it *safely* without regex in one line:\r\n\r\n    String last3 = str == null || str.length() &lt; 3 ? \r\n        str : str.substring(str.length() - 3);\r\n\r\nBy &quot;safely&quot;, I mean without throwing an exception if the string is nulls or shorter than 3 characters (all the other answers are not &quot;safe&quot;).\r\n\r\n---\r\n\r\nThe above code is identical in effect to this code, if you prefer a more verbose, but potentially easier-to-read form:\r\n\r\n    String last3;\r\n    if (str == null || str.length() &lt; 3) {\r\n        last3 = str;\r\n    } else {\r\n        last3 = str.substring(str.length() - 3);\r\n    }","title":"Get the last three chars from any string - Java","body":"<p>Here's some terse code that does the job using regex:</p>\n\n<pre><code>String last3 = str.replaceAll(\".*?(.?.?.?)?$\", \"$1\");\n</code></pre>\n\n<p>This code returns <em>up to</em> 3; if there are less than 3 it just returns the string.</p>\n\n<p>This is how to do it <em>safely</em> without regex in one line:</p>\n\n<pre><code>String last3 = str == null || str.length() &lt; 3 ? \n    str : str.substring(str.length() - 3);\n</code></pre>\n\n<p>By \"safely\", I mean without throwing an exception if the string is nulls or shorter than 3 characters (all the other answers are not \"safe\").</p>\n\n<hr>\n\n<p>The above code is identical in effect to this code, if you prefer a more verbose, but potentially easier-to-read form:</p>\n\n<pre><code>String last3;\nif (str == null || str.length() &lt; 3) {\n    last3 = str;\n} else {\n    last3 = str.substring(str.length() - 3);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3330476,"reputation":1031,"user_id":2799540,"accept_rate":25,"display_name":"Michal Przysucha"},"down_vote_count":1,"up_vote_count":41,"is_accepted":false,"score":40,"last_activity_date":1475484754,"creation_date":1475484754,"answer_id":39827737,"question_id":15253406,"body_markdown":"I would consider `right` method from `StringUtils` class from Apache Commons Lang:\r\nhttp://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/StringUtils.html#right(java.lang.String,%20int)\r\n\r\nIt is safe. You will not get `NullPointerException` or `StringIndexOutOfBoundsException`.\r\n\r\nExample usage:\r\n\r\n`StringUtils.right(&quot;abcdef&quot;, 3)`\r\n\r\nYou can find more examples under the above link.\r\n\r\n\r\n","title":"Get the last three chars from any string - Java","body":"<p>I would consider <code>right</code> method from <code>StringUtils</code> class from Apache Commons Lang:\n<a href=\"http://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/StringUtils.html#right(java.lang.String,%20int)\" rel=\"noreferrer\">http://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/StringUtils.html#right(java.lang.String,%20int)</a></p>\n\n<p>It is safe. You will not get <code>NullPointerException</code> or <code>StringIndexOutOfBoundsException</code>.</p>\n\n<p>Example usage:</p>\n\n<p><code>StringUtils.right(\"abcdef\", 3)</code></p>\n\n<p>You can find more examples under the above link.</p>\n"},{"tags":[],"owner":{"account_id":7888174,"reputation":177,"user_id":5959390,"display_name":"Hodeifa Baswel"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1547179982,"creation_date":1547128444,"answer_id":54130217,"question_id":15253406,"body_markdown":"Alternative way for &quot;insufficient string length or null&quot; save:  \r\n\r\n    String numbers = defaultValue();\r\n    try{\r\n       numbers = word.substring(word.length() - 3);\r\n    } catch(Exception e) {\r\n       System.out.println(&quot;Insufficient String length&quot;);\r\n    }","title":"Get the last three chars from any string - Java","body":"<p>Alternative way for \"insufficient string length or null\" save:  </p>\n\n<pre><code>String numbers = defaultValue();\ntry{\n   numbers = word.substring(word.length() - 3);\n} catch(Exception e) {\n   System.out.println(\"Insufficient String length\");\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7613726,"reputation":77,"user_id":5773879,"display_name":"Mehdi Azadi"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1554869645,"creation_date":1554869645,"answer_id":55604654,"question_id":15253406,"body_markdown":"This method would be helpful :\r\n\r\n    String rightPart(String text,int length)\r\n    {\r\n        if (text.length()&lt;length) return text;\r\n        String raw = &quot;&quot;;\r\n        for (int i = 1; i &lt;= length; i++) {\r\n            raw += text.toCharArray()[text.length()-i];\r\n        }\r\n        return new StringBuilder(raw).reverse().toString();\r\n    }\r\n\r\n","title":"Get the last three chars from any string - Java","body":"<p>This method would be helpful :</p>\n\n<pre><code>String rightPart(String text,int length)\n{\n    if (text.length()&lt;length) return text;\n    String raw = \"\";\n    for (int i = 1; i &lt;= length; i++) {\n        raw += text.toCharArray()[text.length()-i];\n    }\n    return new StringBuilder(raw).reverse().toString();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2111085,"reputation":8537,"user_id":1876355,"accept_rate":91,"display_name":"Pierre"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1564031557,"creation_date":1564031557,"answer_id":57194725,"question_id":15253406,"body_markdown":"Here is a method I use to get the last xx of a string:\r\n\r\n    public static String takeLast(String value, int count) {\r\n        if (value == null || value.trim().length() == 0 || count &lt; 1) {\r\n            return &quot;&quot;;\r\n        }\r\n\r\n        if (value.length() &gt; count) {\r\n            return value.substring(value.length() - count);\r\n        } else {\r\n            return value;\r\n        }\r\n    }\r\n\r\nThen use it like so:\r\n\r\n    String testStr = &quot;this is a test string&quot;;\r\n    String last1 = takeLast(testStr, 1); //Output: g\r\n    String last4 = takeLast(testStr, 4); //Output: ring","title":"Get the last three chars from any string - Java","body":"<p>Here is a method I use to get the last xx of a string:</p>\n\n<pre><code>public static String takeLast(String value, int count) {\n    if (value == null || value.trim().length() == 0 || count &lt; 1) {\n        return \"\";\n    }\n\n    if (value.length() &gt; count) {\n        return value.substring(value.length() - count);\n    } else {\n        return value;\n    }\n}\n</code></pre>\n\n<p>Then use it like so:</p>\n\n<pre><code>String testStr = \"this is a test string\";\nString last1 = takeLast(testStr, 1); //Output: g\nString last4 = takeLast(testStr, 4); //Output: ring\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11106303,"reputation":11,"user_id":8153379,"display_name":"masterscode"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646224274,"creation_date":1646224274,"answer_id":71322748,"question_id":15253406,"body_markdown":"This method will return the x amount of characters from the end. \r\n \r\n    public static String lastXChars(String v, int x) {\r\n        return v.length() &lt;= x ? v : v.substring(v.length() - x);\r\n    }\r\n\r\n//usage\r\n\r\n    System.out.println(lastXChars(&quot;stackoverflow&quot;, 4)); // flow","title":"Get the last three chars from any string - Java","body":"<p>This method will return the x amount of characters from the end.</p>\n<pre><code>public static String lastXChars(String v, int x) {\n    return v.length() &lt;= x ? v : v.substring(v.length() - x);\n}\n</code></pre>\n<p>//usage</p>\n<pre><code>System.out.println(lastXChars(&quot;stackoverflow&quot;, 4)); // flow\n</code></pre>\n"}],"owner":{"account_id":1228162,"reputation":17908,"user_id":1193321,"accept_rate":65,"display_name":"EGHDK"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":298047,"favorite_count":0,"down_vote_count":1,"up_vote_count":79,"accepted_answer_id":15253450,"answer_count":12,"score":78,"last_activity_date":1646224274,"creation_date":1362589033,"question_id":15253406,"body_markdown":"I&#39;m trying to take the last three chracters of any string and save it as another String variable. I&#39;m having some tough time with my thought process.\r\n\r\n    String word = &quot;onetwotwoone&quot;\r\n    int length = word.length();\r\n    String new_word = id.getChars(length-3, length, buffer, index);\r\n\r\nI don&#39;t know how to use the getChars method when it comes to buffer or index. Eclipse is making me have those in there. Any suggestions?","title":"Get the last three chars from any string - Java","body":"<p>I'm trying to take the last three chracters of any string and save it as another String variable. I'm having some tough time with my thought process.</p>\n\n<pre><code>String word = \"onetwotwoone\"\nint length = word.length();\nString new_word = id.getChars(length-3, length, buffer, index);\n</code></pre>\n\n<p>I don't know how to use the getChars method when it comes to buffer or index. Eclipse is making me have those in there. Any suggestions?</p>\n"},{"tags":["java","rmi","jmx","jconsole"],"answers":[{"tags":[],"owner":{"account_id":15611,"reputation":14858,"user_id":33165,"accept_rate":80,"display_name":"tcurdt"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1228182699,"creation_date":1228182699,"answer_id":332801,"question_id":331615,"body_markdown":"Fernando already provided a link to [my blog post][1] :) ..it&#39;s not trivial. You have to provide your own RMIServerSocketFactoryImpl that creates sockets on the wanted address.\r\n\r\nIf internal/external interfaces are the problem and you have local access setting up a local firewall might be easier.\r\n\r\n  [1]: http://vafer.org/blog/20061010091658","title":"How to have JMX bind to a specific interface?","body":"<p>Fernando already provided a link to <a href=\"http://vafer.org/blog/20061010091658\" rel=\"noreferrer\">my blog post</a> :) ..it's not trivial. You have to provide your own RMIServerSocketFactoryImpl that creates sockets on the wanted address.</p>\n\n<p>If internal/external interfaces are the problem and you have local access setting up a local firewall might be easier.</p>\n"},{"tags":[],"owner":{"account_id":96731,"reputation":1236,"user_id":262768,"accept_rate":50,"display_name":"sosiouxme"},"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1410808298,"creation_date":1410808298,"answer_id":25855193,"question_id":331615,"body_markdown":"The accepted answer is pretty old. There are some indications that Java now provides some options to enable this. For instance I have seen:\r\n\r\n    -Djava.rmi.server.hostname=&lt;YOUR_IP&gt;\r\n\r\n...as well as...\r\n\r\n    -Dcom.sun.management.jmxremote.host=&lt;YOUR_IP&gt;\r\n\r\n\r\nHowever, at least on my system under jdk 1.7, these do not seem to have any effect - the JMX connector still binds to *. An updated answer (with specific applicable versions) would be much appreciated. This *should* be simple.","title":"How to have JMX bind to a specific interface?","body":"<p>The accepted answer is pretty old. There are some indications that Java now provides some options to enable this. For instance I have seen:</p>\n\n<pre><code>-Djava.rmi.server.hostname=&lt;YOUR_IP&gt;\n</code></pre>\n\n<p>...as well as...</p>\n\n<pre><code>-Dcom.sun.management.jmxremote.host=&lt;YOUR_IP&gt;\n</code></pre>\n\n<p>However, at least on my system under jdk 1.7, these do not seem to have any effect - the JMX connector still binds to *. An updated answer (with specific applicable versions) would be much appreciated. This <em>should</em> be simple.</p>\n"},{"tags":[],"owner":{"account_id":7754803,"reputation":137,"user_id":5869572,"display_name":"Niranjan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1470771902,"creation_date":1470771902,"answer_id":38859202,"question_id":331615,"body_markdown":"I haven&#39;t tried this but this may help.\r\n\r\nthe main nuisance here was that there is no easy way to specify the host IP \r\naddress for JMX to bind to, it would always bind to all interfaces. The \r\n&#39;java.rmi.server.hostname&#39; property did not work and I didn&#39;t want to pick \r\ndifferent ports for all the different instances on the same host.\r\n\r\nAlso, I didn&#39;t want to create my own RMIServerSocketFactory with all the \r\ncomplexities associated with it, I was after a simple patch to the existing code.\r\n\r\nI&#39;ve fixed this by patching the default JVM RMI socket factory that is \r\nresponsible for creating this server socket. It now supports the new \r\n&#39;com.sun.management.jmxremote.host&#39; property.\r\n\r\nTo get this to work, save the Java code below into a file named \r\nsun/rmi/transport/proxy/RMIDirectSocketFactory.java.\r\n\r\nCompile and create jmx_patch.jar from it and place it into the tomcat lib/ \r\nfolder.\r\n\r\nYou then need to add the following line to bin/setenv.sh:\r\n\r\nCLASSPATH=$CLASSPATH:$CATALINA_HOME/lib/mx_patch.jar\r\n\r\nadd this option in tomcat instance start up\r\n\r\n-Dcom.sun.management.jmxremote.host=192.168.100.100&quot;\r\n\r\nThis will then bind the JMX service only to address 192.168.100.100. The 2 other \r\nrandom RMI listening ports will still bind to all interfaces, but that is fine \r\nas they always pick a free port anyway.\r\n\r\nYou can now run multiple tomcat instances on a single host with all the \r\ndefault ports intact (e.g. 8080 for JMX for all of them).\r\n\r\n    package sun.rmi.transport.proxy;\r\n\r\n    import java.io.IOException;\r\n    import java.net.InetAddress;\r\n    import java.net.ServerSocket;\r\n    import java.net.Socket;\r\n    import java.rmi.server.RMISocketFactory;\r\n\r\n    public class RMIDirectSocketFactory extends RMISocketFactory {\r\n\r\n        public Socket createSocket(String host, int port) throws IOException\r\n        {\r\n\t     return new Socket(host, port);\r\n        }\r\n\r\n       public ServerSocket createServerSocket(int port) throws IOException\r\n       {\r\n\t   String jmx_host = System.getProperty(&quot;com.sun.management.jmxremote.host&quot;);\r\n\t   String jmx_port = System.getProperty(&quot;com.sun.management.jmxremote.port&quot;);\r\n\r\n\t  // Allow JMX to bind to specific address\r\n\t  if (jmx_host != null &amp;&amp; jmx_port != null &amp;&amp; port != 0 &amp;&amp; integer.toString(port).equals(jmx_port)) {\r\n\t    InetAddress[] inetAddresses = InetAddress.getAllByName(jmx_host);\r\n\t    if (inetAddresses.length &gt; 0) {\r\n\t\treturn new ServerSocket(port, 50, inetAddresses[0]);\r\n\t   }\r\n\t}\r\n\r\n\t return new ServerSocket(port);\r\n      }\r\n   }\r\n","title":"How to have JMX bind to a specific interface?","body":"<p>I haven't tried this but this may help.</p>\n\n<p>the main nuisance here was that there is no easy way to specify the host IP \naddress for JMX to bind to, it would always bind to all interfaces. The \n'java.rmi.server.hostname' property did not work and I didn't want to pick \ndifferent ports for all the different instances on the same host.</p>\n\n<p>Also, I didn't want to create my own RMIServerSocketFactory with all the \ncomplexities associated with it, I was after a simple patch to the existing code.</p>\n\n<p>I've fixed this by patching the default JVM RMI socket factory that is \nresponsible for creating this server socket. It now supports the new \n'com.sun.management.jmxremote.host' property.</p>\n\n<p>To get this to work, save the Java code below into a file named \nsun/rmi/transport/proxy/RMIDirectSocketFactory.java.</p>\n\n<p>Compile and create jmx_patch.jar from it and place it into the tomcat lib/ \nfolder.</p>\n\n<p>You then need to add the following line to bin/setenv.sh:</p>\n\n<p>CLASSPATH=$CLASSPATH:$CATALINA_HOME/lib/mx_patch.jar</p>\n\n<p>add this option in tomcat instance start up</p>\n\n<p>-Dcom.sun.management.jmxremote.host=192.168.100.100\"</p>\n\n<p>This will then bind the JMX service only to address 192.168.100.100. The 2 other \nrandom RMI listening ports will still bind to all interfaces, but that is fine \nas they always pick a free port anyway.</p>\n\n<p>You can now run multiple tomcat instances on a single host with all the \ndefault ports intact (e.g. 8080 for JMX for all of them).</p>\n\n<pre><code>package sun.rmi.transport.proxy;\n\nimport java.io.IOException;\nimport java.net.InetAddress;\nimport java.net.ServerSocket;\nimport java.net.Socket;\nimport java.rmi.server.RMISocketFactory;\n\npublic class RMIDirectSocketFactory extends RMISocketFactory {\n\n    public Socket createSocket(String host, int port) throws IOException\n    {\n     return new Socket(host, port);\n    }\n\n   public ServerSocket createServerSocket(int port) throws IOException\n   {\n   String jmx_host = System.getProperty(\"com.sun.management.jmxremote.host\");\n   String jmx_port = System.getProperty(\"com.sun.management.jmxremote.port\");\n\n  // Allow JMX to bind to specific address\n  if (jmx_host != null &amp;&amp; jmx_port != null &amp;&amp; port != 0 &amp;&amp; integer.toString(port).equals(jmx_port)) {\n    InetAddress[] inetAddresses = InetAddress.getAllByName(jmx_host);\n    if (inetAddresses.length &gt; 0) {\n    return new ServerSocket(port, 50, inetAddresses[0]);\n   }\n}\n\n return new ServerSocket(port);\n  }\n</code></pre>\n\n<p>}</p>\n"},{"tags":[],"owner":{"account_id":1235750,"reputation":815,"user_id":1199358,"display_name":"Gaper"},"down_vote_count":0,"up_vote_count":33,"is_accepted":true,"score":33,"last_activity_date":1473153080,"creation_date":1473153080,"answer_id":39345042,"question_id":331615,"body_markdown":"If anyone else will be losing his nerves with this ... After 10 years, they finally fixed it!\r\n\r\nSince Java 8u102 `-Dcom.sun.management.jmxremote.host` binds to the selected IP \r\n\r\nsee: https://bugs.openjdk.java.net/browse/JDK-6425769","title":"How to have JMX bind to a specific interface?","body":"<p>If anyone else will be losing his nerves with this ... After 10 years, they finally fixed it!</p>\n\n<p>Since Java 8u102 <code>-Dcom.sun.management.jmxremote.host</code> binds to the selected IP </p>\n\n<p>see: <a href=\"https://bugs.openjdk.java.net/browse/JDK-6425769\" rel=\"noreferrer\">https://bugs.openjdk.java.net/browse/JDK-6425769</a></p>\n"},{"tags":[],"owner":{"account_id":4086159,"reputation":1,"user_id":7736838,"display_name":"Roy Sigurd Karlsbakk"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1489959489,"creation_date":1489959489,"answer_id":42892606,"question_id":331615,"body_markdown":"I just tried\r\n\r\n-Dcom.sun.management.jmxremote.host=&lt;YOUR_IP&gt;\r\n\r\nwith openjdk 1.8, and it works well. It binds to that addess (according to netstat) and all looks right (and works).","title":"How to have JMX bind to a specific interface?","body":"<p>I just tried</p>\n\n<p>-Dcom.sun.management.jmxremote.host=</p>\n\n<p>with openjdk 1.8, and it works well. It binds to that addess (according to netstat) and all looks right (and works).</p>\n"},{"tags":[],"owner":{"account_id":2370919,"reputation":1582,"user_id":2075565,"accept_rate":67,"display_name":"Ivan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1627106386,"creation_date":1627106386,"answer_id":68507412,"question_id":331615,"body_markdown":"When just using `com.sun.management.jmxremote.host` without changing `com.sun.management.jmxremote.ssl` (default is `true`) or `com.sun.management.jmxremote.registry.ssl` (default is `false`) it will still bind to all interfaces for `com.sun.management.jmxremote.port`, and will use `com.sun.management.jmxremote.host` only for `com.sun.management.jmxremote.rmi.port` (which defaults to random port). Not sure why it is the case, it look like a bug. For any other combination of these `jmxremote.ssl` and `jmxremote.registry.ssl` values, it will properly use the given `jmxremote.host` for both ports.\r\n\r\nFor example, with\r\n\r\n      -Dcom.sun.management.jmxremote.authenticate=false\r\n      -Dcom.sun.management.jmxremote.port=1234\r\n      -Dcom.sun.management.jmxremote.host=interface1\r\n      \r\n\r\nit will still bind to all interfaces for the port `1234`, and bind to `interface1` only for the random `jmxremote.rmi.port`.\r\n\r\nNote that a JMX client first connects to `jmxremote.port`, which is a RMI registry, over which it receives the actual JMX server port `jmxremote.rmi.port`, so the client would still be able to talk to the actual JMX server only over the `jmxremote.host` interface. However it is still undesirable for the RMI registry to listen on all interfaces, since it will lead to port conflicts when different VMs are started with the same `jmxremote.port` value, as is the scenario in this question. \r\n","title":"How to have JMX bind to a specific interface?","body":"<p>When just using <code>com.sun.management.jmxremote.host</code> without changing <code>com.sun.management.jmxremote.ssl</code> (default is <code>true</code>) or <code>com.sun.management.jmxremote.registry.ssl</code> (default is <code>false</code>) it will still bind to all interfaces for <code>com.sun.management.jmxremote.port</code>, and will use <code>com.sun.management.jmxremote.host</code> only for <code>com.sun.management.jmxremote.rmi.port</code> (which defaults to random port). Not sure why it is the case, it look like a bug. For any other combination of these <code>jmxremote.ssl</code> and <code>jmxremote.registry.ssl</code> values, it will properly use the given <code>jmxremote.host</code> for both ports.</p>\n<p>For example, with</p>\n<pre><code>  -Dcom.sun.management.jmxremote.authenticate=false\n  -Dcom.sun.management.jmxremote.port=1234\n  -Dcom.sun.management.jmxremote.host=interface1\n  \n</code></pre>\n<p>it will still bind to all interfaces for the port <code>1234</code>, and bind to <code>interface1</code> only for the random <code>jmxremote.rmi.port</code>.</p>\n<p>Note that a JMX client first connects to <code>jmxremote.port</code>, which is a RMI registry, over which it receives the actual JMX server port <code>jmxremote.rmi.port</code>, so the client would still be able to talk to the actual JMX server only over the <code>jmxremote.host</code> interface. However it is still undesirable for the RMI registry to listen on all interfaces, since it will lead to port conflicts when different VMs are started with the same <code>jmxremote.port</code> value, as is the scenario in this question.</p>\n"},{"tags":[],"owner":{"account_id":32602,"reputation":22095,"user_id":90580,"accept_rate":47,"display_name":"RubenLaguna"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646224170,"creation_date":1646066587,"answer_id":71298285,"question_id":331615,"body_markdown":"You will need to set at least `com.sun.management.jmxremote.{host,port,ssl}`, although `com.sun.management.jmxremote.host` is not documented it does work at least in the OpenJDK 1.8.0_312. \r\n\r\nYou will (most likely) need to set also `java.rmi.server.hostname`. Remember that the JMX client first connect to the jmxremot host and port, then gets an RMI host and port from there, and finally will connect via RMI to that host and port, if you don&#39;t set the `java.rmi.server.hostname` the host (the ip) that the jmx client will obtain will not have any listener for that port (since you are only listening at 127.0.0.1)\r\n\r\n\r\nHere is an example that works, not that I also disabled authentication and forced IPv4: \r\n\r\n\r\n```\r\n/usr/lib/jvm/java-8-openjdk-amd64//bin/java \\\r\n-Dcom.sun.management.jmxremote.host=127.0.0.1  \\\r\n-Djava.rmi.server.hostname=127.0.0.1 \\\r\n-Dcom.sun.management.jmxremote.port=2222 \\\r\n-Dcom.sun.management.jmxremote.ssl=false \\\r\n-Dcom.sun.management.jmxremote.registry.ssl=false  \\\r\n-Dcom.sun.management.jmxremote.authenticate=false \\\r\n-Djava.net.preferIPv4Stack=true \\\r\n-jar your-uber.jar\r\n  \r\n```\r\n\r\n\r\nThe output from netstat confirms that port 222 is bound to 127.0.0.1 only and not to 0.0.0.0: \r\n\r\n```\r\nnetstat -plnt|grep 2222\r\nActive Internet connections (only servers)\r\nProto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name\r\ntcp        0      0 127.0.0.1:2222          0.0.0.0:*               LISTEN      15390/java\r\n```","title":"How to have JMX bind to a specific interface?","body":"<p>You will need to set at least <code>com.sun.management.jmxremote.{host,port,ssl}</code>, although <code>com.sun.management.jmxremote.host</code> is not documented it does work at least in the OpenJDK 1.8.0_312.</p>\n<p>You will (most likely) need to set also <code>java.rmi.server.hostname</code>. Remember that the JMX client first connect to the jmxremot host and port, then gets an RMI host and port from there, and finally will connect via RMI to that host and port, if you don't set the <code>java.rmi.server.hostname</code> the host (the ip) that the jmx client will obtain will not have any listener for that port (since you are only listening at 127.0.0.1)</p>\n<p>Here is an example that works, not that I also disabled authentication and forced IPv4:</p>\n<pre><code>/usr/lib/jvm/java-8-openjdk-amd64//bin/java \\\n-Dcom.sun.management.jmxremote.host=127.0.0.1  \\\n-Djava.rmi.server.hostname=127.0.0.1 \\\n-Dcom.sun.management.jmxremote.port=2222 \\\n-Dcom.sun.management.jmxremote.ssl=false \\\n-Dcom.sun.management.jmxremote.registry.ssl=false  \\\n-Dcom.sun.management.jmxremote.authenticate=false \\\n-Djava.net.preferIPv4Stack=true \\\n-jar your-uber.jar\n  \n</code></pre>\n<p>The output from netstat confirms that port 222 is bound to 127.0.0.1 only and not to 0.0.0.0:</p>\n<pre><code>netstat -plnt|grep 2222\nActive Internet connections (only servers)\nProto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name\ntcp        0      0 127.0.0.1:2222          0.0.0.0:*               LISTEN      15390/java\n</code></pre>\n"}],"owner":{"account_id":13446,"reputation":44828,"user_id":27020,"accept_rate":100,"display_name":"Marc Novakowski"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":26083,"favorite_count":0,"down_vote_count":0,"up_vote_count":24,"accepted_answer_id":39345042,"answer_count":7,"score":24,"last_activity_date":1646224170,"creation_date":1228153507,"question_id":331615,"body_markdown":"I am currently starting my Java VM with the **`com.sun.management.jmxremote.*`** properties so that I can connect to it via JConsole for management and monitoring.  Unfortunately, it listens on all interfaces (IP addresses) on the machine.\r\n\r\nIn our environment, there are often cases where there is more than one Java VM running on a machine at the same time.  While it&#39;s possible to tell JMX to listen on different TCP ports (using `com.sun.management.jmxremote.port`), it would be nice to instead have JMX use the standard JMX port and just bind to a specific IP address (rather than all of them).\r\n\r\nThis would make it much easier to figure out which VM we&#39;re connecting to via JConsole (since each VM effectively &quot;owns&quot; its own IP address).  Has anyone figured out how to make JMX listen on a single IP address or hostname?","title":"How to have JMX bind to a specific interface?","body":"<p>I am currently starting my Java VM with the <strong><code>com.sun.management.jmxremote.*</code></strong> properties so that I can connect to it via JConsole for management and monitoring.  Unfortunately, it listens on all interfaces (IP addresses) on the machine.</p>\n\n<p>In our environment, there are often cases where there is more than one Java VM running on a machine at the same time.  While it's possible to tell JMX to listen on different TCP ports (using <code>com.sun.management.jmxremote.port</code>), it would be nice to instead have JMX use the standard JMX port and just bind to a specific IP address (rather than all of them).</p>\n\n<p>This would make it much easier to figure out which VM we're connecting to via JConsole (since each VM effectively \"owns\" its own IP address).  Has anyone figured out how to make JMX listen on a single IP address or hostname?</p>\n"},{"tags":["java","android","android-studio"],"comments":[{"owner":{"account_id":22616962,"reputation":3155,"user_id":16796366,"display_name":"Nitish"},"score":1,"creation_date":1646223148,"post_id":71322395,"comment_id":126068750,"body_markdown":"In Android 10 and above you can&#39;t enable/disable wifi programmatically anymore.  But you can navigate user to Settings Panel to toggle wifi connectivity","body":"In Android 10 and above you can&#39;t enable/disable wifi programmatically anymore.  But you can navigate user to Settings Panel to toggle wifi connectivity"},{"owner":{"account_id":21427479,"reputation":63,"user_id":15784542,"display_name":"Haechan"},"score":0,"creation_date":1646232047,"post_id":71322395,"comment_id":126072290,"body_markdown":"This is a big help. Thank you so much.","body":"This is a big help. Thank you so much."}],"answers":[{"tags":[],"owner":{"account_id":5282904,"reputation":18287,"user_id":4217682,"accept_rate":50,"display_name":"snachmsm"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1646223558,"creation_date":1646223558,"answer_id":71322595,"question_id":71322395,"body_markdown":"[`setWifiEnabled`](https://developer.android.com/reference/android/net/wifi/WifiManager.html#setWifiEnabled(boolean)) is deprecated in Android 10+ due to security reasons\r\n\r\n&gt; This method was deprecated in API level 29.\r\nStarting with Build.VERSION_CODES#Q, applications are not allowed to enable/disable Wi-Fi. Compatibility Note: For applications targeting Build.VERSION_CODES.Q or above, this API will always fail and return false. If apps are targeting an older SDK (Build.VERSION_CODES.P or below), they can continue to use this API.\r\n\r\nnow your only way is to pass user to Settings GUI, in which Wi-Fi may be enabled manually only\r\n\r\n    Intent settingsIntent = new Intent(Settings.Panel.ACTION_INTERNET_CONNECTIVITY);\r\n    startActivityForResult(settingsIntent);\r\n\r\n","title":"WifiManager not working on API 29 and higher using Android Studio","body":"<p><a href=\"https://developer.android.com/reference/android/net/wifi/WifiManager.html#setWifiEnabled(boolean)\" rel=\"nofollow noreferrer\"><code>setWifiEnabled</code></a> is deprecated in Android 10+ due to security reasons</p>\n<blockquote>\n<p>This method was deprecated in API level 29.\nStarting with Build.VERSION_CODES#Q, applications are not allowed to enable/disable Wi-Fi. Compatibility Note: For applications targeting Build.VERSION_CODES.Q or above, this API will always fail and return false. If apps are targeting an older SDK (Build.VERSION_CODES.P or below), they can continue to use this API.</p>\n</blockquote>\n<p>now your only way is to pass user to Settings GUI, in which Wi-Fi may be enabled manually only</p>\n<pre><code>Intent settingsIntent = new Intent(Settings.Panel.ACTION_INTERNET_CONNECTIVITY);\nstartActivityForResult(settingsIntent);\n</code></pre>\n"}],"owner":{"account_id":21427479,"reputation":63,"user_id":15784542,"display_name":"Haechan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":916,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71322595,"answer_count":1,"score":0,"last_activity_date":1646223558,"creation_date":1646222671,"question_id":71322395,"body_markdown":"So I tried to use the code for wifi manager to disable/enable wifi, my app&#39;s target device are for API 29 and higher only. I just found out that WifiManager only works for older version. Is there other way on how to do it that will work on higher versions?\r\n\r\n\r\nFor reference only:\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.CHANGE_WIFI_STATE&quot;&gt;&lt;/uses-permission&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_WIFI_STATE&quot;&gt;&lt;/uses-permission&gt;\r\n\r\n    WifiManager wifiManager = (WifiManager) getApplicationContext().getSystemService(WIFI_SERVICE);\r\n\r\n    wifiManager.setWifiEnabled(true);","title":"WifiManager not working on API 29 and higher using Android Studio","body":"<p>So I tried to use the code for wifi manager to disable/enable wifi, my app's target device are for API 29 and higher only. I just found out that WifiManager only works for older version. Is there other way on how to do it that will work on higher versions?</p>\n<p>For reference only:</p>\n<pre><code>&lt;uses-permission android:name=&quot;android.permission.CHANGE_WIFI_STATE&quot;&gt;&lt;/uses-permission&gt;\n&lt;uses-permission android:name=&quot;android.permission.ACCESS_WIFI_STATE&quot;&gt;&lt;/uses-permission&gt;\n\nWifiManager wifiManager = (WifiManager) getApplicationContext().getSystemService(WIFI_SERVICE);\n\nwifiManager.setWifiEnabled(true);\n</code></pre>\n"},{"tags":["java","spring-boot","exception","illegalstateexception","encoder"],"owner":{"account_id":20667761,"reputation":53,"user_id":15174185,"display_name":"Chaithra Shenoy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1417,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1646223332,"creation_date":1646223332,"question_id":71322541,"body_markdown":"I am getting this exception intermediately while hitting the API in bulk. What is the reason that I am facing this issue?\r\n\r\n```io.netty.handler.codec.EncoderException: java.lang.IllegalStateException: unexpected message type: DefaultFullHttpRequest, state: 1\\tat io.netty.handler.codec.MessageToMessageEncoder.write(MessageToMessageEncoder.java:104)\\tSuppressed: reactor.core.publisher.FluxOnAssembly$OnAssemblyException: Error has been observed at the following site(s):\\t|_ checkpoint  org.springframework.cloud.gateway.filter.WeightCalculatorWebFilter [DefaultWebFilterChain]\\t|_ checkpoint  org.springframework.boot.actuate.metrics.web.reactive.server.MetricsWebFilter [DefaultWebFilterChain]\\t```","title":"io.netty.handler.codec.EncoderException: java.lang.IllegalStateException: unexpected message type: DefaultFullHttpRequest","body":"<p>I am getting this exception intermediately while hitting the API in bulk. What is the reason that I am facing this issue?</p>\n<p><code>io.netty.handler.codec.EncoderException: java.lang.IllegalStateException: unexpected message type: DefaultFullHttpRequest, state: 1\\tat io.netty.handler.codec.MessageToMessageEncoder.write(MessageToMessageEncoder.java:104)\\tSuppressed: reactor.core.publisher.FluxOnAssembly$OnAssemblyException: Error has been observed at the following site(s):\\t|_ checkpoint  org.springframework.cloud.gateway.filter.WeightCalculatorWebFilter [DefaultWebFilterChain]\\t|_ checkpoint  org.springframework.boot.actuate.metrics.web.reactive.server.MetricsWebFilter [DefaultWebFilterChain]\\t</code></p>\n"},{"tags":["java","spring","spring-boot","spring-security"],"comments":[{"owner":{"account_id":2021661,"reputation":61998,"user_id":2541573,"accept_rate":100,"display_name":"jub0bs"},"score":0,"creation_date":1646222828,"post_id":71320970,"comment_id":126068643,"body_markdown":"How is this question related to CORS? I&#39;m dropping the [tag:cors] tag.","body":"How is this question related to CORS? I&#39;m dropping the <a href=\"https://stackoverflow.com/questions/tagged/cors\">cors</a> tag."},{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":2,"creation_date":1646225733,"post_id":71320970,"comment_id":126069676,"body_markdown":"Please add the full stacktrace and second your pattern `/*/**` is imho wrong and should be either `/**` or better use `authorizeRequests().anyRequest().permitAll()` instead of what you have now.","body":"Please add the full stacktrace and second your pattern <code>&#47;*&#47;**</code> is imho wrong and should be either <code>&#47;**</code> or better use <code>authorizeRequests().anyRequest().permitAll()</code> instead of what you have now."}],"owner":{"account_id":21353175,"reputation":31,"user_id":15722474,"display_name":"mudit"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":842,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1646222851,"creation_date":1646216271,"question_id":71320970,"body_markdown":"Spring Web version : 2.6.4\r\nSpring Security version : 2.6.4\r\nJava : 1.8\r\n\r\nI am trying to access a get api without Authorization and I am getting following error in the log \r\n\r\n```\r\nfilter invocation [/error] denied for AnonymousAuthenticationToken [Principal=anonymousUser, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ANONYMOUS]]\r\n```\r\n\r\norg.springframework.security.access.AccessDeniedException: Access is denied\r\n\r\nMy Web security config\r\n\r\n        @Configuration\r\n        @EnableWebSecurity\r\n        public class WebSecurityConfig extends WebSecurityConfigurerAdapter {\r\n        \t\r\n        \t@Autowired\r\n        \tprivate CORSFilter cORSFilter;\r\n        \r\n        \t@Override\r\n        \tprotected void configure(HttpSecurity http) throws Exception {\r\n        \t\thttp.sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS).and().csrf().disable().anonymous().and()\r\n        \t\t\t\t.authorizeRequests().antMatchers(&quot;/*/**&quot;).permitAll().and().addFilterBefore(cORSFilter, WebAsyncManagerIntegrationFilter.class);\r\n        \t}\r\n        }\r\n\r\nMy Rest Controller \r\n\r\n    @RestController\r\n    @RequestMapping(&quot;/api/flow&quot;)\r\n    @CrossOrigin(origins = &quot;*&quot;)\r\n    public class FlowController {\r\n    \r\n        private final FlowService flowService;\r\n    \r\n        public FlowController(FlowService flowService) {\r\n            this.flowService = flowService;\r\n        }\r\n    \r\n        @GetMapping(&quot;/list/{clientRef}&quot;)\r\n    \t@CrossOrigin(origins = &quot;*&quot;)\r\n        public List&lt;FlowEntity&gt; getFlows(@PathVariable String clientRef) {\r\n            return flowService.getFlows(clientRef);\r\n    }\r\n\r\n","title":"Spring Security not allowing anonymous login","body":"<p>Spring Web version : 2.6.4\nSpring Security version : 2.6.4\nJava : 1.8</p>\n<p>I am trying to access a get api without Authorization and I am getting following error in the log</p>\n<pre><code>filter invocation [/error] denied for AnonymousAuthenticationToken [Principal=anonymousUser, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ANONYMOUS]]\n</code></pre>\n<p>org.springframework.security.access.AccessDeniedException: Access is denied</p>\n<p>My Web security config</p>\n<pre><code>    @Configuration\n    @EnableWebSecurity\n    public class WebSecurityConfig extends WebSecurityConfigurerAdapter {\n        \n        @Autowired\n        private CORSFilter cORSFilter;\n    \n        @Override\n        protected void configure(HttpSecurity http) throws Exception {\n            http.sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS).and().csrf().disable().anonymous().and()\n                    .authorizeRequests().antMatchers(&quot;/*/**&quot;).permitAll().and().addFilterBefore(cORSFilter, WebAsyncManagerIntegrationFilter.class);\n        }\n    }\n</code></pre>\n<p>My Rest Controller</p>\n<pre><code>@RestController\n@RequestMapping(&quot;/api/flow&quot;)\n@CrossOrigin(origins = &quot;*&quot;)\npublic class FlowController {\n\n    private final FlowService flowService;\n\n    public FlowController(FlowService flowService) {\n        this.flowService = flowService;\n    }\n\n    @GetMapping(&quot;/list/{clientRef}&quot;)\n    @CrossOrigin(origins = &quot;*&quot;)\n    public List&lt;FlowEntity&gt; getFlows(@PathVariable String clientRef) {\n        return flowService.getFlows(clientRef);\n}\n</code></pre>\n"},{"tags":["java","intersection"],"comments":[{"owner":{"account_id":1408014,"reputation":5707,"user_id":1335189,"accept_rate":73,"display_name":"JorgeeFG"},"score":0,"creation_date":1433525080,"post_id":30672277,"comment_id":49406720,"body_markdown":"@Alexander, I don&#39;t have a number that want to know if exists in a range. I have 2 ranges and want to know if there is intersection","body":"@Alexander, I don&#39;t have a number that want to know if exists in a range. I have 2 ranges and want to know if there is intersection"}],"answers":[{"tags":[],"owner":{"account_id":39177,"reputation":17181,"user_id":112877,"display_name":"Eugene Ryzhikov"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1433525847,"creation_date":1433524791,"answer_id":30672327,"question_id":30672277,"body_markdown":"Just using min/max :\r\n\r\nif follwing condition is true - they **don&#39;t** intersect\r\n\r\n```maxA &lt; minB || maxB &lt; minA```\r\n","title":"How to calculate if there is intersection between 2 ranges of ints in Java","body":"<p>Just using min/max :</p>\n\n<p>if follwing condition is true - they <strong>don't</strong> intersect</p>\n\n<p><code>maxA &lt; minB || maxB &lt; minA</code></p>\n"},{"tags":[],"owner":{"account_id":26078,"reputation":452381,"user_id":67579,"accept_rate":81,"display_name":"willeM_ Van Onsem"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1433525998,"creation_date":1433524810,"answer_id":30672332,"question_id":30672277,"body_markdown":"You can do it as follows:\r\n\r\n    int left = Math.max(thisEntityLeftPosX,anotherEntityLeftPosX);\r\n    int right = Math.min(thisEntityRightPosX,anotherEntityRightPosX);\r\n    if(left &lt;= right) {\r\n        //overlap\r\n    } else {\r\n        //don&#39;t overlap\r\n    }\r\n\r\n[**jDoodle demo with your sample input**](http://jdoodle.com/a/oH)\r\n\r\nThe idea is that you calculate some sort of intersection: the intersection starts as the last of the given two; and ends as the minimum of the two. There are elements in the intersection if the `left` is thus less than or equal to the `right`.\r\n\r\nThis program **makes the assumption** that **`thisEntityLeftPosX` is smaller than `thisEntityRightPosX`**. The same holds for the `another...`. In case the assumption doesn&#39;t hold. You can modify the code as:\r\n\r\n    int temp;\r\n    if(thisEntityLeftPosX &gt; thisEntityRightPosX) {\r\n        temp = thisEntityLeftPosX;\r\n        thisEntityLeftPosX = thisEntityRightPosX;\r\n        thisEntityRightPosX = temp;\r\n    }\r\n    if(anotherEntityLeftPosX &gt; anotherEntityRightPosX) {\r\n        temp = anotherEntityLeftPosX;\r\n        anotherEntityLeftPosX = anotherEntityRightPosX;\r\n        anotherEntityRightPosX = temp;\r\n    }\r\n    int left = Math.max(thisEntityLeftPosX,anotherEntityLeftPosX);\r\n    int right = Math.min(thisEntityRightPosX,anotherEntityRightPosX);\r\n    if(left &lt;= right) {\r\n        //overlap\r\n    } else {\r\n        //don&#39;t overlap\r\n    }\r\n\r\nA possible extra is that if the ranges intersect, you have immediately constructed the range of the intersection. For `[22;30]` and `[29;33]` this thus generates the new range `[left;right]=[29;33]`.","title":"How to calculate if there is intersection between 2 ranges of ints in Java","body":"<p>You can do it as follows:</p>\n\n<pre><code>int left = Math.max(thisEntityLeftPosX,anotherEntityLeftPosX);\nint right = Math.min(thisEntityRightPosX,anotherEntityRightPosX);\nif(left &lt;= right) {\n    //overlap\n} else {\n    //don't overlap\n}\n</code></pre>\n\n<p><a href=\"http://jdoodle.com/a/oH\" rel=\"nofollow\"><strong>jDoodle demo with your sample input</strong></a></p>\n\n<p>The idea is that you calculate some sort of intersection: the intersection starts as the last of the given two; and ends as the minimum of the two. There are elements in the intersection if the <code>left</code> is thus less than or equal to the <code>right</code>.</p>\n\n<p>This program <strong>makes the assumption</strong> that <strong><code>thisEntityLeftPosX</code> is smaller than <code>thisEntityRightPosX</code></strong>. The same holds for the <code>another...</code>. In case the assumption doesn't hold. You can modify the code as:</p>\n\n<pre><code>int temp;\nif(thisEntityLeftPosX &gt; thisEntityRightPosX) {\n    temp = thisEntityLeftPosX;\n    thisEntityLeftPosX = thisEntityRightPosX;\n    thisEntityRightPosX = temp;\n}\nif(anotherEntityLeftPosX &gt; anotherEntityRightPosX) {\n    temp = anotherEntityLeftPosX;\n    anotherEntityLeftPosX = anotherEntityRightPosX;\n    anotherEntityRightPosX = temp;\n}\nint left = Math.max(thisEntityLeftPosX,anotherEntityLeftPosX);\nint right = Math.min(thisEntityRightPosX,anotherEntityRightPosX);\nif(left &lt;= right) {\n    //overlap\n} else {\n    //don't overlap\n}\n</code></pre>\n\n<p>A possible extra is that if the ranges intersect, you have immediately constructed the range of the intersection. For <code>[22;30]</code> and <code>[29;33]</code> this thus generates the new range <code>[left;right]=[29;33]</code>.</p>\n"},{"tags":[],"owner":{"account_id":204687,"reputation":1978,"user_id":453056,"accept_rate":86,"display_name":"Kyle"},"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1433526043,"creation_date":1433525192,"answer_id":30672431,"question_id":30672277,"body_markdown":"The following should work, where `a` and `b` are your two ranges.\r\n\r\n    if (aMin &lt;= bMax &amp;&amp; aMax &gt;= bMax ||\r\n        bMin &lt;= aMax &amp;&amp; bMax &gt;= aMax)\r\n    {\r\n        // OVERLAP\r\n    }","title":"How to calculate if there is intersection between 2 ranges of ints in Java","body":"<p>The following should work, where <code>a</code> and <code>b</code> are your two ranges.</p>\n\n<pre><code>if (aMin &lt;= bMax &amp;&amp; aMax &gt;= bMax ||\n    bMin &lt;= aMax &amp;&amp; bMax &gt;= aMax)\n{\n    // OVERLAP\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6288523,"reputation":3456,"user_id":4886927,"accept_rate":59,"display_name":"pasaba por aqui"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1646222355,"creation_date":1433525838,"answer_id":30672608,"question_id":30672277,"body_markdown":"Start thinking in the reverse problem: two intervals, that mathematically can be described as `[amin, amax]` and `[bmin, bmax]`, do not overlap iff `(amin &gt; bmax OR bmin &gt; amax)`.\r\n\r\nSo, by simple negation of boolean expressions, these intervals overlap if and only if: `(amin &lt;= bmax AND bmin &lt;= amax)`.","title":"How to calculate if there is intersection between 2 ranges of ints in Java","body":"<p>Start thinking in the reverse problem: two intervals, that mathematically can be described as <code>[amin, amax]</code> and <code>[bmin, bmax]</code>, do not overlap iff <code>(amin &gt; bmax OR bmin &gt; amax)</code>.</p>\n<p>So, by simple negation of boolean expressions, these intervals overlap if and only if: <code>(amin &lt;= bmax AND bmin &lt;= amax)</code>.</p>\n"}],"owner":{"account_id":1408014,"reputation":5707,"user_id":1335189,"accept_rate":73,"display_name":"JorgeeFG"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":651,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":30672608,"answer_count":4,"score":0,"last_activity_date":1646222355,"creation_date":1433524590,"question_id":30672277,"body_markdown":"I have 2 maximum and minimum values, for example:\r\n\r\n    22 ------ 26 and 16 ------ 22 (OK, because of 22)\r\n    22 ------ 26 and 10 ------ 12 (FAILS)\r\n    22 ------ 30 and 29 ------ 33 (OK because of 29 and 30)\r\n\r\nI want to know if there exists an intersection between the sets that represent the maximum and minimum, in Java.\r\n\r\nI&#39;ve tried to do it in a paper and got an if with 4 tests, but I found they fail:\r\n\r\n    if ((thisEntityLeftPosX &lt;= anotherEntityLeftPosX &amp;&amp; thisEntityRightPosX &gt;= anotherEntityRightPosX)\r\n    \t\t\t|| (thisEntityLeftPosX &gt;= anotherEntityLeftPosX &amp;&amp; thisEntityRightPosX &gt;= anotherEntityRightPosX)\r\n    \t\t\t|| (thisEntityLeftPosX &lt;= anotherEntityLeftPosX &amp;&amp; thisEntityRightPosX &lt;= anotherEntityRightPosX)\r\n    \t\t\t|| (thisEntityLeftPosX &gt;= anotherEntityLeftPosX &amp;&amp; thisEntityRightPosX &gt;= anotherEntityRightPosX)) {\r\n\r\nMaybe there is an easier way.\r\n\r\nNot a duplicate because this is not about a number contained in a set, but a set intersection.","title":"How to calculate if there is intersection between 2 ranges of ints in Java","body":"<p>I have 2 maximum and minimum values, for example:</p>\n\n<pre><code>22 ------ 26 and 16 ------ 22 (OK, because of 22)\n22 ------ 26 and 10 ------ 12 (FAILS)\n22 ------ 30 and 29 ------ 33 (OK because of 29 and 30)\n</code></pre>\n\n<p>I want to know if there exists an intersection between the sets that represent the maximum and minimum, in Java.</p>\n\n<p>I've tried to do it in a paper and got an if with 4 tests, but I found they fail:</p>\n\n<pre><code>if ((thisEntityLeftPosX &lt;= anotherEntityLeftPosX &amp;&amp; thisEntityRightPosX &gt;= anotherEntityRightPosX)\n            || (thisEntityLeftPosX &gt;= anotherEntityLeftPosX &amp;&amp; thisEntityRightPosX &gt;= anotherEntityRightPosX)\n            || (thisEntityLeftPosX &lt;= anotherEntityLeftPosX &amp;&amp; thisEntityRightPosX &lt;= anotherEntityRightPosX)\n            || (thisEntityLeftPosX &gt;= anotherEntityLeftPosX &amp;&amp; thisEntityRightPosX &gt;= anotherEntityRightPosX)) {\n</code></pre>\n\n<p>Maybe there is an easier way.</p>\n\n<p>Not a duplicate because this is not about a number contained in a set, but a set intersection.</p>\n"},{"tags":["java","java-8","java-stream","functional-interface","supplier"],"comments":[{"owner":{"account_id":7226774,"reputation":19717,"user_id":5515060,"accept_rate":100,"display_name":"Lino"},"score":1,"creation_date":1646215912,"post_id":71320637,"comment_id":126066358,"body_markdown":"What happens when both conditions pass? Also did you attempt to write your code in &quot;normal&quot; non-functional java. I.e. using for-loops and if-statements? From there its sometimes quite easy to convert it to streams","body":"What happens when both conditions pass? Also did you attempt to write your code in &quot;normal&quot; non-functional java. I.e. using for-loops and if-statements? From there its sometimes quite easy to convert it to streams"},{"owner":{"account_id":13945819,"reputation":23,"user_id":10070610,"display_name":"ems19"},"score":0,"creation_date":1646216232,"post_id":71320637,"comment_id":126066488,"body_markdown":"@Lino Both conditions can&#39;t pass, it&#39;s logically impossible (its more or less a simple equals). Yes, &quot;normal&quot; code is quite easy -&gt; declare empty array, iterate through items and for each item check condition and add what is returned from function, otherwise iterate over. I could write that, but wanted to see if there is something like this with stream api, as it&#39;s always preferred to use that","body":"@Lino Both conditions can&#39;t pass, it&#39;s logically impossible (its more or less a simple equals). Yes, &quot;normal&quot; code is quite easy -&gt; declare empty array, iterate through items and for each item check condition and add what is returned from function, otherwise iterate over. I could write that, but wanted to see if there is something like this with stream api, as it&#39;s always preferred to use that"},{"owner":{"account_id":7226774,"reputation":19717,"user_id":5515060,"accept_rate":100,"display_name":"Lino"},"score":0,"creation_date":1646216457,"post_id":71320637,"comment_id":126066559,"body_markdown":"*as it&#39;s always preferred to use that* -&gt; IMHO you should *never* need to use the Stream API. I don&#39;t know where you got that idea. Streams are in 99% of all cases slower than normal loops, have more overhead due to object creation **and** are harder to read. So if you&#39;re not *forced* to use streams, just don&#39;t.","body":"<i>as it&#39;s always preferred to use that</i> -&gt; IMHO you should <i>never</i> need to use the Stream API. I don&#39;t know where you got that idea. Streams are in 99% of all cases slower than normal loops, have more overhead due to object creation <b>and</b> are harder to read. So if you&#39;re not <i>forced</i> to use streams, just don&#39;t."},{"owner":{"account_id":7226774,"reputation":19717,"user_id":5515060,"accept_rate":100,"display_name":"Lino"},"score":0,"creation_date":1646216641,"post_id":71320637,"comment_id":126066620,"body_markdown":"That said, you could make use of `Stream.mapMulti` or just something like `map(o -&gt; condition(o) ? mapper.apply(o) : null).filter(o -&gt; o != null)` to implement your problem","body":"That said, you could make use of <code>Stream.mapMulti</code> or just something like <code>map(o -&gt; condition(o) ? mapper.apply(o) : null).filter(o -&gt; o != null)</code> to implement your problem"},{"owner":{"account_id":19184394,"reputation":153,"user_id":14015478,"display_name":"Deep"},"score":0,"creation_date":1646222932,"post_id":71320637,"comment_id":126068685,"body_markdown":"You are checking condition on item. If it is true, you want to apply some function of item ? Are you trying to change item ? And then you want to use same thing again. I think, it is not recommended on stream operation. Supplier applies on terminal operation. I think it should be immutable. And do not use predicate after map operation. At last you can use collect(Collectors.toList) or collect(Collectors.toSet).","body":"You are checking condition on item. If it is true, you want to apply some function of item ? Are you trying to change item ? And then you want to use same thing again. I think, it is not recommended on stream operation. Supplier applies on terminal operation. I think it should be immutable. And do not use predicate after map operation. At last you can use collect(Collectors.toList) or collect(Collectors.toSet)."}],"answers":[{"tags":[],"owner":{"account_id":13252051,"reputation":1635,"user_id":9569292,"display_name":"Thomas Timbul"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1646220960,"creation_date":1646220960,"answer_id":71322019,"question_id":71320637,"body_markdown":"You&#39;re probably best off with a simple for loop, but you could do:\r\n\r\n    List&lt;Item&gt; list;\r\n    list.stream()\r\n        .forEach(item -&gt; {\r\n           boolean condition1 = predicate1.test(item);\r\n           boolean condition2 = predicate2.test(item);\r\n           if(condition1 &amp;&amp; !condition2) {\r\n                applyFunction1(item);\r\n           } else if(!condition1 &amp;&amp; condition2) {\r\n                applyfunction2(item);\r\n           }\r\n       });\r\n\r\nThis operates directly on the underlying list. Use `map` if you want to collect to a different collection (but obviously it depends on the modifying function implementation whether it contains clones or the original, now also modified, objects):\r\n\r\n    List&lt;Item&gt; list;\r\n    List&lt;Item&gt; modifiedList = list.stream()\r\n       .map(item -&gt; {\r\n           if(condition1 &amp;&amp; !condition2) {\r\n                return function1.apply(item);\r\n           } else if(!condition1 &amp;&amp; condition2) {\r\n                return function2.apply(item);\r\n           }\r\n           return item;\r\n       })\r\n       .toList();\r\n\r\nIf you do not care about the final ordering of items, here&#39;s another approach, which you can see gets silly...:\r\n\r\n        List&lt;Item&gt; list;\r\n        Predicate&lt;Item&gt; predicate1;\r\n        Predicate&lt;Item&gt; predicate2;\r\n        Function&lt;Item, Item&gt; function1;\r\n        Function&lt;Item, Item&gt; function2;\r\n    \r\n        Stream&lt;Item&gt; modifiedBy1 = list.stream()\r\n            .filter(predicate1.and(predicate2.negate()))\r\n            .map(function1);\r\n        Stream&lt;Item&gt; modifiedBy2 = list.stream()\r\n            .filter(predicate1.negate().and(predicate2))\r\n            .map(function1);\r\n        Stream&lt;Item&gt; unmodified = list.stream()\r\n            .filter(predicate1.negate().and(predicate2.negate()));\r\n        \r\n        Stream&lt;Item&gt; recombined = Stream\r\n            .of(modifiedBy1, modifiedBy2, unmodified) //a Stream of Streams\r\n            //you can influence the order of elements by swapping these around\r\n            //the result is essentially sorted by which conditions where matched\r\n            .flatMap(Function.identity()); //flatten the streams back to their constituent objects\r\n        //could also have used 2x Stream.concat here\r\n","title":"Correct way to apply different fucntions based on condition in stream","body":"<p>You're probably best off with a simple for loop, but you could do:</p>\n<pre><code>List&lt;Item&gt; list;\nlist.stream()\n    .forEach(item -&gt; {\n       boolean condition1 = predicate1.test(item);\n       boolean condition2 = predicate2.test(item);\n       if(condition1 &amp;&amp; !condition2) {\n            applyFunction1(item);\n       } else if(!condition1 &amp;&amp; condition2) {\n            applyfunction2(item);\n       }\n   });\n</code></pre>\n<p>This operates directly on the underlying list. Use <code>map</code> if you want to collect to a different collection (but obviously it depends on the modifying function implementation whether it contains clones or the original, now also modified, objects):</p>\n<pre><code>List&lt;Item&gt; list;\nList&lt;Item&gt; modifiedList = list.stream()\n   .map(item -&gt; {\n       if(condition1 &amp;&amp; !condition2) {\n            return function1.apply(item);\n       } else if(!condition1 &amp;&amp; condition2) {\n            return function2.apply(item);\n       }\n       return item;\n   })\n   .toList();\n</code></pre>\n<p>If you do not care about the final ordering of items, here's another approach, which you can see gets silly...:</p>\n<pre><code>    List&lt;Item&gt; list;\n    Predicate&lt;Item&gt; predicate1;\n    Predicate&lt;Item&gt; predicate2;\n    Function&lt;Item, Item&gt; function1;\n    Function&lt;Item, Item&gt; function2;\n\n    Stream&lt;Item&gt; modifiedBy1 = list.stream()\n        .filter(predicate1.and(predicate2.negate()))\n        .map(function1);\n    Stream&lt;Item&gt; modifiedBy2 = list.stream()\n        .filter(predicate1.negate().and(predicate2))\n        .map(function1);\n    Stream&lt;Item&gt; unmodified = list.stream()\n        .filter(predicate1.negate().and(predicate2.negate()));\n    \n    Stream&lt;Item&gt; recombined = Stream\n        .of(modifiedBy1, modifiedBy2, unmodified) //a Stream of Streams\n        //you can influence the order of elements by swapping these around\n        //the result is essentially sorted by which conditions where matched\n        .flatMap(Function.identity()); //flatten the streams back to their constituent objects\n    //could also have used 2x Stream.concat here\n</code></pre>\n"}],"owner":{"account_id":13945819,"reputation":23,"user_id":10070610,"display_name":"ems19"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":963,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"closed_date":1646248071,"accepted_answer_id":71322019,"answer_count":1,"score":-3,"last_activity_date":1646222331,"creation_date":1646214767,"question_id":71320637,"body_markdown":"What would be the correct way to implement this functional logic with streams?\r\n\r\n1) Stream through list of items\r\n\r\n2) Check if condition 1 passes, if so apply function 1 to the item.\r\n\r\n   Check if condition 2 passes, if so apply function 2 to the item.\r\n\r\n   If both conditions do not pass, do nothing.\r\n\r\n3) collect results\r\n\r\nDo I create predicates with suppliers or how does this look? I&#39;m not very familiar with functional Java.","title":"Correct way to apply different fucntions based on condition in stream","body":"<p>What would be the correct way to implement this functional logic with streams?</p>\n<ol>\n<li><p>Stream through list of items</p>\n</li>\n<li><p>Check if condition 1 passes, if so apply function 1 to the item.</p>\n<p>Check if condition 2 passes, if so apply function 2 to the item.</p>\n<p>If both conditions do not pass, do nothing.</p>\n</li>\n<li><p>collect results</p>\n</li>\n</ol>\n<p>Do I create predicates with suppliers or how does this look? I'm not very familiar with functional Java.</p>\n"},{"tags":["java","android","arrays","string"],"comments":[{"owner":{"account_id":1122635,"reputation":1395,"user_id":1110636,"display_name":"Timir"},"score":0,"creation_date":1526868013,"post_id":50441042,"comment_id":87896518,"body_markdown":"Declare the class Keys as static too.","body":"Declare the class Keys as static too."},{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":0,"creation_date":1526868022,"post_id":50441042,"comment_id":87896520,"body_markdown":"What&#39;s your question?","body":"What&#39;s your question?"},{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":0,"creation_date":1526868060,"post_id":50441042,"comment_id":87896527,"body_markdown":"I&#39;d say don&#39;t even bother with the `Keys` class.  Just give the values of all these constants directly in the outer class, and make them `public` there.","body":"I&#39;d say don&#39;t even bother with the <code>Keys</code> class.  Just give the values of all these constants directly in the outer class, and make them <code>public</code> there."}],"answers":[{"tags":[],"owner":{"account_id":2162613,"reputation":9277,"user_id":1916449,"accept_rate":100,"display_name":"arekolek"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1646222266,"creation_date":1526892060,"answer_id":50444956,"question_id":50441042,"body_markdown":"&gt; because an inner class is associated with an instance, it cannot define any static members itself.\r\n\r\nhttps://docs.oracle.com/javase/tutorial/java/javaOO/nested.html\r\n\r\nYou have to use a static nested class instead.\r\n\r\n    public static final class Keys {\r\n\r\nSee https://stackoverflow.com/q/8554813/1916449","title":"inner classes cannot have static declarations - public static final String[]","body":"<blockquote>\n<p>because an inner class is associated with an instance, it cannot define any static members itself.</p>\n</blockquote>\n<p><a href=\"https://docs.oracle.com/javase/tutorial/java/javaOO/nested.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/tutorial/java/javaOO/nested.html</a></p>\n<p>You have to use a static nested class instead.</p>\n<pre><code>public static final class Keys {\n</code></pre>\n<p>See <a href=\"https://stackoverflow.com/q/8554813/1916449\">Why can&#39;t inner classes declare static members?</a></p>\n"}],"owner":{"account_id":13614496,"reputation":21,"user_id":9820821,"display_name":"drdevax"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1416,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1646222266,"creation_date":1526867724,"question_id":50441042,"body_markdown":"I have a problem just in the line 5 \r\n\r\n**`public static final String[] CREATIVE_SDK_SCOPES = { &quot;email&quot;, &quot;profile&quot;, &quot;address&quot; };`**\r\n\r\n&gt; Inner classes cannot have static declarations \r\n\r\n     public final class Keys {\r\n        public static final String CREATIVE_SDK_CLIENT_ID = &quot;xxxxxxxx&quot;;\r\n        public static final String CREATIVE_SDK_CLIENT_SECRET = &quot;xxxxxxxxx&quot;;\r\n        public static final String CREATIVE_SDK_REDIRECT_URI = &quot;xxxxxxxxxx&quot;;\r\n        public static final String[] CREATIVE_SDK_SCOPES = { &quot;email&quot;, &quot;profile&quot;, &quot;address&quot; };\r\n      }\r\n      private static final String CREATIVE_SDK_CLIENT_ID = Keys.CREATIVE_SDK_CLIENT_ID;\r\n      private static final String CREATIVE_SDK_CLIENT_SECRET = Keys.CREATIVE_SDK_CLIENT_SECRET;\r\n      private static final String CREATIVE_SDK_REDIRECT_URI = Keys.CREATIVE_SDK_REDIRECT_URI;\r\n      private static final String[] CREATIVE_SDK_SCOPES = Keys.CREATIVE_SDK_SCOPES;\r\n\r\n[![inner classes cannot have static declarations][1]][1]\r\n\r\nCan you explain what does it mean and how to resolve it?\r\n\r\n  [1]: https://i.stack.imgur.com/UrviE.png","title":"inner classes cannot have static declarations - public static final String[]","body":"<p>I have a problem just in the line 5 </p>\n\n<p><strong><code>public static final String[] CREATIVE_SDK_SCOPES = { \"email\", \"profile\", \"address\" };</code></strong></p>\n\n<blockquote>\n  <p>Inner classes cannot have static declarations </p>\n</blockquote>\n\n<pre><code> public final class Keys {\n    public static final String CREATIVE_SDK_CLIENT_ID = \"xxxxxxxx\";\n    public static final String CREATIVE_SDK_CLIENT_SECRET = \"xxxxxxxxx\";\n    public static final String CREATIVE_SDK_REDIRECT_URI = \"xxxxxxxxxx\";\n    public static final String[] CREATIVE_SDK_SCOPES = { \"email\", \"profile\", \"address\" };\n  }\n  private static final String CREATIVE_SDK_CLIENT_ID = Keys.CREATIVE_SDK_CLIENT_ID;\n  private static final String CREATIVE_SDK_CLIENT_SECRET = Keys.CREATIVE_SDK_CLIENT_SECRET;\n  private static final String CREATIVE_SDK_REDIRECT_URI = Keys.CREATIVE_SDK_REDIRECT_URI;\n  private static final String[] CREATIVE_SDK_SCOPES = Keys.CREATIVE_SDK_SCOPES;\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/UrviE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UrviE.png\" alt=\"inner classes cannot have static declarations\"></a></p>\n\n<p>Can you explain what does it mean and how to resolve it?</p>\n"},{"tags":["java","performance","hibernate","caching","hibernate-4.x"],"comments":[{"owner":{"account_id":187094,"reputation":5113,"user_id":424903,"display_name":"Gimby"},"score":0,"creation_date":1454405737,"post_id":35148920,"comment_id":58018092,"body_markdown":"Because you ask three questions where you should be asking only one you instantly put this question into &quot;too broad&quot; territory. Stackoverflow is about asking one question at a time, consider splitting it up or narrowing it down to what you really want to know. Which would probably be to zoom in on the Hibernate cache performance problem. Start by being more specific about which version of Hibernate you&#39;re using.","body":"Because you ask three questions where you should be asking only one you instantly put this question into &quot;too broad&quot; territory. Stackoverflow is about asking one question at a time, consider splitting it up or narrowing it down to what you really want to know. Which would probably be to zoom in on the Hibernate cache performance problem. Start by being more specific about which version of Hibernate you&#39;re using."},{"owner":{"account_id":364020,"reputation":1527,"user_id":708128,"accept_rate":64,"display_name":"P.P&#233;ter"},"score":0,"creation_date":1454407749,"post_id":35148920,"comment_id":58019470,"body_markdown":"Well, the gist of the question is &quot;I want faster caching&quot;. If any of the three options is feasible, I would be satisfied.","body":"Well, the gist of the question is &quot;I want faster caching&quot;. If any of the three options is feasible, I would be satisfied."},{"owner":{"account_id":3062336,"reputation":5575,"user_id":2594725,"accept_rate":12,"display_name":"cruftex"},"score":0,"creation_date":1454412449,"post_id":35148920,"comment_id":58022582,"body_markdown":"I think that is the hopping point: &quot;less than a factor of 2&quot;. How can anybody tackle this, without knowing what your application is doing? Can you put together an example or benchmark that resembles the same access pattern then your application?","body":"I think that is the hopping point: &quot;less than a factor of 2&quot;. How can anybody tackle this, without knowing what your application is doing? Can you put together an example or benchmark that resembles the same access pattern then your application?"},{"owner":{"account_id":7844482,"reputation":1806,"user_id":5929974,"accept_rate":33,"display_name":"Andreas Gelever"},"score":1,"creation_date":1546350395,"post_id":35148920,"comment_id":94829222,"body_markdown":"I noticed this too. The speed L2C vs simply querying database on SSD is more or less the same (28 ms vs 33 ms in my sample). First query with L2C is much much slower! I expected at least 2-3 times faster with L2C, but we have what we have.","body":"I noticed this too. The speed L2C vs simply querying database on SSD is more or less the same (28 ms vs 33 ms in my sample). First query with L2C is much much slower! I expected at least 2-3 times faster with L2C, but we have what we have."}],"answers":[{"tags":[],"owner":{"account_id":6093107,"reputation":23152,"user_id":4754790,"accept_rate":94,"display_name":"Dragan Bozanovic"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1454418726,"creation_date":1454418726,"answer_id":35154503,"question_id":35148920,"body_markdown":"&gt; Can hibernate store and restore the cached objects directly?\r\n\r\nNo, it can&#39;t, because that would mean that concurrent sessions would use the same object instances, thus stepping on each other toes.\r\n\r\n&gt; Is there some other way to speed up the second level cache?\r\n\r\nThere are probably thousands of ways to speed it up. Most of them depend on the specific requirements of your application.\r\n\r\n&gt; Is there a relatively simple alternative mechanism for faster\r\n&gt; hibernate caching?\r\n\r\nNo, at least not for the time being.","title":"hibernate second level cache is slow","body":"<blockquote>\n  <p>Can hibernate store and restore the cached objects directly?</p>\n</blockquote>\n\n<p>No, it can't, because that would mean that concurrent sessions would use the same object instances, thus stepping on each other toes.</p>\n\n<blockquote>\n  <p>Is there some other way to speed up the second level cache?</p>\n</blockquote>\n\n<p>There are probably thousands of ways to speed it up. Most of them depend on the specific requirements of your application.</p>\n\n<blockquote>\n  <p>Is there a relatively simple alternative mechanism for faster\n  hibernate caching?</p>\n</blockquote>\n\n<p>No, at least not for the time being.</p>\n"},{"tags":[],"owner":{"account_id":215223,"reputation":2949,"user_id":469718,"accept_rate":12,"display_name":"kisna"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1555379950,"creation_date":1555379950,"answer_id":55699522,"question_id":35148920,"body_markdown":"Have you figured out the Hibernate second level cache performance issues?, in some application diskPersistence and overFlowToDisk were on and noticed clone/serialization/deserialization in TRACE logs. Don&#39;t see why Hibernate/Ehcache had to clone/deserialize local JVM objects again.","title":"hibernate second level cache is slow","body":"<p>Have you figured out the Hibernate second level cache performance issues?, in some application diskPersistence and overFlowToDisk were on and noticed clone/serialization/deserialization in TRACE logs. Don't see why Hibernate/Ehcache had to clone/deserialize local JVM objects again.</p>\n"},{"tags":[],"owner":{"account_id":120777,"reputation":14376,"user_id":313400,"display_name":"Guillaume"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1630330392,"creation_date":1630330392,"answer_id":68985044,"question_id":35148920,"body_markdown":"This is an old question but other people seem to have performance issues with Hibernate + Ehcache. I took me a while to figure out the problem so I&#39;m adding what I found here, hopefully this might help someone.\r\n\r\nThe JCache/JSR-107 specification says that by default caches must **store by value** while Ehcache defaults to **store by reference**. When using Ehcache 3, Hibernate uses the jcache interface so Ehcache enforces the specification by using a serializing copier: before storing any key or value, they are serialized in a byte buffer. This operation takes quite a few CPU cycles for each cache get() and each put().\r\n\r\nEhcache switches to store-by-reference (i.e. essentially put the objects straight into the cache) when the default copier is the [IdentityCopier][1], see the source of [CompleteConfiguration][2].\r\n\r\nSo in order to avoid the serialization/deserialisation, I added a `default-copiers` element to my ehcache.xml:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;config xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns=&quot;http://www.ehcache.org/v3&quot; xmlns:jsr107=&quot;http://www.ehcache.org/v3/jsr107&quot;&gt;\r\n\r\n        &lt;service&gt;\r\n            &lt;jsr107:defaults enable-management=&quot;false&quot; enable-statistics=&quot;false&quot; default-template=&quot;default&quot; /&gt;\r\n        &lt;/service&gt;\r\n    \r\n        &lt;default-copiers&gt;\r\n    \t\t&lt;copier type=&quot;java.lang.Object&quot;&gt;org.ehcache.impl.copy.IdentityCopier&lt;/copier&gt;\r\n        &lt;/default-copiers&gt;\r\n        \r\n        &lt;cache&gt;...&lt;/cache&gt;\r\n        &lt;cache-template name=&quot;default&quot;&gt;...&lt;/cache-template&gt;\r\n    &lt;/config&gt;\r\n\r\n  [1]: https://www.ehcache.org/apidocs/3.0.0.m5/org/ehcache/impl/copy/IdentityCopier.html\r\n  [2]: https://github.com/ehcache/ehcache3/blob/9a4ccddee1a460179a94050f13c19ac2fb20d940/107/src/main/java/org/ehcache/jsr107/Eh107CompleteConfiguration.java#L117","title":"hibernate second level cache is slow","body":"<p>This is an old question but other people seem to have performance issues with Hibernate + Ehcache. I took me a while to figure out the problem so I'm adding what I found here, hopefully this might help someone.</p>\n<p>The JCache/JSR-107 specification says that by default caches must <strong>store by value</strong> while Ehcache defaults to <strong>store by reference</strong>. When using Ehcache 3, Hibernate uses the jcache interface so Ehcache enforces the specification by using a serializing copier: before storing any key or value, they are serialized in a byte buffer. This operation takes quite a few CPU cycles for each cache get() and each put().</p>\n<p>Ehcache switches to store-by-reference (i.e. essentially put the objects straight into the cache) when the default copier is the <a href=\"https://www.ehcache.org/apidocs/3.0.0.m5/org/ehcache/impl/copy/IdentityCopier.html\" rel=\"nofollow noreferrer\">IdentityCopier</a>, see the source of <a href=\"https://github.com/ehcache/ehcache3/blob/9a4ccddee1a460179a94050f13c19ac2fb20d940/107/src/main/java/org/ehcache/jsr107/Eh107CompleteConfiguration.java#L117\" rel=\"nofollow noreferrer\">CompleteConfiguration</a>.</p>\n<p>So in order to avoid the serialization/deserialisation, I added a <code>default-copiers</code> element to my ehcache.xml:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;config xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns=&quot;http://www.ehcache.org/v3&quot; xmlns:jsr107=&quot;http://www.ehcache.org/v3/jsr107&quot;&gt;\n\n    &lt;service&gt;\n        &lt;jsr107:defaults enable-management=&quot;false&quot; enable-statistics=&quot;false&quot; default-template=&quot;default&quot; /&gt;\n    &lt;/service&gt;\n\n    &lt;default-copiers&gt;\n        &lt;copier type=&quot;java.lang.Object&quot;&gt;org.ehcache.impl.copy.IdentityCopier&lt;/copier&gt;\n    &lt;/default-copiers&gt;\n    \n    &lt;cache&gt;...&lt;/cache&gt;\n    &lt;cache-template name=&quot;default&quot;&gt;...&lt;/cache-template&gt;\n&lt;/config&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":143433,"reputation":8912,"user_id":351758,"accept_rate":73,"display_name":"Janning Vygen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646221782,"creation_date":1646221782,"answer_id":71322206,"question_id":35148920,"body_markdown":"We have this problem, too. If you store and retrieve many objects from the 2nd Level cache you must take into account the time for hydration and dehydration. \r\n\r\nIt is not cheap. But it is needed as you can&#39;t put the real entity into the 2ndLC. First the object is bound to the session and might have some proxies and other hibernate magic stuff. Second the object would be shared across multiple sessions/transactions. So you could &quot;see&quot; the changes another session is doing concurrently. Therefore hibernate hydrates and dehydrates.\r\n\r\nWhat we have done to have a faster solution in some circumstances:\r\nWe build a &quot;Third Level Cache&quot; with Spring @Cacheable, where we place DTOObjects (DataTransferObject as we call it) which are read-only. So if we have a Member entity we have a MemberDTO which is the object for the third level cache. It is mostly a copy of the real entity just for caching reasons.  \r\n\r\n\r\n\r\n","title":"hibernate second level cache is slow","body":"<p>We have this problem, too. If you store and retrieve many objects from the 2nd Level cache you must take into account the time for hydration and dehydration.</p>\n<p>It is not cheap. But it is needed as you can't put the real entity into the 2ndLC. First the object is bound to the session and might have some proxies and other hibernate magic stuff. Second the object would be shared across multiple sessions/transactions. So you could &quot;see&quot; the changes another session is doing concurrently. Therefore hibernate hydrates and dehydrates.</p>\n<p>What we have done to have a faster solution in some circumstances:\nWe build a &quot;Third Level Cache&quot; with Spring @Cacheable, where we place DTOObjects (DataTransferObject as we call it) which are read-only. So if we have a Member entity we have a MemberDTO which is the object for the third level cache. It is mostly a copy of the real entity just for caching reasons.</p>\n"}],"owner":{"account_id":364020,"reputation":1527,"user_id":708128,"accept_rate":64,"display_name":"P.P&#233;ter"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2348,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":4,"score":6,"last_activity_date":1646221782,"creation_date":1454403670,"question_id":35148920,"body_markdown":"I am using hibernate second-level caching with in-memory ehcache, and it is slow. I mean, not slower than SQL, but not really faster either given a fast database on an SSD. The actual speed increase is less than a factor of 2, and sometimes unnoticeable.\r\n\r\nIt seems that others had the same problem, but got no answer:\r\nhttp://forum.spring.io/forum/spring-projects/data/44353-hibernate-second-level-caching-slow-no-really-slow\r\nhttps://forum.hibernate.org/viewtopic.php?t=985913\r\n\r\nAfter some profiling, it seems that hibernate always de/re-hydrates the cache elements, instead of directly storing them, which leads to this abysmal performance (over a factor of 100 compared to direct use of ehcache).\r\n\r\nSo, my questions are:\r\n\r\n* Can hibernate store and restore the cached objects directly?\r\n* Is there some other way to speed up the second level cache?\r\n* Is there a relatively simple alternative mechanism for faster hibernate caching?\r\n\r\n","title":"hibernate second level cache is slow","body":"<p>I am using hibernate second-level caching with in-memory ehcache, and it is slow. I mean, not slower than SQL, but not really faster either given a fast database on an SSD. The actual speed increase is less than a factor of 2, and sometimes unnoticeable.</p>\n\n<p>It seems that others had the same problem, but got no answer:\n<a href=\"http://forum.spring.io/forum/spring-projects/data/44353-hibernate-second-level-caching-slow-no-really-slow\" rel=\"noreferrer\">http://forum.spring.io/forum/spring-projects/data/44353-hibernate-second-level-caching-slow-no-really-slow</a>\n<a href=\"https://forum.hibernate.org/viewtopic.php?t=985913\" rel=\"noreferrer\">https://forum.hibernate.org/viewtopic.php?t=985913</a></p>\n\n<p>After some profiling, it seems that hibernate always de/re-hydrates the cache elements, instead of directly storing them, which leads to this abysmal performance (over a factor of 100 compared to direct use of ehcache).</p>\n\n<p>So, my questions are:</p>\n\n<ul>\n<li>Can hibernate store and restore the cached objects directly?</li>\n<li>Is there some other way to speed up the second level cache?</li>\n<li>Is there a relatively simple alternative mechanism for faster hibernate caching?</li>\n</ul>\n"},{"tags":["java","string","iterator"],"comments":[{"owner":{"account_id":7929209,"reputation":7801,"user_id":5987669,"display_name":"Locke"},"score":2,"creation_date":1646202907,"post_id":71318285,"comment_id":126062309,"body_markdown":"What are you having difficulty with for your assignment? It may help to read [How do I ask and answer homework questions?](https://meta.stackoverflow.com/q/334822) to refine your question so we can help you.","body":"What are you having difficulty with for your assignment? It may help to read <a href=\"https://meta.stackoverflow.com/q/334822\">How do I ask and answer homework questions?</a> to refine your question so we can help you."},{"owner":{"account_id":18360892,"reputation":1,"user_id":13373027,"display_name":"safaa"},"score":0,"creation_date":1646203039,"post_id":71318285,"comment_id":126062338,"body_markdown":"i don&#39;t know how to generate the next sequnce and how to  write code that works for every input","body":"i don&#39;t know how to generate the next sequnce and how to  write code that works for every input"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":2,"creation_date":1646209608,"post_id":71318285,"comment_id":126064117,"body_markdown":"Do you know how to go from `&quot;a&quot;` to `&quot;b&quot;`? Why not start there.","body":"Do you know how to go from <code>&quot;a&quot;</code> to <code>&quot;b&quot;</code>? Why not start there."}],"answers":[{"tags":[],"owner":{"account_id":391375,"reputation":1507,"user_id":751992,"display_name":"Sampisa"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646221641,"creation_date":1646221641,"answer_id":71322175,"question_id":71318285,"body_markdown":"The idea: prepare a String A with your alphabet: &quot;abc...ABC..Z&quot;, and prepare a &quot;increase&quot; function that, given a char inside A, returns the following one. \r\n\r\nThe initialiser sets the original string in a variable &quot;s&quot;; then the next() gets &quot;s&quot;, checks the last character, and invokes the &quot;increase&quot; function on that char. Then replace the last character of the string with the result. But... if the new char is the first of A, then you need to &quot;increase&quot; also the next char in &quot;s&quot;, etc. Until you reach the end of the string: in this case, simply add the first char of the alphabet.\r\n\r\nYou can do a recursive function for that if you are able to do it. Otherwise, you can use an index &quot;i&quot; initialised to the string length and move it back of one position whenever you need to get the previous char in the string.\r\n\r\n    /**\r\n     *\r\n     */\r\n    package it.mixedstuff;\r\n    \r\n    import java.util.Iterator;\r\n    import java.util.NoSuchElementException;;\r\n    \r\n    /**\r\n     * @author samuele m.\r\n     *\r\n     */\r\n    public class StringIterator implements Iterator&lt;String&gt;\r\n    {\r\n        private static final String A = &quot;abcABC&quot;;\r\n        private String s;\r\n    \r\n        // Complete the following methods\r\n        public StringIterator(String start)\r\n        {\r\n            s = start;\r\n        }\r\n    \r\n        private char increase(char c)\r\n        {\r\n            int k = A.indexOf(c);\r\n            if (k == -1) {\r\n                throw new RuntimeException(&quot;Unsupported char&quot;);\r\n            }\r\n            k = (k + 1) % A.length();\r\n            return A.charAt(k);\r\n        }\r\n    \r\n        private char firstChar()\r\n        {\r\n            return A.charAt(0);\r\n        }\r\n    \r\n        private boolean isFirst(char ch)\r\n        {\r\n            return (ch == firstChar());\r\n        }\r\n    \r\n        public boolean hasNext()\r\n        {\r\n            return A.length() &lt; Integer.MAX_VALUE;\r\n        }\r\n    \r\n        public String next()\r\n        {\r\n            if (!hasNext()) {\r\n                throw new NoSuchElementException();\r\n            }\r\n            int i = s.length();\r\n            while (--i &gt;= 0) {\r\n                // get char at position A[i]\r\n                char c = s.charAt(i);\r\n                // return the following one\r\n                c = increase(c);\r\n                // replace the char in the string\r\n                s = s.substring(0, i) + c + s.substring(i + 1);\r\n                // have we ended?\r\n                if (!isFirst(c)) {\r\n                    return s;\r\n                }\r\n            }\r\n            // if string is ended, we need to add the first char\r\n            if (i &lt; 0) {\r\n                s = firstChar() + s;\r\n            }\r\n            return s;\r\n        }\r\n    \r\n        public static void main(String[] args)\r\n        {\r\n            String base = &quot;Bc&quot;;\r\n            StringIterator s = new StringIterator(base);\r\n            System.out.println(&quot;We start with &quot; + base);\r\n            for (int i = 0; i &lt; 20; i++) {\r\n                String n = s.next();\r\n                System.out.println(&quot;Then there is &quot; + n);\r\n            }\r\n        }\r\n    \r\n    }\r\n","title":"Generating an Alphabet Sequence in Java","body":"<p>The idea: prepare a String A with your alphabet: &quot;abc...ABC..Z&quot;, and prepare a &quot;increase&quot; function that, given a char inside A, returns the following one.</p>\n<p>The initialiser sets the original string in a variable &quot;s&quot;; then the next() gets &quot;s&quot;, checks the last character, and invokes the &quot;increase&quot; function on that char. Then replace the last character of the string with the result. But... if the new char is the first of A, then you need to &quot;increase&quot; also the next char in &quot;s&quot;, etc. Until you reach the end of the string: in this case, simply add the first char of the alphabet.</p>\n<p>You can do a recursive function for that if you are able to do it. Otherwise, you can use an index &quot;i&quot; initialised to the string length and move it back of one position whenever you need to get the previous char in the string.</p>\n<pre><code>/**\n *\n */\npackage it.mixedstuff;\n\nimport java.util.Iterator;\nimport java.util.NoSuchElementException;;\n\n/**\n * @author samuele m.\n *\n */\npublic class StringIterator implements Iterator&lt;String&gt;\n{\n    private static final String A = &quot;abcABC&quot;;\n    private String s;\n\n    // Complete the following methods\n    public StringIterator(String start)\n    {\n        s = start;\n    }\n\n    private char increase(char c)\n    {\n        int k = A.indexOf(c);\n        if (k == -1) {\n            throw new RuntimeException(&quot;Unsupported char&quot;);\n        }\n        k = (k + 1) % A.length();\n        return A.charAt(k);\n    }\n\n    private char firstChar()\n    {\n        return A.charAt(0);\n    }\n\n    private boolean isFirst(char ch)\n    {\n        return (ch == firstChar());\n    }\n\n    public boolean hasNext()\n    {\n        return A.length() &lt; Integer.MAX_VALUE;\n    }\n\n    public String next()\n    {\n        if (!hasNext()) {\n            throw new NoSuchElementException();\n        }\n        int i = s.length();\n        while (--i &gt;= 0) {\n            // get char at position A[i]\n            char c = s.charAt(i);\n            // return the following one\n            c = increase(c);\n            // replace the char in the string\n            s = s.substring(0, i) + c + s.substring(i + 1);\n            // have we ended?\n            if (!isFirst(c)) {\n                return s;\n            }\n        }\n        // if string is ended, we need to add the first char\n        if (i &lt; 0) {\n            s = firstChar() + s;\n        }\n        return s;\n    }\n\n    public static void main(String[] args)\n    {\n        String base = &quot;Bc&quot;;\n        StringIterator s = new StringIterator(base);\n        System.out.println(&quot;We start with &quot; + base);\n        for (int i = 0; i &lt; 20; i++) {\n            String n = s.next();\n            System.out.println(&quot;Then there is &quot; + n);\n        }\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":18360892,"reputation":1,"user_id":13373027,"display_name":"safaa"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":294,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1646221641,"creation_date":1646202497,"question_id":71318285,"body_markdown":"I am beginning at programing and I have an assignment to generate Alphabet sequence. In constructor we have an input, every time  when call the method next() will return the next value in the sequence.\r\n\r\n    &quot;&quot;,&quot;a&quot;,&quot;b&quot;,&quot;c&quot;,.....&quot;z&quot;,&quot;A&quot;,&quot;B&quot;,......&quot;Z&quot;,&quot;aa&quot;,&quot;bb&quot;,.....,&quot;zz&quot;,.....\r\n    if input is:\r\n    If the current string is:&quot;z&quot;,so after calling next(),we get &quot;A&quot;;\r\n    If the current string is:&quot;Z&quot;,so after calling next(),we get &quot;aa&quot;;\r\n    If the current string is:&quot;az&quot;,so after calling next(),we get &quot;ba&quot;;\r\n    If the current string is:&quot;ZZZZZZ&quot;,so after calling next(),we get &quot;aaaaaaa&quot;;\r\n\r\ncode assignmnet is here:\r\n```java\r\nimport  java.util.Iterator;\r\n\r\npublic class StringIterator implements Iterator&lt;String&gt; {\r\n\r\n    //Complete the following methods\r\n    public StringIterator(String start){\r\n        // task 0\r\n        throw new UnsupportedOperationException(&quot;Delete this line and implement this function&quot;);\r\n    }\r\n\r\n    public boolean hasNext(){\r\n        // task 0\r\n        //assume string length()&lt;Integer. MAX_VALUE\r\n       return true;\r\n    }\r\n    public String next(){\r\n        // task 0\r\n        throw new UnsupportedOperationException(&quot;Delete this line and implement this function&quot;);\r\n    }\r\n}\r\n```\r\n\r\n","title":"Generating an Alphabet Sequence in Java","body":"<p>I am beginning at programing and I have an assignment to generate Alphabet sequence. In constructor we have an input, every time  when call the method next() will return the next value in the sequence.</p>\n<pre><code>&quot;&quot;,&quot;a&quot;,&quot;b&quot;,&quot;c&quot;,.....&quot;z&quot;,&quot;A&quot;,&quot;B&quot;,......&quot;Z&quot;,&quot;aa&quot;,&quot;bb&quot;,.....,&quot;zz&quot;,.....\nif input is:\nIf the current string is:&quot;z&quot;,so after calling next(),we get &quot;A&quot;;\nIf the current string is:&quot;Z&quot;,so after calling next(),we get &quot;aa&quot;;\nIf the current string is:&quot;az&quot;,so after calling next(),we get &quot;ba&quot;;\nIf the current string is:&quot;ZZZZZZ&quot;,so after calling next(),we get &quot;aaaaaaa&quot;;\n</code></pre>\n<p>code assignmnet is here:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import  java.util.Iterator;\n\npublic class StringIterator implements Iterator&lt;String&gt; {\n\n    //Complete the following methods\n    public StringIterator(String start){\n        // task 0\n        throw new UnsupportedOperationException(&quot;Delete this line and implement this function&quot;);\n    }\n\n    public boolean hasNext(){\n        // task 0\n        //assume string length()&lt;Integer. MAX_VALUE\n       return true;\n    }\n    public String next(){\n        // task 0\n        throw new UnsupportedOperationException(&quot;Delete this line and implement this function&quot;);\n    }\n}\n</code></pre>\n"},{"tags":["java","sql","jpa","hibernate-criteria"],"comments":[{"owner":{"account_id":231683,"reputation":4218,"user_id":496038,"display_name":"pringi"},"score":0,"creation_date":1646215543,"post_id":71320181,"comment_id":126066216,"body_markdown":"I would use something like QueryDSL instead of CriteriaBuilder. I think in that type of query, CriteriaBuilder will be too complex, and when using other Entities in the subquery, Hibernate will have some complaints over entities not being known in the context (even if you use Join or Subquery).","body":"I would use something like QueryDSL instead of CriteriaBuilder. I think in that type of query, CriteriaBuilder will be too complex, and when using other Entities in the subquery, Hibernate will have some complaints over entities not being known in the context (even if you use Join or Subquery)."}],"answers":[{"tags":[],"owner":{"account_id":90329,"reputation":6956,"user_id":248733,"accept_rate":58,"display_name":"Ballon"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1646221624,"creation_date":1646221624,"answer_id":71322170,"question_id":71320181,"body_markdown":"Restructured (simplified) SQL query:\r\n\r\n```\r\nselect\r\n\t* \r\nfrom\r\n\t( select\r\n\t\tlog0_.MSG_ID,\r\n\t\tlogin1_.NAME,\r\n\t\torder3_.CODE,\r\n\t\tlog0_.METHOD\r\n\t\tlogpa2_.VALUE,\r\n\tfrom\r\n\t\tM_LOG log0_,\r\n\t\tM_LOG_INTER login1_,\r\n\t\tM_LOG_PARAMS logpa2_,\r\n\t\tM_ORDER order3_ \r\n\twhere\r\n\t\tlogpa2_.KEY=&#39;id&#39; \r\n\t\tand logpa2_.VALUE=order3_.ID \r\n\t\tand log0_.MS_ID=logpa2_.MS_ID \r\n\t\tand log0_.ID_INTER=login1_.ID_INTER\r\n\t) \r\nwhere\r\n\trownum &lt;= 10;\r\n```\r\nAnd query with CriteriaBuilder was easly.","title":"How to write the following sql query with CriteriaBuilder","body":"<p>Restructured (simplified) SQL query:</p>\n<pre><code>select\n    * \nfrom\n    ( select\n        log0_.MSG_ID,\n        login1_.NAME,\n        order3_.CODE,\n        log0_.METHOD\n        logpa2_.VALUE,\n    from\n        M_LOG log0_,\n        M_LOG_INTER login1_,\n        M_LOG_PARAMS logpa2_,\n        M_ORDER order3_ \n    where\n        logpa2_.KEY='id' \n        and logpa2_.VALUE=order3_.ID \n        and log0_.MS_ID=logpa2_.MS_ID \n        and log0_.ID_INTER=login1_.ID_INTER\n    ) \nwhere\n    rownum &lt;= 10;\n</code></pre>\n<p>And query with CriteriaBuilder was easly.</p>\n"}],"owner":{"account_id":90329,"reputation":6956,"user_id":248733,"accept_rate":58,"display_name":"Ballon"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":134,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71322170,"answer_count":1,"score":0,"last_activity_date":1646221624,"creation_date":1646212711,"question_id":71320181,"body_markdown":"I have problem while I want to write query into Criteria Builder. Or if is better to compose SQL query to be easyer to write in criteria builder ?\r\n\r\n``` \r\nselect\r\n\tDATA_TABLE.*, M_ORDER.CODE \r\nfrom\r\n\t( select\r\n\t\tlog0_.MSG_ID,\r\n\t\tlogin1_.NAME,\r\n\t\tlog0_.METHOD,\r\n\t\tlogpa2_.VALUE\r\n\tfrom\r\n\t\tM_LOG log0_\r\n\tinner join\r\n\t\tM_LOG_INTER login1_ \r\n\t\t\ton log0_.ID_INTER=login1_.ID_INTER \r\n\tinner join\r\n\t\tM_PARAMS logpa2_ \r\n\t\t\ton log0_.MS_ID=logpa2_.MS_ID \r\n\twhere\r\n\t\tlogpa2_.KEY=&#39;id&#39;\r\n\t) DATA_TABLE, M_ORDER\r\nWHERE\r\n\tdata.value = m_order.ID and\r\n\trownum &lt;= 10; \r\n```","title":"How to write the following sql query with CriteriaBuilder","body":"<p>I have problem while I want to write query into Criteria Builder. Or if is better to compose SQL query to be easyer to write in criteria builder ?</p>\n<pre><code>select\n    DATA_TABLE.*, M_ORDER.CODE \nfrom\n    ( select\n        log0_.MSG_ID,\n        login1_.NAME,\n        log0_.METHOD,\n        logpa2_.VALUE\n    from\n        M_LOG log0_\n    inner join\n        M_LOG_INTER login1_ \n            on log0_.ID_INTER=login1_.ID_INTER \n    inner join\n        M_PARAMS logpa2_ \n            on log0_.MS_ID=logpa2_.MS_ID \n    where\n        logpa2_.KEY='id'\n    ) DATA_TABLE, M_ORDER\nWHERE\n    data.value = m_order.ID and\n    rownum &lt;= 10; \n</code></pre>\n"},{"tags":["java","postgresql","spring-boot","transactions","spring-transactions"],"comments":[{"owner":{"account_id":231683,"reputation":4218,"user_id":496038,"display_name":"pringi"},"score":0,"creation_date":1646227868,"post_id":71321780,"comment_id":126070462,"body_markdown":"Does this answer your question? [Annotation @Transactional. How to rollback?](https://stackoverflow.com/questions/7872773/annotation-transactional-how-to-rollback)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/7872773/annotation-transactional-how-to-rollback\">Annotation @Transactional. How to rollback?</a>"}],"owner":{"account_id":21573087,"reputation":29,"user_id":15905693,"display_name":"Akash Beura"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1646221158,"creation_date":1646219937,"question_id":71321780,"body_markdown":"So I was trying to create nested transactions but it&#39;s not working at all..\r\n\r\n```\r\n@Transactional\r\nmethod1(){\r\n    method3();\r\n    method4();\r\n}\r\n\r\nmethod4(){\r\n   try{\r\n      method2();\r\n    }catch(Exception e){\r\n       log.error(&quot;exception found, i will retry method2() by calling method4()&quot;);\r\n       method4();\r\n    }\r\n}\r\n\r\n```\r\n\r\n```\r\n@Transactional\r\nmethod2(){\r\n   //do something\r\n}\r\n```\r\n\r\n```\r\n@Transactional\r\nmethod3(){\r\n   //do something\r\n}\r\n```\r\n\r\n\r\n\r\nSo my requirement is like this, method 1&#39;s transactional should work as expected, let&#39;s say method4() was successful, and its committed.\r\nNow let&#39;s say there happened to be some exception on method3(), now I was expecting method4(internally method 2)&#39;s commit to be reverted as it&#39;s a part of method1()&#39;s transaction..\r\nBut what I see is, even with method3&#39;s failure/exception, commit of method2 is not rolling back. Shouldn&#39;t it ideally roll back as it&#39;s a part of method1&#39;s transaction?\r\n\r\nM i doing something wrong here?","title":"SpringBoot Transactional Information","body":"<p>So I was trying to create nested transactions but it's not working at all..</p>\n<pre><code>@Transactional\nmethod1(){\n    method3();\n    method4();\n}\n\nmethod4(){\n   try{\n      method2();\n    }catch(Exception e){\n       log.error(&quot;exception found, i will retry method2() by calling method4()&quot;);\n       method4();\n    }\n}\n\n</code></pre>\n<pre><code>@Transactional\nmethod2(){\n   //do something\n}\n</code></pre>\n<pre><code>@Transactional\nmethod3(){\n   //do something\n}\n</code></pre>\n<p>So my requirement is like this, method 1's transactional should work as expected, let's say method4() was successful, and its committed.\nNow let's say there happened to be some exception on method3(), now I was expecting method4(internally method 2)'s commit to be reverted as it's a part of method1()'s transaction..\nBut what I see is, even with method3's failure/exception, commit of method2 is not rolling back. Shouldn't it ideally roll back as it's a part of method1's transaction?</p>\n<p>M i doing something wrong here?</p>\n"},{"tags":["java","apache-spark","serialization","task"],"answers":[{"tags":[],"owner":{"account_id":6099207,"reputation":6223,"user_id":4758823,"display_name":"Som"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1596946158,"creation_date":1596946158,"answer_id":63322374,"question_id":63321956,"body_markdown":"Don&#39;t use Lambda reference. It will try to pass the function `println(..)` of `PrintStream` to executors. Remember all the methods that you pass or put in spark closure (inside map/filter/reduce etc) must be serialised. Since `println(..)` is part of `PrintStream`, the class `PrintStream` must be serialized.\r\n\r\nPass an anonymous function as below-\r\n```java\r\nmyRDD.foreach(integer -&gt; System.out.println(integer));\r\n```\r\n**`Full Example`**\r\n```java\r\n\r\nimport org.apache.log4j.Level;\r\nimport org.apache.log4j.Logger;\r\nimport org.apache.spark.SparkConf;\r\nimport org.apache.spark.api.java.JavaRDD;\r\nimport org.apache.spark.api.java.JavaSparkContext;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\npublic class Test63321956 {\r\n    public static void main(String[] args) {\r\n        Logger.getLogger(&quot;org.apache&quot;).setLevel(Level.WARN);\r\n        List&lt;Integer&gt; inputData = new ArrayList&lt;&gt;();\r\n\r\n        inputData.add(25);\r\n\r\n\r\n        SparkConf conf = new SparkConf().setAppName(&quot;startingSpark&quot;).setMaster(&quot;local[*]&quot;);\r\n        JavaSparkContext sc = new JavaSparkContext(conf);\r\n\r\n        JavaRDD&lt;Integer&gt; myRDD = sc.parallelize(inputData);\r\n        Integer result = myRDD.reduce(Integer::sum);\r\n\r\n        myRDD.collect().forEach( System.out::println );\r\n        myRDD.foreach(integer -&gt; System.out.println(integer));\r\n        System.out.println(result);\r\n        /**\r\n         * 25\r\n         * 25\r\n         * 25\r\n         */\r\n\r\n        sc.close();\r\n\r\n    }\r\n}\r\n\r\n```","title":"Trying to use System.out as a task in an RDD","body":"<p>Don't use Lambda reference. It will try to pass the function <code>println(..)</code> of <code>PrintStream</code> to executors. Remember all the methods that you pass or put in spark closure (inside map/filter/reduce etc) must be serialised. Since <code>println(..)</code> is part of <code>PrintStream</code>, the class <code>PrintStream</code> must be serialized.</p>\n<p>Pass an anonymous function as below-</p>\n<pre class=\"lang-java prettyprint-override\"><code>myRDD.foreach(integer -&gt; System.out.println(integer));\n</code></pre>\n<p><strong><code>Full Example</code></strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>\nimport org.apache.log4j.Level;\nimport org.apache.log4j.Logger;\nimport org.apache.spark.SparkConf;\nimport org.apache.spark.api.java.JavaRDD;\nimport org.apache.spark.api.java.JavaSparkContext;\n\nimport java.util.ArrayList;\nimport java.util.List;\n\npublic class Test63321956 {\n    public static void main(String[] args) {\n        Logger.getLogger(&quot;org.apache&quot;).setLevel(Level.WARN);\n        List&lt;Integer&gt; inputData = new ArrayList&lt;&gt;();\n\n        inputData.add(25);\n\n\n        SparkConf conf = new SparkConf().setAppName(&quot;startingSpark&quot;).setMaster(&quot;local[*]&quot;);\n        JavaSparkContext sc = new JavaSparkContext(conf);\n\n        JavaRDD&lt;Integer&gt; myRDD = sc.parallelize(inputData);\n        Integer result = myRDD.reduce(Integer::sum);\n\n        myRDD.collect().forEach( System.out::println );\n        myRDD.foreach(integer -&gt; System.out.println(integer));\n        System.out.println(result);\n        /**\n         * 25\n         * 25\n         * 25\n         */\n\n        sc.close();\n\n    }\n}\n\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12967794,"reputation":21,"user_id":9374670,"display_name":"Diego Rojas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646220561,"creation_date":1646220561,"answer_id":71321922,"question_id":63321956,"body_markdown":"If your porpose is just to print out the result, you can convert your RDD into a java list using the method collect(). this will allow you to apply the java method forEach().\r\n\r\nExample: \r\n\r\n    myRDD.collect().forEach( System.out::println );","title":"Trying to use System.out as a task in an RDD","body":"<p>If your porpose is just to print out the result, you can convert your RDD into a java list using the method collect(). this will allow you to apply the java method forEach().</p>\n<p>Example:</p>\n<pre><code>myRDD.collect().forEach( System.out::println );\n</code></pre>\n"}],"owner":{"account_id":19256770,"reputation":15,"user_id":14073491,"display_name":"ashender"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":461,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":63322374,"answer_count":2,"score":0,"last_activity_date":1646220561,"creation_date":1596940080,"question_id":63321956,"body_markdown":"I am currently just starting out to learn Apache Spark, and had code that I can&#39;t quite figure out why is not compiling. It says the task that I am sending into the myRDD forEach is not serializable however a tutorial I am watching did a similar thing as well. Any Ideas or clues would be greatly appreciated.\r\n\r\n```\r\npublic class Main {\r\n    public static void main(String[] args) {\r\n        Logger.getLogger(&quot;org.apache&quot;).setLevel(Level.WARN);\r\n        List&lt;Integer&gt; inputData = new ArrayList&lt;&gt;();\r\n\r\n        inputData.add(25);\r\n\r\n\r\n        SparkConf conf = new SparkConf().setAppName(&quot;startingSpark&quot;).setMaster(&quot;local[*]&quot;);\r\n        JavaSparkContext sc = new JavaSparkContext(conf);\r\n\r\n        JavaRDD&lt;Integer&gt; myRDD = sc.parallelize(inputData);\r\n        Integer result = myRDD.reduce((x, y) -&gt; x + y);\r\n\r\n        myRDD.foreach( System.out::println );\r\n        System.out.println(result);\r\n\r\n        sc.close();\r\n\r\n    }\r\n}\r\n```\r\nStack Trace: \r\n\r\n```\r\nException in thread &quot;main&quot; org.apache.spark.SparkException: Task not serializable...\r\n\tat com.virtualpairprogrammers.Main.main(Main.java:26)\r\nCaused by: java.io.NotSerializableException: java.io.PrintStream\r\nSerialization stack:\r\n\t- object not serializable (class: java.io.PrintStream, value: java.io.PrintStream@11a82d0f)\r\n\t- element of array (index: 0)\r\n\t- array (class [Ljava.lang.Object;, size 1)...\r\n```\r\n\r\n","title":"Trying to use System.out as a task in an RDD","body":"<p>I am currently just starting out to learn Apache Spark, and had code that I can't quite figure out why is not compiling. It says the task that I am sending into the myRDD forEach is not serializable however a tutorial I am watching did a similar thing as well. Any Ideas or clues would be greatly appreciated.</p>\n<pre><code>public class Main {\n    public static void main(String[] args) {\n        Logger.getLogger(&quot;org.apache&quot;).setLevel(Level.WARN);\n        List&lt;Integer&gt; inputData = new ArrayList&lt;&gt;();\n\n        inputData.add(25);\n\n\n        SparkConf conf = new SparkConf().setAppName(&quot;startingSpark&quot;).setMaster(&quot;local[*]&quot;);\n        JavaSparkContext sc = new JavaSparkContext(conf);\n\n        JavaRDD&lt;Integer&gt; myRDD = sc.parallelize(inputData);\n        Integer result = myRDD.reduce((x, y) -&gt; x + y);\n\n        myRDD.foreach( System.out::println );\n        System.out.println(result);\n\n        sc.close();\n\n    }\n}\n</code></pre>\n<p>Stack Trace:</p>\n<pre><code>Exception in thread &quot;main&quot; org.apache.spark.SparkException: Task not serializable...\n    at com.virtualpairprogrammers.Main.main(Main.java:26)\nCaused by: java.io.NotSerializableException: java.io.PrintStream\nSerialization stack:\n    - object not serializable (class: java.io.PrintStream, value: java.io.PrintStream@11a82d0f)\n    - element of array (index: 0)\n    - array (class [Ljava.lang.Object;, size 1)...\n</code></pre>\n"},{"tags":["java","cdi","weld"],"answers":[{"tags":[],"owner":{"account_id":3284439,"reputation":39734,"user_id":2764255,"accept_rate":50,"display_name":"Nikos Paraskevopoulos"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1646220369,"creation_date":1646075972,"answer_id":71300018,"question_id":71297990,"body_markdown":"The way (I know) to add an interceptor on any (or all) methods without touching the code is a CDI portable extension. This sounds intimidating at first but in reality it isn&#39;t. You will find plenty of resources online, but a *high-level overview* of the steps is:\r\n\r\n- Create the extension class, a simple class that implements the *marker interface* `javax.enterprise.inject.spi.Extension`\r\n- Add a file under `/META-INF/services/javax.enterprise.inject.spi.Extension` that contains the name of the class implementing the extension\r\n\r\nDone setting up!\r\n\r\nNow for the interesting part: extension are simply CDI beans that contain *observer methods* for a set of events fired by CDI itself during the various phases of its initialization. Look [here](https://javaee.github.io/javaee-spec/javadocs/javax/enterprise/inject/spi/package-summary.html). Many of these events provide methods to tweak the container or what CDI knows for a bean. The idea is that your method `@Observes` these events and adds an interceptor annotation to all bean classes.\r\n\r\nSo the next step, specific to your problem is to create the interceptor with the logic you want and the interceptor annotation, that goes with it, let&#39;s call it `@MyInterceptor`. A very simple implementation of the extension class would be:\r\n\r\n```java\r\n// There is a little ceremony for the annotation...\r\nimport javax.enterprise.util.AnnotationLiteral;\r\n\r\npublic class MyInterceptorLiteral extends AnnotationLiteral&lt;MyInterceptor&gt;\r\n  implements MyInterceptor {\r\n  // nothing more needed\r\n}\r\n```\r\n\r\n```java\r\n// WARNING DEMO CODE, UNTESTED &amp; SEE BELOW FOR POSSIBLE GOTCHAS\r\npublic class MyInterceptorExtension implements Extension {\r\n  public void onProcessAnnotatedType(@Observes ProcessAnnotatedType&lt;?&gt; event) {\r\n    event.configureAnnotatedType().add(new MyInterceptorLiteral());\r\n  }\r\n}\r\n```\r\n\r\nThis may need some tweaking, but the principle is to add your interceptor annotation on all bean classes discovered by CDI. I do not know if this catches bean instances produced by producer methods/fields, these might be trickier to handle.\r\n\r\nAs for tracing the cascade of calls, this is the job of your interceptor. Not trivial, but there are ways (e.g. `ThreadLocal` context objects).","title":"is there a way to intercept all methods of all beans in CDI without touching their definition?","body":"<p>The way (I know) to add an interceptor on any (or all) methods without touching the code is a CDI portable extension. This sounds intimidating at first but in reality it isn't. You will find plenty of resources online, but a <em>high-level overview</em> of the steps is:</p>\n<ul>\n<li>Create the extension class, a simple class that implements the <em>marker interface</em> <code>javax.enterprise.inject.spi.Extension</code></li>\n<li>Add a file under <code>/META-INF/services/javax.enterprise.inject.spi.Extension</code> that contains the name of the class implementing the extension</li>\n</ul>\n<p>Done setting up!</p>\n<p>Now for the interesting part: extension are simply CDI beans that contain <em>observer methods</em> for a set of events fired by CDI itself during the various phases of its initialization. Look <a href=\"https://javaee.github.io/javaee-spec/javadocs/javax/enterprise/inject/spi/package-summary.html\" rel=\"nofollow noreferrer\">here</a>. Many of these events provide methods to tweak the container or what CDI knows for a bean. The idea is that your method <code>@Observes</code> these events and adds an interceptor annotation to all bean classes.</p>\n<p>So the next step, specific to your problem is to create the interceptor with the logic you want and the interceptor annotation, that goes with it, let's call it <code>@MyInterceptor</code>. A very simple implementation of the extension class would be:</p>\n<pre class=\"lang-java prettyprint-override\"><code>// There is a little ceremony for the annotation...\nimport javax.enterprise.util.AnnotationLiteral;\n\npublic class MyInterceptorLiteral extends AnnotationLiteral&lt;MyInterceptor&gt;\n  implements MyInterceptor {\n  // nothing more needed\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>// WARNING DEMO CODE, UNTESTED &amp; SEE BELOW FOR POSSIBLE GOTCHAS\npublic class MyInterceptorExtension implements Extension {\n  public void onProcessAnnotatedType(@Observes ProcessAnnotatedType&lt;?&gt; event) {\n    event.configureAnnotatedType().add(new MyInterceptorLiteral());\n  }\n}\n</code></pre>\n<p>This may need some tweaking, but the principle is to add your interceptor annotation on all bean classes discovered by CDI. I do not know if this catches bean instances produced by producer methods/fields, these might be trickier to handle.</p>\n<p>As for tracing the cascade of calls, this is the job of your interceptor. Not trivial, but there are ways (e.g. <code>ThreadLocal</code> context objects).</p>\n"},{"tags":[],"owner":{"account_id":6963528,"reputation":6523,"user_id":5342297,"display_name":"Siliarus"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1646133084,"creation_date":1646133084,"answer_id":71307578,"question_id":71297990,"body_markdown":"What you are asking for is a lot like what Weld does for its Probe extension that monitors all beans - it is possible to certain extent, but not fully.\r\nWhat I mean is that you can do this for any class based beans but not for producers (method/field) because by CDI definition those cannot by intercepted or decorated in standard ways. The only way to achieve that is via [interception factory][1] and that requires some special tweaking.\r\n\r\nAs for how to do this, here is few basic steps you&#39;d need:\r\n\r\n 1. Create an enabled interceptor class with required logic\r\n 2. Create an interceptor binding (say, `MyBinding` for the sake of this answer) and place it on the interceptor\r\n 3. Create a CDI extension that will add this interceptor binding to all the beans that you want to intercept. This can be done at several points in the extension lifecycle, but I&#39;d recommend looking at [`ProcessBeanAttributes&lt;?&gt;`][2] where you can configure the attributes and add the `MyBinding` interceptor binding to each bean. \r\n 4. Don&#39;t forget to enable the extension via META-INF entry.\r\n\r\n\r\nYou could take a look at the aforementioned Weld&#39;s Probe extension but note that it does more things so it will be more complex than what you are asking for in this question. Here are some links that might help:\r\n\r\n - [Probe extension class][3]\r\n - [Interceptor class][4], note that the class is `@Vetoed` whereas yours shouldn&#39;t be! Weld has it vetoed because of optional enablement for integrators.\r\n - [`MonitoredComponent`][5], in this case it is a stereotype (that then contains the binding) which is added to all the beans via extension. But you should be able to just add binding directly.\r\n\r\nLast but not least, there is one big gotcha that you need to be aware of. Adding interception to *all* beans means that you might attempt to add it to some bean that is unproxyable (which is an interception requirement). This would result in a error. In short, final methods and final classes will cause problems, but see [this specification part][6] for more information.\r\nThis is also why `ProbeExtension` does some special checking to avoid that. Look at [this code][7] for inspiration.\r\n\r\n&gt; however, since I want to keep the beans unawares of the interceptor\r\n\r\nI should note that with this or any other approach, bean metadata (the `Bean&lt;?&gt;` object) will contain information on the added binding so it is &quot;visible&quot; that the bean has been tweaked.\r\n\r\n\r\n  [1]: https://jakarta.ee/specifications/cdi/2.0/cdi-spec-2.0.html#interception_factory\r\n  [2]: https://jakarta.ee/specifications/cdi/2.0/cdi-spec-2.0.html#process_bean_attributes\r\n  [3]: https://github.com/weld/core/blob/master/probe/core/src/main/java/org/jboss/weld/probe/ProbeExtension.java\r\n  [4]: https://github.com/weld/core/blob/master/probe/core/src/main/java/org/jboss/weld/probe/InvocationMonitor.java\r\n  [5]: https://github.com/weld/core/blob/master/probe/core/src/main/java/org/jboss/weld/probe/MonitoredComponent.java\r\n  [6]: https://jakarta.ee/specifications/cdi/2.0/cdi-spec-2.0.html#unproxyable\r\n  [7]: https://github.com/weld/core/blob/master/probe/core/src/main/java/org/jboss/weld/probe/ProbeExtension.java#L266-L293","title":"is there a way to intercept all methods of all beans in CDI without touching their definition?","body":"<p>What you are asking for is a lot like what Weld does for its Probe extension that monitors all beans - it is possible to certain extent, but not fully.\nWhat I mean is that you can do this for any class based beans but not for producers (method/field) because by CDI definition those cannot by intercepted or decorated in standard ways. The only way to achieve that is via <a href=\"https://jakarta.ee/specifications/cdi/2.0/cdi-spec-2.0.html#interception_factory\" rel=\"nofollow noreferrer\">interception factory</a> and that requires some special tweaking.</p>\n<p>As for how to do this, here is few basic steps you'd need:</p>\n<ol>\n<li>Create an enabled interceptor class with required logic</li>\n<li>Create an interceptor binding (say, <code>MyBinding</code> for the sake of this answer) and place it on the interceptor</li>\n<li>Create a CDI extension that will add this interceptor binding to all the beans that you want to intercept. This can be done at several points in the extension lifecycle, but I'd recommend looking at <a href=\"https://jakarta.ee/specifications/cdi/2.0/cdi-spec-2.0.html#process_bean_attributes\" rel=\"nofollow noreferrer\"><code>ProcessBeanAttributes&lt;?&gt;</code></a> where you can configure the attributes and add the <code>MyBinding</code> interceptor binding to each bean.</li>\n<li>Don't forget to enable the extension via META-INF entry.</li>\n</ol>\n<p>You could take a look at the aforementioned Weld's Probe extension but note that it does more things so it will be more complex than what you are asking for in this question. Here are some links that might help:</p>\n<ul>\n<li><a href=\"https://github.com/weld/core/blob/master/probe/core/src/main/java/org/jboss/weld/probe/ProbeExtension.java\" rel=\"nofollow noreferrer\">Probe extension class</a></li>\n<li><a href=\"https://github.com/weld/core/blob/master/probe/core/src/main/java/org/jboss/weld/probe/InvocationMonitor.java\" rel=\"nofollow noreferrer\">Interceptor class</a>, note that the class is <code>@Vetoed</code> whereas yours shouldn't be! Weld has it vetoed because of optional enablement for integrators.</li>\n<li><a href=\"https://github.com/weld/core/blob/master/probe/core/src/main/java/org/jboss/weld/probe/MonitoredComponent.java\" rel=\"nofollow noreferrer\"><code>MonitoredComponent</code></a>, in this case it is a stereotype (that then contains the binding) which is added to all the beans via extension. But you should be able to just add binding directly.</li>\n</ul>\n<p>Last but not least, there is one big gotcha that you need to be aware of. Adding interception to <em>all</em> beans means that you might attempt to add it to some bean that is unproxyable (which is an interception requirement). This would result in a error. In short, final methods and final classes will cause problems, but see <a href=\"https://jakarta.ee/specifications/cdi/2.0/cdi-spec-2.0.html#unproxyable\" rel=\"nofollow noreferrer\">this specification part</a> for more information.\nThis is also why <code>ProbeExtension</code> does some special checking to avoid that. Look at <a href=\"https://github.com/weld/core/blob/master/probe/core/src/main/java/org/jboss/weld/probe/ProbeExtension.java#L266-L293\" rel=\"nofollow noreferrer\">this code</a> for inspiration.</p>\n<blockquote>\n<p>however, since I want to keep the beans unawares of the interceptor</p>\n</blockquote>\n<p>I should note that with this or any other approach, bean metadata (the <code>Bean&lt;?&gt;</code> object) will contain information on the added binding so it is &quot;visible&quot; that the bean has been tweaked.</p>\n"}],"owner":{"account_id":24407556,"reputation":17,"user_id":18335521,"display_name":"Leonardo Scommegna"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":734,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":71300018,"answer_count":2,"score":1,"last_activity_date":1646220369,"creation_date":1646065294,"question_id":71297990,"body_markdown":"I would like to write a tool able to intercept **all** the method calls during the usage of an application that use CDI (Weld).\r\n\r\nI have already tried with CDI interceptors, however, since I want to keep the beans unawares of the interceptor, I do not want to use the interceptor binding to observe the method calls.\r\n\r\nIs there a way to intercept calls that satisfies this constraint?\r\n\r\nBonus question: with this vision in mind, is there any way of tracing the cascade of calls from a method? it is fine with both top down (retrieve all the other methods called from the body of a specific method) and bottom up strategy (retrieve the method the caller method of a specific method).\r\n\r\n","title":"is there a way to intercept all methods of all beans in CDI without touching their definition?","body":"<p>I would like to write a tool able to intercept <strong>all</strong> the method calls during the usage of an application that use CDI (Weld).</p>\n<p>I have already tried with CDI interceptors, however, since I want to keep the beans unawares of the interceptor, I do not want to use the interceptor binding to observe the method calls.</p>\n<p>Is there a way to intercept calls that satisfies this constraint?</p>\n<p>Bonus question: with this vision in mind, is there any way of tracing the cascade of calls from a method? it is fine with both top down (retrieve all the other methods called from the body of a specific method) and bottom up strategy (retrieve the method the caller method of a specific method).</p>\n"},{"tags":["java","javafx-8"],"answers":[{"tags":[],"owner":{"account_id":7635183,"reputation":1513,"user_id":5788941,"display_name":"Alexandre Cartapanis"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1455105722,"creation_date":1455105722,"answer_id":35314707,"question_id":35312686,"body_markdown":"A solution is to use Java WebStart (https://java.com/en/download/faq/java_webstart.xml).","title":"java desktop jar app auto update mechanizm","body":"<p>A solution is to use Java WebStart (<a href=\"https://java.com/en/download/faq/java_webstart.xml\" rel=\"nofollow\">https://java.com/en/download/faq/java_webstart.xml</a>).</p>\n"},{"tags":[],"owner":{"account_id":2221916,"reputation":2848,"user_id":1961102,"display_name":"FibreFoX"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1455127234,"creation_date":1455127234,"answer_id":35322620,"question_id":35312686,"body_markdown":"When having a selfcontaining package (https://docs.oracle.com/javase/8/docs/technotes/guides/deploy/self-contained-packaging.html) (aka native bundle) created by the javapackager provided by the JDK itself, you can create new installers with the same &quot;identifier&quot;. At least on windows these are GUIDs which need to be the same on new versions for making the installer to detect the update.\r\n\r\nFor easy creation of that installers you don&#39;t need to use the javapackager directly, when using MAVEN you can use [JavaFX-Maven-Plugin](https://github.com/javafx-maven-plugin/javafx-maven-pluginv) or when using GRADLE just use [JavaFx-Gradle-Plugin](https://github.com/FibreFoX/javafx-gradle-plugin).\r\n\r\n**Disclaimer:** I&#39;m the maintainer (maven+gradle) and the author (gradle) of that plugins.\r\n\r\n*EDIT:* for checking on version, you can update some text-file on your server, which contains some path to the latest installer and the version","title":"java desktop jar app auto update mechanizm","body":"<p>When having a selfcontaining package (<a href=\"https://docs.oracle.com/javase/8/docs/technotes/guides/deploy/self-contained-packaging.html\" rel=\"nofollow\">https://docs.oracle.com/javase/8/docs/technotes/guides/deploy/self-contained-packaging.html</a>) (aka native bundle) created by the javapackager provided by the JDK itself, you can create new installers with the same \"identifier\". At least on windows these are GUIDs which need to be the same on new versions for making the installer to detect the update.</p>\n\n<p>For easy creation of that installers you don't need to use the javapackager directly, when using MAVEN you can use <a href=\"https://github.com/javafx-maven-plugin/javafx-maven-pluginv\" rel=\"nofollow\">JavaFX-Maven-Plugin</a> or when using GRADLE just use <a href=\"https://github.com/FibreFoX/javafx-gradle-plugin\" rel=\"nofollow\">JavaFx-Gradle-Plugin</a>.</p>\n\n<p><strong>Disclaimer:</strong> I'm the maintainer (maven+gradle) and the author (gradle) of that plugins.</p>\n\n<p><em>EDIT:</em> for checking on version, you can update some text-file on your server, which contains some path to the latest installer and the version</p>\n"}],"owner":{"account_id":4559460,"reputation":2251,"user_id":3702196,"accept_rate":75,"display_name":"avalon"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":602,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":35314707,"answer_count":2,"score":0,"last_activity_date":1646219797,"creation_date":1455100235,"question_id":35312686,"body_markdown":"I have a desktop JavaFX 8 application. I need to implement a function for auto-updating the application. Something like &#39;check for updates&#39; and &#39;update&#39; dialog in other java applications. How to implement it correctly?","title":"java desktop jar app auto update mechanizm","body":"<p>I have a desktop JavaFX 8 application. I need to implement a function for auto-updating the application. Something like 'check for updates' and 'update' dialog in other java applications. How to implement it correctly?</p>\n"},{"tags":["java","java-web-start","shortcut"],"comments":[{"owner":{"account_id":2011141,"reputation":7317,"user_id":1799530,"accept_rate":47,"display_name":"SomeJavaGuy"},"score":0,"creation_date":1461919147,"post_id":36933535,"comment_id":61426532,"body_markdown":"set the `JAVA_PATH` or call `javaws.exe` with a complete path.","body":"set the <code>JAVA_PATH</code> or call <code>javaws.exe</code> with a complete path."}],"answers":[{"tags":[],"owner":{"account_id":5783361,"reputation":281,"user_id":4563367,"accept_rate":14,"display_name":"Rashmi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1469776723,"creation_date":1469776723,"answer_id":38652754,"question_id":36933535,"body_markdown":"Java Web Start is included in the Java Runtime Environment (JRE) .The desktop short cut may be pointing to your previous version . \r\n\r\nAlso go to Start &gt; Settings &gt; Control Panel &gt; Double click on the Java icon. ...\r\nClick on the General tab. Click on the View button from the Temporary Internet Files section. Make sure you the previous version is unchecked","title":"Java Web Start shortcuts not working after Java update","body":"<p>Java Web Start is included in the Java Runtime Environment (JRE) .The desktop short cut may be pointing to your previous version . </p>\n\n<p>Also go to Start > Settings > Control Panel > Double click on the Java icon. ...\nClick on the General tab. Click on the View button from the Temporary Internet Files section. Make sure you the previous version is unchecked</p>\n"}],"owner":{"account_id":8347237,"reputation":61,"user_id":6270576,"display_name":"AndiOzelot"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":865,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1646219609,"creation_date":1461919108,"question_id":36933535,"body_markdown":"After updating to **Java 1.8**, all my Java Web Start desktop shortcuts don&#39;t work any more, because of the wrong path to the `JRE`.\r\n\r\nFor example:\r\n    \r\n    C:\\Program Files\\Java\\jre1.x.x_xx\\....\r\n\r\nIs there a way to update these paths automatically after a Java update?","title":"Java Web Start shortcuts not working after Java update","body":"<p>After updating to <strong>Java 1.8</strong>, all my Java Web Start desktop shortcuts don't work any more, because of the wrong path to the <code>JRE</code>.</p>\n\n<p>For example:</p>\n\n<pre><code>C:\\Program Files\\Java\\jre1.x.x_xx\\....\n</code></pre>\n\n<p>Is there a way to update these paths automatically after a Java update?</p>\n"},{"tags":["java","android","matomo"],"answers":[{"tags":[],"owner":{"account_id":6329959,"reputation":161,"user_id":4915137,"display_name":"Luigi_Papardelle"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646219569,"creation_date":1646219569,"answer_id":71321692,"question_id":68110861,"body_markdown":"Did you try to define a userId or visitorId when creating the tracker? You could generate a unique userID on first startup of the app and store it in the shared preferences, while you create a visitorID on each startup and thus track the current session. You can explicitly set those ids then, e.g:\r\n\r\n    TrackerBuilder\r\n       .createDefault(BuildConfig.MATOMO_URI, BuildConfig.MATOMO_SITE_ID)\r\n       .build(Matomo.getInstance(c))\r\n       .setUserId(userIdFromSharedPrefs)\r\n       .setVisitorId(visitorIdGeneratedOnEachStartup)\r\n\r\nTracking works fine for me then, actions are rolled up and postet for the current visitor session bundles in the visit. \r\n\r\nIf you don&#39;t define them, the Matomo Android API should create and persist a default visitorID, but no userID to &quot;mimic behaviour like in iOS&quot; (as stated here: https://github.com/matomo-org/matomo-sdk-android/pull/256 which was a commit following this discussion: https://github.com/matomo-org/matomo-sdk-android/issues/255) However, I also faces troubles with this implementation and Thus I started setting these ids on my own, and it works as expected. \r\n\r\nMind though, that the behaviour could also depend on the Matomo version you use for Android and on the Server... ","title":"Android Matomo sends actions in multiple visits","body":"<p>Did you try to define a userId or visitorId when creating the tracker? You could generate a unique userID on first startup of the app and store it in the shared preferences, while you create a visitorID on each startup and thus track the current session. You can explicitly set those ids then, e.g:</p>\n<pre><code>TrackerBuilder\n   .createDefault(BuildConfig.MATOMO_URI, BuildConfig.MATOMO_SITE_ID)\n   .build(Matomo.getInstance(c))\n   .setUserId(userIdFromSharedPrefs)\n   .setVisitorId(visitorIdGeneratedOnEachStartup)\n</code></pre>\n<p>Tracking works fine for me then, actions are rolled up and postet for the current visitor session bundles in the visit.</p>\n<p>If you don't define them, the Matomo Android API should create and persist a default visitorID, but no userID to &quot;mimic behaviour like in iOS&quot; (as stated here: <a href=\"https://github.com/matomo-org/matomo-sdk-android/pull/256\" rel=\"nofollow noreferrer\">https://github.com/matomo-org/matomo-sdk-android/pull/256</a> which was a commit following this discussion: <a href=\"https://github.com/matomo-org/matomo-sdk-android/issues/255\" rel=\"nofollow noreferrer\">https://github.com/matomo-org/matomo-sdk-android/issues/255</a>) However, I also faces troubles with this implementation and Thus I started setting these ids on my own, and it works as expected.</p>\n<p>Mind though, that the behaviour could also depend on the Matomo version you use for Android and on the Server...</p>\n"}],"owner":{"account_id":22038191,"reputation":23,"user_id":16304340,"display_name":"Mahsum B"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":149,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1646219569,"creation_date":1624517567,"question_id":68110861,"body_markdown":"Hi I&#39;m using Matomo for Android and i have this issue were Matomo sends each action as a single visit instead of all actions of the visit as one visit. So for example each page i open in the last 5 seconds will be sends in one visit each.\r\n\r\nExample: I open the Start screen and then the search screen and then result screen. I would have 3 different visits in matomo dashboard with only one page view per visit. So one visit for start screen, one for search and one for result.\r\n\r\nIn iOS i dont have this issue, there it sends all my actions in one single Visit, as it should.\r\n\r\nWhat could be the Problem? I implemented the getTracker() method in the abstract class for all my pages so it should be fine and like in iOS.","title":"Android Matomo sends actions in multiple visits","body":"<p>Hi I'm using Matomo for Android and i have this issue were Matomo sends each action as a single visit instead of all actions of the visit as one visit. So for example each page i open in the last 5 seconds will be sends in one visit each.</p>\n<p>Example: I open the Start screen and then the search screen and then result screen. I would have 3 different visits in matomo dashboard with only one page view per visit. So one visit for start screen, one for search and one for result.</p>\n<p>In iOS i dont have this issue, there it sends all my actions in one single Visit, as it should.</p>\n<p>What could be the Problem? I implemented the getTracker() method in the abstract class for all my pages so it should be fine and like in iOS.</p>\n"},{"tags":["java","mysql","hibernate"],"comments":[{"owner":{"account_id":2779715,"reputation":774,"user_id":2392469,"display_name":"gmaslowski"},"score":1,"creation_date":1461184582,"post_id":36754568,"comment_id":61089617,"body_markdown":"Does `UserEntity` have an `@Id` annotated field?","body":"Does <code>UserEntity</code> have an <code>@Id</code> annotated field?"},{"owner":{"account_id":69386,"reputation":5102,"user_id":201891,"accept_rate":85,"display_name":"DavidS"},"score":1,"creation_date":1461185722,"post_id":36754568,"comment_id":61090223,"body_markdown":"Please post the complete error message and explain when it occurs.","body":"Please post the complete error message and explain when it occurs."},{"owner":{"account_id":3997513,"reputation":415,"user_id":3294573,"accept_rate":62,"display_name":"TVH7"},"score":0,"creation_date":1461185873,"post_id":36754568,"comment_id":61090313,"body_markdown":"@gmaslowski Yes it does.","body":"@gmaslowski Yes it does."}],"answers":[{"tags":[],"owner":{"account_id":8034427,"reputation":1287,"user_id":6058076,"accept_rate":100,"display_name":"LearningPhase"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1461197525,"creation_date":1461197525,"answer_id":36757399,"question_id":36754568,"body_markdown":"Can you please try replacing your code \r\n\r\n    @GeneratedValue(strategy=GenerationType.AUTO)\r\n\r\nwith\r\n\r\n\r\n    @GeneratedValue(strategy=GenerationType.IDENTITY)\r\n","title":"Hibernate persistent entity should have a primary key","body":"<p>Can you please try replacing your code </p>\n\n<pre><code>@GeneratedValue(strategy=GenerationType.AUTO)\n</code></pre>\n\n<p>with</p>\n\n<pre><code>@GeneratedValue(strategy=GenerationType.IDENTITY)\n</code></pre>\n"}],"owner":{"account_id":3997513,"reputation":415,"user_id":3294573,"accept_rate":62,"display_name":"TVH7"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11169,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":36757399,"answer_count":1,"score":4,"last_activity_date":1646219242,"creation_date":1461184265,"question_id":36754568,"body_markdown":"I&#39;m having the following Entity. I&#39;m trying to replace the folliwing. (See image) but I&#39;m getting the following error: Persistent Entity should have a primary key. \r\n\r\n(I&#39;m new to hibernate) (Please comment if you also need the UserEntity Class) (Thanks in advance!)\r\n\r\n[![enter image description here][1]][1]\r\n\r\n    @Entity\r\n    @Table(name = &quot;Student&quot;, schema = &quot;pad_ijburg&quot;, catalog = &quot;&quot;)\r\n    public class StudentEntity extends UserEntity {\r\n        private Integer idGroup;\r\n        private int idUser;\r\n    \r\n        @Basic\r\n        @Column(name = &quot;idGroup&quot;)\r\n        public Integer getIdGroup() {\r\n            return idGroup;\r\n        }\r\n    \r\n        public void setIdGroup(Integer idGroup) {\r\n            this.idGroup = idGroup;\r\n        }\r\n    \r\n        @Basic\r\n        @Column\r\n        public int getIdUser() {\r\n            return idUser;\r\n        }\r\n    \r\n        public void setIdUser(int idUser) {\r\n            this.idUser = idUser;\r\n        }\r\n    \r\n        @Override\r\n        public boolean equals(Object o) {\r\n            if (this == o) return true;\r\n            if (o == null || getClass() != o.getClass()) return false;\r\n    \r\n            StudentEntity that = (StudentEntity) o;\r\n    \r\n            if (idUser != that.idUser) return false;\r\n            if (idGroup != null ? !idGroup.equals(that.idGroup) : that.idGroup != null) return false;\r\n    \r\n            return true;\r\n        }\r\n    \r\n        @Override\r\n        public int hashCode() {\r\n            int result = idGroup != null ? idGroup.hashCode() : 0;\r\n            result = 31 * result + idUser;\r\n            return result;\r\n        }\r\n    }\r\n\r\n  [1]: http://i.stack.imgur.com/vExAa.png\r\n\r\n\r\n    package org.hva.folivora.model.user;\r\n    \r\n    import javax.persistence.*;\r\n    \r\n    /**\r\n     * \r\n     */\r\n    @Entity\r\n    @Table(name = &quot;User&quot;, schema = &quot;pad_ijburg&quot;)\r\n    @Inheritance(strategy = InheritanceType.JOINED)\r\n    public class UserEntity {\r\n        private int idUser;\r\n        private String email;\r\n        private String firstName;\r\n        private String lastName;\r\n        private String password;\r\n        private Boolean admin;\r\n    \r\n        @Id @GeneratedValue(strategy = GenerationType.AUTO)\r\n        @Column(name = &quot;idUser&quot;, nullable = false)\r\n        public int getIdUser() {\r\n            return idUser;\r\n        }\r\n    \r\n        public void setIdUser(int idUser) {\r\n            this.idUser = idUser;\r\n        }\r\n    \r\n        @Basic\r\n        @Column(name = &quot;email&quot;)\r\n        public String getEmail() {\r\n            return email;\r\n        }\r\n    \r\n        public void setEmail(String email) {\r\n            this.email = email;\r\n        }\r\n    \r\n        @Basic\r\n        @Column(name = &quot;firstName&quot;)\r\n        public String getFirstName() {\r\n            return firstName;\r\n        }\r\n    \r\n        public void setFirstName(String firstName) {\r\n            this.firstName = firstName;\r\n        }\r\n    \r\n        @Basic\r\n        @Column(name = &quot;lastName&quot;)\r\n        public String getLastName() {\r\n            return lastName;\r\n        }\r\n    \r\n        public void setLastName(String lastName) {\r\n            this.lastName = lastName;\r\n        }\r\n    \r\n        @Basic\r\n        @Column(name = &quot;password&quot;)\r\n        public String getPassword() {\r\n            return password;\r\n        }\r\n    \r\n        public void setPassword(String password) {\r\n            this.password = password;\r\n        }\r\n    \r\n        @Basic\r\n        @Column(name = &quot;admin&quot;)\r\n        public Boolean getAdmin() {\r\n            return admin;\r\n        }\r\n    \r\n        public void setAdmin(Boolean admin) {\r\n            this.admin = admin;\r\n        }\r\n    \r\n        @Override\r\n        public boolean equals(Object o) {\r\n            if (this == o) return true;\r\n            if (o == null || getClass() != o.getClass()) return false;\r\n    \r\n            UserEntity that = (UserEntity) o;\r\n    \r\n            if (idUser != that.idUser) return false;\r\n            if (email != null ? !email.equals(that.email) : that.email != null) return false;\r\n            if (firstName != null ? !firstName.equals(that.firstName) : that.firstName != null) return false;\r\n            if (lastName != null ? !lastName.equals(that.lastName) : that.lastName != null) return false;\r\n            if (password != null ? !password.equals(that.password) : that.password != null) return false;\r\n            if (admin != null ? !admin.equals(that.admin) : that.admin != null) return false;\r\n    \r\n            return true;\r\n        }\r\n    \r\n        @Override\r\n        public int hashCode() {\r\n            int result = idUser;\r\n            result = 31 * result + (email != null ? email.hashCode() : 0);\r\n            result = 31 * result + (firstName != null ? firstName.hashCode() : 0);\r\n            result = 31 * result + (lastName != null ? lastName.hashCode() : 0);\r\n            result = 31 * result + (password != null ? password.hashCode() : 0);\r\n            result = 31 * result + (admin != null ? admin.hashCode() : 0);\r\n            return result;\r\n        }\r\n    }\r\n\r\nEdit: Also getting the following error when using generated value identiti\r\n\r\n    .StudentEntity column: idUser (should be mapped with insert=&quot;false&quot; update=&quot;false&quot;)\r\n","title":"Hibernate persistent entity should have a primary key","body":"<p>I'm having the following Entity. I'm trying to replace the folliwing. (See image) but I'm getting the following error: Persistent Entity should have a primary key. </p>\n\n<p>(I'm new to hibernate) (Please comment if you also need the UserEntity Class) (Thanks in advance!)</p>\n\n<p><a href=\"https://i.stack.imgur.com/vExAa.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vExAa.png\" alt=\"enter image description here\"></a></p>\n\n<pre><code>@Entity\n@Table(name = \"Student\", schema = \"pad_ijburg\", catalog = \"\")\npublic class StudentEntity extends UserEntity {\n    private Integer idGroup;\n    private int idUser;\n\n    @Basic\n    @Column(name = \"idGroup\")\n    public Integer getIdGroup() {\n        return idGroup;\n    }\n\n    public void setIdGroup(Integer idGroup) {\n        this.idGroup = idGroup;\n    }\n\n    @Basic\n    @Column\n    public int getIdUser() {\n        return idUser;\n    }\n\n    public void setIdUser(int idUser) {\n        this.idUser = idUser;\n    }\n\n    @Override\n    public boolean equals(Object o) {\n        if (this == o) return true;\n        if (o == null || getClass() != o.getClass()) return false;\n\n        StudentEntity that = (StudentEntity) o;\n\n        if (idUser != that.idUser) return false;\n        if (idGroup != null ? !idGroup.equals(that.idGroup) : that.idGroup != null) return false;\n\n        return true;\n    }\n\n    @Override\n    public int hashCode() {\n        int result = idGroup != null ? idGroup.hashCode() : 0;\n        result = 31 * result + idUser;\n        return result;\n    }\n}\n\npackage org.hva.folivora.model.user;\n\nimport javax.persistence.*;\n\n/**\n * \n */\n@Entity\n@Table(name = \"User\", schema = \"pad_ijburg\")\n@Inheritance(strategy = InheritanceType.JOINED)\npublic class UserEntity {\n    private int idUser;\n    private String email;\n    private String firstName;\n    private String lastName;\n    private String password;\n    private Boolean admin;\n\n    @Id @GeneratedValue(strategy = GenerationType.AUTO)\n    @Column(name = \"idUser\", nullable = false)\n    public int getIdUser() {\n        return idUser;\n    }\n\n    public void setIdUser(int idUser) {\n        this.idUser = idUser;\n    }\n\n    @Basic\n    @Column(name = \"email\")\n    public String getEmail() {\n        return email;\n    }\n\n    public void setEmail(String email) {\n        this.email = email;\n    }\n\n    @Basic\n    @Column(name = \"firstName\")\n    public String getFirstName() {\n        return firstName;\n    }\n\n    public void setFirstName(String firstName) {\n        this.firstName = firstName;\n    }\n\n    @Basic\n    @Column(name = \"lastName\")\n    public String getLastName() {\n        return lastName;\n    }\n\n    public void setLastName(String lastName) {\n        this.lastName = lastName;\n    }\n\n    @Basic\n    @Column(name = \"password\")\n    public String getPassword() {\n        return password;\n    }\n\n    public void setPassword(String password) {\n        this.password = password;\n    }\n\n    @Basic\n    @Column(name = \"admin\")\n    public Boolean getAdmin() {\n        return admin;\n    }\n\n    public void setAdmin(Boolean admin) {\n        this.admin = admin;\n    }\n\n    @Override\n    public boolean equals(Object o) {\n        if (this == o) return true;\n        if (o == null || getClass() != o.getClass()) return false;\n\n        UserEntity that = (UserEntity) o;\n\n        if (idUser != that.idUser) return false;\n        if (email != null ? !email.equals(that.email) : that.email != null) return false;\n        if (firstName != null ? !firstName.equals(that.firstName) : that.firstName != null) return false;\n        if (lastName != null ? !lastName.equals(that.lastName) : that.lastName != null) return false;\n        if (password != null ? !password.equals(that.password) : that.password != null) return false;\n        if (admin != null ? !admin.equals(that.admin) : that.admin != null) return false;\n\n        return true;\n    }\n\n    @Override\n    public int hashCode() {\n        int result = idUser;\n        result = 31 * result + (email != null ? email.hashCode() : 0);\n        result = 31 * result + (firstName != null ? firstName.hashCode() : 0);\n        result = 31 * result + (lastName != null ? lastName.hashCode() : 0);\n        result = 31 * result + (password != null ? password.hashCode() : 0);\n        result = 31 * result + (admin != null ? admin.hashCode() : 0);\n        return result;\n    }\n}\n</code></pre>\n\n<p>Edit: Also getting the following error when using generated value identiti</p>\n\n<pre><code>.StudentEntity column: idUser (should be mapped with insert=\"false\" update=\"false\")\n</code></pre>\n"},{"tags":["java","spring","hibernate"],"comments":[{"owner":{"account_id":4741976,"reputation":5385,"user_id":3834413,"display_name":"Eugene"},"score":0,"creation_date":1646219548,"post_id":71321324,"comment_id":126067590,"body_markdown":"Do you ask about Hibernate Caching?","body":"Do you ask about Hibernate Caching?"},{"owner":{"account_id":24427615,"reputation":11,"user_id":18352982,"display_name":"Fizhh"},"score":0,"creation_date":1646220110,"post_id":71321324,"comment_id":126067749,"body_markdown":"No, i dont think it relevant with hibernate cache","body":"No, i dont think it relevant with hibernate cache"},{"owner":{"account_id":22978237,"reputation":486,"user_id":17105581,"display_name":"ferrouskid"},"score":0,"creation_date":1646240861,"post_id":71321324,"comment_id":126076143,"body_markdown":"I think you might need to call the `save()` method for it to save. The docs say that `save() and persist() result in an SQL INSERT, delete() in an SQL DELETE and update() or merge() in an SQL UPDATE` ([link](https://docs.jboss.org/hibernate/orm/3.5/javadocs/org/hibernate/Session.html)). Btw here is a fantastic [resource](https://docs.jboss.org/hibernate/core/3.3/reference/en/html/transactions.html)","body":"I think you might need to call the <code>save()</code> method for it to save. The docs say that <code>save() and persist() result in an SQL INSERT, delete() in an SQL DELETE and update() or merge() in an SQL UPDATE</code> (<a href=\"https://docs.jboss.org/hibernate/orm/3.5/javadocs/org/hibernate/Session.html\" rel=\"nofollow noreferrer\">link</a>). Btw here is a fantastic <a href=\"https://docs.jboss.org/hibernate/core/3.3/reference/en/html/transactions.html\" rel=\"nofollow noreferrer\">resource</a>"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1646289333,"post_id":71321324,"comment_id":126087500,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"owner":{"account_id":24427615,"reputation":11,"user_id":18352982,"display_name":"Fizhh"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":99,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1646218437,"creation_date":1646217846,"question_id":71321324,"body_markdown":"when i use Hibernate, does Session which created by SessionFactory will save all data from Transaction to memory ?","title":"Does Session in Hibernate save data to memory","body":"<p>when i use Hibernate, does Session which created by SessionFactory will save all data from Transaction to memory ?</p>\n"},{"tags":["java","gradle","junit","build.gradle"],"comments":[{"owner":{"account_id":7719031,"reputation":2254,"user_id":5845802,"display_name":"PrasadU"},"score":0,"creation_date":1646302699,"post_id":71321433,"comment_id":126091724,"body_markdown":"the module you brought over from GitHub might be junit4 - while you gradle is configured for junit 5. see https://docs.gradle.org/current/userguide/java_testing.html#executing_legacy_tests_with_junit_vintage","body":"the module you brought over from GitHub might be junit4 - while you gradle is configured for junit 5. see <a href=\"https://docs.gradle.org/current/userguide/java_testing.html#executing_legacy_tests_with_junit_vintage\" rel=\"nofollow noreferrer\">docs.gradle.org/current/userguide/&hellip;</a>"}],"owner":{"account_id":6866472,"reputation":11,"user_id":10526640,"display_name":"oyster"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":567,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1646218364,"creation_date":1646218364,"question_id":71321433,"body_markdown":"I&#39;m currently building a project that depends on another that I got from github, but the unit tests only run for the newly created module, any hints on how to get the unit tests to run in the whole project?\r\n\r\nWhen I `gradle test` I get only the tests for the new module and when I `gradle :module2:test`  I get that Junit successfully tested zero tests.\r\n\r\nArchitecture\r\n\r\n    -&gt;new module (called app)\r\n         -&gt;build.gradle (call it 1- )\r\n    -&gt;github module (called module2)\r\n         -&gt;build.gradle (call it 2- )\r\n         -&gt;settings.gradle\r\n    -&gt;settings.gradle\r\n\r\nBuild.gradle 1-\r\n\r\n        plugins {\r\n        id &#39;rss.java-application-conventions&#39;\r\n        id &#39;idea&#39;\r\n        id &#39;com.adarshr.test-logger&#39; version &#39;3.2.0&#39;\r\n    }\r\n    \r\n    sourceCompatibility = 1.8\r\n    repositories { jcenter() }\r\n    \r\n    dependencies {\r\n        implementation project(&#39;:xmlrss&#39;)\r\n        implementation &#39;org.apache.commons:commons-text&#39;\r\n        testImplementation &#39;junit:junit:4.11&#39;\r\n        implementation &#39;junit:junit:4.11&#39;\r\n    }\r\n    \r\n    repositories {\r\n        gradlePluginPortal() // so that external plugins can be resolved in dependencies section\r\n        mavenCentral()\r\n    }\r\n    \r\n    version = &#39;0.1.0&#39;\r\n    \r\n    application {\r\n        // Define the main class for the application.\r\n        mainClass = &#39;rss.app.App&#39;\r\n    }\r\n    jar {\r\n        manifest {\r\n            attributes &#39;Main-Class&#39;: &#39;rss.app.MainClass&#39;\r\n        }\r\n    }\r\n    \r\n    \r\n    test {\r\n        dependsOn(&#39;:module2:test&#39;)\r\n        useJUnitPlatform()\r\n        testLogging {\r\n            events &quot;passed&quot;, &quot;skipped&quot;, &quot;failed&quot;\r\n            exceptionFormat &quot;short&quot;\r\n    \r\n            // set options for log level DEBUG\r\n            debug {\r\n                events &quot;started&quot;, &quot;skipped&quot;, &quot;failed&quot;\r\n                exceptionFormat &quot;full&quot;\r\n            }\r\n    \r\n            // remove standard output/error logging from --info builds\r\n            // by assigning only &#39;failed&#39; and &#39;skipped&#39; events\r\n            info.events = [&quot;failed&quot;, &quot;skipped&quot;]\r\n        }\r\n    }\r\n\r\nBuild.gradle 2-\r\n\r\n        plugins {\r\n        id &#39;rss.java-library-conventions&#39;\r\n        id &#39;idea&#39;\r\n        id &#39;com.adarshr.test-logger&#39; version &#39;3.2.0&#39;\r\n    }\r\n    sourceCompatibility = 1.8\r\n    \r\n    repositories {\r\n        mavenCentral()\r\n        jcenter()\r\n    }\r\n    \r\n    dependencies {\r\n        implementation group: &#39;org.apache.santuario&#39;, name: &#39;xmlsec&#39;, version: &#39;2.0.8&#39;\r\n        testImplementation &#39;junit:junit:4.11&#39;\r\n        implementation &#39;junit:junit:4.11&#39;\r\n    }\r\n    \r\n    repositories {\r\n        gradlePluginPortal() // so that external plugins can be resolved in dependencies section\r\n        mavenCentral()\r\n    }\r\n    \r\n    \r\n    test {\r\n        useJUnitPlatform()\r\n        testLogging {\r\n            events &quot;passed&quot;, &quot;skipped&quot;, &quot;failed&quot;\r\n            exceptionFormat &quot;short&quot;\r\n    \r\n            // set options for log level DEBUG\r\n            debug {\r\n                events &quot;started&quot;, &quot;skipped&quot;, &quot;failed&quot;\r\n                exceptionFormat &quot;full&quot;\r\n            }\r\n    \r\n            // remove standard output/error logging from --info builds\r\n            // by assigning only &#39;failed&#39; and &#39;skipped&#39; events\r\n            info.events = [&quot;failed&quot;, &quot;skipped&quot;]\r\n        }\r\n    }\r\n\r\nSettings.gradle (for module2):\r\n\r\n    rootProject.name = &#39;module2&#39;\r\n\r\nSettings.gradle (in root folder):\r\n\r\n    rootProject.name = &#39;rss&#39;\r\n    include(&#39;app&#39;, &#39;module2&#39;)","title":"Gradle only unit-test main module (using Junit:4.11) (gradle multi-module project)","body":"<p>I'm currently building a project that depends on another that I got from github, but the unit tests only run for the newly created module, any hints on how to get the unit tests to run in the whole project?</p>\n<p>When I <code>gradle test</code> I get only the tests for the new module and when I <code>gradle :module2:test</code>  I get that Junit successfully tested zero tests.</p>\n<p>Architecture</p>\n<pre><code>-&gt;new module (called app)\n     -&gt;build.gradle (call it 1- )\n-&gt;github module (called module2)\n     -&gt;build.gradle (call it 2- )\n     -&gt;settings.gradle\n-&gt;settings.gradle\n</code></pre>\n<p>Build.gradle 1-</p>\n<pre><code>    plugins {\n    id 'rss.java-application-conventions'\n    id 'idea'\n    id 'com.adarshr.test-logger' version '3.2.0'\n}\n\nsourceCompatibility = 1.8\nrepositories { jcenter() }\n\ndependencies {\n    implementation project(':xmlrss')\n    implementation 'org.apache.commons:commons-text'\n    testImplementation 'junit:junit:4.11'\n    implementation 'junit:junit:4.11'\n}\n\nrepositories {\n    gradlePluginPortal() // so that external plugins can be resolved in dependencies section\n    mavenCentral()\n}\n\nversion = '0.1.0'\n\napplication {\n    // Define the main class for the application.\n    mainClass = 'rss.app.App'\n}\njar {\n    manifest {\n        attributes 'Main-Class': 'rss.app.MainClass'\n    }\n}\n\n\ntest {\n    dependsOn(':module2:test')\n    useJUnitPlatform()\n    testLogging {\n        events &quot;passed&quot;, &quot;skipped&quot;, &quot;failed&quot;\n        exceptionFormat &quot;short&quot;\n\n        // set options for log level DEBUG\n        debug {\n            events &quot;started&quot;, &quot;skipped&quot;, &quot;failed&quot;\n            exceptionFormat &quot;full&quot;\n        }\n\n        // remove standard output/error logging from --info builds\n        // by assigning only 'failed' and 'skipped' events\n        info.events = [&quot;failed&quot;, &quot;skipped&quot;]\n    }\n}\n</code></pre>\n<p>Build.gradle 2-</p>\n<pre><code>    plugins {\n    id 'rss.java-library-conventions'\n    id 'idea'\n    id 'com.adarshr.test-logger' version '3.2.0'\n}\nsourceCompatibility = 1.8\n\nrepositories {\n    mavenCentral()\n    jcenter()\n}\n\ndependencies {\n    implementation group: 'org.apache.santuario', name: 'xmlsec', version: '2.0.8'\n    testImplementation 'junit:junit:4.11'\n    implementation 'junit:junit:4.11'\n}\n\nrepositories {\n    gradlePluginPortal() // so that external plugins can be resolved in dependencies section\n    mavenCentral()\n}\n\n\ntest {\n    useJUnitPlatform()\n    testLogging {\n        events &quot;passed&quot;, &quot;skipped&quot;, &quot;failed&quot;\n        exceptionFormat &quot;short&quot;\n\n        // set options for log level DEBUG\n        debug {\n            events &quot;started&quot;, &quot;skipped&quot;, &quot;failed&quot;\n            exceptionFormat &quot;full&quot;\n        }\n\n        // remove standard output/error logging from --info builds\n        // by assigning only 'failed' and 'skipped' events\n        info.events = [&quot;failed&quot;, &quot;skipped&quot;]\n    }\n}\n</code></pre>\n<p>Settings.gradle (for module2):</p>\n<pre><code>rootProject.name = 'module2'\n</code></pre>\n<p>Settings.gradle (in root folder):</p>\n<pre><code>rootProject.name = 'rss'\ninclude('app', 'module2')\n</code></pre>\n"},{"tags":["java","audio","mp3","wav","javasound"],"comments":[{"owner":{"account_id":2096500,"reputation":5770,"user_id":1865109,"accept_rate":82,"display_name":"Daniil"},"score":1,"creation_date":1356818979,"post_id":14085199,"comment_id":19480134,"body_markdown":"There is existing java converter and it&#39;s source is [this]( http://code.google.com/p/mp3transform/source/browse/trunk/mp3/src/mp3/wav/WavConverter.java?r=6). May be your should just copy-paste source from it?","body":"There is existing java converter and it&#39;s source is [this]( <a href=\"http://code.google.com/p/mp3transform/source/browse/trunk/mp3/src/mp3/wav/WavConverter.java?r=6\" rel=\"nofollow noreferrer\">code.google.com/p/mp3transform/source/browse/trunk/mp3/src/m&zwnj;&#8203;p3/&hellip;</a>). May be your should just copy-paste source from it?"},{"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"score":0,"creation_date":1356834395,"post_id":14085199,"comment_id":19482999,"body_markdown":"I&#39;d say the real problem is the source file.  Try some of the MP3s available at my [media page](http://pscode.org/media/#sound).","body":"I&#39;d say the real problem is the source file.  Try some of the MP3s available at my <a href=\"http://pscode.org/media/#sound\" rel=\"nofollow noreferrer\">media page</a>."},{"owner":{"account_id":9226,"reputation":30024,"user_id":16959,"accept_rate":89,"display_name":"Jason Sperske"},"score":0,"creation_date":1356835307,"post_id":14085199,"comment_id":19483167,"body_markdown":"Could your MP3 have a variable bit rate? Maybe the media decoding code isn&#39;t that advanced","body":"Could your MP3 have a variable bit rate? Maybe the media decoding code isn&#39;t that advanced"},{"owner":{"account_id":7378049,"reputation":3199,"user_id":5615873,"accept_rate":0,"display_name":"Apostolos"},"score":0,"creation_date":1646218071,"post_id":14085199,"comment_id":126067092,"body_markdown":"BTW (for &quot;late comers&quot;): Java does not support MP3 files anymore.","body":"BTW (for &quot;late comers&quot;): Java does not support MP3 files anymore."}],"answers":[{"tags":[],"owner":{"account_id":1635218,"reputation":3330,"user_id":1508907,"accept_rate":89,"display_name":"nullptr"},"down_vote_count":0,"up_vote_count":12,"is_accepted":true,"score":12,"last_activity_date":1443875469,"creation_date":1357237898,"answer_id":14144956,"question_id":14085199,"body_markdown":"    public static byte [] getAudioDataBytes(byte [] sourceBytes, AudioFormat audioFormat) throws UnsupportedAudioFileException, IllegalArgumentException, Exception{\r\n            if(sourceBytes == null || sourceBytes.length == 0 || audioFormat == null){\r\n                throw new IllegalArgumentException(&quot;Illegal Argument passed to this method&quot;);\r\n            }\r\n            \r\n            ByteArrayInputStream bais = null;\r\n            ByteArrayOutputStream baos = null;\r\n            AudioInputStream sourceAIS = null;\r\n            AudioInputStream convert1AIS = null;\r\n            AudioInputStream convert2AIS = null;\r\n            \r\n            try{\r\n                bais = new ByteArrayInputStream(sourceBytes);\r\n                sourceAIS = AudioSystem.getAudioInputStream(bais);\r\n                AudioFormat sourceFormat = sourceAIS.getFormat();\r\n                AudioFormat convertFormat = new AudioFormat(AudioFormat.Encoding.PCM_SIGNED, sourceFormat.getSampleRate(), 16, sourceFormat.getChannels(), sourceFormat.getChannels()*2, sourceFormat.getSampleRate(), false);\r\n                convert1AIS = AudioSystem.getAudioInputStream(convertFormat, sourceAIS);\r\n                convert2AIS = AudioSystem.getAudioInputStream(audioFormat, convert1AIS);\r\n    \r\n                baos = new ByteArrayOutputStream();\r\n                \r\n                byte [] buffer = new byte[8192];\r\n                while(true){\r\n                    int readCount = convert2AIS.read(buffer, 0, buffer.length);\r\n                    if(readCount == -1){\r\n                        break;\r\n                    }\r\n                    baos.write(buffer, 0, readCount);\r\n                }\r\n                return baos.toByteArray();\r\n            } catch(UnsupportedAudioFileException uafe){\r\n                //uafe.printStackTrace();\r\n                throw uafe;\r\n            } catch(IOException ioe){\r\n                //ioe.printStackTrace();\r\n                throw ioe;\r\n            } catch(IllegalArgumentException iae){\r\n                //iae.printStackTrace();\r\n                throw iae;\r\n            } catch (Exception e) {\r\n                //e.printStackTrace();\r\n                throw e;\r\n            }finally{\r\n                if(baos != null){\r\n                    try{\r\n                        baos.close();\r\n                    }catch(Exception e){\r\n                    }\r\n                }\r\n                if(convert2AIS != null){\r\n                    try{\r\n                        convert2AIS.close();\r\n                    }catch(Exception e){\r\n                    }\r\n                }\r\n                if(convert1AIS != null){\r\n                    try{\r\n                        convert1AIS.close();\r\n                    }catch(Exception e){\r\n                    }\r\n                }\r\n                if(sourceAIS != null){\r\n                    try{\r\n                        sourceAIS.close();\r\n                    }catch(Exception e){\r\n                    }\r\n                }\r\n                if(bais != null){\r\n                    try{\r\n                        bais.close();\r\n                    }catch(Exception e){\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\nHere sourceBytes represents MP3 file or WAV file. audioFormat is PCM format in which you want conversion. Also we need to put mp3spi.jar, tritonus_mp3.jar, jl*.jar, tritonus_share.jar from javazoom.com in classpath. Hope this may help to other.\r\n\r\nJava 7 version:\r\n\r\n    public static byte [] getAudioDataBytes(byte [] sourceBytes, AudioFormat audioFormat) throws UnsupportedAudioFileException, IllegalArgumentException, Exception {\r\n        if(sourceBytes == null || sourceBytes.length == 0 || audioFormat == null){\r\n            throw new IllegalArgumentException(&quot;Illegal Argument passed to this method&quot;);\r\n        }\r\n            \r\n        try (final ByteArrayInputStream bais = new ByteArrayInputStream(sourceBytes);\r\n             final AudioInputStream sourceAIS = AudioSystem.getAudioInputStream(bais)) {\r\n            AudioFormat sourceFormat = sourceAIS.getFormat();\r\n            AudioFormat convertFormat = new AudioFormat(AudioFormat.Encoding.PCM_SIGNED, sourceFormat.getSampleRate(), 16, sourceFormat.getChannels(), sourceFormat.getChannels()*2, sourceFormat.getSampleRate(), false);\r\n            try (final AudioInputStream convert1AIS = AudioSystem.getAudioInputStream(convertFormat, sourceAIS);\r\n                 final AudioInputStream convert2AIS = AudioSystem.getAudioInputStream(audioFormat, convert1AIS);\r\n                 final ByteArrayOutputStream baos = new ByteArrayOutputStream()) {\r\n                byte [] buffer = new byte[8192];\r\n                while(true){\r\n                    int readCount = convert2AIS.read(buffer, 0, buffer.length);\r\n                    if(readCount == -1){\r\n                        break;\r\n                    }\r\n                    baos.write(buffer, 0, readCount);\r\n                }\r\n                return baos.toByteArray();\r\n            }\r\n        }\r\n    }\r\n\r\nMaven:\r\n\r\n\t&lt;dependency&gt;\r\n\t\t&lt;groupId&gt;com.googlecode.soundlibs&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;mp3spi&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;1.9.5-1&lt;/version&gt;\r\n\t&lt;/dependency&gt;\r\n\t&lt;dependency&gt;\r\n\t\t&lt;groupId&gt;com.googlecode.soundlibs&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;jlayer&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;1.0.1-1&lt;/version&gt;\r\n\t\t&lt;exclusions&gt;\r\n\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t&lt;groupId&gt;junit&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n\t\t\t&lt;/exclusion&gt;\r\n\t\t&lt;/exclusions&gt;\r\n\t&lt;/dependency&gt;\r\n","title":"mp3 to wav conversion in java","body":"<pre><code>public static byte [] getAudioDataBytes(byte [] sourceBytes, AudioFormat audioFormat) throws UnsupportedAudioFileException, IllegalArgumentException, Exception{\n        if(sourceBytes == null || sourceBytes.length == 0 || audioFormat == null){\n            throw new IllegalArgumentException(\"Illegal Argument passed to this method\");\n        }\n\n        ByteArrayInputStream bais = null;\n        ByteArrayOutputStream baos = null;\n        AudioInputStream sourceAIS = null;\n        AudioInputStream convert1AIS = null;\n        AudioInputStream convert2AIS = null;\n\n        try{\n            bais = new ByteArrayInputStream(sourceBytes);\n            sourceAIS = AudioSystem.getAudioInputStream(bais);\n            AudioFormat sourceFormat = sourceAIS.getFormat();\n            AudioFormat convertFormat = new AudioFormat(AudioFormat.Encoding.PCM_SIGNED, sourceFormat.getSampleRate(), 16, sourceFormat.getChannels(), sourceFormat.getChannels()*2, sourceFormat.getSampleRate(), false);\n            convert1AIS = AudioSystem.getAudioInputStream(convertFormat, sourceAIS);\n            convert2AIS = AudioSystem.getAudioInputStream(audioFormat, convert1AIS);\n\n            baos = new ByteArrayOutputStream();\n\n            byte [] buffer = new byte[8192];\n            while(true){\n                int readCount = convert2AIS.read(buffer, 0, buffer.length);\n                if(readCount == -1){\n                    break;\n                }\n                baos.write(buffer, 0, readCount);\n            }\n            return baos.toByteArray();\n        } catch(UnsupportedAudioFileException uafe){\n            //uafe.printStackTrace();\n            throw uafe;\n        } catch(IOException ioe){\n            //ioe.printStackTrace();\n            throw ioe;\n        } catch(IllegalArgumentException iae){\n            //iae.printStackTrace();\n            throw iae;\n        } catch (Exception e) {\n            //e.printStackTrace();\n            throw e;\n        }finally{\n            if(baos != null){\n                try{\n                    baos.close();\n                }catch(Exception e){\n                }\n            }\n            if(convert2AIS != null){\n                try{\n                    convert2AIS.close();\n                }catch(Exception e){\n                }\n            }\n            if(convert1AIS != null){\n                try{\n                    convert1AIS.close();\n                }catch(Exception e){\n                }\n            }\n            if(sourceAIS != null){\n                try{\n                    sourceAIS.close();\n                }catch(Exception e){\n                }\n            }\n            if(bais != null){\n                try{\n                    bais.close();\n                }catch(Exception e){\n                }\n            }\n        }\n    }\n</code></pre>\n\n<p>Here sourceBytes represents MP3 file or WAV file. audioFormat is PCM format in which you want conversion. Also we need to put mp3spi.jar, tritonus_mp3.jar, jl*.jar, tritonus_share.jar from javazoom.com in classpath. Hope this may help to other.</p>\n\n<p>Java 7 version:</p>\n\n<pre><code>public static byte [] getAudioDataBytes(byte [] sourceBytes, AudioFormat audioFormat) throws UnsupportedAudioFileException, IllegalArgumentException, Exception {\n    if(sourceBytes == null || sourceBytes.length == 0 || audioFormat == null){\n        throw new IllegalArgumentException(\"Illegal Argument passed to this method\");\n    }\n\n    try (final ByteArrayInputStream bais = new ByteArrayInputStream(sourceBytes);\n         final AudioInputStream sourceAIS = AudioSystem.getAudioInputStream(bais)) {\n        AudioFormat sourceFormat = sourceAIS.getFormat();\n        AudioFormat convertFormat = new AudioFormat(AudioFormat.Encoding.PCM_SIGNED, sourceFormat.getSampleRate(), 16, sourceFormat.getChannels(), sourceFormat.getChannels()*2, sourceFormat.getSampleRate(), false);\n        try (final AudioInputStream convert1AIS = AudioSystem.getAudioInputStream(convertFormat, sourceAIS);\n             final AudioInputStream convert2AIS = AudioSystem.getAudioInputStream(audioFormat, convert1AIS);\n             final ByteArrayOutputStream baos = new ByteArrayOutputStream()) {\n            byte [] buffer = new byte[8192];\n            while(true){\n                int readCount = convert2AIS.read(buffer, 0, buffer.length);\n                if(readCount == -1){\n                    break;\n                }\n                baos.write(buffer, 0, readCount);\n            }\n            return baos.toByteArray();\n        }\n    }\n}\n</code></pre>\n\n<p>Maven:</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.googlecode.soundlibs&lt;/groupId&gt;\n    &lt;artifactId&gt;mp3spi&lt;/artifactId&gt;\n    &lt;version&gt;1.9.5-1&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;com.googlecode.soundlibs&lt;/groupId&gt;\n    &lt;artifactId&gt;jlayer&lt;/artifactId&gt;\n    &lt;version&gt;1.0.1-1&lt;/version&gt;\n    &lt;exclusions&gt;\n        &lt;exclusion&gt;\n            &lt;groupId&gt;junit&lt;/groupId&gt;\n            &lt;artifactId&gt;junit&lt;/artifactId&gt;\n        &lt;/exclusion&gt;\n    &lt;/exclusions&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7378049,"reputation":3199,"user_id":5615873,"accept_rate":0,"display_name":"Apostolos"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1646218310,"creation_date":1646218310,"answer_id":71321417,"question_id":14085199,"body_markdown":"Note for &quot;late comers&quot;: Java does not support MP3 files anymore, at least up to this date (March 2022). (For intellectual property reasons, etc.)","title":"mp3 to wav conversion in java","body":"<p>Note for &quot;late comers&quot;: Java does not support MP3 files anymore, at least up to this date (March 2022). (For intellectual property reasons, etc.)</p>\n"}],"owner":{"account_id":1635218,"reputation":3330,"user_id":1508907,"accept_rate":89,"display_name":"nullptr"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":33197,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"accepted_answer_id":14144956,"answer_count":2,"score":8,"last_activity_date":1646218310,"creation_date":1356809536,"question_id":14085199,"body_markdown":"My code to convert mp3 to wav is:\r\n\r\n    package audio1;\r\n    \r\n    import java.io.File;\r\n    import javax.sound.sampled.AudioFileFormat;\r\n    import javax.sound.sampled.AudioFormat;\r\n    import javax.sound.sampled.AudioInputStream;\r\n    import javax.sound.sampled.AudioSystem;\r\n    \r\n    public class NewClass {\r\n        public static void main(String [] args){\r\n            try{\r\n                AudioFileFormat inputFileFormat = AudioSystem.getAudioFileFormat(new File(&quot;c:\\\\1.mp3&quot;));\r\n                AudioInputStream ais = AudioSystem.getAudioInputStream(new File(&quot;c:\\\\1.mp3&quot;));\r\n    \r\n                AudioFormat audioFormat = ais.getFormat();\r\n                \r\n                System.out.println(&quot;File Format Type: &quot;+inputFileFormat.getType());\r\n                System.out.println(&quot;File Format String: &quot;+inputFileFormat.toString());\r\n                System.out.println(&quot;File lenght: &quot;+inputFileFormat.getByteLength());\r\n                System.out.println(&quot;Frame length: &quot;+inputFileFormat.getFrameLength());\r\n                System.out.println(&quot;Channels: &quot;+audioFormat.getChannels());\r\n                System.out.println(&quot;Encoding: &quot;+audioFormat.getEncoding());\r\n                System.out.println(&quot;Frame Rate: &quot;+audioFormat.getFrameRate());\r\n                System.out.println(&quot;Frame Size: &quot;+audioFormat.getFrameSize());\r\n                System.out.println(&quot;Sample Rate: &quot;+audioFormat.getSampleRate());\r\n                System.out.println(&quot;Sample size (bits): &quot;+audioFormat.getSampleSizeInBits());\r\n                System.out.println(&quot;Big endian: &quot;+audioFormat.isBigEndian());\r\n                System.out.println(&quot;Audio Format String: &quot;+audioFormat.toString());\r\n    \r\n                AudioInputStream encodedASI = AudioSystem.getAudioInputStream(AudioFormat.Encoding.PCM_SIGNED, ais);\r\n    \r\n                try{\r\n                    int i = AudioSystem.write(encodedASI, AudioFileFormat.Type.WAVE, new File(&quot;c:\\\\converted.wav&quot;));\r\n                    System.out.println(&quot;Bytes Written: &quot;+i);\r\n                }catch(Exception e){\r\n                    e.printStackTrace();\r\n                }\r\n            }catch(Exception e){\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n    }\r\n\r\nBut I am getting following output:\r\n\r\n\r\n    \r\n    File Format Type: MP3\r\n    File Format String: MP3 (.mp3) file, byte length: 9631340, data format: MPEG1L3 48000.0 Hz, unknown bits per sample, stereo, unknown frame size, 41.666668 frames/second, , frame length: 10030\r\n    File lenght: 9631340\r\n    Frame length: 10030\r\n    Channels: 2\r\n    Encoding: MPEG1L3\r\n    Frame Rate: 41.666668\r\n    Frame Size: -1\r\n    Sample Rate: 48000.0\r\n    Sample size (bits): -1\r\n    Big endian: true\r\n    Audio Format String: MPEG1L3 48000.0 Hz, unknown bits per sample, stereo, unknown frame size, 41.666668 frames/second, \r\n    java.lang.ArrayIndexOutOfBoundsException: 1\r\n            at org.tritonus.sampled.convert.javalayer.MpegFormatConversionProvider$DecodedMpegAudioInputStream$DMAISObuffer.append(MpegFormatConversionProvider.java:386)\r\n            at javazoom.jl.decoder.Obuffer.appendSamples(Unknown Source)\r\n            at javazoom.jl.decoder.SynthesisFilter.compute_pcm_samples(Unknown Source)\r\n            at javazoom.jl.decoder.SynthesisFilter.calculate_pcm_samples(Unknown Source)\r\n            at javazoom.jl.decoder.LayerIIIDecoder.decode(Unknown Source)\r\n            at javazoom.jl.decoder.LayerIIIDecoder.decodeFrame(Unknown Source)\r\n            at javazoom.jl.decoder.Decoder.decodeFrame(Unknown Source)\r\n            at org.tritonus.sampled.convert.javalayer.MpegFormatConversionProvider$DecodedMpegAudioInputStream.execute(MpegFormatConversionProvider.java:307)\r\n            at org.tritonus.share.TCircularBuffer.read(TCircularBuffer.java:138)\r\n            at org.tritonus.share.sampled.convert.TAsynchronousFilteredAudioInputStream.read(TAsynchronousFilteredAudioInputStream.java:194)\r\n            at javax.sound.sampled.AudioInputStream.read(AudioInputStream.java:292)\r\n            at com.sun.media.sound.PCMtoPCMCodec$PCMtoPCMCodecStream.read(PCMtoPCMCodec.java:506)\r\n            at com.sun.media.sound.SunFileWriter$NoCloseInputStream.read(SunFileWriter.java:199)\r\n            at java.io.SequenceInputStream.read(SequenceInputStream.java:208)\r\n            at java.io.SequenceInputStream.read(SequenceInputStream.java:211)\r\n            at java.io.InputStream.read(InputStream.java:101)\r\n            at com.sun.media.sound.WaveFileWriter.writeWaveFile(WaveFileWriter.java:247)\r\n            at com.sun.media.sound.WaveFileWriter.write(WaveFileWriter.java:145)\r\n            at javax.sound.sampled.AudioSystem.write(AudioSystem.java:1354)\r\n            at audio1.NewClass.main(NewClass.java:33)\r\n    \r\n\r\nCan anyone help me what I am doing wrong?","title":"mp3 to wav conversion in java","body":"<p>My code to convert mp3 to wav is:</p>\n\n<pre><code>package audio1;\n\nimport java.io.File;\nimport javax.sound.sampled.AudioFileFormat;\nimport javax.sound.sampled.AudioFormat;\nimport javax.sound.sampled.AudioInputStream;\nimport javax.sound.sampled.AudioSystem;\n\npublic class NewClass {\n    public static void main(String [] args){\n        try{\n            AudioFileFormat inputFileFormat = AudioSystem.getAudioFileFormat(new File(\"c:\\\\1.mp3\"));\n            AudioInputStream ais = AudioSystem.getAudioInputStream(new File(\"c:\\\\1.mp3\"));\n\n            AudioFormat audioFormat = ais.getFormat();\n\n            System.out.println(\"File Format Type: \"+inputFileFormat.getType());\n            System.out.println(\"File Format String: \"+inputFileFormat.toString());\n            System.out.println(\"File lenght: \"+inputFileFormat.getByteLength());\n            System.out.println(\"Frame length: \"+inputFileFormat.getFrameLength());\n            System.out.println(\"Channels: \"+audioFormat.getChannels());\n            System.out.println(\"Encoding: \"+audioFormat.getEncoding());\n            System.out.println(\"Frame Rate: \"+audioFormat.getFrameRate());\n            System.out.println(\"Frame Size: \"+audioFormat.getFrameSize());\n            System.out.println(\"Sample Rate: \"+audioFormat.getSampleRate());\n            System.out.println(\"Sample size (bits): \"+audioFormat.getSampleSizeInBits());\n            System.out.println(\"Big endian: \"+audioFormat.isBigEndian());\n            System.out.println(\"Audio Format String: \"+audioFormat.toString());\n\n            AudioInputStream encodedASI = AudioSystem.getAudioInputStream(AudioFormat.Encoding.PCM_SIGNED, ais);\n\n            try{\n                int i = AudioSystem.write(encodedASI, AudioFileFormat.Type.WAVE, new File(\"c:\\\\converted.wav\"));\n                System.out.println(\"Bytes Written: \"+i);\n            }catch(Exception e){\n                e.printStackTrace();\n            }\n        }catch(Exception e){\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n\n<p>But I am getting following output:</p>\n\n<pre><code>File Format Type: MP3\nFile Format String: MP3 (.mp3) file, byte length: 9631340, data format: MPEG1L3 48000.0 Hz, unknown bits per sample, stereo, unknown frame size, 41.666668 frames/second, , frame length: 10030\nFile lenght: 9631340\nFrame length: 10030\nChannels: 2\nEncoding: MPEG1L3\nFrame Rate: 41.666668\nFrame Size: -1\nSample Rate: 48000.0\nSample size (bits): -1\nBig endian: true\nAudio Format String: MPEG1L3 48000.0 Hz, unknown bits per sample, stereo, unknown frame size, 41.666668 frames/second, \njava.lang.ArrayIndexOutOfBoundsException: 1\n        at org.tritonus.sampled.convert.javalayer.MpegFormatConversionProvider$DecodedMpegAudioInputStream$DMAISObuffer.append(MpegFormatConversionProvider.java:386)\n        at javazoom.jl.decoder.Obuffer.appendSamples(Unknown Source)\n        at javazoom.jl.decoder.SynthesisFilter.compute_pcm_samples(Unknown Source)\n        at javazoom.jl.decoder.SynthesisFilter.calculate_pcm_samples(Unknown Source)\n        at javazoom.jl.decoder.LayerIIIDecoder.decode(Unknown Source)\n        at javazoom.jl.decoder.LayerIIIDecoder.decodeFrame(Unknown Source)\n        at javazoom.jl.decoder.Decoder.decodeFrame(Unknown Source)\n        at org.tritonus.sampled.convert.javalayer.MpegFormatConversionProvider$DecodedMpegAudioInputStream.execute(MpegFormatConversionProvider.java:307)\n        at org.tritonus.share.TCircularBuffer.read(TCircularBuffer.java:138)\n        at org.tritonus.share.sampled.convert.TAsynchronousFilteredAudioInputStream.read(TAsynchronousFilteredAudioInputStream.java:194)\n        at javax.sound.sampled.AudioInputStream.read(AudioInputStream.java:292)\n        at com.sun.media.sound.PCMtoPCMCodec$PCMtoPCMCodecStream.read(PCMtoPCMCodec.java:506)\n        at com.sun.media.sound.SunFileWriter$NoCloseInputStream.read(SunFileWriter.java:199)\n        at java.io.SequenceInputStream.read(SequenceInputStream.java:208)\n        at java.io.SequenceInputStream.read(SequenceInputStream.java:211)\n        at java.io.InputStream.read(InputStream.java:101)\n        at com.sun.media.sound.WaveFileWriter.writeWaveFile(WaveFileWriter.java:247)\n        at com.sun.media.sound.WaveFileWriter.write(WaveFileWriter.java:145)\n        at javax.sound.sampled.AudioSystem.write(AudioSystem.java:1354)\n        at audio1.NewClass.main(NewClass.java:33)\n</code></pre>\n\n<p>Can anyone help me what I am doing wrong?</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":17519391,"reputation":355,"user_id":12705774,"display_name":"RafsanJany"},"score":2,"creation_date":1646217913,"post_id":71321301,"comment_id":126067034,"body_markdown":"What exception you got ?? update your question with more details.","body":"What exception you got ?? update your question with more details."},{"owner":{"account_id":6390951,"reputation":43,"user_id":4957138,"accept_rate":50,"display_name":"zak_p"},"score":0,"creation_date":1646218085,"post_id":71321301,"comment_id":126067096,"body_markdown":"I don&#39;t have the exception because I don&#39;t have Google or Motorola. But I do know that this line do not work properly with API level 30, it&#39;s just like a known issue but I was not able to solve it.","body":"I don&#39;t have the exception because I don&#39;t have Google or Motorola. But I do know that this line do not work properly with API level 30, it&#39;s just like a known issue but I was not able to solve it."},{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":1,"creation_date":1646218181,"post_id":71321301,"comment_id":126067129,"body_markdown":"Did you read [this page on storage changes in Android 11](https://developer.android.com/about/versions/11/privacy/storage)? It&#39;s a major change in how storage works, so copy-pasting a couple of lines of code is not a good idea if you don&#39;t understand the underlying change.","body":"Did you read <a href=\"https://developer.android.com/about/versions/11/privacy/storage\" rel=\"nofollow noreferrer\">this page on storage changes in Android 11</a>? It&#39;s a major change in how storage works, so copy-pasting a couple of lines of code is not a good idea if you don&#39;t understand the underlying change."},{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":2,"creation_date":1646218288,"post_id":71321301,"comment_id":126067171,"body_markdown":"@zak_p: what do you mean by &quot;don&#39;t have Google or Motorola&quot;? Then reproduce the problem in the Android 11 device emulator and see what the exception is. How do you plan to fix this if you can&#39;t verify if the fix worked?!","body":"@zak_p: what do you mean by &quot;don&#39;t have Google or Motorola&quot;? Then reproduce the problem in the Android 11 device emulator and see what the exception is. How do you plan to fix this if you can&#39;t verify if the fix worked?!"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1646218896,"post_id":71321301,"comment_id":126067357,"body_markdown":"`getExternalFilesDir(Environment.DIRECTORY_PICTURES)` is usable under scoped storage as always. I see no reason that your code would not work. No permissions needed also. It should work.","body":"<code>getExternalFilesDir(Environment.DIRECTORY_PICTURES)</code> is usable under scoped storage as always. I see no reason that your code would not work. No permissions needed also. It should work."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1646219116,"post_id":71321301,"comment_id":126067438,"body_markdown":"`And now I have an issue with lunching the camera for taking a picture.` No. Not at all. You have a problem with creating a file in getExternalFilesDir(). (That it is a bad idea to create a file already is another story which we can discuss later if your problem is solved).","body":"<code>And now I have an issue with lunching the camera for taking a picture.</code> No. Not at all. You have a problem with creating a file in getExternalFilesDir(). (That it is a bad idea to create a file already is another story which we can discuss later if your problem is solved)."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1646219435,"post_id":71321301,"comment_id":126067551,"body_markdown":"Compare values of `getExternalFilesDir(Environment.DIRECTORY_PICTURES).getAbsolutePath()` and `getExternalFilesDir(null).getAbsolutePath();` The `Pictures` directory should be created just by calling that function. But maybe you better check: `if (!storageDir.exists()) if ( !storageDir.mkdirs()) return false;`","body":"Compare values of <code>getExternalFilesDir(Environment.DIRECTORY_PICTURES).getAbsol&zwnj;&#8203;utePath()</code> and <code>getExternalFilesDir(null).getAbsolutePath();</code> The <code>Pictures</code> directory should be created just by calling that function. But maybe you better check: <code>if (!storageDir.exists()) if ( !storageDir.mkdirs()) return false;</code>"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1646219580,"post_id":71321301,"comment_id":126067604,"body_markdown":"`don&#39;t have the exception because I don&#39;t have Google or Motorola. ` You should display the exception message in a Toast so users of such devices can tell you. You can also start ACTION_SEND with the message.","body":"<code>don&#39;t have the exception because I don&#39;t have Google or Motorola. </code> You should display the exception message in a Toast so users of such devices can tell you. You can also start ACTION_SEND with the message."}],"owner":{"account_id":6390951,"reputation":43,"user_id":4957138,"accept_rate":50,"display_name":"zak_p"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1646217929,"creation_date":1646217734,"question_id":71321301,"body_markdown":"I have to migrate the app from android 10 (API level 29) to android 11 (API level 30) according to new Google policy.\r\nAnd now I have an issue with lunching the camera for taking a picture.\r\n\r\nHere is my code:\r\n\r\n        private File imageFile;\r\n        private void createImageFile() throws IOException {\r\n        String timeStamp = new SimpleDateFormat(&quot;yyyyMMdd_HHmmss&quot;).format(new Date());\r\n        String imageFileName = &quot;JPEG_&quot; + timeStamp + &quot;_&quot;;\r\n    \r\n        File storageDir = getExternalFilesDir(Environment.DIRECTORY_PICTURES);\r\n        File image = File.createTempFile(\r\n                imageFileName,  /* prefix */\r\n                &quot;.jpg&quot;,         /* suffix */\r\n                storageDir      /* directory */\r\n        );\r\n        imageFile = image;\r\n      }\r\n\r\nWhen I&#39;m creating the temporary file it throws an exception (only in Google and Motorola phones) or . What I need to do to make it work?\r\n\r\n","title":"Android 11 storage issues","body":"<p>I have to migrate the app from android 10 (API level 29) to android 11 (API level 30) according to new Google policy.\nAnd now I have an issue with lunching the camera for taking a picture.</p>\n<p>Here is my code:</p>\n<pre><code>    private File imageFile;\n    private void createImageFile() throws IOException {\n    String timeStamp = new SimpleDateFormat(&quot;yyyyMMdd_HHmmss&quot;).format(new Date());\n    String imageFileName = &quot;JPEG_&quot; + timeStamp + &quot;_&quot;;\n\n    File storageDir = getExternalFilesDir(Environment.DIRECTORY_PICTURES);\n    File image = File.createTempFile(\n            imageFileName,  /* prefix */\n            &quot;.jpg&quot;,         /* suffix */\n            storageDir      /* directory */\n    );\n    imageFile = image;\n  }\n</code></pre>\n<p>When I'm creating the temporary file it throws an exception (only in Google and Motorola phones) or . What I need to do to make it work?</p>\n"},{"tags":["java","garbage-collection"],"comments":[{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1646226699,"post_id":71321294,"comment_id":126070018,"body_markdown":"Objects are stored in the *heap memory* and thats what you see in the picture, a schematic of the heap memory, including the Young Generation and the Old Generation, the latter consisting of *cards*. The picture doesnt show what the card table stores, aside from the one dirty flag.","body":"Objects are stored in the <i>heap memory</i> and thats what you see in the picture, a schematic of the heap memory, including the Young Generation and the Old Generation, the latter consisting of <i>cards</i>. The picture doesnt show what the card table stores, aside from the one dirty flag."}],"owner":{"account_id":9563644,"reputation":1316,"user_id":8889824,"display_name":"ATK"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1646217687,"creation_date":1646217687,"question_id":71321294,"body_markdown":"So far I have understod that card tables are used to mark any objects from the tenured region that references to the young generation as dirty in case any references have been modified. \r\nBut reading in [link][1], and especially the figure under the section &#39;What pre clean did&#39;, it seems like the card table also stores young objects with references to the old generation. Is that correct? Does a card table store both way references? \r\n\r\n\r\n  [1]: https://programmer.group/understanding-the-preclean-phase-of-cms-recycler.html","title":"Understanding Concurrent pre clean and card tables","body":"<p>So far I have understod that card tables are used to mark any objects from the tenured region that references to the young generation as dirty in case any references have been modified.\nBut reading in <a href=\"https://programmer.group/understanding-the-preclean-phase-of-cms-recycler.html\" rel=\"nofollow noreferrer\">link</a>, and especially the figure under the section 'What pre clean did', it seems like the card table also stores young objects with references to the old generation. Is that correct? Does a card table store both way references?</p>\n"},{"tags":["java","selenium","sap-gui"],"answers":[{"tags":[],"owner":{"account_id":4261091,"reputation":32684,"user_id":3485434,"accept_rate":97,"display_name":"Prophet"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646205939,"creation_date":1646205939,"answer_id":71318855,"question_id":71318138,"body_markdown":"I&#39;m not sure I understand why can&#39;t you use regular `.sendKeys()` method here.  \r\nWith it you can simply send Space and Arrow Down keys as following:\r\n```java\r\ndriver.findElement(By.id(&quot;your_element_id&quot;)).sendKeys(Keys.SPACE);\r\ndriver.findElement(By.id(&quot;your_element_id&quot;)).sendKeys(Keys.ARROW-DOWN);\r\n```\r\nThis can also be done with Actions:\r\n```java\r\nActions action = new Actions(Driver);\r\naction.SendKeys(Keys.SPACE).Build().Perform();\r\naction.SendKeys(Keys.ARROW_DOWN).Build().Perform();\r\n```\r\nBut if you still have to use the `.invoke()` method looks like this should work:\r\n```java\r\nMethod objTest = WebDriver.class.getMethod(strMethod, CharSequence.class);\r\nobjTest.invoke(strMethod, Keys.SPACE);\r\nobjTest.invoke(strMethod, Keys.ARROW_DOWN);\r\n```\r\nAs described [here](https://stackoverflow.com/questions/64251166/java-selenium-and-method-invoke-getting-nosuchmethodexception)","title":"How to Automate Keypress &quot;Space&quot; and Arrow Keys in SAP using Java/AutoIT","body":"<p>I'm not sure I understand why can't you use regular <code>.sendKeys()</code> method here.<br />\nWith it you can simply send Space and Arrow Down keys as following:</p>\n<pre class=\"lang-java prettyprint-override\"><code>driver.findElement(By.id(&quot;your_element_id&quot;)).sendKeys(Keys.SPACE);\ndriver.findElement(By.id(&quot;your_element_id&quot;)).sendKeys(Keys.ARROW-DOWN);\n</code></pre>\n<p>This can also be done with Actions:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Actions action = new Actions(Driver);\naction.SendKeys(Keys.SPACE).Build().Perform();\naction.SendKeys(Keys.ARROW_DOWN).Build().Perform();\n</code></pre>\n<p>But if you still have to use the <code>.invoke()</code> method looks like this should work:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Method objTest = WebDriver.class.getMethod(strMethod, CharSequence.class);\nobjTest.invoke(strMethod, Keys.SPACE);\nobjTest.invoke(strMethod, Keys.ARROW_DOWN);\n</code></pre>\n<p>As described <a href=\"https://stackoverflow.com/questions/64251166/java-selenium-and-method-invoke-getting-nosuchmethodexception\">here</a></p>\n"}],"owner":{"account_id":24424729,"reputation":9,"user_id":18350464,"display_name":"Osuri Ganewatte"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":354,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1646217645,"creation_date":1646201354,"question_id":71318138,"body_markdown":"I am using Java/AutoIT. I need to automate the keypress of &quot;Space&quot; and &quot;Down_Arrow_Key&quot; keys when automating in SAP. I have already done for &quot;Enter&quot; using the below code but I cannot find a way to automate for &quot;Space&quot; and &quot;Down_Arrow_Key&quot;. \r\n\r\n     public void pressEnter() {\r\n        this.findElement(&quot;wnd[0]&quot;).invoke(&quot;sendVKey&quot;, 0);\r\n    }\r\n\r\nSo, my question is how to automate &quot;Space&quot; and &quot;Down_Arrow_Key&quot; keypresses when automating in SAP Desktop Application, when the element tracking is done via AutoIT(version 3)?","title":"How to Automate Keypress &quot;Space&quot; and Arrow Keys in SAP using Java/AutoIT","body":"<p>I am using Java/AutoIT. I need to automate the keypress of &quot;Space&quot; and &quot;Down_Arrow_Key&quot; keys when automating in SAP. I have already done for &quot;Enter&quot; using the below code but I cannot find a way to automate for &quot;Space&quot; and &quot;Down_Arrow_Key&quot;.</p>\n<pre><code> public void pressEnter() {\n    this.findElement(&quot;wnd[0]&quot;).invoke(&quot;sendVKey&quot;, 0);\n}\n</code></pre>\n<p>So, my question is how to automate &quot;Space&quot; and &quot;Down_Arrow_Key&quot; keypresses when automating in SAP Desktop Application, when the element tracking is done via AutoIT(version 3)?</p>\n"},{"tags":["java","spring-websocket"],"answers":[{"tags":[],"owner":{"account_id":11818,"reputation":57413,"user_id":22982,"accept_rate":100,"display_name":"Brian Clozel"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1403108479,"creation_date":1403108479,"answer_id":24290574,"question_id":24276580,"body_markdown":"That template is usually autowired, because one is created for you that matches your configuration. It is, by design, coupled with other parts of your Simp infrastructure (and it has to be!), because to build one you need:\r\n\r\n* the user destination prefix (if you configured a custom one)\r\n* and more important, a [MessageChannel][1] to send messages to your message broker\r\n\r\nMaybe could you expand on why this class can&#39;t be Spring managed?\r\n\r\nSee [SimpMessagingTemplate javadoc][2].\r\n\r\n\r\n  [1]: http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/messaging/MessageChannel.html\r\n  [2]: http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/messaging/simp/SimpMessagingTemplate.html","title":"Constructing SimpMessagingTemplate instance without autowired","body":"<p>That template is usually autowired, because one is created for you that matches your configuration. It is, by design, coupled with other parts of your Simp infrastructure (and it has to be!), because to build one you need:</p>\n\n<ul>\n<li>the user destination prefix (if you configured a custom one)</li>\n<li>and more important, a <a href=\"http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/messaging/MessageChannel.html\" rel=\"nofollow\">MessageChannel</a> to send messages to your message broker</li>\n</ul>\n\n<p>Maybe could you expand on why this class can't be Spring managed?</p>\n\n<p>See <a href=\"http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/messaging/simp/SimpMessagingTemplate.html\" rel=\"nofollow\">SimpMessagingTemplate javadoc</a>.</p>\n"}],"owner":{"account_id":4453195,"reputation":134,"user_id":3624390,"display_name":"user3624390"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1417,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":24290574,"answer_count":1,"score":2,"last_activity_date":1646217354,"creation_date":1403062037,"question_id":24276580,"body_markdown":"I am trying to send asynchronous messages from a server to a client after the client is connected, independent of user action. All the examples I have found so far have the SimpMessagingTemplate autowired in the controller. Is there a file that contains information about how this object gets autowired by default? My goal is to use this object in a class that is not managed by spring. I would prefer to have a straight forward way to construct the object, instead of trying to recreate this deep object possibly with circular references through debug mode.\r\n\r\nHere is the relevant part of the servlet xml:\r\n\r\n    &lt;websocket:message-broker application-destination-prefix=&quot;/socketprefix&quot;&gt;\r\n        &lt;websocket:stomp-endpoint path=&quot;/stompendpoint&quot;&gt;\r\n           \r\n            &lt;websocket:sockjs/&gt;\r\n        &lt;/websocket:stomp-endpoint&gt;\r\n        &lt;websocket:simple-broker prefix=&quot;/topics/,/queues/&quot;/&gt;\r\n     \r\n    &lt;/websocket:message-broker&gt; ","title":"Constructing SimpMessagingTemplate instance without autowired","body":"<p>I am trying to send asynchronous messages from a server to a client after the client is connected, independent of user action. All the examples I have found so far have the SimpMessagingTemplate autowired in the controller. Is there a file that contains information about how this object gets autowired by default? My goal is to use this object in a class that is not managed by spring. I would prefer to have a straight forward way to construct the object, instead of trying to recreate this deep object possibly with circular references through debug mode.</p>\n\n<p>Here is the relevant part of the servlet xml:</p>\n\n<pre><code>&lt;websocket:message-broker application-destination-prefix=\"/socketprefix\"&gt;\n    &lt;websocket:stomp-endpoint path=\"/stompendpoint\"&gt;\n\n        &lt;websocket:sockjs/&gt;\n    &lt;/websocket:stomp-endpoint&gt;\n    &lt;websocket:simple-broker prefix=\"/topics/,/queues/\"/&gt;\n\n&lt;/websocket:message-broker&gt; \n</code></pre>\n"},{"tags":["java","android","facebook-android-sdk"],"answers":[{"tags":[],"owner":{"account_id":16657135,"reputation":1,"user_id":12038192,"display_name":"Peter Wayne"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646217293,"creation_date":1646217293,"answer_id":71321196,"question_id":67938897,"body_markdown":"Your project might be in development mode, switch to live mode might solve the problem","title":"Unexpected call to LoginManager.onActivityResult - Facebook SDK Android","body":"<p>Your project might be in development mode, switch to live mode might solve the problem</p>\n"}],"owner":{"account_id":6285650,"reputation":21,"user_id":4885010,"display_name":"Darwin Morocho"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":161,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1646217293,"creation_date":1623422032,"question_id":67938897,"body_markdown":"My Dependency\r\n```\r\ndependencies {\r\n    implementation &#39;com.facebook.android:facebook-login:11.0.0&#39;\r\n}\r\n```\r\n\r\nI&#39;ve been using a `LoginButton` for moths without any problem but since today after call to  `login` if the users have not logged before in my app the login flow seems to works fine but the `onError` method of my `FacebookCallback` is called and I have the next error `Unexpected call to LoginManager.onActivityResult` and the second time that I call `login` it works and I don&#39;t have the `Unexpected call to LoginManager.onActivityResult` error.\r\n\r\n\r\n---\r\nHere the complete code of my Activity\r\n```java\r\npackage app.meedu.flutter_facebook_auth;\r\n\r\nimport androidx.annotation.Nullable;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.util.Log;\r\n\r\nimport com.facebook.CallbackManager;\r\nimport com.facebook.FacebookCallback;\r\nimport com.facebook.FacebookException;\r\nimport com.facebook.login.LoginResult;\r\nimport com.facebook.login.widget.LoginButton;\r\n\r\npublic class MainActivity extends AppCompatActivity {\r\n\r\n    private final CallbackManager callbackManager = CallbackManager.Factory.create();\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n        final LoginButton  button = (LoginButton) findViewById(R.id.login_button);\r\n        button.setPermissions(&quot;public_profile,email&quot;);\r\n        button.registerCallback(callbackManager, new FacebookCallback&lt;LoginResult&gt;() {\r\n            @Override\r\n            public void onSuccess(LoginResult loginResult) {\r\n                // App code\r\n                Log.i(&quot;GOOD::&quot;,&quot;exito&quot;);\r\n            }\r\n\r\n            @Override\r\n            public void onCancel() {\r\n                // App code\r\n            }\r\n\r\n            @Override\r\n            public void onError(FacebookException exception) {\r\n                // App code\r\n                Log.i(&quot;ERROR::&quot;,exception.getMessage());\r\n            }\r\n        });\r\n    }\r\n\r\n    @Override\r\n    protected void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {\r\n        callbackManager.onActivityResult(requestCode, resultCode, data);\r\n        super.onActivityResult(requestCode, resultCode, data);\r\n    }\r\n}\r\n```","title":"Unexpected call to LoginManager.onActivityResult - Facebook SDK Android","body":"<p>My Dependency</p>\n<pre><code>dependencies {\n    implementation 'com.facebook.android:facebook-login:11.0.0'\n}\n</code></pre>\n<p>I've been using a <code>LoginButton</code> for moths without any problem but since today after call to  <code>login</code> if the users have not logged before in my app the login flow seems to works fine but the <code>onError</code> method of my <code>FacebookCallback</code> is called and I have the next error <code>Unexpected call to LoginManager.onActivityResult</code> and the second time that I call <code>login</code> it works and I don't have the <code>Unexpected call to LoginManager.onActivityResult</code> error.</p>\n<hr />\n<p>Here the complete code of my Activity</p>\n<pre class=\"lang-java prettyprint-override\"><code>package app.meedu.flutter_facebook_auth;\n\nimport androidx.annotation.Nullable;\nimport androidx.appcompat.app.AppCompatActivity;\n\nimport android.content.Intent;\nimport android.os.Bundle;\nimport android.util.Log;\n\nimport com.facebook.CallbackManager;\nimport com.facebook.FacebookCallback;\nimport com.facebook.FacebookException;\nimport com.facebook.login.LoginResult;\nimport com.facebook.login.widget.LoginButton;\n\npublic class MainActivity extends AppCompatActivity {\n\n    private final CallbackManager callbackManager = CallbackManager.Factory.create();\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        final LoginButton  button = (LoginButton) findViewById(R.id.login_button);\n        button.setPermissions(&quot;public_profile,email&quot;);\n        button.registerCallback(callbackManager, new FacebookCallback&lt;LoginResult&gt;() {\n            @Override\n            public void onSuccess(LoginResult loginResult) {\n                // App code\n                Log.i(&quot;GOOD::&quot;,&quot;exito&quot;);\n            }\n\n            @Override\n            public void onCancel() {\n                // App code\n            }\n\n            @Override\n            public void onError(FacebookException exception) {\n                // App code\n                Log.i(&quot;ERROR::&quot;,exception.getMessage());\n            }\n        });\n    }\n\n    @Override\n    protected void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {\n        callbackManager.onActivityResult(requestCode, resultCode, data);\n        super.onActivityResult(requestCode, resultCode, data);\n    }\n}\n</code></pre>\n"},{"tags":["java","jar"],"comments":[{"owner":{"account_id":7053519,"reputation":239,"user_id":5401763,"display_name":"Roman Gr&#228;f"},"score":0,"creation_date":1477292125,"post_id":40212285,"comment_id":67688616,"body_markdown":"Use an IDE like Eclipse. In Eclipse you can right click on your project and `Add external libraries`.","body":"Use an IDE like Eclipse. In Eclipse you can right click on your project and <code>Add external libraries</code>."},{"owner":{"account_id":956558,"reputation":30924,"user_id":981744,"display_name":"Erwin Bolwidt"},"score":2,"creation_date":1477292168,"post_id":40212285,"comment_id":67688635,"body_markdown":"A jar file is just a zip file. You can use zip/unzip tools on it. If they don&#39;t understand jar files, then temporarily rename .jar to .zip, manipulate it, and rename it back to .jar.","body":"A jar file is just a zip file. You can use zip/unzip tools on it. If they don&#39;t understand jar files, then temporarily rename .jar to .zip, manipulate it, and rename it back to .jar."}],"answers":[{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1646216930,"creation_date":1477292282,"answer_id":40212368,"question_id":40212285,"body_markdown":"The procedure is roughly this:\r\n\r\n1.  Create a temporary directory and `cd` to it.\r\n2.  Use `jar xf file.jar` to extract the JAR file.\r\n3.  Add, edit, remove files\r\n4.  Use `jar cf new-file.jar .... ` to create the new JAR file.\r\n\r\nIt is also possible to update individual components with `jar uf file.jar ...`\r\n\r\n(If the original JAR file was signed, you will need to re-sign it ... if you need a signed JAR.)","title":"How to create jar file from existing jar file?","body":"<p>The procedure is roughly this:</p>\n<ol>\n<li>Create a temporary directory and <code>cd</code> to it.</li>\n<li>Use <code>jar xf file.jar</code> to extract the JAR file.</li>\n<li>Add, edit, remove files</li>\n<li>Use <code>jar cf new-file.jar .... </code> to create the new JAR file.</li>\n</ol>\n<p>It is also possible to update individual components with <code>jar uf file.jar ...</code></p>\n<p>(If the original JAR file was signed, you will need to re-sign it ... if you need a signed JAR.)</p>\n"},{"tags":[],"owner":{"account_id":9443335,"reputation":15252,"user_id":7023245,"accept_rate":25,"display_name":"Timothy Truckle"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1477292680,"creation_date":1477292680,"answer_id":40212489,"question_id":40212285,"body_markdown":"The better way than integrating the classes of the other jar within your jar is to declasr within your jar that you want to use the other jar.\r\n\r\nThe procedure is roughly this:\r\n\r\n- Create a file with name MANIFEST.MF in a the sub folder META-INF as child of `src/`.\r\n- add a line  \r\n`Class-Path = theOther.jar`\r\n- when creating the jar make sure this file (and the folder) are included.\r\n\r\nfor mor information see here: &lt;http://docs.oracle.com/javase/tutorial/deployment/jar/&gt;\r\n","title":"How to create jar file from existing jar file?","body":"<p>The better way than integrating the classes of the other jar within your jar is to declasr within your jar that you want to use the other jar.</p>\n\n<p>The procedure is roughly this:</p>\n\n<ul>\n<li>Create a file with name MANIFEST.MF in a the sub folder META-INF as child of <code>src/</code>.</li>\n<li>add a line<br>\n<code>Class-Path = theOther.jar</code></li>\n<li>when creating the jar make sure this file (and the folder) are included.</li>\n</ul>\n\n<p>for mor information see here: <a href=\"http://docs.oracle.com/javase/tutorial/deployment/jar/\" rel=\"nofollow\">http://docs.oracle.com/javase/tutorial/deployment/jar/</a></p>\n"},{"tags":[],"owner":{"account_id":9345325,"reputation":1,"user_id":6936760,"display_name":"Wad&#239; Mami didipostman"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1477306720,"creation_date":1477299511,"answer_id":40214372,"question_id":40212285,"body_markdown":"I think Stephen C has given the solution. In fact you should \r\n\r\n 1. Unzip your jar file with the Jar utility provided within the JDK and then\r\n 2. Update your config.properties then\r\n 3. Zip all the project with Jar utility and that&#39;s it","title":"How to create jar file from existing jar file?","body":"<p>I think Stephen C has given the solution. In fact you should </p>\n\n<ol>\n<li>Unzip your jar file with the Jar utility provided within the JDK and then</li>\n<li>Update your config.properties then</li>\n<li>Zip all the project with Jar utility and that's it</li>\n</ol>\n"}],"owner":{"account_id":8596663,"reputation":651,"user_id":6439493,"accept_rate":100,"display_name":"Asmi"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2998,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":40212368,"answer_count":3,"score":0,"last_activity_date":1646216930,"creation_date":1477291943,"question_id":40212285,"body_markdown":"I have not worked on java till now....\r\nBut i need to include the jar file into my project.\r\n\r\nI have one jar created already with me. \r\nBut i need to update this jar file.\r\nI don&#39;t have source of those project.\r\n\r\nIt has folder structure like follow\r\n\r\n    1. folder which has .class file.\r\n    2. com folder\r\n    3. de folder\r\n    4. META-INF folder contains MANIFEST.INF file and Maven folder\r\n    5. org folder\r\n    6. config.properties\r\n    7. abc.builds.properties\r\n    \r\n\r\n\r\nI need to update `config.properties` and create new jar file.\r\n\r\nCan anybody help me in this?\r\n\r\n","title":"How to create jar file from existing jar file?","body":"<p>I have not worked on java till now....\nBut i need to include the jar file into my project.</p>\n\n<p>I have one jar created already with me. \nBut i need to update this jar file.\nI don't have source of those project.</p>\n\n<p>It has folder structure like follow</p>\n\n<pre><code>1. folder which has .class file.\n2. com folder\n3. de folder\n4. META-INF folder contains MANIFEST.INF file and Maven folder\n5. org folder\n6. config.properties\n7. abc.builds.properties\n</code></pre>\n\n<p>I need to update <code>config.properties</code> and create new jar file.</p>\n\n<p>Can anybody help me in this?</p>\n"},{"tags":["java","objectoutputstream"],"comments":[{"owner":{"account_id":14584795,"reputation":2961,"user_id":10534012,"display_name":"Darkman"},"score":0,"creation_date":1646210504,"post_id":71319428,"comment_id":126064425,"body_markdown":"***&quot;...there&#39;s an excessive data at the start of each record...&quot;*** -- That is because ObjectOutputStream uses a `Modified UTF-8`. This encoding only support characters up to `0xFFFF`. And each call of `writeUTF()` will add a header which represents the size of the string. I would personally avoid using these streams (input/output) entirely unless you know what you are doing.","body":"<b><i>&quot;...there&#39;s an excessive data at the start of each record...&quot;</i></b> -- That is because ObjectOutputStream uses a <code>Modified UTF-8</code>. This encoding only support characters up to <code>0xFFFF</code>. And each call of <code>writeUTF()</code> will add a header which represents the size of the string. I would personally avoid using these streams (input/output) entirely unless you know what you are doing."},{"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"score":0,"creation_date":1646211412,"post_id":71319428,"comment_id":126064706,"body_markdown":"I appreciate the quick accept!","body":"I appreciate the quick accept!"},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":1,"creation_date":1646211825,"post_id":71319428,"comment_id":126064842,"body_markdown":"&quot;*different files*&quot; -&gt; from the [documentation](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/ObjectOutputStream.html#%3Cinit%3E(java.io.OutputStream)) of constructor of `ObjectOutputStream`: &quot;*This constructor writes the serialization stream header to the underlying stream*&quot; - in other words, every time a new one is created an additional header is written to the output - the `writeObject` methods also does not duplicate objects (when called from same instance), see documentation of `writeUnshared()`","body":"&quot;<i>different files</i>&quot; -&gt; from the <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/ObjectOutputStream.html#%3Cinit%3E(java.io.OutputStream)\" rel=\"nofollow noreferrer\">documentation</a> of constructor of <code>ObjectOutputStream</code>: &quot;<i>This constructor writes the serialization stream header to the underlying stream</i>&quot; - in other words, every time a new one is created an additional header is written to the output - the <code>writeObject</code> methods also does not duplicate objects (when called from same instance), see documentation of <code>writeUnshared()</code>"}],"answers":[{"tags":[],"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646216909,"creation_date":1646209576,"answer_id":71319497,"question_id":71319428,"body_markdown":"You can&#39;t *easily* write the data from **two** different ObjectOutputStreams into **the same** file.\r\n\r\nMeaning: \r\n\r\n- either you want to write to different files OR\r\n- you use the **same** ObjectOutputStream to write **all** your objects into that single file.\r\n\r\nThis is **binary** data structure that has an implicit **layout**, the corresponding protocol simply doesn&#39;t expect that *another* serialized byte stream shows up in a file after a first sequence of objects has been processed completely - unless you &quot;massage&quot; the exact content going into that file (see the other answer for details).","title":"ObjectOutputStream writes same instances differently depending on how i open stream","body":"<p>You can't <em>easily</em> write the data from <strong>two</strong> different ObjectOutputStreams into <strong>the same</strong> file.</p>\n<p>Meaning:</p>\n<ul>\n<li>either you want to write to different files OR</li>\n<li>you use the <strong>same</strong> ObjectOutputStream to write <strong>all</strong> your objects into that single file.</li>\n</ul>\n<p>This is <strong>binary</strong> data structure that has an implicit <strong>layout</strong>, the corresponding protocol simply doesn't expect that <em>another</em> serialized byte stream shows up in a file after a first sequence of objects has been processed completely - unless you &quot;massage&quot; the exact content going into that file (see the other answer for details).</p>\n"},{"tags":[],"owner":{"account_id":3421244,"reputation":35863,"user_id":2868801,"display_name":"dave_thompson_085"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1646216736,"creation_date":1646216736,"answer_id":71321061,"question_id":71319428,"body_markdown":"Java serialization, implemented by `Object{Output,Input}Stream`, in addition to metadata and data for each object, has a _stream_ header that only occurs once and not for each object. Normally in a file this amounts to a file header. **If you want to put multiple streams in one file, _you_ must manage the stream boundaries yourself**:\r\n```\r\n//nopackage\r\nimport java.io.*;\r\n\r\npublic class SO71319428MultipleSerial {\r\n  public static void main (String[] args) throws Exception {\r\n    User[] a = { new User(&quot;Alice&quot;,1), new User(&quot;Bob&quot;,2), new User(&quot;Carol&quot;,3) };\r\n    for( User u : a )\r\n      try( ObjectOutputStream oo = new ObjectOutputStream(new FileOutputStream(filename,true)) ){\r\n        oo.writeObject(u);\r\n      }\r\n    System.out.println(&quot;reading &quot;+new File(filename).length());\r\n    try( InputStream fi = new FileInputStream(filename) ){\r\n      for( int i = 0; i &lt; 3; i++ ){\r\n        ObjectInputStream oi = new ObjectInputStream(fi);\r\n        System.out.println( oi.readObject() );\r\n        // DON&#39;T close because that closes the underlying FileInputStream; just leak instead\r\n      }\r\n    }\r\n  }\r\n  public static String filename = &quot;SO71319428.out&quot;;\r\n\r\n  static class User implements Serializable {\r\n    String name; int id;\r\n    public User(String name, int id){ this.name=name; this.id=id; }\r\n    public String toString(){ return name+&quot; is #&quot;+id; }\r\n  }\r\n}\r\n-&gt;\r\nreading 283\r\nAlice is #1\r\nBob is #2\r\nCarol is #3\r\n```\r\n\r\nThis is less flexible than the single-stream (with multiple objects) approach, because that allows you to write any sequence of objects whose types _and_ end can be recognized when reading without any help; with the multiple-stream approach _your code_ must be able to determine when a stream ends and needs to be restarted.\r\n","title":"ObjectOutputStream writes same instances differently depending on how i open stream","body":"<p>Java serialization, implemented by <code>Object{Output,Input}Stream</code>, in addition to metadata and data for each object, has a <em>stream</em> header that only occurs once and not for each object. Normally in a file this amounts to a file header. <strong>If you want to put multiple streams in one file, <em>you</em> must manage the stream boundaries yourself</strong>:</p>\n<pre><code>//nopackage\nimport java.io.*;\n\npublic class SO71319428MultipleSerial {\n  public static void main (String[] args) throws Exception {\n    User[] a = { new User(&quot;Alice&quot;,1), new User(&quot;Bob&quot;,2), new User(&quot;Carol&quot;,3) };\n    for( User u : a )\n      try( ObjectOutputStream oo = new ObjectOutputStream(new FileOutputStream(filename,true)) ){\n        oo.writeObject(u);\n      }\n    System.out.println(&quot;reading &quot;+new File(filename).length());\n    try( InputStream fi = new FileInputStream(filename) ){\n      for( int i = 0; i &lt; 3; i++ ){\n        ObjectInputStream oi = new ObjectInputStream(fi);\n        System.out.println( oi.readObject() );\n        // DON'T close because that closes the underlying FileInputStream; just leak instead\n      }\n    }\n  }\n  public static String filename = &quot;SO71319428.out&quot;;\n\n  static class User implements Serializable {\n    String name; int id;\n    public User(String name, int id){ this.name=name; this.id=id; }\n    public String toString(){ return name+&quot; is #&quot;+id; }\n  }\n}\n-&gt;\nreading 283\nAlice is #1\nBob is #2\nCarol is #3\n</code></pre>\n<p>This is less flexible than the single-stream (with multiple objects) approach, because that allows you to write any sequence of objects whose types <em>and</em> end can be recognized when reading without any help; with the multiple-stream approach <em>your code</em> must be able to determine when a stream ends and needs to be restarted.</p>\n"}],"owner":{"account_id":24375689,"reputation":23,"user_id":18308068,"display_name":"wuz1moo"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":423,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":71321061,"answer_count":2,"score":2,"last_activity_date":1646216909,"creation_date":1646209250,"question_id":71319428,"body_markdown":"For the unknown reason, instances written into the same `objectOutputStream` and instances written separately (If I open `objectOutputStream` on each iteration) both create two different files.\r\n```\r\nObjectOutputStream objectOutputStream = new ObjectOutputStream(new FileOutputStream(filepath1));\r\nfor (User user : users)\r\n{\r\n    objectOutputStream.writeObject(user);\r\n}\r\n\r\nobjectOutputStream.close();\r\n\r\nfor (User user : users)\r\n{\r\n    objectOutputStream = new ObjectOutputStream(new FileOutputStream(filepath2, true));\r\n    objectOutputStream.writeObject(user);\r\n    objectOutputStream.close();\r\n}\r\n\r\n```\r\nSo when I read files in a loop like this it works fine only for the first file.\r\n```\r\nfor( int i = 0; i&lt; users.length; i++)\r\n{\r\n    readUsers[i] = (User)objectInputStream.readObject();\r\n}\r\n\r\n```\r\nReading the second file gives me ONE correctly read user which is followed by an Exception `java.io.StreamCorruptedException: invalid type code: AC`. \r\nI&#39;ve inspected the content of these files and it seems there&#39;s an excessive data at the start of each record in the second one (It takes almost twice as much space as the first one).\r\nSo how to combine second way of writing instances to file and read them in a simple loop afterwards?","title":"ObjectOutputStream writes same instances differently depending on how i open stream","body":"<p>For the unknown reason, instances written into the same <code>objectOutputStream</code> and instances written separately (If I open <code>objectOutputStream</code> on each iteration) both create two different files.</p>\n<pre><code>ObjectOutputStream objectOutputStream = new ObjectOutputStream(new FileOutputStream(filepath1));\nfor (User user : users)\n{\n    objectOutputStream.writeObject(user);\n}\n\nobjectOutputStream.close();\n\nfor (User user : users)\n{\n    objectOutputStream = new ObjectOutputStream(new FileOutputStream(filepath2, true));\n    objectOutputStream.writeObject(user);\n    objectOutputStream.close();\n}\n\n</code></pre>\n<p>So when I read files in a loop like this it works fine only for the first file.</p>\n<pre><code>for( int i = 0; i&lt; users.length; i++)\n{\n    readUsers[i] = (User)objectInputStream.readObject();\n}\n\n</code></pre>\n<p>Reading the second file gives me ONE correctly read user which is followed by an Exception <code>java.io.StreamCorruptedException: invalid type code: AC</code>.\nI've inspected the content of these files and it seems there's an excessive data at the start of each record in the second one (It takes almost twice as much space as the first one).\nSo how to combine second way of writing instances to file and read them in a simple loop afterwards?</p>\n"},{"tags":["java","kotlin"],"comments":[{"owner":{"account_id":202054,"reputation":23899,"user_id":448875,"display_name":"broot"},"score":0,"creation_date":1646215091,"post_id":71319801,"comment_id":126066073,"body_markdown":"What is `AsyncResult`? It is not part of Java or Kotlin stdlib.","body":"What is <code>AsyncResult</code>? It is not part of Java or Kotlin stdlib."}],"answers":[{"tags":[],"owner":{"account_id":20657736,"reputation":61,"user_id":15166377,"display_name":"Jonathan Diamond"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646216754,"creation_date":1646216384,"answer_id":71320994,"question_id":71319801,"body_markdown":"*please take note that single quotes are missing and \\` appear as \\\\` because the code formatting.  I tried to leave what seemed least confusing...*\r\n\r\n\r\nYou should be able to make changes in the conditional statement \r\n\r\n    if (res !=null) {\r\n\r\nres being the JsonObject: \r\n\r\n    console.log(res); \r\n\r\nwould show you what&#39;s in there.  You may need to use \r\n\r\n    let resXmodifiedX = JSON.parse(res);\r\n\r\n    \r\n\r\n&gt; One approach is to write a function and pass res to that function which you can do if it is in the console.log(res).  \r\n\r\nSome notes on what&#39;s below:\r\n\r\n - place the function somewhere consistent maybe at the bottom of the file...\r\n - objects often have multiple levels res.person.name, res.contact.email, or whatever... \r\n    - use multiple for loops: \r\n\r\n\r\n    let level = res[key];  for(child in level) {\r\n\r\n    - you don&#39;t need to do this if you know exactly what object attributes you need to update.\r\n\r\n  - you can set the value directly but you always want to test for it before trying to set it to avoid errors that stop execution.\r\n\r\n\r\n    let toBe = toBe =&gt;\\`${toBe}\\`;\r\n    \r\n    let update = (res)?toBe(update(res)):toBe(&#39;not Found&#39;);\r\n\r\nThis option is really only if you know for sure that data will be there and you can&#39;t proceed without it.  Which is not uncommon but also not how JSON is designed to be used.  \r\n\r\n\r\n&gt;The code below is a concise way to make some simple changes but may not be an ideal solution.  To use it xModify(res) replaces console.log(res) above.\r\n\r\n\r\n    function xModify(x) { \r\n      let resXmodifiedX = JSON.parse(x);\r\n      let res = resXmodifiedX;\r\n      for (key in res) {\r\n      res[key] = key==&#39;name&#39;? \\`My change ${res[key]}\\`: key==&#39;other&#39;? \\`My Change ${res[key]}\\`:res[key];\r\n      resXmodifiedX = JSON.stringify(res);\r\n      return resXmodifiedX;\r\n    }\r\n\r\n&gt; That will update res.name and res.other otherwise res[key] is unchanged. If you do not need to parse res change let res = xModifiedx; to let res = x; remove the first line and change the last two lines to return res;\r\n\r\n\r\n    function xModify(x) { \r\n      let res = x;\r\n      for (key in res) {\r\n      res[key] = key==&#39;name&#39;? \\`My change ${res[key]}\\`: key==&#39;other&#39;? \\`My Change ${res[key]}\\`:res[key];\r\n      return res;\r\n    }\r\n\r\nIf your data is numeric which is not generally the case in a web server response scenario this is a terrible approach.  Because it is probably a string I used the template variable as a way to easily add a complex pattern in place of a string.  `My change ${res[key]}` not a real world example.  Any valid JS code can go in the ${ } (template variable). I&#39;ve been defaulting to the first pattern more and more.\r\n\r\n    let me = (bestCase)?`${&#39;the best version&#39;} of myself`:`${&#39;someone&#39;} I&#39;m ok with`;\r\n\r\n","title":"modify underlying result/value of async object","body":"<p><em>please take note that single quotes are missing and ` appear as \\` because the code formatting.  I tried to leave what seemed least confusing...</em></p>\n<p>You should be able to make changes in the conditional statement</p>\n<pre><code>if (res !=null) {\n</code></pre>\n<p>res being the JsonObject:</p>\n<pre><code>console.log(res); \n</code></pre>\n<p>would show you what's in there.  You may need to use</p>\n<pre><code>let resXmodifiedX = JSON.parse(res);\n</code></pre>\n<blockquote>\n<p>One approach is to write a function and pass res to that function which you can do if it is in the console.log(res).</p>\n</blockquote>\n<p>Some notes on what's below:</p>\n<ul>\n<li><p>place the function somewhere consistent maybe at the bottom of the file...</p>\n</li>\n<li><p>objects often have multiple levels res.person.name, res.contact.email, or whatever...</p>\n<ul>\n<li>use multiple for loops:</li>\n</ul>\n<p>let level = res[key];  for(child in level) {</p>\n<ul>\n<li>you don't need to do this if you know exactly what object attributes you need to update.</li>\n</ul>\n</li>\n<li><p>you can set the value directly but you always want to test for it before trying to set it to avoid errors that stop execution.</p>\n<p>let toBe = toBe =&gt;`${toBe}`;</p>\n<p>let update = (res)?toBe(update(res)):toBe('not Found');</p>\n</li>\n</ul>\n<p>This option is really only if you know for sure that data will be there and you can't proceed without it.  Which is not uncommon but also not how JSON is designed to be used.</p>\n<blockquote>\n<p>The code below is a concise way to make some simple changes but may not be an ideal solution.  To use it xModify(res) replaces console.log(res) above.</p>\n</blockquote>\n<pre><code>function xModify(x) { \n  let resXmodifiedX = JSON.parse(x);\n  let res = resXmodifiedX;\n  for (key in res) {\n  res[key] = key=='name'? \\`My change ${res[key]}\\`: key=='other'? \\`My Change ${res[key]}\\`:res[key];\n  resXmodifiedX = JSON.stringify(res);\n  return resXmodifiedX;\n}\n</code></pre>\n<blockquote>\n<p>That will update res.name and res.other otherwise res[key] is unchanged. If you do not need to parse res change let res = xModifiedx; to let res = x; remove the first line and change the last two lines to return res;</p>\n</blockquote>\n<pre><code>function xModify(x) { \n  let res = x;\n  for (key in res) {\n  res[key] = key=='name'? \\`My change ${res[key]}\\`: key=='other'? \\`My Change ${res[key]}\\`:res[key];\n  return res;\n}\n</code></pre>\n<p>If your data is numeric which is not generally the case in a web server response scenario this is a terrible approach.  Because it is probably a string I used the template variable as a way to easily add a complex pattern in place of a string.  <code>My change ${res[key]}</code> not a real world example.  Any valid JS code can go in the ${ } (template variable). I've been defaulting to the first pattern more and more.</p>\n<pre><code>let me = (bestCase)?`${'the best version'} of myself`:`${'someone'} I'm ok with`;\n</code></pre>\n"}],"owner":{"account_id":3214634,"reputation":10538,"user_id":2713740,"accept_rate":85,"display_name":"Luca"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":121,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1646216754,"creation_date":1646210954,"question_id":71319801,"body_markdown":"I am using Kotlin in a webserver app and I have a line of code as follows:\r\n\r\n```\r\n.onComplete { jsonResult: AsyncResult&lt;JsonObject&gt;? -&gt;\r\n```\r\n\r\nNow what I want to do is change the underlying JsonObject wrapped in the `AsyncResult`, so that it is going to be reflected further downstream.\r\n\r\n```\r\nvar res: JsonObject? = jsonResult?.result()\r\nif (res != null) {\r\n    if (res.getInteger(&quot;files_uploaded&quot;) &gt; 0) {\r\n            res.put(&quot;URL&quot;, &quot;Some URL&quot;)\r\n    }\r\n}\r\n```\r\n\r\nI was then imagining to update the underlying JSON object in the result but not sure how to do that.","title":"modify underlying result/value of async object","body":"<p>I am using Kotlin in a webserver app and I have a line of code as follows:</p>\n<pre><code>.onComplete { jsonResult: AsyncResult&lt;JsonObject&gt;? -&gt;\n</code></pre>\n<p>Now what I want to do is change the underlying JsonObject wrapped in the <code>AsyncResult</code>, so that it is going to be reflected further downstream.</p>\n<pre><code>var res: JsonObject? = jsonResult?.result()\nif (res != null) {\n    if (res.getInteger(&quot;files_uploaded&quot;) &gt; 0) {\n            res.put(&quot;URL&quot;, &quot;Some URL&quot;)\n    }\n}\n</code></pre>\n<p>I was then imagining to update the underlying JSON object in the result but not sure how to do that.</p>\n"},{"tags":["java","multithreading","synchronization","inputstream"],"comments":[{"owner":{"account_id":7226774,"reputation":19717,"user_id":5515060,"accept_rate":100,"display_name":"Lino"},"score":2,"creation_date":1646216520,"post_id":71320990,"comment_id":126066573,"body_markdown":"Because you never receive an object?","body":"Because you never receive an object?"},{"owner":{"account_id":24314867,"reputation":11,"user_id":18256231,"display_name":"hadsag"},"score":0,"creation_date":1646216945,"post_id":71320990,"comment_id":126066707,"body_markdown":"I added the buffer class. The print &quot;t2: waiting to lock ois&quot;  wouldn&#39;t run if it didn&#39;t receive any object. But i guess you&#39;re talking about t1 and in that case, yeah that is true that it doesn&#39;t receive any objects. I want t1 to run continuously despite not receiving anything, but when t2 is activated, I want them to synchronize on the usage of ObjectInputStream.","body":"I added the buffer class. The print &quot;t2: waiting to lock ois&quot;  wouldn&#39;t run if it didn&#39;t receive any object. But i guess you&#39;re talking about t1 and in that case, yeah that is true that it doesn&#39;t receive any objects. I want t1 to run continuously despite not receiving anything, but when t2 is activated, I want them to synchronize on the usage of ObjectInputStream."},{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1646217236,"post_id":71320990,"comment_id":126066809,"body_markdown":"But while t1 is waiting for objects to come along it holds on to the lock, so t2 can&#39;t do its work in that case.","body":"But while t1 is waiting for objects to come along it holds on to the lock, so t2 can&#39;t do its work in that case."},{"owner":{"account_id":24314867,"reputation":11,"user_id":18256231,"display_name":"hadsag"},"score":0,"creation_date":1646218254,"post_id":71320990,"comment_id":126067161,"body_markdown":"I want t1 to run continuously, listening for objects from a server on another computer. I don&#39;t know if there is a more effective way to notify it only when the server wants to send data, because the server is not on the same computer so its only input is through this stream.","body":"I want t1 to run continuously, listening for objects from a server on another computer. I don&#39;t know if there is a more effective way to notify it only when the server wants to send data, because the server is not on the same computer so its only input is through this stream."},{"owner":{"account_id":24314867,"reputation":11,"user_id":18256231,"display_name":"hadsag"},"score":0,"creation_date":1646218416,"post_id":71320990,"comment_id":126067213,"body_markdown":"how do I make t1 unlock ois if no objects come along, but only for a second to allow t2 to take lock (if t2 activated); otherwise, it just repeats the process (if t2 inactive -  waiting)","body":"how do I make t1 unlock ois if no objects come along, but only for a second to allow t2 to take lock (if t2 activated); otherwise, it just repeats the process (if t2 inactive -  waiting)"},{"owner":{"account_id":24314867,"reputation":11,"user_id":18256231,"display_name":"hadsag"},"score":0,"creation_date":1646218967,"post_id":71320990,"comment_id":126067379,"body_markdown":"i tried adding a sleep or wait after an objects was attempted to be read, but it doesn&#39;t unlock the inputstream. synchronized (ois) {\n                    System.out.println(&quot;t1: locked ois&quot;);\n                    o = ois.readObject();\n                    while(o == null){\n                        ois.wait(500);\n                        Thread.sleep(500);\n                    }\n                }","body":"i tried adding a sleep or wait after an objects was attempted to be read, but it doesn&#39;t unlock the inputstream. synchronized (ois) {                     System.out.println(&quot;t1: locked ois&quot;);                     o = ois.readObject();                     while(o == null){                         ois.wait(500);                         Thread.sleep(500);                     }                 }"}],"owner":{"account_id":24314867,"reputation":11,"user_id":18256231,"display_name":"hadsag"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1646219981,"answer_count":0,"score":1,"last_activity_date":1646216748,"creation_date":1646216350,"question_id":71320990,"body_markdown":"I have these two threads: t1 and t2. t1 is always listening to messages from the server, but t2 is only notified when a message is sent. The reason to lock ObjectInputStream is that the message waits for confirmation of recipient and message-id. \r\n\r\nThe question: why does t1 never release the lock on ois?\r\n\r\n**t1 method**\r\n\r\n    public void run() {\r\n        Object o;\r\n        while (!Thread.interrupted()) {\r\n            try {\r\n                synchronized (ois) {\r\n                    System.out.println(&quot;t1: locked ois&quot;);\r\n                    o = ois.readObject();\r\n                }\r\n                System.out.println(&quot;t1: unlocked ois&quot;);\r\n                if (o.getClass().isAssignableFrom(Model.Message.class)) {\r\n                    receiveMessage((Message) o);\r\n                }\r\n                if (o.getClass().isAssignableFrom(ArrayList.class)) {\r\n                    updateUsers((ArrayList&lt;Model.User&gt;) o);\r\n                }\r\n            } catch (EOFException e) {\r\n                System.out.println(&quot;stopped&quot;);\r\n                t2.stop();\r\n                t1.stop();\r\n            } catch (IOException | ClassNotFoundException e) {\r\n                try {\r\n                    Thread.sleep(1000);\r\n                } catch (InterruptedException ex) {\r\n                    ex.printStackTrace();\r\n                }\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n    }\r\n\r\n**t2 method**\r\n\r\n    public void run() {\r\n            while (!Thread.interrupted()) {\r\n                try {\r\n                    Message currMessage = messageBuffer.get();\r\n                    System.out.println(&quot;t2: waiting to lock ois&quot;);\r\n                    synchronized (ois) {\r\n                        System.out.println(&quot;t2: locked ois&quot;);\r\n                        oos.writeObject(currMessage);\r\n                        oos.flush();\r\n                        int currID = -1;\r\n                        while (currID &lt; 0) {\r\n                            currID = ois.readInt();\r\n                            currMessage.setCurrId(currID);\r\n                        }\r\n                    }\r\n                } catch(IOException | InterruptedException e){\r\n                    e.printStackTrace();\r\n                }\r\n\r\n            }\r\n        }\r\n    }\r\n\r\n**The buffer that regulates t2**\r\n\r\n \r\n\r\n    public class Buffer&lt;T&gt; implements Serializable {\r\n    private static final long serialVersionUID = -5886308724572898536L;\r\n    private LinkedList&lt;T&gt; buffer = new LinkedList&lt;T&gt;();\r\n\r\n    public synchronized void put(T obj) {\r\n        buffer.addLast(obj);\r\n        notifyAll();\r\n    }\r\n\r\n    public synchronized T get() throws InterruptedException {\r\n        while(buffer.isEmpty()) {\r\n            wait();\r\n        }\r\n        return buffer.removeFirst();\r\n    }\r\n\r\n    public int size() {\r\n        return buffer.size();\r\n    }\r\n    }\r\n\r\nThe output\r\n\r\n    t1: locked ois\r\n    t2: waiting to lock ois\r\n","title":"unlock InputStream Java","body":"<p>I have these two threads: t1 and t2. t1 is always listening to messages from the server, but t2 is only notified when a message is sent. The reason to lock ObjectInputStream is that the message waits for confirmation of recipient and message-id.</p>\n<p>The question: why does t1 never release the lock on ois?</p>\n<p><strong>t1 method</strong></p>\n<pre><code>public void run() {\n    Object o;\n    while (!Thread.interrupted()) {\n        try {\n            synchronized (ois) {\n                System.out.println(&quot;t1: locked ois&quot;);\n                o = ois.readObject();\n            }\n            System.out.println(&quot;t1: unlocked ois&quot;);\n            if (o.getClass().isAssignableFrom(Model.Message.class)) {\n                receiveMessage((Message) o);\n            }\n            if (o.getClass().isAssignableFrom(ArrayList.class)) {\n                updateUsers((ArrayList&lt;Model.User&gt;) o);\n            }\n        } catch (EOFException e) {\n            System.out.println(&quot;stopped&quot;);\n            t2.stop();\n            t1.stop();\n        } catch (IOException | ClassNotFoundException e) {\n            try {\n                Thread.sleep(1000);\n            } catch (InterruptedException ex) {\n                ex.printStackTrace();\n            }\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n<p><strong>t2 method</strong></p>\n<pre><code>public void run() {\n        while (!Thread.interrupted()) {\n            try {\n                Message currMessage = messageBuffer.get();\n                System.out.println(&quot;t2: waiting to lock ois&quot;);\n                synchronized (ois) {\n                    System.out.println(&quot;t2: locked ois&quot;);\n                    oos.writeObject(currMessage);\n                    oos.flush();\n                    int currID = -1;\n                    while (currID &lt; 0) {\n                        currID = ois.readInt();\n                        currMessage.setCurrId(currID);\n                    }\n                }\n            } catch(IOException | InterruptedException e){\n                e.printStackTrace();\n            }\n\n        }\n    }\n}\n</code></pre>\n<p><strong>The buffer that regulates t2</strong></p>\n<pre><code>public class Buffer&lt;T&gt; implements Serializable {\nprivate static final long serialVersionUID = -5886308724572898536L;\nprivate LinkedList&lt;T&gt; buffer = new LinkedList&lt;T&gt;();\n\npublic synchronized void put(T obj) {\n    buffer.addLast(obj);\n    notifyAll();\n}\n\npublic synchronized T get() throws InterruptedException {\n    while(buffer.isEmpty()) {\n        wait();\n    }\n    return buffer.removeFirst();\n}\n\npublic int size() {\n    return buffer.size();\n}\n}\n</code></pre>\n<p>The output</p>\n<pre><code>t1: locked ois\nt2: waiting to lock ois\n</code></pre>\n"},{"tags":["java","android","android-download-manager"],"comments":[{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1645525278,"post_id":71219250,"comment_id":125888457,"body_markdown":"`fileDirectoy =  getApplicationContext().getFilesDir().getAbsolutePath();` getFilesDir() does not match getExternalFilesDir() which you use in `request.setDestinationInExternalFilesDir()...`","body":"<code>fileDirectoy =  getApplicationContext().getFilesDir().getAbsolutePath();</code> getFilesDir() does not match getExternalFilesDir() which you use in <code>request.setDestinationInExternalFilesDir()...</code>"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1645525499,"post_id":71219250,"comment_id":125888535,"body_markdown":"`request.setDestinationInExternalFilesDir(getApplicationContext(), fileDirectoy, myListOfDocuments.get(i).get(&quot;name&quot;).toString() + &quot;.mp4&quot;);`Oh Oh Oh. I only see it now. You are using a full path there (and a wrong one). You should only supply a name for one folder. And the filename yes.","body":"<code>request.setDestinationInExternalFilesDir(getApplicationConte&zwnj;&#8203;xt(), fileDirectoy, myListOfDocuments.get(i).get(&quot;name&quot;).toString() + &quot;.mp4&quot;);</code>Oh Oh Oh. I only see it now. You are using a full path there (and a wrong one). You should only supply a name for one folder. And the filename yes."},{"owner":{"account_id":11540220,"reputation":15,"user_id":8456215,"display_name":"Azhar Razak"},"score":0,"creation_date":1645532293,"post_id":71219250,"comment_id":125891099,"body_markdown":"`request.setDestinationInExternalFilesDir(getApplicationContext(), Environment.DIRECTORY_DOWNLOADS, myListOfDocuments.get(i).get(&quot;name&quot;).toString() + &quot;.mp4&quot;);` @blackapps I corrected this statement to use the `Environment.DIRECTORY_DOWNLOADS` which now saves the mp4 videos in the apps downloads folder but I cant list the files inside with `File directory = new File(Environment.DIRECTORY_DOWNLOADS);` followed by `File[] files = directory.listFiles();` The `files` array comes up as null, not sure why. could you provide clafication on your previous comments - They might be misinterpreted","body":"<code>request.setDestinationInExternalFilesDir(getApplicationConte&zwnj;&#8203;xt(), Environment.DIRECTORY_DOWNLOADS, myListOfDocuments.get(i).get(&quot;name&quot;).toString() + &quot;.mp4&quot;);</code> @blackapps I corrected this statement to use the <code>Environment.DIRECTORY_DOWNLOADS</code> which now saves the mp4 videos in the apps downloads folder but I cant list the files inside with <code>File directory = new File(Environment.DIRECTORY_DOWNLOADS);</code> followed by <code>File[] files = directory.listFiles();</code> The <code>files</code> array comes up as null, not sure why. could you provide clafication on your previous comments - They might be misinterpreted"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1645532395,"post_id":71219250,"comment_id":125891133,"body_markdown":"Please adapt the code in your post. To be it as what i suggested and you use now. Dont use comments for your code as all in all its unreadable.","body":"Please adapt the code in your post. To be it as what i suggested and you use now. Dont use comments for your code as all in all its unreadable."},{"owner":{"account_id":11540220,"reputation":15,"user_id":8456215,"display_name":"Azhar Razak"},"score":0,"creation_date":1645534378,"post_id":71219250,"comment_id":125891946,"body_markdown":"@blackapps Post has been adapted to be what you have suggested. Thanks for the help","body":"@blackapps Post has been adapted to be what you have suggested. Thanks for the help"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1645534636,"post_id":71219250,"comment_id":125892062,"body_markdown":"`File directory = new File(Environment.DIRECTORY_DOWNLOADS);` That is no valid path/directory at all which you could easily find out yourself if you used `directory.exists()`.  Earlier i told you that setDestinationInExternalFilesDir() would save in getExternalFilesDir(). So use that here too. Adapt the code in your post too when you use getExternalFilesDir() and still have questions.","body":"<code>File directory = new File(Environment.DIRECTORY_DOWNLOADS);</code> That is no valid path/directory at all which you could easily find out yourself if you used <code>directory.exists()</code>.  Earlier i told you that setDestinationInExternalFilesDir() would save in getExternalFilesDir(). So use that here too. Adapt the code in your post too when you use getExternalFilesDir() and still have questions."},{"owner":{"account_id":11540220,"reputation":15,"user_id":8456215,"display_name":"Azhar Razak"},"score":0,"creation_date":1645536659,"post_id":71219250,"comment_id":125892980,"body_markdown":"@blackapps I have adapted the post. The &#39;files&#39; array returns null even when using the same directory for DownloadManager. I think I am incorrectly setting a file directory path. is this so? (And I appreciate the help)","body":"@blackapps I have adapted the post. The &#39;files&#39; array returns null even when using the same directory for DownloadManager. I think I am incorrectly setting a file directory path. is this so? (And I appreciate the help)"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1645536812,"post_id":71219250,"comment_id":125893046,"body_markdown":"`File fileDirectoy = Environment.getExternalStorageDirectory();` My god. I did not say that you should change that line. Bring it back to only the download directory. Then read my comment(s) again.","body":"<code>File fileDirectoy = Environment.getExternalStorageDirectory();</code> My god. I did not say that you should change that line. Bring it back to only the download directory. Then read my comment(s) again."}],"owner":{"account_id":11540220,"reputation":15,"user_id":8456215,"display_name":"Azhar Razak"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1261,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1646216742,"creation_date":1645524064,"question_id":71219250,"body_markdown":"I am able to download files ( mp4 videos) in Android using DownloadManager set to a specific path, but when I try to get the file names from the path it outputs a &quot;.lock&quot; file as the name of my files. I want the name of the files I have downloaded:\r\n\r\n```\r\nFile[] files = fileDirectoy.listFiles();\r\n```\r\n&gt;This statement (as below) returns null for the files array. The folder does contain four .mp4 videos\r\n\r\nThe code that I used is listed below. \r\n```\r\nFile fileDirectoy = Environment.getExternalStorageDirectory();\r\nDownloadManager.Request request = new DownloadManager.Request(uriVideo);\r\nrequest.setNotificationVisibility(DownloadManager.Request.VISIBILITY_VISIBLE_NOTIFY_COMPLETED);\r\nrequest.setDestinationInExternalFilesDir(getApplicationContext(), fileDirectoy.toString(), myListOfDocuments.get(i).get(&quot;name&quot;).toString() + &quot;.mp4&quot;);\r\n\r\n//todo: Enable this to download videos downloadManager.enqueue(request);\r\n\r\n//Lists Files in Local Storage\r\n\r\nif(fileDirectoy.exists()) {\r\n    File[] files = fileDirectoy.listFiles();\r\n    for(File file : files) {\r\n        Log.d(&quot;MyLog&quot;,&quot;File name: &quot;+file.getName());\r\n        Log.d(&quot;MyLog&quot;,&quot;File path: &quot;+file.getAbsolutePath());\r\n        Log.d(&quot;MyLog&quot;,&quot;Size :&quot;+file.getTotalSpace());\r\n\r\n    }\r\n} else {\r\n    Log.d(&quot;MyLog&quot;, &quot;File directory does not exist&quot;);\r\n}\r\n```\r\n\r\nNot sure why this behavior is taking place.","title":"How to download files using DownloadManager and Log their name and path (Android)?","body":"<p>I am able to download files ( mp4 videos) in Android using DownloadManager set to a specific path, but when I try to get the file names from the path it outputs a &quot;.lock&quot; file as the name of my files. I want the name of the files I have downloaded:</p>\n<pre><code>File[] files = fileDirectoy.listFiles();\n</code></pre>\n<blockquote>\n<p>This statement (as below) returns null for the files array. The folder does contain four .mp4 videos</p>\n</blockquote>\n<p>The code that I used is listed below.</p>\n<pre><code>File fileDirectoy = Environment.getExternalStorageDirectory();\nDownloadManager.Request request = new DownloadManager.Request(uriVideo);\nrequest.setNotificationVisibility(DownloadManager.Request.VISIBILITY_VISIBLE_NOTIFY_COMPLETED);\nrequest.setDestinationInExternalFilesDir(getApplicationContext(), fileDirectoy.toString(), myListOfDocuments.get(i).get(&quot;name&quot;).toString() + &quot;.mp4&quot;);\n\n//todo: Enable this to download videos downloadManager.enqueue(request);\n\n//Lists Files in Local Storage\n\nif(fileDirectoy.exists()) {\n    File[] files = fileDirectoy.listFiles();\n    for(File file : files) {\n        Log.d(&quot;MyLog&quot;,&quot;File name: &quot;+file.getName());\n        Log.d(&quot;MyLog&quot;,&quot;File path: &quot;+file.getAbsolutePath());\n        Log.d(&quot;MyLog&quot;,&quot;Size :&quot;+file.getTotalSpace());\n\n    }\n} else {\n    Log.d(&quot;MyLog&quot;, &quot;File directory does not exist&quot;);\n}\n</code></pre>\n<p>Not sure why this behavior is taking place.</p>\n"},{"tags":["java","spring-integration","dsl"],"answers":[{"tags":[],"owner":{"account_id":9504657,"reputation":7440,"user_id":7064617,"display_name":"JCompetence"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1646216697,"creation_date":1646216697,"answer_id":71321054,"question_id":71320623,"body_markdown":"There is support for xPath:\r\n\r\nhttps://docs.spring.io/spring-integration/docs/5.2.5.RELEASE/reference/html/xml.html#xpath-spel-function\r\n\r\n**xpath SpEL Function**\r\n\r\n&gt; Spring Integration, since version 3.0, provides the built-in #xpath\r\n&gt; SpEL function, which invokes the XPathUtils.evaluate() static\r\n&gt; method. This method delegates to an\r\n&gt; org.springframework.xml.xpath.XPathExpression. The following listing\r\n&gt; shows some usage examples:\r\n\r\n    &lt;transformer expression=&quot;#xpath(payload, &#39;/name&#39;)&quot;/&gt;\r\n    \r\n    &lt;filter expression=&quot;#xpath(payload, headers.xpath, &#39;boolean&#39;)&quot;/&gt;\r\n    \r\n    &lt;splitter expression=&quot;#xpath(payload, &#39;//book&#39;, &#39;document_list&#39;)&quot;/&gt;\r\n    \r\n    &lt;router expression=&quot;#xpath(payload, &#39;/person/@age&#39;, &#39;number&#39;)&quot;&gt;\r\n        &lt;mapping channel=&quot;output1&quot; value=&quot;16&quot;/&gt;\r\n        &lt;mapping channel=&quot;output2&quot; value=&quot;45&quot;/&gt;\r\n    &lt;/router&gt;\r\n\r\n&gt; The #xpath() also supports a third optional parameter for converting\r\n&gt; the result of the XPath evaluation. It can be one of the String\r\n&gt; constants (string, boolean, number, node, node_list and document_list)\r\n&gt; or an org.springframework.xml.xpath.NodeMapper instance. By default,\r\n&gt; the #xpath SpEL function returns a String representation of the XPath\r\n&gt; evaluation.\r\n&gt; \r\n&gt; To enable the #xpath SpEL function, you can add the\r\n&gt; spring-integration-xml.jar to the classpath. You need no declare any\r\n&gt; components from the Spring Integration XML Namespace. For more\r\n&gt; information, see &quot;`Spring Expression Language (SpEL).\r\n\r\nIt could look like this:\r\n\r\n    .enrichHeaders(h -&gt; \r\n                 h.headerExpression(&quot;bsn&quot;, &quot;#xpath(payload, &#39;/BG:body/BG:object/BG:bsn&#39;)&quot;))\r\n\r\n\r\nAnother way could be to `XPathExpressionEvaluatingHeaderValueMessageProcessor`:\r\n\r\n\r\nhttps://docs.spring.io/spring-integration/api/org/springframework/integration/xml/transformer/support/XPathExpressionEvaluatingHeaderValueMessageProcessor.html\r\n\r\nExample of Usage:\r\n\r\n            @Bean\r\n    \t\tpublic IntegrationFlow xpathHeaderEnricherFlow() {\r\n    \t\t\treturn IntegrationFlows.from(&quot;xpathHeaderEnricherInput&quot;)\r\n    \t\t\t\t\t.enrichHeaders(\r\n    \t\t\t\t\t\t\ts -&gt; s.header(&quot;one&quot;,\r\n    \t\t\t\t\t\t\t\t\tnew XPathExpressionEvaluatingHeaderValueMessageProcessor(&quot;/root/elementOne&quot;))\r\n    \t\t\t\t\t\t\t\t\t.header(&quot;two&quot;,\r\n    \t\t\t\t\t\t\t\t\t\t\tnew XPathExpressionEvaluatingHeaderValueMessageProcessor(&quot;/root/elementTwo&quot;))\r\n    \t\t\t\t\t\t\t\t\t.headerChannelsToString(&quot;12345&quot;)\r\n    \t\t\t\t\t\t\t\t\t.messageProcessor(m -&gt; s.header(&quot;foo&quot;, &quot;bar&quot;)),\r\n    \t\t\t\t\t\t\tc -&gt; c.autoStartup(false).id(&quot;xpathHeaderEnricher&quot;)\r\n    \t\t\t\t\t)\r\n    \t\t\t\t\t.get();\r\n    \t\t}\r\n","title":"How to use enrichHeaders method to pick up xpath of an xml element using java dsl","body":"<p>There is support for xPath:</p>\n<p><a href=\"https://docs.spring.io/spring-integration/docs/5.2.5.RELEASE/reference/html/xml.html#xpath-spel-function\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-integration/docs/5.2.5.RELEASE/reference/html/xml.html#xpath-spel-function</a></p>\n<p><strong>xpath SpEL Function</strong></p>\n<blockquote>\n<p>Spring Integration, since version 3.0, provides the built-in #xpath\nSpEL function, which invokes the XPathUtils.evaluate() static\nmethod. This method delegates to an\norg.springframework.xml.xpath.XPathExpression. The following listing\nshows some usage examples:</p>\n</blockquote>\n<pre><code>&lt;transformer expression=&quot;#xpath(payload, '/name')&quot;/&gt;\n\n&lt;filter expression=&quot;#xpath(payload, headers.xpath, 'boolean')&quot;/&gt;\n\n&lt;splitter expression=&quot;#xpath(payload, '//book', 'document_list')&quot;/&gt;\n\n&lt;router expression=&quot;#xpath(payload, '/person/@age', 'number')&quot;&gt;\n    &lt;mapping channel=&quot;output1&quot; value=&quot;16&quot;/&gt;\n    &lt;mapping channel=&quot;output2&quot; value=&quot;45&quot;/&gt;\n&lt;/router&gt;\n</code></pre>\n<blockquote>\n<p>The #xpath() also supports a third optional parameter for converting\nthe result of the XPath evaluation. It can be one of the String\nconstants (string, boolean, number, node, node_list and document_list)\nor an org.springframework.xml.xpath.NodeMapper instance. By default,\nthe #xpath SpEL function returns a String representation of the XPath\nevaluation.</p>\n<p>To enable the #xpath SpEL function, you can add the\nspring-integration-xml.jar to the classpath. You need no declare any\ncomponents from the Spring Integration XML Namespace. For more\ninformation, see &quot;`Spring Expression Language (SpEL).</p>\n</blockquote>\n<p>It could look like this:</p>\n<pre><code>.enrichHeaders(h -&gt; \n             h.headerExpression(&quot;bsn&quot;, &quot;#xpath(payload, '/BG:body/BG:object/BG:bsn')&quot;))\n</code></pre>\n<p>Another way could be to <code>XPathExpressionEvaluatingHeaderValueMessageProcessor</code>:</p>\n<p><a href=\"https://docs.spring.io/spring-integration/api/org/springframework/integration/xml/transformer/support/XPathExpressionEvaluatingHeaderValueMessageProcessor.html\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-integration/api/org/springframework/integration/xml/transformer/support/XPathExpressionEvaluatingHeaderValueMessageProcessor.html</a></p>\n<p>Example of Usage:</p>\n<pre><code>        @Bean\n        public IntegrationFlow xpathHeaderEnricherFlow() {\n            return IntegrationFlows.from(&quot;xpathHeaderEnricherInput&quot;)\n                    .enrichHeaders(\n                            s -&gt; s.header(&quot;one&quot;,\n                                    new XPathExpressionEvaluatingHeaderValueMessageProcessor(&quot;/root/elementOne&quot;))\n                                    .header(&quot;two&quot;,\n                                            new XPathExpressionEvaluatingHeaderValueMessageProcessor(&quot;/root/elementTwo&quot;))\n                                    .headerChannelsToString(&quot;12345&quot;)\n                                    .messageProcessor(m -&gt; s.header(&quot;foo&quot;, &quot;bar&quot;)),\n                            c -&gt; c.autoStartup(false).id(&quot;xpathHeaderEnricher&quot;)\n                    )\n                    .get();\n        }\n</code></pre>\n"}],"owner":{"account_id":24427070,"reputation":101,"user_id":18352519,"display_name":"Bash"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":308,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":71321054,"answer_count":1,"score":1,"last_activity_date":1646216697,"creation_date":1646214712,"question_id":71320623,"body_markdown":"i am trying to pick up an xpth of an xml element using java dsl in spring integration. I am trying to put the element name in the enrichHeaders method but it doesn&#39;t seem to be working. This is the code:\r\n\r\n\r\n    return IntegrationFlows.from(Http.inboundGateway(&quot;/person&quot;)\r\n                            .requestMapping(m -&gt; m.methods(HttpMethod.POST)\r\n                                    .consumes(&quot;application/xml&quot;)\r\n                                    .produces(&quot;application/json&quot;)\r\n                            )\r\n                            )\r\n                    .enrichHeaders( h -&gt; h.header(&quot;bsn&quot;,&quot;/BG:prsLa01/BG:body/BG:object/BG:bsn&quot;))\r\n                    .transform(new XmlToJsonTransformer())\r\n                    .get();","title":"How to use enrichHeaders method to pick up xpath of an xml element using java dsl","body":"<p>i am trying to pick up an xpth of an xml element using java dsl in spring integration. I am trying to put the element name in the enrichHeaders method but it doesn't seem to be working. This is the code:</p>\n<pre><code>return IntegrationFlows.from(Http.inboundGateway(&quot;/person&quot;)\n                        .requestMapping(m -&gt; m.methods(HttpMethod.POST)\n                                .consumes(&quot;application/xml&quot;)\n                                .produces(&quot;application/json&quot;)\n                        )\n                        )\n                .enrichHeaders( h -&gt; h.header(&quot;bsn&quot;,&quot;/BG:prsLa01/BG:body/BG:object/BG:bsn&quot;))\n                .transform(new XmlToJsonTransformer())\n                .get();\n</code></pre>\n"},{"tags":["java","jar","auto-update","server-application"],"comments":[{"owner":{"account_id":8326,"reputation":258545,"user_id":14955,"accept_rate":55,"display_name":"Thilo"},"score":4,"creation_date":1287808166,"post_id":4002462,"comment_id":4287458,"body_markdown":"Have you looked at Java Web Start? It does not update itself at runtime though, I believe, (restart required), for that you probably need to look at OSGi.","body":"Have you looked at Java Web Start? It does not update itself at runtime though, I believe, (restart required), for that you probably need to look at OSGi."},{"owner":{"account_id":74184,"reputation":122906,"user_id":213269,"accept_rate":98,"display_name":"Jonas"},"score":0,"creation_date":1287808357,"post_id":4002462,"comment_id":4287470,"body_markdown":"@Thilo: I think it would be easy to download a file from a given url, and then start it with a linux command from the running jar file.","body":"@Thilo: I think it would be easy to download a file from a given url, and then start it with a linux command from the running jar file."},{"owner":{"account_id":21994,"reputation":73798,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":2,"creation_date":1287821014,"post_id":4002462,"comment_id":4288141,"body_markdown":"The design of Java WebStart API makes it impossible to update while running.  Unfortunately.","body":"The design of Java WebStart API makes it impossible to update while running.  Unfortunately."},{"owner":{"account_id":1248460,"reputation":9978,"user_id":1209409,"accept_rate":14,"display_name":"iltaf khalid"},"score":0,"creation_date":1480965713,"post_id":4002462,"comment_id":69172858,"body_markdown":"@meain boss you rock, you made my day :)","body":"@meain boss you rock, you made my day :)"},{"owner":{"account_id":3228950,"reputation":853,"user_id":2724649,"accept_rate":60,"display_name":"meain"},"score":0,"creation_date":1481118614,"post_id":4002462,"comment_id":69245489,"body_markdown":"@iltafkhalid glad to help ;)","body":"@iltafkhalid glad to help ;)"}],"answers":[{"tags":[],"owner":{"account_id":82818,"reputation":58383,"user_id":232593,"accept_rate":79,"display_name":"Merlyn Morgan-Graham"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1287808175,"creation_date":1287807819,"answer_id":4002465,"question_id":4002462,"body_markdown":"This isn&#39;t necessarily the *best* way, but it might work for you.\r\n\r\nYou can write a bootstrap application (ala the World of Warcraft launcher, if you&#39;ve played WoW).  That bootstrap is responsible for checking for updates.\r\n\r\n- If an update is available, it will offer it to the user, handle the download, installation, etc.\r\n- If the application is up to date, it will allow the user to launch the application\r\n- Optionally, you can allow the user to launch the application, even if it isn&#39;t up to date\r\n\r\nThis way you don&#39;t have to worry about forcing an exit of your application.\r\n\r\nIf your application is web based, and if it is important that they have an up to date client, then you can also do version checks while the application runs.  You can do them at intervals, while performing normal communication with the server (some or all calls), or both.\r\n\r\nFor a product I recently worked on, we did version checks upon launch (without a boot strapper app, but before the main window appeared), and during calls to the server.  When the client was out of date, we relied on the user to quit manually, but forbid any action against the server.\r\n\r\nPlease note that I don&#39;t know if Java can invoke UI code before you bring up your main window.  We were using C#/WPF.","title":"How can I write a Java application that can update itself at runtime?","body":"<p>This isn't necessarily the <em>best</em> way, but it might work for you.</p>\n\n<p>You can write a bootstrap application (ala the World of Warcraft launcher, if you've played WoW).  That bootstrap is responsible for checking for updates.</p>\n\n<ul>\n<li>If an update is available, it will offer it to the user, handle the download, installation, etc.</li>\n<li>If the application is up to date, it will allow the user to launch the application</li>\n<li>Optionally, you can allow the user to launch the application, even if it isn't up to date</li>\n</ul>\n\n<p>This way you don't have to worry about forcing an exit of your application.</p>\n\n<p>If your application is web based, and if it is important that they have an up to date client, then you can also do version checks while the application runs.  You can do them at intervals, while performing normal communication with the server (some or all calls), or both.</p>\n\n<p>For a product I recently worked on, we did version checks upon launch (without a boot strapper app, but before the main window appeared), and during calls to the server.  When the client was out of date, we relied on the user to quit manually, but forbid any action against the server.</p>\n\n<p>Please note that I don't know if Java can invoke UI code before you bring up your main window.  We were using C#/WPF.</p>\n"},{"tags":[],"owner":{"account_id":200630,"reputation":27386,"user_id":446591,"accept_rate":65,"display_name":"Brad Mace"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1460363985,"creation_date":1287808470,"answer_id":4002487,"question_id":4002462,"body_markdown":"I&#39;ve written a Java application that can load plugins at runtime and start using them immediately, inspired by a similar mechanism in jEdit. jEdit is open source so you have the option of looking to see how it works.\r\n\r\nThe solution uses a custom ClassLoader to load files from the jar.  Once they&#39;re loaded you can invoke some method from the new jar that will act as its `main` method.  Then the tricky part is making sure you get rid of all references to the old code so that it can be garbage collected.  I&#39;m not quite an expert on that part, I&#39;ve made it work but it wasn&#39;t easy.","title":"How can I write a Java application that can update itself at runtime?","body":"<p>I've written a Java application that can load plugins at runtime and start using them immediately, inspired by a similar mechanism in jEdit. jEdit is open source so you have the option of looking to see how it works.</p>\n\n<p>The solution uses a custom ClassLoader to load files from the jar.  Once they're loaded you can invoke some method from the new jar that will act as its <code>main</code> method.  Then the tricky part is making sure you get rid of all references to the old code so that it can be garbage collected.  I'm not quite an expert on that part, I've made it work but it wasn't easy.</p>\n"},{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":1,"up_vote_count":77,"is_accepted":true,"score":76,"last_activity_date":1484535922,"creation_date":1287813706,"answer_id":4002730,"question_id":4002462,"body_markdown":"The basic structure of a solution is as follows:\r\n\r\n- There is a main loop responsible for repeatedly loading the latest version of the app (if required) and launching it.\r\n\r\n- The application does its thing, but periodically checks the download URL.  If it detects a new version it exits back to the launcher.\r\n\r\nThere are a number of ways you could implement this.  For example:\r\n\r\n- The launcher could be a wrapper script or binary application that starts a new JVM to run the application from a JAR file that gets replaced.\r\n\r\n- The launcher could be a Java application that creates a classloader for the new JAR, loads an entrypoint class and calls some method on it.  If you do it this way, you have to watch for classloader storage leaks, but that&#39;s not difficult.  (You just need to make sure that no objects with classes loaded from the JAR are reachable after you relaunch.)\r\n\r\nThe advantages of the external wrapper approach are:\r\n\r\n  - you only need one JAR, \r\n  - you can replace the entire Java app,\r\n  - any secondary threads created by the app, etc will go away without special shutdown logic, and\r\n  - you can also deal with recovery from application crashes, etc.\r\n\r\nThe second approach requires two JARs, but has the following advantages:\r\n\r\n  - the solution is pure Java and portable,\r\n  - the changeover will be quicker, and\r\n  - you can more easily retain state across the restart (modulo leakage issues).\r\n\r\nThe &quot;best&quot; way depends on your specific requirements.\r\n\r\nIt should also be noted that:\r\n\r\n  - There are security risks with auto-updating.  In general, if the server that provides the updates is compromised, or if the mechanisms for providing the updates are susceptible to attack, then auto-updating can lead to a compromise of the client(s).\r\n\r\n  - Pushing a update to a client that cause damage to the client could have legal risks, and risks to your business&#39; reputation.\r\n\r\n-----------------\r\n\r\nIf you can find a way to avoid reinventing the wheel, that would be good.  See the other answers for suggestions.","title":"How can I write a Java application that can update itself at runtime?","body":"<p>The basic structure of a solution is as follows:</p>\n\n<ul>\n<li><p>There is a main loop responsible for repeatedly loading the latest version of the app (if required) and launching it.</p></li>\n<li><p>The application does its thing, but periodically checks the download URL.  If it detects a new version it exits back to the launcher.</p></li>\n</ul>\n\n<p>There are a number of ways you could implement this.  For example:</p>\n\n<ul>\n<li><p>The launcher could be a wrapper script or binary application that starts a new JVM to run the application from a JAR file that gets replaced.</p></li>\n<li><p>The launcher could be a Java application that creates a classloader for the new JAR, loads an entrypoint class and calls some method on it.  If you do it this way, you have to watch for classloader storage leaks, but that's not difficult.  (You just need to make sure that no objects with classes loaded from the JAR are reachable after you relaunch.)</p></li>\n</ul>\n\n<p>The advantages of the external wrapper approach are:</p>\n\n<ul>\n<li>you only need one JAR, </li>\n<li>you can replace the entire Java app,</li>\n<li>any secondary threads created by the app, etc will go away without special shutdown logic, and</li>\n<li>you can also deal with recovery from application crashes, etc.</li>\n</ul>\n\n<p>The second approach requires two JARs, but has the following advantages:</p>\n\n<ul>\n<li>the solution is pure Java and portable,</li>\n<li>the changeover will be quicker, and</li>\n<li>you can more easily retain state across the restart (modulo leakage issues).</li>\n</ul>\n\n<p>The \"best\" way depends on your specific requirements.</p>\n\n<p>It should also be noted that:</p>\n\n<ul>\n<li><p>There are security risks with auto-updating.  In general, if the server that provides the updates is compromised, or if the mechanisms for providing the updates are susceptible to attack, then auto-updating can lead to a compromise of the client(s).</p></li>\n<li><p>Pushing a update to a client that cause damage to the client could have legal risks, and risks to your business' reputation.</p></li>\n</ul>\n\n<hr>\n\n<p>If you can find a way to avoid reinventing the wheel, that would be good.  See the other answers for suggestions.</p>\n"},{"tags":[],"owner":{"account_id":224973,"reputation":800,"user_id":485180,"display_name":"Knatpolsar"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1288078166,"creation_date":1287858116,"answer_id":4005427,"question_id":4002462,"body_markdown":" 1. First way: use tomcat and it&#39;s deploy facilities.\r\n 2. Second way: to split application on two parts (functional and update) and let update part replace function part.\r\n 3. Third way: In your server appliction just download new version, then old version releases bound port, then old version runs new version (starts process), then old version sends a request on application port to the new version to delete old version, old version terminates and new version deletes old version. Like this:\r\n![alt text][1]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/QyhXQ.jpg","title":"How can I write a Java application that can update itself at runtime?","body":"<ol>\n<li>First way: use tomcat and it's deploy facilities.</li>\n<li>Second way: to split application on two parts (functional and update) and let update part replace function part.</li>\n<li>Third way: In your server appliction just download new version, then old version releases bound port, then old version runs new version (starts process), then old version sends a request on application port to the new version to delete old version, old version terminates and new version deletes old version. Like this:\n<img src=\"https://i.stack.imgur.com/QyhXQ.jpg\" alt=\"alt text\"></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":82469,"reputation":30998,"user_id":231853,"accept_rate":74,"display_name":"Tom Crockett"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1288118417,"creation_date":1288078737,"answer_id":4021585,"question_id":4002462,"body_markdown":"If you build your application using [Equinox][1] plugins, you can use the [P2 Provisioning System][2] to get a ready-made solution to this problem. This will require the server to restart itself after an update.\r\n\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Equinox_(OSGi)\r\n  [2]: http://wiki.eclipse.org/Equinox/p2/Adding_Self-Update_to_an_RCP_Application","title":"How can I write a Java application that can update itself at runtime?","body":"<p>If you build your application using <a href=\"http://en.wikipedia.org/wiki/Equinox_%28OSGi%29\" rel=\"nofollow\">Equinox</a> plugins, you can use the <a href=\"http://wiki.eclipse.org/Equinox/p2/Adding_Self-Update_to_an_RCP_Application\" rel=\"nofollow\">P2 Provisioning System</a> to get a ready-made solution to this problem. This will require the server to restart itself after an update.</p>\n"},{"tags":[],"owner":{"account_id":90221,"reputation":80129,"user_id":248432,"accept_rate":85,"display_name":"Peter Knego"},"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1288079629,"creation_date":1288079629,"answer_id":4021686,"question_id":4002462,"body_markdown":"This is a known problem and I recommend against reinventing a wheel - don&#39;t write your own hack, just use what other people have already done.\r\n\r\nTwo situations you need to consider:\r\n\r\n1. App needs to be self-updatable and keep running even during update (server app, embedded apps). Go with OSGi: [Bundles][1] or [Equinox p2][2].\r\n\r\n2. App is a desktop app and has an installer. There are many installers with update option. Check [installers list][3].\r\n\r\n\r\n  [1]: http://publib.boulder.ibm.com/infocenter/iwedhelp/v6r0/index.jsp?topic=/com.ibm.websphere.dms.doc/dm/jobs_sw_dist_osgi_bundles.html\r\n  [2]: http://www.ralfebert.de/blog/eclipsercp/p2_updates_tutorial/\r\n  [3]: http://java-source.net/open-source/installer-generators","title":"How can I write a Java application that can update itself at runtime?","body":"<p>This is a known problem and I recommend against reinventing a wheel - don't write your own hack, just use what other people have already done.</p>\n\n<p>Two situations you need to consider:</p>\n\n<ol>\n<li><p>App needs to be self-updatable and keep running even during update (server app, embedded apps). Go with OSGi: <a href=\"http://publib.boulder.ibm.com/infocenter/iwedhelp/v6r0/index.jsp?topic=/com.ibm.websphere.dms.doc/dm/jobs_sw_dist_osgi_bundles.html\" rel=\"noreferrer\">Bundles</a> or <a href=\"http://www.ralfebert.de/blog/eclipsercp/p2_updates_tutorial/\" rel=\"noreferrer\">Equinox p2</a>.</p></li>\n<li><p>App is a desktop app and has an installer. There are many installers with update option. Check <a href=\"http://java-source.net/open-source/installer-generators\" rel=\"noreferrer\">installers list</a>.</p></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":1016567,"reputation":643,"user_id":1028024,"accept_rate":75,"display_name":"Berdus"},"down_vote_count":0,"up_vote_count":48,"is_accepted":false,"score":48,"last_activity_date":1352717516,"creation_date":1352717516,"answer_id":13342396,"question_id":4002462,"body_markdown":"I am currently developing a JAVA Linux Daemon and also had the need to implement an auto-update mechanism. I wanted to limit my application to one jar file, and came up with a simple solution: \r\n\r\n*Pack the updater application in the update itself.*\r\n\r\n**Application**: When the application detects a newer version it does the following:\r\n\r\n 1. Download update (Zipfile)\r\n 2. Extract Application **and ApplicationUpdater** (all in the zipfile)\r\n 3. Run updater\r\n\r\n**ApplicationUpdater**: When the updater runs it does the following:\r\n\r\n 4. Stop the Application (in my case a daemon via init.d)\r\n 5. Copy the downloaded jar file to overwrite current Application\r\n 6. Start the Application\r\n 7. Cleanup.\r\n\r\nHope it helps someone.\r\n","title":"How can I write a Java application that can update itself at runtime?","body":"<p>I am currently developing a JAVA Linux Daemon and also had the need to implement an auto-update mechanism. I wanted to limit my application to one jar file, and came up with a simple solution: </p>\n\n<p><em>Pack the updater application in the update itself.</em></p>\n\n<p><strong>Application</strong>: When the application detects a newer version it does the following:</p>\n\n<ol>\n<li>Download update (Zipfile)</li>\n<li>Extract Application <strong>and ApplicationUpdater</strong> (all in the zipfile)</li>\n<li>Run updater</li>\n</ol>\n\n<p><strong>ApplicationUpdater</strong>: When the updater runs it does the following:</p>\n\n<ol>\n<li>Stop the Application (in my case a daemon via init.d)</li>\n<li>Copy the downloaded jar file to overwrite current Application</li>\n<li>Start the Application</li>\n<li>Cleanup.</li>\n</ol>\n\n<p>Hope it helps someone.</p>\n"},{"tags":[],"owner":{"account_id":2331132,"reputation":326,"user_id":2044537,"accept_rate":71,"display_name":"Kaito"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1460552354,"creation_date":1442477722,"answer_id":32625518,"question_id":4002462,"body_markdown":"I see a security problem when downloading a new jar (etc.), e.g., a man in the middle attack. You always have to sign your downloadable update.\r\n\r\nOn JAX2015, Adam Bien told about using JGit for updating the binaries.\r\nSadly I could not find any tutorials.\r\n\r\n[Source in German.][1]\r\n\r\nAdam Bien created the updater [see here][2]\r\n\r\nI forked it [here][3] with some javaFX frontend. I am also working on an automatic signing.\r\n\r\n\r\n  [1]: https://jaxenter.de/java-fx-8-oder-html5-was-ist-die-bessere-plattform-25555\r\n  [2]: https://github.com/AdamBien/airfield\r\n  [3]: https://github.com/Kaito23/airfieldFX","title":"How can I write a Java application that can update itself at runtime?","body":"<p>I see a security problem when downloading a new jar (etc.), e.g., a man in the middle attack. You always have to sign your downloadable update.</p>\n\n<p>On JAX2015, Adam Bien told about using JGit for updating the binaries.\nSadly I could not find any tutorials.</p>\n\n<p><a href=\"https://jaxenter.de/java-fx-8-oder-html5-was-ist-die-bessere-plattform-25555\" rel=\"nofollow\">Source in German.</a></p>\n\n<p>Adam Bien created the updater <a href=\"https://github.com/AdamBien/airfield\" rel=\"nofollow\">see here</a></p>\n\n<p>I forked it <a href=\"https://github.com/Kaito23/airfieldFX\" rel=\"nofollow\">here</a> with some javaFX frontend. I am also working on an automatic signing.</p>\n"},{"tags":[],"owner":{"account_id":1946663,"reputation":15594,"user_id":1751640,"accept_rate":75,"display_name":"Mordechai"},"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1521134424,"creation_date":1520881523,"answer_id":49242755,"question_id":4002462,"body_markdown":"I&#39;ve recently created [update4j](https://github.com/update4j/update4j) which is fully compatible with Java 9&#39;s module system.\r\n\r\nIt will seamlessly start the new version without a restart.","title":"How can I write a Java application that can update itself at runtime?","body":"<p>I've recently created <a href=\"https://github.com/update4j/update4j\" rel=\"noreferrer\">update4j</a> which is fully compatible with Java 9's module system.</p>\n\n<p>It will seamlessly start the new version without a restart.</p>\n"}],"owner":{"account_id":74184,"reputation":122906,"user_id":213269,"accept_rate":98,"display_name":"Jonas"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":82663,"favorite_count":0,"down_vote_count":0,"up_vote_count":108,"accepted_answer_id":4002730,"answer_count":9,"score":108,"last_activity_date":1646216679,"creation_date":1287807668,"question_id":4002462,"body_markdown":"I would like to implement a java application (server application) that can download a new version (.jar file) from a given url, and then update itself at runtime.\r\n\r\nWhat is the best way to do this and is it possible?\r\n\r\nI guess that the application can download a new .jar file and start it. But how should I do the handover, e.g. know when the new application is started and then exit. Or is there a better way to do this?","title":"How can I write a Java application that can update itself at runtime?","body":"<p>I would like to implement a java application (server application) that can download a new version (.jar file) from a given url, and then update itself at runtime.</p>\n\n<p>What is the best way to do this and is it possible?</p>\n\n<p>I guess that the application can download a new .jar file and start it. But how should I do the handover, e.g. know when the new application is started and then exit. Or is there a better way to do this?</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":8443,"page":1549,"page_size":100}
