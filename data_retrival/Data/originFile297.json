{"items":[{"tags":["java","hashmap","java-8","java-stream","collectors"],"comments":[{"owner":{"account_id":1019866,"reputation":9990,"user_id":1030527,"accept_rate":86,"display_name":"bernie"},"score":0,"creation_date":1465847278,"post_id":22625065,"comment_id":63061913,"body_markdown":"related: http://stackoverflow.com/questions/24630963/java-8-nullpointerexception-in-collectors-tomap","body":"related: <a href=\"http://stackoverflow.com/questions/24630963/java-8-nullpointerexception-in-collectors-tomap\" title=\"java 8 nullpointerexception in collectors tomap\">stackoverflow.com/questions/24630963/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":9226,"reputation":30024,"user_id":16959,"accept_rate":89,"display_name":"Jason Sperske"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1395721003,"creation_date":1395721003,"answer_id":22625344,"question_id":22625065,"body_markdown":"To your 1st question, from the docs:\r\n\r\n&gt; There are no guarantees on the type, mutability, serializability, or thread-safety of the Map or List objects returned.\r\n\r\nBecause not all Map implementations allow null keys they probably added this to reduce to the most common allowable definition of a map to get maximum flexibility when choosing a type. \r\n\r\nTo your 2nd question, you just need a supplier, wouldn&#39;t a lambda work? I&#39;m still getting acquainted with Java 8, maybe a smarter person can add a better answer. ","title":"Collectors.groupingBy doesn&#39;t accept null keys","body":"<p>To your 1st question, from the docs:</p>\n\n<blockquote>\n  <p>There are no guarantees on the type, mutability, serializability, or thread-safety of the Map or List objects returned.</p>\n</blockquote>\n\n<p>Because not all Map implementations allow null keys they probably added this to reduce to the most common allowable definition of a map to get maximum flexibility when choosing a type. </p>\n\n<p>To your 2nd question, you just need a supplier, wouldn't a lambda work? I'm still getting acquainted with Java 8, maybe a smarter person can add a better answer. </p>\n"},{"tags":[],"owner":{"account_id":2347441,"reputation":67540,"user_id":2057294,"accept_rate":63,"display_name":"skiwi"},"down_vote_count":9,"up_vote_count":11,"is_accepted":false,"score":2,"last_activity_date":1395734997,"creation_date":1395734997,"answer_id":22628668,"question_id":22625065,"body_markdown":"First of all, you are using lots of raw objects. This is not a good idea *at all*, first convert the following:\r\n\r\n- `Class` to `Class&lt;?&gt;`, ie. instead of a raw type, a parametrized type with an unknown class.\r\n- Instead of forcefully casting to a `HashMap`, you should supply a `HashMap` to the collector.\r\n\r\nFirst the correctly typed code, without caring about a NPE yet:\r\n\r\n    Stream&lt;Class&lt;?&gt;&gt; stream = Stream.of(ArrayList.class);\r\n    HashMap&lt;Class&lt;?&gt;, List&lt;Class&lt;?&gt;&gt;&gt; hashMap = (HashMap&lt;Class&lt;?&gt;, List&lt;Class&lt;?&gt;&gt;&gt;)stream\r\n            .collect(Collectors.groupingBy(Class::getSuperclass));\r\n\r\nNow we get rid of the forceful cast there, and instead do it correctly:\r\n\r\n    Stream&lt;Class&lt;?&gt;&gt; stream = Stream.of(ArrayList.class);\r\n    HashMap&lt;Class&lt;?&gt;, List&lt;Class&lt;?&gt;&gt;&gt; hashMap = stream\r\n            .collect(Collectors.groupingBy(\r\n                    Class::getSuperclass,\r\n                    HashMap::new,\r\n                    Collectors.toList()\r\n            ));\r\n\r\nHere we replace the `groupingBy` which just takes a classifier, to one that takes a classifier, a supplier and a collector. Essentially this is the same as what there was before, but now it is correctly typed.\r\n\r\nYou are indeed correct that in the javadoc it is not stated that it will throw a `NPE`, and I do not think it should be throwing one, as I am allowed to supply whatever map I want, and if my map allows `null` keys, then it should be allowed.\r\n\r\nI do not see any other way to do it simpler as of now, I&#39;ll try to look more into it.\r\n","title":"Collectors.groupingBy doesn&#39;t accept null keys","body":"<p>First of all, you are using lots of raw objects. This is not a good idea <em>at all</em>, first convert the following:</p>\n\n<ul>\n<li><code>Class</code> to <code>Class&lt;?&gt;</code>, ie. instead of a raw type, a parametrized type with an unknown class.</li>\n<li>Instead of forcefully casting to a <code>HashMap</code>, you should supply a <code>HashMap</code> to the collector.</li>\n</ul>\n\n<p>First the correctly typed code, without caring about a NPE yet:</p>\n\n<pre><code>Stream&lt;Class&lt;?&gt;&gt; stream = Stream.of(ArrayList.class);\nHashMap&lt;Class&lt;?&gt;, List&lt;Class&lt;?&gt;&gt;&gt; hashMap = (HashMap&lt;Class&lt;?&gt;, List&lt;Class&lt;?&gt;&gt;&gt;)stream\n        .collect(Collectors.groupingBy(Class::getSuperclass));\n</code></pre>\n\n<p>Now we get rid of the forceful cast there, and instead do it correctly:</p>\n\n<pre><code>Stream&lt;Class&lt;?&gt;&gt; stream = Stream.of(ArrayList.class);\nHashMap&lt;Class&lt;?&gt;, List&lt;Class&lt;?&gt;&gt;&gt; hashMap = stream\n        .collect(Collectors.groupingBy(\n                Class::getSuperclass,\n                HashMap::new,\n                Collectors.toList()\n        ));\n</code></pre>\n\n<p>Here we replace the <code>groupingBy</code> which just takes a classifier, to one that takes a classifier, a supplier and a collector. Essentially this is the same as what there was before, but now it is correctly typed.</p>\n\n<p>You are indeed correct that in the javadoc it is not stated that it will throw a <code>NPE</code>, and I do not think it should be throwing one, as I am allowed to supply whatever map I want, and if my map allows <code>null</code> keys, then it should be allowed.</p>\n\n<p>I do not see any other way to do it simpler as of now, I'll try to look more into it.</p>\n"},{"tags":[],"owner":{"account_id":1369656,"reputation":17579,"user_id":1305253,"accept_rate":50,"display_name":"rolfl"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1395759338,"creation_date":1395758108,"answer_id":22637721,"question_id":22625065,"body_markdown":"I figured I would take a moment and try to digest this issue you have. I put together a SSCE for what I would expect if I did it manually, and what the `groupingBy` implementation actually does.\r\n\r\nI don&#39;t think this is an answer, but it is a &#39;wonder why it is a problem&#39; thing. Also, if you want, feel free to hack this code to have a null-friendly collector.\r\n\r\n**Edit**: A generic-friendly implementation:\r\n\r\n    /** groupingByNF - NullFriendly - allows you to specify your own Map and List supplier. */\r\n    private static final &lt;T,K&gt; Collector&lt;T,?,Map&lt;K,List&lt;T&gt;&gt;&gt; groupingByNF (\r\n            final Supplier&lt;Map&lt;K,List&lt;T&gt;&gt;&gt; mapsupplier,\r\n            final Supplier&lt;List&lt;T&gt;&gt; listsupplier,\r\n            final Function&lt;? super T,? extends K&gt; classifier) {\r\n\r\n        BiConsumer&lt;Map&lt;K,List&lt;T&gt;&gt;, T&gt; combiner = (m, v) -&gt; {\r\n            K key = classifier.apply(v);\r\n            List&lt;T&gt; store = m.get(key);\r\n            if (store == null) {\r\n                store = listsupplier.get();\r\n                m.put(key, store);\r\n            }\r\n            store.add(v);\r\n        };\r\n        \r\n        BinaryOperator&lt;Map&lt;K, List&lt;T&gt;&gt;&gt; finalizer = (left, right) -&gt; {\r\n            for (Map.Entry&lt;K, List&lt;T&gt;&gt; me : right.entrySet()) {\r\n                List&lt;T&gt; target = left.get(me.getKey());\r\n                if (target == null) {\r\n                    left.put(me.getKey(), me.getValue());\r\n                } else {\r\n                    target.addAll(me.getValue());\r\n                }\r\n            }\r\n            return left;\r\n        };\r\n        \r\n        return Collector.of(mapsupplier, combiner, finalizer);\r\n        \r\n    }\r\n    \r\n    /** groupingByNF - NullFriendly - otherwise similar to Java8 Collections.groupingBy */\r\n    private static final &lt;T,K&gt; Collector&lt;T,?,Map&lt;K,List&lt;T&gt;&gt;&gt; groupingByNF (Function&lt;? super T,? extends K&gt; classifier) {\r\n        return groupingByNF(HashMap::new, ArrayList::new, classifier);\r\n    }\r\n \r\n\r\nConsider this code (the code groups String values based on the String.length(), (or null if the input String is null)):\r\n\r\n    public static void main(String[] args) {\r\n        \r\n        String[] input = {&quot;a&quot;, &quot;a&quot;, &quot;&quot;, null, &quot;b&quot;, &quot;ab&quot;};\r\n        \r\n        // How we group the Strings\r\n        final Function&lt;String, Integer&gt; classifier = (a) -&gt; {return a != null ? Integer.valueOf(a.length()) : null;};\r\n        \r\n        // Manual implementation of a combiner that accumulates a string value based on the classifier.\r\n        // no special handling of null key values.\r\n        BiConsumer&lt;Map&lt;Integer,List&lt;String&gt;&gt;, String&gt; combiner = (m, v) -&gt; {\r\n            Integer key = classifier.apply(v);\r\n            List&lt;String&gt; store = m.get(key);\r\n            if (store == null) {\r\n                store = new ArrayList&lt;String&gt;();\r\n                m.put(key, store);\r\n            }\r\n            store.add(v);\r\n        };\r\n\r\n        // The finalizer merges two maps together (right into left)\r\n        // no special handling of null key values.\r\n        BinaryOperator&lt;Map&lt;Integer, List&lt;String&gt;&gt;&gt; finalizer = (left, right) -&gt; {\r\n            for (Map.Entry&lt;Integer, List&lt;String&gt;&gt; me : right.entrySet()) {\r\n                List&lt;String&gt; target = left.get(me.getKey());\r\n                if (target == null) {\r\n                    left.put(me.getKey(), me.getValue());\r\n                } else {\r\n                    target.addAll(me.getValue());\r\n                }\r\n            }\r\n            return left;\r\n        };\r\n\r\n        // Using a manual collector\r\n        Map&lt;Integer, List&lt;String&gt;&gt; manual = Arrays.stream(input).collect(Collector.of(HashMap::new, combiner, finalizer));\r\n\r\n        System.out.println(manual);\r\n\r\n        // using the groupingBy collector.        \r\n        Collector&lt;String, ?, Map&lt;Integer, List&lt;String&gt;&gt;&gt; collector = Collectors.groupingBy(classifier);\r\n        \r\n        Map&lt;Integer, List&lt;String&gt;&gt; result = Arrays.stream(input).collect(collector);\r\n        \r\n        System.out.println(result);\r\n    }\r\n\r\n\r\nThe above code produces the output:\r\n\r\n&gt;     {0=[], null=[null], 1=[a, a, b], 2=[ab]}\r\n&gt;     Exception in thread &quot;main&quot; java.lang.NullPointerException: element cannot be mapped to a null key\r\n&gt;     \tat java.util.Objects.requireNonNull(Objects.java:228)\r\n&gt;     \tat java.util.stream.Collectors.lambda$groupingBy$135(Collectors.java:907)\r\n&gt;     \tat java.util.stream.Collectors$$Lambda$10/258952499.accept(Unknown Source)\r\n&gt;     \tat java.util.stream.ReduceOps$3ReducingSink.accept(ReduceOps.java:169)\r\n&gt;     \tat java.util.Spliterators$ArraySpliterator.forEachRemaining(Spliterators.java:948)\r\n&gt;     \tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:512)\r\n&gt;     \tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:502)\r\n&gt;     \tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\r\n&gt;     \tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n&gt;     \tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:499)\r\n&gt;     \tat CollectGroupByNull.main(CollectGroupByNull.java:49)\r\n\r\n","title":"Collectors.groupingBy doesn&#39;t accept null keys","body":"<p>I figured I would take a moment and try to digest this issue you have. I put together a SSCE for what I would expect if I did it manually, and what the <code>groupingBy</code> implementation actually does.</p>\n\n<p>I don't think this is an answer, but it is a 'wonder why it is a problem' thing. Also, if you want, feel free to hack this code to have a null-friendly collector.</p>\n\n<p><strong>Edit</strong>: A generic-friendly implementation:</p>\n\n<pre><code>/** groupingByNF - NullFriendly - allows you to specify your own Map and List supplier. */\nprivate static final &lt;T,K&gt; Collector&lt;T,?,Map&lt;K,List&lt;T&gt;&gt;&gt; groupingByNF (\n        final Supplier&lt;Map&lt;K,List&lt;T&gt;&gt;&gt; mapsupplier,\n        final Supplier&lt;List&lt;T&gt;&gt; listsupplier,\n        final Function&lt;? super T,? extends K&gt; classifier) {\n\n    BiConsumer&lt;Map&lt;K,List&lt;T&gt;&gt;, T&gt; combiner = (m, v) -&gt; {\n        K key = classifier.apply(v);\n        List&lt;T&gt; store = m.get(key);\n        if (store == null) {\n            store = listsupplier.get();\n            m.put(key, store);\n        }\n        store.add(v);\n    };\n\n    BinaryOperator&lt;Map&lt;K, List&lt;T&gt;&gt;&gt; finalizer = (left, right) -&gt; {\n        for (Map.Entry&lt;K, List&lt;T&gt;&gt; me : right.entrySet()) {\n            List&lt;T&gt; target = left.get(me.getKey());\n            if (target == null) {\n                left.put(me.getKey(), me.getValue());\n            } else {\n                target.addAll(me.getValue());\n            }\n        }\n        return left;\n    };\n\n    return Collector.of(mapsupplier, combiner, finalizer);\n\n}\n\n/** groupingByNF - NullFriendly - otherwise similar to Java8 Collections.groupingBy */\nprivate static final &lt;T,K&gt; Collector&lt;T,?,Map&lt;K,List&lt;T&gt;&gt;&gt; groupingByNF (Function&lt;? super T,? extends K&gt; classifier) {\n    return groupingByNF(HashMap::new, ArrayList::new, classifier);\n}\n</code></pre>\n\n<p>Consider this code (the code groups String values based on the String.length(), (or null if the input String is null)):</p>\n\n<pre><code>public static void main(String[] args) {\n\n    String[] input = {\"a\", \"a\", \"\", null, \"b\", \"ab\"};\n\n    // How we group the Strings\n    final Function&lt;String, Integer&gt; classifier = (a) -&gt; {return a != null ? Integer.valueOf(a.length()) : null;};\n\n    // Manual implementation of a combiner that accumulates a string value based on the classifier.\n    // no special handling of null key values.\n    BiConsumer&lt;Map&lt;Integer,List&lt;String&gt;&gt;, String&gt; combiner = (m, v) -&gt; {\n        Integer key = classifier.apply(v);\n        List&lt;String&gt; store = m.get(key);\n        if (store == null) {\n            store = new ArrayList&lt;String&gt;();\n            m.put(key, store);\n        }\n        store.add(v);\n    };\n\n    // The finalizer merges two maps together (right into left)\n    // no special handling of null key values.\n    BinaryOperator&lt;Map&lt;Integer, List&lt;String&gt;&gt;&gt; finalizer = (left, right) -&gt; {\n        for (Map.Entry&lt;Integer, List&lt;String&gt;&gt; me : right.entrySet()) {\n            List&lt;String&gt; target = left.get(me.getKey());\n            if (target == null) {\n                left.put(me.getKey(), me.getValue());\n            } else {\n                target.addAll(me.getValue());\n            }\n        }\n        return left;\n    };\n\n    // Using a manual collector\n    Map&lt;Integer, List&lt;String&gt;&gt; manual = Arrays.stream(input).collect(Collector.of(HashMap::new, combiner, finalizer));\n\n    System.out.println(manual);\n\n    // using the groupingBy collector.        \n    Collector&lt;String, ?, Map&lt;Integer, List&lt;String&gt;&gt;&gt; collector = Collectors.groupingBy(classifier);\n\n    Map&lt;Integer, List&lt;String&gt;&gt; result = Arrays.stream(input).collect(collector);\n\n    System.out.println(result);\n}\n</code></pre>\n\n<p>The above code produces the output:</p>\n\n<blockquote>\n<pre><code>{0=[], null=[null], 1=[a, a, b], 2=[ab]}\nException in thread \"main\" java.lang.NullPointerException: element cannot be mapped to a null key\n  at java.util.Objects.requireNonNull(Objects.java:228)\n  at java.util.stream.Collectors.lambda$groupingBy$135(Collectors.java:907)\n  at java.util.stream.Collectors$$Lambda$10/258952499.accept(Unknown Source)\n  at java.util.stream.ReduceOps$3ReducingSink.accept(ReduceOps.java:169)\n  at java.util.Spliterators$ArraySpliterator.forEachRemaining(Spliterators.java:948)\n  at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:512)\n  at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:502)\n  at java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n  at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n  at java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:499)\n  at CollectGroupByNull.main(CollectGroupByNull.java:49)\n</code></pre>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":2650998,"reputation":29491,"user_id":3411681,"accept_rate":61,"display_name":"Marcelo Glasberg"},"down_vote_count":0,"up_vote_count":18,"is_accepted":true,"score":18,"last_activity_date":1395800467,"creation_date":1395800043,"answer_id":22650233,"question_id":22625065,"body_markdown":"For the first question, I agree with skiwi that it shouldn&#39;t be throwing a `NPE`.  I hope they will change that (or else at least add it to the javadoc). Meanwhile, to answer the second question I decided to use `Collectors.toMap` instead of `Collectors.groupingBy`:\r\n\r\n    Stream&lt;Class&lt;?&gt;&gt; stream = Stream.of(ArrayList.class);\r\n\r\n    Map&lt;Class&lt;?&gt;, List&lt;Class&lt;?&gt;&gt;&gt; map = stream.collect(\r\n        Collectors.toMap(\r\n            Class::getSuperclass,\r\n            Collections::singletonList,\r\n            (List&lt;Class&lt;?&gt;&gt; oldList, List&lt;Class&lt;?&gt;&gt; newEl) -&gt; {\r\n            List&lt;Class&lt;?&gt;&gt; newList = new ArrayList&lt;&gt;(oldList.size() + 1);\r\n            newList.addAll(oldList);\r\n            newList.addAll(newEl);\r\n            return newList;\r\n            }));\r\n\r\n                    \r\n  \r\nOr, encapsulating it:                    \r\n           \r\n    /** Like Collectors.groupingBy, but accepts null keys. */\r\n    public static &lt;T, A&gt; Collector&lt;T, ?, Map&lt;A, List&lt;T&gt;&gt;&gt;\r\n    groupingBy_WithNullKeys(Function&lt;? super T, ? extends A&gt; classifier) {\r\n        return Collectors.toMap(\r\n            classifier,\r\n            Collections::singletonList,\r\n            (List&lt;T&gt; oldList, List&lt;T&gt; newEl) -&gt; {\r\n                List&lt;T&gt; newList = new ArrayList&lt;&gt;(oldList.size() + 1);\r\n                newList.addAll(oldList);\r\n                newList.addAll(newEl);\r\n                return newList;\r\n                });\r\n        }\r\n\r\nAnd use it like this:\r\n\r\n    Stream&lt;Class&lt;?&gt;&gt; stream = Stream.of(ArrayList.class);\r\n    Map&lt;Class&lt;?&gt;, List&lt;Class&lt;?&gt;&gt;&gt; map = stream.collect(groupingBy_WithNullKeys(Class::getSuperclass));\r\n\r\nPlease note rolfl gave another, more complicated answer, which allows you to specify your own Map and List supplier. I haven&#39;t tested it. \r\n\r\n","title":"Collectors.groupingBy doesn&#39;t accept null keys","body":"<p>For the first question, I agree with skiwi that it shouldn't be throwing a <code>NPE</code>.  I hope they will change that (or else at least add it to the javadoc). Meanwhile, to answer the second question I decided to use <code>Collectors.toMap</code> instead of <code>Collectors.groupingBy</code>:</p>\n\n<pre><code>Stream&lt;Class&lt;?&gt;&gt; stream = Stream.of(ArrayList.class);\n\nMap&lt;Class&lt;?&gt;, List&lt;Class&lt;?&gt;&gt;&gt; map = stream.collect(\n    Collectors.toMap(\n        Class::getSuperclass,\n        Collections::singletonList,\n        (List&lt;Class&lt;?&gt;&gt; oldList, List&lt;Class&lt;?&gt;&gt; newEl) -&gt; {\n        List&lt;Class&lt;?&gt;&gt; newList = new ArrayList&lt;&gt;(oldList.size() + 1);\n        newList.addAll(oldList);\n        newList.addAll(newEl);\n        return newList;\n        }));\n</code></pre>\n\n<p>Or, encapsulating it:                    </p>\n\n<pre><code>/** Like Collectors.groupingBy, but accepts null keys. */\npublic static &lt;T, A&gt; Collector&lt;T, ?, Map&lt;A, List&lt;T&gt;&gt;&gt;\ngroupingBy_WithNullKeys(Function&lt;? super T, ? extends A&gt; classifier) {\n    return Collectors.toMap(\n        classifier,\n        Collections::singletonList,\n        (List&lt;T&gt; oldList, List&lt;T&gt; newEl) -&gt; {\n            List&lt;T&gt; newList = new ArrayList&lt;&gt;(oldList.size() + 1);\n            newList.addAll(oldList);\n            newList.addAll(newEl);\n            return newList;\n            });\n    }\n</code></pre>\n\n<p>And use it like this:</p>\n\n<pre><code>Stream&lt;Class&lt;?&gt;&gt; stream = Stream.of(ArrayList.class);\nMap&lt;Class&lt;?&gt;, List&lt;Class&lt;?&gt;&gt;&gt; map = stream.collect(groupingBy_WithNullKeys(Class::getSuperclass));\n</code></pre>\n\n<p>Please note rolfl gave another, more complicated answer, which allows you to specify your own Map and List supplier. I haven't tested it. </p>\n"},{"tags":[],"owner":{"account_id":5089821,"reputation":801,"user_id":4083228,"display_name":"Erling"},"down_vote_count":0,"up_vote_count":80,"is_accepted":false,"score":80,"last_activity_date":1411733600,"creation_date":1411733600,"answer_id":26059307,"question_id":22625065,"body_markdown":"I had the same kind of problem.\r\nThis failed, because groupingBy performs Objects.requireNonNull on the value returned from the classifier:\r\n\r\n        Map&lt;Long, List&lt;ClaimEvent&gt;&gt; map = events.stream()\r\n          .filter(event -&gt; eventTypeIds.contains(event.getClaimEventTypeId()))\r\n          .collect(groupingBy(ClaimEvent::getSubprocessId));\r\n\r\nUsing Optional, this works:\r\n\r\n        Map&lt;Optional&lt;Long&gt;, List&lt;ClaimEvent&gt;&gt; map = events.stream()\r\n          .filter(event -&gt; eventTypeIds.contains(event.getClaimEventTypeId()))\r\n          .collect(groupingBy(event -&gt; Optional.ofNullable(event.getSubprocessId())));\r\n","title":"Collectors.groupingBy doesn&#39;t accept null keys","body":"<p>I had the same kind of problem.\nThis failed, because groupingBy performs Objects.requireNonNull on the value returned from the classifier:</p>\n\n<pre><code>    Map&lt;Long, List&lt;ClaimEvent&gt;&gt; map = events.stream()\n      .filter(event -&gt; eventTypeIds.contains(event.getClaimEventTypeId()))\n      .collect(groupingBy(ClaimEvent::getSubprocessId));\n</code></pre>\n\n<p>Using Optional, this works:</p>\n\n<pre><code>    Map&lt;Optional&lt;Long&gt;, List&lt;ClaimEvent&gt;&gt; map = events.stream()\n      .filter(event -&gt; eventTypeIds.contains(event.getClaimEventTypeId()))\n      .collect(groupingBy(event -&gt; Optional.ofNullable(event.getSubprocessId())));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2427872,"reputation":299,"user_id":2119436,"display_name":"Ilan M"},"down_vote_count":15,"up_vote_count":23,"is_accepted":false,"score":8,"last_activity_date":1593506681,"creation_date":1440515317,"answer_id":32207664,"question_id":22625065,"body_markdown":"## Use filter before groupingBy##\r\n\r\n&lt;p&gt;Filter out the null instances before groupingBy.&lt;/P&gt;\r\nHere is an example\r\n\r\n    MyObjectlist.stream()\r\n      .filter(p -&gt; p.getSomeInstance() != null)\r\n      .collect(Collectors.groupingBy(MyObject::getSomeInstance));","title":"Collectors.groupingBy doesn&#39;t accept null keys","body":"<h2>Use filter before groupingBy##</h2>\n<p>Filter out the null instances before groupingBy.</P>\nHere is an example\n<pre><code>MyObjectlist.stream()\n  .filter(p -&gt; p.getSomeInstance() != null)\n  .collect(Collectors.groupingBy(MyObject::getSomeInstance));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2190504,"reputation":1438,"user_id":1937681,"accept_rate":62,"display_name":"blackr1234"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1630571388,"creation_date":1630571388,"answer_id":69026735,"question_id":22625065,"body_markdown":"You can use `Stream#collect(Supplier&lt;R&gt; supplier, BiConsumer&lt;R,? super T&gt; accumulator, BiConsumer&lt;R,R&gt; combiner)` instead.\r\n\r\nhttps://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#collect-java.util.function.Supplier-java.util.function.BiConsumer-java.util.function.BiConsumer-\r\n\r\n---\r\n\r\n### When you have a list of objects of a self-defined POJO type:\r\n\r\n```java\r\npackage code;\r\n\r\nimport static java.util.Arrays.asList;\r\nimport static java.util.stream.Collectors.toList;\r\nimport static lombok.AccessLevel.PRIVATE;\r\n\r\nimport java.util.Arrays;\r\nimport java.util.HashMap;\r\nimport java.util.List;\r\nimport java.util.Map;\r\nimport java.util.stream.Stream;\r\n\r\nimport lombok.Data;\r\nimport lombok.experimental.Accessors;\r\nimport lombok.experimental.FieldDefaults;\r\n\r\npublic class MainGroupListIntoMap {\r\n\r\n    public static void main(String[] args) throws Exception {\r\n\r\n        final List&lt;Item&gt; items = Arrays.asList(\r\n            new Item().setName(&quot;One&quot;).setType(&quot;1&quot;),\r\n            new Item().setName(&quot;Two&quot;).setType(&quot;1&quot;),\r\n            new Item().setName(&quot;Three&quot;).setType(&quot;1&quot;),\r\n            new Item().setName(&quot;Four&quot;).setType(&quot;2&quot;),\r\n            new Item().setName(&quot;Same&quot;).setType(null),\r\n            new Item().setName(&quot;Same&quot;).setType(null),\r\n            new Item().setName(null).setType(null)\r\n        );\r\n\r\n        final Map&lt;String, List&lt;Item&gt;&gt; grouped = items\r\n                .stream()\r\n                .collect(HashMap::new,\r\n                         (m, v) -&gt; m.merge(v.getType(),\r\n                                           asList(v),\r\n                                           (oldList, newList) -&gt; Stream.concat(oldList.stream(),\r\n                                                                               newList.stream())\r\n                                                                       .collect(toList())),\r\n                         HashMap::putAll);\r\n\r\n        grouped.entrySet().forEach(System.out::println);\r\n    }\r\n}\r\n\r\n@Data\r\n@Accessors(chain = true)\r\n@FieldDefaults(level = PRIVATE)\r\nclass Item {\r\n    String name;\r\n    String type;\r\n}\r\n```\r\n\r\n### Output:\r\n\r\n```\r\nnull=[Item(name=Same, type=null), Item(name=Same, type=null), Item(name=null, type=null)]\r\n1=[Item(name=One, type=1), Item(name=Two, type=1), Item(name=Three, type=1)]\r\n2=[Item(name=Four, type=2)]\r\n```\r\n\r\n---\r\n\r\n### In your case:\r\n\r\n```java\r\npackage code;\r\n\r\nimport static java.util.Arrays.asList;\r\nimport static java.util.stream.Collectors.toList;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.HashMap;\r\nimport java.util.List;\r\nimport java.util.Map;\r\nimport java.util.stream.Stream;\r\n\r\npublic class MainGroupListIntoMap2 {\r\n\r\n    public static void main(String[] args) throws Exception {\r\n\r\n        group(asList(ArrayList.class, List.class))\r\n            .entrySet()\r\n            .forEach(System.out::println);\r\n    }\r\n\r\n    private static Map&lt;Class&lt;?&gt;, List&lt;Class&lt;?&gt;&gt;&gt; group(List&lt;Class&lt;?&gt;&gt; classes) {\r\n        final Map&lt;Class&lt;?&gt;, List&lt;Class&lt;?&gt;&gt;&gt; grouped = classes\r\n                .stream()\r\n                .collect(HashMap::new,\r\n                         (m, v) -&gt; m.merge(v.getSuperclass(),\r\n                                           asList(v),\r\n                                           (oldList, newList) -&gt; Stream.concat(oldList.stream(),\r\n                                                                               newList.stream())\r\n                                                                       .collect(toList())),\r\n                         HashMap::putAll);\r\n\r\n        return grouped;\r\n    }\r\n}\r\n```\r\n\r\n### Output:\r\n\r\n```\r\nnull=[interface java.util.List]\r\nclass java.util.AbstractList=[class java.util.ArrayList]\r\n```","title":"Collectors.groupingBy doesn&#39;t accept null keys","body":"<p>You can use <code>Stream#collect(Supplier&lt;R&gt; supplier, BiConsumer&lt;R,? super T&gt; accumulator, BiConsumer&lt;R,R&gt; combiner)</code> instead.</p>\n<p><a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#collect-java.util.function.Supplier-java.util.function.BiConsumer-java.util.function.BiConsumer-\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#collect-java.util.function.Supplier-java.util.function.BiConsumer-java.util.function.BiConsumer-</a></p>\n<hr />\n<h3>When you have a list of objects of a self-defined POJO type:</h3>\n<pre class=\"lang-java prettyprint-override\"><code>package code;\n\nimport static java.util.Arrays.asList;\nimport static java.util.stream.Collectors.toList;\nimport static lombok.AccessLevel.PRIVATE;\n\nimport java.util.Arrays;\nimport java.util.HashMap;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.stream.Stream;\n\nimport lombok.Data;\nimport lombok.experimental.Accessors;\nimport lombok.experimental.FieldDefaults;\n\npublic class MainGroupListIntoMap {\n\n    public static void main(String[] args) throws Exception {\n\n        final List&lt;Item&gt; items = Arrays.asList(\n            new Item().setName(&quot;One&quot;).setType(&quot;1&quot;),\n            new Item().setName(&quot;Two&quot;).setType(&quot;1&quot;),\n            new Item().setName(&quot;Three&quot;).setType(&quot;1&quot;),\n            new Item().setName(&quot;Four&quot;).setType(&quot;2&quot;),\n            new Item().setName(&quot;Same&quot;).setType(null),\n            new Item().setName(&quot;Same&quot;).setType(null),\n            new Item().setName(null).setType(null)\n        );\n\n        final Map&lt;String, List&lt;Item&gt;&gt; grouped = items\n                .stream()\n                .collect(HashMap::new,\n                         (m, v) -&gt; m.merge(v.getType(),\n                                           asList(v),\n                                           (oldList, newList) -&gt; Stream.concat(oldList.stream(),\n                                                                               newList.stream())\n                                                                       .collect(toList())),\n                         HashMap::putAll);\n\n        grouped.entrySet().forEach(System.out::println);\n    }\n}\n\n@Data\n@Accessors(chain = true)\n@FieldDefaults(level = PRIVATE)\nclass Item {\n    String name;\n    String type;\n}\n</code></pre>\n<h3>Output:</h3>\n<pre><code>null=[Item(name=Same, type=null), Item(name=Same, type=null), Item(name=null, type=null)]\n1=[Item(name=One, type=1), Item(name=Two, type=1), Item(name=Three, type=1)]\n2=[Item(name=Four, type=2)]\n</code></pre>\n<hr />\n<h3>In your case:</h3>\n<pre class=\"lang-java prettyprint-override\"><code>package code;\n\nimport static java.util.Arrays.asList;\nimport static java.util.stream.Collectors.toList;\n\nimport java.util.ArrayList;\nimport java.util.HashMap;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.stream.Stream;\n\npublic class MainGroupListIntoMap2 {\n\n    public static void main(String[] args) throws Exception {\n\n        group(asList(ArrayList.class, List.class))\n            .entrySet()\n            .forEach(System.out::println);\n    }\n\n    private static Map&lt;Class&lt;?&gt;, List&lt;Class&lt;?&gt;&gt;&gt; group(List&lt;Class&lt;?&gt;&gt; classes) {\n        final Map&lt;Class&lt;?&gt;, List&lt;Class&lt;?&gt;&gt;&gt; grouped = classes\n                .stream()\n                .collect(HashMap::new,\n                         (m, v) -&gt; m.merge(v.getSuperclass(),\n                                           asList(v),\n                                           (oldList, newList) -&gt; Stream.concat(oldList.stream(),\n                                                                               newList.stream())\n                                                                       .collect(toList())),\n                         HashMap::putAll);\n\n        return grouped;\n    }\n}\n</code></pre>\n<h3>Output:</h3>\n<pre><code>null=[interface java.util.List]\nclass java.util.AbstractList=[class java.util.ArrayList]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16992450,"reputation":21,"user_id":12291718,"display_name":"Florimon van Putte"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689865657,"creation_date":1689854308,"answer_id":76729622,"question_id":22625065,"body_markdown":"This is what I settled on:\r\n\r\n\r\n```\r\nimport org.junit.jupiter.api.Test;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.Collection;\r\nimport java.util.HashMap;\r\nimport java.util.HashSet;\r\nimport java.util.List;\r\nimport java.util.Map;\r\nimport java.util.Set;\r\nimport java.util.function.Function;\r\nimport java.util.function.Supplier;\r\nimport java.util.stream.Collector;\r\nimport java.util.stream.Collectors;\r\n\r\nimport static org.junit.jupiter.api.Assertions.assertEquals;\r\n\r\nclass CollectorTest {\r\n\r\n    record Pair(Integer left, Integer right) {}\r\n    List&lt;Pair&gt; pairs = List.of(new Pair(null, 1), new Pair(null, 2),\r\n                               new Pair(1, 10),   new Pair(1, 11),\r\n                               new Pair(2, 20),   new Pair(2, 21));\r\n\r\n    @Test\r\n    void testToMapOfSets() {\r\n        Map&lt;Integer, Set&lt;Integer&gt;&gt; map = pairs.stream().collect(CollectorTest.toMapOfSets(Pair::left, Pair::right));\r\n        assertEquals(Set.of(1, 2),   map.get(null));\r\n        assertEquals(Set.of(10, 11), map.get(1));\r\n        assertEquals(Set.of(20, 21), map.get(2));\r\n    }\r\n\r\n    @Test\r\n    void testMapOfLists() {\r\n        Map&lt;Integer, List&lt;Integer&gt;&gt; map = pairs.stream().collect(CollectorTest.toMapOfLists(Pair::left, Pair::right));\r\n        assertEquals(List.of(1,2),   map.get(null));\r\n        assertEquals(List.of(10,11), map.get(1));\r\n        assertEquals(List.of(20,21), map.get(2));\r\n    }\r\n\r\n    public static &lt;T, K, U&gt; Collector&lt;T, ?, Map&lt;K, Set&lt;U&gt;&gt;&gt; toMapOfSets(Function&lt;? super T, ? extends K&gt; keyMapper,\r\n                                                                        Function&lt;? super T, ? extends U&gt; valueMapper) {\r\n        return toMapOfCollections(keyMapper, valueMapper, HashSet::new);\r\n    }\r\n\r\n    public static &lt;T, K, U&gt; Collector&lt;T, ?, Map&lt;K,List&lt;U&gt;&gt;&gt; toMapOfLists(Function&lt;? super T, ? extends K&gt; keyMapper,\r\n                                                                         Function&lt;? super T, ? extends U&gt; valueMapper) {\r\n        return toMapOfCollections(keyMapper, valueMapper, ArrayList::new);\r\n    }\r\n\r\n    private static &lt;T, K, U, C extends Collection&lt;U&gt;&gt;\r\n    Collector&lt;T, ?, Map&lt;K,C&gt;&gt; toMapOfCollections(Function&lt;? super T, ? extends K&gt; keyMapper,\r\n                                                 Function&lt;? super T, ? extends U&gt; valueMapper,\r\n                                                 Supplier&lt;C&gt; collectionSupplier) {\r\n        return Collectors.toMap(keyMapper, valueMapper.andThen(value -&gt; {\r\n            C collection = collectionSupplier.get();\r\n            collection.add(value);\r\n            return collection;\r\n        }), (collection1, collection2) -&gt; {\r\n            collection1.addAll(collection2);\r\n            return collection1;\r\n        }, HashMap::new);\r\n    }\r\n}\r\n```","title":"Collectors.groupingBy doesn&#39;t accept null keys","body":"<p>This is what I settled on:</p>\n<pre><code>import org.junit.jupiter.api.Test;\n\nimport java.util.ArrayList;\nimport java.util.Collection;\nimport java.util.HashMap;\nimport java.util.HashSet;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.Set;\nimport java.util.function.Function;\nimport java.util.function.Supplier;\nimport java.util.stream.Collector;\nimport java.util.stream.Collectors;\n\nimport static org.junit.jupiter.api.Assertions.assertEquals;\n\nclass CollectorTest {\n\n    record Pair(Integer left, Integer right) {}\n    List&lt;Pair&gt; pairs = List.of(new Pair(null, 1), new Pair(null, 2),\n                               new Pair(1, 10),   new Pair(1, 11),\n                               new Pair(2, 20),   new Pair(2, 21));\n\n    @Test\n    void testToMapOfSets() {\n        Map&lt;Integer, Set&lt;Integer&gt;&gt; map = pairs.stream().collect(CollectorTest.toMapOfSets(Pair::left, Pair::right));\n        assertEquals(Set.of(1, 2),   map.get(null));\n        assertEquals(Set.of(10, 11), map.get(1));\n        assertEquals(Set.of(20, 21), map.get(2));\n    }\n\n    @Test\n    void testMapOfLists() {\n        Map&lt;Integer, List&lt;Integer&gt;&gt; map = pairs.stream().collect(CollectorTest.toMapOfLists(Pair::left, Pair::right));\n        assertEquals(List.of(1,2),   map.get(null));\n        assertEquals(List.of(10,11), map.get(1));\n        assertEquals(List.of(20,21), map.get(2));\n    }\n\n    public static &lt;T, K, U&gt; Collector&lt;T, ?, Map&lt;K, Set&lt;U&gt;&gt;&gt; toMapOfSets(Function&lt;? super T, ? extends K&gt; keyMapper,\n                                                                        Function&lt;? super T, ? extends U&gt; valueMapper) {\n        return toMapOfCollections(keyMapper, valueMapper, HashSet::new);\n    }\n\n    public static &lt;T, K, U&gt; Collector&lt;T, ?, Map&lt;K,List&lt;U&gt;&gt;&gt; toMapOfLists(Function&lt;? super T, ? extends K&gt; keyMapper,\n                                                                         Function&lt;? super T, ? extends U&gt; valueMapper) {\n        return toMapOfCollections(keyMapper, valueMapper, ArrayList::new);\n    }\n\n    private static &lt;T, K, U, C extends Collection&lt;U&gt;&gt;\n    Collector&lt;T, ?, Map&lt;K,C&gt;&gt; toMapOfCollections(Function&lt;? super T, ? extends K&gt; keyMapper,\n                                                 Function&lt;? super T, ? extends U&gt; valueMapper,\n                                                 Supplier&lt;C&gt; collectionSupplier) {\n        return Collectors.toMap(keyMapper, valueMapper.andThen(value -&gt; {\n            C collection = collectionSupplier.get();\n            collection.add(value);\n            return collection;\n        }), (collection1, collection2) -&gt; {\n            collection1.addAll(collection2);\n            return collection1;\n        }, HashMap::new);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":2650998,"reputation":29491,"user_id":3411681,"accept_rate":61,"display_name":"Marcelo Glasberg"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":61523,"favorite_count":0,"down_vote_count":0,"up_vote_count":70,"accepted_answer_id":22650233,"answer_count":8,"score":70,"last_activity_date":1689865657,"creation_date":1395719125,"question_id":22625065,"body_markdown":"In Java 8, this works:\r\n\r\n    Stream&lt;Class&gt; stream = Stream.of(ArrayList.class);\r\n    HashMap&lt;Class, List&lt;Class&gt;&gt; map = (HashMap)stream.collect(Collectors.groupingBy(Class::getSuperclass));\r\n\r\nBut this doesn&#39;t:\r\n\r\n    Stream&lt;Class&gt; stream = Stream.of(List.class);\r\n    HashMap&lt;Class, List&lt;Class&gt;&gt; map = (HashMap)stream.collect(Collectors.groupingBy(Class::getSuperclass));\r\n\r\nMaps allows a null key, and List.class.getSuperclass() returns null. But Collectors.groupingBy emits a NPE, at Collectors.java, line 907:\r\n\r\n    K key = Objects.requireNonNull(classifier.apply(t), &quot;element cannot be mapped to a null key&quot;); \r\n\r\nIt works if I create my own collector, with this line changed to:\r\n\r\n    K key = classifier.apply(t);  \r\n\r\nMy questions are:\r\n\r\n1) The Javadoc of Collectors.groupingBy doesn&#39;t say it shouldn&#39;t map a null key. Is this behavior necessary for some reason?\r\n\r\n2) Is there another, easier way, to accept a null key, without having to create my own collector?\r\n","title":"Collectors.groupingBy doesn&#39;t accept null keys","body":"<p>In Java 8, this works:</p>\n\n<pre><code>Stream&lt;Class&gt; stream = Stream.of(ArrayList.class);\nHashMap&lt;Class, List&lt;Class&gt;&gt; map = (HashMap)stream.collect(Collectors.groupingBy(Class::getSuperclass));\n</code></pre>\n\n<p>But this doesn't:</p>\n\n<pre><code>Stream&lt;Class&gt; stream = Stream.of(List.class);\nHashMap&lt;Class, List&lt;Class&gt;&gt; map = (HashMap)stream.collect(Collectors.groupingBy(Class::getSuperclass));\n</code></pre>\n\n<p>Maps allows a null key, and List.class.getSuperclass() returns null. But Collectors.groupingBy emits a NPE, at Collectors.java, line 907:</p>\n\n<pre><code>K key = Objects.requireNonNull(classifier.apply(t), \"element cannot be mapped to a null key\"); \n</code></pre>\n\n<p>It works if I create my own collector, with this line changed to:</p>\n\n<pre><code>K key = classifier.apply(t);  \n</code></pre>\n\n<p>My questions are:</p>\n\n<p>1) The Javadoc of Collectors.groupingBy doesn't say it shouldn't map a null key. Is this behavior necessary for some reason?</p>\n\n<p>2) Is there another, easier way, to accept a null key, without having to create my own collector?</p>\n"},{"tags":["java","scala"],"answers":[{"tags":[],"owner":{"account_id":3136832,"reputation":365,"user_id":2653184,"display_name":"mhei"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1689865606,"creation_date":1689865606,"answer_id":76731277,"question_id":76121875,"body_markdown":"Try using this 3 options\r\n\r\n    --add-opens=java.base/java.util=ALL-UNNAMED\r\n    --add-opens=java.base/java.lang=ALL-UNNAMED\r\n    --add-opens=java.base/java.lang.invoke=ALL-UNNAMED\r\n\r\nthis worked for me with an error message very similar to yours for jdk 17","title":"java.lang.reflect.InaccessibleObjectException: Unable to make field protected transient int java.util.AbstractList.modCount accessible","body":"<p>Try using this 3 options</p>\n<pre><code>--add-opens=java.base/java.util=ALL-UNNAMED\n--add-opens=java.base/java.lang=ALL-UNNAMED\n--add-opens=java.base/java.lang.invoke=ALL-UNNAMED\n</code></pre>\n<p>this worked for me with an error message very similar to yours for jdk 17</p>\n"}],"owner":{"account_id":19747968,"reputation":67,"user_id":14459924,"display_name":"Bender Rodriguez"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":954,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":76731277,"answer_count":1,"score":4,"last_activity_date":1689865606,"creation_date":1682607457,"question_id":76121875,"body_markdown":"I am getting the issue below:\r\n\r\n```\r\njava.lang.reflect.InaccessibleObjectException: Unable to make field protected transient int java.util.AbstractList.modCount accessible: module java.base does not &quot;opens java.util&quot; to unnamed module @43393097\r\n    at java.base/java.lang.reflect.AccessibleObject.checkCanSetAccessible(AccessibleObject.java:354)\r\n```\r\n\r\nThe fix is widely-documented on the net: use JVM options\r\n\r\n--illegal-access=permit \r\n\r\nor\r\n\r\n--add-opens=java.base/java.util=ALL-UNNAMED. \r\n\r\nThe former was removed after JDK 11. I started with JDK 17 and have now tried both Amazon and Open JDK 11. Neither of these options used with a JDK version 11 eliminates the error, nor does using both at once. I&#39;ve tried every permutation (and also using --illegal-access=warn).\r\n\r\nI&#39;m launching the app like this:\r\n\r\n```\r\nme in ~/dev/project on branch main &gt; java --version\r\nopenjdk 11.0.19 2023-04-18 LTS\r\nOpenJDK Runtime Environment Corretto-11.0.19.7.1 (build 11.0.19+7-LTS)\r\nOpenJDK 64-Bit Server VM Corretto-11.0.19.7.1 (build 11.0.19+7-LTS, mixed mode)\r\nme in ~/dev/project on branch main &gt;                          \r\nme in ~/dev/project on branch main &gt; java -jar --add-opens=java.base/java.util=ALL-UNNAMED out/server/assembly.dest/out.jar \r\n```\r\n\r\nEverything I read suggests that using --add-opens=java.base... will fix the issue on JDK11. It does not.\r\n\r\nUsing --illegal-access=permit, either along or with --add-opens, also doesn&#39;t work.\r\n\r\nThere&#39;s no chance the way a jar is *built* can influence this, right? It&#39;s strictly a runtime permissions thing.","title":"java.lang.reflect.InaccessibleObjectException: Unable to make field protected transient int java.util.AbstractList.modCount accessible","body":"<p>I am getting the issue below:</p>\n<pre><code>java.lang.reflect.InaccessibleObjectException: Unable to make field protected transient int java.util.AbstractList.modCount accessible: module java.base does not &quot;opens java.util&quot; to unnamed module @43393097\n    at java.base/java.lang.reflect.AccessibleObject.checkCanSetAccessible(AccessibleObject.java:354)\n</code></pre>\n<p>The fix is widely-documented on the net: use JVM options</p>\n<p>--illegal-access=permit</p>\n<p>or</p>\n<p>--add-opens=java.base/java.util=ALL-UNNAMED.</p>\n<p>The former was removed after JDK 11. I started with JDK 17 and have now tried both Amazon and Open JDK 11. Neither of these options used with a JDK version 11 eliminates the error, nor does using both at once. I've tried every permutation (and also using --illegal-access=warn).</p>\n<p>I'm launching the app like this:</p>\n<pre><code>me in ~/dev/project on branch main &gt; java --version\nopenjdk 11.0.19 2023-04-18 LTS\nOpenJDK Runtime Environment Corretto-11.0.19.7.1 (build 11.0.19+7-LTS)\nOpenJDK 64-Bit Server VM Corretto-11.0.19.7.1 (build 11.0.19+7-LTS, mixed mode)\nme in ~/dev/project on branch main &gt;                          \nme in ~/dev/project on branch main &gt; java -jar --add-opens=java.base/java.util=ALL-UNNAMED out/server/assembly.dest/out.jar \n</code></pre>\n<p>Everything I read suggests that using --add-opens=java.base... will fix the issue on JDK11. It does not.</p>\n<p>Using --illegal-access=permit, either along or with --add-opens, also doesn't work.</p>\n<p>There's no chance the way a jar is <em>built</em> can influence this, right? It's strictly a runtime permissions thing.</p>\n"},{"tags":["java","junit","junit4"],"comments":[{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1689865869,"post_id":76731271,"comment_id":135276815,"body_markdown":"I don&#39;t have a JUnit 4 handy to test, but I&#39;m about 99% sure that `@Before` should work just fine with `@ParameterizedTest`. Are you sure the problem isn&#39;t somewhere else?","body":"I don&#39;t have a JUnit 4 handy to test, but I&#39;m about 99% sure that <code>@Before</code> should work just fine with <code>@ParameterizedTest</code>. Are you sure the problem isn&#39;t somewhere else?"},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":1,"creation_date":1689867011,"post_id":76731271,"comment_id":135277142,"body_markdown":"(i) is `ParameterizedTest` part of JUnit 4? (ii) [javadoc](https://junit.org/junit4/javadoc/latest/) of `Before`: &quot;Annotating a public void method with @Before causes that method to be run before the [Test](https://junit.org/junit4/javadoc/latest/org/junit/Test.html) method.&quot; (no `ParameterizedTest` mentioned/linked)","body":"(i) is <code>ParameterizedTest</code> part of JUnit 4? (ii) <a href=\"https://junit.org/junit4/javadoc/latest/\" rel=\"nofollow noreferrer\">javadoc</a> of <code>Before</code>: &quot;Annotating a public void method with @Before causes that method to be run before the <a href=\"https://junit.org/junit4/javadoc/latest/org/junit/Test.html\" rel=\"nofollow noreferrer\">Test</a> method.&quot; (no <code>ParameterizedTest</code> mentioned/linked)"},{"owner":{"account_id":10777133,"reputation":7282,"user_id":7928721,"display_name":"samabcde"},"score":3,"creation_date":1689867819,"post_id":76731271,"comment_id":135277348,"body_markdown":"Any reason you use ParameterizedTest from junit 5 with junit 4?\nUsing `org.junit.jupiter.api.BeforeEach` with `org.junit.jupiter.api.Test;` is one of the way to fix the problem","body":"Any reason you use ParameterizedTest from junit 5 with junit 4? Using <code>org.junit.jupiter.api.BeforeEach</code> with <code>org.junit.jupiter.api.Test;</code> is one of the way to fix the problem"},{"owner":{"account_id":213468,"reputation":103489,"user_id":466862,"display_name":"Mark Rotteveel"},"score":3,"creation_date":1689870514,"post_id":76731271,"comment_id":135277920,"body_markdown":"[Parameterized tests in JUnit 4](https://github.com/junit-team/junit4/wiki/Parameterized-tests) work vastly different from JUnit 5. You cannot use JUnit 5 annotations with JUnit 4 like you do in your question and expect it to work. Your test is probably run by a JUnit 5 runner, which doesn&#39;t do anything with `@Before` (the JUnit 5 equivalent is `@BeforeEach`).","body":"<a href=\"https://github.com/junit-team/junit4/wiki/Parameterized-tests\" rel=\"nofollow noreferrer\">Parameterized tests in JUnit 4</a> work vastly different from JUnit 5. You cannot use JUnit 5 annotations with JUnit 4 like you do in your question and expect it to work. Your test is probably run by a JUnit 5 runner, which doesn&#39;t do anything with <code>@Before</code> (the JUnit 5 equivalent is <code>@BeforeEach</code>)."}],"owner":{"account_id":300331,"reputation":50767,"user_id":607407,"accept_rate":71,"display_name":"Tom&#225;š Zato"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689865572,"creation_date":1689865572,"question_id":76731271,"body_markdown":"I have a JUnit 4 test class:\r\n\r\n```\r\nimport org.junit.Before;\r\nimport org.junit.Test;\r\nimport org.junit.jupiter.params.ParameterizedTest;\r\nimport org.junit.jupiter.params.provider.ValueSource;\r\n\r\nimport static org.junit.Assert.assertTrue;\r\n\r\npublic class MyBasicTest {\r\n\r\n    boolean valueIsSetup = false;\r\n\r\n    @Before\r\n    public void setup() {\r\n        valueIsSetup = true;\r\n    }\r\n\r\n    @Test\r\n    public void testUsingValue() throws Exception {\r\n        assertTrue(valueIsSetup);\r\n    }\r\n\r\n    @ParameterizedTest\r\n    @ValueSource(booleans = {true, false})\r\n    public void parametrizedUsingValue(boolean testValue) throws Exception {\r\n        assertTrue(valueIsSetup);\r\n    }\r\n}\r\n```\r\n\r\nObviously, this is a sample. This will fail in the `parametrizedUsingValue` test method.\r\n\r\n`@BeforeClass` exists, but it requires the setup to be static and doesn&#39;t guarantee any cleanup of the static members you initialize. That can be a problem in actual tests, even though it would not be problem in the sample above.\r\n\r\nWhy does `@Before` not apply to `@ParametrizedTest`. Is there any way of working around that without compromising independence of tests?","title":"JUnit4 - why does @Before run before @Test but not before @ParametrizedTest?","body":"<p>I have a JUnit 4 test class:</p>\n<pre><code>import org.junit.Before;\nimport org.junit.Test;\nimport org.junit.jupiter.params.ParameterizedTest;\nimport org.junit.jupiter.params.provider.ValueSource;\n\nimport static org.junit.Assert.assertTrue;\n\npublic class MyBasicTest {\n\n    boolean valueIsSetup = false;\n\n    @Before\n    public void setup() {\n        valueIsSetup = true;\n    }\n\n    @Test\n    public void testUsingValue() throws Exception {\n        assertTrue(valueIsSetup);\n    }\n\n    @ParameterizedTest\n    @ValueSource(booleans = {true, false})\n    public void parametrizedUsingValue(boolean testValue) throws Exception {\n        assertTrue(valueIsSetup);\n    }\n}\n</code></pre>\n<p>Obviously, this is a sample. This will fail in the <code>parametrizedUsingValue</code> test method.</p>\n<p><code>@BeforeClass</code> exists, but it requires the setup to be static and doesn't guarantee any cleanup of the static members you initialize. That can be a problem in actual tests, even though it would not be problem in the sample above.</p>\n<p>Why does <code>@Before</code> not apply to <code>@ParametrizedTest</code>. Is there any way of working around that without compromising independence of tests?</p>\n"},{"tags":["java","android","flutter","kotlin"],"answers":[{"tags":[],"owner":{"account_id":16006342,"reputation":1,"user_id":11551740,"display_name":"Ali Zain"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689864765,"creation_date":1689864765,"answer_id":76731139,"question_id":76720309,"body_markdown":"Yes you can by using platform channels, but you have to do some work.\r\nHere is for your reference: https://docs.flutter.dev/platform-integration/platform-channels","title":"Can I integrate a native android java application in flutter project?","body":"<p>Yes you can by using platform channels, but you have to do some work.\nHere is for your reference: <a href=\"https://docs.flutter.dev/platform-integration/platform-channels\" rel=\"nofollow noreferrer\">https://docs.flutter.dev/platform-integration/platform-channels</a></p>\n"}],"owner":{"account_id":9056818,"reputation":789,"user_id":6744813,"display_name":"Bilal Aslam"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689864765,"creation_date":1689762490,"question_id":76720309,"body_markdown":"I have a native android java simple game applications. Now I want to build a flutter project that will have all those native game apps. Can I integrate them in flutter project?\r\n\r\nI tried copying the native project folder in android directory of the flutter project but could not figure out how to integrate properly.","title":"Can I integrate a native android java application in flutter project?","body":"<p>I have a native android java simple game applications. Now I want to build a flutter project that will have all those native game apps. Can I integrate them in flutter project?</p>\n<p>I tried copying the native project folder in android directory of the flutter project but could not figure out how to integrate properly.</p>\n"},{"tags":["java","threadpoolexecutor","rate-limiting"],"comments":[{"owner":{"account_id":3816309,"reputation":9934,"user_id":3165602,"accept_rate":62,"display_name":"Oleg Sklyar"},"score":0,"creation_date":1520671204,"post_id":49206773,"comment_id":85418988,"body_markdown":"I guess the downvoters did not like the lack of evidence for your own effort in your original post. But I can hardly see which sort of evidence one could provide for this algorithmically complex task. Good luck in finding the solution.","body":"I guess the downvoters did not like the lack of evidence for your own effort in your original post. But I can hardly see which sort of evidence one could provide for this algorithmically complex task. Good luck in finding the solution."},{"owner":{"account_id":35417,"reputation":1065591,"user_id":100297,"display_name":"Martijn Pieters"},"score":0,"creation_date":1520886265,"post_id":49206773,"comment_id":85491501,"body_markdown":"Meta commentary has no place in questions, do not edit those back in. Questions are meant to last beyond your specific needs, for future visitors to benefit from, and future visitors do not care about the process here.","body":"Meta commentary has no place in questions, do not edit those back in. Questions are meant to last beyond your specific needs, for future visitors to benefit from, and future visitors do not care about the process here."},{"owner":{"account_id":8235,"reputation":87010,"user_id":14731,"accept_rate":89,"display_name":"Gili"},"score":0,"creation_date":1521102279,"post_id":49206773,"comment_id":85591161,"body_markdown":"@OlegSklyar FYI, I got it working. Answer posted below.","body":"@OlegSklyar FYI, I got it working. Answer posted below."},{"owner":{"account_id":3816309,"reputation":9934,"user_id":3165602,"accept_rate":62,"display_name":"Oleg Sklyar"},"score":0,"creation_date":1521107516,"post_id":49206773,"comment_id":85594366,"body_markdown":"@Gili Nice job!","body":"@Gili Nice job!"}],"answers":[{"tags":[],"owner":{"account_id":8235,"reputation":87010,"user_id":14731,"accept_rate":89,"display_name":"Gili"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1620224723,"creation_date":1521055547,"answer_id":49286181,"question_id":49206773,"body_markdown":"Answering my own question:\r\n\r\n* It isn&#39;t possible to have a solution that is completely non-blocking. Even `ScheduledThreadPoolExecutor` keeps at least one thread around waiting for the queue to return a new task.\r\n* `ThreadPoolExecutor` sits on top of a `BlockingQueue`. When there are no tasks left, it blocks on `BlockingQueue.take()`\r\n* The solution has 3 moving pieces:\r\n1. A rate limiter.\r\n2. A `BlockingQueue` that hides elements until the rate limiter allows their consumption.\r\n3. A `ThreadPoolExecutor` that sits on top of the `BlockingQueue`.\r\n\r\nThe Rate Limiter\r\n---\r\nI provide my own rate limiter based on the [Token Bucket algorithm](https://en.wikipedia.org/wiki/Token_bucket) algorithm to overcome `RateLimiter`&#39;s [limitations](https://stackoverflow.com/q/27711962/14731). The source-code can be found [here](https://github.com/cowwoc/token-bucket).\r\n\r\n---\r\n\r\nThe BlockingQueue\r\n---\r\nI implementing a `BlockingDeque` (which extends `BlockingQueue`) because in the future I want to try pushing failed tasks back to the front of the queue.\r\n\r\nRateLimitedBlockingDeque.java\r\n\r\n    import java.time.Duration;\r\n    import java.util.Collection;\r\n    import java.util.Iterator;\r\n    import java.util.NoSuchElementException;\r\n    import java.util.concurrent.BlockingDeque;\r\n    import java.util.concurrent.LinkedBlockingDeque;\r\n    import java.util.concurrent.TimeUnit;\r\n    import static org.bitbucket.cowwoc.requirements.core.Requirements.requireThat;\r\n    \r\n    /**\r\n     * A blocking deque of elements, in which an element can only be taken when the deque-wide delay has expired.\r\n     * &lt;p&gt;\r\n     * The optional capacity bound constructor argument serves as a way to prevent excessive expansion. The capacity, if\r\n     * unspecified, is equal to {@link Integer#MAX_VALUE}.\r\n     * &lt;p&gt;\r\n     * Even though methods that take elements, such as {@code take} or {@code poll}, respect the deque-wide delay the\r\n     * remaining methods treat them as normal elements. For example, the {@code size} method returns the count of both\r\n     * expired and unexpired elements.\r\n     * &lt;p&gt;\r\n     * This class and its iterator implement all of the &lt;em&gt;optional&lt;/em&gt; methods of the {@link Collection} and {@link\r\n     * Iterator} interfaces.\r\n     *\r\n     * @param &lt;E&gt; the type of elements in the deque\r\n     * @author Gili Tzabari\r\n     */\r\n    public final class RateLimitedBlockingDeque&lt;E&gt; implements BlockingDeque&lt;E&gt;\r\n    {\r\n    \tprivate final int capacity;\r\n    \tprivate final LinkedBlockingDeque&lt;E&gt; delegate;\r\n    \tprivate final Bucket rateLimit = new Bucket();\r\n    \r\n    \t/**\r\n    \t * Creates a {@code RateLimitedBlockingDeque} with a capacity of {@link Integer#MAX_VALUE}.\r\n    \t */\r\n    \tpublic RateLimitedBlockingDeque()\r\n    \t{\r\n    \t\tthis.capacity = Integer.MAX_VALUE;\r\n    \t\tthis.delegate = new LinkedBlockingDeque&lt;&gt;();\r\n    \t}\r\n    \r\n    \t/**\r\n    \t * Creates a {@code RateLimitedBlockingDeque} with the given (fixed) capacity.\r\n    \t *\r\n    \t * @param capacity the capacity of this deque\r\n    \t * @throws IllegalArgumentException if {@code capacity} is less than 1\r\n    \t */\r\n    \tpublic RateLimitedBlockingDeque(int capacity)\r\n    \t{\r\n    \t\tthis.capacity = capacity;\r\n    \t\tthis.delegate = new LinkedBlockingDeque&lt;&gt;(capacity);\r\n    \t}\r\n    \r\n    \t/**\r\n    \t * @return the capacity of the deque\r\n    \t */\r\n    \tpublic int getCapacity()\r\n    \t{\r\n    \t\treturn capacity;\r\n    \t}\r\n    \r\n    \t/**\r\n    \t * Indicates the rate at which elements may be taken from the queue.\r\n    \t *\r\n    \t * @param elements the number of elements that may be taken per {@code period}\r\n    \t * @param period   indicates how often elements may be taken\r\n    \t * @throws NullPointerException     if {@code period} is null\r\n    \t * @throws IllegalArgumentException if the requested rate is greater than element per nanosecond\r\n    \t */\r\n    \tpublic void setRate(long elements, Duration period)\r\n    \t{\r\n    \t\tsynchronized (rateLimit)\r\n    \t\t{\r\n    \t\t\tLimit newLimit = new Limit(elements, period, 0, Long.MAX_VALUE);\r\n    \t\t\tif (rateLimit.getLimits().isEmpty())\r\n    \t\t\t\trateLimit.addLimit(newLimit);\r\n    \t\t\telse\r\n    \t\t\t{\r\n    \t\t\t\tLimit oldLimit = rateLimit.getLimits().iterator().next();\r\n    \t\t\t\trateLimit.replaceLimit(oldLimit, newLimit);\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}\r\n    \r\n    \t/**\r\n    \t * Allows consumption of elements without limit.\r\n    \t */\r\n    \tpublic void removeRate()\r\n    \t{\r\n    \t\tsynchronized (rateLimit)\r\n    \t\t{\r\n    \t\t\trateLimit.removeAllLimits();\r\n    \t\t}\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void addFirst(E e)\r\n    \t{\r\n    \t\tdelegate.addFirst(e);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void addLast(E e)\r\n    \t{\r\n    \t\tdelegate.addLast(e);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic boolean offerFirst(E e)\r\n    \t{\r\n    \t\treturn delegate.offerFirst(e);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic boolean offerLast(E e)\r\n    \t{\r\n    \t\treturn delegate.offerLast(e);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void putFirst(E e) throws InterruptedException\r\n    \t{\r\n    \t\tdelegate.putFirst(e);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void putLast(E e) throws InterruptedException\r\n    \t{\r\n    \t\tdelegate.putLast(e);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic boolean offerFirst(E e, long timeout, TimeUnit unit) throws InterruptedException\r\n    \t{\r\n    \t\treturn delegate.offerFirst(e, timeout, unit);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic boolean offerLast(E e, long timeout, TimeUnit unit) throws InterruptedException\r\n    \t{\r\n    \t\treturn delegate.offerLast(e, timeout, unit);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic E removeFirst()\r\n    \t{\r\n    \t\tif (rateLimit.tryConsume())\r\n    \t\t\treturn delegate.removeFirst();\r\n    \t\tthrow new NoSuchElementException();\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic E removeLast()\r\n    \t{\r\n    \t\tif (rateLimit.tryConsume())\r\n    \t\t\treturn delegate.removeLast();\r\n    \t\tthrow new NoSuchElementException();\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic E pollFirst()\r\n    \t{\r\n    \t\tif (rateLimit.tryConsume())\r\n    \t\t\treturn delegate.pollFirst();\r\n    \t\treturn null;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic E pollLast()\r\n    \t{\r\n    \t\tif (rateLimit.tryConsume())\r\n    \t\t\treturn delegate.pollLast();\r\n    \t\treturn null;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic E takeFirst() throws InterruptedException\r\n    \t{\r\n    \t\trateLimit.consume();\r\n    \t\treturn delegate.takeFirst();\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic E takeLast() throws InterruptedException\r\n    \t{\r\n    \t\trateLimit.consume();\r\n    \t\treturn delegate.takeLast();\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic E pollFirst(long timeout, TimeUnit unit) throws InterruptedException\r\n    \t{\r\n    \t\tif (rateLimit.consume(1, timeout, unit))\r\n    \t\t\treturn delegate.pollFirst(timeout, unit);\r\n    \t\treturn null;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic E pollLast(long timeout, TimeUnit unit) throws InterruptedException\r\n    \t{\r\n    \t\tif (rateLimit.consume(1, timeout, unit))\r\n    \t\t\treturn delegate.pollLast(timeout, unit);\r\n    \t\treturn null;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic E getFirst()\r\n    \t{\r\n    \t\treturn delegate.getFirst();\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic E getLast()\r\n    \t{\r\n    \t\treturn delegate.getLast();\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic E peekFirst()\r\n    \t{\r\n    \t\treturn delegate.peekFirst();\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic E peekLast()\r\n    \t{\r\n    \t\treturn delegate.peekLast();\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic boolean removeFirstOccurrence(Object o)\r\n    \t{\r\n    \t\treturn delegate.removeFirstOccurrence(o);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic boolean removeLastOccurrence(Object o)\r\n    \t{\r\n    \t\treturn delegate.removeLastOccurrence(o);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic boolean add(E e)\r\n    \t{\r\n    \t\treturn delegate.add(e);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic boolean offer(E e)\r\n    \t{\r\n    \t\treturn delegate.offer(e);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void put(E e) throws InterruptedException\r\n    \t{\r\n    \t\tputLast(e);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic boolean offer(E e, long timeout, TimeUnit unit) throws InterruptedException\r\n    \t{\r\n    \t\treturn delegate.offer(e, timeout, unit);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic E remove()\r\n    \t{\r\n    \t\treturn removeFirst();\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic E poll()\r\n    \t{\r\n    \t\treturn pollFirst();\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic E take() throws InterruptedException\r\n    \t{\r\n    \t\treturn takeFirst();\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic E poll(long timeout, TimeUnit unit) throws InterruptedException\r\n    \t{\r\n    \t\treturn pollFirst(timeout, unit);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic E element()\r\n    \t{\r\n    \t\treturn getFirst();\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic E peek()\r\n    \t{\r\n    \t\treturn peekFirst();\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic int remainingCapacity()\r\n    \t{\r\n    \t\treturn delegate.remainingCapacity();\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic int drainTo(Collection&lt;? super E&gt; c)\r\n    \t{\r\n    \t\tint result = 0;\r\n    \t\twhile (true)\r\n    \t\t{\r\n    \t\t\tE next = pollFirst();\r\n    \t\t\tif (next == null)\r\n    \t\t\t\tbreak;\r\n    \t\t\tc.add(next);\r\n    \t\t}\r\n    \t\treturn result;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic int drainTo(Collection&lt;? super E&gt; c, int maxElements)\r\n    \t{\r\n    \t\tint result = 0;\r\n    \t\tdo\r\n    \t\t{\r\n    \t\t\tE next = pollFirst();\r\n    \t\t\tif (next == null)\r\n    \t\t\t\tbreak;\r\n    \t\t\tc.add(next);\r\n    \t\t}\r\n    \t\twhile (result &lt; maxElements);\r\n    \t\treturn result;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void push(E e)\r\n    \t{\r\n    \t\taddFirst(e);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic E pop()\r\n    \t{\r\n    \t\treturn removeFirst();\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic boolean remove(Object o)\r\n    \t{\r\n    \t\treturn removeFirstOccurrence(o);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic int size()\r\n    \t{\r\n    \t\treturn delegate.size();\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic boolean contains(Object o)\r\n    \t{\r\n    \t\treturn delegate.contains(o);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic Object[] toArray()\r\n    \t{\r\n    \t\treturn delegate.toArray();\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic &lt;T&gt; T[] toArray(T[] a)\r\n    \t{\r\n    \t\treturn delegate.toArray(a);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic String toString()\r\n    \t{\r\n    \t\treturn delegate.toString();\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void clear()\r\n    \t{\r\n    \t\tdelegate.clear();\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic Iterator&lt;E&gt; iterator()\r\n    \t{\r\n    \t\treturn wrap(delegate.iterator());\r\n    \t}\r\n    \r\n    \t/**\r\n    \t * @param delegateIterator the iterator to delegate to\r\n    \t * @return an iterator that respects the rate-limit\r\n    \t */\r\n    \tprivate Iterator&lt;E&gt; wrap(Iterator&lt;E&gt; delegateIterator)\r\n    \t{\r\n    \t\treturn new Iterator&lt;E&gt;()\r\n    \t\t{\r\n    \t\t\tprivate E previousElement = null;\r\n    \r\n    \t\t\t@Override\r\n    \t\t\tpublic boolean hasNext()\r\n    \t\t\t{\r\n    \t\t\t\treturn delegateIterator.hasNext();\r\n    \t\t\t}\r\n    \r\n    \t\t\t@Override\r\n    \t\t\tpublic E next()\r\n    \t\t\t{\r\n    \t\t\t\treturn delegateIterator.next();\r\n    \t\t\t}\r\n    \r\n    \t\t\t@Override\r\n    \t\t\tpublic void remove()\r\n    \t\t\t{\r\n    \t\t\t\tif (previousElement == null)\r\n    \t\t\t\t\tthrow new IllegalStateException(&quot;next() not invoked, or remove() already invoked&quot;);\r\n    \t\t\t\ttry\r\n    \t\t\t\t{\r\n    \t\t\t\t\trateLimit.consume();\r\n    \t\t\t\t}\r\n    \t\t\t\tcatch (InterruptedException e)\r\n    \t\t\t\t{\r\n    \t\t\t\t\tthrow new IllegalStateException(e);\r\n    \t\t\t\t}\r\n    \t\t\t\tdelegateIterator.remove();\r\n    \t\t\t\tpreviousElement = null;\r\n    \t\t\t}\r\n    \t\t};\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic Iterator&lt;E&gt; descendingIterator()\r\n    \t{\r\n    \t\treturn wrap(delegate.descendingIterator());\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic boolean addAll(Collection&lt;? extends E&gt; c)\r\n    \t{\r\n    \t\trequireThat(&quot;c&quot;, c).isNotNull().isNotEqualTo(&quot;this&quot;, this);\r\n    \t\tboolean modified = false;\r\n    \t\tfor (E e: c)\r\n    \t\t\tif (add(e))\r\n    \t\t\t\tmodified = true;\r\n    \t\treturn modified;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic boolean isEmpty()\r\n    \t{\r\n    \t\treturn delegate.isEmpty();\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic boolean containsAll(Collection&lt;?&gt; c)\r\n    \t{\r\n    \t\treturn delegate.containsAll(c);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic boolean removeAll(Collection&lt;?&gt; c)\r\n    \t{\r\n    \t\tIterator&lt;E&gt; i = iterator();\r\n    \t\tboolean modified = true;\r\n    \t\twhile (i.hasNext())\r\n    \t\t{\r\n    \t\t\tE element = i.next();\r\n    \t\t\tif (c.contains(element))\r\n    \t\t\t{\r\n    \t\t\t\ti.remove();\r\n    \t\t\t\tmodified = true;\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\treturn modified;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic boolean retainAll(Collection&lt;?&gt; c)\r\n    \t{\r\n    \t\tIterator&lt;E&gt; i = iterator();\r\n    \t\tboolean modified = true;\r\n    \t\twhile (i.hasNext())\r\n    \t\t{\r\n    \t\t\tE element = i.next();\r\n    \t\t\tif (!c.contains(element))\r\n    \t\t\t{\r\n    \t\t\t\ti.remove();\r\n    \t\t\t\tmodified = true;\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\treturn modified;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic int hashCode()\r\n    \t{\r\n    \t\treturn delegate.hashCode();\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic boolean equals(Object obj)\r\n    \t{\r\n    \t\treturn delegate.equals(obj);\r\n    \t}\r\n    }","title":"Non-blocking rate-limited ThreadPoolExecutor","body":"<p>Answering my own question:</p>\n<ul>\n<li>It isn't possible to have a solution that is completely non-blocking. Even <code>ScheduledThreadPoolExecutor</code> keeps at least one thread around waiting for the queue to return a new task.</li>\n<li><code>ThreadPoolExecutor</code> sits on top of a <code>BlockingQueue</code>. When there are no tasks left, it blocks on <code>BlockingQueue.take()</code></li>\n<li>The solution has 3 moving pieces:</li>\n</ul>\n<ol>\n<li>A rate limiter.</li>\n<li>A <code>BlockingQueue</code> that hides elements until the rate limiter allows their consumption.</li>\n<li>A <code>ThreadPoolExecutor</code> that sits on top of the <code>BlockingQueue</code>.</li>\n</ol>\n<h2>The Rate Limiter</h2>\n<p>I provide my own rate limiter based on the <a href=\"https://en.wikipedia.org/wiki/Token_bucket\" rel=\"nofollow noreferrer\">Token Bucket algorithm</a> algorithm to overcome <code>RateLimiter</code>'s <a href=\"https://stackoverflow.com/q/27711962/14731\">limitations</a>. The source-code can be found <a href=\"https://github.com/cowwoc/token-bucket\" rel=\"nofollow noreferrer\">here</a>.</p>\n<hr />\n<h2>The BlockingQueue</h2>\n<p>I implementing a <code>BlockingDeque</code> (which extends <code>BlockingQueue</code>) because in the future I want to try pushing failed tasks back to the front of the queue.</p>\n<p>RateLimitedBlockingDeque.java</p>\n<pre><code>import java.time.Duration;\nimport java.util.Collection;\nimport java.util.Iterator;\nimport java.util.NoSuchElementException;\nimport java.util.concurrent.BlockingDeque;\nimport java.util.concurrent.LinkedBlockingDeque;\nimport java.util.concurrent.TimeUnit;\nimport static org.bitbucket.cowwoc.requirements.core.Requirements.requireThat;\n\n/**\n * A blocking deque of elements, in which an element can only be taken when the deque-wide delay has expired.\n * &lt;p&gt;\n * The optional capacity bound constructor argument serves as a way to prevent excessive expansion. The capacity, if\n * unspecified, is equal to {@link Integer#MAX_VALUE}.\n * &lt;p&gt;\n * Even though methods that take elements, such as {@code take} or {@code poll}, respect the deque-wide delay the\n * remaining methods treat them as normal elements. For example, the {@code size} method returns the count of both\n * expired and unexpired elements.\n * &lt;p&gt;\n * This class and its iterator implement all of the &lt;em&gt;optional&lt;/em&gt; methods of the {@link Collection} and {@link\n * Iterator} interfaces.\n *\n * @param &lt;E&gt; the type of elements in the deque\n * @author Gili Tzabari\n */\npublic final class RateLimitedBlockingDeque&lt;E&gt; implements BlockingDeque&lt;E&gt;\n{\n    private final int capacity;\n    private final LinkedBlockingDeque&lt;E&gt; delegate;\n    private final Bucket rateLimit = new Bucket();\n\n    /**\n     * Creates a {@code RateLimitedBlockingDeque} with a capacity of {@link Integer#MAX_VALUE}.\n     */\n    public RateLimitedBlockingDeque()\n    {\n        this.capacity = Integer.MAX_VALUE;\n        this.delegate = new LinkedBlockingDeque&lt;&gt;();\n    }\n\n    /**\n     * Creates a {@code RateLimitedBlockingDeque} with the given (fixed) capacity.\n     *\n     * @param capacity the capacity of this deque\n     * @throws IllegalArgumentException if {@code capacity} is less than 1\n     */\n    public RateLimitedBlockingDeque(int capacity)\n    {\n        this.capacity = capacity;\n        this.delegate = new LinkedBlockingDeque&lt;&gt;(capacity);\n    }\n\n    /**\n     * @return the capacity of the deque\n     */\n    public int getCapacity()\n    {\n        return capacity;\n    }\n\n    /**\n     * Indicates the rate at which elements may be taken from the queue.\n     *\n     * @param elements the number of elements that may be taken per {@code period}\n     * @param period   indicates how often elements may be taken\n     * @throws NullPointerException     if {@code period} is null\n     * @throws IllegalArgumentException if the requested rate is greater than element per nanosecond\n     */\n    public void setRate(long elements, Duration period)\n    {\n        synchronized (rateLimit)\n        {\n            Limit newLimit = new Limit(elements, period, 0, Long.MAX_VALUE);\n            if (rateLimit.getLimits().isEmpty())\n                rateLimit.addLimit(newLimit);\n            else\n            {\n                Limit oldLimit = rateLimit.getLimits().iterator().next();\n                rateLimit.replaceLimit(oldLimit, newLimit);\n            }\n        }\n    }\n\n    /**\n     * Allows consumption of elements without limit.\n     */\n    public void removeRate()\n    {\n        synchronized (rateLimit)\n        {\n            rateLimit.removeAllLimits();\n        }\n    }\n\n    @Override\n    public void addFirst(E e)\n    {\n        delegate.addFirst(e);\n    }\n\n    @Override\n    public void addLast(E e)\n    {\n        delegate.addLast(e);\n    }\n\n    @Override\n    public boolean offerFirst(E e)\n    {\n        return delegate.offerFirst(e);\n    }\n\n    @Override\n    public boolean offerLast(E e)\n    {\n        return delegate.offerLast(e);\n    }\n\n    @Override\n    public void putFirst(E e) throws InterruptedException\n    {\n        delegate.putFirst(e);\n    }\n\n    @Override\n    public void putLast(E e) throws InterruptedException\n    {\n        delegate.putLast(e);\n    }\n\n    @Override\n    public boolean offerFirst(E e, long timeout, TimeUnit unit) throws InterruptedException\n    {\n        return delegate.offerFirst(e, timeout, unit);\n    }\n\n    @Override\n    public boolean offerLast(E e, long timeout, TimeUnit unit) throws InterruptedException\n    {\n        return delegate.offerLast(e, timeout, unit);\n    }\n\n    @Override\n    public E removeFirst()\n    {\n        if (rateLimit.tryConsume())\n            return delegate.removeFirst();\n        throw new NoSuchElementException();\n    }\n\n    @Override\n    public E removeLast()\n    {\n        if (rateLimit.tryConsume())\n            return delegate.removeLast();\n        throw new NoSuchElementException();\n    }\n\n    @Override\n    public E pollFirst()\n    {\n        if (rateLimit.tryConsume())\n            return delegate.pollFirst();\n        return null;\n    }\n\n    @Override\n    public E pollLast()\n    {\n        if (rateLimit.tryConsume())\n            return delegate.pollLast();\n        return null;\n    }\n\n    @Override\n    public E takeFirst() throws InterruptedException\n    {\n        rateLimit.consume();\n        return delegate.takeFirst();\n    }\n\n    @Override\n    public E takeLast() throws InterruptedException\n    {\n        rateLimit.consume();\n        return delegate.takeLast();\n    }\n\n    @Override\n    public E pollFirst(long timeout, TimeUnit unit) throws InterruptedException\n    {\n        if (rateLimit.consume(1, timeout, unit))\n            return delegate.pollFirst(timeout, unit);\n        return null;\n    }\n\n    @Override\n    public E pollLast(long timeout, TimeUnit unit) throws InterruptedException\n    {\n        if (rateLimit.consume(1, timeout, unit))\n            return delegate.pollLast(timeout, unit);\n        return null;\n    }\n\n    @Override\n    public E getFirst()\n    {\n        return delegate.getFirst();\n    }\n\n    @Override\n    public E getLast()\n    {\n        return delegate.getLast();\n    }\n\n    @Override\n    public E peekFirst()\n    {\n        return delegate.peekFirst();\n    }\n\n    @Override\n    public E peekLast()\n    {\n        return delegate.peekLast();\n    }\n\n    @Override\n    public boolean removeFirstOccurrence(Object o)\n    {\n        return delegate.removeFirstOccurrence(o);\n    }\n\n    @Override\n    public boolean removeLastOccurrence(Object o)\n    {\n        return delegate.removeLastOccurrence(o);\n    }\n\n    @Override\n    public boolean add(E e)\n    {\n        return delegate.add(e);\n    }\n\n    @Override\n    public boolean offer(E e)\n    {\n        return delegate.offer(e);\n    }\n\n    @Override\n    public void put(E e) throws InterruptedException\n    {\n        putLast(e);\n    }\n\n    @Override\n    public boolean offer(E e, long timeout, TimeUnit unit) throws InterruptedException\n    {\n        return delegate.offer(e, timeout, unit);\n    }\n\n    @Override\n    public E remove()\n    {\n        return removeFirst();\n    }\n\n    @Override\n    public E poll()\n    {\n        return pollFirst();\n    }\n\n    @Override\n    public E take() throws InterruptedException\n    {\n        return takeFirst();\n    }\n\n    @Override\n    public E poll(long timeout, TimeUnit unit) throws InterruptedException\n    {\n        return pollFirst(timeout, unit);\n    }\n\n    @Override\n    public E element()\n    {\n        return getFirst();\n    }\n\n    @Override\n    public E peek()\n    {\n        return peekFirst();\n    }\n\n    @Override\n    public int remainingCapacity()\n    {\n        return delegate.remainingCapacity();\n    }\n\n    @Override\n    public int drainTo(Collection&lt;? super E&gt; c)\n    {\n        int result = 0;\n        while (true)\n        {\n            E next = pollFirst();\n            if (next == null)\n                break;\n            c.add(next);\n        }\n        return result;\n    }\n\n    @Override\n    public int drainTo(Collection&lt;? super E&gt; c, int maxElements)\n    {\n        int result = 0;\n        do\n        {\n            E next = pollFirst();\n            if (next == null)\n                break;\n            c.add(next);\n        }\n        while (result &lt; maxElements);\n        return result;\n    }\n\n    @Override\n    public void push(E e)\n    {\n        addFirst(e);\n    }\n\n    @Override\n    public E pop()\n    {\n        return removeFirst();\n    }\n\n    @Override\n    public boolean remove(Object o)\n    {\n        return removeFirstOccurrence(o);\n    }\n\n    @Override\n    public int size()\n    {\n        return delegate.size();\n    }\n\n    @Override\n    public boolean contains(Object o)\n    {\n        return delegate.contains(o);\n    }\n\n    @Override\n    public Object[] toArray()\n    {\n        return delegate.toArray();\n    }\n\n    @Override\n    public &lt;T&gt; T[] toArray(T[] a)\n    {\n        return delegate.toArray(a);\n    }\n\n    @Override\n    public String toString()\n    {\n        return delegate.toString();\n    }\n\n    @Override\n    public void clear()\n    {\n        delegate.clear();\n    }\n\n    @Override\n    public Iterator&lt;E&gt; iterator()\n    {\n        return wrap(delegate.iterator());\n    }\n\n    /**\n     * @param delegateIterator the iterator to delegate to\n     * @return an iterator that respects the rate-limit\n     */\n    private Iterator&lt;E&gt; wrap(Iterator&lt;E&gt; delegateIterator)\n    {\n        return new Iterator&lt;E&gt;()\n        {\n            private E previousElement = null;\n\n            @Override\n            public boolean hasNext()\n            {\n                return delegateIterator.hasNext();\n            }\n\n            @Override\n            public E next()\n            {\n                return delegateIterator.next();\n            }\n\n            @Override\n            public void remove()\n            {\n                if (previousElement == null)\n                    throw new IllegalStateException(&quot;next() not invoked, or remove() already invoked&quot;);\n                try\n                {\n                    rateLimit.consume();\n                }\n                catch (InterruptedException e)\n                {\n                    throw new IllegalStateException(e);\n                }\n                delegateIterator.remove();\n                previousElement = null;\n            }\n        };\n    }\n\n    @Override\n    public Iterator&lt;E&gt; descendingIterator()\n    {\n        return wrap(delegate.descendingIterator());\n    }\n\n    @Override\n    public boolean addAll(Collection&lt;? extends E&gt; c)\n    {\n        requireThat(&quot;c&quot;, c).isNotNull().isNotEqualTo(&quot;this&quot;, this);\n        boolean modified = false;\n        for (E e: c)\n            if (add(e))\n                modified = true;\n        return modified;\n    }\n\n    @Override\n    public boolean isEmpty()\n    {\n        return delegate.isEmpty();\n    }\n\n    @Override\n    public boolean containsAll(Collection&lt;?&gt; c)\n    {\n        return delegate.containsAll(c);\n    }\n\n    @Override\n    public boolean removeAll(Collection&lt;?&gt; c)\n    {\n        Iterator&lt;E&gt; i = iterator();\n        boolean modified = true;\n        while (i.hasNext())\n        {\n            E element = i.next();\n            if (c.contains(element))\n            {\n                i.remove();\n                modified = true;\n            }\n        }\n        return modified;\n    }\n\n    @Override\n    public boolean retainAll(Collection&lt;?&gt; c)\n    {\n        Iterator&lt;E&gt; i = iterator();\n        boolean modified = true;\n        while (i.hasNext())\n        {\n            E element = i.next();\n            if (!c.contains(element))\n            {\n                i.remove();\n                modified = true;\n            }\n        }\n        return modified;\n    }\n\n    @Override\n    public int hashCode()\n    {\n        return delegate.hashCode();\n    }\n\n    @Override\n    public boolean equals(Object obj)\n    {\n        return delegate.equals(obj);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":201558,"reputation":20189,"user_id":448078,"accept_rate":61,"display_name":"Mike"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689864456,"creation_date":1685138524,"answer_id":76344404,"question_id":49206773,"body_markdown":"Usage:\r\n\r\n\tpublic static void main(String[] args) throws InterruptedException {\r\n\t    RateFriendlyThreadPoolExecutor executor = new RateFriendlyThreadPoolExecutor(3, 5, 1, SECONDS, new LinkedBlockingDeque&lt;&gt;(100));\r\n\t    executor.setRate(10);\r\n\t    executor.setMinRate(1);\r\n\t    executor.setMaxRate(100);\r\n\r\n\t    for (int i = 0; i &lt; 1000; i++) {\r\n\t        int lap = i;\r\n\t        executor.execute(() -&gt; System.out.printf(&quot;%03d (%s) - %s - %s%n&quot;, lap, executor.getRate(), LocalDateTime.now(), Thread.currentThread().getName()));\r\n\t    }\r\n\r\n\t    executor.shutdown();\r\n\t    executor.awaitTermination(60, SECONDS);\r\n\t}\r\n\r\nOutput:\r\n\r\n    002 (10) - 2023-05-27T23:03:37.659658800 - pool-1-thread-3\r\n    000 (11) - 2023-05-27T23:03:37.659658800 - pool-1-thread-1\r\n    001 (11) - 2023-05-27T23:03:37.744859100 - pool-1-thread-2\r\n    105 (11) - 2023-05-27T23:03:37.930152500 - main\r\n    103 (12) - 2023-05-27T23:03:38.037876400 - pool-1-thread-4\r\n    104 (12) - 2023-05-27T23:03:38.130058800 - pool-1-thread-5\r\n    003 (12) - 2023-05-27T23:03:38.221655300 - pool-1-thread-3\r\n    004 (12) - 2023-05-27T23:03:38.314020700 - pool-1-thread-1\r\n    005 (12) - 2023-05-27T23:03:38.406202700 - pool-1-thread-2\r\n    006 (12) - 2023-05-27T23:03:38.573508200 - pool-1-thread-4\r\n    007 (13) - 2023-05-27T23:03:38.665875900 - pool-1-thread-5\r\n    008 (13) - 2023-05-27T23:03:38.742695200 - pool-1-thread-3\r\n\r\nImplementation:\r\n\r\n\timport java.util.concurrent.BlockingQueue;\r\n\timport java.util.concurrent.ThreadPoolExecutor;\r\n\timport java.util.concurrent.TimeUnit;\r\n\timport java.util.concurrent.atomic.AtomicInteger;\r\n\timport java.util.concurrent.atomic.AtomicLong;\r\n\timport java.util.concurrent.locks.ReentrantLock;\r\n\t\r\n\timport static java.lang.Math.min;\r\n\timport static java.lang.System.nanoTime;\r\n\t\r\n\tpublic class RateFriendlyThreadPoolExecutor extends ThreadPoolExecutor {\r\n\t\r\n\t\tprivate AtomicInteger rate = new AtomicInteger();\r\n\t\tprivate AtomicInteger minRate = new AtomicInteger();\r\n\t\tprivate AtomicInteger maxRate = new AtomicInteger();\r\n\t\tprivate AtomicLong leapTime = new AtomicLong();\r\n\t\tprivate ReentrantLock rateLock = new ReentrantLock();\r\n\t\r\n\t\tpublic RateFriendlyThreadPoolExecutor(int corePoolSize, int maximumPoolSize, long keepAliveTime, TimeUnit unit, BlockingQueue&lt;Runnable&gt; workQueue) {\r\n\t\t\tsuper(corePoolSize, maximumPoolSize, keepAliveTime, unit, workQueue, (r, e) -&gt; overflow(r, (RateFriendlyThreadPoolExecutor) e));\r\n\t\t}\r\n\t\r\n\t\t@Override\r\n\t\tpublic void execute(Runnable rannable) {\r\n\t\t\tsuper.execute(() -&gt; executeWithDelay(rannable));\r\n\t\t}\r\n\t\r\n\t\tprotected void executeWithDelay(Runnable runnable) {\r\n\t\t\tint rateSnapshot = rate.get();\r\n\t\t\tlimitRate(rateSnapshot, leapTime, rateLock);\r\n\t\t\ttry {\r\n\t\r\n\t\t\t\trunnable.run();\r\n\t\r\n\t\t\t\trate.compareAndSet(rateSnapshot, min(rateSnapshot + 1, maxRate.get()));\r\n\t\t\t} catch (Exception e) {\r\n\t\t\t\tif (!isThrottled(e))\r\n\t\t\t\t\tthrow e;\r\n\t\t\t\tSystem.out.println(&quot;throttled at rate &quot; + rateSnapshot);\r\n\t\t\t\trate.set(minRate.get());\r\n\t\t\t\texecute(runnable);\r\n\t\t\t}\r\n\t\t}\r\n\t\r\n\t\t// works for parallel streams like a charm\r\n        public static void limitRate(int rate, AtomicLong leapTime, ReentrantLock rateLock) {\r\n            if (rate == 0)\r\n                return;\r\n            long targetLeapTime = 1_000_000_000 / rate;\r\n            rateLock.lock();\r\n            try {\r\n                long timeSnapshot = nanoTime();\r\n                long waitTime = targetLeapTime - (timeSnapshot - leapTime.get());\r\n                if (waitTime &gt; 0) {\r\n\r\n                    if (waitTime &gt; 1_000_000)\r\n                        LockSupport.parkNanos(waitTime);\r\n                    else\r\n                        while (timeSnapshot + waitTime &gt; nanoTime())\r\n                            /* busy wait */;\r\n\r\n                    leapTime.set(timeSnapshot + waitTime);\r\n                } else {\r\n                    leapTime.set(timeSnapshot);\r\n                }\r\n            } finally {\r\n                rateLock.unlock();\r\n            }\r\n        }\r\n\t\r\n\t\tprivate static void overflow(Runnable r, RateFriendlyThreadPoolExecutor e) {\r\n\t\t\tif (!e.isShutdown())\r\n\t\t\t\te.executeWithDelay(r);\r\n\t\t}\r\n\t\r\n\t\tprivate boolean isThrottled(Exception e) {\r\n\t\t\treturn e.getMessage().contains(&quot;Reduce your rate&quot;);\r\n\t\t}\r\n\t\r\n\t\tpublic AtomicInteger getRate() {\r\n\t\t\treturn rate;\r\n\t\t}\r\n\t\r\n\t\tpublic void setRate(int rate) {\r\n\t\t\tthis.rate.set(rate);\r\n\t\t\tminRate.compareAndSet(0, rate);\r\n\t\t\tmaxRate.compareAndSet(0, rate);\r\n\t\t}\r\n\t\r\n\t\tpublic AtomicInteger getMinRate() {\r\n\t\t\treturn minRate;\r\n\t\t}\r\n\t\r\n\t\tpublic void setMinRate(int minRate) {\r\n\t\t\tthis.minRate.set(minRate);\r\n\t\t}\r\n\t\r\n\t\tpublic AtomicInteger getMaxRate() {\r\n\t\t\treturn maxRate;\r\n\t\t}\r\n\t\r\n\t\tpublic void setMaxRate(int maxRate) {\r\n\t\t\tthis.maxRate.set(maxRate);\r\n\t\t}\r\n\t}","title":"Non-blocking rate-limited ThreadPoolExecutor","body":"<p>Usage:</p>\n<pre><code>public static void main(String[] args) throws InterruptedException {\n    RateFriendlyThreadPoolExecutor executor = new RateFriendlyThreadPoolExecutor(3, 5, 1, SECONDS, new LinkedBlockingDeque&lt;&gt;(100));\n    executor.setRate(10);\n    executor.setMinRate(1);\n    executor.setMaxRate(100);\n\n    for (int i = 0; i &lt; 1000; i++) {\n        int lap = i;\n        executor.execute(() -&gt; System.out.printf(&quot;%03d (%s) - %s - %s%n&quot;, lap, executor.getRate(), LocalDateTime.now(), Thread.currentThread().getName()));\n    }\n\n    executor.shutdown();\n    executor.awaitTermination(60, SECONDS);\n}\n</code></pre>\n<p>Output:</p>\n<pre><code>002 (10) - 2023-05-27T23:03:37.659658800 - pool-1-thread-3\n000 (11) - 2023-05-27T23:03:37.659658800 - pool-1-thread-1\n001 (11) - 2023-05-27T23:03:37.744859100 - pool-1-thread-2\n105 (11) - 2023-05-27T23:03:37.930152500 - main\n103 (12) - 2023-05-27T23:03:38.037876400 - pool-1-thread-4\n104 (12) - 2023-05-27T23:03:38.130058800 - pool-1-thread-5\n003 (12) - 2023-05-27T23:03:38.221655300 - pool-1-thread-3\n004 (12) - 2023-05-27T23:03:38.314020700 - pool-1-thread-1\n005 (12) - 2023-05-27T23:03:38.406202700 - pool-1-thread-2\n006 (12) - 2023-05-27T23:03:38.573508200 - pool-1-thread-4\n007 (13) - 2023-05-27T23:03:38.665875900 - pool-1-thread-5\n008 (13) - 2023-05-27T23:03:38.742695200 - pool-1-thread-3\n</code></pre>\n<p>Implementation:</p>\n<pre><code>import java.util.concurrent.BlockingQueue;\nimport java.util.concurrent.ThreadPoolExecutor;\nimport java.util.concurrent.TimeUnit;\nimport java.util.concurrent.atomic.AtomicInteger;\nimport java.util.concurrent.atomic.AtomicLong;\nimport java.util.concurrent.locks.ReentrantLock;\n\nimport static java.lang.Math.min;\nimport static java.lang.System.nanoTime;\n\npublic class RateFriendlyThreadPoolExecutor extends ThreadPoolExecutor {\n\n    private AtomicInteger rate = new AtomicInteger();\n    private AtomicInteger minRate = new AtomicInteger();\n    private AtomicInteger maxRate = new AtomicInteger();\n    private AtomicLong leapTime = new AtomicLong();\n    private ReentrantLock rateLock = new ReentrantLock();\n\n    public RateFriendlyThreadPoolExecutor(int corePoolSize, int maximumPoolSize, long keepAliveTime, TimeUnit unit, BlockingQueue&lt;Runnable&gt; workQueue) {\n        super(corePoolSize, maximumPoolSize, keepAliveTime, unit, workQueue, (r, e) -&gt; overflow(r, (RateFriendlyThreadPoolExecutor) e));\n    }\n\n    @Override\n    public void execute(Runnable rannable) {\n        super.execute(() -&gt; executeWithDelay(rannable));\n    }\n\n    protected void executeWithDelay(Runnable runnable) {\n        int rateSnapshot = rate.get();\n        limitRate(rateSnapshot, leapTime, rateLock);\n        try {\n\n            runnable.run();\n\n            rate.compareAndSet(rateSnapshot, min(rateSnapshot + 1, maxRate.get()));\n        } catch (Exception e) {\n            if (!isThrottled(e))\n                throw e;\n            System.out.println(&quot;throttled at rate &quot; + rateSnapshot);\n            rate.set(minRate.get());\n            execute(runnable);\n        }\n    }\n\n    // works for parallel streams like a charm\n    public static void limitRate(int rate, AtomicLong leapTime, ReentrantLock rateLock) {\n        if (rate == 0)\n            return;\n        long targetLeapTime = 1_000_000_000 / rate;\n        rateLock.lock();\n        try {\n            long timeSnapshot = nanoTime();\n            long waitTime = targetLeapTime - (timeSnapshot - leapTime.get());\n            if (waitTime &gt; 0) {\n\n                if (waitTime &gt; 1_000_000)\n                    LockSupport.parkNanos(waitTime);\n                else\n                    while (timeSnapshot + waitTime &gt; nanoTime())\n                        /* busy wait */;\n\n                leapTime.set(timeSnapshot + waitTime);\n            } else {\n                leapTime.set(timeSnapshot);\n            }\n        } finally {\n            rateLock.unlock();\n        }\n    }\n\n    private static void overflow(Runnable r, RateFriendlyThreadPoolExecutor e) {\n        if (!e.isShutdown())\n            e.executeWithDelay(r);\n    }\n\n    private boolean isThrottled(Exception e) {\n        return e.getMessage().contains(&quot;Reduce your rate&quot;);\n    }\n\n    public AtomicInteger getRate() {\n        return rate;\n    }\n\n    public void setRate(int rate) {\n        this.rate.set(rate);\n        minRate.compareAndSet(0, rate);\n        maxRate.compareAndSet(0, rate);\n    }\n\n    public AtomicInteger getMinRate() {\n        return minRate;\n    }\n\n    public void setMinRate(int minRate) {\n        this.minRate.set(minRate);\n    }\n\n    public AtomicInteger getMaxRate() {\n        return maxRate;\n    }\n\n    public void setMaxRate(int maxRate) {\n        this.maxRate.set(maxRate);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":8235,"reputation":87010,"user_id":14731,"accept_rate":89,"display_name":"Gili"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2823,"favorite_count":0,"down_vote_count":6,"up_vote_count":15,"accepted_answer_id":49286181,"answer_count":2,"score":9,"last_activity_date":1689864456,"creation_date":1520669043,"question_id":49206773,"body_markdown":"I am hitting an HTTP server concurrently with multiple connections. I&#39;d like to throttle the clients in response to servers indicating that requests are coming in too fast. I do not wish to change the HTTP library I am using but rather I&#39;d like to extend it.\r\n\r\nTo that end, **how do I implement a [ThreadPoolExecutor](https://docs.oracle.com/javase/9/docs/api/java/util/concurrent/ThreadPoolExecutor.html) with the following constraints?**\r\n\r\n* The executor has an optional rate limit.\r\n* When the rate-limit is disabled, it executes tasks as quickly as possible (normal behavior for a `ThreadPoolExecutor`).\r\n* When the rate-limit is enabled, it may execute up to `N` tasks per second.\r\n* The rate-limit applies across all executor threads, not per-thread.\r\n* No bursts are allowed. Meaning, if the limit is 10 requests per second I expect one request to begin every 100ms. I don&#39;t want all threads firing at once then remaining idle for the rest of the second.\r\n* The rate-limit is dynamic. If a request fails, the rate decreases. If a request succeeds, the rate increases.\r\n* Threads are considered idle when no tasks are ready for execution (taking the rate limit into consideration). Meaning, I expect `ThreadPoolExecutor` to flag these threads are idle and spin them down as it sees fit as opposed to blocking the threads until the rate-limit is met. On the flip side, threads should spin up again once it&#39;s time to execute the next task.\r\n\r\nWhat I&#39;ve Looked Into\r\n---\r\n\r\n* [ScheduledThreadPoolExecutor](https://docs.oracle.com/javase/9/docs/api/java/util/concurrent/ScheduledThreadPoolExecutor.html) and [DelayedQueue](https://docs.oracle.com/javase/9/docs/api/java/util/concurrent/DelayQueue.html) assume that the execution delay is known at event-queuing time, whereas in my case the rate may change between the time a task is queued and the time it is executed.\r\n* [RateLimiter](http://google.github.io/guava/releases/snapshot-jre/api/docs/com/google/common/util/concurrent/RateLimiter.html) will probably form part of the answer but is not enough on its own.","title":"Non-blocking rate-limited ThreadPoolExecutor","body":"<p>I am hitting an HTTP server concurrently with multiple connections. I'd like to throttle the clients in response to servers indicating that requests are coming in too fast. I do not wish to change the HTTP library I am using but rather I'd like to extend it.</p>\n\n<p>To that end, <strong>how do I implement a <a href=\"https://docs.oracle.com/javase/9/docs/api/java/util/concurrent/ThreadPoolExecutor.html\" rel=\"noreferrer\">ThreadPoolExecutor</a> with the following constraints?</strong></p>\n\n<ul>\n<li>The executor has an optional rate limit.</li>\n<li>When the rate-limit is disabled, it executes tasks as quickly as possible (normal behavior for a <code>ThreadPoolExecutor</code>).</li>\n<li>When the rate-limit is enabled, it may execute up to <code>N</code> tasks per second.</li>\n<li>The rate-limit applies across all executor threads, not per-thread.</li>\n<li>No bursts are allowed. Meaning, if the limit is 10 requests per second I expect one request to begin every 100ms. I don't want all threads firing at once then remaining idle for the rest of the second.</li>\n<li>The rate-limit is dynamic. If a request fails, the rate decreases. If a request succeeds, the rate increases.</li>\n<li>Threads are considered idle when no tasks are ready for execution (taking the rate limit into consideration). Meaning, I expect <code>ThreadPoolExecutor</code> to flag these threads are idle and spin them down as it sees fit as opposed to blocking the threads until the rate-limit is met. On the flip side, threads should spin up again once it's time to execute the next task.</li>\n</ul>\n\n<h2>What I've Looked Into</h2>\n\n<ul>\n<li><a href=\"https://docs.oracle.com/javase/9/docs/api/java/util/concurrent/ScheduledThreadPoolExecutor.html\" rel=\"noreferrer\">ScheduledThreadPoolExecutor</a> and <a href=\"https://docs.oracle.com/javase/9/docs/api/java/util/concurrent/DelayQueue.html\" rel=\"noreferrer\">DelayedQueue</a> assume that the execution delay is known at event-queuing time, whereas in my case the rate may change between the time a task is queued and the time it is executed.</li>\n<li><a href=\"http://google.github.io/guava/releases/snapshot-jre/api/docs/com/google/common/util/concurrent/RateLimiter.html\" rel=\"noreferrer\">RateLimiter</a> will probably form part of the answer but is not enough on its own.</li>\n</ul>\n"},{"tags":["java","file-upload","apache-commons-fileupload"],"owner":{"account_id":9610071,"reputation":2910,"user_id":7134737,"accept_rate":45,"display_name":"ng.newbie"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":313,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1689864449,"creation_date":1685521846,"question_id":76371594,"body_markdown":"I am using Apache Commons FileUpload to process my fileuploads in my Azure Functions.\r\n\r\nThe code is the following:\r\n\r\n    @FunctionName(&quot;HttpTrigger-Java&quot;)\r\n    public HttpResponseMessage run(\r\n            @HttpTrigger(name = &quot;req&quot;, methods = {HttpMethod.GET, HttpMethod.POST}, authLevel = AuthorizationLevel.ANONYMOUS) HttpRequestMessage&lt;Optional&lt;String&gt;&gt; request,\r\n            final ExecutionContext context) {\r\n        String contentType = request.getHeaders().get(&quot;content-type&quot;); // Get content-type header\r\n        // here the &quot;content-type&quot; must be lower-case\r\n        String body = request.getBody().get(); // Get request body\r\n        InputStream in = new ByteArrayInputStream(body.getBytes()); // Convert body to an input stream\r\n        String boundary = contentType.split(&quot;;&quot;)[1].split(&quot;=&quot;)[1]; // Get boundary from content-type header\r\n        int bufSize = 1024;\r\n        MultipartStream multipartStream  = new MultipartStream(in, boundary.getBytes(), bufSize, null); // Using MultipartStream to parse body input stream\r\n        // the code below comes from the SO thread above\r\n        // you can fetch a file content from readBodyData \r\n        // after the headers Content-Disposition: form-data; name=&quot;upfile&quot;; filename=&quot;test.txt&quot; \\n Content-Type: text/plain\r\n        boolean nextPart = multipartStream.skipPreamble();\r\n        while (nextPart) {\r\n            String header = multipartStream.readHeaders();\r\n            System.out.println(&quot;&quot;);\r\n            System.out.println(&quot;Headers:&quot;);\r\n            System.out.println(header);\r\n            System.out.println(&quot;Body:&quot;);\r\n            multipartStream.readBodyData(System.out);\r\n            System.out.println(&quot;&quot;);\r\n            nextPart = multipartStream.readBoundary();\r\n        }\r\n        return request.createResponseBuilder(HttpStatus.OK).body(&quot;Success&quot;).build();\r\n    }\r\n\r\nTaken from [here][1].\r\n\r\n\r\nThere is a new vulnerability specifying a DOS attack can be achieved by sending a very large input as Commons FileUpload does not limit the request parts.\r\n\r\n**More details here:**\r\n\r\nhttps://github.com/advisories/GHSA-hfrx-6qgj-fp6c\r\n\r\nhttps://devhub.checkmarx.com/cve-details/CVE-2023-24998/\r\n\r\nIf you read the second link you will notice that even after upgrading to version 1.5 you need to set `FileUploadBase#setFileCountMax`.\r\n\r\n**But how do I do that when using the low-level `MultipartStream` ?** \r\n\r\n**Is it even required ?**\r\n\r\nI am not a Commons FileUpload Expert.\r\n\r\n  [1]: https://stackoverflow.com/a/54511067/7134737","title":"commons fileupload CVE-2023-24998 - Any special configurations required when using MultipartStream?","body":"<p>I am using Apache Commons FileUpload to process my fileuploads in my Azure Functions.</p>\n<p>The code is the following:</p>\n<pre><code>@FunctionName(&quot;HttpTrigger-Java&quot;)\npublic HttpResponseMessage run(\n        @HttpTrigger(name = &quot;req&quot;, methods = {HttpMethod.GET, HttpMethod.POST}, authLevel = AuthorizationLevel.ANONYMOUS) HttpRequestMessage&lt;Optional&lt;String&gt;&gt; request,\n        final ExecutionContext context) {\n    String contentType = request.getHeaders().get(&quot;content-type&quot;); // Get content-type header\n    // here the &quot;content-type&quot; must be lower-case\n    String body = request.getBody().get(); // Get request body\n    InputStream in = new ByteArrayInputStream(body.getBytes()); // Convert body to an input stream\n    String boundary = contentType.split(&quot;;&quot;)[1].split(&quot;=&quot;)[1]; // Get boundary from content-type header\n    int bufSize = 1024;\n    MultipartStream multipartStream  = new MultipartStream(in, boundary.getBytes(), bufSize, null); // Using MultipartStream to parse body input stream\n    // the code below comes from the SO thread above\n    // you can fetch a file content from readBodyData \n    // after the headers Content-Disposition: form-data; name=&quot;upfile&quot;; filename=&quot;test.txt&quot; \\n Content-Type: text/plain\n    boolean nextPart = multipartStream.skipPreamble();\n    while (nextPart) {\n        String header = multipartStream.readHeaders();\n        System.out.println(&quot;&quot;);\n        System.out.println(&quot;Headers:&quot;);\n        System.out.println(header);\n        System.out.println(&quot;Body:&quot;);\n        multipartStream.readBodyData(System.out);\n        System.out.println(&quot;&quot;);\n        nextPart = multipartStream.readBoundary();\n    }\n    return request.createResponseBuilder(HttpStatus.OK).body(&quot;Success&quot;).build();\n}\n</code></pre>\n<p>Taken from <a href=\"https://stackoverflow.com/a/54511067/7134737\">here</a>.</p>\n<p>There is a new vulnerability specifying a DOS attack can be achieved by sending a very large input as Commons FileUpload does not limit the request parts.</p>\n<p><strong>More details here:</strong></p>\n<p><a href=\"https://github.com/advisories/GHSA-hfrx-6qgj-fp6c\" rel=\"nofollow noreferrer\">https://github.com/advisories/GHSA-hfrx-6qgj-fp6c</a></p>\n<p><a href=\"https://devhub.checkmarx.com/cve-details/CVE-2023-24998/\" rel=\"nofollow noreferrer\">https://devhub.checkmarx.com/cve-details/CVE-2023-24998/</a></p>\n<p>If you read the second link you will notice that even after upgrading to version 1.5 you need to set <code>FileUploadBase#setFileCountMax</code>.</p>\n<p><strong>But how do I do that when using the low-level <code>MultipartStream</code> ?</strong></p>\n<p><strong>Is it even required ?</strong></p>\n<p>I am not a Commons FileUpload Expert.</p>\n"},{"tags":["java","spring","spring-boot","spring-webflux","spring-data-r2dbc"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1689864010,"post_id":76730902,"comment_id":135276313,"body_markdown":"Is mysql actually being *used* now? (As opposed to H2) I thought it didn&#39;t support r2dbc yet","body":"Is mysql actually being <i>used</i> now? (As opposed to H2) I thought it didn&#39;t support r2dbc yet"},{"owner":{"account_id":7352305,"reputation":125,"user_id":5598020,"display_name":"Gestalt"},"score":0,"creation_date":1689864332,"post_id":76730902,"comment_id":135276373,"body_markdown":"The effective pom has this driver r2dbc-mysql with groupId io.asyncer. My configuration is for my local mysql db as well, although I haven&#39;t performed a CRUD operation yet.","body":"The effective pom has this driver r2dbc-mysql with groupId io.asyncer. My configuration is for my local mysql db as well, although I haven&#39;t performed a CRUD operation yet."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1689864576,"post_id":76730902,"comment_id":135276432,"body_markdown":"I&#39;m not quite sure whether that was a yes or no. I&#39;m guessing &quot;no&quot; so far...","body":"I&#39;m not quite sure whether that was a yes or no. I&#39;m guessing &quot;no&quot; so far..."},{"owner":{"account_id":7352305,"reputation":125,"user_id":5598020,"display_name":"Gestalt"},"score":0,"creation_date":1689866802,"post_id":76730902,"comment_id":135277083,"body_markdown":"I was just able to run a fetchById query from a ReactiveCrudRepository on mysql&#39;s airport sample db&#39;s booking table. At least reactive reads are supported in 2023.","body":"I was just able to run a fetchById query from a ReactiveCrudRepository on mysql&#39;s airport sample db&#39;s booking table. At least reactive reads are supported in 2023."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1689872442,"post_id":76730902,"comment_id":135278241,"body_markdown":"That&#39;s good, try a save and check that a write has occurred in the mysql table","body":"That&#39;s good, try a save and check that a write has occurred in the mysql table"}],"owner":{"account_id":7352305,"reputation":125,"user_id":5598020,"display_name":"Gestalt"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":220,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689864403,"creation_date":1689863187,"question_id":76730902,"body_markdown":"    java.version=17\r\n    spring-boot-starter-data-r2dbc=3.1.1\r\n    spring-boot-starter-webflux=3.1.1\r\n\r\nI have specified the following in application.properties to be picked up by the auto configuration.\r\n\r\n    spring.r2dbc.url=r2dbc:pool:mysql://localhost:3306/airportdb\r\n    spring.r2dbc.username=admin\r\n    spring.r2dbc.password=REDACTED\r\n    logging.level.root=DEBUG\r\n\r\nWhen I start the Spring boot application I get the following exception at the bottom of the log.\r\n\r\n    Caused by: java.lang.IllegalStateException: Unable to create a ConnectionFactory for &#39;ConnectionFactoryOptions{options={database=airportdb, host=localhost, driver=mysql, password=REDACTED, protocol=, port=3306, user=admin}}&#39;. Available drivers: [ pool ]\r\n\r\nNow, I have been able to solve this exception by adding this snippet to my pom.xml in the dependencies section.\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;io.r2dbc&lt;/groupId&gt;\r\n        &lt;artifactId&gt;r2dbc-h2&lt;/artifactId&gt;\r\n        &lt;scope&gt;runtime&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n\r\n**EDIT- This is already a part of my effective pom, I&#39;m not adding it new, just changing it&#39;s scope which resolves my issue.**\r\n\r\nAs soon as I add this to my pom, I&#39;m able to launch the app and it works flawlessly but for the life of me I can&#39;t understand what the original problem was and how just changing the scope of this dependency which has been pulled in by `spring-boot-starter-data-r2dbc` solves it. Thanks.","title":"Unable to create R2DBC connection factory for mysql through auto configuration unless change scope of another dependency to runtime","body":"<pre><code>java.version=17\nspring-boot-starter-data-r2dbc=3.1.1\nspring-boot-starter-webflux=3.1.1\n</code></pre>\n<p>I have specified the following in application.properties to be picked up by the auto configuration.</p>\n<pre><code>spring.r2dbc.url=r2dbc:pool:mysql://localhost:3306/airportdb\nspring.r2dbc.username=admin\nspring.r2dbc.password=REDACTED\nlogging.level.root=DEBUG\n</code></pre>\n<p>When I start the Spring boot application I get the following exception at the bottom of the log.</p>\n<pre><code>Caused by: java.lang.IllegalStateException: Unable to create a ConnectionFactory for 'ConnectionFactoryOptions{options={database=airportdb, host=localhost, driver=mysql, password=REDACTED, protocol=, port=3306, user=admin}}'. Available drivers: [ pool ]\n</code></pre>\n<p>Now, I have been able to solve this exception by adding this snippet to my pom.xml in the dependencies section.</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;io.r2dbc&lt;/groupId&gt;\n    &lt;artifactId&gt;r2dbc-h2&lt;/artifactId&gt;\n    &lt;scope&gt;runtime&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p><strong>EDIT- This is already a part of my effective pom, I'm not adding it new, just changing it's scope which resolves my issue.</strong></p>\n<p>As soon as I add this to my pom, I'm able to launch the app and it works flawlessly but for the life of me I can't understand what the original problem was and how just changing the scope of this dependency which has been pulled in by <code>spring-boot-starter-data-r2dbc</code> solves it. Thanks.</p>\n"},{"tags":["java"],"answers":[{"tags":[],"owner":{"account_id":182101,"reputation":48239,"user_id":416564,"accept_rate":100,"display_name":"Johan Sj&#246;berg"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1297893412,"creation_date":1297893412,"answer_id":5022632,"question_id":5022604,"body_markdown":"Sure, just add routine `getA()` in you class B, and change the line in your constructor to\r\n\r\n    public A() {\r\n        this.b = new B(this);\r\n    }\r\n\r\nThis of course assumes your class B has a constructor which accepts an `A`, e.g., \r\n   \r\n    public B(A a) {\r\n        this.a = a;\r\n    }","title":"Java: how does a component know its owner","body":"<p>Sure, just add routine <code>getA()</code> in you class B, and change the line in your constructor to</p>\n\n<pre><code>public A() {\n    this.b = new B(this);\n}\n</code></pre>\n\n<p>This of course assumes your class B has a constructor which accepts an <code>A</code>, e.g., </p>\n\n<pre><code>public B(A a) {\n    this.a = a;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7278,"reputation":6005,"user_id":12582,"display_name":"Jason Terk"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1297893475,"creation_date":1297893475,"answer_id":5022640,"question_id":5022604,"body_markdown":"`B` needs an explicit reference to its owner:\r\n\r\n    public class B {\r\n      private final A owner;\r\n\r\n      public B(A owner) {\r\n        this.owner = owner;\r\n      }\r\n\r\n      public A getOwner() {\r\n        return owner;\r\n      }\r\n    }\r\n\r\nAnd in `A`:\r\n\r\n    public A() {\r\n      b = new B(this);\r\n    }","title":"Java: how does a component know its owner","body":"<p><code>B</code> needs an explicit reference to its owner:</p>\n\n<pre><code>public class B {\n  private final A owner;\n\n  public B(A owner) {\n    this.owner = owner;\n  }\n\n  public A getOwner() {\n    return owner;\n  }\n}\n</code></pre>\n\n<p>And in <code>A</code>:</p>\n\n<pre><code>public A() {\n  b = new B(this);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":36858,"reputation":113744,"user_id":105224,"accept_rate":73,"display_name":"Andreas Dolk"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1297893811,"creation_date":1297893489,"answer_id":5022642,"question_id":5022604,"body_markdown":"No, that&#39;s not possible. You&#39;re looking for backreferences, but we have to create them in the code if needed.\r\n\r\nIf you want to collect all referencers to B, you could do this with a constructor or with a factory (pattern) that creates B&#39;s. I&#39;ll show the factory:\r\n\r\n    public class B {\r\n    \r\n       private static Set&lt;? extends Object&gt; referencers = new HashSet&lt;? extends Object&gt;();\r\n       private B(){}  // no public constructor\r\n       public static create(Object parent) {\r\n         // cooperative approach, the caller should pass &quot;this&quot;\r\n         referencers.add(parent);\r\n       }\r\n       public static remove(Object parent) {\r\n         referencers.remove(parent);\r\n       }\r\n    }\r\n\r\n","title":"Java: how does a component know its owner","body":"<p>No, that's not possible. You're looking for backreferences, but we have to create them in the code if needed.</p>\n\n<p>If you want to collect all referencers to B, you could do this with a constructor or with a factory (pattern) that creates B's. I'll show the factory:</p>\n\n<pre><code>public class B {\n\n   private static Set&lt;? extends Object&gt; referencers = new HashSet&lt;? extends Object&gt;();\n   private B(){}  // no public constructor\n   public static create(Object parent) {\n     // cooperative approach, the caller should pass \"this\"\n     referencers.add(parent);\n   }\n   public static remove(Object parent) {\n     referencers.remove(parent);\n   }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":173810,"reputation":2314,"user_id":402755,"accept_rate":47,"display_name":"padis"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1297893496,"creation_date":1297893496,"answer_id":5022645,"question_id":5022604,"body_markdown":"No you cannot. B has no reference to A.","title":"Java: how does a component know its owner","body":"<p>No you cannot. B has no reference to A.</p>\n"},{"tags":[],"owner":{"account_id":90221,"reputation":80129,"user_id":248432,"accept_rate":85,"display_name":"Peter Knego"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1297893506,"creation_date":1297893506,"answer_id":5022646,"question_id":5022604,"body_markdown":"No.\r\n\r\nClass a has reference to class B, but class B has no reference to class A. References are one way only.","title":"Java: how does a component know its owner","body":"<p>No.</p>\n\n<p>Class a has reference to class B, but class B has no reference to class A. References are one way only.</p>\n"},{"tags":[],"owner":{"account_id":96690,"reputation":37290,"user_id":262683,"display_name":"Costi Ciudatu"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1297893740,"creation_date":1297893740,"answer_id":5022681,"question_id":5022604,"body_markdown":"If you need B to always be bound to an instance of A, make B an inner class of A:\r\n\r\n    class A {\r\n\r\n        B b = new B();\r\n\r\n        class B {\r\n            String getSome() {\r\n                // this will refer to the enclosing A\r\n                return A.this.toString();\r\n            }\r\n        }\r\n    }\r\n\r\nAn inner (non-static) class always has an implicit reference to the enclosing instance and cannot exist without it. In order to instantiate B from outside, you need a nasty syntax: `B b = new A().new B();`","title":"Java: how does a component know its owner","body":"<p>If you need B to always be bound to an instance of A, make B an inner class of A:</p>\n\n<pre><code>class A {\n\n    B b = new B();\n\n    class B {\n        String getSome() {\n            // this will refer to the enclosing A\n            return A.this.toString();\n        }\n    }\n}\n</code></pre>\n\n<p>An inner (non-static) class always has an implicit reference to the enclosing instance and cannot exist without it. In order to instantiate B from outside, you need a nasty syntax: <code>B b = new A().new B();</code></p>\n"},{"tags":[],"owner":{"account_id":93208,"reputation":6939,"user_id":255139,"accept_rate":44,"display_name":"Kalpesh Soni"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1297893837,"creation_date":1297893837,"answer_id":5022690,"question_id":5022604,"body_markdown":"you can also use inner classes\r\n\r\npackage test;\r\n\r\npublic class A {\r\n\r\n\tB b = null;\r\n\r\n\tpublic B getB()\r\n\t{\r\n\t\treturn b;\r\n\t}\r\n\r\n\tpublic class B {\r\n\t\r\n\t\tpublic A getA()\r\n\t\t{\r\n\t\t\treturn A.this;\r\n\t\t}\r\n\t}\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tB b = new A().new B();\r\n\t}\r\n\r\n  }\r\n","title":"Java: how does a component know its owner","body":"<p>you can also use inner classes</p>\n\n<p>package test;</p>\n\n<p>public class A {</p>\n\n<pre><code>B b = null;\n\npublic B getB()\n{\n    return b;\n}\n\npublic class B {\n\n    public A getA()\n    {\n        return A.this;\n    }\n}\n\npublic static void main(String[] args) {\n    B b = new A().new B();\n}\n</code></pre>\n\n<p>}</p>\n"},{"tags":[],"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1297903778,"creation_date":1297903778,"answer_id":5023964,"question_id":5022604,"body_markdown":"Nope. There is no such thing as an &#39;owner&#39; in Java. Any object can be referenced by any number of other objects.","title":"Java: how does a component know its owner","body":"<p>Nope. There is no such thing as an 'owner' in Java. Any object can be referenced by any number of other objects.</p>\n"}],"owner":{"account_id":238684,"reputation":22543,"user_id":507738,"accept_rate":71,"display_name":"MC Emperor"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5227,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":5022632,"answer_count":8,"score":2,"last_activity_date":1689864226,"creation_date":1297893273,"question_id":5022604,"body_markdown":"Suppose I have a class `A` and a class `B`.\r\n\r\n    public class A {\r\n\r\n        private B b;\r\n\r\n        public A() {\r\n            this.b = new B();\r\n        }\r\n\r\n        public B getB() {\r\n            return this.b;\r\n        }\r\n    }\r\n\r\n    public class B {\r\n\r\n        public String getSome() {\r\n            return &quot;Get some!&quot;;\r\n        }\r\n    }\r\n\r\nI know I can get B through A, because A _has_ (or _owns_) B: `new A().getB()`.  \r\nBut if I have B, can I get A?","title":"Java: how does a component know its owner","body":"<p>Suppose I have a class <code>A</code> and a class <code>B</code>.</p>\n\n<pre><code>public class A {\n\n    private B b;\n\n    public A() {\n        this.b = new B();\n    }\n\n    public B getB() {\n        return this.b;\n    }\n}\n\npublic class B {\n\n    public String getSome() {\n        return \"Get some!\";\n    }\n}\n</code></pre>\n\n<p>I know I can get B through A, because A <em>has</em> (or <em>owns</em>) B: <code>new A().getB()</code>.<br>\nBut if I have B, can I get A?</p>\n"},{"tags":["java","android","android-layout","textview","imageview"],"owner":{"account_id":27817647,"reputation":591,"user_id":21238708,"display_name":"Jatin guglani"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":87,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":0,"score":1,"last_activity_date":1689864149,"creation_date":1683098731,"question_id":76161364,"body_markdown":"Is there a way to have a Textview that can adjust its content when an image or another Textview is placed inside it(overlapped) (as shown in the images below)\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\nThings That I have tried so far:\r\n\r\n1) LeadingMarginSpan.LeadingMarginSpan2: I&#39;m only able to place an image at the top left corner but I want to place an image in different positions (center,  right, bottom, etc).\r\n\r\n2) I came across a library [FlowtextView][3] but I would rather want to implement it on my own.\r\n\r\n\r\nIn macOS, we can achieve the same for containers containing text, the textstorage can be modified to add [exclusion paths][4] around which text would flow. The frame of the overlapping container can be converted into an NSBezierpath and set as an exclusion for the text. (as shown in the image below)\r\n\r\n[![enter image description here][5]][5]\r\n\r\nIs there any way to achieve the same in Android?\r\n\r\n  [1]: https://i.stack.imgur.com/1ojk9m.png\r\n  [2]: https://i.stack.imgur.com/03IjEm.png\r\n  [3]: https://github.com/deano2390/flowtextview\r\n  [4]: https://developer.apple.com/documentation/appkit/nstextcontainer/1444569-exclusionpaths\r\n  [5]: https://i.stack.imgur.com/0n3dgm.png","title":"Flow a TextView around an ImageView or another TextView in android","body":"<p>Is there a way to have a Textview that can adjust its content when an image or another Textview is placed inside it(overlapped) (as shown in the images below)</p>\n<p><a href=\"https://i.stack.imgur.com/1ojk9m.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1ojk9m.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/03IjEm.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/03IjEm.png\" alt=\"enter image description here\" /></a></p>\n<p>Things That I have tried so far:</p>\n<ol>\n<li><p>LeadingMarginSpan.LeadingMarginSpan2: I'm only able to place an image at the top left corner but I want to place an image in different positions (center,  right, bottom, etc).</p>\n</li>\n<li><p>I came across a library <a href=\"https://github.com/deano2390/flowtextview\" rel=\"nofollow noreferrer\">FlowtextView</a> but I would rather want to implement it on my own.</p>\n</li>\n</ol>\n<p>In macOS, we can achieve the same for containers containing text, the textstorage can be modified to add <a href=\"https://developer.apple.com/documentation/appkit/nstextcontainer/1444569-exclusionpaths\" rel=\"nofollow noreferrer\">exclusion paths</a> around which text would flow. The frame of the overlapping container can be converted into an NSBezierpath and set as an exclusion for the text. (as shown in the image below)</p>\n<p><a href=\"https://i.stack.imgur.com/0n3dgm.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0n3dgm.png\" alt=\"enter image description here\" /></a></p>\n<p>Is there any way to achieve the same in Android?</p>\n"},{"tags":["java","spring","spring-boot","database-connectivity"],"comments":[{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1421750644,"post_id":28042426,"comment_id":44469523,"body_markdown":"Can you add the databse configuration?","body":"Can you add the databse configuration?"},{"owner":{"account_id":1209390,"reputation":579,"user_id":1178240,"display_name":"Alan Barrows"},"score":0,"creation_date":1421754783,"post_id":28042426,"comment_id":44471934,"body_markdown":"you are mixing yaml and properties together. `hibernate.dialect: org.hibernate.dialect.MySQL5Dialect` would be `hibernate.dialect= org.hibernate.dialect.MySQL5Dialect`","body":"you are mixing yaml and properties together. <code>hibernate.dialect: org.hibernate.dialect.MySQL5Dialect</code> would be <code>hibernate.dialect= org.hibernate.dialect.MySQL5Dialect</code>"},{"owner":{"account_id":222186,"reputation":13529,"user_id":480632,"accept_rate":74,"display_name":"J.Olufsen"},"score":0,"creation_date":1421756156,"post_id":28042426,"comment_id":44472766,"body_markdown":"Changed as you suggested but error persists","body":"Changed as you suggested but error persists"},{"owner":{"account_id":212417,"reputation":43614,"user_id":465223,"accept_rate":75,"display_name":"dunni"},"score":0,"creation_date":1421759953,"post_id":28042426,"comment_id":44475011,"body_markdown":"It looks like a classpath problem. What kind of dependency do you have for your database, and how is it defined in the pom.xml (e.g. which scope etc.). Can you post your pom.xml?","body":"It looks like a classpath problem. What kind of dependency do you have for your database, and how is it defined in the pom.xml (e.g. which scope etc.). Can you post your pom.xml?"},{"owner":{"account_id":126734,"reputation":17496,"user_id":323421,"display_name":"Sergii Pozharov"},"score":0,"creation_date":1432889489,"post_id":28042426,"comment_id":49123994,"body_markdown":"Try removing @Transactional from UserDao","body":"Try removing @Transactional from UserDao"},{"owner":{"account_id":83518,"reputation":6215,"user_id":234110,"accept_rate":67,"display_name":"Anand Rockzz"},"score":0,"creation_date":1483157665,"post_id":28042426,"comment_id":70013742,"body_markdown":"In my case it was [spring-boot-starter-data-jpa](http://stackoverflow.com/a/37554576/234110)","body":"In my case it was <a href=\"http://stackoverflow.com/a/37554576/234110\">spring-boot-starter-data-jpa</a>"},{"owner":{"account_id":4356023,"reputation":339,"user_id":16372970,"display_name":"Hari Reddy"},"score":0,"creation_date":1690611298,"post_id":28042426,"comment_id":135380517,"body_markdown":"In my case, I was using `PostgreSQL` but was still using the `spring.datasource.url=jdbc:mysql://localhost:5432/mystore` where I should have used `jdbc:postgresql://localhost:5432/mystore`. Posting in hopes that I&#39;m not the lone kind out here.","body":"In my case, I was using <code>PostgreSQL</code> but was still using the <code>spring.datasource.url=jdbc:mysql:&#47;&#47;localhost:5432&#47;mystore</code> where I should have used <code>jdbc:postgresql:&#47;&#47;localhost:5432&#47;mystore</code>. Posting in hopes that I&#39;m not the lone kind out here."}],"answers":[{"tags":[],"owner":{"account_id":1209390,"reputation":579,"user_id":1178240,"display_name":"Alan Barrows"},"down_vote_count":1,"up_vote_count":39,"is_accepted":false,"score":38,"last_activity_date":1421751914,"creation_date":1421751914,"answer_id":28043751,"question_id":28042426,"body_markdown":"From the looks of things you haven&#39;t passed enough data to Spring Boot to configure the datasource\r\n\r\nCreate/In your existing `application.properties` add the following\r\n\r\n    spring.datasource.driverClassName=\r\n    spring.datasource.url=\r\n    spring.datasource.username=\r\n    spring.datasource.password=\r\n\r\nmaking sure you append a value for each of properties.","title":"Spring Boot - Error creating bean with name &#39;dataSource&#39; defined in class path resource","body":"<p>From the looks of things you haven't passed enough data to Spring Boot to configure the datasource</p>\n\n<p>Create/In your existing <code>application.properties</code> add the following</p>\n\n<pre><code>spring.datasource.driverClassName=\nspring.datasource.url=\nspring.datasource.username=\nspring.datasource.password=\n</code></pre>\n\n<p>making sure you append a value for each of properties.</p>\n"},{"tags":[],"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1421756729,"creation_date":1421756729,"answer_id":28045375,"question_id":28042426,"body_markdown":"The `hibernate.*` properties are useless, they should be `spring.jpa.*` properties. Not to mention that you are trying to override those already set by using the `spring.jpa.*` properties. (For the explanation of each property I strongly suggest a read of the Spring Boot [reference guide][1].\r\n\r\n    spring.jpa.database-platform = org.hibernate.dialect.MySQL5Dialect\r\n    spring.jpa.show-sql = true\r\n\r\n    # Hibernate\r\n    spring.jpa.hibernate.ddl-auto=update\r\n\r\nAlso the packages to scan are automatically detected based on the base package of your `Application` class. If you want to specify something else use the `@EntityScan` annotation. Also specifying the most toplevel package isn&#39;t really wise as it will scan the whole class path which will severely impact performance.\r\n\r\n[1]: http://docs.spring.io/spring-boot/docs/1.2.1.RELEASE/reference/htmlsingle/#boot-features-jpa-and-spring-data","title":"Spring Boot - Error creating bean with name &#39;dataSource&#39; defined in class path resource","body":"<p>The <code>hibernate.*</code> properties are useless, they should be <code>spring.jpa.*</code> properties. Not to mention that you are trying to override those already set by using the <code>spring.jpa.*</code> properties. (For the explanation of each property I strongly suggest a read of the Spring Boot <a href=\"http://docs.spring.io/spring-boot/docs/1.2.1.RELEASE/reference/htmlsingle/#boot-features-jpa-and-spring-data\" rel=\"nofollow\">reference guide</a>.</p>\n\n<pre><code>spring.jpa.database-platform = org.hibernate.dialect.MySQL5Dialect\nspring.jpa.show-sql = true\n\n# Hibernate\nspring.jpa.hibernate.ddl-auto=update\n</code></pre>\n\n<p>Also the packages to scan are automatically detected based on the base package of your <code>Application</code> class. If you want to specify something else use the <code>@EntityScan</code> annotation. Also specifying the most toplevel package isn't really wise as it will scan the whole class path which will severely impact performance.</p>\n"},{"tags":[],"owner":{"account_id":155804,"reputation":411,"user_id":372701,"display_name":"gcgan"},"down_vote_count":0,"up_vote_count":41,"is_accepted":false,"score":41,"last_activity_date":1425109771,"creation_date":1425106567,"answer_id":28779067,"question_id":28042426,"body_markdown":"Maybe you forgot the MySQL JDBC driver.\r\n\r\n&lt;!-- language: lang-xml --&gt;\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;mysql&lt;/groupId&gt;\r\n        &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n        &lt;version&gt;5.1.34&lt;/version&gt;\r\n    &lt;/dependency&gt;","title":"Spring Boot - Error creating bean with name &#39;dataSource&#39; defined in class path resource","body":"<p>Maybe you forgot the MySQL JDBC driver.</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;mysql&lt;/groupId&gt;\n    &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n    &lt;version&gt;5.1.34&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5307379,"reputation":2578,"user_id":4234794,"display_name":"Jason Warner"},"down_vote_count":3,"up_vote_count":204,"is_accepted":true,"score":201,"last_activity_date":1649724633,"creation_date":1435904483,"answer_id":31199853,"question_id":28042426,"body_markdown":"Looks like the initial problem is with the auto-config.\r\n\r\nIf you don&#39;t need the datasource, simply remove it from the auto-config process:\r\n\r\n    @EnableAutoConfiguration(exclude={DataSourceAutoConfiguration.class})\r\n\r\n\r\n\r\nEdit:\r\nIf using @SpringBootApplication in your main class:\r\n\r\n    @SpringBootApplication(exclude={DataSourceAutoConfiguration.class})","title":"Spring Boot - Error creating bean with name &#39;dataSource&#39; defined in class path resource","body":"<p>Looks like the initial problem is with the auto-config.</p>\n<p>If you don't need the datasource, simply remove it from the auto-config process:</p>\n<pre><code>@EnableAutoConfiguration(exclude={DataSourceAutoConfiguration.class})\n</code></pre>\n<p>Edit:\nIf using @SpringBootApplication in your main class:</p>\n<pre><code>@SpringBootApplication(exclude={DataSourceAutoConfiguration.class})\n</code></pre>\n"},{"tags":[],"owner":{"account_id":143673,"reputation":1695,"user_id":352173,"accept_rate":25,"display_name":"Remy Mellet"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1440690363,"creation_date":1440690363,"answer_id":32254001,"question_id":28042426,"body_markdown":"Are you running the application as a jar? ( java -jar xxxx.jar)\r\n\r\nIf so, do you have the application.properties stored in that jar ?\r\n\r\nIf no, try to figure out why :\r\n\r\n- To be automatically package in the jar, the files can be in : src/main/resources/application.properties\r\n- The maven plugin in the pom.xml can also be configured","title":"Spring Boot - Error creating bean with name &#39;dataSource&#39; defined in class path resource","body":"<p>Are you running the application as a jar? ( java -jar xxxx.jar)</p>\n\n<p>If so, do you have the application.properties stored in that jar ?</p>\n\n<p>If no, try to figure out why :</p>\n\n<ul>\n<li>To be automatically package in the jar, the files can be in : src/main/resources/application.properties</li>\n<li>The maven plugin in the pom.xml can also be configured</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":198628,"reputation":625,"user_id":443398,"display_name":"AdrianVeidt"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1444568574,"creation_date":1444568574,"answer_id":33065259,"question_id":28042426,"body_markdown":"In my case this was happening because org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration.dataSource is an autowired field without a Qualifier and I am using multiple datasources with qualified names.  I solved this problem by using @Primary arbitrarily on one of my dataSource bean configurations like so\r\n\r\n   \t@Primary\r\n    @Bean(name=&quot;oneOfManyDataSources&quot;)\r\n    public DataSource dataSource() { ... }\r\n\r\nI suppose they want you to implement AbstractRoutingDataSource, and then that auto configuration will just work because no qualifier is needed, you just have a single data source that allows your beans to resolve to the appropriate DataSource as needed.  Then you don&#39;t need the @Primary or @Qualifier annotations at all, because you just have a single DataSource.\r\n\r\nIn any case, my solution worked because my beans specify DataSource by qualifier, and the JPA auto config stuff is happy because it has a single primary DataSource.  I am by no means recommending this as the &quot;right&quot; way to do things, but in my case it solved the problem quickly and did not deter the behavior of my application in any noticeable manner.  Will hopefully one day get around to implementing the AbstractRoutingDataSource and refactoring all the beans that need a specific DataSource and then perhaps that will be a neater solution.","title":"Spring Boot - Error creating bean with name &#39;dataSource&#39; defined in class path resource","body":"<p>In my case this was happening because org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration.dataSource is an autowired field without a Qualifier and I am using multiple datasources with qualified names.  I solved this problem by using @Primary arbitrarily on one of my dataSource bean configurations like so</p>\n\n<pre><code>@Primary\n@Bean(name=\"oneOfManyDataSources\")\npublic DataSource dataSource() { ... }\n</code></pre>\n\n<p>I suppose they want you to implement AbstractRoutingDataSource, and then that auto configuration will just work because no qualifier is needed, you just have a single data source that allows your beans to resolve to the appropriate DataSource as needed.  Then you don't need the @Primary or @Qualifier annotations at all, because you just have a single DataSource.</p>\n\n<p>In any case, my solution worked because my beans specify DataSource by qualifier, and the JPA auto config stuff is happy because it has a single primary DataSource.  I am by no means recommending this as the \"right\" way to do things, but in my case it solved the problem quickly and did not deter the behavior of my application in any noticeable manner.  Will hopefully one day get around to implementing the AbstractRoutingDataSource and refactoring all the beans that need a specific DataSource and then perhaps that will be a neater solution.</p>\n"},{"tags":[],"owner":{"account_id":4559404,"reputation":133,"user_id":3702158,"display_name":"Gaurav Anand"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1571847203,"creation_date":1448127498,"answer_id":33846494,"question_id":28042426,"body_markdown":"I was getting the same error, found out it was due to some of the dependencies missing in my pom.xml like that of Spring JPA, Hibernate, Mysql or maybe Jackson.\r\nSo make sure that dependencies are not missing in your pom.xml and check their version compatibility.\r\n\r\n    &lt;!-- Jpa and hibernate --&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-orm&lt;/artifactId&gt;\r\n        &lt;version&gt;4.2.2.RELEASE&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n        &lt;artifactId&gt;hibernate-entitymanager&lt;/artifactId&gt;\r\n        &lt;version&gt;5.0.3.Final&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;mysql&lt;/groupId&gt;\r\n        &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n        &lt;version&gt;5.1.6&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n","title":"Spring Boot - Error creating bean with name &#39;dataSource&#39; defined in class path resource","body":"<p>I was getting the same error, found out it was due to some of the dependencies missing in my pom.xml like that of Spring JPA, Hibernate, Mysql or maybe Jackson.\nSo make sure that dependencies are not missing in your pom.xml and check their version compatibility.</p>\n\n<pre><code>&lt;!-- Jpa and hibernate --&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-orm&lt;/artifactId&gt;\n    &lt;version&gt;4.2.2.RELEASE&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n    &lt;artifactId&gt;hibernate-entitymanager&lt;/artifactId&gt;\n    &lt;version&gt;5.0.3.Final&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;mysql&lt;/groupId&gt;\n    &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n    &lt;version&gt;5.1.6&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8284065,"reputation":1,"user_id":6227729,"display_name":"kazim"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1461116976,"creation_date":1461115969,"answer_id":36732315,"question_id":28042426,"body_markdown":"It worked for me you can try your:\r\nAdd this to VM options in Tomcat\r\n\r\n    -DdevBaseDir=&quot;C:\\Your_Project_Dir_Path&quot;","title":"Spring Boot - Error creating bean with name &#39;dataSource&#39; defined in class path resource","body":"<p>It worked for me you can try your:\nAdd this to VM options in Tomcat</p>\n\n<pre><code>-DdevBaseDir=\"C:\\Your_Project_Dir_Path\"\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8738653,"reputation":59,"user_id":6536363,"display_name":"user6536363"},"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1467353128,"creation_date":1467346543,"answer_id":38136959,"question_id":28042426,"body_markdown":"change below line of code\r\n\r\n    spring.datasource.driverClassName\r\n\r\nto\r\n\r\n    spring.datasource.driver-class-name","title":"Spring Boot - Error creating bean with name &#39;dataSource&#39; defined in class path resource","body":"<p>change below line of code</p>\n\n<pre><code>spring.datasource.driverClassName\n</code></pre>\n\n<p>to</p>\n\n<pre><code>spring.datasource.driver-class-name\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10299919,"reputation":11,"user_id":7598936,"display_name":"Mahesh Japkar"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1487683434,"creation_date":1487683434,"answer_id":42368525,"question_id":28042426,"body_markdown":"I was facing this issue even after supplying all required datasource properties in application.properties. Then I realized that properties configuration class was not getting scanned by Spring boot because it was in different package hierarchy compared to my Spring boot Application.java and hence no properties were applied to datasource object. \r\nI changed the package name of my properties configuration class and it started working. ","title":"Spring Boot - Error creating bean with name &#39;dataSource&#39; defined in class path resource","body":"<p>I was facing this issue even after supplying all required datasource properties in application.properties. Then I realized that properties configuration class was not getting scanned by Spring boot because it was in different package hierarchy compared to my Spring boot Application.java and hence no properties were applied to datasource object. \nI changed the package name of my properties configuration class and it started working. </p>\n"},{"tags":[],"owner":{"account_id":5005339,"reputation":29,"user_id":4633620,"display_name":"janakiram pulipati"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1490716435,"creation_date":1490716435,"answer_id":43074312,"question_id":28042426,"body_markdown":"If you&#39;re using application.properties in spring boot app, then just put the below line into application.properties and it should work:&lt;br&gt;\r\n&lt;b&gt;spring.datasource.url: jdbc:mysql://google/?cloudSqlInstance=&amp;socketFactory=com.google.cloud.sql.mysql.SocketFactory&amp;user=****&amp;password=****&lt;/b&gt;","title":"Spring Boot - Error creating bean with name &#39;dataSource&#39; defined in class path resource","body":"<p>If you're using application.properties in spring boot app, then just put the below line into application.properties and it should work:<br>\n<b>spring.datasource.url: jdbc:mysql://google/?cloudSqlInstance=&amp;socketFactory=com.google.cloud.sql.mysql.SocketFactory&amp;user=****&amp;password=****</b></p>\n"},{"tags":[],"owner":{"account_id":10933556,"reputation":11,"user_id":8035965,"display_name":"ram kumar"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1516343661,"creation_date":1516343661,"answer_id":48335388,"question_id":28042426,"body_markdown":"In my case I just ignored the following in application.properties file:\r\n\r\n\\# Hibernate\r\n\r\n\\#spring.jpa.hibernate.ddl-auto=update\r\n\r\nIt works for me....","title":"Spring Boot - Error creating bean with name &#39;dataSource&#39; defined in class path resource","body":"<p>In my case I just ignored the following in application.properties file:</p>\n\n<p># Hibernate</p>\n\n<p>#spring.jpa.hibernate.ddl-auto=update</p>\n\n<p>It works for me....</p>\n"},{"tags":[],"owner":{"account_id":13202527,"reputation":51,"user_id":9535362,"display_name":"Alexander P."},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1523979229,"creation_date":1523979229,"answer_id":49882173,"question_id":28042426,"body_markdown":"Check that you have database dependency at **runtime** group at build.gradle\r\n\r\n    runtime group: &#39;com.h2database&#39;, name: &#39;h2&#39;, version: &#39;1.4.194&#39;\r\n\r\nor change scope from test to **runtime** if you use Maven\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;com.h2database&lt;/groupId&gt;\r\n        &lt;artifactId&gt;h2&lt;/artifactId&gt;\r\n        &lt;version&gt;1.4.194&lt;/version&gt;\r\n        &lt;scope&gt;runtime&lt;/scope&gt;\r\n    &lt;/dependency&gt;","title":"Spring Boot - Error creating bean with name &#39;dataSource&#39; defined in class path resource","body":"<p>Check that you have database dependency at <strong>runtime</strong> group at build.gradle</p>\n\n<pre><code>runtime group: 'com.h2database', name: 'h2', version: '1.4.194'\n</code></pre>\n\n<p>or change scope from test to <strong>runtime</strong> if you use Maven</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.h2database&lt;/groupId&gt;\n    &lt;artifactId&gt;h2&lt;/artifactId&gt;\n    &lt;version&gt;1.4.194&lt;/version&gt;\n    &lt;scope&gt;runtime&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10447957,"reputation":329,"user_id":7702483,"display_name":"tyrantqiao"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1525178066,"creation_date":1525178066,"answer_id":50116561,"question_id":28042426,"body_markdown":"Give you something different, when you encounter this kind of error, cannot create \r\nbean datasource in a test case.\r\n\r\nIt might be caused by some reasons:\r\n\r\n 1. No datasource, you will need to create your datasource, h2 in-memory datasource or whatever, or you can choose the way like `exclude={datasource&#183;&#183;}`.\r\n 2. You have your datasource, like MySQL, but it still not work. It was caused by class `AutoConfigureTestDatabase`, It will choose a datasource for you which may cause ambiguity.\r\n\r\nSolution: add `@AutoConfigureTestDatabase(replace = AutoConfigureTestDatabase.Replace.NONE)` to avoid replace the default datasource.","title":"Spring Boot - Error creating bean with name &#39;dataSource&#39; defined in class path resource","body":"<p>Give you something different, when you encounter this kind of error, cannot create \nbean datasource in a test case.</p>\n\n<p>It might be caused by some reasons:</p>\n\n<ol>\n<li>No datasource, you will need to create your datasource, h2 in-memory datasource or whatever, or you can choose the way like <code>exclude={datasource··}</code>.</li>\n<li>You have your datasource, like MySQL, but it still not work. It was caused by class <code>AutoConfigureTestDatabase</code>, It will choose a datasource for you which may cause ambiguity.</li>\n</ol>\n\n<p>Solution: add <code>@AutoConfigureTestDatabase(replace = AutoConfigureTestDatabase.Replace.NONE)</code> to avoid replace the default datasource.</p>\n"},{"tags":[],"owner":{"account_id":7427743,"reputation":92,"user_id":5649727,"display_name":"Isuru Ranaweera"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1571847271,"creation_date":1528260652,"answer_id":50712447,"question_id":28042426,"body_markdown":"Not directly related to the original question but this will be useful for someone. This error occurred to me with a simple two project structure. One project was handling some database operations with spring JDBC (say A) and the other did not have any JDBC operations at all(say B). But still, this error appeared while I was starting service B. Saying the datasource should be initialized properly.\r\n\r\nAs I figured out I had added this dependency to the parent pom of the two modules\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n\r\nThis caused spring to initialize the JDBC dependencies for project B too. So, I moved it to project A&#39;s pom, everything was fine.\r\n\r\nHope this would help someone","title":"Spring Boot - Error creating bean with name &#39;dataSource&#39; defined in class path resource","body":"<p>Not directly related to the original question but this will be useful for someone. This error occurred to me with a simple two project structure. One project was handling some database operations with spring JDBC (say A) and the other did not have any JDBC operations at all(say B). But still, this error appeared while I was starting service B. Saying the datasource should be initialized properly.</p>\n\n<p>As I figured out I had added this dependency to the parent pom of the two modules</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>This caused spring to initialize the JDBC dependencies for project B too. So, I moved it to project A's pom, everything was fine.</p>\n\n<p>Hope this would help someone</p>\n"},{"tags":[],"owner":{"account_id":2987511,"reputation":3024,"user_id":5772982,"display_name":"Kumar Abhishek"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1528309922,"creation_date":1528309922,"answer_id":50727261,"question_id":28042426,"body_markdown":"This problem comes while you are running Test.\r\nAdd dependency \r\n\r\n    testCompile group: &#39;com.h2database&#39;, name: &#39;h2&#39;, version: &#39;1.4.197&#39; \r\nAdd folder resources under test source add file bootstrap.yml\r\nand provide content.\r\n\r\n    spring:\r\n      datasource:\r\n        type: com.zaxxer.hikari.HikariDataSource\r\n        url: jdbc:h2:mem:TEST\r\n        driver-class-name: org.h2.Driver\r\n        username: username\r\n        password: password\r\n        hikari:\r\n          idle-timeout: 10000\r\n\r\nthis will setup your data source.","title":"Spring Boot - Error creating bean with name &#39;dataSource&#39; defined in class path resource","body":"<p>This problem comes while you are running Test.\nAdd dependency </p>\n\n<pre><code>testCompile group: 'com.h2database', name: 'h2', version: '1.4.197' \n</code></pre>\n\n<p>Add folder resources under test source add file bootstrap.yml\nand provide content.</p>\n\n<pre><code>spring:\n  datasource:\n    type: com.zaxxer.hikari.HikariDataSource\n    url: jdbc:h2:mem:TEST\n    driver-class-name: org.h2.Driver\n    username: username\n    password: password\n    hikari:\n      idle-timeout: 10000\n</code></pre>\n\n<p>this will setup your data source.</p>\n"},{"tags":[],"owner":{"account_id":13875539,"reputation":21,"user_id":10017305,"display_name":"El Morabet Kamal"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1530444489,"creation_date":1530444489,"answer_id":51122868,"question_id":28042426,"body_markdown":"I was facing the same problem for several days, and finally the issue isn&#39;t with the code, the problem commes from maven, you must delete all the files that he downloaded from your hard drive &quot;C:\\Users\\username\\.m2\\repository&quot;, and do another update maven for your project, that will fix your problem.","title":"Spring Boot - Error creating bean with name &#39;dataSource&#39; defined in class path resource","body":"<p>I was facing the same problem for several days, and finally the issue isn't with the code, the problem commes from maven, you must delete all the files that he downloaded from your hard drive \"C:\\Users\\username.m2\\repository\", and do another update maven for your project, that will fix your problem.</p>\n"},{"tags":[],"owner":{"account_id":7172640,"reputation":1225,"user_id":5479655,"accept_rate":44,"display_name":"Guchelkaben"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1543941856,"creation_date":1543941856,"answer_id":53617744,"question_id":28042426,"body_markdown":"I solved my problem with the change of the parent Spring Boot Dependency.\r\n\r\n    &lt;parent&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n        &lt;version&gt;2.1.0.RELEASE&lt;/version&gt;\r\n    &lt;/parent&gt;\r\n\r\nto\r\n\r\n    &lt;parent&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n        &lt;version&gt;2.0.6.RELEASE&lt;/version&gt;\r\n    &lt;/parent&gt;\r\n\r\nFor more Information, take a look at the release notes: [Spring Boot 2.1.0 Release Notes][1]\r\n\r\n\r\n  [1]: https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-2.1-Release-Notes","title":"Spring Boot - Error creating bean with name &#39;dataSource&#39; defined in class path resource","body":"<p>I solved my problem with the change of the parent Spring Boot Dependency.</p>\n\n<pre><code>&lt;parent&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n    &lt;version&gt;2.1.0.RELEASE&lt;/version&gt;\n&lt;/parent&gt;\n</code></pre>\n\n<p>to</p>\n\n<pre><code>&lt;parent&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n    &lt;version&gt;2.0.6.RELEASE&lt;/version&gt;\n&lt;/parent&gt;\n</code></pre>\n\n<p>For more Information, take a look at the release notes: <a href=\"https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-2.1-Release-Notes\" rel=\"nofollow noreferrer\">Spring Boot 2.1.0 Release Notes</a></p>\n"},{"tags":[],"owner":{"account_id":14237468,"reputation":390,"user_id":10877622,"display_name":"Kartik ganiga"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1600969264,"creation_date":1600969264,"answer_id":64051665,"question_id":28042426,"body_markdown":"**Created database in MySQL**\r\n\r\n    create database springboot2;\r\n\r\n**application.properties**\r\n\r\n    spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\r\n    spring.datasource.url = jdbc:mysql://localhost:3306/springboot2\r\n    spring.datasource.username = root\r\n    spring.datasource.password = root\r\n    spring.jpa.show-sql = true\r\n    spring.jpa.hibernate.ddl-auto = update\r\n    spring.jpa.properties.hibernate.dialect = org.hibernate.dialect.MySQL5Dialect\r\n    server.port=9192\r\n\r\n**pom.xml** \r\n\r\n    &lt;dependencies&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;mysql&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n    \t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n    \t\t\t&lt;exclusions&gt;\r\n    \t\t\t\t&lt;exclusion&gt;\r\n    \t\t\t\t\t&lt;groupId&gt;org.junit.vintage&lt;/groupId&gt;\r\n    \t\t\t\t\t&lt;artifactId&gt;junit-vintage-engine&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;/exclusion&gt;\r\n    \t\t\t&lt;/exclusions&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t&lt;/dependencies&gt;\r\n**main class**\r\n\r\n    import org.springframework.boot.SpringApplication;\r\n    import org.springframework.boot.autoconfigure.SpringBootApplication;\r\n    \r\n    @SpringBootApplication\r\n    public class Application {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tSpringApplication.run(Application.class, args);\r\n    \t}\r\n    \r\n    }\r\n\r\n**model class**\r\n\r\n    package com.First.Try.springboot.entity;\r\n        \r\n    import javax.persistence.Entity;\r\n    import javax.persistence.GeneratedValue;\r\n    import javax.persistence.Id;\r\n    import javax.persistence.Table;\r\n    \r\n    import lombok.AllArgsConstructor;\r\n    import lombok.Data;\r\n    import lombok.NoArgsConstructor;\r\n    @Data\r\n    @AllArgsConstructor\t\r\n    @NoArgsConstructor\r\n    @Entity\r\n    @Table(name=&quot;PRODUCT_TBL1&quot;)\r\n    public class Product {\r\n    \t@Id\r\n    \t@GeneratedValue\r\n    \tprivate int id;\r\n    \tprivate String name;\r\n    \tprivate int quantity;\r\n    \tprivate double price;\r\n        ....\r\n        ....\r\n        ....\r\n     }\r\n","title":"Spring Boot - Error creating bean with name &#39;dataSource&#39; defined in class path resource","body":"<p><strong>Created database in MySQL</strong></p>\n<pre><code>create database springboot2;\n</code></pre>\n<p><strong>application.properties</strong></p>\n<pre><code>spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\nspring.datasource.url = jdbc:mysql://localhost:3306/springboot2\nspring.datasource.username = root\nspring.datasource.password = root\nspring.jpa.show-sql = true\nspring.jpa.hibernate.ddl-auto = update\nspring.jpa.properties.hibernate.dialect = org.hibernate.dialect.MySQL5Dialect\nserver.port=9192\n</code></pre>\n<p><strong>pom.xml</strong></p>\n<pre><code>&lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;mysql&lt;/groupId&gt;\n            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;org.junit.vintage&lt;/groupId&gt;\n                    &lt;artifactId&gt;junit-vintage-engine&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n</code></pre>\n<p><strong>main class</strong></p>\n<pre><code>import org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\npublic class Application {\n\n    public static void main(String[] args) {\n        SpringApplication.run(Application.class, args);\n    }\n\n}\n</code></pre>\n<p><strong>model class</strong></p>\n<pre><code>package com.First.Try.springboot.entity;\n    \nimport javax.persistence.Entity;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.Id;\nimport javax.persistence.Table;\n\nimport lombok.AllArgsConstructor;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\n@Data\n@AllArgsConstructor \n@NoArgsConstructor\n@Entity\n@Table(name=&quot;PRODUCT_TBL1&quot;)\npublic class Product {\n    @Id\n    @GeneratedValue\n    private int id;\n    private String name;\n    private int quantity;\n    private double price;\n    ....\n    ....\n    ....\n }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22437671,"reputation":11,"user_id":16642689,"display_name":"Athar Karim"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1628697250,"creation_date":1628697250,"answer_id":68745299,"question_id":28042426,"body_markdown":"By default, with the latest version of Spring Boot, the load of data.sql is done before the tables are created. So use - spring.jpa.defer-datasource-initialization=true\r\n\r\nExample -\r\n\r\n\r\n    **In application.properties :- **\r\n    spring.jpa.show-sql=true\r\n    spring.datasource.url=jdbc:h2:mem:testdb\r\n    spring.h2.console.enabled=true\r\n    spring.jpa.defer-datasource-initialization=true\r\n\r\nThanks\r\nAthar Karim\r\n","title":"Spring Boot - Error creating bean with name &#39;dataSource&#39; defined in class path resource","body":"<p>By default, with the latest version of Spring Boot, the load of data.sql is done before the tables are created. So use - spring.jpa.defer-datasource-initialization=true</p>\n<p>Example -</p>\n<pre><code>**In application.properties :- **\nspring.jpa.show-sql=true\nspring.datasource.url=jdbc:h2:mem:testdb\nspring.h2.console.enabled=true\nspring.jpa.defer-datasource-initialization=true\n</code></pre>\n<p>Thanks\nAthar Karim</p>\n"},{"tags":[],"owner":{"account_id":19970711,"reputation":183,"user_id":15298662,"display_name":"Babi B"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1630119371,"creation_date":1629981236,"answer_id":68938602,"question_id":28042426,"body_markdown":"I am working with spring boot 2.6.0\r\nI tried several answers and they were not enough.\r\nOne temporal solution I found was this\r\n\r\n    @SpringBootApplication(exclude = SqlInitializationAutoConfiguration.class)\r\nAlthough it lets the server run and the h2-console appear I could not connect to my data.sql file. This was the error I got\r\n\r\n    Database &quot;mem:testdb&quot; not found, either pre-create it or allow remote database creation (not recommended in secure environments) [90149-200] 90149/90149\r\n\r\nThis is the solution I found\r\n(Some have already been)Add these lines to the application.properties file\r\n\r\n    spring.jpa.show-sql=true\r\n    spring.h2.console.enabled=true\r\n    spring.datasource.url=jdbc:h2:mem:testdb\r\n    spring.jpa.defer-datasource-initialization=true\r\n\r\nSave an re-run the server then try to access the db on the browser again from the h2-console\r\n\r\nBy default, data.sql scripts are now run before Hibernate is initialized. This aligns the behavior of basic script-based initialization with that of Flyway and Liquibase. If you want to use data.sql to populate a schema created by Hibernate, set spring.jpa.defer-datasource-initialization to true.\r\n\r\nspring.jpa.defer-datasource-initialization=true solves the issue","title":"Spring Boot - Error creating bean with name &#39;dataSource&#39; defined in class path resource","body":"<p>I am working with spring boot 2.6.0\nI tried several answers and they were not enough.\nOne temporal solution I found was this</p>\n<pre><code>@SpringBootApplication(exclude = SqlInitializationAutoConfiguration.class)\n</code></pre>\n<p>Although it lets the server run and the h2-console appear I could not connect to my data.sql file. This was the error I got</p>\n<pre><code>Database &quot;mem:testdb&quot; not found, either pre-create it or allow remote database creation (not recommended in secure environments) [90149-200] 90149/90149\n</code></pre>\n<p>This is the solution I found\n(Some have already been)Add these lines to the application.properties file</p>\n<pre><code>spring.jpa.show-sql=true\nspring.h2.console.enabled=true\nspring.datasource.url=jdbc:h2:mem:testdb\nspring.jpa.defer-datasource-initialization=true\n</code></pre>\n<p>Save an re-run the server then try to access the db on the browser again from the h2-console</p>\n<p>By default, data.sql scripts are now run before Hibernate is initialized. This aligns the behavior of basic script-based initialization with that of Flyway and Liquibase. If you want to use data.sql to populate a schema created by Hibernate, set spring.jpa.defer-datasource-initialization to true.</p>\n<p>spring.jpa.defer-datasource-initialization=true solves the issue</p>\n"},{"tags":[],"owner":{"account_id":7474063,"reputation":1,"user_id":5681026,"display_name":"Rahul Kumar"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1643284651,"creation_date":1643284651,"answer_id":70878189,"question_id":28042426,"body_markdown":"I have not used h2 configuration in pom file.I have added it and this problem was solved.\r\n\r\n\r\n    &lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.h2database&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;h2&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;","title":"Spring Boot - Error creating bean with name &#39;dataSource&#39; defined in class path resource","body":"<p>I have not used h2 configuration in pom file.I have added it and this problem was solved.</p>\n<pre><code>&lt;dependency&gt;\n        &lt;groupId&gt;com.h2database&lt;/groupId&gt;\n        &lt;artifactId&gt;h2&lt;/artifactId&gt;\n        &lt;scope&gt;runtime&lt;/scope&gt;\n    &lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23257203,"reputation":49,"user_id":17344072,"display_name":"M. Muhammadsodiq"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1647928418,"creation_date":1647928418,"answer_id":71567483,"question_id":28042426,"body_markdown":"Seems you are having a problem with datasource.\r\nIf you don&#39;t need the datasource, simply disable it using\r\n\r\n````\r\nspring.autoconfigure.exclude=org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration\r\n \r\n````\r\n\r\nJust put this in your application.properties\r\n","title":"Spring Boot - Error creating bean with name &#39;dataSource&#39; defined in class path resource","body":"<p>Seems you are having a problem with datasource.\nIf you don't need the datasource, simply disable it using</p>\n<pre><code>spring.autoconfigure.exclude=org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration\n \n</code></pre>\n<p>Just put this in your application.properties</p>\n"},{"tags":[],"owner":{"account_id":4525260,"reputation":559,"user_id":3677294,"display_name":"MonirRouissi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1652682626,"creation_date":1652682626,"answer_id":72254934,"question_id":28042426,"body_markdown":"If you are using mysql you need 2 dependencies\r\n\r\n 1\r\n\r\n    . &lt;dependency&gt; \t\t\t\r\n    &lt;groupId&gt;mysql&lt;/groupId&gt;\r\n       &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt; \t\t&lt;/dependency&gt;\r\n\r\n\t\t\r\n\r\n 2.\r\n\r\n     &lt;dependency&gt; \r\n    \t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        \t\t&lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt; \t&lt;/dependency&gt;\r\n\r\n\r\nIf you are using potgress you only need :\r\n\r\n 1. \r\n\r\n    &lt;dependency&gt; \t\t\r\n    \t&lt;groupId&gt;org.postgresql&lt;/groupId&gt;\r\n        &lt;artifactId&gt;postgresql&lt;/artifactId&gt; \t\t\t \r\n          &lt;scope&gt;runtime&lt;/scope&gt;\r\n        \t\t&lt;/dependency&gt;","title":"Spring Boot - Error creating bean with name &#39;dataSource&#39; defined in class path resource","body":"<p>If you are using mysql you need 2 dependencies</p>\n<p>1</p>\n<pre><code>. &lt;dependency&gt;          \n&lt;groupId&gt;mysql&lt;/groupId&gt;\n   &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;        &lt;/dependency&gt;\n\n    \n</code></pre>\n<ol start=\"2\">\n<li></li>\n</ol>\n<pre><code> &lt;dependency&gt; \n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt;   &lt;/dependency&gt;\n</code></pre>\n<p>If you are using potgress you only need :</p>\n<p>1.</p>\n<pre><code>&lt;dependency&gt;        \n    &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\n    &lt;artifactId&gt;postgresql&lt;/artifactId&gt;              \n      &lt;scope&gt;runtime&lt;/scope&gt;\n            &lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15821564,"reputation":1,"user_id":11415769,"display_name":"Silas Mokone"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1654843296,"creation_date":1654691038,"answer_id":72545650,"question_id":28042426,"body_markdown":"using h2  and you need to add  data.sql  just make sure you  add \r\n\r\n    spring.jpa.defer-datasource-initialization=true\r\n\r\non the application.properties.","title":"Spring Boot - Error creating bean with name &#39;dataSource&#39; defined in class path resource","body":"<p>using h2  and you need to add  data.sql  just make sure you  add</p>\n<pre><code>spring.jpa.defer-datasource-initialization=true\n</code></pre>\n<p>on the application.properties.</p>\n"},{"tags":[],"owner":{"account_id":18488355,"reputation":27,"user_id":13468698,"display_name":"Fares Naoui"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658251285,"creation_date":1658251285,"answer_id":73041135,"question_id":28042426,"body_markdown":"This is my application.properties file:\r\n\r\n```spring.datasource.url=jdbc:h2:mem:testdb\r\nspring.datasource.driverClassName=org.h2.Driver\r\nspring.datasource.username=sa\r\nspring.datasource.password=\r\nspring.jpa.database-platform=org.hibernate.dialect.H2Dialect\r\nspring.jpa.defer-datasource-initialization=true\r\nspring.h2.console.enabled=true\r\nspring.h2.console.path=/h2-console\r\nspring.h2.console.settings.trace=false\r\nspring.h2.console.settings.web-allow-others=false\r\n```\r\n\r\nI&#39;m using IntelliJ community edition with DB Browser Plugin\r\n\r\nIt works for me...","title":"Spring Boot - Error creating bean with name &#39;dataSource&#39; defined in class path resource","body":"<p>This is my application.properties file:</p>\n<pre><code>spring.datasource.driverClassName=org.h2.Driver\nspring.datasource.username=sa\nspring.datasource.password=\nspring.jpa.database-platform=org.hibernate.dialect.H2Dialect\nspring.jpa.defer-datasource-initialization=true\nspring.h2.console.enabled=true\nspring.h2.console.path=/h2-console\nspring.h2.console.settings.trace=false\nspring.h2.console.settings.web-allow-others=false\n</code></pre>\n<p>I'm using IntelliJ community edition with DB Browser Plugin</p>\n<p>It works for me...</p>\n"},{"tags":[],"owner":{"account_id":13552874,"reputation":23,"user_id":9777247,"display_name":"franklin forson"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661209297,"creation_date":1661209297,"answer_id":73451792,"question_id":28042426,"body_markdown":"To resolve this issue give the primary key column value  @NotNull not NULL annotation and it would work.","title":"Spring Boot - Error creating bean with name &#39;dataSource&#39; defined in class path resource","body":"<p>To resolve this issue give the primary key column value  @NotNull not NULL annotation and it would work.</p>\n"},{"tags":[],"owner":{"account_id":15616206,"reputation":431,"user_id":11325405,"display_name":"Silver Sky"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1663849391,"creation_date":1663849391,"answer_id":73814564,"question_id":28042426,"body_markdown":"In my case, I had inserted a record in a table in `data.sql`, but that table&#39;s name was incorrect in `schema.sql`, where I had created that table. ","title":"Spring Boot - Error creating bean with name &#39;dataSource&#39; defined in class path resource","body":"<p>In my case, I had inserted a record in a table in <code>data.sql</code>, but that table's name was incorrect in <code>schema.sql</code>, where I had created that table.</p>\n"},{"tags":[],"owner":{"account_id":6833305,"reputation":3084,"user_id":5256337,"display_name":"Lova Chittumuri"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664214428,"creation_date":1664214428,"answer_id":73858008,"question_id":28042426,"body_markdown":"&gt; Please add the below dependency to get rid of this.\r\n\r\n\r\n                &lt;dependency&gt;\r\n                        &lt;groupId&gt;com.h2database&lt;/groupId&gt;\r\n                        &lt;artifactId&gt;h2&lt;/artifactId&gt;\r\n                        &lt;scope&gt;runtime&lt;/scope&gt;\r\n                &lt;/dependency&gt;","title":"Spring Boot - Error creating bean with name &#39;dataSource&#39; defined in class path resource","body":"<blockquote>\n<p>Please add the below dependency to get rid of this.</p>\n</blockquote>\n<pre><code>            &lt;dependency&gt;\n                    &lt;groupId&gt;com.h2database&lt;/groupId&gt;\n                    &lt;artifactId&gt;h2&lt;/artifactId&gt;\n                    &lt;scope&gt;runtime&lt;/scope&gt;\n            &lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6711920,"reputation":26,"user_id":5175045,"display_name":"Kem Andrew"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1666806781,"creation_date":1666806781,"answer_id":74212160,"question_id":28042426,"body_markdown":"make sure you add all the dependencies in your pom.xml\r\n\r\n   \r\n\r\n     &lt;dependencies&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-mail&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-quartz&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-data-jdbc&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;com.mysql&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;com.oracle.database.jdbc&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;ojdbc8&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t&lt;/dependencies&gt;","title":"Spring Boot - Error creating bean with name &#39;dataSource&#39; defined in class path resource","body":"<p>make sure you add all the dependencies in your pom.xml</p>\n<pre><code> &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-mail&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-quartz&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jdbc&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.mysql&lt;/groupId&gt;\n            &lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.oracle.database.jdbc&lt;/groupId&gt;\n            &lt;artifactId&gt;ojdbc8&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13782778,"reputation":935,"user_id":9947525,"display_name":"Fazal Haroon"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1673736171,"creation_date":1671998617,"answer_id":74915621,"question_id":28042426,"body_markdown":"Spring Boot version 2+ has a minor change. All DDL(Data Definition Language) - Table Creations and data updates should be done in **schema.sql**\r\n\r\nTo resolve this issue just add this \r\n\r\n    spring.jpa.defer-datasource-initialization = true\r\n\r\nto application.properties file. \r\n\r\nor\r\n\r\n    spring:\r\n      jpa:\r\n        defer-datasource-initialization: true\r\n\r\nAdd the above if you using yml to your application.yml file.\r\n\r\n\r\n**For Example for H2 In Memory Configuration**\r\n\r\n    spring.jpa.defer-datasource-initialization = true\r\n    spring.h2.console.enabled=true\r\n    spring.sql.init.platform=h2\r\n    spring.datasource.url=jdbc:h2:mem:todo\r\n    spring.datasource.username=sa\r\n    spring.datasource.password=\r\n\r\n\r\nSometimes I&#39;ve got a SQL Syntax Error when executing the spring boot application because of forgetting the **semicolon(;)** at the end of CREATE TABLE and sometimes **SYSDATE()** and **NOW()** have problems using **NOW()** for the current date, so make sure to write the correct SQL syntax for DDL or DML","title":"Spring Boot - Error creating bean with name &#39;dataSource&#39; defined in class path resource","body":"<p>Spring Boot version 2+ has a minor change. All DDL(Data Definition Language) - Table Creations and data updates should be done in <strong>schema.sql</strong></p>\n<p>To resolve this issue just add this</p>\n<pre><code>spring.jpa.defer-datasource-initialization = true\n</code></pre>\n<p>to application.properties file.</p>\n<p>or</p>\n<pre><code>spring:\n  jpa:\n    defer-datasource-initialization: true\n</code></pre>\n<p>Add the above if you using yml to your application.yml file.</p>\n<p><strong>For Example for H2 In Memory Configuration</strong></p>\n<pre><code>spring.jpa.defer-datasource-initialization = true\nspring.h2.console.enabled=true\nspring.sql.init.platform=h2\nspring.datasource.url=jdbc:h2:mem:todo\nspring.datasource.username=sa\nspring.datasource.password=\n</code></pre>\n<p>Sometimes I've got a SQL Syntax Error when executing the spring boot application because of forgetting the <strong>semicolon(;)</strong> at the end of CREATE TABLE and sometimes <strong>SYSDATE()</strong> and <strong>NOW()</strong> have problems using <strong>NOW()</strong> for the current date, so make sure to write the correct SQL syntax for DDL or DML</p>\n"},{"tags":[],"owner":{"account_id":18155026,"reputation":129,"user_id":13207158,"display_name":"Abishethvarman V"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1672082966,"creation_date":1672082966,"answer_id":74923426,"question_id":28042426,"body_markdown":"In the current context(above JDK17 &amp; above Springboot 2.7), this issue commonly occurred. There are reasons for this connectivity issue. But common thing I have noticed when it occurred to me is clearly a connectivity issue related to databaseAutoConfiguration. The main database may be connected successfully with its properties and the test db doesnt. So need to build the project again to trigger the connection from the application.properties manually. \r\n\r\nThe error log of my particular scenario.\r\n\r\n&gt; org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;dataSourceScriptDatabaseInitializer&#39; defined in class path resource [org/springframework/boot/autoconfigure/sql/init/DataSourceInitializationConfiguration.class]: Unsatisfied dependency expressed through method &#39;dataSourceScriptDatabaseInitializer&#39; parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;dataSource&#39;: Invocation of init method failed; nested exception is java.lang.IllegalStateException: Failed to replace DataSource with an embedded database for tests. If you want an embedded database please put a supported one on the classpath or tune the replace attribute of @AutoConfigureTestDatabase.\r\n\r\nSo the solution that I&#39;m proposing are\r\n\r\n 1. Check the connector dependencies\r\n 2. Check the application properties and the input credentials.\r\n 3. Make sure the build the project by triggering the maven or gradle manually. \r\n 4. Don&#39;t trust the autoconfiguration part and investigate it deeply.","title":"Spring Boot - Error creating bean with name &#39;dataSource&#39; defined in class path resource","body":"<p>In the current context(above JDK17 &amp; above Springboot 2.7), this issue commonly occurred. There are reasons for this connectivity issue. But common thing I have noticed when it occurred to me is clearly a connectivity issue related to databaseAutoConfiguration. The main database may be connected successfully with its properties and the test db doesnt. So need to build the project again to trigger the connection from the application.properties manually.</p>\n<p>The error log of my particular scenario.</p>\n<blockquote>\n<p>org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'dataSourceScriptDatabaseInitializer' defined in class path resource [org/springframework/boot/autoconfigure/sql/init/DataSourceInitializationConfiguration.class]: Unsatisfied dependency expressed through method 'dataSourceScriptDatabaseInitializer' parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSource': Invocation of init method failed; nested exception is java.lang.IllegalStateException: Failed to replace DataSource with an embedded database for tests. If you want an embedded database please put a supported one on the classpath or tune the replace attribute of @AutoConfigureTestDatabase.</p>\n</blockquote>\n<p>So the solution that I'm proposing are</p>\n<ol>\n<li>Check the connector dependencies</li>\n<li>Check the application properties and the input credentials.</li>\n<li>Make sure the build the project by triggering the maven or gradle manually.</li>\n<li>Don't trust the autoconfiguration part and investigate it deeply.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":11132492,"reputation":61,"user_id":9681026,"display_name":"rudr"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1677517229,"creation_date":1677517229,"answer_id":75583405,"question_id":28042426,"body_markdown":"    spring.autoconfigure.exclude=org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration\r\n\r\nwriting the above line in application.properties , it worked for me in case psql db with spring boot 3.0.3","title":"Spring Boot - Error creating bean with name &#39;dataSource&#39; defined in class path resource","body":"<pre><code>spring.autoconfigure.exclude=org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration\n</code></pre>\n<p>writing the above line in application.properties , it worked for me in case psql db with spring boot 3.0.3</p>\n"},{"tags":[],"owner":{"account_id":28798089,"reputation":1,"user_id":22055763,"display_name":"Chairman Sellaperumal"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686505014,"creation_date":1686484686,"answer_id":76450367,"question_id":28042426,"body_markdown":"For me no need to update below `@SpringBootApplication` annotation as `@SpringBootApplication(exclude={DataSourceAutoConfiguration.class})`\r\n\r\n\r\nJust updated deprecated `spring.datasource.platform=h2` into `spring.sql.init.platform=h2` and it is working fine.","title":"Spring Boot - Error creating bean with name &#39;dataSource&#39; defined in class path resource","body":"<p>For me no need to update below <code>@SpringBootApplication</code> annotation as <code>@SpringBootApplication(exclude={DataSourceAutoConfiguration.class})</code></p>\n<p>Just updated deprecated <code>spring.datasource.platform=h2</code> into <code>spring.sql.init.platform=h2</code> and it is working fine.</p>\n"},{"tags":[],"owner":{"account_id":8693671,"reputation":7368,"user_id":6505847,"display_name":"AzyCrw4282"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689863556,"creation_date":1689863556,"answer_id":76730964,"question_id":28042426,"body_markdown":"If you have this issue in gradle, you need to remove the Spring data library and rebuild gradle. I had to remove the following dependency to solve the error\r\n```\r\nimplementation(&#39;org.springframework.boot:spring-boot-starter-data-jpa&#39;)\r\n```","title":"Spring Boot - Error creating bean with name &#39;dataSource&#39; defined in class path resource","body":"<p>If you have this issue in gradle, you need to remove the Spring data library and rebuild gradle. I had to remove the following dependency to solve the error</p>\n<pre><code>implementation('org.springframework.boot:spring-boot-starter-data-jpa')\n</code></pre>\n"}],"owner":{"account_id":222186,"reputation":13529,"user_id":480632,"accept_rate":74,"display_name":"J.Olufsen"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":805368,"favorite_count":0,"down_vote_count":0,"up_vote_count":119,"accepted_answer_id":31199853,"answer_count":35,"score":119,"last_activity_date":1689863556,"creation_date":1421747984,"question_id":28042426,"body_markdown":"I have Spring Boot web application. It&#39;s centered around RESTful approach. All configuration seems in place but for some reason MainController fails to handle request. It results in 404 error. How to fix it?\r\n\r\n\r\n\r\n    @Controller\r\n    public class MainController {\r\n    \r\n        @Autowired\r\n        ParserService parserService;\r\n    \r\n        @RequestMapping(value=&quot;/&quot;, method= RequestMethod.GET)\r\n        public @ResponseBody String displayStartPage(){\r\n            return &quot;{hello}&quot;;\r\n        }\r\n    }\r\n\r\n**Application**\r\n\r\n    @Configuration\r\n    @ComponentScan(basePackages = &quot;&quot;)\r\n    @EnableAutoConfiguration\r\n    public class Application extends SpringBootServletInitializer{\r\n            public static void main(final String[] args) {\r\n                SpringApplication.run(Application.class, args);\r\n            }\r\n    \r\n            @Override\r\n            protected final SpringApplicationBuilder configure(final SpringApplicationBuilder application) {\r\n                return application.sources(Application.class);\r\n            }\r\n    }\r\n**ParserController**\r\n\r\n    @RestController\r\n    public class ParserController {\r\n    \r\n        @Autowired\r\n        private ParserService parserService;\r\n    \r\n        @Autowired\r\n        private RecordDao recordDao;\r\n    \r\n     private static final Logger LOG = Logger.getLogger(ParserController.class);\r\n    \r\n        @RequestMapping(value=&quot;/upload&quot;, method= RequestMethod.POST)\r\n        public @ResponseBody String fileUploadPage(\r\n       }\r\n    }\r\n\r\n**UPDATE**\r\n\r\nSeems like MySQL cannot be initialized by Spring....\r\n\r\n        Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration&#39;: Injection of autowired dependencies failed; \r\n    \r\n    nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private javax.sql.DataSource org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration.dataSource; \r\n    \r\n    nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;dataSource&#39; defined in class path resource [org/springframework/boot/autoconfigure/jdbc/DataSourceAutoConfiguration$NonEmbeddedConfiguration.class]: Instantiation of bean failed; \r\n    \r\n    nested exception is org.springframework.beans.factory.BeanDefinitionStoreException: Factory method [public javax.sql.DataSource org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration$NonEmbeddedConfiguration.dataSource()] threw exception; \r\n    \r\n    nested exception is org.springframework.beans.factory.BeanCreationException: Cannot determine embedded database driver class for database type NONE. If you want an embedded database please put a supported one on the classpath.\r\n\r\n**UPDATE2**\r\n\r\n**application.properties**\r\n\r\n```lang-yml\r\n    # Database \r\n    spring.datasource.driverClassName = com.mysql.jdbc.Driver\r\n    spring.datasource.url = jdbc:mysql://localhost:3306/logparser\r\n    spring.datasource.username = root\r\n    spring.datasource.password = root\r\n    \r\n    spring.jpa.database = MYSQL\r\n    spring.jpa.show-sql = true\r\n    \r\n    # Hibernate\r\n    hibernate.dialect: org.hibernate.dialect.MySQL5Dialect\r\n    hibernate.show_sql: true\r\n    hibernate.hbm2ddl.auto: update\r\n    entitymanager.packagesToScan: /\r\n```\r\n\r\n**UPDATE4**\r\n\r\nSeems lite controllers not responding eventhough `@RequestMapping` are set. Why might it be?\r\n\r\n&gt; PS. It occurs when I run Maven&#39;s lifecycle `test`.\r\nWhen running in degub mode in IntelliJ there is no error outputted.\r\n\r\n**UPDATE5**\r\n\r\nAlso I use this DAO as explained in tutorial....\r\n\r\n    public interface RecordDao extends CrudRepository&lt;Record, Long&gt; {\r\n    }\r\n\r\nhttp://blog.netgloo.com/2014/10/27/using-mysql-in-spring-boot-via-spring-data-jpa-and-hibernate/\r\n\r\n**UPDATE6**\r\n\r\nI did changed my application properties. And tried every single combination but it refuses to work. ;(\r\n\r\n**Maven output:**\r\n\r\n    -------------------------------------------------------\r\n     T E S T S\r\n    -------------------------------------------------------\r\n    Running IntegrationTest\r\n    Tests run: 1, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 2.365 sec &lt;&lt;&lt; FAILURE! - in IntegrationTest\r\n    saveParsedRecordsToDatabase(IntegrationTest)  Time elapsed: 2.01 sec  &lt;&lt;&lt; ERROR!\r\n    java.lang.IllegalStateException: Failed to load ApplicationContext\r\n    \tat org.springframework.test.context.CacheAwareContextLoaderDelegate.loadContext(CacheAwareContextLoaderDelegate.java:99)\r\n    \tat org.springframework.test.context.DefaultTestContext.getApplicationContext(DefaultTestContext.java:101)\r\n    \tat org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:109)\r\n    \tat org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:75)\r\n    \tat org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:331)\r\n    \tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:213)\r\n    \tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:290)\r\n    \tat org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\r\n    \tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:292)\r\n    \tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:233)\r\n    \tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:87)\r\n    \tat org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)\r\n    \tat org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)\r\n    \tat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)\r\n    \tat org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)\r\n    \tat org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)\r\n    \tat org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)\r\n    \tat org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)\r\n    \tat org.junit.runners.ParentRunner.run(ParentRunner.java:309)\r\n    \tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:176)\r\n    \tat org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:264)\r\n    \tat org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:153)\r\n    \tat org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:124)\r\n    \tat org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:200)\r\n    \tat org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:153)\r\n    \tat org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:103)\r\n    Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration&#39;: Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private javax.sql.DataSource org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration.dataSource; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;dataSource&#39; defined in class path resource [org/springframework/boot/autoconfigure/jdbc/DataSourceAutoConfiguration$NonEmbeddedConfiguration.class]: Instantiation of bean failed; nested exception is org.springframework.beans.factory.BeanDefinitionStoreException: Factory method [public javax.sql.DataSource org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration$NonEmbeddedConfiguration.dataSource()] threw exception; nested exception is org.springframework.beans.factory.BeanCreationException: Cannot determine embedded database driver class for database type NONE. If you want an embedded database please put a supported one on the classpath.","title":"Spring Boot - Error creating bean with name &#39;dataSource&#39; defined in class path resource","body":"<p>I have Spring Boot web application. It's centered around RESTful approach. All configuration seems in place but for some reason MainController fails to handle request. It results in 404 error. How to fix it?</p>\n<pre><code>@Controller\npublic class MainController {\n\n    @Autowired\n    ParserService parserService;\n\n    @RequestMapping(value=&quot;/&quot;, method= RequestMethod.GET)\n    public @ResponseBody String displayStartPage(){\n        return &quot;{hello}&quot;;\n    }\n}\n</code></pre>\n<p><strong>Application</strong></p>\n<pre><code>@Configuration\n@ComponentScan(basePackages = &quot;&quot;)\n@EnableAutoConfiguration\npublic class Application extends SpringBootServletInitializer{\n        public static void main(final String[] args) {\n            SpringApplication.run(Application.class, args);\n        }\n\n        @Override\n        protected final SpringApplicationBuilder configure(final SpringApplicationBuilder application) {\n            return application.sources(Application.class);\n        }\n}\n</code></pre>\n<p><strong>ParserController</strong></p>\n<pre><code>@RestController\npublic class ParserController {\n\n    @Autowired\n    private ParserService parserService;\n\n    @Autowired\n    private RecordDao recordDao;\n\n private static final Logger LOG = Logger.getLogger(ParserController.class);\n\n    @RequestMapping(value=&quot;/upload&quot;, method= RequestMethod.POST)\n    public @ResponseBody String fileUploadPage(\n   }\n}\n</code></pre>\n<p><strong>UPDATE</strong></p>\n<p>Seems like MySQL cannot be initialized by Spring....</p>\n<pre><code>    Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration': Injection of autowired dependencies failed; \n\nnested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private javax.sql.DataSource org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration.dataSource; \n\nnested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSource' defined in class path resource [org/springframework/boot/autoconfigure/jdbc/DataSourceAutoConfiguration$NonEmbeddedConfiguration.class]: Instantiation of bean failed; \n\nnested exception is org.springframework.beans.factory.BeanDefinitionStoreException: Factory method [public javax.sql.DataSource org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration$NonEmbeddedConfiguration.dataSource()] threw exception; \n\nnested exception is org.springframework.beans.factory.BeanCreationException: Cannot determine embedded database driver class for database type NONE. If you want an embedded database please put a supported one on the classpath.\n</code></pre>\n<p><strong>UPDATE2</strong></p>\n<p><strong>application.properties</strong></p>\n<pre class=\"lang-yml prettyprint-override\"><code>    # Database \n    spring.datasource.driverClassName = com.mysql.jdbc.Driver\n    spring.datasource.url = jdbc:mysql://localhost:3306/logparser\n    spring.datasource.username = root\n    spring.datasource.password = root\n    \n    spring.jpa.database = MYSQL\n    spring.jpa.show-sql = true\n    \n    # Hibernate\n    hibernate.dialect: org.hibernate.dialect.MySQL5Dialect\n    hibernate.show_sql: true\n    hibernate.hbm2ddl.auto: update\n    entitymanager.packagesToScan: /\n</code></pre>\n<p><strong>UPDATE4</strong></p>\n<p>Seems lite controllers not responding eventhough <code>@RequestMapping</code> are set. Why might it be?</p>\n<blockquote>\n<p>PS. It occurs when I run Maven's lifecycle <code>test</code>.\nWhen running in degub mode in IntelliJ there is no error outputted.</p>\n</blockquote>\n<p><strong>UPDATE5</strong></p>\n<p>Also I use this DAO as explained in tutorial....</p>\n<pre><code>public interface RecordDao extends CrudRepository&lt;Record, Long&gt; {\n}\n</code></pre>\n<p><a href=\"http://blog.netgloo.com/2014/10/27/using-mysql-in-spring-boot-via-spring-data-jpa-and-hibernate/\" rel=\"noreferrer\">http://blog.netgloo.com/2014/10/27/using-mysql-in-spring-boot-via-spring-data-jpa-and-hibernate/</a></p>\n<p><strong>UPDATE6</strong></p>\n<p>I did changed my application properties. And tried every single combination but it refuses to work. ;(</p>\n<p><strong>Maven output:</strong></p>\n<pre><code>-------------------------------------------------------\n T E S T S\n-------------------------------------------------------\nRunning IntegrationTest\nTests run: 1, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 2.365 sec &lt;&lt;&lt; FAILURE! - in IntegrationTest\nsaveParsedRecordsToDatabase(IntegrationTest)  Time elapsed: 2.01 sec  &lt;&lt;&lt; ERROR!\njava.lang.IllegalStateException: Failed to load ApplicationContext\n    at org.springframework.test.context.CacheAwareContextLoaderDelegate.loadContext(CacheAwareContextLoaderDelegate.java:99)\n    at org.springframework.test.context.DefaultTestContext.getApplicationContext(DefaultTestContext.java:101)\n    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:109)\n    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:75)\n    at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:331)\n    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:213)\n    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:290)\n    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\n    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:292)\n    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:233)\n    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:87)\n    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)\n    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)\n    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)\n    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)\n    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)\n    at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)\n    at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)\n    at org.junit.runners.ParentRunner.run(ParentRunner.java:309)\n    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:176)\n    at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:264)\n    at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:153)\n    at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:124)\n    at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:200)\n    at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:153)\n    at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:103)\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private javax.sql.DataSource org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration.dataSource; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSource' defined in class path resource [org/springframework/boot/autoconfigure/jdbc/DataSourceAutoConfiguration$NonEmbeddedConfiguration.class]: Instantiation of bean failed; nested exception is org.springframework.beans.factory.BeanDefinitionStoreException: Factory method [public javax.sql.DataSource org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration$NonEmbeddedConfiguration.dataSource()] threw exception; nested exception is org.springframework.beans.factory.BeanCreationException: Cannot determine embedded database driver class for database type NONE. If you want an embedded database please put a supported one on the classpath.\n</code></pre>\n"},{"tags":["java","selenium-webdriver","automated-tests"],"comments":[{"owner":{"account_id":10299692,"reputation":5719,"user_id":7598774,"accept_rate":75,"display_name":"Shawn"},"score":0,"creation_date":1689843301,"post_id":76728188,"comment_id":135271704,"body_markdown":"Can you share the URL of the application if it can be shared to public?","body":"Can you share the URL of the application if it can be shared to public?"},{"owner":{"account_id":27938804,"reputation":102,"user_id":21335232,"display_name":"Bhairu"},"score":0,"creation_date":1689843386,"post_id":76728188,"comment_id":135271712,"body_markdown":"Please add the screenshot of the DOM of that element. you paste the DOM attributes but I didn&#39;t understand the hirarchy.","body":"Please add the screenshot of the DOM of that element. you paste the DOM attributes but I didn&#39;t understand the hirarchy."},{"owner":{"account_id":17530857,"reputation":11,"user_id":12714908,"display_name":"Danu"},"score":0,"creation_date":1689846272,"post_id":76728188,"comment_id":135272285,"body_markdown":"Sorry i can not share the application.","body":"Sorry i can not share the application."},{"owner":{"account_id":17530857,"reputation":11,"user_id":12714908,"display_name":"Danu"},"score":0,"creation_date":1689846364,"post_id":76728188,"comment_id":135272306,"body_markdown":"can you ignore the select option code part.","body":"can you ignore the select option code part."}],"answers":[{"tags":[],"owner":{"account_id":10299692,"reputation":5719,"user_id":7598774,"accept_rate":75,"display_name":"Shawn"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689843860,"creation_date":1689843860,"answer_id":76728283,"question_id":76728188,"body_markdown":"I see a `&lt;select&gt;` node in the HTML. You can use selenium&#39;s `Select` class to handle/choose dropdown values. Refer the code below:\r\n\r\n````\r\nSelect drpCountry = new Select(driver.findElement(By.id(&quot;countryCode&quot;)));\r\ndrpCountry.selectByVisibleText(&quot;Canada&quot;);\r\n````\r\n\r\nImports required:\r\n````\r\nimport org.openqa.selenium.support.ui.Select;\r\n````","title":"how to select li of ul in selenium webdriver using java","body":"<p>I see a <code>&lt;select&gt;</code> node in the HTML. You can use selenium's <code>Select</code> class to handle/choose dropdown values. Refer the code below:</p>\n<pre><code>Select drpCountry = new Select(driver.findElement(By.id(&quot;countryCode&quot;)));\ndrpCountry.selectByVisibleText(&quot;Canada&quot;);\n</code></pre>\n<p>Imports required:</p>\n<pre><code>import org.openqa.selenium.support.ui.Select;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":27793345,"reputation":24,"user_id":21219384,"display_name":"Dinesh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689846250,"creation_date":1689846250,"answer_id":76728606,"question_id":76728188,"body_markdown":"        public void selectCountry() {\r\n        \tWebElement dropdown = driver.findElement(By.id(&quot;countryCode&quot;));\r\n        \tSelect select=new Select(dropdown);\r\n        \tselect.selectByVisibleText(&quot;Afghanistan&quot;);\r\n        }\r\n    \r\n    if we want to select Canada just pass Canada in selectByVisibleText() method","title":"how to select li of ul in selenium webdriver using java","body":"<pre><code>    public void selectCountry() {\n        WebElement dropdown = driver.findElement(By.id(&quot;countryCode&quot;));\n        Select select=new Select(dropdown);\n        select.selectByVisibleText(&quot;Afghanistan&quot;);\n    }\n\nif we want to select Canada just pass Canada in selectByVisibleText() method\n</code></pre>\n"}],"owner":{"account_id":17530857,"reputation":11,"user_id":12714908,"display_name":"Danu"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":82,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1689863288,"creation_date":1689843063,"question_id":76728188,"body_markdown":"I am new to selenium. I am working on selenium webdriver. i want to select a value from the li of ul. I need to select a country from list items. \r\n\r\nHere is the HTML code;\r\n\r\n\r\n```\r\n&lt;div class=&quot;select-wrapper initialized&quot;&gt;\r\n&lt;span class=&quot;caret&quot;&gt;▼&lt;/span&gt;\r\n&lt;input type=&quot;text&quot; class=&quot;select-dropdown&quot; readonly=&quot;true&quot; data-activates=&quot;select-options-45625784-059c-3523-a00e-3ad824fad64a&quot; value=&quot;-- Select --&quot;&gt;\r\n\r\n&lt;ul id=&quot;select-options-45625784-059c-3523-a00e-3ad824fad64a&quot; class=&quot;dropdown-content select-dropdown &quot;&gt;\r\n\r\n&lt;li class=&quot;&quot;&gt;&lt;span&gt;-- Select --&lt;/span&gt;\r\n\r\n&lt;/li&gt;&lt;li class=&quot;&quot;&gt;&lt;span&gt;Afghanistan&lt;/span&gt;&lt;/li&gt;\r\n&lt;/li&gt;&lt;li class=&quot;&quot;&gt;&lt;span&gt;Canada&lt;/span&gt;&lt;/li&gt;\r\n\r\n&lt;/ul&gt;\r\n\r\n&lt;select ng-if=&quot;!form.translate&quot; id=&quot;countryCode&quot; materializecss-select=&quot;&quot; ng-model=&quot;model[&#39;countryCode&#39;]&quot; ng-model-options=&quot;form.ngModelOptions&quot; ng-disabled=&quot;form.readonly&quot; sf-changed=&quot;form&quot; class=&quot;initialized&quot; schema-validate=&quot;form&quot; ng-options=&quot;item.value as item.name group by item.group for item in form.titleMap&quot; name=&quot;countryCode&quot;&gt;\r\n\r\n&lt;option label=&quot;-- Select --&quot; value=&quot;string:&quot; selected=&quot;selected&quot;&gt;-- Select --&lt;/option&gt;\r\n\r\n&lt;option label=&quot;Afghanistan&quot; value=&quot;string:AF&quot;&gt;Afghanistan&lt;/option&gt;\r\n&lt;option label=&quot;Canada&quot; value=&quot;string:AF&quot;&gt;Canada&lt;/option&gt;\r\n\r\n&lt;/select&gt;\r\n\r\n&lt;/div&gt;\r\n```\r\n\r\n\r\nHere is my selectCountry function.\r\n```\r\nBy countryInput = By.xpath(&quot;//*[@id=\\&quot;countryCode_inputfileddiv\\&quot;]/div/input&quot;);\r\n\r\npublic void selectCountry() {\r\n        WebElement dropdown = driver.findElement(countryInput);\r\n        dropdown.click();\r\n\r\n        List&lt;WebElement&gt; options = driver.findElements(By.id(&quot;select-options-b9a0d236-4008-830c-5319-9405f74b872f&quot;));\r\n\r\n        for (WebElement option : options) {\r\n            String valueToSelect = option.getText().trim();\r\n            System.out.println(valueToSelect);\r\n            if (valueToSelect.equals(&quot;Canada&quot;)) {\r\n                continue;\r\n            }\r\n\r\n            option.click();\r\n        }\r\n\r\n    }\r\n```\r\nHow to click the drop down?\r\n\r\nI tried with the above example lines but am getting error such as \r\n\r\n&gt; Element is not currently visible and so may not be interacted with Command duration","title":"how to select li of ul in selenium webdriver using java","body":"<p>I am new to selenium. I am working on selenium webdriver. i want to select a value from the li of ul. I need to select a country from list items.</p>\n<p>Here is the HTML code;</p>\n<pre><code>&lt;div class=&quot;select-wrapper initialized&quot;&gt;\n&lt;span class=&quot;caret&quot;&gt;▼&lt;/span&gt;\n&lt;input type=&quot;text&quot; class=&quot;select-dropdown&quot; readonly=&quot;true&quot; data-activates=&quot;select-options-45625784-059c-3523-a00e-3ad824fad64a&quot; value=&quot;-- Select --&quot;&gt;\n\n&lt;ul id=&quot;select-options-45625784-059c-3523-a00e-3ad824fad64a&quot; class=&quot;dropdown-content select-dropdown &quot;&gt;\n\n&lt;li class=&quot;&quot;&gt;&lt;span&gt;-- Select --&lt;/span&gt;\n\n&lt;/li&gt;&lt;li class=&quot;&quot;&gt;&lt;span&gt;Afghanistan&lt;/span&gt;&lt;/li&gt;\n&lt;/li&gt;&lt;li class=&quot;&quot;&gt;&lt;span&gt;Canada&lt;/span&gt;&lt;/li&gt;\n\n&lt;/ul&gt;\n\n&lt;select ng-if=&quot;!form.translate&quot; id=&quot;countryCode&quot; materializecss-select=&quot;&quot; ng-model=&quot;model['countryCode']&quot; ng-model-options=&quot;form.ngModelOptions&quot; ng-disabled=&quot;form.readonly&quot; sf-changed=&quot;form&quot; class=&quot;initialized&quot; schema-validate=&quot;form&quot; ng-options=&quot;item.value as item.name group by item.group for item in form.titleMap&quot; name=&quot;countryCode&quot;&gt;\n\n&lt;option label=&quot;-- Select --&quot; value=&quot;string:&quot; selected=&quot;selected&quot;&gt;-- Select --&lt;/option&gt;\n\n&lt;option label=&quot;Afghanistan&quot; value=&quot;string:AF&quot;&gt;Afghanistan&lt;/option&gt;\n&lt;option label=&quot;Canada&quot; value=&quot;string:AF&quot;&gt;Canada&lt;/option&gt;\n\n&lt;/select&gt;\n\n&lt;/div&gt;\n</code></pre>\n<p>Here is my selectCountry function.</p>\n<pre><code>By countryInput = By.xpath(&quot;//*[@id=\\&quot;countryCode_inputfileddiv\\&quot;]/div/input&quot;);\n\npublic void selectCountry() {\n        WebElement dropdown = driver.findElement(countryInput);\n        dropdown.click();\n\n        List&lt;WebElement&gt; options = driver.findElements(By.id(&quot;select-options-b9a0d236-4008-830c-5319-9405f74b872f&quot;));\n\n        for (WebElement option : options) {\n            String valueToSelect = option.getText().trim();\n            System.out.println(valueToSelect);\n            if (valueToSelect.equals(&quot;Canada&quot;)) {\n                continue;\n            }\n\n            option.click();\n        }\n\n    }\n</code></pre>\n<p>How to click the drop down?</p>\n<p>I tried with the above example lines but am getting error such as</p>\n<blockquote>\n<p>Element is not currently visible and so may not be interacted with Command duration</p>\n</blockquote>\n"},{"tags":["java","autocomplete","controlsfx"],"owner":{"account_id":9305717,"reputation":47,"user_id":6909544,"display_name":"Marko"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689863235,"creation_date":1689863235,"question_id":76730908,"body_markdown":"I am working on the implementation of the ControlsFX autocompletion/suggestion in a small JavaFX desktop application.\r\n\r\nI am unable to compile following code:\r\n\r\n    SuggestionProvider&lt;String&gt; provider = SuggestionProvider.create(list); \r\n    AutoCompletionBinding acbLogin = TextFields.bindAutoCompletion(searchField, t -&gt; {\r\n    new AutoCompletionTextFieldBinding&lt;&gt;(searchField, provider);return list.stream().filter(elem -&gt; {\r\n                                return elem.toLowerCase().startsWith(t.getUserText().toLowerCase());\r\n                            }).collect(Collectors.toList());\r\n                        });\r\n\r\n\r\nGetting following error\r\n\r\n    cannot access class impl.org.controlsfx.autocompletion.SuggestionProvider (in module org.controlsfx.controls) because module org.controlsfx.controls does not export impl.org.controlsfx.autocompletion to module com.example.test\r\n\r\nGot a similar error when I implemented ControlsFX `AutoCompletion` library and could fix it with following code in the pom.xml in the maven-plugin-section\r\n\r\n    &lt;options&gt;\r\n        &lt;option&gt;-XX:+UseG1GC&lt;/option&gt;\r\n        &lt;option&gt;--add-exports&lt;/option&gt;\r\n        &lt;option&gt;javafx.base/com.sun.javafx.event=org.controlsfx.controls&lt;/option&gt;\r\n    &lt;/options&gt;\r\n\r\nAny ideas if there is similar troubleshooting available?\r\nAppreciate your help.\r\nMany thanks.\r\n\r\n\r\n\r\n ","title":"Usage of ControlsFX AutoCompletion SuggestionProvider","body":"<p>I am working on the implementation of the ControlsFX autocompletion/suggestion in a small JavaFX desktop application.</p>\n<p>I am unable to compile following code:</p>\n<pre><code>SuggestionProvider&lt;String&gt; provider = SuggestionProvider.create(list); \nAutoCompletionBinding acbLogin = TextFields.bindAutoCompletion(searchField, t -&gt; {\nnew AutoCompletionTextFieldBinding&lt;&gt;(searchField, provider);return list.stream().filter(elem -&gt; {\n                            return elem.toLowerCase().startsWith(t.getUserText().toLowerCase());\n                        }).collect(Collectors.toList());\n                    });\n</code></pre>\n<p>Getting following error</p>\n<pre><code>cannot access class impl.org.controlsfx.autocompletion.SuggestionProvider (in module org.controlsfx.controls) because module org.controlsfx.controls does not export impl.org.controlsfx.autocompletion to module com.example.test\n</code></pre>\n<p>Got a similar error when I implemented ControlsFX <code>AutoCompletion</code> library and could fix it with following code in the pom.xml in the maven-plugin-section</p>\n<pre><code>&lt;options&gt;\n    &lt;option&gt;-XX:+UseG1GC&lt;/option&gt;\n    &lt;option&gt;--add-exports&lt;/option&gt;\n    &lt;option&gt;javafx.base/com.sun.javafx.event=org.controlsfx.controls&lt;/option&gt;\n&lt;/options&gt;\n</code></pre>\n<p>Any ideas if there is similar troubleshooting available?\nAppreciate your help.\nMany thanks.</p>\n"},{"tags":["java","spring-boot","swagger","openapi","multipartfile"],"comments":[{"owner":{"account_id":39252,"reputation":89802,"user_id":113116,"display_name":"Helen"},"score":0,"creation_date":1657874741,"post_id":72982587,"comment_id":128918282,"body_markdown":"The `file` parameter showing up as having the &quot;string&quot; type is correct (in OAS 3.0, files are defined as binary strings). What&#39;s incorrect is that it shows up as a query parameter instead of a request body field. Should the annotation maybe be [`@RequestPart`](https://springdoc.org/#is-file-upload-supported) instead of `@RequestParam`?","body":"The <code>file</code> parameter showing up as having the &quot;string&quot; type is correct (in OAS 3.0, files are defined as binary strings). What&#39;s incorrect is that it shows up as a query parameter instead of a request body field. Should the annotation maybe be <a href=\"https://springdoc.org/#is-file-upload-supported\" rel=\"nofollow noreferrer\"><code>@RequestPart</code></a> instead of <code>@RequestParam</code>?"},{"owner":{"account_id":4533970,"reputation":458,"user_id":3683684,"display_name":"sanjeev"},"score":0,"creation_date":1658328783,"post_id":72982587,"comment_id":129025621,"body_markdown":"Tried with @RequestPart as well. Same behavior and the &quot;Execute&quot; button doesn&#39;t work.","body":"Tried with @RequestPart as well. Same behavior and the &quot;Execute&quot; button doesn&#39;t work."},{"owner":{"account_id":139494,"reputation":804,"user_id":345130,"accept_rate":40,"display_name":"ILya Cyclone"},"score":2,"creation_date":1668522957,"post_id":72982587,"comment_id":131422378,"body_markdown":"Hi. Any updates on this issue?","body":"Hi. Any updates on this issue?"}],"answers":[{"tags":[],"owner":{"account_id":7394006,"reputation":5031,"user_id":5626568,"display_name":"ℛɑƒ&#230;Ŀᴿᴹᴿ"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684428823,"creation_date":1684428823,"answer_id":76282897,"question_id":72982587,"body_markdown":"You could use `@RequestPart` with `MediaType.MULTIPART_FORM_DATA_VALUE`.\r\n\r\nCan be combined with `@Parameter` from OpenAPI (`io.swagger.v3.oas.annotations`):\r\n\r\n    @PostMapping(&quot;/files&quot;, consumes = {MediaType.MULTIPART_FORM_DATA_VALUE})\r\n    public ResponseEntity&lt;?&gt; uploadFiles(\r\n    \t@Parameter(content = @Content(mediaType = MediaType.APPLICATION_JSON_VALUE))\r\n        @RequestPart(value = &quot;file&quot;) MultipartFile file,\r\n        @RequestPart(value = &quot;comment&quot;, required = false ) String comment\r\n    ) throws IOException, ExecutionException, InterruptedException {\r\n    \tlog.debug(&quot;Total files to store: {}&quot;, file.length);\r\n    \tlog.debug(&quot;comment: {}&quot;, comment);\r\n    \tfileService.storeFile(Arrays.asList(file), comment);\r\n    \treturn ResponseEntity.ok(environment.getProperty(&quot;file.upload.success&quot;));\r\n    }\r\n\r\nOn `swagger-ui` should show `multipart/form-data` selected on right:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n---\r\n\r\n#### Reference:\r\n\r\n- https://stackoverflow.com/questions/74149274/post-method-with-multipartfile-as-requestpart-is-considered-as-string-in-swagger\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/enSe2.png","title":"Why SpringDoc OpenAPI doesn&#39;t understand MultipartFile payload?","body":"<p>You could use <code>@RequestPart</code> with <code>MediaType.MULTIPART_FORM_DATA_VALUE</code>.</p>\n<p>Can be combined with <code>@Parameter</code> from OpenAPI (<code>io.swagger.v3.oas.annotations</code>):</p>\n<pre><code>@PostMapping(&quot;/files&quot;, consumes = {MediaType.MULTIPART_FORM_DATA_VALUE})\npublic ResponseEntity&lt;?&gt; uploadFiles(\n    @Parameter(content = @Content(mediaType = MediaType.APPLICATION_JSON_VALUE))\n    @RequestPart(value = &quot;file&quot;) MultipartFile file,\n    @RequestPart(value = &quot;comment&quot;, required = false ) String comment\n) throws IOException, ExecutionException, InterruptedException {\n    log.debug(&quot;Total files to store: {}&quot;, file.length);\n    log.debug(&quot;comment: {}&quot;, comment);\n    fileService.storeFile(Arrays.asList(file), comment);\n    return ResponseEntity.ok(environment.getProperty(&quot;file.upload.success&quot;));\n}\n</code></pre>\n<p>On <code>swagger-ui</code> should show <code>multipart/form-data</code> selected on right:</p>\n<p><a href=\"https://i.stack.imgur.com/enSe2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/enSe2.png\" alt=\"enter image description here\" /></a></p>\n<hr />\n<h4>Reference:</h4>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/74149274/post-method-with-multipartfile-as-requestpart-is-considered-as-string-in-swagger\">POST method with MultipartFile as RequestPart is considered as String in swagger3 open-api Springboot project</a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":29057741,"reputation":11,"user_id":22259166,"display_name":"anh"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689862811,"creation_date":1689862811,"answer_id":76730849,"question_id":72982587,"body_markdown":"Along the line of Rafael&#39;s post, this worked for me:\r\n ```\r\npublic ResponseEntity&lt;String&gt; xslTransform(\r\n            @Parameter(description = &quot;Upload a xsl and a xml file&quot;, content = @Content(mediaType = MediaType.MULTIPART_FORM_DATA_VALUE))\r\n            @RequestPart(value = &quot;Upload 2 files&quot;, required = true)\r\n            MultipartFile[] files) {\r\n........\r\n    }\r\n```\r\n\r\nI use openapi version 1.6.15. the only issue is that I cannot set the maximum number of items in the array. Users might add more items than necessary.","title":"Why SpringDoc OpenAPI doesn&#39;t understand MultipartFile payload?","body":"<p>Along the line of Rafael's post, this worked for me:</p>\n<pre><code>public ResponseEntity&lt;String&gt; xslTransform(\n           @Parameter(description = &quot;Upload a xsl and a xml file&quot;, content = @Content(mediaType = MediaType.MULTIPART_FORM_DATA_VALUE))\n           @RequestPart(value = &quot;Upload 2 files&quot;, required = true)\n           MultipartFile[] files) {\n........\n   }\n</code></pre>\n<p>I use openapi version 1.6.15. the only issue is that I cannot set the maximum number of items in the array. Users might add more items than necessary.</p>\n"}],"owner":{"account_id":4533970,"reputation":458,"user_id":3683684,"display_name":"sanjeev"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2255,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1689862811,"creation_date":1657810554,"question_id":72982587,"body_markdown":"I&#39;m working on a Spring boot application which has a controller to help upload `Multipart` files:\r\n\r\n```\r\n@PostMapping(&quot;/files&quot;)\r\npublic ResponseEntity&lt;?&gt; uploadFiles(\r\n        @RequestParam(&quot;file&quot;) MultipartFile[] file, String comment) \r\n        throws IOException, ExecutionException, InterruptedException {\r\n    log.debug(&quot;Total files to store: {}&quot;, file.length);\r\n    log.debug(&quot;comment: {}&quot;, comment);\r\n    fileService.storeFile(Arrays.asList(file), comment);\r\n    return ResponseEntity.ok(environment.getProperty(&quot;file.upload.success&quot;));\r\n}\r\n```\r\n**Problem:** Somehow OpenDocAPI (swagger) doesn&#39;t understand this payload as file. \r\n\r\nIt shows this field as `String` if I mention `@RequestParam(&quot;file&quot;) MultipartFile file` or `String[]` if I use array of MultipartFiles.\r\n\r\nMy Spring boot parent:\r\n```\r\n&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n&lt;version&gt;2.7.1&lt;/version&gt;\r\n```\r\nThe spring doc openapi dependency:\r\n```\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;org.springdoc&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;springdoc-openapi-ui&lt;/artifactId&gt;\r\n\t&lt;version&gt;1.6.9&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\nThe swagger page:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\nThe result page when I click on &lt;kbd&gt;Try it out&lt;/kbd&gt;:\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\nThe &lt;kbd&gt;Execute&lt;/kbd&gt; button doesn&#39;t work\r\n\r\nAny idea what am I missing in the controller?\r\n\r\n**PS -** I tried with mentioning:\r\n\r\n    @PostMapping(value = &quot;/files&quot;, consumes = {MediaType.MULTIPART_FORM_DATA_VALUE})\r\n\r\nBut still OpenAPI would only treat it as `String`.\r\n\r\n  [1]: https://i.stack.imgur.com/BVaRC.png\r\n  [2]: https://i.stack.imgur.com/5QoMs.png","title":"Why SpringDoc OpenAPI doesn&#39;t understand MultipartFile payload?","body":"<p>I'm working on a Spring boot application which has a controller to help upload <code>Multipart</code> files:</p>\n<pre><code>@PostMapping(&quot;/files&quot;)\npublic ResponseEntity&lt;?&gt; uploadFiles(\n        @RequestParam(&quot;file&quot;) MultipartFile[] file, String comment) \n        throws IOException, ExecutionException, InterruptedException {\n    log.debug(&quot;Total files to store: {}&quot;, file.length);\n    log.debug(&quot;comment: {}&quot;, comment);\n    fileService.storeFile(Arrays.asList(file), comment);\n    return ResponseEntity.ok(environment.getProperty(&quot;file.upload.success&quot;));\n}\n</code></pre>\n<p><strong>Problem:</strong> Somehow OpenDocAPI (swagger) doesn't understand this payload as file.</p>\n<p>It shows this field as <code>String</code> if I mention <code>@RequestParam(&quot;file&quot;) MultipartFile file</code> or <code>String[]</code> if I use array of MultipartFiles.</p>\n<p>My Spring boot parent:</p>\n<pre><code>&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n&lt;version&gt;2.7.1&lt;/version&gt;\n</code></pre>\n<p>The spring doc openapi dependency:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springdoc&lt;/groupId&gt;\n    &lt;artifactId&gt;springdoc-openapi-ui&lt;/artifactId&gt;\n    &lt;version&gt;1.6.9&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>The swagger page:</p>\n<p><a href=\"https://i.stack.imgur.com/BVaRC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BVaRC.png\" alt=\"enter image description here\" /></a></p>\n<p>The result page when I click on <kbd>Try it out</kbd>:</p>\n<p><a href=\"https://i.stack.imgur.com/5QoMs.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5QoMs.png\" alt=\"enter image description here\" /></a></p>\n<p>The <kbd>Execute</kbd> button doesn't work</p>\n<p>Any idea what am I missing in the controller?</p>\n<p><strong>PS -</strong> I tried with mentioning:</p>\n<pre><code>@PostMapping(value = &quot;/files&quot;, consumes = {MediaType.MULTIPART_FORM_DATA_VALUE})\n</code></pre>\n<p>But still OpenAPI would only treat it as <code>String</code>.</p>\n"},{"tags":["java","json","maven","jsonschema2pojo"],"answers":[{"tags":[],"owner":{"account_id":24070761,"reputation":13,"user_id":18046714,"display_name":"Djoust"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689862722,"creation_date":1689862722,"answer_id":76730839,"question_id":71951310,"body_markdown":"What you can do in this case is make 2 separate json schemas and reference one in the other:\r\n\r\nroom.json\r\n``` json\r\n{\r\n  &quot;title&quot;: &quot;room&quot;,\r\n  &quot;$schema&quot;: &quot;https://json-schema.org/draft/2020-12/schema&quot;,\r\n  &quot;$id&quot;: &quot;room.json&quot;,\r\n  &quot;type&quot;: &quot;object&quot;,\r\n  &quot;properties&quot;: {\r\n    &quot;coffeeTable&quot;: {\r\n      &quot;type&quot;: &quot;array&quot;,\r\n      &quot;items&quot;: {\r\n        &quot;$ref&quot;: &quot;book.json&quot;\r\n      }\r\n    },\r\n    &quot;bookCase&quot;: {\r\n      &quot;type&quot;: &quot;array&quot;,\r\n      &quot;items&quot;: {\r\n        &quot;$ref&quot;: &quot;book.json&quot;\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nand book.json\r\n``` json\r\n{\r\n    &quot;title&quot;: &quot;Book&quot;,\r\n    &quot;$schema&quot;: &quot;https://json-schema.org/draft/2020-12/schema&quot;,\r\n    &quot;$id&quot;: &quot;book.json&quot;,\r\n    &quot;type&quot;: &quot;object&quot;,\r\n    &quot;properties&quot;: {\r\n        &quot;author&quot;: {\r\n            &quot;type&quot;: &quot;string&quot;\r\n        },\r\n        &quot;title&quot;: {\r\n            &quot;type&quot;: &quot;string&quot;\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nThis will generate 2 java file: `Room.java` &amp; `Book.java`","title":"Avoid generating duplicated classes with jsonschema2pojo and sourceType &quot;json&quot;","body":"<p>What you can do in this case is make 2 separate json schemas and reference one in the other:</p>\n<p>room.json</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;title&quot;: &quot;room&quot;,\n  &quot;$schema&quot;: &quot;https://json-schema.org/draft/2020-12/schema&quot;,\n  &quot;$id&quot;: &quot;room.json&quot;,\n  &quot;type&quot;: &quot;object&quot;,\n  &quot;properties&quot;: {\n    &quot;coffeeTable&quot;: {\n      &quot;type&quot;: &quot;array&quot;,\n      &quot;items&quot;: {\n        &quot;$ref&quot;: &quot;book.json&quot;\n      }\n    },\n    &quot;bookCase&quot;: {\n      &quot;type&quot;: &quot;array&quot;,\n      &quot;items&quot;: {\n        &quot;$ref&quot;: &quot;book.json&quot;\n      }\n    }\n  }\n}\n</code></pre>\n<p>and book.json</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n    &quot;title&quot;: &quot;Book&quot;,\n    &quot;$schema&quot;: &quot;https://json-schema.org/draft/2020-12/schema&quot;,\n    &quot;$id&quot;: &quot;book.json&quot;,\n    &quot;type&quot;: &quot;object&quot;,\n    &quot;properties&quot;: {\n        &quot;author&quot;: {\n            &quot;type&quot;: &quot;string&quot;\n        },\n        &quot;title&quot;: {\n            &quot;type&quot;: &quot;string&quot;\n        }\n    }\n}\n</code></pre>\n<p>This will generate 2 java file: <code>Room.java</code> &amp; <code>Book.java</code></p>\n"}],"owner":{"account_id":3836686,"reputation":913,"user_id":3180809,"accept_rate":86,"display_name":"esel"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":956,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1689862722,"creation_date":1650530149,"question_id":71951310,"body_markdown":"Following the instructions [here](https://stackoverflow.com/a/4480636/3180809), I use the jsonschema2pojo Maven plugin to generate Java classes from JSON example files.\r\n\r\nMy JSON example file has a structure like this \r\n\r\n```json\r\n{\r\n  &quot;coffeeTable&quot;: {\r\n    &quot;book&quot;: [\r\n      {\r\n        &quot;author&quot;: &quot;Aldo Rossi&quot;,\r\n        &quot;title&quot;: &quot;The Architecture of the City&quot;\r\n      }\r\n    ]\r\n  },\r\n  &quot;bookCase&quot;: [\r\n    {\r\n      &quot;book&quot;: [\r\n        {\r\n          &quot;author&quot;: &quot;Shakespeare&quot;,\r\n          &quot;title&quot;: &quot;Collected Works&quot;\r\n        }\r\n      ]\r\n    }\r\n  ]\r\n}\r\n```\r\n\r\nWhen generating Java classes from the JSON example, a class `Book` and a class `Book__1` is generated. `Book` is used for the books on the coffee table. `Book__1` is used for the elements in the book case.\r\nI saw that there are solutions for avoiding duplicated classes when [generating Java classes with JSON schema files in the documentation](https://github.com/joelittlejohn/jsonschema2pojo/wiki/Reference).\r\nI did not find a solution when using a JSON object directly for code generation.\r\nIs it possible to achieve that there is only a single `Book` class, which is used in both places,  generated from the JSON object above? Or do I have to create a JSON schema object from the JSON object and then use the `javaType`/`existingJavaType` annotation there to achieve this?\r\n","title":"Avoid generating duplicated classes with jsonschema2pojo and sourceType &quot;json&quot;","body":"<p>Following the instructions <a href=\"https://stackoverflow.com/a/4480636/3180809\">here</a>, I use the jsonschema2pojo Maven plugin to generate Java classes from JSON example files.</p>\n<p>My JSON example file has a structure like this</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;coffeeTable&quot;: {\n    &quot;book&quot;: [\n      {\n        &quot;author&quot;: &quot;Aldo Rossi&quot;,\n        &quot;title&quot;: &quot;The Architecture of the City&quot;\n      }\n    ]\n  },\n  &quot;bookCase&quot;: [\n    {\n      &quot;book&quot;: [\n        {\n          &quot;author&quot;: &quot;Shakespeare&quot;,\n          &quot;title&quot;: &quot;Collected Works&quot;\n        }\n      ]\n    }\n  ]\n}\n</code></pre>\n<p>When generating Java classes from the JSON example, a class <code>Book</code> and a class <code>Book__1</code> is generated. <code>Book</code> is used for the books on the coffee table. <code>Book__1</code> is used for the elements in the book case.\nI saw that there are solutions for avoiding duplicated classes when <a href=\"https://github.com/joelittlejohn/jsonschema2pojo/wiki/Reference\" rel=\"nofollow noreferrer\">generating Java classes with JSON schema files in the documentation</a>.\nI did not find a solution when using a JSON object directly for code generation.\nIs it possible to achieve that there is only a single <code>Book</code> class, which is used in both places,  generated from the JSON object above? Or do I have to create a JSON schema object from the JSON object and then use the <code>javaType</code>/<code>existingJavaType</code> annotation there to achieve this?</p>\n"},{"tags":["java","spring","jackson","jboss"],"comments":[{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1689859965,"post_id":76730415,"comment_id":135275269,"body_markdown":"If a method you know exists, doesn&#39;t exist at runtime, then you are for sure not running with the jar versions you think you are. Check that you are actually using *only* the latest version jars at runtime.","body":"If a method you know exists, doesn&#39;t exist at runtime, then you are for sure not running with the jar versions you think you are. Check that you are actually using <i>only</i> the latest version jars at runtime."},{"owner":{"account_id":1315198,"reputation":3834,"user_id":1262248,"accept_rate":75,"display_name":"Aman Chhabra"},"score":0,"creation_date":1689860104,"post_id":76730415,"comment_id":135275300,"body_markdown":"Can you please check the scope of your dependency. And if that dependency is available during runtime. May be a good idea to share the snippet of where you added the dependency","body":"Can you please check the scope of your dependency. And if that dependency is available during runtime. May be a good idea to share the snippet of where you added the dependency"},{"owner":{"account_id":29057322,"reputation":1,"user_id":22258819,"display_name":"olzen"},"score":0,"creation_date":1689860410,"post_id":76730415,"comment_id":135275366,"body_markdown":"@Jorn i already deleted my repository. Only the newest jackson version is in there.","body":"@Jorn i already deleted my repository. Only the newest jackson version is in there."},{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1689860479,"post_id":76730415,"comment_id":135275383,"body_markdown":"@olzen Still, you should check your *actual* runtime classpath.","body":"@olzen Still, you should check your <i>actual</i> runtime classpath."},{"owner":{"account_id":29057322,"reputation":1,"user_id":22258819,"display_name":"olzen"},"score":0,"creation_date":1690173465,"post_id":76730415,"comment_id":135311021,"body_markdown":"Thank you guys! The problem has been fixed. My Jboss has delivered a older jackson version. After making an exclusion it worked fine!","body":"Thank you guys! The problem has been fixed. My Jboss has delivered a older jackson version. After making an exclusion it worked fine!"},{"owner":{"account_id":51161,"reputation":17015,"user_id":152794,"display_name":"James R. Perkins"},"score":0,"creation_date":1690419948,"post_id":76730415,"comment_id":135352708,"body_markdown":"What version of Wildfly or JBOss EAP are you using?","body":"What version of Wildfly or JBOss EAP are you using?"}],"owner":{"account_id":29057322,"reputation":1,"user_id":22258819,"display_name":"olzen"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689861891,"creation_date":1689859821,"question_id":76730415,"body_markdown":"when I start my local Jboss I got the following exception:\r\n````\r\nCaused by: java.lang.NoSuchMethodError: &#39;com.fasterxml.jackson.databind.cfg.MutableCoercionConfig com.fasterxml.jackson.dataformat.xml.XmlMapper.coercionConfigDefaults()&#39;\r\n````\r\n\r\n1. I use the newest Version of Jackson and the method exists in the class XmlMapper.\r\n2. Dependency tree looks good. All Versions of Jackson are the same. \r\n\r\nDoes anyone got a solution or had to deal with the same issue? ","title":"MethodNotFoundException Jackson XmlMapper.coercionConfigDefaults()","body":"<p>when I start my local Jboss I got the following exception:</p>\n<pre><code>Caused by: java.lang.NoSuchMethodError: 'com.fasterxml.jackson.databind.cfg.MutableCoercionConfig com.fasterxml.jackson.dataformat.xml.XmlMapper.coercionConfigDefaults()'\n</code></pre>\n<ol>\n<li>I use the newest Version of Jackson and the method exists in the class XmlMapper.</li>\n<li>Dependency tree looks good. All Versions of Jackson are the same.</li>\n</ol>\n<p>Does anyone got a solution or had to deal with the same issue?</p>\n"},{"tags":["java","wildfly","documents4j"],"owner":{"account_id":10637612,"reputation":141,"user_id":7833829,"display_name":"Omar Raed"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689861865,"creation_date":1689860060,"question_id":76730458,"body_markdown":"I have a Spring-based application running on WildFly as a Windows service. One of the APIs in my application utilizes documents4j LocalConverter to convert Word documents to PDF files. The conversion works perfectly when I start the WildFly service, but after a while, I encounter the following\r\n````\r\nerror: &quot;com.documents4j.throwables.ConversionInputException: The input file seems to be corrupt.&quot; \r\n````\r\nThis error occurs for all conversion requests, even though I am confident that the input files are not corrupted, as they have been successfully converted before the error occurs.\r\n\r\nRestarting the WildFly service temporarily resolves the issue, but the problem resurfaces after some time.\r\n\r\nI&#39;m using a singleton instance of IConverter that I initialize using the following code:\r\n```\r\nconverter = LocalConverter.builder()\r\n                    .workerPool(20, 150, 2, TimeUnit.SECONDS)\r\n                    .processTimeout(10, TimeUnit.SECONDS)\r\n                    .build();\r\n```\r\nThis instance is initialize only once and used for any conversion request using this code:\r\n```\r\nconverter\r\n    .convert(in).as(DocumentType.MS_WORD)\r\n    .to(bo).as(DocumentType.PDF)\r\n    .prioritizeWith(1000)\r\n    .execute();\r\n```\r\nWhat am I missing here ? Also is the way I&#39;m initializing and using the LocalConverter correct ?","title":"WildFly application gives documents4j LocalConverter: ConversionInputException after a while","body":"<p>I have a Spring-based application running on WildFly as a Windows service. One of the APIs in my application utilizes documents4j LocalConverter to convert Word documents to PDF files. The conversion works perfectly when I start the WildFly service, but after a while, I encounter the following</p>\n<pre><code>error: &quot;com.documents4j.throwables.ConversionInputException: The input file seems to be corrupt.&quot; \n</code></pre>\n<p>This error occurs for all conversion requests, even though I am confident that the input files are not corrupted, as they have been successfully converted before the error occurs.</p>\n<p>Restarting the WildFly service temporarily resolves the issue, but the problem resurfaces after some time.</p>\n<p>I'm using a singleton instance of IConverter that I initialize using the following code:</p>\n<pre><code>converter = LocalConverter.builder()\n                    .workerPool(20, 150, 2, TimeUnit.SECONDS)\n                    .processTimeout(10, TimeUnit.SECONDS)\n                    .build();\n</code></pre>\n<p>This instance is initialize only once and used for any conversion request using this code:</p>\n<pre><code>converter\n    .convert(in).as(DocumentType.MS_WORD)\n    .to(bo).as(DocumentType.PDF)\n    .prioritizeWith(1000)\n    .execute();\n</code></pre>\n<p>What am I missing here ? Also is the way I'm initializing and using the LocalConverter correct ?</p>\n"},{"tags":["java","jakarta-ee"],"answers":[{"tags":[],"owner":{"account_id":136531,"reputation":21531,"user_id":340088,"accept_rate":68,"display_name":"jbx"},"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1550656373,"creation_date":1550653370,"answer_id":54782418,"question_id":54782254,"body_markdown":"It is just the specification for Java Enterprise Edition going forward. \r\n\r\nOracle moved the JCP process to the Eclipse Foundation, but since Oracle still owns the Java trademark, Eclipse renamed it to *Jakarta EE*. \r\n\r\nThis blog might give you some more insight:\r\nhttps://eclipse-foundation.blog/2018/02/26/and-the-name-is/","title":"What exactly is Jakarta ee","body":"<p>It is just the specification for Java Enterprise Edition going forward. </p>\n\n<p>Oracle moved the JCP process to the Eclipse Foundation, but since Oracle still owns the Java trademark, Eclipse renamed it to <em>Jakarta EE</em>. </p>\n\n<p>This blog might give you some more insight:\n<a href=\"https://eclipse-foundation.blog/2018/02/26/and-the-name-is/\" rel=\"noreferrer\">https://eclipse-foundation.blog/2018/02/26/and-the-name-is/</a></p>\n"},{"tags":[],"owner":{"account_id":922035,"reputation":1189,"user_id":953550,"display_name":"Leonardo Cruz"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1689861828,"creation_date":1550654225,"answer_id":54782679,"question_id":54782254,"body_markdown":"Jakarta EE is the name used since 2017 for the technologies previously known as Java EE.\r\n\r\nThese technologies are composed by technical specifications and open source reference implementations of a Java based platform for enterprise applications.\r\n\r\nMore details in https://jakarta.ee/","title":"What exactly is Jakarta ee","body":"<p>Jakarta EE is the name used since 2017 for the technologies previously known as Java EE.</p>\n<p>These technologies are composed by technical specifications and open source reference implementations of a Java based platform for enterprise applications.</p>\n<p>More details in <a href=\"https://jakarta.ee/\" rel=\"nofollow noreferrer\">https://jakarta.ee/</a></p>\n"}],"owner":{"account_id":15016723,"reputation":834,"user_id":10839527,"display_name":"Theodosis "},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1649,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"closed_date":1550654843,"accepted_answer_id":54782418,"answer_count":2,"score":4,"last_activity_date":1689861828,"creation_date":1550652765,"question_id":54782254,"body_markdown":"I don&#39;t seem to find something online expect the fact that java ee stops and we can&#39;t use name right so we renamed it as Jakarta ee and that&#39;s ok but I still don&#39;t know if there any difference between Jakarta ee and java ee 8 why should I use Jakarta ee and not java ee 8 and on top of that I can&#39;t figure out where can I find Jakarta ee to start using it ","title":"What exactly is Jakarta ee","body":"<p>I don't seem to find something online expect the fact that java ee stops and we can't use name right so we renamed it as Jakarta ee and that's ok but I still don't know if there any difference between Jakarta ee and java ee 8 why should I use Jakarta ee and not java ee 8 and on top of that I can't figure out where can I find Jakarta ee to start using it </p>\n"},{"tags":["java","intellij-idea","elastic-apm"],"comments":[{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1689861819,"post_id":76730681,"comment_id":135275710,"body_markdown":"If it works in Eclipse, you have a problem with your build. Somehow the dependency jar isn&#39;t making it into the production environment.","body":"If it works in Eclipse, you have a problem with your build. Somehow the dependency jar isn&#39;t making it into the production environment."},{"owner":{"account_id":5272541,"reputation":151,"user_id":4210386,"display_name":"davidleongz"},"score":0,"creation_date":1689862575,"post_id":76730681,"comment_id":135275919,"body_markdown":"Yes, the error is &quot;java.lang.NoClassDefFoundError co/elastic/apm/attach/ElasticApmAttacher&quot; but I have the library correctly added and compiling","body":"Yes, the error is &quot;java.lang.NoClassDefFoundError co/elastic/apm/attach/ElasticApmAttacher&quot; but I have the library correctly added and compiling"},{"owner":{"account_id":3538058,"reputation":5428,"user_id":2960034,"display_name":"y.bedrov"},"score":0,"creation_date":1690302626,"post_id":76730681,"comment_id":135333260,"body_markdown":"Do you run it using Maven goal?","body":"Do you run it using Maven goal?"},{"owner":{"account_id":5272541,"reputation":151,"user_id":4210386,"display_name":"davidleongz"},"score":0,"creation_date":1692023475,"post_id":76730681,"comment_id":135566115,"body_markdown":"No, I run it with IntelliJ","body":"No, I run it with IntelliJ"}],"owner":{"account_id":5272541,"reputation":151,"user_id":4210386,"display_name":"davidleongz"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":136,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689861714,"creation_date":1689861607,"question_id":76730681,"body_markdown":"I&#39;m trying to use Elastic APM on IntelliJ on local environment but I have this error:\r\n\r\n````\r\nException encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;elasticApmConfig&#39;: Invocation of init method failed; nested exception is java.lang.NoClassDefFoundError: co/elastic/apm/attach/ElasticApmAttacher&quot;\r\n````\r\n\r\nNevertheless, the same project on Eclipse works.\r\n\r\nI&#39;m using this version in a springboot project with Java 11\r\n\r\n```\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;co.elastic.apm&lt;/groupId&gt;\r\n    &lt;artifactId&gt;apm-agent-attach&lt;/artifactId&gt;\r\n    &lt;version&gt;1.39.0&lt;/version&gt;\r\n    &lt;scope&gt;provided&lt;/scope&gt;\r\n&lt;/dependency&gt;\r\n```","title":"Error ElasticApmAttacher (Elastic APM) on IntelliJ","body":"<p>I'm trying to use Elastic APM on IntelliJ on local environment but I have this error:</p>\n<pre><code>Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'elasticApmConfig': Invocation of init method failed; nested exception is java.lang.NoClassDefFoundError: co/elastic/apm/attach/ElasticApmAttacher&quot;\n</code></pre>\n<p>Nevertheless, the same project on Eclipse works.</p>\n<p>I'm using this version in a springboot project with Java 11</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;co.elastic.apm&lt;/groupId&gt;\n    &lt;artifactId&gt;apm-agent-attach&lt;/artifactId&gt;\n    &lt;version&gt;1.39.0&lt;/version&gt;\n    &lt;scope&gt;provided&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":["java","ant","groovy","build","gradle"],"comments":[{"owner":{"account_id":40443,"reputation":1902,"user_id":117220,"accept_rate":67,"display_name":"Petr Gladkikh"},"score":3,"creation_date":1288176326,"post_id":2265283,"comment_id":4326102,"body_markdown":"Consider &quot;apply from: &#39;other.gradle&#39;&quot; construct to import external declarations. (See &quot;12.4. Configuring the project using an external build script&quot; here http://gradle.org/0.9-preview-1/docs/userguide/tutorial_this_and_that.html#sec:configuring_using_external_script)","body":"Consider &quot;apply from: &#39;other.gradle&#39;&quot; construct to import external declarations. (See &quot;12.4. Configuring the project using an external build script&quot; here <a href=\"http://gradle.org/0.9-preview-1/docs/userguide/tutorial_this_and_that.html#sec:configuring_using_external_script\" rel=\"nofollow noreferrer\">gradle.org/0.9-preview-1/docs/userguide/&hellip;</a>)"},{"owner":{"account_id":71611,"reputation":26366,"user_id":6998684,"display_name":"IgorGanapolsky"},"score":0,"creation_date":1478005257,"post_id":2265283,"comment_id":67974259,"body_markdown":"@PetrGladkikh `apply from` immediately executes the external tasks.  This may not be preferable in the execution logic (i.e. I&#39;d want to execute the tasks when I want to, not right away).","body":"@PetrGladkikh <code>apply from</code> immediately executes the external tasks.  This may not be preferable in the execution logic (i.e. I&#39;d want to execute the tasks when I want to, not right away)."},{"owner":{"account_id":404573,"reputation":7556,"user_id":772981,"accept_rate":46,"display_name":"Jarekczek"},"score":1,"creation_date":1479026835,"post_id":2265283,"comment_id":68379768,"body_markdown":"This statement in the comment above is **not true**: `apply from` immediately executes the external tasks. Don&#39;t get misleaded. External tasks are configured, not executed.","body":"This statement in the comment above is <b>not true</b>: <code>apply from</code> immediately executes the external tasks. Don&#39;t get misleaded. External tasks are configured, not executed."},{"owner":{"account_id":2078462,"reputation":10342,"user_id":2986984,"accept_rate":80,"display_name":"tkruse"},"score":0,"creation_date":1515485085,"post_id":2265283,"comment_id":83306552,"body_markdown":"Possible duplicate of [Is there a way to split/factor out common parts of Gradle build](https://stackoverflow.com/questions/2566685/is-there-a-way-to-split-factor-out-common-parts-of-gradle-build)","body":"Possible duplicate of <a href=\"https://stackoverflow.com/questions/2566685/is-there-a-way-to-split-factor-out-common-parts-of-gradle-build\">Is there a way to split/factor out common parts of Gradle build</a>"}],"answers":[{"tags":[],"owner":{"account_id":67634,"reputation":424,"user_id":197817,"display_name":"Tom"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1266538741,"creation_date":1266538741,"answer_id":2293256,"question_id":2265283,"body_markdown":"Well, it is hard to tell what serves you best without actually seeing your build file.\r\n\r\nI could assume that stetting up your environment as multi-project build should provide you the abstraction you are looking for.\r\n\r\nIn your project root  `build.gradle` you define all your domain specific stuff as well as the things that apply to **all** your subprojects:\r\n\r\n    repositories {\r\n        add(new org.apache.ivy.plugins.resolver.FileSystemResolver()) {\r\n            name = &#39;destRepo&#39;\r\n            addIvyPattern( file( project.properties[&#39;repo.dest.dir&#39;]).absolutePath + &#39;/[organisation]/[module]/ivys/ivy(-[revision]).xml&#39;)\r\n            addArtifactPattern( file( project.properties[&#39;repo.dest.dir&#39;]).absolutePath + &#39;/[organisation]/[module]/[type]s/[artifact](-[revision]).[ext]&#39;)\r\n            descriptor = &#39;optional&#39;\r\n            checkmodified = true\r\n        }\r\n        ...\r\n    }\r\n    ...\r\n    subprojects {\r\n        sourceCompatibility = 1.5\r\n        targetCompatibility = 1.5\r\n        group = &#39;my.group&#39;\r\n        version = &#39;1.0&#39;\r\n        uploadArchives {\r\n            uploadDescriptor = true\r\n            repositories {\r\n                add rootProject.repositories.destRepo\r\n            }\r\n        }\r\n        apply{ type my.group.gradle.api.plugins.MyPlugin }\r\n        ...\r\n    }\r\n    \r\n    dependsOnChildren()\r\n\r\nThe project root directory might also contain a `gradle.properties` file where you define properties used by your projects:\r\n\r\n    buildDirName=staging\r\n    repo.dest.dir=/var/repo\r\n    ...\r\n\r\nThen in an additional file from your project root named `settings.gradle` you actually point to your subprojects:\r\n\r\n    include &#39;my-first-component&#39;,\r\n            &#39;my-second-component&#39;\r\n    ...\r\n    project(&#39;:my-first-component&#39;).projectDir = new File(rootDir, &#39;path/to/first/component&#39;)\r\n    project(&#39;:my-second-component&#39;).projectDir = new File(rootDir, &#39;path/to/second/component&#39;)\r\n    ...\r\n\r\nEach sub-project directory contains a `build.gradle` file containing the sub-project specific stuff only.\r\n\r\nNo matter if you invoke `gradle` from your project root or sub-project directory, gradle will automatically consider all your definitions done in the various files.\r\n\r\nAlso note that no compile task will be executed for your project root as long as you don&#39;t load any plugin beyond the default plugin at the root level.","title":"How can I import one Gradle script into another?","body":"<p>Well, it is hard to tell what serves you best without actually seeing your build file.</p>\n\n<p>I could assume that stetting up your environment as multi-project build should provide you the abstraction you are looking for.</p>\n\n<p>In your project root  <code>build.gradle</code> you define all your domain specific stuff as well as the things that apply to <strong>all</strong> your subprojects:</p>\n\n<pre><code>repositories {\n    add(new org.apache.ivy.plugins.resolver.FileSystemResolver()) {\n        name = 'destRepo'\n        addIvyPattern( file( project.properties['repo.dest.dir']).absolutePath + '/[organisation]/[module]/ivys/ivy(-[revision]).xml')\n        addArtifactPattern( file( project.properties['repo.dest.dir']).absolutePath + '/[organisation]/[module]/[type]s/[artifact](-[revision]).[ext]')\n        descriptor = 'optional'\n        checkmodified = true\n    }\n    ...\n}\n...\nsubprojects {\n    sourceCompatibility = 1.5\n    targetCompatibility = 1.5\n    group = 'my.group'\n    version = '1.0'\n    uploadArchives {\n        uploadDescriptor = true\n        repositories {\n            add rootProject.repositories.destRepo\n        }\n    }\n    apply{ type my.group.gradle.api.plugins.MyPlugin }\n    ...\n}\n\ndependsOnChildren()\n</code></pre>\n\n<p>The project root directory might also contain a <code>gradle.properties</code> file where you define properties used by your projects:</p>\n\n<pre><code>buildDirName=staging\nrepo.dest.dir=/var/repo\n...\n</code></pre>\n\n<p>Then in an additional file from your project root named <code>settings.gradle</code> you actually point to your subprojects:</p>\n\n<pre><code>include 'my-first-component',\n        'my-second-component'\n...\nproject(':my-first-component').projectDir = new File(rootDir, 'path/to/first/component')\nproject(':my-second-component').projectDir = new File(rootDir, 'path/to/second/component')\n...\n</code></pre>\n\n<p>Each sub-project directory contains a <code>build.gradle</code> file containing the sub-project specific stuff only.</p>\n\n<p>No matter if you invoke <code>gradle</code> from your project root or sub-project directory, gradle will automatically consider all your definitions done in the various files.</p>\n\n<p>Also note that no compile task will be executed for your project root as long as you don't load any plugin beyond the default plugin at the root level.</p>\n"},{"tags":[],"owner":{"account_id":54418,"reputation":20355,"user_id":162792,"accept_rate":100,"display_name":"Andrey Adamovich"},"down_vote_count":0,"up_vote_count":147,"is_accepted":false,"score":147,"last_activity_date":1270619326,"creation_date":1270619326,"answer_id":2590264,"question_id":2265283,"body_markdown":"There is a new feature in 0.9. You can use `apply from: &#39;other.gradle&#39;` command.\r\n\r\nRead my question about same thing at: https://stackoverflow.com/questions/2566685/is-there-a-way-to-split-factor-out-common-parts-of-gradle-build","title":"How can I import one Gradle script into another?","body":"<p>There is a new feature in 0.9. You can use <code>apply from: 'other.gradle'</code> command.</p>\n\n<p>Read my question about same thing at: <a href=\"https://stackoverflow.com/questions/2566685/is-there-a-way-to-split-factor-out-common-parts-of-gradle-build\">Is there a way to split/factor out common parts of Gradle build</a></p>\n"},{"tags":[],"owner":{"account_id":12556,"reputation":1835,"user_id":1312601,"accept_rate":62,"display_name":"Anthony Roy"},"down_vote_count":1,"up_vote_count":18,"is_accepted":true,"score":17,"last_activity_date":1371065145,"creation_date":1314697734,"answer_id":7241391,"question_id":2265283,"body_markdown":"The answer to the question turned out to be in the Plugins system, where you can add the desired functionality in a set of plugins which can be groovy files located in the directory `buildSrc/src/main/groovy`. Plugins can also be bundled as a Jar though I haven&#39;t tried this.\r\n\r\nDetails here: [Custom Plugins][1]\r\n\r\n\r\n  [1]: http://www.gradle.org/docs/current/userguide/userguide_single.html#sec:configuring_using_external_script","title":"How can I import one Gradle script into another?","body":"<p>The answer to the question turned out to be in the Plugins system, where you can add the desired functionality in a set of plugins which can be groovy files located in the directory <code>buildSrc/src/main/groovy</code>. Plugins can also be bundled as a Jar though I haven't tried this.</p>\n\n<p>Details here: <a href=\"http://www.gradle.org/docs/current/userguide/userguide_single.html#sec%3aconfiguring_using_external_script\">Custom Plugins</a></p>\n"},{"tags":[],"owner":{"account_id":11726648,"reputation":19523,"user_id":8583692,"display_name":"Mahozad"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1689861699,"creation_date":1645122004,"answer_id":71163454,"question_id":2265283,"body_markdown":"This is an example for [Kotlin DSL][1] (build.gradle.**kts**).\r\n\r\n```kotlin\r\napply(from = &quot;scripts/my-script.gradle.kts&quot;)\r\n```\r\n\r\n*scripts/my-script.gradle.kts*:\r\n\r\n```kotlin\r\nprintln(\r\n    &quot;&quot;&quot;\r\n    I am defined at the top level of the script and\r\n    executed at the configuration phase of build process\r\n    &quot;&quot;&quot;\r\n)\r\n\r\ntasks.create(&quot;MyTask&quot;) {\r\n    println(\r\n        &quot;&quot;&quot;\r\n        I am defined in a task and\r\n        run at the configration phase of build process&quot;&quot;&quot;\r\n    )\r\n    doLast {\r\n        // ...\r\n    }\r\n}\r\n```\r\n\r\nSee [this answer](https://stackoverflow.com/a/52139585/8583692) and [this answer](https://stackoverflow.com/a/60252724/8583692) for how to import a function from another script in Kotlin DSL.\r\n\r\n\r\n  [1]: https://docs.gradle.org/current/userguide/kotlin_dsl.html","title":"How can I import one Gradle script into another?","body":"<p>This is an example for <a href=\"https://docs.gradle.org/current/userguide/kotlin_dsl.html\" rel=\"nofollow noreferrer\">Kotlin DSL</a> (build.gradle.<strong>kts</strong>).</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>apply(from = &quot;scripts/my-script.gradle.kts&quot;)\n</code></pre>\n<p><em>scripts/my-script.gradle.kts</em>:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>println(\n    &quot;&quot;&quot;\n    I am defined at the top level of the script and\n    executed at the configuration phase of build process\n    &quot;&quot;&quot;\n)\n\ntasks.create(&quot;MyTask&quot;) {\n    println(\n        &quot;&quot;&quot;\n        I am defined in a task and\n        run at the configration phase of build process&quot;&quot;&quot;\n    )\n    doLast {\n        // ...\n    }\n}\n</code></pre>\n<p>See <a href=\"https://stackoverflow.com/a/52139585/8583692\">this answer</a> and <a href=\"https://stackoverflow.com/a/60252724/8583692\">this answer</a> for how to import a function from another script in Kotlin DSL.</p>\n"},{"tags":[],"owner":{"account_id":7609862,"reputation":385,"user_id":5771107,"display_name":"yuyu5"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1666174397,"creation_date":1666174397,"answer_id":74123622,"question_id":2265283,"body_markdown":"Based off [this similar question/answer](https://stackoverflow.com/questions/24528242/how-can-i-find-the-path-of-the-current-gradle-script/36527087#36527087), the easiest solution I&#39;ve found after searching for days is using `buildscript.sourceFile`. It correctly gives the file being run rather than the `pwd`/`cwd`/parent-file of said process. I feel like this would solve your issue.","title":"How can I import one Gradle script into another?","body":"<p>Based off <a href=\"https://stackoverflow.com/questions/24528242/how-can-i-find-the-path-of-the-current-gradle-script/36527087#36527087\">this similar question/answer</a>, the easiest solution I've found after searching for days is using <code>buildscript.sourceFile</code>. It correctly gives the file being run rather than the <code>pwd</code>/<code>cwd</code>/parent-file of said process. I feel like this would solve your issue.</p>\n"}],"owner":{"account_id":12556,"reputation":1835,"user_id":1312601,"accept_rate":62,"display_name":"Anthony Roy"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":101375,"favorite_count":0,"down_vote_count":0,"up_vote_count":113,"accepted_answer_id":7241391,"answer_count":5,"score":113,"last_activity_date":1689861699,"creation_date":1266230086,"question_id":2265283,"body_markdown":"I have a complex Gradle script that wraps up a load of functionality around building and deploying a number of NetBeans projects to a number of environments.\r\n\r\nThe script works very well, but in essence it is all configured through half a dozen maps holding project and environment information.\r\n\r\nI want to abstract the tasks away into another file, so that I can simply define my maps in a simple build file, and import the tasks from the other file. In this way, I can use the same core tasks for a number of projects and configure those projects with a simple set of maps.\r\n\r\nCan anyone tell me how I can import one Gradle file into another, in a similar manner to Ant&#39;s &lt;import&gt; task? I&#39;ve trawled Gradle&#39;s docs to no avail so far.\r\n\r\n**Additional Info**\r\n\r\nAfter Tom&#39;s response below, I thought I&#39;d try and clarify exactly what I mean.\r\n\r\nBasically I have a Gradle script which runs a number of subprojects. However, the subprojects are all NetBeans projects, and come with their own ant build scripts, so I have tasks in Gradle to call each of these.\r\n\r\nMy problem is that I have some configuration at the top of the file, such as:\r\n\r\n```groovy\r\nprojects = [\r\n    [name:&quot;MySubproject1&quot;, shortname: &quot;sub1&quot;, env:&quot;mainEnv&quot;, cvs_module=&quot;mod1&quot;],\r\n    [name:&quot;MySubproject2&quot;, shortname: &quot;sub2&quot;, env:&quot;altEnv&quot;, cvs_module=&quot;mod2&quot;]\r\n]\r\n```\r\n    \r\nI then generate tasks such as:\r\n\r\n```groovy\r\nprojects.each({\r\n    task &quot;checkout_$it.shortname&quot; &lt;&lt; {\r\n         // Code to for example check module out from cvs using config from &#39;it&#39;.\r\n    }\r\n})\r\n```\r\n\r\nI have many of these sort of task generation snippets, and all of them are generic - they entirely depend on the config in the projects list.\r\n\r\nSo what I want is a way to put this in a separate script and import it in the following sort of way:\r\n\r\n```groovy\r\nprojects = [\r\n    [name:&quot;MySubproject1&quot;, shortname: &quot;sub1&quot;, env:&quot;mainEnv&quot;, cvs_module=&quot;mod1&quot;],\r\n    [name:&quot;MySubproject2&quot;, shortname: &quot;sub2&quot;, env:&quot;altEnv&quot;, cvs_module=&quot;mod2&quot;]\r\n]\r\n\r\nimport(&quot;tasks.gradle&quot;) // This will import and run the script so that all tasks are generated for the projects given above.\r\n```\r\n\r\nSo, in this example, tasks.gradle will have all the generic task generation code in, and will get run for the projects defined in the main build.gradle file. In this way, tasks.gradle is a file that can be used by all large projects that consist of a number of sub-projects with NetBeans ant build files.\r\n","title":"How can I import one Gradle script into another?","body":"<p>I have a complex Gradle script that wraps up a load of functionality around building and deploying a number of NetBeans projects to a number of environments.</p>\n<p>The script works very well, but in essence it is all configured through half a dozen maps holding project and environment information.</p>\n<p>I want to abstract the tasks away into another file, so that I can simply define my maps in a simple build file, and import the tasks from the other file. In this way, I can use the same core tasks for a number of projects and configure those projects with a simple set of maps.</p>\n<p>Can anyone tell me how I can import one Gradle file into another, in a similar manner to Ant's  task? I've trawled Gradle's docs to no avail so far.</p>\n<p><strong>Additional Info</strong></p>\n<p>After Tom's response below, I thought I'd try and clarify exactly what I mean.</p>\n<p>Basically I have a Gradle script which runs a number of subprojects. However, the subprojects are all NetBeans projects, and come with their own ant build scripts, so I have tasks in Gradle to call each of these.</p>\n<p>My problem is that I have some configuration at the top of the file, such as:</p>\n<pre><code>projects = [\n    [name:&quot;MySubproject1&quot;, shortname: &quot;sub1&quot;, env:&quot;mainEnv&quot;, cvs_module=&quot;mod1&quot;],\n    [name:&quot;MySubproject2&quot;, shortname: &quot;sub2&quot;, env:&quot;altEnv&quot;, cvs_module=&quot;mod2&quot;]\n]\n</code></pre>\n<p>I then generate tasks such as:</p>\n<pre><code>projects.each({\n    task &quot;checkout_$it.shortname&quot; &lt;&lt; {\n         // Code to for example check module out from cvs using config from 'it'.\n    }\n})\n</code></pre>\n<p>I have many of these sort of task generation snippets, and all of them are generic - they entirely depend on the config in the projects list.</p>\n<p>So what I want is a way to put this in a separate script and import it in the following sort of way:</p>\n<pre><code>projects = [\n    [name:&quot;MySubproject1&quot;, shortname: &quot;sub1&quot;, env:&quot;mainEnv&quot;, cvs_module=&quot;mod1&quot;],\n    [name:&quot;MySubproject2&quot;, shortname: &quot;sub2&quot;, env:&quot;altEnv&quot;, cvs_module=&quot;mod2&quot;]\n]\n\nimport(&quot;tasks.gradle&quot;) // This will import and run the script so that all tasks are generated for the projects given above.\n</code></pre>\n<p>So, in this example, tasks.gradle will have all the generic task generation code in, and will get run for the projects defined in the main build.gradle file. In this way, tasks.gradle is a file that can be used by all large projects that consist of a number of sub-projects with NetBeans ant build files.</p>\n"},{"tags":["java","jvm"],"comments":[{"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"score":1,"creation_date":1689857561,"post_id":76729903,"comment_id":135274648,"body_markdown":"This is easy to test: you can easily create one million `Thread` instances (for example with a `Runnable` that does only `Thread.sleep(10_000);`). When you try to start them your code will fail after starting some thousands of them.","body":"This is easy to test: you can easily create one million <code>Thread</code> instances (for example with a <code>Runnable</code> that does only <code>Thread.sleep(10_000);</code>). When you try to start them your code will fail after starting some thousands of them."},{"owner":{"account_id":1262646,"reputation":2597,"user_id":1220560,"display_name":"morgwai"},"score":0,"creation_date":1689857974,"post_id":76729903,"comment_id":135274750,"body_markdown":"@ThomasKl&#228;ger well, it is still not a definitive answer whether a JVM thread is created on `start()` or whether it&#39;s created on `Thread` instance creation, but some critical OS level resources are only allocated when it&#39;s &#39;start()&#39;-ed, but it&#39;s sufficient for practical reasons: many thanks!! :) If you bother to make an actual answer from it, I will be happy to accept it :)","body":"@ThomasKl&#228;ger well, it is still not a definitive answer whether a JVM thread is created on <code>start()</code> or whether it&#39;s created on <code>Thread</code> instance creation, but some critical OS level resources are only allocated when it&#39;s &#39;start()&#39;-ed, but it&#39;s sufficient for practical reasons: many thanks!! :) If you bother to make an actual answer from it, I will be happy to accept it :)"},{"owner":{"account_id":1262646,"reputation":2597,"user_id":1220560,"display_name":"morgwai"},"score":0,"creation_date":1689859071,"post_id":76729903,"comment_id":135275039,"body_markdown":"@ThomasKl&#228;ger also, is it possible that this JVM implementation specific? Thanks!","body":"@ThomasKl&#228;ger also, is it possible that this JVM implementation specific? Thanks!"}],"answers":[{"tags":[],"owner":{"account_id":21464193,"reputation":31,"user_id":15814409,"display_name":"Freezing"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1689858457,"creation_date":1689856601,"answer_id":76729958,"question_id":76729903,"body_markdown":"A Thread is created only when the start() method is called.\r\nYou can check it out on the JDK doc here:\r\nhttps://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.html\r\n\r\nThe following code shows you how this works\r\n```\r\nimport java.util.Random;\r\npublic class Threads {\r\n\r\n    private static final Random rnd = new Random();\r\n\r\n    private static int rand(int a, int b) {\r\n        synchronized (rnd) {\r\n            return rnd.nextInt(b - a) + a;\r\n        }\r\n    }\r\n\r\n    private static void loop() {\r\n        while (true) {\r\n            synchronized (rnd) {\r\n                try {\r\n                    Thread.sleep(rand(200, 1000));\r\n                } catch (InterruptedException e) {}\r\n\r\n                System.out.println(&quot;Hi, i&#39;m &quot;);\r\n                System.out.println(&quot;thread #&quot; + Thread.currentThread().getId());\r\n            }\r\n        }\r\n    }\r\n\r\n    public static class MyThread extends Thread {\r\n        @Override\r\n        public void run() {\r\n            loop();\r\n        }\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        Thread t1 = new MyThread();\r\n        t1.start();\r\n\r\n        new Thread(Threads::loop).start();\r\n        new MyThread().start();\r\n        new MyThread().start();\r\n        new MyThread().start();\r\n        loop();\r\n\r\n        try {\r\n            t1.join();\r\n        } catch (InterruptedException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n    }\r\n\r\n\r\n}\r\n```","title":"relation between JVM threads and Thread instances","body":"<p>A Thread is created only when the start() method is called.\nYou can check it out on the JDK doc here:\n<a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.html</a></p>\n<p>The following code shows you how this works</p>\n<pre><code>import java.util.Random;\npublic class Threads {\n\n    private static final Random rnd = new Random();\n\n    private static int rand(int a, int b) {\n        synchronized (rnd) {\n            return rnd.nextInt(b - a) + a;\n        }\n    }\n\n    private static void loop() {\n        while (true) {\n            synchronized (rnd) {\n                try {\n                    Thread.sleep(rand(200, 1000));\n                } catch (InterruptedException e) {}\n\n                System.out.println(&quot;Hi, i'm &quot;);\n                System.out.println(&quot;thread #&quot; + Thread.currentThread().getId());\n            }\n        }\n    }\n\n    public static class MyThread extends Thread {\n        @Override\n        public void run() {\n            loop();\n        }\n    }\n\n    public static void main(String[] args) {\n        Thread t1 = new MyThread();\n        t1.start();\n\n        new Thread(Threads::loop).start();\n        new MyThread().start();\n        new MyThread().start();\n        new MyThread().start();\n        loop();\n\n        try {\n            t1.join();\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        }\n\n    }\n\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1689861524,"creation_date":1689861524,"answer_id":76730664,"question_id":76729903,"body_markdown":"For one thing you could try this for yourself by creating many `Thread` objects and later try to start all those `Thread`s:\r\n\r\n    public class ThreadRunner {\r\n        public static void main(String[] args) {\r\n            int maxThreads = 10_000_000;\r\n    \r\n            // Create Thread instances\r\n            Thread[] threads = new Thread[maxThreads];\r\n            Runnable r = () -&gt; {\r\n                try {\r\n                    Thread.sleep(1000_000);\r\n                } catch (InterruptedException e) {\r\n                }\r\n            };\r\n            for (int i = 0; i &lt; maxThreads; i++) {\r\n                threads[i] = new Thread(r);\r\n            }\r\n    \r\n            // start Threads\r\n            int count = 0;\r\n            try {\r\n                for (Thread t : threads) {\r\n                    t.start();\r\n                    count++;\r\n                    if (count % 1000 == 0) {\r\n                        System.out.println(count);\r\n                    }\r\n                    Thread.yield();\r\n                }\r\n            } catch (OutOfMemoryError e) {\r\n                System.out.println(count);\r\n            }\r\n        }\r\n    }\r\n\r\nThe other way is to check the source of the OpenJDK:\r\n\r\n- [Thread.java](https://github.com/openjdk/jdk17u/blob/jdk-17%2B35/src/java.base/share/classes/java/lang/Thread.java#L784) calls the native `start0()` method\r\n\r\n- [Thread.c](https://github.com/openjdk/jdk17u/blob/jdk-17%2B35/src/java.base/share/native/libjava/Thread.c#L44) declares that `start0` is forwared to the native `JVM_StartThread`\r\n&gt;      {&quot;start0&quot;,           &quot;()V&quot;,        (void *)&amp;JVM_StartThread},\r\n\r\n- [jvm.cpp](https://github.com/openjdk/jdk17u/blob/jdk-17%2B35/src/hotspot/share/prims/jvm.cpp#L2854) contains that native function which determines the stack size for the native thread and then creates it with\r\n\r\n          jlong size =\r\n                 java_lang_Thread::stackSize(JNIHandles::resolve_non_null(jthread));\r\n          // Allocate the C++ Thread structure and create the native thread.  The\r\n          // stack size retrieved from java is 64-bit signed, but the constructor takes\r\n          // size_t (an unsigned type), which may be 32 or 64-bit depending on the platform.\r\n          //  - Avoid truncating on 32-bit platforms if size is greater than UINT_MAX.\r\n          //  - Avoid passing negative values which would result in really large stacks.\r\n          NOT_LP64(if (size &gt; SIZE_MAX) size = SIZE_MAX;)\r\n          size_t sz = size &gt; 0 ? (size_t) size : 0;\r\n          native_thread = new JavaThread(&amp;thread_entry, sz);\r\n\r\n----\r\nDoes this depend on the specific JVM implementation?\r\n\r\nIn principle, it could depend on the specific JVM implementation. It would however be silly to create an OS thread before it is really needed.\r\n\r\nThe main reason why I call this silly is the resource management. When you create an OS thread you must also destroy it. When you `start()` a `Thread` the OS thread is created, the threads `run()` method is exeucted and after that method returns the OS thread will be destroyed.\r\n\r\nIf a hypothetical JVM implementation created the OS thread already in the `Thread` constructor it would also need some way of destroying that OS thread when the `Thread` instance is garbage collected which will be hassle.","title":"relation between JVM threads and Thread instances","body":"<p>For one thing you could try this for yourself by creating many <code>Thread</code> objects and later try to start all those <code>Thread</code>s:</p>\n<pre><code>public class ThreadRunner {\n    public static void main(String[] args) {\n        int maxThreads = 10_000_000;\n\n        // Create Thread instances\n        Thread[] threads = new Thread[maxThreads];\n        Runnable r = () -&gt; {\n            try {\n                Thread.sleep(1000_000);\n            } catch (InterruptedException e) {\n            }\n        };\n        for (int i = 0; i &lt; maxThreads; i++) {\n            threads[i] = new Thread(r);\n        }\n\n        // start Threads\n        int count = 0;\n        try {\n            for (Thread t : threads) {\n                t.start();\n                count++;\n                if (count % 1000 == 0) {\n                    System.out.println(count);\n                }\n                Thread.yield();\n            }\n        } catch (OutOfMemoryError e) {\n            System.out.println(count);\n        }\n    }\n}\n</code></pre>\n<p>The other way is to check the source of the OpenJDK:</p>\n<ul>\n<li><p><a href=\"https://github.com/openjdk/jdk17u/blob/jdk-17%2B35/src/java.base/share/classes/java/lang/Thread.java#L784\" rel=\"nofollow noreferrer\">Thread.java</a> calls the native <code>start0()</code> method</p>\n</li>\n<li><p><a href=\"https://github.com/openjdk/jdk17u/blob/jdk-17%2B35/src/java.base/share/native/libjava/Thread.c#L44\" rel=\"nofollow noreferrer\">Thread.c</a> declares that <code>start0</code> is forwared to the native <code>JVM_StartThread</code></p>\n</li>\n</ul>\n<blockquote>\n<pre><code> {&quot;start0&quot;,           &quot;()V&quot;,        (void *)&amp;JVM_StartThread},\n</code></pre>\n</blockquote>\n<ul>\n<li><p><a href=\"https://github.com/openjdk/jdk17u/blob/jdk-17%2B35/src/hotspot/share/prims/jvm.cpp#L2854\" rel=\"nofollow noreferrer\">jvm.cpp</a> contains that native function which determines the stack size for the native thread and then creates it with</p>\n<pre><code>    jlong size =\n           java_lang_Thread::stackSize(JNIHandles::resolve_non_null(jthread));\n    // Allocate the C++ Thread structure and create the native thread.  The\n    // stack size retrieved from java is 64-bit signed, but the constructor takes\n    // size_t (an unsigned type), which may be 32 or 64-bit depending on the platform.\n    //  - Avoid truncating on 32-bit platforms if size is greater than UINT_MAX.\n    //  - Avoid passing negative values which would result in really large stacks.\n    NOT_LP64(if (size &gt; SIZE_MAX) size = SIZE_MAX;)\n    size_t sz = size &gt; 0 ? (size_t) size : 0;\n    native_thread = new JavaThread(&amp;thread_entry, sz);\n</code></pre>\n</li>\n</ul>\n<hr />\n<p>Does this depend on the specific JVM implementation?</p>\n<p>In principle, it could depend on the specific JVM implementation. It would however be silly to create an OS thread before it is really needed.</p>\n<p>The main reason why I call this silly is the resource management. When you create an OS thread you must also destroy it. When you <code>start()</code> a <code>Thread</code> the OS thread is created, the threads <code>run()</code> method is exeucted and after that method returns the OS thread will be destroyed.</p>\n<p>If a hypothetical JVM implementation created the OS thread already in the <code>Thread</code> constructor it would also need some way of destroying that OS thread when the <code>Thread</code> instance is garbage collected which will be hassle.</p>\n"}],"owner":{"account_id":1262646,"reputation":2597,"user_id":1220560,"display_name":"morgwai"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":87,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76730664,"answer_count":2,"score":1,"last_activity_date":1689861524,"creation_date":1689856270,"question_id":76729903,"body_markdown":"I think I have and understanding of a mapping between OS threads and JVM threads (first we had &quot;green threads&quot; with 1os:Many-green, then there was 1:1 mapping and now with [jep-425](https://openjdk.org/jeps/425) we have virtual threads with M:N mapping: please correct me if I&#39;m wrong). I&#39;m however quite confused about the mapping between JVM threads and `Thread` instances: I&#39;m **almost** sure that there is a 1:1 mapping between `start()`-ed `Thread` instances and JVM threads (again, please correct me if I&#39;m wrong), but I&#39;m not sure if a JVM thread is created and its stack allocated when a `Thread` instance is constructed or only when `start()` method is called. Whatever the correct answer is, I also wonder if it is a part of the JVM/Java-language spec or up to implementation, such as OpenJDK.","title":"relation between JVM threads and Thread instances","body":"<p>I think I have and understanding of a mapping between OS threads and JVM threads (first we had &quot;green threads&quot; with 1os:Many-green, then there was 1:1 mapping and now with <a href=\"https://openjdk.org/jeps/425\" rel=\"nofollow noreferrer\">jep-425</a> we have virtual threads with M:N mapping: please correct me if I'm wrong). I'm however quite confused about the mapping between JVM threads and <code>Thread</code> instances: I'm <strong>almost</strong> sure that there is a 1:1 mapping between <code>start()</code>-ed <code>Thread</code> instances and JVM threads (again, please correct me if I'm wrong), but I'm not sure if a JVM thread is created and its stack allocated when a <code>Thread</code> instance is constructed or only when <code>start()</code> method is called. Whatever the correct answer is, I also wonder if it is a part of the JVM/Java-language spec or up to implementation, such as OpenJDK.</p>\n"},{"tags":["java","mysql","hibernate","exception","classnotfoundexception"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1595593174,"post_id":63073364,"comment_id":111536135,"body_markdown":"Take the provided scope off the `mysql-connector-java` dependency.","body":"Take the provided scope off the <code>mysql-connector-java</code> dependency."},{"owner":{"account_id":8357383,"reputation":11939,"user_id":6277104,"display_name":"SternK"},"score":0,"creation_date":1595593337,"post_id":63073364,"comment_id":111536227,"body_markdown":"Also try to use `com.mysql.cj.jdbc.Driver`. The `com.mysql.jdbc.Driver` is deprecated. (see the [documentation](https://dev.mysql.com/doc/connector-j/8.0/en/connector-j-api-changes.html))","body":"Also try to use <code>com.mysql.cj.jdbc.Driver</code>. The <code>com.mysql.jdbc.Driver</code> is deprecated. (see the <a href=\"https://dev.mysql.com/doc/connector-j/8.0/en/connector-j-api-changes.html\" rel=\"nofollow noreferrer\">documentation</a>)"},{"owner":{"account_id":18479935,"reputation":82,"user_id":13462381,"display_name":"David9809"},"score":0,"creation_date":1595601008,"post_id":63073364,"comment_id":111540248,"body_markdown":"unfortunately, any of those tips doesn&#39;t work","body":"unfortunately, any of those tips doesn&#39;t work"},{"owner":{"account_id":4625774,"reputation":304,"user_id":3749639,"display_name":"Pablo AM"},"score":0,"creation_date":1595606795,"post_id":63073364,"comment_id":111543135,"body_markdown":"Could you please update your question and include a valid persistence.xml? That one is missing some pieces of code. For example there is no initial tag for persistence-unit","body":"Could you please update your question and include a valid persistence.xml? That one is missing some pieces of code. For example there is no initial tag for persistence-unit"}],"answers":[{"tags":[],"owner":{"account_id":4625774,"reputation":304,"user_id":3749639,"display_name":"Pablo AM"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1595609153,"creation_date":1595609153,"answer_id":63077971,"question_id":63073364,"body_markdown":"I have tested your code and the problem is in the mysql maven dependency you need to remove scope provided because you are saying it will be provided while running but that is not the case.\r\n\r\n\r\nThese are the changes I did to make it run.\r\n\r\n- Remove provided scope to mysql maven dependency\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;mysql&lt;/groupId&gt;\r\n            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n            &lt;version&gt;8.0.15&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\nChange your jdbc driver in persistence.xml as the one you use is deprecated\r\n\r\n    &lt;property name=&quot;javax.persistence.jdbc.driver&quot; value=&quot;com.mysql.jdbc.Driver&quot;/&gt;\r\n\r\nYou are also missing a mandatory part of persistence.xml code\r\n\r\n    &lt;persistence-unit name=&quot;JEETut3&quot; transaction-type=&quot;RESOURCE_LOCAL&quot;&gt;\r\n\r\nI have also added the dialect of database in the persistence.xml\r\n\r\n    &lt;property name=&quot;hibernate.dialect&quot; value=&quot;org.hibernate.dialect.MySQL5Dialect&quot;/&gt;\r\n\r\nIn case you want the tables to be created automatically on each execution you can add\r\n\r\n    &lt;property name=&quot;javax.persistence.schema-generation.database.action&quot; value=&quot;drop-and-create&quot;/&gt;\r\n\r\nIn summary this is the persistence I used\r\n\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;persistence version=&quot;2.0&quot;\r\n             xmlns=&quot;http://java.sun.com/xml/ns/persistence&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n             xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd&quot;&gt;\r\n\r\n    &lt;persistence-unit name=&quot;JEETut3&quot; transaction-type=&quot;RESOURCE_LOCAL&quot;&gt;\r\n        &lt;class&gt;com.newthinktank.JEETut3.Customer&lt;/class&gt;\r\n        &lt;properties&gt;\r\n            &lt;property name=&quot;javax.persistence.jdbc.driver&quot; value=&quot;com.mysql.jdbc.Driver&quot;/&gt;\r\n            &lt;property name=&quot;javax.persistence.jdbc.url&quot; value=&quot;jdbc:mysql://localhost/test4&quot;/&gt;\r\n            &lt;property name=&quot;javax.persistence.jdbc.user&quot; value=&quot;root&quot;/&gt;\r\n            &lt;property name=&quot;javax.persistence.jdbc.password&quot; value=&quot;myPassword!&quot;/&gt;\r\n            &lt;property name=&quot;hibernate.dialect&quot; value=&quot;org.hibernate.dialect.MySQL5Dialect&quot;/&gt;\r\n            &lt;property name=&quot;javax.persistence.schema-generation.database.action&quot; value=&quot;drop-and-create&quot;/&gt;\r\n        &lt;/properties&gt;\r\n    &lt;/persistence-unit&gt;\r\n&lt;/persistence&gt;\r\n\r\n\r\nThis is the result you will get in the database\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/8lnfL.png\r\n\r\nI hope this helps you solving your issue","title":"Hibernate error: java.lang.ClassNotFoundException: Could not load requested class","body":"<p>I have tested your code and the problem is in the mysql maven dependency you need to remove scope provided because you are saying it will be provided while running but that is not the case.</p>\n<p>These are the changes I did to make it run.</p>\n<ul>\n<li><p>Remove provided scope to mysql maven dependency</p>\n<pre><code>  &lt;dependency&gt;\n      &lt;groupId&gt;mysql&lt;/groupId&gt;\n      &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n      &lt;version&gt;8.0.15&lt;/version&gt;\n  &lt;/dependency&gt;\n</code></pre>\n</li>\n</ul>\n<p>Change your jdbc driver in persistence.xml as the one you use is deprecated</p>\n<pre><code>&lt;property name=&quot;javax.persistence.jdbc.driver&quot; value=&quot;com.mysql.jdbc.Driver&quot;/&gt;\n</code></pre>\n<p>You are also missing a mandatory part of persistence.xml code</p>\n<pre><code>&lt;persistence-unit name=&quot;JEETut3&quot; transaction-type=&quot;RESOURCE_LOCAL&quot;&gt;\n</code></pre>\n<p>I have also added the dialect of database in the persistence.xml</p>\n<pre><code>&lt;property name=&quot;hibernate.dialect&quot; value=&quot;org.hibernate.dialect.MySQL5Dialect&quot;/&gt;\n</code></pre>\n<p>In case you want the tables to be created automatically on each execution you can add</p>\n<pre><code>&lt;property name=&quot;javax.persistence.schema-generation.database.action&quot; value=&quot;drop-and-create&quot;/&gt;\n</code></pre>\n<p>In summary this is the persistence I used</p>\n\n<p></p>\n<pre><code>&lt;persistence-unit name=&quot;JEETut3&quot; transaction-type=&quot;RESOURCE_LOCAL&quot;&gt;\n    &lt;class&gt;com.newthinktank.JEETut3.Customer&lt;/class&gt;\n    &lt;properties&gt;\n        &lt;property name=&quot;javax.persistence.jdbc.driver&quot; value=&quot;com.mysql.jdbc.Driver&quot;/&gt;\n        &lt;property name=&quot;javax.persistence.jdbc.url&quot; value=&quot;jdbc:mysql://localhost/test4&quot;/&gt;\n        &lt;property name=&quot;javax.persistence.jdbc.user&quot; value=&quot;root&quot;/&gt;\n        &lt;property name=&quot;javax.persistence.jdbc.password&quot; value=&quot;myPassword!&quot;/&gt;\n        &lt;property name=&quot;hibernate.dialect&quot; value=&quot;org.hibernate.dialect.MySQL5Dialect&quot;/&gt;\n        &lt;property name=&quot;javax.persistence.schema-generation.database.action&quot; value=&quot;drop-and-create&quot;/&gt;\n    &lt;/properties&gt;\n&lt;/persistence-unit&gt;\n</code></pre>\n\n<p>This is the result you will get in the database</p>\n<p><a href=\"https://i.stack.imgur.com/8lnfL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8lnfL.png\" alt=\"enter image description here\" /></a></p>\n<p>I hope this helps you solving your issue</p>\n"}],"owner":{"account_id":18479935,"reputation":82,"user_id":13462381,"display_name":"David9809"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":28782,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":63077971,"answer_count":1,"score":3,"last_activity_date":1689861472,"creation_date":1595592924,"question_id":63073364,"body_markdown":"I am new in Hibernate and facing some problem during execution first programme: \r\n**java.lang.ClassNotFoundException: Could not load requested class : com.mysql.jdbc.Driver**. I was following tutorial about Hibernate, did everything same(even copied everything and tried to run).I&#39;ve been searching for answers all over the internet, but none of them helped me.\r\n*persistence.xml*:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    \r\n    \r\n    &lt;persistence version=&quot;2.0&quot;\r\n                 xmlns=&quot;http://java.sun.com/xml/ns/persistence&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n                 xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd&quot;&gt;\r\n    \r\n      \r\n          \r\n            &lt;class&gt;com.newthinktank.JEETut3.Customer&lt;/class&gt;\r\n            &lt;properties&gt;\r\n                &lt;property name=&quot;javax.persistence.jdbc.driver&quot; value=&quot;com.mysql.jdbc.Driver&quot; /&gt;\r\n                &lt;property name=&quot;javax.persistence.jdbc.url&quot; value=&quot;jdbc:mysql://localhost/test4&quot; /&gt;\r\n                &lt;property name=&quot;javax.persistence.jdbc.user&quot; value=&quot;root&quot; /&gt;\r\n                &lt;property name=&quot;javax.persistence.jdbc.password&quot; value=&quot;myPassword!&quot; /&gt;\r\n            &lt;/properties&gt;\r\n        &lt;/persistence-unit&gt;\r\n    &lt;/persistence&gt;\r\n\r\n*pom.xml:*\r\n\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n \r\n\r\n    &lt;groupId&gt;com.newthinktank&lt;/groupId&gt;\r\n    &lt;artifactId&gt;JEETut3&lt;/artifactId&gt;\r\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n    &lt;packaging&gt;jar&lt;/packaging&gt;\r\n\r\n    &lt;name&gt;JEETut3&lt;/name&gt;\r\n    &lt;url&gt;http://maven.apache.org&lt;/url&gt;\r\n\r\n    &lt;properties&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n    &lt;/properties&gt;\r\n\r\n    &lt;dependencies&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n            &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\r\n            &lt;version&gt;5.4.1.Final&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n            &lt;artifactId&gt;hibernate-entitymanager&lt;/artifactId&gt;\r\n            &lt;version&gt;5.4.1.Final&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;mysql&lt;/groupId&gt;\r\n            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n            &lt;version&gt;8.0.15&lt;/version&gt;\r\n            &lt;scope&gt;provided&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;junit&lt;/groupId&gt;\r\n            &lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n            &lt;version&gt;3.8.1&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n&lt;/project&gt;\r\n\r\n*Customer:*\r\n\r\n    package com.newthinktank.JEETut3;\r\n    \r\n    import java.io.Serializable;\r\n    \r\n    import javax.persistence.Column;\r\n    import javax.persistence.Entity;\r\n    import javax.persistence.Id;\r\n    import javax.persistence.Table;\r\n    \r\n    @Entity\r\n    @Table(name = &quot;customer&quot;)\r\n    public class Customer implements Serializable {\r\n        private static final long serialVersionUID = 1L;\r\n        \r\n        @Id\r\n        private int id;\r\n    \r\n        @Column(name = &quot;firstName&quot;, nullable = false)\r\n        private String fName;\r\n    \r\n        @Column(name = &quot;lastName&quot;, nullable = false)\r\n        private String lName;\r\n    \r\n        public int getID() {\r\n            return id;\r\n        }\r\n    \r\n        public void setID(int id) {\r\n            this.id = id;\r\n        }\r\n    \r\n        public String getFName() {\r\n            return fName;\r\n        }\r\n    \r\n        public void setFName(String fName) {\r\n            this.fName = fName;\r\n        }\r\n    \r\n        public String getLName() {\r\n            return lName;\r\n        }\r\n    \r\n        public void setLName(String lName) {\r\n            this.lName = lName;\r\n        }\r\n    \r\n    }\r\n*TestSystem:*\r\n\r\n    package com.newthinktank.JEETut3;\r\n    \r\n    import java.util.List;\r\n    \r\n    import javax.persistence.EntityManager;\r\n    import javax.persistence.EntityManagerFactory;\r\n    import javax.persistence.EntityTransaction;\r\n    import javax.persistence.NoResultException;\r\n    import javax.persistence.Persistence;\r\n    import javax.persistence.TypedQuery;\r\n    \r\n    public class TestSystem {\r\n        private static final EntityManagerFactory ENTITY_MANAGER_FACTORY = Persistence\r\n                .createEntityManagerFactory(&quot;JEETut3&quot;);\r\n    \r\n        public static void main(String[] args) {\r\n            addCustomer(1, &quot;Sue&quot;, &quot;Smith&quot;);\r\n            addCustomer(2, &quot;Sam&quot;, &quot;Smith&quot;);\r\n            addCustomer(3, &quot;Sid&quot;, &quot;Smith&quot;);\r\n            addCustomer(4, &quot;Sally&quot;, &quot;Smith&quot;);\r\n            getCustomer(1);\r\n            getCustomers();\r\n            changeFName(4, &quot;Mark&quot;);\r\n            deleteCustomer(3);\r\n            ENTITY_MANAGER_FACTORY.close();\r\n        }\r\n    \r\n        public static void addCustomer(int id, String fname, String lname) {\r\n            EntityManager em = ENTITY_MANAGER_FACTORY.createEntityManager();\r\n            EntityTransaction et = null;\r\n    \r\n            try {\r\n                et = em.getTransaction();\r\n                et.begin();\r\n    \r\n                Customer cust = new Customer();\r\n                cust.setID(id);\r\n                cust.setFName(fname);\r\n                cust.setLName(lname);\r\n    \r\n                em.persist(cust);\r\n                et.commit();\r\n            } catch (Exception ex) {\r\n                if (et != null) {\r\n                    et.rollback();\r\n                }\r\n                ex.printStackTrace();\r\n            } finally {\r\n                em.close();\r\n            }\r\n        }\r\n    \r\n        public static void getCustomer(int id) {\r\n            EntityManager em = ENTITY_MANAGER_FACTORY.createEntityManager();\r\n    \r\n            String query = &quot;SELECT c FROM Customer c WHERE c.id = :custID&quot;;\r\n    \r\n            TypedQuery&lt;Customer&gt; tq = em.createQuery(query, Customer.class);\r\n            tq.setParameter(&quot;custID&quot;, id);\r\n    \r\n            Customer cust = null;\r\n            try {\r\n                cust = tq.getSingleResult();\r\n                System.out.println(cust.getFName() + &quot; &quot; + cust.getLName());\r\n            } catch (NoResultException ex) {\r\n                ex.printStackTrace();\r\n            } finally {\r\n                em.close();\r\n            }\r\n        }\r\n    \r\n        public static void getCustomers() {\r\n            EntityManager em = ENTITY_MANAGER_FACTORY.createEntityManager();\r\n    \r\n            String strQuery = &quot;SELECT c FROM Customer c WHERE c.id IS NOT NULL&quot;;\r\n    \r\n            TypedQuery&lt;Customer&gt; tq = em.createQuery(strQuery, Customer.class);\r\n            List&lt;Customer&gt; custs;\r\n            try {\r\n                custs = tq.getResultList();\r\n                custs.forEach(cust -&gt; System.out.println(cust.getFName() + &quot; &quot; + cust.getLName()));\r\n            } catch (NoResultException ex) {\r\n                ex.printStackTrace();\r\n            } finally {\r\n                em.close();\r\n            }\r\n        }\r\n    \r\n        public static void changeFName(int id, String fname) {\r\n            EntityManager em = ENTITY_MANAGER_FACTORY.createEntityManager();\r\n            EntityTransaction et = null;\r\n    \r\n            Customer cust = null;\r\n    \r\n            try {\r\n                et = em.getTransaction();\r\n                et.begin();\r\n    \r\n                cust = em.find(Customer.class, id);\r\n                cust.setFName(fname);\r\n    \r\n                em.persist(cust);\r\n                et.commit();\r\n            } catch (Exception ex) {\r\n                if (et != null) {\r\n                    et.rollback();\r\n                }\r\n                ex.printStackTrace();\r\n            } finally {\r\n                em.close();\r\n            }\r\n        }\r\n    \r\n        public static void deleteCustomer(int id) {\r\n            EntityManager em = ENTITY_MANAGER_FACTORY.createEntityManager();\r\n            EntityTransaction et = null;\r\n            Customer cust = null;\r\n    \r\n            try {\r\n                et = em.getTransaction();\r\n                et.begin();\r\n                cust = em.find(Customer.class, id);\r\n                em.remove(cust);\r\n                et.commit();\r\n            } catch (Exception ex) {\r\n                if (et != null) {\r\n                    et.rollback();\r\n                }\r\n                ex.printStackTrace();\r\n            } finally {\r\n                em.close();\r\n            }\r\n        }\r\n    }\r\n*Error:*\r\n\r\n    lip 24, 2020 1:42:49 PM org.hibernate.jpa.internal.util.LogHelper logPersistenceUnitInformation\r\n    INFO: HHH000204: Processing PersistenceUnitInfo [name: JEETut3]\r\n    lip 24, 2020 1:42:49 PM org.hibernate.Version logVersion\r\n    INFO: HHH000412: Hibernate Core {5.4.3.Final}\r\n    lip 24, 2020 1:42:49 PM org.hibernate.annotations.common.reflection.java.JavaReflectionManager &lt;clinit&gt;\r\n    INFO: HCANN000001: Hibernate Commons Annotations {5.1.0.Final}\r\n    lip 24, 2020 1:42:49 PM org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl configure\r\n    WARN: HHH10001002: Using Hibernate built-in connection pool (not for production use!)\r\n    Exception in thread &quot;main&quot; java.lang.ExceptionInInitializerError\r\n    Caused by: org.hibernate.service.spi.ServiceException: Unable to create requested service [org.hibernate.engine.jdbc.env.spi.JdbcEnvironment]\r\n    \tat org.hibernate.service.internal.AbstractServiceRegistryImpl.createService(AbstractServiceRegistryImpl.java:275)\r\n    \tat org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:237)\r\n    \tat org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:214)\r\n    \tat org.hibernate.id.factory.internal.DefaultIdentifierGeneratorFactory.injectServices(DefaultIdentifierGeneratorFactory.java:152)\r\n    \tat org.hibernate.service.internal.AbstractServiceRegistryImpl.injectDependencies(AbstractServiceRegistryImpl.java:286)\r\n    \tat org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:243)\r\n    \tat org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:214)\r\n    \tat org.hibernate.boot.internal.InFlightMetadataCollectorImpl.&lt;init&gt;(InFlightMetadataCollectorImpl.java:175)\r\n    \tat org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:118)\r\n    \tat org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.metadata(EntityManagerFactoryBuilderImpl.java:900)\r\n    \tat org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:931)\r\n    \tat org.hibernate.jpa.HibernatePersistenceProvider.createEntityManagerFactory(HibernatePersistenceProvider.java:56)\r\n    \tat javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:79)\r\n    \tat javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:54)\r\n    \tat com.newthinktank.JEETut3.TestSystem.&lt;clinit&gt;(TestSystem.java:15)\r\n    Caused by: org.hibernate.boot.registry.classloading.spi.ClassLoadingException: Unable to load class [com.mysql.jdbc.Driver]\r\n    \tat org.hibernate.boot.registry.classloading.internal.ClassLoaderServiceImpl.classForName(ClassLoaderServiceImpl.java:136)\r\n    \tat org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl.loadDriverIfPossible(DriverManagerConnectionProviderImpl.java:149)\r\n    \tat org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl.buildCreator(DriverManagerConnectionProviderImpl.java:105)\r\n    \tat org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl.buildPool(DriverManagerConnectionProviderImpl.java:89)\r\n    \tat org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl.configure(DriverManagerConnectionProviderImpl.java:73)\r\n    \tat org.hibernate.boot.registry.internal.StandardServiceRegistryImpl.configureService(StandardServiceRegistryImpl.java:107)\r\n    \tat org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:246)\r\n    \tat org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:214)\r\n    \tat org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.buildJdbcConnectionAccess(JdbcEnvironmentInitiator.java:145)\r\n    \tat org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:66)\r\n    \tat org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:35)\r\n    \tat org.hibernate.boot.registry.internal.StandardServiceRegistryImpl.initiateService(StandardServiceRegistryImpl.java:101)\r\n    \tat org.hibernate.service.internal.AbstractServiceRegistryImpl.createService(AbstractServiceRegistryImpl.java:263)\r\n    \t... 14 more\r\n    Caused by: java.lang.ClassNotFoundException: Could not load requested class : com.mysql.jdbc.Driver\r\n    \tat org.hibernate.boot.registry.classloading.internal.AggregatedClassLoader.findClass(AggregatedClassLoader.java:210)\r\n    \tat java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:588)\r\n    \tat java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:521)\r\n    \tat java.base/java.lang.Class.forName0(Native Method)\r\n    \tat java.base/java.lang.Class.forName(Class.java:416)\r\n    \tat org.hibernate.boot.registry.classloading.internal.ClassLoaderServiceImpl.classForName(ClassLoaderServiceImpl.java:133)\r\n    \t... 26 more\r\nDoes anyone know how to resolve problem?","title":"Hibernate error: java.lang.ClassNotFoundException: Could not load requested class","body":"<p>I am new in Hibernate and facing some problem during execution first programme:\n<strong>java.lang.ClassNotFoundException: Could not load requested class : com.mysql.jdbc.Driver</strong>. I was following tutorial about Hibernate, did everything same(even copied everything and tried to run).I've been searching for answers all over the internet, but none of them helped me.\n<em>persistence.xml</em>:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n\n\n&lt;persistence version=&quot;2.0&quot;\n             xmlns=&quot;http://java.sun.com/xml/ns/persistence&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n             xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd&quot;&gt;\n\n  \n      \n        &lt;class&gt;com.newthinktank.JEETut3.Customer&lt;/class&gt;\n        &lt;properties&gt;\n            &lt;property name=&quot;javax.persistence.jdbc.driver&quot; value=&quot;com.mysql.jdbc.Driver&quot; /&gt;\n            &lt;property name=&quot;javax.persistence.jdbc.url&quot; value=&quot;jdbc:mysql://localhost/test4&quot; /&gt;\n            &lt;property name=&quot;javax.persistence.jdbc.user&quot; value=&quot;root&quot; /&gt;\n            &lt;property name=&quot;javax.persistence.jdbc.password&quot; value=&quot;myPassword!&quot; /&gt;\n        &lt;/properties&gt;\n    &lt;/persistence-unit&gt;\n&lt;/persistence&gt;\n</code></pre>\n<p><em>pom.xml:</em></p>\n<pre><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n     xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n\n\n&lt;groupId&gt;com.newthinktank&lt;/groupId&gt;\n&lt;artifactId&gt;JEETut3&lt;/artifactId&gt;\n&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n&lt;packaging&gt;jar&lt;/packaging&gt;\n\n&lt;name&gt;JEETut3&lt;/name&gt;\n&lt;url&gt;http://maven.apache.org&lt;/url&gt;\n\n&lt;properties&gt;\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n&lt;/properties&gt;\n\n&lt;dependencies&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n        &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\n        &lt;version&gt;5.4.1.Final&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n        &lt;artifactId&gt;hibernate-entitymanager&lt;/artifactId&gt;\n        &lt;version&gt;5.4.1.Final&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;mysql&lt;/groupId&gt;\n        &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n        &lt;version&gt;8.0.15&lt;/version&gt;\n        &lt;scope&gt;provided&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;junit&lt;/groupId&gt;\n        &lt;artifactId&gt;junit&lt;/artifactId&gt;\n        &lt;version&gt;3.8.1&lt;/version&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre>\n\n<p><em>Customer:</em></p>\n<pre><code>package com.newthinktank.JEETut3;\n\nimport java.io.Serializable;\n\nimport javax.persistence.Column;\nimport javax.persistence.Entity;\nimport javax.persistence.Id;\nimport javax.persistence.Table;\n\n@Entity\n@Table(name = &quot;customer&quot;)\npublic class Customer implements Serializable {\n    private static final long serialVersionUID = 1L;\n    \n    @Id\n    private int id;\n\n    @Column(name = &quot;firstName&quot;, nullable = false)\n    private String fName;\n\n    @Column(name = &quot;lastName&quot;, nullable = false)\n    private String lName;\n\n    public int getID() {\n        return id;\n    }\n\n    public void setID(int id) {\n        this.id = id;\n    }\n\n    public String getFName() {\n        return fName;\n    }\n\n    public void setFName(String fName) {\n        this.fName = fName;\n    }\n\n    public String getLName() {\n        return lName;\n    }\n\n    public void setLName(String lName) {\n        this.lName = lName;\n    }\n\n}\n</code></pre>\n<p><em>TestSystem:</em></p>\n<pre><code>package com.newthinktank.JEETut3;\n\nimport java.util.List;\n\nimport javax.persistence.EntityManager;\nimport javax.persistence.EntityManagerFactory;\nimport javax.persistence.EntityTransaction;\nimport javax.persistence.NoResultException;\nimport javax.persistence.Persistence;\nimport javax.persistence.TypedQuery;\n\npublic class TestSystem {\n    private static final EntityManagerFactory ENTITY_MANAGER_FACTORY = Persistence\n            .createEntityManagerFactory(&quot;JEETut3&quot;);\n\n    public static void main(String[] args) {\n        addCustomer(1, &quot;Sue&quot;, &quot;Smith&quot;);\n        addCustomer(2, &quot;Sam&quot;, &quot;Smith&quot;);\n        addCustomer(3, &quot;Sid&quot;, &quot;Smith&quot;);\n        addCustomer(4, &quot;Sally&quot;, &quot;Smith&quot;);\n        getCustomer(1);\n        getCustomers();\n        changeFName(4, &quot;Mark&quot;);\n        deleteCustomer(3);\n        ENTITY_MANAGER_FACTORY.close();\n    }\n\n    public static void addCustomer(int id, String fname, String lname) {\n        EntityManager em = ENTITY_MANAGER_FACTORY.createEntityManager();\n        EntityTransaction et = null;\n\n        try {\n            et = em.getTransaction();\n            et.begin();\n\n            Customer cust = new Customer();\n            cust.setID(id);\n            cust.setFName(fname);\n            cust.setLName(lname);\n\n            em.persist(cust);\n            et.commit();\n        } catch (Exception ex) {\n            if (et != null) {\n                et.rollback();\n            }\n            ex.printStackTrace();\n        } finally {\n            em.close();\n        }\n    }\n\n    public static void getCustomer(int id) {\n        EntityManager em = ENTITY_MANAGER_FACTORY.createEntityManager();\n\n        String query = &quot;SELECT c FROM Customer c WHERE c.id = :custID&quot;;\n\n        TypedQuery&lt;Customer&gt; tq = em.createQuery(query, Customer.class);\n        tq.setParameter(&quot;custID&quot;, id);\n\n        Customer cust = null;\n        try {\n            cust = tq.getSingleResult();\n            System.out.println(cust.getFName() + &quot; &quot; + cust.getLName());\n        } catch (NoResultException ex) {\n            ex.printStackTrace();\n        } finally {\n            em.close();\n        }\n    }\n\n    public static void getCustomers() {\n        EntityManager em = ENTITY_MANAGER_FACTORY.createEntityManager();\n\n        String strQuery = &quot;SELECT c FROM Customer c WHERE c.id IS NOT NULL&quot;;\n\n        TypedQuery&lt;Customer&gt; tq = em.createQuery(strQuery, Customer.class);\n        List&lt;Customer&gt; custs;\n        try {\n            custs = tq.getResultList();\n            custs.forEach(cust -&gt; System.out.println(cust.getFName() + &quot; &quot; + cust.getLName()));\n        } catch (NoResultException ex) {\n            ex.printStackTrace();\n        } finally {\n            em.close();\n        }\n    }\n\n    public static void changeFName(int id, String fname) {\n        EntityManager em = ENTITY_MANAGER_FACTORY.createEntityManager();\n        EntityTransaction et = null;\n\n        Customer cust = null;\n\n        try {\n            et = em.getTransaction();\n            et.begin();\n\n            cust = em.find(Customer.class, id);\n            cust.setFName(fname);\n\n            em.persist(cust);\n            et.commit();\n        } catch (Exception ex) {\n            if (et != null) {\n                et.rollback();\n            }\n            ex.printStackTrace();\n        } finally {\n            em.close();\n        }\n    }\n\n    public static void deleteCustomer(int id) {\n        EntityManager em = ENTITY_MANAGER_FACTORY.createEntityManager();\n        EntityTransaction et = null;\n        Customer cust = null;\n\n        try {\n            et = em.getTransaction();\n            et.begin();\n            cust = em.find(Customer.class, id);\n            em.remove(cust);\n            et.commit();\n        } catch (Exception ex) {\n            if (et != null) {\n                et.rollback();\n            }\n            ex.printStackTrace();\n        } finally {\n            em.close();\n        }\n    }\n}\n</code></pre>\n<p><em>Error:</em></p>\n<pre><code>lip 24, 2020 1:42:49 PM org.hibernate.jpa.internal.util.LogHelper logPersistenceUnitInformation\nINFO: HHH000204: Processing PersistenceUnitInfo [name: JEETut3]\nlip 24, 2020 1:42:49 PM org.hibernate.Version logVersion\nINFO: HHH000412: Hibernate Core {5.4.3.Final}\nlip 24, 2020 1:42:49 PM org.hibernate.annotations.common.reflection.java.JavaReflectionManager &lt;clinit&gt;\nINFO: HCANN000001: Hibernate Commons Annotations {5.1.0.Final}\nlip 24, 2020 1:42:49 PM org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl configure\nWARN: HHH10001002: Using Hibernate built-in connection pool (not for production use!)\nException in thread &quot;main&quot; java.lang.ExceptionInInitializerError\nCaused by: org.hibernate.service.spi.ServiceException: Unable to create requested service [org.hibernate.engine.jdbc.env.spi.JdbcEnvironment]\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.createService(AbstractServiceRegistryImpl.java:275)\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:237)\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:214)\n    at org.hibernate.id.factory.internal.DefaultIdentifierGeneratorFactory.injectServices(DefaultIdentifierGeneratorFactory.java:152)\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.injectDependencies(AbstractServiceRegistryImpl.java:286)\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:243)\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:214)\n    at org.hibernate.boot.internal.InFlightMetadataCollectorImpl.&lt;init&gt;(InFlightMetadataCollectorImpl.java:175)\n    at org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:118)\n    at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.metadata(EntityManagerFactoryBuilderImpl.java:900)\n    at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:931)\n    at org.hibernate.jpa.HibernatePersistenceProvider.createEntityManagerFactory(HibernatePersistenceProvider.java:56)\n    at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:79)\n    at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:54)\n    at com.newthinktank.JEETut3.TestSystem.&lt;clinit&gt;(TestSystem.java:15)\nCaused by: org.hibernate.boot.registry.classloading.spi.ClassLoadingException: Unable to load class [com.mysql.jdbc.Driver]\n    at org.hibernate.boot.registry.classloading.internal.ClassLoaderServiceImpl.classForName(ClassLoaderServiceImpl.java:136)\n    at org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl.loadDriverIfPossible(DriverManagerConnectionProviderImpl.java:149)\n    at org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl.buildCreator(DriverManagerConnectionProviderImpl.java:105)\n    at org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl.buildPool(DriverManagerConnectionProviderImpl.java:89)\n    at org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl.configure(DriverManagerConnectionProviderImpl.java:73)\n    at org.hibernate.boot.registry.internal.StandardServiceRegistryImpl.configureService(StandardServiceRegistryImpl.java:107)\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:246)\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:214)\n    at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.buildJdbcConnectionAccess(JdbcEnvironmentInitiator.java:145)\n    at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:66)\n    at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:35)\n    at org.hibernate.boot.registry.internal.StandardServiceRegistryImpl.initiateService(StandardServiceRegistryImpl.java:101)\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.createService(AbstractServiceRegistryImpl.java:263)\n    ... 14 more\nCaused by: java.lang.ClassNotFoundException: Could not load requested class : com.mysql.jdbc.Driver\n    at org.hibernate.boot.registry.classloading.internal.AggregatedClassLoader.findClass(AggregatedClassLoader.java:210)\n    at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:588)\n    at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:521)\n    at java.base/java.lang.Class.forName0(Native Method)\n    at java.base/java.lang.Class.forName(Class.java:416)\n    at org.hibernate.boot.registry.classloading.internal.ClassLoaderServiceImpl.classForName(ClassLoaderServiceImpl.java:133)\n    ... 26 more\n</code></pre>\n<p>Does anyone know how to resolve problem?</p>\n"},{"tags":["java","string","list","bufferedreader"],"comments":[{"owner":{"account_id":13170666,"reputation":78669,"user_id":9513184,"display_name":"Unmitigated"},"score":2,"creation_date":1689777258,"post_id":76722420,"comment_id":135261948,"body_markdown":"You need to give a name to that String parameter.","body":"You need to give a name to that String parameter."},{"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1689781311,"post_id":76722420,"comment_id":135262964,"body_markdown":"And then move the method outside the `main` method, moving it into `ReadSymptomDataFromFile` if that&#39;s not where this code is declared, and then give it an actual implementation, and then call it as `getSymptoms()` rather than `GetSymptoms()`... basically, there&#39;s a lot wrong here.","body":"And then move the method outside the <code>main</code> method, moving it into <code>ReadSymptomDataFromFile</code> if that&#39;s not where this code is declared, and then give it an actual implementation, and then call it as <code>getSymptoms()</code> rather than <code>GetSymptoms()</code>... basically, there&#39;s a lot wrong here."},{"owner":{"account_id":9072254,"reputation":1014,"user_id":6754986,"display_name":"LinFelix"},"score":0,"creation_date":1689855119,"post_id":76722420,"comment_id":135274031,"body_markdown":"What is the error you don&#39;t understand and what behavior do you expect, that you are not observing currently?","body":"What is the error you don&#39;t understand and what behavior do you expect, that you are not observing currently?"},{"owner":{"account_id":20264534,"reputation":1,"user_id":22253025,"display_name":"S_LUCIA"},"score":0,"creation_date":1689855141,"post_id":76722420,"comment_id":135274035,"body_markdown":"@JonSkeet Thank you, I update in my description. My goal is to mute all actions performed by check Counter into several independent methods. So I&#39;m not sure I must move this method.","body":"@JonSkeet Thank you, I update in my description. My goal is to mute all actions performed by check Counter into several independent methods. So I&#39;m not sure I must move this method."},{"owner":{"account_id":20264534,"reputation":1,"user_id":22253025,"display_name":"S_LUCIA"},"score":0,"creation_date":1689855652,"post_id":76722420,"comment_id":135274181,"body_markdown":"@LinFelix I want my method (get)to be able to read the file correctly, the file outside the mtehod is done correctly but My goal is to mute all actions performed by check Counter into several independent methods( exemple read, count, write... for the futur. And my method does not display an array in my console.","body":"@LinFelix I want my method (get)to be able to read the file correctly, the file outside the mtehod is done correctly but My goal is to mute all actions performed by check Counter into several independent methods( exemple read, count, write... for the futur. And my method does not display an array in my console."},{"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1689926528,"post_id":76722420,"comment_id":135285075,"body_markdown":"&quot;So I&#39;m not sure I must move this method.&quot; Well you definitely need to stop trying to declare one method within another method, which is what you&#39;re currently trying to do... I&#39;d also strongly advise you to follow Java naming conventions.","body":"&quot;So I&#39;m not sure I must move this method.&quot; Well you definitely need to stop trying to declare one method within another method, which is what you&#39;re currently trying to do... I&#39;d also strongly advise you to follow Java naming conventions."}],"answers":[{"tags":[],"owner":{"account_id":6516908,"reputation":2191,"user_id":6622577,"display_name":"Manuel Mannhardt"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689777277,"creation_date":1689777277,"answer_id":76722454,"question_id":76722420,"body_markdown":"The problem is, that you only specified the type of the parameter and no name, thus creating a syntax error.\r\n\r\n","title":"java: illegal start of expression - method parameters","body":"<p>The problem is, that you only specified the type of the parameter and no name, thus creating a syntax error.</p>\n"}],"owner":{"account_id":20264534,"reputation":1,"user_id":22253025,"display_name":"S_LUCIA"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":59,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1689861376,"creation_date":1689777070,"question_id":76722420,"body_markdown":"I use method for create and retrieves the list of entries with existing file using the instance.\r\n\r\nMy goal is to mute all actions performed by check Counter into several independent methods exemple first action &quot;read&quot;.\r\nI have other file for exemple result ( action count, sort..)\r\n\r\nMy method have  &quot;illegal start of expression&quot; in position &quot;(parameter).\r\nI&#39;m stuck on using parameter with List&lt;String&gt; !\r\n\r\n```java\r\npublic class CheckCounter {\r\n\r\n\tpublic static void main(String[] args) throws Exception {\r\n\r\n\t\tReadSymptomDataFromFile readerFile = new ReadSymptomDataFromFile(&quot;Pro/heath.text&quot;);\r\n\r\n\t\tpublic List&lt;String&gt;  getSymptoms() {\r\n\r\n\t\r\n\t\tList&lt;String&gt; symptom = readerFile.GetSymptoms();\r\n\t\tSystem.out.println(symptom);\r\n\t}\r\n}\r\n\r\n```\r\n\r\n    // file interface\r\n       public interface ISymptomReader {\r\n    \r\n    \tList&lt;String&gt; GetSymptoms ();\t\r\n    }\r\n\r\n\r\n","title":"java: illegal start of expression - method parameters","body":"<p>I use method for create and retrieves the list of entries with existing file using the instance.</p>\n<p>My goal is to mute all actions performed by check Counter into several independent methods exemple first action &quot;read&quot;.\nI have other file for exemple result ( action count, sort..)</p>\n<p>My method have  &quot;illegal start of expression&quot; in position &quot;(parameter).\nI'm stuck on using parameter with List !</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class CheckCounter {\n\n    public static void main(String[] args) throws Exception {\n\n        ReadSymptomDataFromFile readerFile = new ReadSymptomDataFromFile(&quot;Pro/heath.text&quot;);\n\n        public List&lt;String&gt;  getSymptoms() {\n\n    \n        List&lt;String&gt; symptom = readerFile.GetSymptoms();\n        System.out.println(symptom);\n    }\n}\n\n</code></pre>\n<pre><code>// file interface\n   public interface ISymptomReader {\n\n    List&lt;String&gt; GetSymptoms ();    \n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","jpa"],"comments":[{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1689861429,"post_id":76730621,"comment_id":135275615,"body_markdown":"Having a private `long` id and a public `uuid` identifier is perfectly fine. Perhaps declaring the field as `UUID` instead of `String` will help? Or you need a different way to generate it. If all else fails, just set one yourself using `UUID.randomUUID()`.","body":"Having a private <code>long</code> id and a public <code>uuid</code> identifier is perfectly fine. Perhaps declaring the field as <code>UUID</code> instead of <code>String</code> will help? Or you need a different way to generate it. If all else fails, just set one yourself using <code>UUID.randomUUID()</code>."},{"owner":{"account_id":3638268,"reputation":11,"user_id":3033127,"display_name":"Mirran"},"score":1,"creation_date":1689862106,"post_id":76730621,"comment_id":135275791,"body_markdown":"Thanks @Jorn I&#39;d gotten so caught up in Jakarta not working with it to generate my UUID, it had gotten completely away from me and I hadn&#39;t even thought of other ways to generate it. GeneratedValue still failed, but initializing it with UUID.randomUUID() does what I needed!","body":"Thanks @Jorn I&#39;d gotten so caught up in Jakarta not working with it to generate my UUID, it had gotten completely away from me and I hadn&#39;t even thought of other ways to generate it. GeneratedValue still failed, but initializing it with UUID.randomUUID() does what I needed!"}],"owner":{"account_id":3638268,"reputation":11,"user_id":3033127,"display_name":"Mirran"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689861261,"creation_date":1689861261,"question_id":76730621,"body_markdown":"I am creating an API with Spring boot.\r\n\r\nI want to have an ID that is private (*id*) to the DB as the primary key and a secondary id (*identifier*) that is used to access rows for modification or deletion and is displayed to the user.\r\n\r\nHowever, this only creates a null identifier.\r\n\r\n**Is there another way to do this or is this whole thing a bad idea and I should just generate the UUID as my primary key and live with exposing that?\r\n**\r\nBelow is an example below of my model, I&#39;m using jakarta persistance.\r\n\r\nIt successfully generates the id (as a sequential number), and the user name is managed as expected. It does create all 3 columns. But *identifier* is null.\r\n\r\nI did notice in the jakarta docs that @GeneratedValue is only tested for primary keys, so maybe there&#39;s another annotation that would do the same for just a regular column?\r\n\r\n```\r\n@Entity\r\npublic class User {\r\n  @Id\r\n  @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n  private Long id;\r\n\r\n  @GeneratedValue(strategy = GenerationType.UUID)\r\n  private String identifier;\r\n\r\n  private String name;\r\n\r\n  public User(String name) {\r\n    this.name = name;\r\n  }\r\n\r\n  public Long getId() {return id;}\r\n\r\n  public String getIdentifier() {return identifier;}\r\n\r\n  public String getName() {return name;}\r\n\r\n  protected User() {}\r\n}\r\n```\r\n\r\nAnd repository:\r\n```\r\n@Repository\r\npublic interface UserRepository extends CrudRepository&lt;User, Long&gt; {\r\n}\r\n```\r\n","title":"Can I generate a secondary ID that is used for identifying a row in API calls?","body":"<p>I am creating an API with Spring boot.</p>\n<p>I want to have an ID that is private (<em>id</em>) to the DB as the primary key and a secondary id (<em>identifier</em>) that is used to access rows for modification or deletion and is displayed to the user.</p>\n<p>However, this only creates a null identifier.</p>\n<p>**Is there another way to do this or is this whole thing a bad idea and I should just generate the UUID as my primary key and live with exposing that?\n**\nBelow is an example below of my model, I'm using jakarta persistance.</p>\n<p>It successfully generates the id (as a sequential number), and the user name is managed as expected. It does create all 3 columns. But <em>identifier</em> is null.</p>\n<p>I did notice in the jakarta docs that @GeneratedValue is only tested for primary keys, so maybe there's another annotation that would do the same for just a regular column?</p>\n<pre><code>@Entity\npublic class User {\n  @Id\n  @GeneratedValue(strategy = GenerationType.IDENTITY)\n  private Long id;\n\n  @GeneratedValue(strategy = GenerationType.UUID)\n  private String identifier;\n\n  private String name;\n\n  public User(String name) {\n    this.name = name;\n  }\n\n  public Long getId() {return id;}\n\n  public String getIdentifier() {return identifier;}\n\n  public String getName() {return name;}\n\n  protected User() {}\n}\n</code></pre>\n<p>And repository:</p>\n<pre><code>@Repository\npublic interface UserRepository extends CrudRepository&lt;User, Long&gt; {\n}\n</code></pre>\n"},{"tags":["java","azure","azure-sql-database","azure-sql-managed-instance","azure-managed-database"],"owner":{"account_id":15657825,"reputation":11,"user_id":11297529,"display_name":"SUBHASH V K"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":184,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1689861198,"creation_date":1589966005,"question_id":61909328,"body_markdown":"I am connecting to the Azure SQL managed instance using PUBLIC ENDPOINT by JDBC connection. It is connecting properly. I can able to read the data using JDBC. \r\n\r\nBut If I tried to connect the public endpoint of azure sql using SSH tunneling, I am getting the below for the same database, username and password.\r\n\r\n```\r\ncom.microsoft.sqlserver.jdbc.SQLServerException: Login failed for user &#39;xxx@xxxx&#39;. ClientConnectionId:afa7f609-ffa0-4f46-af76-6e908d02d05c\r\n\tat com.microsoft.sqlserver.jdbc.SQLServerException.makeFromDatabaseError(SQLServerException.java:258)\r\n\tat com.microsoft.sqlserver.jdbc.TDSTokenHandler.onEOF(tdsparser.java:256)\r\n\tat com.microsoft.sqlserver.jdbc.TDSParser.parse(tdsparser.java:108)\r\n\tat com.microsoft.sqlserver.jdbc.SQLServerConnection.sendLogon(SQLServerConnection.java:4290)\r\n\tat com.microsoft.sqlserver.jdbc.SQLServerConnection.logon(SQLServerConnection.java:3157)\r\n\tat com.microsoft.sqlserver.jdbc.SQLServerConnection.access$100(SQLServerConnection.java:82)\r\n\tat com.microsoft.sqlserver.jdbc.SQLServerConnection$LogonCommand.doExecute(SQLServerConnection.java:3121)\r\n\tat com.microsoft.sqlserver.jdbc.TDSCommand.execute(IOBuffer.java:7151)\r\n\tat com.microsoft.sqlserver.jdbc.SQLServerConnection.executeCommand(SQLServerConnection.java:2478)\r\n\tat com.microsoft.sqlserver.jdbc.SQLServerConnection.connectHelper(SQLServerConnection.java:2026)\r\n\tat com.microsoft.sqlserver.jdbc.SQLServerConnection.login(SQLServerConnection.java:1687)\r\n\tat com.microsoft.sqlserver.jdbc.SQLServerConnection.connectInternal(SQLServerConnection.java:1528)\r\n\tat com.microsoft.sqlserver.jdbc.SQLServerConnection.connect(SQLServerConnection.java:866)\r\n\tat com.microsoft.sqlserver.jdbc.SQLServerDriver.connect(SQLServerDriver.java:569)\r\n\tat java.sql.DriverManager.getConnection(DriverManager.java:664)\r\n\tat java.sql.DriverManager.getConnection(DriverManager.java:247)\r\n\tat Main.main(Main.java:10)\r\n```\r\n\r\nEven in network security group, I enabled all the port. Can anyone help me regarding this?\r\n","title":"Azure managed instance connecting using ssh tunnelling","body":"<p>I am connecting to the Azure SQL managed instance using PUBLIC ENDPOINT by JDBC connection. It is connecting properly. I can able to read the data using JDBC. </p>\n\n<p>But If I tried to connect the public endpoint of azure sql using SSH tunneling, I am getting the below for the same database, username and password.</p>\n\n<pre><code>com.microsoft.sqlserver.jdbc.SQLServerException: Login failed for user 'xxx@xxxx'. ClientConnectionId:afa7f609-ffa0-4f46-af76-6e908d02d05c\n    at com.microsoft.sqlserver.jdbc.SQLServerException.makeFromDatabaseError(SQLServerException.java:258)\n    at com.microsoft.sqlserver.jdbc.TDSTokenHandler.onEOF(tdsparser.java:256)\n    at com.microsoft.sqlserver.jdbc.TDSParser.parse(tdsparser.java:108)\n    at com.microsoft.sqlserver.jdbc.SQLServerConnection.sendLogon(SQLServerConnection.java:4290)\n    at com.microsoft.sqlserver.jdbc.SQLServerConnection.logon(SQLServerConnection.java:3157)\n    at com.microsoft.sqlserver.jdbc.SQLServerConnection.access$100(SQLServerConnection.java:82)\n    at com.microsoft.sqlserver.jdbc.SQLServerConnection$LogonCommand.doExecute(SQLServerConnection.java:3121)\n    at com.microsoft.sqlserver.jdbc.TDSCommand.execute(IOBuffer.java:7151)\n    at com.microsoft.sqlserver.jdbc.SQLServerConnection.executeCommand(SQLServerConnection.java:2478)\n    at com.microsoft.sqlserver.jdbc.SQLServerConnection.connectHelper(SQLServerConnection.java:2026)\n    at com.microsoft.sqlserver.jdbc.SQLServerConnection.login(SQLServerConnection.java:1687)\n    at com.microsoft.sqlserver.jdbc.SQLServerConnection.connectInternal(SQLServerConnection.java:1528)\n    at com.microsoft.sqlserver.jdbc.SQLServerConnection.connect(SQLServerConnection.java:866)\n    at com.microsoft.sqlserver.jdbc.SQLServerDriver.connect(SQLServerDriver.java:569)\n    at java.sql.DriverManager.getConnection(DriverManager.java:664)\n    at java.sql.DriverManager.getConnection(DriverManager.java:247)\n    at Main.main(Main.java:10)\n</code></pre>\n\n<p>Even in network security group, I enabled all the port. Can anyone help me regarding this?</p>\n"},{"tags":["java","spring","completable-future","threadpoolexecutor"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1689859933,"post_id":76730376,"comment_id":135275258,"body_markdown":"What does &quot;stops working&quot; mean? What does a thread dump tell you?","body":"What does &quot;stops working&quot; mean? What does a thread dump tell you?"},{"owner":{"account_id":9885814,"reputation":1371,"user_id":7320372,"display_name":"Thomas Lang"},"score":0,"creation_date":1689862192,"post_id":76730376,"comment_id":135275810,"body_markdown":"I&#180;ve added two flags to my `Executor`: `threadPoolTaskExecutor.setAllowCoreThreadTimeOut(true);`\n\t\t`threadPoolTaskExecutor.setDaemon(true);` It seems that this does the job ... I will investigate further","body":"I&#180;ve added two flags to my <code>Executor</code>: <code>threadPoolTaskExecutor.setAllowCoreThreadTimeOut(true);</code> \t\t<code>threadPoolTaskExecutor.setDaemon(true);</code> It seems that this does the job ... I will investigate further"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1689862830,"post_id":76730376,"comment_id":135275985,"body_markdown":"Why are you passing in the executor instead of wiring it into the class? Another thing is that if you are using this with Spring Boot this will also be used for handling web requests (the async part) so you are now filling it up twice as fast as before (Spring Boot starts a default executor but you ahve overridden that now).","body":"Why are you passing in the executor instead of wiring it into the class? Another thing is that if you are using this with Spring Boot this will also be used for handling web requests (the async part) so you are now filling it up twice as fast as before (Spring Boot starts a default executor but you ahve overridden that now)."},{"owner":{"account_id":9885814,"reputation":1371,"user_id":7320372,"display_name":"Thomas Lang"},"score":0,"creation_date":1689863958,"post_id":76730376,"comment_id":135276304,"body_markdown":"@M.Deinum You&#180;re right. This needs polish (Autowiring the executor). What i wanted to check is if there are performance gains while using a dedicated Executor as stated here: https://docs.spring.io/spring-framework/reference/integration/scheduling.html#scheduling-task-executor or going with the integrated one. As for now i cannot measure any gain in using the dedicated one.","body":"@M.Deinum You&#180;re right. This needs polish (Autowiring the executor). What i wanted to check is if there are performance gains while using a dedicated Executor as stated here: <a href=\"https://docs.spring.io/spring-framework/reference/integration/scheduling.html#scheduling-task-executor\" rel=\"nofollow noreferrer\">docs.spring.io/spring-framework/reference/integration/&hellip;</a> or going with the integrated one. As for now i cannot measure any gain in using the dedicated one."},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1689877306,"post_id":76730376,"comment_id":135279225,"body_markdown":"Because you now have 1 executor that is used for 2 things (Spring MVC Async **and** kicking of tasks), in the first sample you have 2 (1 used by the Spring MVC async support and one for doing the tasks) instead of 1. Not counting the one from Tomcat that is. Also don&#39;t use deamon threads use regular ones.","body":"Because you now have 1 executor that is used for 2 things (Spring MVC Async <b>and</b> kicking of tasks), in the first sample you have 2 (1 used by the Spring MVC async support and one for doing the tasks) instead of 1. Not counting the one from Tomcat that is. Also don&#39;t use deamon threads use regular ones."}],"owner":{"account_id":9885814,"reputation":1371,"user_id":7320372,"display_name":"Thomas Lang"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689860186,"creation_date":1689859490,"question_id":76730376,"body_markdown":"I have this 2 pieces of code:\r\n\r\n1.\r\n```java\r\n    @Override\r\n    @Async\r\n    public CompletableFuture&lt;List&lt;Activity&gt;&gt; findAllAndMakeAFuture() {\r\n        return CompletableFuture.supplyAsync(() -&gt; {\r\n            log.info(&quot;Current thread: {}&quot;, Thread.currentThread());\r\n            return activityRepository.findsAll();\r\n        });\r\n    }\r\n```\r\n\r\n2. \r\n```java\r\n    @Override\r\n    @Async\r\n    public CompletableFuture&lt;List&lt;Activity&gt;&gt; findAllAndMakeAFutureWithDedicatedExecutor(Executor executor) {\r\n        return CompletableFuture.supplyAsync(() -&gt; {\r\n            log.info(&quot;Current thread: {}&quot;, Thread.currentThread());\r\n            return activityRepository.findsAll();\r\n        }, executor);\r\n    }\r\n```\r\n\r\nI have this dedicated `ThreadPoolTaskExecutor`\r\n```java\r\n@Bean\r\nExecutor executor() {\r\n    ThreadPoolTaskExecutor threadPoolTaskExecutor = new ThreadPoolTaskExecutor();\r\n    threadPoolTaskExecutor.setCorePoolSize(48);\r\n    threadPoolTaskExecutor.setMaxPoolSize(48);\r\n    threadPoolTaskExecutor.setQueueCapacity(10000);\r\n}\r\n```\r\n\r\nI have an Apache jMeter Test where i query http endpoints for the code in 1. and 2.\r\n\r\nWhen i use 200 threads in jMeter for code 1., everything works fine.\r\n\r\nWhen i use the same query for code 2., at some point my application stops working without giving an exception.\r\n\r\nWhen i lower the threads from 200 to 100 code 1. and 2. works.\r\n\r\nIt seems that the usage of my dedicated `Executor` stops working.\r\n\r\nDo you know any limitations of using dedicated `Executors`? \r\n\r\nWhen i use this as my dedicated executor - even code 2. runs without any issue: `Executors.newCachedThreadPool()`\r\n\r\n**Edit:**\r\n\r\nStop working means there are no logger outputs. With every call to `activityRepository.findsAll()` i&#180;ll do a log output how much time it takes to fetch the data. This output is not there anymore.\r\n\r\nFurthermore Apache jMeter does not stop automatically the query.\r\n\r\nI didn&#180;t do any further investigation (like thread dump) cause i can say that the issue has something to do with exclusive usage of the dedicated `Executor` bean in code 2.","title":"Dedicated Executor stops working after a certain amount of submitted threads","body":"<p>I have this 2 pieces of code:</p>\n<p>1.</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @Override\n    @Async\n    public CompletableFuture&lt;List&lt;Activity&gt;&gt; findAllAndMakeAFuture() {\n        return CompletableFuture.supplyAsync(() -&gt; {\n            log.info(&quot;Current thread: {}&quot;, Thread.currentThread());\n            return activityRepository.findsAll();\n        });\n    }\n</code></pre>\n<ol start=\"2\">\n<li></li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>    @Override\n    @Async\n    public CompletableFuture&lt;List&lt;Activity&gt;&gt; findAllAndMakeAFutureWithDedicatedExecutor(Executor executor) {\n        return CompletableFuture.supplyAsync(() -&gt; {\n            log.info(&quot;Current thread: {}&quot;, Thread.currentThread());\n            return activityRepository.findsAll();\n        }, executor);\n    }\n</code></pre>\n<p>I have this dedicated <code>ThreadPoolTaskExecutor</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\nExecutor executor() {\n    ThreadPoolTaskExecutor threadPoolTaskExecutor = new ThreadPoolTaskExecutor();\n    threadPoolTaskExecutor.setCorePoolSize(48);\n    threadPoolTaskExecutor.setMaxPoolSize(48);\n    threadPoolTaskExecutor.setQueueCapacity(10000);\n}\n</code></pre>\n<p>I have an Apache jMeter Test where i query http endpoints for the code in 1. and 2.</p>\n<p>When i use 200 threads in jMeter for code 1., everything works fine.</p>\n<p>When i use the same query for code 2., at some point my application stops working without giving an exception.</p>\n<p>When i lower the threads from 200 to 100 code 1. and 2. works.</p>\n<p>It seems that the usage of my dedicated <code>Executor</code> stops working.</p>\n<p>Do you know any limitations of using dedicated <code>Executors</code>?</p>\n<p>When i use this as my dedicated executor - even code 2. runs without any issue: <code>Executors.newCachedThreadPool()</code></p>\n<p><strong>Edit:</strong></p>\n<p>Stop working means there are no logger outputs. With every call to <code>activityRepository.findsAll()</code> i´ll do a log output how much time it takes to fetch the data. This output is not there anymore.</p>\n<p>Furthermore Apache jMeter does not stop automatically the query.</p>\n<p>I didn´t do any further investigation (like thread dump) cause i can say that the issue has something to do with exclusive usage of the dedicated <code>Executor</code> bean in code 2.</p>\n"},{"tags":["python","java","c++","algorithm","performance"],"comments":[{"owner":{"account_id":27908218,"reputation":420,"user_id":21310959,"display_name":"Eldinur the Kolibri"},"score":0,"creation_date":1687983033,"post_id":76576390,"comment_id":135014615,"body_markdown":"What &quot;anecdotes&quot; did you come across?","body":"What &quot;anecdotes&quot; did you come across?"},{"owner":{"account_id":7815078,"reputation":30704,"user_id":5910058,"display_name":"Jesper Juhl"},"score":1,"creation_date":1687983073,"post_id":76576390,"comment_id":135014624,"body_markdown":"Are you compiling your C++ code with compiler optimizations enabled? Link Time Optimizations (LTO) enabled? If not, you should do that before benchmarking.","body":"Are you compiling your C++ code with compiler optimizations enabled? Link Time Optimizations (LTO) enabled? If not, you should do that before benchmarking."},{"owner":{"account_id":3817483,"reputation":1869,"user_id":3166476,"accept_rate":0,"display_name":"lakeweb"},"score":1,"creation_date":1687983196,"post_id":76576390,"comment_id":135014645,"body_markdown":"Yes, c++ is as much machine code as it gets. You should not time the console output, that is arbitrary. Just the prime hunt algorithm.","body":"Yes, c++ is as much machine code as it gets. You should not time the console output, that is arbitrary. Just the prime hunt algorithm."},{"owner":{"account_id":5809836,"reputation":33185,"user_id":4581301,"display_name":"user4581301"},"score":0,"creation_date":1687983302,"post_id":76576390,"comment_id":135014660,"body_markdown":"One thing that C++ will try to do is compute as much as possible at compile time. It is conceivable that the compiler will generate all of the prime numbers up to 1000 and store them, serving up the results at runtime.","body":"One thing that C++ will try to do is compute as much as possible at compile time. It is conceivable that the compiler will generate all of the prime numbers up to 1000 and store them, serving up the results at runtime."},{"owner":{"account_id":5809836,"reputation":33185,"user_id":4581301,"display_name":"user4581301"},"score":1,"creation_date":1687983662,"post_id":76576390,"comment_id":135014711,"body_markdown":"Side note: good performance comes from good algorithms and brute force computation of primes is far from good. Look into prime number sieves.","body":"Side note: good performance comes from good algorithms and brute force computation of primes is far from good. Look into prime number sieves."},{"owner":{"account_id":7568679,"reputation":24484,"user_id":5743288,"display_name":"Paul Sanders"},"score":1,"creation_date":1687983763,"post_id":76576390,"comment_id":135014734,"body_markdown":"@slothrop You might find [this](https://medium.com/nerd-for-tech/jit-java-just-in-time-jit-compiler-af1cc86fe53b) interesting.  Under the right conditions, Java can be faster than C++ (although, probably, usually isn&#39;t).","body":"@slothrop You might find <a href=\"https://medium.com/nerd-for-tech/jit-java-just-in-time-jit-compiler-af1cc86fe53b\" rel=\"nofollow noreferrer\">this</a> interesting.  Under the right conditions, Java can be faster than C++ (although, probably, usually isn&#39;t)."},{"owner":{"account_id":2020196,"reputation":1132,"user_id":1806566,"accept_rate":88,"display_name":"user1806566"},"score":2,"creation_date":1687983890,"post_id":76576390,"comment_id":135014760,"body_markdown":"A compiled language like C++ (or C or FORTRAN) will most often be much faster than an interpreted language.  The compiler translates what you wrote into machine code that runs directly on the hardware.  In an interpreted language like Python or Java (which is compiled into byte code, which is then interpreted), the hardware is actually running an interpreter which needs to fetch instructions, translate them into machine code, and execute them at runtime.  Interpreted languages have many advantages, but performance isn&#39;t typically one of them.","body":"A compiled language like C++ (or C or FORTRAN) will most often be much faster than an interpreted language.  The compiler translates what you wrote into machine code that runs directly on the hardware.  In an interpreted language like Python or Java (which is compiled into byte code, which is then interpreted), the hardware is actually running an interpreter which needs to fetch instructions, translate them into machine code, and execute them at runtime.  Interpreted languages have many advantages, but performance isn&#39;t typically one of them."},{"owner":{"account_id":399622,"reputation":4097,"user_id":765091,"display_name":"slothrop"},"score":1,"creation_date":1687983900,"post_id":76576390,"comment_id":135014763,"body_markdown":"@PaulSanders For integer operations, no. It uses arbitrary precision integers, which probably does create a bit of an overhead for problems where you can tell C++ to use an int32 (or whatever size).","body":"@PaulSanders For integer operations, no. It uses arbitrary precision integers, which probably does create a bit of an overhead for problems where you can tell C++ to use an int32 (or whatever size)."},{"owner":{"account_id":7568679,"reputation":24484,"user_id":5743288,"display_name":"Paul Sanders"},"score":0,"creation_date":1687984016,"post_id":76576390,"comment_id":135014785,"body_markdown":"@slothrop Ah yes, I remember now.  Bound to add some overhead, if precision &gt; 64","body":"@slothrop Ah yes, I remember now.  Bound to add some overhead, if precision &gt; 64"},{"owner":{"account_id":6475833,"reputation":90574,"user_id":5014455,"display_name":"juanpa.arrivillaga"},"score":1,"creation_date":1687984718,"post_id":76576390,"comment_id":135014908,"body_markdown":"@PaulSanders perhaps more importantly, everytime you do something like `mylist.append` in python, that is a very expensive (relative to C++ or Java) dynamic lookup. Just consider [this](https://docs.python.org/3/howto/descriptor.html#invocation-from-an-instance)","body":"@PaulSanders perhaps more importantly, everytime you do something like <code>mylist.append</code> in python, that is a very expensive (relative to C++ or Java) dynamic lookup. Just consider <a href=\"https://docs.python.org/3/howto/descriptor.html#invocation-from-an-instance\" rel=\"nofollow noreferrer\">this</a>"},{"owner":{"account_id":7568679,"reputation":24484,"user_id":5743288,"display_name":"Paul Sanders"},"score":0,"creation_date":1687988680,"post_id":76576390,"comment_id":135015452,"body_markdown":"@juanpa.arrivillaga interesting, thanks.  Built more for comfort than for speed","body":"@juanpa.arrivillaga interesting, thanks.  Built more for comfort than for speed"},{"owner":{"account_id":2968584,"reputation":50561,"user_id":2521214,"accept_rate":71,"display_name":"Spektre"},"score":3,"creation_date":1687989527,"post_id":76576390,"comment_id":135015545,"body_markdown":"C++ is usually compiled, JAVA is virtual machine emulation and Python is interpreter ... so its not really  a matter of programing language but the form of execution of code ...","body":"C++ is usually compiled, JAVA is virtual machine emulation and Python is interpreter ... so its not really  a matter of programing language but the form of execution of code ..."},{"owner":{"account_id":79346,"reputation":57079,"user_id":225074,"accept_rate":91,"display_name":"Thomas Matthews"},"score":0,"creation_date":1687991277,"post_id":76576390,"comment_id":135015730,"body_markdown":"Let&#39;s talk about garbage collection.  Java supports garbage collection, which may impact performance measurements for large applications (or large iterations).  As others have said, your programs should perform more computations than output and a sampling of different types of computations.  Python and Java may have more or better optimization for text handling than C++.  C++ isn&#39;t specialized, but written for general cases.","body":"Let&#39;s talk about garbage collection.  Java supports garbage collection, which may impact performance measurements for large applications (or large iterations).  As others have said, your programs should perform more computations than output and a sampling of different types of computations.  Python and Java may have more or better optimization for text handling than C++.  C++ isn&#39;t specialized, but written for general cases."},{"owner":{"account_id":7815078,"reputation":30704,"user_id":5910058,"display_name":"Jesper Juhl"},"score":1,"creation_date":1688008729,"post_id":76576390,"comment_id":135017022,"body_markdown":"&quot;I understand that C++ is usually compiled&quot; - That&#39;s a severe understatement. C++ is compiled in 99.999% of all cases. Yes C++ interpreters do exist, but noone uses them for anything serious - C++ is a compiled language.","body":"&quot;I understand that C++ is usually compiled&quot; - That&#39;s a severe understatement. C++ is compiled in 99.999% of all cases. Yes C++ interpreters do exist, but noone uses them for anything serious - C++ is a compiled language."},{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1688020457,"post_id":76576390,"comment_id":135018108,"body_markdown":"Note for Java: For benchmarks you should really use a framework like JMH; among other things, it ensures the JVM has &quot;warmed up&quot; (i.e., the JIT compiler has had time to analyze and optimize the code).","body":"Note for Java: For benchmarks you should really use a framework like JMH; among other things, it ensures the JVM has &quot;warmed up&quot; (i.e., the JIT compiler has had time to analyze and optimize the code)."},{"owner":{"account_id":20650084,"reputation":2646,"user_id":15160601,"display_name":"zoldxk"},"score":0,"creation_date":1688845581,"post_id":76576390,"comment_id":135129750,"body_markdown":"At how many downvotes should I delete this question ?","body":"At how many downvotes should I delete this question ?"},{"owner":{"account_id":3359942,"reputation":4710,"user_id":2821954,"display_name":"Andrew T."},"score":0,"creation_date":1688876808,"post_id":76576390,"comment_id":135131763,"body_markdown":"@zoldxk you can&#39;t delete questions with upvoted answers though.","body":"@zoldxk you can&#39;t delete questions with upvoted answers though."}],"answers":[{"tags":[],"owner":{"account_id":60200,"reputation":479675,"user_id":179910,"display_name":"Jerry Coffin"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1687988461,"creation_date":1687985006,"answer_id":76576594,"question_id":76576390,"body_markdown":"Let me start (and maybe finish--not sure how ambitious I&#39;ll be) with a digression.\r\n\r\n### Benchmarking is Hard\r\n\r\nBased on the times you&#39;re getting, it appears likely to me that you&#39;re timing execution of the entire program. Unfortunately, this is almost certainly dominated by the time taken to write the data to standard output, so if (for example) you redirected output to a file, chances are pretty good it would run a *lot* faster. Depending on testing environment and such, it would be fairly easy for this to produce fairly misleading results.\r\n\r\nJust for example, I&#39;d guess you&#39;re timing this under Windows, which has fairly slow console output. When I run your Python code under Linux, I get a time of 0.108 seconds--Python running faster than you got for C++. But that&#39;s almost certainly due primarily to Linux having much faster console output than Windows, not anything related to Python or C++ themselves at all.\r\n\r\nLet&#39;s time just the computation part of the C++ and see what we get.\r\n\r\n```cpp\r\n// preceding code as you wrote it\r\n\r\nint main() {\r\n    int n = 1000;\r\n    using namespace std::chrono; // added\r\n\r\n    auto start = high_resolution_clock::now(); // added\r\n\r\n    std::vector&lt;int&gt; primeNumbers = generatePrimes(n);\r\n\r\n    auto stop = high_resolution_clock::now(); //added\r\n\r\n    std::cout &lt;&lt; &quot;First &quot; &lt;&lt; n &lt;&lt; &quot; prime numbers: &quot;;\r\n    for (int prime : primeNumbers) {\r\n        std::cout &lt;&lt; prime &lt;&lt; &quot; &quot;;\r\n    }    \r\n    std::cout &lt;&lt; std::endl;\r\n\r\n    // added:\r\n    std::cout &lt;&lt; &quot;Time: &quot; &lt;&lt; duration_cast&lt;microseconds&gt;(stop-start).count() &lt;&lt; &quot;us\\n&quot;;\r\n    return 0;\r\n}\r\n```\r\n\r\nOn my machine (which isn&#39;t particularly fast) I get:\r\n\r\nTime: 394us\r\n\r\nSo even though the program took much longer to run, essentially all of that was consumed with displaying the output. The actual computation took only 0.394 milliseconds--a tiny fraction of the overall time.\r\n\r\nIt is still important to write out that result though--if you don&#39;t write out the result, the compiler can often detect that you&#39;re not using, it, and simply not compute it at all.\r\n\r\nEven with the additions I made, the timing may easily be less than perfect, to put to mildly. In particular, modern CPUs can execute instructions out of order, so it&#39;s possible that the computation started before I grabbed the start time and/or finished after I grabbed the stop time. This can also be prevented, but it&#39;s more difficult (and in this case, doing a quick calculation of how much time it *should* take, I&#39;d guess what the clock produced is at least reasonably accurate). But you often have to start with at least a decent guess at what you&#39;ve expecting, and if your result is off by a significant factor, you may need to look at things more carefully.\r\n\r\n### C++ vs. Python\r\n\r\nThe big difference between C++ and Python hinges around dynamic vs. static typing. In Python, a variable can be attached to a value of any type, and that type can change over its lifetime. For example, we can perfectly legally have some variable `a` that holds a number at one time, and string at a different time.\r\n\r\n```python\r\na = 3\r\nprint(a, type(a))\r\na = &quot;three&quot;\r\nprint(a, type(a))\r\n```\r\n\r\nResult:\r\n```\r\n3 &lt;class &#39;int&#39;&gt;\r\nthree &lt;class &#39;str&#39;&gt;\r\n```\r\n\r\nBecause of this, when you do almost any operation in Python, the code has to look up (at runtime) the type of each variable, to figure out what actual operation is being done, because the operation it carries out depends on their types.\r\n\r\nIn C++ types are mostly static (though you can use `std::any&lt;&gt;` and `std::variant&lt;&gt;` to get at least a limited imitation of dynamic types). Certainly the types in your code are entirely static. That means the compiler has done that lookup of what operation to apply to the operands at *compile* time, so it doesn&#39;t affect execution time at all.\r\n\r\nIn this case, you&#39;re doing a large number of simple operations. In the Python code, it&#39;s quite likely that most of the time is really spent looking up operand types, and figuring out what actions are appropriate for those operands, and only a small fraction of the time to actually doing the operation itself.\r\n\r\nNow, it is true that a sufficiently smart implementation of Python could often (probably even usually) infer types ahead of time. When I execute something like `a = 7`, `a` is obviously an `int`. Based on the operations applied to `a` afterwards, it could often track what type `a` is going to have throughout its lifetime, and generate code specifically for that type.\r\n\r\nSo, much of the speed penalty isn&#39;t necessarily inherent to Python as a language, only to the most common implementation(s) of it. At least theoretically, an implementation could be written that would probably provide performance much closer to C++ (especially for code like you&#39;ve written where nothing depends on user inputs).\r\n\r\nMy guess, however, is that the average Pythonista&#39;s reaction to doing this would generally be: &quot;if you want C++, you know where to find it.&quot; At least for the vast majority of them, there are more important ways to spend that time and effort (and it would be a lot of time and effort).","title":"Understanding the Performance Advantages of C++ over Other Languages","body":"<p>Let me start (and maybe finish--not sure how ambitious I'll be) with a digression.</p>\n<h3>Benchmarking is Hard</h3>\n<p>Based on the times you're getting, it appears likely to me that you're timing execution of the entire program. Unfortunately, this is almost certainly dominated by the time taken to write the data to standard output, so if (for example) you redirected output to a file, chances are pretty good it would run a <em>lot</em> faster. Depending on testing environment and such, it would be fairly easy for this to produce fairly misleading results.</p>\n<p>Just for example, I'd guess you're timing this under Windows, which has fairly slow console output. When I run your Python code under Linux, I get a time of 0.108 seconds--Python running faster than you got for C++. But that's almost certainly due primarily to Linux having much faster console output than Windows, not anything related to Python or C++ themselves at all.</p>\n<p>Let's time just the computation part of the C++ and see what we get.</p>\n<pre class=\"lang-cpp prettyprint-override\"><code>// preceding code as you wrote it\n\nint main() {\n    int n = 1000;\n    using namespace std::chrono; // added\n\n    auto start = high_resolution_clock::now(); // added\n\n    std::vector&lt;int&gt; primeNumbers = generatePrimes(n);\n\n    auto stop = high_resolution_clock::now(); //added\n\n    std::cout &lt;&lt; &quot;First &quot; &lt;&lt; n &lt;&lt; &quot; prime numbers: &quot;;\n    for (int prime : primeNumbers) {\n        std::cout &lt;&lt; prime &lt;&lt; &quot; &quot;;\n    }    \n    std::cout &lt;&lt; std::endl;\n\n    // added:\n    std::cout &lt;&lt; &quot;Time: &quot; &lt;&lt; duration_cast&lt;microseconds&gt;(stop-start).count() &lt;&lt; &quot;us\\n&quot;;\n    return 0;\n}\n</code></pre>\n<p>On my machine (which isn't particularly fast) I get:</p>\n<p>Time: 394us</p>\n<p>So even though the program took much longer to run, essentially all of that was consumed with displaying the output. The actual computation took only 0.394 milliseconds--a tiny fraction of the overall time.</p>\n<p>It is still important to write out that result though--if you don't write out the result, the compiler can often detect that you're not using, it, and simply not compute it at all.</p>\n<p>Even with the additions I made, the timing may easily be less than perfect, to put to mildly. In particular, modern CPUs can execute instructions out of order, so it's possible that the computation started before I grabbed the start time and/or finished after I grabbed the stop time. This can also be prevented, but it's more difficult (and in this case, doing a quick calculation of how much time it <em>should</em> take, I'd guess what the clock produced is at least reasonably accurate). But you often have to start with at least a decent guess at what you've expecting, and if your result is off by a significant factor, you may need to look at things more carefully.</p>\n<h3>C++ vs. Python</h3>\n<p>The big difference between C++ and Python hinges around dynamic vs. static typing. In Python, a variable can be attached to a value of any type, and that type can change over its lifetime. For example, we can perfectly legally have some variable <code>a</code> that holds a number at one time, and string at a different time.</p>\n<pre class=\"lang-py prettyprint-override\"><code>a = 3\nprint(a, type(a))\na = &quot;three&quot;\nprint(a, type(a))\n</code></pre>\n<p>Result:</p>\n<pre><code>3 &lt;class 'int'&gt;\nthree &lt;class 'str'&gt;\n</code></pre>\n<p>Because of this, when you do almost any operation in Python, the code has to look up (at runtime) the type of each variable, to figure out what actual operation is being done, because the operation it carries out depends on their types.</p>\n<p>In C++ types are mostly static (though you can use <code>std::any&lt;&gt;</code> and <code>std::variant&lt;&gt;</code> to get at least a limited imitation of dynamic types). Certainly the types in your code are entirely static. That means the compiler has done that lookup of what operation to apply to the operands at <em>compile</em> time, so it doesn't affect execution time at all.</p>\n<p>In this case, you're doing a large number of simple operations. In the Python code, it's quite likely that most of the time is really spent looking up operand types, and figuring out what actions are appropriate for those operands, and only a small fraction of the time to actually doing the operation itself.</p>\n<p>Now, it is true that a sufficiently smart implementation of Python could often (probably even usually) infer types ahead of time. When I execute something like <code>a = 7</code>, <code>a</code> is obviously an <code>int</code>. Based on the operations applied to <code>a</code> afterwards, it could often track what type <code>a</code> is going to have throughout its lifetime, and generate code specifically for that type.</p>\n<p>So, much of the speed penalty isn't necessarily inherent to Python as a language, only to the most common implementation(s) of it. At least theoretically, an implementation could be written that would probably provide performance much closer to C++ (especially for code like you've written where nothing depends on user inputs).</p>\n<p>My guess, however, is that the average Pythonista's reaction to doing this would generally be: &quot;if you want C++, you know where to find it.&quot; At least for the vast majority of them, there are more important ways to spend that time and effort (and it would be a lot of time and effort).</p>\n"}],"owner":{"account_id":20650084,"reputation":2646,"user_id":15160601,"display_name":"zoldxk"},"comment_count":17,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":371,"favorite_count":0,"down_vote_count":10,"up_vote_count":5,"closed_date":1687987583,"answer_count":1,"score":-5,"last_activity_date":1689859640,"creation_date":1687982745,"question_id":76576390,"body_markdown":"Why does C++ generally exhibit better execution speed than Java and Python? What factors contribute to this performance disparity? I conducted a series of tests to compare the execution speeds of these languages and seek a deeper understanding of the underlying reasons.\r\n\r\nContext: As a computer science student, I have been exploring various programming languages to comprehend their performance characteristics. Through my experiments, I have consistently observed that C++ tends to outperform Java and Python in terms of execution speed. However, I desire a comprehensive understanding of the factors contributing to this performance difference.\r\n\r\nHardware and Compilation Details: To ensure a fair comparison, I executed the same algorithm using identical logic and datasets across all three languages. The experiments were conducted on a system equipped with an Intel Core i7 processor (8 cores) and 16 GB of RAM.\r\n\r\nFor the C++ code, I utilized GCC 10.2.0 with the following compilation flags:\r\n\r\n`g++ -O3 -march=native -mtune=native -std=c++17 -o program program.cpp`\r\n\r\nJava was executed using OpenJDK 11.0.1 with the following command:\r\n\r\n`java -Xmx8G -Xms8G Program`\r\n\r\nPython code was executed using Python 3.9.0 as follows:\r\n\r\n`python3 program.py`\r\nC++ code:\r\n\r\n```\r\n#include &lt;iostream&gt;\r\n#include &lt;chrono&gt;\r\n#include &lt;vector&gt;\r\n#include &lt;random&gt;\r\n\r\n// Function to generate a random matrix of size m x n\r\nstd::vector&lt;std::vector&lt;int&gt;&gt; generateRandomMatrix(int m, int n) {\r\n    std::vector&lt;std::vector&lt;int&gt;&gt; matrix(m, std::vector&lt;int&gt;(n));\r\n    std::random_device rd;\r\n    std::mt19937 gen(rd());\r\n    std::uniform_int_distribution&lt;&gt; dis(1, 100);\r\n\r\n    for (int i = 0; i &lt; m; ++i) {\r\n        for (int j = 0; j &lt; n; ++j) {\r\n            matrix[i][j] = dis(gen);\r\n        }\r\n    }\r\n\r\n    return matrix;\r\n}\r\n\r\n// Matrix multiplication function\r\nstd::vector&lt;std::vector&lt;int&gt;&gt; matrixMultiplication(const std::vector&lt;std::vector&lt;int&gt;&gt;&amp; A, const std::vector&lt;std::vector&lt;int&gt;&gt;&amp; B) {\r\n    int m = A.size();\r\n    int n = B[0].size();\r\n    int k = B.size();\r\n\r\n    std::vector&lt;std::vector&lt;int&gt;&gt; result(m, std::vector&lt;int&gt;(n, 0));\r\n\r\n    for (int i = 0; i &lt; m; ++i) {\r\n        for (int j = 0; j &lt; n; ++j) {\r\n            for (int x = 0; x &lt; k; ++x) {\r\n                result[i][j] += A[i][x] * B[x][j];\r\n            }\r\n        }\r\n    }\r\n\r\n    return result;\r\n}\r\n\r\nint main() {\r\n    // Generate random matrices A and B of size 3 x 3\r\n    std::vector&lt;std::vector&lt;int&gt;&gt; A = generateRandomMatrix(3, 3);\r\n    std::vector&lt;std::vector&lt;int&gt;&gt; B = generateRandomMatrix(3, 3);\r\n\r\n    // Measure execution time\r\n    auto start = std::chrono::steady_clock::now();\r\n\r\n    // Perform matrix multiplication\r\n    std::vector&lt;std::vector&lt;int&gt;&gt; result = matrixMultiplication(A, B);\r\n\r\n    auto end = std::chrono::steady_clock::now();\r\n    auto duration = std::chrono::duration_cast&lt;std::chrono::microseconds&gt;(end - start).count();\r\n\r\n    std::cout &lt;&lt; &quot;Execution time (C++): &quot; &lt;&lt; duration &lt;&lt; &quot; microseconds&quot; &lt;&lt; std::endl;\r\n\r\n    return 0;\r\n}\r\n\r\n```\r\nJava code:\r\n```\r\nimport java.util.Arrays;\r\nimport java.util.Random;\r\n\r\npublic class Program {\r\n    // Function to generate a random matrix of size m x n\r\n    public static int[][] generateRandomMatrix(int m, int n) {\r\n        int[][] matrix = new int[m][n];\r\n        Random random = new Random();\r\n\r\n        for (int i = 0; i &lt; m; ++i) {\r\n            for (int j = 0; j &lt; n; ++j) {\r\n                matrix[i][j] = random.nextInt(100) + 1;\r\n            }\r\n        }\r\n\r\n        return matrix;\r\n    }\r\n\r\n    // Matrix multiplication function\r\n    public static int[][] matrixMultiplication(int[][] A, int[][] B) {\r\n        int m = A.length;\r\n        int n = B[0].length;\r\n        int k = B.length;\r\n\r\n        int[][] result = new int[m][n];\r\n\r\n        for (int i = 0; i &lt; m; ++i) {\r\n            for (int j = 0; j &lt; n; ++j) {\r\n                for (int x = 0; x &lt; k; ++x) {\r\n                    result[i][j] += A[i][x] * B[x][j];\r\n                }\r\n            }\r\n        }\r\n\r\n        return result;\r\n    }\r\n    public static void main(String[] args) {\r\n        // Generate random matrices A and B of size 3 x 3\r\n        int[][] A = generateRandomMatrix(3, 3);\r\n        int[][] B = generateRandomMatrix(3, 3);\r\n\r\n        // Measure execution time\r\n        long start = System.nanoTime();\r\n\r\n        // Perform matrix multiplication\r\n        int[][] result = matrixMultiplication(A, B);\r\n\r\n        long end = System.nanoTime();\r\n        long duration = end - start;\r\n\r\n        System.out.println(&quot;Execution time (Java): &quot; + duration + &quot; nanoseconds&quot;);\r\n    }\r\n}\r\n\r\n```\r\nPython code:\r\n```\r\nimport time\r\nimport numpy as np\r\nimport random\r\n\r\n# Function to generate a random matrix of size m x n\r\ndef generateRandomMatrix(m, n):\r\n    return [[random.randint(1, 100) for _ in range(n)] for _ in range(m)]\r\n\r\n# Matrix multiplication function\r\ndef matrixMultiplication(A, B):\r\n    A = np.array(A)\r\n    B = np.array(B)\r\n    result = np.dot(A, B)\r\n    return result.tolist()\r\n\r\nif __name__ == &quot;__main__&quot;:\r\n    # Generate random matrices A and B of size 3 x 3\r\n    A = generateRandomMatrix(3, 3)\r\n    B = generateRandomMatrix(3, 3)\r\n\r\n    # Measure execution time\r\n    start = time.time()\r\n\r\n    # Perform matrix multiplication\r\n    result = matrixMultiplication(A, B)\r\n\r\n    end = time.time()\r\n    duration = (end - start) * 1e6\r\n\r\n    print(&quot;Execution time (Python): {} microseconds&quot;.format(duration))\r\n\r\n```\r\nI noticed a substantial performance difference in favor of C++. The execution times demonstrate C++&#39;s superiority over Java and Python.\r\n\r\nI understand that C++ is typically compiled, Java employs virtual machine emulation, and Python is interpreted. Consequently, I acknowledge that differences in execution approaches and compiler optimizations may significantly contribute to these performance disparities. Nonetheless, I would appreciate a more detailed explanation of the specific reasons underlying the observed performance differences.\r\n\r\nFurthermore, I have taken the recommendation into account and conducted longer tests, running the algorithms on larger datasets to minimize the impact of initial startup costs for Java and Python. Nevertheless, the performance gap between C++ and the other languages remains substantial.\r\n\r\nCould someone shed light on why C++ consistently outperforms Java and Python in this scenario? Are there specific compiler flags or runtime settings that could be adjusted in Java and Python to enhance their performance in similar computational tasks?\r\n\r\nThank you for sharing your insights and expertise!","title":"Understanding the Performance Advantages of C++ over Other Languages","body":"<p>Why does C++ generally exhibit better execution speed than Java and Python? What factors contribute to this performance disparity? I conducted a series of tests to compare the execution speeds of these languages and seek a deeper understanding of the underlying reasons.</p>\n<p>Context: As a computer science student, I have been exploring various programming languages to comprehend their performance characteristics. Through my experiments, I have consistently observed that C++ tends to outperform Java and Python in terms of execution speed. However, I desire a comprehensive understanding of the factors contributing to this performance difference.</p>\n<p>Hardware and Compilation Details: To ensure a fair comparison, I executed the same algorithm using identical logic and datasets across all three languages. The experiments were conducted on a system equipped with an Intel Core i7 processor (8 cores) and 16 GB of RAM.</p>\n<p>For the C++ code, I utilized GCC 10.2.0 with the following compilation flags:</p>\n<p><code>g++ -O3 -march=native -mtune=native -std=c++17 -o program program.cpp</code></p>\n<p>Java was executed using OpenJDK 11.0.1 with the following command:</p>\n<p><code>java -Xmx8G -Xms8G Program</code></p>\n<p>Python code was executed using Python 3.9.0 as follows:</p>\n<p><code>python3 program.py</code>\nC++ code:</p>\n<pre><code>#include &lt;iostream&gt;\n#include &lt;chrono&gt;\n#include &lt;vector&gt;\n#include &lt;random&gt;\n\n// Function to generate a random matrix of size m x n\nstd::vector&lt;std::vector&lt;int&gt;&gt; generateRandomMatrix(int m, int n) {\n    std::vector&lt;std::vector&lt;int&gt;&gt; matrix(m, std::vector&lt;int&gt;(n));\n    std::random_device rd;\n    std::mt19937 gen(rd());\n    std::uniform_int_distribution&lt;&gt; dis(1, 100);\n\n    for (int i = 0; i &lt; m; ++i) {\n        for (int j = 0; j &lt; n; ++j) {\n            matrix[i][j] = dis(gen);\n        }\n    }\n\n    return matrix;\n}\n\n// Matrix multiplication function\nstd::vector&lt;std::vector&lt;int&gt;&gt; matrixMultiplication(const std::vector&lt;std::vector&lt;int&gt;&gt;&amp; A, const std::vector&lt;std::vector&lt;int&gt;&gt;&amp; B) {\n    int m = A.size();\n    int n = B[0].size();\n    int k = B.size();\n\n    std::vector&lt;std::vector&lt;int&gt;&gt; result(m, std::vector&lt;int&gt;(n, 0));\n\n    for (int i = 0; i &lt; m; ++i) {\n        for (int j = 0; j &lt; n; ++j) {\n            for (int x = 0; x &lt; k; ++x) {\n                result[i][j] += A[i][x] * B[x][j];\n            }\n        }\n    }\n\n    return result;\n}\n\nint main() {\n    // Generate random matrices A and B of size 3 x 3\n    std::vector&lt;std::vector&lt;int&gt;&gt; A = generateRandomMatrix(3, 3);\n    std::vector&lt;std::vector&lt;int&gt;&gt; B = generateRandomMatrix(3, 3);\n\n    // Measure execution time\n    auto start = std::chrono::steady_clock::now();\n\n    // Perform matrix multiplication\n    std::vector&lt;std::vector&lt;int&gt;&gt; result = matrixMultiplication(A, B);\n\n    auto end = std::chrono::steady_clock::now();\n    auto duration = std::chrono::duration_cast&lt;std::chrono::microseconds&gt;(end - start).count();\n\n    std::cout &lt;&lt; &quot;Execution time (C++): &quot; &lt;&lt; duration &lt;&lt; &quot; microseconds&quot; &lt;&lt; std::endl;\n\n    return 0;\n}\n\n</code></pre>\n<p>Java code:</p>\n<pre><code>import java.util.Arrays;\nimport java.util.Random;\n\npublic class Program {\n    // Function to generate a random matrix of size m x n\n    public static int[][] generateRandomMatrix(int m, int n) {\n        int[][] matrix = new int[m][n];\n        Random random = new Random();\n\n        for (int i = 0; i &lt; m; ++i) {\n            for (int j = 0; j &lt; n; ++j) {\n                matrix[i][j] = random.nextInt(100) + 1;\n            }\n        }\n\n        return matrix;\n    }\n\n    // Matrix multiplication function\n    public static int[][] matrixMultiplication(int[][] A, int[][] B) {\n        int m = A.length;\n        int n = B[0].length;\n        int k = B.length;\n\n        int[][] result = new int[m][n];\n\n        for (int i = 0; i &lt; m; ++i) {\n            for (int j = 0; j &lt; n; ++j) {\n                for (int x = 0; x &lt; k; ++x) {\n                    result[i][j] += A[i][x] * B[x][j];\n                }\n            }\n        }\n\n        return result;\n    }\n    public static void main(String[] args) {\n        // Generate random matrices A and B of size 3 x 3\n        int[][] A = generateRandomMatrix(3, 3);\n        int[][] B = generateRandomMatrix(3, 3);\n\n        // Measure execution time\n        long start = System.nanoTime();\n\n        // Perform matrix multiplication\n        int[][] result = matrixMultiplication(A, B);\n\n        long end = System.nanoTime();\n        long duration = end - start;\n\n        System.out.println(&quot;Execution time (Java): &quot; + duration + &quot; nanoseconds&quot;);\n    }\n}\n\n</code></pre>\n<p>Python code:</p>\n<pre><code>import time\nimport numpy as np\nimport random\n\n# Function to generate a random matrix of size m x n\ndef generateRandomMatrix(m, n):\n    return [[random.randint(1, 100) for _ in range(n)] for _ in range(m)]\n\n# Matrix multiplication function\ndef matrixMultiplication(A, B):\n    A = np.array(A)\n    B = np.array(B)\n    result = np.dot(A, B)\n    return result.tolist()\n\nif __name__ == &quot;__main__&quot;:\n    # Generate random matrices A and B of size 3 x 3\n    A = generateRandomMatrix(3, 3)\n    B = generateRandomMatrix(3, 3)\n\n    # Measure execution time\n    start = time.time()\n\n    # Perform matrix multiplication\n    result = matrixMultiplication(A, B)\n\n    end = time.time()\n    duration = (end - start) * 1e6\n\n    print(&quot;Execution time (Python): {} microseconds&quot;.format(duration))\n\n</code></pre>\n<p>I noticed a substantial performance difference in favor of C++. The execution times demonstrate C++'s superiority over Java and Python.</p>\n<p>I understand that C++ is typically compiled, Java employs virtual machine emulation, and Python is interpreted. Consequently, I acknowledge that differences in execution approaches and compiler optimizations may significantly contribute to these performance disparities. Nonetheless, I would appreciate a more detailed explanation of the specific reasons underlying the observed performance differences.</p>\n<p>Furthermore, I have taken the recommendation into account and conducted longer tests, running the algorithms on larger datasets to minimize the impact of initial startup costs for Java and Python. Nevertheless, the performance gap between C++ and the other languages remains substantial.</p>\n<p>Could someone shed light on why C++ consistently outperforms Java and Python in this scenario? Are there specific compiler flags or runtime settings that could be adjusted in Java and Python to enhance their performance in similar computational tasks?</p>\n<p>Thank you for sharing your insights and expertise!</p>\n"},{"tags":["java","idioms"],"comments":[{"owner":{"account_id":150404,"reputation":42099,"user_id":363573,"accept_rate":97,"display_name":"Stephan"},"score":0,"creation_date":1631386707,"post_id":1988016,"comment_id":122209922,"body_markdown":"See also: https://jaksa.wordpress.com/2019/10/28/named-parameters-in-java/","body":"See also: <a href=\"https://jaksa.wordpress.com/2019/10/28/named-parameters-in-java/\" rel=\"nofollow noreferrer\">jaksa.wordpress.com/2019/10/28/named-parameters-in-java</a>"}],"answers":[{"tags":[],"owner":{"account_id":32681,"reputation":138933,"user_id":90848,"accept_rate":90,"display_name":"Laurence Gonsalves"},"down_vote_count":2,"up_vote_count":124,"is_accepted":true,"score":122,"last_activity_date":1262328871,"creation_date":1262327568,"answer_id":1988035,"question_id":1988016,"body_markdown":"The best Java idiom I&#39;ve seem for simulating keyword arguments in constructors is the Builder pattern, described in [Effective Java 2nd Edition](http://java.sun.com/docs/books/effective/).\r\n\r\nThe basic idea is to have a Builder class that has setters (but usually not getters) for the different constructor parameters. There&#39;s also a `build()` method. The Builder class is often a (static) nested class of the class that it&#39;s used to build. The outer class&#39;s constructor is often private.\r\n\r\nThe end result looks something like:\r\n\r\n    public class Foo {\r\n      public static class Builder {\r\n        public Foo build() {\r\n          return new Foo(this);\r\n        }\r\n    \r\n        public Builder setSize(int size) {\r\n          this.size = size;\r\n          return this;\r\n        }\r\n    \r\n        public Builder setColor(Color color) {\r\n          this.color = color;\r\n          return this;\r\n        }\r\n    \r\n        public Builder setName(String name) {\r\n          this.name = name;\r\n          return this;\r\n        }\r\n    \r\n        // you can set defaults for these here\r\n        private int size;\r\n        private Color color;\r\n        private String name;\r\n      }\r\n\r\n      public static Builder builder() {\r\n          return new Builder();\r\n      }\r\n    \r\n      private Foo(Builder builder) {\r\n        size = builder.size;\r\n        color = builder.color;\r\n        name = builder.name;\r\n      }\r\n    \r\n      private final int size;\r\n      private final Color color;\r\n      private final String name;\r\n    \r\n      // The rest of Foo goes here...\r\n    }\r\n\r\nTo create an instance of Foo you then write something like:\r\n\r\n    Foo foo = Foo.builder()\r\n        .setColor(red)\r\n        .setName(&quot;Fred&quot;)\r\n        .setSize(42)\r\n        .build();\r\n\r\nThe main caveats are:\r\n\r\n  1. Setting up the pattern is pretty verbose (as you can see). Probably not worth it except for classes you plan on instantiating in many places.\r\n  2. There&#39;s no compile-time checking that all of the parameters have been specified exactly once. You can add runtime checks, or you can use this only for optional parameters and make required parameters normal parameters to either Foo or the Builder&#39;s constructor. (People generally don&#39;t worry about the case where the same parameter is being set multiple times.)\r\n\r\nYou may also want to check out [this blog post](http://rwhansen.blogspot.com/2007/07/theres-builder-pattern-that-joshua.html) (not by me).","title":"Named Parameter idiom in Java","body":"<p>The best Java idiom I've seem for simulating keyword arguments in constructors is the Builder pattern, described in <a href=\"http://java.sun.com/docs/books/effective/\" rel=\"noreferrer\">Effective Java 2nd Edition</a>.</p>\n\n<p>The basic idea is to have a Builder class that has setters (but usually not getters) for the different constructor parameters. There's also a <code>build()</code> method. The Builder class is often a (static) nested class of the class that it's used to build. The outer class's constructor is often private.</p>\n\n<p>The end result looks something like:</p>\n\n<pre><code>public class Foo {\n  public static class Builder {\n    public Foo build() {\n      return new Foo(this);\n    }\n\n    public Builder setSize(int size) {\n      this.size = size;\n      return this;\n    }\n\n    public Builder setColor(Color color) {\n      this.color = color;\n      return this;\n    }\n\n    public Builder setName(String name) {\n      this.name = name;\n      return this;\n    }\n\n    // you can set defaults for these here\n    private int size;\n    private Color color;\n    private String name;\n  }\n\n  public static Builder builder() {\n      return new Builder();\n  }\n\n  private Foo(Builder builder) {\n    size = builder.size;\n    color = builder.color;\n    name = builder.name;\n  }\n\n  private final int size;\n  private final Color color;\n  private final String name;\n\n  // The rest of Foo goes here...\n}\n</code></pre>\n\n<p>To create an instance of Foo you then write something like:</p>\n\n<pre><code>Foo foo = Foo.builder()\n    .setColor(red)\n    .setName(\"Fred\")\n    .setSize(42)\n    .build();\n</code></pre>\n\n<p>The main caveats are:</p>\n\n<ol>\n<li>Setting up the pattern is pretty verbose (as you can see). Probably not worth it except for classes you plan on instantiating in many places.</li>\n<li>There's no compile-time checking that all of the parameters have been specified exactly once. You can add runtime checks, or you can use this only for optional parameters and make required parameters normal parameters to either Foo or the Builder's constructor. (People generally don't worry about the case where the same parameter is being set multiple times.)</li>\n</ol>\n\n<p>You may also want to check out <a href=\"http://rwhansen.blogspot.com/2007/07/theres-builder-pattern-that-joshua.html\" rel=\"noreferrer\">this blog post</a> (not by me).</p>\n"},{"tags":[],"owner":{"account_id":55539,"reputation":160129,"user_id":166339,"display_name":"Asaph"},"down_vote_count":8,"up_vote_count":15,"is_accepted":false,"score":7,"last_activity_date":1689859587,"creation_date":1262327779,"answer_id":1988038,"question_id":1988016,"body_markdown":"Java does not support Objective-C-like named parameters for constructors or method arguments. Furthermore, this is really not the Java way of doing things.\r\n\r\nIn java, the typical pattern is verbosely named classes and members. Classes and variables should be nouns and method named should be verbs. I suppose you could get creative and deviate from the Java naming conventions and emulate the Objective-C paradigm in a hacky way but this wouldn&#39;t be particularly appreciated by the average Java developer charged with maintaining your code.  \r\nWhen working in any language, it behooves you to stick to the conventions of the language and community, especially when working on a team.","title":"Named Parameter idiom in Java","body":"<p>Java does not support Objective-C-like named parameters for constructors or method arguments. Furthermore, this is really not the Java way of doing things.</p>\n<p>In java, the typical pattern is verbosely named classes and members. Classes and variables should be nouns and method named should be verbs. I suppose you could get creative and deviate from the Java naming conventions and emulate the Objective-C paradigm in a hacky way but this wouldn't be particularly appreciated by the average Java developer charged with maintaining your code.<br />\nWhen working in any language, it behooves you to stick to the conventions of the language and community, especially when working on a team.</p>\n"},{"tags":[],"owner":{"account_id":76511,"reputation":44893,"user_id":218978,"accept_rate":100,"display_name":"irreputable"},"down_vote_count":6,"up_vote_count":92,"is_accepted":false,"score":86,"last_activity_date":1395777557,"creation_date":1262339977,"answer_id":1988268,"question_id":1988016,"body_markdown":"This is worth of mentioning:\r\n\r\n    Foo foo = new Foo() {{\r\n        color = red;\r\n        name = &quot;Fred&quot;;\r\n        size = 42;\r\n    }};\r\n\r\nthe so called *double-brace initializer*. It is actually an anonymous class with instance initializer. ","title":"Named Parameter idiom in Java","body":"<p>This is worth of mentioning:</p>\n\n<pre><code>Foo foo = new Foo() {{\n    color = red;\n    name = \"Fred\";\n    size = 42;\n}};\n</code></pre>\n\n<p>the so called <em>double-brace initializer</em>. It is actually an anonymous class with instance initializer. </p>\n"},{"tags":[],"owner":{"account_id":85409,"reputation":89783,"user_id":238134,"accept_rate":73,"display_name":"deamon"},"down_vote_count":6,"up_vote_count":8,"is_accepted":false,"score":2,"last_activity_date":1263566499,"creation_date":1262341339,"answer_id":1988298,"question_id":1988016,"body_markdown":"You could use a usual constructor and static methods that give the arguments a name:\r\n\r\n    public class Something {\r\n    \r\n    \tString name;\r\n    \tint size; \r\n    \tfloat weight;\r\n    \r\n    \tpublic Something(String name, int size, float weight) {\r\n    \t\tthis.name = name;\r\n    \t\tthis.size = size;\r\n    \t\tthis.weight = weight;\r\n    \t}\r\n    \r\n    \tpublic static String name(String name) { \r\n    \t\treturn name; \r\n    \t}\r\n    \t\r\n    \tpublic static int size(int size) {\r\n    \t\treturn size;\r\n    \t}\r\n    \t\r\n    \tpublic float weight(float weight) {\r\n    \t\treturn weight;\r\n    \t}\r\n    \t\r\n    }\r\n\r\nUsage:\r\n\r\n    import static Something.*;\r\n    \r\n    Something s = new Something(name(&quot;pen&quot;), size(20), weight(8.2));\r\n\r\nLimitations compared to real named parameters:\r\n\r\n - argument order is relevant\r\n - variable argument lists are not possible with a single constructor\r\n - you need a method for every argument\r\n - not really better than a comment (new Something(`/*name*/ &quot;pen&quot;, /*size*/ 20, /*weight*/ 8.2)`)\r\n\r\nIf you have the choice look at Scala 2.8. http://www.scala-lang.org/node/2075","title":"Named Parameter idiom in Java","body":"<p>You could use a usual constructor and static methods that give the arguments a name:</p>\n\n<pre><code>public class Something {\n\n    String name;\n    int size; \n    float weight;\n\n    public Something(String name, int size, float weight) {\n        this.name = name;\n        this.size = size;\n        this.weight = weight;\n    }\n\n    public static String name(String name) { \n        return name; \n    }\n\n    public static int size(int size) {\n        return size;\n    }\n\n    public float weight(float weight) {\n        return weight;\n    }\n\n}\n</code></pre>\n\n<p>Usage:</p>\n\n<pre><code>import static Something.*;\n\nSomething s = new Something(name(\"pen\"), size(20), weight(8.2));\n</code></pre>\n\n<p>Limitations compared to real named parameters:</p>\n\n<ul>\n<li>argument order is relevant</li>\n<li>variable argument lists are not possible with a single constructor</li>\n<li>you need a method for every argument</li>\n<li>not really better than a comment (new Something(<code>/*name*/ \"pen\", /*size*/ 20, /*weight*/ 8.2)</code>)</li>\n</ul>\n\n<p>If you have the choice look at Scala 2.8. <a href=\"http://www.scala-lang.org/node/2075\" rel=\"nofollow noreferrer\">http://www.scala-lang.org/node/2075</a></p>\n"},{"tags":[],"owner":{"account_id":682516,"reputation":79,"user_id":534738,"display_name":"R Casha"},"down_vote_count":1,"up_vote_count":8,"is_accepted":false,"score":7,"last_activity_date":1291798035,"creation_date":1291798035,"answer_id":4385612,"question_id":1988016,"body_markdown":"If you are using Java 6, you can use the variable parameters and import static to produce a much better result. Details of this are found in: \r\n\r\nhttp://zinzel.blogspot.com/2010/07/creating-methods-with-named-parameters.html\r\n\r\nIn short, you could have something like:\r\n\r\n    go();\r\n    go(min(0));\r\n    go(min(0), max(100));\r\n    go(max(100), min(0));\r\n    go(prompt(&quot;Enter a value&quot;), min(0), max(100));","title":"Named Parameter idiom in Java","body":"<p>If you are using Java 6, you can use the variable parameters and import static to produce a much better result. Details of this are found in: </p>\n\n<p><a href=\"http://zinzel.blogspot.com/2010/07/creating-methods-with-named-parameters.html\" rel=\"noreferrer\">http://zinzel.blogspot.com/2010/07/creating-methods-with-named-parameters.html</a></p>\n\n<p>In short, you could have something like:</p>\n\n<pre><code>go();\ngo(min(0));\ngo(min(0), max(100));\ngo(max(100), min(0));\ngo(prompt(\"Enter a value\"), min(0), max(100));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":273299,"reputation":79,"user_id":564819,"display_name":"user564819"},"down_vote_count":1,"up_vote_count":8,"is_accepted":false,"score":7,"last_activity_date":1663699986,"creation_date":1300934907,"answer_id":5414201,"question_id":1988016,"body_markdown":"What about\r\n\r\n    public class Tiger {\r\n        String myColor;\r\n        int myLegs;\r\n    \r\n        public Tiger color(String s)\r\n        {\r\n            myColor = s;\r\n            return this;\r\n        }\r\n\r\n        public Tiger legs(int i)\r\n        {\r\n            myLegs = i;\r\n            return this;\r\n        }\r\n    }\r\n\r\n    Tiger t = new Tiger().legs(4).color(&quot;striped&quot;);","title":"Named Parameter idiom in Java","body":"<p>What about</p>\n<pre><code>public class Tiger {\n    String myColor;\n    int myLegs;\n\n    public Tiger color(String s)\n    {\n        myColor = s;\n        return this;\n    }\n\n    public Tiger legs(int i)\n    {\n        myLegs = i;\n        return this;\n    }\n}\n\nTiger t = new Tiger().legs(4).color(&quot;striped&quot;);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":973816,"reputation":1039,"user_id":995737,"display_name":"Dominic Fox"},"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1329153502,"creation_date":1329153502,"answer_id":9264881,"question_id":1988016,"body_markdown":"The idiom supported by the [karg library][1] may be worth considering:\r\n\r\n    class Example {\r\n\r\n        private static final Keyword&lt;String&gt; GREETING = Keyword.newKeyword();\r\n        private static final Keyword&lt;String&gt; NAME = Keyword.newKeyword();\r\n\r\n        public void greet(KeywordArgument...argArray) {\r\n            KeywordArguments args = KeywordArguments.of(argArray);\r\n            String greeting = GREETING.from(args, &quot;Hello&quot;);\r\n            String name = NAME.from(args, &quot;World&quot;);\r\n            System.out.println(String.format(&quot;%s, %s!&quot;, greeting, name));\r\n        }\r\n\r\n        public void sayHello() {\r\n            greet();\r\n        }\r\n\r\n        public void sayGoodbye() {\r\n            greet(GREETING.of(&quot;Goodbye&quot;);\r\n        }\r\n\r\n        public void campItUp() {\r\n            greet(NAME.of(&quot;Sailor&quot;);\r\n        }\r\n    }\r\n\r\n\r\n  [1]: https://github.com/youdevise/karg","title":"Named Parameter idiom in Java","body":"<p>The idiom supported by the <a href=\"https://github.com/youdevise/karg\" rel=\"nofollow\">karg library</a> may be worth considering:</p>\n\n<pre><code>class Example {\n\n    private static final Keyword&lt;String&gt; GREETING = Keyword.newKeyword();\n    private static final Keyword&lt;String&gt; NAME = Keyword.newKeyword();\n\n    public void greet(KeywordArgument...argArray) {\n        KeywordArguments args = KeywordArguments.of(argArray);\n        String greeting = GREETING.from(args, \"Hello\");\n        String name = NAME.from(args, \"World\");\n        System.out.println(String.format(\"%s, %s!\", greeting, name));\n    }\n\n    public void sayHello() {\n        greet();\n    }\n\n    public void sayGoodbye() {\n        greet(GREETING.of(\"Goodbye\");\n    }\n\n    public void campItUp() {\n        greet(NAME.of(\"Sailor\");\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16831,"reputation":8923,"user_id":37086,"accept_rate":100,"display_name":"rkj"},"down_vote_count":6,"up_vote_count":31,"is_accepted":false,"score":25,"last_activity_date":1663699929,"creation_date":1330969661,"answer_id":9571371,"question_id":1988016,"body_markdown":"You could also try to follow advice from [here](http://www.artima.com/weblogs/viewpost.jsp?thread=118828).\r\n\r\n    int value;\r\n    int location;\r\n    boolean overwrite;\r\n    doIt(value=13, location=47, overwrite=true);\r\nIt&#39;s verbose on the call site, but overall gives the lowest overhead.","title":"Named Parameter idiom in Java","body":"<p>You could also try to follow advice from <a href=\"http://www.artima.com/weblogs/viewpost.jsp?thread=118828\" rel=\"nofollow noreferrer\">here</a>.</p>\n<pre><code>int value;\nint location;\nboolean overwrite;\ndoIt(value=13, location=47, overwrite=true);\n</code></pre>\n<p>It's verbose on the call site, but overall gives the lowest overhead.</p>\n"},{"tags":[],"owner":{"account_id":4777549,"reputation":957,"user_id":3860254,"display_name":"Alex"},"down_vote_count":1,"up_vote_count":30,"is_accepted":false,"score":29,"last_activity_date":1437664021,"creation_date":1437664021,"answer_id":31591305,"question_id":1988016,"body_markdown":"Java 8 style:\r\n\r\n    public class Person {\r\n    \tString name;\r\n    \tint age;\r\n    \r\n    \tprivate Person(String name, int age) {\r\n    \t\tthis.name = name;\r\n    \t\tthis.age = age;\r\n    \t}\r\n    \r\n    \tstatic PersonWaitingForName create() {\r\n    \t\treturn name -&gt; age -&gt; new Person(name, age);\r\n    \t}\r\n    \r\n    \tstatic interface PersonWaitingForName {\r\n    \t\tPersonWaitingForAge name(String name);\r\n    \t}\r\n    \r\n    \tstatic interface PersonWaitingForAge {\r\n    \t\tPerson age(int age);\r\n    \t}\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \r\n    \t\tPerson charlotte = Person.create()\r\n    \t\t\t.name(&quot;Charlotte&quot;)\r\n    \t\t\t.age(25);\r\n    \r\n    \t}\r\n    }\r\n\r\n - named parameters\r\n - fix order of arguments\r\n - static check -&gt; no nameless Person possible\r\n - hard to switch arguments of same type by accident (like it is possible in telescop constructors)\r\n\r\n","title":"Named Parameter idiom in Java","body":"<p>Java 8 style:</p>\n\n<pre><code>public class Person {\n    String name;\n    int age;\n\n    private Person(String name, int age) {\n        this.name = name;\n        this.age = age;\n    }\n\n    static PersonWaitingForName create() {\n        return name -&gt; age -&gt; new Person(name, age);\n    }\n\n    static interface PersonWaitingForName {\n        PersonWaitingForAge name(String name);\n    }\n\n    static interface PersonWaitingForAge {\n        Person age(int age);\n    }\n\n    public static void main(String[] args) {\n\n        Person charlotte = Person.create()\n            .name(\"Charlotte\")\n            .age(25);\n\n    }\n}\n</code></pre>\n\n<ul>\n<li>named parameters</li>\n<li>fix order of arguments</li>\n<li>static check -> no nameless Person possible</li>\n<li>hard to switch arguments of same type by accident (like it is possible in telescop constructors)</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":1567087,"reputation":7993,"user_id":1455622,"accept_rate":65,"display_name":"Scheintod"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1442428403,"creation_date":1442428403,"answer_id":32616123,"question_id":1988016,"body_markdown":"This is a variant of the `Builder` Pattern as described by Lawrence above.\r\n\r\nI find myself using this a lot (at the apropriate places).\r\n\r\nThe main difference is, that in this case the Builder is *immuatable*. This has the advantage that it can be *reused* and is thread-safe.\r\n\r\nSo you can use this to make one *default Builder* and then in the various places where you need it you can configure it and build your object.\r\n\r\nThis makes most sense, if you are building the same object over and over again, because then you can make the builder static and don&#39;t have to worry about changing it&#39;s settings.\r\n\r\nOn the other hand if you have to build objects with changing paramaters this has quiet some overhead. (but hey, you can combine static / dynamic generation with custom `build` methods)\r\n\r\nHere is the example code: \r\n\r\n\r\n\tpublic class Car {\r\n\t\t\r\n\t\tpublic enum Color { white, red, green, blue, black };\r\n\t\t\r\n\t\tprivate final String brand;\r\n\t\tprivate final String name;\r\n\t\tprivate final Color color;\r\n\t\tprivate final int speed;\r\n\t\r\n\t\tprivate Car( CarBuilder builder ){\r\n\t\t\tthis.brand = builder.brand;\r\n\t\t\tthis.color = builder.color;\r\n\t\t\tthis.speed = builder.speed;\r\n\t\t\tthis.name = builder.name;\r\n\t\t}\r\n\r\n\t\tpublic static CarBuilder with() {\r\n\t\t\treturn DEFAULT;\r\n\t\t}\r\n\t\t\r\n\t\tprivate static final CarBuilder DEFAULT = new CarBuilder(\r\n\t\t\t\tnull, null, Color.white, 130\r\n\t\t);\r\n\t\t\r\n\t\tpublic static class CarBuilder {\r\n\t\t\t\r\n\t\t\tfinal String brand;\r\n\t\t\tfinal String name;\r\n\t\t\tfinal Color color;\r\n\t\t\tfinal int speed;\r\n\t\t\r\n\t\t\tprivate CarBuilder( String brand, String name, Color color, int speed ) {\r\n\t\t\t\tthis.brand = brand;\r\n\t\t\t\tthis.name = name;\r\n\t\t\t\tthis.color = color;\r\n\t\t\t\tthis.speed = speed;\r\n\t\t\t}\r\n\t\t\tpublic CarBuilder brand( String newBrand ) {\r\n\t\t\t\treturn new CarBuilder( newBrand, name, color, speed );\r\n\t\t\t}\r\n\t\t\tpublic CarBuilder name( String newName ) {\r\n\t\t\t\treturn new CarBuilder( brand, newName, color, speed );\r\n\t\t\t}\r\n\t\t\tpublic CarBuilder color( Color newColor ) {\r\n\t\t\t\treturn new CarBuilder( brand, name, newColor, speed );\r\n\t\t\t}\r\n\t\t\tpublic CarBuilder speed( int newSpeed ) {\r\n\t\t\t\treturn new CarBuilder( brand, name, color, newSpeed );\r\n\t\t\t}\r\n\t\t\tpublic Car build() {\r\n\t\t\t\treturn new Car( this );\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tpublic static void main( String [] args ) {\r\n\t\t\t\r\n\t\t\tCar porsche = Car.with()\r\n\t\t\t\t\t.brand( &quot;Porsche&quot; )\r\n\t\t\t\t\t.name( &quot;Carrera&quot; )\r\n\t\t\t\t\t.color( Color.red )\r\n\t\t\t\t\t.speed( 270 )\r\n\t\t\t\t\t.build()\r\n\t\t\t\t\t;\r\n\t\t\t\r\n\t\t\t// -- or with one default builder\r\n\t\t\t\r\n\t\t\tCarBuilder ASSEMBLY_LINE = Car.with()\r\n\t\t\t\t\t.brand( &quot;Jeep&quot; )\r\n\t\t\t\t\t.name( &quot;Cherokee&quot; )\r\n\t\t\t\t\t.color( Color.green )\r\n\t\t\t\t\t.speed( 180 )\r\n\t\t\t\t\t;\r\n\t\t\t\r\n\t\t\tfor( ;; ) ASSEMBLY_LINE.build();\r\n\t\t\t\r\n\t\t\t// -- or with custom default builder:\r\n\t\t\t\r\n\t\t\tCarBuilder MERCEDES = Car.with()\r\n\t\t\t\t\t.brand( &quot;Mercedes&quot; )\r\n\t\t\t\t\t.color( Color.black )\r\n\t\t\t\t\t;\r\n\t\t\t\r\n\t\t\tCar c230 = MERCEDES.name( &quot;C230&quot; ).speed( 180 ).build(),\r\n\t\t\t    clk = MERCEDES.name( &quot;CLK&quot; ).speed( 240 ).build();\r\n\t\t\t\r\n\t\t}\r\n\t}","title":"Named Parameter idiom in Java","body":"<p>This is a variant of the <code>Builder</code> Pattern as described by Lawrence above.</p>\n\n<p>I find myself using this a lot (at the apropriate places).</p>\n\n<p>The main difference is, that in this case the Builder is <em>immuatable</em>. This has the advantage that it can be <em>reused</em> and is thread-safe.</p>\n\n<p>So you can use this to make one <em>default Builder</em> and then in the various places where you need it you can configure it and build your object.</p>\n\n<p>This makes most sense, if you are building the same object over and over again, because then you can make the builder static and don't have to worry about changing it's settings.</p>\n\n<p>On the other hand if you have to build objects with changing paramaters this has quiet some overhead. (but hey, you can combine static / dynamic generation with custom <code>build</code> methods)</p>\n\n<p>Here is the example code: </p>\n\n<pre><code>public class Car {\n\n    public enum Color { white, red, green, blue, black };\n\n    private final String brand;\n    private final String name;\n    private final Color color;\n    private final int speed;\n\n    private Car( CarBuilder builder ){\n        this.brand = builder.brand;\n        this.color = builder.color;\n        this.speed = builder.speed;\n        this.name = builder.name;\n    }\n\n    public static CarBuilder with() {\n        return DEFAULT;\n    }\n\n    private static final CarBuilder DEFAULT = new CarBuilder(\n            null, null, Color.white, 130\n    );\n\n    public static class CarBuilder {\n\n        final String brand;\n        final String name;\n        final Color color;\n        final int speed;\n\n        private CarBuilder( String brand, String name, Color color, int speed ) {\n            this.brand = brand;\n            this.name = name;\n            this.color = color;\n            this.speed = speed;\n        }\n        public CarBuilder brand( String newBrand ) {\n            return new CarBuilder( newBrand, name, color, speed );\n        }\n        public CarBuilder name( String newName ) {\n            return new CarBuilder( brand, newName, color, speed );\n        }\n        public CarBuilder color( Color newColor ) {\n            return new CarBuilder( brand, name, newColor, speed );\n        }\n        public CarBuilder speed( int newSpeed ) {\n            return new CarBuilder( brand, name, color, newSpeed );\n        }\n        public Car build() {\n            return new Car( this );\n        }\n    }\n\n    public static void main( String [] args ) {\n\n        Car porsche = Car.with()\n                .brand( \"Porsche\" )\n                .name( \"Carrera\" )\n                .color( Color.red )\n                .speed( 270 )\n                .build()\n                ;\n\n        // -- or with one default builder\n\n        CarBuilder ASSEMBLY_LINE = Car.with()\n                .brand( \"Jeep\" )\n                .name( \"Cherokee\" )\n                .color( Color.green )\n                .speed( 180 )\n                ;\n\n        for( ;; ) ASSEMBLY_LINE.build();\n\n        // -- or with custom default builder:\n\n        CarBuilder MERCEDES = Car.with()\n                .brand( \"Mercedes\" )\n                .color( Color.black )\n                ;\n\n        Car c230 = MERCEDES.name( \"C230\" ).speed( 180 ).build(),\n            clk = MERCEDES.name( \"CLK\" ).speed( 240 ).build();\n\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":210642,"reputation":8430,"user_id":1347816,"accept_rate":78,"display_name":"LEMUEL  ADANE"},"down_vote_count":1,"up_vote_count":12,"is_accepted":false,"score":11,"last_activity_date":1623138844,"creation_date":1448182252,"answer_id":33853087,"question_id":1988016,"body_markdown":"I would like to point out that this style addresses both the **named parameter** and the **properties** features without the **get** and **set** prefix which other language have. Its not conventional in Java realm but its **simpler and shorter**, especially if you have handled other languages. \r\n  \r\n    class Person {\r\n        String name;\r\n        int age;\r\n   \r\n        // name property\r\n        // getter\r\n        public String name() { return name; }\r\n\r\n        // setter\r\n        public Person name(String val)  { \r\n            name = val;\r\n            return this;\r\n        }\r\n\r\n        // age property\r\n        // getter\r\n        public int age() { return age; }\r\n\r\n        // setter\r\n        public Person age(int val) {\r\n           age = val;\r\n           return this;\r\n        }\r\n\r\n        public static void main(String[] args) {\r\n      \r\n            // addresses named parameter\r\n            Person jacobi = new Person().name(&quot;Jacobi Adane&quot;).age(3);\r\n      \r\n            // addresses property style\r\n            System.out.println(jacobi.name());\r\n            System.out.println(jacobi.age());\r\n      \r\n            // updates property values\r\n            jacobi.name(&quot;Lemuel Jacobi Adane&quot;);\r\n            jacobi.age(4);\r\n\r\n            System.out.println(jacobi.name());\r\n            System.out.println(jacobi.age());\r\n        }\r\n    }\r\n","title":"Named Parameter idiom in Java","body":"<p>I would like to point out that this style addresses both the <strong>named parameter</strong> and the <strong>properties</strong> features without the <strong>get</strong> and <strong>set</strong> prefix which other language have. Its not conventional in Java realm but its <strong>simpler and shorter</strong>, especially if you have handled other languages.</p>\n<pre><code>class Person {\n    String name;\n    int age;\n\n    // name property\n    // getter\n    public String name() { return name; }\n\n    // setter\n    public Person name(String val)  { \n        name = val;\n        return this;\n    }\n\n    // age property\n    // getter\n    public int age() { return age; }\n\n    // setter\n    public Person age(int val) {\n       age = val;\n       return this;\n    }\n\n    public static void main(String[] args) {\n  \n        // addresses named parameter\n        Person jacobi = new Person().name(&quot;Jacobi Adane&quot;).age(3);\n  \n        // addresses property style\n        System.out.println(jacobi.name());\n        System.out.println(jacobi.age());\n  \n        // updates property values\n        jacobi.name(&quot;Lemuel Jacobi Adane&quot;);\n        jacobi.age(4);\n\n        System.out.println(jacobi.name());\n        System.out.println(jacobi.age());\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3946608,"reputation":139,"user_id":3258949,"display_name":"Vic"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1471193418,"creation_date":1471191547,"answer_id":38944133,"question_id":1988016,"body_markdown":"Using Java 8&#39;s lambdas you can get even closer to *real* named parameters. \r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    foo($ -&gt; {$.foo = -10; $.bar = &quot;hello&quot;; $.array = new int[]{1, 2, 3, 4};});\r\n\r\nDo note that this probably violates a couple dozen &quot;java best practices&quot; (like anything that makes use of the `$` symbol).\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    public class Main {\r\n      public static void main(String[] args) {\r\n        // Usage\r\n        foo($ -&gt; {$.foo = -10; $.bar = &quot;hello&quot;; $.array = new int[]{1, 2, 3, 4};});\r\n        // Compare to roughly &quot;equivalent&quot; python call\r\n        // foo(foo = -10, bar = &quot;hello&quot;, array = [1, 2, 3, 4])\r\n      }\r\n\r\n      // Your parameter holder\r\n      public static class $foo {\r\n        private $foo() {}\r\n\r\n        public int foo = 2;\r\n        public String bar = &quot;test&quot;;\r\n        public int[] array = new int[]{};\r\n      }\r\n      \r\n      // Some boilerplate logic\r\n      public static void foo(Consumer&lt;$foo&gt; c) {\r\n        $foo foo = new $foo();\r\n        c.accept(foo);\r\n        foo_impl(foo);\r\n      }\r\n      \r\n      // Method with named parameters\r\n      private static void foo_impl($foo par) {\r\n        // Do something with your parameters\r\n        System.out.println(&quot;foo: &quot; + par.foo + &quot;, bar: &quot; + par.bar + &quot;, array: &quot; + Arrays.toString(par.array));\r\n      }\r\n    }\r\n\r\nPros: \r\n\r\n - Considerably shorter than any builder pattern I&#39;ve seen so far\r\n - Works for both methods and constructors\r\n - Completely type safe\r\n - It looks very close to actual named parameters in other programming languages\r\n - It&#39;s about as safe as your typical builder pattern (can set parameters multiple times)\r\n\r\nCons:\r\n \r\n - Your boss will probably lynch you for this\r\n - It&#39;s harder to tell what&#39;s going on","title":"Named Parameter idiom in Java","body":"<p>Using Java 8's lambdas you can get even closer to <em>real</em> named parameters. </p>\n\n<pre class=\"lang-java prettyprint-override\"><code>foo($ -&gt; {$.foo = -10; $.bar = \"hello\"; $.array = new int[]{1, 2, 3, 4};});\n</code></pre>\n\n<p>Do note that this probably violates a couple dozen \"java best practices\" (like anything that makes use of the <code>$</code> symbol).</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public class Main {\n  public static void main(String[] args) {\n    // Usage\n    foo($ -&gt; {$.foo = -10; $.bar = \"hello\"; $.array = new int[]{1, 2, 3, 4};});\n    // Compare to roughly \"equivalent\" python call\n    // foo(foo = -10, bar = \"hello\", array = [1, 2, 3, 4])\n  }\n\n  // Your parameter holder\n  public static class $foo {\n    private $foo() {}\n\n    public int foo = 2;\n    public String bar = \"test\";\n    public int[] array = new int[]{};\n  }\n\n  // Some boilerplate logic\n  public static void foo(Consumer&lt;$foo&gt; c) {\n    $foo foo = new $foo();\n    c.accept(foo);\n    foo_impl(foo);\n  }\n\n  // Method with named parameters\n  private static void foo_impl($foo par) {\n    // Do something with your parameters\n    System.out.println(\"foo: \" + par.foo + \", bar: \" + par.bar + \", array: \" + Arrays.toString(par.array));\n  }\n}\n</code></pre>\n\n<p>Pros: </p>\n\n<ul>\n<li>Considerably shorter than any builder pattern I've seen so far</li>\n<li>Works for both methods and constructors</li>\n<li>Completely type safe</li>\n<li>It looks very close to actual named parameters in other programming languages</li>\n<li>It's about as safe as your typical builder pattern (can set parameters multiple times)</li>\n</ul>\n\n<p>Cons:</p>\n\n<ul>\n<li>Your boss will probably lynch you for this</li>\n<li>It's harder to tell what's going on</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":445017,"reputation":1103,"user_id":837189,"display_name":"scott"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1513820978,"creation_date":1513820978,"answer_id":47916808,"question_id":1988016,"body_markdown":"Any solution in Java is likely going to be pretty verbose, but it&#39;s worth mentioning that tools like [Google AutoValues][1] and [Immutables][2] will generate builder classes for you automatically using JDK compile time annotation processing.\r\n\r\nFor my case, I wanted named parameters to use in a Java enum, so a builder pattern wouldn&#39;t work because enum instances can&#39;t be instantiated by other classes. I came up with an approach similar @deamon&#39;s answer but adds compile-time checking of parameter ordering (at the expense of more code)\r\n\r\nHere&#39;s client code:\r\n\r\n    Person p = new Person( age(16), weight(100), heightInches(65) );\r\n\r\nAnd the implementation:\r\n\r\n    class Person {\r\n      static class TypedContainer&lt;T&gt; {\r\n        T val;\r\n        TypedContainer(T val) { this.val = val; }\r\n      }\r\n      static Age age(int age) { return new Age(age); }\r\n      static class Age extends TypedContainer&lt;Integer&gt; {\r\n        Age(Integer age) { super(age); }\r\n      }\r\n      static Weight weight(int weight) { return new Weight(weight); }\r\n      static class Weight extends TypedContainer&lt;Integer&gt; {\r\n        Weight(Integer weight) { super(weight); }\r\n      }\r\n      static Height heightInches(int height) { return new Height(height); }\r\n      static class Height extends TypedContainer&lt;Integer&gt; {\r\n        Height(Integer height) { super(height); }\r\n      }\r\n\r\n      private final int age;\r\n      private final int weight;\r\n      private final int height;\r\n\r\n      Person(Age age, Weight weight, Height height) {\r\n        this.age = age.val;\r\n        this.weight = weight.val;\r\n        this.height = height.val;\r\n      }\r\n      public int getAge() { return age; }\r\n      public int getWeight() { return weight; }\r\n      public int getHeight() { return height; }\r\n    }\r\n\r\n\r\n  [1]: https://github.com/google/auto/tree/master/value\r\n  [2]: https://immutables.github.io/","title":"Named Parameter idiom in Java","body":"<p>Any solution in Java is likely going to be pretty verbose, but it's worth mentioning that tools like <a href=\"https://github.com/google/auto/tree/master/value\" rel=\"nofollow noreferrer\">Google AutoValues</a> and <a href=\"https://immutables.github.io/\" rel=\"nofollow noreferrer\">Immutables</a> will generate builder classes for you automatically using JDK compile time annotation processing.</p>\n\n<p>For my case, I wanted named parameters to use in a Java enum, so a builder pattern wouldn't work because enum instances can't be instantiated by other classes. I came up with an approach similar @deamon's answer but adds compile-time checking of parameter ordering (at the expense of more code)</p>\n\n<p>Here's client code:</p>\n\n<pre><code>Person p = new Person( age(16), weight(100), heightInches(65) );\n</code></pre>\n\n<p>And the implementation:</p>\n\n<pre><code>class Person {\n  static class TypedContainer&lt;T&gt; {\n    T val;\n    TypedContainer(T val) { this.val = val; }\n  }\n  static Age age(int age) { return new Age(age); }\n  static class Age extends TypedContainer&lt;Integer&gt; {\n    Age(Integer age) { super(age); }\n  }\n  static Weight weight(int weight) { return new Weight(weight); }\n  static class Weight extends TypedContainer&lt;Integer&gt; {\n    Weight(Integer weight) { super(weight); }\n  }\n  static Height heightInches(int height) { return new Height(height); }\n  static class Height extends TypedContainer&lt;Integer&gt; {\n    Height(Integer height) { super(height); }\n  }\n\n  private final int age;\n  private final int weight;\n  private final int height;\n\n  Person(Age age, Weight weight, Height height) {\n    this.age = age.val;\n    this.weight = weight.val;\n    this.height = height.val;\n  }\n  public int getAge() { return age; }\n  public int getWeight() { return weight; }\n  public int getHeight() { return height; }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":386394,"reputation":9197,"user_id":744133,"accept_rate":57,"display_name":"YoYo"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1521427978,"creation_date":1521426281,"answer_id":49354948,"question_id":1988016,"body_markdown":"@irreputable came up with a nice solution. However - it might leave your Class instance in a invalid state, as no validation and consistency checking will happen. Hence I prefer to combine this with the Builder solution, avoiding the extra subclass to be created, although it would still subclass the builder class. Additionally, because the extra builder class makes it more verbose, I added one more method using a lambda. I added some of the other builder approaches for completeness.\r\n\r\nStarting with a class as follows:\r\n\r\n    public class Foo {\r\n      static public class Builder {\r\n        public int size;\r\n        public Color color;\r\n        public String name;\r\n        public Builder() { size = 0; color = Color.RED; name = null; }\r\n        private Builder self() { return this; }\r\n\r\n        public Builder size(int size) {this.size = size; return self();}\r\n        public Builder color(Color color) {this.color = color; return self();}\r\n        public Builder name(String name) {this.name = name; return self();}\r\n\r\n        public Foo build() {return new Foo(this);}\r\n      }\r\n      \r\n      private final int size;\r\n      private final Color color;\r\n      private final String name;\r\n      \r\n      public Foo(Builder b) {\r\n        this.size = b.size;\r\n        this.color = b.color;\r\n        this.name = b.name;\r\n      }\r\n      \r\n      public Foo(java.util.function.Consumer&lt;Builder&gt; bc) {\r\n        Builder b = new Builder();\r\n        bc.accept(b);\r\n        this.size = b.size;\r\n        this.color = b.color;\r\n        this.name = b.name;\r\n      }\r\n        \r\n      static public Builder with() {\r\n        return new Builder();\r\n      }\r\n      \r\n      public int getSize() { return this.size; }\r\n      public Color getColor() { return this.color; }  \r\n      public String getName() { return this.name; }  \r\n      \r\n    }\r\n\r\nThen using this applying the different methods:\r\n\r\n    Foo m1 = new Foo(\r\n      new Foo.Builder ()\r\n      .size(1)\r\n      .color(BLUE)\r\n      .name(&quot;Fred&quot;)\r\n    );\r\n    \r\n    Foo m2 = new Foo.Builder()\r\n      .size(1)\r\n      .color(BLUE)\r\n      .name(&quot;Fred&quot;)\r\n      .build();\r\n    \r\n    Foo m3 = Foo.with()\r\n      .size(1)\r\n      .color(BLUE)\r\n      .name(&quot;Fred&quot;)\r\n      .build();\r\n    \r\n    Foo m4 = new Foo(\r\n      new Foo.Builder() {{\r\n        size = 1;\r\n        color = BLUE;\r\n        name = &quot;Fred&quot;;\r\n      }}\r\n    );\r\n    \r\n    Foo m5 = new Foo(\r\n      (b)-&gt;{\r\n        b.size = 1;\r\n        b.color = BLUE;\r\n        b.name = &quot;Fred&quot;;\r\n      }\r\n    );\r\n\r\nIt looks like in part a total rip-off from what @LaurenceGonsalves already posted, but you will see the small difference in convention chosen.\r\n\r\nI am wonder, if JLS would ever implement named parameters, how they would do it? Would they be extending on one of the existing idioms by providing a short-form support for it? Also how does Scala support named parameters?\r\n\r\nHmmm - enough to research, and maybe a new question.\r\n","title":"Named Parameter idiom in Java","body":"<p>@irreputable came up with a nice solution. However - it might leave your Class instance in a invalid state, as no validation and consistency checking will happen. Hence I prefer to combine this with the Builder solution, avoiding the extra subclass to be created, although it would still subclass the builder class. Additionally, because the extra builder class makes it more verbose, I added one more method using a lambda. I added some of the other builder approaches for completeness.</p>\n\n<p>Starting with a class as follows:</p>\n\n<pre><code>public class Foo {\n  static public class Builder {\n    public int size;\n    public Color color;\n    public String name;\n    public Builder() { size = 0; color = Color.RED; name = null; }\n    private Builder self() { return this; }\n\n    public Builder size(int size) {this.size = size; return self();}\n    public Builder color(Color color) {this.color = color; return self();}\n    public Builder name(String name) {this.name = name; return self();}\n\n    public Foo build() {return new Foo(this);}\n  }\n\n  private final int size;\n  private final Color color;\n  private final String name;\n\n  public Foo(Builder b) {\n    this.size = b.size;\n    this.color = b.color;\n    this.name = b.name;\n  }\n\n  public Foo(java.util.function.Consumer&lt;Builder&gt; bc) {\n    Builder b = new Builder();\n    bc.accept(b);\n    this.size = b.size;\n    this.color = b.color;\n    this.name = b.name;\n  }\n\n  static public Builder with() {\n    return new Builder();\n  }\n\n  public int getSize() { return this.size; }\n  public Color getColor() { return this.color; }  \n  public String getName() { return this.name; }  \n\n}\n</code></pre>\n\n<p>Then using this applying the different methods:</p>\n\n<pre><code>Foo m1 = new Foo(\n  new Foo.Builder ()\n  .size(1)\n  .color(BLUE)\n  .name(\"Fred\")\n);\n\nFoo m2 = new Foo.Builder()\n  .size(1)\n  .color(BLUE)\n  .name(\"Fred\")\n  .build();\n\nFoo m3 = Foo.with()\n  .size(1)\n  .color(BLUE)\n  .name(\"Fred\")\n  .build();\n\nFoo m4 = new Foo(\n  new Foo.Builder() {{\n    size = 1;\n    color = BLUE;\n    name = \"Fred\";\n  }}\n);\n\nFoo m5 = new Foo(\n  (b)-&gt;{\n    b.size = 1;\n    b.color = BLUE;\n    b.name = \"Fred\";\n  }\n);\n</code></pre>\n\n<p>It looks like in part a total rip-off from what @LaurenceGonsalves already posted, but you will see the small difference in convention chosen.</p>\n\n<p>I am wonder, if JLS would ever implement named parameters, how they would do it? Would they be extending on one of the existing idioms by providing a short-form support for it? Also how does Scala support named parameters?</p>\n\n<p>Hmmm - enough to research, and maybe a new question.</p>\n"},{"tags":[],"owner":{"account_id":1479307,"reputation":3972,"user_id":1389023,"display_name":"Istvan Devai"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1533139473,"creation_date":1533139473,"answer_id":51637774,"question_id":1988016,"body_markdown":"You can use project Lombok&#39;s [@Builder annotation][1] to simulate named parameters in Java. This will generate a builder for you which you can use to create new instances of any class (both classes you&#39;ve written and those coming from external libraries).\r\n\r\nThis is how to enable it on a class:\r\n\r\n    @Getter\r\n    @Builder\r\n    public class User {\r\n        private final Long id;\r\n        private final String name;\r\n    }\r\n\r\nAfterwards you can use this by:\r\n\r\n    User userInstance = User.builder()\r\n        .id(1L)\r\n        .name(&quot;joe&quot;)\r\n        .build();\r\n\r\nIf you&#39;d like to create such a Builder for a class coming from a library, create an annotated static method like this:\r\n\r\n    class UserBuilder {\r\n        @Builder(builderMethodName = &quot;builder&quot;)\r\n        public static LibraryUser newLibraryUser(Long id, String name) {\r\n            return new LibraryUser(id, name);\r\n        }\r\n      }\r\n\r\nThis will generate a method named &quot;builder&quot; which can be called by:\r\n\r\n    LibraryUser user = UserBuilder.builder()\r\n        .id(1L)\r\n        .name(&quot;joe&quot;)\r\n        .build();\r\n\r\n  [1]: https://projectlombok.org/features/Builder","title":"Named Parameter idiom in Java","body":"<p>You can use project Lombok's <a href=\"https://projectlombok.org/features/Builder\" rel=\"nofollow noreferrer\">@Builder annotation</a> to simulate named parameters in Java. This will generate a builder for you which you can use to create new instances of any class (both classes you've written and those coming from external libraries).</p>\n\n<p>This is how to enable it on a class:</p>\n\n<pre><code>@Getter\n@Builder\npublic class User {\n    private final Long id;\n    private final String name;\n}\n</code></pre>\n\n<p>Afterwards you can use this by:</p>\n\n<pre><code>User userInstance = User.builder()\n    .id(1L)\n    .name(\"joe\")\n    .build();\n</code></pre>\n\n<p>If you'd like to create such a Builder for a class coming from a library, create an annotated static method like this:</p>\n\n<pre><code>class UserBuilder {\n    @Builder(builderMethodName = \"builder\")\n    public static LibraryUser newLibraryUser(Long id, String name) {\n        return new LibraryUser(id, name);\n    }\n  }\n</code></pre>\n\n<p>This will generate a method named \"builder\" which can be called by:</p>\n\n<pre><code>LibraryUser user = UserBuilder.builder()\n    .id(1L)\n    .name(\"joe\")\n    .build();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1140418,"reputation":5502,"user_id":1124509,"accept_rate":53,"display_name":"Reto H&#246;hener"},"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1534844315,"creation_date":1534844315,"answer_id":51945792,"question_id":1988016,"body_markdown":"I feel like the &quot;comment-workaround&quot; deserves it&#39;s own answer (hidden in existing answers and mentioned in comments here).\r\n\r\n    someMethod(/* width */ 1024, /* height */ 768);","title":"Named Parameter idiom in Java","body":"<p>I feel like the \"comment-workaround\" deserves it's own answer (hidden in existing answers and mentioned in comments here).</p>\n\n<pre><code>someMethod(/* width */ 1024, /* height */ 768);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":494969,"reputation":866,"user_id":1152525,"display_name":"Ben"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1609300127,"creation_date":1609300127,"answer_id":65501792,"question_id":1988016,"body_markdown":"Here is a compiler-checked Builder pattern. Caveats:\r\n\r\n* this can&#39;t prevent double assignment of an argument\r\n* you can&#39;t have a nice `.build()` method\r\n* one generic parameter per field\r\n\r\nSo you need something outside the class that will fail if not passed `Builder&lt;Yes, Yes, Yes&gt;`. See the `getSum` static method as an example.\r\n\r\n```java\r\nclass No {}\r\nclass Yes {}\r\n\r\nclass Builder&lt;K1, K2, K3&gt; {\r\n  int arg1, arg2, arg3;\r\n\r\n  Builder() {}\r\n\r\n  static Builder&lt;No, No, No&gt; make() {\r\n    return new Builder&lt;No, No, No&gt;();\r\n  }\r\n\r\n  @SuppressWarnings(&quot;unchecked&quot;)\r\n  Builder&lt;Yes, K2, K3&gt; arg1(int val) {\r\n    arg1 = val;\r\n    return (Builder&lt;Yes, K2, K3&gt;) this;\r\n  }\r\n\r\n  @SuppressWarnings(&quot;unchecked&quot;)\r\n  Builder&lt;K1, Yes, K3&gt; arg2(int val) {\r\n    arg2 = val;\r\n    return (Builder&lt;K1, Yes, K3&gt;) this;\r\n  }\r\n\r\n  @SuppressWarnings(&quot;unchecked&quot;)\r\n  Builder&lt;K1, K2, Yes&gt; arg3(int val) {\r\n    this.arg3 = val;\r\n    return (Builder&lt;K1, K2, Yes&gt;) this;\r\n  }\r\n\r\n  static int getSum(Builder&lt;Yes, Yes, Yes&gt; build) {\r\n    return build.arg1 + build.arg2 + build.arg3;\r\n  }\r\n\r\n  public static void main(String[] args) {\r\n    // Compiles!\r\n    int v1 = getSum(make().arg1(44).arg3(22).arg2(11));\r\n    // Builder.java:40: error: incompatible types:\r\n    // Builder&lt;Yes,No,Yes&gt; cannot be converted to Builder&lt;Yes,Yes,Yes&gt;\r\n    int v2 = getSum(make().arg1(44).arg3(22));\r\n    System.out.println(&quot;Got: &quot; + v1 + &quot; and &quot; + v2);\r\n  }\r\n}\r\n```\r\n\r\n**Caveats explained**. Why no build method? The trouble is that it&#39;s going to be in the `Builder` class, and it will be parameterized with `K1, K2, K3`, etc. As the method itself has to compile, everything it calls must compile. So, generally, we can&#39;t put a compilation test in a method of the class itself.\r\n\r\nFor a similar reason, we can&#39;t prevent double assignment using a builder model.","title":"Named Parameter idiom in Java","body":"<p>Here is a compiler-checked Builder pattern. Caveats:</p>\n<ul>\n<li>this can't prevent double assignment of an argument</li>\n<li>you can't have a nice <code>.build()</code> method</li>\n<li>one generic parameter per field</li>\n</ul>\n<p>So you need something outside the class that will fail if not passed <code>Builder&lt;Yes, Yes, Yes&gt;</code>. See the <code>getSum</code> static method as an example.</p>\n<pre class=\"lang-java prettyprint-override\"><code>class No {}\nclass Yes {}\n\nclass Builder&lt;K1, K2, K3&gt; {\n  int arg1, arg2, arg3;\n\n  Builder() {}\n\n  static Builder&lt;No, No, No&gt; make() {\n    return new Builder&lt;No, No, No&gt;();\n  }\n\n  @SuppressWarnings(&quot;unchecked&quot;)\n  Builder&lt;Yes, K2, K3&gt; arg1(int val) {\n    arg1 = val;\n    return (Builder&lt;Yes, K2, K3&gt;) this;\n  }\n\n  @SuppressWarnings(&quot;unchecked&quot;)\n  Builder&lt;K1, Yes, K3&gt; arg2(int val) {\n    arg2 = val;\n    return (Builder&lt;K1, Yes, K3&gt;) this;\n  }\n\n  @SuppressWarnings(&quot;unchecked&quot;)\n  Builder&lt;K1, K2, Yes&gt; arg3(int val) {\n    this.arg3 = val;\n    return (Builder&lt;K1, K2, Yes&gt;) this;\n  }\n\n  static int getSum(Builder&lt;Yes, Yes, Yes&gt; build) {\n    return build.arg1 + build.arg2 + build.arg3;\n  }\n\n  public static void main(String[] args) {\n    // Compiles!\n    int v1 = getSum(make().arg1(44).arg3(22).arg2(11));\n    // Builder.java:40: error: incompatible types:\n    // Builder&lt;Yes,No,Yes&gt; cannot be converted to Builder&lt;Yes,Yes,Yes&gt;\n    int v2 = getSum(make().arg1(44).arg3(22));\n    System.out.println(&quot;Got: &quot; + v1 + &quot; and &quot; + v2);\n  }\n}\n</code></pre>\n<p><strong>Caveats explained</strong>. Why no build method? The trouble is that it's going to be in the <code>Builder</code> class, and it will be parameterized with <code>K1, K2, K3</code>, etc. As the method itself has to compile, everything it calls must compile. So, generally, we can't put a compilation test in a method of the class itself.</p>\n<p>For a similar reason, we can't prevent double assignment using a builder model.</p>\n"},{"tags":[],"owner":{"account_id":956645,"reputation":1249,"user_id":981820,"accept_rate":90,"display_name":"Next Developer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1630348548,"creation_date":1630348548,"answer_id":68988862,"question_id":1988016,"body_markdown":"You can imitate named parameters applying this pattern:\r\n\r\n```\r\npublic static class CarParameters {\r\n        \r\n    // to make it shorter getters and props are omitted\r\n        \r\n    public ModelParameter setName(String name) {\r\n        this.name = name;\r\n        return new ModelParameter();\r\n    }\r\n    public class ModelParameter {\r\n        public PriceParameter setModel(String model) {\r\n            CarParameters.this.model = model;\r\n            return new PriceParameter();\r\n        }\r\n    }\r\n    public class PriceParameter {\r\n        public YearParameter setPrice(double price) {\r\n            CarParameters.this.price = price;\r\n            return new YearParameter();\r\n        }\r\n    }\r\n    public class YearParameter {\r\n        public ColorParameter setYear(int year) {\r\n            CarParameters.this.year = year;\r\n            return new ColorParameter();\r\n        }\r\n    }\r\n    public class ColorParameter {\r\n        public CarParameters setColor(Color color) {\r\n            CarParameters.this.color = color;\r\n            return new CarParameters();\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nand then you can pass it to your method as this:\r\n\r\n```\r\nfactory.create(new CarParameters()\r\n        .setName(&quot;Ford&quot;)\r\n        .setModel(&quot;Focus&quot;)\r\n        .setPrice(20000)\r\n        .setYear(2011)\r\n        .setColor(BLUE));\r\n```\r\n\r\nYou can read more here https://medium.com/@ivorobioff/named-parameters-in-java-9072862cfc8c","title":"Named Parameter idiom in Java","body":"<p>You can imitate named parameters applying this pattern:</p>\n<pre><code>public static class CarParameters {\n        \n    // to make it shorter getters and props are omitted\n        \n    public ModelParameter setName(String name) {\n        this.name = name;\n        return new ModelParameter();\n    }\n    public class ModelParameter {\n        public PriceParameter setModel(String model) {\n            CarParameters.this.model = model;\n            return new PriceParameter();\n        }\n    }\n    public class PriceParameter {\n        public YearParameter setPrice(double price) {\n            CarParameters.this.price = price;\n            return new YearParameter();\n        }\n    }\n    public class YearParameter {\n        public ColorParameter setYear(int year) {\n            CarParameters.this.year = year;\n            return new ColorParameter();\n        }\n    }\n    public class ColorParameter {\n        public CarParameters setColor(Color color) {\n            CarParameters.this.color = color;\n            return new CarParameters();\n        }\n    }\n}\n</code></pre>\n<p>and then you can pass it to your method as this:</p>\n<pre><code>factory.create(new CarParameters()\n        .setName(&quot;Ford&quot;)\n        .setModel(&quot;Focus&quot;)\n        .setPrice(20000)\n        .setYear(2011)\n        .setColor(BLUE));\n</code></pre>\n<p>You can read more here <a href=\"https://medium.com/@ivorobioff/named-parameters-in-java-9072862cfc8c\" rel=\"nofollow noreferrer\">https://medium.com/@ivorobioff/named-parameters-in-java-9072862cfc8c</a></p>\n"},{"tags":[],"owner":{"account_id":24144674,"reputation":11,"user_id":18110467,"display_name":"mmarkholt"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1643897348,"creation_date":1643897348,"answer_id":70972737,"question_id":1988016,"body_markdown":"Now that we&#39;re all on Java 17 ;-), using records is a super-easy way to imitate this idiom:\r\n\r\n    public class OrderTemplate() {\r\n        private int tradeSize, limitDistance, backoffDistance;\r\n    \r\n        public record TradeSize( int value ) {}\r\n        public record LimitDistance( int value ) {}\r\n        public record BackoffDistance( int value ) {}\r\n        public OrderTemplate( TradeSize t, LimitDistance d, BackoffDistance b ) {\r\n          this.tradeSize = t.value();\r\n          this.limitDistance = d.value();\r\n          this.backoffDistance = b.value();\r\n        }\r\n    }\r\n\r\nThen you can call:\r\n\r\n    var t = new OrderTemplate( new TradeSize(30), new LimitDistance(182), new BackoffDistance(85) );\r\n\r\nWhich I&#39;ve found extremely easy to read and I&#39;ve completely stopped getting all the int parameters mixed up (&quot;was it size first or distance...&quot;).\r\n\r\n\r\n","title":"Named Parameter idiom in Java","body":"<p>Now that we're all on Java 17 ;-), using records is a super-easy way to imitate this idiom:</p>\n<pre><code>public class OrderTemplate() {\n    private int tradeSize, limitDistance, backoffDistance;\n\n    public record TradeSize( int value ) {}\n    public record LimitDistance( int value ) {}\n    public record BackoffDistance( int value ) {}\n    public OrderTemplate( TradeSize t, LimitDistance d, BackoffDistance b ) {\n      this.tradeSize = t.value();\n      this.limitDistance = d.value();\n      this.backoffDistance = b.value();\n    }\n}\n</code></pre>\n<p>Then you can call:</p>\n<pre><code>var t = new OrderTemplate( new TradeSize(30), new LimitDistance(182), new BackoffDistance(85) );\n</code></pre>\n<p>Which I've found extremely easy to read and I've completely stopped getting all the int parameters mixed up (&quot;was it size first or distance...&quot;).</p>\n"},{"tags":[],"owner":{"account_id":11238249,"reputation":3,"user_id":8243552,"display_name":"user8243552"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1645068098,"creation_date":1645068098,"answer_id":71152102,"question_id":1988016,"body_markdown":"    package org.xxx.lang;\r\n    \r\n    /**\r\n     * A hack to work around the fact that java does not support\r\n     * named parameters in function calls.\r\n     * \r\n     * Its easy to swap a few String parameters, for example.\r\n     * Some IDEs are better than others than showing the parameter names.\r\n     * This will enforce a compiler error on an inadvertent swap. \r\n     *\r\n     * @param &lt;T&gt;\r\n     */\r\n    public class Datum&lt;T&gt; {\r\n    \r\n    \tpublic final T v;\r\n    \t\r\n    \tpublic Datum(T v) {\r\n    \t\tthis.v = v;\r\n    \t}\r\n    \t\r\n    \tpublic T v() {\r\n    \t\treturn v;\r\n    \t}\r\n    \t\r\n    \tpublic T value() {\r\n    \t\treturn v;\r\n    \t}\r\n    \t\r\n    \tpublic String toString() {\r\n    \t\treturn v.toString();\r\n    \t}\r\n    }\r\n\r\n# Example\r\n\r\n    class Catalog extends Datum&lt;String&gt; {\r\n    \t\tpublic Catalog(String v) {\r\n    \t\t\tsuper(v);\r\n    \t\t}\r\n    \t}\r\n    \r\n    \tclass Schema extends Datum&lt;String&gt; {\r\n    \t\tpublic Schema(String v) {\r\n    \t\t\tsuper(v);\r\n    \t\t}\r\n    \t}\r\n    class Meta {\r\n    \t\tpublic void getTables(String catalog, String schema, String tablePattern) {\r\n    \t\t\t// pseudo DatabaseMetaData.getTables();\r\n    \t\t}\r\n    \t}\r\n    \t\r\n    \tclass MetaChecked {\r\n    \t\tpublic void getTables(Catalog catalog, Schema schema, String tablePattern) {\r\n    \t\t\t// pseudo DatabaseMetaData.getTables();\r\n    \t\t}\r\n    \t}\r\n    \r\n    \t@Test\r\n    \tpublic void test() {\r\n    \t\tCatalog c = new Catalog(&quot;test&quot;);\r\n    \t\tassertEquals(&quot;test&quot;,c.v);\r\n    \t\tassertEquals(&quot;test&quot;,c.v());\r\n    \t\tassertEquals(&quot;test&quot;,c.value());\r\n    \t\tString t = c.v;\r\n    \t\tassertEquals(&quot;test&quot;,t);\r\n    \t}\r\n    \r\n    \tpublic void uncheckedExample() {\r\n    \t\tnew Meta().getTables(&quot;schema&quot;,&quot;catalog&quot;,&quot;%&quot;); \r\n    \t\tnew Meta().getTables(&quot;catalog&quot;,&quot;schema&quot;,&quot;%&quot;); // ooops\r\n    \t}\r\n    \t\r\n    \tpublic void checkedExample() {\r\n    \t\t // new MetaChecked().getTables(new Schema(&quot;schema&quot;),new Catalog(&quot;catalog&quot;),&quot;%&quot;); // won&#39;t compile\r\n    \t\t  new MetaChecked().getTables(new Catalog(&quot;catalog&quot;), new Schema(&quot;schema&quot;),&quot;%&quot;); \r\n    \t}","title":"Named Parameter idiom in Java","body":"<pre><code>package org.xxx.lang;\n\n/**\n * A hack to work around the fact that java does not support\n * named parameters in function calls.\n * \n * Its easy to swap a few String parameters, for example.\n * Some IDEs are better than others than showing the parameter names.\n * This will enforce a compiler error on an inadvertent swap. \n *\n * @param &lt;T&gt;\n */\npublic class Datum&lt;T&gt; {\n\n    public final T v;\n    \n    public Datum(T v) {\n        this.v = v;\n    }\n    \n    public T v() {\n        return v;\n    }\n    \n    public T value() {\n        return v;\n    }\n    \n    public String toString() {\n        return v.toString();\n    }\n}\n</code></pre>\n<h1>Example</h1>\n<pre><code>class Catalog extends Datum&lt;String&gt; {\n        public Catalog(String v) {\n            super(v);\n        }\n    }\n\n    class Schema extends Datum&lt;String&gt; {\n        public Schema(String v) {\n            super(v);\n        }\n    }\nclass Meta {\n        public void getTables(String catalog, String schema, String tablePattern) {\n            // pseudo DatabaseMetaData.getTables();\n        }\n    }\n    \n    class MetaChecked {\n        public void getTables(Catalog catalog, Schema schema, String tablePattern) {\n            // pseudo DatabaseMetaData.getTables();\n        }\n    }\n\n    @Test\n    public void test() {\n        Catalog c = new Catalog(&quot;test&quot;);\n        assertEquals(&quot;test&quot;,c.v);\n        assertEquals(&quot;test&quot;,c.v());\n        assertEquals(&quot;test&quot;,c.value());\n        String t = c.v;\n        assertEquals(&quot;test&quot;,t);\n    }\n\n    public void uncheckedExample() {\n        new Meta().getTables(&quot;schema&quot;,&quot;catalog&quot;,&quot;%&quot;); \n        new Meta().getTables(&quot;catalog&quot;,&quot;schema&quot;,&quot;%&quot;); // ooops\n    }\n    \n    public void checkedExample() {\n         // new MetaChecked().getTables(new Schema(&quot;schema&quot;),new Catalog(&quot;catalog&quot;),&quot;%&quot;); // won't compile\n          new MetaChecked().getTables(new Catalog(&quot;catalog&quot;), new Schema(&quot;schema&quot;),&quot;%&quot;); \n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":26090602,"reputation":1,"user_id":19787559,"display_name":"Antonio Morales"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1668648850,"creation_date":1668648850,"answer_id":74469152,"question_id":1988016,"body_markdown":"maybe can use this:\r\n\r\n    HashMapFlow&lt;String,Object&gt;  args2 = HashMapFlow.of( &quot;name&quot;, &quot;Aton&quot;, &quot;age&quot;, 21 );\r\n        Integer age = args2.get(&quot;age&quot;,51);\r\n        System.out.println(args2.get(&quot;name&quot;));\r\n        System.out.println(age);\r\n        System.out.println((Integer)args2.get(&quot;dayOfBirth&quot;,26));\r\n\r\nclass:\r\n```\r\nimport java.util.HashMap;\r\n\r\npublic class HashMapFlow&lt;K,V&gt; extends HashMap {\r\n\r\n    public static &lt;K, V&gt; HashMapFlow&lt;K, V&gt; of(Object... args) {\r\n        HashMapFlow&lt;K, V&gt; map = new HashMapFlow();\r\n        for( int i = 0; i &lt; args.length; i+=2) {\r\n            map.put((K)args[i], (V)args[i+1]);\r\n        }\r\n        return map;\r\n    }\r\n\r\n    public &lt;T&gt; T get(Object key, V defaultValue) {\r\n        V result = (V)get(key);\r\n        if( result == null ) {\r\n            result = defaultValue;\r\n        }\r\n        return (T)result;\r\n    }\r\n\r\n    public HashMapFlow add(K key, V value) {\r\n        put(key,value);\r\n        return this;\r\n    }\r\n}\r\n\r\n","title":"Named Parameter idiom in Java","body":"<p>maybe can use this:</p>\n<pre><code>HashMapFlow&lt;String,Object&gt;  args2 = HashMapFlow.of( &quot;name&quot;, &quot;Aton&quot;, &quot;age&quot;, 21 );\n    Integer age = args2.get(&quot;age&quot;,51);\n    System.out.println(args2.get(&quot;name&quot;));\n    System.out.println(age);\n    System.out.println((Integer)args2.get(&quot;dayOfBirth&quot;,26));\n</code></pre>\n<p>class:</p>\n<pre><code>import java.util.HashMap;\n\npublic class HashMapFlow&lt;K,V&gt; extends HashMap {\n\n    public static &lt;K, V&gt; HashMapFlow&lt;K, V&gt; of(Object... args) {\n        HashMapFlow&lt;K, V&gt; map = new HashMapFlow();\n        for( int i = 0; i &lt; args.length; i+=2) {\n            map.put((K)args[i], (V)args[i+1]);\n        }\n        return map;\n    }\n\n    public &lt;T&gt; T get(Object key, V defaultValue) {\n        V result = (V)get(key);\n        if( result == null ) {\n            result = defaultValue;\n        }\n        return (T)result;\n    }\n\n    public HashMapFlow add(K key, V value) {\n        put(key,value);\n        return this;\n    }\n}\n\n</code></pre>\n"}],"owner":{"account_id":86575,"reputation":2988,"user_id":240656,"accept_rate":88,"display_name":"Red Hyena"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":82127,"favorite_count":0,"down_vote_count":1,"up_vote_count":105,"accepted_answer_id":1988035,"answer_count":21,"score":104,"last_activity_date":1689859587,"creation_date":1262326713,"question_id":1988016,"body_markdown":"How to implement Named Parameter idiom in Java? (especially for constructors)\r\n\r\nI am looking for an Objective-C like syntax and not like the one used in JavaBeans.\r\n\r\nA small code example would be fine.","title":"Named Parameter idiom in Java","body":"<p>How to implement Named Parameter idiom in Java? (especially for constructors)</p>\n<p>I am looking for an Objective-C like syntax and not like the one used in JavaBeans.</p>\n<p>A small code example would be fine.</p>\n"},{"tags":["java","image","pdf","background","pdfbox"],"comments":[{"owner":{"account_id":255529,"reputation":17950,"user_id":535646,"accept_rate":40,"display_name":"Tilman Hausherr"},"score":0,"creation_date":1689859428,"post_id":76729430,"comment_id":135275133,"body_markdown":"Your content is really two stamp annotations, and these are on top AFAIK.","body":"Your content is really two stamp annotations, and these are on top AFAIK."},{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":0,"creation_date":1689872663,"post_id":76729430,"comment_id":135278283,"body_markdown":"Indeed, the static content of the page in your original PDF is a single space character. The tables you see are bitmap images overlaying the static content as appearances of stamp annotations. If you want your image to cover even page annotations, add it in a new annotation at the end of the annotation list of the page.","body":"Indeed, the static content of the page in your original PDF is a single space character. The tables you see are bitmap images overlaying the static content as appearances of stamp annotations. If you want your image to cover even page annotations, add it in a new annotation at the end of the annotation list of the page."}],"owner":{"account_id":29047930,"reputation":1,"user_id":22251358,"display_name":"Yash Patel"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689859139,"creation_date":1689852906,"question_id":76729430,"body_markdown":"I am using apache pdfbox jar to embed image to attached PDF with below JAVA code:\r\n\r\n```\r\n\r\nimport org.apache.pdfbox.io.MemoryUsageSetting;\r\nimport org.apache.pdfbox.pdmodel.PDDocument;\r\nimport org.apache.pdfbox.pdmodel.PDPage;\r\nimport org.apache.pdfbox.pdmodel.PDPageContentStream;\r\nimport org.apache.pdfbox.pdmodel.graphics.image.JPEGFactory;\r\nimport org.apache.pdfbox.pdmodel.graphics.image.PDImageXObject;\r\n\r\nimport javax.imageio.ImageIO;\r\nimport java.awt.image.BufferedImage;\r\nimport java.io.File;\r\nimport java.io.FileInputStream;\r\n\r\npublic class importImageToPDF1 {\r\n    public static void main(String[] args) throws Exception {\r\n        PDDocument pdDocument = null;\r\n        try {\r\n            String sourceFilePath = &quot;D:\\\\files\\\\sourceFile.pdf&quot;;\r\n            String destinationFilePath = &quot;D:\\\\files\\\\outputFile.pdf&quot;;\r\n            String imagePath = &quot;D:\\\\files\\\\image.png&quot;;\r\n\r\n            pdDocument = PDDocument.load(new File(sourceFilePath), MemoryUsageSetting.setupTempFileOnly());\r\n            pdDocument.setAllSecurityToBeRemoved(true);\r\n\r\n            PDPage pdPage = pdDocument.getPage(0);\r\n\r\n            BufferedImage bufferedImage = ImageIO.read(new FileInputStream(imagePath));\r\n            PDPageContentStream pageContentStream = new PDPageContentStream(pdDocument, pdPage, PDPageContentStream.AppendMode.APPEND, true, true);\r\n            pageContentStream.saveGraphicsState();\r\n\r\n            PDImageXObject image = JPEGFactory.createFromImage(pdDocument, bufferedImage);\r\n\r\n            pageContentStream.drawImage(image, 10, 730, 100, 100);\r\n            pageContentStream.restoreGraphicsState();\r\n            pageContentStream.close();\r\n            pdDocument.save(new File(destinationFilePath));\r\n            pdDocument.close();\r\n        } catch (Exception e) {\r\n            throw e;\r\n        } finally {\r\n            if (pdDocument != null) {\r\n                pdDocument.close();\r\n            }\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n  \r\nHere is link for source PDF:  \r\n&lt;https://drive.google.com/drive/folders/1gP1EIso0Ww4sw-cliVVEb_YI6cys2kEj?usp=sharing&gt;\r\n\r\nwith this code image embedded in background and hide behind specific element. Embedded image should be in foreground of pdf. that means image should be viewed properly.   \r\n  \r\nI want image to be display in foreground above all the elements in PDF.\r\n\r\nNote: Image getting viewed properly after embedding in other PDFs, only having issue with attached pdf.","title":"Issue: Image hiding behind PDF element while embedding through Apache pdfbox library","body":"<p>I am using apache pdfbox jar to embed image to attached PDF with below JAVA code:</p>\n<pre><code>\nimport org.apache.pdfbox.io.MemoryUsageSetting;\nimport org.apache.pdfbox.pdmodel.PDDocument;\nimport org.apache.pdfbox.pdmodel.PDPage;\nimport org.apache.pdfbox.pdmodel.PDPageContentStream;\nimport org.apache.pdfbox.pdmodel.graphics.image.JPEGFactory;\nimport org.apache.pdfbox.pdmodel.graphics.image.PDImageXObject;\n\nimport javax.imageio.ImageIO;\nimport java.awt.image.BufferedImage;\nimport java.io.File;\nimport java.io.FileInputStream;\n\npublic class importImageToPDF1 {\n    public static void main(String[] args) throws Exception {\n        PDDocument pdDocument = null;\n        try {\n            String sourceFilePath = &quot;D:\\\\files\\\\sourceFile.pdf&quot;;\n            String destinationFilePath = &quot;D:\\\\files\\\\outputFile.pdf&quot;;\n            String imagePath = &quot;D:\\\\files\\\\image.png&quot;;\n\n            pdDocument = PDDocument.load(new File(sourceFilePath), MemoryUsageSetting.setupTempFileOnly());\n            pdDocument.setAllSecurityToBeRemoved(true);\n\n            PDPage pdPage = pdDocument.getPage(0);\n\n            BufferedImage bufferedImage = ImageIO.read(new FileInputStream(imagePath));\n            PDPageContentStream pageContentStream = new PDPageContentStream(pdDocument, pdPage, PDPageContentStream.AppendMode.APPEND, true, true);\n            pageContentStream.saveGraphicsState();\n\n            PDImageXObject image = JPEGFactory.createFromImage(pdDocument, bufferedImage);\n\n            pageContentStream.drawImage(image, 10, 730, 100, 100);\n            pageContentStream.restoreGraphicsState();\n            pageContentStream.close();\n            pdDocument.save(new File(destinationFilePath));\n            pdDocument.close();\n        } catch (Exception e) {\n            throw e;\n        } finally {\n            if (pdDocument != null) {\n                pdDocument.close();\n            }\n        }\n    }\n}\n</code></pre>\n<p>Here is link for source PDF:<br />\n<a href=\"https://drive.google.com/drive/folders/1gP1EIso0Ww4sw-cliVVEb_YI6cys2kEj?usp=sharing\" rel=\"nofollow noreferrer\">https://drive.google.com/drive/folders/1gP1EIso0Ww4sw-cliVVEb_YI6cys2kEj?usp=sharing</a></p>\n<p>with this code image embedded in background and hide behind specific element. Embedded image should be in foreground of pdf. that means image should be viewed properly.</p>\n<p>I want image to be display in foreground above all the elements in PDF.</p>\n<p>Note: Image getting viewed properly after embedding in other PDFs, only having issue with attached pdf.</p>\n"},{"tags":["java","mysql","testing","dbunit","spring-test-dbunit"],"answers":[{"tags":[],"owner":{"account_id":49636,"reputation":352,"user_id":147905,"display_name":"Aleksi"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1543587125,"creation_date":1543587125,"answer_id":53559173,"question_id":52845001,"body_markdown":"One potential solution is to define your own DataTypeFactory and use that. I did it to support the PostgreSQL JSONB datatype, something similar could be made for MySQL.\r\n\r\n\r\n    class NewPostgresqlDataTypeFactory : PostgresqlDataTypeFactory() {\r\n        override fun createDataType(sqlType: Int, sqlTypeName: String?): DataType {\r\n            return when (sqlTypeName) {\r\n                &quot;jsonb&quot; -&gt; return JsonbDataType()\r\n                else -&gt; super.createDataType(sqlType, sqlTypeName)\r\n            }\r\n        }\r\n    \r\n        class JsonbDataType : AbstractDataType(&quot;jsonb&quot;, Types.OTHER, String::class.java, false) {\r\n            override fun typeCast(obj: Any?): Any {\r\n                return obj.toString()\r\n            }\r\n    \r\n            override fun getSqlValue(column: Int, resultSet: ResultSet): Any {\r\n                return resultSet.getString(column)\r\n            }\r\n    \r\n            override fun setSqlValue(value: Any?, column: Int, statement: PreparedStatement) {\r\n                val jsonObj = PGobject()\r\n                jsonObj.type = &quot;json&quot;\r\n                jsonObj.value = value?.toString()\r\n                statement.setObject(column, jsonObj)\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n","title":"DbUnit and JSON column type support","body":"<p>One potential solution is to define your own DataTypeFactory and use that. I did it to support the PostgreSQL JSONB datatype, something similar could be made for MySQL.</p>\n\n<pre><code>class NewPostgresqlDataTypeFactory : PostgresqlDataTypeFactory() {\n    override fun createDataType(sqlType: Int, sqlTypeName: String?): DataType {\n        return when (sqlTypeName) {\n            \"jsonb\" -&gt; return JsonbDataType()\n            else -&gt; super.createDataType(sqlType, sqlTypeName)\n        }\n    }\n\n    class JsonbDataType : AbstractDataType(\"jsonb\", Types.OTHER, String::class.java, false) {\n        override fun typeCast(obj: Any?): Any {\n            return obj.toString()\n        }\n\n        override fun getSqlValue(column: Int, resultSet: ResultSet): Any {\n            return resultSet.getString(column)\n        }\n\n        override fun setSqlValue(value: Any?, column: Int, statement: PreparedStatement) {\n            val jsonObj = PGobject()\n            jsonObj.type = \"json\"\n            jsonObj.value = value?.toString()\n            statement.setObject(column, jsonObj)\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":145555,"reputation":21469,"user_id":355438,"display_name":"Ilya Serbis"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1556146622,"creation_date":1556146622,"answer_id":55839637,"question_id":52845001,"body_markdown":"In case someone needs it this is the Java version of [@Aleksi&#39;s solution][1] for the PostgreSQL JSONB datatype:\r\n\r\n    import org.dbunit.dataset.datatype.AbstractDataType;\r\n    import org.dbunit.dataset.datatype.DataType;\r\n    import org.dbunit.dataset.datatype.DataTypeException;\r\n    import org.dbunit.dataset.datatype.TypeCastException;\r\n    import org.dbunit.ext.postgresql.PostgresqlDataTypeFactory;\r\n    import org.postgresql.util.PGobject;\r\n\r\n    import java.sql.PreparedStatement;\r\n    import java.sql.ResultSet;\r\n    import java.sql.SQLException;\r\n    import java.sql.Types;\r\n\r\n    public class NewPostgresqlDataTypeFactory extends PostgresqlDataTypeFactory {\r\n        @Override\r\n        public DataType createDataType(int sqlType, String sqlTypeName) throws DataTypeException {\r\n            if (sqlTypeName.equals(&quot;jsonb&quot;)) {\r\n                return new JsonbDataType();\r\n            } else {\r\n                return super.createDataType(sqlType, sqlTypeName);\r\n            }\r\n        }\r\n\r\n        public static class JsonbDataType extends AbstractDataType {\r\n\r\n            public JsonbDataType() {\r\n                super(&quot;jsonb&quot;, Types.OTHER, String.class, false);\r\n            }\r\n\r\n            @Override\r\n            public Object typeCast(Object obj) throws TypeCastException {\r\n                return obj.toString();\r\n            }\r\n\r\n            @Override\r\n            public Object getSqlValue(int column, ResultSet resultSet) throws SQLException, TypeCastException {\r\n                return resultSet.getString(column);\r\n            }\r\n\r\n            @Override\r\n            public void setSqlValue(Object value,\r\n                                    int column,\r\n                                    PreparedStatement statement) throws SQLException, TypeCastException {\r\n                final PGobject jsonObj = new PGobject();\r\n                jsonObj.setType(&quot;json&quot;);\r\n                jsonObj.setValue(value == null ? null : value.toString());\r\n\r\n                statement.setObject(column, jsonObj);\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/53559173/355438","title":"DbUnit and JSON column type support","body":"<p>In case someone needs it this is the Java version of <a href=\"https://stackoverflow.com/a/53559173/355438\">@Aleksi's solution</a> for the PostgreSQL JSONB datatype:</p>\n\n<pre><code>import org.dbunit.dataset.datatype.AbstractDataType;\nimport org.dbunit.dataset.datatype.DataType;\nimport org.dbunit.dataset.datatype.DataTypeException;\nimport org.dbunit.dataset.datatype.TypeCastException;\nimport org.dbunit.ext.postgresql.PostgresqlDataTypeFactory;\nimport org.postgresql.util.PGobject;\n\nimport java.sql.PreparedStatement;\nimport java.sql.ResultSet;\nimport java.sql.SQLException;\nimport java.sql.Types;\n\npublic class NewPostgresqlDataTypeFactory extends PostgresqlDataTypeFactory {\n    @Override\n    public DataType createDataType(int sqlType, String sqlTypeName) throws DataTypeException {\n        if (sqlTypeName.equals(\"jsonb\")) {\n            return new JsonbDataType();\n        } else {\n            return super.createDataType(sqlType, sqlTypeName);\n        }\n    }\n\n    public static class JsonbDataType extends AbstractDataType {\n\n        public JsonbDataType() {\n            super(\"jsonb\", Types.OTHER, String.class, false);\n        }\n\n        @Override\n        public Object typeCast(Object obj) throws TypeCastException {\n            return obj.toString();\n        }\n\n        @Override\n        public Object getSqlValue(int column, ResultSet resultSet) throws SQLException, TypeCastException {\n            return resultSet.getString(column);\n        }\n\n        @Override\n        public void setSqlValue(Object value,\n                                int column,\n                                PreparedStatement statement) throws SQLException, TypeCastException {\n            final PGobject jsonObj = new PGobject();\n            jsonObj.setType(\"json\");\n            jsonObj.setValue(value == null ? null : value.toString());\n\n            statement.setObject(column, jsonObj);\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":29050703,"reputation":59,"user_id":22253592,"display_name":"Vitalii Dokalenko"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689859093,"creation_date":1689859093,"answer_id":76730328,"question_id":52845001,"body_markdown":"In addition to [@Ilya&#39;s answer][1], here is the similar solution for H2 JSON datatype:\r\n\r\n```java\r\nimport java.sql.PreparedStatement;\r\nimport java.sql.ResultSet;\r\nimport java.sql.SQLException;\r\nimport java.sql.Types;\r\n\r\nimport org.dbunit.dataset.datatype.AbstractDataType;\r\nimport org.dbunit.dataset.datatype.DataType;\r\nimport org.dbunit.dataset.datatype.DataTypeException;\r\nimport org.dbunit.ext.h2.H2DataTypeFactory;\r\nimport org.h2.value.Value;\r\nimport org.h2.value.ValueJson;\r\n\r\npublic class CustomH2DataTypeFactory extends H2DataTypeFactory {\r\n\r\n        @Override\r\n        public DataType createDataType(int sqlType, String sqlTypeName, String tableName, String columnName)\r\n            throws DataTypeException {\r\n            if (sqlType == 1111 &amp;&amp; sqlTypeName.toLowerCase().startsWith(&quot;json&quot;)) {\r\n                return new JsonDataType();\r\n            } else {\r\n                return super.createDataType(sqlType, sqlTypeName, tableName, columnName);\r\n            }\r\n        }\r\n\r\n        public class JsonDataType extends AbstractDataType {\r\n\r\n            public JsonDataType() {\r\n                super(&quot;json&quot;, Types.OTHER, String.class, false);\r\n            }\r\n\r\n            @Override\r\n            public Object typeCast(Object value) {\r\n                return value.toString();\r\n            }\r\n\r\n            @Override\r\n            public Object getSqlValue(int column, ResultSet resultSet) throws SQLException {\r\n                return resultSet.getString(column);\r\n            }\r\n\r\n            @Override\r\n            public void setSqlValue(Object value, int column, PreparedStatement statement) throws SQLException {\r\n                Value object = ValueJson.fromJson(value.toString());\r\n                statement.setObject(column, object);\r\n            }\r\n        }\r\n    }\r\n```\r\n\r\n  [1]: https://stackoverflow.com/a/55839637/22253592","title":"DbUnit and JSON column type support","body":"<p>In addition to <a href=\"https://stackoverflow.com/a/55839637/22253592\">@Ilya's answer</a>, here is the similar solution for H2 JSON datatype:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.sql.PreparedStatement;\nimport java.sql.ResultSet;\nimport java.sql.SQLException;\nimport java.sql.Types;\n\nimport org.dbunit.dataset.datatype.AbstractDataType;\nimport org.dbunit.dataset.datatype.DataType;\nimport org.dbunit.dataset.datatype.DataTypeException;\nimport org.dbunit.ext.h2.H2DataTypeFactory;\nimport org.h2.value.Value;\nimport org.h2.value.ValueJson;\n\npublic class CustomH2DataTypeFactory extends H2DataTypeFactory {\n\n        @Override\n        public DataType createDataType(int sqlType, String sqlTypeName, String tableName, String columnName)\n            throws DataTypeException {\n            if (sqlType == 1111 &amp;&amp; sqlTypeName.toLowerCase().startsWith(&quot;json&quot;)) {\n                return new JsonDataType();\n            } else {\n                return super.createDataType(sqlType, sqlTypeName, tableName, columnName);\n            }\n        }\n\n        public class JsonDataType extends AbstractDataType {\n\n            public JsonDataType() {\n                super(&quot;json&quot;, Types.OTHER, String.class, false);\n            }\n\n            @Override\n            public Object typeCast(Object value) {\n                return value.toString();\n            }\n\n            @Override\n            public Object getSqlValue(int column, ResultSet resultSet) throws SQLException {\n                return resultSet.getString(column);\n            }\n\n            @Override\n            public void setSqlValue(Object value, int column, PreparedStatement statement) throws SQLException {\n                Value object = ValueJson.fromJson(value.toString());\n                statement.setObject(column, object);\n            }\n        }\n    }\n</code></pre>\n"}],"owner":{"account_id":2045019,"reputation":645,"user_id":1825303,"display_name":"ADi3ek"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2677,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":55839637,"answer_count":3,"score":6,"last_activity_date":1689859093,"creation_date":1539730258,"question_id":52845001,"body_markdown":"I&#39;m wondering what&#39;s the best possible way to make DbUnit work with MySQL&#39;s JSON(B) type columns? We do have such columns here and there and whenever I am trying to feed the test data from XML file via `@DatabaseSetup` I get the NoSuchColumnException which prevents me form making of any sensible integration tests with entities or repos that deals with JSON:\r\n\r\n    org.dbunit.dataset.NoSuchColumnException: assistant_event.AEV_CONTEXT -  (Non-uppercase input column: aev_context) in ColumnNameToIndexes cache map. Note that the map&#39;s column names are NOT case sensitive.\r\n \r\nI get that this is because my `AEV_CONTEXT` column didn&#39;t get recognized because, well, it&#39;s a JSON column:\r\n\r\n    @Type(type = &quot;json&quot;)\r\n    @Column(name = &quot;aev_context&quot;, columnDefinition = &quot;json&quot;)\r\n    private Context context;\r\n\r\nHowever, I&#39;m getting a hard time while trying to workaround it. And, what&#39;s even more odd, I couldn&#39;t find such workaround anywhere here either! In fact, I don&#39;t event know if that&#39;s more Hibernate or DbUnit thing.\r\n\r\n**Is it really only me had this problem so far? Any advice would be much appreciated!**\r\n\r\nOh, and in case you wondering, that&#39;s how I get JSON support for Hibernate:\r\n\r\nhttps://vladmihalcea.com/how-to-map-json-objects-using-generic-hibernate-types/\r\n\r\n","title":"DbUnit and JSON column type support","body":"<p>I'm wondering what's the best possible way to make DbUnit work with MySQL's JSON(B) type columns? We do have such columns here and there and whenever I am trying to feed the test data from XML file via <code>@DatabaseSetup</code> I get the NoSuchColumnException which prevents me form making of any sensible integration tests with entities or repos that deals with JSON:</p>\n\n<pre><code>org.dbunit.dataset.NoSuchColumnException: assistant_event.AEV_CONTEXT -  (Non-uppercase input column: aev_context) in ColumnNameToIndexes cache map. Note that the map's column names are NOT case sensitive.\n</code></pre>\n\n<p>I get that this is because my <code>AEV_CONTEXT</code> column didn't get recognized because, well, it's a JSON column:</p>\n\n<pre><code>@Type(type = \"json\")\n@Column(name = \"aev_context\", columnDefinition = \"json\")\nprivate Context context;\n</code></pre>\n\n<p>However, I'm getting a hard time while trying to workaround it. And, what's even more odd, I couldn't find such workaround anywhere here either! In fact, I don't event know if that's more Hibernate or DbUnit thing.</p>\n\n<p><strong>Is it really only me had this problem so far? Any advice would be much appreciated!</strong></p>\n\n<p>Oh, and in case you wondering, that's how I get JSON support for Hibernate:</p>\n\n<p><a href=\"https://vladmihalcea.com/how-to-map-json-objects-using-generic-hibernate-types/\" rel=\"noreferrer\">https://vladmihalcea.com/how-to-map-json-objects-using-generic-hibernate-types/</a></p>\n"},{"tags":["java","hibernate","entitymanager"],"comments":[{"owner":{"account_id":9763630,"reputation":16595,"user_id":7237884,"display_name":"Panagiotis Bougioukos"},"score":0,"creation_date":1612193327,"post_id":65995241,"comment_id":116683235,"body_markdown":"If you run your tests based on a test database then you should be able to achieve that. Otherwise best case scenario you mock that entityManager. Don&#39;t see any other alternative","body":"If you run your tests based on a test database then you should be able to achieve that. Otherwise best case scenario you mock that entityManager. Don&#39;t see any other alternative"},{"owner":{"account_id":3013228,"reputation":205797,"user_id":2587435,"accept_rate":88,"display_name":"Paul Samsotha"},"score":0,"creation_date":1612194725,"post_id":65995241,"comment_id":116684018,"body_markdown":"You need to annotate the test class with the [Spring JUnit Runner](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/test/context/junit4/SpringJUnit4ClassRunner.html), otherwise it&#39;s just a normal test. You need Spring to tap into the testing framework. You do this by using the runner. See [this article](https://www.baeldung.com/junit-5-runwith) for example. And you inject the EntityManager not the EMFactory","body":"You need to annotate the test class with the <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/test/context/junit4/SpringJUnit4ClassRunner.html\" rel=\"nofollow noreferrer\">Spring JUnit Runner</a>, otherwise it&#39;s just a normal test. You need Spring to tap into the testing framework. You do this by using the runner. See <a href=\"https://www.baeldung.com/junit-5-runwith\" rel=\"nofollow noreferrer\">this article</a> for example. And you inject the EntityManager not the EMFactory"}],"owner":{"account_id":16646058,"reputation":1,"user_id":12030349,"display_name":"Jane"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":710,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689859078,"creation_date":1612192640,"question_id":65995241,"body_markdown":"This is my spring config based on hibernate. My problem is when I want to inject EntityManager in my test class. The problem is I get an exception that this.entitymanager is null and I don&#39;t know what to do with it. Does anybody have some idea what to do?\r\n\r\nJpaConfig:\r\n```\r\n@Configuration\r\npublic class JpaConfig {\r\n\r\n    @Bean\r\n    public LocalContainerEntityManagerFactoryBean createEMF(JpaVendorAdapter adapter){\r\n        LocalContainerEntityManagerFactoryBean emf = new LocalContainerEntityManagerFactoryBean();\r\n\r\n        Map&lt;String, String&gt; properties = new HashMap&lt;&gt;();\r\n        properties.put(&quot;javax.persistence.jdbc.url&quot;, &quot;jdbc:mysql://localhost:3306/shop?createDatabaseIfNotExist=true&amp;allowPublicKeyRetrieval=true&amp;useSSL=false&amp;serverTimezone=UTC&quot;);\r\n        properties.put(&quot;javax.persistence.jdbc.user&quot;, &quot;root&quot;);\r\n        properties.put(&quot;javax.persistence.jdbc.password&quot;, &quot;ErykSkoczylas1&quot;);\r\n        properties.put(&quot;javax.persistence.jdbc.driver&quot;, &quot;com.mysql.cj.jdbc.Driver&quot;);\r\n        properties.put(&quot;javax.persistence.schema-generation.database.action&quot;, &quot;drop-and-create&quot;);\r\n        emf.setPersistenceUnitName(&quot;shop-database&quot;);\r\n        emf.setJpaPropertyMap(properties);\r\n        emf.setJpaVendorAdapter(adapter);\r\n        emf.setPackagesToScan(&quot;com.database.models&quot;);\r\n        return emf;\r\n    }\r\n\r\n    @Bean\r\n    public JpaVendorAdapter createVendorAdapter() {\r\n        HibernateJpaVendorAdapter adapter = new HibernateJpaVendorAdapter();\r\n        adapter.setDatabase(Database.MYSQL);\r\n        adapter.setShowSql(true);\r\n        return adapter;\r\n    }\r\n\r\n    @Bean\r\n    public TransactionManager transactionManager(EntityManagerFactory entityManagerFactory) {\r\n        JpaTransactionManager jpaTransactionManager = new JpaTransactionManager();\r\n        jpaTransactionManager.setEntityManagerFactory(entityManagerFactory);\r\n        return jpaTransactionManager;\r\n    }\r\n}\r\n```\r\n\r\nTest class:\r\n```\r\npublic class CustomerServiceTest {\r\n    private AnnotationConfigApplicationContext ctx = new AnnotationConfigApplicationContext(SpringJpaApplication.class);\r\n    private CustomerService customerService = ctx.getBean(CustomerService.class);\r\n\r\n    @PersistenceUnit\r\n    private EntityManagerFactory entityManagerFactory;\r\n    private EntityManager entityManager;\r\n\r\n    @Test\r\n    public void method_addCustomerToDatabase_desc_CustomerServiceShouldAddCustomerToDatabaseAndShouldAddAddress() {\r\n        Address address1 = new Address(&quot;Poland&quot;, &quot;30-091&quot;, &quot;Cracow&quot;, &quot;street&quot;, 1);\r\n\r\n        Customer customer = new Customer(&quot;John&quot;, &quot;Smith&quot;, &quot;xyz@test.com&quot;, new Date(11111999L), &quot;password&quot;, false, address1);\r\n\r\n        customerService.addCustomerToDatabase(customer);\r\n\r\n        List&lt;Customer&gt; customers = findCustomers(customer);\r\n        List&lt;Address&gt; addresses = findAddresses(address1);\r\n        Address address2 = entityManager.find(Address.class, address1.getId());\r\n\r\n        deleteCustomerFromDatabase(customers.get(0).getId());\r\n        deleteAddressFromDatabase(addresses.get(0).getId());\r\n\r\n        assertEquals(1, addresses.size());\r\n        assertEquals(1, customers.size());\r\n        assertEquals(1, address2.getCustomers().size());\r\n    }\r\n```\r\n\r\nException:\r\n```\r\njava.lang.NullPointerException: Cannot invoke &quot;javax.persistence.EntityManager.getTransaction()&quot; because &quot;this.entityManager&quot; is null\r\n```","title":"How to inject EntityManager in test directory?","body":"<p>This is my spring config based on hibernate. My problem is when I want to inject EntityManager in my test class. The problem is I get an exception that this.entitymanager is null and I don't know what to do with it. Does anybody have some idea what to do?</p>\n<p>JpaConfig:</p>\n<pre><code>@Configuration\npublic class JpaConfig {\n\n    @Bean\n    public LocalContainerEntityManagerFactoryBean createEMF(JpaVendorAdapter adapter){\n        LocalContainerEntityManagerFactoryBean emf = new LocalContainerEntityManagerFactoryBean();\n\n        Map&lt;String, String&gt; properties = new HashMap&lt;&gt;();\n        properties.put(&quot;javax.persistence.jdbc.url&quot;, &quot;jdbc:mysql://localhost:3306/shop?createDatabaseIfNotExist=true&amp;allowPublicKeyRetrieval=true&amp;useSSL=false&amp;serverTimezone=UTC&quot;);\n        properties.put(&quot;javax.persistence.jdbc.user&quot;, &quot;root&quot;);\n        properties.put(&quot;javax.persistence.jdbc.password&quot;, &quot;ErykSkoczylas1&quot;);\n        properties.put(&quot;javax.persistence.jdbc.driver&quot;, &quot;com.mysql.cj.jdbc.Driver&quot;);\n        properties.put(&quot;javax.persistence.schema-generation.database.action&quot;, &quot;drop-and-create&quot;);\n        emf.setPersistenceUnitName(&quot;shop-database&quot;);\n        emf.setJpaPropertyMap(properties);\n        emf.setJpaVendorAdapter(adapter);\n        emf.setPackagesToScan(&quot;com.database.models&quot;);\n        return emf;\n    }\n\n    @Bean\n    public JpaVendorAdapter createVendorAdapter() {\n        HibernateJpaVendorAdapter adapter = new HibernateJpaVendorAdapter();\n        adapter.setDatabase(Database.MYSQL);\n        adapter.setShowSql(true);\n        return adapter;\n    }\n\n    @Bean\n    public TransactionManager transactionManager(EntityManagerFactory entityManagerFactory) {\n        JpaTransactionManager jpaTransactionManager = new JpaTransactionManager();\n        jpaTransactionManager.setEntityManagerFactory(entityManagerFactory);\n        return jpaTransactionManager;\n    }\n}\n</code></pre>\n<p>Test class:</p>\n<pre><code>public class CustomerServiceTest {\n    private AnnotationConfigApplicationContext ctx = new AnnotationConfigApplicationContext(SpringJpaApplication.class);\n    private CustomerService customerService = ctx.getBean(CustomerService.class);\n\n    @PersistenceUnit\n    private EntityManagerFactory entityManagerFactory;\n    private EntityManager entityManager;\n\n    @Test\n    public void method_addCustomerToDatabase_desc_CustomerServiceShouldAddCustomerToDatabaseAndShouldAddAddress() {\n        Address address1 = new Address(&quot;Poland&quot;, &quot;30-091&quot;, &quot;Cracow&quot;, &quot;street&quot;, 1);\n\n        Customer customer = new Customer(&quot;John&quot;, &quot;Smith&quot;, &quot;xyz@test.com&quot;, new Date(11111999L), &quot;password&quot;, false, address1);\n\n        customerService.addCustomerToDatabase(customer);\n\n        List&lt;Customer&gt; customers = findCustomers(customer);\n        List&lt;Address&gt; addresses = findAddresses(address1);\n        Address address2 = entityManager.find(Address.class, address1.getId());\n\n        deleteCustomerFromDatabase(customers.get(0).getId());\n        deleteAddressFromDatabase(addresses.get(0).getId());\n\n        assertEquals(1, addresses.size());\n        assertEquals(1, customers.size());\n        assertEquals(1, address2.getCustomers().size());\n    }\n</code></pre>\n<p>Exception:</p>\n<pre><code>java.lang.NullPointerException: Cannot invoke &quot;javax.persistence.EntityManager.getTransaction()&quot; because &quot;this.entityManager&quot; is null\n</code></pre>\n"},{"tags":["java","spring","tomcat"],"comments":[{"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"score":2,"creation_date":1678800929,"post_id":75733765,"comment_id":133600756,"body_markdown":"Memory could be exhausted.  Each thread is a heavyweight thing that requires 1MB of memory.  Other factors come into play: pre-fetch size, etc.  Being careful about what those threads are doing should be your biggest concern.  Non-blocking IO and lightweight Loom threads doing the work, like Betty, might be more performant.","body":"Memory could be exhausted.  Each thread is a heavyweight thing that requires 1MB of memory.  Other factors come into play: pre-fetch size, etc.  Being careful about what those threads are doing should be your biggest concern.  Non-blocking IO and lightweight Loom threads doing the work, like Betty, might be more performant."}],"answers":[{"tags":[],"owner":{"account_id":3489518,"reputation":315,"user_id":2919551,"display_name":"bendem"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679412673,"creation_date":1678801136,"answer_id":75733914,"question_id":75733765,"body_markdown":"My guess is that you are hitting some other limitation (memory, cpu, database latency) and that increasing the number of threads will not solve your problem, the amount of threads is very rarely the first problem you encounter.\r\n\r\nIf you are hitting memory bounds, increasing the amount of threads will increase memory usage, further increasing your problem.\r\n\r\nIf you are hitting CPU bounds, increasing the amount of threads will also further increase your problem.\r\n\r\nIf you are hitting IO bounds, and still have CPU and memory available, you might see improvements *if* there is no contention on IO already.\r\n\r\nYou need to setup monitoring and collect statistics about your running application. This article glances over useful metrics to collect: https://www.datadoghq.com/blog/tomcat-architecture-and-performance/.\r\n\r\nTo answer your question though, since you tagged your question as spring, the doc has the information you need:\r\n\r\nhttps://docs.spring.io/spring-boot/docs/current/reference/html/application-properties.html#application-properties.server.server.tomcat.threads.max\r\n\r\n```properties\r\nserver.tomcat.threads.max=250\r\n```","title":"How to properly set server.tomcat.threads.max","body":"<p>My guess is that you are hitting some other limitation (memory, cpu, database latency) and that increasing the number of threads will not solve your problem, the amount of threads is very rarely the first problem you encounter.</p>\n<p>If you are hitting memory bounds, increasing the amount of threads will increase memory usage, further increasing your problem.</p>\n<p>If you are hitting CPU bounds, increasing the amount of threads will also further increase your problem.</p>\n<p>If you are hitting IO bounds, and still have CPU and memory available, you might see improvements <em>if</em> there is no contention on IO already.</p>\n<p>You need to setup monitoring and collect statistics about your running application. This article glances over useful metrics to collect: <a href=\"https://www.datadoghq.com/blog/tomcat-architecture-and-performance/\" rel=\"nofollow noreferrer\">https://www.datadoghq.com/blog/tomcat-architecture-and-performance/</a>.</p>\n<p>To answer your question though, since you tagged your question as spring, the doc has the information you need:</p>\n<p><a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/application-properties.html#application-properties.server.server.tomcat.threads.max\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-boot/docs/current/reference/html/application-properties.html#application-properties.server.server.tomcat.threads.max</a></p>\n<pre><code>server.tomcat.threads.max=250\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17591339,"reputation":1,"user_id":12763143,"display_name":"Horschi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689858966,"creation_date":1689858966,"answer_id":76730309,"question_id":75733765,"body_markdown":"I think setting the max-threads or threads.max properties simply does not work.\r\n\r\nI have this in my application.properties:\r\n\r\n    server.tomcat.max-threads=250\r\n    server.tomcat.threads.max=250\r\n\r\nBut querying meterRegistry.get(&quot;tomcat.threads.config.max&quot;) always returns 200. \r\n\r\nCheck if the configuration really changes something, e.g. via JMX.","title":"How to properly set server.tomcat.threads.max","body":"<p>I think setting the max-threads or threads.max properties simply does not work.</p>\n<p>I have this in my application.properties:</p>\n<pre><code>server.tomcat.max-threads=250\nserver.tomcat.threads.max=250\n</code></pre>\n<p>But querying meterRegistry.get(&quot;tomcat.threads.config.max&quot;) always returns 200.</p>\n<p>Check if the configuration really changes something, e.g. via JMX.</p>\n"}],"owner":{"account_id":3702826,"reputation":683,"user_id":3082046,"accept_rate":50,"display_name":"xagaffar"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":747,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1689858966,"creation_date":1678800413,"question_id":75733765,"body_markdown":"Our app is running with default 200 threads, but that seems not to be enough at peak times.\r\nWe want to increase it, but not sure by how much. \r\n\r\nWhat things should be considered before setting `server.tomcat.threads.max`?\r\n\r\nWhat could happen if the value is set too high?\r\n\r\n\r\n\r\n","title":"How to properly set server.tomcat.threads.max","body":"<p>Our app is running with default 200 threads, but that seems not to be enough at peak times.\nWe want to increase it, but not sure by how much.</p>\n<p>What things should be considered before setting <code>server.tomcat.threads.max</code>?</p>\n<p>What could happen if the value is set too high?</p>\n"},{"tags":["java","spring","spring-boot","spring-batch"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1687417360,"post_id":76529264,"comment_id":134934407,"body_markdown":"And why wouldn&#39;t that work with RabbitMQ? Send request to queue (hence it will be triggered eventually). Send message that the job has been scheduled, from the controller. Works perfectly with RabbitMQ (or whatever message technology you choose).","body":"And why wouldn&#39;t that work with RabbitMQ? Send request to queue (hence it will be triggered eventually). Send message that the job has been scheduled, from the controller. Works perfectly with RabbitMQ (or whatever message technology you choose)."},{"owner":{"account_id":11257760,"reputation":1,"user_id":21793848,"display_name":"Favaz kc"},"score":0,"creation_date":1687418263,"post_id":76529264,"comment_id":134934572,"body_markdown":"RabbitMQ listener is triggered while a message entering the queue, even if an instance of the job is running. So it will cause running jobs concurrently.\n........It will work if the listener is wait until the current instance is finished.","body":"RabbitMQ listener is triggered while a message entering the queue, even if an instance of the job is running. So it will cause running jobs concurrently. ........It will work if the listener is wait until the current instance is finished."},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1687419009,"post_id":76529264,"comment_id":134934726,"body_markdown":"No it won&#39;t, not if you limit the listener side, set the concurrency to 1 and use a single thread for that specific listener. Also make sure that your Spring Batch job isn&#39;t configured with an async executor else it will still be fire and forget.","body":"No it won&#39;t, not if you limit the listener side, set the concurrency to 1 and use a single thread for that specific listener. Also make sure that your Spring Batch job isn&#39;t configured with an async executor else it will still be fire and forget."},{"owner":{"account_id":11257760,"reputation":1,"user_id":21793848,"display_name":"Favaz kc"},"score":0,"creation_date":1687435678,"post_id":76529264,"comment_id":134938305,"body_markdown":"Thanks Deinum, it worked as expected!.","body":"Thanks Deinum, it worked as expected!."}],"answers":[{"tags":[],"owner":{"account_id":15800151,"reputation":1,"user_id":11400897,"display_name":"Vladimir M"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689858125,"creation_date":1689858125,"answer_id":76730191,"question_id":76529264,"body_markdown":"You can limit threads by configurating ThreadPoolTaskExecutor which will work with this job\r\n```\r\n&lt;bean id=&quot;taskExecutor&quot;\r\n          class=&quot;org.springframework.scheduling.concurrent.ThreadPoolTaskExecutor&quot;\r\n          scope=&quot;step&quot;&gt;\r\n        &lt;property name=&quot;corePoolSize&quot; value=&quot;1&quot;/&gt;\r\n        &lt;property name=&quot;maxPoolSize&quot; value=&quot;1&quot;/&gt;\r\n    &lt;/bean&gt;\r\n```","title":"Spring Batch - Serve multiple requests to a single job one by one","body":"<p>You can limit threads by configurating ThreadPoolTaskExecutor which will work with this job</p>\n<pre><code>&lt;bean id=&quot;taskExecutor&quot;\n          class=&quot;org.springframework.scheduling.concurrent.ThreadPoolTaskExecutor&quot;\n          scope=&quot;step&quot;&gt;\n        &lt;property name=&quot;corePoolSize&quot; value=&quot;1&quot;/&gt;\n        &lt;property name=&quot;maxPoolSize&quot; value=&quot;1&quot;/&gt;\n    &lt;/bean&gt;\n</code></pre>\n"}],"owner":{"account_id":11257760,"reputation":1,"user_id":21793848,"display_name":"Favaz kc"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":207,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689858125,"creation_date":1687416778,"question_id":76529264,"body_markdown":"I have a Spring-batch job **ProductExport**, it may took 10s to complete.\r\n\r\n - **Current scenario**:Multiple requests from different clients to the same Job executes concurrently.\r\n - **Expected Scenario**:Execute one by one. Execution of next request starts only after finishing current request. If multiple request are there at same time they should wait in a **queue**.\r\n\r\n\r\nis there a way to implement this. Thanks in advance\r\n\r\nI have tried RabbitMQ for Spring AMQP but it cannot be integrated with Spring Batch in my case.\r\nBcz my ProductExport API must return a response message(Products will be exported to ..... Email) to FE before completing the batch process.\r\nThe result will later mailed to clients Email.","title":"Spring Batch - Serve multiple requests to a single job one by one","body":"<p>I have a Spring-batch job <strong>ProductExport</strong>, it may took 10s to complete.</p>\n<ul>\n<li><strong>Current scenario</strong>:Multiple requests from different clients to the same Job executes concurrently.</li>\n<li><strong>Expected Scenario</strong>:Execute one by one. Execution of next request starts only after finishing current request. If multiple request are there at same time they should wait in a <strong>queue</strong>.</li>\n</ul>\n<p>is there a way to implement this. Thanks in advance</p>\n<p>I have tried RabbitMQ for Spring AMQP but it cannot be integrated with Spring Batch in my case.\nBcz my ProductExport API must return a response message(Products will be exported to ..... Email) to FE before completing the batch process.\nThe result will later mailed to clients Email.</p>\n"},{"tags":["java","azure","selenium-webdriver"],"comments":[{"owner":{"account_id":12360572,"reputation":1730,"user_id":9014957,"accept_rate":17,"display_name":"pburgr"},"score":0,"creation_date":1689851425,"post_id":76729129,"comment_id":135273245,"body_markdown":"Waiting for element to be clickable will fail if the element is already clickable. In case of implicit wait usually no explicite waits are needed.","body":"Waiting for element to be clickable will fail if the element is already clickable. In case of implicit wait usually no explicite waits are needed."}],"owner":{"account_id":29056208,"reputation":1,"user_id":22257948,"display_name":"vijaya"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":67,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689857634,"creation_date":1689850299,"question_id":76729129,"body_markdown":"**The below is my code**\r\n````\r\nWebDriverWait wait = new WebDriverWait(driver,Duration.ofSeconds(60));\r\nWebElement EnterSearch = wait.until(ExpectedConditions.elementToBeClickable(By.cssSelector(&quot;input.search-input.search1&quot;)));\r\n\t\t        \r\ndriver.manage().timeouts().implicitlyWait(60, TimeUnit.SECONDS);\r\n\t\t      \r\nActions a10=new Actions(driver);\r\n\r\na10.moveToElement(EnterSearch) ;\r\n\r\na10.click().build().perform();\r\n````\r\n**below is my div and input element**\r\n````\r\n&lt;input _ngcontent-ynd-c699=&quot;&quot; class=&quot;search-input search1 d-none d-xl-block ng-tns-c699-7 ng-pristine ng-valid ng-touched&quot; placeholder=&quot;Type here to search...&quot;&gt;\r\n````\r\n**below is the error**\r\n````\r\n2023-07-20T10:12:43.7055102Z org.openqa.selenium.TimeoutException: Expected condition failed: waiting for element to be clickable: By.cssSelector: input.search-input.search1 (tried for 60 second(s) with 500 milliseconds interval)\r\n2023-07-20T10:12:43.7056907Z Build info: version: &#39;4.9.0&#39;, revision: &#39;d7057100a6&#39;\r\n2023-07-20T10:12:43.7057705Z System info: os.name: &#39;Windows Server 2019&#39;, os.arch: &#39;amd64&#39;, os.version: &#39;10.0&#39;, java.version: &#39;11.0.19&#39;\r\n2023-07-20T10:12:43.7057975Z Driver info: org.openqa.selenium.chrome.ChromeDriver\r\n2023-07-20T10:12:43.7058908Z Capabilities {acceptInsecureCerts: false, browserName: chrome, browserVersion: 115.0.5790.98, chrome: {chromedriverVersion: 114.0.5735.90 (386bc09e8f4f..., userDataDir: C:\\Windows\\SystemTemp\\scope...}, goog:chromeOptions: {debuggerAddress: localhost:61697}, networkConnectionEnabled: false, pageLoadStrategy: normal, platformName: WINDOWS, proxy: Proxy(), se:cdp: ws://localhost:61697/devtoo..., se:cdpVersion: 115.0.5790.98, setWindowRect: true, strictFileInteractability: false, timeouts: {implicit: 0, pageLoad: 300000, script: 30000}, unhandledPromptBehavior: dismiss and notify, webauthn:extension:credBlob: true, webauthn:extension:largeBlob: true, webauthn:extension:minPinLength: true, webauthn:extension:prf: true, webauthn:virtualAuthenticators: true}\r\n2023-07-20T10:12:43.7059858Z Session ID: 7abe6dbb89cf93e6c1921e65616f0f71\r\n````\r\n\r\n\r\n\r\n\r\nI have tried `JavaScriptExecutor` as well if I use that it is giving me `element interactable error`","title":"Selenium java test failing with azure pipeline and pass locally","body":"<p><strong>The below is my code</strong></p>\n<pre><code>WebDriverWait wait = new WebDriverWait(driver,Duration.ofSeconds(60));\nWebElement EnterSearch = wait.until(ExpectedConditions.elementToBeClickable(By.cssSelector(&quot;input.search-input.search1&quot;)));\n                \ndriver.manage().timeouts().implicitlyWait(60, TimeUnit.SECONDS);\n              \nActions a10=new Actions(driver);\n\na10.moveToElement(EnterSearch) ;\n\na10.click().build().perform();\n</code></pre>\n<p><strong>below is my div and input element</strong></p>\n<pre><code>&lt;input _ngcontent-ynd-c699=&quot;&quot; class=&quot;search-input search1 d-none d-xl-block ng-tns-c699-7 ng-pristine ng-valid ng-touched&quot; placeholder=&quot;Type here to search...&quot;&gt;\n</code></pre>\n<p><strong>below is the error</strong></p>\n<pre><code>2023-07-20T10:12:43.7055102Z org.openqa.selenium.TimeoutException: Expected condition failed: waiting for element to be clickable: By.cssSelector: input.search-input.search1 (tried for 60 second(s) with 500 milliseconds interval)\n2023-07-20T10:12:43.7056907Z Build info: version: '4.9.0', revision: 'd7057100a6'\n2023-07-20T10:12:43.7057705Z System info: os.name: 'Windows Server 2019', os.arch: 'amd64', os.version: '10.0', java.version: '11.0.19'\n2023-07-20T10:12:43.7057975Z Driver info: org.openqa.selenium.chrome.ChromeDriver\n2023-07-20T10:12:43.7058908Z Capabilities {acceptInsecureCerts: false, browserName: chrome, browserVersion: 115.0.5790.98, chrome: {chromedriverVersion: 114.0.5735.90 (386bc09e8f4f..., userDataDir: C:\\Windows\\SystemTemp\\scope...}, goog:chromeOptions: {debuggerAddress: localhost:61697}, networkConnectionEnabled: false, pageLoadStrategy: normal, platformName: WINDOWS, proxy: Proxy(), se:cdp: ws://localhost:61697/devtoo..., se:cdpVersion: 115.0.5790.98, setWindowRect: true, strictFileInteractability: false, timeouts: {implicit: 0, pageLoad: 300000, script: 30000}, unhandledPromptBehavior: dismiss and notify, webauthn:extension:credBlob: true, webauthn:extension:largeBlob: true, webauthn:extension:minPinLength: true, webauthn:extension:prf: true, webauthn:virtualAuthenticators: true}\n2023-07-20T10:12:43.7059858Z Session ID: 7abe6dbb89cf93e6c1921e65616f0f71\n</code></pre>\n<p>I have tried <code>JavaScriptExecutor</code> as well if I use that it is giving me <code>element interactable error</code></p>\n"},{"tags":["java","android","dao","observers"],"comments":[{"owner":{"account_id":353320,"reputation":6609,"user_id":690952,"display_name":"Selvin"},"score":0,"creation_date":1689857681,"post_id":76730115,"comment_id":135274689,"body_markdown":"*Is it possible to have LIVEDATA observer that trigger only when specific columns changes?* No, you cannot do this","body":"<i>Is it possible to have LIVEDATA observer that trigger only when specific columns changes?</i> No, you cannot do this"},{"owner":{"account_id":353320,"reputation":6609,"user_id":690952,"display_name":"Selvin"},"score":0,"creation_date":1689857831,"post_id":76730115,"comment_id":135274721,"body_markdown":"Why there are 3 fav columns ? Just move fav marking to different table ...","body":"Why there are 3 fav columns ? Just move fav marking to different table ..."},{"owner":{"account_id":11779404,"reputation":764,"user_id":8619606,"display_name":"Kirguduck"},"score":0,"creation_date":1689867346,"post_id":76730115,"comment_id":135277227,"body_markdown":"Does this answer your question? [LiveData update on object field change](https://stackoverflow.com/questions/48020377/livedata-update-on-object-field-change)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/48020377/livedata-update-on-object-field-change\">LiveData update on object field change</a>"},{"owner":{"account_id":353320,"reputation":6609,"user_id":690952,"display_name":"Selvin"},"score":0,"creation_date":1689870549,"post_id":76730115,"comment_id":135277927,"body_markdown":"@Kirguduck no, OP doesn&#39;t own LiveData is a part of room implementation it is returned via generated code","body":"@Kirguduck no, OP doesn&#39;t own LiveData is a part of room implementation it is returned via generated code"},{"owner":{"account_id":16040627,"reputation":31,"user_id":11577121,"display_name":"Marco Jacobo"},"score":0,"creation_date":1689937629,"post_id":76730115,"comment_id":135287128,"body_markdown":"Thanks @Selvin, I like the idea of making a different table for the fav columns. I&#39;m gona give a try to this. Will let you know the results. Regards","body":"Thanks @Selvin, I like the idea of making a different table for the fav columns. I&#39;m gona give a try to this. Will let you know the results. Regards"},{"owner":{"account_id":16040627,"reputation":31,"user_id":11577121,"display_name":"Marco Jacobo"},"score":0,"creation_date":1690697063,"post_id":76730115,"comment_id":135387837,"body_markdown":"Moving fav to a different table doesn&#39;t make any change,... the query still depends on data from both tables,... so, it triggers again in changes to the child table.","body":"Moving fav to a different table doesn&#39;t make any change,... the query still depends on data from both tables,... so, it triggers again in changes to the child table."},{"owner":{"account_id":16040627,"reputation":31,"user_id":11577121,"display_name":"Marco Jacobo"},"score":0,"creation_date":1690697106,"post_id":76730115,"comment_id":135387843,"body_markdown":"@Kirguduk, thanks for the recommendation but this is a different issue.","body":"@Kirguduk, thanks for the recommendation but this is a different issue."}],"owner":{"account_id":16040627,"reputation":31,"user_id":11577121,"display_name":"Marco Jacobo"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689857573,"creation_date":1689857573,"question_id":76730115,"body_markdown":"Thanks in advance for any advice. I have a query from a roomdatabase, only some columns are exposed by the interface to the user (~ 3 out of 7). The query does not include favorite columns. \r\n\r\nSo, there is another query to let the user mark the data of a single row as favorite or not favorite...\r\n\r\nThe issue is the first query is redone every time the user check or uncheck the favorite flag that belongs to the second query. The point here is the first query is livedata that doesnt include the fav columns in the database. So,...\r\n\r\nI do not understand why and /I do not know how to resolve it. Any help, would be very appreciated. Thanks! \r\n\r\n\r\nI have this query in DAO \r\n\r\n\r\n        @Query( &quot; SELECT   &quot;+COLUMN_NUM+\r\n                &quot; ,        &quot;+COLUMN_TITLE+\r\n                &quot; ,        &quot;+COLUMN_TIME+\r\n                &quot; FROM     &quot;+TABLE_NAME+\r\n                &quot; WHERE    &quot;+&quot; ( :fav1 IS NULL OR &quot;   + COLUMN_FAV1 + &quot; =   :fav1 ) AND &quot;+\r\n                             &quot; ( :fav2 IS NULL OR &quot;   + COLUMN_FAV2 + &quot; =   :fav2 ) AND &quot;+\r\n                             &quot; ( :fav3 IS NULL OR &quot;   + COLUMN_FAV3 + &quot; =   :fav3 ) &quot;    +\r\n                &quot; ORDER BY &quot;+&quot;RANDOM() LIMIT :num&quot;    )\r\n        LiveData&lt; List&lt;Entity_Random&gt; &gt; randomHymns( Integer num, Integer fav1, Integer fav2, Integer fav3);\r\n\r\n\r\nI have this in view model \r\n\r\n    final private LiveData&lt;List&lt;Entity_Random&gt;&gt;  mData;\r\n\r\n    public LiveData&lt;List&lt;Entity_Random&gt;&gt; getData()\r\n    {  return Transformations.distinctUntilChanged(mData); }\r\n\r\n    mData_Trigger.setValue ( new xFilter(7, null, null, null )  );\r\n    mData Transformations.switchMap( mData_Trigger,   input -&gt; Dao.randomHymns ( input.num,        input.fav1, input.fav2, input.fav3)  );\r\n\r\n\r\nI have this in fragment\r\n\r\n    \r\n        mObserver = new Observer&lt;List&lt;Entity_Random&gt;&gt;()\r\n        {   @Override public void onChanged(List&lt;Entity_Random&gt; entity)\r\n            {   mAdapter.swapList(entity);\r\n                mViewModel.updateSingle( mAdapter.getNumber(0));\r\n            }\r\n       };\r\n\r\n       mViewModel.getData().observe( getViewLifecycleOwner(),  mObserver );\r\n\r\n","title":"Is it possible to have LIVEDATA observer that trigger only when specific columns changes?","body":"<p>Thanks in advance for any advice. I have a query from a roomdatabase, only some columns are exposed by the interface to the user (~ 3 out of 7). The query does not include favorite columns.</p>\n<p>So, there is another query to let the user mark the data of a single row as favorite or not favorite...</p>\n<p>The issue is the first query is redone every time the user check or uncheck the favorite flag that belongs to the second query. The point here is the first query is livedata that doesnt include the fav columns in the database. So,...</p>\n<p>I do not understand why and /I do not know how to resolve it. Any help, would be very appreciated. Thanks!</p>\n<p>I have this query in DAO</p>\n<pre><code>    @Query( &quot; SELECT   &quot;+COLUMN_NUM+\n            &quot; ,        &quot;+COLUMN_TITLE+\n            &quot; ,        &quot;+COLUMN_TIME+\n            &quot; FROM     &quot;+TABLE_NAME+\n            &quot; WHERE    &quot;+&quot; ( :fav1 IS NULL OR &quot;   + COLUMN_FAV1 + &quot; =   :fav1 ) AND &quot;+\n                         &quot; ( :fav2 IS NULL OR &quot;   + COLUMN_FAV2 + &quot; =   :fav2 ) AND &quot;+\n                         &quot; ( :fav3 IS NULL OR &quot;   + COLUMN_FAV3 + &quot; =   :fav3 ) &quot;    +\n            &quot; ORDER BY &quot;+&quot;RANDOM() LIMIT :num&quot;    )\n    LiveData&lt; List&lt;Entity_Random&gt; &gt; randomHymns( Integer num, Integer fav1, Integer fav2, Integer fav3);\n</code></pre>\n<p>I have this in view model</p>\n<pre><code>final private LiveData&lt;List&lt;Entity_Random&gt;&gt;  mData;\n\npublic LiveData&lt;List&lt;Entity_Random&gt;&gt; getData()\n{  return Transformations.distinctUntilChanged(mData); }\n\nmData_Trigger.setValue ( new xFilter(7, null, null, null )  );\nmData Transformations.switchMap( mData_Trigger,   input -&gt; Dao.randomHymns ( input.num,        input.fav1, input.fav2, input.fav3)  );\n</code></pre>\n<p>I have this in fragment</p>\n<pre><code>    mObserver = new Observer&lt;List&lt;Entity_Random&gt;&gt;()\n    {   @Override public void onChanged(List&lt;Entity_Random&gt; entity)\n        {   mAdapter.swapList(entity);\n            mViewModel.updateSingle( mAdapter.getNumber(0));\n        }\n   };\n\n   mViewModel.getData().observe( getViewLifecycleOwner(),  mObserver );\n</code></pre>\n"},{"tags":["python","java","apache-kafka","virtualbox"],"comments":[{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1568679313,"post_id":57965731,"comment_id":102342358,"body_markdown":"Please show your server properties files","body":"Please show your server properties files"}],"answers":[{"tags":[],"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"down_vote_count":0,"up_vote_count":31,"is_accepted":true,"score":31,"last_activity_date":1643913056,"creation_date":1568679514,"answer_id":57965829,"question_id":57965731,"body_markdown":"Generally, seems your hostnames aren&#39;t resolvable. Does `ping ubuntukafka` work? If not, then you&#39;ll need to adjust what you&#39;re making Kafka return via `advertised.listeners` to be the external IP rather than the hostname \r\n\r\n    listeners=PLAINTEXT://0.0.0.0:9092\r\n    advertised.listeners=PLAINTEXT://10.75.1.247:9092\r\n\r\nWhere, `10.75.1.247` is the network address to be resolved by the external machines (e.g. make sure you can ping that address, too)","title":"Kafka Error connecting to node ubuntukafka:9092 (id: 0 rack: null) (org.apache.kafka.clients.NetworkClient) java.net.UnknownHostException:","body":"<p>Generally, seems your hostnames aren't resolvable. Does <code>ping ubuntukafka</code> work? If not, then you'll need to adjust what you're making Kafka return via <code>advertised.listeners</code> to be the external IP rather than the hostname</p>\n<pre><code>listeners=PLAINTEXT://0.0.0.0:9092\nadvertised.listeners=PLAINTEXT://10.75.1.247:9092\n</code></pre>\n<p>Where, <code>10.75.1.247</code> is the network address to be resolved by the external machines (e.g. make sure you can ping that address, too)</p>\n"},{"tags":[],"owner":{"account_id":12210462,"reputation":21,"user_id":8912381,"display_name":"kapil07"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1596960364,"creation_date":1596960364,"answer_id":63323962,"question_id":57965731,"body_markdown":"only changing listeners=PLAINTEXT://localhost:9092 work for me no need to change advertised.listeners property in server config","title":"Kafka Error connecting to node ubuntukafka:9092 (id: 0 rack: null) (org.apache.kafka.clients.NetworkClient) java.net.UnknownHostException:","body":"<p>only changing listeners=PLAINTEXT://localhost:9092 work for me no need to change advertised.listeners property in server config</p>\n"},{"tags":[],"owner":{"account_id":16110529,"reputation":131,"user_id":11628854,"display_name":"yunzhi"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1670986452,"creation_date":1670986452,"answer_id":74793103,"question_id":57965731,"body_markdown":"You can add below into file /etc/hosts:\r\n\r\n```\r\n127.0.0.1 ${your/hostname}\r\n```\r\n\r\n","title":"Kafka Error connecting to node ubuntukafka:9092 (id: 0 rack: null) (org.apache.kafka.clients.NetworkClient) java.net.UnknownHostException:","body":"<p>You can add below into file /etc/hosts:</p>\n<pre><code>127.0.0.1 ${your/hostname}\n</code></pre>\n"}],"owner":{"account_id":129002,"reputation":3758,"user_id":327258,"accept_rate":64,"display_name":"Codejoy"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":31517,"favorite_count":0,"down_vote_count":0,"up_vote_count":17,"accepted_answer_id":57965829,"answer_count":3,"score":17,"last_activity_date":1689857410,"creation_date":1568678584,"question_id":57965731,"body_markdown":"I have two servers on VirtualBox guests each ubuntu.  I can SSH from my main machine to both, and between the two so they all have the natnetwork.\r\n\r\nI ran on one server kafka as described here:\r\n\r\nhttps://kafka.apache.org/quickstart\r\n\r\nSo I brought up singlenode zookeper\r\nKafka then started.  I added the test topic.\r\n(All on MachineA . 10.75.1.247)\r\n\r\nI am trying to list the topics on that node from another machine:\r\n\r\n    bin/kafka-topics.sh --list --bootstrap-server 10.75.1.247:9092\r\n\r\nfrom MachineB (10.75.1.2)\r\n\r\ndoing that, causes the error over and over:\r\n\r\n    [2019-09-16 23:57:07,864] WARN [AdminClient clientId=adminclient-1] Error connecting to node ubuntukafka:9092 (id: 0 rack: null) (org.apache.kafka.clients.NetworkClient)\r\n    java.net.UnknownHostException: ubuntukafka\r\n    \tat java.base/java.net.InetAddress$CachedAddresses.get(InetAddress.java:797)\r\n    \tat java.base/java.net.InetAddress.getAllByName0(InetAddress.java:1505)\r\n    \tat java.base/java.net.InetAddress.getAllByName(InetAddress.java:1364)\r\n    \tat java.base/java.net.InetAddress.getAllByName(InetAddress.java:1298)\r\n    \tat org.apache.kafka.clients.ClientUtils.resolve(ClientUtils.java:104)\r\n    \tat org.apache.kafka.clients.ClusterConnectionStates$NodeConnectionState.currentAddress(ClusterConnectionStates.java:403)\r\n    \tat org.apache.kafka.clients.ClusterConnectionStates$NodeConnectionState.access$200(ClusterConnectionStates.java:363)\r\n    \tat org.apache.kafka.clients.ClusterConnectionStates.currentAddress(ClusterConnectionStates.java:151)\r\n    \tat org.apache.kafka.clients.NetworkClient.initiateConnect(NetworkClient.java:943)\r\n    \tat org.apache.kafka.clients.NetworkClient.ready(NetworkClient.java:288)\r\n    \tat org.apache.kafka.clients.admin.KafkaAdminClient$AdminClientRunnable.sendEligibleCalls(KafkaAdminClient.java:925)\r\n    \tat org.apache.kafka.clients.admin.KafkaAdminClient$AdminClientRunnable.run(KafkaAdminClient.java:1140)\r\n    \tat java.base/java.lang.Thread.run(Thread.java:834)\r\n\r\nit does resolve the name\r\n(says ubuntukafka instead of ubuntukafkanode) but fails.\r\n\r\nWhat am I missing?  Am I using kafka wrong?  I thought I could have a nice kafka server where all my other servers with data can produce information too.  Then many other consumers can read the information from? \r\n\r\nUltimately what I wanted to test was if I could send messages to my kafka server:\r\n\r\n    bin/kafka-console-producer.sh --broker-list 10.75.1.247:9092 --topic test\r\n\r\n\r\nAnd even then use python later to produce messages to the server.\r\n\r\n\r\n    from kafka import KafkaProducer\r\n      \r\n    producer = KafkaProducer(bootstrap_servers=&#39;10.75.1.247:9092&#39;)\r\n    for _ in range(100):\r\n        try:\r\n            producer.send(&#39;test&#39;, b&#39;some_message_bytes&#39;)\r\n        except:\r\n            print(&#39;doh&#39;)\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"Kafka Error connecting to node ubuntukafka:9092 (id: 0 rack: null) (org.apache.kafka.clients.NetworkClient) java.net.UnknownHostException:","body":"<p>I have two servers on VirtualBox guests each ubuntu.  I can SSH from my main machine to both, and between the two so they all have the natnetwork.</p>\n\n<p>I ran on one server kafka as described here:</p>\n\n<p><a href=\"https://kafka.apache.org/quickstart\" rel=\"noreferrer\">https://kafka.apache.org/quickstart</a></p>\n\n<p>So I brought up singlenode zookeper\nKafka then started.  I added the test topic.\n(All on MachineA . 10.75.1.247)</p>\n\n<p>I am trying to list the topics on that node from another machine:</p>\n\n<pre><code>bin/kafka-topics.sh --list --bootstrap-server 10.75.1.247:9092\n</code></pre>\n\n<p>from MachineB (10.75.1.2)</p>\n\n<p>doing that, causes the error over and over:</p>\n\n<pre><code>[2019-09-16 23:57:07,864] WARN [AdminClient clientId=adminclient-1] Error connecting to node ubuntukafka:9092 (id: 0 rack: null) (org.apache.kafka.clients.NetworkClient)\njava.net.UnknownHostException: ubuntukafka\n    at java.base/java.net.InetAddress$CachedAddresses.get(InetAddress.java:797)\n    at java.base/java.net.InetAddress.getAllByName0(InetAddress.java:1505)\n    at java.base/java.net.InetAddress.getAllByName(InetAddress.java:1364)\n    at java.base/java.net.InetAddress.getAllByName(InetAddress.java:1298)\n    at org.apache.kafka.clients.ClientUtils.resolve(ClientUtils.java:104)\n    at org.apache.kafka.clients.ClusterConnectionStates$NodeConnectionState.currentAddress(ClusterConnectionStates.java:403)\n    at org.apache.kafka.clients.ClusterConnectionStates$NodeConnectionState.access$200(ClusterConnectionStates.java:363)\n    at org.apache.kafka.clients.ClusterConnectionStates.currentAddress(ClusterConnectionStates.java:151)\n    at org.apache.kafka.clients.NetworkClient.initiateConnect(NetworkClient.java:943)\n    at org.apache.kafka.clients.NetworkClient.ready(NetworkClient.java:288)\n    at org.apache.kafka.clients.admin.KafkaAdminClient$AdminClientRunnable.sendEligibleCalls(KafkaAdminClient.java:925)\n    at org.apache.kafka.clients.admin.KafkaAdminClient$AdminClientRunnable.run(KafkaAdminClient.java:1140)\n    at java.base/java.lang.Thread.run(Thread.java:834)\n</code></pre>\n\n<p>it does resolve the name\n(says ubuntukafka instead of ubuntukafkanode) but fails.</p>\n\n<p>What am I missing?  Am I using kafka wrong?  I thought I could have a nice kafka server where all my other servers with data can produce information too.  Then many other consumers can read the information from? </p>\n\n<p>Ultimately what I wanted to test was if I could send messages to my kafka server:</p>\n\n<pre><code>bin/kafka-console-producer.sh --broker-list 10.75.1.247:9092 --topic test\n</code></pre>\n\n<p>And even then use python later to produce messages to the server.</p>\n\n<pre><code>from kafka import KafkaProducer\n\nproducer = KafkaProducer(bootstrap_servers='10.75.1.247:9092')\nfor _ in range(100):\n    try:\n        producer.send('test', b'some_message_bytes')\n    except:\n        print('doh')\n</code></pre>\n"},{"tags":["java","javafx","osgi","javacv"],"owner":{"account_id":3310548,"reputation":321,"user_id":2784174,"display_name":"crowde"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689857248,"creation_date":1689857248,"question_id":76730064,"body_markdown":"I am trying to use JavaCV in a JavaFX running in OSGi container.\r\n\r\nThe bundle that is using JavaCV as dependency is resolved correctly, but once started it creates an instance of `org.bytedeco.javacv.FFmpegFrameGrabber` and I see this exception:\r\n\r\n    Caused by: java.lang.ExceptionInInitializerError: Exception java.lang.UnsatisfiedLinkError: java.io.FileNotFoundException: C:\\Users\\admin\\.javacpp\\cache\\windows-x86_64\\jniavutil.dll (**Impossibile accedere al file. Il file &#232; utilizzato da un altro processo**) [in thread &quot;JavaFX Application Thread&quot;]\r\n        at org.bytedeco.javacpp.Loader.loadLibrary(Loader.java:1853)\r\n        at org.bytedeco.javacpp.Loader.load(Loader.java:1423)\r\n        at org.bytedeco.javacpp.Loader.load(Loader.java:1234)\r\n        at org.bytedeco.javacpp.Loader.load(Loader.java:1210)\r\n        at org.bytedeco.ffmpeg.avutil.AVChannelLayout.&lt;clinit&gt;(AVChannelLayout.java:46)\r\n        at org.bytedeco.ffmpeg.global.avutil.AV_CHANNEL_LAYOUT_MONO(Native Method)\r\n        at org.bytedeco.ffmpeg.global.avutil.&lt;clinit&gt;(avutil.java:4381)\r\n        at java.base/java.lang.Class.forName0(Native Method)\r\n        at java.base/java.lang.Class.forName(Class.java:495)\r\n        at java.base/java.lang.Class.forName(Class.java:474)\r\n        at org.bytedeco.javacpp.Loader.load(Loader.java:1289)\r\n        at org.bytedeco.javacpp.Loader.load(Loader.java:1234)\r\n        at org.bytedeco.javacpp.Loader.load(Loader.java:1226)\r\n        at org.bytedeco.javacv.FFmpegFrameGrabber.tryLoad(FFmpegFrameGrabber.java:111)\r\n        at org.bytedeco.javacv.FFmpegFrameGrabber.&lt;clinit&gt;(FFmpegFrameGrabber.java:137)\r\n        ... 23 more\r\n\r\nThe error message is in italian, but it says:\r\n\r\n&gt; C:\\Users\\admin\\\\.javacpp\\cache\\windows-x86_64\\jniavutil.dll (Cannot access the file. The file is being used by another process)\r\n\r\nI checked that the file exists at that path and the only process that is using it is the Java application itself. \r\n\r\nI embedded all the JavaCV jar files in the bundle and added all of them to the Bundle-ClassPath. I included only the jars for the `windows-x86_64` platform. \r\nHere is the list of jars that I included. \r\n\r\n```\r\nartoolkitplus.jar\r\nartoolkitplus-windows-x86_64.jar\r\nffmpeg.jar\r\nffmpeg-windows-x86_64.jar\r\nflandmark-1.07-1.5.8.jar\r\nflycapture.jar\r\nflycapture-windows-x86_64.jar\r\njavacpp.jar\r\njavacpp-windows-x86_64.jar\r\njavacv.jar\r\nleptonica.jar\r\nleptonica-windows-x86_64.jar\r\nlibdc1394.jar\r\nlibdc1394-windows-x86_64.jar\r\nlibfreenect.jar\r\nlibfreenect-windows-x86_64.jar\r\nlibfreenect2.jar\r\nlibfreenect2-windows-x86_64.jar\r\nlibrealsense.jar\r\nlibrealsense-windows-x86_64.jar\r\nlibrealsense2.jar\r\nlibrealsense2-windows-x86_64.jar\r\nopenblas.jar\r\nopenblas-windows-x86_64.jar\r\nopencv.jar\r\nopencv-windows-x86_64.jar\r\ntesseract.jar\r\ntesseract-windows-x86_64.jar\r\nvideoinput.jar\r\nvideoinput-windows-x86_64.jar\r\n```\r\n\r\nEnvironment details:\r\n- Windows 10\r\n- Java 19\r\n- JavaCV 1.5.9","title":"JavaCV: jniavutil.dll - Cannot access the file. The file is being used by another process","body":"<p>I am trying to use JavaCV in a JavaFX running in OSGi container.</p>\n<p>The bundle that is using JavaCV as dependency is resolved correctly, but once started it creates an instance of <code>org.bytedeco.javacv.FFmpegFrameGrabber</code> and I see this exception:</p>\n<pre><code>Caused by: java.lang.ExceptionInInitializerError: Exception java.lang.UnsatisfiedLinkError: java.io.FileNotFoundException: C:\\Users\\admin\\.javacpp\\cache\\windows-x86_64\\jniavutil.dll (**Impossibile accedere al file. Il file è utilizzato da un altro processo**) [in thread &quot;JavaFX Application Thread&quot;]\n    at org.bytedeco.javacpp.Loader.loadLibrary(Loader.java:1853)\n    at org.bytedeco.javacpp.Loader.load(Loader.java:1423)\n    at org.bytedeco.javacpp.Loader.load(Loader.java:1234)\n    at org.bytedeco.javacpp.Loader.load(Loader.java:1210)\n    at org.bytedeco.ffmpeg.avutil.AVChannelLayout.&lt;clinit&gt;(AVChannelLayout.java:46)\n    at org.bytedeco.ffmpeg.global.avutil.AV_CHANNEL_LAYOUT_MONO(Native Method)\n    at org.bytedeco.ffmpeg.global.avutil.&lt;clinit&gt;(avutil.java:4381)\n    at java.base/java.lang.Class.forName0(Native Method)\n    at java.base/java.lang.Class.forName(Class.java:495)\n    at java.base/java.lang.Class.forName(Class.java:474)\n    at org.bytedeco.javacpp.Loader.load(Loader.java:1289)\n    at org.bytedeco.javacpp.Loader.load(Loader.java:1234)\n    at org.bytedeco.javacpp.Loader.load(Loader.java:1226)\n    at org.bytedeco.javacv.FFmpegFrameGrabber.tryLoad(FFmpegFrameGrabber.java:111)\n    at org.bytedeco.javacv.FFmpegFrameGrabber.&lt;clinit&gt;(FFmpegFrameGrabber.java:137)\n    ... 23 more\n</code></pre>\n<p>The error message is in italian, but it says:</p>\n<blockquote>\n<p>C:\\Users\\admin\\.javacpp\\cache\\windows-x86_64\\jniavutil.dll (Cannot access the file. The file is being used by another process)</p>\n</blockquote>\n<p>I checked that the file exists at that path and the only process that is using it is the Java application itself.</p>\n<p>I embedded all the JavaCV jar files in the bundle and added all of them to the Bundle-ClassPath. I included only the jars for the <code>windows-x86_64</code> platform.\nHere is the list of jars that I included.</p>\n<pre><code>artoolkitplus.jar\nartoolkitplus-windows-x86_64.jar\nffmpeg.jar\nffmpeg-windows-x86_64.jar\nflandmark-1.07-1.5.8.jar\nflycapture.jar\nflycapture-windows-x86_64.jar\njavacpp.jar\njavacpp-windows-x86_64.jar\njavacv.jar\nleptonica.jar\nleptonica-windows-x86_64.jar\nlibdc1394.jar\nlibdc1394-windows-x86_64.jar\nlibfreenect.jar\nlibfreenect-windows-x86_64.jar\nlibfreenect2.jar\nlibfreenect2-windows-x86_64.jar\nlibrealsense.jar\nlibrealsense-windows-x86_64.jar\nlibrealsense2.jar\nlibrealsense2-windows-x86_64.jar\nopenblas.jar\nopenblas-windows-x86_64.jar\nopencv.jar\nopencv-windows-x86_64.jar\ntesseract.jar\ntesseract-windows-x86_64.jar\nvideoinput.jar\nvideoinput-windows-x86_64.jar\n</code></pre>\n<p>Environment details:</p>\n<ul>\n<li>Windows 10</li>\n<li>Java 19</li>\n<li>JavaCV 1.5.9</li>\n</ul>\n"},{"tags":["java","docker","maven"],"comments":[{"owner":{"account_id":462886,"reputation":2853,"user_id":865448,"accept_rate":82,"display_name":"tostao"},"score":0,"creation_date":1689853904,"post_id":76729514,"comment_id":135273759,"body_markdown":"What do you try to achieve? Run some classes from jar?","body":"What do you try to achieve? Run some classes from jar?"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1689853981,"post_id":76729514,"comment_id":135273775,"body_markdown":"It&#39;s difficult to see what you&#39;re trying to do, but if you want to make a jar that&#39;s stand-alone, you need Maven Shade or the Maven Assembly plugin. If you don&#39;t want a lot of cruft accumulating in ~/.m2, you can change the value of localRepository to point at the /tmp directory","body":"It&#39;s difficult to see what you&#39;re trying to do, but if you want to make a jar that&#39;s stand-alone, you need Maven Shade or the Maven Assembly plugin. If you don&#39;t want a lot of cruft accumulating in ~/.m2, you can change the value of localRepository to point at the /tmp directory"},{"owner":{"account_id":16841069,"reputation":2151,"user_id":12176460,"display_name":"YoavKlein"},"score":0,"creation_date":1689854274,"post_id":76729514,"comment_id":135273840,"body_markdown":"@tostao, I think it&#39;s pretty clear from the question. I&#39;m trying to understand how should one run a java program that has dependencies that reside in the `~/.m2/repository` directory.","body":"@tostao, I think it&#39;s pretty clear from the question. I&#39;m trying to understand how should one run a java program that has dependencies that reside in the <code>~&#47;.m2&#47;repository</code> directory."},{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":1,"creation_date":1689854646,"post_id":76729514,"comment_id":135273920,"body_markdown":"@YoavKlein No it is not clear because during runtime usually a local cache (`~/.m2/repository`) does not exist which means you should not use that as classpath furthermore in your local cache are too many files which you don&#39;t like to have on your classpath apart from having several jar&#39;s and classes duplication based on the subject that you have cached several versions of the same artifact... apart as already mentioned to run your app you should create an executable jar (aka shaded/jar-with-dependencies)....","body":"@YoavKlein No it is not clear because during runtime usually a local cache (<code>~&#47;.m2&#47;repository</code>) does not exist which means you should not use that as classpath furthermore in your local cache are too many files which you don&#39;t like to have on your classpath apart from having several jar&#39;s and classes duplication based on the subject that you have cached several versions of the same artifact... apart as already mentioned to run your app you should create an executable jar (aka shaded/jar-with-dependencies)...."},{"owner":{"account_id":187094,"reputation":5113,"user_id":424903,"display_name":"Gimby"},"score":0,"creation_date":1689856927,"post_id":76729514,"comment_id":135274505,"body_markdown":"It&#39;d be pretty silly if you wouldn&#39;t be able to let Maven solve this for you, that&#39;s the whole reason for it existing - automation. And as always with Maven you have at least three options available to you. The more common method is to build a fat jar, which implies packaging all the classes from all the dependencies into one large jar. No head aches from having to lug around external dependencies, but this method can be kind of sketchy when it comes to licensing. Would this be acceptable to you?","body":"It&#39;d be pretty silly if you wouldn&#39;t be able to let Maven solve this for you, that&#39;s the whole reason for it existing - automation. And as always with Maven you have at least three options available to you. The more common method is to build a fat jar, which implies packaging all the classes from all the dependencies into one large jar. No head aches from having to lug around external dependencies, but this method can be kind of sketchy when it comes to licensing. Would this be acceptable to you?"},{"owner":{"account_id":16841069,"reputation":2151,"user_id":12176460,"display_name":"YoavKlein"},"score":0,"creation_date":1689864311,"post_id":76729514,"comment_id":135276369,"body_markdown":"@Gimby, I&#39;m pretty new to Java and Maven, I&#39;m just trying to understand what is the most straightforward way to do this. That&#39;s all","body":"@Gimby, I&#39;m pretty new to Java and Maven, I&#39;m just trying to understand what is the most straightforward way to do this. That&#39;s all"}],"answers":[{"tags":[],"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1689857215,"creation_date":1689857215,"answer_id":76730057,"question_id":76729514,"body_markdown":"The problem is you are working *against* Maven, not *with* it. You should let Maven handle all classpath-related problems.\r\n\r\nIf you want to collect all dependency jars in a single folder, Maven can do that for you.\r\n\r\nIf you want to run or debug your application, whether from IDE or from command line, Maven can do that for you.\r\n\r\nIf you want to build a single JAR file containing all dependency classes, Maven can do that for you.\r\n\r\nIn short: Work with the tool, not against it.","title":"How do you set CLASSPATH to the Maven repository?","body":"<p>The problem is you are working <em>against</em> Maven, not <em>with</em> it. You should let Maven handle all classpath-related problems.</p>\n<p>If you want to collect all dependency jars in a single folder, Maven can do that for you.</p>\n<p>If you want to run or debug your application, whether from IDE or from command line, Maven can do that for you.</p>\n<p>If you want to build a single JAR file containing all dependency classes, Maven can do that for you.</p>\n<p>In short: Work with the tool, not against it.</p>\n"}],"owner":{"account_id":16841069,"reputation":2151,"user_id":12176460,"display_name":"YoavKlein"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":168,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689857215,"creation_date":1689853520,"question_id":76729514,"body_markdown":"I have a Maven project, with some dependencies configured in the pom.xml.\r\n\r\nNow, when I run `mvn package`, the dependencies are downloaded to `~/.m2/repository`. Eventually, this is a big directory tree with many directories and subdirectories that contain `jar` files.\r\n\r\nI&#39;m not working with any IDE - just running `mvn` and `java` from the command line. \r\n\r\nNow, when I try running my project:\r\n```\r\n$ java -cp target/my-app-1.0-SNAPSHOT.jar App\r\n``` \r\n\r\nI get a `NoClassDefFound` error - which I can understand since I&#39;m trying to access dependency code in my code, and it&#39;s not in the classpath - there&#39;s nothing that defines the CLASSPATH to the `~/.m2/repository` directories.\r\n\r\nSo  my question is - how can I run my program from the command line and have the JVM use the dependencies from the `~/.m2/repository`?\r\n\r\nI&#39;ve been searching the web for this and surprisingly didn&#39;t find answers. What I&#39;ve eventually managed to do is:\r\n```\r\n$ mvn dependency:build-classpath\r\n```\r\nthen chain to this string the `./target/my-app-1.0-SNAPSHOT.jar` and then use this with the `-cp` option.\r\n\r\nIs that the way to do it? It&#39;s pretty cumbersome...\r\n\r\nAnyways, I can get away with using some IDE, that&#39;s fine. But what about packing my application in a Docker image? How is that done?\r\n\r\nThanks.\r\n\r\n\r\n","title":"How do you set CLASSPATH to the Maven repository?","body":"<p>I have a Maven project, with some dependencies configured in the pom.xml.</p>\n<p>Now, when I run <code>mvn package</code>, the dependencies are downloaded to <code>~/.m2/repository</code>. Eventually, this is a big directory tree with many directories and subdirectories that contain <code>jar</code> files.</p>\n<p>I'm not working with any IDE - just running <code>mvn</code> and <code>java</code> from the command line.</p>\n<p>Now, when I try running my project:</p>\n<pre><code>$ java -cp target/my-app-1.0-SNAPSHOT.jar App\n</code></pre>\n<p>I get a <code>NoClassDefFound</code> error - which I can understand since I'm trying to access dependency code in my code, and it's not in the classpath - there's nothing that defines the CLASSPATH to the <code>~/.m2/repository</code> directories.</p>\n<p>So  my question is - how can I run my program from the command line and have the JVM use the dependencies from the <code>~/.m2/repository</code>?</p>\n<p>I've been searching the web for this and surprisingly didn't find answers. What I've eventually managed to do is:</p>\n<pre><code>$ mvn dependency:build-classpath\n</code></pre>\n<p>then chain to this string the <code>./target/my-app-1.0-SNAPSHOT.jar</code> and then use this with the <code>-cp</code> option.</p>\n<p>Is that the way to do it? It's pretty cumbersome...</p>\n<p>Anyways, I can get away with using some IDE, that's fine. But what about packing my application in a Docker image? How is that done?</p>\n<p>Thanks.</p>\n"},{"tags":["java","eclipse","jboss","wildfly"],"comments":[{"owner":{"account_id":13796,"reputation":19353,"user_id":27905,"display_name":"nitind"},"score":0,"creation_date":1689866424,"post_id":76730045,"comment_id":135276983,"body_markdown":"Considering that there&#39;s an Eclipse 202**3**-06 and JBoss Tools 4.2**8**.0.Final download, why are you using backlevel versions?","body":"Considering that there&#39;s an Eclipse 202<b>3</b>-06 and JBoss Tools 4.2<b>8</b>.0.Final download, why are you using backlevel versions?"},{"owner":{"account_id":6397346,"reputation":107,"user_id":4961252,"display_name":"Pete Long"},"score":0,"creation_date":1690057468,"post_id":76730045,"comment_id":135300950,"body_markdown":"I am constrained by the fact that I am only able to go up to Java 11.\nFrom https://wiki.eclipse.org/Eclipse/Installation, the latest Eclipse version that would run with Java 11 is Eclipse 4.24 (2022-06).\nFrom https://tools.jboss.org/downloads/archives.html, using Eclipse 4.24 (2022-06)., the latest version of JBoss tools that i can use is 4.24.0.Final. What I am not able to determine what versions of Wildfly are supported by Jboss tools 4.24.0.Final.  How can i check this please ?","body":"I am constrained by the fact that I am only able to go up to Java 11. From <a href=\"https://wiki.eclipse.org/Eclipse/Installation\" rel=\"nofollow noreferrer\">wiki.eclipse.org/Eclipse/Installation</a>, the latest Eclipse version that would run with Java 11 is Eclipse 4.24 (2022-06). From <a href=\"https://tools.jboss.org/downloads/archives.html\" rel=\"nofollow noreferrer\">tools.jboss.org/downloads/archives.html</a>, using Eclipse 4.24 (2022-06)., the latest version of JBoss tools that i can use is 4.24.0.Final. What I am not able to determine what versions of Wildfly are supported by Jboss tools 4.24.0.Final.  How can i check this please ?"},{"owner":{"account_id":13796,"reputation":19353,"user_id":27905,"display_name":"nitind"},"score":0,"creation_date":1690094788,"post_id":76730045,"comment_id":135303232,"body_markdown":"The version of Java you use to run Eclipse has little bearing on the version of Java you use to compile and run your own code and app servers. I have no idea what versions of the JBoss Tools support which Wildfly versions, but I would guess that the similarities in version numbering aren&#39;t a coincidence.","body":"The version of Java you use to run Eclipse has little bearing on the version of Java you use to compile and run your own code and app servers. I have no idea what versions of the JBoss Tools support which Wildfly versions, but I would guess that the similarities in version numbering aren&#39;t a coincidence."},{"owner":{"account_id":6397346,"reputation":107,"user_id":4961252,"display_name":"Pete Long"},"score":0,"creation_date":1690130003,"post_id":76730045,"comment_id":135307188,"body_markdown":"Hello @nitind. Thank you for the clarification. So completely wrong understanding on my side. I thought the Eclipse version I used had to be the same Java version as the Java version used in the target environment of the compiled code.  I have done what you suggest before to use &quot;Eclipse 2023-06 and JBoss Tools 4.28.0.Final&quot;. The latest supported Wildfly is &quot;Wildfly 27+&quot;. This much better than &quot;Wildfly 24+&quot; I was getting with &quot;Eclipse version 2022-06&quot; and &quot;JBoss Tools 4.24.0.Final&quot; plugin. I am assumed &quot;Wildfly 27+&quot; will support &quot;Wildfly28&quot; (figers crossed). Finally Thank you nitind","body":"Hello @nitind. Thank you for the clarification. So completely wrong understanding on my side. I thought the Eclipse version I used had to be the same Java version as the Java version used in the target environment of the compiled code.  I have done what you suggest before to use &quot;Eclipse 2023-06 and JBoss Tools 4.28.0.Final&quot;. The latest supported Wildfly is &quot;Wildfly 27+&quot;. This much better than &quot;Wildfly 24+&quot; I was getting with &quot;Eclipse version 2022-06&quot; and &quot;JBoss Tools 4.24.0.Final&quot; plugin. I am assumed &quot;Wildfly 27+&quot; will support &quot;Wildfly28&quot; (figers crossed). Finally Thank you nitind"}],"owner":{"account_id":6397346,"reputation":107,"user_id":4961252,"display_name":"Pete Long"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":88,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689857149,"creation_date":1689857149,"question_id":76730045,"body_markdown":"I am using Eclipse version 2022-06 with JBoss Tools 4.24.0.Final plugin installed.\r\n\r\nWith this setup,  I have been able to configure Wilfly 10 server on Eclipse.\r\n\r\nNow we are moving to Wildfly 28. The latest available Wildfly version supported by the JBoss plugin in Eclipse is &quot;Wildfly 24+&quot;. \r\n\r\nDoes the &quot;Wildfly 24+&quot; version mean that this will also support Wildfly 28&quot; too. \r\n\r\nWhilst it does suggest this. just wanted some conformation please.\r\n\r\nThank you","title":"Eclipse JBoss Plugin Wildfly 28 Support","body":"<p>I am using Eclipse version 2022-06 with JBoss Tools 4.24.0.Final plugin installed.</p>\n<p>With this setup,  I have been able to configure Wilfly 10 server on Eclipse.</p>\n<p>Now we are moving to Wildfly 28. The latest available Wildfly version supported by the JBoss plugin in Eclipse is &quot;Wildfly 24+&quot;.</p>\n<p>Does the &quot;Wildfly 24+&quot; version mean that this will also support Wildfly 28&quot; too.</p>\n<p>Whilst it does suggest this. just wanted some conformation please.</p>\n<p>Thank you</p>\n"},{"tags":["java","maven","code-generation","avro"],"comments":[{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1689856798,"post_id":76657203,"comment_id":135274479,"body_markdown":"I would not use induce option... As you&#39;ve explained, the generated classes from the AVSC already have a static SCHEMA$ field with the AVSC string, if you need it at runtime. I&#39;ve also done the exec plugin trick... Why do you actually need the AVSC files? The schema registry doesn&#39;t use them, and neither does Kafka","body":"I would not use induce option... As you&#39;ve explained, the generated classes from the AVSC already have a static SCHEMA$ field with the AVSC string, if you need it at runtime. I&#39;ve also done the exec plugin trick... Why do you actually need the AVSC files? The schema registry doesn&#39;t use them, and neither does Kafka"},{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1689857200,"post_id":76657203,"comment_id":135274562,"body_markdown":"I&#39;ll also note that Java packages cannot have hyphens. That seems to be part of the issue here. And neither should target be in the package name","body":"I&#39;ll also note that Java packages cannot have hyphens. That seems to be part of the issue here. And neither should target be in the package name"}],"owner":{"account_id":28989701,"reputation":1,"user_id":22205762,"display_name":"rocash"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":286,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689856809,"creation_date":1689021720,"question_id":76657203,"body_markdown":"I am using Kafka &amp; Avro in my current project, and I decided to upgrade the way I have been doing things for years.\r\n\r\nI always start from an AVDL, as I consider it the cleanest way to describe a schema, then generate Java classes from it using avro-maven-plugin.\r\nWhen it comes to the AVSC schema files, either I was retrieving them manually from the Java classes, either using exec-maven-plugin to run the command idl2schemata on the Avro tools and generate them.\r\n\r\nHowever, I noticed that avro-maven-plugin released a new induce goal: https://issues.apache.org/jira/browse/AVRO-2365\r\nThis one allowing to generate AVSC / AVPR from java classes directly:\r\n\r\n`mvn avro:help -Ddetail=true -Dgoal=induce`\r\n\r\n```\r\nMaven plugin for Avro IDL and Specific API Compilers\r\n\r\navro:induce\r\n  Generate Avro files (.avsc and .avpr) from Java classes or interfaces\r\n\r\n  Available parameters:\r\n\r\n    allowNull (Default: false)\r\n      Whether to use ReflectData.AllowNull.\r\n\r\n    avroOutputDirectory (Default:\r\n    ${project.build.directory}/generated-resources/avro)\r\n      Directory where to output Avro schemas (.avsc) or protocols (.avpr).\r\n      User property: avroOutputDirectory\r\n\r\n    encoding (Default: ${project.build.sourceEncoding})\r\n      The output encoding.\r\n\r\n    javaSourceDirectories (Default: ${basedir}/src/main/java)\r\n      The Java source directories.\r\n      User property: javaSourceDirectories\r\n\r\n    reflectDataImplementation\r\n      Override the default ReflectData implementation with an extension. Must be\r\n      a subclass of ReflectData.\r\n      User property: reflectDataImplementation\r\n```\r\n\r\n \r\nMy goal then became simple, use only avro-maven-plugin to:\r\n1. generate the Java classes from my AVDL file (goal idl-protocol)\r\n2. then generate the AVSC files from my generated Java classes (goal induce)\r\n\r\nMy pom would be cleaner, and the schema customization done during the idl-protocol would be kept.\r\n\r\n\r\n\r\nSo I came with something like this:\r\n\r\n```\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.avro&lt;/groupId&gt;\r\n                &lt;artifactId&gt;avro-maven-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;1.11.1&lt;/version&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;phase&gt;generate-sources&lt;/phase&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;idl-protocol&lt;/goal&gt;\r\n                            &lt;goal&gt;induce&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;!-- idl-protocol goal - The source directory of avro files --&gt;\r\n                    &lt;sourceDirectory&gt;${project.basedir}/src/main/resources/avro/&lt;/sourceDirectory&gt;\r\n                    &lt;!-- idl-protocol goal - The output directory of Java classes --&gt;\r\n                    &lt;outputDirectory&gt;${project.build.directory}/generated-sources/avro&lt;/outputDirectory&gt;\r\n                    &lt;!-- idl-protocol goal - Customization --&gt;\r\n                    &lt;createSetters&gt;false&lt;/createSetters&gt;\r\n                    &lt;stringType&gt;String&lt;/stringType&gt;\r\n                    &lt;!-- induce goal - The java source directory --&gt;\r\n                    &lt;javaSourceDirectories&gt;${project.build.directory}/generated-sources/avro&lt;/javaSourceDirectories&gt;\r\n                    &lt;!-- induce goal - Directory where to output Avro schemas --&gt;\r\n                    &lt;avroOutputDirectory&gt;${project.build.directory}/generated-resources/avro&lt;/avroOutputDirectory&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n```\r\n\r\nHowever, using the command `mvn clean avro:idl-protocol avro:induce` on a demo schema:\r\n\r\n```\r\n@namespace(&quot;com.stack.overflow.kafka.event&quot;)\r\nprotocol CompensationProtocol {\r\n\r\n\trecord Question {\r\n\t\tint memberId;\r\n\t\tstring title;\r\n\t}\r\n}\r\n```\r\n\r\nalways lead to a failure, a `java.lang.ClassNotFoundException` when executing the induce goal:\r\n\r\n```\r\n[ERROR] Failed to execute goal org.apache.avro:avro-maven-plugin:1.11.1:induce (default-cli) on project compensation: Failed to load class rs.john.doe.git.demo.target.generated-sources.avro.com.stack.overflow.kafka.event.CompensationProtocol -&gt; [Help 1]\r\norg.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.apache.avro:avro-maven-plugin:1.11.1:induce (default-cli) on project compensation: Failed to load class rs.john.doe.git.demo.target.generated-sources.avro.com.stack.overflow.kafka.event.CompensationProtocol\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute2 (MojoExecutor.java:347)\r\n    ...\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:348)\r\nCaused by: org.apache.maven.plugin.MojoExecutionException: Failed to load class rs.john.doe.git.demo.target.generated-sources.avro.com.stack.overflow.kafka.event.CompensationProtocol\r\n    at org.apache.avro.mojo.InduceMojo.loadClass (InduceMojo.java:184)\r\n    ...\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:348)\r\nCaused by: java.lang.ClassNotFoundException: rs.john.doe.git.demo.target.generated-sources.avro.com.stack.overflow.kafka.event.CompensationProtocol\r\n    at java.net.URLClassLoader.findClass (URLClassLoader.java:445)\r\n    at java.lang.ClassLoader.loadClass (ClassLoader.java:587)\r\n    at java.lang.ClassLoader.loadClass (ClassLoader.java:520)\r\n    at org.apache.avro.mojo.InduceMojo.loadClass (InduceMojo.java:182)\r\n    at org.apache.avro.mojo.InduceMojo.induceClasses (InduceMojo.java:124)\r\n    at org.apache.avro.mojo.InduceMojo.induceClasses (InduceMojo.java:115)\r\n    at org.apache.avro.mojo.InduceMojo.induceClasses (InduceMojo.java:115)\r\n    at org.apache.avro.mojo.InduceMojo.induceClasses (InduceMojo.java:115)\r\n    at org.apache.avro.mojo.InduceMojo.induceClasses (InduceMojo.java:115)\r\n    at org.apache.avro.mojo.InduceMojo.induceClasses (InduceMojo.java:115)\r\n    at org.apache.avro.mojo.InduceMojo.execute (InduceMojo.java:103)\r\n    ...\r\n```\r\n\r\nThe Java classes are properly generated as usual, but not the AVSC files.\r\n\r\nI tried to run the induce goal only, to have the classes into a source folder rather than target, I even used public Avro generated avro classes.. the exception was always there.\r\n\r\n\r\nTo figure the root cause of the exception, I even went into the `InduceMojo.class` of the plugin sources, extracted the relevant sources, build a custom project with maven plugin dependencies.. but I couldn&#39;t reproduce.\r\n\r\nWhen provided with the proper classname (here `rs.john.doe.git.demo.target.generated-sources.avro.com.stack.overflow.kafka.event.CompensationProtocol`), my own class loader was able to load it rather than throwing an exception:\r\nhttps://github.com/apache/avro/blob/master/lang/java/maven-plugin/src/main/java/org/apache/avro/mojo/InduceMojo.java#L182\r\n\r\n\r\nAt that stage, I have more or less gave up on using the induce goal, but I still have hopes that you guys will have a nice idea to solve this !","title":"avro-maven plugin - ClassNotFoundException during induce goal","body":"<p>I am using Kafka &amp; Avro in my current project, and I decided to upgrade the way I have been doing things for years.</p>\n<p>I always start from an AVDL, as I consider it the cleanest way to describe a schema, then generate Java classes from it using avro-maven-plugin.\nWhen it comes to the AVSC schema files, either I was retrieving them manually from the Java classes, either using exec-maven-plugin to run the command idl2schemata on the Avro tools and generate them.</p>\n<p>However, I noticed that avro-maven-plugin released a new induce goal: <a href=\"https://issues.apache.org/jira/browse/AVRO-2365\" rel=\"nofollow noreferrer\">https://issues.apache.org/jira/browse/AVRO-2365</a>\nThis one allowing to generate AVSC / AVPR from java classes directly:</p>\n<p><code>mvn avro:help -Ddetail=true -Dgoal=induce</code></p>\n<pre><code>Maven plugin for Avro IDL and Specific API Compilers\n\navro:induce\n  Generate Avro files (.avsc and .avpr) from Java classes or interfaces\n\n  Available parameters:\n\n    allowNull (Default: false)\n      Whether to use ReflectData.AllowNull.\n\n    avroOutputDirectory (Default:\n    ${project.build.directory}/generated-resources/avro)\n      Directory where to output Avro schemas (.avsc) or protocols (.avpr).\n      User property: avroOutputDirectory\n\n    encoding (Default: ${project.build.sourceEncoding})\n      The output encoding.\n\n    javaSourceDirectories (Default: ${basedir}/src/main/java)\n      The Java source directories.\n      User property: javaSourceDirectories\n\n    reflectDataImplementation\n      Override the default ReflectData implementation with an extension. Must be\n      a subclass of ReflectData.\n      User property: reflectDataImplementation\n</code></pre>\n<p>My goal then became simple, use only avro-maven-plugin to:</p>\n<ol>\n<li>generate the Java classes from my AVDL file (goal idl-protocol)</li>\n<li>then generate the AVSC files from my generated Java classes (goal induce)</li>\n</ol>\n<p>My pom would be cleaner, and the schema customization done during the idl-protocol would be kept.</p>\n<p>So I came with something like this:</p>\n<pre><code>            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.avro&lt;/groupId&gt;\n                &lt;artifactId&gt;avro-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;1.11.1&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;phase&gt;generate-sources&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;idl-protocol&lt;/goal&gt;\n                            &lt;goal&gt;induce&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n                &lt;configuration&gt;\n                    &lt;!-- idl-protocol goal - The source directory of avro files --&gt;\n                    &lt;sourceDirectory&gt;${project.basedir}/src/main/resources/avro/&lt;/sourceDirectory&gt;\n                    &lt;!-- idl-protocol goal - The output directory of Java classes --&gt;\n                    &lt;outputDirectory&gt;${project.build.directory}/generated-sources/avro&lt;/outputDirectory&gt;\n                    &lt;!-- idl-protocol goal - Customization --&gt;\n                    &lt;createSetters&gt;false&lt;/createSetters&gt;\n                    &lt;stringType&gt;String&lt;/stringType&gt;\n                    &lt;!-- induce goal - The java source directory --&gt;\n                    &lt;javaSourceDirectories&gt;${project.build.directory}/generated-sources/avro&lt;/javaSourceDirectories&gt;\n                    &lt;!-- induce goal - Directory where to output Avro schemas --&gt;\n                    &lt;avroOutputDirectory&gt;${project.build.directory}/generated-resources/avro&lt;/avroOutputDirectory&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n</code></pre>\n<p>However, using the command <code>mvn clean avro:idl-protocol avro:induce</code> on a demo schema:</p>\n<pre><code>@namespace(&quot;com.stack.overflow.kafka.event&quot;)\nprotocol CompensationProtocol {\n\n    record Question {\n        int memberId;\n        string title;\n    }\n}\n</code></pre>\n<p>always lead to a failure, a <code>java.lang.ClassNotFoundException</code> when executing the induce goal:</p>\n<pre><code>[ERROR] Failed to execute goal org.apache.avro:avro-maven-plugin:1.11.1:induce (default-cli) on project compensation: Failed to load class rs.john.doe.git.demo.target.generated-sources.avro.com.stack.overflow.kafka.event.CompensationProtocol -&gt; [Help 1]\norg.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.apache.avro:avro-maven-plugin:1.11.1:induce (default-cli) on project compensation: Failed to load class rs.john.doe.git.demo.target.generated-sources.avro.com.stack.overflow.kafka.event.CompensationProtocol\n    at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute2 (MojoExecutor.java:347)\n    ...\n    at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:348)\nCaused by: org.apache.maven.plugin.MojoExecutionException: Failed to load class rs.john.doe.git.demo.target.generated-sources.avro.com.stack.overflow.kafka.event.CompensationProtocol\n    at org.apache.avro.mojo.InduceMojo.loadClass (InduceMojo.java:184)\n    ...\n    at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:348)\nCaused by: java.lang.ClassNotFoundException: rs.john.doe.git.demo.target.generated-sources.avro.com.stack.overflow.kafka.event.CompensationProtocol\n    at java.net.URLClassLoader.findClass (URLClassLoader.java:445)\n    at java.lang.ClassLoader.loadClass (ClassLoader.java:587)\n    at java.lang.ClassLoader.loadClass (ClassLoader.java:520)\n    at org.apache.avro.mojo.InduceMojo.loadClass (InduceMojo.java:182)\n    at org.apache.avro.mojo.InduceMojo.induceClasses (InduceMojo.java:124)\n    at org.apache.avro.mojo.InduceMojo.induceClasses (InduceMojo.java:115)\n    at org.apache.avro.mojo.InduceMojo.induceClasses (InduceMojo.java:115)\n    at org.apache.avro.mojo.InduceMojo.induceClasses (InduceMojo.java:115)\n    at org.apache.avro.mojo.InduceMojo.induceClasses (InduceMojo.java:115)\n    at org.apache.avro.mojo.InduceMojo.induceClasses (InduceMojo.java:115)\n    at org.apache.avro.mojo.InduceMojo.execute (InduceMojo.java:103)\n    ...\n</code></pre>\n<p>The Java classes are properly generated as usual, but not the AVSC files.</p>\n<p>I tried to run the induce goal only, to have the classes into a source folder rather than target, I even used public Avro generated avro classes.. the exception was always there.</p>\n<p>To figure the root cause of the exception, I even went into the <code>InduceMojo.class</code> of the plugin sources, extracted the relevant sources, build a custom project with maven plugin dependencies.. but I couldn't reproduce.</p>\n<p>When provided with the proper classname (here <code>rs.john.doe.git.demo.target.generated-sources.avro.com.stack.overflow.kafka.event.CompensationProtocol</code>), my own class loader was able to load it rather than throwing an exception:\n<a href=\"https://github.com/apache/avro/blob/master/lang/java/maven-plugin/src/main/java/org/apache/avro/mojo/InduceMojo.java#L182\" rel=\"nofollow noreferrer\">https://github.com/apache/avro/blob/master/lang/java/maven-plugin/src/main/java/org/apache/avro/mojo/InduceMojo.java#L182</a></p>\n<p>At that stage, I have more or less gave up on using the induce goal, but I still have hopes that you guys will have a nice idea to solve this !</p>\n"},{"tags":["java","maven","pom.xml"],"comments":[{"owner":{"account_id":187094,"reputation":5113,"user_id":424903,"display_name":"Gimby"},"score":3,"creation_date":1689161397,"post_id":76669771,"comment_id":135173456,"body_markdown":"I don&#39;t think you can. The documentation specifically states it even: https://maven.apache.org/guides/mini/guide-deployment-security-settings.html","body":"I don&#39;t think you can. The documentation specifically states it even: <a href=\"https://maven.apache.org/guides/mini/guide-deployment-security-settings.html\" rel=\"nofollow noreferrer\">maven.apache.org/guides/mini/&hellip;</a>"},{"owner":{"account_id":4809624,"reputation":3467,"user_id":3883475,"accept_rate":85,"display_name":"Ironluca"},"score":0,"creation_date":1689169110,"post_id":76669771,"comment_id":135175376,"body_markdown":"You at least need one of the settings as indicated in the URL https://maven.apache.org/settings.html","body":"You at least need one of the settings as indicated in the URL <a href=\"https://maven.apache.org/settings.html\" rel=\"nofollow noreferrer\">maven.apache.org/settings.html</a>"},{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1689268347,"post_id":76669771,"comment_id":135193045,"body_markdown":"Technically you can defined repository within the pom file which is bad practice.. defining credentials in the pom file is simply not possible ...","body":"Technically you can defined repository within the pom file which is bad practice.. defining credentials in the pom file is simply not possible ..."},{"owner":{"account_id":8893736,"reputation":57,"user_id":6639486,"display_name":"Siya Nxuseka"},"score":0,"creation_date":1689665195,"post_id":76669771,"comment_id":135241842,"body_markdown":"Thanks, fellas I found a workaround to put the setting xml in the .m2 folder of the agent.","body":"Thanks, fellas I found a workaround to put the setting xml in the .m2 folder of the agent."}],"answers":[{"tags":[],"owner":{"account_id":187094,"reputation":5113,"user_id":424903,"display_name":"Gimby"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1689856410,"creation_date":1689856410,"answer_id":76729930,"question_id":76669771,"body_markdown":"This is not possible. Credentials must be stored inside a settings.xml file.\r\n\r\nThe [Maven documentation][1] specifically states this.\r\n\r\n\r\n  [1]: https://maven.apache.org/guides/mini/guide-deployment-security-settings.html","title":"POM xml with credentials for Custom Repo","body":"<p>This is not possible. Credentials must be stored inside a settings.xml file.</p>\n<p>The <a href=\"https://maven.apache.org/guides/mini/guide-deployment-security-settings.html\" rel=\"nofollow noreferrer\">Maven documentation</a> specifically states this.</p>\n"}],"owner":{"account_id":8893736,"reputation":57,"user_id":6639486,"display_name":"Siya Nxuseka"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":85,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76729930,"answer_count":1,"score":0,"last_activity_date":1689856410,"creation_date":1689159123,"question_id":76669771,"body_markdown":"Could you please provide assistance with the following POM XML? I am encountering the error message ***Could not transfer metadata io.smkfdk7.commons:commons-utils/maven-metadata.xml from/to custom-repo*** when running the ```mvn clean package``` goals. I am aware that using a ```settings.xml``` file is recommended for security purposes, but it is taking some time to set up in our Azure DevOps pipelines. Therefore, I would like to find a solution for resolving private artifacts by including login credentials in my POM XML at the moment. Essentially, I would like to know how to specify the login credentials for my ```custom repo``` in the POM XML.\r\nPOM.XML\r\n\r\n  ```&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;3.0.2&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;com.vit-uk-life-dto.dmdex&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;dmdex-core-service&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;DMDex&lt;/name&gt;\r\n\t&lt;description&gt;DMDex application for Disruption management and Documentation&lt;/description&gt;\r\n\t&lt;repositories&gt;\r\n\t\t&lt;repository&gt;\r\n\t\t\t&lt;id&gt;central&lt;/id&gt;\r\n\t\t\t&lt;url&gt;https://repo.maven.apache.org/maven2/&lt;/url&gt;\r\n\t\t\t&lt;releases&gt;\r\n\t\t\t\t&lt;enabled&gt;true&lt;/enabled&gt;\r\n\t\t\t&lt;/releases&gt;\r\n\t\t\t&lt;snapshots&gt;\r\n\t\t\t\t&lt;enabled&gt;false&lt;/enabled&gt;\r\n\t\t\t&lt;/snapshots&gt;\r\n\t\t&lt;/repository&gt;\r\n\t\t&lt;repository&gt;\r\n\t\t\t&lt;id&gt;custom-repo&lt;/id&gt;\r\n\t\t\t&lt;url&gt;https://vit-uk-life-dto.com/artifactory/appsmav-main-maven-local&lt;/url&gt;\r\n\t\t\t&lt;releases&gt;\r\n\t\t\t\t&lt;enabled&gt;true&lt;/enabled&gt;\r\n\t\t\t&lt;/releases&gt;\r\n\t\t\t&lt;snapshots&gt;\r\n\t\t\t\t&lt;enabled&gt;false&lt;/enabled&gt;\r\n\t\t\t&lt;/snapshots&gt;\r\n\t\t&lt;/repository&gt;\r\n\t&lt;/repositories&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;hibernate-validator&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;8.0.0.Final&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;io.smkfdk7.commons&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;commons-io&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.3.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.scapps.common.api&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;scapps-commons-api&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;io.smkfdk7.commons&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;commons-utils&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;[1.0.0,2.0.0)&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;io.smkfdk7.commons&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;commons-jwt&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.0.8&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.glassfish.jersey.core&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jersey-client&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.0.8&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;finalName&gt;dmdex-core-service&lt;/finalName&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;excludes&gt;\r\n\t\t\t\t\t\t&lt;exclude&gt;\r\n\t\t\t\t\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t\t\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t\t\t\t&lt;/exclude&gt;\r\n\t\t\t\t\t&lt;/excludes&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n\t&lt;profiles&gt;\r\n\t\t&lt;profile&gt;\r\n\t\t\t&lt;id&gt;custom-repo-auth&lt;/id&gt;\r\n\t\t\t&lt;activation&gt;\r\n\t\t\t\t&lt;activeByDefault&gt;false&lt;/activeByDefault&gt;\r\n\t\t\t&lt;/activation&gt;\r\n\t\t\t&lt;repositories&gt;\r\n\t\t\t\t&lt;repository&gt;\r\n\t\t\t\t\t&lt;id&gt;custom-repo&lt;/id&gt;\r\n\t\t\t\t\t&lt;url&gt;https://vit-uk-life-dto.com/artifactory/appsmav-main-maven-local&lt;/url&gt;\r\n\t\t\t\t\t&lt;releases&gt;\r\n\t\t\t\t\t\t&lt;enabled&gt;true&lt;/enabled&gt;\r\n\t\t\t\t\t&lt;/releases&gt;\r\n\t\t\t\t\t&lt;snapshots&gt;\r\n\t\t\t\t\t\t&lt;enabled&gt;false&lt;/enabled&gt;\r\n\t\t\t\t\t&lt;/snapshots&gt;\r\n\t\t\t\t&lt;/repository&gt;\r\n\t\t\t&lt;/repositories&gt;\r\n\t\t&lt;/profile&gt;\r\n\t&lt;/profiles&gt;\r\n\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;17&lt;/java.version&gt;\r\n\t\t&lt;custom-repo-username&gt;PID7552&lt;/custom-repo-username&gt;\r\n\t\t&lt;custom-repo-password&gt;bvdbhsdvhfbvhfbvbfvhfhjfhfvbdfbvhfvh&lt;/custom-repo-password&gt;\r\n\t&lt;/properties&gt;\r\n\r\n&lt;/project&gt;\r\n","title":"POM xml with credentials for Custom Repo","body":"<p>Could you please provide assistance with the following POM XML? I am encountering the error message <em><strong>Could not transfer metadata io.smkfdk7.commons:commons-utils/maven-metadata.xml from/to custom-repo</strong></em> when running the <code>mvn clean package</code> goals. I am aware that using a <code>settings.xml</code> file is recommended for security purposes, but it is taking some time to set up in our Azure DevOps pipelines. Therefore, I would like to find a solution for resolving private artifacts by including login credentials in my POM XML at the moment. Essentially, I would like to know how to specify the login credentials for my <code>custom repo</code> in the POM XML.\nPOM.XML</p>\n<pre><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n  xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n  &lt;parent&gt;\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n      &lt;version&gt;3.0.2&lt;/version&gt;\n      &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n  &lt;/parent&gt;\n  &lt;groupId&gt;com.vit-uk-life-dto.dmdex&lt;/groupId&gt;\n  &lt;artifactId&gt;dmdex-core-service&lt;/artifactId&gt;\n  &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n  &lt;name&gt;DMDex&lt;/name&gt;\n  &lt;description&gt;DMDex application for Disruption management and Documentation&lt;/description&gt;\n  &lt;repositories&gt;\n      &lt;repository&gt;\n          &lt;id&gt;central&lt;/id&gt;\n          &lt;url&gt;https://repo.maven.apache.org/maven2/&lt;/url&gt;\n          &lt;releases&gt;\n              &lt;enabled&gt;true&lt;/enabled&gt;\n          &lt;/releases&gt;\n          &lt;snapshots&gt;\n              &lt;enabled&gt;false&lt;/enabled&gt;\n          &lt;/snapshots&gt;\n      &lt;/repository&gt;\n      &lt;repository&gt;\n          &lt;id&gt;custom-repo&lt;/id&gt;\n          &lt;url&gt;https://vit-uk-life-dto.com/artifactory/appsmav-main-maven-local&lt;/url&gt;\n          &lt;releases&gt;\n              &lt;enabled&gt;true&lt;/enabled&gt;\n          &lt;/releases&gt;\n          &lt;snapshots&gt;\n              &lt;enabled&gt;false&lt;/enabled&gt;\n          &lt;/snapshots&gt;\n      &lt;/repository&gt;\n  &lt;/repositories&gt;\n  &lt;dependencies&gt;\n      &lt;dependency&gt;\n          &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n          &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n      &lt;/dependency&gt;\n      &lt;dependency&gt;\n          &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n          &lt;artifactId&gt;hibernate-validator&lt;/artifactId&gt;\n          &lt;version&gt;8.0.0.Final&lt;/version&gt;\n      &lt;/dependency&gt;\n\n      &lt;dependency&gt;\n          &lt;groupId&gt;io.smkfdk7.commons&lt;/groupId&gt;\n          &lt;artifactId&gt;commons-io&lt;/artifactId&gt;\n          &lt;version&gt;1.3.0&lt;/version&gt;\n      &lt;/dependency&gt;\n      \n      &lt;dependency&gt;\n          &lt;groupId&gt;com.scapps.common.api&lt;/groupId&gt;\n          &lt;artifactId&gt;scapps-commons-api&lt;/artifactId&gt;\n          &lt;version&gt;1.0&lt;/version&gt;\n      &lt;/dependency&gt;\n\n      &lt;dependency&gt;\n          &lt;groupId&gt;io.smkfdk7.commons&lt;/groupId&gt;\n          &lt;artifactId&gt;commons-utils&lt;/artifactId&gt;\n          &lt;version&gt;[1.0.0,2.0.0)&lt;/version&gt;\n      &lt;/dependency&gt;\n\n      &lt;dependency&gt;\n          &lt;groupId&gt;io.smkfdk7.commons&lt;/groupId&gt;\n          &lt;artifactId&gt;commons-jwt&lt;/artifactId&gt;\n          &lt;version&gt;1.0.8&lt;/version&gt;\n      &lt;/dependency&gt;\n\n      &lt;dependency&gt;\n          &lt;groupId&gt;org.glassfish.jersey.core&lt;/groupId&gt;\n          &lt;artifactId&gt;jersey-client&lt;/artifactId&gt;\n          &lt;version&gt;3.0.8&lt;/version&gt;\n      &lt;/dependency&gt;\n  &lt;/dependencies&gt;\n\n  &lt;build&gt;\n      &lt;finalName&gt;dmdex-core-service&lt;/finalName&gt;\n      &lt;plugins&gt;\n          &lt;plugin&gt;\n              &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n              &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n              &lt;configuration&gt;\n                  &lt;excludes&gt;\n                      &lt;exclude&gt;\n                          &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                          &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                      &lt;/exclude&gt;\n                  &lt;/excludes&gt;\n              &lt;/configuration&gt;\n          &lt;/plugin&gt;\n      &lt;/plugins&gt;\n  &lt;/build&gt;\n\n  &lt;profiles&gt;\n      &lt;profile&gt;\n          &lt;id&gt;custom-repo-auth&lt;/id&gt;\n          &lt;activation&gt;\n              &lt;activeByDefault&gt;false&lt;/activeByDefault&gt;\n          &lt;/activation&gt;\n          &lt;repositories&gt;\n              &lt;repository&gt;\n                  &lt;id&gt;custom-repo&lt;/id&gt;\n                  &lt;url&gt;https://vit-uk-life-dto.com/artifactory/appsmav-main-maven-local&lt;/url&gt;\n                  &lt;releases&gt;\n                      &lt;enabled&gt;true&lt;/enabled&gt;\n                  &lt;/releases&gt;\n                  &lt;snapshots&gt;\n                      &lt;enabled&gt;false&lt;/enabled&gt;\n                  &lt;/snapshots&gt;\n              &lt;/repository&gt;\n          &lt;/repositories&gt;\n      &lt;/profile&gt;\n  &lt;/profiles&gt;\n\n  &lt;properties&gt;\n      &lt;java.version&gt;17&lt;/java.version&gt;\n      &lt;custom-repo-username&gt;PID7552&lt;/custom-repo-username&gt;\n      &lt;custom-repo-password&gt;bvdbhsdvhfbvhfbvbfvhfhjfhfvbdfbvhfvh&lt;/custom-repo-password&gt;\n  &lt;/properties&gt;\n\n&lt;/project&gt;\n</code></pre>\n"},{"tags":["java","multithreading","threadpool","executorservice","java-threads"],"comments":[{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1689845457,"post_id":76728486,"comment_id":135272090,"body_markdown":"I&#39;m not sure which api you are calling, but if it was mine I&#39;d be pretty unhappy. This borders on abuse, especially if the list of ids is bigger than ~4.","body":"I&#39;m not sure which api you are calling, but if it was mine I&#39;d be pretty unhappy. This borders on abuse, especially if the list of ids is bigger than ~4."}],"answers":[{"tags":[],"owner":{"account_id":17228781,"reputation":3548,"user_id":12473843,"display_name":"Sergey Tsypanov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689846893,"creation_date":1689846893,"answer_id":76728684,"question_id":76728486,"body_markdown":"You can do this with `CompletableFuture`:\r\n```java\r\nvoid foo(List&lt;String&gt; ids) throws Exception {\r\n  List&lt;CompletableFuture&lt;String&gt;&gt; futures = new ArrayList&lt;&gt;();\r\n  for (String id : ids) {\r\n    CompletableFuture&lt;String&gt; future = CompletableFuture.supplyAsync(() -&gt; hitEndpoint(id), executor);\r\n    futures.add(future);\r\n  }\r\n\r\n  String string = anyMatch(futures, str -&gt; str == &quot;apple&quot;).get();\r\n}\r\n\r\nstatic CompletableFuture&lt;String&gt; anyMatch(List&lt;? extends CompletionStage&lt;String&gt;&gt; l, Predicate&lt;String&gt; criteria) {\r\n\r\n  CompletableFuture&lt;String&gt; result = new CompletableFuture&lt;&gt;();\r\n  Consumer&lt;String&gt; whenMatching = v -&gt; {\r\n    if (criteria.test(v)) result.complete(v);\r\n  };\r\n  CompletableFuture.allOf(l.stream()\r\n                  .map(f -&gt; f.thenAccept(whenMatching)).toArray(CompletableFuture&lt;?&gt;[]::new))\r\n                  .whenComplete((ignored, t) -&gt;\r\n                  result.completeExceptionally(t != null ? t : new NoSuchElementException()));\r\n  return result;\r\n}\r\n```\r\nThe second method is taken from https://stackoverflow.com/questions/36612224/in-java-how-do-i-process-completablefutures-and-get-the-first-desireable-result\r\n\r\nOne more solution can be found on https://stackoverflow.com/questions/50517771/chain-completablefuture-and-stop-on-first-success","title":"ExecutorService listen to first task to finish in parallel and cancel the rest","body":"<p>You can do this with <code>CompletableFuture</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>void foo(List&lt;String&gt; ids) throws Exception {\n  List&lt;CompletableFuture&lt;String&gt;&gt; futures = new ArrayList&lt;&gt;();\n  for (String id : ids) {\n    CompletableFuture&lt;String&gt; future = CompletableFuture.supplyAsync(() -&gt; hitEndpoint(id), executor);\n    futures.add(future);\n  }\n\n  String string = anyMatch(futures, str -&gt; str == &quot;apple&quot;).get();\n}\n\nstatic CompletableFuture&lt;String&gt; anyMatch(List&lt;? extends CompletionStage&lt;String&gt;&gt; l, Predicate&lt;String&gt; criteria) {\n\n  CompletableFuture&lt;String&gt; result = new CompletableFuture&lt;&gt;();\n  Consumer&lt;String&gt; whenMatching = v -&gt; {\n    if (criteria.test(v)) result.complete(v);\n  };\n  CompletableFuture.allOf(l.stream()\n                  .map(f -&gt; f.thenAccept(whenMatching)).toArray(CompletableFuture&lt;?&gt;[]::new))\n                  .whenComplete((ignored, t) -&gt;\n                  result.completeExceptionally(t != null ? t : new NoSuchElementException()));\n  return result;\n}\n</code></pre>\n<p>The second method is taken from <a href=\"https://stackoverflow.com/questions/36612224/in-java-how-do-i-process-completablefutures-and-get-the-first-desireable-result\">In java, how do I process CompletableFutures and get the first desireable result that completes?</a></p>\n<p>One more solution can be found on <a href=\"https://stackoverflow.com/questions/50517771/chain-completablefuture-and-stop-on-first-success\">Chain CompletableFuture and stop on first success</a></p>\n"},{"tags":[],"owner":{"account_id":13993199,"reputation":129,"user_id":10362945,"display_name":"Sagar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689856355,"creation_date":1689856355,"answer_id":76729920,"question_id":76728486,"body_markdown":"Two factors are important for below algorithm to work efficiently\r\n - The blocking http call is sensitive to interrupt ,so as soon as it gets one ,it terminates with interruption and throws InterruptedException\r\n - The shutdownNow from executors will cancel execution of waiting threads,interrupts the executing thread as mentioned in doc\r\n\r\n&gt; Attempts to stop all actively executing tasks, halts the processing of waiting tasks, and returns a list of the tasks that were awaiting execution.\r\nThis method does not wait for actively executing tasks to terminate. Use awaitTermination to do that.\r\nThere are no guarantees beyond best-effort attempts to stop processing actively executing tasks. For example, typical implementations will cancel via Thread.interrupt, so any task that fails to respond to interrupts may never terminate.\r\n\r\nWe check on interrupt status before making the blocking call so that we don&#39;t miss on the already interrupted status\r\n\r\n```\r\nimport org.apache.commons.lang3.RandomUtils;\r\n...\r\n public static void main(String[] args) throws InterruptedException, ExecutionException {\r\n\r\n        Predicate&lt;CompletableFuture&gt; isCompletedExceptionally = CompletableFuture::isCompletedExceptionally;\r\n        Predicate&lt;CompletableFuture&gt; isNotCompletedExceptionally = isCompletedExceptionally.negate();\r\n        Stream&lt;String&gt; streamIds = IntStream.rangeClosed(1, 1000).mapToObj(String::valueOf);\r\n\r\n\r\n        CountDownLatch latch = new CountDownLatch(1);//only one result to succeed\r\n        ExecutorService executor = Executors.newFixedThreadPool(4);\r\n        List&lt;CompletableFuture&lt;String&gt;&gt; stringFutureResults = streamIds\r\n                                                                    .map(id -&gt; CompletableFuture.supplyAsync(() -&gt; hitEndpoint(id, latch), executor))\r\n                                                                    .collect(Collectors.toList());\r\n        latch.await();//waits for atleast one api call to succeed\r\n        executor.shutdownNow();//This will stop accepting new tasks and interrupts already executing tasks\r\n\r\n        Optional&lt;CompletableFuture&lt;String&gt;&gt; resultFuture = stringFutureResults.stream()\r\n                .filter(isNotCompletedExceptionally)\r\n                //.filter(CompletableFuture::isDone) // thread executing hitEndpoint never got a chance to return\r\n                .filter(future -&gt; future.join() != null)\r\n                .findFirst();\r\n\r\n        System.out.println(resultFuture.get().get());\r\n\r\n    }\r\n\r\n\r\n    private static String hitEndpoint(String id, CountDownLatch latch) {\r\n\r\n        try {\r\n            if (latch.getCount()&gt;0 &amp;&amp; !Thread.currentThread().isInterrupted()){\r\n                //api call\r\n                Thread.sleep(RandomUtils.nextLong(100,900));//Generally a http call is sensitive to interrupt\r\n                latch.countDown();\r\n                return &quot;Api Response&quot;+id;\r\n            }\r\n\r\n        } catch (InterruptedException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n        Thread.currentThread().interrupt();//Its response is not required\r\n        return null;\r\n    }\r\n   \r\n```\r\n\r\n","title":"ExecutorService listen to first task to finish in parallel and cancel the rest","body":"<p>Two factors are important for below algorithm to work efficiently</p>\n<ul>\n<li>The blocking http call is sensitive to interrupt ,so as soon as it gets one ,it terminates with interruption and throws InterruptedException</li>\n<li>The shutdownNow from executors will cancel execution of waiting threads,interrupts the executing thread as mentioned in doc</li>\n</ul>\n<blockquote>\n<p>Attempts to stop all actively executing tasks, halts the processing of waiting tasks, and returns a list of the tasks that were awaiting execution.\nThis method does not wait for actively executing tasks to terminate. Use awaitTermination to do that.\nThere are no guarantees beyond best-effort attempts to stop processing actively executing tasks. For example, typical implementations will cancel via Thread.interrupt, so any task that fails to respond to interrupts may never terminate.</p>\n</blockquote>\n<p>We check on interrupt status before making the blocking call so that we don't miss on the already interrupted status</p>\n<pre><code>import org.apache.commons.lang3.RandomUtils;\n...\n public static void main(String[] args) throws InterruptedException, ExecutionException {\n\n        Predicate&lt;CompletableFuture&gt; isCompletedExceptionally = CompletableFuture::isCompletedExceptionally;\n        Predicate&lt;CompletableFuture&gt; isNotCompletedExceptionally = isCompletedExceptionally.negate();\n        Stream&lt;String&gt; streamIds = IntStream.rangeClosed(1, 1000).mapToObj(String::valueOf);\n\n\n        CountDownLatch latch = new CountDownLatch(1);//only one result to succeed\n        ExecutorService executor = Executors.newFixedThreadPool(4);\n        List&lt;CompletableFuture&lt;String&gt;&gt; stringFutureResults = streamIds\n                                                                    .map(id -&gt; CompletableFuture.supplyAsync(() -&gt; hitEndpoint(id, latch), executor))\n                                                                    .collect(Collectors.toList());\n        latch.await();//waits for atleast one api call to succeed\n        executor.shutdownNow();//This will stop accepting new tasks and interrupts already executing tasks\n\n        Optional&lt;CompletableFuture&lt;String&gt;&gt; resultFuture = stringFutureResults.stream()\n                .filter(isNotCompletedExceptionally)\n                //.filter(CompletableFuture::isDone) // thread executing hitEndpoint never got a chance to return\n                .filter(future -&gt; future.join() != null)\n                .findFirst();\n\n        System.out.println(resultFuture.get().get());\n\n    }\n\n\n    private static String hitEndpoint(String id, CountDownLatch latch) {\n\n        try {\n            if (latch.getCount()&gt;0 &amp;&amp; !Thread.currentThread().isInterrupted()){\n                //api call\n                Thread.sleep(RandomUtils.nextLong(100,900));//Generally a http call is sensitive to interrupt\n                latch.countDown();\n                return &quot;Api Response&quot;+id;\n            }\n\n        } catch (InterruptedException e) {\n            throw new RuntimeException(e);\n        }\n        Thread.currentThread().interrupt();//Its response is not required\n        return null;\n    }\n   \n</code></pre>\n"}],"owner":{"account_id":484123,"reputation":1933,"user_id":899611,"accept_rate":54,"display_name":"luckysing_noobster"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1689856355,"creation_date":1689845343,"question_id":76728486,"body_markdown":"I want to run couple of tasks in parallel via `ExecutorService`. Each of these task return a string from the same endpoint but with a different result! For example if I execute 4 of these tasks in parallel I can get apple, mangoes, oranges, or a API failure. I am trying to figure out how I can run these tasks in parallel and be able to get the result for the first successful task execution and then I would like to cancel the rest of the tasks in the executor thread pool\r\n\r\n\r\n```java\r\n\r\n    List&lt;Callable&lt;String&gt;&gt; tasks = new ArrayList&lt;&gt;();\r\n    for (String id:  ids){\r\n      tasks.add(() -&gt; hitEndpoint(id));\r\n    }\r\n      List&lt;Future&lt;String&gt;&gt; stringFutureResults = null;\r\n      stringFutureResults= executor.invokeAll(tasks); //execute all in parallel \r\n\r\n      for (Future&lt;String&gt; strFuture : stringFutureResults) {\r\n        String st1 = strFuture.get();\r\n        if (st1 == &quot;apple&quot;) {\r\n         // stop execution of all the other tasks or is it too late at this point and all the tasks would have already been executed with the result and status \r\n        }\r\n    }```    \r\n","title":"ExecutorService listen to first task to finish in parallel and cancel the rest","body":"<p>I want to run couple of tasks in parallel via <code>ExecutorService</code>. Each of these task return a string from the same endpoint but with a different result! For example if I execute 4 of these tasks in parallel I can get apple, mangoes, oranges, or a API failure. I am trying to figure out how I can run these tasks in parallel and be able to get the result for the first successful task execution and then I would like to cancel the rest of the tasks in the executor thread pool</p>\n<pre class=\"lang-java prettyprint-override\"><code>\n    List&lt;Callable&lt;String&gt;&gt; tasks = new ArrayList&lt;&gt;();\n    for (String id:  ids){\n      tasks.add(() -&gt; hitEndpoint(id));\n    }\n      List&lt;Future&lt;String&gt;&gt; stringFutureResults = null;\n      stringFutureResults= executor.invokeAll(tasks); //execute all in parallel \n\n      for (Future&lt;String&gt; strFuture : stringFutureResults) {\n        String st1 = strFuture.get();\n        if (st1 == &quot;apple&quot;) {\n         // stop execution of all the other tasks or is it too late at this point and all the tasks would have already been executed with the result and status \n        }\n    }```    \n</code></pre>\n"},{"tags":["java","keycloak","quarkus"],"comments":[{"owner":{"account_id":1152519,"reputation":733,"user_id":1133928,"display_name":"Sergey Beryozkin"},"score":0,"creation_date":1689764604,"post_id":76715602,"comment_id":135258608,"body_markdown":"Is this error reported in `initKeycloak` or when creating a new user ?","body":"Is this error reported in <code>initKeycloak</code> or when creating a new user ?"}],"answers":[{"tags":[],"owner":{"account_id":29043910,"reputation":47,"user_id":22248180,"display_name":"Waldo"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689856234,"creation_date":1689856234,"answer_id":76729892,"question_id":76715602,"body_markdown":"I found the problem.\r\nI was running on RESTEasy Classic but it seems you need RESTEasy Reactive.\r\nAfter changing to it, it worked with no problem.","title":"Keycloak admin client authHeader is null","body":"<p>I found the problem.\nI was running on RESTEasy Classic but it seems you need RESTEasy Reactive.\nAfter changing to it, it worked with no problem.</p>\n"}],"owner":{"account_id":29043910,"reputation":47,"user_id":22248180,"display_name":"Waldo"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":164,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1689856234,"creation_date":1689704475,"question_id":76715602,"body_markdown":"I&#39;m trying to create a new User in Keycloak with quarkus-keycloak-admin-client but it always says:\r\n Cannot invoke &quot;String.startsWith(String)&quot; because &quot;authHeader&quot; is null\r\n\r\n\r\n```\r\n\r\nimport jakarta.annotation.PostConstruct;\r\nimport jakarta.enterprise.context.ApplicationScoped;\r\nimport org.keycloak.OAuth2Constants;\r\nimport org.keycloak.admin.client.Keycloak;\r\nimport org.keycloak.admin.client.KeycloakBuilder;\r\nimport org.keycloak.representations.idm.RoleRepresentation;\r\nimport org.jboss.logging.Logger;\r\n\r\nimport java.util.List;\r\n\r\n@ApplicationScoped\r\npublic class AuthenticationCrontrol {\r\n    private static final Logger LOG = Logger.getLogger(AuthenticationCrontrol.class);\r\n\r\n    Keycloak keycloak;\r\n    public AuthenticationCrontrol() {\r\n    }\r\n    @PostConstruct\r\n    public void initKeycloak() {\r\n        keycloak = KeycloakBuilder.builder()\r\n                .serverUrl(&quot;http://localhost:8081/&quot;)\r\n                .realm(&quot;master&quot;)\r\n                .clientId(&quot;admin-cli&quot;)\r\n                .username(&quot;admin&quot;)\r\n                .password(&quot;admin&quot;)\r\n                .grantType(OAuth2Constants.PASSWORD)\r\n                .build();\r\n        LOG.info(&quot;Keycloak initialized&quot;);\r\n    }\r\n\r\n    public List&lt;RoleRepresentation&gt; getRoles() {\r\n        return keycloak.realm(&quot;master&quot;).roles().list();\r\n    }\r\n}\r\n```\r\nthis is my class\r\n\r\n\r\n```\r\n# OIDC Configuration\r\n%test.quarkus.keycloak.devservices.enabled=true\r\n%dev.quarkus.keycloak.devservices.enabled=true\r\n%prod.quarkus.keycloak.devservices.enabled=false\r\n\r\n# Keycloak Port\r\nquarkus.keycloak.devservices.port=8081\r\n%test.quarkus.keycloak.devservices.port=8181\r\n%prod.quarkus.oidc.auth-server-url=https://localhost:8543/realms/quarkus\r\nquarkus.oidc.client-id=dolmetscher\r\nquarkus.keycloak.devservices.grant.type=client\r\nquarkus.oidc.application-type=hybrid\r\nquarkus.oidc.credentials.secret=secret\r\nquarkus.oidc.tls.verification=none\r\n```\r\n\r\nthis is my application.properties\r\n\r\nWhat am i missing??\r\n","title":"Keycloak admin client authHeader is null","body":"<p>I'm trying to create a new User in Keycloak with quarkus-keycloak-admin-client but it always says:\nCannot invoke &quot;String.startsWith(String)&quot; because &quot;authHeader&quot; is null</p>\n<pre><code>\nimport jakarta.annotation.PostConstruct;\nimport jakarta.enterprise.context.ApplicationScoped;\nimport org.keycloak.OAuth2Constants;\nimport org.keycloak.admin.client.Keycloak;\nimport org.keycloak.admin.client.KeycloakBuilder;\nimport org.keycloak.representations.idm.RoleRepresentation;\nimport org.jboss.logging.Logger;\n\nimport java.util.List;\n\n@ApplicationScoped\npublic class AuthenticationCrontrol {\n    private static final Logger LOG = Logger.getLogger(AuthenticationCrontrol.class);\n\n    Keycloak keycloak;\n    public AuthenticationCrontrol() {\n    }\n    @PostConstruct\n    public void initKeycloak() {\n        keycloak = KeycloakBuilder.builder()\n                .serverUrl(&quot;http://localhost:8081/&quot;)\n                .realm(&quot;master&quot;)\n                .clientId(&quot;admin-cli&quot;)\n                .username(&quot;admin&quot;)\n                .password(&quot;admin&quot;)\n                .grantType(OAuth2Constants.PASSWORD)\n                .build();\n        LOG.info(&quot;Keycloak initialized&quot;);\n    }\n\n    public List&lt;RoleRepresentation&gt; getRoles() {\n        return keycloak.realm(&quot;master&quot;).roles().list();\n    }\n}\n</code></pre>\n<p>this is my class</p>\n<pre><code># OIDC Configuration\n%test.quarkus.keycloak.devservices.enabled=true\n%dev.quarkus.keycloak.devservices.enabled=true\n%prod.quarkus.keycloak.devservices.enabled=false\n\n# Keycloak Port\nquarkus.keycloak.devservices.port=8081\n%test.quarkus.keycloak.devservices.port=8181\n%prod.quarkus.oidc.auth-server-url=https://localhost:8543/realms/quarkus\nquarkus.oidc.client-id=dolmetscher\nquarkus.keycloak.devservices.grant.type=client\nquarkus.oidc.application-type=hybrid\nquarkus.oidc.credentials.secret=secret\nquarkus.oidc.tls.verification=none\n</code></pre>\n<p>this is my application.properties</p>\n<p>What am i missing??</p>\n"},{"tags":["java","spring","rest","mockito","spring-test-mvc"],"comments":[{"owner":{"account_id":152128,"reputation":9392,"user_id":366447,"accept_rate":80,"display_name":"AHungerArtist"},"score":1,"creation_date":1513022248,"post_id":47759833,"comment_id":82482146,"body_markdown":"I don&#39;t think the param() method is equivalent to putting a path variable like the API has it, but I&#39;m not sure.In other words, I think the call the test is doing is more like /api/foo?id=11 instead of /api/foo/11. This is just a guess, though.","body":"I don&#39;t think the param() method is equivalent to putting a path variable like the API has it, but I&#39;m not sure.In other words, I think the call the test is doing is more like /api/foo?id=11 instead of /api/foo/11. This is just a guess, though."},{"owner":{"account_id":8622016,"reputation":4803,"user_id":6456586,"accept_rate":63,"display_name":"Denis Stephanov"},"score":0,"creation_date":1513022654,"post_id":47759833,"comment_id":82482335,"body_markdown":"@AHungerArtist I&#39;ve changed it but same error.","body":"@AHungerArtist I&#39;ve changed it but same error."}],"answers":[{"tags":[],"owner":{"account_id":11175092,"reputation":45706,"user_id":8200937,"display_name":"glytching"},"down_vote_count":0,"up_vote_count":15,"is_accepted":true,"score":15,"last_activity_date":1513026863,"creation_date":1513026863,"answer_id":47761530,"question_id":47759833,"body_markdown":"Your target URI is: `/api/foo/11` based on this root: `/api/foo` and this path variable: `/{id}`.\r\n\r\nWhen using `MockMvc` you set path variables (aka URI variables) like so:\r\n\r\n    delete(uri, uriVars)\r\n\r\nMore details [in the Javadocs](https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/test/web/servlet/request/MockMvcRequestBuilders.html#delete-java.lang.String-java.lang.Object...-).\r\n\r\nSo, your test should read:\r\n\r\n    @Test\r\n    public void testFooDelete() throws Exception {\r\n        this.mockMvc.perform(MockMvcRequestBuilders\r\n                .delete(&quot;/api/foo/{id}&quot;, &quot;11&quot;)\r\n                .contentType(MediaType.APPLICATION_JSON))\r\n                .accept(MediaType.APPLICATION_JSON))\r\n                .andExpect(status().isOk());\r\n    }\r\n\r\nOr alternatively:\r\n\r\n    @Test\r\n    public void testFooDelete() throws Exception {\r\n        this.mockMvc.perform(MockMvcRequestBuilders\r\n                .delete(&quot;/api/foo/11&quot;)\r\n                .contentType(MediaType.APPLICATION_JSON))\r\n                .accept(MediaType.APPLICATION_JSON))\r\n                .andExpect(status().isOk());\r\n    }\r\n\r\n","title":"Spring MockMvc - How to test delete request of REST controller?","body":"<p>Your target URI is: <code>/api/foo/11</code> based on this root: <code>/api/foo</code> and this path variable: <code>/{id}</code>.</p>\n\n<p>When using <code>MockMvc</code> you set path variables (aka URI variables) like so:</p>\n\n<pre><code>delete(uri, uriVars)\n</code></pre>\n\n<p>More details <a href=\"https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/test/web/servlet/request/MockMvcRequestBuilders.html#delete-java.lang.String-java.lang.Object...-\" rel=\"noreferrer\">in the Javadocs</a>.</p>\n\n<p>So, your test should read:</p>\n\n<pre><code>@Test\npublic void testFooDelete() throws Exception {\n    this.mockMvc.perform(MockMvcRequestBuilders\n            .delete(\"/api/foo/{id}\", \"11\")\n            .contentType(MediaType.APPLICATION_JSON))\n            .accept(MediaType.APPLICATION_JSON))\n            .andExpect(status().isOk());\n}\n</code></pre>\n\n<p>Or alternatively:</p>\n\n<pre><code>@Test\npublic void testFooDelete() throws Exception {\n    this.mockMvc.perform(MockMvcRequestBuilders\n            .delete(\"/api/foo/11\")\n            .contentType(MediaType.APPLICATION_JSON))\n            .accept(MediaType.APPLICATION_JSON))\n            .andExpect(status().isOk());\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18899515,"reputation":99,"user_id":13787867,"display_name":"bednarb"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689855378,"creation_date":1689855378,"answer_id":76729766,"question_id":47759833,"body_markdown":"The previous answer is for sure correct :) But if you want to test the 204 response code:\r\n\r\n    @Test\r\n    public void testFooDelete() throws Exception {\r\n        ...\r\n        .andExpect(status().isNoContent());\r\n    }\r\n\r\nyou can explicitly say what should be returned by your delete method by using **@ResponseStatus**:\r\n\r\n    @RequestMapping(path=&quot;/{id}&quot;, method = RequestMethod.DELETE)\r\n    @ResponseStatus(value = HttpStatus.NO_CONTENT)\r\n    public void delete(@PathVariable Long id) {\r\n        fooService.delete(id);\r\n    } ","title":"Spring MockMvc - How to test delete request of REST controller?","body":"<p>The previous answer is for sure correct :) But if you want to test the 204 response code:</p>\n<pre><code>@Test\npublic void testFooDelete() throws Exception {\n    ...\n    .andExpect(status().isNoContent());\n}\n</code></pre>\n<p>you can explicitly say what should be returned by your delete method by using <strong>@ResponseStatus</strong>:</p>\n<pre><code>@RequestMapping(path=&quot;/{id}&quot;, method = RequestMethod.DELETE)\n@ResponseStatus(value = HttpStatus.NO_CONTENT)\npublic void delete(@PathVariable Long id) {\n    fooService.delete(id);\n} \n</code></pre>\n"}],"owner":{"account_id":8622016,"reputation":4803,"user_id":6456586,"accept_rate":63,"display_name":"Denis Stephanov"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":29973,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"accepted_answer_id":47761530,"answer_count":2,"score":10,"last_activity_date":1689855378,"creation_date":1513019811,"question_id":47759833,"body_markdown":"I need to test my controller methods including a delete method. Here is partial controller code:\r\n\r\n    @RestController\r\n    @RequestMapping(&quot;/api/foo&quot;)\r\n    public class FooController {\r\n    \r\n        @Autowired\r\n        private FooService fooService;\r\n    \r\n        // other methods which works fine in tests\r\n    \r\n        @RequestMapping(path=&quot;/{id}&quot;, method = RequestMethod.DELETE)\r\n        public void delete(@PathVariable Long id) {\r\n            fooService.delete(id);\r\n        }    \r\n    }\r\n\r\nAnd here is my test:\r\n\r\n    @InjectMocks\r\n    private FooController fooController;\r\n\r\n    @Before\r\n    public void setUp() {\r\n        this.mockMvc = MockMvcBuilders.standaloneSetup(fooController)\r\n    .setControllerAdvice(new ExceptionHandler()).alwaysExpect(MockMvcResultMatchers.content().contentType(&quot;application/json;charset=UTF-8&quot;)).build();\r\n    }\r\n\r\n    @Test\r\n    public void testFooDelete() throws Exception {\r\n        this.mockMvc.perform(MockMvcRequestBuilders\r\n                .delete(&quot;/api/foo&quot;)\r\n                .param(&quot;id&quot;, &quot;11&quot;)\r\n                .contentType(MediaType.APPLICATION_JSON))\r\n                .accept(MediaType.APPLICATION_JSON))\r\n                .andExpect(status().isOk());\r\n    }\r\n\r\nTest finish with failure because incorrect status code:\r\n\r\n&gt; java.lang.AssertionError: Status \r\n&gt; Expected :200 Actual   :400\r\n\r\nIn console log I also found this:\r\n\r\n    2017-12-11 20:11:01 [main] DEBUG o.s.t.w.s.TestDispatcherServlet - DispatcherServlet with name &#39;&#39; processing DELETE request for [/api/foo]\r\n    2017-12-11 20:11:01 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /api/foo\r\n    2017-12-11 20:11:01 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolving exception from handler [null]: org.springframework.web.HttpRequestMethodNotSupportedException: Request method &#39;DELETE&#39; not supported\r\n    2017-12-11 20:11:01 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Invoking @ExceptionHandler method: public org.springframework.http.ResponseEntity&lt;java.util.Map&lt;java.lang.String, java.lang.Object&gt;&gt; cz.ita.javaee.web.controller.error.ExceptionHandler.handleException(java.lang.Exception)\r\n    2017-12-11 20:11:01 [main] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Written [{stackTrace=org.springframework.web.HttpRequestMethodNotSupportedException: Request method &#39;DELETE&#39; not supported\r\n\r\nCan you tell me how to fix it? Thanks.","title":"Spring MockMvc - How to test delete request of REST controller?","body":"<p>I need to test my controller methods including a delete method. Here is partial controller code:</p>\n\n<pre><code>@RestController\n@RequestMapping(\"/api/foo\")\npublic class FooController {\n\n    @Autowired\n    private FooService fooService;\n\n    // other methods which works fine in tests\n\n    @RequestMapping(path=\"/{id}\", method = RequestMethod.DELETE)\n    public void delete(@PathVariable Long id) {\n        fooService.delete(id);\n    }    \n}\n</code></pre>\n\n<p>And here is my test:</p>\n\n<pre><code>@InjectMocks\nprivate FooController fooController;\n\n@Before\npublic void setUp() {\n    this.mockMvc = MockMvcBuilders.standaloneSetup(fooController)\n.setControllerAdvice(new ExceptionHandler()).alwaysExpect(MockMvcResultMatchers.content().contentType(\"application/json;charset=UTF-8\")).build();\n}\n\n@Test\npublic void testFooDelete() throws Exception {\n    this.mockMvc.perform(MockMvcRequestBuilders\n            .delete(\"/api/foo\")\n            .param(\"id\", \"11\")\n            .contentType(MediaType.APPLICATION_JSON))\n            .accept(MediaType.APPLICATION_JSON))\n            .andExpect(status().isOk());\n}\n</code></pre>\n\n<p>Test finish with failure because incorrect status code:</p>\n\n<blockquote>\n  <p>java.lang.AssertionError: Status \n  Expected :200 Actual   :400</p>\n</blockquote>\n\n<p>In console log I also found this:</p>\n\n<pre><code>2017-12-11 20:11:01 [main] DEBUG o.s.t.w.s.TestDispatcherServlet - DispatcherServlet with name '' processing DELETE request for [/api/foo]\n2017-12-11 20:11:01 [main] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Looking up handler method for path /api/foo\n2017-12-11 20:11:01 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolving exception from handler [null]: org.springframework.web.HttpRequestMethodNotSupportedException: Request method 'DELETE' not supported\n2017-12-11 20:11:01 [main] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Invoking @ExceptionHandler method: public org.springframework.http.ResponseEntity&lt;java.util.Map&lt;java.lang.String, java.lang.Object&gt;&gt; cz.ita.javaee.web.controller.error.ExceptionHandler.handleException(java.lang.Exception)\n2017-12-11 20:11:01 [main] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Written [{stackTrace=org.springframework.web.HttpRequestMethodNotSupportedException: Request method 'DELETE' not supported\n</code></pre>\n\n<p>Can you tell me how to fix it? Thanks.</p>\n"},{"tags":["java","android-studio"],"comments":[{"owner":{"account_id":22580507,"reputation":821,"user_id":16765223,"display_name":"M DEV"},"score":0,"creation_date":1689854539,"post_id":76727530,"comment_id":135273890,"body_markdown":"Can you share your XML code also in the above code? So that I can figure out that code","body":"Can you share your XML code also in the above code? So that I can figure out that code"}],"answers":[{"tags":[],"owner":{"account_id":22580507,"reputation":821,"user_id":16765223,"display_name":"M DEV"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689854796,"creation_date":1689854796,"answer_id":76729678,"question_id":76727530,"body_markdown":"I think you added ImageView inside your toolbar. Let&#39;s try the below code.\r\n```\r\nprofileButton = toolbar.findViewById(R.id.profileButton); // call findViewById with toolbar.\r\n\r\nprofileButton.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = new Intent(getApplicationContext(), user_login.class);\r\n                startActivity(intent);\r\n                finish();\r\n            }\r\n        });\r\n\r\n```\r\nLet me know if not resolved.\r\n","title":"to open another activity by clicking on an imageview in toolbar","body":"<p>I think you added ImageView inside your toolbar. Let's try the below code.</p>\n<pre><code>profileButton = toolbar.findViewById(R.id.profileButton); // call findViewById with toolbar.\n\nprofileButton.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                Intent intent = new Intent(getApplicationContext(), user_login.class);\n                startActivity(intent);\n                finish();\n            }\n        });\n\n</code></pre>\n<p>Let me know if not resolved.</p>\n"}],"owner":{"account_id":23683022,"reputation":1,"user_id":17708325,"display_name":"Kenne Dany"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":9,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689854796,"creation_date":1689837651,"question_id":76727530,"body_markdown":"i put a setOnClickListener on an imageview that should normally open another activity but yet when i click on the icon of the imageview the app itself rather closeup. i dont no what causes that.please help\r\n\r\ni put a `setOnClickListener` on the imageview that permit to open the next activtiy the code is the section in bold\r\n\r\n```\r\npublic class MainActivity extends AppCompatActivity {\r\n\r\n    ImageView lang, share, profileButton;\r\n    TextView title;\r\n    private EditText depart, arriver;\r\n    private Button verifyButton;\r\n    BottomNavigationView bottomNavigationView;\r\n\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        Toolbar toolbar = findViewById(R.id.toolbar);\r\n        setSupportActionBar(toolbar);\r\n\r\n        title = findViewById(R.id.title1);\r\n        title.setText(&quot;EasyBooking&quot;);\r\n        lang = findViewById(R.id.lang);\r\n        share = findViewById(R.id.shareButton);\r\n\r\n      ** this.profileButton = (ImageView) findViewById(R.id.profileButton);\r\n\r\n        profileButton.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = new Intent(getApplicationContext(), user_login.class);\r\n                startActivity(intent);\r\n                finish();\r\n            }\r\n        });**\r\n\r\n\r\n        depart = findViewById(R.id.departurepoint);\r\n        arriver = findViewById(R.id.arrivingpoint);\r\n        verifyButton = findViewById(R.id.search);\r\n\r\n        verifyButton.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                String departure = depart.getText().toString();\r\n                String arrival = arriver.getText().toString();\r\n\r\n                // Appeler une m&#233;thode pour ouvrir l&#39;activit&#233; correspondante avec les noms de d&#233;part et d&#39;arriv&#233;e\r\n                openActivity(departure, arrival);\r\n            }\r\n        });\r\n\r\n        //autocomplete texteview of departurepoint\r\n        String[] Towns = getResources().getStringArray(R.array.TownDeparture);\r\n\r\n        AutoCompleteTextView editText = findViewById(R.id.departurepoint);\r\n        ArrayAdapter&lt;String&gt; adapter = new ArrayAdapter&lt;&gt;(this, android.R.layout.simple_list_item_1,\r\n                Towns);\r\n        editText.setAdapter(adapter);\r\n\r\n        //autocomplete texteview arrivingpoints\r\n        String[] Town = getResources().getStringArray(R.array.ArrivingTowns);\r\n        AutoCompleteTextView editTexts = findViewById(R.id.arrivingpoint);\r\n        ArrayAdapter&lt;String&gt; adapter1 = new ArrayAdapter&lt;&gt;(this, android.R.layout.simple_list_item_1,Towns);\r\n        editTexts.setAdapter(adapter1);\r\n\r\n        bottomNavigationView = findViewById(R.id.botton_nav_bar1);\r\n        bottomNavigationView.setSelectedItemId(R.id.Idhome);\r\n        bottomNavigationView.setOnItemSelectedListener(new NavigationBarView.OnItemSelectedListener() {\r\n            @Override\r\n            public boolean onNavigationItemSelected(@NonNull MenuItem item) {\r\n                int itemId = item.getItemId();\r\n\r\n                if (itemId == R.id.Idhome){\r\n                    return true;\r\n                } else if (itemId == R.id.Idagence) {\r\n                    startActivity(new Intent(getApplicationContext(), Agence.class));\r\n                    overridePendingTransition(0, 0);\r\n                    return true;\r\n                } else if (itemId == R.id.Idticket) {\r\n                    startActivity(new Intent(getApplicationContext(), Ticket.class));\r\n                    overridePendingTransition(0, 0);\r\n                    return true;\r\n                }else if (itemId == R.id.Idsetting) {\r\n                    startActivity(new Intent(getApplicationContext(), Setting.class));\r\n                    overridePendingTransition(0, 0);\r\n                    return true;\r\n                }\r\n\r\n                return false;\r\n            }\r\n        });\r\n\r\n// Ajouter un OnClickListener au TextView\r\n        share.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                // Cr&#233;er un intent avec l&#39;action ACTION_SEND\r\n                Intent intent = new Intent(Intent.ACTION_SEND);\r\n\r\n                // D&#233;finir le type de contenu &#224; partager (texte)\r\n                intent.setType(&quot;text/plain&quot;);\r\n\r\n                // Ajouter le texte de partage &#224; l&#39;intent\r\n                intent.putExtra(Intent.EXTRA_TEXT, &quot;Lien de partage de l&#39;application&quot;);\r\n\r\n                // D&#233;marrer l&#39;activit&#233; de partage\r\n                startActivity(Intent.createChooser(intent, &quot;Partager via&quot;));\r\n            }\r\n        });\r\n\r\n\r\n       /* Ajouter un OnClickListener au TextView\r\n        lang.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                // Cr&#233;er un objet Locale pour la langue anglaise\r\n                Locale locale = new Locale(&quot;en&quot;);\r\n\r\n                // Mettre &#224; jour la configuration de localisation de l&#39;application\r\n                Configuration configuration = new Configuration(getResources().getConfiguration());\r\n                configuration.setLocale(locale);\r\n                getResources().updateConfiguration(configuration, getResources().getDisplayMetrics());\r\n\r\n                // Red&#233;marrer l&#39;activit&#233; pour appliquer les changements de langue\r\n                recreate();\r\n            }\r\n        });*/\r\n\r\n    }\r\n\r\n    private void openActivity(String departure, String arrival) {\r\n        // Cr&#233;ez une intention pour ouvrir l&#39;activit&#233; correspondante\r\n        Intent intent = new Intent(this, Douala__Bafoussam.class);\r\n        intent.putExtra(&quot;departure&quot;, departure);\r\n        intent.putExtra(&quot;arrival&quot;, arrival);\r\n        startActivity(intent);\r\n    }\r\n}\r\n```\r\n","title":"to open another activity by clicking on an imageview in toolbar","body":"<p>i put a setOnClickListener on an imageview that should normally open another activity but yet when i click on the icon of the imageview the app itself rather closeup. i dont no what causes that.please help</p>\n<p>i put a <code>setOnClickListener</code> on the imageview that permit to open the next activtiy the code is the section in bold</p>\n<pre><code>public class MainActivity extends AppCompatActivity {\n\n    ImageView lang, share, profileButton;\n    TextView title;\n    private EditText depart, arriver;\n    private Button verifyButton;\n    BottomNavigationView bottomNavigationView;\n\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        Toolbar toolbar = findViewById(R.id.toolbar);\n        setSupportActionBar(toolbar);\n\n        title = findViewById(R.id.title1);\n        title.setText(&quot;EasyBooking&quot;);\n        lang = findViewById(R.id.lang);\n        share = findViewById(R.id.shareButton);\n\n      ** this.profileButton = (ImageView) findViewById(R.id.profileButton);\n\n        profileButton.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                Intent intent = new Intent(getApplicationContext(), user_login.class);\n                startActivity(intent);\n                finish();\n            }\n        });**\n\n\n        depart = findViewById(R.id.departurepoint);\n        arriver = findViewById(R.id.arrivingpoint);\n        verifyButton = findViewById(R.id.search);\n\n        verifyButton.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                String departure = depart.getText().toString();\n                String arrival = arriver.getText().toString();\n\n                // Appeler une méthode pour ouvrir l'activité correspondante avec les noms de départ et d'arrivée\n                openActivity(departure, arrival);\n            }\n        });\n\n        //autocomplete texteview of departurepoint\n        String[] Towns = getResources().getStringArray(R.array.TownDeparture);\n\n        AutoCompleteTextView editText = findViewById(R.id.departurepoint);\n        ArrayAdapter&lt;String&gt; adapter = new ArrayAdapter&lt;&gt;(this, android.R.layout.simple_list_item_1,\n                Towns);\n        editText.setAdapter(adapter);\n\n        //autocomplete texteview arrivingpoints\n        String[] Town = getResources().getStringArray(R.array.ArrivingTowns);\n        AutoCompleteTextView editTexts = findViewById(R.id.arrivingpoint);\n        ArrayAdapter&lt;String&gt; adapter1 = new ArrayAdapter&lt;&gt;(this, android.R.layout.simple_list_item_1,Towns);\n        editTexts.setAdapter(adapter1);\n\n        bottomNavigationView = findViewById(R.id.botton_nav_bar1);\n        bottomNavigationView.setSelectedItemId(R.id.Idhome);\n        bottomNavigationView.setOnItemSelectedListener(new NavigationBarView.OnItemSelectedListener() {\n            @Override\n            public boolean onNavigationItemSelected(@NonNull MenuItem item) {\n                int itemId = item.getItemId();\n\n                if (itemId == R.id.Idhome){\n                    return true;\n                } else if (itemId == R.id.Idagence) {\n                    startActivity(new Intent(getApplicationContext(), Agence.class));\n                    overridePendingTransition(0, 0);\n                    return true;\n                } else if (itemId == R.id.Idticket) {\n                    startActivity(new Intent(getApplicationContext(), Ticket.class));\n                    overridePendingTransition(0, 0);\n                    return true;\n                }else if (itemId == R.id.Idsetting) {\n                    startActivity(new Intent(getApplicationContext(), Setting.class));\n                    overridePendingTransition(0, 0);\n                    return true;\n                }\n\n                return false;\n            }\n        });\n\n// Ajouter un OnClickListener au TextView\n        share.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                // Créer un intent avec l'action ACTION_SEND\n                Intent intent = new Intent(Intent.ACTION_SEND);\n\n                // Définir le type de contenu à partager (texte)\n                intent.setType(&quot;text/plain&quot;);\n\n                // Ajouter le texte de partage à l'intent\n                intent.putExtra(Intent.EXTRA_TEXT, &quot;Lien de partage de l'application&quot;);\n\n                // Démarrer l'activité de partage\n                startActivity(Intent.createChooser(intent, &quot;Partager via&quot;));\n            }\n        });\n\n\n       /* Ajouter un OnClickListener au TextView\n        lang.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                // Créer un objet Locale pour la langue anglaise\n                Locale locale = new Locale(&quot;en&quot;);\n\n                // Mettre à jour la configuration de localisation de l'application\n                Configuration configuration = new Configuration(getResources().getConfiguration());\n                configuration.setLocale(locale);\n                getResources().updateConfiguration(configuration, getResources().getDisplayMetrics());\n\n                // Redémarrer l'activité pour appliquer les changements de langue\n                recreate();\n            }\n        });*/\n\n    }\n\n    private void openActivity(String departure, String arrival) {\n        // Créez une intention pour ouvrir l'activité correspondante\n        Intent intent = new Intent(this, Douala__Bafoussam.class);\n        intent.putExtra(&quot;departure&quot;, departure);\n        intent.putExtra(&quot;arrival&quot;, arrival);\n        startActivity(intent);\n    }\n}\n</code></pre>\n"},{"tags":["java","ssl","okhttp"],"answers":[{"tags":[],"owner":{"account_id":27699053,"reputation":2348,"user_id":21144042,"display_name":"Diego Borba"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689854668,"creation_date":1689854415,"answer_id":76729640,"question_id":73128409,"body_markdown":"It happends becouse you are talking to an HTTP server, not an HTTPS server. You should try:\r\n\r\n - Check the port number\r\n - Modify to use one HTTP endpoint\r\n - Proxy the request as HTTPS\r\n \r\nCheck this out:\r\n - [Unrecognized SSL message, plaintext connection? Exception][1]\r\n - [Http request has been block from https][2]\r\n\r\n  [1]: https://stackoverflow.com/questions/6532273/unrecognized-ssl-message-plaintext-connection-exception\r\n  [2]: https://stackoverflow.com/questions/32676041/http-request-has-been-block-from-https","title":"okhttp3 error Unsupported or unrecognized SSL message","body":"<p>It happends becouse you are talking to an HTTP server, not an HTTPS server. You should try:</p>\n<ul>\n<li>Check the port number</li>\n<li>Modify to use one HTTP endpoint</li>\n<li>Proxy the request as HTTPS</li>\n</ul>\n<p>Check this out:</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/6532273/unrecognized-ssl-message-plaintext-connection-exception\">Unrecognized SSL message, plaintext connection? Exception</a></li>\n<li><a href=\"https://stackoverflow.com/questions/32676041/http-request-has-been-block-from-https\">Http request has been block from https</a></li>\n</ul>\n"}],"owner":{"account_id":1551684,"reputation":1024,"user_id":1443928,"accept_rate":93,"display_name":"Hard Worker"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":434,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1689854668,"creation_date":1658861567,"question_id":73128409,"body_markdown":"I Working a Java API client class that makes a call to a server\r\nthis calls working as expected when running locally - but when I run them in Kubernetes they failed with the below error\r\n\r\nDo I need to specify a JVM options for working with SSL?\r\nI&#39;m running a main class no spring is used.\r\n\r\n**Error:**\r\n```\r\nCaused by: javax.net.ssl.SSLException: Unsupported or unrecognized SSL message\r\n    at java.base/sun.security.ssl.SSLSocketInputRecord.handleUnknownRecord(SSLSocketInputRecord.java:451)\r\n    at java.base/sun.security.ssl.SSLSocketInputRecord.decode(SSLSocketInputRecord.java:175)\r\n    at java.base/sun.security.ssl.SSLTransport.decode(SSLTransport.java:110)\r\n    at java.base/sun.security.ssl.SSLSocketImpl.decode(SSLSocketImpl.java:1493)\r\n    at java.base/sun.security.ssl.SSLSocketImpl.readHandshakeRecord(SSLSocketImpl.java:1399)\r\n    at java.base/sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:446)\r\n    at java.base/sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:417)\r\n    at okhttp3.internal.connection.RealConnection.connectTls(RealConnection.kt:379)\r\n    at okhttp3.internal.connection.RealConnection.establishProtocol(RealConnection.kt:337)\r\n    at okhttp3.internal.connection.RealConnection.connect(RealConnection.kt:209)\r\n    at okhttp3.internal.connection.ExchangeFinder.findConnection(ExchangeFinder.kt:226)\r\n    at okhttp3.internal.connection.ExchangeFinder.findHealthyConnection(ExchangeFinder.kt:106)\r\n    at okhttp3.internal.connection.ExchangeFinder.find(ExchangeFinder.kt:74)\r\n    at okhttp3.internal.connection.RealCall.initExchange$okhttp(RealCall.kt:255)\r\n    at okhttp3.internal.connection.ConnectInterceptor.intercept(ConnectInterceptor.kt:32)\r\n    at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.kt:109)\r\n    at okhttp3.internal.cache.CacheInterceptor.intercept(CacheInterceptor.kt:95)\r\n    at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.kt:109)\r\n    at okhttp3.internal.http.BridgeInterceptor.intercept(BridgeInterceptor.kt:83)\r\n    at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.kt:109)\r\n    at okhttp3.internal.http.RetryAndFollowUpInterceptor.intercept(RetryAndFollowUpInterceptor.kt:76)\r\n    at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.kt:109)\r\n```","title":"okhttp3 error Unsupported or unrecognized SSL message","body":"<p>I Working a Java API client class that makes a call to a server\nthis calls working as expected when running locally - but when I run them in Kubernetes they failed with the below error</p>\n<p>Do I need to specify a JVM options for working with SSL?\nI'm running a main class no spring is used.</p>\n<p><strong>Error:</strong></p>\n<pre><code>Caused by: javax.net.ssl.SSLException: Unsupported or unrecognized SSL message\n    at java.base/sun.security.ssl.SSLSocketInputRecord.handleUnknownRecord(SSLSocketInputRecord.java:451)\n    at java.base/sun.security.ssl.SSLSocketInputRecord.decode(SSLSocketInputRecord.java:175)\n    at java.base/sun.security.ssl.SSLTransport.decode(SSLTransport.java:110)\n    at java.base/sun.security.ssl.SSLSocketImpl.decode(SSLSocketImpl.java:1493)\n    at java.base/sun.security.ssl.SSLSocketImpl.readHandshakeRecord(SSLSocketImpl.java:1399)\n    at java.base/sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:446)\n    at java.base/sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:417)\n    at okhttp3.internal.connection.RealConnection.connectTls(RealConnection.kt:379)\n    at okhttp3.internal.connection.RealConnection.establishProtocol(RealConnection.kt:337)\n    at okhttp3.internal.connection.RealConnection.connect(RealConnection.kt:209)\n    at okhttp3.internal.connection.ExchangeFinder.findConnection(ExchangeFinder.kt:226)\n    at okhttp3.internal.connection.ExchangeFinder.findHealthyConnection(ExchangeFinder.kt:106)\n    at okhttp3.internal.connection.ExchangeFinder.find(ExchangeFinder.kt:74)\n    at okhttp3.internal.connection.RealCall.initExchange$okhttp(RealCall.kt:255)\n    at okhttp3.internal.connection.ConnectInterceptor.intercept(ConnectInterceptor.kt:32)\n    at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.kt:109)\n    at okhttp3.internal.cache.CacheInterceptor.intercept(CacheInterceptor.kt:95)\n    at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.kt:109)\n    at okhttp3.internal.http.BridgeInterceptor.intercept(BridgeInterceptor.kt:83)\n    at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.kt:109)\n    at okhttp3.internal.http.RetryAndFollowUpInterceptor.intercept(RetryAndFollowUpInterceptor.kt:76)\n    at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.kt:109)\n</code></pre>\n"},{"tags":["java","spring-boot"],"answers":[{"tags":[],"owner":{"account_id":17348847,"reputation":79,"user_id":12567771,"display_name":"Shekhar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689852060,"creation_date":1689852060,"answer_id":76729331,"question_id":76729155,"body_markdown":"You can create a filter and write logic to get IP from request and filter it\r\n\r\n    @Component\r\n    @Order(1)\r\n    public class IpFilter implements Filter {\r\n\r\n       @value(&quot;${allowed.ip:}&quot;)\r\n       private String whitelistedIp;\r\n\r\n        @Override\r\n        public void doFilter(\r\n          ServletRequest request, \r\n          ServletResponse response, \r\n          FilterChain chain) throws IOException, ServletException {\r\n \r\n            HttpServletRequest req = (HttpServletRequest) request;\r\n            String ip = req.getRemoteAddr();  \r\n            if (!ip.equals(whitelistedIp) {\r\n              // Update the logic if you want\r\n              req.reset();\r\n              return;\r\n            }\r\n            filterChain.doFilter(request, response);\r\n        }\r\n    }\r\n\r\n\r\n","title":"How to do IP whitelisting in Spring Boot 3.1.0?","body":"<p>You can create a filter and write logic to get IP from request and filter it</p>\n<pre><code>@Component\n@Order(1)\npublic class IpFilter implements Filter {\n\n   @value(&quot;${allowed.ip:}&quot;)\n   private String whitelistedIp;\n\n    @Override\n    public void doFilter(\n      ServletRequest request, \n      ServletResponse response, \n      FilterChain chain) throws IOException, ServletException {\n\n        HttpServletRequest req = (HttpServletRequest) request;\n        String ip = req.getRemoteAddr();  \n        if (!ip.equals(whitelistedIp) {\n          // Update the logic if you want\n          req.reset();\n          return;\n        }\n        filterChain.doFilter(request, response);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":24440940,"reputation":3122,"user_id":18364656,"display_name":"Andrei Lisa"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689853282,"creation_date":1689853282,"answer_id":76729477,"question_id":76729155,"body_markdown":"This was a bug after migration to `authorizeHttpRequests()` but Spring Framework Team have fixed it into new version.\r\n\r\n [Release Notes][1]\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://github.com/spring-projects/spring-security/releases\r\n  [2]: https://i.stack.imgur.com/dyT6d.png","title":"How to do IP whitelisting in Spring Boot 3.1.0?","body":"<p>This was a bug after migration to <code>authorizeHttpRequests()</code> but Spring Framework Team have fixed it into new version.</p>\n<p><a href=\"https://github.com/spring-projects/spring-security/releases\" rel=\"nofollow noreferrer\">Release Notes</a></p>\n<p><a href=\"https://i.stack.imgur.com/dyT6d.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dyT6d.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":2168148,"reputation":35,"user_id":1920774,"display_name":"Sarvesh H"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":140,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":2,"score":1,"last_activity_date":1689853282,"creation_date":1689850570,"question_id":76729155,"body_markdown":"We did Spring Boot upgrade to 3.1.0 from 2.6.0. The below IP whitelisting doesn&#39;t work as many of the methods are deprecated.\r\n```\r\n@Configuration\r\n@EnableWebSecurity\r\npublic class SecurityConfig extends WebSecurityConfigurerAdapter {\r\n\r\n    @Override\r\n    protected void configure(HttpSecurity http) throws Exception {\r\n        http.authorizeRequests()\r\n                .antMatchers(&quot;/**&quot;).hasIpAddress(&quot;192.0.0.1&quot;)\r\n    \t\t\t.and()\r\n    \t\t\t.csrf().disable();\r\n    }\r\n}\r\n```\r\nI am not able to figure out how to pass IP to whitelist to below code.\r\n```\r\n@Bean\r\npublic SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n    return http.authorizeHttpRequests(auth-&gt; {auth.requestMatchers(&quot;/**&quot;);\r\n        auth.requestMatchers(&quot;&quot;,&quot;&quot;);\r\n        auth.anyRequest().authenticated();})\r\n    .httpBasic(withDefaults()).build();\r\n}\r\n```","title":"How to do IP whitelisting in Spring Boot 3.1.0?","body":"<p>We did Spring Boot upgrade to 3.1.0 from 2.6.0. The below IP whitelisting doesn't work as many of the methods are deprecated.</p>\n<pre><code>@Configuration\n@EnableWebSecurity\npublic class SecurityConfig extends WebSecurityConfigurerAdapter {\n\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n        http.authorizeRequests()\n                .antMatchers(&quot;/**&quot;).hasIpAddress(&quot;192.0.0.1&quot;)\n                .and()\n                .csrf().disable();\n    }\n}\n</code></pre>\n<p>I am not able to figure out how to pass IP to whitelist to below code.</p>\n<pre><code>@Bean\npublic SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n    return http.authorizeHttpRequests(auth-&gt; {auth.requestMatchers(&quot;/**&quot;);\n        auth.requestMatchers(&quot;&quot;,&quot;&quot;);\n        auth.anyRequest().authenticated();})\n    .httpBasic(withDefaults()).build();\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","dependencies","version"],"comments":[{"owner":{"account_id":7767429,"reputation":674,"user_id":5878215,"display_name":"Zorglube"},"score":0,"creation_date":1676842583,"post_id":75503517,"comment_id":133214129,"body_markdown":"Try Spring official documentation","body":"Try Spring official documentation"}],"answers":[{"tags":[],"owner":{"account_id":153343,"reputation":1086,"user_id":368532,"accept_rate":70,"display_name":"Boris"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1676842320,"creation_date":1676842320,"answer_id":75503606,"question_id":75503517,"body_markdown":"Any version of Spring docs has a dedicated section about this:  https://docs.spring.io/spring-boot/docs/2.7.x/reference/html/getting-started.html#getting-started.system-requirements","title":"What minimal Spring Boot 2.x version can run for sure on Java 17?","body":"<p>Any version of Spring docs has a dedicated section about this:  <a href=\"https://docs.spring.io/spring-boot/docs/2.7.x/reference/html/getting-started.html#getting-started.system-requirements\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-boot/docs/2.7.x/reference/html/getting-started.html#getting-started.system-requirements</a></p>\n"},{"tags":[],"owner":{"account_id":223484,"reputation":61166,"user_id":482717,"accept_rate":66,"display_name":"Paul Verest"},"down_vote_count":0,"up_vote_count":13,"is_accepted":true,"score":13,"last_activity_date":1689853101,"creation_date":1676845983,"answer_id":75503865,"question_id":75503517,"body_markdown":"Spring Boot [2.5 is minimal version that supports JRE 17 according to documnetation](https://docs.spring.io/spring-boot/docs/2.5.x/reference/html/getting-started.html#getting-started.system-requirements).\r\n\r\n([2.4 was intially up to JRE 16](https://docs.spring.io/spring-boot/docs/2.4.x/reference/html/getting-started.html#getting-started.system-requirements))\r\nUPDATE as @spamove commented, \r\n&gt; 2.4.2+ runs with JRE 17 without any real apparent issues\r\n\r\nSo if you are to upgrade you old project to run on JRE 17, be sure to upgrade to at least 2.5 version.  \r\n( But I would recommend the last 2.x which is 2.7,\r\nthat will be supported even for longer time than 3.0 )\r\n\r\nAlso see Spring framework Java version requirement  \r\nhttps://github.com/spring-projects/spring-framework/wiki/Spring-Framework-Versions\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/p9LuK.png","title":"What minimal Spring Boot 2.x version can run for sure on Java 17?","body":"<p>Spring Boot <a href=\"https://docs.spring.io/spring-boot/docs/2.5.x/reference/html/getting-started.html#getting-started.system-requirements\" rel=\"noreferrer\">2.5 is minimal version that supports JRE 17 according to documnetation</a>.</p>\n<p>(<a href=\"https://docs.spring.io/spring-boot/docs/2.4.x/reference/html/getting-started.html#getting-started.system-requirements\" rel=\"noreferrer\">2.4 was intially up to JRE 16</a>)\nUPDATE as @spamove commented,</p>\n<blockquote>\n<p>2.4.2+ runs with JRE 17 without any real apparent issues</p>\n</blockquote>\n<p>So if you are to upgrade you old project to run on JRE 17, be sure to upgrade to at least 2.5 version.<br />\n( But I would recommend the last 2.x which is 2.7,\nthat will be supported even for longer time than 3.0 )</p>\n<p>Also see Spring framework Java version requirement<br />\n<a href=\"https://github.com/spring-projects/spring-framework/wiki/Spring-Framework-Versions\" rel=\"noreferrer\">https://github.com/spring-projects/spring-framework/wiki/Spring-Framework-Versions</a></p>\n<p><a href=\"https://i.stack.imgur.com/p9LuK.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/p9LuK.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":223484,"reputation":61166,"user_id":482717,"accept_rate":66,"display_name":"Paul Verest"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":21661,"favorite_count":0,"down_vote_count":2,"up_vote_count":10,"accepted_answer_id":75503865,"answer_count":2,"score":8,"last_activity_date":1689853101,"creation_date":1676841503,"question_id":75503517,"body_markdown":"Can Spring Boot 3.0 requires at least Java 17.\r\n\r\n**What minimal Spring 2.x version can run for sure on Java 17?**\r\n\r\nJava 17 was released 14 Sep 2021 https://endoflife.date/java  \r\nso I would expect Spring Boot 2.6 (released 19 Nov 2021) https://endoflife.date/spring-boot  \r\nto be for sure tested against JRE 17.\r\n\r\nWhere is it possible to see min and max supported Java (JRE) version for every Spring Boot version?\r\n \r\n","title":"What minimal Spring Boot 2.x version can run for sure on Java 17?","body":"<p>Can Spring Boot 3.0 requires at least Java 17.</p>\n<p><strong>What minimal Spring 2.x version can run for sure on Java 17?</strong></p>\n<p>Java 17 was released 14 Sep 2021 <a href=\"https://endoflife.date/java\" rel=\"noreferrer\">https://endoflife.date/java</a><br />\nso I would expect Spring Boot 2.6 (released 19 Nov 2021) <a href=\"https://endoflife.date/spring-boot\" rel=\"noreferrer\">https://endoflife.date/spring-boot</a><br />\nto be for sure tested against JRE 17.</p>\n<p>Where is it possible to see min and max supported Java (JRE) version for every Spring Boot version?</p>\n"},{"tags":["java","swing"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1689852659,"post_id":76729395,"comment_id":135273471,"body_markdown":"you are trying to add actionlisteners, but I don&#39;t see you actually creating Buttons, I would start with that","body":"you are trying to add actionlisteners, but I don&#39;t see you actually creating Buttons, I would start with that"},{"owner":{"account_id":22064593,"reputation":61,"user_id":16326672,"display_name":"Christoph Linden"},"score":0,"creation_date":1689852746,"post_id":76729395,"comment_id":135273493,"body_markdown":"@Stultuske I just did not write it in ... addded it - just one of the 15 buttons. They are all the same just in an array and with a text.","body":"@Stultuske I just did not write it in ... addded it - just one of the 15 buttons. They are all the same just in an array and with a text."},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1689852805,"post_id":76729395,"comment_id":135273502,"body_markdown":"[Here](https://stackoverflow.com/a/74925295/522444) is one way to do this sort of thing, and [this](https://stackoverflow.com/a/20037116/522444) may prove helpful (although without the listeners).","body":"<a href=\"https://stackoverflow.com/a/74925295/522444\">Here</a> is one way to do this sort of thing, and <a href=\"https://stackoverflow.com/a/20037116/522444\">this</a> may prove helpful (although without the listeners)."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1689852887,"post_id":76729395,"comment_id":135273525,"body_markdown":"There&#39;s no need to create `NUM_BUTTONS` worth of `ActionListener`s. Just have *one* instance of a private class that implements that interface and add that instance to all buttons. btw, your loop will miss the last button (the `- 1` is incorrect)","body":"There&#39;s no need to create <code>NUM_BUTTONS</code> worth of <code>ActionListener</code>s. Just have <i>one</i> instance of a private class that implements that interface and add that instance to all buttons. btw, your loop will miss the last button (the <code>- 1</code> is incorrect)"},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1689853006,"post_id":76729395,"comment_id":135273560,"body_markdown":"I would recommend creating *two* ActionListeners, one for the buttons, and the `.`, dot, and another for the operations. You can use a Set to distinguish and decide which listener to add.","body":"I would recommend creating <i>two</i> ActionListeners, one for the buttons, and the <code>.</code>, dot, and another for the operations. You can use a Set to distinguish and decide which listener to add."},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1689853799,"post_id":76729395,"comment_id":135273735,"body_markdown":"[This](https://stackoverflow.com/a/33973521/522444) is the example that I was looking for that demonstrates using 2 or 3 actions for a collection of JButtons all created dynamically.","body":"<a href=\"https://stackoverflow.com/a/33973521/522444\">This</a> is the example that I was looking for that demonstrates using 2 or 3 actions for a collection of JButtons all created dynamically."},{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1689854122,"post_id":76729395,"comment_id":135273804,"body_markdown":"Since Java 8, I prefer to use [method references](https://docs.oracle.com/javase/tutorial/java/javaOO/methodreferences.html) when implementing [ActionListener](https://docs.oracle.com/javase/tutorial/uiswing/events/actionlistener.html) interface.","body":"Since Java 8, I prefer to use <a href=\"https://docs.oracle.com/javase/tutorial/java/javaOO/methodreferences.html\" rel=\"nofollow noreferrer\">method references</a> when implementing <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/events/actionlistener.html\" rel=\"nofollow noreferrer\">ActionListener</a> interface."}],"owner":{"account_id":22064593,"reputation":61,"user_id":16326672,"display_name":"Christoph Linden"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1689852754,"answer_count":0,"score":0,"last_activity_date":1689852700,"creation_date":1689852594,"question_id":76729395,"body_markdown":"I try to create a small pocket calculator app, that has 15 buttons. \r\n\r\nAll of the buttons shall have an action to add the corresponding number or calculation sign to the calculation JTextField.\r\n\r\nI have created a JButton array that contains all the buttons, and then create a loop to assing an action to each of the buttons, as all the buttons are actually the same.\r\n\r\nEach button has a text which defines its text (0-9 +-*/=).\r\n```\r\n        final int NUM_BUTTONS=15;\r\n        //Buttons in ein Array legen, um die Actions zu vereinfachen.\r\n        var buttons = new JButton[NUM_BUTTONS];\r\n\r\n        buttons[7] = new JButton(&quot;7&quot;);\r\n        panel.add(buttons[7], c) ;\r\n```\r\n\r\nThen there is a loop for all the buttons (except the last one, that is = and gets another action)\r\n```\r\n        for(int button=0; button &lt; NUM_BUTTONS-1 ; button++) {\r\n            buttons[button].addActionListener(new ActionListener() {\r\n                @Override\r\n                public void actionPerformed(ActionEvent event) {\r\n                    calculationTextField.setText(calculationTextField.getText() + (buttons[button].getText()));\r\n                }\r\n            });\r\n        }\r\n```\r\n\r\nAnd now it does not compile, because of:\r\n/home/clinden/studium/IdeaProjects/JAPR02_A/src/main/java/japr02/Calculator.java:100: error: local variables referenced from an inner class must be final or effectively final\r\n                    calculationTextField.setText(calculationTextField.getText() + (buttons[button].getText()));\r\n\r\nSo how do I actually get it to use button not as a local variable? \r\n\r\na foreach does work, but I cannot used it, as the last button does need another action and not both (tried to overwrite it, but it will add two actions actually).\r\n","title":"Java: How to define an swing JButton action with a loop?","body":"<p>I try to create a small pocket calculator app, that has 15 buttons.</p>\n<p>All of the buttons shall have an action to add the corresponding number or calculation sign to the calculation JTextField.</p>\n<p>I have created a JButton array that contains all the buttons, and then create a loop to assing an action to each of the buttons, as all the buttons are actually the same.</p>\n<p>Each button has a text which defines its text (0-9 +-*/=).</p>\n<pre><code>        final int NUM_BUTTONS=15;\n        //Buttons in ein Array legen, um die Actions zu vereinfachen.\n        var buttons = new JButton[NUM_BUTTONS];\n\n        buttons[7] = new JButton(&quot;7&quot;);\n        panel.add(buttons[7], c) ;\n</code></pre>\n<p>Then there is a loop for all the buttons (except the last one, that is = and gets another action)</p>\n<pre><code>        for(int button=0; button &lt; NUM_BUTTONS-1 ; button++) {\n            buttons[button].addActionListener(new ActionListener() {\n                @Override\n                public void actionPerformed(ActionEvent event) {\n                    calculationTextField.setText(calculationTextField.getText() + (buttons[button].getText()));\n                }\n            });\n        }\n</code></pre>\n<p>And now it does not compile, because of:\n/home/clinden/studium/IdeaProjects/JAPR02_A/src/main/java/japr02/Calculator.java:100: error: local variables referenced from an inner class must be final or effectively final\ncalculationTextField.setText(calculationTextField.getText() + (buttons[button].getText()));</p>\n<p>So how do I actually get it to use button not as a local variable?</p>\n<p>a foreach does work, but I cannot used it, as the last button does need another action and not both (tried to overwrite it, but it will add two actions actually).</p>\n"},{"tags":["java","spring-boot","spring-data-jpa"],"answers":[{"tags":[],"owner":{"account_id":1521409,"reputation":6658,"user_id":1420941,"display_name":"stringy05"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1598397128,"creation_date":1598397128,"answer_id":63588327,"question_id":63588139,"body_markdown":"In order to use spring managed components like the `EntityManager` the objects need to spring `Beans`, which basically means they are created inside the spring context and can utilise the IoC container.\r\n\r\nIn the example above, running the `DbSampleAdditor` class from the main method is outside the spring context, so the beans like `PersistenceContext` wont get injected.\r\n\r\nOne fairly simple way to do this inside the spring context is to add an `ApplicationListener` for the `ApplicationReadyEvent`\r\n\r\n```java\r\n@Component\r\nclass Initialise implements ApplicationListener&lt;ApplicationReadyEvent&gt; {\r\n\r\n    @Autowired\r\n    private final DbSampleAdditor db;\r\n\r\n    @Override\r\n    public void onApplicationEvent(ApplicationReadyEvent applicationReadyEvent) {\r\n        db.addSampleData();\r\n   }\r\n}\r\n```\r\nWhen the application ready event fires all the necessary spring bean wiring is set up so when it runs the `addSampleData` method, things like the EM are good to go.\r\n\r\nOther approaches for setting up a DB for spring boot are documented [here][1]\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#howto-database-initialization","title":"How to add sample data to database with springboot?","body":"<p>In order to use spring managed components like the <code>EntityManager</code> the objects need to spring <code>Beans</code>, which basically means they are created inside the spring context and can utilise the IoC container.</p>\n<p>In the example above, running the <code>DbSampleAdditor</code> class from the main method is outside the spring context, so the beans like <code>PersistenceContext</code> wont get injected.</p>\n<p>One fairly simple way to do this inside the spring context is to add an <code>ApplicationListener</code> for the <code>ApplicationReadyEvent</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Component\nclass Initialise implements ApplicationListener&lt;ApplicationReadyEvent&gt; {\n\n    @Autowired\n    private final DbSampleAdditor db;\n\n    @Override\n    public void onApplicationEvent(ApplicationReadyEvent applicationReadyEvent) {\n        db.addSampleData();\n   }\n}\n</code></pre>\n<p>When the application ready event fires all the necessary spring bean wiring is set up so when it runs the <code>addSampleData</code> method, things like the EM are good to go.</p>\n<p>Other approaches for setting up a DB for spring boot are documented <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#howto-database-initialization\" rel=\"nofollow noreferrer\">here</a></p>\n"},{"tags":[],"owner":{"account_id":8903202,"reputation":99,"user_id":12228510,"display_name":"DK93"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1598408421,"creation_date":1598408421,"answer_id":63589579,"question_id":63588139,"body_markdown":"Instead of creating an object DBSampleAdditor, try to autowire it so that it is available on application startup.       @Autowired                                                      DBSampleAdditor DBSampleAdditor                                  Then you try to add sample data within the run method","title":"How to add sample data to database with springboot?","body":"<p>Instead of creating an object DBSampleAdditor, try to autowire it so that it is available on application startup.       @Autowired                                                      DBSampleAdditor DBSampleAdditor                                  Then you try to add sample data within the run method</p>\n"},{"tags":[],"owner":{"account_id":5702266,"reputation":206,"user_id":4506881,"display_name":"Imran Ahmad"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1689852611,"creation_date":1598421291,"answer_id":63591286,"question_id":63588139,"body_markdown":"You can use method with  @PostConstruct with @Component to insert data at startup.\r\n\r\n@PostConstruct will be invoked after the bean has been created, dependencies have been injected, all managed properties are set, and before the bean is actually set into scope.\r\n\r\nJust inject your database repository in the class marked with @Component and call your injected database repository inside the method marked with @PostConstruct\r\n\r\nExample:\r\n\r\n    @Component\r\n    public class DbInit {\r\n     \r\n        @Autowired\r\n        private DBSampleAdditor dbsa;\r\n     \r\n        @PostConstruct\r\n        private void postConstruct() {\r\n            dbsa.addSampleData();\r\n        }\r\n    }","title":"How to add sample data to database with springboot?","body":"<p>You can use method with  @PostConstruct with @Component to insert data at startup.</p>\n<p>@PostConstruct will be invoked after the bean has been created, dependencies have been injected, all managed properties are set, and before the bean is actually set into scope.</p>\n<p>Just inject your database repository in the class marked with @Component and call your injected database repository inside the method marked with @PostConstruct</p>\n<p>Example:</p>\n<pre><code>@Component\npublic class DbInit {\n \n    @Autowired\n    private DBSampleAdditor dbsa;\n \n    @PostConstruct\n    private void postConstruct() {\n        dbsa.addSampleData();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":12060215,"reputation":165,"user_id":8819495,"display_name":"vMysterion"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1763,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":63591286,"answer_count":3,"score":2,"last_activity_date":1689852611,"creation_date":1598395647,"question_id":63588139,"body_markdown":"I&#39;ve a Spring Boot application with the Spring Data JPA and two entities mapped to a database. My application is set to recreate the database on every startup. Now i want to create some instances of these POJOs, persist them in the database so I&#39;ve some data to test my application with in the ongoing development process.\r\n\r\nWhat is the best way to do that?\r\n\r\nWhat i tried so far:\r\nMy class to add the sample data\r\n```\r\npublic class DBSampleAdditor {\r\n    @PersistenceContext\r\n    private EntityManager em;\r\n\r\n    @Transactional\r\n    public void addSampleData() {\r\n        // creating POJO instances and persist them with em.perists()\r\n    }\r\n}\r\n```\r\n\r\nI tried to call these functions in the main of my ApplicationClass\r\n```\r\n@SpringBootApplication()\r\npublic class ApiApplication {\r\n\tpublic static void main(String[] args) {\r\n\t\tSpringApplication.run(ApiApplication.class, args);\r\n        DBSampleAdditor dbsa = new DBSampleAdditor();\r\n        dbsa.addSampleData();\r\n\t}\r\n}\r\n```\r\nThat didnt work at all, as the EntityManager never got an Instance from the persistence unit.\r\n\r\nI also tried to create a CommandLineRunner:\r\n```\r\n@Component\r\npublic class PTCommandLineRunner implements CommandLineRunner {\r\n    @Override\r\n    public void run(String... args) throws Exception {\r\n        System.out.println(&quot;Adding sample data...&quot;);\r\n        DBSampleAdditor dbsa = new DBSampleAdditor();\r\n        dbsa.addSampleData();\r\n    }\r\n}\r\n```\r\nBut that one seemed to never been called in the startup process.","title":"How to add sample data to database with springboot?","body":"<p>I've a Spring Boot application with the Spring Data JPA and two entities mapped to a database. My application is set to recreate the database on every startup. Now i want to create some instances of these POJOs, persist them in the database so I've some data to test my application with in the ongoing development process.</p>\n<p>What is the best way to do that?</p>\n<p>What i tried so far:\nMy class to add the sample data</p>\n<pre><code>public class DBSampleAdditor {\n    @PersistenceContext\n    private EntityManager em;\n\n    @Transactional\n    public void addSampleData() {\n        // creating POJO instances and persist them with em.perists()\n    }\n}\n</code></pre>\n<p>I tried to call these functions in the main of my ApplicationClass</p>\n<pre><code>@SpringBootApplication()\npublic class ApiApplication {\n    public static void main(String[] args) {\n        SpringApplication.run(ApiApplication.class, args);\n        DBSampleAdditor dbsa = new DBSampleAdditor();\n        dbsa.addSampleData();\n    }\n}\n</code></pre>\n<p>That didnt work at all, as the EntityManager never got an Instance from the persistence unit.</p>\n<p>I also tried to create a CommandLineRunner:</p>\n<pre><code>@Component\npublic class PTCommandLineRunner implements CommandLineRunner {\n    @Override\n    public void run(String... args) throws Exception {\n        System.out.println(&quot;Adding sample data...&quot;);\n        DBSampleAdditor dbsa = new DBSampleAdditor();\n        dbsa.addSampleData();\n    }\n}\n</code></pre>\n<p>But that one seemed to never been called in the startup process.</p>\n"},{"tags":["java","database","oracle","stored-procedures"],"owner":{"account_id":23513792,"reputation":11,"user_id":17562003,"display_name":"jikar bhati"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":15,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689852573,"creation_date":1689852573,"question_id":76729392,"body_markdown":"I am need either default value or default value specific flag for the parameter of a stored procedure in oracle database via java.\r\n\r\ni am using getProcedureColumns method to get the default parameter details by passing the procedure name as below.\r\nhowever, this is giving result at null.\r\n\r\n```\r\nResultSet rs = con.getMetaData().getProcedureColumns(null, &quot;SCHEMA&quot;, &quot;PROCEDURE_NAME&quot;, null);\r\nSystem.out.println(&quot;COLUMN_DEF:&quot;+rs.getString(&quot;COLUMN_DEF&quot;));\r\noutput\r\n-------\r\nCOLUMN_DEF:null\r\n```\r\n\r\nFollowing is my stored procedure syntax.\r\n\r\nCREATE OR REPLACE PROCEDURE  PROCEDURE_NAME\r\n(\r\n  player_name IN VARCHAR2 DEFAULT &#39;hero&#39;,\r\n  goals OUT NUMBER,\r\n  league OUT VARCHAR2\r\n) AS\r\n\r\nwhat is the reason that it does not give me the default value output?\r\nwhat should be the solution?\r\n\r\nI have tried checking in all_agrguments table and i can see that defaulted flag is Y for the default parameter which i have specified. however, i do not want to do any additional queries on db. i want to achieve this using above java method getProcedureColumns from java.sql pkg.","title":"Not able to fetch default parameter flag or value using getProcedureColumns function from DatabaseMetaData","body":"<p>I am need either default value or default value specific flag for the parameter of a stored procedure in oracle database via java.</p>\n<p>i am using getProcedureColumns method to get the default parameter details by passing the procedure name as below.\nhowever, this is giving result at null.</p>\n<pre><code>ResultSet rs = con.getMetaData().getProcedureColumns(null, &quot;SCHEMA&quot;, &quot;PROCEDURE_NAME&quot;, null);\nSystem.out.println(&quot;COLUMN_DEF:&quot;+rs.getString(&quot;COLUMN_DEF&quot;));\noutput\n-------\nCOLUMN_DEF:null\n</code></pre>\n<p>Following is my stored procedure syntax.</p>\n<p>CREATE OR REPLACE PROCEDURE  PROCEDURE_NAME\n(\nplayer_name IN VARCHAR2 DEFAULT 'hero',\ngoals OUT NUMBER,\nleague OUT VARCHAR2\n) AS</p>\n<p>what is the reason that it does not give me the default value output?\nwhat should be the solution?</p>\n<p>I have tried checking in all_agrguments table and i can see that defaulted flag is Y for the default parameter which i have specified. however, i do not want to do any additional queries on db. i want to achieve this using above java method getProcedureColumns from java.sql pkg.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":17545385,"reputation":629,"user_id":12726793,"display_name":"MT756"},"score":3,"creation_date":1583438690,"post_id":60553124,"comment_id":107126966,"body_markdown":"What are your thoughts?","body":"What are your thoughts?"},{"owner":{"account_id":7917932,"reputation":199,"user_id":5979804,"display_name":"asfmlr"},"score":4,"creation_date":1583438912,"post_id":60553124,"comment_id":107127055,"body_markdown":"What do you mean need an answer, first try by yourself","body":"What do you mean need an answer, first try by yourself"},{"owner":{"account_id":17593023,"reputation":826,"user_id":12764490,"display_name":"Tim Hunter"},"score":1,"creation_date":1583438968,"post_id":60553124,"comment_id":107127077,"body_markdown":"What&#39;s your attempt to solve this? Show us what you&#39;ve done code wise and we&#39;ll point out what&#39;s going wrong if it doesn&#39;t work the way you expect.","body":"What&#39;s your attempt to solve this? Show us what you&#39;ve done code wise and we&#39;ll point out what&#39;s going wrong if it doesn&#39;t work the way you expect."},{"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"score":0,"creation_date":1583439173,"post_id":60553124,"comment_id":107127168,"body_markdown":"It sounds like you mean strings that **do** repeat themselves. LIke `lopo` and `polo` contain the same letters and are the same length so return them in the list.","body":"It sounds like you mean strings that <b>do</b> repeat themselves. LIke <code>lopo</code> and <code>polo</code> contain the same letters and are the same length so return them in the list."},{"owner":{"account_id":12583055,"reputation":447,"user_id":9732672,"display_name":"NomadMaker"},"score":0,"creation_date":1583439196,"post_id":60553124,"comment_id":107127176,"body_markdown":"What is the rule? Can you explain it. Why do polo and loo pass while mama doesnt?","body":"What is the rule? Can you explain it. Why do polo and loo pass while mama doesnt?"}],"answers":[{"tags":[],"owner":{"account_id":2802711,"reputation":1786,"user_id":2410641,"accept_rate":95,"display_name":"ashu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689852480,"creation_date":1583438889,"answer_id":60553189,"question_id":60553124,"body_markdown":"- Create a `HashMap&lt;String, Integer&gt;`\r\n- Loop over the input and increment count for corresponding string in the HashMap\r\n- Create an empty list of string (lets call it result)\r\n- Loop over [`HashMap#keySet()`](https://docs.oracle.com/javase/7/docs/api/java/util/HashMap.html#keySet()) and check if `count &gt; 1`. If it is, add it to the result list.","title":"Return only repeated strings (not same order, same letters)","body":"<ul>\n<li>Create a <code>HashMap&lt;String, Integer&gt;</code></li>\n<li>Loop over the input and increment count for corresponding string in the HashMap</li>\n<li>Create an empty list of string (lets call it result)</li>\n<li>Loop over <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/HashMap.html#keySet()\" rel=\"nofollow noreferrer\"><code>HashMap#keySet()</code></a> and check if <code>count &gt; 1</code>. If it is, add it to the result list.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":1692034,"reputation":3196,"user_id":1554195,"display_name":"tquadrat"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1583601830,"creation_date":1583439326,"answer_id":60553292,"question_id":60553124,"body_markdown":" 1. Create a map `Map&lt;String,List&lt;String&gt;&gt;`\r\n 2. For each entry in the source list, create the key for that map by ordering the letters in the string alphabetically (&quot;papi&quot; and &quot;appi&quot; both will get &quot;aipp&quot; then)\r\n 3. Lookup the map for that key; if it exists, append the source String to the list. If not, create an new entry with the source String as the only entry of the new list\r\n 4. After you processed the source list, iterate over the map&#39;s values and print the contents of all lists with more than one single entry\r\n\r\nBased on this it should be easy to write the corresponding Java code yourself …\r\n\r\nEDIT ------8&lt;-----\r\n\r\n… but because today is a bit boring, here my solution for this question:\r\n\r\n    import static java.lang.System.err;\r\n    import static java.lang.System.out;\r\n    import static java.util.Arrays.sort;\r\n    import static java.util.stream.Collectors.joining;\r\n\r\n    import java.util.ArrayList;\r\n    import java.util.HashMap;\r\n    import java.util.List;\r\n    import java.util.Map;\r\n\r\n    /**\r\n     *  Finds those words in the give list that uses the same character set as at\r\n     *  least one other word on the list.\r\n     */\r\n    public class FindSameWordsUsingTheSameSetOfCharacters\r\n    {\r\n            /*-----------*\\\r\n        ====** Constants **========================================================\r\n            \\*-----------*/\r\n        /**\r\n         *  The input list.\r\n         */\r\n        public static final String [] INPUT = { &quot;papi&quot;, &quot;polo&quot;, &quot;lopo&quot;, &quot;appi&quot;, &quot;abba&quot;, &quot;polo&quot;, &quot;mama&quot; };\r\n\r\n            /*---------*\\\r\n        ====** Methods **==========================================================\r\n            \\*---------*/\r\n        /**\r\n         *  The program entry point.\r\n         *\r\n         *  @param  args    The command line arguments.\r\n         */\r\n        public static void main( final String... args )\r\n        {\r\n            try\r\n            {\r\n                final Map&lt;String,List&lt;String&gt;&gt; map = new HashMap&lt;&gt;();\r\n                for( final var string : INPUT )\r\n                {\r\n                    final var chars = string.toCharArray();\r\n                    sort( chars );\r\n                    final var key = new String( chars );\r\n                    map.computeIfAbsent( key, $ -&gt; new ArrayList&lt;&gt;() ).add( string );\r\n                }\r\n\r\n                final var result = map.values()\r\n                    .stream()\r\n                    .filter( list -&gt; list.size() &gt; 1 )\r\n                    .flatMap( list -&gt; list.stream() )\r\n                    .collect( joining( &quot;, &quot;, &quot;[&quot;, &quot;]&quot; ) );\r\n                out.printf( &quot;Result: %s&quot;, result );\r\n            }\r\n            catch( final Throwable t )\r\n            {\r\n                //---* Handle any previously unhandled exceptions *----------------\r\n                t.printStackTrace( err );\r\n            }\r\n        }   //  main()\r\n    }\r\n    //  class FindSameWordsUsingTheSameSetOfCharacters\r\n\r\nI think with a bit more mapping magic this can be solved even without the `Map&lt;&gt; map`, and perhaps that version would return exact the output provided in the question.\r\n\r\nThis version delivers\r\n\r\n    Result: [papi, appi, polo, lopo, polo]\r\n\r\ninstead of the required\r\n\r\n    [‘papi’, ‘polo’, ‘lopo’, ‘appi’, ‘polo’]\r\n\r\n(The sequence is different …).\r\n","title":"Return only repeated strings (not same order, same letters)","body":"<ol>\n<li>Create a map <code>Map&lt;String,List&lt;String&gt;&gt;</code></li>\n<li>For each entry in the source list, create the key for that map by ordering the letters in the string alphabetically (\"papi\" and \"appi\" both will get \"aipp\" then)</li>\n<li>Lookup the map for that key; if it exists, append the source String to the list. If not, create an new entry with the source String as the only entry of the new list</li>\n<li>After you processed the source list, iterate over the map's values and print the contents of all lists with more than one single entry</li>\n</ol>\n\n<p>Based on this it should be easy to write the corresponding Java code yourself …</p>\n\n<p>EDIT ------8&lt;-----</p>\n\n<p>… but because today is a bit boring, here my solution for this question:</p>\n\n<pre><code>import static java.lang.System.err;\nimport static java.lang.System.out;\nimport static java.util.Arrays.sort;\nimport static java.util.stream.Collectors.joining;\n\nimport java.util.ArrayList;\nimport java.util.HashMap;\nimport java.util.List;\nimport java.util.Map;\n\n/**\n *  Finds those words in the give list that uses the same character set as at\n *  least one other word on the list.\n */\npublic class FindSameWordsUsingTheSameSetOfCharacters\n{\n        /*-----------*\\\n    ====** Constants **========================================================\n        \\*-----------*/\n    /**\n     *  The input list.\n     */\n    public static final String [] INPUT = { \"papi\", \"polo\", \"lopo\", \"appi\", \"abba\", \"polo\", \"mama\" };\n\n        /*---------*\\\n    ====** Methods **==========================================================\n        \\*---------*/\n    /**\n     *  The program entry point.\n     *\n     *  @param  args    The command line arguments.\n     */\n    public static void main( final String... args )\n    {\n        try\n        {\n            final Map&lt;String,List&lt;String&gt;&gt; map = new HashMap&lt;&gt;();\n            for( final var string : INPUT )\n            {\n                final var chars = string.toCharArray();\n                sort( chars );\n                final var key = new String( chars );\n                map.computeIfAbsent( key, $ -&gt; new ArrayList&lt;&gt;() ).add( string );\n            }\n\n            final var result = map.values()\n                .stream()\n                .filter( list -&gt; list.size() &gt; 1 )\n                .flatMap( list -&gt; list.stream() )\n                .collect( joining( \", \", \"[\", \"]\" ) );\n            out.printf( \"Result: %s\", result );\n        }\n        catch( final Throwable t )\n        {\n            //---* Handle any previously unhandled exceptions *----------------\n            t.printStackTrace( err );\n        }\n    }   //  main()\n}\n//  class FindSameWordsUsingTheSameSetOfCharacters\n</code></pre>\n\n<p>I think with a bit more mapping magic this can be solved even without the <code>Map&lt;&gt; map</code>, and perhaps that version would return exact the output provided in the question.</p>\n\n<p>This version delivers</p>\n\n<pre><code>Result: [papi, appi, polo, lopo, polo]\n</code></pre>\n\n<p>instead of the required</p>\n\n<pre><code>[‘papi’, ‘polo’, ‘lopo’, ‘appi’, ‘polo’]\n</code></pre>\n\n<p>(The sequence is different …).</p>\n"},{"tags":[],"owner":{"account_id":6780825,"reputation":155680,"user_id":5221149,"display_name":"Andreas"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1583440350,"creation_date":1583440350,"answer_id":60553492,"question_id":60553124,"body_markdown":" &gt; doesn’t repeat themself in the same letters/numbers of letters\r\n\r\nSince all your inputs are 4 letters, you&#39;re basically saying that the first 2 letters cannot be the same as the last 2 letters.\r\n\r\nBut let&#39;s assume strings can be any number of letters, which means we need to check any substring length that is divisible into the full string length, e.g. if string is 6 letters when substrings with length 2 and 3 needs to be checked, and if string is 7 letters we don&#39;t need to check anything.\r\n\r\nTo check if 2 substrings have the same set of letters, but in a potentially different order, normalize the substrings by sorting the letters, e.g. `pam` -&gt; `amp`. The use a `Set` to check if you&#39;ve already seen that normalized substring.\r\n\r\n\tpublic static boolean isRepeating(String input) {\r\n\t\tint maxlen = input.length() / 2;\r\n\t\tfor (int len = 2; len &lt;= maxlen; len++)\r\n\t\t\tif (input.length() % len == 0 &amp;&amp; isRepeating(input, len))\r\n\t\t\t\treturn true;\r\n\t\treturn false;\r\n\t}\r\n\r\n\tprivate static boolean isRepeating(String input, int len) {\r\n\t\tSet&lt;String&gt; substrings = new HashSet&lt;&gt;();\r\n\t\tfor (int i = 0; i &lt; input.length(); i += len) {\r\n\t\t\tchar[] chars = input.substring(i, i + len).toCharArray();\r\n\t\t\tArrays.sort(chars);\r\n\t\t\tString normalizedSubstring = new String(chars);\r\n\t\t\tif (! substrings.add(normalizedSubstring))\r\n\t\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n*Test*\r\n\r\n\tList&lt;String&gt; input = Arrays.asList(&quot;papi&quot;, &quot;polo&quot;, &quot;lopo&quot;, &quot;appi&quot;, &quot;abba&quot;, &quot;polo&quot;, &quot;mama&quot;);\r\n\tfor (String str : input)\r\n\t\tSystem.out.printf(&quot;%-5s  %s%n&quot;, isRepeating(str), str);\r\n\r\n*Output*\r\n\r\n```lang-none\r\nfalse  papi\r\nfalse  polo\r\nfalse  lopo\r\nfalse  appi\r\ntrue   abba\r\nfalse  polo\r\ntrue   mama\r\n```\r\n\r\n*Build New List*\r\n\r\n\tList&lt;String&gt; input = Arrays.asList(&quot;papi&quot;, &quot;polo&quot;, &quot;lopo&quot;, &quot;appi&quot;, &quot;abba&quot;, &quot;polo&quot;, &quot;mama&quot;);\r\n\tList&lt;String&gt; output = input.stream()\r\n\t\t\t.filter(s -&gt; ! isRepeating(s))\r\n\t\t\t.collect(Collectors.toList());\r\n\tSystem.out.println(output); // prints: [papi, polo, lopo, appi, polo]\r\n","title":"Return only repeated strings (not same order, same letters)","body":"<blockquote>\n  <p>doesn’t repeat themself in the same letters/numbers of letters</p>\n</blockquote>\n\n<p>Since all your inputs are 4 letters, you're basically saying that the first 2 letters cannot be the same as the last 2 letters.</p>\n\n<p>But let's assume strings can be any number of letters, which means we need to check any substring length that is divisible into the full string length, e.g. if string is 6 letters when substrings with length 2 and 3 needs to be checked, and if string is 7 letters we don't need to check anything.</p>\n\n<p>To check if 2 substrings have the same set of letters, but in a potentially different order, normalize the substrings by sorting the letters, e.g. <code>pam</code> -> <code>amp</code>. The use a <code>Set</code> to check if you've already seen that normalized substring.</p>\n\n<pre><code>public static boolean isRepeating(String input) {\n    int maxlen = input.length() / 2;\n    for (int len = 2; len &lt;= maxlen; len++)\n        if (input.length() % len == 0 &amp;&amp; isRepeating(input, len))\n            return true;\n    return false;\n}\n\nprivate static boolean isRepeating(String input, int len) {\n    Set&lt;String&gt; substrings = new HashSet&lt;&gt;();\n    for (int i = 0; i &lt; input.length(); i += len) {\n        char[] chars = input.substring(i, i + len).toCharArray();\n        Arrays.sort(chars);\n        String normalizedSubstring = new String(chars);\n        if (! substrings.add(normalizedSubstring))\n            return true;\n    }\n    return false;\n}\n</code></pre>\n\n<p><em>Test</em></p>\n\n<pre><code>List&lt;String&gt; input = Arrays.asList(\"papi\", \"polo\", \"lopo\", \"appi\", \"abba\", \"polo\", \"mama\");\nfor (String str : input)\n    System.out.printf(\"%-5s  %s%n\", isRepeating(str), str);\n</code></pre>\n\n<p><em>Output</em></p>\n\n<pre class=\"lang-none prettyprint-override\"><code>false  papi\nfalse  polo\nfalse  lopo\nfalse  appi\ntrue   abba\nfalse  polo\ntrue   mama\n</code></pre>\n\n<p><em>Build New List</em></p>\n\n<pre><code>List&lt;String&gt; input = Arrays.asList(\"papi\", \"polo\", \"lopo\", \"appi\", \"abba\", \"polo\", \"mama\");\nList&lt;String&gt; output = input.stream()\n        .filter(s -&gt; ! isRepeating(s))\n        .collect(Collectors.toList());\nSystem.out.println(output); // prints: [papi, polo, lopo, appi, polo]\n</code></pre>\n"}],"owner":{"account_id":11915680,"reputation":25,"user_id":8719652,"display_name":"Ofer"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":96,"favorite_count":0,"down_vote_count":6,"up_vote_count":0,"closed_date":1583441141,"answer_count":3,"score":-6,"last_activity_date":1689852480,"creation_date":1583438550,"question_id":60553124,"body_markdown":"I have a list of strings:\r\n[‘papi’, ‘polo’, ‘lopo’, ‘appi, ‘abba’, ‘polo’, ‘mama’]\r\n\r\nHow can I return only:\r\n\r\n[‘papi’, ‘polo’, ‘lopo’, ‘appi’, ‘polo’]\r\n\r\nMeaning the only strings that doesn’t repeat themself in the same letters/numbers of letters.\r\nNeed an answer in java.\r\nAlso it needs to be efficient.\r\nThanks.","title":"Return only repeated strings (not same order, same letters)","body":"<p>I have a list of strings:\n[‘papi’, ‘polo’, ‘lopo’, ‘appi, ‘abba’, ‘polo’, ‘mama’]</p>\n\n<p>How can I return only:</p>\n\n<p>[‘papi’, ‘polo’, ‘lopo’, ‘appi’, ‘polo’]</p>\n\n<p>Meaning the only strings that doesn’t repeat themself in the same letters/numbers of letters.\nNeed an answer in java.\nAlso it needs to be efficient.\nThanks.</p>\n"},{"tags":["java","ip-address","cidr"],"answers":[{"tags":[],"owner":{"account_id":29056481,"reputation":26,"user_id":22258167,"display_name":"kisa"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1689852345,"creation_date":1689852345,"answer_id":76729371,"question_id":76728680,"body_markdown":"I believe the answer is actually the same as in the linked question.\r\nTo quote the relevant part:\r\n\r\n&gt; In summary, 10.90.6.14/30 is the same as 10.90.6.14 because the host is not zero. 10.90.6.12/30 is the subnet of 4 addresses because the host is zero. If you want to convert to the subnet, then use toPrefixBlock.\r\n\r\nWhich basically says a host is zero if the address is the first address in the subnet given by your CIDR mask.\r\n\r\nWhich means for your example: `20.108.104.0/22` would be the needed CIDR range.\r\n\r\nReading the linked question again, it seems like you can use the `toPrefixBlock()` method in your example code to get the wanted result without actually changing the supplied CIDR range.\r\n``` Java\r\n@Test\r\nfun testCidr() {\r\n    val cidr = IPAddressString(&quot;20.108.106.0/22&quot;).getAddress().toPrefixBlock()\r\n    val ip = IPAddressString(&quot;20.108.106.72&quot;).getAddress()\r\n    println(&quot;$ip is inside $cidr = ${cidr.contains(ip)}&quot;)\r\n}\r\n```\r\n\r\nIncidentally your `20.108.106.0/23` range works since `20.108.106.0` is the first address in that subnet.","title":"Sean Foley IPAddress library and containment inside CIDR","body":"<p>I believe the answer is actually the same as in the linked question.\nTo quote the relevant part:</p>\n<blockquote>\n<p>In summary, 10.90.6.14/30 is the same as 10.90.6.14 because the host is not zero. 10.90.6.12/30 is the subnet of 4 addresses because the host is zero. If you want to convert to the subnet, then use toPrefixBlock.</p>\n</blockquote>\n<p>Which basically says a host is zero if the address is the first address in the subnet given by your CIDR mask.</p>\n<p>Which means for your example: <code>20.108.104.0/22</code> would be the needed CIDR range.</p>\n<p>Reading the linked question again, it seems like you can use the <code>toPrefixBlock()</code> method in your example code to get the wanted result without actually changing the supplied CIDR range.</p>\n<pre><code>@Test\nfun testCidr() {\n    val cidr = IPAddressString(&quot;20.108.106.0/22&quot;).getAddress().toPrefixBlock()\n    val ip = IPAddressString(&quot;20.108.106.72&quot;).getAddress()\n    println(&quot;$ip is inside $cidr = ${cidr.contains(ip)}&quot;)\n}\n</code></pre>\n<p>Incidentally your <code>20.108.106.0/23</code> range works since <code>20.108.106.0</code> is the first address in that subnet.</p>\n"}],"owner":{"account_id":2532424,"reputation":41,"user_id":2200435,"display_name":"tubbs_uk"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":46,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":76729371,"answer_count":1,"score":0,"last_activity_date":1689852345,"creation_date":1689846871,"question_id":76728680,"body_markdown":"Similar to [this question][1] although not quite the same, I&#39;m having trouble understanding why the Sean Foley [IPAddress][2] library doesn&#39;t think that an IP address is contained inside a CIDR.\r\n\r\nFrom what I&#39;ve read, I thought that the CIDR/mask of &quot;20.108.106.0/22&quot; encompasses addresses in the range from 20.108.104.0 to 20.108.107.255. This range calculator I used [here][3] suggests it does.\r\n\r\nGiven that, I believe that the address 20.108.106.72 should be contained inside the CIDR range 20.108.106.0/22. This [CIDR range checker][4] seems to agree that it should as well.\r\n\r\nTrying out using the IPAddress library with some sample code doesn&#39;t seem to match this though. This code is Kotlin but should work the same as the Java:\r\n```\r\n@Test\r\nfun testCidr() {\r\n    val cidr = IPAddressString(&quot;20.108.106.0/22&quot;).getAddress()\r\n    val ip = IPAddressString(&quot;20.108.106.72&quot;).getAddress()\r\n    println(&quot;$ip is inside $cidr = ${cidr.contains(ip)}&quot;)\r\n}\r\n```\r\n```\r\nOutput:\r\n20.108.106.72 is inside 20.108.106.0/22 = false\r\n```\r\n\r\nI&#39;ve read the attached question, but I don&#39;t think my CIDR range is a non-zero host (eg. 20.108.106.72) because the last section is **zero**. and the other range checking tools I&#39;ve used seem to suggest it should work. I&#39;m sure this isn&#39;t a bug, but must be some misunderstanding on my part. I&#39;m trying to write code that will cope with any input of IP addresses in several forms eg. IPv6, single IP addresses, CIDR ranges which is why I was wanting to use a library like this one without needing to parse or understand the address first. I see that it works when I specify my range like &quot;20.108.106.0/**23**&quot; but again I don&#39;t understand why that would be. Thanks\r\n\r\n  [1]: https://stackoverflow.com/questions/65394800/java-ipaddress-library-and-non-zero-cidrs\r\n  [2]: https://github.com/seancfoley/IPAddress\r\n  [3]: https://www.ipaddressguide.com/cidr\r\n  [4]: https://tehnoblog.org/ip-tools/ip-address-in-cidr-range/","title":"Sean Foley IPAddress library and containment inside CIDR","body":"<p>Similar to <a href=\"https://stackoverflow.com/questions/65394800/java-ipaddress-library-and-non-zero-cidrs\">this question</a> although not quite the same, I'm having trouble understanding why the Sean Foley <a href=\"https://github.com/seancfoley/IPAddress\" rel=\"nofollow noreferrer\">IPAddress</a> library doesn't think that an IP address is contained inside a CIDR.</p>\n<p>From what I've read, I thought that the CIDR/mask of &quot;20.108.106.0/22&quot; encompasses addresses in the range from 20.108.104.0 to 20.108.107.255. This range calculator I used <a href=\"https://www.ipaddressguide.com/cidr\" rel=\"nofollow noreferrer\">here</a> suggests it does.</p>\n<p>Given that, I believe that the address 20.108.106.72 should be contained inside the CIDR range 20.108.106.0/22. This <a href=\"https://tehnoblog.org/ip-tools/ip-address-in-cidr-range/\" rel=\"nofollow noreferrer\">CIDR range checker</a> seems to agree that it should as well.</p>\n<p>Trying out using the IPAddress library with some sample code doesn't seem to match this though. This code is Kotlin but should work the same as the Java:</p>\n<pre><code>@Test\nfun testCidr() {\n    val cidr = IPAddressString(&quot;20.108.106.0/22&quot;).getAddress()\n    val ip = IPAddressString(&quot;20.108.106.72&quot;).getAddress()\n    println(&quot;$ip is inside $cidr = ${cidr.contains(ip)}&quot;)\n}\n</code></pre>\n<pre><code>Output:\n20.108.106.72 is inside 20.108.106.0/22 = false\n</code></pre>\n<p>I've read the attached question, but I don't think my CIDR range is a non-zero host (eg. 20.108.106.72) because the last section is <strong>zero</strong>. and the other range checking tools I've used seem to suggest it should work. I'm sure this isn't a bug, but must be some misunderstanding on my part. I'm trying to write code that will cope with any input of IP addresses in several forms eg. IPv6, single IP addresses, CIDR ranges which is why I was wanting to use a library like this one without needing to parse or understand the address first. I see that it works when I specify my range like &quot;20.108.106.0/<strong>23</strong>&quot; but again I don't understand why that would be. Thanks</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":1874763,"reputation":2020,"user_id":4352728,"accept_rate":50,"display_name":"Ye Win"},"score":0,"creation_date":1477377514,"post_id":40232865,"comment_id":67728390,"body_markdown":"are u using JDBC template or ...?","body":"are u using JDBC template or ...?"},{"owner":{"account_id":9065780,"reputation":173,"user_id":6750640,"accept_rate":22,"display_name":"user"},"score":0,"creation_date":1477377557,"post_id":40232865,"comment_id":67728411,"body_markdown":"I am using JPARepository for db operations","body":"I am using JPARepository for db operations"},{"owner":{"account_id":9065780,"reputation":173,"user_id":6750640,"accept_rate":22,"display_name":"user"},"score":0,"creation_date":1477409319,"post_id":40232865,"comment_id":67749987,"body_markdown":"So u mean if i have 10 update operation in the cmethod annotated with it,all the update will be committed at once and not one by one right ? Also what if i want to keep the auto commit off and explicitly perform commit after last update operation ?","body":"So u mean if i have 10 update operation in the cmethod annotated with it,all the update will be committed at once and not one by one right ? Also what if i want to keep the auto commit off and explicitly perform commit after last update operation ?"},{"owner":{"account_id":1874763,"reputation":2020,"user_id":4352728,"accept_rate":50,"display_name":"Ye Win"},"score":0,"creation_date":1477447340,"post_id":40232865,"comment_id":67767292,"body_markdown":"Yes, you are right, but be noted that @transnational also committed at  once at end of method and not one by one.","body":"Yes, you are right, but be noted that @transnational also committed at  once at end of method and not one by one."}],"answers":[{"tags":[],"owner":{"account_id":1874763,"reputation":2020,"user_id":4352728,"accept_rate":50,"display_name":"Ye Win"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1477377798,"creation_date":1477377798,"answer_id":40233051,"question_id":40232865,"body_markdown":"I would recommend you to use Programmatic approach for this case.\r\n\r\n**Programmatic transaction management:** This means that you have manage the transaction with the help of programming. That gives you extreme flexibility, but it is difficult to maintain. &lt;br/&gt;\r\nVs&lt;br/&gt;\r\n**Declarative transaction management:** This means you separate transaction management from the business code. You only use annotations or XML based configuration to manage the transactions.&lt;br/&gt;\r\n\r\nPerhaps, alternative way for your questions by Programmatic transaction management.\r\nEg. \r\n\r\n    /** DataSourceTransactionManager */\r\n        @Autowired\r\n        private PlatformTransactionManager txManager;\r\n    \r\n        public void yourMethod() {\r\n        try {\r\n         \r\n             // Start a manual transaction.\r\n             TransactionStatus status = getTransactionStatus();\r\n    \r\n             your code...\r\n    \t\t .....\r\n    \t\t .....\r\n    \r\n            //your condition \r\n            txManager.commit(status);\r\n            //your condition \r\n            txManager.rollback(status);\r\n    \r\n             } catch (YourException e) {\r\n            //your condition \r\n            txManager.rollback(status);\r\n\r\n            }       \r\n        }    \r\n    \r\n    /**\r\n         * getTransactionStatus\r\n         *\r\n         * @return TransactionStatus\r\n         */\r\n        private TransactionStatus getTransactionStatus() {\r\n            DefaultTransactionDefinition dtd = new DefaultTransactionDefinition();\r\n            dtd.setPropagationBehavior(TransactionDefinition.PROPAGATION_REQUIRES_NEW);\r\n            dtd.setIsolationLevel(TransactionDefinition.ISOLATION_READ_COMMITTED);\r\n            dtd.setReadOnly(false);\r\n    \r\n            return txManager.getTransaction(dtd);\r\n        }\r\n\r\n**Note:** It does not mean you need to always use one approach like Programmatic transaction management. I prefer mixed approach. Please use easy way like Declarative transaction for simple database services, otherwise, just control with Programmatic transaction in your services will save your logic easily.","title":"How to turn off auto commit and give explicit commit usign @transactional","body":"<p>I would recommend you to use Programmatic approach for this case.</p>\n\n<p><strong>Programmatic transaction management:</strong> This means that you have manage the transaction with the help of programming. That gives you extreme flexibility, but it is difficult to maintain. <br/>\nVs<br/>\n<strong>Declarative transaction management:</strong> This means you separate transaction management from the business code. You only use annotations or XML based configuration to manage the transactions.<br/></p>\n\n<p>Perhaps, alternative way for your questions by Programmatic transaction management.\nEg. </p>\n\n<pre><code>/** DataSourceTransactionManager */\n    @Autowired\n    private PlatformTransactionManager txManager;\n\n    public void yourMethod() {\n    try {\n\n         // Start a manual transaction.\n         TransactionStatus status = getTransactionStatus();\n\n         your code...\n         .....\n         .....\n\n        //your condition \n        txManager.commit(status);\n        //your condition \n        txManager.rollback(status);\n\n         } catch (YourException e) {\n        //your condition \n        txManager.rollback(status);\n\n        }       \n    }    \n\n/**\n     * getTransactionStatus\n     *\n     * @return TransactionStatus\n     */\n    private TransactionStatus getTransactionStatus() {\n        DefaultTransactionDefinition dtd = new DefaultTransactionDefinition();\n        dtd.setPropagationBehavior(TransactionDefinition.PROPAGATION_REQUIRES_NEW);\n        dtd.setIsolationLevel(TransactionDefinition.ISOLATION_READ_COMMITTED);\n        dtd.setReadOnly(false);\n\n        return txManager.getTransaction(dtd);\n    }\n</code></pre>\n\n<p><strong>Note:</strong> It does not mean you need to always use one approach like Programmatic transaction management. I prefer mixed approach. Please use easy way like Declarative transaction for simple database services, otherwise, just control with Programmatic transaction in your services will save your logic easily.</p>\n"},{"tags":[],"owner":{"account_id":4279009,"reputation":7633,"user_id":3498962,"display_name":"Essex Boy"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1477381456,"creation_date":1477377830,"answer_id":40233060,"question_id":40232865,"body_markdown":"You just need to put the @Transaction annotation around all the work you want to be committed:\r\n\r\n    @Autowired\r\n    private Manager1 manager1;\r\n    \r\n    @Autowired\r\n    private Manager2 manager2;\r\n    \r\n    @Transactional\r\n    public void doStuff() {\r\n       manager1.do();\r\n       manager2.do();\r\n    }\r\n\r\nEverything in method doStuff() will all be committed together, unless there is an exception thrown, in which case it will all be rolled back.\r\n\r\n\r\n\r\n","title":"How to turn off auto commit and give explicit commit usign @transactional","body":"<p>You just need to put the @Transaction annotation around all the work you want to be committed:</p>\n\n<pre><code>@Autowired\nprivate Manager1 manager1;\n\n@Autowired\nprivate Manager2 manager2;\n\n@Transactional\npublic void doStuff() {\n   manager1.do();\n   manager2.do();\n}\n</code></pre>\n\n<p>Everything in method doStuff() will all be committed together, unless there is an exception thrown, in which case it will all be rolled back.</p>\n"},{"tags":[],"owner":{"account_id":12259286,"reputation":101,"user_id":8947492,"display_name":"Yusuf BESTAS"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689852304,"creation_date":1689852304,"answer_id":76729364,"question_id":40232865,"body_markdown":"Auto-commit default mode it true.\r\n\r\nIn the case of a Transaction on a method, **it will override the auto-commit setting for that method(if auto-commit is on default mode)**. This means Transaction will set auto-commit false and queries executed within the method will be part of the same transaction. \r\n\r\nBut When you explicitly set auto-commit to true, you are telling Hibernate that you want to control when transactions are committed. And in this case, if needs to use the @Transacional method then you have to set auto-commit=false manually everywhere used in the transaction otherwise cause an exception Caused by: `java.sql.SQLException: Can&#39;t call commit when autocommit=true`\r\n\r\nSo, I think it would be much better directly delete a set of auto-commit. and just use the default mode unless use auto-commit=false mode.","title":"How to turn off auto commit and give explicit commit usign @transactional","body":"<p>Auto-commit default mode it true.</p>\n<p>In the case of a Transaction on a method, <strong>it will override the auto-commit setting for that method(if auto-commit is on default mode)</strong>. This means Transaction will set auto-commit false and queries executed within the method will be part of the same transaction.</p>\n<p>But When you explicitly set auto-commit to true, you are telling Hibernate that you want to control when transactions are committed. And in this case, if needs to use the @Transacional method then you have to set auto-commit=false manually everywhere used in the transaction otherwise cause an exception Caused by: <code>java.sql.SQLException: Can't call commit when autocommit=true</code></p>\n<p>So, I think it would be much better directly delete a set of auto-commit. and just use the default mode unless use auto-commit=false mode.</p>\n"}],"owner":{"account_id":9065780,"reputation":173,"user_id":6750640,"accept_rate":22,"display_name":"user"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3716,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":3,"score":4,"last_activity_date":1689852304,"creation_date":1477377093,"question_id":40232865,"body_markdown":"How can I turn off auto commit and give explicit commit using `@transactional`? \r\n\r\nI have multiple operations and I want them to get committed after all select and update are done. Reason being the select is done based on some field as null and this data is used somewhere and then update is done to some records. So before new records come, I have to change the field as to some value and avoid selection of new data i.e select only those record that got updated","title":"How to turn off auto commit and give explicit commit usign @transactional","body":"<p>How can I turn off auto commit and give explicit commit using <code>@transactional</code>? </p>\n\n<p>I have multiple operations and I want them to get committed after all select and update are done. Reason being the select is done based on some field as null and this data is used somewhere and then update is done to some records. So before new records come, I have to change the field as to some value and avoid selection of new data i.e select only those record that got updated</p>\n"},{"tags":["java","android","computer-vision","google-mlkit"],"owner":{"account_id":18956037,"reputation":53,"user_id":13832610,"display_name":"Hariharakrishnan Mannarsamy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689852166,"creation_date":1689852166,"question_id":76729350,"body_markdown":"I want to recognize text from different languages across globe in any image and translate to English.\r\nGoogle&#39;s ML KIT for vision supports 5 different Text recognizers for the 5 scripts: Latin, Devanagari, Chinese, Japanese and Korean.\r\nDo I need to use each of the text recognizers to check if the language in the image can be recognized by that Text recognizer?\r\nIs there a shorter way to detect the language of the text in an image?","title":"How to recognize the language of text in an image from a Java program for Android using Google&#39;s ML Kit?","body":"<p>I want to recognize text from different languages across globe in any image and translate to English.\nGoogle's ML KIT for vision supports 5 different Text recognizers for the 5 scripts: Latin, Devanagari, Chinese, Japanese and Korean.\nDo I need to use each of the text recognizers to check if the language in the image can be recognized by that Text recognizer?\nIs there a shorter way to detect the language of the text in an image?</p>\n"},{"tags":["java","gradle","code-coverage","jacoco"],"comments":[{"owner":{"account_id":245690,"reputation":14585,"user_id":519334,"accept_rate":86,"display_name":"k3b"},"score":0,"creation_date":1491985084,"post_id":38675853,"comment_id":73789663,"body_markdown":"Has anybody experience with [gradle-3.4+-jacoco-coverage](https://github.com/palantir/gradle-jacoco-coverage) if the new verify feature allows jacoco coverage report over more than one submodules?","body":"Has anybody experience with <a href=\"https://github.com/palantir/gradle-jacoco-coverage\" rel=\"nofollow noreferrer\">gradle-3.4+-jacoco-coverage</a> if the new verify feature allows jacoco coverage report over more than one submodules?"}],"answers":[{"tags":[],"owner":{"account_id":251211,"reputation":32622,"user_id":528428,"accept_rate":80,"display_name":"Benjamin Muschko"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1469969979,"creation_date":1469969979,"answer_id":38684229,"question_id":38675853,"body_markdown":"You will need to create a new task of type [JacocoMerge](https://docs.gradle.org/current/dsl/org.gradle.testing.jacoco.tasks.JacocoMerge.html) that aggregates the JaCoCo reports from all subprojects. See a similar discussion in this [post](https://discuss.gradle.org/t/merge-jacoco-coverage-reports-for-multiproject-setups/12100/6).","title":"Gradle jacoco coverage report with more than one submodule(s)?","body":"<p>You will need to create a new task of type <a href=\"https://docs.gradle.org/current/dsl/org.gradle.testing.jacoco.tasks.JacocoMerge.html\" rel=\"nofollow\">JacocoMerge</a> that aggregates the JaCoCo reports from all subprojects. See a similar discussion in this <a href=\"https://discuss.gradle.org/t/merge-jacoco-coverage-reports-for-multiproject-setups/12100/6\" rel=\"nofollow\">post</a>.</p>\n"},{"tags":[],"owner":{"account_id":245690,"reputation":14585,"user_id":519334,"accept_rate":86,"display_name":"k3b"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1689852078,"creation_date":1470060935,"answer_id":38701149,"question_id":38675853,"body_markdown":"Finally I found this plugin: https://github.com/palantir/gradle-jacoco-coverage that did the job for me:\r\n\r\nroot gradle.build\r\n\r\n\tbuildscript {\r\n\t\trepositories {\r\n\t\t\tjcenter()\r\n\t\t}\r\n\t\tdependencies {\r\n\t\t\t// see https://jcenter.bintray.com/com/android/tools/build/gradle/\r\n\t\t\tclasspath &#39;com.android.tools.build:gradle:2.1.0&#39;\r\n\t\t\t// classpath &#39;com.android.tools.build:gradle:2.2.0-alpha1&#39;\r\n\r\n\t\t\t// https://github.com/palantir/gradle-jacoco-coverage\r\n\t\t\tclasspath &#39;com.palantir:jacoco-coverage:0.4.0&#39;\t\t\r\n\t\t}\r\n\t}\r\n\r\n\t// https://github.com/palantir/gradle-jacoco-coverage\r\n\tapply plugin: &#39;com.palantir.jacoco-full-report&#39;\r\n\r\nall subprojects that has\r\n\r\n    apply plugin: &#39;jacoco&#39;\r\n\r\nare included in the report.\r\n\r\n[Update 2023-07-20]\r\n\r\nNow there is a new gradle plugin that does the job. Therefore i changed the accepted answer\r\n","title":"Gradle jacoco coverage report with more than one submodule(s)?","body":"<p>Finally I found this plugin: <a href=\"https://github.com/palantir/gradle-jacoco-coverage\" rel=\"nofollow noreferrer\">https://github.com/palantir/gradle-jacoco-coverage</a> that did the job for me:</p>\n<p>root gradle.build</p>\n<pre><code>buildscript {\n    repositories {\n        jcenter()\n    }\n    dependencies {\n        // see https://jcenter.bintray.com/com/android/tools/build/gradle/\n        classpath 'com.android.tools.build:gradle:2.1.0'\n        // classpath 'com.android.tools.build:gradle:2.2.0-alpha1'\n\n        // https://github.com/palantir/gradle-jacoco-coverage\n        classpath 'com.palantir:jacoco-coverage:0.4.0'      \n    }\n}\n\n// https://github.com/palantir/gradle-jacoco-coverage\napply plugin: 'com.palantir.jacoco-full-report'\n</code></pre>\n<p>all subprojects that has</p>\n<pre><code>apply plugin: 'jacoco'\n</code></pre>\n<p>are included in the report.</p>\n<p>[Update 2023-07-20]</p>\n<p>Now there is a new gradle plugin that does the job. Therefore i changed the accepted answer</p>\n"},{"tags":[],"owner":{"account_id":11755335,"reputation":21,"user_id":8603211,"display_name":"Bal&#225;zs H&#225;morszky"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1505305056,"creation_date":1505305056,"answer_id":46197372,"question_id":38675853,"body_markdown":"One possible solution (with some sonar specific parts):\r\n\r\n    def getJacocoMergeTask(Project proj){\r\n        def jmClosure =  {\r\n            doFirst {\r\n                logger.info &quot;${path} started&quot;\r\n                executionData.each { ed -&gt;\r\n                    logger.info &quot;${path} data: ${ed}&quot;\r\n                }\r\n            }\r\n            onlyIf {\r\n                executionData != null &amp;&amp; !executionData.isEmpty()\r\n            }\r\n        }\r\n    \r\n        def jacocoMerge = null\r\n        if(!proj.tasks.findByName(&#39;jacocoMerge&#39;)){\r\n    \r\n            jacocoMerge = proj.tasks.create(&#39;jacocoMerge&#39;, JacocoMerge.class)\r\n            jacocoMerge.configure jmClosure\r\n\r\n            // sonar specific part\r\n            proj.rootProject.tasks[&quot;sonarqube&quot;].mustRunAfter jacocoMerge\r\n    \r\n            proj.sonarqube {\r\n                properties {\r\n                    property &quot;sonar.jacoco.reportPaths&quot;, jacocoMerge.destinationFile.absolutePath\r\n                }\r\n            }\r\n            // end of sonar specific part\r\n\r\n            logger.info &quot;${jacocoMerge.path} created&quot;\r\n        } else {\r\n            jacocoMerge = proj.tasks[&quot;jacocoMerge&quot;]\r\n        }\r\n        jacocoMerge\r\n    }\r\n    \r\n    \r\n    afterEvaluate { project -&gt;\r\n        def jacocoMerge = getJacocoMergeTask(project)\r\n    \r\n        project.tasks.withType(Test) { task -&gt;\r\n            logger.info &quot;${jacocoMerge.path} cfg: ${task.path}&quot;\r\n    \r\n            task.finalizedBy jacocoMerge\r\n            jacocoMerge.dependsOn task\r\n    \r\n            task.doLast {\r\n                logger.info &quot;${jacocoMerge.path} executionData ${task.path}&quot;\r\n                jacocoMerge.executionData task\r\n            }\r\n    \r\n            def cfg = configurations.getByName(&quot;${task.name}Runtime&quot;)\r\n            logger.info &quot;${project.path} process config: ${cfg.name}&quot;\r\n    \r\n            cfg.getAllDependencies().withType(ProjectDependency.class).each { pd -&gt;\r\n                def depProj = pd.dependencyProject\r\n                logger.info &quot;${task.path} dependsOn ${depProj.path}&quot;\r\n                def jm = getJacocoMergeTask(depProj)\r\n    \r\n                task.finalizedBy jm\r\n                jm.dependsOn task\r\n    \r\n                task.doLast {\r\n                    logger.info &quot;${jm.path} executionData ${task.path}&quot;\r\n                    jm.executionData task\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\nThis will merge all the executionData from all the projects, that used a certain project during testing as a dependency.","title":"Gradle jacoco coverage report with more than one submodule(s)?","body":"<p>One possible solution (with some sonar specific parts):</p>\n\n<pre><code>def getJacocoMergeTask(Project proj){\n    def jmClosure =  {\n        doFirst {\n            logger.info \"${path} started\"\n            executionData.each { ed -&gt;\n                logger.info \"${path} data: ${ed}\"\n            }\n        }\n        onlyIf {\n            executionData != null &amp;&amp; !executionData.isEmpty()\n        }\n    }\n\n    def jacocoMerge = null\n    if(!proj.tasks.findByName('jacocoMerge')){\n\n        jacocoMerge = proj.tasks.create('jacocoMerge', JacocoMerge.class)\n        jacocoMerge.configure jmClosure\n\n        // sonar specific part\n        proj.rootProject.tasks[\"sonarqube\"].mustRunAfter jacocoMerge\n\n        proj.sonarqube {\n            properties {\n                property \"sonar.jacoco.reportPaths\", jacocoMerge.destinationFile.absolutePath\n            }\n        }\n        // end of sonar specific part\n\n        logger.info \"${jacocoMerge.path} created\"\n    } else {\n        jacocoMerge = proj.tasks[\"jacocoMerge\"]\n    }\n    jacocoMerge\n}\n\n\nafterEvaluate { project -&gt;\n    def jacocoMerge = getJacocoMergeTask(project)\n\n    project.tasks.withType(Test) { task -&gt;\n        logger.info \"${jacocoMerge.path} cfg: ${task.path}\"\n\n        task.finalizedBy jacocoMerge\n        jacocoMerge.dependsOn task\n\n        task.doLast {\n            logger.info \"${jacocoMerge.path} executionData ${task.path}\"\n            jacocoMerge.executionData task\n        }\n\n        def cfg = configurations.getByName(\"${task.name}Runtime\")\n        logger.info \"${project.path} process config: ${cfg.name}\"\n\n        cfg.getAllDependencies().withType(ProjectDependency.class).each { pd -&gt;\n            def depProj = pd.dependencyProject\n            logger.info \"${task.path} dependsOn ${depProj.path}\"\n            def jm = getJacocoMergeTask(depProj)\n\n            task.finalizedBy jm\n            jm.dependsOn task\n\n            task.doLast {\n                logger.info \"${jm.path} executionData ${task.path}\"\n                jm.executionData task\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>This will merge all the executionData from all the projects, that used a certain project during testing as a dependency.</p>\n"},{"tags":[],"owner":{"account_id":460397,"reputation":1881,"user_id":861451,"display_name":"Le Duc Duy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1555142947,"creation_date":1555142947,"answer_id":55663373,"question_id":38675853,"body_markdown":"You can create a merged report without merged `exec` file. Create a new task to the root of `build.gradle` with following content.\r\n\r\n    task jacocoReport(type: JacocoReport) {\r\n        for (p in allprojects) {\r\n            def testTask = p.tasks.findByName(&quot;test&quot;)\r\n            if (testTask != null)\r\n                dependsOn(testTask)\r\n    \r\n            executionData.setFrom(file(&quot;${p.buildDir}/jacoco/test.exec&quot;))\r\n            classDirectories.from(file(&quot;${p.buildDir}/classes/java/main&quot;))\r\n        }\r\n    }\r\n\r\n","title":"Gradle jacoco coverage report with more than one submodule(s)?","body":"<p>You can create a merged report without merged <code>exec</code> file. Create a new task to the root of <code>build.gradle</code> with following content.</p>\n\n<pre><code>task jacocoReport(type: JacocoReport) {\n    for (p in allprojects) {\n        def testTask = p.tasks.findByName(\"test\")\n        if (testTask != null)\n            dependsOn(testTask)\n\n        executionData.setFrom(file(\"${p.buildDir}/jacoco/test.exec\"))\n        classDirectories.from(file(\"${p.buildDir}/classes/java/main\"))\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6393998,"reputation":301,"user_id":4959062,"display_name":"Wei Yuan"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1613574616,"creation_date":1573828694,"answer_id":58879245,"question_id":38675853,"body_markdown":"This works for me\r\n\r\n    plugins {\r\n        id &#39;org.kordamp.gradle.jacoco&#39; version &#39;0.43.0&#39;\r\n    }\r\n    \r\n    config {\r\n        coverage {\r\n            jacoco {\r\n                enabled\r\n                aggregateExecFile\r\n                aggregateReportHtmlFile\r\n                aggregateReportXmlFile\r\n                additionalSourceDirs\r\n                additionalClassDirs\r\n            }\r\n        }\r\n    }\r\n\r\nhttps://kordamp.org/kordamp-gradle-plugins/#_org_kordamp_gradle_jacoco","title":"Gradle jacoco coverage report with more than one submodule(s)?","body":"<p>This works for me</p>\n<pre><code>plugins {\n    id 'org.kordamp.gradle.jacoco' version '0.43.0'\n}\n\nconfig {\n    coverage {\n        jacoco {\n            enabled\n            aggregateExecFile\n            aggregateReportHtmlFile\n            aggregateReportXmlFile\n            additionalSourceDirs\n            additionalClassDirs\n        }\n    }\n}\n</code></pre>\n<p><a href=\"https://kordamp.org/kordamp-gradle-plugins/#_org_kordamp_gradle_jacoco\" rel=\"nofollow noreferrer\">https://kordamp.org/kordamp-gradle-plugins/#_org_kordamp_gradle_jacoco</a></p>\n"}],"owner":{"account_id":245690,"reputation":14585,"user_id":519334,"accept_rate":86,"display_name":"k3b"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":23984,"favorite_count":0,"down_vote_count":0,"up_vote_count":13,"accepted_answer_id":58879245,"answer_count":5,"score":13,"last_activity_date":1689852078,"creation_date":1469894508,"question_id":38675853,"body_markdown":"Does anybody know how to configure a gradle file for java jacoco report\r\nthat contain codecoverage of more than one gradle submodule?\r\n\r\nmy current approach only shows codecoverage of the current submodule but not\r\ncodecoverage of a sibling-submodul.\r\n\r\nI have this project structure\r\n\r\n    - build.gradle (1)\r\n\t- corelib/\r\n\t\t- build.gradle (2)\r\n\t\t- src/main/java/package/Core.java\r\n\t- extlib/\r\n\t\t- build.gradle (3)\r\n\t\t- src/main/java/package/Ext.java\r\n\t\t- src/test/java/package/Integrationtest.java\r\n\r\nwhen i execute `gradlew :extlib:check :extlib:jacocoTestReport` the junit-test &quot;Integrationtest.java&quot;\r\nis executed and a codecoverage report is generated that does not contain codecoverage for corelib classes like Core.java \r\n\r\nThe result should include the codecoverage of Ext.java and Core.java\r\n\r\nI already read\r\n\r\n* https://docs.gradle.org/current/userguide/jacoco_plugin.html \r\n* and https://stackoverflow.com/questions/29887805/filter-jacoco-coverage-reports-with-gradle\r\n\r\nbut found no clues\r\n\r\n\r\nhere is content of the gradle files\r\n\r\n\t// root build.gradle (1)\r\n\t// Top-level build file where you can add configuration options \r\n    // common to all sub-projects/modules.\r\n\tbuildscript {\r\n\t\trepositories {\r\n\t\t\tjcenter()\r\n\t\t}\r\n\t\tdependencies {\r\n\t\t\tclasspath &#39;com.android.tools.build:gradle:2.1.0&#39;\r\n\t\t}\r\n\t}\r\n\tallprojects {\r\n\t\trepositories {\r\n\t\t\tjcenter()\r\n\t\t}\r\n\t}\r\n\r\n------------\r\n\r\n\t// build.gradle (2) subproject build file for corelib.\r\n\tapply plugin: &#39;java&#39;\r\n\tapply plugin: &#39;jacoco&#39;\r\n\r\n\tdependencies {\r\n\t}\r\n\r\n\tjacocoTestReport {\r\n\t\treports {\r\n\t\t\txml.enabled true\r\n\t\t\thtml.enabled true\r\n\t\t}\r\n\t}\r\n\t\r\n------------\r\n\r\n\t// build.gradle (3) subproject build file for extlib.\r\n\tapply plugin: &#39;java&#39;\r\n\tapply plugin: &#39;jacoco&#39;\r\n\r\n\tdependencies {\r\n\t\tcompile project(&#39;:corelib&#39;)\r\n\t\ttestCompile &#39;junit:junit:4.11&#39;\r\n\t\t\r\n\t\t// this does not compile\r\n\t\t// jacocoTestReport project(&#39;:pixymeta-core-lib&#39;)\r\n\t}\r\n\r\n\tjacocoTestReport {\r\n\t\treports {\r\n\t\t\txml.enabled true\r\n\t\t\thtml.enabled true\r\n\t\t}\r\n\t}\r\n\r\n\t// workaround because android-studio does not make the test resources available\r\n\t// see https://code.google.com/p/android/issues/detail?id=64887#c13\r\n\ttask copyTestResources(type: Copy) {\r\n\t\tfrom sourceSets.test.resources\r\n\t\tinto sourceSets.test.output.classesDir\r\n\t}\r\n\tprocessTestResources.dependsOn copyTestResources\r\n\r\n---\r\n\r\n[Update 2016-08-01]\r\n\r\nthanks to @Benjamin Muschko i also tried in the root gradle file\r\n\r\n\t// https://discuss.gradle.org/t/merge-jacoco-coverage-reports-for-multiproject-setups/12100/6\r\n\t// https://docs.gradle.org/current/dsl/org.gradle.testing.jacoco.tasks.JacocoMerge.html\r\n\ttask jacocoMerge(type: JacocoMerge) {\r\n\t   subprojects.each { subproject -&gt;\r\n\t\t  executionData subproject.tasks.withType(Test)\r\n\t   } \r\n\t   \r\n\t}\r\n\r\nbut got error message (with gradle-2.14)\r\n\r\n\t* What went wrong:\r\n\tSome problems were found with the configuration of task &#39;:jacocoMerge&#39;.\r\n\t&gt; No value has been specified for property &#39;jacocoClasspath&#39;.\r\n\t&gt; No value has been specified for property &#39;executionData&#39;.\r\n\t&gt; No value has been specified for property &#39;destinationFile&#39;.\r\n\r\n---\r\n\r\nthere is also the gradle plugin https://github.com/paveldudka/JacocoEverywhere where i have asked for mulit-submodule support https://github.com/paveldudka/JacocoEverywhere/issues/16\r\n\r\n[update 2016-08-01] i found a working solution based on https://github.com/palantir/gradle-jacoco-coverage\r\n\r\nSee my own answer below\r\n","title":"Gradle jacoco coverage report with more than one submodule(s)?","body":"<p>Does anybody know how to configure a gradle file for java jacoco report\nthat contain codecoverage of more than one gradle submodule?</p>\n\n<p>my current approach only shows codecoverage of the current submodule but not\ncodecoverage of a sibling-submodul.</p>\n\n<p>I have this project structure</p>\n\n<pre><code>- build.gradle (1)\n- corelib/\n    - build.gradle (2)\n    - src/main/java/package/Core.java\n- extlib/\n    - build.gradle (3)\n    - src/main/java/package/Ext.java\n    - src/test/java/package/Integrationtest.java\n</code></pre>\n\n<p>when i execute <code>gradlew :extlib:check :extlib:jacocoTestReport</code> the junit-test \"Integrationtest.java\"\nis executed and a codecoverage report is generated that does not contain codecoverage for corelib classes like Core.java </p>\n\n<p>The result should include the codecoverage of Ext.java and Core.java</p>\n\n<p>I already read</p>\n\n<ul>\n<li><a href=\"https://docs.gradle.org/current/userguide/jacoco_plugin.html\" rel=\"noreferrer\">https://docs.gradle.org/current/userguide/jacoco_plugin.html</a> </li>\n<li>and <a href=\"https://stackoverflow.com/questions/29887805/filter-jacoco-coverage-reports-with-gradle\">Filter JaCoCo coverage reports with Gradle</a></li>\n</ul>\n\n<p>but found no clues</p>\n\n<p>here is content of the gradle files</p>\n\n<pre><code>// root build.gradle (1)\n// Top-level build file where you can add configuration options \n// common to all sub-projects/modules.\nbuildscript {\n    repositories {\n        jcenter()\n    }\n    dependencies {\n        classpath 'com.android.tools.build:gradle:2.1.0'\n    }\n}\nallprojects {\n    repositories {\n        jcenter()\n    }\n}\n</code></pre>\n\n<hr>\n\n<pre><code>// build.gradle (2) subproject build file for corelib.\napply plugin: 'java'\napply plugin: 'jacoco'\n\ndependencies {\n}\n\njacocoTestReport {\n    reports {\n        xml.enabled true\n        html.enabled true\n    }\n}\n</code></pre>\n\n<hr>\n\n<pre><code>// build.gradle (3) subproject build file for extlib.\napply plugin: 'java'\napply plugin: 'jacoco'\n\ndependencies {\n    compile project(':corelib')\n    testCompile 'junit:junit:4.11'\n\n    // this does not compile\n    // jacocoTestReport project(':pixymeta-core-lib')\n}\n\njacocoTestReport {\n    reports {\n        xml.enabled true\n        html.enabled true\n    }\n}\n\n// workaround because android-studio does not make the test resources available\n// see https://code.google.com/p/android/issues/detail?id=64887#c13\ntask copyTestResources(type: Copy) {\n    from sourceSets.test.resources\n    into sourceSets.test.output.classesDir\n}\nprocessTestResources.dependsOn copyTestResources\n</code></pre>\n\n<hr>\n\n<p>[Update 2016-08-01]</p>\n\n<p>thanks to @Benjamin Muschko i also tried in the root gradle file</p>\n\n<pre><code>// https://discuss.gradle.org/t/merge-jacoco-coverage-reports-for-multiproject-setups/12100/6\n// https://docs.gradle.org/current/dsl/org.gradle.testing.jacoco.tasks.JacocoMerge.html\ntask jacocoMerge(type: JacocoMerge) {\n   subprojects.each { subproject -&gt;\n      executionData subproject.tasks.withType(Test)\n   } \n\n}\n</code></pre>\n\n<p>but got error message (with gradle-2.14)</p>\n\n<pre><code>* What went wrong:\nSome problems were found with the configuration of task ':jacocoMerge'.\n&gt; No value has been specified for property 'jacocoClasspath'.\n&gt; No value has been specified for property 'executionData'.\n&gt; No value has been specified for property 'destinationFile'.\n</code></pre>\n\n<hr>\n\n<p>there is also the gradle plugin <a href=\"https://github.com/paveldudka/JacocoEverywhere\" rel=\"noreferrer\">https://github.com/paveldudka/JacocoEverywhere</a> where i have asked for mulit-submodule support <a href=\"https://github.com/paveldudka/JacocoEverywhere/issues/16\" rel=\"noreferrer\">https://github.com/paveldudka/JacocoEverywhere/issues/16</a></p>\n\n<p>[update 2016-08-01] i found a working solution based on <a href=\"https://github.com/palantir/gradle-jacoco-coverage\" rel=\"noreferrer\">https://github.com/palantir/gradle-jacoco-coverage</a></p>\n\n<p>See my own answer below</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":339859,"reputation":13331,"user_id":669576,"accept_rate":85,"display_name":"001"},"score":0,"creation_date":1673557087,"post_id":75101694,"comment_id":132532441,"body_markdown":"`(int)Math.pow(10,n-1)` will produce integer overflow for large values of `n`. For example: `(int)Math.pow(10, 10)` yields `2147483647` because of the conversion from `double` to `int`.","body":"<code>(int)Math.pow(10,n-1)</code> will produce integer overflow for large values of <code>n</code>. For example: <code>(int)Math.pow(10, 10)</code> yields <code>2147483647</code> because of the conversion from <code>double</code> to <code>int</code>."}],"answers":[{"tags":[],"owner":{"account_id":16075669,"reputation":36,"user_id":11625276,"display_name":"Smooth_ops"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689851700,"creation_date":1689851700,"answer_id":76729290,"question_id":75101694,"body_markdown":"In the first solution, you print a string. In the second solution, you print an integer. \r\nWhen `n` is huge, this integer which is of the order of 10 to the power of `n` will increase exponentially and eventually create a runtime exception due to memory overflow.\r\n","title":"CODECHEF problem : same output , but one showing wrong submission","body":"<p>In the first solution, you print a string. In the second solution, you print an integer.\nWhen <code>n</code> is huge, this integer which is of the order of 10 to the power of <code>n</code> will increase exponentially and eventually create a runtime exception due to memory overflow.</p>\n"}],"owner":{"account_id":27513472,"reputation":1,"user_id":20994917,"display_name":"varsha Sharma"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":47,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1689851700,"creation_date":1673553615,"question_id":75101694,"body_markdown":"BOTH code output will be same for any testcase , still CODE 1 submitted successfully and CODE 2 not , why??\r\n\r\n**CODE 1:**\r\n        \r\n```\r\nint t = in.nextInt();\r\nwhile((t--)&gt;0){\r\n    int n = in.nextInt();\r\n    for(int j=0;j&lt;n;j++){\r\n        if(j==0 || j==n-1)\r\n            System.out.print(&quot;1&quot;);\r\n        else\r\n           System.out.print(&quot;0&quot;);\r\n    }\r\n    System.out.print(&quot;\\n&quot;);\r\n```\r\n\r\n**CODE 2:**\r\n\r\n```\r\nint t = in.nextInt();\r\nwhile((t--)&gt;0){\r\n    int n = in.nextInt();\r\n    System.out.println((int)Math.pow(10,n-1)+1);\r\n}\r\n```\r\n\r\nSample test case :\r\n\r\n    2\r\n    4\r\n    3\r\n\r\nOutput:\r\n\r\n    1001\r\n    101\r\n\r\nproblem link : https://www.codechef.com/problems/ZOOZ\r\n\r\n\r\n\r\n\r\nPLEASE OPT ME OUT , if you got the logic where i&#39;m wrong.\r\n\r\n","title":"CODECHEF problem : same output , but one showing wrong submission","body":"<p>BOTH code output will be same for any testcase , still CODE 1 submitted successfully and CODE 2 not , why??</p>\n<p><strong>CODE 1:</strong></p>\n<pre><code>int t = in.nextInt();\nwhile((t--)&gt;0){\n    int n = in.nextInt();\n    for(int j=0;j&lt;n;j++){\n        if(j==0 || j==n-1)\n            System.out.print(&quot;1&quot;);\n        else\n           System.out.print(&quot;0&quot;);\n    }\n    System.out.print(&quot;\\n&quot;);\n</code></pre>\n<p><strong>CODE 2:</strong></p>\n<pre><code>int t = in.nextInt();\nwhile((t--)&gt;0){\n    int n = in.nextInt();\n    System.out.println((int)Math.pow(10,n-1)+1);\n}\n</code></pre>\n<p>Sample test case :</p>\n<pre><code>2\n4\n3\n</code></pre>\n<p>Output:</p>\n<pre><code>1001\n101\n</code></pre>\n<p>problem link : <a href=\"https://www.codechef.com/problems/ZOOZ\" rel=\"nofollow noreferrer\">https://www.codechef.com/problems/ZOOZ</a></p>\n<p>PLEASE OPT ME OUT , if you got the logic where i'm wrong.</p>\n"},{"tags":["javascript","java","android","react-native","expo"],"owner":{"account_id":25959079,"reputation":1,"user_id":19675991,"display_name":"Rotwo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689851453,"creation_date":1689787836,"question_id":76723863,"body_markdown":"I&#39;ve tried to build my application using [EAS][1]\r\n```console\r\neas build --platform android --local\r\n```\r\nIt keeps giving me errors that make no sense.&lt;br&gt;\r\nHow can I install the compatible SDK versions and gradle?&lt;br&gt;\r\n\r\nI&#39;ve tried to do `eas build --platform android --local`\r\n\r\nI was expecting to get an Android application bundle / apk\r\n\r\n\r\n  [1]: https://docs.expo.dev/build/introduction/","title":"How to build an Expo application on Linux locally","body":"<p>I've tried to build my application using <a href=\"https://docs.expo.dev/build/introduction/\" rel=\"nofollow noreferrer\">EAS</a></p>\n<pre><code>eas build --platform android --local\n</code></pre>\n<p>It keeps giving me errors that make no sense.<br>\nHow can I install the compatible SDK versions and gradle?<br></p>\n<p>I've tried to do <code>eas build --platform android --local</code></p>\n<p>I was expecting to get an Android application bundle / apk</p>\n"},{"tags":["java","apache-kafka"],"comments":[{"owner":{"account_id":8224393,"reputation":684,"user_id":6187114,"display_name":"nitinsridar"},"score":0,"creation_date":1605162501,"post_id":57825222,"comment_id":114568147,"body_markdown":"@Gary Russell Can you please answer this, even I&#39;m seeing this error","body":"@Gary Russell Can you please answer this, even I&#39;m seeing this error"},{"owner":{"account_id":2651152,"reputation":9574,"user_id":2292791,"accept_rate":58,"display_name":"MaatDeamon"},"score":0,"creation_date":1605162768,"post_id":57825222,"comment_id":114568221,"body_markdown":"What’s the exact question ?","body":"What’s the exact question ?"},{"owner":{"account_id":8224393,"reputation":684,"user_id":6187114,"display_name":"nitinsridar"},"score":0,"creation_date":1605163328,"post_id":57825222,"comment_id":114568368,"body_markdown":"I have seen the same error... What you have seen?","body":"I have seen the same error... What you have seen?"},{"owner":{"account_id":2651152,"reputation":9574,"user_id":2292791,"accept_rate":58,"display_name":"MaatDeamon"},"score":0,"creation_date":1605163378,"post_id":57825222,"comment_id":114568387,"body_markdown":"Unfortunately I never really solved the problem and somehow with the update of Kafka the problem disappeared!","body":"Unfortunately I never really solved the problem and somehow with the update of Kafka the problem disappeared!"},{"owner":{"account_id":2651152,"reputation":9574,"user_id":2292791,"accept_rate":58,"display_name":"MaatDeamon"},"score":1,"creation_date":1605163425,"post_id":57825222,"comment_id":114568400,"body_markdown":"Also it is not an error, not even a warning but info. So best ignore it unless u have a real problem","body":"Also it is not an error, not even a warning but info. So best ignore it unless u have a real problem"},{"owner":{"account_id":8224393,"reputation":684,"user_id":6187114,"display_name":"nitinsridar"},"score":0,"creation_date":1605163433,"post_id":57825222,"comment_id":114568403,"body_markdown":"Do you how to restart consumer automatically upon failure?","body":"Do you how to restart consumer automatically upon failure?"}],"answers":[{"tags":[],"owner":{"account_id":958948,"reputation":21268,"user_id":983722,"accept_rate":79,"display_name":"Dennis Jaheruddin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1626955262,"creation_date":1626955262,"answer_id":68484479,"question_id":57825222,"body_markdown":"As mentioned in the comments this was resolved by updating Kafka.\r\n\r\n(As far as it was a problem at all for this user). If you have a problem with additional symptoms it is likely a different situation so please use a different question.","title":"Kafka FETCH_SESSION_ID_NOT_FOUND often seen in logs","body":"<p>As mentioned in the comments this was resolved by updating Kafka.</p>\n<p>(As far as it was a problem at all for this user). If you have a problem with additional symptoms it is likely a different situation so please use a different question.</p>\n"},{"tags":[],"owner":{"account_id":9085119,"reputation":77,"user_id":6763444,"accept_rate":25,"display_name":"fallen.lu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689851182,"creation_date":1689851182,"answer_id":76729225,"question_id":57825222,"body_markdown":"Maybe the number of your consumer threads exceeds the number of partitions. In this case, you can use &#39;kafka-consumer-groups.sh&#39; to list all your consumer groups and check if there are any partitions that have not been consumed.","title":"Kafka FETCH_SESSION_ID_NOT_FOUND often seen in logs","body":"<p>Maybe the number of your consumer threads exceeds the number of partitions. In this case, you can use 'kafka-consumer-groups.sh' to list all your consumer groups and check if there are any partitions that have not been consumed.</p>\n"}],"owner":{"account_id":2651152,"reputation":9574,"user_id":2292791,"accept_rate":58,"display_name":"MaatDeamon"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":5799,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"answer_count":2,"score":10,"last_activity_date":1689851182,"creation_date":1567785291,"question_id":57825222,"body_markdown":"Running Kafka 2.3.0, Kafka client 2.1.1, and my brokers keep outputting the following logs:\r\n\r\n```\r\n[2019-09-06 15:18:03,596] INFO [ReplicaFetcher replicaId=1, leaderId=0, fetcherId=0] Node 0 was unable to process the fetch request with (sessionId=1458702821, epoch=538): FETCH_SESSION_ID_NOT_FOUND. (org.apache.kafka.clients.FetchSessionHandler)\r\n[2019-09-06 15:21:11,145] INFO [GroupMetadataManager brokerId=1] Removed 0 expired offsets in 1 milliseconds. (kafka.coordinator.group.GroupMetadataManager)\r\n[2019-09-06 15:22:33,737] INFO [ReplicaFetcher replicaId=1, leaderId=0, fetcherId=0] Node 0 was unable to process the fetch request with (sessionId=1917353656, epoch=538): FETCH_SESSION_ID_NOT_FOUND. (org.apache.kafka.clients.FetchSessionHandler)\r\n[2019-09-06 15:27:03,768] INFO [ReplicaFetcher replicaId=1, leaderId=0, fetcherId=0] Node 0 was unable to process the fetch request with (sessionId=404608404, epoch=538): FETCH_SESSION_ID_NOT_FOUND. (org.apache.kafka.clients.FetchSessionHandler)\r\n[2019-09-06 15:31:11,145] INFO [GroupMetadataManager brokerId=1] Removed 0 expired offsets in 1 milliseconds. (kafka.coordinator.group.GroupMetadataManager)\r\n[2019-09-06 15:31:34,313] INFO [ReplicaFetcher replicaId=1, leaderId=0, fetcherId=0] Node 0 was unable to process the fetch request with (sessionId=1690401868, epoch=539): FETCH_SESSION_ID_NOT_FOUND. (org.apache.kafka.clients.FetchSessionHandler)\r\n[2019-09-06 15:36:04,404] INFO [ReplicaFetcher replicaId=1, leaderId=0, fetcherId=0] Node 0 was unable to process the fetch request with (sessionId=1167288700, epoch=538): FETCH_SESSION_ID_NOT_FOUND. (org.apache.kafka.clients.FetchSessionHandler)\r\n[2019-09-06 15:40:34,409] INFO [ReplicaFetcher replicaId=1, leaderId=0, fetcherId=0] Node 0 was unable to process the fetch request with (sessionId=2135343705, epoch=538): FETCH_SESSION_ID_NOT_FOUND. (org.apache.kafka.clients.FetchSessionHandler)\r\n[2019-09-06 15:41:11,145] INFO [GroupMetadataManager brokerId=1] Removed 0 expired offsets in 1 milliseconds. (kafka.coordinator.group.GroupMetadataManager)\r\n[2019-09-06 15:45:04,930] INFO [ReplicaFetcher replicaId=1, leaderId=0, fetcherId=0] Node 0 was unable to process the fetch request with (sessionId=1735853846, epoch=539): FETCH_SESSION_ID_NOT_FOUND. (org.apache.kafka.clients.FetchSessionHandler)\r\n[2019-09-06 15:49:35,018] INFO [ReplicaFetcher replicaId=1, leaderId=0, fetcherId=0] Node 0 was unable to process the fetch request with (sessionId=599232284, epoch=538): FETCH_SESSION_ID_NOT_FOUND. (org.apache.kafka.clients.FetchSessionHandler)\r\n```\r\n\r\nWhat does having a lot of FETCH_SESSION_ID_NOT_FOUND indicate? What could be a way to remedy that? \r\n\r\nHalf of my consumer groups do not consume anything and produce logs containing a lot of ```FETCH_SESSION_ID_NOT_FOUND``` lines.","title":"Kafka FETCH_SESSION_ID_NOT_FOUND often seen in logs","body":"<p>Running Kafka 2.3.0, Kafka client 2.1.1, and my brokers keep outputting the following logs:</p>\n\n<pre><code>[2019-09-06 15:18:03,596] INFO [ReplicaFetcher replicaId=1, leaderId=0, fetcherId=0] Node 0 was unable to process the fetch request with (sessionId=1458702821, epoch=538): FETCH_SESSION_ID_NOT_FOUND. (org.apache.kafka.clients.FetchSessionHandler)\n[2019-09-06 15:21:11,145] INFO [GroupMetadataManager brokerId=1] Removed 0 expired offsets in 1 milliseconds. (kafka.coordinator.group.GroupMetadataManager)\n[2019-09-06 15:22:33,737] INFO [ReplicaFetcher replicaId=1, leaderId=0, fetcherId=0] Node 0 was unable to process the fetch request with (sessionId=1917353656, epoch=538): FETCH_SESSION_ID_NOT_FOUND. (org.apache.kafka.clients.FetchSessionHandler)\n[2019-09-06 15:27:03,768] INFO [ReplicaFetcher replicaId=1, leaderId=0, fetcherId=0] Node 0 was unable to process the fetch request with (sessionId=404608404, epoch=538): FETCH_SESSION_ID_NOT_FOUND. (org.apache.kafka.clients.FetchSessionHandler)\n[2019-09-06 15:31:11,145] INFO [GroupMetadataManager brokerId=1] Removed 0 expired offsets in 1 milliseconds. (kafka.coordinator.group.GroupMetadataManager)\n[2019-09-06 15:31:34,313] INFO [ReplicaFetcher replicaId=1, leaderId=0, fetcherId=0] Node 0 was unable to process the fetch request with (sessionId=1690401868, epoch=539): FETCH_SESSION_ID_NOT_FOUND. (org.apache.kafka.clients.FetchSessionHandler)\n[2019-09-06 15:36:04,404] INFO [ReplicaFetcher replicaId=1, leaderId=0, fetcherId=0] Node 0 was unable to process the fetch request with (sessionId=1167288700, epoch=538): FETCH_SESSION_ID_NOT_FOUND. (org.apache.kafka.clients.FetchSessionHandler)\n[2019-09-06 15:40:34,409] INFO [ReplicaFetcher replicaId=1, leaderId=0, fetcherId=0] Node 0 was unable to process the fetch request with (sessionId=2135343705, epoch=538): FETCH_SESSION_ID_NOT_FOUND. (org.apache.kafka.clients.FetchSessionHandler)\n[2019-09-06 15:41:11,145] INFO [GroupMetadataManager brokerId=1] Removed 0 expired offsets in 1 milliseconds. (kafka.coordinator.group.GroupMetadataManager)\n[2019-09-06 15:45:04,930] INFO [ReplicaFetcher replicaId=1, leaderId=0, fetcherId=0] Node 0 was unable to process the fetch request with (sessionId=1735853846, epoch=539): FETCH_SESSION_ID_NOT_FOUND. (org.apache.kafka.clients.FetchSessionHandler)\n[2019-09-06 15:49:35,018] INFO [ReplicaFetcher replicaId=1, leaderId=0, fetcherId=0] Node 0 was unable to process the fetch request with (sessionId=599232284, epoch=538): FETCH_SESSION_ID_NOT_FOUND. (org.apache.kafka.clients.FetchSessionHandler)\n</code></pre>\n\n<p>What does having a lot of FETCH_SESSION_ID_NOT_FOUND indicate? What could be a way to remedy that? </p>\n\n<p>Half of my consumer groups do not consume anything and produce logs containing a lot of <code>FETCH_SESSION_ID_NOT_FOUND</code> lines.</p>\n"},{"tags":["java","java-9","java-module","java-platform-module-system","module-info"],"comments":[{"owner":{"account_id":45934,"reputation":203649,"user_id":135589,"accept_rate":100,"display_name":"Jesper"},"score":5,"creation_date":1544972529,"post_id":53801778,"comment_id":94455324,"body_markdown":"You should not use `sun.*` or `com.sun.*` classes in your program; they are undocumented, internal classes of the JDK and can change in any release. Using them possibly makes your program incompatible with other versions of Java. See [It is a bad practice to use Sun&#39;s proprietary Java classes?](https://stackoverflow.com/questions/1834826/it-is-a-bad-practice-to-use-suns-proprietary-java-classes)","body":"You should not use <code>sun.*</code> or <code>com.sun.*</code> classes in your program; they are undocumented, internal classes of the JDK and can change in any release. Using them possibly makes your program incompatible with other versions of Java. See <a href=\"https://stackoverflow.com/questions/1834826/it-is-a-bad-practice-to-use-suns-proprietary-java-classes\">It is a bad practice to use Sun&#39;s proprietary Java classes?</a>"},{"owner":{"account_id":6927787,"reputation":14579,"user_id":5318303,"accept_rate":39,"display_name":"Mir-Ismaili"},"score":0,"creation_date":1544973632,"post_id":53801778,"comment_id":94455631,"body_markdown":"@Jesper - Thanks. If you post your comment as an answer then I can accept it. I also thank *nullpointer* for [his/her good answer](https://stackoverflow.com/a/53802790/5318303) .","body":"@Jesper - Thanks. If you post your comment as an answer then I can accept it. I also thank <i>nullpointer</i> for <a href=\"https://stackoverflow.com/a/53802790/5318303\">his/her good answer</a> ."}],"answers":[{"tags":[],"owner":{"account_id":1939636,"reputation":28457,"user_id":1746118,"accept_rate":95,"display_name":"Naman"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1544968233,"creation_date":1544968233,"answer_id":53802790,"question_id":53801778,"body_markdown":"### It&#39;s encapsulated! \n\nThe problem wouldn&#39;t certainly be solved including all the modules from the JDK. \n\n&gt; I know this package (sun.awt.image) exists in java.desktop module (of\n&gt; JDK 11), but don&#39;t know how can access it.\n\nThe actual crux of the problem here lies in the fact, that even though the class `PNGImageDecoder` and the package it belongs to `sun.awt.image` are a part of the `java.desktop` module, the module has chosen *not to export* it to any external library making use of it. \n\nThe choice of abstracting such classes(`sun.*`) has been intentional and documented well with the release notes of Java-9 and the rationale is mentioned in [JEP-260#Encapsulate Most Internal APIs](http://openjdk.java.net/jeps/260) as well.\n\n\n----------\n\nHaving said that, the ***temporary*** rather hacky solution to it would be adding \n\n    --add-exports=java.desktop/sun.awt.image=&lt;yourModuleName&gt;\n\nto your command line arguments. Preferably, you should be looking for an alternate way to what you&#39;re trying to achieve using the class `PNGImageDecoder`.\n\n\n----------\n\nThe last part of it, [*&quot;the unnamed module&quot;*](http://openjdk.java.net/projects/jigsaw/spec/sotms/#the-unnamed-module) is where the actual code(be it your application or any dependencies of it) is trying to access this class `PNGImageDecoder`. So think of it like, the command-line arg above for your use-case results in:\n\n    --add-exports=java.desktop/sun.awt.image=ALL-UNNAMED","title":"Is `sun.awt.image` package deprecated?","body":"<h3>It's encapsulated!</h3>\n<p>The problem wouldn't certainly be solved including all the modules from the JDK.</p>\n<blockquote>\n<p>I know this package (sun.awt.image) exists in java.desktop module (of\nJDK 11), but don't know how can access it.</p>\n</blockquote>\n<p>The actual crux of the problem here lies in the fact, that even though the class <code>PNGImageDecoder</code> and the package it belongs to <code>sun.awt.image</code> are a part of the <code>java.desktop</code> module, the module has chosen <em>not to export</em> it to any external library making use of it.</p>\n<p>The choice of abstracting such classes(<code>sun.*</code>) has been intentional and documented well with the release notes of Java-9 and the rationale is mentioned in <a href=\"http://openjdk.java.net/jeps/260\" rel=\"noreferrer\">JEP-260#Encapsulate Most Internal APIs</a> as well.</p>\n<hr />\n<p>Having said that, the <em><strong>temporary</strong></em> rather hacky solution to it would be adding</p>\n<pre><code>--add-exports=java.desktop/sun.awt.image=&lt;yourModuleName&gt;\n</code></pre>\n<p>to your command line arguments. Preferably, you should be looking for an alternate way to what you're trying to achieve using the class <code>PNGImageDecoder</code>.</p>\n<hr />\n<p>The last part of it, <a href=\"http://openjdk.java.net/projects/jigsaw/spec/sotms/#the-unnamed-module\" rel=\"noreferrer\"><em>&quot;the unnamed module&quot;</em></a> is where the actual code(be it your application or any dependencies of it) is trying to access this class <code>PNGImageDecoder</code>. So think of it like, the command-line arg above for your use-case results in:</p>\n<pre><code>--add-exports=java.desktop/sun.awt.image=ALL-UNNAMED\n</code></pre>\n"},{"tags":[],"owner":{"account_id":45934,"reputation":203649,"user_id":135589,"accept_rate":100,"display_name":"Jesper"},"down_vote_count":2,"up_vote_count":6,"is_accepted":true,"score":4,"last_activity_date":1544992798,"creation_date":1544992798,"answer_id":53806279,"question_id":53801778,"body_markdown":"You should not use `sun.*` or `com.sun.*` classes in your program; they are undocumented, internal classes of the JDK and can change in any release.\r\n\r\nUsing them possibly makes your program incompatible with other versions of Java.\r\n\r\nSee: [It is a bad practice to use Sun&#39;s proprietary Java classes?](https://stackoverflow.com/questions/1834826/it-is-a-bad-practice-to-use-suns-proprietary-java-classes)","title":"Is `sun.awt.image` package deprecated?","body":"<p>You should not use <code>sun.*</code> or <code>com.sun.*</code> classes in your program; they are undocumented, internal classes of the JDK and can change in any release.</p>\n\n<p>Using them possibly makes your program incompatible with other versions of Java.</p>\n\n<p>See: <a href=\"https://stackoverflow.com/questions/1834826/it-is-a-bad-practice-to-use-suns-proprietary-java-classes\">It is a bad practice to use Sun's proprietary Java classes?</a></p>\n"}],"owner":{"account_id":6927787,"reputation":14579,"user_id":5318303,"accept_rate":39,"display_name":"Mir-Ismaili"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10906,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":53806279,"answer_count":2,"score":7,"last_activity_date":1689851054,"creation_date":1544960594,"question_id":53801778,"body_markdown":"I wanted to use some codes that using `sun.awt.image.PNGImageDecoder` in my project. The problem is source code is based on **Java 8** and my project using **JDK 9+** (11). So I got this error:\r\n\r\n&gt; Package &#39;`sun.awt.image`&#39; is declared in module &#39;`java.desktop`&#39;, which does not export it to *the unnamed module*.\r\n\r\nfor `import sun.awt.image.*`, and: \r\n\r\n&gt; Symbol is declared in module &#39;`java.desktop`&#39; which does not export package &#39;`sun.awt.image`&#39;\r\n\r\nfor using `PNGImageDecoder` or `ImageDecoder` etc.\r\n\r\nAfter some efforts to find a solution, I found some similar situations that suggest adding `requires java.desktop;` to `module-info.java` file (like [this case][1] and [this case][2]). But as I realized this solution can only be useful when your project already has a `module-info.java` file and you missing one used module in it. \r\n\r\nMy project hadn&#39;t this file already (pay attention to &quot;*the unnamed module*&quot; in the first error message). As far as I know, this means all modules are imported automatically. So adding this file and adding that line hadn&#39;t any effect except (changing error message and) causing some similar issues for other parts of my codes (which were, of course, solvable by adding required modules to `module-info.java` file).\r\n\r\nTo sure I imported all modules in `jmods` folder (of JDK 11), but the problem didn&#39;t solve:\r\n\r\n\trequires java.base;\r\n\trequires java.compiler;\r\n\trequires java.datatransfer;\r\n\trequires java.desktop;\r\n\trequires java.instrument;\r\n\trequires java.logging;\r\n\trequires java.management;\r\n\trequires java.management.rmi;\r\n\trequires java.naming;\r\n\trequires java.net.http;\r\n\trequires java.prefs;\r\n\trequires java.rmi;\r\n\trequires java.scripting;\r\n\trequires java.se;\r\n\trequires java.security.jgss;\r\n\trequires java.security.sasl;\r\n\trequires java.smartcardio;\r\n\trequires java.sql;\r\n\trequires java.sql.rowset;\r\n\trequires java.transaction.xa;\r\n\trequires java.xml.crypto;\r\n\trequires java.xml;\r\n\trequires jdk.accessibility;\r\n\trequires jdk.aot;\r\n\trequires jdk.attach;\r\n\trequires jdk.charsets;\r\n\trequires jdk.compiler;\r\n\trequires jdk.crypto.cryptoki;\r\n\trequires jdk.crypto.ec;\r\n\trequires jdk.crypto.mscapi;\r\n\trequires jdk.dynalink;\r\n\trequires jdk.editpad;\r\n\trequires jdk.hotspot.agent;\r\n\trequires jdk.httpserver;\r\n\trequires jdk.internal.ed;\r\n\trequires jdk.internal.jvmstat;\r\n\trequires jdk.internal.le;\r\n\trequires jdk.internal.opt;\r\n\trequires jdk.internal.vm.ci;\r\n\trequires jdk.internal.vm.compiler;\r\n\trequires jdk.internal.vm.compiler.management;\r\n\trequires jdk.jartool;\r\n\trequires jdk.javadoc;\r\n\trequires jdk.jcmd;\r\n\trequires jdk.jconsole;\r\n\trequires jdk.jdeps;\r\n\trequires jdk.jdi;\r\n\trequires jdk.jdwp.agent;\r\n\trequires jdk.jfr;\r\n\trequires jdk.jlink;\r\n\trequires jdk.jshell;\r\n\trequires jdk.jsobject;\r\n\trequires jdk.jstatd;\r\n\trequires jdk.localedata;\r\n\trequires jdk.management.agent;\r\n\trequires jdk.management.jfr;\r\n\trequires jdk.management;\r\n\trequires jdk.naming.dns;\r\n\trequires jdk.naming.rmi;\r\n\trequires jdk.net;\r\n\trequires jdk.pack;\r\n\trequires jdk.rmic;\r\n\trequires jdk.scripting.nashorn;\r\n\trequires jdk.scripting.nashorn.shell;\r\n\trequires jdk.sctp;\r\n\trequires jdk.security.auth;\r\n\trequires jdk.security.jgss;\r\n\trequires jdk.unsupported.desktop;\r\n\trequires jdk.unsupported;\r\n\trequires jdk.xml.dom;\r\n\trequires jdk.zipfs;\r\n\r\n***\r\n\r\nI know this package (`sun.awt.image`) exists in `java.desktop` module (of JDK 11), but don&#39;t know how can access it. \r\n\r\nI use IntelliJ IDEA as IDE.\r\n\r\n  [1]: https://stackoverflow.com/questions/51503140/the-import-java-awt-cannot-be-resolved\r\n  [2]: https://stackoverflow.com/a/42576762/5318303","title":"Is `sun.awt.image` package deprecated?","body":"<p>I wanted to use some codes that using <code>sun.awt.image.PNGImageDecoder</code> in my project. The problem is source code is based on <strong>Java 8</strong> and my project using <strong>JDK 9+</strong> (11). So I got this error:</p>\n<blockquote>\n<p>Package '<code>sun.awt.image</code>' is declared in module '<code>java.desktop</code>', which does not export it to <em>the unnamed module</em>.</p>\n</blockquote>\n<p>for <code>import sun.awt.image.*</code>, and:</p>\n<blockquote>\n<p>Symbol is declared in module '<code>java.desktop</code>' which does not export package '<code>sun.awt.image</code>'</p>\n</blockquote>\n<p>for using <code>PNGImageDecoder</code> or <code>ImageDecoder</code> etc.</p>\n<p>After some efforts to find a solution, I found some similar situations that suggest adding <code>requires java.desktop;</code> to <code>module-info.java</code> file (like <a href=\"https://stackoverflow.com/questions/51503140/the-import-java-awt-cannot-be-resolved\">this case</a> and <a href=\"https://stackoverflow.com/a/42576762/5318303\">this case</a>). But as I realized this solution can only be useful when your project already has a <code>module-info.java</code> file and you missing one used module in it.</p>\n<p>My project hadn't this file already (pay attention to &quot;<em>the unnamed module</em>&quot; in the first error message). As far as I know, this means all modules are imported automatically. So adding this file and adding that line hadn't any effect except (changing error message and) causing some similar issues for other parts of my codes (which were, of course, solvable by adding required modules to <code>module-info.java</code> file).</p>\n<p>To sure I imported all modules in <code>jmods</code> folder (of JDK 11), but the problem didn't solve:</p>\n<pre><code>requires java.base;\nrequires java.compiler;\nrequires java.datatransfer;\nrequires java.desktop;\nrequires java.instrument;\nrequires java.logging;\nrequires java.management;\nrequires java.management.rmi;\nrequires java.naming;\nrequires java.net.http;\nrequires java.prefs;\nrequires java.rmi;\nrequires java.scripting;\nrequires java.se;\nrequires java.security.jgss;\nrequires java.security.sasl;\nrequires java.smartcardio;\nrequires java.sql;\nrequires java.sql.rowset;\nrequires java.transaction.xa;\nrequires java.xml.crypto;\nrequires java.xml;\nrequires jdk.accessibility;\nrequires jdk.aot;\nrequires jdk.attach;\nrequires jdk.charsets;\nrequires jdk.compiler;\nrequires jdk.crypto.cryptoki;\nrequires jdk.crypto.ec;\nrequires jdk.crypto.mscapi;\nrequires jdk.dynalink;\nrequires jdk.editpad;\nrequires jdk.hotspot.agent;\nrequires jdk.httpserver;\nrequires jdk.internal.ed;\nrequires jdk.internal.jvmstat;\nrequires jdk.internal.le;\nrequires jdk.internal.opt;\nrequires jdk.internal.vm.ci;\nrequires jdk.internal.vm.compiler;\nrequires jdk.internal.vm.compiler.management;\nrequires jdk.jartool;\nrequires jdk.javadoc;\nrequires jdk.jcmd;\nrequires jdk.jconsole;\nrequires jdk.jdeps;\nrequires jdk.jdi;\nrequires jdk.jdwp.agent;\nrequires jdk.jfr;\nrequires jdk.jlink;\nrequires jdk.jshell;\nrequires jdk.jsobject;\nrequires jdk.jstatd;\nrequires jdk.localedata;\nrequires jdk.management.agent;\nrequires jdk.management.jfr;\nrequires jdk.management;\nrequires jdk.naming.dns;\nrequires jdk.naming.rmi;\nrequires jdk.net;\nrequires jdk.pack;\nrequires jdk.rmic;\nrequires jdk.scripting.nashorn;\nrequires jdk.scripting.nashorn.shell;\nrequires jdk.sctp;\nrequires jdk.security.auth;\nrequires jdk.security.jgss;\nrequires jdk.unsupported.desktop;\nrequires jdk.unsupported;\nrequires jdk.xml.dom;\nrequires jdk.zipfs;\n</code></pre>\n<hr />\n<p>I know this package (<code>sun.awt.image</code>) exists in <code>java.desktop</code> module (of JDK 11), but don't know how can access it.</p>\n<p>I use IntelliJ IDEA as IDE.</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":6576425,"reputation":3053,"user_id":5082285,"display_name":"Markus Kauppinen"},"score":0,"creation_date":1689850514,"post_id":76726191,"comment_id":135273067,"body_markdown":"Take a look at your code. Find the places where you are calling `setOnClickListener()` using an object of the type `ImageButton`. Look for each `ImageButton` in your code: has it been assigned a value before `setOnClickListener()` is called. If not, why not? One of them is `null`.","body":"Take a look at your code. Find the places where you are calling <code>setOnClickListener()</code> using an object of the type <code>ImageButton</code>. Look for each <code>ImageButton</code> in your code: has it been assigned a value before <code>setOnClickListener()</code> is called. If not, why not? One of them is <code>null</code>."},{"owner":{"account_id":29053035,"reputation":11,"user_id":22255386,"display_name":"Marcos Onofre"},"score":1,"creation_date":1689907750,"post_id":76726191,"comment_id":135282775,"body_markdown":"I managed to solve the problem, thanks a lot for the tip!!! :D","body":"I managed to solve the problem, thanks a lot for the tip!!! :D"}],"answers":[{"tags":[],"owner":{"account_id":6576425,"reputation":3053,"user_id":5082285,"display_name":"Markus Kauppinen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689850798,"creation_date":1689850798,"answer_id":76729182,"question_id":76726191,"body_markdown":"Looks like you should call `iniciaComponentes()` before `ouvinteCliques()`.\r\n\r\nIn `iniciaComponentes()` you have the `findViewById()` calls that initialize some of the view items including `ImageButton ibAdd`.\r\n\r\nThe `ibAdd` object is then accessed in `ouvinteCliques()` with the `setOnClickListener()` call and it can&#39;t be null at that point.","title":"Attempt to invoke virtual method &#39;void android.widget.ImageButton.setOnClickListener(android.view.View$OnClickListener)&#39; on a null object reference","body":"<p>Looks like you should call <code>iniciaComponentes()</code> before <code>ouvinteCliques()</code>.</p>\n<p>In <code>iniciaComponentes()</code> you have the <code>findViewById()</code> calls that initialize some of the view items including <code>ImageButton ibAdd</code>.</p>\n<p>The <code>ibAdd</code> object is then accessed in <code>ouvinteCliques()</code> with the <code>setOnClickListener()</code> call and it can't be null at that point.</p>\n"}],"owner":{"account_id":29053035,"reputation":11,"user_id":22255386,"display_name":"Marcos Onofre"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1689850852,"creation_date":1689818061,"question_id":76726191,"body_markdown":"my application that I was creating was closing by itself, everything was fine, out of nowhere it gave this error: \r\njava.lang.NullPointerException: Attempt to invoke the virtual method &#39;void android.widget.ImageButton.setOnClickListener(android.view.View$OnClickListener )&#39; on a null object reference.\r\n\r\nI am not able to resolve this error, I have tried everything to try to make it work, however, I am not succeeding.\r\n\r\n**HERE MY CODE**\r\n```\r\npackage br.com.hellodev.controledeprodutos.activity;\r\n\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.view.View;\r\nimport android.widget.ImageButton;\r\nimport android.widget.PopupMenu;\r\nimport android.widget.ProgressBar;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\n\r\nimport com.google.firebase.database.DataSnapshot;\r\nimport com.google.firebase.database.DatabaseError;\r\nimport com.google.firebase.database.DatabaseReference;\r\nimport com.google.firebase.database.ValueEventListener;\r\nimport com.tsuryo.swipeablerv.SwipeLeftRightCallback;\r\nimport com.tsuryo.swipeablerv.SwipeableRecyclerView;\r\n\r\nimport java.lang.reflect.Field;\r\nimport java.util.ArrayList;\r\nimport java.util.Collection;\r\nimport java.util.Collections;\r\nimport java.util.List;\r\n\r\nimport br.com.hellodev.controledeprodutos.adapter.AdapterProduto;\r\nimport br.com.hellodev.controledeprodutos.autencacao.LoginActivity;\r\nimport br.com.hellodev.controledeprodutos.helper.FirebaseHelper;\r\nimport br.com.hellodev.controledeprodutos.model.Produto;\r\nimport br.com.hellodev.controledeprodutos.R;\r\n\r\npublic class MainActivity extends AppCompatActivity implements AdapterProduto.OnClick {\r\n\r\n    private AdapterProduto adapterProduto;\r\n    private List&lt;Produto&gt; produtoList = new ArrayList&lt;&gt;();\r\n    private SwipeableRecyclerView rvProdutos;\r\n    private TextView text_info;\r\n\r\n    private ImageButton ibAdd;\r\n    private ImageButton ibVerMais;\r\n    private ProgressBar progressBar;\r\n\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        ouvinteCliques();\r\n\r\n        configRecyclerView();\r\n\r\n        iniciaComponentes();\r\n\r\n    }\r\n\r\n    @Override\r\n    protected void onStart() {\r\n        super.onStart();\r\n\r\n        recuperaProdutos();\r\n    }\r\n\r\n    private void recuperaProdutos() {\r\n        DatabaseReference produtosRef = FirebaseHelper.getDatabaseReference()\r\n                .child(&quot;produtos&quot;)\r\n                .child(FirebaseHelper.getIdFirebase());\r\n        produtosRef.addListenerForSingleValueEvent(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                produtoList.clear();\r\n                for (DataSnapshot snap : snapshot.getChildren()) {\r\n                    Produto produto = snap.getValue(Produto.class);\r\n                    produtoList.add(produto);\r\n                }\r\n\r\n                verificaQtdLista();\r\n\r\n                Collections.reverse(produtoList);\r\n\r\n                adapterProduto.notifyDataSetChanged();\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n            }\r\n        });\r\n    }\r\n\r\n    private void ouvinteCliques() {\r\n        ibAdd.setOnClickListener(view -&gt; {\r\n            startActivity(new Intent(this, FormProdutoActivity.class));\r\n        });\r\n\r\n        ibVerMais.setOnClickListener(view -&gt; {\r\n\r\n            PopupMenu popupMenu = new PopupMenu(this, ibVerMais);\r\n            popupMenu.getMenuInflater().inflate(R.menu.menu_toolbar, popupMenu.getMenu());\r\n\r\n            popupMenu.setOnMenuItemClickListener(menuItem -&gt; {\r\n                if (menuItem.getItemId() == R.id.menu_sobre) {\r\n                    Toast.makeText(this, &quot;Sobre&quot;, Toast.LENGTH_SHORT).show();\r\n                } else if (menuItem.getItemId() == R.id.menu_sair) {\r\n                    FirebaseHelper.getAuth().signOut();\r\n                    startActivity(new Intent(this, LoginActivity.class));\r\n                }\r\n                return true;\r\n            });\r\n\r\n            popupMenu.show();\r\n\r\n        });\r\n    }\r\n\r\n    private void configRecyclerView() {\r\n\r\n\r\n        rvProdutos.setLayoutManager(new LinearLayoutManager(this));\r\n        rvProdutos.setHasFixedSize(true);\r\n        adapterProduto = new AdapterProduto(produtoList, this);\r\n        rvProdutos.setAdapter(adapterProduto);\r\n\r\n        rvProdutos.setListener(new SwipeLeftRightCallback.Listener() {\r\n            @Override\r\n            public void onSwipedLeft(int position) {\r\n            }\r\n\r\n            @Override\r\n            public void onSwipedRight(int position) {\r\n\r\n                Produto produto = produtoList.get(position);\r\n\r\n\r\n                produtoList.remove(produto);\r\n                produto.deletaProduto();\r\n                adapterProduto.notifyItemRemoved(position);\r\n\r\n                verificaQtdLista();\r\n\r\n\r\n            }\r\n        });\r\n    }\r\n\r\n\r\n    private void verificaQtdLista() {\r\n        if (produtoList.size() == 0) {\r\n            text_info.setText(&quot;Nenhum produto cadastrado.&quot;);\r\n            text_info.setVisibility(View.VISIBLE);\r\n        } else {\r\n            text_info.setVisibility(View.GONE);\r\n        }\r\n        text_info.setVisibility(View.GONE);\r\n\r\n    }\r\n\r\n    private void iniciaComponentes() {\r\n        ibAdd = findViewById(R.id.ib_add);\r\n        ibVerMais = findViewById(R.id.ib_ver_mais);\r\n        rvProdutos = findViewById(R.id.rvProdutos);\r\n        text_info = findViewById(R.id.text_info);\r\n        progressBar = findViewById(R.id.progressBar);\r\n    }\r\n\r\n    @Override\r\n    public void onClickListener(Produto produto) {\r\n        Intent intent = new Intent(this, FormProdutoActivity.class);\r\n        intent.putExtra(&quot;produto&quot;, produto);\r\n        startActivity(intent);\r\n\r\n    }\r\n\r\n}\r\n```\r\n\r\n\r\n```\r\npackage br.com.hellodev.controledeprodutos.adapter;\r\n\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.TextView;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport java.util.List;\r\n\r\nimport br.com.hellodev.controledeprodutos.R;\r\nimport br.com.hellodev.controledeprodutos.model.Produto;\r\n\r\npublic class AdapterProduto extends RecyclerView.Adapter&lt;AdapterProduto.MyViewHolder&gt; {\r\n\r\n    private List&lt;Produto&gt; produtoList;\r\n    private OnClick onClick;\r\n\r\n    public AdapterProduto(List&lt;Produto&gt; produtoList, OnClick onClick) {\r\n        this.produtoList = produtoList;\r\n        this.onClick = onClick;\r\n    }\r\n\r\n    @NonNull\r\n    @Override\r\n    public MyViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\r\n        View itemView = LayoutInflater.from(parent.getContext()).inflate(R.layout.item_produto, parent, false);\r\n        return new MyViewHolder(itemView);\r\n    }\r\n\r\n    @Override\r\n    public void onBindViewHolder(@NonNull MyViewHolder holder, int position) {\r\n        Produto produto = produtoList.get(position);\r\n\r\n        holder.textProduto.setText(produto.getNome());\r\n        holder.textEstoque.setText(&quot;Estoque: &quot; + produto.getEstoque());\r\n        holder.textValor.setText(&quot;R$ &quot; + produto.getValor());\r\n\r\n        holder.itemView.setOnClickListener(view -&gt; onClick.onClickListener(produto));\r\n    }\r\n\r\n    @Override\r\n    public int getItemCount() {\r\n        return produtoList.size();\r\n    }\r\n\r\n    public interface OnClick {\r\n        void onClickListener(Produto produto);\r\n    }\r\n\r\n    static class MyViewHolder extends RecyclerView.ViewHolder {\r\n\r\n        TextView textProduto, textEstoque, textValor;\r\n\r\n        public MyViewHolder(@NonNull View itemView) {\r\n            super(itemView);\r\n            textProduto = itemView.findViewById(R.id.text_produto);\r\n            textEstoque = itemView.findViewById(R.id.text_estoque);\r\n            textValor = itemView.findViewById(R.id.text_valor);\r\n        }\r\n    }\r\n\r\n}\r\n```\r\n\r\n\r\n\r\n","title":"Attempt to invoke virtual method &#39;void android.widget.ImageButton.setOnClickListener(android.view.View$OnClickListener)&#39; on a null object reference","body":"<p>my application that I was creating was closing by itself, everything was fine, out of nowhere it gave this error:\njava.lang.NullPointerException: Attempt to invoke the virtual method 'void android.widget.ImageButton.setOnClickListener(android.view.View$OnClickListener )' on a null object reference.</p>\n<p>I am not able to resolve this error, I have tried everything to try to make it work, however, I am not succeeding.</p>\n<p><strong>HERE MY CODE</strong></p>\n<pre><code>package br.com.hellodev.controledeprodutos.activity;\n\nimport android.content.Intent;\nimport android.os.Bundle;\nimport android.view.View;\nimport android.widget.ImageButton;\nimport android.widget.PopupMenu;\nimport android.widget.ProgressBar;\nimport android.widget.TextView;\nimport android.widget.Toast;\n\nimport androidx.annotation.NonNull;\nimport androidx.appcompat.app.AppCompatActivity;\nimport androidx.recyclerview.widget.LinearLayoutManager;\n\nimport com.google.firebase.database.DataSnapshot;\nimport com.google.firebase.database.DatabaseError;\nimport com.google.firebase.database.DatabaseReference;\nimport com.google.firebase.database.ValueEventListener;\nimport com.tsuryo.swipeablerv.SwipeLeftRightCallback;\nimport com.tsuryo.swipeablerv.SwipeableRecyclerView;\n\nimport java.lang.reflect.Field;\nimport java.util.ArrayList;\nimport java.util.Collection;\nimport java.util.Collections;\nimport java.util.List;\n\nimport br.com.hellodev.controledeprodutos.adapter.AdapterProduto;\nimport br.com.hellodev.controledeprodutos.autencacao.LoginActivity;\nimport br.com.hellodev.controledeprodutos.helper.FirebaseHelper;\nimport br.com.hellodev.controledeprodutos.model.Produto;\nimport br.com.hellodev.controledeprodutos.R;\n\npublic class MainActivity extends AppCompatActivity implements AdapterProduto.OnClick {\n\n    private AdapterProduto adapterProduto;\n    private List&lt;Produto&gt; produtoList = new ArrayList&lt;&gt;();\n    private SwipeableRecyclerView rvProdutos;\n    private TextView text_info;\n\n    private ImageButton ibAdd;\n    private ImageButton ibVerMais;\n    private ProgressBar progressBar;\n\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        ouvinteCliques();\n\n        configRecyclerView();\n\n        iniciaComponentes();\n\n    }\n\n    @Override\n    protected void onStart() {\n        super.onStart();\n\n        recuperaProdutos();\n    }\n\n    private void recuperaProdutos() {\n        DatabaseReference produtosRef = FirebaseHelper.getDatabaseReference()\n                .child(&quot;produtos&quot;)\n                .child(FirebaseHelper.getIdFirebase());\n        produtosRef.addListenerForSingleValueEvent(new ValueEventListener() {\n            @Override\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\n                produtoList.clear();\n                for (DataSnapshot snap : snapshot.getChildren()) {\n                    Produto produto = snap.getValue(Produto.class);\n                    produtoList.add(produto);\n                }\n\n                verificaQtdLista();\n\n                Collections.reverse(produtoList);\n\n                adapterProduto.notifyDataSetChanged();\n            }\n\n            @Override\n            public void onCancelled(@NonNull DatabaseError error) {\n\n            }\n        });\n    }\n\n    private void ouvinteCliques() {\n        ibAdd.setOnClickListener(view -&gt; {\n            startActivity(new Intent(this, FormProdutoActivity.class));\n        });\n\n        ibVerMais.setOnClickListener(view -&gt; {\n\n            PopupMenu popupMenu = new PopupMenu(this, ibVerMais);\n            popupMenu.getMenuInflater().inflate(R.menu.menu_toolbar, popupMenu.getMenu());\n\n            popupMenu.setOnMenuItemClickListener(menuItem -&gt; {\n                if (menuItem.getItemId() == R.id.menu_sobre) {\n                    Toast.makeText(this, &quot;Sobre&quot;, Toast.LENGTH_SHORT).show();\n                } else if (menuItem.getItemId() == R.id.menu_sair) {\n                    FirebaseHelper.getAuth().signOut();\n                    startActivity(new Intent(this, LoginActivity.class));\n                }\n                return true;\n            });\n\n            popupMenu.show();\n\n        });\n    }\n\n    private void configRecyclerView() {\n\n\n        rvProdutos.setLayoutManager(new LinearLayoutManager(this));\n        rvProdutos.setHasFixedSize(true);\n        adapterProduto = new AdapterProduto(produtoList, this);\n        rvProdutos.setAdapter(adapterProduto);\n\n        rvProdutos.setListener(new SwipeLeftRightCallback.Listener() {\n            @Override\n            public void onSwipedLeft(int position) {\n            }\n\n            @Override\n            public void onSwipedRight(int position) {\n\n                Produto produto = produtoList.get(position);\n\n\n                produtoList.remove(produto);\n                produto.deletaProduto();\n                adapterProduto.notifyItemRemoved(position);\n\n                verificaQtdLista();\n\n\n            }\n        });\n    }\n\n\n    private void verificaQtdLista() {\n        if (produtoList.size() == 0) {\n            text_info.setText(&quot;Nenhum produto cadastrado.&quot;);\n            text_info.setVisibility(View.VISIBLE);\n        } else {\n            text_info.setVisibility(View.GONE);\n        }\n        text_info.setVisibility(View.GONE);\n\n    }\n\n    private void iniciaComponentes() {\n        ibAdd = findViewById(R.id.ib_add);\n        ibVerMais = findViewById(R.id.ib_ver_mais);\n        rvProdutos = findViewById(R.id.rvProdutos);\n        text_info = findViewById(R.id.text_info);\n        progressBar = findViewById(R.id.progressBar);\n    }\n\n    @Override\n    public void onClickListener(Produto produto) {\n        Intent intent = new Intent(this, FormProdutoActivity.class);\n        intent.putExtra(&quot;produto&quot;, produto);\n        startActivity(intent);\n\n    }\n\n}\n</code></pre>\n<pre><code>package br.com.hellodev.controledeprodutos.adapter;\n\nimport android.view.LayoutInflater;\nimport android.view.View;\nimport android.view.ViewGroup;\nimport android.widget.TextView;\n\nimport androidx.annotation.NonNull;\nimport androidx.recyclerview.widget.RecyclerView;\n\nimport java.util.List;\n\nimport br.com.hellodev.controledeprodutos.R;\nimport br.com.hellodev.controledeprodutos.model.Produto;\n\npublic class AdapterProduto extends RecyclerView.Adapter&lt;AdapterProduto.MyViewHolder&gt; {\n\n    private List&lt;Produto&gt; produtoList;\n    private OnClick onClick;\n\n    public AdapterProduto(List&lt;Produto&gt; produtoList, OnClick onClick) {\n        this.produtoList = produtoList;\n        this.onClick = onClick;\n    }\n\n    @NonNull\n    @Override\n    public MyViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\n        View itemView = LayoutInflater.from(parent.getContext()).inflate(R.layout.item_produto, parent, false);\n        return new MyViewHolder(itemView);\n    }\n\n    @Override\n    public void onBindViewHolder(@NonNull MyViewHolder holder, int position) {\n        Produto produto = produtoList.get(position);\n\n        holder.textProduto.setText(produto.getNome());\n        holder.textEstoque.setText(&quot;Estoque: &quot; + produto.getEstoque());\n        holder.textValor.setText(&quot;R$ &quot; + produto.getValor());\n\n        holder.itemView.setOnClickListener(view -&gt; onClick.onClickListener(produto));\n    }\n\n    @Override\n    public int getItemCount() {\n        return produtoList.size();\n    }\n\n    public interface OnClick {\n        void onClickListener(Produto produto);\n    }\n\n    static class MyViewHolder extends RecyclerView.ViewHolder {\n\n        TextView textProduto, textEstoque, textValor;\n\n        public MyViewHolder(@NonNull View itemView) {\n            super(itemView);\n            textProduto = itemView.findViewById(R.id.text_produto);\n            textEstoque = itemView.findViewById(R.id.text_estoque);\n            textValor = itemView.findViewById(R.id.text_valor);\n        }\n    }\n\n}\n</code></pre>\n"},{"tags":["java","maven","properties-file","persistence.xml","context.xml"],"owner":{"account_id":9222621,"reputation":136,"user_id":6943090,"display_name":"Luis Morales"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":18,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689850493,"creation_date":1689798623,"question_id":76724985,"body_markdown":"I have an app with Java 17, Tomcat 10. \r\n\r\nI would like to use a properties file (or its variation) so I can read it from different sides of my code or from my `persistence.xml` and `context.xml` files.\r\n\r\n**What have I tried?**\r\n\r\nI created a properties file and imported it into a listener. \r\nI also managed it by putting in the `catalina.properties` a `app.profile=profile`\r\n\r\nThis worked in a Java class, but for the `context.xml` and `persistence.xml` it doesn&#39;t read the properties.\r\n\r\nI have created profiles in the pom.xml with the properties.\r\nBut in the `persistence.xml` and `context.xml` I can&#39;t extract the properties. \r\nI followed advice from [here][1].\r\n\r\n  [1]: https://stackoverflow.com/questions/51661290/how-to-get-my-applicationcontext-xml-file-pull-a-value-from-a-properties-file","title":"How to pull values from properties file into persistence.xml and context.xml?","body":"<p>I have an app with Java 17, Tomcat 10.</p>\n<p>I would like to use a properties file (or its variation) so I can read it from different sides of my code or from my <code>persistence.xml</code> and <code>context.xml</code> files.</p>\n<p><strong>What have I tried?</strong></p>\n<p>I created a properties file and imported it into a listener.\nI also managed it by putting in the <code>catalina.properties</code> a <code>app.profile=profile</code></p>\n<p>This worked in a Java class, but for the <code>context.xml</code> and <code>persistence.xml</code> it doesn't read the properties.</p>\n<p>I have created profiles in the pom.xml with the properties.\nBut in the <code>persistence.xml</code> and <code>context.xml</code> I can't extract the properties.\nI followed advice from <a href=\"https://stackoverflow.com/questions/51661290/how-to-get-my-applicationcontext-xml-file-pull-a-value-from-a-properties-file\">here</a>.</p>\n"},{"tags":["java","gradle","intellij-idea"],"answers":[{"tags":[],"owner":{"account_id":36734,"reputation":392117,"user_id":104891,"display_name":"CrazyCoder"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1615590589,"creation_date":1615589800,"answer_id":66608299,"question_id":66608227,"body_markdown":"Somewhat related to [this answer](https://stackoverflow.com/a/66037291/104891).\r\n\r\nIDE Gradle settings do not affect the Terminal. You need to adjust the `PATH` in your system environment settings so that Gradle 6.8.3 installation `bin` subdirectory is the first one or the only one entry. Then logout/login or reboot for the `PATH` changes to have effect on all the processes including IntelliJ IDEA Terminal.\r\n\r\nHowever, if you import the project in IntelliJ IDEA and run Gradle tasks from the Gradle tool window, it will use whatever version you have configured in the IDE: Settings (Preferences on macOS) | Build, Execution, Deployment | Build Tools | Gradle | Use Gradle from.\r\n","title":"Can&#39;t change gradle version intellij","body":"<p>Somewhat related to <a href=\"https://stackoverflow.com/a/66037291/104891\">this answer</a>.</p>\n<p>IDE Gradle settings do not affect the Terminal. You need to adjust the <code>PATH</code> in your system environment settings so that Gradle 6.8.3 installation <code>bin</code> subdirectory is the first one or the only one entry. Then logout/login or reboot for the <code>PATH</code> changes to have effect on all the processes including IntelliJ IDEA Terminal.</p>\n<p>However, if you import the project in IntelliJ IDEA and run Gradle tasks from the Gradle tool window, it will use whatever version you have configured in the IDE: Settings (Preferences on macOS) | Build, Execution, Deployment | Build Tools | Gradle | Use Gradle from.</p>\n"}],"owner":{"account_id":19988779,"reputation":37,"user_id":14650316,"display_name":"johnlacrosse"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3060,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":66608299,"answer_count":1,"score":1,"last_activity_date":1689850469,"creation_date":1615589251,"question_id":66608227,"body_markdown":"I have tried changing gradle-wrapper-properties to a newer version, but regardless of what I do, when I run gradle --version I Get 4.4.1. How can I change the gradle version?\r\n\r\n    distributionBase=GRADLE_USER_HOME\r\n    distributionPath=wrapper/dists\r\n    distributionUrl=https\\://services.gradle.org/distributions/gradle-6.8.3-bin.zip\r\n    zipStoreBase=GRADLE_USER_HOME\r\n    zipStorePath=wrapper/dists\r\n\r\n","title":"Can&#39;t change gradle version intellij","body":"<p>I have tried changing gradle-wrapper-properties to a newer version, but regardless of what I do, when I run gradle --version I Get 4.4.1. How can I change the gradle version?</p>\n<pre><code>distributionBase=GRADLE_USER_HOME\ndistributionPath=wrapper/dists\ndistributionUrl=https\\://services.gradle.org/distributions/gradle-6.8.3-bin.zip\nzipStoreBase=GRADLE_USER_HOME\nzipStorePath=wrapper/dists\n</code></pre>\n"},{"tags":["eclipse","java"],"comments":[{"owner":{"account_id":26299,"reputation":3454,"user_id":68296,"accept_rate":100,"display_name":"Stefan Sveidqvist"},"score":3,"creation_date":1242807423,"post_id":886744,"comment_id":693645,"body_markdown":"By the way, this is exactly the same procedure on Windows 2000, XP, Vista and Windows 7 so it&#39;s not particular to XP.","body":"By the way, this is exactly the same procedure on Windows 2000, XP, Vista and Windows 7 so it&#39;s not particular to XP."}],"answers":[{"tags":[],"owner":{"account_id":3264,"reputation":11299,"user_id":4690,"accept_rate":83,"display_name":"Manrico Corazzi"},"down_vote_count":0,"up_vote_count":27,"is_accepted":true,"score":27,"last_activity_date":1242809533,"creation_date":1242807304,"answer_id":886757,"question_id":886744,"body_markdown":"You may install different JDKs easily: just specify different folders.\r\n\r\nYou can setup the installed JDKs in Eclipse **Window/Preferences/Installed JREs**\r\n\r\nYou can pick the JDK and Java version for every single project in **Project/Properties/Java Compiler**","title":"How install multiple JDK on Windows?","body":"<p>You may install different JDKs easily: just specify different folders.</p>\n\n<p>You can setup the installed JDKs in Eclipse <strong>Window/Preferences/Installed JREs</strong></p>\n\n<p>You can pick the JDK and Java version for every single project in <strong>Project/Properties/Java Compiler</strong></p>\n"},{"tags":[],"owner":{"account_id":276,"reputation":16266,"user_id":342,"accept_rate":72,"display_name":"graham.reeds"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1242807325,"creation_date":1242807325,"answer_id":886759,"question_id":886744,"body_markdown":"Why? There is an option (can&#39;t remember where exactly - right-click on your project) that allows you to set the target JDK level. I use this when developing GWT applications.","title":"How install multiple JDK on Windows?","body":"<p>Why? There is an option (can't remember where exactly - right-click on your project) that allows you to set the target JDK level. I use this when developing GWT applications.</p>\n"},{"tags":[],"owner":{"account_id":8534957,"reputation":1493,"user_id":6397151,"accept_rate":70,"display_name":"Osanda Deshan"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1589088907,"creation_date":1589088907,"answer_id":61707635,"question_id":886744,"body_markdown":"I have solved this by creating batch files for different Java versions. \r\n\r\n1. I have installed the Java versions I need to have\r\n2. Whenever, I need to use Java I run the appropriate batch file and set the environment variables to work with that Java version.\r\n\r\n**Java 8.bat**\r\n\r\n    @echo off\r\n    echo Setting JAVA_HOME\r\n    set JAVA_HOME=C:\\Program Files\\Java\\jdk1.8.0_121\r\n    echo setting PATH\r\n    set PATH=%JAVA_HOME%\\bin;%PATH%\r\n    echo Display java version\r\n    java -version\r\n\r\n\r\n**Java 10.bat**\r\n\r\n    @echo off\r\n    echo Setting JAVA_HOME\r\n    set JAVA_HOME=C:\\Program Files\\Java\\jdk-10.0.2\r\n    echo setting PATH\r\n    set PATH=%JAVA_HOME%\\bin;%PATH%\r\n    echo Display java version\r\n    java -version","title":"How install multiple JDK on Windows?","body":"<p>I have solved this by creating batch files for different Java versions. </p>\n\n<ol>\n<li>I have installed the Java versions I need to have</li>\n<li>Whenever, I need to use Java I run the appropriate batch file and set the environment variables to work with that Java version.</li>\n</ol>\n\n<p><strong>Java 8.bat</strong></p>\n\n<pre><code>@echo off\necho Setting JAVA_HOME\nset JAVA_HOME=C:\\Program Files\\Java\\jdk1.8.0_121\necho setting PATH\nset PATH=%JAVA_HOME%\\bin;%PATH%\necho Display java version\njava -version\n</code></pre>\n\n<p><strong>Java 10.bat</strong></p>\n\n<pre><code>@echo off\necho Setting JAVA_HOME\nset JAVA_HOME=C:\\Program Files\\Java\\jdk-10.0.2\necho setting PATH\nset PATH=%JAVA_HOME%\\bin;%PATH%\necho Display java version\njava -version\n</code></pre>\n"},{"tags":[],"owner":{"account_id":20162073,"reputation":1,"user_id":14786909,"display_name":"Radoslaw Jocz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683061913,"creation_date":1607431662,"answer_id":65199237,"question_id":886744,"body_markdown":"There was a big mess with different incompatible JDK and JRE from 90s when Java was created and still this problem exists. \r\nThe main rule is when you type in console: \r\njava -version\r\nand \r\njavac -version\r\nthe result should be the same then you sure both JRE and JDK (JSDK) are compatible, so when you compile you can run it without any problems.\r\nJAVA_HOME and PATH are essential for many console applications\r\nand some GUI tools might use those variables as well but often is possible to alter default settings in GUI application instead of messing with environment variables. Also CLASSPATH still sometimes are used as well, however better use ANT as compiler than javac directly.\r\nyou can install multiple JDK and JRE but each one should to have its own separate folder, the default should be usually ok.\r\nWorth mentioning that every JDK have JRE included and it instal in separate folder and as separate APP in Windows Control Panel -&gt; Applications to be more confusing, so basically developer will never have to download and install JRE. Do not use Java update application which might cause problems after update some apps might not work, just do it manually.\r\n\r\n","title":"How install multiple JDK on Windows?","body":"<p>There was a big mess with different incompatible JDK and JRE from 90s when Java was created and still this problem exists.\nThe main rule is when you type in console:\njava -version\nand\njavac -version\nthe result should be the same then you sure both JRE and JDK (JSDK) are compatible, so when you compile you can run it without any problems.\nJAVA_HOME and PATH are essential for many console applications\nand some GUI tools might use those variables as well but often is possible to alter default settings in GUI application instead of messing with environment variables. Also CLASSPATH still sometimes are used as well, however better use ANT as compiler than javac directly.\nyou can install multiple JDK and JRE but each one should to have its own separate folder, the default should be usually ok.\nWorth mentioning that every JDK have JRE included and it instal in separate folder and as separate APP in Windows Control Panel -&gt; Applications to be more confusing, so basically developer will never have to download and install JRE. Do not use Java update application which might cause problems after update some apps might not work, just do it manually.</p>\n"},{"tags":[],"owner":{"account_id":16437617,"reputation":19,"user_id":11874829,"display_name":"ownerofglory"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1607448977,"creation_date":1607441057,"answer_id":65201729,"question_id":886744,"body_markdown":"Try using `sdkman`. Even though the installing on Windows is a bit &#39;tricky&#39; but there are several options.\r\n\r\nhttps://sdkman.io/install","title":"How install multiple JDK on Windows?","body":"<p>Try using <code>sdkman</code>. Even though the installing on Windows is a bit 'tricky' but there are several options.</p>\n<p><a href=\"https://sdkman.io/install\" rel=\"nofollow noreferrer\">https://sdkman.io/install</a></p>\n"}],"owner":{"account_id":36274,"reputation":733,"user_id":103340,"display_name":"Eric Yung"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40965,"favorite_count":0,"down_vote_count":0,"up_vote_count":24,"accepted_answer_id":886757,"answer_count":5,"score":24,"last_activity_date":1689850466,"creation_date":1242807083,"question_id":886744,"body_markdown":"I want to install JDK 1.5 and 1.6 on XP, is it possible? how to do it\r\n\r\nAlso, I am using Eclipse how to setup using different JDK for different projects?\r\n\r\nthanks.","title":"How install multiple JDK on Windows?","body":"<p>I want to install JDK 1.5 and 1.6 on XP, is it possible? how to do it</p>\n\n<p>Also, I am using Eclipse how to setup using different JDK for different projects?</p>\n\n<p>thanks.</p>\n"},{"tags":["java","floating-point","precision"],"comments":[{"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":1,"creation_date":1689673811,"post_id":76711487,"comment_id":135243735,"body_markdown":"How this string is produced is documented [right here](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Float.html#toString(float)).","body":"How this string is produced is documented <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Float.html#toString(float)\" rel=\"nofollow noreferrer\">right here</a>."},{"owner":{"account_id":2843847,"reputation":55833,"user_id":2442804,"accept_rate":80,"display_name":"luk2302"},"score":1,"creation_date":1689673993,"post_id":76711487,"comment_id":135243785,"body_markdown":"Are you sure anything is &quot;rounded&quot; at all and you are not just specifying a number that float simply cannot represent precisely!?","body":"Are you sure anything is &quot;rounded&quot; at all and you are not just specifying a number that float simply cannot represent precisely!?"},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":2,"creation_date":1689674651,"post_id":76711487,"comment_id":135243932,"body_markdown":"if you print `new BigDecimal(x)`, you&#39;ll get `1500.455078125`, while `new BigDecimal(y)` is `2000.3740234375` (BTW I doubt that you got the output `1101.4551, 1106.374` from that code! more like `1500.4551, 2000.374`)","body":"if you print <code>new BigDecimal(x)</code>, you&#39;ll get <code>1500.455078125</code>, while <code>new BigDecimal(y)</code> is <code>2000.3740234375</code> (BTW I doubt that you got the output <code>1101.4551, 1106.374</code> from that code! more like <code>1500.4551, 2000.374</code>)"},{"owner":{"account_id":2139538,"reputation":42501,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":1,"creation_date":1689675932,"post_id":76711487,"comment_id":135244164,"body_markdown":"The numbers are stored identically, using IEEE 754. Whatever difference there is is entirely limited to the different ways you&#39;re printing them in the different languages. Since you haven&#39;t shown how you&#39;re doing that in C++, we can&#39;t comment on it.","body":"The numbers are stored identically, using IEEE 754. Whatever difference there is is entirely limited to the different ways you&#39;re printing them in the different languages. Since you haven&#39;t shown how you&#39;re doing that in C++, we can&#39;t comment on it."},{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":3,"creation_date":1689677990,"post_id":76711487,"comment_id":135244599,"body_markdown":"Does this answer your question? [Is floating point math broken?](https://stackoverflow.com/questions/588004/is-floating-point-math-broken)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/588004/is-floating-point-math-broken\">Is floating point math broken?</a>"},{"owner":{"account_id":113187,"reputation":200947,"user_id":298225,"accept_rate":100,"display_name":"Eric Postpischil"},"score":0,"creation_date":1689678080,"post_id":76711487,"comment_id":135244613,"body_markdown":"@luk2302: Re “Are you sure anything is &quot;rounded&quot; at all”: There are four roundings in the code shown, one when each of the two decimal numerals in the source code is rounded to an IEEE-754 format and one when each of those `float` values is rounded to decimal for output.","body":"@luk2302: Re “Are you sure anything is &quot;rounded&quot; at all”: There are four roundings in the code shown, one when each of the two decimal numerals in the source code is rounded to an IEEE-754 format and one when each of those <code>float</code> values is rounded to decimal for output."}],"answers":[{"tags":[],"owner":{"account_id":113187,"reputation":200947,"user_id":298225,"accept_rate":100,"display_name":"Eric Postpischil"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1689677969,"creation_date":1689677969,"answer_id":76712090,"question_id":76711487,"body_markdown":"&gt; Should the rounding not be consistent for both floats?\r\n\r\nThe rounding is consistent for both `float` values. It does not round to a decimal numeral. It rounds to a binary numeral, with 24 significant bits.\r\n\r\nIn binary, 1500.45504 is 10111011100.01110100011111011000000001011110010111101…. Rounding that to 24 bits produces 10111011100.011101001, which is 1500.455078125.\r\n\r\nIn binary, 2000.37408 is 11111010000.0101111111000011101101001111011000010110…. Rounding that to 24 bits produces 11111010000.0101111111000, which is 2000.3740234375.\r\n\r\nThe default formatting used to convert that to a decimal numeral produces just enough decimal digits to uniquely distinguish the `float` number. For 1500.455078125, the adjacent `float` values below and above it are 1500.4549560546875 and 1500.4552001953125. If any of those were rounded to seven digits total (three after the decimal point), the result would be “1500.455” for all of them. So one more digit is needed to distinguish 1500.455078125 from the others. So it is rounded to eight decimal digits, producing “1500.4551”.\r\n\r\nSimilarly, for 2000.3740234375, the adjacent `float` values are 2000.3739013671875 and 2000.3741455078125, and rounding any of those to seven digits produces “2000.374”. In this case, though, rounding the ones below and above it to eight digits distinguish them, producing “200.3739” and “2000.3741”, so the algorithm allows seven digits for our number, 2000.3740234375, producing “2000.374”, because it knows this uniquely distinguishes it since the others will produce different results.","title":"Java float formatting and rounding","body":"<blockquote>\n<p>Should the rounding not be consistent for both floats?</p>\n</blockquote>\n<p>The rounding is consistent for both <code>float</code> values. It does not round to a decimal numeral. It rounds to a binary numeral, with 24 significant bits.</p>\n<p>In binary, 1500.45504 is 10111011100.01110100011111011000000001011110010111101…. Rounding that to 24 bits produces 10111011100.011101001, which is 1500.455078125.</p>\n<p>In binary, 2000.37408 is 11111010000.0101111111000011101101001111011000010110…. Rounding that to 24 bits produces 11111010000.0101111111000, which is 2000.3740234375.</p>\n<p>The default formatting used to convert that to a decimal numeral produces just enough decimal digits to uniquely distinguish the <code>float</code> number. For 1500.455078125, the adjacent <code>float</code> values below and above it are 1500.4549560546875 and 1500.4552001953125. If any of those were rounded to seven digits total (three after the decimal point), the result would be “1500.455” for all of them. So one more digit is needed to distinguish 1500.455078125 from the others. So it is rounded to eight decimal digits, producing “1500.4551”.</p>\n<p>Similarly, for 2000.3740234375, the adjacent <code>float</code> values are 2000.3739013671875 and 2000.3741455078125, and rounding any of those to seven digits produces “2000.374”. In this case, though, rounding the ones below and above it to eight digits distinguish them, producing “200.3739” and “2000.3741”, so the algorithm allows seven digits for our number, 2000.3740234375, producing “2000.374”, because it knows this uniquely distinguishes it since the others will produce different results.</p>\n"},{"tags":[],"owner":{"account_id":216120,"reputation":49213,"user_id":471160,"accept_rate":90,"display_name":"marcinj"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689705495,"creation_date":1689704746,"answer_id":76715629,"question_id":76711487,"body_markdown":"Floats in Java and C# use IEEE 754 single precision format, which has a precision of 7 decimal digits (well, a bit above 7). This means that when you define a float variable with more than 7 decimal digits (like 1500.45504f), the value will be rounded to the nearest representable float value. In both languages variable will hold the same binary values (what can be easily verified). \r\n\r\nThe differences you are seeing are related to how those languages implement by default floating point rounding and precision in their standard libraries. In particular, the differences are in how they round the last digit and in the number of digits they print. You can read on it in Java implementation here: [Float.toString(float)][1] and for C#: [System.Single.ToString][2].\r\n\r\nYou can make the output look exactly the same with some fiddling with format specifiers:\r\n\r\nin c#:\r\n\r\n    float x = 1500.45504f;\r\n\tfloat y = 2000.37408f;\r\n\tConsole.WriteLine(&quot;{0:G9}, {1:G9}&quot;, x, y);\r\noutputs:\r\n\r\n    1500.45508, 2000.37402\r\n\r\n\r\nin java:\r\n\r\n    float x = 1500.45504f;\r\n    float y = 2000.37408f;\r\n    System.out.printf(&quot;%.9g, %.9g%n&quot;, x, y);\r\n\r\noutputs the same:\r\n\r\n    1500.45508, 2000.37402\r\n\r\n\r\n----\r\n\r\nThe interesting thing is that in case of Java-s default behaviour, you can convert your floats to string and back to floats and have the exact same values. In case of c# its not true for both of them - to acomplish it - you need a round-trip flag when calling: `float_variable.ToString(&quot;R&quot;)`.\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Float.html#toString(float)\r\n  [2]: https://learn.microsoft.com/en-us/dotnet/api/system.single.tostring?view=net-7.0\r\n","title":"Java float formatting and rounding","body":"<p>Floats in Java and C# use IEEE 754 single precision format, which has a precision of 7 decimal digits (well, a bit above 7). This means that when you define a float variable with more than 7 decimal digits (like 1500.45504f), the value will be rounded to the nearest representable float value. In both languages variable will hold the same binary values (what can be easily verified).</p>\n<p>The differences you are seeing are related to how those languages implement by default floating point rounding and precision in their standard libraries. In particular, the differences are in how they round the last digit and in the number of digits they print. You can read on it in Java implementation here: <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Float.html#toString(float)\" rel=\"nofollow noreferrer\">Float.toString(float)</a> and for C#: <a href=\"https://learn.microsoft.com/en-us/dotnet/api/system.single.tostring?view=net-7.0\" rel=\"nofollow noreferrer\">System.Single.ToString</a>.</p>\n<p>You can make the output look exactly the same with some fiddling with format specifiers:</p>\n<p>in c#:</p>\n<pre><code>float x = 1500.45504f;\nfloat y = 2000.37408f;\nConsole.WriteLine(&quot;{0:G9}, {1:G9}&quot;, x, y);\n</code></pre>\n<p>outputs:</p>\n<pre><code>1500.45508, 2000.37402\n</code></pre>\n<p>in java:</p>\n<pre><code>float x = 1500.45504f;\nfloat y = 2000.37408f;\nSystem.out.printf(&quot;%.9g, %.9g%n&quot;, x, y);\n</code></pre>\n<p>outputs the same:</p>\n<pre><code>1500.45508, 2000.37402\n</code></pre>\n<hr />\n<p>The interesting thing is that in case of Java-s default behaviour, you can convert your floats to string and back to floats and have the exact same values. In case of c# its not true for both of them - to acomplish it - you need a round-trip flag when calling: <code>float_variable.ToString(&quot;R&quot;)</code>.</p>\n"}],"owner":{"account_id":29040438,"reputation":31,"user_id":22245397,"display_name":"Nova"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":143,"favorite_count":0,"down_vote_count":3,"up_vote_count":2,"answer_count":2,"score":-1,"last_activity_date":1689850205,"creation_date":1689673660,"question_id":76711487,"body_markdown":"I&#39;ve been experimenting with Java floats, and I&#39;ve noticed some weird behaviour that doesn&#39;t appear to occur in another language, like C#.\r\n\r\n```\r\n// Expecting &#39;x&#39; to round down to 1500.455.\r\nfloat x = 1500.45504f;\r\n// Expecting &#39;y&#39; to round up to 2000.3741.\r\nfloat y = 2000.37408f;\r\n\r\nSystem.out.println(x + &quot;, &quot; + y);\r\n```\r\n\r\nThe above code produces the output `1101.4551, 1106.374`. Should the rounding not be consistent for both floats? Why is the 1101.45504 round to `.4551`, whereas the 1106.37408 value is being essentially truncated to `.374`? Should it not be the other way around?\r\n\r\n**Edit:** The main intention behind this question was asking why different languages treat floats differently. As Eric has mentioned, Java&#39;s `Float.ToString()` method does append one more digit to distinguish between adjacent floats, but why is this not the case for C#? And how can I represent this behaviour in other languages, such as C#.","title":"Java float formatting and rounding","body":"<p>I've been experimenting with Java floats, and I've noticed some weird behaviour that doesn't appear to occur in another language, like C#.</p>\n<pre><code>// Expecting 'x' to round down to 1500.455.\nfloat x = 1500.45504f;\n// Expecting 'y' to round up to 2000.3741.\nfloat y = 2000.37408f;\n\nSystem.out.println(x + &quot;, &quot; + y);\n</code></pre>\n<p>The above code produces the output <code>1101.4551, 1106.374</code>. Should the rounding not be consistent for both floats? Why is the 1101.45504 round to <code>.4551</code>, whereas the 1106.37408 value is being essentially truncated to <code>.374</code>? Should it not be the other way around?</p>\n<p><strong>Edit:</strong> The main intention behind this question was asking why different languages treat floats differently. As Eric has mentioned, Java's <code>Float.ToString()</code> method does append one more digit to distinguish between adjacent floats, but why is this not the case for C#? And how can I represent this behaviour in other languages, such as C#.</p>\n"},{"tags":["java","android","broadcastreceiver","android-view"],"comments":[{"owner":{"account_id":11346074,"reputation":2935,"user_id":11204066,"display_name":"Hayk Mkrtchyan"},"score":0,"creation_date":1654068569,"post_id":72457879,"comment_id":128001044,"body_markdown":"You want something to observe the connection change and change your view accordingly right?","body":"You want something to observe the connection change and change your view accordingly right?"},{"owner":{"display_name":"user18105926"},"score":1,"creation_date":1654068625,"post_id":72457879,"comment_id":128001065,"body_markdown":"yes correct thats what i want","body":"yes correct thats what i want"},{"owner":{"account_id":11346074,"reputation":2935,"user_id":11204066,"display_name":"Hayk Mkrtchyan"},"score":0,"creation_date":1654068650,"post_id":72457879,"comment_id":128001072,"body_markdown":"Great, I&#39;ll answer this in a few minutes.","body":"Great, I&#39;ll answer this in a few minutes."}],"answers":[{"tags":[],"owner":{"account_id":11346074,"reputation":2935,"user_id":11204066,"display_name":"Hayk Mkrtchyan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1654098823,"creation_date":1654069902,"answer_id":72458177,"question_id":72457879,"body_markdown":"To observe the connection changes in real time you can use LiveData. Before this we used BroadcastReceiver, but as you can see `Declaring a broadcastreceiver for android.net.conn.CONNECTIVITY_CHANGE is deprecated for apps targeting N and higher.`\r\n\r\nI&#39;ll post the full code and explain every part of it.\r\n\r\n    public class ConnectionLiveData extends LiveData&lt;Boolean&gt; {\r\n        private ConnectivityManager.NetworkCallback networkCallback;\r\n        private final ConnectivityManager cm;\r\n        private final HashSet&lt;Network&gt; validNetworks = new HashSet&lt;&gt;();\r\n        private final ExecutorService executor = Executors.newSingleThreadExecutor();\r\n    \r\n        public static final int NETWORK_STATUS_POST_DELAY = 1000;\r\n   \r\n     public ConnectionLiveData(Context context) {\r\n            cm = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);\r\n        }\r\n\r\n    private void checkValidNetworks() {\r\n        new Handler(Looper.getMainLooper()).postDelayed(() -&gt;\r\n                        postValue(validNetworks.size() &gt; 0),\r\n                NETWORK_STATUS_POST_DELAY);\r\n    }\r\n\r\n    @Override\r\n    protected void onActive() {\r\n        networkCallback = createNetworkCallback();\r\n        NetworkRequest networkRequest = new NetworkRequest.Builder()\r\n                .addCapability(NetworkCapabilities.NET_CAPABILITY_INTERNET)\r\n                .build();\r\n        cm.registerNetworkCallback(networkRequest, networkCallback);\r\n    }\r\n\r\n    @Override\r\n    protected void onInactive() {\r\n        cm.unregisterNetworkCallback(networkCallback);\r\n    }\r\n\r\n    private ConnectivityManager.NetworkCallback createNetworkCallback() {\r\n        return new ConnectivityManager.NetworkCallback() {\r\n            /*\r\n            Called when a network is detected. If that network has internet, save it in the Set.\r\n            Source: https://developer.android.com/reference/android/net/ConnectivityManager.NetworkCallback#onAvailable(android.net.Network)\r\n            */\r\n            @Override\r\n            public void onAvailable(@NonNull Network network) {\r\n                NetworkCapabilities capabilities = cm.getNetworkCapabilities(network);\r\n                boolean hasInternetCapability = capabilities.hasCapability(NetworkCapabilities.NET_CAPABILITY_INTERNET);\r\n                if (hasInternetCapability) {\r\n                    // check if this network actually has internet\r\n                    executor.execute(() -&gt; {\r\n                        boolean hasInternet = DoesNetworkHaveInternet.execute(network.getSocketFactory());\r\n                        if (hasInternet) {\r\n                            validNetworks.add(network);\r\n                            checkValidNetworks();\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n\r\n            /*\r\n            If the callback was registered with registerNetworkCallback() it will be called for each network which no longer satisfies the criteria of the callback.\r\n            Source: https://developer.android.com/reference/android/net/ConnectivityManager.NetworkCallback#onLost(android.net.Network)\r\n            */\r\n            @Override\r\n            public void onLost(@NonNull Network network) {\r\n                validNetworks.remove(network);\r\n                checkValidNetworks();\r\n            }\r\n        };\r\n    }\r\n}\r\n\r\n\r\nWe extend `LiveData` here and implement 2 functions: `onActive()` and `onInactive()`. As you know `LiveData` is lifecycle-aware, when there is one observer, the `onActive` will be called. I use them to register/unregister the `ConnectivityManager`.\r\nWhen we register our `ConnectivityManager` we pass a `networkCallback` as a parameter. It has several methods, but as you can see in the `createNetworkCallback()` function we override only `onAvailable()` and `onLost()` functions. The `onAvailable()` and `onLost()` will be called if you will switch your network on/off. \r\n\r\nThere may be a case when the connection is on, but there&#39;s no connection with the server. In this case, I found a simple class that we can use to ping and validate our connection.\r\nUsing `ExecutorService` I validate the internet connection by pinging.\r\n\r\n    boolean hasInternet = DoesNetworkHaveInternet.execute(network.getSocketFactory());\r\n\r\nThe `DoesNetworkHaveInternet` code:\r\n\r\n    public class DoesNetworkHaveInternet {\r\n\r\n    private static final String HOST_NAME = &quot;8.8.8.8&quot;;\r\n    private static final int PORT = 53;\r\n    private static final int CONNECT_TIMEOUT = 1500;\r\n    \r\n    @WorkerThread\r\n    static Boolean execute(SocketFactory socketFactory) {\r\n        try {\r\n            Socket socket = socketFactory.createSocket();\r\n            socket.connect(new InetSocketAddress(HOST_NAME, PORT), CONNECT_TIMEOUT);\r\n            socket.close();\r\n            return true;\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n            return false;\r\n        }\r\n    }\r\n    }\r\n\r\nIt&#39;s pinging and validates that we have a stable connection. \r\nIn the end, after verifying that we have a connection, we call the `checkValidNetworks()` functions. There is a delay because in some cases your connection may be off and on for a moment and for that I found there&#39;s no need to show network error. The `checkValidNetworks()` checks if `validNetworks` is not empty. It is a list as there are some types of connections, like wifi and mobile networks. If there&#39;s at least one stable connection, the `validNetworks` will not be empty. \r\nThat&#39;s it. You can observe it in your fragment or in an activity like this:\r\n\r\n    ConnectionLiveDataJava connectionLiveData = new ConnectionLiveDataJava(this);\r\n    connectionLiveData.observe(this, isConnected -&gt; {\r\n                \r\n    });\r\n\r\n\r\n","title":"How to observe network change in real time","body":"<p>To observe the connection changes in real time you can use LiveData. Before this we used BroadcastReceiver, but as you can see <code>Declaring a broadcastreceiver for android.net.conn.CONNECTIVITY_CHANGE is deprecated for apps targeting N and higher.</code></p>\n<p>I'll post the full code and explain every part of it.</p>\n<pre><code>public class ConnectionLiveData extends LiveData&lt;Boolean&gt; {\n    private ConnectivityManager.NetworkCallback networkCallback;\n    private final ConnectivityManager cm;\n    private final HashSet&lt;Network&gt; validNetworks = new HashSet&lt;&gt;();\n    private final ExecutorService executor = Executors.newSingleThreadExecutor();\n\n    public static final int NETWORK_STATUS_POST_DELAY = 1000;\n\n public ConnectionLiveData(Context context) {\n        cm = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);\n    }\n\nprivate void checkValidNetworks() {\n    new Handler(Looper.getMainLooper()).postDelayed(() -&gt;\n                    postValue(validNetworks.size() &gt; 0),\n            NETWORK_STATUS_POST_DELAY);\n}\n\n@Override\nprotected void onActive() {\n    networkCallback = createNetworkCallback();\n    NetworkRequest networkRequest = new NetworkRequest.Builder()\n            .addCapability(NetworkCapabilities.NET_CAPABILITY_INTERNET)\n            .build();\n    cm.registerNetworkCallback(networkRequest, networkCallback);\n}\n\n@Override\nprotected void onInactive() {\n    cm.unregisterNetworkCallback(networkCallback);\n}\n\nprivate ConnectivityManager.NetworkCallback createNetworkCallback() {\n    return new ConnectivityManager.NetworkCallback() {\n        /*\n        Called when a network is detected. If that network has internet, save it in the Set.\n        Source: https://developer.android.com/reference/android/net/ConnectivityManager.NetworkCallback#onAvailable(android.net.Network)\n        */\n        @Override\n        public void onAvailable(@NonNull Network network) {\n            NetworkCapabilities capabilities = cm.getNetworkCapabilities(network);\n            boolean hasInternetCapability = capabilities.hasCapability(NetworkCapabilities.NET_CAPABILITY_INTERNET);\n            if (hasInternetCapability) {\n                // check if this network actually has internet\n                executor.execute(() -&gt; {\n                    boolean hasInternet = DoesNetworkHaveInternet.execute(network.getSocketFactory());\n                    if (hasInternet) {\n                        validNetworks.add(network);\n                        checkValidNetworks();\n                    }\n                });\n            }\n        }\n\n        /*\n        If the callback was registered with registerNetworkCallback() it will be called for each network which no longer satisfies the criteria of the callback.\n        Source: https://developer.android.com/reference/android/net/ConnectivityManager.NetworkCallback#onLost(android.net.Network)\n        */\n        @Override\n        public void onLost(@NonNull Network network) {\n            validNetworks.remove(network);\n            checkValidNetworks();\n        }\n    };\n}\n</code></pre>\n<p>}</p>\n<p>We extend <code>LiveData</code> here and implement 2 functions: <code>onActive()</code> and <code>onInactive()</code>. As you know <code>LiveData</code> is lifecycle-aware, when there is one observer, the <code>onActive</code> will be called. I use them to register/unregister the <code>ConnectivityManager</code>.\nWhen we register our <code>ConnectivityManager</code> we pass a <code>networkCallback</code> as a parameter. It has several methods, but as you can see in the <code>createNetworkCallback()</code> function we override only <code>onAvailable()</code> and <code>onLost()</code> functions. The <code>onAvailable()</code> and <code>onLost()</code> will be called if you will switch your network on/off.</p>\n<p>There may be a case when the connection is on, but there's no connection with the server. In this case, I found a simple class that we can use to ping and validate our connection.\nUsing <code>ExecutorService</code> I validate the internet connection by pinging.</p>\n<pre><code>boolean hasInternet = DoesNetworkHaveInternet.execute(network.getSocketFactory());\n</code></pre>\n<p>The <code>DoesNetworkHaveInternet</code> code:</p>\n<pre><code>public class DoesNetworkHaveInternet {\n\nprivate static final String HOST_NAME = &quot;8.8.8.8&quot;;\nprivate static final int PORT = 53;\nprivate static final int CONNECT_TIMEOUT = 1500;\n\n@WorkerThread\nstatic Boolean execute(SocketFactory socketFactory) {\n    try {\n        Socket socket = socketFactory.createSocket();\n        socket.connect(new InetSocketAddress(HOST_NAME, PORT), CONNECT_TIMEOUT);\n        socket.close();\n        return true;\n    } catch (IOException e) {\n        e.printStackTrace();\n        return false;\n    }\n}\n}\n</code></pre>\n<p>It's pinging and validates that we have a stable connection.\nIn the end, after verifying that we have a connection, we call the <code>checkValidNetworks()</code> functions. There is a delay because in some cases your connection may be off and on for a moment and for that I found there's no need to show network error. The <code>checkValidNetworks()</code> checks if <code>validNetworks</code> is not empty. It is a list as there are some types of connections, like wifi and mobile networks. If there's at least one stable connection, the <code>validNetworks</code> will not be empty.\nThat's it. You can observe it in your fragment or in an activity like this:</p>\n<pre><code>ConnectionLiveDataJava connectionLiveData = new ConnectionLiveDataJava(this);\nconnectionLiveData.observe(this, isConnected -&gt; {\n            \n});\n</code></pre>\n"},{"tags":[],"owner":{"account_id":25296170,"reputation":1,"user_id":19121274,"display_name":"Bhumesh Thakur"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689850112,"creation_date":1689850112,"answer_id":76729108,"question_id":72457879,"body_markdown":"I&#39;m inserting your code also put snackbar in my existing project.but two situation is happen\r\n1) when every activity starts it snackbar shows.how to stop only first activity show others not.\r\n2) if internet is not connected at the very first run. It show no snackbar.\r\nPlease look at this.\r\n","title":"How to observe network change in real time","body":"<p>I'm inserting your code also put snackbar in my existing project.but two situation is happen</p>\n<ol>\n<li>when every activity starts it snackbar shows.how to stop only first activity show others not.</li>\n<li>if internet is not connected at the very first run. It show no snackbar.\nPlease look at this.</li>\n</ol>\n"}],"owner":{"display_name":"user18105926"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":476,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1689850112,"creation_date":1654068482,"question_id":72457879,"body_markdown":"Hello i have a simple app what i have done is when user is no connected to the internet while launchng the app it will show a text view &quot;No Internet &quot; but the issue is when i start the internet or connect to any netwrok it doesnt brings up the orignal view what i have to do is i close the app and open once again to bring the main view\r\n\r\nhow can i switch between this two views in realtime when the connection is on/off\r\n\r\n\r\n**onCreate**\r\n\r\n      // Internet on/off\r\n            if (isOnline()) {\r\n                noInternet.setVisibility(View.INVISIBLE); // Online\r\n                mainRelativeLayout.setVisibility(View.VISIBLE);\r\n    \r\n            } else {\r\n                noInternet.setVisibility(View.VISIBLE); // Disconnected\r\n                mainRelativeLayout.setVisibility(View.INVISIBLE);\r\n            }\r\n\r\n-----------\r\n\r\nthis is what im using currently get the connction info \r\n   \r\n\r\n     // Internet on/off\r\n        public boolean isOnline() {\r\n            boolean connected = false;\r\n            try {\r\n                ConnectivityManager connectivityManager = (ConnectivityManager) this.getApplicationContext().getSystemService(Context.CONNECTIVITY_SERVICE);\r\n                NetworkInfo networkInfo = connectivityManager.getActiveNetworkInfo();\r\n                connected = networkInfo != null &amp;&amp; networkInfo.isAvailable() &amp;&amp; networkInfo.isConnected();\r\n                return connected;\r\n            } catch (Exception e) {\r\n                e.printStackTrace();\r\n            }\r\n            return connected;\r\n        }","title":"How to observe network change in real time","body":"<p>Hello i have a simple app what i have done is when user is no connected to the internet while launchng the app it will show a text view &quot;No Internet &quot; but the issue is when i start the internet or connect to any netwrok it doesnt brings up the orignal view what i have to do is i close the app and open once again to bring the main view</p>\n<p>how can i switch between this two views in realtime when the connection is on/off</p>\n<p><strong>onCreate</strong></p>\n<pre><code>  // Internet on/off\n        if (isOnline()) {\n            noInternet.setVisibility(View.INVISIBLE); // Online\n            mainRelativeLayout.setVisibility(View.VISIBLE);\n\n        } else {\n            noInternet.setVisibility(View.VISIBLE); // Disconnected\n            mainRelativeLayout.setVisibility(View.INVISIBLE);\n        }\n</code></pre>\n<hr />\n<p>this is what im using currently get the connction info</p>\n<pre><code> // Internet on/off\n    public boolean isOnline() {\n        boolean connected = false;\n        try {\n            ConnectivityManager connectivityManager = (ConnectivityManager) this.getApplicationContext().getSystemService(Context.CONNECTIVITY_SERVICE);\n            NetworkInfo networkInfo = connectivityManager.getActiveNetworkInfo();\n            connected = networkInfo != null &amp;&amp; networkInfo.isAvailable() &amp;&amp; networkInfo.isConnected();\n            return connected;\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n        return connected;\n    }\n</code></pre>\n"},{"tags":["java","spring-boot","arraylist"],"comments":[{"owner":{"account_id":5205527,"reputation":707,"user_id":4163605,"accept_rate":35,"display_name":"Serg Shapoval"},"score":0,"creation_date":1689866735,"post_id":76729098,"comment_id":135277057,"body_markdown":"I would recommend you to wrap your list `lendersetting` into an object that contains this list firstly. Next what you need, regarding to the first step, convert your json into an object that contains an array `{     &quot;foos&quot; : [{         &quot;prop1&quot;:&quot;value1&quot;,         &quot;prop2&quot;:&quot;value2&quot;     }, {         &quot;prop1&quot;:&quot;value3&quot;,          &quot;prop2&quot;:&quot;value4&quot;     }] }`.","body":"I would recommend you to wrap your list <code>lendersetting</code> into an object that contains this list firstly. Next what you need, regarding to the first step, convert your json into an object that contains an array <code>{     &quot;foos&quot; : [{         &quot;prop1&quot;:&quot;value1&quot;,         &quot;prop2&quot;:&quot;value2&quot;     }, {         &quot;prop1&quot;:&quot;value3&quot;,          &quot;prop2&quot;:&quot;value4&quot;     }] }</code>."}],"owner":{"account_id":23858121,"reputation":343,"user_id":17861415,"display_name":"lauwis"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689849999,"creation_date":1689849999,"question_id":76729098,"body_markdown":"I try to get an input form with model `@requestbody` in spring boot controller. The parameter is dynamic, there will be more than 1 input with the same name. So i assume to using array as the part of the name.\r\n\r\nWhen `setting.getProduct()` in controller. The return is always null while debugging. And it&#39;s looping forever. Is there any issue there?\r\n\r\nI expect, it will loop twice and get the correct value \r\n\r\n**MODEL**\r\n\r\n    public class LenderSetting {\r\n    \tString product, limit,nominal;\r\n    \r\n    \tpublic String getProduct() {\r\n    \t\treturn product;\r\n    \t}\r\n    \r\n    \tpublic void setProduct(String product) {\r\n    \t\tthis.product = product;\r\n    \t}\r\n    }\r\n\r\n**Controller**\r\n\r\n    @RequestMapping(value = &quot;/submitRuleSetting&quot;, method = RequestMethod.POST)\r\n    \tpublic @ResponseBody String dopostrule(@RequestBody List&lt;LenderSetting&gt; lendersetting,HttpSession session, HttpServletRequest req) {\r\n    \t\ttoken.regenToken(session);\r\n    \t\tJSONArray abc = new JSONArray();\r\n    \t\r\n    \t\tfor (LenderSetting setting : lendersetting) {\r\n    \t\t\tJSONObject hoho = new JSONObject();\r\n                String product = setting.getProduct();\r\n                hoho.put(&quot;product&quot;,product);\r\n                abc.put(hoho);\r\n                \r\n            }\r\n    \t\treturn &quot;&quot;;\r\n    \t\t\r\n    \t}\r\n\r\n**HTML FORM**\r\n\r\n    &lt;div class=&quot;form-group&quot;&gt;\r\n    \t&lt;label class=&quot;control-label&quot;&gt;Product&lt;/label&gt;\r\n    \t\t&lt;select name=&quot;lendersetting[0].product&quot; class=&quot;form-control&quot;&gt;\r\n    \t\t\t&lt;option value=&quot;A02&quot;&gt;A02&lt;/option&gt;\r\n    \t\t\t&lt;option value=&quot;A08&quot;&gt;A08&lt;/option&gt;\r\n    \t\t&lt;/select&gt;\r\n    \t&lt;/div&gt;\r\n\r\n\r\n        &lt;div class=&quot;form-group&quot;&gt;\r\n    \t&lt;label class=&quot;control-label&quot;&gt;Product&lt;/label&gt;\r\n    \t\t&lt;select name=&quot;lendersetting[1].product&quot; class=&quot;form-control&quot;&gt;\r\n    \t\t\t&lt;option value=&quot;A02&quot;&gt;A02&lt;/option&gt;\r\n    \t\t\t&lt;option value=&quot;A08&quot;&gt;A08&lt;/option&gt;\r\n    \t\t&lt;/select&gt;\r\n    \t&lt;/div&gt;    \t\t\t\t\t\t\t\t\t\t\t\t\t\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\r\n\r\n**FORM AJAX**\r\n\r\n\tconsole.log(JSON.stringify($(&quot;#formInput&quot;).serializeArray()));\r\n\t\t\t\t\t\t$.ajax({\r\n\t\t\t\t\t\t\ttype : &quot;POST&quot;,\r\n\t\t\t\t\t\t\turl : &quot;${url}/submitRuleSetting&quot;,\r\n\t\t\t\t\t\t\tdata: JSON.stringify($(&quot;#formInput&quot;).serializeArray()),\r\n\t\t\t\t\t\t\t  contentType: &quot;application/json&quot;, header to JSON\r\n\t\t\t\t\t\t\t  dataType: &quot;json&quot;, \r\n\t\t\t\t\t\t\t  cache: false,\r\n\t\t\t\t\t\t\t//... REST\r\n    });\r\n\r\n**Console Result**\r\n\r\n    {&quot;name&quot;:&quot;lendersetting[0].product&quot;,&quot;value&quot;:&quot;A02&quot;},{&quot;name&quot;:&quot;lendersetting[1].product&quot;,&quot;value&quot;:&quot;A02&quot;},","title":"Spring boot get form input always null","body":"<p>I try to get an input form with model <code>@requestbody</code> in spring boot controller. The parameter is dynamic, there will be more than 1 input with the same name. So i assume to using array as the part of the name.</p>\n<p>When <code>setting.getProduct()</code> in controller. The return is always null while debugging. And it's looping forever. Is there any issue there?</p>\n<p>I expect, it will loop twice and get the correct value</p>\n<p><strong>MODEL</strong></p>\n<pre><code>public class LenderSetting {\n    String product, limit,nominal;\n\n    public String getProduct() {\n        return product;\n    }\n\n    public void setProduct(String product) {\n        this.product = product;\n    }\n}\n</code></pre>\n<p><strong>Controller</strong></p>\n<pre><code>@RequestMapping(value = &quot;/submitRuleSetting&quot;, method = RequestMethod.POST)\n    public @ResponseBody String dopostrule(@RequestBody List&lt;LenderSetting&gt; lendersetting,HttpSession session, HttpServletRequest req) {\n        token.regenToken(session);\n        JSONArray abc = new JSONArray();\n    \n        for (LenderSetting setting : lendersetting) {\n            JSONObject hoho = new JSONObject();\n            String product = setting.getProduct();\n            hoho.put(&quot;product&quot;,product);\n            abc.put(hoho);\n            \n        }\n        return &quot;&quot;;\n        \n    }\n</code></pre>\n<p><strong>HTML FORM</strong></p>\n<pre><code>&lt;div class=&quot;form-group&quot;&gt;\n    &lt;label class=&quot;control-label&quot;&gt;Product&lt;/label&gt;\n        &lt;select name=&quot;lendersetting[0].product&quot; class=&quot;form-control&quot;&gt;\n            &lt;option value=&quot;A02&quot;&gt;A02&lt;/option&gt;\n            &lt;option value=&quot;A08&quot;&gt;A08&lt;/option&gt;\n        &lt;/select&gt;\n    &lt;/div&gt;\n\n\n    &lt;div class=&quot;form-group&quot;&gt;\n    &lt;label class=&quot;control-label&quot;&gt;Product&lt;/label&gt;\n        &lt;select name=&quot;lendersetting[1].product&quot; class=&quot;form-control&quot;&gt;\n            &lt;option value=&quot;A02&quot;&gt;A02&lt;/option&gt;\n            &lt;option value=&quot;A08&quot;&gt;A08&lt;/option&gt;\n        &lt;/select&gt;\n    &lt;/div&gt;                                                      \n                                                \n</code></pre>\n<p><strong>FORM AJAX</strong></p>\n<pre><code>console.log(JSON.stringify($(&quot;#formInput&quot;).serializeArray()));\n                    $.ajax({\n                        type : &quot;POST&quot;,\n                        url : &quot;${url}/submitRuleSetting&quot;,\n                        data: JSON.stringify($(&quot;#formInput&quot;).serializeArray()),\n                          contentType: &quot;application/json&quot;, header to JSON\n                          dataType: &quot;json&quot;, \n                          cache: false,\n                        //... REST\n});\n</code></pre>\n<p><strong>Console Result</strong></p>\n<pre><code>{&quot;name&quot;:&quot;lendersetting[0].product&quot;,&quot;value&quot;:&quot;A02&quot;},{&quot;name&quot;:&quot;lendersetting[1].product&quot;,&quot;value&quot;:&quot;A02&quot;},\n</code></pre>\n"},{"tags":["java","multithreading","concurrency","java-threads","spinlock"],"comments":[{"owner":{"account_id":3296493,"reputation":1463,"user_id":2773647,"accept_rate":67,"display_name":"cybersoft"},"score":0,"creation_date":1499603598,"post_id":44622384,"comment_id":76966808,"body_markdown":"javadoc for [onSpinWait](http://download.java.net/java/jdk9/docs/api/java/lang/Thread.html#onSpinWait--) contains API note that explains how to use it","body":"javadoc for <a href=\"http://download.java.net/java/jdk9/docs/api/java/lang/Thread.html#onSpinWait--\" rel=\"nofollow noreferrer\">onSpinWait</a> contains API note that explains how to use it"},{"owner":{"account_id":1477288,"reputation":5052,"user_id":1387386,"display_name":"Anatolii Shuba"},"score":0,"creation_date":1627347812,"post_id":44622384,"comment_id":121126527,"body_markdown":"`Thread.onSpinWait()` is an imlementation od the [JEP-285](https://openjdk.java.net/jeps/285)","body":"<code>Thread.onSpinWait()</code> is an imlementation od the <a href=\"https://openjdk.java.net/jeps/285\" rel=\"nofollow noreferrer\">JEP-285</a>"}],"answers":[{"tags":[],"owner":{"account_id":1946663,"reputation":15594,"user_id":1751640,"accept_rate":75,"display_name":"Mordechai"},"down_vote_count":0,"up_vote_count":23,"is_accepted":false,"score":23,"last_activity_date":1497896831,"creation_date":1497896831,"answer_id":44637514,"question_id":44622384,"body_markdown":"Pure system hinting!\n\nReading [this article](http://openjdk.java.net/jeps/285) I quote:\n\n&gt;**Goals**\n&gt;\n&gt;Define an API that would allow Java code to hint to the run-time system that it is in a spin loop. The API will be a pure hint, and will carry no semantic behaviour requirements (for example, a no-op is a valid implementation). Allow the JVM to benefit from spin loop specific behaviours that may be useful on certain hardware platforms. Provide both a no-op implementation and an intrinsic implementation in the JDK, and demonstrate an execution benefit on at least one major hardware platform.\n\nThere are many times a thread must be suspended until something outside its scope changes. A (once) common practice was the `wait() notify()` pattern where there&#39;s one thread waiting for the other thread to wake them up.\n\nThere is a big limitation to this, namely, the other thread must be aware that there might be waiting threads and should notify. If the work of the other thread is outside your control, there&#39;s no way to get notified.\n\nThe only way would be a *spin-wait*. let&#39;s say you have a program that checks for new emails and notifies the user:\n\n    while(true) {\n        while(!newEmailArrived()) {\n        }\n        makeNotification();\n    }\n\nThis piece of code will execute millions of times a seconds; spinning over and over, using precious of electricity and CPU power. A common way of doing this would be to wait a few seconds on each iteration.\n\n    while(true) {\n        while(!newEmailArrived()) {\n            try {\n                Thread.sleep(5000);\n            } catch(InterruptedException e) {\n            }\n        }\n        makeNotification();\n    }\n\nThis does a very good job. But in cases where you have to work instantly a sleep may be out of question.\n\nJava 9 tries to solve this issue by introducing this new method:\n\n    while(true) {\n        while(!newEmailArrived()) {\n            Thread.onSpinWait();\n        }\n        makeNotification();\n    }\n\nThis will work exactly the same as without the method call, but the system is free to lower the process priority; slowing the cycle or reduce electricity on this loop when its resources are needed for other more important things.","title":"onSpinWait​() method of Thread class - Java 9","body":"<p>Pure system hinting!</p>\n<p>Reading <a href=\"http://openjdk.java.net/jeps/285\" rel=\"noreferrer\">this article</a> I quote:</p>\n<blockquote>\n<p><strong>Goals</strong></p>\n<p>Define an API that would allow Java code to hint to the run-time system that it is in a spin loop. The API will be a pure hint, and will carry no semantic behaviour requirements (for example, a no-op is a valid implementation). Allow the JVM to benefit from spin loop specific behaviours that may be useful on certain hardware platforms. Provide both a no-op implementation and an intrinsic implementation in the JDK, and demonstrate an execution benefit on at least one major hardware platform.</p>\n</blockquote>\n<p>There are many times a thread must be suspended until something outside its scope changes. A (once) common practice was the <code>wait() notify()</code> pattern where there's one thread waiting for the other thread to wake them up.</p>\n<p>There is a big limitation to this, namely, the other thread must be aware that there might be waiting threads and should notify. If the work of the other thread is outside your control, there's no way to get notified.</p>\n<p>The only way would be a <em>spin-wait</em>. let's say you have a program that checks for new emails and notifies the user:</p>\n<pre><code>while(true) {\n    while(!newEmailArrived()) {\n    }\n    makeNotification();\n}\n</code></pre>\n<p>This piece of code will execute millions of times a seconds; spinning over and over, using precious of electricity and CPU power. A common way of doing this would be to wait a few seconds on each iteration.</p>\n<pre><code>while(true) {\n    while(!newEmailArrived()) {\n        try {\n            Thread.sleep(5000);\n        } catch(InterruptedException e) {\n        }\n    }\n    makeNotification();\n}\n</code></pre>\n<p>This does a very good job. But in cases where you have to work instantly a sleep may be out of question.</p>\n<p>Java 9 tries to solve this issue by introducing this new method:</p>\n<pre><code>while(true) {\n    while(!newEmailArrived()) {\n        Thread.onSpinWait();\n    }\n    makeNotification();\n}\n</code></pre>\n<p>This will work exactly the same as without the method call, but the system is free to lower the process priority; slowing the cycle or reduce electricity on this loop when its resources are needed for other more important things.</p>\n"},{"tags":[],"owner":{"account_id":4438260,"reputation":25796,"user_id":3613500,"accept_rate":95,"display_name":"David Haim"},"down_vote_count":0,"up_vote_count":36,"is_accepted":true,"score":36,"last_activity_date":1689849634,"creation_date":1497898682,"answer_id":44637990,"question_id":44622384,"body_markdown":"It&#39;s the same (and probably compiles to) as the x86 opcode `PAUSE` and equivalent the Win32 macro `YieldProcessor`, GCC&#39;s `__mm_pause()` and the C# method `Thread.SpinWait`\r\n\r\nIt&#39;s a very weakened form of yielding: it tells your CPU that you are in a loop that may burn many CPU-cycles waiting for something to happen (busy-waiting).\r\n\r\nThis way, The CPU can assign more resources to other threads, without actually loading the OS scheduler and dequeuing a ready-to-run thread (which may be expensive).\r\n\r\nA common use for that is spin-locking, when you know the contention on a shared memory is very infrequent or finishes very quickly, a spinlock may perform better than an ordinary lock. \r\n\r\nPseudo code for such can look like:\r\n\r\n    int state = 0; //1 - locked, 0 - unlocked\r\n    \r\n    routine lock:\r\n        while state.cas(new_value=1, wanted_value=0) == false //if state is 0 (unlocked), store 1 (locked) and return true, otherwise just return false.\r\n           yield\r\n    \r\n    routine unlock:\r\n        atomic_store(state,0)\r\n\r\n\r\n\r\n`yield` can be implemented with `Thread.onSpinWait()`, hinting that while trying to lock the lock, the CPU can give more resources to other threads.\r\n   \r\nThis technique of yielding is extremely common and popular when implementing a lock-free algorithm, since most of them depend on busy-waiting (which is implemented almost always as an atomic compare-and-swap loop). this has every real-world use you can imagine.  ","title":"onSpinWait​() method of Thread class - Java 9","body":"<p>It's the same (and probably compiles to) as the x86 opcode <code>PAUSE</code> and equivalent the Win32 macro <code>YieldProcessor</code>, GCC's <code>__mm_pause()</code> and the C# method <code>Thread.SpinWait</code></p>\n<p>It's a very weakened form of yielding: it tells your CPU that you are in a loop that may burn many CPU-cycles waiting for something to happen (busy-waiting).</p>\n<p>This way, The CPU can assign more resources to other threads, without actually loading the OS scheduler and dequeuing a ready-to-run thread (which may be expensive).</p>\n<p>A common use for that is spin-locking, when you know the contention on a shared memory is very infrequent or finishes very quickly, a spinlock may perform better than an ordinary lock.</p>\n<p>Pseudo code for such can look like:</p>\n<pre><code>int state = 0; //1 - locked, 0 - unlocked\n\nroutine lock:\n    while state.cas(new_value=1, wanted_value=0) == false //if state is 0 (unlocked), store 1 (locked) and return true, otherwise just return false.\n       yield\n\nroutine unlock:\n    atomic_store(state,0)\n</code></pre>\n<p><code>yield</code> can be implemented with <code>Thread.onSpinWait()</code>, hinting that while trying to lock the lock, the CPU can give more resources to other threads.</p>\n<p>This technique of yielding is extremely common and popular when implementing a lock-free algorithm, since most of them depend on busy-waiting (which is implemented almost always as an atomic compare-and-swap loop). this has every real-world use you can imagine.</p>\n"},{"tags":[],"owner":{"account_id":1056871,"reputation":117729,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1689849867,"creation_date":1497972186,"answer_id":44657106,"question_id":44622384,"body_markdown":"I just want to add my 2 cents after reading the document and the source code for it. This method *might* trigger some optimizations and might not - so care must be taken - you can&#39;t really rely on it - since this a _hint_ to the CPU more than demand, probably there&#39;s no initial relying whatsoever either way. Meaning that it&#39;s actual source code looks like this:\r\n\r\n\r\n    @HotSpotIntrinsicCandidate\r\n    public static void onSpinWait() {}\r\n\r\nWhat this actually means is that this method is basically a NO-OP until it hits the _c2 compiler_ in the JIT, according to [this][1].\r\n\r\n\r\n  [1]: https://bugs.openjdk.java.net/browse/JDK-8147844","title":"onSpinWait​() method of Thread class - Java 9","body":"<p>I just want to add my 2 cents after reading the document and the source code for it. This method <em>might</em> trigger some optimizations and might not - so care must be taken - you can't really rely on it - since this a <em>hint</em> to the CPU more than demand, probably there's no initial relying whatsoever either way. Meaning that it's actual source code looks like this:</p>\n<pre><code>@HotSpotIntrinsicCandidate\npublic static void onSpinWait() {}\n</code></pre>\n<p>What this actually means is that this method is basically a NO-OP until it hits the <em>c2 compiler</em> in the JIT, according to <a href=\"https://bugs.openjdk.java.net/browse/JDK-8147844\" rel=\"nofollow noreferrer\">this</a>.</p>\n"},{"tags":[],"owner":{"account_id":2504552,"reputation":392,"user_id":2178663,"accept_rate":25,"display_name":"igaz"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1503549617,"creation_date":1503549617,"answer_id":45853068,"question_id":44622384,"body_markdown":"For a real-world example,\r\nsay you wanted to implement asynchronous logging, where threads that want to log something, don&#39;t want to wait for their log message to get &quot;published&quot; (say written to a file), just so long as it eventually does (because they&#39;ve got real work to do.)\r\n\r\n    Producer(s):\r\n    concurrentQueue.push(&quot;Log my message&quot;)\r\n\r\nAnd say, you decide on having a dedicated consumer thread, that is solely responsible for actually writing log messages to a file:\r\n\r\n    (Single)Consumer\r\n\r\n    while (concurrentQueue.isEmpty())\r\n    {\r\n        //what should I do?\r\n\r\n    }\r\n    writeToFile(concurrentQueue.popHead());\r\n    //loop\r\n\r\nThe issue is what to do in inside the while block?  Java has not provided ideal solutions: you could do a Thread.sleep(), but for how long and that&#39;s heavyweight;  or a Thread.yield(), but that&#39;s unspecified, or you could use a lock or mutex*, but that&#39;s often too heavyweight and slows the producers down as well (and vitiates the stated purpose of asynchronous logging).\r\n\r\nWhat you really want is to say to the runtime, &quot;I anticipate that I won&#39;t be waiting too long, but I&#39;d like to minimize any overhead in waiting/negative effects on other threads&quot;.\r\nThat&#39;s where Thread.onSpinWait() comes in.\r\n\r\nAs a response above indicated, on platforms that support it (like x86), onSpinWait() gets intrinsified into a PAUSE instruction, which will give you the benefits that you want.  So:\r\n\r\n    (Single)Consumer\r\n\r\n    while (concurrentQueue.isEmpty())\r\n    {\r\n        Thread.onSpinWait();\r\n\r\n    }\r\n    writeToFile(concurrentQueue.popHead());\r\n    //loop\r\n\r\nIt&#39;s been [shown empirically](http://openjdk.java.net/jeps/285) that this can improve latency of &quot;busy-waiting&quot; style loops.\r\n\r\nI also want to clarify, that it is not just useful in implementing &quot;spin-locks&quot; (although it&#39;s definitely useful in such a circumstance); the code above does not require a lock (spin or otherwise) of any kind.\r\n\r\nIf you want to get into the weeds, you can&#39;t do better than [Intel&#39;s specs](https://www.intel.com/content/dam/www/public/us/en/documents/manuals/64-ia-32-architectures-optimization-manual.pdf) \r\n\r\n\r\n*For clarity, the JVM is incredibly smart in attempting to minimize the cost of mutexes, and will use lightweight locks initially, but that&#39;s another discussion.","title":"onSpinWait​() method of Thread class - Java 9","body":"<p>For a real-world example,\nsay you wanted to implement asynchronous logging, where threads that want to log something, don't want to wait for their log message to get \"published\" (say written to a file), just so long as it eventually does (because they've got real work to do.)</p>\n\n<pre><code>Producer(s):\nconcurrentQueue.push(\"Log my message\")\n</code></pre>\n\n<p>And say, you decide on having a dedicated consumer thread, that is solely responsible for actually writing log messages to a file:</p>\n\n<pre><code>(Single)Consumer\n\nwhile (concurrentQueue.isEmpty())\n{\n    //what should I do?\n\n}\nwriteToFile(concurrentQueue.popHead());\n//loop\n</code></pre>\n\n<p>The issue is what to do in inside the while block?  Java has not provided ideal solutions: you could do a Thread.sleep(), but for how long and that's heavyweight;  or a Thread.yield(), but that's unspecified, or you could use a lock or mutex*, but that's often too heavyweight and slows the producers down as well (and vitiates the stated purpose of asynchronous logging).</p>\n\n<p>What you really want is to say to the runtime, \"I anticipate that I won't be waiting too long, but I'd like to minimize any overhead in waiting/negative effects on other threads\".\nThat's where Thread.onSpinWait() comes in.</p>\n\n<p>As a response above indicated, on platforms that support it (like x86), onSpinWait() gets intrinsified into a PAUSE instruction, which will give you the benefits that you want.  So:</p>\n\n<pre><code>(Single)Consumer\n\nwhile (concurrentQueue.isEmpty())\n{\n    Thread.onSpinWait();\n\n}\nwriteToFile(concurrentQueue.popHead());\n//loop\n</code></pre>\n\n<p>It's been <a href=\"http://openjdk.java.net/jeps/285\" rel=\"noreferrer\">shown empirically</a> that this can improve latency of \"busy-waiting\" style loops.</p>\n\n<p>I also want to clarify, that it is not just useful in implementing \"spin-locks\" (although it's definitely useful in such a circumstance); the code above does not require a lock (spin or otherwise) of any kind.</p>\n\n<p>If you want to get into the weeds, you can't do better than <a href=\"https://www.intel.com/content/dam/www/public/us/en/documents/manuals/64-ia-32-architectures-optimization-manual.pdf\" rel=\"noreferrer\">Intel's specs</a> </p>\n\n<p>*For clarity, the JVM is incredibly smart in attempting to minimize the cost of mutexes, and will use lightweight locks initially, but that's another discussion.</p>\n"}],"owner":{"account_id":4761031,"reputation":11006,"user_id":3848411,"accept_rate":60,"display_name":"Joker"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":13093,"favorite_count":0,"down_vote_count":0,"up_vote_count":40,"accepted_answer_id":44637990,"answer_count":4,"score":40,"last_activity_date":1689849867,"creation_date":1497847382,"question_id":44622384,"body_markdown":"While learning Java 9 features I came across a new method of `Thread` class, called [`onSpinWait​`][1]. As per javadocs, this method is used for this:\r\n\r\n&gt; Indicates that the caller is momentarily unable to progress, until the\r\n&gt; occurrence of one or more actions on the part of other activities.\r\n\r\nCan someone help me understand this method giving a real-life example or scenario?\r\n\r\n  [1]: https://docs.oracle.com/javase/9/docs/api/java/lang/Thread.html#onSpinWait--","title":"onSpinWait​() method of Thread class - Java 9","body":"<p>While learning Java 9 features I came across a new method of <code>Thread</code> class, called <a href=\"https://docs.oracle.com/javase/9/docs/api/java/lang/Thread.html#onSpinWait--\" rel=\"noreferrer\"><code>onSpinWait​</code></a>. As per javadocs, this method is used for this:</p>\n\n<blockquote>\n  <p>Indicates that the caller is momentarily unable to progress, until the\n  occurrence of one or more actions on the part of other activities.</p>\n</blockquote>\n\n<p>Can someone help me understand this method giving a real-life example or scenario?</p>\n"},{"tags":["java","json"],"comments":[{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1689831556,"post_id":76726907,"comment_id":135269519,"body_markdown":"Is _finInstKey_ always a numeric value?","body":"Is <i>finInstKey</i> always a numeric value?"},{"owner":{"account_id":5777968,"reputation":45,"user_id":4559517,"display_name":"Thakur Sahab"},"score":0,"creation_date":1689831846,"post_id":76726907,"comment_id":135269538,"body_markdown":"@Reilas no, it can be a string as well. and here I have provided finInstKey as static json key. In code, there will be a dynamic key name.","body":"@Reilas no, it can be a string as well. and here I have provided finInstKey as static json key. In code, there will be a dynamic key name."},{"owner":{"account_id":9463219,"reputation":9357,"user_id":7036419,"display_name":"Maurice Perry"},"score":0,"creation_date":1689832592,"post_id":76726907,"comment_id":135269646,"body_markdown":"`(.*?)` is the same as `(.*)`","body":"<code>(.*?)</code> is the same as <code>(.*)</code>"},{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1689841222,"post_id":76726907,"comment_id":135271251,"body_markdown":"[this answer](https://stackoverflow.com/a/1732454/8681) is about HTML instead of JSON, but it applies here none the less.","body":"<a href=\"https://stackoverflow.com/a/1732454/8681\">this answer</a> is about HTML instead of JSON, but it applies here none the less."}],"answers":[{"tags":[],"owner":{"account_id":5972924,"reputation":3473,"user_id":4694757,"display_name":"I_Al-thamary"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689834551,"creation_date":1689831955,"answer_id":76726984,"question_id":76726907,"body_markdown":"The `finInstKey` key is not enclosed in quotes leading to empty matches. By changing the pattern to `&quot;finInstKey&quot;` you will allow it to match this input and correctly extract the value.\r\n\r\nUse it like\r\n\r\n    import java.util.regex.Matcher;\r\n    import java.util.regex.Pattern;\r\n    \r\n    public class Main {\r\n    \r\n        public static void main(String[] args) {\r\n            String field = &quot;finInstKey&quot;;\r\n            String regex = &quot;\\&quot;?&quot; + field + &quot;\\&quot;?(\\\\s*:\\\\s*\\&quot;?([^\\&quot;,}]*)\\&quot;?|\\&quot;,\\&quot;value\\&quot;\\\\s*:\\\\s*\\&quot;?([^\\&quot;,}]*)\\&quot;?)&quot;;\r\n    \r\n            String input = &quot;{\\&quot;finInstKey\\&quot;:500},{\\&quot;name\\&quot;:\\&quot;finInstKey\\&quot;,\\&quot;value\\&quot;:12345678900987654321}{finInstKey:\\&quot;500\\&quot;},{\\&quot;name\\&quot;:\\&quot;finInstKey\\&quot;,\\&quot;value\\&quot;:\\&quot;12345678900987654321\\&quot;}&quot;;\r\n    \r\n            Pattern pattern = Pattern.compile(regex, Pattern.CASE_INSENSITIVE);\r\n            Matcher matcher = pattern.matcher(input);\r\n    \r\n            while (matcher.find()) {\r\n                if (matcher.group(2) != null) {\r\n                    System.out.println(matcher.group(2));\r\n                } else {\r\n                    System.out.println(matcher.group(3));\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\nhere is the [code][1]\r\n\r\n\r\n  [1]: https://onlinegdb.com/NBhjl06A1","title":"Regex capturing empty string along with the expected groups, want it to not to capture empty string","body":"<p>The <code>finInstKey</code> key is not enclosed in quotes leading to empty matches. By changing the pattern to <code>&quot;finInstKey&quot;</code> you will allow it to match this input and correctly extract the value.</p>\n<p>Use it like</p>\n<pre><code>import java.util.regex.Matcher;\nimport java.util.regex.Pattern;\n\npublic class Main {\n\n    public static void main(String[] args) {\n        String field = &quot;finInstKey&quot;;\n        String regex = &quot;\\&quot;?&quot; + field + &quot;\\&quot;?(\\\\s*:\\\\s*\\&quot;?([^\\&quot;,}]*)\\&quot;?|\\&quot;,\\&quot;value\\&quot;\\\\s*:\\\\s*\\&quot;?([^\\&quot;,}]*)\\&quot;?)&quot;;\n\n        String input = &quot;{\\&quot;finInstKey\\&quot;:500},{\\&quot;name\\&quot;:\\&quot;finInstKey\\&quot;,\\&quot;value\\&quot;:12345678900987654321}{finInstKey:\\&quot;500\\&quot;},{\\&quot;name\\&quot;:\\&quot;finInstKey\\&quot;,\\&quot;value\\&quot;:\\&quot;12345678900987654321\\&quot;}&quot;;\n\n        Pattern pattern = Pattern.compile(regex, Pattern.CASE_INSENSITIVE);\n        Matcher matcher = pattern.matcher(input);\n\n        while (matcher.find()) {\n            if (matcher.group(2) != null) {\n                System.out.println(matcher.group(2));\n            } else {\n                System.out.println(matcher.group(3));\n            }\n        }\n    }\n}\n</code></pre>\n<p>here is the <a href=\"https://onlinegdb.com/NBhjl06A1\" rel=\"nofollow noreferrer\">code</a></p>\n"},{"tags":[],"owner":{"account_id":18213449,"reputation":59,"user_id":13255515,"display_name":"Linden Wells"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1689832103,"creation_date":1689832103,"answer_id":76726998,"question_id":76726907,"body_markdown":"It&#39;d probably be easier using a JSON parsing library to parse JSON, instead of regex.\r\nTry the `.fromJSON` method from https://github.com/google/gson\r\n\r\nIf you insist on using regex, maybe look into the `+` symbol in regex, it means &quot;match one or more&quot;. Regex is pretty difficult to read when it gets complicated like you have there.","title":"Regex capturing empty string along with the expected groups, want it to not to capture empty string","body":"<p>It'd probably be easier using a JSON parsing library to parse JSON, instead of regex.\nTry the <code>.fromJSON</code> method from <a href=\"https://github.com/google/gson\" rel=\"nofollow noreferrer\">https://github.com/google/gson</a></p>\n<p>If you insist on using regex, maybe look into the <code>+</code> symbol in regex, it means &quot;match one or more&quot;. Regex is pretty difficult to read when it gets complicated like you have there.</p>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689834278,"creation_date":1689833295,"answer_id":76727097,"question_id":76726907,"body_markdown":"You can use the following pattern.&amp;nbsp; The capture groups are 2 and 3.  \r\nIt&#39;s not easy to determine the end of the value, considering a text value may contain any of the possible delimiters.  \r\nAssure that your data will conform; this implies that it&#39;s just a series of numbers.\r\n\r\n```none\r\n(?si)(\\&quot;finInstKey\\&quot;)\\s*:\\s*\\&quot;?(.+?)\\b.+?\\&quot;name\\&quot;\\s*:\\s*\\1\\s*,\\s*\\&quot;value\\&quot;\\s*:\\s*\\&quot;?(.+?)\\b\r\n```\r\n\r\nAlthough, I recommend just using a _JSON_ parsing module, _[Gson](https://en.wikipedia.org/wiki/Gson)_ by _Google_ works well.\r\n\r\nYou&#39;re _JSON_ strings are actually arrays, so just place each within square brackets.\r\n\r\n```json\r\n[\r\n  {\r\n    &quot;finInstKey&quot;: 500\r\n  },\r\n  {\r\n    &quot;name&quot;: &quot;finInstKey&quot;,\r\n    &quot;value&quot;: 12345678900987654321\r\n  }\r\n]\r\n```\r\n\r\nNote that your second example has a missing quotation mark for the _finInstKey_ key.\r\n\r\n```json\r\n[\r\n  {\r\n    &quot;finInstKey&quot;: &quot;500&quot;\r\n  },\r\n  {\r\n    &quot;name&quot;: &quot;finInstKey&quot;,\r\n    &quot;value&quot;: &quot;12345678900987654321&quot;\r\n  }\r\n]\r\n```\r\n\r\nWith _Gson_ you can utilize the _JsonParser_ class to parse the _values_.\r\n\r\n```java\r\nString stringA = &quot;[\\n&quot; +\r\n    &quot;  {\\n&quot; +\r\n    &quot;    \\&quot;finInstKey\\&quot;: 500\\n&quot; +\r\n    &quot;  },\\n&quot; +\r\n    &quot;  {\\n&quot; +\r\n    &quot;    \\&quot;name\\&quot;: \\&quot;finInstKey\\&quot;,\\n&quot; +\r\n    &quot;    \\&quot;value\\&quot;: 12345678900987654321\\n&quot; +\r\n    &quot;  }\\n&quot; +\r\n    &quot;]&quot;;\r\nString stringB = &quot;[\\n&quot; +\r\n    &quot;  {\\n&quot; +\r\n    &quot;    \\&quot;finInstKey\\&quot;: \\&quot;500\\&quot;\\n&quot; +\r\n    &quot;  },\\n&quot; +\r\n    &quot;  {\\n&quot; +\r\n    &quot;    \\&quot;name\\&quot;: \\&quot;finInstKey\\&quot;,\\n&quot; +\r\n    &quot;    \\&quot;value\\&quot;: \\&quot;12345678900987654321\\&quot;\\n&quot; +\r\n    &quot;  }\\n&quot; +\r\n    &quot;]&quot;;\r\n\r\nJsonArray arrayA = JsonParser.parseString(stringA).getAsJsonArray();\r\nJsonObject objectA1 = arrayA.get(0).getAsJsonObject();\r\nJsonElement elementA1 = objectA1.get(&quot;finInstKey&quot;);\r\nint finInstKeyA = elementA1.getAsInt();\r\nJsonObject objectA2 = arrayA.get(1).getAsJsonObject();\r\nJsonElement elementA2 = objectA2.get(&quot;value&quot;);\r\nBigInteger valueA = elementA2.getAsBigInteger();\r\nSystem.out.println(&quot;finInstKeyA = &quot; + finInstKeyA);\r\nSystem.out.println(&quot;valueA = &quot; + valueA);\r\n\r\nJsonArray arrayB = JsonParser.parseString(stringB).getAsJsonArray();\r\nJsonObject objectB1 = arrayB.get(0).getAsJsonObject();\r\nJsonElement elementB1 = objectB1.get(&quot;finInstKey&quot;);\r\nString finInstKeyB = elementB1.getAsString();\r\nJsonObject objectB2 = arrayB.get(1).getAsJsonObject();\r\nJsonElement elementB2 = objectB2.get(&quot;value&quot;);\r\nString valueB = elementB2.getAsString();\r\nSystem.out.println(&quot;finInstKeyB = &quot; + finInstKeyB);\r\nSystem.out.println(&quot;valueB = &quot; + valueB);\r\n```\r\n\r\nOutput\r\n\r\n```none\r\nfinInstKeyA = 500\r\nvalueA = 12345678900987654321\r\nfinInstKeyB = 500\r\nvalueB = 12345678900987654321\r\n```","title":"Regex capturing empty string along with the expected groups, want it to not to capture empty string","body":"<p>You can use the following pattern.  The capture groups are 2 and 3.<br />\nIt's not easy to determine the end of the value, considering a text value may contain any of the possible delimiters.<br />\nAssure that your data will conform; this implies that it's just a series of numbers.</p>\n<pre class=\"lang-none prettyprint-override\"><code>(?si)(\\&quot;finInstKey\\&quot;)\\s*:\\s*\\&quot;?(.+?)\\b.+?\\&quot;name\\&quot;\\s*:\\s*\\1\\s*,\\s*\\&quot;value\\&quot;\\s*:\\s*\\&quot;?(.+?)\\b\n</code></pre>\n<p>Although, I recommend just using a <em>JSON</em> parsing module, <em><a href=\"https://en.wikipedia.org/wiki/Gson\" rel=\"nofollow noreferrer\">Gson</a></em> by <em>Google</em> works well.</p>\n<p>You're <em>JSON</em> strings are actually arrays, so just place each within square brackets.</p>\n<pre class=\"lang-json prettyprint-override\"><code>[\n  {\n    &quot;finInstKey&quot;: 500\n  },\n  {\n    &quot;name&quot;: &quot;finInstKey&quot;,\n    &quot;value&quot;: 12345678900987654321\n  }\n]\n</code></pre>\n<p>Note that your second example has a missing quotation mark for the <em>finInstKey</em> key.</p>\n<pre class=\"lang-json prettyprint-override\"><code>[\n  {\n    &quot;finInstKey&quot;: &quot;500&quot;\n  },\n  {\n    &quot;name&quot;: &quot;finInstKey&quot;,\n    &quot;value&quot;: &quot;12345678900987654321&quot;\n  }\n]\n</code></pre>\n<p>With <em>Gson</em> you can utilize the <em>JsonParser</em> class to parse the <em>values</em>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>String stringA = &quot;[\\n&quot; +\n    &quot;  {\\n&quot; +\n    &quot;    \\&quot;finInstKey\\&quot;: 500\\n&quot; +\n    &quot;  },\\n&quot; +\n    &quot;  {\\n&quot; +\n    &quot;    \\&quot;name\\&quot;: \\&quot;finInstKey\\&quot;,\\n&quot; +\n    &quot;    \\&quot;value\\&quot;: 12345678900987654321\\n&quot; +\n    &quot;  }\\n&quot; +\n    &quot;]&quot;;\nString stringB = &quot;[\\n&quot; +\n    &quot;  {\\n&quot; +\n    &quot;    \\&quot;finInstKey\\&quot;: \\&quot;500\\&quot;\\n&quot; +\n    &quot;  },\\n&quot; +\n    &quot;  {\\n&quot; +\n    &quot;    \\&quot;name\\&quot;: \\&quot;finInstKey\\&quot;,\\n&quot; +\n    &quot;    \\&quot;value\\&quot;: \\&quot;12345678900987654321\\&quot;\\n&quot; +\n    &quot;  }\\n&quot; +\n    &quot;]&quot;;\n\nJsonArray arrayA = JsonParser.parseString(stringA).getAsJsonArray();\nJsonObject objectA1 = arrayA.get(0).getAsJsonObject();\nJsonElement elementA1 = objectA1.get(&quot;finInstKey&quot;);\nint finInstKeyA = elementA1.getAsInt();\nJsonObject objectA2 = arrayA.get(1).getAsJsonObject();\nJsonElement elementA2 = objectA2.get(&quot;value&quot;);\nBigInteger valueA = elementA2.getAsBigInteger();\nSystem.out.println(&quot;finInstKeyA = &quot; + finInstKeyA);\nSystem.out.println(&quot;valueA = &quot; + valueA);\n\nJsonArray arrayB = JsonParser.parseString(stringB).getAsJsonArray();\nJsonObject objectB1 = arrayB.get(0).getAsJsonObject();\nJsonElement elementB1 = objectB1.get(&quot;finInstKey&quot;);\nString finInstKeyB = elementB1.getAsString();\nJsonObject objectB2 = arrayB.get(1).getAsJsonObject();\nJsonElement elementB2 = objectB2.get(&quot;value&quot;);\nString valueB = elementB2.getAsString();\nSystem.out.println(&quot;finInstKeyB = &quot; + finInstKeyB);\nSystem.out.println(&quot;valueB = &quot; + valueB);\n</code></pre>\n<p>Output</p>\n<pre class=\"lang-none prettyprint-override\"><code>finInstKeyA = 500\nvalueA = 12345678900987654321\nfinInstKeyB = 500\nvalueB = 12345678900987654321\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4228398,"reputation":17727,"user_id":3461397,"display_name":"Oleg Cherednik"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689847482,"creation_date":1689847482,"answer_id":76728772,"question_id":76726907,"body_markdown":"I think you use not correct regexp.\r\n\r\n```java\r\npublic static List&lt;String&gt; getData(String str, String field) {\r\n    String regex = &quot;(?:\\&quot;?&quot; + field + &quot;\\&quot;?:\\&quot;?(\\\\d+)\\&quot;?)|(?:\\&quot;name\\&quot;:\\&quot;&quot;\r\n            + field + &quot;\\&quot;,\\&quot;value\\&quot;:\\&quot;?(\\\\d+)\\&quot;?)&quot;;\r\n    Matcher matcher = Pattern.compile(regex).matcher(str);\r\n    List&lt;String&gt; data = new ArrayList&lt;&gt;();\r\n\r\n    while (matcher.find()) {\r\n        data.add(Optional.ofNullable(matcher.group(1))\r\n                         .orElseGet(() -&gt; matcher.group(2)));\r\n    }\r\n\r\n    return data;\r\n}\r\n```\r\n\r\n*Output:*\r\n```\r\n500\r\n12345678900987654321\r\n500\r\n12345678900987654321\r\n```\r\n\r\n***P.S.** I think parsing json with regexpis a strategically bad idea. I recommend you to use any Json parser (Jackson, Gson, ...)* ","title":"Regex capturing empty string along with the expected groups, want it to not to capture empty string","body":"<p>I think you use not correct regexp.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static List&lt;String&gt; getData(String str, String field) {\n    String regex = &quot;(?:\\&quot;?&quot; + field + &quot;\\&quot;?:\\&quot;?(\\\\d+)\\&quot;?)|(?:\\&quot;name\\&quot;:\\&quot;&quot;\n            + field + &quot;\\&quot;,\\&quot;value\\&quot;:\\&quot;?(\\\\d+)\\&quot;?)&quot;;\n    Matcher matcher = Pattern.compile(regex).matcher(str);\n    List&lt;String&gt; data = new ArrayList&lt;&gt;();\n\n    while (matcher.find()) {\n        data.add(Optional.ofNullable(matcher.group(1))\n                         .orElseGet(() -&gt; matcher.group(2)));\n    }\n\n    return data;\n}\n</code></pre>\n<p><em>Output:</em></p>\n<pre><code>500\n12345678900987654321\n500\n12345678900987654321\n</code></pre>\n<p><em><strong>P.S.</strong> I think parsing json with regexpis a strategically bad idea. I recommend you to use any Json parser (Jackson, Gson, ...)</em></p>\n"}],"owner":{"account_id":5777968,"reputation":45,"user_id":4559517,"display_name":"Thakur Sahab"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":90,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":4,"score":0,"last_activity_date":1689849633,"creation_date":1689830871,"question_id":76726907,"body_markdown":"I built a regex to capture the value from the pattern, where pattern is to identify the json and fetch value from it. But along with the expected groups, it is also capturing the empty strings in the group.\r\n\r\nRegex: \r\n``\r\n(?&lt;=((?i)(finInstKey)&quot;:)[&quot;]?)(.*?)(?=[&quot;|,|}])|(?&lt;=&quot;((?i)finInstKey&quot;,&quot;value&quot;:)[&quot;]?)(.*?)(?=[&quot;|,|}])\r\n``\r\n\r\ninput: \r\n1. {&quot;finInstKey&quot;:500},{&quot;name&quot;:&quot;finInstKey&quot;,&quot;value&quot;:12345678900987654321}\r\n2. {finInstKey&quot;:&quot;500&quot;},{&quot;name&quot;:&quot;finInstKey&quot;,&quot;value&quot;:&quot;12345678900987654321&quot;}\r\n\r\nfor these inputs, input 2 also captures the empty string along with the expected values.\r\n\r\nactual output:\r\n```\r\n500\r\n12345678900987654321\r\n\r\n500\r\n\r\n12345678900987654321\r\n```\r\n\r\nexpected output:\r\n```\r\n500\r\n12345678900987654321\r\n500\r\n12345678900987654321\r\n```\r\n\r\nAs of now, I have handled it manually in the Java code, but it would be nice if regex won&#39;t capture the empty strings.\r\nwhat changes should I make in the regex to get expected output.\r\n\r\n\r\n**Mainly, I want this to replaceAll groups with masked value &quot;****&quot;.**\r\n\r\n\r\nMy piece of code:\r\n```\r\npublic class RegexTester {\r\n    private static final String regex = &quot;(?&lt;=((?i)(%s)\\&quot;:)[\\&quot;]?)(.*?)(?=[\\&quot;|,|}])|(?&lt;=\\&quot;((?i)%s\\&quot;,\\&quot;value\\&quot;:)[\\&quot;]?)(.*?)(?=[\\&quot;|,|}])&quot;;\r\n\r\n    public static void main(String[] args) {\r\n        String field = &quot;finInstKey&quot;;\r\n        String input = &quot;{\\&quot;finInstKey\\&quot;:500},{\\&quot;name\\&quot;:\\&quot;finInstKey\\&quot;,\\&quot;value\\&quot;:12345678900987654321}{finInstKey\\&quot;:\\&quot;500\\&quot;},{\\&quot;name\\&quot;:\\&quot;finInstKey\\&quot;,\\&quot;value\\&quot;:\\&quot;12345678900987654321\\&quot;}&quot;;\r\n        try {\r\n            Pattern pattern = Pattern.compile(String.format(regex, field, field));\r\n            Matcher matcher = pattern.matcher(input);\r\n//            System.out.println(matcher.replaceAll(&quot;****&quot;));\r\n            while (matcher.find()) {\r\n                System.out.println(matcher.group());\r\n            }\r\n        } catch (Exception e) {\r\n            System.err.println(e);\r\n        }\r\n\r\n    }\r\n\r\n}\r\n```","title":"Regex capturing empty string along with the expected groups, want it to not to capture empty string","body":"<p>I built a regex to capture the value from the pattern, where pattern is to identify the json and fetch value from it. But along with the expected groups, it is also capturing the empty strings in the group.</p>\n<p>Regex:\n<code>(?&lt;=((?i)(finInstKey)&quot;:)[&quot;]?)(.*?)(?=[&quot;|,|}])|(?&lt;=&quot;((?i)finInstKey&quot;,&quot;value&quot;:)[&quot;]?)(.*?)(?=[&quot;|,|}])</code></p>\n<p>input:</p>\n<ol>\n<li>{&quot;finInstKey&quot;:500},{&quot;name&quot;:&quot;finInstKey&quot;,&quot;value&quot;:12345678900987654321}</li>\n<li>{finInstKey&quot;:&quot;500&quot;},{&quot;name&quot;:&quot;finInstKey&quot;,&quot;value&quot;:&quot;12345678900987654321&quot;}</li>\n</ol>\n<p>for these inputs, input 2 also captures the empty string along with the expected values.</p>\n<p>actual output:</p>\n<pre><code>500\n12345678900987654321\n\n500\n\n12345678900987654321\n</code></pre>\n<p>expected output:</p>\n<pre><code>500\n12345678900987654321\n500\n12345678900987654321\n</code></pre>\n<p>As of now, I have handled it manually in the Java code, but it would be nice if regex won't capture the empty strings.\nwhat changes should I make in the regex to get expected output.</p>\n<p><strong>Mainly, I want this to replaceAll groups with masked value &quot;****&quot;.</strong></p>\n<p>My piece of code:</p>\n<pre><code>public class RegexTester {\n    private static final String regex = &quot;(?&lt;=((?i)(%s)\\&quot;:)[\\&quot;]?)(.*?)(?=[\\&quot;|,|}])|(?&lt;=\\&quot;((?i)%s\\&quot;,\\&quot;value\\&quot;:)[\\&quot;]?)(.*?)(?=[\\&quot;|,|}])&quot;;\n\n    public static void main(String[] args) {\n        String field = &quot;finInstKey&quot;;\n        String input = &quot;{\\&quot;finInstKey\\&quot;:500},{\\&quot;name\\&quot;:\\&quot;finInstKey\\&quot;,\\&quot;value\\&quot;:12345678900987654321}{finInstKey\\&quot;:\\&quot;500\\&quot;},{\\&quot;name\\&quot;:\\&quot;finInstKey\\&quot;,\\&quot;value\\&quot;:\\&quot;12345678900987654321\\&quot;}&quot;;\n        try {\n            Pattern pattern = Pattern.compile(String.format(regex, field, field));\n            Matcher matcher = pattern.matcher(input);\n//            System.out.println(matcher.replaceAll(&quot;****&quot;));\n            while (matcher.find()) {\n                System.out.println(matcher.group());\n            }\n        } catch (Exception e) {\n            System.err.println(e);\n        }\n\n    }\n\n}\n</code></pre>\n"},{"tags":["javascript","java","android","react-native","kotlin"],"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1689787393,"post_id":76723788,"comment_id":135264306,"body_markdown":"&quot;*Please provide any reference documentation or article.*&quot; - [Questions asking us to recommend or find a book, tool, software library, **tutorial or other off-site resource** are **off-topic** for Stack Overflow as they tend to attract opinionated answers and spam. Instead, describe the problem and what has been done so far to solve it.](https://stackoverflow.com/help/on-topic)","body":"&quot;<i>Please provide any reference documentation or article.</i>&quot; - <a href=\"https://stackoverflow.com/help/on-topic\">Questions asking us to recommend or find a book, tool, software library, <b>tutorial or other off-site resource</b> are <b>off-topic</b> for Stack Overflow as they tend to attract opinionated answers and spam. Instead, describe the problem and what has been done so far to solve it.</a>"}],"owner":{"account_id":20520945,"reputation":36,"user_id":15060547,"display_name":"sai rohith"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":62,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689849513,"creation_date":1689787200,"question_id":76723788,"body_markdown":"Is it possible to recording the call from react native app? I want to record the outgoing call from React Native App in Android.\r\n\r\nBy using **React Native Call Detection** package. I am able to find outgoing and incoming call. But I am not able to find package for record call from React Native app.","title":"React Native Call recording for Android","body":"<p>Is it possible to recording the call from react native app? I want to record the outgoing call from React Native App in Android.</p>\n<p>By using <strong>React Native Call Detection</strong> package. I am able to find outgoing and incoming call. But I am not able to find package for record call from React Native app.</p>\n"},{"tags":["java","android","mms"],"owner":{"account_id":29055758,"reputation":1,"user_id":22257580,"display_name":"4Ls"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":18,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689848999,"creation_date":1689848999,"question_id":76728965,"body_markdown":"How can I send and receive MMS messages in the background?\r\n\r\nHi, I&#39;d like to synchronize my application (Android Studio/java) on two phones with MMS, but I don&#39;t know how to do it. I&#39;d like to understand how to do it step by step.\r\nWho can help me? \r\nI&#39;m a bit lost with all the interfaces we need and who does what.\r\n\r\nThanks for your help\r\n\r\n\r\nI send and receive text messages but that&#39;s not what I want because it&#39;s short, and I want to send a picture.\r\nI&#39;m not very good at networking.","title":"How can I send and receive MMS messages in the background?","body":"<p>How can I send and receive MMS messages in the background?</p>\n<p>Hi, I'd like to synchronize my application (Android Studio/java) on two phones with MMS, but I don't know how to do it. I'd like to understand how to do it step by step.\nWho can help me?\nI'm a bit lost with all the interfaces we need and who does what.</p>\n<p>Thanks for your help</p>\n<p>I send and receive text messages but that's not what I want because it's short, and I want to send a picture.\nI'm not very good at networking.</p>\n"},{"tags":["java","hibernate"],"owner":{"account_id":7447122,"reputation":13,"user_id":5662935,"display_name":"Ravi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689848860,"creation_date":1689848765,"question_id":76728937,"body_markdown":"I have a weak entity, which has foreign key, now i want one more column of this table to work as key along with foreign key to uniquely identify each row, how this can be achieved in hibernate? \r\n\r\n    class Task{\r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = &quot;trs_generator&quot;)\r\n        @SequenceGenerator(\r\n            name = &quot;trs_generator&quot;, sequenc\r\n    eName = &quot;TaskRunningStatus_SEQ&quot;, allocationSize = 1)\r\n        @Column(nullable=false, insertable = false, updatable = false)\r\n        private Long taskID;\r\n        \r\n        @ElementCollection(fetch = FetchType.LAZY)\r\n        @CollectionTable(name = &quot;identifier&quot;, joinColumns = @JoinColumn(name = &quot;task_id&quot;))\r\n        @Setter\r\n        private List&lt;Identifier&gt; maxRecord;\r\n        \r\n        @ElementCollection(fetch = FetchType.LAZY)\r\n        @CollectionTable(name = &quot;identifier&quot;, joinColumns = @JoinColumn(name = &quot;task_id&quot;))\r\n        @Setter\r\n        private List&lt;Identifier&gt; batchDoneRecord;\r\n    }\r\n    \r\n    public class Identifier {\r\n    \r\n        private String key;\r\n        private String value;\r\n        private RecordType recordType;\r\n    \r\n        public enum RecordType{\r\n            OFFSET, MAX\r\n        }\r\n        public Identifier(final String key, final String value, final RecordType recordType) {\r\n            this.key = key;\r\n            this.value = value;\r\n            this.recordType = recordType;\r\n        }\r\n    }`\r\n\r\nIdentifier tables data look as below\r\n[![enter image description here](https://i.stack.imgur.com/irSei.png)](https://i.stack.imgur.com/irSei.png)\r\n\r\nNow after saving data in Task table for maxRecord(id,10,MAX) and batchDoneRecord(id,3,OFFSET). Later while fetching maxRecord or batchDoneRecord, it is returning all record for both as it is querying based on taskId.\r\nThis issue will be resolved if query is done based on both columns taskId and ReocrdType. How this can be achieved in hibernate?","title":"Weak entity with no primary key - hibernate","body":"<p>I have a weak entity, which has foreign key, now i want one more column of this table to work as key along with foreign key to uniquely identify each row, how this can be achieved in hibernate?</p>\n<pre><code>class Task{\n    @Id\n    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = &quot;trs_generator&quot;)\n    @SequenceGenerator(\n        name = &quot;trs_generator&quot;, sequenc\neName = &quot;TaskRunningStatus_SEQ&quot;, allocationSize = 1)\n    @Column(nullable=false, insertable = false, updatable = false)\n    private Long taskID;\n    \n    @ElementCollection(fetch = FetchType.LAZY)\n    @CollectionTable(name = &quot;identifier&quot;, joinColumns = @JoinColumn(name = &quot;task_id&quot;))\n    @Setter\n    private List&lt;Identifier&gt; maxRecord;\n    \n    @ElementCollection(fetch = FetchType.LAZY)\n    @CollectionTable(name = &quot;identifier&quot;, joinColumns = @JoinColumn(name = &quot;task_id&quot;))\n    @Setter\n    private List&lt;Identifier&gt; batchDoneRecord;\n}\n\npublic class Identifier {\n\n    private String key;\n    private String value;\n    private RecordType recordType;\n\n    public enum RecordType{\n        OFFSET, MAX\n    }\n    public Identifier(final String key, final String value, final RecordType recordType) {\n        this.key = key;\n        this.value = value;\n        this.recordType = recordType;\n    }\n}`\n</code></pre>\n<p>Identifier tables data look as below\n<a href=\"https://i.stack.imgur.com/irSei.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/irSei.png\" alt=\"enter image description here\" /></a></p>\n<p>Now after saving data in Task table for maxRecord(id,10,MAX) and batchDoneRecord(id,3,OFFSET). Later while fetching maxRecord or batchDoneRecord, it is returning all record for both as it is querying based on taskId.\nThis issue will be resolved if query is done based on both columns taskId and ReocrdType. How this can be achieved in hibernate?</p>\n"},{"tags":["java","android-studio","signed-apk","gradle-dependencies"],"comments":[{"owner":{"account_id":17096091,"reputation":141,"user_id":12371049,"display_name":"Asif Mehmood"},"score":1,"creation_date":1608789567,"post_id":65404037,"comment_id":115685483,"body_markdown":"** I have got the solution of this problem ** \n\nRemove \n { shrinkResources true\n            minifyEnabled true }    \n**And  add  **  `\n{signingConfig signingConfigs.debug\n            useProguard true\n\n            minifyEnabled false}  \n**its working fine for me  this solution is working fine remove all bugs  on created signed apk**","body":"** I have got the solution of this problem **   Remove   { shrinkResources true             minifyEnabled true }     <b>And  add  **  ` {signingConfig signingConfigs.debug             useProguard true              minifyEnabled false}   **its working fine for me  this solution is working fine remove all bugs  on created signed apk</b>"},{"owner":{"account_id":2812752,"reputation":4008,"user_id":2418642,"display_name":"sgjesse"},"score":1,"creation_date":1609831473,"post_id":65404037,"comment_id":115937577,"body_markdown":"Asif, turning off minification (`minifyEnabled false`) is clearly a way to get rid of the `ClassCastException` you see, as that happens in R8 compilation. If possible could you open an issue on https://issuetracker.google.com/issues/new?component=326788 with more information on the version of Android Studio where you see this?","body":"Asif, turning off minification (<code>minifyEnabled false</code>) is clearly a way to get rid of the <code>ClassCastException</code> you see, as that happens in R8 compilation. If possible could you open an issue on <a href=\"https://issuetracker.google.com/issues/new?component=326788\" rel=\"nofollow noreferrer\">issuetracker.google.com/issues/new?component=326788</a> with more information on the version of Android Studio where you see this?"},{"owner":{"account_id":17096091,"reputation":141,"user_id":12371049,"display_name":"Asif Mehmood"},"score":0,"creation_date":1609837016,"post_id":65404037,"comment_id":115939621,"body_markdown":"@sgjesse  yes  i resolve this issue   i use  &#39;useProguard true minifyEnabled false&#39;","body":"@sgjesse  yes  i resolve this issue   i use  &#39;useProguard true minifyEnabled false&#39;"}],"answers":[{"tags":[],"owner":{"account_id":2812752,"reputation":4008,"user_id":2418642,"display_name":"sgjesse"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1609942166,"creation_date":1609942166,"answer_id":65597305,"question_id":65404037,"body_markdown":"This is the R8 issue tracked in http://issuetracker.google.com/175132220.","title":"ClassCastException while building signed Apk","body":"<p>This is the R8 issue tracked in <a href=\"http://issuetracker.google.com/175132220\" rel=\"nofollow noreferrer\">http://issuetracker.google.com/175132220</a>.</p>\n"},{"tags":[],"owner":{"account_id":2065396,"reputation":314,"user_id":1840981,"display_name":"Kashinath"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689848565,"creation_date":1689848565,"answer_id":76728911,"question_id":65404037,"body_markdown":"    buildTypes {\r\n        release {\r\n            minifyEnabled false\r\n            proguardFiles getDefaultProguardFile(&#39;proguard-android.txt&#39;), &#39;proguard-rules.pro&#39;\r\n            ndk {\r\n                debugSymbolLevel &#39;SYMBOL_TABLE&#39;\r\n            }\r\n        }\r\n    }\r\n\r\nSet minifyEnabled false solved my issue .go to build.gradle and do this change\r\n","title":"ClassCastException while building signed Apk","body":"<pre><code>buildTypes {\n    release {\n        minifyEnabled false\n        proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n        ndk {\n            debugSymbolLevel 'SYMBOL_TABLE'\n        }\n    }\n}\n</code></pre>\n<p>Set minifyEnabled false solved my issue .go to build.gradle and do this change</p>\n"}],"owner":{"account_id":17096091,"reputation":141,"user_id":12371049,"display_name":"Asif Mehmood"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":808,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1689848565,"creation_date":1608617782,"question_id":65404037,"body_markdown":"\r\n**My gradle dependency is**\r\n\r\n         repositories {\r\n            google()\r\n            mavenCentral()\r\n    //        maven { url &quot;http://maven.ghostscript.com&quot; }\r\n            maven { url &#39;https://jitpack.io&#39; }\r\n            jcenter()\r\n        }\r\n        dependencies {\r\n            classpath &#39;com.android.tools.build:gradle:4.1.1&#39;\r\n            classpath &quot;org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version&quot;\r\n            // NOTE: Do not place your application dependencies here; they belong\r\n            // in the individual module build.gradle files\r\n        }\r\n\r\n\r\n\r\n**Use these app dependency**\r\n\r\n         buildTypes {\r\n            release {\r\n                shrinkResources true\r\n                minifyEnabled true\r\n                proguardFiles getDefaultProguardFile(&#39;proguard-android-optimize.txt&#39;), &#39;proguard-rules.pro&#39;\r\n    \r\n            }\r\n        }\r\n        compileOptions {\r\n            sourceCompatibility JavaVersion.VERSION_1_8\r\n            targetCompatibility JavaVersion.VERSION_1_8\r\n        }\r\n    \r\n    \r\n        packagingOptions {\r\n            exclude &#39;META-INF/DEPENDENCIES&#39;\r\n            exclude &#39;META-INF/NOTICE&#39;\r\n            exclude &#39;META-INF/NOTICE.txt&#39;\r\n            exclude &#39;META-INF/LICENSE&#39;\r\n            exclude &#39;META-INF/LICENSE.txt&#39;\r\n        }\r\n        kotlinOptions {\r\n            jvmTarget = &#39;1.8&#39;\r\n        }\r\n    }\r\n    \r\n    dependencies {\r\n        implementation fileTree(dir: &quot;libs&quot;, include: [&quot;*.jar&quot;])\r\n        implementation &#39;androidx.appcompat:appcompat:1.2.0&#39;\r\n        implementation &#39;androidx.constraintlayout:constraintlayout:2.0.4&#39;\r\n        implementation &quot;org.jetbrains.kotlin:kotlin-stdlib:$kotlin_version&quot;\r\n        implementation &#39;androidx.core:core-ktx:1.3.2&#39;\r\n        implementation &#39;androidx.recyclerview:recyclerview:1.1.0&#39;\r\n        //implementation files(&#39;libs/aspose-slides-20.6-android.via.java.jar&#39;)\r\n        androidTestImplementation &#39;androidx.test.ext:junit:1.1.2&#39;\r\n        androidTestImplementation &#39;androidx.test.espresso:espresso-core:3.3.0&#39;\r\n        implementation &#39;com.google.android.material:material:1.2.1&#39;\r\n        implementation &#39;com.github.bumptech.glide:glide:4.11.0&#39;\r\n        annotationProcessor &#39;com.github.bumptech.glide:compiler:4.11.0&#39;\r\n        implementation &#39;commons-io:commons-io:20030203.000550&#39;\r\n        implementation &quot;com.pdfview:pdfview-android:1.0.0&quot;\r\n    \r\n    \r\n        //implementation &#39;com.android.support:multidex:1.0.3&#39;\r\n        // https://github.com/googlesamples/easypermissions\r\n    //    implementation &#39;pub.devrel:easypermissions:1.1.0&#39;\r\n        implementation (&#39;com.github.junrar:junrar:7.4.0&#39;) {\r\n            [&#39;org.apache.commons&#39;,&#39;commons-logging&#39;].each {\r\n                exclude group: &quot;$it&quot;\r\n            }\r\n        }\r\n    \r\n        implementation &#39;io.reactivex.rxjava3:rxandroid:3.0.0&#39;\r\n        // Because RxAndroid releases are few and far between, it is recommended you also\r\n        // explicitly depend on RxJava&#39;s latest version for bug fixes and new features.\r\n        // (see https://github.com/ReactiveX/RxJava/releases for latest 3.x.x version)\r\n        implementation &#39;io.reactivex.rxjava3:rxjava:3.0.8&#39;\r\n    \r\n    //    implementation files(&#39;libs/itsrts_pptviewer.jar&#39;)\r\n        implementation &#39;com.agrawalsuneet.androidlibs:dotsloader:1.4&#39;\r\n        implementation &#39;com.google.android.gms:play-services-ads:19.6.0&#39;\r\n    \r\n    \r\n        implementation &#39;org.apache.commons:commons-lang3:3.11&#39;\r\n        implementation files(&#39;libs/jxl.jar&#39;)\r\n        implementation files(&#39;libs/aspose-words-17.2.0-android.jar&#39;)\r\n        implementation &quot;com.folioreader:folioreader:0.5.4&quot;\r\n    \r\n    }\r\n\r\nWhile creating release signed Apk this error occurs, how can I solve it? Cannot solve these error while delete gradle cache and also invalidate and restart Android Studio. \r\n\r\n&gt; java.lang.ClassCastException: com.android.tools.r8.s.b.C cannot be cast to com.android.tools.r8.s.b.B\r\n&gt;\r\n&gt; com.android.tools.r8.CompilationFailedException: Compilation failed to complete, position:Lorg/readium/r2/streamer/parser/epub/OPFParser;parseSpine(Lorg/readium/r2/shared/parser/xml/Node;Lorg/readium/r2/shared/Publication;)V, origin: C:\\Users\\Asif Malik\\.gradle\\caches\\transforms2\\files2.1\\202fad4fee5b15436e55e2114f613e17\\jetified-r2streamerkotlin1.0.42runtime.jar:org/readium/r2/streamer/parser/epub/OPFParser.class\r\n&gt;\r\n&gt; com.android.tools.r8.s.b.C cannot be cast to com.android.tools.r8.s.b.B\r\n&gt;\r\n&gt; Gradle&#39;s dependency cache may be corrupt (this sometimes occurs after a network connection timeout.)\r\n&gt;\r\n&gt; Re-download dependencies and sync project (requires network)\r\n&gt;\r\n&gt; The state of a Gradle build process (daemon) may be corrupt\r\n","title":"ClassCastException while building signed Apk","body":"<p><strong>My gradle dependency is</strong></p>\n<pre><code>     repositories {\n        google()\n        mavenCentral()\n//        maven { url &quot;http://maven.ghostscript.com&quot; }\n        maven { url 'https://jitpack.io' }\n        jcenter()\n    }\n    dependencies {\n        classpath 'com.android.tools.build:gradle:4.1.1'\n        classpath &quot;org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version&quot;\n        // NOTE: Do not place your application dependencies here; they belong\n        // in the individual module build.gradle files\n    }\n</code></pre>\n<p><strong>Use these app dependency</strong></p>\n<pre><code>     buildTypes {\n        release {\n            shrinkResources true\n            minifyEnabled true\n            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\n\n        }\n    }\n    compileOptions {\n        sourceCompatibility JavaVersion.VERSION_1_8\n        targetCompatibility JavaVersion.VERSION_1_8\n    }\n\n\n    packagingOptions {\n        exclude 'META-INF/DEPENDENCIES'\n        exclude 'META-INF/NOTICE'\n        exclude 'META-INF/NOTICE.txt'\n        exclude 'META-INF/LICENSE'\n        exclude 'META-INF/LICENSE.txt'\n    }\n    kotlinOptions {\n        jvmTarget = '1.8'\n    }\n}\n\ndependencies {\n    implementation fileTree(dir: &quot;libs&quot;, include: [&quot;*.jar&quot;])\n    implementation 'androidx.appcompat:appcompat:1.2.0'\n    implementation 'androidx.constraintlayout:constraintlayout:2.0.4'\n    implementation &quot;org.jetbrains.kotlin:kotlin-stdlib:$kotlin_version&quot;\n    implementation 'androidx.core:core-ktx:1.3.2'\n    implementation 'androidx.recyclerview:recyclerview:1.1.0'\n    //implementation files('libs/aspose-slides-20.6-android.via.java.jar')\n    androidTestImplementation 'androidx.test.ext:junit:1.1.2'\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.3.0'\n    implementation 'com.google.android.material:material:1.2.1'\n    implementation 'com.github.bumptech.glide:glide:4.11.0'\n    annotationProcessor 'com.github.bumptech.glide:compiler:4.11.0'\n    implementation 'commons-io:commons-io:20030203.000550'\n    implementation &quot;com.pdfview:pdfview-android:1.0.0&quot;\n\n\n    //implementation 'com.android.support:multidex:1.0.3'\n    // https://github.com/googlesamples/easypermissions\n//    implementation 'pub.devrel:easypermissions:1.1.0'\n    implementation ('com.github.junrar:junrar:7.4.0') {\n        ['org.apache.commons','commons-logging'].each {\n            exclude group: &quot;$it&quot;\n        }\n    }\n\n    implementation 'io.reactivex.rxjava3:rxandroid:3.0.0'\n    // Because RxAndroid releases are few and far between, it is recommended you also\n    // explicitly depend on RxJava's latest version for bug fixes and new features.\n    // (see https://github.com/ReactiveX/RxJava/releases for latest 3.x.x version)\n    implementation 'io.reactivex.rxjava3:rxjava:3.0.8'\n\n//    implementation files('libs/itsrts_pptviewer.jar')\n    implementation 'com.agrawalsuneet.androidlibs:dotsloader:1.4'\n    implementation 'com.google.android.gms:play-services-ads:19.6.0'\n\n\n    implementation 'org.apache.commons:commons-lang3:3.11'\n    implementation files('libs/jxl.jar')\n    implementation files('libs/aspose-words-17.2.0-android.jar')\n    implementation &quot;com.folioreader:folioreader:0.5.4&quot;\n\n}\n</code></pre>\n<p>While creating release signed Apk this error occurs, how can I solve it? Cannot solve these error while delete gradle cache and also invalidate and restart Android Studio.</p>\n<blockquote>\n<p>java.lang.ClassCastException: com.android.tools.r8.s.b.C cannot be cast to com.android.tools.r8.s.b.B</p>\n<p>com.android.tools.r8.CompilationFailedException: Compilation failed to complete, position:Lorg/readium/r2/streamer/parser/epub/OPFParser;parseSpine(Lorg/readium/r2/shared/parser/xml/Node;Lorg/readium/r2/shared/Publication;)V, origin: C:\\Users\\Asif Malik.gradle\\caches\\transforms2\\files2.1\\202fad4fee5b15436e55e2114f613e17\\jetified-r2streamerkotlin1.0.42runtime.jar:org/readium/r2/streamer/parser/epub/OPFParser.class</p>\n<p>com.android.tools.r8.s.b.C cannot be cast to com.android.tools.r8.s.b.B</p>\n<p>Gradle's dependency cache may be corrupt (this sometimes occurs after a network connection timeout.)</p>\n<p>Re-download dependencies and sync project (requires network)</p>\n<p>The state of a Gradle build process (daemon) may be corrupt</p>\n</blockquote>\n"},{"tags":["java","maven","jenkins"],"comments":[{"owner":{"account_id":4473979,"reputation":105,"user_id":3639526,"accept_rate":80,"display_name":"Pravin Virkud"},"score":0,"creation_date":1689850109,"post_id":76728867,"comment_id":135273009,"body_markdown":"More Info : I am using maven 3.6.0 with JDK 11","body":"More Info : I am using maven 3.6.0 with JDK 11"}],"owner":{"account_id":4473979,"reputation":105,"user_id":3639526,"accept_rate":80,"display_name":"Pravin Virkud"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1689848395,"creation_date":1689848219,"question_id":76728867,"body_markdown":"I have Jenkins Master slave configuration setup. Where Both Master and Slave are on running on Ubuntu. I have schedule one maven job on the slave machine. When I trigger this job I am getting below error\r\n\r\n    Parsing POMs\r\n    ERROR: Failed to parse POMs\r\n    java.io.IOException: Remote call on Jenkins-Slave-Test-Automation failed\r\n    \tat hudson.remoting.Channel.call(Channel.java:1004)\r\n    \tat hudson.FilePath.act(FilePath.java:1192)\r\n    \tat hudson.FilePath.act(FilePath.java:1181)\r\n    \tat hudson.maven.MavenModuleSetBuild$MavenModuleSetBuildExecution.parsePoms(MavenModuleSetBuild.java:985)\r\n    \tat hudson.maven.MavenModuleSetBuild$MavenModuleSetBuildExecution.doRun(MavenModuleSetBuild.java:689)\r\n    \tat hudson.model.AbstractBuild$AbstractBuildExecution.run(AbstractBuild.java:526)\r\n    \tat hudson.model.Run.execute(Run.java:1900)\r\n    \tat hudson.maven.MavenModuleSetBuild.run(MavenModuleSetBuild.java:543)\r\n    \tat hudson.model.ResourceController.execute(ResourceController.java:101)\r\n    \tat hudson.model.Executor.run(Executor.java:442)\r\n    Caused by: java.lang.NoClassDefFoundError: org/apache/maven/artifact/versioning/ComparableVersion\r\n    \tat hudson.maven.MavenUtil.maven3orLater(MavenUtil.java:276)\r\n    \tat hudson.maven.MavenModuleSetBuild$PomParser.invoke(MavenModuleSetBuild.java:1301)\r\n    \tat hudson.maven.MavenModuleSetBuild$PomParser.invoke(MavenModuleSetBuild.java:1124)\r\n    \tat hudson.FilePath$FileCallableWrapper.call(FilePath.java:3578)\r\n    \tat hudson.remoting.UserRequest.perform(UserRequest.java:211)\r\n    \tat hudson.remoting.UserRequest.perform(UserRequest.java:54)\r\n    \tat hudson.remoting.Request$2.run(Request.java:377)\r\n    \tat hudson.remoting.InterceptingExecutorService.lambda$wrap$0(InterceptingExecutorService.java:78)\r\n    \tat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\r\n    \tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\r\n    \tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\r\n    \tat hudson.remoting.Engine$1.lambda$newThread$0(Engine.java:125)\r\n    \tat java.base/java.lang.Thread.run(Thread.java:829)\r\n    \tSuppressed: hudson.remoting.Channel$CallSiteStackTrace: Remote call to Jenkins-Slave-Test-Automation\r\n    \t\tat hudson.remoting.Channel.attachCallSiteStackTrace(Channel.java:1784)\r\n    \t\tat hudson.remoting.UserRequest$ExceptionResponse.retrieve(UserRequest.java:356)\r\n    \t\tat hudson.remoting.Channel.call(Channel.java:1000)\r\n    \t\tat hudson.FilePath.act(FilePath.java:1192)\r\n    \t\tat hudson.FilePath.act(FilePath.java:1181)\r\n    \t\tat hudson.maven.MavenModuleSetBuild$MavenModuleSetBuildExecution.parsePoms(MavenModuleSetBuild.java:985)\r\n    \t\tat hudson.maven.MavenModuleSetBuild$MavenModuleSetBuildExecution.doRun(MavenModuleSetBuild.java:689)\r\n    \t\tat hudson.model.AbstractBuild$AbstractBuildExecution.run(AbstractBuild.java:526)\r\n    \t\tat hudson.model.Run.execute(Run.java:1900)\r\n    \t\tat hudson.maven.MavenModuleSetBuild.run(MavenModuleSetBuild.java:543)\r\n    \t\tat hudson.model.ResourceController.execute(ResourceController.java:101)\r\n    \t\tat hudson.model.Executor.run(Executor.java:442)\r\n    Finished: FAILURE\r\n\r\nif I run the pom.xml file from the terminal of slave machine, it is running without any issue. I am suspecting any permission related issues on jenkins slave machine.\r\n\r\nHow to resolve this problem?\r\n","title":"Jenkins maven job not running on linux ubuntu slave","body":"<p>I have Jenkins Master slave configuration setup. Where Both Master and Slave are on running on Ubuntu. I have schedule one maven job on the slave machine. When I trigger this job I am getting below error</p>\n<pre><code>Parsing POMs\nERROR: Failed to parse POMs\njava.io.IOException: Remote call on Jenkins-Slave-Test-Automation failed\n    at hudson.remoting.Channel.call(Channel.java:1004)\n    at hudson.FilePath.act(FilePath.java:1192)\n    at hudson.FilePath.act(FilePath.java:1181)\n    at hudson.maven.MavenModuleSetBuild$MavenModuleSetBuildExecution.parsePoms(MavenModuleSetBuild.java:985)\n    at hudson.maven.MavenModuleSetBuild$MavenModuleSetBuildExecution.doRun(MavenModuleSetBuild.java:689)\n    at hudson.model.AbstractBuild$AbstractBuildExecution.run(AbstractBuild.java:526)\n    at hudson.model.Run.execute(Run.java:1900)\n    at hudson.maven.MavenModuleSetBuild.run(MavenModuleSetBuild.java:543)\n    at hudson.model.ResourceController.execute(ResourceController.java:101)\n    at hudson.model.Executor.run(Executor.java:442)\nCaused by: java.lang.NoClassDefFoundError: org/apache/maven/artifact/versioning/ComparableVersion\n    at hudson.maven.MavenUtil.maven3orLater(MavenUtil.java:276)\n    at hudson.maven.MavenModuleSetBuild$PomParser.invoke(MavenModuleSetBuild.java:1301)\n    at hudson.maven.MavenModuleSetBuild$PomParser.invoke(MavenModuleSetBuild.java:1124)\n    at hudson.FilePath$FileCallableWrapper.call(FilePath.java:3578)\n    at hudson.remoting.UserRequest.perform(UserRequest.java:211)\n    at hudson.remoting.UserRequest.perform(UserRequest.java:54)\n    at hudson.remoting.Request$2.run(Request.java:377)\n    at hudson.remoting.InterceptingExecutorService.lambda$wrap$0(InterceptingExecutorService.java:78)\n    at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\n    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\n    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\n    at hudson.remoting.Engine$1.lambda$newThread$0(Engine.java:125)\n    at java.base/java.lang.Thread.run(Thread.java:829)\n    Suppressed: hudson.remoting.Channel$CallSiteStackTrace: Remote call to Jenkins-Slave-Test-Automation\n        at hudson.remoting.Channel.attachCallSiteStackTrace(Channel.java:1784)\n        at hudson.remoting.UserRequest$ExceptionResponse.retrieve(UserRequest.java:356)\n        at hudson.remoting.Channel.call(Channel.java:1000)\n        at hudson.FilePath.act(FilePath.java:1192)\n        at hudson.FilePath.act(FilePath.java:1181)\n        at hudson.maven.MavenModuleSetBuild$MavenModuleSetBuildExecution.parsePoms(MavenModuleSetBuild.java:985)\n        at hudson.maven.MavenModuleSetBuild$MavenModuleSetBuildExecution.doRun(MavenModuleSetBuild.java:689)\n        at hudson.model.AbstractBuild$AbstractBuildExecution.run(AbstractBuild.java:526)\n        at hudson.model.Run.execute(Run.java:1900)\n        at hudson.maven.MavenModuleSetBuild.run(MavenModuleSetBuild.java:543)\n        at hudson.model.ResourceController.execute(ResourceController.java:101)\n        at hudson.model.Executor.run(Executor.java:442)\nFinished: FAILURE\n</code></pre>\n<p>if I run the pom.xml file from the terminal of slave machine, it is running without any issue. I am suspecting any permission related issues on jenkins slave machine.</p>\n<p>How to resolve this problem?</p>\n"},{"tags":["java","spring","kubernetes","kubernetes-helm"],"comments":[{"owner":{"account_id":13863020,"reputation":137023,"user_id":10008173,"display_name":"David Maze"},"score":0,"creation_date":1689848739,"post_id":76727325,"comment_id":135272772,"body_markdown":"The Vault Agent sidecar is keeping your Job from completing.  [hashicorp/vault#11089](https://github.com/hashicorp/vault/issues/11089) describes the situation a little further.  Does your Job need secrets from Vault?  [Terminate istio sidecar istio-proxy for a kubernetes job / cronjob](https://stackoverflow.com/questions/54921054/terminate-istio-sidecar-istio-proxy-for-a-kubernetes-job-cronjob) is a similar question for a different technology with injected sidecars and you also might find inspiration there (but not a copy-paste answer).","body":"The Vault Agent sidecar is keeping your Job from completing.  <a href=\"https://github.com/hashicorp/vault/issues/11089\" rel=\"nofollow noreferrer\">hashicorp/vault#11089</a> describes the situation a little further.  Does your Job need secrets from Vault?  <a href=\"https://stackoverflow.com/questions/54921054/terminate-istio-sidecar-istio-proxy-for-a-kubernetes-job-cronjob\">Terminate istio sidecar istio-proxy for a kubernetes job / cronjob</a> is a similar question for a different technology with injected sidecars and you also might find inspiration there (but not a copy-paste answer)."}],"owner":{"account_id":21506127,"reputation":1,"user_id":15849474,"display_name":"aks"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":120,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689848394,"creation_date":1689835800,"question_id":76727325,"body_markdown":"I am new to Kubernetes and trying to run a data migration job before deploying my main service. To achieve this, I&#39;ve written a new &#39;job.yaml&#39; using &quot;helm.sh/hook&quot;: pre-instal.\r\n\r\nAfter deployment, from the logs of container it is clear that all migration code executed successfully.\r\n\r\nEven though the migration container completes successfully, the pre-install Job itself fails to succeed and remains in an active status. Consequently, the deployment of the main service does not proceed.\r\n\r\nI have thoroughly checked the logs and executed kubectl get events, but there are no error messages reported. I am confused about why the pre-install Job does not mark itself as successful, despite the successful completion of the migration container.\r\n\r\nCould someone kindly help me identify the root cause of this issue and provide guidance on how to ensure that the pre-install Helm hook Job succeeds after the migration container has completed its task? Your assistance is greatly appreciated. Thank you!\r\n\r\n\r\nnew **job.yaml**\r\n```yaml\r\napiVersion: batch/v1\r\nkind: Job\r\nmetadata:\r\n  name: qdm-migration-service-job\r\n  namespace: qdm\r\n  annotations:\r\n    &quot;helm.sh/hook&quot;: pre-install,pre-upgrade\r\n    &quot;helm.sh/hook-delete-policy&quot;: before-hook-creation,hook-succeeded\r\n\r\nspec:\r\n  backoffLimit: 1\r\n  template:\r\n    metadata:\r\n      labels:\r\n        app: qdm-migration-service-job-pod\r\n        app.kubernetes.io/instance: {{ .Release.Name }}\r\n    spec:\r\n      serviceAccountName: qdm\r\n      imagePullSecrets:\r\n      - name: {{dockerhubsecret}}\r\n      restartPolicy: Never\r\n      containers:\r\n      - name: qdm-migration-service\r\n        terminationMessagePath: &quot;/hook-completed&quot;\r\n        image: qdm-migration-service:1.0\r\n        imagePullPolicy: Always\r\n        securityContext:\r\n          runAsUser: 0\r\n        env:\r\n        .............\r\n        ports:\r\n          - name: http\r\n            containerPort: 8092\r\n            protocol: TCP\r\n    ```\r\n\r\n\r\n\r\n\r\n```\r\n**Application main class:**\r\n    \r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    public class QdmMigrationApp {\r\n        public static void main(String[] args) {\r\n\r\n            try {\r\n                \r\n\r\n                \r\n               // all migrations logic\r\n                  ...........\r\n                  ...........\r\n\r\n                System.out.println(&quot;QDM Migration Success!&quot;);\r\n                writeTerminationMessage();\r\n            }catch(Exception e){\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n\r\n\r\n        private static void writeTerminationMessageToFile() {\r\n            String terminationMessage = &quot;Job completed !&quot;;\r\n            String filePath = &quot;/hook-completed&quot;;\r\n\r\n            try (BufferedWriter writer = new BufferedWriter(new FileWriter(filePath))) {\r\n                writer.write(terminationMessage);\r\n            } catch (IOException e) {\r\n                logger.error(e.getMessage());\r\n                // Handle any exceptions that might occur during file writing\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n\r\n**Pod status:**\r\n\r\n\r\n&lt;!-- language: lang-none --&gt;\r\n\r\n    kubectl describe qdm-migration-service-job-s9qvs -n qdm\r\n    Name:             qdm-migration-service-job-s9qvs\r\n    Namespace:        qdm\r\n    .......\r\n    Status:           Running\r\n    Controlled By:  Job/qdm-migration-service-job\r\n    Init Containers:\r\n      copy-vault-env:\r\n        .......\r\n        State:          Terminated\r\n          Reason:       Completed\r\n          Exit Code:    0\r\n          Started:      Thu, 20 Jul 2023 10:40:35 +0530\r\n          Finished:     Thu, 20 Jul 2023 10:40:35 +0530\r\n        Ready:          True\r\n        Restart Count:  0\r\n    ..........\r\n    Containers:\r\n      vault-agent:\r\n        Container ID:  cri-o://f703a9c050a5b391fbe1c.....\r\n        Image:         docker.*******.com/qdm-images/qdm-vault:1.8.0\r\n        Image ID:      ****\r\n        Port:          &lt;none&gt;\r\n        Host Port:     &lt;none&gt;\r\n        State:          Running\r\n          Started:      Thu, 20 Jul 2023 10:40:36 +0530\r\n        Ready:          True\r\n        Restart Count:  0\r\n        Limits:\r\n          cpu:     100m\r\n          memory:  128Mi\r\n        Requests:\r\n          cpu:     100m\r\n          memory:  128Mi\r\n        Environment:\r\n          VAULT_ADDR:         https://vault.******:8200\r\n          VAULT_SKIP_VERIFY:  true\r\n      qdm-migration-service:\r\n        Container ID:  cri-o://f47d3aedc4ed6902da4459***\r\n        Image:         ****\r\n        Image ID:      ****\r\n        Port:          8092/TCP\r\n        Host Port:     0/TCP\r\n        Command:\r\n          /vault/vault-env\r\n        State:          Terminated\r\n          Reason:       Completed\r\n          Message:      Job completed successfully!\r\n          Exit Code:    0\r\n          Started:      Thu, 20 Jul 2023 10:40:47 +0530\r\n          Finished:     Thu, 20 Jul 2023 10:44:17 +0530\r\n        Ready:          False\r\n        Restart Count:  0\r\n        Limits:\r\n          cpu:     2\r\n          memory:  5Gi\r\n        Requests:\r\n          cpu:     2\r\n          memory:  4Gi\r\n        Environment:\r\n        Mounts:\r\n          /var/run/secrets/kubernetes.io/serviceaccount from kube-api-access-dbtsv (ro)\r\n          /vault/ from vault-env (rw)\r\n          /vault/secrets from agent-secrets (rw)\r\n    Conditions:\r\n      Type              Status\r\n      Initialized       True \r\n      Ready             False \r\n      ContainersReady   False \r\n      PodScheduled      True \r\n    Volumes:\r\n      .....\r\n    Tolerations:     node.kubernetes.io/not-ready:NoExecute op=Exists for 300s\r\n                     node.kubernetes.io/unreachable:NoExecute op=Exists for 300s\r\n    Events:\r\n      Type    Reason     Age   From               Message\r\n      ----    ------     ----  ----               -------\r\n      Normal  Scheduled  23m   default-scheduler  Successfully assigned qdm/qdm-migration-service-job-s9qvs to 10.1.7.123\r\n      Normal  Pulled     23m   kubelet            Container image &quot;*****&quot; already present on machine\r\n      Normal  Created    23m   kubelet            Created container copy-vault-env\r\n      Normal  Started    23m   kubelet            Started container copy-vault-env\r\n      Normal  Pulled     23m   kubelet            Container image &quot;d*******&quot; already present on machine\r\n      Normal  Created    23m   kubelet            Created container vault-agent\r\n      Normal  Started    23m   kubelet            Started container vault-agent\r\n      Normal  Pulling    23m   kubelet            Pulling image &quot;****qdm-pdb-migration-service:5.0&quot;\r\n      Normal  Pulled     23m   kubelet            Successfully pulled image &quot;****qdm-pdb-migration-service:5.0&quot; in 10.9s\r\n      Normal  Created    23m   kubelet            Created container qdm-pdb-migration-service\r\n      Normal  Started    23m   kubelet            Started container qdm-pdb-migration-service\r\n\r\n&lt;!-- end snippet --&gt;\r\n","title":"Kube pre-install Helm hook Job not succeeding after successful completion of container, and main service is not starting","body":"<p>I am new to Kubernetes and trying to run a data migration job before deploying my main service. To achieve this, I've written a new 'job.yaml' using &quot;helm.sh/hook&quot;: pre-instal.</p>\n<p>After deployment, from the logs of container it is clear that all migration code executed successfully.</p>\n<p>Even though the migration container completes successfully, the pre-install Job itself fails to succeed and remains in an active status. Consequently, the deployment of the main service does not proceed.</p>\n<p>I have thoroughly checked the logs and executed kubectl get events, but there are no error messages reported. I am confused about why the pre-install Job does not mark itself as successful, despite the successful completion of the migration container.</p>\n<p>Could someone kindly help me identify the root cause of this issue and provide guidance on how to ensure that the pre-install Helm hook Job succeeds after the migration container has completed its task? Your assistance is greatly appreciated. Thank you!</p>\n<p>new <strong>job.yaml</strong></p>\n<pre class=\"lang-yaml prettyprint-override\"><code>apiVersion: batch/v1\nkind: Job\nmetadata:\n  name: qdm-migration-service-job\n  namespace: qdm\n  annotations:\n    &quot;helm.sh/hook&quot;: pre-install,pre-upgrade\n    &quot;helm.sh/hook-delete-policy&quot;: before-hook-creation,hook-succeeded\n\nspec:\n  backoffLimit: 1\n  template:\n    metadata:\n      labels:\n        app: qdm-migration-service-job-pod\n        app.kubernetes.io/instance: {{ .Release.Name }}\n    spec:\n      serviceAccountName: qdm\n      imagePullSecrets:\n      - name: {{dockerhubsecret}}\n      restartPolicy: Never\n      containers:\n      - name: qdm-migration-service\n        terminationMessagePath: &quot;/hook-completed&quot;\n        image: qdm-migration-service:1.0\n        imagePullPolicy: Always\n        securityContext:\n          runAsUser: 0\n        env:\n        .............\n        ports:\n          - name: http\n            containerPort: 8092\n            protocol: TCP\n    ```\n\n\n\n\n</code></pre>\n<p><strong>Application main class:</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>public class QdmMigrationApp {\n    public static void main(String[] args) {\n\n        try {\n            \n\n            \n           // all migrations logic\n              ...........\n              ...........\n\n            System.out.println(&quot;QDM Migration Success!&quot;);\n            writeTerminationMessage();\n        }catch(Exception e){\n            e.printStackTrace();\n        }\n    }\n\n\n    private static void writeTerminationMessageToFile() {\n        String terminationMessage = &quot;Job completed !&quot;;\n        String filePath = &quot;/hook-completed&quot;;\n\n        try (BufferedWriter writer = new BufferedWriter(new FileWriter(filePath))) {\n            writer.write(terminationMessage);\n        } catch (IOException e) {\n            logger.error(e.getMessage());\n            // Handle any exceptions that might occur during file writing\n            e.printStackTrace();\n        }\n    }\n</code></pre>\n<p><strong>Pod status:</strong></p>\n<pre class=\"lang-none prettyprint-override\"><code>kubectl describe qdm-migration-service-job-s9qvs -n qdm\nName:             qdm-migration-service-job-s9qvs\nNamespace:        qdm\n.......\nStatus:           Running\nControlled By:  Job/qdm-migration-service-job\nInit Containers:\n  copy-vault-env:\n    .......\n    State:          Terminated\n      Reason:       Completed\n      Exit Code:    0\n      Started:      Thu, 20 Jul 2023 10:40:35 +0530\n      Finished:     Thu, 20 Jul 2023 10:40:35 +0530\n    Ready:          True\n    Restart Count:  0\n..........\nContainers:\n  vault-agent:\n    Container ID:  cri-o://f703a9c050a5b391fbe1c.....\n    Image:         docker.*******.com/qdm-images/qdm-vault:1.8.0\n    Image ID:      ****\n    Port:          &lt;none&gt;\n    Host Port:     &lt;none&gt;\n    State:          Running\n      Started:      Thu, 20 Jul 2023 10:40:36 +0530\n    Ready:          True\n    Restart Count:  0\n    Limits:\n      cpu:     100m\n      memory:  128Mi\n    Requests:\n      cpu:     100m\n      memory:  128Mi\n    Environment:\n      VAULT_ADDR:         https://vault.******:8200\n      VAULT_SKIP_VERIFY:  true\n  qdm-migration-service:\n    Container ID:  cri-o://f47d3aedc4ed6902da4459***\n    Image:         ****\n    Image ID:      ****\n    Port:          8092/TCP\n    Host Port:     0/TCP\n    Command:\n      /vault/vault-env\n    State:          Terminated\n      Reason:       Completed\n      Message:      Job completed successfully!\n      Exit Code:    0\n      Started:      Thu, 20 Jul 2023 10:40:47 +0530\n      Finished:     Thu, 20 Jul 2023 10:44:17 +0530\n    Ready:          False\n    Restart Count:  0\n    Limits:\n      cpu:     2\n      memory:  5Gi\n    Requests:\n      cpu:     2\n      memory:  4Gi\n    Environment:\n    Mounts:\n      /var/run/secrets/kubernetes.io/serviceaccount from kube-api-access-dbtsv (ro)\n      /vault/ from vault-env (rw)\n      /vault/secrets from agent-secrets (rw)\nConditions:\n  Type              Status\n  Initialized       True \n  Ready             False \n  ContainersReady   False \n  PodScheduled      True \nVolumes:\n  .....\nTolerations:     node.kubernetes.io/not-ready:NoExecute op=Exists for 300s\n                 node.kubernetes.io/unreachable:NoExecute op=Exists for 300s\nEvents:\n  Type    Reason     Age   From               Message\n  ----    ------     ----  ----               -------\n  Normal  Scheduled  23m   default-scheduler  Successfully assigned qdm/qdm-migration-service-job-s9qvs to 10.1.7.123\n  Normal  Pulled     23m   kubelet            Container image &quot;*****&quot; already present on machine\n  Normal  Created    23m   kubelet            Created container copy-vault-env\n  Normal  Started    23m   kubelet            Started container copy-vault-env\n  Normal  Pulled     23m   kubelet            Container image &quot;d*******&quot; already present on machine\n  Normal  Created    23m   kubelet            Created container vault-agent\n  Normal  Started    23m   kubelet            Started container vault-agent\n  Normal  Pulling    23m   kubelet            Pulling image &quot;****qdm-pdb-migration-service:5.0&quot;\n  Normal  Pulled     23m   kubelet            Successfully pulled image &quot;****qdm-pdb-migration-service:5.0&quot; in 10.9s\n  Normal  Created    23m   kubelet            Created container qdm-pdb-migration-service\n  Normal  Started    23m   kubelet            Started container qdm-pdb-migration-service\n</code></pre>\n\n"},{"tags":["java","java.util.scanner","nosuchelementexception"],"comments":[{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":2,"creation_date":1689840397,"post_id":76727787,"comment_id":135271072,"body_markdown":"Do not catch NullPointerException. Add null checks","body":"Do not catch NullPointerException. Add null checks"},{"owner":{"account_id":213468,"reputation":103489,"user_id":466862,"display_name":"Mark Rotteveel"},"score":1,"creation_date":1689840671,"post_id":76727787,"comment_id":135271137,"body_markdown":"How are you running your application? It sounds like your application doesn&#39;t have a valid System.in (i.e. it&#39;s closed), which can happen sometimes when running from an IDE.","body":"How are you running your application? It sounds like your application doesn&#39;t have a valid System.in (i.e. it&#39;s closed), which can happen sometimes when running from an IDE."},{"owner":{"account_id":29051319,"reputation":3,"user_id":22254078,"display_name":"Sharky"},"score":0,"creation_date":1689884413,"post_id":76727787,"comment_id":135280484,"body_markdown":"It seems that the issue was the scanner getting closed in quiz.printMenu1, I would&#39;ve never found this while reading over as I spent hours trying to fix this code so thank you so much!!","body":"It seems that the issue was the scanner getting closed in quiz.printMenu1, I would&#39;ve never found this while reading over as I spent hours trying to fix this code so thank you so much!!"}],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89768,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1689844828,"creation_date":1689844828,"answer_id":76728406,"question_id":76727787,"body_markdown":"Do not ever close resources that you aren&#39;t responsible for. You are not responsible for `System.in` (in fact, you should never close that unless you really know what that means and are sure you want to do that), and &#39;wrapper&#39; resources (Such as `Scanner`, generally created with `new ResourceThing(refToSomeOtherResource)`), if you close them, close the thing you wrapped. In other words - don&#39;t.\r\n\r\nSome linting tools tell you that you should be closing a resource. Those linting tools are incorrect. (somewhat understandably, keeping track of filters &#39;through&#39; the resource they wrap is a bit complex).\r\n","title":"java.util.NoSuchElementException: no Line found from the Java Scanner","body":"<p>Do not ever close resources that you aren't responsible for. You are not responsible for <code>System.in</code> (in fact, you should never close that unless you really know what that means and are sure you want to do that), and 'wrapper' resources (Such as <code>Scanner</code>, generally created with <code>new ResourceThing(refToSomeOtherResource)</code>), if you close them, close the thing you wrapped. In other words - don't.</p>\n<p>Some linting tools tell you that you should be closing a resource. Those linting tools are incorrect. (somewhat understandably, keeping track of filters 'through' the resource they wrap is a bit complex).</p>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689847925,"creation_date":1689847925,"answer_id":76728829,"question_id":76727787,"body_markdown":"&gt; _&quot;... My issue comes with my use of the Scanner (I&#39;m pretty sure) which for some reason does not find a new line to read from. ...&quot;_\r\n\r\nYes, the _[hasNextLine](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Scanner.html#hasNextLine())_ method isn&#39;t what you&#39;re looking for.\r\n\r\nJust loop on _[nextLine](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Scanner.html#nextLine())_, and check whether it meets the requirements.\r\n\r\n```java\r\npublic void setUsername(Scanner in) {\r\n    String user;\r\n    boolean exit = false;\r\n    do {\r\n        user = in.nextLine();\r\n        if (!user.isEmpty() &amp;&amp; user.length() &lt; 16) exit = true;\r\n        else Quiz.printError();\r\n    } while (!exit);\r\n    username = user;\r\n    Quiz.setProperties(&quot;playerusername&quot;, username);\r\n}\r\n```","title":"java.util.NoSuchElementException: no Line found from the Java Scanner","body":"<blockquote>\n<p><em>&quot;... My issue comes with my use of the Scanner (I'm pretty sure) which for some reason does not find a new line to read from. ...&quot;</em></p>\n</blockquote>\n<p>Yes, the <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Scanner.html#hasNextLine()\" rel=\"nofollow noreferrer\">hasNextLine</a></em> method isn't what you're looking for.</p>\n<p>Just loop on <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Scanner.html#nextLine()\" rel=\"nofollow noreferrer\">nextLine</a></em>, and check whether it meets the requirements.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public void setUsername(Scanner in) {\n    String user;\n    boolean exit = false;\n    do {\n        user = in.nextLine();\n        if (!user.isEmpty() &amp;&amp; user.length() &lt; 16) exit = true;\n        else Quiz.printError();\n    } while (!exit);\n    username = user;\n    Quiz.setProperties(&quot;playerusername&quot;, username);\n}\n</code></pre>\n"}],"owner":{"account_id":29051319,"reputation":3,"user_id":22254078,"display_name":"Sharky"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76728406,"answer_count":2,"score":0,"last_activity_date":1689847925,"creation_date":1689839828,"question_id":76727787,"body_markdown":"I am creating a quiz game which has one Player instance that the user can create once and then edit the username in Java. My issue comes with my use of the Scanner (I&#39;m pretty sure) which for some reason does not find a new line to read from. My code gives me the following error:\r\n\r\n```none\r\nException in thread &quot;main&quot; java.util.NoSuchElementException: No line found\r\n        at java.base/java.util.Scanner.nextLine(Scanner.java:1651)\r\n        at Player.setUsername(Player.java:33)\r\n        at Quiz.printPlayerEditor(Quiz.java:118)\r\n        at Run.main(Run.java:20)\r\n```\r\nHere is the method setUsername within Player.java that gives error, this is then used in another method printPlayerEditor from Quiz.java, which is then used in the main (Run.java):\r\n\r\n```java\r\npublic void setUsername(Scanner in) {\r\n    String user = &quot;&quot;;\r\n\r\n    do {\r\n        while (!in.hasNextLine() &amp;&amp; !user.isEmpty() &amp;&amp; user.length() &lt; 16 ) {\r\n            Quiz.printError();\r\n            in.next();\r\n        }\r\n        user = in.nextLine(); //Line 33\r\n        username = user;\r\n        Quiz.setProperties(&quot;playerusername&quot;, username);\r\n\r\n    }while(!username.equals(user));\r\n}\r\n```\r\n\r\nThe Quiz.java code that gives error (which uses the previous method)\r\n\r\n```java\r\npublic void printPlayerEditor(Scanner in) {\r\n    System.out.println(&quot;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&quot;);\r\n    System.out.println(&quot;Welcome to the Player editor:&quot;);\r\n    System.out.println(&quot;Your current username is | &quot; + player.getUsername() + &quot; |&quot;);\r\n    System.out.println(&quot;Please enter a new username between 1-16 characters:&quot;);\r\n    System.out.println(&quot;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&quot;);\r\n\r\n    player.setUsername(in);\r\n\r\n    System.out.println(&quot;Your username is now | &quot; + player.getUsername() + &quot; |\\n&quot;);\r\n}\r\n```\r\n\r\nAnd then lastly this is used in the main in a switch case that deals with the input. This is where the Scanner comes from:\r\n\r\n```\r\nimport java.util.Scanner;\r\n\r\npublic class Run {\r\n    public static void main(String[] args) {        \r\n        Quiz quiz = new Quiz();\r\n        Player player = new Player();\r\n\r\n        quiz.setPlayer(player);\r\n        quiz.populateQuestions();\r\n        int input = quiz.printMenu1();\r\n\r\n        Scanner in = new Scanner(System.in);\r\n\r\n        switch (input) {                \r\n            case 1:\r\n                if (Quiz.getProperties(&quot;playerusername&quot;).isEmpty()) {\r\n                    quiz.printPlayerCreator(in);\r\n                    input = 2;\r\n                } else {\r\n                    quiz.printPlayerEditor(in);\r\n                    input = 2;\r\n                }\r\n                \r\n            case 2: \r\n                try {\r\n                    quiz.printUnitMenu(in);\r\n\r\n                } catch (NullPointerException e) {\r\n                    quiz.printPlayerCreator(in);\r\n                \r\n                }\r\n                break;\r\n\r\n            default:\r\n                Quiz.printError();\r\n                quiz.printMenu1();\r\n                break;\r\n        }\r\n\r\n        in.close();\r\n        \r\n    }\r\n}\r\n```\r\n\r\nI&#39;ve tried passing the same scanner into all of them, and I&#39;ve tried making the classes static and stuff, but I&#39;m still quite new to Java and cannot get my head around why this error may be occurring.","title":"java.util.NoSuchElementException: no Line found from the Java Scanner","body":"<p>I am creating a quiz game which has one Player instance that the user can create once and then edit the username in Java. My issue comes with my use of the Scanner (I'm pretty sure) which for some reason does not find a new line to read from. My code gives me the following error:</p>\n<pre class=\"lang-none prettyprint-override\"><code>Exception in thread &quot;main&quot; java.util.NoSuchElementException: No line found\n        at java.base/java.util.Scanner.nextLine(Scanner.java:1651)\n        at Player.setUsername(Player.java:33)\n        at Quiz.printPlayerEditor(Quiz.java:118)\n        at Run.main(Run.java:20)\n</code></pre>\n<p>Here is the method setUsername within Player.java that gives error, this is then used in another method printPlayerEditor from Quiz.java, which is then used in the main (Run.java):</p>\n<pre class=\"lang-java prettyprint-override\"><code>public void setUsername(Scanner in) {\n    String user = &quot;&quot;;\n\n    do {\n        while (!in.hasNextLine() &amp;&amp; !user.isEmpty() &amp;&amp; user.length() &lt; 16 ) {\n            Quiz.printError();\n            in.next();\n        }\n        user = in.nextLine(); //Line 33\n        username = user;\n        Quiz.setProperties(&quot;playerusername&quot;, username);\n\n    }while(!username.equals(user));\n}\n</code></pre>\n<p>The Quiz.java code that gives error (which uses the previous method)</p>\n<pre class=\"lang-java prettyprint-override\"><code>public void printPlayerEditor(Scanner in) {\n    System.out.println(&quot;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&quot;);\n    System.out.println(&quot;Welcome to the Player editor:&quot;);\n    System.out.println(&quot;Your current username is | &quot; + player.getUsername() + &quot; |&quot;);\n    System.out.println(&quot;Please enter a new username between 1-16 characters:&quot;);\n    System.out.println(&quot;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&quot;);\n\n    player.setUsername(in);\n\n    System.out.println(&quot;Your username is now | &quot; + player.getUsername() + &quot; |\\n&quot;);\n}\n</code></pre>\n<p>And then lastly this is used in the main in a switch case that deals with the input. This is where the Scanner comes from:</p>\n<pre><code>import java.util.Scanner;\n\npublic class Run {\n    public static void main(String[] args) {        \n        Quiz quiz = new Quiz();\n        Player player = new Player();\n\n        quiz.setPlayer(player);\n        quiz.populateQuestions();\n        int input = quiz.printMenu1();\n\n        Scanner in = new Scanner(System.in);\n\n        switch (input) {                \n            case 1:\n                if (Quiz.getProperties(&quot;playerusername&quot;).isEmpty()) {\n                    quiz.printPlayerCreator(in);\n                    input = 2;\n                } else {\n                    quiz.printPlayerEditor(in);\n                    input = 2;\n                }\n                \n            case 2: \n                try {\n                    quiz.printUnitMenu(in);\n\n                } catch (NullPointerException e) {\n                    quiz.printPlayerCreator(in);\n                \n                }\n                break;\n\n            default:\n                Quiz.printError();\n                quiz.printMenu1();\n                break;\n        }\n\n        in.close();\n        \n    }\n}\n</code></pre>\n<p>I've tried passing the same scanner into all of them, and I've tried making the classes static and stuff, but I'm still quite new to Java and cannot get my head around why this error may be occurring.</p>\n"},{"tags":["java","graphql","spring-cloud-gateway","apollo-gateway"],"comments":[{"owner":{"account_id":3338251,"reputation":19359,"user_id":2805154,"accept_rate":75,"display_name":"Michel Floyd"},"score":0,"creation_date":1689866428,"post_id":76728539,"comment_id":135276985,"body_markdown":"You&#39;re looking for [federation](https://www.apollographql.com/docs/federation/)","body":"You&#39;re looking for <a href=\"https://www.apollographql.com/docs/federation/\" rel=\"nofollow noreferrer\">federation</a>"},{"owner":{"account_id":28801978,"reputation":13,"user_id":22058641,"display_name":"Khyati"},"score":0,"creation_date":1689919958,"post_id":76728539,"comment_id":135283944,"body_markdown":"@MichelFloyd Want to know using apollo gateway is good option to fulfill this mentioned scenario. As apollo gateway is in Node.js and my microservices are in spring boot graphql ?\nOr could suggest me better option?","body":"@MichelFloyd Want to know using apollo gateway is good option to fulfill this mentioned scenario. As apollo gateway is in Node.js and my microservices are in spring boot graphql ? Or could suggest me better option?"},{"owner":{"account_id":3338251,"reputation":19359,"user_id":2805154,"accept_rate":75,"display_name":"Michel Floyd"},"score":0,"creation_date":1689954117,"post_id":76728539,"comment_id":135290507,"body_markdown":"IMO it&#39;s the best option out there. You will have a small node server that routes traffic to your spring boot microservices. I&#39;m not aware of any java based federation server.","body":"IMO it&#39;s the best option out there. You will have a small node server that routes traffic to your spring boot microservices. I&#39;m not aware of any java based federation server."}],"owner":{"account_id":28801978,"reputation":13,"user_id":22058641,"display_name":"Khyati"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":54,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689847225,"creation_date":1689845656,"question_id":76728539,"body_markdown":"I have the below spring boot graphql microservices in java \r\n\r\n- /graphql1 - with User service  \r\n- /graphql2 - with Product service\r\n\r\nAll these 2 microservice run on different ports.\r\n\r\nI would like to host these 2 microservices through one single graphql api gateway i.e. `/graphql` .  \r\nLike when the, query is userlist - api should redirect the request to /graphql1 - User service\r\n\r\nI have read about apollo gateway. Use of apollo gateway in this scenario is a good option?  \r\nor how to create graphql api gateway to fullfill this scenario.  \r\nAny reference and guidance is appreciated.","title":"Which graphQL Gateway should use to access multiple String boot graphQL microservices with single URL?","body":"<p>I have the below spring boot graphql microservices in java</p>\n<ul>\n<li>/graphql1 - with User service</li>\n<li>/graphql2 - with Product service</li>\n</ul>\n<p>All these 2 microservice run on different ports.</p>\n<p>I would like to host these 2 microservices through one single graphql api gateway i.e. <code>/graphql</code> .<br />\nLike when the, query is userlist - api should redirect the request to /graphql1 - User service</p>\n<p>I have read about apollo gateway. Use of apollo gateway in this scenario is a good option?<br />\nor how to create graphql api gateway to fullfill this scenario.<br />\nAny reference and guidance is appreciated.</p>\n"},{"tags":["java","session","undertow","pac4j"],"answers":[{"tags":[],"owner":{"account_id":1608505,"reputation":2459,"user_id":1488073,"display_name":"jleleu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689846617,"creation_date":1689846617,"answer_id":76728646,"question_id":76659443,"body_markdown":"Can you publish your whole test somewhere?","title":"How to do proper integration testing with Pac4j OAuth2 and Undertow?","body":"<p>Can you publish your whole test somewhere?</p>\n"}],"owner":{"account_id":5687210,"reputation":3883,"user_id":4496364,"accept_rate":67,"display_name":"insan-e"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689846617,"creation_date":1689059203,"question_id":76659443,"body_markdown":"I can&#39;t figure out how to log in a fake/mock user with Pac4J OAuth2 and Undertow server, and use it in tests (everything works fine with the real setup).  \r\nI made this fake client to use instead of real ones:\r\n\r\n```scala\r\nclass FakeGitHubClient(userProfile: UserProfile) extends OAuth20Client {\r\n\r\n  setCallbackUrl(&quot;http://local.test&quot;)\r\n\r\n  reinit()\r\n\r\n  override protected def internalInit(forceReinit: Boolean): Unit = {\r\n    val creds = new TokenCredentials(&quot;fake-token&quot;)\r\n    creds.setUserProfile(userProfile)\r\n\r\n    defaultCredentialsExtractor((ctx, store) =&gt; ju.Optional.of(creds))\r\n    defaultAuthenticator((cred, ctx, store) =&gt; cred.setUserProfile(userProfile))\r\n\r\n    super.internalInit(forceReinit)\r\n  }\r\n```\r\n\r\nThis is the part where I extract the user profile from session:\r\n```\r\n    val sessionStore = FindBest.sessionStore(null, config, new UndertowSessionStore(exchange))\r\n\r\n    val profileManager = config.getProfileManagerFactory().apply(new UndertowWebContext(exchange), sessionStore)\r\n\r\n    profileManager.getProfile().toScala.flatMap { profile =&gt;\r\n      val identityProvider = profile match\r\n        case _: GitHubProfile  =&gt; &quot;github&quot;\r\n        case _: Google2Profile =&gt; &quot;google&quot;\r\n        case _                 =&gt; &quot;unknown&quot;\r\n      val identityProviderId = profile.getId()\r\n      userEntityDao.findBySocialId(identityProvider, identityProviderId)\r\n    }\r\n```\r\n\r\nThe `getProfile` always returns an empty `Optional`..  \r\nAny help would be appreciated.","title":"How to do proper integration testing with Pac4j OAuth2 and Undertow?","body":"<p>I can't figure out how to log in a fake/mock user with Pac4J OAuth2 and Undertow server, and use it in tests (everything works fine with the real setup).<br />\nI made this fake client to use instead of real ones:</p>\n<pre class=\"lang-scala prettyprint-override\"><code>class FakeGitHubClient(userProfile: UserProfile) extends OAuth20Client {\n\n  setCallbackUrl(&quot;http://local.test&quot;)\n\n  reinit()\n\n  override protected def internalInit(forceReinit: Boolean): Unit = {\n    val creds = new TokenCredentials(&quot;fake-token&quot;)\n    creds.setUserProfile(userProfile)\n\n    defaultCredentialsExtractor((ctx, store) =&gt; ju.Optional.of(creds))\n    defaultAuthenticator((cred, ctx, store) =&gt; cred.setUserProfile(userProfile))\n\n    super.internalInit(forceReinit)\n  }\n</code></pre>\n<p>This is the part where I extract the user profile from session:</p>\n<pre><code>    val sessionStore = FindBest.sessionStore(null, config, new UndertowSessionStore(exchange))\n\n    val profileManager = config.getProfileManagerFactory().apply(new UndertowWebContext(exchange), sessionStore)\n\n    profileManager.getProfile().toScala.flatMap { profile =&gt;\n      val identityProvider = profile match\n        case _: GitHubProfile  =&gt; &quot;github&quot;\n        case _: Google2Profile =&gt; &quot;google&quot;\n        case _                 =&gt; &quot;unknown&quot;\n      val identityProviderId = profile.getId()\n      userEntityDao.findBySocialId(identityProvider, identityProviderId)\n    }\n</code></pre>\n<p>The <code>getProfile</code> always returns an empty <code>Optional</code>..<br />\nAny help would be appreciated.</p>\n"},{"tags":["java","mysql","sql","exception"],"comments":[{"owner":{"account_id":2345668,"reputation":13002,"user_id":2055998,"accept_rate":68,"display_name":"PM 77-1"},"score":2,"creation_date":1559927211,"post_id":56498564,"comment_id":99586238,"body_markdown":"Turn AutoCommit off.  See https://docs.oracle.com/javase/tutorial/jdbc/basics/transactions.html","body":"Turn AutoCommit off.  See <a href=\"https://docs.oracle.com/javase/tutorial/jdbc/basics/transactions.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/tutorial/jdbc/basics/transactions.htm&zwnj;&#8203;l</a>"},{"owner":{"account_id":13902148,"reputation":43,"user_id":10037511,"display_name":"Yuşa Yal&#231;ın"},"score":0,"creation_date":1559927686,"post_id":56498564,"comment_id":99586458,"body_markdown":"Thank you. It solved my problem","body":"Thank you. It solved my problem"}],"answers":[{"tags":[],"owner":{"account_id":10510554,"reputation":2670,"user_id":7746398,"display_name":"TechFree"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1559927626,"creation_date":1559927626,"answer_id":56498699,"question_id":56498564,"body_markdown":"You can disable auto commit by using this code:\r\n\r\n     //Note : This will implicitly commit the active transaction and create a new one\r\n     connection.setAutoCommit(false);\r\n\r\nNow the set of statements ( transaction ) will be  committed on :\r\n\r\n    connection.commit();\r\n","title":"How to fix &quot;java.sql.SQLException: Can&#39;t call commit when autocommit=true&quot;","body":"<p>You can disable auto commit by using this code:</p>\n\n<pre><code> //Note : This will implicitly commit the active transaction and create a new one\n connection.setAutoCommit(false);\n</code></pre>\n\n<p>Now the set of statements ( transaction ) will be  committed on :</p>\n\n<pre><code>connection.commit();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22582577,"reputation":3,"user_id":16767033,"display_name":"chundi sai krishna"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1630076189,"creation_date":1630065921,"answer_id":68953126,"question_id":56498564,"body_markdown":"Basically when we write query and execute them defaultly they will commit it resist it we have to specify don&#39;t commit and commit only when I specify.\r\n\r\nthat is we can do it by like\r\n```java\r\nConnection con = DriverManager.getConnection(url,user,password);\r\ncon.setAutoCommit(false); \r\n```\r\nThis will set the autocommit not to commit automatically.","title":"How to fix &quot;java.sql.SQLException: Can&#39;t call commit when autocommit=true&quot;","body":"<p>Basically when we write query and execute them defaultly they will commit it resist it we have to specify don't commit and commit only when I specify.</p>\n<p>that is we can do it by like</p>\n<pre class=\"lang-java prettyprint-override\"><code>Connection con = DriverManager.getConnection(url,user,password);\ncon.setAutoCommit(false); \n</code></pre>\n<p>This will set the autocommit not to commit automatically.</p>\n"},{"tags":[],"owner":{"account_id":12259286,"reputation":101,"user_id":8947492,"display_name":"Yusuf BESTAS"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689846562,"creation_date":1689846562,"answer_id":76728642,"question_id":56498564,"body_markdown":"Auto-commit mode means that when a statement is completed, the method commit is called on that statement automatically. When auto-commit is enabled, any changes made to the database will be committed &quot;immediately&quot; after the statement is executed.\r\n\r\nIn case of Transaction on a method, it will override the auto-commit setting for that method(if auto-commit is on default mode). This means Transaction will `set auto-commit false` and queries executed within the method will be part of the same transaction. Basically, the framework will take care to configure the necessary auto-commit value. \r\n\r\n**But When you explicitly set auto-commit to true**, you are telling Hibernate that you want to control when transactions are committed. And in this case, if needs to use the @Transacional method then you have to set auto-commit=false manually before using the transaction otherwise cause an exception `Caused by: java.sql.SQLException: Can&#39;t call commit when autocommit=true` ","title":"How to fix &quot;java.sql.SQLException: Can&#39;t call commit when autocommit=true&quot;","body":"<p>Auto-commit mode means that when a statement is completed, the method commit is called on that statement automatically. When auto-commit is enabled, any changes made to the database will be committed &quot;immediately&quot; after the statement is executed.</p>\n<p>In case of Transaction on a method, it will override the auto-commit setting for that method(if auto-commit is on default mode). This means Transaction will <code>set auto-commit false</code> and queries executed within the method will be part of the same transaction. Basically, the framework will take care to configure the necessary auto-commit value.</p>\n<p><strong>But When you explicitly set auto-commit to true</strong>, you are telling Hibernate that you want to control when transactions are committed. And in this case, if needs to use the @Transacional method then you have to set auto-commit=false manually before using the transaction otherwise cause an exception <code>Caused by: java.sql.SQLException: Can't call commit when autocommit=true</code></p>\n"}],"owner":{"account_id":13902148,"reputation":43,"user_id":10037511,"display_name":"Yuşa Yal&#231;ın"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9192,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":56498699,"answer_count":3,"score":2,"last_activity_date":1689846562,"creation_date":1559926960,"question_id":56498564,"body_markdown":"I am working on java and mysql and I couldn&#39;t fix the errors. I am facing these errors when I insert new farmer to the table...    \r\n\r\n&gt; java.sql.SQLException: Can&#39;t call commit when autocommit=true\r\n\r\nErrors are below \r\n    \r\n&gt; java.sql.SQLException: Can&#39;t call commit when autocommit=true  \r\n&gt; \r\n&gt; at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:869)  \r\n&gt; at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:865)  \r\n&gt; at com.mysql.jdbc.ConnectionImpl.commit(ConnectionImpl.java:1537)  \r\n&gt; at client.Main.addonething(Main.java:784)\r\n    \tat client.Main.parse_commands(Main.java:123)\r\n    \tat client.Main.main_loop(Main.java:202)\r\n    \tat client.Main.main(Main.java:239)\r\n    com.mysql.jdbc.exceptions.jdbc4.MySQLNonTransientConnectionException: Can&#39;t call rollback when autocommit=true\r\n    \tat sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n    \tat sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\r\n    \tat sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\r\n    \tat java.lang.reflect.Constructor.newInstance(Constructor.java:423)\r\n    \tat com.mysql.jdbc.Util.handleNewInstance(Util.java:425)\r\n    \tat com.mysql.jdbc.Util.getInstance(Util.java:408)\r\n    \tat com.mysql.jdbc.SQLError.createSQLException(SQLError.java:919)\r\n    \tat com.mysql.jdbc.SQLError.createSQLException(SQLError.java:898)\r\n    \tat com.mysql.jdbc.SQLError.createSQLException(SQLError.java:887)\r\n    \tat com.mysql.jdbc.SQLError.createSQLException(SQLError.java:861)\r\n    \tat com.mysql.jdbc.ConnectionImpl.rollback(ConnectionImpl.java:4560)\r\n    \tat client.Main.addonething(Main.java:795)\r\n    \tat client.Main.parse_commands(Main.java:123)\r\n    \tat client.Main.main_loop(Main.java:202)\r\n    \tat client.Main.main(Main.java:239)\r\n\r\nThis is the database connection code\r\n\r\n     public static void addonething(String query, DBConnection dbConnection){\r\n        \tStatement myStmt;\r\n        \ttry {\r\n        \t\tmyStmt =  dbConnection.getConn().createStatement();\r\n        \t\tint swichA = 0;\r\n        \t\tint swichB = 0;\r\n        \t\tmyStmt.execute(query);\r\n        \r\n\t\tSystem.out.println(&quot;To commit the data enter 1&quot;);\r\n\t\tScanner in = new Scanner(System.in);\r\n\t\tswichB = in.nextInt();\r\n\t\tif(swichA != -1 &amp;&amp; swichB == 1){\r\n\t\t\tSystem.out.println();\r\n\t\t\tdbConnection.getConn().commit();\r\n\t\t}\r\n\t\telse{\r\n\t\t\tSystem.out.println(&quot;it came hear3&quot;);\r\n\t\t\tdbConnection.getConn().rollback();\r\n\t\t}\r\n\r\n\t} catch (SQLException e) {\r\n\t\tSystem.out.println(&quot;it came hear4&quot;);\r\n\t\te.printStackTrace();\r\n\t\ttry {\r\n\t\t\tdbConnection.getConn().rollback();\r\n\t\t} catch (SQLException e1) {\r\n\t\t\tSystem.out.println(&quot;it came hear5&quot;);\r\n\t\t\te1.printStackTrace();\r\n\t\t}\r\n\t}}\r\n\r\nBelow is the insert method\r\n    \r\n    public static String frQuery(String second_part){\r\n    \tString data = get_data_from_commands(second_part);\r\n    \tString[] tokens = data.split(&quot;,&quot;);\r\n    \tString queryf = String.format(&quot;insert into farmers&quot; + &quot; \r\n                (Name, lastname, Address, zipcode, city, phones, mails)&quot; + &quot;values \r\n          (&#39;%s&#39;,&#39;%s&#39;,&#39;%s&#39;,&#39;%s&#39;,&#39;%s&#39;,&#39;%s&#39;,&#39;%s&#39;)&quot;,tokens[0],tokens[1],tokens[2], \r\n           tokens[3],tokens[4],tokens[5], tokens[6]);\r\n    \r\n    \treturn queryf;\r\n    }\r\n","title":"How to fix &quot;java.sql.SQLException: Can&#39;t call commit when autocommit=true&quot;","body":"<p>I am working on java and mysql and I couldn't fix the errors. I am facing these errors when I insert new farmer to the table...    </p>\n\n<blockquote>\n  <p>java.sql.SQLException: Can't call commit when autocommit=true</p>\n</blockquote>\n\n<p>Errors are below </p>\n\n<blockquote>\n  <p>java.sql.SQLException: Can't call commit when autocommit=true  </p>\n  \n  <p>at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:869)<br>\n  at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:865)<br>\n  at com.mysql.jdbc.ConnectionImpl.commit(ConnectionImpl.java:1537)<br>\n  at client.Main.addonething(Main.java:784)\n          at client.Main.parse_commands(Main.java:123)\n          at client.Main.main_loop(Main.java:202)\n          at client.Main.main(Main.java:239)\n      com.mysql.jdbc.exceptions.jdbc4.MySQLNonTransientConnectionException: Can't call rollback when autocommit=true\n          at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n          at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\n          at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\n          at java.lang.reflect.Constructor.newInstance(Constructor.java:423)\n          at com.mysql.jdbc.Util.handleNewInstance(Util.java:425)\n          at com.mysql.jdbc.Util.getInstance(Util.java:408)\n          at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:919)\n          at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:898)\n          at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:887)\n          at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:861)\n          at com.mysql.jdbc.ConnectionImpl.rollback(ConnectionImpl.java:4560)\n          at client.Main.addonething(Main.java:795)\n          at client.Main.parse_commands(Main.java:123)\n          at client.Main.main_loop(Main.java:202)\n          at client.Main.main(Main.java:239)</p>\n</blockquote>\n\n<p>This is the database connection code</p>\n\n<pre><code> public static void addonething(String query, DBConnection dbConnection){\n        Statement myStmt;\n        try {\n            myStmt =  dbConnection.getConn().createStatement();\n            int swichA = 0;\n            int swichB = 0;\n            myStmt.execute(query);\n\n    System.out.println(\"To commit the data enter 1\");\n    Scanner in = new Scanner(System.in);\n    swichB = in.nextInt();\n    if(swichA != -1 &amp;&amp; swichB == 1){\n        System.out.println();\n        dbConnection.getConn().commit();\n    }\n    else{\n        System.out.println(\"it came hear3\");\n        dbConnection.getConn().rollback();\n    }\n\n} catch (SQLException e) {\n    System.out.println(\"it came hear4\");\n    e.printStackTrace();\n    try {\n        dbConnection.getConn().rollback();\n    } catch (SQLException e1) {\n        System.out.println(\"it came hear5\");\n        e1.printStackTrace();\n    }\n}}\n</code></pre>\n\n<p>Below is the insert method</p>\n\n<pre><code>public static String frQuery(String second_part){\n    String data = get_data_from_commands(second_part);\n    String[] tokens = data.split(\",\");\n    String queryf = String.format(\"insert into farmers\" + \" \n            (Name, lastname, Address, zipcode, city, phones, mails)\" + \"values \n      ('%s','%s','%s','%s','%s','%s','%s')\",tokens[0],tokens[1],tokens[2], \n       tokens[3],tokens[4],tokens[5], tokens[6]);\n\n    return queryf;\n}\n</code></pre>\n"},{"tags":["java","selenium-webdriver","xpath","chropath"],"answers":[{"tags":[],"owner":{"account_id":10049107,"reputation":186627,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689803546,"creation_date":1689803546,"answer_id":76725420,"question_id":76725255,"body_markdown":"The element with text as _Know More_ on the [HDFC Bank NetBanking](https://netbanking.hdfcbank.com/netbanking/) landing page is within a [`&lt;frame&gt;`](https://stackoverflow.com/a/53276478/7429447).\r\n\r\n\r\n----------\r\n\r\n\r\nSolution\r\n---------\r\nTo click on the element with text as _**Know More**_ you have to:\r\n\r\n- Induce [WebDriverWait](https://stackoverflow.com/a/48990165/7429447) for the desired _frameToBeAvailableAndSwitchToIt_.\r\n- Induce [WebDriverWait](https://stackoverflow.com/a/50621712/7429447) for the desired _elementToBeClickable_.\r\n- You can use the following [Locator Strategies](https://stackoverflow.com/questions/48369043/official-locator-strategies-for-the-webdriver/48376890#48376890):\r\n - Using _xpath_:\r\n\r\n\t   WebDriver driver = new FirefoxDriver();\r\n\t   driver.get(&quot;https://netbanking.hdfcbank.com/netbanking/&quot;);\r\n\t   WebDriverWait wait = new WebDriverWait(driver, Duration.ofSeconds(10));\r\n\t   wait.until(ExpectedConditions.frameToBeAvailableAndSwitchToIt(By.xpath(&quot;//frame[@name=&#39;login_page&#39;]&quot;)));\r\n\t\t\t\r\n- Browser Snapshot:\r\n\r\n![KnowMore](https://i.stack.imgur.com/GiOc0.png)\r\n\r\n\r\n----------\r\n\r\n\r\n\t\r\nReferences\r\n----------\r\nYou can find a couple of relevant discussions in:\r\n\r\n- [Is it possible to switch to an element in a frame without using driver.switchTo().frame(“frameName”) in Selenium Webdriver Java?](https://stackoverflow.com/a/47472200/7429447)\r\n- [Selenium: Can&#39;t click on a button within an iframe](https://stackoverflow.com/a/64016305/7429447)","title":"Select and click link in html element in Selenium Java when iframe tag is absent","body":"<p>The element with text as <em>Know More</em> on the <a href=\"https://netbanking.hdfcbank.com/netbanking/\" rel=\"nofollow noreferrer\">HDFC Bank NetBanking</a> landing page is within a <a href=\"https://stackoverflow.com/a/53276478/7429447\"><code>&lt;frame&gt;</code></a>.</p>\n<hr />\n<h2>Solution</h2>\n<p>To click on the element with text as <em><strong>Know More</strong></em> you have to:</p>\n<ul>\n<li><p>Induce <a href=\"https://stackoverflow.com/a/48990165/7429447\">WebDriverWait</a> for the desired <em>frameToBeAvailableAndSwitchToIt</em>.</p>\n</li>\n<li><p>Induce <a href=\"https://stackoverflow.com/a/50621712/7429447\">WebDriverWait</a> for the desired <em>elementToBeClickable</em>.</p>\n</li>\n<li><p>You can use the following <a href=\"https://stackoverflow.com/questions/48369043/official-locator-strategies-for-the-webdriver/48376890#48376890\">Locator Strategies</a>:</p>\n</li>\n<li><p>Using <em>xpath</em>:</p>\n<pre><code>WebDriver driver = new FirefoxDriver();\ndriver.get(&quot;https://netbanking.hdfcbank.com/netbanking/&quot;);\nWebDriverWait wait = new WebDriverWait(driver, Duration.ofSeconds(10));\nwait.until(ExpectedConditions.frameToBeAvailableAndSwitchToIt(By.xpath(&quot;//frame[@name='login_page']&quot;)));\n</code></pre>\n</li>\n<li><p>Browser Snapshot:</p>\n</li>\n</ul>\n<p><img src=\"https://i.stack.imgur.com/GiOc0.png\" alt=\"KnowMore\" /></p>\n<hr />\n<h2>References</h2>\n<p>You can find a couple of relevant discussions in:</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/a/47472200/7429447\">Is it possible to switch to an element in a frame without using driver.switchTo().frame(“frameName”) in Selenium Webdriver Java?</a></li>\n<li><a href=\"https://stackoverflow.com/a/64016305/7429447\">Selenium: Can't click on a button within an iframe</a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":27793345,"reputation":24,"user_id":21219384,"display_name":"Dinesh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689846414,"creation_date":1689844336,"answer_id":76728341,"question_id":76725255,"body_markdown":"    WebDriver driver;\r\n    \t\tChromeOptions options = new ChromeOptions();\r\n    \t\toptions.addArguments(&quot;--remote-allow-origins=*&quot;);\r\n    \t\toptions.addArguments(&quot;--no-sandbox&quot;);\r\n    \t\toptions.addArguments(&quot;--disable-dev-shm-usage&quot;);\r\n    \t\tdriver=new ChromeDriver(options);\r\n    \t\tdriver.manage().timeouts().implicitlyWait(10, TimeUnit.SECONDS);\r\n    \t\t//Actions class method to drag and drop\r\n    \t\t//driver=new ChromeDriver();\r\n    \t\tdriver.get(&quot;https://netbanking.hdfcbank.com/netbanking/&quot;);\r\n    \t\tdriver.switchTo().frame(&quot;login_page&quot;);\r\n    \t\tWebElement frame = driver.findElement(By.xpath(&quot;(//a[contains(text(),&#39;Know&#39;)])[2]&quot;));\r\n    \t\tframe.click();\r\n    \r\n    This know more webelement is present inside the frame so we need to switch to that frame then click on know more link","title":"Select and click link in html element in Selenium Java when iframe tag is absent","body":"<pre><code>WebDriver driver;\n        ChromeOptions options = new ChromeOptions();\n        options.addArguments(&quot;--remote-allow-origins=*&quot;);\n        options.addArguments(&quot;--no-sandbox&quot;);\n        options.addArguments(&quot;--disable-dev-shm-usage&quot;);\n        driver=new ChromeDriver(options);\n        driver.manage().timeouts().implicitlyWait(10, TimeUnit.SECONDS);\n        //Actions class method to drag and drop\n        //driver=new ChromeDriver();\n        driver.get(&quot;https://netbanking.hdfcbank.com/netbanking/&quot;);\n        driver.switchTo().frame(&quot;login_page&quot;);\n        WebElement frame = driver.findElement(By.xpath(&quot;(//a[contains(text(),'Know')])[2]&quot;));\n        frame.click();\n\nThis know more webelement is present inside the frame so we need to switch to that frame then click on know more link\n</code></pre>\n"}],"owner":{"account_id":20890006,"reputation":1,"user_id":15345609,"display_name":"jugunnu"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1689846414,"creation_date":1689801457,"question_id":76725255,"body_markdown":"I am trying to select and click a link on a web webpage using Selenium. The url is this [test site](https://netbanking.hdfcbank.com/netbanking/). When I used regular element locator or xpath or cssSelectors:\r\n\r\n```\r\n//div[@class=&quot;welcmewrap&quot;]/div/div[3]/div/div[2]/div/div[2]/span[2][contains(text(), &quot;Know More...&quot;)]\r\n```\r\n\r\nThe chropath showed the message:\r\n\r\n&gt; It might be child of svg/pseudo element/comment/iframe from different src. Currently ChroPath doesn&#39;t support for them.\r\n\r\nSimilarly, running the methods on selenium as below:\r\n\r\n```\r\nWebDriverManager.firefoxdriver().setup();\r\nWebDriver driver = new FirefoxDriver();\r\n\r\ndriver.get(&quot;https://netbanking.hdfcbank.com/netbanking/&quot;);\r\n\r\n//method 1\t\r\ndriver.findElement(By.xpath(&quot;//span[@class=&#39;lightbluecolor&#39;][contains(text(), &#39;Know More...&#39;)]&quot;));\r\n\r\n//method 2\t\r\ndriver.findElement(By.xpath(&quot;//div[@class=\\&quot;welcmewrap\\&quot;]/div/div[3]/div/div[2]/div/div[2]/span[@class= ‘lightbluecolor’] [contains(text(), \\&quot;Know More...\\&quot;)]&quot;)).click();\r\n\r\nSystem.out.println(&quot;know more click&quot;);\r\n```\r\n\r\n...returned:\r\n\r\n\r\n&gt; Exception in thread &quot;main&quot; org.openqa.selenium.NoSuchElementException: Unable to locate element: //span[@class=&#39;lightbluecolor&#39;][contains(text(), &#39;Know More...&#39;)]\r\n\r\n\r\nWhen I investigated further, it appears to be a nested frame issue but I couldn&#39;t find an &quot;iframe&quot; tag on the webpage source.\r\n\r\nHow to reach that element?","title":"Select and click link in html element in Selenium Java when iframe tag is absent","body":"<p>I am trying to select and click a link on a web webpage using Selenium. The url is this <a href=\"https://netbanking.hdfcbank.com/netbanking/\" rel=\"nofollow noreferrer\">test site</a>. When I used regular element locator or xpath or cssSelectors:</p>\n<pre><code>//div[@class=&quot;welcmewrap&quot;]/div/div[3]/div/div[2]/div/div[2]/span[2][contains(text(), &quot;Know More...&quot;)]\n</code></pre>\n<p>The chropath showed the message:</p>\n<blockquote>\n<p>It might be child of svg/pseudo element/comment/iframe from different src. Currently ChroPath doesn't support for them.</p>\n</blockquote>\n<p>Similarly, running the methods on selenium as below:</p>\n<pre><code>WebDriverManager.firefoxdriver().setup();\nWebDriver driver = new FirefoxDriver();\n\ndriver.get(&quot;https://netbanking.hdfcbank.com/netbanking/&quot;);\n\n//method 1  \ndriver.findElement(By.xpath(&quot;//span[@class='lightbluecolor'][contains(text(), 'Know More...')]&quot;));\n\n//method 2  \ndriver.findElement(By.xpath(&quot;//div[@class=\\&quot;welcmewrap\\&quot;]/div/div[3]/div/div[2]/div/div[2]/span[@class= ‘lightbluecolor’] [contains(text(), \\&quot;Know More...\\&quot;)]&quot;)).click();\n\nSystem.out.println(&quot;know more click&quot;);\n</code></pre>\n<p>...returned:</p>\n<blockquote>\n<p>Exception in thread &quot;main&quot; org.openqa.selenium.NoSuchElementException: Unable to locate element: //span[@class='lightbluecolor'][contains(text(), 'Know More...')]</p>\n</blockquote>\n<p>When I investigated further, it appears to be a nested frame issue but I couldn't find an &quot;iframe&quot; tag on the webpage source.</p>\n<p>How to reach that element?</p>\n"},{"tags":["java","spring","maven","containers"],"comments":[{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":1,"creation_date":1689775928,"post_id":76722154,"comment_id":135261577,"body_markdown":"This: `reactor.tools.shaded.net.` looks like you are using a dependency reactor-tools which shaded a dependency (bytebuddy which is in general a very bad idea) which results in such problem, because you can not overwrite the dependency for bytebuddy which is required to have a more recent version which works with JDK17...(the shaded version is an older one which does not support JDK17). You have to check if for reactor-tools a newer version is available compared the one you are using.... Furthermore it would be helpful to have a full pom file here etc...","body":"This: <code>reactor.tools.shaded.net.</code> looks like you are using a dependency reactor-tools which shaded a dependency (bytebuddy which is in general a very bad idea) which results in such problem, because you can not overwrite the dependency for bytebuddy which is required to have a more recent version which works with JDK17...(the shaded version is an older one which does not support JDK17). You have to check if for reactor-tools a newer version is available compared the one you are using.... Furthermore it would be helpful to have a full pom file here etc..."},{"owner":{"account_id":4454959,"reputation":191,"user_id":3625571,"display_name":"Jimmy Foobar"},"score":0,"creation_date":1689846288,"post_id":76722154,"comment_id":135272290,"body_markdown":"Thanks for the hint. I added to pom.xml","body":"Thanks for the hint. I added to pom.xml"}],"owner":{"account_id":4454959,"reputation":191,"user_id":3625571,"display_name":"Jimmy Foobar"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":61,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689846259,"creation_date":1689775341,"question_id":76722154,"body_markdown":"I&#39;m trying to upgrade a spring boot project from version 2.6.7 to 3.1.1\r\n\r\nThe main functions uses `ReactorDebugAgent` from `reactor-tools`\r\n\r\n    public static void main(String[] args) {\r\n        ReactorDebugAgent.init();\r\n        SpringApplication.run(MyApplication.class, args);\r\n    }\r\n\r\nThis was not changed during the upgrade. The projects runs locally fine but after building a container image via `mvn clean package spring-boot:build-image -B`, the container does not start with the following error:\r\n\r\n    Exception in thread &quot;main&quot; java.lang.reflect.InvocationTargetException\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n        at java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n        at org.springframework.boot.loader.MainMethodRunner.run(MainMethodRunner.java:49)\r\n        at org.springframework.boot.loader.Launcher.launch(Launcher.java:95)\r\n        at org.springframework.boot.loader.Launcher.launch(Launcher.java:58)\r\n        at org.springframework.boot.loader.JarLauncher.main(JarLauncher.java:65)\r\n    Caused by: java.lang.IllegalStateException: No compatible attachment provider is available\r\n            at reactor.tools.shaded.net.bytebuddy.agent.ByteBuddyAgent.install(ByteBuddyAgent.java:632)\r\n            at reactor.tools.shaded.net.bytebuddy.agent.ByteBuddyAgent.install(ByteBuddyAgent.java:616)\r\n            at reactor.tools.shaded.net.bytebuddy.agent.ByteBuddyAgent.install(ByteBuddyAgent.java:568)\r\n            at reactor.tools.shaded.net.bytebuddy.agent.ByteBuddyAgent.install(ByteBuddyAgent.java:545)\r\n            at reactor.tools.agent.ReactorDebugAgent.init(ReactorDebugAgent.java:56)\r\n            at com.maersk.publictracking.MyApplication.main(MyApplication.java:14)\r\n            ... 8 more\r\n\r\n[Similar questions on stackoverflow][1] teach me that the issue is based on the JRE which does not include a modul that is needed by `bytebuddy` or `ReactiveDebugAgent`. This could explain why the issue only appears in the container and not locally but since the container image is created via MVN, I don&#39;t see any option for me to control the java modules inside the container.\r\n\r\nUsed java version: 17\r\n\r\nUsed pom.xml:\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    &lt;parent&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n        &lt;version&gt;3.1.1&lt;/version&gt;\r\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n    &lt;/parent&gt;\r\n    &lt;groupId&gt;com.acme&lt;/groupId&gt;\r\n    &lt;artifactId&gt;my-application&lt;/artifactId&gt;\r\n    &lt;version&gt;0.0.81&lt;/version&gt;\r\n    &lt;name&gt;my-application&lt;/name&gt;\r\n    &lt;description&gt;my-application&lt;/description&gt;\r\n    &lt;properties&gt;\r\n        &lt;io-grpc-netty.version&gt;1.55.1&lt;/io-grpc-netty.version&gt;\r\n        &lt;jacoco.version&gt;0.8.10&lt;/jacoco.version&gt;\r\n        &lt;java.version&gt;17&lt;/java.version&gt;\r\n        &lt;maven-surefire-plugin.version&gt;3.1.2&lt;/maven-surefire-plugin.version&gt;\r\n        &lt;shared-error-handling-lib.version&gt;3.1.0&lt;/shared-error-handling-lib.version&gt;\r\n        &lt;spring-cloud-sleuth-otel.dependencies.version&gt;1.1.3&lt;/spring-cloud-sleuth-otel.dependencies.version&gt;\r\n        &lt;spring-cloud.version&gt;2021.0.6&lt;/spring-cloud.version&gt;\r\n        &lt;testcontainers.version&gt;1.18.1&lt;/testcontainers.version&gt;\r\n        &lt;tests.skip&gt;false&lt;/tests.skip&gt;\r\n    &lt;/properties&gt;\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\r\n            &lt;exclusions&gt;\r\n                &lt;exclusion&gt;\r\n                    &lt;artifactId&gt;logback-classic&lt;/artifactId&gt;\r\n                    &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;\r\n                &lt;/exclusion&gt;\r\n                &lt;exclusion&gt;\r\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt;\r\n                &lt;/exclusion&gt;\r\n            &lt;/exclusions&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-cloud-starter-sleuth&lt;/artifactId&gt;\r\n            &lt;exclusions&gt;\r\n                &lt;exclusion&gt;\r\n                    &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;spring-cloud-sleuth-brave&lt;/artifactId&gt;\r\n                &lt;/exclusion&gt;\r\n            &lt;/exclusions&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-cloud-sleuth-otel-autoconfigure&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.opentelemetry&lt;/groupId&gt;\r\n            &lt;artifactId&gt;opentelemetry-exporter-otlp&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.grpc&lt;/groupId&gt;\r\n            &lt;artifactId&gt;grpc-netty&lt;/artifactId&gt;\r\n            &lt;version&gt;${io-grpc-netty.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n            &lt;exclusions&gt;\r\n                &lt;exclusion&gt;\r\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt;\r\n                &lt;/exclusion&gt;\r\n            &lt;/exclusions&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.micrometer&lt;/groupId&gt;\r\n            &lt;artifactId&gt;micrometer-registry-prometheus&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-log4j2&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.acme.shared&lt;/groupId&gt;\r\n            &lt;artifactId&gt;error-handling&lt;/artifactId&gt;\r\n            &lt;version&gt;${shared-error-handling-lib.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.testcontainers&lt;/groupId&gt;\r\n            &lt;artifactId&gt;elasticsearch&lt;/artifactId&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.testcontainers&lt;/groupId&gt;\r\n            &lt;artifactId&gt;junit-jupiter&lt;/artifactId&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-data-elasticsearch&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-webflux&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.fasterxml.jackson.datatype&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jackson-datatype-jsr310&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.projectreactor&lt;/groupId&gt;\r\n            &lt;artifactId&gt;reactor-tools&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.projectreactor&lt;/groupId&gt;\r\n            &lt;artifactId&gt;reactor-test&lt;/artifactId&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\n    &lt;dependencyManagement&gt;\r\n        &lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;\r\n                &lt;version&gt;${spring-cloud.version}&lt;/version&gt;\r\n                &lt;type&gt;pom&lt;/type&gt;\r\n                &lt;scope&gt;import&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-cloud-sleuth-otel-dependencies&lt;/artifactId&gt;\r\n                &lt;version&gt;${spring-cloud-sleuth-otel.dependencies.version}&lt;/version&gt;\r\n                &lt;scope&gt;import&lt;/scope&gt;\r\n                &lt;type&gt;pom&lt;/type&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.testcontainers&lt;/groupId&gt;\r\n                &lt;artifactId&gt;testcontainers-bom&lt;/artifactId&gt;\r\n                &lt;version&gt;${testcontainers.version}&lt;/version&gt;\r\n                &lt;type&gt;pom&lt;/type&gt;\r\n                &lt;scope&gt;import&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n    &lt;/dependencyManagement&gt;\r\n\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;release&gt;17&lt;/release&gt;\r\n                    &lt;forceJavacCompilerUse&gt;true&lt;/forceJavacCompilerUse&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\r\n                &lt;artifactId&gt;versions-maven-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;${versions-maven-plugin.version}&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;rulesUri&gt;file:///${basedir}//versions-rules.xml&lt;/rulesUri&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.jacoco&lt;/groupId&gt;\r\n                &lt;artifactId&gt;jacoco-maven-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;${jacoco.version}&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;excludes&gt;\r\n                        &lt;exclude&gt;com/foo/myapplication/models/**/*&lt;/exclude&gt;\r\n                    &lt;/excludes&gt;\r\n                &lt;/configuration&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;id&gt;default-prepare-agent&lt;/id&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;prepare-agent&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                    &lt;/execution&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;id&gt;default-report&lt;/id&gt;\r\n                        &lt;phase&gt;prepare-package&lt;/phase&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;report&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;${maven-surefire-plugin.version}&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;skipTests&gt;${tests.skip}&lt;/skipTests&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n    \r\n    &lt;repositories&gt;\r\n        &lt;repository&gt;\r\n            &lt;id&gt;spring-snapshots&lt;/id&gt;\r\n            &lt;name&gt;Spring Snapshots&lt;/name&gt;\r\n            &lt;url&gt;https://repo.spring.io/snapshot&lt;/url&gt;\r\n            &lt;snapshots&gt;\r\n                &lt;enabled&gt;true&lt;/enabled&gt;\r\n            &lt;/snapshots&gt;\r\n        &lt;/repository&gt;\r\n        &lt;repository&gt;\r\n            &lt;id&gt;spring-milestones&lt;/id&gt;\r\n            &lt;name&gt;Spring Milestones&lt;/name&gt;\r\n            &lt;url&gt;https://repo.spring.io/milestone&lt;/url&gt;\r\n        &lt;/repository&gt;\r\n        &lt;repository&gt;\r\n            &lt;id&gt;github&lt;/id&gt;\r\n            &lt;url&gt;https://maven.pkg.github.com/acme-global/*&lt;/url&gt;\r\n        &lt;/repository&gt;\r\n    &lt;/repositories&gt;\r\n    &lt;pluginRepositories&gt;\r\n        &lt;pluginRepository&gt;\r\n            &lt;id&gt;spring-milestones&lt;/id&gt;\r\n            &lt;name&gt;Spring Milestones&lt;/name&gt;\r\n            &lt;url&gt;https://repo.spring.io/milestone&lt;/url&gt;\r\n        &lt;/pluginRepository&gt;\r\n    &lt;/pluginRepositories&gt;\r\n&lt;/project&gt;\r\n```\r\n\r\nThanks in advance for any help.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/49767683/what-does-no-compatible-attachment-provider-is-available-mean","title":"&quot;No compatible attachment provider is available&quot; in Spring Docker container","body":"<p>I'm trying to upgrade a spring boot project from version 2.6.7 to 3.1.1</p>\n<p>The main functions uses <code>ReactorDebugAgent</code> from <code>reactor-tools</code></p>\n<pre><code>public static void main(String[] args) {\n    ReactorDebugAgent.init();\n    SpringApplication.run(MyApplication.class, args);\n}\n</code></pre>\n<p>This was not changed during the upgrade. The projects runs locally fine but after building a container image via <code>mvn clean package spring-boot:build-image -B</code>, the container does not start with the following error:</p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.reflect.InvocationTargetException\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n    at java.base/java.lang.reflect.Method.invoke(Unknown Source)\n    at org.springframework.boot.loader.MainMethodRunner.run(MainMethodRunner.java:49)\n    at org.springframework.boot.loader.Launcher.launch(Launcher.java:95)\n    at org.springframework.boot.loader.Launcher.launch(Launcher.java:58)\n    at org.springframework.boot.loader.JarLauncher.main(JarLauncher.java:65)\nCaused by: java.lang.IllegalStateException: No compatible attachment provider is available\n        at reactor.tools.shaded.net.bytebuddy.agent.ByteBuddyAgent.install(ByteBuddyAgent.java:632)\n        at reactor.tools.shaded.net.bytebuddy.agent.ByteBuddyAgent.install(ByteBuddyAgent.java:616)\n        at reactor.tools.shaded.net.bytebuddy.agent.ByteBuddyAgent.install(ByteBuddyAgent.java:568)\n        at reactor.tools.shaded.net.bytebuddy.agent.ByteBuddyAgent.install(ByteBuddyAgent.java:545)\n        at reactor.tools.agent.ReactorDebugAgent.init(ReactorDebugAgent.java:56)\n        at com.maersk.publictracking.MyApplication.main(MyApplication.java:14)\n        ... 8 more\n</code></pre>\n<p><a href=\"https://stackoverflow.com/questions/49767683/what-does-no-compatible-attachment-provider-is-available-mean\">Similar questions on stackoverflow</a> teach me that the issue is based on the JRE which does not include a modul that is needed by <code>bytebuddy</code> or <code>ReactiveDebugAgent</code>. This could explain why the issue only appears in the container and not locally but since the container image is created via MVN, I don't see any option for me to control the java modules inside the container.</p>\n<p>Used java version: 17</p>\n<p>Used pom.xml:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.1.1&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.acme&lt;/groupId&gt;\n    &lt;artifactId&gt;my-application&lt;/artifactId&gt;\n    &lt;version&gt;0.0.81&lt;/version&gt;\n    &lt;name&gt;my-application&lt;/name&gt;\n    &lt;description&gt;my-application&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;io-grpc-netty.version&gt;1.55.1&lt;/io-grpc-netty.version&gt;\n        &lt;jacoco.version&gt;0.8.10&lt;/jacoco.version&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n        &lt;maven-surefire-plugin.version&gt;3.1.2&lt;/maven-surefire-plugin.version&gt;\n        &lt;shared-error-handling-lib.version&gt;3.1.0&lt;/shared-error-handling-lib.version&gt;\n        &lt;spring-cloud-sleuth-otel.dependencies.version&gt;1.1.3&lt;/spring-cloud-sleuth-otel.dependencies.version&gt;\n        &lt;spring-cloud.version&gt;2021.0.6&lt;/spring-cloud.version&gt;\n        &lt;testcontainers.version&gt;1.18.1&lt;/testcontainers.version&gt;\n        &lt;tests.skip&gt;false&lt;/tests.skip&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;artifactId&gt;logback-classic&lt;/artifactId&gt;\n                    &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;\n                &lt;/exclusion&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                    &lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-starter-sleuth&lt;/artifactId&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n                    &lt;artifactId&gt;spring-cloud-sleuth-brave&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-sleuth-otel-autoconfigure&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.opentelemetry&lt;/groupId&gt;\n            &lt;artifactId&gt;opentelemetry-exporter-otlp&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.grpc&lt;/groupId&gt;\n            &lt;artifactId&gt;grpc-netty&lt;/artifactId&gt;\n            &lt;version&gt;${io-grpc-netty.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                    &lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.micrometer&lt;/groupId&gt;\n            &lt;artifactId&gt;micrometer-registry-prometheus&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-log4j2&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.acme.shared&lt;/groupId&gt;\n            &lt;artifactId&gt;error-handling&lt;/artifactId&gt;\n            &lt;version&gt;${shared-error-handling-lib.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.testcontainers&lt;/groupId&gt;\n            &lt;artifactId&gt;elasticsearch&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.testcontainers&lt;/groupId&gt;\n            &lt;artifactId&gt;junit-jupiter&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-elasticsearch&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-webflux&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.fasterxml.jackson.datatype&lt;/groupId&gt;\n            &lt;artifactId&gt;jackson-datatype-jsr310&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.projectreactor&lt;/groupId&gt;\n            &lt;artifactId&gt;reactor-tools&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.projectreactor&lt;/groupId&gt;\n            &lt;artifactId&gt;reactor-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;dependencyManagement&gt;\n        &lt;dependencies&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;\n                &lt;version&gt;${spring-cloud.version}&lt;/version&gt;\n                &lt;type&gt;pom&lt;/type&gt;\n                &lt;scope&gt;import&lt;/scope&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-cloud-sleuth-otel-dependencies&lt;/artifactId&gt;\n                &lt;version&gt;${spring-cloud-sleuth-otel.dependencies.version}&lt;/version&gt;\n                &lt;scope&gt;import&lt;/scope&gt;\n                &lt;type&gt;pom&lt;/type&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.testcontainers&lt;/groupId&gt;\n                &lt;artifactId&gt;testcontainers-bom&lt;/artifactId&gt;\n                &lt;version&gt;${testcontainers.version}&lt;/version&gt;\n                &lt;type&gt;pom&lt;/type&gt;\n                &lt;scope&gt;import&lt;/scope&gt;\n            &lt;/dependency&gt;\n        &lt;/dependencies&gt;\n    &lt;/dependencyManagement&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;release&gt;17&lt;/release&gt;\n                    &lt;forceJavacCompilerUse&gt;true&lt;/forceJavacCompilerUse&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n                &lt;artifactId&gt;versions-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;${versions-maven-plugin.version}&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;rulesUri&gt;file:///${basedir}//versions-rules.xml&lt;/rulesUri&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.jacoco&lt;/groupId&gt;\n                &lt;artifactId&gt;jacoco-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;${jacoco.version}&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;excludes&gt;\n                        &lt;exclude&gt;com/foo/myapplication/models/**/*&lt;/exclude&gt;\n                    &lt;/excludes&gt;\n                &lt;/configuration&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;default-prepare-agent&lt;/id&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;prepare-agent&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;default-report&lt;/id&gt;\n                        &lt;phase&gt;prepare-package&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;report&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n                &lt;version&gt;${maven-surefire-plugin.version}&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;skipTests&gt;${tests.skip}&lt;/skipTests&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n    \n    &lt;repositories&gt;\n        &lt;repository&gt;\n            &lt;id&gt;spring-snapshots&lt;/id&gt;\n            &lt;name&gt;Spring Snapshots&lt;/name&gt;\n            &lt;url&gt;https://repo.spring.io/snapshot&lt;/url&gt;\n            &lt;snapshots&gt;\n                &lt;enabled&gt;true&lt;/enabled&gt;\n            &lt;/snapshots&gt;\n        &lt;/repository&gt;\n        &lt;repository&gt;\n            &lt;id&gt;spring-milestones&lt;/id&gt;\n            &lt;name&gt;Spring Milestones&lt;/name&gt;\n            &lt;url&gt;https://repo.spring.io/milestone&lt;/url&gt;\n        &lt;/repository&gt;\n        &lt;repository&gt;\n            &lt;id&gt;github&lt;/id&gt;\n            &lt;url&gt;https://maven.pkg.github.com/acme-global/*&lt;/url&gt;\n        &lt;/repository&gt;\n    &lt;/repositories&gt;\n    &lt;pluginRepositories&gt;\n        &lt;pluginRepository&gt;\n            &lt;id&gt;spring-milestones&lt;/id&gt;\n            &lt;name&gt;Spring Milestones&lt;/name&gt;\n            &lt;url&gt;https://repo.spring.io/milestone&lt;/url&gt;\n        &lt;/pluginRepository&gt;\n    &lt;/pluginRepositories&gt;\n&lt;/project&gt;\n</code></pre>\n<p>Thanks in advance for any help.</p>\n"},{"tags":["java","spring","sentry"],"answers":[{"tags":[],"owner":{"account_id":2486870,"reputation":685,"user_id":2165146,"display_name":"muhammed ozbilici"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1668977214,"creation_date":1668977214,"answer_id":74511869,"question_id":74510904,"body_markdown":"You can define this config in `applicaiton-test.yml` (or `.properties`)\r\n\r\n    sentry:\r\n        dsn: &quot;&quot;","title":"Disable Sentry.io during maven install","body":"<p>You can define this config in <code>applicaiton-test.yml</code> (or <code>.properties</code>)</p>\n<pre><code>sentry:\n    dsn: &quot;&quot;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":20772573,"reputation":1,"user_id":15254902,"display_name":"RomainCarrillo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689846119,"creation_date":1689846119,"answer_id":76728591,"question_id":74510904,"body_markdown":"For someone who came there, here is what worked for me :\r\nIf you are using Springboot you can use a specific application.properties in your src/test/resources and simply don&#39;t set sentry dns property in it.\r\n\r\nNow when I run mvn:test issues are not send to Sentry.","title":"Disable Sentry.io during maven install","body":"<p>For someone who came there, here is what worked for me :\nIf you are using Springboot you can use a specific application.properties in your src/test/resources and simply don't set sentry dns property in it.</p>\n<p>Now when I run mvn:test issues are not send to Sentry.</p>\n"}],"owner":{"account_id":24723252,"reputation":1,"user_id":18612036,"display_name":"gdomjan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":382,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1689846119,"creation_date":1668969684,"question_id":74510904,"body_markdown":"I have a Spring Boot application in Java which uses Sentry.io for reporting and capturing exceptions.\r\nWhat I want to do is to disable Sentry captures when I create a build through maven, for example mvn clean install. \r\nThe reason for this is that during testing and debugging, I don&#39;t want to get those Sentry captures all the time.\r\n\r\nI looked up the Sentry documentation and I found that you can define different environments for Sentry, but I was not able to figure out how to use this for my problem.","title":"Disable Sentry.io during maven install","body":"<p>I have a Spring Boot application in Java which uses Sentry.io for reporting and capturing exceptions.\nWhat I want to do is to disable Sentry captures when I create a build through maven, for example mvn clean install.\nThe reason for this is that during testing and debugging, I don't want to get those Sentry captures all the time.</p>\n<p>I looked up the Sentry documentation and I found that you can define different environments for Sentry, but I was not able to figure out how to use this for my problem.</p>\n"},{"tags":["javascript","java"],"comments":[{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":1,"creation_date":1689843123,"post_id":76728186,"comment_id":135271671,"body_markdown":"Both are valid. Different libraries can have different implementations. It doesn&#39;t really matter in practice.","body":"Both are valid. Different libraries can have different implementations. It doesn&#39;t really matter in practice."},{"owner":{"account_id":5684060,"reputation":1093,"user_id":4494166,"accept_rate":0,"display_name":"Ravi Soni"},"score":0,"creation_date":1689845167,"post_id":76728186,"comment_id":135272045,"body_markdown":"I know both are valid, but i need same results across both else, my application will redirect and cause issues in google seo","body":"I know both are valid, but i need same results across both else, my application will redirect and cause issues in google seo"},{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1689845249,"post_id":76728186,"comment_id":135272056,"body_markdown":"Then find a JS library that uses `+` or allows you to configure it. If this question is a request for a library, I&#39;ll have to vote to close as such.","body":"Then find a JS library that uses <code>+</code> or allows you to configure it. If this question is a request for a library, I&#39;ll have to vote to close as such."},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1689846239,"post_id":76728186,"comment_id":135272277,"body_markdown":"@Jorn, I believe they&#39;re asking how to make the values equivalent; since the _Java_ implementation is slightly different.","body":"@Jorn, I believe they&#39;re asking how to make the values equivalent; since the <i>Java</i> implementation is slightly different."},{"owner":{"account_id":213468,"reputation":103489,"user_id":466862,"display_name":"Mark Rotteveel"},"score":2,"creation_date":1689848347,"post_id":76728186,"comment_id":135272677,"body_markdown":"You&#39;re using two different things. `URLEncoder` is for applying `application/x-www-form-urlencoded` encoding of keys and values, while `encodeURIComponent` is for encoding URI components. Use the right tool for the job, don&#39;t mix two different things just because they (seem to) _share_ similar encodings.","body":"You&#39;re using two different things. <code>URLEncoder</code> is for applying <code>application&#47;x-www-form-urlencoded</code> encoding of keys and values, while <code>encodeURIComponent</code> is for encoding URI components. Use the right tool for the job, don&#39;t mix two different things just because they (seem to) <i>share</i> similar encodings."},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1689854794,"post_id":76728186,"comment_id":135273955,"body_markdown":"@MarkRotteveel, a URL is a URI.","body":"@MarkRotteveel, a URL is a URI."},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1689855168,"post_id":76728186,"comment_id":135274046,"body_markdown":"There are some conversion examples in the _Mozilla_ documentation; _https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/encodeURIComponent_.","body":"There are some conversion examples in the <i>Mozilla</i> documentation; <i><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/encodeURIComponent\" rel=\"nofollow noreferrer\">developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/&hellip;</a></i>."},{"owner":{"account_id":213468,"reputation":103489,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1689870067,"post_id":76728186,"comment_id":135277839,"body_markdown":"@Reilas My point is that `URLEncoder` **does not encode URI/URL components**, it encodes string so they are valid keys or values for `application/x-www-form-urlencoded` (the basic encoded form of a HTML form), so it is not the equivalent of `encodeURIComponent`, which is for encoding path parts of a URI/URL.","body":"@Reilas My point is that <code>URLEncoder</code> <b>does not encode URI/URL components</b>, it encodes string so they are valid keys or values for <code>application&#47;x-www-form-urlencoded</code> (the basic encoded form of a HTML form), so it is not the equivalent of <code>encodeURIComponent</code>, which is for encoding path parts of a URI/URL."},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1689882317,"post_id":76728186,"comment_id":135280149,"body_markdown":"@MarkRotteveel, I must be misunderstanding.  Are they not interchangeable?  Even the _Mozilla_ documentation is providing examples.","body":"@MarkRotteveel, I must be misunderstanding.  Are they not interchangeable?  Even the <i>Mozilla</i> documentation is providing examples."},{"owner":{"account_id":213468,"reputation":103489,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1689921675,"post_id":76728186,"comment_id":135284215,"body_markdown":"@Reilas They use the same percent-encoding scheme, so they will seem to be interchangeable, until they are not... To be clear, the (IIRC only) difference is how spaces are encoded with a `+` instead of %20, because `application/x-www-form-urlencoded` is based on an older version of URI encoding.","body":"@Reilas They use the same percent-encoding scheme, so they will seem to be interchangeable, until they are not... To be clear, the (IIRC only) difference is how spaces are encoded with a <code>+</code> instead of %20, because <code>application&#47;x-www-form-urlencoded</code> is based on an older version of URI encoding."},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1689945223,"post_id":76728186,"comment_id":135288653,"body_markdown":"@MarkRotteveel, possibly it depends on the browser.  Chrome decodes it correctly, I&#39;m not sure about the others.","body":"@MarkRotteveel, possibly it depends on the browser.  Chrome decodes it correctly, I&#39;m not sure about the others."}],"answers":[{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1689845738,"creation_date":1689845738,"answer_id":76728550,"question_id":76728186,"body_markdown":"As a note, the _encodeURIComponent_ method didn&#39;t encode the parentheses, either.\r\n\r\nJust use the _[String.replaceAll](https://262.ecma-international.org/14.0/#sec-string.prototype.replaceall)_ method.\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n    var string = encodeURIComponent(&quot;tata, abcd &amp; xyz - 1/2kg ()&quot;)\r\n    string = string.replaceAll(&#39;%20&#39;, &#39;+&#39;)\r\n\r\n    console.log(string)\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\nIf you wanted to escape the parentheses, just use the same method.\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n    var string = encodeURIComponent(&quot;tata, abcd &amp; xyz - 1/2kg ()&quot;)\r\n    string = string.replaceAll(&#39;%20&#39;, &#39;+&#39;)\r\n    string = string.replaceAll(&#39;(&#39;, &#39;%28&#39;)\r\n    string = string.replaceAll(&#39;)&#39;, &#39;%29&#39;)\r\n\r\n    console.log(string)\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\nAnd, when you decode the value, make sure to replace the _+_ signs prior to the _decodeURIComponent_ call.\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n    var string = encodeURIComponent(&quot;tata, abcd &amp; xyz - 1/2kg ()&quot;)\r\n    string = string.replaceAll(&#39;%20&#39;, &#39;+&#39;)\r\n    string = string.replaceAll(&#39;(&#39;, &#39;%28&#39;)\r\n    string = string.replaceAll(&#39;)&#39;, &#39;%29&#39;)\r\n\r\n    console.log(string)\r\n\r\n    string = string.replaceAll(&#39;+&#39;, &#39; &#39;)\r\n    string = decodeURIComponent(string)\r\n\r\n    console.log(string)\r\n\r\n&lt;!-- end snippet --&gt;","title":"encode url in java and javascript yielding different results","body":"<p>As a note, the <em>encodeURIComponent</em> method didn't encode the parentheses, either.</p>\n<p>Just use the <em><a href=\"https://262.ecma-international.org/14.0/#sec-string.prototype.replaceall\" rel=\"nofollow noreferrer\">String.replaceAll</a></em> method.</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>var string = encodeURIComponent(\"tata, abcd &amp; xyz - 1/2kg ()\")\nstring = string.replaceAll('%20', '+')\n\nconsole.log(string)</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p>If you wanted to escape the parentheses, just use the same method.</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>var string = encodeURIComponent(\"tata, abcd &amp; xyz - 1/2kg ()\")\nstring = string.replaceAll('%20', '+')\nstring = string.replaceAll('(', '%28')\nstring = string.replaceAll(')', '%29')\n\nconsole.log(string)</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p>And, when you decode the value, make sure to replace the <em>+</em> signs prior to the <em>decodeURIComponent</em> call.</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>var string = encodeURIComponent(\"tata, abcd &amp; xyz - 1/2kg ()\")\nstring = string.replaceAll('%20', '+')\nstring = string.replaceAll('(', '%28')\nstring = string.replaceAll(')', '%29')\n\nconsole.log(string)\n\nstring = string.replaceAll('+', ' ')\nstring = decodeURIComponent(string)\n\nconsole.log(string)</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}],"owner":{"account_id":5684060,"reputation":1093,"user_id":4494166,"accept_rate":0,"display_name":"Ravi Soni"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":46,"favorite_count":0,"down_vote_count":3,"up_vote_count":1,"answer_count":1,"score":-2,"last_activity_date":1689845738,"creation_date":1689843049,"question_id":76728186,"body_markdown":"I have a requirement to generate the url and use it as a sitemap.\r\nBut, if the url is different on frontend and backend, then there&#39;s a redirection will happen to the url the front-end uses, due to which google seo ranking is going low. So i need to generate same result in backend and frontend for both the results.\r\n\r\n\r\n```\r\nJAVA CODE\r\n@Test\r\n    public void testUrl() {\r\n        String s = &quot;tata, abcd &amp; xyz - 1/2kg ()&quot;;\r\n        String encode = URLEncoder.encode(s, StandardCharsets.UTF_8);\r\n        System.out.println(encode);\r\n    }\r\nRESULT: tata%2C+abcd+%26+xyz+-+1%2F2kg+%28%29\r\n\r\n=====\r\nJS CODE\r\nencodeURIComponent(&quot;tata, abcd &amp; xyz - 1/2kg ()&quot;);\r\nRESULT: tata%2C%20abcd%20%26%20xyz%20-%201%2F2kg%20()\r\n```\r\n\r\nCan you please help me yield same result for both.\r\nI am more in favor of &#39;+&#39; sign instead of %20","title":"encode url in java and javascript yielding different results","body":"<p>I have a requirement to generate the url and use it as a sitemap.\nBut, if the url is different on frontend and backend, then there's a redirection will happen to the url the front-end uses, due to which google seo ranking is going low. So i need to generate same result in backend and frontend for both the results.</p>\n<pre><code>JAVA CODE\n@Test\n    public void testUrl() {\n        String s = &quot;tata, abcd &amp; xyz - 1/2kg ()&quot;;\n        String encode = URLEncoder.encode(s, StandardCharsets.UTF_8);\n        System.out.println(encode);\n    }\nRESULT: tata%2C+abcd+%26+xyz+-+1%2F2kg+%28%29\n\n=====\nJS CODE\nencodeURIComponent(&quot;tata, abcd &amp; xyz - 1/2kg ()&quot;);\nRESULT: tata%2C%20abcd%20%26%20xyz%20-%201%2F2kg%20()\n</code></pre>\n<p>Can you please help me yield same result for both.\nI am more in favor of '+' sign instead of %20</p>\n"},{"tags":["java","owl-api","swrl","description-logic","hermit"],"comments":[{"owner":{"account_id":6077505,"reputation":8407,"user_id":4744359,"display_name":"UninformedUser"},"score":1,"creation_date":1689852871,"post_id":76728453,"comment_id":135273522,"body_markdown":"HermiT inference with SWRL is incomplete for transitive properties. Workaround: you can switch your modelling, i.e. you use an SWRL rule for the transitivity and mark the property as irreflexive.","body":"HermiT inference with SWRL is incomplete for transitive properties. Workaround: you can switch your modelling, i.e. you use an SWRL rule for the transitivity and mark the property as irreflexive."},{"owner":{"account_id":22198269,"reputation":113,"user_id":16439343,"display_name":"Chaos"},"score":0,"creation_date":1689858095,"post_id":76728453,"comment_id":135274777,"body_markdown":"Thanks @UninformedUser, that definitely did it! I can now avoid circular delegation.","body":"Thanks @UninformedUser, that definitely did it! I can now avoid circular delegation."}],"owner":{"account_id":22198269,"reputation":113,"user_id":16439343,"display_name":"Chaos"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689845565,"creation_date":1689845131,"question_id":76728453,"body_markdown":"I am currently using OWLAPI and the HermiT reasoner on a simple ontology `O` modelling delegation.\r\n\r\n`O` represents the M.W.E. showing the issue I am facing and defines a single class `Person`, a single object property `delegates(.,.)` (whose domain and range are `Person`) and three individual of type `Person` (A, B and C). Finally, I stated `delegates(A, B)`, `delegates(B, C)`, `delegates(C, A)`.\r\n\r\nI am trying to enforce the existence of an irreflexive transitive object property to cause an inconsistency in the ontology when a direct or indirect circular delegation exists.\r\n\r\nTo the best of my knowledge, this type of property is unsupported since it is non-simple.\r\n\r\nI tried to work around this issue defining a SWRL rule of the shape:\r\n` Person(?p), delegates(?p, ?p) -&gt; owl:Nothing(?p) `; however, HermiT DOES NOT identify any inconsistency, despite the fact that transitivity allows to infer that `delegates(A, A)`.\r\n\r\nI tried the Pellet reasoner and the ontology is correctly declared inconsistent (after that Proteg&#232; badly hangs and the UI becomes inconsistent as well), however in the non-MWE I have so many assertions that the Pellet reasoner is unable to process them in a practical time. This is why I am using HermiT, version `1.4.3.456`. (I also tried the same inference under the latest version `1.4.5.519` with no inconsistency result.)\r\n\r\nAny suggestion to cause the inconsistency would be appreciated.\r\n\r\nHere is the xml code encoding `O`, I had to remove the ontology and prefix tags to avoid to trigger the `spam filter`.\r\n\r\n```\r\n &lt;Declaration&gt;\r\n\t  &lt;Class IRI=&quot;#Person&quot;/&gt;\r\n &lt;/Declaration&gt;\r\n &lt;Declaration&gt;\r\n\t  &lt;ObjectProperty IRI=&quot;#delegates&quot;/&gt;\r\n &lt;/Declaration&gt;\r\n &lt;Declaration&gt;\r\n\t  &lt;NamedIndividual IRI=&quot;#A&quot;/&gt;\r\n &lt;/Declaration&gt;\r\n &lt;Declaration&gt;\r\n\t  &lt;NamedIndividual IRI=&quot;#B&quot;/&gt;\r\n &lt;/Declaration&gt;\r\n &lt;Declaration&gt;\r\n\t  &lt;NamedIndividual IRI=&quot;#C&quot;/&gt;\r\n &lt;/Declaration&gt;\r\n &lt;ClassAssertion&gt;\r\n\t  &lt;Class IRI=&quot;#Person&quot;/&gt;\r\n\t  &lt;NamedIndividual IRI=&quot;#A&quot;/&gt;\r\n &lt;/ClassAssertion&gt;\r\n &lt;ClassAssertion&gt;\r\n\t  &lt;Class IRI=&quot;#Person&quot;/&gt;\r\n\t  &lt;NamedIndividual IRI=&quot;#B&quot;/&gt;\r\n &lt;/ClassAssertion&gt;\r\n &lt;ClassAssertion&gt;\r\n\t  &lt;Class IRI=&quot;#Person&quot;/&gt;\r\n\t  &lt;NamedIndividual IRI=&quot;#C&quot;/&gt;\r\n &lt;/ClassAssertion&gt;\r\n &lt;ObjectPropertyAssertion&gt;\r\n\t  &lt;ObjectProperty IRI=&quot;#delegates&quot;/&gt;\r\n\t  &lt;NamedIndividual IRI=&quot;#A&quot;/&gt;\r\n\t  &lt;NamedIndividual IRI=&quot;#B&quot;/&gt;\r\n &lt;/ObjectPropertyAssertion&gt;\r\n &lt;ObjectPropertyAssertion&gt;\r\n\t  &lt;ObjectProperty IRI=&quot;#delegates&quot;/&gt;\r\n\t  &lt;NamedIndividual IRI=&quot;#B&quot;/&gt;\r\n\t  &lt;NamedIndividual IRI=&quot;#C&quot;/&gt;\r\n &lt;/ObjectPropertyAssertion&gt;\r\n &lt;ObjectPropertyAssertion&gt;\r\n\t  &lt;ObjectProperty IRI=&quot;#delegates&quot;/&gt;\r\n\t  &lt;NamedIndividual IRI=&quot;#C&quot;/&gt;\r\n\t  &lt;NamedIndividual IRI=&quot;#A&quot;/&gt;\r\n &lt;/ObjectPropertyAssertion&gt;\r\n &lt;TransitiveObjectProperty&gt;\r\n\t  &lt;ObjectProperty IRI=&quot;#delegates&quot;/&gt;\r\n &lt;/TransitiveObjectProperty&gt;\r\n &lt;ObjectPropertyDomain&gt;\r\n\t  &lt;ObjectProperty IRI=&quot;#delegates&quot;/&gt;\r\n\t  &lt;Class IRI=&quot;#Person&quot;/&gt;\r\n &lt;/ObjectPropertyDomain&gt;\r\n &lt;ObjectPropertyRange&gt;\r\n\t  &lt;ObjectProperty IRI=&quot;#delegates&quot;/&gt;\r\n\t  &lt;Class IRI=&quot;#Person&quot;/&gt;\r\n &lt;/ObjectPropertyRange&gt;\r\n &lt;DLSafeRule&gt;\r\n\t  &lt;Body&gt;\r\n\t\t\t&lt;ClassAtom&gt;\r\n\t\t\t\t &lt;Class IRI=&quot;#Person&quot;/&gt;\r\n\t\t\t\t &lt;Variable IRI=&quot;urn:swrl:var#p&quot;/&gt;\r\n\t\t\t&lt;/ClassAtom&gt;\r\n\t\t\t&lt;ObjectPropertyAtom&gt;\r\n\t\t\t\t &lt;ObjectProperty IRI=&quot;#delegates&quot;/&gt;\r\n\t\t\t\t &lt;Variable IRI=&quot;urn:swrl:var#p&quot;/&gt;\r\n\t\t\t\t &lt;Variable IRI=&quot;urn:swrl:var#p&quot;/&gt;\r\n\t\t\t&lt;/ObjectPropertyAtom&gt;\r\n\t  &lt;/Body&gt;\r\n\t  &lt;Head&gt;\r\n\t\t\t&lt;ClassAtom&gt;\r\n\t\t\t\t &lt;Class abbreviatedIRI=&quot;owl:Nothing&quot;/&gt;\r\n\t\t\t\t &lt;Variable IRI=&quot;urn:swrl:var#p&quot;/&gt;\r\n\t\t\t&lt;/ClassAtom&gt;\r\n\t  &lt;/Head&gt;\r\n &lt;/DLSafeRule&gt;\r\n\r\n```\r\n","title":"OWLAPI and HermiT reasoner: can not force irreflexive transitive object property","body":"<p>I am currently using OWLAPI and the HermiT reasoner on a simple ontology <code>O</code> modelling delegation.</p>\n<p><code>O</code> represents the M.W.E. showing the issue I am facing and defines a single class <code>Person</code>, a single object property <code>delegates(.,.)</code> (whose domain and range are <code>Person</code>) and three individual of type <code>Person</code> (A, B and C). Finally, I stated <code>delegates(A, B)</code>, <code>delegates(B, C)</code>, <code>delegates(C, A)</code>.</p>\n<p>I am trying to enforce the existence of an irreflexive transitive object property to cause an inconsistency in the ontology when a direct or indirect circular delegation exists.</p>\n<p>To the best of my knowledge, this type of property is unsupported since it is non-simple.</p>\n<p>I tried to work around this issue defining a SWRL rule of the shape:\n<code>Person(?p), delegates(?p, ?p) -&gt; owl:Nothing(?p)</code>; however, HermiT DOES NOT identify any inconsistency, despite the fact that transitivity allows to infer that <code>delegates(A, A)</code>.</p>\n<p>I tried the Pellet reasoner and the ontology is correctly declared inconsistent (after that Protegè badly hangs and the UI becomes inconsistent as well), however in the non-MWE I have so many assertions that the Pellet reasoner is unable to process them in a practical time. This is why I am using HermiT, version <code>1.4.3.456</code>. (I also tried the same inference under the latest version <code>1.4.5.519</code> with no inconsistency result.)</p>\n<p>Any suggestion to cause the inconsistency would be appreciated.</p>\n<p>Here is the xml code encoding <code>O</code>, I had to remove the ontology and prefix tags to avoid to trigger the <code>spam filter</code>.</p>\n<pre><code> &lt;Declaration&gt;\n      &lt;Class IRI=&quot;#Person&quot;/&gt;\n &lt;/Declaration&gt;\n &lt;Declaration&gt;\n      &lt;ObjectProperty IRI=&quot;#delegates&quot;/&gt;\n &lt;/Declaration&gt;\n &lt;Declaration&gt;\n      &lt;NamedIndividual IRI=&quot;#A&quot;/&gt;\n &lt;/Declaration&gt;\n &lt;Declaration&gt;\n      &lt;NamedIndividual IRI=&quot;#B&quot;/&gt;\n &lt;/Declaration&gt;\n &lt;Declaration&gt;\n      &lt;NamedIndividual IRI=&quot;#C&quot;/&gt;\n &lt;/Declaration&gt;\n &lt;ClassAssertion&gt;\n      &lt;Class IRI=&quot;#Person&quot;/&gt;\n      &lt;NamedIndividual IRI=&quot;#A&quot;/&gt;\n &lt;/ClassAssertion&gt;\n &lt;ClassAssertion&gt;\n      &lt;Class IRI=&quot;#Person&quot;/&gt;\n      &lt;NamedIndividual IRI=&quot;#B&quot;/&gt;\n &lt;/ClassAssertion&gt;\n &lt;ClassAssertion&gt;\n      &lt;Class IRI=&quot;#Person&quot;/&gt;\n      &lt;NamedIndividual IRI=&quot;#C&quot;/&gt;\n &lt;/ClassAssertion&gt;\n &lt;ObjectPropertyAssertion&gt;\n      &lt;ObjectProperty IRI=&quot;#delegates&quot;/&gt;\n      &lt;NamedIndividual IRI=&quot;#A&quot;/&gt;\n      &lt;NamedIndividual IRI=&quot;#B&quot;/&gt;\n &lt;/ObjectPropertyAssertion&gt;\n &lt;ObjectPropertyAssertion&gt;\n      &lt;ObjectProperty IRI=&quot;#delegates&quot;/&gt;\n      &lt;NamedIndividual IRI=&quot;#B&quot;/&gt;\n      &lt;NamedIndividual IRI=&quot;#C&quot;/&gt;\n &lt;/ObjectPropertyAssertion&gt;\n &lt;ObjectPropertyAssertion&gt;\n      &lt;ObjectProperty IRI=&quot;#delegates&quot;/&gt;\n      &lt;NamedIndividual IRI=&quot;#C&quot;/&gt;\n      &lt;NamedIndividual IRI=&quot;#A&quot;/&gt;\n &lt;/ObjectPropertyAssertion&gt;\n &lt;TransitiveObjectProperty&gt;\n      &lt;ObjectProperty IRI=&quot;#delegates&quot;/&gt;\n &lt;/TransitiveObjectProperty&gt;\n &lt;ObjectPropertyDomain&gt;\n      &lt;ObjectProperty IRI=&quot;#delegates&quot;/&gt;\n      &lt;Class IRI=&quot;#Person&quot;/&gt;\n &lt;/ObjectPropertyDomain&gt;\n &lt;ObjectPropertyRange&gt;\n      &lt;ObjectProperty IRI=&quot;#delegates&quot;/&gt;\n      &lt;Class IRI=&quot;#Person&quot;/&gt;\n &lt;/ObjectPropertyRange&gt;\n &lt;DLSafeRule&gt;\n      &lt;Body&gt;\n            &lt;ClassAtom&gt;\n                 &lt;Class IRI=&quot;#Person&quot;/&gt;\n                 &lt;Variable IRI=&quot;urn:swrl:var#p&quot;/&gt;\n            &lt;/ClassAtom&gt;\n            &lt;ObjectPropertyAtom&gt;\n                 &lt;ObjectProperty IRI=&quot;#delegates&quot;/&gt;\n                 &lt;Variable IRI=&quot;urn:swrl:var#p&quot;/&gt;\n                 &lt;Variable IRI=&quot;urn:swrl:var#p&quot;/&gt;\n            &lt;/ObjectPropertyAtom&gt;\n      &lt;/Body&gt;\n      &lt;Head&gt;\n            &lt;ClassAtom&gt;\n                 &lt;Class abbreviatedIRI=&quot;owl:Nothing&quot;/&gt;\n                 &lt;Variable IRI=&quot;urn:swrl:var#p&quot;/&gt;\n            &lt;/ClassAtom&gt;\n      &lt;/Head&gt;\n &lt;/DLSafeRule&gt;\n\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":357454,"reputation":77335,"user_id":697630,"accept_rate":84,"display_name":"Edwin Dalorzo"},"score":2,"creation_date":1338304094,"post_id":10801746,"comment_id":14053796,"body_markdown":"Perpahs you can have the best of both worlds using a [ListResourceBundle](http://docs.oracle.com/javase/7/docs/api/index.html?java/util/ListResourceBundle.html)","body":"Perpahs you can have the best of both worlds using a <a href=\"http://docs.oracle.com/javase/7/docs/api/index.html?java/util/ListResourceBundle.html\" rel=\"nofollow noreferrer\">ListResourceBundle</a>"}],"answers":[{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":38,"is_accepted":true,"score":38,"last_activity_date":1689844966,"creation_date":1338303976,"answer_id":10801805,"question_id":10801746,"body_markdown":"Use hardwired constants in your Java code when *you don&#39;t want* users / deployers / testers / tests changing them.\r\n\r\nUse a properties file when *you do want* this to be a possibility.\r\n\r\nThe point is that changing a hard-wired constant in your application&#39;s source code entails editing the source code, rebuilding and redeploying.  By contrast, changing a properties file may be as simple as firing up NotePad.\r\n\r\n---------------\r\n\r\nYou commented:\r\n\r\n&gt; As you said that changing properties file is simple whereas changing constants file requires us to rebuild the application. So, shouldn&#39;t we always prefer to use properties file?\r\n\r\nNo.  Not always.  *For example*, if you distribute your application to end users to install on their machines and it has constants that you do not want users to change it would be a bad idea to put them in a properties file.\r\n\r\nIt is impossible to reduce this to an &quot;always prefer X&quot; recommendation.  **You need to understand your own application requirements and decide for yourself.**","title":"Properties file vs Constants class in Java","body":"<p>Use hardwired constants in your Java code when <em>you don't want</em> users / deployers / testers / tests changing them.</p>\n<p>Use a properties file when <em>you do want</em> this to be a possibility.</p>\n<p>The point is that changing a hard-wired constant in your application's source code entails editing the source code, rebuilding and redeploying.  By contrast, changing a properties file may be as simple as firing up NotePad.</p>\n<hr />\n<p>You commented:</p>\n<blockquote>\n<p>As you said that changing properties file is simple whereas changing constants file requires us to rebuild the application. So, shouldn't we always prefer to use properties file?</p>\n</blockquote>\n<p>No.  Not always.  <em>For example</em>, if you distribute your application to end users to install on their machines and it has constants that you do not want users to change it would be a bad idea to put them in a properties file.</p>\n<p>It is impossible to reduce this to an &quot;always prefer X&quot; recommendation.  <strong>You need to understand your own application requirements and decide for yourself.</strong></p>\n"},{"tags":[],"owner":{"account_id":138790,"reputation":61721,"user_id":343955,"accept_rate":85,"display_name":"adarshr"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1338303985,"creation_date":1338303985,"answer_id":10801811,"question_id":10801746,"body_markdown":" - **Constants** - when you don&#39;t mind re-compiling the application each time you change value. Sort of an irony here. Why would you change something if it has been called a *constant* :)\r\n\r\n - **Properties file** - when you want the luxury of just changing the value and maybe restarting the application to pick up the change.","title":"Properties file vs Constants class in Java","body":"<ul>\n<li><p><strong>Constants</strong> - when you don't mind re-compiling the application each time you change value. Sort of an irony here. Why would you change something if it has been called a <em>constant</em> :)</p></li>\n<li><p><strong>Properties file</strong> - when you want the luxury of just changing the value and maybe restarting the application to pick up the change.</p></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":5460,"reputation":6354,"user_id":8792,"display_name":"Peter"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1338304023,"creation_date":1338304023,"answer_id":10801820,"question_id":10801746,"body_markdown":"Generally, anything in a constants class is considered to be &quot;hardcoded&quot;; that is, you are required to re-compile to make changes.\r\n\r\nUse a `.properties` file for things like configuration, where you don&#39;t have to be forced to re-compile just to make changes. In this way, you can simply change the properties file and restart your application.","title":"Properties file vs Constants class in Java","body":"<p>Generally, anything in a constants class is considered to be \"hardcoded\"; that is, you are required to re-compile to make changes.</p>\n\n<p>Use a <code>.properties</code> file for things like configuration, where you don't have to be forced to re-compile just to make changes. In this way, you can simply change the properties file and restart your application.</p>\n"},{"tags":[],"owner":{"account_id":307227,"reputation":2105,"user_id":618407,"accept_rate":80,"display_name":"ftr"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1338456423,"creation_date":1338304054,"answer_id":10801827,"question_id":10801746,"body_markdown":"You usually use property files when you want to specify parameters that vary from deployment to deployment or over time. \r\n\r\nYou use constants when the parameters are not dynamic and thus not supposed to be changed depending on external factors. You have to recompile the class every time you change a value.","title":"Properties file vs Constants class in Java","body":"<p>You usually use property files when you want to specify parameters that vary from deployment to deployment or over time. </p>\n\n<p>You use constants when the parameters are not dynamic and thus not supposed to be changed depending on external factors. You have to recompile the class every time you change a value.</p>\n"},{"tags":[],"owner":{"account_id":1469954,"reputation":1916,"user_id":1381767,"accept_rate":75,"display_name":"javatutorial"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1338304067,"creation_date":1338304067,"answer_id":10801832,"question_id":10801746,"body_markdown":"There are many different aspects to consider. The most important are that\r\n\r\n - you can edit properties files and use it without re-compiling your application;\r\n - properties files contain no code, so everybody can change them without any Java knowledge.\r\n\r\nThese aspects make properties file really useful for storing configurations.\r\n\r\nOn the other hand, constants classes need to be compiled, but are &quot;safer&quot; if you plan not to change those constants very often.","title":"Properties file vs Constants class in Java","body":"<p>There are many different aspects to consider. The most important are that</p>\n\n<ul>\n<li>you can edit properties files and use it without re-compiling your application;</li>\n<li>properties files contain no code, so everybody can change them without any Java knowledge.</li>\n</ul>\n\n<p>These aspects make properties file really useful for storing configurations.</p>\n\n<p>On the other hand, constants classes need to be compiled, but are \"safer\" if you plan not to change those constants very often.</p>\n"},{"tags":[],"owner":{"account_id":62111,"reputation":40153,"user_id":184730,"accept_rate":72,"display_name":"fastcodejava"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1338304274,"creation_date":1338304274,"answer_id":10801888,"question_id":10801746,"body_markdown":"Constants are fixed in compile time. So if you don&#39;t foresee any changes of values Constants will be good idea.","title":"Properties file vs Constants class in Java","body":"<p>Constants are fixed in compile time. So if you don't foresee any changes of values Constants will be good idea.</p>\n"},{"tags":[],"owner":{"account_id":1498088,"reputation":96,"user_id":1403575,"display_name":"SantoshK"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1338304354,"creation_date":1338304354,"answer_id":10801915,"question_id":10801746,"body_markdown":"Properties have the advantage of being externalizable. You can have one property file for development, another for test and another for production. \r\nA lot of times, though, rarely changed properties, that are internal to the workings of the software are put into properties file making them hard to manage.\r\n\r\nOTOH constants are compiled so any errors will be caught at compile time.\r\n\r\nSo the answer is , it depends. If the values in the properties are truly configuration changes you want to externalize then use properties file. else make them Java constants. You might end up using both, though.","title":"Properties file vs Constants class in Java","body":"<p>Properties have the advantage of being externalizable. You can have one property file for development, another for test and another for production. \nA lot of times, though, rarely changed properties, that are internal to the workings of the software are put into properties file making them hard to manage.</p>\n\n<p>OTOH constants are compiled so any errors will be caught at compile time.</p>\n\n<p>So the answer is , it depends. If the values in the properties are truly configuration changes you want to externalize then use properties file. else make them Java constants. You might end up using both, though.</p>\n"},{"tags":[],"owner":{"account_id":1504315,"reputation":4786,"user_id":1408085,"accept_rate":73,"display_name":"techuser soma"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1338322830,"creation_date":1338322830,"answer_id":10806141,"question_id":10801746,"body_markdown":"My check list\r\n\r\n**Property file:**\r\n\r\nIs it configurable per environemnt etc.\r\n\r\nMessages, labels etc.\r\n\r\nApplicable to particular situation (list of states for rules etc). \r\nkey-value pairs.\r\nCan be modified by someone other than developer ie, analysts, business users etc.\r\n\r\n\r\n**Constant:**\r\n\r\nAre constants. Not configurable. \r\nMostly for optimization and reuse. To avoid keys being scattered.\r\n\r\nFor constants like YES = &quot;yes&quot;. Not really a key value.\r\nKeys for cache etc.\r\n\r\nConstants to ensure that retrieval and set use the same key even though from different places in the application, EXAMPLE xyz.put(KeyConstants.SOME_KEY, &quot;somevalue&quot;); \r\nxyz.get(KeyConstants.SOME_KEY) from different classes, ofcouse xyz being shared or singleton.","title":"Properties file vs Constants class in Java","body":"<p>My check list</p>\n\n<p><strong>Property file:</strong></p>\n\n<p>Is it configurable per environemnt etc.</p>\n\n<p>Messages, labels etc.</p>\n\n<p>Applicable to particular situation (list of states for rules etc). \nkey-value pairs.\nCan be modified by someone other than developer ie, analysts, business users etc.</p>\n\n<p><strong>Constant:</strong></p>\n\n<p>Are constants. Not configurable. \nMostly for optimization and reuse. To avoid keys being scattered.</p>\n\n<p>For constants like YES = \"yes\". Not really a key value.\nKeys for cache etc.</p>\n\n<p>Constants to ensure that retrieval and set use the same key even though from different places in the application, EXAMPLE xyz.put(KeyConstants.SOME_KEY, \"somevalue\"); \nxyz.get(KeyConstants.SOME_KEY) from different classes, ofcouse xyz being shared or singleton.</p>\n"}],"owner":{"account_id":1176664,"reputation":20820,"user_id":1152500,"accept_rate":47,"display_name":"Anand"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":15153,"favorite_count":0,"down_vote_count":0,"up_vote_count":29,"accepted_answer_id":10801805,"answer_count":8,"score":29,"last_activity_date":1689844966,"creation_date":1338303787,"question_id":10801746,"body_markdown":"I am a bit confused between using a constants file and properties file in Java.\r\n\r\nHow to decide when to use *Constants.java* and when to use a *.properties* file?","title":"Properties file vs Constants class in Java","body":"<p>I am a bit confused between using a constants file and properties file in Java.</p>\n\n<p>How to decide when to use <em>Constants.java</em> and when to use a <em>.properties</em> file?</p>\n"},{"tags":["java","optional-chaining"],"comments":[{"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":0,"creation_date":1689834446,"post_id":76727184,"comment_id":135269925,"body_markdown":"You just want a log message, but not an exception. Is that correct?","body":"You just want a log message, but not an exception. Is that correct?"},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1689834808,"post_id":76727184,"comment_id":135269976,"body_markdown":"Just interpose `.ifPresentOrElse()` with a null `Consumer` and a logging `Runnable` after each step of interest.","body":"Just interpose <code>.ifPresentOrElse()</code> with a null <code>Consumer</code> and a logging <code>Runnable</code> after each step of interest."},{"owner":{"account_id":1993980,"reputation":5458,"user_id":1787314,"accept_rate":60,"display_name":"Nick Div"},"score":0,"creation_date":1689834857,"post_id":76727184,"comment_id":135269983,"body_markdown":"@Sweeper Yes thats correct","body":"@Sweeper Yes thats correct"},{"owner":{"account_id":1993980,"reputation":5458,"user_id":1787314,"accept_rate":60,"display_name":"Nick Div"},"score":0,"creation_date":1689834924,"post_id":76727184,"comment_id":135269992,"body_markdown":"@user207421 Would you be able to share an example?","body":"@user207421 Would you be able to share an example?"},{"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":1,"creation_date":1689835130,"post_id":76727184,"comment_id":135270035,"body_markdown":"I would just write my own `LoggableOptional` or something like that for this. The built-in `Optional` isn&#39;t meant for this kind of thing.","body":"I would just write my own <code>LoggableOptional</code> or something like that for this. The built-in <code>Optional</code> isn&#39;t meant for this kind of thing."},{"owner":{"account_id":1993980,"reputation":5458,"user_id":1787314,"accept_rate":60,"display_name":"Nick Div"},"score":0,"creation_date":1689836796,"post_id":76727184,"comment_id":135270372,"body_markdown":"@Sweeper You mean a custom Optional class which would allow to LOG incase a null is found half-way?","body":"@Sweeper You mean a custom Optional class which would allow to LOG incase a null is found half-way?"},{"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":0,"creation_date":1689836914,"post_id":76727184,"comment_id":135270403,"body_markdown":"Yes. Write your own class that has a `map` that also takes a custom message.","body":"Yes. Write your own class that has a <code>map</code> that also takes a custom message."},{"owner":{"account_id":1993980,"reputation":5458,"user_id":1787314,"accept_rate":60,"display_name":"Nick Div"},"score":0,"creation_date":1689837134,"post_id":76727184,"comment_id":135270446,"body_markdown":"@Sweeper That is definitely a good idea but problem is in my entire code base this edge case only happens once. Not sure if its a good idea to write a new class for handling this one scenario :(","body":"@Sweeper That is definitely a good idea but problem is in my entire code base this edge case only happens once. Not sure if its a good idea to write a new class for handling this one scenario :("}],"answers":[{"tags":[],"owner":{"account_id":19934545,"reputation":554,"user_id":14607529,"display_name":"ODDminus1"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689837008,"creation_date":1689835809,"answer_id":76727327,"question_id":76727184,"body_markdown":"You can achieve the required behaviour with some exception handling like this:\r\n\r\n```\r\npublic class Test {\r\n    public static void main(String[] args) {\r\n        Outer outer = new Outer(new Nested(new Inner(&quot;value&quot;)));\r\n//        Outer outer = new Outer(new Nested(new Inner(null)));\r\n//        Outer outer = new Outer(new Nested(null));\r\n//        Outer outer = new Outer(null);\r\n//        Outer outer = null;\r\n        try {\r\n            Optional.ofNullable(outer).or(() -&gt; throwEx(&quot;Outer was null&quot;))\r\n                    .map(Outer::nested).or(() -&gt; throwEx(&quot;Nested was null&quot;))\r\n                    .map(Nested::inner).or(() -&gt; throwEx(&quot;Inner was null&quot;))\r\n                    .map(Inner::foo).or(() -&gt; throwEx(&quot;Foo was null&quot;))\r\n                    .ifPresent(System.out::println);\r\n        } catch (NullValueException e) {\r\n            System.out.println(e.getMessage());\r\n        }\r\n    }\r\n\r\n    private static &lt;T&gt; T throwEx(String msg) {\r\n        throw new NullValueException(msg);\r\n    }\r\n}\r\n\r\nclass NullValueException extends RuntimeException {\r\n    public NullValueException(String msg) {\r\n        super(msg);\r\n    }\r\n}\r\n\r\nrecord Outer(Nested nested) {\r\n}\r\n\r\nrecord Nested(Inner inner) {\r\n}\r\n\r\nrecord Inner(String foo) {\r\n}\r\n```","title":"Is it possible to LOG different messages based on which step null is encountered while doing nested null check with Optional and map","body":"<p>You can achieve the required behaviour with some exception handling like this:</p>\n<pre><code>public class Test {\n    public static void main(String[] args) {\n        Outer outer = new Outer(new Nested(new Inner(&quot;value&quot;)));\n//        Outer outer = new Outer(new Nested(new Inner(null)));\n//        Outer outer = new Outer(new Nested(null));\n//        Outer outer = new Outer(null);\n//        Outer outer = null;\n        try {\n            Optional.ofNullable(outer).or(() -&gt; throwEx(&quot;Outer was null&quot;))\n                    .map(Outer::nested).or(() -&gt; throwEx(&quot;Nested was null&quot;))\n                    .map(Nested::inner).or(() -&gt; throwEx(&quot;Inner was null&quot;))\n                    .map(Inner::foo).or(() -&gt; throwEx(&quot;Foo was null&quot;))\n                    .ifPresent(System.out::println);\n        } catch (NullValueException e) {\n            System.out.println(e.getMessage());\n        }\n    }\n\n    private static &lt;T&gt; T throwEx(String msg) {\n        throw new NullValueException(msg);\n    }\n}\n\nclass NullValueException extends RuntimeException {\n    public NullValueException(String msg) {\n        super(msg);\n    }\n}\n\nrecord Outer(Nested nested) {\n}\n\nrecord Nested(Inner inner) {\n}\n\nrecord Inner(String foo) {\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1689839004,"creation_date":1689837663,"answer_id":76727533,"question_id":76727184,"body_markdown":"If this is a one-off thing, I would write a helper method that &quot;wraps&quot; the method references. The wrapper would return what the wrapped function returns, but if the wrapped method returns null, it also logs a message.\r\n\r\n```\r\nprivate static &lt;T, R&gt; Function&lt;T, R&gt; withNullMessage(Function&lt;? super T, ? extends R&gt; function, String message) {\r\n    return t -&gt; {\r\n        R r = function.apply(t);\r\n        if (r == null) {\r\n            Log.error(message);\r\n        }\r\n        return r;\r\n    };\r\n}\r\n```\r\n\r\n```\r\nOptional.of(foo)\r\n        .map(withNullMessage(Foo::getBar, &quot;Bar is null!&quot;))\r\n        .map(withNullMessage(Bar::getBaz, &quot;Baz is null!&quot;))\r\n        ...\r\n```\r\n\r\nNote that this does not handle the case where `foo` is null. If `foo` is null, this will throw an exception. To handle this, you can start with a definitely-not-null thing,\r\n\r\n```\r\nOptional.of(&quot;&quot;)\r\n        .map(withNullMessage(x -&gt; foo, &quot;Foo is null!&quot;))\r\n        .map(withNullMessage(Foo::getBar, &quot;Bar is null!&quot;))\r\n        .map(withNullMessage(Bar::getBaz, &quot;Baz is null!&quot;))\r\n```\r\n\r\nOr you can write your own `of` that logs nulls.\r\n\r\nAnother drawback of this is that it doesn&#39;t work with `flatMap`s. e.g. this does not work as you&#39;d expect:\r\n\r\n    .flatMap(withNullMessage(Foo::thisReturnsAnotherOptional, &quot;...&quot;))\r\n\r\nYou would need another wrapper method to handle that case.\r\n\r\nIf you need this sort of thing a lot, it&#39;s probably worth it to write your own `Optional`-like type, whose `map` methods take an extra argument.","title":"Is it possible to LOG different messages based on which step null is encountered while doing nested null check with Optional and map","body":"<p>If this is a one-off thing, I would write a helper method that &quot;wraps&quot; the method references. The wrapper would return what the wrapped function returns, but if the wrapped method returns null, it also logs a message.</p>\n<pre><code>private static &lt;T, R&gt; Function&lt;T, R&gt; withNullMessage(Function&lt;? super T, ? extends R&gt; function, String message) {\n    return t -&gt; {\n        R r = function.apply(t);\n        if (r == null) {\n            Log.error(message);\n        }\n        return r;\n    };\n}\n</code></pre>\n<pre><code>Optional.of(foo)\n        .map(withNullMessage(Foo::getBar, &quot;Bar is null!&quot;))\n        .map(withNullMessage(Bar::getBaz, &quot;Baz is null!&quot;))\n        ...\n</code></pre>\n<p>Note that this does not handle the case where <code>foo</code> is null. If <code>foo</code> is null, this will throw an exception. To handle this, you can start with a definitely-not-null thing,</p>\n<pre><code>Optional.of(&quot;&quot;)\n        .map(withNullMessage(x -&gt; foo, &quot;Foo is null!&quot;))\n        .map(withNullMessage(Foo::getBar, &quot;Bar is null!&quot;))\n        .map(withNullMessage(Bar::getBaz, &quot;Baz is null!&quot;))\n</code></pre>\n<p>Or you can write your own <code>of</code> that logs nulls.</p>\n<p>Another drawback of this is that it doesn't work with <code>flatMap</code>s. e.g. this does not work as you'd expect:</p>\n<pre><code>.flatMap(withNullMessage(Foo::thisReturnsAnotherOptional, &quot;...&quot;))\n</code></pre>\n<p>You would need another wrapper method to handle that case.</p>\n<p>If you need this sort of thing a lot, it's probably worth it to write your own <code>Optional</code>-like type, whose <code>map</code> methods take an extra argument.</p>\n"},{"tags":[],"owner":{"account_id":13993199,"reputation":129,"user_id":10362945,"display_name":"Sagar"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689843666,"creation_date":1689843666,"answer_id":76728264,"question_id":76727184,"body_markdown":"Following the algorithm of one-off error mentioned in previous Sweeper&#39;s answer we could implement as below.This will take care of corner null cases as well\r\n```\r\n    public static void clientMethod() {\r\n        Outer validOuter = new Outer(new Nested(new Inner(&quot;s&quot;)));\r\n        Outer nullNested = new Outer(new Nested(null));\r\n        Optional.ofNullable(nullNested)\r\n                .map(outer-&gt;eam(outer, Function.identity(),&quot;Extracted value: Outer was null&quot;))\r\n                .map(outer -&gt;eam(outer, Outer::getNested,&quot;Extracted value:Nested was null&quot;))\r\n                .map(nested-&gt;eam(nested, Nested::getInner,&quot;Extracted value:Inner was null&quot;))\r\n                .map(inner-&gt;eam(inner, Inner::getFoo,&quot;Extracted value:Foo was null&quot;))\r\n                .ifPresent(System.out::println);\r\n    }\r\n\r\n    public static &lt;T,R&gt; R eam (T object,Function&lt;T,R&gt; extracter,String extractedValueNullMessage){\r\n        if(object != null){\r\n            R extractedValue = extracter.apply(object);\r\n            if (extractedValue == null){\r\n                LOG.error(extractedValueNullMessage);\r\n            }\r\n            return extractedValue;\r\n        }\r\n        return null;\r\n    }\r\n```","title":"Is it possible to LOG different messages based on which step null is encountered while doing nested null check with Optional and map","body":"<p>Following the algorithm of one-off error mentioned in previous Sweeper's answer we could implement as below.This will take care of corner null cases as well</p>\n<pre><code>    public static void clientMethod() {\n        Outer validOuter = new Outer(new Nested(new Inner(&quot;s&quot;)));\n        Outer nullNested = new Outer(new Nested(null));\n        Optional.ofNullable(nullNested)\n                .map(outer-&gt;eam(outer, Function.identity(),&quot;Extracted value: Outer was null&quot;))\n                .map(outer -&gt;eam(outer, Outer::getNested,&quot;Extracted value:Nested was null&quot;))\n                .map(nested-&gt;eam(nested, Nested::getInner,&quot;Extracted value:Inner was null&quot;))\n                .map(inner-&gt;eam(inner, Inner::getFoo,&quot;Extracted value:Foo was null&quot;))\n                .ifPresent(System.out::println);\n    }\n\n    public static &lt;T,R&gt; R eam (T object,Function&lt;T,R&gt; extracter,String extractedValueNullMessage){\n        if(object != null){\n            R extractedValue = extracter.apply(object);\n            if (extractedValue == null){\n                LOG.error(extractedValueNullMessage);\n            }\n            return extractedValue;\n        }\n        return null;\n    }\n</code></pre>\n"}],"owner":{"account_id":1993980,"reputation":5458,"user_id":1787314,"accept_rate":60,"display_name":"Nick Div"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76727533,"answer_count":3,"score":0,"last_activity_date":1689843666,"creation_date":1689834200,"question_id":76727184,"body_markdown":"I have a nested object which can return a `null` at any point of time. \r\n\r\nThanks to `Optional` and `map` we can now do nested calls without having to put `null` checks after every get. \r\n\r\nI have a very unique requirement where I need to know at which step exactly did I encounter a null object for e.g. (Copied from [StackOverflow][1])\r\n\r\n    Optional.of(new Outer())\r\n      .map(Outer::getNested)\r\n      .map(Nested::getInner)\r\n      .map(Inner::getFoo)\r\n      .ifPresent(System.out::println);\r\n\r\nHow can I LOG a different kind of log message depending on when and where I encounter a null value? \r\n\r\nThe code below is not valid but I am just trying to explain how it might look like programmatically: \r\n\r\n    Optional.of(outerObject).else(LOG.error(&quot;Outer was null&quot;))\r\n      .map(Outer::getNested).else(LOG.error(&quot;Nested was null&quot;))\r\n      .map(Nested::getInner).else(LOG.error(&quot;Inner was null&quot;))\r\n      .map(Inner::getFoo).else(LOG.error(&quot;Foo was null&quot;))\r\n      .ifPresent(System.out::println);\r\n\r\n  [1]: https://stackoverflow.com/a/74047406/1787314","title":"Is it possible to LOG different messages based on which step null is encountered while doing nested null check with Optional and map","body":"<p>I have a nested object which can return a <code>null</code> at any point of time.</p>\n<p>Thanks to <code>Optional</code> and <code>map</code> we can now do nested calls without having to put <code>null</code> checks after every get.</p>\n<p>I have a very unique requirement where I need to know at which step exactly did I encounter a null object for e.g. (Copied from <a href=\"https://stackoverflow.com/a/74047406/1787314\">StackOverflow</a>)</p>\n<pre><code>Optional.of(new Outer())\n  .map(Outer::getNested)\n  .map(Nested::getInner)\n  .map(Inner::getFoo)\n  .ifPresent(System.out::println);\n</code></pre>\n<p>How can I LOG a different kind of log message depending on when and where I encounter a null value?</p>\n<p>The code below is not valid but I am just trying to explain how it might look like programmatically:</p>\n<pre><code>Optional.of(outerObject).else(LOG.error(&quot;Outer was null&quot;))\n  .map(Outer::getNested).else(LOG.error(&quot;Nested was null&quot;))\n  .map(Nested::getInner).else(LOG.error(&quot;Inner was null&quot;))\n  .map(Inner::getFoo).else(LOG.error(&quot;Foo was null&quot;))\n  .ifPresent(System.out::println);\n</code></pre>\n"},{"tags":["java","spring","proxy-classes","cglib"],"comments":[{"owner":{"account_id":195331,"reputation":275398,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"score":1,"creation_date":1427903570,"post_id":29395202,"comment_id":46966945,"body_markdown":"Why do you want to do this?","body":"Why do you want to do this?"},{"owner":{"account_id":2372918,"reputation":4836,"user_id":2077101,"accept_rate":64,"display_name":"James Watkins"},"score":5,"creation_date":1495127273,"post_id":29395202,"comment_id":75132850,"body_markdown":"Is there any reason why this should not be done?","body":"Is there any reason why this should not be done?"}],"answers":[{"tags":[],"owner":{"account_id":2372918,"reputation":4836,"user_id":2077101,"accept_rate":64,"display_name":"James Watkins"},"down_vote_count":0,"up_vote_count":50,"is_accepted":true,"score":50,"last_activity_date":1495127358,"creation_date":1495127358,"answer_id":44054020,"question_id":29395202,"body_markdown":"Spring provides a utility for this.\r\n\r\nhttp://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/util/ClassUtils.html#getUserClass-java.lang.Class-\r\n\r\n    public static Class&lt;?&gt; getUserClass(Class&lt;?&gt; clazz)\r\n\r\n&quot;Return the user-defined class for the given class: usually simply the given class, but the original class in case of a CGLIB-generated subclass.&quot;","title":"How to know original class name if wrapped into proxy by Spring?","body":"<p>Spring provides a utility for this.</p>\n\n<p><a href=\"http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/util/ClassUtils.html#getUserClass-java.lang.Class-\" rel=\"noreferrer\">http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/util/ClassUtils.html#getUserClass-java.lang.Class-</a></p>\n\n<pre><code>public static Class&lt;?&gt; getUserClass(Class&lt;?&gt; clazz)\n</code></pre>\n\n<p>\"Return the user-defined class for the given class: usually simply the given class, but the original class in case of a CGLIB-generated subclass.\"</p>\n"},{"tags":[],"owner":{"account_id":13881304,"reputation":432,"user_id":10021608,"display_name":"Juyeon"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1689843600,"creation_date":1671417790,"answer_id":74845872,"question_id":29395202,"body_markdown":"I&#39;d had a similar problem like yours. I&#39;d wanted to write log my repository name at a method of AOP.\r\nWhen I tried with `ClassUtils.getUserClass()` from upper James&#39; answer, my aop method write log as same as before.\r\n\r\n**I solved the problem with `AopProxyUtils.getSingletonTarget()`.**\r\n\r\nPlus, I leave following cases for someone who will have same problem.\r\n\r\n```\r\n@SpringBootTest\r\nclass AopLoggingServiceTest {\r\n\r\n\t@Autowired\r\n\tTestRepository testRepository;\r\n\r\n    public void someAopMethod(){\r\n\t\tClass&lt;?&gt; try1 = AopUtils.getTargetClass(testRepository);\r\n\t\tSystem.out.println(&quot;AopUtils.getTargetClass : &quot; + try1);\r\n\t\tClass&lt;?&gt; try2 = ClassUtils.getUserClass(testRepository);\r\n\t\tSystem.out.println(&quot;ClassUtils.getUserClass : &quot; + try2);\r\n\t\tClass&lt;?&gt; try3 = AopProxyUtils.ultimateTargetClass(testRepository);\r\n\t\tSystem.out.println(&quot;AopProxyUtils.ultimateTargetClass : &quot; + try3);\r\n\t\tClass&lt;?&gt; finalTry = AopProxyUtils.proxiedUserInterfaces(testRepository)[0];\r\n        System.out.println (&quot;AopProxyUtils.proxiedUserInterfaces[0] : &quot; + finalTry);\r\n\t}\r\n}\r\n```\r\n\r\n**outputs :** \r\n```\r\nAopUtils.getTargetClass : class com.sun.proxy.$Proxy172\r\nAopProxyUtils.ultimateTargetClass : class org.springframework.data.jpa.repository.support.SimpleJpaRepository\r\nClassUtils.getUserClass : class com.sun.proxy.$Proxy172\r\nAopProxyUtils.proxiedUserInterfaces[0] : interface io.juyeon.test.repository.TestRepository\r\n```\r\n","title":"How to know original class name if wrapped into proxy by Spring?","body":"<p>I'd had a similar problem like yours. I'd wanted to write log my repository name at a method of AOP.\nWhen I tried with <code>ClassUtils.getUserClass()</code> from upper James' answer, my aop method write log as same as before.</p>\n<p><strong>I solved the problem with <code>AopProxyUtils.getSingletonTarget()</code>.</strong></p>\n<p>Plus, I leave following cases for someone who will have same problem.</p>\n<pre><code>@SpringBootTest\nclass AopLoggingServiceTest {\n\n    @Autowired\n    TestRepository testRepository;\n\n    public void someAopMethod(){\n        Class&lt;?&gt; try1 = AopUtils.getTargetClass(testRepository);\n        System.out.println(&quot;AopUtils.getTargetClass : &quot; + try1);\n        Class&lt;?&gt; try2 = ClassUtils.getUserClass(testRepository);\n        System.out.println(&quot;ClassUtils.getUserClass : &quot; + try2);\n        Class&lt;?&gt; try3 = AopProxyUtils.ultimateTargetClass(testRepository);\n        System.out.println(&quot;AopProxyUtils.ultimateTargetClass : &quot; + try3);\n        Class&lt;?&gt; finalTry = AopProxyUtils.proxiedUserInterfaces(testRepository)[0];\n        System.out.println (&quot;AopProxyUtils.proxiedUserInterfaces[0] : &quot; + finalTry);\n    }\n}\n</code></pre>\n<p><strong>outputs :</strong></p>\n<pre><code>AopUtils.getTargetClass : class com.sun.proxy.$Proxy172\nAopProxyUtils.ultimateTargetClass : class org.springframework.data.jpa.repository.support.SimpleJpaRepository\nClassUtils.getUserClass : class com.sun.proxy.$Proxy172\nAopProxyUtils.proxiedUserInterfaces[0] : interface io.juyeon.test.repository.TestRepository\n</code></pre>\n"}],"owner":{"account_id":94736,"reputation":48421,"user_id":258483,"accept_rate":46,"display_name":"Dims"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12315,"favorite_count":0,"down_vote_count":0,"up_vote_count":29,"accepted_answer_id":44054020,"answer_count":2,"score":29,"last_activity_date":1689843600,"creation_date":1427903119,"question_id":29395202,"body_markdown":"I am trying to obtain some classes name by `getClass().getSimpleName()` under `Spring` and it returns something like \r\n\r\n    MyClass$$EnhancerBySpringCGLIB$$SOMEHEX\r\n\r\nThis is probably because `Spring` wraps the class into proxy.\r\n\r\nIs there any portable way to obtain original class name?","title":"How to know original class name if wrapped into proxy by Spring?","body":"<p>I am trying to obtain some classes name by <code>getClass().getSimpleName()</code> under <code>Spring</code> and it returns something like </p>\n\n<pre><code>MyClass$$EnhancerBySpringCGLIB$$SOMEHEX\n</code></pre>\n\n<p>This is probably because <code>Spring</code> wraps the class into proxy.</p>\n\n<p>Is there any portable way to obtain original class name?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":9842376,"reputation":537,"user_id":7465516,"display_name":"julaine"},"score":0,"creation_date":1689837072,"post_id":76727407,"comment_id":135270431,"body_markdown":"do not post pictures of code and output, put them as formatted text instead","body":"do not post pictures of code and output, put them as formatted text instead"},{"owner":{"account_id":26860419,"reputation":11,"user_id":20444021,"display_name":"c xc"},"score":0,"creation_date":1689839239,"post_id":76727407,"comment_id":135270879,"body_markdown":"I apologize, I was not very sure..I edited it","body":"I apologize, I was not very sure..I edited it"},{"owner":{"account_id":3380632,"reputation":14294,"user_id":2837741,"accept_rate":100,"display_name":"daniu"},"score":0,"creation_date":1689839625,"post_id":76727407,"comment_id":135270946,"body_markdown":"You posted your expected output, what&#39;s the actual output?","body":"You posted your expected output, what&#39;s the actual output?"},{"owner":{"account_id":9463219,"reputation":9357,"user_id":7036419,"display_name":"Maurice Perry"},"score":0,"creation_date":1689840030,"post_id":76727407,"comment_id":135271021,"body_markdown":"Why would you expect this output?","body":"Why would you expect this output?"},{"owner":{"account_id":26860419,"reputation":11,"user_id":20444021,"display_name":"c xc"},"score":0,"creation_date":1689840635,"post_id":76727407,"comment_id":135271125,"body_markdown":"The expected output is output from my assignment...every other test passed, only this one is different","body":"The expected output is output from my assignment...every other test passed, only this one is different"},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":0,"creation_date":1689841268,"post_id":76727407,"comment_id":135271265,"body_markdown":"I wonder the expected output: sum of wins 9+6 = 15, but it should have played 15 rounds and there are some ties - is the code supposed to not count the ties as a round? (&quot;*Continue to generate random values for both players until both values do not match.*&quot;) || **and** `i &lt;= numOfRounds+1` cannot be right","body":"I wonder the expected output: sum of wins 9+6 = 15, but it should have played 15 rounds and there are some ties - is the code supposed to not count the ties as a round? (&quot;<i>Continue to generate random values for both players until both values do not match.</i>&quot;) || <b>and</b> <code>i &lt;= numOfRounds+1</code> cannot be right"},{"owner":{"account_id":26860419,"reputation":11,"user_id":20444021,"display_name":"c xc"},"score":0,"creation_date":1689841788,"post_id":76727407,"comment_id":135271374,"body_markdown":"if the ties do not count as a round.. it does not make sense with the expected output that my assignment provided.. everything was working until step 4 where I had to put a loop for steps 2 and 3","body":"if the ties do not count as a round.. it does not make sense with the expected output that my assignment provided.. everything was working until step 4 where I had to put a loop for steps 2 and 3"},{"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"score":0,"creation_date":1689842659,"post_id":76727407,"comment_id":135271572,"body_markdown":"you are violating the requirements of step 2: &quot;Continue to generate random values for both players until both values do not match.&quot;. So you need a loop inside the outer loop, that ends when the random values for both players do not match.","body":"you are violating the requirements of step 2: &quot;Continue to generate random values for both players until both values do not match.&quot;. So you need a loop inside the outer loop, that ends when the random values for both players do not match."}],"answers":[{"tags":[],"owner":{"account_id":4228398,"reputation":17727,"user_id":3461397,"display_name":"Oleg Cherednik"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689842426,"creation_date":1689842426,"answer_id":76728099,"question_id":76727407,"body_markdown":"First of all I would decompose the code with a parts. It&#39;s better to encapsulate `win/lost` logic within separate class e.g. `enum Tool`.\r\n \r\n```java\r\npublic class Foo {\r\n\r\n    public static void main(String... args) {\r\n        Scanner scan = new Scanner(System.in);\r\n        Random random = new Random();\r\n\r\n        String p1 = getPlayerName(scan, 1);\r\n        String p2 = getPlayerName(scan, 2);\r\n        int totalRounds = getTotalRounds(scan);\r\n\r\n        System.out.format(&quot;%s vs %s for %d rounds\\n&quot;, p1, p2, totalRounds);\r\n\r\n        int p1wins = 0;\r\n        int p2wins = 0;\r\n\r\n        for (int i = 0; i &lt; totalRounds; i++) {\r\n            Tool p1Tool = Tool.random(random);\r\n            Tool p2Tool = Tool.random(random);\r\n            String res;\r\n\r\n            if (p1Tool == p2Tool) {\r\n                res = &quot;Tie&quot;;\r\n            } else if (p1Tool.isWinner(p2Tool)) {\r\n                res = p1 + &quot; wins&quot;;\r\n                p1wins++;\r\n            } else {\r\n                res = p2 + &quot; wins&quot;;\r\n                p2wins++;\r\n            }\r\n\r\n            System.out.format(&quot;Round %d: %s (%s) vs %s (%s) - %s\\n&quot;, i + 1,\r\n                              p1, p1Tool.getName(), p2, p2Tool.getName(), res);\r\n        }\r\n\r\n        System.out.println(&quot;---&quot;);\r\n        System.out.format(&quot;%s (%d) vs %s (%d) - %s\\n&quot;, p1, p1wins, p2, p2wins,\r\n                          p1wins == p2wins ? &quot;Tie&quot; : (p1wins &gt; p2wins ? p1 : p2) + &quot; wins&quot;);\r\n    }\r\n\r\n    private static String getPlayerName(Scanner scan, int i) {\r\n        System.out.format(&quot;Enter player %d name: &quot;, i);\r\n        return scan.next();\r\n    }\r\n\r\n    private static int getTotalRounds(Scanner scan) {\r\n        int res = 0;\r\n\r\n        while (res &lt;= 0) {\r\n            System.out.print(&quot;Enter total rounds: &quot;);\r\n            res = scan.nextInt();\r\n        }\r\n\r\n        return res;\r\n    }\r\n\r\n    @Getter\r\n    @RequiredArgsConstructor(access = AccessLevel.PACKAGE)\r\n    private enum Tool {\r\n        ROCK(&quot;rock&quot;, &quot;scissors&quot;),\r\n        PAPER(&quot;paper&quot;, &quot;rock&quot;),\r\n        SCISSORS(&quot;scissors&quot;, &quot;paper&quot;);\r\n\r\n        private final String name;\r\n        private final String nameWin;\r\n\r\n        public final boolean isWinner(Tool tool) {\r\n            return nameWin.equals(tool.name);\r\n        }\r\n\r\n        public static Tool random(Random random) {\r\n            int id = random.nextInt(3);\r\n            return id == 0 ? ROCK : id == 1 ? PAPER : SCISSORS;\r\n        }\r\n    }\r\n\r\n}\r\n```","title":"Java, rock paper scissor program not working properly","body":"<p>First of all I would decompose the code with a parts. It's better to encapsulate <code>win/lost</code> logic within separate class e.g. <code>enum Tool</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Foo {\n\n    public static void main(String... args) {\n        Scanner scan = new Scanner(System.in);\n        Random random = new Random();\n\n        String p1 = getPlayerName(scan, 1);\n        String p2 = getPlayerName(scan, 2);\n        int totalRounds = getTotalRounds(scan);\n\n        System.out.format(&quot;%s vs %s for %d rounds\\n&quot;, p1, p2, totalRounds);\n\n        int p1wins = 0;\n        int p2wins = 0;\n\n        for (int i = 0; i &lt; totalRounds; i++) {\n            Tool p1Tool = Tool.random(random);\n            Tool p2Tool = Tool.random(random);\n            String res;\n\n            if (p1Tool == p2Tool) {\n                res = &quot;Tie&quot;;\n            } else if (p1Tool.isWinner(p2Tool)) {\n                res = p1 + &quot; wins&quot;;\n                p1wins++;\n            } else {\n                res = p2 + &quot; wins&quot;;\n                p2wins++;\n            }\n\n            System.out.format(&quot;Round %d: %s (%s) vs %s (%s) - %s\\n&quot;, i + 1,\n                              p1, p1Tool.getName(), p2, p2Tool.getName(), res);\n        }\n\n        System.out.println(&quot;---&quot;);\n        System.out.format(&quot;%s (%d) vs %s (%d) - %s\\n&quot;, p1, p1wins, p2, p2wins,\n                          p1wins == p2wins ? &quot;Tie&quot; : (p1wins &gt; p2wins ? p1 : p2) + &quot; wins&quot;);\n    }\n\n    private static String getPlayerName(Scanner scan, int i) {\n        System.out.format(&quot;Enter player %d name: &quot;, i);\n        return scan.next();\n    }\n\n    private static int getTotalRounds(Scanner scan) {\n        int res = 0;\n\n        while (res &lt;= 0) {\n            System.out.print(&quot;Enter total rounds: &quot;);\n            res = scan.nextInt();\n        }\n\n        return res;\n    }\n\n    @Getter\n    @RequiredArgsConstructor(access = AccessLevel.PACKAGE)\n    private enum Tool {\n        ROCK(&quot;rock&quot;, &quot;scissors&quot;),\n        PAPER(&quot;paper&quot;, &quot;rock&quot;),\n        SCISSORS(&quot;scissors&quot;, &quot;paper&quot;);\n\n        private final String name;\n        private final String nameWin;\n\n        public final boolean isWinner(Tool tool) {\n            return nameWin.equals(tool.name);\n        }\n\n        public static Tool random(Random random) {\n            int id = random.nextInt(3);\n            return id == 0 ? ROCK : id == 1 ? PAPER : SCISSORS;\n        }\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1689843428,"creation_date":1689843428,"answer_id":76728234,"question_id":76727407,"body_markdown":"Several issues with your code, going through it:\r\n\r\n``` lang-java\r\nString player1;\r\nString player2;\r\nint numOfRounds;\r\n  \r\nplayer1 = scnr.next();\r\nplayer2 = scnr.next();\r\nnumOfRounds = scnr.nextInt();\r\n```\r\nHere it would increase readability if you merged declaration and initial assignment:\r\n\r\n``` lang-java\r\nString player1 = scnr.next();\r\nString player2 = scnr.next();\r\nint numOfRounds = scnr.nextInt();\r\n```\r\n---\r\n``` lang-java\r\nfor (int i = 0; i &lt;= numOfRounds+1; ++i) {\r\n```\r\nThis will loop two times too much, if you enter 15 for the number of rounds, `i` will go from 0 to 16, which is 17 entries into the loop - two to much.\r\ncorrect would be:\r\n``` lang-java\r\nfor (int i = 0; i &lt; numOfRounds; ++i) {\r\n```\r\n---\r\n``` lang-java\r\nint p1 = rand.nextInt(3);\r\nint p2 = rand.nextInt(3);\r\nif (p1 == p2) {\r\n   System.out.println(&quot;Tie&quot;);\r\n}\r\n```\r\nThis does count a &quot;Tie&quot; also a round, which the expected output clearly does not support (also the instruction of step 2)\r\nCorrect would be a loop until a winner can be found (both random values are not equal):\r\n``` lang-java\r\nint p1 = rand.nextInt(3);\r\nint p2 = rand.nextInt(3);\r\nwhile (p1 == p2) {\r\n  System.out.println(&quot;Tie&quot;);\r\n  p1 = rand.nextInt(3);\r\n  p2 = rand.nextInt(3);\r\n}\r\n```\r\n\r\nWith more refactoring your code could get even better read- and reusable (extracting code into reusable methodes etc.) but first you should get it running correctly.","title":"Java, rock paper scissor program not working properly","body":"<p>Several issues with your code, going through it:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String player1;\nString player2;\nint numOfRounds;\n  \nplayer1 = scnr.next();\nplayer2 = scnr.next();\nnumOfRounds = scnr.nextInt();\n</code></pre>\n<p>Here it would increase readability if you merged declaration and initial assignment:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String player1 = scnr.next();\nString player2 = scnr.next();\nint numOfRounds = scnr.nextInt();\n</code></pre>\n<hr />\n<pre class=\"lang-java prettyprint-override\"><code>for (int i = 0; i &lt;= numOfRounds+1; ++i) {\n</code></pre>\n<p>This will loop two times too much, if you enter 15 for the number of rounds, <code>i</code> will go from 0 to 16, which is 17 entries into the loop - two to much.\ncorrect would be:</p>\n<pre class=\"lang-java prettyprint-override\"><code>for (int i = 0; i &lt; numOfRounds; ++i) {\n</code></pre>\n<hr />\n<pre class=\"lang-java prettyprint-override\"><code>int p1 = rand.nextInt(3);\nint p2 = rand.nextInt(3);\nif (p1 == p2) {\n   System.out.println(&quot;Tie&quot;);\n}\n</code></pre>\n<p>This does count a &quot;Tie&quot; also a round, which the expected output clearly does not support (also the instruction of step 2)\nCorrect would be a loop until a winner can be found (both random values are not equal):</p>\n<pre class=\"lang-java prettyprint-override\"><code>int p1 = rand.nextInt(3);\nint p2 = rand.nextInt(3);\nwhile (p1 == p2) {\n  System.out.println(&quot;Tie&quot;);\n  p1 = rand.nextInt(3);\n  p2 = rand.nextInt(3);\n}\n</code></pre>\n<p>With more refactoring your code could get even better read- and reusable (extracting code into reusable methodes etc.) but first you should get it running correctly.</p>\n"}],"owner":{"account_id":26860419,"reputation":11,"user_id":20444021,"display_name":"c xc"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":152,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"accepted_answer_id":76728234,"answer_count":2,"score":-1,"last_activity_date":1689843428,"creation_date":1689836582,"question_id":76727407,"body_markdown":"These are the instructions for this program...\r\n\r\n&quot;**Step 1**&#160;Read two player names from input (String). Read number of rounds from input. Continue reading number of rounds if value is below one and provide an error message. Output player names and number of rounds. Submit for grading to confirm 2 tests pass.\r\n\r\n**Step 2.**&#160;Generate random values (0 - 2) for player 1 followed by player 2 by calling&#160;`rand.nextInt(3)`. Continue to generate random values for both players until both values do not match. Output &quot;Tie&quot; when the values match. Submit for grading to confirm 3 tests pass.\r\n\r\n**Step 3.**&#160;Identify winner for this round and output a message. Rock crushes scissors, scissors cut paper, and paper covers rock. Submit for grading to confirm 6 tests pass.\r\n\r\n**Step 4.**&#160;Add a loop to repeat steps 2 and 3 for the number of rounds. Output total wins for each player after all rounds are complete. Submit for grading to confirm all tests pass.&quot;\r\n\r\nwhy am I getting a different output than expected...\r\n\r\n\r\n    import java.util.Scanner;\r\n    import java.util.Random;\r\n\r\n    public class LabProgram {\r\n    public static void main(String[] args) {\r\n      Scanner scnr = new Scanner(System.in);\r\n      final int ROCK = 0;\r\n      final int PAPER = 1;\r\n      final int SCISSORS = 2;\r\n      Random rand = new Random();\r\n      int seed = scnr.nextInt();\r\n      rand.setSeed(seed);\r\n      \r\n      /* Insert your code here */\r\n      String player1;\r\n      String player2;\r\n      int numOfRounds;\r\n      \r\n      player1 = scnr.next();\r\n      player2 = scnr.next();\r\n      numOfRounds = scnr.nextInt();\r\n      \r\n      while (numOfRounds &lt; 1) { \r\n         System.out.println(&quot;Rounds must be &gt; 0&quot;);\r\n         numOfRounds = scnr.nextInt();\r\n         }\r\n      System.out.println(player1 + &quot; vs &quot; + player2 + &quot; for &quot; + numOfRounds + &quot; rounds&quot;);\r\n   \r\n      int p1wins = 0;\r\n      int p2wins = 0; \r\n      \r\n      \r\n      for (int i = 0; i &lt;= numOfRounds+1; ++i) {\r\n         int p1 = rand.nextInt(3);\r\n         int p2 = rand.nextInt(3);\r\n         if (p1 == p2) {\r\n            System.out.println(&quot;Tie&quot;);\r\n         }\r\n         else if (p1 == 0 &amp;&amp; p2 == 1) {\r\n         System.out.println(player2 + &quot; wins with paper&quot;);\r\n         p2wins+=1;\r\n            }\r\n         else if (p1 == 0 &amp;&amp; p2 == 2) {\r\n         System.out.println(player1 + &quot; wins with rock&quot;);\r\n         p1wins+=1;\r\n            }\r\n         else if (p1 == 1 &amp;&amp; p2 == 0) {\r\n         System.out.println(player1 + &quot; wins with paper&quot;);\r\n         p1wins+=1;\r\n            }\r\n         else if (p1 == 1 &amp;&amp; p2 == 2) {\r\n         System.out.println(player2 + &quot; wins with scissors&quot;);\r\n         p2wins+=1;\r\n            }\r\n         else if (p1 == 2 &amp;&amp; p2 == 0) {\r\n         System.out.println(player2 + &quot; wins with rock&quot;);\r\n         p2wins+=1;\r\n            }\r\n         else if (p1 == 2 &amp;&amp; p2 == 1) {\r\n         System.out.println(player1 + &quot; wins with scissors&quot;);\r\n         p1wins+=1;\r\n         }\r\n      }\r\n      \r\n      if(p1wins &lt; p2wins)\r\n      System.out.println(player2 + &quot; wins &quot; + p2wins + &quot; and &quot; + player1 + &quot; wins &quot; + p1wins);\r\n      else if(p2wins &lt; p1wins)\r\n      System.out.println(player1 + &quot; wins &quot; + p1wins + &quot; and &quot; + player2 + &quot; wins &quot; + p2wins);\r\n     }\r\n\r\n    }\r\n\r\n\r\nInput:\r\n```\r\n17 Randy Jenny 15\r\n```\r\n\r\nMy Output: \r\n```\r\nRandy wins with paper\r\nRandy wins with paper\r\nRandy wins with paper\r\nRandy wins with paper\r\nRandy wins with paper\r\nTie\r\nRandy wins with paper\r\nJenny wins with scissors\r\nJenny wins with rock\r\nRandy wins with rock\r\nJenny wins with scissors\r\nTie\r\nRandy wins with rock\r\nJenny wins with paper\r\nTie\r\nRandy wins 8 and Jenny wins 5\r\n```\r\n\r\nExpected Output: \r\n```\r\nRandy wins with rock\r\nJenny wins with paper\r\nTie\r\nTie\r\nJenny wins with paper\r\nTie\r\nRandy wins with paper\r\nRandy wins 9 and Jenny wins 6\r\n```","title":"Java, rock paper scissor program not working properly","body":"<p>These are the instructions for this program...</p>\n<p>&quot;<strong>Step 1</strong> Read two player names from input (String). Read number of rounds from input. Continue reading number of rounds if value is below one and provide an error message. Output player names and number of rounds. Submit for grading to confirm 2 tests pass.</p>\n<p><strong>Step 2.</strong> Generate random values (0 - 2) for player 1 followed by player 2 by calling <code>rand.nextInt(3)</code>. Continue to generate random values for both players until both values do not match. Output &quot;Tie&quot; when the values match. Submit for grading to confirm 3 tests pass.</p>\n<p><strong>Step 3.</strong> Identify winner for this round and output a message. Rock crushes scissors, scissors cut paper, and paper covers rock. Submit for grading to confirm 6 tests pass.</p>\n<p><strong>Step 4.</strong> Add a loop to repeat steps 2 and 3 for the number of rounds. Output total wins for each player after all rounds are complete. Submit for grading to confirm all tests pass.&quot;</p>\n<p>why am I getting a different output than expected...</p>\n<pre><code>import java.util.Scanner;\nimport java.util.Random;\n\npublic class LabProgram {\npublic static void main(String[] args) {\n  Scanner scnr = new Scanner(System.in);\n  final int ROCK = 0;\n  final int PAPER = 1;\n  final int SCISSORS = 2;\n  Random rand = new Random();\n  int seed = scnr.nextInt();\n  rand.setSeed(seed);\n  \n  /* Insert your code here */\n  String player1;\n  String player2;\n  int numOfRounds;\n  \n  player1 = scnr.next();\n  player2 = scnr.next();\n  numOfRounds = scnr.nextInt();\n  \n  while (numOfRounds &lt; 1) { \n     System.out.println(&quot;Rounds must be &gt; 0&quot;);\n     numOfRounds = scnr.nextInt();\n     }\n  System.out.println(player1 + &quot; vs &quot; + player2 + &quot; for &quot; + numOfRounds + &quot; rounds&quot;);\n\n  int p1wins = 0;\n  int p2wins = 0; \n  \n  \n  for (int i = 0; i &lt;= numOfRounds+1; ++i) {\n     int p1 = rand.nextInt(3);\n     int p2 = rand.nextInt(3);\n     if (p1 == p2) {\n        System.out.println(&quot;Tie&quot;);\n     }\n     else if (p1 == 0 &amp;&amp; p2 == 1) {\n     System.out.println(player2 + &quot; wins with paper&quot;);\n     p2wins+=1;\n        }\n     else if (p1 == 0 &amp;&amp; p2 == 2) {\n     System.out.println(player1 + &quot; wins with rock&quot;);\n     p1wins+=1;\n        }\n     else if (p1 == 1 &amp;&amp; p2 == 0) {\n     System.out.println(player1 + &quot; wins with paper&quot;);\n     p1wins+=1;\n        }\n     else if (p1 == 1 &amp;&amp; p2 == 2) {\n     System.out.println(player2 + &quot; wins with scissors&quot;);\n     p2wins+=1;\n        }\n     else if (p1 == 2 &amp;&amp; p2 == 0) {\n     System.out.println(player2 + &quot; wins with rock&quot;);\n     p2wins+=1;\n        }\n     else if (p1 == 2 &amp;&amp; p2 == 1) {\n     System.out.println(player1 + &quot; wins with scissors&quot;);\n     p1wins+=1;\n     }\n  }\n  \n  if(p1wins &lt; p2wins)\n  System.out.println(player2 + &quot; wins &quot; + p2wins + &quot; and &quot; + player1 + &quot; wins &quot; + p1wins);\n  else if(p2wins &lt; p1wins)\n  System.out.println(player1 + &quot; wins &quot; + p1wins + &quot; and &quot; + player2 + &quot; wins &quot; + p2wins);\n }\n\n}\n</code></pre>\n<p>Input:</p>\n<pre><code>17 Randy Jenny 15\n</code></pre>\n<p>My Output:</p>\n<pre><code>Randy wins with paper\nRandy wins with paper\nRandy wins with paper\nRandy wins with paper\nRandy wins with paper\nTie\nRandy wins with paper\nJenny wins with scissors\nJenny wins with rock\nRandy wins with rock\nJenny wins with scissors\nTie\nRandy wins with rock\nJenny wins with paper\nTie\nRandy wins 8 and Jenny wins 5\n</code></pre>\n<p>Expected Output:</p>\n<pre><code>Randy wins with rock\nJenny wins with paper\nTie\nTie\nJenny wins with paper\nTie\nRandy wins with paper\nRandy wins 9 and Jenny wins 6\n</code></pre>\n"},{"tags":["java","spring","keystore","x509"],"answers":[{"tags":[],"owner":{"account_id":16857809,"reputation":1,"user_id":12189341,"display_name":"Choco"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689843418,"creation_date":1689843418,"answer_id":76728232,"question_id":76720213,"body_markdown":"I appears I can extract form the keystore and create inmemory keystore with only one alias.\r\n\r\n        private static KeyStore createUnaryKeyStore(String alias, String aliasPwd, KeyStore clientKeyStore) throws KeyStoreException, NoSuchAlgorithmException, UnrecoverableKeyException, IOException, CertificateException {\r\n        Key key = clientKeyStore.getKey(alias, aliasPwd.toCharArray());\r\n        Certificate[] certificateChain = clientKeyStore.getCertificateChain(alias);\r\n\r\n        KeyStore tempUnaryKeystore = KeyStore.getInstance(JAVA_KEYSTORE);\r\n        tempUnaryKeystore.load(null);\r\n        tempUnaryKeystore.setKeyEntry (alias, key, aliasPwd.toCharArray(), certificateChain);\r\n        return tempUnaryKeystore;\r\n    }\r\n\r\nSo I&#39;ll use it to call my rest API","title":"Need to call API rest with SSL two way (X509) using Spring and keystore with multi alias","body":"<p>I appears I can extract form the keystore and create inmemory keystore with only one alias.</p>\n<pre><code>    private static KeyStore createUnaryKeyStore(String alias, String aliasPwd, KeyStore clientKeyStore) throws KeyStoreException, NoSuchAlgorithmException, UnrecoverableKeyException, IOException, CertificateException {\n    Key key = clientKeyStore.getKey(alias, aliasPwd.toCharArray());\n    Certificate[] certificateChain = clientKeyStore.getCertificateChain(alias);\n\n    KeyStore tempUnaryKeystore = KeyStore.getInstance(JAVA_KEYSTORE);\n    tempUnaryKeystore.load(null);\n    tempUnaryKeystore.setKeyEntry (alias, key, aliasPwd.toCharArray(), certificateChain);\n    return tempUnaryKeystore;\n}\n</code></pre>\n<p>So I'll use it to call my rest API</p>\n"}],"owner":{"account_id":16857809,"reputation":1,"user_id":12189341,"display_name":"Choco"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689843418,"creation_date":1689761630,"question_id":76720213,"body_markdown":"I need to call an API rest with SSL two way (X509) using Spring.\r\nMy JKS file got multi alias (mandatory).\r\n\r\nI begun with this code to create a rest template:\r\n\r\n```\r\nKeyStore clientTrustStore = getStore(trustStore, pwdTrustStore.toCharArray());\r\n        KeyStore clientKeyStore = getStore(keyStore, pwdKeyStore.toCharArray());\r\n\r\n        SSLContext sslContext = new SSLContextBuilder()\r\n            .setKeyStoreType(JAVA_KEYSTORE)\r\n//.setKeyManagerFactoryAlgorithm(...)\r\n            .loadKeyMaterial(clientKeyStore, aliasPwd.toCharArray(), new KeyStrategy(alias))\r\n            .loadTrustMaterial(clientTrustStore, new TrustSelfSignedStrategy())\r\n            .build();\r\n        SSLConnectionSocketFactory sslConFactory = new SSLConnectionSocketFactory(sslContext);\r\n        try (CloseableHttpClient httpClient =      HttpClients.custom().setSSLSocketFactory(sslConFactory).build()) {\r\n\r\n            restTemplateBuilder.requestFactory(() -&gt; new HttpComponentsClientHttpRequestFactory(httpClient));\r\n        }\r\n\r\n        this.restTemplate = restTemplateBuilder.build();\r\n```\r\n\r\nFor those who know how it works, it use the SunX509KeyManagerImpl.class (JDK8) that parse the keystore with this algorithm \r\n\r\n\r\n```\r\nSunX509KeyManagerImpl(KeyStore ks, char[] password)\r\n            throws KeyStoreException,\r\n            NoSuchAlgorithmException, UnrecoverableKeyException {\r\n\r\n        credentialsMap = new HashMap&lt;String,X509Credentials&gt;();\r\n        serverAliasCache = Collections.synchronizedMap(\r\n                            new HashMap&lt;String,String[]&gt;());\r\n        if (ks == null) {\r\n            return;\r\n        }\r\n\r\n        for (Enumeration&lt;String&gt; aliases = ks.aliases();\r\n                                        aliases.hasMoreElements(); ) {\r\n            String alias = aliases.nextElement();\r\n            if (!ks.isKeyEntry(alias)) {\r\n                continue;\r\n            }\r\n            Key key = ks.getKey(alias, password);\r\n            if (key instanceof PrivateKey == false) {\r\n                continue;\r\n            }\r\n            Certificate[] certs = ks.getCertificateChain(alias);\r\n            if ((certs == null) || (certs.length == 0) ||\r\n                    !(certs[0] instanceof X509Certificate)) {\r\n                continue;\r\n            }\r\n            if (!(certs instanceof X509Certificate[])) {\r\n                Certificate[] tmp = new X509Certificate[certs.length];\r\n                System.arraycopy(certs, 0, tmp, 0, certs.length);\r\n                certs = tmp;\r\n            }\r\n\r\n            X509Credentials cred = new X509Credentials((PrivateKey)key,\r\n                (X509Certificate[])certs);\r\n            credentialsMap.put(alias, cred);\r\n            if (SSLLogger.isOn &amp;&amp; SSLLogger.isOn(&quot;keymanager&quot;)) {\r\n                SSLLogger.fine(&quot;found key for : &quot; + alias, (Object[])certs);\r\n            }\r\n        }\r\n    }\r\n```\r\n\r\nAs you can see beside the for, it extract with a enum the list of aliases and do a getKey with the password and the first random alias of the list. It throw an exception when the duo alias/pwd is wrong \r\n`java.security.UnrecoverableKeyException: Cannot recover key` \r\n\r\n\r\n\r\n\r\n\r\n\r\nI don&#39;t understand why I can&#39;t filter the alias which is gonna be tested or maybe all the alias must have the same password ? :) . I saw I can use setKeyManagerFactoryAlgorithm to create a custom KeyManager (to not use de SunX509KeyManagerImpl) but I wonder if it&#39;s the real good solution to reach my target.\r\n\r\nI don&#39;t wanna reinvent the wheel\r\n\r\nThank for your reply","title":"Need to call API rest with SSL two way (X509) using Spring and keystore with multi alias","body":"<p>I need to call an API rest with SSL two way (X509) using Spring.\nMy JKS file got multi alias (mandatory).</p>\n<p>I begun with this code to create a rest template:</p>\n<pre><code>KeyStore clientTrustStore = getStore(trustStore, pwdTrustStore.toCharArray());\n        KeyStore clientKeyStore = getStore(keyStore, pwdKeyStore.toCharArray());\n\n        SSLContext sslContext = new SSLContextBuilder()\n            .setKeyStoreType(JAVA_KEYSTORE)\n//.setKeyManagerFactoryAlgorithm(...)\n            .loadKeyMaterial(clientKeyStore, aliasPwd.toCharArray(), new KeyStrategy(alias))\n            .loadTrustMaterial(clientTrustStore, new TrustSelfSignedStrategy())\n            .build();\n        SSLConnectionSocketFactory sslConFactory = new SSLConnectionSocketFactory(sslContext);\n        try (CloseableHttpClient httpClient =      HttpClients.custom().setSSLSocketFactory(sslConFactory).build()) {\n\n            restTemplateBuilder.requestFactory(() -&gt; new HttpComponentsClientHttpRequestFactory(httpClient));\n        }\n\n        this.restTemplate = restTemplateBuilder.build();\n</code></pre>\n<p>For those who know how it works, it use the SunX509KeyManagerImpl.class (JDK8) that parse the keystore with this algorithm</p>\n<pre><code>SunX509KeyManagerImpl(KeyStore ks, char[] password)\n            throws KeyStoreException,\n            NoSuchAlgorithmException, UnrecoverableKeyException {\n\n        credentialsMap = new HashMap&lt;String,X509Credentials&gt;();\n        serverAliasCache = Collections.synchronizedMap(\n                            new HashMap&lt;String,String[]&gt;());\n        if (ks == null) {\n            return;\n        }\n\n        for (Enumeration&lt;String&gt; aliases = ks.aliases();\n                                        aliases.hasMoreElements(); ) {\n            String alias = aliases.nextElement();\n            if (!ks.isKeyEntry(alias)) {\n                continue;\n            }\n            Key key = ks.getKey(alias, password);\n            if (key instanceof PrivateKey == false) {\n                continue;\n            }\n            Certificate[] certs = ks.getCertificateChain(alias);\n            if ((certs == null) || (certs.length == 0) ||\n                    !(certs[0] instanceof X509Certificate)) {\n                continue;\n            }\n            if (!(certs instanceof X509Certificate[])) {\n                Certificate[] tmp = new X509Certificate[certs.length];\n                System.arraycopy(certs, 0, tmp, 0, certs.length);\n                certs = tmp;\n            }\n\n            X509Credentials cred = new X509Credentials((PrivateKey)key,\n                (X509Certificate[])certs);\n            credentialsMap.put(alias, cred);\n            if (SSLLogger.isOn &amp;&amp; SSLLogger.isOn(&quot;keymanager&quot;)) {\n                SSLLogger.fine(&quot;found key for : &quot; + alias, (Object[])certs);\n            }\n        }\n    }\n</code></pre>\n<p>As you can see beside the for, it extract with a enum the list of aliases and do a getKey with the password and the first random alias of the list. It throw an exception when the duo alias/pwd is wrong\n<code>java.security.UnrecoverableKeyException: Cannot recover key</code></p>\n<p>I don't understand why I can't filter the alias which is gonna be tested or maybe all the alias must have the same password ? :) . I saw I can use setKeyManagerFactoryAlgorithm to create a custom KeyManager (to not use de SunX509KeyManagerImpl) but I wonder if it's the real good solution to reach my target.</p>\n<p>I don't wanna reinvent the wheel</p>\n<p>Thank for your reply</p>\n"},{"tags":["java","javafx"],"comments":[{"owner":{"display_name":"user6073886"},"score":2,"creation_date":1689768773,"post_id":76721173,"comment_id":135259527,"body_markdown":"We can&#39;t know why your code produces some result without you showing us that code.","body":"We can&#39;t know why your code produces some result without you showing us that code."},{"owner":{"account_id":28710981,"reputation":21,"user_id":21986482,"display_name":"who is this bro xd"},"score":0,"creation_date":1689770480,"post_id":76721173,"comment_id":135259961,"body_markdown":"@OHGODSPIDERS oops","body":"@OHGODSPIDERS oops"},{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":5,"creation_date":1689782777,"post_id":76721173,"comment_id":135263329,"body_markdown":"An `ImageView` is a `Node` (i.e., a UI element). A `Node` can only appear once in the scene graph. If you add a `Node` to a `Parent` and it already _has_ a `Parent`, then it will silently be removed from its current parent before being added to the new parent. An `Image`, however, can appear in any number of different `ImageView`s. So, modify your `Figure` enum to cache the `Image`, not the `ImageView`. That gives you a better design anyway, as the model should not be aware of the view.","body":"An <code>ImageView</code> is a <code>Node</code> (i.e., a UI element). A <code>Node</code> can only appear once in the scene graph. If you add a <code>Node</code> to a <code>Parent</code> and it already <i>has</i> a <code>Parent</code>, then it will silently be removed from its current parent before being added to the new parent. An <code>Image</code>, however, can appear in any number of different <code>ImageView</code>s. So, modify your <code>Figure</code> enum to cache the <code>Image</code>, not the <code>ImageView</code>. That gives you a better design anyway, as the model should not be aware of the view."},{"owner":{"account_id":16559,"reputation":1856,"user_id":36223,"display_name":"DaveB"},"score":0,"creation_date":1690312182,"post_id":76721173,"comment_id":135335088,"body_markdown":"This just screams to be implemented as a Sprite.","body":"This just screams to be implemented as a Sprite."},{"owner":{"account_id":28710981,"reputation":21,"user_id":21986482,"display_name":"who is this bro xd"},"score":0,"creation_date":1690543386,"post_id":76721173,"comment_id":135372096,"body_markdown":"@Slaw thx it worked","body":"@Slaw thx it worked"}],"owner":{"account_id":28710981,"reputation":21,"user_id":21986482,"display_name":"who is this bro xd"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":51,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"answer_count":0,"score":0,"last_activity_date":1689843363,"creation_date":1689768702,"question_id":76721173,"body_markdown":"I&#39;m making a chess program. When I press &quot;New Game&quot;, I see that there are only 1 types of each piece. I don&#39;t know, why, please help\r\n\r\n```java\r\nimport javafx.scene.image.Image;\r\nimport javafx.scene.image.ImageView;\r\n\r\npublic enum Figure {\r\n\tWHITE_PAWN(false, FigureType.PAWN),\r\n\tWHITE_ROOK(false, FigureType.ROOK),\r\n\tWHITE_KNIGHT(false, FigureType.KNIGHT),\r\n\tWHITE_BISHOP(false, FigureType.BISHOP),\r\n\tWHITE_KING(false, FigureType.KING),\r\n\tWHITE_QUEEN(false, FigureType.QUEEN),\r\n\tBLACK_PAWN(true, FigureType.PAWN),\r\n\tBLACK_ROOK(true, FigureType.ROOK),\r\n\tBLACK_KNIGHT(true, FigureType.KNIGHT),\r\n\tBLACK_BISHOP(true, FigureType.BISHOP),\r\n\tBLACK_KING(true, FigureType.KING),\r\n\tBLACK_QUEEN(true, FigureType.QUEEN),\r\n\tEMPTY;\r\n\t\r\n\t\r\n\tprivate final ImageView graphic;\r\n\tFigure(boolean isBlack, FigureType type) {\r\n\t\tthis.graphic = new ImageView(new Image(getClass()\r\n\t\t\t\t.getResource(&quot;/resources/&quot; + toString().toLowerCase() + &quot;.png&quot;)\r\n\t\t\t\t.toExternalForm()));\r\n\t\tthis.isBlack = isBlack;\r\n\t\tthis.type = type;\r\n\t\t\r\n\t}\r\n\r\n```\r\n```\r\n/RESOURCES/\r\n black_bishop.png\r\n    black_king.png\r\n    black_knight.png\r\n    black_pawn.png\r\n    black_queen.png\r\n    black_rook.png\r\n    main_background.jpg\r\n    white_bishop.png\r\n    white_king.png\r\n    white_knight.png\r\n    white_pawn.png\r\n    white_queen.png\r\n    white_rook.png\r\n\r\n```\r\n\r\nDo you need something else to answer?\r\n\r\nWhat do I expect to see:\r\n[Expectation](https://i.stack.imgur.com/IzSlg.png)\r\nand what I get:\r\n[Reality](https://i.stack.imgur.com/keN4f.png)","title":"Why I can use an image only 1 time","body":"<p>I'm making a chess program. When I press &quot;New Game&quot;, I see that there are only 1 types of each piece. I don't know, why, please help</p>\n<pre class=\"lang-java prettyprint-override\"><code>import javafx.scene.image.Image;\nimport javafx.scene.image.ImageView;\n\npublic enum Figure {\n    WHITE_PAWN(false, FigureType.PAWN),\n    WHITE_ROOK(false, FigureType.ROOK),\n    WHITE_KNIGHT(false, FigureType.KNIGHT),\n    WHITE_BISHOP(false, FigureType.BISHOP),\n    WHITE_KING(false, FigureType.KING),\n    WHITE_QUEEN(false, FigureType.QUEEN),\n    BLACK_PAWN(true, FigureType.PAWN),\n    BLACK_ROOK(true, FigureType.ROOK),\n    BLACK_KNIGHT(true, FigureType.KNIGHT),\n    BLACK_BISHOP(true, FigureType.BISHOP),\n    BLACK_KING(true, FigureType.KING),\n    BLACK_QUEEN(true, FigureType.QUEEN),\n    EMPTY;\n    \n    \n    private final ImageView graphic;\n    Figure(boolean isBlack, FigureType type) {\n        this.graphic = new ImageView(new Image(getClass()\n                .getResource(&quot;/resources/&quot; + toString().toLowerCase() + &quot;.png&quot;)\n                .toExternalForm()));\n        this.isBlack = isBlack;\n        this.type = type;\n        \n    }\n\n</code></pre>\n<pre><code>/RESOURCES/\n black_bishop.png\n    black_king.png\n    black_knight.png\n    black_pawn.png\n    black_queen.png\n    black_rook.png\n    main_background.jpg\n    white_bishop.png\n    white_king.png\n    white_knight.png\n    white_pawn.png\n    white_queen.png\n    white_rook.png\n\n</code></pre>\n<p>Do you need something else to answer?</p>\n<p>What do I expect to see:\n<a href=\"https://i.stack.imgur.com/IzSlg.png\" rel=\"nofollow noreferrer\">Expectation</a>\nand what I get:\n<a href=\"https://i.stack.imgur.com/keN4f.png\" rel=\"nofollow noreferrer\">Reality</a></p>\n"},{"tags":["java","spring","architecture","business-logic"],"answers":[{"tags":[],"owner":{"account_id":3001,"reputation":138707,"user_id":4249,"accept_rate":84,"display_name":"matt b"},"down_vote_count":0,"up_vote_count":34,"is_accepted":true,"score":34,"last_activity_date":1286484322,"creation_date":1286484322,"answer_id":3885740,"question_id":3885675,"body_markdown":"If you wish to have controllers be able to persist changes to a `Child` object, then traditionally you would have a method in the service named something like `ChildService.update(Child newchild)`, which will handle calling the correct DAOs to persist the new version of this Child.\r\n\r\nControllers are free to ask the service for a Child, change the fields around (conceivably based on some user input) - a sane design would have the Controller doing some work with the Child POJO and then asking the Service to persist the change. The model POJO should know nothing about a controller, service, or DAO but just simply hold data as you suggest - certainly you would not want every call to `setName()` or `setGender()` to automatically result in a database update.\r\n\r\nInstead, the controller and/or service should acquire a `Child` object, do whatever work it needs to the object in it&#39;s unit of work, and then ask a Service (and then the DAO) to persist the changes.\r\n\r\nValidation can take place in several layers - the Controller might want to validate any input from the web user, and the Service may want to validate that it has a valid `Child` object before it persists it. It especially makes sense to have some level of validation in both layers in case you want to re-use this Service in other capacities - such as exposing a REST interface, a different front-end, etc.","title":"Service layer and controller: who takes care of what?","body":"<p>If you wish to have controllers be able to persist changes to a <code>Child</code> object, then traditionally you would have a method in the service named something like <code>ChildService.update(Child newchild)</code>, which will handle calling the correct DAOs to persist the new version of this Child.</p>\n\n<p>Controllers are free to ask the service for a Child, change the fields around (conceivably based on some user input) - a sane design would have the Controller doing some work with the Child POJO and then asking the Service to persist the change. The model POJO should know nothing about a controller, service, or DAO but just simply hold data as you suggest - certainly you would not want every call to <code>setName()</code> or <code>setGender()</code> to automatically result in a database update.</p>\n\n<p>Instead, the controller and/or service should acquire a <code>Child</code> object, do whatever work it needs to the object in it's unit of work, and then ask a Service (and then the DAO) to persist the changes.</p>\n\n<p>Validation can take place in several layers - the Controller might want to validate any input from the web user, and the Service may want to validate that it has a valid <code>Child</code> object before it persists it. It especially makes sense to have some level of validation in both layers in case you want to re-use this Service in other capacities - such as exposing a REST interface, a different front-end, etc.</p>\n"},{"tags":[],"owner":{"account_id":75804,"reputation":94815,"user_id":217324,"accept_rate":96,"display_name":"Nathan Hughes"},"down_vote_count":0,"up_vote_count":62,"is_accepted":false,"score":62,"last_activity_date":1377372511,"creation_date":1286484681,"answer_id":3885783,"question_id":3885675,"body_markdown":"Generally a Spring service is transactional. Things go into a particular service method because they ought to be grouped together in the same transaction. If you want to retrieve an object from the database, twiddle it, and save the new version, the retrieval and save ought to be in the same service method. So your service methods are determined according to what you need the application to do for the user.\r\n\r\nI try to restrict controllers to doing work related to validating http parameters, deciding what service method to call with what parameters, what to put in the httpsession or request, what view to redirect or forward to, or similar web-related stuff. \r\n\r\nAs far as validation goes: Validating input parameters in the controller is a good thing to make sure nobody can break your application with bogus inputs. Validation in the controller tends to be about making sure the inputs are syntactically ok (including detecting injection attacks) while service-level validation is about making sure the state of things in the database is what you expect it to be. \r\n\r\nSo controllers contain web-framework infrastructure code, services contain application logic code.","title":"Service layer and controller: who takes care of what?","body":"<p>Generally a Spring service is transactional. Things go into a particular service method because they ought to be grouped together in the same transaction. If you want to retrieve an object from the database, twiddle it, and save the new version, the retrieval and save ought to be in the same service method. So your service methods are determined according to what you need the application to do for the user.</p>\n\n<p>I try to restrict controllers to doing work related to validating http parameters, deciding what service method to call with what parameters, what to put in the httpsession or request, what view to redirect or forward to, or similar web-related stuff. </p>\n\n<p>As far as validation goes: Validating input parameters in the controller is a good thing to make sure nobody can break your application with bogus inputs. Validation in the controller tends to be about making sure the inputs are syntactically ok (including detecting injection attacks) while service-level validation is about making sure the state of things in the database is what you expect it to be. </p>\n\n<p>So controllers contain web-framework infrastructure code, services contain application logic code.</p>\n"}],"owner":{"account_id":134427,"reputation":1344,"user_id":336547,"accept_rate":90,"display_name":"toomuchcs"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":42617,"favorite_count":0,"down_vote_count":0,"up_vote_count":63,"accepted_answer_id":3885740,"answer_count":2,"score":63,"last_activity_date":1689843122,"creation_date":1286483801,"question_id":3885675,"body_markdown":"In class we&#39;re now learning how to build up a Spring application, even though spring isn&#39;t directly involved, we learned how to make the interfaces for DAO and service layer objects. \r\n\r\nPlease correct me if I&#39;m wrong:\r\nDAO layer is pretty abstract: it just contains the CRUD operations and is further used to read data.(ie: get all objects, get specific objects, etc)\r\n\r\nService layer: contains services to create things, and delete things, this is where business logic should be. \r\n\r\nNow all of this makes sense in the service layer; except &quot;updating&quot; objects. Do you just put a &quot;update&quot; function that just saves the object in your database? Or do you need to define the logic there as well? This is where my confusion is as, my understanding is objects in Spring are just POJO&#39;s. Now then who validates the data? \r\n\r\nLet&#39;s say I have an Object &quot;child&quot;\r\nit has:`Name`, `SurName`, `Gender`, `Photo`, `Birthdate`\r\nfields.\r\nhow would I name the services? Or would you just let the controller take care of validation, which doesn&#39;t seem right to me. On the other hand it wouldn&#39;t seem right either to delegate every setter that needs to be called to the service layer.\r\n\r\nSo just basically: help me with how to define saving your objects via the service layer.","title":"Service layer and controller: who takes care of what?","body":"<p>In class we're now learning how to build up a Spring application, even though spring isn't directly involved, we learned how to make the interfaces for DAO and service layer objects. </p>\n\n<p>Please correct me if I'm wrong:\nDAO layer is pretty abstract: it just contains the CRUD operations and is further used to read data.(ie: get all objects, get specific objects, etc)</p>\n\n<p>Service layer: contains services to create things, and delete things, this is where business logic should be. </p>\n\n<p>Now all of this makes sense in the service layer; except \"updating\" objects. Do you just put a \"update\" function that just saves the object in your database? Or do you need to define the logic there as well? This is where my confusion is as, my understanding is objects in Spring are just POJO's. Now then who validates the data? </p>\n\n<p>Let's say I have an Object \"child\"\nit has:<code>Name</code>, <code>SurName</code>, <code>Gender</code>, <code>Photo</code>, <code>Birthdate</code>\nfields.\nhow would I name the services? Or would you just let the controller take care of validation, which doesn't seem right to me. On the other hand it wouldn't seem right either to delegate every setter that needs to be called to the service layer.</p>\n\n<p>So just basically: help me with how to define saving your objects via the service layer.</p>\n"},{"tags":["java","spring","spring-boot"],"owner":{"account_id":29055113,"reputation":11,"user_id":22257029,"display_name":"boy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":78,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1689843079,"creation_date":1689842349,"question_id":76728087,"body_markdown":"Environment:\r\n\r\n1. Operating Environment: Linux + K8S\r\n2. Database: Oracle\r\n3. Druid Version: 1.1.0\r\n\r\nI encountered a strange issue in my Spring Boot application. I&#39;m using the Druid connection pool to connect to an Oracle database. Occasionally, I observe that retrieving the `SqlSession` from the Druid connection pool is fast, but the subsequent JDBC execution is very slow. It takes around 10 minutes or more. Can anyone please help me with this?\r\n\r\nLog images:\r\n[log image](https://i.stack.imgur.com/7sCMP.png)\r\n\r\nProject config:\r\n\r\n```\r\nspring:\r\n  datasource:\r\n    druid:\r\n      url: jdbc:oracle:thin:@192.168.1.10:1521:prod\r\n      initial-size: 10\r\n      max-active: 20\r\n      min-idle: 1\r\n      max-wait: 60000\r\n      pool-prepared-statements: true\r\n      max-pool-prepared-statement-per-connection-size: 20\r\n      validation-query: SELECT 1 FROM DUAL\r\n      test-on-borrow: false\r\n      test-on-return: false\r\n      test-while-idle: true\r\n      time-between-eviction-runs-millis: 60000\r\n      min-evictable-idle-time-millis: 30000\r\n      remove-abandoned: true       \r\n      remove-abandoned-timeout: 60 \r\n      web-stat-filter:\r\n        enabled: true\r\n        url-pattern: /*\r\n        #exclusions: *.js,*.gif,*.jpg,*.png,*.css,*.ico,/druid/*\r\n        session-stat-enable: false\r\n        session-stat-max-count: 1000\r\n        profile-enable: true\r\n        principal-session-name: admin\r\n        principal-cookie-name: admin\r\n      stat-view-servlet:\r\n        enabled: true\r\n        url-pattern: /druid/*\r\n        reset-enable: true\r\n        login-username: user1\r\n        login-password: user1\r\n      driver-class-name: oracle.jdbc.driver.OracleDriver\r\n    username: user1\r\n    password: user1\r\n```\r\n\r\nPlease help to take a look, I have not yet found a solution","title":"In a Spring Boot project, obtaining SqlSession from Druid is very fast, but the subsequent JDBC connections are very slow","body":"<p>Environment:</p>\n<ol>\n<li>Operating Environment: Linux + K8S</li>\n<li>Database: Oracle</li>\n<li>Druid Version: 1.1.0</li>\n</ol>\n<p>I encountered a strange issue in my Spring Boot application. I'm using the Druid connection pool to connect to an Oracle database. Occasionally, I observe that retrieving the <code>SqlSession</code> from the Druid connection pool is fast, but the subsequent JDBC execution is very slow. It takes around 10 minutes or more. Can anyone please help me with this?</p>\n<p>Log images:\n<a href=\"https://i.stack.imgur.com/7sCMP.png\" rel=\"nofollow noreferrer\">log image</a></p>\n<p>Project config:</p>\n<pre><code>spring:\n  datasource:\n    druid:\n      url: jdbc:oracle:thin:@192.168.1.10:1521:prod\n      initial-size: 10\n      max-active: 20\n      min-idle: 1\n      max-wait: 60000\n      pool-prepared-statements: true\n      max-pool-prepared-statement-per-connection-size: 20\n      validation-query: SELECT 1 FROM DUAL\n      test-on-borrow: false\n      test-on-return: false\n      test-while-idle: true\n      time-between-eviction-runs-millis: 60000\n      min-evictable-idle-time-millis: 30000\n      remove-abandoned: true       \n      remove-abandoned-timeout: 60 \n      web-stat-filter:\n        enabled: true\n        url-pattern: /*\n        #exclusions: *.js,*.gif,*.jpg,*.png,*.css,*.ico,/druid/*\n        session-stat-enable: false\n        session-stat-max-count: 1000\n        profile-enable: true\n        principal-session-name: admin\n        principal-cookie-name: admin\n      stat-view-servlet:\n        enabled: true\n        url-pattern: /druid/*\n        reset-enable: true\n        login-username: user1\n        login-password: user1\n      driver-class-name: oracle.jdbc.driver.OracleDriver\n    username: user1\n    password: user1\n</code></pre>\n<p>Please help to take a look, I have not yet found a solution</p>\n"},{"tags":["java","heap-memory","mqtt","paho"],"comments":[{"owner":{"account_id":236814,"reputation":55963,"user_id":504554,"accept_rate":100,"display_name":"hardillb"},"score":0,"creation_date":1689779922,"post_id":76720614,"comment_id":135262625,"body_markdown":"What are your message sizes and rates, does it level off at 80-90% and run fine (just with more frequent GC)?","body":"What are your message sizes and rates, does it level off at 80-90% and run fine (just with more frequent GC)?"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1689790264,"post_id":76720614,"comment_id":135264837,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."},{"owner":{"account_id":27898173,"reputation":1,"user_id":21303000,"display_name":"BF_PI"},"score":0,"creation_date":1689832342,"post_id":76720614,"comment_id":135269610,"body_markdown":"@hardillb I hope my edit makes it clearer","body":"@hardillb I hope my edit makes it clearer"},{"owner":{"account_id":236814,"reputation":55963,"user_id":504554,"accept_rate":100,"display_name":"hardillb"},"score":0,"creation_date":1689835416,"post_id":76720614,"comment_id":135270085,"body_markdown":"Java garbage collection only happens when there is a failure to allocate a new object, so if the load is stopped then nothing is allocating objects so there will be no GC","body":"Java garbage collection only happens when there is a failure to allocate a new object, so if the load is stopped then nothing is allocating objects so there will be no GC"},{"owner":{"account_id":27898173,"reputation":1,"user_id":21303000,"display_name":"BF_PI"},"score":0,"creation_date":1689837968,"post_id":76720614,"comment_id":135270621,"body_markdown":"yeah but even if I do ` jcmd &lt;pid&gt; GC.run` there is nothing released","body":"yeah but even if I do ` jcmd &lt;pid&gt; GC.run` there is nothing released"}],"owner":{"account_id":27898173,"reputation":1,"user_id":21303000,"display_name":"BF_PI"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689841841,"creation_date":1689764575,"question_id":76720614,"body_markdown":"I am using the eclipse Paho Mqttv5 client and the mosquitto broker.\r\nWhen I subscribe with QoS=2(ExactlyOnce) e.g MqttProperties occupy more and more space of the heap.\r\nEven if I stop the publishing application the MqttProperties(among other classes from the paho framework) are not beeing released by the GarbageCollector(Even If I force the GC to run).\r\n\r\nThe applications used Heap space is rushing up and peaks at abt 80-90%  of the Max Heapspace after a few minutes.\r\n\r\nIf I switch to QoS=1(AtLeastOnce) The used heap space is nearly constant.\r\n\r\nI could ask myself if QoS=2 is really necessary - but I would like to understand what is going on here.\r\n\r\n**EDIT**:\r\n\r\nI gave both Applications a max heap size of 1G, it seems they both peak at about 210M\r\n\r\n![Heap Application #1][1]\r\n\r\n Application1: receives 1 Message every 100ms\r\n\r\n![Heap Application #2][2]\r\n\r\n Application2: receives 7 Messages every ~150ms(at once!)\r\n\r\nA messages is about 20bytes\r\n\r\nSo the only difference I see is that Application #2 is reaching the peak faster because of the higher workload.\r\n\r\nBut as far as I observe right now - even after I stop the publishing the memory is not beeing released. Is there a buffer for the messages to be Acknowledged in QoS=2 which fills up and is reused after a certain amount is reached?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/hrLDK.png\r\n  [2]: https://i.stack.imgur.com/pHW5N.png","title":"Paho MqttClient with QoS=2 - Higher used HeapSpace","body":"<p>I am using the eclipse Paho Mqttv5 client and the mosquitto broker.\nWhen I subscribe with QoS=2(ExactlyOnce) e.g MqttProperties occupy more and more space of the heap.\nEven if I stop the publishing application the MqttProperties(among other classes from the paho framework) are not beeing released by the GarbageCollector(Even If I force the GC to run).</p>\n<p>The applications used Heap space is rushing up and peaks at abt 80-90%  of the Max Heapspace after a few minutes.</p>\n<p>If I switch to QoS=1(AtLeastOnce) The used heap space is nearly constant.</p>\n<p>I could ask myself if QoS=2 is really necessary - but I would like to understand what is going on here.</p>\n<p><strong>EDIT</strong>:</p>\n<p>I gave both Applications a max heap size of 1G, it seems they both peak at about 210M</p>\n<p><img src=\"https://i.stack.imgur.com/hrLDK.png\" alt=\"Heap Application #1\" /></p>\n<p>Application1: receives 1 Message every 100ms</p>\n<p><img src=\"https://i.stack.imgur.com/pHW5N.png\" alt=\"Heap Application #2\" /></p>\n<p>Application2: receives 7 Messages every ~150ms(at once!)</p>\n<p>A messages is about 20bytes</p>\n<p>So the only difference I see is that Application #2 is reaching the peak faster because of the higher workload.</p>\n<p>But as far as I observe right now - even after I stop the publishing the memory is not beeing released. Is there a buffer for the messages to be Acknowledged in QoS=2 which fills up and is reused after a certain amount is reached?</p>\n"},{"tags":["java","r","macos","rjava"],"answers":[{"tags":[],"owner":{"account_id":9797880,"reputation":55,"user_id":7260193,"display_name":"Levon Rush"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1626130221,"creation_date":1626130221,"answer_id":68354610,"question_id":67849830,"body_markdown":"I had the same problem as you but managed to get it going after finding this burried in some documetation.\r\n\r\n&gt; To use Java (specifically, package rJava) with a CRAN (‘x86_64’) binary distribution of R on ‘arm64’ macOS install a ‘x86_64’ build of a Java JRE such as that from AdoptOpenJDK, then run sudo R CMD javareconf. \r\n\r\n&gt; To see what compatible versions of Java are currently installed, run /usr/libexec/java_home -V -a x86_64. If needed, set the environment variable JAVA_HOME to choose between these, both when R is built from the sources and when R CMD javareconf is run.\r\n\r\n&gt; Configuring and building R both looks for a JRE and for support for compiling JNI programs (used to install packages rJava and JavaGD); the latter requires a JDK (Java SDK) and not just a JRE99.\r\n\r\nhttps://cran.r-project.org/doc/manuals/r-patched/R-admin.html","title":"How to install rJava package in Mac with M1 architecture","body":"<p>I had the same problem as you but managed to get it going after finding this burried in some documetation.</p>\n<blockquote>\n<p>To use Java (specifically, package rJava) with a CRAN (‘x86_64’) binary distribution of R on ‘arm64’ macOS install a ‘x86_64’ build of a Java JRE such as that from AdoptOpenJDK, then run sudo R CMD javareconf.</p>\n</blockquote>\n<blockquote>\n<p>To see what compatible versions of Java are currently installed, run /usr/libexec/java_home -V -a x86_64. If needed, set the environment variable JAVA_HOME to choose between these, both when R is built from the sources and when R CMD javareconf is run.</p>\n</blockquote>\n<blockquote>\n<p>Configuring and building R both looks for a JRE and for support for compiling JNI programs (used to install packages rJava and JavaGD); the latter requires a JDK (Java SDK) and not just a JRE99.</p>\n</blockquote>\n<p><a href=\"https://cran.r-project.org/doc/manuals/r-patched/R-admin.html\" rel=\"nofollow noreferrer\">https://cran.r-project.org/doc/manuals/r-patched/R-admin.html</a></p>\n"},{"tags":[],"owner":{"account_id":3094993,"reputation":356,"user_id":2620381,"display_name":"Frederick Solt"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1639671772,"creation_date":1639670702,"answer_id":70382146,"question_id":67849830,"body_markdown":"The way I got things working well enough to use the packages I needed (e.g., `tabulizer`--see [here](https://stackoverflow.com/a/70381999/2620381)) was by backing all the way down to Java 8. To get a matching arm64 build, this means [getting Java from Azul](https://www.azul.com/downloads/?version=java-8-lts&amp;package=jdk), since Oracle doesn&#39;t (yet?) put out one for that version.","title":"How to install rJava package in Mac with M1 architecture","body":"<p>The way I got things working well enough to use the packages I needed (e.g., <code>tabulizer</code>--see <a href=\"https://stackoverflow.com/a/70381999/2620381\">here</a>) was by backing all the way down to Java 8. To get a matching arm64 build, this means <a href=\"https://www.azul.com/downloads/?version=java-8-lts&amp;package=jdk\" rel=\"nofollow noreferrer\">getting Java from Azul</a>, since Oracle doesn't (yet?) put out one for that version.</p>\n"},{"tags":[],"owner":{"account_id":8839989,"reputation":1833,"user_id":6602746,"display_name":"Shinobi_Atobe"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1689841734,"creation_date":1689841734,"answer_id":76728012,"question_id":67849830,"body_markdown":"This worked for me \r\n\r\n - Install the latest stable version of R from CRAN (tested on 4.3.1\r\n   (2023-06-16)) \r\n - Install a x86_64 build of Java (version 17 - it does\r\n   not seem to work with versions 8 or 11) with `brew tap\r\n   homebrew/cask-versions &amp;&amp; brew install --cask temurin17` \r\n - Add it to PATH with `export JAVA_HOME=$(/usr/libexec/java_home -v 17)` \r\n- run `sudo -E R CMD javareconf`\r\n\r\nThen open R and `install.packages(&#39;rJava&#39;)` should work","title":"How to install rJava package in Mac with M1 architecture","body":"<p>This worked for me</p>\n<ul>\n<li>Install the latest stable version of R from CRAN (tested on 4.3.1\n(2023-06-16))</li>\n<li>Install a x86_64 build of Java (version 17 - it does\nnot seem to work with versions 8 or 11) with <code>brew tap homebrew/cask-versions &amp;&amp; brew install --cask temurin17</code></li>\n<li>Add it to PATH with <code>export JAVA_HOME=$(/usr/libexec/java_home -v 17)</code></li>\n<li>run <code>sudo -E R CMD javareconf</code></li>\n</ul>\n<p>Then open R and <code>install.packages('rJava')</code> should work</p>\n"}],"owner":{"account_id":4066631,"reputation":2898,"user_id":7179299,"display_name":"LDT"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4048,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":3,"score":6,"last_activity_date":1689841734,"creation_date":1622897768,"question_id":67849830,"body_markdown":"I have a terrible time installing the package in R while I am using a Mac with M1 architecture.\r\n\r\nHere are the steps I have followed so far\r\n\r\n1. install Java https://www.azul.com/downloads/?os=macos&amp;architecture=arm-64-bit&amp;package=jdk, using the version Zulu: 16.30.19\r\n\r\n2. `install.packages(&quot;rJava&quot;)` in R\r\n\r\n3. `R CMD javareconf` in terminal\r\n\r\n4. `dyn.load(&quot;/Library/Java/JavaVirtualMachines/zulu-16.jdk/Contents/Home/lib/server/libjvm.dylib&quot;)` in R \r\n\r\n5. `library(rJava)` \r\n\r\n\r\nThis is my error\r\n\r\n``` \r\nError: package or namespace load failed for ‘rJava’:\r\n .onLoad failed in loadNamespace() for &#39;rJava&#39;, details:\r\n  call: dyn.load(jvm, FALSE)\r\n  error: unable to load shared object &#39;/Library/Java/JavaVirtualMachines/zulu-16.jdk/Contents/Home/lib/server/libjvm.dylib&#39;:\r\n  dlopen(/Library/Java/JavaVirtualMachines/zulu-16.jdk/Contents/Home/lib/server/libjvm.dylib, 10): no suitable image found.  Did find:\r\n\t/Library/Java/JavaVirtualMachines/zulu-16.jdk/Contents/Home/lib/server/libjvm.dylib: mach-o, but wrong architecture\r\n\t/Library/Java/JavaVirtualMachines/zulu-16.jdk/Contents/Home/lib/server/libjvm.dylib: mach-o, but wrong architecture\r\n```\r\n\r\nAny help is be appreciated\r\n","title":"How to install rJava package in Mac with M1 architecture","body":"<p>I have a terrible time installing the package in R while I am using a Mac with M1 architecture.</p>\n<p>Here are the steps I have followed so far</p>\n<ol>\n<li><p>install Java <a href=\"https://www.azul.com/downloads/?os=macos&amp;architecture=arm-64-bit&amp;package=jdk\" rel=\"noreferrer\">https://www.azul.com/downloads/?os=macos&amp;architecture=arm-64-bit&amp;package=jdk</a>, using the version Zulu: 16.30.19</p>\n</li>\n<li><p><code>install.packages(&quot;rJava&quot;)</code> in R</p>\n</li>\n<li><p><code>R CMD javareconf</code> in terminal</p>\n</li>\n<li><p><code>dyn.load(&quot;/Library/Java/JavaVirtualMachines/zulu-16.jdk/Contents/Home/lib/server/libjvm.dylib&quot;)</code> in R</p>\n</li>\n<li><p><code>library(rJava)</code></p>\n</li>\n</ol>\n<p>This is my error</p>\n<pre><code>Error: package or namespace load failed for ‘rJava’:\n .onLoad failed in loadNamespace() for 'rJava', details:\n  call: dyn.load(jvm, FALSE)\n  error: unable to load shared object '/Library/Java/JavaVirtualMachines/zulu-16.jdk/Contents/Home/lib/server/libjvm.dylib':\n  dlopen(/Library/Java/JavaVirtualMachines/zulu-16.jdk/Contents/Home/lib/server/libjvm.dylib, 10): no suitable image found.  Did find:\n    /Library/Java/JavaVirtualMachines/zulu-16.jdk/Contents/Home/lib/server/libjvm.dylib: mach-o, but wrong architecture\n    /Library/Java/JavaVirtualMachines/zulu-16.jdk/Contents/Home/lib/server/libjvm.dylib: mach-o, but wrong architecture\n</code></pre>\n<p>Any help is be appreciated</p>\n"},{"tags":["python","java","windows","batch-file","jython"],"comments":[{"owner":{"account_id":8002,"reputation":283793,"user_id":14122,"accept_rate":71,"display_name":"Charles Duffy"},"score":0,"creation_date":1689779447,"post_id":76722723,"comment_id":135262505,"body_markdown":"What&#39;s the specific exception you get from importing the second class? (Is it a vanilla ImportError, or anything more specialized?)","body":"What&#39;s the specific exception you get from importing the second class? (Is it a vanilla ImportError, or anything more specialized?)"},{"owner":{"account_id":8002,"reputation":283793,"user_id":14122,"accept_rate":71,"display_name":"Charles Duffy"},"score":0,"creation_date":1689779477,"post_id":76722723,"comment_id":135262518,"body_markdown":"Does using `unzip -l vortex-3.10.30.jar | grep -E &#39;BatchImporter|WktFactory&#39;` show anything obvious that&#39;s different between the two?","body":"Does using <code>unzip -l vortex-3.10.30.jar | grep -E &#39;BatchImporter|WktFactory&#39;</code> show anything obvious that&#39;s different between the two?"},{"owner":{"account_id":8002,"reputation":283793,"user_id":14122,"accept_rate":71,"display_name":"Charles Duffy"},"score":0,"creation_date":1689779543,"post_id":76722723,"comment_id":135262540,"body_markdown":"For that matter, what results does `unzip -l vortex-3.10.30.jar | grep geo` emit? I wouldn&#39;t be astonished if there were a separate jar for geographic extensions or such, but without seeing the library that&#39;s just speculation.","body":"For that matter, what results does <code>unzip -l vortex-3.10.30.jar | grep geo</code> emit? I wouldn&#39;t be astonished if there were a separate jar for geographic extensions or such, but without seeing the library that&#39;s just speculation."},{"owner":{"account_id":16945899,"reputation":1,"user_id":12256679,"display_name":"raf"},"score":0,"creation_date":1689779809,"post_id":76722723,"comment_id":135262600,"body_markdown":"It is as you call it a vanilla ImportError. I will check what happens after running unzip and will add to the question. Thanks for pointing this out.","body":"It is as you call it a vanilla ImportError. I will check what happens after running unzip and will add to the question. Thanks for pointing this out."},{"owner":{"account_id":8002,"reputation":283793,"user_id":14122,"accept_rate":71,"display_name":"Charles Duffy"},"score":0,"creation_date":1689780308,"post_id":76722723,"comment_id":135262722,"body_markdown":"(err, 0.10.30, ignore my repeated typo above; reading the codebase to 0.10.30, it looks like it _did_ contain the WktFactory class at that time)","body":"(err, 0.10.30, ignore my repeated typo above; reading the codebase to 0.10.30, it looks like it <i>did</i> contain the WktFactory class at that time)"},{"owner":{"account_id":16945899,"reputation":1,"user_id":12256679,"display_name":"raf"},"score":0,"creation_date":1689931654,"post_id":76722723,"comment_id":135286000,"body_markdown":"Please see my modified question","body":"Please see my modified question"}],"owner":{"account_id":16945899,"reputation":1,"user_id":12256679,"display_name":"raf"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":69,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689841578,"creation_date":1689779225,"question_id":76722723,"body_markdown":"I need to automate execution of a small programm written in Java.\r\nThe programm has an API that can be accessed through a Python script that I am calling from Jython-Standalone. My Python script needs to import two java classes (modules) but only one is recognized. \r\nFurtheremore, I am trying to automate execution of the script through a batch file.\r\n\r\n\r\nThe Python script resides outside the *.jar file in which the java classes are located, thus I am inserting the *.jar path with sys.path.insert.\r\nSo far the code looks like this:\r\n\r\n&lt;!-- language: lang-python --&gt;\r\n\r\n    import sys\r\n    sys.path.insert(0, &#39;C:/Program Files/HEC/HEC-HMS/4.10/lib/vortex-0.10.30.jar&#39;)\r\n    from mil.army.usace.hec.vortex.io import BatchImporter\r\n    print(&#39;Imported BatchImporter&#39;)\r\n    from mil.army.usace.hec.vortex.geo import WktFactory\r\n\r\nThis results in:\r\n\r\n&gt; `Imported BatchImporter`\r\n\r\n&gt; `ImportError: No module named geo`\r\n\r\nWhat is weird is that the first import works properly but not the second one. \r\n\r\n`mil.army.usace.hec.vortex.io` and `mil.army.usace.hec.vortex.geo` is the directory structure containing the Java classes and I have checked and double checked and the classes are in did under this structure.\r\n\r\nI thought maybe there is some weird character on &quot;mil.army.usace.hec.vortex.geo&quot; so I have tried all sorts of capital and small letters combinations to no avail.\r\n\r\nI am not a programmer and have never had any experience with Java or Jython, so plase bare with me if I am not expressing the whole issue properly.\r\n\r\nIn case it is useful, here is the BAT file content I am using to call the met_data_import.py script.\r\n\r\n&lt;!-- language: lang-batch-file --&gt;\r\n\r\n    SET &quot;HMS_HOME=C:\\Program Files\\HEC\\HEC-HMS\\4.10&quot;\r\n    SET &quot;PATH=%HMS_HOME%\\bin;%HMS_HOME%\\bin\\gdal;%PATH%&quot;\r\n    SET &quot;PROJ_LIB=%HMS_HOME%\\bin\\gdal\\projlib&quot;\r\n    SET &quot;GDAL_DATA=%HMS_HOME%\\bin\\gdal\\gdal-data&quot;\r\n    SET &quot;CLASSPATH=%HMS_HOME%\\lib\\*&quot;\r\n    &quot;%HMS_HOME%\\jre\\bin\\java.exe&quot; -jar C:\\Users\\..\\..\\jython-standalone-2.7.3.jar C:\\Users\\..\\..\\..\\GRID_Importer\\met_data_import.py\r\n\r\n\r\n\r\nSome things to consider:\r\n- I would like to keep using jython-standalone if possible.\r\n- I cannot modify anything within the *.jar file.\r\n\r\nThanks for any help. I will be happy to improve the question if needed.\r\n\r\nFollowing @Charles Duffy advice I searched inside the jar file through the CMD (by the way I am in a Windows environment): `tar -tf vortex-0.10.30.jar | findstr geo` and for comparisson `...| findstr io` and here is what it spitted out:\r\n\r\n&gt; `mil/army/usace/hec/vortex/geo/`...\r\n\r\n&gt; `mil/army/usace/hec/vortex/geo/WktFactory.class`...\r\n\r\nand\r\n\r\n&gt; `mil/army/usace/hec/vortex/io/`...\r\n\r\n&gt; `mil/army/usace/hec/vortex/io/BatchImporter.class`...","title":"Importing Java Class from a Python (Jython) Script fails","body":"<p>I need to automate execution of a small programm written in Java.\nThe programm has an API that can be accessed through a Python script that I am calling from Jython-Standalone. My Python script needs to import two java classes (modules) but only one is recognized.\nFurtheremore, I am trying to automate execution of the script through a batch file.</p>\n<p>The Python script resides outside the *.jar file in which the java classes are located, thus I am inserting the *.jar path with sys.path.insert.\nSo far the code looks like this:</p>\n<pre class=\"lang-python prettyprint-override\"><code>import sys\nsys.path.insert(0, 'C:/Program Files/HEC/HEC-HMS/4.10/lib/vortex-0.10.30.jar')\nfrom mil.army.usace.hec.vortex.io import BatchImporter\nprint('Imported BatchImporter')\nfrom mil.army.usace.hec.vortex.geo import WktFactory\n</code></pre>\n<p>This results in:</p>\n<blockquote>\n<p><code>Imported BatchImporter</code></p>\n</blockquote>\n<blockquote>\n<p><code>ImportError: No module named geo</code></p>\n</blockquote>\n<p>What is weird is that the first import works properly but not the second one.</p>\n<p><code>mil.army.usace.hec.vortex.io</code> and <code>mil.army.usace.hec.vortex.geo</code> is the directory structure containing the Java classes and I have checked and double checked and the classes are in did under this structure.</p>\n<p>I thought maybe there is some weird character on &quot;mil.army.usace.hec.vortex.geo&quot; so I have tried all sorts of capital and small letters combinations to no avail.</p>\n<p>I am not a programmer and have never had any experience with Java or Jython, so plase bare with me if I am not expressing the whole issue properly.</p>\n<p>In case it is useful, here is the BAT file content I am using to call the met_data_import.py script.</p>\n<pre class=\"lang-batch-file prettyprint-override\"><code>SET &quot;HMS_HOME=C:\\Program Files\\HEC\\HEC-HMS\\4.10&quot;\nSET &quot;PATH=%HMS_HOME%\\bin;%HMS_HOME%\\bin\\gdal;%PATH%&quot;\nSET &quot;PROJ_LIB=%HMS_HOME%\\bin\\gdal\\projlib&quot;\nSET &quot;GDAL_DATA=%HMS_HOME%\\bin\\gdal\\gdal-data&quot;\nSET &quot;CLASSPATH=%HMS_HOME%\\lib\\*&quot;\n&quot;%HMS_HOME%\\jre\\bin\\java.exe&quot; -jar C:\\Users\\..\\..\\jython-standalone-2.7.3.jar C:\\Users\\..\\..\\..\\GRID_Importer\\met_data_import.py\n</code></pre>\n<p>Some things to consider:</p>\n<ul>\n<li>I would like to keep using jython-standalone if possible.</li>\n<li>I cannot modify anything within the *.jar file.</li>\n</ul>\n<p>Thanks for any help. I will be happy to improve the question if needed.</p>\n<p>Following @Charles Duffy advice I searched inside the jar file through the CMD (by the way I am in a Windows environment): <code>tar -tf vortex-0.10.30.jar | findstr geo</code> and for comparisson <code>...| findstr io</code> and here is what it spitted out:</p>\n<blockquote>\n<p><code>mil/army/usace/hec/vortex/geo/</code>...</p>\n</blockquote>\n<blockquote>\n<p><code>mil/army/usace/hec/vortex/geo/WktFactory.class</code>...</p>\n</blockquote>\n<p>and</p>\n<blockquote>\n<p><code>mil/army/usace/hec/vortex/io/</code>...</p>\n</blockquote>\n<blockquote>\n<p><code>mil/army/usace/hec/vortex/io/BatchImporter.class</code>...</p>\n</blockquote>\n"},{"tags":["java","gradle","intellij-idea","javafx","launch4j"],"comments":[{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1689875387,"post_id":76727958,"comment_id":135278812,"body_markdown":"Note that &quot;shadowed&quot; JARs (also knows as &quot;fat&quot; or &quot;uber&quot; JARs) and modules do not mix. The JAR specification does not define any way to have multiple modules per JAR file. Also, when you &quot;double click&quot; on an executable JAR file it gets launched via the `-jar` switch, meaning everything is placed on the class-path. Now, I don&#39;t really know how Launch4J works, but the fact you&#39;re shadowing your JAR file makes me think all the code is being placed on the class-path. And in that context, if your main class extends `Application`, then you&#39;ll see the error you&#39;ll describe.","body":"Note that &quot;shadowed&quot; JARs (also knows as &quot;fat&quot; or &quot;uber&quot; JARs) and modules do not mix. The JAR specification does not define any way to have multiple modules per JAR file. Also, when you &quot;double click&quot; on an executable JAR file it gets launched via the <code>-jar</code> switch, meaning everything is placed on the class-path. Now, I don&#39;t really know how Launch4J works, but the fact you&#39;re shadowing your JAR file makes me think all the code is being placed on the class-path. And in that context, if your main class extends <code>Application</code>, then you&#39;ll see the error you&#39;ll describe."},{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1689875472,"post_id":76727958,"comment_id":135278830,"body_markdown":"See if creating a separate main class, which only contains a main method that does nothing but call `Application.launch(QuoteMainApplication.class, args)`, fixes the error.","body":"See if creating a separate main class, which only contains a main method that does nothing but call <code>Application.launch(QuoteMainApplication.class, args)</code>, fixes the error."},{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1689875671,"post_id":76727958,"comment_id":135278872,"body_markdown":"As an aside, those JVM arguments in the IDE should not be necessary given you&#39;re using Gradle. You also should not need to download the JavaFX SDK because you&#39;ve configured Gradle to download the JavaFX JARs from the Maven Central repository. If you aren&#39;t doing this already, your IDE should be delegating to Gradle for most, if not all, build tasks. You&#39;ve applied the `application` plugin, so when you want to run your project you should be having your IDE execute the Gradle `run` task.","body":"As an aside, those JVM arguments in the IDE should not be necessary given you&#39;re using Gradle. You also should not need to download the JavaFX SDK because you&#39;ve configured Gradle to download the JavaFX JARs from the Maven Central repository. If you aren&#39;t doing this already, your IDE should be delegating to Gradle for most, if not all, build tasks. You&#39;ve applied the <code>application</code> plugin, so when you want to run your project you should be having your IDE execute the Gradle <code>run</code> task."},{"owner":{"account_id":22599428,"reputation":11,"user_id":16781231,"display_name":"dcfrenci"},"score":0,"creation_date":1689886469,"post_id":76727958,"comment_id":135280807,"body_markdown":"@Slaw I tried adding a class as you have suggested but it didn&#39;t solve the problem. I&#39;m having issue to create a jar file that include all the library that I added. My aim is to create a .exe file (installer) that works in any computer and doesn&#39;t need any version of java installed in the system to work (like most of the program are installed). If you can give me some advice on how to do it would be very very helpful because I spent too much hours tring to find any clue on internet. Thanks again for your answer.","body":"@Slaw I tried adding a class as you have suggested but it didn&#39;t solve the problem. I&#39;m having issue to create a jar file that include all the library that I added. My aim is to create a .exe file (installer) that works in any computer and doesn&#39;t need any version of java installed in the system to work (like most of the program are installed). If you can give me some advice on how to do it would be very very helpful because I spent too much hours tring to find any clue on internet. Thanks again for your answer."},{"owner":{"account_id":6179310,"reputation":2644,"user_id":4815321,"display_name":"mr mcwolf"},"score":1,"creation_date":1689923248,"post_id":76727958,"comment_id":135284484,"body_markdown":"&quot;... My aim is to create a .exe file (installer) ...&quot; The installer has nothing to do with the application. Its job is to copy and configure all the necessary components of your application on the respective target computer. Launch4J **does not create an installer** but a windows native launcher. Say what you really want to do, not how you decided to do it.","body":"&quot;... My aim is to create a .exe file (installer) ...&quot; The installer has nothing to do with the application. Its job is to copy and configure all the necessary components of your application on the respective target computer. Launch4J <b>does not create an installer</b> but a windows native launcher. Say what you really want to do, not how you decided to do it."},{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1689923627,"post_id":76727958,"comment_id":135284554,"body_markdown":"You can use jpackage to create an installer.  It can be used from gradle via the badass-runtime-plugin, whose git site links to JavaFX specific examples.  Read the documentation for each if you would like to know how to use them.  It does not need launch4j or shadow jars or anything like that.","body":"You can use jpackage to create an installer.  It can be used from gradle via the badass-runtime-plugin, whose git site links to JavaFX specific examples.  Read the documentation for each if you would like to know how to use them.  It does not need launch4j or shadow jars or anything like that."},{"owner":{"account_id":6179310,"reputation":2644,"user_id":4815321,"display_name":"mr mcwolf"},"score":0,"creation_date":1689926769,"post_id":76727958,"comment_id":135285132,"body_markdown":"a bit offtopic, but launch4j creates a launcher that effectively replaces the one generated by jpackage (which still imposes quite a few restrictions that I personally don&#39;t like).","body":"a bit offtopic, but launch4j creates a launcher that effectively replaces the one generated by jpackage (which still imposes quite a few restrictions that I personally don&#39;t like)."}],"owner":{"account_id":22599428,"reputation":11,"user_id":16781231,"display_name":"dcfrenci"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":173,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689841344,"creation_date":1689841344,"question_id":76727958,"body_markdown":"I&#39;m a new programmer and I&#39;m trying to create .exe file of my project. The project works without any error or warning, I created a fat-jar of my whole project with shadowJar plugin and modifing the Run configuration I got it working fine through Intellij.\r\n\r\n```\r\n--module-path\r\n&quot;C:\\Program Files\\Java\\javafx-sdk-17.0.7\\lib&quot;\r\n--add-modules\r\njavafx.controls,javafx.fxml\r\n```\r\nTo create the .exe file I&#39;m using Lauch4j but after I created the executable I couldn&#39;t run the application and the error &quot;JavaFX runtime components are missing, and are required to run this application&quot; is produced.\r\n\r\n\r\nAny help will be very helpful. Thanks in advance.\r\nThis is my build.gradle file:\r\n\r\n```\r\nplugins {\r\n    id &#39;java&#39;\r\n    id &#39;application&#39;\r\n    id &#39;org.javamodularity.moduleplugin&#39; version &#39;1.8.12&#39;\r\n    id &#39;org.openjfx.javafxplugin&#39; version &#39;0.0.13&#39;\r\n    id &#39;com.github.johnrengelman.shadow&#39; version &#39;7.1.0&#39;\r\n}\r\n\r\ngroup &#39;com.preventivoApp&#39;\r\nversion &#39;1.0-SNAPSHOT&#39;\r\nmainClassName = &#39;com.appproject_preventivo.QuoteMainApplication&#39;\r\n\r\nrepositories {\r\n    mavenCentral()\r\n}\r\n\r\next {\r\n    junitVersion = &#39;5.9.1&#39;\r\n}\r\n\r\nsourceCompatibility = &#39;17&#39;\r\ntargetCompatibility = &#39;17&#39;\r\n\r\ntasks.withType(JavaCompile) {\r\n    options.encoding = &#39;UTF-8&#39;\r\n}\r\n\r\napplication {\r\n    mainModule = &#39;com.appproject_preventivo&#39;\r\n    mainClass = &#39;com.appproject_preventivo.QuoteMainApplication&#39;\r\n}\r\n\r\njavafx {\r\n    version = &#39;17.0.2&#39;\r\n    modules = [&#39;javafx.controls&#39;, &#39;javafx.fxml&#39;]\r\n}\r\n\r\ndependencies {\r\n    implementation(&#39;org.controlsfx:controlsfx:11.1.2&#39;)\r\n\r\n    implementation &#39;org.openjfx:javafx-fxml:20&#39;\r\n    implementation &#39;org.openjfx:javafx-controls:20&#39;\r\n\r\n    testImplementation(&quot;org.junit.jupiter:junit-jupiter-api:${junitVersion}&quot;)\r\n    testRuntimeOnly(&quot;org.junit.jupiter:junit-jupiter-engine:${junitVersion}&quot;)\r\n\r\n    implementation group: &#39;com.fasterxml.jackson.core&#39;, name: &#39;jackson-core&#39;, version: &#39;2.15.0&#39;\r\n    implementation group: &#39;com.fasterxml.jackson.core&#39;, name: &#39;jackson-databind&#39;, version: &#39;2.15.0&#39;\r\n    implementation group: &#39;com.fasterxml.jackson.datatype&#39;, name: &#39;jackson-datatype-jsr310&#39;, version: &#39;2.15.0&#39;\r\n\r\n    implementation group: &#39;org.apache.pdfbox&#39;, name: &#39;pdfbox&#39;, version: &#39;2.0.28&#39;\r\n}\r\n\r\ntest {\r\n    useJUnitPlatform()\r\n}\r\nshadowJar {\r\n    zip64 true\r\n    mergeServiceFiles()\r\n    manifest {\r\n        attributes &#39;Main-Class&#39;: &#39;com.appproject_preventivo.QuoteMainApplication&#39;\r\n    }\r\n}\r\n```\r\n","title":"Solve the error: JavaFX runtime components are missing, and are required to run this application","body":"<p>I'm a new programmer and I'm trying to create .exe file of my project. The project works without any error or warning, I created a fat-jar of my whole project with shadowJar plugin and modifing the Run configuration I got it working fine through Intellij.</p>\n<pre><code>--module-path\n&quot;C:\\Program Files\\Java\\javafx-sdk-17.0.7\\lib&quot;\n--add-modules\njavafx.controls,javafx.fxml\n</code></pre>\n<p>To create the .exe file I'm using Lauch4j but after I created the executable I couldn't run the application and the error &quot;JavaFX runtime components are missing, and are required to run this application&quot; is produced.</p>\n<p>Any help will be very helpful. Thanks in advance.\nThis is my build.gradle file:</p>\n<pre><code>plugins {\n    id 'java'\n    id 'application'\n    id 'org.javamodularity.moduleplugin' version '1.8.12'\n    id 'org.openjfx.javafxplugin' version '0.0.13'\n    id 'com.github.johnrengelman.shadow' version '7.1.0'\n}\n\ngroup 'com.preventivoApp'\nversion '1.0-SNAPSHOT'\nmainClassName = 'com.appproject_preventivo.QuoteMainApplication'\n\nrepositories {\n    mavenCentral()\n}\n\next {\n    junitVersion = '5.9.1'\n}\n\nsourceCompatibility = '17'\ntargetCompatibility = '17'\n\ntasks.withType(JavaCompile) {\n    options.encoding = 'UTF-8'\n}\n\napplication {\n    mainModule = 'com.appproject_preventivo'\n    mainClass = 'com.appproject_preventivo.QuoteMainApplication'\n}\n\njavafx {\n    version = '17.0.2'\n    modules = ['javafx.controls', 'javafx.fxml']\n}\n\ndependencies {\n    implementation('org.controlsfx:controlsfx:11.1.2')\n\n    implementation 'org.openjfx:javafx-fxml:20'\n    implementation 'org.openjfx:javafx-controls:20'\n\n    testImplementation(&quot;org.junit.jupiter:junit-jupiter-api:${junitVersion}&quot;)\n    testRuntimeOnly(&quot;org.junit.jupiter:junit-jupiter-engine:${junitVersion}&quot;)\n\n    implementation group: 'com.fasterxml.jackson.core', name: 'jackson-core', version: '2.15.0'\n    implementation group: 'com.fasterxml.jackson.core', name: 'jackson-databind', version: '2.15.0'\n    implementation group: 'com.fasterxml.jackson.datatype', name: 'jackson-datatype-jsr310', version: '2.15.0'\n\n    implementation group: 'org.apache.pdfbox', name: 'pdfbox', version: '2.0.28'\n}\n\ntest {\n    useJUnitPlatform()\n}\nshadowJar {\n    zip64 true\n    mergeServiceFiles()\n    manifest {\n        attributes 'Main-Class': 'com.appproject_preventivo.QuoteMainApplication'\n    }\n}\n</code></pre>\n"},{"tags":["java","android","opengl-es-3.0"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1689808653,"post_id":76723053,"comment_id":135267671,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"owner":{"account_id":27439146,"reputation":3,"user_id":20934402,"display_name":"DragonDev"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689841245,"creation_date":1689781340,"question_id":76723053,"body_markdown":"I want to create a sphere with only normals, vertices, texture coords and without using indices. But on the Internet there are options only creation with indices. I just create a lib that helps to create 3d objects, and i don&#39;t use indices in this library.\r\nIf it&#39;s possible tell me how?","title":"How to create sphere without indices?","body":"<p>I want to create a sphere with only normals, vertices, texture coords and without using indices. But on the Internet there are options only creation with indices. I just create a lib that helps to create 3d objects, and i don't use indices in this library.\nIf it's possible tell me how?</p>\n"},{"tags":["java","json","spring-boot","recursion","jackson"],"comments":[{"owner":{"account_id":9463219,"reputation":9357,"user_id":7036419,"display_name":"Maurice Perry"},"score":0,"creation_date":1689841291,"post_id":76723354,"comment_id":135271268,"body_markdown":"Hibernate manipulates the bytecode so that access to lazy-loaded fields are replaced with the code actually able to load the object from the database. Jackson uses reflection to access fields, so it cannot do that.","body":"Hibernate manipulates the bytecode so that access to lazy-loaded fields are replaced with the code actually able to load the object from the database. Jackson uses reflection to access fields, so it cannot do that."},{"owner":{"account_id":29050632,"reputation":1,"user_id":22253538,"display_name":"Mike Wallace"},"score":0,"creation_date":1689842521,"post_id":76723354,"comment_id":135271544,"body_markdown":"I&#39;m looking for something to force Jackson do not fully serialized the first instance, but all of them doing the first depth level of recursion","body":"I&#39;m looking for something to force Jackson do not fully serialized the first instance, but all of them doing the first depth level of recursion"},{"owner":{"account_id":9463219,"reputation":9357,"user_id":7036419,"display_name":"Maurice Perry"},"score":0,"creation_date":1689920525,"post_id":76723354,"comment_id":135284027,"body_markdown":"Yeah, well that&#39;s another problem","body":"Yeah, well that&#39;s another problem"}],"owner":{"account_id":29050632,"reputation":1,"user_id":22253538,"display_name":"Mike Wallace"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689840128,"creation_date":1689783610,"question_id":76723354,"body_markdown":"I have 2 tables that have a N-N relationship. I&#39;m using SpringBoot 2.3.9 with Hibernate\r\n\r\nI managed to map them uni-directionally because of the way I query the objects.\r\n\r\nObjectB has a column that refers to himself and the recursion de-serialization via jackson is done only to the first occurence.\r\n\r\n\r\nThese are the mapping:\r\n\r\n\r\n```\r\n@Entity\r\n@Table(name = &quot;TABLE_OBJECT_A&quot;)\r\npublic class ObjectA {\r\n\r\n    // mapping N-N\r\n    @JoinTable(name = &quot;OBJECTA_X_OBJECTB&quot;,\r\n            joinColumns = @JoinColumn(name = &quot;A_ID&quot;),\r\n            inverseJoinColumns = @JoinColumn(name = &quot;B_ID&quot;)\r\n    )\r\n    private Set&lt;ObjectB&gt; setObjectB = new HashSet&lt;ObjectB&gt;();\r\n\r\n}\r\n```\r\n\r\n```\r\n@Entity\r\n@Table(name = &quot;TABLE_OBJECT_B&quot;)\r\n@JsonIdentityInfo(generator = ObjectIdGenerators.PropertyGenerator.class, property = &quot;id&quot;)\r\n// false - because I need the full object\r\n@JsonIdentityReference(alwaysAsId = false)\r\npublic class ObjectB {\r\n\r\n    // recursion\r\n    @OneToOne(fetch = FetchType.LAZY)\r\n    @JoinColumn(name = &quot;B_RECURSION_ID&quot;)\r\n    private ObjectB objectBRecursion;\r\n\r\n}\r\n```\r\n\r\n**findAll by JPA** json response:\r\n```\r\n\r\n[\r\n  {\r\n    &quot;version&quot;: &quot;2023-05-09T16:39:47.082+00:00&quot;,\r\n    &quot;id&quot;: 1619,\r\n    &quot;code&quot;: &quot;TRSU&quot;,\r\n    &quot;setObjectB&quot;: [\r\n      {\r\n        &quot;id&quot;: 31,\r\n        &quot;version&quot;: &quot;2018-07-18T08:12:14.000+00:00&quot;,\r\n        &quot;code&quot;: &quot;AMO&quot;\r\n      },\r\n      {\r\n        &quot;id&quot;: 100,\r\n        &quot;version&quot;: &quot;2023-04-18T10:00:45.786+00:00&quot;,\r\n        &quot;code&quot;: &quot;SMO&quot;\r\n      }\r\n    ]\r\n  },\r\n  {\r\n    &quot;version&quot;: &quot;2023-05-09T16:33:25.404+00:00&quot;,\r\n    &quot;id&quot;: 1520,\r\n    &quot;codice&quot;: &quot;SD&quot;,\r\n    &quot;setObjectB&quot;: [\r\n      100\r\n    ]\r\n  },\r\n  {\r\n    &quot;version&quot;: &quot;2023-05-09T16:40:48.313+00:00&quot;,\r\n    &quot;id&quot;: 1620,\r\n    &quot;code&quot;: &quot;TRSE&quot;,\r\n    &quot;setObjectB&quot;: [\r\n      31,\r\n      100\r\n    ]\r\n  },\r\n  {\r\n    &quot;version&quot;: &quot;2022-09-26T08:00:04.127+00:00&quot;,\r\n    &quot;id&quot;: 1019,\r\n    &quot;code&quot;: &quot;test&quot;,\r\n    &quot;setObjectB&quot;: [\r\n      31\r\n    ]\r\n  },\r\n  {\r\n    &quot;version&quot;: &quot;2023-04-18T09:50:27.744+00:00&quot;,\r\n    &quot;id&quot;: 1519,\r\n    &quot;code&quot;: &quot;DI&quot;,\r\n    &quot;setObjectB&quot;: [\r\n      31\r\n    ]\r\n  }\r\n]\r\n```\r\n\r\n\r\n\r\nAs you can see, only the **first occurence** of **setObjectB** property is fully deserialized.\r\n\r\nI need all of them.\r\n\r\n\r\n[JsonIdentityInfo][1]\r\n\r\nQuoting the documentation,\r\n\r\n&gt;  In practice this is done by serializing the first instance as full\r\n&gt; object and object identity, and other references to the object as\r\n&gt; reference values.\r\n\r\n\r\nIs there a way to get the full pojo of each entries?\r\n\r\n\r\n  [1]: http://fasterxml.github.io/jackson-annotations/javadoc/2.1/com/fasterxml/jackson/annotation/JsonIdentityInfo.html","title":"Full deserialiazion of recursion property with Jackson JSON and Hibernate","body":"<p>I have 2 tables that have a N-N relationship. I'm using SpringBoot 2.3.9 with Hibernate</p>\n<p>I managed to map them uni-directionally because of the way I query the objects.</p>\n<p>ObjectB has a column that refers to himself and the recursion de-serialization via jackson is done only to the first occurence.</p>\n<p>These are the mapping:</p>\n<pre><code>@Entity\n@Table(name = &quot;TABLE_OBJECT_A&quot;)\npublic class ObjectA {\n\n    // mapping N-N\n    @JoinTable(name = &quot;OBJECTA_X_OBJECTB&quot;,\n            joinColumns = @JoinColumn(name = &quot;A_ID&quot;),\n            inverseJoinColumns = @JoinColumn(name = &quot;B_ID&quot;)\n    )\n    private Set&lt;ObjectB&gt; setObjectB = new HashSet&lt;ObjectB&gt;();\n\n}\n</code></pre>\n<pre><code>@Entity\n@Table(name = &quot;TABLE_OBJECT_B&quot;)\n@JsonIdentityInfo(generator = ObjectIdGenerators.PropertyGenerator.class, property = &quot;id&quot;)\n// false - because I need the full object\n@JsonIdentityReference(alwaysAsId = false)\npublic class ObjectB {\n\n    // recursion\n    @OneToOne(fetch = FetchType.LAZY)\n    @JoinColumn(name = &quot;B_RECURSION_ID&quot;)\n    private ObjectB objectBRecursion;\n\n}\n</code></pre>\n<p><strong>findAll by JPA</strong> json response:</p>\n<pre><code>\n[\n  {\n    &quot;version&quot;: &quot;2023-05-09T16:39:47.082+00:00&quot;,\n    &quot;id&quot;: 1619,\n    &quot;code&quot;: &quot;TRSU&quot;,\n    &quot;setObjectB&quot;: [\n      {\n        &quot;id&quot;: 31,\n        &quot;version&quot;: &quot;2018-07-18T08:12:14.000+00:00&quot;,\n        &quot;code&quot;: &quot;AMO&quot;\n      },\n      {\n        &quot;id&quot;: 100,\n        &quot;version&quot;: &quot;2023-04-18T10:00:45.786+00:00&quot;,\n        &quot;code&quot;: &quot;SMO&quot;\n      }\n    ]\n  },\n  {\n    &quot;version&quot;: &quot;2023-05-09T16:33:25.404+00:00&quot;,\n    &quot;id&quot;: 1520,\n    &quot;codice&quot;: &quot;SD&quot;,\n    &quot;setObjectB&quot;: [\n      100\n    ]\n  },\n  {\n    &quot;version&quot;: &quot;2023-05-09T16:40:48.313+00:00&quot;,\n    &quot;id&quot;: 1620,\n    &quot;code&quot;: &quot;TRSE&quot;,\n    &quot;setObjectB&quot;: [\n      31,\n      100\n    ]\n  },\n  {\n    &quot;version&quot;: &quot;2022-09-26T08:00:04.127+00:00&quot;,\n    &quot;id&quot;: 1019,\n    &quot;code&quot;: &quot;test&quot;,\n    &quot;setObjectB&quot;: [\n      31\n    ]\n  },\n  {\n    &quot;version&quot;: &quot;2023-04-18T09:50:27.744+00:00&quot;,\n    &quot;id&quot;: 1519,\n    &quot;code&quot;: &quot;DI&quot;,\n    &quot;setObjectB&quot;: [\n      31\n    ]\n  }\n]\n</code></pre>\n<p>As you can see, only the <strong>first occurence</strong> of <strong>setObjectB</strong> property is fully deserialized.</p>\n<p>I need all of them.</p>\n<p><a href=\"http://fasterxml.github.io/jackson-annotations/javadoc/2.1/com/fasterxml/jackson/annotation/JsonIdentityInfo.html\" rel=\"nofollow noreferrer\">JsonIdentityInfo</a></p>\n<p>Quoting the documentation,</p>\n<blockquote>\n<p>In practice this is done by serializing the first instance as full\nobject and object identity, and other references to the object as\nreference values.</p>\n</blockquote>\n<p>Is there a way to get the full pojo of each entries?</p>\n"},{"tags":["java","android","kotlin","blur","sticker"],"owner":{"account_id":28989159,"reputation":21,"user_id":22205349,"display_name":"Adnan Aslam"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689839803,"creation_date":1689839803,"question_id":76727782,"body_markdown":"I&#39;m trying to create a blur effect in such a way that when a shape (square, rectangle, circle) is selected. The shape is applied as a sticker on the image showing in the ImageView and the image got blurred but the inside of the shape should show the original image and not the blur image. Also the shape should be free to move, resize and rotate.\r\n\r\nhttps://github.com/adnaanaeem/MultiShapeBlurView\r\nI have tried this library but it only apply few shapes also they are static and not freely moving or resizing.","title":"Blur and sticker view together in Android","body":"<p>I'm trying to create a blur effect in such a way that when a shape (square, rectangle, circle) is selected. The shape is applied as a sticker on the image showing in the ImageView and the image got blurred but the inside of the shape should show the original image and not the blur image. Also the shape should be free to move, resize and rotate.</p>\n<p><a href=\"https://github.com/adnaanaeem/MultiShapeBlurView\" rel=\"nofollow noreferrer\">https://github.com/adnaanaeem/MultiShapeBlurView</a>\nI have tried this library but it only apply few shapes also they are static and not freely moving or resizing.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":1119638,"reputation":1133,"user_id":1108263,"accept_rate":91,"display_name":"Brian Snow"},"score":3,"creation_date":1465688573,"post_id":37769428,"comment_id":63007412,"body_markdown":"Linked list access is (sequential, so) O(n); array access is (random, so) O(1).  There&#39;s a lot of good information in this article: https://en.wikipedia.org/wiki/Linked_list","body":"Linked list access is (sequential, so) O(n); array access is (random, so) O(1).  There&#39;s a lot of good information in this article: <a href=\"https://en.wikipedia.org/wiki/Linked_list\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Linked_list</a>"},{"owner":{"account_id":8542847,"reputation":33,"user_id":6402302,"display_name":"mzeeirka"},"score":0,"creation_date":1465689440,"post_id":37769428,"comment_id":63007550,"body_markdown":"Thank you @BrianSnow. I am still not understanding why a linked list is not indexable. From what I&#39;ve gathered, does a linked list not hold a reference to all the items it holds - only the head and/or tail? Thus not allowing access by index?","body":"Thank you @BrianSnow. I am still not understanding why a linked list is not indexable. From what I&#39;ve gathered, does a linked list not hold a reference to all the items it holds - only the head and/or tail? Thus not allowing access by index?"},{"owner":{"account_id":1119638,"reputation":1133,"user_id":1108263,"accept_rate":91,"display_name":"Brian Snow"},"score":0,"creation_date":1465690143,"post_id":37769428,"comment_id":63007668,"body_markdown":"Let&#39;s say you have a linked list named L.  Potentially, the only operation exposed on L will be `head()`, which returns the head of the list: `Node&lt;T&gt; head = L.head()`.  The head of the list is simply a node, which also only exposes one operation, called `next()`, which returns the next node in the list.  You can now iterate through the list by doing `Node&lt;T&gt; node = head.next()` until you hit the end of the list and `node.next() == null`.  So you are correct: a linked list does not keep direct references to all of its elements -- it only keeps a reference to its head.","body":"Let&#39;s say you have a linked list named L.  Potentially, the only operation exposed on L will be <code>head()</code>, which returns the head of the list: <code>Node&lt;T&gt; head = L.head()</code>.  The head of the list is simply a node, which also only exposes one operation, called <code>next()</code>, which returns the next node in the list.  You can now iterate through the list by doing <code>Node&lt;T&gt; node = head.next()</code> until you hit the end of the list and <code>node.next() == null</code>.  So you are correct: a linked list does not keep direct references to all of its elements -- it only keeps a reference to its head."}],"answers":[{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1465693379,"creation_date":1465690092,"answer_id":37769585,"question_id":37769428,"body_markdown":"&gt; Why is accessing an item by index slower in a linked list than an array?\r\n\r\nA linked list has a chain of entries.  If you want to get (say) the element at position `42`, the code has to:\r\n\r\n  - get the entry for the first element (position `0`)\r\n  - follow the `next` link to the entry for position `1`\r\n  - follow the `next` link to the entry for position `2`\r\n\r\nand so on .... 42 times in total.\r\n\r\nThere is no short cut.\r\n\r\n&gt; I am still not understanding why a linked list is not indexable ....\r\n\r\nNow a `LinkedList` is indexable in the sense that there is a `get(int)` operation *that works*.  It is just that indexing a `LinkedList` is *inefficient*.  In general, it takes `O(N)` steps to perform a `get(i)` in a linked list of length `N`.  By contrast with an array, or an `ArrayList`, you can retrieve any element of the data structure in one step.  We say that the complexity is `O(1)`.\r\n\r\nContrast this with `Set` objects in general, and `HashSet` in particular.  The `HashSet` class is NOT indexable because there is no `get(int)` method to retrieve the set element at position `i`.  Indeed, even the notion of &quot;position i&quot; in a set is meaningless.  The ordering of the elements in a `Set` is unspecified and (for some `Set` implementations, like `HashSet`) it may be effectively indeterminate.\r\n ","title":"Why is accessing an item by index slower in a linked list than an array?","body":"<blockquote>\n  <p>Why is accessing an item by index slower in a linked list than an array?</p>\n</blockquote>\n\n<p>A linked list has a chain of entries.  If you want to get (say) the element at position <code>42</code>, the code has to:</p>\n\n<ul>\n<li>get the entry for the first element (position <code>0</code>)</li>\n<li>follow the <code>next</code> link to the entry for position <code>1</code></li>\n<li>follow the <code>next</code> link to the entry for position <code>2</code></li>\n</ul>\n\n<p>and so on .... 42 times in total.</p>\n\n<p>There is no short cut.</p>\n\n<blockquote>\n  <p>I am still not understanding why a linked list is not indexable ....</p>\n</blockquote>\n\n<p>Now a <code>LinkedList</code> is indexable in the sense that there is a <code>get(int)</code> operation <em>that works</em>.  It is just that indexing a <code>LinkedList</code> is <em>inefficient</em>.  In general, it takes <code>O(N)</code> steps to perform a <code>get(i)</code> in a linked list of length <code>N</code>.  By contrast with an array, or an <code>ArrayList</code>, you can retrieve any element of the data structure in one step.  We say that the complexity is <code>O(1)</code>.</p>\n\n<p>Contrast this with <code>Set</code> objects in general, and <code>HashSet</code> in particular.  The <code>HashSet</code> class is NOT indexable because there is no <code>get(int)</code> method to retrieve the set element at position <code>i</code>.  Indeed, even the notion of \"position i\" in a set is meaningless.  The ordering of the elements in a <code>Set</code> is unspecified and (for some <code>Set</code> implementations, like <code>HashSet</code>) it may be effectively indeterminate.</p>\n"},{"tags":[],"owner":{"account_id":8584600,"reputation":801,"user_id":6431178,"accept_rate":50,"display_name":"Marco A. Hernandez"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1465691130,"creation_date":1465691130,"answer_id":37769665,"question_id":37769428,"body_markdown":"With a  linked list you can add and remove elements at any time so index it has no sense. Imagine that you create an index that points at the third element of the list. After that, you insert a new element at the beginning of the list. What value should return the index?\r\n\r\nHowever it could be possible for example create an index at the middle of the list and use it only if you add o remove elements in the last half of the list.\r\n\r\n@paxdiablo explains it very well here https://stackoverflow.com/questions/1712952/is-there-a-known-implementation-of-an-indexed-linked-list","title":"Why is accessing an item by index slower in a linked list than an array?","body":"<p>With a  linked list you can add and remove elements at any time so index it has no sense. Imagine that you create an index that points at the third element of the list. After that, you insert a new element at the beginning of the list. What value should return the index?</p>\n\n<p>However it could be possible for example create an index at the middle of the list and use it only if you add o remove elements in the last half of the list.</p>\n\n<p>@paxdiablo explains it very well here <a href=\"https://stackoverflow.com/questions/1712952/is-there-a-known-implementation-of-an-indexed-linked-list\">Is there a known implementation of an indexed linked list?</a></p>\n"},{"tags":[],"owner":{"account_id":6947703,"reputation":86,"user_id":5984177,"display_name":"v_haruty"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1465691157,"creation_date":1465691157,"answer_id":37769667,"question_id":37769428,"body_markdown":"Some Linked list implementations provide a way to access to it&#39;s elements using index, but the fact is that if you want to get 10th element in linked list your compiler still has to go through all the sequence from 0 to 9 because the elements may be spread over the memory. On the other hand when you ask for 10th element in an array using index, compiler computes the exact position of 10th element and jumps directly to that element. Array and list have different purposes; if your algorithm requires go back and forward over your data structure, then it is much efficient to use array. If you need mostly add/remove operations, then it is efficient to use list","title":"Why is accessing an item by index slower in a linked list than an array?","body":"<p>Some Linked list implementations provide a way to access to it's elements using index, but the fact is that if you want to get 10th element in linked list your compiler still has to go through all the sequence from 0 to 9 because the elements may be spread over the memory. On the other hand when you ask for 10th element in an array using index, compiler computes the exact position of 10th element and jumps directly to that element. Array and list have different purposes; if your algorithm requires go back and forward over your data structure, then it is much efficient to use array. If you need mostly add/remove operations, then it is efficient to use list</p>\n"},{"tags":[],"owner":{"account_id":10336347,"reputation":1,"user_id":7624330,"display_name":"Gaurav Tiwari"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689839566,"creation_date":1689839566,"answer_id":76727751,"question_id":37769428,"body_markdown":"The difference lies in memory allocation. The ArrayList will have a contiguous block of memory. So accessing elements will happen in constant time. Since knowing memory location of one element, address of nth element can be calculated(n*size of data type). So no need to transverse through all elements. But that is not case of LinkedList, there is no contiguous block. Only way to reach nth element is through transversing through elements.","title":"Why is accessing an item by index slower in a linked list than an array?","body":"<p>The difference lies in memory allocation. The ArrayList will have a contiguous block of memory. So accessing elements will happen in constant time. Since knowing memory location of one element, address of nth element can be calculated(n*size of data type). So no need to transverse through all elements. But that is not case of LinkedList, there is no contiguous block. Only way to reach nth element is through transversing through elements.</p>\n"}],"owner":{"account_id":8542847,"reputation":33,"user_id":6402302,"display_name":"mzeeirka"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1903,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":37769585,"answer_count":4,"score":2,"last_activity_date":1689839566,"creation_date":1465688224,"question_id":37769428,"body_markdown":"I think I am missing a very obvious point but could not find it in my Java textbook.\r\n\r\nI understand that node storage does not necessarily have to be contiguous in memory for linked list. Does this also mean that a linked list is not indexable? If so, then the only way to find an item in a linked list is to traverse the list, right, whereas you can `get` from an array by index?","title":"Why is accessing an item by index slower in a linked list than an array?","body":"<p>I think I am missing a very obvious point but could not find it in my Java textbook.</p>\n\n<p>I understand that node storage does not necessarily have to be contiguous in memory for linked list. Does this also mean that a linked list is not indexable? If so, then the only way to find an item in a linked list is to traverse the list, right, whereas you can <code>get</code> from an array by index?</p>\n"},{"tags":["java","netbeans"],"comments":[{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1689840853,"post_id":76727748,"comment_id":135271172,"body_markdown":"Try running the main class directly instead of starting with Maven. I&#39;m not familiar with Netbeans, but in IntelliJ you would select a different type of run target (Java instead of Gradle/Maven)","body":"Try running the main class directly instead of starting with Maven. I&#39;m not familiar with Netbeans, but in IntelliJ you would select a different type of run target (Java instead of Gradle/Maven)"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1689855863,"post_id":76727748,"comment_id":135274236,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."},{"owner":{"account_id":3576533,"reputation":16716,"user_id":2985643,"accept_rate":40,"display_name":"skomisa"},"score":0,"creation_date":1689893980,"post_id":76727748,"comment_id":135281650,"body_markdown":"Does this answer your question? [Is it possible to delete/hide extra lines in NetBeans IDE output screen? If possible then how?](https://stackoverflow.com/questions/61167631/is-it-possible-to-delete-hide-extra-lines-in-netbeans-ide-output-screen-if-poss)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/61167631/is-it-possible-to-delete-hide-extra-lines-in-netbeans-ide-output-screen-if-poss\">Is it possible to delete/hide extra lines in NetBeans IDE output screen? If possible then how?</a>"}],"owner":{"account_id":27532443,"reputation":1,"user_id":21010718,"display_name":"Sadman Sakib"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689839553,"creation_date":1689839553,"question_id":76727748,"body_markdown":"I code in maven java in netbeans 18 and my netbeans18 IDE shows output like image1 but i want to see outputs like image 2 so what should I do now?\r\n\r\n[1st imnage](https://i.stack.imgur.com/m7yY2.png)[2nd image](https://i.stack.imgur.com/oNsia.png)\r\n\r\nI tried many times but not working I want a clear solution.i also tried in pluging,tools,windows but not worked.\r\n\r\n","title":"Netbeans 18 output","body":"<p>I code in maven java in netbeans 18 and my netbeans18 IDE shows output like image1 but i want to see outputs like image 2 so what should I do now?</p>\n<p><a href=\"https://i.stack.imgur.com/m7yY2.png\" rel=\"nofollow noreferrer\">1st imnage</a><a href=\"https://i.stack.imgur.com/oNsia.png\" rel=\"nofollow noreferrer\">2nd image</a></p>\n<p>I tried many times but not working I want a clear solution.i also tried in pluging,tools,windows but not worked.</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9695,"page":297,"page_size":100}
