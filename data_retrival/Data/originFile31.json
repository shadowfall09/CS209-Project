{"items":[{"tags":["java","csv","jasper-reports"],"comments":[{"owner":{"account_id":469619,"reputation":22454,"user_id":876298,"display_name":"Alex K"},"score":0,"creation_date":1701188726,"post_id":77562098,"comment_id":136743100,"body_markdown":"`I would like to know if it is possible to generate a CSV using the same XML.` - Yes","body":"<code>I would like to know if it is possible to generate a CSV using the same XML.</code> - Yes"},{"owner":{"account_id":7712273,"reputation":63,"user_id":5841190,"accept_rate":0,"display_name":"Bufank85"},"score":0,"creation_date":1701246644,"post_id":77562098,"comment_id":136750552,"body_markdown":"@AlexK How to do it?","body":"@AlexK How to do it?"}],"owner":{"account_id":7712273,"reputation":63,"user_id":5841190,"accept_rate":0,"display_name":"Bufank85"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":1,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":0,"score":-1,"last_activity_date":1701157970,"creation_date":1701157970,"question_id":77562098,"body_markdown":"I am trying to reuse a PDF structure, which does work, to generate a CSV. Simply in the Java code I am making an OutputStream to generate the PDF but I would like to know if it is possible to generate a CSV using the same XML.\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;jasperReport xmlns=&quot;http://jasperreports.sourceforge.net/jasperreports&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; \r\n    xsi:schemaLocation=&quot;http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd&quot; \r\n    name=&quot;RES_Rel_PagoMaterial_Transferencias&quot; pageWidth=&quot;1000&quot; pageHeight=&quot;595&quot; orientation=&quot;Landscape&quot; columnWidth=&quot;960&quot; leftMargin=&quot;20&quot; rightMargin=&quot;20&quot; topMargin=&quot;20&quot; bottomMargin=&quot;20&quot; \r\n    uuid=&quot;80277f53-116a-45e4-8bef-c979d7770eee&quot;&gt;\r\n    \t&lt;property name=&quot;ireport.zoom&quot; value=&quot;1.5&quot;/&gt;\r\n    \t&lt;property name=&quot;ireport.x&quot; value=&quot;0&quot;/&gt;\r\n    \t&lt;property name=&quot;ireport.y&quot; value=&quot;0&quot;/&gt;\r\n    \t&lt;style name=&quot;table&quot;&gt;\r\n    \t\t&lt;box&gt;\r\n    \t\t\t&lt;pen lineWidth=&quot;1.0&quot; lineColor=&quot;#000000&quot;/&gt;\r\n    \t\t&lt;/box&gt;\r\n    \t&lt;/style&gt;\r\n    \t&lt;style name=&quot;table_TH&quot; mode=&quot;Opaque&quot; backcolor=&quot;#F0F8FF&quot;&gt;\r\n    \t\t&lt;box&gt;\r\n    \t\t\t&lt;pen lineWidth=&quot;0.5&quot; lineColor=&quot;#000000&quot;/&gt;\r\n    \t\t&lt;/box&gt;\r\n    \t&lt;/style&gt;\r\n    \t&lt;style name=&quot;table_CH&quot; mode=&quot;Opaque&quot; backcolor=&quot;#BFE1FF&quot;&gt;\r\n    \t\t&lt;box&gt;\r\n    \t\t\t&lt;pen lineWidth=&quot;0.5&quot; lineColor=&quot;#000000&quot;/&gt;\r\n    \t\t&lt;/box&gt;\r\n    \t&lt;/style&gt;\r\n    \t&lt;style name=&quot;table_TD&quot; mode=&quot;Opaque&quot; backcolor=&quot;#FFFFFF&quot;&gt;\r\n    \t\t&lt;box&gt;\r\n    \t\t\t&lt;pen lineWidth=&quot;0.5&quot; lineColor=&quot;#000000&quot;/&gt;\r\n    \t\t&lt;/box&gt;\r\n    \t&lt;/style&gt;\r\n    \t&lt;style name=&quot;styleCHWhite&quot; mode=&quot;Opaque&quot; forecolor=&quot;#000000&quot; backcolor=&quot;#FFFFFF&quot;&gt;\r\n    \t\t&lt;box&gt;\r\n    \t\t\t&lt;topPen lineWidth=&quot;1.0&quot;/&gt;\r\n    \t\t\t&lt;leftPen lineWidth=&quot;1.0&quot;/&gt;\r\n    \t\t\t&lt;bottomPen lineWidth=&quot;1.0&quot;/&gt;\r\n    \t\t\t&lt;rightPen lineWidth=&quot;1.0&quot;/&gt;\r\n    \t\t&lt;/box&gt;\r\n    \t&lt;/style&gt;","title":"Generate CSV file in Jasper Reports","body":"<p>I am trying to reuse a PDF structure, which does work, to generate a CSV. Simply in the Java code I am making an OutputStream to generate the PDF but I would like to know if it is possible to generate a CSV using the same XML.</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;jasperReport xmlns=&quot;http://jasperreports.sourceforge.net/jasperreports&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; \nxsi:schemaLocation=&quot;http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd&quot; \nname=&quot;RES_Rel_PagoMaterial_Transferencias&quot; pageWidth=&quot;1000&quot; pageHeight=&quot;595&quot; orientation=&quot;Landscape&quot; columnWidth=&quot;960&quot; leftMargin=&quot;20&quot; rightMargin=&quot;20&quot; topMargin=&quot;20&quot; bottomMargin=&quot;20&quot; \nuuid=&quot;80277f53-116a-45e4-8bef-c979d7770eee&quot;&gt;\n    &lt;property name=&quot;ireport.zoom&quot; value=&quot;1.5&quot;/&gt;\n    &lt;property name=&quot;ireport.x&quot; value=&quot;0&quot;/&gt;\n    &lt;property name=&quot;ireport.y&quot; value=&quot;0&quot;/&gt;\n    &lt;style name=&quot;table&quot;&gt;\n        &lt;box&gt;\n            &lt;pen lineWidth=&quot;1.0&quot; lineColor=&quot;#000000&quot;/&gt;\n        &lt;/box&gt;\n    &lt;/style&gt;\n    &lt;style name=&quot;table_TH&quot; mode=&quot;Opaque&quot; backcolor=&quot;#F0F8FF&quot;&gt;\n        &lt;box&gt;\n            &lt;pen lineWidth=&quot;0.5&quot; lineColor=&quot;#000000&quot;/&gt;\n        &lt;/box&gt;\n    &lt;/style&gt;\n    &lt;style name=&quot;table_CH&quot; mode=&quot;Opaque&quot; backcolor=&quot;#BFE1FF&quot;&gt;\n        &lt;box&gt;\n            &lt;pen lineWidth=&quot;0.5&quot; lineColor=&quot;#000000&quot;/&gt;\n        &lt;/box&gt;\n    &lt;/style&gt;\n    &lt;style name=&quot;table_TD&quot; mode=&quot;Opaque&quot; backcolor=&quot;#FFFFFF&quot;&gt;\n        &lt;box&gt;\n            &lt;pen lineWidth=&quot;0.5&quot; lineColor=&quot;#000000&quot;/&gt;\n        &lt;/box&gt;\n    &lt;/style&gt;\n    &lt;style name=&quot;styleCHWhite&quot; mode=&quot;Opaque&quot; forecolor=&quot;#000000&quot; backcolor=&quot;#FFFFFF&quot;&gt;\n        &lt;box&gt;\n            &lt;topPen lineWidth=&quot;1.0&quot;/&gt;\n            &lt;leftPen lineWidth=&quot;1.0&quot;/&gt;\n            &lt;bottomPen lineWidth=&quot;1.0&quot;/&gt;\n            &lt;rightPen lineWidth=&quot;1.0&quot;/&gt;\n        &lt;/box&gt;\n    &lt;/style&gt;\n</code></pre>\n"},{"tags":["java","mapstruct"],"comments":[{"owner":{"account_id":213468,"reputation":103462,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1701104944,"post_id":77558032,"comment_id":136731068,"body_markdown":"What is your question?","body":"What is your question?"},{"owner":{"account_id":1992310,"reputation":11172,"user_id":1786065,"accept_rate":91,"display_name":"Rogue"},"score":0,"creation_date":1701105338,"post_id":77558032,"comment_id":136731145,"body_markdown":"The [javadoc](https://mapstruct.org/documentation/dev/api/org/mapstruct/ValueMapping.html) for `ValueMapping` states that an _enum_ name is a valid argument, but your `target` names are _not_ for enum constants (reflectively, they&#39;re accessed differently). You could include a parameter in the `Target` class for the `Source` enum it is being replaced with, then replace any usages in your codebase in order to deprecate the `Target` enum. No more maps or mapstruct, and you could add a static convenience method to `Target` to grab a constant for a provided `Source` parameter.","body":"The <a href=\"https://mapstruct.org/documentation/dev/api/org/mapstruct/ValueMapping.html\" rel=\"nofollow noreferrer\">javadoc</a> for <code>ValueMapping</code> states that an <i>enum</i> name is a valid argument, but your <code>target</code> names are <i>not</i> for enum constants (reflectively, they&#39;re accessed differently). You could include a parameter in the <code>Target</code> class for the <code>Source</code> enum it is being replaced with, then replace any usages in your codebase in order to deprecate the <code>Target</code> enum. No more maps or mapstruct, and you could add a static convenience method to <code>Target</code> to grab a constant for a provided <code>Source</code> parameter."},{"owner":{"account_id":29912180,"reputation":11,"user_id":22923285,"display_name":"Stov"},"score":0,"creation_date":1701154183,"post_id":77558032,"comment_id":136736807,"body_markdown":"@MarkRotteveel: I clarified my post.","body":"@MarkRotteveel: I clarified my post."},{"owner":{"account_id":29912180,"reputation":11,"user_id":22923285,"display_name":"Stov"},"score":0,"creation_date":1701154503,"post_id":77558032,"comment_id":136736843,"body_markdown":"@Rogue: I can&#39;t modify or delete any of the target code. I&#39;m using MapStruct to map  DTO from a webservice to domain objects.","body":"@Rogue: I can&#39;t modify or delete any of the target code. I&#39;m using MapStruct to map  DTO from a webservice to domain objects."},{"owner":{"account_id":1992310,"reputation":11172,"user_id":1786065,"accept_rate":91,"display_name":"Rogue"},"score":0,"creation_date":1701183240,"post_id":77558032,"comment_id":136741969,"body_markdown":"@Stov same idea then, just reverse it. Have `Source` keep a reference of the `Target` that it replaces. Then add `static Source#findReplacement(Target)` to facilitate the `Target-&gt;Source` lookups.","body":"@Stov same idea then, just reverse it. Have <code>Source</code> keep a reference of the <code>Target</code> that it replaces. Then add <code>static Source#findReplacement(Target)</code> to facilitate the <code>Target-&gt;Source</code> lookups."}],"owner":{"account_id":29912180,"reputation":11,"user_id":22923285,"display_name":"Stov"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":63,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1701157701,"creation_date":1701098411,"question_id":77558032,"body_markdown":"In our code base, we have a lot of pseudo-enums:\r\n\r\n```\r\npublic final class Target extends PseudoEnum {\r\n\r\n  public static final ErrorCode FOO = new ErrorCode(1);\r\n  public static final ErrorCode BAR = new ErrorCode(2);\r\n\r\n  private Target(int value) {\r\n    super(value);\r\n  }\r\n}\r\n```\r\n\r\nI&#39;m trying to use MapStruct to map these pseudo-enums to enum values, and vice versa.\r\n\r\n```\r\npublic enum Source {\r\n  \r\n  FOO, BAR\r\n}\r\n```\r\n\r\nThe following doesn&#39;t work, since target is not an enum:\r\n\r\n```\r\n@Mapper\r\npublic interface SourceMapper {\r\n\r\n  @ValueMapping(target = &quot;FOO&quot;, source = &quot;FOO&quot;)\r\n  @ValueMapping(target = &quot;BAR&quot;, source = &quot;BAR&quot;)\r\n  Target map(Source source);\r\n}\r\n```\r\n\r\nThe following does work:\r\n\r\n```\r\n@Mapper\r\npublic interface SourceMapper {\r\n\r\n  Map&lt;Source, Target&gt; MAPPING = Map.of(\r\n      Source.FOO, Target.FOO,\r\n      Source.BAR, Target.BAR\r\n  );\r\n\r\n  default Target map(Source source) {\r\n    return MAPPING.get(source);\r\n  }\r\n}\r\n```\r\n\r\nIt has no real interest for me, though, since I end up writing all the mapping code.\r\n\r\nIs there a way to have MapStruct automatically map enum values to class constants?\r\n\r\nIt doesn&#39;t look like such a specific use case, but I didn&#39;t find any clue in the documentation.","title":"Map enum values to class constants","body":"<p>In our code base, we have a lot of pseudo-enums:</p>\n<pre><code>public final class Target extends PseudoEnum {\n\n  public static final ErrorCode FOO = new ErrorCode(1);\n  public static final ErrorCode BAR = new ErrorCode(2);\n\n  private Target(int value) {\n    super(value);\n  }\n}\n</code></pre>\n<p>I'm trying to use MapStruct to map these pseudo-enums to enum values, and vice versa.</p>\n<pre><code>public enum Source {\n  \n  FOO, BAR\n}\n</code></pre>\n<p>The following doesn't work, since target is not an enum:</p>\n<pre><code>@Mapper\npublic interface SourceMapper {\n\n  @ValueMapping(target = &quot;FOO&quot;, source = &quot;FOO&quot;)\n  @ValueMapping(target = &quot;BAR&quot;, source = &quot;BAR&quot;)\n  Target map(Source source);\n}\n</code></pre>\n<p>The following does work:</p>\n<pre><code>@Mapper\npublic interface SourceMapper {\n\n  Map&lt;Source, Target&gt; MAPPING = Map.of(\n      Source.FOO, Target.FOO,\n      Source.BAR, Target.BAR\n  );\n\n  default Target map(Source source) {\n    return MAPPING.get(source);\n  }\n}\n</code></pre>\n<p>It has no real interest for me, though, since I end up writing all the mapping code.</p>\n<p>Is there a way to have MapStruct automatically map enum values to class constants?</p>\n<p>It doesn't look like such a specific use case, but I didn't find any clue in the documentation.</p>\n"},{"tags":["java","arrays","try-catch"],"comments":[{"owner":{"account_id":13170666,"reputation":78669,"user_id":9513184,"display_name":"Unmitigated"},"score":1,"creation_date":1701141321,"post_id":77561141,"comment_id":136735741,"body_markdown":"Do you really specifically need to handle it in the catch block?","body":"Do you really specifically need to handle it in the catch block?"}],"owner":{"account_id":30008915,"reputation":1,"user_id":22997042,"display_name":"Dari"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1701157113,"answer_count":0,"score":0,"last_activity_date":1701157483,"creation_date":1701141144,"question_id":77561141,"body_markdown":"I want to be able to show the user my array items and then prompt them to choose from the listed items. If they choose a number that isn&#39;t in my array, I want to be able to catch it with my try-catch block. I am new to this.\r\n\r\n    int[] temperatures = {11, -2, 12, 2, 10, 32, 55, 102, 69, 77, 88, 90, 101};\r\n    \r\n    \r\n    try{\r\n    System.out.println(&quot;The temperatures in the city this year were &quot; + Arrays.toString(temperatures));\r\n    System.out.println(&quot;Select a range by choosing two temperatures from the list above&quot;);\r\n    int temp1= keyboard.nextInt();\r\n    int temp2 = keyboard.nextInt();\r\n    \r\n    //what would I include to make user input invalid if it doesn&#39;t match my array??\r\n    \r\n    \r\n    }\r\n    \r\n    \r\n    catch (Exception e) {\r\n       System.out.println(&quot;You did not select a valid temperature from the list. Please select two from the list.&quot;);\r\n    }\r\n\r\n","title":"How do I limit user input to only array list integers?? Java","body":"<p>I want to be able to show the user my array items and then prompt them to choose from the listed items. If they choose a number that isn't in my array, I want to be able to catch it with my try-catch block. I am new to this.</p>\n<pre><code>int[] temperatures = {11, -2, 12, 2, 10, 32, 55, 102, 69, 77, 88, 90, 101};\n\n\ntry{\nSystem.out.println(&quot;The temperatures in the city this year were &quot; + Arrays.toString(temperatures));\nSystem.out.println(&quot;Select a range by choosing two temperatures from the list above&quot;);\nint temp1= keyboard.nextInt();\nint temp2 = keyboard.nextInt();\n\n//what would I include to make user input invalid if it doesn't match my array??\n\n\n}\n\n\ncatch (Exception e) {\n   System.out.println(&quot;You did not select a valid temperature from the list. Please select two from the list.&quot;);\n}\n</code></pre>\n"},{"tags":["java","kotlin","gradle","session","mismatch"],"comments":[{"owner":{"account_id":18927467,"reputation":300,"user_id":13810263,"display_name":"millerluki"},"score":0,"creation_date":1701157362,"post_id":77562041,"comment_id":136737195,"body_markdown":"Please share the code you have tried with. Stack Overflow can help you troubleshoot existing code, not write it for you. To learn more about how the community can help you, please take the [tour](https://stackoverflow.com/tour) and read [How to Ask](https://stackoverflow.com/help/how-to-ask). And [don&#39;t post images of text](https://meta.stackoverflow.com/questions/285551/why-should-i-not-upload-images-of-code-data-errors)","body":"Please share the code you have tried with. Stack Overflow can help you troubleshoot existing code, not write it for you. To learn more about how the community can help you, please take the <a href=\"https://stackoverflow.com/tour\">tour</a> and read <a href=\"https://stackoverflow.com/help/how-to-ask\">How to Ask</a>. And <a href=\"https://meta.stackoverflow.com/questions/285551/why-should-i-not-upload-images-of-code-data-errors\">don&#39;t post images of text</a>"}],"owner":{"account_id":30010454,"reputation":1,"user_id":22998222,"display_name":"narikanapa nagendra"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":1,"is_answered":false,"view_count":13,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":0,"score":-1,"last_activity_date":1701157285,"creation_date":1701157285,"question_id":77562041,"body_markdown":"[I am getting this error net.corda.core.flows.UnexpectedFlowEndException: Received session end message instead of a data session message. Mismatched send and receive?\r\n,as a java guy unable to understand the error where occurred pls help me as soon as possible](https://i.stack.imgur.com/wJMNy.png)\r\n\r\ni want a solution to this how to resolve this issue   and when i start debugging ActiveMQ server connection fails at the end. net.corda.core.flows.UnexpectedFlowEndException: Received session end message instead of a data session message. Mismatched send and receive?\r\n","title":"net.corda.core.flows.UnexpectedFlowEndException: Received session end message instead of a data session message. Mismatched send and receive?","body":"<p><a href=\"https://i.stack.imgur.com/wJMNy.png\" rel=\"nofollow noreferrer\">I am getting this error net.corda.core.flows.UnexpectedFlowEndException: Received session end message instead of a data session message. Mismatched send and receive?\n,as a java guy unable to understand the error where occurred pls help me as soon as possible</a></p>\n<p>i want a solution to this how to resolve this issue   and when i start debugging ActiveMQ server connection fails at the end. net.corda.core.flows.UnexpectedFlowEndException: Received session end message instead of a data session message. Mismatched send and receive?</p>\n"},{"tags":["java","spring","annotations","coding-style"],"answers":[{"tags":[],"owner":{"account_id":67826,"reputation":126,"user_id":198238,"display_name":"engfer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1277488410,"creation_date":1277488410,"answer_id":3120237,"question_id":3120143,"body_markdown":"Putting it on the interface is fine as long all foreseeable implementers of your IFC care about TX data (transactions aren&#39;t problems that just databases deal with). If the method doesn&#39;t care about TX (but you need to put it there for Hibernate or whatever), put it on the impl.\r\n\r\nAlso, it might be a bit better to place `@Transactional` on the methods in the interface:\r\n\r\n    public interface FooService {\r\n        @Transactional(readOnly = true)\r\n        void doSmth();\r\n    }\r\n","title":"Where should I put @Transactional annotation: at an interface definition or at an implementing class?","body":"<p>Putting it on the interface is fine as long all foreseeable implementers of your IFC care about TX data (transactions aren't problems that just databases deal with). If the method doesn't care about TX (but you need to put it there for Hibernate or whatever), put it on the impl.</p>\n\n<p>Also, it might be a bit better to place <code>@Transactional</code> on the methods in the interface:</p>\n\n<pre><code>public interface FooService {\n    @Transactional(readOnly = true)\n    void doSmth();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":39617,"reputation":6179,"user_id":114340,"display_name":"AngerClown"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1701155994,"creation_date":1277489180,"answer_id":3120320,"question_id":3120143,"body_markdown":"You can put them on the interface, but be warned that transactions may not end up happening in some cases. See the second tip in [Section 10.5.6][1] of the Spring docs:\r\n\r\n&gt; Spring recommends that you only annotate concrete classes (and methods of concrete classes) with the @Transactional annotation, as opposed to annotating interfaces. You certainly can place the @Transactional annotation on an interface (or an interface method), but this works only as you would expect it to if you are using interface-based proxies. The fact that Java annotations are not inherited from interfaces means that if you are using class-based proxies (proxy-target-class=&quot;true&quot;) or the weaving-based aspect (mode=&quot;aspectj&quot;), then the transaction settings are not recognized by the proxying and weaving infrastructure, and the object will not be wrapped in a transactional proxy, which would be decidedly bad.\r\n\r\nI would recommend putting them on the implementation for this reason.\r\n\r\nAlso, to me, transactions seem like an implementation detail, so they should be in the implementation class. Imagine having wrapper implementations for logging or test implementations (mocks) that don&#39;t need to be transactional.\r\n\r\n  [1]: https://docs.spring.io/spring-framework/docs/3.0.x/spring-framework-reference/html/transaction.html#transaction-declarative-annotations","title":"Where should I put @Transactional annotation: at an interface definition or at an implementing class?","body":"<p>You can put them on the interface, but be warned that transactions may not end up happening in some cases. See the second tip in <a href=\"https://docs.spring.io/spring-framework/docs/3.0.x/spring-framework-reference/html/transaction.html#transaction-declarative-annotations\" rel=\"nofollow noreferrer\">Section 10.5.6</a> of the Spring docs:</p>\n<blockquote>\n<p>Spring recommends that you only annotate concrete classes (and methods of concrete classes) with the @Transactional annotation, as opposed to annotating interfaces. You certainly can place the @Transactional annotation on an interface (or an interface method), but this works only as you would expect it to if you are using interface-based proxies. The fact that Java annotations are not inherited from interfaces means that if you are using class-based proxies (proxy-target-class=&quot;true&quot;) or the weaving-based aspect (mode=&quot;aspectj&quot;), then the transaction settings are not recognized by the proxying and weaving infrastructure, and the object will not be wrapped in a transactional proxy, which would be decidedly bad.</p>\n</blockquote>\n<p>I would recommend putting them on the implementation for this reason.</p>\n<p>Also, to me, transactions seem like an implementation detail, so they should be in the implementation class. Imagine having wrapper implementations for logging or test implementations (mocks) that don't need to be transactional.</p>\n"},{"tags":[],"owner":{"account_id":120605,"reputation":24173,"user_id":313137,"display_name":"Romain Hippeau"},"down_vote_count":0,"up_vote_count":144,"is_accepted":true,"score":144,"last_activity_date":1277533473,"creation_date":1277489187,"answer_id":3120323,"question_id":3120143,"body_markdown":"From http://static.springsource.org/spring/docs/2.0.x/reference/transaction.html\n\n&gt; **The Spring team&#39;s recommendation is that you only annotate concrete classes with the `@Transactional` annotation, as opposed to annotating interfaces.** You certainly can place the `@Transactional` annotation on an interface (or an interface method), but this will only work as you would expect it to if you are using interface-based proxies. The fact that annotations are *not inherited* means that if you are using class-based proxies then the transaction settings will not be recognised by the class-based proxying infrastructure and the object will not be wrapped in a transactional proxy (which would be decidedly *bad*). So please do take the Spring team&#39;s advice and only annotate concrete classes (and the methods of concrete classes) with the `@Transactional` annotation.\n&gt;\n&gt; *Note: Since this mechanism is based on proxies, only &#39;external&#39; method calls coming in through the proxy will be intercepted.* This means that &#39;self-invocation&#39;, i.e. a method within the target object calling some other method of the target object, won&#39;t lead to an actual transaction at runtime even if the invoked method is marked with `@Transactional`!\n\n(Emphasis added to the first sentence, other emphasis from the original.)","title":"Where should I put @Transactional annotation: at an interface definition or at an implementing class?","body":"<p>From <a href=\"http://static.springsource.org/spring/docs/2.0.x/reference/transaction.html\" rel=\"noreferrer\">http://static.springsource.org/spring/docs/2.0.x/reference/transaction.html</a></p>\n<blockquote>\n<p><strong>The Spring team's recommendation is that you only annotate concrete classes with the <code>@Transactional</code> annotation, as opposed to annotating interfaces.</strong> You certainly can place the <code>@Transactional</code> annotation on an interface (or an interface method), but this will only work as you would expect it to if you are using interface-based proxies. The fact that annotations are <em>not inherited</em> means that if you are using class-based proxies then the transaction settings will not be recognised by the class-based proxying infrastructure and the object will not be wrapped in a transactional proxy (which would be decidedly <em>bad</em>). So please do take the Spring team's advice and only annotate concrete classes (and the methods of concrete classes) with the <code>@Transactional</code> annotation.</p>\n<p><em>Note: Since this mechanism is based on proxies, only 'external' method calls coming in through the proxy will be intercepted.</em> This means that 'self-invocation', i.e. a method within the target object calling some other method of the target object, won't lead to an actual transaction at runtime even if the invoked method is marked with <code>@Transactional</code>!</p>\n</blockquote>\n<p>(Emphasis added to the first sentence, other emphasis from the original.)</p>\n"},{"tags":[],"owner":{"account_id":7621,"reputation":9153,"user_id":13285,"display_name":"zmf"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1277489539,"creation_date":1277489202,"answer_id":3120325,"question_id":3120143,"body_markdown":"Spring&#39;s [recommendation][1] is that you annotate the concrete implementations instead of an interface. It&#39;s not incorrect to use the annotation on an interface, it&#39;s just possible to misuse that feature and inadvertently bypass your @Transaction declaration.\r\n\r\nIf you&#39;ve marked something transactional in an interface and then refer to one of its implementing classes elsewhere in spring, it&#39;s not quite obvious that the object that spring creates will not respect the @Transactional annotation.\r\n\r\nIn practice it looks something like this:\r\n\r\n    public class MyClass implements MyInterface { \r\n\r\n        private int x;\r\n \r\n        public void doSomethingNonTx() {}\r\n\r\n        @Transactional\r\n        public void toSomethingTx() {}\r\n\r\n    }\r\n\r\n\r\n\r\n\r\n  [1]: http://static.springsource.org/spring/docs/2.0.x/reference/transaction.html\r\n","title":"Where should I put @Transactional annotation: at an interface definition or at an implementing class?","body":"<p>Spring's <a href=\"http://static.springsource.org/spring/docs/2.0.x/reference/transaction.html\" rel=\"noreferrer\">recommendation</a> is that you annotate the concrete implementations instead of an interface. It's not incorrect to use the annotation on an interface, it's just possible to misuse that feature and inadvertently bypass your @Transaction declaration.</p>\n\n<p>If you've marked something transactional in an interface and then refer to one of its implementing classes elsewhere in spring, it's not quite obvious that the object that spring creates will not respect the @Transactional annotation.</p>\n\n<p>In practice it looks something like this:</p>\n\n<pre><code>public class MyClass implements MyInterface { \n\n    private int x;\n\n    public void doSomethingNonTx() {}\n\n    @Transactional\n    public void toSomethingTx() {}\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":338366,"reputation":1303,"user_id":667200,"accept_rate":56,"display_name":"Firdous Amir"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1427560985,"creation_date":1427560985,"answer_id":29319748,"question_id":3120143,"body_markdown":"Supporting @Transactional on the concrete classes:\r\n\r\nI prefer to architect a solution in 3 sections generally: an API, an Implementation and a Web (if needed). I try my best to keep the API as light/simple/POJO as possible by minimizing dependencies. It&#39;s especially important if you play it in a distributed/integrated environment where you have to share the APIs a lot.\r\n\r\nPutting @Transactional requires Spring libraries in the API section, which IMHO is not effective. So I prefer to add it in the Implementation where the transaction is running.","title":"Where should I put @Transactional annotation: at an interface definition or at an implementing class?","body":"<p>Supporting @Transactional on the concrete classes:</p>\n\n<p>I prefer to architect a solution in 3 sections generally: an API, an Implementation and a Web (if needed). I try my best to keep the API as light/simple/POJO as possible by minimizing dependencies. It's especially important if you play it in a distributed/integrated environment where you have to share the APIs a lot.</p>\n\n<p>Putting @Transactional requires Spring libraries in the API section, which IMHO is not effective. So I prefer to add it in the Implementation where the transaction is running.</p>\n"}],"owner":{"account_id":35487,"reputation":64776,"user_id":100516,"accept_rate":69,"display_name":"Roman"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":42347,"favorite_count":0,"down_vote_count":0,"up_vote_count":105,"accepted_answer_id":3120323,"answer_count":5,"score":105,"last_activity_date":1701155994,"creation_date":1277487700,"question_id":3120143,"body_markdown":"The question from the title in code:\r\n\r\n    @Transactional (readonly = true)\r\n    public interface FooService {\r\n       void doSmth ();\r\n    }\r\n    \r\n    \r\n    public class FooServiceImpl implements FooService {\r\n       ...\r\n    }\r\n\r\nvs\r\n\r\n    public interface FooService {\r\n       void doSmth ();\r\n    }\r\n    \r\n    @Transactional (readonly = true)\r\n    public class FooServiceImpl implements FooService {\r\n       ...\r\n    }\r\n\r\n","title":"Where should I put @Transactional annotation: at an interface definition or at an implementing class?","body":"<p>The question from the title in code:</p>\n\n<pre><code>@Transactional (readonly = true)\npublic interface FooService {\n   void doSmth ();\n}\n\n\npublic class FooServiceImpl implements FooService {\n   ...\n}\n</code></pre>\n\n<p>vs</p>\n\n<pre><code>public interface FooService {\n   void doSmth ();\n}\n\n@Transactional (readonly = true)\npublic class FooServiceImpl implements FooService {\n   ...\n}\n</code></pre>\n"},{"tags":["java","docker","tomcat","amazon-ec2","servlets"],"answers":[{"tags":[],"owner":{"account_id":16334241,"reputation":340,"user_id":11796846,"display_name":"KP Singh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1701155933,"creation_date":1701155933,"answer_id":77561937,"question_id":77549382,"body_markdown":"I was able to solve this problem by making changes to the Dockerfile and the URL being hit.\r\n\r\nThis is the new Dockerfile\r\n```\r\nFROM tomcat:9.0-jdk11\r\nRUN cp -r $CATALINA_HOME/webapps.dist/* $CATALINA_HOME/webapps\r\nCOPY app.war /usr/local/tomcat/webapps/\r\nEXPOSE 8080\r\nCMD [&quot;/usr/local/tomcat/bin/catalina.sh&quot;, &quot;run&quot;]\r\n```\r\n\r\nThis is the new URL:\r\n`http://&lt;public DNS of my linux machine&gt;:8085/&lt;name of war file&gt;`\r\n\r\n`http://ec2-18-188-198-18.us-east-2.compute.amazonaws.com:8085/app`","title":"Docker Tomcat Container giving 404 while running servlet","body":"<p>I was able to solve this problem by making changes to the Dockerfile and the URL being hit.</p>\n<p>This is the new Dockerfile</p>\n<pre><code>FROM tomcat:9.0-jdk11\nRUN cp -r $CATALINA_HOME/webapps.dist/* $CATALINA_HOME/webapps\nCOPY app.war /usr/local/tomcat/webapps/\nEXPOSE 8080\nCMD [&quot;/usr/local/tomcat/bin/catalina.sh&quot;, &quot;run&quot;]\n</code></pre>\n<p>This is the new URL:\n<code>http://&lt;public DNS of my linux machine&gt;:8085/&lt;name of war file&gt;</code></p>\n<p><code>http://ec2-18-188-198-18.us-east-2.compute.amazonaws.com:8085/app</code></p>\n"}],"owner":{"account_id":16334241,"reputation":340,"user_id":11796846,"display_name":"KP Singh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":63,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"accepted_answer_id":77561937,"answer_count":1,"score":-2,"last_activity_date":1701155933,"creation_date":1700941841,"question_id":77549382,"body_markdown":"I am getting this error when I run my Docker container built using my application&#39;s war file:\r\n\r\n```HTTP Status 404 – Not Found```\r\n\r\n```Description The origin server did not find a current representation for the target resource or is not willing to disclose that one exists.```\r\n\r\nThe URL I am using is `http://&lt;public DNS of my linux machine&gt;:8085/`.\r\n\r\n`http://ec2-18-188-198-18.us-east-2.compute.amazonaws.com:8085`\r\n\r\nThe linux machine is an AWS EC2 instance created from a linux AMI\r\n\r\nI am running docker from this machine.\r\n\r\nThese are my docker container port details i got by using ```docker ps```\r\n[![enter image description here][1]][1]\r\n\r\nThis is my Dockerfile\r\n\r\n    FROM tomcat:9\r\n    COPY app.war /usr/local/tomcat/webapps/\r\n    EXPOSE 8080\r\n    CMD [&quot;/usr/local/tomcat/bin/catalina.sh&quot;, &quot;run&quot;]\r\n\r\nHere is one of my servlet files as a reference to the kind of java code that is being used in rest of the files\r\n\r\n    import java.io.IOException;\r\n    import java.io.PrintWriter;\r\n\r\n    import javax.servlet.ServletException;\r\n    import javax.servlet.annotation.WebServlet;\r\n    import javax.servlet.http.HttpServlet;\r\n    import javax.servlet.http.HttpServletRequest;\r\n    import javax.servlet.http.HttpServletResponse;\r\n    import javax.servlet.http.HttpSession;\r\n    @WebServlet(&quot;/&quot;)\r\n    public class AdminLogin extends HttpServlet {\r\n\tprotected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\r\n\t\tresponse.setContentType(&quot;text/html&quot;);\r\n\t\t\r\n\r\nAs you can see I am using javax.servlets.* in my code rather than jakarta.servlets.*\r\n\r\nNormally this problem should occur if I would have used tomcat 10 but I am using tomcat 9 with javax.servlets.*.\r\n\r\nSo I don&#39;t know how to resolve this problem.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/YPD1W.png","title":"Docker Tomcat Container giving 404 while running servlet","body":"<p>I am getting this error when I run my Docker container built using my application's war file:</p>\n<p><code>HTTP Status 404 – Not Found</code></p>\n<p><code>Description The origin server did not find a current representation for the target resource or is not willing to disclose that one exists.</code></p>\n<p>The URL I am using is <code>http://&lt;public DNS of my linux machine&gt;:8085/</code>.</p>\n<p><code>http://ec2-18-188-198-18.us-east-2.compute.amazonaws.com:8085</code></p>\n<p>The linux machine is an AWS EC2 instance created from a linux AMI</p>\n<p>I am running docker from this machine.</p>\n<p>These are my docker container port details i got by using <code>docker ps</code>\n<a href=\"https://i.stack.imgur.com/YPD1W.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/YPD1W.png\" alt=\"enter image description here\" /></a></p>\n<p>This is my Dockerfile</p>\n<pre><code>FROM tomcat:9\nCOPY app.war /usr/local/tomcat/webapps/\nEXPOSE 8080\nCMD [&quot;/usr/local/tomcat/bin/catalina.sh&quot;, &quot;run&quot;]\n</code></pre>\n<p>Here is one of my servlet files as a reference to the kind of java code that is being used in rest of the files</p>\n<pre><code>import java.io.IOException;\nimport java.io.PrintWriter;\n\nimport javax.servlet.ServletException;\nimport javax.servlet.annotation.WebServlet;\nimport javax.servlet.http.HttpServlet;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\nimport javax.servlet.http.HttpSession;\n@WebServlet(&quot;/&quot;)\npublic class AdminLogin extends HttpServlet {\nprotected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\n    response.setContentType(&quot;text/html&quot;);\n    \n</code></pre>\n<p>As you can see I am using javax.servlets.* in my code rather than jakarta.servlets.*</p>\n<p>Normally this problem should occur if I would have used tomcat 10 but I am using tomcat 9 with javax.servlets.*.</p>\n<p>So I don't know how to resolve this problem.</p>\n"},{"tags":["java","android","kotlin","android-studio","android-emulator"],"comments":[{"owner":{"account_id":15268897,"reputation":1894,"user_id":11016652,"display_name":"zomega"},"score":0,"creation_date":1700921114,"post_id":77547667,"comment_id":136712559,"body_markdown":"Did you try to run ping, ifconfig and traceroute6 from ADB?","body":"Did you try to run ping, ifconfig and traceroute6 from ADB?"},{"owner":{"account_id":2972034,"reputation":742,"user_id":2523899,"display_name":"The incredible Jan"},"score":0,"creation_date":1701157340,"post_id":77547667,"comment_id":136737192,"body_markdown":"Uninstall nox-Player?","body":"Uninstall nox-Player?"}],"answers":[{"tags":[],"owner":{"account_id":29149657,"reputation":89,"user_id":22330780,"display_name":"Laser"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1701155842,"creation_date":1701155842,"answer_id":77561930,"question_id":77547667,"body_markdown":"I had a similar problem and here is how i fixed that..\r\n\r\n1.Go the extended controls of the emulator by clicking three dots.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n2. Then a Extended controls window will open, in that go to cellular and set meter status to temporary not metered.\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/M3Rnd.png\r\n  [2]: https://i.stack.imgur.com/S0SD8.png\r\n\r\nI hope this solves your problem.","title":"Android Studio emulator does not have internet","body":"<p>I had a similar problem and here is how i fixed that..</p>\n<p>1.Go the extended controls of the emulator by clicking three dots.</p>\n<p><a href=\"https://i.stack.imgur.com/M3Rnd.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/M3Rnd.png\" alt=\"enter image description here\" /></a></p>\n<ol start=\"2\">\n<li>Then a Extended controls window will open, in that go to cellular and set meter status to temporary not metered.</li>\n</ol>\n<p><a href=\"https://i.stack.imgur.com/S0SD8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/S0SD8.png\" alt=\"enter image description here\" /></a></p>\n<p>I hope this solves your problem.</p>\n"}],"owner":{"account_id":11730968,"reputation":135,"user_id":8586468,"display_name":"iman ahmadpour"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":77561930,"answer_count":1,"score":2,"last_activity_date":1701155842,"creation_date":1700911666,"question_id":77547667,"body_markdown":"I have been using nox-Player for several months and I had no problem connecting to the Internet.\r\n\r\nBut since I installed **Android Studio emulators**, it connects to Wi-Fi, but it gives a **limited connection** message.\r\n\r\n**The steps I have taken so far, but the problem has not been solved:**\r\n\r\n1- Installing different versions of the emulator with different APIs\r\n\r\n2- Deleting and reinstalling the emulator\r\n\r\n3- Change system DNS settings\r\n\r\n4- I use the latest version of Android Studio\r\n\r\nI would be happy if any of my friends have encountered this problem before and were able to solve it, tell me their solution.\r\n\r\nI will also post a picture of the problem\r\n\r\n[![enter image description here][1]][1]\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/BIqpf.png\r\n  [2]: https://i.stack.imgur.com/ozLX8.png","title":"Android Studio emulator does not have internet","body":"<p>I have been using nox-Player for several months and I had no problem connecting to the Internet.</p>\n<p>But since I installed <strong>Android Studio emulators</strong>, it connects to Wi-Fi, but it gives a <strong>limited connection</strong> message.</p>\n<p><strong>The steps I have taken so far, but the problem has not been solved:</strong></p>\n<p>1- Installing different versions of the emulator with different APIs</p>\n<p>2- Deleting and reinstalling the emulator</p>\n<p>3- Change system DNS settings</p>\n<p>4- I use the latest version of Android Studio</p>\n<p>I would be happy if any of my friends have encountered this problem before and were able to solve it, tell me their solution.</p>\n<p>I will also post a picture of the problem</p>\n<p><a href=\"https://i.stack.imgur.com/BIqpf.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BIqpf.png\" alt=\"enter image description here\" /></a>\n<a href=\"https://i.stack.imgur.com/ozLX8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ozLX8.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","quarkus","vert.x"],"comments":[{"owner":{"account_id":44601,"reputation":20150,"user_id":131021,"accept_rate":86,"display_name":"stwissel"},"score":1,"creation_date":1701240836,"post_id":77561799,"comment_id":136749709,"body_markdown":"Can you show a minimal reproducer?","body":"Can you show a minimal reproducer?"}],"owner":{"account_id":13474237,"reputation":137,"user_id":9721761,"display_name":"Roshni"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1701155629,"creation_date":1701153793,"question_id":77561799,"body_markdown":"I recently upgraded the Quarkus Version to 3 in my gradle application and did the required updates mentioned in the Quarkus Docs.\r\nBut after the update Vertx validators are not throwing schema exception if I pass some invalid value.\r\n\r\nAnyone faced anything similar?\r\nI using version 4.5.0 for vertx\r\n\r\nI tried upgrading Vertx json schema version but that did not work","title":"Vertx Validation not working after Quarkus 3 upgrade","body":"<p>I recently upgraded the Quarkus Version to 3 in my gradle application and did the required updates mentioned in the Quarkus Docs.\nBut after the update Vertx validators are not throwing schema exception if I pass some invalid value.</p>\n<p>Anyone faced anything similar?\nI using version 4.5.0 for vertx</p>\n<p>I tried upgrading Vertx json schema version but that did not work</p>\n"},{"tags":["java","drools","slf4j"],"answers":[{"tags":[],"owner":{"account_id":216698,"reputation":26495,"user_id":472109,"accept_rate":85,"display_name":"Geoffrey De Smet"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1493465129,"creation_date":1493462885,"answer_id":43694679,"question_id":43694378,"body_markdown":"Add a runtime dependency to `logback-classic`. Or if you don&#39;t use maven/gradle/etc, then add the logback-classic jar in your classpath.\r\n\r\n\r\n    &lt;!-- Logging --&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n      &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;\r\n      &lt;artifactId&gt;logback-classic&lt;/artifactId&gt;\r\n      &lt;scope&gt;runtime&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n\r\nSee http://www.slf4j.org for more information and other options.","title":"SLF4J: Failed to load class &quot;org.slf4j.impl.StaticLoggerBinder&quot;, nothing helps","body":"<p>Add a runtime dependency to <code>logback-classic</code>. Or if you don't use maven/gradle/etc, then add the logback-classic jar in your classpath.</p>\n\n<pre><code>&lt;!-- Logging --&gt;\n&lt;dependency&gt;\n  &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n  &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n  &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;\n  &lt;artifactId&gt;logback-classic&lt;/artifactId&gt;\n  &lt;scope&gt;runtime&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>See <a href=\"http://www.slf4j.org\" rel=\"nofollow noreferrer\">http://www.slf4j.org</a> for more information and other options.</p>\n"},{"tags":[],"owner":{"account_id":30010400,"reputation":1,"user_id":22998183,"display_name":"Faraz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701155096,"creation_date":1701155096,"answer_id":77561881,"question_id":43694378,"body_markdown":"add This in POM.xml file as a dependency, clean and build your project again and run !! This should solve the problem.\r\n\r\n\t&lt;dependency&gt;\r\n \t\t&lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n \t \t&lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\r\n \t \t&lt;version&gt;RELEASE&lt;/version&gt;\r\n\t&lt;/dependency&gt;\r\n\t&lt;dependency&gt;\r\n  \t\t&lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;\r\n  \t\t&lt;artifactId&gt;logback-classic&lt;/artifactId&gt;\r\n  \t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n  \t\t&lt;version&gt;RELEASE&lt;/version&gt;\r\n\t&lt;/dependency&gt;","title":"SLF4J: Failed to load class &quot;org.slf4j.impl.StaticLoggerBinder&quot;, nothing helps","body":"<p>add This in POM.xml file as a dependency, clean and build your project again and run !! This should solve the problem.</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n    &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\n    &lt;version&gt;RELEASE&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;\n    &lt;artifactId&gt;logback-classic&lt;/artifactId&gt;\n    &lt;scope&gt;runtime&lt;/scope&gt;\n    &lt;version&gt;RELEASE&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":10468507,"reputation":65,"user_id":7717181,"accept_rate":62,"display_name":"Sleeper"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":361,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1701155096,"creation_date":1493460940,"question_id":43694378,"body_markdown":"I created default Drools project, tried to launch it, but I have this error:\r\n\r\n&gt; SLF4J: Failed to load class &quot;org.slf4j.impl.StaticLoggerBinder&quot;.\r\n\r\nwhat&#39;s wrong? I didn&#39;t change anything in project. Btw I have no pom.xml file, should I create one?\r\nI checked some solutions, but nothing helps, please help\r\n","title":"SLF4J: Failed to load class &quot;org.slf4j.impl.StaticLoggerBinder&quot;, nothing helps","body":"<p>I created default Drools project, tried to launch it, but I have this error:</p>\n\n<blockquote>\n  <p>SLF4J: Failed to load class \"org.slf4j.impl.StaticLoggerBinder\".</p>\n</blockquote>\n\n<p>what's wrong? I didn't change anything in project. Btw I have no pom.xml file, should I create one?\nI checked some solutions, but nothing helps, please help</p>\n"},{"tags":["java","servlets","post"],"answers":[{"tags":[],"owner":{"account_id":52822,"reputation":1088960,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1321055755,"creation_date":1321055130,"answer_id":8101279,"question_id":8100634,"body_markdown":"If the request body is empty, then it simply means that it&#39;s already been consumed beforehand. For example, by a [`request.getParameter()`][1], [`getParameterValues()`][2] or [`getParameterMap()`][3] call. Just remove the lines doing those calls from your code.\r\n\r\n\r\n  [1]: http://download.oracle.com/javaee/6/api/javax/servlet/ServletRequest.html#getParameter%28java.lang.String%29\r\n  [2]: http://download.oracle.com/javaee/6/api/javax/servlet/ServletRequest.html#getParameterValues%28java.lang.String%29\r\n  [3]: http://download.oracle.com/javaee/6/api/javax/servlet/ServletRequest.html#getParameterMap%28%29","title":"Get the POST request body from HttpServletRequest","body":"<p>If the request body is empty, then it simply means that it's already been consumed beforehand. For example, by a <a href=\"http://download.oracle.com/javaee/6/api/javax/servlet/ServletRequest.html#getParameter%28java.lang.String%29\" rel=\"noreferrer\"><code>request.getParameter()</code></a>, <a href=\"http://download.oracle.com/javaee/6/api/javax/servlet/ServletRequest.html#getParameterValues%28java.lang.String%29\" rel=\"noreferrer\"><code>getParameterValues()</code></a> or <a href=\"http://download.oracle.com/javaee/6/api/javax/servlet/ServletRequest.html#getParameterMap%28%29\" rel=\"noreferrer\"><code>getParameterMap()</code></a> call. Just remove the lines doing those calls from your code.</p>\n"},{"tags":[],"owner":{"account_id":1438575,"reputation":853,"user_id":1359398,"display_name":"afx"},"down_vote_count":2,"up_vote_count":38,"is_accepted":false,"score":36,"last_activity_date":1398703080,"creation_date":1358525429,"answer_id":14402912,"question_id":8100634,"body_markdown":"Be aware, that your code is quite noisy.\r\nI know the thread is old, but a lot of people will read it anyway.\r\nYou could do the same thing using the [guava][1] library with:\r\n        \r\n        if (&quot;POST&quot;.equalsIgnoreCase(request.getMethod())) {\r\n            test = CharStreams.toString(request.getReader());\r\n        }\r\n\r\n\r\n  [1]: https://code.google.com/p/guava-libraries/","title":"Get the POST request body from HttpServletRequest","body":"<p>Be aware, that your code is quite noisy.\nI know the thread is old, but a lot of people will read it anyway.\nYou could do the same thing using the <a href=\"https://code.google.com/p/guava-libraries/\">guava</a> library with:</p>\n\n<pre><code>    if (\"POST\".equalsIgnoreCase(request.getMethod())) {\n        test = CharStreams.toString(request.getReader());\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1479530,"reputation":6711,"user_id":1389219,"accept_rate":50,"display_name":"vegemite4me"},"down_vote_count":0,"up_vote_count":22,"is_accepted":false,"score":22,"last_activity_date":1378373818,"creation_date":1378373818,"answer_id":18632784,"question_id":8100634,"body_markdown":"If all you want is the POST request body, you could use a method like this:\r\n\r\n    static String extractPostRequestBody(HttpServletRequest request) throws IOException {\r\n        if (&quot;POST&quot;.equalsIgnoreCase(request.getMethod())) {\r\n            Scanner s = new Scanner(request.getInputStream(), &quot;UTF-8&quot;).useDelimiter(&quot;\\\\A&quot;);\r\n            return s.hasNext() ? s.next() : &quot;&quot;;\r\n        }\r\n        return &quot;&quot;;\r\n    }\r\n\r\nCredit to: https://stackoverflow.com/a/5445161/1389219","title":"Get the POST request body from HttpServletRequest","body":"<p>If all you want is the POST request body, you could use a method like this:</p>\n\n<pre><code>static String extractPostRequestBody(HttpServletRequest request) throws IOException {\n    if (\"POST\".equalsIgnoreCase(request.getMethod())) {\n        Scanner s = new Scanner(request.getInputStream(), \"UTF-8\").useDelimiter(\"\\\\A\");\n        return s.hasNext() ? s.next() : \"\";\n    }\n    return \"\";\n}\n</code></pre>\n\n<p>Credit to: <a href=\"https://stackoverflow.com/a/5445161/1389219\">https://stackoverflow.com/a/5445161/1389219</a></p>\n"},{"tags":[],"owner":{"account_id":2797936,"reputation":1877,"user_id":2406796,"accept_rate":14,"display_name":"Bruno Lee"},"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1461870679,"creation_date":1432929452,"answer_id":30538078,"question_id":8100634,"body_markdown":"This works for both GET and POST:\t\r\n   \r\n\r\n \r\n\r\n    @Context\r\n\tprivate HttpServletRequest httpRequest;\r\n\r\n\r\n    private void printRequest(HttpServletRequest httpRequest) {\r\n\t\tSystem.out.println(&quot; \\n\\n Headers&quot;);\r\n\r\n\t\tEnumeration headerNames = httpRequest.getHeaderNames();\r\n\t\twhile(headerNames.hasMoreElements()) {\r\n\t\t\tString headerName = (String)headerNames.nextElement();\r\n\t\t\tSystem.out.println(headerName + &quot; = &quot; + httpRequest.getHeader(headerName));\r\n\t\t}\r\n\r\n\t\tSystem.out.println(&quot;\\n\\nParameters&quot;);\r\n\r\n\t\tEnumeration params = httpRequest.getParameterNames();\r\n\t\twhile(params.hasMoreElements()){\r\n\t\t\tString paramName = (String)params.nextElement();\r\n\t\t\tSystem.out.println(paramName + &quot; = &quot; + httpRequest.getParameter(paramName));\r\n\t\t}\r\n\r\n\t\tSystem.out.println(&quot;\\n\\n Row data&quot;);\r\n\t\tSystem.out.println(extractPostRequestBody(httpRequest));\r\n\t}\r\n\r\n\tstatic String extractPostRequestBody(HttpServletRequest request) {\r\n\t\tif (&quot;POST&quot;.equalsIgnoreCase(request.getMethod())) {\r\n\t\t\tScanner s = null;\r\n\t\t\ttry {\r\n\t\t\t\ts = new Scanner(request.getInputStream(), &quot;UTF-8&quot;).useDelimiter(&quot;\\\\A&quot;);\r\n\t\t\t} catch (IOException e) {\r\n\t\t\t\te.printStackTrace();\r\n\t\t\t}\r\n\t\t\treturn s.hasNext() ? s.next() : &quot;&quot;;\r\n\t\t}\r\n\t\treturn &quot;&quot;;\r\n\t}","title":"Get the POST request body from HttpServletRequest","body":"<p>This works for both GET and POST:   </p>\n\n<pre><code>@Context\nprivate HttpServletRequest httpRequest;\n\n\nprivate void printRequest(HttpServletRequest httpRequest) {\n    System.out.println(\" \\n\\n Headers\");\n\n    Enumeration headerNames = httpRequest.getHeaderNames();\n    while(headerNames.hasMoreElements()) {\n        String headerName = (String)headerNames.nextElement();\n        System.out.println(headerName + \" = \" + httpRequest.getHeader(headerName));\n    }\n\n    System.out.println(\"\\n\\nParameters\");\n\n    Enumeration params = httpRequest.getParameterNames();\n    while(params.hasMoreElements()){\n        String paramName = (String)params.nextElement();\n        System.out.println(paramName + \" = \" + httpRequest.getParameter(paramName));\n    }\n\n    System.out.println(\"\\n\\n Row data\");\n    System.out.println(extractPostRequestBody(httpRequest));\n}\n\nstatic String extractPostRequestBody(HttpServletRequest request) {\n    if (\"POST\".equalsIgnoreCase(request.getMethod())) {\n        Scanner s = null;\n        try {\n            s = new Scanner(request.getInputStream(), \"UTF-8\").useDelimiter(\"\\\\A\");\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n        return s.hasNext() ? s.next() : \"\";\n    }\n    return \"\";\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1699329,"reputation":3150,"user_id":1559874,"display_name":"abhi"},"down_vote_count":2,"up_vote_count":297,"is_accepted":false,"score":295,"last_activity_date":1542962976,"creation_date":1438842511,"answer_id":31848289,"question_id":8100634,"body_markdown":"In Java 8, you can do it in a simpler and clean way :\r\n\r\n    if (&quot;POST&quot;.equalsIgnoreCase(request.getMethod())) \r\n    {\r\n       test = request.getReader().lines().collect(Collectors.joining(System.lineSeparator()));\r\n    }\r\n\r\n","title":"Get the POST request body from HttpServletRequest","body":"<p>In Java 8, you can do it in a simpler and clean way :</p>\n\n<pre><code>if (\"POST\".equalsIgnoreCase(request.getMethod())) \n{\n   test = request.getReader().lines().collect(Collectors.joining(System.lineSeparator()));\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":454394,"reputation":4041,"user_id":851951,"accept_rate":32,"display_name":"Dani"},"down_vote_count":0,"up_vote_count":85,"is_accepted":false,"score":85,"last_activity_date":1472195908,"creation_date":1472195908,"answer_id":39160515,"question_id":8100634,"body_markdown":"Easy way with commons-io.\r\n\r\n    IOUtils.toString(request.getReader());\r\n\r\nhttps://commons.apache.org/proper/commons-io/javadocs/api-2.5/org/apache/commons/io/IOUtils.html","title":"Get the POST request body from HttpServletRequest","body":"<p>Easy way with commons-io.</p>\n\n<pre><code>IOUtils.toString(request.getReader());\n</code></pre>\n\n<p><a href=\"https://commons.apache.org/proper/commons-io/javadocs/api-2.5/org/apache/commons/io/IOUtils.html\" rel=\"noreferrer\">https://commons.apache.org/proper/commons-io/javadocs/api-2.5/org/apache/commons/io/IOUtils.html</a></p>\n"},{"tags":[],"owner":{"account_id":10643013,"reputation":300,"user_id":7837411,"accept_rate":0,"display_name":"Bhawna Joshi"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1546615633,"creation_date":1539577330,"answer_id":52809724,"question_id":8100634,"body_markdown":"This will work for all HTTP method. \r\n\r\n    public class HttpRequestWrapper extends HttpServletRequestWrapper {\r\n        private final String body;\r\n\r\n        public HttpRequestWrapper(HttpServletRequest request) throws IOException {\r\n            super(request);\r\n            body = IOUtils.toString(request.getReader());\r\n        }\r\n\r\n        @Override\r\n        public ServletInputStream getInputStream() throws IOException {\r\n            final ByteArrayInputStream byteArrayInputStream = new ByteArrayInputStream(getBody().getBytes());\r\n            ServletInputStream servletInputStream = new ServletInputStream() {\r\n                public int read() throws IOException {\r\n                    return byteArrayInputStream.read();\r\n                }\r\n\r\n                @Override\r\n                public boolean isFinished() {\r\n                    return false;\r\n                }\r\n    \r\n                @Override\r\n                public boolean isReady() {\r\n                    return false;\r\n                }\r\n    \r\n                @Override\r\n                public void setReadListener(ReadListener listener) {\r\n                }\r\n\r\n            };\r\n            return servletInputStream;\r\n        }\r\n    \r\n        public String getBody() {\r\n            return this.body;\r\n        }\r\n    }","title":"Get the POST request body from HttpServletRequest","body":"<p>This will work for all HTTP method. </p>\n\n<pre><code>public class HttpRequestWrapper extends HttpServletRequestWrapper {\n    private final String body;\n\n    public HttpRequestWrapper(HttpServletRequest request) throws IOException {\n        super(request);\n        body = IOUtils.toString(request.getReader());\n    }\n\n    @Override\n    public ServletInputStream getInputStream() throws IOException {\n        final ByteArrayInputStream byteArrayInputStream = new ByteArrayInputStream(getBody().getBytes());\n        ServletInputStream servletInputStream = new ServletInputStream() {\n            public int read() throws IOException {\n                return byteArrayInputStream.read();\n            }\n\n            @Override\n            public boolean isFinished() {\n                return false;\n            }\n\n            @Override\n            public boolean isReady() {\n                return false;\n            }\n\n            @Override\n            public void setReadListener(ReadListener listener) {\n            }\n\n        };\n        return servletInputStream;\n    }\n\n    public String getBody() {\n        return this.body;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16541414,"reputation":27,"user_id":11952101,"display_name":"Francisco Disalvo"},"down_vote_count":2,"up_vote_count":3,"is_accepted":false,"score":1,"last_activity_date":1566310500,"creation_date":1566310500,"answer_id":57575648,"question_id":8100634,"body_markdown":"I resolved that situation in this way. I created a util method that return a object extracted from request body, using the readValue method of ObjectMapper that is capable of receiving a Reader. \r\n\r\n    public static &lt;T&gt; T getBody(ResourceRequest request, Class&lt;T&gt; class) {\r\n        T objectFromBody = null;\r\n        try {\r\n            ObjectMapper objectMapper = new ObjectMapper();\r\n            HttpServletRequest httpServletRequest = PortalUtil.getHttpServletRequest(request);\r\n            objectFromBody = objectMapper.readValue(httpServletRequest.getReader(), class);\r\n        } catch (IOException ex) {\r\n            log.error(&quot;Error message&quot;, ex);\r\n        }\r\n        return objectFromBody;\r\n    }\r\n\r\n ","title":"Get the POST request body from HttpServletRequest","body":"<p>I resolved that situation in this way. I created a util method that return a object extracted from request body, using the readValue method of ObjectMapper that is capable of receiving a Reader. </p>\n\n<pre><code>public static &lt;T&gt; T getBody(ResourceRequest request, Class&lt;T&gt; class) {\n    T objectFromBody = null;\n    try {\n        ObjectMapper objectMapper = new ObjectMapper();\n        HttpServletRequest httpServletRequest = PortalUtil.getHttpServletRequest(request);\n        objectFromBody = objectMapper.readValue(httpServletRequest.getReader(), class);\n    } catch (IOException ex) {\n        log.error(\"Error message\", ex);\n    }\n    return objectFromBody;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12013314,"reputation":305,"user_id":8789240,"display_name":"FCA69"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1620382008,"creation_date":1620382008,"answer_id":67432896,"question_id":8100634,"body_markdown":"I personnally use this code (on a dev server, not in production). Seems to work. The main difficulty is that once you read the request body, it will be lost and not transferred to the app. So you have to &quot;cache&quot; it first.\r\n\r\n    /* Export this filter as a jar and place it under directory &quot;.../tomcat/lib&quot; on your Tomcat server/\r\n     In the lib directory, also place the dependencies you need\r\n     (ex. org.apache.commons.io =&gt; commons-io-2.8.0.jar)\r\n     \r\n     Once this is done, in order to activate the filter, on the Tomcat server: \r\n     o in .../tomcat/conf/server.xml, add:\r\n      &lt;Valve className=&quot;org.apache.catalina.valves.AccessLogValve&quot; directory=&quot;logs&quot; prefix=&quot;localhost_access_log&quot; suffix=&quot;.txt&quot; pattern=&quot;%h %l %u %t &amp;quot;%r&amp;quot;  [%{postdata}r] %s %b&quot;/&gt;\r\n      =&gt; the server will log the &quot;postdata&quot; attribute we generate in the Java code.\r\n     o in .../tomcat/conf/web.xml, add:\r\n      &lt;filter&gt;\r\n      &lt;filter-name&gt;post-data-dumper-filter&lt;/filter-name&gt;\r\n      &lt;filter-class&gt;filters.PostDataDumperFilter&lt;/filter-class&gt;\r\n      &lt;/filter&gt;\r\n      &lt;filter-mapping&gt;\r\n      &lt;filter-name&gt;post-data-dumper-filter&lt;/filter-name&gt;\r\n      &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\r\n      &lt;/filter-mapping&gt;\r\n\r\n    Once you&#39;ve done this, restart your tomcat server. You will get extra infos in file &quot;localhost_access_log.&lt;date&gt;.txt&quot;\r\n\r\n    */\r\n\r\n    package filters;\r\n\r\n    import java.io.BufferedReader;\r\n    import java.io.ByteArrayInputStream;\r\n    import java.io.ByteArrayOutputStream;\r\n    import java.io.IOException;\r\n    import java.io.InputStreamReader;\r\n    import java.util.Enumeration;\r\n    import java.util.stream.Collectors;\r\n\r\n    import javax.servlet.*;\r\n    import javax.servlet.http.HttpServletRequest;\r\n    import javax.servlet.http.HttpServletRequestWrapper;\r\n\r\n    import org.apache.commons.io.IOUtils;\r\n\r\n    class MultiReadHttpServletRequest extends HttpServletRequestWrapper {\r\n        private ByteArrayOutputStream cachedBytes;\r\n\r\n        public MultiReadHttpServletRequest(HttpServletRequest request) {\r\n            super(request);\r\n        }\r\n\r\n        @Override\r\n        public ServletInputStream getInputStream() throws IOException {\r\n            if (cachedBytes == null)\r\n                cacheInputStream();\r\n\r\n            return new CachedServletInputStream();\r\n        }\r\n\r\n        @Override\r\n        public BufferedReader getReader() throws IOException {\r\n            return new BufferedReader(new InputStreamReader(getInputStream()));\r\n        }\r\n\r\n        private void cacheInputStream() throws IOException {\r\n            /* Cache the inputstream in order to read it multiple times.\r\n             */\r\n            cachedBytes = new ByteArrayOutputStream();\r\n            IOUtils.copy(super.getInputStream(), cachedBytes);\r\n        }\r\n\r\n        /* An input stream which reads the cached request body */\r\n        public class CachedServletInputStream extends ServletInputStream {\r\n            private ByteArrayInputStream input;\r\n\r\n            public CachedServletInputStream() {\r\n                /* create a new input stream from the cached request body */\r\n                input = new ByteArrayInputStream(cachedBytes.toByteArray());\r\n            }\r\n            //---------------------\r\n            @Override\r\n            public int read() throws IOException {\r\n                return input.read();\r\n            }\r\n\r\n            @Override\r\n            public boolean isFinished() {\r\n                return input.available() == 0;\r\n            }\r\n\r\n            @Override\r\n            public boolean isReady() {\r\n                return true;\r\n            }\r\n            //---------------------\r\n            @Override\r\n            public void setReadListener(ReadListener arg0) {\r\n                // TODO Auto-generated method stub\r\n                // Ex. : throw new RuntimeException(&quot;Not implemented&quot;);\r\n            }\r\n        }\r\n    }\r\n\r\n    public final class PostDataDumperFilter implements Filter {\r\n\r\n        private FilterConfig filterConfig = null;\r\n\r\n\r\n        public void destroy() {\r\n            this.filterConfig = null;\r\n        }\r\n\r\n        public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {\r\n            if (filterConfig == null)\r\n                return;\r\n\r\n            StringBuffer output = new StringBuffer();\r\n            output.append(&quot;PostDataDumperFilter-&quot;);\r\n\r\n            /* Wrap the request in order to be able to read its body multiple times */\r\n            MultiReadHttpServletRequest multiReadRequest = new MultiReadHttpServletRequest((HttpServletRequest) request);\r\n\r\n            // TODO : test the method in order not to log the body when receiving GET/DELETE requests ?\r\n            // I finally leave it &quot;as it&quot;, since I&#39;ve seen GET requests containing bodies (hell...).\r\n            output.append(&quot;Content-type=&quot; + multiReadRequest.getContentType());\r\n            output.append(&quot; - HTTP Method=&quot; + multiReadRequest.getMethod());\r\n            output.append(&quot; - REQUEST BODY = &quot; + multiReadRequest.getReader().lines().collect(Collectors.joining(System.lineSeparator())));\r\n\r\n\r\n            // Log the request parameters:\r\n            Enumeration names = multiReadRequest.getParameterNames();\r\n            if (names.hasMoreElements()) {\r\n                output.append(&quot;- REQUEST PARAMS = &quot;);\r\n            }\r\n\r\n            while (names.hasMoreElements()) {\r\n                String name = (String) names.nextElement();\r\n                output.append(name + &quot;=&quot;);\r\n                String values[] = multiReadRequest.getParameterValues(name);\r\n                for (int i = 0; i &lt; values.length; i++) {\r\n                    if (i &gt; 0) output.append(&quot;&#39; &quot;);\r\n                    output.append(values[i]);\r\n                }\r\n                if (names.hasMoreElements()) output.append(&quot;&amp;&quot;);\r\n            }\r\n\r\n            multiReadRequest.setAttribute(&quot;postdata&quot;, output);\r\n            chain.doFilter(multiReadRequest, response);\r\n        }\r\n\r\n        public void init(FilterConfig filterConfig) throws ServletException {\r\n            this.filterConfig = filterConfig;\r\n        }\r\n    }\r\n","title":"Get the POST request body from HttpServletRequest","body":"<p>I personnally use this code (on a dev server, not in production). Seems to work. The main difficulty is that once you read the request body, it will be lost and not transferred to the app. So you have to &quot;cache&quot; it first.</p>\n<pre><code>/* Export this filter as a jar and place it under directory &quot;.../tomcat/lib&quot; on your Tomcat server/\n In the lib directory, also place the dependencies you need\n (ex. org.apache.commons.io =&gt; commons-io-2.8.0.jar)\n \n Once this is done, in order to activate the filter, on the Tomcat server: \n o in .../tomcat/conf/server.xml, add:\n  &lt;Valve className=&quot;org.apache.catalina.valves.AccessLogValve&quot; directory=&quot;logs&quot; prefix=&quot;localhost_access_log&quot; suffix=&quot;.txt&quot; pattern=&quot;%h %l %u %t &amp;quot;%r&amp;quot;  [%{postdata}r] %s %b&quot;/&gt;\n  =&gt; the server will log the &quot;postdata&quot; attribute we generate in the Java code.\n o in .../tomcat/conf/web.xml, add:\n  &lt;filter&gt;\n  &lt;filter-name&gt;post-data-dumper-filter&lt;/filter-name&gt;\n  &lt;filter-class&gt;filters.PostDataDumperFilter&lt;/filter-class&gt;\n  &lt;/filter&gt;\n  &lt;filter-mapping&gt;\n  &lt;filter-name&gt;post-data-dumper-filter&lt;/filter-name&gt;\n  &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\n  &lt;/filter-mapping&gt;\n\nOnce you've done this, restart your tomcat server. You will get extra infos in file &quot;localhost_access_log.&lt;date&gt;.txt&quot;\n\n*/\n\npackage filters;\n\nimport java.io.BufferedReader;\nimport java.io.ByteArrayInputStream;\nimport java.io.ByteArrayOutputStream;\nimport java.io.IOException;\nimport java.io.InputStreamReader;\nimport java.util.Enumeration;\nimport java.util.stream.Collectors;\n\nimport javax.servlet.*;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletRequestWrapper;\n\nimport org.apache.commons.io.IOUtils;\n\nclass MultiReadHttpServletRequest extends HttpServletRequestWrapper {\n    private ByteArrayOutputStream cachedBytes;\n\n    public MultiReadHttpServletRequest(HttpServletRequest request) {\n        super(request);\n    }\n\n    @Override\n    public ServletInputStream getInputStream() throws IOException {\n        if (cachedBytes == null)\n            cacheInputStream();\n\n        return new CachedServletInputStream();\n    }\n\n    @Override\n    public BufferedReader getReader() throws IOException {\n        return new BufferedReader(new InputStreamReader(getInputStream()));\n    }\n\n    private void cacheInputStream() throws IOException {\n        /* Cache the inputstream in order to read it multiple times.\n         */\n        cachedBytes = new ByteArrayOutputStream();\n        IOUtils.copy(super.getInputStream(), cachedBytes);\n    }\n\n    /* An input stream which reads the cached request body */\n    public class CachedServletInputStream extends ServletInputStream {\n        private ByteArrayInputStream input;\n\n        public CachedServletInputStream() {\n            /* create a new input stream from the cached request body */\n            input = new ByteArrayInputStream(cachedBytes.toByteArray());\n        }\n        //---------------------\n        @Override\n        public int read() throws IOException {\n            return input.read();\n        }\n\n        @Override\n        public boolean isFinished() {\n            return input.available() == 0;\n        }\n\n        @Override\n        public boolean isReady() {\n            return true;\n        }\n        //---------------------\n        @Override\n        public void setReadListener(ReadListener arg0) {\n            // TODO Auto-generated method stub\n            // Ex. : throw new RuntimeException(&quot;Not implemented&quot;);\n        }\n    }\n}\n\npublic final class PostDataDumperFilter implements Filter {\n\n    private FilterConfig filterConfig = null;\n\n\n    public void destroy() {\n        this.filterConfig = null;\n    }\n\n    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {\n        if (filterConfig == null)\n            return;\n\n        StringBuffer output = new StringBuffer();\n        output.append(&quot;PostDataDumperFilter-&quot;);\n\n        /* Wrap the request in order to be able to read its body multiple times */\n        MultiReadHttpServletRequest multiReadRequest = new MultiReadHttpServletRequest((HttpServletRequest) request);\n\n        // TODO : test the method in order not to log the body when receiving GET/DELETE requests ?\n        // I finally leave it &quot;as it&quot;, since I've seen GET requests containing bodies (hell...).\n        output.append(&quot;Content-type=&quot; + multiReadRequest.getContentType());\n        output.append(&quot; - HTTP Method=&quot; + multiReadRequest.getMethod());\n        output.append(&quot; - REQUEST BODY = &quot; + multiReadRequest.getReader().lines().collect(Collectors.joining(System.lineSeparator())));\n\n\n        // Log the request parameters:\n        Enumeration names = multiReadRequest.getParameterNames();\n        if (names.hasMoreElements()) {\n            output.append(&quot;- REQUEST PARAMS = &quot;);\n        }\n\n        while (names.hasMoreElements()) {\n            String name = (String) names.nextElement();\n            output.append(name + &quot;=&quot;);\n            String values[] = multiReadRequest.getParameterValues(name);\n            for (int i = 0; i &lt; values.length; i++) {\n                if (i &gt; 0) output.append(&quot;' &quot;);\n                output.append(values[i]);\n            }\n            if (names.hasMoreElements()) output.append(&quot;&amp;&quot;);\n        }\n\n        multiReadRequest.setAttribute(&quot;postdata&quot;, output);\n        chain.doFilter(multiReadRequest, response);\n    }\n\n    public void init(FilterConfig filterConfig) throws ServletException {\n        this.filterConfig = filterConfig;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15955770,"reputation":712,"user_id":11513972,"display_name":"Tristan Elliott"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1648307552,"creation_date":1648307552,"answer_id":71629259,"question_id":8100634,"body_markdown":"# Easiest way I could think of:\r\n```\r\nrequest.getReader().lines().reduce(&quot;&quot;,String::concat)\r\n```\r\n\r\n- However, this will be one long string which you will have to parse. IF you send a username of `tim` and a password of `12345`. The output of the code above would look like this:\r\n```\r\n{    &quot;username&quot;:&quot;tim&quot;,    &quot;password&quot;: &quot;12345&quot;}\r\n```\r\n\r\n### Please be aware\r\n- Please be aware that with the reduce() method we are performing a [Mutable Reduction](https://docs.oracle.com/javase/8/docs/api/java/util/stream/package-summary.html#MutableReduction) which does a great deal of string copying and has a runtime of O(N^2) with N being the number of characters. Please check the [Mutable Reduction](https://docs.oracle.com/javase/8/docs/api/java/util/stream/package-summary.html#MutableReduction) documentation if you need a more performant result.\r\n","title":"Get the POST request body from HttpServletRequest","body":"<h1>Easiest way I could think of:</h1>\n<pre><code>request.getReader().lines().reduce(&quot;&quot;,String::concat)\n</code></pre>\n<ul>\n<li>However, this will be one long string which you will have to parse. IF you send a username of <code>tim</code> and a password of <code>12345</code>. The output of the code above would look like this:</li>\n</ul>\n<pre><code>{    &quot;username&quot;:&quot;tim&quot;,    &quot;password&quot;: &quot;12345&quot;}\n</code></pre>\n<h3>Please be aware</h3>\n<ul>\n<li>Please be aware that with the reduce() method we are performing a <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/package-summary.html#MutableReduction\" rel=\"noreferrer\">Mutable Reduction</a> which does a great deal of string copying and has a runtime of O(N^2) with N being the number of characters. Please check the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/package-summary.html#MutableReduction\" rel=\"noreferrer\">Mutable Reduction</a> documentation if you need a more performant result.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":14853250,"reputation":248,"user_id":10726498,"display_name":"Amit Jajoo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701155079,"creation_date":1701155079,"answer_id":77561880,"question_id":8100634,"body_markdown":"use \r\n(String) request.getAttribute(&quot;body&quot;)","title":"Get the POST request body from HttpServletRequest","body":"<p>use\n(String) request.getAttribute(&quot;body&quot;)</p>\n"}],"owner":{"account_id":972775,"reputation":2021,"user_id":994953,"display_name":"patel bhavin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":488739,"favorite_count":0,"down_vote_count":0,"up_vote_count":202,"answer_count":11,"score":202,"last_activity_date":1701155079,"creation_date":1321049778,"question_id":8100634,"body_markdown":"I am trying to get the whole body from the HttpServletRequest object.\r\n\r\nThe code I am following looks like this:\r\n\r\n    if ( request.getMethod().equals(&quot;POST&quot;) )\r\n    {\r\n    \tStringBuffer sb = new StringBuffer();\r\n    \tBufferedReader bufferedReader = null;\r\n    \tString content = &quot;&quot;;\r\n    \t\r\n    \ttry {\r\n    \t\t//InputStream inputStream = request.getInputStream();\r\n    \t\t//inputStream.available();\r\n    \t\t//if (inputStream != null) {\r\n    \t\tbufferedReader =  request.getReader() ; //new BufferedReader(new InputStreamReader(inputStream));\r\n    \t\tchar[] charBuffer = new char[128];\r\n    \t\tint bytesRead;\r\n    \t\twhile ( (bytesRead = bufferedReader.read(charBuffer)) != -1 ) {\r\n    \t\t\tsb.append(charBuffer, 0, bytesRead);\r\n    \t\t}\r\n    \t\t//} else {\r\n    \t\t//        sb.append(&quot;&quot;);\r\n    \t\t//}\r\n    \t\r\n    \t} catch (IOException ex) {\r\n    \t\tthrow ex;\r\n    \t} finally {\r\n    \t\tif (bufferedReader != null) {\r\n    \t\t\ttry {\r\n    \t\t\t\tbufferedReader.close();\r\n    \t\t\t} catch (IOException ex) {\r\n    \t\t\t\tthrow ex;\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}\r\n    \t\r\n    \ttest = sb.toString();\r\n    }\r\n\r\n\r\n\r\nand I am testing the functionality with curl and wget as follows:\r\n\r\n    curl --header &quot;MD5: abcd&quot; -F &quot;fileupload=@filename.txt http://localhost:8080/abcd.html&quot;\r\n\r\n    wget --header=&quot;MD5: abcd&quot; --post-data=&#39;{&quot;imei&quot;:&quot;351553012623446&quot;,&quot;hni&quot;:&quot;310150&quot;,&quot;wdp&quot;:false}&#39; http://localhost:8080/abcd.html&quot;\r\n\r\n\r\nBut the `while ( (bytesRead = bufferedReader.read(charBuffer)) != -1 )` does not return anything, and so I get nothing appended on StringBuffer.\r\n\r\n\r\n\r\n\r\n","title":"Get the POST request body from HttpServletRequest","body":"<p>I am trying to get the whole body from the HttpServletRequest object.</p>\n\n<p>The code I am following looks like this:</p>\n\n<pre><code>if ( request.getMethod().equals(\"POST\") )\n{\n    StringBuffer sb = new StringBuffer();\n    BufferedReader bufferedReader = null;\n    String content = \"\";\n\n    try {\n        //InputStream inputStream = request.getInputStream();\n        //inputStream.available();\n        //if (inputStream != null) {\n        bufferedReader =  request.getReader() ; //new BufferedReader(new InputStreamReader(inputStream));\n        char[] charBuffer = new char[128];\n        int bytesRead;\n        while ( (bytesRead = bufferedReader.read(charBuffer)) != -1 ) {\n            sb.append(charBuffer, 0, bytesRead);\n        }\n        //} else {\n        //        sb.append(\"\");\n        //}\n\n    } catch (IOException ex) {\n        throw ex;\n    } finally {\n        if (bufferedReader != null) {\n            try {\n                bufferedReader.close();\n            } catch (IOException ex) {\n                throw ex;\n            }\n        }\n    }\n\n    test = sb.toString();\n}\n</code></pre>\n\n<p>and I am testing the functionality with curl and wget as follows:</p>\n\n<pre><code>curl --header \"MD5: abcd\" -F \"fileupload=@filename.txt http://localhost:8080/abcd.html\"\n\nwget --header=\"MD5: abcd\" --post-data='{\"imei\":\"351553012623446\",\"hni\":\"310150\",\"wdp\":false}' http://localhost:8080/abcd.html\"\n</code></pre>\n\n<p>But the <code>while ( (bytesRead = bufferedReader.read(charBuffer)) != -1 )</code> does not return anything, and so I get nothing appended on StringBuffer.</p>\n"},{"tags":["java","xml","web-services","http"],"comments":[{"owner":{"account_id":52822,"reputation":1088960,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"score":0,"creation_date":1375146828,"post_id":17936736,"comment_id":26209775,"body_markdown":"Do you need to upload a XML file (this is what your code is basically attempting) or do you need to send a request body in XML format? (this is what a lot of &quot;XML over HTTP&quot; based web services expect).","body":"Do you need to upload a XML file (this is what your code is basically attempting) or do you need to send a request body in XML format? (this is what a lot of &quot;XML over HTTP&quot; based web services expect)."},{"owner":{"account_id":52822,"reputation":1088960,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"score":2,"creation_date":1375146844,"post_id":17936736,"comment_id":26209778,"body_markdown":"By the way, this is not a JSF problem. I suggest to remove the irrelevant JSF tags and replace by `[web-service]` or so, preferably along with the type webservice the other side is using (JAX-RS, JAX-WS, SOAP, etc).","body":"By the way, this is not a JSF problem. I suggest to remove the irrelevant JSF tags and replace by <code>[web-service]</code> or so, preferably along with the type webservice the other side is using (JAX-RS, JAX-WS, SOAP, etc)."},{"owner":{"account_id":248044,"reputation":16466,"user_id":523168,"accept_rate":77,"display_name":"Valter Silva"},"score":0,"creation_date":1375150033,"post_id":17936736,"comment_id":26210435,"body_markdown":"tags removed about jsf BalusC.","body":"tags removed about jsf BalusC."},{"owner":{"account_id":248044,"reputation":16466,"user_id":523168,"accept_rate":77,"display_name":"Valter Silva"},"score":0,"creation_date":1375150078,"post_id":17936736,"comment_id":26210443,"body_markdown":"I Need to send a request body in XML format BalusC.\nI think I was doing that in my code, but it seems I&#39;m not.","body":"I Need to send a request body in XML format BalusC. I think I was doing that in my code, but it seems I&#39;m not."},{"owner":{"account_id":71739,"reputation":307143,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":1,"creation_date":1596590535,"post_id":17936736,"comment_id":111857985,"body_markdown":"Only you can know what&#39;s wrong with your XML. Nobody else can help.","body":"Only you can know what&#39;s wrong with your XML. Nobody else can help."}],"answers":[{"tags":[],"owner":{"account_id":1100735,"reputation":557,"user_id":1093182,"accept_rate":60,"display_name":"web2dev"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1375176731,"creation_date":1375176731,"answer_id":17943289,"question_id":17936736,"body_markdown":"Can you check that the url where you trying to post can handle your xml correctly ?\r\nI have tried to upload the xml you provided using just simple http post to the specified url  and got\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;ISO-8859-1&quot;?&gt; &lt;erro xmlns=&quot;http://ecommerce.cbmp.com.br&quot;&gt; &lt;codigo&gt;001&lt;/codigo&gt; &lt;mensagem&gt;Requisi&#231;&#227;o inv&#225;lida&lt;/mensagem&gt; &lt;/erro&gt;\r\n\r\nI prefer you first try to upload the xml from outside and then try with your code .\r\nFor example i used RESTClient of Mozilla addon .","title":"How to send a request (and receive it) in XML format from some web-service?","body":"<p>Can you check that the url where you trying to post can handle your xml correctly ?\nI have tried to upload the xml you provided using just simple http post to the specified url  and got</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"ISO-8859-1\"?&gt; &lt;erro xmlns=\"http://ecommerce.cbmp.com.br\"&gt; &lt;codigo&gt;001&lt;/codigo&gt; &lt;mensagem&gt;Requisição inválida&lt;/mensagem&gt; &lt;/erro&gt;\n</code></pre>\n\n<p>I prefer you first try to upload the xml from outside and then try with your code .\nFor example i used RESTClient of Mozilla addon .</p>\n"}],"owner":{"account_id":248044,"reputation":16466,"user_id":523168,"accept_rate":77,"display_name":"Valter Silva"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":10033,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1701154975,"creation_date":1375146189,"question_id":17936736,"body_markdown":"I&#39;m working in a E-Commerce website, with JSF 2.\r\nIn order to communicate with the company that makes all the operation with the banks, I need to send this XML to them (it&#39;s just a sample provided from them):\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;ISO-8859-1&quot;?&gt;\r\n    &lt;requisicao-transacao versao=&quot;1.2.0&quot; id=&quot;6560a94c-663b-4aec-9a45-e45f278e00b4&quot; xmlns=&quot;http://ecommerce.cbmp.com.br&quot;&gt;\r\n    \t&lt;dados-ec&gt;\r\n    \t\t&lt;numero&gt;1001734898&lt;/numero&gt;\r\n    \t\t&lt;chave&gt;e84827130b9837473681c2787007da5914d6359947015a5cdb2b8843db0fa832&lt;/chave&gt;\r\n    \t&lt;/dados-ec&gt;\r\n    \t&lt;dados-pedido&gt;\r\n    \t\t&lt;numero&gt;1603662828&lt;/numero&gt;\r\n    \t\t&lt;valor&gt;100&lt;/valor&gt;\r\n    \t\t&lt;moeda&gt;986&lt;/moeda&gt;\r\n    \t\t&lt;data-hora&gt;2010-07-14T15:50:11&lt;/data-hora&gt;\r\n    \t\t&lt;idioma&gt;PT&lt;/idioma&gt;\r\n    \t&lt;/dados-pedido&gt;\r\n    \t&lt;forma-pagamento&gt;\r\n    \t\t&lt;bandeira&gt;visa&lt;/bandeira&gt;\r\n    \t\t&lt;produto&gt;A&lt;/produto&gt;\r\n    \t\t&lt;parcelas&gt;1&lt;/parcelas&gt;\r\n    \t&lt;/forma-pagamento&gt;\r\n    \t&lt;url-retorno&gt;https://www.dummyurl.du/dummypage.do?id=trhjgnerifvnidjfnvmd&lt;/url-retorno&gt;\r\n    \t&lt;autorizar&gt;1&lt;/autorizar&gt;\r\n    \t&lt;capturar&gt;true&lt;/capturar&gt;\r\n    &lt;/requisicao-transacao&gt;\r\n\r\nSo after reading a lot about how to send and XML and receive it, I create this method:\r\n\r\n\r\n    public String rent(){\r\n    \t//String folderAndFile = createTransaction();\r\n    \r\n    \t//creating the HTTP Post\r\n    \tDefaultHttpClient client = new DefaultHttpClient();\r\n    \tHttpPost post = new HttpPost(&quot;https://qasecommerce.cielo.com.br/servicos/ecommwsec.do&quot;);\r\n    \t\r\n    \ttry {\r\n           //Reading the file as an entity\r\n    \t\tFileEntity entity = new FileEntity(new File(&quot;/home/valter.silva/sample.xml&quot;));\r\n    \t\tentity.setContentType(&quot;text/xml&quot;);\r\n            post.setEntity(entity);\r\n            \r\n            HttpResponse response = client.execute(post);\r\n    \t\tHttpEntity httpEntity = response.getEntity();\r\n    \t\t\r\n    \t\tSystem.out.println(EntityUtils.toString(httpEntity));\r\n    \t\t\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n    \treturn null;\r\n    }\r\n\r\nBut the output is always :\r\n\r\n\r\n    INFO: &lt;?xml version=&quot;1.0&quot; encoding=&quot;ISO-8859-1&quot;?&gt; &lt;erro xmlns=&quot;http://ecommerce.cbmp.com.br&quot;&gt; &lt;codigo&gt;001&lt;/codigo&gt; &lt;mensagem&gt;Requisi&#231;&#227;o inv&#225;lida&lt;/mensagem&gt; &lt;/erro&gt;\r\n\r\nWhich means that my `.xml` that I&#39;m sending is invalid. That for some reason, the XML is wrong.. but what ?\r\n\r\nIs alright the way that I&#39;m sending the file ? What can I do about it ?\r\n\r\n**update**\r\nI was trying another approach but still the output is always the same, ..., is something wrong with my code ?\r\n\r\n\r\n    //approach v1\r\n        public String rent(){\r\n        \t\t//String folderAndFile = createTransaction();\r\n        \r\n        \t\ttry {\r\n        \t\t\tFile file = new File(&quot;/home/valter.silva/test.xml&quot;);\r\n        \t\t\tHttpPost post = new HttpPost(&quot;https://qasecommerce.cielo.com.br/servicos/ecommwsec.do&quot;);\r\n        \t\t\tpost.setEntity(new InputStreamEntity(new FileInputStream(file),file.length()));\r\n        \t\t\tpost.setHeader(&quot;Content-type&quot;, &quot;text/xml; charset=ISO-8859-1&quot;);\r\n        \t\t\t\r\n        \t\t\t//creating the HTTP Post\r\n        \t\t\tDefaultHttpClient client = new DefaultHttpClient();\r\n        \t\t\t\r\n                    HttpResponse response = client.execute(post);\r\n        \t\t\tHttpEntity httpEntity = response.getEntity();\r\n        \t\t\t\r\n        \t\t\tSystem.out.println(EntityUtils.toString(httpEntity));\r\n        \t\t\t\r\n                } catch (IOException e) {\r\n                    e.printStackTrace();\r\n                }\r\n        \t\treturn null;\r\n        \t}\r\n\r\n\r\n    //approach v2\r\n    public String rent(){\r\n    \t\t//String folderAndFile = createTransaction();\r\n    \r\n    \t\ttry {\r\n    \t\t\tFile file = new File(&quot;/home/valter.silva/test.xml&quot;);\r\n    \t\t\tHttpPost post = new HttpPost(&quot;https://qasecommerce.cielo.com.br/servicos/ecommwsec.do&quot;);\r\n    \t\t\t\r\n    \t\t\t//creating the HTTP Post\r\n    \t\t\tDefaultHttpClient client = new DefaultHttpClient();\r\n    \t\t\t\r\n    \t\t\tString fileInString = fileToString(&quot;/home/valter.silva/test.xml&quot;);\r\n    \t\t\tInputStream inputStream=new ByteArrayInputStream(fileInString.getBytes());//init your own inputstream\r\n    \t\t\tInputStreamEntity inputStreamEntity=new InputStreamEntity(inputStream,fileInString.length());\r\n    \t\t\tpost.setEntity(inputStreamEntity);\r\n    \r\n                HttpResponse response = client.execute(post);\r\n    \t\t\tHttpEntity httpEntity = response.getEntity();\r\n    \t\t\t\r\n    \t\t\tSystem.out.println(EntityUtils.toString(httpEntity));\r\n    \t\t\t\r\n            } catch (IOException e) {\r\n                e.printStackTrace();\r\n            }\r\n    \t\treturn null;\r\n    \t}","title":"How to send a request (and receive it) in XML format from some web-service?","body":"<p>I'm working in a E-Commerce website, with JSF 2.\nIn order to communicate with the company that makes all the operation with the banks, I need to send this XML to them (it's just a sample provided from them):</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"ISO-8859-1\"?&gt;\n&lt;requisicao-transacao versao=\"1.2.0\" id=\"6560a94c-663b-4aec-9a45-e45f278e00b4\" xmlns=\"http://ecommerce.cbmp.com.br\"&gt;\n    &lt;dados-ec&gt;\n        &lt;numero&gt;1001734898&lt;/numero&gt;\n        &lt;chave&gt;e84827130b9837473681c2787007da5914d6359947015a5cdb2b8843db0fa832&lt;/chave&gt;\n    &lt;/dados-ec&gt;\n    &lt;dados-pedido&gt;\n        &lt;numero&gt;1603662828&lt;/numero&gt;\n        &lt;valor&gt;100&lt;/valor&gt;\n        &lt;moeda&gt;986&lt;/moeda&gt;\n        &lt;data-hora&gt;2010-07-14T15:50:11&lt;/data-hora&gt;\n        &lt;idioma&gt;PT&lt;/idioma&gt;\n    &lt;/dados-pedido&gt;\n    &lt;forma-pagamento&gt;\n        &lt;bandeira&gt;visa&lt;/bandeira&gt;\n        &lt;produto&gt;A&lt;/produto&gt;\n        &lt;parcelas&gt;1&lt;/parcelas&gt;\n    &lt;/forma-pagamento&gt;\n    &lt;url-retorno&gt;https://www.dummyurl.du/dummypage.do?id=trhjgnerifvnidjfnvmd&lt;/url-retorno&gt;\n    &lt;autorizar&gt;1&lt;/autorizar&gt;\n    &lt;capturar&gt;true&lt;/capturar&gt;\n&lt;/requisicao-transacao&gt;\n</code></pre>\n\n<p>So after reading a lot about how to send and XML and receive it, I create this method:</p>\n\n<pre><code>public String rent(){\n    //String folderAndFile = createTransaction();\n\n    //creating the HTTP Post\n    DefaultHttpClient client = new DefaultHttpClient();\n    HttpPost post = new HttpPost(\"https://qasecommerce.cielo.com.br/servicos/ecommwsec.do\");\n\n    try {\n       //Reading the file as an entity\n        FileEntity entity = new FileEntity(new File(\"/home/valter.silva/sample.xml\"));\n        entity.setContentType(\"text/xml\");\n        post.setEntity(entity);\n\n        HttpResponse response = client.execute(post);\n        HttpEntity httpEntity = response.getEntity();\n\n        System.out.println(EntityUtils.toString(httpEntity));\n\n    } catch (IOException e) {\n        e.printStackTrace();\n    }\n    return null;\n}\n</code></pre>\n\n<p>But the output is always :</p>\n\n<pre><code>INFO: &lt;?xml version=\"1.0\" encoding=\"ISO-8859-1\"?&gt; &lt;erro xmlns=\"http://ecommerce.cbmp.com.br\"&gt; &lt;codigo&gt;001&lt;/codigo&gt; &lt;mensagem&gt;Requisição inválida&lt;/mensagem&gt; &lt;/erro&gt;\n</code></pre>\n\n<p>Which means that my <code>.xml</code> that I'm sending is invalid. That for some reason, the XML is wrong.. but what ?</p>\n\n<p>Is alright the way that I'm sending the file ? What can I do about it ?</p>\n\n<p><strong>update</strong>\nI was trying another approach but still the output is always the same, ..., is something wrong with my code ?</p>\n\n<pre><code>//approach v1\n    public String rent(){\n            //String folderAndFile = createTransaction();\n\n            try {\n                File file = new File(\"/home/valter.silva/test.xml\");\n                HttpPost post = new HttpPost(\"https://qasecommerce.cielo.com.br/servicos/ecommwsec.do\");\n                post.setEntity(new InputStreamEntity(new FileInputStream(file),file.length()));\n                post.setHeader(\"Content-type\", \"text/xml; charset=ISO-8859-1\");\n\n                //creating the HTTP Post\n                DefaultHttpClient client = new DefaultHttpClient();\n\n                HttpResponse response = client.execute(post);\n                HttpEntity httpEntity = response.getEntity();\n\n                System.out.println(EntityUtils.toString(httpEntity));\n\n            } catch (IOException e) {\n                e.printStackTrace();\n            }\n            return null;\n        }\n\n\n//approach v2\npublic String rent(){\n        //String folderAndFile = createTransaction();\n\n        try {\n            File file = new File(\"/home/valter.silva/test.xml\");\n            HttpPost post = new HttpPost(\"https://qasecommerce.cielo.com.br/servicos/ecommwsec.do\");\n\n            //creating the HTTP Post\n            DefaultHttpClient client = new DefaultHttpClient();\n\n            String fileInString = fileToString(\"/home/valter.silva/test.xml\");\n            InputStream inputStream=new ByteArrayInputStream(fileInString.getBytes());//init your own inputstream\n            InputStreamEntity inputStreamEntity=new InputStreamEntity(inputStream,fileInString.length());\n            post.setEntity(inputStreamEntity);\n\n            HttpResponse response = client.execute(post);\n            HttpEntity httpEntity = response.getEntity();\n\n            System.out.println(EntityUtils.toString(httpEntity));\n\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n        return null;\n    }\n</code></pre>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":10430372,"reputation":4017,"user_id":7690376,"display_name":"from56"},"score":2,"creation_date":1648937585,"post_id":71721524,"comment_id":126750410,"body_markdown":"You can&#39;t compare String using == operator. You should use String.equals() instead","body":"You can&#39;t compare String using == operator. You should use String.equals() instead"},{"owner":{"account_id":1790714,"reputation":91128,"user_id":1631193,"accept_rate":71,"display_name":"Gabe Sechan"},"score":0,"creation_date":1648959484,"post_id":71721524,"comment_id":126752812,"body_markdown":"To follow on from what @from56 said-  == doesn&#39;t check if two strings are the same text, it checks if they&#39;re the same object-  the same reference.  The equals() function checks the data of the string.  This goes for every object in Java.","body":"To follow on from what @from56 said-  == doesn&#39;t check if two strings are the same text, it checks if they&#39;re the same object-  the same reference.  The equals() function checks the data of the string.  This goes for every object in Java."},{"owner":{"account_id":18000638,"reputation":531,"user_id":13082664,"display_name":"Meet Bhavsar"},"score":0,"creation_date":1701156667,"post_id":71721524,"comment_id":136737092,"body_markdown":"finish(); remove","body":"finish(); remove"}],"answers":[{"tags":[],"owner":{"account_id":28850361,"reputation":366,"user_id":22096391,"display_name":"Murtaza"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701154228,"creation_date":1701154228,"answer_id":77561829,"question_id":71721524,"body_markdown":"You cannot use `==` operator for string value comparison, you should use `result.equals()` for comparing strings. \r\n\r\n    if(result.equals(&#39;K1&#39;)){\r\n     // your code\r\n    }","title":"Andrid application exit","body":"<p>You cannot use <code>==</code> operator for string value comparison, you should use <code>result.equals()</code> for comparing strings.</p>\n<pre><code>if(result.equals('K1')){\n // your code\n}\n</code></pre>\n"}],"owner":{"account_id":24804035,"reputation":1,"user_id":18686210,"display_name":"Garlk"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1701154228,"creation_date":1648937302,"question_id":71721524,"body_markdown":"I write my first Mobil application and i can&#39;t find out why my application go in to the else part of the code.\r\nThis part is the login.java and i don&#39;t no what is the problem wiht this.\r\nPls help me some one.\r\n\r\nThe Result is what i got from the data base and it contains a nunber if the user can login is successfully.\r\n\r\n                                    if (result==&quot;K1&quot;) {\r\n                                        Toast.makeText(getApplicationContext(),adat[0],Toast.LENGTH_SHORT).show();\r\n                                    } else if (result==&quot;K2&quot;) {\r\n                                        Toast.makeText(getApplicationContext(),adat[0],Toast.LENGTH_SHORT).show();\r\n                                    } else if (result==&quot;K3&quot;){\r\n                                        Toast.makeText(getApplicationContext(),adat[0],Toast.LENGTH_SHORT).show();\r\n                                    }else{\r\n    \r\n                                        //int ID = ;\r\n                                        //String ID = result;\r\n                                        felhasznalo_segedlet Felhasznalo_segedlet = new felhasznalo_segedlet(Integer.parseInt(result), data[0]);\r\n                                        sessionsegedletek sessionsegedletek = new sessionsegedletek(belepes.this);\r\n                                        sessionsegedletek.mentesSession(Felhasznalo_segedlet);\r\n    \r\n                                        Toast.makeText(getApplicationContext(),&quot;Sikeres bejelentkez&#233;s &quot;+data[0],Toast.LENGTH_SHORT).show();\r\n                                        finish();\r\n                                        ActivityMozgato();\r\n                                    }","title":"Andrid application exit","body":"<p>I write my first Mobil application and i can't find out why my application go in to the else part of the code.\nThis part is the login.java and i don't no what is the problem wiht this.\nPls help me some one.</p>\n<p>The Result is what i got from the data base and it contains a nunber if the user can login is successfully.</p>\n<pre><code>                                if (result==&quot;K1&quot;) {\n                                    Toast.makeText(getApplicationContext(),adat[0],Toast.LENGTH_SHORT).show();\n                                } else if (result==&quot;K2&quot;) {\n                                    Toast.makeText(getApplicationContext(),adat[0],Toast.LENGTH_SHORT).show();\n                                } else if (result==&quot;K3&quot;){\n                                    Toast.makeText(getApplicationContext(),adat[0],Toast.LENGTH_SHORT).show();\n                                }else{\n\n                                    //int ID = ;\n                                    //String ID = result;\n                                    felhasznalo_segedlet Felhasznalo_segedlet = new felhasznalo_segedlet(Integer.parseInt(result), data[0]);\n                                    sessionsegedletek sessionsegedletek = new sessionsegedletek(belepes.this);\n                                    sessionsegedletek.mentesSession(Felhasznalo_segedlet);\n\n                                    Toast.makeText(getApplicationContext(),&quot;Sikeres bejelentkezés &quot;+data[0],Toast.LENGTH_SHORT).show();\n                                    finish();\n                                    ActivityMozgato();\n                                }\n</code></pre>\n"},{"tags":["java","android","json","pojo"],"answers":[{"tags":[],"owner":{"display_name":"user6745647"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1473119843,"creation_date":1473119843,"answer_id":39338911,"question_id":39338584,"body_markdown":"This works for me:\r\n\r\n    public class addQuotes{\r\n\t    String dir = &quot;enter file location here&quot;;\r\n\t    File quotes = new File(dir);\r\n\t\r\n\tprivate String readFile(){\r\n\t\tString q = &quot;&quot;;\r\n\t\t\r\n\t\ttry(FileInputStream fin = new FileInputStream(dir)){\r\n\t\t\tint s = (int) quotes.length();\r\n\t\t\tbyte[] r = new byte[s];\r\n\t\t\tfin.read(r);\r\n\t\t\tq = new String(r);\r\n\t\t\t\r\n\t\t}catch(Exception e){\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t\treturn q;\r\n\t}\r\n\t\r\n\tprivate void writeFile(FileOutputStream fos, String output) throws IOException{\r\n\t\tbyte[] data = output.getBytes();\r\n\t\tfos.write(data);\r\n\t}\r\n\t\r\n\tpublic addQuotes() {\r\n\t\tString add = readFile().replaceAll(&quot;(\\\\w+)&quot;, &quot;\\&quot;$1\\&quot;&quot;);\r\n\t\ttry{\r\n\t\t\tFileOutputStream fos =  new FileOutputStream(dir);\r\n\t\t\twriteFile(fos, add);\r\n\t\t}catch(Exception e){\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t  }\r\n    }","title":"Add Quotes to Convert JSON to POJO","body":"<p>This works for me:</p>\n\n<pre><code>public class addQuotes{\n    String dir = \"enter file location here\";\n    File quotes = new File(dir);\n\nprivate String readFile(){\n    String q = \"\";\n\n    try(FileInputStream fin = new FileInputStream(dir)){\n        int s = (int) quotes.length();\n        byte[] r = new byte[s];\n        fin.read(r);\n        q = new String(r);\n\n    }catch(Exception e){\n        e.printStackTrace();\n    }\n    return q;\n}\n\nprivate void writeFile(FileOutputStream fos, String output) throws IOException{\n    byte[] data = output.getBytes();\n    fos.write(data);\n}\n\npublic addQuotes() {\n    String add = readFile().replaceAll(\"(\\\\w+)\", \"\\\"$1\\\"\");\n    try{\n        FileOutputStream fos =  new FileOutputStream(dir);\n        writeFile(fos, add);\n    }catch(Exception e){\n        e.printStackTrace();\n    }\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19299519,"reputation":11,"user_id":14107781,"display_name":"Gaurav Panchal"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701154065,"creation_date":1681235686,"answer_id":75988784,"question_id":39338584,"body_markdown":"The accepted solution was not working properly with values that have hyphens and/or spaces.\r\nHere is my take:\r\n\r\n        String json = json.replaceAll(&quot;, &quot;, &quot;,&quot;); // #LC2759 \r\n        int n = json.length(); // leetcode 2759\r\n        StringBuilder result = new StringBuilder();\r\n        for(int i=0; i&lt;n; i++){\r\n            char c = json.charAt(i);\r\n            if(c == &#39;:&#39;){\r\n                // add closing quote for key; \r\n                result.append(&quot;\\&quot;:&quot;);\r\n                if(json.charAt(i+1) != &#39;{&#39; &amp;&amp; json.charAt(i+1) != &#39;[&#39;)// add opening quote for value \r\n                    result.append(&quot;\\&quot;&quot;);\r\n                if(json.charAt(i+1) == &#39;}&#39; || json.charAt(i+1) == &#39;]&#39; || json.charAt(i+1) == &#39;,&#39;)// value empty\r\n                    result.append(&quot;\\&quot;&quot;);\r\n                continue;\r\n            }\r\n            \r\n            if(c == &#39;{&#39; || c == &#39;[&#39; &amp;&amp; (json.charAt(i+1) != &#39;{&#39; &amp;&amp; json.charAt(i+1) != &#39;[&#39;)){\r\n                // add opening bracket and then opening quote for key\r\n                result.append(c); \r\n                result.append(&quot;\\&quot;&quot;);\r\n            }\r\n            else if(i &lt; n-1 &amp;&amp; (json.charAt(i+1) == &#39;,&#39; || json.charAt(i+1) == &#39;]&#39; || json.charAt(i+1) == &#39;}&#39;) &amp;&amp; c != &#39;]&#39; &amp;&amp; c != &#39;}&#39;){\r\n                // add closing quote for value\r\n                result.append(c); \r\n                result.append(&quot;\\&quot;&quot;);\r\n            }\r\n            else if(c == &#39;,&#39; &amp;&amp; json.charAt(i+1) != &#39;{&#39; &amp;&amp; json.charAt(i+1) != &#39;[&#39;)\r\n                result.append(&quot;,\\&quot;&quot;);\r\n            else result.append(c); \r\n            \r\n            \r\n        }","title":"Add Quotes to Convert JSON to POJO","body":"<p>The accepted solution was not working properly with values that have hyphens and/or spaces.\nHere is my take:</p>\n<pre><code>    String json = json.replaceAll(&quot;, &quot;, &quot;,&quot;); // #LC2759 \n    int n = json.length(); // leetcode 2759\n    StringBuilder result = new StringBuilder();\n    for(int i=0; i&lt;n; i++){\n        char c = json.charAt(i);\n        if(c == ':'){\n            // add closing quote for key; \n            result.append(&quot;\\&quot;:&quot;);\n            if(json.charAt(i+1) != '{' &amp;&amp; json.charAt(i+1) != '[')// add opening quote for value \n                result.append(&quot;\\&quot;&quot;);\n            if(json.charAt(i+1) == '}' || json.charAt(i+1) == ']' || json.charAt(i+1) == ',')// value empty\n                result.append(&quot;\\&quot;&quot;);\n            continue;\n        }\n        \n        if(c == '{' || c == '[' &amp;&amp; (json.charAt(i+1) != '{' &amp;&amp; json.charAt(i+1) != '[')){\n            // add opening bracket and then opening quote for key\n            result.append(c); \n            result.append(&quot;\\&quot;&quot;);\n        }\n        else if(i &lt; n-1 &amp;&amp; (json.charAt(i+1) == ',' || json.charAt(i+1) == ']' || json.charAt(i+1) == '}') &amp;&amp; c != ']' &amp;&amp; c != '}'){\n            // add closing quote for value\n            result.append(c); \n            result.append(&quot;\\&quot;&quot;);\n        }\n        else if(c == ',' &amp;&amp; json.charAt(i+1) != '{' &amp;&amp; json.charAt(i+1) != '[')\n            result.append(&quot;,\\&quot;&quot;);\n        else result.append(c); \n        \n        \n    }\n</code></pre>\n"}],"owner":{"account_id":6811494,"reputation":3292,"user_id":5241486,"accept_rate":62,"display_name":"tccpg288"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":88,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":39338911,"answer_count":2,"score":1,"last_activity_date":1701154065,"creation_date":1473116371,"question_id":39338584,"body_markdown":"I wanted to use http://www.jsonschema2pojo.org/ to convert my JSON response to Java, however the JSON I am viewing does not have quotes, therefore I cannot use this site. Any ideas on how I can generate the JSON with quotes to take advantage of this site?","title":"Add Quotes to Convert JSON to POJO","body":"<p>I wanted to use <a href=\"http://www.jsonschema2pojo.org/\" rel=\"nofollow\">http://www.jsonschema2pojo.org/</a> to convert my JSON response to Java, however the JSON I am viewing does not have quotes, therefore I cannot use this site. Any ideas on how I can generate the JSON with quotes to take advantage of this site?</p>\n"},{"tags":["java","android"],"answers":[{"tags":[],"owner":{"account_id":29149657,"reputation":89,"user_id":22330780,"display_name":"Laser"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701153702,"creation_date":1701153702,"answer_id":77561796,"question_id":77560469,"body_markdown":"If you need a darker blue shade and want to save that color in your project. You can simply do it by getting a hex code or by opening a color picker in color folder present in the resources. you can also name it and use it programmatically.\r\n\r\nI have attached image for reference.\r\n[![color picker][1]][1]\r\n\r\n\r\n[![color folder in values][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/8waaA.png\r\n  [2]: https://i.stack.imgur.com/qVqtc.png\r\n\r\nThen you can use it like this in your activity or fragment.\r\n\r\n```\r\n    ResoureCompat.getColor(getResources(),R.color.your_color,null)\r\n```\r\nI hope this helps.","title":"Change the color of a list of buttons and save it","body":"<p>If you need a darker blue shade and want to save that color in your project. You can simply do it by getting a hex code or by opening a color picker in color folder present in the resources. you can also name it and use it programmatically.</p>\n<p>I have attached image for reference.\n<a href=\"https://i.stack.imgur.com/8waaA.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8waaA.png\" alt=\"color picker\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/qVqtc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qVqtc.png\" alt=\"color folder in values\" /></a></p>\n<p>Then you can use it like this in your activity or fragment.</p>\n<pre><code>    ResoureCompat.getColor(getResources(),R.color.your_color,null)\n</code></pre>\n<p>I hope this helps.</p>\n"}],"owner":{"account_id":29766976,"reputation":1,"user_id":22813126,"display_name":"andrellima"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1701153702,"creation_date":1701126708,"question_id":77560469,"body_markdown":"I&#39;m trying to implement a dual n back kind of game. So I have a list of buttons and then they will change the color randomly with the time(I intend to make it a darker blue). I wonder how to do it and how to save this state so I can compare the current darkened button with the previous ones. Here is my code as I&#39;m already implementing the audio part of it:\r\n```java\r\npackage com.example.dual;\r\nimport android.graphics.Color;\r\nimport android.os.Handler;\r\nimport android.app.Activity;\r\nimport android.os.Bundle;\r\nimport android.speech.tts.TextToSpeech;\r\nimport android.widget.Button;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport java.io.LineNumberInputStream;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\nimport java.util.Locale;\r\nimport java.util.Random;\r\n\r\npublic class Dual extends Activity implements Runnable {\r\n    int clicksVisaoCorretos = 0;\r\n    int clicksAudicaoCorretos = 0;\r\n    int clicksVisaoOmitidos = 0;\r\n    int clicksAudicaoOmitidos = 0;\r\n    int clicksVisaoIncorretos = 0;\r\n    int clicksAUdicaoIncorretos = 0;\r\n    int nivel = 1;\r\n    List&lt;Button&gt; listaBotoes = new ArrayList&lt;Button&gt;();\r\n\r\n    String letras[] = {&quot;P&quot;, &quot;Q&quot;,&quot;R&quot;,&quot;T&quot;,&quot;X&quot;,&quot;Z&quot;,&quot;S&quot;,&quot;Y&quot;,&quot;U&quot;};\r\n    Random aleatorio = new Random();\r\n    Button botaoPrimeiro;\r\n    Button botaoSegundo;\r\n    Button botaoTerceiro;\r\n    Button botaoQuarto;\r\n    Button botaoQuinto;\r\n    Button botaoSexto;\r\n    Button botaoSetimo;\r\n    Button botaoOitavo;\r\n\r\n    private TextToSpeech letrasFaladas;\r\n\r\n    protected void onCreate(Bundle b) {\r\n        super.onCreate(b);\r\n        setContentView(R.layout.activity_dual);\r\n        botaoPrimeiro =(Button) findViewById(R.id.botaoUm);\r\n        botaoSegundo =(Button) findViewById(R.id.botaoDois);\r\n        botaoTerceiro = (Button) findViewById(R.id.botaoTres);\r\n        botaoQuarto = (Button) findViewById(R.id.botaoQuatro);\r\n        botaoQuinto = (Button) findViewById(R.id.botaoCinco);\r\n        botaoSexto = (Button) findViewById(R.id.botaoSeis);\r\n        botaoSetimo = (Button) findViewById(R.id.botaoSete);\r\n        botaoOitavo = (Button) findViewById(R.id.botaoOito);\r\n        listaBotoes.add(botaoPrimeiro);\r\n        listaBotoes.add(botaoSegundo);\r\n        listaBotoes.add(botaoTerceiro);\r\n        listaBotoes.add(botaoQuarto);\r\n        listaBotoes.add(botaoQuinto);\r\n        listaBotoes.add(botaoSexto);\r\n        listaBotoes.add(botaoSetimo);\r\n        listaBotoes.add(botaoOitavo);\r\n        botaoPrimeiro.setBackgroundColor(Color.BLUE);\r\n        botaoSegundo.setBackgroundColor(Color.BLUE);\r\n        botaoTerceiro.setBackgroundColor(Color.BLUE);\r\n        botaoQuarto.setBackgroundColor(Color.BLUE);\r\n        botaoQuinto.setBackgroundColor(Color.BLUE);\r\n        botaoSexto.setBackgroundColor(Color.BLUE);\r\n        botaoSetimo.setBackgroundColor(Color.BLUE);\r\n        botaoOitavo.setBackgroundColor(Color.BLUE);\r\n        Handler h = new Handler();\r\n        h.postDelayed(this, 3000);\r\n    }\r\n\r\n    @Override\r\n    public void run() {\r\n        String letraAleatoria = (letras[aleatorio.nextInt(letras.length)]);\r\n        for (int x = 0; x &lt;= 12; x++) {\r\n\r\n            letrasFaladas = new TextToSpeech(Dual.this, new TextToSpeech.OnInitListener() {\r\n                @Override\r\n                public void onInit(int i) {\r\n                    if (i == TextToSpeech.SUCCESS) {\r\n                        letrasFaladas.speak(letraAleatoria, TextToSpeech.QUEUE_FLUSH, null);\r\n                        letrasFaladas.setLanguage(new Locale(&quot;pt&quot;, &quot;BR&quot;));\r\n                    }\r\n                }\r\n\r\n            });\r\n        }\r\n\r\n    }\r\n}\r\n```\r\n","title":"Change the color of a list of buttons and save it","body":"<p>I'm trying to implement a dual n back kind of game. So I have a list of buttons and then they will change the color randomly with the time(I intend to make it a darker blue). I wonder how to do it and how to save this state so I can compare the current darkened button with the previous ones. Here is my code as I'm already implementing the audio part of it:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example.dual;\nimport android.graphics.Color;\nimport android.os.Handler;\nimport android.app.Activity;\nimport android.os.Bundle;\nimport android.speech.tts.TextToSpeech;\nimport android.widget.Button;\n\nimport androidx.appcompat.app.AppCompatActivity;\n\nimport java.io.LineNumberInputStream;\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.Locale;\nimport java.util.Random;\n\npublic class Dual extends Activity implements Runnable {\n    int clicksVisaoCorretos = 0;\n    int clicksAudicaoCorretos = 0;\n    int clicksVisaoOmitidos = 0;\n    int clicksAudicaoOmitidos = 0;\n    int clicksVisaoIncorretos = 0;\n    int clicksAUdicaoIncorretos = 0;\n    int nivel = 1;\n    List&lt;Button&gt; listaBotoes = new ArrayList&lt;Button&gt;();\n\n    String letras[] = {&quot;P&quot;, &quot;Q&quot;,&quot;R&quot;,&quot;T&quot;,&quot;X&quot;,&quot;Z&quot;,&quot;S&quot;,&quot;Y&quot;,&quot;U&quot;};\n    Random aleatorio = new Random();\n    Button botaoPrimeiro;\n    Button botaoSegundo;\n    Button botaoTerceiro;\n    Button botaoQuarto;\n    Button botaoQuinto;\n    Button botaoSexto;\n    Button botaoSetimo;\n    Button botaoOitavo;\n\n    private TextToSpeech letrasFaladas;\n\n    protected void onCreate(Bundle b) {\n        super.onCreate(b);\n        setContentView(R.layout.activity_dual);\n        botaoPrimeiro =(Button) findViewById(R.id.botaoUm);\n        botaoSegundo =(Button) findViewById(R.id.botaoDois);\n        botaoTerceiro = (Button) findViewById(R.id.botaoTres);\n        botaoQuarto = (Button) findViewById(R.id.botaoQuatro);\n        botaoQuinto = (Button) findViewById(R.id.botaoCinco);\n        botaoSexto = (Button) findViewById(R.id.botaoSeis);\n        botaoSetimo = (Button) findViewById(R.id.botaoSete);\n        botaoOitavo = (Button) findViewById(R.id.botaoOito);\n        listaBotoes.add(botaoPrimeiro);\n        listaBotoes.add(botaoSegundo);\n        listaBotoes.add(botaoTerceiro);\n        listaBotoes.add(botaoQuarto);\n        listaBotoes.add(botaoQuinto);\n        listaBotoes.add(botaoSexto);\n        listaBotoes.add(botaoSetimo);\n        listaBotoes.add(botaoOitavo);\n        botaoPrimeiro.setBackgroundColor(Color.BLUE);\n        botaoSegundo.setBackgroundColor(Color.BLUE);\n        botaoTerceiro.setBackgroundColor(Color.BLUE);\n        botaoQuarto.setBackgroundColor(Color.BLUE);\n        botaoQuinto.setBackgroundColor(Color.BLUE);\n        botaoSexto.setBackgroundColor(Color.BLUE);\n        botaoSetimo.setBackgroundColor(Color.BLUE);\n        botaoOitavo.setBackgroundColor(Color.BLUE);\n        Handler h = new Handler();\n        h.postDelayed(this, 3000);\n    }\n\n    @Override\n    public void run() {\n        String letraAleatoria = (letras[aleatorio.nextInt(letras.length)]);\n        for (int x = 0; x &lt;= 12; x++) {\n\n            letrasFaladas = new TextToSpeech(Dual.this, new TextToSpeech.OnInitListener() {\n                @Override\n                public void onInit(int i) {\n                    if (i == TextToSpeech.SUCCESS) {\n                        letrasFaladas.speak(letraAleatoria, TextToSpeech.QUEUE_FLUSH, null);\n                        letrasFaladas.setLanguage(new Locale(&quot;pt&quot;, &quot;BR&quot;));\n                    }\n                }\n\n            });\n        }\n\n    }\n}\n</code></pre>\n"},{"tags":["java","android","onclick","android-animation"],"owner":{"account_id":17183107,"reputation":245,"user_id":12438238,"display_name":"Vasant Raval"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1701153674,"creation_date":1701153345,"question_id":77561777,"body_markdown":"i was thinking to animate a button , i want to simulate a big push button like [this][1] one\r\n\r\ni have the image of the button , i want to animate the press down animation and the shadow effect \r\n\r\ni have done the push down animation with this \r\n\r\n    Animation animation = AnimationUtils.loadAnimation(getApplicationContext(), R.anim.button_click_anim);\r\n    \r\n    public void onClick(View v){ v.startAnimation(animation);}\r\n\r\n\r\nand in the `anim` directory i have button_click_anim\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;set xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;\r\n        &lt;scale\r\n            android:fromXScale=&quot;1.0&quot;\r\n            android:fromYScale=&quot;1.0&quot;\r\n            android:toXScale=&quot;0.9&quot;\r\n            android:toYScale=&quot;0.9&quot;\r\n            android:duration=&quot;100&quot;\r\n            android:pivotX=&quot;50%&quot;\r\n            android:pivotY=&quot;50%&quot; /&gt;\r\n        &lt;scale\r\n            android:fromXScale=&quot;0.9&quot;\r\n            android:fromYScale=&quot;0.9&quot;\r\n            android:toXScale=&quot;1.0&quot;\r\n            android:toYScale=&quot;1.0&quot;\r\n            android:duration=&quot;100&quot;\r\n            android:startOffset=&quot;100&quot;\r\n            android:pivotX=&quot;50%&quot;\r\n            android:pivotY=&quot;50%&quot; /&gt;\r\n    &lt;/set&gt;\r\n\r\n\r\n  [1]: http://make-everything-ok.com/","title":"How to make a push button animation?","body":"<p>i was thinking to animate a button , i want to simulate a big push button like <a href=\"http://make-everything-ok.com/\" rel=\"nofollow noreferrer\">this</a> one</p>\n<p>i have the image of the button , i want to animate the press down animation and the shadow effect</p>\n<p>i have done the push down animation with this</p>\n<pre><code>Animation animation = AnimationUtils.loadAnimation(getApplicationContext(), R.anim.button_click_anim);\n\npublic void onClick(View v){ v.startAnimation(animation);}\n</code></pre>\n<p>and in the <code>anim</code> directory i have button_click_anim</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;set xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;\n    &lt;scale\n        android:fromXScale=&quot;1.0&quot;\n        android:fromYScale=&quot;1.0&quot;\n        android:toXScale=&quot;0.9&quot;\n        android:toYScale=&quot;0.9&quot;\n        android:duration=&quot;100&quot;\n        android:pivotX=&quot;50%&quot;\n        android:pivotY=&quot;50%&quot; /&gt;\n    &lt;scale\n        android:fromXScale=&quot;0.9&quot;\n        android:fromYScale=&quot;0.9&quot;\n        android:toXScale=&quot;1.0&quot;\n        android:toYScale=&quot;1.0&quot;\n        android:duration=&quot;100&quot;\n        android:startOffset=&quot;100&quot;\n        android:pivotX=&quot;50%&quot;\n        android:pivotY=&quot;50%&quot; /&gt;\n&lt;/set&gt;\n</code></pre>\n"},{"tags":["java","tomcat","apache-spark","apache-spark-sql"],"comments":[{"owner":{"account_id":2882984,"reputation":1522,"user_id":2473417,"display_name":"Igor Berman"},"score":0,"creation_date":1457723858,"post_id":35778653,"comment_id":59552868,"body_markdown":"can you post how you submit your application? what master? and do you use speculation by any chance?","body":"can you post how you submit your application? what master? and do you use speculation by any chance?"}],"answers":[{"tags":[],"owner":{"account_id":1053202,"reputation":59956,"user_id":1056563,"accept_rate":90,"display_name":"WestCoastProjects"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1457028578,"creation_date":1457028578,"answer_id":35779764,"question_id":35778653,"body_markdown":"I suggest to try changing to `777` temporarily .  See if it works at that point. There have been bugs/issues wrt  permissions on local file system.  If that still does not work let us know if anything changed or precisely same result.","title":"Spark saveAsTextFile() results in Mkdirs failed to create for half of the directory","body":"<p>I suggest to try changing to <code>777</code> temporarily .  See if it works at that point. There have been bugs/issues wrt  permissions on local file system.  If that still does not work let us know if anything changed or precisely same result.</p>\n"},{"tags":[],"owner":{"account_id":7967764,"reputation":31,"user_id":6013511,"display_name":"dagbj"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1457594687,"creation_date":1457594687,"answer_id":35910097,"question_id":35778653,"body_markdown":"Could it be `selinux/apparmor` that plays you a trick? Check with `ls -Z` and system logs.","title":"Spark saveAsTextFile() results in Mkdirs failed to create for half of the directory","body":"<p>Could it be <code>selinux/apparmor</code> that plays you a trick? Check with <code>ls -Z</code> and system logs.</p>\n"},{"tags":[],"owner":{"account_id":1657795,"reputation":2619,"user_id":2771718,"display_name":"Piotr Kołaczkowski"},"down_vote_count":0,"up_vote_count":20,"is_accepted":true,"score":20,"last_activity_date":1457958093,"creation_date":1457958093,"answer_id":35987436,"question_id":35778653,"body_markdown":"`saveAsTextFile` is really processed by Spark executors. Depending on your Spark setup, Spark executors may run as a *different user* than your Spark application driver. I guess the spark application driver prepares the directory for the job fine, but then the executors running as a different user have no rights to write in that directory. \r\n\r\nChanging to 777 won&#39;t help, because permissions are not inherited by child dirs, so you&#39;d get 755 anyways. \r\n\r\nTry running your Spark application as the same user that runs your Spark.","title":"Spark saveAsTextFile() results in Mkdirs failed to create for half of the directory","body":"<p><code>saveAsTextFile</code> is really processed by Spark executors. Depending on your Spark setup, Spark executors may run as a <em>different user</em> than your Spark application driver. I guess the spark application driver prepares the directory for the job fine, but then the executors running as a different user have no rights to write in that directory. </p>\n\n<p>Changing to 777 won't help, because permissions are not inherited by child dirs, so you'd get 755 anyways. </p>\n\n<p>Try running your Spark application as the same user that runs your Spark.</p>\n"},{"tags":[],"owner":{"account_id":11968020,"reputation":9,"user_id":8757156,"display_name":"Pim Witlox"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1512122728,"creation_date":1512122728,"answer_id":47590950,"question_id":35778653,"body_markdown":"So, I&#39;ve been experiencing the same issue, with my setup there is no HDFS and Spark is running in stand-alone mode. I haven&#39;t been able to save spark dataframes to an NFS share using the native Spark methods. The process runs as a local user, and I try to write to the users home folder. Even when creating a subfolder with 777 I cannot write to the folder. \r\n\r\nThe workaround for this is to convert the dataframe with `toPandas()` and after that `to_csv()`. This magically works.","title":"Spark saveAsTextFile() results in Mkdirs failed to create for half of the directory","body":"<p>So, I've been experiencing the same issue, with my setup there is no HDFS and Spark is running in stand-alone mode. I haven't been able to save spark dataframes to an NFS share using the native Spark methods. The process runs as a local user, and I try to write to the users home folder. Even when creating a subfolder with 777 I cannot write to the folder. </p>\n\n<p>The workaround for this is to convert the dataframe with <code>toPandas()</code> and after that <code>to_csv()</code>. This magically works.</p>\n"},{"tags":[],"owner":{"account_id":8825480,"reputation":81,"user_id":6593872,"display_name":"Gajendra Chavan"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1596599947,"creation_date":1529169706,"answer_id":50890085,"question_id":35778653,"body_markdown":"I also had the same problem, and my issue has been resolved by using full HDFS path:\r\n\r\n**Error**\r\n\r\n&gt; Caused by: java.io.IOException: Mkdirs failed to create file:/QA/Gajendra/SparkAutomation/Source/_temporary/0/_temporary/attempt_20180616221100_0002_m_000000_0 (exists=false, cwd=file:/home/gajendra/LiClipse Workspace/SpakAggAutomation)\r\n\r\n\r\n**Solution** \r\n\r\nUse full HDFS path with `hdfs://localhost:54310/&lt;filePath&gt;`\r\n\r\n\r\n&gt; hdfs://localhost:54310/QA/Gajendra/SparkAutomation \r\n\r\n\r\n","title":"Spark saveAsTextFile() results in Mkdirs failed to create for half of the directory","body":"<p>I also had the same problem, and my issue has been resolved by using full HDFS path:</p>\n<p><strong>Error</strong></p>\n<blockquote>\n<p>Caused by: java.io.IOException: Mkdirs failed to create file:/QA/Gajendra/SparkAutomation/Source/_temporary/0/_temporary/attempt_20180616221100_0002_m_000000_0 (exists=false, cwd=file:/home/gajendra/LiClipse Workspace/SpakAggAutomation)</p>\n</blockquote>\n<p><strong>Solution</strong></p>\n<p>Use full HDFS path with <code>hdfs://localhost:54310/&lt;filePath&gt;</code></p>\n<blockquote>\n<p>hdfs://localhost:54310/QA/Gajendra/SparkAutomation</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":7186584,"reputation":229,"user_id":5488345,"display_name":"Gravity"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1539159796,"creation_date":1539159796,"answer_id":52735740,"question_id":35778653,"body_markdown":"I have the same issue as yours.\r\n\r\nI also did not want to write to hdfs but to a local memory share.\r\n\r\nAfter some research, I found that for my case the reason is: there are several nodes executing, however,  some of the nodes has no access to the directory where you want to write your data.\r\n\r\nThus the solution is to make the directory available to all nodes, and then it works~","title":"Spark saveAsTextFile() results in Mkdirs failed to create for half of the directory","body":"<p>I have the same issue as yours.</p>\n\n<p>I also did not want to write to hdfs but to a local memory share.</p>\n\n<p>After some research, I found that for my case the reason is: there are several nodes executing, however,  some of the nodes has no access to the directory where you want to write your data.</p>\n\n<p>Thus the solution is to make the directory available to all nodes, and then it works~</p>\n"},{"tags":[],"owner":{"account_id":168435,"reputation":953,"user_id":393896,"accept_rate":40,"display_name":"Ladislav Zitka"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1559323752,"creation_date":1559320318,"answer_id":56398760,"question_id":35778653,"body_markdown":"this is tricky one, but simple to solve. One must configure job.local.dir variable to point to working directory. Following code works fine with writing CSV file:\r\n\r\n\r\n    def xmlConvert(spark):\r\n        etl_time = time.time()\r\n        df = spark.read.format(&#39;com.databricks.spark.xml&#39;).options(rowTag=&#39;HistoricalTextData&#39;).load(\r\n            &#39;/home/zangetsu/proj/prometheus-core/demo/demo-1-iot-predictive-maintainance/dataset/train/&#39;)\r\n        df = df.withColumn(&quot;TimeStamp&quot;, df[&quot;TimeStamp&quot;].cast(&quot;timestamp&quot;)).groupBy(&quot;TimeStamp&quot;).pivot(&quot;TagName&quot;).sum(\r\n            &quot;TagValue&quot;).na.fill(0)\r\n        df.repartition(1).write.csv(\r\n            path=&quot;/home/zangetsu/proj/prometheus-core/demo/demo-1-iot-predictive-maintainance/result/&quot;,\r\n            mode=&quot;overwrite&quot;,\r\n            header=True,\r\n            sep=&quot;,&quot;)\r\n        print(&quot;Time taken to do xml transformation: --- %s seconds ---&quot; % (time.time() - etl_time))\r\n    \r\n    \r\n    if __name__ == &#39;__main__&#39;:\r\n        spark = SparkSession \\\r\n            .builder \\\r\n            .appName(&#39;XML ETL&#39;) \\\r\n            .master(&quot;local[*]&quot;) \\\r\n            .config(&#39;job.local.dir&#39;, &#39;/home/zangetsu/proj/prometheus-core/demo/demo-1-iot-predictive-maintainance&#39;) \\\r\n            .config(&#39;spark.driver.memory&#39;,&#39;64g&#39;) \\\r\n            .config(&#39;spark.debug.maxToStringFields&#39;,&#39;200&#39;) \\\r\n            .config(&#39;spark.jars.packages&#39;, &#39;com.databricks:spark-xml_2.11:0.5.0&#39;) \\\r\n            .getOrCreate()\r\n    \r\n        print(&#39;Session created&#39;)\r\n    \r\n        try:\r\n            xmlConvert(spark)\r\n    \r\n        finally:\r\n            spark.stop()\r\n\r\n\r\n","title":"Spark saveAsTextFile() results in Mkdirs failed to create for half of the directory","body":"<p>this is tricky one, but simple to solve. One must configure job.local.dir variable to point to working directory. Following code works fine with writing CSV file:</p>\n\n<pre><code>def xmlConvert(spark):\n    etl_time = time.time()\n    df = spark.read.format('com.databricks.spark.xml').options(rowTag='HistoricalTextData').load(\n        '/home/zangetsu/proj/prometheus-core/demo/demo-1-iot-predictive-maintainance/dataset/train/')\n    df = df.withColumn(\"TimeStamp\", df[\"TimeStamp\"].cast(\"timestamp\")).groupBy(\"TimeStamp\").pivot(\"TagName\").sum(\n        \"TagValue\").na.fill(0)\n    df.repartition(1).write.csv(\n        path=\"/home/zangetsu/proj/prometheus-core/demo/demo-1-iot-predictive-maintainance/result/\",\n        mode=\"overwrite\",\n        header=True,\n        sep=\",\")\n    print(\"Time taken to do xml transformation: --- %s seconds ---\" % (time.time() - etl_time))\n\n\nif __name__ == '__main__':\n    spark = SparkSession \\\n        .builder \\\n        .appName('XML ETL') \\\n        .master(\"local[*]\") \\\n        .config('job.local.dir', '/home/zangetsu/proj/prometheus-core/demo/demo-1-iot-predictive-maintainance') \\\n        .config('spark.driver.memory','64g') \\\n        .config('spark.debug.maxToStringFields','200') \\\n        .config('spark.jars.packages', 'com.databricks:spark-xml_2.11:0.5.0') \\\n        .getOrCreate()\n\n    print('Session created')\n\n    try:\n        xmlConvert(spark)\n\n    finally:\n        spark.stop()\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5849308,"reputation":887,"user_id":4608441,"display_name":"swapnil shashank"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1617781275,"creation_date":1617781275,"answer_id":66981587,"question_id":35778653,"body_markdown":"We need to run the application in local mode.\r\n\r\n     val spark = SparkSession\r\n          .builder()\r\n          .config(&quot;spark.master&quot;, &quot;local&quot;)\r\n          .appName(&quot;applicationName&quot;)\r\n          .getOrCreate()","title":"Spark saveAsTextFile() results in Mkdirs failed to create for half of the directory","body":"<p>We need to run the application in local mode.</p>\n<pre><code> val spark = SparkSession\n      .builder()\n      .config(&quot;spark.master&quot;, &quot;local&quot;)\n      .appName(&quot;applicationName&quot;)\n      .getOrCreate()\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11978459,"reputation":155,"user_id":8810439,"display_name":"codergirrl"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1651178640,"creation_date":1651178640,"answer_id":72050015,"question_id":35778653,"body_markdown":"Giving the full path works for me.\r\nExample:\r\n   \r\n\r\n     file:/Users/yourname/Documents/electric-chargepoint-2017-data\r\n\r\n","title":"Spark saveAsTextFile() results in Mkdirs failed to create for half of the directory","body":"<p>Giving the full path works for me.\nExample:</p>\n<pre><code> file:/Users/yourname/Documents/electric-chargepoint-2017-data\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14599631,"reputation":63,"user_id":10544237,"display_name":"narayana kandukuri"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681408939,"creation_date":1681408939,"answer_id":76008535,"question_id":35778653,"body_markdown":"If the transformed data fits into master node memory, convert pyspark dataframe to pandas dataframe and then save the pandas dataframe to file.\r\n","title":"Spark saveAsTextFile() results in Mkdirs failed to create for half of the directory","body":"<p>If the transformed data fits into master node memory, convert pyspark dataframe to pandas dataframe and then save the pandas dataframe to file.</p>\n"},{"tags":[],"owner":{"account_id":17505022,"reputation":190,"user_id":12694449,"display_name":"Jerrold110"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701153548,"creation_date":1701153548,"answer_id":77561789,"question_id":35778653,"body_markdown":"A solution that works for small files can be to convert the pyspark dataframe into a `Pandas` dataframe and then export it as a csv `df.toPandas.to_csv(myDf.csv)`, but this is not feasible because of memory limitations and performance overhead of pandas dataframes.","title":"Spark saveAsTextFile() results in Mkdirs failed to create for half of the directory","body":"<p>A solution that works for small files can be to convert the pyspark dataframe into a <code>Pandas</code> dataframe and then export it as a csv <code>df.toPandas.to_csv(myDf.csv)</code>, but this is not feasible because of memory limitations and performance overhead of pandas dataframes.</p>\n"}],"owner":{"account_id":1097644,"reputation":652,"user_id":1090887,"accept_rate":74,"display_name":"rotsner"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":18915,"favorite_count":0,"down_vote_count":0,"up_vote_count":13,"accepted_answer_id":35987436,"answer_count":11,"score":13,"last_activity_date":1701153548,"creation_date":1457025212,"question_id":35778653,"body_markdown":"I am currently running a Java Spark Application in tomcat and receiving the following exception:\r\n \r\n    Caused by: java.io.IOException: Mkdirs failed to create file:/opt/folder/tmp/file.json/_temporary/0/_temporary/attempt_201603031703_0001_m_000000_5\r\n\r\non the line\r\n\r\n`text.saveAsTextFile(&quot;/opt/folder/tmp/file.json&quot;) //where text is a JavaRDD&lt;String&gt;` \r\n\r\nThe issue is that /opt/folder/tmp/ already exists and successfully creates up to /opt/folder/tmp/file.json/_temporary/0/ and then it runs into what looks like a permission issue with the remaining part of the path `_temporary/attempt_201603031703_0001_m_000000_5` itself, but I gave the tomcat user permissions (`chown -R tomcat:tomcat tmp/` and `chmod -R 755 tmp/`) to the tmp/ directory. Does anyone know what could be happening?\r\n\r\nThanks\r\n\r\nEdit for @javadba:\r\n\r\n    [root@ip tmp]# ls -lrta \r\n    total 12\r\n    drwxr-xr-x 4 tomcat tomcat 4096 Mar  3 16:44 ..\r\n    drwxr-xr-x 3 tomcat tomcat 4096 Mar  7 20:01 file.json\r\n    drwxrwxrwx 3 tomcat tomcat 4096 Mar  7 20:01 .\r\n    \r\n    [root@ip tmp]# cd file.json/\r\n    [root@ip file.json]# ls -lrta \r\n    total 12\r\n    drwxr-xr-x 3 tomcat tomcat 4096 Mar  7 20:01 _temporary\r\n    drwxrwxrwx 3 tomcat tomcat 4096 Mar  7 20:01 ..\r\n    drwxr-xr-x 3 tomcat tomcat 4096 Mar  7 20:01 .\r\n    \r\n    [root@ip file.json]# cd _temporary/\r\n    [root@ip _temporary]# ls -lrta \r\n    total 12\r\n    drwxr-xr-x 2 tomcat tomcat 4096 Mar  7 20:01 0\r\n    drwxr-xr-x 3 tomcat tomcat 4096 Mar  7 20:01 ..\r\n    drwxr-xr-x 3 tomcat tomcat 4096 Mar  7 20:01 .\r\n    \r\n    [root@ip _temporary]# cd 0/\r\n    [root@ip 0]# ls -lrta \r\n    total 8\r\n    drwxr-xr-x 3 tomcat tomcat 4096 Mar  7 20:01 ..\r\n    drwxr-xr-x 2 tomcat tomcat 4096 Mar  7 20:01 .\r\n\r\nThe exception in catalina.out\r\n\r\n    Caused by: java.io.IOException: Mkdirs failed to create file:/opt/folder/tmp/file.json/_temporary/0/_temporary/attempt_201603072001_0001_m_000000_5\r\n    \tat org.apache.hadoop.fs.ChecksumFileSystem.create(ChecksumFileSystem.java:438)\r\n    \tat org.apache.hadoop.fs.ChecksumFileSystem.create(ChecksumFileSystem.java:424)\r\n    \tat org.apache.hadoop.fs.FileSystem.create(FileSystem.java:906)\r\n    \tat org.apache.hadoop.fs.FileSystem.create(FileSystem.java:799)\r\n    \tat org.apache.hadoop.mapred.TextOutputFormat.getRecordWriter(TextOutputFormat.java:123)\r\n    \tat org.apache.spark.SparkHadoopWriter.open(SparkHadoopWriter.scala:91)\r\n    \tat org.apache.spark.rdd.PairRDDFunctions$$anonfun$saveAsHadoopDataset$1$$anonfun$13.apply(PairRDDFunctions.scala:1193)\r\n    \tat org.apache.spark.rdd.PairRDDFunctions$$anonfun$saveAsHadoopDataset$1$$anonfun$13.apply(PairRDDFunctions.scala:1185)\r\n    \tat org.apache.spark.scheduler.ResultTask.runTask(ResultTask.scala:66)\r\n    \tat org.apache.spark.scheduler.Task.run(Task.scala:89)\r\n    \tat org.apache.spark.executor.Executor$TaskRunner.run(Executor.scala:213)\r\n    \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\r\n    \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\r\n    \t... 1 more","title":"Spark saveAsTextFile() results in Mkdirs failed to create for half of the directory","body":"<p>I am currently running a Java Spark Application in tomcat and receiving the following exception:</p>\n\n<pre><code>Caused by: java.io.IOException: Mkdirs failed to create file:/opt/folder/tmp/file.json/_temporary/0/_temporary/attempt_201603031703_0001_m_000000_5\n</code></pre>\n\n<p>on the line</p>\n\n<p><code>text.saveAsTextFile(\"/opt/folder/tmp/file.json\") //where text is a JavaRDD&lt;String&gt;</code> </p>\n\n<p>The issue is that /opt/folder/tmp/ already exists and successfully creates up to /opt/folder/tmp/file.json/_temporary/0/ and then it runs into what looks like a permission issue with the remaining part of the path <code>_temporary/attempt_201603031703_0001_m_000000_5</code> itself, but I gave the tomcat user permissions (<code>chown -R tomcat:tomcat tmp/</code> and <code>chmod -R 755 tmp/</code>) to the tmp/ directory. Does anyone know what could be happening?</p>\n\n<p>Thanks</p>\n\n<p>Edit for @javadba:</p>\n\n<pre><code>[root@ip tmp]# ls -lrta \ntotal 12\ndrwxr-xr-x 4 tomcat tomcat 4096 Mar  3 16:44 ..\ndrwxr-xr-x 3 tomcat tomcat 4096 Mar  7 20:01 file.json\ndrwxrwxrwx 3 tomcat tomcat 4096 Mar  7 20:01 .\n\n[root@ip tmp]# cd file.json/\n[root@ip file.json]# ls -lrta \ntotal 12\ndrwxr-xr-x 3 tomcat tomcat 4096 Mar  7 20:01 _temporary\ndrwxrwxrwx 3 tomcat tomcat 4096 Mar  7 20:01 ..\ndrwxr-xr-x 3 tomcat tomcat 4096 Mar  7 20:01 .\n\n[root@ip file.json]# cd _temporary/\n[root@ip _temporary]# ls -lrta \ntotal 12\ndrwxr-xr-x 2 tomcat tomcat 4096 Mar  7 20:01 0\ndrwxr-xr-x 3 tomcat tomcat 4096 Mar  7 20:01 ..\ndrwxr-xr-x 3 tomcat tomcat 4096 Mar  7 20:01 .\n\n[root@ip _temporary]# cd 0/\n[root@ip 0]# ls -lrta \ntotal 8\ndrwxr-xr-x 3 tomcat tomcat 4096 Mar  7 20:01 ..\ndrwxr-xr-x 2 tomcat tomcat 4096 Mar  7 20:01 .\n</code></pre>\n\n<p>The exception in catalina.out</p>\n\n<pre><code>Caused by: java.io.IOException: Mkdirs failed to create file:/opt/folder/tmp/file.json/_temporary/0/_temporary/attempt_201603072001_0001_m_000000_5\n    at org.apache.hadoop.fs.ChecksumFileSystem.create(ChecksumFileSystem.java:438)\n    at org.apache.hadoop.fs.ChecksumFileSystem.create(ChecksumFileSystem.java:424)\n    at org.apache.hadoop.fs.FileSystem.create(FileSystem.java:906)\n    at org.apache.hadoop.fs.FileSystem.create(FileSystem.java:799)\n    at org.apache.hadoop.mapred.TextOutputFormat.getRecordWriter(TextOutputFormat.java:123)\n    at org.apache.spark.SparkHadoopWriter.open(SparkHadoopWriter.scala:91)\n    at org.apache.spark.rdd.PairRDDFunctions$$anonfun$saveAsHadoopDataset$1$$anonfun$13.apply(PairRDDFunctions.scala:1193)\n    at org.apache.spark.rdd.PairRDDFunctions$$anonfun$saveAsHadoopDataset$1$$anonfun$13.apply(PairRDDFunctions.scala:1185)\n    at org.apache.spark.scheduler.ResultTask.runTask(ResultTask.scala:66)\n    at org.apache.spark.scheduler.Task.run(Task.scala:89)\n    at org.apache.spark.executor.Executor$TaskRunner.run(Executor.scala:213)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n    ... 1 more\n</code></pre>\n"},{"tags":["java","dependency-injection","jakarta-ee","cdi","jsr299"],"comments":[{"owner":{"account_id":279220,"reputation":2393,"user_id":574263,"accept_rate":44,"display_name":"mjaggard"},"score":7,"creation_date":1515574699,"post_id":3406555,"comment_id":83346869,"body_markdown":"I got the impression that constructor injection was generally preferred to allow dependencies to be `final`. Given that pattern, why is `@PostConstruct` being added to J2EE - they must have seen another use case surely?","body":"I got the impression that constructor injection was generally preferred to allow dependencies to be <code>final</code>. Given that pattern, why is <code>@PostConstruct</code> being added to J2EE - they must have seen another use case surely?"},{"owner":{"account_id":1447743,"reputation":2678,"user_id":1379730,"accept_rate":52,"display_name":"Jason"},"score":0,"creation_date":1624986384,"post_id":3406555,"comment_id":120505072,"body_markdown":"@mjaggard my understanding is that `@PostConstruct` is not used to inject your dependencies appropriately, to make sure they are `final`, etc; it is used as an annotation for a utility that should be called *exactly once* even if the object is constructed multiple times by the IoC container. Not that I know how this would happen in the container, but it apparently can happen (see accepted answer).","body":"@mjaggard my understanding is that <code>@PostConstruct</code> is not used to inject your dependencies appropriately, to make sure they are <code>final</code>, etc; it is used as an annotation for a utility that should be called <i>exactly once</i> even if the object is constructed multiple times by the IoC container. Not that I know how this would happen in the container, but it apparently can happen (see accepted answer)."}],"answers":[{"tags":[],"owner":{"account_id":70258,"reputation":590434,"user_id":203907,"accept_rate":81,"display_name":"Bozho"},"down_vote_count":1,"up_vote_count":567,"is_accepted":true,"score":566,"last_activity_date":1317820840,"creation_date":1280932804,"answer_id":3406631,"question_id":3406555,"body_markdown":"- because when the constructor is called, the bean is not yet initialized - i.e. no dependencies are injected. In the `@PostConstruct` method the bean is fully initialized and you can use the dependencies.\r\n\r\n- because this is the contract that guarantees that this method will be invoked only once in the bean lifecycle. It may happen (though unlikely) that a bean is instantiated multiple times by the container in its internal working, but it guarantees that `@PostConstruct` will be invoked only once.","title":"Why use @PostConstruct?","body":"<ul>\n<li><p>because when the constructor is called, the bean is not yet initialized - i.e. no dependencies are injected. In the <code>@PostConstruct</code> method the bean is fully initialized and you can use the dependencies.</p></li>\n<li><p>because this is the contract that guarantees that this method will be invoked only once in the bean lifecycle. It may happen (though unlikely) that a bean is instantiated multiple times by the container in its internal working, but it guarantees that <code>@PostConstruct</code> will be invoked only once.</p></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":11089,"reputation":400030,"user_id":21234,"accept_rate":91,"display_name":"skaffman"},"down_vote_count":0,"up_vote_count":78,"is_accepted":false,"score":78,"last_activity_date":1280933219,"creation_date":1280933219,"answer_id":3406690,"question_id":3406555,"body_markdown":"If your class performs all of its initialization in the constructor, then `@PostConstruct` is indeed redundant.\r\n\r\nHowever, if your class has its dependencies injected using setter methods, then the class&#39;s constructor cannot fully initialize the object, and sometimes some initialization needs to be performed after all the setter methods have been called, hence the use case of `@PostConstruct`.","title":"Why use @PostConstruct?","body":"<p>If your class performs all of its initialization in the constructor, then <code>@PostConstruct</code> is indeed redundant.</p>\n\n<p>However, if your class has its dependencies injected using setter methods, then the class's constructor cannot fully initialize the object, and sometimes some initialization needs to be performed after all the setter methods have been called, hence the use case of <code>@PostConstruct</code>.</p>\n"},{"tags":[],"owner":{"account_id":105869,"reputation":730,"user_id":282260,"display_name":"struberg"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1318779270,"creation_date":1318779270,"answer_id":7785310,"question_id":3406555,"body_markdown":"Also constructor based initialisation will not work as intended whenever some kind of proxying or remoting is involved. \r\n\r\nThe ct will get called whenever an EJB gets deserialized, and whenever a new proxy gets created for it...","title":"Why use @PostConstruct?","body":"<p>Also constructor based initialisation will not work as intended whenever some kind of proxying or remoting is involved. </p>\n\n<p>The ct will get called whenever an EJB gets deserialized, and whenever a new proxy gets created for it...</p>\n"},{"tags":[],"owner":{"account_id":1820003,"reputation":49625,"user_id":1654265,"accept_rate":93,"display_name":"Andrea Ligios"},"down_vote_count":0,"up_vote_count":146,"is_accepted":false,"score":146,"last_activity_date":1701153497,"creation_date":1417098801,"answer_id":27173035,"question_id":3406555,"body_markdown":"You always should prefer constructor injection, but having that said, if for any reason you have to use field injection, in that case the **main** problem is that: \r\n\r\n&gt; **in a constructor, the injection of the dependencies has not yet occurred**\r\n\r\n---\r\n\r\n**Example**\r\n\r\n    public class Foo {\r\n    \r\n        @Inject\r\n        Logger LOG;\r\n            \r\n        @PostConstruct\r\n        public void fooInit(){\r\n            LOG.info(&quot;This will be printed; LOG has already been injected&quot;);\r\n        }\r\n\r\n        public Foo() {\r\n            LOG.info(&quot;This will NOT be printed, LOG is still null&quot;);\r\n            // NullPointerException will be thrown here\r\n        }\r\n    }\r\n\r\n----\r\n\r\n**Important**\r\n\r\n`@PostConstruct` and `@PreDestroy` **have been completely [removed in Java 11]**(https://jaxenter.com/jdk-11-java-ee-modules-140674.html).\r\n\r\nTo keep using them, you&#39;ll need to add the [javax.annotation-api](https://mvnrepository.com/artifact/javax.annotation/javax.annotation-api/1.3.2) JAR to your dependencies.\r\n\r\n**Maven**\r\n&lt;!-- language: xml --&gt;\r\n\r\n    &lt;!-- https://mvnrepository.com/artifact/javax.annotation/javax.annotation-api --&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;javax.annotation&lt;/groupId&gt;\r\n        &lt;artifactId&gt;javax.annotation-api&lt;/artifactId&gt;\r\n        &lt;version&gt;1.3.2&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n**Gradle**\r\n\r\n&lt;!-- language: groovy --&gt;\r\n\r\n    // https://mvnrepository.com/artifact/javax.annotation/javax.annotation-api\r\n    compile group: &#39;javax.annotation&#39;, name: &#39;javax.annotation-api&#39;, version: &#39;1.3.2&#39;\r\n\r\n","title":"Why use @PostConstruct?","body":"<p>You always should prefer constructor injection, but having that said, if for any reason you have to use field injection, in that case the <strong>main</strong> problem is that:</p>\n<blockquote>\n<p><strong>in a constructor, the injection of the dependencies has not yet occurred</strong></p>\n</blockquote>\n<hr />\n<p><strong>Example</strong></p>\n<pre><code>public class Foo {\n\n    @Inject\n    Logger LOG;\n        \n    @PostConstruct\n    public void fooInit(){\n        LOG.info(&quot;This will be printed; LOG has already been injected&quot;);\n    }\n\n    public Foo() {\n        LOG.info(&quot;This will NOT be printed, LOG is still null&quot;);\n        // NullPointerException will be thrown here\n    }\n}\n</code></pre>\n<hr />\n<p><strong>Important</strong></p>\n<p><code>@PostConstruct</code> and <code>@PreDestroy</code> <strong>have been completely [removed in Java 11]</strong>(<a href=\"https://jaxenter.com/jdk-11-java-ee-modules-140674.html\" rel=\"nofollow noreferrer\">https://jaxenter.com/jdk-11-java-ee-modules-140674.html</a>).</p>\n<p>To keep using them, you'll need to add the <a href=\"https://mvnrepository.com/artifact/javax.annotation/javax.annotation-api/1.3.2\" rel=\"nofollow noreferrer\">javax.annotation-api</a> JAR to your dependencies.</p>\n<p><strong>Maven</strong></p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;!-- https://mvnrepository.com/artifact/javax.annotation/javax.annotation-api --&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;javax.annotation&lt;/groupId&gt;\n    &lt;artifactId&gt;javax.annotation-api&lt;/artifactId&gt;\n    &lt;version&gt;1.3.2&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p><strong>Gradle</strong></p>\n<pre><code>// https://mvnrepository.com/artifact/javax.annotation/javax.annotation-api\ncompile group: 'javax.annotation', name: 'javax.annotation-api', version: '1.3.2'\n</code></pre>\n"}],"owner":{"account_id":146838,"reputation":9497,"user_id":357556,"accept_rate":77,"display_name":"Jan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":352805,"favorite_count":0,"down_vote_count":0,"up_vote_count":418,"accepted_answer_id":3406631,"answer_count":4,"score":418,"last_activity_date":1701153497,"creation_date":1280932366,"question_id":3406555,"body_markdown":"In a managed bean, `@PostConstruct` is called after the regular Java object constructor.\r\n\r\nWhy would I use `@PostConstruct` to initialize by bean, instead of the regular constructor itself?","title":"Why use @PostConstruct?","body":"<p>In a managed bean, <code>@PostConstruct</code> is called after the regular Java object constructor.</p>\n\n<p>Why would I use <code>@PostConstruct</code> to initialize by bean, instead of the regular constructor itself?</p>\n"},{"tags":["java","apache-poi","backend","powerpoint","slide"],"comments":[{"owner":{"account_id":30009274,"reputation":3,"user_id":22997321,"display_name":"Adrian Duran"},"score":0,"creation_date":1701147348,"post_id":77561309,"comment_id":136736126,"body_markdown":"@AxelRichter do you know maybe why I am not able to set the background for slide 0? or should I do it in another way? . Thanks.","body":"@AxelRichter do you know maybe why I am not able to set the background for slide 0? or should I do it in another way? . Thanks."},{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":1,"creation_date":1701148069,"post_id":77561309,"comment_id":136736180,"body_markdown":"Can you [edit] your question and post details of the error you claim to be getting?","body":"Can you <a href=\"https://stackoverflow.com/posts/77561309/edit\">edit</a> your question and post details of the error you claim to be getting?"}],"answers":[{"tags":[],"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1701153450,"creation_date":1701153450,"answer_id":77561783,"question_id":77561309,"body_markdown":"In your code \r\n\r\n    CTBackgroundProperties backgroundProperties = slideShow.getSlides().get(0).getXmlObject().getCSld().addNewBg().addNewBgPr();\r\n\r\nalways adds a new background (`Bg`) to the slide. That&#39;s fine with a new created slide. But an existent slide may have a background setting already. And then, after that code line, it would have two  background settings. That is not allowed.\r\n\r\nSo if the requirement is to change the background setting of an existent slide, then one should at first unset the old background setting before adding a new one.\r\n\r\nIn your case:\r\n\r\n    ...\r\n      if (slideShow.getSlides().get(0).getXmlObject().getCSld().isSetBg()) {\r\n          slideShow.getSlides().get(0).getXmlObject().getCSld().unsetBg();\r\n      }\r\n      CTBackgroundProperties backgroundProperties = slideShow.getSlides().get(0).getXmlObject().getCSld().addNewBg().addNewBgPr();\r\n    ...\r\n\r\n","title":"Set image background to an existing slide apache poi ppt","body":"<p>In your code</p>\n<pre><code>CTBackgroundProperties backgroundProperties = slideShow.getSlides().get(0).getXmlObject().getCSld().addNewBg().addNewBgPr();\n</code></pre>\n<p>always adds a new background (<code>Bg</code>) to the slide. That's fine with a new created slide. But an existent slide may have a background setting already. And then, after that code line, it would have two  background settings. That is not allowed.</p>\n<p>So if the requirement is to change the background setting of an existent slide, then one should at first unset the old background setting before adding a new one.</p>\n<p>In your case:</p>\n<pre><code>...\n  if (slideShow.getSlides().get(0).getXmlObject().getCSld().isSetBg()) {\n      slideShow.getSlides().get(0).getXmlObject().getCSld().unsetBg();\n  }\n  CTBackgroundProperties backgroundProperties = slideShow.getSlides().get(0).getXmlObject().getCSld().addNewBg().addNewBgPr();\n...\n</code></pre>\n"}],"owner":{"account_id":30009274,"reputation":3,"user_id":22997321,"display_name":"Adrian Duran"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77561783,"answer_count":1,"score":0,"last_activity_date":1701153450,"creation_date":1701144790,"question_id":77561309,"body_markdown":"I am trying to set image as a background to an specific slide that already exists (with blank background) and has some components (texts and images), but getting an error when opening the ppt created using apache poi. This is the ppt reference:\r\n\r\n[enter image description here](https://i.stack.imgur.com/77g7W.png)\r\n\r\nMy code was based on another stackoverflow response but getting error\r\n\r\n```java\r\nXMLSlideShow slideShow = new XMLSlideShow(new FileInputStream(&quot;test.pptx&quot;));\r\nbyte[] picData = IOUtils.toByteArray(new FileInputStream(&quot;image.jpg&quot;));\r\nXSLFPictureData pcData = slideShow.getSlides().get(0).getSlideShow().addPicture(picData, PictureData.PictureType.JPEG);\r\nCTBackgroundProperties backgroundProperties = slideShow.getSlides().get(0).getXmlObject().getCSld().addNewBg().addNewBgPr();\r\nCTBlipFillProperties blipFillProperties = backgroundProperties.addNewBlipFill();\r\nCTRelativeRect ctRelativeRect = blipFillProperties.addNewStretch().addNewFillRect();\r\nString idx = slideShow.getSlides().get(0).addRelation(null, XSLFRelation.IMAGES, pcData).getRelationship().getId();\r\nCTBlip blib = blipFillProperties.addNewBlip();\r\nblib.setEmbed(idx);\r\n\r\ntry (FileOutputStream fileOut = new FileOutputStream(&quot;test.pptx&quot;)) {\r\n    slideShow.write(fileOut);\r\n}\r\n```\r\nThanks for your answer.","title":"Set image background to an existing slide apache poi ppt","body":"<p>I am trying to set image as a background to an specific slide that already exists (with blank background) and has some components (texts and images), but getting an error when opening the ppt created using apache poi. This is the ppt reference:</p>\n<p><a href=\"https://i.stack.imgur.com/77g7W.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>My code was based on another stackoverflow response but getting error</p>\n<pre class=\"lang-java prettyprint-override\"><code>XMLSlideShow slideShow = new XMLSlideShow(new FileInputStream(&quot;test.pptx&quot;));\nbyte[] picData = IOUtils.toByteArray(new FileInputStream(&quot;image.jpg&quot;));\nXSLFPictureData pcData = slideShow.getSlides().get(0).getSlideShow().addPicture(picData, PictureData.PictureType.JPEG);\nCTBackgroundProperties backgroundProperties = slideShow.getSlides().get(0).getXmlObject().getCSld().addNewBg().addNewBgPr();\nCTBlipFillProperties blipFillProperties = backgroundProperties.addNewBlipFill();\nCTRelativeRect ctRelativeRect = blipFillProperties.addNewStretch().addNewFillRect();\nString idx = slideShow.getSlides().get(0).addRelation(null, XSLFRelation.IMAGES, pcData).getRelationship().getId();\nCTBlip blib = blipFillProperties.addNewBlip();\nblib.setEmbed(idx);\n\ntry (FileOutputStream fileOut = new FileOutputStream(&quot;test.pptx&quot;)) {\n    slideShow.write(fileOut);\n}\n</code></pre>\n<p>Thanks for your answer.</p>\n"},{"tags":["java","android","flutter","android-studio","jvm"],"answers":[{"tags":[],"owner":{"account_id":3371906,"reputation":278,"user_id":2830945,"display_name":"Maaz Aftab"},"down_vote_count":0,"up_vote_count":11,"is_accepted":true,"score":11,"last_activity_date":1673967660,"creation_date":1673967660,"answer_id":75148333,"question_id":75148332,"body_markdown":"In your zshrc file add.\r\n\r\n```\r\nexport JAVA_HOME=/Applications/Android\\ Studio.app/Contents/jbr/Contents/Home\r\n```\r\n\r\nRestart the android studio. Flutter doctor will give this.\r\n\r\n```\r\nmaazaftab@maazs-MacBook-Pro edge-focus-mobile % flutter doctor\r\nDoctor summary (to see all details, run flutter doctor -v):\r\n[✓] Flutter (Channel beta, 3.7.0-1.2.pre, on macOS 13.0.1 22A400 darwin-arm64, locale en-PK)\r\n[✓] Android toolchain - develop for Android devices (Android SDK version 33.0.1)\r\n[✓] Xcode - develop for iOS and macOS (Xcode 14.1)\r\n[✓] Chrome - develop for the web\r\n[!] Android Studio (version 2022.1)\r\n    ✗ Unable to find bundled Java version.\r\n[✓] IntelliJ IDEA Community Edition (version 2022.3)\r\n[✓] VS Code (version 1.62.3)\r\n[✓] Connected device (2 available)\r\n[✓] HTTP Host Availability\r\n```\r\n\r\nYou can ignore the warning ***✗ Unable to find bundled Java version.*** but the code will compile successfully.\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"Flutter unable to locate Java Runtime after updating Android Studio?","body":"<p>In your zshrc file add.</p>\n<pre><code>export JAVA_HOME=/Applications/Android\\ Studio.app/Contents/jbr/Contents/Home\n</code></pre>\n<p>Restart the android studio. Flutter doctor will give this.</p>\n<pre><code>maazaftab@maazs-MacBook-Pro edge-focus-mobile % flutter doctor\nDoctor summary (to see all details, run flutter doctor -v):\n[✓] Flutter (Channel beta, 3.7.0-1.2.pre, on macOS 13.0.1 22A400 darwin-arm64, locale en-PK)\n[✓] Android toolchain - develop for Android devices (Android SDK version 33.0.1)\n[✓] Xcode - develop for iOS and macOS (Xcode 14.1)\n[✓] Chrome - develop for the web\n[!] Android Studio (version 2022.1)\n    ✗ Unable to find bundled Java version.\n[✓] IntelliJ IDEA Community Edition (version 2022.3)\n[✓] VS Code (version 1.62.3)\n[✓] Connected device (2 available)\n[✓] HTTP Host Availability\n</code></pre>\n<p>You can ignore the warning <em><strong>✗ Unable to find bundled Java version.</strong></em> but the code will compile successfully.</p>\n"},{"tags":[],"owner":{"account_id":12569083,"reputation":1,"user_id":9143818,"display_name":"Oruj"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674109076,"creation_date":1674108242,"answer_id":75168303,"question_id":75148332,"body_markdown":"Open the folder where Android Studio is installed.\r\n\r\nIn most cases, it is &quot;C:\\Program Files\\Android\\Android Studio&quot;\r\n\r\n1. Open the &quot;jbr&quot; folder inside the Android Studio folder (&quot;C:\\Program Files\\Android\\Android Studio\\jbr&quot;), and copy all contents in it.\r\n2. Then go back and create a new folder called &quot;jre&quot; -&gt; &quot;C:\\Program Files\\Android\\Android Studio\\jre&quot;\r\n3. Paste all contents which you copied from &quot;jbr&quot; folder to &quot;jre&quot; folder.\r\n4. Click Start and search for &quot;Environment&quot; and open &quot;Edit the Environment variables&quot; from search result. \r\n5. Click to open &quot;Environment variables&quot;\r\n6. On &quot;User variables&quot; pane click new and add new variable with name &quot;JAVA_HOME&quot; and path &quot;C:\\Program Files\\Android\\Android Studio\\jre&quot;. Click OK to save.\r\n4. Restart Android Studio and run flutter doctor. It will solve the problem.\r\n\r\n[Android Studio folder screenshot][1]\r\n[Environment screenshot][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/cgOgx.png\r\n  [2]: https://i.stack.imgur.com/29hvv.jpg","title":"Flutter unable to locate Java Runtime after updating Android Studio?","body":"<p>Open the folder where Android Studio is installed.</p>\n<p>In most cases, it is &quot;C:\\Program Files\\Android\\Android Studio&quot;</p>\n<ol>\n<li>Open the &quot;jbr&quot; folder inside the Android Studio folder (&quot;C:\\Program Files\\Android\\Android Studio\\jbr&quot;), and copy all contents in it.</li>\n<li>Then go back and create a new folder called &quot;jre&quot; -&gt; &quot;C:\\Program Files\\Android\\Android Studio\\jre&quot;</li>\n<li>Paste all contents which you copied from &quot;jbr&quot; folder to &quot;jre&quot; folder.</li>\n<li>Click Start and search for &quot;Environment&quot; and open &quot;Edit the Environment variables&quot; from search result.</li>\n<li>Click to open &quot;Environment variables&quot;</li>\n<li>On &quot;User variables&quot; pane click new and add new variable with name &quot;JAVA_HOME&quot; and path &quot;C:\\Program Files\\Android\\Android Studio\\jre&quot;. Click OK to save.</li>\n<li>Restart Android Studio and run flutter doctor. It will solve the problem.</li>\n</ol>\n<p><a href=\"https://i.stack.imgur.com/cgOgx.png\" rel=\"nofollow noreferrer\">Android Studio folder screenshot</a>\n<a href=\"https://i.stack.imgur.com/29hvv.jpg\" rel=\"nofollow noreferrer\">Environment screenshot</a></p>\n"},{"tags":[],"owner":{"account_id":28717851,"reputation":31,"user_id":21992124,"display_name":"Veersivaraman S"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1701153260,"creation_date":1700815813,"answer_id":77541812,"question_id":75148332,"body_markdown":"For Mac\r\n\r\n\r\n 1. Go to finder\r\n 2. Locate Android studio and right-click\r\n 3. Click &quot;Show package contents&quot;\r\n 4. Open contents folder\r\n 5. Open &quot;jdk&quot; folder\r\n 6. Copy the contents folder inside of &quot;jdk&quot; folder\r\n 7. Navigate back to root contents folder\r\n 8. Create a folder named &quot;jre&quot; in the same level of &quot;jdk&quot;\r\n 9. And paste contents folder inside of &quot;jre&quot; folder\r\n 10. Run `flutter doctor -v`\r\n\r\nYou are good to go!!!","title":"Flutter unable to locate Java Runtime after updating Android Studio?","body":"<p>For Mac</p>\n<ol>\n<li>Go to finder</li>\n<li>Locate Android studio and right-click</li>\n<li>Click &quot;Show package contents&quot;</li>\n<li>Open contents folder</li>\n<li>Open &quot;jdk&quot; folder</li>\n<li>Copy the contents folder inside of &quot;jdk&quot; folder</li>\n<li>Navigate back to root contents folder</li>\n<li>Create a folder named &quot;jre&quot; in the same level of &quot;jdk&quot;</li>\n<li>And paste contents folder inside of &quot;jre&quot; folder</li>\n<li>Run <code>flutter doctor -v</code></li>\n</ol>\n<p>You are good to go!!!</p>\n"}],"owner":{"account_id":3371906,"reputation":278,"user_id":2830945,"display_name":"Maaz Aftab"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3721,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":75148333,"answer_count":3,"score":4,"last_activity_date":1701153260,"creation_date":1673967660,"question_id":75148332,"body_markdown":"I updated android studio to Electric El, but after updating, it is unable to find Java Runtime.\r\n\r\nFlutter doctor gives this error and the code does not compile.\r\n\r\n```\r\nmaazaftab@maazs-MacBook-Pro edge-focus-mobile % flutter doctor                   \r\nDoctor summary (to see all details, run flutter doctor -v):\r\nThe operation couldn’t be completed. Unable to locate a Java Runtime.\r\nPlease visit http://www.java.com for information on installing Java.\r\nThe operation couldn’t be completed. Unable to locate a Java Runtime.\r\nPlease visit http://www.java.com for information on installing Java.\r\n[✓] Flutter (Channel beta, 3.7.0-1.2.pre, on macOS 13.0.1 22A400 darwin-arm64, locale en-PK)\r\n[!] Android toolchain - develop for Android devices (Android SDK version 31.0.0)\r\n    ✗ Could not determine java version\r\n[✓] Xcode - develop for iOS and macOS (Xcode 14.1)\r\n[✓] Chrome - develop for the web\r\n[!] Android Studio (version 2022.1)\r\n    ✗ Unable to find bundled Java version.\r\n[✓] IntelliJ IDEA Community Edition (version 2022.3)\r\n[✓] VS Code (version 1.62.3)\r\n[✓] Connected device (2 available)\r\n[✓] HTTP Host Availability\r\n\r\n! Doctor found issues in 2 categories.\r\n\r\n```\r\n\r\n\r\n","title":"Flutter unable to locate Java Runtime after updating Android Studio?","body":"<p>I updated android studio to Electric El, but after updating, it is unable to find Java Runtime.</p>\n<p>Flutter doctor gives this error and the code does not compile.</p>\n<pre><code>maazaftab@maazs-MacBook-Pro edge-focus-mobile % flutter doctor                   \nDoctor summary (to see all details, run flutter doctor -v):\nThe operation couldn’t be completed. Unable to locate a Java Runtime.\nPlease visit http://www.java.com for information on installing Java.\nThe operation couldn’t be completed. Unable to locate a Java Runtime.\nPlease visit http://www.java.com for information on installing Java.\n[✓] Flutter (Channel beta, 3.7.0-1.2.pre, on macOS 13.0.1 22A400 darwin-arm64, locale en-PK)\n[!] Android toolchain - develop for Android devices (Android SDK version 31.0.0)\n    ✗ Could not determine java version\n[✓] Xcode - develop for iOS and macOS (Xcode 14.1)\n[✓] Chrome - develop for the web\n[!] Android Studio (version 2022.1)\n    ✗ Unable to find bundled Java version.\n[✓] IntelliJ IDEA Community Edition (version 2022.3)\n[✓] VS Code (version 1.62.3)\n[✓] Connected device (2 available)\n[✓] HTTP Host Availability\n\n! Doctor found issues in 2 categories.\n\n</code></pre>\n"},{"tags":["java","spring","hibernate","spring-mvc"],"comments":[{"owner":{"account_id":301230,"reputation":28997,"user_id":608820,"accept_rate":89,"display_name":"Augusto"},"score":4,"creation_date":1425932264,"post_id":28948614,"comment_id":46155800,"body_markdown":"A Spring transaction manager (when configured properly) can manage hibernate transactions. `@Transactional` is the way to declare transactional methods in `Spring`. So the difference is the same as in a car wheel and a steering wheel, when &quot;configured properly&quot; rotating the steering wheel moves the car wheels ... and both are wheels :).","body":"A Spring transaction manager (when configured properly) can manage hibernate transactions. <code>@Transactional</code> is the way to declare transactional methods in <code>Spring</code>. So the difference is the same as in a car wheel and a steering wheel, when &quot;configured properly&quot; rotating the steering wheel moves the car wheels ... and both are wheels :)."}],"answers":[{"tags":[],"owner":{"account_id":1521409,"reputation":6658,"user_id":1420941,"display_name":"stringy05"},"down_vote_count":0,"up_vote_count":48,"is_accepted":true,"score":48,"last_activity_date":1701152662,"creation_date":1425941726,"answer_id":28953261,"question_id":28948614,"body_markdown":"Well, for starters, they are both Transactions, but they encompass different concepts and components.\r\n\r\n**TL;DR**\r\n\r\nHibernate deals with database specific transactions, whereas spring provides a general transaction management service. `@Transactional` is a nice way of configuring transaction management behaviour.\r\n\r\nThe long story:\r\n\r\n**Transactions**\r\n\r\nTransactions are basically units of work (i.e. changes to something) that are managed as a single operation that can be either committed or rolled back. There are lots of different types of transactions in the Java world - database, messaging systems like JMS, inter-application transactions (for those who are not faint of heart), or anything else that may need to be included in a transaction. In the Java standard, transactions are managed using the [Java Transaction API][1] which sets the rules for how to participate in a transaction.\r\n\r\n**Hibernate**\r\n\r\n[Hibernate][2] is an ORM for abstracting database components to Java objects, so its transactions are specifically related to changes made within a database. A transaction may be made up of one or many writes to various database tables that are all committed once the operation is completed. Rolling back the transaction, e.g. if there are any errors during the operation, allows all the changes to be undone.\r\n\r\n**Spring**\r\n\r\nAt its lowest level, [Spring][3] is an application framework for managing configuration and dependencies between objects. In addition, it also provides an interface for managing higher-level services that are used in modern applications, such as databases, messaging services, MVC frameworks, and transactions. \r\n\r\nSpring is designed to be used as an all-encompassing master of objects and services within your application, so its concept of a transaction is at a higher level than the database specific transactions that hibernate concerns itself with. [Spring Transactions][4] are designed to give you fine grained control of all your transactional resources while abstracting away the often messy coding required to co-ordinate the transactions. \r\n\r\n**`@Transactional`**\r\n \r\nSpring provides a few different methods for using transactions - among others, there are xml-based aspects, coding to the API, and annotation-based declarative transactions. The annotation-based transactions are handy because you don&#39;t need to add the transaction management boilerplate code to your app (even using PlatformTransactionManager via the API has quite a bit of coding overhead). \r\n\r\nSo basically, what happens with `@Transactional` is that, at runtime, spring scans your code base for @Transactional classes and methods and wraps them up in the transaction specific management code, based on what you have configured via the annotation. So a method like this:\r\n\r\n    @Transactional(propagation = REQUIRES_NEW, rollbackFor = {Exception.class})\r\n    public void saveAndSendMessage(Foo foo) throws Exception {\r\n        dbManager.save(foo);\r\n        Bar bar = transform(foo);\r\n        jmsSystem.send(bar);\r\n    }  \r\n\r\ncan have spring set up a new transaction for the database and jms system, and co-ordinate them without needing to add all the specific tx management code automagically.\r\n\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Java_Transaction_API\r\n  [2]: https://hibernate.org/orm/\r\n  [3]: https://spring.io/projects/spring-framework\r\n  [4]: https://docs.spring.io/spring-framework/reference/data-access/transaction.html","title":"What is the difference between a &quot;Spring transaction&quot; and a &quot;Hibernate transaction&quot;","body":"<p>Well, for starters, they are both Transactions, but they encompass different concepts and components.</p>\n<p><strong>TL;DR</strong></p>\n<p>Hibernate deals with database specific transactions, whereas spring provides a general transaction management service. <code>@Transactional</code> is a nice way of configuring transaction management behaviour.</p>\n<p>The long story:</p>\n<p><strong>Transactions</strong></p>\n<p>Transactions are basically units of work (i.e. changes to something) that are managed as a single operation that can be either committed or rolled back. There are lots of different types of transactions in the Java world - database, messaging systems like JMS, inter-application transactions (for those who are not faint of heart), or anything else that may need to be included in a transaction. In the Java standard, transactions are managed using the <a href=\"https://en.wikipedia.org/wiki/Java_Transaction_API\" rel=\"nofollow noreferrer\">Java Transaction API</a> which sets the rules for how to participate in a transaction.</p>\n<p><strong>Hibernate</strong></p>\n<p><a href=\"https://hibernate.org/orm/\" rel=\"nofollow noreferrer\">Hibernate</a> is an ORM for abstracting database components to Java objects, so its transactions are specifically related to changes made within a database. A transaction may be made up of one or many writes to various database tables that are all committed once the operation is completed. Rolling back the transaction, e.g. if there are any errors during the operation, allows all the changes to be undone.</p>\n<p><strong>Spring</strong></p>\n<p>At its lowest level, <a href=\"https://spring.io/projects/spring-framework\" rel=\"nofollow noreferrer\">Spring</a> is an application framework for managing configuration and dependencies between objects. In addition, it also provides an interface for managing higher-level services that are used in modern applications, such as databases, messaging services, MVC frameworks, and transactions.</p>\n<p>Spring is designed to be used as an all-encompassing master of objects and services within your application, so its concept of a transaction is at a higher level than the database specific transactions that hibernate concerns itself with. <a href=\"https://docs.spring.io/spring-framework/reference/data-access/transaction.html\" rel=\"nofollow noreferrer\">Spring Transactions</a> are designed to give you fine grained control of all your transactional resources while abstracting away the often messy coding required to co-ordinate the transactions.</p>\n<p><strong><code>@Transactional</code></strong></p>\n<p>Spring provides a few different methods for using transactions - among others, there are xml-based aspects, coding to the API, and annotation-based declarative transactions. The annotation-based transactions are handy because you don't need to add the transaction management boilerplate code to your app (even using PlatformTransactionManager via the API has quite a bit of coding overhead).</p>\n<p>So basically, what happens with <code>@Transactional</code> is that, at runtime, spring scans your code base for @Transactional classes and methods and wraps them up in the transaction specific management code, based on what you have configured via the annotation. So a method like this:</p>\n<pre><code>@Transactional(propagation = REQUIRES_NEW, rollbackFor = {Exception.class})\npublic void saveAndSendMessage(Foo foo) throws Exception {\n    dbManager.save(foo);\n    Bar bar = transform(foo);\n    jmsSystem.send(bar);\n}  \n</code></pre>\n<p>can have spring set up a new transaction for the database and jms system, and co-ordinate them without needing to add all the specific tx management code automagically.</p>\n"},{"tags":[],"owner":{"account_id":18407395,"reputation":61,"user_id":13408718,"display_name":"Arya"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1607364619,"creation_date":1590860695,"answer_id":62106434,"question_id":28948614,"body_markdown":"**Coding level deference**\r\n\r\n**Spring**\r\n\r\nIn Spring, we can perform the transaction as below\r\n\r\n    @Transactional(readOnly=”false”)\r\n    public int insert(int studentId, String name, int courseId) {\r\n        int outcome = 0;\r\n        outcome = studentDao.insert(studentId, name);\r\n        if (outcome &gt; 0) {\r\n       // re-intialize\r\n            outcome = 0;\r\n            outcome = studentCourseDao.insert(studentId, courseId);\r\n        }\r\n       return outcome;\r\n    }\r\nAfter seeing the @Transactional, the Spring IOC container is going to perform the transaction. If both the operation successfully, then commit operation will be performed. If any operation failed then rollback operation will be performed.\r\n \r\n**Hibernate**\r\n\r\nIn Hibernate we can perform the transaction as below\r\n\r\n    \tpublic int insert(Student student, Course course) {\r\n          //it is a flag driven transaction\r\n\t\tboolean flag = false;\r\n\t\tTransaction transaction = null;\r\n\t\tSession session = null;\r\n\t\tSessionFactory sessionFactoryRepo = null;\r\n\t\ttry {\r\n\t\t\tsessionFactoryRepo = SessionFactoryRepo.getsessionFactory();\r\n\t\t\tsession = sessionFactoryRepo.openSession();\r\n\t\t\t// here we are creating the transaction object\r\n\t\t\ttransaction = session.beginTransaction();\r\n\r\n\t\t\tint outcome = 0;\r\n\t\t\toutcome =session.save(student);\r\n\t\t\tif (outcome &gt; 0) {\r\n\t\t\t  // re-intialize\r\n\t\t\t\toutcome = 0;\r\n\t\t\t\toutcome = session.save(course);\r\n\t\t\t}\r\n            flag = true;\r\n\t\t\treturn outcome;\r\n\t\t} catch (Exception e) {\r\n\t\t\t// TODO: handle exception\r\n\t\t}\r\n\t\tfinally {\r\n\t\t\tif (flag == true) {\r\n\t\t\t\ttransaction.commit();\r\n\t\t\t} else\r\n\t\t\t\ttransaction.rollback();\r\n\t\t}\r\n\t}","title":"What is the difference between a &quot;Spring transaction&quot; and a &quot;Hibernate transaction&quot;","body":"<p><strong>Coding level deference</strong></p>\n<p><strong>Spring</strong></p>\n<p>In Spring, we can perform the transaction as below</p>\n<pre><code>@Transactional(readOnly=”false”)\npublic int insert(int studentId, String name, int courseId) {\n    int outcome = 0;\n    outcome = studentDao.insert(studentId, name);\n    if (outcome &gt; 0) {\n   // re-intialize\n        outcome = 0;\n        outcome = studentCourseDao.insert(studentId, courseId);\n    }\n   return outcome;\n}\n</code></pre>\n<p>After seeing the @Transactional, the Spring IOC container is going to perform the transaction. If both the operation successfully, then commit operation will be performed. If any operation failed then rollback operation will be performed.</p>\n<p><strong>Hibernate</strong></p>\n<p>In Hibernate we can perform the transaction as below</p>\n<pre><code>    public int insert(Student student, Course course) {\n      //it is a flag driven transaction\n    boolean flag = false;\n    Transaction transaction = null;\n    Session session = null;\n    SessionFactory sessionFactoryRepo = null;\n    try {\n        sessionFactoryRepo = SessionFactoryRepo.getsessionFactory();\n        session = sessionFactoryRepo.openSession();\n        // here we are creating the transaction object\n        transaction = session.beginTransaction();\n\n        int outcome = 0;\n        outcome =session.save(student);\n        if (outcome &gt; 0) {\n          // re-intialize\n            outcome = 0;\n            outcome = session.save(course);\n        }\n        flag = true;\n        return outcome;\n    } catch (Exception e) {\n        // TODO: handle exception\n    }\n    finally {\n        if (flag == true) {\n            transaction.commit();\n        } else\n            transaction.rollback();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":2023092,"reputation":343,"user_id":1808811,"accept_rate":75,"display_name":"Sarath Muraleedharan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":18871,"favorite_count":0,"down_vote_count":0,"up_vote_count":33,"accepted_answer_id":28953261,"answer_count":2,"score":33,"last_activity_date":1701152662,"creation_date":1425923544,"question_id":28948614,"body_markdown":"Could you please explain the difference between the following two types of transactions:\r\n\r\n 1. Hibernate transaction\r\n 1. Spring transaction\r\n\r\nAlso I would like to know about the `@Transactional` annotation.","title":"What is the difference between a &quot;Spring transaction&quot; and a &quot;Hibernate transaction&quot;","body":"<p>Could you please explain the difference between the following two types of transactions:</p>\n\n<ol>\n<li>Hibernate transaction</li>\n<li>Spring transaction</li>\n</ol>\n\n<p>Also I would like to know about the <code>@Transactional</code> annotation.</p>\n"},{"tags":["java","class","object","terminology","receiver"],"comments":[{"owner":{"account_id":514320,"reputation":24520,"user_id":1392132,"accept_rate":91,"display_name":"5gon12eder"},"score":0,"creation_date":1422763884,"post_id":28259351,"comment_id":44876453,"body_markdown":"`Math.sqrt` is a `static` method.  See [*Understanding Class Members*](http://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html) in *The Java Tutorials*.","body":"<code>Math.sqrt</code> is a <code>static</code> method.  See <a href=\"http://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html\" rel=\"nofollow noreferrer\"><i>Understanding Class Members</i></a> in <i>The Java Tutorials</i>."},{"owner":{"account_id":2667845,"reputation":10491,"user_id":2305826,"accept_rate":89,"display_name":"MarsAtomic"},"score":1,"creation_date":1422764526,"post_id":28259351,"comment_id":44876550,"body_markdown":"A receiver the thing that receives the call for one of its methods. It can be a package or an object.","body":"A receiver the thing that receives the call for one of its methods. It can be a package or an object."},{"owner":{"account_id":71739,"reputation":307143,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1701154900,"post_id":28259351,"comment_id":136736876,"body_markdown":"There is nothing in Java that is formally called a &#39;receiver&#39;. How you use this term is up to you, and a matter of opinion only.","body":"There is nothing in Java that is formally called a &#39;receiver&#39;. How you use this term is up to you, and a matter of opinion only."}],"answers":[{"tags":[],"owner":{"account_id":433987,"reputation":5865,"user_id":819651,"accept_rate":90,"display_name":"Lu&#237;s Soares"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1422763835,"creation_date":1422763835,"answer_id":28259369,"question_id":28259351,"body_markdown":"Math is a class! But those are static methods :) which means Math does not need to be instantiated as an object to be used. You just use it directly.\r\n\r\nPackages are just ways to organize/categorize classes.\r\n\r\n&quot;receiver&quot; is not common jargon in Java and O.O.\r\n","title":"In Java, what exactly is a receiver or what exactly can a receiver be?","body":"<p>Math is a class! But those are static methods :) which means Math does not need to be instantiated as an object to be used. You just use it directly.</p>\n\n<p>Packages are just ways to organize/categorize classes.</p>\n\n<p>\"receiver\" is not common jargon in Java and O.O.</p>\n"}],"owner":{"account_id":5715926,"reputation":697,"user_id":4516124,"display_name":"DavidT"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5508,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":28259369,"answer_count":1,"score":2,"last_activity_date":1701152156,"creation_date":1422763638,"question_id":28259351,"body_markdown":"I&#39;ve started learning java.  I&#39;ve understood so far that method calls are:\r\n\r\n    object.methodname(arguments)\r\n\r\nalthough I think more broadly I&#39;ve discovered that it&#39;s actually:\r\n\r\n    receiver.methodname(arguments)\r\n\r\nand that a receiver might not necessarily be an object.  or perhaps my understanding of object is wrong.  I get that a class defines a type, and an object is an instance of the class.  And that calling a method is sending a message to an object, and the message has to be something the object understands as defined by the methods in its class.\r\n\r\nBut... what about:\r\n\r\n    import java.lang.Math\r\n    double x = 16;\r\n    double y = Math.sqrt(x);\r\n    double z = Math.pow(x,y);\r\n\r\nis Math an object?  I don&#39;t believe so.  My understanding so far is that Math is a &quot;package class&quot; in the java.lang package.  I don&#39;t yet really understand what a &quot;package class&quot; is other than that it&#39;s some kind of pre-written library of functions I can use...\r\n\r\nBut if it&#39;s a class, then that means sometimes a receiver can be a class and doesn&#39;t necessarily have to be an object...?\r\n\r\n...or is Math an object/instance of some other class?\r\n\r\nI&#39;ve googled every combination of java/receiver/object/class/etc that i can think of and can&#39;t find anywhere that really clears this up for me.  I&#39;d appreciate any insights anyone can offer me to clear it up.\r\n\r\nThanks!\r\n","title":"In Java, what exactly is a receiver or what exactly can a receiver be?","body":"<p>I've started learning java.  I've understood so far that method calls are:</p>\n\n<pre><code>object.methodname(arguments)\n</code></pre>\n\n<p>although I think more broadly I've discovered that it's actually:</p>\n\n<pre><code>receiver.methodname(arguments)\n</code></pre>\n\n<p>and that a receiver might not necessarily be an object.  or perhaps my understanding of object is wrong.  I get that a class defines a type, and an object is an instance of the class.  And that calling a method is sending a message to an object, and the message has to be something the object understands as defined by the methods in its class.</p>\n\n<p>But... what about:</p>\n\n<pre><code>import java.lang.Math\ndouble x = 16;\ndouble y = Math.sqrt(x);\ndouble z = Math.pow(x,y);\n</code></pre>\n\n<p>is Math an object?  I don't believe so.  My understanding so far is that Math is a \"package class\" in the java.lang package.  I don't yet really understand what a \"package class\" is other than that it's some kind of pre-written library of functions I can use...</p>\n\n<p>But if it's a class, then that means sometimes a receiver can be a class and doesn't necessarily have to be an object...?</p>\n\n<p>...or is Math an object/instance of some other class?</p>\n\n<p>I've googled every combination of java/receiver/object/class/etc that i can think of and can't find anywhere that really clears this up for me.  I'd appreciate any insights anyone can offer me to clear it up.</p>\n\n<p>Thanks!</p>\n"},{"tags":["java","android","onactivityresult"],"owner":{"account_id":3909240,"reputation":4928,"user_id":3235048,"accept_rate":64,"display_name":"Sagar Zala"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1701151592,"creation_date":1701151272,"question_id":77561646,"body_markdown":"I&#39;m currently evaluating the functionality of an app across various devices, and I&#39;ve encountered an issue on one of them. Specifically, when I invoke the onActivityResult method, it functions as expected initially. However, on the second invocation, it seems to reset the data that was previously recorded during the last call. While this behavior is consistent on most devices, there&#39;s an exception with this particular device, which inexplicably clears the view when handling activity results.\r\n\r\nIn brief, when I select products and proceed to choose gifts, the selected products are removed.\r\n\r\nThe only device in which the issue occurred was Realme 6 - UI 2.0 (Android 11)\r\n\r\nIn essence, the problem arises when I choose data from another activity using an intent; it appears to reset the data that was previously selected. Here&#39;s how the data retrieval process is structured:\r\n\r\n\r\n\r\n    @Override\r\n    protected void onActivityResult(int requestCode, int resultCode, Intent data) {\r\n        super.onActivityResult(requestCode, resultCode, data);\r\n        if (requestCode == Popup_Selected_Result_Product) {\r\n            if (resultCode == Activity.RESULT_OK) {\r\n                    Bundle extras = data.getExtras();\r\n                    Product_ID.clear();\r\n                    assert extras != null;\r\n                    Product_ID = extras.getIntegerArrayList(&quot;Product_ID&quot;);\r\n                    SetProductData();\r\n            }\r\n        }  else if (requestCode == Popup_Selected_Result_Gift) {\r\n                if (resultCode == Activity.RESULT_OK) {\r\n                    Bundle extras = data.getExtras();\r\n                    Gift_ID.clear();\r\n                    assert extras != null;\r\n                    Gift_ID = extras.getIntegerArrayList(&quot;Product_ID&quot;);\r\n                    hm_Gift = (HashMap&lt;Integer, Integer&gt;) extras\r\n                            .getSerializable(&quot;Hash_Data&quot;);\r\n                    SetGiftData();\r\n                }\r\n            } else if (requestCode == Popup_Selected_Result_Sample) {\r\n                if (resultCode == Activity.RESULT_OK) {\r\n                    Bundle extras = data.getExtras();\r\n                    Sample_ID.clear();\r\n                    assert extras != null;\r\n                    Sample_ID = extras.getIntegerArrayList(&quot;Product_ID&quot;);\r\n                    hm_Sample = (HashMap&lt;Integer, Integer&gt;) extras\r\n                            .getSerializable(&quot;Hash_Data&quot;);\r\n                    SetSampleData();\r\n                }\r\n            }\r\n    }\r\n        ","title":"The onActivityResult method is resetting values","body":"<p>I'm currently evaluating the functionality of an app across various devices, and I've encountered an issue on one of them. Specifically, when I invoke the onActivityResult method, it functions as expected initially. However, on the second invocation, it seems to reset the data that was previously recorded during the last call. While this behavior is consistent on most devices, there's an exception with this particular device, which inexplicably clears the view when handling activity results.</p>\n<p>In brief, when I select products and proceed to choose gifts, the selected products are removed.</p>\n<p>The only device in which the issue occurred was Realme 6 - UI 2.0 (Android 11)</p>\n<p>In essence, the problem arises when I choose data from another activity using an intent; it appears to reset the data that was previously selected. Here's how the data retrieval process is structured:</p>\n<pre><code>@Override\nprotected void onActivityResult(int requestCode, int resultCode, Intent data) {\n    super.onActivityResult(requestCode, resultCode, data);\n    if (requestCode == Popup_Selected_Result_Product) {\n        if (resultCode == Activity.RESULT_OK) {\n                Bundle extras = data.getExtras();\n                Product_ID.clear();\n                assert extras != null;\n                Product_ID = extras.getIntegerArrayList(&quot;Product_ID&quot;);\n                SetProductData();\n        }\n    }  else if (requestCode == Popup_Selected_Result_Gift) {\n            if (resultCode == Activity.RESULT_OK) {\n                Bundle extras = data.getExtras();\n                Gift_ID.clear();\n                assert extras != null;\n                Gift_ID = extras.getIntegerArrayList(&quot;Product_ID&quot;);\n                hm_Gift = (HashMap&lt;Integer, Integer&gt;) extras\n                        .getSerializable(&quot;Hash_Data&quot;);\n                SetGiftData();\n            }\n        } else if (requestCode == Popup_Selected_Result_Sample) {\n            if (resultCode == Activity.RESULT_OK) {\n                Bundle extras = data.getExtras();\n                Sample_ID.clear();\n                assert extras != null;\n                Sample_ID = extras.getIntegerArrayList(&quot;Product_ID&quot;);\n                hm_Sample = (HashMap&lt;Integer, Integer&gt;) extras\n                        .getSerializable(&quot;Hash_Data&quot;);\n                SetSampleData();\n            }\n        }\n}\n    \n</code></pre>\n"},{"tags":["java","spring","redis","spring-boot"],"answers":[{"tags":[],"owner":{"account_id":1099357,"reputation":47932,"user_id":3160475,"display_name":"Itamar Haber"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1435603059,"creation_date":1435579453,"answer_id":31115229,"question_id":31114110,"body_markdown":"You can read about Redis keyspace notifications at: http://redis.io/topics/notifications\r\n\r\nRegardless of what they actually are, it appears that your Redis server doesn&#39;t support them (e.g. &lt; v2.8).","title":"What are the notify-keyspace-events in Redis","body":"<p>You can read about Redis keyspace notifications at: <a href=\"http://redis.io/topics/notifications\" rel=\"nofollow\">http://redis.io/topics/notifications</a></p>\n\n<p>Regardless of what they actually are, it appears that your Redis server doesn't support them (e.g. &lt; v2.8).</p>\n"},{"tags":[],"owner":{"account_id":23933455,"reputation":1,"user_id":17927568,"display_name":"wbrco01"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698546275,"creation_date":1698185128,"answer_id":77355647,"question_id":31114110,"body_markdown":"Depending on your implementation, you can turn notify-keyspace-events on in either your template or when you instantiate your listener:\r\n\r\nIn your template:\r\n\r\n    @Bean(&quot;basicKeyspaceTemplate&quot;)\r\n    public RedisTemplate&lt;String, String&gt; basicKeyspaceTemplate(RedisConnectionFactory connectionFactory) {\r\n        \r\n        RedisTemplate&lt;String, String&gt; template = new RedisTemplate&lt;&gt;();\r\n\r\n        // Turn on Keyspace notifications\r\n        RedisServerCommands cmd = connectionFactory.getConnection();\r\n        cmd.setConfig(&quot;notify-keyspace-events&quot;, &quot;KEA&quot;);\r\n\r\n        template.setConnectionFactory(connectionFactory);\r\n        template.afterPropertiesSet();\r\n\r\n        return template;\r\n    }\r\n\r\nOr when you create your listener:\r\n\r\n        class RedisKeyspaceListener extends KeyspaceEventMessageListener{\r\n\r\n        private KeyspaceEventMessageListener _listener;\r\n        private String _key;\r\n\r\n        public RedisKeyspaceListener(String key, RedisMessageListenerContainer _basicListenerContainer) {\r\n            super(_basicListenerContainer);\r\n            this._listener = this;\r\n            _listener.setKeyspaceNotificationsConfigParameter(&quot;KEA&quot;);\r\n            _listener.init();\r\n            _log.info(String.format(&quot;Keyspace listener established for key %s&quot;, key));\r\n        }\r\n\r\n        @Override\r\n        protected void doHandleMessage(Message message) {\r\n            // TODO! Build filter and determine way to get key value(s) to sendTextMessage;\r\n            _log.info(String.format(&quot;Keyspace event message from key %s -&gt; message %s&quot;, _key, message.toString() ));\r\n            MsgHandler.this.sendTextMessage(message.toString());\r\n        }\r\n    }\r\n\r\nFor additional reference, my RedisListenerContainer: \r\n\r\n    @Component    \r\n    public class RedisListenerContainer {\r\n            \r\n        private static RedisMessageListenerContainer _basicListenerContainer;\r\n        \r\n            @Bean(&quot;basicListenerContainer&quot;)\r\n            RedisMessageListenerContainer basicListenerContainer(RedisConnectionFactory connectionFactory) throws Error {\r\n                RedisMessageListenerContainer container = new RedisMessageListenerContainer();\r\n                container.setConnectionFactory(connectionFactory);\r\n                _basicListenerContainer = container;\r\n                return container;\r\n            }\r\n        \r\n            public static RedisMessageListenerContainer get_basicListenerContainer() {\r\n                return _basicListenerContainer;\r\n            }\r\n        }\r\n\r\nUnfortunately, Spring (and other sites) do not give a good example of implementing a basic keyspace notification.\r\n\r\nWhat I found the hard way is that setKeyspaceNotificationsConfigParameters is the settings for the notifications, not a &quot;filter&quot; for keys or event types. \r\n\r\nSo, if you re-use your listener container, as you add keys, you will get a notification from **Every key** even though you only acted on a single key.\r\n\r\nIn other words, it&#39;s really not implemented like what Redis describes at https://redis.io/docs/manual/keyspace-notifications/","title":"What are the notify-keyspace-events in Redis","body":"<p>Depending on your implementation, you can turn notify-keyspace-events on in either your template or when you instantiate your listener:</p>\n<p>In your template:</p>\n<pre><code>@Bean(&quot;basicKeyspaceTemplate&quot;)\npublic RedisTemplate&lt;String, String&gt; basicKeyspaceTemplate(RedisConnectionFactory connectionFactory) {\n    \n    RedisTemplate&lt;String, String&gt; template = new RedisTemplate&lt;&gt;();\n\n    // Turn on Keyspace notifications\n    RedisServerCommands cmd = connectionFactory.getConnection();\n    cmd.setConfig(&quot;notify-keyspace-events&quot;, &quot;KEA&quot;);\n\n    template.setConnectionFactory(connectionFactory);\n    template.afterPropertiesSet();\n\n    return template;\n}\n</code></pre>\n<p>Or when you create your listener:</p>\n<pre><code>    class RedisKeyspaceListener extends KeyspaceEventMessageListener{\n\n    private KeyspaceEventMessageListener _listener;\n    private String _key;\n\n    public RedisKeyspaceListener(String key, RedisMessageListenerContainer _basicListenerContainer) {\n        super(_basicListenerContainer);\n        this._listener = this;\n        _listener.setKeyspaceNotificationsConfigParameter(&quot;KEA&quot;);\n        _listener.init();\n        _log.info(String.format(&quot;Keyspace listener established for key %s&quot;, key));\n    }\n\n    @Override\n    protected void doHandleMessage(Message message) {\n        // TODO! Build filter and determine way to get key value(s) to sendTextMessage;\n        _log.info(String.format(&quot;Keyspace event message from key %s -&gt; message %s&quot;, _key, message.toString() ));\n        MsgHandler.this.sendTextMessage(message.toString());\n    }\n}\n</code></pre>\n<p>For additional reference, my RedisListenerContainer:</p>\n<pre><code>@Component    \npublic class RedisListenerContainer {\n        \n    private static RedisMessageListenerContainer _basicListenerContainer;\n    \n        @Bean(&quot;basicListenerContainer&quot;)\n        RedisMessageListenerContainer basicListenerContainer(RedisConnectionFactory connectionFactory) throws Error {\n            RedisMessageListenerContainer container = new RedisMessageListenerContainer();\n            container.setConnectionFactory(connectionFactory);\n            _basicListenerContainer = container;\n            return container;\n        }\n    \n        public static RedisMessageListenerContainer get_basicListenerContainer() {\n            return _basicListenerContainer;\n        }\n    }\n</code></pre>\n<p>Unfortunately, Spring (and other sites) do not give a good example of implementing a basic keyspace notification.</p>\n<p>What I found the hard way is that setKeyspaceNotificationsConfigParameters is the settings for the notifications, not a &quot;filter&quot; for keys or event types.</p>\n<p>So, if you re-use your listener container, as you add keys, you will get a notification from <strong>Every key</strong> even though you only acted on a single key.</p>\n<p>In other words, it's really not implemented like what Redis describes at <a href=\"https://redis.io/docs/manual/keyspace-notifications/\" rel=\"nofollow noreferrer\">https://redis.io/docs/manual/keyspace-notifications/</a></p>\n"}],"owner":{"account_id":1183793,"reputation":51,"user_id":1158156,"accept_rate":0,"display_name":"Karthik"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":9575,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1701151585,"creation_date":1435576102,"question_id":31114110,"body_markdown":"I started to setup spring project by following this [spring-boot article][1]. But suddenly application could not start successfully, instead I am getting the following stack trace:\r\n\r\n```\r\nException in thread &quot;main&quot; org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;enableRedisKeyspaceNotificationsInitializer&#39; defined in class org.springframework.session.data.redis.config.annotation.web.http.RedisHttpSessionConfiguration: Invocation of init method failed; nested exception is org.springframework.dao.InvalidDataAccessApiUsageException: ERR Unsupported CONFIG parameter: notify-keyspace-events; nested exception is redis.clients.jedis.exceptions.JedisDataException: ERR Unsupported CONFIG parameter: notify-keyspace-events\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1566)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:539)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:476)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:303)\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:230)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:299)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:194)\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:755)\r\n\tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:757)\r\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:480)\r\n\tat org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.refresh(EmbeddedWebApplicationContext.java:118)\r\n\tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:686)\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:320)\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:957)\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:946)\r\n\tat demo.UiApplication.main(UiApplication.java:29)\r\nCaused by: org.springframework.dao.InvalidDataAccessApiUsageException: ERR Unsupported CONFIG parameter: notify-keyspace-events; nested exception is redis.clients.jedis.exceptions.JedisDataException: ERR Unsupported CONFIG parameter: notify-keyspace-events\r\n\tat org.springframework.data.redis.connection.jedis.JedisExceptionConverter.convert(JedisExceptionConverter.java:44)\r\n\tat org.springframework.data.redis.connection.jedis.JedisExceptionConverter.convert(JedisExceptionConverter.java:36)\r\n\tat org.springframework.data.redis.PassThroughExceptionTranslationStrategy.translate(PassThroughExceptionTranslationStrategy.java:37)\r\n\tat org.springframework.data.redis.FallbackExceptionTranslationStrategy.translate(FallbackExceptionTranslationStrategy.java:37)\r\n\tat org.springframework.data.redis.connection.jedis.JedisConnection.convertJedisAccessException(JedisConnection.java:195)\r\n\tat org.springframework.data.redis.connection.jedis.JedisConnection.setConfig(JedisConnection.java:618)\r\n\tat org.springframework.session.data.redis.config.annotation.web.http.RedisHttpSessionConfiguration$EnableRedisKeyspaceNotificationsInitializer.afterPropertiesSet(RedisHttpSessionConfiguration.java:170)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1625)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1562)\r\n\t... 15 more\r\nCaused by: redis.clients.jedis.exceptions.JedisDataException: ERR Unsupported CONFIG parameter: notify-keyspace-events\r\n\tat redis.clients.jedis.Protocol.processError(Protocol.java:113)\r\n\tat redis.clients.jedis.Protocol.process(Protocol.java:131)\r\n\tat redis.clients.jedis.Protocol.read(Protocol.java:200)\r\n\tat redis.clients.jedis.Connection.readProtocolWithCheckingBroken(Connection.java:285)\r\n\tat redis.clients.jedis.Connection.getStatusCodeReply(Connection.java:184)\r\n\tat redis.clients.jedis.Jedis.configSet(Jedis.java:2797)\r\n\tat org.springframework.data.redis.connection.jedis.JedisConnection.setConfig(JedisConnection.java:616)\r\n\t... 18 more\r\n```\r\n\r\nThe main message is: ```ERR Unsupported CONFIG parameter: notify-keyspace-events```. \r\n\r\nWhat does it mean and how to fix it?\r\n\r\n\r\n  [1]: https://spring.io/blog/2015/05/13/modularizing-the-client-angular-js-and-spring-security-part-vii","title":"What are the notify-keyspace-events in Redis","body":"<p>I started to setup spring project by following this <a href=\"https://spring.io/blog/2015/05/13/modularizing-the-client-angular-js-and-spring-security-part-vii\" rel=\"nofollow noreferrer\">spring-boot article</a>. But suddenly application could not start successfully, instead I am getting the following stack trace:</p>\n\n<pre><code>Exception in thread \"main\" org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'enableRedisKeyspaceNotificationsInitializer' defined in class org.springframework.session.data.redis.config.annotation.web.http.RedisHttpSessionConfiguration: Invocation of init method failed; nested exception is org.springframework.dao.InvalidDataAccessApiUsageException: ERR Unsupported CONFIG parameter: notify-keyspace-events; nested exception is redis.clients.jedis.exceptions.JedisDataException: ERR Unsupported CONFIG parameter: notify-keyspace-events\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1566)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:539)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:476)\n    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:303)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:230)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:299)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:194)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:755)\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:757)\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:480)\n    at org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.refresh(EmbeddedWebApplicationContext.java:118)\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:686)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:320)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:957)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:946)\n    at demo.UiApplication.main(UiApplication.java:29)\nCaused by: org.springframework.dao.InvalidDataAccessApiUsageException: ERR Unsupported CONFIG parameter: notify-keyspace-events; nested exception is redis.clients.jedis.exceptions.JedisDataException: ERR Unsupported CONFIG parameter: notify-keyspace-events\n    at org.springframework.data.redis.connection.jedis.JedisExceptionConverter.convert(JedisExceptionConverter.java:44)\n    at org.springframework.data.redis.connection.jedis.JedisExceptionConverter.convert(JedisExceptionConverter.java:36)\n    at org.springframework.data.redis.PassThroughExceptionTranslationStrategy.translate(PassThroughExceptionTranslationStrategy.java:37)\n    at org.springframework.data.redis.FallbackExceptionTranslationStrategy.translate(FallbackExceptionTranslationStrategy.java:37)\n    at org.springframework.data.redis.connection.jedis.JedisConnection.convertJedisAccessException(JedisConnection.java:195)\n    at org.springframework.data.redis.connection.jedis.JedisConnection.setConfig(JedisConnection.java:618)\n    at org.springframework.session.data.redis.config.annotation.web.http.RedisHttpSessionConfiguration$EnableRedisKeyspaceNotificationsInitializer.afterPropertiesSet(RedisHttpSessionConfiguration.java:170)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1625)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1562)\n    ... 15 more\nCaused by: redis.clients.jedis.exceptions.JedisDataException: ERR Unsupported CONFIG parameter: notify-keyspace-events\n    at redis.clients.jedis.Protocol.processError(Protocol.java:113)\n    at redis.clients.jedis.Protocol.process(Protocol.java:131)\n    at redis.clients.jedis.Protocol.read(Protocol.java:200)\n    at redis.clients.jedis.Connection.readProtocolWithCheckingBroken(Connection.java:285)\n    at redis.clients.jedis.Connection.getStatusCodeReply(Connection.java:184)\n    at redis.clients.jedis.Jedis.configSet(Jedis.java:2797)\n    at org.springframework.data.redis.connection.jedis.JedisConnection.setConfig(JedisConnection.java:616)\n    ... 18 more\n</code></pre>\n\n<p>The main message is: <code>ERR Unsupported CONFIG parameter: notify-keyspace-events</code>. </p>\n\n<p>What does it mean and how to fix it?</p>\n"},{"tags":["java","oracle"],"comments":[{"owner":{"account_id":1435136,"reputation":1957,"user_id":1356710,"accept_rate":50,"display_name":"Raul Luna"},"score":0,"creation_date":1565096383,"post_id":19660336,"comment_id":101237656,"body_markdown":"Consider this question also:  https://stackoverflow.com/questions/31704622 Possibly the OracleDriver you are using is deprecated.","body":"Consider this question also:  <a href=\"https://stackoverflow.com/questions/31704622\">stackoverflow.com/questions/31704622</a> Possibly the OracleDriver you are using is deprecated."}],"answers":[{"tags":[],"owner":{"account_id":47283,"reputation":703807,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":125,"is_accepted":true,"score":125,"last_activity_date":1522035182,"creation_date":1383058298,"answer_id":19661592,"question_id":19660336,"body_markdown":"The immediate cause of the problem is that the JDBC driver has attempted to read from a network Socket that has been closed by &quot;the other end&quot;.\r\n\r\nThis could be due to a few things:\r\n\r\n  - If the remote server has been configured (e.g. in the &quot;SQLNET.ora&quot; file) to not accept connections from your IP.\r\n\r\n  - If the JDBC url is incorrect, you could be attempting to connect to something that isn&#39;t a database.\r\n\r\n  - If there are too many open connections to the database service, it could refuse new connections.\r\n\r\nGiven the symptoms, I think the &quot;too many connections&quot; scenario is the most likely.  That suggests that your application is leaking connections; i.e. creating connections and then failing to (always) close them.  ","title":"How to approach a &quot;Got minus one from a read call&quot; error when connecting to an Amazon RDS Oracle instance","body":"<p>The immediate cause of the problem is that the JDBC driver has attempted to read from a network Socket that has been closed by \"the other end\".</p>\n\n<p>This could be due to a few things:</p>\n\n<ul>\n<li><p>If the remote server has been configured (e.g. in the \"SQLNET.ora\" file) to not accept connections from your IP.</p></li>\n<li><p>If the JDBC url is incorrect, you could be attempting to connect to something that isn't a database.</p></li>\n<li><p>If there are too many open connections to the database service, it could refuse new connections.</p></li>\n</ul>\n\n<p>Given the symptoms, I think the \"too many connections\" scenario is the most likely.  That suggests that your application is leaking connections; i.e. creating connections and then failing to (always) close them.  </p>\n"},{"tags":[],"owner":{"account_id":1367112,"reputation":1876,"user_id":1303323,"accept_rate":56,"display_name":"Stelios Adamantidis"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1392187396,"creation_date":1392107970,"answer_id":21696841,"question_id":19660336,"body_markdown":"I would like to augment to Stephen C&#39;s answer, my case was on the first dot. So since we have DHCP to allocate IP addresses in the company, DHCP changed my machine&#39;s address without of course asking neither me nor Oracle. So out of the blue oracle refused to do anything and gave the minus one dreaded exception. So if you want to workaround this once and for ever, and since TCP.INVITED_NODES of SQLNET.ora file does not accept wildcards as stated [here][1], you can add you machine&#39;s hostname instead of the IP address.\r\n\r\n\r\n  [1]: https://community.oracle.com/message/4568449","title":"How to approach a &quot;Got minus one from a read call&quot; error when connecting to an Amazon RDS Oracle instance","body":"<p>I would like to augment to Stephen C's answer, my case was on the first dot. So since we have DHCP to allocate IP addresses in the company, DHCP changed my machine's address without of course asking neither me nor Oracle. So out of the blue oracle refused to do anything and gave the minus one dreaded exception. So if you want to workaround this once and for ever, and since TCP.INVITED_NODES of SQLNET.ora file does not accept wildcards as stated <a href=\"https://community.oracle.com/message/4568449\" rel=\"nofollow\">here</a>, you can add you machine's hostname instead of the IP address.</p>\n"},{"tags":[],"owner":{"account_id":4637310,"reputation":231,"user_id":3758196,"display_name":"Arnab Sarkar"},"down_vote_count":1,"up_vote_count":23,"is_accepted":false,"score":22,"last_activity_date":1585823356,"creation_date":1403213961,"answer_id":24316659,"question_id":19660336,"body_markdown":"We faced the same issue and fixed it. Below is the reason and solution.\r\n\r\n**Problem**\r\n\r\nWhen the connection pool mechanism is used, the application server (in our case, it is JBOSS) creates connections according to the `min-connection` parameter. If you have 10 applications running, and each has a `min-connection` of 10, then a total of 100 sessions will be created in the database. Also, in every database, there is a `max-session` parameter, if your total number of connections crosses that border, then you will get `Got minus one from a read call`.\r\n\r\nFYI: Use the query below to see your total number of sessions:\r\n\r\n    SELECT username, count(username) FROM v$session \r\n    WHERE username IS NOT NULL group by username\r\n\r\nSolution: With the help of our DBA, we increased that `max-session` parameter, so that all our application `min-connection` can accommodate.","title":"How to approach a &quot;Got minus one from a read call&quot; error when connecting to an Amazon RDS Oracle instance","body":"<p>We faced the same issue and fixed it. Below is the reason and solution.</p>\n\n<p><strong>Problem</strong></p>\n\n<p>When the connection pool mechanism is used, the application server (in our case, it is JBOSS) creates connections according to the <code>min-connection</code> parameter. If you have 10 applications running, and each has a <code>min-connection</code> of 10, then a total of 100 sessions will be created in the database. Also, in every database, there is a <code>max-session</code> parameter, if your total number of connections crosses that border, then you will get <code>Got minus one from a read call</code>.</p>\n\n<p>FYI: Use the query below to see your total number of sessions:</p>\n\n<pre><code>SELECT username, count(username) FROM v$session \nWHERE username IS NOT NULL group by username\n</code></pre>\n\n<p>Solution: With the help of our DBA, we increased that <code>max-session</code> parameter, so that all our application <code>min-connection</code> can accommodate.</p>\n"},{"tags":[],"owner":{"account_id":14124804,"reputation":181,"user_id":10204436,"display_name":"Pierre Nakashian"},"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1603829012,"creation_date":1603829012,"answer_id":64562074,"question_id":19660336,"body_markdown":"I got this error message from using an oracle database in a docker despite the fact i had  publish port to host option &quot;-p 1521:1521&quot;.   I was using jdbc url that was using  ip address 127.0.0.1,  i changed it to the host machine real ip address and everything worked then.","title":"How to approach a &quot;Got minus one from a read call&quot; error when connecting to an Amazon RDS Oracle instance","body":"<p>I got this error message from using an oracle database in a docker despite the fact i had  publish port to host option &quot;-p 1521:1521&quot;.   I was using jdbc url that was using  ip address 127.0.0.1,  i changed it to the host machine real ip address and everything worked then.</p>\n"},{"tags":[],"owner":{"account_id":10558558,"reputation":1079,"user_id":7778972,"display_name":"Rahul Gupta"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1606374087,"creation_date":1606374087,"answer_id":65017365,"question_id":19660336,"body_markdown":"in my case, I got the same exception because the user that I configured in the app did not existed in the DB, creating the user and granting needed permissions solved the problem.","title":"How to approach a &quot;Got minus one from a read call&quot; error when connecting to an Amazon RDS Oracle instance","body":"<p>in my case, I got the same exception because the user that I configured in the app did not existed in the DB, creating the user and granting needed permissions solved the problem.</p>\n"},{"tags":[],"owner":{"account_id":5552799,"reputation":563,"user_id":4405298,"accept_rate":0,"display_name":"Atul Patel"},"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1631088799,"creation_date":1631088799,"answer_id":69099319,"question_id":19660336,"body_markdown":"**Cause**\r\n\r\n**oracle binary permission issue ($ORACLE_HOME/bin/oracle)**\r\n\r\n[tst19c@exa033dbadm01 bin]$ $ORACLE_HOME/bin\r\n\r\n[tst19c@exa033dbadm01 bin]$ ls -ltr oracle\r\n\r\n**-rwxr-s--x** 1 tst19c asmadmin 446528768 May 3 14:28 oracle\r\n\r\n **Action Taken**\r\n\r\n[tst19c@exa033dbadm01 bin]$ **chmod 6751 oracle**\r\n\r\n[tst19c@exa033dbadm01 bin]$ ls -ltr oracle\r\n\r\n\r\n**Now**\r\n\r\n**-rwsr-s--x** 1 tst19c asmadmin 446528768 May 3 14:28 oracle\r\n\r\n[tst19c@exa033dbadm01 bin]$","title":"How to approach a &quot;Got minus one from a read call&quot; error when connecting to an Amazon RDS Oracle instance","body":"<p><strong>Cause</strong></p>\n<p><strong>oracle binary permission issue ($ORACLE_HOME/bin/oracle)</strong></p>\n<p>[tst19c@exa033dbadm01 bin]$ $ORACLE_HOME/bin</p>\n<p>[tst19c@exa033dbadm01 bin]$ ls -ltr oracle</p>\n<p><strong>-rwxr-s--x</strong> 1 tst19c asmadmin 446528768 May 3 14:28 oracle</p>\n<p><strong>Action Taken</strong></p>\n<p>[tst19c@exa033dbadm01 bin]$ <strong>chmod 6751 oracle</strong></p>\n<p>[tst19c@exa033dbadm01 bin]$ ls -ltr oracle</p>\n<p><strong>Now</strong></p>\n<p><strong>-rwsr-s--x</strong> 1 tst19c asmadmin 446528768 May 3 14:28 oracle</p>\n<p>[tst19c@exa033dbadm01 bin]$</p>\n"},{"tags":[],"owner":{"account_id":239574,"reputation":1827,"user_id":509276,"accept_rate":71,"display_name":"malloc4k"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1658999171,"creation_date":1658999171,"answer_id":73150106,"question_id":19660336,"body_markdown":"I had a similar issue when running **Oracle 21c XE** image on **Docker locally** when I was trying to connect to it by `localhost` or `127.0.0.1`.\r\n\r\nThe fix was to log in into the container and modify `sqlnet.ora` in the following way:\r\n\r\n    echo &quot;DISABLE_OOB=ON&quot; &gt;&gt; /opt/oracle/oradata/dbconfig/XE/sqlnet.ora\r\n\r\nand restart the container.\r\n","title":"How to approach a &quot;Got minus one from a read call&quot; error when connecting to an Amazon RDS Oracle instance","body":"<p>I had a similar issue when running <strong>Oracle 21c XE</strong> image on <strong>Docker locally</strong> when I was trying to connect to it by <code>localhost</code> or <code>127.0.0.1</code>.</p>\n<p>The fix was to log in into the container and modify <code>sqlnet.ora</code> in the following way:</p>\n<pre><code>echo &quot;DISABLE_OOB=ON&quot; &gt;&gt; /opt/oracle/oradata/dbconfig/XE/sqlnet.ora\n</code></pre>\n<p>and restart the container.</p>\n"},{"tags":[],"owner":{"account_id":9913536,"reputation":33,"user_id":7339305,"display_name":"AmolRavan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701151158,"creation_date":1701151158,"answer_id":77561636,"question_id":19660336,"body_markdown":"In my case,\r\n\r\nAccess was restricted to particular LDAP group, and I was not there in that group so I got this error.\r\n\r\nWhen added to that LDAP group got the access","title":"How to approach a &quot;Got minus one from a read call&quot; error when connecting to an Amazon RDS Oracle instance","body":"<p>In my case,</p>\n<p>Access was restricted to particular LDAP group, and I was not there in that group so I got this error.</p>\n<p>When added to that LDAP group got the access</p>\n"}],"owner":{"account_id":1293628,"reputation":11560,"user_id":1245240,"accept_rate":85,"display_name":"Robert H"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":378716,"favorite_count":0,"down_vote_count":0,"up_vote_count":95,"accepted_answer_id":19661592,"answer_count":8,"score":95,"last_activity_date":1701151158,"creation_date":1383055196,"question_id":19660336,"body_markdown":"I&#39;m running Oracle 11GR2 on an Amazon RDS instance. occasionally I get an `IO Error: Got minus one from a read call` when making a call to `DriverManager.getConnection(getUrl())` and I&#39;m not sure why. Other applications work correctly. \r\n\r\nTo further confuse things, the error will correct itself on occasion (following next iteration of the program). \r\n\r\n**How should I approach a &quot;Got minus one from a read call&quot; error?**\r\n\r\nFull stack trace: \r\n\r\n    java.sql.SQLRecoverableException: IO Error: Got minus one from a read call\r\n    \tat oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:489)\r\n    \tat oracle.jdbc.driver.PhysicalConnection.&lt;init&gt;(PhysicalConnection.java:553)\r\n    \tat oracle.jdbc.driver.T4CConnection.&lt;init&gt;(T4CConnection.java:254)\r\n    \tat oracle.jdbc.driver.T4CDriverExtension.getConnection(T4CDriverExtension.java:32)\r\n    \tat oracle.jdbc.driver.OracleDriver.connect(OracleDriver.java:528)\r\n    \tat java.sql.DriverManager.getConnection(DriverManager.java:579)\r\n    \tat java.sql.DriverManager.getConnection(DriverManager.java:243)\r\n    \tat com.cwd.facile.db.Database.&lt;init&gt;(Database.java:44)\r\n    \tat com.cwd.facile.ns.NetSuiteRequestBased.&lt;init&gt;(NetSuiteRequestBased.java:29)\r\n    \tat com.cwd.facile.ns.CommonOperations.isInventoryItem(CommonOperations.java:205)\r\n    \tat com.cwd.facile.ns.CommonOperations.findItemIdByName(CommonOperations.java:188)\r\n    \tat com.cwd.facile.ns.CommonOperations.createSalesOrder(CommonOperations.java:970)\r\n    \tat com.cwd.facile.Main.main(Main.java:47)\r\n    Caused by: oracle.net.ns.NetException: Got minus one from a read call\r\n    \tat oracle.net.ns.Packet.receive(Packet.java:311)\r\n    \tat oracle.net.ns.NSProtocol.connect(NSProtocol.java:300)\r\n    \tat oracle.jdbc.driver.T4CConnection.connect(T4CConnection.java:1140)\r\n    \tat oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:340)\r\n    \t... 12 more\r\n\r\nDatabase.java line 44: `setConn(DriverManager.getConnection(getUrl()));`\r\n\r\nOther info: \r\n\r\n- I thought it was a bad JDBC url, but it does work, sometimes for days on end before failing. \r\n- Amazon RDS is a managed instance and configuration changes may not be possible\r\n- I am using ojdbc6.jar for connectivity  ","title":"How to approach a &quot;Got minus one from a read call&quot; error when connecting to an Amazon RDS Oracle instance","body":"<p>I'm running Oracle 11GR2 on an Amazon RDS instance. occasionally I get an <code>IO Error: Got minus one from a read call</code> when making a call to <code>DriverManager.getConnection(getUrl())</code> and I'm not sure why. Other applications work correctly. </p>\n\n<p>To further confuse things, the error will correct itself on occasion (following next iteration of the program). </p>\n\n<p><strong>How should I approach a \"Got minus one from a read call\" error?</strong></p>\n\n<p>Full stack trace: </p>\n\n<pre><code>java.sql.SQLRecoverableException: IO Error: Got minus one from a read call\n    at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:489)\n    at oracle.jdbc.driver.PhysicalConnection.&lt;init&gt;(PhysicalConnection.java:553)\n    at oracle.jdbc.driver.T4CConnection.&lt;init&gt;(T4CConnection.java:254)\n    at oracle.jdbc.driver.T4CDriverExtension.getConnection(T4CDriverExtension.java:32)\n    at oracle.jdbc.driver.OracleDriver.connect(OracleDriver.java:528)\n    at java.sql.DriverManager.getConnection(DriverManager.java:579)\n    at java.sql.DriverManager.getConnection(DriverManager.java:243)\n    at com.cwd.facile.db.Database.&lt;init&gt;(Database.java:44)\n    at com.cwd.facile.ns.NetSuiteRequestBased.&lt;init&gt;(NetSuiteRequestBased.java:29)\n    at com.cwd.facile.ns.CommonOperations.isInventoryItem(CommonOperations.java:205)\n    at com.cwd.facile.ns.CommonOperations.findItemIdByName(CommonOperations.java:188)\n    at com.cwd.facile.ns.CommonOperations.createSalesOrder(CommonOperations.java:970)\n    at com.cwd.facile.Main.main(Main.java:47)\nCaused by: oracle.net.ns.NetException: Got minus one from a read call\n    at oracle.net.ns.Packet.receive(Packet.java:311)\n    at oracle.net.ns.NSProtocol.connect(NSProtocol.java:300)\n    at oracle.jdbc.driver.T4CConnection.connect(T4CConnection.java:1140)\n    at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:340)\n    ... 12 more\n</code></pre>\n\n<p>Database.java line 44: <code>setConn(DriverManager.getConnection(getUrl()));</code></p>\n\n<p>Other info: </p>\n\n<ul>\n<li>I thought it was a bad JDBC url, but it does work, sometimes for days on end before failing. </li>\n<li>Amazon RDS is a managed instance and configuration changes may not be possible</li>\n<li>I am using ojdbc6.jar for connectivity  </li>\n</ul>\n"},{"tags":["java","character-encoding","google-cloud-functions","google-cloud-messaging"],"answers":[{"tags":[],"owner":{"account_id":9588915,"reputation":629,"user_id":7120574,"display_name":"0x4b50"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1642959268,"creation_date":1642959268,"answer_id":70824772,"question_id":70824529,"body_markdown":"The solution was to set the build environment variables as flag with the deploy command:\r\n\r\n```bash\r\n$ gcloud functions deploy my-function ... --set-build-env-vars=JAVA_TOOL_OPTIONS=-Dfile.encoding=&quot;UTF-8&quot;\r\n```\r\n\r\nI still don&#39;t understand why this is necessary if the default charset is also UTF-8 without that command flag. ","title":"Google Cloud Messaging displays special characters wrong","body":"<p>The solution was to set the build environment variables as flag with the deploy command:</p>\n<pre class=\"lang-sh prettyprint-override\"><code>$ gcloud functions deploy my-function ... --set-build-env-vars=JAVA_TOOL_OPTIONS=-Dfile.encoding=&quot;UTF-8&quot;\n</code></pre>\n<p>I still don't understand why this is necessary if the default charset is also UTF-8 without that command flag.</p>\n"},{"tags":[],"owner":{"account_id":30009918,"reputation":1,"user_id":22997806,"display_name":"MANIKANDAN RAJASEKARAN"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701151017,"creation_date":1701151017,"answer_id":77561627,"question_id":70824529,"body_markdown":"Adding  source encoding in pom.xml properties resolves the issue.\r\n\r\n     &lt;properties&gt;\r\n       &lt;maven.compiler.target&gt;11&lt;/maven.compiler.target&gt;\r\n       &lt;maven.compiler.source&gt;11&lt;/maven.compiler.source&gt;\r\n      &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n    \r\n     &lt;/properties&gt;","title":"Google Cloud Messaging displays special characters wrong","body":"<p>Adding  source encoding in pom.xml properties resolves the issue.</p>\n<pre><code> &lt;properties&gt;\n   &lt;maven.compiler.target&gt;11&lt;/maven.compiler.target&gt;\n   &lt;maven.compiler.source&gt;11&lt;/maven.compiler.source&gt;\n  &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n\n &lt;/properties&gt;\n</code></pre>\n"}],"owner":{"account_id":9588915,"reputation":629,"user_id":7120574,"display_name":"0x4b50"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":354,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1701151017,"creation_date":1642957615,"question_id":70824529,"body_markdown":"I have a Google Cloud Function (GCF) that sends a Push Notification via Google Cloud Messaging (GCM). The title and body of the notification contain special characters (&#228;, &#246;, &#252;). The problem is that the notification fails to display these special characters correctly on the smartphone. Instead, it shows &#39;??&#39;. My first guess was that the charset of the JVM of the GCF was wrong but I checked that with `Charset.defaultCharset()` and `System.getProperty(&quot;file.enconding&quot;)`. Both return UTF-8. But nevertheless, even log messages are showing &#39;??&#39; instead of the special characters. Is the GCF environment using another charset that the default one?\r\n\r\nAnybody has an idea how to find that out? Or how to solve it?\r\n\r\nEDIT: Running the function locally on my machine has no problems displaying special characters.","title":"Google Cloud Messaging displays special characters wrong","body":"<p>I have a Google Cloud Function (GCF) that sends a Push Notification via Google Cloud Messaging (GCM). The title and body of the notification contain special characters (ä, ö, ü). The problem is that the notification fails to display these special characters correctly on the smartphone. Instead, it shows '??'. My first guess was that the charset of the JVM of the GCF was wrong but I checked that with <code>Charset.defaultCharset()</code> and <code>System.getProperty(&quot;file.enconding&quot;)</code>. Both return UTF-8. But nevertheless, even log messages are showing '??' instead of the special characters. Is the GCF environment using another charset that the default one?</p>\n<p>Anybody has an idea how to find that out? Or how to solve it?</p>\n<p>EDIT: Running the function locally on my machine has no problems displaying special characters.</p>\n"},{"tags":["java","spring-webflux","project-reactor","reactor","reactive-streams"],"comments":[{"owner":{"account_id":261142,"reputation":47108,"user_id":545127,"accept_rate":69,"display_name":"Raedwald"},"score":0,"creation_date":1620749536,"post_id":67489837,"comment_id":119290746,"body_markdown":"So, you want to collect the friends from a Flux into a list?","body":"So, you want to collect the friends from a Flux into a list?"}],"answers":[{"tags":[],"owner":{"account_id":264830,"reputation":70811,"user_id":551406,"accept_rate":95,"display_name":"Michael Berry"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1620752220,"creation_date":1620752220,"answer_id":67491198,"question_id":67489837,"body_markdown":"From your question I assume you want to create a *single* person object which contains the name &amp; age populated from your `Mono&lt;PersonalInfo&gt;`, and the friends list from your `Flux&lt;Person&gt;`.\r\n\r\nYour attempt is pretty close:\r\n\r\n    Flux&lt;Person&gt; person = Flux.zip(Person, Friend, (person, friend) -&gt; new Person(person, friend));\r\n\r\nIn particular, the `zip` operator with the overload that takes two publishers &amp; a combinator is exactly the correct thing to use here. However, a couple of things that need changing:\r\n\r\n - You want a *single* `Person` object, so that should be a `Mono&lt;Person&gt;` (and associated `Mono.zip()`.\r\n - As per the comment, you need to convert your Flux into a list, which you can do so with the `collectList()` oeprator.\r\n\r\nSo putting that together, you end up with something like:\r\n\r\n    Mono&lt;Person&gt; person = Flux.zip(personalInfo, friendsInfo.collectList(), (personalInfo, friendsList) -&gt; new Person(personalInfo, friendsList));\r\n\r\n...which should give you what you&#39;re after.","title":"How to combine a Mono and a Flux to create one object?","body":"<p>From your question I assume you want to create a <em>single</em> person object which contains the name &amp; age populated from your <code>Mono&lt;PersonalInfo&gt;</code>, and the friends list from your <code>Flux&lt;Person&gt;</code>.</p>\n<p>Your attempt is pretty close:</p>\n<pre><code>Flux&lt;Person&gt; person = Flux.zip(Person, Friend, (person, friend) -&gt; new Person(person, friend));\n</code></pre>\n<p>In particular, the <code>zip</code> operator with the overload that takes two publishers &amp; a combinator is exactly the correct thing to use here. However, a couple of things that need changing:</p>\n<ul>\n<li>You want a <em>single</em> <code>Person</code> object, so that should be a <code>Mono&lt;Person&gt;</code> (and associated <code>Mono.zip()</code>.</li>\n<li>As per the comment, you need to convert your Flux into a list, which you can do so with the <code>collectList()</code> oeprator.</li>\n</ul>\n<p>So putting that together, you end up with something like:</p>\n<pre><code>Mono&lt;Person&gt; person = Flux.zip(personalInfo, friendsInfo.collectList(), (personalInfo, friendsList) -&gt; new Person(personalInfo, friendsList));\n</code></pre>\n<p>...which should give you what you're after.</p>\n"},{"tags":[],"owner":{"account_id":15713593,"reputation":370,"user_id":11338315,"display_name":"Harish Kumar Saini"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701150548,"creation_date":1701150548,"answer_id":77561609,"question_id":67489837,"body_markdown":"You can also do same with **Mono.zip**\r\n\r\n```\r\nMono&lt;Person&gt; person = Mono.zip(personalInfo, friendsInfo.collectList())\r\n.map(zippedMono -&gt; new Person(zippedMono.getT1(), zipeedMono.getT2());\r\n```\r\n\r\nI prefer to use Mono for code readability.","title":"How to combine a Mono and a Flux to create one object?","body":"<p>You can also do same with <strong>Mono.zip</strong></p>\n<pre><code>Mono&lt;Person&gt; person = Mono.zip(personalInfo, friendsInfo.collectList())\n.map(zippedMono -&gt; new Person(zippedMono.getT1(), zipeedMono.getT2());\n</code></pre>\n<p>I prefer to use Mono for code readability.</p>\n"}],"owner":{"account_id":17684349,"reputation":65,"user_id":12837535,"display_name":"koukou"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2445,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":67491198,"answer_count":2,"score":0,"last_activity_date":1701150548,"creation_date":1620746863,"question_id":67489837,"body_markdown":"I want to create one object and the object is made up of a Mono and a Flux.\r\nSuppose there are 2 services `getPersonalInfo` and `getFriendsInfo`. `Person` needs both services to create an object. Zipping only takes the first element of `friends` object since there is only one `personalInfo` as it is Mono, but `friendsInfo` might have multiple `friend` objects in them. I want to set the `friendsInfo` to `friend` in `Person`. \r\n\r\n    class Person{\r\n        String name;\r\n        String age;\r\n        List&lt;Friend&gt; friend;\r\n    }\r\n    \r\n    Mono&lt;PersonalInfo&gt; personalInfo = personService.getPerson();// has name and age\r\n    Flux&lt;Friend&gt; friendsInfo = friendsService.getFriends();\r\n    // here I want to create Person object with personalInfo and friendsInfo\r\n    Flux&lt;Person&gt; person = Flux.zip(personalInfo, friendsInfo, (person, friend) -&gt; new Person(person, friend));","title":"How to combine a Mono and a Flux to create one object?","body":"<p>I want to create one object and the object is made up of a Mono and a Flux.\nSuppose there are 2 services <code>getPersonalInfo</code> and <code>getFriendsInfo</code>. <code>Person</code> needs both services to create an object. Zipping only takes the first element of <code>friends</code> object since there is only one <code>personalInfo</code> as it is Mono, but <code>friendsInfo</code> might have multiple <code>friend</code> objects in them. I want to set the <code>friendsInfo</code> to <code>friend</code> in <code>Person</code>.</p>\n<pre><code>class Person{\n    String name;\n    String age;\n    List&lt;Friend&gt; friend;\n}\n\nMono&lt;PersonalInfo&gt; personalInfo = personService.getPerson();// has name and age\nFlux&lt;Friend&gt; friendsInfo = friendsService.getFriends();\n// here I want to create Person object with personalInfo and friendsInfo\nFlux&lt;Person&gt; person = Flux.zip(personalInfo, friendsInfo, (person, friend) -&gt; new Person(person, friend));\n</code></pre>\n"},{"tags":["java","javafx","gridpane"],"comments":[{"owner":{"account_id":2819940,"reputation":12538,"user_id":2423906,"accept_rate":100,"display_name":"SedJ601"},"score":1,"creation_date":1701116149,"post_id":77559520,"comment_id":136732955,"body_markdown":"Create an [MCVE](https://meta.stackoverflow.com/questions/366988/what-does-mcve-mean).","body":"Create an <a href=\"https://meta.stackoverflow.com/questions/366988/what-does-mcve-mean\">MCVE</a>."},{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1701116268,"post_id":77559520,"comment_id":136732972,"body_markdown":"*&quot;I&#39;m encountering difficulties when handling multiple circles&quot;* -&gt; What is the difficulty?  Can you describe what the problem is (in words)?","body":"<i>&quot;I&#39;m encountering difficulties when handling multiple circles&quot;</i> -&gt; What is the difficulty?  Can you describe what the problem is (in words)?"},{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":1,"creation_date":1701116805,"post_id":77559520,"comment_id":136733059,"body_markdown":"The code provided doesn&#39;t compile on its own.  Provide something to reproduce the issue via copy and paste with no change or addition (and removing unused methods like `isRowEmpty`).  If you will use FXML in that, then provide the FXML and controller used, otherwise provide Java code that generates the missing parts of the scene graph.","body":"The code provided doesn&#39;t compile on its own.  Provide something to reproduce the issue via copy and paste with no change or addition (and removing unused methods like <code>isRowEmpty</code>).  If you will use FXML in that, then provide the FXML and controller used, otherwise provide Java code that generates the missing parts of the scene graph."},{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":1,"creation_date":1701116808,"post_id":77559520,"comment_id":136733060,"body_markdown":"Don&#39;t use a `java.util.Timer` for animation, use [JavaFX animation capabilities](https://stackoverflow.com/a/60685975/1155209).  [Don&#39;t create a new controller in code](https://stackoverflow.com/questions/77542904/cannot-invoke-javafx-scene-control-tablecolumn-setcellvaluefactoryjavafx-util/77546686#77546686) for a task like this.","body":"Don&#39;t use a <code>java.util.Timer</code> for animation, use <a href=\"https://stackoverflow.com/a/60685975/1155209\">JavaFX animation capabilities</a>.  <a href=\"https://stackoverflow.com/questions/77542904/cannot-invoke-javafx-scene-control-tablecolumn-setcellvaluefactoryjavafx-util/77546686#77546686\">Don&#39;t create a new controller in code</a> for a task like this."},{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":1,"creation_date":1701117098,"post_id":77559520,"comment_id":136733098,"body_markdown":"Don&#39;t create variables you never use.  Most IDEs will have some way to show this, [like this](https://stackoverflow.com/questions/6587729/how-to-use-intellij-idea-to-find-all-unused-code), or they will just automatically highlight the unused code in the editor.   An IDE can also [indent code correctly for you](https://www.jetbrains.com/help/idea/reformat-and-rearrange-code.html). Follow [naming conventions](https://www.oracle.com/java/technologies/javase/codeconventions-namingconventions.html).","body":"Don&#39;t create variables you never use.  Most IDEs will have some way to show this, <a href=\"https://stackoverflow.com/questions/6587729/how-to-use-intellij-idea-to-find-all-unused-code\">like this</a>, or they will just automatically highlight the unused code in the editor.   An IDE can also <a href=\"https://www.jetbrains.com/help/idea/reformat-and-rearrange-code.html\" rel=\"nofollow noreferrer\">indent code correctly for you</a>. Follow <a href=\"https://www.oracle.com/java/technologies/javase/codeconventions-namingconventions.html\" rel=\"nofollow noreferrer\">naming conventions</a>."},{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":1,"creation_date":1701117212,"post_id":77559520,"comment_id":136733114,"body_markdown":"Also please, please stick to one question per question.  If you have other questions such as adjusting animation speed, then ask them as separate questions,","body":"Also please, please stick to one question per question.  If you have other questions such as adjusting animation speed, then ask them as separate questions,"}],"answers":[{"tags":[],"owner":{"account_id":2819940,"reputation":12538,"user_id":2423906,"accept_rate":100,"display_name":"SedJ601"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1701122339,"creation_date":1701120610,"answer_id":77560050,"question_id":77559520,"body_markdown":"You are asking more than one question. Keep your post at one question per post. Here is something that can maybe help you move your circles.\r\n\r\nI would use `Timeline` over `Timer`. \r\n\r\n\r\n**`Timeline` Example**\r\n\r\n```\r\nimport java.util.ArrayList;\r\nimport javafx.animation.*;\r\nimport javafx.application.Application;\r\nimport javafx.scene.Scene;\r\nimport javafx.scene.layout.*;\r\nimport javafx.scene.paint.Color;\r\nimport javafx.scene.shape.Circle;\r\nimport javafx.stage.Stage;\r\nimport javafx.util.Duration;\r\n\r\nimport java.util.LinkedHashMap;\r\nimport java.util.List;\r\nimport java.util.Map;\r\nimport java.util.concurrent.atomic.AtomicInteger;\r\nimport javafx.event.ActionEvent;\r\nimport javafx.scene.control.Button;\r\n\r\npublic class Mavenproject3 extends Application {\r\n    final int ROW_COUNT = 8;\r\n    final int COLUMN_COUNT = 1;\r\n\r\n    \r\n    @Override\r\n    public void start(Stage stage){\r\n        \r\n        GridPane gridPane = new GridPane();\r\n        gridPane.setGridLinesVisible(true);\r\n        RowConstraints rowConstraints = new RowConstraints(100, 100, 100);\r\n        ColumnConstraints columnConstraints = new ColumnConstraints(100, 100, 100);\r\n        for(int i = 0; i &lt; ROW_COUNT; i++)\r\n        {\r\n            gridPane.getRowConstraints().add(rowConstraints);\r\n        }\r\n        \r\n        for(int i = 0; i &lt; COLUMN_COUNT; i++)\r\n        {\r\n            gridPane.getColumnConstraints().add(columnConstraints);\r\n        }\r\n        \r\n        Circle c1 = new Circle(22.5,Color.BLUE);\r\n        Circle c2 = new Circle(22.5,Color.RED);\r\n        Circle c3 = new Circle(22.5,Color.YELLOW);\r\n        Circle c4 = new Circle(22.5,Color.GREEN);\r\n        Map&lt;Circle, Integer&gt; circleMap = new LinkedHashMap();        \r\n        circleMap.put(c1, -1);\r\n        circleMap.put(c2, -1);\r\n        circleMap.put(c3, -1);\r\n        circleMap.put(c4, -1);\r\n        List&lt;Circle&gt; keys = new ArrayList(circleMap.keySet());\r\n        \r\n        AtomicInteger addCircleCounter = new AtomicInteger();\r\n        AtomicInteger cycleCounter = new AtomicInteger();\r\n        \r\n        Timeline oneSecondsWonder = new Timeline(new KeyFrame(Duration.seconds(1), (ActionEvent event) -&gt; {\r\n            //Moving circles\r\n            if(cycleCounter.get() &gt; 0 &amp;&amp; cycleCounter.get() &lt; circleMap.size() + ROW_COUNT)\r\n            {\r\n                for(Circle key : keys)\r\n                {\r\n                    if(circleMap.get(key) &gt; -1)\r\n                    {\r\n                        //System.out.println(&quot;Moving Circle &quot; + key.getFill()+ &quot; to &quot; + circleMap.get(key));\r\n                        if(circleMap.get(key) &gt;= ROW_COUNT - 1 )\r\n                        {\r\n                            gridPane.getChildren().remove(key);\r\n                        }\r\n                        else\r\n                        {\r\n                            circleMap.merge(key, 1, Integer::sum);\r\n                            gridPane.getChildren().remove(key);                        \r\n                            gridPane.add(key, 0, circleMap.get(key));\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            \r\n            //Add Circle to GridPane\r\n            if(addCircleCounter.get()&lt; circleMap.size())\r\n            {\r\n                //System.out.println(&quot;Add Circle &quot; + keys.get(addCircleCounter.get()).getFill()+ &quot; to GridPane!&quot;);\r\n                gridPane.add(keys.get( addCircleCounter.get()), 0, 0);   \r\n                circleMap.merge(keys.get( addCircleCounter.get()), 1, Integer::sum);\r\n            }  \r\n           \r\n            cycleCounter.getAndIncrement();\r\n            addCircleCounter.getAndIncrement();\r\n        }));\r\n        oneSecondsWonder.setCycleCount(Timeline.INDEFINITE);\r\n        oneSecondsWonder.play();\r\n        \r\n        Button btnDecreaseSpeed = new Button(&quot;&lt;&quot;);\r\n        btnDecreaseSpeed.setOnAction((ActionEvent event) -&gt; {\r\n            double rate = oneSecondsWonder.getRate();\r\n            if (rate &gt; 1) {\r\n                oneSecondsWonder.setRate(oneSecondsWonder.getRate() - 1);\r\n                System.out.println(&quot;Speed: &quot; + oneSecondsWonder.getRate());\r\n            }\r\n        });\r\n        \r\n        Button btnIncreaseSpeed = new Button(&quot;&gt;&quot;);\r\n        btnIncreaseSpeed.setOnAction((ActionEvent event) -&gt; {\r\n            double rate = oneSecondsWonder.getCurrentRate();\r\n            if (rate &lt; 10) {\r\n                oneSecondsWonder.setRate(oneSecondsWonder.getRate() + 1);\r\n                System.out.println(&quot;Speed: &quot; + oneSecondsWonder.getRate());\r\n            }\r\n        });        \r\n        \r\n        VBox root = new VBox(gridPane, new HBox(btnDecreaseSpeed, btnIncreaseSpeed));\r\n        Scene scene = new Scene(root);\r\n        stage.setTitle(&quot;Team 1&quot;);\r\n        stage.setResizable(true); // Display the Resizable\r\n        stage.setScene(scene);\r\n        stage.show();\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        launch();\r\n    }\r\n}\r\n```\r\n\r\n**Edit**\r\nAdded Buttons to increase and decrease speed. Output not updated!\r\n\r\n**Output**\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/dVXod.gif","title":"Difficulty Moving Multiple Circles Through JavaFx&#39;s GridPane","body":"<p>You are asking more than one question. Keep your post at one question per post. Here is something that can maybe help you move your circles.</p>\n<p>I would use <code>Timeline</code> over <code>Timer</code>.</p>\n<p><strong><code>Timeline</code> Example</strong></p>\n<pre><code>import java.util.ArrayList;\nimport javafx.animation.*;\nimport javafx.application.Application;\nimport javafx.scene.Scene;\nimport javafx.scene.layout.*;\nimport javafx.scene.paint.Color;\nimport javafx.scene.shape.Circle;\nimport javafx.stage.Stage;\nimport javafx.util.Duration;\n\nimport java.util.LinkedHashMap;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.concurrent.atomic.AtomicInteger;\nimport javafx.event.ActionEvent;\nimport javafx.scene.control.Button;\n\npublic class Mavenproject3 extends Application {\n    final int ROW_COUNT = 8;\n    final int COLUMN_COUNT = 1;\n\n    \n    @Override\n    public void start(Stage stage){\n        \n        GridPane gridPane = new GridPane();\n        gridPane.setGridLinesVisible(true);\n        RowConstraints rowConstraints = new RowConstraints(100, 100, 100);\n        ColumnConstraints columnConstraints = new ColumnConstraints(100, 100, 100);\n        for(int i = 0; i &lt; ROW_COUNT; i++)\n        {\n            gridPane.getRowConstraints().add(rowConstraints);\n        }\n        \n        for(int i = 0; i &lt; COLUMN_COUNT; i++)\n        {\n            gridPane.getColumnConstraints().add(columnConstraints);\n        }\n        \n        Circle c1 = new Circle(22.5,Color.BLUE);\n        Circle c2 = new Circle(22.5,Color.RED);\n        Circle c3 = new Circle(22.5,Color.YELLOW);\n        Circle c4 = new Circle(22.5,Color.GREEN);\n        Map&lt;Circle, Integer&gt; circleMap = new LinkedHashMap();        \n        circleMap.put(c1, -1);\n        circleMap.put(c2, -1);\n        circleMap.put(c3, -1);\n        circleMap.put(c4, -1);\n        List&lt;Circle&gt; keys = new ArrayList(circleMap.keySet());\n        \n        AtomicInteger addCircleCounter = new AtomicInteger();\n        AtomicInteger cycleCounter = new AtomicInteger();\n        \n        Timeline oneSecondsWonder = new Timeline(new KeyFrame(Duration.seconds(1), (ActionEvent event) -&gt; {\n            //Moving circles\n            if(cycleCounter.get() &gt; 0 &amp;&amp; cycleCounter.get() &lt; circleMap.size() + ROW_COUNT)\n            {\n                for(Circle key : keys)\n                {\n                    if(circleMap.get(key) &gt; -1)\n                    {\n                        //System.out.println(&quot;Moving Circle &quot; + key.getFill()+ &quot; to &quot; + circleMap.get(key));\n                        if(circleMap.get(key) &gt;= ROW_COUNT - 1 )\n                        {\n                            gridPane.getChildren().remove(key);\n                        }\n                        else\n                        {\n                            circleMap.merge(key, 1, Integer::sum);\n                            gridPane.getChildren().remove(key);                        \n                            gridPane.add(key, 0, circleMap.get(key));\n                        }\n                    }\n                }\n            }\n            \n            //Add Circle to GridPane\n            if(addCircleCounter.get()&lt; circleMap.size())\n            {\n                //System.out.println(&quot;Add Circle &quot; + keys.get(addCircleCounter.get()).getFill()+ &quot; to GridPane!&quot;);\n                gridPane.add(keys.get( addCircleCounter.get()), 0, 0);   \n                circleMap.merge(keys.get( addCircleCounter.get()), 1, Integer::sum);\n            }  \n           \n            cycleCounter.getAndIncrement();\n            addCircleCounter.getAndIncrement();\n        }));\n        oneSecondsWonder.setCycleCount(Timeline.INDEFINITE);\n        oneSecondsWonder.play();\n        \n        Button btnDecreaseSpeed = new Button(&quot;&lt;&quot;);\n        btnDecreaseSpeed.setOnAction((ActionEvent event) -&gt; {\n            double rate = oneSecondsWonder.getRate();\n            if (rate &gt; 1) {\n                oneSecondsWonder.setRate(oneSecondsWonder.getRate() - 1);\n                System.out.println(&quot;Speed: &quot; + oneSecondsWonder.getRate());\n            }\n        });\n        \n        Button btnIncreaseSpeed = new Button(&quot;&gt;&quot;);\n        btnIncreaseSpeed.setOnAction((ActionEvent event) -&gt; {\n            double rate = oneSecondsWonder.getCurrentRate();\n            if (rate &lt; 10) {\n                oneSecondsWonder.setRate(oneSecondsWonder.getRate() + 1);\n                System.out.println(&quot;Speed: &quot; + oneSecondsWonder.getRate());\n            }\n        });        \n        \n        VBox root = new VBox(gridPane, new HBox(btnDecreaseSpeed, btnIncreaseSpeed));\n        Scene scene = new Scene(root);\n        stage.setTitle(&quot;Team 1&quot;);\n        stage.setResizable(true); // Display the Resizable\n        stage.setScene(scene);\n        stage.show();\n    }\n\n    public static void main(String[] args) {\n        launch();\n    }\n}\n</code></pre>\n<p><strong>Edit</strong>\nAdded Buttons to increase and decrease speed. Output not updated!</p>\n<p><strong>Output</strong></p>\n<p><a href=\"https://i.stack.imgur.com/dVXod.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dVXod.gif\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":30006845,"reputation":9,"user_id":22995506,"display_name":"Jam2002"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":108,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1701149985,"creation_date":1701114109,"question_id":77559520,"body_markdown":"I am currently facing challenges while working with GridPane. My objective is to move a specified number of generated circles through the cells of a GridPane. I have 5 GridPane and in every one of them consists of 10 vertical cells, and I aim to move the circles one cell at a time, starting from 0 and progressing until the last cell in every GridPane, where the circle should disappear.\r\n\r\nI have successfully moved a single circle, but I&#39;m encountering difficulties when handling multiple circles and orchestrating their movement in a sequential line. Additionally, I&#39;m seeking guidance on adjusting the speed of the circles individually. I would like to incorporate a speed factor, so if there is a slow-moving circle, it will cause a delay in the overall movement of the line.\r\n\r\nHere is the relevant code snippet:\r\n\r\n```\r\npackage phase1;\r\n\r\nimport javafx.animation.*;\r\nimport Classes.Person;\r\nimport javafx.application.Application;\r\nimport javafx.application.Platform;\r\nimport javafx.fxml.FXMLLoader;\r\nimport javafx.scene.Group;\r\nimport javafx.scene.Parent;\r\nimport javafx.scene.Scene;\r\nimport javafx.scene.layout.*;\r\nimport javafx.scene.paint.Color;\r\nimport javafx.scene.shape.Circle;\r\nimport javafx.scene.shape.Line;\r\nimport javafx.stage.Stage;\r\nimport javafx.util.Duration;\r\n\r\nimport java.io.IOException;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\nimport java.util.Timer;\r\nimport java.util.TimerTask;\r\nimport java.util.concurrent.atomic.AtomicBoolean;\r\nimport java.util.concurrent.atomic.AtomicInteger;\r\n\r\npublic class Phase1 extends Application {\r\n    ArrayList&lt;Circle&gt; PEOPLE;\r\n    private List&lt;Circle&gt; objects;\r\n    private Timer timer;\r\n    private boolean isRowEmpty(GridPane gridPane, int rowIndex) {\r\n        for (javafx.scene.Node node : gridPane.getChildren()) {\r\n            Integer nodeRowIndex = GridPane.getRowIndex(node);\r\n            if (nodeRowIndex != null &amp;&amp; nodeRowIndex.intValue() == rowIndex) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n\r\n    \r\n    @Override\r\n    public void start(Stage stage) throws InterruptedException, IOException {\r\n\r\n        // Create the root container (AnchorPane)\r\n        Parent fxmlRoot = new FXMLLoader().load(getClass().getResource(&quot;/PHASE.fxml&quot;));\r\n        // Create the controller and move the circles\r\n        Phase1Controller controller = new Phase1Controller();\r\n\r\n\r\n        Group root = new Group(); //Creating a Group\r\n        root.getChildren().add(fxmlRoot);\r\n        GridPane graid1 = (GridPane) fxmlRoot.lookup(&quot;#Grid2&quot;);\r\n        objects = new ArrayList&lt;&gt;();\r\n        //PEOPLE = Phase1Controller.show_circles(fxmlRoot, 10);\r\n        ArrayList&lt;Person&gt; people = Main1.generatePeople(5);\r\n        Circle c1 = people.get(0).circle;\r\n        Circle c2 = new Circle(22.5,Color.RED);\r\n\r\n        timer = new Timer();\r\n        graid1.add(c1,0,0);\r\n        int RowIndex = 0;\r\n\r\n        AtomicInteger rowIndex = new AtomicInteger(0);\r\n        AtomicBoolean ss = new AtomicBoolean(true);\r\n        timer.scheduleAtFixedRate(new TimerTask() {\r\n            @Override\r\n            public void run() {\r\n                Platform.runLater(() -&gt; {\r\n                    int currentRowIndex = rowIndex.getAndIncrement();\r\n                    if (currentRowIndex &gt;0){\r\n                        //graid1.getChildren().set(currentRowIndex-1,c2);\r\n\r\n                        }\r\n\r\n                        // Add the node to the new row\r\n                    graid1.getChildren().remove(c1);\r\n\r\n                    // Add the node to the new row\r\n                    graid1.add(c1, 0, currentRowIndex);\r\n                    int pp = graid1.getRowConstraints().size();\r\n                    System.out.println(pp);\r\n                    if(pp == currentRowIndex){ graid1.getChildren().remove(c1); timer.cancel();}\r\n\r\n                });\r\n\r\n\r\n            }\r\n        }, 0, 1000);// Run every 1 second\r\n\r\n\r\n\r\n\r\n            // Create a scene and set it to the stage\r\n            Scene scene = new Scene(root);\r\n        stage.setTitle(&quot;Team 1&quot;);\r\n        stage.setResizable(true); // Display the Resizable\r\n        stage.setScene(scene);\r\n        stage.show();\r\n\r\n        }\r\n\r\n    public static void main(String[] args) {\r\n        launch();\r\n    }\r\n\r\n\r\n    }\r\n```\r\n\r\n\r\nAnd here is a gif from the GUI, illustrating only one circle in motion:\r\n\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/6NjjC.gif","title":"Difficulty Moving Multiple Circles Through JavaFx&#39;s GridPane","body":"<p>I am currently facing challenges while working with GridPane. My objective is to move a specified number of generated circles through the cells of a GridPane. I have 5 GridPane and in every one of them consists of 10 vertical cells, and I aim to move the circles one cell at a time, starting from 0 and progressing until the last cell in every GridPane, where the circle should disappear.</p>\n<p>I have successfully moved a single circle, but I'm encountering difficulties when handling multiple circles and orchestrating their movement in a sequential line. Additionally, I'm seeking guidance on adjusting the speed of the circles individually. I would like to incorporate a speed factor, so if there is a slow-moving circle, it will cause a delay in the overall movement of the line.</p>\n<p>Here is the relevant code snippet:</p>\n<pre><code>package phase1;\n\nimport javafx.animation.*;\nimport Classes.Person;\nimport javafx.application.Application;\nimport javafx.application.Platform;\nimport javafx.fxml.FXMLLoader;\nimport javafx.scene.Group;\nimport javafx.scene.Parent;\nimport javafx.scene.Scene;\nimport javafx.scene.layout.*;\nimport javafx.scene.paint.Color;\nimport javafx.scene.shape.Circle;\nimport javafx.scene.shape.Line;\nimport javafx.stage.Stage;\nimport javafx.util.Duration;\n\nimport java.io.IOException;\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.Timer;\nimport java.util.TimerTask;\nimport java.util.concurrent.atomic.AtomicBoolean;\nimport java.util.concurrent.atomic.AtomicInteger;\n\npublic class Phase1 extends Application {\n    ArrayList&lt;Circle&gt; PEOPLE;\n    private List&lt;Circle&gt; objects;\n    private Timer timer;\n    private boolean isRowEmpty(GridPane gridPane, int rowIndex) {\n        for (javafx.scene.Node node : gridPane.getChildren()) {\n            Integer nodeRowIndex = GridPane.getRowIndex(node);\n            if (nodeRowIndex != null &amp;&amp; nodeRowIndex.intValue() == rowIndex) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    \n    @Override\n    public void start(Stage stage) throws InterruptedException, IOException {\n\n        // Create the root container (AnchorPane)\n        Parent fxmlRoot = new FXMLLoader().load(getClass().getResource(&quot;/PHASE.fxml&quot;));\n        // Create the controller and move the circles\n        Phase1Controller controller = new Phase1Controller();\n\n\n        Group root = new Group(); //Creating a Group\n        root.getChildren().add(fxmlRoot);\n        GridPane graid1 = (GridPane) fxmlRoot.lookup(&quot;#Grid2&quot;);\n        objects = new ArrayList&lt;&gt;();\n        //PEOPLE = Phase1Controller.show_circles(fxmlRoot, 10);\n        ArrayList&lt;Person&gt; people = Main1.generatePeople(5);\n        Circle c1 = people.get(0).circle;\n        Circle c2 = new Circle(22.5,Color.RED);\n\n        timer = new Timer();\n        graid1.add(c1,0,0);\n        int RowIndex = 0;\n\n        AtomicInteger rowIndex = new AtomicInteger(0);\n        AtomicBoolean ss = new AtomicBoolean(true);\n        timer.scheduleAtFixedRate(new TimerTask() {\n            @Override\n            public void run() {\n                Platform.runLater(() -&gt; {\n                    int currentRowIndex = rowIndex.getAndIncrement();\n                    if (currentRowIndex &gt;0){\n                        //graid1.getChildren().set(currentRowIndex-1,c2);\n\n                        }\n\n                        // Add the node to the new row\n                    graid1.getChildren().remove(c1);\n\n                    // Add the node to the new row\n                    graid1.add(c1, 0, currentRowIndex);\n                    int pp = graid1.getRowConstraints().size();\n                    System.out.println(pp);\n                    if(pp == currentRowIndex){ graid1.getChildren().remove(c1); timer.cancel();}\n\n                });\n\n\n            }\n        }, 0, 1000);// Run every 1 second\n\n\n\n\n            // Create a scene and set it to the stage\n            Scene scene = new Scene(root);\n        stage.setTitle(&quot;Team 1&quot;);\n        stage.setResizable(true); // Display the Resizable\n        stage.setScene(scene);\n        stage.show();\n\n        }\n\n    public static void main(String[] args) {\n        launch();\n    }\n\n\n    }\n</code></pre>\n<p>And here is a gif from the GUI, illustrating only one circle in motion:</p>\n<p><a href=\"https://i.stack.imgur.com/6NjjC.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6NjjC.gif\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","maven","pom.xml","discord-jda"],"comments":[{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":0,"creation_date":1701146245,"post_id":77561367,"comment_id":136736050,"body_markdown":"Not an expert either, did you look at this example documentation page? https://maven.apache.org/plugins/maven-jar-plugin/examples/manifest-customization.html","body":"Not an expert either, did you look at this example documentation page? <a href=\"https://maven.apache.org/plugins/maven-jar-plugin/examples/manifest-customization.html\" rel=\"nofollow noreferrer\">maven.apache.org/plugins/maven-jar-plugin/examples/&hellip;</a>"}],"owner":{"account_id":20955779,"reputation":11,"user_id":15396332,"display_name":"OGwalrus"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1701158735,"answer_count":0,"score":0,"last_activity_date":1701146701,"creation_date":1701145908,"question_id":77561367,"body_markdown":"I have recently been making my first discord bot in java(JDA). Everything was going well until I tried to build the bot into a runnable jar file so I can host the bot on a server. I can build the file using &#39;mvn package&#39;\r\nbut whenever I go to run the jar file I get an error saying &quot;Could not find or load main class&quot;. I tried adding a &lt;mainClass&gt; field to my pom.xml file but it did not work. Here is a copy of my pom.xml file and a screenshot of my file structure. \r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n    &lt;groupId&gt;com.tommy.tombot&lt;/groupId&gt;\r\n    &lt;artifactId&gt;JDA-TomBot&lt;/artifactId&gt;\r\n    &lt;packaging&gt;jar&lt;/packaging&gt;\r\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n    &lt;name&gt;JDA-TomBot&lt;/name&gt;\r\n\r\n    &lt;properties&gt;\r\n        &lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;\r\n        &lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n    &lt;/properties&gt;\r\n\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;net.dv8tion&lt;/groupId&gt;\r\n            &lt;artifactId&gt;JDA&lt;/artifactId&gt;\r\n            &lt;version&gt;5.0.0-beta.18&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;archive&gt;\r\n                        &lt;manifest&gt;\r\n                            \r\n                            &lt;mainClass&gt;com.tommy.tombot.TomnutBot&lt;/mainClass&gt;\r\n                        &lt;/manifest&gt;\r\n                    &lt;/archive&gt;\r\n\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n```\r\n[![[![enter image description here](https://i.stack.imgur.com/oA7Ml.png)](https://i.stack.imgur.com/oA7Ml.png)](https://i.stack.imgur.com/BOH5x.png)](https://i.stack.imgur.com/BOH5x.png)\r\n\r\n\r\nI tried adding a mainClass field to my pom.xml file, however I am very inexperienced when it comes to maven and pom.xml files.","title":"Cannot find main class when running jar file built with maven","body":"<p>I have recently been making my first discord bot in java(JDA). Everything was going well until I tried to build the bot into a runnable jar file so I can host the bot on a server. I can build the file using 'mvn package'\nbut whenever I go to run the jar file I get an error saying &quot;Could not find or load main class&quot;. I tried adding a  field to my pom.xml file but it did not work. Here is a copy of my pom.xml file and a screenshot of my file structure.</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;com.tommy.tombot&lt;/groupId&gt;\n    &lt;artifactId&gt;JDA-TomBot&lt;/artifactId&gt;\n    &lt;packaging&gt;jar&lt;/packaging&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;JDA-TomBot&lt;/name&gt;\n\n    &lt;properties&gt;\n        &lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;net.dv8tion&lt;/groupId&gt;\n            &lt;artifactId&gt;JDA&lt;/artifactId&gt;\n            &lt;version&gt;5.0.0-beta.18&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;archive&gt;\n                        &lt;manifest&gt;\n                            \n                            &lt;mainClass&gt;com.tommy.tombot.TomnutBot&lt;/mainClass&gt;\n                        &lt;/manifest&gt;\n                    &lt;/archive&gt;\n\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/BOH5x.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BOH5x.png\" alt=\"enter image description here\" /></a></p>\n<p>I tried adding a mainClass field to my pom.xml file, however I am very inexperienced when it comes to maven and pom.xml files.</p>\n"},{"tags":["java","spring","spring-boot","spring-cloud-gateway"],"answers":[{"tags":[],"owner":{"account_id":21260902,"reputation":984,"user_id":15641685,"display_name":"Huu Phuong Vu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1701145813,"creation_date":1701145813,"answer_id":77561362,"question_id":77550650,"body_markdown":"there are few things with your code:\r\n1. `SomeFilter` class is not needed, just use the `ModifyRequestBody` directly from your route configuration. If you really need it to achieve something that can&#39;t be done with `ModifyRequestBody`, you have to make it a bean by adding @Component.\r\n2. The syntax for your YAML configuration is incorrect. Please refer the following revised version:\r\n```yaml\r\n      routes:\r\n        - id: order-route-1\r\n          uri: http://localhost:8999/\r\n          predicates:\r\n            - Path=/some/path1\r\n            - Method=POST\r\n          filters:\r\n            - name: ModifyRequestBody\r\n              args:\r\n                inClass: com.xyz.filters.OldType\r\n                outClass: com.xyz.filters.NewType\r\n                rewriteFunction: com.xyz.filters.MyRewriteFunction\r\n                contentType: application/json\r\n```\r\n- `inClass`: The fully qualified class name that represents the structure of the original request body.\r\n- `outClass`: The fully qualified class name that represents the structure of the modified request body.\r\n\r\n- `rewriteFunction`: Refers to the fully qualified class name that implements the RewriteFunction interface for transforming the request body from OriginalType to NewType.\r\n\r\n- `contentType` (optional): Specify this parameter when you want to change the content type of the request.\r\n\r\nLet&#39;s assume that you&#39;re converting `OldType` to `NewType`, below would be the implementation for `RewriteFunction`:\r\n\r\n```java\r\npublic class MyRewriteFunction implements RewriteFunction&lt;OldType, NewType&gt; {\r\n\r\n    @Override\r\n    public Publisher&lt;NewType&gt; apply(ServerWebExchange exchange, OldType originalRequest) {\r\n     \r\n        NewType modifiedRequest = modifyRequest(originalRequest);\r\n        return Mono.just(modifiedRequest);\r\n    }\r\n}\r\n```","title":"Modifying RequestBody in spring gateway","body":"<p>there are few things with your code:</p>\n<ol>\n<li><code>SomeFilter</code> class is not needed, just use the <code>ModifyRequestBody</code> directly from your route configuration. If you really need it to achieve something that can't be done with <code>ModifyRequestBody</code>, you have to make it a bean by adding @Component.</li>\n<li>The syntax for your YAML configuration is incorrect. Please refer the following revised version:</li>\n</ol>\n<pre class=\"lang-yaml prettyprint-override\"><code>      routes:\n        - id: order-route-1\n          uri: http://localhost:8999/\n          predicates:\n            - Path=/some/path1\n            - Method=POST\n          filters:\n            - name: ModifyRequestBody\n              args:\n                inClass: com.xyz.filters.OldType\n                outClass: com.xyz.filters.NewType\n                rewriteFunction: com.xyz.filters.MyRewriteFunction\n                contentType: application/json\n</code></pre>\n<ul>\n<li><p><code>inClass</code>: The fully qualified class name that represents the structure of the original request body.</p>\n</li>\n<li><p><code>outClass</code>: The fully qualified class name that represents the structure of the modified request body.</p>\n</li>\n<li><p><code>rewriteFunction</code>: Refers to the fully qualified class name that implements the RewriteFunction interface for transforming the request body from OriginalType to NewType.</p>\n</li>\n<li><p><code>contentType</code> (optional): Specify this parameter when you want to change the content type of the request.</p>\n</li>\n</ul>\n<p>Let's assume that you're converting <code>OldType</code> to <code>NewType</code>, below would be the implementation for <code>RewriteFunction</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class MyRewriteFunction implements RewriteFunction&lt;OldType, NewType&gt; {\n\n    @Override\n    public Publisher&lt;NewType&gt; apply(ServerWebExchange exchange, OldType originalRequest) {\n     \n        NewType modifiedRequest = modifyRequest(originalRequest);\n        return Mono.just(modifiedRequest);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":36713,"reputation":8168,"user_id":104824,"accept_rate":39,"display_name":"ha22109"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77561362,"answer_count":1,"score":0,"last_activity_date":1701145813,"creation_date":1700978918,"question_id":77550650,"body_markdown":"I want to modify the requestBody before routing it to given URI . Based on docs i am using \r\n\r\n**org.springframework.cloud.gateway.filter.factory.rewrite.ModifyRequestBodyGatewayFilterFactory** to modify the body .  On starting my server , server failed to start with below error \r\nReason: The elements [spring.cloud.gateway.routes[0].filters[0].modifyrequestbody.class] were left unbound.\\n\\nAction:\\n\\nUpdate your application&#39;s configuration\\n&quot;,&quot;context&quot;:&quot;default&quot;}\r\n\r\nBelow is the sample filter and Rewrite function\r\n```@Component\r\n@Slf4j\r\npublic class SomeFilter implements GatewayFilter {\r\n\r\n    private final ModifyRequestBodyGatewayFilterFactory factory;\r\n\r\n    public RedirectionFilter(ModifyRequestBodyGatewayFilterFactory factory) {\r\n        this.factory = factory;\r\n    }\r\n\r\n    @Override\r\n    public Mono&lt;Void&gt; filter(ServerWebExchange exchange, GatewayFilterChain chain) {\r\n        \r\n        ModifyRequestBodyGatewayFilterFactory.Config cfg = new ModifyRequestBodyGatewayFilterFactory.Config();\r\n        cfg.setContentType(&quot;application/json&quot;);\r\n        cfg.setRewriteFunction(String.class, String.class, new MyRewriteFunction());\r\n\r\n\r\n        factory.apply(cfg).filter(exchange, chain);\r\n\r\n        // Continue the filter chain\r\n        return chain.filter(exchange);\r\n    }\r\n}\r\n ```\r\nBelow is rewrite function\r\n```\r\n@Slf4j\r\npublic class MyRewriteFunction implements RewriteFunction&lt;String, String&gt; {\r\n\r\n    @Override\r\n    public Publisher&lt;String&gt; apply(ServerWebExchange exchange, String s) {\r\n        \r\n        \r\n            try {\r\n                ObjectMapper objectMapper = new ObjectMapper();\r\n                HelloObject obj = objectMapper.readValue(s, HelloObject.class);\r\n                String newBody = new ObjectMapper().writeValueAsString(obj.getData());\r\n                return Mono.just(newBody);\r\n            } catch (Exception e) {\r\n                /* error parsing values to json, do something else */\r\n                log.error(&quot;Error while parsing body&quot;, e);\r\n            }\r\n        }\r\n        return Mono.just(s);\r\n    }\r\n}\r\n```\r\nBelow is yaml \r\n```\r\n      routes:\r\n        - id: order-route-1\r\n          uri: http://localhost:8999/\r\n          predicates:\r\n            - Path=/some/path1\r\n            - Method=POST\r\n          filters:\r\n            - ModifyRequestBody:\r\n                class: com.xyz.filters.SomeFilter\r\n                value: application/json, application/xml\r\n                enabled: true\r\n\r\n```","title":"Modifying RequestBody in spring gateway","body":"<p>I want to modify the requestBody before routing it to given URI . Based on docs i am using</p>\n<p><strong>org.springframework.cloud.gateway.filter.factory.rewrite.ModifyRequestBodyGatewayFilterFactory</strong> to modify the body .  On starting my server , server failed to start with below error\nReason: The elements [spring.cloud.gateway.routes[0].filters[0].modifyrequestbody.class] were left unbound.\\n\\nAction:\\n\\nUpdate your application's configuration\\n&quot;,&quot;context&quot;:&quot;default&quot;}</p>\n<p>Below is the sample filter and Rewrite function</p>\n<pre><code>@Slf4j\npublic class SomeFilter implements GatewayFilter {\n\n    private final ModifyRequestBodyGatewayFilterFactory factory;\n\n    public RedirectionFilter(ModifyRequestBodyGatewayFilterFactory factory) {\n        this.factory = factory;\n    }\n\n    @Override\n    public Mono&lt;Void&gt; filter(ServerWebExchange exchange, GatewayFilterChain chain) {\n        \n        ModifyRequestBodyGatewayFilterFactory.Config cfg = new ModifyRequestBodyGatewayFilterFactory.Config();\n        cfg.setContentType(&quot;application/json&quot;);\n        cfg.setRewriteFunction(String.class, String.class, new MyRewriteFunction());\n\n\n        factory.apply(cfg).filter(exchange, chain);\n\n        // Continue the filter chain\n        return chain.filter(exchange);\n    }\n}\n</code></pre>\n<p>Below is rewrite function</p>\n<pre><code>@Slf4j\npublic class MyRewriteFunction implements RewriteFunction&lt;String, String&gt; {\n\n    @Override\n    public Publisher&lt;String&gt; apply(ServerWebExchange exchange, String s) {\n        \n        \n            try {\n                ObjectMapper objectMapper = new ObjectMapper();\n                HelloObject obj = objectMapper.readValue(s, HelloObject.class);\n                String newBody = new ObjectMapper().writeValueAsString(obj.getData());\n                return Mono.just(newBody);\n            } catch (Exception e) {\n                /* error parsing values to json, do something else */\n                log.error(&quot;Error while parsing body&quot;, e);\n            }\n        }\n        return Mono.just(s);\n    }\n}\n</code></pre>\n<p>Below is yaml</p>\n<pre><code>      routes:\n        - id: order-route-1\n          uri: http://localhost:8999/\n          predicates:\n            - Path=/some/path1\n            - Method=POST\n          filters:\n            - ModifyRequestBody:\n                class: com.xyz.filters.SomeFilter\n                value: application/json, application/xml\n                enabled: true\n\n</code></pre>\n"},{"tags":["java","stream"],"comments":[{"owner":{"account_id":9531412,"reputation":2010,"user_id":7082956,"display_name":"Valerij Dobler"},"score":0,"creation_date":1701116364,"post_id":77559456,"comment_id":136732984,"body_markdown":"Could you share your Merchant record code?","body":"Could you share your Merchant record code?"},{"owner":{"account_id":23611897,"reputation":334,"user_id":17646774,"display_name":"Marco Balo"},"score":0,"creation_date":1701116586,"post_id":77559456,"comment_id":136733021,"body_markdown":"Maybe something like `.map(c - c.getMC()).distinct().count()`. Or read [this question](https://stackoverflow.com/questions/23699371/java-8-distinct-by-property)","body":"Maybe something like <code>.map(c - c.getMC()).distinct().count()</code>. Or read <a href=\"https://stackoverflow.com/questions/23699371/java-8-distinct-by-property\">this question</a>"},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1701119043,"post_id":77559456,"comment_id":136733405,"body_markdown":"Try @MarcoBalo&#39;s suggestion; this appears to be more specific.","body":"Try @MarcoBalo&#39;s suggestion; this appears to be more specific."},{"owner":{"account_id":322981,"reputation":310744,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1701122697,"post_id":77559456,"comment_id":136733889,"body_markdown":"[MCVE](https://stackoverflow.com/help/mcve). Devise the briefest possible example to show your issue.","body":"<a href=\"https://stackoverflow.com/help/mcve\">MCVE</a>. Devise the briefest possible example to show your issue."}],"answers":[{"tags":[],"owner":{"account_id":29712821,"reputation":9,"user_id":22772020,"display_name":"guapi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701136729,"creation_date":1701136729,"answer_id":77560935,"question_id":77559456,"body_markdown":"maybe you can make your code like this\r\n\r\n    long numberOfUniqueMerchantCodes = myListOfMerchantRecords.stream()\r\n                .map(MerchantRecord::getMerchantCode)\r\n                .distinct()\r\n                .count();\r\n","title":"Can I make my code cleaner using Streams in Java 8","body":"<p>maybe you can make your code like this</p>\n<pre><code>long numberOfUniqueMerchantCodes = myListOfMerchantRecords.stream()\n            .map(MerchantRecord::getMerchantCode)\n            .distinct()\n            .count();\n</code></pre>\n"}],"owner":{"account_id":1313342,"reputation":765,"user_id":1260847,"accept_rate":56,"display_name":"Loner shushman"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1701143598,"answer_count":1,"score":0,"last_activity_date":1701145000,"creation_date":1701113391,"question_id":77559456,"body_markdown":"I have a list of Merchant objects with (Merchant Code, purchase ref, ...etc).\r\nIt would look something like:\r\n\r\n```\r\n1, purchase abc, description\r\n1, purchase cde, descr 2\r\n2, purachase fed, desc 4\r\n3, purchase fij, desc  55\r\n```\r\n\r\nMy goal is to count the number of unique Merchant Codes, so from the list above, I would receive 3.\r\n\r\nI got this Java code:\r\n```\r\nint numberOfUniqueMerchanCodes = myListOfMerchantRecords.stream()\r\n                .collect(Collectors.groupingBy(t-&gt;t.getMerchantCode())).size();\r\n```\r\nCan I do it shorter as I don&#39;t really need to collect the items, I just need to count the number of distinct MerchantCodes?","title":"Can I make my code cleaner using Streams in Java 8","body":"<p>I have a list of Merchant objects with (Merchant Code, purchase ref, ...etc).\nIt would look something like:</p>\n<pre><code>1, purchase abc, description\n1, purchase cde, descr 2\n2, purachase fed, desc 4\n3, purchase fij, desc  55\n</code></pre>\n<p>My goal is to count the number of unique Merchant Codes, so from the list above, I would receive 3.</p>\n<p>I got this Java code:</p>\n<pre><code>int numberOfUniqueMerchanCodes = myListOfMerchantRecords.stream()\n                .collect(Collectors.groupingBy(t-&gt;t.getMerchantCode())).size();\n</code></pre>\n<p>Can I do it shorter as I don't really need to collect the items, I just need to count the number of distinct MerchantCodes?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":10164431,"reputation":1065,"user_id":7506861,"display_name":"Emily"},"score":0,"creation_date":1572207571,"post_id":58582824,"comment_id":103480427,"body_markdown":"I managed to get it to at least draw correctly by changing `x2` in `filledTriangle` to `x - length / 4` and `x3` to `x + length / 4`. The overall shape of the triangle is still wrong though.","body":"I managed to get it to at least draw correctly by changing <code>x2</code> in <code>filledTriangle</code> to <code>x - length &#47; 4</code> and <code>x3</code> to <code>x + length &#47; 4</code>. The overall shape of the triangle is still wrong though."},{"owner":{"account_id":16894060,"reputation":13,"user_id":12217028,"display_name":"Max Jacobs"},"score":0,"creation_date":1572208317,"post_id":58582824,"comment_id":103480625,"body_markdown":"@Lignum https://imgur.com/a/2eSbiCY That appeared to fix the general shape of the triangles, but they are only repeated in the bottom left.","body":"@Lignum <a href=\"https://imgur.com/a/2eSbiCY\" rel=\"nofollow noreferrer\">imgur.com/a/2eSbiCY</a> That appeared to fix the general shape of the triangles, but they are only repeated in the bottom left."}],"answers":[{"tags":[],"owner":{"account_id":194308,"reputation":66720,"user_id":436560,"accept_rate":87,"display_name":"Lajos Arpad"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1572209318,"creation_date":1572209318,"answer_id":58583239,"question_id":58582824,"body_markdown":"Take a look at this method:\r\n\r\n    public static void sierpinski(int n, double x, double y, double length)\r\n    {\r\n        filledTriangle(x, y, length);\r\n\r\n        if (n == 1) {\r\n            System.out.println(&quot;Done!&quot;);\r\n        } else {\r\n            filledTriangle(x, height(length)/2, length/2);\r\n                x = x/2;\r\n                length = length/2;\r\n            filledTriangle(x, y, length);\r\n            filledTriangle(3*x, y, length);\r\n            n--;\r\n            sierpinski(n, x, y, length);               \r\n        }\r\n\r\n    }\r\n\r\nYou are passing a decreased `n` and a halved `length` to `sierpinski`, but you do not change `x` and `y`. This is not a good approach. It would be much better to pass the coordinates of the &quot;current&quot; triangle and you will know that at each time there will be 3x as many triangles to be drawn. You would need to call `sierpinski` 3 times each time (except when the process has to end) a `sierpinski` triangle was drawn. You have only one sierpinski call, which explains why the number of triangles doesn&#39;t increase threefold on each depth. You should thing coordinates of triangle points and know that the half of each side will be a point in the next depth.","title":"Recursive Sierpinski triangle in Java?","body":"<p>Take a look at this method:</p>\n\n<pre><code>public static void sierpinski(int n, double x, double y, double length)\n{\n    filledTriangle(x, y, length);\n\n    if (n == 1) {\n        System.out.println(\"Done!\");\n    } else {\n        filledTriangle(x, height(length)/2, length/2);\n            x = x/2;\n            length = length/2;\n        filledTriangle(x, y, length);\n        filledTriangle(3*x, y, length);\n        n--;\n        sierpinski(n, x, y, length);               \n    }\n\n}\n</code></pre>\n\n<p>You are passing a decreased <code>n</code> and a halved <code>length</code> to <code>sierpinski</code>, but you do not change <code>x</code> and <code>y</code>. This is not a good approach. It would be much better to pass the coordinates of the \"current\" triangle and you will know that at each time there will be 3x as many triangles to be drawn. You would need to call <code>sierpinski</code> 3 times each time (except when the process has to end) a <code>sierpinski</code> triangle was drawn. You have only one sierpinski call, which explains why the number of triangles doesn't increase threefold on each depth. You should thing coordinates of triangle points and know that the half of each side will be a point in the next depth.</p>\n"}],"owner":{"account_id":16894060,"reputation":13,"user_id":12217028,"display_name":"Max Jacobs"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":10663,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1701144546,"creation_date":1572205988,"question_id":58582824,"body_markdown":"I need to create a program that draws a Sierpinski triangle of order n. To do this, I have a few methods. Height, filledTriangle, and sierpinski. I made some progress in printing triangles recursively in the bottom left, but now that I&#39;m trying to create triangles to the right and up things aren&#39;t working out. I think my problem lies in the filledTriangle method, as I&#39;m not sure how to accommodate all the triangles with different vertexes.\r\n\r\n```\r\npublic class Sierpinski {\r\n\r\n    // Height of an equilateral triangle whose sides are of the specified length. \r\n    public static double height(double length) {\r\n\r\n        double height = length * Math.sqrt(3.0)/2;\r\n\r\n        return height;\r\n\t\r\n    }\r\n\r\n    // Draws a filled equilateral triangle whose bottom vertex is (x, y) \r\n    // of the specified side length. \r\n    public static void filledTriangle(double x, double y, double length) {\r\n    \r\n        double x2 = x - x/2;\r\n        double y2 = y + height(length)/2;\r\n\r\n        double x3 = x + (x/2);\r\n        double y3 = y + height(length)/2;\r\n\r\n        double[] xx = {x, x2, x3};\r\n        double[] yy = {y, y2, y3};\r\n\r\n        StdDraw.filledPolygon(xx, yy);\r\n\r\n    }\r\n\r\n    // Draws a Sierpinski triangle of order n, such that the largest filled \r\n    // triangle has bottom vertex (x, y) and sides of the specified length. \r\n    public static void sierpinski(int n, double x, double y, double length)\r\n    {\r\n        filledTriangle(x, y, length);\r\n\r\n        if (n == 1) {\r\n            System.out.println(&quot;Done!&quot;);\r\n        } else {\r\n            filledTriangle(x, height(length)/2, length/2);\r\n                x = x/2;\r\n                length = length/2;\r\n            filledTriangle(x, y, length);\r\n            filledTriangle(3*x, y, length);\r\n            n--;\r\n            sierpinski(n, x, y, length);               \r\n        }\r\n\r\n    }\r\n\r\n    // Takes an integer command-line argument n; \r\n    // draws the outline of an equilateral triangle (pointed upwards) of length 1; \r\n    // whose bottom-left vertex is (0, 0) and bottom-right vertex is (1, 0); and \r\n    // draws a Sierpinski triangle of order n that fits snugly inside the outline. \r\n    public static void main(String[] args) {\r\n\r\n        int length = 1;\r\n        int n = Integer.parseInt(args[0]);\r\n\t    double t = Math.sqrt(3.0) / 2.0;\r\n        StdDraw.line(0.0, 0.0, 1.0, 0.0);\r\n        StdDraw.line(1.0, 0.0, 0.5, height(length));\r\n        StdDraw.line(0.5, height(length), 0.0, 0.0);\r\n       \r\n        double x = 0.5;\r\n        double y = 0;\r\n        \r\n        sierpinski(n, x, y, length);\r\n\r\n    }\r\n}\r\n```\r\n\r\nA Sierpinski triangle of order 3 should look like this: https://i.stack.imgur.com/7dzJm.jpg\r\nMy output is this: https://i.stack.imgur.com/ZHx0f.jpg","title":"Recursive Sierpinski triangle in Java?","body":"<p>I need to create a program that draws a Sierpinski triangle of order n. To do this, I have a few methods. Height, filledTriangle, and sierpinski. I made some progress in printing triangles recursively in the bottom left, but now that I'm trying to create triangles to the right and up things aren't working out. I think my problem lies in the filledTriangle method, as I'm not sure how to accommodate all the triangles with different vertexes.</p>\n\n<pre><code>public class Sierpinski {\n\n    // Height of an equilateral triangle whose sides are of the specified length. \n    public static double height(double length) {\n\n        double height = length * Math.sqrt(3.0)/2;\n\n        return height;\n\n    }\n\n    // Draws a filled equilateral triangle whose bottom vertex is (x, y) \n    // of the specified side length. \n    public static void filledTriangle(double x, double y, double length) {\n\n        double x2 = x - x/2;\n        double y2 = y + height(length)/2;\n\n        double x3 = x + (x/2);\n        double y3 = y + height(length)/2;\n\n        double[] xx = {x, x2, x3};\n        double[] yy = {y, y2, y3};\n\n        StdDraw.filledPolygon(xx, yy);\n\n    }\n\n    // Draws a Sierpinski triangle of order n, such that the largest filled \n    // triangle has bottom vertex (x, y) and sides of the specified length. \n    public static void sierpinski(int n, double x, double y, double length)\n    {\n        filledTriangle(x, y, length);\n\n        if (n == 1) {\n            System.out.println(\"Done!\");\n        } else {\n            filledTriangle(x, height(length)/2, length/2);\n                x = x/2;\n                length = length/2;\n            filledTriangle(x, y, length);\n            filledTriangle(3*x, y, length);\n            n--;\n            sierpinski(n, x, y, length);               \n        }\n\n    }\n\n    // Takes an integer command-line argument n; \n    // draws the outline of an equilateral triangle (pointed upwards) of length 1; \n    // whose bottom-left vertex is (0, 0) and bottom-right vertex is (1, 0); and \n    // draws a Sierpinski triangle of order n that fits snugly inside the outline. \n    public static void main(String[] args) {\n\n        int length = 1;\n        int n = Integer.parseInt(args[0]);\n        double t = Math.sqrt(3.0) / 2.0;\n        StdDraw.line(0.0, 0.0, 1.0, 0.0);\n        StdDraw.line(1.0, 0.0, 0.5, height(length));\n        StdDraw.line(0.5, height(length), 0.0, 0.0);\n\n        double x = 0.5;\n        double y = 0;\n\n        sierpinski(n, x, y, length);\n\n    }\n}\n</code></pre>\n\n<p>A Sierpinski triangle of order 3 should look like this: <a href=\"https://i.stack.imgur.com/7dzJm.jpg\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/7dzJm.jpg</a>\nMy output is this: <a href=\"https://i.stack.imgur.com/ZHx0f.jpg\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/ZHx0f.jpg</a></p>\n"},{"tags":["java","selenium","junit","cucumber","extent"],"comments":[{"owner":{"account_id":95417,"reputation":4933,"user_id":259889,"accept_rate":76,"display_name":"Sid"},"score":0,"creation_date":1520767958,"post_id":49219492,"comment_id":85442640,"body_markdown":"You may have added it to your PATH but not CLASSPATH.","body":"You may have added it to your PATH but not CLASSPATH."},{"owner":{"account_id":3952510,"reputation":113,"user_id":3262269,"accept_rate":43,"display_name":"user3262269"},"score":0,"creation_date":1520768053,"post_id":49219492,"comment_id":85442664,"body_markdown":"@Sid added what to path ?","body":"@Sid added what to path ?"},{"owner":{"account_id":95417,"reputation":4933,"user_id":259889,"accept_rate":76,"display_name":"Sid"},"score":0,"creation_date":1520770249,"post_id":49219492,"comment_id":85443258,"body_markdown":"The class that your error stack shows.  JUnit in this case.","body":"The class that your error stack shows.  JUnit in this case."},{"owner":{"account_id":3952510,"reputation":113,"user_id":3262269,"accept_rate":43,"display_name":"user3262269"},"score":0,"creation_date":1520770525,"post_id":49219492,"comment_id":85443358,"body_markdown":"@Sid i am now getting &quot;cucumber.runtime.CucumberException: Couldn&#39;t load plugin class: com.cucumber.listener.ExtentCucumberFormatter. It does not implement cucumber.api.Plugin &quot; after adding a gherkin dependency as suggested by john in below answer","body":"@Sid i am now getting &quot;cucumber.runtime.CucumberException: Couldn&#39;t load plugin class: com.cucumber.listener.ExtentCucumberFormatter. It does not implement cucumber.api.Plugin &quot; after adding a gherkin dependency as suggested by john in below answer"},{"owner":{"account_id":3952510,"reputation":113,"user_id":3262269,"accept_rate":43,"display_name":"user3262269"},"score":0,"creation_date":1520770615,"post_id":49219492,"comment_id":85443384,"body_markdown":"@Sid i can mail you my code if you can look into it","body":"@Sid i can mail you my code if you can look into it"}],"answers":[{"tags":[],"owner":{"account_id":2328976,"reputation":4965,"user_id":2042827,"accept_rate":47,"display_name":"ikos23"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1520768328,"creation_date":1520768328,"answer_id":49219573,"question_id":49219492,"body_markdown":"Not sure about this, but maybe adding this to your list of dependencies could help.\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;info.cukes&lt;/groupId&gt;\r\n        &lt;artifactId&gt;gherkin&lt;/artifactId&gt;\r\n        &lt;version&gt;2.7.3&lt;/version&gt;\r\n    &lt;/dependency&gt;","title":"java.lang.NoClassDefFoundError: gherkin/formatter/Reporter for Cucumber with extent reports","body":"<p>Not sure about this, but maybe adding this to your list of dependencies could help.</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;info.cukes&lt;/groupId&gt;\n    &lt;artifactId&gt;gherkin&lt;/artifactId&gt;\n    &lt;version&gt;2.7.3&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":3952510,"reputation":113,"user_id":3262269,"accept_rate":43,"display_name":"user3262269"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":12124,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1701144546,"creation_date":1520767808,"question_id":49219492,"body_markdown":"I am trying to generate extent report for my test case using Cucumber and Extent report using JUnit. But I am getting:\r\n\r\n`java.lang.NoClassDefFoundError: gherkin/formatter/Reporter` and\r\n`java.lang.NoClassDefFoundError exception while running cucumber test using JUnit`\r\n\r\nThese are the dependencies which I have added to my pom.xml:\r\n\r\n        &lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;io.cucumber&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;cucumber-java&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.3.1&lt;/version&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;junit&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;4.12&lt;/version&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;io.cucumber&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;cucumber-testng&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.3.1&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.beust&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jcommander&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.27&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;io.cucumber&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;cucumber-junit&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.3.1&lt;/version&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.testng&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;testng&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;6.13&lt;/version&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt; \r\n            &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt; \r\n            &lt;artifactId&gt;selenium-java&lt;/artifactId&gt; \r\n\t\t\t&lt;version&gt;3.8.1&lt;/version&gt; \r\n        &lt;/dependency&gt; \r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.vimalselvam&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;cucumber-extentsreport&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.0.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.aventstack&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;extentreports&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.1.3&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.relevantcodes&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;extentreports&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.41.2&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;info.cukes&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;cucumber-jvm-deps&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.0.3&lt;/version&gt;\r\n\t\t\t&lt;scope&gt;provided&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\nAnd this is the exception I am getting.\r\n\r\n    java.lang.NoClassDefFoundError: gherkin/formatter/Reporter\r\n    \tat java.lang.ClassLoader.defineClass1(Native Method)\r\n    \tat java.lang.ClassLoader.defineClass(ClassLoader.java:763)\r\n    \tat java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)\r\n    \tat java.net.URLClassLoader.defineClass(URLClassLoader.java:467)\r\n    \tat java.net.URLClassLoader.access$100(URLClassLoader.java:73)\r\n    \tat java.net.URLClassLoader$1.run(URLClassLoader.java:368)\r\n    \tat java.net.URLClassLoader$1.run(URLClassLoader.java:362)\r\n    \tat java.security.AccessController.doPrivileged(Native Method)\r\n    \tat java.net.URLClassLoader.findClass(URLClassLoader.java:361)\r\n    \tat java.lang.ClassLoader.loadClass(ClassLoader.java:424)\r\n    \tat sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:338)\r\n    \tat java.lang.ClassLoader.loadClass(ClassLoader.java:357)\r\n    \tat cucumber.runtime.formatter.PluginFactory.loadClass(PluginFactory.java:174)\r\n    \tat cucumber.runtime.formatter.PluginFactory.pluginClass(PluginFactory.java:166)\r\n    \tat cucumber.runtime.formatter.PluginFactory.getPluginClass(PluginFactory.java:223)\r\n    \tat cucumber.runtime.formatter.PluginFactory.isFormatterName(PluginFactory.java:201)\r\n    \tat cucumber.runtime.RuntimeOptionsFactory.addPlugins(RuntimeOptionsFactory.java:94)\r\n    \tat cucumber.runtime.RuntimeOptionsFactory.buildArgsFromOptions(RuntimeOptionsFactory.java:41)\r\n    \tat cucumber.runtime.RuntimeOptionsFactory.create(RuntimeOptionsFactory.java:26)\r\n    \tat cucumber.api.junit.Cucumber.&lt;init&gt;(Cucumber.java:74)\r\n    \tat sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n    \tat sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\r\n    \tat sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\r\n    \tat java.lang.reflect.Constructor.newInstance(Constructor.java:423)\r\n    \tat org.junit.internal.builders.AnnotatedBuilder.buildRunner(AnnotatedBuilder.java:104)\r\n    \tat org.junit.internal.builders.AnnotatedBuilder.runnerForClass(AnnotatedBuilder.java:86)\r\n    \tat org.junit.runners.model.RunnerBuilder.safeRunnerForClass(RunnerBuilder.java:59)\r\n    \tat org.junit.internal.builders.AllDefaultPossibilitiesBuilder.runnerForClass(AllDefaultPossibilitiesBuilder.java:26)\r\n    \tat org.junit.runners.model.RunnerBuilder.safeRunnerForClass(RunnerBuilder.java:59)\r\n    \tat org.junit.internal.requests.ClassRequest.getRunner(ClassRequest.java:33)\r\n    \tat org.eclipse.jdt.internal.junit4.runner.JUnit4TestLoader.createUnfilteredTest(JUnit4TestLoader.java:87)\r\n    \tat org.eclipse.jdt.internal.junit4.runner.JUnit4TestLoader.createTest(JUnit4TestLoader.java:73)\r\n    \tat org.eclipse.jdt.internal.junit4.runner.JUnit4TestLoader.loadTests(JUnit4TestLoader.java:46)\r\n    \tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:522)\r\n    \tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:760)\r\n    \tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:460)\r\n    \tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:206)\r\n    Caused by: java.lang.ClassNotFoundException: gherkin.formatter.Reporter\r\n    \tat java.net.URLClassLoader.findClass(URLClassLoader.java:381)\r\n    \tat java.lang.ClassLoader.loadClass(ClassLoader.java:424)\r\n    \tat sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:338)\r\n    \tat java.lang.ClassLoader.loadClass(ClassLoader.java:357)\r\n    \t... 37 more\r\n\r\n\r\n\r\nMy runner class is as follows:\r\n\r\n    import java.io.File;\r\n    \r\n    import org.junit.AfterClass;\r\n    import org.junit.BeforeClass;\r\n    import org.junit.runner.RunWith;\r\n    \r\n    import com.cucumber.listener.ExtentProperties;\r\n    import com.cucumber.listener.Reporter;\r\n    \r\n    import cucumber.api.CucumberOptions;\r\n    import cucumber.api.junit.Cucumber;\r\n    \r\n    @RunWith(Cucumber.class)\r\n    @CucumberOptions(features= {&quot;src/test/java/com/cumberpr2/First/feature&quot;},\r\n                     glue= {&quot;com/cumberpr2/step&quot;}, monochrome=true,tags= {&quot;@bvt,@sanity&quot;},\r\n                     plugin = {&quot;com.cucumber.listener.ExtentCucumberFormatter:target/cucumber/report1.html&quot;})\r\n    public class Runner1 {\r\n    \r\n    \t @AfterClass\r\n         public static void teardown() {\r\n    \t        Reporter.loadXMLConfig(new File(&quot;/cumberpr2/Extent-Config.xml&quot;));\r\n    \t        //Reporter.setSystemInfo(&quot;user&quot;, System.getProperty(&quot;user.name&quot;));\r\n    \t        Reporter.setSystemInfo(&quot;os&quot;, &quot;windows OSX&quot;);\r\n    \t        Reporter.setTestRunnerOutput(&quot;Sample test runner output message&quot;);\r\n    \t }\r\n    \t\r\n    }\r\n\r\n\r\nI am unable to figure out what is wrong.\r\n\r\nAny suggestion to fix this will be helpful.\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"java.lang.NoClassDefFoundError: gherkin/formatter/Reporter for Cucumber with extent reports","body":"<p>I am trying to generate extent report for my test case using Cucumber and Extent report using JUnit. But I am getting:</p>\n\n<p><code>java.lang.NoClassDefFoundError: gherkin/formatter/Reporter</code> and\n<code>java.lang.NoClassDefFoundError exception while running cucumber test using JUnit</code></p>\n\n<p>These are the dependencies which I have added to my pom.xml:</p>\n\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;io.cucumber&lt;/groupId&gt;\n        &lt;artifactId&gt;cucumber-java&lt;/artifactId&gt;\n        &lt;version&gt;2.3.1&lt;/version&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;junit&lt;/groupId&gt;\n        &lt;artifactId&gt;junit&lt;/artifactId&gt;\n        &lt;version&gt;4.12&lt;/version&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;io.cucumber&lt;/groupId&gt;\n        &lt;artifactId&gt;cucumber-testng&lt;/artifactId&gt;\n        &lt;version&gt;2.3.1&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.beust&lt;/groupId&gt;\n        &lt;artifactId&gt;jcommander&lt;/artifactId&gt;\n        &lt;version&gt;1.27&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;io.cucumber&lt;/groupId&gt;\n        &lt;artifactId&gt;cucumber-junit&lt;/artifactId&gt;\n        &lt;version&gt;2.3.1&lt;/version&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.testng&lt;/groupId&gt;\n        &lt;artifactId&gt;testng&lt;/artifactId&gt;\n        &lt;version&gt;6.13&lt;/version&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt; \n        &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt; \n        &lt;artifactId&gt;selenium-java&lt;/artifactId&gt; \n        &lt;version&gt;3.8.1&lt;/version&gt; \n    &lt;/dependency&gt; \n\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.vimalselvam&lt;/groupId&gt;\n        &lt;artifactId&gt;cucumber-extentsreport&lt;/artifactId&gt;\n        &lt;version&gt;3.0.0&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.aventstack&lt;/groupId&gt;\n        &lt;artifactId&gt;extentreports&lt;/artifactId&gt;\n        &lt;version&gt;3.1.3&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.relevantcodes&lt;/groupId&gt;\n        &lt;artifactId&gt;extentreports&lt;/artifactId&gt;\n        &lt;version&gt;2.41.2&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;info.cukes&lt;/groupId&gt;\n        &lt;artifactId&gt;cucumber-jvm-deps&lt;/artifactId&gt;\n        &lt;version&gt;1.0.3&lt;/version&gt;\n        &lt;scope&gt;provided&lt;/scope&gt;\n    &lt;/dependency&gt;\n</code></pre>\n\n<p>And this is the exception I am getting.</p>\n\n<pre><code>java.lang.NoClassDefFoundError: gherkin/formatter/Reporter\n    at java.lang.ClassLoader.defineClass1(Native Method)\n    at java.lang.ClassLoader.defineClass(ClassLoader.java:763)\n    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)\n    at java.net.URLClassLoader.defineClass(URLClassLoader.java:467)\n    at java.net.URLClassLoader.access$100(URLClassLoader.java:73)\n    at java.net.URLClassLoader$1.run(URLClassLoader.java:368)\n    at java.net.URLClassLoader$1.run(URLClassLoader.java:362)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at java.net.URLClassLoader.findClass(URLClassLoader.java:361)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:424)\n    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:338)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:357)\n    at cucumber.runtime.formatter.PluginFactory.loadClass(PluginFactory.java:174)\n    at cucumber.runtime.formatter.PluginFactory.pluginClass(PluginFactory.java:166)\n    at cucumber.runtime.formatter.PluginFactory.getPluginClass(PluginFactory.java:223)\n    at cucumber.runtime.formatter.PluginFactory.isFormatterName(PluginFactory.java:201)\n    at cucumber.runtime.RuntimeOptionsFactory.addPlugins(RuntimeOptionsFactory.java:94)\n    at cucumber.runtime.RuntimeOptionsFactory.buildArgsFromOptions(RuntimeOptionsFactory.java:41)\n    at cucumber.runtime.RuntimeOptionsFactory.create(RuntimeOptionsFactory.java:26)\n    at cucumber.api.junit.Cucumber.&lt;init&gt;(Cucumber.java:74)\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\n    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\n    at java.lang.reflect.Constructor.newInstance(Constructor.java:423)\n    at org.junit.internal.builders.AnnotatedBuilder.buildRunner(AnnotatedBuilder.java:104)\n    at org.junit.internal.builders.AnnotatedBuilder.runnerForClass(AnnotatedBuilder.java:86)\n    at org.junit.runners.model.RunnerBuilder.safeRunnerForClass(RunnerBuilder.java:59)\n    at org.junit.internal.builders.AllDefaultPossibilitiesBuilder.runnerForClass(AllDefaultPossibilitiesBuilder.java:26)\n    at org.junit.runners.model.RunnerBuilder.safeRunnerForClass(RunnerBuilder.java:59)\n    at org.junit.internal.requests.ClassRequest.getRunner(ClassRequest.java:33)\n    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestLoader.createUnfilteredTest(JUnit4TestLoader.java:87)\n    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestLoader.createTest(JUnit4TestLoader.java:73)\n    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestLoader.loadTests(JUnit4TestLoader.java:46)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:522)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:760)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:460)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:206)\nCaused by: java.lang.ClassNotFoundException: gherkin.formatter.Reporter\n    at java.net.URLClassLoader.findClass(URLClassLoader.java:381)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:424)\n    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:338)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:357)\n    ... 37 more\n</code></pre>\n\n<p>My runner class is as follows:</p>\n\n<pre><code>import java.io.File;\n\nimport org.junit.AfterClass;\nimport org.junit.BeforeClass;\nimport org.junit.runner.RunWith;\n\nimport com.cucumber.listener.ExtentProperties;\nimport com.cucumber.listener.Reporter;\n\nimport cucumber.api.CucumberOptions;\nimport cucumber.api.junit.Cucumber;\n\n@RunWith(Cucumber.class)\n@CucumberOptions(features= {\"src/test/java/com/cumberpr2/First/feature\"},\n                 glue= {\"com/cumberpr2/step\"}, monochrome=true,tags= {\"@bvt,@sanity\"},\n                 plugin = {\"com.cucumber.listener.ExtentCucumberFormatter:target/cucumber/report1.html\"})\npublic class Runner1 {\n\n     @AfterClass\n     public static void teardown() {\n            Reporter.loadXMLConfig(new File(\"/cumberpr2/Extent-Config.xml\"));\n            //Reporter.setSystemInfo(\"user\", System.getProperty(\"user.name\"));\n            Reporter.setSystemInfo(\"os\", \"windows OSX\");\n            Reporter.setTestRunnerOutput(\"Sample test runner output message\");\n     }\n\n}\n</code></pre>\n\n<p>I am unable to figure out what is wrong.</p>\n\n<p>Any suggestion to fix this will be helpful.</p>\n"},{"tags":["java","spring","transactions","spring-transactions"],"answers":[{"tags":[],"owner":{"account_id":27142702,"reputation":3,"user_id":20683365,"display_name":"Terry K."},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1701144520,"creation_date":1701049191,"answer_id":77554144,"question_id":77553862,"body_markdown":"When using Spring Transaction, even if the REQUIRES_NEW propagation property is used, it rolls back to the parent transaction because the same transaction manager is set up.\r\n\r\nThere are two ways to implement the scenario you want.\r\n\r\n1. Catch exception from transaction method and handle\r\n- If you want that parent transaction is not reverted when child transaction reverted, you can catch exception of method with child transaction and handle it.\r\n2. using `TransactionEventListener`\r\n- completeTaskOrDoSomethingElse(task); publish an event at the place of call, sendTaskAfterInserToOtherService(task.getId()) publish an event at the place of call.\r\n- Implementing an EventListner that performs the tasks you want to do in the child transaction. If implemented through the `AFTER_COMIT` property, the parent transaction is not affected when the child transaction is rolled back.\r\n  - ref) [TransactionalEventListener Of Spring][1]\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/transaction/event/TransactionalEventListener.html","title":"passing transactions with REQUIRES_NEW propagination from one function to another","body":"<p>When using Spring Transaction, even if the REQUIRES_NEW propagation property is used, it rolls back to the parent transaction because the same transaction manager is set up.</p>\n<p>There are two ways to implement the scenario you want.</p>\n<ol>\n<li>Catch exception from transaction method and handle</li>\n</ol>\n<ul>\n<li>If you want that parent transaction is not reverted when child transaction reverted, you can catch exception of method with child transaction and handle it.</li>\n</ul>\n<ol start=\"2\">\n<li>using <code>TransactionEventListener</code></li>\n</ol>\n<ul>\n<li>completeTaskOrDoSomethingElse(task); publish an event at the place of call, sendTaskAfterInserToOtherService(task.getId()) publish an event at the place of call.</li>\n<li>Implementing an EventListner that performs the tasks you want to do in the child transaction. If implemented through the <code>AFTER_COMIT</code> property, the parent transaction is not affected when the child transaction is rolled back.\n<ul>\n<li>ref) <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/transaction/event/TransactionalEventListener.html\" rel=\"nofollow noreferrer\">TransactionalEventListener Of Spring</a></li>\n</ul>\n</li>\n</ul>\n"}],"owner":{"account_id":13834164,"reputation":207,"user_id":9986180,"display_name":"sasko"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1701144520,"creation_date":1701041098,"question_id":77553862,"body_markdown":"I have problem with @Transactional annotation i am not able to solve.\r\nI understand that with Propagation.REQUIRED existing transaction is used or created new one if there is no transaction active.&lt;br&gt;\r\nAnd that with Propagation.REQUIRES_NEW new transaction is created and should be commited before returning to other existing transactions.\r\n\r\nI want to achieve the following:\r\n\r\nwhen i am looping through list of tasks\r\nif any error happens while in completeTaskOrDoSomethingElse function &lt;br&gt;\r\nrevert all transactions that happened in that function, dont revert transactions for other tasks in list of tasks.\r\n\r\nif error happens in completeTask() function revert transactions from that function &lt;br&gt;\r\nif error happens in sendTaskAfterInsertToOtherService() revert transactions that happened in sendTaskAfterInsertToOtherService() and in completeTask() functions\r\n\r\n\r\nnot sure how to do it because task has to be commited in order to get data from database, and as far as i know if transaction is commited it cant be reverted.\r\n\r\nAny help is appreciated, i will provide any aditional information\r\n\r\n```\r\n\r\n     mainFunction()\r\n  {\r\n\tfor(task in listOfTasks)\r\n\t\tcompleteTaskOrDoSomethingElse(task);\r\n  }\r\n  \r\n  @Transactional(rollbackFor = Exception.class, propagation = Propagation.REQUIRES_NEW)\r\n  completeTaskOrDoSomethingElse(Task task)\r\n  {\r\n\t Task newTask= completetask(task);\r\n\t\r\n\t sendTaskAfterInsertToOtherService(task.getId());\r\n\r\n   //if error happens in sendTaskAfterInsertToOtherService() revert data from both \r\n//sendTaskAfterInsertToOtherService() and completetask() functions\r\n\r\n  \r\n  }\r\n  \r\n  @Transactional(rollbackFor = Exception.class, propagation = Propagation.REQUIRES_NEW)\r\n  completeTask()\r\n  {\r\n\t//insert task into db\r\n  }\r\n  \r\n  \t//if completeTask() doesnt have REQUIRES_NEW propagination transaction wont be commited to db and when i try to get task by id exception happens because \r\n\ttask is not saved to db\r\n sendTaskAfterInsertToOtherService(task.getId())\r\n\t {\r\n\t\ttask = taskDao.getById()\r\n\t\t\r\n\t\t//insert to db\r\n\t\tcallOtherService(task);\r\n\t \r\n\t }\r\n\t","title":"passing transactions with REQUIRES_NEW propagination from one function to another","body":"<p>I have problem with @Transactional annotation i am not able to solve.\nI understand that with Propagation.REQUIRED existing transaction is used or created new one if there is no transaction active.<br>\nAnd that with Propagation.REQUIRES_NEW new transaction is created and should be commited before returning to other existing transactions.</p>\n<p>I want to achieve the following:</p>\n<p>when i am looping through list of tasks\nif any error happens while in completeTaskOrDoSomethingElse function <br>\nrevert all transactions that happened in that function, dont revert transactions for other tasks in list of tasks.</p>\n<p>if error happens in completeTask() function revert transactions from that function <br>\nif error happens in sendTaskAfterInsertToOtherService() revert transactions that happened in sendTaskAfterInsertToOtherService() and in completeTask() functions</p>\n<p>not sure how to do it because task has to be commited in order to get data from database, and as far as i know if transaction is commited it cant be reverted.</p>\n<p>Any help is appreciated, i will provide any aditional information</p>\n<pre><code>\n     mainFunction()\n  {\n    for(task in listOfTasks)\n        completeTaskOrDoSomethingElse(task);\n  }\n  \n  @Transactional(rollbackFor = Exception.class, propagation = Propagation.REQUIRES_NEW)\n  completeTaskOrDoSomethingElse(Task task)\n  {\n     Task newTask= completetask(task);\n    \n     sendTaskAfterInsertToOtherService(task.getId());\n\n   //if error happens in sendTaskAfterInsertToOtherService() revert data from both \n//sendTaskAfterInsertToOtherService() and completetask() functions\n\n  \n  }\n  \n  @Transactional(rollbackFor = Exception.class, propagation = Propagation.REQUIRES_NEW)\n  completeTask()\n  {\n    //insert task into db\n  }\n  \n    //if completeTask() doesnt have REQUIRES_NEW propagination transaction wont be commited to db and when i try to get task by id exception happens because \n    task is not saved to db\n sendTaskAfterInsertToOtherService(task.getId())\n     {\n        task = taskDao.getById()\n        \n        //insert to db\n        callOtherService(task);\n     \n     }\n    \n</code></pre>\n"},{"tags":["java","minio"],"owner":{"account_id":10401511,"reputation":1,"user_id":12329265,"display_name":"Dday"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":14,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1701144129,"creation_date":1701144129,"question_id":77561278,"body_markdown":"\r\nI have using java code to delete more than 10 thousand files from the bucket,\r\nafter deleted, minio web page can&#39;t login anymore, showing error code 500 and certificate expired.\r\n\r\nMinio version: minio-11.1.2\r\n\r\n\r\nI try to solve it by generating certificate renew it, but it don&#39;t works.\r\nPlease share some opinion for this.\r\nThanks.\r\n\r\n\r\n\r\nsolving delete files certificate expire problem","title":"Minio using java code delete bucket files causing certificate expired","body":"<p>I have using java code to delete more than 10 thousand files from the bucket,\nafter deleted, minio web page can't login anymore, showing error code 500 and certificate expired.</p>\n<p>Minio version: minio-11.1.2</p>\n<p>I try to solve it by generating certificate renew it, but it don't works.\nPlease share some opinion for this.\nThanks.</p>\n<p>solving delete files certificate expire problem</p>\n"},{"tags":["java","jar"],"owner":{"account_id":10981278,"reputation":39,"user_id":8068274,"display_name":"ly0932"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1701143919,"creation_date":1699530234,"question_id":77452885,"body_markdown":"I&#39;m grappling with a transitive dependency issue within a large organization, boasting over 2,300 R&amp;D personnel and more than 4,000 internal JARs.\r\n\r\nThe predicament I&#39;m facing is that whenever I incorporate any JAR and aim to access the service behind it via RPC, this JAR package introduces 1.5GB of transitive dependencies. We have thousands of such JARs within the company.\r\n\r\nThe question is, how do we synchronize these JAR package versions internally? All Java projects are mandated to use Maven and inherit a unified pom.xml. This pom.xml delineates the latest version of 4,000 JARs, ensuring each project utilizes the most recent version to circumvent class conflicts.\r\n\r\nOn the server side, a server-side project constructs a deployment product exceeding 2GB, with over 400,000 Java classes under the classpath. Approximately 70% of the volume is contributed by classes compiled and generated by proto. When I initiate Spring Boot, Spring scans the complete classpath. The service startup is considerably slow, and the JVM metaspace surpasses 1GB.\r\n\r\nThe anti-corrosion design leaves much to be desired. The request and response in the SDK will nest the protobuf classes of other JAR packages. Then, this protobuf class may nest protobuf classes in other JAR packages. Most of these 4,000 JAR packages follow this pattern, forming a complex graph.\r\n\r\nThis is a convoluted situation that I need to resolve. Does anyone have any viable solutions to help me tackle this JAR hell problem and protobuf issue?","title":"How to solve the large-scale Jar transitive dependency hell problem in Java language?","body":"<p>I'm grappling with a transitive dependency issue within a large organization, boasting over 2,300 R&amp;D personnel and more than 4,000 internal JARs.</p>\n<p>The predicament I'm facing is that whenever I incorporate any JAR and aim to access the service behind it via RPC, this JAR package introduces 1.5GB of transitive dependencies. We have thousands of such JARs within the company.</p>\n<p>The question is, how do we synchronize these JAR package versions internally? All Java projects are mandated to use Maven and inherit a unified pom.xml. This pom.xml delineates the latest version of 4,000 JARs, ensuring each project utilizes the most recent version to circumvent class conflicts.</p>\n<p>On the server side, a server-side project constructs a deployment product exceeding 2GB, with over 400,000 Java classes under the classpath. Approximately 70% of the volume is contributed by classes compiled and generated by proto. When I initiate Spring Boot, Spring scans the complete classpath. The service startup is considerably slow, and the JVM metaspace surpasses 1GB.</p>\n<p>The anti-corrosion design leaves much to be desired. The request and response in the SDK will nest the protobuf classes of other JAR packages. Then, this protobuf class may nest protobuf classes in other JAR packages. Most of these 4,000 JAR packages follow this pattern, forming a complex graph.</p>\n<p>This is a convoluted situation that I need to resolve. Does anyone have any viable solutions to help me tackle this JAR hell problem and protobuf issue?</p>\n"},{"tags":["java","methods","parameters"],"comments":[{"owner":{"account_id":247613,"reputation":284087,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1701143000,"post_id":77561229,"comment_id":136735839,"body_markdown":"Maybe it&#39;s me, but I don&#39;t understand what it is you&#39;re asking. Both methods take parameters. The loopThru... method simply *ignores* its parameter, and have no clue as to why, since this makes the parameter unhelpful, confusing and totally unnecessary.","body":"Maybe it&#39;s me, but I don&#39;t understand what it is you&#39;re asking. Both methods take parameters. The loopThru... method simply <i>ignores</i> its parameter, and have no clue as to why, since this makes the parameter unhelpful, confusing and totally unnecessary."},{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1701143307,"post_id":77561229,"comment_id":136735858,"body_markdown":"A parameter is a parameter. It doesn&#39;t matter where an argument for that parameter comes from.","body":"A parameter is a parameter. It doesn&#39;t matter where an argument for that parameter comes from."},{"owner":{"account_id":247613,"reputation":284087,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1701143354,"post_id":77561229,"comment_id":136735861,"body_markdown":"Perhaps you&#39;re confusing &quot;parameter&quot; with &quot;argument&quot;, or asking for the definitions of both, but this is only a guess.","body":"Perhaps you&#39;re confusing &quot;parameter&quot; with &quot;argument&quot;, or asking for the definitions of both, but this is only a guess."},{"owner":{"account_id":247613,"reputation":284087,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1701143465,"post_id":77561229,"comment_id":136735873,"body_markdown":"Does this answer your question? [What is a formal parameter, in Java?](https://stackoverflow.com/questions/27494316/what-is-a-formal-parameter-in-java)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/27494316/what-is-a-formal-parameter-in-java\">What is a formal parameter, in Java?</a>"},{"owner":{"account_id":25361379,"reputation":23,"user_id":19176566,"display_name":"smouvfox805"},"score":0,"creation_date":1701143778,"post_id":77561229,"comment_id":136735899,"body_markdown":"Its the books that I&#39;m reading, they&#39;re referencing arguments, as if are the same as actual parameters. I just want clarity on what I should call them.","body":"Its the books that I&#39;m reading, they&#39;re referencing arguments, as if are the same as actual parameters. I just want clarity on what I should call them."},{"owner":{"account_id":247613,"reputation":284087,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1701144265,"post_id":77561229,"comment_id":136735935,"body_markdown":"You would call the token in the method declaration the parameter. When you call the method, you pass in an argument, but in my experience, most programmers are not that &quot;formal&quot; with these terms. The method itself does not have any different &quot;name&quot; based on what is passed in.","body":"You would call the token in the method declaration the parameter. When you call the method, you pass in an argument, but in my experience, most programmers are not that &quot;formal&quot; with these terms. The method itself does not have any different &quot;name&quot; based on what is passed in."},{"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"score":0,"creation_date":1701160308,"post_id":77561229,"comment_id":136737715,"body_markdown":"In a method declaration like `void shwEntries(int[ ] entries, int a)` the `entries` and `a` are named &quot;formal parameters&quot;. We know that at runtime a caller will pass values for these but we don&#39;t know what these values will be. When calling the method like `shwEntries(entries, 0);` actual values will be passed to the method.","body":"In a method declaration like <code>void shwEntries(int[ ] entries, int a)</code> the <code>entries</code> and <code>a</code> are named &quot;formal parameters&quot;. We know that at runtime a caller will pass values for these but we don&#39;t know what these values will be. When calling the method like <code>shwEntries(entries, 0);</code> actual values will be passed to the method."},{"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"score":0,"creation_date":1701160494,"post_id":77561229,"comment_id":136737755,"body_markdown":"The values that are &quot;provided&quot; by the instance or class are called &quot;fields&quot; and even when we access them in a method they are still called &quot;fields&quot;.","body":"The values that are &quot;provided&quot; by the instance or class are called &quot;fields&quot; and even when we access them in a method they are still called &quot;fields&quot;."}],"owner":{"account_id":25361379,"reputation":23,"user_id":19176566,"display_name":"smouvfox805"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1701144167,"answer_count":0,"score":0,"last_activity_date":1701143767,"creation_date":1701142863,"question_id":77561229,"body_markdown":"What do you call Java methods that take values from actual object or class attributes? If the very bottom method takes what is called a &quot;Formal-Parameter&quot;, then what do you call one that takes actual attribute values like the `loopThruFiles()` does? \r\n```\r\n\tint numOfFiles = 5;          \r\n\tshwEntries(entries, 0); \r\n} \r\n\r\npublic static void loopThruFiles(int numOfFiles) {\r\n\tSystem.out.print(&quot;Interation: &quot; + a + &quot; : &quot;); \r\n\tfor (int x = 0; x &lt; files.length; x++) \r\n\tSystem.out.print(entries[x] + &quot; &quot;);\r\n\tSystem.out.println( );\r\n} \r\n\r\npublic static void shwEntries(int[ ] entries, int a) {\r\n\tSystem.out.print(&quot;Interation: &quot; + a + &quot; : &quot;); \r\n\tfor (int x = 0; x &lt; entries.length; x++) \r\n\tSystem.out.print(entries[x] + &quot; &quot;);\r\n\tSystem.out.println( );\r\n}\r\n```","title":"What do you call a method parameter in Java that takes values from a objects attribute?","body":"<p>What do you call Java methods that take values from actual object or class attributes? If the very bottom method takes what is called a &quot;Formal-Parameter&quot;, then what do you call one that takes actual attribute values like the <code>loopThruFiles()</code> does?</p>\n<pre><code>    int numOfFiles = 5;          \n    shwEntries(entries, 0); \n} \n\npublic static void loopThruFiles(int numOfFiles) {\n    System.out.print(&quot;Interation: &quot; + a + &quot; : &quot;); \n    for (int x = 0; x &lt; files.length; x++) \n    System.out.print(entries[x] + &quot; &quot;);\n    System.out.println( );\n} \n\npublic static void shwEntries(int[ ] entries, int a) {\n    System.out.print(&quot;Interation: &quot; + a + &quot; : &quot;); \n    for (int x = 0; x &lt; entries.length; x++) \n    System.out.print(entries[x] + &quot; &quot;);\n    System.out.println( );\n}\n</code></pre>\n"},{"tags":["java","java-8"],"comments":[{"owner":{"account_id":1939636,"reputation":28457,"user_id":1746118,"accept_rate":95,"display_name":"Naman"},"score":3,"creation_date":1701143376,"post_id":77561151,"comment_id":136735864,"body_markdown":"you might be looking to filter based on the attribute being null i.e. `filter(app -&gt; app.getBName() !=null)`","body":"you might be looking to filter based on the attribute being null i.e. <code>filter(app -&gt; app.getBName() !=null)</code>"}],"owner":{"account_id":3608093,"reputation":1,"user_id":3009810,"display_name":"user3009810"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":54,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1701143327,"creation_date":1701141286,"question_id":77561151,"body_markdown":"I have a custom list as below\r\n\r\n```\r\n[Application(bname=null, cid=null, fname=“abc”)]\r\n```\r\n\r\nNow I need to set the values to another list but I have to remove null values i.e. bname=null so I don&#39;t want to set it to the second list\r\n\r\nI have written below the code \r\n\r\n```\r\nObj.setApplication(list.getApplication().stream().filter(Objects::nonNull).collect(Collectors.toList()));\r\n```\r\n\r\nCould you please help to correct the above code block?\r\n","title":"Remove null entry from custom list in java 8","body":"<p>I have a custom list as below</p>\n<pre><code>[Application(bname=null, cid=null, fname=“abc”)]\n</code></pre>\n<p>Now I need to set the values to another list but I have to remove null values i.e. bname=null so I don't want to set it to the second list</p>\n<p>I have written below the code</p>\n<pre><code>Obj.setApplication(list.getApplication().stream().filter(Objects::nonNull).collect(Collectors.toList()));\n</code></pre>\n<p>Could you please help to correct the above code block?</p>\n"},{"tags":["java","spring-boot","swagger"],"answers":[{"tags":[],"owner":{"account_id":11889468,"reputation":1750,"user_id":8700809,"display_name":"Jacob"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1700402992,"creation_date":1700402992,"answer_id":77511068,"question_id":77510720,"body_markdown":"SpringFox doesn&#39;t support Springboot v3, the answer is springdoc\r\n\r\n```maven\r\n&lt;dependency&gt;\r\n   &lt;groupId&gt;org.springdoc&lt;/groupId&gt;\r\n   &lt;artifactId&gt;springdoc-openapi-starter-webmvc-ui&lt;/artifactId&gt;\r\n   &lt;version&gt;2.0.2&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\n[This article](https://medium.com/@f.s.a.kuzman/using-swagger-3-in-spring-boot-3-c11a483ea6dc) should help with the conversion","title":"How do I enable Swagger API endpoints for a Boot application?","body":"<p>SpringFox doesn't support Springboot v3, the answer is springdoc</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n   &lt;groupId&gt;org.springdoc&lt;/groupId&gt;\n   &lt;artifactId&gt;springdoc-openapi-starter-webmvc-ui&lt;/artifactId&gt;\n   &lt;version&gt;2.0.2&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p><a href=\"https://medium.com/@f.s.a.kuzman/using-swagger-3-in-spring-boot-3-c11a483ea6dc\" rel=\"nofollow noreferrer\">This article</a> should help with the conversion</p>\n"},{"tags":[],"owner":{"account_id":29772902,"reputation":49,"user_id":22817655,"display_name":"Kodigas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701142504,"creation_date":1701096984,"answer_id":77557862,"question_id":77510720,"body_markdown":"Alternatively, if you want to stick with `spring-fox`, you can downgrade to Spring Boot 2. It now works\r\n\r\n**IMPORTANT!** You really need that magic property (see the second to last snippet). More on that [here][1]\r\n\r\n`http://localhost:8080/swagger-ui/index.html` works too\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;2.6.4&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;com.example&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;helloworldservice&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;helloworldservice&lt;/name&gt;\r\n\t&lt;description&gt;helloworldservice&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;17&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;io.springfox&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;springfox-boot-starter&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.0.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;io.springfox&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;springfox-swagger-ui&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.0.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;image&gt;\r\n\t\t\t\t\t\t&lt;builder&gt;paketobuildpacks/builder-jammy-base:latest&lt;/builder&gt;\r\n\t\t\t\t\t&lt;/image&gt;\r\n\t\t\t\t\t&lt;excludes&gt;\r\n\t\t\t\t\t\t&lt;exclude&gt;\r\n\t\t\t\t\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t\t\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t\t\t\t&lt;/exclude&gt;\r\n\t\t\t\t\t&lt;/excludes&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n```\r\n```java\r\npackage com.example.helloworldmre.config;\r\n\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\nimport springfox.documentation.builders.PathSelectors;\r\nimport springfox.documentation.builders.RequestHandlerSelectors;\r\nimport springfox.documentation.spi.DocumentationType;\r\nimport springfox.documentation.spring.web.plugins.Docket;\r\nimport springfox.documentation.swagger2.annotations.EnableSwagger2;\r\n\r\n@Configuration\r\n@EnableSwagger2\r\npublic class SpringFoxConfig {\r\n    @Bean\r\n    public Docket api() {\r\n        return new Docket(DocumentationType.SWAGGER_2)\r\n                .select()\r\n                .apis(RequestHandlerSelectors.any())\r\n                .paths(PathSelectors.any())\r\n                .build();\r\n    }\r\n}\r\n```\r\n```java\r\npackage com.example.helloworldmre.controller;\r\n\r\nimport com.example.helloworldmre.data.HelloWorld;\r\nimport org.springframework.web.bind.annotation.GetMapping;\r\nimport org.springframework.web.bind.annotation.RestController;\r\n\r\n@RestController\r\npublic class HelloWorldController {\r\n    @GetMapping(&quot;/hello-world&quot;)\r\n    public HelloWorld getHelloWorld() {\r\n        return new HelloWorld();\r\n    }\r\n}\r\n```\r\n```java\r\npackage com.example.helloworldmre.data;\r\n\r\nimport lombok.Getter;\r\nimport lombok.NoArgsConstructor;\r\nimport lombok.Setter;\r\n\r\n@Getter\r\n@Setter\r\n@NoArgsConstructor\r\npublic class HelloWorld {\r\n    private String message = &quot;Hello World!&quot;;\r\n}\r\n```\r\n```java\r\npackage com.example.helloworldmre;\r\n\r\nimport org.springframework.boot.SpringApplication;\r\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\r\n\r\n@SpringBootApplication\r\npublic class HelloworldMreApplication {\r\n\r\n    public static void main(String[] args) {\r\n        SpringApplication.run(HelloworldMreApplication.class, args);\r\n    }\r\n\r\n}\r\n```\r\n```properties\r\nspring.mvc.pathmatch.matching-strategy=ant_path_matcher\r\n```\r\nResponse to `http://localhost:8080/v2/api-docs`:\r\n```json\r\n{\r\n  &quot;swagger&quot;: &quot;2.0&quot;,\r\n  &quot;info&quot;: {\r\n    &quot;description&quot;: &quot;Api Documentation&quot;,\r\n    &quot;version&quot;: &quot;1.0&quot;,\r\n    &quot;title&quot;: &quot;Api Documentation&quot;,\r\n    &quot;termsOfService&quot;: &quot;urn:tos&quot;,\r\n    &quot;contact&quot;: {    },\r\n    &quot;license&quot;: {\r\n      &quot;name&quot;: &quot;Apache 2.0&quot;,\r\n      &quot;url&quot;: &quot;http://www.apache.org/licenses/LICENSE-2.0&quot;\r\n    }\r\n  },\r\n  &quot;host&quot;: &quot;localhost:8080&quot;,\r\n  &quot;basePath&quot;: &quot;/&quot;,\r\n  &quot;tags&quot;: [\r\n    {\r\n      &quot;name&quot;: &quot;basic-error-controller&quot;,\r\n      &quot;description&quot;: &quot;Basic Error Controller&quot;\r\n    },\r\n    {\r\n      &quot;name&quot;: &quot;hello-world-controller&quot;,\r\n      &quot;description&quot;: &quot;Hello World Controller&quot;\r\n    }\r\n  ],\r\n  &quot;paths&quot;: {\r\n    &quot;/error&quot;: {\r\n      &quot;get&quot;: {\r\n        &quot;tags&quot;: [\r\n          &quot;basic-error-controller&quot;\r\n        ],\r\n        &quot;summary&quot;: &quot;error&quot;,\r\n        &quot;operationId&quot;: &quot;errorUsingGET&quot;,\r\n        &quot;produces&quot;: [\r\n          &quot;*/*&quot;\r\n        ],\r\n        &quot;responses&quot;: {\r\n          &quot;200&quot;: {\r\n            &quot;description&quot;: &quot;OK&quot;,\r\n            &quot;schema&quot;: {\r\n              &quot;type&quot;: &quot;object&quot;,\r\n              &quot;additionalProperties&quot;: {\r\n                &quot;type&quot;: &quot;object&quot;\r\n              }\r\n            }\r\n          },\r\n          &quot;401&quot;: {\r\n            &quot;description&quot;: &quot;Unauthorized&quot;\r\n          },\r\n          &quot;403&quot;: {\r\n            &quot;description&quot;: &quot;Forbidden&quot;\r\n          },\r\n          &quot;404&quot;: {\r\n            &quot;description&quot;: &quot;Not Found&quot;\r\n          }\r\n        }\r\n      },\r\n      &quot;head&quot;: {\r\n        &quot;tags&quot;: [\r\n          &quot;basic-error-controller&quot;\r\n        ],\r\n        &quot;summary&quot;: &quot;error&quot;,\r\n        &quot;operationId&quot;: &quot;errorUsingHEAD&quot;,\r\n        &quot;consumes&quot;: [\r\n          &quot;application/json&quot;\r\n        ],\r\n        &quot;produces&quot;: [\r\n          &quot;*/*&quot;\r\n        ],\r\n        &quot;responses&quot;: {\r\n          &quot;200&quot;: {\r\n            &quot;description&quot;: &quot;OK&quot;,\r\n            &quot;schema&quot;: {\r\n              &quot;type&quot;: &quot;object&quot;,\r\n              &quot;additionalProperties&quot;: {\r\n                &quot;type&quot;: &quot;object&quot;\r\n              }\r\n            }\r\n          },\r\n          &quot;204&quot;: {\r\n            &quot;description&quot;: &quot;No Content&quot;\r\n          },\r\n          &quot;401&quot;: {\r\n            &quot;description&quot;: &quot;Unauthorized&quot;\r\n          },\r\n          &quot;403&quot;: {\r\n            &quot;description&quot;: &quot;Forbidden&quot;\r\n          }\r\n        }\r\n      },\r\n      &quot;post&quot;: {\r\n        &quot;tags&quot;: [\r\n          &quot;basic-error-controller&quot;\r\n        ],\r\n        &quot;summary&quot;: &quot;error&quot;,\r\n        &quot;operationId&quot;: &quot;errorUsingPOST&quot;,\r\n        &quot;consumes&quot;: [\r\n          &quot;application/json&quot;\r\n        ],\r\n        &quot;produces&quot;: [\r\n          &quot;*/*&quot;\r\n        ],\r\n        &quot;responses&quot;: {\r\n          &quot;200&quot;: {\r\n            &quot;description&quot;: &quot;OK&quot;,\r\n            &quot;schema&quot;: {\r\n              &quot;type&quot;: &quot;object&quot;,\r\n              &quot;additionalProperties&quot;: {\r\n                &quot;type&quot;: &quot;object&quot;\r\n              }\r\n            }\r\n          },\r\n          &quot;201&quot;: {\r\n            &quot;description&quot;: &quot;Created&quot;\r\n          },\r\n          &quot;401&quot;: {\r\n            &quot;description&quot;: &quot;Unauthorized&quot;\r\n          },\r\n          &quot;403&quot;: {\r\n            &quot;description&quot;: &quot;Forbidden&quot;\r\n          },\r\n          &quot;404&quot;: {\r\n            &quot;description&quot;: &quot;Not Found&quot;\r\n          }\r\n        }\r\n      },\r\n      &quot;put&quot;: {\r\n        &quot;tags&quot;: [\r\n          &quot;basic-error-controller&quot;\r\n        ],\r\n        &quot;summary&quot;: &quot;error&quot;,\r\n        &quot;operationId&quot;: &quot;errorUsingPUT&quot;,\r\n        &quot;consumes&quot;: [\r\n          &quot;application/json&quot;\r\n        ],\r\n        &quot;produces&quot;: [\r\n          &quot;*/*&quot;\r\n        ],\r\n        &quot;responses&quot;: {\r\n          &quot;200&quot;: {\r\n            &quot;description&quot;: &quot;OK&quot;,\r\n            &quot;schema&quot;: {\r\n              &quot;type&quot;: &quot;object&quot;,\r\n              &quot;additionalProperties&quot;: {\r\n                &quot;type&quot;: &quot;object&quot;\r\n              }\r\n            }\r\n          },\r\n          &quot;201&quot;: {\r\n            &quot;description&quot;: &quot;Created&quot;\r\n          },\r\n          &quot;401&quot;: {\r\n            &quot;description&quot;: &quot;Unauthorized&quot;\r\n          },\r\n          &quot;403&quot;: {\r\n            &quot;description&quot;: &quot;Forbidden&quot;\r\n          },\r\n          &quot;404&quot;: {\r\n            &quot;description&quot;: &quot;Not Found&quot;\r\n          }\r\n        }\r\n      },\r\n      &quot;delete&quot;: {\r\n        &quot;tags&quot;: [\r\n          &quot;basic-error-controller&quot;\r\n        ],\r\n        &quot;summary&quot;: &quot;error&quot;,\r\n        &quot;operationId&quot;: &quot;errorUsingDELETE&quot;,\r\n        &quot;produces&quot;: [\r\n          &quot;*/*&quot;\r\n        ],\r\n        &quot;responses&quot;: {\r\n          &quot;200&quot;: {\r\n            &quot;description&quot;: &quot;OK&quot;,\r\n            &quot;schema&quot;: {\r\n              &quot;type&quot;: &quot;object&quot;,\r\n              &quot;additionalProperties&quot;: {\r\n                &quot;type&quot;: &quot;object&quot;\r\n              }\r\n            }\r\n          },\r\n          &quot;204&quot;: {\r\n            &quot;description&quot;: &quot;No Content&quot;\r\n          },\r\n          &quot;401&quot;: {\r\n            &quot;description&quot;: &quot;Unauthorized&quot;\r\n          },\r\n          &quot;403&quot;: {\r\n            &quot;description&quot;: &quot;Forbidden&quot;\r\n          }\r\n        }\r\n      },\r\n      &quot;options&quot;: {\r\n        &quot;tags&quot;: [\r\n          &quot;basic-error-controller&quot;\r\n        ],\r\n        &quot;summary&quot;: &quot;error&quot;,\r\n        &quot;operationId&quot;: &quot;errorUsingOPTIONS&quot;,\r\n        &quot;consumes&quot;: [\r\n          &quot;application/json&quot;\r\n        ],\r\n        &quot;produces&quot;: [\r\n          &quot;*/*&quot;\r\n        ],\r\n        &quot;responses&quot;: {\r\n          &quot;200&quot;: {\r\n            &quot;description&quot;: &quot;OK&quot;,\r\n            &quot;schema&quot;: {\r\n              &quot;type&quot;: &quot;object&quot;,\r\n              &quot;additionalProperties&quot;: {\r\n                &quot;type&quot;: &quot;object&quot;\r\n              }\r\n            }\r\n          },\r\n          &quot;204&quot;: {\r\n            &quot;description&quot;: &quot;No Content&quot;\r\n          },\r\n          &quot;401&quot;: {\r\n            &quot;description&quot;: &quot;Unauthorized&quot;\r\n          },\r\n          &quot;403&quot;: {\r\n            &quot;description&quot;: &quot;Forbidden&quot;\r\n          }\r\n        }\r\n      },\r\n      &quot;patch&quot;: {\r\n        &quot;tags&quot;: [\r\n          &quot;basic-error-controller&quot;\r\n        ],\r\n        &quot;summary&quot;: &quot;error&quot;,\r\n        &quot;operationId&quot;: &quot;errorUsingPATCH&quot;,\r\n        &quot;consumes&quot;: [\r\n          &quot;application/json&quot;\r\n        ],\r\n        &quot;produces&quot;: [\r\n          &quot;*/*&quot;\r\n        ],\r\n        &quot;responses&quot;: {\r\n          &quot;200&quot;: {\r\n            &quot;description&quot;: &quot;OK&quot;,\r\n            &quot;schema&quot;: {\r\n              &quot;type&quot;: &quot;object&quot;,\r\n              &quot;additionalProperties&quot;: {\r\n                &quot;type&quot;: &quot;object&quot;\r\n              }\r\n            }\r\n          },\r\n          &quot;204&quot;: {\r\n            &quot;description&quot;: &quot;No Content&quot;\r\n          },\r\n          &quot;401&quot;: {\r\n            &quot;description&quot;: &quot;Unauthorized&quot;\r\n          },\r\n          &quot;403&quot;: {\r\n            &quot;description&quot;: &quot;Forbidden&quot;\r\n          }\r\n        }\r\n      }\r\n    },\r\n    &quot;/hello-world&quot;: {\r\n      &quot;get&quot;: {\r\n        &quot;tags&quot;: [\r\n          &quot;hello-world-controller&quot;\r\n        ],\r\n        &quot;summary&quot;: &quot;getHelloWorld&quot;,\r\n        &quot;operationId&quot;: &quot;getHelloWorldUsingGET&quot;,\r\n        &quot;produces&quot;: [\r\n          &quot;*/*&quot;\r\n        ],\r\n        &quot;responses&quot;: {\r\n          &quot;200&quot;: {\r\n            &quot;description&quot;: &quot;OK&quot;,\r\n            &quot;schema&quot;: {\r\n              &quot;$ref&quot;: &quot;#/definitions/HelloWorld&quot;\r\n            }\r\n          },\r\n          &quot;401&quot;: {\r\n            &quot;description&quot;: &quot;Unauthorized&quot;\r\n          },\r\n          &quot;403&quot;: {\r\n            &quot;description&quot;: &quot;Forbidden&quot;\r\n          },\r\n          &quot;404&quot;: {\r\n            &quot;description&quot;: &quot;Not Found&quot;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  },\r\n  &quot;definitions&quot;: {\r\n    &quot;HelloWorld&quot;: {\r\n      &quot;type&quot;: &quot;object&quot;,\r\n      &quot;properties&quot;: {\r\n        &quot;message&quot;: {\r\n          &quot;type&quot;: &quot;string&quot;\r\n        }\r\n      },\r\n      &quot;title&quot;: &quot;HelloWorld&quot;\r\n    },\r\n    &quot;ModelAndView&quot;: {\r\n      &quot;type&quot;: &quot;object&quot;,\r\n      &quot;properties&quot;: {\r\n        &quot;empty&quot;: {\r\n          &quot;type&quot;: &quot;boolean&quot;\r\n        },\r\n        &quot;model&quot;: {\r\n          &quot;type&quot;: &quot;object&quot;\r\n        },\r\n        &quot;modelMap&quot;: {\r\n          &quot;type&quot;: &quot;object&quot;,\r\n          &quot;additionalProperties&quot;: {\r\n            &quot;type&quot;: &quot;object&quot;\r\n          }\r\n        },\r\n        &quot;reference&quot;: {\r\n          &quot;type&quot;: &quot;boolean&quot;\r\n        },\r\n        &quot;status&quot;: {\r\n          &quot;type&quot;: &quot;string&quot;,\r\n          &quot;enum&quot;: [\r\n            &quot;ACCEPTED&quot;,\r\n            &quot;ALREADY_REPORTED&quot;,\r\n            &quot;BAD_GATEWAY&quot;,\r\n            &quot;BAD_REQUEST&quot;,\r\n            &quot;BANDWIDTH_LIMIT_EXCEEDED&quot;,\r\n            &quot;CHECKPOINT&quot;,\r\n            &quot;CONFLICT&quot;,\r\n            &quot;CONTINUE&quot;,\r\n            &quot;CREATED&quot;,\r\n            &quot;DESTINATION_LOCKED&quot;,\r\n            &quot;EXPECTATION_FAILED&quot;,\r\n            &quot;FAILED_DEPENDENCY&quot;,\r\n            &quot;FORBIDDEN&quot;,\r\n            &quot;FOUND&quot;,\r\n            &quot;GATEWAY_TIMEOUT&quot;,\r\n            &quot;GONE&quot;,\r\n            &quot;HTTP_VERSION_NOT_SUPPORTED&quot;,\r\n            &quot;IM_USED&quot;,\r\n            &quot;INSUFFICIENT_SPACE_ON_RESOURCE&quot;,\r\n            &quot;INSUFFICIENT_STORAGE&quot;,\r\n            &quot;INTERNAL_SERVER_ERROR&quot;,\r\n            &quot;I_AM_A_TEAPOT&quot;,\r\n            &quot;LENGTH_REQUIRED&quot;,\r\n            &quot;LOCKED&quot;,\r\n            &quot;LOOP_DETECTED&quot;,\r\n            &quot;METHOD_FAILURE&quot;,\r\n            &quot;METHOD_NOT_ALLOWED&quot;,\r\n            &quot;MOVED_PERMANENTLY&quot;,\r\n            &quot;MOVED_TEMPORARILY&quot;,\r\n            &quot;MULTIPLE_CHOICES&quot;,\r\n            &quot;MULTI_STATUS&quot;,\r\n            &quot;NETWORK_AUTHENTICATION_REQUIRED&quot;,\r\n            &quot;NON_AUTHORITATIVE_INFORMATION&quot;,\r\n            &quot;NOT_ACCEPTABLE&quot;,\r\n            &quot;NOT_EXTENDED&quot;,\r\n            &quot;NOT_FOUND&quot;,\r\n            &quot;NOT_IMPLEMENTED&quot;,\r\n            &quot;NOT_MODIFIED&quot;,\r\n            &quot;NO_CONTENT&quot;,\r\n            &quot;OK&quot;,\r\n            &quot;PARTIAL_CONTENT&quot;,\r\n            &quot;PAYLOAD_TOO_LARGE&quot;,\r\n            &quot;PAYMENT_REQUIRED&quot;,\r\n            &quot;PERMANENT_REDIRECT&quot;,\r\n            &quot;PRECONDITION_FAILED&quot;,\r\n            &quot;PRECONDITION_REQUIRED&quot;,\r\n            &quot;PROCESSING&quot;,\r\n            &quot;PROXY_AUTHENTICATION_REQUIRED&quot;,\r\n            &quot;REQUESTED_RANGE_NOT_SATISFIABLE&quot;,\r\n            &quot;REQUEST_ENTITY_TOO_LARGE&quot;,\r\n            &quot;REQUEST_HEADER_FIELDS_TOO_LARGE&quot;,\r\n            &quot;REQUEST_TIMEOUT&quot;,\r\n            &quot;REQUEST_URI_TOO_LONG&quot;,\r\n            &quot;RESET_CONTENT&quot;,\r\n            &quot;SEE_OTHER&quot;,\r\n            &quot;SERVICE_UNAVAILABLE&quot;,\r\n            &quot;SWITCHING_PROTOCOLS&quot;,\r\n            &quot;TEMPORARY_REDIRECT&quot;,\r\n            &quot;TOO_EARLY&quot;,\r\n            &quot;TOO_MANY_REQUESTS&quot;,\r\n            &quot;UNAUTHORIZED&quot;,\r\n            &quot;UNAVAILABLE_FOR_LEGAL_REASONS&quot;,\r\n            &quot;UNPROCESSABLE_ENTITY&quot;,\r\n            &quot;UNSUPPORTED_MEDIA_TYPE&quot;,\r\n            &quot;UPGRADE_REQUIRED&quot;,\r\n            &quot;URI_TOO_LONG&quot;,\r\n            &quot;USE_PROXY&quot;,\r\n            &quot;VARIANT_ALSO_NEGOTIATES&quot;\r\n          ]\r\n        },\r\n        &quot;view&quot;: {\r\n          &quot;$ref&quot;: &quot;#/definitions/View&quot;\r\n        },\r\n        &quot;viewName&quot;: {\r\n          &quot;type&quot;: &quot;string&quot;\r\n        }\r\n      },\r\n      &quot;title&quot;: &quot;ModelAndView&quot;\r\n    },\r\n    &quot;View&quot;: {\r\n      &quot;type&quot;: &quot;object&quot;,\r\n      &quot;properties&quot;: {\r\n        &quot;contentType&quot;: {\r\n          &quot;type&quot;: &quot;string&quot;\r\n        }\r\n      },\r\n      &quot;title&quot;: &quot;View&quot;\r\n    }\r\n  }\r\n}\r\n```\r\n\r\n  [1]: https://stackoverflow.com/questions/72235752/cannot-invoke-org-springframework-web-servlet-mvc-condition-patternsrequestcond","title":"How do I enable Swagger API endpoints for a Boot application?","body":"<p>Alternatively, if you want to stick with <code>spring-fox</code>, you can downgrade to Spring Boot 2. It now works</p>\n<p><strong>IMPORTANT!</strong> You really need that magic property (see the second to last snippet). More on that <a href=\"https://stackoverflow.com/questions/72235752/cannot-invoke-org-springframework-web-servlet-mvc-condition-patternsrequestcond\">here</a></p>\n<p><code>http://localhost:8080/swagger-ui/index.html</code> works too</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.6.4&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.example&lt;/groupId&gt;\n    &lt;artifactId&gt;helloworldservice&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;helloworldservice&lt;/name&gt;\n    &lt;description&gt;helloworldservice&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.springfox&lt;/groupId&gt;\n            &lt;artifactId&gt;springfox-boot-starter&lt;/artifactId&gt;\n            &lt;version&gt;3.0.0&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.springfox&lt;/groupId&gt;\n            &lt;artifactId&gt;springfox-swagger-ui&lt;/artifactId&gt;\n            &lt;version&gt;3.0.0&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;image&gt;\n                        &lt;builder&gt;paketobuildpacks/builder-jammy-base:latest&lt;/builder&gt;\n                    &lt;/image&gt;\n                    &lt;excludes&gt;\n                        &lt;exclude&gt;\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                        &lt;/exclude&gt;\n                    &lt;/excludes&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example.helloworldmre.config;\n\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport springfox.documentation.builders.PathSelectors;\nimport springfox.documentation.builders.RequestHandlerSelectors;\nimport springfox.documentation.spi.DocumentationType;\nimport springfox.documentation.spring.web.plugins.Docket;\nimport springfox.documentation.swagger2.annotations.EnableSwagger2;\n\n@Configuration\n@EnableSwagger2\npublic class SpringFoxConfig {\n    @Bean\n    public Docket api() {\n        return new Docket(DocumentationType.SWAGGER_2)\n                .select()\n                .apis(RequestHandlerSelectors.any())\n                .paths(PathSelectors.any())\n                .build();\n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example.helloworldmre.controller;\n\nimport com.example.helloworldmre.data.HelloWorld;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\n@RestController\npublic class HelloWorldController {\n    @GetMapping(&quot;/hello-world&quot;)\n    public HelloWorld getHelloWorld() {\n        return new HelloWorld();\n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example.helloworldmre.data;\n\nimport lombok.Getter;\nimport lombok.NoArgsConstructor;\nimport lombok.Setter;\n\n@Getter\n@Setter\n@NoArgsConstructor\npublic class HelloWorld {\n    private String message = &quot;Hello World!&quot;;\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example.helloworldmre;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\npublic class HelloworldMreApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(HelloworldMreApplication.class, args);\n    }\n\n}\n</code></pre>\n<pre><code>spring.mvc.pathmatch.matching-strategy=ant_path_matcher\n</code></pre>\n<p>Response to <code>http://localhost:8080/v2/api-docs</code>:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;swagger&quot;: &quot;2.0&quot;,\n  &quot;info&quot;: {\n    &quot;description&quot;: &quot;Api Documentation&quot;,\n    &quot;version&quot;: &quot;1.0&quot;,\n    &quot;title&quot;: &quot;Api Documentation&quot;,\n    &quot;termsOfService&quot;: &quot;urn:tos&quot;,\n    &quot;contact&quot;: {    },\n    &quot;license&quot;: {\n      &quot;name&quot;: &quot;Apache 2.0&quot;,\n      &quot;url&quot;: &quot;http://www.apache.org/licenses/LICENSE-2.0&quot;\n    }\n  },\n  &quot;host&quot;: &quot;localhost:8080&quot;,\n  &quot;basePath&quot;: &quot;/&quot;,\n  &quot;tags&quot;: [\n    {\n      &quot;name&quot;: &quot;basic-error-controller&quot;,\n      &quot;description&quot;: &quot;Basic Error Controller&quot;\n    },\n    {\n      &quot;name&quot;: &quot;hello-world-controller&quot;,\n      &quot;description&quot;: &quot;Hello World Controller&quot;\n    }\n  ],\n  &quot;paths&quot;: {\n    &quot;/error&quot;: {\n      &quot;get&quot;: {\n        &quot;tags&quot;: [\n          &quot;basic-error-controller&quot;\n        ],\n        &quot;summary&quot;: &quot;error&quot;,\n        &quot;operationId&quot;: &quot;errorUsingGET&quot;,\n        &quot;produces&quot;: [\n          &quot;*/*&quot;\n        ],\n        &quot;responses&quot;: {\n          &quot;200&quot;: {\n            &quot;description&quot;: &quot;OK&quot;,\n            &quot;schema&quot;: {\n              &quot;type&quot;: &quot;object&quot;,\n              &quot;additionalProperties&quot;: {\n                &quot;type&quot;: &quot;object&quot;\n              }\n            }\n          },\n          &quot;401&quot;: {\n            &quot;description&quot;: &quot;Unauthorized&quot;\n          },\n          &quot;403&quot;: {\n            &quot;description&quot;: &quot;Forbidden&quot;\n          },\n          &quot;404&quot;: {\n            &quot;description&quot;: &quot;Not Found&quot;\n          }\n        }\n      },\n      &quot;head&quot;: {\n        &quot;tags&quot;: [\n          &quot;basic-error-controller&quot;\n        ],\n        &quot;summary&quot;: &quot;error&quot;,\n        &quot;operationId&quot;: &quot;errorUsingHEAD&quot;,\n        &quot;consumes&quot;: [\n          &quot;application/json&quot;\n        ],\n        &quot;produces&quot;: [\n          &quot;*/*&quot;\n        ],\n        &quot;responses&quot;: {\n          &quot;200&quot;: {\n            &quot;description&quot;: &quot;OK&quot;,\n            &quot;schema&quot;: {\n              &quot;type&quot;: &quot;object&quot;,\n              &quot;additionalProperties&quot;: {\n                &quot;type&quot;: &quot;object&quot;\n              }\n            }\n          },\n          &quot;204&quot;: {\n            &quot;description&quot;: &quot;No Content&quot;\n          },\n          &quot;401&quot;: {\n            &quot;description&quot;: &quot;Unauthorized&quot;\n          },\n          &quot;403&quot;: {\n            &quot;description&quot;: &quot;Forbidden&quot;\n          }\n        }\n      },\n      &quot;post&quot;: {\n        &quot;tags&quot;: [\n          &quot;basic-error-controller&quot;\n        ],\n        &quot;summary&quot;: &quot;error&quot;,\n        &quot;operationId&quot;: &quot;errorUsingPOST&quot;,\n        &quot;consumes&quot;: [\n          &quot;application/json&quot;\n        ],\n        &quot;produces&quot;: [\n          &quot;*/*&quot;\n        ],\n        &quot;responses&quot;: {\n          &quot;200&quot;: {\n            &quot;description&quot;: &quot;OK&quot;,\n            &quot;schema&quot;: {\n              &quot;type&quot;: &quot;object&quot;,\n              &quot;additionalProperties&quot;: {\n                &quot;type&quot;: &quot;object&quot;\n              }\n            }\n          },\n          &quot;201&quot;: {\n            &quot;description&quot;: &quot;Created&quot;\n          },\n          &quot;401&quot;: {\n            &quot;description&quot;: &quot;Unauthorized&quot;\n          },\n          &quot;403&quot;: {\n            &quot;description&quot;: &quot;Forbidden&quot;\n          },\n          &quot;404&quot;: {\n            &quot;description&quot;: &quot;Not Found&quot;\n          }\n        }\n      },\n      &quot;put&quot;: {\n        &quot;tags&quot;: [\n          &quot;basic-error-controller&quot;\n        ],\n        &quot;summary&quot;: &quot;error&quot;,\n        &quot;operationId&quot;: &quot;errorUsingPUT&quot;,\n        &quot;consumes&quot;: [\n          &quot;application/json&quot;\n        ],\n        &quot;produces&quot;: [\n          &quot;*/*&quot;\n        ],\n        &quot;responses&quot;: {\n          &quot;200&quot;: {\n            &quot;description&quot;: &quot;OK&quot;,\n            &quot;schema&quot;: {\n              &quot;type&quot;: &quot;object&quot;,\n              &quot;additionalProperties&quot;: {\n                &quot;type&quot;: &quot;object&quot;\n              }\n            }\n          },\n          &quot;201&quot;: {\n            &quot;description&quot;: &quot;Created&quot;\n          },\n          &quot;401&quot;: {\n            &quot;description&quot;: &quot;Unauthorized&quot;\n          },\n          &quot;403&quot;: {\n            &quot;description&quot;: &quot;Forbidden&quot;\n          },\n          &quot;404&quot;: {\n            &quot;description&quot;: &quot;Not Found&quot;\n          }\n        }\n      },\n      &quot;delete&quot;: {\n        &quot;tags&quot;: [\n          &quot;basic-error-controller&quot;\n        ],\n        &quot;summary&quot;: &quot;error&quot;,\n        &quot;operationId&quot;: &quot;errorUsingDELETE&quot;,\n        &quot;produces&quot;: [\n          &quot;*/*&quot;\n        ],\n        &quot;responses&quot;: {\n          &quot;200&quot;: {\n            &quot;description&quot;: &quot;OK&quot;,\n            &quot;schema&quot;: {\n              &quot;type&quot;: &quot;object&quot;,\n              &quot;additionalProperties&quot;: {\n                &quot;type&quot;: &quot;object&quot;\n              }\n            }\n          },\n          &quot;204&quot;: {\n            &quot;description&quot;: &quot;No Content&quot;\n          },\n          &quot;401&quot;: {\n            &quot;description&quot;: &quot;Unauthorized&quot;\n          },\n          &quot;403&quot;: {\n            &quot;description&quot;: &quot;Forbidden&quot;\n          }\n        }\n      },\n      &quot;options&quot;: {\n        &quot;tags&quot;: [\n          &quot;basic-error-controller&quot;\n        ],\n        &quot;summary&quot;: &quot;error&quot;,\n        &quot;operationId&quot;: &quot;errorUsingOPTIONS&quot;,\n        &quot;consumes&quot;: [\n          &quot;application/json&quot;\n        ],\n        &quot;produces&quot;: [\n          &quot;*/*&quot;\n        ],\n        &quot;responses&quot;: {\n          &quot;200&quot;: {\n            &quot;description&quot;: &quot;OK&quot;,\n            &quot;schema&quot;: {\n              &quot;type&quot;: &quot;object&quot;,\n              &quot;additionalProperties&quot;: {\n                &quot;type&quot;: &quot;object&quot;\n              }\n            }\n          },\n          &quot;204&quot;: {\n            &quot;description&quot;: &quot;No Content&quot;\n          },\n          &quot;401&quot;: {\n            &quot;description&quot;: &quot;Unauthorized&quot;\n          },\n          &quot;403&quot;: {\n            &quot;description&quot;: &quot;Forbidden&quot;\n          }\n        }\n      },\n      &quot;patch&quot;: {\n        &quot;tags&quot;: [\n          &quot;basic-error-controller&quot;\n        ],\n        &quot;summary&quot;: &quot;error&quot;,\n        &quot;operationId&quot;: &quot;errorUsingPATCH&quot;,\n        &quot;consumes&quot;: [\n          &quot;application/json&quot;\n        ],\n        &quot;produces&quot;: [\n          &quot;*/*&quot;\n        ],\n        &quot;responses&quot;: {\n          &quot;200&quot;: {\n            &quot;description&quot;: &quot;OK&quot;,\n            &quot;schema&quot;: {\n              &quot;type&quot;: &quot;object&quot;,\n              &quot;additionalProperties&quot;: {\n                &quot;type&quot;: &quot;object&quot;\n              }\n            }\n          },\n          &quot;204&quot;: {\n            &quot;description&quot;: &quot;No Content&quot;\n          },\n          &quot;401&quot;: {\n            &quot;description&quot;: &quot;Unauthorized&quot;\n          },\n          &quot;403&quot;: {\n            &quot;description&quot;: &quot;Forbidden&quot;\n          }\n        }\n      }\n    },\n    &quot;/hello-world&quot;: {\n      &quot;get&quot;: {\n        &quot;tags&quot;: [\n          &quot;hello-world-controller&quot;\n        ],\n        &quot;summary&quot;: &quot;getHelloWorld&quot;,\n        &quot;operationId&quot;: &quot;getHelloWorldUsingGET&quot;,\n        &quot;produces&quot;: [\n          &quot;*/*&quot;\n        ],\n        &quot;responses&quot;: {\n          &quot;200&quot;: {\n            &quot;description&quot;: &quot;OK&quot;,\n            &quot;schema&quot;: {\n              &quot;$ref&quot;: &quot;#/definitions/HelloWorld&quot;\n            }\n          },\n          &quot;401&quot;: {\n            &quot;description&quot;: &quot;Unauthorized&quot;\n          },\n          &quot;403&quot;: {\n            &quot;description&quot;: &quot;Forbidden&quot;\n          },\n          &quot;404&quot;: {\n            &quot;description&quot;: &quot;Not Found&quot;\n          }\n        }\n      }\n    }\n  },\n  &quot;definitions&quot;: {\n    &quot;HelloWorld&quot;: {\n      &quot;type&quot;: &quot;object&quot;,\n      &quot;properties&quot;: {\n        &quot;message&quot;: {\n          &quot;type&quot;: &quot;string&quot;\n        }\n      },\n      &quot;title&quot;: &quot;HelloWorld&quot;\n    },\n    &quot;ModelAndView&quot;: {\n      &quot;type&quot;: &quot;object&quot;,\n      &quot;properties&quot;: {\n        &quot;empty&quot;: {\n          &quot;type&quot;: &quot;boolean&quot;\n        },\n        &quot;model&quot;: {\n          &quot;type&quot;: &quot;object&quot;\n        },\n        &quot;modelMap&quot;: {\n          &quot;type&quot;: &quot;object&quot;,\n          &quot;additionalProperties&quot;: {\n            &quot;type&quot;: &quot;object&quot;\n          }\n        },\n        &quot;reference&quot;: {\n          &quot;type&quot;: &quot;boolean&quot;\n        },\n        &quot;status&quot;: {\n          &quot;type&quot;: &quot;string&quot;,\n          &quot;enum&quot;: [\n            &quot;ACCEPTED&quot;,\n            &quot;ALREADY_REPORTED&quot;,\n            &quot;BAD_GATEWAY&quot;,\n            &quot;BAD_REQUEST&quot;,\n            &quot;BANDWIDTH_LIMIT_EXCEEDED&quot;,\n            &quot;CHECKPOINT&quot;,\n            &quot;CONFLICT&quot;,\n            &quot;CONTINUE&quot;,\n            &quot;CREATED&quot;,\n            &quot;DESTINATION_LOCKED&quot;,\n            &quot;EXPECTATION_FAILED&quot;,\n            &quot;FAILED_DEPENDENCY&quot;,\n            &quot;FORBIDDEN&quot;,\n            &quot;FOUND&quot;,\n            &quot;GATEWAY_TIMEOUT&quot;,\n            &quot;GONE&quot;,\n            &quot;HTTP_VERSION_NOT_SUPPORTED&quot;,\n            &quot;IM_USED&quot;,\n            &quot;INSUFFICIENT_SPACE_ON_RESOURCE&quot;,\n            &quot;INSUFFICIENT_STORAGE&quot;,\n            &quot;INTERNAL_SERVER_ERROR&quot;,\n            &quot;I_AM_A_TEAPOT&quot;,\n            &quot;LENGTH_REQUIRED&quot;,\n            &quot;LOCKED&quot;,\n            &quot;LOOP_DETECTED&quot;,\n            &quot;METHOD_FAILURE&quot;,\n            &quot;METHOD_NOT_ALLOWED&quot;,\n            &quot;MOVED_PERMANENTLY&quot;,\n            &quot;MOVED_TEMPORARILY&quot;,\n            &quot;MULTIPLE_CHOICES&quot;,\n            &quot;MULTI_STATUS&quot;,\n            &quot;NETWORK_AUTHENTICATION_REQUIRED&quot;,\n            &quot;NON_AUTHORITATIVE_INFORMATION&quot;,\n            &quot;NOT_ACCEPTABLE&quot;,\n            &quot;NOT_EXTENDED&quot;,\n            &quot;NOT_FOUND&quot;,\n            &quot;NOT_IMPLEMENTED&quot;,\n            &quot;NOT_MODIFIED&quot;,\n            &quot;NO_CONTENT&quot;,\n            &quot;OK&quot;,\n            &quot;PARTIAL_CONTENT&quot;,\n            &quot;PAYLOAD_TOO_LARGE&quot;,\n            &quot;PAYMENT_REQUIRED&quot;,\n            &quot;PERMANENT_REDIRECT&quot;,\n            &quot;PRECONDITION_FAILED&quot;,\n            &quot;PRECONDITION_REQUIRED&quot;,\n            &quot;PROCESSING&quot;,\n            &quot;PROXY_AUTHENTICATION_REQUIRED&quot;,\n            &quot;REQUESTED_RANGE_NOT_SATISFIABLE&quot;,\n            &quot;REQUEST_ENTITY_TOO_LARGE&quot;,\n            &quot;REQUEST_HEADER_FIELDS_TOO_LARGE&quot;,\n            &quot;REQUEST_TIMEOUT&quot;,\n            &quot;REQUEST_URI_TOO_LONG&quot;,\n            &quot;RESET_CONTENT&quot;,\n            &quot;SEE_OTHER&quot;,\n            &quot;SERVICE_UNAVAILABLE&quot;,\n            &quot;SWITCHING_PROTOCOLS&quot;,\n            &quot;TEMPORARY_REDIRECT&quot;,\n            &quot;TOO_EARLY&quot;,\n            &quot;TOO_MANY_REQUESTS&quot;,\n            &quot;UNAUTHORIZED&quot;,\n            &quot;UNAVAILABLE_FOR_LEGAL_REASONS&quot;,\n            &quot;UNPROCESSABLE_ENTITY&quot;,\n            &quot;UNSUPPORTED_MEDIA_TYPE&quot;,\n            &quot;UPGRADE_REQUIRED&quot;,\n            &quot;URI_TOO_LONG&quot;,\n            &quot;USE_PROXY&quot;,\n            &quot;VARIANT_ALSO_NEGOTIATES&quot;\n          ]\n        },\n        &quot;view&quot;: {\n          &quot;$ref&quot;: &quot;#/definitions/View&quot;\n        },\n        &quot;viewName&quot;: {\n          &quot;type&quot;: &quot;string&quot;\n        }\n      },\n      &quot;title&quot;: &quot;ModelAndView&quot;\n    },\n    &quot;View&quot;: {\n      &quot;type&quot;: &quot;object&quot;,\n      &quot;properties&quot;: {\n        &quot;contentType&quot;: {\n          &quot;type&quot;: &quot;string&quot;\n        }\n      },\n      &quot;title&quot;: &quot;View&quot;\n    }\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":29772902,"reputation":49,"user_id":22817655,"display_name":"Kodigas"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":109,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77511068,"answer_count":2,"score":0,"last_activity_date":1701142504,"creation_date":1700396086,"question_id":77510720,"body_markdown":"How do enable Swagger endpoints for my microservice? According to [this Baeldung article][1], it should be super-easy\r\n\r\nFirst, you add a Springfox dependency\r\n```xml\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;io.springfox&lt;/groupId&gt;\r\n    &lt;artifactId&gt;springfox-boot-starter&lt;/artifactId&gt;\r\n    &lt;version&gt;3.0.0&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\nSecond, you include this configuration file\r\n\r\nThat should be it! No properties, no nothing\r\n```java\r\n@Configuration\r\npublic class SpringFoxConfig {                                    \r\n    @Bean\r\n    public Docket api() { \r\n        return new Docket(DocumentationType.SWAGGER_2)  \r\n          .select()                                  \r\n          .apis(RequestHandlerSelectors.any())              \r\n          .paths(PathSelectors.any())                          \r\n          .build();                                           \r\n    }\r\n}\r\n```\r\nI did exactly&#185; that. But I still get an 404 when trying to hit `/v2/api-docs`\r\n\r\nWhy and how do I finally enable those Swagger endpoints?\r\n\r\n# MRE:\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    &lt;parent&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n        &lt;version&gt;3.1.5&lt;/version&gt;\r\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n    &lt;/parent&gt;\r\n    &lt;groupId&gt;com.example&lt;/groupId&gt;\r\n    &lt;artifactId&gt;helloworldMRE&lt;/artifactId&gt;\r\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n    &lt;name&gt;helloworldMRE&lt;/name&gt;\r\n    &lt;description&gt;helloworldMRE&lt;/description&gt;\r\n    &lt;properties&gt;\r\n        &lt;java.version&gt;17&lt;/java.version&gt;\r\n    &lt;/properties&gt;\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n            &lt;optional&gt;true&lt;/optional&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.springfox&lt;/groupId&gt;\r\n            &lt;artifactId&gt;springfox-boot-starter&lt;/artifactId&gt;\r\n            &lt;version&gt;3.0.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;image&gt;\r\n                        &lt;builder&gt;paketobuildpacks/builder-jammy-base:latest&lt;/builder&gt;\r\n                    &lt;/image&gt;\r\n                    &lt;excludes&gt;\r\n                        &lt;exclude&gt;\r\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n                        &lt;/exclude&gt;\r\n                    &lt;/excludes&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n```\r\n```java\r\npackage com.example.helloworldmre;\r\n\r\nimport lombok.Getter;\r\nimport lombok.NoArgsConstructor;\r\nimport lombok.Setter;\r\n\r\n@Getter\r\n@Setter\r\n@NoArgsConstructor\r\npublic class HelloWorld {\r\n    private String message = &quot;Hello World!&quot;;\r\n}\r\n```\r\n```java\r\npackage com.example.helloworldmre;\r\n\r\nimport org.springframework.web.bind.annotation.GetMapping;\r\nimport org.springframework.web.bind.annotation.RestController;\r\n\r\n@RestController\r\npublic class HelloWorldController {\r\n    @GetMapping(&quot;/hello-world&quot;)\r\n    public HelloWorld getHelloWorld() {\r\n        return new HelloWorld();\r\n    }\r\n}\r\n```\r\n```java\r\npackage com.example.helloworldmre;\r\n\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\nimport springfox.documentation.builders.PathSelectors;\r\nimport springfox.documentation.builders.RequestHandlerSelectors;\r\nimport springfox.documentation.spi.DocumentationType;\r\nimport springfox.documentation.spring.web.plugins.Docket;\r\n\r\n@Configuration\r\npublic class SpringFoxConfig {\r\n    @Bean\r\n    public Docket api() {\r\n        return new Docket(DocumentationType.SWAGGER_2)\r\n                .select()\r\n                .apis(RequestHandlerSelectors.any())\r\n                .paths(PathSelectors.any())\r\n                .build();\r\n    }\r\n}\r\n```\r\n```java\r\npackage com.example.helloworldmre;\r\n\r\nimport org.springframework.boot.SpringApplication;\r\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\r\n\r\n@SpringBootApplication\r\npublic class HelloworldMreApplication {\r\n\r\n    public static void main(String[] args) {\r\n        SpringApplication.run(HelloworldMreApplication.class, args);\r\n    }\r\n\r\n}\r\n```\r\n&#185; *Well, not exactly. The Baeldung article used Boot 2.4.0*\r\n```xml\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n    &lt;version&gt;2.4.0&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n*I use Spring Boot 3*\r\n```xml\r\n    &lt;parent&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n        &lt;version&gt;3.1.3&lt;/version&gt;\r\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n    &lt;/parent&gt;\r\n```\r\n*When I tried downgrading to 2.4.0, I started to get this exception so I abandoned that idea*\r\n```\r\njava.lang.IllegalArgumentException: Unsupported class file major version 61\r\n```\r\n\r\n\r\n  [1]: https://www.baeldung.com/swagger-2-documentation-for-spring-rest-api","title":"How do I enable Swagger API endpoints for a Boot application?","body":"<p>How do enable Swagger endpoints for my microservice? According to <a href=\"https://www.baeldung.com/swagger-2-documentation-for-spring-rest-api\" rel=\"nofollow noreferrer\">this Baeldung article</a>, it should be super-easy</p>\n<p>First, you add a Springfox dependency</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;io.springfox&lt;/groupId&gt;\n    &lt;artifactId&gt;springfox-boot-starter&lt;/artifactId&gt;\n    &lt;version&gt;3.0.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Second, you include this configuration file</p>\n<p>That should be it! No properties, no nothing</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\npublic class SpringFoxConfig {                                    \n    @Bean\n    public Docket api() { \n        return new Docket(DocumentationType.SWAGGER_2)  \n          .select()                                  \n          .apis(RequestHandlerSelectors.any())              \n          .paths(PathSelectors.any())                          \n          .build();                                           \n    }\n}\n</code></pre>\n<p>I did exactly¹ that. But I still get an 404 when trying to hit <code>/v2/api-docs</code></p>\n<p>Why and how do I finally enable those Swagger endpoints?</p>\n<h1>MRE:</h1>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.1.5&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.example&lt;/groupId&gt;\n    &lt;artifactId&gt;helloworldMRE&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;helloworldMRE&lt;/name&gt;\n    &lt;description&gt;helloworldMRE&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.springfox&lt;/groupId&gt;\n            &lt;artifactId&gt;springfox-boot-starter&lt;/artifactId&gt;\n            &lt;version&gt;3.0.0&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;image&gt;\n                        &lt;builder&gt;paketobuildpacks/builder-jammy-base:latest&lt;/builder&gt;\n                    &lt;/image&gt;\n                    &lt;excludes&gt;\n                        &lt;exclude&gt;\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                        &lt;/exclude&gt;\n                    &lt;/excludes&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example.helloworldmre;\n\nimport lombok.Getter;\nimport lombok.NoArgsConstructor;\nimport lombok.Setter;\n\n@Getter\n@Setter\n@NoArgsConstructor\npublic class HelloWorld {\n    private String message = &quot;Hello World!&quot;;\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example.helloworldmre;\n\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\n@RestController\npublic class HelloWorldController {\n    @GetMapping(&quot;/hello-world&quot;)\n    public HelloWorld getHelloWorld() {\n        return new HelloWorld();\n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example.helloworldmre;\n\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport springfox.documentation.builders.PathSelectors;\nimport springfox.documentation.builders.RequestHandlerSelectors;\nimport springfox.documentation.spi.DocumentationType;\nimport springfox.documentation.spring.web.plugins.Docket;\n\n@Configuration\npublic class SpringFoxConfig {\n    @Bean\n    public Docket api() {\n        return new Docket(DocumentationType.SWAGGER_2)\n                .select()\n                .apis(RequestHandlerSelectors.any())\n                .paths(PathSelectors.any())\n                .build();\n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example.helloworldmre;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\npublic class HelloworldMreApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(HelloworldMreApplication.class, args);\n    }\n\n}\n</code></pre>\n<p>¹ <em>Well, not exactly. The Baeldung article used Boot 2.4.0</em></p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n    &lt;version&gt;2.4.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p><em>I use Spring Boot 3</em></p>\n<pre class=\"lang-xml prettyprint-override\"><code>    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.1.3&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n</code></pre>\n<p><em>When I tried downgrading to 2.4.0, I started to get this exception so I abandoned that idea</em></p>\n<pre><code>java.lang.IllegalArgumentException: Unsupported class file major version 61\n</code></pre>\n"},{"tags":["java","android","kotlin","android-tv"],"comments":[{"owner":{"account_id":9028981,"reputation":4572,"user_id":8822610,"display_name":"vighnesh153"},"score":0,"creation_date":1700646560,"post_id":77522504,"comment_id":136679179,"body_markdown":"If you want to uninstall the app, you can try `adb uninstall &lt;package-name&gt;`. This should remove it from the launcher&#39;s list as well.","body":"If you want to uninstall the app, you can try <code>adb uninstall &lt;package-name&gt;</code>. This should remove it from the launcher&#39;s list as well."},{"owner":{"account_id":18593139,"reputation":104,"user_id":13549882,"display_name":"Mathan Kumar"},"score":0,"creation_date":1700648985,"post_id":77522504,"comment_id":136679633,"body_markdown":"@vighnesh153 am not asking about uninstalling the app.","body":"@vighnesh153 am not asking about uninstalling the app."},{"owner":{"account_id":39846,"reputation":991113,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":0,"creation_date":1700654522,"post_id":77522504,"comment_id":136680659,"body_markdown":"In the end, what shows up in any launcher (on a phone, TV, etc.) is up to the developers of that launcher.","body":"In the end, what shows up in any launcher (on a phone, TV, etc.) is up to the developers of that launcher."},{"owner":{"account_id":18593139,"reputation":104,"user_id":13549882,"display_name":"Mathan Kumar"},"score":0,"creation_date":1700819732,"post_id":77522504,"comment_id":136702532,"body_markdown":"@CommonsWare Mobile and tablet launchers are not showing my app. But TV launchers are showing the app.","body":"@CommonsWare Mobile and tablet launchers are not showing my app. But TV launchers are showing the app."}],"answers":[{"tags":[],"owner":{"account_id":30009146,"reputation":1,"user_id":22997226,"display_name":"Royal"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701142290,"creation_date":1701142290,"answer_id":77561201,"question_id":77522504,"body_markdown":"This is like hidden system apps try delete intent filter\r\n\r\nAndroidManifest.xml\r\n\r\n    &lt;intent-filter&gt;\r\n    &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n    &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n    &lt;/intent-filter&gt;\r\n\r\n","title":"Hide Android App from launcher list on Android TV","body":"<p>This is like hidden system apps try delete intent filter</p>\n<p>AndroidManifest.xml</p>\n<pre><code>&lt;intent-filter&gt;\n&lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\n&lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\n&lt;/intent-filter&gt;\n</code></pre>\n"}],"owner":{"account_id":18593139,"reputation":104,"user_id":13549882,"display_name":"Mathan Kumar"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1701142290,"creation_date":1700566641,"question_id":77522504,"body_markdown":"I want to hide my Android app from the Android TV launcher list.\r\n\r\nIs there any way to hide an Android app from the Android TV launcher list? I removed the activity class from the code and removed the manifest activity declaration as well. But the Android app is still showing up in the launcher list.\r\n\r\nNote:\r\nI want to use the application class.","title":"Hide Android App from launcher list on Android TV","body":"<p>I want to hide my Android app from the Android TV launcher list.</p>\n<p>Is there any way to hide an Android app from the Android TV launcher list? I removed the activity class from the code and removed the manifest activity declaration as well. But the Android app is still showing up in the launcher list.</p>\n<p>Note:\nI want to use the application class.</p>\n"},{"tags":["java","android","flutter","gradle"],"answers":[{"tags":[],"owner":{"account_id":7957489,"reputation":586,"user_id":6006263,"display_name":"duanduan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701141645,"creation_date":1701141645,"answer_id":77561170,"question_id":77055632,"body_markdown":"step 1 File-&gt;Project Structure...\r\n[![enter image description here][1]][1]\r\n\r\n\r\n\r\nsetp 2  select jdk1.8\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/wDpMN.png\r\n  [2]: https://i.stack.imgur.com/tIal1.png","title":"Error: Unable to make field private final java.lang.String java.io.File.path accessible: module java.base does not &quot;opens java.io&quot; to unnamed module","body":"<p>step 1 File-&gt;Project Structure...\n<a href=\"https://i.stack.imgur.com/wDpMN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wDpMN.png\" alt=\"enter image description here\" /></a></p>\n<p>setp 2  select jdk1.8\n<a href=\"https://i.stack.imgur.com/tIal1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/tIal1.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":29382800,"reputation":21,"user_id":22512891,"display_name":"HarlanB"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1902,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1701141645,"creation_date":1694040008,"question_id":77055632,"body_markdown":"I am new to flutter and am trying to fix an issue with an app that I inherited.\r\nI was able to build and run this app and then something changed. Not sure what, but I keep getting this error when I run the app in debug mode. \r\n\r\nThe full error is: Execution failed for task &#39;:app:processDebugMainManifest&#39;.\r\n&gt; Unable to make field private final java.lang.String java.io.File.path accessible: module java.base does not &quot;opens java.io&quot; to unnamed module\r\n\r\nFrom what I can tell from googling around is that it appears that I have the wrong Java version.\r\nHowever, I have tried several different Java versions and I still get the same error.\r\n\r\nHere are the specifics.\r\n\r\nOS: Windows 11\r\nIDE: Andriod Studio Giraffe - 2022.3.1\r\nFlutter version: 2.10.5\r\nJava Versions I have tried: \r\nEclipse Temurin version 1.8.0_382\r\nOracle OpenJDK version 11\r\nJetBrains Runtime version 17.0.6\r\n\r\nbuild.gradle\r\n```\r\nbuildscript {\r\n    ext {\r\n        kotlin_version = &#39;1.5.31&#39;\r\n        compileSdkVersion = 32\r\n        targetSdkVersion = 32\r\n        minSdkVersion = 23\r\n        appCompatVersion = &quot;1.4.1&quot;\r\n        playServicesLocationVersion = &quot;19.0.1&quot;\r\n    }\r\n\r\n    repositories {\r\n        google()\r\n        mavenCentral()\r\n    }\r\n\r\n    dependencies {\r\n        classpath &#39;com.android.tools.build:gradle:4.1.0&#39;\r\n        classpath &quot;org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version&quot;\r\n        classpath &#39;com.google.gms:google-services:4.3.8&#39;\r\n        classpath &#39;com.google.firebase:firebase-crashlytics-gradle:2.8.1&#39;\r\n    }\r\n}\r\n\r\nallprojects {\r\n    repositories {\r\n        google()\r\n        mavenCentral()\r\n        maven {\r\n            // [required] flutter_background_geolocation\r\n            url &quot;${project(&#39;:flutter_background_geolocation&#39;).projectDir}/libs&quot;\r\n        }\r\n        maven {\r\n            // [required] background_fetch\r\n            url &quot;${project(&#39;:background_fetch&#39;).projectDir}/libs&quot;\r\n        }\r\n    }\r\n}\r\n\r\nrootProject.buildDir = &#39;../build&#39;\r\nsubprojects {\r\n    project.buildDir = &quot;${rootProject.buildDir}/${project.name}&quot;\r\n    project.evaluationDependsOn(&#39;:app&#39;)\r\n}\r\n\r\ntask clean(type: Delete) {\r\n    delete rootProject.buildDir\r\n}\r\n```\r\n\r\napp\\build.gradle\r\n```\r\ndef localProperties = new Properties()\r\ndef localPropertiesFile = rootProject.file(&#39;local.properties&#39;)\r\nif (localPropertiesFile.exists()) {\r\n    localPropertiesFile.withReader(&#39;UTF-8&#39;) { reader -&gt;\r\n        localProperties.load(reader)\r\n    }\r\n}\r\n\r\ndef flutterRoot = localProperties.getProperty(&#39;flutter.sdk&#39;)\r\nif (flutterRoot == null) {\r\n    throw new Exception(&quot;Flutter SDK not found. Define location with flutter.sdk in the local.properties file.&quot;)\r\n}\r\n\r\ndef flutterVersionCode = localProperties.getProperty(&#39;flutter.versionCode&#39;)\r\nif (flutterVersionCode == null) {\r\n    flutterVersionCode = &#39;1&#39;\r\n}\r\n\r\ndef flutterVersionName = localProperties.getProperty(&#39;flutter.versionName&#39;)\r\nif (flutterVersionName == null) {\r\n    flutterVersionName = &#39;1.0&#39;\r\n}\r\n\r\nProject background_geolocation = project(&#39;:flutter_background_geolocation&#39;)\r\n\r\napply plugin: &#39;com.android.application&#39;\r\napply plugin: &#39;kotlin-android&#39;\r\napply from: &quot;$flutterRoot/packages/flutter_tools/gradle/flutter.gradle&quot;\r\napply from: &quot;${background_geolocation.projectDir}/background_geolocation.gradle&quot;\r\napply plugin: &#39;com.google.gms.google-services&#39;\r\napply plugin: &#39;com.google.firebase.crashlytics&#39;\r\n\r\nandroid {\r\n    compileSdkVersion rootProject.ext.compileSdkVersion\r\n\r\n    compileOptions {\r\n        sourceCompatibility JavaVersion.VERSION_1_8\r\n        targetCompatibility JavaVersion.VERSION_1_8\r\n    }\r\n\r\n    kotlinOptions {\r\n        jvmTarget = &#39;1.8&#39;\r\n    }\r\n\r\n    sourceSets {\r\n        main.java.srcDirs += &#39;src/main/kotlin&#39;\r\n    }\r\n\r\n    defaultConfig {\r\n        applicationId &quot;com.integragroup.deliverytrack.mobile&quot;\r\n        minSdkVersion rootProject.ext.minSdkVersion\r\n        targetSdkVersion rootProject.ext.targetSdkVersion\r\n        versionCode flutterVersionCode.toInteger()\r\n        versionName flutterVersionName\r\n\r\n        ndk {\r\n            abiFilters &#39;arm64-v8a&#39;, &#39;armeabi-v7a&#39;, &#39;x86_64&#39;\r\n        }\r\n    }\r\n\r\n    signingConfigs {\r\n        release {\r\n            storeFile file(&#39;../Signing/Integra&#39;)\r\n            storePassword &quot;f1dalg0&quot;\r\n            keyAlias &quot;Integra&quot;\r\n            keyPassword &quot;f1dalg0&quot;\r\n        }\r\n    }\r\n\r\n    buildTypes {\r\n        release {\r\n            signingConfig signingConfigs.release\r\n            shrinkResources false\r\n            proguardFiles &quot;${background_geolocation.projectDir}/proguard-rules.pro&quot;\r\n        }\r\n        debug {\r\n            signingConfig signingConfigs.release\r\n        }\r\n    }\r\n}\r\n\r\nflutter {\r\n    source &#39;../..&#39;\r\n}\r\n\r\ndependencies {\r\n    implementation &quot;org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version&quot;\r\n\r\n    implementation &#39;com.google.firebase:firebase-crashlytics:18.2.8&#39;\r\n    implementation &#39;com.google.firebase:firebase-analytics:20.1.0&#39;\r\n}\r\n\r\n```\r\n\r\ngradle-wrapper.properties\r\n\r\n```\r\n#Fri Jun 23 08:50:38 CEST 2017\r\ndistributionBase=GRADLE_USER_HOME\r\ndistributionPath=wrapper/dists\r\nzipStoreBase=GRADLE_USER_HOME\r\nzipStorePath=wrapper/dists\r\ndistributionUrl=https\\://services.gradle.org/distributions/gradle-7.2-all.zip\r\nandroid.useAndroidX=true\r\nandroid.enableJetifier=true\r\n```\r\n\r\nAny help would be greatly appreciated.\r\n\r\n\r\n\r\n\r\nI tried to build with differen Java versions:\r\nEclipse Temurin version 1.8.0_382\r\nOracle OpenJDK version 11\r\nJetBrains Runtime version 17.0.6\r\n\r\nI tried to build with Gradle 4.1.3\r\n\r\nAlso tried building with gradle-7.3-all.zip","title":"Error: Unable to make field private final java.lang.String java.io.File.path accessible: module java.base does not &quot;opens java.io&quot; to unnamed module","body":"<p>I am new to flutter and am trying to fix an issue with an app that I inherited.\nI was able to build and run this app and then something changed. Not sure what, but I keep getting this error when I run the app in debug mode.</p>\n<p>The full error is: Execution failed for task ':app:processDebugMainManifest'.</p>\n<blockquote>\n<p>Unable to make field private final java.lang.String java.io.File.path accessible: module java.base does not &quot;opens java.io&quot; to unnamed module</p>\n</blockquote>\n<p>From what I can tell from googling around is that it appears that I have the wrong Java version.\nHowever, I have tried several different Java versions and I still get the same error.</p>\n<p>Here are the specifics.</p>\n<p>OS: Windows 11\nIDE: Andriod Studio Giraffe - 2022.3.1\nFlutter version: 2.10.5\nJava Versions I have tried:\nEclipse Temurin version 1.8.0_382\nOracle OpenJDK version 11\nJetBrains Runtime version 17.0.6</p>\n<p>build.gradle</p>\n<pre><code>buildscript {\n    ext {\n        kotlin_version = '1.5.31'\n        compileSdkVersion = 32\n        targetSdkVersion = 32\n        minSdkVersion = 23\n        appCompatVersion = &quot;1.4.1&quot;\n        playServicesLocationVersion = &quot;19.0.1&quot;\n    }\n\n    repositories {\n        google()\n        mavenCentral()\n    }\n\n    dependencies {\n        classpath 'com.android.tools.build:gradle:4.1.0'\n        classpath &quot;org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version&quot;\n        classpath 'com.google.gms:google-services:4.3.8'\n        classpath 'com.google.firebase:firebase-crashlytics-gradle:2.8.1'\n    }\n}\n\nallprojects {\n    repositories {\n        google()\n        mavenCentral()\n        maven {\n            // [required] flutter_background_geolocation\n            url &quot;${project(':flutter_background_geolocation').projectDir}/libs&quot;\n        }\n        maven {\n            // [required] background_fetch\n            url &quot;${project(':background_fetch').projectDir}/libs&quot;\n        }\n    }\n}\n\nrootProject.buildDir = '../build'\nsubprojects {\n    project.buildDir = &quot;${rootProject.buildDir}/${project.name}&quot;\n    project.evaluationDependsOn(':app')\n}\n\ntask clean(type: Delete) {\n    delete rootProject.buildDir\n}\n</code></pre>\n<p>app\\build.gradle</p>\n<pre><code>def localProperties = new Properties()\ndef localPropertiesFile = rootProject.file('local.properties')\nif (localPropertiesFile.exists()) {\n    localPropertiesFile.withReader('UTF-8') { reader -&gt;\n        localProperties.load(reader)\n    }\n}\n\ndef flutterRoot = localProperties.getProperty('flutter.sdk')\nif (flutterRoot == null) {\n    throw new Exception(&quot;Flutter SDK not found. Define location with flutter.sdk in the local.properties file.&quot;)\n}\n\ndef flutterVersionCode = localProperties.getProperty('flutter.versionCode')\nif (flutterVersionCode == null) {\n    flutterVersionCode = '1'\n}\n\ndef flutterVersionName = localProperties.getProperty('flutter.versionName')\nif (flutterVersionName == null) {\n    flutterVersionName = '1.0'\n}\n\nProject background_geolocation = project(':flutter_background_geolocation')\n\napply plugin: 'com.android.application'\napply plugin: 'kotlin-android'\napply from: &quot;$flutterRoot/packages/flutter_tools/gradle/flutter.gradle&quot;\napply from: &quot;${background_geolocation.projectDir}/background_geolocation.gradle&quot;\napply plugin: 'com.google.gms.google-services'\napply plugin: 'com.google.firebase.crashlytics'\n\nandroid {\n    compileSdkVersion rootProject.ext.compileSdkVersion\n\n    compileOptions {\n        sourceCompatibility JavaVersion.VERSION_1_8\n        targetCompatibility JavaVersion.VERSION_1_8\n    }\n\n    kotlinOptions {\n        jvmTarget = '1.8'\n    }\n\n    sourceSets {\n        main.java.srcDirs += 'src/main/kotlin'\n    }\n\n    defaultConfig {\n        applicationId &quot;com.integragroup.deliverytrack.mobile&quot;\n        minSdkVersion rootProject.ext.minSdkVersion\n        targetSdkVersion rootProject.ext.targetSdkVersion\n        versionCode flutterVersionCode.toInteger()\n        versionName flutterVersionName\n\n        ndk {\n            abiFilters 'arm64-v8a', 'armeabi-v7a', 'x86_64'\n        }\n    }\n\n    signingConfigs {\n        release {\n            storeFile file('../Signing/Integra')\n            storePassword &quot;f1dalg0&quot;\n            keyAlias &quot;Integra&quot;\n            keyPassword &quot;f1dalg0&quot;\n        }\n    }\n\n    buildTypes {\n        release {\n            signingConfig signingConfigs.release\n            shrinkResources false\n            proguardFiles &quot;${background_geolocation.projectDir}/proguard-rules.pro&quot;\n        }\n        debug {\n            signingConfig signingConfigs.release\n        }\n    }\n}\n\nflutter {\n    source '../..'\n}\n\ndependencies {\n    implementation &quot;org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version&quot;\n\n    implementation 'com.google.firebase:firebase-crashlytics:18.2.8'\n    implementation 'com.google.firebase:firebase-analytics:20.1.0'\n}\n\n</code></pre>\n<p>gradle-wrapper.properties</p>\n<pre><code>#Fri Jun 23 08:50:38 CEST 2017\ndistributionBase=GRADLE_USER_HOME\ndistributionPath=wrapper/dists\nzipStoreBase=GRADLE_USER_HOME\nzipStorePath=wrapper/dists\ndistributionUrl=https\\://services.gradle.org/distributions/gradle-7.2-all.zip\nandroid.useAndroidX=true\nandroid.enableJetifier=true\n</code></pre>\n<p>Any help would be greatly appreciated.</p>\n<p>I tried to build with differen Java versions:\nEclipse Temurin version 1.8.0_382\nOracle OpenJDK version 11\nJetBrains Runtime version 17.0.6</p>\n<p>I tried to build with Gradle 4.1.3</p>\n<p>Also tried building with gradle-7.3-all.zip</p>\n"},{"tags":["java","java-native-interface","scip"],"answers":[{"tags":[],"owner":{"account_id":1951676,"reputation":993,"user_id":1755629,"accept_rate":100,"display_name":"Roman Makhlin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701141483,"creation_date":1701141483,"answer_id":77561162,"question_id":77561161,"body_markdown":"It&#39;s so happend, that after two hours of digging, I found out, that I completly forgot to include:\r\n\r\n`Loader.loadNativeLibraries();`\r\n\r\nbefore actually loading this lib by Or-Tools.\r\n\r\nHopefully, someone in the future will spend less time investigating something like this.","title":"Making SCIP for JNI and Or-Tools","body":"<p>It's so happend, that after two hours of digging, I found out, that I completly forgot to include:</p>\n<p><code>Loader.loadNativeLibraries();</code></p>\n<p>before actually loading this lib by Or-Tools.</p>\n<p>Hopefully, someone in the future will spend less time investigating something like this.</p>\n"}],"owner":{"account_id":1951676,"reputation":993,"user_id":1755629,"accept_rate":100,"display_name":"Roman Makhlin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":15,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1701141483,"creation_date":1701141483,"question_id":77561161,"body_markdown":"Trying SCIP for the first time. Couldn&#39;t quite wrap my head around how to use JNI with SCIP version 8.x.x. on MacOs.\r\n\r\nI downloaded scipoptsuite-8.0.4 from the website, then followed instruction of how to compile it:\r\n\r\n    mkdir build\r\n    cd build\r\n    cmake ..  -DAUTOBUILD=on\r\n    make\r\n    make install\r\n\r\nAfter that I verified, that shared library is created:\r\n\r\n    ➜ ls /usr/local/lib/libscip.dylib\r\n    /usr/local/lib/libscip.dylib\r\n\r\nThen I followed the instructions from Or-Tools and did this:\r\n\r\n```\r\n            System.loadLibrary(&quot;scip&quot;); // added to verify, that shared lib is accessible\r\n            MPSolver mpSolver = MPSolver.createSolver(&quot;SCIP&quot;);\r\n```\r\n\r\nAnd I got this error:\r\n\r\n    Exception in thread &quot;main&quot; java.lang.UnsatisfiedLinkError: &#39;long com.google.ortools.linearsolver.mainJNI.MPSolver_createSolver(java.lang.String)&#39;\r\n    \tat com.google.ortools.linearsolver.mainJNI.MPSolver_createSolver(Native Method)\r\n    \tat com.google.ortools.linearsolver.MPSolver.createSolver(MPSolver.java:140)\r\n    \tat org.example.Solver.solve(Solver.java:58)\r\n    \tat org.example.Solver.main(Solver.java:24)\r\n\r\nSadly, I do not have any C++ related background to proceed any further than that.","title":"Making SCIP for JNI and Or-Tools","body":"<p>Trying SCIP for the first time. Couldn't quite wrap my head around how to use JNI with SCIP version 8.x.x. on MacOs.</p>\n<p>I downloaded scipoptsuite-8.0.4 from the website, then followed instruction of how to compile it:</p>\n<pre><code>mkdir build\ncd build\ncmake ..  -DAUTOBUILD=on\nmake\nmake install\n</code></pre>\n<p>After that I verified, that shared library is created:</p>\n<pre><code>➜ ls /usr/local/lib/libscip.dylib\n/usr/local/lib/libscip.dylib\n</code></pre>\n<p>Then I followed the instructions from Or-Tools and did this:</p>\n<pre><code>            System.loadLibrary(&quot;scip&quot;); // added to verify, that shared lib is accessible\n            MPSolver mpSolver = MPSolver.createSolver(&quot;SCIP&quot;);\n</code></pre>\n<p>And I got this error:</p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.UnsatisfiedLinkError: 'long com.google.ortools.linearsolver.mainJNI.MPSolver_createSolver(java.lang.String)'\n    at com.google.ortools.linearsolver.mainJNI.MPSolver_createSolver(Native Method)\n    at com.google.ortools.linearsolver.MPSolver.createSolver(MPSolver.java:140)\n    at org.example.Solver.solve(Solver.java:58)\n    at org.example.Solver.main(Solver.java:24)\n</code></pre>\n<p>Sadly, I do not have any C++ related background to proceed any further than that.</p>\n"},{"tags":["java","spring-boot","junit","mockito","powermockito"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1701158864,"post_id":77561160,"comment_id":136737442,"body_markdown":"Why use powermock(ito). Just use mockito to mock the  service and when the `createJenkinsInstance` return the mocked instance. I consider things like PowerMock to be the wrong thing for testing and if you cannot do it (easily) with regular Mockito you have something wrong in your design.","body":"Why use powermock(ito). Just use mockito to mock the  service and when the <code>createJenkinsInstance</code> return the mocked instance. I consider things like PowerMock to be the wrong thing for testing and if you cannot do it (easily) with regular Mockito you have something wrong in your design."}],"owner":{"account_id":26203229,"reputation":3,"user_id":19883228,"display_name":"SS123"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":17,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1701141480,"creation_date":1701141480,"question_id":77561160,"body_markdown":"I have a Spring Boot project and trying to use PowerMockito to mock an object that is created inside the method.\r\n\r\nI have some code that is declaring a new Object that is extending an Abstract class: \r\n\r\n```\r\n@Service\r\npublic class InstanceService {\r\n\r\n   public Instance createJenkinsInstance(RequestSpecification request){\r\n        ParentInstance instance = new DefaultInstance(kubernetesUtil);\r\n        instance.provisionForNewInstance(request);\r\n   ...\r\n   }\r\n}\r\n```\r\n\r\nThe DefaultInstance class: \r\n```\r\npublic class DefaultInstance extends ParentInstance {\r\n  public DefaultInstance(KubernetesUtil kubernetesUtil) {\r\n    super(kubernetesUtil);\r\n  }\r\n\r\n  public DefaultInstance(KubernetesUtil kubernetesUtil, Environment env) {\r\n    super(kubernetesUtil, env);\r\n  }\r\n```\r\n\r\nThe ParentInstance class: \r\n```\r\n@Data\r\npublic abstract class ParentInstance {\r\n   public ParentInstance(KubernetesUtil kubernetesUtil) {\r\n    this.kubernetesUtil = kubernetesUtil;\r\n    /*some code*/\r\n  }\r\n\r\n  public ParentInstance(KubernetesUtil kubernetesUtil, Environment env) {\r\n    this.kubernetesUtil = kubernetesUtil;\r\n    this.env = env;\r\n    /*some code*/\r\n  }\r\n  /* Class contains more functions */ \r\n```\r\n\r\nMy test looks like the following: \r\n\r\n```\r\n@RunWith(PowerMockRunner.class)\r\n@PrepareForTest({InstanceService.class})\r\npublic class InstanceServicePowerMockTest {\r\n    @Test\r\n    public void testCreateInstance() throws Exception {\r\n      logger.info(&quot;in testCreateInstance2 mock&quot;);\r\n      DefaultInstance instanceMock = PowerMockito.mock(DefaultInstance.class);\r\n      PowerMockito.whenNew(DefaultInstance.class)\r\n          .withArguments(any())\r\n          .thenReturn(instanceMock);\r\n      \r\n   \r\n      PowerMockito.when(instanceMock.provisionForNewInstance(any())).thenReturn(true);\r\n\r\n      RequestSpecification requestSpecification = new RequestSpecification();\r\n      requestSpecification.setName(&quot;test&quot;);\r\n\r\n      InstanceService instanceService = new InstanceService();\r\n      instanceService.createJenkinsInstance(requestSpecification);\r\n\r\n      verifyNew(DefaultInstance.class).withArguments(any());\r\n    }\r\n}\r\n```\r\n\r\nMy test isn&#39;t working, I notice that the DefaultInstance is being created in the test rather than using the mocked object I have created. I have searched around online for a while, and tried different things I found others doing. I&#39;m wondering if the issue is I&#39;m trying to mock an object that extends an Abstract class. How can I fix this? \r\n\r\nBtw, the InstanceService class autowires some DAO classes to save objects to the Database. Does powermock support this? ","title":"PowerMock not using mocked &quot;new&quot; object","body":"<p>I have a Spring Boot project and trying to use PowerMockito to mock an object that is created inside the method.</p>\n<p>I have some code that is declaring a new Object that is extending an Abstract class:</p>\n<pre><code>@Service\npublic class InstanceService {\n\n   public Instance createJenkinsInstance(RequestSpecification request){\n        ParentInstance instance = new DefaultInstance(kubernetesUtil);\n        instance.provisionForNewInstance(request);\n   ...\n   }\n}\n</code></pre>\n<p>The DefaultInstance class:</p>\n<pre><code>public class DefaultInstance extends ParentInstance {\n  public DefaultInstance(KubernetesUtil kubernetesUtil) {\n    super(kubernetesUtil);\n  }\n\n  public DefaultInstance(KubernetesUtil kubernetesUtil, Environment env) {\n    super(kubernetesUtil, env);\n  }\n</code></pre>\n<p>The ParentInstance class:</p>\n<pre><code>@Data\npublic abstract class ParentInstance {\n   public ParentInstance(KubernetesUtil kubernetesUtil) {\n    this.kubernetesUtil = kubernetesUtil;\n    /*some code*/\n  }\n\n  public ParentInstance(KubernetesUtil kubernetesUtil, Environment env) {\n    this.kubernetesUtil = kubernetesUtil;\n    this.env = env;\n    /*some code*/\n  }\n  /* Class contains more functions */ \n</code></pre>\n<p>My test looks like the following:</p>\n<pre><code>@RunWith(PowerMockRunner.class)\n@PrepareForTest({InstanceService.class})\npublic class InstanceServicePowerMockTest {\n    @Test\n    public void testCreateInstance() throws Exception {\n      logger.info(&quot;in testCreateInstance2 mock&quot;);\n      DefaultInstance instanceMock = PowerMockito.mock(DefaultInstance.class);\n      PowerMockito.whenNew(DefaultInstance.class)\n          .withArguments(any())\n          .thenReturn(instanceMock);\n      \n   \n      PowerMockito.when(instanceMock.provisionForNewInstance(any())).thenReturn(true);\n\n      RequestSpecification requestSpecification = new RequestSpecification();\n      requestSpecification.setName(&quot;test&quot;);\n\n      InstanceService instanceService = new InstanceService();\n      instanceService.createJenkinsInstance(requestSpecification);\n\n      verifyNew(DefaultInstance.class).withArguments(any());\n    }\n}\n</code></pre>\n<p>My test isn't working, I notice that the DefaultInstance is being created in the test rather than using the mocked object I have created. I have searched around online for a while, and tried different things I found others doing. I'm wondering if the issue is I'm trying to mock an object that extends an Abstract class. How can I fix this?</p>\n<p>Btw, the InstanceService class autowires some DAO classes to save objects to the Database. Does powermock support this?</p>\n"},{"tags":["java","spring","spring-boot","oracle19c"],"comments":[{"owner":{"account_id":372682,"reputation":22426,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1701141923,"post_id":77561150,"comment_id":136735784,"body_markdown":"Does this answer your question? [Hibernate Dialect for Oracle 19](https://stackoverflow.com/questions/57715024/hibernate-dialect-for-oracle-19)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/57715024/hibernate-dialect-for-oracle-19\">Hibernate Dialect for Oracle 19</a>"},{"owner":{"account_id":30008979,"reputation":1,"user_id":22997091,"display_name":"AppleEater"},"score":0,"creation_date":1701144216,"post_id":77561150,"comment_id":136735929,"body_markdown":"Unfortunately it didn&#39;t fix the issue. I tried changing the Dialect from Oracle 19c to 12c","body":"Unfortunately it didn&#39;t fix the issue. I tried changing the Dialect from Oracle 19c to 12c"},{"owner":{"account_id":30008979,"reputation":1,"user_id":22997091,"display_name":"AppleEater"},"score":0,"creation_date":1701144380,"post_id":77561150,"comment_id":136735945,"body_markdown":"Also tried using just org.hibernate.dialect.OracleDialect","body":"Also tried using just org.hibernate.dialect.OracleDialect"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1701158052,"post_id":77561150,"comment_id":136737307,"body_markdown":"Your code is wrong on multiple levels. Hibernate 6 only has the `OracleDialect` not anything else. Your code is using JavaEE and not JakartaEE so will not work with Sprnig 6 and Spring Boot 3+.","body":"Your code is wrong on multiple levels. Hibernate 6 only has the <code>OracleDialect</code> not anything else. Your code is using JavaEE and not JakartaEE so will not work with Sprnig 6 and Spring Boot 3+."},{"owner":{"account_id":30008979,"reputation":1,"user_id":22997091,"display_name":"AppleEater"},"score":0,"creation_date":1701236897,"post_id":77561150,"comment_id":136749245,"body_markdown":"Hey @M.Deinum, thank you for your feed back. How would you recommend fixing the mistakes. Also do you have a resource or a template I can use as an example?","body":"Hey @M.Deinum, thank you for your feed back. How would you recommend fixing the mistakes. Also do you have a resource or a template I can use as an example?"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1701242932,"post_id":77561150,"comment_id":136749941,"body_markdown":"Use the correct dialect, replace `javax.persistence` with `jakarta.persistence` and remove the erorrnous dependency that allowed you to import `javax.persistence` in the first place. I suspect you are &quot;following&quot; a tutorial and decided to use newer versions instead of sticking with the tutorial. \\","body":"Use the correct dialect, replace <code>javax.persistence</code> with <code>jakarta.persistence</code> and remove the erorrnous dependency that allowed you to import <code>javax.persistence</code> in the first place. I suspect you are &quot;following&quot; a tutorial and decided to use newer versions instead of sticking with the tutorial. \\"},{"owner":{"account_id":30008979,"reputation":1,"user_id":22997091,"display_name":"AppleEater"},"score":0,"creation_date":1701299130,"post_id":77561150,"comment_id":136760045,"body_markdown":"Thank you @M.Deinum, my project is now running. I followed your instructions by replacing javax.persistence with jakarta.persistence. I also updated the dialect to spring.jpa.database-platform=org.hibernate.dialect.OracleDialect","body":"Thank you @M.Deinum, my project is now running. I followed your instructions by replacing javax.persistence with jakarta.persistence. I also updated the dialect to spring.jpa.database-platform=org.hibernate.dialect.OracleDia&zwnj;&#8203;lect"}],"owner":{"account_id":30008979,"reputation":1,"user_id":22997091,"display_name":"AppleEater"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":1,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1701141283,"creation_date":1701141283,"question_id":77561150,"body_markdown":"I am currently in the process of developing a test log bean using JPA to facilitate CRUD operations. I&#39;m however facing the error below, I&#39;m using oracle 19c as the database. \r\n\r\n```\r\nUnable to resolve name [org.hibernate.dialect.Oracle19cDialect] as strategy [org.hibernate.dialect.Dialect]\r\n```\r\n\r\nHere&#39;s the service class, TestingLogService\r\n\r\n```\r\nimport java.util.List;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.stereotype.Service;\r\n\r\n@Service\r\npublic class TestingLogService {\r\n\r\n\tprivate final TestingLogRepository testingLogRepository;\r\n\t\r\n\t@Autowired\r\n\tpublic TestingLogService(TestingLogRepository testingLogRepository) {\r\n\t\tthis.testingLogRepository = testingLogRepository;\r\n\t}\r\n\tpublic List&lt;TestingLog&gt; getTestingLogList(){\r\n\t\treturn testingLogRepository.findAll();\r\n\t}\r\n}\r\n```\r\n\r\nHere is the repository class, \r\n\r\n```\r\nimport org.springframework.data.jpa.repository.JpaRepository;\r\nimport org.springframework.stereotype.Repository;\r\n\r\n@Repository\r\npublic interface TestingLogRepository extends JpaRepository&lt;TestingLog, Long&gt;{\r\n}\r\n```\r\n\r\nHere is the entity class\r\n\r\n```\r\nimport javax.persistence.Column;\r\nimport javax.persistence.Entity;\r\nimport javax.persistence.Id;\r\nimport javax.persistence.Table;\r\n\r\n\r\n@Entity\r\n@Table(name = &quot;testing_log&quot;)\r\npublic class TestingLog {\r\n\t\r\n\t@Id\r\n\tLong id;\r\n\t\r\n\t@Column(name = &quot;testing_type&quot;)\r\n\tprivate String testingType;\r\n\t\r\n\t@Column(name = &quot;file_location&quot;)\r\n\tprivate String fileLocation;\r\n\t\r\n\t@Column(name = &quot;time_period&quot;)\r\n\tprivate LocalDateTime timestamp; \r\n\t\r\n\t@Column(name = &quot;class_name&quot;)\r\n\tprivate String className;\r\n\t\r\n\t@Column(name = &quot;accuracy&quot;)\r\n\tprivate Double accuracy;\r\n\t\r\n\t@Column(name = &quot;record_base_line&quot;)\r\n\tprivate String recordBaseLine;\r\n\t\r\n\t//No-argument constructor (for JPA)\r\n\tpublic TestingLog() {\r\n\t\t\r\n\t}\r\n\r\n\tpublic TestingLog(Long id, String testingType, String fileLocation, LocalDateTime timestamp, String className, Double accuracy, String recordBaseLine) {\r\n\t\tsuper();\r\n\t\tthis.id = id;\r\n\t\tthis.testingType = testingType;\r\n\t\tthis.fileLocation = fileLocation;\r\n\t\tthis.timestamp = timestamp;\r\n\t\tthis.className = className;\r\n\t\tthis.accuracy = accuracy;\r\n\t\tthis.recordBaseLine = recordBaseLine;\r\n\t}\r\n\r\n//getters and setters\r\n```\r\n\r\nHere&#39;s the controller class\r\n\r\n\r\n```\r\nimport java.util.List;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.web.bind.annotation.GetMapping;\r\nimport org.springframework.web.bind.annotation.RequestMapping;\r\nimport org.springframework.web.bind.annotation.RestController;\r\n\r\n@RestController\r\n@RequestMapping(path = &quot;api/v1/testingLog&quot;)\r\npublic class TestingLogController {\r\n\t\r\n\tprivate final TestingLogService testingLogService;\r\n\t\r\n\t@Autowired\r\n\tpublic TestingLogController(TestingLogService testingLogService) {\r\n\t\tthis.testingLogService = testingLogService;\r\n\t}\r\n\t\r\n\t@GetMapping(&quot;/all&quot;)\r\n\tpublic List&lt;TestingLog&gt; getTestingLogList(){\r\n\t\treturn testingLogService.getTestingLogList();\r\n\t}\r\n\t\r\n}\r\n\r\n```\r\n\r\nHere&#39;s the application.properties\r\n\r\n```\r\nspring.datasource.url=jdbc:oracle:thin:@\r\nspring.datasource.username=\r\nspring.datasource.password=\r\nspring.datasource.driver-class-name=oracle.jdbc.OracleDriver\r\nspring.datasource.xa-data-source-class-name=oracle.jdbc.xa.client.OracleXADataSource\r\n\r\nspring.jpa.database-platform=org.hibernate.dialect.Oracle19cDialect\r\nspring.jpa.hibernate.ddl-auto = update\r\nspring.jpa.properties.hibernate.show_sql=true\r\nspring.jpa.properties.hibernate.format_sql=true\r\n\r\nlogging.level.org.springframework.web: INFO\r\nlogging.level.org.hibernate: DEBUG\r\nlogging.level.org.hibernate.SQL: DEBUG\r\nlogging.level.org.hibernate.type: TRACE\r\nlogging.level.com.zaxxer.hikari: DEBUG\r\n```\r\n\r\nHere&#39;s the application class\r\n\r\n```\r\nimport org.springframework.boot.SpringApplication;\r\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\r\n\r\n@SpringBootApplication\r\npublic class AppApplication {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tSpringApplication.run(AppApplication.class, args);\r\n\t}\r\n}\r\n```\r\n\r\nError log:\r\n\r\n```\r\norg.hibernate.boot.registry.selector.spi.StrategySelectionException: Unable to resolve name [org.hibernate.dialect.Oracle19cDialect] as strategy [org.hibernate.dialect.Dialect]\r\n\tat org.hibernate.boot.registry.selector.internal.StrategySelectorImpl.selectStrategyImplementor(StrategySelectorImpl.java:154) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\r\n\tat org.hibernate.boot.registry.selector.internal.StrategySelectorImpl.resolveStrategy(StrategySelectorImpl.java:236) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\r\n\tat org.hibernate.boot.registry.selector.internal.StrategySelectorImpl.resolveStrategy(StrategySelectorImpl.java:189) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\r\n\tat org.hibernate.engine.jdbc.dialect.internal.DialectFactoryImpl.constructDialect(DialectFactoryImpl.java:122) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\r\n\tat org.hibernate.engine.jdbc.dialect.internal.DialectFactoryImpl.buildDialect(DialectFactoryImpl.java:87) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\r\n\tat org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$1.execute(JdbcEnvironmentInitiator.java:358) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\r\n\tat org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$1.execute(JdbcEnvironmentInitiator.java:280) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\r\n\tat org.hibernate.jdbc.WorkExecutor.executeReturningWork(WorkExecutor.java:56) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\r\n\tat org.hibernate.jdbc.AbstractReturningWork.accept(AbstractReturningWork.java:34) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcIsolationDelegate.delegateWork(JdbcIsolationDelegate.java:70) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\r\n\tat org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.getJdbcEnvironmentUsingJdbcMetadata(JdbcEnvironmentInitiator.java:279) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\r\n\tat org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:193) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\r\n\tat org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:69) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\r\n\tat org.hibernate.boot.registry.internal.StandardServiceRegistryImpl.initiateService(StandardServiceRegistryImpl.java:119) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\r\n\tat org.hibernate.service.internal.AbstractServiceRegistryImpl.createService(AbstractServiceRegistryImpl.java:264) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\r\n\tat org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:239) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\r\n\tat org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:216) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\r\n\tat org.hibernate.boot.model.relational.Database.&lt;init&gt;(Database.java:45) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\r\n\tat org.hibernate.boot.internal.InFlightMetadataCollectorImpl.getDatabase(InFlightMetadataCollectorImpl.java:231) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\r\n\tat org.hibernate.boot.internal.InFlightMetadataCollectorImpl.&lt;init&gt;(InFlightMetadataCollectorImpl.java:199) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\r\n\tat org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:169) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\r\n\tat org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.metadata(EntityManagerFactoryBuilderImpl.java:1383) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\r\n\tat org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1454) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\r\n\tat org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75) ~[spring-orm-6.0.13.jar:6.0.13]\r\n\tat org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:376) ~[spring-orm-6.0.13.jar:6.0.13]\r\n\tat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409) ~[spring-orm-6.0.13.jar:6.0.13]\r\n\tat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396) ~[spring-orm-6.0.13.jar:6.0.13]\r\n\tat org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:352) ~[spring-orm-6.0.13.jar:6.0.13]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1817) ~[spring-beans-6.0.13.jar:6.0.13]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1766) ~[spring-beans-6.0.13.jar:6.0.13]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:598) ~[spring-beans-6.0.13.jar:6.0.13]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520) ~[spring-beans-6.0.13.jar:6.0.13]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.0.13.jar:6.0.13]\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.0.13.jar:6.0.13]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.0.13.jar:6.0.13]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.0.13.jar:6.0.13]\r\n\tat org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1166) ~[spring-context-6.0.13.jar:6.0.13]\r\n\tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:940) ~[spring-context-6.0.13.jar:6.0.13]\r\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616) ~[spring-context-6.0.13.jar:6.0.13]\r\n\tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.1.5.jar:3.1.5]\r\n\tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:738) ~[spring-boot-3.1.5.jar:3.1.5]\r\n\tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:440) ~[spring-boot-3.1.5.jar:3.1.5]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:316) ~[spring-boot-3.1.5.jar:3.1.5]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1306) ~[spring-boot-3.1.5.jar:3.1.5]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1295) ~[spring-boot-3.1.5.jar:3.1.5]\r\n\tat com.riskanalysisexpertsystem..Application.main(Application.java:14) ~[classes/:na]\r\nCaused by: org.hibernate.boot.registry.classloading.spi.ClassLoadingException: Unable to load class [org.hibernate.dialect.Oracle19cDialect]\r\n\tat org.hibernate.boot.registry.classloading.internal.ClassLoaderServiceImpl.classForName(ClassLoaderServiceImpl.java:123) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\r\n\tat org.hibernate.boot.registry.selector.internal.StrategySelectorImpl.selectStrategyImplementor(StrategySelectorImpl.java:150) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\r\n\t... 45 common frames omitted\r\nCaused by: java.lang.ClassNotFoundException: Could not load requested class : org.hibernate.dialect.Oracle19cDialect\r\n\tat org.hibernate.boot.registry.classloading.internal.AggregatedClassLoader.findClass(AggregatedClassLoader.java:215) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\r\n\tat java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:587) ~[na:na]\r\n\tat java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520) ~[na:na]\r\n\tat java.base/java.lang.Class.forName0(Native Method) ~[na:na]\r\n\tat java.base/java.lang.Class.forName(Class.java:467) ~[na:na]\r\n\tat org.hibernate.boot.registry.classloading.internal.ClassLoaderServiceImpl.classForName(ClassLoaderServiceImpl.java:120) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\r\n\t... 46 common frames omitted\r\nCaused by: java.lang.Throwable: null\r\n\tat org.hibernate.boot.registry.classloading.internal.AggregatedClassLoader.findClass(AggregatedClassLoader.java:208) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\r\n\t... 51 common frames omitted\r\n\tSuppressed: java.lang.ClassNotFoundException: org.hibernate.dialect.Oracle19cDialect\r\n\t\tat java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641) ~[na:na]\r\n\t\tat java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188) ~[na:na]\r\n\t\tat java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520) ~[na:na]\r\n\t\tat org.hibernate.boot.registry.classloading.internal.AggregatedClassLoader.findClass(AggregatedClassLoader.java:205) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\r\n\t\t... 51 common frames omitted\r\n\tSuppressed: java.lang.ClassNotFoundException: org.hibernate.dialect.Oracle19cDialect\r\n\t\tat java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641) ~[na:na]\r\n\t\tat java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188) ~[na:na]\r\n\t\tat java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520) ~[na:na]\r\n\t\tat org.hibernate.boot.registry.classloading.internal.AggregatedClassLoader.findClass(AggregatedClassLoader.java:205) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\r\n\t\t... 51 common frames omitted\r\n\tSuppressed: java.lang.ClassNotFoundException: org.hibernate.dialect.Oracle19cDialect\r\n\t\tat java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641) ~[na:na]\r\n\t\tat java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188) ~[na:na]\r\n\t\tat java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520) ~[na:na]\r\n\t\tat org.hibernate.boot.registry.classloading.internal.AggregatedClassLoader.findClass(AggregatedClassLoader.java:205) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\r\n\t\t... 51 common frames omitted\r\n\r\n2023-11-28T04:23:22.082+02:00 DEBUG 13140 --- [           main] o.hibernate.service.spi.ServiceBinding   : Overriding existing service binding [org.hibernate.engine.jdbc.connections.spi.ConnectionProvider]\r\n2023-11-28T04:23:22.082+02:00 ERROR 13140 --- [           main] j.LocalContainerEntityManagerFactoryBean : Failed to initialize JPA EntityManagerFactory: Unable to create requested service [org.hibernate.engine.jdbc.env.spi.JdbcEnvironment] due to: Unable to resolve name [org.hibernate.dialect.Oracle19cDialect] as strategy [org.hibernate.dialect.Dialect]\r\n2023-11-28T04:23:22.083+02:00  WARN 13140 --- [           main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;entityManagerFactory&#39; defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Unable to create requested service [org.hibernate.engine.jdbc.env.spi.JdbcEnvironment] due to: Unable to resolve name [org.hibernate.dialect.Oracle19cDialect] as strategy [org.hibernate.dialect.Dialect]\r\n2023-11-28T04:23:22.083+02:00  INFO 13140 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...\r\n2023-11-28T04:23:22.083+02:00 DEBUG 13140 --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Before shutdown stats (total=1, active=0, idle=1, waiting=0)\r\n2023-11-28T04:23:22.085+02:00 DEBUG 13140 --- [nnection closer] com.zaxxer.hikari.pool.PoolBase          : HikariPool-1 - Closing connection oracle.jdbc.driver.T4CConnection@50dc49e1: (connection evicted)\r\n2023-11-28T04:23:22.548+02:00 DEBUG 13140 --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - After shutdown stats (total=0, active=0, idle=0, waiting=0)\r\n2023-11-28T04:23:22.549+02:00  INFO 13140 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.\r\n2023-11-28T04:23:22.562+02:00  INFO 13140 --- [           main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]\r\n2023-11-28T04:23:22.585+02:00  INFO 13140 --- [           main] .s.b.a.l.ConditionEvaluationReportLogger : \r\n\r\nError starting ApplicationContext. To display the condition evaluation report re-run your application with &#39;debug&#39; enabled.\r\n2023-11-28T04:23:22.621+02:00 ERROR 13140 --- [           main] o.s.boot.SpringApplication               : Application run failed\r\n\r\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;entityManagerFactory&#39; defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Unable to create requested service [org.hibernate.engine.jdbc.env.spi.JdbcEnvironment] due to: Unable to resolve name [org.hibernate.dialect.Oracle19cDialect] as strategy [org.hibernate.dialect.Dialect]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1770) ~[spring-beans-6.0.13.jar:6.0.13]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:598) ~[spring-beans-6.0.13.jar:6.0.13]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520) ~[spring-beans-6.0.13.jar:6.0.13]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.0.13.jar:6.0.13]\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.0.13.jar:6.0.13]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.0.13.jar:6.0.13]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.0.13.jar:6.0.13]\r\n\tat org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1166) ~[spring-context-6.0.13.jar:6.0.13]\r\n\tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:940) ~[spring-context-6.0.13.jar:6.0.13]\r\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616) ~[spring-context-6.0.13.jar:6.0.13]\r\n\tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.1.5.jar:3.1.5]\r\n\tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:738) ~[spring-boot-3.1.5.jar:3.1.5]\r\n\tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:440) ~[spring-boot-3.1.5.jar:3.1.5]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:316) ~[spring-boot-3.1.5.jar:3.1.5]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1306) ~[spring-boot-3.1.5.jar:3.1.5]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1295) ~[spring-boot-3.1.5.jar:3.1.5]\r\n\tat com.riskanalysisexpertsystem..Application.main(Application.java:14) ~[classes/:na]\r\nCaused by: org.hibernate.service.spi.ServiceException: Unable to create requested service [org.hibernate.engine.jdbc.env.spi.JdbcEnvironment] due to: Unable to resolve name [org.hibernate.dialect.Oracle19cDialect] as strategy [org.hibernate.dialect.Dialect]\r\n\tat org.hibernate.service.internal.AbstractServiceRegistryImpl.createService(AbstractServiceRegistryImpl.java:277) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\r\n\tat org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:239) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\r\n\tat org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:216) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\r\n\tat org.hibernate.boot.model.relational.Database.&lt;init&gt;(Database.java:45) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\r\n\tat org.hibernate.boot.internal.InFlightMetadataCollectorImpl.getDatabase(InFlightMetadataCollectorImpl.java:231) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\r\n\tat org.hibernate.boot.internal.InFlightMetadataCollectorImpl.&lt;init&gt;(InFlightMetadataCollectorImpl.java:199) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\r\n\tat org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:169) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\r\n\tat org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.metadata(EntityManagerFactoryBuilderImpl.java:1383) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\r\n\tat org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1454) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\r\n\tat org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75) ~[spring-orm-6.0.13.jar:6.0.13]\r\n\tat org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:376) ~[spring-orm-6.0.13.jar:6.0.13]\r\n\tat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409) ~[spring-orm-6.0.13.jar:6.0.13]\r\n\tat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396) ~[spring-orm-6.0.13.jar:6.0.13]\r\n\tat org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:352) ~[spring-orm-6.0.13.jar:6.0.13]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1817) ~[spring-beans-6.0.13.jar:6.0.13]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1766) ~[spring-beans-6.0.13.jar:6.0.13]\r\n\t... 16 common frames omitted\r\nCaused by: org.hibernate.boot.registry.selector.spi.StrategySelectionException: Unable to resolve name [org.hibernate.dialect.Oracle19cDialect] as strategy [org.hibernate.dialect.Dialect]\r\n\tat org.hibernate.boot.registry.selector.internal.StrategySelectorImpl.selectStrategyImplementor(StrategySelectorImpl.java:154) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\r\n\tat org.hibernate.boot.registry.selector.internal.StrategySelectorImpl.resolveStrategy(StrategySelectorImpl.java:236) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\r\n\tat org.hibernate.boot.registry.selector.internal.StrategySelectorImpl.resolveStrategy(StrategySelectorImpl.java:189) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\r\n\tat org.hibernate.engine.jdbc.dialect.internal.DialectFactoryImpl.constructDialect(DialectFactoryImpl.java:122) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\r\n\tat org.hibernate.engine.jdbc.dialect.internal.DialectFactoryImpl.buildDialect(DialectFactoryImpl.java:87) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\r\n\tat org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.getJdbcEnvironmentWithDefaults(JdbcEnvironmentInitiator.java:229) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\r\n\tat org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.getJdbcEnvironmentUsingJdbcMetadata(JdbcEnvironmentInitiator.java:381) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\r\n\tat org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:193) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\r\n\tat org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:69) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\r\n\tat org.hibernate.boot.registry.internal.StandardServiceRegistryImpl.initiateService(StandardServiceRegistryImpl.java:119) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\r\n\tat org.hibernate.service.internal.AbstractServiceRegistryImpl.createService(AbstractServiceRegistryImpl.java:264) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\r\n\t... 31 common frames omitted\r\nCaused by: org.hibernate.boot.registry.classloading.spi.ClassLoadingException: Unable to load class [org.hibernate.dialect.Oracle19cDialect]\r\n\tat org.hibernate.boot.registry.classloading.internal.ClassLoaderServiceImpl.classForName(ClassLoaderServiceImpl.java:123) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\r\n\tat org.hibernate.boot.registry.selector.internal.StrategySelectorImpl.selectStrategyImplementor(StrategySelectorImpl.java:150) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\r\n\t... 41 common frames omitted\r\nCaused by: java.lang.ClassNotFoundException: Could not load requested class : org.hibernate.dialect.Oracle19cDialect\r\n\tat org.hibernate.boot.registry.classloading.internal.AggregatedClassLoader.findClass(AggregatedClassLoader.java:215) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\r\n\tat java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:587) ~[na:na]\r\n\tat java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520) ~[na:na]\r\n\tat java.base/java.lang.Class.forName0(Native Method) ~[na:na]\r\n\tat java.base/java.lang.Class.forName(Class.java:467) ~[na:na]\r\n\tat org.hibernate.boot.registry.classloading.internal.ClassLoaderServiceImpl.classForName(ClassLoaderServiceImpl.java:120) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\r\n\t... 42 common frames omitted\r\nCaused by: java.lang.Throwable: null\r\n\tat org.hibernate.boot.registry.classloading.internal.AggregatedClassLoader.findClass(AggregatedClassLoader.java:208) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\r\n\t... 47 common frames omitted\r\n\tSuppressed: java.lang.ClassNotFoundException: org.hibernate.dialect.Oracle19cDialect\r\n\t\tat java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641) ~[na:na]\r\n\t\tat java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188) ~[na:na]\r\n\t\tat java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520) ~[na:na]\r\n\t\tat org.hibernate.boot.registry.classloading.internal.AggregatedClassLoader.findClass(AggregatedClassLoader.java:205) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\r\n\t\t... 47 common frames omitted\r\n\tSuppressed: java.lang.ClassNotFoundException: org.hibernate.dialect.Oracle19cDialect\r\n\t\tat java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641) ~[na:na]\r\n\t\tat java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188) ~[na:na]\r\n\t\tat java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520) ~[na:na]\r\n\t\tat org.hibernate.boot.registry.classloading.internal.AggregatedClassLoader.findClass(AggregatedClassLoader.java:205) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\r\n\t\t... 47 common frames omitted\r\n\tSuppressed: java.lang.ClassNotFoundException: org.hibernate.dialect.Oracle19cDialect\r\n\t\tat java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641) ~[na:na]\r\n\t\tat java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188) ~[na:na]\r\n\t\tat java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520) ~[na:na]\r\n\t\tat org.hibernate.boot.registry.classloading.internal.AggregatedClassLoader.findClass(AggregatedClassLoader.java:205) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\r\n\t\t... 47 common frames omitted\r\n\r\n[[1;34mINFO[m] [1m------------------------------------------------------------------------[m\r\n[[1;34mINFO[m] [1;31mBUILD FAILURE[m\r\n[[1;34mINFO[m] [1m------------------------------------------------------------------------[m\r\n[[1;34mINFO[m] Total time:  13.490 s\r\n[[1;34mINFO[m] Finished at: 2023-11-28T04:23:22+02:00\r\n[[1;34mINFO[m] [1m------------------------------------------------------------------------[m\r\n[[1;31mERROR[m] Failed to execute goal [32morg.springframework.boot:spring-boot-maven-plugin:3.1.5:run[m [1m(default-cli)[m on project [36m[m: [1;31mProcess terminated with exit code: 1[m -&gt; [1m[Help 1][m\r\n[[1;31mERROR[m] \r\n[[1;31mERROR[m] To see the full stack trace of the errors, re-run Maven with the [1m-e[m switch.\r\n[[1;31mERROR[m] Re-run Maven using the [1m-X[m switch to enable full debug logging.\r\n[[1;31mERROR[m] \r\n[[1;31mERROR[m] For more information about the errors and possible solutions, please read the following articles:\r\n[[1;31mERROR[m] [1m[Help 1][m http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException\r\n\r\n```\r\n\r\n\r\n\r\n\r\nI tried creating a bean and it was unsuccessful. \r\nI&#39;ve tried removing the Dialect, but I&#39;m still however to unable to create a bean\r\nChecked the database to ensure the values match.","title":"Error creating bean using Java Oracle 19c database","body":"<p>I am currently in the process of developing a test log bean using JPA to facilitate CRUD operations. I'm however facing the error below, I'm using oracle 19c as the database.</p>\n<pre><code>Unable to resolve name [org.hibernate.dialect.Oracle19cDialect] as strategy [org.hibernate.dialect.Dialect]\n</code></pre>\n<p>Here's the service class, TestingLogService</p>\n<pre><code>import java.util.List;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Service;\n\n@Service\npublic class TestingLogService {\n\n    private final TestingLogRepository testingLogRepository;\n    \n    @Autowired\n    public TestingLogService(TestingLogRepository testingLogRepository) {\n        this.testingLogRepository = testingLogRepository;\n    }\n    public List&lt;TestingLog&gt; getTestingLogList(){\n        return testingLogRepository.findAll();\n    }\n}\n</code></pre>\n<p>Here is the repository class,</p>\n<pre><code>import org.springframework.data.jpa.repository.JpaRepository;\nimport org.springframework.stereotype.Repository;\n\n@Repository\npublic interface TestingLogRepository extends JpaRepository&lt;TestingLog, Long&gt;{\n}\n</code></pre>\n<p>Here is the entity class</p>\n<pre><code>import javax.persistence.Column;\nimport javax.persistence.Entity;\nimport javax.persistence.Id;\nimport javax.persistence.Table;\n\n\n@Entity\n@Table(name = &quot;testing_log&quot;)\npublic class TestingLog {\n    \n    @Id\n    Long id;\n    \n    @Column(name = &quot;testing_type&quot;)\n    private String testingType;\n    \n    @Column(name = &quot;file_location&quot;)\n    private String fileLocation;\n    \n    @Column(name = &quot;time_period&quot;)\n    private LocalDateTime timestamp; \n    \n    @Column(name = &quot;class_name&quot;)\n    private String className;\n    \n    @Column(name = &quot;accuracy&quot;)\n    private Double accuracy;\n    \n    @Column(name = &quot;record_base_line&quot;)\n    private String recordBaseLine;\n    \n    //No-argument constructor (for JPA)\n    public TestingLog() {\n        \n    }\n\n    public TestingLog(Long id, String testingType, String fileLocation, LocalDateTime timestamp, String className, Double accuracy, String recordBaseLine) {\n        super();\n        this.id = id;\n        this.testingType = testingType;\n        this.fileLocation = fileLocation;\n        this.timestamp = timestamp;\n        this.className = className;\n        this.accuracy = accuracy;\n        this.recordBaseLine = recordBaseLine;\n    }\n\n//getters and setters\n</code></pre>\n<p>Here's the controller class</p>\n<pre><code>import java.util.List;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\n@RestController\n@RequestMapping(path = &quot;api/v1/testingLog&quot;)\npublic class TestingLogController {\n    \n    private final TestingLogService testingLogService;\n    \n    @Autowired\n    public TestingLogController(TestingLogService testingLogService) {\n        this.testingLogService = testingLogService;\n    }\n    \n    @GetMapping(&quot;/all&quot;)\n    public List&lt;TestingLog&gt; getTestingLogList(){\n        return testingLogService.getTestingLogList();\n    }\n    \n}\n\n</code></pre>\n<p>Here's the application.properties</p>\n<pre><code>spring.datasource.url=jdbc:oracle:thin:@\nspring.datasource.username=\nspring.datasource.password=\nspring.datasource.driver-class-name=oracle.jdbc.OracleDriver\nspring.datasource.xa-data-source-class-name=oracle.jdbc.xa.client.OracleXADataSource\n\nspring.jpa.database-platform=org.hibernate.dialect.Oracle19cDialect\nspring.jpa.hibernate.ddl-auto = update\nspring.jpa.properties.hibernate.show_sql=true\nspring.jpa.properties.hibernate.format_sql=true\n\nlogging.level.org.springframework.web: INFO\nlogging.level.org.hibernate: DEBUG\nlogging.level.org.hibernate.SQL: DEBUG\nlogging.level.org.hibernate.type: TRACE\nlogging.level.com.zaxxer.hikari: DEBUG\n</code></pre>\n<p>Here's the application class</p>\n<pre><code>import org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\npublic class AppApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(AppApplication.class, args);\n    }\n}\n</code></pre>\n<p>Error log:</p>\n<pre><code>org.hibernate.boot.registry.selector.spi.StrategySelectionException: Unable to resolve name [org.hibernate.dialect.Oracle19cDialect] as strategy [org.hibernate.dialect.Dialect]\n    at org.hibernate.boot.registry.selector.internal.StrategySelectorImpl.selectStrategyImplementor(StrategySelectorImpl.java:154) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\n    at org.hibernate.boot.registry.selector.internal.StrategySelectorImpl.resolveStrategy(StrategySelectorImpl.java:236) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\n    at org.hibernate.boot.registry.selector.internal.StrategySelectorImpl.resolveStrategy(StrategySelectorImpl.java:189) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\n    at org.hibernate.engine.jdbc.dialect.internal.DialectFactoryImpl.constructDialect(DialectFactoryImpl.java:122) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\n    at org.hibernate.engine.jdbc.dialect.internal.DialectFactoryImpl.buildDialect(DialectFactoryImpl.java:87) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\n    at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$1.execute(JdbcEnvironmentInitiator.java:358) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\n    at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$1.execute(JdbcEnvironmentInitiator.java:280) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\n    at org.hibernate.jdbc.WorkExecutor.executeReturningWork(WorkExecutor.java:56) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\n    at org.hibernate.jdbc.AbstractReturningWork.accept(AbstractReturningWork.java:34) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\n    at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcIsolationDelegate.delegateWork(JdbcIsolationDelegate.java:70) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\n    at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.getJdbcEnvironmentUsingJdbcMetadata(JdbcEnvironmentInitiator.java:279) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\n    at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:193) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\n    at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:69) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\n    at org.hibernate.boot.registry.internal.StandardServiceRegistryImpl.initiateService(StandardServiceRegistryImpl.java:119) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.createService(AbstractServiceRegistryImpl.java:264) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:239) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:216) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\n    at org.hibernate.boot.model.relational.Database.&lt;init&gt;(Database.java:45) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\n    at org.hibernate.boot.internal.InFlightMetadataCollectorImpl.getDatabase(InFlightMetadataCollectorImpl.java:231) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\n    at org.hibernate.boot.internal.InFlightMetadataCollectorImpl.&lt;init&gt;(InFlightMetadataCollectorImpl.java:199) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\n    at org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:169) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\n    at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.metadata(EntityManagerFactoryBuilderImpl.java:1383) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\n    at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1454) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\n    at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75) ~[spring-orm-6.0.13.jar:6.0.13]\n    at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:376) ~[spring-orm-6.0.13.jar:6.0.13]\n    at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409) ~[spring-orm-6.0.13.jar:6.0.13]\n    at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396) ~[spring-orm-6.0.13.jar:6.0.13]\n    at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:352) ~[spring-orm-6.0.13.jar:6.0.13]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1817) ~[spring-beans-6.0.13.jar:6.0.13]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1766) ~[spring-beans-6.0.13.jar:6.0.13]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:598) ~[spring-beans-6.0.13.jar:6.0.13]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520) ~[spring-beans-6.0.13.jar:6.0.13]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.0.13.jar:6.0.13]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.0.13.jar:6.0.13]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.0.13.jar:6.0.13]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.0.13.jar:6.0.13]\n    at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1166) ~[spring-context-6.0.13.jar:6.0.13]\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:940) ~[spring-context-6.0.13.jar:6.0.13]\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616) ~[spring-context-6.0.13.jar:6.0.13]\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.1.5.jar:3.1.5]\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:738) ~[spring-boot-3.1.5.jar:3.1.5]\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:440) ~[spring-boot-3.1.5.jar:3.1.5]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:316) ~[spring-boot-3.1.5.jar:3.1.5]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1306) ~[spring-boot-3.1.5.jar:3.1.5]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1295) ~[spring-boot-3.1.5.jar:3.1.5]\n    at com.riskanalysisexpertsystem..Application.main(Application.java:14) ~[classes/:na]\nCaused by: org.hibernate.boot.registry.classloading.spi.ClassLoadingException: Unable to load class [org.hibernate.dialect.Oracle19cDialect]\n    at org.hibernate.boot.registry.classloading.internal.ClassLoaderServiceImpl.classForName(ClassLoaderServiceImpl.java:123) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\n    at org.hibernate.boot.registry.selector.internal.StrategySelectorImpl.selectStrategyImplementor(StrategySelectorImpl.java:150) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\n    ... 45 common frames omitted\nCaused by: java.lang.ClassNotFoundException: Could not load requested class : org.hibernate.dialect.Oracle19cDialect\n    at org.hibernate.boot.registry.classloading.internal.AggregatedClassLoader.findClass(AggregatedClassLoader.java:215) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\n    at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:587) ~[na:na]\n    at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520) ~[na:na]\n    at java.base/java.lang.Class.forName0(Native Method) ~[na:na]\n    at java.base/java.lang.Class.forName(Class.java:467) ~[na:na]\n    at org.hibernate.boot.registry.classloading.internal.ClassLoaderServiceImpl.classForName(ClassLoaderServiceImpl.java:120) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\n    ... 46 common frames omitted\nCaused by: java.lang.Throwable: null\n    at org.hibernate.boot.registry.classloading.internal.AggregatedClassLoader.findClass(AggregatedClassLoader.java:208) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\n    ... 51 common frames omitted\n    Suppressed: java.lang.ClassNotFoundException: org.hibernate.dialect.Oracle19cDialect\n        at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641) ~[na:na]\n        at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188) ~[na:na]\n        at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520) ~[na:na]\n        at org.hibernate.boot.registry.classloading.internal.AggregatedClassLoader.findClass(AggregatedClassLoader.java:205) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\n        ... 51 common frames omitted\n    Suppressed: java.lang.ClassNotFoundException: org.hibernate.dialect.Oracle19cDialect\n        at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641) ~[na:na]\n        at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188) ~[na:na]\n        at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520) ~[na:na]\n        at org.hibernate.boot.registry.classloading.internal.AggregatedClassLoader.findClass(AggregatedClassLoader.java:205) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\n        ... 51 common frames omitted\n    Suppressed: java.lang.ClassNotFoundException: org.hibernate.dialect.Oracle19cDialect\n        at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641) ~[na:na]\n        at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188) ~[na:na]\n        at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520) ~[na:na]\n        at org.hibernate.boot.registry.classloading.internal.AggregatedClassLoader.findClass(AggregatedClassLoader.java:205) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\n        ... 51 common frames omitted\n\n2023-11-28T04:23:22.082+02:00 DEBUG 13140 --- [           main] o.hibernate.service.spi.ServiceBinding   : Overriding existing service binding [org.hibernate.engine.jdbc.connections.spi.ConnectionProvider]\n2023-11-28T04:23:22.082+02:00 ERROR 13140 --- [           main] j.LocalContainerEntityManagerFactoryBean : Failed to initialize JPA EntityManagerFactory: Unable to create requested service [org.hibernate.engine.jdbc.env.spi.JdbcEnvironment] due to: Unable to resolve name [org.hibernate.dialect.Oracle19cDialect] as strategy [org.hibernate.dialect.Dialect]\n2023-11-28T04:23:22.083+02:00  WARN 13140 --- [           main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Unable to create requested service [org.hibernate.engine.jdbc.env.spi.JdbcEnvironment] due to: Unable to resolve name [org.hibernate.dialect.Oracle19cDialect] as strategy [org.hibernate.dialect.Dialect]\n2023-11-28T04:23:22.083+02:00  INFO 13140 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...\n2023-11-28T04:23:22.083+02:00 DEBUG 13140 --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Before shutdown stats (total=1, active=0, idle=1, waiting=0)\n2023-11-28T04:23:22.085+02:00 DEBUG 13140 --- [nnection closer] com.zaxxer.hikari.pool.PoolBase          : HikariPool-1 - Closing connection oracle.jdbc.driver.T4CConnection@50dc49e1: (connection evicted)\n2023-11-28T04:23:22.548+02:00 DEBUG 13140 --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - After shutdown stats (total=0, active=0, idle=0, waiting=0)\n2023-11-28T04:23:22.549+02:00  INFO 13140 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.\n2023-11-28T04:23:22.562+02:00  INFO 13140 --- [           main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]\n2023-11-28T04:23:22.585+02:00  INFO 13140 --- [           main] .s.b.a.l.ConditionEvaluationReportLogger : \n\nError starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.\n2023-11-28T04:23:22.621+02:00 ERROR 13140 --- [           main] o.s.boot.SpringApplication               : Application run failed\n\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Unable to create requested service [org.hibernate.engine.jdbc.env.spi.JdbcEnvironment] due to: Unable to resolve name [org.hibernate.dialect.Oracle19cDialect] as strategy [org.hibernate.dialect.Dialect]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1770) ~[spring-beans-6.0.13.jar:6.0.13]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:598) ~[spring-beans-6.0.13.jar:6.0.13]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520) ~[spring-beans-6.0.13.jar:6.0.13]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.0.13.jar:6.0.13]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.0.13.jar:6.0.13]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.0.13.jar:6.0.13]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.0.13.jar:6.0.13]\n    at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1166) ~[spring-context-6.0.13.jar:6.0.13]\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:940) ~[spring-context-6.0.13.jar:6.0.13]\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616) ~[spring-context-6.0.13.jar:6.0.13]\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.1.5.jar:3.1.5]\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:738) ~[spring-boot-3.1.5.jar:3.1.5]\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:440) ~[spring-boot-3.1.5.jar:3.1.5]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:316) ~[spring-boot-3.1.5.jar:3.1.5]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1306) ~[spring-boot-3.1.5.jar:3.1.5]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1295) ~[spring-boot-3.1.5.jar:3.1.5]\n    at com.riskanalysisexpertsystem..Application.main(Application.java:14) ~[classes/:na]\nCaused by: org.hibernate.service.spi.ServiceException: Unable to create requested service [org.hibernate.engine.jdbc.env.spi.JdbcEnvironment] due to: Unable to resolve name [org.hibernate.dialect.Oracle19cDialect] as strategy [org.hibernate.dialect.Dialect]\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.createService(AbstractServiceRegistryImpl.java:277) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:239) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:216) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\n    at org.hibernate.boot.model.relational.Database.&lt;init&gt;(Database.java:45) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\n    at org.hibernate.boot.internal.InFlightMetadataCollectorImpl.getDatabase(InFlightMetadataCollectorImpl.java:231) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\n    at org.hibernate.boot.internal.InFlightMetadataCollectorImpl.&lt;init&gt;(InFlightMetadataCollectorImpl.java:199) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\n    at org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:169) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\n    at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.metadata(EntityManagerFactoryBuilderImpl.java:1383) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\n    at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1454) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\n    at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75) ~[spring-orm-6.0.13.jar:6.0.13]\n    at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:376) ~[spring-orm-6.0.13.jar:6.0.13]\n    at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409) ~[spring-orm-6.0.13.jar:6.0.13]\n    at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396) ~[spring-orm-6.0.13.jar:6.0.13]\n    at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:352) ~[spring-orm-6.0.13.jar:6.0.13]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1817) ~[spring-beans-6.0.13.jar:6.0.13]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1766) ~[spring-beans-6.0.13.jar:6.0.13]\n    ... 16 common frames omitted\nCaused by: org.hibernate.boot.registry.selector.spi.StrategySelectionException: Unable to resolve name [org.hibernate.dialect.Oracle19cDialect] as strategy [org.hibernate.dialect.Dialect]\n    at org.hibernate.boot.registry.selector.internal.StrategySelectorImpl.selectStrategyImplementor(StrategySelectorImpl.java:154) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\n    at org.hibernate.boot.registry.selector.internal.StrategySelectorImpl.resolveStrategy(StrategySelectorImpl.java:236) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\n    at org.hibernate.boot.registry.selector.internal.StrategySelectorImpl.resolveStrategy(StrategySelectorImpl.java:189) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\n    at org.hibernate.engine.jdbc.dialect.internal.DialectFactoryImpl.constructDialect(DialectFactoryImpl.java:122) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\n    at org.hibernate.engine.jdbc.dialect.internal.DialectFactoryImpl.buildDialect(DialectFactoryImpl.java:87) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\n    at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.getJdbcEnvironmentWithDefaults(JdbcEnvironmentInitiator.java:229) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\n    at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.getJdbcEnvironmentUsingJdbcMetadata(JdbcEnvironmentInitiator.java:381) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\n    at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:193) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\n    at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:69) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\n    at org.hibernate.boot.registry.internal.StandardServiceRegistryImpl.initiateService(StandardServiceRegistryImpl.java:119) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.createService(AbstractServiceRegistryImpl.java:264) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\n    ... 31 common frames omitted\nCaused by: org.hibernate.boot.registry.classloading.spi.ClassLoadingException: Unable to load class [org.hibernate.dialect.Oracle19cDialect]\n    at org.hibernate.boot.registry.classloading.internal.ClassLoaderServiceImpl.classForName(ClassLoaderServiceImpl.java:123) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\n    at org.hibernate.boot.registry.selector.internal.StrategySelectorImpl.selectStrategyImplementor(StrategySelectorImpl.java:150) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\n    ... 41 common frames omitted\nCaused by: java.lang.ClassNotFoundException: Could not load requested class : org.hibernate.dialect.Oracle19cDialect\n    at org.hibernate.boot.registry.classloading.internal.AggregatedClassLoader.findClass(AggregatedClassLoader.java:215) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\n    at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:587) ~[na:na]\n    at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520) ~[na:na]\n    at java.base/java.lang.Class.forName0(Native Method) ~[na:na]\n    at java.base/java.lang.Class.forName(Class.java:467) ~[na:na]\n    at org.hibernate.boot.registry.classloading.internal.ClassLoaderServiceImpl.classForName(ClassLoaderServiceImpl.java:120) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\n    ... 42 common frames omitted\nCaused by: java.lang.Throwable: null\n    at org.hibernate.boot.registry.classloading.internal.AggregatedClassLoader.findClass(AggregatedClassLoader.java:208) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\n    ... 47 common frames omitted\n    Suppressed: java.lang.ClassNotFoundException: org.hibernate.dialect.Oracle19cDialect\n        at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641) ~[na:na]\n        at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188) ~[na:na]\n        at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520) ~[na:na]\n        at org.hibernate.boot.registry.classloading.internal.AggregatedClassLoader.findClass(AggregatedClassLoader.java:205) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\n        ... 47 common frames omitted\n    Suppressed: java.lang.ClassNotFoundException: org.hibernate.dialect.Oracle19cDialect\n        at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641) ~[na:na]\n        at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188) ~[na:na]\n        at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520) ~[na:na]\n        at org.hibernate.boot.registry.classloading.internal.AggregatedClassLoader.findClass(AggregatedClassLoader.java:205) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\n        ... 47 common frames omitted\n    Suppressed: java.lang.ClassNotFoundException: org.hibernate.dialect.Oracle19cDialect\n        at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641) ~[na:na]\n        at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188) ~[na:na]\n        at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520) ~[na:na]\n        at org.hibernate.boot.registry.classloading.internal.AggregatedClassLoader.findClass(AggregatedClassLoader.java:205) ~[hibernate-core-6.2.13.Final.jar:6.2.13.Final]\n        ... 47 common frames omitted\n\n[[1;34mINFO[m] [1m------------------------------------------------------------------------[m\n[[1;34mINFO[m] [1;31mBUILD FAILURE[m\n[[1;34mINFO[m] [1m------------------------------------------------------------------------[m\n[[1;34mINFO[m] Total time:  13.490 s\n[[1;34mINFO[m] Finished at: 2023-11-28T04:23:22+02:00\n[[1;34mINFO[m] [1m------------------------------------------------------------------------[m\n[[1;31mERROR[m] Failed to execute goal [32morg.springframework.boot:spring-boot-maven-plugin:3.1.5:run[m [1m(default-cli)[m on project [36m[m: [1;31mProcess terminated with exit code: 1[m -&gt; [1m[Help 1][m\n[[1;31mERROR[m] \n[[1;31mERROR[m] To see the full stack trace of the errors, re-run Maven with the [1m-e[m switch.\n[[1;31mERROR[m] Re-run Maven using the [1m-X[m switch to enable full debug logging.\n[[1;31mERROR[m] \n[[1;31mERROR[m] For more information about the errors and possible solutions, please read the following articles:\n[[1;31mERROR[m] [1m[Help 1][m http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException\n\n</code></pre>\n<p>I tried creating a bean and it was unsuccessful.\nI've tried removing the Dialect, but I'm still however to unable to create a bean\nChecked the database to ensure the values match.</p>\n"},{"tags":["java","kubernetes","vault","hashicorp"],"comments":[{"owner":{"account_id":13863020,"reputation":136993,"user_id":10008173,"display_name":"David Maze"},"score":0,"creation_date":1701171601,"post_id":77561110,"comment_id":136739699,"body_markdown":"(Note that the container process does fundamentally need the actual text of the credentials, and someone who can run `kubectl run` can impersonate the Pod well enough to interact with a secrets manager.  Vault still has some significant advantages, such as having a well-defined place to store the secrets, and some advanced features such as one-time credentials for some use cases.)","body":"(Note that the container process does fundamentally need the actual text of the credentials, and someone who can run <code>kubectl run</code> can impersonate the Pod well enough to interact with a secrets manager.  Vault still has some significant advantages, such as having a well-defined place to store the secrets, and some advanced features such as one-time credentials for some use cases.)"}],"owner":{"account_id":11603409,"reputation":79,"user_id":8499868,"display_name":"Akylson"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1701140597,"creation_date":1701140597,"question_id":77561110,"body_markdown":"I have a question regarding HashiCorp Vault. I recently installed HashiCorp Vault in Kubernetes and integrated it into a Kubernetes deployment. The secrets appear in the /vault/secrets/ directory. I&#39;m unsure if this is the intended behavior or if I am doing something wrong. If someone gains access to the pod, they can easily read the file with secrets. This raises the question of why HashiCorp Vault is needed if I&#39;m simply importing a file with secrets into the pod, which can be read.\r\n\r\nCould you please advise if I am doing something wrong or if there are any best practices for security to ensure that secrets are not visible and cannot be read by my Java application?\r\n\r\nI&#39;ve read that it&#39;s possible to implement secrets from HashiCorp Vault as environment variables in a Kubernetes deployment, but I&#39;m wondering if this is secure.\r\n\r\nAlternatively, should I perform integration with HashiCorp Vault directly in my Java application and input the secrets directly into the application?\r\n\r\nI would appreciate your advice and any useful references. If you could also provide examples that you use in production, I would be grateful.","title":"Hashicorp vault in kubernetes java application deployment - security","body":"<p>I have a question regarding HashiCorp Vault. I recently installed HashiCorp Vault in Kubernetes and integrated it into a Kubernetes deployment. The secrets appear in the /vault/secrets/ directory. I'm unsure if this is the intended behavior or if I am doing something wrong. If someone gains access to the pod, they can easily read the file with secrets. This raises the question of why HashiCorp Vault is needed if I'm simply importing a file with secrets into the pod, which can be read.</p>\n<p>Could you please advise if I am doing something wrong or if there are any best practices for security to ensure that secrets are not visible and cannot be read by my Java application?</p>\n<p>I've read that it's possible to implement secrets from HashiCorp Vault as environment variables in a Kubernetes deployment, but I'm wondering if this is secure.</p>\n<p>Alternatively, should I perform integration with HashiCorp Vault directly in my Java application and input the secrets directly into the application?</p>\n<p>I would appreciate your advice and any useful references. If you could also provide examples that you use in production, I would be grateful.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1701097897,"post_id":77557612,"comment_id":136729516,"body_markdown":"The error is pretty clear. There is no column named `year`, which is right as your table definition doesn&#39;t have that. It has many columns but not one named `year`.","body":"The error is pretty clear. There is no column named <code>year</code>, which is right as your table definition doesn&#39;t have that. It has many columns but not one named <code>year</code>."},{"owner":{"account_id":3150862,"reputation":11755,"user_id":2664350,"display_name":"piet.t"},"score":0,"creation_date":1701097916,"post_id":77557612,"comment_id":136729525,"body_markdown":"Your `create table` does show neither a column named `year` nor a clomun named `value`, so the error message is perfectly right. That you don&#39;t want to use the table as it&#39;s defined also goes to show that your database-design is way off...","body":"Your <code>create table</code> does show neither a column named <code>year</code> nor a clomun named <code>value</code>, so the error message is perfectly right. That you don&#39;t want to use the table as it&#39;s defined also goes to show that your database-design is way off..."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1701140502,"post_id":77557612,"comment_id":136735672,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"answers":[{"tags":[],"owner":{"account_id":1698812,"reputation":50,"user_id":1559510,"display_name":"Cojy"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1701098120,"creation_date":1701098120,"answer_id":77557994,"question_id":77557612,"body_markdown":"Here are some of the issues:\r\n\r\nIn the else there is the WHERE sido = :cityName so you have a mapping to cityName that can be done with query.setParameter(&quot;cityName&quot;, cityName); but this does not exist in the if, leading to your second error.\r\n\r\nYour table does not contain a &quot;value&quot; column, nor does it contain a &quot;year&quot; column so it fails finding one, also if you create a year column, it will fail on the sum as there is no value.\r\n\r\nAlso the object returned by your query does not ressemble an AllScenario object, so the automatic mapping would likely fail.\r\n\r\n**Solution**\r\n\r\nWhat are those y2022, y2023... columns ? It looks like partitioning ? Maybe this should be reworked into the year column with a partition ? though the partition will not like the autoincrement on the id.\r\n\r\nThen create a value column.\r\n\r\nFinally create another object like &quot;AggregatedAllValues&quot; that as the year, sido, sgg, SUM(value) AS sumValue as attributes (sgg being null for the first query) like in https://stackoverflow.com/questions/64569420/how-to-return-map-with-multiple-sum-in-jpql-jpa or with manual mapping if you prefer\r\n\r\nAlso you might consider not doing an impl of the repository and leave an interface with two custom queries and do the if in the service calling them. That would spare the entityManager injection and errors in the query params\r\n","title":"Hibernate JPQL native query error - &quot;column does not exist&quot; and &quot;Could not locate named parameter&quot;","body":"<p>Here are some of the issues:</p>\n<p>In the else there is the WHERE sido = :cityName so you have a mapping to cityName that can be done with query.setParameter(&quot;cityName&quot;, cityName); but this does not exist in the if, leading to your second error.</p>\n<p>Your table does not contain a &quot;value&quot; column, nor does it contain a &quot;year&quot; column so it fails finding one, also if you create a year column, it will fail on the sum as there is no value.</p>\n<p>Also the object returned by your query does not ressemble an AllScenario object, so the automatic mapping would likely fail.</p>\n<p><strong>Solution</strong></p>\n<p>What are those y2022, y2023... columns ? It looks like partitioning ? Maybe this should be reworked into the year column with a partition ? though the partition will not like the autoincrement on the id.</p>\n<p>Then create a value column.</p>\n<p>Finally create another object like &quot;AggregatedAllValues&quot; that as the year, sido, sgg, SUM(value) AS sumValue as attributes (sgg being null for the first query) like in <a href=\"https://stackoverflow.com/questions/64569420/how-to-return-map-with-multiple-sum-in-jpql-jpa\">How to return map with multiple sum in jpql jpa?</a> or with manual mapping if you prefer</p>\n<p>Also you might consider not doing an impl of the repository and leave an interface with two custom queries and do the if in the service calling them. That would spare the entityManager injection and errors in the query params</p>\n"}],"owner":{"account_id":30004476,"reputation":1,"user_id":22993743,"display_name":"JJJ"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":33,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1701139678,"creation_date":1701094849,"question_id":77557612,"body_markdown":"Hibernate JPQL native query error - &quot;column does not exist&quot; and &quot;Could not locate named parameter&quot;Hibernate JPQL native query error - &quot;column does not exist&quot; and &quot;Could not locate named parameter&quot;","title":"Hibernate JPQL native query error - &quot;column does not exist&quot; and &quot;Could not locate named parameter&quot;","body":"<p>Hibernate JPQL native query error - &quot;column does not exist&quot; and &quot;Could not locate named parameter&quot;Hibernate JPQL native query error - &quot;column does not exist&quot; and &quot;Could not locate named parameter&quot;</p>\n"},{"tags":["java","apache-spark","quarkus","java.util.logging"],"answers":[{"tags":[],"owner":{"account_id":2826194,"reputation":10795,"user_id":2428802,"display_name":"jmehrens"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701139581,"creation_date":1701139581,"answer_id":77561071,"question_id":77543538,"body_markdown":"Spark is invoking [org.slf4j.bridge.SLF4JBridgeHandler::removeHandlersForRootLogger][1] when the session is newly created.  After all handlers are removed they then install the SLF4JBridgeHandler on the root JUL logger.  The problem is that this code is run after you setup your JUL logger.\r\n\r\nWhat should work the best is using [SLF4J with java.util.logging][2] and have either log4j2 configuration file or logback configuration file control all of your loggers.  Then JUL will route to SLF4J and SLF4J will bind with the provider you prefer.\r\n\r\n  [1]: https://github.com/apache/spark/blob/b7763a7eae2b9609012cbb4ce981276c6471cc4e/common/utils/src/main/scala/org/apache/spark/internal/Logging.scala#L201\r\n  [2]: https://www.slf4j.org/manual.html","title":"java.util.logging stops working after SparkSession is created","body":"<p>Spark is invoking <a href=\"https://github.com/apache/spark/blob/b7763a7eae2b9609012cbb4ce981276c6471cc4e/common/utils/src/main/scala/org/apache/spark/internal/Logging.scala#L201\" rel=\"nofollow noreferrer\">org.slf4j.bridge.SLF4JBridgeHandler::removeHandlersForRootLogger</a> when the session is newly created.  After all handlers are removed they then install the SLF4JBridgeHandler on the root JUL logger.  The problem is that this code is run after you setup your JUL logger.</p>\n<p>What should work the best is using <a href=\"https://www.slf4j.org/manual.html\" rel=\"nofollow noreferrer\">SLF4J with java.util.logging</a> and have either log4j2 configuration file or logback configuration file control all of your loggers.  Then JUL will route to SLF4J and SLF4J will bind with the provider you prefer.</p>\n"}],"owner":{"account_id":29983116,"reputation":1,"user_id":22977674,"display_name":"Choto"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1701139581,"creation_date":1700832926,"question_id":77543538,"body_markdown":"I have a Java application running on Quarkus for reading Delta Lake tables and Parquet files using Spark libraries with version `3.5.0`. Following method works fine in the matter of reading the data, but my problem is with logging (java.util.logging).\r\n\r\n```\r\n public static long getParquetFileRowCount(String parquetFilePath) {\r\n        logger.log(Level.INFO, &quot;Starting to read parquet file: &quot; + parquetFilePath);\r\n        long count = 0;\r\n\r\n        try (\r\n                SparkSession spark = SparkSession\r\n                .builder()\r\n                .appName(&quot;Java Spark SQL basic example&quot;)\r\n                .config(&quot;spark.local.dir&quot;,&quot;/tmp&quot;)\r\n                .config(&quot;spark.master&quot;, &quot;local&quot;)\r\n                .getOrCreate()) {\r\n\r\n            count = parquetRowCount(spark, parquetFilePath);\r\n\r\n            spark.stop();\r\n        }\r\n        System.out.println(&quot;SOUT Read parquet file: &quot; + parquetFilePath + &quot; finished.&quot;);\r\n        System.out.println(&quot;SOUT count: &quot; + count);\r\n        logger.log(Level.INFO, &quot;Read parquet file: &quot; + parquetFilePath + &quot; finished.&quot;);\r\n\r\n        return count;\r\n}\r\n```\r\n\r\nThe output:\r\n\r\n```\r\nINFO: Starting to read parquet file: *filepath*\r\nSOUT Read parquet file: *filepath* finished.\r\nSOUT count: *count*\r\n```\r\n\r\nSo the only message displayed is from SOUT method and not the logger, even any other log from different class from my application. Even after next execution of the mothed only messages from SOUT are in the output.\r\n\r\nIs there a way to make java.util.logging work with Spark? ","title":"java.util.logging stops working after SparkSession is created","body":"<p>I have a Java application running on Quarkus for reading Delta Lake tables and Parquet files using Spark libraries with version <code>3.5.0</code>. Following method works fine in the matter of reading the data, but my problem is with logging (java.util.logging).</p>\n<pre><code> public static long getParquetFileRowCount(String parquetFilePath) {\n        logger.log(Level.INFO, &quot;Starting to read parquet file: &quot; + parquetFilePath);\n        long count = 0;\n\n        try (\n                SparkSession spark = SparkSession\n                .builder()\n                .appName(&quot;Java Spark SQL basic example&quot;)\n                .config(&quot;spark.local.dir&quot;,&quot;/tmp&quot;)\n                .config(&quot;spark.master&quot;, &quot;local&quot;)\n                .getOrCreate()) {\n\n            count = parquetRowCount(spark, parquetFilePath);\n\n            spark.stop();\n        }\n        System.out.println(&quot;SOUT Read parquet file: &quot; + parquetFilePath + &quot; finished.&quot;);\n        System.out.println(&quot;SOUT count: &quot; + count);\n        logger.log(Level.INFO, &quot;Read parquet file: &quot; + parquetFilePath + &quot; finished.&quot;);\n\n        return count;\n}\n</code></pre>\n<p>The output:</p>\n<pre><code>INFO: Starting to read parquet file: *filepath*\nSOUT Read parquet file: *filepath* finished.\nSOUT count: *count*\n</code></pre>\n<p>So the only message displayed is from SOUT method and not the logger, even any other log from different class from my application. Even after next execution of the mothed only messages from SOUT are in the output.</p>\n<p>Is there a way to make java.util.logging work with Spark?</p>\n"},{"tags":["java","regex","fortify","denial-of-service"],"comments":[{"owner":{"account_id":17835,"reputation":303885,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":4,"creation_date":1701095277,"post_id":77557606,"comment_id":136728916,"body_markdown":"First, I think your security scanning tool is overly critical: This is unlikely to cause an issue. Second, even so constructing a regex at runtime is a bad habit to get into and can almost always be avoided entirely. Especially this specific use seems weird: what are you trying to do here? If you want a string to be all numbers except (for example) for the last character, simply use something like `^[0-9]*[^0-9]$` to check that, no need to construct a pattern dynamically.","body":"First, I think your security scanning tool is overly critical: This is unlikely to cause an issue. Second, even so constructing a regex at runtime is a bad habit to get into and can almost always be avoided entirely. Especially this specific use seems weird: what are you trying to do here? If you want a string to be all numbers except (for example) for the last character, simply use something like <code>^[0-9]*[^0-9]$</code> to check that, no need to construct a pattern dynamically."},{"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"score":0,"creation_date":1701096116,"post_id":77557606,"comment_id":136729127,"body_markdown":"@JoachimSauer `^[0-9]*[^0-9]$` probably won&#39;t work, the resulting pattern from the question is something like `[0-9]{9}` (for example), so it seems OP wants to capture numeric string with exact length. The fix is probably to validate that `len` is within some range, and to make sure it&#39;s not negative, as that would lead to some funny regex.","body":"@JoachimSauer <code>^[0-9]*[^0-9]$</code> probably won&#39;t work, the resulting pattern from the question is something like <code>[0-9]{9}</code> (for example), so it seems OP wants to capture numeric string with exact length. The fix is probably to validate that <code>len</code> is within some range, and to make sure it&#39;s not negative, as that would lead to some funny regex."},{"owner":{"account_id":17835,"reputation":303885,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1701096196,"post_id":77557606,"comment_id":136729144,"body_markdown":"@Chaosfire: they use `len-1`, which my pattern also checks: all but one character must be digits.","body":"@Chaosfire: they use <code>len-1</code>, which my pattern also checks: all but one character must be digits."},{"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"score":0,"creation_date":1701096643,"post_id":77557606,"comment_id":136729236,"body_markdown":"@JoachimSauer The example in questions results in regex like this one - `[0-9]{2}`, if `len` was `3`, let&#39;s say. This regex captures *exactly* two digits. I don&#39;t see anything that suggests only digits followed by one non digit.","body":"@JoachimSauer The example in questions results in regex like this one - <code>[0-9]{2}</code>, if <code>len</code> was <code>3</code>, let&#39;s say. This regex captures <i>exactly</i> two digits. I don&#39;t see anything that suggests only digits followed by one non digit."},{"owner":{"account_id":17835,"reputation":303885,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":1,"creation_date":1701097089,"post_id":77557606,"comment_id":136729334,"body_markdown":"@Chaosfire: all of that is correct, but `len` is being set to exactly the length of the input string in the first line and assume that this input string is also what the regex is applied to.","body":"@Chaosfire: all of that is correct, but <code>len</code> is being set to exactly the length of the input string in the first line and assume that this input string is also what the regex is applied to."},{"owner":{"account_id":31180,"reputation":29173,"user_id":85421,"display_name":"user85421"},"score":2,"creation_date":1701100587,"post_id":77557606,"comment_id":136730190,"body_markdown":"maybe we need a [mre], or better explanation .. anyway, as I already commented, `&quot;[0-9]{-1}&quot;` is an invalid regular expression and will throw an exception","body":"maybe we need a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, or better explanation .. anyway, as I already commented, <code>&quot;[0-9]{-1}&quot;</code> is an invalid regular expression and will throw an exception"},{"owner":{"account_id":3211603,"reputation":289287,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1701101714,"post_id":77557606,"comment_id":136730443,"body_markdown":"As a side note, the invocation of `Integer.toString` is obsolete, just `&quot;[0-9]{&quot;+(len-1)+&quot;}&quot;` would do the same.","body":"As a side note, the invocation of <code>Integer.toString</code> is obsolete, just <code>&quot;[0-9]{&quot;+(len-1)+&quot;}&quot;</code> would do the same."}],"answers":[{"tags":[],"owner":{"account_id":5907283,"reputation":1464,"user_id":4648586,"accept_rate":60,"display_name":"Bagus Tesa"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1701139235,"creation_date":1701095409,"answer_id":77557666,"question_id":77557606,"body_markdown":"The fortify scanner is giving a good catch on this one, reason being user supplied pattern.\r\n\r\n    Pattern p= Pattern.compile(&quot;[0-9]{&quot;+Integer.toString(len-1)+&quot;}&quot;); \r\n\r\nFortify see the regex pattern constructed based on user input which may result in a DoS. Even so, the resulting pattern on your case at worst will ask the app to capture 2,147,483,646 characters - an enormous number but won&#39;t result in catastrophic backtracking. However, you should keep in mind that large enough integer in the quantifier may be rejected by the regex engine.\r\n\r\nYou could rewrite the code with regex only ensuring the string consist of only integers while length checking done using the good old `String.length()`.\r\n\r\n    int len = inputString.length();\r\n    Pattern p= Pattern.compile(&quot;^[0-9]+$&quot;);\r\n    if(myString.length() == len &amp;&amp; p.matcher(myString).find())\r\n    {\r\n        //success\r\n    }\r\n    else\r\n    {\r\n        //fail\r\n    }\r\n    \r\n\r\n\r\nAlso, keep in mind there are [many ways to broke regex](https://owasp.org/www-community/attacks/Regular_expression_Denial_of_Service_-_ReDoS).","title":"Denial of service: regular expression","body":"<p>The fortify scanner is giving a good catch on this one, reason being user supplied pattern.</p>\n<pre><code>Pattern p= Pattern.compile(&quot;[0-9]{&quot;+Integer.toString(len-1)+&quot;}&quot;); \n</code></pre>\n<p>Fortify see the regex pattern constructed based on user input which may result in a DoS. Even so, the resulting pattern on your case at worst will ask the app to capture 2,147,483,646 characters - an enormous number but won't result in catastrophic backtracking. However, you should keep in mind that large enough integer in the quantifier may be rejected by the regex engine.</p>\n<p>You could rewrite the code with regex only ensuring the string consist of only integers while length checking done using the good old <code>String.length()</code>.</p>\n<pre><code>int len = inputString.length();\nPattern p= Pattern.compile(&quot;^[0-9]+$&quot;);\nif(myString.length() == len &amp;&amp; p.matcher(myString).find())\n{\n    //success\n}\nelse\n{\n    //fail\n}\n</code></pre>\n<p>Also, keep in mind there are <a href=\"https://owasp.org/www-community/attacks/Regular_expression_Denial_of_Service_-_ReDoS\" rel=\"nofollow noreferrer\">many ways to broke regex</a>.</p>\n"}],"owner":{"account_id":28628132,"reputation":9,"user_id":21919707,"display_name":"Sri"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":127,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1701139235,"creation_date":1701094803,"question_id":77557606,"body_markdown":"When we send this code to fortify scan\r\n \r\n```\r\nint len=inputString.length();\r\nPattern p= Pattern.compile(&quot;[0-9]{&quot;+Integer.toString(len-1)+&quot;}&quot;); \r\n```\r\nThe second line is vulnerable to Denial of Service: regular expression.\r\n\r\nHow to resolve this issue? I tried different ways, but nothing is working out. ","title":"Denial of service: regular expression","body":"<p>When we send this code to fortify scan</p>\n<pre><code>int len=inputString.length();\nPattern p= Pattern.compile(&quot;[0-9]{&quot;+Integer.toString(len-1)+&quot;}&quot;); \n</code></pre>\n<p>The second line is vulnerable to Denial of Service: regular expression.</p>\n<p>How to resolve this issue? I tried different ways, but nothing is working out.</p>\n"},{"tags":["java","android","path","android-sdcard"],"comments":[{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1701118030,"post_id":77559172,"comment_id":136733266,"body_markdown":"`all the SD card directories` What do you consider to be &#39;the SD card directory&#39;? A removable micro sd card?","body":"<code>all the SD card directories</code> What do you consider to be &#39;the SD card directory&#39;? A removable micro sd card?"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1701118055,"post_id":77559172,"comment_id":136733268,"body_markdown":"Also tell Android version of used device.","body":"Also tell Android version of used device."},{"owner":{"account_id":14907401,"reputation":3507,"user_id":10764147,"display_name":"S. M. Asif"},"score":0,"creation_date":1701138653,"post_id":77559172,"comment_id":136735531,"body_markdown":"Yes, it should be a removable SD card.\nAndroid 14 (API level 34)","body":"Yes, it should be a removable SD card. Android 14 (API level 34)"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1701162915,"post_id":77559172,"comment_id":136738145,"body_markdown":"Then edit your post and tell the readers right away. And you cannot use getExternalStorageDirectory() for removable micro sd card. You should have seen that already.","body":"Then edit your post and tell the readers right away. And you cannot use getExternalStorageDirectory() for removable micro sd card. You should have seen that already."}],"answers":[{"tags":[],"owner":{"account_id":29439484,"reputation":94,"user_id":22557788,"display_name":"Davit Hovhannisyan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701116139,"creation_date":1701116139,"answer_id":77559694,"question_id":77559172,"body_markdown":"This may help you:\r\n\r\n    import android.os.Bundle;\r\n    import android.os.Environment;\r\n    import android.util.Log;\r\n    \r\n    import androidx.appcompat.app.AppCompatActivity;\r\n    \r\n    import java.io.File;\r\n    \r\n    public class LogFileListActivity extends AppCompatActivity {\r\n    \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_log_file_list);\r\n    \r\n           \r\n            File rootDirectory = Environment.getExternalStorageDirectory();\r\n    \r\n          \r\n            logFiles(rootDirectory);\r\n    \r\n            previously)\r\n            logFilesInDownload();\r\n        }\r\n    \r\n        private void logFiles(File directory) {\r\n            if (directory.exists() &amp;&amp; directory.isDirectory()) {\r\n                File[] files = directory.listFiles();\r\n    \r\n                if (files != null) {\r\n                    for (File file : files) {\r\n                        if (file.isDirectory()) {\r\n                          \r\n                            Log.e(&quot;##FILE_INFO&quot;, &quot;Directory Name: &quot; + file.getName() + &quot;, Directory Path: &quot; + file.getAbsolutePath());\r\n                           \r\n                            logFiles(file);\r\n                        } else {\r\n                            \r\n                            Log.e(&quot;##FILE_INFO&quot;, &quot;File Name: &quot; + file.getName() + &quot;, File Path: &quot; + file.getAbsolutePath());\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    \r\n        private void logFilesInDownload() {\r\n           \r\n            File downloadFolder = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DOWNLOADS);\r\n    \r\n           \r\n            logFiles(downloadFolder);\r\n        \r\n\r\n}\r\n}\r\n","title":"How to show the list of all file names in the SD card directory of Android device?","body":"<p>This may help you:</p>\n<pre><code>import android.os.Bundle;\nimport android.os.Environment;\nimport android.util.Log;\n\nimport androidx.appcompat.app.AppCompatActivity;\n\nimport java.io.File;\n\npublic class LogFileListActivity extends AppCompatActivity {\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_log_file_list);\n\n       \n        File rootDirectory = Environment.getExternalStorageDirectory();\n\n      \n        logFiles(rootDirectory);\n\n        previously)\n        logFilesInDownload();\n    }\n\n    private void logFiles(File directory) {\n        if (directory.exists() &amp;&amp; directory.isDirectory()) {\n            File[] files = directory.listFiles();\n\n            if (files != null) {\n                for (File file : files) {\n                    if (file.isDirectory()) {\n                      \n                        Log.e(&quot;##FILE_INFO&quot;, &quot;Directory Name: &quot; + file.getName() + &quot;, Directory Path: &quot; + file.getAbsolutePath());\n                       \n                        logFiles(file);\n                    } else {\n                        \n                        Log.e(&quot;##FILE_INFO&quot;, &quot;File Name: &quot; + file.getName() + &quot;, File Path: &quot; + file.getAbsolutePath());\n                    }\n                }\n            }\n        }\n    }\n\n    private void logFilesInDownload() {\n       \n        File downloadFolder = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DOWNLOADS);\n\n       \n        logFiles(downloadFolder);\n    \n</code></pre>\n<p>}\n}</p>\n"}],"owner":{"account_id":14907401,"reputation":3507,"user_id":10764147,"display_name":"S. M. Asif"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1701139213,"creation_date":1701109835,"question_id":77559172,"body_markdown":"In my Android native Java project, I have a class, where I wanted to show the log for all the SD card directories and file names inside those folders. My Android OS version:\r\n\r\n**Android 14 (API level 34)**\r\n\r\n**Here&#39;s the code:**\r\n\r\n    public class LogFileListActivity extends AppCompatActivity {\r\n    \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_log_file_list);\r\n    \r\n            // Get the root directory of the SD card\r\n            File rootDirectory = Environment.getExternalStorageDirectory();\r\n    \r\n            // Log all files in the root directory\r\n            logFiles(rootDirectory);\r\n    \r\n            // Log files in the &quot;Podcasts&quot; folder\r\n            logFilesInPodcasts();\r\n    \r\n        }\r\n    \r\n    \r\n        private void logFiles(File directory) {\r\n            if (directory.exists() &amp;&amp; directory.isDirectory()) {\r\n                File[] files = directory.listFiles();\r\n    \r\n                if (files != null) {\r\n                    for (File file : files) {\r\n                        Log.e(&quot;##FILE_INFO&quot;, &quot;File Name: &quot; + file.getName() + &quot;, File Path: &quot; + file.getAbsolutePath());\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    \r\n    \r\n        private void logFilesInPodcasts() {\r\n            // Get the &quot;Podcasts&quot; folder\r\n            File podcastsFolder = new File(Environment.getExternalStorageDirectory(), &quot;Download&quot;);\r\n    \r\n            // Log files in the &quot;Podcasts&quot; folder\r\n            logFiles(podcastsFolder);\r\n        }\r\n    \r\n    }\r\n\r\n\r\n**Now, the problem is:**\r\n\r\nRather showing the directory of SD card, it is showing the folders under sdk_gphone64_x86_64.\r\nAnother problem - It is logging till the child directory, but not showing the list of file names under them. So, I need a solution to get all the file names as well under each directory.\r\n\r\nI want a solution where I can see all the list of files at any directory of the devices. How can I do that?","title":"How to show the list of all file names in the SD card directory of Android device?","body":"<p>In my Android native Java project, I have a class, where I wanted to show the log for all the SD card directories and file names inside those folders. My Android OS version:</p>\n<p><strong>Android 14 (API level 34)</strong></p>\n<p><strong>Here's the code:</strong></p>\n<pre><code>public class LogFileListActivity extends AppCompatActivity {\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_log_file_list);\n\n        // Get the root directory of the SD card\n        File rootDirectory = Environment.getExternalStorageDirectory();\n\n        // Log all files in the root directory\n        logFiles(rootDirectory);\n\n        // Log files in the &quot;Podcasts&quot; folder\n        logFilesInPodcasts();\n\n    }\n\n\n    private void logFiles(File directory) {\n        if (directory.exists() &amp;&amp; directory.isDirectory()) {\n            File[] files = directory.listFiles();\n\n            if (files != null) {\n                for (File file : files) {\n                    Log.e(&quot;##FILE_INFO&quot;, &quot;File Name: &quot; + file.getName() + &quot;, File Path: &quot; + file.getAbsolutePath());\n                }\n            }\n        }\n    }\n\n\n    private void logFilesInPodcasts() {\n        // Get the &quot;Podcasts&quot; folder\n        File podcastsFolder = new File(Environment.getExternalStorageDirectory(), &quot;Download&quot;);\n\n        // Log files in the &quot;Podcasts&quot; folder\n        logFiles(podcastsFolder);\n    }\n\n}\n</code></pre>\n<p><strong>Now, the problem is:</strong></p>\n<p>Rather showing the directory of SD card, it is showing the folders under sdk_gphone64_x86_64.\nAnother problem - It is logging till the child directory, but not showing the list of file names under them. So, I need a solution to get all the file names as well under each directory.</p>\n<p>I want a solution where I can see all the list of files at any directory of the devices. How can I do that?</p>\n"},{"tags":["java","range","max","min","clamp"],"comments":[{"owner":{"account_id":1810138,"reputation":5319,"user_id":1646387,"accept_rate":100,"display_name":"Robadob"},"score":0,"creation_date":1375129477,"post_id":17933493,"comment_id":26203856,"body_markdown":"Why is this necessary if `Math.min` `Math.max` provides your solution?","body":"Why is this necessary if <code>Math.min</code> <code>Math.max</code> provides your solution?"},{"owner":{"account_id":9760,"reputation":85859,"user_id":18157,"accept_rate":100,"display_name":"Jim Garrison"},"score":5,"creation_date":1375129493,"post_id":17933493,"comment_id":26203863,"body_markdown":"That is the appropriate pattern.  If you do this in a lot of places, just define your own method in a helper class.","body":"That is the appropriate pattern.  If you do this in a lot of places, just define your own method in a helper class."},{"owner":{"account_id":36137,"reputation":178789,"user_id":102937,"accept_rate":90,"display_name":"Robert Harvey"},"score":4,"creation_date":1375129498,"post_id":17933493,"comment_id":26203870,"body_markdown":"If this code seems too long, just wrap it in your own function.","body":"If this code seems too long, just wrap it in your own function."},{"owner":{"account_id":2149740,"reputation":5737,"user_id":1906491,"accept_rate":59,"display_name":"Sean Connolly"},"score":4,"creation_date":1375129732,"post_id":17933493,"comment_id":26204004,"body_markdown":"I&#39;m coming to the community to see if such a function already exists. Just a question.. I don&#39;t think it&#39;s a bad question?","body":"I&#39;m coming to the community to see if such a function already exists. Just a question.. I don&#39;t think it&#39;s a bad question?"},{"owner":{"account_id":36137,"reputation":178789,"user_id":102937,"accept_rate":90,"display_name":"Robert Harvey"},"score":0,"creation_date":1375129873,"post_id":17933493,"comment_id":26204082,"body_markdown":"It&#39;s a rather trivial question, but nobody has voted to close it yet.","body":"It&#39;s a rather trivial question, but nobody has voted to close it yet."},{"owner":{"account_id":1075870,"reputation":7152,"user_id":1074041,"accept_rate":100,"display_name":"Trevor Freeman"},"score":1,"creation_date":1375130628,"post_id":17933493,"comment_id":26204501,"body_markdown":"Not a bad question.  You show what have done so far and you ask specifically if there is a one method solution.  No one wants to appear ignorant by reinventing the wheel when a simpler solution exists.  Not sure why it was downvoted, but I +1&#39;ed to help counter it.","body":"Not a bad question.  You show what have done so far and you ask specifically if there is a one method solution.  No one wants to appear ignorant by reinventing the wheel when a simpler solution exists.  Not sure why it was downvoted, but I +1&#39;ed to help counter it."},{"owner":{"account_id":2915411,"reputation":13804,"user_id":2498729,"accept_rate":69,"display_name":"But I&#39;m Not A Wrapper Class"},"score":1,"creation_date":1400002290,"post_id":17933493,"comment_id":36298659,"body_markdown":"@RobertHarvey I was wondering the same thing.  It seems really straightforward.  I guess it&#39;s a just something mathematicians would expect to be already built in the math library.","body":"@RobertHarvey I was wondering the same thing.  It seems really straightforward.  I guess it&#39;s a just something mathematicians would expect to be already built in the math library."},{"owner":{"account_id":284109,"reputation":47153,"user_id":581994,"accept_rate":57,"display_name":"Hot Licks"},"score":0,"creation_date":1400004585,"post_id":17933493,"comment_id":36300029,"body_markdown":"There&#39;s no really better way to do this in the C-based languages, short of a defined function.  Depending on your preferences you may use min/max, may code one or two `if` statements, etc.  None of these is inherently the &quot;right&quot; or &quot;wrong&quot; way.","body":"There&#39;s no really better way to do this in the C-based languages, short of a defined function.  Depending on your preferences you may use min/max, may code one or two <code>if</code> statements, etc.  None of these is inherently the &quot;right&quot; or &quot;wrong&quot; way."}],"answers":[{"tags":[],"owner":{"account_id":1532234,"reputation":79,"user_id":1429165,"display_name":"RedBirdISU"},"down_vote_count":6,"up_vote_count":1,"is_accepted":false,"score":-5,"last_activity_date":1621743136,"creation_date":1375131253,"answer_id":17934001,"question_id":17933493,"body_markdown":"You do not need an external library for this, try this test case:\r\n\r\n```java\r\npublic class RandomNumber {\r\n\r\n    public static void main(String[] Args) {\r\n        System.out.println(&quot;random = &quot; + randomInRange(5,10));\r\n    }\r\n    \r\n    public static double randomInRange(double arg1, double arg2) {\r\n        double my_number = Math.ceil(Math.random() * (arg1 - arg2) + arg2);\r\n        return my_number;\r\n    }\r\n\r\n}\r\n```\r\n\r\n ","title":"Java - limit number between min and max","body":"<p>You do not need an external library for this, try this test case:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class RandomNumber {\n\n    public static void main(String[] Args) {\n        System.out.println(&quot;random = &quot; + randomInRange(5,10));\n    }\n    \n    public static double randomInRange(double arg1, double arg2) {\n        double my_number = Math.ceil(Math.random() * (arg1 - arg2) + arg2);\n        return my_number;\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2397519,"reputation":3920,"user_id":2096041,"accept_rate":50,"display_name":"Barry Staes"},"down_vote_count":1,"up_vote_count":33,"is_accepted":false,"score":32,"last_activity_date":1425421834,"creation_date":1396256384,"answer_id":22757471,"question_id":17933493,"body_markdown":"OP asks for this implementation in a standard library:\r\n\r\n    int ensureRange(int value, int min, int max) {\r\n       return Math.min(Math.max(value, min), max);\r\n    }\r\n\r\n    boolean inRange(int value, int min, int max) {\r\n       return (value&gt;= min) &amp;&amp; (value&lt;= max);\r\n    }\r\n\r\nA pity the standard Math library lacks these","title":"Java - limit number between min and max","body":"<p>OP asks for this implementation in a standard library:</p>\n\n<pre><code>int ensureRange(int value, int min, int max) {\n   return Math.min(Math.max(value, min), max);\n}\n\nboolean inRange(int value, int min, int max) {\n   return (value&gt;= min) &amp;&amp; (value&lt;= max);\n}\n</code></pre>\n\n<p>A pity the standard Math library lacks these</p>\n"},{"tags":[],"owner":{"account_id":1544874,"reputation":19288,"user_id":1438628,"accept_rate":80,"display_name":"Majid Laissi"},"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1396256676,"creation_date":1396256676,"answer_id":22757561,"question_id":17933493,"body_markdown":"The `Math.max(int a, int b)` function is defined as:\r\n\r\n    public static int min(int a, int b) {\r\n        return (a &lt;= b) ? a : b;\r\n    }\r\n\r\n\r\nSo you can make a combination of the `max` and `min` functions as follows:\r\n\r\n    private static int MAX=10;\r\n    private static int MIN=0;\r\n\r\n    public int limit(int a) {\r\n        return (a &gt; MAX) ? MAX : (a &lt; MIN ? MIN: a );\r\n    }","title":"Java - limit number between min and max","body":"<p>The <code>Math.max(int a, int b)</code> function is defined as:</p>\n\n<pre><code>public static int min(int a, int b) {\n    return (a &lt;= b) ? a : b;\n}\n</code></pre>\n\n<p>So you can make a combination of the <code>max</code> and <code>min</code> functions as follows:</p>\n\n<pre><code>private static int MAX=10;\nprivate static int MIN=0;\n\npublic int limit(int a) {\n    return (a &gt; MAX) ? MAX : (a &lt; MIN ? MIN: a );\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3063996,"reputation":5861,"user_id":2596109,"accept_rate":50,"display_name":"Oleg Mikhailov"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1476895019,"creation_date":1464263066,"answer_id":37459951,"question_id":17933493,"body_markdown":"Generic method for any class implementing `Comparable` (including `Number` and its sub-classes):\r\n\r\n    public static &lt;T extends Comparable&lt;? super T&gt;&gt; T limit(T o, T min, T max){\r\n        if (o.compareTo(min) &lt; 0) return min;\r\n        if (o.compareTo(max) &gt; 0) return max;\r\n        return o;\r\n    }\r\n\r\nThe only requirement is that **all arguments must be of the same class**. It prevents possible type conversion loss.\r\n In fact it is incorrect to compare `float` with `double` of `long` with `int` etc. For example `(double) 0.1 != (float) 0.1`.\r\n\r\n**Usage:**\r\n  \r\n    double x = 13.000000001;\r\n    x = limit(x, 12.0, 13.0);\r\n    System.out.println(&quot;x = &quot; + x); //x = 13.0\r\n\r\nUnfortunately it is impossible to change the first argument directly by just `limit(x, 12.0, 13.0)` because primitive types are immutable.\r\n\r\n\r\n\r\n","title":"Java - limit number between min and max","body":"<p>Generic method for any class implementing <code>Comparable</code> (including <code>Number</code> and its sub-classes):</p>\n\n<pre><code>public static &lt;T extends Comparable&lt;? super T&gt;&gt; T limit(T o, T min, T max){\n    if (o.compareTo(min) &lt; 0) return min;\n    if (o.compareTo(max) &gt; 0) return max;\n    return o;\n}\n</code></pre>\n\n<p>The only requirement is that <strong>all arguments must be of the same class</strong>. It prevents possible type conversion loss.\n In fact it is incorrect to compare <code>float</code> with <code>double</code> of <code>long</code> with <code>int</code> etc. For example <code>(double) 0.1 != (float) 0.1</code>.</p>\n\n<p><strong>Usage:</strong></p>\n\n<pre><code>double x = 13.000000001;\nx = limit(x, 12.0, 13.0);\nSystem.out.println(\"x = \" + x); //x = 13.0\n</code></pre>\n\n<p>Unfortunately it is impossible to change the first argument directly by just <code>limit(x, 12.0, 13.0)</code> because primitive types are immutable.</p>\n"},{"tags":[],"owner":{"account_id":42068,"reputation":20631,"user_id":122441,"accept_rate":70,"display_name":"Hendy Irawan"},"down_vote_count":2,"up_vote_count":17,"is_accepted":false,"score":15,"last_activity_date":1500553361,"creation_date":1500553361,"answer_id":45214590,"question_id":17933493,"body_markdown":"As of version 21, [Guava][2] includes [`Ints.constrainToRange()`](https://google.github.io/guava/releases/snapshot/api/docs/com/google/common/primitives/Ints.html#constrainToRange-int-int-int-) (and equivalent methods for the other primitives). From the [release notes][1]:\r\n\r\n&gt; added `constrainToRange([type] value, [type] min, [type] max)` methods which constrain the given value to the closed range defined by the `min` and `max` values. They return the value itself if it&#39;s within the range, the `min` if it&#39;s below the range and the `max` if it&#39;s above the range.\r\n\r\n  [1]: https://github.com/google/guava/wiki/Release21#commonprimitives\r\n  [2]: https://github.com/google/guava\r\n\r\nCopied from https://stackoverflow.com/a/42968254/122441 by @dimo414.\r\n\r\nUnfortunately this version is quite recent as of July 2017, and in some projects (see https://stackoverflow.com/a/40691831/122441) Guava had broken backwards compatibility that required me to stay on version 19 for now. I&#39;m also shocked that neither Commons Lang nor Commons Math has it! :(","title":"Java - limit number between min and max","body":"<p>As of version 21, <a href=\"https://github.com/google/guava\" rel=\"noreferrer\">Guava</a> includes <a href=\"https://google.github.io/guava/releases/snapshot/api/docs/com/google/common/primitives/Ints.html#constrainToRange-int-int-int-\" rel=\"noreferrer\"><code>Ints.constrainToRange()</code></a> (and equivalent methods for the other primitives). From the <a href=\"https://github.com/google/guava/wiki/Release21#commonprimitives\" rel=\"noreferrer\">release notes</a>:</p>\n\n<blockquote>\n  <p>added <code>constrainToRange([type] value, [type] min, [type] max)</code> methods which constrain the given value to the closed range defined by the <code>min</code> and <code>max</code> values. They return the value itself if it's within the range, the <code>min</code> if it's below the range and the <code>max</code> if it's above the range.</p>\n</blockquote>\n\n<p>Copied from <a href=\"https://stackoverflow.com/a/42968254/122441\">https://stackoverflow.com/a/42968254/122441</a> by @dimo414.</p>\n\n<p>Unfortunately this version is quite recent as of July 2017, and in some projects (see <a href=\"https://stackoverflow.com/a/40691831/122441\">https://stackoverflow.com/a/40691831/122441</a>) Guava had broken backwards compatibility that required me to stay on version 19 for now. I'm also shocked that neither Commons Lang nor Commons Math has it! :(</p>\n"},{"tags":[],"owner":{"account_id":1085428,"reputation":3508,"user_id":1081247,"accept_rate":67,"display_name":"usernotnull"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1522788930,"creation_date":1522788930,"answer_id":49639021,"question_id":17933493,"body_markdown":"If you&#39;re on Android, use the MathUtils (in support library), it has only one function which specifically does this called clamp.\r\n\r\n&gt; This method takes a numerical value and ensures it fits in a given\r\n&gt; numerical range. If the number is smaller than the minimum required by\r\n&gt; the range, then the minimum of the range will be returned. If the\r\n&gt; number is higher than the maximum allowed by the range then the\r\n&gt; maximum of the range will be returned.","title":"Java - limit number between min and max","body":"<p>If you're on Android, use the MathUtils (in support library), it has only one function which specifically does this called clamp.</p>\n\n<blockquote>\n  <p>This method takes a numerical value and ensures it fits in a given\n  numerical range. If the number is smaller than the minimum required by\n  the range, then the minimum of the range will be returned. If the\n  number is higher than the maximum allowed by the range then the\n  maximum of the range will be returned.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":3874853,"reputation":2828,"user_id":3209170,"accept_rate":29,"display_name":"HBB20"},"down_vote_count":0,"up_vote_count":18,"is_accepted":false,"score":18,"last_activity_date":1563220939,"creation_date":1563220939,"answer_id":57046458,"question_id":17933493,"body_markdown":"I understand this was asked for Java. In Android world, it&#39;s common to use Kotlin \r\nand Java combined. In case some Kotlin user reached here (just like me), then they can use `coerceIn` extension function:\r\n\r\nKotlin Code:\r\n\r\n    println(10.coerceIn(1, 100)) // 10\r\n    println(10.coerceIn(1..100)) // 10\r\n    println(0.coerceIn(1, 100)) // 1\r\n    println(500.coerceIn(1, 100)) // 100\r\n\r\nRead more on official [Kotlin Documentation][1].\r\n\r\n\r\n  [1]: https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.ranges/coerce-in.html","title":"Java - limit number between min and max","body":"<p>I understand this was asked for Java. In Android world, it's common to use Kotlin \nand Java combined. In case some Kotlin user reached here (just like me), then they can use <code>coerceIn</code> extension function:</p>\n\n<p>Kotlin Code:</p>\n\n<pre><code>println(10.coerceIn(1, 100)) // 10\nprintln(10.coerceIn(1..100)) // 10\nprintln(0.coerceIn(1, 100)) // 1\nprintln(500.coerceIn(1, 100)) // 100\n</code></pre>\n\n<p>Read more on official <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.ranges/coerce-in.html\" rel=\"noreferrer\">Kotlin Documentation</a>.</p>\n"},{"tags":[],"owner":{"account_id":3155790,"reputation":14975,"user_id":2668232,"accept_rate":100,"display_name":"Oleksandr Pyrohov"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1695579283,"creation_date":1694122734,"answer_id":77063000,"question_id":17933493,"body_markdown":"There is new [`Math.clamp`][1] method (with multiple overloads) added in Java 21 to conveniently clamp the numeric value between the specified minimum and maximum values:\r\n```\r\nint valueToClamp = 0;\r\n\r\nSystem.out.println(Math.clamp(valueToClamp, 1, 10)); // 1\r\n```\r\n`public static int clamp(long value, int min, int max)`\r\n- `value` - value to clamp\r\n- `min` - minimal allowed value\r\n- `max` - maximal allowed value\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Math.html#clamp(long,int,int)","title":"Java - limit number between min and max","body":"<p>There is new <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Math.html#clamp(long,int,int)\" rel=\"nofollow noreferrer\"><code>Math.clamp</code></a> method (with multiple overloads) added in Java 21 to conveniently clamp the numeric value between the specified minimum and maximum values:</p>\n<pre><code>int valueToClamp = 0;\n\nSystem.out.println(Math.clamp(valueToClamp, 1, 10)); // 1\n</code></pre>\n<p><code>public static int clamp(long value, int min, int max)</code></p>\n<ul>\n<li><code>value</code> - value to clamp</li>\n<li><code>min</code> - minimal allowed value</li>\n<li><code>max</code> - maximal allowed value</li>\n</ul>\n"}],"owner":{"account_id":2149740,"reputation":5737,"user_id":1906491,"accept_rate":59,"display_name":"Sean Connolly"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":66772,"favorite_count":0,"down_vote_count":1,"up_vote_count":54,"accepted_answer_id":77063000,"answer_count":8,"score":53,"last_activity_date":1701139007,"creation_date":1375129413,"question_id":17933493,"body_markdown":"I want to return the number as long as it falls within a limit, else return the maximum or minimum value of the limit. I can do this with a combination of `Math.min` and `Math.max`.\r\n\r\n\r\n    public int limit(int value) {\r\n        return Math.max(0, Math.min(value, 10));\r\n    }\r\n\r\nI&#39;m wondering if there&#39;s an existing `limit` or `range` function I&#39;m overlooking.  \r\n3rd party libraries welcome if they are pretty common (eg: Commons or Guava)","title":"Java - limit number between min and max","body":"<p>I want to return the number as long as it falls within a limit, else return the maximum or minimum value of the limit. I can do this with a combination of <code>Math.min</code> and <code>Math.max</code>.</p>\n\n<pre><code>public int limit(int value) {\n    return Math.max(0, Math.min(value, 10));\n}\n</code></pre>\n\n<p>I'm wondering if there's an existing <code>limit</code> or <code>range</code> function I'm overlooking.<br>\n3rd party libraries welcome if they are pretty common (eg: Commons or Guava)</p>\n"},{"tags":["java","android","multithreading","firebase-storage"],"comments":[{"owner":{"account_id":426109,"reputation":302012,"user_id":807126,"display_name":"Doug Stevenson"},"score":2,"creation_date":1701143022,"post_id":77560922,"comment_id":136735841,"body_markdown":"getDownloadUrl is already asynchronous, so it doesn&#39;t make much sense to put it in its own thread.  The Task callbacks (success and failure listeners) deliver the result back to the main thread. If you don&#39;t see anything printed from either callback, maybe something is blocking the main thread.  Modern Android applications should generally have no need for Thread or Task, preferring instead LiveData and other utilities for managing async work.","body":"getDownloadUrl is already asynchronous, so it doesn&#39;t make much sense to put it in its own thread.  The Task callbacks (success and failure listeners) deliver the result back to the main thread. If you don&#39;t see anything printed from either callback, maybe something is blocking the main thread.  Modern Android applications should generally have no need for Thread or Task, preferring instead LiveData and other utilities for managing async work."}],"owner":{"account_id":22800673,"reputation":47,"user_id":16953398,"display_name":"vad070"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1701138037,"creation_date":1701136545,"question_id":77560922,"body_markdown":"In my code I&#39;m trying to get Uri for Firebase Storage references using Threads (for making a queue):\r\n\r\n    public class GetThemeThread implements Runnable {\r\n        private volatile Article article;\r\n        private final StorageReference reference;\r\n        private Context context;\r\n    \r\n        public GetThemeThread(StorageReference reference) {\r\n            this.reference = reference;\r\n        }\r\n    \r\n        @Override\r\n        public void run() {\r\n            System.out.println(&quot;Print1: &quot; + reference);\r\n            reference.child(&quot;title.jpg&quot;).getDownloadUrl().addOnSuccessListener(new OnSuccessListener&lt;Uri&gt;() {\r\n                @Override\r\n                public void onSuccess(Uri uri) {\r\n                    System.out.println(&quot;Print2: &quot; + uri.toString());\r\n                    article = new Article(reference.getName(), uri);\r\n                }\r\n            }).addOnFailureListener(new OnFailureListener() {\r\n                @Override\r\n                public void onFailure(@NonNull Exception e) {\r\n                    Toast.makeText(context, &quot;Error&quot;, Toast.LENGTH_SHORT).show();\r\n                    e.printStackTrace();\r\n                }\r\n            });\r\n        }\r\n    \r\n        public Article getArticle() {\r\n            return article;\r\n        }\r\n    }\r\n\r\nList of references is formed before in previous Activity. And I&#39;m sure that it was formed correctly (have already checked it). And I also ensure that this file in Firebase reference exists. But it doesn&#39;t work in such variant((  It gets nothing (null) instead of Uri.... It prints the reference correctly in a line &quot;Print1&quot;, but doesn&#39;t print anything in line with &quot;Print2&quot;.\r\nPreviosuly I tried using Task instead of Thread with the same code and it worked correctly.","title":"getDownloadUrl from FirebaseStorage using Thread in java","body":"<p>In my code I'm trying to get Uri for Firebase Storage references using Threads (for making a queue):</p>\n<pre><code>public class GetThemeThread implements Runnable {\n    private volatile Article article;\n    private final StorageReference reference;\n    private Context context;\n\n    public GetThemeThread(StorageReference reference) {\n        this.reference = reference;\n    }\n\n    @Override\n    public void run() {\n        System.out.println(&quot;Print1: &quot; + reference);\n        reference.child(&quot;title.jpg&quot;).getDownloadUrl().addOnSuccessListener(new OnSuccessListener&lt;Uri&gt;() {\n            @Override\n            public void onSuccess(Uri uri) {\n                System.out.println(&quot;Print2: &quot; + uri.toString());\n                article = new Article(reference.getName(), uri);\n            }\n        }).addOnFailureListener(new OnFailureListener() {\n            @Override\n            public void onFailure(@NonNull Exception e) {\n                Toast.makeText(context, &quot;Error&quot;, Toast.LENGTH_SHORT).show();\n                e.printStackTrace();\n            }\n        });\n    }\n\n    public Article getArticle() {\n        return article;\n    }\n}\n</code></pre>\n<p>List of references is formed before in previous Activity. And I'm sure that it was formed correctly (have already checked it). And I also ensure that this file in Firebase reference exists. But it doesn't work in such variant((  It gets nothing (null) instead of Uri.... It prints the reference correctly in a line &quot;Print1&quot;, but doesn't print anything in line with &quot;Print2&quot;.\nPreviosuly I tried using Task instead of Thread with the same code and it worked correctly.</p>\n"},{"tags":["java","maven","maven-compiler-plugin"],"comments":[{"owner":{"account_id":209503,"reputation":22790,"user_id":460557,"accept_rate":100,"display_name":"Jorge Campos"},"score":1,"creation_date":1699563207,"post_id":77456233,"comment_id":136551465,"body_markdown":"Short answer, no and it shouldn&#39;t. Maven is a build tool and designed to compile everything on the scope of a project. Here is an example why it shouldn&#39;t: Say you have A and B classes. A uses a method on B called `xMethod` you then rename B xMethod to yMethod. How will your A class know that a change was made? It should fail in the compilation process because a reference was broken.","body":"Short answer, no and it shouldn&#39;t. Maven is a build tool and designed to compile everything on the scope of a project. Here is an example why it shouldn&#39;t: Say you have A and B classes. A uses a method on B called <code>xMethod</code> you then rename B xMethod to yMethod. How will your A class know that a change was made? It should fail in the compilation process because a reference was broken."},{"owner":{"account_id":9162277,"reputation":14688,"user_id":6813231,"accept_rate":56,"display_name":"Alexei"},"score":0,"creation_date":1699564259,"post_id":77456233,"comment_id":136551623,"body_markdown":"@JorgeCampos Bad. The another build system Gradle compile only changed files.","body":"@JorgeCampos Bad. The another build system Gradle compile only changed files."},{"owner":{"account_id":209503,"reputation":22790,"user_id":460557,"accept_rate":100,"display_name":"Jorge Campos"},"score":0,"creation_date":1699564591,"post_id":77456233,"comment_id":136551678,"body_markdown":"What you are talking about in Gradle is called Compile Avoidance and it is not that it only compiles changed files it compiles everything that is needed to be compiled, in the example given for instance it would still compile both A and B. Here https://blog.gradle.org/incremental-compiler-avoidance","body":"What you are talking about in Gradle is called Compile Avoidance and it is not that it only compiles changed files it compiles everything that is needed to be compiled, in the example given for instance it would still compile both A and B. Here <a href=\"https://blog.gradle.org/incremental-compiler-avoidance\" rel=\"nofollow noreferrer\">blog.gradle.org/incremental-compiler-avoidance</a>"},{"owner":{"account_id":112317,"reputation":93929,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1699569685,"post_id":77456233,"comment_id":136552375,"body_markdown":"First I strongly recommend to use the most recent version of the maven-compiler-plugin (https://maven.apache.org/plugins/) because version 3.1 is more than a decade old. Second you should only use `&lt;maven.compiler.source&gt;..&lt;/maven.compiler.source&gt;` and `&lt;maven.compiler.target&gt;..&lt;/maven.compiler.target` if building with JDK8 or less... for JDK9+ you should use only `&lt;maven.compiler.release&gt;..&lt;/maven.compiler.release&gt;` and only define in the properties and no supplemental configuration in the plugin itself. The `&lt;compilerVersion&gt;..&lt;/compilerVersion&gt;` only makes sense if you defined forking","body":"First I strongly recommend to use the most recent version of the maven-compiler-plugin (<a href=\"https://maven.apache.org/plugins/\" rel=\"nofollow noreferrer\">maven.apache.org/plugins</a>) because version 3.1 is more than a decade old. Second you should only use <code>&lt;maven.compiler.source&gt;..&lt;&#47;maven.compiler.source&gt;</code> and <code>&lt;maven.compiler.target&gt;..&lt;&#47;maven.compiler.target</code> if building with JDK8 or less... for JDK9+ you should use only <code>&lt;maven.compiler.release&gt;..&lt;&#47;maven.compiler.release&gt;</code> and only define in the properties and no supplemental configuration in the plugin itself. The <code>&lt;compilerVersion&gt;..&lt;&#47;compilerVersion&gt;</code> only makes sense if you defined forking"},{"owner":{"account_id":112317,"reputation":93929,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1699569736,"post_id":77456233,"comment_id":136552383,"body_markdown":"This is also true for maven-surefire-plugin... check the linked page https://maven.apache.org/plugins/","body":"This is also true for maven-surefire-plugin... check the linked page <a href=\"https://maven.apache.org/plugins/\" rel=\"nofollow noreferrer\">maven.apache.org/plugins</a>"}],"answers":[{"tags":[],"owner":{"account_id":11377012,"reputation":12762,"user_id":8340997,"display_name":"Anish B."},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1701136031,"creation_date":1699624381,"answer_id":77460511,"question_id":77456233,"body_markdown":"You need to use `&lt;useIncrementalCompilation&gt;` feature from `maven-compiler-plugin`.\r\n\r\nRead the Maven docs for [`useIncrementalCompilation`][1].\r\n\r\n---\r\nJust add the below line in the `maven-compiler-plugin`.\r\n\r\n    &lt;useIncrementalCompilation&gt;false&lt;/useIncrementalCompilation&gt;\r\n\r\nThis will make sure that changed files are only picked up for compilation. \r\n\r\nUpdated **pom.xml**:\r\n\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n             xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n             xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n        &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \r\n        &lt;groupId&gt;com.mycompany&lt;/groupId&gt;\r\n        &lt;artifactId&gt;testprojectcodestyle&lt;/artifactId&gt;\r\n        &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n    \r\n        &lt;properties&gt;\r\n            &lt;java.version&gt;1.8&lt;/java.version&gt;\r\n            &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\r\n            &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\r\n            &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n        &lt;/properties&gt;\r\n        &lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;junit&lt;/groupId&gt;\r\n                &lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n                &lt;version&gt;4.13.2&lt;/version&gt;\r\n                &lt;scope&gt;test&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n        &lt;build&gt;\r\n            &lt;plugins&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;3.2.2&lt;/version&gt;\r\n                &lt;/plugin&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;3.11.0&lt;/version&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;compilerVersion&gt;${java.version}&lt;/compilerVersion&gt;\r\n                        &lt;source&gt;${java.version}&lt;/source&gt;\r\n                        &lt;target&gt;${java.version}&lt;/target&gt;\r\n                        &lt;useIncrementalCompilation&gt;false&lt;/useIncrementalCompilation&gt;\r\n                    &lt;/configuration&gt;\r\n                &lt;/plugin&gt;\r\n            &lt;/plugins&gt;\r\n        &lt;/build&gt;\r\n    &lt;/project&gt;\r\n\r\n\r\n**Note:** Try to use the latest version for maven plugins. Although `&lt;useIncrementalCompilation&gt;` feature works from `maven-compiler-plugin` version **3.1** onwards.\r\n\r\n\r\n  [1]: https://maven.apache.org/plugins/maven-compiler-plugin/compile-mojo.html#useIncrementalCompilation","title":"Why mvn compile lifecycle phase is not compiling only changed java files?","body":"<p>You need to use <code>&lt;useIncrementalCompilation&gt;</code> feature from <code>maven-compiler-plugin</code>.</p>\n<p>Read the Maven docs for <a href=\"https://maven.apache.org/plugins/maven-compiler-plugin/compile-mojo.html#useIncrementalCompilation\" rel=\"nofollow noreferrer\"><code>useIncrementalCompilation</code></a>.</p>\n<hr />\n<p>Just add the below line in the <code>maven-compiler-plugin</code>.</p>\n<pre><code>&lt;useIncrementalCompilation&gt;false&lt;/useIncrementalCompilation&gt;\n</code></pre>\n<p>This will make sure that changed files are only picked up for compilation.</p>\n<p>Updated <strong>pom.xml</strong>:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;com.mycompany&lt;/groupId&gt;\n    &lt;artifactId&gt;testprojectcodestyle&lt;/artifactId&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n\n    &lt;properties&gt;\n        &lt;java.version&gt;1.8&lt;/java.version&gt;\n        &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;junit&lt;/groupId&gt;\n            &lt;artifactId&gt;junit&lt;/artifactId&gt;\n            &lt;version&gt;4.13.2&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.2.2&lt;/version&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.11.0&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;compilerVersion&gt;${java.version}&lt;/compilerVersion&gt;\n                    &lt;source&gt;${java.version}&lt;/source&gt;\n                    &lt;target&gt;${java.version}&lt;/target&gt;\n                    &lt;useIncrementalCompilation&gt;false&lt;/useIncrementalCompilation&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n<p><strong>Note:</strong> Try to use the latest version for maven plugins. Although <code>&lt;useIncrementalCompilation&gt;</code> feature works from <code>maven-compiler-plugin</code> version <strong>3.1</strong> onwards.</p>\n"}],"owner":{"account_id":9162277,"reputation":14688,"user_id":6813231,"accept_rate":56,"display_name":"Alexei"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":104,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77460511,"answer_count":1,"score":1,"last_activity_date":1701136031,"creation_date":1699562866,"question_id":77456233,"body_markdown":"I have a Java project which is using **JDK 1.8** and **Maven 3.9** build tool.\r\n\r\nHere is the **pom.xml**:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n             xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n             xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n        &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \r\n        &lt;groupId&gt;com.mycompany&lt;/groupId&gt;\r\n        &lt;artifactId&gt;testprojectcodestyle&lt;/artifactId&gt;\r\n        &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n    \r\n        &lt;properties&gt;\r\n            &lt;java.version&gt;1.8&lt;/java.version&gt;\r\n            &lt;maven.compiler.source&gt;8&lt;/maven.compiler.source&gt;\r\n            &lt;maven.compiler.target&gt;8&lt;/maven.compiler.target&gt;\r\n            &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n        &lt;/properties&gt;\r\n        &lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;junit&lt;/groupId&gt;\r\n                &lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n                &lt;version&gt;4.13.2&lt;/version&gt;\r\n                &lt;scope&gt;test&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n    \r\n    \r\n        &lt;build&gt;\r\n            &lt;plugins&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;3.0.0&lt;/version&gt;\r\n                &lt;/plugin&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;3.1&lt;/version&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;compilerVersion&gt;${java.version}&lt;/compilerVersion&gt;\r\n                        &lt;source&gt;${java.version}&lt;/source&gt;\r\n                        &lt;target&gt;${java.version}&lt;/target&gt;\r\n                    &lt;/configuration&gt;\r\n                &lt;/plugin&gt;\r\n            &lt;/plugins&gt;\r\n        &lt;/build&gt;\r\n    &lt;/project&gt;\r\n\r\nNow, when I executed `mvn compile` phase on the project. I see that it compiled 5 files. That&#39;s okay.\r\n\r\nNow I changed only one file and executed the `mvn compile` phase again. It compiled the 5 files again. \r\n\r\nWhy this happened? Is it possible to tell maven to compile only changed files?\r\n\r\n ","title":"Why mvn compile lifecycle phase is not compiling only changed java files?","body":"<p>I have a Java project which is using <strong>JDK 1.8</strong> and <strong>Maven 3.9</strong> build tool.</p>\n<p>Here is the <strong>pom.xml</strong>:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;com.mycompany&lt;/groupId&gt;\n    &lt;artifactId&gt;testprojectcodestyle&lt;/artifactId&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n\n    &lt;properties&gt;\n        &lt;java.version&gt;1.8&lt;/java.version&gt;\n        &lt;maven.compiler.source&gt;8&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;8&lt;/maven.compiler.target&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;junit&lt;/groupId&gt;\n            &lt;artifactId&gt;junit&lt;/artifactId&gt;\n            &lt;version&gt;4.13.2&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.0.0&lt;/version&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.1&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;compilerVersion&gt;${java.version}&lt;/compilerVersion&gt;\n                    &lt;source&gt;${java.version}&lt;/source&gt;\n                    &lt;target&gt;${java.version}&lt;/target&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n<p>Now, when I executed <code>mvn compile</code> phase on the project. I see that it compiled 5 files. That's okay.</p>\n<p>Now I changed only one file and executed the <code>mvn compile</code> phase again. It compiled the 5 files again.</p>\n<p>Why this happened? Is it possible to tell maven to compile only changed files?</p>\n"},{"tags":["java","bit-fields"],"comments":[{"owner":{"account_id":2119809,"reputation":50936,"user_id":1883316,"display_name":"Tim Roberts"},"score":0,"creation_date":1701136066,"post_id":77560897,"comment_id":136735341,"body_markdown":"The &quot;first&quot; field is 32 bits wide.  The &quot;second&quot; field is 2 bits wide,  The &quot;third&quot; field is 3 bits wide.  Then there will be 27 bits of padding.  So, you can&#39;t use `JAVA_INT`.  Maybe `value_layout(2)`.","body":"The &quot;first&quot; field is 32 bits wide.  The &quot;second&quot; field is 2 bits wide,  The &quot;third&quot; field is 3 bits wide.  Then there will be 27 bits of padding.  So, you can&#39;t use <code>JAVA_INT</code>.  Maybe <code>value_layout(2)</code>."},{"owner":{"account_id":321078,"reputation":15468,"user_id":639687,"accept_rate":69,"display_name":"czerny"},"score":0,"creation_date":1701136527,"post_id":77560897,"comment_id":136735383,"body_markdown":"@TimRoberts So the answer would be: There is no way to describe it directly. One has to replace bit fields by `int`s and access their values using bitwise operations?","body":"@TimRoberts So the answer would be: There is no way to describe it directly. One has to replace bit fields by <code>int</code>s and access their values using bitwise operations?"},{"owner":{"account_id":3557625,"reputation":198996,"user_id":2970947,"display_name":"Elliott Frisch"},"score":1,"creation_date":1701136624,"post_id":77560897,"comment_id":136735386,"body_markdown":"@TimRoberts Since when is `unsigned int` guaranteed to be 32 bits wide?","body":"@TimRoberts Since when is <code>unsigned int</code> guaranteed to be 32 bits wide?"},{"owner":{"account_id":2119809,"reputation":50936,"user_id":1883316,"display_name":"Tim Roberts"},"score":0,"creation_date":1701145314,"post_id":77560897,"comment_id":136735997,"body_markdown":"@czerny -- `MemoryValue.ofValueBits` allows you to specify a number of bits, but I don&#39;t know whether it allows values that are not a multiple of 8.","body":"@czerny -- <code>MemoryValue.ofValueBits</code> allows you to specify a number of bits, but I don&#39;t know whether it allows values that are not a multiple of 8."},{"owner":{"account_id":2119809,"reputation":50936,"user_id":1883316,"display_name":"Tim Roberts"},"score":0,"creation_date":1701145401,"post_id":77560897,"comment_id":136736001,"body_markdown":"@ElliottFrisch wins the pedantic prize, but we all know that the C compilers for all of the major operating systems have 32-bit `unsigned int`s.  If you&#39;re using something embedded, then be aware.","body":"@ElliottFrisch wins the pedantic prize, but we all know that the C compilers for all of the major operating systems have 32-bit <code>unsigned int</code>s.  If you&#39;re using something embedded, then be aware."},{"owner":{"account_id":3557625,"reputation":198996,"user_id":2970947,"display_name":"Elliott Frisch"},"score":0,"creation_date":1701145877,"post_id":77560897,"comment_id":136736030,"body_markdown":"@TimRoberts Sorry. I&#39;ve learned to use `uint32_t` when I need a 32-bit `unsigned int` after many *painful* debugging sessions. I miss having hair.","body":"@TimRoberts Sorry. I&#39;ve learned to use <code>uint32_t</code> when I need a 32-bit <code>unsigned int</code> after many <i>painful</i> debugging sessions. I miss having hair."},{"owner":{"account_id":321078,"reputation":15468,"user_id":639687,"accept_rate":69,"display_name":"czerny"},"score":0,"creation_date":1701219420,"post_id":77560897,"comment_id":136747753,"body_markdown":"@TimRoberts Could you please share link to `MemoryValue.ofValueBits` you&#39;ve mentioned above? I can find it neither in [current - 21 release](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/foreign/MemoryLayout.html) nor in [upcomming - 22 release](https://download.java.net/java/early_access/jdk22/docs/api/java.base/java/lang/foreign/MemoryLayout.html).","body":"@TimRoberts Could you please share link to <code>MemoryValue.ofValueBits</code> you&#39;ve mentioned above? I can find it neither in <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/foreign/MemoryLayout.html\" rel=\"nofollow noreferrer\">current - 21 release</a> nor in <a href=\"https://download.java.net/java/early_access/jdk22/docs/api/java.base/java/lang/foreign/MemoryLayout.html\" rel=\"nofollow noreferrer\">upcomming - 22 release</a>."},{"owner":{"account_id":2119809,"reputation":50936,"user_id":1883316,"display_name":"Tim Roberts"},"score":0,"creation_date":1701238842,"post_id":77560897,"comment_id":136749473,"body_markdown":"Hmm, it looks like that was the older design (16), and they now use a template instead, so arbitrary bit fields are not possible.","body":"Hmm, it looks like that was the older design (16), and they now use a template instead, so arbitrary bit fields are not possible."}],"owner":{"account_id":321078,"reputation":15468,"user_id":639687,"accept_rate":69,"display_name":"czerny"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1701135902,"creation_date":1701135902,"question_id":77560897,"body_markdown":"How can a C language `struct` using [Bit fields](https://learn.microsoft.com/en-us/cpp/c-language/c-bit-fields) be described using Java [`MemoryLayout`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/foreign/MemoryLayout.html) API (part of [JEP 442: Foreign Function &amp; Memory API (Third Preview)](https://openjdk.org/jeps/442))?\r\n\r\nFor example how to describe C `struct` declaration\r\n\r\n&lt;!-- language: lang-c --&gt;\r\n```\r\nstruct {\r\n    unsigned int first;\r\n    unsigned int second: 2;\r\n    unsigned int third: 3;\r\n};\r\n```\r\n?\r\n\r\nWhen ignoring the bit fields it would be something like\r\n\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n```\r\nMemoryLayout.structLayout(\r\n        ValueLayout.JAVA_INT.withName(&quot;first&quot;),\r\n        ValueLayout.JAVA_INT.withName(&quot;second&quot;),\r\n        ValueLayout.JAVA_INT.withName(&quot;third&quot;)\r\n);\r\n```\r\n\r\n","title":"C lang Bit fields described by MemoryLayout in Java","body":"<p>How can a C language <code>struct</code> using <a href=\"https://learn.microsoft.com/en-us/cpp/c-language/c-bit-fields\" rel=\"nofollow noreferrer\">Bit fields</a> be described using Java <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/foreign/MemoryLayout.html\" rel=\"nofollow noreferrer\"><code>MemoryLayout</code></a> API (part of <a href=\"https://openjdk.org/jeps/442\" rel=\"nofollow noreferrer\">JEP 442: Foreign Function &amp; Memory API (Third Preview)</a>)?</p>\n<p>For example how to describe C <code>struct</code> declaration</p>\n<pre class=\"lang-c prettyprint-override\"><code>struct {\n    unsigned int first;\n    unsigned int second: 2;\n    unsigned int third: 3;\n};\n</code></pre>\n<p>?</p>\n<p>When ignoring the bit fields it would be something like</p>\n<pre class=\"lang-java prettyprint-override\"><code>MemoryLayout.structLayout(\n        ValueLayout.JAVA_INT.withName(&quot;first&quot;),\n        ValueLayout.JAVA_INT.withName(&quot;second&quot;),\n        ValueLayout.JAVA_INT.withName(&quot;third&quot;)\n);\n</code></pre>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":264582,"reputation":82175,"user_id":550966,"accept_rate":97,"display_name":"Pankaj Kumar"},"score":7,"creation_date":1372237685,"post_id":17315842,"comment_id":25114699,"body_markdown":"`MainActivity mActivity = new MainActivity();\nmActivity.startChronometer();`","body":"<code>MainActivity mActivity = new MainActivity(); mActivity.startChronometer();</code>"},{"owner":{"account_id":264582,"reputation":82175,"user_id":550966,"accept_rate":97,"display_name":"Pankaj Kumar"},"score":0,"creation_date":1372237757,"post_id":17315842,"comment_id":25114744,"body_markdown":"But are you sure you are not calling non-activity functions?","body":"But are you sure you are not calling non-activity functions?"},{"owner":{"account_id":2024058,"reputation":579,"user_id":1809583,"accept_rate":28,"display_name":"shannon"},"score":0,"creation_date":1372240508,"post_id":17315842,"comment_id":25116363,"body_markdown":"I did MainActivity mActivity = new MainActivity(); mActivity.startChronometer(); but it doesn&#39;t work too. @PankajKumar","body":"I did MainActivity mActivity = new MainActivity(); mActivity.startChronometer(); but it doesn&#39;t work too. @PankajKumar"},{"owner":{"account_id":2024058,"reputation":579,"user_id":1809583,"accept_rate":28,"display_name":"shannon"},"score":0,"creation_date":1372240667,"post_id":17315842,"comment_id":25116445,"body_markdown":"May I know how can I improve on it? What is a better way of achieving the same result? @STTLCU","body":"May I know how can I improve on it? What is a better way of achieving the same result? @STTLCU"},{"owner":{"account_id":264582,"reputation":82175,"user_id":550966,"accept_rate":97,"display_name":"Pankaj Kumar"},"score":1,"creation_date":1372240921,"post_id":17315842,"comment_id":25116606,"body_markdown":"thats the reason I was asking about if you are doing some non-activity task or not. here again you will get NPE for `mChronometer`. So you should think about it","body":"thats the reason I was asking about if you are doing some non-activity task or not. here again you will get NPE for <code>mChronometer</code>. So you should think about it"},{"owner":{"account_id":2024058,"reputation":579,"user_id":1809583,"accept_rate":28,"display_name":"shannon"},"score":0,"creation_date":1372242424,"post_id":17315842,"comment_id":25117375,"body_markdown":"Yes it&#39;s a non-activity task. How can I call a non-activity task then? @PankajKumar","body":"Yes it&#39;s a non-activity task. How can I call a non-activity task then? @PankajKumar"},{"owner":{"account_id":978407,"reputation":4348,"user_id":998759,"accept_rate":100,"display_name":"STT LCU"},"score":1,"creation_date":1372242647,"post_id":17315842,"comment_id":25117500,"body_markdown":"You should have activity classes only for activity related purposes. Please define standard classes for any non-activity purposes, like chronometers. Then use those classes inside your activity as much as you need @shannon","body":"You should have activity classes only for activity related purposes. Please define standard classes for any non-activity purposes, like chronometers. Then use those classes inside your activity as much as you need @shannon"},{"owner":{"account_id":35743,"reputation":150884,"user_id":101361,"accept_rate":71,"display_name":"laalto"},"score":2,"creation_date":1407847371,"post_id":17315842,"comment_id":39365649,"body_markdown":"@PankajKumar FWIW, it&#39;s almost never a good idea to use `new` with activity classes, including this case. (Yeah, old post, got active today by someone posting a new answer.)","body":"@PankajKumar FWIW, it&#39;s almost never a good idea to use <code>new</code> with activity classes, including this case. (Yeah, old post, got active today by someone posting a new answer.)"},{"owner":{"account_id":264582,"reputation":82175,"user_id":550966,"accept_rate":97,"display_name":"Pankaj Kumar"},"score":0,"creation_date":1407852882,"post_id":17315842,"comment_id":39369481,"body_markdown":"@laalto Yes you are correct. Same reason I was trying to make sure into my second comment. Sometime it happens, many developer wrote normal class and write name with activity postfix. Thank you for your valuable comment :)","body":"@laalto Yes you are correct. Same reason I was trying to make sure into my second comment. Sometime it happens, many developer wrote normal class and write name with activity postfix. Thank you for your valuable comment :)"},{"owner":{"account_id":4233146,"reputation":903,"user_id":3767765,"display_name":"RicardoSousaDev"},"score":0,"creation_date":1552574558,"post_id":17315842,"comment_id":97069916,"body_markdown":"Hi @shannon! My answer https://stackoverflow.com/a/25260557/3767765 seems to be helping a lot of people even though it isn&#39;t the accepted answer. Can you accept it, please?","body":"Hi @shannon! My answer <a href=\"https://stackoverflow.com/a/25260557/3767765\">stackoverflow.com/a/25260557/3767765</a> seems to be helping a lot of people even though it isn&#39;t the accepted answer. Can you accept it, please?"}],"answers":[{"tags":[],"owner":{"account_id":1025295,"reputation":46067,"user_id":1034737,"accept_rate":80,"display_name":"PermGenError"},"down_vote_count":6,"up_vote_count":7,"is_accepted":false,"score":1,"last_activity_date":1372237641,"creation_date":1372237641,"answer_id":17315877,"question_id":17315842,"body_markdown":"&gt; But an error occurred which says java.lang.NullPointerException.\r\n\r\nThats because, you never initialized your MainActivity. you should initialize your object before you call its methods. \r\n\r\n    MainActivity mActivity = new MainActivity();//make sure that you pass the appropriate arguments if you have an args constructor\r\n    mActivity.startChronometer();","title":"How to call a method in MainActivity from another class?","body":"<blockquote>\n  <p>But an error occurred which says java.lang.NullPointerException.</p>\n</blockquote>\n\n<p>Thats because, you never initialized your MainActivity. you should initialize your object before you call its methods. </p>\n\n<pre><code>MainActivity mActivity = new MainActivity();//make sure that you pass the appropriate arguments if you have an args constructor\nmActivity.startChronometer();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1663845,"reputation":20579,"user_id":1531657,"accept_rate":55,"display_name":"Muhammad Aamir Ali"},"down_vote_count":7,"up_vote_count":4,"is_accepted":false,"score":-3,"last_activity_date":1372237853,"creation_date":1372237853,"answer_id":17315946,"question_id":17315842,"body_markdown":"You can make this method static.\r\n\r\n    public static void startChronometer(){\r\n            mChronometer.start();\r\n            showElapsedTime();\r\n        } \r\nyou can call this function in other class as below:\r\n\r\n    MainActivity.startChronometer();\r\n\r\nOR\r\n\r\nYou can make an object of the main class in second class like,\r\n\r\n    MainActivity mActivity = new MainActivity();\r\n    mActivity.startChronometer();\r\n","title":"How to call a method in MainActivity from another class?","body":"<p>You can make this method static.</p>\n\n<pre><code>public static void startChronometer(){\n        mChronometer.start();\n        showElapsedTime();\n    } \n</code></pre>\n\n<p>you can call this function in other class as below:</p>\n\n<pre><code>MainActivity.startChronometer();\n</code></pre>\n\n<p>OR</p>\n\n<p>You can make an object of the main class in second class like,</p>\n\n<pre><code>MainActivity mActivity = new MainActivity();\nmActivity.startChronometer();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2102673,"reputation":35121,"user_id":1869846,"accept_rate":56,"display_name":"Ruchira Gayan Ranaweera"},"down_vote_count":13,"up_vote_count":17,"is_accepted":false,"score":4,"last_activity_date":1372237913,"creation_date":1372237913,"answer_id":17315968,"question_id":17315842,"body_markdown":"Initialize it first  \r\n\r\n    MainActivity mActivity= new MainActivity();\r\n\r\nThen you can continue \r\n\r\n    mActivity.startChronometer();","title":"How to call a method in MainActivity from another class?","body":"<p>Initialize it first  </p>\n\n<pre><code>MainActivity mActivity= new MainActivity();\n</code></pre>\n\n<p>Then you can continue </p>\n\n<pre><code>mActivity.startChronometer();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":890434,"reputation":7576,"user_id":928814,"accept_rate":98,"display_name":"Avadhani Y"},"down_vote_count":4,"up_vote_count":3,"is_accepted":false,"score":-1,"last_activity_date":1372238127,"creation_date":1372238127,"answer_id":17316051,"question_id":17315842,"body_markdown":"Simply, You can make this method static as below:\r\n\r\n    public static void startChronometer(){\r\n        mChronometer.start();\r\n        showElapsedTime();\r\n    } \r\n\r\nyou can call this function in other class as below:\r\n\r\n    MainActivity.startChronometer();","title":"How to call a method in MainActivity from another class?","body":"<p>Simply, You can make this method static as below:</p>\n\n<pre><code>public static void startChronometer(){\n    mChronometer.start();\n    showElapsedTime();\n} \n</code></pre>\n\n<p>you can call this function in other class as below:</p>\n\n<pre><code>MainActivity.startChronometer();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4233146,"reputation":903,"user_id":3767765,"display_name":"RicardoSousaDev"},"down_vote_count":6,"up_vote_count":49,"is_accepted":false,"score":43,"last_activity_date":1552574781,"creation_date":1407835111,"answer_id":25260557,"question_id":17315842,"body_markdown":"You can easily call a method from any Fragment inside your Activity by doing a cast like this:\r\n\r\n**Java**\r\n\r\n    ((MainActivity)getActivity()).startChronometer();\r\n\r\n**Kotlin**\r\n\r\n    (activity as MainActivity).startChronometer()\r\n\r\n\r\nJust remember to make sure this Fragment&#39;s activity is in fact MainActivity before you do it.\r\n\r\nHope this helps!","title":"How to call a method in MainActivity from another class?","body":"<p>You can easily call a method from any Fragment inside your Activity by doing a cast like this:</p>\n\n<p><strong>Java</strong></p>\n\n<pre><code>((MainActivity)getActivity()).startChronometer();\n</code></pre>\n\n<p><strong>Kotlin</strong></p>\n\n<pre><code>(activity as MainActivity).startChronometer()\n</code></pre>\n\n<p>Just remember to make sure this Fragment's activity is in fact MainActivity before you do it.</p>\n\n<p>Hope this helps!</p>\n"},{"tags":[],"owner":{"account_id":10039813,"reputation":71,"user_id":7423034,"display_name":"Akash Arora"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1492974051,"creation_date":1484738602,"answer_id":41718161,"question_id":17315842,"body_markdown":"Use this code in sub Fragment of `MainActivity` to call the method on it. \r\n\r\n    ((MainActivity) getActivity()).startChronometer();","title":"How to call a method in MainActivity from another class?","body":"<p>Use this code in sub Fragment of <code>MainActivity</code> to call the method on it. </p>\n\n<pre><code>((MainActivity) getActivity()).startChronometer();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8443220,"reputation":69,"user_id":6334918,"display_name":"Tmthetom"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1510161037,"creation_date":1510160552,"answer_id":47185553,"question_id":17315842,"body_markdown":"You have to pass instance of MainActivity into another class, then you can call everything public (in MainActivity) from everywhere.\r\n\r\n**MainActivity.java**\r\n\r\n    public class MainActivity extends AppCompatActivity {\r\n\r\n        // Instance of AnotherClass for future use\r\n        private AnotherClass anotherClass;\r\n\r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            // Create new instance of AnotherClass and\r\n            // pass instance of MainActivity by &quot;this&quot;\r\n            anotherClass = new AnotherClass(this);\r\n        }\r\n\r\n        // Method you want to call from another class\r\n        public void startChronometer(){\r\n            ...\r\n        }\r\n    }\r\n\r\n**AnotherClass.java**\r\n\r\n    public class AnotherClass {\r\n\r\n        // Main class instance\r\n        private MainActivity mainActivity;  \r\n\r\n        // Constructor\r\n        public AnotherClass(MainActivity activity) {\r\n\r\n            // Save instance of main class for future use\r\n            mainActivity = activity;  \r\n\r\n            // Call method in MainActivity\r\n            mainActivity.startChronometer();\r\n        }\r\n    }","title":"How to call a method in MainActivity from another class?","body":"<p>You have to pass instance of MainActivity into another class, then you can call everything public (in MainActivity) from everywhere.</p>\n\n<p><strong>MainActivity.java</strong></p>\n\n<pre><code>public class MainActivity extends AppCompatActivity {\n\n    // Instance of AnotherClass for future use\n    private AnotherClass anotherClass;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        // Create new instance of AnotherClass and\n        // pass instance of MainActivity by \"this\"\n        anotherClass = new AnotherClass(this);\n    }\n\n    // Method you want to call from another class\n    public void startChronometer(){\n        ...\n    }\n}\n</code></pre>\n\n<p><strong>AnotherClass.java</strong></p>\n\n<pre><code>public class AnotherClass {\n\n    // Main class instance\n    private MainActivity mainActivity;  \n\n    // Constructor\n    public AnotherClass(MainActivity activity) {\n\n        // Save instance of main class for future use\n        mainActivity = activity;  \n\n        // Call method in MainActivity\n        mainActivity.startChronometer();\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3642523,"reputation":4487,"user_id":3036320,"display_name":"Ahamadullah Saikat"},"down_vote_count":3,"up_vote_count":33,"is_accepted":false,"score":30,"last_activity_date":1528482787,"creation_date":1510427657,"answer_id":47241833,"question_id":17315842,"body_markdown":"***MainActivity.java***\r\n\r\n    public class MainActivity extends AppCompatActivity {\r\n    \r\n        private static MainActivity instance;\r\n    \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_main);\r\n            instance = this;\r\n        }\r\n    \r\n        public static MainActivity getInstance() {\r\n            return instance;\r\n        }\r\n    \r\n        public void myMethod() {\r\n           // do something...\r\n        }\r\n    )\r\n\r\n***AnotherClass.java***\r\n    \r\n    public Class AnotherClass() {\r\n         // call this method\r\n         MainActivity.getInstance().myMethod();\r\n    }","title":"How to call a method in MainActivity from another class?","body":"<p><strong><em>MainActivity.java</em></strong></p>\n\n<pre><code>public class MainActivity extends AppCompatActivity {\n\n    private static MainActivity instance;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        instance = this;\n    }\n\n    public static MainActivity getInstance() {\n        return instance;\n    }\n\n    public void myMethod() {\n       // do something...\n    }\n)\n</code></pre>\n\n<p><strong><em>AnotherClass.java</em></strong></p>\n\n<pre><code>public Class AnotherClass() {\n     // call this method\n     MainActivity.getInstance().myMethod();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10592234,"reputation":776,"user_id":7802372,"accept_rate":50,"display_name":"f.trajkovski"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1520332318,"creation_date":1511942928,"answer_id":47547886,"question_id":17315842,"body_markdown":"What i have done and it works is create an instance in the MainActivity and getter for that instance:\r\n\r\n   \r\n\r\n     public class MainActivity extends AbstractMainActivity {\r\n        private static MainActivity mInstanceActivity;\r\n        public static MainActivity getmInstanceActivity() {\r\n        return mInstanceActivity;\r\n        }\r\n\r\nAnd the in the onCreate method just point to that activity:\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n    mInstanceActivity = this;\r\n    }\r\n\r\nAnd in onDestroy you should set this instance to null:\r\n\r\n    @Override\r\n    protected void onDestroy() {\r\n        super.onDestroy();\r\n        mInstanceActivity = null;\r\n    }\r\n\r\nLater you can call every method in whatever class you want:\r\n    \r\n    MainActivity.getmInstanceActivity().yourMethod();\r\n","title":"How to call a method in MainActivity from another class?","body":"<p>What i have done and it works is create an instance in the MainActivity and getter for that instance:</p>\n\n<pre><code> public class MainActivity extends AbstractMainActivity {\n    private static MainActivity mInstanceActivity;\n    public static MainActivity getmInstanceActivity() {\n    return mInstanceActivity;\n    }\n</code></pre>\n\n<p>And the in the onCreate method just point to that activity:</p>\n\n<pre><code>@Override\nprotected void onCreate(Bundle savedInstanceState) {\nmInstanceActivity = this;\n}\n</code></pre>\n\n<p>And in onDestroy you should set this instance to null:</p>\n\n<pre><code>@Override\nprotected void onDestroy() {\n    super.onDestroy();\n    mInstanceActivity = null;\n}\n</code></pre>\n\n<p>Later you can call every method in whatever class you want:</p>\n\n<pre><code>MainActivity.getmInstanceActivity().yourMethod();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4583701,"reputation":209,"user_id":3719104,"display_name":"Steve Marcus"},"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1585632339,"creation_date":1585632339,"answer_id":60943946,"question_id":17315842,"body_markdown":"What I have done with no memory leaks or lint warnings is to use @f.trajkovski&#39;s method, but instead of using `MainActivity`, use `WeakReference&lt;MainActivity&gt;` instead.\r\n\r\n    public class MainActivity extends AppCompatActivity {\r\n    public static WeakReference&lt;MainActivity&gt; weakActivity;\r\n    // etc..\r\n     public static MainActivity getmInstanceActivity() {\r\n        return weakActivity.get();\r\n    }\r\n    }\r\n\r\nThen in MainActivity OnCreate()\r\n\r\n    weakActivity = new WeakReference&lt;&gt;(MainActivity.this);\r\n\r\nThen in another class\r\n\r\n    MainActivity.getmInstanceActivity().yourMethod();\r\n\r\nWorks like a charm","title":"How to call a method in MainActivity from another class?","body":"<p>What I have done with no memory leaks or lint warnings is to use @f.trajkovski's method, but instead of using <code>MainActivity</code>, use <code>WeakReference&lt;MainActivity&gt;</code> instead.</p>\n\n<pre><code>public class MainActivity extends AppCompatActivity {\npublic static WeakReference&lt;MainActivity&gt; weakActivity;\n// etc..\n public static MainActivity getmInstanceActivity() {\n    return weakActivity.get();\n}\n}\n</code></pre>\n\n<p>Then in MainActivity OnCreate()</p>\n\n<pre><code>weakActivity = new WeakReference&lt;&gt;(MainActivity.this);\n</code></pre>\n\n<p>Then in another class</p>\n\n<pre><code>MainActivity.getmInstanceActivity().yourMethod();\n</code></pre>\n\n<p>Works like a charm</p>\n"},{"tags":[],"owner":{"account_id":22499202,"reputation":1,"user_id":16695739,"display_name":"Ashikh v u"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1655802261,"creation_date":1630505283,"answer_id":69015361,"question_id":17315842,"body_markdown":"Easy method\r\n\r\nUse &quot;static&quot; keyword just like this\r\n\r\n    public static void startChronometer()\r\n    {\r\n      // Your code\r\n    }\r\n\r\nThen call method from your other class like this\r\n\r\n    MainActivity.startChronometer();\r\n\r\nHope this work thank you\r\n\r\n\r\n\r\n","title":"How to call a method in MainActivity from another class?","body":"<p>Easy method</p>\n<p>Use &quot;static&quot; keyword just like this</p>\n<pre><code>public static void startChronometer()\n{\n  // Your code\n}\n</code></pre>\n<p>Then call method from your other class like this</p>\n<pre><code>MainActivity.startChronometer();\n</code></pre>\n<p>Hope this work thank you</p>\n"},{"tags":[],"owner":{"account_id":12667897,"reputation":514,"user_id":9206488,"display_name":"Raymo111"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691033696,"creation_date":1691033696,"answer_id":76824744,"question_id":17315842,"body_markdown":"In Kotlin, if passing `MainActivity` as a `Context` into a fragment, you can also do:\r\n```kotlin\r\n(context as MainActivity).startChronometer()\r\n```\r\nto cast context to MainActivity and before using it.","title":"How to call a method in MainActivity from another class?","body":"<p>In Kotlin, if passing <code>MainActivity</code> as a <code>Context</code> into a fragment, you can also do:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>(context as MainActivity).startChronometer()\n</code></pre>\n<p>to cast context to MainActivity and before using it.</p>\n"},{"tags":[],"owner":{"account_id":29232909,"reputation":1,"user_id":22396163,"display_name":"Aram Saadollah"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701135777,"creation_date":1701135777,"answer_id":77560891,"question_id":17315842,"body_markdown":"i personally would take in the context as an argument when instantiating the OtherClass inside MainActivity, and inside the OtherClass, explicitly cast it into MainActivity type for whenever i need it.\r\n\r\ninside MainActivity:\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        OtherClass otherClass = new OtherClass(this);\r\n    }\r\n\r\ninside OtherClass:\r\n\r\n    public class OtherClass {\r\n       private Context context;\r\n\r\n       public OtherClass(Context context) {\r\n           this.context = context;\r\n       }\r\n\r\n       public whateverMethod() {\r\n           ((MainActivity) context).startChronometer();\r\n       }\r\n    }\r\n    ","title":"How to call a method in MainActivity from another class?","body":"<p>i personally would take in the context as an argument when instantiating the OtherClass inside MainActivity, and inside the OtherClass, explicitly cast it into MainActivity type for whenever i need it.</p>\n<p>inside MainActivity:</p>\n<pre><code>@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_main);\n\n    OtherClass otherClass = new OtherClass(this);\n}\n</code></pre>\n<p>inside OtherClass:</p>\n<pre><code>public class OtherClass {\n   private Context context;\n\n   public OtherClass(Context context) {\n       this.context = context;\n   }\n\n   public whateverMethod() {\n       ((MainActivity) context).startChronometer();\n   }\n}\n</code></pre>\n"}],"owner":{"account_id":2024058,"reputation":579,"user_id":1809583,"accept_rate":28,"display_name":"shannon"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":150392,"favorite_count":0,"down_vote_count":3,"up_vote_count":28,"answer_count":13,"score":25,"last_activity_date":1701135777,"creation_date":1372237526,"question_id":17315842,"body_markdown":"How do I call the method `startChronometer` in another class when the method is declared inside the main activity? \r\n\r\nInside `MainActivity`: \r\n\r\n    public void startChronometer() {\r\n    \tmChronometer.start();\r\n    \tshowElapsedTime();\r\n    }\r\n\r\n\r\nInside another class, I tried to do this:\r\n\r\n    MainActivity mActivity;\r\n    mActivity.startChronometer();\r\n\r\n\r\nBut an error occurred which said: \r\n\r\n    java.lang.NullPointerException. \r\n\r\nMay I know what more I need to add to the code? ","title":"How to call a method in MainActivity from another class?","body":"<p>How do I call the method <code>startChronometer</code> in another class when the method is declared inside the main activity? </p>\n\n<p>Inside <code>MainActivity</code>: </p>\n\n<pre><code>public void startChronometer() {\n    mChronometer.start();\n    showElapsedTime();\n}\n</code></pre>\n\n<p>Inside another class, I tried to do this:</p>\n\n<pre><code>MainActivity mActivity;\nmActivity.startChronometer();\n</code></pre>\n\n<p>But an error occurred which said: </p>\n\n<pre><code>java.lang.NullPointerException. \n</code></pre>\n\n<p>May I know what more I need to add to the code? </p>\n"},{"tags":["java","spring","azure","single-sign-on","pfx"],"comments":[{"owner":{"account_id":5108665,"reputation":17,"user_id":4096008,"accept_rate":0,"display_name":"victorDo"},"score":0,"creation_date":1701139726,"post_id":77560889,"comment_id":136735621,"body_markdown":"please help me on this.","body":"please help me on this."},{"owner":{"account_id":5108665,"reputation":17,"user_id":4096008,"accept_rate":0,"display_name":"victorDo"},"score":0,"creation_date":1701315905,"post_id":77560889,"comment_id":136761513,"body_markdown":"please help me. thanks,","body":"please help me. thanks,"}],"owner":{"account_id":5108665,"reputation":17,"user_id":4096008,"accept_rate":0,"display_name":"victorDo"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":0,"score":-1,"last_activity_date":1701135687,"creation_date":1701135687,"question_id":77560889,"body_markdown":"My code is from this tutorial https://developer.okta.com/blog/2022/08/05/spring-boot-saml\r\n\r\ni can create private key and cert  .crt, however in Microsoft Azure, it is allowed to upload .pfx file only. i try to create .pfx from (private key + .crt), but when i upload .pfx, it is not working when logout.\r\n\r\nPlease help on this\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/4g5hk.png","title":"Springboot3.0 Saml2 integrated with Microsoft Azure SAML SSO - how to generate private key and cert - .pfx cert","body":"<p>My code is from this tutorial <a href=\"https://developer.okta.com/blog/2022/08/05/spring-boot-saml\" rel=\"nofollow noreferrer\">https://developer.okta.com/blog/2022/08/05/spring-boot-saml</a></p>\n<p>i can create private key and cert  .crt, however in Microsoft Azure, it is allowed to upload .pfx file only. i try to create .pfx from (private key + .crt), but when i upload .pfx, it is not working when logout.</p>\n<p>Please help on this</p>\n<p><a href=\"https://i.stack.imgur.com/4g5hk.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4g5hk.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","spring","openssl","smtp","tomcat8"],"owner":{"account_id":29842711,"reputation":1,"user_id":22870489,"display_name":"OzanD"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1701135487,"creation_date":1701091629,"question_id":77557278,"body_markdown":"Recently, I updated my website by installing Tomcat 8.0.3 on Ubuntu 22.04. I was only having trouble sending emails with Spring Boot. I tried Gmail, Outlook and Yandex to send via SMTP and encountered the same problem in all of them. While emails were sent smoothly with localhost, when I uploaded the WAR file, email sending requests were timing out. While researching this issue with Outlook settings configured, I suspected that Openssl was not able to connect via IPv6. Thereupon, I disabled the IPv6 connection by making changes to /etc/sysctl.conf. Openssl started to connect with both IPv6 and IPv4, but this time I encountered the 503 Service Unavailable error. I thought that resetting the /etc/sysctl.conf settings would fix this, but it didn&#39;t. Tomcat started to give errors at startup due to a problem that I thought was caused by the Spring application.\r\n\r\n```\r\n$ tail /opt/tomcat/logs/catalina.out\r\nSEVERE [ContainerBackgroundProcessor[StandardEngine[Catalina]]] org.apache.catalina.loader.WebappClassLoader.clearReferencesJdbc The web application [/website] registered the JDBC driver [org.sqlite.JDBC] but failed to unregister it when the web application was stopped. To prevent a memory leak, the JDBC Driver has been forcibly unregistered.\r\nINFO [localhost-startStop-8] org.apache.catalina.startup.HostConfig.deployDirectory Deploying web application directory /opt/tomcat/webapps/ROOT\r\nWARNING [localhost-startStop-8] org.apache.catalina.startup.SetContextPropertiesRule.begin [SetContextPropertiesRule]{Context} Setting property &#39;antiJARLocking&#39; to &#39;true&#39; did not find a matching property.\r\nlog4j:WARN No appenders could be found for logger (org.springframework.web.context.ContextLoader).\r\nlog4j:WARN Please initialize the log4j system properly.\r\nSLF4J: Failed to load class &quot;org.slf4j.impl.StaticLoggerBinder&quot;.\r\nSLF4J: Defaulting to no-operation (NOP) logger implementation\r\nSLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details.\r\nINFO [ContainerBackgroundProcessor[StandardEngine[Catalina]]] org.apache.catalina.startup.HostConfig.undeploy Undeploying context [/2]\r\nSEVERE [ContainerBackgroundProcessor[StandardEngine[Catalina]]] org.apache.catalina.loader.WebappClassLoader.clearReferencesJdbc The web application [/2] registered the JDBC driver [org.sqlite.JDBC] but failed to unregister it when the web application was stopped. To prevent a memory leak, the JDBC Driver has been forcibly unregistered.\r\n```\r\n\r\n\r\nThese are the statuses of the ports:\r\n\r\n```\r\n$ sudo netstat -anltp | grep LISTEN\r\ntcp        0      0 127.0.0.53:53           0.0.0.0:*               LISTEN      229/systemd-resolve\r\ntcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN      361039/sshd: /usr/s\r\ntcp        0      0 127.0.0.1:6010          0.0.0.0:*               LISTEN      520099/sshd: user@p\r\ntcp        0      0 127.0.0.1:6011          0.0.0.0:*               LISTEN      520146/sshd: user@p\r\ntcp        0      0 127.0.0.1:6012          0.0.0.0:*               LISTEN      520207/sshd: user@p\r\ntcp        0      0 127.0.0.1:6013          0.0.0.0:*               LISTEN      520317/sshd: user@p\r\ntcp6       0      0 :::8080                 :::*                    LISTEN      520261/java\r\ntcp6       0      0 :::80                   :::*                    LISTEN      370771/apache2\r\ntcp6       0      0 :::22                   :::*                    LISTEN      361039/sshd: /usr/s\r\ntcp6       0      0 ::1:6010                :::*                    LISTEN      520099/sshd: user@p\r\ntcp6       1      0 :::8443                 :::*                    LISTEN      520261/java\r\ntcp6       0      0 ::1:6011                :::*                    LISTEN      520146/sshd: user@p\r\ntcp6       0      0 :::443                  :::*                    LISTEN      370771/apache2\r\ntcp6       0      0 ::1:6012                :::*                    LISTEN      520207/sshd: user@p\r\ntcp6       0      0 ::1:6013                :::*                    LISTEN      520317/sshd: user@p\r\ntcp6       0      0 127.0.0.1:8005          :::*                    LISTEN      520261/java\r\ntcp6       0      0 ::1:8009                :::*                    LISTEN      520261/java\r\n```\r\n\r\nHow can I fix this situation? Any idea will be appreciated.\r\n\r\n\r\nInstalled versions:\r\nSpring/4.0.1, openjdk/1.8.0_382, Apache/2.4.52, OpenSSL/3.0.2\r\n\r\n**UPDATE:**\r\nMy project was prepared in Tomcat 7. I found out that the antiJARLocking attribute has been replaced by antiResourceLocking in Tomcat 8. When I made the change in the context.xml file, Tomcat started without any problems. Then I made soft reboot of my vps server. Thus, the website became online.\r\n","title":"Disable IPv6 caused Tomcat startup failure","body":"<p>Recently, I updated my website by installing Tomcat 8.0.3 on Ubuntu 22.04. I was only having trouble sending emails with Spring Boot. I tried Gmail, Outlook and Yandex to send via SMTP and encountered the same problem in all of them. While emails were sent smoothly with localhost, when I uploaded the WAR file, email sending requests were timing out. While researching this issue with Outlook settings configured, I suspected that Openssl was not able to connect via IPv6. Thereupon, I disabled the IPv6 connection by making changes to /etc/sysctl.conf. Openssl started to connect with both IPv6 and IPv4, but this time I encountered the 503 Service Unavailable error. I thought that resetting the /etc/sysctl.conf settings would fix this, but it didn't. Tomcat started to give errors at startup due to a problem that I thought was caused by the Spring application.</p>\n<pre><code>$ tail /opt/tomcat/logs/catalina.out\nSEVERE [ContainerBackgroundProcessor[StandardEngine[Catalina]]] org.apache.catalina.loader.WebappClassLoader.clearReferencesJdbc The web application [/website] registered the JDBC driver [org.sqlite.JDBC] but failed to unregister it when the web application was stopped. To prevent a memory leak, the JDBC Driver has been forcibly unregistered.\nINFO [localhost-startStop-8] org.apache.catalina.startup.HostConfig.deployDirectory Deploying web application directory /opt/tomcat/webapps/ROOT\nWARNING [localhost-startStop-8] org.apache.catalina.startup.SetContextPropertiesRule.begin [SetContextPropertiesRule]{Context} Setting property 'antiJARLocking' to 'true' did not find a matching property.\nlog4j:WARN No appenders could be found for logger (org.springframework.web.context.ContextLoader).\nlog4j:WARN Please initialize the log4j system properly.\nSLF4J: Failed to load class &quot;org.slf4j.impl.StaticLoggerBinder&quot;.\nSLF4J: Defaulting to no-operation (NOP) logger implementation\nSLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details.\nINFO [ContainerBackgroundProcessor[StandardEngine[Catalina]]] org.apache.catalina.startup.HostConfig.undeploy Undeploying context [/2]\nSEVERE [ContainerBackgroundProcessor[StandardEngine[Catalina]]] org.apache.catalina.loader.WebappClassLoader.clearReferencesJdbc The web application [/2] registered the JDBC driver [org.sqlite.JDBC] but failed to unregister it when the web application was stopped. To prevent a memory leak, the JDBC Driver has been forcibly unregistered.\n</code></pre>\n<p>These are the statuses of the ports:</p>\n<pre><code>$ sudo netstat -anltp | grep LISTEN\ntcp        0      0 127.0.0.53:53           0.0.0.0:*               LISTEN      229/systemd-resolve\ntcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN      361039/sshd: /usr/s\ntcp        0      0 127.0.0.1:6010          0.0.0.0:*               LISTEN      520099/sshd: user@p\ntcp        0      0 127.0.0.1:6011          0.0.0.0:*               LISTEN      520146/sshd: user@p\ntcp        0      0 127.0.0.1:6012          0.0.0.0:*               LISTEN      520207/sshd: user@p\ntcp        0      0 127.0.0.1:6013          0.0.0.0:*               LISTEN      520317/sshd: user@p\ntcp6       0      0 :::8080                 :::*                    LISTEN      520261/java\ntcp6       0      0 :::80                   :::*                    LISTEN      370771/apache2\ntcp6       0      0 :::22                   :::*                    LISTEN      361039/sshd: /usr/s\ntcp6       0      0 ::1:6010                :::*                    LISTEN      520099/sshd: user@p\ntcp6       1      0 :::8443                 :::*                    LISTEN      520261/java\ntcp6       0      0 ::1:6011                :::*                    LISTEN      520146/sshd: user@p\ntcp6       0      0 :::443                  :::*                    LISTEN      370771/apache2\ntcp6       0      0 ::1:6012                :::*                    LISTEN      520207/sshd: user@p\ntcp6       0      0 ::1:6013                :::*                    LISTEN      520317/sshd: user@p\ntcp6       0      0 127.0.0.1:8005          :::*                    LISTEN      520261/java\ntcp6       0      0 ::1:8009                :::*                    LISTEN      520261/java\n</code></pre>\n<p>How can I fix this situation? Any idea will be appreciated.</p>\n<p>Installed versions:\nSpring/4.0.1, openjdk/1.8.0_382, Apache/2.4.52, OpenSSL/3.0.2</p>\n<p><strong>UPDATE:</strong>\nMy project was prepared in Tomcat 7. I found out that the antiJARLocking attribute has been replaced by antiResourceLocking in Tomcat 8. When I made the change in the context.xml file, Tomcat started without any problems. Then I made soft reboot of my vps server. Thus, the website became online.</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":4279913,"reputation":3623,"user_id":3499626,"accept_rate":89,"display_name":"jhamon"},"score":1,"creation_date":1701102747,"post_id":77558414,"comment_id":136730626,"body_markdown":"add the relevant code as text, not as image","body":"add the relevant code as text, not as image"}],"owner":{"account_id":15278308,"reputation":1,"user_id":11023432,"display_name":"Harizah Syawal"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":2,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1701133235,"creation_date":1701102100,"question_id":77558414,"body_markdown":"I want to return response/data from a vending machine to my Android app (Java). The weird things is whenever I debug and put breakpoint, the message/data returns in one full line, but if I run app in normal way without debug it returns separately. Expected result is FinalMessages : 1300001838FA.\r\n\r\nShows below the picture\r\n\r\n     @Override\r\n    public void onSerialRead(byte[] data) {\r\n        ArrayDeque&lt;byte[]&gt; datas = new ArrayDeque&lt;&gt;();\r\n        datas.add(data);\r\n        receivedMessage(String.valueOf(datas));\r\n    }\r\n\r\n    public void onSerialRead(ArrayDeque&lt;byte[]&gt; datas) {\r\n        StringBuilder concatenatedMsg = new StringBuilder();\r\n        for (byte[] data : datas) {\r\n            String msg = new String(data);\r\n\r\n            // Append the message to the StringBuilder\r\n            concatenatedMsg.append(msg);\r\n        }\r\n        receivedMessage(String.valueOf(concatenatedMsg));\r\n    }\r\n     private void receivedMessage(String datas) {\r\n        // After the loop, check the concatenated message\r\n        String finalMessage = datas.toString();\r\n        if (finalMessage.contains(&quot;1300&quot;)||finalMessage.contains(&quot;130&quot;)||finalMessage.contains(&quot;300&quot;)) {\r\n            handlePaymentSale();\r\n        } else {\r\n            Log.d(TAG, &quot;&quot;);\r\n        }\r\n        Log.d(TAG, &quot;FINAL MESSAGES&quot;+finalMessage);\r\n    }\r\n\r\n      This is from log looks like, it supposed to be FINAL \r\n      MESSAGES36303123.. Straight in one line \r\n      D  FINAL MESSAGES363\r\n      D  \r\n      D  FINAL MESSAGES63\r\n      D  \r\n      D  FINAL MESSAGES0\r\n      D  \r\n      D  FINAL MESSAGES3\r\n\r\nI have tried a lot, like do a looping and concatenating. The result is still the same.","title":"How to fix data serial not read and return consistently","body":"<p>I want to return response/data from a vending machine to my Android app (Java). The weird things is whenever I debug and put breakpoint, the message/data returns in one full line, but if I run app in normal way without debug it returns separately. Expected result is FinalMessages : 1300001838FA.</p>\n<p>Shows below the picture</p>\n<pre><code> @Override\npublic void onSerialRead(byte[] data) {\n    ArrayDeque&lt;byte[]&gt; datas = new ArrayDeque&lt;&gt;();\n    datas.add(data);\n    receivedMessage(String.valueOf(datas));\n}\n\npublic void onSerialRead(ArrayDeque&lt;byte[]&gt; datas) {\n    StringBuilder concatenatedMsg = new StringBuilder();\n    for (byte[] data : datas) {\n        String msg = new String(data);\n\n        // Append the message to the StringBuilder\n        concatenatedMsg.append(msg);\n    }\n    receivedMessage(String.valueOf(concatenatedMsg));\n}\n private void receivedMessage(String datas) {\n    // After the loop, check the concatenated message\n    String finalMessage = datas.toString();\n    if (finalMessage.contains(&quot;1300&quot;)||finalMessage.contains(&quot;130&quot;)||finalMessage.contains(&quot;300&quot;)) {\n        handlePaymentSale();\n    } else {\n        Log.d(TAG, &quot;&quot;);\n    }\n    Log.d(TAG, &quot;FINAL MESSAGES&quot;+finalMessage);\n}\n\n  This is from log looks like, it supposed to be FINAL \n  MESSAGES36303123.. Straight in one line \n  D  FINAL MESSAGES363\n  D  \n  D  FINAL MESSAGES63\n  D  \n  D  FINAL MESSAGES0\n  D  \n  D  FINAL MESSAGES3\n</code></pre>\n<p>I have tried a lot, like do a looping and concatenating. The result is still the same.</p>\n"},{"tags":["java","user-interface","parameters","parameter-passing"],"comments":[{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":2,"creation_date":1701131859,"post_id":77560709,"comment_id":136734958,"body_markdown":"The simple answer is to make use of appropriate design principles, like [dependency injection](https://www.google.com/search?q=djava+dependency+injection) and [model-view-controller](https://www.google.com/search?q=java+model+view+controller) (emphasis on model), [observer pattern](https://www.google.com/search?q=java+observer+pattern) and [Passing Information to a Method or a Constructor](https://docs.oracle.com/javase/tutorial/java/javaOO/arguments.html) as some starting points","body":"The simple answer is to make use of appropriate design principles, like <a href=\"https://www.google.com/search?q=djava+dependency+injection\" rel=\"nofollow noreferrer\">dependency injection</a> and <a href=\"https://www.google.com/search?q=java+model+view+controller\" rel=\"nofollow noreferrer\">model-view-controller</a> (emphasis on model), <a href=\"https://www.google.com/search?q=java+observer+pattern\" rel=\"nofollow noreferrer\">observer pattern</a> and <a href=\"https://docs.oracle.com/javase/tutorial/java/javaOO/arguments.html\" rel=\"nofollow noreferrer\">Passing Information to a Method or a Constructor</a> as some starting points"},{"owner":{"account_id":247613,"reputation":284087,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":2,"creation_date":1701132067,"post_id":77560709,"comment_id":136734984,"body_markdown":"Side note: your `InventoryGUI` class really should be a standard OOPs class, with instance fields and methods, a constructor (or more) and most of that code *out* of the static main method. Static isn&#39;t your friend, and you will want to keep most code out of the static world.","body":"Side note: your <code>InventoryGUI</code> class really should be a standard OOPs class, with instance fields and methods, a constructor (or more) and most of that code <i>out</i> of the static main method. Static isn&#39;t your friend, and you will want to keep most code out of the static world."}],"owner":{"account_id":30008291,"reputation":1,"user_id":22996584,"display_name":"numndz"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":51,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1701868320,"answer_count":0,"score":-1,"last_activity_date":1701131563,"creation_date":1701131454,"question_id":77560709,"body_markdown":"I&#39;m making a Pokemon inspired game where GUI is implemented. Let&#39;s say I have captured creatures stored in my MainMenuGUI class. I need those captured creatures (which are stored into an ArrayList called capturedCreatures implemented by my Inventory.java class) to be used in my other GUI classes such as InventoryGUI (different from Inventory.java), which will then be used in CapturedCreaturesGUI (inside the InventoryGUI class). \r\n\r\nI don&#39;t know what to do as passing down parameters (e.g. InventoryGUI (Inventory inventory)) does not seem to be the solution. \r\n\r\n\r\n\r\n[This is an example of adding a creature to my inventory in the MainMenuGUI class](https://i.stack.imgur.com/04Ig3.png)\r\n\r\n[This is the InventoryGUI button in MainMenuGUI](https://i.stack.imgur.com/bdR46.png)\r\n\r\nThis is what my InventoryGUI class looks like\r\n```\r\npackage Pokemon;\r\n\r\nimport javax.swing.*;\r\nimport java.awt.*;\r\n\r\npublic class InventoryGUI {\r\n\r\n    public static void main(String[] args) {\r\n\r\n            JFrame frame = new JFrame(&quot;Creature Inventory&quot;);\r\n            frame.setTitle(&quot;Creature Inventory&quot;);\r\n            frame.setSize(900, 700);\r\n            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n            frame.setResizable(false);\r\n\r\n            JPanel panel = new JPanel();\r\n            panel.setLayout(new BoxLayout(panel, BoxLayout.Y_AXIS));\r\n            panel.setBorder(BorderFactory.createEmptyBorder(20, 100, 20, 100));\r\n\r\n            JButton CreatureIndexEL1Button = new JButton(&quot;View Creature Index (Evolution Level 1)&quot;);\r\n            CreatureIndexEL1Button.setAlignmentX(Component.CENTER_ALIGNMENT);\r\n            CreatureIndexEL1Button.setMaximumSize(new Dimension(500, 120));\r\n\r\n            JButton CreatureIndexEL2Button = new JButton(&quot;View Creature Index (Evolution Level 2)&quot;);\r\n            CreatureIndexEL2Button.setAlignmentX(Component.CENTER_ALIGNMENT);\r\n            CreatureIndexEL2Button.setMaximumSize(new Dimension(500, 120));\r\n\r\n            JButton CreatureIndexEL3Button = new JButton(&quot;View Creature Index (Evolution Level 3)&quot;);\r\n            CreatureIndexEL3Button.setAlignmentX(Component.CENTER_ALIGNMENT);\r\n            CreatureIndexEL3Button.setMaximumSize(new Dimension(500, 120));\r\n\r\n            JButton CapturedCreaturesButton = new JButton(&quot;View Captured Creatures&quot;);\r\n            CapturedCreaturesButton.setAlignmentX(Component.CENTER_ALIGNMENT);\r\n            CapturedCreaturesButton.setMaximumSize(new Dimension(500, 120));\r\n\r\n            JButton ActiveCreatureButton = new JButton(&quot;View Active Creature&quot;);\r\n            ActiveCreatureButton.setAlignmentX(Component.CENTER_ALIGNMENT);\r\n            ActiveCreatureButton.setMaximumSize(new Dimension(500, 120));\r\n\r\n            JButton SwapActiveCreatureButton = new JButton(&quot;Swap Active Creature&quot;);\r\n            SwapActiveCreatureButton.setAlignmentX(Component.CENTER_ALIGNMENT);\r\n            SwapActiveCreatureButton.setMaximumSize(new Dimension(500, 120));\r\n\r\n            JButton ReturnToMainMenuButton = new JButton(&quot;Return to Main Menu&quot;);\r\n            ReturnToMainMenuButton.setAlignmentX(Component.CENTER_ALIGNMENT);\r\n            ReturnToMainMenuButton.setMaximumSize(new Dimension(500, 120));\r\n\r\n\r\n            // Add action listeners for the buttons (implement functionality as needed)\r\n            CreatureIndexEL1Button.addActionListener(e -&gt; {\r\n                new CreatureIndexEL1().setVisible(true);\r\n            });\r\n\r\n            CreatureIndexEL2Button.addActionListener(e -&gt; {\r\n                new CreatureIndexEL2().setVisible(true);\r\n            });\r\n\r\n            CreatureIndexEL3Button.addActionListener(e -&gt; {\r\n                new CreatureIndexEL3().setVisible(true);\r\n            });\r\n\r\n            CapturedCreaturesButton.addActionListener(e -&gt; {\r\n                //inventory.displayCapturedCreatures();\r\n                new CapturedCreaturesGUI().setVisible(true);\r\n            });\r\n\r\n            ActiveCreatureButton.addActionListener(e -&gt; {\r\n            });\r\n\r\n            SwapActiveCreatureButton.addActionListener(e -&gt; {\r\n            });\r\n\r\n\r\n            panel.add(CreatureIndexEL1Button);\r\n            panel.add(CreatureIndexEL2Button);\r\n            panel.add(CreatureIndexEL3Button);\r\n            panel.add(CapturedCreaturesButton);\r\n            panel.add(ActiveCreatureButton);\r\n            panel.add(SwapActiveCreatureButton);\r\n            panel.add(ReturnToMainMenuButton);\r\n\r\n            frame.add(panel);\r\n            frame.setVisible(true);\r\n        }\r\n}\r\n\r\n```\r\n\r\nAnd then this is what my CapturedCreaturesGUI looks like\r\n\r\n```\r\npackage Pokemon;\r\n\r\nimport javax.swing.*;\r\nimport java.awt.*;\r\nimport java.util.ArrayList;\r\n\r\npublic class CapturedCreaturesGUI extends JFrame {\r\n    private JPanel CapturedCreaturesPanel;\r\n    public void createCapturedCreaturesPanel() {\r\n        CapturedCreaturesPanel = new JPanel(new BorderLayout());\r\n        CapturedCreaturesPanel.setLayout(new BoxLayout(CapturedCreaturesPanel, BoxLayout.Y_AXIS));\r\n\r\n        // Add a margin using EmptyBorder\r\n        int topMargin = 50;\r\n        int leftMargin = 20;\r\n        int bottomMargin = 20;\r\n        int rightMargin = 20;\r\n        CapturedCreaturesPanel.setBorder(BorderFactory.createEmptyBorder(topMargin, leftMargin, bottomMargin, rightMargin));\r\n\r\n        // Add components for the main menu as needed\r\n        JLabel label = new JLabel(&quot;Captured Creatures&quot;);\r\n        label.setFont(new Font(&quot;Arial&quot;, Font.BOLD, 24));\r\n        label.setAlignmentX(Component.CENTER_ALIGNMENT);\r\n        CapturedCreaturesPanel.add(label, BorderLayout.CENTER);\r\n\r\n        JButton capturedCreatureButton = new JButton();\r\n        capturedCreatureButton.setPreferredSize(new Dimension(500, 120)); // Adjusted the height for pictures\r\n\r\n        // Load creature image\r\n        String imageFileName = capturedCreatures.getCreatureImageFileName();\r\n        ImageIcon creatureIcon = new ImageIcon(imageFileName);\r\n\r\n        // Set the button&#39;s icon and text to the creature&#39;s details\r\n        String buttonText = String.format(&quot;&lt;html&gt;&lt;b&gt;%s&lt;/b&gt;&lt;br&gt;Type: %s&lt;br&gt;Family: %s&lt;br&gt;Evolution Level: %s&lt;/html&gt;&quot;,\r\n                capturedCreatures.getCreatureName(), capturedCreatures.getCreatureType(), capturedCreatures.getCreatureFamily(),\r\n               capturedCreatures.getCreatureEL());\r\n\r\n        capturedCreatureButton.setIcon(creatureIcon);\r\n        capturedCreatureButton.setText(buttonText);\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        SwingUtilities.invokeLater(() -&gt; {\r\n            new CapturedCreaturesGUI();\r\n        });\r\n    }\r\n}\r\n\r\n```\r\n\r\nWhat do I do so that I can use capturedCreatures in my CapturedCreaturesGUI class?","title":"How do I use information from my main class to different GUI classes?","body":"<p>I'm making a Pokemon inspired game where GUI is implemented. Let's say I have captured creatures stored in my MainMenuGUI class. I need those captured creatures (which are stored into an ArrayList called capturedCreatures implemented by my Inventory.java class) to be used in my other GUI classes such as InventoryGUI (different from Inventory.java), which will then be used in CapturedCreaturesGUI (inside the InventoryGUI class).</p>\n<p>I don't know what to do as passing down parameters (e.g. InventoryGUI (Inventory inventory)) does not seem to be the solution.</p>\n<p><a href=\"https://i.stack.imgur.com/04Ig3.png\" rel=\"nofollow noreferrer\">This is an example of adding a creature to my inventory in the MainMenuGUI class</a></p>\n<p><a href=\"https://i.stack.imgur.com/bdR46.png\" rel=\"nofollow noreferrer\">This is the InventoryGUI button in MainMenuGUI</a></p>\n<p>This is what my InventoryGUI class looks like</p>\n<pre><code>package Pokemon;\n\nimport javax.swing.*;\nimport java.awt.*;\n\npublic class InventoryGUI {\n\n    public static void main(String[] args) {\n\n            JFrame frame = new JFrame(&quot;Creature Inventory&quot;);\n            frame.setTitle(&quot;Creature Inventory&quot;);\n            frame.setSize(900, 700);\n            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n            frame.setResizable(false);\n\n            JPanel panel = new JPanel();\n            panel.setLayout(new BoxLayout(panel, BoxLayout.Y_AXIS));\n            panel.setBorder(BorderFactory.createEmptyBorder(20, 100, 20, 100));\n\n            JButton CreatureIndexEL1Button = new JButton(&quot;View Creature Index (Evolution Level 1)&quot;);\n            CreatureIndexEL1Button.setAlignmentX(Component.CENTER_ALIGNMENT);\n            CreatureIndexEL1Button.setMaximumSize(new Dimension(500, 120));\n\n            JButton CreatureIndexEL2Button = new JButton(&quot;View Creature Index (Evolution Level 2)&quot;);\n            CreatureIndexEL2Button.setAlignmentX(Component.CENTER_ALIGNMENT);\n            CreatureIndexEL2Button.setMaximumSize(new Dimension(500, 120));\n\n            JButton CreatureIndexEL3Button = new JButton(&quot;View Creature Index (Evolution Level 3)&quot;);\n            CreatureIndexEL3Button.setAlignmentX(Component.CENTER_ALIGNMENT);\n            CreatureIndexEL3Button.setMaximumSize(new Dimension(500, 120));\n\n            JButton CapturedCreaturesButton = new JButton(&quot;View Captured Creatures&quot;);\n            CapturedCreaturesButton.setAlignmentX(Component.CENTER_ALIGNMENT);\n            CapturedCreaturesButton.setMaximumSize(new Dimension(500, 120));\n\n            JButton ActiveCreatureButton = new JButton(&quot;View Active Creature&quot;);\n            ActiveCreatureButton.setAlignmentX(Component.CENTER_ALIGNMENT);\n            ActiveCreatureButton.setMaximumSize(new Dimension(500, 120));\n\n            JButton SwapActiveCreatureButton = new JButton(&quot;Swap Active Creature&quot;);\n            SwapActiveCreatureButton.setAlignmentX(Component.CENTER_ALIGNMENT);\n            SwapActiveCreatureButton.setMaximumSize(new Dimension(500, 120));\n\n            JButton ReturnToMainMenuButton = new JButton(&quot;Return to Main Menu&quot;);\n            ReturnToMainMenuButton.setAlignmentX(Component.CENTER_ALIGNMENT);\n            ReturnToMainMenuButton.setMaximumSize(new Dimension(500, 120));\n\n\n            // Add action listeners for the buttons (implement functionality as needed)\n            CreatureIndexEL1Button.addActionListener(e -&gt; {\n                new CreatureIndexEL1().setVisible(true);\n            });\n\n            CreatureIndexEL2Button.addActionListener(e -&gt; {\n                new CreatureIndexEL2().setVisible(true);\n            });\n\n            CreatureIndexEL3Button.addActionListener(e -&gt; {\n                new CreatureIndexEL3().setVisible(true);\n            });\n\n            CapturedCreaturesButton.addActionListener(e -&gt; {\n                //inventory.displayCapturedCreatures();\n                new CapturedCreaturesGUI().setVisible(true);\n            });\n\n            ActiveCreatureButton.addActionListener(e -&gt; {\n            });\n\n            SwapActiveCreatureButton.addActionListener(e -&gt; {\n            });\n\n\n            panel.add(CreatureIndexEL1Button);\n            panel.add(CreatureIndexEL2Button);\n            panel.add(CreatureIndexEL3Button);\n            panel.add(CapturedCreaturesButton);\n            panel.add(ActiveCreatureButton);\n            panel.add(SwapActiveCreatureButton);\n            panel.add(ReturnToMainMenuButton);\n\n            frame.add(panel);\n            frame.setVisible(true);\n        }\n}\n\n</code></pre>\n<p>And then this is what my CapturedCreaturesGUI looks like</p>\n<pre><code>package Pokemon;\n\nimport javax.swing.*;\nimport java.awt.*;\nimport java.util.ArrayList;\n\npublic class CapturedCreaturesGUI extends JFrame {\n    private JPanel CapturedCreaturesPanel;\n    public void createCapturedCreaturesPanel() {\n        CapturedCreaturesPanel = new JPanel(new BorderLayout());\n        CapturedCreaturesPanel.setLayout(new BoxLayout(CapturedCreaturesPanel, BoxLayout.Y_AXIS));\n\n        // Add a margin using EmptyBorder\n        int topMargin = 50;\n        int leftMargin = 20;\n        int bottomMargin = 20;\n        int rightMargin = 20;\n        CapturedCreaturesPanel.setBorder(BorderFactory.createEmptyBorder(topMargin, leftMargin, bottomMargin, rightMargin));\n\n        // Add components for the main menu as needed\n        JLabel label = new JLabel(&quot;Captured Creatures&quot;);\n        label.setFont(new Font(&quot;Arial&quot;, Font.BOLD, 24));\n        label.setAlignmentX(Component.CENTER_ALIGNMENT);\n        CapturedCreaturesPanel.add(label, BorderLayout.CENTER);\n\n        JButton capturedCreatureButton = new JButton();\n        capturedCreatureButton.setPreferredSize(new Dimension(500, 120)); // Adjusted the height for pictures\n\n        // Load creature image\n        String imageFileName = capturedCreatures.getCreatureImageFileName();\n        ImageIcon creatureIcon = new ImageIcon(imageFileName);\n\n        // Set the button's icon and text to the creature's details\n        String buttonText = String.format(&quot;&lt;html&gt;&lt;b&gt;%s&lt;/b&gt;&lt;br&gt;Type: %s&lt;br&gt;Family: %s&lt;br&gt;Evolution Level: %s&lt;/html&gt;&quot;,\n                capturedCreatures.getCreatureName(), capturedCreatures.getCreatureType(), capturedCreatures.getCreatureFamily(),\n               capturedCreatures.getCreatureEL());\n\n        capturedCreatureButton.setIcon(creatureIcon);\n        capturedCreatureButton.setText(buttonText);\n    }\n\n    public static void main(String[] args) {\n        SwingUtilities.invokeLater(() -&gt; {\n            new CapturedCreaturesGUI();\n        });\n    }\n}\n\n</code></pre>\n<p>What do I do so that I can use capturedCreatures in my CapturedCreaturesGUI class?</p>\n"},{"tags":["java","mysql","jdbc"],"comments":[{"owner":{"account_id":71739,"reputation":307143,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":4,"creation_date":1596191167,"post_id":52344453,"comment_id":111739776,"body_markdown":"This is not an error. It is a *warning.*","body":"This is not an error. It is a <i>warning.</i>"}],"answers":[{"tags":[],"owner":{"account_id":2460030,"reputation":118378,"user_id":2144390,"accept_rate":100,"display_name":"Gord Thompson"},"down_vote_count":0,"up_vote_count":42,"is_accepted":true,"score":42,"last_activity_date":1537017745,"creation_date":1537015382,"answer_id":52344792,"question_id":52344453,"body_markdown":"It isn&#39;t an error; it is a warning (or advisory) message resulting from a\r\n\r\n    Class.forName(&quot;com.mysql.jdbc.Driver&quot;)\r\n\r\ncall. Your code continues to run despite the message. \r\n\r\nIt is mainly telling you that the name of the driver class has changed to `com.mysql.cj.jdbc.Driver`. So, instead use:\r\n\r\n    Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;)\r\n\r\nIt is also letting you know that since Java 6 (JDBC 4.0) it is usually not necessary to manually load the driver class using `Class.forName` anyway, because JDBC is now able to load the correct driver itself (provided that the driver .jar is available on the class path).","title":"&quot;Loading class com.mysql.jdbc.Driver ... is deprecated&quot; message","body":"<p>It isn't an error; it is a warning (or advisory) message resulting from a</p>\n\n<pre><code>Class.forName(\"com.mysql.jdbc.Driver\")\n</code></pre>\n\n<p>call. Your code continues to run despite the message. </p>\n\n<p>It is mainly telling you that the name of the driver class has changed to <code>com.mysql.cj.jdbc.Driver</code>. So, instead use:</p>\n\n<pre><code>Class.forName(\"com.mysql.cj.jdbc.Driver\")\n</code></pre>\n\n<p>It is also letting you know that since Java 6 (JDBC 4.0) it is usually not necessary to manually load the driver class using <code>Class.forName</code> anyway, because JDBC is now able to load the correct driver itself (provided that the driver .jar is available on the class path).</p>\n"},{"tags":[],"owner":{"account_id":6845925,"reputation":71,"user_id":5264754,"display_name":"Denys Dvornyi"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1542722864,"creation_date":1542721989,"answer_id":53394536,"question_id":52344453,"body_markdown":"I had the same problem in my Spring Boot application.  \r\nI added new parameter to my &#39;application.properties&#39; file:\r\n\r\n    spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\r\n\r\nAnd this solved my problem.","title":"&quot;Loading class com.mysql.jdbc.Driver ... is deprecated&quot; message","body":"<p>I had the same problem in my Spring Boot application.<br>\nI added new parameter to my 'application.properties' file:</p>\n\n<pre><code>spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\n</code></pre>\n\n<p>And this solved my problem.</p>\n"}],"owner":{"account_id":14333621,"reputation":383,"user_id":10353761,"display_name":"maria"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":26833,"favorite_count":0,"down_vote_count":2,"up_vote_count":21,"accepted_answer_id":52344792,"answer_count":2,"score":19,"last_activity_date":1701131560,"creation_date":1537012330,"question_id":52344453,"body_markdown":"I got an error \r\n\r\n&gt; Loading class *com.mysql.jdbc.Driver*. This is deprecated. The new\r\n&gt; driver class is *com.mysql.cj.jdbc.Driver*. The driver is\r\n&gt; automatically registered via the SPI and manual loading of the driver\r\n&gt; class is generally unnecessary.\r\n\r\nCould someone explain why?","title":"&quot;Loading class com.mysql.jdbc.Driver ... is deprecated&quot; message","body":"<p>I got an error</p>\n<blockquote>\n<p>Loading class <em>com.mysql.jdbc.Driver</em>. This is deprecated. The new\ndriver class is <em>com.mysql.cj.jdbc.Driver</em>. The driver is\nautomatically registered via the SPI and manual loading of the driver\nclass is generally unnecessary.</p>\n</blockquote>\n<p>Could someone explain why?</p>\n"},{"tags":["java","spring-boot","email","scheduler"],"owner":{"account_id":29643868,"reputation":1,"user_id":22719347,"display_name":"Oskar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":0,"score":-1,"last_activity_date":1701130223,"creation_date":1701130223,"question_id":77560662,"body_markdown":"I&#39;ve got a problem where there are customers subscribing to a book store, they are being notified of any new books which are added. They are subsribing by the category or author. So when there is a new book added from an author to whom they are subscribed they will get an email saying that it has been added.\r\n\r\nProblem I&#39;ve got is when a user is subscribed to a category and author where both of the requirements are fulfilled by the book when it&#39;s added, rather than 1 email being sent Ive got 2 email going out, which is a performance issue.\r\n\r\nCould you possibly assist with changing the method to send only 1 email when the book meets a requirement of 2 subscriptions for 1 user?\r\n\r\n\r\n```\r\n@Component\r\n@AllArgsConstructor\r\npublic class EmailSchedule {\r\n\r\n\r\n    private EmailService emailService;\r\n\r\n    private SubscriptionService subscriptionService;\r\n\r\n    private BookService bookService;\r\n\r\n    private AppUserService appUserService;\r\n\r\n    @Scheduled(cron = &quot;${scheduled.email.notification.cron}&quot;)\r\n    public void sendScheduledEmailNotification() {\r\n\r\n        int page = 0;\r\n        int pageSize = 1000;\r\n\r\n        Page&lt;SubscriptionDto&gt; subscriptionDtoPage;\r\n\r\n        do {\r\n            Pageable pageable = PageRequest.of(page, pageSize);\r\n            subscriptionDtoPage = subscriptionService.getAllSubscriptions(pageable);\r\n\r\n            for (SubscriptionDto subscriptionDto : subscriptionDtoPage.getContent()) {\r\n                List&lt;BookDto&gt; newBooks;\r\n                if (subscriptionDto.getBookAuthor() != null) {\r\n                    newBooks = bookService.findBooksByAuthor(subscriptionDto.getBookAuthor());\r\n                } else if (subscriptionDto.getBookCategory() != null) {\r\n                    newBooks = bookService.findBooksByCategory(subscriptionDto.getBookCategory());\r\n                } else {\r\n                    continue;\r\n                }\r\n                if (!newBooks.isEmpty()) {\r\n                    AppUser appUser = appUserService.findAppUserBySubscriptionsId(subscriptionDto.getId());\r\n                    emailService.sendNotificationIfNewBooks(appUser.getEmail(), newBooks);\r\n                }\r\n            }\r\n            page++;\r\n        } while (subscriptionDtoPage.hasNext());\r\n    }\r\n}\r\n\r\n```\r\n\r\n\r\n```\r\n@AllArgsConstructor\r\n@Service\r\npublic class BookService {\r\n\r\n    private BookRepository bookRepository;\r\n\r\n    private BookMapper bookMapper;\r\n\r\n\r\n    @Transactional\r\n    @PreAuthorize(&quot;hasRole(&#39;ROLE_ADMIN&#39;)&quot;)\r\n    public BookDto createBook(CreateBookCommand createBookCommand) {\r\n        Book newBook;\r\n        newBook = bookMapper.fromDto(createBookCommand);\r\n        newBook.setAvailable(true);\r\n        newBook.setAddedDate(LocalDate.now());\r\n        return bookMapper.mapToDto(bookRepository.save(newBook));\r\n    }\r\n\r\n    public List&lt;BookDto&gt; findBooksByAuthor(String author) {\r\n        List&lt;Book&gt; books = bookRepository.findBookByAuthorAddedToday(author);\r\n        return books.stream().map(bookMapper::mapToDto).collect(Collectors.toList());\r\n    }\r\n\r\n    public List&lt;BookDto&gt; findBooksByCategory(String category) {\r\n        List&lt;Book&gt; books = bookRepository.findBookByCategoryAddedToday(category);\r\n        return books.stream().map(bookMapper::mapToDto).collect(Collectors.toList());\r\n    }```\r\n\r\n\r\n```\r\npublic interface BookRepository extends JpaRepository&lt;Book, Long&gt; {\r\n\r\n    @Query(&quot;SELECT b FROM Book b WHERE b.addedDate = CURRENT_DATE&quot;)\r\n    List&lt;Book&gt; findBookByAuthorAddedToday(String author);\r\n\r\n    @Query(&quot;SELECT b FROM Book b WHERE b.addedDate = CURRENT_DATE&quot;)\r\n    List&lt;Book&gt; findBookByCategoryAddedToday(String category);\r\n    \r\n}```\r\n\r\n\r\n\r\n```\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@Data\r\n@Builder\r\npublic class CreateBookCommand {\r\n\r\n    @NotBlank(message = &quot;Title cannot be blank&quot;)\r\n    private String title;\r\n\r\n    @NotBlank(message = &quot;Author cannot be blank&quot;)\r\n    private String author;\r\n\r\n    @NotBlank(message = &quot;Category cannot be blank&quot;)\r\n    private String category;\r\n}\r\n```\r\n\r\n```\r\n\r\npublic interface SubscriptionRepository extends JpaRepository&lt;Subscription, Long&gt; {\r\n\r\n    @Lock(LockModeType.OPTIMISTIC)\r\n    boolean existsByAppUserIdAndBookCategory(Long appUserId, String category);\r\n\r\n    @Lock(LockModeType.OPTIMISTIC)\r\n    boolean existsByAppUserIdAndBookAuthor(Long appUserId, String author);\r\n\r\n  //  @Query(&quot;SELECT s FROM Subscription s WHERE s.bookAuthor = :author OR s.bookCategory = :category&quot;)\r\n//    List&lt;Subscription&gt; findSubscriptionsByAuthorOrCategory(String author, String category, Pageable pageable);\r\n\r\n}\r\n```\r\n\r\n\r\n```\r\n@Getter\r\n@Setter\r\n@Entity\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\n@Table(\r\n        name = &quot;app_user&quot;\r\n)\r\n\r\npublic class AppUser {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long id;\r\n    private String firstName;\r\n    private String lastName;\r\n    @Email \r\n    @Column(unique = true)\r\n    private String email;\r\n\r\n    private String confirmationToken;\r\n    private String password;\r\n\r\n    private boolean enabled;\r\n\r\n    @Version\r\n    private Long version;\r\n\r\n    @OneToMany(mappedBy = &quot;appUser&quot;, cascade = CascadeType.REMOVE)\r\n    private Set&lt;Subscription&gt; subscriptions;\r\n\r\n    public void addSubscription(Subscription subscription) {\r\n        subscriptions.add(subscription);\r\n        subscription.setAppUser(this);\r\n    }\r\n\r\n}\r\n```\r\n\r\n\r\n\r\nI have tried creating a method using a Map although it&#39;s not memory efficient therefore Ive left that idea behind.","title":"Java Spring boot subscription duplicate being sent","body":"<p>I've got a problem where there are customers subscribing to a book store, they are being notified of any new books which are added. They are subsribing by the category or author. So when there is a new book added from an author to whom they are subscribed they will get an email saying that it has been added.</p>\n<p>Problem I've got is when a user is subscribed to a category and author where both of the requirements are fulfilled by the book when it's added, rather than 1 email being sent Ive got 2 email going out, which is a performance issue.</p>\n<p>Could you possibly assist with changing the method to send only 1 email when the book meets a requirement of 2 subscriptions for 1 user?</p>\n<pre><code>@Component\n@AllArgsConstructor\npublic class EmailSchedule {\n\n\n    private EmailService emailService;\n\n    private SubscriptionService subscriptionService;\n\n    private BookService bookService;\n\n    private AppUserService appUserService;\n\n    @Scheduled(cron = &quot;${scheduled.email.notification.cron}&quot;)\n    public void sendScheduledEmailNotification() {\n\n        int page = 0;\n        int pageSize = 1000;\n\n        Page&lt;SubscriptionDto&gt; subscriptionDtoPage;\n\n        do {\n            Pageable pageable = PageRequest.of(page, pageSize);\n            subscriptionDtoPage = subscriptionService.getAllSubscriptions(pageable);\n\n            for (SubscriptionDto subscriptionDto : subscriptionDtoPage.getContent()) {\n                List&lt;BookDto&gt; newBooks;\n                if (subscriptionDto.getBookAuthor() != null) {\n                    newBooks = bookService.findBooksByAuthor(subscriptionDto.getBookAuthor());\n                } else if (subscriptionDto.getBookCategory() != null) {\n                    newBooks = bookService.findBooksByCategory(subscriptionDto.getBookCategory());\n                } else {\n                    continue;\n                }\n                if (!newBooks.isEmpty()) {\n                    AppUser appUser = appUserService.findAppUserBySubscriptionsId(subscriptionDto.getId());\n                    emailService.sendNotificationIfNewBooks(appUser.getEmail(), newBooks);\n                }\n            }\n            page++;\n        } while (subscriptionDtoPage.hasNext());\n    }\n}\n\n</code></pre>\n<pre><code>@AllArgsConstructor\n@Service\npublic class BookService {\n\n    private BookRepository bookRepository;\n\n    private BookMapper bookMapper;\n\n\n    @Transactional\n    @PreAuthorize(&quot;hasRole('ROLE_ADMIN')&quot;)\n    public BookDto createBook(CreateBookCommand createBookCommand) {\n        Book newBook;\n        newBook = bookMapper.fromDto(createBookCommand);\n        newBook.setAvailable(true);\n        newBook.setAddedDate(LocalDate.now());\n        return bookMapper.mapToDto(bookRepository.save(newBook));\n    }\n\n    public List&lt;BookDto&gt; findBooksByAuthor(String author) {\n        List&lt;Book&gt; books = bookRepository.findBookByAuthorAddedToday(author);\n        return books.stream().map(bookMapper::mapToDto).collect(Collectors.toList());\n    }\n\n    public List&lt;BookDto&gt; findBooksByCategory(String category) {\n        List&lt;Book&gt; books = bookRepository.findBookByCategoryAddedToday(category);\n        return books.stream().map(bookMapper::mapToDto).collect(Collectors.toList());\n    }```\n\n\n</code></pre>\n<p>public interface BookRepository extends JpaRepository&lt;Book, Long&gt; {</p>\n<pre><code>@Query(&quot;SELECT b FROM Book b WHERE b.addedDate = CURRENT_DATE&quot;)\nList&lt;Book&gt; findBookByAuthorAddedToday(String author);\n\n@Query(&quot;SELECT b FROM Book b WHERE b.addedDate = CURRENT_DATE&quot;)\nList&lt;Book&gt; findBookByCategoryAddedToday(String category);\n</code></pre>\n<p>}```</p>\n<pre><code>@NoArgsConstructor\n@AllArgsConstructor\n@Data\n@Builder\npublic class CreateBookCommand {\n\n    @NotBlank(message = &quot;Title cannot be blank&quot;)\n    private String title;\n\n    @NotBlank(message = &quot;Author cannot be blank&quot;)\n    private String author;\n\n    @NotBlank(message = &quot;Category cannot be blank&quot;)\n    private String category;\n}\n</code></pre>\n<pre><code>\npublic interface SubscriptionRepository extends JpaRepository&lt;Subscription, Long&gt; {\n\n    @Lock(LockModeType.OPTIMISTIC)\n    boolean existsByAppUserIdAndBookCategory(Long appUserId, String category);\n\n    @Lock(LockModeType.OPTIMISTIC)\n    boolean existsByAppUserIdAndBookAuthor(Long appUserId, String author);\n\n  //  @Query(&quot;SELECT s FROM Subscription s WHERE s.bookAuthor = :author OR s.bookCategory = :category&quot;)\n//    List&lt;Subscription&gt; findSubscriptionsByAuthorOrCategory(String author, String category, Pageable pageable);\n\n}\n</code></pre>\n<pre><code>@Getter\n@Setter\n@Entity\n@AllArgsConstructor\n@NoArgsConstructor\n@Table(\n        name = &quot;app_user&quot;\n)\n\npublic class AppUser {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n    private String firstName;\n    private String lastName;\n    @Email \n    @Column(unique = true)\n    private String email;\n\n    private String confirmationToken;\n    private String password;\n\n    private boolean enabled;\n\n    @Version\n    private Long version;\n\n    @OneToMany(mappedBy = &quot;appUser&quot;, cascade = CascadeType.REMOVE)\n    private Set&lt;Subscription&gt; subscriptions;\n\n    public void addSubscription(Subscription subscription) {\n        subscriptions.add(subscription);\n        subscription.setAppUser(this);\n    }\n\n}\n</code></pre>\n<p>I have tried creating a method using a Map although it's not memory efficient therefore Ive left that idea behind.</p>\n"},{"tags":["java","ssl"],"comments":[{"owner":{"account_id":368447,"reputation":24110,"user_id":715269,"accept_rate":60,"display_name":"Gangnus"},"score":0,"creation_date":1487670353,"post_id":42361660,"comment_id":71877377,"body_markdown":"You should write here the code you use for the connection, for the creation of truststore and for import of certificates. BTW, are you sure you have imported the certificate of the server you need?","body":"You should write here the code you use for the connection, for the creation of truststore and for import of certificates. BTW, are you sure you have imported the certificate of the server you need?"},{"owner":{"account_id":10290481,"reputation":73,"user_id":7592381,"accept_rate":20,"display_name":"Obafemi Tayo"},"score":0,"creation_date":1487671613,"post_id":42361660,"comment_id":71878369,"body_markdown":"@Gangnus I have added my code and my keytool commands for storing my certificate. is there anything i am doing wrong here?","body":"@Gangnus I have added my code and my keytool commands for storing my certificate. is there anything i am doing wrong here?"},{"owner":{"account_id":368447,"reputation":24110,"user_id":715269,"accept_rate":60,"display_name":"Gangnus"},"score":0,"creation_date":1487677739,"post_id":42361660,"comment_id":71882710,"body_markdown":"I was invited to judge the possible closing of your question. Be careful, mostly questions without code are considered as useless. And in your case it really WAS so. I am glad that my voting against closing was supported by your fast edition. I would also advise marking the place where the code fails. Socket creation or handshaking? Also, you should put here the stacktrace you got from the exception. And maybe, the content of socket &#39;c&#39;, before and after the fail. As for your style, I would advise using logger instead of that &#39;file&#39;, just for future. And the name &#39;c&#39; does not tell much, too.","body":"I was invited to judge the possible closing of your question. Be careful, mostly questions without code are considered as useless. And in your case it really WAS so. I am glad that my voting against closing was supported by your fast edition. I would also advise marking the place where the code fails. Socket creation or handshaking? Also, you should put here the stacktrace you got from the exception. And maybe, the content of socket &#39;c&#39;, before and after the fail. As for your style, I would advise using logger instead of that &#39;file&#39;, just for future. And the name &#39;c&#39; does not tell much, too."},{"owner":{"account_id":368447,"reputation":24110,"user_id":715269,"accept_rate":60,"display_name":"Gangnus"},"score":0,"creation_date":1487677848,"post_id":42361660,"comment_id":71882773,"body_markdown":"You create socket to &quot;192.168.1.16&quot;, 4447, but report connection to 196.14.30.33 Port: 8462. Something must be false.","body":"You create socket to &quot;192.168.1.16&quot;, 4447, but report connection to 196.14.30.33 Port: 8462. Something must be false."},{"owner":{"account_id":10290481,"reputation":73,"user_id":7592381,"accept_rate":20,"display_name":"Obafemi Tayo"},"score":0,"creation_date":1487678389,"post_id":42361660,"comment_id":71883145,"body_markdown":"@Gangnus  am not trying to connect to 196.14.30.33 : 8462, from my code am just writing that port to a file, i should actually have commented it out tho. My code breaks at  c.startHandshake();","body":"@Gangnus  am not trying to connect to 196.14.30.33 : 8462, from my code am just writing that port to a file, i should actually have commented it out tho. My code breaks at  c.startHandshake();"}],"answers":[{"tags":[],"owner":{"account_id":11581191,"reputation":1011,"user_id":8485042,"display_name":"Tomasz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1507700909,"creation_date":1507700909,"answer_id":46680711,"question_id":42361660,"body_markdown":"It&#39;s been a while, but I had to face similar issue. Here is my working code:\r\n\r\n        Properties systemProps = System.getProperties();\r\n\t\tsystemProps.put(&quot;javax.net.debug&quot;,&quot;ssl&quot;);\r\n\t\tsystemProps.put(&quot;javax.net.ssl.trustStore&quot;,&quot;&lt;path to trustore&gt;&quot;);\r\n\t\tsystemProps.put(&quot;javax.net.ssl.trustStorePassword&quot;,&quot;password&quot;);\r\n\t\tSystem.setProperties(systemProps);\r\n\r\n\t\tSSLContext sslcontext;\r\n\t\tKeyStore keyStore;\r\n\t\tfinal char[] JKS_PASSWORD = &quot;password&quot;.toCharArray();\r\n\t\tfinal char[] KEY_PASSWORD = &quot;password&quot;.toCharArray();\r\n\r\n\t\ttry {\r\n\t\t\tfinal InputStream is = new FileInputStream(&quot;&lt;path_to_keystore.pkcs12&gt;&quot;);\r\n\t\t\tkeyStore = KeyStore.getInstance(&quot;pkcs12&quot;);\r\n\t\t\tkeyStore.load(is, JKS_PASSWORD);\r\n\t\t\tfinal KeyManagerFactory kmf = KeyManagerFactory.getInstance(KeyManagerFactory.getDefaultAlgorithm());\r\n\t\t\tkmf.init(keyStore, KEY_PASSWORD);\r\n\t\t\t\r\n\t\t\tsslcontext=SSLContext.getInstance(&quot;TLS&quot;);\r\n\t\t\tsslcontext.init(kmf.getKeyManagers(), null, new java.security.SecureRandom());\r\n\t\t} catch (Exception ex) {\r\n\t\t\tthrow new IllegalStateException(&quot;Failure initializing default SSL context&quot;, ex);\r\n\t\t}\r\n\r\n\t\tSSLSocketFactory sslsocketfactory = sslcontext.getSocketFactory();  \r\n\t\tDataOutputStream os = null;\r\n\r\n\t\ttry {\r\n\t\t\tSSLSocket sslsocket = (SSLSocket) sslsocketfactory.createSocket();\r\n\t\t\tsslsocket.connect(new InetSocketAddress(host, port), connectTimeout);\r\n\t\t\tsslsocket.startHandshake();\r\n\r\n\t\t\tos = new DataOutputStream(sslsocket.getOutputStream());\r\n\t\t\t// log.info(&quot;Sending echo packet&quot;);\r\n\t\t\tString toSend = &quot;{\\&quot;echo\\&quot;:\\&quot;echo\\&quot;}&quot;;\r\n\t\t    os.writeBytes(toSend);\r\n\t\t} catch (UnknownHostException e) {\r\n\t\t\t// TODO Auto-generated catch block\r\n\t\t\te.printStackTrace();\r\n\t\t} catch (IOException e) {\r\n\t\t\t// TODO Auto-generated catch block\r\n\t\t\te.printStackTrace();\r\n\t\t} catch (InterruptedException e) {\r\n\t\t\t// TODO Auto-generated catch block\r\n\t\t\te.printStackTrace();\r\n\t\t}","title":"Received fatal alert, bad_certificate","body":"<p>It's been a while, but I had to face similar issue. Here is my working code:</p>\n\n<pre><code>    Properties systemProps = System.getProperties();\n    systemProps.put(\"javax.net.debug\",\"ssl\");\n    systemProps.put(\"javax.net.ssl.trustStore\",\"&lt;path to trustore&gt;\");\n    systemProps.put(\"javax.net.ssl.trustStorePassword\",\"password\");\n    System.setProperties(systemProps);\n\n    SSLContext sslcontext;\n    KeyStore keyStore;\n    final char[] JKS_PASSWORD = \"password\".toCharArray();\n    final char[] KEY_PASSWORD = \"password\".toCharArray();\n\n    try {\n        final InputStream is = new FileInputStream(\"&lt;path_to_keystore.pkcs12&gt;\");\n        keyStore = KeyStore.getInstance(\"pkcs12\");\n        keyStore.load(is, JKS_PASSWORD);\n        final KeyManagerFactory kmf = KeyManagerFactory.getInstance(KeyManagerFactory.getDefaultAlgorithm());\n        kmf.init(keyStore, KEY_PASSWORD);\n\n        sslcontext=SSLContext.getInstance(\"TLS\");\n        sslcontext.init(kmf.getKeyManagers(), null, new java.security.SecureRandom());\n    } catch (Exception ex) {\n        throw new IllegalStateException(\"Failure initializing default SSL context\", ex);\n    }\n\n    SSLSocketFactory sslsocketfactory = sslcontext.getSocketFactory();  \n    DataOutputStream os = null;\n\n    try {\n        SSLSocket sslsocket = (SSLSocket) sslsocketfactory.createSocket();\n        sslsocket.connect(new InetSocketAddress(host, port), connectTimeout);\n        sslsocket.startHandshake();\n\n        os = new DataOutputStream(sslsocket.getOutputStream());\n        // log.info(\"Sending echo packet\");\n        String toSend = \"{\\\"echo\\\":\\\"echo\\\"}\";\n        os.writeBytes(toSend);\n    } catch (UnknownHostException e) {\n        // TODO Auto-generated catch block\n        e.printStackTrace();\n    } catch (IOException e) {\n        // TODO Auto-generated catch block\n        e.printStackTrace();\n    } catch (InterruptedException e) {\n        // TODO Auto-generated catch block\n        e.printStackTrace();\n    }\n</code></pre>\n"}],"owner":{"account_id":10290481,"reputation":73,"user_id":7592381,"accept_rate":20,"display_name":"Obafemi Tayo"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":9599,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1701130146,"creation_date":1487663975,"question_id":42361660,"body_markdown":"I am trying to make an SSL conection to a server. I have created a Truststore and imported the server&#39;s certificate as well as mine as trusted entries into the Keystore. The server guys also have imported my certificate into their keystore. But when i try to connect, i get this error:\r\n\r\n&gt; Received fatal alert: bad_certificate\r\n\r\nOn the server, they are getting this error:\r\n\r\n&gt; javax.net.ssl.SSLHandshakeException: null cert chain \r\n\r\nWhat could i be possibly be doing wrong?, How do i fix this error? I have been battling this issue for a very long time now.\r\n\r\n\r\n\r\nMy Client Code\r\n\r\n\r\n\r\n    import java.io.*;\r\n    import java.net.*;\r\n    import java.security.*;\r\n\r\n\r\n    import java.util.Enumeration;\r\n    import javax.net.ssl.*;\r\n\r\n    public class SSLConnect {\r\n\r\n    public String MakeSSlCall(String meternum) {\r\n        String message = &quot;&quot;;\r\n        FileWriter file = null;\r\n        try {\r\n            file = new FileWriter(&quot;C:\\\\SSLCERT\\\\ClientJavalog.txt&quot;);\r\n\r\n        } catch (Exception ee) {\r\n            message = ee.getMessage();\r\n\r\n        }\r\n        //writer = new BufferedWriter(file );\r\n        try {\r\n            file.write(&quot;KeyStore Generated\\r\\n&quot;);\r\n            KeyStore keystore = KeyStore.getInstance(&quot;JKS&quot;);\r\n            keystore.load(new FileInputStream(&quot;C:\\\\SSLCERT\\\\newclientkeystore&quot;), &quot;client&quot;.toCharArray());\r\n            file.write(&quot;KeyStore Generated\\r\\n&quot;);\r\n            Enumeration enumeration = keystore.aliases();\r\n            while (enumeration.hasMoreElements()) {\r\n                String alias = (String) enumeration.nextElement();\r\n                file.write(&quot;alias name: &quot; + alias + &quot;\\r\\n&quot;);\r\n                keystore.getCertificate(alias);\r\n                file.write(keystore.getCertificate(alias).toString() + &quot;\\r\\n&quot;);\r\n            }\r\n            TrustManagerFactory tmf =TrustManagerFactory.getInstance(&quot;SunX509&quot;);\r\n            tmf.init(keystore);\r\n            file.write(&quot;KeyStore Stored\\r\\n&quot;);\r\n            SSLContext context = SSLContext.getInstance(&quot;SSL&quot;);\r\n            TrustManager[] trustManagers = tmf.getTrustManagers();\r\n            context.init(null, trustManagers, null);\r\n\r\n            SSLSocketFactory f = context.getSocketFactory();\r\n            file.write(&quot;About to Connect to Ontech\\r\\n&quot;);\r\n            SSLSocket c = (SSLSocket) f.createSocket(&quot;192.168.1.16&quot;, 4447);\r\n            file.write(&quot;Connection Established to 196.14.30.33 Port: 8462\\r\\n&quot;);\r\n            file.write(&quot;About to Start Handshake\\r\\n&quot;);\r\n            c.startHandshake();\r\n\r\n            file.write(&quot;Handshake Established\\r\\n&quot;);\r\n            file.flush();\r\n            file.close();\r\n            return &quot;Connection Established&quot;;\r\n        } catch (Exception e) {\r\n            try {\r\n                file.write(&quot;An Error Occured\\r\\n&quot;);\r\n                file.write(e.getMessage() + &quot;\\r\\n&quot;);\r\n                file.flush();\r\n                file.close();\r\n            } catch (Exception eee) {\r\n                message = eee.getMessage();\r\n            }\r\n            return &quot;Connection Failed&quot;;\r\n        }\r\n    }\r\n    }\r\n\r\nKeytool commands for creating my truststore\r\n\r\nkeytool -import -alias client -file client.cer -keystore MyKeystore -storepass mystore\r\n\r\n\r\nkeytool -import -alias server -file server.cer -keystore MyKeystore -storepass mystore\r\n\r\n\r\nAnd i have also added the two certificates to my cacerts keystore\r\n\r\n\r\n\r\n","title":"Received fatal alert, bad_certificate","body":"<p>I am trying to make an SSL conection to a server. I have created a Truststore and imported the server's certificate as well as mine as trusted entries into the Keystore. The server guys also have imported my certificate into their keystore. But when i try to connect, i get this error:</p>\n\n<blockquote>\n  <p>Received fatal alert: bad_certificate</p>\n</blockquote>\n\n<p>On the server, they are getting this error:</p>\n\n<blockquote>\n  <p>javax.net.ssl.SSLHandshakeException: null cert chain </p>\n</blockquote>\n\n<p>What could i be possibly be doing wrong?, How do i fix this error? I have been battling this issue for a very long time now.</p>\n\n<p>My Client Code</p>\n\n<pre><code>import java.io.*;\nimport java.net.*;\nimport java.security.*;\n\n\nimport java.util.Enumeration;\nimport javax.net.ssl.*;\n\npublic class SSLConnect {\n\npublic String MakeSSlCall(String meternum) {\n    String message = \"\";\n    FileWriter file = null;\n    try {\n        file = new FileWriter(\"C:\\\\SSLCERT\\\\ClientJavalog.txt\");\n\n    } catch (Exception ee) {\n        message = ee.getMessage();\n\n    }\n    //writer = new BufferedWriter(file );\n    try {\n        file.write(\"KeyStore Generated\\r\\n\");\n        KeyStore keystore = KeyStore.getInstance(\"JKS\");\n        keystore.load(new FileInputStream(\"C:\\\\SSLCERT\\\\newclientkeystore\"), \"client\".toCharArray());\n        file.write(\"KeyStore Generated\\r\\n\");\n        Enumeration enumeration = keystore.aliases();\n        while (enumeration.hasMoreElements()) {\n            String alias = (String) enumeration.nextElement();\n            file.write(\"alias name: \" + alias + \"\\r\\n\");\n            keystore.getCertificate(alias);\n            file.write(keystore.getCertificate(alias).toString() + \"\\r\\n\");\n        }\n        TrustManagerFactory tmf =TrustManagerFactory.getInstance(\"SunX509\");\n        tmf.init(keystore);\n        file.write(\"KeyStore Stored\\r\\n\");\n        SSLContext context = SSLContext.getInstance(\"SSL\");\n        TrustManager[] trustManagers = tmf.getTrustManagers();\n        context.init(null, trustManagers, null);\n\n        SSLSocketFactory f = context.getSocketFactory();\n        file.write(\"About to Connect to Ontech\\r\\n\");\n        SSLSocket c = (SSLSocket) f.createSocket(\"192.168.1.16\", 4447);\n        file.write(\"Connection Established to 196.14.30.33 Port: 8462\\r\\n\");\n        file.write(\"About to Start Handshake\\r\\n\");\n        c.startHandshake();\n\n        file.write(\"Handshake Established\\r\\n\");\n        file.flush();\n        file.close();\n        return \"Connection Established\";\n    } catch (Exception e) {\n        try {\n            file.write(\"An Error Occured\\r\\n\");\n            file.write(e.getMessage() + \"\\r\\n\");\n            file.flush();\n            file.close();\n        } catch (Exception eee) {\n            message = eee.getMessage();\n        }\n        return \"Connection Failed\";\n    }\n}\n}\n</code></pre>\n\n<p>Keytool commands for creating my truststore</p>\n\n<p>keytool -import -alias client -file client.cer -keystore MyKeystore -storepass mystore</p>\n\n<p>keytool -import -alias server -file server.cer -keystore MyKeystore -storepass mystore</p>\n\n<p>And i have also added the two certificates to my cacerts keystore</p>\n"},{"tags":["java","github","classpath"],"comments":[{"owner":{"account_id":14261458,"reputation":535,"user_id":10302104,"display_name":"smallpepperz"},"score":0,"creation_date":1701037598,"post_id":77553655,"comment_id":136722229,"body_markdown":"The edu.virginia.engine imports make it seem like you need some libraries from the University of Virginia to run this program","body":"The edu.virginia.engine imports make it seem like you need some libraries from the University of Virginia to run this program"}],"answers":[{"tags":[],"owner":{"account_id":3557625,"reputation":198996,"user_id":2970947,"display_name":"Elliott Frisch"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1701037436,"creation_date":1701037436,"answer_id":77553704,"question_id":77553655,"body_markdown":"The class is in the `ttr.main` package, and named `TTRMain`. Further, there is a `bin` folder containing the **compiled** classes. So, the command you want is to specify the `bin` folder on your classpath and then the fully qualified class name. Like,\r\n\r\n    java -cp bin ttr.main.TTRMain","title":"How do I run this GitHub java project?","body":"<p>The class is in the <code>ttr.main</code> package, and named <code>TTRMain</code>. Further, there is a <code>bin</code> folder containing the <strong>compiled</strong> classes. So, the command you want is to specify the <code>bin</code> folder on your classpath and then the fully qualified class name. Like,</p>\n<pre><code>java -cp bin ttr.main.TTRMain\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23667337,"reputation":1467,"user_id":17694626,"display_name":"Cheng Thao"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701054973,"creation_date":1701054973,"answer_id":77554354,"question_id":77553655,"body_markdown":"To run a Java program, you need to specific the classpath to all the .jar, .class, and resources it needed.  You could run the program as below:\r\n\r\n```java -cp ./lib/;./bin;./imgs;/resources ttr.main.TTRMain```\r\n\r\nIf you plan to run it often, you want to create a .bat or .sh file and put that line in it so you can execute the script each time you want to run the program.","title":"How do I run this GitHub java project?","body":"<p>To run a Java program, you need to specific the classpath to all the .jar, .class, and resources it needed.  You could run the program as below:</p>\n<p><code>java -cp ./lib/;./bin;./imgs;/resources ttr.main.TTRMain</code></p>\n<p>If you plan to run it often, you want to create a .bat or .sh file and put that line in it so you can execute the script each time you want to run the program.</p>\n"},{"tags":[],"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1701129977,"creation_date":1701129426,"answer_id":77560619,"question_id":77553655,"body_markdown":"The following sequence of commands works for me.\r\n\r\n1. Clone the repository:\r\n\r\n    ```none\r\n    git clone https://github.com/ss2cp/AI-TicketToRide.git\r\n    ```\r\n\r\n    &lt;sup&gt;**Note:** Requires [Git][1] to be installed on your computer.&lt;/sup&gt;\r\n\r\n2. Navigate to the project directory:\r\n\r\n    ```none\r\n    cd AI-TicketToRide\r\n    ```\r\n\r\n    &lt;sup&gt;**Note:** This is necessary, as the image files in the project&#39;s `resources` directory are loaded as files relative to the working directory.&lt;/sup&gt;\r\n\r\n3. Execute the project:\r\n\r\n    ```none\r\n    java -cp bin:lib/JGame.jar ttr.main.TTRMain\r\n    ```\r\n\r\n    &lt;sup&gt;**Note:** Requires Java 8+ to be on your path.&lt;/sup&gt;\r\n\r\n    &lt;sup&gt;**Note:** On Windows, replace the `:` (colon) in the `-cp` argument with a `;` (semicolon). You can also replace the `/` (forward slash) with a `\\` (backslash), but that is not strictly necessary (Java will correctly interpret the value either way).&lt;/sup&gt;\r\n\r\n\r\n### Class-path\r\n\r\nThe `-cp bin:lib/JGame.jar` part is specifying the class-path. In this case, two locations are being put on the class-path. The `bin` directory contains the compiled class files of the source files in the `src` directory. The `lib/JGame.jar` file contains precompiled third-party code used by the project.\r\n\r\nNormally, I would say the `resources` directory should also be put on the class-path, but that does not seem to be necessary here. It appears those images, instead of being loaded as _resources_ like the directory name would imply, are being loaded as _files_. Luckily, _relative_ file paths seem to be used, but this means that the project directory **must** be the working directory.\r\n\r\n### Main class\r\n\r\nThe `ttr.main.TTRMain` part is the fully qualified [binary name][2] of the main class. Note the `src` directory is a &quot;source root&quot;; it is not part of the package structure. \r\n\r\nThe class-path will be searched for the specified main class and, if found, execute that class&#39;s main method. Since the `bin` directory, which contains the `ttr/main/TTRMain.class` file, has been put on the class-path, the `ttr.main.TTRMain` class will be found.\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n  [1]: https://git-scm.com/\r\n  [2]: https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Class.html#getName()\r\n","title":"How do I run this GitHub java project?","body":"<p>The following sequence of commands works for me.</p>\n<ol>\n<li><p>Clone the repository:</p>\n<pre class=\"lang-none prettyprint-override\"><code>git clone https://github.com/ss2cp/AI-TicketToRide.git\n</code></pre>\n<p><sup><strong>Note:</strong> Requires <a href=\"https://git-scm.com/\" rel=\"nofollow noreferrer\">Git</a> to be installed on your computer.</sup></p>\n</li>\n<li><p>Navigate to the project directory:</p>\n<pre class=\"lang-none prettyprint-override\"><code>cd AI-TicketToRide\n</code></pre>\n<p><sup><strong>Note:</strong> This is necessary, as the image files in the project's <code>resources</code> directory are loaded as files relative to the working directory.</sup></p>\n</li>\n<li><p>Execute the project:</p>\n<pre class=\"lang-none prettyprint-override\"><code>java -cp bin:lib/JGame.jar ttr.main.TTRMain\n</code></pre>\n<p><sup><strong>Note:</strong> Requires Java 8+ to be on your path.</sup></p>\n<p><sup><strong>Note:</strong> On Windows, replace the <code>:</code> (colon) in the <code>-cp</code> argument with a <code>;</code> (semicolon). You can also replace the <code>/</code> (forward slash) with a <code>\\</code> (backslash), but that is not strictly necessary (Java will correctly interpret the value either way).</sup></p>\n</li>\n</ol>\n<h3>Class-path</h3>\n<p>The <code>-cp bin:lib/JGame.jar</code> part is specifying the class-path. In this case, two locations are being put on the class-path. The <code>bin</code> directory contains the compiled class files of the source files in the <code>src</code> directory. The <code>lib/JGame.jar</code> file contains precompiled third-party code used by the project.</p>\n<p>Normally, I would say the <code>resources</code> directory should also be put on the class-path, but that does not seem to be necessary here. It appears those images, instead of being loaded as <em>resources</em> like the directory name would imply, are being loaded as <em>files</em>. Luckily, <em>relative</em> file paths seem to be used, but this means that the project directory <strong>must</strong> be the working directory.</p>\n<h3>Main class</h3>\n<p>The <code>ttr.main.TTRMain</code> part is the fully qualified <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Class.html#getName()\" rel=\"nofollow noreferrer\">binary name</a> of the main class. Note the <code>src</code> directory is a &quot;source root&quot;; it is not part of the package structure.</p>\n<p>The class-path will be searched for the specified main class and, if found, execute that class's main method. Since the <code>bin</code> directory, which contains the <code>ttr/main/TTRMain.class</code> file, has been put on the class-path, the <code>ttr.main.TTRMain</code> class will be found.</p>\n"}],"owner":{"account_id":1972100,"reputation":1314,"user_id":1770778,"accept_rate":72,"display_name":"ffonz"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":1,"is_answered":true,"view_count":80,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":77560619,"answer_count":3,"score":-1,"last_activity_date":1701129977,"creation_date":1701036415,"question_id":77553655,"body_markdown":"I want to run this GitHub java program:\r\nhttps://github.com/ss2cp/AI-TicketToRide\r\n\r\nAccording to the README.md it should run with `src/ttr.main/TTRMain`\r\n\r\nI am trying to start the game in **linux**, but I keep on getting the error:\r\n\r\n&gt; Error: Could not find or load main class src.ttr.main.TTRMain \r\n&gt;\r\n&gt; Caused by: java.lang.ClassNotFoundException: src.ttr.main.TTRMain\r\n\r\nI tried \r\n\r\n    java src.ttr.main.TTRMain\r\n    java src/ttr.main/TTRMain\r\n    src/ttr.main/TTRMain\r\n    java ttr.main.TTRMain\r\n    java -jar JGame.jar\r\n    java -cp . src.ttr.main.TTRMain\r\n    java -cp . ttr.main.TTRMain\r\n\r\nfrom the `~/Downloads/AI-TicketToRide-master/` folder (where the README.md and .classpath file is).\r\nI also tried it from `~/Downloads/AI-TicketToRide-master/bin/ttr/main/` and `~/Downloads/AI-TicketToRide-master/src/ttr/main/`\r\n\r\nBut no luck.\r\n\r\nI am using Ubuntu 20.04 and openjdk 11.0.20.1 2023-08-24.\r\n\r\nHow do I start the program and from which directory? And should I set a classpath?\r\n","title":"How do I run this GitHub java project?","body":"<p>I want to run this GitHub java program:\n<a href=\"https://github.com/ss2cp/AI-TicketToRide\" rel=\"nofollow noreferrer\">https://github.com/ss2cp/AI-TicketToRide</a></p>\n<p>According to the README.md it should run with <code>src/ttr.main/TTRMain</code></p>\n<p>I am trying to start the game in <strong>linux</strong>, but I keep on getting the error:</p>\n<blockquote>\n<p>Error: Could not find or load main class src.ttr.main.TTRMain</p>\n<p>Caused by: java.lang.ClassNotFoundException: src.ttr.main.TTRMain</p>\n</blockquote>\n<p>I tried</p>\n<pre><code>java src.ttr.main.TTRMain\njava src/ttr.main/TTRMain\nsrc/ttr.main/TTRMain\njava ttr.main.TTRMain\njava -jar JGame.jar\njava -cp . src.ttr.main.TTRMain\njava -cp . ttr.main.TTRMain\n</code></pre>\n<p>from the <code>~/Downloads/AI-TicketToRide-master/</code> folder (where the README.md and .classpath file is).\nI also tried it from <code>~/Downloads/AI-TicketToRide-master/bin/ttr/main/</code> and <code>~/Downloads/AI-TicketToRide-master/src/ttr/main/</code></p>\n<p>But no luck.</p>\n<p>I am using Ubuntu 20.04 and openjdk 11.0.20.1 2023-08-24.</p>\n<p>How do I start the program and from which directory? And should I set a classpath?</p>\n"},{"tags":["javascript","java","node.js","sockets","socket.io"],"answers":[{"tags":[],"owner":{"account_id":125163,"reputation":2985,"user_id":320761,"display_name":"Lukasz Frankowski"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1495006780,"creation_date":1495006780,"answer_id":44018480,"question_id":44005843,"body_markdown":"This client looks to be outdated about 5 years. It seems this is a newer one: https://github.com/socketio/socket.io-client-java","title":"Java socket io unknown transport undefined","body":"<p>This client looks to be outdated about 5 years. It seems this is a newer one: <a href=\"https://github.com/socketio/socket.io-client-java\" rel=\"nofollow noreferrer\">https://github.com/socketio/socket.io-client-java</a></p>\n"}],"owner":{"account_id":3697484,"reputation":31,"user_id":3078383,"accept_rate":100,"display_name":"user3078383"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":675,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":44018480,"answer_count":1,"score":0,"last_activity_date":1701129704,"creation_date":1494949066,"question_id":44005843,"body_markdown":"When I try to connect node.js from java socket.io client I&#39;m getting this error:\r\n\r\n    engine intercepting request for path &quot;/socket.io/&quot; +0ms\r\n    engine handling &quot;GET&quot; http request &quot;/socket.io/1/&quot; +0ms\r\n    engine unknown transport &quot;undefined&quot; +0ms\r\n\r\nMeantime, when I try from a JavaScript client, works fine:\r\n\r\n    engine intercepting request for path &quot;/socket.io/&quot; +0ms\r\n    engine handling &quot;GET&quot; http request &quot;/socket.io/?EIO=3&amp;transport=polling&amp;t=1494940689150-0&amp;b64=1&quot; +0ms\r\n    engine handshaking client &quot;3EFWO3PTlnvZksM8AAAA&quot; +15ms\r\n\r\n\r\nMy Java client code:\r\n    \r\n    import io.socket.IOAcknowledge;\r\n    import io.socket.IOCallback;\r\n    import io.socket.SocketIO;\r\n    import io.socket.SocketIOException;\r\n    \r\n    import org.json.JSONException;\r\n    import org.json.JSONObject;\r\n    \r\n    public class BasicExample implements IOCallback {\r\n    \tprivate SocketIO socket;\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\ttry {\r\n    \t\t\tnew BasicExample();\r\n    \t\t} catch (Exception e) {\r\n    \t\t\te.printStackTrace();\r\n    \t\t}\r\n    \t}\r\n    \r\n    \tpublic BasicExample() throws Exception {\r\n    \t\t\r\n    \t\t\tsocket = new SocketIO();\r\n    \t\t\tsocket.connect(&quot;http://localhost:9990&quot;, this);\r\n    \t\t\t\r\n    \t\t\tsocket.send(&quot;Hello Server&quot;);\r\n    \r\n    \t\t\t// Sends a JSON object to the server.\r\n    \t\t\tsocket.send(new JSONObject().put(&quot;key&quot;, &quot;value&quot;).put(&quot;key2&quot;,&quot;another value&quot;));\r\n    \r\n    \t\t\t// Emits an event to the server.\r\n    \t\t\tsocket.emit(&quot;event&quot;, &quot;argument1&quot;, &quot;argument2&quot;, 13.37);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void onMessage(JSONObject json, IOAcknowledge ack) {\r\n    \t\ttry {\r\n    \t\t\tSystem.out.println(&quot;Server said:&quot; + json.toString(2));\r\n    \t\t} catch (JSONException e) {\r\n    \t\t\te.printStackTrace();\r\n    \t\t}\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void onMessage(String data, IOAcknowledge ack) {\r\n    \t\tSystem.out.println(&quot;Server said: &quot; + data);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void onError(SocketIOException socketIOException) {\r\n    \t\tSystem.out.println(&quot;an Error occured&quot;);\r\n    \t\tsocketIOException.printStackTrace();\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void onDisconnect() {\r\n    \t\tSystem.out.println(&quot;Connection terminated.&quot;);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void onConnect() {\r\n    \t\tSystem.out.println(&quot;Connection established&quot;);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void on(String event, IOAcknowledge ack, Object... args) {\r\n    \t\tSystem.out.println(&quot;Server triggered event &#39;&quot; + event + &quot;&#39;&quot;);\r\n    \t}\r\n    }\r\n\r\nIn Java, I&#39;m using socketio.jar downloaded from here http://www.java2s.com/Code/Jar/s/Downloadsocketiojar.htm, which seems was compiled from here https://github.com/Gottox/socket.io-java-client\r\n\r\nIn node.js server I&#39;m user socket.io@1.0.6 version.\r\n\r\nPlease, can someone help me?","title":"Java socket io unknown transport undefined","body":"<p>When I try to connect node.js from java socket.io client I'm getting this error:</p>\n<pre><code>engine intercepting request for path &quot;/socket.io/&quot; +0ms\nengine handling &quot;GET&quot; http request &quot;/socket.io/1/&quot; +0ms\nengine unknown transport &quot;undefined&quot; +0ms\n</code></pre>\n<p>Meantime, when I try from a JavaScript client, works fine:</p>\n<pre><code>engine intercepting request for path &quot;/socket.io/&quot; +0ms\nengine handling &quot;GET&quot; http request &quot;/socket.io/?EIO=3&amp;transport=polling&amp;t=1494940689150-0&amp;b64=1&quot; +0ms\nengine handshaking client &quot;3EFWO3PTlnvZksM8AAAA&quot; +15ms\n</code></pre>\n<p>My Java client code:</p>\n<pre><code>import io.socket.IOAcknowledge;\nimport io.socket.IOCallback;\nimport io.socket.SocketIO;\nimport io.socket.SocketIOException;\n\nimport org.json.JSONException;\nimport org.json.JSONObject;\n\npublic class BasicExample implements IOCallback {\n    private SocketIO socket;\n\n    public static void main(String[] args) {\n        try {\n            new BasicExample();\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n\n    public BasicExample() throws Exception {\n        \n            socket = new SocketIO();\n            socket.connect(&quot;http://localhost:9990&quot;, this);\n            \n            socket.send(&quot;Hello Server&quot;);\n\n            // Sends a JSON object to the server.\n            socket.send(new JSONObject().put(&quot;key&quot;, &quot;value&quot;).put(&quot;key2&quot;,&quot;another value&quot;));\n\n            // Emits an event to the server.\n            socket.emit(&quot;event&quot;, &quot;argument1&quot;, &quot;argument2&quot;, 13.37);\n    }\n\n    @Override\n    public void onMessage(JSONObject json, IOAcknowledge ack) {\n        try {\n            System.out.println(&quot;Server said:&quot; + json.toString(2));\n        } catch (JSONException e) {\n            e.printStackTrace();\n        }\n    }\n\n    @Override\n    public void onMessage(String data, IOAcknowledge ack) {\n        System.out.println(&quot;Server said: &quot; + data);\n    }\n\n    @Override\n    public void onError(SocketIOException socketIOException) {\n        System.out.println(&quot;an Error occured&quot;);\n        socketIOException.printStackTrace();\n    }\n\n    @Override\n    public void onDisconnect() {\n        System.out.println(&quot;Connection terminated.&quot;);\n    }\n\n    @Override\n    public void onConnect() {\n        System.out.println(&quot;Connection established&quot;);\n    }\n\n    @Override\n    public void on(String event, IOAcknowledge ack, Object... args) {\n        System.out.println(&quot;Server triggered event '&quot; + event + &quot;'&quot;);\n    }\n}\n</code></pre>\n<p>In Java, I'm using socketio.jar downloaded from here <a href=\"http://www.java2s.com/Code/Jar/s/Downloadsocketiojar.htm\" rel=\"nofollow noreferrer\">http://www.java2s.com/Code/Jar/s/Downloadsocketiojar.htm</a>, which seems was compiled from here <a href=\"https://github.com/Gottox/socket.io-java-client\" rel=\"nofollow noreferrer\">https://github.com/Gottox/socket.io-java-client</a></p>\n<p>In node.js server I'm user socket.io@1.0.6 version.</p>\n<p>Please, can someone help me?</p>\n"},{"tags":["java","spring","thymeleaf"],"answers":[{"tags":[],"owner":{"account_id":30008239,"reputation":1,"user_id":22996538,"display_name":"Ari Thomazini"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701129610,"creation_date":1701129610,"answer_id":77560631,"question_id":77560488,"body_markdown":"The problema is in Input type... \r\n\r\nTry this, for example:\r\n\r\n”password”\r\n\r\nTo:\r\n\r\n&quot;password&quot;","title":"Error while get info from html to controller in Java + Thymeleaf","body":"<p>The problema is in Input type...</p>\n<p>Try this, for example:</p>\n<p>”password”</p>\n<p>To:</p>\n<p>&quot;password&quot;</p>\n"}],"owner":{"account_id":30008038,"reputation":11,"user_id":22996386,"display_name":"Matteus"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1701129610,"creation_date":1701126991,"question_id":77560488,"body_markdown":"I did a controller class with this code:\r\n\r\n```\r\n@Controller\r\npublic class CadastroController {\r\n    @Autowired\r\n    ClienteRepository clienteRepository;\r\n\r\n    @GetMapping(&quot;/cadastro&quot;)\r\n    public String abrir(Cliente cliente) {\r\n        return &quot;cadastro&quot;;\r\n    }\r\n\r\n    @PostMapping(&quot;/cadastrar_cliente&quot;)\r\n    public String cadastrar(Cliente cliente) {\r\n        clienteRepository.save(cliente);\r\n        return &quot;index&quot;;\r\n    }\r\n}\r\n```\r\n\r\nand this HTML:\r\n\r\n```\r\n    \r\n    &lt;form action=&quot;#&quot; th:action=&quot;@{/cadastrar_cliente}&quot; th:object=&quot;${cliente}&quot; method=&quot;post&quot;&gt;        \r\n    &lt;label class=&quot;lbl&quot; for=&quot;nome&quot;&gt;Nome&lt;/label&gt; &lt;br&gt; &lt;br&gt;\r\n    &lt;input th:field=&quot;*{nome}&quot; id=&quot;nome&quot; type=”text” placeholder=&quot;Digite seu Nome Completo:&quot;&gt;\r\n\r\n    &lt;label  class=&quot;lbl&quot; for=&quot;email&quot;&gt;E-Mail&lt;/label&gt; &lt;br&gt; &lt;br&gt;\r\n    &lt;input th:field=&quot;*{email}&quot; id=&quot;email&quot; type=”email” placeholder=&quot;Digite seu E-Mail:&quot;&gt;\r\n\r\n    &lt;label  class=&quot;lbl&quot; for=&quot;telefone&quot;&gt;Telefone&lt;/label&gt; &lt;br&gt; &lt;br&gt;\r\n    &lt;input th:field=&quot;*{telefone}&quot; id=&quot;telefone&quot; type=”tel” placeholder=&quot;Digite seu Telefone&quot;&gt;\r\n\r\n    &lt;label  class=&quot;lbl&quot; for=&quot;senha&quot;&gt;Senha&lt;/label&gt; &lt;br&gt; &lt;br&gt;\r\n    &lt;input th:field=&quot;*{senha}&quot; id=&quot;senha&quot; type=”password” placeholder=&quot;Digite sua senha&quot;&gt;\r\n\r\n    &lt;input type=&quot;submit&quot; value=&quot;Cadastrar&quot;&gt;&lt;br&gt; &lt;br&gt;&lt;br&gt; &lt;br&gt;&lt;br&gt; &lt;br&gt;\r\n    &lt;/form&gt;\r\n```\r\n\r\nBut when I debug the controller, the Entity Cliente properties comes null...\r\n\r\nI tried the same code in another computer and aparentily works\r\n\r\nAnyone know what can be the problem?\r\n\r\nI tried debug and convert to modelAndView, View, and others tries. But nothing worked","title":"Error while get info from html to controller in Java + Thymeleaf","body":"<p>I did a controller class with this code:</p>\n<pre><code>@Controller\npublic class CadastroController {\n    @Autowired\n    ClienteRepository clienteRepository;\n\n    @GetMapping(&quot;/cadastro&quot;)\n    public String abrir(Cliente cliente) {\n        return &quot;cadastro&quot;;\n    }\n\n    @PostMapping(&quot;/cadastrar_cliente&quot;)\n    public String cadastrar(Cliente cliente) {\n        clienteRepository.save(cliente);\n        return &quot;index&quot;;\n    }\n}\n</code></pre>\n<p>and this HTML:</p>\n<pre><code>    \n    &lt;form action=&quot;#&quot; th:action=&quot;@{/cadastrar_cliente}&quot; th:object=&quot;${cliente}&quot; method=&quot;post&quot;&gt;        \n    &lt;label class=&quot;lbl&quot; for=&quot;nome&quot;&gt;Nome&lt;/label&gt; &lt;br&gt; &lt;br&gt;\n    &lt;input th:field=&quot;*{nome}&quot; id=&quot;nome&quot; type=”text” placeholder=&quot;Digite seu Nome Completo:&quot;&gt;\n\n    &lt;label  class=&quot;lbl&quot; for=&quot;email&quot;&gt;E-Mail&lt;/label&gt; &lt;br&gt; &lt;br&gt;\n    &lt;input th:field=&quot;*{email}&quot; id=&quot;email&quot; type=”email” placeholder=&quot;Digite seu E-Mail:&quot;&gt;\n\n    &lt;label  class=&quot;lbl&quot; for=&quot;telefone&quot;&gt;Telefone&lt;/label&gt; &lt;br&gt; &lt;br&gt;\n    &lt;input th:field=&quot;*{telefone}&quot; id=&quot;telefone&quot; type=”tel” placeholder=&quot;Digite seu Telefone&quot;&gt;\n\n    &lt;label  class=&quot;lbl&quot; for=&quot;senha&quot;&gt;Senha&lt;/label&gt; &lt;br&gt; &lt;br&gt;\n    &lt;input th:field=&quot;*{senha}&quot; id=&quot;senha&quot; type=”password” placeholder=&quot;Digite sua senha&quot;&gt;\n\n    &lt;input type=&quot;submit&quot; value=&quot;Cadastrar&quot;&gt;&lt;br&gt; &lt;br&gt;&lt;br&gt; &lt;br&gt;&lt;br&gt; &lt;br&gt;\n    &lt;/form&gt;\n</code></pre>\n<p>But when I debug the controller, the Entity Cliente properties comes null...</p>\n<p>I tried the same code in another computer and aparentily works</p>\n<p>Anyone know what can be the problem?</p>\n<p>I tried debug and convert to modelAndView, View, and others tries. But nothing worked</p>\n"},{"tags":["java","android","geolocation","locationmanager","fusedlocationproviderclient"],"comments":[{"owner":{"account_id":1790714,"reputation":91128,"user_id":1631193,"accept_rate":71,"display_name":"Gabe Sechan"},"score":0,"creation_date":1701134842,"post_id":77560420,"comment_id":136735250,"body_markdown":"You&#39;re not requesting runtime permissions.  You&#39;re only checking if you already have them.  You even have a comment talking about it.  You need to actively request permission if they aren&#39;t granted already","body":"You&#39;re not requesting runtime permissions.  You&#39;re only checking if you already have them.  You even have a comment talking about it.  You need to actively request permission if they aren&#39;t granted already"},{"owner":{"account_id":30007873,"reputation":1,"user_id":22996266,"display_name":"HKelz"},"score":0,"creation_date":1701184683,"post_id":77560420,"comment_id":136742241,"body_markdown":"Thanks Gabe, I reread that commented out section and figured out how to request Permissions. I got that issue resolved as well as the casting problem which was because evidently there are 2 &quot;LocationListener&quot; methods.","body":"Thanks Gabe, I reread that commented out section and figured out how to request Permissions. I got that issue resolved as well as the casting problem which was because evidently there are 2 &quot;LocationListener&quot; methods."}],"owner":{"account_id":30007873,"reputation":1,"user_id":22996266,"display_name":"HKelz"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":0,"score":-1,"last_activity_date":1701127430,"creation_date":1701125853,"question_id":77560420,"body_markdown":"I am trying to implement a method to periodically update your current location following clicking a toggle button. I want to be able to have the app produce a latitude, longitude, speed, and bearing/heading every 6 seconds, populating those values into some text views. The biggest issue so far is that every time I run the app, I either get a Null location value or some error relating to casting the main activity to a Location Listener. I am pretty new to Android development, so any help would be appreciated. \r\n\r\n\r\n\r\n```\r\npublic class MainActivity extends AppCompatActivity implements AdapterView.OnItemSelectedListener {\r\n\r\n    //Initializing app components\r\n    String[] rArray = {&quot;Red&quot;, &quot;Green&quot;, &quot;River Campus 1&quot;, &quot;River Campus 2&quot;, &quot;Wings&quot;};\r\n\r\n    private ToggleButton activeToggle;\r\n\r\n    TextView loText;\r\n    TextView laText;\r\n    TextView sText;\r\n    TextView hText;\r\n\r\n\r\n    long refreshTime = 6000;\r\n    float refreshDistance = 0;\r\n\r\n    double dlat, dlon;\r\n\r\n    float speed, heading;\r\n\r\n    String dlonText = &quot;&quot;;\r\n    String dlatText = &quot;&quot;;\r\n    String initSpeed = &quot;&quot;;\r\n    String initHeading = &quot;&quot;;\r\n\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        //Associate ui components to a value;\r\n        activeToggle = findViewById(R.id.activeToggle);\r\n        Spinner rSpinner = findViewById(R.id.routeSpinner);\r\n        hText = findViewById(R.id.headingText);\r\n        sText = findViewById(R.id.speedText);\r\n        laText = findViewById(R.id.latText);\r\n        loText = findViewById(R.id.longText);\r\n        rSpinner.setOnItemSelectedListener(this);\r\n        activeToggle.setBackgroundColor(Color.GREEN);\r\n\r\n\r\n        ArrayAdapter routeAdapt = new ArrayAdapter(this, android.R.layout.simple_spinner_item, rArray);\r\n\r\n        routeAdapt.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);\r\n\r\n        rSpinner.setAdapter(routeAdapt);\r\n\r\n        activeToggle.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n\r\n                if (activeToggle.isChecked()) {\r\n\r\n                    LocationManager locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);\r\n\r\n                    ProviderProperties props = locationManager.getProviderProperties(LocationManager.GPS_PROVIDER);\r\n\r\n                    LocationListener listener = new LocationListener() {\r\n                        @Override\r\n                        public void onLocationChanged(@NonNull Location location) {\r\n\r\n                            dlon = location.getLongitude();\r\n                            dlat = location.getLatitude();\r\n                            speed = location.getSpeed();\r\n                            heading = location.getBearing();\r\n\r\n                            dlonText = String.valueOf(dlon);\r\n                            dlatText = String.valueOf(dlat);\r\n                            initSpeed = String.valueOf(speed);\r\n                            initHeading = String.valueOf(heading);\r\n\r\n                            hText.setText(initHeading);\r\n                            sText.setText(initSpeed);\r\n                            laText.setText(dlatText);\r\n                            loText.setText(dlonText);\r\n\r\n                        }\r\n                    };\r\n\r\n                    if (ActivityCompat.checkSelfPermission(MainActivity.this, android.Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED &amp;&amp; ActivityCompat.checkSelfPermission(MainActivity.this, android.Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED) {\r\n                        // TODO: Consider calling\r\n                        //    ActivityCompat#requestPermissions\r\n                        // here to request the missing permissions, and then overriding\r\n                        //   public void onRequestPermissionsResult(int requestCode, String[] permissions,\r\n                        //                                          int[] grantResults)\r\n                        // to handle the case where the user grants the permission. See the documentation\r\n                        // for ActivityCompat#requestPermissions for more details.\r\n                        return;\r\n                    }\r\n                    locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, refreshTime, refreshDistance, (android.location.LocationListener) listener);\r\n\r\n                    activeToggle.setBackgroundColor(Color.RED);\r\n\r\n                    //String routeText = rSpinner.getSelectedItem().toString();\r\n\r\n\r\n                } else {\r\n\r\n                    activeToggle.setBackgroundColor(Color.GREEN);\r\n\r\n\r\n                }\r\n\r\n            }\r\n        });\r\n\r\n\r\n    }\r\n\r\n\r\n    @Override\r\n    public void onItemSelected(AdapterView&lt;?&gt; parent, View view, int position, long id) {\r\n\r\n        Toast.makeText(getApplicationContext(), rArray[position], Toast.LENGTH_LONG).show();\r\n\r\n    }\r\n\r\n    @Override\r\n    public void onNothingSelected(AdapterView&lt;?&gt; parent) {\r\n\r\n    }\r\n\r\n\r\n}\r\n```\r\n\r\nI have tried using `LocationManager` and `FusedLocationProviderClient`, but when I tried to implement them for my code, they gave me the aforementioned issues of null location value and the casting problem. ","title":"How do you implement a continuous location tracker on button click (Android Studio: Java)","body":"<p>I am trying to implement a method to periodically update your current location following clicking a toggle button. I want to be able to have the app produce a latitude, longitude, speed, and bearing/heading every 6 seconds, populating those values into some text views. The biggest issue so far is that every time I run the app, I either get a Null location value or some error relating to casting the main activity to a Location Listener. I am pretty new to Android development, so any help would be appreciated.</p>\n<pre><code>public class MainActivity extends AppCompatActivity implements AdapterView.OnItemSelectedListener {\n\n    //Initializing app components\n    String[] rArray = {&quot;Red&quot;, &quot;Green&quot;, &quot;River Campus 1&quot;, &quot;River Campus 2&quot;, &quot;Wings&quot;};\n\n    private ToggleButton activeToggle;\n\n    TextView loText;\n    TextView laText;\n    TextView sText;\n    TextView hText;\n\n\n    long refreshTime = 6000;\n    float refreshDistance = 0;\n\n    double dlat, dlon;\n\n    float speed, heading;\n\n    String dlonText = &quot;&quot;;\n    String dlatText = &quot;&quot;;\n    String initSpeed = &quot;&quot;;\n    String initHeading = &quot;&quot;;\n\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        //Associate ui components to a value;\n        activeToggle = findViewById(R.id.activeToggle);\n        Spinner rSpinner = findViewById(R.id.routeSpinner);\n        hText = findViewById(R.id.headingText);\n        sText = findViewById(R.id.speedText);\n        laText = findViewById(R.id.latText);\n        loText = findViewById(R.id.longText);\n        rSpinner.setOnItemSelectedListener(this);\n        activeToggle.setBackgroundColor(Color.GREEN);\n\n\n        ArrayAdapter routeAdapt = new ArrayAdapter(this, android.R.layout.simple_spinner_item, rArray);\n\n        routeAdapt.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);\n\n        rSpinner.setAdapter(routeAdapt);\n\n        activeToggle.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n\n                if (activeToggle.isChecked()) {\n\n                    LocationManager locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);\n\n                    ProviderProperties props = locationManager.getProviderProperties(LocationManager.GPS_PROVIDER);\n\n                    LocationListener listener = new LocationListener() {\n                        @Override\n                        public void onLocationChanged(@NonNull Location location) {\n\n                            dlon = location.getLongitude();\n                            dlat = location.getLatitude();\n                            speed = location.getSpeed();\n                            heading = location.getBearing();\n\n                            dlonText = String.valueOf(dlon);\n                            dlatText = String.valueOf(dlat);\n                            initSpeed = String.valueOf(speed);\n                            initHeading = String.valueOf(heading);\n\n                            hText.setText(initHeading);\n                            sText.setText(initSpeed);\n                            laText.setText(dlatText);\n                            loText.setText(dlonText);\n\n                        }\n                    };\n\n                    if (ActivityCompat.checkSelfPermission(MainActivity.this, android.Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED &amp;&amp; ActivityCompat.checkSelfPermission(MainActivity.this, android.Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED) {\n                        // TODO: Consider calling\n                        //    ActivityCompat#requestPermissions\n                        // here to request the missing permissions, and then overriding\n                        //   public void onRequestPermissionsResult(int requestCode, String[] permissions,\n                        //                                          int[] grantResults)\n                        // to handle the case where the user grants the permission. See the documentation\n                        // for ActivityCompat#requestPermissions for more details.\n                        return;\n                    }\n                    locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, refreshTime, refreshDistance, (android.location.LocationListener) listener);\n\n                    activeToggle.setBackgroundColor(Color.RED);\n\n                    //String routeText = rSpinner.getSelectedItem().toString();\n\n\n                } else {\n\n                    activeToggle.setBackgroundColor(Color.GREEN);\n\n\n                }\n\n            }\n        });\n\n\n    }\n\n\n    @Override\n    public void onItemSelected(AdapterView&lt;?&gt; parent, View view, int position, long id) {\n\n        Toast.makeText(getApplicationContext(), rArray[position], Toast.LENGTH_LONG).show();\n\n    }\n\n    @Override\n    public void onNothingSelected(AdapterView&lt;?&gt; parent) {\n\n    }\n\n\n}\n</code></pre>\n<p>I have tried using <code>LocationManager</code> and <code>FusedLocationProviderClient</code>, but when I tried to implement them for my code, they gave me the aforementioned issues of null location value and the casting problem.</p>\n"},{"tags":["java","websphere","ejb","xdoclet"],"answers":[{"tags":[],"owner":{"account_id":6626438,"reputation":993,"user_id":5116519,"display_name":"Tracy"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1701126613,"creation_date":1700581133,"answer_id":77524080,"question_id":77522426,"body_markdown":"The code that is failing with the ClassCastException is not calling `PortableRemoteObject.narrow()`.  Anytime a remote EJB is looked up in naming it should perform a `PortableRemoteObject.narrow`.\r\n\r\nOften, code will work without the narrow because the ORB will attempt to narrow automatically, but this does not always work, depending on the classpath of the client at the time of the lookup. If the first lookup does not have the stub on the classpath, then you will get the EJBHome stub. Unfortuntely, this can then end up cached in Naming, which may effect other clients as well. Always performing the narrow avoids this issue.\r\n\r\nSince the JNDI lookup is returning an `_EJBHome_Stub`, this means the JNDI name is for a remote home and that the thread context classloader does not have access to the target class, `ReferenceDataBeanHome`. Since the ORB is unable to load `_ReferenceDataBeanHome_Stub`, then it will return `_EJBHome_Stub` instead, which must be narrowed.\r\n\r\nWhat is especially curious with this scenario is that the code does contain a call to narrow, but it is not being called, suggesting that `narrowTo.isInstance(java.rmi.Remote.class)` is returning `false`. Since the home being looked up is a remote home, the `narrowTo` class should implement `javax.ejb.EJBHome`, which extends `java.rmi.Remote` and therefore this method should return `true` and the narrow should be performed.\r\n\r\nI recommend checking the following:\r\n - check that the batch job code path is calling lookupHome with the proper remote JNDI name and proper remote home class. If the batch job code is passing the remote home JNDI name, but the local home interface class, then the narrow would always be skipped, but the application may work properly if the ORB has proactively narrowed due to an earlier lookup from another application.\r\n - check that the `java.rmi.Remote` class is not packaged in the application or otherwise included on the application classpath. Basically, need to determine why the `narrowTo` parameter on `lookupHome` is failing the `isInstance` check. This could happen if `java.rmi.Remote` is loaded by two different classloaders.\r\n\r\nDetermining why `isInstance` is returning false is the best solution. Alternatively, you could make sure the `_ReferenceDataBeanHome_Stub` class is packaged with the batch application, and that may allow the ORB to proactively narrow; however this seems like a workaround.\r\n\r\n","title":"XDoclet-based Stateless Session Bean Compatibility Issue: ClassCastException in WebSphere 9.0.5","body":"<p>The code that is failing with the ClassCastException is not calling <code>PortableRemoteObject.narrow()</code>.  Anytime a remote EJB is looked up in naming it should perform a <code>PortableRemoteObject.narrow</code>.</p>\n<p>Often, code will work without the narrow because the ORB will attempt to narrow automatically, but this does not always work, depending on the classpath of the client at the time of the lookup. If the first lookup does not have the stub on the classpath, then you will get the EJBHome stub. Unfortuntely, this can then end up cached in Naming, which may effect other clients as well. Always performing the narrow avoids this issue.</p>\n<p>Since the JNDI lookup is returning an <code>_EJBHome_Stub</code>, this means the JNDI name is for a remote home and that the thread context classloader does not have access to the target class, <code>ReferenceDataBeanHome</code>. Since the ORB is unable to load <code>_ReferenceDataBeanHome_Stub</code>, then it will return <code>_EJBHome_Stub</code> instead, which must be narrowed.</p>\n<p>What is especially curious with this scenario is that the code does contain a call to narrow, but it is not being called, suggesting that <code>narrowTo.isInstance(java.rmi.Remote.class)</code> is returning <code>false</code>. Since the home being looked up is a remote home, the <code>narrowTo</code> class should implement <code>javax.ejb.EJBHome</code>, which extends <code>java.rmi.Remote</code> and therefore this method should return <code>true</code> and the narrow should be performed.</p>\n<p>I recommend checking the following:</p>\n<ul>\n<li>check that the batch job code path is calling lookupHome with the proper remote JNDI name and proper remote home class. If the batch job code is passing the remote home JNDI name, but the local home interface class, then the narrow would always be skipped, but the application may work properly if the ORB has proactively narrowed due to an earlier lookup from another application.</li>\n<li>check that the <code>java.rmi.Remote</code> class is not packaged in the application or otherwise included on the application classpath. Basically, need to determine why the <code>narrowTo</code> parameter on <code>lookupHome</code> is failing the <code>isInstance</code> check. This could happen if <code>java.rmi.Remote</code> is loaded by two different classloaders.</li>\n</ul>\n<p>Determining why <code>isInstance</code> is returning false is the best solution. Alternatively, you could make sure the <code>_ReferenceDataBeanHome_Stub</code> class is packaged with the batch application, and that may allow the ORB to proactively narrow; however this seems like a workaround.</p>\n"}],"owner":{"account_id":3352721,"reputation":1047,"user_id":2816429,"display_name":"HariHaravelan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77524080,"answer_count":1,"score":1,"last_activity_date":1701126613,"creation_date":1700565836,"question_id":77522426,"body_markdown":"I have a legacy EJB application that was originally developed in Java 1.6 and deployed on WebSphere 8.5 more than a decade ago.\r\nRecently, I upgraded the Java version to 1.8 and the WebSphere version to 9.0.5. The application works fine.\r\n\r\nHowever, I&#39;m encountering a peculiar issue related to a specific XDoclet-based stateless session bean. This bean is annotated with `@ejb.util generate = &quot;physical&quot;.`\r\n\r\nThe issue occurs when the batch job starts first and creates the bean, and then the application attempts to use the bean. I get the following exception:\r\n\r\n    Caused by: java.lang.ClassCastException: org.omg.stub.javax.ejb._EJBHome_Stub incompatible with com.xxx.common.reference.interfaces.ReferenceDataBeanHome\r\n\r\nIf the application creates the bean first and then the batch job uses it, everything works as expected.\r\n\r\n**XDoclet Generated Code:** &lt;br/&gt;\r\nThe narrowing code is already generated by the XDoclet, we can&#39;t edit the code\r\n\r\n     private static Object lookupHome(java.util.Hashtable environment, String jndiName, Class narrowTo) throws javax.naming.NamingException {\r\n          // Obtain initial context\r\n          javax.naming.InitialContext initialContext = new javax.naming.InitialContext(environment);\r\n          try {\r\n             Object objRef = initialContext.lookup(jndiName);\r\n             // only narrow if necessary\r\n             if (narrowTo.isInstance(java.rmi.Remote.class))\r\n                return javax.rmi.PortableRemoteObject.narrow(objRef, narrowTo);\r\n             else\r\n                return objRef;\r\n          } finally {\r\n             initialContext.close();\r\n          }\r\n       }\r\n\r\n**What I tried:**\r\n\r\nI have changed the `@ejb.util generate = &quot;logical&quot;.` based on the [IBM WebSphere suggestion][1] but the Batch job starts to fail if starts after the application creates the Bean\r\n\r\n**Environment:**\r\n\r\n - Java Version: 1.8\r\n - WebSphere Version: 9.0.5\r\n\r\n**Specifics:**\r\n\r\n- The issue is tied to the usage of `@ejb.util generate = &quot;physical&quot;` with XDoclet.\r\n- The exception occurs when the batch job initializes the bean before the application.\r\n\r\n**Question:**\r\n\r\n- What could be causing this ClassCastException when the batch job starts first?\r\n- How can I ensure compatibility in both scenarios: when the application initializes the bean first and when the batch job does?\r\nAny insights, suggestions, or solutions would be greatly appreciated. Thank you!\r\n\r\n\r\n  [1]: https://www.ibm.com/support/pages/classcastexception-when-casting-remote-ejb-home-or-remote-interface-stub-instance","title":"XDoclet-based Stateless Session Bean Compatibility Issue: ClassCastException in WebSphere 9.0.5","body":"<p>I have a legacy EJB application that was originally developed in Java 1.6 and deployed on WebSphere 8.5 more than a decade ago.\nRecently, I upgraded the Java version to 1.8 and the WebSphere version to 9.0.5. The application works fine.</p>\n<p>However, I'm encountering a peculiar issue related to a specific XDoclet-based stateless session bean. This bean is annotated with <code>@ejb.util generate = &quot;physical&quot;.</code></p>\n<p>The issue occurs when the batch job starts first and creates the bean, and then the application attempts to use the bean. I get the following exception:</p>\n<pre><code>Caused by: java.lang.ClassCastException: org.omg.stub.javax.ejb._EJBHome_Stub incompatible with com.xxx.common.reference.interfaces.ReferenceDataBeanHome\n</code></pre>\n<p>If the application creates the bean first and then the batch job uses it, everything works as expected.</p>\n<p><strong>XDoclet Generated Code:</strong> <br/>\nThe narrowing code is already generated by the XDoclet, we can't edit the code</p>\n<pre><code> private static Object lookupHome(java.util.Hashtable environment, String jndiName, Class narrowTo) throws javax.naming.NamingException {\n      // Obtain initial context\n      javax.naming.InitialContext initialContext = new javax.naming.InitialContext(environment);\n      try {\n         Object objRef = initialContext.lookup(jndiName);\n         // only narrow if necessary\n         if (narrowTo.isInstance(java.rmi.Remote.class))\n            return javax.rmi.PortableRemoteObject.narrow(objRef, narrowTo);\n         else\n            return objRef;\n      } finally {\n         initialContext.close();\n      }\n   }\n</code></pre>\n<p><strong>What I tried:</strong></p>\n<p>I have changed the <code>@ejb.util generate = &quot;logical&quot;.</code> based on the <a href=\"https://www.ibm.com/support/pages/classcastexception-when-casting-remote-ejb-home-or-remote-interface-stub-instance\" rel=\"nofollow noreferrer\">IBM WebSphere suggestion</a> but the Batch job starts to fail if starts after the application creates the Bean</p>\n<p><strong>Environment:</strong></p>\n<ul>\n<li>Java Version: 1.8</li>\n<li>WebSphere Version: 9.0.5</li>\n</ul>\n<p><strong>Specifics:</strong></p>\n<ul>\n<li>The issue is tied to the usage of <code>@ejb.util generate = &quot;physical&quot;</code> with XDoclet.</li>\n<li>The exception occurs when the batch job initializes the bean before the application.</li>\n</ul>\n<p><strong>Question:</strong></p>\n<ul>\n<li>What could be causing this ClassCastException when the batch job starts first?</li>\n<li>How can I ensure compatibility in both scenarios: when the application initializes the bean first and when the batch job does?\nAny insights, suggestions, or solutions would be greatly appreciated. Thank you!</li>\n</ul>\n"},{"tags":["java","netty"],"owner":{"account_id":3509735,"reputation":979,"user_id":2970627,"accept_rate":35,"display_name":"Alex Bondar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1701126537,"creation_date":1701126537,"question_id":77560463,"body_markdown":"My pipeline doesn&#39;t work as expected\r\n\r\n    public class DataServerInitializer extends ChannelInitializer&lt;SocketChannel&gt; {\r\n        @Override\r\n        protected void initChannel(SocketChannel socketChannel) throws Exception {\r\n            socketChannel.pipeline().addLast(new ProtobufDecoder(Command.CommandMessage.getDefaultInstance()));\r\n            socketChannel.pipeline().addLast(new ProtobufDecoder(Data.DataMessage.getDefaultInstance()));\r\n    \r\n            socketChannel.pipeline().addLast(new ProtobufEncoder());\r\n            \r\n            socketChannel.pipeline().addLast(new CommandHandler());\r\n            socketChannel.pipeline().addLast(new DataHandler());\r\n        }\r\n    }\r\n\r\nDataHandler is ignored fully","title":"How to organize nettty pipeline?","body":"<p>My pipeline doesn't work as expected</p>\n<pre><code>public class DataServerInitializer extends ChannelInitializer&lt;SocketChannel&gt; {\n    @Override\n    protected void initChannel(SocketChannel socketChannel) throws Exception {\n        socketChannel.pipeline().addLast(new ProtobufDecoder(Command.CommandMessage.getDefaultInstance()));\n        socketChannel.pipeline().addLast(new ProtobufDecoder(Data.DataMessage.getDefaultInstance()));\n\n        socketChannel.pipeline().addLast(new ProtobufEncoder());\n        \n        socketChannel.pipeline().addLast(new CommandHandler());\n        socketChannel.pipeline().addLast(new DataHandler());\n    }\n}\n</code></pre>\n<p>DataHandler is ignored fully</p>\n"},{"tags":["java","javafx","mouseevent"],"comments":[{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":2,"creation_date":1650541960,"post_id":71953676,"comment_id":127145453,"body_markdown":"You need to process `MouseDragEvent`s instead of `MouseEvent`s, so you can process `mouseDragReleased` events. See the &quot;Dragging Gestures&quot; section of the [documentation](https://openjfx.io/javadoc/17/javafx.graphics/javafx/scene/input/MouseEvent.html) (and follow the appropriate links from there).","body":"You need to process <code>MouseDragEvent</code>s instead of <code>MouseEvent</code>s, so you can process <code>mouseDragReleased</code> events. See the &quot;Dragging Gestures&quot; section of the <a href=\"https://openjfx.io/javadoc/17/javafx.graphics/javafx/scene/input/MouseEvent.html\" rel=\"nofollow noreferrer\">documentation</a> (and follow the appropriate links from there)."}],"answers":[{"tags":[],"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1701126141,"creation_date":1650588920,"answer_id":71962336,"question_id":71953676,"body_markdown":"Oracle provides an excellent tutorial on using [drag and drop in JavaFX][1]. \r\n\r\nYou probably want to make use of the [Dragboard][2], which is a special kind of [Clipboard][3].\r\n\r\n**Points to note**\r\n\r\n 1. You may not actually need to move the tiles that you have created. They are ImageViews. \r\n\r\n 2. You can place the image associated with the source in the dragboard and change the image in the target view when it is dropped. \r\n\r\n 3. You can set the dragView on the dragboard for visual feedback of the drag operation.  \r\n\r\n 4. You can use a custom content type for the dragboard rather than an image, this is explained in the linked Oracle tutorial.\r\n\r\n    &gt;     private static final DataFormat customFormat =\r\n    &gt;        new DataFormat(&quot;helloworld.custom&quot;);\r\n    &gt; \r\n    &gt; When putting a custom data onto a dragboard, specify the data type. Note that the data must be serializable.\r\n    &gt; \r\n    &gt; When reading the data from the dragboard, a proper casting is needed.\r\n\r\n**Potential Approaches**\r\n\r\nThere are two ways you can handle the tile display.  \r\n\r\n1. Tile view and model.\r\n\r\nCreate a separate tile view and tile model interface. \r\n\r\nWhen the tiles change, don&#39;t change the view, only change the model instance backing the view.  The view observes its model for changes and automatically updates itself.  New nodes are not created and existing nodes are not moved.\r\n\r\nThat is the approach in the example below.  The view is an ImageView and the model is an Image.\r\n\r\n2. Encapsulate view and model together.\r\n\r\nIn this case, you place the information about the model in the view.\r\n\r\nWhen a node is placed in the grid, you record it&#39;s grid position, for example by member values in the node or by setting user data on the node.\r\n\r\nWhen a node is dragged to a new position, you query the source node for its position, then you swap the source and target nodes in the grid using:\r\n\r\n    GridPane.setConstraints(node, columnIndex, rowIndex)\r\n\r\nThis is essentially the approach you propose in your question.\r\n\r\nI do not provide an implementation for this second potential approach.\r\n\r\n**Example**\r\n\r\nThe images are images of the grid before and after manually dragging the tiles to reorder them.\r\n\r\n[![before][4]][4]\r\n[![after][5]][5]\r\n\r\nThe example is not going to be exactly what you want, it is purely provided as an example and you will need to adapt it if you wish to make use of some of the concepts in it.\r\n\r\nThe ImageViewFactory is just to create test images, you can ignore that portion.\r\n\r\nDragging specific stuff is in the DragUtil class.\r\n\r\nCode uses Java 18 and newer Java language features, so to compile it you will need to enable the appropriate language level.\r\n\r\n    import javafx.application.Application;\r\n    import javafx.geometry.Insets;\r\n    import javafx.scene.Node;\r\n    import javafx.scene.Scene;\r\n    import javafx.scene.SnapshotParameters;\r\n    import javafx.scene.control.Label;\r\n    import javafx.scene.effect.*;\r\n    import javafx.scene.image.*;\r\n    import javafx.scene.input.*;\r\n    import javafx.scene.layout.*;\r\n    import javafx.scene.paint.Color;\r\n    import javafx.stage.Stage;\r\n    \r\n    import java.util.Arrays;\r\n    import java.util.Collections;\r\n    import java.util.List;\r\n    import java.util.stream.Collectors;\r\n    \r\n    public class TileDragApp extends Application {\r\n        private static final String TEXT = &quot;abcdefghijklmnop&quot;;\r\n    \r\n        private static final int GRID_SIZE = 4;\r\n        private static final int TILE_SIZE = 60;\r\n    \r\n        @Override\r\n        public void start(Stage stage) {\r\n            ImageViewFactory imageViewFactory = new ImageViewFactory();\r\n            ImageView[] imageViews = imageViewFactory.makeImageViews(\r\n                    TEXT, \r\n                    TILE_SIZE\r\n            );\r\n    \r\n            DragUtil dragUtil = new DragUtil();\r\n    \r\n            GridPane grid = new GridPane();\r\n            for (int i = 0; i &lt; TEXT.length(); i++) {\r\n                dragUtil.makeDraggable(imageViews[i], imageViews);\r\n                grid.add(imageViews[i], i % GRID_SIZE, i / GRID_SIZE);\r\n            }\r\n            grid.setGridLinesVisible(true);\r\n            grid.setPadding(new Insets(20));\r\n    \r\n            stage.setScene(new Scene(grid));\r\n            stage.setResizable(false);\r\n            stage.show();\r\n        }\r\n    \r\n        public static void main(String[] args) {\r\n            launch();\r\n        }\r\n    }\r\n    \r\n    class ImageViewFactory {\r\n        private static final String CSS =\r\n                &quot;&quot;&quot;\r\n                data:text/css,\r\n                &quot;&quot;&quot; +\r\n                // language=CSS\r\n                &quot;&quot;&quot;\r\n                .root {\r\n                    -fx-background-color: azure;\r\n                }\r\n                \r\n                .label {\r\n                    -fx-font-size: 40px;\r\n                    -fx-text-fill: navy;\r\n                }\r\n                &quot;&quot;&quot;;\r\n    \r\n        public ImageView[] makeImageViews(String text, int tileSize) {\r\n            List&lt;Character&gt; chars =\r\n                    text.chars()\r\n                            .mapToObj(\r\n                                    c -&gt; (char) c\r\n                            ).collect(\r\n                                    Collectors.toList()\r\n                            );\r\n    \r\n            Collections.shuffle(chars);\r\n    \r\n            return chars.stream()\r\n                    .map(\r\n                            c -&gt; makeImageView(c, tileSize)\r\n                    ).toArray(\r\n                            ImageView[]::new\r\n                    );\r\n        }\r\n    \r\n        private ImageView makeImageView(char c, int tileSize) {\r\n            Label label = new Label(Character.toString(c));\r\n    \r\n            StackPane layout = new StackPane(label);\r\n            layout.setPrefSize(tileSize, tileSize);\r\n    \r\n            Scene scene = new Scene(layout);\r\n            scene.getStylesheets().add(CSS);\r\n    \r\n            SnapshotParameters snapshotParameters = new SnapshotParameters();\r\n            snapshotParameters.setFill(Color.AZURE);\r\n    \r\n            Image image = layout.snapshot(snapshotParameters,null);\r\n    \r\n            return new ImageView(image);\r\n        }\r\n    }\r\n    \r\n    class DragUtil {\r\n        public void makeDraggable(ImageView imageView, Node[] acceptedSources) {\r\n            Effect highlight = createHighlightEffect(imageView);\r\n    \r\n            imageView.setOnDragDetected(e -&gt; {\r\n                Dragboard db = imageView.startDragAndDrop(TransferMode.MOVE);\r\n    \r\n                ClipboardContent content = new ClipboardContent();\r\n                content.putImage(imageView.getImage());\r\n                db.setContent(content);\r\n                db.setDragView(makeSmaller(imageView.getImage()));\r\n    \r\n                e.consume();\r\n            });\r\n    \r\n            imageView.setOnDragOver(e -&gt; {\r\n                if (e.getGestureSource() != imageView\r\n                        &amp;&amp; Arrays.stream(acceptedSources)\r\n                                 .anyMatch(source -&gt; source == e.getGestureSource())\r\n                        &amp;&amp; e.getDragboard().hasImage()\r\n                ) {\r\n                    e.acceptTransferModes(TransferMode.MOVE);\r\n                    imageView.setEffect(highlight);\r\n                    e.consume();\r\n                }\r\n            });\r\n    \r\n            imageView.setOnDragExited(e -&gt; {\r\n                imageView.setEffect(null);\r\n    \r\n                e.consume();\r\n            });\r\n    \r\n            imageView.setOnDragDropped(e -&gt; {\r\n                Dragboard db = e.getDragboard();\r\n                boolean success = false;\r\n    \r\n                if (db.hasImage() &amp;&amp; e.getGestureSource() instanceof ImageView source) {\r\n                    source.setImage(imageView.getImage());\r\n                    imageView.setImage(db.getImage());\r\n    \r\n                    success = true;\r\n                }\r\n    \r\n                e.setDropCompleted(success);\r\n    \r\n                e.consume();\r\n            });\r\n        }\r\n    \r\n        private Image makeSmaller(Image image) {\r\n            ImageView resizeView = new ImageView(image);\r\n            resizeView.setFitHeight(image.getHeight() * 3 / 4);\r\n            resizeView.setFitWidth(image.getWidth() * 3 / 4);\r\n    \r\n            SnapshotParameters snapshotParameters = new SnapshotParameters();\r\n    \r\n            return resizeView.snapshot(snapshotParameters, null);\r\n        }\r\n    \r\n        private Effect createHighlightEffect(Node n) {\r\n            ColorAdjust monochrome = new ColorAdjust();\r\n            monochrome.setSaturation(-1.0);\r\n    \r\n            return new Blend(\r\n                    BlendMode.MULTIPLY,\r\n                    monochrome,\r\n                    new ColorInput(\r\n                            0,\r\n                            0,\r\n                            n.getLayoutBounds().getWidth(),\r\n                            n.getLayoutBounds().getHeight(),\r\n                            Color.PALEGREEN\r\n                    )\r\n            );\r\n        }\r\n    }\r\n\r\n  [1]: https://docs.oracle.com/javase/8/javafx/events-tutorial/drag_drop_feature.htm\r\n  [2]: https://openjfx.io/javadoc/17/javafx.graphics/javafx/scene/input/Dragboard.html\r\n  [3]: https://openjfx.io/javadoc/17/javafx.graphics/javafx/scene/input/Clipboard.html\r\n  [4]: https://i.stack.imgur.com/zAuaU.png\r\n  [5]: https://i.stack.imgur.com/7X4B8.png\r\n","title":"How to change positions of node in a GridPane","body":"<p>Oracle provides an excellent tutorial on using <a href=\"https://docs.oracle.com/javase/8/javafx/events-tutorial/drag_drop_feature.htm\" rel=\"nofollow noreferrer\">drag and drop in JavaFX</a>.</p>\n<p>You probably want to make use of the <a href=\"https://openjfx.io/javadoc/17/javafx.graphics/javafx/scene/input/Dragboard.html\" rel=\"nofollow noreferrer\">Dragboard</a>, which is a special kind of <a href=\"https://openjfx.io/javadoc/17/javafx.graphics/javafx/scene/input/Clipboard.html\" rel=\"nofollow noreferrer\">Clipboard</a>.</p>\n<p><strong>Points to note</strong></p>\n<ol>\n<li><p>You may not actually need to move the tiles that you have created. They are ImageViews.</p>\n</li>\n<li><p>You can place the image associated with the source in the dragboard and change the image in the target view when it is dropped.</p>\n</li>\n<li><p>You can set the dragView on the dragboard for visual feedback of the drag operation.</p>\n</li>\n<li><p>You can use a custom content type for the dragboard rather than an image, this is explained in the linked Oracle tutorial.</p>\n<blockquote>\n<pre><code>private static final DataFormat customFormat =\n   new DataFormat(&quot;helloworld.custom&quot;);\n</code></pre>\n<p>When putting a custom data onto a dragboard, specify the data type. Note that the data must be serializable.</p>\n<p>When reading the data from the dragboard, a proper casting is needed.</p>\n</blockquote>\n</li>\n</ol>\n<p><strong>Potential Approaches</strong></p>\n<p>There are two ways you can handle the tile display.</p>\n<ol>\n<li>Tile view and model.</li>\n</ol>\n<p>Create a separate tile view and tile model interface.</p>\n<p>When the tiles change, don't change the view, only change the model instance backing the view.  The view observes its model for changes and automatically updates itself.  New nodes are not created and existing nodes are not moved.</p>\n<p>That is the approach in the example below.  The view is an ImageView and the model is an Image.</p>\n<ol start=\"2\">\n<li>Encapsulate view and model together.</li>\n</ol>\n<p>In this case, you place the information about the model in the view.</p>\n<p>When a node is placed in the grid, you record it's grid position, for example by member values in the node or by setting user data on the node.</p>\n<p>When a node is dragged to a new position, you query the source node for its position, then you swap the source and target nodes in the grid using:</p>\n<pre><code>GridPane.setConstraints(node, columnIndex, rowIndex)\n</code></pre>\n<p>This is essentially the approach you propose in your question.</p>\n<p>I do not provide an implementation for this second potential approach.</p>\n<p><strong>Example</strong></p>\n<p>The images are images of the grid before and after manually dragging the tiles to reorder them.</p>\n<p><a href=\"https://i.stack.imgur.com/zAuaU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zAuaU.png\" alt=\"before\" /></a>\n<a href=\"https://i.stack.imgur.com/7X4B8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7X4B8.png\" alt=\"after\" /></a></p>\n<p>The example is not going to be exactly what you want, it is purely provided as an example and you will need to adapt it if you wish to make use of some of the concepts in it.</p>\n<p>The ImageViewFactory is just to create test images, you can ignore that portion.</p>\n<p>Dragging specific stuff is in the DragUtil class.</p>\n<p>Code uses Java 18 and newer Java language features, so to compile it you will need to enable the appropriate language level.</p>\n<pre><code>import javafx.application.Application;\nimport javafx.geometry.Insets;\nimport javafx.scene.Node;\nimport javafx.scene.Scene;\nimport javafx.scene.SnapshotParameters;\nimport javafx.scene.control.Label;\nimport javafx.scene.effect.*;\nimport javafx.scene.image.*;\nimport javafx.scene.input.*;\nimport javafx.scene.layout.*;\nimport javafx.scene.paint.Color;\nimport javafx.stage.Stage;\n\nimport java.util.Arrays;\nimport java.util.Collections;\nimport java.util.List;\nimport java.util.stream.Collectors;\n\npublic class TileDragApp extends Application {\n    private static final String TEXT = &quot;abcdefghijklmnop&quot;;\n\n    private static final int GRID_SIZE = 4;\n    private static final int TILE_SIZE = 60;\n\n    @Override\n    public void start(Stage stage) {\n        ImageViewFactory imageViewFactory = new ImageViewFactory();\n        ImageView[] imageViews = imageViewFactory.makeImageViews(\n                TEXT, \n                TILE_SIZE\n        );\n\n        DragUtil dragUtil = new DragUtil();\n\n        GridPane grid = new GridPane();\n        for (int i = 0; i &lt; TEXT.length(); i++) {\n            dragUtil.makeDraggable(imageViews[i], imageViews);\n            grid.add(imageViews[i], i % GRID_SIZE, i / GRID_SIZE);\n        }\n        grid.setGridLinesVisible(true);\n        grid.setPadding(new Insets(20));\n\n        stage.setScene(new Scene(grid));\n        stage.setResizable(false);\n        stage.show();\n    }\n\n    public static void main(String[] args) {\n        launch();\n    }\n}\n\nclass ImageViewFactory {\n    private static final String CSS =\n            &quot;&quot;&quot;\n            data:text/css,\n            &quot;&quot;&quot; +\n            // language=CSS\n            &quot;&quot;&quot;\n            .root {\n                -fx-background-color: azure;\n            }\n            \n            .label {\n                -fx-font-size: 40px;\n                -fx-text-fill: navy;\n            }\n            &quot;&quot;&quot;;\n\n    public ImageView[] makeImageViews(String text, int tileSize) {\n        List&lt;Character&gt; chars =\n                text.chars()\n                        .mapToObj(\n                                c -&gt; (char) c\n                        ).collect(\n                                Collectors.toList()\n                        );\n\n        Collections.shuffle(chars);\n\n        return chars.stream()\n                .map(\n                        c -&gt; makeImageView(c, tileSize)\n                ).toArray(\n                        ImageView[]::new\n                );\n    }\n\n    private ImageView makeImageView(char c, int tileSize) {\n        Label label = new Label(Character.toString(c));\n\n        StackPane layout = new StackPane(label);\n        layout.setPrefSize(tileSize, tileSize);\n\n        Scene scene = new Scene(layout);\n        scene.getStylesheets().add(CSS);\n\n        SnapshotParameters snapshotParameters = new SnapshotParameters();\n        snapshotParameters.setFill(Color.AZURE);\n\n        Image image = layout.snapshot(snapshotParameters,null);\n\n        return new ImageView(image);\n    }\n}\n\nclass DragUtil {\n    public void makeDraggable(ImageView imageView, Node[] acceptedSources) {\n        Effect highlight = createHighlightEffect(imageView);\n\n        imageView.setOnDragDetected(e -&gt; {\n            Dragboard db = imageView.startDragAndDrop(TransferMode.MOVE);\n\n            ClipboardContent content = new ClipboardContent();\n            content.putImage(imageView.getImage());\n            db.setContent(content);\n            db.setDragView(makeSmaller(imageView.getImage()));\n\n            e.consume();\n        });\n\n        imageView.setOnDragOver(e -&gt; {\n            if (e.getGestureSource() != imageView\n                    &amp;&amp; Arrays.stream(acceptedSources)\n                             .anyMatch(source -&gt; source == e.getGestureSource())\n                    &amp;&amp; e.getDragboard().hasImage()\n            ) {\n                e.acceptTransferModes(TransferMode.MOVE);\n                imageView.setEffect(highlight);\n                e.consume();\n            }\n        });\n\n        imageView.setOnDragExited(e -&gt; {\n            imageView.setEffect(null);\n\n            e.consume();\n        });\n\n        imageView.setOnDragDropped(e -&gt; {\n            Dragboard db = e.getDragboard();\n            boolean success = false;\n\n            if (db.hasImage() &amp;&amp; e.getGestureSource() instanceof ImageView source) {\n                source.setImage(imageView.getImage());\n                imageView.setImage(db.getImage());\n\n                success = true;\n            }\n\n            e.setDropCompleted(success);\n\n            e.consume();\n        });\n    }\n\n    private Image makeSmaller(Image image) {\n        ImageView resizeView = new ImageView(image);\n        resizeView.setFitHeight(image.getHeight() * 3 / 4);\n        resizeView.setFitWidth(image.getWidth() * 3 / 4);\n\n        SnapshotParameters snapshotParameters = new SnapshotParameters();\n\n        return resizeView.snapshot(snapshotParameters, null);\n    }\n\n    private Effect createHighlightEffect(Node n) {\n        ColorAdjust monochrome = new ColorAdjust();\n        monochrome.setSaturation(-1.0);\n\n        return new Blend(\n                BlendMode.MULTIPLY,\n                monochrome,\n                new ColorInput(\n                        0,\n                        0,\n                        n.getLayoutBounds().getWidth(),\n                        n.getLayoutBounds().getHeight(),\n                        Color.PALEGREEN\n                )\n        );\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":24648927,"reputation":57,"user_id":18546254,"display_name":"ashwor11"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":665,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":71962336,"answer_count":1,"score":2,"last_activity_date":1701126141,"creation_date":1650540519,"question_id":71953676,"body_markdown":"I have an 4x4 gridpane object consists of Tiles, extends ImageView, and i want to create method for changing places of connected Tiles by mouse drag and drop. I&#39;ve figured out how to take first element which drag started but I couldn&#39;t get the referances of the ImageView which in drag dropped.\r\n\r\nTile Class\r\n\r\n    public class Tile extends ImageView {\r\n        protected int xCoordinate;\r\n        protected int yCoordinate;\r\n        protected boolean isMoveable;\r\n        \r\n        protected ArrayList&lt;Point2D&gt; points = new ArrayList&lt;&gt;();\r\n        \r\n\r\n        public Tile(int xCoordinate, int yCoordinate) {\r\n            this.xCoordinate = xCoordinate;\r\n            this.yCoordinate = yCoordinate;\r\n            super.setFitHeight(125);\r\n            super.setFitWidth(125);\r\n        }}\r\nGridPane codes\r\n\r\n\r\n    GridPane gridPane = new GridPane();\r\n    for (Tile tile : tiles){\r\n        gridPane.add(tile,tile.getXCoordinate(),tile.getYCoordinate());\r\n    }\r\n    StackPane centerPane = new StackPane();\r\n    centerPane.setStyle(&quot;-fx-background-color: white;&quot;);\r\n    centerPane.getChildren().add(gridPane);\r\n    centerPane.setPadding(new Insets(0,50,0,50));\r\n\r\nI have tried this but I don&#39;t know how to get referance of connected Tile\r\n\r\n            gridPane.setOnMouseDragged(e-&gt;{\r\n            System.out.println(e.getTarget());\r\n\r\n            gridPane.setOnMouseReleased(e1-&gt;{\r\n                System.out.println(e1.getTarget());\r\n            });\r\n        });\r\n\r\nI have created the codes for changing places but I should get the referance of the connected Tile when mouse released.\r\n\r\n","title":"How to change positions of node in a GridPane","body":"<p>I have an 4x4 gridpane object consists of Tiles, extends ImageView, and i want to create method for changing places of connected Tiles by mouse drag and drop. I've figured out how to take first element which drag started but I couldn't get the referances of the ImageView which in drag dropped.</p>\n<p>Tile Class</p>\n<pre><code>public class Tile extends ImageView {\n    protected int xCoordinate;\n    protected int yCoordinate;\n    protected boolean isMoveable;\n    \n    protected ArrayList&lt;Point2D&gt; points = new ArrayList&lt;&gt;();\n    \n\n    public Tile(int xCoordinate, int yCoordinate) {\n        this.xCoordinate = xCoordinate;\n        this.yCoordinate = yCoordinate;\n        super.setFitHeight(125);\n        super.setFitWidth(125);\n    }}\n</code></pre>\n<p>GridPane codes</p>\n<pre><code>GridPane gridPane = new GridPane();\nfor (Tile tile : tiles){\n    gridPane.add(tile,tile.getXCoordinate(),tile.getYCoordinate());\n}\nStackPane centerPane = new StackPane();\ncenterPane.setStyle(&quot;-fx-background-color: white;&quot;);\ncenterPane.getChildren().add(gridPane);\ncenterPane.setPadding(new Insets(0,50,0,50));\n</code></pre>\n<p>I have tried this but I don't know how to get referance of connected Tile</p>\n<pre><code>        gridPane.setOnMouseDragged(e-&gt;{\n        System.out.println(e.getTarget());\n\n        gridPane.setOnMouseReleased(e1-&gt;{\n            System.out.println(e1.getTarget());\n        });\n    });\n</code></pre>\n<p>I have created the codes for changing places but I should get the referance of the connected Tile when mouse released.</p>\n"},{"tags":["java","spring","controller","thymeleaf"],"answers":[{"tags":[],"owner":{"account_id":13689348,"reputation":13,"user_id":9877585,"display_name":"boofar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701117227,"creation_date":1701117227,"answer_id":77559778,"question_id":77559472,"body_markdown":"This code won&#39;t run as you&#39;re mapping the resource &quot;/ticket/new&quot; more than one time, so Spring does not know which method to invoke.\r\n","title":"Thymeleaf not processing templates properly","body":"<p>This code won't run as you're mapping the resource &quot;/ticket/new&quot; more than one time, so Spring does not know which method to invoke.</p>\n"}],"owner":{"account_id":30006816,"reputation":1,"user_id":22995483,"display_name":"starcat"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1701126034,"creation_date":1701113561,"question_id":77559472,"body_markdown":"I have been developing a simple project with frontend and backend for managing the university IT tickets. After implementing different approaches (and all of them working well) being the last using Spring and a MySQL database we needed to do it using thymeleaf but for some reason it does not save nor display the info. I&#39;ve checked and the paths and password for the database in the application.properties are correct and all dependencies are in the pom.xml. Here is the code:\r\n\r\nTicketController :\r\n```\r\npackage ch.supsi.webapp.web.controller;\r\n\r\nimport ch.supsi.webapp.web.model.Status;\r\nimport ch.supsi.webapp.web.model.Ticket;\r\nimport ch.supsi.webapp.web.repository.TicketRepository;\r\nimport ch.supsi.webapp.web.service.TicketService;\r\n\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.stereotype.Controller;\r\nimport org.springframework.ui.Model;\r\nimport org.springframework.web.bind.annotation.*;\r\n\r\nimport java.io.IOException;\r\nimport java.util.List;\r\nimport java.util.Optional;\r\n\r\n@Controller\r\n\r\npublic class TicketController  {\r\n\r\n    TicketService service;\r\n\r\n\r\n    public TicketController(TicketRepository repository,TicketService service) {\r\n        this.service=service;\r\n    }\r\n\r\n\r\n\r\n\r\n    @GetMapping(&quot;/index&quot;)\r\n    public String index(Model model){\r\n        model.addAttribute(&quot;tickets&quot;,service.list());\r\n        //model.addAttribute(&quot;openTickets&quot;, service.findLast5ByStatus(Status.OPEN));\r\n        //model.addAttribute(&quot;closedTickets&quot;, service.findLast5ByStatus(Status.CLOSED));\r\n        return &quot;index&quot;;\r\n    }\r\n\r\n\r\n    @PostMapping(&quot;/ticket/new&quot;)\r\n    public String newPost(Model model){\r\n        model.addAttribute(&quot;ticket&quot;, new Ticket());\r\n        model.addAttribute(&quot;isNew&quot;, true);\r\n        model.addAttribute(&quot;authors&quot;, service.getAuthors());\r\n        return &quot;redirect:/&quot;;\r\n    }\r\n\r\n    @PostMapping(&quot;/ticket/new&quot;)\r\n    public String post(Ticket ticket) throws IOException {\r\n        service.save(ticket);\r\n        return &quot;redirect:/&quot;;\r\n    }\r\n\r\n\r\n\r\n\r\n}\r\n```\r\nTicket Service\r\n\r\n```\r\npackage ch.supsi.webapp.web.service;\r\nimport ch.supsi.webapp.web.model.Status;\r\nimport ch.supsi.webapp.web.model.Ticket;\r\nimport ch.supsi.webapp.web.repository.TicketRepository;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.stereotype.Service;\r\nimport ch.supsi.webapp.web.model.Author;\r\nimport ch.supsi.webapp.web.repository.AuthorRepository;\r\nimport java.util.List;\r\n\r\nimport java.util.Optional;\r\n\r\n@Service\r\npublic class TicketService {\r\n\r\n    private final TicketRepository repository;\r\n    private final AuthorRepository authorRepository;\r\n\r\n    public TicketService(TicketRepository ticketRepository, AuthorRepository authorRepository) {\r\n        this.repository = ticketRepository;\r\n        this.authorRepository = authorRepository;\r\n    }\r\n    public void save(Ticket ticket) {\r\n        repository.save(ticket);\r\n    }\r\n\r\n\r\n    public void remove(long id) {\r\n        repository.deleteById((int) id);\r\n    }\r\n\r\n    public Optional&lt;Ticket&gt; read(long id){\r\n       return repository.findById((int) id);\r\n    }\r\n    public  List&lt;Ticket&gt; list() {\r\n        return (List&lt;Ticket&gt;) repository.findAll();\r\n    }\r\n\r\n   public void update(long id , Ticket ticket){\r\n       Optional&lt;Ticket&gt; optionalTicket = repository.findById((int) id);\r\n      // Optional&lt;Ticket&gt; optionalAuthor = repository.findById(ticket.getAuthor());\r\n           Ticket existingTicket = optionalTicket.get();\r\n           //existingTicket.setAuthor(ticket.getAuthor());\r\n           existingTicket.setTitle(ticket.getTitle());\r\n           existingTicket.setDescription(ticket.getDescription());\r\n           repository.save(existingTicket);\r\n\r\n    }\r\n\r\n    public List&lt;Ticket&gt; findLast5ByStatus(Status ticketStatus){\r\n        return repository.findByStatusOrderByDateDesc(ticketStatus);\r\n\r\n\r\n\r\n    }\r\n    public List&lt;Author&gt; getAuthors() {\r\n        return (List&lt;Author&gt;) authorRepository.findAll();}\r\n    public boolean exists(int id) {\r\n        return repository.existsById(id);\r\n    }\r\n\r\n}\r\n```\r\n\r\n\r\nTicketRepository\r\n\r\n```\r\npackage ch.supsi.webapp.web.repository;\r\n\r\nimport ch.supsi.webapp.web.model.Status;\r\nimport ch.supsi.webapp.web.model.Ticket;\r\nimport org.springframework.data.repository.CrudRepository;\r\nimport org.springframework.stereotype.Repository;\r\n\r\nimport java.util.List;\r\n\r\n\r\n@Repository\r\npublic interface TicketRepository extends CrudRepository&lt;Ticket, Integer&gt;\r\n{\r\n    List&lt;Ticket&gt; findByStatusOrderByDateDesc(Status ticketStatus);\r\n    //public Ticket findTicket(long id);\r\n\r\n    //public void setChanges(Ticket ticket);\r\n}\r\n```\r\n\r\n\r\n/ticket/new.html \r\n\r\n```\r\n&lt;!DOCTYPE html&gt;\r\n&lt;html lang=&quot;en&quot;&gt;\r\n\r\n&lt;head&gt;\r\n&lt;/head&gt;\r\n\r\n&lt;body&gt;\r\n&lt;header&gt;\r\n    &lt;img alt=&quot;SUPSI&quot; height=&quot;32&quot; src=&quot;https://www.supsi.ch/o/supsi-theme/images/supsi-logo.svg&quot; width=&quot;117&quot;&gt;\r\n    &lt;h1&gt;SUPSI Tickets&lt;/h1&gt;\r\n&lt;/header&gt;\r\n&lt;nav&gt;\r\n    &lt;hr&gt;\r\n    &lt;a th:href=&quot;@{/static}&quot;&gt;Home&lt;/a&gt; |\r\n    &lt;a&gt;New ticket&lt;/a&gt; |\r\n    &lt;hr&gt;\r\n&lt;/nav&gt;\r\n&lt;form method=&quot;post&quot; th:action=&quot;@{/ticket/new}&quot;  th:object=&quot;${ch.supsi.webapp.web.model.Ticket}&quot;&gt;\r\n    &lt;fieldset&gt;\r\n        &lt;legend&gt;New ticket&lt;/legend&gt;\r\n        &lt;div&gt;\r\n            &lt;label &gt;Title:\r\n            &lt;input th:field=&quot;*{title}&quot; type=&quot;text&quot;&gt;\r\n            &lt;/label&gt;\r\n        &lt;/div&gt;\r\n        &lt;div&gt;\r\n            &lt;label for=&quot;author&quot;&gt;Author:&lt;/label&gt;\r\n            &lt;input id=&quot;author&quot; class=&quot;form-select&quot; th:field=&quot;*{author}&quot;&gt;\r\n\r\n        &lt;/div&gt;\r\n        &lt;div &gt;\r\n            &lt;label for=&quot;status&quot;&gt;Status:&lt;/label&gt;\r\n            &lt;select id=&quot;status&quot; th:field=&quot;*{status}&quot;&gt;\r\n                &lt;option th:each=&quot;status : ${T(ch.supsi.webapp.web.model.Status).values()}&quot; th:value=&quot;${status.values()}&quot; th:text=&quot;${status.values()}&quot;&gt;&lt;/option&gt;\r\n            &lt;/select&gt;\r\n        &lt;/div&gt;\r\n        &lt;div&gt;\r\n            &lt;label for=&quot;type&quot;&gt;Type:&lt;/label&gt;\r\n            &lt;select id=&quot;type&quot; th:field=&quot;*{type}&quot;&gt;\r\n                &lt;option th:each=&quot;type : ${T(ch.supsi.webapp.web.model.Type).values}&quot; th:value=&quot;${type}&quot; th:text=&quot;${type}&quot;&gt;Bug&lt;/option&gt;\r\n            &lt;/select&gt;\r\n        &lt;/div&gt;\r\n        &lt;div&gt;\r\n            &lt;label &gt;Description:&lt;/label&gt;\r\n            &lt;textarea th:field=&quot;*{description}&quot;&gt;&lt;/textarea&gt;\r\n        &lt;/div&gt;\r\n    &lt;/fieldset&gt;\r\n    &lt;input type=&quot;submit&quot; th:value=&quot;${isNew} ? &#39;Create ticket&#39;:&#39;Update ticket&#39;&quot;&gt;\r\n&lt;/form&gt;\r\n&lt;footer&gt;\r\n    &lt;hr&gt;\r\n    &lt;small&gt;TICKETS Copyleft CC-by\r\n        &lt;time datetime=&quot;2022&quot;&gt;2022&lt;/time&gt;\r\n        by L:S&lt;/small&gt;\r\n    &lt;hr&gt;\r\n&lt;/footer&gt;\r\n&lt;/body&gt;\r\n\r\n&lt;/html&gt;\r\n```\r\n\r\n\r\nindex.html \r\n\r\n```\r\n&lt;!DOCTYPE html&gt;\r\n&lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;\r\n&lt;html lang=&quot;en&quot;&gt;\r\n&lt;head&gt;\r\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;style.css&quot;&gt;\r\n    &lt;title&gt; This is PP5 page&lt;/title&gt;\r\n&lt;/head&gt;\r\n&lt;body&gt;\r\n    &lt;nav&gt;\r\n        &lt;ul&gt;\r\n            &lt;div class=&quot;item&quot;&gt; &lt;a href=&quot;index.html&quot; &gt;Home&lt;/a&gt;&lt;/div&gt;\r\n            &lt;div class=&quot;item&quot;&gt;&lt;a  th:href=&quot;@{/ticket/new}&quot; href=&quot;ticket/new.html&quot; &gt;New Ticket &lt;/a&gt;&lt;/div&gt;\r\n            &lt;div class=&quot;item&quot;&gt;&lt;a href=&quot;ticket1Details.html&quot;&gt;Ticket 1 details&lt;/a&gt;&lt;/div&gt;\r\n        &lt;/ul&gt;\r\n    &lt;/nav&gt;\r\n    &lt;header &gt;\r\n        &lt;h2&gt;Welcome ! &lt;/h2&gt;\r\n    &lt;/header&gt;\r\n    &lt;main&gt;\r\n    &lt;div&gt; &lt;h2&gt; Ticket management system &lt;/h2&gt;&lt;/div&gt;\r\n        &lt;section&gt;\r\n            &lt;h2&gt;Open tickets&lt;/h2&gt;\r\n            &lt;article th:each=&quot;ticket : ${tickets}&quot;&gt;\r\n                &lt;span th:text=&quot;${#dates.format(ticket.date, &#39;dd.MM.yyyy HH:mm&#39;)}&quot;&gt;&lt;/span&gt;\r\n                &lt;h3 th:text=&quot;${ticket.getTitle()}&quot;&gt;Il primo ticket&lt;/h3&gt;\r\n                &lt;a th:href=&quot;@{&#39;/ticket/&#39;+${ticket.getId()}}&quot;&gt;view&lt;/a&gt;\r\n                &lt;a th:href=&quot;@{&#39;/ticket/&#39;+${ticket.getId()}+&#39;/edit&#39;}&quot;&gt;edit&lt;/a&gt;\r\n            &lt;/article&gt;\r\n            &lt;article th:if=&quot;${#lists.isEmpty(openTickets)}&quot;&gt;There&#39;s no ticket. Yippee!&lt;/article&gt;\r\n        &lt;/section&gt;\r\n        &lt;aside rel=&quot;stylesheet&quot;  href=&quot;style.css&quot;&gt;\r\n        &lt;p&gt;This is PP5 sidebar&lt;/p&gt;\r\n    &lt;/aside&gt;\r\n    &lt;/main&gt;\r\n    &lt;footer rel=&quot;stylesheet&quot;  href=&quot;style.css&quot;&gt;\r\n        &lt;h3&gt; This is the footer &lt;/h3&gt;\r\n        &lt;p&gt; Copyleft CC-by 2023 by Patricia &lt;/p&gt;\r\n    &lt;/footer&gt;\r\n&lt;/body&gt;\r\n&lt;/html&gt;\r\n```\r\n\r\n","title":"Thymeleaf not processing templates properly","body":"<p>I have been developing a simple project with frontend and backend for managing the university IT tickets. After implementing different approaches (and all of them working well) being the last using Spring and a MySQL database we needed to do it using thymeleaf but for some reason it does not save nor display the info. I've checked and the paths and password for the database in the application.properties are correct and all dependencies are in the pom.xml. Here is the code:</p>\n<p>TicketController :</p>\n<pre><code>package ch.supsi.webapp.web.controller;\n\nimport ch.supsi.webapp.web.model.Status;\nimport ch.supsi.webapp.web.model.Ticket;\nimport ch.supsi.webapp.web.repository.TicketRepository;\nimport ch.supsi.webapp.web.service.TicketService;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Controller;\nimport org.springframework.ui.Model;\nimport org.springframework.web.bind.annotation.*;\n\nimport java.io.IOException;\nimport java.util.List;\nimport java.util.Optional;\n\n@Controller\n\npublic class TicketController  {\n\n    TicketService service;\n\n\n    public TicketController(TicketRepository repository,TicketService service) {\n        this.service=service;\n    }\n\n\n\n\n    @GetMapping(&quot;/index&quot;)\n    public String index(Model model){\n        model.addAttribute(&quot;tickets&quot;,service.list());\n        //model.addAttribute(&quot;openTickets&quot;, service.findLast5ByStatus(Status.OPEN));\n        //model.addAttribute(&quot;closedTickets&quot;, service.findLast5ByStatus(Status.CLOSED));\n        return &quot;index&quot;;\n    }\n\n\n    @PostMapping(&quot;/ticket/new&quot;)\n    public String newPost(Model model){\n        model.addAttribute(&quot;ticket&quot;, new Ticket());\n        model.addAttribute(&quot;isNew&quot;, true);\n        model.addAttribute(&quot;authors&quot;, service.getAuthors());\n        return &quot;redirect:/&quot;;\n    }\n\n    @PostMapping(&quot;/ticket/new&quot;)\n    public String post(Ticket ticket) throws IOException {\n        service.save(ticket);\n        return &quot;redirect:/&quot;;\n    }\n\n\n\n\n}\n</code></pre>\n<p>Ticket Service</p>\n<pre><code>package ch.supsi.webapp.web.service;\nimport ch.supsi.webapp.web.model.Status;\nimport ch.supsi.webapp.web.model.Ticket;\nimport ch.supsi.webapp.web.repository.TicketRepository;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Service;\nimport ch.supsi.webapp.web.model.Author;\nimport ch.supsi.webapp.web.repository.AuthorRepository;\nimport java.util.List;\n\nimport java.util.Optional;\n\n@Service\npublic class TicketService {\n\n    private final TicketRepository repository;\n    private final AuthorRepository authorRepository;\n\n    public TicketService(TicketRepository ticketRepository, AuthorRepository authorRepository) {\n        this.repository = ticketRepository;\n        this.authorRepository = authorRepository;\n    }\n    public void save(Ticket ticket) {\n        repository.save(ticket);\n    }\n\n\n    public void remove(long id) {\n        repository.deleteById((int) id);\n    }\n\n    public Optional&lt;Ticket&gt; read(long id){\n       return repository.findById((int) id);\n    }\n    public  List&lt;Ticket&gt; list() {\n        return (List&lt;Ticket&gt;) repository.findAll();\n    }\n\n   public void update(long id , Ticket ticket){\n       Optional&lt;Ticket&gt; optionalTicket = repository.findById((int) id);\n      // Optional&lt;Ticket&gt; optionalAuthor = repository.findById(ticket.getAuthor());\n           Ticket existingTicket = optionalTicket.get();\n           //existingTicket.setAuthor(ticket.getAuthor());\n           existingTicket.setTitle(ticket.getTitle());\n           existingTicket.setDescription(ticket.getDescription());\n           repository.save(existingTicket);\n\n    }\n\n    public List&lt;Ticket&gt; findLast5ByStatus(Status ticketStatus){\n        return repository.findByStatusOrderByDateDesc(ticketStatus);\n\n\n\n    }\n    public List&lt;Author&gt; getAuthors() {\n        return (List&lt;Author&gt;) authorRepository.findAll();}\n    public boolean exists(int id) {\n        return repository.existsById(id);\n    }\n\n}\n</code></pre>\n<p>TicketRepository</p>\n<pre><code>package ch.supsi.webapp.web.repository;\n\nimport ch.supsi.webapp.web.model.Status;\nimport ch.supsi.webapp.web.model.Ticket;\nimport org.springframework.data.repository.CrudRepository;\nimport org.springframework.stereotype.Repository;\n\nimport java.util.List;\n\n\n@Repository\npublic interface TicketRepository extends CrudRepository&lt;Ticket, Integer&gt;\n{\n    List&lt;Ticket&gt; findByStatusOrderByDateDesc(Status ticketStatus);\n    //public Ticket findTicket(long id);\n\n    //public void setChanges(Ticket ticket);\n}\n</code></pre>\n<p>/ticket/new.html</p>\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html lang=&quot;en&quot;&gt;\n\n&lt;head&gt;\n&lt;/head&gt;\n\n&lt;body&gt;\n&lt;header&gt;\n    &lt;img alt=&quot;SUPSI&quot; height=&quot;32&quot; src=&quot;https://www.supsi.ch/o/supsi-theme/images/supsi-logo.svg&quot; width=&quot;117&quot;&gt;\n    &lt;h1&gt;SUPSI Tickets&lt;/h1&gt;\n&lt;/header&gt;\n&lt;nav&gt;\n    &lt;hr&gt;\n    &lt;a th:href=&quot;@{/static}&quot;&gt;Home&lt;/a&gt; |\n    &lt;a&gt;New ticket&lt;/a&gt; |\n    &lt;hr&gt;\n&lt;/nav&gt;\n&lt;form method=&quot;post&quot; th:action=&quot;@{/ticket/new}&quot;  th:object=&quot;${ch.supsi.webapp.web.model.Ticket}&quot;&gt;\n    &lt;fieldset&gt;\n        &lt;legend&gt;New ticket&lt;/legend&gt;\n        &lt;div&gt;\n            &lt;label &gt;Title:\n            &lt;input th:field=&quot;*{title}&quot; type=&quot;text&quot;&gt;\n            &lt;/label&gt;\n        &lt;/div&gt;\n        &lt;div&gt;\n            &lt;label for=&quot;author&quot;&gt;Author:&lt;/label&gt;\n            &lt;input id=&quot;author&quot; class=&quot;form-select&quot; th:field=&quot;*{author}&quot;&gt;\n\n        &lt;/div&gt;\n        &lt;div &gt;\n            &lt;label for=&quot;status&quot;&gt;Status:&lt;/label&gt;\n            &lt;select id=&quot;status&quot; th:field=&quot;*{status}&quot;&gt;\n                &lt;option th:each=&quot;status : ${T(ch.supsi.webapp.web.model.Status).values()}&quot; th:value=&quot;${status.values()}&quot; th:text=&quot;${status.values()}&quot;&gt;&lt;/option&gt;\n            &lt;/select&gt;\n        &lt;/div&gt;\n        &lt;div&gt;\n            &lt;label for=&quot;type&quot;&gt;Type:&lt;/label&gt;\n            &lt;select id=&quot;type&quot; th:field=&quot;*{type}&quot;&gt;\n                &lt;option th:each=&quot;type : ${T(ch.supsi.webapp.web.model.Type).values}&quot; th:value=&quot;${type}&quot; th:text=&quot;${type}&quot;&gt;Bug&lt;/option&gt;\n            &lt;/select&gt;\n        &lt;/div&gt;\n        &lt;div&gt;\n            &lt;label &gt;Description:&lt;/label&gt;\n            &lt;textarea th:field=&quot;*{description}&quot;&gt;&lt;/textarea&gt;\n        &lt;/div&gt;\n    &lt;/fieldset&gt;\n    &lt;input type=&quot;submit&quot; th:value=&quot;${isNew} ? 'Create ticket':'Update ticket'&quot;&gt;\n&lt;/form&gt;\n&lt;footer&gt;\n    &lt;hr&gt;\n    &lt;small&gt;TICKETS Copyleft CC-by\n        &lt;time datetime=&quot;2022&quot;&gt;2022&lt;/time&gt;\n        by L:S&lt;/small&gt;\n    &lt;hr&gt;\n&lt;/footer&gt;\n&lt;/body&gt;\n\n&lt;/html&gt;\n</code></pre>\n<p>index.html</p>\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;\n&lt;html lang=&quot;en&quot;&gt;\n&lt;head&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;style.css&quot;&gt;\n    &lt;title&gt; This is PP5 page&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;nav&gt;\n        &lt;ul&gt;\n            &lt;div class=&quot;item&quot;&gt; &lt;a href=&quot;index.html&quot; &gt;Home&lt;/a&gt;&lt;/div&gt;\n            &lt;div class=&quot;item&quot;&gt;&lt;a  th:href=&quot;@{/ticket/new}&quot; href=&quot;ticket/new.html&quot; &gt;New Ticket &lt;/a&gt;&lt;/div&gt;\n            &lt;div class=&quot;item&quot;&gt;&lt;a href=&quot;ticket1Details.html&quot;&gt;Ticket 1 details&lt;/a&gt;&lt;/div&gt;\n        &lt;/ul&gt;\n    &lt;/nav&gt;\n    &lt;header &gt;\n        &lt;h2&gt;Welcome ! &lt;/h2&gt;\n    &lt;/header&gt;\n    &lt;main&gt;\n    &lt;div&gt; &lt;h2&gt; Ticket management system &lt;/h2&gt;&lt;/div&gt;\n        &lt;section&gt;\n            &lt;h2&gt;Open tickets&lt;/h2&gt;\n            &lt;article th:each=&quot;ticket : ${tickets}&quot;&gt;\n                &lt;span th:text=&quot;${#dates.format(ticket.date, 'dd.MM.yyyy HH:mm')}&quot;&gt;&lt;/span&gt;\n                &lt;h3 th:text=&quot;${ticket.getTitle()}&quot;&gt;Il primo ticket&lt;/h3&gt;\n                &lt;a th:href=&quot;@{'/ticket/'+${ticket.getId()}}&quot;&gt;view&lt;/a&gt;\n                &lt;a th:href=&quot;@{'/ticket/'+${ticket.getId()}+'/edit'}&quot;&gt;edit&lt;/a&gt;\n            &lt;/article&gt;\n            &lt;article th:if=&quot;${#lists.isEmpty(openTickets)}&quot;&gt;There's no ticket. Yippee!&lt;/article&gt;\n        &lt;/section&gt;\n        &lt;aside rel=&quot;stylesheet&quot;  href=&quot;style.css&quot;&gt;\n        &lt;p&gt;This is PP5 sidebar&lt;/p&gt;\n    &lt;/aside&gt;\n    &lt;/main&gt;\n    &lt;footer rel=&quot;stylesheet&quot;  href=&quot;style.css&quot;&gt;\n        &lt;h3&gt; This is the footer &lt;/h3&gt;\n        &lt;p&gt; Copyleft CC-by 2023 by Patricia &lt;/p&gt;\n    &lt;/footer&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n"},{"tags":["java","java-stream"],"comments":[{"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"score":1,"creation_date":1701107773,"post_id":77558908,"comment_id":136731597,"body_markdown":"Is the `String` in all cases, the `Id` from `Test`.  In other words, where is the String in the target maps coming from?","body":"Is the <code>String</code> in all cases, the <code>Id</code> from <code>Test</code>.  In other words, where is the String in the target maps coming from?"},{"owner":{"account_id":2391212,"reputation":13,"user_id":2091028,"display_name":"iamrogue"},"score":0,"creation_date":1701149750,"post_id":77558908,"comment_id":136736353,"body_markdown":"Yes its Id for all cases","body":"Yes its Id for all cases"}],"answers":[{"tags":[],"owner":{"account_id":25926563,"reputation":119,"user_id":19648355,"display_name":"Irremediable"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1701109895,"creation_date":1701109158,"answer_id":77559116,"question_id":77558908,"body_markdown":"    Map&lt;String, List&lt;Test&gt;&gt; initialMap = new HashMap&lt;&gt;();\r\n\r\n    Map&lt;String, List&lt;TestObject1&gt;&gt; firstMap = initialMap.entrySet()\r\n        .stream()\r\n        .collect(\r\n            Collectors.toMap(\r\n                Map.Entry::getKey,\r\n                entry -&gt; entry.getValue()\r\n                    .stream()\r\n                    .flatMap(test -&gt; Arrays.stream(test.getSomeObjectArray()))\r\n                    .toList()\r\n            )\r\n        );\r\n\r\n    Map&lt;String, List&lt;TestObject2&gt;&gt; secondMap = initialMap.entrySet()\r\n        .stream()\r\n        .collect(\r\n            Collectors.toMap(\r\n                Map.Entry::getKey,\r\n                entry -&gt; entry.getValue()\r\n                    .stream()\r\n                    .flatMap(test -&gt; Arrays.stream(test.getSomeOtherObjectArray()))\r\n                    .toList()\r\n            )\r\n        );\r\n\r\n  }\r\n\r\nif `.toList()` is not resolving on the inner stream you can use `.collect(Collectors.toList())` instead.\r\n\r\nAlso, if you&#39;re expecting to process huge amount of data in such way it is really would be better for performance to use `for` loop  ","title":"Convert a Map&lt;String, List&lt;Object&gt;&gt; to Map&lt;String, List&lt;ClassVariable&gt;&gt; using java streams","body":"<pre><code>Map&lt;String, List&lt;Test&gt;&gt; initialMap = new HashMap&lt;&gt;();\n\nMap&lt;String, List&lt;TestObject1&gt;&gt; firstMap = initialMap.entrySet()\n    .stream()\n    .collect(\n        Collectors.toMap(\n            Map.Entry::getKey,\n            entry -&gt; entry.getValue()\n                .stream()\n                .flatMap(test -&gt; Arrays.stream(test.getSomeObjectArray()))\n                .toList()\n        )\n    );\n\nMap&lt;String, List&lt;TestObject2&gt;&gt; secondMap = initialMap.entrySet()\n    .stream()\n    .collect(\n        Collectors.toMap(\n            Map.Entry::getKey,\n            entry -&gt; entry.getValue()\n                .stream()\n                .flatMap(test -&gt; Arrays.stream(test.getSomeOtherObjectArray()))\n                .toList()\n        )\n    );\n</code></pre>\n<p>}</p>\n<p>if <code>.toList()</code> is not resolving on the inner stream you can use <code>.collect(Collectors.toList())</code> instead.</p>\n<p>Also, if you're expecting to process huge amount of data in such way it is really would be better for performance to use <code>for</code> loop</p>\n"},{"tags":[],"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1701114915,"creation_date":1701110321,"answer_id":77559220,"question_id":77558908,"body_markdown":"Since you didn&#39;t specify how or where to use streams I opted for a hybrid solution to avoid iterating (or streaming over) the source map twice.\r\n\r\nI created bare minimum records for the classes to simplify the code.\r\n```\r\nrecord TestObject1() {\r\n}\r\n\r\nrecord TestObject2() {\r\n}\r\n\r\nrecord Test(String getId, int getA, TestObject1[] getSomeObjectArray,\r\n        TestObject2[] getSomeOtherObjectArray) {\r\n};\r\n\r\nMap&lt;String, List&lt;Test&gt;&gt; mapOfTest = new HashMap&lt;&gt;();\r\nMap&lt;String, List&lt;TestObject1[]&gt;&gt; mapOfTestObject1 = new HashMap&lt;&gt;();\r\nMap&lt;String, List&lt;TestObject2[]&gt;&gt; mapOfTestObject2 = new HashMap&lt;&gt;();\r\n```\r\n- Iterate across the `entrySet` of the source `Map&lt;String,List&lt;Test&gt;&gt;`\r\n- Then using `map.computeIfAbsent`, create the target List as needed for each resultant map.\r\n- then stream the Test list to put each array its own list so it can be added to the proper map.\r\n```\r\nfor (Entry&lt;String, List&lt;Test&gt;&gt; e : mapOfTest.entrySet()) {    \r\n    mapOfTestObject1.computeIfAbsent(e.getKey(), v -&gt; new ArrayList&lt;&gt;())\r\n            .addAll(e.getValue()\r\n                .stream().map(Test::getSomeObjectArray).toList());\r\n    mapOfTestObject2.computeIfAbsent(e.getKey(), v -&gt; new ArrayList&lt;&gt;())\r\n            .addAll(e.getValue()\r\n                .stream().map(Test::getSomeOtherObjectArray).toList());\r\n}\r\n```\r\nFor lack of information, I presumed the String was always the `id`.  ","title":"Convert a Map&lt;String, List&lt;Object&gt;&gt; to Map&lt;String, List&lt;ClassVariable&gt;&gt; using java streams","body":"<p>Since you didn't specify how or where to use streams I opted for a hybrid solution to avoid iterating (or streaming over) the source map twice.</p>\n<p>I created bare minimum records for the classes to simplify the code.</p>\n<pre><code>record TestObject1() {\n}\n\nrecord TestObject2() {\n}\n\nrecord Test(String getId, int getA, TestObject1[] getSomeObjectArray,\n        TestObject2[] getSomeOtherObjectArray) {\n};\n\nMap&lt;String, List&lt;Test&gt;&gt; mapOfTest = new HashMap&lt;&gt;();\nMap&lt;String, List&lt;TestObject1[]&gt;&gt; mapOfTestObject1 = new HashMap&lt;&gt;();\nMap&lt;String, List&lt;TestObject2[]&gt;&gt; mapOfTestObject2 = new HashMap&lt;&gt;();\n</code></pre>\n<ul>\n<li>Iterate across the <code>entrySet</code> of the source <code>Map&lt;String,List&lt;Test&gt;&gt;</code></li>\n<li>Then using <code>map.computeIfAbsent</code>, create the target List as needed for each resultant map.</li>\n<li>then stream the Test list to put each array its own list so it can be added to the proper map.</li>\n</ul>\n<pre><code>for (Entry&lt;String, List&lt;Test&gt;&gt; e : mapOfTest.entrySet()) {    \n    mapOfTestObject1.computeIfAbsent(e.getKey(), v -&gt; new ArrayList&lt;&gt;())\n            .addAll(e.getValue()\n                .stream().map(Test::getSomeObjectArray).toList());\n    mapOfTestObject2.computeIfAbsent(e.getKey(), v -&gt; new ArrayList&lt;&gt;())\n            .addAll(e.getValue()\n                .stream().map(Test::getSomeOtherObjectArray).toList());\n}\n</code></pre>\n<p>For lack of information, I presumed the String was always the <code>id</code>.</p>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701125680,"creation_date":1701125680,"answer_id":77560407,"question_id":77558908,"body_markdown":"&gt; _&#39;... I have a map of `Map&lt;String, List&lt;Test&gt;&gt;` where String is `&quot;id&quot;`. I need to convert these to\r\n`Map&lt;String, List&lt;someObjectArray&gt;&gt;` and `Map&lt;String, List&lt;someOtherObjectArray&gt;&gt;` using streams. ...&#39;_\r\n\r\nUtilize the _[Collectors#toMap](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/stream/Collectors.html#toMap(java.util.function.Function,java.util.function.Function))_, and _[Stream#flatMap](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/stream/Stream.html#flatMap(java.util.function.Function))_, methods.\\\r\nFor the _toMap_ _valueMapper_ parameter, stream the _List_, creating a _flat-mapping_ for each _array_ _field_; either _someObjectArray_, or _someOtherObjectArray_.\r\n\r\nHere is an example, using _arrays_ of _Integer_ and _Double_, respectively _a_, and _b_.\r\n\r\n```java\r\nMap&lt;String, List&lt;Test&gt;&gt; map = new HashMap&lt;&gt;() {{\r\n    put(&quot;a&quot;, List.of(new Test(&quot;a&quot;, 1, new Integer[] { 1, 2, 3 }, new Double[] { .7, .8, .9 } )));\r\n    put(&quot;b&quot;, List.of(new Test(&quot;b&quot;, 2, new Integer[] { 4, 5, 6 }, new Double[] { .4, .5, .6 } )));\r\n    put(&quot;c&quot;, List.of(new Test(&quot;c&quot;, 3, new Integer[] { 7, 8, 9 }, new Double[] { .1, .2, .3 } )));\r\n}};\r\n```\r\n\r\n```java\r\nimport static java.util.stream.Collectors.toMap;\r\n```\r\n\r\n```java\r\nMap&lt;String, List&lt;Integer&gt;&gt; a\r\n    = map.entrySet().stream()\r\n                    .collect(toMap(Map.Entry::getKey,\r\n                                   x -&gt; x.getValue().stream()\r\n                                                    .flatMap(y -&gt; Stream.of(y.a))\r\n                                                    .toList()));\r\n\r\nMap&lt;String, List&lt;Double&gt;&gt; b\r\n    = map.entrySet().stream()\r\n                    .collect(toMap(Map.Entry::getKey,\r\n                                   x -&gt; x.getValue().stream()\r\n                                                    .flatMap(y -&gt; Stream.of(y.b))\r\n                                                    .toList()));\r\n```\r\n\r\nOutput\r\n\r\n```none\r\n{a=[1, 2, 3], b=[4, 5, 6], c=[7, 8, 9]}\r\n{a=[0.7, 0.8, 0.9], b=[0.4, 0.5, 0.6], c=[0.1, 0.2, 0.3]}\r\n```","title":"Convert a Map&lt;String, List&lt;Object&gt;&gt; to Map&lt;String, List&lt;ClassVariable&gt;&gt; using java streams","body":"<blockquote>\n<p><em>'... I have a map of <code>Map&lt;String, List&lt;Test&gt;&gt;</code> where String is <code>&quot;id&quot;</code>. I need to convert these to\n<code>Map&lt;String, List&lt;someObjectArray&gt;&gt;</code> and <code>Map&lt;String, List&lt;someOtherObjectArray&gt;&gt;</code> using streams. ...'</em></p>\n</blockquote>\n<p>Utilize the <em><a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/stream/Collectors.html#toMap(java.util.function.Function,java.util.function.Function)\" rel=\"nofollow noreferrer\">Collectors#toMap</a></em>, and <em><a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/stream/Stream.html#flatMap(java.util.function.Function)\" rel=\"nofollow noreferrer\">Stream#flatMap</a></em>, methods.<br />\nFor the <em>toMap</em> <em>valueMapper</em> parameter, stream the <em>List</em>, creating a <em>flat-mapping</em> for each <em>array</em> <em>field</em>; either <em>someObjectArray</em>, or <em>someOtherObjectArray</em>.</p>\n<p>Here is an example, using <em>arrays</em> of <em>Integer</em> and <em>Double</em>, respectively <em>a</em>, and <em>b</em>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Map&lt;String, List&lt;Test&gt;&gt; map = new HashMap&lt;&gt;() {{\n    put(&quot;a&quot;, List.of(new Test(&quot;a&quot;, 1, new Integer[] { 1, 2, 3 }, new Double[] { .7, .8, .9 } )));\n    put(&quot;b&quot;, List.of(new Test(&quot;b&quot;, 2, new Integer[] { 4, 5, 6 }, new Double[] { .4, .5, .6 } )));\n    put(&quot;c&quot;, List.of(new Test(&quot;c&quot;, 3, new Integer[] { 7, 8, 9 }, new Double[] { .1, .2, .3 } )));\n}};\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>import static java.util.stream.Collectors.toMap;\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>Map&lt;String, List&lt;Integer&gt;&gt; a\n    = map.entrySet().stream()\n                    .collect(toMap(Map.Entry::getKey,\n                                   x -&gt; x.getValue().stream()\n                                                    .flatMap(y -&gt; Stream.of(y.a))\n                                                    .toList()));\n\nMap&lt;String, List&lt;Double&gt;&gt; b\n    = map.entrySet().stream()\n                    .collect(toMap(Map.Entry::getKey,\n                                   x -&gt; x.getValue().stream()\n                                                    .flatMap(y -&gt; Stream.of(y.b))\n                                                    .toList()));\n</code></pre>\n<p>Output</p>\n<pre class=\"lang-none prettyprint-override\"><code>{a=[1, 2, 3], b=[4, 5, 6], c=[7, 8, 9]}\n{a=[0.7, 0.8, 0.9], b=[0.4, 0.5, 0.6], c=[0.1, 0.2, 0.3]}\n</code></pre>\n"}],"owner":{"account_id":2391212,"reputation":13,"user_id":2091028,"display_name":"iamrogue"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":85,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77559116,"answer_count":3,"score":1,"last_activity_date":1701125680,"creation_date":1701106769,"question_id":77558908,"body_markdown":"I have a class example:\r\n\r\n\r\n\r\n    class Test {\r\n         String id;\r\n         int a;\r\n         TestObject1[] someObjectArray;\r\n         TestObject2[] someOtherObjectArray;\r\n    }\r\n\r\n\r\nI have a map of `Map&lt;String, List&lt;Test&gt;&gt;` where String is `&quot;id&quot;`. I need to convert these to\r\n`Map&lt;String, List&lt;someObjectArray&gt;&gt;` and `Map&lt;String, List&lt;someOtherObjectArray&gt;&gt;` using streams.\r\n\r\nTried something like this but couldn&#39;t get anywhere.\r\n\r\n```\r\nHashMap&lt;String, List&lt;Test&gt;&gt; map =\r\n        map.entrySet().forEach( p -&gt; map.computeIfAbset(p, k -&gt; \r\n               new ArrayList&lt;&gt;())).add(p);\r\n```\r\n\r\n","title":"Convert a Map&lt;String, List&lt;Object&gt;&gt; to Map&lt;String, List&lt;ClassVariable&gt;&gt; using java streams","body":"<p>I have a class example:</p>\n<pre><code>class Test {\n     String id;\n     int a;\n     TestObject1[] someObjectArray;\n     TestObject2[] someOtherObjectArray;\n}\n</code></pre>\n<p>I have a map of <code>Map&lt;String, List&lt;Test&gt;&gt;</code> where String is <code>&quot;id&quot;</code>. I need to convert these to\n<code>Map&lt;String, List&lt;someObjectArray&gt;&gt;</code> and <code>Map&lt;String, List&lt;someOtherObjectArray&gt;&gt;</code> using streams.</p>\n<p>Tried something like this but couldn't get anywhere.</p>\n<pre><code>HashMap&lt;String, List&lt;Test&gt;&gt; map =\n        map.entrySet().forEach( p -&gt; map.computeIfAbset(p, k -&gt; \n               new ArrayList&lt;&gt;())).add(p);\n</code></pre>\n"},{"tags":["java","android","crash","assertion"],"owner":{"account_id":23358918,"reputation":1,"user_id":17431463,"display_name":"Kiran Ramgade"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1701125572,"creation_date":1689685029,"question_id":76713015,"body_markdown":"    Fatal Exception: java.lang.AssertionError: No NameTypeIndex match for SHORT_STANDARD\r\n           at android.icu.impl.TimeZoneNamesImpl$ZNames.getNameTypeIndex(TimeZoneNamesImpl.java:724)\r\n           at android.icu.impl.TimeZoneNamesImpl$ZNames.getName(TimeZoneNamesImpl.java:790)\r\n           at android.icu.impl.TimeZoneNamesImpl.getTimeZoneDisplayName(TimeZoneNamesImpl.java:183)\r\n           at android.icu.text.TimeZoneNames.getDisplayName(TimeZoneNames.java:261)\r\n           at java.util.TimeZone.getDisplayName(TimeZone.java:405)\r\n           at java.util.Date.toString(Date.java:1066)\r\n           at java.lang.String.valueOf(String.java:2827)\r\n           at java.lang.StringBuilder.append(StringBuilder.java:132)\r\n           at com.android.myplex.ui.sun.activities.SplashActivity.checkDeviceRegDetails(SplashActivity.java:798)\r\n           at com.android.myplex.ui.sun.activities.SplashActivity.continueWithDevCalls(SplashActivity.java:536)\r\n           at com.android.myplex.ui.sun.activities.SplashActivity.access$600(SplashActivity.java:148)\r\n           at com.android.myplex.ui.sun.activities.SplashActivity$11.onResponse(SplashActivity.java:600)\r\n           at com.myplex.api.APIRequest.onResponse(APIRequest.java:25)\r\n           at com.myplex.api.request.user.UserConsentUrl$1.onResponse(UserConsentUrl.java:62)\r\n           at retrofit2.ExecutorCallAdapterFactory$ExecutorCallbackCall$1$1.run(ExecutorCallAdapterFactory.java:71)\r\n           at android.os.Handler.handleCallback(Handler.java:790)\r\n           at android.os.Handler.dispatchMessage(Handler.java:99)\r\n           at android.os.Looper.loop(Looper.java:192)\r\n           at android.app.ActivityThread.main(ActivityThread.java:6748)\r\n           at java.lang.reflect.Method.invoke(Method.java)\r\n           at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:556)\r\n           at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:867)\r\n       \r\n\r\nCrash found in Android 8","title":"Fatal Exception: java.lang.AssertionError: No NameTypeIndex match for SHORT_STANDARD","body":"<pre><code>Fatal Exception: java.lang.AssertionError: No NameTypeIndex match for SHORT_STANDARD\n       at android.icu.impl.TimeZoneNamesImpl$ZNames.getNameTypeIndex(TimeZoneNamesImpl.java:724)\n       at android.icu.impl.TimeZoneNamesImpl$ZNames.getName(TimeZoneNamesImpl.java:790)\n       at android.icu.impl.TimeZoneNamesImpl.getTimeZoneDisplayName(TimeZoneNamesImpl.java:183)\n       at android.icu.text.TimeZoneNames.getDisplayName(TimeZoneNames.java:261)\n       at java.util.TimeZone.getDisplayName(TimeZone.java:405)\n       at java.util.Date.toString(Date.java:1066)\n       at java.lang.String.valueOf(String.java:2827)\n       at java.lang.StringBuilder.append(StringBuilder.java:132)\n       at com.android.myplex.ui.sun.activities.SplashActivity.checkDeviceRegDetails(SplashActivity.java:798)\n       at com.android.myplex.ui.sun.activities.SplashActivity.continueWithDevCalls(SplashActivity.java:536)\n       at com.android.myplex.ui.sun.activities.SplashActivity.access$600(SplashActivity.java:148)\n       at com.android.myplex.ui.sun.activities.SplashActivity$11.onResponse(SplashActivity.java:600)\n       at com.myplex.api.APIRequest.onResponse(APIRequest.java:25)\n       at com.myplex.api.request.user.UserConsentUrl$1.onResponse(UserConsentUrl.java:62)\n       at retrofit2.ExecutorCallAdapterFactory$ExecutorCallbackCall$1$1.run(ExecutorCallAdapterFactory.java:71)\n       at android.os.Handler.handleCallback(Handler.java:790)\n       at android.os.Handler.dispatchMessage(Handler.java:99)\n       at android.os.Looper.loop(Looper.java:192)\n       at android.app.ActivityThread.main(ActivityThread.java:6748)\n       at java.lang.reflect.Method.invoke(Method.java)\n       at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:556)\n       at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:867)\n   \n</code></pre>\n<p>Crash found in Android 8</p>\n"},{"tags":["java","windows","batch-file"],"comments":[{"owner":{"account_id":401843,"reputation":89758,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1701123495,"post_id":77559686,"comment_id":136734009,"body_markdown":"Question doesn&#39;t contain sufficient detail. A thing to check: That will _definitely_ fail if the config folder&#39;s absolute path contains any spaces. Debug as you usually would. For example, replace that lot with `echo`, toss it through `cmd` to ensure you see a dosbox, etc.","body":"Question doesn&#39;t contain sufficient detail. A thing to check: That will <i>definitely</i> fail if the config folder&#39;s absolute path contains any spaces. Debug as you usually would. For example, replace that lot with <code>echo</code>, toss it through <code>cmd</code> to ensure you see a dosbox, etc."},{"owner":{"account_id":9045527,"reputation":37191,"user_id":6738015,"display_name":"Compo"},"score":0,"creation_date":1701125694,"post_id":77559686,"comment_id":136734280,"body_markdown":"Surely you&#39;d create a shortcut with a Start in: as the appropriate, (already known), path, and the Target: as your already known command, (relative to the Start in location as needed). I see absolutely nothing in this question which requires the involvement of a batch file. Regardless, &quot;How do I run a shortcut with an argument&quot;, seems more like an OS question, rather than a programming problem.","body":"Surely you&#39;d create a shortcut with a Start in: as the appropriate, (already known), path, and the Target: as your already known command, (relative to the Start in location as needed). I see absolutely nothing in this question which requires the involvement of a batch file. Regardless, &quot;How do I run a shortcut with an argument&quot;, seems more like an OS question, rather than a programming problem."},{"owner":{"account_id":3692224,"reputation":46695,"user_id":3074564,"display_name":"Mofi"},"score":0,"creation_date":1701159199,"post_id":77559686,"comment_id":136737513,"body_markdown":"Modify the second line to `set &quot;CONFIG_FOLDER=%~dp0config&quot;`. Modify the fourth line to `java.exe -Dexternal.app.config=&quot;%CONFIG_FOLDER%\\application.properties&quot; -jar &quot;%~dp0lib\\my_app.jar&quot;`. Well, the batch file can be just the single command line: `@java.exe -Dexternal.app.config=&quot;%~dp0config\\application.properties&quot; -jar &quot;%~dp0lib\\my_app.jar&quot;`","body":"Modify the second line to <code>set &quot;CONFIG_FOLDER=%~dp0config&quot;</code>. Modify the fourth line to <code>java.exe -Dexternal.app.config=&quot;%CONFIG_FOLDER%\\application.propertie&zwnj;&#8203;s&quot; -jar &quot;%~dp0lib\\my_app.jar&quot;</code>. Well, the batch file can be just the single command line: <code>@java.exe -Dexternal.app.config=&quot;%~dp0config\\application.properties&quot; -jar &quot;%~dp0lib\\my_app.jar&quot;</code>"},{"owner":{"account_id":3692224,"reputation":46695,"user_id":3074564,"display_name":"Mofi"},"score":0,"creation_date":1701159405,"post_id":77559686,"comment_id":136737563,"body_markdown":"That means finally that a batch file is not needed at all. It would be much better for several reasons using a shortcut file with file extension `.lnk` for this task as all to do is running `java.exe` with the required arguments which is much better than with a shortcut file with appropriate configured properties __Target__, __Start in__ (current working directory, can be empty to use the current working directory of the parent process), __Comment__, a nice associated icon, and other properties which can be defined for a shortcut file but not for a batch file.","body":"That means finally that a batch file is not needed at all. It would be much better for several reasons using a shortcut file with file extension <code>.lnk</code> for this task as all to do is running <code>java.exe</code> with the required arguments which is much better than with a shortcut file with appropriate configured properties <b>Target</b>, <b>Start in</b> (current working directory, can be empty to use the current working directory of the parent process), <b>Comment</b>, a nice associated icon, and other properties which can be defined for a shortcut file but not for a batch file."}],"owner":{"account_id":9162277,"reputation":14688,"user_id":6813231,"accept_rate":56,"display_name":"Alexei"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1702117325,"answer_count":0,"score":-1,"last_activity_date":1701124997,"creation_date":1701116074,"question_id":77559686,"body_markdown":"Windows 10\r\n\r\nContent of file **myApp.bat**\r\n\r\n    @echo off\r\n    set CONFIG_FOLDER=%~dp0config\r\n    \r\n    java -Dexternal.app.config=%CONFIG_FOLDER%\\application.properties -jar lib\\my_app.jar\r\n\r\nFrom console I sucess run **myApp.bat** and it&#39;s success pass argument to my java application. Nice.\r\n\r\nBut if I create shortcut from **myApp.bat** and double click, it&#39;s not working. Nothing happend.\r\n\r\nHow I can pass argument via shorcut?\r\n\r\n","title":"Can&#39;t pass arguments to java application via shortcut","body":"<p>Windows 10</p>\n<p>Content of file <strong>myApp.bat</strong></p>\n<pre><code>@echo off\nset CONFIG_FOLDER=%~dp0config\n\njava -Dexternal.app.config=%CONFIG_FOLDER%\\application.properties -jar lib\\my_app.jar\n</code></pre>\n<p>From console I sucess run <strong>myApp.bat</strong> and it's success pass argument to my java application. Nice.</p>\n<p>But if I create shortcut from <strong>myApp.bat</strong> and double click, it's not working. Nothing happend.</p>\n<p>How I can pass argument via shorcut?</p>\n"},{"tags":["java","class","constructor","static","non-static"],"comments":[{"owner":{"account_id":247613,"reputation":284087,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":2,"creation_date":1701124971,"post_id":77560344,"comment_id":136734195,"body_markdown":"Please check out Jon Skeet&#39;s answer [here](https://stackoverflow.com/a/12913767/). Note also that you could just declare the nested class as static: `static class Building {` and this would work, but if it doesn&#39;t need to be nested, then don&#39;t make it nested.","body":"Please check out Jon Skeet&#39;s answer <a href=\"https://stackoverflow.com/a/12913767/\">here</a>. Note also that you could just declare the nested class as static: <code>static class Building {</code> and this would work, but if it doesn&#39;t need to be nested, then don&#39;t make it nested."}],"owner":{"account_id":30007816,"reputation":11,"user_id":22996223,"display_name":"user22996223"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1701124915,"answer_count":0,"score":1,"last_activity_date":1701124695,"creation_date":1701124695,"question_id":77560344,"body_markdown":"I&#39;m kind of confused about how java classes work. \r\n\r\nHow come when I do this, it gives me an error that says: &quot;Non-static variable cannot be referenced from static context&quot;:\r\n\r\n```\r\npublic class Test {\r\n    class Building {\r\n        Building() {\r\n            System.out.println(&quot;You&#39;ve made a building&quot;);\r\n        }\r\n    }\r\n    \r\n    public static void main(String[] args) {\r\n        Building building1 = new Building();\r\n    }\r\n}\r\n\r\n```\r\n\r\nBut when I pull the building class out of the Test class:\r\n\r\n```\r\npublic class Test {\r\n\r\n    public static void main(String[] args) {\r\n        Building building1 = new Building();\r\n    }\r\n}\r\n\r\nclass Building {\r\n\r\n    Building() {\r\n        System.out.println(&quot;You&#39;ve made a building&quot;);\r\n    }\r\n}\r\n\r\n```\r\n\r\nNow it works?\r\n\r\nCan somebody explain why #2 works but #1 doesn&#39;t?\r\n\r\n\r\nI would expect both to work or neither to work\r\n","title":"Java Classes - Why is one of these valid and one is not?","body":"<p>I'm kind of confused about how java classes work.</p>\n<p>How come when I do this, it gives me an error that says: &quot;Non-static variable cannot be referenced from static context&quot;:</p>\n<pre><code>public class Test {\n    class Building {\n        Building() {\n            System.out.println(&quot;You've made a building&quot;);\n        }\n    }\n    \n    public static void main(String[] args) {\n        Building building1 = new Building();\n    }\n}\n\n</code></pre>\n<p>But when I pull the building class out of the Test class:</p>\n<pre><code>public class Test {\n\n    public static void main(String[] args) {\n        Building building1 = new Building();\n    }\n}\n\nclass Building {\n\n    Building() {\n        System.out.println(&quot;You've made a building&quot;);\n    }\n}\n\n</code></pre>\n<p>Now it works?</p>\n<p>Can somebody explain why #2 works but #1 doesn't?</p>\n<p>I would expect both to work or neither to work</p>\n"},{"tags":["java","mapstruct"],"comments":[{"owner":{"account_id":2719313,"reputation":15631,"user_id":2345933,"accept_rate":84,"display_name":"Adam Siemion"},"score":0,"creation_date":1700477911,"post_id":77515278,"comment_id":136655253,"body_markdown":"How new entries are added to `propA` and `propB`,? Does `Obj` contain a method to add new entries to `propA` and `propB`?","body":"How new entries are added to <code>propA</code> and <code>propB</code>,? Does <code>Obj</code> contain a method to add new entries to <code>propA</code> and <code>propB</code>?"},{"owner":{"account_id":12016842,"reputation":424,"user_id":8791696,"display_name":"Yann"},"score":0,"creation_date":1700478001,"post_id":77515278,"comment_id":136655263,"body_markdown":"Yes, there is a `putPropT(String key, T t)` method for each property map.","body":"Yes, there is a <code>putPropT(String key, T t)</code> method for each property map."},{"owner":{"account_id":2719313,"reputation":15631,"user_id":2345933,"accept_rate":84,"display_name":"Adam Siemion"},"score":0,"creation_date":1700478881,"post_id":77515278,"comment_id":136655417,"body_markdown":"The code you have provided probably does not work. `propA` values are of type `TypeA` and `propB` values are of type `TypeB` while `mergeMaps` expects the values of both of the maps to be the same (`&lt;T&gt;`). Maybe they share the same superclass, then `&lt;T&gt;` would rather be `&lt;T extends CommonSuperClass&gt;`.","body":"The code you have provided probably does not work. <code>propA</code> values are of type <code>TypeA</code> and <code>propB</code> values are of type <code>TypeB</code> while <code>mergeMaps</code> expects the values of both of the maps to be the same (<code>&lt;T&gt;</code>). Maybe they share the same superclass, then <code>&lt;T&gt;</code> would rather be <code>&lt;T extends CommonSuperClass&gt;</code>."},{"owner":{"account_id":12016842,"reputation":424,"user_id":8791696,"display_name":"Yann"},"score":0,"creation_date":1700479084,"post_id":77515278,"comment_id":136655454,"body_markdown":"The code runs. `mergeMaps` is generic on the method, so each call has its own type. (It&#39;s defined outside of the Obj class.)","body":"The code runs. <code>mergeMaps</code> is generic on the method, so each call has its own type. (It&#39;s defined outside of the Obj class.)"}],"answers":[{"tags":[],"owner":{"account_id":18044315,"reputation":1227,"user_id":13115701,"display_name":"Paul Marcelin Bejan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1701123749,"creation_date":1701123749,"answer_id":77560278,"question_id":77515278,"body_markdown":"    @Mapper\r\n    public interface ObjMapper {\r\n    \r\n    \tObjMapper INSTANCE = Mappers.getMapper(ObjMapper.class);\r\n    \t\r\n    \tObj merge(Obj source, @MappingTarget Obj target);\r\n    \t\r\n        default &lt;T&gt; void mergeMaps(Map&lt;String, T&gt; source, @MappingTarget Map&lt;String, T&gt; target) {\r\n            if ( source == null ) {\r\n                return;\r\n            }\r\n            if ( target == null ) {\r\n                target = new HashMap&lt;&gt;();\r\n            }\r\n            target.putAll(source);\r\n        }\r\n    \t\r\n    }\r\n\r\nThe generated code is:\r\n\r\n    public class ObjMapperImpl implements ObjMapper {\r\n    \r\n        @Override\r\n        public Obj merge(Obj source, Obj target) {\r\n            if ( source == null ) {\r\n                return target;\r\n            }\r\n    \r\n            if ( source.getPropA() != null ) {\r\n                if ( target.getPropA() == null ) {\r\n                    target.setPropA( new LinkedHashMap&lt;String, ChildA&gt;() );\r\n                }\r\n                mergeMaps( source.getPropA(), target.getPropA() );\r\n            }\r\n            else {\r\n                target.setPropA( null );\r\n            }\r\n            if ( source.getPropB() != null ) {\r\n                if ( target.getPropB() == null ) {\r\n                    target.setPropB( new LinkedHashMap&lt;String, ChildB&gt;() );\r\n                }\r\n                mergeMaps( source.getPropB(), target.getPropB() );\r\n            }\r\n            else {\r\n                target.setPropB( null );\r\n            }\r\n    \r\n            return target;\r\n        }\r\n    \r\n    }\r\n\r\nthe only difference is that it makes an update on target.\r\nIf you need to have a new object, you need to execute the merge method twice:\r\n\r\n    Obj newObj = new Obj();\r\n    newObj = ObjMapper.INSTANCE.merge(ob1, newObj); // add from ob1\r\n    newObj = ObjMapper.INSTANCE.merge(ob2, newObj); // add from ob2","title":"Merge objects/maps with mapstruct","body":"<pre><code>@Mapper\npublic interface ObjMapper {\n\n    ObjMapper INSTANCE = Mappers.getMapper(ObjMapper.class);\n    \n    Obj merge(Obj source, @MappingTarget Obj target);\n    \n    default &lt;T&gt; void mergeMaps(Map&lt;String, T&gt; source, @MappingTarget Map&lt;String, T&gt; target) {\n        if ( source == null ) {\n            return;\n        }\n        if ( target == null ) {\n            target = new HashMap&lt;&gt;();\n        }\n        target.putAll(source);\n    }\n    \n}\n</code></pre>\n<p>The generated code is:</p>\n<pre><code>public class ObjMapperImpl implements ObjMapper {\n\n    @Override\n    public Obj merge(Obj source, Obj target) {\n        if ( source == null ) {\n            return target;\n        }\n\n        if ( source.getPropA() != null ) {\n            if ( target.getPropA() == null ) {\n                target.setPropA( new LinkedHashMap&lt;String, ChildA&gt;() );\n            }\n            mergeMaps( source.getPropA(), target.getPropA() );\n        }\n        else {\n            target.setPropA( null );\n        }\n        if ( source.getPropB() != null ) {\n            if ( target.getPropB() == null ) {\n                target.setPropB( new LinkedHashMap&lt;String, ChildB&gt;() );\n            }\n            mergeMaps( source.getPropB(), target.getPropB() );\n        }\n        else {\n            target.setPropB( null );\n        }\n\n        return target;\n    }\n\n}\n</code></pre>\n<p>the only difference is that it makes an update on target.\nIf you need to have a new object, you need to execute the merge method twice:</p>\n<pre><code>Obj newObj = new Obj();\nnewObj = ObjMapper.INSTANCE.merge(ob1, newObj); // add from ob1\nnewObj = ObjMapper.INSTANCE.merge(ob2, newObj); // add from ob2\n</code></pre>\n"}],"owner":{"account_id":12016842,"reputation":424,"user_id":8791696,"display_name":"Yann"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77560278,"answer_count":1,"score":0,"last_activity_date":1701123749,"creation_date":1700477676,"question_id":77515278,"body_markdown":"I have two objects of the same type. All fields are `Map&lt;String, SomeType&gt;`, so the objects look like:\r\n\r\n```java\r\nclass Obj {\r\n  Map&lt;String, TypeA&gt; propA;\r\n  Map&lt;String, TypeB&gt; propB;\r\n  ...\r\n\r\n  Obj setPropA(Map&lt;String, TypeA&gt; newMap) { ... }\r\n  Obj setPropB(Map&lt;String, TypeB&gt; newMap) { ... }\r\n  ...\r\n \r\n  Obj putPropA(String key, TypeA a) { ... }\r\n  Obj putPropB(String key, TypeB b) { ... }\r\n  ...\r\n}\r\n```\r\n\r\nI need to merge two of these objects by merging/concatenating all map entries (the string keys never clash). Currently, this is done by hand. But, that seems clumsy and the as the class is generated, as soon as a property is added, the merge is incomplete.\r\n\r\n```java\r\nObj merge(Obj ob1, Obj ob2) {\r\n  return new Obj()\r\n    .setPropA(mergeMaps(ob1.getPropA(), ob2.getPropA()))\r\n    .setPropB(mergeMaps(ob1.getPropB(), ob2.getPropB()))\r\n    ...;\r\n}\r\n\r\n&lt;T&gt; Map&lt;String, T&gt; mergeMaps(Map&lt;String, T&gt; aMap, Map&lt;String, T&gt; bMap) {\r\n  aMap.putAll(bMap);\r\n  return aMap;\r\n}\r\n```\r\n\r\nCan mapstruct be used to automatically merge all of the field maps?\r\n","title":"Merge objects/maps with mapstruct","body":"<p>I have two objects of the same type. All fields are <code>Map&lt;String, SomeType&gt;</code>, so the objects look like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class Obj {\n  Map&lt;String, TypeA&gt; propA;\n  Map&lt;String, TypeB&gt; propB;\n  ...\n\n  Obj setPropA(Map&lt;String, TypeA&gt; newMap) { ... }\n  Obj setPropB(Map&lt;String, TypeB&gt; newMap) { ... }\n  ...\n \n  Obj putPropA(String key, TypeA a) { ... }\n  Obj putPropB(String key, TypeB b) { ... }\n  ...\n}\n</code></pre>\n<p>I need to merge two of these objects by merging/concatenating all map entries (the string keys never clash). Currently, this is done by hand. But, that seems clumsy and the as the class is generated, as soon as a property is added, the merge is incomplete.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Obj merge(Obj ob1, Obj ob2) {\n  return new Obj()\n    .setPropA(mergeMaps(ob1.getPropA(), ob2.getPropA()))\n    .setPropB(mergeMaps(ob1.getPropB(), ob2.getPropB()))\n    ...;\n}\n\n&lt;T&gt; Map&lt;String, T&gt; mergeMaps(Map&lt;String, T&gt; aMap, Map&lt;String, T&gt; bMap) {\n  aMap.putAll(bMap);\n  return aMap;\n}\n</code></pre>\n<p>Can mapstruct be used to automatically merge all of the field maps?</p>\n"},{"tags":["java","synchronization","volatile"],"comments":[{"owner":{"account_id":3211603,"reputation":289287,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1701862810,"post_id":77559975,"comment_id":136826964,"body_markdown":"If that’s the only method of the class, there is no need to store `a` and `b` in fields at all.","body":"If that’s the only method of the class, there is no need to store <code>a</code> and <code>b</code> in fields at all."}],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89758,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1701123392,"creation_date":1701123392,"answer_id":77560244,"question_id":77559975,"body_markdown":"the first.\r\n\r\nBut, only in interactions between other threads that _also_ lock on this lock object. In other words, if 10 threads all call `doStuff` simultaneously:\r\n\r\n* Those 10 threads each run the code there in some undefined order.\r\n* Each of the 10 executions sees the updates of the previous execution, and will run its execution as an atomic unit (i.e. the `a == 8` check will see its own `a = i`, guaranteed, as the state of `a`.\r\n\r\nThere is no need to _also_ declare those fields `volatile`.","title":"Java use synchronized and volatile when manipulating multiple properties and locking on a lock object","body":"<p>the first.</p>\n<p>But, only in interactions between other threads that <em>also</em> lock on this lock object. In other words, if 10 threads all call <code>doStuff</code> simultaneously:</p>\n<ul>\n<li>Those 10 threads each run the code there in some undefined order.</li>\n<li>Each of the 10 executions sees the updates of the previous execution, and will run its execution as an atomic unit (i.e. the <code>a == 8</code> check will see its own <code>a = i</code>, guaranteed, as the state of <code>a</code>.</li>\n</ul>\n<p>There is no need to <em>also</em> declare those fields <code>volatile</code>.</p>\n"}],"owner":{"account_id":23825289,"reputation":35,"user_id":17832434,"display_name":"Fexl"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77560244,"answer_count":1,"score":1,"last_activity_date":1701123392,"creation_date":1701119585,"question_id":77559975,"body_markdown":"I need to manipulate multiple properties in Java while keeping them in sync.\r\n\r\nIs this code correct (from my understanding this is):\r\n\r\n    class X {\r\n        private final Object lockObject = new Object();\r\n        private int a;\r\n        private boolean b;\r\n        private Y y;\r\n\r\n        public void doStuff(int i) {\r\n              synchronized (lockObject) {\r\n                    a = i;\r\n                    b = a == 8;\r\n                    y.someMethod(b);\r\n                    y = new Y(a, y);\r\n              }\r\n        }\r\n    }\r\n\r\nDoes this `synchronized` block ensure updates to all properties or just the locked property are written (in which case it would not really make sense to lock on a final object with no state)?\r\n\r\nOr do I need to use `volatile` in order to ensure memory visibility updates on all threads:\r\n\r\n    class X {\r\n        private final Object lockObject = new Object();\r\n        private volatile int a;\r\n        private volatile boolean b;\r\n        private volatile Y y;\r\n\r\n        public void doStuff(int i) {\r\n              synchronized (lockObject) {\r\n                    a = i;\r\n                    b = a == 8;\r\n                    y.someMethod(b);\r\n                    y = new Y(a, y);\r\n              }\r\n        }\r\n    }\r\n\r\nI am actually 99% sure the first one is correct but not a 100%, thanks for answers.","title":"Java use synchronized and volatile when manipulating multiple properties and locking on a lock object","body":"<p>I need to manipulate multiple properties in Java while keeping them in sync.</p>\n<p>Is this code correct (from my understanding this is):</p>\n<pre><code>class X {\n    private final Object lockObject = new Object();\n    private int a;\n    private boolean b;\n    private Y y;\n\n    public void doStuff(int i) {\n          synchronized (lockObject) {\n                a = i;\n                b = a == 8;\n                y.someMethod(b);\n                y = new Y(a, y);\n          }\n    }\n}\n</code></pre>\n<p>Does this <code>synchronized</code> block ensure updates to all properties or just the locked property are written (in which case it would not really make sense to lock on a final object with no state)?</p>\n<p>Or do I need to use <code>volatile</code> in order to ensure memory visibility updates on all threads:</p>\n<pre><code>class X {\n    private final Object lockObject = new Object();\n    private volatile int a;\n    private volatile boolean b;\n    private volatile Y y;\n\n    public void doStuff(int i) {\n          synchronized (lockObject) {\n                a = i;\n                b = a == 8;\n                y.someMethod(b);\n                y = new Y(a, y);\n          }\n    }\n}\n</code></pre>\n<p>I am actually 99% sure the first one is correct but not a 100%, thanks for answers.</p>\n"},{"tags":["java","swing","zooming","graphics2d"],"answers":[{"tags":[],"owner":{"account_id":12872220,"reputation":515,"user_id":9310248,"display_name":"krise"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1598437008,"creation_date":1598437008,"answer_id":63595468,"question_id":63583595,"body_markdown":"I solved the problem by implementing what is being described [here][1] \r\n\r\nHere is the updated code: \r\n\r\n    public class MyPanel extends JPanel {\r\n    ...\r\n        private double zoom = 1;\r\n        private int zoomPointX;\r\n        private int zoomPointY;\r\n    ...\r\n    \r\n       class CustomMouseWheelListener implements MouseWheelListener {\r\n            @Override\r\n            public void mouseWheelMoved(MouseWheelEvent e) {\r\n                zoomPointX = e.getX();\r\n                zoomPointY = e.getY();\r\n                if (e.getPreciseWheelRotation() &lt; 0) {\r\n                    zoom -= 0.1;\r\n                } else {\r\n                    zoom += 0.1;\r\n                }\r\n                if (zoom &lt; 0.01) {\r\n                    zoom = 0.01;\r\n                }\r\n                repaint();\r\n            }\r\n        }\r\n    ...\r\n        protected void paintComponent(Graphics g) {\r\n            Graphics2D g2D = (Graphics2D) g;\r\n            super.paintComponent(g2D);\r\n            AffineTransform at = g2D.getTransform();\r\n            at.translate(zoomPointX, zoomPointY);\r\n            at.scale(zoom, zoom);\r\n            at.translate(-zoomPointX, -zoomPointY);\r\n            g2D.setTransform(at);\r\n            a_different_class_where_i_do_some_drawing.draw(g2D);\r\n        }\r\n    \r\n    }\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://medium.com/@benjamin.botto/zooming-at-the-mouse-coordinates-with-affine-transformations-86e7312fd50b\r\n  [2]: https://i.stack.imgur.com/lzcDs.gif","title":"Java Graphics2D - Zoom on mouse location","body":"<p>I solved the problem by implementing what is being described <a href=\"https://medium.com/@benjamin.botto/zooming-at-the-mouse-coordinates-with-affine-transformations-86e7312fd50b\" rel=\"nofollow noreferrer\">here</a></p>\n<p>Here is the updated code:</p>\n<pre><code>public class MyPanel extends JPanel {\n...\n    private double zoom = 1;\n    private int zoomPointX;\n    private int zoomPointY;\n...\n\n   class CustomMouseWheelListener implements MouseWheelListener {\n        @Override\n        public void mouseWheelMoved(MouseWheelEvent e) {\n            zoomPointX = e.getX();\n            zoomPointY = e.getY();\n            if (e.getPreciseWheelRotation() &lt; 0) {\n                zoom -= 0.1;\n            } else {\n                zoom += 0.1;\n            }\n            if (zoom &lt; 0.01) {\n                zoom = 0.01;\n            }\n            repaint();\n        }\n    }\n...\n    protected void paintComponent(Graphics g) {\n        Graphics2D g2D = (Graphics2D) g;\n        super.paintComponent(g2D);\n        AffineTransform at = g2D.getTransform();\n        at.translate(zoomPointX, zoomPointY);\n        at.scale(zoom, zoom);\n        at.translate(-zoomPointX, -zoomPointY);\n        g2D.setTransform(at);\n        a_different_class_where_i_do_some_drawing.draw(g2D);\n    }\n\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/lzcDs.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lzcDs.gif\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":15152640,"reputation":39,"user_id":13133485,"display_name":"Andrew Cline"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701123287,"creation_date":1701123287,"answer_id":77560236,"question_id":63583595,"body_markdown":"Here is another solution if anyone is curious how to do this. My program was written differently so I had to take a different approach.\r\n\r\nThe premise is somewhat simple, but there are some gotchas. I will try to explain how the code works below. You most likely won&#39;t be able to copy and paste, so understanding how this works is most important.\r\n```\r\n    public void mouseWheelMoved(MouseWheelEvent e) {\r\n\t\t\tPoint2D before = null;\r\n\t\t\tPoint2D after = null;\r\n\r\n\t\t\tAffineTransform originalTransform = new AffineTransform(at);\r\n\t\t\tAffineTransform zoomedTransform = new AffineTransform();\r\n\t\t\t\r\n\t\t\ttry {\r\n\t\t\t\tbefore = originalTransform.inverseTransform(e.getPoint(), null);\r\n\t\t\t} catch (NoninvertibleTransformException e1) {\r\n\t\t\t\te1.printStackTrace();\r\n\t\t\t}\r\n\r\n\t\t\tzoom *= 1-(e.getPreciseWheelRotation()/5);\r\n\t\t\t((Painter) Frame1.painter).setScale(zoom/100);\r\n\t\t\t\r\n\t\t\tzoomedTransform.setToIdentity();\r\n\t\t\tzoomedTransform.translate(getWidth()/2, getHeight()/2);\r\n\t\t\tzoomedTransform.scale(scale, scale);\r\n\t\t\tzoomedTransform.translate(-getWidth()/2, -getHeight()/2);\r\n\t\t\tzoomedTransform.translate(translateX, translateY);\r\n\r\n\t\t    try {\r\n\t\t\t\tafter = zoomedTransform.inverseTransform(e.getPoint(), null);\r\n\t\t\t} catch (NoninvertibleTransformException e1) {\r\n\t\t\t\te1.printStackTrace();\r\n\t\t\t}\r\n\t\t    \r\n\t\t    \r\n\t\t    double deltaX = after.getX() - before.getX();\r\n\t\t    double deltaY = after.getY() - before.getY();\r\n\t\t    translate(deltaX,deltaY);\r\n    \r\n\t\t    Frame1.painter.repaint();\r\n}\r\n```\r\nThese variables will hold the transformed mouse position.\r\n```\r\nPoint2D before = null;\r\nPoint2D after = null;\r\n```\r\nWhat does that mean?\r\n\r\ne.getPoint() gives the PIXEL position of the mouse. We need the &quot;world&quot; coordinates of where the mouse is. If we are hovering over a boxes origin at the position (50,40), we want those values, not the mouse position values.\r\n\r\nE.g. if we translated our panel by 10 pixels in the X with 1x zoom/scale, our mouse position would be (40,40) while hovering over the box at (50,40). This becomes more complicated when you are zooming AND translating.\r\n\r\nTo make it easier to get the &#39;world&#39; coordinates, we need the inverseTransform() function. To prepare for that, we need to save the current AffineTransform BEFORE we zoom. (&#39;at&#39; is the global AffineTransform in my program)\r\n```\r\nAffineTransform originalTransform = new AffineTransform(at);\r\n```\r\nThen we will create another transform but this one is an identity transform, it has not been scaled or translated yet.\r\n```\r\nAffineTransform zoomedTransform = new AffineTransform();\r\n```\r\n\r\nOnce we have these, we can get the &#39;world&#39; coordinates of the mouse (before zooming). (50,40 as mentioned above)\r\n```\r\nbefore = originalTransform.inverseTransform(e.getPoint(), null);\r\n// before.getX() returns 50;\r\n// before.getY() returns 40;\r\n```\r\nNow we set the scale value based on the mouse scroll event.\r\n```\r\nzoom *= 1-(e.getPreciseWheelRotation()/5);\r\n/// This line just calls a function to set the variable &#39;scale&#39;\r\n((Painter) Frame1.painter).setScale(zoom/100);\r\n```\r\n\r\nNow we want to take our ***NEW*** identity transform and transform it using the old translation values but with the NEW scale value. ***(NOTE: This must be performed exactly the same way as in your paint() function.)***\r\n```\r\nzoomedTransform.setToIdentity();\r\nzoomedTransform.translate(getWidth()/2, getHeight()/2);\r\nzoomedTransform.scale(scale, scale);\r\nzoomedTransform.translate(-getWidth()/2, -getHeight()/2);\r\nzoomedTransform.translate(translateX, translateY);\r\n```\r\nNOTE: Our originalTransform is the transform BEFORE scaling/zooming. The zoomedTransform is after applying our new zoom/scale.\r\n\r\nNow that we have zoomed in, lets say our mouse is now over top of a different boxes origin at 20,30. Our mouse position has not changed, all we did was scroll the mouse wheel. What we want to do is take our mouse position and get the 20,30 coordinates. We do that by taking the inverse transform of our NEW transform.\r\n```\r\nafter = zoomedTransform.inverseTransform(e.getPoint(), null);\r\n```\r\n\r\nSo, &#39;before&#39; = (50,40) and &#39;after&#39; = (20,30)\r\nWe now want to translate the view by this difference. This will move the box at 50,40 under the mouse position. This will give the effect of zooming into the box at 50,40 instead of just zooming into the center of the screen.\r\n```\r\ndouble deltaX = after.getX() - before.getX();\r\ndouble deltaY = after.getY() - before.getY();\r\ntranslate(deltaX,deltaY);\r\n```\r\n\r\nThen we repaint.\r\n```\r\nFrame1.painter.repaint();\r\n```\r\n\r\n\r\n\r\nFor reference, here is the code in my paint function. NOTE how the translation and scaling is applied exactly the same as in the mouseWheel function.\r\n\r\n```\r\n\tpublic void paint(Graphics g) {\r\n\t\tloadColors();\r\n\t\tsuper.paint(g);\r\n\t\tGraphics2D g2D = (Graphics2D) g;\r\n\t\t\r\n\t\t//Set  anti-alias!\r\n\t    g2D.setRenderingHint(RenderingHints.KEY_ANTIALIASING,\r\n\t            RenderingHints.VALUE_ANTIALIAS_ON); \r\n\r\n\t   // Set anti-alias for text\r\n\t    g2D.setRenderingHint(RenderingHints.KEY_TEXT_ANTIALIASING,\r\n\t            RenderingHints.VALUE_TEXT_ANTIALIAS_ON); \r\n\t\t\r\n\t\tAffineTransform saveTransform = g2D.getTransform();\r\n\t\tg2D.setColor(backgroundColor);\r\n\t    g2D.fillRect(0, 0, getWidth(), getHeight());\r\n\t    at = new AffineTransform(saveTransform);\r\n\t    if(newTruss) {\r\n\t    \ttry {\r\n\t\t\t\tcenterView();\r\n\t\t\t} catch (NoninvertibleTransformException e) {\r\n\t\t\t\t// TODO Auto-generated catch block\r\n\t\t\t\te.printStackTrace();\r\n\t\t\t}\r\n\t    \tnewTruss = false;\r\n\t    }\r\n\t    at.translate(getWidth()/2, getHeight()/2);\r\n\t    at.scale(scale, scale);\r\n\t    at.translate(-getWidth()/2, -getHeight()/2);\r\n\t    at.translate(translateX, translateY);\r\n\t    g2D.setTransform(at);\r\n\r\n\t\tif(truss != null) {\r\n\t\t\tg2D.setColor(Color.WHITE);\r\n\t\t\t//truss.drawBoardsOutline(g2D);\r\n\t\t\ttruss.drawBoards(g2D, boardColor, lineColor);\r\n\t\t\ttruss.drawBoardsLongitudinalCOG(g2D, pointColor, 3);\r\n\t\t\ttruss.drawBoardsCOG(g2D, Color.GREEN, 1);\r\n\t\t\ttruss.drawSelectedBoards(g2D, Frame1.boardList, boardColor, Color.RED, lastSelectedBoard);\r\n\t\t\tif (lastSelectedBoard &gt; -1) {\r\n\t\t\t\ttruss.drawBoardPath(g2D, lastSelectedBoard, lastSelectedBoardDir, 50.0f, 7);\r\n\t\t\t\t//System.out.println(Frame1.placementList);\r\n\t\t\t}\r\n\t\t\t//truss.drawBoardPaths(g2D, 50.0f, 7);\r\n\t\t}\r\n\t}\r\n```","title":"Java Graphics2D - Zoom on mouse location","body":"<p>Here is another solution if anyone is curious how to do this. My program was written differently so I had to take a different approach.</p>\n<p>The premise is somewhat simple, but there are some gotchas. I will try to explain how the code works below. You most likely won't be able to copy and paste, so understanding how this works is most important.</p>\n<pre><code>    public void mouseWheelMoved(MouseWheelEvent e) {\n            Point2D before = null;\n            Point2D after = null;\n\n            AffineTransform originalTransform = new AffineTransform(at);\n            AffineTransform zoomedTransform = new AffineTransform();\n            \n            try {\n                before = originalTransform.inverseTransform(e.getPoint(), null);\n            } catch (NoninvertibleTransformException e1) {\n                e1.printStackTrace();\n            }\n\n            zoom *= 1-(e.getPreciseWheelRotation()/5);\n            ((Painter) Frame1.painter).setScale(zoom/100);\n            \n            zoomedTransform.setToIdentity();\n            zoomedTransform.translate(getWidth()/2, getHeight()/2);\n            zoomedTransform.scale(scale, scale);\n            zoomedTransform.translate(-getWidth()/2, -getHeight()/2);\n            zoomedTransform.translate(translateX, translateY);\n\n            try {\n                after = zoomedTransform.inverseTransform(e.getPoint(), null);\n            } catch (NoninvertibleTransformException e1) {\n                e1.printStackTrace();\n            }\n            \n            \n            double deltaX = after.getX() - before.getX();\n            double deltaY = after.getY() - before.getY();\n            translate(deltaX,deltaY);\n    \n            Frame1.painter.repaint();\n}\n</code></pre>\n<p>These variables will hold the transformed mouse position.</p>\n<pre><code>Point2D before = null;\nPoint2D after = null;\n</code></pre>\n<p>What does that mean?</p>\n<p>e.getPoint() gives the PIXEL position of the mouse. We need the &quot;world&quot; coordinates of where the mouse is. If we are hovering over a boxes origin at the position (50,40), we want those values, not the mouse position values.</p>\n<p>E.g. if we translated our panel by 10 pixels in the X with 1x zoom/scale, our mouse position would be (40,40) while hovering over the box at (50,40). This becomes more complicated when you are zooming AND translating.</p>\n<p>To make it easier to get the 'world' coordinates, we need the inverseTransform() function. To prepare for that, we need to save the current AffineTransform BEFORE we zoom. ('at' is the global AffineTransform in my program)</p>\n<pre><code>AffineTransform originalTransform = new AffineTransform(at);\n</code></pre>\n<p>Then we will create another transform but this one is an identity transform, it has not been scaled or translated yet.</p>\n<pre><code>AffineTransform zoomedTransform = new AffineTransform();\n</code></pre>\n<p>Once we have these, we can get the 'world' coordinates of the mouse (before zooming). (50,40 as mentioned above)</p>\n<pre><code>before = originalTransform.inverseTransform(e.getPoint(), null);\n// before.getX() returns 50;\n// before.getY() returns 40;\n</code></pre>\n<p>Now we set the scale value based on the mouse scroll event.</p>\n<pre><code>zoom *= 1-(e.getPreciseWheelRotation()/5);\n/// This line just calls a function to set the variable 'scale'\n((Painter) Frame1.painter).setScale(zoom/100);\n</code></pre>\n<p>Now we want to take our <em><strong>NEW</strong></em> identity transform and transform it using the old translation values but with the NEW scale value. <em><strong>(NOTE: This must be performed exactly the same way as in your paint() function.)</strong></em></p>\n<pre><code>zoomedTransform.setToIdentity();\nzoomedTransform.translate(getWidth()/2, getHeight()/2);\nzoomedTransform.scale(scale, scale);\nzoomedTransform.translate(-getWidth()/2, -getHeight()/2);\nzoomedTransform.translate(translateX, translateY);\n</code></pre>\n<p>NOTE: Our originalTransform is the transform BEFORE scaling/zooming. The zoomedTransform is after applying our new zoom/scale.</p>\n<p>Now that we have zoomed in, lets say our mouse is now over top of a different boxes origin at 20,30. Our mouse position has not changed, all we did was scroll the mouse wheel. What we want to do is take our mouse position and get the 20,30 coordinates. We do that by taking the inverse transform of our NEW transform.</p>\n<pre><code>after = zoomedTransform.inverseTransform(e.getPoint(), null);\n</code></pre>\n<p>So, 'before' = (50,40) and 'after' = (20,30)\nWe now want to translate the view by this difference. This will move the box at 50,40 under the mouse position. This will give the effect of zooming into the box at 50,40 instead of just zooming into the center of the screen.</p>\n<pre><code>double deltaX = after.getX() - before.getX();\ndouble deltaY = after.getY() - before.getY();\ntranslate(deltaX,deltaY);\n</code></pre>\n<p>Then we repaint.</p>\n<pre><code>Frame1.painter.repaint();\n</code></pre>\n<p>For reference, here is the code in my paint function. NOTE how the translation and scaling is applied exactly the same as in the mouseWheel function.</p>\n<pre><code>    public void paint(Graphics g) {\n        loadColors();\n        super.paint(g);\n        Graphics2D g2D = (Graphics2D) g;\n        \n        //Set  anti-alias!\n        g2D.setRenderingHint(RenderingHints.KEY_ANTIALIASING,\n                RenderingHints.VALUE_ANTIALIAS_ON); \n\n       // Set anti-alias for text\n        g2D.setRenderingHint(RenderingHints.KEY_TEXT_ANTIALIASING,\n                RenderingHints.VALUE_TEXT_ANTIALIAS_ON); \n        \n        AffineTransform saveTransform = g2D.getTransform();\n        g2D.setColor(backgroundColor);\n        g2D.fillRect(0, 0, getWidth(), getHeight());\n        at = new AffineTransform(saveTransform);\n        if(newTruss) {\n            try {\n                centerView();\n            } catch (NoninvertibleTransformException e) {\n                // TODO Auto-generated catch block\n                e.printStackTrace();\n            }\n            newTruss = false;\n        }\n        at.translate(getWidth()/2, getHeight()/2);\n        at.scale(scale, scale);\n        at.translate(-getWidth()/2, -getHeight()/2);\n        at.translate(translateX, translateY);\n        g2D.setTransform(at);\n\n        if(truss != null) {\n            g2D.setColor(Color.WHITE);\n            //truss.drawBoardsOutline(g2D);\n            truss.drawBoards(g2D, boardColor, lineColor);\n            truss.drawBoardsLongitudinalCOG(g2D, pointColor, 3);\n            truss.drawBoardsCOG(g2D, Color.GREEN, 1);\n            truss.drawSelectedBoards(g2D, Frame1.boardList, boardColor, Color.RED, lastSelectedBoard);\n            if (lastSelectedBoard &gt; -1) {\n                truss.drawBoardPath(g2D, lastSelectedBoard, lastSelectedBoardDir, 50.0f, 7);\n                //System.out.println(Frame1.placementList);\n            }\n            //truss.drawBoardPaths(g2D, 50.0f, 7);\n        }\n    }\n</code></pre>\n"}],"owner":{"account_id":12872220,"reputation":515,"user_id":9310248,"display_name":"krise"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1248,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":63595468,"answer_count":2,"score":0,"last_activity_date":1701123287,"creation_date":1598374204,"question_id":63583595,"body_markdown":"I have a jpanel that I draw on. I would like to be able to zoom in and out using the mousewheel, but I want to zoom to the location of the mouse, such that the point under the mouse stays the same. I have found some [questions here on stackoverflow][1], but they did not work for me.\r\n\r\nI got pretty close to doing what I want by implementing what is described [here][2]. Here is my code: \r\n\r\n    public class MyPanel extends JPanel {\r\n    ...\r\n        private double zoom = 1;\r\n        private double zoom_old = 1;\r\n        private int zoomPointX;\r\n        private int zoomPointY;\r\n    ...\r\n    \r\n       class CustomMouseWheelListener implements MouseWheelListener {\r\n            @Override\r\n            public void mouseWheelMoved(MouseWheelEvent e) {\r\n                zoomPointX = e.getX();\r\n                zoomPointY = e.getY();\r\n                if (e.getPreciseWheelRotation() &lt; 0) {\r\n                    zoom -= 0.1;\r\n                } else {\r\n                    zoom += 0.1;\r\n                }\r\n                if (zoom &lt; 0.01) {\r\n                    zoom = 0.01;\r\n                }\r\n                repaint();\r\n            }\r\n        }\r\n    ...\r\n        protected void paintComponent(Graphics g) {\r\n            Graphics2D g2D = (Graphics2D) g;\r\n            super.paintComponent(g2D);\r\n            if (zoom != zoom_old) {\r\n                double scalechange = zoom - zoom_old;\r\n                zoom_old = zoom;\r\n                double offsetX = -(zoomPointX * scalechange);\r\n                double offsetY = -(zoomPointY * scalechange) ;\r\n                AffineTransform at = new AffineTransform();\r\n                at.scale(zoom, zoom);\r\n                at.translate(offsetX, offsetY);\r\n                g2D.setTransform(at);\r\n            }\r\n            a_different_class_where_i_do_some_drawing.draw(g2D);\r\n        }\r\n    \r\n    }\r\n\r\nThis ALMOST does what I want. If I try to zoom, I notice that the position of the mouse is taken into account, so for example If I have my mouse on the left of the panel it will roughly zoom in on the left. However, it does not zoom exactly onto the mouse, so the point under the mouse still changes.\r\n\r\nCan anyone help me fix this?\r\n\r\nEDIT: \r\nHere is a picture of what is happening with the code posted above: I start out with the mouse on the blue square and then just scroll with the mouse wheel. As you can see, the mouse position if being changed:\r\n[![enter image description here][3]][3]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/30792089/java-graphics2d-translate-and-scale\r\n  [2]: https://stackoverflow.com/questions/2916081/zoom-in-on-a-point-using-scale-and-translate\r\n  [3]: https://i.stack.imgur.com/7Y4NI.gif","title":"Java Graphics2D - Zoom on mouse location","body":"<p>I have a jpanel that I draw on. I would like to be able to zoom in and out using the mousewheel, but I want to zoom to the location of the mouse, such that the point under the mouse stays the same. I have found some <a href=\"https://stackoverflow.com/questions/30792089/java-graphics2d-translate-and-scale\">questions here on stackoverflow</a>, but they did not work for me.</p>\n<p>I got pretty close to doing what I want by implementing what is described <a href=\"https://stackoverflow.com/questions/2916081/zoom-in-on-a-point-using-scale-and-translate\">here</a>. Here is my code:</p>\n<pre><code>public class MyPanel extends JPanel {\n...\n    private double zoom = 1;\n    private double zoom_old = 1;\n    private int zoomPointX;\n    private int zoomPointY;\n...\n\n   class CustomMouseWheelListener implements MouseWheelListener {\n        @Override\n        public void mouseWheelMoved(MouseWheelEvent e) {\n            zoomPointX = e.getX();\n            zoomPointY = e.getY();\n            if (e.getPreciseWheelRotation() &lt; 0) {\n                zoom -= 0.1;\n            } else {\n                zoom += 0.1;\n            }\n            if (zoom &lt; 0.01) {\n                zoom = 0.01;\n            }\n            repaint();\n        }\n    }\n...\n    protected void paintComponent(Graphics g) {\n        Graphics2D g2D = (Graphics2D) g;\n        super.paintComponent(g2D);\n        if (zoom != zoom_old) {\n            double scalechange = zoom - zoom_old;\n            zoom_old = zoom;\n            double offsetX = -(zoomPointX * scalechange);\n            double offsetY = -(zoomPointY * scalechange) ;\n            AffineTransform at = new AffineTransform();\n            at.scale(zoom, zoom);\n            at.translate(offsetX, offsetY);\n            g2D.setTransform(at);\n        }\n        a_different_class_where_i_do_some_drawing.draw(g2D);\n    }\n\n}\n</code></pre>\n<p>This ALMOST does what I want. If I try to zoom, I notice that the position of the mouse is taken into account, so for example If I have my mouse on the left of the panel it will roughly zoom in on the left. However, it does not zoom exactly onto the mouse, so the point under the mouse still changes.</p>\n<p>Can anyone help me fix this?</p>\n<p>EDIT:\nHere is a picture of what is happening with the code posted above: I start out with the mouse on the blue square and then just scroll with the mouse wheel. As you can see, the mouse position if being changed:\n<a href=\"https://i.stack.imgur.com/7Y4NI.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7Y4NI.gif\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","c++","performance","cpu-architecture","branch-prediction"],"comments":[{"owner":{"account_id":7428050,"reputation":677,"user_id":5649936,"display_name":"Šimon Hrabec"},"score":119,"creation_date":1526042708,"post_id":11227809,"comment_id":87601479,"body_markdown":"Another observation is that you don&#39;t need to sort the array, but you just need to partition it with the value 128. Sorting is n*log(n), whereas partitioning is just linear. Basically it is just one run of the quick sort partitioning step with the pivot chosen to be 128. Unfortunately in C++ there is just nth_element function, which partition by position, not by value.","body":"Another observation is that you don&#39;t need to sort the array, but you just need to partition it with the value 128. Sorting is n*log(n), whereas partitioning is just linear. Basically it is just one run of the quick sort partitioning step with the pivot chosen to be 128. Unfortunately in C++ there is just nth_element function, which partition by position, not by value."},{"owner":{"account_id":23414,"reputation":7718,"user_id":58668,"accept_rate":39,"display_name":"Jonas K&#246;lker"},"score":46,"creation_date":1601886376,"post_id":11227809,"comment_id":113534273,"body_markdown":"@screwnut here&#39;s an experiment which would show that partitioning is sufficient: create an unsorted but partitioned array with otherwise random contents. Measure time. Sort it. Measure time again. The two measurements should be basically indistinguishable. (Experiment 2: create a random array. Measure time. Partition it. Measure time again. You should see the same speed-up as sorting. You could roll the two experiments into one.)","body":"@screwnut here&#39;s an experiment which would show that partitioning is sufficient: create an unsorted but partitioned array with otherwise random contents. Measure time. Sort it. Measure time again. The two measurements should be basically indistinguishable. (Experiment 2: create a random array. Measure time. Partition it. Measure time again. You should see the same speed-up as sorting. You could roll the two experiments into one.)"},{"owner":{"account_id":29830,"reputation":25912,"user_id":80869,"accept_rate":88,"display_name":"Piotr Czapla"},"score":41,"creation_date":1617181625,"post_id":11227809,"comment_id":118229765,"body_markdown":"Btw. on Apple M1 the code runs in 17 sec unsorted, and in 7 sec sorted, so the branch prediction penalty isn&#39;t that bad on risc architecture.","body":"Btw. on Apple M1 the code runs in 17 sec unsorted, and in 7 sec sorted, so the branch prediction penalty isn&#39;t that bad on risc architecture."},{"owner":{"account_id":78868,"reputation":336965,"user_id":224132,"accept_rate":83,"display_name":"Peter Cordes"},"score":36,"creation_date":1618468287,"post_id":11227809,"comment_id":118610990,"body_markdown":"@RomanYavorskyi: It depends on the compiler.  If they make branchless asm for this specific test (e.g. as part of vectorizing with SIMD like in [Why is processing an unsorted array the same speed as processing a sorted array with modern x86-64 clang?](https://stackoverflow.com/q/66521344), or just with scalar `cmov` ([gcc optimization flag -O3 makes code slower than -O2](https://stackoverflow.com/q/28875325)), then sorted or not doesn&#39;t matter.  But unpredictable branches are still a very real thing when it&#39;s not as simple as counting, so it would be insane to delete this question.","body":"@RomanYavorskyi: It depends on the compiler.  If they make branchless asm for this specific test (e.g. as part of vectorizing with SIMD like in <a href=\"https://stackoverflow.com/q/66521344\">Why is processing an unsorted array the same speed as processing a sorted array with modern x86-64 clang?</a>, or just with scalar <code>cmov</code> (<a href=\"https://stackoverflow.com/q/28875325\">gcc optimization flag -O3 makes code slower than -O2</a>), then sorted or not doesn&#39;t matter.  But unpredictable branches are still a very real thing when it&#39;s not as simple as counting, so it would be insane to delete this question."},{"owner":{"account_id":78868,"reputation":336965,"user_id":224132,"accept_rate":83,"display_name":"Peter Cordes"},"score":20,"creation_date":1618469213,"post_id":11227809,"comment_id":118611283,"body_markdown":"@screwnut: To be fair, though, it still wouldn&#39;t be worth partitioning first, because partitioning requires conditional copying or swapping based on the same `array[i] &gt; 128` compare.  (Unless you&#39;re going to be counting multiple times, and you want to partition the bulk of an array so it&#39;s still fast, only mispredicting in an unpartitioned part after some appends or modifications).  If you can get the compiler to do it, ideally just vectorize with SIMD, or at least use branchless scalar if the data is unpredictable.  (See previous comment for links.)","body":"@screwnut: To be fair, though, it still wouldn&#39;t be worth partitioning first, because partitioning requires conditional copying or swapping based on the same <code>array[i] &gt; 128</code> compare.  (Unless you&#39;re going to be counting multiple times, and you want to partition the bulk of an array so it&#39;s still fast, only mispredicting in an unpartitioned part after some appends or modifications).  If you can get the compiler to do it, ideally just vectorize with SIMD, or at least use branchless scalar if the data is unpredictable.  (See previous comment for links.)"},{"owner":{"account_id":10795251,"reputation":5207,"user_id":7941251,"display_name":"SuperStormer"},"score":2,"creation_date":1654310355,"post_id":11227809,"comment_id":128067004,"body_markdown":"2021 followup: [Why is processing an unsorted array the same speed as processing a sorted array with modern x86-64 clang?](https://stackoverflow.com/q/66521344)","body":"2021 followup: <a href=\"https://stackoverflow.com/q/66521344\">Why is processing an unsorted array the same speed as processing a sorted array with modern x86-64 clang?</a>"},{"owner":{"account_id":78868,"reputation":336965,"user_id":224132,"accept_rate":83,"display_name":"Peter Cordes"},"score":2,"creation_date":1654375339,"post_id":11227809,"comment_id":128077512,"body_markdown":"@SuperStormer: Yup, that&#39;s already linked at the bottom of the question, in the &quot;Related / followup Q&amp;As&quot; section I added, and an earlier comment.  Perhaps it should be even more prominent since multiple people do still manage to miss it, e.g. a recent duplicate of that clang auto-vectorization question even linked this one.","body":"@SuperStormer: Yup, that&#39;s already linked at the bottom of the question, in the &quot;Related / followup Q&amp;As&quot; section I added, and an earlier comment.  Perhaps it should be even more prominent since multiple people do still manage to miss it, e.g. a recent duplicate of that clang auto-vectorization question even linked this one."},{"owner":{"account_id":10541,"reputation":5244,"user_id":19974,"accept_rate":100,"display_name":"Jason Short"},"score":2,"creation_date":1657058940,"post_id":11227809,"comment_id":128718359,"body_markdown":"Unironically have you tried this run in RELEASE mode?  On my local Core i7 laptop debug is similar to your numbers.  But in release mode it is 0.7 and 0.68 seconds.  The compiler optimized it for you.","body":"Unironically have you tried this run in RELEASE mode?  On my local Core i7 laptop debug is similar to your numbers.  But in release mode it is 0.7 and 0.68 seconds.  The compiler optimized it for you."},{"owner":{"account_id":78868,"reputation":336965,"user_id":224132,"accept_rate":83,"display_name":"Peter Cordes"},"score":6,"creation_date":1657064804,"post_id":11227809,"comment_id":128719329,"body_markdown":"@JasonShort: This question is from 2012.  Even modern Java probably still uses a branch.  And GCC auto-vectorization was only enabled at `-O3` until GCC12 (this year) enabled it at `-O2`.  And as the linked Q&amp;As at the bottom show, [specifically the GCC -O2 vs -O3 one](https://stackoverflow.com/q/28875325), GCC `-O2` used a branch for its scalar code.  But yes, the right choice for C++ compilers these days is auto-vectorization, or at least scalar if-conversion to cmov, on unpredictable branches like this, and that happens if you enable *full* optimization, but many people use `-O2`.","body":"@JasonShort: This question is from 2012.  Even modern Java probably still uses a branch.  And GCC auto-vectorization was only enabled at <code>-O3</code> until GCC12 (this year) enabled it at <code>-O2</code>.  And as the linked Q&amp;As at the bottom show, <a href=\"https://stackoverflow.com/q/28875325\">specifically the GCC -O2 vs -O3 one</a>, GCC <code>-O2</code> used a branch for its scalar code.  But yes, the right choice for C++ compilers these days is auto-vectorization, or at least scalar if-conversion to cmov, on unpredictable branches like this, and that happens if you enable <i>full</i> optimization, but many people use <code>-O2</code>."},{"owner":{"account_id":78868,"reputation":336965,"user_id":224132,"accept_rate":83,"display_name":"Peter Cordes"},"score":2,"creation_date":1701123253,"post_id":11227809,"comment_id":136733980,"body_markdown":"@ColeTobin : You&#39;re right that the underlying effect isn&#39;t language-specific, but it is more pronounced in language implementations that AoT or JIT compile to native machine code.  An interpreter would still have some unpredictable data-dependent branching, but lots of other (predictable) branching to dispatch handler functions.  And only happens when the optimizer chooses not to make branchless (scalar or vector) asm.  There aren&#39;t 2 other tags we really want, so I&#39;m going to roll back to re-add the [c++][java] tags.  They don&#39;t make the question worse, and the examples use them.","body":"@ColeTobin : You&#39;re right that the underlying effect isn&#39;t language-specific, but it is more pronounced in language implementations that AoT or JIT compile to native machine code.  An interpreter would still have some unpredictable data-dependent branching, but lots of other (predictable) branching to dispatch handler functions.  And only happens when the optimizer chooses not to make branchless (scalar or vector) asm.  There aren&#39;t 2 other tags we really want, so I&#39;m going to roll back to re-add the [c++][java] tags.  They don&#39;t make the question worse, and the examples use them."}],"answers":[{"tags":[],"owner":{"account_id":996105,"reputation":182284,"user_id":1011995,"display_name":"Daniel Fischer"},"down_vote_count":21,"up_vote_count":4683,"is_accepted":false,"score":4662,"last_activity_date":1470383590,"creation_date":1340805285,"answer_id":11227877,"question_id":11227809,"body_markdown":"**Branch prediction.**\n\n  With a sorted array, the condition `data[c] &gt;= 128` is first `false` for a streak of values, then becomes `true` for all later values. That&#39;s easy to predict. With an unsorted array, you pay for the branching cost.","title":"Why is processing a sorted array faster than processing an unsorted array?","body":"<p><strong>Branch prediction.</strong></p>\n<p>With a sorted array, the condition <code>data[c] &gt;= 128</code> is first <code>false</code> for a streak of values, then becomes <code>true</code> for all later values. That's easy to predict. With an unsorted array, you pay for the branching cost.</p>\n"},{"tags":[],"owner":{"account_id":559988,"reputation":466339,"user_id":922184,"display_name":"Mysticial"},"down_vote_count":32,"up_vote_count":34890,"is_accepted":true,"score":34858,"last_activity_date":1695116158,"creation_date":1340805402,"answer_id":11227902,"question_id":11227809,"body_markdown":"**You are a victim of [branch prediction][1] fail.**\r\n\r\n---\r\n\r\n## What is Branch Prediction?\r\n\r\nConsider a railroad junction:\r\n\r\n[![Image showing a railroad junction][2]][3]\r\n&lt;sub&gt;[Image][3] by Mecanismo, via Wikimedia Commons. Used under the [CC-By-SA 3.0][4] license.&lt;/sub&gt;\r\n\r\nNow for the sake of argument, suppose this is back in the 1800s - before long-distance or radio communication.\r\n\r\nYou are a blind operator of a junction and you hear a train coming. You have no idea which way it is supposed to go. You stop the train to ask the driver which direction they want. And then you set the switch appropriately.\r\n\r\n*Trains are heavy and have a lot of inertia, so they take forever to start up and slow down.*\r\n\r\nIs there a better way? You guess which direction the train will go!\r\n\r\n- If you guessed right, it continues on.\r\n- If you guessed wrong, the driver will stop, back up, and yell at you to flip the switch. Then it can restart down the other path.\r\n\r\n**If you guess right every time**, the train will never have to stop.  \r\n**If you guess wrong too often**, the train will spend a lot of time stopping, backing up, and restarting.\r\n\r\n---\r\n\r\n**Consider an if-statement:** At the processor level, it is a branch instruction:\r\n\r\n![if(x &gt;= 128) compiles into a jump-if-less-than processor instruction.][5]\r\n\r\nYou are a processor and you see a branch. You have no idea which way it will go. What do you do? You halt execution and wait until the previous instructions are complete. Then you continue down the correct path.\r\n\r\n*Modern processors are complicated and have long pipelines. This means they take forever to &quot;warm up&quot; and &quot;slow down&quot;.*\r\n\r\nIs there a better way? You guess which direction the branch will go!\r\n\r\n- If you guessed right, you continue executing.\r\n- If you guessed wrong, you need to flush the pipeline and roll back to the branch. Then you can restart down the other path.\r\n\r\n**If you guess right every time**, the execution will never have to stop.  \r\n**If you guess wrong too often**, you spend a lot of time stalling, rolling back, and restarting.\r\n\r\n---\r\n\r\nThis is branch prediction. I admit it&#39;s not the best analogy since the train could just signal the direction with a flag. But in computers, the processor doesn&#39;t know which direction a branch will go until the last moment.\r\n\r\nHow would you strategically guess to minimize the number of times that the train must back up and go down the other path? You look at the past history! If the train goes left 99% of the time, then you guess left. If it alternates, then you alternate your guesses. If it goes one way every three times, you guess the same...\r\n\r\n***In other words, you try to identify a pattern and follow it.*** This is more or less how branch predictors work.\r\n\r\nMost applications have well-behaved branches. Therefore, modern branch predictors will typically achieve &gt;90% hit rates. But when faced with unpredictable branches with no recognizable patterns, branch predictors are virtually useless.\r\n\r\nFurther reading: [&quot;Branch predictor&quot; article on Wikipedia][1].\r\n\r\n---\r\n\r\n## As hinted from above, the culprit is this if-statement:\r\n\r\n    if (data[c] &gt;= 128)\r\n        sum += data[c];\r\n\r\nNotice that the data is evenly distributed between 0 and 255. When the data is sorted, roughly the first half of the iterations will not enter the if-statement. After that, they will all enter the if-statement.\r\n\r\nThis is very friendly to the branch predictor since the branch consecutively goes the same direction many times. Even a simple saturating counter will correctly predict the branch except for the few iterations after it switches direction.\r\n\r\n**Quick visualization:**\r\n\r\n```none\r\nT = branch taken\r\nN = branch not taken\r\n\r\ndata[] = 0, 1, 2, 3, 4, ... 126, 127, 128, 129, 130, ... 250, 251, 252, ...\r\nbranch = N  N  N  N  N  ...   N    N    T    T    T  ...   T    T    T  ...\r\n\r\n       = NNNNNNNNNNNN ... NNNNNNNTTTTTTTTT ... TTTTTTTTTT  (easy to predict)\r\n```\r\nHowever, when the data is completely random, the branch predictor is rendered useless, because it can&#39;t predict random data. Thus there will probably be around 50% misprediction (no better than random guessing).\r\n\r\n```none\r\ndata[] = 226, 185, 125, 158, 198, 144, 217, 79, 202, 118,  14, 150, 177, 182, ...\r\nbranch =   T,   T,   N,   T,   T,   T,   T,  N,   T,   N,   N,   T,   T,   T  ...\r\n\r\n       = TTNTTTTNTNNTTT ...   (completely random - impossible to predict)\r\n```\r\n\r\n---\r\n\r\n**What can be done?**\r\n\r\nIf the compiler isn&#39;t able to optimize the branch into a conditional move, you can try some hacks if you are willing to sacrifice readability for performance.\r\n\r\nReplace:\r\n\r\n    if (data[c] &gt;= 128)\r\n        sum += data[c];\r\n\r\nwith:\r\n\r\n    int t = (data[c] - 128) &gt;&gt; 31;\r\n    sum += ~t &amp; data[c];\r\n\r\nThis eliminates the branch and replaces it with some bitwise operations.\r\n\r\n&lt;sub&gt;(Note that this hack is not strictly equivalent to the original if-statement. But in this case, it&#39;s valid for all the input values of `data[]`.)&lt;/sub&gt;\r\n\r\n**Benchmarks: Core i7 920 @ 3.5 GHz**\r\n\r\nC++ - Visual Studio 2010 - x64 Release\r\n\r\n|Scenario|Time (seconds)|\r\n|---|---|\r\n|Branching - Random data|11.777|\r\n|Branching - Sorted data|2.352|\r\n|Branchless - Random data|2.564|\r\n|Branchless - Sorted data|2.587|\r\n\r\nJava - NetBeans 7.1.1 JDK 7 - x64\r\n\r\n|Scenario|Time (seconds)|\r\n|---|---|\r\n|Branching - Random data|10.93293813|\r\n|Branching - Sorted data|5.643797077|\r\n|Branchless - Random data|3.113581453|\r\n|Branchless - Sorted data|3.186068823|\r\n\r\nObservations:\r\n\r\n- **With the Branch:** There is a huge difference between the sorted and unsorted data.\r\n- **With the Hack:** There is no difference between sorted and unsorted data.\r\n- In the C++ case, the hack is actually a tad slower than with the branch when the data is sorted.\r\n\r\nA general rule of thumb is to avoid data-dependent branching in critical loops (such as in this example).\r\n\r\n---\r\n\r\n**Update:**\r\n\r\n- GCC 4.6.1 with `-O3` or `-ftree-vectorize` on x64 is able to generate a conditional move, so there is no difference between the sorted and unsorted data - both are fast.\r\n\r\n   (Or somewhat fast: for the already-sorted case, `cmov` can be slower especially if GCC puts it on the critical path instead of just `add`, especially on Intel before Broadwell where `cmov` has 2 cycle latency: https://stackoverflow.com/questions/28875325/gcc-optimization-flag-o3-makes-code-slower-than-o2)\r\n\r\n- VC++ 2010 is unable to generate conditional moves for this branch even under `/Ox`.\r\n\r\n- [Intel C++ Compiler][6] (ICC) 11 does something miraculous. It [interchanges the two loops][7], thereby hoisting the unpredictable branch to the outer loop. Not only is it immune to the mispredictions, it&#39;s also twice as fast as whatever VC++ and GCC can generate! In other words, ICC took advantage of the test-loop to defeat the benchmark...\r\n\r\n- If you give the Intel compiler the branchless code, it just outright vectorizes it... and is just as fast as with the branch (with the loop interchange).\r\n\r\nThis goes to show that even mature modern compilers can vary wildly in their ability to optimize code...\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Branch_predictor\r\n  [2]: https://i.stack.imgur.com/muxnt.jpg\r\n  [3]: https://commons.wikimedia.org/wiki/File:Entroncamento_do_Transpraia.JPG\r\n  [4]: https://creativecommons.org/licenses/by-sa/3.0/deed.en\r\n  [5]: https://i.stack.imgur.com/pyfwC.png\r\n  [6]: https://en.wikipedia.org/wiki/Intel_C++_Compiler\r\n  [7]: https://en.wikipedia.org/wiki/Loop_interchange","title":"Why is processing a sorted array faster than processing an unsorted array?","body":"<p><strong>You are a victim of <a href=\"https://en.wikipedia.org/wiki/Branch_predictor\" rel=\"noreferrer\">branch prediction</a> fail.</strong></p>\n<hr />\n<h2>What is Branch Prediction?</h2>\n<p>Consider a railroad junction:</p>\n<p><a href=\"https://commons.wikimedia.org/wiki/File:Entroncamento_do_Transpraia.JPG\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/muxnt.jpg\" alt=\"Image showing a railroad junction\" /></a>\n<sub><a href=\"https://commons.wikimedia.org/wiki/File:Entroncamento_do_Transpraia.JPG\" rel=\"noreferrer\">Image</a> by Mecanismo, via Wikimedia Commons. Used under the <a href=\"https://creativecommons.org/licenses/by-sa/3.0/deed.en\" rel=\"noreferrer\">CC-By-SA 3.0</a> license.</sub></p>\n<p>Now for the sake of argument, suppose this is back in the 1800s - before long-distance or radio communication.</p>\n<p>You are a blind operator of a junction and you hear a train coming. You have no idea which way it is supposed to go. You stop the train to ask the driver which direction they want. And then you set the switch appropriately.</p>\n<p><em>Trains are heavy and have a lot of inertia, so they take forever to start up and slow down.</em></p>\n<p>Is there a better way? You guess which direction the train will go!</p>\n<ul>\n<li>If you guessed right, it continues on.</li>\n<li>If you guessed wrong, the driver will stop, back up, and yell at you to flip the switch. Then it can restart down the other path.</li>\n</ul>\n<p><strong>If you guess right every time</strong>, the train will never have to stop.<br />\n<strong>If you guess wrong too often</strong>, the train will spend a lot of time stopping, backing up, and restarting.</p>\n<hr />\n<p><strong>Consider an if-statement:</strong> At the processor level, it is a branch instruction:</p>\n<p><img src=\"https://i.stack.imgur.com/pyfwC.png\" alt=\"if(x &gt;= 128) compiles into a jump-if-less-than processor instruction.\" /></p>\n<p>You are a processor and you see a branch. You have no idea which way it will go. What do you do? You halt execution and wait until the previous instructions are complete. Then you continue down the correct path.</p>\n<p><em>Modern processors are complicated and have long pipelines. This means they take forever to &quot;warm up&quot; and &quot;slow down&quot;.</em></p>\n<p>Is there a better way? You guess which direction the branch will go!</p>\n<ul>\n<li>If you guessed right, you continue executing.</li>\n<li>If you guessed wrong, you need to flush the pipeline and roll back to the branch. Then you can restart down the other path.</li>\n</ul>\n<p><strong>If you guess right every time</strong>, the execution will never have to stop.<br />\n<strong>If you guess wrong too often</strong>, you spend a lot of time stalling, rolling back, and restarting.</p>\n<hr />\n<p>This is branch prediction. I admit it's not the best analogy since the train could just signal the direction with a flag. But in computers, the processor doesn't know which direction a branch will go until the last moment.</p>\n<p>How would you strategically guess to minimize the number of times that the train must back up and go down the other path? You look at the past history! If the train goes left 99% of the time, then you guess left. If it alternates, then you alternate your guesses. If it goes one way every three times, you guess the same...</p>\n<p><em><strong>In other words, you try to identify a pattern and follow it.</strong></em> This is more or less how branch predictors work.</p>\n<p>Most applications have well-behaved branches. Therefore, modern branch predictors will typically achieve &gt;90% hit rates. But when faced with unpredictable branches with no recognizable patterns, branch predictors are virtually useless.</p>\n<p>Further reading: <a href=\"https://en.wikipedia.org/wiki/Branch_predictor\" rel=\"noreferrer\">&quot;Branch predictor&quot; article on Wikipedia</a>.</p>\n<hr />\n<h2>As hinted from above, the culprit is this if-statement:</h2>\n<pre><code>if (data[c] &gt;= 128)\n    sum += data[c];\n</code></pre>\n<p>Notice that the data is evenly distributed between 0 and 255. When the data is sorted, roughly the first half of the iterations will not enter the if-statement. After that, they will all enter the if-statement.</p>\n<p>This is very friendly to the branch predictor since the branch consecutively goes the same direction many times. Even a simple saturating counter will correctly predict the branch except for the few iterations after it switches direction.</p>\n<p><strong>Quick visualization:</strong></p>\n<pre class=\"lang-none prettyprint-override\"><code>T = branch taken\nN = branch not taken\n\ndata[] = 0, 1, 2, 3, 4, ... 126, 127, 128, 129, 130, ... 250, 251, 252, ...\nbranch = N  N  N  N  N  ...   N    N    T    T    T  ...   T    T    T  ...\n\n       = NNNNNNNNNNNN ... NNNNNNNTTTTTTTTT ... TTTTTTTTTT  (easy to predict)\n</code></pre>\n<p>However, when the data is completely random, the branch predictor is rendered useless, because it can't predict random data. Thus there will probably be around 50% misprediction (no better than random guessing).</p>\n<pre class=\"lang-none prettyprint-override\"><code>data[] = 226, 185, 125, 158, 198, 144, 217, 79, 202, 118,  14, 150, 177, 182, ...\nbranch =   T,   T,   N,   T,   T,   T,   T,  N,   T,   N,   N,   T,   T,   T  ...\n\n       = TTNTTTTNTNNTTT ...   (completely random - impossible to predict)\n</code></pre>\n<hr />\n<p><strong>What can be done?</strong></p>\n<p>If the compiler isn't able to optimize the branch into a conditional move, you can try some hacks if you are willing to sacrifice readability for performance.</p>\n<p>Replace:</p>\n<pre><code>if (data[c] &gt;= 128)\n    sum += data[c];\n</code></pre>\n<p>with:</p>\n<pre><code>int t = (data[c] - 128) &gt;&gt; 31;\nsum += ~t &amp; data[c];\n</code></pre>\n<p>This eliminates the branch and replaces it with some bitwise operations.</p>\n<p><sub>(Note that this hack is not strictly equivalent to the original if-statement. But in this case, it's valid for all the input values of <code>data[]</code>.)</sub></p>\n<p><strong>Benchmarks: Core i7 920 @ 3.5 GHz</strong></p>\n<p>C++ - Visual Studio 2010 - x64 Release</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>Scenario</th>\n<th>Time (seconds)</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Branching - Random data</td>\n<td>11.777</td>\n</tr>\n<tr>\n<td>Branching - Sorted data</td>\n<td>2.352</td>\n</tr>\n<tr>\n<td>Branchless - Random data</td>\n<td>2.564</td>\n</tr>\n<tr>\n<td>Branchless - Sorted data</td>\n<td>2.587</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>Java - NetBeans 7.1.1 JDK 7 - x64</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>Scenario</th>\n<th>Time (seconds)</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Branching - Random data</td>\n<td>10.93293813</td>\n</tr>\n<tr>\n<td>Branching - Sorted data</td>\n<td>5.643797077</td>\n</tr>\n<tr>\n<td>Branchless - Random data</td>\n<td>3.113581453</td>\n</tr>\n<tr>\n<td>Branchless - Sorted data</td>\n<td>3.186068823</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>Observations:</p>\n<ul>\n<li><strong>With the Branch:</strong> There is a huge difference between the sorted and unsorted data.</li>\n<li><strong>With the Hack:</strong> There is no difference between sorted and unsorted data.</li>\n<li>In the C++ case, the hack is actually a tad slower than with the branch when the data is sorted.</li>\n</ul>\n<p>A general rule of thumb is to avoid data-dependent branching in critical loops (such as in this example).</p>\n<hr />\n<p><strong>Update:</strong></p>\n<ul>\n<li><p>GCC 4.6.1 with <code>-O3</code> or <code>-ftree-vectorize</code> on x64 is able to generate a conditional move, so there is no difference between the sorted and unsorted data - both are fast.</p>\n<p>(Or somewhat fast: for the already-sorted case, <code>cmov</code> can be slower especially if GCC puts it on the critical path instead of just <code>add</code>, especially on Intel before Broadwell where <code>cmov</code> has 2 cycle latency: <a href=\"https://stackoverflow.com/questions/28875325/gcc-optimization-flag-o3-makes-code-slower-than-o2\">gcc optimization flag -O3 makes code slower than -O2</a>)</p>\n</li>\n<li><p>VC++ 2010 is unable to generate conditional moves for this branch even under <code>/Ox</code>.</p>\n</li>\n<li><p><a href=\"https://en.wikipedia.org/wiki/Intel_C++_Compiler\" rel=\"noreferrer\">Intel C++ Compiler</a> (ICC) 11 does something miraculous. It <a href=\"https://en.wikipedia.org/wiki/Loop_interchange\" rel=\"noreferrer\">interchanges the two loops</a>, thereby hoisting the unpredictable branch to the outer loop. Not only is it immune to the mispredictions, it's also twice as fast as whatever VC++ and GCC can generate! In other words, ICC took advantage of the test-loop to defeat the benchmark...</p>\n</li>\n<li><p>If you give the Intel compiler the branchless code, it just outright vectorizes it... and is just as fast as with the branch (with the loop interchange).</p>\n</li>\n</ul>\n<p>This goes to show that even mature modern compilers can vary wildly in their ability to optimize code...</p>\n"},{"tags":[],"owner":{"account_id":463679,"reputation":47267,"user_id":866732,"accept_rate":88,"display_name":"WiSaGaN"},"down_vote_count":13,"up_vote_count":3813,"is_accepted":false,"score":3800,"last_activity_date":1656861172,"creation_date":1340849643,"answer_id":11237235,"question_id":11227809,"body_markdown":"The reason why performance improves drastically when the data is sorted is that the branch prediction penalty is removed, as explained beautifully in [Mysticial&#39;s answer][1].\r\n\r\nNow, if we look at the code\r\n\r\n\tif (data[c] &gt;= 128)\r\n\t\tsum += data[c];\r\n\r\nwe can find that the meaning of this particular `if... else...` branch is to add something when a condition is satisfied. This type of branch can be easily transformed into a **conditional move** statement, which would be compiled into a conditional move instruction: `cmovl`, in an `x86` system. The branch and thus the potential branch prediction penalty is removed.\r\n\r\nIn `C`, thus `C++`, the statement, which would compile directly (without any optimization) into the conditional move instruction in `x86`, is the ternary operator `... ? ... : ...`. So we rewrite the above statement into an equivalent one:\r\n\r\n\tsum += data[c] &gt;=128 ? data[c] : 0;\r\n\r\nWhile maintaining readability, we can check the speedup factor.\r\n\r\nOn an Intel [Core i7][2]-2600K @ 3.4&amp;nbsp;GHz and Visual Studio 2010 Release Mode, the benchmark is:\r\n\r\n**x86**\r\n\r\n|Scenario|Time (seconds)|\r\n|---|---|\r\n|Branching - Random data|8.885|\r\n|Branching - Sorted data|1.528|\r\n|Branchless - Random data|3.716|\r\n|Branchless - Sorted data|3.71|\r\n\r\n**x64**\r\n\r\n|Scenario|Time (seconds)|\r\n|---|---|\r\n|Branching - Random data|11.302|\r\n|Branching - Sorted data|1.830|\r\n|Branchless - Random data|2.736|\r\n|Branchless - Sorted data|2.737|\r\n\r\nThe result is robust in multiple tests. We get a great speedup when the branch result is unpredictable, but we suffer a little bit when it is predictable. In fact, when using a conditional move, the performance is the same regardless of the data pattern.\r\n\r\nNow let&#39;s look more closely by investigating the `x86` assembly they generate. For simplicity, we use two functions `max1` and `max2`.\r\n\r\n`max1` uses the conditional branch `if... else ...`:\r\n```\r\nint max1(int a, int b) {\r\n\tif (a &gt; b)\r\n\t\treturn a;\r\n\telse\r\n\t\treturn b;\r\n}\r\n```\r\n\r\n`max2` uses the ternary operator `... ? ... : ...`:\r\n```\r\nint max2(int a, int b) {\r\n\treturn a &gt; b ? a : b;\r\n}\r\n```\r\n\r\nOn an x86-64 machine, `GCC -S` generates the assembly below.\r\n```\r\n:max1\r\n\tmovl    %edi, -4(%rbp)\r\n\tmovl    %esi, -8(%rbp)\r\n\tmovl    -4(%rbp), %eax\r\n\tcmpl    -8(%rbp), %eax\r\n\tjle     .L2\r\n\tmovl    -4(%rbp), %eax\r\n\tmovl    %eax, -12(%rbp)\r\n\tjmp     .L4\r\n.L2:\r\n\tmovl    -8(%rbp), %eax\r\n\tmovl    %eax, -12(%rbp)\r\n.L4:\r\n\tmovl    -12(%rbp), %eax\r\n\tleave\r\n\tret\r\n\r\n:max2\r\n\tmovl    %edi, -4(%rbp)\r\n\tmovl    %esi, -8(%rbp)\r\n\tmovl    -4(%rbp), %eax\r\n\tcmpl    %eax, -8(%rbp)\r\n\tcmovge  -8(%rbp), %eax\r\n\tleave\r\n\tret\r\n```\r\n\r\n`max2` uses much less code due to the usage of instruction `cmovge`. But the real gain is that `max2` does not involve branch jumps, `jmp`, which would have a significant performance penalty if the predicted result is not right.\r\n\r\nSo why does a conditional move perform better?\r\n\r\nIn a typical `x86` processor, the execution of an instruction is divided into several stages. Roughly, we have different hardware to deal with different stages. So we do not have to wait for one instruction to finish to start a new one. This is called **[pipelining][3]**.\r\n\r\nIn a branch case, the following instruction is determined by the preceding one, so we cannot do pipelining. We have to either wait or predict.\r\n\r\nIn a conditional move case, the execution of conditional move instruction is divided into several stages, but the earlier stages like `Fetch` and `Decode` do not depend on the result of the previous instruction; only the latter stages need the result. Thus, we wait a fraction of one instruction&#39;s execution time. This is why the conditional move version is slower than the branch when the prediction is easy.\r\n\r\nThe book *[Computer Systems: A Programmer&#39;s Perspective, second edition][4]* explains this in detail. You can check Section 3.6.6 for *Conditional Move Instructions*, entire Chapter 4 for *Processor Architecture*, and Section 5.11.2 for special treatment for *Branch Prediction and Misprediction Penalties*.\r\n\r\nSometimes, some modern compilers can optimize our code to assembly with better performance, and sometimes some compilers can&#39;t (the code in question is using Visual Studio&#39;s native compiler). Knowing the performance difference between a branch and a conditional move when unpredictable can help us write code with better performance when the scenario gets so complex that the compiler can not optimize them automatically.\r\n\r\n [1]: //stackoverflow.com/questions/11227809/why-is-it-faster-to-process-a-sorted-array-than-an-unsorted-array/11227902#11227902\r\n [2]: //en.wikipedia.org/wiki/Intel_Core#Core_i7\r\n [3]: //en.wikipedia.org/wiki/Pipeline_(computing)\r\n [4]: //www.amazon.com/Computer-Systems-Programmers-Perspective-Edition/dp/0136108040/","title":"Why is processing a sorted array faster than processing an unsorted array?","body":"<p>The reason why performance improves drastically when the data is sorted is that the branch prediction penalty is removed, as explained beautifully in <a href=\"//stackoverflow.com/questions/11227809/why-is-it-faster-to-process-a-sorted-array-than-an-unsorted-array/11227902#11227902\">Mysticial's answer</a>.</p>\n<p>Now, if we look at the code</p>\n<pre><code>if (data[c] &gt;= 128)\n    sum += data[c];\n</code></pre>\n<p>we can find that the meaning of this particular <code>if... else...</code> branch is to add something when a condition is satisfied. This type of branch can be easily transformed into a <strong>conditional move</strong> statement, which would be compiled into a conditional move instruction: <code>cmovl</code>, in an <code>x86</code> system. The branch and thus the potential branch prediction penalty is removed.</p>\n<p>In <code>C</code>, thus <code>C++</code>, the statement, which would compile directly (without any optimization) into the conditional move instruction in <code>x86</code>, is the ternary operator <code>... ? ... : ...</code>. So we rewrite the above statement into an equivalent one:</p>\n<pre><code>sum += data[c] &gt;=128 ? data[c] : 0;\n</code></pre>\n<p>While maintaining readability, we can check the speedup factor.</p>\n<p>On an Intel <a href=\"//en.wikipedia.org/wiki/Intel_Core#Core_i7\" rel=\"noreferrer\">Core i7</a>-2600K @ 3.4 GHz and Visual Studio 2010 Release Mode, the benchmark is:</p>\n<p><strong>x86</strong></p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>Scenario</th>\n<th>Time (seconds)</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Branching - Random data</td>\n<td>8.885</td>\n</tr>\n<tr>\n<td>Branching - Sorted data</td>\n<td>1.528</td>\n</tr>\n<tr>\n<td>Branchless - Random data</td>\n<td>3.716</td>\n</tr>\n<tr>\n<td>Branchless - Sorted data</td>\n<td>3.71</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p><strong>x64</strong></p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>Scenario</th>\n<th>Time (seconds)</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Branching - Random data</td>\n<td>11.302</td>\n</tr>\n<tr>\n<td>Branching - Sorted data</td>\n<td>1.830</td>\n</tr>\n<tr>\n<td>Branchless - Random data</td>\n<td>2.736</td>\n</tr>\n<tr>\n<td>Branchless - Sorted data</td>\n<td>2.737</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>The result is robust in multiple tests. We get a great speedup when the branch result is unpredictable, but we suffer a little bit when it is predictable. In fact, when using a conditional move, the performance is the same regardless of the data pattern.</p>\n<p>Now let's look more closely by investigating the <code>x86</code> assembly they generate. For simplicity, we use two functions <code>max1</code> and <code>max2</code>.</p>\n<p><code>max1</code> uses the conditional branch <code>if... else ...</code>:</p>\n<pre><code>int max1(int a, int b) {\n    if (a &gt; b)\n        return a;\n    else\n        return b;\n}\n</code></pre>\n<p><code>max2</code> uses the ternary operator <code>... ? ... : ...</code>:</p>\n<pre><code>int max2(int a, int b) {\n    return a &gt; b ? a : b;\n}\n</code></pre>\n<p>On an x86-64 machine, <code>GCC -S</code> generates the assembly below.</p>\n<pre><code>:max1\n    movl    %edi, -4(%rbp)\n    movl    %esi, -8(%rbp)\n    movl    -4(%rbp), %eax\n    cmpl    -8(%rbp), %eax\n    jle     .L2\n    movl    -4(%rbp), %eax\n    movl    %eax, -12(%rbp)\n    jmp     .L4\n.L2:\n    movl    -8(%rbp), %eax\n    movl    %eax, -12(%rbp)\n.L4:\n    movl    -12(%rbp), %eax\n    leave\n    ret\n\n:max2\n    movl    %edi, -4(%rbp)\n    movl    %esi, -8(%rbp)\n    movl    -4(%rbp), %eax\n    cmpl    %eax, -8(%rbp)\n    cmovge  -8(%rbp), %eax\n    leave\n    ret\n</code></pre>\n<p><code>max2</code> uses much less code due to the usage of instruction <code>cmovge</code>. But the real gain is that <code>max2</code> does not involve branch jumps, <code>jmp</code>, which would have a significant performance penalty if the predicted result is not right.</p>\n<p>So why does a conditional move perform better?</p>\n<p>In a typical <code>x86</code> processor, the execution of an instruction is divided into several stages. Roughly, we have different hardware to deal with different stages. So we do not have to wait for one instruction to finish to start a new one. This is called <strong><a href=\"//en.wikipedia.org/wiki/Pipeline_(computing)\" rel=\"noreferrer\">pipelining</a></strong>.</p>\n<p>In a branch case, the following instruction is determined by the preceding one, so we cannot do pipelining. We have to either wait or predict.</p>\n<p>In a conditional move case, the execution of conditional move instruction is divided into several stages, but the earlier stages like <code>Fetch</code> and <code>Decode</code> do not depend on the result of the previous instruction; only the latter stages need the result. Thus, we wait a fraction of one instruction's execution time. This is why the conditional move version is slower than the branch when the prediction is easy.</p>\n<p>The book <em><a href=\"https://rads.stackoverflow.com/amzn/click/com/0136108040\" rel=\"noreferrer\" rel=\"nofollow noreferrer\">Computer Systems: A Programmer's Perspective, second edition</a></em> explains this in detail. You can check Section 3.6.6 for <em>Conditional Move Instructions</em>, entire Chapter 4 for <em>Processor Architecture</em>, and Section 5.11.2 for special treatment for <em>Branch Prediction and Misprediction Penalties</em>.</p>\n<p>Sometimes, some modern compilers can optimize our code to assembly with better performance, and sometimes some compilers can't (the code in question is using Visual Studio's native compiler). Knowing the performance difference between a branch and a conditional move when unpredictable can help us write code with better performance when the scenario gets so complex that the compiler can not optimize them automatically.</p>\n"},{"tags":[],"owner":{"account_id":461945,"reputation":32882,"user_id":863980,"accept_rate":83,"display_name":"vulcan raven"},"down_vote_count":27,"up_vote_count":2639,"is_accepted":false,"score":2612,"last_activity_date":1558961493,"creation_date":1341282330,"answer_id":11303693,"question_id":11227809,"body_markdown":"If you are curious about even more optimizations that can be done to this code, consider this:\r\n\r\nStarting with the original loop:\r\n\r\n    for (unsigned i = 0; i &lt; 100000; ++i)\r\n    {\r\n        for (unsigned j = 0; j &lt; arraySize; ++j)\r\n        {\r\n            if (data[j] &gt;= 128)\r\n                sum += data[j];\r\n        }\r\n    }\r\n\r\nWith loop interchange, we can safely change this loop to:\r\n\r\n    for (unsigned j = 0; j &lt; arraySize; ++j)\r\n    {\r\n        for (unsigned i = 0; i &lt; 100000; ++i)\r\n        {\r\n            if (data[j] &gt;= 128)\r\n                sum += data[j];\r\n        }\r\n    }\r\n\r\nThen, you can see that the `if` conditional is constant throughout the execution of the `i` loop, so you can hoist the `if` out:\r\n\r\n    for (unsigned j = 0; j &lt; arraySize; ++j)\r\n    {\r\n        if (data[j] &gt;= 128)\r\n        {\r\n            for (unsigned i = 0; i &lt; 100000; ++i)\r\n            {\r\n                sum += data[j];\r\n            }\r\n        }\r\n    }\r\n\r\nThen, you see that the inner loop can be collapsed into one single expression, assuming the floating point model allows it (`/fp:fast` is thrown, for example)\r\n\r\n    for (unsigned j = 0; j &lt; arraySize; ++j)\r\n    {\r\n        if (data[j] &gt;= 128)\r\n        {\r\n            sum += data[j] * 100000;\r\n        }\r\n    }\r\n\r\nThat one is 100,000 times faster than before.\r\n","title":"Why is processing a sorted array faster than processing an unsorted array?","body":"<p>If you are curious about even more optimizations that can be done to this code, consider this:</p>\n\n<p>Starting with the original loop:</p>\n\n<pre><code>for (unsigned i = 0; i &lt; 100000; ++i)\n{\n    for (unsigned j = 0; j &lt; arraySize; ++j)\n    {\n        if (data[j] &gt;= 128)\n            sum += data[j];\n    }\n}\n</code></pre>\n\n<p>With loop interchange, we can safely change this loop to:</p>\n\n<pre><code>for (unsigned j = 0; j &lt; arraySize; ++j)\n{\n    for (unsigned i = 0; i &lt; 100000; ++i)\n    {\n        if (data[j] &gt;= 128)\n            sum += data[j];\n    }\n}\n</code></pre>\n\n<p>Then, you can see that the <code>if</code> conditional is constant throughout the execution of the <code>i</code> loop, so you can hoist the <code>if</code> out:</p>\n\n<pre><code>for (unsigned j = 0; j &lt; arraySize; ++j)\n{\n    if (data[j] &gt;= 128)\n    {\n        for (unsigned i = 0; i &lt; 100000; ++i)\n        {\n            sum += data[j];\n        }\n    }\n}\n</code></pre>\n\n<p>Then, you see that the inner loop can be collapsed into one single expression, assuming the floating point model allows it (<code>/fp:fast</code> is thrown, for example)</p>\n\n<pre><code>for (unsigned j = 0; j &lt; arraySize; ++j)\n{\n    if (data[j] &gt;= 128)\n    {\n        sum += data[j] * 100000;\n    }\n}\n</code></pre>\n\n<p>That one is 100,000 times faster than before.</p>\n"},{"tags":[],"owner":{"account_id":45644,"reputation":234641,"user_id":134633,"display_name":"caf"},"down_vote_count":4,"up_vote_count":2167,"is_accepted":false,"score":2163,"last_activity_date":1350588021,"creation_date":1350021213,"answer_id":12853037,"question_id":11227809,"body_markdown":"No doubt some of us would be interested in ways of identifying code that is problematic for the CPU&#39;s branch-predictor. The Valgrind tool `cachegrind` has a branch-predictor simulator, enabled by using the `--branch-sim=yes` flag. Running it over the examples in this question, with the number of outer loops reduced to 10000 and compiled with `g++`, gives these results:\r\n\r\n**Sorted:**\r\n\r\n    ==32551== Branches:        656,645,130  (  656,609,208 cond +    35,922 ind)\r\n    ==32551== Mispredicts:         169,556  (      169,095 cond +       461 ind)\r\n    ==32551== Mispred rate:            0.0% (          0.0%     +       1.2%   )\r\n\r\n**Unsorted:**\r\n\r\n    ==32555== Branches:        655,996,082  (  655,960,160 cond +  35,922 ind)\r\n    ==32555== Mispredicts:     164,073,152  (  164,072,692 cond +     460 ind)\r\n    ==32555== Mispred rate:           25.0% (         25.0%     +     1.2%   )\r\n\r\nDrilling down into the line-by-line output produced by `cg_annotate` we see for the loop in question:\r\n\r\n**Sorted:**\r\n\r\n              Bc    Bcm Bi Bim\r\n          10,001      4  0   0      for (unsigned i = 0; i &lt; 10000; ++i)\r\n               .      .  .   .      {\r\n               .      .  .   .          // primary loop\r\n     327,690,000 10,016  0   0          for (unsigned c = 0; c &lt; arraySize; ++c)\r\n               .      .  .   .          {\r\n     327,680,000 10,006  0   0              if (data[c] &gt;= 128)\r\n               0      0  0   0                  sum += data[c];\r\n               .      .  .   .          }\r\n               .      .  .   .      }\r\n\r\n**Unsorted:**\r\n\r\n              Bc         Bcm Bi Bim\r\n          10,001           4  0   0      for (unsigned i = 0; i &lt; 10000; ++i)\r\n               .           .  .   .      {\r\n               .           .  .   .          // primary loop\r\n     327,690,000      10,038  0   0          for (unsigned c = 0; c &lt; arraySize; ++c)\r\n               .           .  .   .          {\r\n     327,680,000 164,050,007  0   0              if (data[c] &gt;= 128)\r\n               0           0  0   0                  sum += data[c];\r\n               .           .  .   .          }\r\n               .           .  .   .      }\r\n\r\nThis lets you easily identify the problematic line - in the unsorted version the `if (data[c] &gt;= 128)` line is causing 164,050,007 mispredicted conditional branches (`Bcm`) under cachegrind&#39;s branch-predictor model, whereas it&#39;s only causing 10,006 in the sorted version.\r\n\r\n----------\r\n\r\nAlternatively, on Linux you can use the performance counters subsystem to accomplish the same task, but with native performance using CPU counters.\r\n\r\n    perf stat ./sumtest_sorted\r\n\r\n**Sorted:**\r\n\r\n     Performance counter stats for &#39;./sumtest_sorted&#39;:\r\n\r\n      11808.095776 task-clock                #    0.998 CPUs utilized          \r\n             1,062 context-switches          #    0.090 K/sec                  \r\n                14 CPU-migrations            #    0.001 K/sec                  \r\n               337 page-faults               #    0.029 K/sec                  \r\n    26,487,882,764 cycles                    #    2.243 GHz                    \r\n    41,025,654,322 instructions              #    1.55  insns per cycle        \r\n     6,558,871,379 branches                  #  555.455 M/sec                  \r\n           567,204 branch-misses             #    0.01% of all branches        \r\n\r\n      11.827228330 seconds time elapsed\r\n\r\n**Unsorted:**\r\n\r\n     Performance counter stats for &#39;./sumtest_unsorted&#39;:\r\n\r\n      28877.954344 task-clock                #    0.998 CPUs utilized          \r\n             2,584 context-switches          #    0.089 K/sec                  \r\n                18 CPU-migrations            #    0.001 K/sec                  \r\n               335 page-faults               #    0.012 K/sec                  \r\n    65,076,127,595 cycles                    #    2.253 GHz                    \r\n    41,032,528,741 instructions              #    0.63  insns per cycle        \r\n     6,560,579,013 branches                  #  227.183 M/sec                  \r\n     1,646,394,749 branch-misses             #   25.10% of all branches        \r\n\r\n      28.935500947 seconds time elapsed\r\n\r\nIt can also do source code annotation with dissassembly.\r\n\r\n    perf record -e branch-misses ./sumtest_unsorted\r\n    perf annotate -d sumtest_unsorted\r\n&lt;div&gt;&lt;/div&gt;\r\n     Percent |      Source code &amp; Disassembly of sumtest_unsorted\r\n    ------------------------------------------------\r\n    ...\r\n             :                      sum += data[c];\r\n        0.00 :        400a1a:       mov    -0x14(%rbp),%eax\r\n       39.97 :        400a1d:       mov    %eax,%eax\r\n        5.31 :        400a1f:       mov    -0x20040(%rbp,%rax,4),%eax\r\n        4.60 :        400a26:       cltq   \r\n        0.00 :        400a28:       add    %rax,-0x30(%rbp)\r\n    ...\r\n\r\nSee [the performance tutorial][1] for more details.\r\n\r\n  [1]: https://perf.wiki.kernel.org/index.php/Tutorial\r\n","title":"Why is processing a sorted array faster than processing an unsorted array?","body":"<p>No doubt some of us would be interested in ways of identifying code that is problematic for the CPU's branch-predictor. The Valgrind tool <code>cachegrind</code> has a branch-predictor simulator, enabled by using the <code>--branch-sim=yes</code> flag. Running it over the examples in this question, with the number of outer loops reduced to 10000 and compiled with <code>g++</code>, gives these results:</p>\n\n<p><strong>Sorted:</strong></p>\n\n<pre><code>==32551== Branches:        656,645,130  (  656,609,208 cond +    35,922 ind)\n==32551== Mispredicts:         169,556  (      169,095 cond +       461 ind)\n==32551== Mispred rate:            0.0% (          0.0%     +       1.2%   )\n</code></pre>\n\n<p><strong>Unsorted:</strong></p>\n\n<pre><code>==32555== Branches:        655,996,082  (  655,960,160 cond +  35,922 ind)\n==32555== Mispredicts:     164,073,152  (  164,072,692 cond +     460 ind)\n==32555== Mispred rate:           25.0% (         25.0%     +     1.2%   )\n</code></pre>\n\n<p>Drilling down into the line-by-line output produced by <code>cg_annotate</code> we see for the loop in question:</p>\n\n<p><strong>Sorted:</strong></p>\n\n<pre><code>          Bc    Bcm Bi Bim\n      10,001      4  0   0      for (unsigned i = 0; i &lt; 10000; ++i)\n           .      .  .   .      {\n           .      .  .   .          // primary loop\n 327,690,000 10,016  0   0          for (unsigned c = 0; c &lt; arraySize; ++c)\n           .      .  .   .          {\n 327,680,000 10,006  0   0              if (data[c] &gt;= 128)\n           0      0  0   0                  sum += data[c];\n           .      .  .   .          }\n           .      .  .   .      }\n</code></pre>\n\n<p><strong>Unsorted:</strong></p>\n\n<pre><code>          Bc         Bcm Bi Bim\n      10,001           4  0   0      for (unsigned i = 0; i &lt; 10000; ++i)\n           .           .  .   .      {\n           .           .  .   .          // primary loop\n 327,690,000      10,038  0   0          for (unsigned c = 0; c &lt; arraySize; ++c)\n           .           .  .   .          {\n 327,680,000 164,050,007  0   0              if (data[c] &gt;= 128)\n           0           0  0   0                  sum += data[c];\n           .           .  .   .          }\n           .           .  .   .      }\n</code></pre>\n\n<p>This lets you easily identify the problematic line - in the unsorted version the <code>if (data[c] &gt;= 128)</code> line is causing 164,050,007 mispredicted conditional branches (<code>Bcm</code>) under cachegrind's branch-predictor model, whereas it's only causing 10,006 in the sorted version.</p>\n\n<hr>\n\n<p>Alternatively, on Linux you can use the performance counters subsystem to accomplish the same task, but with native performance using CPU counters.</p>\n\n<pre><code>perf stat ./sumtest_sorted\n</code></pre>\n\n<p><strong>Sorted:</strong></p>\n\n<pre><code> Performance counter stats for './sumtest_sorted':\n\n  11808.095776 task-clock                #    0.998 CPUs utilized          \n         1,062 context-switches          #    0.090 K/sec                  \n            14 CPU-migrations            #    0.001 K/sec                  \n           337 page-faults               #    0.029 K/sec                  \n26,487,882,764 cycles                    #    2.243 GHz                    \n41,025,654,322 instructions              #    1.55  insns per cycle        \n 6,558,871,379 branches                  #  555.455 M/sec                  \n       567,204 branch-misses             #    0.01% of all branches        \n\n  11.827228330 seconds time elapsed\n</code></pre>\n\n<p><strong>Unsorted:</strong></p>\n\n<pre><code> Performance counter stats for './sumtest_unsorted':\n\n  28877.954344 task-clock                #    0.998 CPUs utilized          \n         2,584 context-switches          #    0.089 K/sec                  \n            18 CPU-migrations            #    0.001 K/sec                  \n           335 page-faults               #    0.012 K/sec                  \n65,076,127,595 cycles                    #    2.253 GHz                    \n41,032,528,741 instructions              #    0.63  insns per cycle        \n 6,560,579,013 branches                  #  227.183 M/sec                  \n 1,646,394,749 branch-misses             #   25.10% of all branches        \n\n  28.935500947 seconds time elapsed\n</code></pre>\n\n<p>It can also do source code annotation with dissassembly.</p>\n\n<pre><code>perf record -e branch-misses ./sumtest_unsorted\nperf annotate -d sumtest_unsorted\n</code></pre>\n\n\n\n<pre><code> Percent |      Source code &amp; Disassembly of sumtest_unsorted\n------------------------------------------------\n...\n         :                      sum += data[c];\n    0.00 :        400a1a:       mov    -0x14(%rbp),%eax\n   39.97 :        400a1d:       mov    %eax,%eax\n    5.31 :        400a1f:       mov    -0x20040(%rbp,%rax,4),%eax\n    4.60 :        400a26:       cltq   \n    0.00 :        400a28:       add    %rax,-0x30(%rbp)\n...\n</code></pre>\n\n<p>See <a href=\"https://perf.wiki.kernel.org/index.php/Tutorial\" rel=\"noreferrer\">the performance tutorial</a> for more details.</p>\n"},{"tags":[],"owner":{"account_id":1006540,"reputation":5112,"user_id":1020149,"accept_rate":21,"display_name":"Shan"},"down_vote_count":2,"up_vote_count":188,"is_accepted":false,"score":186,"last_activity_date":1521204334,"creation_date":1356884206,"answer_id":14092288,"question_id":11227809,"body_markdown":"I tried the same code with MATLAB 2011b with my MacBook Pro (Intel i7, 64 bit, 2.4 GHz) for the following MATLAB code:\r\n\r\n    % Processing time with Sorted data vs unsorted data\r\n    %==========================================================================\r\n    % Generate data\r\n    arraySize = 32768\r\n    sum = 0;\r\n    % Generate random integer data from range 0 to 255\r\n    data = randi(256, arraySize, 1);\r\n\r\n\r\n    %Sort the data\r\n    data1= sort(data); % data1= data  when no sorting done\r\n\r\n\r\n    %Start a stopwatch timer to measure the execution time\r\n    tic;\r\n\r\n    for i=1:100000\r\n\r\n        for j=1:arraySize\r\n\r\n            if data1(j)&gt;=128\r\n                sum=sum + data1(j);\r\n            end\r\n        end\r\n    end\r\n\r\n    toc;\r\n\r\n    ExeTimeWithSorting = toc - tic;\r\n\r\n\r\nThe results for the above MATLAB code are as follows:\r\n\r\n      a: Elapsed time (without sorting) = 3479.880861 seconds.\r\n      b: Elapsed time (with sorting ) = 2377.873098 seconds.\r\n\r\nThe results of the C code as in @GManNickG I get:\r\n\r\n      a: Elapsed time (without sorting) = 19.8761 sec.\r\n      b: Elapsed time (with sorting ) = 7.37778 sec.\r\n\r\nBased on this, it looks MATLAB is almost *175 times* slower than the C implementation without sorting and *350 times* slower with sorting. In other words, the effect (of branch prediction) is *1.46x* for MATLAB implementation and *2.7x* for the C implementation.\r\n","title":"Why is processing a sorted array faster than processing an unsorted array?","body":"<p>I tried the same code with MATLAB 2011b with my MacBook Pro (Intel i7, 64 bit, 2.4 GHz) for the following MATLAB code:</p>\n\n<pre><code>% Processing time with Sorted data vs unsorted data\n%==========================================================================\n% Generate data\narraySize = 32768\nsum = 0;\n% Generate random integer data from range 0 to 255\ndata = randi(256, arraySize, 1);\n\n\n%Sort the data\ndata1= sort(data); % data1= data  when no sorting done\n\n\n%Start a stopwatch timer to measure the execution time\ntic;\n\nfor i=1:100000\n\n    for j=1:arraySize\n\n        if data1(j)&gt;=128\n            sum=sum + data1(j);\n        end\n    end\nend\n\ntoc;\n\nExeTimeWithSorting = toc - tic;\n</code></pre>\n\n<p>The results for the above MATLAB code are as follows:</p>\n\n<pre><code>  a: Elapsed time (without sorting) = 3479.880861 seconds.\n  b: Elapsed time (with sorting ) = 2377.873098 seconds.\n</code></pre>\n\n<p>The results of the C code as in @GManNickG I get:</p>\n\n<pre><code>  a: Elapsed time (without sorting) = 19.8761 sec.\n  b: Elapsed time (with sorting ) = 7.37778 sec.\n</code></pre>\n\n<p>Based on this, it looks MATLAB is almost <em>175 times</em> slower than the C implementation without sorting and <em>350 times</em> slower with sorting. In other words, the effect (of branch prediction) is <em>1.46x</em> for MATLAB implementation and <em>2.7x</em> for the C implementation.</p>\n"},{"tags":[],"owner":{"account_id":996825,"reputation":17630,"user_id":1012551,"accept_rate":92,"display_name":"Saqlain"},"down_vote_count":5,"up_vote_count":1425,"is_accepted":false,"score":1420,"last_activity_date":1551265112,"creation_date":1360913056,"answer_id":14889969,"question_id":11227809,"body_markdown":"As data is distributed between 0 and 255 when the array is sorted, around the first half of the iterations will not enter the `if`-statement (the `if` statement is shared below).\r\n\r\n    if (data[c] &gt;= 128)\r\n        sum += data[c];\r\n\r\nThe question is: What makes the above statement not execute in certain cases as in case of sorted data? Here comes the &quot;branch predictor&quot;. A branch predictor is a digital circuit that tries to guess which way a branch (e.g. an `if-then-else` structure) will go before this is known for sure. The purpose of the branch predictor is to improve the flow in the instruction pipeline. Branch predictors play a critical role in achieving high effective performance!\r\n\r\n**Let&#39;s do some bench marking to understand it better**\r\n\r\nThe performance of an `if`-statement depends on whether its condition has a predictable pattern. If the condition is always true or always false, the branch prediction logic in the processor will pick up the pattern. On the other hand, if the pattern is unpredictable, the `if`-statement will be much more expensive.\r\n\r\nLet’s measure the performance of this loop with different conditions:\r\n\r\n    for (int i = 0; i &lt; max; i++)\r\n        if (condition)\r\n            sum++;\r\n\r\nHere are the timings of the loop with different true-false patterns:\r\n\r\n    Condition                Pattern             Time (ms)\r\n    -------------------------------------------------------\r\n    (i &amp; 0&#215;80000000) == 0    T repeated          322\r\n\r\n    (i &amp; 0xffffffff) == 0    F repeated          276\r\n\r\n    (i &amp; 1) == 0             TF alternating      760\r\n\r\n    (i &amp; 3) == 0             TFFFTFFF…           513\r\n\r\n    (i &amp; 2) == 0             TTFFTTFF…           1675\r\n\r\n    (i &amp; 4) == 0             TTTTFFFFTTTTFFFF…   1275\r\n\r\n    (i &amp; 8) == 0             8T 8F 8T 8F …       752\r\n\r\n    (i &amp; 16) == 0            16T 16F 16T 16F …   490\r\n\r\nA “**bad**” true-false pattern can make an `if`-statement up to six times slower than a “**good**” pattern! Of course, which pattern is good and which is bad depends on the exact instructions generated by the compiler and on the specific processor.\r\n\r\nSo there is no doubt about the impact of branch prediction on performance!\r\n\r\n","title":"Why is processing a sorted array faster than processing an unsorted array?","body":"<p>As data is distributed between 0 and 255 when the array is sorted, around the first half of the iterations will not enter the <code>if</code>-statement (the <code>if</code> statement is shared below).</p>\n\n<pre><code>if (data[c] &gt;= 128)\n    sum += data[c];\n</code></pre>\n\n<p>The question is: What makes the above statement not execute in certain cases as in case of sorted data? Here comes the \"branch predictor\". A branch predictor is a digital circuit that tries to guess which way a branch (e.g. an <code>if-then-else</code> structure) will go before this is known for sure. The purpose of the branch predictor is to improve the flow in the instruction pipeline. Branch predictors play a critical role in achieving high effective performance!</p>\n\n<p><strong>Let's do some bench marking to understand it better</strong></p>\n\n<p>The performance of an <code>if</code>-statement depends on whether its condition has a predictable pattern. If the condition is always true or always false, the branch prediction logic in the processor will pick up the pattern. On the other hand, if the pattern is unpredictable, the <code>if</code>-statement will be much more expensive.</p>\n\n<p>Let’s measure the performance of this loop with different conditions:</p>\n\n<pre><code>for (int i = 0; i &lt; max; i++)\n    if (condition)\n        sum++;\n</code></pre>\n\n<p>Here are the timings of the loop with different true-false patterns:</p>\n\n<pre><code>Condition                Pattern             Time (ms)\n-------------------------------------------------------\n(i &amp; 0×80000000) == 0    T repeated          322\n\n(i &amp; 0xffffffff) == 0    F repeated          276\n\n(i &amp; 1) == 0             TF alternating      760\n\n(i &amp; 3) == 0             TFFFTFFF…           513\n\n(i &amp; 2) == 0             TTFFTTFF…           1675\n\n(i &amp; 4) == 0             TTTTFFFFTTTTFFFF…   1275\n\n(i &amp; 8) == 0             8T 8F 8T 8F …       752\n\n(i &amp; 16) == 0            16T 16F 16T 16F …   490\n</code></pre>\n\n<p>A “<strong>bad</strong>” true-false pattern can make an <code>if</code>-statement up to six times slower than a “<strong>good</strong>” pattern! Of course, which pattern is good and which is bad depends on the exact instructions generated by the compiler and on the specific processor.</p>\n\n<p>So there is no doubt about the impact of branch prediction on performance!</p>\n"},{"tags":[],"owner":{"account_id":1021317,"reputation":30648,"user_id":1031591,"accept_rate":71,"display_name":"atlaste"},"down_vote_count":3,"up_vote_count":1598,"is_accepted":false,"score":1595,"last_activity_date":1547614041,"creation_date":1366784788,"answer_id":16184827,"question_id":11227809,"body_markdown":"I just read up on this question and its answers, and I feel an answer is missing.\r\n\r\nA common way to eliminate branch prediction that I&#39;ve found to work particularly good in managed languages is a table lookup instead of using a branch (although I haven&#39;t tested it in this case).\r\n\r\nThis approach works in general if:\r\n\r\n1. it&#39;s a small table and is likely to be cached in the processor, and\r\n2. you are running things in a quite tight loop and/or the processor can preload the data.\r\n\r\n**Background and why**\r\n\r\nFrom a processor perspective, your memory is slow. To compensate for the difference in speed, a couple of caches are built into your processor (L1/L2 cache). So imagine that you&#39;re doing your nice calculations and figure out that you need a piece of memory. The processor will get its &#39;load&#39; operation and loads the piece of memory into cache -- and then uses the cache to do the rest of the calculations. Because memory is relatively slow, this &#39;load&#39; will slow down your program.\r\n\r\nLike branch prediction, this was optimized in the Pentium processors: the processor predicts that it needs to load a piece of data and attempts to load that into the cache before the operation actually hits the cache. As we&#39;ve already seen, branch prediction sometimes goes horribly wrong -- in the worst case scenario you need to go back and actually wait for a memory load, which will take forever (**in other words: failing branch prediction is bad, a memory load after a branch prediction fail is just horrible!**).\r\n\r\nFortunately for us, if the memory access pattern is predictable, the processor will load it in its fast cache and all is well.\r\n\r\nThe first thing we need to know is what is *small*? While smaller is generally better, a rule of thumb is to stick to lookup tables that are &lt;= 4096 bytes in size. As an upper limit: if your lookup table is larger than 64K it&#39;s probably worth reconsidering.\r\n\r\n**Constructing a table**\r\n\r\nSo we&#39;ve figured out that we can create a small table. Next thing to do is get a lookup function in place. Lookup functions are usually small functions that use a couple of basic integer operations (and, or, xor, shift, add, remove and perhaps multiply). You want to have your input translated by the lookup function to some kind of &#39;unique key&#39; in your table, which then simply gives you the answer of all the work you wanted it to do.\r\n\r\nIn this case: &gt;= 128 means we can keep the value, &lt; 128 means we get rid of it. The easiest way to do that is by using an &#39;AND&#39;: if we keep it, we AND it with 7FFFFFFF; if we want to get rid of it, we AND it with 0. Notice also that 128 is a power of 2 -- so we can go ahead and make a table of 32768/128 integers and fill it with one zero and a lot of 7FFFFFFFF&#39;s.\r\n\r\n**Managed languages**\r\n\r\nYou might wonder why this works well in managed languages. After all, managed languages check the boundaries of the arrays with a branch to ensure you don&#39;t mess up...\r\n\r\nWell, not exactly... :-)\r\n\r\nThere has been quite some work on eliminating this branch for managed languages. For example:\r\n\r\n&lt;!-- language-all: c# --&gt;\r\n\r\n    for (int i = 0; i &lt; array.Length; ++i)\r\n    {\r\n       // Use array[i]\r\n    }\r\n\r\nIn this case, it&#39;s obvious to the compiler that the boundary condition will never be hit. At least the Microsoft JIT compiler (but I expect Java does similar things) will notice this and remove the check altogether. WOW, that means no branch. Similarly, it will deal with other obvious cases.\r\n\r\nIf you run into trouble with lookups in managed languages -- the key is to add a `&amp; 0x[something]FFF` to your lookup function to make the boundary check predictable -- and watch it going faster.\r\n\r\n**The result of this case**\r\n\r\n    // Generate data\r\n    int arraySize = 32768;\r\n    int[] data = new int[arraySize];\r\n\r\n    Random random = new Random(0);\r\n    for (int c = 0; c &lt; arraySize; ++c)\r\n    {\r\n        data[c] = random.Next(256);\r\n    }\r\n\r\n    /*To keep the spirit of the code intact, I&#39;ll make a separate lookup table\r\n    (I assume we cannot modify &#39;data&#39; or the number of loops)*/\r\n\r\n    int[] lookup = new int[256];\r\n\r\n    for (int c = 0; c &lt; 256; ++c)\r\n    {\r\n        lookup[c] = (c &gt;= 128) ? c : 0;\r\n    }\r\n\r\n    // Test\r\n    DateTime startTime = System.DateTime.Now;\r\n    long sum = 0;\r\n\r\n    for (int i = 0; i &lt; 100000; ++i)\r\n    {\r\n        // Primary loop\r\n        for (int j = 0; j &lt; arraySize; ++j)\r\n        {\r\n            /* Here you basically want to use simple operations - so no\r\n            random branches, but things like &amp;, |, *, -, +, etc. are fine. */\r\n            sum += lookup[data[j]];\r\n        }\r\n    }\r\n\r\n    DateTime endTime = System.DateTime.Now;\r\n    Console.WriteLine(endTime - startTime);\r\n    Console.WriteLine(&quot;sum = &quot; + sum);\r\n    Console.ReadLine();","title":"Why is processing a sorted array faster than processing an unsorted array?","body":"<p>I just read up on this question and its answers, and I feel an answer is missing.</p>\n\n<p>A common way to eliminate branch prediction that I've found to work particularly good in managed languages is a table lookup instead of using a branch (although I haven't tested it in this case).</p>\n\n<p>This approach works in general if:</p>\n\n<ol>\n<li>it's a small table and is likely to be cached in the processor, and</li>\n<li>you are running things in a quite tight loop and/or the processor can preload the data.</li>\n</ol>\n\n<p><strong>Background and why</strong></p>\n\n<p>From a processor perspective, your memory is slow. To compensate for the difference in speed, a couple of caches are built into your processor (L1/L2 cache). So imagine that you're doing your nice calculations and figure out that you need a piece of memory. The processor will get its 'load' operation and loads the piece of memory into cache -- and then uses the cache to do the rest of the calculations. Because memory is relatively slow, this 'load' will slow down your program.</p>\n\n<p>Like branch prediction, this was optimized in the Pentium processors: the processor predicts that it needs to load a piece of data and attempts to load that into the cache before the operation actually hits the cache. As we've already seen, branch prediction sometimes goes horribly wrong -- in the worst case scenario you need to go back and actually wait for a memory load, which will take forever (<strong>in other words: failing branch prediction is bad, a memory load after a branch prediction fail is just horrible!</strong>).</p>\n\n<p>Fortunately for us, if the memory access pattern is predictable, the processor will load it in its fast cache and all is well.</p>\n\n<p>The first thing we need to know is what is <em>small</em>? While smaller is generally better, a rule of thumb is to stick to lookup tables that are &lt;= 4096 bytes in size. As an upper limit: if your lookup table is larger than 64K it's probably worth reconsidering.</p>\n\n<p><strong>Constructing a table</strong></p>\n\n<p>So we've figured out that we can create a small table. Next thing to do is get a lookup function in place. Lookup functions are usually small functions that use a couple of basic integer operations (and, or, xor, shift, add, remove and perhaps multiply). You want to have your input translated by the lookup function to some kind of 'unique key' in your table, which then simply gives you the answer of all the work you wanted it to do.</p>\n\n<p>In this case: >= 128 means we can keep the value, &lt; 128 means we get rid of it. The easiest way to do that is by using an 'AND': if we keep it, we AND it with 7FFFFFFF; if we want to get rid of it, we AND it with 0. Notice also that 128 is a power of 2 -- so we can go ahead and make a table of 32768/128 integers and fill it with one zero and a lot of 7FFFFFFFF's.</p>\n\n<p><strong>Managed languages</strong></p>\n\n<p>You might wonder why this works well in managed languages. After all, managed languages check the boundaries of the arrays with a branch to ensure you don't mess up...</p>\n\n<p>Well, not exactly... :-)</p>\n\n<p>There has been quite some work on eliminating this branch for managed languages. For example:</p>\n\n\n\n<pre class=\"lang-cs prettyprint-override\"><code>for (int i = 0; i &lt; array.Length; ++i)\n{\n   // Use array[i]\n}\n</code></pre>\n\n<p>In this case, it's obvious to the compiler that the boundary condition will never be hit. At least the Microsoft JIT compiler (but I expect Java does similar things) will notice this and remove the check altogether. WOW, that means no branch. Similarly, it will deal with other obvious cases.</p>\n\n<p>If you run into trouble with lookups in managed languages -- the key is to add a <code>&amp; 0x[something]FFF</code> to your lookup function to make the boundary check predictable -- and watch it going faster.</p>\n\n<p><strong>The result of this case</strong></p>\n\n<pre class=\"lang-cs prettyprint-override\"><code>// Generate data\nint arraySize = 32768;\nint[] data = new int[arraySize];\n\nRandom random = new Random(0);\nfor (int c = 0; c &lt; arraySize; ++c)\n{\n    data[c] = random.Next(256);\n}\n\n/*To keep the spirit of the code intact, I'll make a separate lookup table\n(I assume we cannot modify 'data' or the number of loops)*/\n\nint[] lookup = new int[256];\n\nfor (int c = 0; c &lt; 256; ++c)\n{\n    lookup[c] = (c &gt;= 128) ? c : 0;\n}\n\n// Test\nDateTime startTime = System.DateTime.Now;\nlong sum = 0;\n\nfor (int i = 0; i &lt; 100000; ++i)\n{\n    // Primary loop\n    for (int j = 0; j &lt; arraySize; ++j)\n    {\n        /* Here you basically want to use simple operations - so no\n        random branches, but things like &amp;, |, *, -, +, etc. are fine. */\n        sum += lookup[data[j]];\n    }\n}\n\nDateTime endTime = System.DateTime.Now;\nConsole.WriteLine(endTime - startTime);\nConsole.WriteLine(\"sum = \" + sum);\nConsole.ReadLine();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":55732,"reputation":75229,"user_id":166949,"accept_rate":90,"display_name":"steveha"},"down_vote_count":4,"up_vote_count":1357,"is_accepted":false,"score":1353,"last_activity_date":1611741816,"creation_date":1374481770,"answer_id":17782979,"question_id":11227809,"body_markdown":"One way to avoid branch prediction errors is to build a lookup table, and index it using the data.  Stefan de Bruijn discussed that in his answer.\r\n\r\nBut in this case, we know values are in the range [0, 255] and we only care about values &gt;= 128.  That means we can easily extract a single bit that will tell us whether we want a value or not: by shifting the data to the right 7 bits, we are left with a 0 bit or a 1 bit, and we only want to add the value when we have a 1 bit.  Let&#39;s call this bit the &quot;decision bit&quot;.\r\n\r\nBy using the 0/1 value of the decision bit as an index into an array, we can make code that will be equally fast whether the data is sorted or not sorted.  Our code will always add a value, but when the decision bit is 0, we will add the value somewhere we don&#39;t care about.  Here&#39;s the code:\r\n\r\n    // Test\r\n    clock_t start = clock();\r\n    long long a[] = {0, 0};\r\n    long long sum;\r\n\r\n    for (unsigned i = 0; i &lt; 100000; ++i)\r\n    {\r\n        // Primary loop\r\n        for (unsigned c = 0; c &lt; arraySize; ++c)\r\n        {\r\n            int j = (data[c] &gt;&gt; 7);\r\n            a[j] += data[c];\r\n        }\r\n    }\r\n\r\n    double elapsedTime = static_cast&lt;double&gt;(clock() - start) / CLOCKS_PER_SEC;\r\n    sum = a[1];\r\n\r\nThis code wastes half of the adds but never has a branch prediction failure.  It&#39;s tremendously faster on random data than the version with an actual if statement.\r\n\r\nBut in my testing, an explicit lookup table was slightly faster than this, probably because indexing into a lookup table was slightly faster than bit shifting.  This shows how my code sets up and uses the lookup table (unimaginatively called `lut` for &quot;LookUp Table&quot; in the code).  Here&#39;s the C++ code:\r\n\r\n    // Declare and then fill in the lookup table\r\n    int lut[256];\r\n    for (unsigned c = 0; c &lt; 256; ++c)\r\n        lut[c] = (c &gt;= 128) ? c : 0;\r\n\r\n    // Use the lookup table after it is built\r\n    for (unsigned i = 0; i &lt; 100000; ++i)\r\n    {\r\n        // Primary loop\r\n        for (unsigned c = 0; c &lt; arraySize; ++c)\r\n        {\r\n            sum += lut[data[c]];\r\n        }\r\n    }\r\n\r\nIn this case, the lookup table was only 256 bytes, so it fits nicely in a cache and all was fast.  This technique wouldn&#39;t work well if the data was 24-bit values and we only wanted half of them... the lookup table would be far too big to be practical.  On the other hand, we can combine the two techniques shown above: first shift the bits over, then index a lookup table.  For a 24-bit value that we only want the top half value, we could potentially shift the data right by 12 bits, and be left with a 12-bit value for a table index.  A 12-bit table index implies a table of 4096 values, which might be practical.\r\n\r\nThe technique of indexing into an array, instead of using an `if` statement, can be used for deciding which pointer to use.  I saw a library that implemented binary trees, and instead of having two named pointers (`pLeft` and `pRight` or whatever) had a length-2 array of pointers and used the &quot;decision bit&quot; technique to decide which one to follow.  For example, instead of:\r\n\r\n    if (x &lt; node-&gt;value)\r\n        node = node-&gt;pLeft;\r\n    else\r\n        node = node-&gt;pRight;\r\n\r\nthis library would do something like:\r\n\r\n    i = (x &lt; node-&gt;value);\r\n    node = node-&gt;link[i];\r\n\r\nHere&#39;s a link to this code: [Red Black Trees](https://web.archive.org/web/20190207151651/https://www.eternallyconfuzzled.com/tuts/datastructures/jsw_tut_rbtree.aspx), *Eternally Confuzzled*\r\n\r\n","title":"Why is processing a sorted array faster than processing an unsorted array?","body":"<p>One way to avoid branch prediction errors is to build a lookup table, and index it using the data.  Stefan de Bruijn discussed that in his answer.</p>\n<p>But in this case, we know values are in the range [0, 255] and we only care about values &gt;= 128.  That means we can easily extract a single bit that will tell us whether we want a value or not: by shifting the data to the right 7 bits, we are left with a 0 bit or a 1 bit, and we only want to add the value when we have a 1 bit.  Let's call this bit the &quot;decision bit&quot;.</p>\n<p>By using the 0/1 value of the decision bit as an index into an array, we can make code that will be equally fast whether the data is sorted or not sorted.  Our code will always add a value, but when the decision bit is 0, we will add the value somewhere we don't care about.  Here's the code:</p>\n<pre><code>// Test\nclock_t start = clock();\nlong long a[] = {0, 0};\nlong long sum;\n\nfor (unsigned i = 0; i &lt; 100000; ++i)\n{\n    // Primary loop\n    for (unsigned c = 0; c &lt; arraySize; ++c)\n    {\n        int j = (data[c] &gt;&gt; 7);\n        a[j] += data[c];\n    }\n}\n\ndouble elapsedTime = static_cast&lt;double&gt;(clock() - start) / CLOCKS_PER_SEC;\nsum = a[1];\n</code></pre>\n<p>This code wastes half of the adds but never has a branch prediction failure.  It's tremendously faster on random data than the version with an actual if statement.</p>\n<p>But in my testing, an explicit lookup table was slightly faster than this, probably because indexing into a lookup table was slightly faster than bit shifting.  This shows how my code sets up and uses the lookup table (unimaginatively called <code>lut</code> for &quot;LookUp Table&quot; in the code).  Here's the C++ code:</p>\n<pre><code>// Declare and then fill in the lookup table\nint lut[256];\nfor (unsigned c = 0; c &lt; 256; ++c)\n    lut[c] = (c &gt;= 128) ? c : 0;\n\n// Use the lookup table after it is built\nfor (unsigned i = 0; i &lt; 100000; ++i)\n{\n    // Primary loop\n    for (unsigned c = 0; c &lt; arraySize; ++c)\n    {\n        sum += lut[data[c]];\n    }\n}\n</code></pre>\n<p>In this case, the lookup table was only 256 bytes, so it fits nicely in a cache and all was fast.  This technique wouldn't work well if the data was 24-bit values and we only wanted half of them... the lookup table would be far too big to be practical.  On the other hand, we can combine the two techniques shown above: first shift the bits over, then index a lookup table.  For a 24-bit value that we only want the top half value, we could potentially shift the data right by 12 bits, and be left with a 12-bit value for a table index.  A 12-bit table index implies a table of 4096 values, which might be practical.</p>\n<p>The technique of indexing into an array, instead of using an <code>if</code> statement, can be used for deciding which pointer to use.  I saw a library that implemented binary trees, and instead of having two named pointers (<code>pLeft</code> and <code>pRight</code> or whatever) had a length-2 array of pointers and used the &quot;decision bit&quot; technique to decide which one to follow.  For example, instead of:</p>\n<pre><code>if (x &lt; node-&gt;value)\n    node = node-&gt;pLeft;\nelse\n    node = node-&gt;pRight;\n</code></pre>\n<p>this library would do something like:</p>\n<pre><code>i = (x &lt; node-&gt;value);\nnode = node-&gt;link[i];\n</code></pre>\n<p>Here's a link to this code: <a href=\"https://web.archive.org/web/20190207151651/https://www.eternallyconfuzzled.com/tuts/datastructures/jsw_tut_rbtree.aspx\" rel=\"noreferrer\">Red Black Trees</a>, <em>Eternally Confuzzled</em></p>\n"},{"tags":[],"owner":{"display_name":"user1196549"},"down_vote_count":3,"up_vote_count":1219,"is_accepted":false,"score":1216,"last_activity_date":1557574272,"creation_date":1374652659,"answer_id":17828251,"question_id":11227809,"body_markdown":"In the sorted case, you can do better than relying on successful branch prediction or any branchless comparison trick: completely remove the branch.\r\n\r\nIndeed, the array is partitioned in a contiguous zone with `data &lt; 128` and another with `data &gt;= 128`. So you should find the partition point with a [dichotomic search][1] (using `Lg(arraySize) = 15` comparisons), then do a straight accumulation from that point.\r\n\r\nSomething like (unchecked)\r\n\r\n    int i= 0, j, k= arraySize;\r\n    while (i &lt; k)\r\n    {\r\n      j= (i + k) &gt;&gt; 1;\r\n      if (data[j] &gt;= 128)\r\n        k= j;\r\n      else\r\n        i= j;\r\n    }\r\n    sum= 0;\r\n    for (; i &lt; arraySize; i++)\r\n      sum+= data[i];\r\n\r\nor, slightly more obfuscated\r\n\r\n    int i, k, j= (i + k) &gt;&gt; 1;\r\n    for (i= 0, k= arraySize; i &lt; k; (data[j] &gt;= 128 ? k : i)= j)\r\n      j= (i + k) &gt;&gt; 1;\r\n    for (sum= 0; i &lt; arraySize; i++)\r\n      sum+= data[i];\r\n\r\nA yet faster approach, that gives an **approximate** solution for both sorted or unsorted is: `sum= 3137536;` (assuming a truly uniform distribution, 16384 samples with expected value 191.5) **:-)**\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Dichotomic_search","title":"Why is processing a sorted array faster than processing an unsorted array?","body":"<p>In the sorted case, you can do better than relying on successful branch prediction or any branchless comparison trick: completely remove the branch.</p>\n\n<p>Indeed, the array is partitioned in a contiguous zone with <code>data &lt; 128</code> and another with <code>data &gt;= 128</code>. So you should find the partition point with a <a href=\"https://en.wikipedia.org/wiki/Dichotomic_search\" rel=\"noreferrer\">dichotomic search</a> (using <code>Lg(arraySize) = 15</code> comparisons), then do a straight accumulation from that point.</p>\n\n<p>Something like (unchecked)</p>\n\n<pre><code>int i= 0, j, k= arraySize;\nwhile (i &lt; k)\n{\n  j= (i + k) &gt;&gt; 1;\n  if (data[j] &gt;= 128)\n    k= j;\n  else\n    i= j;\n}\nsum= 0;\nfor (; i &lt; arraySize; i++)\n  sum+= data[i];\n</code></pre>\n\n<p>or, slightly more obfuscated</p>\n\n<pre><code>int i, k, j= (i + k) &gt;&gt; 1;\nfor (i= 0, k= arraySize; i &lt; k; (data[j] &gt;= 128 ? k : i)= j)\n  j= (i + k) &gt;&gt; 1;\nfor (sum= 0; i &lt; arraySize; i++)\n  sum+= data[i];\n</code></pre>\n\n<p>A yet faster approach, that gives an <strong>approximate</strong> solution for both sorted or unsorted is: <code>sum= 3137536;</code> (assuming a truly uniform distribution, 16384 samples with expected value 191.5) <strong>:-)</strong></p>\n"},{"tags":[],"owner":{"account_id":1786345,"reputation":11032,"user_id":1627741,"accept_rate":53,"display_name":"Harsh Sharma"},"down_vote_count":2,"up_vote_count":1023,"is_accepted":false,"score":1021,"last_activity_date":1650591088,"creation_date":1435937752,"answer_id":31210295,"question_id":11227809,"body_markdown":"The above behavior is happening because of Branch prediction.\r\n\r\nTo understand branch prediction one must first understand an **Instruction Pipeline.**\r\n\r\nThe the steps of running an instruction can be overlapped with the sequence of steps of running the previous and next instruction, so that different steps can be executed concurrently in parallel. This technique is known as instruction pipelining and is used to increase throughput in modern processors. To understand this better please see this [example on Wikipedia][1].\r\n\r\nGenerally, modern processors have quite long (and wide) pipelines, so many instruction can be in flight.  See [Modern Microprocessors\r\nA 90-Minute Guide!][2] which starts by introducing basic in-order pipelining and goes from there.\r\n\r\nBut for ease **let&#39;s consider a simple in-order pipeline with these 4 steps only.**  \r\n (Like a [classic 5-stage RISC][3], but omitting a separate MEM stage.)\r\n\r\n 1. IF -- Fetch the instruction from memory \r\n 1. ID -- Decode the instruction\r\n 1. EX -- Execute the instruction \r\n 1. WB -- Write back to CPU register\r\n\r\n **4-stage pipeline in general for 2 instructions.**  \r\n![4-stage pipeline in general][4]\r\n\r\nMoving back to the above question let&#39;s consider the following instructions:\r\n\r\n\t\t\t\t\t\t\tA) if (data[c] &gt;= 128)\r\n\t\t\t\t\t                /\\\r\n\t\t\t\t                   /  \\\r\n\t\t\t\t                  /    \\\r\n                            true /      \\ false\r\n\t\t\t                    /        \\\r\n                               /          \\\r\n                              /            \\\r\n                             /              \\\r\n                  B) sum += data[c];          C) for loop or print().\r\n\r\n\r\nWithout branch prediction, the following would occur:\r\n\r\nTo execute instruction B or instruction C the processor will have to wait (*stall*) till the instruction A leaves the EX stage in the pipeline, as the decision to go to instruction B or instruction C depends on the result of instruction A.  (i.e. where to fetch from next.) So the pipeline will look like this:\r\n\r\n***Without prediction: when `if` condition is true:***\r\n![enter image description here][5]\r\n\r\n***Without prediction: When `if` condition is false:***\r\n![enter image description here][6]\r\n\r\nAs a result of waiting for the result of instruction A, the total CPU cycles spent in the above case (without branch prediction; for both true and false) is 7.\r\n\r\n**So what is branch prediction?**\r\n\r\nBranch predictor will try to guess which way a branch (an if-then-else structure) will go before this is known for sure. It will not wait for the instruction A to reach the EX stage of the pipeline, but it will guess the decision and go to that instruction (B or C in case of our example).\r\n\r\n***In case of a correct guess, the pipeline looks something like this:***\r\n![enter image description here][7]\r\n\r\nIf it is later detected that the guess was wrong then the partially executed instructions are discarded and the pipeline starts over with the correct branch, incurring a delay. \r\nThe time that is wasted in case of a branch misprediction is equal to the number of stages in the pipeline from the fetch stage to the execute stage. Modern microprocessors tend to have quite long pipelines so that the misprediction delay is between 10 and 20 clock cycles. The longer the pipeline the greater the need for a good [branch predictor][8].\r\n\r\nIn the OP&#39;s code, the first time when the conditional, the branch predictor does not have any information to base up prediction, so the first time it will randomly choose the next instruction. (Or fall back to *static* prediction, typically forward not-taken, backward taken).  Later in the for loop, it can base the prediction on the history. \r\nFor an array sorted in ascending order, there are three possibilities:\r\n&lt;ol&gt;\r\n&lt;li&gt; All the elements are less than 128\r\n&lt;li&gt; All the elements are greater than 128\r\n&lt;li&gt; Some starting new elements are less than 128 and later it become greater than 128\r\n&lt;/ol&gt;\r\n\r\nLet us assume that the predictor will always assume the true branch on the first run.\r\n\r\nSo in the first case, it will always take the true branch since historically all its predictions are correct.\r\nIn the 2nd case, initially it will predict wrong, but after a few iterations, it will predict correctly.\r\nIn the 3rd case, it will initially predict correctly till the elements are less than 128. After which it will fail for some time and the correct itself when it sees branch prediction failure in history. \r\n \r\nIn all these cases the failure will be too less in number and as a result, only a few times it will need to discard the partially executed instructions and start over with the correct branch, resulting in fewer CPU cycles. \r\n\r\nBut in case of a random unsorted array, the prediction will need to discard the partially executed instructions and start over with the correct branch most of the time and result in more CPU cycles compared to the sorted array.\r\n\r\n----\r\n\r\nFurther reading:\r\n\r\n* [Modern Microprocessors\r\nA 90-Minute Guide!][2]\r\n* [Dan Luu&#39;s article on branch prediction][9] (which covers older branch predictors, not modern IT-TAGE or Perceptron)\r\n* https://en.wikipedia.org/wiki/Branch_predictor\r\n* [Branch Prediction and the Performance of Interpreters -\r\nDon’t Trust Folklore][10] - 2015 paper showing how well Intel&#39;s Haswell does at predicting the indirect branch of a Python interpreter&#39;s main loop (historically problematic due to a non-simple pattern), vs. earlier CPUs which didn&#39;t use IT-TAGE.  (They don&#39;t help with this fully random case, though.  Still 50% mispredict rate for the if inside the loop on a Skylake CPU when the source is compiled to branch asm.)\r\n* [Static branch prediction on newer Intel processors][11] - what CPUs actually do when running a branch instruction that doesn&#39;t have a dynamic prediction available.  Historically, forward not-taken (like an `if` or `break`), backward taken (like a loop) has been used because it&#39;s better than nothing.  Laying out code so the fast path / common case minimizes taken branches is good for I-cache density as well as static prediction, so compilers already do that.  (That&#39;s the [real effect][12] of `likely` / `unlikely` hints in C source, not actually hinting the hardware branch prediction in most CPU, except maybe via static prediction.)\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Pipeline_(computing)#Concept_and_motivation\r\n  [2]: https://www.lighterra.com/papers/modernmicroprocessors/\r\n  [3]: https://en.wikipedia.org/wiki/Classic_RISC_pipeline\r\n  [4]: http://i.stack.imgur.com/PqBBR.png\r\n  [5]: http://i.stack.imgur.com/0H4gP.png\r\n  [6]: http://i.stack.imgur.com/APpca.png\r\n  [7]: http://i.stack.imgur.com/ZYUbs.png\r\n  [8]: https://en.wikipedia.org/wiki/Branch_predictor\r\n  [9]: https://danluu.com/branch-prediction/\r\n  [10]: https://hal.inria.fr/hal-01100647/document\r\n  [11]: https://xania.org/201602/bpu-part-one\r\n  [12]: https://stackoverflow.com/questions/1851299/is-it-possible-to-tell-the-branch-predictor-how-likely-it-is-to-follow-the-branc","title":"Why is processing a sorted array faster than processing an unsorted array?","body":"<p>The above behavior is happening because of Branch prediction.</p>\n<p>To understand branch prediction one must first understand an <strong>Instruction Pipeline.</strong></p>\n<p>The the steps of running an instruction can be overlapped with the sequence of steps of running the previous and next instruction, so that different steps can be executed concurrently in parallel. This technique is known as instruction pipelining and is used to increase throughput in modern processors. To understand this better please see this <a href=\"https://en.wikipedia.org/wiki/Pipeline_(computing)#Concept_and_motivation\" rel=\"noreferrer\">example on Wikipedia</a>.</p>\n<p>Generally, modern processors have quite long (and wide) pipelines, so many instruction can be in flight.  See <a href=\"https://www.lighterra.com/papers/modernmicroprocessors/\" rel=\"noreferrer\">Modern Microprocessors\nA 90-Minute Guide!</a> which starts by introducing basic in-order pipelining and goes from there.</p>\n<p>But for ease <strong>let's consider a simple in-order pipeline with these 4 steps only.</strong><br />\n(Like a <a href=\"https://en.wikipedia.org/wiki/Classic_RISC_pipeline\" rel=\"noreferrer\">classic 5-stage RISC</a>, but omitting a separate MEM stage.)</p>\n<ol>\n<li>IF -- Fetch the instruction from memory</li>\n<li>ID -- Decode the instruction</li>\n<li>EX -- Execute the instruction</li>\n<li>WB -- Write back to CPU register</li>\n</ol>\n<p><strong>4-stage pipeline in general for 2 instructions.</strong><br />\n<img src=\"https://i.stack.imgur.com/PqBBR.png\" alt=\"4-stage pipeline in general\" /></p>\n<p>Moving back to the above question let's consider the following instructions:</p>\n<pre><code>                        A) if (data[c] &gt;= 128)\n                                /\\\n                               /  \\\n                              /    \\\n                        true /      \\ false\n                            /        \\\n                           /          \\\n                          /            \\\n                         /              \\\n              B) sum += data[c];          C) for loop or print().\n</code></pre>\n<p>Without branch prediction, the following would occur:</p>\n<p>To execute instruction B or instruction C the processor will have to wait (<em>stall</em>) till the instruction A leaves the EX stage in the pipeline, as the decision to go to instruction B or instruction C depends on the result of instruction A.  (i.e. where to fetch from next.) So the pipeline will look like this:</p>\n<p><em><strong>Without prediction: when <code>if</code> condition is true:</strong></em>\n<img src=\"https://i.stack.imgur.com/0H4gP.png\" alt=\"enter image description here\" /></p>\n<p><em><strong>Without prediction: When <code>if</code> condition is false:</strong></em>\n<img src=\"https://i.stack.imgur.com/APpca.png\" alt=\"enter image description here\" /></p>\n<p>As a result of waiting for the result of instruction A, the total CPU cycles spent in the above case (without branch prediction; for both true and false) is 7.</p>\n<p><strong>So what is branch prediction?</strong></p>\n<p>Branch predictor will try to guess which way a branch (an if-then-else structure) will go before this is known for sure. It will not wait for the instruction A to reach the EX stage of the pipeline, but it will guess the decision and go to that instruction (B or C in case of our example).</p>\n<p><em><strong>In case of a correct guess, the pipeline looks something like this:</strong></em>\n<img src=\"https://i.stack.imgur.com/ZYUbs.png\" alt=\"enter image description here\" /></p>\n<p>If it is later detected that the guess was wrong then the partially executed instructions are discarded and the pipeline starts over with the correct branch, incurring a delay.\nThe time that is wasted in case of a branch misprediction is equal to the number of stages in the pipeline from the fetch stage to the execute stage. Modern microprocessors tend to have quite long pipelines so that the misprediction delay is between 10 and 20 clock cycles. The longer the pipeline the greater the need for a good <a href=\"https://en.wikipedia.org/wiki/Branch_predictor\" rel=\"noreferrer\">branch predictor</a>.</p>\n<p>In the OP's code, the first time when the conditional, the branch predictor does not have any information to base up prediction, so the first time it will randomly choose the next instruction. (Or fall back to <em>static</em> prediction, typically forward not-taken, backward taken).  Later in the for loop, it can base the prediction on the history.\nFor an array sorted in ascending order, there are three possibilities:</p>\n<ol>\n<li> All the elements are less than 128\n<li> All the elements are greater than 128\n<li> Some starting new elements are less than 128 and later it become greater than 128\n</ol>\n<p>Let us assume that the predictor will always assume the true branch on the first run.</p>\n<p>So in the first case, it will always take the true branch since historically all its predictions are correct.\nIn the 2nd case, initially it will predict wrong, but after a few iterations, it will predict correctly.\nIn the 3rd case, it will initially predict correctly till the elements are less than 128. After which it will fail for some time and the correct itself when it sees branch prediction failure in history.</p>\n<p>In all these cases the failure will be too less in number and as a result, only a few times it will need to discard the partially executed instructions and start over with the correct branch, resulting in fewer CPU cycles.</p>\n<p>But in case of a random unsorted array, the prediction will need to discard the partially executed instructions and start over with the correct branch most of the time and result in more CPU cycles compared to the sorted array.</p>\n<hr />\n<p>Further reading:</p>\n<ul>\n<li><a href=\"https://www.lighterra.com/papers/modernmicroprocessors/\" rel=\"noreferrer\">Modern Microprocessors\nA 90-Minute Guide!</a></li>\n<li><a href=\"https://danluu.com/branch-prediction/\" rel=\"noreferrer\">Dan Luu's article on branch prediction</a> (which covers older branch predictors, not modern IT-TAGE or Perceptron)</li>\n<li><a href=\"https://en.wikipedia.org/wiki/Branch_predictor\" rel=\"noreferrer\">https://en.wikipedia.org/wiki/Branch_predictor</a></li>\n<li><a href=\"https://hal.inria.fr/hal-01100647/document\" rel=\"noreferrer\">Branch Prediction and the Performance of Interpreters -\nDon’t Trust Folklore</a> - 2015 paper showing how well Intel's Haswell does at predicting the indirect branch of a Python interpreter's main loop (historically problematic due to a non-simple pattern), vs. earlier CPUs which didn't use IT-TAGE.  (They don't help with this fully random case, though.  Still 50% mispredict rate for the if inside the loop on a Skylake CPU when the source is compiled to branch asm.)</li>\n<li><a href=\"https://xania.org/201602/bpu-part-one\" rel=\"noreferrer\">Static branch prediction on newer Intel processors</a> - what CPUs actually do when running a branch instruction that doesn't have a dynamic prediction available.  Historically, forward not-taken (like an <code>if</code> or <code>break</code>), backward taken (like a loop) has been used because it's better than nothing.  Laying out code so the fast path / common case minimizes taken branches is good for I-cache density as well as static prediction, so compilers already do that.  (That's the <a href=\"https://stackoverflow.com/questions/1851299/is-it-possible-to-tell-the-branch-predictor-how-likely-it-is-to-follow-the-branc\">real effect</a> of <code>likely</code> / <code>unlikely</code> hints in C source, not actually hinting the hardware branch prediction in most CPU, except maybe via static prediction.)</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":1380009,"reputation":16715,"user_id":1313233,"accept_rate":82,"display_name":"rkachach"},"down_vote_count":2,"up_vote_count":857,"is_accepted":false,"score":855,"last_activity_date":1477650491,"creation_date":1443020267,"answer_id":32742980,"question_id":11227809,"body_markdown":"In the same line (I think this was not highlighted by any answer) it&#39;s good to mention that sometimes (specially in software where the performance matters—like in the Linux kernel) you can find some if statements like the following:\r\n\r\n    if (likely( everything_is_ok ))\r\n    {\r\n        /* Do something */\r\n    }\r\n\r\nor similarly:\r\n\r\n    if (unlikely(very_improbable_condition))\r\n    {\r\n        /* Do something */    \r\n    }\r\n\r\nBoth `likely()` and `unlikely()` are in fact macros that are defined by using something like the GCC&#39;s `__builtin_expect` to help the compiler insert prediction code to favour the condition taking into account the information provided by the user. GCC supports other builtins that could change the behavior of the running program or emit low level instructions like clearing the cache, etc. See [this documentation][1] that goes through the available GCC&#39;s builtins.\r\n\r\nNormally this kind of optimizations are mainly found in hard-real time applications or embedded systems where execution time matters and it&#39;s critical. For example, if you are checking for some error condition that only happens 1/10000000 times, then why not inform the compiler about this? This way, by default, the branch prediction would assume that the condition is false.\r\n\r\n\r\n  [1]: https://gcc.gnu.org/onlinedocs/gcc/Other-Builtins.html","title":"Why is processing a sorted array faster than processing an unsorted array?","body":"<p>In the same line (I think this was not highlighted by any answer) it's good to mention that sometimes (specially in software where the performance matters—like in the Linux kernel) you can find some if statements like the following:</p>\n\n<pre><code>if (likely( everything_is_ok ))\n{\n    /* Do something */\n}\n</code></pre>\n\n<p>or similarly:</p>\n\n<pre><code>if (unlikely(very_improbable_condition))\n{\n    /* Do something */    \n}\n</code></pre>\n\n<p>Both <code>likely()</code> and <code>unlikely()</code> are in fact macros that are defined by using something like the GCC's <code>__builtin_expect</code> to help the compiler insert prediction code to favour the condition taking into account the information provided by the user. GCC supports other builtins that could change the behavior of the running program or emit low level instructions like clearing the cache, etc. See <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Other-Builtins.html\" rel=\"noreferrer\">this documentation</a> that goes through the available GCC's builtins.</p>\n\n<p>Normally this kind of optimizations are mainly found in hard-real time applications or embedded systems where execution time matters and it's critical. For example, if you are checking for some error condition that only happens 1/10000000 times, then why not inform the compiler about this? This way, by default, the branch prediction would assume that the condition is false.</p>\n"},{"tags":[],"owner":{"account_id":6300346,"reputation":9435,"user_id":4895229,"display_name":"Maciej"},"down_vote_count":4,"up_vote_count":836,"is_accepted":false,"score":832,"last_activity_date":1559234066,"creation_date":1444437042,"answer_id":33048998,"question_id":11227809,"body_markdown":"Frequently used Boolean operations in C++ produce many branches in the compiled program. If these branches are inside loops and are hard to predict they can slow down execution significantly. Boolean variables are stored as 8-bit integers with the value `0` for `false` and `1` for `true`.\r\n\r\nBoolean variables are overdetermined in the sense that all operators that have Boolean variables as input check if the inputs have any other value than `0` or `1`, but operators that have Booleans as output can produce no other value than `0` or `1`. This makes operations with Boolean variables as input less efficient than necessary.\r\nConsider example:\r\n\r\n    bool a, b, c, d;\r\n    c = a &amp;&amp; b;\r\n    d = a || b;\r\nThis is typically implemented by the compiler in the following way:\r\n\r\n    bool a, b, c, d;\r\n    if (a != 0) {\r\n        if (b != 0) {\r\n            c = 1;\r\n        }\r\n        else {\r\n            goto CFALSE;\r\n        }\r\n    }\r\n    else {\r\n        CFALSE:\r\n        c = 0;\r\n    }\r\n    if (a == 0) {\r\n        if (b == 0) {\r\n            d = 0;\r\n        }\r\n        else {\r\n            goto DTRUE;\r\n        }\r\n    }\r\n    else {\r\n        DTRUE:\r\n        d = 1;\r\n    }\r\nThis code is far from optimal. The branches may take a long time in case of mispredictions. The Boolean operations can be made much more efficient if it is known with certainty that the operands have no other values than `0` and `1`. The reason why the compiler does not make such an assumption is that the variables might have other values if they are uninitialized or come from unknown sources. The above code can be optimized if `a` and `b` has been initialized to valid values or if they come from operators that produce Boolean output. The optimized code looks like this:\r\n\r\n    char a = 0, b = 1, c, d;\r\n    c = a &amp; b;\r\n    d = a | b;\r\n`char` is used instead of `bool` in order to make it possible to use the bitwise operators (`&amp;` and `|`) instead of the Boolean operators (`&amp;&amp;` and `||`). The bitwise operators are single instructions that take only one clock cycle. The OR operator (`|`) works even if `a` and `b` have other values than `0` or `1`. The AND operator (`&amp;`) and the EXCLUSIVE OR operator (`^`) may give inconsistent results if the operands have other values than `0` and `1`.\r\n\r\n`~` can not be used for NOT. Instead, you can make a Boolean NOT on a variable which is known to be `0` or `1` by XOR&#39;ing it with `1`:\r\n\r\n    bool a, b;\r\n    b = !a;\r\ncan be optimized to:\r\n\r\n    char a = 0, b;\r\n    b = a ^ 1;\r\n`a &amp;&amp; b` cannot be replaced with `a &amp; b` if `b` is an expression that should not be evaluated if `a` is `false` ( `&amp;&amp;` will not evaluate `b`, `&amp;` will). Likewise, `a || b` can not be replaced with `a | b` if `b` is an expression that should not be evaluated if `a` is `true`.\r\n\r\nUsing bitwise operators is more advantageous if the operands are variables than if the operands are comparisons:\r\n\r\n    bool a; double x, y, z;\r\n    a = x &gt; y &amp;&amp; z &lt; 5.0;\r\nis optimal in most cases (unless you expect the `&amp;&amp;` expression to generate many branch mispredictions).","title":"Why is processing a sorted array faster than processing an unsorted array?","body":"<p>Frequently used Boolean operations in C++ produce many branches in the compiled program. If these branches are inside loops and are hard to predict they can slow down execution significantly. Boolean variables are stored as 8-bit integers with the value <code>0</code> for <code>false</code> and <code>1</code> for <code>true</code>.</p>\n\n<p>Boolean variables are overdetermined in the sense that all operators that have Boolean variables as input check if the inputs have any other value than <code>0</code> or <code>1</code>, but operators that have Booleans as output can produce no other value than <code>0</code> or <code>1</code>. This makes operations with Boolean variables as input less efficient than necessary.\nConsider example:</p>\n\n<pre><code>bool a, b, c, d;\nc = a &amp;&amp; b;\nd = a || b;\n</code></pre>\n\n<p>This is typically implemented by the compiler in the following way:</p>\n\n<pre><code>bool a, b, c, d;\nif (a != 0) {\n    if (b != 0) {\n        c = 1;\n    }\n    else {\n        goto CFALSE;\n    }\n}\nelse {\n    CFALSE:\n    c = 0;\n}\nif (a == 0) {\n    if (b == 0) {\n        d = 0;\n    }\n    else {\n        goto DTRUE;\n    }\n}\nelse {\n    DTRUE:\n    d = 1;\n}\n</code></pre>\n\n<p>This code is far from optimal. The branches may take a long time in case of mispredictions. The Boolean operations can be made much more efficient if it is known with certainty that the operands have no other values than <code>0</code> and <code>1</code>. The reason why the compiler does not make such an assumption is that the variables might have other values if they are uninitialized or come from unknown sources. The above code can be optimized if <code>a</code> and <code>b</code> has been initialized to valid values or if they come from operators that produce Boolean output. The optimized code looks like this:</p>\n\n<pre><code>char a = 0, b = 1, c, d;\nc = a &amp; b;\nd = a | b;\n</code></pre>\n\n<p><code>char</code> is used instead of <code>bool</code> in order to make it possible to use the bitwise operators (<code>&amp;</code> and <code>|</code>) instead of the Boolean operators (<code>&amp;&amp;</code> and <code>||</code>). The bitwise operators are single instructions that take only one clock cycle. The OR operator (<code>|</code>) works even if <code>a</code> and <code>b</code> have other values than <code>0</code> or <code>1</code>. The AND operator (<code>&amp;</code>) and the EXCLUSIVE OR operator (<code>^</code>) may give inconsistent results if the operands have other values than <code>0</code> and <code>1</code>.</p>\n\n<p><code>~</code> can not be used for NOT. Instead, you can make a Boolean NOT on a variable which is known to be <code>0</code> or <code>1</code> by XOR'ing it with <code>1</code>:</p>\n\n<pre><code>bool a, b;\nb = !a;\n</code></pre>\n\n<p>can be optimized to:</p>\n\n<pre><code>char a = 0, b;\nb = a ^ 1;\n</code></pre>\n\n<p><code>a &amp;&amp; b</code> cannot be replaced with <code>a &amp; b</code> if <code>b</code> is an expression that should not be evaluated if <code>a</code> is <code>false</code> ( <code>&amp;&amp;</code> will not evaluate <code>b</code>, <code>&amp;</code> will). Likewise, <code>a || b</code> can not be replaced with <code>a | b</code> if <code>b</code> is an expression that should not be evaluated if <code>a</code> is <code>true</code>.</p>\n\n<p>Using bitwise operators is more advantageous if the operands are variables than if the operands are comparisons:</p>\n\n<pre><code>bool a; double x, y, z;\na = x &gt; y &amp;&amp; z &lt; 5.0;\n</code></pre>\n\n<p>is optimal in most cases (unless you expect the <code>&amp;&amp;</code> expression to generate many branch mispredictions).</p>\n"},{"tags":[],"owner":{"account_id":4991025,"reputation":15641,"user_id":4013258,"display_name":"Surt"},"down_vote_count":2,"up_vote_count":896,"is_accepted":false,"score":894,"last_activity_date":1485862773,"creation_date":1444597518,"answer_id":33070112,"question_id":11227809,"body_markdown":"An official answer would be from\r\n\r\n 1. [Intel - Avoiding the Cost of Branch Misprediction][1]\r\n 2. [Intel - Branch and Loop Reorganization to Prevent Mispredicts][2]\r\n 3. [Scientific papers - branch prediction computer architecture][3]\r\n 4. Books: J.L. Hennessy, D.A. Patterson: Computer architecture: a quantitative approach\r\n 5. Articles in scientific publications: T.Y. Yeh, Y.N. Patt made a lot of these on branch predictions.\r\n\r\nYou can also see from this lovely [diagram][4] why the branch predictor gets confused.\r\n\r\n[![2-bit state diagram][5]][5]\r\n\r\nEach element in the original code is a random value\r\n\r\n    data[c] = std::rand() % 256;\r\n\r\nso the predictor will change sides as the `std::rand()` blow.\r\n\r\nOn the other hand, once it&#39;s sorted, the predictor will first move into a state of strongly not taken and when the values change to the high value the predictor will in three runs through change all the way from strongly not taken to strongly taken.\r\n\r\n  [1]: https://software.intel.com/en-us/articles/avoiding-the-cost-of-branch-misprediction\r\n  [2]: https://software.intel.com/en-us/articles/branch-and-loop-reorganization-to-prevent-mispredicts\r\n  [3]: https://scholar.google.com/scholar?q=branch%20prediction%20computer%20architecture&amp;hl=da&amp;as_sdt=0&amp;as_vis=1&amp;oi=scholart\r\n  [4]: https://en.wikipedia.org/wiki/Branch_predictor#/media/File:Branch_prediction_2bit_saturating_counter-dia.svg\r\n  [5]: https://i.stack.imgur.com/pBMV2.png\r\n** **\r\n\r\n\r\n\r\n\r\n\r\n","title":"Why is processing a sorted array faster than processing an unsorted array?","body":"<p>An official answer would be from</p>\n\n<ol>\n<li><a href=\"https://software.intel.com/en-us/articles/avoiding-the-cost-of-branch-misprediction\" rel=\"noreferrer\">Intel - Avoiding the Cost of Branch Misprediction</a></li>\n<li><a href=\"https://software.intel.com/en-us/articles/branch-and-loop-reorganization-to-prevent-mispredicts\" rel=\"noreferrer\">Intel - Branch and Loop Reorganization to Prevent Mispredicts</a></li>\n<li><a href=\"https://scholar.google.com/scholar?q=branch%20prediction%20computer%20architecture&amp;hl=da&amp;as_sdt=0&amp;as_vis=1&amp;oi=scholart\" rel=\"noreferrer\">Scientific papers - branch prediction computer architecture</a></li>\n<li>Books: J.L. Hennessy, D.A. Patterson: Computer architecture: a quantitative approach</li>\n<li>Articles in scientific publications: T.Y. Yeh, Y.N. Patt made a lot of these on branch predictions.</li>\n</ol>\n\n<p>You can also see from this lovely <a href=\"https://en.wikipedia.org/wiki/Branch_predictor#/media/File:Branch_prediction_2bit_saturating_counter-dia.svg\" rel=\"noreferrer\">diagram</a> why the branch predictor gets confused.</p>\n\n<p><a href=\"https://i.stack.imgur.com/pBMV2.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/pBMV2.png\" alt=\"2-bit state diagram\"></a></p>\n\n<p>Each element in the original code is a random value</p>\n\n<pre><code>data[c] = std::rand() % 256;\n</code></pre>\n\n<p>so the predictor will change sides as the <code>std::rand()</code> blow.</p>\n\n<p>On the other hand, once it's sorted, the predictor will first move into a state of strongly not taken and when the values change to the high value the predictor will in three runs through change all the way from strongly not taken to strongly taken.</p>\n\n<hr>\n"},{"tags":[],"owner":{"account_id":296548,"reputation":6442,"user_id":601567,"accept_rate":75,"display_name":"ForeverLearning"},"down_vote_count":4,"up_vote_count":448,"is_accepted":false,"score":444,"last_activity_date":1610293840,"creation_date":1484185828,"answer_id":41603849,"question_id":11227809,"body_markdown":"This question has already been answered excellently many times over. Still I&#39;d like to draw the group&#39;s attention to yet another interesting analysis.\r\n\r\nRecently this example (modified very slightly) was also used as a way to demonstrate how a piece of code can be profiled within the program itself on Windows. Along the way, the author also shows how to use the results to determine where the code is spending most of its time in both the sorted &amp; unsorted case. Finally the piece also shows how to use a little known feature of the HAL (Hardware Abstraction Layer) to determine just how much branch misprediction is happening in the unsorted case.\r\n\r\nThe link is here:\r\n[**A Demonstration of Self-Profiling**](//www.geoffchappell.com/studies/windows/km/ntoskrnl/api/ex/profile/demo.htm)","title":"Why is processing a sorted array faster than processing an unsorted array?","body":"<p>This question has already been answered excellently many times over. Still I'd like to draw the group's attention to yet another interesting analysis.</p>\n<p>Recently this example (modified very slightly) was also used as a way to demonstrate how a piece of code can be profiled within the program itself on Windows. Along the way, the author also shows how to use the results to determine where the code is spending most of its time in both the sorted &amp; unsorted case. Finally the piece also shows how to use a little known feature of the HAL (Hardware Abstraction Layer) to determine just how much branch misprediction is happening in the unsorted case.</p>\n<p>The link is here:\n<a href=\"//www.geoffchappell.com/studies/windows/km/ntoskrnl/api/ex/profile/demo.htm\" rel=\"noreferrer\"><strong>A Demonstration of Self-Profiling</strong></a></p>\n"},{"tags":[],"owner":{"account_id":7086416,"reputation":101239,"user_id":5423108,"display_name":"Alireza"},"down_vote_count":2,"up_vote_count":496,"is_accepted":false,"score":494,"last_activity_date":1683739673,"creation_date":1497786043,"answer_id":44614591,"question_id":11227809,"body_markdown":"That&#39;s for sure!...\r\n\r\n**Branch prediction** makes the logic run slower, because of the switching which happens in your code! It&#39;s like you are going a straight street or a street with a lot of turnings, for sure the straight one is going to be done quicker!...\r\n\r\nIf the array is sorted, your condition is false at the first step: `data[c] &gt;= 128`, then becomes a true value for the whole way to the end of the street. That&#39;s how you get to the end of the logic faster. On the other hand, using an unsorted array, you need a lot of turning and processing which make your code run slower for sure...\r\n\r\nLook at the image I created for you below. Which street is going to be finished faster?\r\n\r\n[![Branch Prediction][1]][1]\r\n\r\nSo programmatically, **branch prediction** causes the process to be slower...\r\n\r\nAlso at the end, it&#39;s good to know we have two kinds of branch predictions that each is going to affect your code differently:\r\n\r\n **1. Static**\r\n\r\n **2. Dynamic**\r\n\r\n[![Branch Prediction][2]][2]\r\n\r\nSee also [this document from Intel](https://web.archive.org/web/20100315172026/http://software.intel.com/en-us/articles/branch-and-loop-reorganization-to-prevent-mispredicts/), which says:\r\n&gt; Static branch prediction is used by the microprocessor the first time\r\n&gt; a conditional branch is encountered, and dynamic branch prediction is\r\n&gt; used for succeeding executions of the conditional branch code.\r\n&gt;\r\n&gt; In order to effectively write your code to take advantage of these\r\n&gt; rules, when writing **if-else** or **switch** statements, check the most\r\n&gt; common cases first and work progressively down to the least common.\r\n&gt; Loops do not necessarily require any special ordering of code for\r\n&gt; static branch prediction, as only the condition of the loop iterator\r\n&gt; is normally used.\r\n\r\n  [1]: https://i.stack.imgur.com/cSmCa.jpg\r\n  [2]: https://i.stack.imgur.com/ZfhDu.jpg\r\n\r\n","title":"Why is processing a sorted array faster than processing an unsorted array?","body":"<p>That's for sure!...</p>\n<p><strong>Branch prediction</strong> makes the logic run slower, because of the switching which happens in your code! It's like you are going a straight street or a street with a lot of turnings, for sure the straight one is going to be done quicker!...</p>\n<p>If the array is sorted, your condition is false at the first step: <code>data[c] &gt;= 128</code>, then becomes a true value for the whole way to the end of the street. That's how you get to the end of the logic faster. On the other hand, using an unsorted array, you need a lot of turning and processing which make your code run slower for sure...</p>\n<p>Look at the image I created for you below. Which street is going to be finished faster?</p>\n<p><a href=\"https://i.stack.imgur.com/cSmCa.jpg\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/cSmCa.jpg\" alt=\"Branch Prediction\" /></a></p>\n<p>So programmatically, <strong>branch prediction</strong> causes the process to be slower...</p>\n<p>Also at the end, it's good to know we have two kinds of branch predictions that each is going to affect your code differently:</p>\n<p><strong>1. Static</strong></p>\n<p><strong>2. Dynamic</strong></p>\n<p><a href=\"https://i.stack.imgur.com/ZfhDu.jpg\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/ZfhDu.jpg\" alt=\"Branch Prediction\" /></a></p>\n<p>See also <a href=\"https://web.archive.org/web/20100315172026/http://software.intel.com/en-us/articles/branch-and-loop-reorganization-to-prevent-mispredicts/\" rel=\"noreferrer\">this document from Intel</a>, which says:</p>\n<blockquote>\n<p>Static branch prediction is used by the microprocessor the first time\na conditional branch is encountered, and dynamic branch prediction is\nused for succeeding executions of the conditional branch code.</p>\n<p>In order to effectively write your code to take advantage of these\nrules, when writing <strong>if-else</strong> or <strong>switch</strong> statements, check the most\ncommon cases first and work progressively down to the least common.\nLoops do not necessarily require any special ordering of code for\nstatic branch prediction, as only the condition of the loop iterator\nis normally used.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":8730423,"reputation":14290,"user_id":6530695,"accept_rate":98,"display_name":"Tony Tannous"},"down_vote_count":2,"up_vote_count":313,"is_accepted":false,"score":311,"last_activity_date":1521203445,"creation_date":1501841232,"answer_id":45503985,"question_id":11227809,"body_markdown":"**Branch-prediction gain!**\n\nIt is important to understand that branch misprediction doesn&#39;t slow down programs. The cost of a missed prediction is just as if branch prediction didn&#39;t exist and you waited for the evaluation of the expression to decide what code to run (further explanation in the next paragraph).\n\n    if (expression)\n    {\n        // Run 1\n    } else {\n        // Run 2\n    }\n\nWhenever there&#39;s an `if-else` \\ `switch` statement, the expression has to be evaluated to determine which block should be executed. In the assembly code generated by the compiler, conditional [branch][1] instructions are inserted.\n\nA branch instruction can cause a computer to begin executing a different instruction sequence and thus deviate from its default behavior of executing instructions in order (i.e. if the expression is false, the program skips the code of the `if` block) depending on some condition, which is the expression evaluation in our case.\n\nThat being said, the compiler tries to predict the outcome prior to it being actually evaluated. It will fetch instructions from the `if` block, and if the expression turns out to be true, then wonderful! We gained the time it took to evaluate it and made progress in the code; if not then we are running the wrong code, the pipeline is flushed, and the correct block is run.\n\n### Visualization:\n\nLet&#39;s say you need to pick route 1 or route 2. Waiting for your partner to check the map, you have stopped at ## and waited, or you could just pick route1 and if you were lucky (route 1 is the correct route), then great you didn&#39;t have to wait for your partner to check the map (you saved the time it would have taken him to check the map), otherwise you will just turn back.\n\nWhile flushing pipelines is super fast, nowadays taking this gamble is worth it. Predicting sorted data or a data that changes slowly is always easier and better than predicting fast changes.\n\n\n     O      Route 1  /-------------------------------\n    /|\\             /\n     |  ---------##/\n    / \\            \\\n                    \\\n            Route 2  \\--------------------------------\n\n  [1]: https://en.wikipedia.org/wiki/Branch_(computer_science)\n\n","title":"Why is processing a sorted array faster than processing an unsorted array?","body":"<p><strong>Branch-prediction gain!</strong></p>\n<p>It is important to understand that branch misprediction doesn't slow down programs. The cost of a missed prediction is just as if branch prediction didn't exist and you waited for the evaluation of the expression to decide what code to run (further explanation in the next paragraph).</p>\n<pre><code>if (expression)\n{\n    // Run 1\n} else {\n    // Run 2\n}\n</code></pre>\n<p>Whenever there's an <code>if-else</code> \\ <code>switch</code> statement, the expression has to be evaluated to determine which block should be executed. In the assembly code generated by the compiler, conditional <a href=\"https://en.wikipedia.org/wiki/Branch_(computer_science)\" rel=\"noreferrer\">branch</a> instructions are inserted.</p>\n<p>A branch instruction can cause a computer to begin executing a different instruction sequence and thus deviate from its default behavior of executing instructions in order (i.e. if the expression is false, the program skips the code of the <code>if</code> block) depending on some condition, which is the expression evaluation in our case.</p>\n<p>That being said, the compiler tries to predict the outcome prior to it being actually evaluated. It will fetch instructions from the <code>if</code> block, and if the expression turns out to be true, then wonderful! We gained the time it took to evaluate it and made progress in the code; if not then we are running the wrong code, the pipeline is flushed, and the correct block is run.</p>\n<h3>Visualization:</h3>\n<p>Let's say you need to pick route 1 or route 2. Waiting for your partner to check the map, you have stopped at ## and waited, or you could just pick route1 and if you were lucky (route 1 is the correct route), then great you didn't have to wait for your partner to check the map (you saved the time it would have taken him to check the map), otherwise you will just turn back.</p>\n<p>While flushing pipelines is super fast, nowadays taking this gamble is worth it. Predicting sorted data or a data that changes slowly is always easier and better than predicting fast changes.</p>\n<pre><code> O      Route 1  /-------------------------------\n/|\\             /\n |  ---------##/\n/ \\            \\\n                \\\n        Route 2  \\--------------------------------\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4116853,"reputation":10757,"user_id":3378204,"accept_rate":91,"display_name":"Eugene"},"down_vote_count":1,"up_vote_count":407,"is_accepted":false,"score":406,"last_activity_date":1581300329,"creation_date":1509984916,"answer_id":47141245,"question_id":11227809,"body_markdown":"As what has already been mentioned by others, what behind the mystery is [Branch Predictor][1]. \r\n\r\nI&#39;m not trying to add something but explaining the concept in another way. \r\nThere is a concise introduction on the wiki which contains text and diagram.\r\nI do like the explanation below which uses a diagram to elaborate the Branch Predictor intuitively.\r\n\r\n&gt; In computer architecture, a branch predictor is a\r\n&gt; digital circuit that tries to guess which way a branch (e.g. an\r\n&gt; if-then-else structure) will go before this is known for sure. The\r\n&gt; purpose of the branch predictor is to improve the flow in the\r\n&gt; instruction pipeline. Branch predictors play a critical role in\r\n&gt; achieving high effective performance in many modern pipelined\r\n&gt; microprocessor architectures such as x86.\r\n&gt; \r\n&gt; Two-way branching is usually implemented with a conditional jump\r\n&gt; instruction. A conditional jump can either be &quot;not taken&quot; and continue\r\n&gt; execution with the first branch of code which follows immediately\r\n&gt; after the conditional jump, or it can be &quot;taken&quot; and jump to a\r\n&gt; different place in program memory where the second branch of code is\r\n&gt; stored. It is not known for certain whether a conditional jump will be\r\n&gt; taken or not taken until the condition has been calculated and the\r\n&gt; conditional jump has passed the execution stage in the instruction\r\n&gt; pipeline (see fig. 1).\r\n\r\n\r\n\r\n [![figure 1][2]][2]\r\n\r\nBased on the described scenario, I have written an animation demo to show how instructions are executed in a pipeline in different situations.\r\n\r\n 1. Without the Branch Predictor. \r\n\r\n&gt;  Without branch prediction, the processor would have to wait until the\r\n&gt; conditional jump instruction has passed the execute stage before the\r\n&gt; next instruction can enter the fetch stage in the pipeline.\r\n\r\nThe example contains three instructions and the first one is a conditional jump instruction. The latter two instructions can go into the pipeline until the conditional jump instruction is executed. \r\n\r\n[![without branch predictor][3]][3]\r\n\r\nIt will take 9 clock cycles for 3 instructions to be completed.\r\n\r\n 2. Use Branch Predictor and don&#39;t take a conditional jump. Let&#39;s assume that the predict is **not** taking the conditional jump.\r\n\r\n[![enter image description here][4]][4]\r\n\r\nIt will take 7 clock cycles for 3 instructions to be completed.\r\n\r\n 3. Use Branch Predictor and take a conditional jump. Let&#39;s assume that the predict is **not** taking the conditional jump.\r\n\r\n[![enter image description here][5]][5]\r\n\r\nIt will take 9 clock cycles for 3 instructions to be completed.\r\n\r\n&gt; The time that is wasted in case of a branch misprediction is equal to\r\n&gt; the number of stages in the pipeline from the fetch stage to the\r\n&gt; execute stage. Modern microprocessors tend to have quite long\r\n&gt; pipelines so that the misprediction delay is between 10 and 20 clock\r\n&gt; cycles. As a result, making a pipeline longer increases the need for a\r\n&gt; more advanced branch predictor.\r\n\r\nAs you can see, it seems we don&#39;t have a reason not to use Branch Predictor.\r\n\r\nIt&#39;s quite a simple demo that clarifies the very basic part of Branch Predictor. If those gifs are annoying, please feel free to remove them from the answer and visitors can also get the live demo source code from [BranchPredictorDemo][6]\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Branch_predictor\r\n  [2]: https://i.stack.imgur.com/unxnb.png\r\n  [3]: https://i.stack.imgur.com/GMFQ6.gif\r\n  [4]: https://i.stack.imgur.com/Ms5p1.gif\r\n  [5]: https://i.stack.imgur.com/HIpG3.gif\r\n  [6]: https://github.com/Eugene-Mark/BranchPredictorDemo","title":"Why is processing a sorted array faster than processing an unsorted array?","body":"<p>As what has already been mentioned by others, what behind the mystery is <a href=\"https://en.wikipedia.org/wiki/Branch_predictor\" rel=\"noreferrer\">Branch Predictor</a>. </p>\n\n<p>I'm not trying to add something but explaining the concept in another way. \nThere is a concise introduction on the wiki which contains text and diagram.\nI do like the explanation below which uses a diagram to elaborate the Branch Predictor intuitively.</p>\n\n<blockquote>\n  <p>In computer architecture, a branch predictor is a\n  digital circuit that tries to guess which way a branch (e.g. an\n  if-then-else structure) will go before this is known for sure. The\n  purpose of the branch predictor is to improve the flow in the\n  instruction pipeline. Branch predictors play a critical role in\n  achieving high effective performance in many modern pipelined\n  microprocessor architectures such as x86.</p>\n  \n  <p>Two-way branching is usually implemented with a conditional jump\n  instruction. A conditional jump can either be \"not taken\" and continue\n  execution with the first branch of code which follows immediately\n  after the conditional jump, or it can be \"taken\" and jump to a\n  different place in program memory where the second branch of code is\n  stored. It is not known for certain whether a conditional jump will be\n  taken or not taken until the condition has been calculated and the\n  conditional jump has passed the execution stage in the instruction\n  pipeline (see fig. 1).</p>\n</blockquote>\n\n<p><a href=\"https://i.stack.imgur.com/unxnb.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/unxnb.png\" alt=\"figure 1\"></a></p>\n\n<p>Based on the described scenario, I have written an animation demo to show how instructions are executed in a pipeline in different situations.</p>\n\n<ol>\n<li>Without the Branch Predictor. </li>\n</ol>\n\n<blockquote>\n  <p>Without branch prediction, the processor would have to wait until the\n  conditional jump instruction has passed the execute stage before the\n  next instruction can enter the fetch stage in the pipeline.</p>\n</blockquote>\n\n<p>The example contains three instructions and the first one is a conditional jump instruction. The latter two instructions can go into the pipeline until the conditional jump instruction is executed. </p>\n\n<p><a href=\"https://i.stack.imgur.com/GMFQ6.gif\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/GMFQ6.gif\" alt=\"without branch predictor\"></a></p>\n\n<p>It will take 9 clock cycles for 3 instructions to be completed.</p>\n\n<ol start=\"2\">\n<li>Use Branch Predictor and don't take a conditional jump. Let's assume that the predict is <strong>not</strong> taking the conditional jump.</li>\n</ol>\n\n<p><a href=\"https://i.stack.imgur.com/Ms5p1.gif\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/Ms5p1.gif\" alt=\"enter image description here\"></a></p>\n\n<p>It will take 7 clock cycles for 3 instructions to be completed.</p>\n\n<ol start=\"3\">\n<li>Use Branch Predictor and take a conditional jump. Let's assume that the predict is <strong>not</strong> taking the conditional jump.</li>\n</ol>\n\n<p><a href=\"https://i.stack.imgur.com/HIpG3.gif\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/HIpG3.gif\" alt=\"enter image description here\"></a></p>\n\n<p>It will take 9 clock cycles for 3 instructions to be completed.</p>\n\n<blockquote>\n  <p>The time that is wasted in case of a branch misprediction is equal to\n  the number of stages in the pipeline from the fetch stage to the\n  execute stage. Modern microprocessors tend to have quite long\n  pipelines so that the misprediction delay is between 10 and 20 clock\n  cycles. As a result, making a pipeline longer increases the need for a\n  more advanced branch predictor.</p>\n</blockquote>\n\n<p>As you can see, it seems we don't have a reason not to use Branch Predictor.</p>\n\n<p>It's quite a simple demo that clarifies the very basic part of Branch Predictor. If those gifs are annoying, please feel free to remove them from the answer and visitors can also get the live demo source code from <a href=\"https://github.com/Eugene-Mark/BranchPredictorDemo\" rel=\"noreferrer\">BranchPredictorDemo</a></p>\n"},{"tags":[],"owner":{"account_id":255796,"reputation":48503,"user_id":536086,"accept_rate":90,"display_name":"Yochai Timmer"},"down_vote_count":4,"up_vote_count":229,"is_accepted":false,"score":225,"last_activity_date":1551779920,"creation_date":1511447309,"answer_id":47457772,"question_id":11227809,"body_markdown":"Besides the fact that the branch prediction may slow you down, a sorted array has another advantage:   \r\n\r\nYou can have a stop condition instead of just checking the value, this way you only loop over the relevant data, and ignore the rest.   \r\nThe branch prediction will miss only once.\r\n\r\n\r\n\r\n     // sort backwards (higher values first), may be in some other part of the code\r\n     std::sort(data, data + arraySize, std::greater&lt;int&gt;());\r\n\r\n     for (unsigned c = 0; c &lt; arraySize; ++c) {\r\n           if (data[c] &lt; 128) {\r\n                  break;\r\n           }\r\n           sum += data[c];               \r\n     }","title":"Why is processing a sorted array faster than processing an unsorted array?","body":"<p>Besides the fact that the branch prediction may slow you down, a sorted array has another advantage:   </p>\n\n<p>You can have a stop condition instead of just checking the value, this way you only loop over the relevant data, and ignore the rest.<br>\nThe branch prediction will miss only once.</p>\n\n<pre><code> // sort backwards (higher values first), may be in some other part of the code\n std::sort(data, data + arraySize, std::greater&lt;int&gt;());\n\n for (unsigned c = 0; c &lt; arraySize; ++c) {\n       if (data[c] &lt; 128) {\n              break;\n       }\n       sum += data[c];               \n }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11544512,"reputation":2696,"user_id":8459055,"display_name":"omkaartg"},"down_vote_count":18,"up_vote_count":227,"is_accepted":false,"score":209,"last_activity_date":1610294342,"creation_date":1512667709,"answer_id":47700573,"question_id":11227809,"body_markdown":"Sorted arrays are processed faster than an unsorted array, due to a phenomena called branch prediction.\r\n\r\nThe branch predictor is a digital circuit (in computer architecture) trying to predict which way a branch will go, improving the flow in the instruction pipeline. The circuit/computer predicts the next step and executes it.\r\n\r\nMaking a wrong prediction leads to going back to the previous step, and executing with another prediction. Assuming the prediction is correct, the code will continue to the next step. A wrong prediction results in repeating the same step, until a correct prediction occurs.\r\n\r\nThe answer to your question is very simple.\r\n\r\nIn an unsorted array, the computer makes multiple predictions, leading to an increased chance of errors.\r\nWhereas, in a sorted array, the computer makes fewer predictions, reducing the chance of errors.\r\nMaking more predictions requires more time.\r\n\r\nSorted Array: Straight Road\r\n```none\r\n____________________________________________________________________________________\r\n- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\r\nTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTT\r\n```\r\nUnsorted Array: Curved Road\r\n\r\n    ______   ________\r\n    |     |__|\r\n\r\n\r\nBranch prediction: Guessing/predicting which road is straight and following it without checking\r\n\r\n    ___________________________________________ Straight road\r\n     |_________________________________________|Longer road\r\n\r\nAlthough both the roads reach the same destination, the straight road is shorter, and the other is longer. If then you choose the other by mistake, there is no turning back, and so you will waste some extra time if you choose the longer road. This is similar to what happens in the computer, and I hope this helped you understand better.\r\n\r\n---\r\n\r\nAlso I want to cite [@Simon_Weaver](/u/16940) from the comments:\r\n&gt; It doesn’t make fewer predictions - it makes fewer incorrect predictions. It still has to predict for each time through the loop...","title":"Why is processing a sorted array faster than processing an unsorted array?","body":"<p>Sorted arrays are processed faster than an unsorted array, due to a phenomena called branch prediction.</p>\n<p>The branch predictor is a digital circuit (in computer architecture) trying to predict which way a branch will go, improving the flow in the instruction pipeline. The circuit/computer predicts the next step and executes it.</p>\n<p>Making a wrong prediction leads to going back to the previous step, and executing with another prediction. Assuming the prediction is correct, the code will continue to the next step. A wrong prediction results in repeating the same step, until a correct prediction occurs.</p>\n<p>The answer to your question is very simple.</p>\n<p>In an unsorted array, the computer makes multiple predictions, leading to an increased chance of errors.\nWhereas, in a sorted array, the computer makes fewer predictions, reducing the chance of errors.\nMaking more predictions requires more time.</p>\n<p>Sorted Array: Straight Road</p>\n<pre class=\"lang-none prettyprint-override\"><code>____________________________________________________________________________________\n- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\nTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTT\n</code></pre>\n<p>Unsorted Array: Curved Road</p>\n<pre><code>______   ________\n|     |__|\n</code></pre>\n<p>Branch prediction: Guessing/predicting which road is straight and following it without checking</p>\n<pre><code>___________________________________________ Straight road\n |_________________________________________|Longer road\n</code></pre>\n<p>Although both the roads reach the same destination, the straight road is shorter, and the other is longer. If then you choose the other by mistake, there is no turning back, and so you will waste some extra time if you choose the longer road. This is similar to what happens in the computer, and I hope this helped you understand better.</p>\n<hr />\n<p>Also I want to cite <a href=\"/u/16940\">@Simon_Weaver</a> from the comments:</p>\n<blockquote>\n<p>It doesn’t make fewer predictions - it makes fewer incorrect predictions. It still has to predict for each time through the loop...</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":3683805,"reputation":8445,"user_id":3950982,"display_name":"Luke Hutchison"},"down_vote_count":2,"up_vote_count":273,"is_accepted":false,"score":271,"last_activity_date":1603233212,"creation_date":1513948385,"answer_id":47942152,"question_id":11227809,"body_markdown":"On ARM, there is no branch needed, because every instruction has a 4-bit condition field, which tests (at zero cost) any of [16 different different conditions](https://community.arm.com/developer/ip-products/processors/b/processors-ip-blog/posts/condition-codes-1-condition-flags-and-codes) that may arise in the Processor Status Register, and if the condition on an instruction is false, the instruction is skipped. This eliminates the need for short branches, and there would be no branch prediction hit for this algorithm. &lt;b&gt;Therefore, the sorted version of this algorithm would run slower than the unsorted version on ARM, because of the extra overhead of sorting.&lt;/b&gt;\r\n\r\nThe inner loop for this algorithm would look something like the following in ARM assembly language:\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n    MOV R0, #0   // R0 = sum = 0\r\n    MOV R1, #0   // R1 = c = 0\r\n    ADR R2, data // R2 = addr of data array (put this instruction outside outer loop)\r\n    .inner_loop  // Inner loop branch label\r\n        LDRB R3, [R2, R1]   // R3 = data[c]\r\n        CMP R3, #128        // compare R3 to 128\r\n        ADDGE R0, R0, R3    // if R3 &gt;= 128, then sum += data[c] -- no branch needed!\r\n        ADD R1, R1, #1      // c++\r\n        CMP R1, #arraySize  // compare c to arraySize\r\n        BLT inner_loop      // Branch to inner_loop if c &lt; arraySize\r\n\r\n***But this is actually part of a bigger picture:***\r\n\r\n`CMP` opcodes always update the status bits in the Processor Status Register (PSR), because that is their purpose, but most other instructions do not touch the PSR unless you add an optional `S` suffix to the instruction, specifying that the PSR should be updated based on the result of the instruction. **Just like the 4-bit condition suffix, being able to execute instructions without affecting the PSR is a mechanism that reduces the need for branches on ARM, and also facilitates out of order dispatch at the hardware level**, because after performing some operation X that updates the status bits, subsequently (or in parallel) you can do a bunch of other work that explicitly should not affect (or be affected by) the status bits, then you can test the state of the status bits set earlier by X.\r\n\r\nThe condition testing field and the optional &quot;set status bit&quot; field can be combined, for example:\r\n\r\n* `ADD R1, R2, R3` performs `R1 = R2 + R3` without updating any status bits.\r\n* `ADDGE R1, R2, R3` performs the same operation only if a previous instruction that affected the status bits resulted in a Greater than or Equal condition.\r\n* `ADDS R1, R2, R3` performs the addition and then updates the `N`, `Z`, `C` and `V` flags in the Processor Status Register based on whether the result was Negative, Zero, Carried (for unsigned addition), or oVerflowed (for signed addition).\r\n* `ADDSGE R1, R2, R3` performs the addition only if the `GE` test is true, and then subsequently updates the status bits based on the result of the addition.\r\n\r\nMost processor architectures do not have this ability to specify whether or not the status bits should be updated for a given operation, which can necessitate writing additional code to save and later restore status bits, or may require additional branches, or may limit the processor&#39;s out of order execution efficiency: one of the side effects of most CPU instruction set architectures forcibly updating status bits after most instructions is that it is much harder to tease apart which instructions can be run in parallel without interfering with each other. Updating status bits has side effects, therefore has a linearizing effect on code. **ARM&#39;s ability to mix and match branch-free condition testing on any instruction with the option to either update or not update the status bits after any instruction is extremely powerful, for both assembly language programmers and compilers, and produces very efficient code.**\r\n\r\nWhen you don&#39;t have to branch, you can avoid the time cost of flushing the pipeline for what would otherwise be short branches, and you can avoid the design complexity of many forms of speculative evalution. The performance impact of the initial naive imlementations of the mitigations for many recently discovered processor vulnerabilities (Spectre etc.) shows you just how much the performance of modern processors depends upon complex speculative evaluation logic. With a short pipeline and the dramatically reduced need for branching, ARM just doesn&#39;t need to rely on speculative evaluation as much as CISC processors. (Of course high-end ARM implementations do include speculative evaluation, but it&#39;s a smaller part of the performance story.)\r\n\r\nIf you have ever wondered why ARM has been so phenomenally successful, the brilliant effectiveness and interplay of these two mechanisms (combined with another mechanism that lets you &quot;barrel shift&quot; left or right one of the two arguments of any arithmetic operator or offset memory access operator at zero additional cost) are a big part of the story, because they are some of the greatest sources of the ARM architecture&#39;s efficiency. The brilliance of the original designers of the ARM ISA back in 1983, Steve Furber and Roger (now Sophie) Wilson, cannot be overstated.","title":"Why is processing a sorted array faster than processing an unsorted array?","body":"<p>On ARM, there is no branch needed, because every instruction has a 4-bit condition field, which tests (at zero cost) any of <a href=\"https://community.arm.com/developer/ip-products/processors/b/processors-ip-blog/posts/condition-codes-1-condition-flags-and-codes\" rel=\"noreferrer\">16 different different conditions</a> that may arise in the Processor Status Register, and if the condition on an instruction is false, the instruction is skipped. This eliminates the need for short branches, and there would be no branch prediction hit for this algorithm. <b>Therefore, the sorted version of this algorithm would run slower than the unsorted version on ARM, because of the extra overhead of sorting.</b></p>\n<p>The inner loop for this algorithm would look something like the following in ARM assembly language:</p>\n<pre class=\"lang-js prettyprint-override\"><code>MOV R0, #0   // R0 = sum = 0\nMOV R1, #0   // R1 = c = 0\nADR R2, data // R2 = addr of data array (put this instruction outside outer loop)\n.inner_loop  // Inner loop branch label\n    LDRB R3, [R2, R1]   // R3 = data[c]\n    CMP R3, #128        // compare R3 to 128\n    ADDGE R0, R0, R3    // if R3 &gt;= 128, then sum += data[c] -- no branch needed!\n    ADD R1, R1, #1      // c++\n    CMP R1, #arraySize  // compare c to arraySize\n    BLT inner_loop      // Branch to inner_loop if c &lt; arraySize\n</code></pre>\n<p><em><strong>But this is actually part of a bigger picture:</strong></em></p>\n<p><code>CMP</code> opcodes always update the status bits in the Processor Status Register (PSR), because that is their purpose, but most other instructions do not touch the PSR unless you add an optional <code>S</code> suffix to the instruction, specifying that the PSR should be updated based on the result of the instruction. <strong>Just like the 4-bit condition suffix, being able to execute instructions without affecting the PSR is a mechanism that reduces the need for branches on ARM, and also facilitates out of order dispatch at the hardware level</strong>, because after performing some operation X that updates the status bits, subsequently (or in parallel) you can do a bunch of other work that explicitly should not affect (or be affected by) the status bits, then you can test the state of the status bits set earlier by X.</p>\n<p>The condition testing field and the optional &quot;set status bit&quot; field can be combined, for example:</p>\n<ul>\n<li><code>ADD R1, R2, R3</code> performs <code>R1 = R2 + R3</code> without updating any status bits.</li>\n<li><code>ADDGE R1, R2, R3</code> performs the same operation only if a previous instruction that affected the status bits resulted in a Greater than or Equal condition.</li>\n<li><code>ADDS R1, R2, R3</code> performs the addition and then updates the <code>N</code>, <code>Z</code>, <code>C</code> and <code>V</code> flags in the Processor Status Register based on whether the result was Negative, Zero, Carried (for unsigned addition), or oVerflowed (for signed addition).</li>\n<li><code>ADDSGE R1, R2, R3</code> performs the addition only if the <code>GE</code> test is true, and then subsequently updates the status bits based on the result of the addition.</li>\n</ul>\n<p>Most processor architectures do not have this ability to specify whether or not the status bits should be updated for a given operation, which can necessitate writing additional code to save and later restore status bits, or may require additional branches, or may limit the processor's out of order execution efficiency: one of the side effects of most CPU instruction set architectures forcibly updating status bits after most instructions is that it is much harder to tease apart which instructions can be run in parallel without interfering with each other. Updating status bits has side effects, therefore has a linearizing effect on code. <strong>ARM's ability to mix and match branch-free condition testing on any instruction with the option to either update or not update the status bits after any instruction is extremely powerful, for both assembly language programmers and compilers, and produces very efficient code.</strong></p>\n<p>When you don't have to branch, you can avoid the time cost of flushing the pipeline for what would otherwise be short branches, and you can avoid the design complexity of many forms of speculative evalution. The performance impact of the initial naive imlementations of the mitigations for many recently discovered processor vulnerabilities (Spectre etc.) shows you just how much the performance of modern processors depends upon complex speculative evaluation logic. With a short pipeline and the dramatically reduced need for branching, ARM just doesn't need to rely on speculative evaluation as much as CISC processors. (Of course high-end ARM implementations do include speculative evaluation, but it's a smaller part of the performance story.)</p>\n<p>If you have ever wondered why ARM has been so phenomenally successful, the brilliant effectiveness and interplay of these two mechanisms (combined with another mechanism that lets you &quot;barrel shift&quot; left or right one of the two arguments of any arithmetic operator or offset memory access operator at zero additional cost) are a big part of the story, because they are some of the greatest sources of the ARM architecture's efficiency. The brilliance of the original designers of the ARM ISA back in 1983, Steve Furber and Roger (now Sophie) Wilson, cannot be overstated.</p>\n"},{"tags":[],"owner":{"account_id":2657091,"reputation":3210,"user_id":2297550,"accept_rate":40,"display_name":"user2297550"},"down_vote_count":11,"up_vote_count":130,"is_accepted":false,"score":119,"last_activity_date":1562040497,"creation_date":1544336297,"answer_id":53689911,"question_id":11227809,"body_markdown":"The assumption by other answers that one needs to sort the data is not correct.\r\n\r\nThe following code does not sort the entire array, but only 200-element segments of it, and thereby runs the fastest.\r\n\r\nSorting only k-element sections completes the pre-processing in linear time, `O(n)`, rather than the `O(n.log(n))` time needed to sort the entire array.\r\n\r\n    #include &lt;algorithm&gt;\r\n    #include &lt;ctime&gt;\r\n    #include &lt;iostream&gt;\r\n    \r\n    int main() {\r\n        int data[32768]; const int l = sizeof data / sizeof data[0];\r\n    \r\n        for (unsigned c = 0; c &lt; l; ++c)\r\n            data[c] = std::rand() % 256;\r\n\r\n        // sort 200-element segments, not the whole array\r\n        for (unsigned c = 0; c + 200 &lt;= l; c += 200)\r\n            std::sort(&amp;data[c], &amp;data[c + 200]);\r\n    \r\n        clock_t start = clock();\r\n        long long sum = 0;\r\n    \r\n        for (unsigned i = 0; i &lt; 100000; ++i) {\r\n            for (unsigned c = 0; c &lt; sizeof data / sizeof(int); ++c) {\r\n                if (data[c] &gt;= 128)\r\n                    sum += data[c];\r\n            }\r\n        }\r\n    \r\n        std::cout &lt;&lt; static_cast&lt;double&gt;(clock() - start) / CLOCKS_PER_SEC &lt;&lt; std::endl;\r\n        std::cout &lt;&lt; &quot;sum = &quot; &lt;&lt; sum &lt;&lt; std::endl;\r\n    }\r\n\r\nThis also &quot;proves&quot; that it has nothing to do with any algorithmic issue such as sort order, and it is indeed branch prediction.","title":"Why is processing a sorted array faster than processing an unsorted array?","body":"<p>The assumption by other answers that one needs to sort the data is not correct.</p>\n\n<p>The following code does not sort the entire array, but only 200-element segments of it, and thereby runs the fastest.</p>\n\n<p>Sorting only k-element sections completes the pre-processing in linear time, <code>O(n)</code>, rather than the <code>O(n.log(n))</code> time needed to sort the entire array.</p>\n\n<pre><code>#include &lt;algorithm&gt;\n#include &lt;ctime&gt;\n#include &lt;iostream&gt;\n\nint main() {\n    int data[32768]; const int l = sizeof data / sizeof data[0];\n\n    for (unsigned c = 0; c &lt; l; ++c)\n        data[c] = std::rand() % 256;\n\n    // sort 200-element segments, not the whole array\n    for (unsigned c = 0; c + 200 &lt;= l; c += 200)\n        std::sort(&amp;data[c], &amp;data[c + 200]);\n\n    clock_t start = clock();\n    long long sum = 0;\n\n    for (unsigned i = 0; i &lt; 100000; ++i) {\n        for (unsigned c = 0; c &lt; sizeof data / sizeof(int); ++c) {\n            if (data[c] &gt;= 128)\n                sum += data[c];\n        }\n    }\n\n    std::cout &lt;&lt; static_cast&lt;double&gt;(clock() - start) / CLOCKS_PER_SEC &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"sum = \" &lt;&lt; sum &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>This also \"proves\" that it has nothing to do with any algorithmic issue such as sort order, and it is indeed branch prediction.</p>\n"},{"tags":[],"owner":{"account_id":928316,"reputation":57632,"user_id":2011147,"display_name":"Selcuk"},"down_vote_count":2,"up_vote_count":112,"is_accepted":false,"score":110,"last_activity_date":1610294575,"creation_date":1571096080,"answer_id":58385294,"question_id":11227809,"body_markdown":"*[Bjarne Stroustrup&#39;s Answer](//stackoverflow.blog/2019/10/11/c-creator-bjarne-stroustrup-answers-our-top-five-c-questions/) to this question:*\r\n\r\nThat sounds like an interview question. Is it true? How would you know? It is a bad idea to answer questions about efficiency without first doing some measurements, so it is important to know how to measure.\r\n\r\nSo, I tried with a vector of a million integers and got:\r\n```none\r\nAlready sorted    32995 milliseconds\r\nShuffled          125944 milliseconds\r\n\r\nAlready sorted    18610 milliseconds\r\nShuffled          133304 milliseconds\r\n\r\nAlready sorted    17942 milliseconds\r\nShuffled          107858 milliseconds\r\n```\r\n\r\nI ran that a few times to be sure. Yes, the phenomenon is real. My key code was:\r\n```c++\r\nvoid run(vector&lt;int&gt;&amp; v, const string&amp; label)\r\n{\r\n    auto t0 = system_clock::now();\r\n    sort(v.begin(), v.end());\r\n    auto t1 = system_clock::now();\r\n    cout &lt;&lt; label\r\n         &lt;&lt; duration_cast&lt;microseconds&gt;(t1 — t0).count()\r\n         &lt;&lt; &quot; milliseconds\\n&quot;;\r\n}\r\n\r\nvoid tst()\r\n{\r\n    vector&lt;int&gt; v(1&#39;000&#39;000);\r\n    iota(v.begin(), v.end(), 0);\r\n    run(v, &quot;already sorted &quot;);\r\n    std::shuffle(v.begin(), v.end(), std::mt19937{ std::random_device{}() });\r\n    run(v, &quot;shuffled    &quot;);\r\n}\r\n```\r\n\r\nAt least the phenomenon is real with this compiler, standard library, and optimizer settings. Different implementations can and do give different answers. In fact, someone did do a more systematic study (a quick web search will find it) and most implementations show that effect.\r\n\r\nOne reason is branch prediction: the key operation in the sort algorithm is `“if(v[i] &lt; pivot]) …”` or equivalent. For a sorted sequence that test is always true whereas, for a random sequence, the branch chosen varies randomly.\r\n\r\nAnother reason is that when the vector is already sorted, we never need to move elements to their correct position. The effect of these little details is the factor of five or six that we saw.\r\n\r\nQuicksort (and sorting in general) is a complex study that has attracted some of the greatest minds of computer science. A good sort function is a result of both choosing a good algorithm and paying attention to hardware performance in its implementation.\r\n\r\nIf you want to write efficient code, you need to know a bit about machine architecture.","title":"Why is processing a sorted array faster than processing an unsorted array?","body":"<p><em><a href=\"//stackoverflow.blog/2019/10/11/c-creator-bjarne-stroustrup-answers-our-top-five-c-questions/\">Bjarne Stroustrup's Answer</a> to this question:</em></p>\n<p>That sounds like an interview question. Is it true? How would you know? It is a bad idea to answer questions about efficiency without first doing some measurements, so it is important to know how to measure.</p>\n<p>So, I tried with a vector of a million integers and got:</p>\n<pre class=\"lang-none prettyprint-override\"><code>Already sorted    32995 milliseconds\nShuffled          125944 milliseconds\n\nAlready sorted    18610 milliseconds\nShuffled          133304 milliseconds\n\nAlready sorted    17942 milliseconds\nShuffled          107858 milliseconds\n</code></pre>\n<p>I ran that a few times to be sure. Yes, the phenomenon is real. My key code was:</p>\n<pre class=\"lang-cpp prettyprint-override\"><code>void run(vector&lt;int&gt;&amp; v, const string&amp; label)\n{\n    auto t0 = system_clock::now();\n    sort(v.begin(), v.end());\n    auto t1 = system_clock::now();\n    cout &lt;&lt; label\n         &lt;&lt; duration_cast&lt;microseconds&gt;(t1 — t0).count()\n         &lt;&lt; &quot; milliseconds\\n&quot;;\n}\n\nvoid tst()\n{\n    vector&lt;int&gt; v(1'000'000);\n    iota(v.begin(), v.end(), 0);\n    run(v, &quot;already sorted &quot;);\n    std::shuffle(v.begin(), v.end(), std::mt19937{ std::random_device{}() });\n    run(v, &quot;shuffled    &quot;);\n}\n</code></pre>\n<p>At least the phenomenon is real with this compiler, standard library, and optimizer settings. Different implementations can and do give different answers. In fact, someone did do a more systematic study (a quick web search will find it) and most implementations show that effect.</p>\n<p>One reason is branch prediction: the key operation in the sort algorithm is <code>“if(v[i] &lt; pivot]) …”</code> or equivalent. For a sorted sequence that test is always true whereas, for a random sequence, the branch chosen varies randomly.</p>\n<p>Another reason is that when the vector is already sorted, we never need to move elements to their correct position. The effect of these little details is the factor of five or six that we saw.</p>\n<p>Quicksort (and sorting in general) is a complex study that has attracted some of the greatest minds of computer science. A good sort function is a result of both choosing a good algorithm and paying attention to hardware performance in its implementation.</p>\n<p>If you want to write efficient code, you need to know a bit about machine architecture.</p>\n"},{"tags":[],"owner":{"account_id":4724602,"reputation":1626,"user_id":3821643,"display_name":"hatirlatici"},"down_vote_count":2,"up_vote_count":103,"is_accepted":false,"score":101,"last_activity_date":1648059145,"creation_date":1571866540,"answer_id":58531294,"question_id":11227809,"body_markdown":"This question is rooted in *branch prediction models* on CPUs. I&#39;d recommend reading this paper:\r\n\r\n[**Increasing the Instruction Fetch Rate via Multiple Branch Prediction and a Branch Address Cache**][1]  (But real CPUs these days still don&#39;t make multiple taken branch-predictions per clock cycle, except for Haswell and later [effectively unrolling tiny loops in its loop buffer][2].  Modern CPUs can predict multiple branches not-taken to make use of their fetches in large contiguous blocks.)\r\n\r\nWhen you have sorted elements, branch prediction easily predicts correctly except right at the boundary, letting instructions flow through the CPU pipeline efficiently, without having to rewind and take the correct path on mispredictions.\r\n\r\n\r\n  [1]: https://pdfs.semanticscholar.org/5634/4be375cfed0f79cb9d009ac838682e1bace3.pdf\r\n  [2]: https://%20in%20tight%20loops%20using%20a%20loop%20buffer.","title":"Why is processing a sorted array faster than processing an unsorted array?","body":"<p>This question is rooted in <em>branch prediction models</em> on CPUs. I'd recommend reading this paper:</p>\n<p><a href=\"https://pdfs.semanticscholar.org/5634/4be375cfed0f79cb9d009ac838682e1bace3.pdf\" rel=\"noreferrer\"><strong>Increasing the Instruction Fetch Rate via Multiple Branch Prediction and a Branch Address Cache</strong></a>  (But real CPUs these days still don't make multiple taken branch-predictions per clock cycle, except for Haswell and later <a href=\"https://%20in%20tight%20loops%20using%20a%20loop%20buffer.\" rel=\"noreferrer\">effectively unrolling tiny loops in its loop buffer</a>.  Modern CPUs can predict multiple branches not-taken to make use of their fetches in large contiguous blocks.)</p>\n<p>When you have sorted elements, branch prediction easily predicts correctly except right at the boundary, letting instructions flow through the CPU pipeline efficiently, without having to rewind and take the correct path on mispredictions.</p>\n"},{"tags":[],"owner":{"account_id":23218571,"reputation":449,"user_id":17311156,"display_name":"Geek26"},"down_vote_count":5,"up_vote_count":34,"is_accepted":false,"score":29,"last_activity_date":1647582204,"creation_date":1636106703,"answer_id":69851522,"question_id":11227809,"body_markdown":"*An answer for quick and simple understanding (read the others for more details)*  \r\n\r\nThis concept is called **branch prediction**\r\n\r\nBranch prediction is an optimization technique that predicts the path the code will take before it is known with certainty. This is important because during the code execution, the machine prefetches several code statements and stores them in the pipeline. \r\n\r\nThe problem arises in conditional branching, where there are two possible paths or parts of the code that can be executed. \r\n\r\nWhen the prediction was true, the optimization technique worked out. \r\n\r\nWhen the prediction was false, to explain it in a simple way, the code statement stored in the pipeline gets proved wrong and the actual code has to be completely reloaded, which takes up a lot of time.\r\n\r\nAs common sense suggests, predictions of something sorted are way more accurate than predictions of something unsorted.\r\n\r\nbranch prediction visualisation:\r\n\r\nsorted                        \r\n[![sorted][1]][1] \r\nunsorted\r\n[![unsorted][2]][2]\r\n\r\n   \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/BhphM.png\r\n  [2]: https://i.stack.imgur.com/2Z7Ct.png","title":"Why is processing a sorted array faster than processing an unsorted array?","body":"<p><em>An answer for quick and simple understanding (read the others for more details)</em></p>\n<p>This concept is called <strong>branch prediction</strong></p>\n<p>Branch prediction is an optimization technique that predicts the path the code will take before it is known with certainty. This is important because during the code execution, the machine prefetches several code statements and stores them in the pipeline.</p>\n<p>The problem arises in conditional branching, where there are two possible paths or parts of the code that can be executed.</p>\n<p>When the prediction was true, the optimization technique worked out.</p>\n<p>When the prediction was false, to explain it in a simple way, the code statement stored in the pipeline gets proved wrong and the actual code has to be completely reloaded, which takes up a lot of time.</p>\n<p>As common sense suggests, predictions of something sorted are way more accurate than predictions of something unsorted.</p>\n<p>branch prediction visualisation:</p>\n<p>sorted<br />\n<a href=\"https://i.stack.imgur.com/BhphM.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/BhphM.png\" alt=\"sorted\" /></a>\nunsorted\n<a href=\"https://i.stack.imgur.com/2Z7Ct.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/2Z7Ct.png\" alt=\"unsorted\" /></a></p>\n"}],"owner":{"account_id":31692,"reputation":496784,"user_id":87234,"accept_rate":100,"display_name":"GManNickG"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1851428,"favorite_count":0,"down_vote_count":98,"up_vote_count":27259,"accepted_answer_id":11227902,"answer_count":25,"score":27161,"last_activity_date":1701123268,"creation_date":1340805096,"question_id":11227809,"body_markdown":"In this C++ code, sorting the data (*before* the timed region) makes the primary loop ~6x faster:\r\n\r\n```c++\r\n#include &lt;algorithm&gt;\r\n#include &lt;ctime&gt;\r\n#include &lt;iostream&gt;\r\n\r\nint main()\r\n{\r\n\t// Generate data\r\n\tconst unsigned arraySize = 32768;\r\n\tint data[arraySize];\r\n\r\n\tfor (unsigned c = 0; c &lt; arraySize; ++c)\r\n\t\tdata[c] = std::rand() % 256;\r\n\r\n\t// !!! With this, the next loop runs faster.\r\n\tstd::sort(data, data + arraySize);\r\n\r\n\t// Test\r\n\tclock_t start = clock();\r\n\tlong long sum = 0;\r\n\tfor (unsigned i = 0; i &lt; 100000; ++i)\r\n\t{\r\n\t\tfor (unsigned c = 0; c &lt; arraySize; ++c)\r\n\t\t{\t// Primary loop.\r\n\t\t\tif (data[c] &gt;= 128)\r\n\t\t\t\tsum += data[c];\r\n\t\t}\r\n\t}\r\n\r\n\tdouble elapsedTime = static_cast&lt;double&gt;(clock()-start) / CLOCKS_PER_SEC;\r\n\r\n\tstd::cout &lt;&lt; elapsedTime &lt;&lt; &#39;\\n&#39;;\r\n    std::cout &lt;&lt; &quot;sum = &quot; &lt;&lt; sum &lt;&lt; &#39;\\n&#39;;\r\n}\r\n```\r\n\r\n- Without `std::sort(data, data + arraySize);`, the code runs in 11.54 seconds.\r\n- With the sorted data, the code runs in 1.93 seconds.\r\n\r\n\r\n(Sorting itself takes more time than this one pass over the array, so it&#39;s not actually worth doing if we needed to calculate this for an unknown array.)\r\n\r\n---\r\n\r\nInitially, I thought this might be just a language or compiler anomaly, so I tried Java:\r\n\r\n```java\r\nimport java.util.Arrays;\r\nimport java.util.Random;\r\n\r\npublic class Main\r\n{\r\n\tpublic static void main(String[] args)\r\n\t{\r\n\t\t// Generate data\r\n\t\tint arraySize = 32768;\r\n\t\tint data[] = new int[arraySize];\r\n\r\n\t\tRandom rnd = new Random(0);\r\n\t\tfor (int c = 0; c &lt; arraySize; ++c)\r\n\t\t    data[c] = rnd.nextInt() % 256;\r\n\r\n\t\t// !!! With this, the next loop runs faster\r\n\t\tArrays.sort(data);\r\n\r\n\t\t// Test\r\n\t\tlong start = System.nanoTime();\r\n\t\tlong sum = 0;\r\n\t\tfor (int i = 0; i &lt; 100000; ++i)\r\n\t\t{\r\n\t\t\tfor (int c = 0; c &lt; arraySize; ++c)\r\n\t\t\t{  \t// Primary loop.\r\n\t\t\t\tif (data[c] &gt;= 128)\r\n\t\t\t\t\tsum += data[c];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tSystem.out.println((System.nanoTime() - start) / 1000000000.0);\r\n\t\tSystem.out.println(&quot;sum = &quot; + sum);\r\n\t}\r\n}\r\n```\r\n\r\nWith a similar but less extreme result.\r\n\r\n---\r\n\r\nMy first thought was that sorting brings the data into the [cache](https://en.wikipedia.org/wiki/CPU_cache), but that&#39;s silly because the array was just generated.\r\n\r\n- What is going on?\r\n- Why is processing a sorted array faster than processing an unsorted array?\r\n\r\nThe code is summing up some independent terms, so the order should not matter.\r\n\r\n---\r\n\r\n**Related / follow-up Q&amp;As** about the same effect with different/later compilers and options:\r\n\r\n* https://stackoverflow.com/q/66521344\r\n* https://stackoverflow.com/q/28875325","title":"Why is processing a sorted array faster than processing an unsorted array?","body":"<p>In this C++ code, sorting the data (<em>before</em> the timed region) makes the primary loop ~6x faster:</p>\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;algorithm&gt;\n#include &lt;ctime&gt;\n#include &lt;iostream&gt;\n\nint main()\n{\n    // Generate data\n    const unsigned arraySize = 32768;\n    int data[arraySize];\n\n    for (unsigned c = 0; c &lt; arraySize; ++c)\n        data[c] = std::rand() % 256;\n\n    // !!! With this, the next loop runs faster.\n    std::sort(data, data + arraySize);\n\n    // Test\n    clock_t start = clock();\n    long long sum = 0;\n    for (unsigned i = 0; i &lt; 100000; ++i)\n    {\n        for (unsigned c = 0; c &lt; arraySize; ++c)\n        {   // Primary loop.\n            if (data[c] &gt;= 128)\n                sum += data[c];\n        }\n    }\n\n    double elapsedTime = static_cast&lt;double&gt;(clock()-start) / CLOCKS_PER_SEC;\n\n    std::cout &lt;&lt; elapsedTime &lt;&lt; '\\n';\n    std::cout &lt;&lt; &quot;sum = &quot; &lt;&lt; sum &lt;&lt; '\\n';\n}\n</code></pre>\n<ul>\n<li>Without <code>std::sort(data, data + arraySize);</code>, the code runs in 11.54 seconds.</li>\n<li>With the sorted data, the code runs in 1.93 seconds.</li>\n</ul>\n<p>(Sorting itself takes more time than this one pass over the array, so it's not actually worth doing if we needed to calculate this for an unknown array.)</p>\n<hr />\n<p>Initially, I thought this might be just a language or compiler anomaly, so I tried Java:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.Arrays;\nimport java.util.Random;\n\npublic class Main\n{\n    public static void main(String[] args)\n    {\n        // Generate data\n        int arraySize = 32768;\n        int data[] = new int[arraySize];\n\n        Random rnd = new Random(0);\n        for (int c = 0; c &lt; arraySize; ++c)\n            data[c] = rnd.nextInt() % 256;\n\n        // !!! With this, the next loop runs faster\n        Arrays.sort(data);\n\n        // Test\n        long start = System.nanoTime();\n        long sum = 0;\n        for (int i = 0; i &lt; 100000; ++i)\n        {\n            for (int c = 0; c &lt; arraySize; ++c)\n            {   // Primary loop.\n                if (data[c] &gt;= 128)\n                    sum += data[c];\n            }\n        }\n\n        System.out.println((System.nanoTime() - start) / 1000000000.0);\n        System.out.println(&quot;sum = &quot; + sum);\n    }\n}\n</code></pre>\n<p>With a similar but less extreme result.</p>\n<hr />\n<p>My first thought was that sorting brings the data into the <a href=\"https://en.wikipedia.org/wiki/CPU_cache\" rel=\"noreferrer\">cache</a>, but that's silly because the array was just generated.</p>\n<ul>\n<li>What is going on?</li>\n<li>Why is processing a sorted array faster than processing an unsorted array?</li>\n</ul>\n<p>The code is summing up some independent terms, so the order should not matter.</p>\n<hr />\n<p><strong>Related / follow-up Q&amp;As</strong> about the same effect with different/later compilers and options:</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/q/66521344\">Why is processing an unsorted array the same speed as processing a sorted array with modern x86-64 clang?</a></li>\n<li><a href=\"https://stackoverflow.com/q/28875325\">gcc optimization flag -O3 makes code slower than -O2</a></li>\n</ul>\n"},{"tags":["java","web-services"],"comments":[{"owner":{"account_id":10098519,"reputation":5323,"user_id":7463126,"display_name":"Alan Bateman"},"score":0,"creation_date":1546679907,"post_id":54032558,"comment_id":94935693,"body_markdown":"I think JAX-WS uses the thread context class loader when trying to load the JAX-WS implementation so it might be useful to get its value (Thread.currentThread().getContextClassLoader) when trying to debug this.","body":"I think JAX-WS uses the thread context class loader when trying to load the JAX-WS implementation so it might be useful to get its value (Thread.currentThread().getContextClassLoader) when trying to debug this."},{"owner":{"account_id":4462612,"reputation":980,"user_id":3631003,"accept_rate":50,"display_name":"Bob Brown"},"score":0,"creation_date":1546759363,"post_id":54032558,"comment_id":94952468,"body_markdown":"That&#39;s an idea...I had stuff working until I tried putting the webservice calls into CallableFutures. Interestingly, they are working OK inside plain Futures...so this may not be a real thing.","body":"That&#39;s an idea...I had stuff working until I tried putting the webservice calls into CallableFutures. Interestingly, they are working OK inside plain Futures...so this may not be a real thing."},{"owner":{"account_id":3482547,"reputation":887,"user_id":7783416,"accept_rate":80,"display_name":"user2914191"},"score":0,"creation_date":1555305985,"post_id":54032558,"comment_id":98049802,"body_markdown":"anyone got an answer for this? legacy 3rd party jars dont work in jdk 11","body":"anyone got an answer for this? legacy 3rd party jars dont work in jdk 11"},{"owner":{"account_id":10748228,"reputation":155,"user_id":7908713,"display_name":"KraftDurchBlumen"},"score":0,"creation_date":1613996876,"post_id":54032558,"comment_id":117240440,"body_markdown":"There seems to be some progress, see https://github.com/eclipse-ee4j/jax-ws-api/issues/90","body":"There seems to be some progress, see <a href=\"https://github.com/eclipse-ee4j/jax-ws-api/issues/90\" rel=\"nofollow noreferrer\">github.com/eclipse-ee4j/jax-ws-api/issues/90</a>"}],"answers":[{"tags":[],"owner":{"account_id":2106056,"reputation":890,"user_id":1872360,"accept_rate":88,"display_name":"runholen"},"down_vote_count":1,"up_vote_count":46,"is_accepted":false,"score":45,"last_activity_date":1557918089,"creation_date":1557918089,"answer_id":56147772,"question_id":54032558,"body_markdown":"I got the exact same error calling soap-webservices in java11.\r\nI finally got it to work in my testproject by adding the following dependency to pom.xml\r\n    \r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;com.sun.xml.ws&lt;/groupId&gt;\r\n        &lt;artifactId&gt;rt&lt;/artifactId&gt;\r\n\t    &lt;version&gt;2.3.1&lt;/version&gt;\r\n\t&lt;/dependency&gt;\r\nAs my production environment is not converted to maven yet, I then found out that I needed these jar-files on the classpath:\r\n    \r\n    jaxb-runtime-2.3.1.jar\r\n    jaxws-api-2.3.1.jar\r\n    javax.xml.soap-api-1.4.0.jar\r\n    rt-2.3.1.jar\r\n    streambuffer-1.5.3.jar\r\n    policy-2.7.5.jar\r\n    stax-ex-1.8.jar\r\n    javax.jws-api-1.1.jar\r\n    saaj-impl-1.5.0.jar\r\n    gmbal-api-only-3.1.0-b001.jar ","title":"JDK 11; JAX-WS; Provider com.sun.xml.internal.ws.spi.ProviderImpl not found","body":"<p>I got the exact same error calling soap-webservices in java11.\nI finally got it to work in my testproject by adding the following dependency to pom.xml</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.sun.xml.ws&lt;/groupId&gt;\n    &lt;artifactId&gt;rt&lt;/artifactId&gt;\n    &lt;version&gt;2.3.1&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>As my production environment is not converted to maven yet, I then found out that I needed these jar-files on the classpath:</p>\n\n<pre><code>jaxb-runtime-2.3.1.jar\njaxws-api-2.3.1.jar\njavax.xml.soap-api-1.4.0.jar\nrt-2.3.1.jar\nstreambuffer-1.5.3.jar\npolicy-2.7.5.jar\nstax-ex-1.8.jar\njavax.jws-api-1.1.jar\nsaaj-impl-1.5.0.jar\ngmbal-api-only-3.1.0-b001.jar \n</code></pre>\n"},{"tags":[],"owner":{"account_id":16647754,"reputation":430,"user_id":12031603,"display_name":"Splioo"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1585785286,"creation_date":1585785286,"answer_id":60982167,"question_id":54032558,"body_markdown":"I got the same error as well. From a Spring application I called an OSGI bundle which did a SOAP request. Right before the call within that OSGI bundle a class loader switch solved the problem.\r\n\r\nUse the classloader from your SOAP Service class and reset the classloader after the call.\r\n\r\n```\r\n    final ClassLoader targetClassLoader = ServiceXY.class.getClassLoader();\r\n    final Thread currentThread = Thread.currentThread();\r\n    final ClassLoader contextClassLoader = currentThread.getContextClassLoader();\r\n    try {\r\n           currentThread.setContextClassLoader(targetClassLoader);\r\n           //here call your Service \r\n    } finally {\r\n           currentThread.setContextClassLoader(contextClassLoader);\r\n    }\r\n```\r\nJEE libs have been removed with Java 9, JEE-specific libs / implementations must now be made available by the application via thirdparty libraries - e.g. jaxws-api.jar and jaxws-rt.jar. This code of JEE libs often still expects to be part of the jre system library and with that of the application classloader - but it isn&#39;t anymore. So if service classloader ```ServiceXY.class.getClassLoader()``` and your application classloader ```Thread.currentThread().getContextClassLoader()``` are different you need to switch for the request. ","title":"JDK 11; JAX-WS; Provider com.sun.xml.internal.ws.spi.ProviderImpl not found","body":"<p>I got the same error as well. From a Spring application I called an OSGI bundle which did a SOAP request. Right before the call within that OSGI bundle a class loader switch solved the problem.</p>\n\n<p>Use the classloader from your SOAP Service class and reset the classloader after the call.</p>\n\n<pre><code>    final ClassLoader targetClassLoader = ServiceXY.class.getClassLoader();\n    final Thread currentThread = Thread.currentThread();\n    final ClassLoader contextClassLoader = currentThread.getContextClassLoader();\n    try {\n           currentThread.setContextClassLoader(targetClassLoader);\n           //here call your Service \n    } finally {\n           currentThread.setContextClassLoader(contextClassLoader);\n    }\n</code></pre>\n\n<p>JEE libs have been removed with Java 9, JEE-specific libs / implementations must now be made available by the application via thirdparty libraries - e.g. jaxws-api.jar and jaxws-rt.jar. This code of JEE libs often still expects to be part of the jre system library and with that of the application classloader - but it isn't anymore. So if service classloader <code>ServiceXY.class.getClassLoader()</code> and your application classloader <code>Thread.currentThread().getContextClassLoader()</code> are different you need to switch for the request. </p>\n"},{"tags":[],"owner":{"account_id":216352,"reputation":888,"user_id":471554,"display_name":"ZooMMX"},"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1640188490,"creation_date":1640188490,"answer_id":70451777,"question_id":54032558,"body_markdown":"I worked this out with this artifact:\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;com.sun.xml.ws&lt;/groupId&gt;\r\n        &lt;artifactId&gt;jaxws-rt&lt;/artifactId&gt;\r\n        &lt;version&gt;2.3.5&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nor gradle\r\n    \r\n    implementation &#39;com.sun.xml.ws:jaxws-rt:2.3.5&#39;\r\n\r\nYou can check other versions and which artifacts depends this one here: https://mvnrepository.com/artifact/com.sun.xml.ws/jaxws-rt/2.3.5 .","title":"JDK 11; JAX-WS; Provider com.sun.xml.internal.ws.spi.ProviderImpl not found","body":"<p>I worked this out with this artifact:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.sun.xml.ws&lt;/groupId&gt;\n    &lt;artifactId&gt;jaxws-rt&lt;/artifactId&gt;\n    &lt;version&gt;2.3.5&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>or gradle</p>\n<pre><code>implementation 'com.sun.xml.ws:jaxws-rt:2.3.5'\n</code></pre>\n<p>You can check other versions and which artifacts depends this one here: <a href=\"https://mvnrepository.com/artifact/com.sun.xml.ws/jaxws-rt/2.3.5\" rel=\"noreferrer\">https://mvnrepository.com/artifact/com.sun.xml.ws/jaxws-rt/2.3.5</a> .</p>\n"},{"tags":[],"owner":{"account_id":9427779,"reputation":336,"user_id":7012221,"display_name":"Abhishek"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1667580982,"creation_date":1667580982,"answer_id":74320506,"question_id":54032558,"body_markdown":"After going through lots of official documents and methods of trial and error, we finally found the correct configuration, which is as as follows,\r\n\r\nAdd below dependancy in .pom file,\r\n\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.sun.xml.ws&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jaxws-ri&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.3.2&lt;/version&gt;\r\n\t\t\t&lt;type&gt;pom&lt;/type&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.sun.xml.ws&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;rt&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.3.2&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n \r\n\r\nTo include JAR responsible for loading these classes into restart classloader (used in spring-devtools), update /src/main/resources/META-INF/spring-devtools.properties like below,\r\n\r\n\r\nrestart.include.jax=/jaxws-rt.*\\.jar","title":"JDK 11; JAX-WS; Provider com.sun.xml.internal.ws.spi.ProviderImpl not found","body":"<p>After going through lots of official documents and methods of trial and error, we finally found the correct configuration, which is as as follows,</p>\n<p>Add below dependancy in .pom file,</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;com.sun.xml.ws&lt;/groupId&gt;\n        &lt;artifactId&gt;jaxws-ri&lt;/artifactId&gt;\n        &lt;version&gt;2.3.2&lt;/version&gt;\n        &lt;type&gt;pom&lt;/type&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.sun.xml.ws&lt;/groupId&gt;\n        &lt;artifactId&gt;rt&lt;/artifactId&gt;\n        &lt;version&gt;2.3.2&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>To include JAR responsible for loading these classes into restart classloader (used in spring-devtools), update /src/main/resources/META-INF/spring-devtools.properties like below,</p>\n<p>restart.include.jax=/jaxws-rt.*.jar</p>\n"},{"tags":[],"owner":{"account_id":28903733,"reputation":41,"user_id":22138107,"display_name":"Sir Codes Alot"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1687858634,"creation_date":1687858634,"answer_id":76563523,"question_id":54032558,"body_markdown":"I had the same issue.\r\nI later found out that having moved from javax packages to jakarta packages you will also have to import the correct dependencies. At the time of this comment the latest is 4.0.1. However, I think any version from 3.0.1 should work with Jakarta.\r\nYou will need to import:\r\n```\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;com.sun.xml.ws&lt;/groupId&gt;\r\n        &lt;artifactId&gt;rt&lt;/artifactId&gt;\r\n        &lt;version&gt;4.0.1&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n```","title":"JDK 11; JAX-WS; Provider com.sun.xml.internal.ws.spi.ProviderImpl not found","body":"<p>I had the same issue.\nI later found out that having moved from javax packages to jakarta packages you will also have to import the correct dependencies. At the time of this comment the latest is 4.0.1. However, I think any version from 3.0.1 should work with Jakarta.\nYou will need to import:</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;com.sun.xml.ws&lt;/groupId&gt;\n        &lt;artifactId&gt;rt&lt;/artifactId&gt;\n        &lt;version&gt;4.0.1&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":26985233,"reputation":1,"user_id":20548997,"display_name":"Yuhong He"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695387515,"creation_date":1695387515,"answer_id":77157828,"question_id":54032558,"body_markdown":"For me, I need @WebService annotation in the code. And I got the same error in Java 11 with jakarta.jws.WebMethod. I tried all the solutions above, but not working for me.\r\n\r\nThen I shifted to Java 8 and used javax.jws.WebMethod. It is working.","title":"JDK 11; JAX-WS; Provider com.sun.xml.internal.ws.spi.ProviderImpl not found","body":"<p>For me, I need @WebService annotation in the code. And I got the same error in Java 11 with jakarta.jws.WebMethod. I tried all the solutions above, but not working for me.</p>\n<p>Then I shifted to Java 8 and used javax.jws.WebMethod. It is working.</p>\n"},{"tags":[],"owner":{"account_id":2120573,"reputation":11,"user_id":1883903,"display_name":"Miguel Angel Bautista"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701123251,"creation_date":1701123251,"answer_id":77560235,"question_id":54032558,"body_markdown":"Another solution is to replace javax.xml.ws with jakarta.xml.ws:\r\n\r\n    implementation &#39;jakarta.xml.ws:jakarta.xml.ws-api:4.0.1&#39;\r\n\r\n \r\nreplace all the imports and if you have this remove it:\r\n\r\n    System.setProperty(&quot;javax.xml.ws.spi.Provider&quot;, &quot;com.sun.xml.ws.spi.ProviderImpl&quot;)\r\n\r\n\r\n","title":"JDK 11; JAX-WS; Provider com.sun.xml.internal.ws.spi.ProviderImpl not found","body":"<p>Another solution is to replace javax.xml.ws with jakarta.xml.ws:</p>\n<pre><code>implementation 'jakarta.xml.ws:jakarta.xml.ws-api:4.0.1'\n</code></pre>\n<p>replace all the imports and if you have this remove it:</p>\n<pre><code>System.setProperty(&quot;javax.xml.ws.spi.Provider&quot;, &quot;com.sun.xml.ws.spi.ProviderImpl&quot;)\n</code></pre>\n"}],"owner":{"account_id":4462612,"reputation":980,"user_id":3631003,"accept_rate":50,"display_name":"Bob Brown"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":72094,"favorite_count":0,"down_vote_count":0,"up_vote_count":49,"answer_count":7,"score":49,"last_activity_date":1701123251,"creation_date":1546570357,"question_id":54032558,"body_markdown":"I Need to access legacy SOAP webservices in JDK 11. But I am suffering &quot;ProviderImpl not found.&quot;\r\n\r\nThe JDK 11 implementation is: zulu11.2.3-jdk11.0.1-win_x64.\r\n\r\nIn my build.gradle, I have the following dependency:\r\n\r\n    compile group: &#39;com.sun.xml.ws&#39;, name: &#39;jaxws-rt&#39;, version: &#39;2.3.1&#39;, ext: &#39;pom&#39;, { force = true }\r\n\r\nMy WAR file&#39;s WEB-INF/lib\r\n contains\r\n[![enter image description here][1]][1]\r\n\r\n\r\nI am seeing:\r\n\r\n    javax.xml.ws.WebServiceException: Provider com.sun.xml.internal.ws.spi.ProviderImpl not found\r\n    \tat javax.xml.ws.spi.FactoryFinder$1.createException(FactoryFinder.java:61) ~[jaxws-api-2.3.1.jar:na]\r\n    \tat javax.xml.ws.spi.FactoryFinder$1.createException(FactoryFinder.java:58) ~[jaxws-api-2.3.1.jar:na]\r\n    \tat javax.xml.ws.spi.ServiceLoaderUtil.newInstance(ServiceLoaderUtil.java:103) ~[jaxws-api-2.3.1.jar:na]\r\n    \tat javax.xml.ws.spi.FactoryFinder.find(FactoryFinder.java:112) ~[jaxws-api-2.3.1.jar:na]\r\n    \tat javax.xml.ws.spi.Provider.provider(Provider.java:96) ~[jaxws-api-2.3.1.jar:na]\r\n    \tat javax.xml.ws.Service.&lt;init&gt;(Service.java:112) ~[jaxws-api-2.3.1.jar:na]\r\n\r\nFollowing https://github.com/javaee/metro-jax-ws/issues/1247 I have tried setting:\r\n\r\n-Djavax.xml.ws.spi.Provider=com.sun.xml.ws.spi.ProviderImpl\r\n\r\nBut I still get:\r\n\r\n    javax.xml.ws.WebServiceException: Provider com.sun.xml.ws.spi.ProviderImpl not found\r\n    \tat javax.xml.ws.spi.FactoryFinder$1.createException(FactoryFinder.java:61) ~[jaxws-api-2.3.1.jar:na]\r\n    \tat javax.xml.ws.spi.FactoryFinder$1.createException(FactoryFinder.java:58) ~[jaxws-api-2.3.1.jar:na]\r\n    \tat javax.xml.ws.spi.ServiceLoaderUtil.newInstance(ServiceLoaderUtil.java:103) ~[jaxws-api-2.3.1.jar:na]\r\n    \tat javax.xml.ws.spi.FactoryFinder.fromSystemProperty(FactoryFinder.java:122) ~[jaxws-api-2.3.1.jar:na]\r\n    \tat javax.xml.ws.spi.FactoryFinder.find(FactoryFinder.java:99) ~[jaxws-api-2.3.1.jar:na]\r\n    \tat javax.xml.ws.spi.Provider.provider(Provider.java:96) ~[jaxws-api-2.3.1.jar:na]\r\n    \tat javax.xml.ws.Service.&lt;init&gt;(Service.java:112) ~[jaxws-api-2.3.1.jar:na]\r\n    \t...\r\n    Caused by: java.lang.ClassNotFoundException: com.sun.xml.ws.spi.ProviderImpl\r\n    \tat java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:583) ~[na:na]\r\n    \tat java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:178) ~[na:na]\r\n    \tat java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:521) ~[na:na]\r\n    \tat javax.xml.ws.spi.ServiceLoaderUtil.nullSafeLoadClass(ServiceLoaderUtil.java:90) ~[jaxws-api-2.3.1.jar:na]\r\n    \tat javax.xml.ws.spi.ServiceLoaderUtil.safeLoadClass(ServiceLoaderUtil.java:123) ~[jaxws-api-2.3.1.jar:na]\r\n    \tat javax.xml.ws.spi.ServiceLoaderUtil.newInstance(ServiceLoaderUtil.java:101) ~[jaxws-api-2.3.1.jar:na]\r\n    \t... 22 common frames omitted\r\n\r\n\r\nI have verified that com.sun.xml.ws.spi.ProviderImpl IS available:\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/mBsKL.png\r\n  [2]: https://i.stack.imgur.com/cU52u.png\r\n\r\nIs there a known working example of this combination available &quot;out there&quot;?\r\n\r\n\r\nThoughts/suggestions gratefully accepted.","title":"JDK 11; JAX-WS; Provider com.sun.xml.internal.ws.spi.ProviderImpl not found","body":"<p>I Need to access legacy SOAP webservices in JDK 11. But I am suffering \"ProviderImpl not found.\"</p>\n\n<p>The JDK 11 implementation is: zulu11.2.3-jdk11.0.1-win_x64.</p>\n\n<p>In my build.gradle, I have the following dependency:</p>\n\n<pre><code>compile group: 'com.sun.xml.ws', name: 'jaxws-rt', version: '2.3.1', ext: 'pom', { force = true }\n</code></pre>\n\n<p>My WAR file's WEB-INF/lib\n contains\n<a href=\"https://i.stack.imgur.com/mBsKL.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/mBsKL.png\" alt=\"enter image description here\"></a></p>\n\n<p>I am seeing:</p>\n\n<pre><code>javax.xml.ws.WebServiceException: Provider com.sun.xml.internal.ws.spi.ProviderImpl not found\n    at javax.xml.ws.spi.FactoryFinder$1.createException(FactoryFinder.java:61) ~[jaxws-api-2.3.1.jar:na]\n    at javax.xml.ws.spi.FactoryFinder$1.createException(FactoryFinder.java:58) ~[jaxws-api-2.3.1.jar:na]\n    at javax.xml.ws.spi.ServiceLoaderUtil.newInstance(ServiceLoaderUtil.java:103) ~[jaxws-api-2.3.1.jar:na]\n    at javax.xml.ws.spi.FactoryFinder.find(FactoryFinder.java:112) ~[jaxws-api-2.3.1.jar:na]\n    at javax.xml.ws.spi.Provider.provider(Provider.java:96) ~[jaxws-api-2.3.1.jar:na]\n    at javax.xml.ws.Service.&lt;init&gt;(Service.java:112) ~[jaxws-api-2.3.1.jar:na]\n</code></pre>\n\n<p>Following <a href=\"https://github.com/javaee/metro-jax-ws/issues/1247\" rel=\"noreferrer\">https://github.com/javaee/metro-jax-ws/issues/1247</a> I have tried setting:</p>\n\n<p>-Djavax.xml.ws.spi.Provider=com.sun.xml.ws.spi.ProviderImpl</p>\n\n<p>But I still get:</p>\n\n<pre><code>javax.xml.ws.WebServiceException: Provider com.sun.xml.ws.spi.ProviderImpl not found\n    at javax.xml.ws.spi.FactoryFinder$1.createException(FactoryFinder.java:61) ~[jaxws-api-2.3.1.jar:na]\n    at javax.xml.ws.spi.FactoryFinder$1.createException(FactoryFinder.java:58) ~[jaxws-api-2.3.1.jar:na]\n    at javax.xml.ws.spi.ServiceLoaderUtil.newInstance(ServiceLoaderUtil.java:103) ~[jaxws-api-2.3.1.jar:na]\n    at javax.xml.ws.spi.FactoryFinder.fromSystemProperty(FactoryFinder.java:122) ~[jaxws-api-2.3.1.jar:na]\n    at javax.xml.ws.spi.FactoryFinder.find(FactoryFinder.java:99) ~[jaxws-api-2.3.1.jar:na]\n    at javax.xml.ws.spi.Provider.provider(Provider.java:96) ~[jaxws-api-2.3.1.jar:na]\n    at javax.xml.ws.Service.&lt;init&gt;(Service.java:112) ~[jaxws-api-2.3.1.jar:na]\n    ...\nCaused by: java.lang.ClassNotFoundException: com.sun.xml.ws.spi.ProviderImpl\n    at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:583) ~[na:na]\n    at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:178) ~[na:na]\n    at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:521) ~[na:na]\n    at javax.xml.ws.spi.ServiceLoaderUtil.nullSafeLoadClass(ServiceLoaderUtil.java:90) ~[jaxws-api-2.3.1.jar:na]\n    at javax.xml.ws.spi.ServiceLoaderUtil.safeLoadClass(ServiceLoaderUtil.java:123) ~[jaxws-api-2.3.1.jar:na]\n    at javax.xml.ws.spi.ServiceLoaderUtil.newInstance(ServiceLoaderUtil.java:101) ~[jaxws-api-2.3.1.jar:na]\n    ... 22 common frames omitted\n</code></pre>\n\n<p>I have verified that com.sun.xml.ws.spi.ProviderImpl IS available:</p>\n\n<p><a href=\"https://i.stack.imgur.com/cU52u.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/cU52u.png\" alt=\"enter image description here\"></a></p>\n\n<p>Is there a known working example of this combination available \"out there\"?</p>\n\n<p>Thoughts/suggestions gratefully accepted.</p>\n"},{"tags":["java","hadoop","parquet","avro"],"owner":{"account_id":10012783,"reputation":23,"user_id":7405139,"display_name":"Anil"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1701123150,"creation_date":1700152153,"question_id":77496508,"body_markdown":"I am trying to generate some parquet files from my POJO classes. I am mostly successful in that but AvroWriter is giving me a failure when I try to save a list of custom POJO object. \r\n\r\n```\r\n try {\r\n     ParquetWriter&lt;GenericRecord&gt; writer = writerMap.computeIfAbsent(separator, pWriter -&gt; {\r\n         try {\r\n             return AvroParquetWriter\r\n                    .&lt;GenericRecord&gt;builder(path)\r\n                    .withSchema(schema)\r\n                    .withWriteMode(ParquetFileWriter.Mode.OVERWRITE)\r\n                    .withConf(config)\r\n                    .withValidation(false)\r\n                    .withPageWriteChecksumEnabled(false)\r\n                    .withDictionaryEncoding(false)\r\n                    .withCompressionCodec(CompressionCodecName.SNAPPY)\r\n                    .build();\r\n         } catch (IOException e) {\r\n             throw new RuntimeException(&quot;Error creating Parquet writer&quot;, e);\r\n         }\r\n     });\r\n\r\n     writer.write(convertToGenericRecord(item, schema));\r\n } catch (Exception ex) {\r\n     log.error(&quot;Exception while writing to parquet file&quot;, ex);\r\n }\r\n```\r\n\r\n\r\n\r\nThis is my Schema:\r\n```\r\n public static Schema getServiceOrdersJsonSchema2() {\r\n     Schema arraySchema = SchemaBuilder.array()\r\n               .items(SchemaBuilder.record(&quot;ServiceOrderJson&quot;)\r\n               .namespace(&quot;ServiceOrders&quot;)\r\n               .fields()\r\n                   .name(&quot;value1&quot;).type().stringType().noDefault()\r\n                   .name(&quot;value2&quot;).type().stringType().noDefault()\r\n                   .name(&quot;value3&quot;).type().longType().noDefault()\r\n                   .name(&quot;value4&quot;).type().stringType().noDefault()\r\n                   .name(&quot;value5&quot;).type().booleanType().noDefault()\r\n               .endRecord());\r\n    return arraySchema;\r\n}\r\n```\r\n\r\nThis is my POJO class:\r\n```\r\npublic class ServiceOrderJson {\r\n    public String value1;\r\n    public String value2;\r\n    public long value3;\r\n    public String value4;\r\n    public Boolean value5;\r\n}\r\n```\r\n\r\nStackTrace:\r\n\r\n    java.lang.ArrayIndexOutOfBoundsException: Index 3 out of bounds for length 3\r\n    \tat org.apache.parquet.io.MessageColumnIO$MessageColumnIORecordConsumer.addBinary(MessageColumnIO.java:476) ~[parquet-column-1.13.1.jar:1.13.1]\r\n    \tat org.apache.parquet.avro.AvroWriteSupport.writeValueWithoutConversion(AvroWriteSupport.java:362) ~[parquet-avro-1.13.1.jar:1.13.1]\r\n    \tat org.apache.parquet.avro.AvroWriteSupport.writeValue(AvroWriteSupport.java:291) ~[parquet-avro-1.13.1.jar:1.13.1]\r\n    \tat org.apache.parquet.avro.AvroWriteSupport.writeRecordFields(AvroWriteSupport.java:204) ~[parquet-avro-1.13.1.jar:1.13.1]\r\n    \tat org.apache.parquet.avro.AvroWriteSupport.write(AvroWriteSupport.java:178) ~[parquet-avro-1.13.1.jar:1.13.1]\r\n    \tat org.apache.parquet.hadoop.InternalParquetRecordWriter.write(InternalParquetRecordWriter.java:138) ~[parquet-hadoop-1.13.1.jar:1.13.1]\r\n    \tat org.apache.parquet.hadoop.ParquetWriter.write(ParquetWriter.java:310) ~[parquet-hadoop-1.13.1.jar:1.13.1]\r\n    \tat com.mbti.cddm.analyticsintegration.writer.ParquetItemWriter.generateParquetFiles(ParquetItemWriter.java:123) ~[classes/:na]\r\n\r\nI was expecting that Array is going to be recognized and written into a file.","title":"Apache Parquet Writer throws ArrayIndexOutOfBoundsException when writing Avro","body":"<p>I am trying to generate some parquet files from my POJO classes. I am mostly successful in that but AvroWriter is giving me a failure when I try to save a list of custom POJO object.</p>\n<pre><code> try {\n     ParquetWriter&lt;GenericRecord&gt; writer = writerMap.computeIfAbsent(separator, pWriter -&gt; {\n         try {\n             return AvroParquetWriter\n                    .&lt;GenericRecord&gt;builder(path)\n                    .withSchema(schema)\n                    .withWriteMode(ParquetFileWriter.Mode.OVERWRITE)\n                    .withConf(config)\n                    .withValidation(false)\n                    .withPageWriteChecksumEnabled(false)\n                    .withDictionaryEncoding(false)\n                    .withCompressionCodec(CompressionCodecName.SNAPPY)\n                    .build();\n         } catch (IOException e) {\n             throw new RuntimeException(&quot;Error creating Parquet writer&quot;, e);\n         }\n     });\n\n     writer.write(convertToGenericRecord(item, schema));\n } catch (Exception ex) {\n     log.error(&quot;Exception while writing to parquet file&quot;, ex);\n }\n</code></pre>\n<p>This is my Schema:</p>\n<pre><code> public static Schema getServiceOrdersJsonSchema2() {\n     Schema arraySchema = SchemaBuilder.array()\n               .items(SchemaBuilder.record(&quot;ServiceOrderJson&quot;)\n               .namespace(&quot;ServiceOrders&quot;)\n               .fields()\n                   .name(&quot;value1&quot;).type().stringType().noDefault()\n                   .name(&quot;value2&quot;).type().stringType().noDefault()\n                   .name(&quot;value3&quot;).type().longType().noDefault()\n                   .name(&quot;value4&quot;).type().stringType().noDefault()\n                   .name(&quot;value5&quot;).type().booleanType().noDefault()\n               .endRecord());\n    return arraySchema;\n}\n</code></pre>\n<p>This is my POJO class:</p>\n<pre><code>public class ServiceOrderJson {\n    public String value1;\n    public String value2;\n    public long value3;\n    public String value4;\n    public Boolean value5;\n}\n</code></pre>\n<p>StackTrace:</p>\n<pre><code>java.lang.ArrayIndexOutOfBoundsException: Index 3 out of bounds for length 3\n    at org.apache.parquet.io.MessageColumnIO$MessageColumnIORecordConsumer.addBinary(MessageColumnIO.java:476) ~[parquet-column-1.13.1.jar:1.13.1]\n    at org.apache.parquet.avro.AvroWriteSupport.writeValueWithoutConversion(AvroWriteSupport.java:362) ~[parquet-avro-1.13.1.jar:1.13.1]\n    at org.apache.parquet.avro.AvroWriteSupport.writeValue(AvroWriteSupport.java:291) ~[parquet-avro-1.13.1.jar:1.13.1]\n    at org.apache.parquet.avro.AvroWriteSupport.writeRecordFields(AvroWriteSupport.java:204) ~[parquet-avro-1.13.1.jar:1.13.1]\n    at org.apache.parquet.avro.AvroWriteSupport.write(AvroWriteSupport.java:178) ~[parquet-avro-1.13.1.jar:1.13.1]\n    at org.apache.parquet.hadoop.InternalParquetRecordWriter.write(InternalParquetRecordWriter.java:138) ~[parquet-hadoop-1.13.1.jar:1.13.1]\n    at org.apache.parquet.hadoop.ParquetWriter.write(ParquetWriter.java:310) ~[parquet-hadoop-1.13.1.jar:1.13.1]\n    at com.mbti.cddm.analyticsintegration.writer.ParquetItemWriter.generateParquetFiles(ParquetItemWriter.java:123) ~[classes/:na]\n</code></pre>\n<p>I was expecting that Array is going to be recognized and written into a file.</p>\n"},{"tags":["java","swing","jtable","jradiobutton"],"comments":[{"owner":{"account_id":3329749,"reputation":8679,"user_id":2798955,"accept_rate":28,"display_name":"Bruce"},"score":0,"creation_date":1437548409,"post_id":31555980,"comment_id":51069006,"body_markdown":"what you have tried so far?","body":"what you have tried so far?"},{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1437548562,"post_id":31555980,"comment_id":51069088,"body_markdown":"You need to evaluate the value of `sex` to a `boolean` (`true`/`false`) which can the be set to the `JRadioButton` via `isSelected`.  You might also like to have a look at [How to Use the ButtonGroup Component](https://docs.oracle.com/javase/tutorial/uiswing/components/buttongroup.html)","body":"You need to evaluate the value of <code>sex</code> to a <code>boolean</code> (<code>true</code>/<code>false</code>) which can the be set to the <code>JRadioButton</code> via <code>isSelected</code>.  You might also like to have a look at <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/components/buttongroup.html\" rel=\"nofollow noreferrer\">How to Use the ButtonGroup Component</a>"},{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1437548660,"post_id":31555980,"comment_id":51069141,"body_markdown":"Some idea of the structure of the `Student` class would be helpful","body":"Some idea of the structure of the <code>Student</code> class would be helpful"},{"owner":{"account_id":937730,"reputation":1823,"user_id":966347,"accept_rate":96,"display_name":"NovusMobile"},"score":0,"creation_date":1437549225,"post_id":31555980,"comment_id":51069463,"body_markdown":"possible duplicate of [Radio button not posting value to MySQL database](http://stackoverflow.com/questions/4770199/radio-button-not-posting-value-to-mysql-database)","body":"possible duplicate of <a href=\"http://stackoverflow.com/questions/4770199/radio-button-not-posting-value-to-mysql-database\">Radio button not posting value to MySQL database</a>"},{"owner":{"account_id":6651843,"reputation":105,"user_id":5133578,"accept_rate":0,"display_name":"STEPHEN YAO"},"score":0,"creation_date":1437620871,"post_id":31555980,"comment_id":51109291,"body_markdown":"Thank you guys! but I&#39;m stuck in that radiobutton I can&#39;t set it based on database","body":"Thank you guys! but I&#39;m stuck in that radiobutton I can&#39;t set it based on database"}],"answers":[{"tags":[],"owner":{"account_id":6457339,"reputation":1080,"user_id":5002284,"display_name":"dly"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1437549476,"creation_date":1437549476,"answer_id":31556347,"question_id":31555980,"body_markdown":"        String gender = &quot;male&quot; \r\n        // this comes from db - since we don&#39;t know the structure this is a plain guess.\r\n        \r\n        if (gender.equals(&quot;male&quot;) {\r\n            rbtMale.setSelected(true); \r\n        } else {\r\n            rbtFemale.setSelected(true); \r\n        } \r\n\r\n\r\nAnd like MadProgrammer said, you will need a `ButtonGroup` and `add` all relevant buttons to it.\r\n\r\n    private final ButtonGroup genderButtons = new ButtonGroup();\r\n    genderButtons.add(rbtMale);\r\n    genderButtons.add(rbtFemale);\r\n\r\n\r\n","title":"How to set the Radio Button based on the value fetched from the database","body":"<pre><code>    String gender = \"male\" \n    // this comes from db - since we don't know the structure this is a plain guess.\n\n    if (gender.equals(\"male\") {\n        rbtMale.setSelected(true); \n    } else {\n        rbtFemale.setSelected(true); \n    } \n</code></pre>\n\n<p>And like MadProgrammer said, you will need a <code>ButtonGroup</code> and <code>add</code> all relevant buttons to it.</p>\n\n<pre><code>private final ButtonGroup genderButtons = new ButtonGroup();\ngenderButtons.add(rbtMale);\ngenderButtons.add(rbtFemale);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4825208,"reputation":1874,"user_id":3894826,"display_name":"A.Aleem11"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1509754843,"creation_date":1509754843,"answer_id":47106084,"question_id":31555980,"body_markdown":"I&#39;ve worked with same kinda solution in my work I am generating radiobutton with database values and showing them in java dialog.\r\n\r\nWe have a values from database stored in list like below:\r\n\r\n&gt; List Titles; //This is a list containing your database values\r\n\r\nFirst count the values of this list elements: \r\n\r\n&gt;    int list_count=Titles.size();\r\n\r\nNow to proceed with radio function first we need to convert list elements into array like below:\r\n\r\n    String[] col = new String[list_count]; //created an array with limit of list count values\r\n\tfor(int i=0; i &lt; list_count; i++){ \r\n    col[i]=Titles.get(i).toString(); // add values of list into array with loop\r\n\t}\r\n\r\nBelow is the function that is creating radio buttons with database array we created above:\r\n\r\n \r\n\r\n     public String get_key(int list_count, String[] col){\r\n\r\n       JRadioButton jb[] = new JRadioButton[col.length]; //Create Radion button array\r\n\r\n       ButtonGroup rb = new ButtonGroup(); //Group Radio Button\r\n\r\n       JPanel panel = new JPanel( new GridLayout(0, 1) ); //Set layout of radion button to display each after other\r\n\r\n       JScrollPane sp = new JScrollPane(panel); // Create a scrollpane to put all these radio button on that\r\n\r\n       GridBagLayout gridbag = new GridBagLayout(); //Layout for scrollpane\r\n        \r\n    sp.setViewportBorder(BorderFactory.createBevelBorder(BevelBorder.LOWERED)); //bordre for scrollpane\r\n\r\n        List&lt;Component&gt; q = new ArrayList&lt;&gt;(); // q is a component to store and display each radio button\r\n\r\n        JLabel h1=new JLabel(&quot;Select a value&quot;); //put a heading on top of jpanel before radio button\r\n\r\n        h1.setFont(new Font(&quot;Serif&quot;, Font.BOLD, 18)); // set heading text\r\n\r\n        panel.add(h1); //add heading on top of jpanel\r\n\r\n        panel.setBorder(new EmptyBorder(10, 10, 10, 10)); //set panel border to padding each radio button\r\n\r\n        for(int i=0; i &lt; list_count; i++){ \r\n\r\n         jb[i]=new JRadioButton(col[i]); //create radion button dynamacially &quot;col[i]&quot; is the value of each radio\r\n\r\n         rb.add(jb[i]); //it is important also to put all radio in a group we created so only one element should be selected\r\n\r\n         panel.add(jb[i]); // add all radio on jpanel\r\n\r\n            }\r\n    \r\n    sp.setPreferredSize( new Dimension( 350, 300 ) ); //set size of scrollpane\r\n\r\n    int act=JOptionPane.showConfirmDialog(null, sp, &quot;Select Primary Key&quot;,JOptionPane.OK_CANCEL_OPTION,JOptionPane.PLAIN_MESSAGE); //add and show scrollpane in dialog\r\n    \r\n    }\r\n\r\nCalling this function with parameter values we created first &quot;list_count&quot; &amp; &quot;col&quot;:\r\n\r\n    get_key(list_count, col);","title":"How to set the Radio Button based on the value fetched from the database","body":"<p>I've worked with same kinda solution in my work I am generating radiobutton with database values and showing them in java dialog.</p>\n\n<p>We have a values from database stored in list like below:</p>\n\n<blockquote>\n  <p>List Titles; //This is a list containing your database values</p>\n</blockquote>\n\n<p>First count the values of this list elements: </p>\n\n<blockquote>\n  <p>int list_count=Titles.size();</p>\n</blockquote>\n\n<p>Now to proceed with radio function first we need to convert list elements into array like below:</p>\n\n<pre><code>String[] col = new String[list_count]; //created an array with limit of list count values\nfor(int i=0; i &lt; list_count; i++){ \ncol[i]=Titles.get(i).toString(); // add values of list into array with loop\n}\n</code></pre>\n\n<p>Below is the function that is creating radio buttons with database array we created above:</p>\n\n<pre><code> public String get_key(int list_count, String[] col){\n\n   JRadioButton jb[] = new JRadioButton[col.length]; //Create Radion button array\n\n   ButtonGroup rb = new ButtonGroup(); //Group Radio Button\n\n   JPanel panel = new JPanel( new GridLayout(0, 1) ); //Set layout of radion button to display each after other\n\n   JScrollPane sp = new JScrollPane(panel); // Create a scrollpane to put all these radio button on that\n\n   GridBagLayout gridbag = new GridBagLayout(); //Layout for scrollpane\n\nsp.setViewportBorder(BorderFactory.createBevelBorder(BevelBorder.LOWERED)); //bordre for scrollpane\n\n    List&lt;Component&gt; q = new ArrayList&lt;&gt;(); // q is a component to store and display each radio button\n\n    JLabel h1=new JLabel(\"Select a value\"); //put a heading on top of jpanel before radio button\n\n    h1.setFont(new Font(\"Serif\", Font.BOLD, 18)); // set heading text\n\n    panel.add(h1); //add heading on top of jpanel\n\n    panel.setBorder(new EmptyBorder(10, 10, 10, 10)); //set panel border to padding each radio button\n\n    for(int i=0; i &lt; list_count; i++){ \n\n     jb[i]=new JRadioButton(col[i]); //create radion button dynamacially \"col[i]\" is the value of each radio\n\n     rb.add(jb[i]); //it is important also to put all radio in a group we created so only one element should be selected\n\n     panel.add(jb[i]); // add all radio on jpanel\n\n        }\n\nsp.setPreferredSize( new Dimension( 350, 300 ) ); //set size of scrollpane\n\nint act=JOptionPane.showConfirmDialog(null, sp, \"Select Primary Key\",JOptionPane.OK_CANCEL_OPTION,JOptionPane.PLAIN_MESSAGE); //add and show scrollpane in dialog\n\n}\n</code></pre>\n\n<p>Calling this function with parameter values we created first \"list_count\" &amp; \"col\":</p>\n\n<pre><code>get_key(list_count, col);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14454476,"reputation":1,"user_id":10441088,"display_name":"Karshanguna R"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1538406208,"creation_date":1538401603,"answer_id":52592565,"question_id":31555980,"body_markdown":"Create a `Student.java` class to get particular table value from database.\r\nIn the current form `AddStudent` create a function call as `getStudentList` to fill the GUI form with database data to particular id.\r\n\r\n        public ArrayList&lt;Student&gt; getStudentList() {\r\n        ArrayList&lt;Student&gt; studentList = new ArrayList&lt;&gt;();\r\n        conn = DbConnection.ConnectDb();\r\n        String selectQuery = &quot;SELECT * FROM student&quot;;\r\n        \r\n        try {\r\n            PreparedStatement pst = conn.prepareStatement();\r\n            ResultSet rs = pst.executeQuery();\r\n            Donor donor;\r\n            \r\n            while(rs.next()) {\r\n                student = new Student(rs.getString(&quot;id&quot;),\r\n                rs.getString(&quot;gender&quot;));\r\n                studentList.add(student);\r\n            }\r\n        \r\n        } catch (SQLException ex) {\r\n            Logger.getLogger(Student.class.getName()).log(Level.SEVERE, null, ex);\r\n        }\r\n        return studentList; \r\n    }\r\n\r\nAfter create a function called `showStudent` to show the particular data value to called id.(In below code `male,female` are the checkbox values)\r\n\r\n        public void showStudent(int index) throws ParseException {\r\n        if(getStudentList().get(index).getGender().equals(&quot;male&quot;)) {\r\n                    male.setSelected(true);\r\n                    female.setSelected(false);\r\n                    gender = &quot;male&quot;;\r\n                }\r\n                else {\r\n                    female.setSelected(true);\r\n                    male.setSelected(false);\r\n                    gender = &quot;female&quot;;\r\n                }\r\n        }\r\n\r\nSet action to the `jbutton`, When get value id from `jtextfield` then fill the checkbox in particular gender value.\r\n","title":"How to set the Radio Button based on the value fetched from the database","body":"<p>Create a <code>Student.java</code> class to get particular table value from database.\nIn the current form <code>AddStudent</code> create a function call as <code>getStudentList</code> to fill the GUI form with database data to particular id.</p>\n\n<pre><code>    public ArrayList&lt;Student&gt; getStudentList() {\n    ArrayList&lt;Student&gt; studentList = new ArrayList&lt;&gt;();\n    conn = DbConnection.ConnectDb();\n    String selectQuery = \"SELECT * FROM student\";\n\n    try {\n        PreparedStatement pst = conn.prepareStatement();\n        ResultSet rs = pst.executeQuery();\n        Donor donor;\n\n        while(rs.next()) {\n            student = new Student(rs.getString(\"id\"),\n            rs.getString(\"gender\"));\n            studentList.add(student);\n        }\n\n    } catch (SQLException ex) {\n        Logger.getLogger(Student.class.getName()).log(Level.SEVERE, null, ex);\n    }\n    return studentList; \n}\n</code></pre>\n\n<p>After create a function called <code>showStudent</code> to show the particular data value to called id.(In below code <code>male,female</code> are the checkbox values)</p>\n\n<pre><code>    public void showStudent(int index) throws ParseException {\n    if(getStudentList().get(index).getGender().equals(\"male\")) {\n                male.setSelected(true);\n                female.setSelected(false);\n                gender = \"male\";\n            }\n            else {\n                female.setSelected(true);\n                male.setSelected(false);\n                gender = \"female\";\n            }\n    }\n</code></pre>\n\n<p>Set action to the <code>jbutton</code>, When get value id from <code>jtextfield</code> then fill the checkbox in particular gender value.</p>\n"}],"owner":{"account_id":6651843,"reputation":105,"user_id":5133578,"accept_rate":0,"display_name":"STEPHEN YAO"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":17073,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1701122565,"creation_date":1437548276,"question_id":31555980,"body_markdown":" I have a `JTable` filled with data about `students (student id, name...)`, and when I select a row from a table, the form opens and its field need to be filled with same values (eg. if Johny Bravo was selected from the table.\r\n\r\nThen his name should be shown in text filed Name on the form, I did like this `txtfieldName.setText(student.getName)`.\r\n\r\nMy question is how do I set my `Radio button` automatically (my radio button is Male or Female) when I clicked the field.\r\n\r\n    enter code here\r\n\r\n    tableGuest.addMouseListener(new MouseAdapter() {\r\n\tpublic void mouseClicked(MouseEvent e) {\r\n\t\ttry{\r\n\t\t\tint row = tableGuest.getSelectedRow();\r\n\t\t\tString guestEdit=(tableGuest.getModel().getValueAt(row,     0).toString());\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\tString query = &quot;Select guest_id,guest_fname,guest_lname,guest_contact,guest_age,guest_gender,guest_address,guest_email from guest_tbl where guest_id= &#39;&quot;+guestEdit+&quot;&#39;&quot;;\r\n\t\t\t\r\n\t\tPreparedStatement pst = con.prepareStatement(query);\r\n\t\tResultSet rs = pst.executeQuery();\r\n\t\t\t\t\t\r\n\t\tbuttonGroupEdit.add(rdbtnMaleEdit);\r\n\t\tbuttonGroupEdit.add(rdbtnFemaleEdit);\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\twhile(rs.next())\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tString genderEdit=rs.getString(&quot;guest_gender&quot;);\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif(genderEdit.equals(&quot;Male&quot;))\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t rdbtnMaleEdit.setSelected(true); \r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if(genderEdit.equals(&quot;Female&quot;))\r\n                        {\r\n                             rdbtnFemaleEdit.setSelected(true);\r\n                        }\r\n                        else\r\n                        {\r\n                        JOptionPane.showMessageDialog(null, &quot;error !&quot;);\r\n                        }\r\n\r\n\r\n\t\t\t\t\t\ttfEditFname.setText(rs.getString(&quot;guest_fname&quot;));\r\n\t\t\t\t\t\ttfEditLname.setText(rs.getString(&quot;guest_lname&quot;));\r\n\t\t\t\t\t\ttfEditEmail.setText(rs.getString(&quot;guest_email&quot;));\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\ttfEditContact.setText(rs.getString(&quot;guest_contact&quot;))\r\n\t\t\t\t\t}\r\n\t\t\t\t\tpst.close();\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t}catch(Exception ex){\r\n\t\t\t\t\tex.printStackTrace();\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t});\r\n","title":"How to set the Radio Button based on the value fetched from the database","body":"<p>I have a <code>JTable</code> filled with data about <code>students (student id, name...)</code>, and when I select a row from a table, the form opens and its field need to be filled with same values (eg. if Johny Bravo was selected from the table.</p>\n\n<p>Then his name should be shown in text filed Name on the form, I did like this <code>txtfieldName.setText(student.getName)</code>.</p>\n\n<p>My question is how do I set my <code>Radio button</code> automatically (my radio button is Male or Female) when I clicked the field.</p>\n\n<pre><code>enter code here\n\ntableGuest.addMouseListener(new MouseAdapter() {\npublic void mouseClicked(MouseEvent e) {\n    try{\n        int row = tableGuest.getSelectedRow();\n        String guestEdit=(tableGuest.getModel().getValueAt(row,     0).toString());\n\n\n        String query = \"Select guest_id,guest_fname,guest_lname,guest_contact,guest_age,guest_gender,guest_address,guest_email from guest_tbl where guest_id= '\"+guestEdit+\"'\";\n\n    PreparedStatement pst = con.prepareStatement(query);\n    ResultSet rs = pst.executeQuery();\n\n    buttonGroupEdit.add(rdbtnMaleEdit);\n    buttonGroupEdit.add(rdbtnFemaleEdit);\n\n\n                while(rs.next())\n                {\n                    String genderEdit=rs.getString(\"guest_gender\"); \n\n                    if(genderEdit.equals(\"Male\"))\n                    {\n                         rdbtnMaleEdit.setSelected(true); \n                    }\n                    else if(genderEdit.equals(\"Female\"))\n                    {\n                         rdbtnFemaleEdit.setSelected(true);\n                    }\n                    else\n                    {\n                    JOptionPane.showMessageDialog(null, \"error !\");\n                    }\n\n\n                    tfEditFname.setText(rs.getString(\"guest_fname\"));\n                    tfEditLname.setText(rs.getString(\"guest_lname\"));\n                    tfEditEmail.setText(rs.getString(\"guest_email\"));\n\n                    tfEditContact.setText(rs.getString(\"guest_contact\"))\n                }\n                pst.close();\n\n\n            }catch(Exception ex){\n                ex.printStackTrace();\n            }\n\n        }\n    });\n</code></pre>\n"},{"tags":["java","android","kotlin","rx-java","rx-java2"],"comments":[{"owner":{"account_id":1353955,"reputation":2623,"user_id":1292745,"display_name":"gpunto"},"score":0,"creation_date":1701123094,"post_id":77559889,"comment_id":136733955,"body_markdown":"You can have a `PublishSubject&lt;Unit&gt;` that just signals that you need to fetch data. Then you `concatMap` or `switchMap` it by `remoteDataSource.fetchLatestData()`. You then take the resulting observable and `combineLatest` with `localDataSource`. So `combineLatest(local, subject.concatMap { remote.fetch }) { …`","body":"You can have a <code>PublishSubject&lt;Unit&gt;</code> that just signals that you need to fetch data. Then you <code>concatMap</code> or <code>switchMap</code> it by <code>remoteDataSource.fetchLatestData()</code>. You then take the resulting observable and <code>combineLatest</code> with <code>localDataSource</code>. So <code>combineLatest(local, subject.concatMap { remote.fetch }) { …</code>"}],"answers":[{"tags":[],"owner":{"account_id":16796825,"reputation":1274,"user_id":12143126,"display_name":"Mikhail Guliaev"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1701122531,"creation_date":1701120169,"answer_id":77560010,"question_id":77559889,"body_markdown":"I&#39;ve managed to fix my problem by changing a way to subscribe to the `Observable`, which fetches data from the API. Now I created a new subscriber, end emit data to the `BehaviorSubject` manually. I&#39;m not satisfied with the solution, but nothing better came to my mind:\r\n\r\n    private fun fetchLatestData() {\r\n        disposables += remoteDataSource.fetchLatestData()\r\n            .subscribeOn(Schedulers.io())\r\n            .subscribe({\r\n                remoteDataObservable.onNext(it)\r\n            }, {})\r\n    }\r\n    ","title":"Combine 2 data sources in RxJava with possibility to fetch new data from 1 of the observables","body":"<p>I've managed to fix my problem by changing a way to subscribe to the <code>Observable</code>, which fetches data from the API. Now I created a new subscriber, end emit data to the <code>BehaviorSubject</code> manually. I'm not satisfied with the solution, but nothing better came to my mind:</p>\n<pre><code>private fun fetchLatestData() {\n    disposables += remoteDataSource.fetchLatestData()\n        .subscribeOn(Schedulers.io())\n        .subscribe({\n            remoteDataObservable.onNext(it)\n        }, {})\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":27825993,"reputation":51,"user_id":21245418,"display_name":"rarespalasan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1701120833,"creation_date":1701120833,"answer_id":77560069,"question_id":77559889,"body_markdown":"The problem I see is that your `fetchLatestData` method returns an `Observable`. I would suggest having something like this:\r\n```kotlin\r\n@HiltViewModel\r\nclass MyViewModel @Inject constructor(\r\n    private val remoteDataSource: RemoteDataSource,\r\n    private val localDataSource: LocalDataSource,\r\n) {\r\n\r\n    init {\r\n        disposables += Observable.combineLatest(\r\n            localDataSource.getData(),\r\n            remoteDataSource.data,\r\n            { local, remote -&gt;\r\n                local.plus(remote)\r\n            }\r\n        )\r\n            .subscribeOn(Schedulers.io())\r\n            .observeOn(AndroidSchedulers.mainThread())\r\n            .subscribe {\r\n                displayList(it)\r\n            }\r\n        fetchLatestData()\r\n    }\r\n\r\n    fun onPullToRefresh() {\r\n        fetchLatestData()\r\n    }\r\n    \r\n    private fun fetchLatestData() {\r\n        remoteDataSource.fetchLatestData()\r\n    }\r\n```\r\n\r\nYour `RemoteDataSource` class would look something like this:\r\n\r\n```kotlin\r\nclass RemoteDataSource {\r\n\r\n    val data: BehaviorSubject&lt;List&lt;Data&gt;&gt;\r\n\r\n    fun fetchLatestData() {\r\n        // request the data from remote\r\n        data.onNext(newFetchedData)\r\n    }\r\n}\r\n```","title":"Combine 2 data sources in RxJava with possibility to fetch new data from 1 of the observables","body":"<p>The problem I see is that your <code>fetchLatestData</code> method returns an <code>Observable</code>. I would suggest having something like this:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>@HiltViewModel\nclass MyViewModel @Inject constructor(\n    private val remoteDataSource: RemoteDataSource,\n    private val localDataSource: LocalDataSource,\n) {\n\n    init {\n        disposables += Observable.combineLatest(\n            localDataSource.getData(),\n            remoteDataSource.data,\n            { local, remote -&gt;\n                local.plus(remote)\n            }\n        )\n            .subscribeOn(Schedulers.io())\n            .observeOn(AndroidSchedulers.mainThread())\n            .subscribe {\n                displayList(it)\n            }\n        fetchLatestData()\n    }\n\n    fun onPullToRefresh() {\n        fetchLatestData()\n    }\n    \n    private fun fetchLatestData() {\n        remoteDataSource.fetchLatestData()\n    }\n</code></pre>\n<p>Your <code>RemoteDataSource</code> class would look something like this:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>class RemoteDataSource {\n\n    val data: BehaviorSubject&lt;List&lt;Data&gt;&gt;\n\n    fun fetchLatestData() {\n        // request the data from remote\n        data.onNext(newFetchedData)\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":16796825,"reputation":1274,"user_id":12143126,"display_name":"Mikhail Guliaev"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77560010,"answer_count":2,"score":1,"last_activity_date":1701122531,"creation_date":1701118574,"question_id":77559889,"body_markdown":"I&#39;m currently working on an Android app where I&#39;m using RxJava in a ViewModel to handle data from both a local Room database and a remote API (Retrofit). I have implemented a pull-to-refresh feature, and in the `onRefresh` method, I&#39;m currently creating a new observable to fetch data from the remote API.\r\n\r\nThe problem is I want the combined observable to be triggered when user does pull-to-refresh, but it&#39;s not triggered. \r\n\r\nWhat may be the issue?\r\n\r\n    @HiltViewModel\r\n    class MyViewModel @Inject constructor(\r\n        private val remoteDataSource: RemoteDataSource,\r\n        private val localDataSource: LocalDataSource,\r\n    ) {\r\n    \r\n        private val remoteDataObservable = BehaviorSubject.createDefault&lt;List&lt;Data&gt;&gt;(emptyList())\r\n    \r\n        init {\r\n            disposables += Observable.combineLatest(\r\n                localDataSource.getData(),\r\n                remoteDataObservable,\r\n                { local, remote -&gt;\r\n                    local.plus(remote)\r\n                }\r\n            )\r\n                .subscribeOn(Schedulers.io())\r\n                .observeOn(AndroidSchedulers.mainThread())\r\n                .subscribe {\r\n                    displayList(it)\r\n                }\r\n            fetchLatestData()\r\n        }\r\n    \r\n        fun onPullToRefresh() {\r\n            fetchLatestData()\r\n        }\r\n        \r\n        private fun fetchLatestData() {\r\n            remoteDataSource.fetchLatestData()\r\n                .subscribeOn(Schedulers.io())\r\n                .subscribe(remoteDataObservable)\r\n        }\r\n    \r\n        private fun displayList(list: List&lt;Data&gt;) {\r\n            // Display list\r\n        }\r\n    \r\n    }","title":"Combine 2 data sources in RxJava with possibility to fetch new data from 1 of the observables","body":"<p>I'm currently working on an Android app where I'm using RxJava in a ViewModel to handle data from both a local Room database and a remote API (Retrofit). I have implemented a pull-to-refresh feature, and in the <code>onRefresh</code> method, I'm currently creating a new observable to fetch data from the remote API.</p>\n<p>The problem is I want the combined observable to be triggered when user does pull-to-refresh, but it's not triggered.</p>\n<p>What may be the issue?</p>\n<pre><code>@HiltViewModel\nclass MyViewModel @Inject constructor(\n    private val remoteDataSource: RemoteDataSource,\n    private val localDataSource: LocalDataSource,\n) {\n\n    private val remoteDataObservable = BehaviorSubject.createDefault&lt;List&lt;Data&gt;&gt;(emptyList())\n\n    init {\n        disposables += Observable.combineLatest(\n            localDataSource.getData(),\n            remoteDataObservable,\n            { local, remote -&gt;\n                local.plus(remote)\n            }\n        )\n            .subscribeOn(Schedulers.io())\n            .observeOn(AndroidSchedulers.mainThread())\n            .subscribe {\n                displayList(it)\n            }\n        fetchLatestData()\n    }\n\n    fun onPullToRefresh() {\n        fetchLatestData()\n    }\n    \n    private fun fetchLatestData() {\n        remoteDataSource.fetchLatestData()\n            .subscribeOn(Schedulers.io())\n            .subscribe(remoteDataObservable)\n    }\n\n    private fun displayList(list: List&lt;Data&gt;) {\n        // Display list\n    }\n\n}\n</code></pre>\n"},{"tags":["java","gradle","push-notification","pem","web-push"],"answers":[{"tags":[],"owner":{"account_id":9951181,"reputation":710,"user_id":7363751,"accept_rate":71,"display_name":"Harish Karthick"},"down_vote_count":14,"up_vote_count":10,"is_accepted":false,"score":-4,"last_activity_date":1616668673,"creation_date":1537790690,"answer_id":52479032,"question_id":49273023,"body_markdown":"Found solution here https://github.com/jaegertracing/jaeger-client-java/issues/202 \r\nUse the below command.\r\n&gt; ./gradlew assemble -x signArchives\r\n\r\n","title":"Gradle build configured signatory","body":"<p>Found solution here <a href=\"https://github.com/jaegertracing/jaeger-client-java/issues/202\" rel=\"nofollow noreferrer\">https://github.com/jaegertracing/jaeger-client-java/issues/202</a>\nUse the below command.</p>\n<blockquote>\n<p>./gradlew assemble -x signArchives</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":146433,"reputation":50504,"user_id":356895,"accept_rate":66,"display_name":"JJD"},"down_vote_count":1,"up_vote_count":13,"is_accepted":false,"score":12,"last_activity_date":1632044649,"creation_date":1618518882,"answer_id":67115705,"question_id":49273023,"body_markdown":"Quoting the [Signing plugin documentation][1] you should be able to resolve the error when you provide the expected GPG variables in the *gradle.properties* file in your *HOME* directory:\r\n\r\n&lt;!-- language-all: lang-groovy --&gt;\r\n\r\n    # File location: ~/.gradle/gradle.properties - see https://docs.gradle.org/current/userguide/directory_layout.html\r\n    signing.keyId=24875D73\r\n    signing.password=secret\r\n    signing.secretKeyRingFile=/Users/me/.gnupg/secring.gpg\r\n\r\nGradle resp. the Signing plugin will automatically pick them up in the build process.\r\n\r\n\r\n  [1]: https://docs.gradle.org/current/userguide/signing_plugin.html#sec:signatory_credentials","title":"Gradle build configured signatory","body":"<p>Quoting the <a href=\"https://docs.gradle.org/current/userguide/signing_plugin.html#sec:signatory_credentials\" rel=\"noreferrer\">Signing plugin documentation</a> you should be able to resolve the error when you provide the expected GPG variables in the <em>gradle.properties</em> file in your <em>HOME</em> directory:</p>\n\n<pre class=\"lang-groovy prettyprint-override\"><code># File location: ~/.gradle/gradle.properties - see https://docs.gradle.org/current/userguide/directory_layout.html\nsigning.keyId=24875D73\nsigning.password=secret\nsigning.secretKeyRingFile=/Users/me/.gnupg/secring.gpg\n</code></pre>\n<p>Gradle resp. the Signing plugin will automatically pick them up in the build process.</p>\n"},{"tags":[],"owner":{"account_id":7300157,"reputation":3873,"user_id":7937498,"display_name":"Itoun"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1627081806,"creation_date":1627081806,"answer_id":68505785,"question_id":49273023,"body_markdown":"I got the same problem and it was because of several things:  \r\n**I didn&#39;t distribute the gpg key to any server;  \r\nI was using inMemory to sign and I shouldn&#39;t**\r\n\r\nthe link of the complete answer with build.gradle file and gradle.properties file: https://stackoverflow.com/a/68505768/7937498","title":"Gradle build configured signatory","body":"<p>I got the same problem and it was because of several things:<br />\n<strong>I didn't distribute the gpg key to any server;<br />\nI was using inMemory to sign and I shouldn't</strong></p>\n<p>the link of the complete answer with build.gradle file and gradle.properties file: <a href=\"https://stackoverflow.com/a/68505768/7937498\">https://stackoverflow.com/a/68505768/7937498</a></p>\n"},{"tags":[],"owner":{"account_id":179293,"reputation":15713,"user_id":411846,"accept_rate":80,"display_name":"centic"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1701121816,"creation_date":1638351373,"answer_id":70181905,"question_id":49273023,"body_markdown":"Another option that does not require a special command-line option is to add the following in your `build.gradle.kts`:\r\n\r\n    signing {\r\n        setRequired {\r\n            // signing is only required if the artifacts are to be published\r\n            gradle.taskGraph.allTasks.any { it.equals( PublishToMavenRepository) }\r\n        }\r\n        ....\r\n\r\nSee e.g. https://github.com/Vampire/command-framework/blob/master/buildSrc/src/main/kotlin/net/kautler/publishing.gradle.kts#L157\r\n\r\nOr Groovy (`build.gradle`):\r\n\r\n    signing {\r\n        required {\r\n            // signing is only required if the artifacts are to be published\r\n            gradle.taskGraph.hasTask(&quot;publishToMavenRepository&quot;)\r\n        }\r\n        ....\r\n","title":"Gradle build configured signatory","body":"<p>Another option that does not require a special command-line option is to add the following in your <code>build.gradle.kts</code>:</p>\n<pre><code>signing {\n    setRequired {\n        // signing is only required if the artifacts are to be published\n        gradle.taskGraph.allTasks.any { it.equals( PublishToMavenRepository) }\n    }\n    ....\n</code></pre>\n<p>See e.g. <a href=\"https://github.com/Vampire/command-framework/blob/master/buildSrc/src/main/kotlin/net/kautler/publishing.gradle.kts#L157\" rel=\"nofollow noreferrer\">https://github.com/Vampire/command-framework/blob/master/buildSrc/src/main/kotlin/net/kautler/publishing.gradle.kts#L157</a></p>\n<p>Or Groovy (<code>build.gradle</code>):</p>\n<pre><code>signing {\n    required {\n        // signing is only required if the artifacts are to be published\n        gradle.taskGraph.hasTask(&quot;publishToMavenRepository&quot;)\n    }\n    ....\n</code></pre>\n"}],"owner":{"account_id":3336633,"reputation":383,"user_id":2804023,"accept_rate":75,"display_name":"Daniel Freeman"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9936,"favorite_count":0,"down_vote_count":0,"up_vote_count":17,"answer_count":4,"score":17,"last_activity_date":1701121816,"creation_date":1521016749,"question_id":49273023,"body_markdown":"I&#39;m looking at the [webpush-java][1] code.  I run into a problem attempting to build the project using gradle.  (I&#39;m a gradle newbie).\r\n\r\n&gt;    :signArchives FAILED\r\n&gt; \r\n&gt;    FAILURE: Build failed with an exception.\r\n&gt; \r\n&gt;    * What went wrong:    Execution failed for task &#39;:signArchives&#39;.   \r\n&gt; Cannot perform signing task &#39;:signArchives&#39; because it has no\r\n&gt; configured signatory\r\n\r\nI guess that I need to configure a signatory.  How do I do that?\r\n\r\n\r\n  [1]: https://github.com/web-push-libs/webpush-java","title":"Gradle build configured signatory","body":"<p>I'm looking at the <a href=\"https://github.com/web-push-libs/webpush-java\" rel=\"noreferrer\">webpush-java</a> code.  I run into a problem attempting to build the project using gradle.  (I'm a gradle newbie).</p>\n\n<blockquote>\n  <p>:signArchives FAILED</p>\n  \n  <p>FAILURE: Build failed with an exception.</p>\n  \n  <ul>\n  <li>What went wrong:    Execution failed for task ':signArchives'.<br>\n  Cannot perform signing task ':signArchives' because it has no\n  configured signatory</li>\n  </ul>\n</blockquote>\n\n<p>I guess that I need to configure a signatory.  How do I do that?</p>\n"},{"tags":["java","servlets","connection","timeout"],"owner":{"account_id":52561,"reputation":1633,"user_id":157080,"accept_rate":71,"display_name":"John"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":1,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":0,"score":-1,"last_activity_date":1701121745,"creation_date":1701108847,"question_id":77559086,"body_markdown":"I&#39;m having a problem with a Java servlet that that fetches 3rd-party web content.\r\n\r\nMy website gathers weather data from 3rd-party web servers.\r\nFor 3rd-party web servers that support CORS, I just fetch the data directly in the browser client using javascript.\r\nFor 3rd-party web servers that *don&#39;t* support CORS, I use a workaround: first I talk to my own servlet, which fetches the 3rd-party data and stores it in a temp file, and then I serve the temp file.\r\n\r\nRecently, I&#39;ve started to experience failures with URLs that don&#39;t support CORS, and thus are fetched using my servlet:\r\n\r\nExample URLs that fail in prod:\r\n- https://weather.gc.ca/rss/city/pe-5_e.xml\r\n- https://dd.weather.gc.ca/radar/PRECIPET/GIF/CASGO/\r\n\r\nThe stack trace occurs in my servlet code here:\r\n\r\nhttps://github.com/johanley/astro/blob/master/WEB-INF/classes/astro/WebPageFetcher.java#L116\r\n\r\n**In prod only**, the connection times out. Example from the log:\r\n\r\n27-Nov-2023 00:32:00.295 SEVERE [ajp-nio-127.0.0.1-33027-exec-4] astro.WebPageFetcher.webFetch2 Cannot open connection to https://dd.weather.gc.ca/radar/PRECIPET/GIF/CASGO/ \r\n\r\nNote that \r\n- **prod fails, but running locally does not**\r\n- there have been no recent changes in my servlet code\r\n- prod: Tomcat 9.0.82, using JDK 13.0.2\r\n- local: Tomcat 9.0.41, using JDK 13.33 \r\n\r\n\r\nWhat could cause this servlet code to fail in prod, but succeed when run locally?\r\n\r\n  [1]: http://astronomytonight.net\r\n  [2]: https://github.com/johanley/astro/blob/master/WEB-INF/classes/astro/WebPageFetcher.java#L78","title":"Java servlet fails to fetch data from 3rd party web servers","body":"<p>I'm having a problem with a Java servlet that that fetches 3rd-party web content.</p>\n<p>My website gathers weather data from 3rd-party web servers.\nFor 3rd-party web servers that support CORS, I just fetch the data directly in the browser client using javascript.\nFor 3rd-party web servers that <em>don't</em> support CORS, I use a workaround: first I talk to my own servlet, which fetches the 3rd-party data and stores it in a temp file, and then I serve the temp file.</p>\n<p>Recently, I've started to experience failures with URLs that don't support CORS, and thus are fetched using my servlet:</p>\n<p>Example URLs that fail in prod:</p>\n<ul>\n<li><a href=\"https://weather.gc.ca/rss/city/pe-5_e.xml\" rel=\"nofollow noreferrer\">https://weather.gc.ca/rss/city/pe-5_e.xml</a></li>\n<li><a href=\"https://dd.weather.gc.ca/radar/PRECIPET/GIF/CASGO/\" rel=\"nofollow noreferrer\">https://dd.weather.gc.ca/radar/PRECIPET/GIF/CASGO/</a></li>\n</ul>\n<p>The stack trace occurs in my servlet code here:</p>\n<p><a href=\"https://github.com/johanley/astro/blob/master/WEB-INF/classes/astro/WebPageFetcher.java#L116\" rel=\"nofollow noreferrer\">https://github.com/johanley/astro/blob/master/WEB-INF/classes/astro/WebPageFetcher.java#L116</a></p>\n<p><strong>In prod only</strong>, the connection times out. Example from the log:</p>\n<p>27-Nov-2023 00:32:00.295 SEVERE [ajp-nio-127.0.0.1-33027-exec-4] astro.WebPageFetcher.webFetch2 Cannot open connection to <a href=\"https://dd.weather.gc.ca/radar/PRECIPET/GIF/CASGO/\" rel=\"nofollow noreferrer\">https://dd.weather.gc.ca/radar/PRECIPET/GIF/CASGO/</a></p>\n<p>Note that</p>\n<ul>\n<li><strong>prod fails, but running locally does not</strong></li>\n<li>there have been no recent changes in my servlet code</li>\n<li>prod: Tomcat 9.0.82, using JDK 13.0.2</li>\n<li>local: Tomcat 9.0.41, using JDK 13.33</li>\n</ul>\n<p>What could cause this servlet code to fail in prod, but succeed when run locally?</p>\n"},{"tags":["java","android","json","kotlin","gson"],"answers":[{"tags":[],"owner":{"account_id":5384013,"reputation":6035,"user_id":4288506,"accept_rate":77,"display_name":"Marcono1234"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1701121014,"creation_date":1667685668,"answer_id":74331785,"question_id":74321188,"body_markdown":"The problem is that for your `decodeFunctionReturnValue` function the type parameter `T` is not `reified`. Therefore at runtime the `TypeToken` you are creating is actually &lt;code&gt;TypeToken&amp;lt;JsonFunctionReturnValueData&amp;lt;**Object**&amp;gt;&amp;gt;&lt;/code&gt;. When deserializing `Object`, Gson creates based on the JSON data standard objects, for a JSON object that is a Java `Map` (and Gson&#39;s internal implementation is `LinkedTreeMap`).\r\n\r\nSo if possible the solution would be to make the type parameter `T` here `reified` as well. If that is not possible, maybe the type can be passed as separate `TypeToken` parameter to the function.\r\n\r\n---\r\n\r\nFuture Gson versions (&gt; 2.10.1) will throw an exception when a `TypeToken` captures a type variable and will therefore allow you to indentify such issues earlier. The [Troubleshooting Guide](https://github.com/google/gson/blob/main/Troubleshooting.md#typetoken-type-variable) contains additional information and workarounds.","title":"Convert to custom class using GSON and Generics with Kotlin in XPLPC project","body":"<p>The problem is that for your <code>decodeFunctionReturnValue</code> function the type parameter <code>T</code> is not <code>reified</code>. Therefore at runtime the <code>TypeToken</code> you are creating is actually <code>TypeToken&lt;JsonFunctionReturnValueData&lt;<strong>Object</strong>&gt;&gt;</code>. When deserializing <code>Object</code>, Gson creates based on the JSON data standard objects, for a JSON object that is a Java <code>Map</code> (and Gson's internal implementation is <code>LinkedTreeMap</code>).</p>\n<p>So if possible the solution would be to make the type parameter <code>T</code> here <code>reified</code> as well. If that is not possible, maybe the type can be passed as separate <code>TypeToken</code> parameter to the function.</p>\n<hr />\n<p>Future Gson versions (&gt; 2.10.1) will throw an exception when a <code>TypeToken</code> captures a type variable and will therefore allow you to indentify such issues earlier. The <a href=\"https://github.com/google/gson/blob/main/Troubleshooting.md#typetoken-type-variable\" rel=\"nofollow noreferrer\">Troubleshooting Guide</a> contains additional information and workarounds.</p>\n"}],"owner":{"account_id":26618117,"reputation":5,"user_id":20237223,"display_name":"Paulo Coutinho"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":313,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74331785,"answer_count":1,"score":0,"last_activity_date":1701121014,"creation_date":1667584522,"question_id":74321188,"body_markdown":"I have a problem that appear be simple, but im making something wrong.\r\n\r\nHow i can convert from a generic class with reified using GSON and Kotlin in my project called XPLPC?\r\n\r\nThe error is here:\r\nhttps://github.com/xplpc/xplpc/actions/runs/3395808126/jobs/5646151499#step:9:503\r\n\r\n```\r\ncom.xplpc.library.TodoTest &gt; singleItem[test(AVD) - 12] FAILED \r\n\tjava.lang.ClassCastException: com.google.gson.internal.LinkedTreeMap cannot be cast to com.xplpc.library.TodoTest$Todo\r\n\tat com.xplpc.library.TodoTest.singleItem(TodoTest.kt:44)\r\n```\r\n\r\nIt don&#39;t understand that i want convert to Todo class instead of LinkedTreeMap.\r\n\r\nThe code is here:\r\nhttps://github.com/xplpc/xplpc/blob/main/kotlin/lib/library/src/main/java/com/xplpc/serializer/JsonSerializer.kt#L66-L79\r\n\r\nAnd the code is called by this function:\r\nhttps://github.com/xplpc/xplpc/blob/main/kotlin/lib/library/src/main/java/com/xplpc/client/RemoteClient.kt#L14-L27\r\n\r\nBasically the code is:\r\n\r\n```\r\n// Part 1\r\nobject RemoteClient {\r\n    inline fun &lt;reified T&gt; call(request: Request, defValue: T? = null): T? {\r\n        try {\r\n            val data = PlatformProxy.call(request.data)\r\n            println(data)\r\n            return XPLPC.config.serializer.decodeFunctionReturnValue&lt;T&gt;(data)\r\n        } catch (e: Exception) {\r\n            Log.e(\r\n                Constants.LOG_GROUP,\r\n                &quot;[RemoteClient : call] Error when try to decode return value: ${e.message}&quot;\r\n            )\r\n        }\r\n\r\n        return defValue\r\n    }\r\n\r\n    inline fun &lt;reified T&gt; callAsync(request: Request, defValue: T? = null): Deferred&lt;T?&gt; {\r\n        return CoroutineScope(Dispatchers.IO).async {\r\n            return@async call&lt;T&gt;(request, defValue)\r\n        }\r\n    }\r\n}\r\n\r\n// Part 2\r\noverride fun &lt;T&gt; decodeFunctionReturnValue(data: String): T? {\r\n    try {\r\n        val type = object : TypeToken&lt;JsonFunctionReturnValueData&lt;T&gt;&gt;() {}.type\r\n        val gson = createGson()\r\n        return gson.fromJson&lt;JsonFunctionReturnValueData&lt;T&gt;&gt;(data, type).r\r\n    } catch (e: Exception) {\r\n        Log.e(\r\n            Constants.LOG_GROUP,\r\n            &quot;[JsonSerializer : decodeFunctionReturnValue] Error when parse json: ${e.message}&quot;\r\n        )\r\n    }\r\n\r\n    return null\r\n}\r\n```","title":"Convert to custom class using GSON and Generics with Kotlin in XPLPC project","body":"<p>I have a problem that appear be simple, but im making something wrong.</p>\n<p>How i can convert from a generic class with reified using GSON and Kotlin in my project called XPLPC?</p>\n<p>The error is here:\n<a href=\"https://github.com/xplpc/xplpc/actions/runs/3395808126/jobs/5646151499#step:9:503\" rel=\"nofollow noreferrer\">https://github.com/xplpc/xplpc/actions/runs/3395808126/jobs/5646151499#step:9:503</a></p>\n<pre><code>com.xplpc.library.TodoTest &gt; singleItem[test(AVD) - 12] FAILED \n    java.lang.ClassCastException: com.google.gson.internal.LinkedTreeMap cannot be cast to com.xplpc.library.TodoTest$Todo\n    at com.xplpc.library.TodoTest.singleItem(TodoTest.kt:44)\n</code></pre>\n<p>It don't understand that i want convert to Todo class instead of LinkedTreeMap.</p>\n<p>The code is here:\n<a href=\"https://github.com/xplpc/xplpc/blob/main/kotlin/lib/library/src/main/java/com/xplpc/serializer/JsonSerializer.kt#L66-L79\" rel=\"nofollow noreferrer\">https://github.com/xplpc/xplpc/blob/main/kotlin/lib/library/src/main/java/com/xplpc/serializer/JsonSerializer.kt#L66-L79</a></p>\n<p>And the code is called by this function:\n<a href=\"https://github.com/xplpc/xplpc/blob/main/kotlin/lib/library/src/main/java/com/xplpc/client/RemoteClient.kt#L14-L27\" rel=\"nofollow noreferrer\">https://github.com/xplpc/xplpc/blob/main/kotlin/lib/library/src/main/java/com/xplpc/client/RemoteClient.kt#L14-L27</a></p>\n<p>Basically the code is:</p>\n<pre><code>// Part 1\nobject RemoteClient {\n    inline fun &lt;reified T&gt; call(request: Request, defValue: T? = null): T? {\n        try {\n            val data = PlatformProxy.call(request.data)\n            println(data)\n            return XPLPC.config.serializer.decodeFunctionReturnValue&lt;T&gt;(data)\n        } catch (e: Exception) {\n            Log.e(\n                Constants.LOG_GROUP,\n                &quot;[RemoteClient : call] Error when try to decode return value: ${e.message}&quot;\n            )\n        }\n\n        return defValue\n    }\n\n    inline fun &lt;reified T&gt; callAsync(request: Request, defValue: T? = null): Deferred&lt;T?&gt; {\n        return CoroutineScope(Dispatchers.IO).async {\n            return@async call&lt;T&gt;(request, defValue)\n        }\n    }\n}\n\n// Part 2\noverride fun &lt;T&gt; decodeFunctionReturnValue(data: String): T? {\n    try {\n        val type = object : TypeToken&lt;JsonFunctionReturnValueData&lt;T&gt;&gt;() {}.type\n        val gson = createGson()\n        return gson.fromJson&lt;JsonFunctionReturnValueData&lt;T&gt;&gt;(data, type).r\n    } catch (e: Exception) {\n        Log.e(\n            Constants.LOG_GROUP,\n            &quot;[JsonSerializer : decodeFunctionReturnValue] Error when parse json: ${e.message}&quot;\n        )\n    }\n\n    return null\n}\n</code></pre>\n"},{"tags":["java","design-patterns","equals-operator"],"comments":[{"owner":{"account_id":13010,"reputation":6750,"user_id":25909,"accept_rate":87,"display_name":"flash"},"score":3,"creation_date":1349937983,"post_id":12833654,"comment_id":17362885,"body_markdown":"Have a look at this: http://www.artima.com/lejava/articles/equality.html","body":"Have a look at this: <a href=\"http://www.artima.com/lejava/articles/equality.html\" rel=\"nofollow noreferrer\">artima.com/lejava/articles/equality.html</a>"},{"owner":{"account_id":294406,"reputation":24602,"user_id":598289,"accept_rate":85,"display_name":"SJuan76"},"score":0,"creation_date":1349938257,"post_id":12833654,"comment_id":17362980,"body_markdown":"I was about to post the same link. Put special attention to #4, because it is often overlooked in other articles.","body":"I was about to post the same link. Put special attention to #4, because it is often overlooked in other articles."}],"answers":[{"tags":[],"owner":{"account_id":351195,"reputation":15829,"user_id":687514,"display_name":"Anders R. Bystrup"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1349938035,"creation_date":1349938035,"answer_id":12833731,"question_id":12833654,"body_markdown":"It is pretty much up to yourself to decide when two object are &quot;the same&quot; in a certain sense... Should they be equal when they contain the same data (perfectly valid usecase) or more strictly when they are the same physical object in memory (also valid) or just the same row in a DB when compared in a clustered environment?\r\n\r\nJust remember to also override `.hashCode()` or you&#39;re in for a world of hurt :-)\r\n\r\n(Also, good article suggestions from @Andreas and @flash.)\r\n\r\nCheers,","title":"Implementation equals() method design pattern","body":"<p>It is pretty much up to yourself to decide when two object are \"the same\" in a certain sense... Should they be equal when they contain the same data (perfectly valid usecase) or more strictly when they are the same physical object in memory (also valid) or just the same row in a DB when compared in a clustered environment?</p>\n\n<p>Just remember to also override <code>.hashCode()</code> or you're in for a world of hurt :-)</p>\n\n<p>(Also, good article suggestions from @Andreas and @flash.)</p>\n\n<p>Cheers,</p>\n"},{"tags":[],"owner":{"account_id":1764995,"reputation":36209,"user_id":1611055,"accept_rate":91,"display_name":"Andreas Fester"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1349938043,"creation_date":1349938043,"answer_id":12833734,"question_id":12833654,"body_markdown":"Maybe this helps: [Implementing equals][1]. Especially be aware of the close relationship betweeen hashcode() and equals(). Other than that, I suppose the concrete implementation of equals() really depends on your class design, means when do you treat two objects equal.\r\n\r\n  [1]: http://www.javapractices.com/topic/TopicAction.do?Id=17","title":"Implementation equals() method design pattern","body":"<p>Maybe this helps: <a href=\"http://www.javapractices.com/topic/TopicAction.do?Id=17\" rel=\"nofollow\">Implementing equals</a>. Especially be aware of the close relationship betweeen hashcode() and equals(). Other than that, I suppose the concrete implementation of equals() really depends on your class design, means when do you treat two objects equal.</p>\n"},{"tags":[],"owner":{"account_id":1885169,"reputation":34027,"user_id":1704529,"display_name":"Yogendra Singh"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1349938086,"creation_date":1349938086,"answer_id":12833742,"question_id":12833654,"body_markdown":"Not sure about your expectation. `equals()` is meant for defining your criteria of comparing two **different** objects of your class for equality.  \r\n\r\nIn general, you compare each attribute one by one but its very much possible and supported that you do the comparison using fewer selected attributes only. ","title":"Implementation equals() method design pattern","body":"<p>Not sure about your expectation. <code>equals()</code> is meant for defining your criteria of comparing two <strong>different</strong> objects of your class for equality.  </p>\n\n<p>In general, you compare each attribute one by one but its very much possible and supported that you do the comparison using fewer selected attributes only. </p>\n"},{"tags":[],"owner":{"account_id":1064228,"reputation":16042,"user_id":1065180,"accept_rate":92,"display_name":"Nandkumar Tekale"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1349938135,"creation_date":1349938135,"answer_id":12833749,"question_id":12833654,"body_markdown":"Generally to implement equals() method, what I do is : I generate those from Eclipse as Eclipse can generate hashCode, toString and equals() methods very well.","title":"Implementation equals() method design pattern","body":"<p>Generally to implement equals() method, what I do is : I generate those from Eclipse as Eclipse can generate hashCode, toString and equals() methods very well.</p>\n"},{"tags":[],"owner":{"account_id":1926913,"reputation":95,"user_id":1737117,"display_name":"dvsander"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1349938464,"creation_date":1349938464,"answer_id":12833849,"question_id":12833654,"body_markdown":"I always use following code:\r\n\r\n    if (null == obj) return false;\r\n    if (this == obj) return true;\r\n    if (!(object instanceof MyClass)) return false;\r\n    MyClass that = (MyClass) obj;\r\n    EqualsBuilder eb = new EqualsBuilder();\r\n    eb.append(this.businessKey, that.businessKey);\r\n    return eb.isEquals();\r\n\r\n...\r\n\r\nI never use technical keys like sequences or pk&#39;s, always business fields.\r\nTherefore I don&#39;t believe this can be made generic but must be made specific to any given Class.","title":"Implementation equals() method design pattern","body":"<p>I always use following code:</p>\n\n<pre><code>if (null == obj) return false;\nif (this == obj) return true;\nif (!(object instanceof MyClass)) return false;\nMyClass that = (MyClass) obj;\nEqualsBuilder eb = new EqualsBuilder();\neb.append(this.businessKey, that.businessKey);\nreturn eb.isEquals();\n</code></pre>\n\n<p>...</p>\n\n<p>I never use technical keys like sequences or pk's, always business fields.\nTherefore I don't believe this can be made generic but must be made specific to any given Class.</p>\n"},{"tags":[],"owner":{"account_id":1344625,"reputation":3248,"user_id":1285615,"accept_rate":55,"display_name":"sakthisundar"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1349938672,"creation_date":1349938672,"answer_id":12833894,"question_id":12833654,"body_markdown":"Look at what [Java Language Specification][1] got to say.\r\n\r\n&gt;  `equals` method just defines the notion of object equality\r\n\r\nApart from that there is no design pattern involved in designing this method. The truth is that `equals` method is already designed by Java language designers and you can only make use of the design. If you are not confident of how to write your own equals method, consider taking the help of IDE&#39;s like eclipse which does the job for you.\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.3.2","title":"Implementation equals() method design pattern","body":"<p>Look at what <a href=\"http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.3.2\" rel=\"nofollow\">Java Language Specification</a> got to say.</p>\n\n<blockquote>\n  <p><code>equals</code> method just defines the notion of object equality</p>\n</blockquote>\n\n<p>Apart from that there is no design pattern involved in designing this method. The truth is that <code>equals</code> method is already designed by Java language designers and you can only make use of the design. If you are not confident of how to write your own equals method, consider taking the help of IDE's like eclipse which does the job for you.</p>\n"},{"tags":[],"owner":{"account_id":234754,"reputation":5730,"user_id":501113,"accept_rate":90,"display_name":"chaotic3quilibrium"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701121005,"creation_date":1675966946,"answer_id":75402885,"question_id":12833654,"body_markdown":"Regarding adding `equals` and `hashCode` for **JPA/Hibernate entities**, please see this [StackOverflow Answer][1]. \r\n\r\n----------\r\n\r\nThe code pattern recommended below depends upon the new `instanceof` pattern matching functionality released for **preview in Java 14** (2020/Mar/17), and then **fully released in Java 16** (2021/Mar/16).\r\n\r\n----------\r\n\r\nI really dislike seeing explicit uses of `true` and `false`, especially when they fall directly out of evaluated logic.\r\n\r\nSo, I am not at all fond of the default code pattern generated by my IDE (IntelliJ) when overriding and implementing `equals()` in my classes.\r\n\r\nIt looks like this:\r\n```java\r\n//Legacy laden pattern produced by IntelliJ code generator\r\npublic boolean equals(Object o) {\r\n  if (this == o) {\r\n    return true;\r\n  }\r\n  if (o == null || getClass() != o.getClass()) {\r\n    return false;\r\n  }\r\n  EqualsExampleClass that = (EqualsExampleClass) o;\r\n  return Objects.equals(stringy, that.stringy)\r\n      &amp;&amp; (inty == that.inty)\r\n      &amp;&amp; Objects.equals(bigIntegery, that.bigIntegery)\r\n      &amp;&amp; (booleany == that.booleany);\r\n}\r\n```\r\n\r\nEncouraged by [Oracle JEP 394][2] for the `instanceof` pattern matching, I&#39;ve refactored the above code to look like this:\r\n```java\r\n//Modern flowing fluent style\r\n@Override\r\npublic boolean equals(Object o) {\r\n  return (this == o) ||\r\n      ((o instanceof EqualsExampleClass that)\r\n          &amp;&amp; (this.getClass() == that.getClass())\r\n          &amp;&amp; Objects.equals(this.stringy, that.stringy)\r\n          &amp;&amp; (this.inty == that.inty)\r\n          &amp;&amp; Objects.equals(this.bigInt, that.bigInt)\r\n          &amp;&amp; (this.booleany == that.booleany));\r\n}\r\n```\r\nPer line execution details:\r\n\r\n1. `(this == o)` - checks for literally the same instance\r\n2. `(o instanceof EqualsExampleClass that)` - check to make sure `o` is not `null`, `o` is an instance of this class (or an descendant), and if so, assign `o` to the narrowed type variable `that`\r\n3. `(this.getClass() == that.getClass())` - requires the comparison is to the exact same class (and not a descendant), and is optional if, and only if, the class is `final`\r\n4. `Objects.equals(this.stringy, that.stringy)` - is using `Objects.equals()` on references (not primitives) to ensure if either side returns a `null`, the comparison is made without throwing a `NullPointerException`\r\n\r\nI have found this code implementation pattern is considerably easier to functional flow read, analyze, reason about, and debug, during a refactoring pass.\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/77091598/501113\r\n  [2]: https://openjdk.org/jeps/394","title":"Implementation equals() method design pattern","body":"<p>Regarding adding <code>equals</code> and <code>hashCode</code> for <strong>JPA/Hibernate entities</strong>, please see this <a href=\"https://stackoverflow.com/a/77091598/501113\">StackOverflow Answer</a>.</p>\n<hr />\n<p>The code pattern recommended below depends upon the new <code>instanceof</code> pattern matching functionality released for <strong>preview in Java 14</strong> (2020/Mar/17), and then <strong>fully released in Java 16</strong> (2021/Mar/16).</p>\n<hr />\n<p>I really dislike seeing explicit uses of <code>true</code> and <code>false</code>, especially when they fall directly out of evaluated logic.</p>\n<p>So, I am not at all fond of the default code pattern generated by my IDE (IntelliJ) when overriding and implementing <code>equals()</code> in my classes.</p>\n<p>It looks like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>//Legacy laden pattern produced by IntelliJ code generator\npublic boolean equals(Object o) {\n  if (this == o) {\n    return true;\n  }\n  if (o == null || getClass() != o.getClass()) {\n    return false;\n  }\n  EqualsExampleClass that = (EqualsExampleClass) o;\n  return Objects.equals(stringy, that.stringy)\n      &amp;&amp; (inty == that.inty)\n      &amp;&amp; Objects.equals(bigIntegery, that.bigIntegery)\n      &amp;&amp; (booleany == that.booleany);\n}\n</code></pre>\n<p>Encouraged by <a href=\"https://openjdk.org/jeps/394\" rel=\"nofollow noreferrer\">Oracle JEP 394</a> for the <code>instanceof</code> pattern matching, I've refactored the above code to look like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>//Modern flowing fluent style\n@Override\npublic boolean equals(Object o) {\n  return (this == o) ||\n      ((o instanceof EqualsExampleClass that)\n          &amp;&amp; (this.getClass() == that.getClass())\n          &amp;&amp; Objects.equals(this.stringy, that.stringy)\n          &amp;&amp; (this.inty == that.inty)\n          &amp;&amp; Objects.equals(this.bigInt, that.bigInt)\n          &amp;&amp; (this.booleany == that.booleany));\n}\n</code></pre>\n<p>Per line execution details:</p>\n<ol>\n<li><code>(this == o)</code> - checks for literally the same instance</li>\n<li><code>(o instanceof EqualsExampleClass that)</code> - check to make sure <code>o</code> is not <code>null</code>, <code>o</code> is an instance of this class (or an descendant), and if so, assign <code>o</code> to the narrowed type variable <code>that</code></li>\n<li><code>(this.getClass() == that.getClass())</code> - requires the comparison is to the exact same class (and not a descendant), and is optional if, and only if, the class is <code>final</code></li>\n<li><code>Objects.equals(this.stringy, that.stringy)</code> - is using <code>Objects.equals()</code> on references (not primitives) to ensure if either side returns a <code>null</code>, the comparison is made without throwing a <code>NullPointerException</code></li>\n</ol>\n<p>I have found this code implementation pattern is considerably easier to functional flow read, analyze, reason about, and debug, during a refactoring pass.</p>\n"}],"owner":{"account_id":937533,"reputation":4930,"user_id":966185,"accept_rate":81,"display_name":"Pavel"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1967,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":12833749,"answer_count":7,"score":0,"last_activity_date":1701121005,"creation_date":1349937747,"question_id":12833654,"body_markdown":"Is there any design pattern (or idiom) that helps to implement `equals()` method in Java? &lt;br&gt;&lt;br&gt; That task is&#39;n so hard but in most cases it&#39;s about the same... That&#39;s why I guess that there is a pattern but I didn&#39;t find it.\r\n\r\n    UPDATE\r\n\r\nI chose the method: `generate equals() method in Eclipse` but... I found a good way (in AbstractList) to make that generated code better: \r\n\r\n    if (!(attributes ==null ? other.attributes==null : attributes.equals(other.attributes))) \r\n        return false; \r\n\r\ninstead of generated:\r\n\r\n    if (attributes == null) {\r\n    \t    if (other.attributes != null)\r\n    \t\treturn false;\r\n    \t} else if (!attributes.equals(other.attributes))\r\n    \t    return false;","title":"Implementation equals() method design pattern","body":"<p>Is there any design pattern (or idiom) that helps to implement <code>equals()</code> method in Java? <br><br> That task is'n so hard but in most cases it's about the same... That's why I guess that there is a pattern but I didn't find it.</p>\n\n<pre><code>UPDATE\n</code></pre>\n\n<p>I chose the method: <code>generate equals() method in Eclipse</code> but... I found a good way (in AbstractList) to make that generated code better: </p>\n\n<pre><code>if (!(attributes ==null ? other.attributes==null : attributes.equals(other.attributes))) \n    return false; \n</code></pre>\n\n<p>instead of generated:</p>\n\n<pre><code>if (attributes == null) {\n        if (other.attributes != null)\n        return false;\n    } else if (!attributes.equals(other.attributes))\n        return false;\n</code></pre>\n"},{"tags":["java","jpa","entitymanager"],"comments":[{"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"score":0,"creation_date":1701121528,"post_id":77560016,"comment_id":136733726,"body_markdown":"There is neither an entitymanager nor a call to merge visible in the given code.","body":"There is neither an entitymanager nor a call to merge visible in the given code."},{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1701270471,"post_id":77560016,"comment_id":136755232,"body_markdown":"The logic you&#39;ve posted doesn&#39;t make sense to me. Why stream and filter over actGPs when you&#39;ve just created a new empty list for it?","body":"The logic you&#39;ve posted doesn&#39;t make sense to me. Why stream and filter over actGPs when you&#39;ve just created a new empty list for it?"}],"owner":{"account_id":15601300,"reputation":1,"user_id":11255368,"display_name":"Zeinab Abbas"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":1,"is_answered":false,"view_count":12,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1701120339,"creation_date":1701120233,"question_id":77560016,"body_markdown":"This code is giving an error &quot;Cannot merge an entity that has been removed&quot; \r\nInvoiceDetail has a list of ActGps\r\n\r\nthis code is a snippet code of a function in invoice detail \r\nit is trying to delete an entity where it not must be deleted \r\n\r\n\r\n     // initialize needed fields\r\n    \r\n    List&lt;ActGP&gt; oldActGPs = new ArrayList&lt;&gt;();\r\n    if (actGPs != null &amp;&amp; !actGPs.isEmpty())\r\n    \toldActGPs.addAll(actGPs);\r\n    actGPs = new ArrayList&lt;&gt;();\r\n    \r\n       // get actGP (if exists in visit and not canceled)\r\n    \t\t\t// if exist --&gt; reset fields (reset prices)\r\n    \t\t\t// else --&gt; create new ActGP\r\n    \t\t\tactGP = actGPs.stream().filter(agp -&gt; agp.getVGPId() == vgp.getId()).findAny().orElse(null);\r\n    \r\n    \t\t\tif (actGP == null) {\r\n    \t\t\t\t// case of adding a new act from departments OR add new GP in visit\r\n    \t\t\t\tactGP = createNewActGP(vgp, currAct);\r\n    \r\n    \t\t\t} else {\r\n    \t\t\t\t// actGP exists \r\n    \t\t\t\t// OR case when reCompute method called\r\n    \t\t\t\tactGP.resetPriceFields();\r\n    \t\t\t\tif (!oldActGPs.isEmpty())\r\n    \t\t\t\t\toldActGPs.remove(actGP); // after the for loop we will have in oldActGPs the actGP for canceled GPs\r\n    \t\t\t\tactGP.setGptId(0);\r\n    \t\t \t}\r\n    \r\n      if (!oldActGPs.isEmpty()) {\r\n    \t   for (ActGP a : oldActGPs) {\r\n    \t\t a.setInvoiceDetail(null); // removed from list ==&gt; should be deleted from DB\r\n            }\r\n         }\r\n\r\n","title":"cannot merge an entity that has been removed : actgp","body":"<p>This code is giving an error &quot;Cannot merge an entity that has been removed&quot;\nInvoiceDetail has a list of ActGps</p>\n<p>this code is a snippet code of a function in invoice detail\nit is trying to delete an entity where it not must be deleted</p>\n<pre><code> // initialize needed fields\n\nList&lt;ActGP&gt; oldActGPs = new ArrayList&lt;&gt;();\nif (actGPs != null &amp;&amp; !actGPs.isEmpty())\n    oldActGPs.addAll(actGPs);\nactGPs = new ArrayList&lt;&gt;();\n\n   // get actGP (if exists in visit and not canceled)\n            // if exist --&gt; reset fields (reset prices)\n            // else --&gt; create new ActGP\n            actGP = actGPs.stream().filter(agp -&gt; agp.getVGPId() == vgp.getId()).findAny().orElse(null);\n\n            if (actGP == null) {\n                // case of adding a new act from departments OR add new GP in visit\n                actGP = createNewActGP(vgp, currAct);\n\n            } else {\n                // actGP exists \n                // OR case when reCompute method called\n                actGP.resetPriceFields();\n                if (!oldActGPs.isEmpty())\n                    oldActGPs.remove(actGP); // after the for loop we will have in oldActGPs the actGP for canceled GPs\n                actGP.setGptId(0);\n            }\n\n  if (!oldActGPs.isEmpty()) {\n       for (ActGP a : oldActGPs) {\n         a.setInvoiceDetail(null); // removed from list ==&gt; should be deleted from DB\n        }\n     }\n</code></pre>\n"},{"tags":["java","javafx","metal","openjfx"],"comments":[{"owner":{"account_id":322981,"reputation":310744,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1691041210,"post_id":76825116,"comment_id":135437553,"body_markdown":"Related: [*Is this official description of the JavaFX architecture still valid today, a decade later?*](https://stackoverflow.com/q/76817114/642706)","body":"Related: <a href=\"https://stackoverflow.com/q/76817114/642706\"><i>Is this official description of the JavaFX architecture still valid today, a decade later?</i></a>"}],"answers":[{"tags":[],"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1701119895,"creation_date":1691046698,"answer_id":76825667,"question_id":76825116,"body_markdown":"No.  JavaFX, as of 20, does not use the Apple Metal API.  \r\n\r\nFor [hardware acceleration][1] on Mac, JavaFX uses [OpenGL ES2][2].  It can also fall back to a software renderer, but you have to force it to do that, it will use ES2 by default.\r\n\r\nThere is experimental proof of concept work using the Apple Metal API for JavaFX 3D rendering.  The implementation can be found in this pull request on the jfx-sandbox repository (this is not the mainline repository that is used for JavaFX releases):\r\n\r\n * [8295485: POC for JavaFX Metal - 3D][3]\r\n\r\nThe metal branch in the sandbox has a lot of fairly recent changes:\r\n\r\n * https://github.com/openjdk/jfx-sandbox/commits/metal\r\n\r\nPerhaps in the future, Metal support will be added to JavaFX.  \r\n\r\nIf you have further queries, raise the topic on the [openjfx-dev mailing list][4].\r\n\r\nMain issue tracker for JavaFX Metal support:\r\n\r\n * [JDK-8271024 JavaFX : Implement Metal Rendering Pipeline][5]\r\n\r\n----\r\nThe work done for Metal support on Mac for the JDK as part of [JEP 382][6], as far as I can tell, is only for the [Java2D][7] API.  The Java2D API (as far as I know) is not used by JavaFX, except perhaps to help with printing support.  The Java2D work to support metal can be used by AWT and Swing frameworks that are part of the core JDK.  JavaFX is no longer part of the JDK, so the JEP process does not apply to it.\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Hardware_acceleration\r\n  [2]: https://en.wikipedia.org/wiki/OpenGL_ES\r\n  [3]: https://github.com/openjdk/jfx-sandbox/commit/c3c5aaadff468abdcec838d97ea18f0f26310079\r\n  [4]: https://mail.openjdk.org/mailman/listinfo/openjfx-dev\r\n  [5]: https://bugs.openjdk.org/browse/JDK-8271024\r\n  [6]: https://openjdk.org/jeps/382\r\n  [7]: https://en.wikipedia.org/wiki/Java_2D","title":"Does JavaFX use the new Metal-based rendering for Java on macOS?","body":"<p>No.  JavaFX, as of 20, does not use the Apple Metal API.</p>\n<p>For <a href=\"https://en.wikipedia.org/wiki/Hardware_acceleration\" rel=\"nofollow noreferrer\">hardware acceleration</a> on Mac, JavaFX uses <a href=\"https://en.wikipedia.org/wiki/OpenGL_ES\" rel=\"nofollow noreferrer\">OpenGL ES2</a>.  It can also fall back to a software renderer, but you have to force it to do that, it will use ES2 by default.</p>\n<p>There is experimental proof of concept work using the Apple Metal API for JavaFX 3D rendering.  The implementation can be found in this pull request on the jfx-sandbox repository (this is not the mainline repository that is used for JavaFX releases):</p>\n<ul>\n<li><a href=\"https://github.com/openjdk/jfx-sandbox/commit/c3c5aaadff468abdcec838d97ea18f0f26310079\" rel=\"nofollow noreferrer\">8295485: POC for JavaFX Metal - 3D</a></li>\n</ul>\n<p>The metal branch in the sandbox has a lot of fairly recent changes:</p>\n<ul>\n<li><a href=\"https://github.com/openjdk/jfx-sandbox/commits/metal\" rel=\"nofollow noreferrer\">https://github.com/openjdk/jfx-sandbox/commits/metal</a></li>\n</ul>\n<p>Perhaps in the future, Metal support will be added to JavaFX.</p>\n<p>If you have further queries, raise the topic on the <a href=\"https://mail.openjdk.org/mailman/listinfo/openjfx-dev\" rel=\"nofollow noreferrer\">openjfx-dev mailing list</a>.</p>\n<p>Main issue tracker for JavaFX Metal support:</p>\n<ul>\n<li><a href=\"https://bugs.openjdk.org/browse/JDK-8271024\" rel=\"nofollow noreferrer\">JDK-8271024 JavaFX : Implement Metal Rendering Pipeline</a></li>\n</ul>\n<hr />\n<p>The work done for Metal support on Mac for the JDK as part of <a href=\"https://openjdk.org/jeps/382\" rel=\"nofollow noreferrer\">JEP 382</a>, as far as I can tell, is only for the <a href=\"https://en.wikipedia.org/wiki/Java_2D\" rel=\"nofollow noreferrer\">Java2D</a> API.  The Java2D API (as far as I know) is not used by JavaFX, except perhaps to help with printing support.  The Java2D work to support metal can be used by AWT and Swing frameworks that are part of the core JDK.  JavaFX is no longer part of the JDK, so the JEP process does not apply to it.</p>\n"}],"owner":{"account_id":322981,"reputation":310744,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":154,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":76825667,"answer_count":1,"score":4,"last_activity_date":1701119895,"creation_date":1691040807,"question_id":76825116,"body_markdown":"Do the latest versions (19, 20, etc.) of JavaFX/[OpenJFX][1] use the new [*Metal*](https://en.wikipedia.org/wiki/Metal_(API)) rendering built for Java on macOS, supplanting OpenGL?  \r\n\r\n[*JEP 382: New macOS Rendering Pipeline*](https://openjdk.org/jeps/382)\r\n\r\nThat new pipeline became [the default in Java 19](https://www.oracle.com/java/technologies/javase/19-relnote-issues.html#JDK-8284378).\r\n\r\n\r\n  [1]: https://openjfx.io/","title":"Does JavaFX use the new Metal-based rendering for Java on macOS?","body":"<p>Do the latest versions (19, 20, etc.) of JavaFX/<a href=\"https://openjfx.io/\" rel=\"nofollow noreferrer\">OpenJFX</a> use the new <a href=\"https://en.wikipedia.org/wiki/Metal_(API)\" rel=\"nofollow noreferrer\"><em>Metal</em></a> rendering built for Java on macOS, supplanting OpenGL?</p>\n<p><a href=\"https://openjdk.org/jeps/382\" rel=\"nofollow noreferrer\"><em>JEP 382: New macOS Rendering Pipeline</em></a></p>\n<p>That new pipeline became <a href=\"https://www.oracle.com/java/technologies/javase/19-relnote-issues.html#JDK-8284378\" rel=\"nofollow noreferrer\">the default in Java 19</a>.</p>\n"},{"tags":["java","mapping","mapstruct"],"owner":{"account_id":18044315,"reputation":1227,"user_id":13115701,"display_name":"Paul Marcelin Bejan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1701119475,"creation_date":1701119475,"question_id":77559965,"body_markdown":"I have created a MapperConfig where I have a prototype of mapping method that can be used to inherit method-level mapping annotations.\r\n\r\n    @MapperConfig(componentModel = MappingConstants.ComponentModel.SPRING)\r\n    public interface EmployeeMapperConfig {\r\n    \r\n    \t@Named(&quot;fromRequestToDomain&quot;)\r\n    \t@Mapping(target = &quot;id&quot;, ignore = true)\r\n    \tEmployee fromSaveRequestToEntity(EmployeeSaveRequest saveRequest);\r\n    \t\r\n    }\r\n\r\nI have one mapper that maps single element DTO to ENTITY:\r\n\r\n    @Mapper(config = EmployeeMapperConfig.class)\r\n    public interface EmployeeSaveOneMapper {\r\n    \t\r\n    \t@InheritConfiguration\r\n    \tEmployee toDomain(EmployeeSaveRequest request);\r\n    \t\r\n    }\r\n\r\nbut what if I want to map a List of employee ?\r\n\r\nI have another mapper that maps multiple DTO to ENTITIES:\r\n\r\n    public interface EmployeeSaveManyMapper {\r\n    \t\r\n    \tList&lt;Employee&gt; toDomain(List&lt;EmployeeSaveRequest&gt; request);\r\n    \t\r\n    }\r\n\r\nhow can I inherit configuration for iterable mapping?\r\n\r\nI have tried with the following MapperConfig:\r\n\r\n    @MapperConfig(componentModel = MappingConstants.ComponentModel.SPRING)\r\n    public interface EmployeeMapperConfig {\r\n    \r\n    \t@Named(&quot;fromRequestToDomain&quot;)\r\n    \t@Mapping(target = &quot;id&quot;, ignore = true)\r\n    \tEmployee fromSaveRequestToEntity(EmployeeSaveRequest request);\r\n    \t\r\n    \t@IterableMapping(qualifiedByName = &quot;fromRequestToDomain&quot;)\r\n    \tList&lt;Employee&gt; fromSaveRequestsToEntities(Collection&lt;EmployeeSaveRequest&gt; saveRequests);\r\n    \t\r\n    }\r\n\r\nand the following mapper:\r\n\r\n    @Mapper(config = EmployeeMapperConfig.class)\r\n    public interface EmployeeSaveManyMapper {\r\n    \t\r\n        @InheritConfiguration\r\n    \tList&lt;Employee&gt; toDomain(List&lt;EmployeeSaveRequest&gt; request);\r\n    \t\r\n    }\r\n\r\nP.S. I know that I can do it by using the EmployeeSaveOneMapper, but I was looking for a solution using MapperConfig.\r\n\r\n    @Mapper(componentModel = MappingConstants.ComponentModel.SPRING, uses = EmployeeSaveOneMapper.class)\r\n    public interface EmployeeSaveManyMapper {\r\n    \t\r\n    \t@Override\r\n    \t@IterableMapping(qualifiedByName = &quot;fromRequestToDomain&quot;)\r\n    \tList&lt;Employee&gt; toDomain(List&lt;EmployeeSaveRequest&gt; request);\r\n    \t\r\n    }\r\n\r\n","title":"How to InheritConfiguration from prototype of mapping method of iterable types using Mapstruct?","body":"<p>I have created a MapperConfig where I have a prototype of mapping method that can be used to inherit method-level mapping annotations.</p>\n<pre><code>@MapperConfig(componentModel = MappingConstants.ComponentModel.SPRING)\npublic interface EmployeeMapperConfig {\n\n    @Named(&quot;fromRequestToDomain&quot;)\n    @Mapping(target = &quot;id&quot;, ignore = true)\n    Employee fromSaveRequestToEntity(EmployeeSaveRequest saveRequest);\n    \n}\n</code></pre>\n<p>I have one mapper that maps single element DTO to ENTITY:</p>\n<pre><code>@Mapper(config = EmployeeMapperConfig.class)\npublic interface EmployeeSaveOneMapper {\n    \n    @InheritConfiguration\n    Employee toDomain(EmployeeSaveRequest request);\n    \n}\n</code></pre>\n<p>but what if I want to map a List of employee ?</p>\n<p>I have another mapper that maps multiple DTO to ENTITIES:</p>\n<pre><code>public interface EmployeeSaveManyMapper {\n    \n    List&lt;Employee&gt; toDomain(List&lt;EmployeeSaveRequest&gt; request);\n    \n}\n</code></pre>\n<p>how can I inherit configuration for iterable mapping?</p>\n<p>I have tried with the following MapperConfig:</p>\n<pre><code>@MapperConfig(componentModel = MappingConstants.ComponentModel.SPRING)\npublic interface EmployeeMapperConfig {\n\n    @Named(&quot;fromRequestToDomain&quot;)\n    @Mapping(target = &quot;id&quot;, ignore = true)\n    Employee fromSaveRequestToEntity(EmployeeSaveRequest request);\n    \n    @IterableMapping(qualifiedByName = &quot;fromRequestToDomain&quot;)\n    List&lt;Employee&gt; fromSaveRequestsToEntities(Collection&lt;EmployeeSaveRequest&gt; saveRequests);\n    \n}\n</code></pre>\n<p>and the following mapper:</p>\n<pre><code>@Mapper(config = EmployeeMapperConfig.class)\npublic interface EmployeeSaveManyMapper {\n    \n    @InheritConfiguration\n    List&lt;Employee&gt; toDomain(List&lt;EmployeeSaveRequest&gt; request);\n    \n}\n</code></pre>\n<p>P.S. I know that I can do it by using the EmployeeSaveOneMapper, but I was looking for a solution using MapperConfig.</p>\n<pre><code>@Mapper(componentModel = MappingConstants.ComponentModel.SPRING, uses = EmployeeSaveOneMapper.class)\npublic interface EmployeeSaveManyMapper {\n    \n    @Override\n    @IterableMapping(qualifiedByName = &quot;fromRequestToDomain&quot;)\n    List&lt;Employee&gt; toDomain(List&lt;EmployeeSaveRequest&gt; request);\n    \n}\n</code></pre>\n"},{"tags":["java","oracle","jdbc","connection","timeout"],"comments":[{"owner":{"account_id":1110848,"reputation":3563,"user_id":1101332,"accept_rate":67,"display_name":"sasankad"},"score":0,"creation_date":1394579885,"post_id":22338598,"comment_id":33950015,"body_markdown":"how about setting &quot;DriverManager.setLoginTimeout()&quot; ?","body":"how about setting &quot;DriverManager.setLoginTimeout()&quot; ?"},{"owner":{"account_id":1966695,"reputation":631,"user_id":1766760,"accept_rate":56,"display_name":"user1766760"},"score":0,"creation_date":1394582461,"post_id":22338598,"comment_id":33950945,"body_markdown":"@sasankad I assumed `LoginTimeout` is different than &quot;idle timeout&quot;?","body":"@sasankad I assumed <code>LoginTimeout</code> is different than &quot;idle timeout&quot;?"}],"answers":[{"tags":[],"owner":{"account_id":6228,"reputation":228269,"user_id":10397,"display_name":"Justin Cave"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1394580031,"creation_date":1394580031,"answer_id":22338788,"question_id":22338598,"body_markdown":"I&#39;m not sure that I understand the question you&#39;re asking.\r\n\r\nThe error you are getting indicates that the Oracle user that you are using to connect to the database has a profile configured (in Oracle) that limits the amount of time the connection can be idle.  Oracle is killing your connection when the connection remains idle too long.  Normally, the solution to this sort of problem would be to go to the DBA and ask for the idle time to be increased or to look through your code and see why the connection is open and unused for so long.  If you were using a connection pool (which it doesn&#39;t appear you are), it would make sense for some connections to remain open and idle for long periods of time.  Since it doesn&#39;t appear that you are using a connection pool, the question is whether it makes sense for the application to hold open the connection for long periods of time without doing anything.  If the application opens a connection when the user logs in at 9am and doesn&#39;t close it until the user shuts down at 5pm, it may make sense to adjust the `IDLE_TIME` setting for this user in the database.  Otherwise, you may want to investigate whether it makes logical sense for the application to hold open the database connection so long without doing something or whether the application can be modified to close the connection when it is no longer needed.","title":"JDBC Oracle Thin ORA-02396 Connection idle timeout","body":"<p>I'm not sure that I understand the question you're asking.</p>\n\n<p>The error you are getting indicates that the Oracle user that you are using to connect to the database has a profile configured (in Oracle) that limits the amount of time the connection can be idle.  Oracle is killing your connection when the connection remains idle too long.  Normally, the solution to this sort of problem would be to go to the DBA and ask for the idle time to be increased or to look through your code and see why the connection is open and unused for so long.  If you were using a connection pool (which it doesn't appear you are), it would make sense for some connections to remain open and idle for long periods of time.  Since it doesn't appear that you are using a connection pool, the question is whether it makes sense for the application to hold open the connection for long periods of time without doing anything.  If the application opens a connection when the user logs in at 9am and doesn't close it until the user shuts down at 5pm, it may make sense to adjust the <code>IDLE_TIME</code> setting for this user in the database.  Otherwise, you may want to investigate whether it makes logical sense for the application to hold open the database connection so long without doing something or whether the application can be modified to close the connection when it is no longer needed.</p>\n"}],"owner":{"account_id":1966695,"reputation":631,"user_id":1766760,"accept_rate":56,"display_name":"user1766760"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":11556,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1701118890,"creation_date":1394579280,"question_id":22338598,"body_markdown":"I am supporting some legacy code and it&#39;s chugged along fine until recently.  I am looking for if there is a setting for JDBC Oracle thin connection where I can specify idle timeout via Java (no connection pooling)?  A lot of resources online refer to connection pooling... is it even possible in my case (to specify idle timeout, in a non-pooling situation)?  Or is idle time a setting on the specific DB user account?\r\n\r\n**Updates + Questions**\r\n\r\n1. I was able to log in as the user, and ran a query to try to find out resource limits. `select * from USER_RESOURCE_LIMITS;` However everything came back &quot;UNLIMITED&quot;.  Is it possible for another value (say from the JDBC connection) to override the &quot;UNLIMITED&quot;? \r\n\r\n2. So the job holds onto the connection, while we actively query another system via DB links for a good duration of ~2+ hours... Now, why would the idle timeout even come into play? \r\n\r\n**Update #2**\r\n\r\nWe switched to a different account (that has the same kind of DB link setup) and the job was able to finish like it did before. Which sort of points to something wonky with the Oracle user profile?  But like I said, querying `USER_RESOURCE_LIMITS` shows both users to have &quot;UNLIMITED&quot; idle time. DBA pretty confirmed that too.  What else could be causing this difference? \r\n\r\n**Update #3**\r\n\r\nStack trace and such.\r\n\r\n    java.sql.SQLException: ORA-02396: exceeded maximum idle time, please connect again\r\n    ORA-06512: at line 1\r\n\r\n        at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:125)\r\n        at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:316)\r\n        at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:282)\r\n        at oracle.jdbc.driver.T4C8Oall.receive(T4C8Oall.java:639)\r\n        at oracle.jdbc.driver.T4CCallableStatement.doOall8(T4CCallableStatement.java:184)\r\n        at oracle.jdbc.driver.T4CCallableStatement.execute_for_rows(T4CCallableStatement.java:873)\r\n        at oracle.jdbc.driver.OracleStatement.doExecuteWithTimeout(OracleStatement.java:1086)\r\n        at oracle.jdbc.driver.OraclePreparedStatement.executeInternal(OraclePreparedStatement.java:2984)\r\n        at oracle.jdbc.driver.OraclePreparedStatement.execute(OraclePreparedStatement.java:3076)\r\n        at oracle.jdbc.driver.OracleCallableStatement.execute(OracleCallableStatement.java:4273)\r\n        at com.grocery.stand.Helper.getAccess(Helper.java:216)\r\n        at com.grocery.stand.fruitbasket.Dao.getPriceData(Dao.java:216)\r\n        at com.grocery.stand.fruitbasket.Dao.getPricees(Dao.java:183)\r\n        at com.grocery.stand.fruitbasket.UpdatePrice.updateAllFruitPrices(UpdatePrice.java:256)\r\n        at com.grocery.stand.fruitbasket.UpdatePrice.main(UpdatePrice.java:58)\r\n    SQL Exception while getting Data from SYSTEM_B\r\n    Exception while updating pricing : ORA-01012: not logged on\r\n\r\n    Exception in thread &quot;main&quot; java.sql.SQLException: ORA-01012: not logged on\r\n\r\n        at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:125)\r\n        at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:316)\r\n        at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:277)\r\n        at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:272)\r\n        at oracle.jdbc.driver.T4C7Ocommoncall.receive(T4C7Ocommoncall.java:129)\r\n        at oracle.jdbc.driver.T4CConnection.do_rollback(T4CConnection.java:478)\r\n        at oracle.jdbc.driver.PhysicalConnection.rollback(PhysicalConnection.java:1045)\r\n        at com.grocery.stand.Helper.rollBack(Helper.java:75)\r\n        at com.grocery.stand.fruitbasket.UpdatePrice.updatePartNumbers(UpdatePrice.java:291)\r\n        at com.grocery.stand.fruitbasket.UpdatePrice.main(UpdatePrice.java:58)\r\n\r\n\r\n**Connection Code**\r\n\r\n        public  static Connection openConnection() throws SQLException {\r\n\r\n\r\n\t\tString userName = propBundle.getString(DB_UID);\r\n\t\tString password = propBundle.getString(DB_PWD);\r\n\t\tString url = propBundle.getString(DB_URL);\r\n\r\n\r\n\t\tConnection conn = null;\r\n\t\ttry {\r\n\t\t\tDriverManager.registerDriver(new oracle.jdbc.driver.OracleDriver());\r\n\t\t\tconn = (Connection) DriverManager.getConnection(url, userName,\r\n\t\t\t\t\tpassword);\r\n\t\t\tconn.setAutoCommit(false);\r\n\t\t} catch (SQLException sqle) {\r\n\t\t\tsqle.printStackTrace(System.out);\r\n\t\t\tthrow sqle;\r\n\t\t}\r\n\t\treturn conn;\r\n\t}\r\n\r\n**Error occurs on line `execute()`**\r\n\r\n    public static void getSystemAccess(Connection dbConnection) throws SQLException {\r\n      try {\r\n          CallableStatement authStmt = null;\r\n          String authorize = &quot;CALL ABC.ACCESS_PROCEDURE@some_db_link()&quot;;\r\n          authStmt = dbConnection.prepareCall(authorize);\r\n          authStmt.execute();\r\n          authStmt.close();\r\n      } catch (SQLException sqle1) {\r\n          sqle1.printStackTrace();\r\n          throw new SQLException(sqle1.getMessage());\r\n      }\r\n    }\r\n","title":"JDBC Oracle Thin ORA-02396 Connection idle timeout","body":"<p>I am supporting some legacy code and it's chugged along fine until recently.  I am looking for if there is a setting for JDBC Oracle thin connection where I can specify idle timeout via Java (no connection pooling)?  A lot of resources online refer to connection pooling... is it even possible in my case (to specify idle timeout, in a non-pooling situation)?  Or is idle time a setting on the specific DB user account?</p>\n\n<p><strong>Updates + Questions</strong></p>\n\n<ol>\n<li><p>I was able to log in as the user, and ran a query to try to find out resource limits. <code>select * from USER_RESOURCE_LIMITS;</code> However everything came back \"UNLIMITED\".  Is it possible for another value (say from the JDBC connection) to override the \"UNLIMITED\"? </p></li>\n<li><p>So the job holds onto the connection, while we actively query another system via DB links for a good duration of ~2+ hours... Now, why would the idle timeout even come into play? </p></li>\n</ol>\n\n<p><strong>Update #2</strong></p>\n\n<p>We switched to a different account (that has the same kind of DB link setup) and the job was able to finish like it did before. Which sort of points to something wonky with the Oracle user profile?  But like I said, querying <code>USER_RESOURCE_LIMITS</code> shows both users to have \"UNLIMITED\" idle time. DBA pretty confirmed that too.  What else could be causing this difference? </p>\n\n<p><strong>Update #3</strong></p>\n\n<p>Stack trace and such.</p>\n\n<pre><code>java.sql.SQLException: ORA-02396: exceeded maximum idle time, please connect again\nORA-06512: at line 1\n\n    at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:125)\n    at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:316)\n    at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:282)\n    at oracle.jdbc.driver.T4C8Oall.receive(T4C8Oall.java:639)\n    at oracle.jdbc.driver.T4CCallableStatement.doOall8(T4CCallableStatement.java:184)\n    at oracle.jdbc.driver.T4CCallableStatement.execute_for_rows(T4CCallableStatement.java:873)\n    at oracle.jdbc.driver.OracleStatement.doExecuteWithTimeout(OracleStatement.java:1086)\n    at oracle.jdbc.driver.OraclePreparedStatement.executeInternal(OraclePreparedStatement.java:2984)\n    at oracle.jdbc.driver.OraclePreparedStatement.execute(OraclePreparedStatement.java:3076)\n    at oracle.jdbc.driver.OracleCallableStatement.execute(OracleCallableStatement.java:4273)\n    at com.grocery.stand.Helper.getAccess(Helper.java:216)\n    at com.grocery.stand.fruitbasket.Dao.getPriceData(Dao.java:216)\n    at com.grocery.stand.fruitbasket.Dao.getPricees(Dao.java:183)\n    at com.grocery.stand.fruitbasket.UpdatePrice.updateAllFruitPrices(UpdatePrice.java:256)\n    at com.grocery.stand.fruitbasket.UpdatePrice.main(UpdatePrice.java:58)\nSQL Exception while getting Data from SYSTEM_B\nException while updating pricing : ORA-01012: not logged on\n\nException in thread \"main\" java.sql.SQLException: ORA-01012: not logged on\n\n    at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:125)\n    at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:316)\n    at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:277)\n    at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:272)\n    at oracle.jdbc.driver.T4C7Ocommoncall.receive(T4C7Ocommoncall.java:129)\n    at oracle.jdbc.driver.T4CConnection.do_rollback(T4CConnection.java:478)\n    at oracle.jdbc.driver.PhysicalConnection.rollback(PhysicalConnection.java:1045)\n    at com.grocery.stand.Helper.rollBack(Helper.java:75)\n    at com.grocery.stand.fruitbasket.UpdatePrice.updatePartNumbers(UpdatePrice.java:291)\n    at com.grocery.stand.fruitbasket.UpdatePrice.main(UpdatePrice.java:58)\n</code></pre>\n\n<p><strong>Connection Code</strong></p>\n\n<pre><code>    public  static Connection openConnection() throws SQLException {\n\n\n    String userName = propBundle.getString(DB_UID);\n    String password = propBundle.getString(DB_PWD);\n    String url = propBundle.getString(DB_URL);\n\n\n    Connection conn = null;\n    try {\n        DriverManager.registerDriver(new oracle.jdbc.driver.OracleDriver());\n        conn = (Connection) DriverManager.getConnection(url, userName,\n                password);\n        conn.setAutoCommit(false);\n    } catch (SQLException sqle) {\n        sqle.printStackTrace(System.out);\n        throw sqle;\n    }\n    return conn;\n}\n</code></pre>\n\n<p><strong>Error occurs on line <code>execute()</code></strong></p>\n\n<pre><code>public static void getSystemAccess(Connection dbConnection) throws SQLException {\n  try {\n      CallableStatement authStmt = null;\n      String authorize = \"CALL ABC.ACCESS_PROCEDURE@some_db_link()\";\n      authStmt = dbConnection.prepareCall(authorize);\n      authStmt.execute();\n      authStmt.close();\n  } catch (SQLException sqle1) {\n      sqle1.printStackTrace();\n      throw new SQLException(sqle1.getMessage());\n  }\n}\n</code></pre>\n"},{"tags":["java","libgdx","project-reactor"],"owner":{"account_id":10596164,"reputation":41,"user_id":7804793,"display_name":"Ewan Arends"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1701118616,"creation_date":1701118616,"question_id":77559894,"body_markdown":"I&#39;m currently working on a game in which the user can run spells, these spells can both require and supply input of certain POJO types, these I have depicted by ``ArgType&lt;T&gt;``. Rather than storing these requests *and* pre-supplied objects and then constantly checking for any matches I decided to make this entire system more dynamic, using project reactor;\r\nSpells now use this method in ``ArgumentRequestor`` to request &#39;arguments&#39;\r\n```java\r\npublic &lt;T&gt; Mono&lt;T&gt; get(ArgType&lt;T&gt; argType) {\r\n        if (!memoryReadQueue.isEmpty()) {\r\n            //(...)\r\n        }\r\n        Mono&lt;T&gt; mono;\r\n        mono = Mono.create(tMonoSink -&gt; inputRequestFluxSink.tryEmitNext(new ArgumentRequest&lt;T&gt;(argType, tMonoSink)));\r\n        return mono;\r\n    }\r\n```\r\n\r\nwith ``ArgumentRequest&lt;T&gt;`` being a simple record with an added boolean ``handled`` which keeps track of whether the request has been handled.\r\n\r\nThen to make the flux sink and its respective flux;\r\n```java\r\nprivate final Sinks.Many&lt;ArgumentRequest&gt; inputRequestFluxSink = Sinks.many().replay().limit(5, Duration.ofSeconds(3));\r\n\r\nprivate final Flux&lt;ArgumentRequest&gt; requestFlux = inputRequestFluxSink.asFlux();\r\n```\r\nIf any argument is provided, be it before or after being requested, it is submitted as follows;\r\n```java\r\nrequestor.getRequestFlux().filter(a -&gt; a.argType() == getSelectorType()).filter(argumentRequest1 -&gt; !argumentRequest1.isHandled()).take(1).subscribe(a -&gt; {\r\n            a.setHandled();\r\n            a.consumer().success(provided);\r\n        });\r\n```\r\nNow I have two spells: \r\n\r\n 1. one &#39;selector&#39; spell which submits a ``Vector2`` for the position of the mouse called ``MousePosSelector``\r\n 2. one spell which requests a ``Vector2`` instance called ``TeleportSpell``\r\n\r\nThe wanted behavior is as follows;\r\n\r\n - If the teleport spell is called before the selector, a new instance of ``ArgumentRequest`` is created and put into the flux, it will wait there in the ``repeat()`` queue for either three seconds or until it has been followed up by 5 new requests, the selector will then subscibe, and if on time will, through ``take(1)``, find this request and fulfill it, thus sending the Mono out to the teleport spell.\r\n- If the teleport spell is called after the selector, the selector will already have subscribed and will receive the ArgumentRequest directly.\r\n\r\n \r\nCurrently only the last scenario works, however, to double-check I&#39;ve run the following unit test. This emulates the first scenario with a 700 ms delay between calls.\r\n\r\n```java\r\n    @Test\r\n    void checkArguments() throws InterruptedException {\r\n        Random random = new Random();\r\n        for (int i = 0; i &lt; 10; i++) {\r\n            int x = random.nextInt();\r\n            int y = random.nextInt();\r\n            Mono&lt;Vector2&gt; mono = quantaMain.argumentRequestor.get(ArgumentRequestor.ArgType.VECTOR2);\r\n            AtomicBoolean flag = new AtomicBoolean(false);\r\n            mono.subscribe(vector2 -&gt; {\r\n                System.out.println(&quot;Vector found: X=&quot; + vector2.getX() + &quot;; Y=&quot; + vector2.getY());\r\n                Assertions.assertEquals(vector2.getX(), x);\r\n                Assertions.assertEquals(vector2.getY(), y);\r\n                flag.set(true);\r\n            });\r\n            Thread.sleep(700);\r\n            quantaMain.argumentRequestor.getRequestFlux().filter(a -&gt; a.argType() == ArgumentRequestor.ArgType.VECTOR2).filter(argumentRequest1 -&gt; !argumentRequest1.isHandled()).take(1).subscribe(argumentRequest -&gt; {\r\n                        argumentRequest.setHandled();\r\n                        argumentRequest.consumer().success(new Vector2(x, y));\r\n                    });\r\n            Assertions.assertTrue(flag.get());\r\n        }\r\n    }\r\n```\r\n\r\nIn this test case it works perfectly fine for any delay below 3000ms, this has only confused me further.\r\nSome observations:\r\n\r\n - This test is runned without initializing libGDX/LWJGL\r\n - The first situation does work when I wait for about a second or two\r\n - The first situation works the second time the selector spell is ran\r\n - If the first situation is executed a second time directly after a &#39;succesfull&#39; case with the selector being ran twice, the first situation only works after running the selector thrice.\r\n- If the first situation is then done again it requires the selector to be ran four times.\r\n\r\nDoes anyone know what I&#39;m doing wrong / could be going wrong with this code? Just some tips for debugging would be greatly appreciated, since I&#39;ve been stuck on this for a week now :(","title":"Reactor flux with replay not always working","body":"<p>I'm currently working on a game in which the user can run spells, these spells can both require and supply input of certain POJO types, these I have depicted by <code>ArgType&lt;T&gt;</code>. Rather than storing these requests <em>and</em> pre-supplied objects and then constantly checking for any matches I decided to make this entire system more dynamic, using project reactor;\nSpells now use this method in <code>ArgumentRequestor</code> to request 'arguments'</p>\n<pre class=\"lang-java prettyprint-override\"><code>public &lt;T&gt; Mono&lt;T&gt; get(ArgType&lt;T&gt; argType) {\n        if (!memoryReadQueue.isEmpty()) {\n            //(...)\n        }\n        Mono&lt;T&gt; mono;\n        mono = Mono.create(tMonoSink -&gt; inputRequestFluxSink.tryEmitNext(new ArgumentRequest&lt;T&gt;(argType, tMonoSink)));\n        return mono;\n    }\n</code></pre>\n<p>with <code>ArgumentRequest&lt;T&gt;</code> being a simple record with an added boolean <code>handled</code> which keeps track of whether the request has been handled.</p>\n<p>Then to make the flux sink and its respective flux;</p>\n<pre class=\"lang-java prettyprint-override\"><code>private final Sinks.Many&lt;ArgumentRequest&gt; inputRequestFluxSink = Sinks.many().replay().limit(5, Duration.ofSeconds(3));\n\nprivate final Flux&lt;ArgumentRequest&gt; requestFlux = inputRequestFluxSink.asFlux();\n</code></pre>\n<p>If any argument is provided, be it before or after being requested, it is submitted as follows;</p>\n<pre class=\"lang-java prettyprint-override\"><code>requestor.getRequestFlux().filter(a -&gt; a.argType() == getSelectorType()).filter(argumentRequest1 -&gt; !argumentRequest1.isHandled()).take(1).subscribe(a -&gt; {\n            a.setHandled();\n            a.consumer().success(provided);\n        });\n</code></pre>\n<p>Now I have two spells:</p>\n<ol>\n<li>one 'selector' spell which submits a <code>Vector2</code> for the position of the mouse called <code>MousePosSelector</code></li>\n<li>one spell which requests a <code>Vector2</code> instance called <code>TeleportSpell</code></li>\n</ol>\n<p>The wanted behavior is as follows;</p>\n<ul>\n<li>If the teleport spell is called before the selector, a new instance of <code>ArgumentRequest</code> is created and put into the flux, it will wait there in the <code>repeat()</code> queue for either three seconds or until it has been followed up by 5 new requests, the selector will then subscibe, and if on time will, through <code>take(1)</code>, find this request and fulfill it, thus sending the Mono out to the teleport spell.</li>\n<li>If the teleport spell is called after the selector, the selector will already have subscribed and will receive the ArgumentRequest directly.</li>\n</ul>\n<p>Currently only the last scenario works, however, to double-check I've run the following unit test. This emulates the first scenario with a 700 ms delay between calls.</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @Test\n    void checkArguments() throws InterruptedException {\n        Random random = new Random();\n        for (int i = 0; i &lt; 10; i++) {\n            int x = random.nextInt();\n            int y = random.nextInt();\n            Mono&lt;Vector2&gt; mono = quantaMain.argumentRequestor.get(ArgumentRequestor.ArgType.VECTOR2);\n            AtomicBoolean flag = new AtomicBoolean(false);\n            mono.subscribe(vector2 -&gt; {\n                System.out.println(&quot;Vector found: X=&quot; + vector2.getX() + &quot;; Y=&quot; + vector2.getY());\n                Assertions.assertEquals(vector2.getX(), x);\n                Assertions.assertEquals(vector2.getY(), y);\n                flag.set(true);\n            });\n            Thread.sleep(700);\n            quantaMain.argumentRequestor.getRequestFlux().filter(a -&gt; a.argType() == ArgumentRequestor.ArgType.VECTOR2).filter(argumentRequest1 -&gt; !argumentRequest1.isHandled()).take(1).subscribe(argumentRequest -&gt; {\n                        argumentRequest.setHandled();\n                        argumentRequest.consumer().success(new Vector2(x, y));\n                    });\n            Assertions.assertTrue(flag.get());\n        }\n    }\n</code></pre>\n<p>In this test case it works perfectly fine for any delay below 3000ms, this has only confused me further.\nSome observations:</p>\n<ul>\n<li>This test is runned without initializing libGDX/LWJGL</li>\n<li>The first situation does work when I wait for about a second or two</li>\n<li>The first situation works the second time the selector spell is ran</li>\n<li>If the first situation is executed a second time directly after a 'succesfull' case with the selector being ran twice, the first situation only works after running the selector thrice.</li>\n<li>If the first situation is then done again it requires the selector to be ran four times.</li>\n</ul>\n<p>Does anyone know what I'm doing wrong / could be going wrong with this code? Just some tips for debugging would be greatly appreciated, since I've been stuck on this for a week now :(</p>\n"},{"tags":["java","reactjs","spring","jboss","web.xml"],"comments":[{"owner":{"account_id":24440940,"reputation":3122,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1701115688,"post_id":77559630,"comment_id":136732884,"body_markdown":"Can you share what you have and what you want to change it will more relevant ?","body":"Can you share what you have and what you want to change it will more relevant ?"}],"owner":{"account_id":27171213,"reputation":31,"user_id":20707849,"display_name":"Franco Moyano"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1701118597,"creation_date":1701115489,"question_id":77559630,"body_markdown":"I have a Java app with a React app embbebed in the same maven project. I want to block specific routes from frontend (eg: examplehost.com/#/dashboard) with web.xml security constraints but I can&#39;t.\r\n\r\nNow I have an ingress role, assigned to all routes &quot;/*&quot;, so if you have this permission, you have access to all the entire app. I want to keep this role, but restricting another specific routes. Is it possible?\r\n\r\nsecurity constrant of ingress:\r\n\r\n    &lt;security-constraint&gt;\r\n    \t\t&lt;web-resource-collection&gt;\r\n    \t\t\t&lt;web-resource-name&gt;ROOT&lt;/web-resource-name&gt;\r\n    \t\t\t&lt;url-pattern&gt;/*&lt;/url-pattern&gt;\r\n    \t\t\t&lt;http-method&gt;GET&lt;/http-method&gt;\r\n    \t\t\t&lt;http-method&gt;POST&lt;/http-method&gt;\r\n    \t\t\t&lt;http-method&gt;PUT&lt;/http-method&gt;\r\n    \t\t\t&lt;http-method&gt;DELETE&lt;/http-method&gt;\r\n    \t\t&lt;/web-resource-collection&gt;\r\n    \t\t&lt;auth-constraint&gt;\r\n    \t\t\t&lt;role-name&gt;INGRESS_ROLE&lt;/role-name&gt;\r\n    \t\t&lt;/auth-constraint&gt;\r\n    \t&lt;/security-constraint&gt;\r\n    \r\n    \t&lt;security-role&gt;\r\n    \t\t&lt;description&gt;Permiso de acceso a la aplicaci&#243;n&lt;/description&gt;\r\n    \t\t&lt;role-name&gt;INGRESS_ROLE&lt;/role-name&gt;\r\n    \t&lt;/security-role&gt;\r\n\r\nIn words of chatGPT: Unfortunately, the security restrictions in the web.xml file are not directly applicable to URL fragments that include the # (hash) character. The URL fragment (everything after the #) is not sent to the server and is therefore not visible on the server side. The part after # is rendered only in the client&#39;s browser.","title":"Deny access to specfic route in web.xml - Java","body":"<p>I have a Java app with a React app embbebed in the same maven project. I want to block specific routes from frontend (eg: examplehost.com/#/dashboard) with web.xml security constraints but I can't.</p>\n<p>Now I have an ingress role, assigned to all routes &quot;/*&quot;, so if you have this permission, you have access to all the entire app. I want to keep this role, but restricting another specific routes. Is it possible?</p>\n<p>security constrant of ingress:</p>\n<pre><code>&lt;security-constraint&gt;\n        &lt;web-resource-collection&gt;\n            &lt;web-resource-name&gt;ROOT&lt;/web-resource-name&gt;\n            &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\n            &lt;http-method&gt;GET&lt;/http-method&gt;\n            &lt;http-method&gt;POST&lt;/http-method&gt;\n            &lt;http-method&gt;PUT&lt;/http-method&gt;\n            &lt;http-method&gt;DELETE&lt;/http-method&gt;\n        &lt;/web-resource-collection&gt;\n        &lt;auth-constraint&gt;\n            &lt;role-name&gt;INGRESS_ROLE&lt;/role-name&gt;\n        &lt;/auth-constraint&gt;\n    &lt;/security-constraint&gt;\n\n    &lt;security-role&gt;\n        &lt;description&gt;Permiso de acceso a la aplicación&lt;/description&gt;\n        &lt;role-name&gt;INGRESS_ROLE&lt;/role-name&gt;\n    &lt;/security-role&gt;\n</code></pre>\n<p>In words of chatGPT: Unfortunately, the security restrictions in the web.xml file are not directly applicable to URL fragments that include the # (hash) character. The URL fragment (everything after the #) is not sent to the server and is therefore not visible on the server side. The part after # is rendered only in the client's browser.</p>\n"},{"tags":["java","multithreading","unit-testing","sockets","mockito"],"comments":[{"owner":{"account_id":1434179,"reputation":5113,"user_id":1355930,"display_name":"Ashley Frieze"},"score":1,"creation_date":1478421638,"post_id":40414930,"comment_id":68140905,"body_markdown":"mockServerSocket = mock(ServerSocket.class);     try when(mockServerSocket.accept()).thenReturn(mockTestClientSocket);    . . . mockTestClientSocket = mock(Socket.class);.... you are defining the client socket mock after you tell Mockito to return it. So the reference that&#39;s returned is not the one you expect. Reverse these two and try again.","body":"mockServerSocket = mock(ServerSocket.class);     try when(mockServerSocket.accept()).thenReturn(mockTestClientSoc&zwnj;&#8203;ket);    . . . mockTestClientSocket = mock(Socket.class);.... you are defining the client socket mock after you tell Mockito to return it. So the reference that&#39;s returned is not the one you expect. Reverse these two and try again."},{"owner":{"account_id":9443335,"reputation":15252,"user_id":7023245,"accept_rate":25,"display_name":"Timothy Truckle"},"score":0,"creation_date":1478427981,"post_id":40414930,"comment_id":68142270,"body_markdown":"I agree with @AshleyFrieze that this is your main problem, but if that still does not change the behavior of the mocked socket try the other syntax: ` doReturn(oStream).when(mockTestClientSocket ) .getOutputStream() ;` (mind the moved closing brace from behind the method call to before the dot.) when mocking abstract or real classes (and not interfaces) the `when().thenReturn()` form sometimes calls the real method and fakes the result. The `doReturn().when()` form does never call the real method.","body":"I agree with @AshleyFrieze that this is your main problem, but if that still does not change the behavior of the mocked socket try the other syntax: ` doReturn(oStream).when(mockTestClientSocket ) .getOutputStream() ;` (mind the moved closing brace from behind the method call to before the dot.) when mocking abstract or real classes (and not interfaces) the <code>when().thenReturn()</code> form sometimes calls the real method and fakes the result. The <code>doReturn().when()</code> form does never call the real method."},{"owner":{"account_id":97334,"reputation":1843,"user_id":264069,"accept_rate":86,"display_name":"Gunith D"},"score":0,"creation_date":1478490689,"post_id":40414930,"comment_id":68160565,"body_markdown":"Is this problem solved? I&#39;m asking since you have marked @nicholas&#39;s answer as accepted, but since the bounty is still open","body":"Is this problem solved? I&#39;m asking since you have marked @nicholas&#39;s answer as accepted, but since the bounty is still open"},{"owner":{"account_id":6407608,"reputation":1290,"user_id":4968294,"accept_rate":93,"display_name":"karobar"},"score":0,"creation_date":1478490942,"post_id":40414930,"comment_id":68160631,"body_markdown":"Yes, Nicolas&#39; answer was the advice I needed to get this test working. There&#39;s still a waiting period on the bounty award.","body":"Yes, Nicolas&#39; answer was the advice I needed to get this test working. There&#39;s still a waiting period on the bounty award."}],"answers":[{"tags":[],"owner":{"account_id":2269593,"reputation":43907,"user_id":1997376,"accept_rate":100,"display_name":"Nicolas Filotto"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1478459709,"creation_date":1478459709,"answer_id":40453432,"question_id":40414930,"body_markdown":"I could make your unit test pass by modifying 2 things in your code:\r\n\r\n### 1. Mock `mockServerSocket.accept()` properly\r\n\r\nUp to now, you mock `mockServerSocket.accept()` too early because `mockTestClientSocket` has not yet been set so it will return `null`, you need to set it first so your code should rather be:\r\n\r\n    mockServerSocket = mock(ServerSocket.class);\r\n    // Set it first\r\n    mockTestClientSocket = mock(Socket.class);\r\n\r\n    try {\r\n        // Then mock it\r\n        when(mockServerSocket.accept()).thenReturn(mockTestClientSocket);\r\n    } catch (IOException e) {\r\n        fail(e.getMessage());\r\n    }\r\n    ...\r\n\r\n### 2. Synchronize your threads properly\r\n\r\nAs you launch a dedicated thread to manage your client socket, you need to synchronize your threads in order to make sure that your message will be ready to be read.\r\n\r\n**To do this you could:**\r\n\r\n 1. Simplify your code by calling `reader.readLine()` but it is a **blocking** approach since your current thread will wait as long as it is needed for the other thread to write the line (the message here).\r\n\r\n*The code could be:*\r\n\r\n    BufferedReader reader = ...\r\n\r\n    String receivedMessage = reader.readLine();\r\n    assertEquals(&quot;Hello, world!&quot;, receivedMessage);\r\n    mockTestClientSocket.close();\r\n    connection.closeSocket();\r\n\r\n 2. Set a value for `TIMEOUT_TIME` big enough even exaggeratedly big to make sure that the other thread will be ready, so for example as it is a value in nanoseconds, you could set it to `30` seconds so to `30_000_000_000L`. If you don&#39;t set a value big enough, your test could be unstable in slow and/or overloaded and/or shared system such as server used for continuous integration.\r\n","title":"Mocking a server-client connection with Mockito","body":"<p>I could make your unit test pass by modifying 2 things in your code:</p>\n\n<h3>1. Mock <code>mockServerSocket.accept()</code> properly</h3>\n\n<p>Up to now, you mock <code>mockServerSocket.accept()</code> too early because <code>mockTestClientSocket</code> has not yet been set so it will return <code>null</code>, you need to set it first so your code should rather be:</p>\n\n<pre><code>mockServerSocket = mock(ServerSocket.class);\n// Set it first\nmockTestClientSocket = mock(Socket.class);\n\ntry {\n    // Then mock it\n    when(mockServerSocket.accept()).thenReturn(mockTestClientSocket);\n} catch (IOException e) {\n    fail(e.getMessage());\n}\n...\n</code></pre>\n\n<h3>2. Synchronize your threads properly</h3>\n\n<p>As you launch a dedicated thread to manage your client socket, you need to synchronize your threads in order to make sure that your message will be ready to be read.</p>\n\n<p><strong>To do this you could:</strong></p>\n\n<ol>\n<li>Simplify your code by calling <code>reader.readLine()</code> but it is a <strong>blocking</strong> approach since your current thread will wait as long as it is needed for the other thread to write the line (the message here).</li>\n</ol>\n\n<p><em>The code could be:</em></p>\n\n<pre><code>BufferedReader reader = ...\n\nString receivedMessage = reader.readLine();\nassertEquals(\"Hello, world!\", receivedMessage);\nmockTestClientSocket.close();\nconnection.closeSocket();\n</code></pre>\n\n<ol start=\"2\">\n<li>Set a value for <code>TIMEOUT_TIME</code> big enough even exaggeratedly big to make sure that the other thread will be ready, so for example as it is a value in nanoseconds, you could set it to <code>30</code> seconds so to <code>30_000_000_000L</code>. If you don't set a value big enough, your test could be unstable in slow and/or overloaded and/or shared system such as server used for continuous integration.</li>\n</ol>\n"}],"owner":{"account_id":6407608,"reputation":1290,"user_id":4968294,"accept_rate":93,"display_name":"karobar"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":19193,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"accepted_answer_id":40453432,"answer_count":1,"score":11,"last_activity_date":1701118258,"creation_date":1478230928,"question_id":40414930,"body_markdown":"# Introduction\r\nI&#39;m attempting to test a socket connection by sending a string from one thread to another, where server and client sockets are mocked with Mockito v1.9.5.\r\n\r\nHere&#39;s the test I&#39;m trying to run:\r\n\r\n    @Test\r\n    public void testConnection() {        \r\n        //associate a mock server socket with the TCP Connection\r\n        TcpSocketConnection connection = new TcpSocketConnection(mockServerSocket);\r\n        try {\r\n            //begin thread which listens for clients, then sends &quot;Hello, world&quot; to a connected\r\n            //client.\r\n            connection.listen();\r\n            BufferedReader reader = new BufferedReader(\r\n                new InputStreamReader(mockTestClientSocket.getInputStream(), DEFAULT_CHARSET)\r\n            );\r\n    \r\n            long startTime = System.nanoTime();\r\n            for (long interval = 0;\r\n                    interval &lt; TIMEOUT_TIME;\r\n                    interval = System.nanoTime() - startTime) {\r\n                if (reader.ready()) {\r\n                    String receivedMessage = reader.readLine();\r\n                    assertEquals(&quot;Hello, world!&quot;, receivedMessage);\r\n                    mockTestClientSocket.close();\r\n                    connection.closeSocket();\r\n                    return;\r\n                }\r\n            }\r\n            mockTestClientSocket.close();\r\n            connection.closeSocket();\r\n            fail(&quot;Failed to receive message.&quot;);\r\n        } catch (IOException e) {\r\n            fail(e.getMessage());\r\n        }\r\n    }\r\n\r\nThe test runs until `TIMEOUT_TIME` and then the assertion that fails is the `&quot;Failed to receive message.&quot;`\r\nI specify the behavior of the mocked objects here:\r\n\r\n    @Before\r\n    public void setup() {\r\n        mockServerSocket = mock(ServerSocket.class);\r\n        try {\r\n            when(mockServerSocket.accept()).thenReturn(mockTestClientSocket);\r\n        } catch (IOException e) {\r\n            fail(e.getMessage());\r\n        }\r\n\r\n        mockTestClientSocket = mock(Socket.class);\r\n        try {\r\n            PipedOutputStream oStream = new PipedOutputStream();\r\n            when(mockTestClientSocket.getOutputStream()).thenReturn(oStream);\r\n\r\n            PipedInputStream iStream = new PipedInputStream(oStream);\r\n            when(mockTestClientSocket.getInputStream()).thenReturn(iStream);\r\n\r\n            when(mockTestClientSocket.isClosed()).thenReturn(false);\r\n        } catch (IOException e) {\r\n            fail(e.getMessage());\r\n        }\r\n    }\r\n\r\nPart of what I&#39;m trying to test is the following `run()` within an inner class which is kicked off in the `connection.listen()`:\r\n\r\n    class InnerListenerClass implements Runnable {\r\n        @Override\r\n        public void run() {\r\n            try {\r\n                clientSocket = socket.accept();\r\n                writer = new OutputStreamWriter(\r\n                   clientSocket.getOutputStream(), DEFAULT_CHARSETNAME);\r\n                out = new PrintWriter(writer, true);\r\n                while (!clientSocket.isClosed()) {\r\n                    out.println(&quot;Hello, world!&quot;);\r\n                    Thread.sleep(MILLIS_BETWEEN_MESSAGES);\r\n                }\r\n            } catch (InterruptedException | IOException e) {\r\n                LOG.debug(e.getMessage());\r\n            }\r\n        }\r\n\r\n        public InnerListenerClass(final ServerSocket socket) {\r\n            this.socket = socket;\r\n        } \r\n    }\r\n  \r\nAnd here&#39;s a portion of the `TcpSocketConnection.java`:\r\n\r\n    class TcpSocketConnection() {\r\n        public TcpSocketConnection(final ServerSocket serverSocket) {\r\n            checkNotNull(serverSocket);\r\n            this.serverSocket = serverSocket;\r\n        }\r\n        ...\r\n        public final void listen() throws IOException {\r\n            listenerThread = new Thread(new InnerListenerClass(serverSocket));\r\n            listenerThread.start();\r\n        }\r\n        ...\r\n    }\r\n# How it works in my head\r\n\r\nI&#39;m going to attempt to step through the process of my test to add some extra context to this question. Starting at the beginning of `testConnection()`:\r\n\r\n    TcpSocketConnection connection = new TcpSocketConnection(mockServerSocket);\r\n\r\nThis creates a connection with a mocked ServerSocket associated with it. This creates a thread which kicks off with the following line:   \r\n    \r\n    clientSocket = socket.accept();\r\n\r\nsince `socket` above is a reference to `mockServerSocket`, Mockito knows to return a reference to a mock Socket called `mockTestClientSocket` because of this line:\r\n\r\n    when(mockServerSocket.accept()).thenReturn(mockTestClientSocket);\r\n\r\nNext is the line below: **_NOTE: I believe this is where my understanding and reality diverge, as I believe based on debugging that this thread is hanging on creating this OutputStreamWriter object. I haven&#39;t figured out why._**\r\n\r\n    writer = new OutputStreamWriter(clientSocket.getOutputStream(), DEFAULT_CHARSETNAME);\r\n\r\nMake a new `OutputStreamWriter` given an `OutputStream`. Mockito knows what the output stream of the mocked client socket should look like because of these lines in the `setup` section:\r\n\r\n    PipedOutputStream oStream = new PipedOutputStream();                 \r\n    when(mockTestClientSocket.getOutputStream()).thenReturn(oStream);\r\n\r\nAlso, because the `setup` happens before the test, we know that our InputStream has a reference to this OutputStream because of this line:\r\n\r\n    PipedInputStream iStream = new PipedInputStream(oStream);\r\n\r\nAccording to the documentation for this constructor, This _&quot;Creates a PipedInputStream so that it is connected to the piped output stream \\(oStream). Data bytes written to (oStream) will then be available as input from this stream.&quot;_\r\n\r\nThe while loop in `run()` begins and causes &quot;Hello, world!&quot; to be sent out the OutputStream (and also received by the InputStream).\r\nNext, we wrap up the inputStream nicely:\r\n\r\n    BufferedReader reader = new BufferedReader(new InputStreamReader(mockTestClientSocket.getInputStream(), DEFAULT_CHARSET)); \r\n\r\nBy the magic of Mockito, the `mockTestClientSocket.getInputStream()` call actually returns the `iStream` from earlier, because of the following line:    \r\n\r\n    when(mockTestClientSocket.getInputStream()).thenReturn(iStream);   \r\n\r\nSo now we have a reader with an input stream, and that input stream is hooked up to an output stream. That output stream is hooked up to a `PrintWriter` which is `println`ing &quot;Hello,world!&quot;s. However, the reader never seems to even get `ready()`.   \r\n\r\n# Question\r\n_Why is the created listener thread hanging during creation of an `OutputStreamWriter`, and how can my `Hello, World!` string get sent properly from mocked socket to mocked client?_","title":"Mocking a server-client connection with Mockito","body":"<h1>Introduction</h1>\n<p>I'm attempting to test a socket connection by sending a string from one thread to another, where server and client sockets are mocked with Mockito v1.9.5.</p>\n<p>Here's the test I'm trying to run:</p>\n<pre><code>@Test\npublic void testConnection() {        \n    //associate a mock server socket with the TCP Connection\n    TcpSocketConnection connection = new TcpSocketConnection(mockServerSocket);\n    try {\n        //begin thread which listens for clients, then sends &quot;Hello, world&quot; to a connected\n        //client.\n        connection.listen();\n        BufferedReader reader = new BufferedReader(\n            new InputStreamReader(mockTestClientSocket.getInputStream(), DEFAULT_CHARSET)\n        );\n\n        long startTime = System.nanoTime();\n        for (long interval = 0;\n                interval &lt; TIMEOUT_TIME;\n                interval = System.nanoTime() - startTime) {\n            if (reader.ready()) {\n                String receivedMessage = reader.readLine();\n                assertEquals(&quot;Hello, world!&quot;, receivedMessage);\n                mockTestClientSocket.close();\n                connection.closeSocket();\n                return;\n            }\n        }\n        mockTestClientSocket.close();\n        connection.closeSocket();\n        fail(&quot;Failed to receive message.&quot;);\n    } catch (IOException e) {\n        fail(e.getMessage());\n    }\n}\n</code></pre>\n<p>The test runs until <code>TIMEOUT_TIME</code> and then the assertion that fails is the <code>&quot;Failed to receive message.&quot;</code>\nI specify the behavior of the mocked objects here:</p>\n<pre><code>@Before\npublic void setup() {\n    mockServerSocket = mock(ServerSocket.class);\n    try {\n        when(mockServerSocket.accept()).thenReturn(mockTestClientSocket);\n    } catch (IOException e) {\n        fail(e.getMessage());\n    }\n\n    mockTestClientSocket = mock(Socket.class);\n    try {\n        PipedOutputStream oStream = new PipedOutputStream();\n        when(mockTestClientSocket.getOutputStream()).thenReturn(oStream);\n\n        PipedInputStream iStream = new PipedInputStream(oStream);\n        when(mockTestClientSocket.getInputStream()).thenReturn(iStream);\n\n        when(mockTestClientSocket.isClosed()).thenReturn(false);\n    } catch (IOException e) {\n        fail(e.getMessage());\n    }\n}\n</code></pre>\n<p>Part of what I'm trying to test is the following <code>run()</code> within an inner class which is kicked off in the <code>connection.listen()</code>:</p>\n<pre><code>class InnerListenerClass implements Runnable {\n    @Override\n    public void run() {\n        try {\n            clientSocket = socket.accept();\n            writer = new OutputStreamWriter(\n               clientSocket.getOutputStream(), DEFAULT_CHARSETNAME);\n            out = new PrintWriter(writer, true);\n            while (!clientSocket.isClosed()) {\n                out.println(&quot;Hello, world!&quot;);\n                Thread.sleep(MILLIS_BETWEEN_MESSAGES);\n            }\n        } catch (InterruptedException | IOException e) {\n            LOG.debug(e.getMessage());\n        }\n    }\n\n    public InnerListenerClass(final ServerSocket socket) {\n        this.socket = socket;\n    } \n}\n</code></pre>\n<p>And here's a portion of the <code>TcpSocketConnection.java</code>:</p>\n<pre><code>class TcpSocketConnection() {\n    public TcpSocketConnection(final ServerSocket serverSocket) {\n        checkNotNull(serverSocket);\n        this.serverSocket = serverSocket;\n    }\n    ...\n    public final void listen() throws IOException {\n        listenerThread = new Thread(new InnerListenerClass(serverSocket));\n        listenerThread.start();\n    }\n    ...\n}\n</code></pre>\n<h1>How it works in my head</h1>\n<p>I'm going to attempt to step through the process of my test to add some extra context to this question. Starting at the beginning of <code>testConnection()</code>:</p>\n<pre><code>TcpSocketConnection connection = new TcpSocketConnection(mockServerSocket);\n</code></pre>\n<p>This creates a connection with a mocked ServerSocket associated with it. This creates a thread which kicks off with the following line:</p>\n<pre><code>clientSocket = socket.accept();\n</code></pre>\n<p>since <code>socket</code> above is a reference to <code>mockServerSocket</code>, Mockito knows to return a reference to a mock Socket called <code>mockTestClientSocket</code> because of this line:</p>\n<pre><code>when(mockServerSocket.accept()).thenReturn(mockTestClientSocket);\n</code></pre>\n<p>Next is the line below: <strong><em>NOTE: I believe this is where my understanding and reality diverge, as I believe based on debugging that this thread is hanging on creating this OutputStreamWriter object. I haven't figured out why.</em></strong></p>\n<pre><code>writer = new OutputStreamWriter(clientSocket.getOutputStream(), DEFAULT_CHARSETNAME);\n</code></pre>\n<p>Make a new <code>OutputStreamWriter</code> given an <code>OutputStream</code>. Mockito knows what the output stream of the mocked client socket should look like because of these lines in the <code>setup</code> section:</p>\n<pre><code>PipedOutputStream oStream = new PipedOutputStream();                 \nwhen(mockTestClientSocket.getOutputStream()).thenReturn(oStream);\n</code></pre>\n<p>Also, because the <code>setup</code> happens before the test, we know that our InputStream has a reference to this OutputStream because of this line:</p>\n<pre><code>PipedInputStream iStream = new PipedInputStream(oStream);\n</code></pre>\n<p>According to the documentation for this constructor, This <em>&quot;Creates a PipedInputStream so that it is connected to the piped output stream (oStream). Data bytes written to (oStream) will then be available as input from this stream.&quot;</em></p>\n<p>The while loop in <code>run()</code> begins and causes &quot;Hello, world!&quot; to be sent out the OutputStream (and also received by the InputStream).\nNext, we wrap up the inputStream nicely:</p>\n<pre><code>BufferedReader reader = new BufferedReader(new InputStreamReader(mockTestClientSocket.getInputStream(), DEFAULT_CHARSET)); \n</code></pre>\n<p>By the magic of Mockito, the <code>mockTestClientSocket.getInputStream()</code> call actually returns the <code>iStream</code> from earlier, because of the following line:</p>\n<pre><code>when(mockTestClientSocket.getInputStream()).thenReturn(iStream);   \n</code></pre>\n<p>So now we have a reader with an input stream, and that input stream is hooked up to an output stream. That output stream is hooked up to a <code>PrintWriter</code> which is <code>println</code>ing &quot;Hello,world!&quot;s. However, the reader never seems to even get <code>ready()</code>.</p>\n<h1>Question</h1>\n<p><em>Why is the created listener thread hanging during creation of an <code>OutputStreamWriter</code>, and how can my <code>Hello, World!</code> string get sent properly from mocked socket to mocked client?</em></p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":31180,"reputation":29173,"user_id":85421,"display_name":"user85421"},"score":3,"creation_date":1701117922,"post_id":77559801,"comment_id":136733247,"body_markdown":"check the `main` method - it is just printing the input array, not the result - you want to print the array returned by `mergeSort()` || BTW posted code will probably fail if the array values are not unique (i.e. array contains duplicates)","body":"check the <code>main</code> method - it is just printing the input array, not the result - you want to print the array returned by <code>mergeSort()</code> || BTW posted code will probably fail if the array values are not unique (i.e. array contains duplicates)"}],"answers":[{"tags":[],"owner":{"account_id":22007364,"reputation":151,"user_id":16278120,"display_name":"Roophie"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1701118051,"creation_date":1701118051,"answer_id":77559854,"question_id":77559801,"body_markdown":"Try this:\r\n\r\n        int[] b = mergeSort(a);\r\n        System.out.println(Arrays.toString(b));\r\n\r\nThe reason is your merge method copies your data to new array for sorting and returns that new array,\r\nyou are not doing it `in place` ","title":"Recursive merge sort isn&#39;t sorting the array","body":"<p>Try this:</p>\n<pre><code>    int[] b = mergeSort(a);\n    System.out.println(Arrays.toString(b));\n</code></pre>\n<p>The reason is your merge method copies your data to new array for sorting and returns that new array,\nyou are not doing it <code>in place</code></p>\n"}],"owner":{"account_id":30007250,"reputation":1,"user_id":22995798,"display_name":"kim19"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1701118051,"creation_date":1701117418,"question_id":77559801,"body_markdown":"I&#39;m trying to implement the merge sort algorithm using recursion. I&#39;m not sure what the issue with my code is. It returns the original array without sorting it.\r\n\r\n```\r\npublic static int[] mergeSort(int[] a) {\r\n        if(a.length &lt; 2){\r\n            return a;\r\n        }\r\n        int start = 0;\r\n        int middle = a.length / 2;\r\n        int end = a.length;\r\n        //split the array \r\n        int[] left = mergeSort(Arrays.copyOfRange(a, start, middle));\r\n        int[] right = mergeSort(Arrays.copyOfRange(a, middle, end));\r\n\r\n        //merge them\r\n        return merge(left, right);\r\n    }\r\n\r\n    public static int[] merge(int[] a, int[] b) {\r\n        int indexa = 0; int indexb = 0; int i =0;\r\n        //create new array with combined length\r\n        int[] c = new int[a.length + b.length];\r\n        //copy elements to new array while sorting it\r\n        while (indexa &lt; a.length &amp;&amp; indexb &lt; b.length) {\r\n            if (a[indexa] &lt; b[indexb]) {\r\n                c[i++] = a[indexa++];\r\n            } else if (a[indexa] &gt; b[indexb]){\r\n                c[i++] = b[indexb++];\r\n            }\r\n        }\r\n\r\n        //if one array is longer than the other copy remaining elements\r\n        while (indexa &lt; a.length) {\r\n                c[i++] = a[indexa++];\r\n\r\n        }\r\n        while (indexb &lt; b.length) {\r\n                c[i++] = b[indexb++];\r\n            }\r\n        return c;\r\n\r\n    }\r\n```\r\n\r\nHere&#39;s my main method as well\r\n\r\n```\r\npublic static void main(String[] args) {\r\n        int[] a = {2, 1, 3, 4, 9, 6, 7};\r\n        mergeSort(a);\r\n        System.out.println(Arrays.toString(a));\r\n\r\n\r\n    }\r\n```\r\n\r\nAny kind of help would be appreciated. Thank you!","title":"Recursive merge sort isn&#39;t sorting the array","body":"<p>I'm trying to implement the merge sort algorithm using recursion. I'm not sure what the issue with my code is. It returns the original array without sorting it.</p>\n<pre><code>public static int[] mergeSort(int[] a) {\n        if(a.length &lt; 2){\n            return a;\n        }\n        int start = 0;\n        int middle = a.length / 2;\n        int end = a.length;\n        //split the array \n        int[] left = mergeSort(Arrays.copyOfRange(a, start, middle));\n        int[] right = mergeSort(Arrays.copyOfRange(a, middle, end));\n\n        //merge them\n        return merge(left, right);\n    }\n\n    public static int[] merge(int[] a, int[] b) {\n        int indexa = 0; int indexb = 0; int i =0;\n        //create new array with combined length\n        int[] c = new int[a.length + b.length];\n        //copy elements to new array while sorting it\n        while (indexa &lt; a.length &amp;&amp; indexb &lt; b.length) {\n            if (a[indexa] &lt; b[indexb]) {\n                c[i++] = a[indexa++];\n            } else if (a[indexa] &gt; b[indexb]){\n                c[i++] = b[indexb++];\n            }\n        }\n\n        //if one array is longer than the other copy remaining elements\n        while (indexa &lt; a.length) {\n                c[i++] = a[indexa++];\n\n        }\n        while (indexb &lt; b.length) {\n                c[i++] = b[indexb++];\n            }\n        return c;\n\n    }\n</code></pre>\n<p>Here's my main method as well</p>\n<pre><code>public static void main(String[] args) {\n        int[] a = {2, 1, 3, 4, 9, 6, 7};\n        mergeSort(a);\n        System.out.println(Arrays.toString(a));\n\n\n    }\n</code></pre>\n<p>Any kind of help would be appreciated. Thank you!</p>\n"},{"tags":["java","spring","spring-boot","prometheus","spring-micrometer"],"answers":[{"tags":[],"owner":{"account_id":6878179,"reputation":4548,"user_id":5285908,"display_name":"Amith Kumar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701117624,"creation_date":1686603538,"answer_id":76460290,"question_id":73374978,"body_markdown":"You can use the `@NewSpan` annotation. This way will have the full controller execution time as well as break down of the @Async service execution time.\r\n\r\n**NOTE:**\r\n&lt;br&gt;\r\nWith Spring Boot 3.1.0 and Micrometer 1.10.0+, you can follow this [blog](https://medium.com/@amithkumarg/micrometer-tracing-in-spring-boot-context-propagation-for-async-scheduled-newspan-b80f4f4b2c9f) which guides you with the minimum setup required to enable Micrometer annotations with Spring Boot.\r\n\r\nThese [Medium](https://medium.com/) blog(s) are behind a paywall. If you are not already a member, no need to (pay) signup, you can directly find the source code here.\r\n\r\nhttps://github.com/amithkumarg/springboot-otel-micrometer-jaeger","title":"How to use Micrometer to measure the duration of an async method called from a controller method","body":"<p>You can use the <code>@NewSpan</code> annotation. This way will have the full controller execution time as well as break down of the @Async service execution time.</p>\n<p><strong>NOTE:</strong>\n<br>\nWith Spring Boot 3.1.0 and Micrometer 1.10.0+, you can follow this <a href=\"https://medium.com/@amithkumarg/micrometer-tracing-in-spring-boot-context-propagation-for-async-scheduled-newspan-b80f4f4b2c9f\" rel=\"nofollow noreferrer\">blog</a> which guides you with the minimum setup required to enable Micrometer annotations with Spring Boot.</p>\n<p>These <a href=\"https://medium.com/\" rel=\"nofollow noreferrer\">Medium</a> blog(s) are behind a paywall. If you are not already a member, no need to (pay) signup, you can directly find the source code here.</p>\n<p><a href=\"https://github.com/amithkumarg/springboot-otel-micrometer-jaeger\" rel=\"nofollow noreferrer\">https://github.com/amithkumarg/springboot-otel-micrometer-jaeger</a></p>\n"}],"owner":{"account_id":18586978,"reputation":2220,"user_id":15000097,"display_name":"Georgii Lvov"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":569,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1701117624,"creation_date":1660657276,"question_id":73374978,"body_markdown":"I have to measure the full time of the request, that comes into controller and then the async method is executed  of some service:\r\n\r\n    @RestController\r\n    public class HelloController {\r\n    \r\n        @Autowired\r\n        private SomeService someService;\r\n    \r\n\r\n        @GetMapping(&quot;/async&quot;)\r\n        @Timed(value = &quot;async.method.time&quot;, description = &quot;Time taken to execute async method&quot;)\r\n        public void async() throws InterruptedException {\r\n            Thread.sleep(2000);\r\n    \r\n            someService.executeAsync();\r\n        }\r\n    }\r\n\r\n    @Service\r\n    public class SomeService {\r\n    \r\n        @Async\r\n        public void executeAsync() throws InterruptedException {\r\n            Thread.sleep(2000);\r\n            System.out.println(&quot;Async execution done!&quot;);\r\n        }\r\n    }\r\n\r\nActually, if I put the `@Timed` annotation above the async service method, then it will be measured correct, but I would like to measure the time with controller method too. How can I achieve this using Micrometer?\r\n\r\nThanks in advance!","title":"How to use Micrometer to measure the duration of an async method called from a controller method","body":"<p>I have to measure the full time of the request, that comes into controller and then the async method is executed  of some service:</p>\n<pre><code>@RestController\npublic class HelloController {\n\n    @Autowired\n    private SomeService someService;\n\n\n    @GetMapping(&quot;/async&quot;)\n    @Timed(value = &quot;async.method.time&quot;, description = &quot;Time taken to execute async method&quot;)\n    public void async() throws InterruptedException {\n        Thread.sleep(2000);\n\n        someService.executeAsync();\n    }\n}\n\n@Service\npublic class SomeService {\n\n    @Async\n    public void executeAsync() throws InterruptedException {\n        Thread.sleep(2000);\n        System.out.println(&quot;Async execution done!&quot;);\n    }\n}\n</code></pre>\n<p>Actually, if I put the <code>@Timed</code> annotation above the async service method, then it will be measured correct, but I would like to measure the time with controller method too. How can I achieve this using Micrometer?</p>\n<p>Thanks in advance!</p>\n"},{"tags":["java","spring","hibernate"],"comments":[{"owner":{"account_id":9531412,"reputation":2010,"user_id":7082956,"display_name":"Valerij Dobler"},"score":0,"creation_date":1701118881,"post_id":77559808,"comment_id":136733378,"body_markdown":"Why do you want to have a bidirectional mapping Film &lt;-&gt; User?","body":"Why do you want to have a bidirectional mapping Film &lt;-&gt; User?"},{"owner":{"account_id":9531412,"reputation":2010,"user_id":7082956,"display_name":"Valerij Dobler"},"score":0,"creation_date":1701119011,"post_id":77559808,"comment_id":136733401,"body_markdown":"I would think that Films don&#39;t need to hold the whole user to it. Maybe should have a Reservation that references a Film and the User by both of their ID.","body":"I would think that Films don&#39;t need to hold the whole user to it. Maybe should have a Reservation that references a Film and the User by both of their ID."},{"owner":{"account_id":30007105,"reputation":1,"user_id":22995702,"display_name":"Fatia"},"score":0,"creation_date":1701120899,"post_id":77559808,"comment_id":136733649,"body_markdown":"@ValerijDobler, I have a UserFilm class that has Film and User objects that refer to an ID, but I didn&#39;t know how to use it if I could make a many-to-many relationship.\nI will try to do it.","body":"@ValerijDobler, I have a UserFilm class that has Film and User objects that refer to an ID, but I didn&#39;t know how to use it if I could make a many-to-many relationship. I will try to do it."},{"owner":{"account_id":1434762,"reputation":22772,"user_id":1356423,"accept_rate":65,"display_name":"Alan Hay"},"score":0,"creation_date":1701124658,"post_id":77559808,"comment_id":136734150,"body_markdown":"You need to remove the join table from one side and use mappedby. https://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#collections-bidirectional","body":"You need to remove the join table from one side and use mappedby. <a href=\"https://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#collections-bidirectional\" rel=\"nofollow noreferrer\">docs.jboss.org/hibernate/core/3.6/reference/en-US/html_singl&zwnj;&#8203;e/&hellip;</a>"}],"owner":{"account_id":30007105,"reputation":1,"user_id":22995702,"display_name":"Fatia"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1701117528,"creation_date":1701117528,"question_id":77559808,"body_markdown":"I&#39;m learning the Spring framework and doing the server side of the project. I have the following problem:\r\n\r\nI have User and Film entities. They have a many-to-many relationship, that is, a User can select several Films, and a Film can be selected by several Users. When adding a new Film to List&lt;Film&gt; films in User, or deleting it from this list, when using userRepository.save(user) hibernate deletes all films of this user from the user_film table, and inserts a new list. Please tell me how it is possible to add or delete only the film that was added/deleted by request?\r\n\r\nHere is part of the code for the Film collection in User:\r\n```\r\n    @ManyToMany(cascade = CascadeType.ALL)\r\n    @JoinTable(\r\n            name = &quot;user_film&quot;,\r\n            joinColumns = @JoinColumn(name = &quot;uf_user_id&quot;),\r\n            inverseJoinColumns = @JoinColumn(name = &quot;uf_film_id&quot;)\r\n    )\r\n    private List&lt;Film&gt; films;\r\n\r\n    public List&lt;Film&gt; getFilms() {\r\n        return films;\r\n    }\r\n\r\n    public void setFilms(List&lt;Film&gt; films) {\r\n        this.films = films;\r\n    }\r\n```\r\n\r\nHere is part of the code for the User collection in Film:\r\n```\r\n    @ManyToMany(cascade = CascadeType.ALL)\r\n    @JsonIgnore\r\n    @JoinTable(\r\n            name = &quot;user_film&quot;,\r\n            joinColumns = @JoinColumn(name = &quot;uf_film_id&quot;),\r\n            inverseJoinColumns = @JoinColumn(name = &quot;uf_user_id&quot;)\r\n    )\r\n    private List&lt;User&gt; users;\r\n\r\n    public List&lt;User&gt; getUsers() {\r\n        return users;\r\n    }\r\n\r\n    public void setUsers(List&lt;User&gt; users) {\r\n        this.users = users;\r\n    }\r\n```\r\nHere is the code for the functions that add and remove collection elements and store it in the database:\r\n```\r\n    @Transactional\r\n    public UserModel addLikedFilm(Long user_id, Long film_id) {\r\n        Optional&lt;User&gt; foundedUser = userRepository.findById(user_id);\r\n        if(foundedUser.isEmpty()){\r\n            throw new UserNotFoundException(&quot;User not found, wrong ID: &quot; + user_id);\r\n        }\r\n        User user = foundedUser.get();\r\n\r\n        Optional&lt;Film&gt; foundedFilm = filmRepository.findById(film_id);\r\n        if(foundedFilm.isEmpty()){\r\n            throw new FilmNotFoundException(&quot;Film not found, wrong ID: &quot; + film_id);\r\n        }\r\n        Film film = foundedFilm.get();\r\n\r\n        user.getFilms().add(film);\r\n        userRepository.save(user);\r\n\r\n        return UserModel.toModel(user);\r\n    }\r\n\r\n    @Transactional\r\n    public UserModel deleteLikedFilm(Long user_id, Long film_id) {\r\n        Optional&lt;User&gt; foundedUser = userRepository.findById(user_id);\r\n        if(foundedUser.isEmpty()){\r\n            throw new UserNotFoundException(&quot;User not found, wrong ID: &quot; + user_id);\r\n        }\r\n        User user = foundedUser.get();\r\n\r\n        Optional&lt;Film&gt; foundedFilm = filmRepository.findById(film_id);\r\n        if(foundedFilm.isEmpty()){\r\n            throw new FilmNotFoundException(&quot;Film not found, wrong ID: &quot; + film_id);\r\n        }\r\n        Film film = foundedFilm.get();\r\n\r\n        user.getFilms().remove(film);\r\n        userRepository.save(user);\r\n\r\n        return UserModel.toModel(user);\r\n    }\r\n\r\n```\r\nAfter adding 3 films with id 1, 2 and 3 on request, I get this:\r\nAdding film 1:\r\n```\r\nHibernate: select u1_0.user_id,u1_0.birthday,u1_0.gender,case when u1_0.is_admin = 1 then true else false end,u1_0.password,u1_0.registration_date,u1_0.user_email,u1_0.user_name from user u1_0 where u1_0.user_id=?\r\nHibernate: select f1_0.film_id,f1_0.film_desc,f1_0.film_duration_minutes,f1_0.film_imdb_rating,f1_0.film_link,f1_0.film_name,f1_0.film_year,f1_0.image from film f1_0 where f1_0.film_id=?\r\nHibernate: select f1_0.uf_user_id,f1_1.film_id,f1_1.film_desc,f1_1.film_duration_minutes,f1_1.film_imdb_rating,f1_1.film_link,f1_1.film_name,f1_1.film_year,f1_1.image from user_film f1_0 join film f1_1 on f1_1.film_id=f1_0.uf_film_id where f1_0.uf_user_id=?\r\nHibernate: select g1_0.ufg_user_id,g1_1.genre_id,g1_1.genre_name from user_favorite_genre g1_0 join genre g1_1 on g1_1.genre_id=g1_0.ufg_genre_id where g1_0.ufg_user_id=?\r\nHibernate: select g1_0.fg_film_id,g1_1.genre_id,g1_1.genre_name from film_genre g1_0 join genre g1_1 on g1_1.genre_id=g1_0.fg_genre_id where g1_0.fg_film_id=?\r\nHibernate: insert into user_film (uf_user_id,uf_film_id) values (?,?)\r\n```\r\nAdding film 2:\r\n```\r\nHibernate: select u1_0.user_id,u1_0.birthday,u1_0.gender,case when u1_0.is_admin = 1 then true else false end,u1_0.password,u1_0.registration_date,u1_0.user_email,u1_0.user_name from user u1_0 where u1_0.user_id=?\r\nHibernate: select f1_0.film_id,f1_0.film_desc,f1_0.film_duration_minutes,f1_0.film_imdb_rating,f1_0.film_link,f1_0.film_name,f1_0.film_year,f1_0.image from film f1_0 where f1_0.film_id=?\r\nHibernate: select f1_0.uf_user_id,f1_1.film_id,f1_1.film_desc,f1_1.film_duration_minutes,f1_1.film_imdb_rating,f1_1.film_link,f1_1.film_name,f1_1.film_year,f1_1.image from user_film f1_0 join film f1_1 on f1_1.film_id=f1_0.uf_film_id where f1_0.uf_user_id=?\r\nHibernate: select g1_0.ufg_user_id,g1_1.genre_id,g1_1.genre_name from user_favorite_genre g1_0 join genre g1_1 on g1_1.genre_id=g1_0.ufg_genre_id where g1_0.ufg_user_id=?\r\nHibernate: select g1_0.fg_film_id,g1_1.genre_id,g1_1.genre_name from film_genre g1_0 join genre g1_1 on g1_1.genre_id=g1_0.fg_genre_id where g1_0.fg_film_id=?\r\nHibernate: select g1_0.fg_film_id,g1_1.genre_id,g1_1.genre_name from film_genre g1_0 join genre g1_1 on g1_1.genre_id=g1_0.fg_genre_id where g1_0.fg_film_id=?\r\nHibernate: delete from user_film where uf_user_id=?\r\nHibernate: insert into user_film (uf_user_id,uf_film_id) values (?,?)\r\nHibernate: insert into user_film (uf_user_id,uf_film_id) values (?,?)\r\n```\r\nAdding film 3:\r\n```\r\nHibernate: select u1_0.user_id,u1_0.birthday,u1_0.gender,case when u1_0.is_admin = 1 then true else false end,u1_0.password,u1_0.registration_date,u1_0.user_email,u1_0.user_name from user u1_0 where u1_0.user_id=?\r\nHibernate: select f1_0.film_id,f1_0.film_desc,f1_0.film_duration_minutes,f1_0.film_imdb_rating,f1_0.film_link,f1_0.film_name,f1_0.film_year,f1_0.image from film f1_0 where f1_0.film_id=?\r\nHibernate: select f1_0.uf_user_id,f1_1.film_id,f1_1.film_desc,f1_1.film_duration_minutes,f1_1.film_imdb_rating,f1_1.film_link,f1_1.film_name,f1_1.film_year,f1_1.image from user_film f1_0 join film f1_1 on f1_1.film_id=f1_0.uf_film_id where f1_0.uf_user_id=?\r\nHibernate: select g1_0.ufg_user_id,g1_1.genre_id,g1_1.genre_name from user_favorite_genre g1_0 join genre g1_1 on g1_1.genre_id=g1_0.ufg_genre_id where g1_0.ufg_user_id=?\r\nHibernate: select g1_0.fg_film_id,g1_1.genre_id,g1_1.genre_name from film_genre g1_0 join genre g1_1 on g1_1.genre_id=g1_0.fg_genre_id where g1_0.fg_film_id=?\r\nHibernate: select g1_0.fg_film_id,g1_1.genre_id,g1_1.genre_name from film_genre g1_0 join genre g1_1 on g1_1.genre_id=g1_0.fg_genre_id where g1_0.fg_film_id=?\r\nHibernate: select g1_0.fg_film_id,g1_1.genre_id,g1_1.genre_name from film_genre g1_0 join genre g1_1 on g1_1.genre_id=g1_0.fg_genre_id where g1_0.fg_film_id=?\r\nHibernate: delete from user_film where uf_user_id=?\r\nHibernate: insert into user_film (uf_user_id,uf_film_id) values (?,?)\r\nHibernate: insert into user_film (uf_user_id,uf_film_id) values (?,?)\r\nHibernate: insert into user_film (uf_user_id,uf_film_id) values (?,?)\r\n\r\n```\r\n\r\n\r\nI tried changing the cascade type and using EntityManager to save. Maybe I misunderstood something and used it incorrectly, but nothing worked for me.","title":"Before saving a new record, Hibernate deletes all the records of this collection in the database, and then overwrites the new one","body":"<p>I'm learning the Spring framework and doing the server side of the project. I have the following problem:</p>\n<p>I have User and Film entities. They have a many-to-many relationship, that is, a User can select several Films, and a Film can be selected by several Users. When adding a new Film to List films in User, or deleting it from this list, when using userRepository.save(user) hibernate deletes all films of this user from the user_film table, and inserts a new list. Please tell me how it is possible to add or delete only the film that was added/deleted by request?</p>\n<p>Here is part of the code for the Film collection in User:</p>\n<pre><code>    @ManyToMany(cascade = CascadeType.ALL)\n    @JoinTable(\n            name = &quot;user_film&quot;,\n            joinColumns = @JoinColumn(name = &quot;uf_user_id&quot;),\n            inverseJoinColumns = @JoinColumn(name = &quot;uf_film_id&quot;)\n    )\n    private List&lt;Film&gt; films;\n\n    public List&lt;Film&gt; getFilms() {\n        return films;\n    }\n\n    public void setFilms(List&lt;Film&gt; films) {\n        this.films = films;\n    }\n</code></pre>\n<p>Here is part of the code for the User collection in Film:</p>\n<pre><code>    @ManyToMany(cascade = CascadeType.ALL)\n    @JsonIgnore\n    @JoinTable(\n            name = &quot;user_film&quot;,\n            joinColumns = @JoinColumn(name = &quot;uf_film_id&quot;),\n            inverseJoinColumns = @JoinColumn(name = &quot;uf_user_id&quot;)\n    )\n    private List&lt;User&gt; users;\n\n    public List&lt;User&gt; getUsers() {\n        return users;\n    }\n\n    public void setUsers(List&lt;User&gt; users) {\n        this.users = users;\n    }\n</code></pre>\n<p>Here is the code for the functions that add and remove collection elements and store it in the database:</p>\n<pre><code>    @Transactional\n    public UserModel addLikedFilm(Long user_id, Long film_id) {\n        Optional&lt;User&gt; foundedUser = userRepository.findById(user_id);\n        if(foundedUser.isEmpty()){\n            throw new UserNotFoundException(&quot;User not found, wrong ID: &quot; + user_id);\n        }\n        User user = foundedUser.get();\n\n        Optional&lt;Film&gt; foundedFilm = filmRepository.findById(film_id);\n        if(foundedFilm.isEmpty()){\n            throw new FilmNotFoundException(&quot;Film not found, wrong ID: &quot; + film_id);\n        }\n        Film film = foundedFilm.get();\n\n        user.getFilms().add(film);\n        userRepository.save(user);\n\n        return UserModel.toModel(user);\n    }\n\n    @Transactional\n    public UserModel deleteLikedFilm(Long user_id, Long film_id) {\n        Optional&lt;User&gt; foundedUser = userRepository.findById(user_id);\n        if(foundedUser.isEmpty()){\n            throw new UserNotFoundException(&quot;User not found, wrong ID: &quot; + user_id);\n        }\n        User user = foundedUser.get();\n\n        Optional&lt;Film&gt; foundedFilm = filmRepository.findById(film_id);\n        if(foundedFilm.isEmpty()){\n            throw new FilmNotFoundException(&quot;Film not found, wrong ID: &quot; + film_id);\n        }\n        Film film = foundedFilm.get();\n\n        user.getFilms().remove(film);\n        userRepository.save(user);\n\n        return UserModel.toModel(user);\n    }\n\n</code></pre>\n<p>After adding 3 films with id 1, 2 and 3 on request, I get this:\nAdding film 1:</p>\n<pre><code>Hibernate: select u1_0.user_id,u1_0.birthday,u1_0.gender,case when u1_0.is_admin = 1 then true else false end,u1_0.password,u1_0.registration_date,u1_0.user_email,u1_0.user_name from user u1_0 where u1_0.user_id=?\nHibernate: select f1_0.film_id,f1_0.film_desc,f1_0.film_duration_minutes,f1_0.film_imdb_rating,f1_0.film_link,f1_0.film_name,f1_0.film_year,f1_0.image from film f1_0 where f1_0.film_id=?\nHibernate: select f1_0.uf_user_id,f1_1.film_id,f1_1.film_desc,f1_1.film_duration_minutes,f1_1.film_imdb_rating,f1_1.film_link,f1_1.film_name,f1_1.film_year,f1_1.image from user_film f1_0 join film f1_1 on f1_1.film_id=f1_0.uf_film_id where f1_0.uf_user_id=?\nHibernate: select g1_0.ufg_user_id,g1_1.genre_id,g1_1.genre_name from user_favorite_genre g1_0 join genre g1_1 on g1_1.genre_id=g1_0.ufg_genre_id where g1_0.ufg_user_id=?\nHibernate: select g1_0.fg_film_id,g1_1.genre_id,g1_1.genre_name from film_genre g1_0 join genre g1_1 on g1_1.genre_id=g1_0.fg_genre_id where g1_0.fg_film_id=?\nHibernate: insert into user_film (uf_user_id,uf_film_id) values (?,?)\n</code></pre>\n<p>Adding film 2:</p>\n<pre><code>Hibernate: select u1_0.user_id,u1_0.birthday,u1_0.gender,case when u1_0.is_admin = 1 then true else false end,u1_0.password,u1_0.registration_date,u1_0.user_email,u1_0.user_name from user u1_0 where u1_0.user_id=?\nHibernate: select f1_0.film_id,f1_0.film_desc,f1_0.film_duration_minutes,f1_0.film_imdb_rating,f1_0.film_link,f1_0.film_name,f1_0.film_year,f1_0.image from film f1_0 where f1_0.film_id=?\nHibernate: select f1_0.uf_user_id,f1_1.film_id,f1_1.film_desc,f1_1.film_duration_minutes,f1_1.film_imdb_rating,f1_1.film_link,f1_1.film_name,f1_1.film_year,f1_1.image from user_film f1_0 join film f1_1 on f1_1.film_id=f1_0.uf_film_id where f1_0.uf_user_id=?\nHibernate: select g1_0.ufg_user_id,g1_1.genre_id,g1_1.genre_name from user_favorite_genre g1_0 join genre g1_1 on g1_1.genre_id=g1_0.ufg_genre_id where g1_0.ufg_user_id=?\nHibernate: select g1_0.fg_film_id,g1_1.genre_id,g1_1.genre_name from film_genre g1_0 join genre g1_1 on g1_1.genre_id=g1_0.fg_genre_id where g1_0.fg_film_id=?\nHibernate: select g1_0.fg_film_id,g1_1.genre_id,g1_1.genre_name from film_genre g1_0 join genre g1_1 on g1_1.genre_id=g1_0.fg_genre_id where g1_0.fg_film_id=?\nHibernate: delete from user_film where uf_user_id=?\nHibernate: insert into user_film (uf_user_id,uf_film_id) values (?,?)\nHibernate: insert into user_film (uf_user_id,uf_film_id) values (?,?)\n</code></pre>\n<p>Adding film 3:</p>\n<pre><code>Hibernate: select u1_0.user_id,u1_0.birthday,u1_0.gender,case when u1_0.is_admin = 1 then true else false end,u1_0.password,u1_0.registration_date,u1_0.user_email,u1_0.user_name from user u1_0 where u1_0.user_id=?\nHibernate: select f1_0.film_id,f1_0.film_desc,f1_0.film_duration_minutes,f1_0.film_imdb_rating,f1_0.film_link,f1_0.film_name,f1_0.film_year,f1_0.image from film f1_0 where f1_0.film_id=?\nHibernate: select f1_0.uf_user_id,f1_1.film_id,f1_1.film_desc,f1_1.film_duration_minutes,f1_1.film_imdb_rating,f1_1.film_link,f1_1.film_name,f1_1.film_year,f1_1.image from user_film f1_0 join film f1_1 on f1_1.film_id=f1_0.uf_film_id where f1_0.uf_user_id=?\nHibernate: select g1_0.ufg_user_id,g1_1.genre_id,g1_1.genre_name from user_favorite_genre g1_0 join genre g1_1 on g1_1.genre_id=g1_0.ufg_genre_id where g1_0.ufg_user_id=?\nHibernate: select g1_0.fg_film_id,g1_1.genre_id,g1_1.genre_name from film_genre g1_0 join genre g1_1 on g1_1.genre_id=g1_0.fg_genre_id where g1_0.fg_film_id=?\nHibernate: select g1_0.fg_film_id,g1_1.genre_id,g1_1.genre_name from film_genre g1_0 join genre g1_1 on g1_1.genre_id=g1_0.fg_genre_id where g1_0.fg_film_id=?\nHibernate: select g1_0.fg_film_id,g1_1.genre_id,g1_1.genre_name from film_genre g1_0 join genre g1_1 on g1_1.genre_id=g1_0.fg_genre_id where g1_0.fg_film_id=?\nHibernate: delete from user_film where uf_user_id=?\nHibernate: insert into user_film (uf_user_id,uf_film_id) values (?,?)\nHibernate: insert into user_film (uf_user_id,uf_film_id) values (?,?)\nHibernate: insert into user_film (uf_user_id,uf_film_id) values (?,?)\n\n</code></pre>\n<p>I tried changing the cascade type and using EntityManager to save. Maybe I misunderstood something and used it incorrectly, but nothing worked for me.</p>\n"},{"tags":["java","spring","netbeans","wildfly"],"owner":{"account_id":30007295,"reputation":1,"user_id":22995832,"display_name":"Anon_4"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":1,"is_answered":false,"view_count":15,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":0,"score":-1,"last_activity_date":1701117188,"creation_date":1701117188,"question_id":77559775,"body_markdown":"I have been experiencing a little issue for deploying my Restful API in Springboot. Using Netbeans IDE 19 and Java 17. I haven&#39;t figured out why after deploying successfully my .war file into WildFly 30, it only retrieves &quot;Forbidden&quot;. Has someone experienced this before?\r\n\r\nI&#39;m using Microsoft SQL Server as my DB software. \r\n\r\nCheers!\r\n\r\nI have tried modifying the .pom file, adding dependencies, configuring the server in Netbeans. ","title":"Forbidden Error Deploying Web App in Netbeans, Wildfly and Microsoft SQL Server","body":"<p>I have been experiencing a little issue for deploying my Restful API in Springboot. Using Netbeans IDE 19 and Java 17. I haven't figured out why after deploying successfully my .war file into WildFly 30, it only retrieves &quot;Forbidden&quot;. Has someone experienced this before?</p>\n<p>I'm using Microsoft SQL Server as my DB software.</p>\n<p>Cheers!</p>\n<p>I have tried modifying the .pom file, adding dependencies, configuring the server in Netbeans.</p>\n"},{"tags":["java","mockito"],"comments":[{"owner":{"account_id":8909811,"reputation":2612,"user_id":6650475,"display_name":"Andrew S"},"score":1,"creation_date":1701117949,"post_id":77559724,"comment_id":136733252,"body_markdown":"Looks like a duplicate of [this](https://stackoverflow.com/questions/14970516/use-mockito-to-mock-some-methods-but-not-others).","body":"Looks like a duplicate of <a href=\"https://stackoverflow.com/questions/14970516/use-mockito-to-mock-some-methods-but-not-others\">this</a>."},{"owner":{"account_id":149941,"reputation":2907,"user_id":362792,"display_name":"Hitobat"},"score":0,"creation_date":1701121604,"post_id":77559724,"comment_id":136733739,"body_markdown":"I&#39;d suggest using a mockito spy instead of a mock. The link Andrew S posted has some examples.","body":"I&#39;d suggest using a mockito spy instead of a mock. The link Andrew S posted has some examples."},{"owner":{"account_id":1535561,"reputation":7664,"user_id":1431720,"accept_rate":89,"display_name":"Robert"},"score":0,"creation_date":1701122783,"post_id":77559724,"comment_id":136733905,"body_markdown":"I would try very hard to not do that. You should mock the dependencies, but never the code under test. It&#39;s too easy, by accident, to mock something instead of actually testing it. Use of mocking frameworks is IMHO also a code smell. Clearly the code was not written test-first or at least with testing in mind, and now you&#39;re in a poorly designed code base where testing is hard. I&#39;d try to refactor, which of course is also hard cause you don&#39;t have tests to tell you if you break something. Be careful and good luck. :-)","body":"I would try very hard to not do that. You should mock the dependencies, but never the code under test. It&#39;s too easy, by accident, to mock something instead of actually testing it. Use of mocking frameworks is IMHO also a code smell. Clearly the code was not written test-first or at least with testing in mind, and now you&#39;re in a poorly designed code base where testing is hard. I&#39;d try to refactor, which of course is also hard cause you don&#39;t have tests to tell you if you break something. Be careful and good luck. :-)"}],"answers":[{"tags":[],"owner":{"account_id":23611897,"reputation":334,"user_id":17646774,"display_name":"Marco Balo"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1701117100,"creation_date":1701117100,"answer_id":77559766,"question_id":77559724,"body_markdown":"```java\r\nMyClass mock = Mockito.mock(MyClass.class);\r\nMockito.when(mock.methodToTest()).thenReturn(...);\r\n```","title":"Mock a method from a class that is under testing","body":"<pre class=\"lang-java prettyprint-override\"><code>MyClass mock = Mockito.mock(MyClass.class);\nMockito.when(mock.methodToTest()).thenReturn(...);\n</code></pre>\n"}],"owner":{"account_id":25445737,"reputation":1,"user_id":19247968,"display_name":"Joe Spark"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1701117100,"creation_date":1701116577,"question_id":77559724,"body_markdown":"I want to use Mockito to mock a method from a class which is under testing. This method is called in the method which I want to test. How can I do that?\r\n```\r\npublic class MyClass {\r\n    public String dependencyMethod() {\r\n        // Some implementation\r\n        return &quot;actual_result&quot;;\r\n    }\r\n\r\n    public String methodToTest() {\r\n        String result = dependencyMethod();\r\n        // Some other implementation using result\r\n        return result;\r\n    }\r\n}\r\n```\r\n\r\n```\r\nimport org.junit.Test;\r\nimport static org.junit.Assert.assertEquals;\r\nimport static org.mockito.Mockito.*;\r\n\r\npublic class TestMyClass {\r\n\r\n    @Test\r\n    public void testMethodToTest() {\r\n       // TODO: Write implementation here\r\n    }\r\n}\r\n```\r\n","title":"Mock a method from a class that is under testing","body":"<p>I want to use Mockito to mock a method from a class which is under testing. This method is called in the method which I want to test. How can I do that?</p>\n<pre><code>public class MyClass {\n    public String dependencyMethod() {\n        // Some implementation\n        return &quot;actual_result&quot;;\n    }\n\n    public String methodToTest() {\n        String result = dependencyMethod();\n        // Some other implementation using result\n        return result;\n    }\n}\n</code></pre>\n<pre><code>import org.junit.Test;\nimport static org.junit.Assert.assertEquals;\nimport static org.mockito.Mockito.*;\n\npublic class TestMyClass {\n\n    @Test\n    public void testMethodToTest() {\n       // TODO: Write implementation here\n    }\n}\n</code></pre>\n"},{"tags":["java","maven"],"comments":[{"owner":{"account_id":1479533,"reputation":689,"user_id":1389221,"accept_rate":60,"display_name":"Krishnanunni P V"},"score":0,"creation_date":1488868917,"post_id":42641823,"comment_id":72410802,"body_markdown":"Please show your warnings","body":"Please show your warnings"},{"owner":{"account_id":4427703,"reputation":3041,"user_id":3605712,"accept_rate":97,"display_name":"Malakai"},"score":0,"creation_date":1488868969,"post_id":42641823,"comment_id":72410837,"body_markdown":"agree with @KrishnanunniPV","body":"agree with @KrishnanunniPV"},{"owner":{"account_id":5547905,"reputation":715,"user_id":4401990,"accept_rate":67,"display_name":"Grzesiek"},"score":0,"creation_date":1488868983,"post_id":42641823,"comment_id":72410843,"body_markdown":"Are you using a Linux or windows?","body":"Are you using a Linux or windows?"},{"owner":{"account_id":10402833,"reputation":111,"user_id":7670574,"display_name":"Russell Yu"},"score":0,"creation_date":1488869241,"post_id":42641823,"comment_id":72410972,"body_markdown":"I&#39;m using a windows.  The warnings are just like &quot;The value of the local variable a is not used&quot;, I know how to avoid these warnings, however, I just wanna print the warning on the console.","body":"I&#39;m using a windows.  The warnings are just like &quot;The value of the local variable a is not used&quot;, I know how to avoid these warnings, however, I just wanna print the warning on the console."}],"answers":[{"tags":[],"owner":{"account_id":60491,"reputation":8054,"user_id":180650,"accept_rate":80,"display_name":"Vitaliy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701116861,"creation_date":1488869171,"answer_id":42641907,"question_id":42641823,"body_markdown":"I am guessing you are using the compiler plugin. Have you tried the tag [&lt;showWarnings&gt;][1]?\r\n\r\n\r\n  [1]: https://maven.apache.org/plugins/maven-compiler-plugin/compile-mojo.html#showWarnings","title":"Maven How to show warnings of codes when compiling","body":"<p>I am guessing you are using the compiler plugin. Have you tried the tag <a href=\"https://maven.apache.org/plugins/maven-compiler-plugin/compile-mojo.html#showWarnings\" rel=\"nofollow noreferrer\"></a>?</p>\n"},{"tags":[],"owner":{"account_id":1479533,"reputation":689,"user_id":1389221,"accept_rate":60,"display_name":"Krishnanunni P V"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1488869943,"creation_date":1488869943,"answer_id":42642118,"question_id":42641823,"body_markdown":"Use the maven compiler plugin in your pom.xml:\r\n    \r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;skipTests&gt;false&lt;/skipTests&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;compilerArgument&gt;-Xlint:all&lt;/compilerArgument&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;","title":"Maven How to show warnings of codes when compiling","body":"<p>Use the maven compiler plugin in your pom.xml:</p>\n\n<pre><code>&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n            &lt;configuration&gt;\n                &lt;skipTests&gt;false&lt;/skipTests&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n            &lt;configuration&gt;\n                &lt;compilerArgument&gt;-Xlint:all&lt;/compilerArgument&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1939636,"reputation":28457,"user_id":1746118,"accept_rate":95,"display_name":"Naman"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1488870481,"creation_date":1488870481,"answer_id":42642262,"question_id":42641823,"body_markdown":"To get to see detailed logs in maven you can use the command line option \r\n\r\n&gt;  **-X**, **--debug**     Produce execution debug output\r\n\r\ne.g this can be used as\r\n\r\n    mvn clean install -X\r\n\r\nAlso if what you want to get in the logs is the compiler warnings (*The value of the local variable a is not used*). You can try modifying your project&#39;s `pom.xml` with the following - \r\n\r\n    ...\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.6.1&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                   &lt;source&gt;1.8&lt;/source&gt;\r\n                   &lt;target&gt;1.8&lt;/target&gt;\r\n                   &lt;showWarnings&gt;true&lt;/showWarnings&gt;\r\n                &lt;/configuration&gt;\r\n           &lt;/plugin&gt;\r\n           ... other plugins\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n","title":"Maven How to show warnings of codes when compiling","body":"<p>To get to see detailed logs in maven you can use the command line option </p>\n\n<blockquote>\n  <p><strong>-X</strong>, <strong>--debug</strong>     Produce execution debug output</p>\n</blockquote>\n\n<p>e.g this can be used as</p>\n\n<pre><code>mvn clean install -X\n</code></pre>\n\n<p>Also if what you want to get in the logs is the compiler warnings (<em>The value of the local variable a is not used</em>). You can try modifying your project's <code>pom.xml</code> with the following - </p>\n\n<pre><code>...\n&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n            &lt;version&gt;3.6.1&lt;/version&gt;\n            &lt;configuration&gt;\n               &lt;source&gt;1.8&lt;/source&gt;\n               &lt;target&gt;1.8&lt;/target&gt;\n               &lt;showWarnings&gt;true&lt;/showWarnings&gt;\n            &lt;/configuration&gt;\n       &lt;/plugin&gt;\n       ... other plugins\n    &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":515883,"reputation":4966,"user_id":1128668,"accept_rate":54,"display_name":"GlenPeterson"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1534253014,"creation_date":1534253014,"answer_id":51842574,"question_id":42641823,"body_markdown":"With maven 3.3.9, using the maven-compiler-plugin and Java 1.8, you need a `&lt;configuration&gt;` section like the following:\r\n\r\n    &lt;plugin&gt;\r\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n        &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;3.8.0&lt;/version&gt;\r\n        &lt;executions&gt;\r\n            &lt;execution&gt;\r\n                &lt;id&gt;compile&lt;/id&gt;\r\n                &lt;phase&gt;compile&lt;/phase&gt;\r\n                &lt;goals&gt;\r\n                    &lt;goal&gt;compile&lt;/goal&gt;\r\n                &lt;/goals&gt;\r\n            &lt;/execution&gt;\r\n            &lt;execution&gt;\r\n                &lt;id&gt;testCompile&lt;/id&gt;\r\n                &lt;phase&gt;test-compile&lt;/phase&gt;\r\n                &lt;goals&gt;\r\n                    &lt;goal&gt;testCompile&lt;/goal&gt;\r\n                &lt;/goals&gt;\r\n            &lt;/execution&gt;\r\n        &lt;/executions&gt;\r\n        &lt;configuration&gt;\r\n            &lt;compilerArgument&gt;-Xlint:all&lt;/compilerArgument&gt;\r\n            &lt;showWarnings&gt;true&lt;/showWarnings&gt;\r\n            &lt;showDeprecation&gt;true&lt;/showDeprecation&gt;\r\n        &lt;/configuration&gt;\r\n    &lt;/plugin&gt;\r\n\r\nI got this answer from here when none of the above worked for me: http://frequal.com/java/EnableWarningsInMaven.html","title":"Maven How to show warnings of codes when compiling","body":"<p>With maven 3.3.9, using the maven-compiler-plugin and Java 1.8, you need a <code>&lt;configuration&gt;</code> section like the following:</p>\n\n<pre><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n    &lt;version&gt;3.8.0&lt;/version&gt;\n    &lt;executions&gt;\n        &lt;execution&gt;\n            &lt;id&gt;compile&lt;/id&gt;\n            &lt;phase&gt;compile&lt;/phase&gt;\n            &lt;goals&gt;\n                &lt;goal&gt;compile&lt;/goal&gt;\n            &lt;/goals&gt;\n        &lt;/execution&gt;\n        &lt;execution&gt;\n            &lt;id&gt;testCompile&lt;/id&gt;\n            &lt;phase&gt;test-compile&lt;/phase&gt;\n            &lt;goals&gt;\n                &lt;goal&gt;testCompile&lt;/goal&gt;\n            &lt;/goals&gt;\n        &lt;/execution&gt;\n    &lt;/executions&gt;\n    &lt;configuration&gt;\n        &lt;compilerArgument&gt;-Xlint:all&lt;/compilerArgument&gt;\n        &lt;showWarnings&gt;true&lt;/showWarnings&gt;\n        &lt;showDeprecation&gt;true&lt;/showDeprecation&gt;\n    &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n\n<p>I got this answer from here when none of the above worked for me: <a href=\"http://frequal.com/java/EnableWarningsInMaven.html\" rel=\"noreferrer\">http://frequal.com/java/EnableWarningsInMaven.html</a></p>\n"},{"tags":[],"owner":{"account_id":954257,"reputation":851,"user_id":979839,"accept_rate":20,"display_name":"Lusk116"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1543485518,"creation_date":1539260795,"answer_id":52760066,"question_id":42641823,"body_markdown":"&gt; **`&lt;showDeprecation&gt;`**\t\r\n&gt; Sets whether to show source locations where deprecated APIs are used.\r\n&gt;\r\n&gt; - Default value is: `false`\r\n&gt; - User property is: `maven.compiler.showDeprecation`\r\n&gt; \r\n&gt; **`&lt;showWarnings&gt;`**\t\r\n&gt; Set to `true` to show compilation warnings.\r\n&gt;\r\n&gt; - Default value is: `false`\r\n&gt; - User property is: `maven.compiler.showWarnings`\r\n&gt;\r\n&gt; -- [Maven Doku](https://maven.apache.org/plugins/maven-compiler-plugin/compile-mojo.html)\r\n\r\nAs simple as `mvn clean install -Dmaven.compiler.showDeprecation=true -Dmaven.compiler.showWarnings=true` all in one line.\r\n\r\nYou could even remove the `=true` part because, when you add a maven parameter with `-D` it automatically sets its value to `true`, if not set to something else.","title":"Maven How to show warnings of codes when compiling","body":"<blockquote>\n  <p><strong><code>&lt;showDeprecation&gt;</code></strong><br>\n  Sets whether to show source locations where deprecated APIs are used.</p>\n  \n  <ul>\n  <li>Default value is: <code>false</code></li>\n  <li>User property is: <code>maven.compiler.showDeprecation</code></li>\n  </ul>\n  \n  <p><strong><code>&lt;showWarnings&gt;</code></strong><br>\n  Set to <code>true</code> to show compilation warnings.</p>\n  \n  <ul>\n  <li>Default value is: <code>false</code></li>\n  <li>User property is: <code>maven.compiler.showWarnings</code></li>\n  </ul>\n  \n  <p>-- <a href=\"https://maven.apache.org/plugins/maven-compiler-plugin/compile-mojo.html\" rel=\"noreferrer\">Maven Doku</a></p>\n</blockquote>\n\n<p>As simple as <code>mvn clean install -Dmaven.compiler.showDeprecation=true -Dmaven.compiler.showWarnings=true</code> all in one line.</p>\n\n<p>You could even remove the <code>=true</code> part because, when you add a maven parameter with <code>-D</code> it automatically sets its value to <code>true</code>, if not set to something else.</p>\n"}],"owner":{"account_id":10402833,"reputation":111,"user_id":7670574,"display_name":"Russell Yu"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10507,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"answer_count":5,"score":11,"last_activity_date":1701116861,"creation_date":1488868824,"question_id":42641823,"body_markdown":"I&#39;m using maven to build a new project. There are some warnings in my codes which are underlined by yellow line. I wish maven could report these warnings in console. How can I accomplish that? Can I just add some parameters in the command such as  mvn -XXX clean compile?","title":"Maven How to show warnings of codes when compiling","body":"<p>I'm using maven to build a new project. There are some warnings in my codes which are underlined by yellow line. I wish maven could report these warnings in console. How can I accomplish that? Can I just add some parameters in the command such as  mvn -XXX clean compile?</p>\n"},{"tags":["java","itunes","data-formats"],"answers":[{"tags":[],"owner":{"account_id":8620,"reputation":22142,"user_id":15619,"accept_rate":91,"display_name":"Riduidel"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1271083249,"creation_date":1271083249,"answer_id":2622870,"question_id":2622690,"body_markdown":"Most of the time, Apple folks uses preferences list format (or its XML counterpart). As an example, it is the case for iPoho Library file. I have had success parsing this file using [commons configuration][1] in the past. Maybe you could try it.\r\n\r\n\r\n  [1]: http://commons.apache.org/configuration/","title":"ITL (iTunes Library) Format","body":"<p>Most of the time, Apple folks uses preferences list format (or its XML counterpart). As an example, it is the case for iPoho Library file. I have had success parsing this file using <a href=\"http://commons.apache.org/configuration/\" rel=\"nofollow noreferrer\">commons configuration</a> in the past. Maybe you could try it.</p>\n"},{"tags":[],"owner":{"account_id":69084,"reputation":96,"user_id":201211,"display_name":"htalvitie"},"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1701116672,"creation_date":1274530082,"answer_id":2888005,"question_id":2622690,"body_markdown":"There is an open source project called *titl* that sounds exactly what you&#39;re looking for.\r\n\r\nThe repository is here: https://github.com/josephw/titl","title":"ITL (iTunes Library) Format","body":"<p>There is an open source project called <em>titl</em> that sounds exactly what you're looking for.</p>\n<p>The repository is here: <a href=\"https://github.com/josephw/titl\" rel=\"nofollow noreferrer\">https://github.com/josephw/titl</a></p>\n"},{"tags":[],"owner":{"account_id":111681,"reputation":13319,"user_id":1480018,"accept_rate":87,"display_name":"Paul Taylor"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1374581120,"creation_date":1374581120,"answer_id":17809754,"question_id":2622690,"body_markdown":"iTunes has an api that you can use to inform iTunes of changes without having to modifying the iTunes ITL file directly. On OSX you can use Applescript, on Windows a DLL that Ive manipulate using Jacob and Java","title":"ITL (iTunes Library) Format","body":"<p>iTunes has an api that you can use to inform iTunes of changes without having to modifying the iTunes ITL file directly. On OSX you can use Applescript, on Windows a DLL that Ive manipulate using Jacob and Java</p>\n"}],"owner":{"account_id":102918,"reputation":710,"user_id":275970,"display_name":"CHiRo79"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9628,"favorite_count":0,"down_vote_count":1,"up_vote_count":13,"accepted_answer_id":2888005,"answer_count":3,"score":12,"last_activity_date":1701116672,"creation_date":1271081641,"question_id":2622690,"body_markdown":"I&#180;m developing a Java solution for manage an iTunes Library (ITL file). The ITL format is a propietary one.\r\nI&#39;m looking for an implementation or a documentation about ITL format but Google can&#39;t find anything useful.\r\n\r\nDoes anyone have experience about that? Where to find more information?\r\n\r\nThanks in advance.","title":"ITL (iTunes Library) Format","body":"<p>I´m developing a Java solution for manage an iTunes Library (ITL file). The ITL format is a propietary one.\nI'm looking for an implementation or a documentation about ITL format but Google can't find anything useful.</p>\n\n<p>Does anyone have experience about that? Where to find more information?</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["java","gradle","javapackager"],"answers":[{"tags":[],"owner":{"account_id":27664854,"reputation":153,"user_id":21116910,"display_name":"Alexander Gorodilov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1701116523,"creation_date":1701029801,"answer_id":77553344,"question_id":77549567,"body_markdown":"I have changed the icon directly in the Gradle cached library.\r\n\r\nThe JavaPackager works correct but the icon in the directory only seems to be unchanged (with the cup of coffee). \r\nWhen I copy/move the content of the build directory in a new directory - the icon of the .EXE changes its picture.\r\nAll I need is to transfer the build content in an another folder to see the right result.","title":"Can not set the icon for my videogame which is packaged using JavaPackager","body":"<p>I have changed the icon directly in the Gradle cached library.</p>\n<p>The JavaPackager works correct but the icon in the directory only seems to be unchanged (with the cup of coffee).\nWhen I copy/move the content of the build directory in a new directory - the icon of the .EXE changes its picture.\nAll I need is to transfer the build content in an another folder to see the right result.</p>\n"}],"owner":{"account_id":27664854,"reputation":153,"user_id":21116910,"display_name":"Alexander Gorodilov"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1701116523,"creation_date":1700945521,"question_id":77549567,"body_markdown":"I&#39;m trying to deploy my videogame using [JavaPackager][1]. It works but the default icon of the aplication can not be changed. It is always a cup of coffee. I have tried also JPackage - it works with my icon without problems. What can be wrong? \r\nMy deployment Gradle-script:\r\n\r\n    task packageMyApp(type: io.github.fvarrui.javapackager.gradle.PackageTask, dependsOn: build) {    \r\n        mainClass = mainClassName\r\n        organizationName = &quot;NAME&quot;\r\n        organizationUrl = &quot;HOMEPAGE&quot;\r\n        organizationEmail = &quot;EMAIL&quot;\r\n        generateInstaller = false;    \r\n        bundleJre = true    \r\n        displayName = &quot;TITLE NAME&quot;\r\n        url = &#39;PAGE&#39;\r\n        administratorRequired = false\r\n        platform = &quot;windows&quot;\r\n    ]\r\n\r\n        winConfig {\r\n            System.out.println(&quot;Exported for Windows&quot;)\r\n            File file = (new File(&#39;Build&#39; + File.separator + &#39;Girl_of_war_deployment_master.ico&#39;))\r\n            boolean exists = file.exists();\r\n            if (exists) {            \r\n                System.out.println(&quot;Icon file exists&quot;)\r\n            }\r\n            try {\r\n                if (exists) {\r\n                    winConfig.setIcoFile(file);\r\n                }\r\n            }\r\n            catch (Exception e){\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n\r\nI receive the next exception:\r\n\r\n&gt; Execution failed for task &#39;:packageMyApp&#39;.\r\n&gt; java.lang.Exception: Build\\Girl_of_war_deployment_master.ico * \r\nTry:\r\n&gt; Run with --stacktrace option to get the stack trace.\r\n&gt; Run with --info or --debug option to get more log output.\r\n&gt; Run with --scan to get full insights.\r\n&gt; Get more help at https://help.gradle.org.\r\n\r\nWhat can be wrong? Meybe there are another &quot;dirty&quot; methods to change the default icon of the  JavaPackager?\r\n\r\n\r\n  [1]: https://github.com/fvarrui/JavaPackager","title":"Can not set the icon for my videogame which is packaged using JavaPackager","body":"<p>I'm trying to deploy my videogame using <a href=\"https://github.com/fvarrui/JavaPackager\" rel=\"nofollow noreferrer\">JavaPackager</a>. It works but the default icon of the aplication can not be changed. It is always a cup of coffee. I have tried also JPackage - it works with my icon without problems. What can be wrong?\nMy deployment Gradle-script:</p>\n<pre><code>task packageMyApp(type: io.github.fvarrui.javapackager.gradle.PackageTask, dependsOn: build) {    \n    mainClass = mainClassName\n    organizationName = &quot;NAME&quot;\n    organizationUrl = &quot;HOMEPAGE&quot;\n    organizationEmail = &quot;EMAIL&quot;\n    generateInstaller = false;    \n    bundleJre = true    \n    displayName = &quot;TITLE NAME&quot;\n    url = 'PAGE'\n    administratorRequired = false\n    platform = &quot;windows&quot;\n]\n\n    winConfig {\n        System.out.println(&quot;Exported for Windows&quot;)\n        File file = (new File('Build' + File.separator + 'Girl_of_war_deployment_master.ico'))\n        boolean exists = file.exists();\n        if (exists) {            \n            System.out.println(&quot;Icon file exists&quot;)\n        }\n        try {\n            if (exists) {\n                winConfig.setIcoFile(file);\n            }\n        }\n        catch (Exception e){\n            e.printStackTrace();\n        }\n    }\n</code></pre>\n<p>I receive the next exception:</p>\n<blockquote>\n<p>Execution failed for task ':packageMyApp'.\njava.lang.Exception: Build\\Girl_of_war_deployment_master.ico *\nTry:\nRun with --stacktrace option to get the stack trace.\nRun with --info or --debug option to get more log output.\nRun with --scan to get full insights.\nGet more help at <a href=\"https://help.gradle.org\" rel=\"nofollow noreferrer\">https://help.gradle.org</a>.</p>\n</blockquote>\n<p>What can be wrong? Meybe there are another &quot;dirty&quot; methods to change the default icon of the  JavaPackager?</p>\n"},{"tags":["java","android","android-ndk","java-native-interface","jnienv"],"comments":[{"owner":{"account_id":2567288,"reputation":20405,"user_id":2226988,"display_name":"Tom Blodget"},"score":0,"creation_date":1511732340,"post_id":47496433,"comment_id":81958282,"body_markdown":"`jshort *` is castable to `short *` Do the native functions expect the `short *` to be valid after they return? BTW—`GetShortArrayElements` should be followed by `ReleaseShortArrayElements`.","body":"<code>jshort *</code> is castable to <code>short *</code> Do the native functions expect the <code>short *</code> to be valid after they return? BTW—<code>GetShortArrayElements</code> should be followed by <code>ReleaseShortArrayElements</code>."},{"owner":{"display_name":"user4408652"},"score":0,"creation_date":1511732794,"post_id":47496433,"comment_id":81958403,"body_markdown":"@TomBlodget thanks for the reply, please post it as an answer","body":"@TomBlodget thanks for the reply, please post it as an answer"}],"answers":[{"tags":[],"owner":{"account_id":6814076,"reputation":12687,"user_id":5295429,"display_name":"Oo.oO"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1701115904,"creation_date":1511766200,"answer_id":47505462,"question_id":47496433,"body_markdown":"Take a look here:\r\n\r\nhttps://github.com/mkowsiak/jnicookbook/tree/master/recipes/recipeNo012\r\n\r\nYou can find there sample where `jshort*` is used in code as `short*`. You can do that because of `typdef` statements inside `jni.h`:\r\n\r\n    typedef unsigned char   jboolean;\r\n    typedef unsigned short  jchar;\r\n    typedef short           jshort;\r\n    typedef float           jfloat;\r\n    typedef double          jdouble;\r\n\r\nThis way, you can simply use `jshort` as new name for `short` \r\n\r\n    JNIEXPORT void JNICALL Java_recipeNo012_PassArray_passShortArray\r\n      (JNIEnv *env, jclass obj, jshortArray array) {\r\n     \r\n      /* get size of the array */\r\n      jsize len = (*env)-&gt;GetArrayLength(env, array);\r\n     \r\n      /* get the body of array; it will be referecende by C pointer */\r\n      jshort *body = (*env)-&gt;GetShortArrayElements(env, array, 0);\r\n     \r\n      /* do some stuff */\r\n      for(int i=0; i &lt; len; i++) {\r\n        printf(&quot;Short value: %hd\\n&quot;, body[i]);\r\n      }\r\n      /* release body when you decide it is no longer needed */\r\n      (*env)-&gt;ReleaseShortArrayElements(env, array, body, 0);\r\n    }\r\n\r\nYou can always double check how types are defined here: `jni.h` and `$PLATFORM/jni_md.h` inside JDK directory.\r\n\r\nIt&#39;s also good to keep this one handy:\r\n\r\nhttps://docs.oracle.com/javase/7/docs/technotes/guides/jni/spec/types.html\r\n\r\nOne remark! Note that arrays &gt;= 2D are managed completely different way.","title":"The right way to convert Jni Type to Native type","body":"<p>Take a look here:</p>\n<p><a href=\"https://github.com/mkowsiak/jnicookbook/tree/master/recipes/recipeNo012\" rel=\"nofollow noreferrer\">https://github.com/mkowsiak/jnicookbook/tree/master/recipes/recipeNo012</a></p>\n<p>You can find there sample where <code>jshort*</code> is used in code as <code>short*</code>. You can do that because of <code>typdef</code> statements inside <code>jni.h</code>:</p>\n<pre><code>typedef unsigned char   jboolean;\ntypedef unsigned short  jchar;\ntypedef short           jshort;\ntypedef float           jfloat;\ntypedef double          jdouble;\n</code></pre>\n<p>This way, you can simply use <code>jshort</code> as new name for <code>short</code></p>\n<pre><code>JNIEXPORT void JNICALL Java_recipeNo012_PassArray_passShortArray\n  (JNIEnv *env, jclass obj, jshortArray array) {\n \n  /* get size of the array */\n  jsize len = (*env)-&gt;GetArrayLength(env, array);\n \n  /* get the body of array; it will be referecende by C pointer */\n  jshort *body = (*env)-&gt;GetShortArrayElements(env, array, 0);\n \n  /* do some stuff */\n  for(int i=0; i &lt; len; i++) {\n    printf(&quot;Short value: %hd\\n&quot;, body[i]);\n  }\n  /* release body when you decide it is no longer needed */\n  (*env)-&gt;ReleaseShortArrayElements(env, array, body, 0);\n}\n</code></pre>\n<p>You can always double check how types are defined here: <code>jni.h</code> and <code>$PLATFORM/jni_md.h</code> inside JDK directory.</p>\n<p>It's also good to keep this one handy:</p>\n<p><a href=\"https://docs.oracle.com/javase/7/docs/technotes/guides/jni/spec/types.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/7/docs/technotes/guides/jni/spec/types.html</a></p>\n<p>One remark! Note that arrays &gt;= 2D are managed completely different way.</p>\n"}],"owner":{"display_name":"user4408652"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1237,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1701115904,"creation_date":1511701453,"question_id":47496433,"body_markdown":"I have the following function defined in my native library \r\n\r\n    JNIEXPORT jshortArray JNICALL\r\n    Java_net_example_android_library_audio_AudioFilter_process(\r\n            JNIEnv *env, jobject instance, jshortArray readBuffer_) {\r\n\r\nAs you can see I am passing `jshortarray`\r\n\r\nI have some native functions that accept `short*` as a parameter. \r\n\r\nSo I wonder, how can I convert `jshortarray` into a native one. \r\n\r\nIs there any right way to do this ? \r\n\r\nOr I should do something like that \r\n\r\n    int input_size = env-&gt;GetArrayLength(readBuffer_);\r\n    short input[input_size];\r\n    jshort *inputArray = env-&gt;GetShortArrayElements(readBuffer_, 0);\r\n    for (int i = 0; i &lt; input_size; i++) {\r\n        input[i] = inputArray[i];\r\n    }\r\n\r\nThanks ","title":"The right way to convert Jni Type to Native type","body":"<p>I have the following function defined in my native library </p>\n\n<pre><code>JNIEXPORT jshortArray JNICALL\nJava_net_example_android_library_audio_AudioFilter_process(\n        JNIEnv *env, jobject instance, jshortArray readBuffer_) {\n</code></pre>\n\n<p>As you can see I am passing <code>jshortarray</code></p>\n\n<p>I have some native functions that accept <code>short*</code> as a parameter. </p>\n\n<p>So I wonder, how can I convert <code>jshortarray</code> into a native one. </p>\n\n<p>Is there any right way to do this ? </p>\n\n<p>Or I should do something like that </p>\n\n<pre><code>int input_size = env-&gt;GetArrayLength(readBuffer_);\nshort input[input_size];\njshort *inputArray = env-&gt;GetShortArrayElements(readBuffer_, 0);\nfor (int i = 0; i &lt; input_size; i++) {\n    input[i] = inputArray[i];\n}\n</code></pre>\n\n<p>Thanks </p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9827,"page":31,"page_size":100}
