{"items":[{"tags":["java","multithreading","concurrency"],"comments":[{"owner":{"account_id":7457995,"reputation":872,"user_id":5670592,"display_name":"Andonaeus"},"score":0,"creation_date":1457713403,"post_id":35944951,"comment_id":59546760,"body_markdown":"If you do not need the threads to return (which I think you do), you can set them as daemons.","body":"If you do not need the threads to return (which I think you do), you can set them as daemons."},{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":0,"creation_date":1457716576,"post_id":35944951,"comment_id":59548874,"body_markdown":"No, it looks like `shutdown()` is required.  You&#39;ll have to call it.","body":"No, it looks like <code>shutdown()</code> is required.  You&#39;ll have to call it."}],"answers":[{"tags":[],"owner":{"account_id":422870,"reputation":25925,"user_id":801894,"display_name":"Solomon Slow"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1457964905,"creation_date":1457718271,"answer_id":35946634,"question_id":35944951,"body_markdown":"&gt; Can anyone show me how to close all the threads which executed successfully without shutting down ExecutorService.\r\n\r\nThat is not what `ExecutorService` is for.  When you create an ExecutorService, you give it _tasks_ to perform, and you let _it_ manage the threads that it uses to execute your task.  You aren&#39;t supposed to know or care about the threads that it uses.\r\n\r\nWhen you don&#39;t want it anymore (e.g., when you want to terminate the program), then you shut it down.\r\n\r\n---------------------------\r\n\r\nP.S., Your `Thread1` class `extends Thread`.  That&#39;s a bad habit that leads you into a less-useful way of thinking about threads.  The right way to think about threads and executors is that a thread or an executor is just this thing that executes some piece or pieces of code that you give it.  Nothing more.\r\n\r\nI&#39;ve seen a lot of questions that say things like, &quot;I need the X thread to do Y, but...&quot;, and what&#39;s leading them into trouble is that the developer has given the X thread too many _responsibilities_.\r\n\r\nIn a well-designed program, it should not matter _which_ thread does Y.  Threads should be anonymous and interchangeable.\r\n\r\n-----------------------------\r\n**Update:**\r\n\r\n&gt; Can you suggest any method to close the threads without shutting down executor service.\r\n\r\nNo, I can&#39;t.  If the threads were created by an ExecutorService, then it would be wrong for your program to kill those threads behind its back.\r\n\r\n**Q:** What class are you using that implements `ExecutorService`?  Is it a `ThreadPoolExecutor` perhaps?  Perhaps you could solve your problem by creating a `ThreadFactory` that makes _daemon_ threads, and then construct your `ThreadPoolExecutor` using that factory.  A daemon thread will not stop the program from exiting.","title":"Closing Threads in Executor Service without shutting it down","body":"<blockquote>\n  <p>Can anyone show me how to close all the threads which executed successfully without shutting down ExecutorService.</p>\n</blockquote>\n\n<p>That is not what <code>ExecutorService</code> is for.  When you create an ExecutorService, you give it <em>tasks</em> to perform, and you let <em>it</em> manage the threads that it uses to execute your task.  You aren't supposed to know or care about the threads that it uses.</p>\n\n<p>When you don't want it anymore (e.g., when you want to terminate the program), then you shut it down.</p>\n\n<hr>\n\n<p>P.S., Your <code>Thread1</code> class <code>extends Thread</code>.  That's a bad habit that leads you into a less-useful way of thinking about threads.  The right way to think about threads and executors is that a thread or an executor is just this thing that executes some piece or pieces of code that you give it.  Nothing more.</p>\n\n<p>I've seen a lot of questions that say things like, \"I need the X thread to do Y, but...\", and what's leading them into trouble is that the developer has given the X thread too many <em>responsibilities</em>.</p>\n\n<p>In a well-designed program, it should not matter <em>which</em> thread does Y.  Threads should be anonymous and interchangeable.</p>\n\n<hr>\n\n<p><strong>Update:</strong></p>\n\n<blockquote>\n  <p>Can you suggest any method to close the threads without shutting down executor service.</p>\n</blockquote>\n\n<p>No, I can't.  If the threads were created by an ExecutorService, then it would be wrong for your program to kill those threads behind its back.</p>\n\n<p><strong>Q:</strong> What class are you using that implements <code>ExecutorService</code>?  Is it a <code>ThreadPoolExecutor</code> perhaps?  Perhaps you could solve your problem by creating a <code>ThreadFactory</code> that makes <em>daemon</em> threads, and then construct your <code>ThreadPoolExecutor</code> using that factory.  A daemon thread will not stop the program from exiting.</p>\n"},{"tags":[],"owner":{"account_id":21129688,"reputation":1,"user_id":15534329,"display_name":"Mattia"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1654113041,"creation_date":1654113041,"answer_id":72467337,"question_id":35944951,"body_markdown":"You can use Executors class that provides newFixedThreadPool method, so in this way you can select the max number of threads that you want to use. \r\nExceutors will use the same number of threads and will reuse the space if necessary. I attached the documentation\r\n\r\n    enter code hereint maxNumberOfThread=10;\r\n    ExecutorService pool=Executors.newFixedThreadPool(maxNumberOfThread);\r\n    ... \r\n    pool.execute(new Thread1(listOfFiles[i]));\r\n\r\n\r\nDocumentation\r\n[Executors][1], \r\n[ExecutorService][2]\r\n\r\n  \r\n  [1]: https://docs.oracle.com/en/java/javase/16/docs/api/java.base/java/util/concurrent/Executors.html\r\n[2]: https://docs.oracle.com/en/java/javase/16/docs/api/java.base/java/util/concurrent/ExecutorService.html","title":"Closing Threads in Executor Service without shutting it down","body":"<p>You can use Executors class that provides newFixedThreadPool method, so in this way you can select the max number of threads that you want to use.\nExceutors will use the same number of threads and will reuse the space if necessary. I attached the documentation</p>\n<pre><code>enter code hereint maxNumberOfThread=10;\nExecutorService pool=Executors.newFixedThreadPool(maxNumberOfThread);\n... \npool.execute(new Thread1(listOfFiles[i]));\n</code></pre>\n<p>Documentation\n<a href=\"https://docs.oracle.com/en/java/javase/16/docs/api/java.base/java/util/concurrent/Executors.html\" rel=\"nofollow noreferrer\">Executors</a>,\n<a href=\"https://docs.oracle.com/en/java/javase/16/docs/api/java.base/java/util/concurrent/ExecutorService.html\" rel=\"nofollow noreferrer\">ExecutorService</a></p>\n"}],"owner":{"account_id":7892626,"reputation":84,"user_id":5962312,"accept_rate":75,"display_name":"agasthya_tadakamalla"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1301,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":35946634,"answer_count":2,"score":0,"last_activity_date":1654113041,"creation_date":1457712829,"question_id":35944951,"body_markdown":"My code for executor service is shown below. I am executing multiple threads. But for some reason the program is not exiting as there are some threads in waiting state according to the logs. If I use Thread.start(), then I don&#39;t have that problem. I am facing the problem only when I am using ExecutorService.Can anyone tell me how to close all the threads which executed successfully without shutting down ExecutorService.\r\n\r\n    class ExecutorExample{\r\n        public static void main(){\r\n            File folder = new File(&quot;/home/agasthyt/agasthyt&quot;);\r\n            File[] listOfFiles = folder.listFiles();\r\n            for (int i = 0; i &lt; listOfFiles.length; i++) {\r\n                Thread1 thread1=new Thread1(listOfFiles[i]);\r\n                es.execute(thread1);\r\n        }\r\n      }\r\n    }\r\n\r\nclass Thread1 extends Thread{public void run(){......}}","title":"Closing Threads in Executor Service without shutting it down","body":"<p>My code for executor service is shown below. I am executing multiple threads. But for some reason the program is not exiting as there are some threads in waiting state according to the logs. If I use Thread.start(), then I don't have that problem. I am facing the problem only when I am using ExecutorService.Can anyone tell me how to close all the threads which executed successfully without shutting down ExecutorService.</p>\n\n<pre><code>class ExecutorExample{\n    public static void main(){\n        File folder = new File(\"/home/agasthyt/agasthyt\");\n        File[] listOfFiles = folder.listFiles();\n        for (int i = 0; i &lt; listOfFiles.length; i++) {\n            Thread1 thread1=new Thread1(listOfFiles[i]);\n            es.execute(thread1);\n    }\n  }\n}\n</code></pre>\n\n<p>class Thread1 extends Thread{public void run(){......}}</p>\n"},{"tags":["java","list","sorting","collections"],"comments":[{"owner":{"account_id":28352,"reputation":12591,"user_id":75694,"accept_rate":71,"display_name":"theycallmemorty"},"score":2,"creation_date":1259161782,"post_id":1797550,"comment_id":1685219,"body_markdown":"Can you show the code you&#39;re using to copy the list?","body":"Can you show the code you&#39;re using to copy the list?"}],"answers":[{"tags":[],"owner":{"account_id":70258,"reputation":590444,"user_id":203907,"accept_rate":81,"display_name":"Bozho"},"down_vote_count":0,"up_vote_count":49,"is_accepted":false,"score":49,"last_activity_date":1259161901,"creation_date":1259161901,"answer_id":1797570,"question_id":1797550,"body_markdown":"        List unmodifiableList = Collections.unmodifiableList(list);\r\n\r\n        List newList = new ArrayList(unmodifiableList);\r\n\r\n        Collections.sort(newList);\r\n\r\nThe constructor of `ArrayList` takes an existing list, reads its elements (without modifying them!), and adds them to the new List.","title":"Java: Sort an unmodifiable list","body":"<pre><code>    List unmodifiableList = Collections.unmodifiableList(list);\n\n    List newList = new ArrayList(unmodifiableList);\n\n    Collections.sort(newList);\n</code></pre>\n\n<p>The constructor of <code>ArrayList</code> takes an existing list, reads its elements (without modifying them!), and adds them to the new List.</p>\n"},{"tags":[],"owner":{"account_id":5022,"reputation":13852,"user_id":7867,"accept_rate":70,"display_name":"Mr. Shiny and New 安宇"},"down_vote_count":0,"up_vote_count":24,"is_accepted":true,"score":24,"last_activity_date":1259162051,"creation_date":1259162051,"answer_id":1797596,"question_id":1797550,"body_markdown":"Are you creating an empty list using `Collections.emptyList()`? If so, that is an unmodifiable list too and that may be the source of your problem.\r\n\r\nCreate a new list using the constructor for your List implementation, such as `new ArrayList()`.  You can pass the original list into the constructor or else use the `addAll()` method.","title":"Java: Sort an unmodifiable list","body":"<p>Are you creating an empty list using <code>Collections.emptyList()</code>? If so, that is an unmodifiable list too and that may be the source of your problem.</p>\n\n<p>Create a new list using the constructor for your List implementation, such as <code>new ArrayList()</code>.  You can pass the original list into the constructor or else use the <code>addAll()</code> method.</p>\n"},{"tags":[],"owner":{"account_id":36858,"reputation":113744,"user_id":105224,"accept_rate":73,"display_name":"Andreas Dolk"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1259162128,"creation_date":1259162128,"answer_id":1797606,"question_id":1797550,"body_markdown":"It should work as described. Elements in an unmodifiable List are not unmodifiable themselves. Of course you can&#39;t sort an unmodifiable List, because it has to be rewritten with add and delete operations, and those are not allowed. \r\n\r\nGuess the error is somewhere else, best would be to show your code :)","title":"Java: Sort an unmodifiable list","body":"<p>It should work as described. Elements in an unmodifiable List are not unmodifiable themselves. Of course you can't sort an unmodifiable List, because it has to be rewritten with add and delete operations, and those are not allowed. </p>\n\n<p>Guess the error is somewhere else, best would be to show your code :)</p>\n"},{"tags":[],"owner":{"account_id":69527,"reputation":40466,"user_id":202214,"display_name":"Kevin Bourrillion"},"down_vote_count":1,"up_vote_count":45,"is_accepted":false,"score":44,"last_activity_date":1631980628,"creation_date":1259165372,"answer_id":1798006,"question_id":1797550,"body_markdown":"FWIW, with [google-collections][1] it&#39;s a one-liner:\r\n\r\n    List&lt;Foo&gt; sorted = Ordering.natural().sortedCopy(unmodifiableList);\r\n\r\n\r\n  [1]: https://guava.dev/releases/23.0/api/docs/com/google/common/collect/Ordering.html#natural--","title":"Java: Sort an unmodifiable list","body":"<p>FWIW, with <a href=\"https://guava.dev/releases/23.0/api/docs/com/google/common/collect/Ordering.html#natural--\" rel=\"nofollow noreferrer\">google-collections</a> it's a one-liner:</p>\n<pre><code>List&lt;Foo&gt; sorted = Ordering.natural().sortedCopy(unmodifiableList);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":76705,"reputation":8914,"user_id":219394,"display_name":"Kevin Brock"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1493165844,"creation_date":1259241115,"answer_id":1803602,"question_id":1797550,"body_markdown":"I will answer your second question:\r\n\r\nYou cannot add to your &#39;taskListModifiable&#39; list because that is an &#39;unmodifiable&#39; list, which in Java means that it is immutable. An unmodifiable/immutable list or collection of any kind cannot be directly changed in any way - you cannot add elements to it, remove elements from it, or change references to existing elements.\r\n\r\nNote that existing elements in the list/collection may be changed if they are themselves mutable, but references to them from the list cannot be changed. That is, until the list goes completely out of scope and is garbage collected, the unmodifiable list will always contain those same references.\r\n\r\nNow, in your case, Collections.emptyList() returns an unmodifiable *EMPTY* list. This is actually always the same instance since it is immutable and always empty. You cannot add to it because of the rule that an immutable list cannot be expanded (added to). Since it is empty there is also nothing in it that can be changed.\r\n\r\nI should add to make it even more clear that Collection.emptyList() does not create an empty list. It just returns a reference to a singleton list instance.","title":"Java: Sort an unmodifiable list","body":"<p>I will answer your second question:</p>\n\n<p>You cannot add to your 'taskListModifiable' list because that is an 'unmodifiable' list, which in Java means that it is immutable. An unmodifiable/immutable list or collection of any kind cannot be directly changed in any way - you cannot add elements to it, remove elements from it, or change references to existing elements.</p>\n\n<p>Note that existing elements in the list/collection may be changed if they are themselves mutable, but references to them from the list cannot be changed. That is, until the list goes completely out of scope and is garbage collected, the unmodifiable list will always contain those same references.</p>\n\n<p>Now, in your case, Collections.emptyList() returns an unmodifiable <em>EMPTY</em> list. This is actually always the same instance since it is immutable and always empty. You cannot add to it because of the rule that an immutable list cannot be expanded (added to). Since it is empty there is also nothing in it that can be changed.</p>\n\n<p>I should add to make it even more clear that Collection.emptyList() does not create an empty list. It just returns a reference to a singleton list instance.</p>\n"},{"tags":[],"owner":{"account_id":153319,"reputation":2930,"user_id":368491,"display_name":"Soulman"},"down_vote_count":0,"up_vote_count":24,"is_accepted":false,"score":24,"last_activity_date":1654112703,"creation_date":1466000631,"answer_id":37838203,"question_id":1797550,"body_markdown":"In Java 8, you can use the streams API. For instance:\r\n\r\n    List&lt;?&gt; sortedList = unsortedList.stream().sorted().collect(Collectors.toList());\r\n\r\nSince Java 16, a Stream.toList() function was added, so the above can be shortened to:\r\n\r\n    List&lt;?&gt; sortedList = unsortedList.stream().sorted().toList();\r\n","title":"Java: Sort an unmodifiable list","body":"<p>In Java 8, you can use the streams API. For instance:</p>\n<pre><code>List&lt;?&gt; sortedList = unsortedList.stream().sorted().collect(Collectors.toList());\n</code></pre>\n<p>Since Java 16, a Stream.toList() function was added, so the above can be shortened to:</p>\n<pre><code>List&lt;?&gt; sortedList = unsortedList.stream().sorted().toList();\n</code></pre>\n"}],"owner":{"account_id":50383,"reputation":2186,"user_id":150295,"accept_rate":50,"display_name":"Lista"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":45467,"favorite_count":0,"down_vote_count":3,"up_vote_count":33,"accepted_answer_id":1797596,"answer_count":6,"score":30,"last_activity_date":1654112703,"creation_date":1259161734,"question_id":1797550,"body_markdown":"How would one do this?\r\n\r\nI have tried creating a new, empty list, then copying unmodifiable list&#39;s elements to it, but I&#39;m getting unsupported operation error.\r\n\r\nAny help is appreciated.","title":"Java: Sort an unmodifiable list","body":"<p>How would one do this?</p>\n\n<p>I have tried creating a new, empty list, then copying unmodifiable list's elements to it, but I'm getting unsupported operation error.</p>\n\n<p>Any help is appreciated.</p>\n"},{"tags":["java","database","h2"],"answers":[{"tags":[],"owner":{"account_id":19880578,"reputation":119,"user_id":14564685,"display_name":"marcellorinaldo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1654112475,"creation_date":1654112475,"answer_id":72467253,"question_id":69952158,"body_markdown":"The error you posted might due to a bug in the SHUTDOWN DEFRAG procedure.\r\n\r\nI had the same issue and solved it by opening the DB using the latest version of H2, which at the time of writing is 2.1.212.\r\n\r\nFor reference, [the H2 changelog][1] and the (suspected) issue link [Possibility of corruption after SHUTDOWN DEFRAG][2].\r\n\r\n\r\n  [1]: http://h2database.com/html/changelog.html\r\n  [2]: https://github.com/h2database/h2database/issues/3471","title":"Running H2 recovery script fails with [42000-200]","body":"<p>The error you posted might due to a bug in the SHUTDOWN DEFRAG procedure.</p>\n<p>I had the same issue and solved it by opening the DB using the latest version of H2, which at the time of writing is 2.1.212.</p>\n<p>For reference, <a href=\"http://h2database.com/html/changelog.html\" rel=\"nofollow noreferrer\">the H2 changelog</a> and the (suspected) issue link <a href=\"https://github.com/h2database/h2database/issues/3471\" rel=\"nofollow noreferrer\">Possibility of corruption after SHUTDOWN DEFRAG</a>.</p>\n"}],"owner":{"account_id":17645311,"reputation":11,"user_id":12806878,"display_name":"Alex Pogorelov"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":432,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1654112475,"creation_date":1636786595,"question_id":69952158,"body_markdown":"I have my H2 database corrupted (for unknown reason) having `java.lang.IllegalStateException: Chunk 1936 not found [1.4.200/9]`. \r\nNow I try to recover data. I made the following steps:\r\n\r\n 1. `java -cp h2*.jar org.h2.tools.Recover`\r\n 2.  `java -cp h2*.jar org.h2.tools.RunScript -url “jdbc:h2:file:~/tmp/recovery” -user user -password password -script file_generated_by_previous_step.mv.txt -showResults`\r\n\r\nSecond step starts and generates a lot of output (about processed roots and chunks), but then fails with error:\r\n```\r\n [42000-200]\r\n        at org.h2.message.DbException.getJdbcSQLException(DbException.java:453)\r\n        at org.h2.message.DbException.getJdbcSQLException(DbException.java:429)\r\n        at org.h2.message.DbException.get(DbException.java:205)\r\n        at org.h2.message.DbException.get(DbException.java:181)\r\n        at org.h2.message.DbException.getSyntaxError(DbException.java:229)\r\n        at org.h2.command.Parser.getSyntaxError(Parser.java:1051)\r\n        at org.h2.command.Parser.parsePrepared(Parser.java:1013)\r\n        at org.h2.command.Parser.parse(Parser.java:843)\r\n        at org.h2.command.Parser.parse(Parser.java:819)\r\n        at org.h2.command.Parser.prepareCommand(Parser.java:738)\r\n        at org.h2.engine.Session.prepareLocal(Session.java:657)\r\n        at org.h2.engine.Session.prepareCommand(Session.java:595)\r\n        at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1235)\r\n        at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:212)\r\n        at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:201)\r\n        at org.h2.tools.RunScript.process(RunScript.java:224)\r\n        at org.h2.tools.RunScript.process(RunScript.java:192)\r\n        at org.h2.tools.RunScript.process(RunScript.java:328)\r\n        at org.h2.tools.RunScript.runTool(RunScript.java:143)\r\n        at org.h2.tools.RunScript.main(RunScript.java:70)\r\n```\r\n\r\nAs a result generated `recovery.mv.db` is just an empty database with no data. \r\n\r\nPlease, help to extract any data from corrupted H2 database. I swear, I will never use this database again.","title":"Running H2 recovery script fails with [42000-200]","body":"<p>I have my H2 database corrupted (for unknown reason) having <code>java.lang.IllegalStateException: Chunk 1936 not found [1.4.200/9]</code>.\nNow I try to recover data. I made the following steps:</p>\n<ol>\n<li><code>java -cp h2*.jar org.h2.tools.Recover</code></li>\n<li><code>java -cp h2*.jar org.h2.tools.RunScript -url “jdbc:h2:file:~/tmp/recovery” -user user -password password -script file_generated_by_previous_step.mv.txt -showResults</code></li>\n</ol>\n<p>Second step starts and generates a lot of output (about processed roots and chunks), but then fails with error:</p>\n<pre><code> [42000-200]\n        at org.h2.message.DbException.getJdbcSQLException(DbException.java:453)\n        at org.h2.message.DbException.getJdbcSQLException(DbException.java:429)\n        at org.h2.message.DbException.get(DbException.java:205)\n        at org.h2.message.DbException.get(DbException.java:181)\n        at org.h2.message.DbException.getSyntaxError(DbException.java:229)\n        at org.h2.command.Parser.getSyntaxError(Parser.java:1051)\n        at org.h2.command.Parser.parsePrepared(Parser.java:1013)\n        at org.h2.command.Parser.parse(Parser.java:843)\n        at org.h2.command.Parser.parse(Parser.java:819)\n        at org.h2.command.Parser.prepareCommand(Parser.java:738)\n        at org.h2.engine.Session.prepareLocal(Session.java:657)\n        at org.h2.engine.Session.prepareCommand(Session.java:595)\n        at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1235)\n        at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:212)\n        at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:201)\n        at org.h2.tools.RunScript.process(RunScript.java:224)\n        at org.h2.tools.RunScript.process(RunScript.java:192)\n        at org.h2.tools.RunScript.process(RunScript.java:328)\n        at org.h2.tools.RunScript.runTool(RunScript.java:143)\n        at org.h2.tools.RunScript.main(RunScript.java:70)\n</code></pre>\n<p>As a result generated <code>recovery.mv.db</code> is just an empty database with no data.</p>\n<p>Please, help to extract any data from corrupted H2 database. I swear, I will never use this database again.</p>\n"},{"tags":["java","eclipse","jar","executable-jar"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1654079518,"post_id":72460266,"comment_id":128004990,"body_markdown":"You just need to put your resources [in the right place for Eclipse](https://technojeeves.com/index.php/aliasjava1/80-loading-files-as-resources-in-java-with-eclipse)","body":"You just need to put your resources <a href=\"https://technojeeves.com/index.php/aliasjava1/80-loading-files-as-resources-in-java-with-eclipse\" rel=\"nofollow noreferrer\">in the right place for Eclipse</a>"},{"owner":{"account_id":25445064,"reputation":3,"user_id":19247380,"display_name":"Ojee"},"score":0,"creation_date":1654108109,"post_id":72460266,"comment_id":128015465,"body_markdown":"@g00se It worked for the images but not for the csv file. When I run in Eclipse the images and the csv file work but when I import as jar the csv file doesnt work. &quot;Invalid file path&quot;\n\nThis works for the images.\n`background.setIcon(new ImageIcon(getClass().getResource(&quot;/resources/marvel_800_500.png&quot;)));`\n\nThis works in eclipse but not in jar\n\n`public static void loadAbilities(String filePath) throws IOException {\nBufferedReader br = new BufferedReader(new FileReader(filePath));`\n\n`loadAbilities((getClass().getResource(&quot;/resources/Abilities.csv&quot;)).getPath());`","body":"@g00se It worked for the images but not for the csv file. When I run in Eclipse the images and the csv file work but when I import as jar the csv file doesnt work. &quot;Invalid file path&quot;  This works for the images. <code>background.setIcon(new ImageIcon(getClass().getResource(&quot;&#47;resources&#47;marvel_800_500.&zwnj;&#8203;png&quot;)));</code>  This works in eclipse but not in jar  <code>public static void loadAbilities(String filePath) throws IOException { BufferedReader br = new BufferedReader(new FileReader(filePath));</code>  <code>loadAbilities((getClass().getResource(&quot;&#47;resources&#47;Abilities.&zwnj;&#8203;csv&quot;)).getPath());</code>"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1654108857,"post_id":72460266,"comment_id":128015709,"body_markdown":"Sorry. Try this `try (BufferedReader br = new BufferedReader(\n                new InputStreamReader(getClass().getResourceAsStream(&quot;/resources/foo.csv&quot;)))) {\n            // Code here\n        }\n`","body":"Sorry. Try this <code>try (BufferedReader br = new BufferedReader(                 new InputStreamReader(getClass().getResourceAsStream(&quot;&#47;resources&zwnj;&#8203;&#47;foo.csv&quot;)))) {             &#47;&#47; Code here         } </code>"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1654110749,"post_id":72460266,"comment_id":128016263,"body_markdown":"Will add as answer if you can accept","body":"Will add as answer if you can accept"}],"answers":[{"tags":[],"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1654110805,"creation_date":1654110805,"answer_id":72466996,"question_id":72460266,"body_markdown":"    try (BufferedReader br = new BufferedReader(\r\n            new InputStreamReader(getClass().getResourceAsStream(&quot;/resources/foo.csv&quot;)))) {\r\n        // Code here\r\n    }\r\n\r\nIs the correct way to read a resource with a `BufferedReader`","title":"Exporting JAR file from Eclipse doesn&#39;t include folders/files outside src","body":"<pre><code>try (BufferedReader br = new BufferedReader(\n        new InputStreamReader(getClass().getResourceAsStream(&quot;/resources/foo.csv&quot;)))) {\n    // Code here\n}\n</code></pre>\n<p>Is the correct way to read a resource with a <code>BufferedReader</code></p>\n"}],"owner":{"account_id":25445064,"reputation":3,"user_id":19247380,"display_name":"Ojee"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":276,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":72466996,"answer_count":1,"score":0,"last_activity_date":1654110805,"creation_date":1654079237,"question_id":72460266,"body_markdown":"I am trying to export a jar file using eclipse but it doesn&#39;t include any folder or file outside the src. I have an images folder and 2 csv files that I need to be in the jar file so the images can be displayed and for the csv files to be loaded. When I run in eclipse the images are displayed and the csv files are loaded but when I export as jar file they don&#39;t.\r\n\r\n    background.setIcon(new ImageIcon(&quot;images\\\\marvel_800_500.png&quot;));\r\n\r\nThis is how I&#39;m setting the images\r\n\r\n    public static void loadAbilities(String filePath)\r\n.\r\n\r\n    loadAbilities(&quot;Abilities.csv&quot;);\r\n\r\nHow can I include the folder/files in the jar file or load them in any way?\r\n\r\n[Java Project][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/JKtVT.png","title":"Exporting JAR file from Eclipse doesn&#39;t include folders/files outside src","body":"<p>I am trying to export a jar file using eclipse but it doesn't include any folder or file outside the src. I have an images folder and 2 csv files that I need to be in the jar file so the images can be displayed and for the csv files to be loaded. When I run in eclipse the images are displayed and the csv files are loaded but when I export as jar file they don't.</p>\n<pre><code>background.setIcon(new ImageIcon(&quot;images\\\\marvel_800_500.png&quot;));\n</code></pre>\n<p>This is how I'm setting the images</p>\n<pre><code>public static void loadAbilities(String filePath)\n</code></pre>\n<p>.</p>\n<pre><code>loadAbilities(&quot;Abilities.csv&quot;);\n</code></pre>\n<p>How can I include the folder/files in the jar file or load them in any way?</p>\n<p><a href=\"https://i.stack.imgur.com/JKtVT.png\" rel=\"nofollow noreferrer\">Java Project</a></p>\n"},{"tags":["java","html","forms","spring-mvc","thymeleaf"],"answers":[{"tags":[],"owner":{"account_id":19332677,"reputation":302,"user_id":14133911,"display_name":"Rafael da Silva"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1654110459,"creation_date":1654110459,"answer_id":72466949,"question_id":72452286,"body_markdown":"you can try to use `${#strings.toLowerCase(element.key)}`\r\n\r\n    &lt;form th:action=&quot;#&quot; th:object=&quot;${foo}&quot; method=&quot;post&quot;&gt;...\r\n        &lt;input type=&quot;text&quot; th:id=&quot;${#strings.toLowerCase(element.key)}&quot; th:name=${#strings.toLowerCase(element.key)} th:value=&quot;${element.value}&quot;/&gt; ...\r\n    &lt;/form&gt; ","title":"thymeleaf object binding can ignore case for form fields?","body":"<p>you can try to use <code>${#strings.toLowerCase(element.key)}</code></p>\n<pre><code>&lt;form th:action=&quot;#&quot; th:object=&quot;${foo}&quot; method=&quot;post&quot;&gt;...\n    &lt;input type=&quot;text&quot; th:id=&quot;${#strings.toLowerCase(element.key)}&quot; th:name=${#strings.toLowerCase(element.key)} th:value=&quot;${element.value}&quot;/&gt; ...\n&lt;/form&gt; \n</code></pre>\n"}],"owner":{"account_id":3252649,"reputation":230,"user_id":2742526,"accept_rate":100,"display_name":"aarav"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":225,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":72466949,"answer_count":1,"score":0,"last_activity_date":1654110459,"creation_date":1654020086,"question_id":72452286,"body_markdown":"Newly started using thymeleaf for my application. I am building a dynamic form from controller where form fields are created as a list of map. Each key value pair is iterated as below.\r\n\r\n      &lt;form th:action=&quot;#&quot; th:object=&quot;${foo}&quot; method=&quot;post&quot;&gt;...\r\n      &lt;input type=&quot;text&quot; id=${element.key}   \r\n\t\t\tth:name=${element.key} th:value=&quot;${element.value}&quot;/&gt; ...&lt;/form&gt; \r\n\r\n  \r\n\r\nMy Pojo has properties in lower case as following java standard. But when building the key property my code uses the Capital letters from external file and also in order to have a better readability on UI not converting from upper case to lower case conversion in \r\n ` mydata.put(&quot;KEY&quot;, 90);`.\r\n\r\nUpon submitting the page, my form elements not binding with propery key  of Foo class due to KEY to key is not mapping. Getting `null` for the form fields due to input form field name as &#39;KEY&#39;. I suspect the reason for getting null values for input text fields entered in html pages are due to case-sensitive of object properties in Foo class. \r\n\r\n` class Foo {\r\n  private String key;  //KEY can be a fix but naming convention is missing.\r\n}\r\n`\r\n\r\nIs there any thymeleaf tags available to ignore cases when binding html-elements to objects  ? Or shall I use any JavaScript tweak upon submitting the form ? Like sending lower case and converting to upper case on form load to display ?\r\n\r\n","title":"thymeleaf object binding can ignore case for form fields?","body":"<p>Newly started using thymeleaf for my application. I am building a dynamic form from controller where form fields are created as a list of map. Each key value pair is iterated as below.</p>\n<pre><code>  &lt;form th:action=&quot;#&quot; th:object=&quot;${foo}&quot; method=&quot;post&quot;&gt;...\n  &lt;input type=&quot;text&quot; id=${element.key}   \n        th:name=${element.key} th:value=&quot;${element.value}&quot;/&gt; ...&lt;/form&gt; \n</code></pre>\n<p>My Pojo has properties in lower case as following java standard. But when building the key property my code uses the Capital letters from external file and also in order to have a better readability on UI not converting from upper case to lower case conversion in\n<code> mydata.put(&quot;KEY&quot;, 90);</code>.</p>\n<p>Upon submitting the page, my form elements not binding with propery key  of Foo class due to KEY to key is not mapping. Getting <code>null</code> for the form fields due to input form field name as 'KEY'. I suspect the reason for getting null values for input text fields entered in html pages are due to case-sensitive of object properties in Foo class.</p>\n<p><code>class Foo { private String key;  //KEY can be a fix but naming convention is missing. }</code></p>\n<p>Is there any thymeleaf tags available to ignore cases when binding html-elements to objects  ? Or shall I use any JavaScript tweak upon submitting the form ? Like sending lower case and converting to upper case on form load to display ?</p>\n"},{"tags":["java","debugging","arguments","stack-trace"],"comments":[{"owner":{"account_id":266709,"reputation":11846,"user_id":554431,"display_name":"bestsss"},"score":0,"creation_date":1297247931,"post_id":4943612,"comment_id":5512925,"body_markdown":"you can if you attach a debugger, otherwise - no. The parameters might be in CPU registers (not on the stack)","body":"you can if you attach a debugger, otherwise - no. The parameters might be in CPU registers (not on the stack)"},{"owner":{"account_id":19582,"reputation":8170,"user_id":45974,"accept_rate":86,"display_name":"Tom"},"score":0,"creation_date":1297247993,"post_id":4943612,"comment_id":5512939,"body_markdown":"I&#39;m afraid I cannot attach a debugger for my purposes","body":"I&#39;m afraid I cannot attach a debugger for my purposes"},{"owner":{"account_id":266709,"reputation":11846,"user_id":554431,"display_name":"bestsss"},"score":0,"creation_date":1297248165,"post_id":4943612,"comment_id":5512991,"body_markdown":"Then you&#39;re lost, besides ClassLoader and enhancing on-the-fly the class to trap the arguments. (but you&#39;d not ask if you knew how)","body":"Then you&#39;re lost, besides ClassLoader and enhancing on-the-fly the class to trap the arguments. (but you&#39;d not ask if you knew how)"},{"owner":{"account_id":283609,"reputation":45044,"user_id":581205,"accept_rate":72,"display_name":"maaartinus"},"score":0,"creation_date":1297248877,"post_id":4943612,"comment_id":5513166,"body_markdown":"When a debugger can do it, then it must be possible somehow. AFAIK, a debugger doesn&#39;t use code instrumentation or alike, since it can be attached to any Java process. No idea how this works, maybe some JMX?","body":"When a debugger can do it, then it must be possible somehow. AFAIK, a debugger doesn&#39;t use code instrumentation or alike, since it can be attached to any Java process. No idea how this works, maybe some JMX?"},{"owner":{"account_id":266709,"reputation":11846,"user_id":554431,"display_name":"bestsss"},"score":0,"creation_date":1297248985,"post_id":4943612,"comment_id":5513188,"body_markdown":"The debugger has its own API and it&#39;s not JMX but you must start java w/ the debugger settings. Technically you can implement the debugger interface, stop the thread, examine the stack frame, etc...","body":"The debugger has its own API and it&#39;s not JMX but you must start java w/ the debugger settings. Technically you can implement the debugger interface, stop the thread, examine the stack frame, etc..."},{"owner":{"account_id":19582,"reputation":8170,"user_id":45974,"accept_rate":86,"display_name":"Tom"},"score":0,"creation_date":1297249432,"post_id":4943612,"comment_id":5513275,"body_markdown":"@bestssss so theoretically it is possible to copy paste the debugger API into my own debugging library?","body":"@bestssss so theoretically it is possible to copy paste the debugger API into my own debugging library?"},{"owner":{"account_id":266709,"reputation":11846,"user_id":554431,"display_name":"bestsss"},"score":0,"creation_date":1297249760,"post_id":4943612,"comment_id":5513331,"body_markdown":"@Tom, copy/paste  - hardly, eclipse has an implementation of (the API is socket based). Which part of &#39;starting w/ the debgger settings&#39; is unclear? I told that in my very 1st comment. Anaways, to recap: you have the options: a) start w/ a debugger settings and implement and interface, hopefully you can debugger from the same process; b) modify the JVM; c) load the classes and enhance them on-the-fly to store their arguments and clean on exit, it will slow down the execution significantly.","body":"@Tom, copy/paste  - hardly, eclipse has an implementation of (the API is socket based). Which part of &#39;starting w/ the debgger settings&#39; is unclear? I told that in my very 1st comment. Anaways, to recap: you have the options: a) start w/ a debugger settings and implement and interface, hopefully you can debugger from the same process; b) modify the JVM; c) load the classes and enhance them on-the-fly to store their arguments and clean on exit, it will slow down the execution significantly."},{"owner":{"account_id":19582,"reputation":8170,"user_id":45974,"accept_rate":86,"display_name":"Tom"},"score":0,"creation_date":1297249875,"post_id":4943612,"comment_id":5513356,"body_markdown":"@bestsss, what class would you extend in the JDK to modifiy the JVM (option b)? How would you enhance the classes on the fly (option c) to store their arguments?","body":"@bestsss, what class would you extend in the JDK to modifiy the JVM (option b)? How would you enhance the classes on the fly (option c) to store their arguments?"},{"owner":{"account_id":266709,"reputation":11846,"user_id":554431,"display_name":"bestsss"},"score":0,"creation_date":1297249944,"post_id":4943612,"comment_id":5513371,"body_markdown":"@Tom, still i am in the haze, how will you call your OWN classes within unmodified source code? The call illustrated above in your question cannot happen unless you force it to...","body":"@Tom, still i am in the haze, how will you call your OWN classes within unmodified source code? The call illustrated above in your question cannot happen unless you force it to..."},{"owner":{"account_id":266709,"reputation":11846,"user_id":554431,"display_name":"bestsss"},"score":0,"creation_date":1297250029,"post_id":4943612,"comment_id":5513398,"body_markdown":"@Tom, enhancing on the fly will be around at least 3k-4k lines of code, modifying the VM - not extending, you need to hack the hotspot (it&#39;s in C)","body":"@Tom, enhancing on the fly will be around at least 3k-4k lines of code, modifying the VM - not extending, you need to hack the hotspot (it&#39;s in C)"},{"owner":{"account_id":19582,"reputation":8170,"user_id":45974,"accept_rate":86,"display_name":"Tom"},"score":0,"creation_date":1297250355,"post_id":4943612,"comment_id":5513473,"body_markdown":"@bestsss, of course the methods are called by an application. I however do not wish to modifiy the source of this application in order to see the arguments of the caller (it&#39;s a temporary debug). I cannot attach a debugger either. So I am interested in option b and c. For option b, can I not just find a &quot;Method&quot; class in the JDK source, modify that and rebuild the JDK? (I am talking about the high level .java files source, not the C source)","body":"@bestsss, of course the methods are called by an application. I however do not wish to modifiy the source of this application in order to see the arguments of the caller (it&#39;s a temporary debug). I cannot attach a debugger either. So I am interested in option b and c. For option b, can I not just find a &quot;Method&quot; class in the JDK source, modify that and rebuild the JDK? (I am talking about the high level .java files source, not the C source)"},{"owner":{"account_id":266709,"reputation":11846,"user_id":554431,"display_name":"bestsss"},"score":0,"creation_date":1297250536,"post_id":4943612,"comment_id":5513503,"body_markdown":"@Tom, I never mentioned JDK, and if you have full control over the running environment I see no reason to skip the debugger as the most natural choice.","body":"@Tom, I never mentioned JDK, and if you have full control over the running environment I see no reason to skip the debugger as the most natural choice."},{"owner":{"account_id":19582,"reputation":8170,"user_id":45974,"accept_rate":86,"display_name":"Tom"},"score":0,"creation_date":1297250670,"post_id":4943612,"comment_id":5513529,"body_markdown":"@bestsss, I cannot attach a debugger (I have my reasons). Simply redistributing a modified JDK is more suitable for my needs. Is there no class in the JDK that each method inherits?","body":"@bestsss, I cannot attach a debugger (I have my reasons). Simply redistributing a modified JDK is more suitable for my needs. Is there no class in the JDK that each method inherits?"},{"owner":{"account_id":19582,"reputation":8170,"user_id":45974,"accept_rate":86,"display_name":"Tom"},"score":1,"creation_date":1297257438,"post_id":4943612,"comment_id":5515039,"body_markdown":"@bestsss, this lead me to a follow up question: http://stackoverflow.com/questions/4945358/java-do-methods-inherit-a-jre-super-class-like-classes-inherit-object - I accepted this question.","body":"@bestsss, this lead me to a follow up question: <a href=\"http://stackoverflow.com/questions/4945358/java-do-methods-inherit-a-jre-super-class-like-classes-inherit-object\" title=\"java do methods inherit a jre super class like classes inherit object\">stackoverflow.com/questions/4945358/&hellip;</a> - I accepted this question."}],"answers":[{"tags":[],"owner":{"account_id":50391,"reputation":11219,"user_id":150325,"accept_rate":100,"display_name":"Christopher Klewes"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1297253900,"creation_date":1297247756,"answer_id":4943672,"question_id":4943612,"body_markdown":"I think this could be possible, because `input` is out of scope but isn&#39;t yet accessible for garbage collection, so the value still exists, but unfortunately I don&#39;t believe there is an default API way to access it. This could be maybe possible with a custom implemented NDC (*nested diagnostic context*) for the logging approach.","title":"How to get arguments passed to method that called this method?","body":"<p>I think this could be possible, because <code>input</code> is out of scope but isn't yet accessible for garbage collection, so the value still exists, but unfortunately I don't believe there is an default API way to access it. This could be maybe possible with a custom implemented NDC (<em>nested diagnostic context</em>) for the logging approach.</p>\n"},{"tags":[],"owner":{"account_id":102965,"reputation":415230,"user_id":276052,"accept_rate":80,"display_name":"aioobe"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1297247783,"creation_date":1297247783,"answer_id":4943679,"question_id":4943612,"body_markdown":"I don&#39;t believe this is possible using the standard Java API.\r\n\r\nWhat you could do is to use AspectJ, place a point-cut at the calling method, save the arguments, place a point-cut at the called method and pass on the arguments.\r\n\r\nAnother option (slightly more advanced) is to use a custom, bytecode-rewriting, class loader that saves the original arguments, and passes them on as extra arguments to the next method. This would probably take a day or two to implement. Suitable frameworks are [BCEL](http://jakarta.apache.org/bcel/) or [ASM](http://asm.ow2.org/).","title":"How to get arguments passed to method that called this method?","body":"<p>I don't believe this is possible using the standard Java API.</p>\n\n<p>What you could do is to use AspectJ, place a point-cut at the calling method, save the arguments, place a point-cut at the called method and pass on the arguments.</p>\n\n<p>Another option (slightly more advanced) is to use a custom, bytecode-rewriting, class loader that saves the original arguments, and passes them on as extra arguments to the next method. This would probably take a day or two to implement. Suitable frameworks are <a href=\"http://jakarta.apache.org/bcel/\" rel=\"nofollow\">BCEL</a> or <a href=\"http://asm.ow2.org/\" rel=\"nofollow\">ASM</a>.</p>\n"},{"tags":[],"owner":{"account_id":801922,"reputation":1,"user_id":609585,"display_name":"Ujjwal"},"down_vote_count":4,"up_vote_count":0,"is_accepted":false,"score":-4,"last_activity_date":1362146842,"creation_date":1297248260,"answer_id":4943764,"question_id":4943612,"body_markdown":"This is possible using Reflection API !\r\n\r\n    public class StackTrace {\r\n    \tpublic static void main(String args[]) {\r\n    \t\tStackTrace st = new StackTrace();\r\n    \t\tst.func();\r\n    \t}\r\n    \tpublic void func() {\r\n    \t\tOtherClass os =new OtherClass();\r\n    \t\tos.getStackTrace(this);\r\n    \t}\r\n    }\r\n    \r\n    class OtherClass {\r\n    \tvoid getStackTrace(Object obj)  {\r\n    \t\tSystem.out.println(obj.getClass());\r\n    \t}\r\n    }\r\n","title":"How to get arguments passed to method that called this method?","body":"<p>This is possible using Reflection API !</p>\n\n<pre><code>public class StackTrace {\n    public static void main(String args[]) {\n        StackTrace st = new StackTrace();\n        st.func();\n    }\n    public void func() {\n        OtherClass os =new OtherClass();\n        os.getStackTrace(this);\n    }\n}\n\nclass OtherClass {\n    void getStackTrace(Object obj)  {\n        System.out.println(obj.getClass());\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":300661,"reputation":1942,"user_id":607917,"display_name":"evilcandybag"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1297248339,"creation_date":1297248339,"answer_id":4943779,"question_id":4943612,"body_markdown":"I&#39;m not sure why you&#39;d ever want to do this in Java?\r\n\r\nThe only way I can think of is to create a custom wrapper object for the passed string, thus sending the reference to the wrapper instead of a new string each time.  \r\nI&#39;d advice against it, though, since it clutters your original code, and makes it even more error prone.  \r\n\r\nMight this problem not be solved using a debugger, like the one built into eclipse, to inspect your state?","title":"How to get arguments passed to method that called this method?","body":"<p>I'm not sure why you'd ever want to do this in Java?</p>\n\n<p>The only way I can think of is to create a custom wrapper object for the passed string, thus sending the reference to the wrapper instead of a new string each time.<br>\nI'd advice against it, though, since it clutters your original code, and makes it even more error prone.  </p>\n\n<p>Might this problem not be solved using a debugger, like the one built into eclipse, to inspect your state?</p>\n"},{"tags":[],"owner":{"account_id":1931144,"reputation":2211,"user_id":1740505,"display_name":"Lalit Jha"},"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1375355840,"creation_date":1375355840,"answer_id":17992582,"question_id":4943612,"body_markdown":"You can get name of caller method and its class, but you have to add some code in current method:\r\n\r\n        public static void main(String[] args) throws Exception {\r\n\t\tcall();\r\n\t}\r\n\r\n\tprivate static void call() {\r\n\t\tException exception = new Exception();\r\n\t\tfor(StackTraceElement trace : exception.getStackTrace()){\r\n\t\t\tSystem.out.println(trace.getMethodName());\r\n\t\t}\r\n\t}\r\n\r\nThis will print &quot;call&quot; and &quot;main&quot;, methods name in called order (reverse).","title":"How to get arguments passed to method that called this method?","body":"<p>You can get name of caller method and its class, but you have to add some code in current method:</p>\n\n<pre><code>    public static void main(String[] args) throws Exception {\n    call();\n}\n\nprivate static void call() {\n    Exception exception = new Exception();\n    for(StackTraceElement trace : exception.getStackTrace()){\n        System.out.println(trace.getMethodName());\n    }\n}\n</code></pre>\n\n<p>This will print \"call\" and \"main\", methods name in called order (reverse).</p>\n"},{"tags":[],"owner":{"account_id":5330844,"reputation":14681,"user_id":4251431,"accept_rate":80,"display_name":"Basheer AL-MOMANI"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1582722559,"creation_date":1582722559,"answer_id":60414705,"question_id":4943612,"body_markdown":"In my case, I needed to get a parameter value has been passed to a method in a certain stack frame to be used later within the execution flow\r\n\r\nI used `ThreadLocal` to store it and when I needed it I was able to retrieve it at any point in code as I declared it as `public static` \r\n\r\nhere is a skeleton example\r\n\r\n    public static final ThreadLocal&lt;SomeType&gt; IMPORTANT_THREAD_LOCAL_FOR_BLA = ThreadLocal.withInitial(whatever);\r\n\r\n    methodWithImportantParam(SomeType importantValue){\r\n        // save it in the static threadLocal Field\r\n        this.IMPORTANT_THREAD_LOCAL_FOR_BLA.get()=importantValue;// code to set the value\r\n        // continue method logic\r\n    }\r\n\r\nand somewhere in code where you need that value \r\n\r\n    YourClass.IMPORTANT_THREAD_LOCAL_FOR_BLA.get()\r\n\r\nbut make sure the execution flow that you set the value then you retrieve it \r\n\r\n\r\nhope my answer add something valuable to this question","title":"How to get arguments passed to method that called this method?","body":"<p>In my case, I needed to get a parameter value has been passed to a method in a certain stack frame to be used later within the execution flow</p>\n\n<p>I used <code>ThreadLocal</code> to store it and when I needed it I was able to retrieve it at any point in code as I declared it as <code>public static</code> </p>\n\n<p>here is a skeleton example</p>\n\n<pre><code>public static final ThreadLocal&lt;SomeType&gt; IMPORTANT_THREAD_LOCAL_FOR_BLA = ThreadLocal.withInitial(whatever);\n\nmethodWithImportantParam(SomeType importantValue){\n    // save it in the static threadLocal Field\n    this.IMPORTANT_THREAD_LOCAL_FOR_BLA.get()=importantValue;// code to set the value\n    // continue method logic\n}\n</code></pre>\n\n<p>and somewhere in code where you need that value </p>\n\n<pre><code>YourClass.IMPORTANT_THREAD_LOCAL_FOR_BLA.get()\n</code></pre>\n\n<p>but make sure the execution flow that you set the value then you retrieve it </p>\n\n<p>hope my answer add something valuable to this question</p>\n"}],"owner":{"account_id":19582,"reputation":8170,"user_id":45974,"accept_rate":86,"display_name":"Tom"},"comment_count":14,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10247,"favorite_count":0,"down_vote_count":0,"up_vote_count":19,"accepted_answer_id":4943679,"answer_count":6,"score":19,"last_activity_date":1654110141,"creation_date":1297247487,"question_id":4943612,"body_markdown":"In Java, it is possible to get the class and method that called the current method (the method in which you get the StackTrace).\r\n\r\nCan I get the arguments that were passed to the method that called this method?\r\n\r\nI need this for debugging purposes.\r\n\r\nEg:\r\n\r\n    baseClass {\r\n       initialFunc(input) {\r\n           var modifiedInput = input + &quot; I modified you&quot;;\r\n           otherClass.doSomething(modifiedInput);\r\n       }\r\n    }\r\n    \r\n    otherClass {\r\n        doSomething(input)  {\r\n             //GET THE ARGUMENTS PASSED TO THE METHOD OF THE CLASS THAT CALLED THIS METHOD\r\n        }\r\n    }\r\n\r\nCan one get this information from the stacktrace, or are there other means?\r\n\r\n*(Note that I need to be able to do this in runtime and cannot actually change the source of baseClass, this is going to be a feature of my debugging class that does not know the source beforehand)*","title":"How to get arguments passed to method that called this method?","body":"<p>In Java, it is possible to get the class and method that called the current method (the method in which you get the StackTrace).</p>\n<p>Can I get the arguments that were passed to the method that called this method?</p>\n<p>I need this for debugging purposes.</p>\n<p>Eg:</p>\n<pre><code>baseClass {\n   initialFunc(input) {\n       var modifiedInput = input + &quot; I modified you&quot;;\n       otherClass.doSomething(modifiedInput);\n   }\n}\n\notherClass {\n    doSomething(input)  {\n         //GET THE ARGUMENTS PASSED TO THE METHOD OF THE CLASS THAT CALLED THIS METHOD\n    }\n}\n</code></pre>\n<p>Can one get this information from the stacktrace, or are there other means?</p>\n<p><em>(Note that I need to be able to do this in runtime and cannot actually change the source of baseClass, this is going to be a feature of my debugging class that does not know the source beforehand)</em></p>\n"},{"tags":["java","java-stream"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1654054699,"post_id":72456181,"comment_id":127998184,"body_markdown":"Please read [ask].","body":"Please read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>."}],"answers":[{"tags":[],"owner":{"account_id":5569841,"reputation":3750,"user_id":4415625,"display_name":"dani-vta"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1654067570,"creation_date":1654067570,"answer_id":72457698,"question_id":72456181,"body_markdown":"If you want to rewrite your `handleRequest` method by using streams, then you simply need to stream the `event.getRecords()`, invoke the `map` operation to map each record to the `Map` given by the `getNewImage()` method, filter for only the maps that contain the &quot;status&quot; key and whose value is equals to &quot;finished&quot;. Finally, execute the operations you need in the terminal operation `foreach`.\r\n\r\n```\r\npublic void handleRequest(final DynamodbEvent event, final Context context) {\r\n    event.getRecords().stream()\r\n        .map(ddbRecord -&gt; ddbRecord.getDynamodb().getNewImage())\r\n        .filter(map -&gt; map.containsKey(&quot;status&quot;) &amp;&amp; map.get(&quot;status&quot;).equals(&quot;FINISHED&quot;))\r\n        .foreach(value -&gt; /*... do something ...*/);\r\n}\r\n```","title":"Transform and filter through streams this java code","body":"<p>If you want to rewrite your <code>handleRequest</code> method by using streams, then you simply need to stream the <code>event.getRecords()</code>, invoke the <code>map</code> operation to map each record to the <code>Map</code> given by the <code>getNewImage()</code> method, filter for only the maps that contain the &quot;status&quot; key and whose value is equals to &quot;finished&quot;. Finally, execute the operations you need in the terminal operation <code>foreach</code>.</p>\n<pre><code>public void handleRequest(final DynamodbEvent event, final Context context) {\n    event.getRecords().stream()\n        .map(ddbRecord -&gt; ddbRecord.getDynamodb().getNewImage())\n        .filter(map -&gt; map.containsKey(&quot;status&quot;) &amp;&amp; map.get(&quot;status&quot;).equals(&quot;FINISHED&quot;))\n        .foreach(value -&gt; /*... do something ...*/);\n}\n</code></pre>\n"}],"owner":{"account_id":5872134,"reputation":915,"user_id":4624150,"accept_rate":32,"display_name":"Saad"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":96,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"answer_count":1,"score":-1,"last_activity_date":1654110082,"creation_date":1654054410,"question_id":72456181,"body_markdown":"I have the below code, and I would like to utilize the new java constructs such as streams, filters etc to simplify it.\r\n\r\nPossibly something like \r\n```\r\n eventsToBeProcessed = event.getRecords().filter(\r\n   // filter all status that are finished\r\n);\r\nif (eventsToBeProcessed == null)\r\n\r\n     return from function;\r\n\r\n// loop through all the eventsToBeProcessed for processing\r\n\r\n```\r\n\r\nThis is the code I currently have\r\n```\r\n public Void handleRequest(final DynamodbEvent event, final Context context) {\r\n\r\n     for (final DynamodbEvent.DynamodbStreamRecord ddbRecord : event.getRecords()) {\r\n            Map&lt;String, AttributeValue&gt; map = ddbRecord.getDynamodb().getNewImage();\r\n            if (map.containsKey(&quot;status&quot;) &amp;&amp; map.get(&quot;status&quot;).equals(&quot;FINISHED&quot;)) {\r\n                // Do something\r\n            }\r\n        }\r\n  }\r\n\r\n// return from function","title":"Transform and filter through streams this java code","body":"<p>I have the below code, and I would like to utilize the new java constructs such as streams, filters etc to simplify it.</p>\n<p>Possibly something like</p>\n<pre><code> eventsToBeProcessed = event.getRecords().filter(\n   // filter all status that are finished\n);\nif (eventsToBeProcessed == null)\n\n     return from function;\n\n// loop through all the eventsToBeProcessed for processing\n\n</code></pre>\n<p>This is the code I currently have</p>\n<pre><code> public Void handleRequest(final DynamodbEvent event, final Context context) {\n\n     for (final DynamodbEvent.DynamodbStreamRecord ddbRecord : event.getRecords()) {\n            Map&lt;String, AttributeValue&gt; map = ddbRecord.getDynamodb().getNewImage();\n            if (map.containsKey(&quot;status&quot;) &amp;&amp; map.get(&quot;status&quot;).equals(&quot;FINISHED&quot;)) {\n                // Do something\n            }\n        }\n  }\n\n// return from function\n</code></pre>\n"},{"tags":["java","spring","spring-boot","postman"],"answers":[{"tags":[],"owner":{"account_id":16125470,"reputation":253,"user_id":11640307,"display_name":"Siva Rahul"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1654109953,"creation_date":1654109953,"answer_id":72466842,"question_id":72466412,"body_markdown":"For quotes, the data type that should come as per the json string is a List. but was given a Map in the DTO.  \r\nThe DTO should be :: \r\n```\r\nimport com.google.gson.Gson;\r\n\r\nimport java.util.List;\r\n\r\npublic class GsonMappingExample {\r\n    public static void main(String[] args) {\r\n        String jsonString = &quot;{\\&quot;stockId\\&quot;:\\&quot;test3\\&quot;,\\&quot;quotes\\&quot;:[{\\&quot;quoteDate\\&quot;:\\&quot;2003-05-14\\&quot;,\\&quot;quoteValue\\&quot;:\\&quot;35.9\\&quot;},{\\&quot;quoteDate\\&quot;:\\&quot;2016-03-28\\&quot;,\\&quot;quoteValue\\&quot;:\\&quot;55.0\\&quot;}]}&quot;;\r\n        Gson gson = new Gson();\r\n        StockDTO stockDTO = gson.fromJson(jsonString, StockDTO.class);\r\n        System.out.println(stockDTO);\r\n    }\r\n}\r\n\r\nclass StockDTO {\r\n    private final String stockId;\r\n    private final List&lt;Quote&gt; quotes;\r\n\r\n    public StockDTO(String stockId, List&lt;Quote&gt; quotes) {\r\n        this.stockId = stockId;\r\n        this.quotes = quotes;\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n        return &quot;StockDTO{&quot; +\r\n                &quot;stockId=&#39;&quot; + stockId + &#39;\\&#39;&#39; +\r\n                &quot;, quoteList=&quot; + quotes +\r\n                &#39;}&#39;;\r\n    }\r\n}\r\n\r\nclass Quote {\r\n    private final String quoteDate;\r\n    private final Double quoteValue;\r\n\r\n    public Quote(String quoteDate, Double quoteValue) {\r\n        this.quoteDate = quoteDate;\r\n        this.quoteValue = quoteValue;\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n        return &quot;Quote{&quot; +\r\n                &quot;quoteDate=&quot; + quoteDate +\r\n                &quot;, quoteValue=&quot; + quoteValue +\r\n                &#39;}&#39;;\r\n    }\r\n}\r\n```\r\n\r\nPS: Here I&#39;m using Gson library to parse the json string, spring-boot automatically does that (using Jackson library I think!)","title":"How do I receive a dto, with a map as one of it&#39;s atributes, as a parameter of my controller? (REST API)","body":"<p>For quotes, the data type that should come as per the json string is a List. but was given a Map in the DTO.<br />\nThe DTO should be ::</p>\n<pre><code>import com.google.gson.Gson;\n\nimport java.util.List;\n\npublic class GsonMappingExample {\n    public static void main(String[] args) {\n        String jsonString = &quot;{\\&quot;stockId\\&quot;:\\&quot;test3\\&quot;,\\&quot;quotes\\&quot;:[{\\&quot;quoteDate\\&quot;:\\&quot;2003-05-14\\&quot;,\\&quot;quoteValue\\&quot;:\\&quot;35.9\\&quot;},{\\&quot;quoteDate\\&quot;:\\&quot;2016-03-28\\&quot;,\\&quot;quoteValue\\&quot;:\\&quot;55.0\\&quot;}]}&quot;;\n        Gson gson = new Gson();\n        StockDTO stockDTO = gson.fromJson(jsonString, StockDTO.class);\n        System.out.println(stockDTO);\n    }\n}\n\nclass StockDTO {\n    private final String stockId;\n    private final List&lt;Quote&gt; quotes;\n\n    public StockDTO(String stockId, List&lt;Quote&gt; quotes) {\n        this.stockId = stockId;\n        this.quotes = quotes;\n    }\n\n    @Override\n    public String toString() {\n        return &quot;StockDTO{&quot; +\n                &quot;stockId='&quot; + stockId + '\\'' +\n                &quot;, quoteList=&quot; + quotes +\n                '}';\n    }\n}\n\nclass Quote {\n    private final String quoteDate;\n    private final Double quoteValue;\n\n    public Quote(String quoteDate, Double quoteValue) {\n        this.quoteDate = quoteDate;\n        this.quoteValue = quoteValue;\n    }\n\n    @Override\n    public String toString() {\n        return &quot;Quote{&quot; +\n                &quot;quoteDate=&quot; + quoteDate +\n                &quot;, quoteValue=&quot; + quoteValue +\n                '}';\n    }\n}\n</code></pre>\n<p>PS: Here I'm using Gson library to parse the json string, spring-boot automatically does that (using Jackson library I think!)</p>\n"}],"owner":{"account_id":18557063,"reputation":13,"user_id":13521876,"display_name":"Bruno"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":374,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":72466842,"answer_count":1,"score":1,"last_activity_date":1654109953,"creation_date":1654107478,"question_id":72466412,"body_markdown":"When I try to send it, it show me the &quot;error&quot;: &quot;Bad Request&quot;,\r\n&quot;trace&quot;: &quot;...HttpMessageNotReadableException: JSON parse error: Cannot deserialize Map key of type `java.time.LocalDate` from String \\&quot;quoteDate\\&quot;: Failed to deserialize java.time.LocalDate&quot;\r\n\r\nThe JSON I am sending via postman:\r\n```\r\n{\r\n    &quot;stockId&quot;:&quot;test3&quot;,\r\n    &quot;quotes&quot;:[\r\n        {\r\n        &quot;quoteDate&quot;:&quot;2003-05-14&quot;,\r\n        &quot;quoteValue&quot;:&quot;35.9&quot;\r\n        },\r\n        {\r\n        &quot;quoteDate&quot;:&quot;2016-03-28&quot;,\r\n        &quot;quoteValue&quot;:&quot;55.0&quot;\r\n        }\r\n    ]\r\n}\r\n```\r\nThe controller:\r\n```\r\n@PostMapping(&quot;/stock/save&quot;)\r\n    public void saveQuotes(@RequestBody StockDTO stockDTO) {\r\n        System.out.println(stockDTO.toString());\r\n    }\r\n```\r\nThe DTO\r\n```\r\npublic class StockDTO {\r\n    String id;\r\n    String stockId;\r\n    Map&lt;LocalDate, Double&gt; quotes;\r\n}\r\n```","title":"How do I receive a dto, with a map as one of it&#39;s atributes, as a parameter of my controller? (REST API)","body":"<p>When I try to send it, it show me the &quot;error&quot;: &quot;Bad Request&quot;,\n&quot;trace&quot;: &quot;...HttpMessageNotReadableException: JSON parse error: Cannot deserialize Map key of type <code>java.time.LocalDate</code> from String &quot;quoteDate&quot;: Failed to deserialize java.time.LocalDate&quot;</p>\n<p>The JSON I am sending via postman:</p>\n<pre><code>{\n    &quot;stockId&quot;:&quot;test3&quot;,\n    &quot;quotes&quot;:[\n        {\n        &quot;quoteDate&quot;:&quot;2003-05-14&quot;,\n        &quot;quoteValue&quot;:&quot;35.9&quot;\n        },\n        {\n        &quot;quoteDate&quot;:&quot;2016-03-28&quot;,\n        &quot;quoteValue&quot;:&quot;55.0&quot;\n        }\n    ]\n}\n</code></pre>\n<p>The controller:</p>\n<pre><code>@PostMapping(&quot;/stock/save&quot;)\n    public void saveQuotes(@RequestBody StockDTO stockDTO) {\n        System.out.println(stockDTO.toString());\n    }\n</code></pre>\n<p>The DTO</p>\n<pre><code>public class StockDTO {\n    String id;\n    String stockId;\n    Map&lt;LocalDate, Double&gt; quotes;\n}\n</code></pre>\n"},{"tags":["java","spring-boot","spring-security","spring-data-jpa"],"answers":[{"tags":[],"owner":{"account_id":7247808,"reputation":3044,"user_id":5819877,"accept_rate":100,"display_name":"Praveen Kumar K S"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1654109930,"creation_date":1586142467,"answer_id":61052381,"question_id":61052063,"body_markdown":"Please add this line in your ```application.properties``` file \r\n\r\n```\r\nmanagement.security.enabled= false\r\n```","title":"How to insert data under secure rest endpoints by spring security using MYSQL","body":"<p>Please add this line in your <code>application.properties</code> file</p>\n<pre><code>management.security.enabled= false\n</code></pre>\n"}],"owner":{"account_id":4238143,"reputation":121,"user_id":3468771,"display_name":"Badar Ali"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":200,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1654109930,"creation_date":1586139562,"question_id":61052063,"body_markdown":"I am new to spring boot 2. For creating rest-full service using spring security and MySQL based authentication, I am following this [article][1] but got stucked in registration process.\r\n\r\n**Problem 1**: I am unable to understand URL requesting pattern to register a user with particular role.  \r\n**Problem 2:** On browser side, If I hit `localhost:8080` then I get login page which I haven&#39;t implemented. Why I am getting a UI and from where?\r\n\r\nPom.xml\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    \txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    \t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \t&lt;parent&gt;\r\n    \t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;2.2.5.RELEASE&lt;/version&gt;\r\n    \t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n    \t&lt;/parent&gt;\r\n    \t&lt;groupId&gt;badar.tme&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;tme&lt;/artifactId&gt;\r\n    \t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n    \t&lt;packaging&gt;war&lt;/packaging&gt;\r\n    \t&lt;name&gt;tme&lt;/name&gt;\r\n    \t&lt;description&gt;TME ordering system developed by ONSETS&lt;/description&gt;\r\n    \r\n    \t&lt;properties&gt;\r\n    \t\t&lt;java.version&gt;1.8&lt;/java.version&gt;\r\n    \t&lt;/properties&gt;\r\n    \r\n    \t&lt;dependencies&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n    \t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;mysql&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n    \t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;!-- spring security --&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;provided&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n    \t\t\t&lt;exclusions&gt;\r\n    \t\t\t\t&lt;exclusion&gt;\r\n    \t\t\t\t\t&lt;groupId&gt;org.junit.vintage&lt;/groupId&gt;\r\n    \t\t\t\t\t&lt;artifactId&gt;junit-vintage-engine&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;/exclusion&gt;\r\n    \t\t\t&lt;/exclusions&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t&lt;/dependencies&gt;\r\n    \r\n    \t&lt;build&gt;\r\n    \t\t&lt;plugins&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t&lt;/plugins&gt;\r\n    \t&lt;/build&gt;\r\n    \r\n    &lt;/project&gt;\r\n\r\n\r\n\r\n\r\n[Here is Login UI which is miracle for me right now.][2]\r\n\r\nAuth Controller (rest controller)\r\n\r\n     @RequestMapping(value = &quot;/registration&quot;, method = RequestMethod.POST)\r\n    \t    public ResponseEntity&lt;Users&gt; createNewUser(@Valid Users user, String role) {\r\n    \t        \r\n    \t        Users userExists = userService.findUserByEmail(user.getEmail());\r\n    \t        if (userExists == null) {\r\n    \t        \tResponseEntity.badRequest().build();\r\n    \t        } \r\n    \t        return ResponseEntity.ok(userService.save(user, role));\r\n    \t    }\r\n\r\n\r\nWebSecurityConfigurerAdapter child file\r\n\r\n    package com.tme.runner;\r\n    \r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.context.annotation.Bean;\r\n    import org.springframework.context.annotation.Configuration;\r\n    import org.springframework.data.jpa.repository.config.EnableJpaRepositories;\r\n    import org.springframework.security.config.annotation.authentication.builders.AuthenticationManagerBuilder;\r\n    import org.springframework.security.config.annotation.method.configuration.EnableGlobalMethodSecurity;\r\n    import org.springframework.security.config.annotation.web.builders.HttpSecurity;\r\n    import org.springframework.security.config.annotation.web.builders.WebSecurity;\r\n    import org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\r\n    import org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;\r\n    import org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;\r\n    \r\n    import com.tme.service.MyUserDetailsService;\r\n    \r\n    @EnableGlobalMethodSecurity(prePostEnabled = true)\r\n    @Configuration\r\n    @EnableWebSecurity\r\n    @EnableJpaRepositories(basePackageClasses = com.tme.repo.UserRepository.class)\r\n    public class WebSecurityConfiguration extends WebSecurityConfigurerAdapter{\r\n    \r\n    \t@Autowired\r\n        private BCryptPasswordEncoder bCryptPasswordEncoder;\r\n    \r\n    \t@Bean\r\n        public BCryptPasswordEncoder passwordEncoder() {\r\n            BCryptPasswordEncoder bCryptPasswordEncoder = new BCryptPasswordEncoder();\r\n            return bCryptPasswordEncoder;\r\n        }\r\n    \t\r\n        @Autowired\r\n        private MyUserDetailsService userDetailsService;\r\n        \r\n    //    @Bean\r\n    //    public PasswordEncoder passwordEncoder() {\r\n    //        return new BCryptPasswordEncoder();\r\n    //    }\r\n    \r\n    \r\n        @Override\r\n        protected void configure(AuthenticationManagerBuilder auth) throws Exception {\r\n                    auth\r\n                        .userDetailsService(userDetailsService)\r\n                        .passwordEncoder(bCryptPasswordEncoder);\r\n        }\r\n        \r\n        \r\n       \r\n        \r\n        @Override\r\n        protected void configure(HttpSecurity http) throws Exception {\r\n    \r\n            http\r\n            \t\t.httpBasic()\r\n            \t\t.and()\r\n            \t\t.authorizeRequests()\r\n                    .antMatchers(&quot;/login&quot;).permitAll()\r\n                    .antMatchers(&quot;/registration&quot;).permitAll()\r\n                    .antMatchers(&quot;/api/v1/**&quot;).hasAuthority(&quot;ADMIN&quot;)\r\n                    .and()\r\n                    .csrf().disable()\r\n                    .formLogin().disable();\r\n                    \r\n        }\r\n    \r\n        @Override\r\n        public void configure(WebSecurity web) throws Exception {\r\n            web\r\n                    .ignoring()\r\n                    .antMatchers(&quot;/resources/**&quot;, &quot;/static/**&quot;, &quot;/css/**&quot;, &quot;/js/**&quot;, &quot;/images/**&quot;);\r\n        }\r\n        \r\n    }\r\n\r\n\r\nUser Entity class\r\n\r\n    package com.tme.model;\r\n    \r\n    import lombok.AllArgsConstructor;\r\n    import lombok.Builder;\r\n    import lombok.Data;\r\n    import lombok.NoArgsConstructor;\r\n    import org.hibernate.validator.constraints.Length;\r\n    import javax.persistence.*;\r\n    import javax.validation.constraints.Email;\r\n    import javax.validation.constraints.NotEmpty;\r\n    import java.util.Set;\r\n    \r\n    \r\n    /**\r\n     * @author badar\r\n     */\r\n    @Data\r\n    @Builder\r\n    @AllArgsConstructor\r\n    @NoArgsConstructor\r\n    @Entity\r\n    @Table(name = &quot;users&quot;)\r\n    public class Users {\r\n    \r\n    \t@Id\r\n        @GeneratedValue(strategy = GenerationType.AUTO)\r\n        @Column(name = &quot;user_id&quot;)\r\n        private int id;\r\n        @Column(name = &quot;user_name&quot;)\r\n        @Length(min = 5, message = &quot;*Your user name must have at least 5 characters&quot;)\r\n        @NotEmpty(message = &quot;*Please provide a user name&quot;)\r\n        private String userName;\r\n        @Column(name = &quot;email&quot;)\r\n        @Email(message = &quot;*Please provide a valid Email&quot;)\r\n        @NotEmpty(message = &quot;*Please provide an email&quot;)\r\n        private String email;\r\n        @Column(name = &quot;password&quot;)\r\n        @Length(min = 5, message = &quot;*Your password must have at least 5 characters&quot;)\r\n        @NotEmpty(message = &quot;*Please provide your password&quot;)\r\n        private String password;\r\n        @Column(name = &quot;name&quot;)\r\n        @NotEmpty(message = &quot;*Please provide your name&quot;)\r\n        private String name;\r\n        @Column(name = &quot;last_name&quot;)\r\n        @NotEmpty(message = &quot;*Please provide your last name&quot;)\r\n        private String lastName;\r\n        @Column(name = &quot;active&quot;)\r\n        private Boolean active;\r\n        @ManyToMany(cascade = CascadeType.MERGE)\r\n        @JoinTable(name = &quot;user_role&quot;, joinColumns = @JoinColumn(name = &quot;user_id&quot;), inverseJoinColumns = @JoinColumn(name = &quot;role_id&quot;))\r\n        private Set&lt;Roles&gt; roles;\r\n        \r\n        public Users() {}\r\n        public Users(\r\n    \t\t\tString userName,\r\n    \t\t\tString email,\r\n    \t\t\tString password,\r\n    \t\t\tString name,\r\n    \t\t\tString lastName, \r\n    \t\t\tBoolean active) {\r\n    \t\t\r\n    \t\tthis.userName = userName;\r\n    \t\tthis.email = email;\r\n    \t\tthis.password = password;\r\n    \t\tthis.name = name;\r\n    \t\tthis.lastName = lastName;\r\n    \t\tthis.active = active;\r\n    \t}\r\n    \tpublic Users(\r\n    \t\t\tString userName,\r\n    \t\t\tString email,\r\n    \t\t\tString password,\r\n    \t\t\tString name,\r\n    \t\t\tString lastName, \r\n    \t\t\tBoolean active, \r\n    \t\t\tSet&lt;Roles&gt; roles) {\r\n    \t\t\r\n    \t\tthis.userName = userName;\r\n    \t\tthis.email = email;\r\n    \t\tthis.password = password;\r\n    \t\tthis.name = name;\r\n    \t\tthis.lastName = lastName;\r\n    \t\tthis.active = active;\r\n    \t\tthis.roles = roles;\r\n    \t}\r\n    \r\n    \tpublic int getId() {\r\n    \t\treturn id;\r\n    \t}\r\n    \r\n    \tpublic void setId(int id) {\r\n    \t\tthis.id = id;\r\n    \t}\r\n    \r\n    \tpublic String getUserName() {\r\n    \t\treturn userName;\r\n    \t}\r\n    \r\n    \tpublic void setUserName(String userName) {\r\n    \t\tthis.userName = userName;\r\n    \t}\r\n    \r\n    \tpublic String getEmail() {\r\n    \t\treturn email;\r\n    \t}\r\n    \r\n    \tpublic void setEmail(String email) {\r\n    \t\tthis.email = email;\r\n    \t}\r\n    \r\n    \tpublic String getPassword() {\r\n    \t\treturn password;\r\n    \t}\r\n    \r\n    \tpublic void setPassword(String password) {\r\n    \t\tthis.password = password;\r\n    \t}\r\n    \r\n    \tpublic String getName() {\r\n    \t\treturn name;\r\n    \t}\r\n    \r\n    \tpublic void setName(String name) {\r\n    \t\tthis.name = name;\r\n    \t}\r\n    \r\n    \tpublic String getLastName() {\r\n    \t\treturn lastName;\r\n    \t}\r\n    \r\n    \tpublic void setLastName(String lastName) {\r\n    \t\tthis.lastName = lastName;\r\n    \t}\r\n    \r\n    \tpublic Boolean getActive() {\r\n    \t\treturn active;\r\n    \t}\r\n    \r\n    \tpublic void setActive(Boolean active) {\r\n    \t\tthis.active = active;\r\n    \t}\r\n    \r\n    \tpublic Set&lt;Roles&gt; getRoles() {\r\n    \t\treturn roles;\r\n    \t}\r\n    \r\n    \tpublic void setRoles(Set&lt;Roles&gt; roles) {\r\n    \t\tthis.roles = roles;\r\n    \t}\r\n        \r\n        \r\n        \r\n    }\r\n\r\nService Class\r\n\r\n    package com.tme.service;\r\n    \r\n    import java.util.Arrays;\r\n    import java.util.HashSet;\r\n    import java.util.List;\r\n    import java.util.Optional;\r\n    \r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.context.annotation.Bean;\r\n    import org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;\r\n    import org.springframework.security.crypto.password.PasswordEncoder;\r\n    import org.springframework.stereotype.Service;\r\n    \r\n    import com.tme.model.Roles;\r\n    import com.tme.model.Users;\r\n    import com.tme.repo.RoleRepository;\r\n    import com.tme.repo.UserRepository;\r\n    \r\n    @Service\r\n    public class UsersServices {\r\n    \r\n    \t@Autowired(required=false)\r\n    \tprivate UserRepository userRepository;\r\n    \t@Autowired(required=false)\r\n        private RoleRepository roleRepository;\r\n        @Autowired(required=false)\r\n        private BCryptPasswordEncoder bCryptPasswordEncoder;\r\n    \r\n    //    public UsersServices(BCryptPasswordEncoder bCryptPasswordEncoder,UserRepository userRepository,\r\n    //                       RoleRepository roleRepository\r\n    //                       ) {\r\n    //        this.userRepository = userRepository;\r\n    //        this.roleRepository = roleRepository;\r\n    //        this.bCryptPasswordEncoder = bCryptPasswordEncoder;\r\n    //    }\r\n        \r\n        @Bean\r\n        public PasswordEncoder passwordEncoder() {\r\n            return new BCryptPasswordEncoder();\r\n        }\r\n    \t\r\n    \tpublic List&lt;Users&gt; findAll(){\r\n    \t\treturn userRepository.findAll();\r\n    \t}\r\n    \t\r\n    \tpublic Users findUserByEmail(String email) {\r\n            return userRepository.findByEmail(email);\r\n        }\r\n    \t\r\n    \tpublic Users findUserByUserName(String userName) {\r\n            return userRepository.findByUserName(userName);\r\n        }\r\n    \t\r\n    \tpublic Optional&lt;Users&gt; findById(Long id){\r\n    \t\treturn userRepository.findById(id);\r\n    \t}\r\n    \t\r\n    \tpublic Users save(Users data) {\r\n    \t\tdata.setPassword(bCryptPasswordEncoder.encode(data.getPassword()));\r\n    \t\tdata.setActive(true);\r\n            Roles userRole = roleRepository.findByRole(&quot;ADMIN&quot;);\r\n            data.setRoles(new HashSet&lt;Roles&gt;(Arrays.asList(userRole)));\r\n            return userRepository.save(data);\r\n    \t}\r\n    \t\r\n    \tpublic Users save(Users data, String role) {\r\n    \t\tdata.setPassword(bCryptPasswordEncoder.encode(data.getPassword()));\r\n            Roles userRole = roleRepository.findByRole(role);\r\n            data.setRoles(new HashSet&lt;Roles&gt;(Arrays.asList(userRole)));\r\n            return userRepository.save(data);\r\n    \t}\r\n    \t\r\n    \tpublic void deleteById(Long id) {\r\n    \t\tuserRepository.deleteById(id);\r\n    \t}\r\n    }\r\n\r\nMyUserDetailsService class\r\n\r\n    @Service\r\n    public class MyUserDetailsService implements UserDetailsService{\r\n    \r\n    \t@Autowired\r\n        private UsersServices userService;\r\n        \r\n        @Override\r\n        @Transactional\r\n        public UserDetails loadUserByUsername(String email) throws UsernameNotFoundException {\r\n        \t\r\n            Users user = userService.findUserByEmail(email);\r\n            if (user == null) {\r\n                throw new UsernameNotFoundException(&quot;Not found!&quot;);\r\n            }\r\n            \r\n            List&lt;GrantedAuthority&gt; authorities = getUserAuthority(user.getRoles());\r\n            return buildUserForAuthentication(user, authorities);\r\n        }\r\n    \r\n        private List&lt;GrantedAuthority&gt; getUserAuthority(Set&lt;Roles&gt; userRoles) {\r\n            Set&lt;GrantedAuthority&gt; roles = new HashSet&lt;GrantedAuthority&gt;();\r\n            for (Roles role : userRoles) {\r\n                roles.add(new SimpleGrantedAuthority(role.getRole()));\r\n            }\r\n            List&lt;GrantedAuthority&gt; grantedAuthorities = new ArrayList&lt;&gt;(roles);\r\n            return grantedAuthorities;\r\n        }\r\n        \r\n        private UserDetails buildUserForAuthentication(Users user, List&lt;GrantedAuthority&gt; authorities) {\r\n            return new org.springframework.security.core.userdetails.User(user.getUserName(), user.getPassword(),\r\n                    user.getActive(), true, true, true, authorities);\r\n        }\r\n    }\r\n\r\nMyUserDetail\r\n\r\n    public class MyUserDetails extends Users implements UserDetails{\r\n    \t\r\n    \tprivate String userName;\r\n    \tprivate String email;\r\n    \tprivate String password;\r\n    \tprivate String name;\r\n    \tprivate String lastName; \r\n    \tprivate Boolean active;\r\n    \t \r\n    \t\r\n    \tpublic MyUserDetails(Users user) {\r\n    \t\tthis.userName = user.getUserName();\r\n    \t\tthis.email = user.getEmail();\r\n    \t\tthis.password = user.getPassword();\r\n    \t\tthis.name = user.getName();\r\n    \t\tthis.lastName = user.getLastName();\r\n    \t\tthis.active = user.getActive();\r\n    \t}\r\n    \t\r\n    \t\r\n    \t\r\n    \t@Override\r\n    \tpublic Collection&lt;? extends GrantedAuthority&gt; getAuthorities() {\r\n    \t\t// TODO Auto-generated method stub\r\n    \t\treturn getRoles()\r\n                    .stream()\r\n                    .map(role -&gt; new SimpleGrantedAuthority(&quot;ROLE_&quot; + role.getRole()))\r\n                    .collect(Collectors.toList());\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic String getPassword() {\r\n    \t\t// TODO Auto-generated method stub\r\n    \t\treturn password;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic String getUsername() {\r\n    \t\t// TODO Auto-generated method stub\r\n    \t\treturn userName;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic boolean isAccountNonExpired() {\r\n    \t\t// TODO Auto-generated method stub\r\n    \t\treturn true;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic boolean isAccountNonLocked() {\r\n    \t\t// TODO Auto-generated method stub\r\n    \t\treturn true;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic boolean isCredentialsNonExpired() {\r\n    \t\t// TODO Auto-generated method stub\r\n    \t\treturn true;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic boolean isEnabled() {\r\n    \t\t// TODO Auto-generated method stub\r\n    \t\treturn active;\r\n    \t}\r\n    \r\n    }\r\n\r\nI think I have done every thing. Don&#39;t know how to save/Regsiter New user. If I will be able to regsiter a user then can test my login URL. Thanks inadvance.\r\n\r\n  [1]: https://medium.com/@gustavo.ponce.ch/spring-boot-spring-mvc-spring-security-mysql-a5d8545d837d\r\n  [2]: https://i.stack.imgur.com/sUNpz.png\r\n\r\n","title":"How to insert data under secure rest endpoints by spring security using MYSQL","body":"<p>I am new to spring boot 2. For creating rest-full service using spring security and MySQL based authentication, I am following this <a href=\"https://medium.com/@gustavo.ponce.ch/spring-boot-spring-mvc-spring-security-mysql-a5d8545d837d\" rel=\"nofollow noreferrer\">article</a> but got stucked in registration process.</p>\n\n<p><strong>Problem 1</strong>: I am unable to understand URL requesting pattern to register a user with particular role.<br>\n<strong>Problem 2:</strong> On browser side, If I hit <code>localhost:8080</code> then I get login page which I haven't implemented. Why I am getting a UI and from where?</p>\n\n<p>Pom.xml</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.2.5.RELEASE&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;badar.tme&lt;/groupId&gt;\n    &lt;artifactId&gt;tme&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;packaging&gt;war&lt;/packaging&gt;\n    &lt;name&gt;tme&lt;/name&gt;\n    &lt;description&gt;TME ordering system developed by ONSETS&lt;/description&gt;\n\n    &lt;properties&gt;\n        &lt;java.version&gt;1.8&lt;/java.version&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;mysql&lt;/groupId&gt;\n            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;!-- spring security --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;org.junit.vintage&lt;/groupId&gt;\n                    &lt;artifactId&gt;junit-vintage-engine&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/sUNpz.png\" rel=\"nofollow noreferrer\">Here is Login UI which is miracle for me right now.</a></p>\n\n<p>Auth Controller (rest controller)</p>\n\n<pre><code> @RequestMapping(value = \"/registration\", method = RequestMethod.POST)\n        public ResponseEntity&lt;Users&gt; createNewUser(@Valid Users user, String role) {\n\n            Users userExists = userService.findUserByEmail(user.getEmail());\n            if (userExists == null) {\n                ResponseEntity.badRequest().build();\n            } \n            return ResponseEntity.ok(userService.save(user, role));\n        }\n</code></pre>\n\n<p>WebSecurityConfigurerAdapter child file</p>\n\n<pre><code>package com.tme.runner;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.data.jpa.repository.config.EnableJpaRepositories;\nimport org.springframework.security.config.annotation.authentication.builders.AuthenticationManagerBuilder;\nimport org.springframework.security.config.annotation.method.configuration.EnableGlobalMethodSecurity;\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\nimport org.springframework.security.config.annotation.web.builders.WebSecurity;\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\nimport org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;\nimport org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;\n\nimport com.tme.service.MyUserDetailsService;\n\n@EnableGlobalMethodSecurity(prePostEnabled = true)\n@Configuration\n@EnableWebSecurity\n@EnableJpaRepositories(basePackageClasses = com.tme.repo.UserRepository.class)\npublic class WebSecurityConfiguration extends WebSecurityConfigurerAdapter{\n\n    @Autowired\n    private BCryptPasswordEncoder bCryptPasswordEncoder;\n\n    @Bean\n    public BCryptPasswordEncoder passwordEncoder() {\n        BCryptPasswordEncoder bCryptPasswordEncoder = new BCryptPasswordEncoder();\n        return bCryptPasswordEncoder;\n    }\n\n    @Autowired\n    private MyUserDetailsService userDetailsService;\n\n//    @Bean\n//    public PasswordEncoder passwordEncoder() {\n//        return new BCryptPasswordEncoder();\n//    }\n\n\n    @Override\n    protected void configure(AuthenticationManagerBuilder auth) throws Exception {\n                auth\n                    .userDetailsService(userDetailsService)\n                    .passwordEncoder(bCryptPasswordEncoder);\n    }\n\n\n\n\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n\n        http\n                .httpBasic()\n                .and()\n                .authorizeRequests()\n                .antMatchers(\"/login\").permitAll()\n                .antMatchers(\"/registration\").permitAll()\n                .antMatchers(\"/api/v1/**\").hasAuthority(\"ADMIN\")\n                .and()\n                .csrf().disable()\n                .formLogin().disable();\n\n    }\n\n    @Override\n    public void configure(WebSecurity web) throws Exception {\n        web\n                .ignoring()\n                .antMatchers(\"/resources/**\", \"/static/**\", \"/css/**\", \"/js/**\", \"/images/**\");\n    }\n\n}\n</code></pre>\n\n<p>User Entity class</p>\n\n<pre><code>package com.tme.model;\n\nimport lombok.AllArgsConstructor;\nimport lombok.Builder;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\nimport org.hibernate.validator.constraints.Length;\nimport javax.persistence.*;\nimport javax.validation.constraints.Email;\nimport javax.validation.constraints.NotEmpty;\nimport java.util.Set;\n\n\n/**\n * @author badar\n */\n@Data\n@Builder\n@AllArgsConstructor\n@NoArgsConstructor\n@Entity\n@Table(name = \"users\")\npublic class Users {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    @Column(name = \"user_id\")\n    private int id;\n    @Column(name = \"user_name\")\n    @Length(min = 5, message = \"*Your user name must have at least 5 characters\")\n    @NotEmpty(message = \"*Please provide a user name\")\n    private String userName;\n    @Column(name = \"email\")\n    @Email(message = \"*Please provide a valid Email\")\n    @NotEmpty(message = \"*Please provide an email\")\n    private String email;\n    @Column(name = \"password\")\n    @Length(min = 5, message = \"*Your password must have at least 5 characters\")\n    @NotEmpty(message = \"*Please provide your password\")\n    private String password;\n    @Column(name = \"name\")\n    @NotEmpty(message = \"*Please provide your name\")\n    private String name;\n    @Column(name = \"last_name\")\n    @NotEmpty(message = \"*Please provide your last name\")\n    private String lastName;\n    @Column(name = \"active\")\n    private Boolean active;\n    @ManyToMany(cascade = CascadeType.MERGE)\n    @JoinTable(name = \"user_role\", joinColumns = @JoinColumn(name = \"user_id\"), inverseJoinColumns = @JoinColumn(name = \"role_id\"))\n    private Set&lt;Roles&gt; roles;\n\n    public Users() {}\n    public Users(\n            String userName,\n            String email,\n            String password,\n            String name,\n            String lastName, \n            Boolean active) {\n\n        this.userName = userName;\n        this.email = email;\n        this.password = password;\n        this.name = name;\n        this.lastName = lastName;\n        this.active = active;\n    }\n    public Users(\n            String userName,\n            String email,\n            String password,\n            String name,\n            String lastName, \n            Boolean active, \n            Set&lt;Roles&gt; roles) {\n\n        this.userName = userName;\n        this.email = email;\n        this.password = password;\n        this.name = name;\n        this.lastName = lastName;\n        this.active = active;\n        this.roles = roles;\n    }\n\n    public int getId() {\n        return id;\n    }\n\n    public void setId(int id) {\n        this.id = id;\n    }\n\n    public String getUserName() {\n        return userName;\n    }\n\n    public void setUserName(String userName) {\n        this.userName = userName;\n    }\n\n    public String getEmail() {\n        return email;\n    }\n\n    public void setEmail(String email) {\n        this.email = email;\n    }\n\n    public String getPassword() {\n        return password;\n    }\n\n    public void setPassword(String password) {\n        this.password = password;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public String getLastName() {\n        return lastName;\n    }\n\n    public void setLastName(String lastName) {\n        this.lastName = lastName;\n    }\n\n    public Boolean getActive() {\n        return active;\n    }\n\n    public void setActive(Boolean active) {\n        this.active = active;\n    }\n\n    public Set&lt;Roles&gt; getRoles() {\n        return roles;\n    }\n\n    public void setRoles(Set&lt;Roles&gt; roles) {\n        this.roles = roles;\n    }\n\n\n\n}\n</code></pre>\n\n<p>Service Class</p>\n\n<pre><code>package com.tme.service;\n\nimport java.util.Arrays;\nimport java.util.HashSet;\nimport java.util.List;\nimport java.util.Optional;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;\nimport org.springframework.security.crypto.password.PasswordEncoder;\nimport org.springframework.stereotype.Service;\n\nimport com.tme.model.Roles;\nimport com.tme.model.Users;\nimport com.tme.repo.RoleRepository;\nimport com.tme.repo.UserRepository;\n\n@Service\npublic class UsersServices {\n\n    @Autowired(required=false)\n    private UserRepository userRepository;\n    @Autowired(required=false)\n    private RoleRepository roleRepository;\n    @Autowired(required=false)\n    private BCryptPasswordEncoder bCryptPasswordEncoder;\n\n//    public UsersServices(BCryptPasswordEncoder bCryptPasswordEncoder,UserRepository userRepository,\n//                       RoleRepository roleRepository\n//                       ) {\n//        this.userRepository = userRepository;\n//        this.roleRepository = roleRepository;\n//        this.bCryptPasswordEncoder = bCryptPasswordEncoder;\n//    }\n\n    @Bean\n    public PasswordEncoder passwordEncoder() {\n        return new BCryptPasswordEncoder();\n    }\n\n    public List&lt;Users&gt; findAll(){\n        return userRepository.findAll();\n    }\n\n    public Users findUserByEmail(String email) {\n        return userRepository.findByEmail(email);\n    }\n\n    public Users findUserByUserName(String userName) {\n        return userRepository.findByUserName(userName);\n    }\n\n    public Optional&lt;Users&gt; findById(Long id){\n        return userRepository.findById(id);\n    }\n\n    public Users save(Users data) {\n        data.setPassword(bCryptPasswordEncoder.encode(data.getPassword()));\n        data.setActive(true);\n        Roles userRole = roleRepository.findByRole(\"ADMIN\");\n        data.setRoles(new HashSet&lt;Roles&gt;(Arrays.asList(userRole)));\n        return userRepository.save(data);\n    }\n\n    public Users save(Users data, String role) {\n        data.setPassword(bCryptPasswordEncoder.encode(data.getPassword()));\n        Roles userRole = roleRepository.findByRole(role);\n        data.setRoles(new HashSet&lt;Roles&gt;(Arrays.asList(userRole)));\n        return userRepository.save(data);\n    }\n\n    public void deleteById(Long id) {\n        userRepository.deleteById(id);\n    }\n}\n</code></pre>\n\n<p>MyUserDetailsService class</p>\n\n<pre><code>@Service\npublic class MyUserDetailsService implements UserDetailsService{\n\n    @Autowired\n    private UsersServices userService;\n\n    @Override\n    @Transactional\n    public UserDetails loadUserByUsername(String email) throws UsernameNotFoundException {\n\n        Users user = userService.findUserByEmail(email);\n        if (user == null) {\n            throw new UsernameNotFoundException(\"Not found!\");\n        }\n\n        List&lt;GrantedAuthority&gt; authorities = getUserAuthority(user.getRoles());\n        return buildUserForAuthentication(user, authorities);\n    }\n\n    private List&lt;GrantedAuthority&gt; getUserAuthority(Set&lt;Roles&gt; userRoles) {\n        Set&lt;GrantedAuthority&gt; roles = new HashSet&lt;GrantedAuthority&gt;();\n        for (Roles role : userRoles) {\n            roles.add(new SimpleGrantedAuthority(role.getRole()));\n        }\n        List&lt;GrantedAuthority&gt; grantedAuthorities = new ArrayList&lt;&gt;(roles);\n        return grantedAuthorities;\n    }\n\n    private UserDetails buildUserForAuthentication(Users user, List&lt;GrantedAuthority&gt; authorities) {\n        return new org.springframework.security.core.userdetails.User(user.getUserName(), user.getPassword(),\n                user.getActive(), true, true, true, authorities);\n    }\n}\n</code></pre>\n\n<p>MyUserDetail</p>\n\n<pre><code>public class MyUserDetails extends Users implements UserDetails{\n\n    private String userName;\n    private String email;\n    private String password;\n    private String name;\n    private String lastName; \n    private Boolean active;\n\n\n    public MyUserDetails(Users user) {\n        this.userName = user.getUserName();\n        this.email = user.getEmail();\n        this.password = user.getPassword();\n        this.name = user.getName();\n        this.lastName = user.getLastName();\n        this.active = user.getActive();\n    }\n\n\n\n    @Override\n    public Collection&lt;? extends GrantedAuthority&gt; getAuthorities() {\n        // TODO Auto-generated method stub\n        return getRoles()\n                .stream()\n                .map(role -&gt; new SimpleGrantedAuthority(\"ROLE_\" + role.getRole()))\n                .collect(Collectors.toList());\n    }\n\n    @Override\n    public String getPassword() {\n        // TODO Auto-generated method stub\n        return password;\n    }\n\n    @Override\n    public String getUsername() {\n        // TODO Auto-generated method stub\n        return userName;\n    }\n\n    @Override\n    public boolean isAccountNonExpired() {\n        // TODO Auto-generated method stub\n        return true;\n    }\n\n    @Override\n    public boolean isAccountNonLocked() {\n        // TODO Auto-generated method stub\n        return true;\n    }\n\n    @Override\n    public boolean isCredentialsNonExpired() {\n        // TODO Auto-generated method stub\n        return true;\n    }\n\n    @Override\n    public boolean isEnabled() {\n        // TODO Auto-generated method stub\n        return active;\n    }\n\n}\n</code></pre>\n\n<p>I think I have done every thing. Don't know how to save/Regsiter New user. If I will be able to regsiter a user then can test my login URL. Thanks inadvance.</p>\n"},{"tags":["java","hibernate","date","input","thymeleaf"],"comments":[{"owner":{"account_id":316095,"reputation":749,"user_id":632075,"display_name":"BitExodus"},"score":0,"creation_date":1470050980,"post_id":38693971,"comment_id":64773487,"body_markdown":"Can you show us the controller methods for your GET and POST actions and also the thymeleaf form?","body":"Can you show us the controller methods for your GET and POST actions and also the thymeleaf form?"},{"owner":{"account_id":8867826,"reputation":1378,"user_id":6622440,"accept_rate":52,"display_name":"zzheads"},"score":1,"creation_date":1470051593,"post_id":38693971,"comment_id":64773835,"body_markdown":"Sure, added it to question","body":"Sure, added it to question"},{"owner":{"account_id":316095,"reputation":749,"user_id":632075,"display_name":"BitExodus"},"score":0,"creation_date":1470052736,"post_id":38693971,"comment_id":64774487,"body_markdown":"Please include the &quot;form&quot; element in the template and the Project class with the property &quot;start&quot; and the get and set methods for it.","body":"Please include the &quot;form&quot; element in the template and the Project class with the property &quot;start&quot; and the get and set methods for it."},{"owner":{"account_id":8867826,"reputation":1378,"user_id":6622440,"accept_rate":52,"display_name":"zzheads"},"score":0,"creation_date":1470053500,"post_id":38693971,"comment_id":64774967,"body_markdown":"Done, added &lt;form&gt; and Project class with getters/setters","body":"Done, added &lt;form&gt; and Project class with getters/setters"},{"owner":{"account_id":316095,"reputation":749,"user_id":632075,"display_name":"BitExodus"},"score":0,"creation_date":1470057227,"post_id":38693971,"comment_id":64777484,"body_markdown":"Can you confirm the exact error code you are getting from your browser? Which browser is it?","body":"Can you confirm the exact error code you are getting from your browser? Which browser is it?"},{"owner":{"account_id":8867826,"reputation":1378,"user_id":6622440,"accept_rate":52,"display_name":"zzheads"},"score":0,"creation_date":1470057366,"post_id":38693971,"comment_id":64777584,"body_markdown":"400 error code, browser Chrome","body":"400 error code, browser Chrome"},{"owner":{"account_id":316095,"reputation":749,"user_id":632075,"display_name":"BitExodus"},"score":0,"creation_date":1470058686,"post_id":38693971,"comment_id":64778462,"body_markdown":"I am getting a 405 instead with my project configuration, so I am unable to test your code in the same conditions at this very moment, but from what I can see, you need to change your &quot;th:value&quot; and &quot;th:field&quot; attributes from your template for the date value from &quot;${project.start}&quot; to &quot;*{start}&quot;.","body":"I am getting a 405 instead with my project configuration, so I am unable to test your code in the same conditions at this very moment, but from what I can see, you need to change your &quot;th:value&quot; and &quot;th:field&quot; attributes from your template for the date value from &quot;${project.start}&quot; to &quot;*{start}&quot;."},{"owner":{"account_id":3485084,"reputation":766,"user_id":2916240,"display_name":"Hasitha Diluka"},"score":0,"creation_date":1470119246,"post_id":38693971,"comment_id":64803091,"body_markdown":"Can you post the error log","body":"Can you post the error log"},{"owner":{"account_id":8867826,"reputation":1378,"user_id":6622440,"accept_rate":52,"display_name":"zzheads"},"score":0,"creation_date":1470120386,"post_id":38693971,"comment_id":64803635,"body_markdown":"There is no any logs messages, just after I&#39;m posting form, only error message &quot;400 Error&quot;, and no new records in project table.","body":"There is no any logs messages, just after I&#39;m posting form, only error message &quot;400 Error&quot;, and no new records in project table."},{"owner":{"account_id":8867826,"reputation":1378,"user_id":6622440,"accept_rate":52,"display_name":"zzheads"},"score":0,"creation_date":1470121036,"post_id":38693971,"comment_id":64803980,"body_markdown":"Field error in object &#39;project&#39; on field &#39;startDate&#39;: rejected value [2016-08-03]; codes [typeMismatch.project.startDate,typeMismatch.startDate,typeMismatch.java.util.Date,typeMismatch]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [project.startDate,startDate]; arguments []; default message [startDate]]; default message [Failed to convert property value of type [java.lang.String] to required type [java.util.Date] for property &#39;startDate&#39;;","body":"Field error in object &#39;project&#39; on field &#39;startDate&#39;: rejected value [2016-08-03]; codes [typeMismatch.project.startDate,typeMismatch.startDate,typeM&zwnj;&#8203;ismatch.java.util.Da&zwnj;&#8203;te,typeMismatch]; arguments [org.springframework.context.support.DefaultMessageSourceRes&zwnj;&#8203;olvable: codes [project.startDate,startDate]; arguments []; default message [startDate]]; default message [Failed to convert property value of type [java.lang.String] to required type [java.util.Date] for property &#39;startDate&#39;;"},{"owner":{"account_id":8867826,"reputation":1378,"user_id":6622440,"accept_rate":52,"display_name":"zzheads"},"score":0,"creation_date":1470121095,"post_id":38693971,"comment_id":64804008,"body_markdown":"so &lt;input type=&quot;date&quot;&gt; input String, not Date?","body":"so &lt;input type=&quot;date&quot;&gt; input String, not Date?"}],"answers":[{"tags":[],"owner":{"account_id":316095,"reputation":749,"user_id":632075,"display_name":"BitExodus"},"down_vote_count":0,"up_vote_count":34,"is_accepted":true,"score":34,"last_activity_date":1586100141,"creation_date":1470129762,"answer_id":38716532,"question_id":38693971,"body_markdown":"Taking a look at the comment with the error log it seems to be a conversion problem between `String` to `java.util.Date`. After searching for a while in the Thymeleaf GitHub I saw two issues which can explain how to proceed in this case:\r\n\r\n - Discussion of the conversion including date in [this issue][1].\r\n - Implementation of the conversion is explained [here][2].\r\n\r\nFrom the last point, I added an annotation to the start date of your project class:\r\n\r\n    // This is &quot;org.springframework.format.annotation.DateTimeFormat&quot;\r\n    @DateTimeFormat(pattern = &quot;yyyy-MM-dd&quot;)\r\n\tprivate Date start;\r\n\r\nAnd after that, I was able to receive the date in your controller POST method.\r\n\r\nTake into account you also need to change your `th:value` and `th:field` attributes from your template for the date value from `${project.start}` to `*{start}`, as I wrote in the comments, as you did for the `name` and `description` fields.\r\n\r\n\r\n  [1]: https://github.com/thymeleaf/thymeleaf-spring/issues/19\r\n  [2]: https://github.com/thymeleaf/thymeleaf/issues/223","title":"Input type=&quot;date&quot; thymeleaf","body":"<p>Taking a look at the comment with the error log it seems to be a conversion problem between <code>String</code> to <code>java.util.Date</code>. After searching for a while in the Thymeleaf GitHub I saw two issues which can explain how to proceed in this case:</p>\n\n<ul>\n<li>Discussion of the conversion including date in <a href=\"https://github.com/thymeleaf/thymeleaf-spring/issues/19\" rel=\"noreferrer\">this issue</a>.</li>\n<li>Implementation of the conversion is explained <a href=\"https://github.com/thymeleaf/thymeleaf/issues/223\" rel=\"noreferrer\">here</a>.</li>\n</ul>\n\n<p>From the last point, I added an annotation to the start date of your project class:</p>\n\n<pre><code>// This is \"org.springframework.format.annotation.DateTimeFormat\"\n@DateTimeFormat(pattern = \"yyyy-MM-dd\")\nprivate Date start;\n</code></pre>\n\n<p>And after that, I was able to receive the date in your controller POST method.</p>\n\n<p>Take into account you also need to change your <code>th:value</code> and <code>th:field</code> attributes from your template for the date value from <code>${project.start}</code> to <code>*{start}</code>, as I wrote in the comments, as you did for the <code>name</code> and <code>description</code> fields.</p>\n"},{"tags":[],"owner":{"account_id":17157883,"reputation":31,"user_id":12418282,"display_name":"jais"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1654109439,"creation_date":1574454596,"answer_id":59001330,"question_id":38693971,"body_markdown":"Use String instead of Date:\r\n\r\n    @DateTimeFormat(pattern = &quot;yyyy-MM-dd&quot;)\r\n    private String fromDate;","title":"Input type=&quot;date&quot; thymeleaf","body":"<p>Use String instead of Date:</p>\n<pre><code>@DateTimeFormat(pattern = &quot;yyyy-MM-dd&quot;)\nprivate String fromDate;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17683797,"reputation":139,"user_id":12837091,"display_name":"Baba Fakruddin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635512876,"creation_date":1635512537,"answer_id":69769351,"question_id":38693971,"body_markdown":"    @DateTimeFormat(pattern = &quot;yyyy-MM-dd&quot;)\r\n    private Date date;\r\n\r\ncontroller class\r\n\r\n    pNow.setDate(new Date());\r\n\r\n\r\n","title":"Input type=&quot;date&quot; thymeleaf","body":"<pre><code>@DateTimeFormat(pattern = &quot;yyyy-MM-dd&quot;)\nprivate Date date;\n</code></pre>\n<p>controller class</p>\n<pre><code>pNow.setDate(new Date());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18093144,"reputation":565,"user_id":13152124,"display_name":"Mama"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637318813,"creation_date":1637318813,"answer_id":70033592,"question_id":38693971,"body_markdown":"    @DateTimeFormat(pattern = &quot;yyyy-MM-dd&quot;)\r\n    private Date start;\r\n\r\n&gt; This Annotation get the current year date and month . If you want to\r\n&gt; show current date in web page you can use this simple tag\r\n\r\n    th:attr=&quot;max=${#dates.format(#dates.createNow(), &#39;yyyy-MM-dd&#39;)}&quot;","title":"Input type=&quot;date&quot; thymeleaf","body":"<pre><code>@DateTimeFormat(pattern = &quot;yyyy-MM-dd&quot;)\nprivate Date start;\n</code></pre>\n<blockquote>\n<p>This Annotation get the current year date and month . If you want to\nshow current date in web page you can use this simple tag</p>\n</blockquote>\n<pre><code>th:attr=&quot;max=${#dates.format(#dates.createNow(), 'yyyy-MM-dd')}&quot;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1377069,"reputation":392,"user_id":1310875,"accept_rate":75,"display_name":"Rohit"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1638190406,"creation_date":1638190406,"answer_id":70154994,"question_id":38693971,"body_markdown":"One common issue is that the date format expected by html form/datepicker is not the same as the spring default date format. This causes the form datetime-local input to show up as blank even when the value attribute is populated.\r\n\r\nYou can set the below values in `application.properties` to rectify this:\r\n\r\n    spring.mvc.format.date-time=yyyy-MM-dd&#39;T&#39;HH:mm:ss\r\n    spring.mvc.format.date=yyyy-MM-dd&#39;T&#39;HH:mm:ss\r\n    spring.mvc.format.time=HH:mm:ss\r\n\r\n\r\nAn additional benefit is that date strings in json responses are not affected by this property.","title":"Input type=&quot;date&quot; thymeleaf","body":"<p>One common issue is that the date format expected by html form/datepicker is not the same as the spring default date format. This causes the form datetime-local input to show up as blank even when the value attribute is populated.</p>\n<p>You can set the below values in <code>application.properties</code> to rectify this:</p>\n<pre><code>spring.mvc.format.date-time=yyyy-MM-dd'T'HH:mm:ss\nspring.mvc.format.date=yyyy-MM-dd'T'HH:mm:ss\nspring.mvc.format.time=HH:mm:ss\n</code></pre>\n<p>An additional benefit is that date strings in json responses are not affected by this property.</p>\n"}],"owner":{"account_id":8867826,"reputation":1378,"user_id":6622440,"accept_rate":52,"display_name":"zzheads"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":48691,"favorite_count":0,"down_vote_count":1,"up_vote_count":15,"accepted_answer_id":38716532,"answer_count":5,"score":14,"last_activity_date":1654109439,"creation_date":1470039412,"question_id":38693971,"body_markdown":"I need to add date to my entity and let the user set it in web form.\r\nThis field needs to have today&#39;s date filled in by default.\r\n\r\n    1. &lt;input type=&quot;date&quot; value=&quot;2016-08-01&quot;&gt; \r\nshows correct date setted for default \r\n\r\n    2. &lt;input type=&quot;date&quot; th:value=&quot;${startDate}&quot;&gt; \r\nshows date picker without any value (note: String startDate = &quot;2016-08-01&quot;;) \r\n\r\n    3. &lt;input type=&quot;date&quot; th:field=&quot;${startDate}&quot;&gt; \r\ngenerates 400 error (Bad request) (note: Date startDate = new Date();) \r\n\r\nSo, question is: how to use thymeleaf for input date?\r\n\r\n- can I use Date() datatype for input and store such data?\r\n- how I need to set &quot;th:field&quot; in &lt;input type=&quot;date&quot;&gt; form?\r\n- how I need to set &quot;th:value&quot; in same form?\r\n\r\nMy controller(s):\r\n\r\n    @RequestMapping(&quot;/project_new&quot;)\r\n    public String createProject(Model model) {\r\n        Project project = new Project ();\r\n        List&lt;Role&gt; roles = mRoleService.findAll();\r\n\r\n        project.setStart(new Date());\r\n\r\n        model.addAttribute(&quot;page_title&quot;, &quot;create project&quot;);\r\n        model.addAttribute(&quot;roles&quot;, roles);\r\n        model.addAttribute(&quot;statuses&quot;, Status.values());\r\n        model.addAttribute(&quot;project&quot;, project);\r\n        return &quot;project_new&quot;;\r\n    }\r\n\r\n    @RequestMapping(value = &quot;/project_new&quot;, method = RequestMethod.POST)\r\n    public String createProject(@ModelAttribute Project project, Model model) {\r\n        // Fill id field for project.rolesNeeded\r\n        mRoleService.setRolesId(project.getRolesNeeded());\r\n        project.fixCollaboratorsAndRoles();\r\n\r\n        mProjectService.save(project);\r\n        return &quot;redirect:/&quot;;\r\n    }\r\n\r\nMy template:\r\n\r\n    &lt;form th:action=&quot;@{/project_new}&quot; method=&quot;post&quot; th:object=&quot;${project}&quot;&gt;\r\n      &lt;div class=&quot;project-list single&quot;&gt;\r\n        &lt;label for=&quot;name&quot;&gt;Name:&lt;/label&gt;\r\n        &lt;input type=&quot;text&quot; id=&quot;name&quot; required=&quot;true&quot; th:placeholder=&quot;*{name}&quot; th:value=&quot;*{name}&quot; th:field=&quot;*{name}&quot;/&gt;\r\n        &lt;label for=&quot;description&quot;&gt;Description:&lt;/label&gt;\r\n        &lt;textarea rows=&quot;5&quot; id=&quot;description&quot; type=&quot;text&quot;  required=&quot;true&quot; th:placeholder=&quot;*{description}&quot; th:value=&quot;*{description}&quot; th:field=&quot;*{description}&quot;/&gt;\r\n    \r\n        &lt;label for=&quot;date-started&quot;&gt;Date started:&lt;/label&gt;\r\n        &lt;input type=&quot;date&quot; th:value=&quot;${project.start}&quot; th:field=&quot;${project.start}&quot; id=&quot;date-started&quot;/&gt;\r\n    \r\n        &lt;div&gt;\r\n          &lt;label for=&quot;project_status&quot;&gt;Project Status:&lt;/label&gt;\r\n          &lt;div class=&quot;custom-select&quot;&gt;\r\n            &lt;span class=&quot;dropdown-arrow&quot;&gt;&lt;/span&gt;\r\n            &lt;select th:field=&quot;*{status}&quot; id=&quot;project_status&quot;&gt;\r\n              &lt;option th:each=&quot;s : ${statuses}&quot; th:value=&quot;${s}&quot; th:text=&quot;${s}&quot;&gt;Active&lt;/option&gt;\r\n            &lt;/select&gt;\r\n          &lt;/div&gt;\r\n        &lt;/div&gt;\r\n    \r\n      &lt;div class=&quot;roles-collaborators&quot;&gt;\r\n        &lt;ul class=&quot;checkbox-list&quot;&gt;\r\n          &lt;li th:if=&quot;${role.name} ne &#39;Undefined&#39;&quot; th:each=&quot;role : ${roles}&quot;&gt;\r\n          &lt;input type=&quot;checkbox&quot;  th:value=&quot;${role}&quot; th:field=&quot;${project.rolesNeeded}&quot; class=&quot;checkbox&quot;/&gt;\r\n          &lt;span th:text=&quot;${role.name}&quot; th:value=&quot;${role}&quot; class=&quot;checkbox&quot;&gt;Developer&lt;/span&gt;\r\n          &lt;/li&gt;\r\n        &lt;/ul&gt;\r\n      &lt;/div&gt;\r\n    \r\n      &lt;div class=&quot;actions&quot;&gt;\r\n        &lt;button type=&quot;submit&quot; class=&quot;button&quot;&gt;Save&lt;/button&gt;\r\n        &lt;a th:href=&quot;@{/}&quot; class=&quot;button button-secondary&quot;&gt;Cancel&lt;/a&gt;\r\n      &lt;/div&gt;\r\n    &lt;/div&gt;\r\n    &lt;/form&gt;\r\n\r\nProject entity:\r\n\r\n    @Entity\r\n    public class Project {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long id;\r\n    \r\n    @NotNull\r\n    @Size (min = 3)\r\n    private String name;\r\n    \r\n    @Column(columnDefinition=&quot;TEXT&quot;)\r\n    private String description;\r\n    \r\n    @Column\r\n    private Status status;\r\n    \r\n    @Column\r\n    private Date start;\r\n    \r\n    @ManyToMany\r\n    @LazyCollection(LazyCollectionOption.FALSE)\r\n    private List&lt;Role&gt; rolesNeeded;\r\n    \r\n    @ManyToMany\r\n    @LazyCollection(LazyCollectionOption.FALSE)\r\n    private List&lt;Collaborator&gt; collaborators;\r\n    \r\n    public Date getStart() {\r\n        return start;\r\n    }\r\n    \r\n    public void setStart(Date start) {\r\n        this.start = start;\r\n    }\r\n\r\n\r\n","title":"Input type=&quot;date&quot; thymeleaf","body":"<p>I need to add date to my entity and let the user set it in web form.\nThis field needs to have today's date filled in by default.</p>\n\n<pre><code>1. &lt;input type=\"date\" value=\"2016-08-01\"&gt; \n</code></pre>\n\n<p>shows correct date setted for default </p>\n\n<pre><code>2. &lt;input type=\"date\" th:value=\"${startDate}\"&gt; \n</code></pre>\n\n<p>shows date picker without any value (note: String startDate = \"2016-08-01\";) </p>\n\n<pre><code>3. &lt;input type=\"date\" th:field=\"${startDate}\"&gt; \n</code></pre>\n\n<p>generates 400 error (Bad request) (note: Date startDate = new Date();) </p>\n\n<p>So, question is: how to use thymeleaf for input date?</p>\n\n<ul>\n<li>can I use Date() datatype for input and store such data?</li>\n<li>how I need to set \"th:field\" in  form?</li>\n<li>how I need to set \"th:value\" in same form?</li>\n</ul>\n\n<p>My controller(s):</p>\n\n<pre><code>@RequestMapping(\"/project_new\")\npublic String createProject(Model model) {\n    Project project = new Project ();\n    List&lt;Role&gt; roles = mRoleService.findAll();\n\n    project.setStart(new Date());\n\n    model.addAttribute(\"page_title\", \"create project\");\n    model.addAttribute(\"roles\", roles);\n    model.addAttribute(\"statuses\", Status.values());\n    model.addAttribute(\"project\", project);\n    return \"project_new\";\n}\n\n@RequestMapping(value = \"/project_new\", method = RequestMethod.POST)\npublic String createProject(@ModelAttribute Project project, Model model) {\n    // Fill id field for project.rolesNeeded\n    mRoleService.setRolesId(project.getRolesNeeded());\n    project.fixCollaboratorsAndRoles();\n\n    mProjectService.save(project);\n    return \"redirect:/\";\n}\n</code></pre>\n\n<p>My template:</p>\n\n<pre><code>&lt;form th:action=\"@{/project_new}\" method=\"post\" th:object=\"${project}\"&gt;\n  &lt;div class=\"project-list single\"&gt;\n    &lt;label for=\"name\"&gt;Name:&lt;/label&gt;\n    &lt;input type=\"text\" id=\"name\" required=\"true\" th:placeholder=\"*{name}\" th:value=\"*{name}\" th:field=\"*{name}\"/&gt;\n    &lt;label for=\"description\"&gt;Description:&lt;/label&gt;\n    &lt;textarea rows=\"5\" id=\"description\" type=\"text\"  required=\"true\" th:placeholder=\"*{description}\" th:value=\"*{description}\" th:field=\"*{description}\"/&gt;\n\n    &lt;label for=\"date-started\"&gt;Date started:&lt;/label&gt;\n    &lt;input type=\"date\" th:value=\"${project.start}\" th:field=\"${project.start}\" id=\"date-started\"/&gt;\n\n    &lt;div&gt;\n      &lt;label for=\"project_status\"&gt;Project Status:&lt;/label&gt;\n      &lt;div class=\"custom-select\"&gt;\n        &lt;span class=\"dropdown-arrow\"&gt;&lt;/span&gt;\n        &lt;select th:field=\"*{status}\" id=\"project_status\"&gt;\n          &lt;option th:each=\"s : ${statuses}\" th:value=\"${s}\" th:text=\"${s}\"&gt;Active&lt;/option&gt;\n        &lt;/select&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n\n  &lt;div class=\"roles-collaborators\"&gt;\n    &lt;ul class=\"checkbox-list\"&gt;\n      &lt;li th:if=\"${role.name} ne 'Undefined'\" th:each=\"role : ${roles}\"&gt;\n      &lt;input type=\"checkbox\"  th:value=\"${role}\" th:field=\"${project.rolesNeeded}\" class=\"checkbox\"/&gt;\n      &lt;span th:text=\"${role.name}\" th:value=\"${role}\" class=\"checkbox\"&gt;Developer&lt;/span&gt;\n      &lt;/li&gt;\n    &lt;/ul&gt;\n  &lt;/div&gt;\n\n  &lt;div class=\"actions\"&gt;\n    &lt;button type=\"submit\" class=\"button\"&gt;Save&lt;/button&gt;\n    &lt;a th:href=\"@{/}\" class=\"button button-secondary\"&gt;Cancel&lt;/a&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>Project entity:</p>\n\n<pre><code>@Entity\npublic class Project {\n@Id\n@GeneratedValue(strategy = GenerationType.IDENTITY)\nprivate Long id;\n\n@NotNull\n@Size (min = 3)\nprivate String name;\n\n@Column(columnDefinition=\"TEXT\")\nprivate String description;\n\n@Column\nprivate Status status;\n\n@Column\nprivate Date start;\n\n@ManyToMany\n@LazyCollection(LazyCollectionOption.FALSE)\nprivate List&lt;Role&gt; rolesNeeded;\n\n@ManyToMany\n@LazyCollection(LazyCollectionOption.FALSE)\nprivate List&lt;Collaborator&gt; collaborators;\n\npublic Date getStart() {\n    return start;\n}\n\npublic void setStart(Date start) {\n    this.start = start;\n}\n</code></pre>\n"},{"tags":["java","web-scraping","htmlunit"],"comments":[{"owner":{"account_id":6163228,"reputation":2754,"user_id":4804091,"display_name":"RBRi"},"score":0,"creation_date":1655285791,"post_id":72464695,"comment_id":128294281,"body_markdown":"Sorry but i did not get your point but i like to help you with this. Please open an issue for HtmlUnit and we can discuss this in more detail.","body":"Sorry but i did not get your point but i like to help you with this. Please open an issue for HtmlUnit and we can discuss this in more detail."},{"owner":{"account_id":2168743,"reputation":10044,"user_id":1921273,"display_name":"MrSmith42"},"score":0,"creation_date":1656071316,"post_id":72464695,"comment_id":128488241,"body_markdown":"I would first extract all links (List of URL) and than follow then in a loop (getPage(URL)). What exactly is your problem?","body":"I would first extract all links (List of URL) and than follow then in a loop (getPage(URL)). What exactly is your problem?"}],"owner":{"account_id":4546904,"reputation":152,"user_id":3693223,"display_name":"Lucho82"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1654109321,"creation_date":1654098268,"question_id":72464695,"body_markdown":"I am using htmlunit to web-scrape a page.\r\n\r\nI am doing a table iteration with many rows (tr) where each row has one link that I want access to get data. This final page is a real time updated.\r\n\r\nIn the first iteration (1) I call a getPage() method and everything it&#39;s ok.\r\nBut in the next iterations (1....N) I want to reduce time and not call again the getPage() but only to access to the first HtmlPage object created and get new data (updated). My approach is to keep the pages always accessible and save time.\r\n\r\nAnyone already had this approach?\r\n\r\n\r\n\r\n  \r\n\r\n\r\n  \r\n\r\n","title":"htmlunit iteration getPage","body":"<p>I am using htmlunit to web-scrape a page.</p>\n<p>I am doing a table iteration with many rows (tr) where each row has one link that I want access to get data. This final page is a real time updated.</p>\n<p>In the first iteration (1) I call a getPage() method and everything it's ok.\nBut in the next iterations (1....N) I want to reduce time and not call again the getPage() but only to access to the first HtmlPage object created and get new data (updated). My approach is to keep the pages always accessible and save time.</p>\n<p>Anyone already had this approach?</p>\n"},{"tags":["java","sql","spring","jpa"],"comments":[{"owner":{"account_id":23771513,"reputation":330,"user_id":17785521,"display_name":"Mahadev K"},"score":0,"creation_date":1654099353,"post_id":72464777,"comment_id":128012495,"body_markdown":"This looks like a recursion. A &quot;Category&quot; will have a couple of child categories and each of them has a couple of categories again. This might be one to many relationship. Again not sure. Shared my thoughts.","body":"This looks like a recursion. A &quot;Category&quot; will have a couple of child categories and each of them has a couple of categories again. This might be one to many relationship. Again not sure. Shared my thoughts."},{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1654102312,"post_id":72464777,"comment_id":128013519,"body_markdown":"Why would a Child&#39;s parent also be in its list of children?  A4 has both A1 as its parent and in its list of children - A1 should have A4 marked as its parent, so this JSON seems incorrect. Otherwise, this is a simple 1:M with a M:1 back pointer in JPA. For JSON, this circular loop needs a stop; you should pick one &#39;side&#39; to only include the IDs, possibly by using JsonIdentityReference where appropriate or you&#39;ll get a stackoverflowexception. JsonIdentityReference should ensure only the ID value is used to indicate the reference, stopping recursive loops.","body":"Why would a Child&#39;s parent also be in its list of children?  A4 has both A1 as its parent and in its list of children - A1 should have A4 marked as its parent, so this JSON seems incorrect. Otherwise, this is a simple 1:M with a M:1 back pointer in JPA. For JSON, this circular loop needs a stop; you should pick one &#39;side&#39; to only include the IDs, possibly by using JsonIdentityReference where appropriate or you&#39;ll get a stackoverflowexception. JsonIdentityReference should ensure only the ID value is used to indicate the reference, stopping recursive loops."},{"owner":{"account_id":14431641,"reputation":23,"user_id":10424825,"display_name":"Alberto Valenty"},"score":0,"creation_date":1654105142,"post_id":72464777,"comment_id":128014436,"body_markdown":"Sorry, i fixed the Json, i hope now what i need is clear.","body":"Sorry, i fixed the Json, i hope now what i need is clear."},{"owner":{"account_id":1018878,"reputation":1383,"user_id":1029822,"display_name":"Andrzej Sydor"},"score":0,"creation_date":1654108805,"post_id":72464777,"comment_id":128015689,"body_markdown":"here similar question with answers: https://stackoverflow.com/questions/8584764/jpa-mapping-for-parent-child-with-same-class","body":"here similar question with answers: <a href=\"https://stackoverflow.com/questions/8584764/jpa-mapping-for-parent-child-with-same-class\" title=\"jpa mapping for parent child with same class\">stackoverflow.com/questions/8584764/&hellip;</a>"},{"owner":{"account_id":1018878,"reputation":1383,"user_id":1029822,"display_name":"Andrzej Sydor"},"score":0,"creation_date":1654108826,"post_id":72464777,"comment_id":128015698,"body_markdown":"Does this answer your question? [JPA mapping for Parent-Child with same class](https://stackoverflow.com/questions/8584764/jpa-mapping-for-parent-child-with-same-class)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/8584764/jpa-mapping-for-parent-child-with-same-class\">JPA mapping for Parent-Child with same class</a>"}],"answers":[{"tags":[],"owner":{"account_id":2458519,"reputation":7657,"user_id":2143128,"display_name":"Ratul Sharker"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1654108764,"creation_date":1654108411,"answer_id":72466564,"question_id":72464777,"body_markdown":"We can construct this recursive tree like structure in a single database table ( Entity, in spring data jpa ) and fetch the whole tree upto leaf nodes with two database call, if we design our model carefully. \r\n\r\nBefore start table design / Entity modeling lets boil down some facts\r\n\r\n1. Every Category should have a parent category if it is a subcategory, otherwise the category is the root category\r\n\r\n2. Every Category which is subcategory must have a root category.\r\n \r\n\r\n**Category.java**\r\n```java\r\n@Entity\r\npublic class Category {\r\n\t\r\n\t@Id\r\n\t@GeneratedValue(strategy = GenerationType.IDENTITY)\r\n\tpublic Long categoryId;\r\n\r\n\t@Column(nullable = false)\r\n\tpublic String name;\r\n\r\n\t@ManyToOne(fetch = FetchType.LAZY)\r\n\t@JoinColumn(name = &quot;parent_category_id&quot;)\r\n\t@JsonIgnore\r\n\tpublic Category parentCategory;\r\n\r\n\t@ManyToOne(fetch = FetchType.LAZY)\r\n\t@JoinColumn(name = &quot;root_category_id&quot;)\r\n\t@JsonIgnore\r\n\tpublic Category rootCategory;\r\n\t\r\n\t@Transient\r\n\tpublic List&lt;Category&gt; childrens = new ArrayList&lt;Category&gt;();\r\n}\r\n```\r\n\r\n\r\n**CategoryRepository.java**\r\n```java\r\n@Repository\r\npublic interface CategoryRepository extends JpaRepository&lt;Category, Long&gt; {\r\n\t\r\n\t@Query(&quot;SELECT category FROM Category category &quot;\r\n\t\t\t+ &quot; WHERE category.parentCategory.categoryId IS NULL&quot;)\r\n\tpublic List&lt;Category&gt; findAllRoots();\r\n\r\n\t@Query(&quot;SELECT category FROM Category category&quot;\r\n\t\t\t+ &quot; WHERE category.rootCategory.categoryId IN :rootIds &quot;)\r\n\tpublic List&lt;Category&gt; findAllSubCategoriesInRoot(@Param(&quot;rootIds&quot;) List&lt;Long&gt; rootIds);\r\n}\r\n```\r\n\r\n**CategoryController.java**\r\n\r\n```java\r\n@RestController\r\npublic class CategoryController {\r\n\t\r\n\t@Autowired\r\n\tpublic CategoryRepository categoryRepository;\r\n\r\n\t@GetMapping(&quot;/categories&quot;)\r\n\t@Transactional(readOnly = true)\r\n\tpublic List&lt;Category&gt; getCategories() {\r\n\t\tList&lt;Category&gt; rootCategories = categoryRepository.findAllRoots(); // first db call\r\n\r\n\t\t// Now Find all the subcategories\r\n\t\tList&lt;Long&gt; rootCategoryIds = rootCategories.stream().map(Category::getCategoryId).collect(Collectors.toList());\r\n\t\tList&lt;Category&gt; subCategories = categoryRepository.findAllSubCategoriesInRoot(rootCategoryIds); // second db call\r\n\r\n\t\tsubCategories.forEach(subCategory -&gt; {\r\n\t\t\tsubCategory.getParentCategory().getChildrens().add(subCategory); // no further db call, because everyone inside the root is in the persistence context.\r\n\t\t});\r\n\r\n\t\treturn rootCategories;\r\n\t}\r\n}\r\n```\r\n\r\n**Sample dataset**\r\n\r\n```sql\r\n-- root\r\nINSERT INTO category (category_id, name, parent_category_id, root_category_id) VALUES (1, &#39;A&#39;, null, null);\r\n\r\n-- first level\r\nINSERT INTO category (category_id, name, parent_category_id, root_category_id) VALUES (2, &#39;B&#39;, 1, 1);\r\nINSERT INTO category (category_id, name, parent_category_id, root_category_id) VALUES (3, &#39;C&#39;, 1, 1);\r\n\r\n-- second level\r\nINSERT INTO category (category_id, name, parent_category_id, root_category_id) VALUES (4, &#39;D&#39;, 2, 1);\r\nINSERT INTO category (category_id, name, parent_category_id, root_category_id) VALUES (5, &#39;E&#39;, 3, 1);\r\nINSERT INTO category (category_id, name, parent_category_id, root_category_id) VALUES (6, &#39;F&#39;, 3, 1);\r\n\r\n-- another root\r\nINSERT INTO category (category_id, name, parent_category_id, root_category_id) VALUES (7, &#39;P&#39;, null, null);\r\n\r\n-- first level of another root\r\nINSERT INTO category (category_id, name, parent_category_id, root_category_id) VALUES (8, &#39;Q&#39;, 7, 7);\r\nINSERT INTO category (category_id, name, parent_category_id, root_category_id) VALUES (9, &#39;R&#39;, 7, 7);\r\n```\r\n\r\n\r\n**Generated response**\r\n\r\n```json\r\n[\r\n\t{\r\n\t\t&quot;categoryId&quot;: 1,\r\n\t\t&quot;name&quot;: &quot;A&quot;,\r\n\t\t&quot;childrens&quot;: [\r\n\t\t\t{\r\n\t\t\t\t&quot;categoryId&quot;: 2,\r\n\t\t\t\t&quot;name&quot;: &quot;B&quot;,\r\n\t\t\t\t&quot;childrens&quot;: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t&quot;categoryId&quot;: 4,\r\n\t\t\t\t\t\t&quot;name&quot;: &quot;D&quot;,\r\n\t\t\t\t\t\t&quot;childrens&quot;: []\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t&quot;categoryId&quot;: 3,\r\n\t\t\t\t&quot;name&quot;: &quot;C&quot;,\r\n\t\t\t\t&quot;childrens&quot;: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t&quot;categoryId&quot;: 5,\r\n\t\t\t\t\t\t&quot;name&quot;: &quot;E&quot;,\r\n\t\t\t\t\t\t&quot;childrens&quot;: []\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t&quot;categoryId&quot;: 6,\r\n\t\t\t\t\t\t&quot;name&quot;: &quot;F&quot;,\r\n\t\t\t\t\t\t&quot;childrens&quot;: []\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t}\r\n\t\t]\r\n\t},\r\n\t{\r\n\t\t&quot;categoryId&quot;: 7,\r\n\t\t&quot;name&quot;: &quot;P&quot;,\r\n\t\t&quot;childrens&quot;: [\r\n\t\t\t{\r\n\t\t\t\t&quot;categoryId&quot;: 8,\r\n\t\t\t\t&quot;name&quot;: &quot;Q&quot;,\r\n\t\t\t\t&quot;childrens&quot;: []\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t&quot;categoryId&quot;: 9,\r\n\t\t\t\t&quot;name&quot;: &quot;R&quot;,\r\n\t\t\t\t&quot;childrens&quot;: []\r\n\t\t\t}\r\n\t\t]\r\n\t}\r\n]\r\n```\r\n\r\nI intentionally skipped the `parent` as per your sample response because adding the parent in the body will unnecessarily increase the response size. \r\n\r\nIf you really need that `parent` key in all the sub categories, then you have to introduce another POJO (not entity) containing the `id` &amp; `name` of the parent category and copy the parent category `id` &amp; `name` into that POJO and set it to the corresponding sub category.","title":"Unlimited Hierarchical child parent relationship in the same table using JPA (TreeView)","body":"<p>We can construct this recursive tree like structure in a single database table ( Entity, in spring data jpa ) and fetch the whole tree upto leaf nodes with two database call, if we design our model carefully.</p>\n<p>Before start table design / Entity modeling lets boil down some facts</p>\n<ol>\n<li><p>Every Category should have a parent category if it is a subcategory, otherwise the category is the root category</p>\n</li>\n<li><p>Every Category which is subcategory must have a root category.</p>\n</li>\n</ol>\n<p><strong>Category.java</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\npublic class Category {\n    \n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    public Long categoryId;\n\n    @Column(nullable = false)\n    public String name;\n\n    @ManyToOne(fetch = FetchType.LAZY)\n    @JoinColumn(name = &quot;parent_category_id&quot;)\n    @JsonIgnore\n    public Category parentCategory;\n\n    @ManyToOne(fetch = FetchType.LAZY)\n    @JoinColumn(name = &quot;root_category_id&quot;)\n    @JsonIgnore\n    public Category rootCategory;\n    \n    @Transient\n    public List&lt;Category&gt; childrens = new ArrayList&lt;Category&gt;();\n}\n</code></pre>\n<p><strong>CategoryRepository.java</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Repository\npublic interface CategoryRepository extends JpaRepository&lt;Category, Long&gt; {\n    \n    @Query(&quot;SELECT category FROM Category category &quot;\n            + &quot; WHERE category.parentCategory.categoryId IS NULL&quot;)\n    public List&lt;Category&gt; findAllRoots();\n\n    @Query(&quot;SELECT category FROM Category category&quot;\n            + &quot; WHERE category.rootCategory.categoryId IN :rootIds &quot;)\n    public List&lt;Category&gt; findAllSubCategoriesInRoot(@Param(&quot;rootIds&quot;) List&lt;Long&gt; rootIds);\n}\n</code></pre>\n<p><strong>CategoryController.java</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>@RestController\npublic class CategoryController {\n    \n    @Autowired\n    public CategoryRepository categoryRepository;\n\n    @GetMapping(&quot;/categories&quot;)\n    @Transactional(readOnly = true)\n    public List&lt;Category&gt; getCategories() {\n        List&lt;Category&gt; rootCategories = categoryRepository.findAllRoots(); // first db call\n\n        // Now Find all the subcategories\n        List&lt;Long&gt; rootCategoryIds = rootCategories.stream().map(Category::getCategoryId).collect(Collectors.toList());\n        List&lt;Category&gt; subCategories = categoryRepository.findAllSubCategoriesInRoot(rootCategoryIds); // second db call\n\n        subCategories.forEach(subCategory -&gt; {\n            subCategory.getParentCategory().getChildrens().add(subCategory); // no further db call, because everyone inside the root is in the persistence context.\n        });\n\n        return rootCategories;\n    }\n}\n</code></pre>\n<p><strong>Sample dataset</strong></p>\n<pre class=\"lang-sql prettyprint-override\"><code>-- root\nINSERT INTO category (category_id, name, parent_category_id, root_category_id) VALUES (1, 'A', null, null);\n\n-- first level\nINSERT INTO category (category_id, name, parent_category_id, root_category_id) VALUES (2, 'B', 1, 1);\nINSERT INTO category (category_id, name, parent_category_id, root_category_id) VALUES (3, 'C', 1, 1);\n\n-- second level\nINSERT INTO category (category_id, name, parent_category_id, root_category_id) VALUES (4, 'D', 2, 1);\nINSERT INTO category (category_id, name, parent_category_id, root_category_id) VALUES (5, 'E', 3, 1);\nINSERT INTO category (category_id, name, parent_category_id, root_category_id) VALUES (6, 'F', 3, 1);\n\n-- another root\nINSERT INTO category (category_id, name, parent_category_id, root_category_id) VALUES (7, 'P', null, null);\n\n-- first level of another root\nINSERT INTO category (category_id, name, parent_category_id, root_category_id) VALUES (8, 'Q', 7, 7);\nINSERT INTO category (category_id, name, parent_category_id, root_category_id) VALUES (9, 'R', 7, 7);\n</code></pre>\n<p><strong>Generated response</strong></p>\n<pre class=\"lang-json prettyprint-override\"><code>[\n    {\n        &quot;categoryId&quot;: 1,\n        &quot;name&quot;: &quot;A&quot;,\n        &quot;childrens&quot;: [\n            {\n                &quot;categoryId&quot;: 2,\n                &quot;name&quot;: &quot;B&quot;,\n                &quot;childrens&quot;: [\n                    {\n                        &quot;categoryId&quot;: 4,\n                        &quot;name&quot;: &quot;D&quot;,\n                        &quot;childrens&quot;: []\n                    }\n                ]\n            },\n            {\n                &quot;categoryId&quot;: 3,\n                &quot;name&quot;: &quot;C&quot;,\n                &quot;childrens&quot;: [\n                    {\n                        &quot;categoryId&quot;: 5,\n                        &quot;name&quot;: &quot;E&quot;,\n                        &quot;childrens&quot;: []\n                    },\n                    {\n                        &quot;categoryId&quot;: 6,\n                        &quot;name&quot;: &quot;F&quot;,\n                        &quot;childrens&quot;: []\n                    }\n                ]\n            }\n        ]\n    },\n    {\n        &quot;categoryId&quot;: 7,\n        &quot;name&quot;: &quot;P&quot;,\n        &quot;childrens&quot;: [\n            {\n                &quot;categoryId&quot;: 8,\n                &quot;name&quot;: &quot;Q&quot;,\n                &quot;childrens&quot;: []\n            },\n            {\n                &quot;categoryId&quot;: 9,\n                &quot;name&quot;: &quot;R&quot;,\n                &quot;childrens&quot;: []\n            }\n        ]\n    }\n]\n</code></pre>\n<p>I intentionally skipped the <code>parent</code> as per your sample response because adding the parent in the body will unnecessarily increase the response size.</p>\n<p>If you really need that <code>parent</code> key in all the sub categories, then you have to introduce another POJO (not entity) containing the <code>id</code> &amp; <code>name</code> of the parent category and copy the parent category <code>id</code> &amp; <code>name</code> into that POJO and set it to the corresponding sub category.</p>\n"}],"owner":{"account_id":14431641,"reputation":23,"user_id":10424825,"display_name":"Alberto Valenty"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":976,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":72466564,"answer_count":1,"score":2,"last_activity_date":1654108764,"creation_date":1654098632,"question_id":72464777,"body_markdown":"I am trying to create a &quot;Category and Subcategories&quot; Entity, i tried to do some research but i couldn&#39;t find a good solution, i need a light on how can i model this Entity and have the bellow result! Be able to retrieve the data in this tree view format. \r\n\r\n       {\r\n    &quot;id&quot;: 1,\r\n    &quot;name&quot;: &quot;Account 1&quot;,\r\n    &quot;children&quot;: [\r\n        {\r\n            &quot;id&quot;: 2,\r\n            &quot;name&quot;: &quot;Account 1.1&quot;,\r\n            &quot;parent&quot;: {\r\n                &quot;id&quot;: 1,\r\n                &quot;name&quot;: &quot;Account 1&quot;\r\n            }\r\n        },\r\n        {\r\n            &quot;id&quot;: 3,\r\n            &quot;name&quot;: &quot;Account 1.2&quot;,\r\n            &quot;parent&quot;: {\r\n                &quot;id&quot;: 1,\r\n                &quot;name&quot;: &quot;Account 1&quot;\r\n            },\r\n\t\t\tchildren: [\r\n\t\t\t\t{\r\n\t\t\t\t\t&quot;id&quot;: 4,\r\n\t\t\t\t\t&quot;name&quot;: &quot;Account 1.2.1&quot;,\r\n\t\t\t\t\t&quot;children&quot;: [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t&quot;id&quot;: 5,\r\n\t\t\t\t\t\t\t&quot;name&quot;: &quot;Account 1.2.1.1&quot;,\r\n\t\t\t\t\t\t\t&quot;parent&quot;: {\r\n\t\t\t\t\t\t\t\t&quot;id&quot;: 4,\r\n\t\t\t\t\t\t\t\t&quot;name&quot;: &quot;Account 1.2.1&quot;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t&quot;id&quot;: 6,\r\n\t\t\t\t\t\t\t&quot;name&quot;: &quot;Account 1.2.1.2&quot;,\r\n\t\t\t\t\t\t\t&quot;parent&quot;: {\r\n\t\t\t\t\t\t\t\t&quot;id&quot;: 4,\r\n\t\t\t\t\t\t\t\t&quot;name&quot;: &quot;Account 1.2.1&quot;\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tchildren: [\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t]\r\n\t\t\t\t}\r\n\t\t\t]\r\n        }\r\n    ]\r\n}","title":"Unlimited Hierarchical child parent relationship in the same table using JPA (TreeView)","body":"<p>I am trying to create a &quot;Category and Subcategories&quot; Entity, i tried to do some research but i couldn't find a good solution, i need a light on how can i model this Entity and have the bellow result! Be able to retrieve the data in this tree view format.</p>\n<pre><code>   {\n&quot;id&quot;: 1,\n&quot;name&quot;: &quot;Account 1&quot;,\n&quot;children&quot;: [\n    {\n        &quot;id&quot;: 2,\n        &quot;name&quot;: &quot;Account 1.1&quot;,\n        &quot;parent&quot;: {\n            &quot;id&quot;: 1,\n            &quot;name&quot;: &quot;Account 1&quot;\n        }\n    },\n    {\n        &quot;id&quot;: 3,\n        &quot;name&quot;: &quot;Account 1.2&quot;,\n        &quot;parent&quot;: {\n            &quot;id&quot;: 1,\n            &quot;name&quot;: &quot;Account 1&quot;\n        },\n        children: [\n            {\n                &quot;id&quot;: 4,\n                &quot;name&quot;: &quot;Account 1.2.1&quot;,\n                &quot;children&quot;: [\n                    {\n                        &quot;id&quot;: 5,\n                        &quot;name&quot;: &quot;Account 1.2.1.1&quot;,\n                        &quot;parent&quot;: {\n                            &quot;id&quot;: 4,\n                            &quot;name&quot;: &quot;Account 1.2.1&quot;\n                        }\n                    },\n                    {\n                        &quot;id&quot;: 6,\n                        &quot;name&quot;: &quot;Account 1.2.1.2&quot;,\n                        &quot;parent&quot;: {\n                            &quot;id&quot;: 4,\n                            &quot;name&quot;: &quot;Account 1.2.1&quot;\n                        },\n                        children: [\n                        \n                        ]\n                    }\n                ]\n            }\n        ]\n    }\n]\n</code></pre>\n<p>}</p>\n"},{"tags":["java","lexical-analysis","jflex"],"answers":[{"tags":[],"owner":{"account_id":25258808,"reputation":47,"user_id":19090002,"display_name":"coding2"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1654108730,"creation_date":1654108730,"answer_id":72466623,"question_id":72466138,"body_markdown":"I found the solution: \r\n\r\n    alphaNumeric=({L}+|{L}+{D}+)+\r\n    email={alphaNumeric}&quot;@&quot;{alphaNumeric}&quot;.&quot;({L}+|{L}+&quot;.&quot;{L}+)\r\nThis is the regular expression","title":"Regular expression for email in flex","body":"<p>I found the solution:</p>\n<pre><code>alphaNumeric=({L}+|{L}+{D}+)+\nemail={alphaNumeric}&quot;@&quot;{alphaNumeric}&quot;.&quot;({L}+|{L}+&quot;.&quot;{L}+)\n</code></pre>\n<p>This is the regular expression</p>\n"}],"owner":{"account_id":25258808,"reputation":47,"user_id":19090002,"display_name":"coding2"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":251,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1654108730,"creation_date":1654106067,"question_id":72466138,"body_markdown":"I am trying to wirte a regular expression for emails in JFlex. So far I tried with this\r\n\r\n    L=[a-zA-Z_]+\r\n    D=[0-9]+    \r\n    email=[^(.+)@(\\S+)$]\r\n    %{\r\n        public String lexeme;\r\n    %}\r\n    %%\r\n    {L}({L}|{D})* {lexeme=yytext(); return Identi;}\r\n    (&quot;(-&quot;{D}+&quot;)&quot;)|{D}+ {lexeme=yytext(); return Number;}\r\n    {email} {lexeme=yytext(); return Email;}\r\n     . {return ERROR;}\r\n\r\nWhen I test with an email, the lexer is not matching any email. \r\nHow to match email?","title":"Regular expression for email in flex","body":"<p>I am trying to wirte a regular expression for emails in JFlex. So far I tried with this</p>\n<pre><code>L=[a-zA-Z_]+\nD=[0-9]+    \nemail=[^(.+)@(\\S+)$]\n%{\n    public String lexeme;\n%}\n%%\n{L}({L}|{D})* {lexeme=yytext(); return Identi;}\n(&quot;(-&quot;{D}+&quot;)&quot;)|{D}+ {lexeme=yytext(); return Number;}\n{email} {lexeme=yytext(); return Email;}\n . {return ERROR;}\n</code></pre>\n<p>When I test with an email, the lexer is not matching any email.\nHow to match email?</p>\n"},{"tags":["java","encryption"],"comments":[{"owner":{"account_id":12359353,"reputation":42427,"user_id":9014097,"display_name":"Topaco"},"score":1,"creation_date":1654108188,"post_id":72466419,"comment_id":128015489,"body_markdown":"Because you implement encryption and decryption together, you inadmissibly mix the various encodings/decodings. E.g. you Base64 decode the passed data. This makes sense for decryption, but not for encryption, where a UTF-8 encoding would make sense. A possible solution is to pass and return the data as `byte[]` and do the encoding/decoding outside your function.","body":"Because you implement encryption and decryption together, you inadmissibly mix the various encodings/decodings. E.g. you Base64 decode the passed data. This makes sense for decryption, but not for encryption, where a UTF-8 encoding would make sense. A possible solution is to pass and return the data as <code>byte[]</code> and do the encoding/decoding outside your function."},{"owner":{"account_id":25448730,"reputation":1,"user_id":19250520,"display_name":"Samuel"},"score":0,"creation_date":1654120866,"post_id":72466419,"comment_id":128019048,"body_markdown":"So would it make more sense to just do every operation using `byte []`  through UTF-8 encoding (with string), then converting to base64 or hexadecimal only when writing to the files that I am using to store everything?","body":"So would it make more sense to just do every operation using <code>byte []</code>  through UTF-8 encoding (with string), then converting to base64 or hexadecimal only when writing to the files that I am using to store everything?"}],"answers":[{"tags":[],"owner":{"account_id":2496,"reputation":266234,"user_id":3474,"accept_rate":83,"display_name":"erickson"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1654108632,"creation_date":1654108632,"answer_id":72466606,"question_id":72466419,"body_markdown":"This is a problem with the way you are using base-64 encoding.\r\n\r\nWhen you encrypt, you are treating &quot;message&quot; as base-64 encoded bytes. The last block is &quot;age&quot;. A strict decoder would reject that input, because it is missing padding, and has some extra bits that spill over into the third byte. But a permissive decoder ignores that, and decodes the array as `{ 0x99, 0xeb, 0x2c, 0x6a, 0x07 }`\r\n\r\nThe correct base-64 encoding of `{ 0x99, 0xeb, 0x2c, 0x6a, 0x07 }` is &quot;messagc=&quot;.\r\n\r\nTo make this work correctly, every statement in your method should differ depending on the mode flag. It would be more clear and clean to separate encrypt and decrypt methods.","title":"AES Decryption in Java Not Returning the Same String as the Plaintext","body":"<p>This is a problem with the way you are using base-64 encoding.</p>\n<p>When you encrypt, you are treating &quot;message&quot; as base-64 encoded bytes. The last block is &quot;age&quot;. A strict decoder would reject that input, because it is missing padding, and has some extra bits that spill over into the third byte. But a permissive decoder ignores that, and decodes the array as <code>{ 0x99, 0xeb, 0x2c, 0x6a, 0x07 }</code></p>\n<p>The correct base-64 encoding of <code>{ 0x99, 0xeb, 0x2c, 0x6a, 0x07 }</code> is &quot;messagc=&quot;.</p>\n<p>To make this work correctly, every statement in your method should differ depending on the mode flag. It would be more clear and clean to separate encrypt and decrypt methods.</p>\n"}],"owner":{"account_id":25448730,"reputation":1,"user_id":19250520,"display_name":"Samuel"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":112,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1654108632,"creation_date":1654107495,"question_id":72466419,"body_markdown":"I am trying to create a program in java in which part of it uses AES encryption to encrypt data for my final project in a coding class. Here is the code that I am using for my encryption:\r\n\r\n```\r\nstatic String symmetric(String info, String key, String mode) {\r\n    try {\r\n        Cipher c = Cipher.getInstance(&quot;AES/ECB/PKCS5Padding&quot;);\r\n        byte [] bytes = Base64.getDecoder().decode(Crypto.sha256(key));\r\n        byte [] information = Base64.getDecoder().decode(info);\r\n        Key k = new SecretKeySpec(bytes, &quot;AES&quot;);\r\n\r\n        if (mode.equals(&quot;ENCRYPT&quot;)) {\r\n            c.init(Cipher.ENCRYPT_MODE, k);\r\n        } else if (mode.equals(&quot;DECRYPT&quot;)) {\r\n            c.init(Cipher.DECRYPT_MODE, k);\r\n        }\r\n            \r\n        return (Base64.getEncoder().encodeToString(c.doFinal(information)).trim());\r\n        \r\n    } catch (Exception e) {\r\n        JOptionPane.showMessageDialog(null, e.getMessage());\r\n    }\r\n    return (null);\r\n}\r\n```\r\nWhen I encrypt my data using `String ciphterText = symmetric(&quot;message&quot;, &quot;key&quot;, &quot;ENCRYPT&quot;)` and decrypt the ciphertext using `symmetric(cipherText, &quot;key&quot;, &quot;DECRYPT&quot;)`, the string it returns is `&quot;messagc=&quot;`. I&#39;m worried that the padding is weird but I don&#39;t know how to fix it.\r\n\r\n**FYI:** `Crypto.sha256(String input)` is a method I created that returns the sha256 hash of info as a base 64 string. Here is the code for it if it helps:\r\n```\r\npublic static String sha256(String input) {\r\n    try {\r\n        MessageDigest digest = MessageDigest.getInstance(&quot;SHA-256&quot;);\r\n        byte [] tempHash = digest.digest(input.getBytes(StandardCharsets.UTF_8));\r\n\r\n        return (Base64.getEncoder().encodeToString(tempHash));\r\n\r\n    } catch (NoSuchAlgorithmException e) {\r\n        JOptionPane.showMessageDialog(null, e.getMessage());\r\n    }\r\n\r\n    return (null);\r\n}\r\n```\r\n**Also** I know ECB is not secure compared to other methods that use initialization vectors, but it is a small project and I don&#39;t have enough time to do that, which is the same reason why I&#39;m not salting my hashes. Is there anything I can do to fix it?","title":"AES Decryption in Java Not Returning the Same String as the Plaintext","body":"<p>I am trying to create a program in java in which part of it uses AES encryption to encrypt data for my final project in a coding class. Here is the code that I am using for my encryption:</p>\n<pre><code>static String symmetric(String info, String key, String mode) {\n    try {\n        Cipher c = Cipher.getInstance(&quot;AES/ECB/PKCS5Padding&quot;);\n        byte [] bytes = Base64.getDecoder().decode(Crypto.sha256(key));\n        byte [] information = Base64.getDecoder().decode(info);\n        Key k = new SecretKeySpec(bytes, &quot;AES&quot;);\n\n        if (mode.equals(&quot;ENCRYPT&quot;)) {\n            c.init(Cipher.ENCRYPT_MODE, k);\n        } else if (mode.equals(&quot;DECRYPT&quot;)) {\n            c.init(Cipher.DECRYPT_MODE, k);\n        }\n            \n        return (Base64.getEncoder().encodeToString(c.doFinal(information)).trim());\n        \n    } catch (Exception e) {\n        JOptionPane.showMessageDialog(null, e.getMessage());\n    }\n    return (null);\n}\n</code></pre>\n<p>When I encrypt my data using <code>String ciphterText = symmetric(&quot;message&quot;, &quot;key&quot;, &quot;ENCRYPT&quot;)</code> and decrypt the ciphertext using <code>symmetric(cipherText, &quot;key&quot;, &quot;DECRYPT&quot;)</code>, the string it returns is <code>&quot;messagc=&quot;</code>. I'm worried that the padding is weird but I don't know how to fix it.</p>\n<p><strong>FYI:</strong> <code>Crypto.sha256(String input)</code> is a method I created that returns the sha256 hash of info as a base 64 string. Here is the code for it if it helps:</p>\n<pre><code>public static String sha256(String input) {\n    try {\n        MessageDigest digest = MessageDigest.getInstance(&quot;SHA-256&quot;);\n        byte [] tempHash = digest.digest(input.getBytes(StandardCharsets.UTF_8));\n\n        return (Base64.getEncoder().encodeToString(tempHash));\n\n    } catch (NoSuchAlgorithmException e) {\n        JOptionPane.showMessageDialog(null, e.getMessage());\n    }\n\n    return (null);\n}\n</code></pre>\n<p><strong>Also</strong> I know ECB is not secure compared to other methods that use initialization vectors, but it is a small project and I don't have enough time to do that, which is the same reason why I'm not salting my hashes. Is there anything I can do to fix it?</p>\n"},{"tags":["java","multithreading","while-loop"],"comments":[{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":2,"creation_date":1654068084,"post_id":72457763,"comment_id":128000851,"body_markdown":"Does it do anything after that? Maybe something that could be a problem if done without any pause between attempts?","body":"Does it do anything after that? Maybe something that could be a problem if done without any pause between attempts?"},{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":2,"creation_date":1654068109,"post_id":72457763,"comment_id":128000858,"body_markdown":"No it&#39;s not for reducing performance, it&#39;s making a thread sleep a second at a time. If that&#39; s the *only* thing the thread does, it&#39;s odd, but most likely it&#39;s just someone doing wait-polling because the author either didn&#39;t have better options (unlikely) or didn&#39;t know of any better options.","body":"No it&#39;s not for reducing performance, it&#39;s making a thread sleep a second at a time. If that&#39; s the <i>only</i> thing the thread does, it&#39;s odd, but most likely it&#39;s just someone doing wait-polling because the author either didn&#39;t have better options (unlikely) or didn&#39;t know of any better options."},{"owner":{"account_id":4362282,"reputation":92954,"user_id":3558960,"accept_rate":60,"display_name":"Robby Cornelissen"},"score":14,"creation_date":1654068160,"post_id":72457763,"comment_id":128000882,"body_markdown":"I think the &quot;other stuff happening here&quot; is probably the context that we would need to be able to make an educated guess.","body":"I think the &quot;other stuff happening here&quot; is probably the context that we would need to be able to make an educated guess."},{"owner":{"account_id":8362430,"reputation":856,"user_id":6280255,"display_name":"Just another Java programmer"},"score":0,"creation_date":1654071313,"post_id":72457763,"comment_id":128001986,"body_markdown":"That eternal loop might exist to make a server stay running, i.e. without it the server would terminate.","body":"That eternal loop might exist to make a server stay running, i.e. without it the server would terminate."},{"owner":{"account_id":422870,"reputation":25925,"user_id":801894,"display_name":"Solomon Slow"},"score":0,"creation_date":1654104640,"post_id":72457763,"comment_id":128014278,"body_markdown":"Re, &quot;... intentional to reduce performance...&quot; Nobody ever wants to reduce performance. Talk about &quot;performance&quot; is talk about how well the program satisfies its requirements. The sleep reduces the _rate_ at which the &quot;other stuff&quot; happens, but maybe the program would perform _poorly_ if the &quot;other stuff&quot; happened too often.","body":"Re, &quot;... intentional to reduce performance...&quot; Nobody ever wants to reduce performance. Talk about &quot;performance&quot; is talk about how well the program satisfies its requirements. The sleep reduces the <i>rate</i> at which the &quot;other stuff&quot; happens, but maybe the program would perform <i>poorly</i> if the &quot;other stuff&quot; happened too often."},{"owner":{"account_id":395272,"reputation":24521,"user_id":758133,"accept_rate":100,"display_name":"Martin James"},"score":0,"creation_date":1654165882,"post_id":72457763,"comment_id":128028599,"body_markdown":"This is not uncommon.  I use such a sleep loop to flash a LED on embedded boards.  At a glance, without any further investigation, I can tell that the power is on, CPU hardware running and that, at least some of, the software is running.  The performance hit is negligible.  It needs, like, 16 words of stack and that&#39;s it:)","body":"This is not uncommon.  I use such a sleep loop to flash a LED on embedded boards.  At a glance, without any further investigation, I can tell that the power is on, CPU hardware running and that, at least some of, the software is running.  The performance hit is negligible.  It needs, like, 16 words of stack and that&#39;s it:)"}],"answers":[{"tags":[],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1654108457,"creation_date":1654073225,"answer_id":72458880,"question_id":72457763,"body_markdown":"# Take a break to let other threads execute\r\n\r\nThat code uses sleep merely to delay each repetition of the “other stuff” code. Without such a delay, the code may be running more often than is needed, wasting CPU cycles. While that thread is asleep, some  other thread can be running for that second. \r\n\r\nThis sleeping will be even more performant in the future if the [virtual threads][1] proposed by *Project Loom* succeed.\r\n\r\n## `ScheduledExecutorSerivce`\r\n\r\nAn alternative approach is a [scheduled executor service][2]. A `Runnable` or `Callable` task could be [submitted to run with a second of pause time][3] in between runs. \r\n\r\n    ScheduledExecutorService ses = Executors.newSingleThreadScheduledExecutor() ;\r\n\r\n    Runnable task = () -&gt; otherStuff() ;\r\n    ses.scheduleAtFixedRate ( task , 0 , 1 , TimeUnit.SECONDS ); // ( task , initialDelay , period , unit )\r\n\r\n    … // Eventually shutdown the executor service, otherwise the backing thread pool may run indefinitely.\r\n\r\n\r\n  [1]: https://openjdk.java.net/jeps/425\r\n  [2]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/ScheduledExecutorService.html\r\n  [3]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/ScheduledExecutorService.html#scheduleWithFixedDelay(java.lang.Runnable,long,long,java.util.concurrent.TimeUnit)","title":"Why Thread.sleep() in a while (true)","body":"<h1>Take a break to let other threads execute</h1>\n<p>That code uses sleep merely to delay each repetition of the “other stuff” code. Without such a delay, the code may be running more often than is needed, wasting CPU cycles. While that thread is asleep, some  other thread can be running for that second.</p>\n<p>This sleeping will be even more performant in the future if the <a href=\"https://openjdk.java.net/jeps/425\" rel=\"nofollow noreferrer\">virtual threads</a> proposed by <em>Project Loom</em> succeed.</p>\n<h2><code>ScheduledExecutorSerivce</code></h2>\n<p>An alternative approach is a <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/ScheduledExecutorService.html\" rel=\"nofollow noreferrer\">scheduled executor service</a>. A <code>Runnable</code> or <code>Callable</code> task could be <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/ScheduledExecutorService.html#scheduleWithFixedDelay(java.lang.Runnable,long,long,java.util.concurrent.TimeUnit)\" rel=\"nofollow noreferrer\">submitted to run with a second of pause time</a> in between runs.</p>\n<pre><code>ScheduledExecutorService ses = Executors.newSingleThreadScheduledExecutor() ;\n\nRunnable task = () -&gt; otherStuff() ;\nses.scheduleAtFixedRate ( task , 0 , 1 , TimeUnit.SECONDS ); // ( task , initialDelay , period , unit )\n\n… // Eventually shutdown the executor service, otherwise the backing thread pool may run indefinitely.\n</code></pre>\n"},{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1654075642,"creation_date":1654075642,"answer_id":72459449,"question_id":72457763,"body_markdown":"There is not sufficient context to explain exactly the purpose of the `sleep` here.\r\n\r\nOne possibility is that this is simply to run the `other stuff happening here;` code roughly once a second ... because it needs to be run once a second.  This can be done other ways.\r\n\r\nAnother possibility is that it is a &quot;hack&quot; to avoid make a polling loop less &quot;expensive&quot;.  For example compare these two bits of code:\r\n\r\n    volatile boolean someFlag;\r\n    ...\r\n    while (true)\r\n        if (someFlag) {\r\n           //  do something\r\n           someFlag = false;\r\n        }\r\n    }\r\n\r\nversus\r\n\r\n    volatile boolean someFlag;\r\n    ...\r\n    while (true)\r\n        try {\r\n            Thread.sleep(1000);\r\n        } catch (InterruptedException e) {\r\n            break;\r\n        }\r\n        if (someFlag) {\r\n           //  do something\r\n           someFlag = false;\r\n        }\r\n    }\r\n\r\nThe idea of this code is to do something whenever some other thread sets `someFlag` is set to `true`.  The difference between the two versions is that the first one polls the flag at a high rate to achieve a quick response, while the second will not respond to the flag being set for up to a second.  On the other hand, the second version doesn&#39;t keep a core busy while waiting.\r\n\r\nThere are ways to get a fast response to the state change more efficiently; e.g. if the two threads use `wait` / `notify` or `Semaphores` or some other synchronization class.  Code that polls a flag with or without a `sleep` should be treated with suspicion ...","title":"Why Thread.sleep() in a while (true)","body":"<p>There is not sufficient context to explain exactly the purpose of the <code>sleep</code> here.</p>\n<p>One possibility is that this is simply to run the <code>other stuff happening here;</code> code roughly once a second ... because it needs to be run once a second.  This can be done other ways.</p>\n<p>Another possibility is that it is a &quot;hack&quot; to avoid make a polling loop less &quot;expensive&quot;.  For example compare these two bits of code:</p>\n<pre><code>volatile boolean someFlag;\n...\nwhile (true)\n    if (someFlag) {\n       //  do something\n       someFlag = false;\n    }\n}\n</code></pre>\n<p>versus</p>\n<pre><code>volatile boolean someFlag;\n...\nwhile (true)\n    try {\n        Thread.sleep(1000);\n    } catch (InterruptedException e) {\n        break;\n    }\n    if (someFlag) {\n       //  do something\n       someFlag = false;\n    }\n}\n</code></pre>\n<p>The idea of this code is to do something whenever some other thread sets <code>someFlag</code> is set to <code>true</code>.  The difference between the two versions is that the first one polls the flag at a high rate to achieve a quick response, while the second will not respond to the flag being set for up to a second.  On the other hand, the second version doesn't keep a core busy while waiting.</p>\n<p>There are ways to get a fast response to the state change more efficiently; e.g. if the two threads use <code>wait</code> / <code>notify</code> or <code>Semaphores</code> or some other synchronization class.  Code that polls a flag with or without a <code>sleep</code> should be treated with suspicion ...</p>\n"}],"owner":{"account_id":24968465,"reputation":11,"user_id":19246082,"display_name":"Teknikos Cave"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":630,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1654077231,"answer_count":2,"score":0,"last_activity_date":1654108457,"creation_date":1654067901,"question_id":72457763,"body_markdown":"I am taking over a new project and I came across this bunch of code that just seems odd to me.  I am new to Java in general but I do have experience in C#.  What I understand from this is it will just keep trying to put a Thread to sleep?  It seems intentional to reduce performance or maybe I am totally off here.  Could anyone explain? Thank you.\r\n\r\n    while (true) {\r\n        try {\r\n            Thread.sleep(1000);\r\n        } catch (InterruptedException e) {\r\n            break;\r\n        }\r\n        other stuff happening here;\r\n    }","title":"Why Thread.sleep() in a while (true)","body":"<p>I am taking over a new project and I came across this bunch of code that just seems odd to me.  I am new to Java in general but I do have experience in C#.  What I understand from this is it will just keep trying to put a Thread to sleep?  It seems intentional to reduce performance or maybe I am totally off here.  Could anyone explain? Thank you.</p>\n<pre><code>while (true) {\n    try {\n        Thread.sleep(1000);\n    } catch (InterruptedException e) {\n        break;\n    }\n    other stuff happening here;\n}\n</code></pre>\n"},{"tags":["java","android","android-studio","frontend","android-constraintlayout"],"answers":[{"tags":[],"owner":{"account_id":4192472,"reputation":1728,"user_id":3434763,"display_name":"TheLibrarian"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1571664100,"creation_date":1571664100,"answer_id":58487229,"question_id":58269540,"body_markdown":"Constraints are not a part of LayoutParams.\r\n\r\nWhat you are looking for is **[ConstraintSet][1]** set on the ConstraintLayout itself.\r\n\r\n        final ConstraintSet constraintSet = new ConstraintSet();\r\n        constraintSet.clone(constraintLayout);\r\n        constraintSet.connect(R.id.textViewId, ConstraintSet.BOTTOM, R.id.details, ConstraintSet.TOP,10 /*&quot;DP&quot;*/);\r\n        constraintSet.connect(R.id.textViewId, ConstraintSet.END, ConstraintSet.PARENT_ID, ConstraintSet.END,10 /*&quot;DP&quot;*/);\r\n        constraintSet.connect(R.id.textViewId, ConstraintSet.START, R.id.image, ConstraintSet.END,10 /*&quot;DP&quot;*/);\r\n        constraintSet.connect(R.id.textViewId, ConstraintSet.TOP, ConstraintSet.PARENT_ID, ConstraintSet.TOP,10 /*&quot;DP&quot;*/);\r\n        constraintSet.applyTo(constraintLayout);\r\nBear in mind that value you pass as the last param will be in pixel when in code so you will have to convert it to dimension pixels(DP).\r\n\r\n\r\n  [1]: https://developer.android.com/reference/android/support/constraint/ConstraintSet","title":"Set constraint widgets dynamically","body":"<p>Constraints are not a part of LayoutParams.</p>\n\n<p>What you are looking for is <strong><a href=\"https://developer.android.com/reference/android/support/constraint/ConstraintSet\" rel=\"nofollow noreferrer\">ConstraintSet</a></strong> set on the ConstraintLayout itself.</p>\n\n<pre><code>    final ConstraintSet constraintSet = new ConstraintSet();\n    constraintSet.clone(constraintLayout);\n    constraintSet.connect(R.id.textViewId, ConstraintSet.BOTTOM, R.id.details, ConstraintSet.TOP,10 /*\"DP\"*/);\n    constraintSet.connect(R.id.textViewId, ConstraintSet.END, ConstraintSet.PARENT_ID, ConstraintSet.END,10 /*\"DP\"*/);\n    constraintSet.connect(R.id.textViewId, ConstraintSet.START, R.id.image, ConstraintSet.END,10 /*\"DP\"*/);\n    constraintSet.connect(R.id.textViewId, ConstraintSet.TOP, ConstraintSet.PARENT_ID, ConstraintSet.TOP,10 /*\"DP\"*/);\n    constraintSet.applyTo(constraintLayout);\n</code></pre>\n\n<p>Bear in mind that value you pass as the last param will be in pixel when in code so you will have to convert it to dimension pixels(DP).</p>\n"}],"owner":{"account_id":9824068,"reputation":335,"user_id":7277725,"display_name":"Bobin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":417,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1654107983,"creation_date":1570451278,"question_id":58269540,"body_markdown":"You can easily create constraints in the layout xml: \r\n\r\n[![example][1]][1]  \n&lt;sub&gt;(source: [bilder-upload.eu](https://www.bilder-upload.eu/upload/1e283e-1570450851.png))&lt;/sub&gt;  \n\r\n\r\nHowever I was not able to do the exact same thing in code.\r\nMay somebody help to transfer the following xml into java code?\r\n\r\n```xml\r\n&lt;TextView\r\n    ...\r\n    android:layout_marginStart=&quot;10dp&quot;\r\n    android:layout_marginTop=&quot;10dp&quot;\r\n    android:layout_marginEnd=&quot;10dp&quot;\r\n    android:layout_marginBottom=&quot;10dp&quot;\r\n    app:layout_constraintBottom_toTopOf=&quot;@+id/details&quot;\r\n    app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n    app:layout_constraintStart_toEndOf=&quot;@+id/image&quot;\r\n    app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\r\n```\r\n\r\n\r\nI tried the following code for setting the margins, but it does not work. The textView is always at the same place.\r\n\r\n    ConstraintLayout.LayoutParams layoutParams = new ConstraintLayout.LayoutParams(textView.getLayoutParams());\r\n    layoutParams.setMargins(10,10,10,10);\r\n    description.setLayoutParams(layoutParams);\n\n [1]: https://i.stack.imgur.com/6Mhi6.png","title":"Set constraint widgets dynamically","body":"<p>You can easily create constraints in the layout xml:</p>\n<p><a href=\"https://i.stack.imgur.com/6Mhi6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6Mhi6.png\" alt=\"example\" /></a><br />\n<sub>(source: <a href=\"https://www.bilder-upload.eu/upload/1e283e-1570450851.png\" rel=\"nofollow noreferrer\">bilder-upload.eu</a>)</sub></p>\n<p>However I was not able to do the exact same thing in code.\nMay somebody help to transfer the following xml into java code?</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;TextView\n    ...\n    android:layout_marginStart=&quot;10dp&quot;\n    android:layout_marginTop=&quot;10dp&quot;\n    android:layout_marginEnd=&quot;10dp&quot;\n    android:layout_marginBottom=&quot;10dp&quot;\n    app:layout_constraintBottom_toTopOf=&quot;@+id/details&quot;\n    app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n    app:layout_constraintStart_toEndOf=&quot;@+id/image&quot;\n    app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\n</code></pre>\n<p>I tried the following code for setting the margins, but it does not work. The textView is always at the same place.</p>\n<pre><code>ConstraintLayout.LayoutParams layoutParams = new ConstraintLayout.LayoutParams(textView.getLayoutParams());\nlayoutParams.setMargins(10,10,10,10);\ndescription.setLayoutParams(layoutParams);\n</code></pre>\n"},{"tags":["java","spring","spring-boot","openapi"],"comments":[{"owner":{"account_id":1657072,"reputation":1210,"user_id":1526322,"accept_rate":100,"display_name":"Knox"},"score":0,"creation_date":1653446012,"post_id":72355196,"comment_id":127852421,"body_markdown":"Can you provide a generated class so that we can reproduce the error message?","body":"Can you provide a generated class so that we can reproduce the error message?"},{"owner":{"account_id":2309641,"reputation":4648,"user_id":2028066,"accept_rate":52,"display_name":"MiguelMunoz"},"score":1,"creation_date":1653469712,"post_id":72355196,"comment_id":127857886,"body_markdown":"I&#39;ll put a test case up on GitHub. I&#39;ll mention it here when it&#39;s ready.","body":"I&#39;ll put a test case up on GitHub. I&#39;ll mention it here when it&#39;s ready."},{"owner":{"account_id":2309641,"reputation":4648,"user_id":2028066,"accept_rate":52,"display_name":"MiguelMunoz"},"score":0,"creation_date":1653531780,"post_id":72355196,"comment_id":127877171,"body_markdown":"The test case can be found at https://github.com/SwingGuy1024/SpringBootDemo.22.05.25\nYou can read the README.md file, at the top, for instructions on how to reproduce the errors that generate the messages.","body":"The test case can be found at <a href=\"https://github.com/SwingGuy1024/SpringBootDemo.22.05.25\" rel=\"nofollow noreferrer\">github.com/SwingGuy1024/SpringBootDemo.22.05.25</a> You can read the README.md file, at the top, for instructions on how to reproduce the errors that generate the messages."},{"owner":{"account_id":151394,"reputation":52351,"user_id":365237,"accept_rate":96,"display_name":"eis"},"score":0,"creation_date":1653687606,"post_id":72355196,"comment_id":127920026,"body_markdown":"have you checked [this](https://stackoverflow.com/a/70218368/365237)","body":"have you checked <a href=\"https://stackoverflow.com/a/70218368/365237\">this</a>"},{"owner":{"account_id":2309641,"reputation":4648,"user_id":2028066,"accept_rate":52,"display_name":"MiguelMunoz"},"score":0,"creation_date":1653698764,"post_id":72355196,"comment_id":127921725,"body_markdown":"@eis Yes. I mention the two suggested properties in my section on application properties, above.","body":"@eis Yes. I mention the two suggested properties in my section on application properties, above."}],"answers":[{"tags":[],"owner":{"account_id":1885290,"reputation":3234,"user_id":1704634,"display_name":"blagerweij"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1653767325,"creation_date":1653767325,"answer_id":72418824,"question_id":72355196,"body_markdown":"The default SpringBoot error-handler does not provide a response body for MethodArgumentNotValidException:\r\n```\r\n    protected ResponseEntity&lt;Object&gt; handleMethodArgumentNotValid(MethodArgumentNotValidException ex, HttpHeaders headers, HttpStatus status, WebRequest request) {\r\n        return this.handleExceptionInternal(ex, (Object)null, headers, status, request);\r\n    }\r\n\r\n```\r\n\r\nThe good news: you can override this in your GlobalResponseExceptionHandler class:\r\n```\r\n  @Override\r\n  protected ResponseEntity&lt;Object&gt; handleMethodArgumentNotValid(MethodArgumentNotValidException ex, HttpHeaders headers, HttpStatus status, WebRequest request) {\r\n    return handleExceptionInternal(ex, ex.getBindingResult(), headers, status, request);\r\n  }\r\n```\r\nIn the above code, we simply return the entire binding-result as the response body. If you want to, you can tweak this (e.g. only include the errors).\r\n\r\nWhen you call the controller with the invalid payload, you&#39;ll now get the following response:\r\n```\r\n{\r\n  &quot;timestamp&quot;: &quot;2022-05-28T19:40:47.295+00:00&quot;,\r\n  &quot;status&quot;: 400,\r\n  &quot;error&quot;: &quot;Bad Request&quot;,\r\n  &quot;exception&quot;: &quot;org.springframework.web.bind.MethodArgumentNotValidException&quot;,\r\n  &quot;message&quot;: &quot;Validation failed for object=&#39;menuItemOptionDto&#39;. Error count: 1&quot;,\r\n  &quot;errors&quot;: [\r\n    {\r\n      &quot;codes&quot;: [\r\n        &quot;NotNull.menuItemOptionDto.deltaPrice&quot;,\r\n        &quot;NotNull.deltaPrice&quot;,\r\n        &quot;NotNull.java.math.BigDecimal&quot;,\r\n        &quot;NotNull&quot;\r\n      ],\r\n      &quot;arguments&quot;: [\r\n        {\r\n          &quot;codes&quot;: [\r\n            &quot;menuItemOptionDto.deltaPrice&quot;,\r\n            &quot;deltaPrice&quot;\r\n          ],\r\n          &quot;arguments&quot;: null,\r\n          &quot;defaultMessage&quot;: &quot;deltaPrice&quot;,\r\n          &quot;code&quot;: &quot;deltaPrice&quot;\r\n        }\r\n      ],\r\n      &quot;defaultMessage&quot;: &quot;must not be null&quot;,\r\n      &quot;objectName&quot;: &quot;menuItemOptionDto&quot;,\r\n      &quot;field&quot;: &quot;deltaPrice&quot;,\r\n      &quot;rejectedValue&quot;: null,\r\n      &quot;bindingFailure&quot;: false,\r\n      &quot;code&quot;: &quot;NotNull&quot;\r\n    }\r\n  ],\r\n  &quot;path&quot;: &quot;/demo/admin/menuItem/addOption/1&quot;\r\n}\r\n```","title":"I&#39;m Getting Inadequate Error Messages from Spring Boot","body":"<p>The default SpringBoot error-handler does not provide a response body for MethodArgumentNotValidException:</p>\n<pre><code>    protected ResponseEntity&lt;Object&gt; handleMethodArgumentNotValid(MethodArgumentNotValidException ex, HttpHeaders headers, HttpStatus status, WebRequest request) {\n        return this.handleExceptionInternal(ex, (Object)null, headers, status, request);\n    }\n\n</code></pre>\n<p>The good news: you can override this in your GlobalResponseExceptionHandler class:</p>\n<pre><code>  @Override\n  protected ResponseEntity&lt;Object&gt; handleMethodArgumentNotValid(MethodArgumentNotValidException ex, HttpHeaders headers, HttpStatus status, WebRequest request) {\n    return handleExceptionInternal(ex, ex.getBindingResult(), headers, status, request);\n  }\n</code></pre>\n<p>In the above code, we simply return the entire binding-result as the response body. If you want to, you can tweak this (e.g. only include the errors).</p>\n<p>When you call the controller with the invalid payload, you'll now get the following response:</p>\n<pre><code>{\n  &quot;timestamp&quot;: &quot;2022-05-28T19:40:47.295+00:00&quot;,\n  &quot;status&quot;: 400,\n  &quot;error&quot;: &quot;Bad Request&quot;,\n  &quot;exception&quot;: &quot;org.springframework.web.bind.MethodArgumentNotValidException&quot;,\n  &quot;message&quot;: &quot;Validation failed for object='menuItemOptionDto'. Error count: 1&quot;,\n  &quot;errors&quot;: [\n    {\n      &quot;codes&quot;: [\n        &quot;NotNull.menuItemOptionDto.deltaPrice&quot;,\n        &quot;NotNull.deltaPrice&quot;,\n        &quot;NotNull.java.math.BigDecimal&quot;,\n        &quot;NotNull&quot;\n      ],\n      &quot;arguments&quot;: [\n        {\n          &quot;codes&quot;: [\n            &quot;menuItemOptionDto.deltaPrice&quot;,\n            &quot;deltaPrice&quot;\n          ],\n          &quot;arguments&quot;: null,\n          &quot;defaultMessage&quot;: &quot;deltaPrice&quot;,\n          &quot;code&quot;: &quot;deltaPrice&quot;\n        }\n      ],\n      &quot;defaultMessage&quot;: &quot;must not be null&quot;,\n      &quot;objectName&quot;: &quot;menuItemOptionDto&quot;,\n      &quot;field&quot;: &quot;deltaPrice&quot;,\n      &quot;rejectedValue&quot;: null,\n      &quot;bindingFailure&quot;: false,\n      &quot;code&quot;: &quot;NotNull&quot;\n    }\n  ],\n  &quot;path&quot;: &quot;/demo/admin/menuItem/addOption/1&quot;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":25296580,"reputation":2100,"user_id":19121623,"display_name":"Eskandar Abedini"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1654107498,"creation_date":1654107498,"answer_id":72466420,"question_id":72355196,"body_markdown":"Based on [OpenAPI generator to spring-boot with custom java validations][1]\r\n\r\n&gt;  - You can add some another validation layer in your code, which is    independent of OpenAPI generator. This layer will be called from   \r\n&gt; PetsController and PetsController will validate only basic OpenAPI   \r\n&gt; known constraints.\r\n&gt;    \r\n&gt;  - You can add you validations not via annotations, but via xml config    as shown [here][2].\r\n&gt;    \r\n&gt;   - maybe something else.\r\n&gt;    \r\n&gt;   - Hack it a bit. I was looking for a solution in which my custom    validation will be defined in OpenAPI spec same way as “required”.   \r\n&gt; Naturally I decided not to use solutions 1 or 2 (even thought it   \r\n&gt; might be the right way for a lot of cases). I found out the   \r\n&gt; openapi-generator actually provides a way of modifying the way the   \r\n&gt; code is generated. That means that I can actually define custom   \r\n&gt; constraint in OpenAPI specs as my own made up properties.\r\n\r\nPlease follow instructions in the above link for implementing last method.\r\n\r\n  [1]: https://bartko-mat.medium.com/openapi-generator-to-spring-boot-with-custom-java-validations-623381df9215\r\n  [2]: https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#chapter-xml-configuration\r\n","title":"I&#39;m Getting Inadequate Error Messages from Spring Boot","body":"<p>Based on <a href=\"https://bartko-mat.medium.com/openapi-generator-to-spring-boot-with-custom-java-validations-623381df9215\" rel=\"nofollow noreferrer\">OpenAPI generator to spring-boot with custom java validations</a></p>\n<blockquote>\n<ul>\n<li><p>You can add some another validation layer in your code, which is    independent of OpenAPI generator. This layer will be called from<br />\nPetsController and PetsController will validate only basic OpenAPI<br />\nknown constraints.</p>\n</li>\n<li><p>You can add you validations not via annotations, but via xml config    as shown <a href=\"https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#chapter-xml-configuration\" rel=\"nofollow noreferrer\">here</a>.</p>\n</li>\n<li><p>maybe something else.</p>\n</li>\n<li><p>Hack it a bit. I was looking for a solution in which my custom    validation will be defined in OpenAPI spec same way as “required”.<br />\nNaturally I decided not to use solutions 1 or 2 (even thought it<br />\nmight be the right way for a lot of cases). I found out the<br />\nopenapi-generator actually provides a way of modifying the way the<br />\ncode is generated. That means that I can actually define custom<br />\nconstraint in OpenAPI specs as my own made up properties.</p>\n</li>\n</ul>\n</blockquote>\n<p>Please follow instructions in the above link for implementing last method.</p>\n"}],"owner":{"account_id":2309641,"reputation":4648,"user_id":2028066,"accept_rate":52,"display_name":"MiguelMunoz"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1468,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":72418824,"answer_count":2,"score":4,"last_activity_date":1654107498,"creation_date":1653343008,"question_id":72355196,"body_markdown":"In my Spring Boot application, I specified my API using OpenApi 3.0.0. When I test its response to bad input, I&#39;m not happy with some of the error messages. The messages are useful when Hibernate can&#39;t handle my input. They include the class, field, and even the illegal value. But when Spring Boot rejects my input without even entering my code, I just get the vague message `The request cannot be fulfilled due to bad syntax.` There&#39;s no information about what field is bad, or what object holds the bad field value.\r\n\r\nWhen I specify my DTO in the .yaml file, two fields are required:\r\n\r\n    MenuItemOptionDto:\r\n      type: object\r\n      description: Option for a MenuItem\r\n      properties:\r\n        name:\r\n          type: string\r\n        deltaPrice:\r\n          type: number\r\n          description: Floating point price. Strings are easier to work with.\r\n        id:\r\n          type: integer\r\n          format: int32\r\n      required:\r\n        - name\r\n        - deltaPrice\r\n\r\nBut suppose I submit a DTO with a missing deltaPrice, like this: `{&quot;name&quot;: &quot;onions&quot;}` The error message just says `The request cannot be fulfilled due to bad syntax.` I want the error message to say which DTO is incorrect, and which field is missing.\r\n\r\nI have specified three relevant application properties. Any one of these will give me Hibernate validation error messages, but none give me spring-boot validation messages:\r\n\r\n    server.error.include-message=always\r\n    server.error.include-binding-errors=always\r\n    server.error.include-exception=true\r\n\r\nAnd I&#39;ve received advise to add a validator bean to my main application, which didn&#39;t help:\r\n\r\n    @ComponentScan(basePackages = {&quot;com.myWork.dummy&quot;,&quot;org.openapitools&quot;,})\r\n    @EnableCaching\r\n    @SpringBootApplication\r\n    public class ServerMaster implements CommandLineRunner {\r\n      private static final Logger log = LoggerFactory.getLogger(ServerMaster.class);\r\n      public static void main(String[] args) {\r\n        new SpringApplication(ServerMaster.class).run(args);\r\n      }\r\n\r\n      @Override\r\n      public void run(String... arg0) { ... }\r\n\r\n      // This was suggested at https://stackoverflow.com/questions/49538896/spring-boot-error-message-doesnt-work\r\n      // in order to give me better error messages when OpenAPI validations are triggered, but it doesn&#39;t help.\r\n      @Bean public Validator validator() {\r\n        return new LocalValidatorFactoryBean();\r\n      }\r\n    }\r\n\r\nWhen I generate the code, it doesn&#39;t matter if I turn on the `performBeanValidation` or `useBeanValidation` options. The generated code doesn&#39;t change. Either way, the `@NotNull` annotations are applied to the getters for the name and deltaPrice fields, and these are getting honored by the server, but without useful error messages.\r\n\r\nFinally, I&#39;m using Spring-Boot 2.3.4, and I declare a dependency on Spring Boot annotations:\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n\r\n\r\n\r\nSpring-Boot correctly rejects the input because the OpenAPI generator puts `@NotNull` annotations on the getters of the generated `MenuItemOptionDTO`, but since the code is generated, I can&#39;t customize them with an error message, and I don&#39;t want to turn off the generator. How can I get Spring or OpenAPI to give me better error messages?\r\n\r\n#### Test Case\r\nTo see these messages in action, check out the code at https://github.com/SwingGuy1024/SpringBootDemo.22.05.25","title":"I&#39;m Getting Inadequate Error Messages from Spring Boot","body":"<p>In my Spring Boot application, I specified my API using OpenApi 3.0.0. When I test its response to bad input, I'm not happy with some of the error messages. The messages are useful when Hibernate can't handle my input. They include the class, field, and even the illegal value. But when Spring Boot rejects my input without even entering my code, I just get the vague message <code>The request cannot be fulfilled due to bad syntax.</code> There's no information about what field is bad, or what object holds the bad field value.</p>\n<p>When I specify my DTO in the .yaml file, two fields are required:</p>\n<pre><code>MenuItemOptionDto:\n  type: object\n  description: Option for a MenuItem\n  properties:\n    name:\n      type: string\n    deltaPrice:\n      type: number\n      description: Floating point price. Strings are easier to work with.\n    id:\n      type: integer\n      format: int32\n  required:\n    - name\n    - deltaPrice\n</code></pre>\n<p>But suppose I submit a DTO with a missing deltaPrice, like this: <code>{&quot;name&quot;: &quot;onions&quot;}</code> The error message just says <code>The request cannot be fulfilled due to bad syntax.</code> I want the error message to say which DTO is incorrect, and which field is missing.</p>\n<p>I have specified three relevant application properties. Any one of these will give me Hibernate validation error messages, but none give me spring-boot validation messages:</p>\n<pre><code>server.error.include-message=always\nserver.error.include-binding-errors=always\nserver.error.include-exception=true\n</code></pre>\n<p>And I've received advise to add a validator bean to my main application, which didn't help:</p>\n<pre><code>@ComponentScan(basePackages = {&quot;com.myWork.dummy&quot;,&quot;org.openapitools&quot;,})\n@EnableCaching\n@SpringBootApplication\npublic class ServerMaster implements CommandLineRunner {\n  private static final Logger log = LoggerFactory.getLogger(ServerMaster.class);\n  public static void main(String[] args) {\n    new SpringApplication(ServerMaster.class).run(args);\n  }\n\n  @Override\n  public void run(String... arg0) { ... }\n\n  // This was suggested at https://stackoverflow.com/questions/49538896/spring-boot-error-message-doesnt-work\n  // in order to give me better error messages when OpenAPI validations are triggered, but it doesn't help.\n  @Bean public Validator validator() {\n    return new LocalValidatorFactoryBean();\n  }\n}\n</code></pre>\n<p>When I generate the code, it doesn't matter if I turn on the <code>performBeanValidation</code> or <code>useBeanValidation</code> options. The generated code doesn't change. Either way, the <code>@NotNull</code> annotations are applied to the getters for the name and deltaPrice fields, and these are getting honored by the server, but without useful error messages.</p>\n<p>Finally, I'm using Spring-Boot 2.3.4, and I declare a dependency on Spring Boot annotations:</p>\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n  &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Spring-Boot correctly rejects the input because the OpenAPI generator puts <code>@NotNull</code> annotations on the getters of the generated <code>MenuItemOptionDTO</code>, but since the code is generated, I can't customize them with an error message, and I don't want to turn off the generator. How can I get Spring or OpenAPI to give me better error messages?</p>\n<h4>Test Case</h4>\n<p>To see these messages in action, check out the code at <a href=\"https://github.com/SwingGuy1024/SpringBootDemo.22.05.25\" rel=\"nofollow noreferrer\">https://github.com/SwingGuy1024/SpringBootDemo.22.05.25</a></p>\n"},{"tags":["java","image","jpanel","itext","bufferedimage"],"comments":[{"owner":{"account_id":6017640,"reputation":8919,"user_id":4725875,"display_name":"DevilsHnd - 退した"},"score":0,"creation_date":1490468893,"post_id":43019998,"comment_id":73129190,"body_markdown":"Perhaps try and set the JPanel&#39;s **opaque** property to false. `panel.setOpaque(false);`.","body":"Perhaps try and set the JPanel&#39;s <b>opaque</b> property to false. <code>panel.setOpaque(false);</code>."}],"answers":[{"tags":[],"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1490468798,"creation_date":1490468798,"answer_id":43020700,"question_id":43019998,"body_markdown":"&gt; Is there a way to convert it to image and print it to PDF with white or transparent background?\r\n\r\nWell by default a JPanel is opaque and has its own background so the background get copied to the image.\r\n\r\nI have never tried this before but maybe nesting panels something like this will work:\r\n\r\n    JPanel imagePanel = new JPanel();\r\n    imagePanel.setOpaque(false);\r\n    JPanel backgroundPanel = new JPanel( new BorderLayout() );\r\n    backgroundPanel.add( imagePanel );\r\n    frame.add( backgroundPanel );\r\n\r\nSo now the imagePanel should be be transparent when you create the BufferedImage. But it will inherit the background color of the backgroundPanel so it still looks correct in the frame.","title":"Converting JPanel to Image to be added in iText PDF with white or transparent background","body":"<blockquote>\n  <p>Is there a way to convert it to image and print it to PDF with white or transparent background?</p>\n</blockquote>\n\n<p>Well by default a JPanel is opaque and has its own background so the background get copied to the image.</p>\n\n<p>I have never tried this before but maybe nesting panels something like this will work:</p>\n\n<pre><code>JPanel imagePanel = new JPanel();\nimagePanel.setOpaque(false);\nJPanel backgroundPanel = new JPanel( new BorderLayout() );\nbackgroundPanel.add( imagePanel );\nframe.add( backgroundPanel );\n</code></pre>\n\n<p>So now the imagePanel should be be transparent when you create the BufferedImage. But it will inherit the background color of the backgroundPanel so it still looks correct in the frame.</p>\n"},{"tags":[],"owner":{"account_id":22985989,"reputation":1,"user_id":17112211,"display_name":"Đặng Nghiệp Cường"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1654107348,"creation_date":1654107348,"answer_id":72466385,"question_id":43019998,"body_markdown":"I think the easiest way is to fit the Panel size to the inside components, then the components may cover all the Panel background","title":"Converting JPanel to Image to be added in iText PDF with white or transparent background","body":"<p>I think the easiest way is to fit the Panel size to the inside components, then the components may cover all the Panel background</p>\n"}],"owner":{"account_id":10122153,"reputation":3,"user_id":7478729,"accept_rate":0,"display_name":"James-Andrew Sarmiento"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":194,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1654107348,"creation_date":1490464979,"question_id":43019998,"body_markdown":"I am trying to convert a JPanel to Image and will be writing it to a PDF using iText.\r\nI have searched ways on how to convert JPanel to Image and found two &quot;Working&quot; solutions.\r\n\r\n    private BufferedImage createImage(JPanel panel) {\r\n\t\tint w = panel.getWidth();\r\n\t\tint h = panel.getHeight();\r\n\t\tBufferedImage bi = new BufferedImage(w, h, BufferedImage.TYPE_INT_ARGB);\r\n\t\tGraphics2D g = bi.createGraphics();\r\n\t\tpanel.print(g);\r\n\t\treturn bi;\r\n\t}\r\n\r\n    public static java.awt.Image getImageFromPanel(JPanel component) {\r\n        BufferedImage image = new BufferedImage(component.getWidth(),\r\n                component.getHeight(), BufferedImage.TYPE_INT_ARGB);\r\n        component.paint(image.getGraphics());\r\n        return image;\r\n    }\r\n\r\nAs you can see, I already used &quot;ARGB&quot; to try to convert it to image with a transparent or white background but it doesnt work. See attached image.\r\nIs there a way to convert it to image and print it to PDF with white or transparent background?\r\n\r\nBelow is the image converted from the JPanel using codes above\r\n[Image written on PDF][1]\r\n\r\nBottom is the JPanel I want to convert to Image\r\n[JPanel I want to convert][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/0aAeM.png\r\n  [2]: https://i.stack.imgur.com/ZxxDB.png","title":"Converting JPanel to Image to be added in iText PDF with white or transparent background","body":"<p>I am trying to convert a JPanel to Image and will be writing it to a PDF using iText.\nI have searched ways on how to convert JPanel to Image and found two \"Working\" solutions.</p>\n\n<pre><code>private BufferedImage createImage(JPanel panel) {\n    int w = panel.getWidth();\n    int h = panel.getHeight();\n    BufferedImage bi = new BufferedImage(w, h, BufferedImage.TYPE_INT_ARGB);\n    Graphics2D g = bi.createGraphics();\n    panel.print(g);\n    return bi;\n}\n\npublic static java.awt.Image getImageFromPanel(JPanel component) {\n    BufferedImage image = new BufferedImage(component.getWidth(),\n            component.getHeight(), BufferedImage.TYPE_INT_ARGB);\n    component.paint(image.getGraphics());\n    return image;\n}\n</code></pre>\n\n<p>As you can see, I already used \"ARGB\" to try to convert it to image with a transparent or white background but it doesnt work. See attached image.\nIs there a way to convert it to image and print it to PDF with white or transparent background?</p>\n\n<p>Below is the image converted from the JPanel using codes above\n<a href=\"https://i.stack.imgur.com/0aAeM.png\" rel=\"nofollow noreferrer\">Image written on PDF</a></p>\n\n<p>Bottom is the JPanel I want to convert to Image\n<a href=\"https://i.stack.imgur.com/ZxxDB.png\" rel=\"nofollow noreferrer\">JPanel I want to convert</a></p>\n"},{"tags":["java","visual-studio-code","launch"],"comments":[{"owner":{"account_id":24435058,"reputation":6292,"user_id":18359438,"display_name":"MingJie-MSFT"},"score":0,"creation_date":1652751142,"post_id":72258054,"comment_id":127676424,"body_markdown":"Your launch.json file is set correctly, and there is no problem with the extensions you installed. And when code‘s running, it does appear this prompt box, but it won&#39;t last long. Have you tried &quot;ctrl+shift+P&quot; and choose &quot;Java: Clean Java language server workspace&quot;? If it still doesn&#39;t work, try reinstalling &quot;Extension pack for Java&quot;.","body":"Your launch.json file is set correctly, and there is no problem with the extensions you installed. And when code‘s running, it does appear this prompt box, but it won&#39;t last long. Have you tried &quot;ctrl+shift+P&quot; and choose &quot;Java: Clean Java language server workspace&quot;? If it still doesn&#39;t work, try reinstalling &quot;Extension pack for Java&quot;."}],"answers":[{"tags":[],"owner":{"account_id":1549490,"reputation":1,"user_id":4332469,"display_name":"tapiov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1654107338,"creation_date":1654107338,"answer_id":72466382,"question_id":72258054,"body_markdown":"[Solved]:\r\n\r\nI removed the launch.json and added tasks.json below\r\n\r\n    {\r\n        &quot;version&quot;: &quot;2.0.0&quot;,\r\n        &quot;tasks&quot;: [\r\n            {\r\n                &quot;type&quot;: &quot;java&quot;,\r\n                &quot;mainClass&quot;: &quot;com.coolapp.App&quot;,\r\n                &quot;targetPath&quot;: &quot;${workspaceFolder}/${workspaceFolderBasename}.jar&quot;,\r\n                &quot;elements&quot;: [\r\n                    &quot;${compileOutput}&quot;,\r\n                    &quot;${dependencies}&quot;\r\n                ],\r\n                &quot;problemMatcher&quot;: [],\r\n                &quot;label&quot;: &quot;java: exportjar:coolapp&quot;,\r\n                &quot;group&quot;: {\r\n                    &quot;kind&quot;: &quot;build&quot;,\r\n                    &quot;isDefault&quot;: true\r\n                }\r\n            }\r\n        ]\r\n    }\r\n\r\nAlso, I noticed (there was a message which I ignored earlier) that there was a Netbeans java language service extension which I uninstalled. The error message btw did not specify which extensions were conflicting so I went on with a guess.\r\n\r\nThen I cleaned the Java language server workspace as suggested below. These fixed the issue.\r\n\r\nSo, it seems you don&#39;t necessarily need launch.json. And do not install conflicting extensions.\r\n","title":"Visual Studio Code Java Run Without Debugging stucks on &quot;Run: Compiling...&quot; pop-up","body":"<p>[Solved]:</p>\n<p>I removed the launch.json and added tasks.json below</p>\n<pre><code>{\n    &quot;version&quot;: &quot;2.0.0&quot;,\n    &quot;tasks&quot;: [\n        {\n            &quot;type&quot;: &quot;java&quot;,\n            &quot;mainClass&quot;: &quot;com.coolapp.App&quot;,\n            &quot;targetPath&quot;: &quot;${workspaceFolder}/${workspaceFolderBasename}.jar&quot;,\n            &quot;elements&quot;: [\n                &quot;${compileOutput}&quot;,\n                &quot;${dependencies}&quot;\n            ],\n            &quot;problemMatcher&quot;: [],\n            &quot;label&quot;: &quot;java: exportjar:coolapp&quot;,\n            &quot;group&quot;: {\n                &quot;kind&quot;: &quot;build&quot;,\n                &quot;isDefault&quot;: true\n            }\n        }\n    ]\n}\n</code></pre>\n<p>Also, I noticed (there was a message which I ignored earlier) that there was a Netbeans java language service extension which I uninstalled. The error message btw did not specify which extensions were conflicting so I went on with a guess.</p>\n<p>Then I cleaned the Java language server workspace as suggested below. These fixed the issue.</p>\n<p>So, it seems you don't necessarily need launch.json. And do not install conflicting extensions.</p>\n"}],"owner":{"account_id":1549490,"reputation":1,"user_id":4332469,"display_name":"tapiov"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":217,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1654107338,"creation_date":1652698367,"question_id":72258054,"body_markdown":"I have a simple Java application with 3 source files. The program compiled and ran fine in the integrated terminal before. Until I tried to use an extension GraalVM for Java or something. Didn&#39;t understand how to use that, so I uninstalled it. \r\nNow when I use &quot;Run without Debugging&quot; I just get a pop-up saying &quot;Run: Compiling ... Source: Debugger for Java (Extension)&quot; and the program does not start in the integrated terminal. \r\nI think this is related to file launch.json which is \r\n\r\n```code\r\n{\r\n    &quot;configurations&quot;: [\r\n    {\r\n        &quot;type&quot;: &quot;java&quot;,\r\n        &quot;name&quot;: &quot;Launch Current File&quot;,\r\n        &quot;request&quot;: &quot;launch&quot;,\r\n        &quot;mainClass&quot;: &quot;${file}&quot;\r\n    }\r\n    ]\r\n}\r\n```\r\nDo I need some sort of tasks.json file as well and what should go into it? There are a lot of extensions as well and their tasks and relations are not too clear.\r\n\r\n1) Debugger for Java (Microsoft)\r\n2) Extension Pack for Java (Microsoft)\r\n3) Gradle for Java, although I seem to have pom.xml as well? I used &quot;Java: Create Javafx project&quot;\r\n4) Jupyter. I am not doing tests, this is a small project\r\n5) Language support for Java (Red Hat)\r\n6) Maven for Java (Microsoft)\r\n7) Project Manager for Java (Microsoft)\r\n\r\nOn the left bottom corner, on the tab &quot;Run configuration&quot;, all values seem to have &lt;default&gt; values. Should they be set and how?\r\n\r\nHave tried:\r\n- Restarting VSC - no change, stuck on &quot;Compiling ...&quot;\r\n\r\nAnything more I should try? ","title":"Visual Studio Code Java Run Without Debugging stucks on &quot;Run: Compiling...&quot; pop-up","body":"<p>I have a simple Java application with 3 source files. The program compiled and ran fine in the integrated terminal before. Until I tried to use an extension GraalVM for Java or something. Didn't understand how to use that, so I uninstalled it.\nNow when I use &quot;Run without Debugging&quot; I just get a pop-up saying &quot;Run: Compiling ... Source: Debugger for Java (Extension)&quot; and the program does not start in the integrated terminal.\nI think this is related to file launch.json which is</p>\n<pre><code>{\n    &quot;configurations&quot;: [\n    {\n        &quot;type&quot;: &quot;java&quot;,\n        &quot;name&quot;: &quot;Launch Current File&quot;,\n        &quot;request&quot;: &quot;launch&quot;,\n        &quot;mainClass&quot;: &quot;${file}&quot;\n    }\n    ]\n}\n</code></pre>\n<p>Do I need some sort of tasks.json file as well and what should go into it? There are a lot of extensions as well and their tasks and relations are not too clear.</p>\n<ol>\n<li>Debugger for Java (Microsoft)</li>\n<li>Extension Pack for Java (Microsoft)</li>\n<li>Gradle for Java, although I seem to have pom.xml as well? I used &quot;Java: Create Javafx project&quot;</li>\n<li>Jupyter. I am not doing tests, this is a small project</li>\n<li>Language support for Java (Red Hat)</li>\n<li>Maven for Java (Microsoft)</li>\n<li>Project Manager for Java (Microsoft)</li>\n</ol>\n<p>On the left bottom corner, on the tab &quot;Run configuration&quot;, all values seem to have  values. Should they be set and how?</p>\n<p>Have tried:</p>\n<ul>\n<li>Restarting VSC - no change, stuck on &quot;Compiling ...&quot;</li>\n</ul>\n<p>Anything more I should try?</p>\n"},{"tags":["java","junit5","mapstruct"],"answers":[{"tags":[],"owner":{"account_id":18179826,"reputation":1213,"user_id":13227834,"display_name":"Jakub Słowikowski"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1607890913,"creation_date":1607890913,"answer_id":65280251,"question_id":65214038,"body_markdown":"Nested mapper is null, because Spring context is not loaded. Due to this, @Autowired is not working.\r\n\r\nSolution is to inject nested mappers via ReflectionTestUtils.\r\n\r\n    @InjectMocks\r\n    private UserMapper mapper = UserMapperImpl.INSTANCE;\r\n    \r\n    @Before\r\n    public void init() {\r\n        RoleMapper roleMapper = Mappers.getMapper(RoleMapper.class);\r\n        ReflectionTestUtils.setField(mapper, &quot;roleMapper&quot;, roleMapper);\r\n    }\r\n\r\n","title":"How to mock MapStruct nested mapper in JUnit5","body":"<p>Nested mapper is null, because Spring context is not loaded. Due to this, @Autowired is not working.</p>\n<p>Solution is to inject nested mappers via ReflectionTestUtils.</p>\n<pre><code>@InjectMocks\nprivate UserMapper mapper = UserMapperImpl.INSTANCE;\n\n@Before\npublic void init() {\n    RoleMapper roleMapper = Mappers.getMapper(RoleMapper.class);\n    ReflectionTestUtils.setField(mapper, &quot;roleMapper&quot;, roleMapper);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2513760,"reputation":840,"user_id":2185612,"accept_rate":33,"display_name":"WeGa"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1626854615,"creation_date":1626854615,"answer_id":68465992,"question_id":65214038,"body_markdown":"I don&#39;t know about your app&#39;s ecosystem, but if you use spring boot, you can mark test class UserMapperTest as `@SpringBootTest` and autowire your mapper as a regular bean\r\n```\r\n    @Autowired\r\n    private UserMapper mapper;\r\n```","title":"How to mock MapStruct nested mapper in JUnit5","body":"<p>I don't know about your app's ecosystem, but if you use spring boot, you can mark test class UserMapperTest as <code>@SpringBootTest</code> and autowire your mapper as a regular bean</p>\n<pre><code>    @Autowired\n    private UserMapper mapper;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":21513721,"reputation":49,"user_id":15855970,"display_name":"Attila Hejja"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1654107202,"creation_date":1654107202,"answer_id":72466352,"question_id":65214038,"body_markdown":"As [Jakub Słowikowski](https://stackoverflow.com/users/13227834/jakub-s%c5%82owikowski) mentioned, but a bit more fancy:\r\n```\r\n@ExtendWith(MockitoExtension.class)\r\nclass MyClassTest {\r\n    @InjectMocks\r\n    private MyService myService;\r\n\r\n    @Mock\r\n    private MyApi myApi;\r\n\r\n    @Spy\r\n    private MyMapper myMapper = Mappers.getMapper(MyMapper.class);\r\n\r\n    @Test\r\n    void myTest() {\r\n        ...\r\n    }\r\n}\r\n```","title":"How to mock MapStruct nested mapper in JUnit5","body":"<p>As <a href=\"https://stackoverflow.com/users/13227834/jakub-s%c5%82owikowski\">Jakub Słowikowski</a> mentioned, but a bit more fancy:</p>\n<pre><code>@ExtendWith(MockitoExtension.class)\nclass MyClassTest {\n    @InjectMocks\n    private MyService myService;\n\n    @Mock\n    private MyApi myApi;\n\n    @Spy\n    private MyMapper myMapper = Mappers.getMapper(MyMapper.class);\n\n    @Test\n    void myTest() {\n        ...\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":1756623,"reputation":934,"user_id":1604503,"accept_rate":33,"display_name":"fukit0"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3173,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":65280251,"answer_count":3,"score":3,"last_activity_date":1654107202,"creation_date":1607506195,"question_id":65214038,"body_markdown":"I have been searching a solution for about a day now. I still cannot produce a working example. \r\n\r\nMy problem is simple. I have a mapper uses another mapper:\r\n\r\n```\r\n@Mapper(componentModel = &quot;spring&quot;, uses = {RoleMapper.class})\r\npublic interface UserMapper {\r\n\r\n    /**\r\n     * Converts User DTO to User JPA Entity\r\n     * @Mapping annotation is used to convert fields with different names\r\n     * @param dto\r\n     * @return\r\n     */\r\n    @Mappings({\r\n            @Mapping(target = &quot;identityNo&quot;, source = &quot;dto.userIdentity&quot;),\r\n            @Mapping(target = &quot;role&quot;, source = &quot;dto.roleDTO&quot;)\r\n    })\r\n    User dtoToEntity(UserDTO dto);\r\n\r\n    /**\r\n     * Converts User JPA Entity to User DTO\r\n     * @Mapping annotation is used to convert fields with different names\r\n     * @param entity\r\n     * @return\r\n     */\r\n    @Mappings({\r\n            @Mapping(target = &quot;userIdentity&quot;, source = &quot;entity.identityNo&quot;),\r\n            @Mapping(target = &quot;roleDTO&quot;, source = &quot;entity.role&quot;)\r\n    })\r\n    UserDTO entityToDto(User entity);\r\n\r\n}\r\n\r\n```\r\n```\r\n@Mapper(componentModel = &quot;spring&quot;)\r\npublic interface RoleMapper {\r\n\r\n    Role roleDtoToEntity(RoleDTO dto);\r\n    RoleDTO roleEntityToDto(Role entity);\r\n}\r\n\r\n```\r\nMy test class which tests mapper works as it should:\r\n```\r\nclass UserMapperTest {\r\n\r\n    private UserMapper mapper = Mappers.getMapper(UserMapper.class);\r\n\r\n    @Test\r\n    void dtoToEntity() {\r\n\r\n        User user = new User();\r\n        user.setName(&quot;john&quot;);\r\n        user.setSurname(&quot;doe&quot;);\r\n        user.setIdentityNo(&quot;11111111111&quot;);\r\n        user.setRole(new Role(&quot;ROLE_ADMIN&quot;));\r\n\r\n        UserDTO dto = mapper.entityToDto(user);\r\n\r\n        Assertions.assertEquals(user.getName(), dto.getName());\r\n        Assertions.assertEquals(user.getSurname(), dto.getSurname());\r\n        Assertions.assertEquals(user.getIdentityNo(), dto.getUserIdentity());\r\n        Assertions.assertEquals(user.getRole().getName(), dto.getRoleDTO().getName());\r\n    }\r\n}\r\n```\r\n\r\nHowever, NullPointerException is thrown on the line where roleMapper is called in automatically generated impl class **UserMapperImpl**:\r\n\r\n[![img][1]][1]\r\n\r\nit comes to my basic problem, *how to mock or autowire a nested mapper class?*\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/v42Fj.png","title":"How to mock MapStruct nested mapper in JUnit5","body":"<p>I have been searching a solution for about a day now. I still cannot produce a working example.</p>\n<p>My problem is simple. I have a mapper uses another mapper:</p>\n<pre><code>@Mapper(componentModel = &quot;spring&quot;, uses = {RoleMapper.class})\npublic interface UserMapper {\n\n    /**\n     * Converts User DTO to User JPA Entity\n     * @Mapping annotation is used to convert fields with different names\n     * @param dto\n     * @return\n     */\n    @Mappings({\n            @Mapping(target = &quot;identityNo&quot;, source = &quot;dto.userIdentity&quot;),\n            @Mapping(target = &quot;role&quot;, source = &quot;dto.roleDTO&quot;)\n    })\n    User dtoToEntity(UserDTO dto);\n\n    /**\n     * Converts User JPA Entity to User DTO\n     * @Mapping annotation is used to convert fields with different names\n     * @param entity\n     * @return\n     */\n    @Mappings({\n            @Mapping(target = &quot;userIdentity&quot;, source = &quot;entity.identityNo&quot;),\n            @Mapping(target = &quot;roleDTO&quot;, source = &quot;entity.role&quot;)\n    })\n    UserDTO entityToDto(User entity);\n\n}\n\n</code></pre>\n<pre><code>@Mapper(componentModel = &quot;spring&quot;)\npublic interface RoleMapper {\n\n    Role roleDtoToEntity(RoleDTO dto);\n    RoleDTO roleEntityToDto(Role entity);\n}\n\n</code></pre>\n<p>My test class which tests mapper works as it should:</p>\n<pre><code>class UserMapperTest {\n\n    private UserMapper mapper = Mappers.getMapper(UserMapper.class);\n\n    @Test\n    void dtoToEntity() {\n\n        User user = new User();\n        user.setName(&quot;john&quot;);\n        user.setSurname(&quot;doe&quot;);\n        user.setIdentityNo(&quot;11111111111&quot;);\n        user.setRole(new Role(&quot;ROLE_ADMIN&quot;));\n\n        UserDTO dto = mapper.entityToDto(user);\n\n        Assertions.assertEquals(user.getName(), dto.getName());\n        Assertions.assertEquals(user.getSurname(), dto.getSurname());\n        Assertions.assertEquals(user.getIdentityNo(), dto.getUserIdentity());\n        Assertions.assertEquals(user.getRole().getName(), dto.getRoleDTO().getName());\n    }\n}\n</code></pre>\n<p>However, NullPointerException is thrown on the line where roleMapper is called in automatically generated impl class <strong>UserMapperImpl</strong>:</p>\n<p><a href=\"https://i.stack.imgur.com/v42Fj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/v42Fj.png\" alt=\"img\" /></a></p>\n<p>it comes to my basic problem, <em>how to mock or autowire a nested mapper class?</em></p>\n"},{"tags":["java","android","xml","shadow","bottom-sheet"],"answers":[{"tags":[],"owner":{"account_id":11779404,"reputation":764,"user_id":8619606,"display_name":"Kirguduck"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1654095840,"creation_date":1654095840,"answer_id":72464112,"question_id":71514855,"body_markdown":"add  \r\n\r\n     android:elevation=&quot;15dp&quot;\r\n     android:outlineProvider=&quot;bounds&quot;\r\n\r\nto your `bottomsheet` viewgroup(RelativeLayout)","title":"Make bottom sheet have a shadow at the top android studio","body":"<p>add</p>\n<pre><code> android:elevation=&quot;15dp&quot;\n android:outlineProvider=&quot;bounds&quot;\n</code></pre>\n<p>to your <code>bottomsheet</code> viewgroup(RelativeLayout)</p>\n"}],"owner":{"account_id":18759194,"reputation":1122,"user_id":13678514,"display_name":"Emmanuel Njorodongo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":795,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1654106969,"creation_date":1647530553,"question_id":71514855,"body_markdown":"I am having a `bottom sheet` and i would like the top to have a `shadow` because the back fragment is white and the bottom sheet is also white and is confusing\r\n\r\nBelow is the code of the bottom sheet \r\n\r\n```\r\n\r\n&lt;androidx.core.widget.NestedScrollView xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n    android:id=&quot;@+id/bottom_sheet&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;wrap_content&quot;\r\n    app:behavior_hideable=&quot;true&quot;\r\n    app:layout_behavior=&quot;com.google.android.material.bottomsheet.BottomSheetBehavior&quot;&gt;\r\n\r\n    &lt;RelativeLayout\r\n        android:id=&quot;@+id/bottomsheet&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;&gt;\r\n        &lt;TextView\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:text=&quot;Bottom Sheet Text&quot;\r\n            android:textSize=&quot;30sp&quot;/&gt;\r\n    &lt;/RelativeLayout&gt;\r\n&lt;/androidx.core.widget.NestedScrollView&gt;\r\n\r\n```\r\n","title":"Make bottom sheet have a shadow at the top android studio","body":"<p>I am having a <code>bottom sheet</code> and i would like the top to have a <code>shadow</code> because the back fragment is white and the bottom sheet is also white and is confusing</p>\n<p>Below is the code of the bottom sheet</p>\n<pre><code>\n&lt;androidx.core.widget.NestedScrollView xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    android:id=&quot;@+id/bottom_sheet&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    app:behavior_hideable=&quot;true&quot;\n    app:layout_behavior=&quot;com.google.android.material.bottomsheet.BottomSheetBehavior&quot;&gt;\n\n    &lt;RelativeLayout\n        android:id=&quot;@+id/bottomsheet&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;&gt;\n        &lt;TextView\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:text=&quot;Bottom Sheet Text&quot;\n            android:textSize=&quot;30sp&quot;/&gt;\n    &lt;/RelativeLayout&gt;\n&lt;/androidx.core.widget.NestedScrollView&gt;\n\n</code></pre>\n"},{"tags":["java","hibernate","jpa"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":2,"creation_date":1654074913,"post_id":72459221,"comment_id":128003232,"body_markdown":"persist assumes a new entity, where as merge does more checks to validate existing objects. Instead of `em.find` you could do `em.getReference` which will get you a lazy proxy of the object (and eventually a query).","body":"persist assumes a new entity, where as merge does more checks to validate existing objects. Instead of <code>em.find</code> you could do <code>em.getReference</code> which will get you a lazy proxy of the object (and eventually a query)."},{"owner":{"account_id":2106266,"reputation":5117,"user_id":1872540,"display_name":"LovaBill"},"score":0,"creation_date":1654077571,"post_id":72459221,"comment_id":128004262,"body_markdown":"Hi Deinum. I create a new entity with FK to an existing one (from a &#39;picklist&#39;). What I want is after the save, to get all the data. I don&#39;t want to be optimal in performance terms, but the opposite: get the whole FK entity in response. Thanks.","body":"Hi Deinum. I create a new entity with FK to an existing one (from a &#39;picklist&#39;). What I want is after the save, to get all the data. I don&#39;t want to be optimal in performance terms, but the opposite: get the whole FK entity in response. Thanks."},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1654077673,"post_id":72459221,"comment_id":128004298,"body_markdown":"Which you get with an `em.merge` already...","body":"Which you get with an <code>em.merge</code> already..."},{"owner":{"account_id":2106266,"reputation":5117,"user_id":1872540,"display_name":"LovaBill"},"score":0,"creation_date":1654077887,"post_id":72459221,"comment_id":128004388,"body_markdown":"em.merge does not work with new entities. This will produce an error about detouched entity or not-null column. I want to execute a single save operation on the &quot;Task&quot;. Some intermediate &#39;merging&#39; is what I&#39;m looking for! But in a one-liner solution. :) Or at least someone tell me, why em.persist stores the related entity, but does not eagerly merges it in the response.","body":"em.merge does not work with new entities. This will produce an error about detouched entity or not-null column. I want to execute a single save operation on the &quot;Task&quot;. Some intermediate &#39;merging&#39; is what I&#39;m looking for! But in a one-liner solution. :) Or at least someone tell me, why em.persist stores the related entity, but does not eagerly merges it in the response."},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1654081567,"post_id":72459221,"comment_id":128005731,"body_markdown":"Which is why you should use the `em.getReference` for the relation and **not** `new TaskType(&quot;ddfsjkfd&quot;)`. It stores it because it is a new entity and not an existing one.","body":"Which is why you should use the <code>em.getReference</code> for the relation and <b>not</b> <code>new TaskType(&quot;ddfsjkfd&quot;)</code>. It stores it because it is a new entity and not an existing one."},{"owner":{"account_id":2106266,"reputation":5117,"user_id":1872540,"display_name":"LovaBill"},"score":0,"creation_date":1654084913,"post_id":72459221,"comment_id":128006863,"body_markdown":"I already said that by merging the existing one will work for me.But  I am not looking for this answer. I want to understand why em.persist vs em.merge with the same input, produces different output. I don&#39;t want to merge it myself. I want to understand the reason hibernate does it for em.mege and it doesn&#39;t do it for em.persist.","body":"I already said that by merging the existing one will work for me.But  I am not looking for this answer. I want to understand why em.persist vs em.merge with the same input, produces different output. I don&#39;t want to merge it myself. I want to understand the reason hibernate does it for em.mege and it doesn&#39;t do it for em.persist."},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1654085305,"post_id":72459221,"comment_id":128007017,"body_markdown":"That I explained in my already first comment.","body":"That I explained in my already first comment."},{"owner":{"account_id":2795364,"reputation":7571,"user_id":2404683,"display_name":"Davide D&#39;Alto"},"score":0,"creation_date":1654130744,"post_id":72459221,"comment_id":128020678,"body_markdown":"It doesn&#39;t make sense to use merge in this case, but keep in mind that usually this is how it&#39;s supposed to be used: `Task managedTask = (Task) em.merge(task);`","body":"It doesn&#39;t make sense to use merge in this case, but keep in mind that usually this is how it&#39;s supposed to be used: <code>Task managedTask = (Task) em.merge(task);</code>"}],"owner":{"account_id":2106266,"reputation":5117,"user_id":1872540,"display_name":"LovaBill"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1654106841,"creation_date":1654074581,"question_id":72459221,"body_markdown":"I have a Task that belongs to a TaskType (no cascade):\r\n\r\n    Task{\r\n     @Id String id;\r\n     \r\n     @ManyToOne TaskType taskType;\r\n    }\r\n\r\nWhen I create a new task, I assign a detached taskType with only the primary key:\r\n\r\n    Task task = new Task();\r\n    task.setTaskType(new TaskType(&quot;study&quot;));  //&quot;Study&quot; task type already exists.\r\n\r\nThe TaskType entries pre-exists in the database. So, I only want to add new Task entries. When I create a new task with \r\n\r\nem.persist(task);\r\n\r\nAs a response, I receive an entity where the taskType has only the primary key. The save is ok, I can check it in my database. The taskType was not modified or duplicated.\r\n\r\nThe problem is that when accessing task.getTaskType() it seems to be a reference of the actual object, i.e. only the PK is loaded. No LAZY query takes place since the default is EAGER.\r\n\r\nWhen I&#39;m updating a task with the exact same steps but using:\r\n    \r\n    em.merge(task); //all data are available after this line\r\n\r\nThe task.taskType now holds all the information of the row.\r\n\r\n\r\nI&#39;m aware that I can first find and set an attached entity of type to my task:\r\n\r\n    task.setTaskType(em.find(TaskType.class, &quot;study&quot;)); //this will fetch all data, not a reference\r\n    em.persist(task); // Now all info is available\r\n\r\nCan someone give me an alternative or an one-liner solution? Or at least explain why this difference exists between em.persist and em.merge when referring a @ManyToOne entity without cascade?","title":"em.persist does not fetch @ManyToOne existing data","body":"<p>I have a Task that belongs to a TaskType (no cascade):</p>\n<pre><code>Task{\n @Id String id;\n \n @ManyToOne TaskType taskType;\n}\n</code></pre>\n<p>When I create a new task, I assign a detached taskType with only the primary key:</p>\n<pre><code>Task task = new Task();\ntask.setTaskType(new TaskType(&quot;study&quot;));  //&quot;Study&quot; task type already exists.\n</code></pre>\n<p>The TaskType entries pre-exists in the database. So, I only want to add new Task entries. When I create a new task with</p>\n<p>em.persist(task);</p>\n<p>As a response, I receive an entity where the taskType has only the primary key. The save is ok, I can check it in my database. The taskType was not modified or duplicated.</p>\n<p>The problem is that when accessing task.getTaskType() it seems to be a reference of the actual object, i.e. only the PK is loaded. No LAZY query takes place since the default is EAGER.</p>\n<p>When I'm updating a task with the exact same steps but using:</p>\n<pre><code>em.merge(task); //all data are available after this line\n</code></pre>\n<p>The task.taskType now holds all the information of the row.</p>\n<p>I'm aware that I can first find and set an attached entity of type to my task:</p>\n<pre><code>task.setTaskType(em.find(TaskType.class, &quot;study&quot;)); //this will fetch all data, not a reference\nem.persist(task); // Now all info is available\n</code></pre>\n<p>Can someone give me an alternative or an one-liner solution? Or at least explain why this difference exists between em.persist and em.merge when referring a @ManyToOne entity without cascade?</p>\n"},{"tags":["javascript","java","reactjs","spring-boot","react-router"],"comments":[{"owner":{"account_id":11418070,"reputation":2294,"user_id":8370370,"accept_rate":20,"display_name":"dee"},"score":0,"creation_date":1624970494,"post_id":68178610,"comment_id":120498020,"body_markdown":"Does this answer your question\nhttps://stackoverflow.com/questions/39331929/spring-catch-all-route-for-index-html","body":"Does this answer your question <a href=\"https://stackoverflow.com/questions/39331929/spring-catch-all-route-for-index-html\" title=\"spring catch all route for index html\">stackoverflow.com/questions/39331929/&hellip;</a>"},{"owner":{"account_id":3781656,"reputation":464,"user_id":3448304,"accept_rate":44,"display_name":"Jurass"},"score":0,"creation_date":1625052276,"post_id":68178610,"comment_id":120523331,"body_markdown":"Unfortunatelly it doesn&#39;t.","body":"Unfortunatelly it doesn&#39;t."}],"answers":[{"tags":[],"owner":{"account_id":15616901,"reputation":647,"user_id":11266880,"display_name":"ehhc"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1624970102,"creation_date":1624970102,"answer_id":68178780,"question_id":68178610,"body_markdown":"I think what you&#39;re looking for is a ResourceHandler https://www.baeldung.com/spring-mvc-static-resources#3-chaining-resourceresolvers resp. https://github.com/eugenp/tutorials/blob/c9882f2090e918d0f441eeebf1f456e89dda2a17/spring-static-resources/src/main/java/com/baeldung/spring/MvcConfig.java#L57\r\n\r\nHope that helps you to have a starting point for your research :) ","title":"Serve static folder with Spring Boot and React Router","body":"<p>I think what you're looking for is a ResourceHandler <a href=\"https://www.baeldung.com/spring-mvc-static-resources#3-chaining-resourceresolvers\" rel=\"nofollow noreferrer\">https://www.baeldung.com/spring-mvc-static-resources#3-chaining-resourceresolvers</a> resp. <a href=\"https://github.com/eugenp/tutorials/blob/c9882f2090e918d0f441eeebf1f456e89dda2a17/spring-static-resources/src/main/java/com/baeldung/spring/MvcConfig.java#L57\" rel=\"nofollow noreferrer\">https://github.com/eugenp/tutorials/blob/c9882f2090e918d0f441eeebf1f456e89dda2a17/spring-static-resources/src/main/java/com/baeldung/spring/MvcConfig.java#L57</a></p>\n<p>Hope that helps you to have a starting point for your research :)</p>\n"},{"tags":[],"owner":{"account_id":3781656,"reputation":464,"user_id":3448304,"accept_rate":44,"display_name":"Jurass"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1625211442,"creation_date":1625052085,"answer_id":68193822,"question_id":68178610,"body_markdown":"After lot of research and trying various approaches I have come to conclusion that the simplest solution would be to implement Filter and handle serving of static web files on my own, which bypasses the Spring&#39;s handling:\r\n\r\n    @Component\r\n    public class StaticContentFilter implements Filter {\r\n        \r\n        private List&lt;String&gt; fileExtensions = Arrays.asList(&quot;html&quot;, &quot;js&quot;, &quot;json&quot;, &quot;csv&quot;, &quot;css&quot;, &quot;png&quot;, &quot;svg&quot;, &quot;eot&quot;, &quot;ttf&quot;, &quot;woff&quot;, &quot;appcache&quot;, &quot;jpg&quot;, &quot;jpeg&quot;, &quot;gif&quot;, &quot;ico&quot;);\r\n        \r\n        @Override\r\n        public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {\r\n            doFilter((HttpServletRequest) request, (HttpServletResponse) response, chain);\r\n        }\r\n        \r\n        private void doFilter(HttpServletRequest request, HttpServletResponse response, FilterChain chain) throws IOException, ServletException {\r\n            String path = request.getServletPath();\r\n            \r\n            boolean isApi = path.startsWith(&quot;/api&quot;);\r\n            boolean isResourceFile = !isApi &amp;&amp; fileExtensions.stream().anyMatch(path::contains);\r\n            \r\n            if (isApi) {\r\n                chain.doFilter(request, response);\r\n            } else if (isResourceFile) {\r\n                resourceToResponse(&quot;static&quot; + path, response);\r\n            } else {\r\n                resourceToResponse(&quot;static/index.html&quot;, response);\r\n            }\r\n        }\r\n        \r\n        private void resourceToResponse(String resourcePath, HttpServletResponse response) throws IOException {\r\n            InputStream inputStream = Thread.currentThread()\r\n                    .getContextClassLoader()\r\n                    .getResourceAsStream(resourcePath);\r\n            \r\n            if (inputStream == null) {\r\n                response.sendError(NOT_FOUND.value(), NOT_FOUND.getReasonPhrase());\r\n                return;\r\n            }\r\n            \r\n            inputStream.transferTo(response.getOutputStream());\r\n        }\r\n    }","title":"Serve static folder with Spring Boot and React Router","body":"<p>After lot of research and trying various approaches I have come to conclusion that the simplest solution would be to implement Filter and handle serving of static web files on my own, which bypasses the Spring's handling:</p>\n<pre><code>@Component\npublic class StaticContentFilter implements Filter {\n    \n    private List&lt;String&gt; fileExtensions = Arrays.asList(&quot;html&quot;, &quot;js&quot;, &quot;json&quot;, &quot;csv&quot;, &quot;css&quot;, &quot;png&quot;, &quot;svg&quot;, &quot;eot&quot;, &quot;ttf&quot;, &quot;woff&quot;, &quot;appcache&quot;, &quot;jpg&quot;, &quot;jpeg&quot;, &quot;gif&quot;, &quot;ico&quot;);\n    \n    @Override\n    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {\n        doFilter((HttpServletRequest) request, (HttpServletResponse) response, chain);\n    }\n    \n    private void doFilter(HttpServletRequest request, HttpServletResponse response, FilterChain chain) throws IOException, ServletException {\n        String path = request.getServletPath();\n        \n        boolean isApi = path.startsWith(&quot;/api&quot;);\n        boolean isResourceFile = !isApi &amp;&amp; fileExtensions.stream().anyMatch(path::contains);\n        \n        if (isApi) {\n            chain.doFilter(request, response);\n        } else if (isResourceFile) {\n            resourceToResponse(&quot;static&quot; + path, response);\n        } else {\n            resourceToResponse(&quot;static/index.html&quot;, response);\n        }\n    }\n    \n    private void resourceToResponse(String resourcePath, HttpServletResponse response) throws IOException {\n        InputStream inputStream = Thread.currentThread()\n                .getContextClassLoader()\n                .getResourceAsStream(resourcePath);\n        \n        if (inputStream == null) {\n            response.sendError(NOT_FOUND.value(), NOT_FOUND.getReasonPhrase());\n            return;\n        }\n        \n        inputStream.transferTo(response.getOutputStream());\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1339086,"reputation":79,"user_id":1281158,"display_name":"Tom&#225;š Johan Pr&#237;trsk&#253;"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1654105865,"creation_date":1654105865,"answer_id":72466110,"question_id":68178610,"body_markdown":"Jurass&#39;s answer worked for me, but I needed to set ContentType headers. Without correct headers the browser would print the HTML as text in quotes. This is how I enabled natural paths in React. \r\n\r\n    import org.springframework.http.HttpStatus;\r\n    import org.springframework.stereotype.Component;\r\n    \r\n    import javax.servlet.*;\r\n    import javax.servlet.http.HttpServletRequest;\r\n    import javax.servlet.http.HttpServletResponse;\r\n    import java.io.IOException;\r\n    import java.io.InputStream;\r\n    import java.util.Arrays;\r\n    import java.util.List;\r\n    \r\n    @Component\r\n    public class StaticContentFilter implements Filter {\r\n    \r\n        private List&lt;String&gt; fileExtensions = Arrays.asList(&quot;html&quot;, &quot;js&quot;, &quot;json&quot;, &quot;csv&quot;, &quot;css&quot;, &quot;png&quot;, &quot;svg&quot;, &quot;eot&quot;, &quot;ttf&quot;, &quot;woff&quot;, &quot;appcache&quot;, &quot;jpg&quot;, &quot;jpeg&quot;, &quot;gif&quot;, &quot;ico&quot;);\r\n    \r\n        @Override\r\n        public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {\r\n            doFilter((HttpServletRequest) request, (HttpServletResponse) response, chain);\r\n        }\r\n    \r\n        private void doFilter(HttpServletRequest request, HttpServletResponse response, FilterChain chain) throws IOException, ServletException {\r\n            String path = request.getServletPath();\r\n    \r\n            boolean isApi = path.startsWith(&quot;/api&quot;);\r\n            boolean isResourceFile = !isApi &amp;&amp; fileExtensions.stream().anyMatch(path::contains);\r\n    \r\n            if (isApi) {\r\n                chain.doFilter(request, response);\r\n            } else if (isResourceFile) {\r\n                resourceToResponse(&quot;static&quot; + path, response);\r\n            } else {\r\n                resourceToResponse(&quot;static/index.html&quot;, response);\r\n            }\r\n        }\r\n    \r\n        private void resourceToResponse(String resourcePath, HttpServletResponse response) throws IOException {\r\n            InputStream inputStream = Thread.currentThread()\r\n                    .getContextClassLoader()\r\n                    .getResourceAsStream(resourcePath);\r\n    \r\n            if (inputStream == null) {\r\n                response.sendError(HttpStatus.NOT_FOUND.value(), HttpStatus.NOT_FOUND.getReasonPhrase());\r\n                return;\r\n            }\r\n\r\n            //headers\r\n            if (resourcePath.endsWith(&quot;.html&quot;)) {\r\n                response.setContentType(&quot;text/html&quot;);\r\n            }\r\n            if (resourcePath.endsWith(&quot;.css&quot;)) {\r\n                response.setContentType(&quot;text/css&quot;);\r\n            }\r\n            if (resourcePath.endsWith(&quot;.js&quot;)) {\r\n                response.setContentType(&quot;text/javascript&quot;);\r\n            }\r\n    \r\n            inputStream.transferTo(response.getOutputStream());\r\n        }\r\n    }\r\n\r\nIf you&#39;ve found a better solution, please let me know.\r\n\r\n","title":"Serve static folder with Spring Boot and React Router","body":"<p>Jurass's answer worked for me, but I needed to set ContentType headers. Without correct headers the browser would print the HTML as text in quotes. This is how I enabled natural paths in React.</p>\n<pre><code>import org.springframework.http.HttpStatus;\nimport org.springframework.stereotype.Component;\n\nimport javax.servlet.*;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.util.Arrays;\nimport java.util.List;\n\n@Component\npublic class StaticContentFilter implements Filter {\n\n    private List&lt;String&gt; fileExtensions = Arrays.asList(&quot;html&quot;, &quot;js&quot;, &quot;json&quot;, &quot;csv&quot;, &quot;css&quot;, &quot;png&quot;, &quot;svg&quot;, &quot;eot&quot;, &quot;ttf&quot;, &quot;woff&quot;, &quot;appcache&quot;, &quot;jpg&quot;, &quot;jpeg&quot;, &quot;gif&quot;, &quot;ico&quot;);\n\n    @Override\n    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {\n        doFilter((HttpServletRequest) request, (HttpServletResponse) response, chain);\n    }\n\n    private void doFilter(HttpServletRequest request, HttpServletResponse response, FilterChain chain) throws IOException, ServletException {\n        String path = request.getServletPath();\n\n        boolean isApi = path.startsWith(&quot;/api&quot;);\n        boolean isResourceFile = !isApi &amp;&amp; fileExtensions.stream().anyMatch(path::contains);\n\n        if (isApi) {\n            chain.doFilter(request, response);\n        } else if (isResourceFile) {\n            resourceToResponse(&quot;static&quot; + path, response);\n        } else {\n            resourceToResponse(&quot;static/index.html&quot;, response);\n        }\n    }\n\n    private void resourceToResponse(String resourcePath, HttpServletResponse response) throws IOException {\n        InputStream inputStream = Thread.currentThread()\n                .getContextClassLoader()\n                .getResourceAsStream(resourcePath);\n\n        if (inputStream == null) {\n            response.sendError(HttpStatus.NOT_FOUND.value(), HttpStatus.NOT_FOUND.getReasonPhrase());\n            return;\n        }\n\n        //headers\n        if (resourcePath.endsWith(&quot;.html&quot;)) {\n            response.setContentType(&quot;text/html&quot;);\n        }\n        if (resourcePath.endsWith(&quot;.css&quot;)) {\n            response.setContentType(&quot;text/css&quot;);\n        }\n        if (resourcePath.endsWith(&quot;.js&quot;)) {\n            response.setContentType(&quot;text/javascript&quot;);\n        }\n\n        inputStream.transferTo(response.getOutputStream());\n    }\n}\n</code></pre>\n<p>If you've found a better solution, please let me know.</p>\n"}],"owner":{"account_id":3781656,"reputation":464,"user_id":3448304,"accept_rate":44,"display_name":"Jurass"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2206,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":68193822,"answer_count":3,"score":2,"last_activity_date":1654105865,"creation_date":1624969285,"question_id":68178610,"body_markdown":"I have a React client application which is build and compiled into the Java resource folder\r\n\r\n    src/main/resources/static\r\n\r\nContent of the *static* folder is then served by standard Spring Boot application with no issues.\r\n\r\nHowever, when I will start to use React Router, I need to be able to resolve this path:\r\n\r\n    localhost:8080/userSettingsPage\r\n\r\ninto *index.html*:\r\n\r\n    src/resource/static/index.html\r\n\r\nI&#39;m aware that I can do this in Controller as follow:\r\n\r\n    @Controller\r\n    public class MyController {\r\n        @RequestMapping(&quot;/userSettingsPage&quot;)\r\n        public String getIndex() {\r\n           return &quot;index.html&quot;;\r\n        }\r\n    }\r\n\r\nHowever I would like to specify my Controller in more generic way:\r\n\r\n 1. If URL *{path}* ends with any of *&quot;.html&quot;, &quot;.js&quot;, &quot;.json&quot;, &quot;.csv&quot;, &quot;.css&quot;, &quot;.png&quot;, &quot;.svg&quot;, &quot;.eot&quot;, &quot;.ttf&quot;, &quot;.woff&quot;, &quot;.appcache&quot;, &quot;.jpg&quot;, &quot;.jpeg&quot;, &quot;.gif&quot;, &quot;.ico&quot;*, then return file in */static/{path}*\r\n 2. Else return */static/index.html*\r\n\r\nHow can I achieve it?\r\n","title":"Serve static folder with Spring Boot and React Router","body":"<p>I have a React client application which is build and compiled into the Java resource folder</p>\n<pre><code>src/main/resources/static\n</code></pre>\n<p>Content of the <em>static</em> folder is then served by standard Spring Boot application with no issues.</p>\n<p>However, when I will start to use React Router, I need to be able to resolve this path:</p>\n<pre><code>localhost:8080/userSettingsPage\n</code></pre>\n<p>into <em>index.html</em>:</p>\n<pre><code>src/resource/static/index.html\n</code></pre>\n<p>I'm aware that I can do this in Controller as follow:</p>\n<pre><code>@Controller\npublic class MyController {\n    @RequestMapping(&quot;/userSettingsPage&quot;)\n    public String getIndex() {\n       return &quot;index.html&quot;;\n    }\n}\n</code></pre>\n<p>However I would like to specify my Controller in more generic way:</p>\n<ol>\n<li>If URL <em>{path}</em> ends with any of <em>&quot;.html&quot;, &quot;.js&quot;, &quot;.json&quot;, &quot;.csv&quot;, &quot;.css&quot;, &quot;.png&quot;, &quot;.svg&quot;, &quot;.eot&quot;, &quot;.ttf&quot;, &quot;.woff&quot;, &quot;.appcache&quot;, &quot;.jpg&quot;, &quot;.jpeg&quot;, &quot;.gif&quot;, &quot;.ico&quot;</em>, then return file in <em>/static/{path}</em></li>\n<li>Else return <em>/static/index.html</em></li>\n</ol>\n<p>How can I achieve it?</p>\n"},{"tags":["java","gradle","minecraft","minecraft-forge"],"comments":[{"owner":{"account_id":10583924,"reputation":328,"user_id":7796872,"display_name":"Z3RP"},"score":0,"creation_date":1578296790,"post_id":59608312,"comment_id":105380217,"body_markdown":"try to remove the cache with rm `-rf ~/.gradle`. For me it looks like you are missing some dependencies. Try to google something like gradle could note resolve dependencies and i think you will find a solution.","body":"try to remove the cache with rm <code>-rf ~&#47;.gradle</code>. For me it looks like you are missing some dependencies. Try to google something like gradle could note resolve dependencies and i think you will find a solution."},{"owner":{"account_id":14609456,"reputation":962,"user_id":10551333,"display_name":"Shantanu Shinde"},"score":0,"creation_date":1578297041,"post_id":59608312,"comment_id":105380302,"body_markdown":"@Z3RP doesn&#39;t help. I am still getting the same error. I even tried different version of minecraft forge. still same error","body":"@Z3RP doesn&#39;t help. I am still getting the same error. I even tried different version of minecraft forge. still same error"},{"owner":{"account_id":10583924,"reputation":328,"user_id":7796872,"display_name":"Z3RP"},"score":0,"creation_date":1578297169,"post_id":59608312,"comment_id":105380337,"body_markdown":"Can you show us your gradle configuration ?","body":"Can you show us your gradle configuration ?"},{"owner":{"account_id":14609456,"reputation":962,"user_id":10551333,"display_name":"Shantanu Shinde"},"score":0,"creation_date":1578297404,"post_id":59608312,"comment_id":105380407,"body_markdown":"@Z3RP how do I show the configuration? I have not downloaded the gradle separately. I am using the same that comes with minecraft forge","body":"@Z3RP how do I show the configuration? I have not downloaded the gradle separately. I am using the same that comes with minecraft forge"},{"owner":{"account_id":10583924,"reputation":328,"user_id":7796872,"display_name":"Z3RP"},"score":0,"creation_date":1578298398,"post_id":59608312,"comment_id":105380697,"body_markdown":"there must be  a gradle.build file. That is the config file","body":"there must be  a gradle.build file. That is the config file"},{"owner":{"account_id":14609456,"reputation":962,"user_id":10551333,"display_name":"Shantanu Shinde"},"score":0,"creation_date":1578298588,"post_id":59608312,"comment_id":105380770,"body_markdown":"@Z3RP I added the contents of build.gradle file to the question.","body":"@Z3RP I added the contents of build.gradle file to the question."},{"owner":{"account_id":10583924,"reputation":328,"user_id":7796872,"display_name":"Z3RP"},"score":0,"creation_date":1578298982,"post_id":59608312,"comment_id":105380901,"body_markdown":"Can you try this configuration or just to change the repo url\n[gradle.build](https://gist.github.com/Runemoro/f8ea27bece4806d8169c47ff8dcdf69a)","body":"Can you try this configuration or just to change the repo url <a href=\"https://gist.github.com/Runemoro/f8ea27bece4806d8169c47ff8dcdf69a\" rel=\"nofollow noreferrer\">gradle.build</a>"},{"owner":{"account_id":14609456,"reputation":962,"user_id":10551333,"display_name":"Shantanu Shinde"},"score":0,"creation_date":1578305836,"post_id":59608312,"comment_id":105383831,"body_markdown":"@Z3RP I replaced the repositories and dependencies part as per the repo. but now I get error the implementation() for the first implementation in the dependencies could not be found","body":"@Z3RP I replaced the repositories and dependencies part as per the repo. but now I get error the implementation() for the first implementation in the dependencies could not be found"},{"owner":{"account_id":540166,"reputation":15708,"user_id":1663383,"accept_rate":54,"display_name":"Draco18s no longer trusts SE"},"score":0,"creation_date":1578326563,"post_id":59608312,"comment_id":105393601,"body_markdown":"You might get better help on the [forge forums](https://www.minecraftforge.net/forum/forum/70-modder-support/).","body":"You might get better help on the <a href=\"https://www.minecraftforge.net/forum/forum/70-modder-support/\" rel=\"nofollow noreferrer\">forge forums</a>."},{"owner":{"account_id":14609456,"reputation":962,"user_id":10551333,"display_name":"Shantanu Shinde"},"score":0,"creation_date":1578327497,"post_id":59608312,"comment_id":105394143,"body_markdown":"@Draco18snolongertrustsSE I have already posted it there. I thought posting at both sites, so it will be resolved relatively faster","body":"@Draco18snolongertrustsSE I have already posted it there. I thought posting at both sites, so it will be resolved relatively faster"},{"owner":{"account_id":540166,"reputation":15708,"user_id":1663383,"accept_rate":54,"display_name":"Draco18s no longer trusts SE"},"score":0,"creation_date":1578332374,"post_id":59608312,"comment_id":105396429,"body_markdown":"I had made a cursory check and didn&#39;t see a thread that matched (no similar user name and only seemingly related thread had a different error).","body":"I had made a cursory check and didn&#39;t see a thread that matched (no similar user name and only seemingly related thread had a different error)."},{"owner":{"account_id":14609456,"reputation":962,"user_id":10551333,"display_name":"Shantanu Shinde"},"score":0,"creation_date":1578356812,"post_id":59608312,"comment_id":105404789,"body_markdown":"@Draco18snolongertrustsSE https://www.minecraftforge.net/forum/topic/79450-build-failed-with-exception-error-of-setting-up-workspace/?tab=comments#comment-379458 this one","body":"@Draco18snolongertrustsSE <a href=\"https://www.minecraftforge.net/forum/topic/79450-build-failed-with-exception-error-of-setting-up-workspace/?tab=comments#comment-379458\" rel=\"nofollow noreferrer\">minecraftforge.net/forum/topic/&hellip;</a> this one"},{"owner":{"account_id":14609456,"reputation":962,"user_id":10551333,"display_name":"Shantanu Shinde"},"score":0,"creation_date":1578356907,"post_id":59608312,"comment_id":105404809,"body_markdown":"@Draco18snolongertrustsSE also,now other things are working but I am  getting error that `client-extra.jar` could not be found. and it showed a folder where it searched and it doesn&#39;t have that file","body":"@Draco18snolongertrustsSE also,now other things are working but I am  getting error that <code>client-extra.jar</code> could not be found. and it showed a folder where it searched and it doesn&#39;t have that file"},{"owner":{"account_id":540166,"reputation":15708,"user_id":1663383,"accept_rate":54,"display_name":"Draco18s no longer trusts SE"},"score":0,"creation_date":1578362084,"post_id":59608312,"comment_id":105405810,"body_markdown":"It should be generated by the setup/decomp process.","body":"It should be generated by the setup/decomp process."},{"owner":{"account_id":14609456,"reputation":962,"user_id":10551333,"display_name":"Shantanu Shinde"},"score":0,"creation_date":1578362591,"post_id":59608312,"comment_id":105405913,"body_markdown":"@Draco18snolongertrustsSE should the `.\\gradlew setupDecompWorkspace` command be used first or just `.\\gradlew eclipse` is enough?","body":"@Draco18snolongertrustsSE should the <code>.\\gradlew setupDecompWorkspace</code> command be used first or just <code>.\\gradlew eclipse</code> is enough?"}],"answers":[{"tags":[],"owner":{"account_id":18491200,"reputation":1,"user_id":13470753,"display_name":"TheSaikos"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1588634433,"creation_date":1588634433,"answer_id":61603249,"question_id":59608312,"body_markdown":"I think the gradle version you are using is too high.Youre currently using gradle 5.0 and you should try to use gradle 4.9.\r\n","title":"Error on setting up workspace for Minecraft modding","body":"<p>I think the gradle version you are using is too high.Youre currently using gradle 5.0 and you should try to use gradle 4.9.</p>\n"},{"tags":[],"owner":{"account_id":16505150,"reputation":1,"user_id":11925357,"display_name":"Tehcn"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1602377478,"creation_date":1602377478,"answer_id":64299676,"question_id":59608312,"body_markdown":"The solution that worked for me is simple instead of `gradlew setupDecompWorkspace`, use `gradlew eclipse`. For those of you who found this as a result on google, it won&#39;t with Intellij.","title":"Error on setting up workspace for Minecraft modding","body":"<p>The solution that worked for me is simple instead of <code>gradlew setupDecompWorkspace</code>, use <code>gradlew eclipse</code>. For those of you who found this as a result on google, it won't with Intellij.</p>\n"},{"tags":[],"owner":{"account_id":21768508,"reputation":41,"user_id":16071989,"display_name":"Bluesillybeard2"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1654104633,"creation_date":1654104633,"answer_id":72465908,"question_id":59608312,"body_markdown":"Replacing every instance of &quot;http://files.minecraftforge.net/maven&quot; with &quot;https://libraries.minecraft.net&quot; in build.gradle fixed it for me.\r\n","title":"Error on setting up workspace for Minecraft modding","body":"<p>Replacing every instance of &quot;http://files.minecraftforge.net/maven&quot; with &quot;https://libraries.minecraft.net&quot; in build.gradle fixed it for me.</p>\n"}],"owner":{"account_id":14609456,"reputation":962,"user_id":10551333,"display_name":"Shantanu Shinde"},"comment_count":15,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":6180,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":3,"score":2,"last_activity_date":1654104633,"creation_date":1578296382,"question_id":59608312,"body_markdown":"I am trying to set up the workspace for creating mods for Minecraft. I installed JRE, installed JDK 8. I installed eclipse. I downloaded the latest mdk file of minecraft forge. I setup the environment variables for JDK. I extracted the forge zip file. I opened powershell in the extracted forge folder. I ran the command `.\\gradlew setupDecompWorkspace`. I am getting the following error:\r\n\r\n    &gt; FAILURE: Build failed with an exception.\r\n    &gt; \r\n    &gt; * What went wrong: A problem occurred configuring root project &#39;First Mod&#39;.\r\n    &gt; &gt; Could not resolve all files for configuration &#39;:_compileJava_1&#39;.\r\n    &gt;    &gt; Could not resolve com.mojang:patchy:1.1.\r\n    &gt;      Required by:\r\n    &gt;          project : &gt; net.minecraft:client:1.15.1\r\n    &gt;       &gt; Skipped due to earlier error\r\n    &gt;    &gt; Could not resolve oshi-project:oshi-core:1.1.\r\n    &gt;      Required by:\r\n    &gt;          project : &gt; net.minecraft:client:1.15.1\r\n    &gt;       &gt; Skipped due to earlier error\r\n    &gt;    &gt; Could not resolve com.ibm.icu:icu4j-core-mojang:51.2.\r\n    &gt;      Required by:\r\n    &gt;          project : &gt; net.minecraft:client:1.15.1\r\n    &gt;       &gt; Skipped due to earlier error\r\n    &gt;    &gt; Could not resolve com.mojang:javabridge:1.0.22.\r\n    &gt;      Required by:\r\n    &gt;          project : &gt; net.minecraft:client:1.15.1\r\n    &gt;       &gt; Skipped due to earlier error\r\n    &gt;    &gt; Could not resolve com.mojang:brigadier:1.0.17.\r\n    &gt;      Required by:\r\n    &gt;          project : &gt; net.minecraft:client:1.15.1\r\n    &gt;       &gt; Skipped due to earlier error\r\n    &gt;    &gt; Could not resolve com.mojang:datafixerupper:2.0.24.\r\n    &gt;      Required by:\r\n    &gt;          project : &gt; net.minecraft:client:1.15.1\r\n    &gt;       &gt; Skipped due to earlier error\r\n    &gt;    &gt; Could not resolve com.mojang:authlib:1.5.25.\r\n    &gt;      Required by:\r\n    &gt;          project : &gt; net.minecraft:client:1.15.1\r\n    &gt;       &gt; Skipped due to earlier error\r\n    &gt;    &gt; Could not resolve com.mojang:text2speech:1.11.3.\r\n    &gt;      Required by:\r\n    &gt;          project : &gt; net.minecraft:client:1.15.1\r\n    &gt;       &gt; Skipped due to earlier error\r\n    &gt; \r\n    &gt; * Try: Run with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output. Run with --scan to get full insights.\r\n    &gt; \r\n    &gt; * Get more help at https://help.gradle.org\r\n    &gt; \r\n    &gt; Deprecated Gradle features were used in this build, making it\r\n    &gt; incompatible with Gradle 5.0. Use &#39;--warning-mode all&#39; to show the\r\n    &gt; individual deprecation warnings. See\r\n    &gt; https://docs.gradle.org/4.9/userguide/command_line_interface.html#sec:command_line_warnings\r\n\r\nHow do I fix this error? I even tried the other command that I found online. &quot;.\\gradlew genEclipseRuns` this gives the following error:\r\n\r\n    FAILURE: Build failed with an exception.\r\n    \r\n    * What went wrong:\r\n    A problem occurred configuring root project &#39;First Mod&#39;.\r\n    &gt; Could not resolve all files for configuration &#39;:_compileJava_1&#39;.\r\n       &gt; Could not resolve com.mojang:patchy:1.1.\r\n         Required by:\r\n             project : &gt; net.minecraft:client:1.15.1\r\n          &gt; Skipped due to earlier error\r\n       &gt; Could not resolve oshi-project:oshi-core:1.1.\r\n         Required by:\r\n             project : &gt; net.minecraft:client:1.15.1\r\n          &gt; Skipped due to earlier error\r\n       &gt; Could not resolve com.ibm.icu:icu4j-core-mojang:51.2.\r\n         Required by:\r\n             project : &gt; net.minecraft:client:1.15.1\r\n          &gt; Skipped due to earlier error\r\n       &gt; Could not resolve com.mojang:javabridge:1.0.22.\r\n         Required by:\r\n             project : &gt; net.minecraft:client:1.15.1\r\n          &gt; Skipped due to earlier error\r\n       &gt; Could not resolve com.mojang:brigadier:1.0.17.\r\n         Required by:\r\n             project : &gt; net.minecraft:client:1.15.1\r\n          &gt; Skipped due to earlier error\r\n       &gt; Could not resolve com.mojang:datafixerupper:2.0.24.\r\n         Required by:\r\n             project : &gt; net.minecraft:client:1.15.1\r\n          &gt; Skipped due to earlier error\r\n       &gt; Could not resolve com.mojang:authlib:1.5.25.\r\n         Required by:\r\n             project : &gt; net.minecraft:client:1.15.1\r\n          &gt; Skipped due to earlier error\r\n       &gt; Could not resolve com.mojang:text2speech:1.11.3.\r\n         Required by:\r\n             project : &gt; net.minecraft:client:1.15.1\r\n          &gt; Skipped due to earlier error\r\n    \r\n    * Try:\r\n    Run with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output. Run with --scan to get full insights.\r\n    \r\n    * Get more help at https://help.gradle.org\r\n    \r\n    Deprecated Gradle features were used in this build, making it incompatible with Gradle 5.0.\r\n    Use &#39;--warning-mode all&#39; to show the individual deprecation warnings.\r\n    See https://docs.gradle.org/4.9/userguide/command_line_interface.html#sec:command_line_warnings\r\n    \r\n    BUILD FAILED in 44s\r\n\r\nThis is the gradle.build file present in the minecraft forge folder:\r\n\r\n    buildscript {\r\n        repositories {\r\n            maven { url = &#39;https://files.minecraftforge.net/maven&#39; }\r\n            jcenter()\r\n            mavenCentral()\r\n        }\r\n        dependencies {\r\n            classpath group: &#39;net.minecraftforge.gradle&#39;, name: &#39;ForgeGradle&#39;, version: &#39;3.+&#39;, changing: true\r\n        }\r\n    }\r\n    apply plugin: &#39;net.minecraftforge.gradle&#39;\r\n    // Only edit below this line, the above code adds and enables the necessary things for Forge to be setup.\r\n    apply plugin: &#39;eclipse&#39;\r\n    apply plugin: &#39;maven-publish&#39;\r\n    \r\n    version = &#39;1.0&#39;\r\n    group = &#39;com.yourname.modid&#39; // http://maven.apache.org/guides/mini/guide-naming-conventions.html\r\n    archivesBaseName = &#39;modid&#39;\r\n    \r\n    sourceCompatibility = targetCompatibility = compileJava.sourceCompatibility = compileJava.targetCompatibility = &#39;1.8&#39; // Need this here so eclipse task generates correctly.\r\n    \r\n    minecraft {\r\n        // The mappings can be changed at any time, and must be in the following format.\r\n        // snapshot_YYYYMMDD   Snapshot are built nightly.\r\n        // stable_#            Stables are built at the discretion of the MCP team.\r\n        // Use non-default mappings at your own risk. they may not always work.\r\n        // Simply re-run your setup task after changing the mappings to update your workspace.\r\n        mappings channel: &#39;snapshot&#39;, version: &#39;20190719-1.14.3&#39;\r\n        // makeObfSourceJar = false // an Srg named sources jar is made by default. uncomment this to disable.\r\n        \r\n        // accessTransformer = file(&#39;src/main/resources/META-INF/accesstransformer.cfg&#39;)\r\n    \r\n        // Default run configurations.\r\n        // These can be tweaked, removed, or duplicated as needed.\r\n        runs {\r\n            client {\r\n                workingDirectory project.file(&#39;run&#39;)\r\n    \r\n                // Recommended logging data for a userdev environment\r\n                property &#39;forge.logging.markers&#39;, &#39;SCAN,REGISTRIES,REGISTRYDUMP&#39;\r\n    \r\n                // Recommended logging level for the console\r\n                property &#39;forge.logging.console.level&#39;, &#39;debug&#39;\r\n    \r\n                mods {\r\n                    examplemod {\r\n                        source sourceSets.main\r\n                    }\r\n                }\r\n            }\r\n    \r\n            server {\r\n                workingDirectory project.file(&#39;run&#39;)\r\n    \r\n                // Recommended logging data for a userdev environment\r\n                property &#39;forge.logging.markers&#39;, &#39;SCAN,REGISTRIES,REGISTRYDUMP&#39;\r\n    \r\n                // Recommended logging level for the console\r\n                property &#39;forge.logging.console.level&#39;, &#39;debug&#39;\r\n    \r\n                mods {\r\n                    examplemod {\r\n                        source sourceSets.main\r\n                    }\r\n                }\r\n            }\r\n    \r\n            data {\r\n                workingDirectory project.file(&#39;run&#39;)\r\n    \r\n                // Recommended logging data for a userdev environment\r\n                property &#39;forge.logging.markers&#39;, &#39;SCAN,REGISTRIES,REGISTRYDUMP&#39;\r\n    \r\n                // Recommended logging level for the console\r\n                property &#39;forge.logging.console.level&#39;, &#39;debug&#39;\r\n    \r\n                args &#39;--mod&#39;, &#39;examplemod&#39;, &#39;--all&#39;, &#39;--output&#39;, file(&#39;src/generated/resources/&#39;)\r\n    \r\n                mods {\r\n                    examplemod {\r\n                        source sourceSets.main\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    \r\n    dependencies {\r\n        // Specify the version of Minecraft to use, If this is any group other then &#39;net.minecraft&#39; it is assumed\r\n        // that the dep is a ForgeGradle &#39;patcher&#39; dependency. And it&#39;s patches will be applied.\r\n        // The userdev artifact is a special name and will get all sorts of transformations applied to it.\r\n        minecraft &#39;net.minecraftforge:forge:1.15.1-30.0.26&#39;\r\n    \r\n        // You may put jars on which you depend on in ./libs or you may define them like so..\r\n        // compile &quot;some.group:artifact:version:classifier&quot;\r\n        // compile &quot;some.group:artifact:version&quot;\r\n    \r\n        // Real examples\r\n        // compile &#39;com.mod-buildcraft:buildcraft:6.0.8:dev&#39;  // adds buildcraft to the dev env\r\n        // compile &#39;com.googlecode.efficient-java-matrix-library:ejml:0.24&#39; // adds ejml to the dev env\r\n    \r\n        // The &#39;provided&#39; configuration is for optional dependencies that exist at compile-time but might not at runtime.\r\n        // provided &#39;com.mod-buildcraft:buildcraft:6.0.8:dev&#39;\r\n    \r\n        // These dependencies get remapped to your current MCP mappings\r\n        // deobf &#39;com.mod-buildcraft:buildcraft:6.0.8:dev&#39;\r\n    \r\n        // For more info...\r\n        // http://www.gradle.org/docs/current/userguide/artifact_dependencies_tutorial.html\r\n        // http://www.gradle.org/docs/current/userguide/dependency_management.html\r\n    \r\n    }\r\n    \r\n    // Example for how to get properties into the manifest for reading by the runtime..\r\n    jar {\r\n        manifest {\r\n            attributes([\r\n                &quot;Specification-Title&quot;: &quot;examplemod&quot;,\r\n                &quot;Specification-Vendor&quot;: &quot;examplemodsareus&quot;,\r\n                &quot;Specification-Version&quot;: &quot;1&quot;, // We are version 1 of ourselves\r\n                &quot;Implementation-Title&quot;: project.name,\r\n                &quot;Implementation-Version&quot;: &quot;${version}&quot;,\r\n                &quot;Implementation-Vendor&quot; :&quot;examplemodsareus&quot;,\r\n                &quot;Implementation-Timestamp&quot;: new Date().format(&quot;yyyy-MM-dd&#39;T&#39;HH:mm:ssZ&quot;)\r\n            ])\r\n        }\r\n    }\r\n    \r\n    // Example configuration to allow publishing using the maven-publish task\r\n    // we define a custom artifact that is sourced from the reobfJar output task\r\n    // and then declare that to be published\r\n    // Note you&#39;ll need to add a repository here\r\n    def reobfFile = file(&quot;$buildDir/reobfJar/output.jar&quot;)\r\n    def reobfArtifact = artifacts.add(&#39;default&#39;, reobfFile) {\r\n        type &#39;jar&#39;\r\n        builtBy &#39;reobfJar&#39;\r\n    }\r\n    publishing {\r\n        publications {\r\n            mavenJava(MavenPublication) {\r\n                artifact reobfArtifact\r\n            }\r\n        }\r\n        repositories {\r\n            maven {\r\n                url &quot;file:///${project.projectDir}/mcmodsrepo&quot;\r\n            }\r\n        }\r\n    }","title":"Error on setting up workspace for Minecraft modding","body":"<p>I am trying to set up the workspace for creating mods for Minecraft. I installed JRE, installed JDK 8. I installed eclipse. I downloaded the latest mdk file of minecraft forge. I setup the environment variables for JDK. I extracted the forge zip file. I opened powershell in the extracted forge folder. I ran the command <code>.\\gradlew setupDecompWorkspace</code>. I am getting the following error:</p>\n\n<pre><code>&gt; FAILURE: Build failed with an exception.\n&gt; \n&gt; * What went wrong: A problem occurred configuring root project 'First Mod'.\n&gt; &gt; Could not resolve all files for configuration ':_compileJava_1'.\n&gt;    &gt; Could not resolve com.mojang:patchy:1.1.\n&gt;      Required by:\n&gt;          project : &gt; net.minecraft:client:1.15.1\n&gt;       &gt; Skipped due to earlier error\n&gt;    &gt; Could not resolve oshi-project:oshi-core:1.1.\n&gt;      Required by:\n&gt;          project : &gt; net.minecraft:client:1.15.1\n&gt;       &gt; Skipped due to earlier error\n&gt;    &gt; Could not resolve com.ibm.icu:icu4j-core-mojang:51.2.\n&gt;      Required by:\n&gt;          project : &gt; net.minecraft:client:1.15.1\n&gt;       &gt; Skipped due to earlier error\n&gt;    &gt; Could not resolve com.mojang:javabridge:1.0.22.\n&gt;      Required by:\n&gt;          project : &gt; net.minecraft:client:1.15.1\n&gt;       &gt; Skipped due to earlier error\n&gt;    &gt; Could not resolve com.mojang:brigadier:1.0.17.\n&gt;      Required by:\n&gt;          project : &gt; net.minecraft:client:1.15.1\n&gt;       &gt; Skipped due to earlier error\n&gt;    &gt; Could not resolve com.mojang:datafixerupper:2.0.24.\n&gt;      Required by:\n&gt;          project : &gt; net.minecraft:client:1.15.1\n&gt;       &gt; Skipped due to earlier error\n&gt;    &gt; Could not resolve com.mojang:authlib:1.5.25.\n&gt;      Required by:\n&gt;          project : &gt; net.minecraft:client:1.15.1\n&gt;       &gt; Skipped due to earlier error\n&gt;    &gt; Could not resolve com.mojang:text2speech:1.11.3.\n&gt;      Required by:\n&gt;          project : &gt; net.minecraft:client:1.15.1\n&gt;       &gt; Skipped due to earlier error\n&gt; \n&gt; * Try: Run with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output. Run with --scan to get full insights.\n&gt; \n&gt; * Get more help at https://help.gradle.org\n&gt; \n&gt; Deprecated Gradle features were used in this build, making it\n&gt; incompatible with Gradle 5.0. Use '--warning-mode all' to show the\n&gt; individual deprecation warnings. See\n&gt; https://docs.gradle.org/4.9/userguide/command_line_interface.html#sec:command_line_warnings\n</code></pre>\n\n<p>How do I fix this error? I even tried the other command that I found online. \".\\gradlew genEclipseRuns` this gives the following error:</p>\n\n<pre><code>FAILURE: Build failed with an exception.\n\n* What went wrong:\nA problem occurred configuring root project 'First Mod'.\n&gt; Could not resolve all files for configuration ':_compileJava_1'.\n   &gt; Could not resolve com.mojang:patchy:1.1.\n     Required by:\n         project : &gt; net.minecraft:client:1.15.1\n      &gt; Skipped due to earlier error\n   &gt; Could not resolve oshi-project:oshi-core:1.1.\n     Required by:\n         project : &gt; net.minecraft:client:1.15.1\n      &gt; Skipped due to earlier error\n   &gt; Could not resolve com.ibm.icu:icu4j-core-mojang:51.2.\n     Required by:\n         project : &gt; net.minecraft:client:1.15.1\n      &gt; Skipped due to earlier error\n   &gt; Could not resolve com.mojang:javabridge:1.0.22.\n     Required by:\n         project : &gt; net.minecraft:client:1.15.1\n      &gt; Skipped due to earlier error\n   &gt; Could not resolve com.mojang:brigadier:1.0.17.\n     Required by:\n         project : &gt; net.minecraft:client:1.15.1\n      &gt; Skipped due to earlier error\n   &gt; Could not resolve com.mojang:datafixerupper:2.0.24.\n     Required by:\n         project : &gt; net.minecraft:client:1.15.1\n      &gt; Skipped due to earlier error\n   &gt; Could not resolve com.mojang:authlib:1.5.25.\n     Required by:\n         project : &gt; net.minecraft:client:1.15.1\n      &gt; Skipped due to earlier error\n   &gt; Could not resolve com.mojang:text2speech:1.11.3.\n     Required by:\n         project : &gt; net.minecraft:client:1.15.1\n      &gt; Skipped due to earlier error\n\n* Try:\nRun with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output. Run with --scan to get full insights.\n\n* Get more help at https://help.gradle.org\n\nDeprecated Gradle features were used in this build, making it incompatible with Gradle 5.0.\nUse '--warning-mode all' to show the individual deprecation warnings.\nSee https://docs.gradle.org/4.9/userguide/command_line_interface.html#sec:command_line_warnings\n\nBUILD FAILED in 44s\n</code></pre>\n\n<p>This is the gradle.build file present in the minecraft forge folder:</p>\n\n<pre><code>buildscript {\n    repositories {\n        maven { url = 'https://files.minecraftforge.net/maven' }\n        jcenter()\n        mavenCentral()\n    }\n    dependencies {\n        classpath group: 'net.minecraftforge.gradle', name: 'ForgeGradle', version: '3.+', changing: true\n    }\n}\napply plugin: 'net.minecraftforge.gradle'\n// Only edit below this line, the above code adds and enables the necessary things for Forge to be setup.\napply plugin: 'eclipse'\napply plugin: 'maven-publish'\n\nversion = '1.0'\ngroup = 'com.yourname.modid' // http://maven.apache.org/guides/mini/guide-naming-conventions.html\narchivesBaseName = 'modid'\n\nsourceCompatibility = targetCompatibility = compileJava.sourceCompatibility = compileJava.targetCompatibility = '1.8' // Need this here so eclipse task generates correctly.\n\nminecraft {\n    // The mappings can be changed at any time, and must be in the following format.\n    // snapshot_YYYYMMDD   Snapshot are built nightly.\n    // stable_#            Stables are built at the discretion of the MCP team.\n    // Use non-default mappings at your own risk. they may not always work.\n    // Simply re-run your setup task after changing the mappings to update your workspace.\n    mappings channel: 'snapshot', version: '20190719-1.14.3'\n    // makeObfSourceJar = false // an Srg named sources jar is made by default. uncomment this to disable.\n\n    // accessTransformer = file('src/main/resources/META-INF/accesstransformer.cfg')\n\n    // Default run configurations.\n    // These can be tweaked, removed, or duplicated as needed.\n    runs {\n        client {\n            workingDirectory project.file('run')\n\n            // Recommended logging data for a userdev environment\n            property 'forge.logging.markers', 'SCAN,REGISTRIES,REGISTRYDUMP'\n\n            // Recommended logging level for the console\n            property 'forge.logging.console.level', 'debug'\n\n            mods {\n                examplemod {\n                    source sourceSets.main\n                }\n            }\n        }\n\n        server {\n            workingDirectory project.file('run')\n\n            // Recommended logging data for a userdev environment\n            property 'forge.logging.markers', 'SCAN,REGISTRIES,REGISTRYDUMP'\n\n            // Recommended logging level for the console\n            property 'forge.logging.console.level', 'debug'\n\n            mods {\n                examplemod {\n                    source sourceSets.main\n                }\n            }\n        }\n\n        data {\n            workingDirectory project.file('run')\n\n            // Recommended logging data for a userdev environment\n            property 'forge.logging.markers', 'SCAN,REGISTRIES,REGISTRYDUMP'\n\n            // Recommended logging level for the console\n            property 'forge.logging.console.level', 'debug'\n\n            args '--mod', 'examplemod', '--all', '--output', file('src/generated/resources/')\n\n            mods {\n                examplemod {\n                    source sourceSets.main\n                }\n            }\n        }\n    }\n}\n\ndependencies {\n    // Specify the version of Minecraft to use, If this is any group other then 'net.minecraft' it is assumed\n    // that the dep is a ForgeGradle 'patcher' dependency. And it's patches will be applied.\n    // The userdev artifact is a special name and will get all sorts of transformations applied to it.\n    minecraft 'net.minecraftforge:forge:1.15.1-30.0.26'\n\n    // You may put jars on which you depend on in ./libs or you may define them like so..\n    // compile \"some.group:artifact:version:classifier\"\n    // compile \"some.group:artifact:version\"\n\n    // Real examples\n    // compile 'com.mod-buildcraft:buildcraft:6.0.8:dev'  // adds buildcraft to the dev env\n    // compile 'com.googlecode.efficient-java-matrix-library:ejml:0.24' // adds ejml to the dev env\n\n    // The 'provided' configuration is for optional dependencies that exist at compile-time but might not at runtime.\n    // provided 'com.mod-buildcraft:buildcraft:6.0.8:dev'\n\n    // These dependencies get remapped to your current MCP mappings\n    // deobf 'com.mod-buildcraft:buildcraft:6.0.8:dev'\n\n    // For more info...\n    // http://www.gradle.org/docs/current/userguide/artifact_dependencies_tutorial.html\n    // http://www.gradle.org/docs/current/userguide/dependency_management.html\n\n}\n\n// Example for how to get properties into the manifest for reading by the runtime..\njar {\n    manifest {\n        attributes([\n            \"Specification-Title\": \"examplemod\",\n            \"Specification-Vendor\": \"examplemodsareus\",\n            \"Specification-Version\": \"1\", // We are version 1 of ourselves\n            \"Implementation-Title\": project.name,\n            \"Implementation-Version\": \"${version}\",\n            \"Implementation-Vendor\" :\"examplemodsareus\",\n            \"Implementation-Timestamp\": new Date().format(\"yyyy-MM-dd'T'HH:mm:ssZ\")\n        ])\n    }\n}\n\n// Example configuration to allow publishing using the maven-publish task\n// we define a custom artifact that is sourced from the reobfJar output task\n// and then declare that to be published\n// Note you'll need to add a repository here\ndef reobfFile = file(\"$buildDir/reobfJar/output.jar\")\ndef reobfArtifact = artifacts.add('default', reobfFile) {\n    type 'jar'\n    builtBy 'reobfJar'\n}\npublishing {\n    publications {\n        mavenJava(MavenPublication) {\n            artifact reobfArtifact\n        }\n    }\n    repositories {\n        maven {\n            url \"file:///${project.projectDir}/mcmodsrepo\"\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","spring","localization","internationalization"],"comments":[{"owner":{"account_id":5757383,"reputation":13785,"user_id":4544823,"display_name":"Ken Bekov"},"score":0,"creation_date":1459045365,"post_id":36238853,"comment_id":60116655,"body_markdown":"Is it for russian letters from message source only? Can you see russian letters in pages?","body":"Is it for russian letters from message source only? Can you see russian letters in pages?"},{"owner":{"account_id":6539693,"reputation":1278,"user_id":5057758,"accept_rate":50,"display_name":"Kadzhaev Marat"},"score":0,"creation_date":1459052324,"post_id":36238853,"comment_id":60117745,"body_markdown":"@KenBekov yes, only for letters from message source. Yes, I can","body":"@KenBekov yes, only for letters from message source. Yes, I can"},{"owner":{"account_id":5757383,"reputation":13785,"user_id":4544823,"display_name":"Ken Bekov"},"score":0,"creation_date":1459054257,"post_id":36238853,"comment_id":60118047,"body_markdown":"It is possible you saved messages file in wrong encoding. Check file that contains russian messages saved in utf-8 encoding.","body":"It is possible you saved messages file in wrong encoding. Check file that contains russian messages saved in utf-8 encoding."}],"answers":[{"tags":[],"owner":{"account_id":4401188,"reputation":4398,"user_id":3586851,"accept_rate":50,"display_name":"Heri"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1459017527,"creation_date":1459017527,"answer_id":36239265,"question_id":36238853,"body_markdown":"Just a guess: in &quot;addInterceptor&quot; you are constructing the LocaleChangeInterceptor manually yourself. If this class depends on other spring beans (like MessageSource) then these are not injected. Find a way to let spring instantiate the LocaleChangeInterceptor (e.g. by using one of the various getBean() of the application context).","title":"Spring i18n question marks instead of text","body":"<p>Just a guess: in \"addInterceptor\" you are constructing the LocaleChangeInterceptor manually yourself. If this class depends on other spring beans (like MessageSource) then these are not injected. Find a way to let spring instantiate the LocaleChangeInterceptor (e.g. by using one of the various getBean() of the application context).</p>\n"},{"tags":[],"owner":{"account_id":15221962,"reputation":542,"user_id":10983605,"display_name":"Stanislau Listratsenka"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1654104565,"creation_date":1654104565,"answer_id":72465901,"question_id":36238853,"body_markdown":"Your files encoding is wrong. You should set it to `UTF-8`. If you use Intellij IDEA you can find it in the right bottom corner. If this option is disabled go to `Settings -&gt; Editor -&gt; File Encodings` and change the `Default encoding for properties files` parameter","title":"Spring i18n question marks instead of text","body":"<p>Your files encoding is wrong. You should set it to <code>UTF-8</code>. If you use Intellij IDEA you can find it in the right bottom corner. If this option is disabled go to <code>Settings -&gt; Editor -&gt; File Encodings</code> and change the <code>Default encoding for properties files</code> parameter</p>\n"}],"owner":{"account_id":6539693,"reputation":1278,"user_id":5057758,"accept_rate":50,"display_name":"Kadzhaev Marat"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1657,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":2,"score":5,"last_activity_date":1654104565,"creation_date":1459015374,"question_id":36238853,"body_markdown":"I hava i18n, but experience problems with russian letters. I have question marks `?????` instead of text. Configuration:\r\n\r\n    @Bean\r\n    public LocaleResolver localeResolver(){\r\n        CookieLocaleResolver resolver = new CookieLocaleResolver();\r\n        resolver.setDefaultLocale(new Locale(&quot;ru&quot;));\r\n        resolver.setCookieName(&quot;locale&quot;);\r\n        resolver.setCookieMaxAge(60 * 60 * 24 * 365 * 10);\r\n        return resolver;\r\n    }\r\n\r\n    @Bean\r\n    public LocaleChangeInterceptor localeChangeInterceptor() {\r\n        LocaleChangeInterceptor changeInterceptor = new LocaleChangeInterceptor();\r\n        changeInterceptor.setParamName(&quot;lang&quot;);\r\n        return changeInterceptor;\r\n    }\r\n\r\n    @Bean\r\n    public MessageSource messageSource() {\r\n        ReloadableResourceBundleMessageSource messageSource = new ReloadableResourceBundleMessageSource();\r\n        messageSource.setBasename(&quot;classpath:/i18n/messages&quot;);\r\n        messageSource.setDefaultEncoding(&quot;UTF-8&quot;);\r\n        return messageSource;\r\n    }\r\n\r\n    @Override\r\n    public void addInterceptors(InterceptorRegistry registry) {\r\n        registry.addInterceptor(localeChangeInterceptor());\r\n    }\r\n\r\nAlso I am using Thymeleaf.\r\n\r\n    &lt;h1 th:text=&quot;#{message}&quot;&gt;&lt;/h1&gt;\r\n","title":"Spring i18n question marks instead of text","body":"<p>I hava i18n, but experience problems with russian letters. I have question marks <code>?????</code> instead of text. Configuration:</p>\n\n<pre><code>@Bean\npublic LocaleResolver localeResolver(){\n    CookieLocaleResolver resolver = new CookieLocaleResolver();\n    resolver.setDefaultLocale(new Locale(\"ru\"));\n    resolver.setCookieName(\"locale\");\n    resolver.setCookieMaxAge(60 * 60 * 24 * 365 * 10);\n    return resolver;\n}\n\n@Bean\npublic LocaleChangeInterceptor localeChangeInterceptor() {\n    LocaleChangeInterceptor changeInterceptor = new LocaleChangeInterceptor();\n    changeInterceptor.setParamName(\"lang\");\n    return changeInterceptor;\n}\n\n@Bean\npublic MessageSource messageSource() {\n    ReloadableResourceBundleMessageSource messageSource = new ReloadableResourceBundleMessageSource();\n    messageSource.setBasename(\"classpath:/i18n/messages\");\n    messageSource.setDefaultEncoding(\"UTF-8\");\n    return messageSource;\n}\n\n@Override\npublic void addInterceptors(InterceptorRegistry registry) {\n    registry.addInterceptor(localeChangeInterceptor());\n}\n</code></pre>\n\n<p>Also I am using Thymeleaf.</p>\n\n<pre><code>&lt;h1 th:text=\"#{message}\"&gt;&lt;/h1&gt;\n</code></pre>\n"},{"tags":["java","android","android-camera2","effect"],"answers":[{"tags":[],"owner":{"account_id":1420007,"reputation":17492,"user_id":1344825,"display_name":"Eddy Talvala"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1654104449,"creation_date":1654104449,"answer_id":72465881,"question_id":72434802,"body_markdown":"`characteristics.get(CameraCharacteristics.CONTROL_AVAILABLE_EFFECTS)` tells you which effects are supported by that camera, not which effect is currently applied.\r\n\r\nYou&#39;ll need to look if the effect you want to apply is actually listed in `CONTROL_AVAILABLE_EFFECTS`.  If it&#39;s not, then it&#39;s not supported by the device.","title":"Camera2 Effects is not applied to neither the preview nor the photo","body":"<p><code>characteristics.get(CameraCharacteristics.CONTROL_AVAILABLE_EFFECTS)</code> tells you which effects are supported by that camera, not which effect is currently applied.</p>\n<p>You'll need to look if the effect you want to apply is actually listed in <code>CONTROL_AVAILABLE_EFFECTS</code>.  If it's not, then it's not supported by the device.</p>\n"}],"owner":{"account_id":21016068,"reputation":84,"user_id":15443504,"display_name":"Talha &#199;"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1654104449,"creation_date":1653915818,"question_id":72434802,"body_markdown":"When I try to apply the camera effect in my camera application that uses the camera2 api, where I can adjust the camera settings such as awb, brightness in runtime successfully, there is no change in the neither preview nor captured picture. However when I look to see if the effect has been applied to the camera by checking `characteristics.get(CameraCharacteristics.CONTROL_AVAILABLE_EFFECTS)` I see it applied. I am using a device with Android 10 operating system.\r\n\r\nThe setEffect function:\r\n```\r\npublic void setCameraEffect(int cameraEffect){\r\n        try{\r\n            mCameraCaptureSession.stopRepeating();\r\n            previewRequestBuilder.set(CaptureRequest.CONTROL_EFFECT_MODE, cameraEffect);\r\n            CaptureRequest previewRequest = previewRequestBuilder.build();\r\n            mCameraCaptureSession.setRepeatingRequest(previewRequest, mCaptureCallback, mHandler);\r\n        } catch (Exception e){\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n```\r\n\r\n How can I solve this problem?\r\n","title":"Camera2 Effects is not applied to neither the preview nor the photo","body":"<p>When I try to apply the camera effect in my camera application that uses the camera2 api, where I can adjust the camera settings such as awb, brightness in runtime successfully, there is no change in the neither preview nor captured picture. However when I look to see if the effect has been applied to the camera by checking <code>characteristics.get(CameraCharacteristics.CONTROL_AVAILABLE_EFFECTS)</code> I see it applied. I am using a device with Android 10 operating system.</p>\n<p>The setEffect function:</p>\n<pre><code>public void setCameraEffect(int cameraEffect){\n        try{\n            mCameraCaptureSession.stopRepeating();\n            previewRequestBuilder.set(CaptureRequest.CONTROL_EFFECT_MODE, cameraEffect);\n            CaptureRequest previewRequest = previewRequestBuilder.build();\n            mCameraCaptureSession.setRepeatingRequest(previewRequest, mCaptureCallback, mHandler);\n        } catch (Exception e){\n            e.printStackTrace();\n        }\n    }\n\n</code></pre>\n<p>How can I solve this problem?</p>\n"},{"tags":["java","eclipse","ubuntu","wizard"],"comments":[{"owner":{"account_id":23804,"reputation":28036,"user_id":59947,"accept_rate":92,"display_name":"Yevgeny Simkin"},"score":0,"creation_date":1339677570,"post_id":11033201,"comment_id":14427239,"body_markdown":"I suspect you downloaded the wrong instance of eclipse. They have a bunch of flavors, not all are for java. What version did you download?","body":"I suspect you downloaded the wrong instance of eclipse. They have a bunch of flavors, not all are for java. What version did you download?"},{"owner":{"account_id":1212553,"reputation":201,"user_id":1180835,"display_name":"Daniel Graef"},"score":0,"creation_date":1339677820,"post_id":11033201,"comment_id":14427324,"body_markdown":"Like I say I just used apt-get, so I presume it picked the right version? I have 32-bit ubuntu 12.04 on my machine and the eclipse version is: 3.7.2","body":"Like I say I just used apt-get, so I presume it picked the right version? I have 32-bit ubuntu 12.04 on my machine and the eclipse version is: 3.7.2"},{"owner":{"account_id":352680,"reputation":3179,"user_id":689893,"accept_rate":88,"display_name":"Joost"},"score":1,"creation_date":1339677891,"post_id":11033201,"comment_id":14427353,"body_markdown":"Can you check the output of `dpkg --get-selections | grep eclipse` to make sure the `eclipse-jdt` is correctly installed?","body":"Can you check the output of <code>dpkg --get-selections | grep eclipse</code> to make sure the <code>eclipse-jdt</code> is correctly installed?"}],"answers":[{"tags":[],"owner":{"account_id":405051,"reputation":4512,"user_id":773718,"accept_rate":43,"display_name":"MSaudi"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1339678033,"creation_date":1339678033,"answer_id":11033353,"question_id":11033201,"body_markdown":"Make sure that the JDK is installed. `sudo apt-get install openjdk-7-jdk`\r\n\r\nalso make sure that the installer is up to date : `sudo apt-get update` , `sudo apt-get upgrade`\r\n\r\n\r\nYou have another option. Try downloading eclipse from the Eclipse website www.eclipse.org\r\n\r\ndownload the appropriate version for your machine and try running it from the command line directly yourDownloadPath/eclipse\r\n\r\n* Don&#39;t forget to add the executable permission(chmod +x) if necessary\r\n\r\nGood luck.","title":"No java project option in eclipse","body":"<p>Make sure that the JDK is installed. <code>sudo apt-get install openjdk-7-jdk</code></p>\n\n<p>also make sure that the installer is up to date : <code>sudo apt-get update</code> , <code>sudo apt-get upgrade</code></p>\n\n<p>You have another option. Try downloading eclipse from the Eclipse website www.eclipse.org</p>\n\n<p>download the appropriate version for your machine and try running it from the command line directly yourDownloadPath/eclipse</p>\n\n<ul>\n<li>Don't forget to add the executable permission(chmod +x) if necessary</li>\n</ul>\n\n<p>Good luck.</p>\n"},{"tags":[],"owner":{"account_id":1626017,"reputation":41,"user_id":1501564,"display_name":"persteffen"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1341404844,"creation_date":1341404844,"answer_id":11329108,"question_id":11033201,"body_markdown":"I had the same issue and was able to resolve it in deleting the entire ~/.eclipse directory along with everything in the workspace of eclipse. When I started eclipse after this, it was again possible to add java projects. ","title":"No java project option in eclipse","body":"<p>I had the same issue and was able to resolve it in deleting the entire ~/.eclipse directory along with everything in the workspace of eclipse. When I started eclipse after this, it was again possible to add java projects. </p>\n"},{"tags":[],"owner":{"account_id":1395163,"reputation":1318,"user_id":1325081,"accept_rate":75,"display_name":"Steve Beer"},"down_vote_count":2,"up_vote_count":4,"is_accepted":false,"score":2,"last_activity_date":1344843560,"creation_date":1344843560,"answer_id":11930002,"question_id":11033201,"body_markdown":"I had the same problem and found out it was because I had installed another version of eclipse which I had downloaded manually. I simply removed the package again (&quot;sudo apt-get remove eclipse&quot;) and deleted everything concerning eclipse:\r\n\r\n - ~/.eclipse\r\n - ~/workspace\r\n - everything that showed up on &quot;whereis eclipse&quot;\r\n\r\nand then reinstalled it using &quot;sudo apt-get install eclipse&quot;. Worked fine for me.","title":"No java project option in eclipse","body":"<p>I had the same problem and found out it was because I had installed another version of eclipse which I had downloaded manually. I simply removed the package again (\"sudo apt-get remove eclipse\") and deleted everything concerning eclipse:</p>\n\n<ul>\n<li>~/.eclipse</li>\n<li>~/workspace</li>\n<li>everything that showed up on \"whereis eclipse\"</li>\n</ul>\n\n<p>and then reinstalled it using \"sudo apt-get install eclipse\". Worked fine for me.</p>\n"},{"tags":[],"owner":{"account_id":1934732,"reputation":4942,"user_id":1745064,"accept_rate":100,"display_name":"thiagowfx"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1357074613,"creation_date":1357074613,"answer_id":14114268,"question_id":11033201,"body_markdown":"I was with the same problem. Try doing that:\r\n\r\n    sudo apt-get update &amp;&amp; sudo apt-get upgrade\r\n    \r\n    sudo apt-get remove eclipse\r\n    sudo apt-get purge eclipse\r\n    rm -r ~/.eclipse\r\n    sudo apt-get install eclipse\r\n\r\nI didn&#39;t need to remove all the locations which showed up on *whereis eclipse*, like Steve Beer said.\r\n\r\nBesides, you can also try doing\r\n\r\n    sudo apt-get install --reinstall eclipse-jdt\r\n\r\nif the previous commands don&#39;t work out.","title":"No java project option in eclipse","body":"<p>I was with the same problem. Try doing that:</p>\n\n<pre><code>sudo apt-get update &amp;&amp; sudo apt-get upgrade\n\nsudo apt-get remove eclipse\nsudo apt-get purge eclipse\nrm -r ~/.eclipse\nsudo apt-get install eclipse\n</code></pre>\n\n<p>I didn't need to remove all the locations which showed up on <em>whereis eclipse</em>, like Steve Beer said.</p>\n\n<p>Besides, you can also try doing</p>\n\n<pre><code>sudo apt-get install --reinstall eclipse-jdt\n</code></pre>\n\n<p>if the previous commands don't work out.</p>\n"},{"tags":[],"owner":{"account_id":2863202,"reputation":349,"user_id":2458001,"display_name":"Jade"},"down_vote_count":1,"up_vote_count":35,"is_accepted":false,"score":34,"last_activity_date":1370486740,"creation_date":1370486740,"answer_id":16952934,"question_id":11033201,"body_markdown":"Window &gt; Open Perspective &gt; Java\r\n\r\nI feel like an idiot for how long it took me to figure this out.  It&#39;s not very intuitive now, is it?  &gt;.&lt;","title":"No java project option in eclipse","body":"<p>Window > Open Perspective > Java</p>\n\n<p>I feel like an idiot for how long it took me to figure this out.  It's not very intuitive now, is it?  >.&lt;</p>\n"},{"tags":[],"owner":{"account_id":5527479,"reputation":13,"user_id":4388558,"display_name":"leuza"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1424853166,"creation_date":1424853166,"answer_id":28714424,"question_id":11033201,"body_markdown":"Same as @thiagowfx answered, just need to add * in last commant\r\n\r\n    sudo apt-get remove eclipse*\r\n    sudo apt-get purge eclipse*\r\n    rm -r ~/.eclipse*\r\n    rm -r workspace*\r\n\r\nThen install the eclipse\r\n\r\n    sudo apt-get install eclipse","title":"No java project option in eclipse","body":"<p>Same as @thiagowfx answered, just need to add * in last commant</p>\n\n<pre><code>sudo apt-get remove eclipse*\nsudo apt-get purge eclipse*\nrm -r ~/.eclipse*\nrm -r workspace*\n</code></pre>\n\n<p>Then install the eclipse</p>\n\n<pre><code>sudo apt-get install eclipse\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11161397,"reputation":15,"user_id":8191399,"display_name":"Sara M"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1498006726,"creation_date":1498006726,"answer_id":44665229,"question_id":11033201,"body_markdown":"these both commands completely solved the problem for me:\r\n\r\nsudo apt-get install --reinstall eclipse-jdt\r\n\r\nsudo apt-get update\r\n\r\n","title":"No java project option in eclipse","body":"<p>these both commands completely solved the problem for me:</p>\n\n<p>sudo apt-get install --reinstall eclipse-jdt</p>\n\n<p>sudo apt-get update</p>\n"}],"owner":{"account_id":1212553,"reputation":201,"user_id":1180835,"display_name":"Daniel Graef"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":43111,"favorite_count":0,"down_vote_count":0,"up_vote_count":14,"answer_count":7,"score":14,"last_activity_date":1654104013,"creation_date":1339677480,"question_id":11033201,"body_markdown":"There may well be a very simple answer to this but having googled for an hour, I am resorting to asking here.\r\n\r\nI am simply trying to install eclipse Indigo(3.7.2) on Ubuntu 12.04 and get it to let me make a java application.\r\n\r\nI have used:\r\n\r\n    sudo apt-get install eclipse\r\n\r\nto get eclipse, which also installs the jdt package needed for making java projects.\r\n\r\nHowever, when I navigate to new -&gt; project, I am not given the option of a java project wizard (see screenshot).\r\n\r\n&lt;img src=&quot;http://i.stack.imgur.com/0E3F3.png&quot; alt=&quot;New eclipse project&quot;/&gt;\r\n\r\nAnyone know how to fix this?\r\n\r\nEDIT: Dowloading the .tar.gz myself and unpacking it seems to have worked fine. I&#39;m not sure why apt-get didn&#39;t work.\r\n\r\n","title":"No java project option in eclipse","body":"<p>There may well be a very simple answer to this but having googled for an hour, I am resorting to asking here.</p>\n\n<p>I am simply trying to install eclipse Indigo(3.7.2) on Ubuntu 12.04 and get it to let me make a java application.</p>\n\n<p>I have used:</p>\n\n<pre><code>sudo apt-get install eclipse\n</code></pre>\n\n<p>to get eclipse, which also installs the jdt package needed for making java projects.</p>\n\n<p>However, when I navigate to new -> project, I am not given the option of a java project wizard (see screenshot).</p>\n\n<p><img src=\"https://i.stack.imgur.com/0E3F3.png\" alt=\"New eclipse project\"/></p>\n\n<p>Anyone know how to fix this?</p>\n\n<p>EDIT: Dowloading the .tar.gz myself and unpacking it seems to have worked fine. I'm not sure why apt-get didn't work.</p>\n"},{"tags":["javascript","java","graalvm","graaljs"],"answers":[{"tags":[],"owner":{"account_id":12938746,"reputation":286,"user_id":9355253,"display_name":"Christian Wirth"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1654103867,"creation_date":1654103867,"answer_id":72465778,"question_id":72069844,"body_markdown":"as the documentation states, those are *language launcher options*. You would typically provide them to a launcher like *js*, *node* or similar.\r\n\r\n    $ js --engine.TraceCompilation yourJSFile.js\r\n\r\nAs you seem to start from Java, you can also provide them to the Java process with system properties (by preprending *polyglot* and explicitly providing *true* for boolean options):\r\n\r\n    $ java -Dpolyglot.engine.TraceCompilation=true yourJavaClass\r\n\r\nI don&#39;t believe you can provide those options as late as in the bindings of the language, because they should not affect the language but the overall GraalVM system. (this is also why your *polyglot.js.engine.TraceCompilation* is off; the option has nothing to do with *js*) \r\n\r\nHTH, Christian\r\n","title":"GraalVM JS: How I do pass Truffle options via Bindings (Nashorn compat mode) and Context in a Java application?","body":"<p>as the documentation states, those are <em>language launcher options</em>. You would typically provide them to a launcher like <em>js</em>, <em>node</em> or similar.</p>\n<pre><code>$ js --engine.TraceCompilation yourJSFile.js\n</code></pre>\n<p>As you seem to start from Java, you can also provide them to the Java process with system properties (by preprending <em>polyglot</em> and explicitly providing <em>true</em> for boolean options):</p>\n<pre><code>$ java -Dpolyglot.engine.TraceCompilation=true yourJavaClass\n</code></pre>\n<p>I don't believe you can provide those options as late as in the bindings of the language, because they should not affect the language but the overall GraalVM system. (this is also why your <em>polyglot.js.engine.TraceCompilation</em> is off; the option has nothing to do with <em>js</em>)</p>\n<p>HTH, Christian</p>\n"}],"owner":{"account_id":70109,"reputation":113,"user_id":203633,"display_name":"Lester"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":316,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":72465778,"answer_count":1,"score":2,"last_activity_date":1654103867,"creation_date":1651332923,"question_id":72069844,"body_markdown":"I&#39;m trying to understand performance of my JavaScript running within a Java application but I can&#39;t find a way to pass Truffle options through the Java interfaces like Bindings (when in Nashorn compat mode) and Context.\r\n\r\nSpecifically, I&#39;m trying to turn on compilation info **--engine.TraceCompilation** mentioned in:\r\nhttps://www.graalvm.org/22.1/graalvm-as-a-platform/language-implementation-framework/Options/\r\n\r\nbut all I find are examples like this:\r\n```\r\nScriptEngine js = scriptEngineManager.getEngineByName(&quot;graal.js&quot;);\r\n\r\nBindings bindings = js.getBindings(ScriptContext.ENGINE_SCOPE);\r\n\r\nbindings.put(&quot;polyglot.js.allowHostAccess&quot;, true);\r\nbindings.put(&quot;polyglot.js.nashorn-compat&quot;, true);\r\n\r\n// -------   I want to do something like this: -----------\r\nbindings.put(&quot;polyglot.js.engine.TraceCompilation&quot;, true); // &lt;-- does not work\r\n//--------------------------------------------------------\r\n```\r\n\r\nThis guide mentions the list of options that can be passed this way and none of the Truffle options are listed:\r\nhttps://www.graalvm.org/22.1/reference-manual/js/ScriptEngine/\r\n\r\nNote that for legacy reasons I need to use Nashorn compatibility mode to run the JavaScript code.\r\n\r\n","title":"GraalVM JS: How I do pass Truffle options via Bindings (Nashorn compat mode) and Context in a Java application?","body":"<p>I'm trying to understand performance of my JavaScript running within a Java application but I can't find a way to pass Truffle options through the Java interfaces like Bindings (when in Nashorn compat mode) and Context.</p>\n<p>Specifically, I'm trying to turn on compilation info <strong>--engine.TraceCompilation</strong> mentioned in:\n<a href=\"https://www.graalvm.org/22.1/graalvm-as-a-platform/language-implementation-framework/Options/\" rel=\"nofollow noreferrer\">https://www.graalvm.org/22.1/graalvm-as-a-platform/language-implementation-framework/Options/</a></p>\n<p>but all I find are examples like this:</p>\n<pre><code>ScriptEngine js = scriptEngineManager.getEngineByName(&quot;graal.js&quot;);\n\nBindings bindings = js.getBindings(ScriptContext.ENGINE_SCOPE);\n\nbindings.put(&quot;polyglot.js.allowHostAccess&quot;, true);\nbindings.put(&quot;polyglot.js.nashorn-compat&quot;, true);\n\n// -------   I want to do something like this: -----------\nbindings.put(&quot;polyglot.js.engine.TraceCompilation&quot;, true); // &lt;-- does not work\n//--------------------------------------------------------\n</code></pre>\n<p>This guide mentions the list of options that can be passed this way and none of the Truffle options are listed:\n<a href=\"https://www.graalvm.org/22.1/reference-manual/js/ScriptEngine/\" rel=\"nofollow noreferrer\">https://www.graalvm.org/22.1/reference-manual/js/ScriptEngine/</a></p>\n<p>Note that for legacy reasons I need to use Nashorn compatibility mode to run the JavaScript code.</p>\n"},{"tags":["java","jquery","html","spring-boot","spring-security"],"comments":[{"owner":{"account_id":9765334,"reputation":677,"user_id":7238979,"accept_rate":100,"display_name":"RKR"},"score":0,"creation_date":1485060211,"post_id":41787219,"comment_id":70764447,"body_markdown":"I tried `httpSecurity.authorizeRequests().antMatchers(&quot;/home*&quot;).hasRole(&quot;USER&quot;)\n    .and()\n    .formLogin().loginPage(&quot;login.html&quot;)`.But it returned the same spring login page.","body":"I tried <code>httpSecurity.authorizeRequests().antMatchers(&quot;&#47;home*&quot;).hasRo&zwnj;&#8203;le(&quot;USER&quot;)     .and()     .formLogin().loginPage(&quot;login.html&quot;)</code>.But it returned the same spring login page."},{"owner":{"account_id":9765334,"reputation":677,"user_id":7238979,"accept_rate":100,"display_name":"RKR"},"score":0,"creation_date":1485066687,"post_id":41787219,"comment_id":70765628,"body_markdown":"Change login page to my custom one not the spring security&#39;s default page","body":"Change login page to my custom one not the spring security&#39;s default page"},{"owner":{"account_id":8949179,"reputation":125,"user_id":6675764,"display_name":"JonahCui"},"score":0,"creation_date":1485071526,"post_id":41787219,"comment_id":70766450,"body_markdown":"You must make sure the `url` &quot;/login.html&quot; can be handled right","body":"You must make sure the <code>url</code> &quot;/login.html&quot; can be handled right"}],"answers":[{"tags":[],"owner":{"account_id":2067188,"reputation":2606,"user_id":1842482,"accept_rate":100,"display_name":"chaoluo"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1485071910,"creation_date":1485071416,"answer_id":41788576,"question_id":41787219,"body_markdown":"    httpSecurity.authorizeRequests()\r\n                    .antMatchers(&quot;/home*&quot;).hasRo‌​le(&quot;USER&quot;).and()                                          \r\n                 .formLogin()\r\n                     .loginPage(&quot;/login.html&quot;)\r\n                     .permitAll();\r\n\r\n`loginFormUrl` must be started with &quot;/&quot; or a absolute url. and make sure the request `/login.html` can be handled right. \r\n\r\nBTW: if you didn&#39;t config the processing url, the processing url will be same with `login page`(`/login.html`) url with `post` method, but in your login page, the action url is `/home.html`, please config the processing url to &#39;/home.html&#39;\r\n\r\n    .formLogin()\r\n        .loginProcessingUrl(&quot;/home.html&quot;)\r\n        .loginPage(&quot;/login.html&quot;)\r\n        .permitAll();\r\n\r\nAnd `CSRF` is enabled by default, I can&#39;t find any `CSRF` token in your login form. you can disable csrf or request with token.\r\n\r\n    http.csrf().disable();\r\n\r\n\r\n","title":"How to use Spring Security to custom login page?","body":"<pre><code>httpSecurity.authorizeRequests()\n                .antMatchers(\"/home*\").hasRo‌​le(\"USER\").and()                                          \n             .formLogin()\n                 .loginPage(\"/login.html\")\n                 .permitAll();\n</code></pre>\n\n<p><code>loginFormUrl</code> must be started with \"/\" or a absolute url. and make sure the request <code>/login.html</code> can be handled right. </p>\n\n<p>BTW: if you didn't config the processing url, the processing url will be same with <code>login page</code>(<code>/login.html</code>) url with <code>post</code> method, but in your login page, the action url is <code>/home.html</code>, please config the processing url to '/home.html'</p>\n\n<pre><code>.formLogin()\n    .loginProcessingUrl(\"/home.html\")\n    .loginPage(\"/login.html\")\n    .permitAll();\n</code></pre>\n\n<p>And <code>CSRF</code> is enabled by default, I can't find any <code>CSRF</code> token in your login form. you can disable csrf or request with token.</p>\n\n<pre><code>http.csrf().disable();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6463892,"reputation":15974,"user_id":5277820,"accept_rate":68,"display_name":"dur"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1485081772,"creation_date":1485080972,"answer_id":41789834,"question_id":41787219,"body_markdown":"See [Spring Security Reference](https://docs.spring.io/spring-security/site/docs/current/reference/htmlsingle/#jc-form):\r\n\r\n&gt; While the automatically generated log in page is convenient to get up and running quickly, most applications will want to provide their own log in page. To do so we can update our configuration as seen below:\r\n&gt; \r\n&gt; &lt;!-- language: java --&gt;\r\n&gt;\r\n&gt;     protected void configure(HttpSecurity http) throws Exception {\r\n&gt;     \thttp\r\n&gt;     \t\t.authorizeRequests()\r\n&gt;     \t\t\t.anyRequest().authenticated()\r\n&gt;     \t\t\t.and()\r\n&gt;     \t\t.formLogin()\r\n&gt;     \t\t\t.loginPage(&quot;/login&quot;) 1\r\n&gt;     \t\t\t.permitAll();        2\r\n&gt;     }\r\n&gt;\r\n&gt; **1** The updated configuration specifies the location of the log in page.  \r\n&gt; **2** We must grant all users (i.e. unauthenticated users) access to our log in page. The formLogin().permitAll() method allows granting access to all users for all URLs associated with form based log in.\r\n\r\nYour modified code:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    public void configure(HttpSecurity httpSecurity) throws Exception {\r\n        httpSecurity\r\n            .authorizeRequests()\r\n                .antMatchers(&quot;/home*&quot;).hasRole(&quot;USER&quot;)\r\n                .and()\r\n            .formLogin()\r\n                .loginPage(&quot;/login.html&quot;)\r\n                .permitAll();\r\n    }\r\n","title":"How to use Spring Security to custom login page?","body":"<p>See <a href=\"https://docs.spring.io/spring-security/site/docs/current/reference/htmlsingle/#jc-form\" rel=\"noreferrer\">Spring Security Reference</a>:</p>\n\n<blockquote>\n  <p>While the automatically generated log in page is convenient to get up and running quickly, most applications will want to provide their own log in page. To do so we can update our configuration as seen below:</p>\n  \n  <pre class=\"lang-java prettyprint-override\"><code>protected void configure(HttpSecurity http) throws Exception {\n  http\n      .authorizeRequests()\n          .anyRequest().authenticated()\n          .and()\n      .formLogin()\n          .loginPage(\"/login\") 1\n          .permitAll();        2\n}\n</code></pre>\n  \n  <p><strong>1</strong> The updated configuration specifies the location of the log in page.<br>\n  <strong>2</strong> We must grant all users (i.e. unauthenticated users) access to our log in page. The formLogin().permitAll() method allows granting access to all users for all URLs associated with form based log in.</p>\n</blockquote>\n\n<p>Your modified code:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public void configure(HttpSecurity httpSecurity) throws Exception {\n    httpSecurity\n        .authorizeRequests()\n            .antMatchers(\"/home*\").hasRole(\"USER\")\n            .and()\n        .formLogin()\n            .loginPage(\"/login.html\")\n            .permitAll();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12590926,"reputation":444,"user_id":9157665,"display_name":"LexSav"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1654103660,"creation_date":1547121658,"answer_id":54128237,"question_id":41787219,"body_markdown":"Just want to pinpoint a few moments that were not clarified here.\r\n\r\n1) First of all, `.loginPage(&quot;/login.html&quot;)` won&#39;t do the trick (it didn&#39;t in my case anyway). What is in quotes here is an URL path that will be searched for in your controller. Here is the snippet from my security config file:\r\n\r\n        .formLogin().loginPage(&quot;/login&quot;)\r\n        .loginProcessingUrl(&quot;/authentication&quot;).permitAll();\r\n\r\nHere I wrote `&quot;/login&quot;`. So now in your controller define that the `/login` path should point to your `login.html` page.\r\n\r\n    @GetMapping(&quot;/login&quot;)\r\n    public String login() {\r\n        return &quot;login&quot;;\r\n    }\r\n\r\nOnly then it should redirect to the required view page. I usually place view pages under the `/webapp/WEB-INF/view` folder.&lt;br/&gt; \r\nP.S. I hope you configured your `ViewResolver` bean right, cos otherwise it won&#39;t work :)\r\n\r\n2) And one more thing. I see you wanna use some CSS for the page. To enable CSS and other static resources for your custom login page, you should add this line \r\n\r\n`.antMatchers(&quot;/resources/**&quot;).permitAll()`\r\n\r\nSo, in the end it will be like that (very short and creepy version, but your custom login should work):\r\n\r\n    @Override\r\n    protected void configure(HttpSecurity http) throws Exception {\r\n        http\r\n            .authorizeRequests()\r\n                .antMatchers(&quot;/resources/**&quot;).permitAll()\r\n                .anyRequest().authenticated()\r\n                .and()\r\n\r\n            .formLogin().loginPage(&quot;/login&quot;)\r\n            .loginProcessingUrl(&quot;/authentication&quot;).permitAll();\r\n    }\r\n\r\nFYI, place your resources under `/webapp/resources/`. Also, you should configure your resource handler in your spring configuration file.\r\n\r\nHere is also a nice link to wrap your head around it: [Creating a Custom Login Form: Grant access to remaining resources][1]\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-security/site/docs/5.5.7/guides/form-javaconfig.html#grant-access-to-remaining-resources\r\n","title":"How to use Spring Security to custom login page?","body":"<p>Just want to pinpoint a few moments that were not clarified here.</p>\n<ol>\n<li><p>First of all, <code>.loginPage(&quot;/login.html&quot;)</code> won't do the trick (it didn't in my case anyway). What is in quotes here is an URL path that will be searched for in your controller. Here is the snippet from my security config file:</p>\n<pre><code> .formLogin().loginPage(&quot;/login&quot;)\n .loginProcessingUrl(&quot;/authentication&quot;).permitAll();\n</code></pre>\n</li>\n</ol>\n<p>Here I wrote <code>&quot;/login&quot;</code>. So now in your controller define that the <code>/login</code> path should point to your <code>login.html</code> page.</p>\n<pre><code>@GetMapping(&quot;/login&quot;)\npublic String login() {\n    return &quot;login&quot;;\n}\n</code></pre>\n<p>Only then it should redirect to the required view page. I usually place view pages under the <code>/webapp/WEB-INF/view</code> folder.<br/>\nP.S. I hope you configured your <code>ViewResolver</code> bean right, cos otherwise it won't work :)</p>\n<ol start=\"2\">\n<li>And one more thing. I see you wanna use some CSS for the page. To enable CSS and other static resources for your custom login page, you should add this line</li>\n</ol>\n<p><code>.antMatchers(&quot;/resources/**&quot;).permitAll()</code></p>\n<p>So, in the end it will be like that (very short and creepy version, but your custom login should work):</p>\n<pre><code>@Override\nprotected void configure(HttpSecurity http) throws Exception {\n    http\n        .authorizeRequests()\n            .antMatchers(&quot;/resources/**&quot;).permitAll()\n            .anyRequest().authenticated()\n            .and()\n\n        .formLogin().loginPage(&quot;/login&quot;)\n        .loginProcessingUrl(&quot;/authentication&quot;).permitAll();\n}\n</code></pre>\n<p>FYI, place your resources under <code>/webapp/resources/</code>. Also, you should configure your resource handler in your spring configuration file.</p>\n<p>Here is also a nice link to wrap your head around it: <a href=\"https://docs.spring.io/spring-security/site/docs/5.5.7/guides/form-javaconfig.html#grant-access-to-remaining-resources\" rel=\"nofollow noreferrer\">Creating a Custom Login Form: Grant access to remaining resources</a></p>\n"}],"owner":{"account_id":9765334,"reputation":677,"user_id":7238979,"accept_rate":100,"display_name":"RKR"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":33589,"favorite_count":0,"down_vote_count":1,"up_vote_count":9,"accepted_answer_id":41789834,"answer_count":3,"score":8,"last_activity_date":1654103660,"creation_date":1485057849,"question_id":41787219,"body_markdown":"I am using Spring Security to my application and here is the security part which authenticates the user but the login page is given by Spring Security:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    @EnableWebSecurity\r\n    public class SecurityConfig extends WebSecurityConfigurerAdapter {\r\n        public void configure(HttpSecurity httpSecurity) throws Exception {\r\n        \thttpSecurity\r\n                .authorizeRequests()\r\n                    .antMatchers(&quot;/home*&quot;).hasRole(&quot;USER&quot;)\r\n    \t            .and()\r\n    \t        .formLogin();\r\n    \r\n        @Autowired\r\n        public void configureGlobal(AuthenticationManagerBuilder auth) throws Exception {\r\n    \t    auth\r\n    \t\t    .inMemoryAuthentication()\r\n    \t\t\t     .withUser(&quot;user&quot;)\r\n                     .password(&quot;password&quot;)\r\n                     .roles(&quot;USER&quot;)\r\n        }\r\n    }\r\n\r\nInstead of Spring&#39;s login page I want to use my login page which is below:\r\n\r\n`login.html`:\r\n\r\n&lt;!-- language: html --&gt;\r\n\r\n    &lt;html lang=&#39;en&#39;&gt;\r\n        &lt;head&gt;\r\n            &lt;title&gt;WebApp&lt;/title&gt;\r\n            &lt;meta charset=&#39;utf-8&#39; /&gt;\r\n    \r\n            &lt;script src=&quot;https://code.jquery.com/jquery-1.11.3.min.js&quot;&gt;&lt;/script&gt;\r\n                 &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;css/bootstrap.css&quot; /&gt;\r\n                 &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css&quot; /&gt;\r\n                 &lt;link rel=&quot;stylesheet&quot; href=&quot;css/login.css&quot; /&gt;  \r\n        &lt;/head&gt;\r\n    \r\n        &lt;body&gt;\r\n            &lt;div class=&quot;login-page&quot;&gt;\r\n                &lt;img src=&#39;img/taxi_.jpg&#39; style=&#39;width: 180px; margin-left: auto; margin-right: auto; display: block; padding-top: 20px; padding-bottom:20px;&#39; /&gt;\r\n                \r\n                &lt;div class=&quot;heading&quot;&gt;\r\n                    &lt;center&gt;Dashboard&lt;/center&gt;\r\n                &lt;/div&gt;\r\n                &lt;div class=&quot;form&quot;&gt;\r\n                    &lt;form action =&quot;home.html&quot; class=&quot;register-form&quot;&gt;\r\n                        &lt;input type=&quot;text&quot; placeholder=&quot;name&quot;/&gt;\r\n                        &lt;input type=&quot;password&quot; placeholder=&quot;password&quot;/&gt;\r\n                        &lt;input type=&quot;text&quot; placeholder=&quot;email address&quot;/&gt;\r\n                        &lt;button&gt;create&lt;/button&gt;\r\n                        &lt;p class=&quot;message&quot;&gt;Already registered? &lt;a href=&quot;#&quot;&gt;Sign In&lt;/a&gt;&lt;/p&gt;\r\n                   &lt;/form&gt;\r\n                   &lt;form action=&quot;home.html&quot; class=&quot;login-form&quot;&gt;\r\n                        &lt;input type=&quot;text&quot; placeholder=&quot;username&quot;/&gt;\r\n                        &lt;input type=&quot;password&quot; placeholder=&quot;password&quot;/&gt;\r\n                        &lt;button id=&quot;button_login&quot;&gt;login&lt;/button&gt;\r\n                        &lt;p class=&quot;message&quot;&gt;Not registered? &lt;a href=&quot;#&quot;&gt;Create an account&lt;/a&gt;&lt;/p&gt;\r\n                   &lt;/form&gt;\r\n                &lt;/div&gt;\r\n            &lt;/div&gt;\r\n        &lt;/body&gt;\r\n    &lt;/html&gt;\r\n\r\nHow can I use my custom login page to be shown instead of Spring Security&#39;s login page?","title":"How to use Spring Security to custom login page?","body":"<p>I am using Spring Security to my application and here is the security part which authenticates the user but the login page is given by Spring Security:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@EnableWebSecurity\npublic class SecurityConfig extends WebSecurityConfigurerAdapter {\n    public void configure(HttpSecurity httpSecurity) throws Exception {\n        httpSecurity\n            .authorizeRequests()\n                .antMatchers(\"/home*\").hasRole(\"USER\")\n                .and()\n            .formLogin();\n\n    @Autowired\n    public void configureGlobal(AuthenticationManagerBuilder auth) throws Exception {\n        auth\n            .inMemoryAuthentication()\n                 .withUser(\"user\")\n                 .password(\"password\")\n                 .roles(\"USER\")\n    }\n}\n</code></pre>\n\n<p>Instead of Spring's login page I want to use my login page which is below:</p>\n\n<p><code>login.html</code>:</p>\n\n<pre><code>&lt;html lang='en'&gt;\n    &lt;head&gt;\n        &lt;title&gt;WebApp&lt;/title&gt;\n        &lt;meta charset='utf-8' /&gt;\n\n        &lt;script src=\"https://code.jquery.com/jquery-1.11.3.min.js\"&gt;&lt;/script&gt;\n             &lt;link rel=\"stylesheet\" type=\"text/css\" href=\"css/bootstrap.css\" /&gt;\n             &lt;link rel=\"stylesheet\" type=\"text/css\" href=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css\" /&gt;\n             &lt;link rel=\"stylesheet\" href=\"css/login.css\" /&gt;  \n    &lt;/head&gt;\n\n    &lt;body&gt;\n        &lt;div class=\"login-page\"&gt;\n            &lt;img src='img/taxi_.jpg' style='width: 180px; margin-left: auto; margin-right: auto; display: block; padding-top: 20px; padding-bottom:20px;' /&gt;\n\n            &lt;div class=\"heading\"&gt;\n                &lt;center&gt;Dashboard&lt;/center&gt;\n            &lt;/div&gt;\n            &lt;div class=\"form\"&gt;\n                &lt;form action =\"home.html\" class=\"register-form\"&gt;\n                    &lt;input type=\"text\" placeholder=\"name\"/&gt;\n                    &lt;input type=\"password\" placeholder=\"password\"/&gt;\n                    &lt;input type=\"text\" placeholder=\"email address\"/&gt;\n                    &lt;button&gt;create&lt;/button&gt;\n                    &lt;p class=\"message\"&gt;Already registered? &lt;a href=\"#\"&gt;Sign In&lt;/a&gt;&lt;/p&gt;\n               &lt;/form&gt;\n               &lt;form action=\"home.html\" class=\"login-form\"&gt;\n                    &lt;input type=\"text\" placeholder=\"username\"/&gt;\n                    &lt;input type=\"password\" placeholder=\"password\"/&gt;\n                    &lt;button id=\"button_login\"&gt;login&lt;/button&gt;\n                    &lt;p class=\"message\"&gt;Not registered? &lt;a href=\"#\"&gt;Create an account&lt;/a&gt;&lt;/p&gt;\n               &lt;/form&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>How can I use my custom login page to be shown instead of Spring Security's login page?</p>\n"},{"tags":["java","sockets"],"answers":[{"tags":[],"owner":{"account_id":934156,"reputation":1171,"user_id":963412,"accept_rate":50,"display_name":"cybye"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1361220102,"creation_date":1361219081,"answer_id":14944692,"question_id":14944528,"body_markdown":"you can use something like [jgroups][1] (allowing discovery based on multicast [lan] etc) or some [peer-to-peer][2] implementatons for that, although the latter require at least some servers for initial discovery. \r\n\r\nin principle that works the way, that the clients send a message out to &quot;the world&quot; using some well known address and wait for someone to answer. each client itself waits meanwhile for such a message and replies it with information how to &quot;connect&quot; to the current client. This can be done via a so called blackboard, where this bb is either a special tcp-address for multicast-messages (the os/tcp sends the message to all clients listening concurrently) or one or more servers (seeds) that take and coordinate the request and the &quot;membership&quot; lists. anyway, there are some tools ;) \r\n\r\n\r\n  [1]: http://jgroups.org\r\n  [2]: http://jxta.kenai.com/","title":"Java Sockets Local Connection Between 2 clients - Design","body":"<p>you can use something like <a href=\"http://jgroups.org\" rel=\"nofollow\">jgroups</a> (allowing discovery based on multicast [lan] etc) or some <a href=\"http://jxta.kenai.com/\" rel=\"nofollow\">peer-to-peer</a> implementatons for that, although the latter require at least some servers for initial discovery. </p>\n\n<p>in principle that works the way, that the clients send a message out to \"the world\" using some well known address and wait for someone to answer. each client itself waits meanwhile for such a message and replies it with information how to \"connect\" to the current client. This can be done via a so called blackboard, where this bb is either a special tcp-address for multicast-messages (the os/tcp sends the message to all clients listening concurrently) or one or more servers (seeds) that take and coordinate the request and the \"membership\" lists. anyway, there are some tools ;) </p>\n"}],"owner":{"account_id":1880243,"reputation":5612,"user_id":1700618,"accept_rate":100,"display_name":"Vineet Kosaraju"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":92,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":14944692,"answer_count":1,"score":0,"last_activity_date":1654103650,"creation_date":1361218426,"question_id":14944528,"body_markdown":"I have an application where the user (client #1) enters a local ip and a port and the application sends a picture to client #2 (who is also using the same application). However for the final application, I do not want the user to enter the local ip because they will not know this information, and I want my program to automatically figure this out. \r\n\r\nMy first idea:\r\nOriginally, I thought that I could scan all the local ip&#39;s for an open port, but this would take way too long.\r\n\r\nMy second idea:\r\nMy next idea was to have the clients send their local hostnames to a remote server which then swaps them and sends them back to the clients.\r\n\r\nHowever, I do not want to run a dedicated server for my second idea.\r\n\r\nBecause this is more of a design question, I am not including any code but I will do so if necessary.\r\n\r\nDo you guys have any ideas on how I should design my application to automatically figure out the local ips?\r\n\r\nI did try to google this but couldn&#39;t figure out a solution, and so I gave up after an hour and just put my question here.","title":"Java Sockets Local Connection Between 2 clients - Design","body":"<p>I have an application where the user (client #1) enters a local ip and a port and the application sends a picture to client #2 (who is also using the same application). However for the final application, I do not want the user to enter the local ip because they will not know this information, and I want my program to automatically figure this out.</p>\n<p>My first idea:\nOriginally, I thought that I could scan all the local ip's for an open port, but this would take way too long.</p>\n<p>My second idea:\nMy next idea was to have the clients send their local hostnames to a remote server which then swaps them and sends them back to the clients.</p>\n<p>However, I do not want to run a dedicated server for my second idea.</p>\n<p>Because this is more of a design question, I am not including any code but I will do so if necessary.</p>\n<p>Do you guys have any ideas on how I should design my application to automatically figure out the local ips?</p>\n<p>I did try to google this but couldn't figure out a solution, and so I gave up after an hour and just put my question here.</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":3212023,"reputation":1016,"user_id":17856705,"display_name":"Computable"},"score":1,"creation_date":1654101616,"post_id":72465183,"comment_id":128013289,"body_markdown":"Looks ok - verify and add your imports to post : `import android.widget.TextView` and `import android.view.View.OnClickListener` .  Or `androidx` equivalents.  (The `setOnClickListener` comes from the `View` parent class which is common to both Button and TextView - actually Button is a subclass of TextView!)","body":"Looks ok - verify and add your imports to post : <code>import android.widget.TextView</code> and <code>import android.view.View.OnClickListener</code> .  Or <code>androidx</code> equivalents.  (The <code>setOnClickListener</code> comes from the <code>View</code> parent class which is common to both Button and TextView - actually Button is a subclass of TextView!)"},{"owner":{"account_id":3212023,"reputation":1016,"user_id":17856705,"display_name":"Computable"},"score":0,"creation_date":1654102005,"post_id":72465183,"comment_id":128013418,"body_markdown":"`Invalidate and restart` is always an option if this really seems like something which should work (which it does).","body":"<code>Invalidate and restart</code> is always an option if this really seems like something which should work (which it does)."},{"owner":{"account_id":22450291,"reputation":364,"user_id":16653700,"display_name":"Alias Cartellano"},"score":0,"creation_date":1654103965,"post_id":72465183,"comment_id":128014059,"body_markdown":"Does this answer your question? [Java Android - setOnClickListener(View.OnClickListener) in the type View is not applicable for the arguments (new OnClickListener(){})](https://stackoverflow.com/questions/16708684/java-android-setonclicklistenerview-onclicklistener-in-the-type-view-is-not)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/16708684/java-android-setonclicklistenerview-onclicklistener-in-the-type-view-is-not\">Java Android - setOnClickListener(View.OnClickListener) in the type View is not applicable for the arguments (new OnClickListener(){})</a>"}],"owner":{"account_id":25448192,"reputation":1,"user_id":19250068,"display_name":"Arbaab Khan"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1654103541,"creation_date":1654100635,"question_id":72465183,"body_markdown":"I am new to android development I am just wondering that like we have onclicklisteners on buttons can we have a onclicklisteners on textviews also? I tried this but it does not work \r\n   \r\n    TextView numbers = (TextView) findViewById(R.id.numbers_textview);\r\n    numbers.setOnClickListener(new OnClickListener() {\r\n        @Override\r\n        public void onClick(View view) {\r\n            // my logic\r\n        }\r\n    });\r\n\r\nThe error I got is:\r\n\r\n&gt; cannot resolve symbol &#39;setOnClickListener&#39;\r\n\r\nIf someone can help it will be really helpful for me thanks in advance.","title":"How can I set onClickListeners on TextViews","body":"<p>I am new to android development I am just wondering that like we have onclicklisteners on buttons can we have a onclicklisteners on textviews also? I tried this but it does not work</p>\n<pre><code>TextView numbers = (TextView) findViewById(R.id.numbers_textview);\nnumbers.setOnClickListener(new OnClickListener() {\n    @Override\n    public void onClick(View view) {\n        // my logic\n    }\n});\n</code></pre>\n<p>The error I got is:</p>\n<blockquote>\n<p>cannot resolve symbol 'setOnClickListener'</p>\n</blockquote>\n<p>If someone can help it will be really helpful for me thanks in advance.</p>\n"},{"tags":["java","arrays"],"comments":[{"owner":{"account_id":9571720,"reputation":6305,"user_id":7109162,"accept_rate":84,"display_name":"XtremeBaumer"},"score":1,"creation_date":1653977979,"post_id":72442961,"comment_id":127975249,"body_markdown":"Array of 3 has index 0, 1, 2.","body":"Array of 3 has index 0, 1, 2."},{"owner":{"account_id":231117,"reputation":8541,"user_id":495157,"accept_rate":40,"display_name":"JGFMK"},"score":0,"creation_date":1653978204,"post_id":72442961,"comment_id":127975311,"body_markdown":"Have you looked at String split? https://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split(java.lang.String) (regex would be \\s{2}) - but you could use regex with (\\d+)\\s{2}(\\d+) as well and use the capture groups  https://regex101.com/","body":"Have you looked at String split? <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split(java.lang.String)\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/7/docs/api/java/lang/&hellip;</a> (regex would be \\s{2}) - but you could use regex with (\\d+)\\s{2}(\\d+) as well and use the capture groups  <a href=\"https://regex101.com/\" rel=\"nofollow noreferrer\">regex101.com</a>"}],"answers":[{"tags":[],"owner":{"account_id":25430203,"reputation":91,"user_id":19234749,"display_name":"Jonathan Taylor"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1653978869,"creation_date":1653978869,"answer_id":72443160,"question_id":72442961,"body_markdown":"I’m not sure if what you showed is an abridged version of your code, but here is how to resolve your problem.\r\n\r\n    Scanner scanner = new Scanner(System.in);\r\n    System.out.print(&quot;Please R and C with two spaces in between: &quot;);\r\n    int R = scanner.nextInt();\r\n    int C = scanner.nextInt();\r\n\r\nIf you absolutely need an array, then do this:\r\n\r\n    Scanner scanner = new Scanner(System.in);\r\n    System.out.println(&quot;Please R and C with two spaces in between:&quot;);\r\n    int[] inputs = {scanner.nextInt(), scanner.nextInt()};\r\n    int R = inputs[0];\r\n    int C = inputs[1];\r\n\r\n\r\nNote: the space is skipped unless you use `nextLine()`","title":"How to fill an array based on users input in a single line","body":"<p>I’m not sure if what you showed is an abridged version of your code, but here is how to resolve your problem.</p>\n<pre><code>Scanner scanner = new Scanner(System.in);\nSystem.out.print(&quot;Please R and C with two spaces in between: &quot;);\nint R = scanner.nextInt();\nint C = scanner.nextInt();\n</code></pre>\n<p>If you absolutely need an array, then do this:</p>\n<pre><code>Scanner scanner = new Scanner(System.in);\nSystem.out.println(&quot;Please R and C with two spaces in between:&quot;);\nint[] inputs = {scanner.nextInt(), scanner.nextInt()};\nint R = inputs[0];\nint C = inputs[1];\n</code></pre>\n<p>Note: the space is skipped unless you use <code>nextLine()</code></p>\n"}],"owner":{"account_id":25213836,"reputation":35,"user_id":19051202,"display_name":"Mojgan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":180,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":72443160,"answer_count":1,"score":0,"last_activity_date":1654102712,"creation_date":1653977589,"question_id":72442961,"body_markdown":"I have an array of 3 and want to fill it with users input at once(not to ask for input twice) \r\n```lang-java\r\nScanner myArray = new Scanner(System.in);\r\nSystem.out.println(&quot;Please R and C with two spaces in between:&quot;);\r\ninputs[i] = myArray.nextInt();\r\nR = (inputs[0]);\r\nC = (inputs[3]);\r\n```\r\n\r\nbut I am receiving error for assigning `C = (inputs[3]);`.  \r\nHow can I fix it?","title":"How to fill an array based on users input in a single line","body":"<p>I have an array of 3 and want to fill it with users input at once(not to ask for input twice)</p>\n<pre class=\"lang-java prettyprint-override\"><code>Scanner myArray = new Scanner(System.in);\nSystem.out.println(&quot;Please R and C with two spaces in between:&quot;);\ninputs[i] = myArray.nextInt();\nR = (inputs[0]);\nC = (inputs[3]);\n</code></pre>\n<p>but I am receiving error for assigning <code>C = (inputs[3]);</code>.<br />\nHow can I fix it?</p>\n"},{"tags":["java","azure-managed-identity"],"answers":[{"tags":[],"owner":{"account_id":15910041,"reputation":592,"user_id":11480221,"display_name":"AddeusExMachina"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1653991338,"creation_date":1653991338,"answer_id":72445826,"question_id":72443466,"body_markdown":"Given the managedIdentityCredential you can create a BlobServiceClient instance using the credential method in BlobServiceClientBuilder:\r\n```java\r\nBlobServiceClient blobServiceClient = new BlobServiceClientBuilder().credential(managedIdentityCredential).buildClient();\r\n```","title":"How to connect to Azure Blob Storage using ManagedIdentityCredential","body":"<p>Given the managedIdentityCredential you can create a BlobServiceClient instance using the credential method in BlobServiceClientBuilder:</p>\n<pre class=\"lang-java prettyprint-override\"><code>BlobServiceClient blobServiceClient = new BlobServiceClientBuilder().credential(managedIdentityCredential).buildClient();\n</code></pre>\n"}],"owner":{"account_id":25191360,"reputation":3,"user_id":19031530,"display_name":"Adam"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1658,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":72445826,"answer_count":1,"score":0,"last_activity_date":1654102707,"creation_date":1653980587,"question_id":72443466,"body_markdown":"Currently I have a simple code to list files on Azure storage container using a connection string:\r\n\r\n```java\r\nString connectStr = &quot;&lt;CONNTECTION_STRING&gt;&quot;;\r\n              \r\nBlobServiceClient blobServiceClient = new BlobServiceClientBuilder().connectionString(connectStr).buildClient();\r\n\r\nBlobContainerClient containerClient = blobServiceClient.getBlobContainerClient(&lt;CONTAINER_NAME&gt;);\r\nSystem.out.println(&quot;Listing files in container:&quot;);\r\nfor (BlobItem blobItem : containerClient.listBlobs()) {\r\n    System.out.println(&quot;\\t&quot; + blobItem.getName());\r\n}\r\n```\r\n\r\nI&#39;m trying to update the code to authenticate using ManagedIdentityCredential:\r\n\r\n```java\r\nManagedIdentityCredential managedIdentityCredential = new ManagedIdentityCredentialBuilder()\r\n    \t\t\t.clientId(&lt;MANAGED_IDENTITY_CLIENT_ID&gt;)\r\n    \t\t\t.build();\r\n```\r\n\r\nBut I&#39;m not sure how to replace the managedIdentityCredential into BlobServiceClient...\r\n\r\nAppreciate any help, thank you!","title":"How to connect to Azure Blob Storage using ManagedIdentityCredential","body":"<p>Currently I have a simple code to list files on Azure storage container using a connection string:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String connectStr = &quot;&lt;CONNTECTION_STRING&gt;&quot;;\n              \nBlobServiceClient blobServiceClient = new BlobServiceClientBuilder().connectionString(connectStr).buildClient();\n\nBlobContainerClient containerClient = blobServiceClient.getBlobContainerClient(&lt;CONTAINER_NAME&gt;);\nSystem.out.println(&quot;Listing files in container:&quot;);\nfor (BlobItem blobItem : containerClient.listBlobs()) {\n    System.out.println(&quot;\\t&quot; + blobItem.getName());\n}\n</code></pre>\n<p>I'm trying to update the code to authenticate using ManagedIdentityCredential:</p>\n<pre class=\"lang-java prettyprint-override\"><code>ManagedIdentityCredential managedIdentityCredential = new ManagedIdentityCredentialBuilder()\n                .clientId(&lt;MANAGED_IDENTITY_CLIENT_ID&gt;)\n                .build();\n</code></pre>\n<p>But I'm not sure how to replace the managedIdentityCredential into BlobServiceClient...</p>\n<p>Appreciate any help, thank you!</p>\n"},{"tags":["java","web-services","soap"],"answers":[{"tags":[],"owner":{"account_id":25296580,"reputation":2100,"user_id":19121623,"display_name":"Eskandar Abedini"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1654101885,"creation_date":1654101885,"answer_id":72465420,"question_id":72464804,"body_markdown":"You can different tools for generating Java classes from WSDL file.\r\n\r\n[Generate WSDL Stubs with Maven][1] uses wsimport Maven plugin\r\n\r\n[How do you convert WSDLs to Java classes using Eclipse?][2]\r\n\r\n[Generate Java Code from WSDL dialog][3], in case you are using IntelliJ IDEA\r\n\r\n\r\n  [1]: https://www.baeldung.com/maven-wsdl-stubs\r\n  [2]: https://stackoverflow.com/questions/22460571/how-do-you-convert-wsdls-to-java-classes-using-eclipse\r\n  [3]: https://www.jetbrains.com/help/idea/generate-java-code-from-wsdl-or-wadl-dialog.html\r\n","title":"Generate classes with SOAPMessage","body":"<p>You can different tools for generating Java classes from WSDL file.</p>\n<p><a href=\"https://www.baeldung.com/maven-wsdl-stubs\" rel=\"nofollow noreferrer\">Generate WSDL Stubs with Maven</a> uses wsimport Maven plugin</p>\n<p><a href=\"https://stackoverflow.com/questions/22460571/how-do-you-convert-wsdls-to-java-classes-using-eclipse\">How do you convert WSDLs to Java classes using Eclipse?</a></p>\n<p><a href=\"https://www.jetbrains.com/help/idea/generate-java-code-from-wsdl-or-wadl-dialog.html\" rel=\"nofollow noreferrer\">Generate Java Code from WSDL dialog</a>, in case you are using IntelliJ IDEA</p>\n"}],"owner":{"account_id":23394250,"reputation":133,"user_id":19037767,"display_name":"Paul Dlc"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":68,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1654101885,"creation_date":1654098776,"question_id":72464804,"body_markdown":"Hellow. Can i generate classes from a web service in my java project using SOAPMessage?. [This is the WS][1] and I want generate the classes that are here. Thanks in advance.\r\n\r\n\r\n  [1]: https://www.crcind.com/csp/samples/SOAP.Demo.cls?wsdl\r\n","title":"Generate classes with SOAPMessage","body":"<p>Hellow. Can i generate classes from a web service in my java project using SOAPMessage?. <a href=\"https://www.crcind.com/csp/samples/SOAP.Demo.cls?wsdl\" rel=\"nofollow noreferrer\">This is the WS</a> and I want generate the classes that are here. Thanks in advance.</p>\n"},{"tags":["java","spring-boot","apache-kafka","apache-camel"],"answers":[{"tags":[],"owner":{"account_id":201217,"reputation":1529,"user_id":447522,"accept_rate":85,"display_name":"samblake"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1654100957,"creation_date":1654100957,"answer_id":72465248,"question_id":66043150,"body_markdown":"You may need to add:\r\n\r\n    @UseAdviceWith    \r\n    @SpringBootTest(&quot;spring.autoconfigure.exclude=org.springframework.boot.autoconfigure.kafka.KafkaAutoConfiguration&quot;)\r\n\r\nin addition to:\r\n\r\n    @TestPropertySource(properties = &quot;camel.component.kafka.enabled=false&quot;)\r\n\r\nYou will then need to remove any Kafka routes you&#39;ve not mocked with something like:\r\n\r\n    AdviceWith.adviceWith(context, routeId, routeBuilder -&gt;\r\n            routeBuilder.weaveByToUri(&quot;kafka:*&quot;).remove());\r\n","title":"How to disable Camel component in tests?","body":"<p>You may need to add:</p>\n<pre><code>@UseAdviceWith    \n@SpringBootTest(&quot;spring.autoconfigure.exclude=org.springframework.boot.autoconfigure.kafka.KafkaAutoConfiguration&quot;)\n</code></pre>\n<p>in addition to:</p>\n<pre><code>@TestPropertySource(properties = &quot;camel.component.kafka.enabled=false&quot;)\n</code></pre>\n<p>You will then need to remove any Kafka routes you've not mocked with something like:</p>\n<pre><code>AdviceWith.adviceWith(context, routeId, routeBuilder -&gt;\n        routeBuilder.weaveByToUri(&quot;kafka:*&quot;).remove());\n</code></pre>\n"}],"owner":{"account_id":17213890,"reputation":1600,"user_id":12462444,"display_name":"andreoss"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1269,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":1,"score":4,"last_activity_date":1654100957,"creation_date":1612432149,"question_id":66043150,"body_markdown":"I have a Spring Boot + Camel project and want to test routes without using Kafka (which is the main bus). In order to have ligther tests I want to use only &quot;direct&quot; endpoints in tests.\r\n\r\n\r\n```\r\n@CamelSpringBootTest\r\n@TestPropertySource(\r\n    properties = {\r\n        &quot;camel.component.kafka.enabled=false&quot;\r\n    }\r\n)\r\n@ContextConfiguration(\r\n    classes = Application.class\r\n)\r\n@MockEndpoints\r\nfinal class TopicRouteBuilderTest {\r\n    @Autowired\r\n    private CamelContext context;\r\n\r\n    @Test\r\n    void runsRoute() {\r\n        ...\r\n    }\r\n}\r\n```\r\n\r\nBut Camel still tries to initialize Kafka component and fails with the following message:\r\n```\r\n\r\norg.apache.camel.FailedToStartRouteException: Failed to start route route1 because of null\r\n\r\n\tat org.apache.camel.impl.engine.RouteService.warmUp(RouteService.java:124)\r\n\tat org.apache.camel.impl.engine.InternalRouteStartupManager.doWarmUpRoutes(InternalRouteStartupManager.java:270)\r\n\tat org.apache.camel.impl.engine.InternalRouteStartupManager.safelyStartRouteServices(InternalRouteStartupManager.java:157)\r\n\tat org.apache.camel.impl.engine.InternalRouteStartupManager.doStartOrResumeRoutes(InternalRouteStartupManager.java:115)\r\n\tat org.apache.camel.impl.engine.AbstractCamelContext.doStartCamel(AbstractCamelContext.java:2837)\r\n\tat org.apache.camel.impl.engine.AbstractCamelContext.doStartContext(AbstractCamelContext.java:2666)\r\n\tat org.apache.camel.impl.engine.AbstractCamelContext.doStart(AbstractCamelContext.java:2629)\r\n\tat org.apache.camel.spring.boot.SpringBootCamelContext.doStart(SpringBootCamelContext.java:43)\r\n\tat org.apache.camel.support.service.BaseService.start(BaseService.java:115)\r\n\tat org.apache.camel.impl.engine.AbstractCamelContext.start(AbstractCamelContext.java:2395)\r\n\tat org.apache.camel.spring.SpringCamelContext.start(SpringCamelContext.java:130)\r\n\tat org.apache.camel.test.spring.junit5.CamelAnnotationsHandler$8.execute(CamelAnnotationsHandler.java:418)\r\n\tat org.apache.camel.test.spring.junit5.CamelSpringTestHelper.doToSpringCamelContexts(CamelSpringTestHelper.java:109)\r\n\tat org.apache.camel.test.spring.junit5.CamelAnnotationsHandler.handleCamelContextStartup(CamelAnnotationsHandler.java:411)\r\n\tat org.apache.camel.test.spring.junit5.CamelSpringBootExecutionListener.beforeTestMethod(CamelSpringBootExecutionListener.java:105)\r\n\tat org.springframework.test.context.TestContextManager.beforeTestMethod(TestContextManager.java:289)\r\n\tat org.springframework.test.context.junit.jupiter.SpringExtension.beforeEach(SpringExtension.java:174)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeBeforeEachCallbacks$1(TestMethodTestDescriptor.java:159)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeBeforeMethodsOrCallbacksUntilExceptionOccurs$5(TestMethodTestDescriptor.java:195)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeBeforeMethodsOrCallbacksUntilExceptionOccurs(TestMethodTestDescriptor.java:195)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeBeforeEachCallbacks(TestMethodTestDescriptor.java:158)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:125)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:65)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:129)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:127)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:126)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:84)\r\n\tat java.util.ArrayList.forEach(ArrayList.java:1259)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:143)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:129)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:127)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:126)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:84)\r\n\tat java.util.ArrayList.forEach(ArrayList.java:1259)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:143)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:129)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:127)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:126)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:84)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:32)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:51)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:108)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:96)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:75)\r\n\tat com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:71)\r\n\tat com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:33)\r\n\tat com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:220)\r\n\tat com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:53)\r\nCaused by: java.lang.IllegalArgumentException: Brokers must be configured\r\n\tat org.apache.camel.component.kafka.KafkaConsumer.&lt;init&gt;(KafkaConsumer.java:77)\r\n\tat org.apache.camel.component.kafka.KafkaEndpoint.createConsumer(KafkaEndpoint.java:78)\r\n\tat org.apache.camel.impl.engine.DefaultInterceptSendToEndpoint.createConsumer(DefaultInterceptSendToEndpoint.java:130)\r\n\tat org.apache.camel.impl.engine.DefaultRoute.addServices(DefaultRoute.java:562)\r\n\tat org.apache.camel.impl.engine.DefaultRoute.onStartingServices(DefaultRoute.java:166)\r\n\tat org.apache.camel.impl.engine.RouteService.doWarmUp(RouteService.java:152)\r\n\tat org.apache.camel.impl.engine.RouteService.warmUp(RouteService.java:122)\r\n\t... 65 more\r\n\r\n```\r\n\r\nIs there a way to disable Kafka component completely? ","title":"How to disable Camel component in tests?","body":"<p>I have a Spring Boot + Camel project and want to test routes without using Kafka (which is the main bus). In order to have ligther tests I want to use only &quot;direct&quot; endpoints in tests.</p>\n<pre><code>@CamelSpringBootTest\n@TestPropertySource(\n    properties = {\n        &quot;camel.component.kafka.enabled=false&quot;\n    }\n)\n@ContextConfiguration(\n    classes = Application.class\n)\n@MockEndpoints\nfinal class TopicRouteBuilderTest {\n    @Autowired\n    private CamelContext context;\n\n    @Test\n    void runsRoute() {\n        ...\n    }\n}\n</code></pre>\n<p>But Camel still tries to initialize Kafka component and fails with the following message:</p>\n<pre><code>\norg.apache.camel.FailedToStartRouteException: Failed to start route route1 because of null\n\n    at org.apache.camel.impl.engine.RouteService.warmUp(RouteService.java:124)\n    at org.apache.camel.impl.engine.InternalRouteStartupManager.doWarmUpRoutes(InternalRouteStartupManager.java:270)\n    at org.apache.camel.impl.engine.InternalRouteStartupManager.safelyStartRouteServices(InternalRouteStartupManager.java:157)\n    at org.apache.camel.impl.engine.InternalRouteStartupManager.doStartOrResumeRoutes(InternalRouteStartupManager.java:115)\n    at org.apache.camel.impl.engine.AbstractCamelContext.doStartCamel(AbstractCamelContext.java:2837)\n    at org.apache.camel.impl.engine.AbstractCamelContext.doStartContext(AbstractCamelContext.java:2666)\n    at org.apache.camel.impl.engine.AbstractCamelContext.doStart(AbstractCamelContext.java:2629)\n    at org.apache.camel.spring.boot.SpringBootCamelContext.doStart(SpringBootCamelContext.java:43)\n    at org.apache.camel.support.service.BaseService.start(BaseService.java:115)\n    at org.apache.camel.impl.engine.AbstractCamelContext.start(AbstractCamelContext.java:2395)\n    at org.apache.camel.spring.SpringCamelContext.start(SpringCamelContext.java:130)\n    at org.apache.camel.test.spring.junit5.CamelAnnotationsHandler$8.execute(CamelAnnotationsHandler.java:418)\n    at org.apache.camel.test.spring.junit5.CamelSpringTestHelper.doToSpringCamelContexts(CamelSpringTestHelper.java:109)\n    at org.apache.camel.test.spring.junit5.CamelAnnotationsHandler.handleCamelContextStartup(CamelAnnotationsHandler.java:411)\n    at org.apache.camel.test.spring.junit5.CamelSpringBootExecutionListener.beforeTestMethod(CamelSpringBootExecutionListener.java:105)\n    at org.springframework.test.context.TestContextManager.beforeTestMethod(TestContextManager.java:289)\n    at org.springframework.test.context.junit.jupiter.SpringExtension.beforeEach(SpringExtension.java:174)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeBeforeEachCallbacks$1(TestMethodTestDescriptor.java:159)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeBeforeMethodsOrCallbacksUntilExceptionOccurs$5(TestMethodTestDescriptor.java:195)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeBeforeMethodsOrCallbacksUntilExceptionOccurs(TestMethodTestDescriptor.java:195)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeBeforeEachCallbacks(TestMethodTestDescriptor.java:158)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:125)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:65)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:139)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:129)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:127)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:126)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:84)\n    at java.util.ArrayList.forEach(ArrayList.java:1259)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:143)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:129)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:127)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:126)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:84)\n    at java.util.ArrayList.forEach(ArrayList.java:1259)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:143)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:129)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:127)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:126)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:84)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:32)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:51)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:108)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:96)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:75)\n    at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:71)\n    at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:33)\n    at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:220)\n    at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:53)\nCaused by: java.lang.IllegalArgumentException: Brokers must be configured\n    at org.apache.camel.component.kafka.KafkaConsumer.&lt;init&gt;(KafkaConsumer.java:77)\n    at org.apache.camel.component.kafka.KafkaEndpoint.createConsumer(KafkaEndpoint.java:78)\n    at org.apache.camel.impl.engine.DefaultInterceptSendToEndpoint.createConsumer(DefaultInterceptSendToEndpoint.java:130)\n    at org.apache.camel.impl.engine.DefaultRoute.addServices(DefaultRoute.java:562)\n    at org.apache.camel.impl.engine.DefaultRoute.onStartingServices(DefaultRoute.java:166)\n    at org.apache.camel.impl.engine.RouteService.doWarmUp(RouteService.java:152)\n    at org.apache.camel.impl.engine.RouteService.warmUp(RouteService.java:122)\n    ... 65 more\n\n</code></pre>\n<p>Is there a way to disable Kafka component completely?</p>\n"},{"tags":["java","swagger","openapi","openapi-generator"],"owner":{"account_id":24731384,"reputation":103,"user_id":18619318,"display_name":"user18619318"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":342,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1654100394,"creation_date":1654100394,"question_id":72465130,"body_markdown":"I am trying to find out why my Spring server generated by OpenAPI generator properly accepts requests with &quot;user=foo&quot;, &quot;password=bar&quot; in a Postman POST request with x-www-form-urlencoded body (as expected), but the Swagger page embedded in the server using springfox-swagger2 generates a\r\n\r\n```\r\ncurl -X &#39;POST&#39; \\\r\n  &#39;http://localhost:8080/v1.0/login?username=foo&amp;password=bar&#39; \\\r\n  -H &#39;accept: */*&#39; \\\r\n  -d &#39;&#39;\r\n```\r\n\r\nrequest, which returns a 415 Unsupported Media Type. For the record, the generated Java client from the OpenAPI specification shows the same behavior.  The generated Java method looks like:\r\n\r\n```java\r\n    @Operation(\r\n        operationId = &quot;loginPost&quot;,\r\n        responses = {\r\n            @ApiResponse(responseCode = &quot;200&quot;, description = &quot;User successfully logged in.&quot;),\r\n            @ApiResponse(responseCode = &quot;400&quot;, description = &quot;User login failed.&quot;),\r\n            @ApiResponse(responseCode = &quot;415&quot;, description = &quot;Unsupported Media Type&quot;)\r\n        }\r\n    )\r\n    @RequestMapping(\r\n        method = RequestMethod.POST,\r\n        value = &quot;/login&quot;,\r\n        consumes = { &quot;application/x-www-form-urlencoded&quot; }\r\n    )\r\n    default ResponseEntity&lt;Void&gt; loginPost(\r\n        @Parameter(name = &quot;username&quot;, description = &quot;&quot;, required = true) @Valid @RequestParam(value = &quot;username&quot;, required = true) String username,\r\n        @Parameter(name = &quot;password&quot;, description = &quot;&quot;, required = true) @Valid @RequestParam(value = &quot;password&quot;, required = true) String password\r\n    ) {\r\n        return getDelegate().loginPost(username, password);\r\n    }\r\n\r\n```\r\n\r\n(automatically generated, my code is in the getDelegate() delegate).  \r\n\r\nMy guess is that the attributes on the generated Java code is slightly off, so I would like to find out what needs to be fixed so I can report a bug to the OpenAPI generator project, hopefully with a patch.\r\n\r\nWhat is the reason for what I see?\r\n\r\n","title":"What is missing for the embedded Swagger to generate a x-www-form-urlencoded body?","body":"<p>I am trying to find out why my Spring server generated by OpenAPI generator properly accepts requests with &quot;user=foo&quot;, &quot;password=bar&quot; in a Postman POST request with x-www-form-urlencoded body (as expected), but the Swagger page embedded in the server using springfox-swagger2 generates a</p>\n<pre><code>curl -X 'POST' \\\n  'http://localhost:8080/v1.0/login?username=foo&amp;password=bar' \\\n  -H 'accept: */*' \\\n  -d ''\n</code></pre>\n<p>request, which returns a 415 Unsupported Media Type. For the record, the generated Java client from the OpenAPI specification shows the same behavior.  The generated Java method looks like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @Operation(\n        operationId = &quot;loginPost&quot;,\n        responses = {\n            @ApiResponse(responseCode = &quot;200&quot;, description = &quot;User successfully logged in.&quot;),\n            @ApiResponse(responseCode = &quot;400&quot;, description = &quot;User login failed.&quot;),\n            @ApiResponse(responseCode = &quot;415&quot;, description = &quot;Unsupported Media Type&quot;)\n        }\n    )\n    @RequestMapping(\n        method = RequestMethod.POST,\n        value = &quot;/login&quot;,\n        consumes = { &quot;application/x-www-form-urlencoded&quot; }\n    )\n    default ResponseEntity&lt;Void&gt; loginPost(\n        @Parameter(name = &quot;username&quot;, description = &quot;&quot;, required = true) @Valid @RequestParam(value = &quot;username&quot;, required = true) String username,\n        @Parameter(name = &quot;password&quot;, description = &quot;&quot;, required = true) @Valid @RequestParam(value = &quot;password&quot;, required = true) String password\n    ) {\n        return getDelegate().loginPost(username, password);\n    }\n\n</code></pre>\n<p>(automatically generated, my code is in the getDelegate() delegate).</p>\n<p>My guess is that the attributes on the generated Java code is slightly off, so I would like to find out what needs to be fixed so I can report a bug to the OpenAPI generator project, hopefully with a patch.</p>\n<p>What is the reason for what I see?</p>\n"},{"tags":["java","spring-boot","post","http-request-parameters"],"comments":[{"owner":{"account_id":15332453,"reputation":321,"user_id":11156297,"display_name":"Zoe Lubanza"},"score":1,"creation_date":1654096672,"post_id":72464210,"comment_id":128011431,"body_markdown":"If you don&#39;t want to send as a request param you can send it as a RequestBody.\nSo you would have something like this:\n`createNote(...\n@RequestBody Note note, @AuthenticationPrincipal Principal principal)`\nPass the note to the request body like a JSON object","body":"If you don&#39;t want to send as a request param you can send it as a RequestBody. So you would have something like this: <code>createNote(... @RequestBody Note note, @AuthenticationPrincipal Principal principal)</code> Pass the note to the request body like a JSON object"},{"owner":{"account_id":3656420,"reputation":413,"user_id":3047319,"display_name":"DiegoMG"},"score":0,"creation_date":1654097692,"post_id":72464210,"comment_id":128011842,"body_markdown":"Hello Zoe! Thanks, should I remove it from the URL as well or no?","body":"Hello Zoe! Thanks, should I remove it from the URL as well or no?"},{"owner":{"account_id":15332453,"reputation":321,"user_id":11156297,"display_name":"Zoe Lubanza"},"score":0,"creation_date":1654102000,"post_id":72464210,"comment_id":128013415,"body_markdown":"yes it needs to be removed from the URL as well. What fields do you have in your **Note** class?","body":"yes it needs to be removed from the URL as well. What fields do you have in your <b>Note</b> class?"},{"owner":{"account_id":3656420,"reputation":413,"user_id":3047319,"display_name":"DiegoMG"},"score":0,"creation_date":1654155799,"post_id":72464210,"comment_id":128025335,"body_markdown":"The content is just a PK and a string field for the note.","body":"The content is just a PK and a string field for the note."}],"answers":[{"tags":[],"owner":{"account_id":3656420,"reputation":413,"user_id":3047319,"display_name":"DiegoMG"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1654100049,"creation_date":1654100049,"answer_id":72465057,"question_id":72464210,"body_markdown":"Now when trying os Postman I get this error message:\r\nThe request was rejected because the URL contained a potentially malicious String &quot;//&quot;\r\n\r\nBut I can&#39;t find any // \r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/EaPI9.png","title":"Move a param from the URL to the body","body":"<p>Now when trying os Postman I get this error message:\nThe request was rejected because the URL contained a potentially malicious String &quot;//&quot;</p>\n<p>But I can't find any //</p>\n<p><a href=\"https://i.stack.imgur.com/EaPI9.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/EaPI9.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":3656420,"reputation":413,"user_id":3047319,"display_name":"DiegoMG"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":139,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1654100049,"creation_date":1654096187,"question_id":72464210,"body_markdown":"I need to avoid sending a note as a request param in a Post operation. To do so I need to move it from the url to the body but I don&#39;t know how.\r\n\r\nHere is the code:\r\n\r\n    @PostMapping(value = &quot;/person/{cuco_id}/notes/{typeNote}/**{note}**&quot;, produces = { &quot;application/json; charset=UTF-8&quot; }, consumes = {\r\n            &quot;application/json; charset=UTF-8&quot; })\r\n    @ApiOperation(value = &quot;Create a new note for the specified Cuco ID&quot;, response = Note.class)\r\n\r\n    @Transactional\r\n    public ResponseEntity&lt;Note&gt; createNote(\r\n            @ApiParam(value = &quot;Cuco ID for which the note should be created&quot;, required = true) @PathVariable Long cuco_id,\r\n            @ApiParam(value = &quot;Type of note which should be created&quot;, required = true) @PathVariable String typeNote,\r\n            @ApiParam(value = &quot;Note which should be added to the Cuco ID&quot;, required = true) @PathVariable String note,\r\n            @AuthenticationPrincipal Principal principal)\r\n            throws ElementAlreadyExistsException, ValidationErrorException, IOException {\r\n\r\n        // check if Note entity for cuco id exists\r\n        Integer seq = repo.findNextSeq(cuco_id,typeNote);\r\n\r\n        NotePK notePk = new NotePK(cuco_id, seq, typeNote);\r\n        Note coreEntity = new Note();\r\n\r\n        Optional&lt;Note&gt; optNote = repo.findById(notePk);\r\n        \r\n        if (!optNote.isPresent()) {\r\n\r\n            coreEntity.setIdCuco(notePk.getIdCuco());\r\n            coreEntity.setSeq(seq);\r\n            coreEntity.setTypeNote(notePk.getTypeNote());\r\n            coreEntity.setNote(note);\r\n            coreEntity.setCreationDate(new Date());\r\n            coreEntity.setLastModDate(new Date());\r\n            coreEntity.setCreationBy(principal.getName());\r\n            coreEntity.setLastModBy(principal.getName());\r\n\r\n        } else {\r\n            // If it already exits, do nothing\r\n            throw new ElementAlreadyExistsException(&quot;The note already exists&quot;);\r\n        }","title":"Move a param from the URL to the body","body":"<p>I need to avoid sending a note as a request param in a Post operation. To do so I need to move it from the url to the body but I don't know how.</p>\n<p>Here is the code:</p>\n<pre><code>@PostMapping(value = &quot;/person/{cuco_id}/notes/{typeNote}/**{note}**&quot;, produces = { &quot;application/json; charset=UTF-8&quot; }, consumes = {\n        &quot;application/json; charset=UTF-8&quot; })\n@ApiOperation(value = &quot;Create a new note for the specified Cuco ID&quot;, response = Note.class)\n\n@Transactional\npublic ResponseEntity&lt;Note&gt; createNote(\n        @ApiParam(value = &quot;Cuco ID for which the note should be created&quot;, required = true) @PathVariable Long cuco_id,\n        @ApiParam(value = &quot;Type of note which should be created&quot;, required = true) @PathVariable String typeNote,\n        @ApiParam(value = &quot;Note which should be added to the Cuco ID&quot;, required = true) @PathVariable String note,\n        @AuthenticationPrincipal Principal principal)\n        throws ElementAlreadyExistsException, ValidationErrorException, IOException {\n\n    // check if Note entity for cuco id exists\n    Integer seq = repo.findNextSeq(cuco_id,typeNote);\n\n    NotePK notePk = new NotePK(cuco_id, seq, typeNote);\n    Note coreEntity = new Note();\n\n    Optional&lt;Note&gt; optNote = repo.findById(notePk);\n    \n    if (!optNote.isPresent()) {\n\n        coreEntity.setIdCuco(notePk.getIdCuco());\n        coreEntity.setSeq(seq);\n        coreEntity.setTypeNote(notePk.getTypeNote());\n        coreEntity.setNote(note);\n        coreEntity.setCreationDate(new Date());\n        coreEntity.setLastModDate(new Date());\n        coreEntity.setCreationBy(principal.getName());\n        coreEntity.setLastModBy(principal.getName());\n\n    } else {\n        // If it already exits, do nothing\n        throw new ElementAlreadyExistsException(&quot;The note already exists&quot;);\n    }\n</code></pre>\n"},{"tags":["java","jar","path","executable-jar","runnable-jar"],"comments":[{"owner":{"account_id":2848514,"reputation":10932,"user_id":2446208,"accept_rate":69,"display_name":"blacktide"},"score":0,"creation_date":1654101230,"post_id":72464925,"comment_id":128013153,"body_markdown":"`System.getProperty(&quot;user.dir&quot;)` returns the path the user is currently in within the Command Prompt. In your IDE, this is typically the root of the project, which explains why it works in your IDE. If you `cd` to your project directory then it should work.","body":"<code>System.getProperty(&quot;user.dir&quot;)</code> returns the path the user is currently in within the Command Prompt. In your IDE, this is typically the root of the project, which explains why it works in your IDE. If you <code>cd</code> to your project directory then it should work."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1654101560,"post_id":72464925,"comment_id":128013274,"body_markdown":"Make a directory off `File(System.getProperty(&quot;user.home&quot;)` and use that","body":"Make a directory off <code>File(System.getProperty(&quot;user.home&quot;)</code> and use that"},{"owner":{"account_id":18134035,"reputation":551,"user_id":13188809,"display_name":"Soske"},"score":0,"creation_date":1654111664,"post_id":72464925,"comment_id":128016541,"body_markdown":"@blacktide how could i use CD? i have tried using &quot;user.home&quot; but this just gives me a local address, but i would like it to store within my Jar file.","body":"@blacktide how could i use CD? i have tried using &quot;user.home&quot; but this just gives me a local address, but i would like it to store within my Jar file."}],"answers":[{"tags":[],"owner":{"account_id":8362430,"reputation":856,"user_id":6280255,"display_name":"Just another Java programmer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1654100020,"creation_date":1654100020,"answer_id":72465051,"question_id":72464925,"body_markdown":"I think you are mixing what your directories look like in netbeans with what&#39;s available on the server. Save to an external directory instead, not to your src directory.","title":"How to save an PNG via code in a Runnable JAR file?","body":"<p>I think you are mixing what your directories look like in netbeans with what's available on the server. Save to an external directory instead, not to your src directory.</p>\n"}],"owner":{"account_id":18134035,"reputation":551,"user_id":13188809,"display_name":"Soske"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":65,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1654100020,"creation_date":1654099320,"question_id":72464925,"body_markdown":"I&#39;m having trouble fixing this issue,\r\nI have created a Client\\Server side application and created a Method where a user can\r\n&quot;Send&quot; a PNG file from his side to Server side, then the Server side &quot;Creates&quot; and saves the image in a Package that only contains pictures.\r\n\r\nWhen i run this Method of sending a Picture from Client side to Server side via Eclipse IDE\r\nit works as expected, but when exporting Client/Server side into Runnable JAR files, i get the next error:\r\n\r\n&gt; Java\r\n\r\n    private static void getImg(MyFile msg) {\r\n    \tint fileSize =msg.getSize();\r\n    \t  System.out.println(&quot;length &quot;+ fileSize);\r\n    \t\ttry {\r\n    \t\t\tFile newFile = new File(System.getProperty(&quot;user.dir&quot;)+&quot;\\\\src\\\\GuiServerScreens\\\\&quot;+msg.getFileName());\r\n    \t\t\tFileOutputStream fileOut;\r\n    \t\t\tfileOut = new FileOutputStream(newFile);\r\n    \t\t\tBufferedOutputStream bufferOut = new BufferedOutputStream(fileOut);\r\n    \t\t\ttry {\r\n    \t\t\t\tbufferOut.write(msg.getMybytearray(), 0,  msg.getSize());\r\n    \t\t\t\tfileOut.flush();\r\n    \t\t\t\tbufferOut.flush();\r\n    \t\t\t} catch (IOException e) {\r\n    \t\t\t\te.printStackTrace();\r\n    \t\t\t}\r\n    \r\n    \t\t} catch (FileNotFoundException e) {\r\n    \t\t\te.printStackTrace();\r\n    \t\t}\r\n    }\r\n\r\nI get the follow error :\r\n\r\n&gt;     java.io.FileNotFoundException: java.io.FileNotFoundException: C:\\Users\\Ilya\\Desktop\\src\\GuiServerScreens\\test.png (The system cannot\r\n&gt; find the path specified)\r\n\r\nIt seems that using `File newFile = new File(System.getProperty(&quot;user.dir&quot;)+&quot;\\\\src\\\\GuiServerScreens\\\\&quot;+msg.getFileName());`\r\n\r\nDoes not provide the wanted result","title":"How to save an PNG via code in a Runnable JAR file?","body":"<p>I'm having trouble fixing this issue,\nI have created a Client\\Server side application and created a Method where a user can\n&quot;Send&quot; a PNG file from his side to Server side, then the Server side &quot;Creates&quot; and saves the image in a Package that only contains pictures.</p>\n<p>When i run this Method of sending a Picture from Client side to Server side via Eclipse IDE\nit works as expected, but when exporting Client/Server side into Runnable JAR files, i get the next error:</p>\n<blockquote>\n<p>Java</p>\n</blockquote>\n<pre><code>private static void getImg(MyFile msg) {\n    int fileSize =msg.getSize();\n      System.out.println(&quot;length &quot;+ fileSize);\n        try {\n            File newFile = new File(System.getProperty(&quot;user.dir&quot;)+&quot;\\\\src\\\\GuiServerScreens\\\\&quot;+msg.getFileName());\n            FileOutputStream fileOut;\n            fileOut = new FileOutputStream(newFile);\n            BufferedOutputStream bufferOut = new BufferedOutputStream(fileOut);\n            try {\n                bufferOut.write(msg.getMybytearray(), 0,  msg.getSize());\n                fileOut.flush();\n                bufferOut.flush();\n            } catch (IOException e) {\n                e.printStackTrace();\n            }\n\n        } catch (FileNotFoundException e) {\n            e.printStackTrace();\n        }\n}\n</code></pre>\n<p>I get the follow error :</p>\n<blockquote>\n<pre><code>java.io.FileNotFoundException: java.io.FileNotFoundException: C:\\Users\\Ilya\\Desktop\\src\\GuiServerScreens\\test.png (The system cannot\n</code></pre>\n<p>find the path specified)</p>\n</blockquote>\n<p>It seems that using <code>File newFile = new File(System.getProperty(&quot;user.dir&quot;)+&quot;\\\\src\\\\GuiServerScreens\\\\&quot;+msg.getFileName());</code></p>\n<p>Does not provide the wanted result</p>\n"},{"tags":["java","for-loop","image-processing"],"comments":[{"owner":{"account_id":969721,"reputation":344518,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1654058060,"post_id":72456482,"comment_id":127998718,"body_markdown":"It would seem the `this.image[0].length` should be `this.image[x].length` but I&#39;m guessing","body":"It would seem the <code>this.image[0].length</code> should be <code>this.image[x].length</code> but I&#39;m guessing"},{"owner":{"account_id":4362282,"reputation":92954,"user_id":3558960,"accept_rate":60,"display_name":"Robby Cornelissen"},"score":0,"creation_date":1654058115,"post_id":72456482,"comment_id":127998730,"body_markdown":"@MadProgrammer Shouldn&#39;t make a difference. It&#39;s an image, so probably not a jagged array.","body":"@MadProgrammer Shouldn&#39;t make a difference. It&#39;s an image, so probably not a jagged array."},{"owner":{"account_id":179362,"reputation":15005,"user_id":411965,"accept_rate":87,"display_name":"oshai"},"score":1,"creation_date":1654058216,"post_id":72456482,"comment_id":127998748,"body_markdown":"When you flip you will usually iterate only half and swap it with a temp var","body":"When you flip you will usually iterate only half and swap it with a temp var"},{"owner":{"account_id":4362282,"reputation":92954,"user_id":3558960,"accept_rate":60,"display_name":"Robby Cornelissen"},"score":1,"creation_date":1654058319,"post_id":72456482,"comment_id":127998766,"body_markdown":"Let&#39;s say the image is 4 pixels wide, then with your logic you put the value of pixel 4 into pixel one and at the end put the value of pixel 1 back into pixel 4.","body":"Let&#39;s say the image is 4 pixels wide, then with your logic you put the value of pixel 4 into pixel one and at the end put the value of pixel 1 back into pixel 4."},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1654058680,"post_id":72456482,"comment_id":127998823,"body_markdown":"Also, it looks like you redisplay the image before to flip it.","body":"Also, it looks like you redisplay the image before to flip it."}],"answers":[{"tags":[],"owner":{"account_id":4362282,"reputation":92954,"user_id":3558960,"accept_rate":60,"display_name":"Robby Cornelissen"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1654059575,"creation_date":1654058849,"answer_id":72456549,"question_id":72456482,"body_markdown":"You need to iterate up to the middle, and swap pixels that are on the left with pixels that are on the right. Otherwise you end up overwriting your changes.\r\n\r\n    public void flipImageHorizontally() {\r\n        this.redisplayImage();\r\n    \r\n        for(int x = 0; x &lt; this.image.length; x++) {\r\n            for(int y = 0; y &lt; this.image[x].length / 2; y++) {\r\n                int pixel = this.image[x][y]; // assuming int\r\n                \r\n                this.image[x][y] = this.image[x][this.image[x].length - 1 - y];\r\n                this.image[x][this.image[x].length - 1 - y] = pixel;\r\n            }\r\n        }\r\n    }\r\n\r\nIn this code\r\n\r\n 1. the `pixel` variable temporarily holds the value on the left;\r\n 2. the value on the left gets assigned the value on the right;\r\n 3. the value on the right gets the value that was originally on the left (i.e. whatever is in `pixel`).\r\n\r\n\r\n----------\r\n&lt;sup&gt;\r\n&lt;strong&gt;Notes:&lt;/strong&gt;\r\n\r\n - I maintained your naming of `x` and `y`, even though it&#39;s counter-intuitive because it makes it look like you&#39;re performing a vertical flip instead of a horizontal one.\r\n - I don&#39;t know the data type of the array; I assumed `int`, but it might be a `float` array, `Pixel` objects, or something else.\r\n - I don&#39;t know what `this.redisplayImage();` is supposed to do, and whether it&#39;s in the right location.\r\n\r\n&lt;/sup&gt;","title":"Why doesn&#39;t my code flip image horizontally?","body":"<p>You need to iterate up to the middle, and swap pixels that are on the left with pixels that are on the right. Otherwise you end up overwriting your changes.</p>\n<pre><code>public void flipImageHorizontally() {\n    this.redisplayImage();\n\n    for(int x = 0; x &lt; this.image.length; x++) {\n        for(int y = 0; y &lt; this.image[x].length / 2; y++) {\n            int pixel = this.image[x][y]; // assuming int\n            \n            this.image[x][y] = this.image[x][this.image[x].length - 1 - y];\n            this.image[x][this.image[x].length - 1 - y] = pixel;\n        }\n    }\n}\n</code></pre>\n<p>In this code</p>\n<ol>\n<li>the <code>pixel</code> variable temporarily holds the value on the left;</li>\n<li>the value on the left gets assigned the value on the right;</li>\n<li>the value on the right gets the value that was originally on the left (i.e. whatever is in <code>pixel</code>).</li>\n</ol>\n<hr />\n<sup>\n<strong>Notes:</strong>\n<ul>\n<li>I maintained your naming of <code>x</code> and <code>y</code>, even though it's counter-intuitive because it makes it look like you're performing a vertical flip instead of a horizontal one.</li>\n<li>I don't know the data type of the array; I assumed <code>int</code>, but it might be a <code>float</code> array, <code>Pixel</code> objects, or something else.</li>\n<li>I don't know what <code>this.redisplayImage();</code> is supposed to do, and whether it's in the right location.</li>\n</ul>\n</sup>\n"},{"tags":[],"owner":{"account_id":3580374,"reputation":108855,"user_id":2988730,"accept_rate":96,"display_name":"Mad Physicist"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1654059367,"creation_date":1654059367,"answer_id":72456595,"question_id":72456482,"body_markdown":"Let&#39;s say you have an image two pixels wide and one pixel high:\r\n\r\n    1 2\r\n\r\nAfter the first iteration of your loop, the end pixel will be swapped to the beginning (`image[0][0] = image[0][2 - 1 - 0];`):\r\n\r\n    2 2\r\n\r\nBut now you lost the original value of `image[0][0]`! So when you do the swap `image[0][1] = image[0][2 - 1 - 1];`, you are copying the second half of the image back to itself.\r\n\r\nThe right answer is to use a buffer so you don&#39;t overwrite the swap:\r\n\r\n```\r\nfor(int y = 0; y &lt; this.image[0].length / 2; y++) {\r\n    int buffer = this.image[x][y];\r\n    this.image[x][y] = this.image[x][this.image[0].length - 1 - y];\r\n    this.image[x][this.image[0].length - 1 - y] = buffer;\r\n}\r\n```\r\n\r\nInteger truncation ensures that `this.image[0].length / 2` is an efficient bound. For even numbers, you iterate exactly the first half. For odd numbers, you iterate the first half, not including the middle pixel. That&#39;s a good thing, because the middle does not need to be swapped.","title":"Why doesn&#39;t my code flip image horizontally?","body":"<p>Let's say you have an image two pixels wide and one pixel high:</p>\n<pre><code>1 2\n</code></pre>\n<p>After the first iteration of your loop, the end pixel will be swapped to the beginning (<code>image[0][0] = image[0][2 - 1 - 0];</code>):</p>\n<pre><code>2 2\n</code></pre>\n<p>But now you lost the original value of <code>image[0][0]</code>! So when you do the swap <code>image[0][1] = image[0][2 - 1 - 1];</code>, you are copying the second half of the image back to itself.</p>\n<p>The right answer is to use a buffer so you don't overwrite the swap:</p>\n<pre><code>for(int y = 0; y &lt; this.image[0].length / 2; y++) {\n    int buffer = this.image[x][y];\n    this.image[x][y] = this.image[x][this.image[0].length - 1 - y];\n    this.image[x][this.image[0].length - 1 - y] = buffer;\n}\n</code></pre>\n<p>Integer truncation ensures that <code>this.image[0].length / 2</code> is an efficient bound. For even numbers, you iterate exactly the first half. For odd numbers, you iterate the first half, not including the middle pixel. That's a good thing, because the middle does not need to be swapped.</p>\n"}],"owner":{"account_id":25442619,"reputation":19,"user_id":19245234,"display_name":"Elijah "},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":74,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"answer_count":2,"score":0,"last_activity_date":1654099997,"creation_date":1654057966,"question_id":72456482,"body_markdown":"```java\r\npublic void flipImageHorizontally(){\r\n    this.redisplayImage();\r\n\r\n    for(int x = 0; x &lt; this.image.length; x++)\r\n        for(int y = 0; y &lt; this.image[0].length; y++){\r\n            this.image[x][y] = this.image[x][this.image[0].length - 1 - y];\r\n        }\r\n}\r\n```\r\n\r\nThe code runs but it doesn&#39;t perform the action intended. It is supposed to flip the image horizontally, but instead it only flips half of the image.","title":"Why doesn&#39;t my code flip image horizontally?","body":"<pre class=\"lang-java prettyprint-override\"><code>public void flipImageHorizontally(){\n    this.redisplayImage();\n\n    for(int x = 0; x &lt; this.image.length; x++)\n        for(int y = 0; y &lt; this.image[0].length; y++){\n            this.image[x][y] = this.image[x][this.image[0].length - 1 - y];\n        }\n}\n</code></pre>\n<p>The code runs but it doesn't perform the action intended. It is supposed to flip the image horizontally, but instead it only flips half of the image.</p>\n"},{"tags":["java","parsing","graphql"],"comments":[{"owner":{"account_id":11419649,"reputation":380,"user_id":8371531,"display_name":"Mat G"},"score":0,"creation_date":1654066285,"post_id":72452530,"comment_id":128000265,"body_markdown":"Can you share the sample code and queries of what you are trying to do ? You can also use apollo-client or netflix-dgs or some other client libraries for writing grapqhl clients in Java.","body":"Can you share the sample code and queries of what you are trying to do ? You can also use apollo-client or netflix-dgs or some other client libraries for writing grapqhl clients in Java."}],"answers":[{"tags":[],"owner":{"account_id":19768387,"reputation":11563,"user_id":14475852,"display_name":"Chandan"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1654099638,"creation_date":1654071097,"answer_id":72458429,"question_id":72452530,"body_markdown":"With [`graphql-java`][1] you can parse the query with the [`Parser`][2] without requiring any [`Schema`][3] definition.\r\n\r\n**Imports:**\r\n```\r\nimport graphql.parser.Parser;\r\nimport graphql.language.Document;\r\nimport graphql.language.Field;\r\nimport graphql.language.OperationDefinition;\r\nimport graphql.language.AstPrinter;\r\n```\r\n\r\n```java\r\nString query = &quot;{ Book(id: \\&quot;1\\&quot;) { name, genre } }&quot;;\r\nParser parser = new Parser(); \r\nDocument document = parser.parseDocument(query);\r\nSystem.out.println(document);\r\n```\r\n\r\n**Output:**\r\n```\r\nDocument{\r\n  definitions=[\r\n    OperationDefinition{\r\n      name=&#39;null&#39;,\r\n      operation=QUERY,\r\n      variableDefinitions=[],\r\n      directives=[],\r\n      selectionSet=SelectionSet{\r\n        selections=[\r\n          Field{\r\n            name=&#39;Book&#39;,\r\n            alias=&#39;null&#39;,\r\n            arguments=[\r\n              Argument{\r\n                name=&#39;id&#39;,\r\n                value=StringValue{value=&#39;1&#39;}\r\n              }\r\n            ],\r\n            directives=[],\r\n            selectionSet=SelectionSet{\r\n              selections=[\r\n                Field{\r\n                  name=&#39;name&#39;,\r\n                  alias=&#39;null&#39;,\r\n                  arguments=[],\r\n                  directives=[],\r\n                  selectionSet=null\r\n                },\r\n                Field{\r\n                  name=&#39;genre&#39;,\r\n                  alias=&#39;null&#39;,\r\n                  arguments=[],\r\n                  directives=[],\r\n                  selectionSet=null\r\n                }\r\n              ]\r\n            }\r\n          }\r\n        ]\r\n      }\r\n    }\r\n  ]\r\n}\r\n*/\r\n```\r\nTo get id arguments passed to book below code can be used\r\n```java\r\nSystem.out.println(\r\n    (\r\n     (Field)\r\n     ((OperationDefinition)document.getDefinitions().get(0))\r\n     .getSelectionSet()\r\n     .getSelections()\r\n     .get(0)\r\n    )\r\n    .getArguments()\r\n);\r\n```\r\n**Output:**\r\n```\r\n[Argument{name=&#39;id&#39;, value=StringValue{value=&#39;1&#39;}}]\r\n```\r\n\r\nTo convert [`Document`][4] back to query you can use [`AstPrinter`][5]\r\n```\r\nSystem.out.println(AstPrinter.printAst(document));\r\n```\r\n**Output:**\r\n```\r\nquery {\r\n  Book(id: &quot;1&quot;) {\r\n    name\r\n    genre\r\n  }\r\n}\r\n```\r\n\r\n[1]: https://javadoc.io/doc/com.graphql-java/graphql-java/18.0/index.html\r\n[2]: https://javadoc.io/doc/com.graphql-java/graphql-java/18.0/graphql/parser/Parser.html\r\n[3]: https://www.graphql-java.com/documentation/schema\r\n[4]: https://javadoc.io/doc/com.graphql-java/graphql-java/18.0/graphql/language/Document.html\r\n[5]: https://javadoc.io/doc/com.graphql-java/graphql-java/18.0/graphql/language/AstPrinter.html","title":"How to parse and modify a hardcoded GraphQL query in Java to enable pagination?","body":"<p>With <a href=\"https://javadoc.io/doc/com.graphql-java/graphql-java/18.0/index.html\" rel=\"nofollow noreferrer\"><code>graphql-java</code></a> you can parse the query with the <a href=\"https://javadoc.io/doc/com.graphql-java/graphql-java/18.0/graphql/parser/Parser.html\" rel=\"nofollow noreferrer\"><code>Parser</code></a> without requiring any <a href=\"https://www.graphql-java.com/documentation/schema\" rel=\"nofollow noreferrer\"><code>Schema</code></a> definition.</p>\n<p><strong>Imports:</strong></p>\n<pre><code>import graphql.parser.Parser;\nimport graphql.language.Document;\nimport graphql.language.Field;\nimport graphql.language.OperationDefinition;\nimport graphql.language.AstPrinter;\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>String query = &quot;{ Book(id: \\&quot;1\\&quot;) { name, genre } }&quot;;\nParser parser = new Parser(); \nDocument document = parser.parseDocument(query);\nSystem.out.println(document);\n</code></pre>\n<p><strong>Output:</strong></p>\n<pre><code>Document{\n  definitions=[\n    OperationDefinition{\n      name='null',\n      operation=QUERY,\n      variableDefinitions=[],\n      directives=[],\n      selectionSet=SelectionSet{\n        selections=[\n          Field{\n            name='Book',\n            alias='null',\n            arguments=[\n              Argument{\n                name='id',\n                value=StringValue{value='1'}\n              }\n            ],\n            directives=[],\n            selectionSet=SelectionSet{\n              selections=[\n                Field{\n                  name='name',\n                  alias='null',\n                  arguments=[],\n                  directives=[],\n                  selectionSet=null\n                },\n                Field{\n                  name='genre',\n                  alias='null',\n                  arguments=[],\n                  directives=[],\n                  selectionSet=null\n                }\n              ]\n            }\n          }\n        ]\n      }\n    }\n  ]\n}\n*/\n</code></pre>\n<p>To get id arguments passed to book below code can be used</p>\n<pre class=\"lang-java prettyprint-override\"><code>System.out.println(\n    (\n     (Field)\n     ((OperationDefinition)document.getDefinitions().get(0))\n     .getSelectionSet()\n     .getSelections()\n     .get(0)\n    )\n    .getArguments()\n);\n</code></pre>\n<p><strong>Output:</strong></p>\n<pre><code>[Argument{name='id', value=StringValue{value='1'}}]\n</code></pre>\n<p>To convert <a href=\"https://javadoc.io/doc/com.graphql-java/graphql-java/18.0/graphql/language/Document.html\" rel=\"nofollow noreferrer\"><code>Document</code></a> back to query you can use <a href=\"https://javadoc.io/doc/com.graphql-java/graphql-java/18.0/graphql/language/AstPrinter.html\" rel=\"nofollow noreferrer\"><code>AstPrinter</code></a></p>\n<pre><code>System.out.println(AstPrinter.printAst(document));\n</code></pre>\n<p><strong>Output:</strong></p>\n<pre><code>query {\n  Book(id: &quot;1&quot;) {\n    name\n    genre\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":80024,"reputation":9928,"user_id":226537,"display_name":"Jura Gorohovsky"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1497,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":72458429,"answer_count":1,"score":1,"last_activity_date":1654099638,"creation_date":1654021505,"question_id":72452530,"body_markdown":"I have a hardcoded GraphQL query and a Java application. I read the query from a file and then send it as payload of a POST request constructed using `HttpRequest` and `HttpClient`.\r\n\r\nThis works fine as long as the resulting JSON contains all the data that I need.\r\n\r\nWhen it doesn&#39;t, the resulting JSON contains a `cursor` value that I can use for getting the next page of data.\r\n\r\nNow, in order to use the `cursor` value and request the next page, I need to add the value to my GraphQL query. This means I need to somehow parse the query, traverse it, locate where to insert a new argument and pass the `cursor` value with it.\r\n\r\nTrying to use Gson and parsing the query fails because GraphQL is not a subset of JSON.\r\n\r\nThe list of [GraphQL tooling for Java][1] doesn&#39;t seem to contain any libraries that would parse raw GraphQL queries. In general it looks like devs only write GraphQL servers in Java but not clients.\r\n\r\nWhat are my options aside from just treating the GraphQL query as an unparsed text file using something like `Scanner`?\r\n\r\n(Disclaimer: I&#39;m fairly new to Java.)\r\n\r\n  [1]: https://graphql.org/code/#java-kotlin","title":"How to parse and modify a hardcoded GraphQL query in Java to enable pagination?","body":"<p>I have a hardcoded GraphQL query and a Java application. I read the query from a file and then send it as payload of a POST request constructed using <code>HttpRequest</code> and <code>HttpClient</code>.</p>\n<p>This works fine as long as the resulting JSON contains all the data that I need.</p>\n<p>When it doesn't, the resulting JSON contains a <code>cursor</code> value that I can use for getting the next page of data.</p>\n<p>Now, in order to use the <code>cursor</code> value and request the next page, I need to add the value to my GraphQL query. This means I need to somehow parse the query, traverse it, locate where to insert a new argument and pass the <code>cursor</code> value with it.</p>\n<p>Trying to use Gson and parsing the query fails because GraphQL is not a subset of JSON.</p>\n<p>The list of <a href=\"https://graphql.org/code/#java-kotlin\" rel=\"nofollow noreferrer\">GraphQL tooling for Java</a> doesn't seem to contain any libraries that would parse raw GraphQL queries. In general it looks like devs only write GraphQL servers in Java but not clients.</p>\n<p>What are my options aside from just treating the GraphQL query as an unparsed text file using something like <code>Scanner</code>?</p>\n<p>(Disclaimer: I'm fairly new to Java.)</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":1101161,"reputation":119804,"user_id":1093528,"accept_rate":65,"display_name":"fge"},"score":0,"creation_date":1371318656,"post_id":17126157,"comment_id":24782726,"body_markdown":"This is a design question here. You should change your diagram: make a base `ReadQuery` and `WriteQuery` inheriting `Query`, and add a `Criterion` API which you would use only on queries which need it. No need for traits ;)","body":"This is a design question here. You should change your diagram: make a base <code>ReadQuery</code> and <code>WriteQuery</code> inheriting <code>Query</code>, and add a <code>Criterion</code> API which you would use only on queries which need it. No need for traits ;)"},{"owner":{"account_id":376650,"reputation":10428,"user_id":728241,"accept_rate":71,"display_name":"David"},"score":0,"creation_date":1371318778,"post_id":17126157,"comment_id":24782754,"body_markdown":"so the `Criterion` API would be added to Query?","body":"so the <code>Criterion</code> API would be added to Query?"},{"owner":{"account_id":1101161,"reputation":119804,"user_id":1093528,"accept_rate":65,"display_name":"fge"},"score":0,"creation_date":1371319213,"post_id":17126157,"comment_id":24782868,"body_markdown":"No, it would be another API; you&#39;d add the criterion to the query before you build it. Something like `Query.newSelectQuery().onTable(table).usingCriterion(criterion).build()`","body":"No, it would be another API; you&#39;d add the criterion to the query before you build it. Something like <code>Query.newSelectQuery().onTable(table).usingCriterion(criteri&zwnj;&#8203;on).build()</code>"},{"owner":{"account_id":11944756,"reputation":7873,"user_id":8740349,"display_name":"Top-Master"},"score":0,"creation_date":1654099468,"post_id":17126157,"comment_id":128012535,"body_markdown":"Does this answer your question? [java traits or mixins pattern?](https://stackoverflow.com/questions/263121/java-traits-or-mixins-pattern)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/263121/java-traits-or-mixins-pattern\">java traits or mixins pattern?</a>"}],"answers":[{"tags":[],"owner":{"account_id":1379314,"reputation":3624,"user_id":1312674,"accept_rate":67,"display_name":"rcgeorge23"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1371317853,"creation_date":1371317853,"answer_id":17126215,"question_id":17126157,"body_markdown":"If InsertQuery and UpdateQuery have behaviour in common, can&#39;t you just create an abstract class that contains the common stuff and have InsertQuery and UpdateQuery extend it? The abstract class would extend SelectiveQuery so InsertQuery and UpdateQuery would inherit all of the other behaviour too.\r\n\r\nHowever... Perhaps you could take a look at an ORM framework like Hibernate. No need to reinvent the wheel etc.","title":"Something similar to PHP traits in Java?","body":"<p>If InsertQuery and UpdateQuery have behaviour in common, can't you just create an abstract class that contains the common stuff and have InsertQuery and UpdateQuery extend it? The abstract class would extend SelectiveQuery so InsertQuery and UpdateQuery would inherit all of the other behaviour too.</p>\n\n<p>However... Perhaps you could take a look at an ORM framework like Hibernate. No need to reinvent the wheel etc.</p>\n"},{"tags":[],"owner":{"account_id":195691,"reputation":28439,"user_id":438742,"accept_rate":73,"display_name":"kan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1371318287,"creation_date":1371318287,"answer_id":17126260,"question_id":17126157,"body_markdown":"You could replace inheritance by mixin, i.e. introduce another class such as Columns, InsertQuery and SelectiveQuery will have the class as a member, so the syntax will be `insertQuery.columns().setValue(&quot;aColumn&quot;, &quot;aValue&quot;)`. Also, have a look here: [querydsl][1].\r\n\r\n\r\n  [1]: http://www.querydsl.com/","title":"Something similar to PHP traits in Java?","body":"<p>You could replace inheritance by mixin, i.e. introduce another class such as Columns, InsertQuery and SelectiveQuery will have the class as a member, so the syntax will be <code>insertQuery.columns().setValue(\"aColumn\", \"aValue\")</code>. Also, have a look here: <a href=\"http://www.querydsl.com/\" rel=\"nofollow\">querydsl</a>.</p>\n"},{"tags":[],"owner":{"account_id":11944756,"reputation":7873,"user_id":8740349,"display_name":"Top-Master"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1654099564,"creation_date":1654099564,"answer_id":72464970,"question_id":17126157,"body_markdown":"[Source](https://stackoverflow.com/a/263311/8740349);\r\n\r\nIs the object-purist stirring in you today?\r\n\r\nThink you could do with a little _composite oriented programming?_\r\n\r\nThen you, sir, are looking for [Apache Polygene](http://polygene.apache.org/) (formerly named Qi4J, then it renamed to Zest and/or Apache-Zest) ;)\r\n\r\n**Update 2022;** It&#39;s discontinued currently, but useful anyway.","title":"Something similar to PHP traits in Java?","body":"<p><a href=\"https://stackoverflow.com/a/263311/8740349\">Source</a>;</p>\n<p>Is the object-purist stirring in you today?</p>\n<p>Think you could do with a little <em>composite oriented programming?</em></p>\n<p>Then you, sir, are looking for <a href=\"http://polygene.apache.org/\" rel=\"nofollow noreferrer\">Apache Polygene</a> (formerly named Qi4J, then it renamed to Zest and/or Apache-Zest) ;)</p>\n<p><strong>Update 2022;</strong> It's discontinued currently, but useful anyway.</p>\n"}],"owner":{"account_id":376650,"reputation":10428,"user_id":728241,"accept_rate":71,"display_name":"David"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2059,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1654099564,"creation_date":1371317435,"question_id":17126157,"body_markdown":"I&#39;m trying to create a hierarchy of `SQL` query objects. My base class will be named Query. It will have methods like `Query.setTable(&quot;tableName&quot;)`.\r\n\r\nThen I plan on having a `SelectiveQuery` object extend the Query object. This object will have methods like `SelectiveQuery.where(&quot;aColumn&quot;,&quot;=&quot;,&quot;123&quot;)`.\r\n\r\nThen I plan on having `UpdateQuery`, `SelectQuery`, `DeleteQuery`, and `CountQuery` all extend `SelectiveQuery`. My dilemma arises when I try to figure out how to create the `InsertQuery` class. I want it to extend Query but not extend `SelectiveQuery`.\r\n\r\nThe kicker is that `InsertQuery` and `UpdateQuery` will share some of the same methods, such as `setValue(&quot;aColumn&quot;,&quot;aValue&quot;)`. I&#39;d prefer to only maintain the methods `UpdateQuery` and `InsertQuery` have in common in one location. How do I tackle this? If I were programming in `PHP`. I think I&#39;d use Traits to do this.\r\n\r\n![enter image description here][1]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/NHeOT.png","title":"Something similar to PHP traits in Java?","body":"<p>I'm trying to create a hierarchy of <code>SQL</code> query objects. My base class will be named Query. It will have methods like <code>Query.setTable(\"tableName\")</code>.</p>\n\n<p>Then I plan on having a <code>SelectiveQuery</code> object extend the Query object. This object will have methods like <code>SelectiveQuery.where(\"aColumn\",\"=\",\"123\")</code>.</p>\n\n<p>Then I plan on having <code>UpdateQuery</code>, <code>SelectQuery</code>, <code>DeleteQuery</code>, and <code>CountQuery</code> all extend <code>SelectiveQuery</code>. My dilemma arises when I try to figure out how to create the <code>InsertQuery</code> class. I want it to extend Query but not extend <code>SelectiveQuery</code>.</p>\n\n<p>The kicker is that <code>InsertQuery</code> and <code>UpdateQuery</code> will share some of the same methods, such as <code>setValue(\"aColumn\",\"aValue\")</code>. I'd prefer to only maintain the methods <code>UpdateQuery</code> and <code>InsertQuery</code> have in common in one location. How do I tackle this? If I were programming in <code>PHP</code>. I think I'd use Traits to do this.</p>\n\n<p><img src=\"https://i.stack.imgur.com/NHeOT.png\" alt=\"enter image description here\"></p>\n"},{"tags":["java","mixins","traits"],"answers":[{"tags":[],"owner":{"account_id":1636,"reputation":20746,"user_id":2197,"accept_rate":76,"display_name":"David Koelle"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1225827854,"creation_date":1225827854,"answer_id":263174,"question_id":263121,"body_markdown":"Java&#39;s answer to multiple inheritance is the ability to implement multiple interfaces.  Of course, this means you&#39;ll get the method declarations, but not the logic.\r\n\r\nYou could try emulating mixins by composition: your Java class could define member variables that represent other classes that perform some common business logic.\r\n\r\nIn designing Java classes, I have not found the lack of C++ style multiple inheritance to inhibit the design of my architecture.  You will find a way to achieve what you want to do.","title":"java traits or mixins pattern?","body":"<p>Java's answer to multiple inheritance is the ability to implement multiple interfaces.  Of course, this means you'll get the method declarations, but not the logic.</p>\n\n<p>You could try emulating mixins by composition: your Java class could define member variables that represent other classes that perform some common business logic.</p>\n\n<p>In designing Java classes, I have not found the lack of C++ style multiple inheritance to inhibit the design of my architecture.  You will find a way to achieve what you want to do.</p>\n"},{"tags":[],"owner":{"account_id":3393,"reputation":60796,"user_id":4893,"accept_rate":64,"display_name":"sblundy"},"down_vote_count":1,"up_vote_count":19,"is_accepted":false,"score":18,"last_activity_date":1225827931,"creation_date":1225827931,"answer_id":263178,"question_id":263121,"body_markdown":"Not the way you want to do it. [Effective Java][1] recommends that you &quot;Favor composition over inheritance&quot;. Meaning you move the common logic to other classes and delegate. This is how you get around the lack of multiple inheritance in java. \r\n\r\n\r\n  [1]: http://www.amazon.com/Effective-Java-2nd-Joshua-Bloch/dp/0321356683/ref=sr_1_1?ie=UTF8&amp;s=books&amp;qid=1225828037&amp;sr=8-1","title":"java traits or mixins pattern?","body":"<p>Not the way you want to do it. <a href=\"https://rads.stackoverflow.com/amzn/click/com/0321356683\" rel=\"noreferrer\" rel=\"nofollow noreferrer\">Effective Java</a> recommends that you \"Favor composition over inheritance\". Meaning you move the common logic to other classes and delegate. This is how you get around the lack of multiple inheritance in java. </p>\n"},{"tags":[],"owner":{"account_id":4169,"reputation":24716,"user_id":6180,"accept_rate":83,"display_name":"Alex B"},"down_vote_count":0,"up_vote_count":13,"is_accepted":true,"score":13,"last_activity_date":1396440575,"creation_date":1225828046,"answer_id":263184,"question_id":263121,"body_markdown":"I would encapsulate all of the business logic into a new class `BusinessLogic` and have each class that needs `BusinessLogic` make calls to the class.   If you need a single rooted heirarchy for your classes that make calls to `BusinessLogic`, you&#39;ll have to create an interface as well (`BusinessLogicInterface`?)\r\n\r\nIn pseudo-code:\r\n\r\n    \r\n    interface BusinessLogicInterace\r\n    {\r\n        void method1();\r\n        void method2();\r\n    }\r\n\r\n    class BusinessLogic implements BusinessLogicInterface\r\n    {\r\n        void method1() { ... }\r\n        void method2() { ... }\r\n    }\r\n\r\n    class User \r\n        extends OtherClass \r\n        implements BusinessLogicInterface\r\n    {\r\n        BusinessLogic logic = new BusinessLogic();\r\n        \r\n        @Override\r\n        void method1() { logic.method1(); }\r\n\r\n        @Override\r\n        void method2() { logic.method2(); }\r\n    }\r\n\r\nThis isn&#39;t the prettiest implementation to work around a lack of multiple inheritance and it becomes quite cumbersome when the interface has a lot of methods.  Most likely, you&#39;ll want to try and redesign your code to avoid needing mixins.","title":"java traits or mixins pattern?","body":"<p>I would encapsulate all of the business logic into a new class <code>BusinessLogic</code> and have each class that needs <code>BusinessLogic</code> make calls to the class.   If you need a single rooted heirarchy for your classes that make calls to <code>BusinessLogic</code>, you'll have to create an interface as well (<code>BusinessLogicInterface</code>?)</p>\n\n<p>In pseudo-code:</p>\n\n<pre><code>interface BusinessLogicInterace\n{\n    void method1();\n    void method2();\n}\n\nclass BusinessLogic implements BusinessLogicInterface\n{\n    void method1() { ... }\n    void method2() { ... }\n}\n\nclass User \n    extends OtherClass \n    implements BusinessLogicInterface\n{\n    BusinessLogic logic = new BusinessLogic();\n\n    @Override\n    void method1() { logic.method1(); }\n\n    @Override\n    void method2() { logic.method2(); }\n}\n</code></pre>\n\n<p>This isn't the prettiest implementation to work around a lack of multiple inheritance and it becomes quite cumbersome when the interface has a lot of methods.  Most likely, you'll want to try and redesign your code to avoid needing mixins.</p>\n"},{"tags":[],"owner":{"account_id":7599,"reputation":8632,"user_id":13251,"accept_rate":100,"display_name":"Chris Vest"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1654099320,"creation_date":1225830395,"answer_id":263311,"question_id":263121,"body_markdown":"Is the object-purist stirring in you today?\r\n\r\nThink you could do with a little _composite oriented programming?_\r\n\r\nThen you, sir, are looking for [Apache Polygene](http://polygene.apache.org/) (formerly named Qi4J, then it renamed to Zest and/or Apache-Zest) ;)\r\n\r\n**Update 2022;** It&#39;s discontinued currently, but useful anyway.","title":"java traits or mixins pattern?","body":"<p>Is the object-purist stirring in you today?</p>\n<p>Think you could do with a little <em>composite oriented programming?</em></p>\n<p>Then you, sir, are looking for <a href=\"http://polygene.apache.org/\" rel=\"nofollow noreferrer\">Apache Polygene</a> (formerly named Qi4J, then it renamed to Zest and/or Apache-Zest) ;)</p>\n<p><strong>Update 2022;</strong> It's discontinued currently, but useful anyway.</p>\n"},{"tags":[],"owner":{"account_id":658573,"reputation":31,"user_id":476103,"display_name":"Pablo La Greca"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1287078495,"creation_date":1287078495,"answer_id":3936001,"question_id":263121,"body_markdown":"QI4J allows you to use mixins","title":"java traits or mixins pattern?","body":"<p>QI4J allows you to use mixins</p>\n"},{"tags":[],"owner":{"account_id":989245,"reputation":166,"user_id":1006977,"display_name":"x_rex"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1319461466,"creation_date":1319195903,"answer_id":7848653,"question_id":263121,"body_markdown":"Implementing simple mixin/traits support in java using CGLib/javassit is quite easy.\r\nYou can take a look for instance [here](http://justonjava.blogspot.com/2011/10/mixins-aka-traits-implementation-in.html) for small example.\r\nMore complete, ready to use solution might be found: [here](http://insightfullogic.com/blog/2011/sep/16/multiple-inheritance/)","title":"java traits or mixins pattern?","body":"<p>Implementing simple mixin/traits support in java using CGLib/javassit is quite easy.\nYou can take a look for instance <a href=\"http://justonjava.blogspot.com/2011/10/mixins-aka-traits-implementation-in.html\" rel=\"nofollow\">here</a> for small example.\nMore complete, ready to use solution might be found: <a href=\"http://insightfullogic.com/blog/2011/sep/16/multiple-inheritance/\" rel=\"nofollow\">here</a></p>\n"},{"tags":[],"owner":{"account_id":291407,"reputation":1525,"user_id":593533,"accept_rate":17,"display_name":"Henno Vermeulen"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1367498194,"creation_date":1367495399,"answer_id":16337353,"question_id":263121,"body_markdown":"You can exploit the fact that interfaces allow nested classes (automatically public static) to keep the default implementation of the interface methods encapsulated within the interface itself. I.e. move the BusinessLogic class of Alex B&#39;s example inside the interface.\r\n\r\nThis is similar to the way Scala generates the JVM code for traits as explained here https://stackoverflow.com/questions/2557303/how-are-scala-traits-compiled-into-java-bytecode\r\n\r\nWhen doing this the example becomes:\r\n\r\n    interface BusinessLogicInterface {\r\n        void method0();\r\n\r\n        class DefaultImpl {\r\n            private DefaultImpl() {\r\n            }\r\n\r\n            public static void method1(BusinessLogicInterface self) { ... }\r\n            public static void method2(BusinessLogicInterface self) { ... }\r\n        }\r\n\r\n        void method1();\r\n        void method2();\r\n    }\r\n\r\n    class User extends OtherClass implements BusinessLogicInterface {\r\n        @Override\r\n        void method0() { ... }\r\n\r\n        @Override\r\n        void method1() { BusinessLogic.defaultImpl.method1(this); }\r\n\r\n        @Override\r\n        void method2() { BusinessLogic.defaultImpl.method2(this); }\r\n    }\r\n\r\nNote that we pass an object of the interface type as the &quot;self&quot; parameter. This means the business logic  can use other abstract methods (method0). This can be very useful for creating a trait with abstract methods that are all orthogonal to each other and utility &quot;extension&quot; methods that may be implemented in terms of these orthogonal methods.\r\n\r\nThe drawback is that each interface must copy/paste the boilerplate delegation code. Another often used pattern in Java without this drawback (but with less cohesion and less OO way to call the methods) is to create a class with the plural name as the interface containing the static methods, this is used in the Collections utility class.\r\n","title":"java traits or mixins pattern?","body":"<p>You can exploit the fact that interfaces allow nested classes (automatically public static) to keep the default implementation of the interface methods encapsulated within the interface itself. I.e. move the BusinessLogic class of Alex B's example inside the interface.</p>\n\n<p>This is similar to the way Scala generates the JVM code for traits as explained here <a href=\"https://stackoverflow.com/questions/2557303/how-are-scala-traits-compiled-into-java-bytecode\">How are Scala traits compiled into Java bytecode?</a></p>\n\n<p>When doing this the example becomes:</p>\n\n<pre><code>interface BusinessLogicInterface {\n    void method0();\n\n    class DefaultImpl {\n        private DefaultImpl() {\n        }\n\n        public static void method1(BusinessLogicInterface self) { ... }\n        public static void method2(BusinessLogicInterface self) { ... }\n    }\n\n    void method1();\n    void method2();\n}\n\nclass User extends OtherClass implements BusinessLogicInterface {\n    @Override\n    void method0() { ... }\n\n    @Override\n    void method1() { BusinessLogic.defaultImpl.method1(this); }\n\n    @Override\n    void method2() { BusinessLogic.defaultImpl.method2(this); }\n}\n</code></pre>\n\n<p>Note that we pass an object of the interface type as the \"self\" parameter. This means the business logic  can use other abstract methods (method0). This can be very useful for creating a trait with abstract methods that are all orthogonal to each other and utility \"extension\" methods that may be implemented in terms of these orthogonal methods.</p>\n\n<p>The drawback is that each interface must copy/paste the boilerplate delegation code. Another often used pattern in Java without this drawback (but with less cohesion and less OO way to call the methods) is to create a class with the plural name as the interface containing the static methods, this is used in the Collections utility class.</p>\n"},{"tags":[],"owner":{"account_id":4251124,"reputation":101,"user_id":3478180,"display_name":"user3478180"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1431941826,"creation_date":1431941826,"answer_id":30299686,"question_id":263121,"body_markdown":"As of Java-8, default interface methods were added. This, together with multiple inheritance of interfaces in Java should allow some sort of mixin. Clearly the interfaces have to operate independently. So, there will be significant limitations. ","title":"java traits or mixins pattern?","body":"<p>As of Java-8, default interface methods were added. This, together with multiple inheritance of interfaces in Java should allow some sort of mixin. Clearly the interfaces have to operate independently. So, there will be significant limitations. </p>\n"}],"owner":{"account_id":10831,"reputation":7092,"user_id":20641,"accept_rate":49,"display_name":"joshjdevl"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":21323,"favorite_count":0,"down_vote_count":1,"up_vote_count":22,"accepted_answer_id":263184,"answer_count":8,"score":21,"last_activity_date":1654099320,"creation_date":1225827364,"question_id":263121,"body_markdown":"Is there a way to emulate mixins or traits in java? basically, I need a way to do multiple inheritance so I can add common business logic to several classes","title":"java traits or mixins pattern?","body":"<p>Is there a way to emulate mixins or traits in java? basically, I need a way to do multiple inheritance so I can add common business logic to several classes</p>\n"},{"tags":["java","mysql","jdbc"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":1,"creation_date":1654038327,"post_id":72454597,"comment_id":127996035,"body_markdown":"Please don&#39;t post images of text. Adding the DDL of your tables to the question would be helpful. For instance, do you have an index on the `handle` column? That may help.","body":"Please don&#39;t post images of text. Adding the DDL of your tables to the question would be helpful. For instance, do you have an index on the <code>handle</code> column? That may help."},{"owner":{"account_id":24906391,"reputation":15,"user_id":18776405,"display_name":"Christian Wagner"},"score":0,"creation_date":1654044549,"post_id":72454597,"comment_id":127996881,"body_markdown":"I have provided the DDL requested in text format. an example of an entry has been added for context as well.","body":"I have provided the DDL requested in text format. an example of an entry has been added for context as well."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1654046129,"post_id":72454597,"comment_id":127997063,"body_markdown":"You can create your prepared statements before your loop, just after you create the connection. Then where you close your statements at present, just close the ResultSets instead. Not certain how much that will help.","body":"You can create your prepared statements before your loop, just after you create the connection. Then where you close your statements at present, just close the ResultSets instead. Not certain how much that will help."},{"owner":{"account_id":24906391,"reputation":15,"user_id":18776405,"display_name":"Christian Wagner"},"score":0,"creation_date":1654050388,"post_id":72454597,"comment_id":127997643,"body_markdown":"Hello. I dont know what i did, i think i accidentally had 2 connections instead of 1 like i thought and fixed that, but i got the time down to 6 seconds. Moving prepared statements and closing resultsets did not noticeably impact time, but may have helped in the future when the time is higher(i only measure seconds currently). Is 6 seconds normal for a SQL query time, or is that still long for such a small database? I feel like it should be doing it almost instantly, but i do not know if thats a based assumption or not.","body":"Hello. I dont know what i did, i think i accidentally had 2 connections instead of 1 like i thought and fixed that, but i got the time down to 6 seconds. Moving prepared statements and closing resultsets did not noticeably impact time, but may have helped in the future when the time is higher(i only measure seconds currently). Is 6 seconds normal for a SQL query time, or is that still long for such a small database? I feel like it should be doing it almost instantly, but i do not know if thats a based assumption or not."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1654052871,"post_id":72454597,"comment_id":127997960,"body_markdown":"`passToSQL` has 85 items in it?","body":"<code>passToSQL</code> has 85 items in it?"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1654053139,"post_id":72454597,"comment_id":127997989,"body_markdown":"Another small improvement is to remove the SELECT EXISTS... query and just do the SELECT VariantInventoryQuantity... query. If `handleqtyrs.next()` is false, that means that the handle didn&#39;t exist, so you kill two birds with one stone.","body":"Another small improvement is to remove the SELECT EXISTS... query and just do the SELECT VariantInventoryQuantity... query. If <code>handleqtyrs.next()</code> is false, that means that the handle didn&#39;t exist, so you kill two birds with one stone."},{"owner":{"account_id":24906391,"reputation":15,"user_id":18776405,"display_name":"Christian Wagner"},"score":0,"creation_date":1654055193,"post_id":72454597,"comment_id":127998254,"body_markdown":"yes it has about 80 items in it.","body":"yes it has about 80 items in it."}],"answers":[{"tags":[],"owner":{"account_id":24861963,"reputation":63,"user_id":18737616,"display_name":"Tayeb HAMDAOUI"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1654078498,"creation_date":1654036323,"answer_id":72454728,"question_id":72454597,"body_markdown":"Try using one single connection, opening a lot of connection is resource consuming see this post [stack post][1], at least close the opened connections.\r\n\r\nAlso try to separate your code into functions, example update, retrieve, add must have their own functions.\r\n\r\n\r\nEDIT: \r\n\r\n        public static void SQL() {\r\n        int handleqty = -1;\r\n        String url = &quot;jdbc:mysql://MYURL:3306/MYDB&quot;;\r\n        String username = &quot;username&quot;;\r\n        String password = &quot;password&quot;;\r\n    \r\n        try{\r\n            Connection conn1 = DriverManager.getConnection(url, username, password);\r\n            String cardinfo = &quot;&quot;;\r\n            String Handle = &quot;&quot;;\r\n            String Title = &quot;&quot;;\r\n            String Vendor = &quot;&quot;;\r\n            String Tags = &quot;&quot;;\r\n            String Published = &quot;&quot;;\r\n            String Option1Name = &quot;&quot;;\r\n            String Option1Value = &quot;&quot;;\r\n            int VariantGrams = &quot;&quot;;\r\n            String VariantInventoryTracker = &quot;&quot;;\r\n            String VariantInventoryQty = &quot;&quot;;\r\n            String VariantInventoryPolicy = &quot;&quot;;\r\n            String VariantFufillmentService = &quot;&quot;;\r\n            float VariantPrice =  &quot;&quot;;\r\n            String VariantRequiresShipping = &quot;&quot;;\r\n            String VariantTaxable = &quot;&quot;;\r\n            String ImgSrcfront = &quot;&quot;;\r\n            String ImgSrcback = &quot;&quot;;\r\n            String GiftCard = &quot;&quot;;\r\n            String Status = &quot;&quot;;\r\n            String Description = &quot;&quot;;\r\n            for(Entry&lt;String, String&gt; entry: passToSQL.entrySet()) {\r\n                \r\n                //System.out.println(entry);\r\n    \r\n                cardinfo = entry.getValue();\r\n                \r\n                Handle = cardinfo.split(&quot;,&quot;)[0];\r\n                Title = cardinfo.split(&quot;,&quot;)[1];\r\n                Vendor = cardinfo.split(&quot;,&quot;)[2];\r\n                Tags = cardinfo.split(&quot;,&quot;)[3];\r\n                Published = cardinfo.split(&quot;,&quot;)[4];\r\n                Option1Name = cardinfo.split(&quot;,&quot;)[5];\r\n                Option1Value = cardinfo.split(&quot;,&quot;)[6];\r\n                VariantGrams = Integer.parseInt(cardinfo.split(&quot;,&quot;)[7]);\r\n                VariantInventoryTracker = cardinfo.split(&quot;,&quot;)[8];\r\n                VariantInventoryQty = cardinfo.split(&quot;,&quot;)[9];\r\n                VariantInventoryPolicy = cardinfo.split(&quot;,&quot;)[10];\r\n                VariantFufillmentService = cardinfo.split(&quot;,&quot;)[11];\r\n                VariantPrice =  Float.parseFloat(cardinfo.split(&quot;,&quot;)[12]);\r\n                VariantRequiresShipping = cardinfo.split(&quot;,&quot;)[13];\r\n                VariantTaxable = cardinfo.split(&quot;,&quot;)[14];\r\n                ImgSrcfront = cardinfo.split(&quot;,&quot;)[15];\r\n                ImgSrcback = cardinfo.split(&quot;,&quot;)[16];\r\n                GiftCard = cardinfo.split(&quot;,&quot;)[17];\r\n                Status = cardinfo.split(&quot;,&quot;)[18];\r\n                Description = cardinfo.split(&quot;,&quot;)[19];\r\n                \r\n                String checkexists = &quot;SELECT EXISTS(SELECT 1 FROM MasterCardRecord WHERE Handle = ? LIMIT 1)&quot;;\r\n                PreparedStatement statement1 = conn1.prepareStatement(checkexists);\r\n                statement1.setString(1, Handle);\r\n                ResultSet exists = statement1.executeQuery();\r\n                exists.next();\r\n                //System.out.println(exists.getString(1));\r\n                boolean handleexists = false;\r\n                if(exists.getString(1).equals(&quot;1&quot;)) {\r\n                    handleexists = true;\r\n                    \r\n    \r\n    //REMOVED: Connection conn2 = DriverManager.getConnection(url, username,    password);\r\n    \r\n                    String sql2 = &quot;SELECT `Variant Inventory Qty` FROM MasterCardRecord WHERE Handle = ? LIMIT 1&quot;;\r\n                    PreparedStatement getqty = conn1.prepareStatement(sql2);\r\n                    getqty.setString(1, Handle);\r\n                    ResultSet handleqtyrs = getqty.executeQuery();\r\n                    handleqtyrs.next();\r\n                    handleqty = handleqtyrs.getInt(1);\r\n                    \r\n                }\r\n                if(exists.getString(1).equals(&quot;0&quot;)) {\r\n                    handleexists = false;\r\n                }\r\n                \r\n                statement1.close();\r\n               // REMOVED: conn1.close();\r\n                \r\n                //NEW CODE --------------------------------------------------------------------------------\r\n                if (handleexists == true) {\r\n                    //REMOVED: Connection connInvUpdate= DriverManager.getConnection(url, username, password);\r\n                    String InvUpdate = &quot;INSERT INTO InventoryUpdate (Handle, `Variant Inventory Qty`) VALUES (?,?) ON DUPLICATE KEY UPDATE `Variant Inventory Qty` = ?&quot;;\r\n                    PreparedStatement InvStatement = conn1.prepareStatement(InvUpdate);\r\n                    InvStatement.setString(1,Handle);\r\n                    InvStatement.setInt(2, handleqty + 1);\r\n                    InvStatement.setInt(3, handleqty + 1);\r\n                    int updatedInv = InvStatement.executeUpdate();\r\n                    //REMOVED: connInvUpdate.close();\r\n                    InvStatement.close();\r\n                \r\n                \r\n                \r\n                \r\n                \r\n                }\r\n                //-----------------------------------------------------------------------------------------\r\n                \r\n                if(handleexists == false) {\r\n                    // Handle doesnt exist within database\r\n                     //REMOVED: Connection conn3 = DriverManager.getConnection(url, username, password);\r\n                     String sql = &quot;INSERT INTO MasterCardRecord (Handle, Title, Vendor, Tags, Published, Option1Name, Option1Value, VariantGrams, `Variant Inventory Tracker`, `Variant Inventory Qty`, `Variant Inventory Policy`, `Variant Fufillment Service`, `Variant Price`, `Variant Requires Shipping`, `Variant Taxable`, `Img Src(front)`, `Img Src(back)`, `Gift Card`, Status, Description) VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)&quot;;\r\n                     PreparedStatement statement2 = conn1.prepareStatement(sql);\r\n                     statement2.setString(1, Handle);\r\n                     statement2.setString(2, Title);\r\n                     statement2.setString(3, Vendor);\r\n                     statement2.setString(4, Tags);\r\n                     statement2.setString(5, Published);\r\n                     statement2.setString(6, Option1Name);\r\n                     statement2.setString(7, Option1Value);\r\n                     statement2.setInt(8, VariantGrams);\r\n                     statement2.setString(9, VariantInventoryTracker);\r\n                     statement2.setString(10, VariantInventoryQty);\r\n                     statement2.setString(11, VariantInventoryPolicy);\r\n                     statement2.setString(12, VariantFufillmentService);\r\n                     statement2.setFloat(13, VariantPrice);\r\n                     statement2.setString(14, VariantRequiresShipping);\r\n                     statement2.setString(15, VariantTaxable);\r\n                     statement2.setString(16, ImgSrcfront);\r\n                     statement2.setString(17, ImgSrcback);\r\n                     statement2.setString(18, GiftCard);\r\n                     statement2.setString(19, Status);\r\n                     statement2.setString(20, Description);\r\n                      \r\n                     int rows = statement2.executeUpdate();\r\n                     if (rows &gt; 0 &amp;&amp; showupdates == true) {\r\n                         System.out.println(&quot;Item Added: &quot; + Handle);\r\n                     }\r\n                     statement2.close();\r\n                     //REMOVED: conn3.close();\r\n                     \r\n                     // Put into AddNewCards as well, for export and adding ONLY those cards that dont exist yet.\r\n                     //-----&gt; remove thisConnection AddNewCardConn = DriverManager.getConnection(url, username, password);\r\n                     String AddNewCardSQL = &quot;INSERT INTO AddNewCards (Handle, Title, Vendor, Tags, Published, Option1Name, Option1Value, VariantGrams, `Variant Inventory Tracker`, `Variant Inventory Qty`, `Variant Inventory Policy`, `Variant Fufillment Service`, `Variant Price`, `Variant Requires Shipping`, `Variant Taxable`, `Img Src(front)`, `Img Src(back)`, `Gift Card`, Status, Description) VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)&quot;;\r\n                     PreparedStatement AddNewCardStatement = conn1.prepareStatement(AddNewCardSQL);\r\n                     AddNewCardStatement.setString(1, Handle);\r\n                     AddNewCardStatement.setString(2, Title);\r\n                     AddNewCardStatement.setString(3, Vendor);\r\n                     AddNewCardStatement.setString(4, Tags);\r\n                     AddNewCardStatement.setString(5, Published);\r\n                     AddNewCardStatement.setString(6, Option1Name);\r\n                     AddNewCardStatement.setString(7, Option1Value);\r\n                     AddNewCardStatement.setInt(8, VariantGrams);\r\n                     AddNewCardStatement.setString(9, VariantInventoryTracker);\r\n                     AddNewCardStatement.setString(10, VariantInventoryQty);\r\n                     AddNewCardStatement.setString(11, VariantInventoryPolicy);\r\n                     AddNewCardStatement.setString(12, VariantFufillmentService);\r\n                     AddNewCardStatement.setFloat(13, VariantPrice);\r\n                     AddNewCardStatement.setString(14, VariantRequiresShipping);\r\n                     AddNewCardStatement.setString(15, VariantTaxable);\r\n                     AddNewCardStatement.setString(16, ImgSrcfront);\r\n                     AddNewCardStatement.setString(17, ImgSrcback);\r\n                     AddNewCardStatement.setString(18, GiftCard);\r\n                     AddNewCardStatement.setString(19, Status);\r\n                     AddNewCardStatement.setString(20, Description);\r\n                     \r\n                     \r\n                     int AddCardRows = AddNewCardStatement.executeUpdate();\r\n                     AddNewCardStatement.close();\r\n                     //REMOVED: AddNewCardConn.close();\r\n                     \r\n                     \r\n                     \r\n                }\r\n                if (handleexists == true) {\r\n                    // Handle DOES exist within database\r\n                     //REMOVED: Connection conn3 = DriverManager.getConnection(url, username, password);\r\n                     String sql = &quot;UPDATE MasterCardRecord SET `Variant Inventory Qty` = ? WHERE Handle = ?&quot;;\r\n                     PreparedStatement statement2 = conn3.prepareStatement(sql);\r\n                     statement2.setInt(1,handleqty + 1);\r\n                     statement2.setString(2, Handle);\r\n                     int rows = statement2.executeUpdate();\r\n                     if (rows &gt; 0 &amp;&amp; showupdates == true) {\r\n                         System.out.println(&quot;Inventory of: &quot; + Handle + &quot;has been updated from &quot; + handleqty + &quot; to %d&quot;.formatted(handleqty + 1));\r\n                     }\r\n                     statement2.close();\r\n                     //REMOVED: conn3.close();\r\n                }            \r\n           \r\n            }\r\n            }\r\n            catch(Exception e){\r\n                System.out.println(&quot;Database connection failed!\\n&quot; + e);\r\n            }\r\n    \r\n        }\r\n    //ADDED: \r\n    conn1.close();\r\n    \r\n    }\r\n\r\n  [1]: https://stackoverflow.com/questions/31532225/is-it-better-to-have-one-always-open-connection-or-is-it-better-to-establish-a-c","title":"Is there a way to speed up my MySQL execution time?","body":"<p>Try using one single connection, opening a lot of connection is resource consuming see this post <a href=\"https://stackoverflow.com/questions/31532225/is-it-better-to-have-one-always-open-connection-or-is-it-better-to-establish-a-c\">stack post</a>, at least close the opened connections.</p>\n<p>Also try to separate your code into functions, example update, retrieve, add must have their own functions.</p>\n<p>EDIT:</p>\n<pre><code>    public static void SQL() {\n    int handleqty = -1;\n    String url = &quot;jdbc:mysql://MYURL:3306/MYDB&quot;;\n    String username = &quot;username&quot;;\n    String password = &quot;password&quot;;\n\n    try{\n        Connection conn1 = DriverManager.getConnection(url, username, password);\n        String cardinfo = &quot;&quot;;\n        String Handle = &quot;&quot;;\n        String Title = &quot;&quot;;\n        String Vendor = &quot;&quot;;\n        String Tags = &quot;&quot;;\n        String Published = &quot;&quot;;\n        String Option1Name = &quot;&quot;;\n        String Option1Value = &quot;&quot;;\n        int VariantGrams = &quot;&quot;;\n        String VariantInventoryTracker = &quot;&quot;;\n        String VariantInventoryQty = &quot;&quot;;\n        String VariantInventoryPolicy = &quot;&quot;;\n        String VariantFufillmentService = &quot;&quot;;\n        float VariantPrice =  &quot;&quot;;\n        String VariantRequiresShipping = &quot;&quot;;\n        String VariantTaxable = &quot;&quot;;\n        String ImgSrcfront = &quot;&quot;;\n        String ImgSrcback = &quot;&quot;;\n        String GiftCard = &quot;&quot;;\n        String Status = &quot;&quot;;\n        String Description = &quot;&quot;;\n        for(Entry&lt;String, String&gt; entry: passToSQL.entrySet()) {\n            \n            //System.out.println(entry);\n\n            cardinfo = entry.getValue();\n            \n            Handle = cardinfo.split(&quot;,&quot;)[0];\n            Title = cardinfo.split(&quot;,&quot;)[1];\n            Vendor = cardinfo.split(&quot;,&quot;)[2];\n            Tags = cardinfo.split(&quot;,&quot;)[3];\n            Published = cardinfo.split(&quot;,&quot;)[4];\n            Option1Name = cardinfo.split(&quot;,&quot;)[5];\n            Option1Value = cardinfo.split(&quot;,&quot;)[6];\n            VariantGrams = Integer.parseInt(cardinfo.split(&quot;,&quot;)[7]);\n            VariantInventoryTracker = cardinfo.split(&quot;,&quot;)[8];\n            VariantInventoryQty = cardinfo.split(&quot;,&quot;)[9];\n            VariantInventoryPolicy = cardinfo.split(&quot;,&quot;)[10];\n            VariantFufillmentService = cardinfo.split(&quot;,&quot;)[11];\n            VariantPrice =  Float.parseFloat(cardinfo.split(&quot;,&quot;)[12]);\n            VariantRequiresShipping = cardinfo.split(&quot;,&quot;)[13];\n            VariantTaxable = cardinfo.split(&quot;,&quot;)[14];\n            ImgSrcfront = cardinfo.split(&quot;,&quot;)[15];\n            ImgSrcback = cardinfo.split(&quot;,&quot;)[16];\n            GiftCard = cardinfo.split(&quot;,&quot;)[17];\n            Status = cardinfo.split(&quot;,&quot;)[18];\n            Description = cardinfo.split(&quot;,&quot;)[19];\n            \n            String checkexists = &quot;SELECT EXISTS(SELECT 1 FROM MasterCardRecord WHERE Handle = ? LIMIT 1)&quot;;\n            PreparedStatement statement1 = conn1.prepareStatement(checkexists);\n            statement1.setString(1, Handle);\n            ResultSet exists = statement1.executeQuery();\n            exists.next();\n            //System.out.println(exists.getString(1));\n            boolean handleexists = false;\n            if(exists.getString(1).equals(&quot;1&quot;)) {\n                handleexists = true;\n                \n\n//REMOVED: Connection conn2 = DriverManager.getConnection(url, username,    password);\n\n                String sql2 = &quot;SELECT `Variant Inventory Qty` FROM MasterCardRecord WHERE Handle = ? LIMIT 1&quot;;\n                PreparedStatement getqty = conn1.prepareStatement(sql2);\n                getqty.setString(1, Handle);\n                ResultSet handleqtyrs = getqty.executeQuery();\n                handleqtyrs.next();\n                handleqty = handleqtyrs.getInt(1);\n                \n            }\n            if(exists.getString(1).equals(&quot;0&quot;)) {\n                handleexists = false;\n            }\n            \n            statement1.close();\n           // REMOVED: conn1.close();\n            \n            //NEW CODE --------------------------------------------------------------------------------\n            if (handleexists == true) {\n                //REMOVED: Connection connInvUpdate= DriverManager.getConnection(url, username, password);\n                String InvUpdate = &quot;INSERT INTO InventoryUpdate (Handle, `Variant Inventory Qty`) VALUES (?,?) ON DUPLICATE KEY UPDATE `Variant Inventory Qty` = ?&quot;;\n                PreparedStatement InvStatement = conn1.prepareStatement(InvUpdate);\n                InvStatement.setString(1,Handle);\n                InvStatement.setInt(2, handleqty + 1);\n                InvStatement.setInt(3, handleqty + 1);\n                int updatedInv = InvStatement.executeUpdate();\n                //REMOVED: connInvUpdate.close();\n                InvStatement.close();\n            \n            \n            \n            \n            \n            }\n            //-----------------------------------------------------------------------------------------\n            \n            if(handleexists == false) {\n                // Handle doesnt exist within database\n                 //REMOVED: Connection conn3 = DriverManager.getConnection(url, username, password);\n                 String sql = &quot;INSERT INTO MasterCardRecord (Handle, Title, Vendor, Tags, Published, Option1Name, Option1Value, VariantGrams, `Variant Inventory Tracker`, `Variant Inventory Qty`, `Variant Inventory Policy`, `Variant Fufillment Service`, `Variant Price`, `Variant Requires Shipping`, `Variant Taxable`, `Img Src(front)`, `Img Src(back)`, `Gift Card`, Status, Description) VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)&quot;;\n                 PreparedStatement statement2 = conn1.prepareStatement(sql);\n                 statement2.setString(1, Handle);\n                 statement2.setString(2, Title);\n                 statement2.setString(3, Vendor);\n                 statement2.setString(4, Tags);\n                 statement2.setString(5, Published);\n                 statement2.setString(6, Option1Name);\n                 statement2.setString(7, Option1Value);\n                 statement2.setInt(8, VariantGrams);\n                 statement2.setString(9, VariantInventoryTracker);\n                 statement2.setString(10, VariantInventoryQty);\n                 statement2.setString(11, VariantInventoryPolicy);\n                 statement2.setString(12, VariantFufillmentService);\n                 statement2.setFloat(13, VariantPrice);\n                 statement2.setString(14, VariantRequiresShipping);\n                 statement2.setString(15, VariantTaxable);\n                 statement2.setString(16, ImgSrcfront);\n                 statement2.setString(17, ImgSrcback);\n                 statement2.setString(18, GiftCard);\n                 statement2.setString(19, Status);\n                 statement2.setString(20, Description);\n                  \n                 int rows = statement2.executeUpdate();\n                 if (rows &gt; 0 &amp;&amp; showupdates == true) {\n                     System.out.println(&quot;Item Added: &quot; + Handle);\n                 }\n                 statement2.close();\n                 //REMOVED: conn3.close();\n                 \n                 // Put into AddNewCards as well, for export and adding ONLY those cards that dont exist yet.\n                 //-----&gt; remove thisConnection AddNewCardConn = DriverManager.getConnection(url, username, password);\n                 String AddNewCardSQL = &quot;INSERT INTO AddNewCards (Handle, Title, Vendor, Tags, Published, Option1Name, Option1Value, VariantGrams, `Variant Inventory Tracker`, `Variant Inventory Qty`, `Variant Inventory Policy`, `Variant Fufillment Service`, `Variant Price`, `Variant Requires Shipping`, `Variant Taxable`, `Img Src(front)`, `Img Src(back)`, `Gift Card`, Status, Description) VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)&quot;;\n                 PreparedStatement AddNewCardStatement = conn1.prepareStatement(AddNewCardSQL);\n                 AddNewCardStatement.setString(1, Handle);\n                 AddNewCardStatement.setString(2, Title);\n                 AddNewCardStatement.setString(3, Vendor);\n                 AddNewCardStatement.setString(4, Tags);\n                 AddNewCardStatement.setString(5, Published);\n                 AddNewCardStatement.setString(6, Option1Name);\n                 AddNewCardStatement.setString(7, Option1Value);\n                 AddNewCardStatement.setInt(8, VariantGrams);\n                 AddNewCardStatement.setString(9, VariantInventoryTracker);\n                 AddNewCardStatement.setString(10, VariantInventoryQty);\n                 AddNewCardStatement.setString(11, VariantInventoryPolicy);\n                 AddNewCardStatement.setString(12, VariantFufillmentService);\n                 AddNewCardStatement.setFloat(13, VariantPrice);\n                 AddNewCardStatement.setString(14, VariantRequiresShipping);\n                 AddNewCardStatement.setString(15, VariantTaxable);\n                 AddNewCardStatement.setString(16, ImgSrcfront);\n                 AddNewCardStatement.setString(17, ImgSrcback);\n                 AddNewCardStatement.setString(18, GiftCard);\n                 AddNewCardStatement.setString(19, Status);\n                 AddNewCardStatement.setString(20, Description);\n                 \n                 \n                 int AddCardRows = AddNewCardStatement.executeUpdate();\n                 AddNewCardStatement.close();\n                 //REMOVED: AddNewCardConn.close();\n                 \n                 \n                 \n            }\n            if (handleexists == true) {\n                // Handle DOES exist within database\n                 //REMOVED: Connection conn3 = DriverManager.getConnection(url, username, password);\n                 String sql = &quot;UPDATE MasterCardRecord SET `Variant Inventory Qty` = ? WHERE Handle = ?&quot;;\n                 PreparedStatement statement2 = conn3.prepareStatement(sql);\n                 statement2.setInt(1,handleqty + 1);\n                 statement2.setString(2, Handle);\n                 int rows = statement2.executeUpdate();\n                 if (rows &gt; 0 &amp;&amp; showupdates == true) {\n                     System.out.println(&quot;Inventory of: &quot; + Handle + &quot;has been updated from &quot; + handleqty + &quot; to %d&quot;.formatted(handleqty + 1));\n                 }\n                 statement2.close();\n                 //REMOVED: conn3.close();\n            }            \n       \n        }\n        }\n        catch(Exception e){\n            System.out.println(&quot;Database connection failed!\\n&quot; + e);\n        }\n\n    }\n//ADDED: \nconn1.close();\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":529143,"reputation":136619,"user_id":1766831,"display_name":"Rick James"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1654099227,"creation_date":1654099227,"answer_id":72464908,"question_id":72454597,"body_markdown":"`PRIMARY KEY(HANDLE)` provides a Unique Index on `HANDLE`, so drop\r\n\r\n    UNIQUE KEY `handle_UNIQUE` (`Handle`)\r\n\r\nLooking at\r\n\r\n    SELECT EXISTS(SELECT 1 FROM MasterCardRecord WHERE Handle = ? LIMIT 1)\r\n\r\nGet rid of `LIMIT 1`.  `EXISTS` stops when it gets success.\r\n\r\nLooking at\r\n\r\n    SELECT `Variant Inventory Qty` FROM MasterCardRecord WHERE Handle = ? LIMIT 1\r\n\r\nThis could serve as an existence check.  That is, see if you can get rid of the previous query.\r\n\r\nA `LIMIT` without an `ORDER BY` leads to getting some random result.  If you can&#39;t have multiple rows, then the `LIMIT` is misleading; if you care which of many rows you get, then consider adding an `ORDER BY`.\r\n\r\nSQL is much better at doing many rows at once than going back and forth from the app.  Can your `SELECT` fetch all the relevant rows?  Better yet, can the IODKU act on all the necessary rows at once?\r\n\r\nIf you want more help, try to boil down the code to one screen full.  I don&#39;t need to see all the app code building and checking values -- _unless_ the sluggishness is really in that code!","title":"Is there a way to speed up my MySQL execution time?","body":"<p><code>PRIMARY KEY(HANDLE)</code> provides a Unique Index on <code>HANDLE</code>, so drop</p>\n<pre><code>UNIQUE KEY `handle_UNIQUE` (`Handle`)\n</code></pre>\n<p>Looking at</p>\n<pre><code>SELECT EXISTS(SELECT 1 FROM MasterCardRecord WHERE Handle = ? LIMIT 1)\n</code></pre>\n<p>Get rid of <code>LIMIT 1</code>.  <code>EXISTS</code> stops when it gets success.</p>\n<p>Looking at</p>\n<pre><code>SELECT `Variant Inventory Qty` FROM MasterCardRecord WHERE Handle = ? LIMIT 1\n</code></pre>\n<p>This could serve as an existence check.  That is, see if you can get rid of the previous query.</p>\n<p>A <code>LIMIT</code> without an <code>ORDER BY</code> leads to getting some random result.  If you can't have multiple rows, then the <code>LIMIT</code> is misleading; if you care which of many rows you get, then consider adding an <code>ORDER BY</code>.</p>\n<p>SQL is much better at doing many rows at once than going back and forth from the app.  Can your <code>SELECT</code> fetch all the relevant rows?  Better yet, can the IODKU act on all the necessary rows at once?</p>\n<p>If you want more help, try to boil down the code to one screen full.  I don't need to see all the app code building and checking values -- <em>unless</em> the sluggishness is really in that code!</p>\n"}],"owner":{"account_id":24906391,"reputation":15,"user_id":18776405,"display_name":"Christian Wagner"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":85,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":72454728,"answer_count":2,"score":1,"last_activity_date":1654099227,"creation_date":1654035220,"question_id":72454597,"body_markdown":"Update: I have removed the duplicate connections, which reduced the time down to 18 seconds. Other improvements would be appreciated as well!\r\n\r\nI feel like I have some massive oversight that is causing it to take exponentially longer than it should for the very few items I have in the database. Right now, there are only about 85 entities in my database, but running my Java program takes 51 seconds. For 40 entities, it took 35 seconds, so clearly I&#39;m doing something wrong. This database will eventually have millions of entities in it, which would take days to complete a single run. Can anyone tell me what optimizations I should do? Please note I am a total beginner when it comes to MySQL and especially Java MySQL implementation, so please go easy on me.\r\n\r\nHere is the problem code:\r\n```java\r\npublic static void SQL() {\r\n\tint handleqty = -1;\r\n    String url = &quot;jdbc:mysql://MYURL:3306/MYDB&quot;;\r\n    String username = &quot;username&quot;;\r\n    String password = &quot;password&quot;;\r\n\r\n    try{\r\n        Connection conn1 = DriverManager.getConnection(url, username, password);\r\n        for(Entry&lt;String, String&gt; entry: passToSQL.entrySet()) {\r\n        \t\r\n        \t//System.out.println(entry);\r\n\r\n        \tString cardinfo = entry.getValue();\r\n        \t\r\n        \tString Handle = cardinfo.split(&quot;,&quot;)[0];\r\n            String Title = cardinfo.split(&quot;,&quot;)[1];\r\n            String Vendor = cardinfo.split(&quot;,&quot;)[2];\r\n            String Tags = cardinfo.split(&quot;,&quot;)[3];\r\n            String Published = cardinfo.split(&quot;,&quot;)[4];\r\n            String Option1Name = cardinfo.split(&quot;,&quot;)[5];\r\n            String Option1Value = cardinfo.split(&quot;,&quot;)[6];\r\n            int VariantGrams = Integer.parseInt(cardinfo.split(&quot;,&quot;)[7]);\r\n            String VariantInventoryTracker = cardinfo.split(&quot;,&quot;)[8];\r\n            String VariantInventoryQty = cardinfo.split(&quot;,&quot;)[9];\r\n            String VariantInventoryPolicy = cardinfo.split(&quot;,&quot;)[10];\r\n            String VariantFufillmentService = cardinfo.split(&quot;,&quot;)[11];\r\n            float VariantPrice =  Float.parseFloat(cardinfo.split(&quot;,&quot;)[12]);\r\n            String VariantRequiresShipping = cardinfo.split(&quot;,&quot;)[13];\r\n            String VariantTaxable = cardinfo.split(&quot;,&quot;)[14];\r\n            String ImgSrcfront = cardinfo.split(&quot;,&quot;)[15];\r\n            String ImgSrcback = cardinfo.split(&quot;,&quot;)[16];\r\n            String GiftCard = cardinfo.split(&quot;,&quot;)[17];\r\n            String Status = cardinfo.split(&quot;,&quot;)[18];\r\n            String Description = cardinfo.split(&quot;,&quot;)[19];\r\n            \r\n            String checkexists = &quot;SELECT EXISTS(SELECT 1 FROM MasterCardRecord WHERE Handle = ? LIMIT 1)&quot;;\r\n            PreparedStatement statement1 = conn1.prepareStatement(checkexists);\r\n            statement1.setString(1, Handle);\r\n            ResultSet exists = statement1.executeQuery();\r\n            exists.next();\r\n            //System.out.println(exists.getString(1));\r\n            boolean handleexists = false;\r\n            if(exists.getString(1).equals(&quot;1&quot;)) {\r\n            \thandleexists = true;\r\n            \t\r\n\r\n//REMOVED: Connection conn2 = DriverManager.getConnection(url, username,    password);\r\n\r\n            \tString sql2 = &quot;SELECT `Variant Inventory Qty` FROM MasterCardRecord WHERE Handle = ? LIMIT 1&quot;;\r\n            \tPreparedStatement getqty = conn1.prepareStatement(sql2);\r\n            \tgetqty.setString(1, Handle);\r\n            \tResultSet handleqtyrs = getqty.executeQuery();\r\n            \thandleqtyrs.next();\r\n            \thandleqty = handleqtyrs.getInt(1);\r\n            \t\r\n            }\r\n            if(exists.getString(1).equals(&quot;0&quot;)) {\r\n            \thandleexists = false;\r\n            }\r\n            \r\n            statement1.close();\r\n           // REMOVED: conn1.close();\r\n            \r\n            //NEW CODE --------------------------------------------------------------------------------\r\n            if (handleexists == true) {\r\n            \t//REMOVED: Connection connInvUpdate= DriverManager.getConnection(url, username, password);\r\n            \tString InvUpdate = &quot;INSERT INTO InventoryUpdate (Handle, `Variant Inventory Qty`) VALUES (?,?) ON DUPLICATE KEY UPDATE `Variant Inventory Qty` = ?&quot;;\r\n            \tPreparedStatement InvStatement = conn1.prepareStatement(InvUpdate);\r\n            \tInvStatement.setString(1,Handle);\r\n            \tInvStatement.setInt(2, handleqty + 1);\r\n            \tInvStatement.setInt(3, handleqty + 1);\r\n            \tint updatedInv = InvStatement.executeUpdate();\r\n            \t//REMOVED: connInvUpdate.close();\r\n            \tInvStatement.close();\r\n            \r\n            \r\n            \r\n            \r\n            \r\n            }\r\n            //-----------------------------------------------------------------------------------------\r\n            \r\n            if(handleexists == false) {\r\n            \t// Handle doesnt exist within database\r\n            \t //REMOVED: Connection conn3 = DriverManager.getConnection(url, username, password);\r\n                 String sql = &quot;INSERT INTO MasterCardRecord (Handle, Title, Vendor, Tags, Published, Option1Name, Option1Value, VariantGrams, `Variant Inventory Tracker`, `Variant Inventory Qty`, `Variant Inventory Policy`, `Variant Fufillment Service`, `Variant Price`, `Variant Requires Shipping`, `Variant Taxable`, `Img Src(front)`, `Img Src(back)`, `Gift Card`, Status, Description) VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)&quot;;\r\n                 PreparedStatement statement2 = conn1.prepareStatement(sql);\r\n                 statement2.setString(1, Handle);\r\n                 statement2.setString(2, Title);\r\n                 statement2.setString(3, Vendor);\r\n                 statement2.setString(4, Tags);\r\n                 statement2.setString(5, Published);\r\n                 statement2.setString(6, Option1Name);\r\n                 statement2.setString(7, Option1Value);\r\n                 statement2.setInt(8, VariantGrams);\r\n                 statement2.setString(9, VariantInventoryTracker);\r\n                 statement2.setString(10, VariantInventoryQty);\r\n                 statement2.setString(11, VariantInventoryPolicy);\r\n                 statement2.setString(12, VariantFufillmentService);\r\n                 statement2.setFloat(13, VariantPrice);\r\n                 statement2.setString(14, VariantRequiresShipping);\r\n                 statement2.setString(15, VariantTaxable);\r\n                 statement2.setString(16, ImgSrcfront);\r\n                 statement2.setString(17, ImgSrcback);\r\n                 statement2.setString(18, GiftCard);\r\n                 statement2.setString(19, Status);\r\n                 statement2.setString(20, Description);\r\n                  \r\n                 int rows = statement2.executeUpdate();\r\n                 if (rows &gt; 0 &amp;&amp; showupdates == true) {\r\n                \t System.out.println(&quot;Item Added: &quot; + Handle);\r\n                 }\r\n                 statement2.close();\r\n                 //REMOVED: conn3.close();\r\n                 \r\n                 // Put into AddNewCards as well, for export and adding ONLY those cards that dont exist yet.\r\n                 Connection AddNewCardConn = DriverManager.getConnection(url, username, password);\r\n                 String AddNewCardSQL = &quot;INSERT INTO AddNewCards (Handle, Title, Vendor, Tags, Published, Option1Name, Option1Value, VariantGrams, `Variant Inventory Tracker`, `Variant Inventory Qty`, `Variant Inventory Policy`, `Variant Fufillment Service`, `Variant Price`, `Variant Requires Shipping`, `Variant Taxable`, `Img Src(front)`, `Img Src(back)`, `Gift Card`, Status, Description) VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)&quot;;\r\n                 PreparedStatement AddNewCardStatement = conn1.prepareStatement(AddNewCardSQL);\r\n                 AddNewCardStatement.setString(1, Handle);\r\n                 AddNewCardStatement.setString(2, Title);\r\n                 AddNewCardStatement.setString(3, Vendor);\r\n                 AddNewCardStatement.setString(4, Tags);\r\n                 AddNewCardStatement.setString(5, Published);\r\n                 AddNewCardStatement.setString(6, Option1Name);\r\n                 AddNewCardStatement.setString(7, Option1Value);\r\n                 AddNewCardStatement.setInt(8, VariantGrams);\r\n                 AddNewCardStatement.setString(9, VariantInventoryTracker);\r\n                 AddNewCardStatement.setString(10, VariantInventoryQty);\r\n                 AddNewCardStatement.setString(11, VariantInventoryPolicy);\r\n                 AddNewCardStatement.setString(12, VariantFufillmentService);\r\n                 AddNewCardStatement.setFloat(13, VariantPrice);\r\n                 AddNewCardStatement.setString(14, VariantRequiresShipping);\r\n                 AddNewCardStatement.setString(15, VariantTaxable);\r\n                 AddNewCardStatement.setString(16, ImgSrcfront);\r\n                 AddNewCardStatement.setString(17, ImgSrcback);\r\n                 AddNewCardStatement.setString(18, GiftCard);\r\n                 AddNewCardStatement.setString(19, Status);\r\n                 AddNewCardStatement.setString(20, Description);\r\n                 \r\n                 \r\n                 int AddCardRows = AddNewCardStatement.executeUpdate();\r\n                 AddNewCardStatement.close();\r\n                 //REMOVED: AddNewCardConn.close();\r\n                 \r\n                 \r\n                 \r\n            }\r\n            if (handleexists == true) {\r\n            \t// Handle DOES exist within database\r\n            \t //REMOVED: Connection conn3 = DriverManager.getConnection(url, username, password);\r\n            \t String sql = &quot;UPDATE MasterCardRecord SET `Variant Inventory Qty` = ? WHERE Handle = ?&quot;;\r\n            \t PreparedStatement statement2 = conn3.prepareStatement(sql);\r\n            \t statement2.setInt(1,handleqty + 1);\r\n            \t statement2.setString(2, Handle);\r\n            \t int rows = statement2.executeUpdate();\r\n            \t if (rows &gt; 0 &amp;&amp; showupdates == true) {\r\n            \t\t System.out.println(&quot;Inventory of: &quot; + Handle + &quot;has been updated from &quot; + handleqty + &quot; to %d&quot;.formatted(handleqty + 1));\r\n            \t }\r\n            \t statement2.close();\r\n                 //REMOVED: conn3.close();\r\n            }            \r\n       \r\n        }\r\n        }\r\n        catch(Exception e){\r\n            System.out.println(&quot;Database connection failed!\\n&quot; + e);\r\n        }\r\n\r\n    }\r\n//ADDED: \r\nconn1.close();\r\n\r\n}\r\n```\r\nThe purpose of this code is to take in some data in a map that was gathered from a CSV file, then go through that map and input the data into 3 different tables.\r\n\r\n1. MasterCardRecord : This table holds every card and its overall qty and other values\r\n2.  AddNewCards : This table contains the information for new cards only, to allow for import into another website of ONLY cards new to the database\r\n3. Inventory Update: This table contains the handle and qty of cards that are already in the database, to allow for quick quantity updates of those cards\r\n\r\nI tried to be clear with the problem, but if more information is needed, here is a pastebin of the full code: https://pastebin.com/TQ54f6gB  \r\nImages of database structure: \r\n- https://i.stack.imgur.com/hcwMa.png  \r\n- https://i.stack.imgur.com/PgpJB.png \r\n- https://i.stack.imgur.com/EpYdh.png \r\n- https://i.stack.imgur.com/RkwFK.png\r\n\r\nAs requested, here is the text format of the photos:\r\n```sql\r\nCREATE TABLE `AddNewCards` (\r\n  `Handle` varchar(255) NOT NULL,\r\n  `Title` varchar(255) NOT NULL,\r\n  `Vendor` varchar(45) DEFAULT &#39;the10thinningva.com&#39;,\r\n  `Tags` varchar(255) DEFAULT NULL,\r\n  `Published` varchar(5) DEFAULT &#39;FALSE&#39;,\r\n  `Option1Name` varchar(45) DEFAULT &#39;Title&#39;,\r\n  `Option1Value` varchar(45) DEFAULT &#39;Default Title&#39;,\r\n  `VariantGrams` decimal(4,0) DEFAULT &#39;45&#39;,\r\n  `Variant Inventory Tracker` varchar(45) DEFAULT &#39;shopify&#39;,\r\n  `Variant Inventory Qty` int DEFAULT &#39;1&#39;,\r\n  `Variant Inventory Policy` varchar(45) DEFAULT &#39;deny&#39;,\r\n  `Variant Fufillment Service` varchar(45) DEFAULT &#39;manual&#39;,\r\n  `Variant Price` decimal(5,2) NOT NULL,\r\n  `Variant Requires Shipping` varchar(5) DEFAULT &#39;TRUE&#39;,\r\n  `Variant Taxable` varchar(5) DEFAULT &#39;TRUE&#39;,\r\n  `Img Src(front)` varchar(255) DEFAULT NULL,\r\n  `Img Src(back)` varchar(255) DEFAULT NULL,\r\n  `Gift Card` varchar(5) DEFAULT &#39;FALSE&#39;,\r\n  `Status` varchar(45) DEFAULT &#39;active&#39;,\r\n  `Description` varchar(255) DEFAULT NULL,\r\n  PRIMARY KEY (`Handle`),\r\n  UNIQUE KEY `handle_UNIQUE` (`Handle`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci\r\n```\r\n```sql\r\nCREATE TABLE `InventoryUpdate` (\r\n  `Handle` varchar(255) NOT NULL,\r\n  `Variant Inventory Qty` int NOT NULL,\r\n  PRIMARY KEY (`Handle`),\r\n  UNIQUE KEY `Handle_UNIQUE` (`Handle`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci\r\n```\r\n```sql\r\nCREATE TABLE `MasterCardRecord` (\r\n  `Handle` varchar(255) NOT NULL,\r\n  `Title` varchar(255) NOT NULL,\r\n  `Vendor` varchar(45) DEFAULT &#39;the10thinningva.com&#39;,\r\n  `Tags` varchar(255) DEFAULT NULL,\r\n  `Published` varchar(5) DEFAULT &#39;FALSE&#39;,\r\n  `Option1Name` varchar(45) DEFAULT &#39;Title&#39;,\r\n  `Option1Value` varchar(45) DEFAULT &#39;Default Title&#39;,\r\n  `VariantGrams` decimal(4,0) DEFAULT &#39;45&#39;,\r\n  `Variant Inventory Tracker` varchar(45) DEFAULT &#39;shopify&#39;,\r\n  `Variant Inventory Qty` int DEFAULT &#39;1&#39;,\r\n  `Variant Inventory Policy` varchar(45) DEFAULT &#39;deny&#39;,\r\n  `Variant Fufillment Service` varchar(45) DEFAULT &#39;manual&#39;,\r\n  `Variant Price` decimal(5,2) NOT NULL,\r\n  `Variant Requires Shipping` varchar(5) DEFAULT &#39;TRUE&#39;,\r\n  `Variant Taxable` varchar(5) DEFAULT &#39;TRUE&#39;,\r\n  `Img Src(front)` varchar(255) DEFAULT NULL,\r\n  `Img Src(back)` varchar(255) DEFAULT NULL,\r\n  `Gift Card` varchar(5) DEFAULT &#39;FALSE&#39;,\r\n  `Status` varchar(45) DEFAULT &#39;active&#39;,\r\n  `Description` varchar(255) DEFAULT NULL,\r\n  PRIMARY KEY (`Handle`),\r\n  UNIQUE KEY `handle_UNIQUE` (`Handle`)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci\r\n```\r\nAn example of an entry is as follows:\r\n```sqk\r\n&#39;1989-fleer-#nno-california-angels-team-stickers-(one-logo)&#39;, &#39;1989 Fleer #NNO California Angels Team Stickers (One Logo)&#39;, &#39;websitelink.com&#39;, &#39;collectable&#39;, &#39;TRUE&#39;, &#39;Title&#39;, &#39;Default Title&#39;, &#39;45&#39;, &#39;shopify&#39;, &#39;12&#39;, &#39;deny&#39;, &#39;manual&#39;, &#39;2.00&#39;, &#39;TRUE&#39;, &#39;TRUE&#39;, &#39;https://linktoajpg_front.jpg&#39;, &#39;https://linktoajpg_back.jpg&#39;, &#39;FALSE&#39;, &#39;active&#39;, &#39;1989 Fleer #NNO California Angels Team Stickers (One Logo)&#39;\r\n```","title":"Is there a way to speed up my MySQL execution time?","body":"<p>Update: I have removed the duplicate connections, which reduced the time down to 18 seconds. Other improvements would be appreciated as well!</p>\n<p>I feel like I have some massive oversight that is causing it to take exponentially longer than it should for the very few items I have in the database. Right now, there are only about 85 entities in my database, but running my Java program takes 51 seconds. For 40 entities, it took 35 seconds, so clearly I'm doing something wrong. This database will eventually have millions of entities in it, which would take days to complete a single run. Can anyone tell me what optimizations I should do? Please note I am a total beginner when it comes to MySQL and especially Java MySQL implementation, so please go easy on me.</p>\n<p>Here is the problem code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void SQL() {\n    int handleqty = -1;\n    String url = &quot;jdbc:mysql://MYURL:3306/MYDB&quot;;\n    String username = &quot;username&quot;;\n    String password = &quot;password&quot;;\n\n    try{\n        Connection conn1 = DriverManager.getConnection(url, username, password);\n        for(Entry&lt;String, String&gt; entry: passToSQL.entrySet()) {\n            \n            //System.out.println(entry);\n\n            String cardinfo = entry.getValue();\n            \n            String Handle = cardinfo.split(&quot;,&quot;)[0];\n            String Title = cardinfo.split(&quot;,&quot;)[1];\n            String Vendor = cardinfo.split(&quot;,&quot;)[2];\n            String Tags = cardinfo.split(&quot;,&quot;)[3];\n            String Published = cardinfo.split(&quot;,&quot;)[4];\n            String Option1Name = cardinfo.split(&quot;,&quot;)[5];\n            String Option1Value = cardinfo.split(&quot;,&quot;)[6];\n            int VariantGrams = Integer.parseInt(cardinfo.split(&quot;,&quot;)[7]);\n            String VariantInventoryTracker = cardinfo.split(&quot;,&quot;)[8];\n            String VariantInventoryQty = cardinfo.split(&quot;,&quot;)[9];\n            String VariantInventoryPolicy = cardinfo.split(&quot;,&quot;)[10];\n            String VariantFufillmentService = cardinfo.split(&quot;,&quot;)[11];\n            float VariantPrice =  Float.parseFloat(cardinfo.split(&quot;,&quot;)[12]);\n            String VariantRequiresShipping = cardinfo.split(&quot;,&quot;)[13];\n            String VariantTaxable = cardinfo.split(&quot;,&quot;)[14];\n            String ImgSrcfront = cardinfo.split(&quot;,&quot;)[15];\n            String ImgSrcback = cardinfo.split(&quot;,&quot;)[16];\n            String GiftCard = cardinfo.split(&quot;,&quot;)[17];\n            String Status = cardinfo.split(&quot;,&quot;)[18];\n            String Description = cardinfo.split(&quot;,&quot;)[19];\n            \n            String checkexists = &quot;SELECT EXISTS(SELECT 1 FROM MasterCardRecord WHERE Handle = ? LIMIT 1)&quot;;\n            PreparedStatement statement1 = conn1.prepareStatement(checkexists);\n            statement1.setString(1, Handle);\n            ResultSet exists = statement1.executeQuery();\n            exists.next();\n            //System.out.println(exists.getString(1));\n            boolean handleexists = false;\n            if(exists.getString(1).equals(&quot;1&quot;)) {\n                handleexists = true;\n                \n\n//REMOVED: Connection conn2 = DriverManager.getConnection(url, username,    password);\n\n                String sql2 = &quot;SELECT `Variant Inventory Qty` FROM MasterCardRecord WHERE Handle = ? LIMIT 1&quot;;\n                PreparedStatement getqty = conn1.prepareStatement(sql2);\n                getqty.setString(1, Handle);\n                ResultSet handleqtyrs = getqty.executeQuery();\n                handleqtyrs.next();\n                handleqty = handleqtyrs.getInt(1);\n                \n            }\n            if(exists.getString(1).equals(&quot;0&quot;)) {\n                handleexists = false;\n            }\n            \n            statement1.close();\n           // REMOVED: conn1.close();\n            \n            //NEW CODE --------------------------------------------------------------------------------\n            if (handleexists == true) {\n                //REMOVED: Connection connInvUpdate= DriverManager.getConnection(url, username, password);\n                String InvUpdate = &quot;INSERT INTO InventoryUpdate (Handle, `Variant Inventory Qty`) VALUES (?,?) ON DUPLICATE KEY UPDATE `Variant Inventory Qty` = ?&quot;;\n                PreparedStatement InvStatement = conn1.prepareStatement(InvUpdate);\n                InvStatement.setString(1,Handle);\n                InvStatement.setInt(2, handleqty + 1);\n                InvStatement.setInt(3, handleqty + 1);\n                int updatedInv = InvStatement.executeUpdate();\n                //REMOVED: connInvUpdate.close();\n                InvStatement.close();\n            \n            \n            \n            \n            \n            }\n            //-----------------------------------------------------------------------------------------\n            \n            if(handleexists == false) {\n                // Handle doesnt exist within database\n                 //REMOVED: Connection conn3 = DriverManager.getConnection(url, username, password);\n                 String sql = &quot;INSERT INTO MasterCardRecord (Handle, Title, Vendor, Tags, Published, Option1Name, Option1Value, VariantGrams, `Variant Inventory Tracker`, `Variant Inventory Qty`, `Variant Inventory Policy`, `Variant Fufillment Service`, `Variant Price`, `Variant Requires Shipping`, `Variant Taxable`, `Img Src(front)`, `Img Src(back)`, `Gift Card`, Status, Description) VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)&quot;;\n                 PreparedStatement statement2 = conn1.prepareStatement(sql);\n                 statement2.setString(1, Handle);\n                 statement2.setString(2, Title);\n                 statement2.setString(3, Vendor);\n                 statement2.setString(4, Tags);\n                 statement2.setString(5, Published);\n                 statement2.setString(6, Option1Name);\n                 statement2.setString(7, Option1Value);\n                 statement2.setInt(8, VariantGrams);\n                 statement2.setString(9, VariantInventoryTracker);\n                 statement2.setString(10, VariantInventoryQty);\n                 statement2.setString(11, VariantInventoryPolicy);\n                 statement2.setString(12, VariantFufillmentService);\n                 statement2.setFloat(13, VariantPrice);\n                 statement2.setString(14, VariantRequiresShipping);\n                 statement2.setString(15, VariantTaxable);\n                 statement2.setString(16, ImgSrcfront);\n                 statement2.setString(17, ImgSrcback);\n                 statement2.setString(18, GiftCard);\n                 statement2.setString(19, Status);\n                 statement2.setString(20, Description);\n                  \n                 int rows = statement2.executeUpdate();\n                 if (rows &gt; 0 &amp;&amp; showupdates == true) {\n                     System.out.println(&quot;Item Added: &quot; + Handle);\n                 }\n                 statement2.close();\n                 //REMOVED: conn3.close();\n                 \n                 // Put into AddNewCards as well, for export and adding ONLY those cards that dont exist yet.\n                 Connection AddNewCardConn = DriverManager.getConnection(url, username, password);\n                 String AddNewCardSQL = &quot;INSERT INTO AddNewCards (Handle, Title, Vendor, Tags, Published, Option1Name, Option1Value, VariantGrams, `Variant Inventory Tracker`, `Variant Inventory Qty`, `Variant Inventory Policy`, `Variant Fufillment Service`, `Variant Price`, `Variant Requires Shipping`, `Variant Taxable`, `Img Src(front)`, `Img Src(back)`, `Gift Card`, Status, Description) VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)&quot;;\n                 PreparedStatement AddNewCardStatement = conn1.prepareStatement(AddNewCardSQL);\n                 AddNewCardStatement.setString(1, Handle);\n                 AddNewCardStatement.setString(2, Title);\n                 AddNewCardStatement.setString(3, Vendor);\n                 AddNewCardStatement.setString(4, Tags);\n                 AddNewCardStatement.setString(5, Published);\n                 AddNewCardStatement.setString(6, Option1Name);\n                 AddNewCardStatement.setString(7, Option1Value);\n                 AddNewCardStatement.setInt(8, VariantGrams);\n                 AddNewCardStatement.setString(9, VariantInventoryTracker);\n                 AddNewCardStatement.setString(10, VariantInventoryQty);\n                 AddNewCardStatement.setString(11, VariantInventoryPolicy);\n                 AddNewCardStatement.setString(12, VariantFufillmentService);\n                 AddNewCardStatement.setFloat(13, VariantPrice);\n                 AddNewCardStatement.setString(14, VariantRequiresShipping);\n                 AddNewCardStatement.setString(15, VariantTaxable);\n                 AddNewCardStatement.setString(16, ImgSrcfront);\n                 AddNewCardStatement.setString(17, ImgSrcback);\n                 AddNewCardStatement.setString(18, GiftCard);\n                 AddNewCardStatement.setString(19, Status);\n                 AddNewCardStatement.setString(20, Description);\n                 \n                 \n                 int AddCardRows = AddNewCardStatement.executeUpdate();\n                 AddNewCardStatement.close();\n                 //REMOVED: AddNewCardConn.close();\n                 \n                 \n                 \n            }\n            if (handleexists == true) {\n                // Handle DOES exist within database\n                 //REMOVED: Connection conn3 = DriverManager.getConnection(url, username, password);\n                 String sql = &quot;UPDATE MasterCardRecord SET `Variant Inventory Qty` = ? WHERE Handle = ?&quot;;\n                 PreparedStatement statement2 = conn3.prepareStatement(sql);\n                 statement2.setInt(1,handleqty + 1);\n                 statement2.setString(2, Handle);\n                 int rows = statement2.executeUpdate();\n                 if (rows &gt; 0 &amp;&amp; showupdates == true) {\n                     System.out.println(&quot;Inventory of: &quot; + Handle + &quot;has been updated from &quot; + handleqty + &quot; to %d&quot;.formatted(handleqty + 1));\n                 }\n                 statement2.close();\n                 //REMOVED: conn3.close();\n            }            \n       \n        }\n        }\n        catch(Exception e){\n            System.out.println(&quot;Database connection failed!\\n&quot; + e);\n        }\n\n    }\n//ADDED: \nconn1.close();\n\n}\n</code></pre>\n<p>The purpose of this code is to take in some data in a map that was gathered from a CSV file, then go through that map and input the data into 3 different tables.</p>\n<ol>\n<li>MasterCardRecord : This table holds every card and its overall qty and other values</li>\n<li>AddNewCards : This table contains the information for new cards only, to allow for import into another website of ONLY cards new to the database</li>\n<li>Inventory Update: This table contains the handle and qty of cards that are already in the database, to allow for quick quantity updates of those cards</li>\n</ol>\n<p>I tried to be clear with the problem, but if more information is needed, here is a pastebin of the full code: <a href=\"https://pastebin.com/TQ54f6gB\" rel=\"nofollow noreferrer\">https://pastebin.com/TQ54f6gB</a><br />\nImages of database structure:</p>\n<ul>\n<li><a href=\"https://i.stack.imgur.com/hcwMa.png\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/hcwMa.png</a></li>\n<li><a href=\"https://i.stack.imgur.com/PgpJB.png\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/PgpJB.png</a></li>\n<li><a href=\"https://i.stack.imgur.com/EpYdh.png\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/EpYdh.png</a></li>\n<li><a href=\"https://i.stack.imgur.com/RkwFK.png\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/RkwFK.png</a></li>\n</ul>\n<p>As requested, here is the text format of the photos:</p>\n<pre class=\"lang-sql prettyprint-override\"><code>CREATE TABLE `AddNewCards` (\n  `Handle` varchar(255) NOT NULL,\n  `Title` varchar(255) NOT NULL,\n  `Vendor` varchar(45) DEFAULT 'the10thinningva.com',\n  `Tags` varchar(255) DEFAULT NULL,\n  `Published` varchar(5) DEFAULT 'FALSE',\n  `Option1Name` varchar(45) DEFAULT 'Title',\n  `Option1Value` varchar(45) DEFAULT 'Default Title',\n  `VariantGrams` decimal(4,0) DEFAULT '45',\n  `Variant Inventory Tracker` varchar(45) DEFAULT 'shopify',\n  `Variant Inventory Qty` int DEFAULT '1',\n  `Variant Inventory Policy` varchar(45) DEFAULT 'deny',\n  `Variant Fufillment Service` varchar(45) DEFAULT 'manual',\n  `Variant Price` decimal(5,2) NOT NULL,\n  `Variant Requires Shipping` varchar(5) DEFAULT 'TRUE',\n  `Variant Taxable` varchar(5) DEFAULT 'TRUE',\n  `Img Src(front)` varchar(255) DEFAULT NULL,\n  `Img Src(back)` varchar(255) DEFAULT NULL,\n  `Gift Card` varchar(5) DEFAULT 'FALSE',\n  `Status` varchar(45) DEFAULT 'active',\n  `Description` varchar(255) DEFAULT NULL,\n  PRIMARY KEY (`Handle`),\n  UNIQUE KEY `handle_UNIQUE` (`Handle`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci\n</code></pre>\n<pre class=\"lang-sql prettyprint-override\"><code>CREATE TABLE `InventoryUpdate` (\n  `Handle` varchar(255) NOT NULL,\n  `Variant Inventory Qty` int NOT NULL,\n  PRIMARY KEY (`Handle`),\n  UNIQUE KEY `Handle_UNIQUE` (`Handle`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci\n</code></pre>\n<pre class=\"lang-sql prettyprint-override\"><code>CREATE TABLE `MasterCardRecord` (\n  `Handle` varchar(255) NOT NULL,\n  `Title` varchar(255) NOT NULL,\n  `Vendor` varchar(45) DEFAULT 'the10thinningva.com',\n  `Tags` varchar(255) DEFAULT NULL,\n  `Published` varchar(5) DEFAULT 'FALSE',\n  `Option1Name` varchar(45) DEFAULT 'Title',\n  `Option1Value` varchar(45) DEFAULT 'Default Title',\n  `VariantGrams` decimal(4,0) DEFAULT '45',\n  `Variant Inventory Tracker` varchar(45) DEFAULT 'shopify',\n  `Variant Inventory Qty` int DEFAULT '1',\n  `Variant Inventory Policy` varchar(45) DEFAULT 'deny',\n  `Variant Fufillment Service` varchar(45) DEFAULT 'manual',\n  `Variant Price` decimal(5,2) NOT NULL,\n  `Variant Requires Shipping` varchar(5) DEFAULT 'TRUE',\n  `Variant Taxable` varchar(5) DEFAULT 'TRUE',\n  `Img Src(front)` varchar(255) DEFAULT NULL,\n  `Img Src(back)` varchar(255) DEFAULT NULL,\n  `Gift Card` varchar(5) DEFAULT 'FALSE',\n  `Status` varchar(45) DEFAULT 'active',\n  `Description` varchar(255) DEFAULT NULL,\n  PRIMARY KEY (`Handle`),\n  UNIQUE KEY `handle_UNIQUE` (`Handle`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci\n</code></pre>\n<p>An example of an entry is as follows:</p>\n<pre><code>'1989-fleer-#nno-california-angels-team-stickers-(one-logo)', '1989 Fleer #NNO California Angels Team Stickers (One Logo)', 'websitelink.com', 'collectable', 'TRUE', 'Title', 'Default Title', '45', 'shopify', '12', 'deny', 'manual', '2.00', 'TRUE', 'TRUE', 'https://linktoajpg_front.jpg', 'https://linktoajpg_back.jpg', 'FALSE', 'active', '1989 Fleer #NNO California Angels Team Stickers (One Logo)'\n</code></pre>\n"},{"tags":["java","spring-boot","spring-integration"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1654083521,"post_id":72458949,"comment_id":128006360,"body_markdown":"Use a file poller in Spring Integration then send the file to an endpoint.","body":"Use a file poller in Spring Integration then send the file to an endpoint."},{"owner":{"account_id":25444336,"reputation":3,"user_id":19246730,"display_name":"Shivendra"},"score":0,"creation_date":1654085630,"post_id":72458949,"comment_id":128007156,"body_markdown":"In my case, we just need to trigger a rest call if anyone put xlsx file in that directory. Pls provide some example if possible.(we already have a api with it&#39;s own functionality, i want to call this api if anyone put the xlsx fine in that directory)","body":"In my case, we just need to trigger a rest call if anyone put xlsx file in that directory. Pls provide some example if possible.(we already have a api with it&#39;s own functionality, i want to call this api if anyone put the xlsx fine in that directory)"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1654086284,"post_id":72458949,"comment_id":128007398,"body_markdown":"Check the Spring Integration samples and documentation that have a ready to use sample (you can just ignore the payload and just call the API you want).","body":"Check the Spring Integration samples and documentation that have a ready to use sample (you can just ignore the payload and just call the API you want)."}],"answers":[{"tags":[],"owner":{"account_id":1674328,"reputation":2652,"user_id":1540177,"display_name":"grekier"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1654074762,"creation_date":1654074762,"answer_id":72459263,"question_id":72458949,"body_markdown":"We have a system that does (almost) the same (just xml instead of xlsx) and we use Apache Camel https://camel.apache.org/\r\n\r\nIntegration is good with Spring Boot. You just need to define your route `from(&quot;file:///&lt;path&quot;).to(&quot;http:&lt;host&gt;:port/&lt;path&gt;)` and it will do probably what you need.\r\n\r\nMight need to tweek the line of code to get filtering and maybe add some transformation but it is a nice peace of software.","title":"How to poll a directory and if the any xlsx file copied in the directory call an REST api to load the feed","body":"<p>We have a system that does (almost) the same (just xml instead of xlsx) and we use Apache Camel <a href=\"https://camel.apache.org/\" rel=\"nofollow noreferrer\">https://camel.apache.org/</a></p>\n<p>Integration is good with Spring Boot. You just need to define your route <code>from(&quot;file:///&lt;path&quot;).to(&quot;http:&lt;host&gt;:port/&lt;path&gt;)</code> and it will do probably what you need.</p>\n<p>Might need to tweek the line of code to get filtering and maybe add some transformation but it is a nice peace of software.</p>\n"},{"tags":[],"owner":{"account_id":3273937,"reputation":114855,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1654099110,"creation_date":1654099110,"answer_id":72464882,"question_id":72458949,"body_markdown":"I believe that you are looking for fully working sample and I doubt that is going to be one since your business task might not be the same what other people are doing.\r\n\r\nAlthough we won&#39;t mind if you contribute back such a sample: https://github.com/spring-projects/spring-integration-samples.\r\n\r\n\r\n1. So, to build a logic we need to provide an `IntegrationFlow`: https://docs.spring.io/spring-integration/docs/current/reference/html/dsl.html#java-dsl.\r\n\r\n2. To read files from a dir we need to use a `Files.inboundAdapter()` with respective polling policy.\r\n\r\n\r\n3. You may do some transformation (`.transform()`) about polled file content or so.\r\n\r\n4. Call the REST service via `Http.outboundGateway()`\r\n\r\n5. Do the post-process.\r\n\r\nSomething like this:\r\n\r\n\t\t@Bean\r\n\t\tpublic IntegrationFlow fileReadingFlow() {\r\n\t\t\treturn IntegrationFlows\r\n\t\t\t\t\t.from(Files.inboundAdapter(new File(&quot;myDir&quot;))\r\n\t\t\t\t\t\t\t\t\t.patternFilter(&quot;*.xlsx&quot;),\r\n\t\t\t\t\t\t\te -&gt; e.poller(Pollers.fixedDelay(1000)))\r\n\t\t\t\t\t.transform(...)\r\n\t\t\t\t\t.handle(Http.outboundGateway(&quot;&quot;)\r\n\t\t\t\t\t\t\t.expectedResponseType(String.class))\r\n\t\t\t\t\t.transform(...)\r\n\t\t\t\t\t.get();\r\n\t\t}\r\n\r\n\r\n(Haven&#39;t checked as working since I don&#39;t know what is your XSLT content and how you call the REST service.)\r\n\r\nThis sample does something with files reading to gather some ideas: https://github.com/spring-projects/spring-integration-samples/tree/main/applications/file-split-ftp","title":"How to poll a directory and if the any xlsx file copied in the directory call an REST api to load the feed","body":"<p>I believe that you are looking for fully working sample and I doubt that is going to be one since your business task might not be the same what other people are doing.</p>\n<p>Although we won't mind if you contribute back such a sample: <a href=\"https://github.com/spring-projects/spring-integration-samples\" rel=\"nofollow noreferrer\">https://github.com/spring-projects/spring-integration-samples</a>.</p>\n<ol>\n<li><p>So, to build a logic we need to provide an <code>IntegrationFlow</code>: <a href=\"https://docs.spring.io/spring-integration/docs/current/reference/html/dsl.html#java-dsl\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-integration/docs/current/reference/html/dsl.html#java-dsl</a>.</p>\n</li>\n<li><p>To read files from a dir we need to use a <code>Files.inboundAdapter()</code> with respective polling policy.</p>\n</li>\n<li><p>You may do some transformation (<code>.transform()</code>) about polled file content or so.</p>\n</li>\n<li><p>Call the REST service via <code>Http.outboundGateway()</code></p>\n</li>\n<li><p>Do the post-process.</p>\n</li>\n</ol>\n<p>Something like this:</p>\n<pre><code>    @Bean\n    public IntegrationFlow fileReadingFlow() {\n        return IntegrationFlows\n                .from(Files.inboundAdapter(new File(&quot;myDir&quot;))\n                                .patternFilter(&quot;*.xlsx&quot;),\n                        e -&gt; e.poller(Pollers.fixedDelay(1000)))\n                .transform(...)\n                .handle(Http.outboundGateway(&quot;&quot;)\n                        .expectedResponseType(String.class))\n                .transform(...)\n                .get();\n    }\n</code></pre>\n<p>(Haven't checked as working since I don't know what is your XSLT content and how you call the REST service.)</p>\n<p>This sample does something with files reading to gather some ideas: <a href=\"https://github.com/spring-projects/spring-integration-samples/tree/main/applications/file-split-ftp\" rel=\"nofollow noreferrer\">https://github.com/spring-projects/spring-integration-samples/tree/main/applications/file-split-ftp</a></p>\n"}],"owner":{"account_id":25444336,"reputation":3,"user_id":19246730,"display_name":"Shivendra"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":70,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":72464882,"answer_count":2,"score":0,"last_activity_date":1654099110,"creation_date":1654073526,"question_id":72458949,"body_markdown":"I have a use case, i want to poll a directory, if the any .*xlsx file get pasted in that directory, i want to call a post rest API that will load the data. \r\nI&#39;m not able to find the my way, please suggest some way to do this.\r\n","title":"How to poll a directory and if the any xlsx file copied in the directory call an REST api to load the feed","body":"<p>I have a use case, i want to poll a directory, if the any .*xlsx file get pasted in that directory, i want to call a post rest API that will load the data.\nI'm not able to find the my way, please suggest some way to do this.</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":13483165,"reputation":144,"user_id":9727790,"display_name":"Emerson Gonzalez"},"score":0,"creation_date":1654131783,"post_id":72464870,"comment_id":128020801,"body_markdown":"Check this https://stackoverflow.com/questions/23833977/android-wait-for-volley-response-to-return","body":"Check this <a href=\"https://stackoverflow.com/questions/23833977/android-wait-for-volley-response-to-return\" title=\"android wait for volley response to return\">stackoverflow.com/questions/23833977/&hellip;</a>"},{"owner":{"account_id":5850578,"reputation":1170,"user_id":4609353,"display_name":"Oleg Ushakov"},"score":0,"creation_date":1654192259,"post_id":72464870,"comment_id":128038494,"body_markdown":"Does this answer your question? [Android - Wait for volley response to return](https://stackoverflow.com/questions/23833977/android-wait-for-volley-response-to-return)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/23833977/android-wait-for-volley-response-to-return\">Android - Wait for volley response to return</a>"}],"owner":{"account_id":23207499,"reputation":49,"user_id":17301498,"display_name":"Mario Rovelli"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":17,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1654099078,"creation_date":1654099078,"question_id":72464870,"body_markdown":"I&#39;ve in android (Java) two sequential JsonObjectRequest tha call url1 first time and url2 second time\r\n \r\n```\r\npublic class ProvaActivity extends AppCompatActivity {\r\n\r\n\tprivate void resolveIntent(Intent intent) {\r\n        ...\r\n        JsonObjectRequest obreq = null;\r\n\r\n        obreq = new JsonObjectRequest(Request.Method.GET, url1, new Response.Listener&lt;JSONObject&gt;() {\t\t\t\t\t\r\n\r\n\t\t\t\t\t....\r\n\r\n \t    obreq = new JsonObjectRequest(Request.Method.GET, url2, new Response.Listener&lt;JSONObject&gt;() {\r\n                    ....\r\n\r\n}\r\n```\r\n\r\n\r\n\r\nI want second JsonObjectRequest is launched only when first one is finished.\r\nHow can i do that?\r\n\r\n","title":"Android Java two sequential JsonObjectRequest","body":"<p>I've in android (Java) two sequential JsonObjectRequest tha call url1 first time and url2 second time</p>\n<pre><code>public class ProvaActivity extends AppCompatActivity {\n\n    private void resolveIntent(Intent intent) {\n        ...\n        JsonObjectRequest obreq = null;\n\n        obreq = new JsonObjectRequest(Request.Method.GET, url1, new Response.Listener&lt;JSONObject&gt;() {                   \n\n                    ....\n\n        obreq = new JsonObjectRequest(Request.Method.GET, url2, new Response.Listener&lt;JSONObject&gt;() {\n                    ....\n\n}\n</code></pre>\n<p>I want second JsonObjectRequest is launched only when first one is finished.\nHow can i do that?</p>\n"},{"tags":["java","netty","spring-webflux"],"comments":[{"owner":{"account_id":14902543,"reputation":367,"user_id":10760963,"display_name":"sam3131"},"score":7,"creation_date":1563889163,"post_id":57152313,"comment_id":100844681,"body_markdown":"did you activate the netty logs on trace level ? cause in the terminal operation in channelOperation class u can read this code :            `if (log.isTraceEnabled()) {\n                log.trace(ReactorNetty.format(this.channel(), &quot;Disposing ChannelOperation from a channel&quot;), new Exception(&quot;ChannelOperation terminal stack&quot;));\n            }`","body":"did you activate the netty logs on trace level ? cause in the terminal operation in channelOperation class u can read this code :            <code>if (log.isTraceEnabled()) {                 log.trace(ReactorNetty.format(this.channel(), &quot;Disposing ChannelOperation from a channel&quot;), new Exception(&quot;ChannelOperation terminal stack&quot;));             }</code>"},{"owner":{"account_id":2206737,"reputation":2452,"user_id":1949771,"accept_rate":60,"display_name":"Nanor"},"score":2,"creation_date":1565637474,"post_id":57152313,"comment_id":101407302,"body_markdown":"Yeah, that&#39;s fixed it! Would you post it as an answer and I&#39;ll mark it correct?","body":"Yeah, that&#39;s fixed it! Would you post it as an answer and I&#39;ll mark it correct?"},{"owner":{"account_id":4515014,"reputation":156,"user_id":3670138,"display_name":"JavaHead1560"},"score":1,"creation_date":1627488167,"post_id":57152313,"comment_id":121171655,"body_markdown":"Nanor can you add the solution yourself? It seems @sam3131 didn&#39;t do it. Just for the sake of clarity. Thanks","body":"Nanor can you add the solution yourself? It seems @sam3131 didn&#39;t do it. Just for the sake of clarity. Thanks"}],"answers":[{"tags":[],"owner":{"account_id":14902543,"reputation":367,"user_id":10760963,"display_name":"sam3131"},"down_vote_count":1,"up_vote_count":7,"is_accepted":true,"score":6,"last_activity_date":1568397182,"creation_date":1568397182,"answer_id":57928296,"question_id":57152313,"body_markdown":"did you activate the netty logs on trace level ? cause in the terminal operation in channelOperation class u can read this code : if (log.isTraceEnabled()) { log.trace(ReactorNetty.format(this.channel(), &quot;Disposing ChannelOperation from a channel&quot;), new Exception(&quot;ChannelOperation terminal stack&quot;)); } ","title":"ChannelOperation terminal stack with Netty and WebFlux","body":"<p>did you activate the netty logs on trace level ? cause in the terminal operation in channelOperation class u can read this code : if (log.isTraceEnabled()) { log.trace(ReactorNetty.format(this.channel(), \"Disposing ChannelOperation from a channel\"), new Exception(\"ChannelOperation terminal stack\")); } </p>\n"}],"owner":{"account_id":2206737,"reputation":2452,"user_id":1949771,"accept_rate":60,"display_name":"Nanor"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6684,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"accepted_answer_id":57928296,"answer_count":1,"score":10,"last_activity_date":1654098410,"creation_date":1563822428,"question_id":57152313,"body_markdown":"I&#39;m working through *Learning Spring Boot 2.0 by Greg L. Turnquist* and I&#39;m getting a continuous spewing of errors with no idea how to debug them or even find them. I&#39;ve just finished Chapter 3 and any time I do anything on the site I get the following error:\r\n\r\n```\r\n2019-07-22 19:57:58.245 DEBUG 17404 --- [ctor-http-nio-3] r.n.http.server.HttpServerOperations     : [id: 0xbcb056a7, L:/0:0:0:0:0:0:0:1:8080 - R:/0:0:0:0:0:0:0:1:52374] Last HTTP response frame\r\n2019-07-22 19:57:58.245 DEBUG 17404 --- [ctor-http-nio-3] r.n.http.server.HttpServerOperations     : [id: 0xbcb056a7, L:/0:0:0:0:0:0:0:1:8080 - R:/0:0:0:0:0:0:0:1:52374] Decreasing pending responses, now 0\r\n2019-07-22 19:57:58.245 DEBUG 17404 --- [ctor-http-nio-3] r.n.http.server.HttpServerOperations     : [id: 0xbcb056a7, L:/0:0:0:0:0:0:0:1:8080 - R:/0:0:0:0:0:0:0:1:52374] Last HTTP packet was sent, terminating the channel\r\n2019-07-22 19:57:58.246 TRACE 17404 --- [ctor-http-nio-3] reactor.netty.channel.ChannelOperations  : [id: 0xbcb056a7, L:/0:0:0:0:0:0:0:1:8080 - R:/0:0:0:0:0:0:0:1:52374] Disposing ChannelOperation from a channel\r\n\r\njava.lang.Exception: ChannelOperation terminal stack\r\n\tat reactor.netty.channel.ChannelOperations.terminate(ChannelOperations.java:391) ~[reactor-netty-0.8.8.RELEASE.jar:0.8.8.RELEASE]\r\n\tat reactor.netty.http.server.HttpServerOperations.cleanHandlerTerminate(HttpServerOperations.java:519) ~[reactor-netty-0.8.8.RELEASE.jar:0.8.8.RELEASE]\r\n\tat reactor.netty.http.server.HttpTrafficHandler.operationComplete(HttpTrafficHandler.java:313) ~[reactor-netty-0.8.8.RELEASE.jar:0.8.8.RELEASE]\r\n\tat reactor.netty.http.server.HttpTrafficHandler.operationComplete(HttpTrafficHandler.java:54) ~[reactor-netty-0.8.8.RELEASE.jar:0.8.8.RELEASE]\r\n\tat io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:502) ~[netty-common-4.1.36.Final.jar:4.1.36.Final]\r\n\tat io.netty.util.concurrent.DefaultPromise.notifyListeners0(DefaultPromise.java:495) ~[netty-common-4.1.36.Final.jar:4.1.36.Final]\r\n\tat io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:474) ~[netty-common-4.1.36.Final.jar:4.1.36.Final]\r\n\tat io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:415) ~[netty-common-4.1.36.Final.jar:4.1.36.Final]\r\n\tat io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:540) ~[netty-common-4.1.36.Final.jar:4.1.36.Final]\r\n\tat io.netty.util.concurrent.DefaultPromise.setSuccess0(DefaultPromise.java:529) ~[netty-common-4.1.36.Final.jar:4.1.36.Final]\r\n\tat io.netty.util.concurrent.DefaultPromise.trySuccess(DefaultPromise.java:101) ~[netty-common-4.1.36.Final.jar:4.1.36.Final]\r\n\tat io.netty.util.internal.PromiseNotificationUtil.trySuccess(PromiseNotificationUtil.java:48) ~[netty-common-4.1.36.Final.jar:4.1.36.Final]\r\n\tat io.netty.channel.ChannelOutboundBuffer.safeSuccess(ChannelOutboundBuffer.java:715) ~[netty-transport-4.1.36.Final.jar:4.1.36.Final]\r\n\tat io.netty.channel.ChannelOutboundBuffer.remove(ChannelOutboundBuffer.java:270) ~[netty-transport-4.1.36.Final.jar:4.1.36.Final]\r\n\tat io.netty.channel.ChannelOutboundBuffer.removeBytes(ChannelOutboundBuffer.java:350) ~[netty-transport-4.1.36.Final.jar:4.1.36.Final]\r\n\tat io.netty.channel.socket.nio.NioSocketChannel.doWrite(NioSocketChannel.java:428) ~[netty-transport-4.1.36.Final.jar:4.1.36.Final]\r\n\tat io.netty.channel.AbstractChannel$AbstractUnsafe.flush0(AbstractChannel.java:939) ~[netty-transport-4.1.36.Final.jar:4.1.36.Final]\r\n\tat io.netty.channel.nio.AbstractNioChannel$AbstractNioUnsafe.flush0(AbstractNioChannel.java:360) ~[netty-transport-4.1.36.Final.jar:4.1.36.Final]\r\n\tat io.netty.channel.nio.AbstractNioByteChannel$1.run(AbstractNioByteChannel.java:54) ~[netty-transport-4.1.36.Final.jar:4.1.36.Final]\r\n\tat io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:163) ~[netty-common-4.1.36.Final.jar:4.1.36.Final]\r\n\tat io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:405) ~[netty-common-4.1.36.Final.jar:4.1.36.Final]\r\n\tat io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:500) ~[netty-transport-4.1.36.Final.jar:4.1.36.Final]\r\n\tat io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:906) ~[netty-common-4.1.36.Final.jar:4.1.36.Final]\r\n\tat io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) ~[netty-common-4.1.36.Final.jar:4.1.36.Final]\r\n\tat java.base/java.lang.Thread.run(Thread.java:835) ~[na:na]\r\n```\r\n\r\nI could just clone his repository (and I probably will) but I would like to know what the problem is here and how I can identify the root of similar problems should I encounter them again. None of the files in the stack trace are my code so I don&#39;t know what code snippets I could provide you to help.\r\n","title":"ChannelOperation terminal stack with Netty and WebFlux","body":"<p>I'm working through <em>Learning Spring Boot 2.0 by Greg L. Turnquist</em> and I'm getting a continuous spewing of errors with no idea how to debug them or even find them. I've just finished Chapter 3 and any time I do anything on the site I get the following error:</p>\n\n<pre><code>2019-07-22 19:57:58.245 DEBUG 17404 --- [ctor-http-nio-3] r.n.http.server.HttpServerOperations     : [id: 0xbcb056a7, L:/0:0:0:0:0:0:0:1:8080 - R:/0:0:0:0:0:0:0:1:52374] Last HTTP response frame\n2019-07-22 19:57:58.245 DEBUG 17404 --- [ctor-http-nio-3] r.n.http.server.HttpServerOperations     : [id: 0xbcb056a7, L:/0:0:0:0:0:0:0:1:8080 - R:/0:0:0:0:0:0:0:1:52374] Decreasing pending responses, now 0\n2019-07-22 19:57:58.245 DEBUG 17404 --- [ctor-http-nio-3] r.n.http.server.HttpServerOperations     : [id: 0xbcb056a7, L:/0:0:0:0:0:0:0:1:8080 - R:/0:0:0:0:0:0:0:1:52374] Last HTTP packet was sent, terminating the channel\n2019-07-22 19:57:58.246 TRACE 17404 --- [ctor-http-nio-3] reactor.netty.channel.ChannelOperations  : [id: 0xbcb056a7, L:/0:0:0:0:0:0:0:1:8080 - R:/0:0:0:0:0:0:0:1:52374] Disposing ChannelOperation from a channel\n\njava.lang.Exception: ChannelOperation terminal stack\n    at reactor.netty.channel.ChannelOperations.terminate(ChannelOperations.java:391) ~[reactor-netty-0.8.8.RELEASE.jar:0.8.8.RELEASE]\n    at reactor.netty.http.server.HttpServerOperations.cleanHandlerTerminate(HttpServerOperations.java:519) ~[reactor-netty-0.8.8.RELEASE.jar:0.8.8.RELEASE]\n    at reactor.netty.http.server.HttpTrafficHandler.operationComplete(HttpTrafficHandler.java:313) ~[reactor-netty-0.8.8.RELEASE.jar:0.8.8.RELEASE]\n    at reactor.netty.http.server.HttpTrafficHandler.operationComplete(HttpTrafficHandler.java:54) ~[reactor-netty-0.8.8.RELEASE.jar:0.8.8.RELEASE]\n    at io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:502) ~[netty-common-4.1.36.Final.jar:4.1.36.Final]\n    at io.netty.util.concurrent.DefaultPromise.notifyListeners0(DefaultPromise.java:495) ~[netty-common-4.1.36.Final.jar:4.1.36.Final]\n    at io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:474) ~[netty-common-4.1.36.Final.jar:4.1.36.Final]\n    at io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:415) ~[netty-common-4.1.36.Final.jar:4.1.36.Final]\n    at io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:540) ~[netty-common-4.1.36.Final.jar:4.1.36.Final]\n    at io.netty.util.concurrent.DefaultPromise.setSuccess0(DefaultPromise.java:529) ~[netty-common-4.1.36.Final.jar:4.1.36.Final]\n    at io.netty.util.concurrent.DefaultPromise.trySuccess(DefaultPromise.java:101) ~[netty-common-4.1.36.Final.jar:4.1.36.Final]\n    at io.netty.util.internal.PromiseNotificationUtil.trySuccess(PromiseNotificationUtil.java:48) ~[netty-common-4.1.36.Final.jar:4.1.36.Final]\n    at io.netty.channel.ChannelOutboundBuffer.safeSuccess(ChannelOutboundBuffer.java:715) ~[netty-transport-4.1.36.Final.jar:4.1.36.Final]\n    at io.netty.channel.ChannelOutboundBuffer.remove(ChannelOutboundBuffer.java:270) ~[netty-transport-4.1.36.Final.jar:4.1.36.Final]\n    at io.netty.channel.ChannelOutboundBuffer.removeBytes(ChannelOutboundBuffer.java:350) ~[netty-transport-4.1.36.Final.jar:4.1.36.Final]\n    at io.netty.channel.socket.nio.NioSocketChannel.doWrite(NioSocketChannel.java:428) ~[netty-transport-4.1.36.Final.jar:4.1.36.Final]\n    at io.netty.channel.AbstractChannel$AbstractUnsafe.flush0(AbstractChannel.java:939) ~[netty-transport-4.1.36.Final.jar:4.1.36.Final]\n    at io.netty.channel.nio.AbstractNioChannel$AbstractNioUnsafe.flush0(AbstractNioChannel.java:360) ~[netty-transport-4.1.36.Final.jar:4.1.36.Final]\n    at io.netty.channel.nio.AbstractNioByteChannel$1.run(AbstractNioByteChannel.java:54) ~[netty-transport-4.1.36.Final.jar:4.1.36.Final]\n    at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:163) ~[netty-common-4.1.36.Final.jar:4.1.36.Final]\n    at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:405) ~[netty-common-4.1.36.Final.jar:4.1.36.Final]\n    at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:500) ~[netty-transport-4.1.36.Final.jar:4.1.36.Final]\n    at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:906) ~[netty-common-4.1.36.Final.jar:4.1.36.Final]\n    at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) ~[netty-common-4.1.36.Final.jar:4.1.36.Final]\n    at java.base/java.lang.Thread.run(Thread.java:835) ~[na:na]\n</code></pre>\n\n<p>I could just clone his repository (and I probably will) but I would like to know what the problem is here and how I can identify the root of similar problems should I encounter them again. None of the files in the stack trace are my code so I don't know what code snippets I could provide you to help.</p>\n"},{"tags":["java","spring","spring-boot","spring-security"],"comments":[{"owner":{"account_id":9763630,"reputation":16595,"user_id":7237884,"display_name":"Panagiotis Bougioukos"},"score":0,"creation_date":1647964586,"post_id":71575055,"comment_id":126501215,"body_markdown":"Does this answer your question? [How let spring security response unauthorized(http 401 code) if requesting uri without authentication](https://stackoverflow.com/questions/33801468/how-let-spring-security-response-unauthorizedhttp-401-code-if-requesting-uri-w)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/33801468/how-let-spring-security-response-unauthorizedhttp-401-code-if-requesting-uri-w\">How let spring security response unauthorized(http 401 code) if requesting uri without authentication</a>"},{"owner":{"account_id":4477746,"reputation":1014,"user_id":3642410,"accept_rate":100,"display_name":"Karim"},"score":0,"creation_date":1647964824,"post_id":71575055,"comment_id":126501335,"body_markdown":"From a security standpoint never let the user know if his password is incorrect or his username is not found.","body":"From a security standpoint never let the user know if his password is incorrect or his username is not found."},{"owner":{"account_id":5361744,"reputation":63,"user_id":4272784,"display_name":"Piotr Chabros"},"score":0,"creation_date":1647965371,"post_id":71575055,"comment_id":126501583,"body_markdown":"@Karim right, right, I know about this, but we want to let the user know","body":"@Karim right, right, I know about this, but we want to let the user know"}],"answers":[{"tags":[],"owner":{"account_id":5361744,"reputation":63,"user_id":4272784,"display_name":"Piotr Chabros"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1647966217,"creation_date":1647966217,"answer_id":71575521,"question_id":71575055,"body_markdown":"I figured it out, I needed to put the &quot;return&quot; keyword before the end of the method. ","title":"Change response status onUnsuccessfulAuthentication","body":"<p>I figured it out, I needed to put the &quot;return&quot; keyword before the end of the method.</p>\n"}],"owner":{"account_id":5361744,"reputation":63,"user_id":4272784,"display_name":"Piotr Chabros"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":416,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1654098013,"creation_date":1647964199,"question_id":71575055,"body_markdown":"The whole purpose of this is to have a different error message on the frontend when the user is blocked, a different message when the username is not found and when the password is incorrect.\r\n\r\n```\r\npublic class CustomAuthenticationFilter extends UsernamePasswordAuthenticationFilter {\r\n\r\n    @Override\r\n    public void unsuccessfulAuthentication(HttpServletRequest request, HttpServletResponse response,\r\n                                           AuthenticationException exception) throws IOException, ServletException {\r\n        if (exception.getMessage().contains(&quot;404&quot;)) {\r\n            response.sendError(HttpServletResponse.SC_NOT_FOUND);\r\n        } else if (exception.getMessage().contains(&quot;disabled&quot;)) {\r\n            response.sendError(HttpServletResponse.SC_CONFLICT);\r\n            response.setStatus(HttpServletResponse.SC_CONFLICT);\r\n            response.setHeader(&quot;test&quot;, &quot;test&quot;);\r\n        }\r\n        super.unsuccessfulAuthentication(request, response, exception);\r\n    }\r\n}\r\n```\r\n\r\nI am trying to change the response error status based on the message of the exception.\r\n\r\nThis class extends the `UsernamePasswordAuthenticationFilter` and overrides the `unsuccessfulAuthentication` method. The `unsuccessfulAuthentication` method is called each time the authentication is unsuccessful.\r\n\r\n**Even though the response status is set to e.g. conflict, the browser receives 403 unauthorized error.**\r\n\r\nI don&#39;t seem to be able to modify the response status and message/output in any way.\r\n\r\nWhat kind of solution would you recommend to solve this issue?  ","title":"Change response status onUnsuccessfulAuthentication","body":"<p>The whole purpose of this is to have a different error message on the frontend when the user is blocked, a different message when the username is not found and when the password is incorrect.</p>\n<pre><code>public class CustomAuthenticationFilter extends UsernamePasswordAuthenticationFilter {\n\n    @Override\n    public void unsuccessfulAuthentication(HttpServletRequest request, HttpServletResponse response,\n                                           AuthenticationException exception) throws IOException, ServletException {\n        if (exception.getMessage().contains(&quot;404&quot;)) {\n            response.sendError(HttpServletResponse.SC_NOT_FOUND);\n        } else if (exception.getMessage().contains(&quot;disabled&quot;)) {\n            response.sendError(HttpServletResponse.SC_CONFLICT);\n            response.setStatus(HttpServletResponse.SC_CONFLICT);\n            response.setHeader(&quot;test&quot;, &quot;test&quot;);\n        }\n        super.unsuccessfulAuthentication(request, response, exception);\n    }\n}\n</code></pre>\n<p>I am trying to change the response error status based on the message of the exception.</p>\n<p>This class extends the <code>UsernamePasswordAuthenticationFilter</code> and overrides the <code>unsuccessfulAuthentication</code> method. The <code>unsuccessfulAuthentication</code> method is called each time the authentication is unsuccessful.</p>\n<p><strong>Even though the response status is set to e.g. conflict, the browser receives 403 unauthorized error.</strong></p>\n<p>I don't seem to be able to modify the response status and message/output in any way.</p>\n<p>What kind of solution would you recommend to solve this issue?</p>\n"},{"tags":["java","android","kotlin","android-camera","flashlight"],"answers":[{"tags":[],"owner":{"account_id":14043095,"reputation":193,"user_id":10144058,"display_name":"Abhinav Prakash"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1654097986,"creation_date":1654097986,"answer_id":72464625,"question_id":72398145,"body_markdown":"Found a solution where you could enable torch while using androidx.camera.view.PreviewView\r\n\r\n    @RequiresApi(Build.VERSION_CODES.M)\r\n    private fun flashlightOff() {\r\n        camera.cameraControl.enableTorch(false)\r\n    }\r\n\r\n    @RequiresApi(Build.VERSION_CODES.M)\r\n    private fun flashlightOn() {\r\n        camera.cameraControl.enableTorch(true)\r\n    }\r\n\r\nAlso make sure to add `camera.cameraInfo.hasFlashUnit()` after initializing camera","title":"Turning on flashlight while using camera preview","body":"<p>Found a solution where you could enable torch while using androidx.camera.view.PreviewView</p>\n<pre><code>@RequiresApi(Build.VERSION_CODES.M)\nprivate fun flashlightOff() {\n    camera.cameraControl.enableTorch(false)\n}\n\n@RequiresApi(Build.VERSION_CODES.M)\nprivate fun flashlightOn() {\n    camera.cameraControl.enableTorch(true)\n}\n</code></pre>\n<p>Also make sure to add <code>camera.cameraInfo.hasFlashUnit()</code> after initializing camera</p>\n"}],"owner":{"account_id":14043095,"reputation":193,"user_id":10144058,"display_name":"Abhinav Prakash"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":553,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1654097986,"creation_date":1653600103,"question_id":72398145,"body_markdown":"I have the standard code of toggling flashlight:\r\n\r\n        @RequiresApi(Build.VERSION_CODES.M)\r\n        private fun flashlightOff() {\r\n            val cameraManager: CameraManager = getSystemService(Context.CAMERA_SERVICE) as CameraManager\r\n            val cameraId = cameraManager.cameraIdList[0]\r\n            cameraManager.setTorchMode(cameraId, false)\r\n        }\r\n    \r\n        @RequiresApi(Build.VERSION_CODES.M)\r\n        private fun flashlightOn() {\r\n            val cameraManager: CameraManager = getSystemService(Context.CAMERA_SERVICE) as CameraManager\r\n            val cameraId = cameraManager.cameraIdList[0]\r\n            cameraManager.setTorchMode(cameraId, true)\r\n        }\r\n\r\nHowever, this logic fails if I use it with a camera preview (i.e &lt;androidx.camera.view.PreviewView). Is there any way to override the flashlight while using the camera or a completely different logic than mentioned above?\r\n\r\nThe code I use to start the camera preview is below:\r\n\r\n        private fun startCamera() {\r\n        val cameraProviderFuture = ProcessCameraProvider.getInstance(this)\r\n        cameraProviderFuture.addListener(Runnable {\r\n            // Used to bind the lifecycle of cameras to the lifecycle owner\r\n            val cameraProvider: ProcessCameraProvider = cameraProviderFuture.get()\r\n\r\n            // Preview\r\n            val preview = Preview.Builder()\r\n                    .build()\r\n                    .also {\r\n                        it.setSurfaceProvider(viewFinder.createSurfaceProvider())\r\n                    }\r\n\r\n            imageCapture = ImageCapture.Builder().build()\r\n\r\n            // Select back camera as a default\r\n            val cameraSelector = CameraSelector.DEFAULT_BACK_CAMERA\r\n\r\n            try {\r\n                // Unbind use cases before rebinding\r\n                cameraProvider.unbindAll()\r\n\r\n                // Bind use cases to camera\r\n                camera = cameraProvider.bindToLifecycle(this, cameraSelector, preview, imageCapture)\r\n                camera!!.cameraControl.setLinearZoom(.50F)\r\n            } catch (exc: Exception) {\r\n                Log.e(TAG, &quot;Use case binding failed&quot;, exc)\r\n            }\r\n\r\n        }, ContextCompat.getMainExecutor(this))\r\n    }","title":"Turning on flashlight while using camera preview","body":"<p>I have the standard code of toggling flashlight:</p>\n<pre><code>    @RequiresApi(Build.VERSION_CODES.M)\n    private fun flashlightOff() {\n        val cameraManager: CameraManager = getSystemService(Context.CAMERA_SERVICE) as CameraManager\n        val cameraId = cameraManager.cameraIdList[0]\n        cameraManager.setTorchMode(cameraId, false)\n    }\n\n    @RequiresApi(Build.VERSION_CODES.M)\n    private fun flashlightOn() {\n        val cameraManager: CameraManager = getSystemService(Context.CAMERA_SERVICE) as CameraManager\n        val cameraId = cameraManager.cameraIdList[0]\n        cameraManager.setTorchMode(cameraId, true)\n    }\n</code></pre>\n<p>However, this logic fails if I use it with a camera preview (i.e &lt;androidx.camera.view.PreviewView). Is there any way to override the flashlight while using the camera or a completely different logic than mentioned above?</p>\n<p>The code I use to start the camera preview is below:</p>\n<pre><code>    private fun startCamera() {\n    val cameraProviderFuture = ProcessCameraProvider.getInstance(this)\n    cameraProviderFuture.addListener(Runnable {\n        // Used to bind the lifecycle of cameras to the lifecycle owner\n        val cameraProvider: ProcessCameraProvider = cameraProviderFuture.get()\n\n        // Preview\n        val preview = Preview.Builder()\n                .build()\n                .also {\n                    it.setSurfaceProvider(viewFinder.createSurfaceProvider())\n                }\n\n        imageCapture = ImageCapture.Builder().build()\n\n        // Select back camera as a default\n        val cameraSelector = CameraSelector.DEFAULT_BACK_CAMERA\n\n        try {\n            // Unbind use cases before rebinding\n            cameraProvider.unbindAll()\n\n            // Bind use cases to camera\n            camera = cameraProvider.bindToLifecycle(this, cameraSelector, preview, imageCapture)\n            camera!!.cameraControl.setLinearZoom(.50F)\n        } catch (exc: Exception) {\n            Log.e(TAG, &quot;Use case binding failed&quot;, exc)\n        }\n\n    }, ContextCompat.getMainExecutor(this))\n}\n</code></pre>\n"},{"tags":["javascript","java","reactjs","spring","authentication"],"answers":[{"tags":[],"owner":{"account_id":15894846,"reputation":649,"user_id":11468868,"display_name":"prohit"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1654097890,"creation_date":1654097890,"answer_id":72464602,"question_id":72463132,"body_markdown":"You&#39;re sending to `http://localhost:8080/registration` but defined the route as `localhost:8080/register`","title":"Axios post request not sending data or recieving response","body":"<p>You're sending to <code>http://localhost:8080/registration</code> but defined the route as <code>localhost:8080/register</code></p>\n"}],"owner":{"account_id":25160481,"reputation":11,"user_id":19004735,"display_name":"Daniel Portnoy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":81,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1654097890,"creation_date":1654091966,"question_id":72463132,"body_markdown":"This is my first time trying to do basic authentication and nothing seems to be working. Axios post is not sending data/controllers not returning a response. I cant find exactly where I am going wrong, but I am wondering if the body of my http post request has to match requestbody or what I need to change to get userrepositroy to save form dat in database?\r\n    \r\n    const Login = () =&gt; {\r\n    \r\n        const [registration, setRegistration] = useState(&quot;true&quot;);\r\n    \r\n        const [email, setEmail] = useState(&quot;&quot;);\r\n        const [regPwd, setRegPwd] = useState(&quot;&quot;);\r\n        const [regUsername, setRegUsername] = useState(&quot;&quot;);\r\n    \r\n        const [logUsername, setLogUsername] = useState(&quot;&quot;);\r\n        const [logPwd, setLogPwd] = useState(&quot;&quot;);\r\n    \r\n        const redirect = useNavigate();\r\n    \r\n        const handleRegSubmit = async (e) =&gt; {\r\n            e.preventDefault();\r\n            const registerDTO = {\r\n                email: email,\r\n                username: regUsername,\r\n                password: regPwd\r\n            }\r\n            try {\r\n                const response = await axios.post(&#39;http://localhost:8080/registration&#39;,\r\n                     {registerDTO} )\r\n                    if (response.status === 200) {\r\n                        redirect(&quot;/user/${username}&quot;)\r\n                    } else {\r\n                        setEmail(&quot;&quot;)\r\n                        setRegUsername(&quot;&quot;)\r\n                        setRegPwd(&quot;&quot;)\r\n                    }\r\n            }\r\n            catch (error) {\r\n                console.log(error)\r\n            }\r\n        }\r\n    \r\n        const handleLogSubmit = async (e) =&gt; {\r\n            e.preventDefault();\r\n            const logUser = {\r\n                username: logUsername,\r\n                password: logPwd\r\n            }\r\n            try {\r\n                const response = await axios.post(&#39;http://localhost:8080/login&#39;,\r\n                    { logUser })\r\n                    if (response.status === 200) {\r\n                        redirect(&quot;/user/${username}&quot;)\r\n                    } else {\r\n                        setLogUsername(&quot;&quot;)\r\n                        setLogPwd(&quot;&quot;)\r\n                    }\r\n            }\r\n            catch (error) {\r\n                console.log(error)\r\n            };   \r\n        }\r\n    \r\n    \r\n    \r\n    \r\n    Spring boot\r\n\r\n    \r\n    \r\n    @CrossOrigin(origins= &quot;http://localhost:3000&quot;)\r\n    @RestController\r\n    @RequestMapping(&quot;&quot;)\r\n    public class AuthenticationController {\r\n    \r\n        @Autowired\r\n        UserRepository userRepository;\r\n    \r\n           \r\n        @PostMapping(&quot;/register&quot;)\r\n        public ResponseEntity&lt;Object&gt; processRegistration(@RequestBody @Valid RegisterDTO registerDTO,\r\n                                                          BindingResult bindingResult, HttpServletRequest request) {\r\n    \r\n            if (bindingResult.hasErrors()) {\r\n                return ResponseEntity.badRequest().body(&quot;An error occurred!&quot;);\r\n            }\r\n    \r\n            User existingUser = userRepository.findByUsername(registerDTO.getUsername());\r\n    \r\n            if (existingUser != null) {\r\n                return ResponseEntity.badRequest().body(&quot;Username already exists!&quot;);\r\n            }\r\n    \r\n    \r\n            User user = new User(registerDTO.getEmail(), registerDTO.getUsername(), registerDTO.getPassword());\r\n            userRepository.save(user);\r\n    \r\n            return ResponseEntity.ok().body(user);\r\n        }\r\n    \r\n        @PostMapping(&quot;/login&quot;)\r\n        public ResponseEntity&lt;Object&gt; processLogin(@RequestBody @Valid LoginDTO loginDTO,\r\n                                                   BindingResult bindingResult,HttpServletRequest request) {\r\n    \r\n            if (bindingResult.hasErrors()) {\r\n                return ResponseEntity.badRequest().body(&quot;An error occurred!&quot;);\r\n            }\r\n    \r\n            User user = userRepository.findByUsername(loginDTO.getUsername());\r\n    \r\n            if (user == null) {\r\n                return ResponseEntity.badRequest().body(&quot;Username does not exist!&quot;);\r\n            }\r\n    \r\n            String password = loginDTO.getPassword();\r\n    \r\n            if (!user.isMatchingPassword(password)) {\r\n                return ResponseEntity.badRequest().body(&quot;Invalid password!&quot;);\r\n            }\r\n    \r\n            return ResponseEntity.ok(user);\r\n        }\r\n\r\n}\r\n","title":"Axios post request not sending data or recieving response","body":"<p>This is my first time trying to do basic authentication and nothing seems to be working. Axios post is not sending data/controllers not returning a response. I cant find exactly where I am going wrong, but I am wondering if the body of my http post request has to match requestbody or what I need to change to get userrepositroy to save form dat in database?</p>\n<pre><code>const Login = () =&gt; {\n\n    const [registration, setRegistration] = useState(&quot;true&quot;);\n\n    const [email, setEmail] = useState(&quot;&quot;);\n    const [regPwd, setRegPwd] = useState(&quot;&quot;);\n    const [regUsername, setRegUsername] = useState(&quot;&quot;);\n\n    const [logUsername, setLogUsername] = useState(&quot;&quot;);\n    const [logPwd, setLogPwd] = useState(&quot;&quot;);\n\n    const redirect = useNavigate();\n\n    const handleRegSubmit = async (e) =&gt; {\n        e.preventDefault();\n        const registerDTO = {\n            email: email,\n            username: regUsername,\n            password: regPwd\n        }\n        try {\n            const response = await axios.post('http://localhost:8080/registration',\n                 {registerDTO} )\n                if (response.status === 200) {\n                    redirect(&quot;/user/${username}&quot;)\n                } else {\n                    setEmail(&quot;&quot;)\n                    setRegUsername(&quot;&quot;)\n                    setRegPwd(&quot;&quot;)\n                }\n        }\n        catch (error) {\n            console.log(error)\n        }\n    }\n\n    const handleLogSubmit = async (e) =&gt; {\n        e.preventDefault();\n        const logUser = {\n            username: logUsername,\n            password: logPwd\n        }\n        try {\n            const response = await axios.post('http://localhost:8080/login',\n                { logUser })\n                if (response.status === 200) {\n                    redirect(&quot;/user/${username}&quot;)\n                } else {\n                    setLogUsername(&quot;&quot;)\n                    setLogPwd(&quot;&quot;)\n                }\n        }\n        catch (error) {\n            console.log(error)\n        };   \n    }\n\n\n\n\nSpring boot\n\n\n\n@CrossOrigin(origins= &quot;http://localhost:3000&quot;)\n@RestController\n@RequestMapping(&quot;&quot;)\npublic class AuthenticationController {\n\n    @Autowired\n    UserRepository userRepository;\n\n       \n    @PostMapping(&quot;/register&quot;)\n    public ResponseEntity&lt;Object&gt; processRegistration(@RequestBody @Valid RegisterDTO registerDTO,\n                                                      BindingResult bindingResult, HttpServletRequest request) {\n\n        if (bindingResult.hasErrors()) {\n            return ResponseEntity.badRequest().body(&quot;An error occurred!&quot;);\n        }\n\n        User existingUser = userRepository.findByUsername(registerDTO.getUsername());\n\n        if (existingUser != null) {\n            return ResponseEntity.badRequest().body(&quot;Username already exists!&quot;);\n        }\n\n\n        User user = new User(registerDTO.getEmail(), registerDTO.getUsername(), registerDTO.getPassword());\n        userRepository.save(user);\n\n        return ResponseEntity.ok().body(user);\n    }\n\n    @PostMapping(&quot;/login&quot;)\n    public ResponseEntity&lt;Object&gt; processLogin(@RequestBody @Valid LoginDTO loginDTO,\n                                               BindingResult bindingResult,HttpServletRequest request) {\n\n        if (bindingResult.hasErrors()) {\n            return ResponseEntity.badRequest().body(&quot;An error occurred!&quot;);\n        }\n\n        User user = userRepository.findByUsername(loginDTO.getUsername());\n\n        if (user == null) {\n            return ResponseEntity.badRequest().body(&quot;Username does not exist!&quot;);\n        }\n\n        String password = loginDTO.getPassword();\n\n        if (!user.isMatchingPassword(password)) {\n            return ResponseEntity.badRequest().body(&quot;Invalid password!&quot;);\n        }\n\n        return ResponseEntity.ok(user);\n    }\n</code></pre>\n<p>}</p>\n"},{"tags":["java"],"comments":[{"owner":{"display_name":"user6073886"},"score":0,"creation_date":1654085593,"post_id":72461610,"comment_id":128007141,"body_markdown":"Strings are immutable meaning once created they cannot be changed/modified. Any method you call on a String that modifies the String will therefor always return the modified String. `.replace(&quot;,&quot;, &quot;&quot;);` Will return you the new String with the replacement, but neither modify the String the method was called on nor have any effect on your Stringbuilder. Just use `string = string.replace(&quot;,&quot;, &quot;&quot;).` as the first cal in your method to do the desired modification and correctly save the returned new string in the variable","body":"Strings are immutable meaning once created they cannot be changed/modified. Any method you call on a String that modifies the String will therefor always return the modified String. <code>.replace(&quot;,&quot;, &quot;&quot;);</code> Will return you the new String with the replacement, but neither modify the String the method was called on nor have any effect on your Stringbuilder. Just use <code>string = string.replace(&quot;,&quot;, &quot;&quot;).</code> as the first cal in your method to do the desired modification and correctly save the returned new string in the variable"},{"owner":{"account_id":9571720,"reputation":6305,"user_id":7109162,"accept_rate":84,"display_name":"XtremeBaumer"},"score":1,"creation_date":1654085618,"post_id":72461610,"comment_id":128007150,"body_markdown":"`return string.replace(&quot;,&quot;, &quot;&quot;).replace(&quot;[&quot;, &quot;&quot;).replace(&quot;]&quot;, &quot;&quot;);`","body":"<code>return string.replace(&quot;,&quot;, &quot;&quot;).replace(&quot;[&quot;, &quot;&quot;).replace(&quot;]&quot;, &quot;&quot;);</code>"},{"owner":{"account_id":9571720,"reputation":6305,"user_id":7109162,"accept_rate":84,"display_name":"XtremeBaumer"},"score":0,"creation_date":1654085676,"post_id":72461610,"comment_id":128007170,"body_markdown":"Or with a regex: `return string.replaceAll(&quot;\\\\[|\\\\]|,&quot;, &quot;&quot;);`","body":"Or with a regex: <code>return string.replaceAll(&quot;\\\\[|\\\\]|,&quot;, &quot;&quot;);</code>"}],"answers":[{"tags":[],"owner":{"account_id":10455291,"reputation":1835,"user_id":7707631,"display_name":"Stefan Warminski"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1654085618,"creation_date":1654085618,"answer_id":72461708,"question_id":72461610,"body_markdown":"`str.toString()` returns the current string content.\r\nWith `str.toString().replace(&quot;,&quot;, &quot;&quot;)` you create a new `String` (`String` is final) without comma but you don&#39;t use this value.\r\nSo you can directly `return str.toString().replace(&quot;,&quot;, &quot;&quot;);`","title":"Remove a character from a transformed String which may come or may not come in a String","body":"<p><code>str.toString()</code> returns the current string content.\nWith <code>str.toString().replace(&quot;,&quot;, &quot;&quot;)</code> you create a new <code>String</code> (<code>String</code> is final) without comma but you don't use this value.\nSo you can directly <code>return str.toString().replace(&quot;,&quot;, &quot;&quot;);</code></p>\n"},{"tags":[],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1654097826,"creation_date":1654097377,"answer_id":72464480,"question_id":72461610,"body_markdown":"The [Answer by Warminski][1] is correct. \r\n\r\nAnother approach is to filter a stream of the [code point][2] integer numbers that represent each character in the input string. \r\n\r\nWe want to filter out 44 for COMMA, 91 for LEFT SQUARE BRACKET, and 93 for RIGHT SQUARE BRACKET.\r\n\r\n    final int LEFT = &quot;[&quot;.codePointAt( 0 ) ;  // 91.\r\n    final int COMMA = &quot;,&quot;.codePointAt( 0 ) ;  // 44.\r\n    final int RIGHT = &quot;]&quot;.codePointAt( 0 ) ;  // 93.\r\n    String result = \r\n        &quot;[5,055]&quot;\r\n        .codePoints()\r\n        .filter( codePoint -&gt; ! ( ( codePoint == LEFT ) || ( codePoint == COMMA ) || ( codePoint == RIGHT ) ) )\r\n        .collect( StringBuilder::new , StringBuilder::appendCodePoint , StringBuilder::append )\r\n        .toString() \r\n    ;\r\n\r\nSee this [code run live at IdeOne.com][3]. \r\n\r\n&gt;5055\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/72461708/642706\r\n  [2]: https://en.m.wikipedia.org/wiki/Code_point\r\n  [3]: https://ideone.com/sNk58a","title":"Remove a character from a transformed String which may come or may not come in a String","body":"<p>The <a href=\"https://stackoverflow.com/a/72461708/642706\">Answer by Warminski</a> is correct.</p>\n<p>Another approach is to filter a stream of the <a href=\"https://en.m.wikipedia.org/wiki/Code_point\" rel=\"nofollow noreferrer\">code point</a> integer numbers that represent each character in the input string.</p>\n<p>We want to filter out 44 for COMMA, 91 for LEFT SQUARE BRACKET, and 93 for RIGHT SQUARE BRACKET.</p>\n<pre><code>final int LEFT = &quot;[&quot;.codePointAt( 0 ) ;  // 91.\nfinal int COMMA = &quot;,&quot;.codePointAt( 0 ) ;  // 44.\nfinal int RIGHT = &quot;]&quot;.codePointAt( 0 ) ;  // 93.\nString result = \n    &quot;[5,055]&quot;\n    .codePoints()\n    .filter( codePoint -&gt; ! ( ( codePoint == LEFT ) || ( codePoint == COMMA ) || ( codePoint == RIGHT ) ) )\n    .collect( StringBuilder::new , StringBuilder::appendCodePoint , StringBuilder::append )\n    .toString() \n;\n</code></pre>\n<p>See this <a href=\"https://ideone.com/sNk58a\" rel=\"nofollow noreferrer\">code run live at IdeOne.com</a>.</p>\n<blockquote>\n<p>5055</p>\n</blockquote>\n"}],"owner":{"account_id":24109599,"reputation":85,"user_id":18080361,"display_name":"Pratik P"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":72461708,"answer_count":2,"score":0,"last_activity_date":1654097826,"creation_date":1654085168,"question_id":72461610,"body_markdown":"I am trying to modify a String in such a way that it does not display the square braces as well as the character &#39;,&#39; in it. The comma character actually may or may not be displayed in the String but I am not able to remove that.\r\n\r\n    public static String removeSquareBracesFromStringForPgNumberValidation(String string) {\r\n    \t\t\r\n    \t\tStringBuilder str = new StringBuilder(string);\r\n    \t\tstr.deleteCharAt(0);\r\n    \t\tstr.deleteCharAt(string.length() - 2);\r\n    \t\ttry {\r\n    \t\t\tstr.toString().replace(&quot;,&quot;, &quot;&quot;);\r\n    \t\t} catch (Exception e) {\r\n    \t\t\te.printStackTrace();\r\n    \t\t}\r\n    \r\n    \t\treturn str.toString();\r\n\r\nThis is the code I am trying and if I pass &quot;[5,055]&quot; as an argument to this method, the output given is 5,055. The square braces are removed but the comma stays as it is. My expected output is 5055. The comma code I have added in try catch as it may or may not be displayed in the String which I pass as the argument. Please help me to achieve desired output. ","title":"Remove a character from a transformed String which may come or may not come in a String","body":"<p>I am trying to modify a String in such a way that it does not display the square braces as well as the character ',' in it. The comma character actually may or may not be displayed in the String but I am not able to remove that.</p>\n<pre><code>public static String removeSquareBracesFromStringForPgNumberValidation(String string) {\n        \n        StringBuilder str = new StringBuilder(string);\n        str.deleteCharAt(0);\n        str.deleteCharAt(string.length() - 2);\n        try {\n            str.toString().replace(&quot;,&quot;, &quot;&quot;);\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n\n        return str.toString();\n</code></pre>\n<p>This is the code I am trying and if I pass &quot;[5,055]&quot; as an argument to this method, the output given is 5,055. The square braces are removed but the comma stays as it is. My expected output is 5055. The comma code I have added in try catch as it may or may not be displayed in the String which I pass as the argument. Please help me to achieve desired output.</p>\n"},{"tags":["java","regex"],"answers":[{"tags":[],"owner":{"account_id":14854,"reputation":303,"user_id":30884,"accept_rate":60,"display_name":"Alon L"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1226224649,"creation_date":1226224649,"answer_id":275787,"question_id":2206378,"body_markdown":"I don&#39;t know Java too well, but if you can&#39;t find a Split method that does that, I suggest you just make your own.\r\n\r\n    string[] mySplit(string s,string delimiter)\r\n    {\r\n    \tstring[] result = s.Split(delimiter);\r\n    \tfor(int i=0;i&lt;result.Length-1;i++)\r\n    \t{\r\n    \t\tresult[i] += delimiter; //this one would add the delimiter to each items end except the last item, \r\n    \t\t\t\t\t//you can modify it however you want\r\n    \t}\r\n    }\r\n    string[] res = mySplit(myString,myDelimiter);\r\nIts not too elegant, but it&#39;ll do.","title":"How to split a string, but also keep the delimiters?","body":"<p>I don't know Java too well, but if you can't find a Split method that does that, I suggest you just make your own.</p>\n\n<pre><code>string[] mySplit(string s,string delimiter)\n{\n    string[] result = s.Split(delimiter);\n    for(int i=0;i&lt;result.Length-1;i++)\n    {\n        result[i] += delimiter; //this one would add the delimiter to each items end except the last item, \n                    //you can modify it however you want\n    }\n}\nstring[] res = mySplit(myString,myDelimiter);\n</code></pre>\n\n<p>Its not too elegant, but it'll do.</p>\n"},{"tags":[],"owner":{"account_id":8537,"reputation":40691,"user_id":15459,"accept_rate":70,"display_name":"PhiLho"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1226225311,"creation_date":1226224689,"answer_id":275788,"question_id":2206378,"body_markdown":"Fast answer: use non physical bounds like \\b to split. I will try and experiment to see if it works (used that in PHP and JS).\r\n\r\nIt is possible, and kind of work, but might split too much. Actually, it depends on the string you want to split and the result you need. Give more details, we will help you better.\r\n\r\nAnother way is to do your own split, capturing the delimiter (supposing it is variable) and adding it afterward to the result.\r\n\r\nMy quick test:\r\n\r\n    String str = &quot;&#39;ab&#39;,&#39;cd&#39;,&#39;eg&#39;&quot;;\r\n    String[] stra = str.split(&quot;\\\\b&quot;);\r\n    for (String s : stra) System.out.print(s + &quot;|&quot;);\r\n    System.out.println();\r\n\r\nResult:\r\n\r\n    &#39;|ab|&#39;,&#39;|cd|&#39;,&#39;|eg|&#39;|\r\n\r\nA bit too much... :-)","title":"How to split a string, but also keep the delimiters?","body":"<p>Fast answer: use non physical bounds like \\b to split. I will try and experiment to see if it works (used that in PHP and JS).</p>\n\n<p>It is possible, and kind of work, but might split too much. Actually, it depends on the string you want to split and the result you need. Give more details, we will help you better.</p>\n\n<p>Another way is to do your own split, capturing the delimiter (supposing it is variable) and adding it afterward to the result.</p>\n\n<p>My quick test:</p>\n\n<pre><code>String str = \"'ab','cd','eg'\";\nString[] stra = str.split(\"\\\\b\");\nfor (String s : stra) System.out.print(s + \"|\");\nSystem.out.println();\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>'|ab|','|cd|','|eg|'|\n</code></pre>\n\n<p>A bit too much... :-)</p>\n"},{"tags":[],"owner":{"account_id":16335,"reputation":1313,"user_id":35415,"display_name":"bdumitriu"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1226224749,"creation_date":1226224749,"answer_id":275790,"question_id":2206378,"body_markdown":"I don&#39;t know of an existing function in the Java API that does this (which is not to say it doesn&#39;t exist), but here&#39;s my own implementation (one or more delimiters will be returned as a single token; if you want each delimiter to be returned as a separate token, it will need a bit of adaptation):\r\n\r\n    static String[] splitWithDelimiters(String s) {\r\n        if (s == null || s.length() == 0) {\r\n            return new String[0];\r\n        }\r\n        LinkedList&lt;String&gt; result = new LinkedList&lt;String&gt;();\r\n        StringBuilder sb = null;\r\n        boolean wasLetterOrDigit = !Character.isLetterOrDigit(s.charAt(0));\r\n        for (char c : s.toCharArray()) {\r\n            if (Character.isLetterOrDigit(c) ^ wasLetterOrDigit) {\r\n                if (sb != null) {\r\n                    result.add(sb.toString());\r\n                }\r\n                sb = new StringBuilder();\r\n                wasLetterOrDigit = !wasLetterOrDigit;\r\n            }\r\n            sb.append(c);\r\n        }\r\n        result.add(sb.toString());\r\n        return result.toArray(new String[0]);\r\n    }","title":"How to split a string, but also keep the delimiters?","body":"<p>I don't know of an existing function in the Java API that does this (which is not to say it doesn't exist), but here's my own implementation (one or more delimiters will be returned as a single token; if you want each delimiter to be returned as a separate token, it will need a bit of adaptation):</p>\n\n<pre><code>static String[] splitWithDelimiters(String s) {\n    if (s == null || s.length() == 0) {\n        return new String[0];\n    }\n    LinkedList&lt;String&gt; result = new LinkedList&lt;String&gt;();\n    StringBuilder sb = null;\n    boolean wasLetterOrDigit = !Character.isLetterOrDigit(s.charAt(0));\n    for (char c : s.toCharArray()) {\n        if (Character.isLetterOrDigit(c) ^ wasLetterOrDigit) {\n            if (sb != null) {\n                result.add(sb.toString());\n            }\n            sb = new StringBuilder();\n            wasLetterOrDigit = !wasLetterOrDigit;\n        }\n        sb.append(c);\n    }\n    result.add(sb.toString());\n    return result.toArray(new String[0]);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4243,"reputation":1301840,"user_id":6309,"accept_rate":100,"display_name":"VonC"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1257841232,"creation_date":1226233390,"answer_id":275867,"question_id":2206378,"body_markdown":"I like the idea of StringTokenizer because it is Enumerable.  \r\nBut it is also obsolete, and replace by String.split which return a boring String[] (and does not includes the delimiters).\r\n\r\nSo I implemented a StringTokenizerEx which is an Iterable, and which takes a true regexp to split a string.\r\n\r\nA true regexp means it is not a &#39;Character sequence&#39; repeated to form the delimiter:  \r\n&#39;o&#39; will only match &#39;o&#39;, and split &#39;ooo&#39; into three delimiter, with two empty string inside:\r\n\r\n    [o], &#39;&#39;, [o], &#39;&#39;, [o]\r\n\r\nBut the regexp o+ will return the expected result when splitting &quot;aooob&quot;\r\n\r\n    [], &#39;a&#39;, [ooo], &#39;b&#39;, []\r\n\r\nTo use this StringTokenizerEx:\r\n\r\n    final StringTokenizerEx aStringTokenizerEx = new StringTokenizerEx(&quot;boo:and:foo&quot;, &quot;o+&quot;);\r\n    final String firstDelimiter = aStringTokenizerEx.getDelimiter();\r\n    for(String aString: aStringTokenizerEx )\r\n    {\r\n        // uses the split String detected and memorized in &#39;aString&#39;\r\n        final nextDelimiter = aStringTokenizerEx.getDelimiter();\r\n    }\r\n\r\nThe code of this class is available at **[DZone Snippets][1]**.\r\n\r\nAs usual for a [**code-challenge**][2] response (one self-contained class with test cases included), **copy-paste it** (in a &#39;src/test&#39; directory) and **run it**. Its main() method illustrates the different usages.\r\n\r\n----\r\n\r\nNote: (late 2009 edit)\r\n\r\nThe article [Final Thoughts: Java Puzzler: Splitting Hairs][3] does a good work explaning the bizarre behavior in `String.split()`.  \r\nJosh Bloch even commented in response to that article:\r\n\r\n&gt; Yes, this is a pain. FWIW, it was done for a very good reason: compatibility with Perl.  \r\nThe guy who did it is Mike &quot;madbot&quot; McCloskey, who now works with us at Google. Mike made sure that Java&#39;s regular expressions passed virtually every one of the 30K Perl regular expression tests (and ran faster).\r\n\r\n\r\nThe Google [**common-library Guava**][4] contains also a Splitter which is:\r\n\r\n- simpler to use\r\n- maintained by Google (and not by you)\r\n\r\nSo it may worth being checked out. From their [initial rough documentation  (pdf)][5]:\r\n\r\n&gt; JDK has this:\r\n\r\n    String[] pieces = &quot;foo.bar&quot;.split(&quot;\\\\.&quot;);\r\n\r\n&gt;It&#39;s fine to use this if you want exactly what it does:\r\n- regular expression\r\n- result as an array\r\n- its way of handling empty pieces\r\n\r\n&gt; Mini-puzzler: &quot;,a,,b,&quot;.split(&quot;,&quot;) returns...\r\n\r\n    (a) &quot;&quot;, &quot;a&quot;, &quot;&quot;, &quot;b&quot;, &quot;&quot;\r\n    (b) null, &quot;a&quot;, null, &quot;b&quot;, null\r\n    (c) &quot;a&quot;, null, &quot;b&quot;\r\n    (d) &quot;a&quot;, &quot;b&quot;\r\n    (e) None of the above\r\n\r\n&gt; Answer: (e) None of the above.\r\n\r\n    &quot;,a,,b,&quot;.split(&quot;,&quot;)\r\n    returns\r\n    &quot;&quot;, &quot;a&quot;, &quot;&quot;, &quot;b&quot;\r\n\r\n&gt; Only trailing empties are skipped! (Who knows the workaround to prevent the skipping? It&#39;s a fun one...)\r\n\r\n&gt; In any case, our Splitter is simply more flexible: The default behavior is simplistic:\r\n\r\n    Splitter.on(&#39;,&#39;).split(&quot; foo, ,bar, quux,&quot;)\r\n    --&gt; [&quot; foo&quot;, &quot; &quot;, &quot;bar&quot;, &quot; quux&quot;, &quot;&quot;]\r\n\r\n&gt;If you want extra features, ask for them!\r\n\r\n    Splitter.on(&#39;,&#39;)\r\n    .trimResults()\r\n    .omitEmptyStrings()\r\n    .split(&quot; foo, ,bar, quux,&quot;)\r\n    --&gt; [&quot;foo&quot;, &quot;bar&quot;, &quot;quux&quot;]\r\n\r\n&gt; Order of config methods doesn&#39;t matter -- during splitting, trimming happens before checking for empties.\r\n\r\n\r\n  [1]: http://snippets.dzone.com/posts/show/6450\r\n  [2]: https://stackoverflow.com/questions/172184\r\n  [3]: http://konigsberg.blogspot.com/2009/11/final-thoughts-java-puzzler-splitting.html\r\n  [4]: http://code.google.com/p/guava-libraries/\r\n  [5]: http://guava-libraries.googlecode.com/files/Guava_a_sketchy_overview.pdf\r\n\r\n\r\n\r\n","title":"How to split a string, but also keep the delimiters?","body":"<p>I like the idea of StringTokenizer because it is Enumerable.<br>\nBut it is also obsolete, and replace by String.split which return a boring String[] (and does not includes the delimiters).</p>\n\n<p>So I implemented a StringTokenizerEx which is an Iterable, and which takes a true regexp to split a string.</p>\n\n<p>A true regexp means it is not a 'Character sequence' repeated to form the delimiter:<br>\n'o' will only match 'o', and split 'ooo' into three delimiter, with two empty string inside:</p>\n\n<pre><code>[o], '', [o], '', [o]\n</code></pre>\n\n<p>But the regexp o+ will return the expected result when splitting \"aooob\"</p>\n\n<pre><code>[], 'a', [ooo], 'b', []\n</code></pre>\n\n<p>To use this StringTokenizerEx:</p>\n\n<pre><code>final StringTokenizerEx aStringTokenizerEx = new StringTokenizerEx(\"boo:and:foo\", \"o+\");\nfinal String firstDelimiter = aStringTokenizerEx.getDelimiter();\nfor(String aString: aStringTokenizerEx )\n{\n    // uses the split String detected and memorized in 'aString'\n    final nextDelimiter = aStringTokenizerEx.getDelimiter();\n}\n</code></pre>\n\n<p>The code of this class is available at <strong><a href=\"http://snippets.dzone.com/posts/show/6450\" rel=\"noreferrer\">DZone Snippets</a></strong>.</p>\n\n<p>As usual for a <a href=\"https://stackoverflow.com/questions/172184\"><strong>code-challenge</strong></a> response (one self-contained class with test cases included), <strong>copy-paste it</strong> (in a 'src/test' directory) and <strong>run it</strong>. Its main() method illustrates the different usages.</p>\n\n<hr>\n\n<p>Note: (late 2009 edit)</p>\n\n<p>The article <a href=\"http://konigsberg.blogspot.com/2009/11/final-thoughts-java-puzzler-splitting.html\" rel=\"noreferrer\">Final Thoughts: Java Puzzler: Splitting Hairs</a> does a good work explaning the bizarre behavior in <code>String.split()</code>.<br>\nJosh Bloch even commented in response to that article:</p>\n\n<blockquote>\n  <p>Yes, this is a pain. FWIW, it was done for a very good reason: compatibility with Perl.<br>\n  The guy who did it is Mike \"madbot\" McCloskey, who now works with us at Google. Mike made sure that Java's regular expressions passed virtually every one of the 30K Perl regular expression tests (and ran faster).</p>\n</blockquote>\n\n<p>The Google <a href=\"http://code.google.com/p/guava-libraries/\" rel=\"noreferrer\"><strong>common-library Guava</strong></a> contains also a Splitter which is:</p>\n\n<ul>\n<li>simpler to use</li>\n<li>maintained by Google (and not by you)</li>\n</ul>\n\n<p>So it may worth being checked out. From their <a href=\"http://guava-libraries.googlecode.com/files/Guava_a_sketchy_overview.pdf\" rel=\"noreferrer\">initial rough documentation  (pdf)</a>:</p>\n\n<blockquote>\n  <p>JDK has this:</p>\n</blockquote>\n\n<pre><code>String[] pieces = \"foo.bar\".split(\"\\\\.\");\n</code></pre>\n\n<blockquote>\n  <p>It's fine to use this if you want exactly what it does:\n  - regular expression\n  - result as an array\n  - its way of handling empty pieces</p>\n  \n  <p>Mini-puzzler: \",a,,b,\".split(\",\") returns...</p>\n</blockquote>\n\n<pre><code>(a) \"\", \"a\", \"\", \"b\", \"\"\n(b) null, \"a\", null, \"b\", null\n(c) \"a\", null, \"b\"\n(d) \"a\", \"b\"\n(e) None of the above\n</code></pre>\n\n<blockquote>\n  <p>Answer: (e) None of the above.</p>\n</blockquote>\n\n<pre><code>\",a,,b,\".split(\",\")\nreturns\n\"\", \"a\", \"\", \"b\"\n</code></pre>\n\n<blockquote>\n  <p>Only trailing empties are skipped! (Who knows the workaround to prevent the skipping? It's a fun one...)</p>\n  \n  <p>In any case, our Splitter is simply more flexible: The default behavior is simplistic:</p>\n</blockquote>\n\n<pre><code>Splitter.on(',').split(\" foo, ,bar, quux,\")\n--&gt; [\" foo\", \" \", \"bar\", \" quux\", \"\"]\n</code></pre>\n\n<blockquote>\n  <p>If you want extra features, ask for them!</p>\n</blockquote>\n\n<pre><code>Splitter.on(',')\n.trimResults()\n.omitEmptyStrings()\n.split(\" foo, ,bar, quux,\")\n--&gt; [\"foo\", \"bar\", \"quux\"]\n</code></pre>\n\n<blockquote>\n  <p>Order of config methods doesn't matter -- during splitting, trimming happens before checking for empties.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":11564,"reputation":87275,"user_id":22364,"accept_rate":100,"display_name":"Markus Jarderot"},"down_vote_count":2,"up_vote_count":28,"is_accepted":false,"score":26,"last_activity_date":1226305289,"creation_date":1226253119,"answer_id":276196,"question_id":2206378,"body_markdown":"    import java.util.regex.*;\r\n    import java.util.LinkedList;\r\n    \r\n    public class Splitter {\r\n        private static final Pattern DEFAULT_PATTERN = Pattern.compile(&quot;\\\\s+&quot;);\r\n    \r\n        private Pattern pattern;\r\n        private boolean keep_delimiters;\r\n    \r\n        public Splitter(Pattern pattern, boolean keep_delimiters) {\r\n            this.pattern = pattern;\r\n            this.keep_delimiters = keep_delimiters;\r\n        }\r\n        public Splitter(String pattern, boolean keep_delimiters) {\r\n            this(Pattern.compile(pattern==null?&quot;&quot;:pattern), keep_delimiters);\r\n        }\r\n        public Splitter(Pattern pattern) { this(pattern, true); }\r\n        public Splitter(String pattern) { this(pattern, true); }\r\n        public Splitter(boolean keep_delimiters) { this(DEFAULT_PATTERN, keep_delimiters); }\r\n        public Splitter() { this(DEFAULT_PATTERN); }\r\n    \r\n        public String[] split(String text) {\r\n            if (text == null) {\r\n                text = &quot;&quot;;\r\n            }\r\n    \r\n            int last_match = 0;\r\n            LinkedList&lt;String&gt; splitted = new LinkedList&lt;String&gt;();\r\n    \r\n            Matcher m = this.pattern.matcher(text);\r\n    \r\n            while (m.find()) {\r\n    \r\n                splitted.add(text.substring(last_match,m.start()));\r\n    \r\n                if (this.keep_delimiters) {\r\n                    splitted.add(m.group());\r\n                }\r\n    \r\n                last_match = m.end();\r\n            }\r\n    \r\n            splitted.add(text.substring(last_match));\r\n    \r\n            return splitted.toArray(new String[splitted.size()]);\r\n        }\r\n    \r\n        public static void main(String[] argv) {\r\n            if (argv.length != 2) {\r\n                System.err.println(&quot;Syntax: java Splitter &lt;pattern&gt; &lt;text&gt;&quot;);\r\n                return;\r\n            }\r\n    \r\n            Pattern pattern = null;\r\n            try {\r\n                pattern = Pattern.compile(argv[0]);\r\n            }\r\n            catch (PatternSyntaxException e) {\r\n                System.err.println(e);\r\n                return;\r\n            }\r\n    \r\n            Splitter splitter = new Splitter(pattern);\r\n    \r\n            String text = argv[1];\r\n            int counter = 1;\r\n            for (String part : splitter.split(text)) {\r\n                System.out.printf(&quot;Part %d: \\&quot;%s\\&quot;\\n&quot;, counter++, part);\r\n            }\r\n        }\r\n    }\r\n    \r\n    /*\r\n        Example:\r\n        &gt; java Splitter &quot;\\W+&quot; &quot;Hello World!&quot;\r\n        Part 1: &quot;Hello&quot;\r\n        Part 2: &quot; &quot;\r\n        Part 3: &quot;World&quot;\r\n        Part 4: &quot;!&quot;\r\n        Part 5: &quot;&quot;\r\n    */\r\n\r\nI don&#39;t really like the other way, where you get an empty element in front and back. A delimiter is usually not at the beginning or at the end of the string, thus you most often end up wasting two good array slots.\r\n\r\n**Edit:** Fixed limit cases. Commented source with test cases can be found here: &lt;http://snippets.dzone.com/posts/show/6453&gt;","title":"How to split a string, but also keep the delimiters?","body":"<pre><code>import java.util.regex.*;\nimport java.util.LinkedList;\n\npublic class Splitter {\n    private static final Pattern DEFAULT_PATTERN = Pattern.compile(\"\\\\s+\");\n\n    private Pattern pattern;\n    private boolean keep_delimiters;\n\n    public Splitter(Pattern pattern, boolean keep_delimiters) {\n        this.pattern = pattern;\n        this.keep_delimiters = keep_delimiters;\n    }\n    public Splitter(String pattern, boolean keep_delimiters) {\n        this(Pattern.compile(pattern==null?\"\":pattern), keep_delimiters);\n    }\n    public Splitter(Pattern pattern) { this(pattern, true); }\n    public Splitter(String pattern) { this(pattern, true); }\n    public Splitter(boolean keep_delimiters) { this(DEFAULT_PATTERN, keep_delimiters); }\n    public Splitter() { this(DEFAULT_PATTERN); }\n\n    public String[] split(String text) {\n        if (text == null) {\n            text = \"\";\n        }\n\n        int last_match = 0;\n        LinkedList&lt;String&gt; splitted = new LinkedList&lt;String&gt;();\n\n        Matcher m = this.pattern.matcher(text);\n\n        while (m.find()) {\n\n            splitted.add(text.substring(last_match,m.start()));\n\n            if (this.keep_delimiters) {\n                splitted.add(m.group());\n            }\n\n            last_match = m.end();\n        }\n\n        splitted.add(text.substring(last_match));\n\n        return splitted.toArray(new String[splitted.size()]);\n    }\n\n    public static void main(String[] argv) {\n        if (argv.length != 2) {\n            System.err.println(\"Syntax: java Splitter &lt;pattern&gt; &lt;text&gt;\");\n            return;\n        }\n\n        Pattern pattern = null;\n        try {\n            pattern = Pattern.compile(argv[0]);\n        }\n        catch (PatternSyntaxException e) {\n            System.err.println(e);\n            return;\n        }\n\n        Splitter splitter = new Splitter(pattern);\n\n        String text = argv[1];\n        int counter = 1;\n        for (String part : splitter.split(text)) {\n            System.out.printf(\"Part %d: \\\"%s\\\"\\n\", counter++, part);\n        }\n    }\n}\n\n/*\n    Example:\n    &gt; java Splitter \"\\W+\" \"Hello World!\"\n    Part 1: \"Hello\"\n    Part 2: \" \"\n    Part 3: \"World\"\n    Part 4: \"!\"\n    Part 5: \"\"\n*/\n</code></pre>\n\n<p>I don't really like the other way, where you get an empty element in front and back. A delimiter is usually not at the beginning or at the end of the string, thus you most often end up wasting two good array slots.</p>\n\n<p><strong>Edit:</strong> Fixed limit cases. Commented source with test cases can be found here: <a href=\"http://snippets.dzone.com/posts/show/6453\" rel=\"noreferrer\">http://snippets.dzone.com/posts/show/6453</a></p>\n"},{"tags":[],"owner":{"account_id":10959,"reputation":74232,"user_id":20938,"display_name":"Alan Moore"},"down_vote_count":1,"up_vote_count":14,"is_accepted":false,"score":13,"last_activity_date":1257874683,"creation_date":1226354641,"answer_id":279337,"question_id":2206378,"body_markdown":"I got here late, but returning to the original question, why not just use lookarounds?\r\n\r\n    Pattern p = Pattern.compile(&quot;(?&lt;=\\\\w)(?=\\\\W)|(?&lt;=\\\\W)(?=\\\\w)&quot;);\r\n    System.out.println(Arrays.toString(p.split(&quot;&#39;ab&#39;,&#39;cd&#39;,&#39;eg&#39;&quot;)));\r\n    System.out.println(Arrays.toString(p.split(&quot;boo:and:foo&quot;)));\r\n\r\noutput:\r\n\r\n    [&#39;, ab, &#39;,&#39;, cd, &#39;,&#39;, eg, &#39;]\r\n    [boo, :, and, :, foo]\r\n\r\nEDIT: What you see above is what appears on the command line when I run that code, but I now see that it&#39;s a bit confusing.  It&#39;s difficult to keep track of which commas are part of the result and which were added by `Arrays.toString()`.  SO&#39;s syntax highlighting isn&#39;t helping either. In hopes of getting the highlighting to work *with* me instead of against me, here&#39;s how those arrays would look it I were declaring them in source code:\r\n\r\n    { &quot;&#39;&quot;, &quot;ab&quot;, &quot;&#39;,&#39;&quot;, &quot;cd&quot;, &quot;&#39;,&#39;&quot;, &quot;eg&quot;, &quot;&#39;&quot; }\r\n    { &quot;boo&quot;, &quot;:&quot;, &quot;and&quot;, &quot;:&quot;, &quot;foo&quot; }\r\n\r\nI hope that&#39;s easier to read.  Thanks for the heads-up, @finnw.","title":"How to split a string, but also keep the delimiters?","body":"<p>I got here late, but returning to the original question, why not just use lookarounds?</p>\n\n<pre><code>Pattern p = Pattern.compile(\"(?&lt;=\\\\w)(?=\\\\W)|(?&lt;=\\\\W)(?=\\\\w)\");\nSystem.out.println(Arrays.toString(p.split(\"'ab','cd','eg'\")));\nSystem.out.println(Arrays.toString(p.split(\"boo:and:foo\")));\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>[', ab, ',', cd, ',', eg, ']\n[boo, :, and, :, foo]\n</code></pre>\n\n<p>EDIT: What you see above is what appears on the command line when I run that code, but I now see that it's a bit confusing.  It's difficult to keep track of which commas are part of the result and which were added by <code>Arrays.toString()</code>.  SO's syntax highlighting isn't helping either. In hopes of getting the highlighting to work <em>with</em> me instead of against me, here's how those arrays would look it I were declaring them in source code:</p>\n\n<pre><code>{ \"'\", \"ab\", \"','\", \"cd\", \"','\", \"eg\", \"'\" }\n{ \"boo\", \":\", \"and\", \":\", \"foo\" }\n</code></pre>\n\n<p>I hope that's easier to read.  Thanks for the heads-up, @finnw.</p>\n"},{"tags":[],"owner":{"account_id":9867,"reputation":618181,"user_id":18393,"accept_rate":82,"display_name":"cletus"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1226359588,"creation_date":1226359588,"answer_id":279549,"question_id":2206378,"body_markdown":"I had a look at the above answers and honestly none of them I find satisfactory.  What you want to do is essentially mimic the Perl split functionality.  Why Java doesn&#39;t allow this and have a join() method somewhere is beyond me but I digress.  You don&#39;t even need a class for this really.  Its just a function.  Run this sample program:\r\n\r\nSome of the earlier answers have excessive null-checking, which I recently wrote a response to a question here:\r\n\r\nhttps://stackoverflow.com/users/18393/cletus\r\n\r\nAnyway, the code:\r\n\r\n    public class Split {\r\n        public static List&lt;String&gt; split(String s, String pattern) {\r\n            assert s != null;\r\n            assert pattern != null;\r\n            return split(s, Pattern.compile(pattern));\r\n        }\r\n    \r\n        public static List&lt;String&gt; split(String s, Pattern pattern) {\r\n            assert s != null;\r\n            assert pattern != null;\r\n            Matcher m = pattern.matcher(s);\r\n            List&lt;String&gt; ret = new ArrayList&lt;String&gt;();\r\n            int start = 0;\r\n            while (m.find()) {\r\n                ret.add(s.substring(start, m.start()));\r\n                ret.add(m.group());\r\n                start = m.end();\r\n            }\r\n            ret.add(start &gt;= s.length() ? &quot;&quot; : s.substring(start));\r\n            return ret;\r\n        }\r\n    \r\n        private static void testSplit(String s, String pattern) {\r\n            System.out.printf(&quot;Splitting &#39;%s&#39; with pattern &#39;%s&#39;%n&quot;, s, pattern);\r\n            List&lt;String&gt; tokens = split(s, pattern);\r\n            System.out.printf(&quot;Found %d matches%n&quot;, tokens.size());\r\n            int i = 0;\r\n            for (String token : tokens) {\r\n                System.out.printf(&quot;  %d/%d: &#39;%s&#39;%n&quot;, ++i, tokens.size(), token);\r\n            }\r\n            System.out.println();\r\n        }\r\n    \r\n        public static void main(String args[]) {\r\n            testSplit(&quot;abcdefghij&quot;, &quot;z&quot;); // &quot;abcdefghij&quot;\r\n            testSplit(&quot;abcdefghij&quot;, &quot;f&quot;); // &quot;abcde&quot;, &quot;f&quot;, &quot;ghi&quot;\r\n            testSplit(&quot;abcdefghij&quot;, &quot;j&quot;); // &quot;abcdefghi&quot;, &quot;j&quot;, &quot;&quot;\r\n            testSplit(&quot;abcdefghij&quot;, &quot;a&quot;); // &quot;&quot;, &quot;a&quot;, &quot;bcdefghij&quot;\r\n            testSplit(&quot;abcdefghij&quot;, &quot;[bdfh]&quot;); // &quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;e&quot;, &quot;f&quot;, &quot;g&quot;, &quot;h&quot;, &quot;ij&quot;\r\n        }\r\n    }\r\n\r\n","title":"How to split a string, but also keep the delimiters?","body":"<p>I had a look at the above answers and honestly none of them I find satisfactory.  What you want to do is essentially mimic the Perl split functionality.  Why Java doesn't allow this and have a join() method somewhere is beyond me but I digress.  You don't even need a class for this really.  Its just a function.  Run this sample program:</p>\n\n<p>Some of the earlier answers have excessive null-checking, which I recently wrote a response to a question here:</p>\n\n<p><a href=\"https://stackoverflow.com/users/18393/cletus\">https://stackoverflow.com/users/18393/cletus</a></p>\n\n<p>Anyway, the code:</p>\n\n<pre><code>public class Split {\n    public static List&lt;String&gt; split(String s, String pattern) {\n        assert s != null;\n        assert pattern != null;\n        return split(s, Pattern.compile(pattern));\n    }\n\n    public static List&lt;String&gt; split(String s, Pattern pattern) {\n        assert s != null;\n        assert pattern != null;\n        Matcher m = pattern.matcher(s);\n        List&lt;String&gt; ret = new ArrayList&lt;String&gt;();\n        int start = 0;\n        while (m.find()) {\n            ret.add(s.substring(start, m.start()));\n            ret.add(m.group());\n            start = m.end();\n        }\n        ret.add(start &gt;= s.length() ? \"\" : s.substring(start));\n        return ret;\n    }\n\n    private static void testSplit(String s, String pattern) {\n        System.out.printf(\"Splitting '%s' with pattern '%s'%n\", s, pattern);\n        List&lt;String&gt; tokens = split(s, pattern);\n        System.out.printf(\"Found %d matches%n\", tokens.size());\n        int i = 0;\n        for (String token : tokens) {\n            System.out.printf(\"  %d/%d: '%s'%n\", ++i, tokens.size(), token);\n        }\n        System.out.println();\n    }\n\n    public static void main(String args[]) {\n        testSplit(\"abcdefghij\", \"z\"); // \"abcdefghij\"\n        testSplit(\"abcdefghij\", \"f\"); // \"abcde\", \"f\", \"ghi\"\n        testSplit(\"abcdefghij\", \"j\"); // \"abcdefghi\", \"j\", \"\"\n        testSplit(\"abcdefghij\", \"a\"); // \"\", \"a\", \"bcdefghij\"\n        testSplit(\"abcdefghij\", \"[bdfh]\"); // \"a\", \"b\", \"c\", \"d\", \"e\", \"f\", \"g\", \"h\", \"ij\"\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9757,"reputation":45128,"user_id":18154,"accept_rate":100,"display_name":"Fabian Steeg"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1265368063,"creation_date":1265364151,"answer_id":2206386,"question_id":2206378,"body_markdown":"I don&#39;t think it is possible with `String#split`, but you can use a `StringTokenizer`, though that won&#39;t allow you to define your delimiter as a regex, but only as a class of single-digit characters:\r\n\r\n    new StringTokenizer(&quot;Hello, world. Hi!&quot;, &quot;,.!&quot;, true); // true for returnDelims","title":"How to split a string, but also keep the delimiters?","body":"<p>I don't think it is possible with <code>String#split</code>, but you can use a <code>StringTokenizer</code>, though that won't allow you to define your delimiter as a regex, but only as a class of single-digit characters:</p>\n\n<pre><code>new StringTokenizer(\"Hello, world. Hi!\", \",.!\", true); // true for returnDelims\n</code></pre>\n"},{"tags":[],"owner":{"account_id":58854,"reputation":25269,"user_id":176180,"accept_rate":72,"display_name":"NawaMan"},"down_vote_count":0,"up_vote_count":453,"is_accepted":true,"score":453,"last_activity_date":1642762479,"creation_date":1265364587,"answer_id":2206432,"question_id":2206378,"body_markdown":"You can use lookahead and lookbehind, which are features of regular expressions.\r\n\r\n```java\r\nSystem.out.println(Arrays.toString(&quot;a;b;c;d&quot;.split(&quot;(?&lt;=;)&quot;)));\r\nSystem.out.println(Arrays.toString(&quot;a;b;c;d&quot;.split(&quot;(?=;)&quot;)));\r\nSystem.out.println(Arrays.toString(&quot;a;b;c;d&quot;.split(&quot;((?&lt;=;)|(?=;))&quot;)));\r\n```\r\n\r\nAnd you will get:\r\n\r\n```\r\n[a;, b;, c;, d]\r\n[a, ;b, ;c, ;d]\r\n[a, ;, b, ;, c, ;, d]\r\n```\r\n\r\nThe last one is what you want.\r\n\r\n`((?&lt;=;)|(?=;))` equals to select an empty character before `;` or after `;`.\r\n\r\n**EDIT:** Fabian Steeg&#39;s comments on readability is valid. Readability is always a problem with regular expressions. One thing I do to make regular expressions more readable is to create a variable, the name of which represents what the regular expression does. You can even put placeholders (e.g. `%1$s`) and use Java&#39;s `String.format` to replace the placeholders with the actual string you need to use; for example:\r\n\r\n```java\r\nstatic public final String WITH_DELIMITER = &quot;((?&lt;=%1$s)|(?=%1$s))&quot;;\r\n\r\npublic void someMethod() {\r\n    final String[] aEach = &quot;a;b;c;d&quot;.split(String.format(WITH_DELIMITER, &quot;;&quot;));\r\n    ...\r\n}\r\n```","title":"How to split a string, but also keep the delimiters?","body":"<p>You can use lookahead and lookbehind, which are features of regular expressions.</p>\n<pre class=\"lang-java prettyprint-override\"><code>System.out.println(Arrays.toString(&quot;a;b;c;d&quot;.split(&quot;(?&lt;=;)&quot;)));\nSystem.out.println(Arrays.toString(&quot;a;b;c;d&quot;.split(&quot;(?=;)&quot;)));\nSystem.out.println(Arrays.toString(&quot;a;b;c;d&quot;.split(&quot;((?&lt;=;)|(?=;))&quot;)));\n</code></pre>\n<p>And you will get:</p>\n<pre><code>[a;, b;, c;, d]\n[a, ;b, ;c, ;d]\n[a, ;, b, ;, c, ;, d]\n</code></pre>\n<p>The last one is what you want.</p>\n<p><code>((?&lt;=;)|(?=;))</code> equals to select an empty character before <code>;</code> or after <code>;</code>.</p>\n<p><strong>EDIT:</strong> Fabian Steeg's comments on readability is valid. Readability is always a problem with regular expressions. One thing I do to make regular expressions more readable is to create a variable, the name of which represents what the regular expression does. You can even put placeholders (e.g. <code>%1$s</code>) and use Java's <code>String.format</code> to replace the placeholders with the actual string you need to use; for example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>static public final String WITH_DELIMITER = &quot;((?&lt;=%1$s)|(?=%1$s))&quot;;\n\npublic void someMethod() {\n    final String[] aEach = &quot;a;b;c;d&quot;.split(String.format(WITH_DELIMITER, &quot;;&quot;));\n    ...\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2146,"reputation":51871,"user_id":2959,"accept_rate":67,"display_name":"Steve McLeod"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1265364639,"creation_date":1265364639,"answer_id":2206433,"question_id":2206378,"body_markdown":"I suggest using Pattern and Matcher, which will almost certainly achieve what you want. Your regular expression will need to be somewhat more complicated than what you are using in String.split.\r\n\r\n","title":"How to split a string, but also keep the delimiters?","body":"<p>I suggest using Pattern and Matcher, which will almost certainly achieve what you want. Your regular expression will need to be somewhat more complicated than what you are using in String.split.</p>\n"},{"tags":[],"owner":{"account_id":14626,"reputation":2286,"user_id":30297,"accept_rate":92,"display_name":"chillysapien"},"down_vote_count":0,"up_vote_count":38,"is_accepted":false,"score":38,"last_activity_date":1265366202,"creation_date":1265366202,"answer_id":2206545,"question_id":2206378,"body_markdown":"A very naive solution, that doesn&#39;t involve regex would be to perform a string replace on your delimiter along the lines of (assuming comma for delimiter):\r\n\r\n    string.replace(FullString, &quot;,&quot; , &quot;~,~&quot;)\r\n\r\nWhere you can replace tilda (~) with an appropriate unique delimiter.\r\n\r\nThen if you do a split on your new delimiter then i believe you will get the desired result.  ","title":"How to split a string, but also keep the delimiters?","body":"<p>A very naive solution, that doesn't involve regex would be to perform a string replace on your delimiter along the lines of (assuming comma for delimiter):</p>\n\n<pre><code>string.replace(FullString, \",\" , \"~,~\")\n</code></pre>\n\n<p>Where you can replace tilda (~) with an appropriate unique delimiter.</p>\n\n<p>Then if you do a split on your new delimiter then i believe you will get the desired result.  </p>\n"},{"tags":[],"owner":{"account_id":114412,"reputation":31,"user_id":300860,"display_name":"Stephan"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1269439179,"creation_date":1269439179,"answer_id":2508199,"question_id":2206378,"body_markdown":"If you can afford, use Java&#39;s replace(CharSequence target, CharSequence replacement) method and fill in another delimiter to split with.\r\nExample:\r\nI want to split the string &quot;boo:and:foo&quot; and keep &#39;:&#39; at its righthand String.\r\n\r\n    String str = &quot;boo:and:foo&quot;;\r\n    str = str.replace(&quot;:&quot;,&quot;newdelimiter:&quot;);\r\n    String[] tokens = str.split(&quot;newdelimiter&quot;);\r\n\r\nImportant note: This only works if you have no further &quot;newdelimiter&quot; in your String! Thus, it is not a general solution. \r\nBut if you know a CharSequence of which you can be sure that it will never appear in the String, this is a very simple solution.","title":"How to split a string, but also keep the delimiters?","body":"<p>If you can afford, use Java's replace(CharSequence target, CharSequence replacement) method and fill in another delimiter to split with.\nExample:\nI want to split the string \"boo:and:foo\" and keep ':' at its righthand String.</p>\n\n<pre><code>String str = \"boo:and:foo\";\nstr = str.replace(\":\",\"newdelimiter:\");\nString[] tokens = str.split(\"newdelimiter\");\n</code></pre>\n\n<p>Important note: This only works if you have no further \"newdelimiter\" in your String! Thus, it is not a general solution. \nBut if you know a CharSequence of which you can be sure that it will never appear in the String, this is a very simple solution.</p>\n"},{"tags":[],"owner":{"account_id":102991,"reputation":378282,"user_id":276101,"accept_rate":67,"display_name":"polygenelubricants"},"down_vote_count":0,"up_vote_count":91,"is_accepted":false,"score":91,"last_activity_date":1274090976,"creation_date":1274090976,"answer_id":2848147,"question_id":2206378,"body_markdown":"You want to use lookarounds, and split on zero-width matches. Here are some examples:\r\n\r\n    public class SplitNDump {\r\n    \tstatic void dump(String[] arr) {\r\n    \t\tfor (String s : arr) {\r\n    \t\t\tSystem.out.format(&quot;[%s]&quot;, s);\r\n    \t\t}\r\n    \t\tSystem.out.println();\r\n    \t}\r\n    \tpublic static void main(String[] args) {\r\n    \t\tdump(&quot;1,234,567,890&quot;.split(&quot;,&quot;));\r\n    \t\t// &quot;[1][234][567][890]&quot;\r\n    \t\tdump(&quot;1,234,567,890&quot;.split(&quot;(?=,)&quot;));\t\r\n    \t\t// &quot;[1][,234][,567][,890]&quot;\r\n    \t\tdump(&quot;1,234,567,890&quot;.split(&quot;(?&lt;=,)&quot;));\t\r\n    \t\t// &quot;[1,][234,][567,][890]&quot;\r\n    \t\tdump(&quot;1,234,567,890&quot;.split(&quot;(?&lt;=,)|(?=,)&quot;));\r\n    \t\t// &quot;[1][,][234][,][567][,][890]&quot;\r\n    \t\t\r\n    \t\tdump(&quot;:a:bb::c:&quot;.split(&quot;(?=:)|(?&lt;=:)&quot;));\r\n    \t\t// &quot;[][:][a][:][bb][:][:][c][:]&quot;\r\n    \t\tdump(&quot;:a:bb::c:&quot;.split(&quot;(?=(?!^):)|(?&lt;=:)&quot;));\r\n    \t\t// &quot;[:][a][:][bb][:][:][c][:]&quot;\r\n    \t\tdump(&quot;:::a::::b  b::c:&quot;.split(&quot;(?=(?!^):)(?&lt;!:)|(?!:)(?&lt;=:)&quot;));\r\n    \t\t// &quot;[:::][a][::::][b  b][::][c][:]&quot;\r\n    \t\tdump(&quot;a,bb:::c  d..e&quot;.split(&quot;(?!^)\\\\b&quot;));\r\n    \t\t// &quot;[a][,][bb][:::][c][  ][d][..][e]&quot;\r\n    \t\t\r\n    \t\tdump(&quot;ArrayIndexOutOfBoundsException&quot;.split(&quot;(?&lt;=[a-z])(?=[A-Z])&quot;));\r\n    \t\t// &quot;[Array][Index][Out][Of][Bounds][Exception]&quot;\r\n    \t\tdump(&quot;1234567890&quot;.split(&quot;(?&lt;=\\\\G.{4})&quot;));\t\r\n    \t\t// &quot;[1234][5678][90]&quot;\r\n    \r\n    \t\t// Split at the end of each run of letter\r\n    \t\tdump(&quot;Boooyaaaah! Yippieeee!!&quot;.split(&quot;(?&lt;=(?=(.)\\\\1(?!\\\\1))..)&quot;));\r\n    \t\t// &quot;[Booo][yaaaa][h! Yipp][ieeee][!!]&quot;\r\n    \t}\r\n    }\r\n\r\nAnd yes, that is triply-nested assertion there in the last pattern.\r\n\r\n### Related questions\r\n\r\n* [Java split is eating my characters.](https://stackoverflow.com/questions/2819933/java-split-is-eating-my-characters/)\r\n* [Can you use zero-width matching regex in String split?](https://stackoverflow.com/questions/2406633/can-you-use-zero-width-matching-regex-in-string-split)\r\n* [How do I convert CamelCase into human-readable names in Java?](https://stackoverflow.com/questions/2559759/how-do-i-convert-camelcase-into-human-readable-names-in-java)\r\n* [Backreferences in lookbehind](https://stackoverflow.com/questions/2734977/backreferences-in-lookbehind)\r\n\r\n### See also\r\n\r\n* [regular-expressions.info/Lookarounds](http://www.regular-expressions.info/lookaround.html)","title":"How to split a string, but also keep the delimiters?","body":"<p>You want to use lookarounds, and split on zero-width matches. Here are some examples:</p>\n\n<pre><code>public class SplitNDump {\n    static void dump(String[] arr) {\n        for (String s : arr) {\n            System.out.format(\"[%s]\", s);\n        }\n        System.out.println();\n    }\n    public static void main(String[] args) {\n        dump(\"1,234,567,890\".split(\",\"));\n        // \"[1][234][567][890]\"\n        dump(\"1,234,567,890\".split(\"(?=,)\"));   \n        // \"[1][,234][,567][,890]\"\n        dump(\"1,234,567,890\".split(\"(?&lt;=,)\"));  \n        // \"[1,][234,][567,][890]\"\n        dump(\"1,234,567,890\".split(\"(?&lt;=,)|(?=,)\"));\n        // \"[1][,][234][,][567][,][890]\"\n\n        dump(\":a:bb::c:\".split(\"(?=:)|(?&lt;=:)\"));\n        // \"[][:][a][:][bb][:][:][c][:]\"\n        dump(\":a:bb::c:\".split(\"(?=(?!^):)|(?&lt;=:)\"));\n        // \"[:][a][:][bb][:][:][c][:]\"\n        dump(\":::a::::b  b::c:\".split(\"(?=(?!^):)(?&lt;!:)|(?!:)(?&lt;=:)\"));\n        // \"[:::][a][::::][b  b][::][c][:]\"\n        dump(\"a,bb:::c  d..e\".split(\"(?!^)\\\\b\"));\n        // \"[a][,][bb][:::][c][  ][d][..][e]\"\n\n        dump(\"ArrayIndexOutOfBoundsException\".split(\"(?&lt;=[a-z])(?=[A-Z])\"));\n        // \"[Array][Index][Out][Of][Bounds][Exception]\"\n        dump(\"1234567890\".split(\"(?&lt;=\\\\G.{4})\"));   \n        // \"[1234][5678][90]\"\n\n        // Split at the end of each run of letter\n        dump(\"Boooyaaaah! Yippieeee!!\".split(\"(?&lt;=(?=(.)\\\\1(?!\\\\1))..)\"));\n        // \"[Booo][yaaaa][h! Yipp][ieeee][!!]\"\n    }\n}\n</code></pre>\n\n<p>And yes, that is triply-nested assertion there in the last pattern.</p>\n\n<h3>Related questions</h3>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/2819933/java-split-is-eating-my-characters/\">Java split is eating my characters.</a></li>\n<li><a href=\"https://stackoverflow.com/questions/2406633/can-you-use-zero-width-matching-regex-in-string-split\">Can you use zero-width matching regex in String split?</a></li>\n<li><a href=\"https://stackoverflow.com/questions/2559759/how-do-i-convert-camelcase-into-human-readable-names-in-java\">How do I convert CamelCase into human-readable names in Java?</a></li>\n<li><a href=\"https://stackoverflow.com/questions/2734977/backreferences-in-lookbehind\">Backreferences in lookbehind</a></li>\n</ul>\n\n<h3>See also</h3>\n\n<ul>\n<li><a href=\"http://www.regular-expressions.info/lookaround.html\" rel=\"noreferrer\">regular-expressions.info/Lookarounds</a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":262968,"reputation":767120,"user_id":548225,"accept_rate":90,"display_name":"anubhava"},"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1302662301,"creation_date":1302662301,"answer_id":5643806,"question_id":2206378,"body_markdown":"I know this is a very-very old question and answer has also been accepted. But still I would like to submit a very simple answer to original question. Consider this code:\r\n\r\n\tString str = &quot;Hello-World:How\\nAre You&amp;doing&quot;;\r\n\tinputs = str.split(&quot;(?!^)\\\\b&quot;);\r\n\tfor (int i=0; i&lt;inputs.length; i++) {\r\n\t   System.out.println(&quot;a[&quot; + i + &quot;] = \\&quot;&quot; + inputs[i] + &#39;&quot;&#39;);\r\n\t}\r\n\r\n**OUTPUT:**\r\n\r\n    a[0] = &quot;Hello&quot;\r\n    a[1] = &quot;-&quot;\r\n    a[2] = &quot;World&quot;\r\n    a[3] = &quot;:&quot;\r\n    a[4] = &quot;How&quot;\r\n    a[5] = &quot;\r\n    &quot;\r\n    a[6] = &quot;Are&quot;\r\n    a[7] = &quot; &quot;\r\n    a[8] = &quot;You&quot;\r\n    a[9] = &quot;&amp;&quot;\r\n    a[10] = &quot;doing&quot;\r\n\r\nI am just using word boundary `\\b` to delimit the words *except* when it is start of text.","title":"How to split a string, but also keep the delimiters?","body":"<p>I know this is a very-very old question and answer has also been accepted. But still I would like to submit a very simple answer to original question. Consider this code:</p>\n\n<pre><code>String str = \"Hello-World:How\\nAre You&amp;doing\";\ninputs = str.split(\"(?!^)\\\\b\");\nfor (int i=0; i&lt;inputs.length; i++) {\n   System.out.println(\"a[\" + i + \"] = \\\"\" + inputs[i] + '\"');\n}\n</code></pre>\n\n<p><strong>OUTPUT:</strong></p>\n\n<pre><code>a[0] = \"Hello\"\na[1] = \"-\"\na[2] = \"World\"\na[3] = \":\"\na[4] = \"How\"\na[5] = \"\n\"\na[6] = \"Are\"\na[7] = \" \"\na[8] = \"You\"\na[9] = \"&amp;\"\na[10] = \"doing\"\n</code></pre>\n\n<p>I am just using word boundary <code>\\b</code> to delimit the words <em>except</em> when it is start of text.</p>\n"},{"tags":[],"owner":{"account_id":350533,"reputation":10937,"user_id":686478,"accept_rate":59,"display_name":"Prashant Bhate"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1309879315,"creation_date":1309868853,"answer_id":6582648,"question_id":2206378,"body_markdown":"Tweaked [Pattern.split()][1] to include matched pattern to the list\r\n\r\nAdded \r\n\r\n    // add match to the list\r\n            matchList.add(input.subSequence(start, end).toString());\r\n\r\n**Full source**\r\n\r\n\tpublic static String[] inclusiveSplit(String input, String re, int limit) {\r\n\t\tint index = 0;\r\n\t\tboolean matchLimited = limit &gt; 0;\r\n\t\tArrayList&lt;String&gt; matchList = new ArrayList&lt;String&gt;();\r\n\r\n\t\tPattern pattern = Pattern.compile(re);\r\n\t\tMatcher m = pattern.matcher(input);\r\n\r\n\t\t// Add segments before each match found\r\n\t\twhile (m.find()) {\r\n\t\t\tint end = m.end();\r\n\t\t\tif (!matchLimited || matchList.size() &lt; limit - 1) {\r\n\t\t\t\tint start = m.start();\r\n\t\t\t\tString match = input.subSequence(index, start).toString();\r\n\t\t\t\tmatchList.add(match);\r\n\t\t\t\t// add match to the list\r\n\t\t\t\tmatchList.add(input.subSequence(start, end).toString());\r\n\t\t\t\tindex = end;\r\n\t\t\t} else if (matchList.size() == limit - 1) { // last one\r\n\t\t\t\tString match = input.subSequence(index, input.length())\r\n\t\t\t\t\t\t.toString();\r\n\t\t\t\tmatchList.add(match);\r\n\t\t\t\tindex = end;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// If no match was found, return this\r\n\t\tif (index == 0)\r\n\t\t\treturn new String[] { input.toString() };\r\n\r\n\t\t// Add remaining segment\r\n\t\tif (!matchLimited || matchList.size() &lt; limit)\r\n\t\t\tmatchList.add(input.subSequence(index, input.length()).toString());\r\n\r\n\t\t// Construct result\r\n\t\tint resultSize = matchList.size();\r\n\t\tif (limit == 0)\r\n\t\t\twhile (resultSize &gt; 0 &amp;&amp; matchList.get(resultSize - 1).equals(&quot;&quot;))\r\n\t\t\t\tresultSize--;\r\n\t\tString[] result = new String[resultSize];\r\n\t\treturn matchList.subList(0, resultSize).toArray(result);\r\n\t}\r\n\r\n\r\n  [1]: http://download.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html#split%28java.lang.CharSequence,%20int%29","title":"How to split a string, but also keep the delimiters?","body":"<p>Tweaked <a href=\"http://download.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html#split%28java.lang.CharSequence,%20int%29\" rel=\"nofollow\">Pattern.split()</a> to include matched pattern to the list</p>\n\n<p>Added </p>\n\n<pre><code>// add match to the list\n        matchList.add(input.subSequence(start, end).toString());\n</code></pre>\n\n<p><strong>Full source</strong></p>\n\n<pre><code>public static String[] inclusiveSplit(String input, String re, int limit) {\n    int index = 0;\n    boolean matchLimited = limit &gt; 0;\n    ArrayList&lt;String&gt; matchList = new ArrayList&lt;String&gt;();\n\n    Pattern pattern = Pattern.compile(re);\n    Matcher m = pattern.matcher(input);\n\n    // Add segments before each match found\n    while (m.find()) {\n        int end = m.end();\n        if (!matchLimited || matchList.size() &lt; limit - 1) {\n            int start = m.start();\n            String match = input.subSequence(index, start).toString();\n            matchList.add(match);\n            // add match to the list\n            matchList.add(input.subSequence(start, end).toString());\n            index = end;\n        } else if (matchList.size() == limit - 1) { // last one\n            String match = input.subSequence(index, input.length())\n                    .toString();\n            matchList.add(match);\n            index = end;\n        }\n    }\n\n    // If no match was found, return this\n    if (index == 0)\n        return new String[] { input.toString() };\n\n    // Add remaining segment\n    if (!matchLimited || matchList.size() &lt; limit)\n        matchList.add(input.subSequence(index, input.length()).toString());\n\n    // Construct result\n    int resultSize = matchList.size();\n    if (limit == 0)\n        while (resultSize &gt; 0 &amp;&amp; matchList.get(resultSize - 1).equals(\"\"))\n            resultSize--;\n    String[] result = new String[resultSize];\n    return matchList.subList(0, resultSize).toArray(result);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2114790,"reputation":429,"user_id":1879332,"display_name":"Varun Gangal"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1388481985,"creation_date":1355819251,"answer_id":13928985,"question_id":2206378,"body_markdown":"An extremely naive and inefficient solution which works nevertheless.Use split twice on the string and then concatenate the two arrays\r\n\r\n\r\n    String temp[]=str.split(&quot;\\\\W&quot;);\r\n    String temp2[]=str.split(&quot;\\\\w||\\\\s&quot;);\r\n    int i=0;\r\n    for(String string:temp)\r\n    System.out.println(string);\r\n    String temp3[]=new String[temp.length-1];\r\n    for(String string:temp2)\r\n    {\r\n            System.out.println(string);\r\n            if((string.equals(&quot;&quot;)!=true)&amp;&amp;(string.equals(&quot;\\\\s&quot;)!=true))\r\n            {\r\n                    temp3[i]=string;\r\n                    i++;\r\n            }\r\n    //      System.out.println(temp.length);\r\n    //      System.out.println(temp2.length);\r\n    }\r\n    System.out.println(temp3.length);\r\n    String[] temp4=new String[temp.length+temp3.length];\r\n    int j=0;\r\n    for(i=0;i&lt;temp.length;i++)\r\n    {\r\n            temp4[j]=temp[i];\r\n            j=j+2;\r\n    }\r\n    j=1;\r\n    for(i=0;i&lt;temp3.length;i++)\r\n    {\r\n            temp4[j]=temp3[i];\r\n            j+=2;\r\n    }\r\n    for(String s:temp4)\r\n    System.out.println(s);\r\n","title":"How to split a string, but also keep the delimiters?","body":"<p>An extremely naive and inefficient solution which works nevertheless.Use split twice on the string and then concatenate the two arrays</p>\n\n<pre><code>String temp[]=str.split(\"\\\\W\");\nString temp2[]=str.split(\"\\\\w||\\\\s\");\nint i=0;\nfor(String string:temp)\nSystem.out.println(string);\nString temp3[]=new String[temp.length-1];\nfor(String string:temp2)\n{\n        System.out.println(string);\n        if((string.equals(\"\")!=true)&amp;&amp;(string.equals(\"\\\\s\")!=true))\n        {\n                temp3[i]=string;\n                i++;\n        }\n//      System.out.println(temp.length);\n//      System.out.println(temp2.length);\n}\nSystem.out.println(temp3.length);\nString[] temp4=new String[temp.length+temp3.length];\nint j=0;\nfor(i=0;i&lt;temp.length;i++)\n{\n        temp4[j]=temp[i];\n        j=j+2;\n}\nj=1;\nfor(i=0;i&lt;temp3.length;i++)\n{\n        temp4[j]=temp3[i];\n        j+=2;\n}\nfor(String s:temp4)\nSystem.out.println(s);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1532796,"reputation":191,"user_id":1429578,"display_name":"miles zarathustra"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1373995881,"creation_date":1373995881,"answer_id":17683289,"question_id":2206378,"body_markdown":"Here&#39;s a groovy version based on some of the code above, in case it helps.  It&#39;s short, anyway.  Conditionally includes the head and tail (if they are not empty). The last part is a demo/test case.\r\n\r\n    List splitWithTokens(str, pat) {\r\n        def tokens=[]\r\n        def lastMatch=0\r\n        def m = str=~pat\r\n        while (m.find()) {\r\n          if (m.start() &gt; 0) tokens &lt;&lt; str[lastMatch..&lt;m.start()]\r\n          tokens &lt;&lt; m.group()\r\n          lastMatch=m.end()\r\n        }\r\n        if (lastMatch &lt; str.length()) tokens &lt;&lt; str[lastMatch..&lt;str.length()]\r\n        tokens\r\n    }\r\n\r\n    [[&#39;&lt;html&gt;&lt;head&gt;&lt;title&gt;this is the title&lt;/title&gt;&lt;/head&gt;&#39;,/&lt;[^&gt;]+&gt;/],\r\n     [&#39;before&lt;html&gt;&lt;head&gt;&lt;title&gt;this is the title&lt;/title&gt;&lt;/head&gt;after&#39;,/&lt;[^&gt;]+&gt;/]\r\n    ].each { \r\n       println splitWithTokens(*it)\r\n    }\r\n","title":"How to split a string, but also keep the delimiters?","body":"<p>Here's a groovy version based on some of the code above, in case it helps.  It's short, anyway.  Conditionally includes the head and tail (if they are not empty). The last part is a demo/test case.</p>\n\n<pre><code>List splitWithTokens(str, pat) {\n    def tokens=[]\n    def lastMatch=0\n    def m = str=~pat\n    while (m.find()) {\n      if (m.start() &gt; 0) tokens &lt;&lt; str[lastMatch..&lt;m.start()]\n      tokens &lt;&lt; m.group()\n      lastMatch=m.end()\n    }\n    if (lastMatch &lt; str.length()) tokens &lt;&lt; str[lastMatch..&lt;str.length()]\n    tokens\n}\n\n[['&lt;html&gt;&lt;head&gt;&lt;title&gt;this is the title&lt;/title&gt;&lt;/head&gt;',/&lt;[^&gt;]+&gt;/],\n ['before&lt;html&gt;&lt;head&gt;&lt;title&gt;this is the title&lt;/title&gt;&lt;/head&gt;after',/&lt;[^&gt;]+&gt;/]\n].each { \n   println splitWithTokens(*it)\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3569725,"reputation":450,"user_id":2980356,"accept_rate":53,"display_name":"Haseeb Jadoon"},"down_vote_count":0,"up_vote_count":22,"is_accepted":false,"score":22,"last_activity_date":1425999319,"creation_date":1425999319,"answer_id":28966959,"question_id":2206378,"body_markdown":"Pass the 3rd aurgument as &quot;true&quot;. It will return delimiters as well.\r\n\r\n    StringTokenizer(String str, String delimiters, true);","title":"How to split a string, but also keep the delimiters?","body":"<p>Pass the 3rd aurgument as \"true\". It will return delimiters as well.</p>\n\n<pre><code>StringTokenizer(String str, String delimiters, true);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5610323,"reputation":35021,"user_id":4443323,"accept_rate":74,"display_name":"Tomasz Mularczyk"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1451747384,"creation_date":1451663800,"answer_id":34557626,"question_id":2206378,"body_markdown":"I will post my working versions also(first is really similar to Markus).\r\n\r\n\tpublic static String[] splitIncludeDelimeter(String regex, String text){\r\n\t\tList&lt;String&gt; list = new LinkedList&lt;&gt;();\r\n\t\tMatcher matcher = Pattern.compile(regex).matcher(text);\r\n\t\t\r\n\t\tint now, old = 0;\r\n\t\twhile(matcher.find()){\r\n\t\t\tnow = matcher.end();\r\n\t\t\tlist.add(text.substring(old, now));\r\n\t\t\told = now;\r\n\t\t}\r\n\t\t\r\n\t\tif(list.size() == 0)\r\n\t\t\treturn new String[]{text};\r\n\t\t\r\n\t\t//adding rest of a text as last element\r\n\t\tString finalElement = text.substring(old);\r\n\t\tlist.add(finalElement);\r\n\t\t\r\n\t\treturn list.toArray(new String[list.size()]);\r\n\t}\r\n\r\nAnd here is second solution and its round 50% faster than first one:\r\n\r\n\r\n\tpublic static String[] splitIncludeDelimeter2(String regex, String text){\r\n\t\tList&lt;String&gt; list = new LinkedList&lt;&gt;();\r\n\t\tMatcher matcher = Pattern.compile(regex).matcher(text);\r\n\t\t\r\n\t\tStringBuffer stringBuffer = new StringBuffer();\r\n\t\twhile(matcher.find()){\r\n\t\t\tmatcher.appendReplacement(stringBuffer, matcher.group());\r\n\t\t\tlist.add(stringBuffer.toString());\r\n\t\t\tstringBuffer.setLength(0); //clear buffer\r\n\t\t}\r\n\t\t\r\n\t\tmatcher.appendTail(stringBuffer); ///dodajemy reszte  ciagu\r\n\t\tlist.add(stringBuffer.toString());\r\n\t\t\r\n\t\treturn list.toArray(new String[list.size()]);\r\n\t}","title":"How to split a string, but also keep the delimiters?","body":"<p>I will post my working versions also(first is really similar to Markus).</p>\n\n<pre><code>public static String[] splitIncludeDelimeter(String regex, String text){\n    List&lt;String&gt; list = new LinkedList&lt;&gt;();\n    Matcher matcher = Pattern.compile(regex).matcher(text);\n\n    int now, old = 0;\n    while(matcher.find()){\n        now = matcher.end();\n        list.add(text.substring(old, now));\n        old = now;\n    }\n\n    if(list.size() == 0)\n        return new String[]{text};\n\n    //adding rest of a text as last element\n    String finalElement = text.substring(old);\n    list.add(finalElement);\n\n    return list.toArray(new String[list.size()]);\n}\n</code></pre>\n\n<p>And here is second solution and its round 50% faster than first one:</p>\n\n<pre><code>public static String[] splitIncludeDelimeter2(String regex, String text){\n    List&lt;String&gt; list = new LinkedList&lt;&gt;();\n    Matcher matcher = Pattern.compile(regex).matcher(text);\n\n    StringBuffer stringBuffer = new StringBuffer();\n    while(matcher.find()){\n        matcher.appendReplacement(stringBuffer, matcher.group());\n        list.add(stringBuffer.toString());\n        stringBuffer.setLength(0); //clear buffer\n    }\n\n    matcher.appendTail(stringBuffer); ///dodajemy reszte  ciagu\n    list.add(stringBuffer.toString());\n\n    return list.toArray(new String[list.size()]);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":543250,"reputation":18874,"user_id":912319,"accept_rate":62,"display_name":"Kanagavelu Sugumar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1460106126,"creation_date":1460102684,"answer_id":36494536,"question_id":2206378,"body_markdown":"\t\tString expression = &quot;((A+B)*C-D)*E&quot;;\r\n\t\texpression = expression.replaceAll(&quot;\\\\+&quot;, &quot;~+~&quot;);\r\n\t\texpression = expression.replaceAll(&quot;\\\\*&quot;, &quot;~*~&quot;);\r\n\t\texpression = expression.replaceAll(&quot;-&quot;, &quot;~-~&quot;);\r\n\t\texpression = expression.replaceAll(&quot;/+&quot;, &quot;~/~&quot;);\r\n\t\texpression = expression.replaceAll(&quot;\\\\(&quot;, &quot;~(~&quot;); //also you can use [(] instead of \\\\(\r\n\t\texpression = expression.replaceAll(&quot;\\\\)&quot;, &quot;~)~&quot;); //also you can use [)] instead of \\\\)\r\n\t\texpression = expression.replaceAll(&quot;~~&quot;, &quot;~&quot;);\r\n\t\tif(expression.startsWith(&quot;~&quot;)) {\r\n\t\t\texpression = expression.substring(1);\r\n\t\t}\r\n\t\t\r\n\t\tString[] expressionArray = expression.split(&quot;~&quot;);\r\n\t\tSystem.out.println(Arrays.toString(expressionArray));","title":"How to split a string, but also keep the delimiters?","body":"<pre><code>    String expression = \"((A+B)*C-D)*E\";\n    expression = expression.replaceAll(\"\\\\+\", \"~+~\");\n    expression = expression.replaceAll(\"\\\\*\", \"~*~\");\n    expression = expression.replaceAll(\"-\", \"~-~\");\n    expression = expression.replaceAll(\"/+\", \"~/~\");\n    expression = expression.replaceAll(\"\\\\(\", \"~(~\"); //also you can use [(] instead of \\\\(\n    expression = expression.replaceAll(\"\\\\)\", \"~)~\"); //also you can use [)] instead of \\\\)\n    expression = expression.replaceAll(\"~~\", \"~\");\n    if(expression.startsWith(\"~\")) {\n        expression = expression.substring(1);\n    }\n\n    String[] expressionArray = expression.split(\"~\");\n    System.out.println(Arrays.toString(expressionArray));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7081430,"reputation":2877,"user_id":5419712,"display_name":"Julian"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1495274242,"creation_date":1495274242,"answer_id":44084475,"question_id":2206378,"body_markdown":"Here is a simple clean implementation which is consistent with `Pattern#split` and works with variable length patterns, which look behind cannot support, and it is easier to use. It is similar to [the solution](https://stackoverflow.com/a/279549/5419712) provided by @cletus.\r\n\r\n    public static String[] split(CharSequence input, String pattern) {\r\n        return split(input, Pattern.compile(pattern));\r\n    }\r\n\r\n    public static String[] split(CharSequence input, Pattern pattern) {\r\n        Matcher matcher = pattern.matcher(input);\r\n        int start = 0;\r\n        List&lt;String&gt; result = new ArrayList&lt;&gt;();\r\n        while (matcher.find()) {\r\n            result.add(input.subSequence(start, matcher.start()).toString());\r\n            result.add(matcher.group());\r\n            start = matcher.end();\r\n        }\r\n        if (start != input.length()) result.add(input.subSequence(start, input.length()).toString());\r\n        return result.toArray(new String[0]);\r\n    }\r\n\r\n\r\nI don&#39;t do null checks here, `Pattern#split` doesn&#39;t, why should I. I don&#39;t like the `if` at the end but it is required for consistency with the `Pattern#split` . Otherwise I would unconditionally append, resulting in an empty string as the last element of the result if the input string ends with the pattern.\r\n\r\nI convert to String[] for consistency with `Pattern#split`, I use `new String[0]` rather than `new String[result.size()]`, see [here](https://shipilev.net/blog/2016/arrays-wisdom-ancients/) for why.\r\n\r\nHere are my tests:\r\n\r\n    @Test\r\n    public void splitsVariableLengthPattern() {\r\n        String[] result = Split.split(&quot;/foo/$bar/bas&quot;, &quot;\\\\$\\\\w+&quot;);\r\n        Assert.assertArrayEquals(new String[] { &quot;/foo/&quot;, &quot;$bar&quot;, &quot;/bas&quot; }, result);\r\n    }\r\n\r\n    @Test\r\n    public void splitsEndingWithPattern() {\r\n        String[] result = Split.split(&quot;/foo/$bar&quot;, &quot;\\\\$\\\\w+&quot;);\r\n        Assert.assertArrayEquals(new String[] { &quot;/foo/&quot;, &quot;$bar&quot; }, result);\r\n    }\r\n\r\n    @Test\r\n    public void splitsStartingWithPattern() {\r\n        String[] result = Split.split(&quot;$foo/bar&quot;, &quot;\\\\$\\\\w+&quot;);\r\n        Assert.assertArrayEquals(new String[] { &quot;&quot;, &quot;$foo&quot;, &quot;/bar&quot; }, result);\r\n    }\r\n\r\n    @Test\r\n    public void splitsNoMatchesPattern() {\r\n        String[] result = Split.split(&quot;/foo/bar&quot;, &quot;\\\\$\\\\w+&quot;);\r\n        Assert.assertArrayEquals(new String[] { &quot;/foo/bar&quot; }, result);\r\n    }","title":"How to split a string, but also keep the delimiters?","body":"<p>Here is a simple clean implementation which is consistent with <code>Pattern#split</code> and works with variable length patterns, which look behind cannot support, and it is easier to use. It is similar to <a href=\"https://stackoverflow.com/a/279549/5419712\">the solution</a> provided by @cletus.</p>\n\n<pre><code>public static String[] split(CharSequence input, String pattern) {\n    return split(input, Pattern.compile(pattern));\n}\n\npublic static String[] split(CharSequence input, Pattern pattern) {\n    Matcher matcher = pattern.matcher(input);\n    int start = 0;\n    List&lt;String&gt; result = new ArrayList&lt;&gt;();\n    while (matcher.find()) {\n        result.add(input.subSequence(start, matcher.start()).toString());\n        result.add(matcher.group());\n        start = matcher.end();\n    }\n    if (start != input.length()) result.add(input.subSequence(start, input.length()).toString());\n    return result.toArray(new String[0]);\n}\n</code></pre>\n\n<p>I don't do null checks here, <code>Pattern#split</code> doesn't, why should I. I don't like the <code>if</code> at the end but it is required for consistency with the <code>Pattern#split</code> . Otherwise I would unconditionally append, resulting in an empty string as the last element of the result if the input string ends with the pattern.</p>\n\n<p>I convert to String[] for consistency with <code>Pattern#split</code>, I use <code>new String[0]</code> rather than <code>new String[result.size()]</code>, see <a href=\"https://shipilev.net/blog/2016/arrays-wisdom-ancients/\" rel=\"noreferrer\">here</a> for why.</p>\n\n<p>Here are my tests:</p>\n\n<pre><code>@Test\npublic void splitsVariableLengthPattern() {\n    String[] result = Split.split(\"/foo/$bar/bas\", \"\\\\$\\\\w+\");\n    Assert.assertArrayEquals(new String[] { \"/foo/\", \"$bar\", \"/bas\" }, result);\n}\n\n@Test\npublic void splitsEndingWithPattern() {\n    String[] result = Split.split(\"/foo/$bar\", \"\\\\$\\\\w+\");\n    Assert.assertArrayEquals(new String[] { \"/foo/\", \"$bar\" }, result);\n}\n\n@Test\npublic void splitsStartingWithPattern() {\n    String[] result = Split.split(\"$foo/bar\", \"\\\\$\\\\w+\");\n    Assert.assertArrayEquals(new String[] { \"\", \"$foo\", \"/bar\" }, result);\n}\n\n@Test\npublic void splitsNoMatchesPattern() {\n    String[] result = Split.split(\"/foo/bar\", \"\\\\$\\\\w+\");\n    Assert.assertArrayEquals(new String[] { \"/foo/bar\" }, result);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6421236,"reputation":101,"user_id":4977920,"display_name":"Jarvis Cochrane"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1512047383,"creation_date":1512036152,"answer_id":47570657,"question_id":2206378,"body_markdown":"Another candidate solution using a regex. Retains token order, correctly matches multiple tokens of the same type in a row. The downside is that the regex is kind of nasty.\r\n\r\n    package javaapplication2;\r\n    \r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    import java.util.regex.Matcher;\r\n    import java.util.regex.Pattern;\r\n    \r\n    public class JavaApplication2 {\r\n    \r\n        /**\r\n         * @param args the command line arguments\r\n         */\r\n        public static void main(String[] args) {\r\n            String num = &quot;58.5+variable-+98*78/96+a/78.7-3443*12-3&quot;;\r\n    \r\n            // Terrifying regex:\r\n            //  (a)|(b)|(c) match a or b or c\r\n            // where\r\n            //   (a) is one or more digits optionally followed by a decimal point\r\n            //       followed by one or more digits: (\\d+(\\.\\d+)?)\r\n            //   (b) is one of the set + * / - occurring once: ([+*/-])\r\n            //   (c) is a sequence of one or more lowercase latin letter: ([a-z]+)\r\n            Pattern tokenPattern = Pattern.compile(&quot;(\\\\d+(\\\\.\\\\d+)?)|([+*/-])|([a-z]+)&quot;);\r\n            Matcher tokenMatcher = tokenPattern.matcher(num);\r\n    \r\n            List&lt;String&gt; tokens = new ArrayList&lt;&gt;();\r\n    \r\n            while (!tokenMatcher.hitEnd()) {\r\n                if (tokenMatcher.find()) {\r\n                    tokens.add(tokenMatcher.group());\r\n                } else {\r\n                    // report error\r\n                    break;\r\n                }\r\n            }\r\n    \r\n            System.out.println(tokens);\r\n        }\r\n    }\r\n\r\nSample output:\r\n\r\n    [58.5, +, variable, -, +, 98, *, 78, /, 96, +, a, /, 78.7, -, 3443, *, 12, -, 3]","title":"How to split a string, but also keep the delimiters?","body":"<p>Another candidate solution using a regex. Retains token order, correctly matches multiple tokens of the same type in a row. The downside is that the regex is kind of nasty.</p>\n\n<pre><code>package javaapplication2;\n\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.regex.Matcher;\nimport java.util.regex.Pattern;\n\npublic class JavaApplication2 {\n\n    /**\n     * @param args the command line arguments\n     */\n    public static void main(String[] args) {\n        String num = \"58.5+variable-+98*78/96+a/78.7-3443*12-3\";\n\n        // Terrifying regex:\n        //  (a)|(b)|(c) match a or b or c\n        // where\n        //   (a) is one or more digits optionally followed by a decimal point\n        //       followed by one or more digits: (\\d+(\\.\\d+)?)\n        //   (b) is one of the set + * / - occurring once: ([+*/-])\n        //   (c) is a sequence of one or more lowercase latin letter: ([a-z]+)\n        Pattern tokenPattern = Pattern.compile(\"(\\\\d+(\\\\.\\\\d+)?)|([+*/-])|([a-z]+)\");\n        Matcher tokenMatcher = tokenPattern.matcher(num);\n\n        List&lt;String&gt; tokens = new ArrayList&lt;&gt;();\n\n        while (!tokenMatcher.hitEnd()) {\n            if (tokenMatcher.find()) {\n                tokens.add(tokenMatcher.group());\n            } else {\n                // report error\n                break;\n            }\n        }\n\n        System.out.println(tokens);\n    }\n}\n</code></pre>\n\n<p>Sample output:</p>\n\n<pre><code>[58.5, +, variable, -, +, 98, *, 78, /, 96, +, a, /, 78.7, -, 3443, *, 12, -, 3]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":703628,"reputation":14438,"user_id":595305,"accept_rate":83,"display_name":"mike rodent"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1559489554,"creation_date":1559477566,"answer_id":56414898,"question_id":2206378,"body_markdown":"One of the subtleties in this question involves the &quot;leading delimiter&quot; question: if you are going to have a combined array of tokens and delimiters you have to know whether it starts with a token or a delimiter.  You could of course just assume that a leading delim should be discarded but this seems an unjustified assumption.  You might also want to know whether you have a trailing delim or not.  This sets two boolean flags accordingly.\r\n\r\nWritten in Groovy but a Java version should be fairly obvious:\r\n\r\n\t\t\t\tString tokenRegex = /[\\p{L}\\p{N}]+/ // a String in Groovy, Unicode alphanumeric\r\n\t\t\t\tdef finder = phraseForTokenising =~ tokenRegex\r\n                // NB in Groovy the variable &#39;finder&#39; is then of class java.util.regex.Matcher\r\n\t\t\t\tdef finderIt = finder.iterator() // extra method added to Matcher by Groovy magic\r\n\t\t\t\tint start = 0\r\n\t\t\t\tboolean leadingDelim, trailingDelim\r\n\t\t\t\tdef combinedTokensAndDelims = [] // create an array in Groovy\r\n\r\n\t\t\t\twhile( finderIt.hasNext() )\r\n\t\t\t\t{\r\n\t\t\t\t\tdef token = finderIt.next()\r\n\t\t\t\t\tint finderStart = finder.start()\r\n\t\t\t\t\tString delim = phraseForTokenising[ start  .. finderStart - 1 ]\r\n                    // Groovy: above gets slice of String/array\r\n\t\t\t\t\tif( start == 0 ) leadingDelim = finderStart != 0\r\n\t\t\t\t\tif( start &gt; 0 || leadingDelim ) combinedTokensAndDelims &lt;&lt; delim\r\n\t\t\t\t\tcombinedTokensAndDelims &lt;&lt; token // add element to end of array\r\n\t\t\t\t\tstart = finder.end()\r\n\t\t\t\t}\r\n\t\t\t\t// start == 0 indicates no tokens found\r\n\t\t\t\tif( start &gt; 0 ) {\r\n\t\t\t\t\t// finish by seeing whether there is a trailing delim\r\n\t\t\t\t\ttrailingDelim = start &lt; phraseForTokenising.length()\r\n\t\t\t\t\tif( trailingDelim ) combinedTokensAndDelims &lt;&lt; phraseForTokenising[ start .. -1 ]\r\n\r\n\t\t\t\t    println( &quot;leading delim? $leadingDelim, trailing delim? $trailingDelim, combined array:\\n $combinedTokensAndDelims&quot; )\r\n\r\n\t\t\t\t}\r\n\r\n","title":"How to split a string, but also keep the delimiters?","body":"<p>One of the subtleties in this question involves the \"leading delimiter\" question: if you are going to have a combined array of tokens and delimiters you have to know whether it starts with a token or a delimiter.  You could of course just assume that a leading delim should be discarded but this seems an unjustified assumption.  You might also want to know whether you have a trailing delim or not.  This sets two boolean flags accordingly.</p>\n\n<p>Written in Groovy but a Java version should be fairly obvious:</p>\n\n<pre><code>            String tokenRegex = /[\\p{L}\\p{N}]+/ // a String in Groovy, Unicode alphanumeric\n            def finder = phraseForTokenising =~ tokenRegex\n            // NB in Groovy the variable 'finder' is then of class java.util.regex.Matcher\n            def finderIt = finder.iterator() // extra method added to Matcher by Groovy magic\n            int start = 0\n            boolean leadingDelim, trailingDelim\n            def combinedTokensAndDelims = [] // create an array in Groovy\n\n            while( finderIt.hasNext() )\n            {\n                def token = finderIt.next()\n                int finderStart = finder.start()\n                String delim = phraseForTokenising[ start  .. finderStart - 1 ]\n                // Groovy: above gets slice of String/array\n                if( start == 0 ) leadingDelim = finderStart != 0\n                if( start &gt; 0 || leadingDelim ) combinedTokensAndDelims &lt;&lt; delim\n                combinedTokensAndDelims &lt;&lt; token // add element to end of array\n                start = finder.end()\n            }\n            // start == 0 indicates no tokens found\n            if( start &gt; 0 ) {\n                // finish by seeing whether there is a trailing delim\n                trailingDelim = start &lt; phraseForTokenising.length()\n                if( trailingDelim ) combinedTokensAndDelims &lt;&lt; phraseForTokenising[ start .. -1 ]\n\n                println( \"leading delim? $leadingDelim, trailing delim? $trailingDelim, combined array:\\n $combinedTokensAndDelims\" )\n\n            }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19150420,"reputation":1,"user_id":13988461,"display_name":"VIJAY PRATAP SINGH"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1614159993,"creation_date":1614155701,"answer_id":66347237,"question_id":2206378,"body_markdown":"If you want keep character then use split method with loophole in `.split()` method.\r\n\r\nSee this example:\r\n\r\n```java\r\npublic class SplitExample {\r\n\r\n\r\n    public static void main(String[] args) {  \r\n        String str = &quot;Javathomettt&quot;;  \r\n        System.out.println(&quot;method 1&quot;);\r\n        System.out.println(&quot;Returning words:&quot;);  \r\n        String[] arr = str.split(&quot;t&quot;, 40);  \r\n        for (String w : arr) {  \r\n            System.out.println(w+&quot;t&quot;);  \r\n        }  \r\n        System.out.println(&quot;Split array length: &quot;+arr.length);  \r\n        System.out.println(&quot;method 2&quot;);\r\n        System.out.println(str.replaceAll(&quot;t&quot;, &quot;\\n&quot;+&quot;t&quot;));\r\n    }\r\n```","title":"How to split a string, but also keep the delimiters?","body":"<p>If you want keep character then use split method with loophole in <code>.split()</code> method.</p>\n<p>See this example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class SplitExample {\n\n\n    public static void main(String[] args) {  \n        String str = &quot;Javathomettt&quot;;  \n        System.out.println(&quot;method 1&quot;);\n        System.out.println(&quot;Returning words:&quot;);  \n        String[] arr = str.split(&quot;t&quot;, 40);  \n        for (String w : arr) {  \n            System.out.println(w+&quot;t&quot;);  \n        }  \n        System.out.println(&quot;Split array length: &quot;+arr.length);  \n        System.out.println(&quot;method 2&quot;);\n        System.out.println(str.replaceAll(&quot;t&quot;, &quot;\\n&quot;+&quot;t&quot;));\n    }\n</code></pre>\n"}],"owner":{"account_id":11983,"reputation":71675,"user_id":23368,"accept_rate":92,"display_name":"Daniel Rikowski"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":189668,"favorite_count":0,"down_vote_count":0,"up_vote_count":308,"accepted_answer_id":2206432,"answer_count":24,"score":308,"last_activity_date":1654097621,"creation_date":1265364057,"question_id":2206378,"body_markdown":"I have a multiline string which is delimited by a set of different delimiters:\r\n\r\n\r\n    (Text1)(DelimiterA)(Text2)(DelimiterC)(Text3)(DelimiterB)(Text4)\r\n\r\n\r\nI can split this string into its parts, using `String.split`, but it seems that I can&#39;t get the actual string, which matched the delimiter regex.\r\n\r\nIn other words, this is what I get:\r\n\r\n* `Text1`\r\n* `Text2`\r\n* `Text3`\r\n* `Text4`\r\n\r\nThis is what I want\r\n\r\n* `Text1`\r\n* `DelimiterA`\r\n* `Text2`\r\n* `DelimiterC`\r\n* `Text3`\r\n* `DelimiterB`\r\n* `Text4`\r\n\r\nIs there any JDK way to split the string using a delimiter regex but also keep the delimiters?","title":"How to split a string, but also keep the delimiters?","body":"<p>I have a multiline string which is delimited by a set of different delimiters:</p>\n\n<pre><code>(Text1)(DelimiterA)(Text2)(DelimiterC)(Text3)(DelimiterB)(Text4)\n</code></pre>\n\n<p>I can split this string into its parts, using <code>String.split</code>, but it seems that I can't get the actual string, which matched the delimiter regex.</p>\n\n<p>In other words, this is what I get:</p>\n\n<ul>\n<li><code>Text1</code></li>\n<li><code>Text2</code></li>\n<li><code>Text3</code></li>\n<li><code>Text4</code></li>\n</ul>\n\n<p>This is what I want</p>\n\n<ul>\n<li><code>Text1</code></li>\n<li><code>DelimiterA</code></li>\n<li><code>Text2</code></li>\n<li><code>DelimiterC</code></li>\n<li><code>Text3</code></li>\n<li><code>DelimiterB</code></li>\n<li><code>Text4</code></li>\n</ul>\n\n<p>Is there any JDK way to split the string using a delimiter regex but also keep the delimiters?</p>\n"},{"tags":["java","sonarqube"],"answers":[{"tags":[],"owner":{"account_id":2139538,"reputation":42511,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"down_vote_count":0,"up_vote_count":10,"is_accepted":true,"score":10,"last_activity_date":1654097566,"creation_date":1654097566,"answer_id":72464527,"question_id":72464474,"body_markdown":"Theoretically, another thread might change the result of `exception.getResponseHeaders()` after you checked it&#39;s non null but before you call it a second time. This kind of check-then-act is not always safe.\r\n\r\nThe safer way to handle this is to assign to a local \r\n\r\n    var headers = exception.getResponseHeaders();\r\n    if (headers != null) {\r\n        var contentType = headers.getContentType();\r\n        if (contentType != null) {\r\n            response.contentType(contentType);\r\n        } \r\n    }\r\n\r\nI think this is a little more readable than your solution anyway.\r\n\r\nOf course, if your object isn&#39;t mutated by multiple threads or is immutable, then this warning is a false positive which could be ignored.","title":"Sonarqube shows NullPointerException bug even after null check is present in Java","body":"<p>Theoretically, another thread might change the result of <code>exception.getResponseHeaders()</code> after you checked it's non null but before you call it a second time. This kind of check-then-act is not always safe.</p>\n<p>The safer way to handle this is to assign to a local</p>\n<pre><code>var headers = exception.getResponseHeaders();\nif (headers != null) {\n    var contentType = headers.getContentType();\n    if (contentType != null) {\n        response.contentType(contentType);\n    } \n}\n</code></pre>\n<p>I think this is a little more readable than your solution anyway.</p>\n<p>Of course, if your object isn't mutated by multiple threads or is immutable, then this warning is a false positive which could be ignored.</p>\n"}],"owner":{"account_id":3318886,"reputation":601,"user_id":2790522,"accept_rate":82,"display_name":"rockyPeoplesChamp"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1279,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":72464527,"answer_count":1,"score":2,"last_activity_date":1654097566,"creation_date":1654097345,"question_id":72464474,"body_markdown":"Sonarqube says there are 2 major bugs in this code, on the 2nd statement in if condition.\r\n\r\nfirst:\r\n&gt; A &quot;NullPointerException&quot; could be thrown; &quot;getResponseHeaders()&quot; can\r\n&gt; return null.\r\n&gt; \r\nSecond:\r\n&gt; Result of &quot;getResponseHeaders()&quot; is dereferenced\r\n\r\n    private ResponseEntity&lt;ErrorResponse&gt; handleHttpStatusCodeException(HttpStatusCodeException exception) {\r\n        ResponseEntity.BodyBuilder response = ResponseEntity.status(exception.getStatusCode());\r\n        if (exception.getResponseHeaders() != null &amp;&amp; exception.getResponseHeaders().getContentType() != null) {\r\n            response.contentType(exception.getResponseHeaders().getContentType());\r\n        }\r\n        return response.body(createErrorResponse(exception.getResponseBodyAsString()));\r\n    }\r\n\r\nIs there a way, I can change the code to avoid the bug ?","title":"Sonarqube shows NullPointerException bug even after null check is present in Java","body":"<p>Sonarqube says there are 2 major bugs in this code, on the 2nd statement in if condition.</p>\n<p>first:</p>\n<blockquote>\n<p>A &quot;NullPointerException&quot; could be thrown; &quot;getResponseHeaders()&quot; can\nreturn null.</p>\n</blockquote>\n<p>Second:</p>\n<blockquote>\n<p>Result of &quot;getResponseHeaders()&quot; is dereferenced</p>\n</blockquote>\n<pre><code>private ResponseEntity&lt;ErrorResponse&gt; handleHttpStatusCodeException(HttpStatusCodeException exception) {\n    ResponseEntity.BodyBuilder response = ResponseEntity.status(exception.getStatusCode());\n    if (exception.getResponseHeaders() != null &amp;&amp; exception.getResponseHeaders().getContentType() != null) {\n        response.contentType(exception.getResponseHeaders().getContentType());\n    }\n    return response.body(createErrorResponse(exception.getResponseBodyAsString()));\n}\n</code></pre>\n<p>Is there a way, I can change the code to avoid the bug ?</p>\n"},{"tags":["java","spring","aspectj","spring-aop","load-time-weaving"],"comments":[{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":0,"creation_date":1590569119,"post_id":62031518,"comment_id":109725469,"body_markdown":"Would you mind explaining what the problem is about adding those command line parameters? You have to specify project-specific parameters all the time, e.g. class path (even though you might not notice because Gradle or Maven or your IDE do it for you, certain system properties in order to enable specific options and so forth. Just configure your build tool correctly and it will do it automatically for you.","body":"Would you mind explaining what the problem is about adding those command line parameters? You have to specify project-specific parameters all the time, e.g. class path (even though you might not notice because Gradle or Maven or your IDE do it for you, certain system properties in order to enable specific options and so forth. Just configure your build tool correctly and it will do it automatically for you."},{"owner":{"account_id":13846236,"reputation":25,"user_id":9995332,"display_name":"Sagar Verma"},"score":0,"creation_date":1590580670,"post_id":62031518,"comment_id":109731817,"body_markdown":"This would required changes in deployment script in all the application that we&#39;ve running in production. \n\n\n\nI&#39;ll explain my problem statement first, I&#39;ve a requirement to create a fat JAR to do certain task, this also requires certain aspects to be invoked in case an object (which is not managed by Spring) is called. If a different application use this JAR, they&#39;d first need to make changes in deployment scripts and would increase the integration process.","body":"This would required changes in deployment script in all the application that we&#39;ve running in production.     I&#39;ll explain my problem statement first, I&#39;ve a requirement to create a fat JAR to do certain task, this also requires certain aspects to be invoked in case an object (which is not managed by Spring) is called. If a different application use this JAR, they&#39;d first need to make changes in deployment scripts and would increase the integration process."},{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":0,"creation_date":1590590985,"post_id":62031518,"comment_id":109738109,"body_markdown":"So making changes in configurations of all applications using your JAR is acceptable, just not changes in deployment scripts. Am I understanding you correctly?","body":"So making changes in configurations of all applications using your JAR is acceptable, just not changes in deployment scripts. Am I understanding you correctly?"}],"answers":[{"tags":[],"owner":{"account_id":13031664,"reputation":1971,"user_id":9417843,"display_name":"zlaval"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1590529799,"creation_date":1590529799,"answer_id":62031988,"question_id":62031518,"body_markdown":"Use the following on a @Configuration annotated class.\r\n\r\n    @EnableLoadTimeWeaving(aspectjWeaving=ENABLED)","title":"Is there a way to enable load time weaving in AspectJ without passing java agent arguments to JVM?","body":"<p>Use the following on a @Configuration annotated class.</p>\n\n<pre><code>@EnableLoadTimeWeaving(aspectjWeaving=ENABLED)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18441269,"reputation":181,"user_id":13433846,"display_name":"godsim"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1590681774,"creation_date":1590681774,"answer_id":62069237,"question_id":62031518,"body_markdown":"I guess no. You need the agents to actually facilitate the weaving before any of your application classes are loaded since they have to be rewritten. I think the @EnableLoadtimeWeaving config is just to tell CGLIB not to create proxy classes for your annotated code, because it&#39;s not necessary any more. But I&#39;m not 100% sure on that last part tbh; it might as well tell the agents to actually weave the code, when they find it during classpath scanning.\r\n\r\nAnd don&#39;t forget to configure your aop.xml in the META-INF directory!\r\n","title":"Is there a way to enable load time weaving in AspectJ without passing java agent arguments to JVM?","body":"<p>I guess no. You need the agents to actually facilitate the weaving before any of your application classes are loaded since they have to be rewritten. I think the @EnableLoadtimeWeaving config is just to tell CGLIB not to create proxy classes for your annotated code, because it's not necessary any more. But I'm not 100% sure on that last part tbh; it might as well tell the agents to actually weave the code, when they find it during classpath scanning.</p>\n\n<p>And don't forget to configure your aop.xml in the META-INF directory!</p>\n"}],"owner":{"account_id":13846236,"reputation":25,"user_id":9995332,"display_name":"Sagar Verma"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":495,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1654096886,"creation_date":1590527660,"question_id":62031518,"body_markdown":"I&#39;ve a requirement to use load time weaving in AspectJ in a spring application, from what I can see in different sources is that you&#39;ve to pass the javaagent argument to your JVM for enabling the load time weaving. \r\n\r\ni.e.\r\n\r\n```\r\n-javaagent:path/to/spring-aop-aspectj-ltw/spring-instrument-4.2.5.RELEASE.jar\r\n-javaagent:path/to/spring-aop-aspectj-ltw/aspectjweaver-1.8.8.jar\r\n```\r\n\r\nI&#39;m wondering is there any alternative way to initialize this in Spring applications? \r\n\r\nP.S I&#39;m using Gradle to build the project ","title":"Is there a way to enable load time weaving in AspectJ without passing java agent arguments to JVM?","body":"<p>I've a requirement to use load time weaving in AspectJ in a spring application, from what I can see in different sources is that you've to pass the javaagent argument to your JVM for enabling the load time weaving. </p>\n\n<p>i.e.</p>\n\n<pre><code>-javaagent:path/to/spring-aop-aspectj-ltw/spring-instrument-4.2.5.RELEASE.jar\n-javaagent:path/to/spring-aop-aspectj-ltw/aspectjweaver-1.8.8.jar\n</code></pre>\n\n<p>I'm wondering is there any alternative way to initialize this in Spring applications? </p>\n\n<p>P.S I'm using Gradle to build the project </p>\n"},{"tags":["java","anylogic"],"answers":[{"tags":[],"owner":{"account_id":18857533,"reputation":2186,"user_id":13755144,"display_name":"Emile Zankoul"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1654096849,"creation_date":1654076097,"answer_id":72459567,"question_id":72459353,"body_markdown":"Either change the collection type of `LinkedList` and use:\r\n\r\n    collection.removeFirst();\r\n\r\nOr keep it an array list and use:\r\n\r\n    collection.remove(0);","title":"Anylogic Take first entry of collection and delete said entry","body":"<p>Either change the collection type of <code>LinkedList</code> and use:</p>\n<pre><code>collection.removeFirst();\n</code></pre>\n<p>Or keep it an array list and use:</p>\n<pre><code>collection.remove(0);\n</code></pre>\n"}],"owner":{"account_id":18861675,"reputation":25,"user_id":13758397,"display_name":"alyre"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":174,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":72459567,"answer_count":1,"score":0,"last_activity_date":1654096849,"creation_date":1654075222,"question_id":72459353,"body_markdown":"I would like to take the first entry of my collection and - after having used it - delete it from said collection. \r\nI haven&#39;t found anything in the API of Anylogic, only the possiblity to delete all entries at once (which I do not want to do). \r\nIs it possible to delete only one entry? And do the others change their index automatically?","title":"Anylogic Take first entry of collection and delete said entry","body":"<p>I would like to take the first entry of my collection and - after having used it - delete it from said collection.\nI haven't found anything in the API of Anylogic, only the possiblity to delete all entries at once (which I do not want to do).\nIs it possible to delete only one entry? And do the others change their index automatically?</p>\n"},{"tags":["java","dll","structure","pass-by-reference","jna"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1654083039,"post_id":72461014,"comment_id":128006195,"body_markdown":"if you&#39;re trying to apply &quot;pass by reference&quot; using java, please read this:\nhttps://stackoverflow.com/questions/40480/is-java-pass-by-reference-or-pass-by-value","body":"if you&#39;re trying to apply &quot;pass by reference&quot; using java, please read this: <a href=\"https://stackoverflow.com/questions/40480/is-java-pass-by-reference-or-pass-by-value\" title=\"is java pass by reference or pass by value\">stackoverflow.com/questions/40480/&hellip;</a>"},{"owner":{"account_id":404649,"reputation":57172,"user_id":773113,"accept_rate":72,"display_name":"Mike Nakis"},"score":0,"creation_date":1654084286,"post_id":72461014,"comment_id":128006651,"body_markdown":"It is very nice to know that your &quot;SLPRParams is a Structure contains byte, int, float and array of them&quot; but I am afraid you are going to need to show us the exact definition of that &quot;structure&quot; as you call it.  Both the Java definition and the C++ definition. Might be a good idea to strip the structure down to only one or two members and get that to work first, and you can add more members later.","body":"It is very nice to know that your &quot;SLPRParams is a Structure contains byte, int, float and array of them&quot; but I am afraid you are going to need to show us the exact definition of that &quot;structure&quot; as you call it.  Both the Java definition and the C++ definition. Might be a good idea to strip the structure down to only one or two members and get that to work first, and you can add more members later."},{"owner":{"account_id":15370403,"reputation":63,"user_id":11088583,"display_name":"reza"},"score":0,"creation_date":1654088724,"post_id":72461014,"comment_id":128008285,"body_markdown":"In first solution i have problem in difference address of my structure between c++ and java and in second solution i have run time error, then it seems its not important what is in my structure exactly. but i tried the order of the elements be the same in c++ and java","body":"In first solution i have problem in difference address of my structure between c++ and java and in second solution i have run time error, then it seems its not important what is in my structure exactly. but i tried the order of the elements be the same in c++ and java"},{"owner":{"account_id":1187908,"reputation":8617,"user_id":1161484,"accept_rate":93,"display_name":"Daniel Widdis"},"score":0,"creation_date":1654096399,"post_id":72461014,"comment_id":128011320,"body_markdown":"@Stultuske good advice in general, but this concerns the specific peculiarities of passing Structure classes in JNA.","body":"@Stultuske good advice in general, but this concerns the specific peculiarities of passing Structure classes in JNA."}],"answers":[{"tags":[],"owner":{"account_id":1187908,"reputation":8617,"user_id":1161484,"accept_rate":93,"display_name":"Daniel Widdis"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1654096615,"creation_date":1654095957,"answer_id":72464143,"question_id":72461014,"body_markdown":"You can just pass the `Structure` directly as an argument.\r\n\r\nAs explained in [JNA Structures and Unions][1], \r\n&gt; When a function requires a pointer to a struct, a Java Structure should be used. \r\n\r\nAlso, the [javadoc for `Structure`][2] says:\r\n&gt;  When used as a function parameter or return value, this class corresponds to `struct*`. When used as a field within another `Structure`, it corresponds to `struct`. The tagging interfaces `Structure.ByReference` and `Structure.ByValue` may be used to alter the default behavior. \r\n\r\nPassing a pointer to a structure like `SLPRParams* params` is the most common way that DLLs expect structures, and that `ByReference` type is the default behavior.  Only if the full structure is passed inline would you need to use the `ByValue` tag on it.\r\n\r\nA nested Structure inside another Structure works the opposite way; it is `ByValue` by default and would need the `ByReference` tag if it was declared as a pointer.\r\n\r\nThe [examples in the JNA FAQ][3] (which you also linked) may make more sense once you understand this distinction.  The relevant example is this one:\r\n```c\r\nvoid myfunc(simplestruct* data); // use Structure\r\n```\r\n\r\nIn your case the correct mapping is \r\n```java\r\nvoid anpr_set_params(byte instance, SLPRParams slpr_params);\r\n```\r\n\r\nThe mapping with `long` might appear to work on 64-bit non-Windows operating systems if you extracted the structure&#39;s pointer&#39;s peer value (`Pointer.nativeValue(params.getPointer()`). But it wouldn&#39;t be portable.  Just pass the Structure and JNA handles the rest.\r\n\r\n\r\n  [1]: https://github.com/java-native-access/jna/blob/master/www/StructuresAndUnions.md#using-structures-and-unions\r\n  [2]: http://java-native-access.github.io/jna/5.11.0/javadoc/com/sun/jna/Structure.html\r\n  [3]: https://github.com/java-native-access/jna/blob/master/www/FrequentlyAskedQuestions.md#when-should-i-use-structurebyreference-structurebyvalue-structure","title":"Pass Structure by reference as argument in JNA","body":"<p>You can just pass the <code>Structure</code> directly as an argument.</p>\n<p>As explained in <a href=\"https://github.com/java-native-access/jna/blob/master/www/StructuresAndUnions.md#using-structures-and-unions\" rel=\"nofollow noreferrer\">JNA Structures and Unions</a>,</p>\n<blockquote>\n<p>When a function requires a pointer to a struct, a Java Structure should be used.</p>\n</blockquote>\n<p>Also, the <a href=\"http://java-native-access.github.io/jna/5.11.0/javadoc/com/sun/jna/Structure.html\" rel=\"nofollow noreferrer\">javadoc for <code>Structure</code></a> says:</p>\n<blockquote>\n<p>When used as a function parameter or return value, this class corresponds to <code>struct*</code>. When used as a field within another <code>Structure</code>, it corresponds to <code>struct</code>. The tagging interfaces <code>Structure.ByReference</code> and <code>Structure.ByValue</code> may be used to alter the default behavior.</p>\n</blockquote>\n<p>Passing a pointer to a structure like <code>SLPRParams* params</code> is the most common way that DLLs expect structures, and that <code>ByReference</code> type is the default behavior.  Only if the full structure is passed inline would you need to use the <code>ByValue</code> tag on it.</p>\n<p>A nested Structure inside another Structure works the opposite way; it is <code>ByValue</code> by default and would need the <code>ByReference</code> tag if it was declared as a pointer.</p>\n<p>The <a href=\"https://github.com/java-native-access/jna/blob/master/www/FrequentlyAskedQuestions.md#when-should-i-use-structurebyreference-structurebyvalue-structure\" rel=\"nofollow noreferrer\">examples in the JNA FAQ</a> (which you also linked) may make more sense once you understand this distinction.  The relevant example is this one:</p>\n<pre class=\"lang-c prettyprint-override\"><code>void myfunc(simplestruct* data); // use Structure\n</code></pre>\n<p>In your case the correct mapping is</p>\n<pre class=\"lang-java prettyprint-override\"><code>void anpr_set_params(byte instance, SLPRParams slpr_params);\n</code></pre>\n<p>The mapping with <code>long</code> might appear to work on 64-bit non-Windows operating systems if you extracted the structure's pointer's peer value (<code>Pointer.nativeValue(params.getPointer()</code>). But it wouldn't be portable.  Just pass the Structure and JNA handles the rest.</p>\n"}],"owner":{"account_id":15370403,"reputation":63,"user_id":11088583,"display_name":"reza"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":461,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":72464143,"answer_count":1,"score":1,"last_activity_date":1654096615,"creation_date":1654082699,"question_id":72461014,"body_markdown":"I have a dynamic link library (DLL) written in c++. In my DLL I have a function like this:\r\n```c++\r\nvoid anpr_set_params(byte instance, SLPRParams* params);\r\n```\r\nWhere `SLPRParams` is a Structure containing byte, int, float and array of them.\r\n\r\nNow, I want to use my DLL in Java. I&#39;m using JNA to call native code in my java project. I tried get help from [this site](https://www.baeldung.com/java-object-memory-address) to get the address of my structure in java and pass it to my dll, and I defined my signature function in Java like this:\r\n```java\r\nvoid anpr_set_params(byte instance, long slpr_params);\r\n```\r\nBut the address i get in c++ is different from the address i sent in Java.\r\n\r\nThen I looked for another solution and read the this [JNA FAQ entry](https://github.com/java-native-access/jna/blob/master/www/FrequentlyAskedQuestions.md#when-should-i-use-structurebyreference-structurebyvalue-structure).\r\n\r\nI tested all types but every time I get a runtime error.","title":"Pass Structure by reference as argument in JNA","body":"<p>I have a dynamic link library (DLL) written in c++. In my DLL I have a function like this:</p>\n<pre class=\"lang-cpp prettyprint-override\"><code>void anpr_set_params(byte instance, SLPRParams* params);\n</code></pre>\n<p>Where <code>SLPRParams</code> is a Structure containing byte, int, float and array of them.</p>\n<p>Now, I want to use my DLL in Java. I'm using JNA to call native code in my java project. I tried get help from <a href=\"https://www.baeldung.com/java-object-memory-address\" rel=\"nofollow noreferrer\">this site</a> to get the address of my structure in java and pass it to my dll, and I defined my signature function in Java like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>void anpr_set_params(byte instance, long slpr_params);\n</code></pre>\n<p>But the address i get in c++ is different from the address i sent in Java.</p>\n<p>Then I looked for another solution and read the this <a href=\"https://github.com/java-native-access/jna/blob/master/www/FrequentlyAskedQuestions.md#when-should-i-use-structurebyreference-structurebyvalue-structure\" rel=\"nofollow noreferrer\">JNA FAQ entry</a>.</p>\n<p>I tested all types but every time I get a runtime error.</p>\n"},{"tags":["java","sql","kotlin","orm","kotlin-exposed"],"owner":{"account_id":14508757,"reputation":452,"user_id":10479804,"display_name":"Andrey"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1035,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":0,"score":3,"last_activity_date":1654096400,"creation_date":1654092686,"question_id":72463300,"body_markdown":"I have such SQL query:\r\n```SQL\r\nSELECT parent_id, e.season_number, max_seasons.max_episode_number, b.start_year FROM episodes e \r\nJOIN basics b USING(title_id)\r\nJOIN (\r\n\tSELECT e.season_number, max(episode_number) AS max_episode_number FROM episodes e \r\n\tWHERE e.parent_id = 944947\r\n\tGROUP BY e.season_number, parent_id\r\n) AS max_seasons USING(season_number)\r\nWHERE e.parent_id = 944947 AND e.episode_number = 1\r\n```\r\nHere is the response:\r\n```\r\nparent_id|season_number|max_episode_number|start_year|\r\n--------+-------------+------------------+----------+\r\n  944947|            1|                10|      2011|\r\n  944947|            2|                10|      2012|\r\n  944947|            3|                10|      2013|\r\n  944947|            4|                10|      2014|\r\n  944947|            5|                10|      2015|\r\n  944947|            6|                10|      2016|\r\n  944947|            7|                 7|      2017|\r\n  944947|            8|                 6|      2019|\r\n```\r\n\r\nAnd I need to translate it to query using Exposed library and Kotlin. I extracted sub-query to separate variable `subQuery` with alias, and currently I try this one:\r\n```\r\nval episodeMax = episode.max()\r\nval subQuery = EpisodeTable.slice(season, episodeMax)\r\n\t.select { parentId eq id }\r\n\t.groupBy(parentId, season).alias(&quot;sub_query&quot;)\r\n\r\nEpisodeTable\r\n\t.join(BasicTable, JoinType.INNER,\r\n\t\tadditionalConstraint = { BasicTable.titleId eq titleId })\r\n\t.join(subQuery, JoinType.INNER,\r\n\t\tadditionalConstraint = { season eq subQuery[season] })\r\n\t.slice(parentId, season, subQuery[episodeMax], BasicTable.startYear)\r\n\t.select { (parentId eq id) and (episode eq 1) }\r\n\t.map { row -&gt;\r\n\t\tSeason(parentId = id,\r\n\t\t\tseason = row[season],\r\n\t\t\ttotalEpisodes = row[subQuery[episodeMax]],\r\n\t\t\tstartYear = row[BasicTable.startYear])\r\n\t}\r\n```\r\n\r\nBut got next error:\r\n&gt; java.lang.IllegalStateException: Field not found in original table fields\r\nat org.jetbrains.exposed.sql.QueryAlias.get(Alias.kt:84) ~[exposed-core-0.38.2.jar:na]\r\n\r\nSo there is some problem with mapping resulting rows, but I can&#39;t figure out why.\r\n\r\n","title":"Query with 2 joins and subquery using kotlin-exposed","body":"<p>I have such SQL query:</p>\n<pre><code>SELECT parent_id, e.season_number, max_seasons.max_episode_number, b.start_year FROM episodes e \nJOIN basics b USING(title_id)\nJOIN (\n    SELECT e.season_number, max(episode_number) AS max_episode_number FROM episodes e \n    WHERE e.parent_id = 944947\n    GROUP BY e.season_number, parent_id\n) AS max_seasons USING(season_number)\nWHERE e.parent_id = 944947 AND e.episode_number = 1\n</code></pre>\n<p>Here is the response:</p>\n<pre><code>parent_id|season_number|max_episode_number|start_year|\n--------+-------------+------------------+----------+\n  944947|            1|                10|      2011|\n  944947|            2|                10|      2012|\n  944947|            3|                10|      2013|\n  944947|            4|                10|      2014|\n  944947|            5|                10|      2015|\n  944947|            6|                10|      2016|\n  944947|            7|                 7|      2017|\n  944947|            8|                 6|      2019|\n</code></pre>\n<p>And I need to translate it to query using Exposed library and Kotlin. I extracted sub-query to separate variable <code>subQuery</code> with alias, and currently I try this one:</p>\n<pre><code>val episodeMax = episode.max()\nval subQuery = EpisodeTable.slice(season, episodeMax)\n    .select { parentId eq id }\n    .groupBy(parentId, season).alias(&quot;sub_query&quot;)\n\nEpisodeTable\n    .join(BasicTable, JoinType.INNER,\n        additionalConstraint = { BasicTable.titleId eq titleId })\n    .join(subQuery, JoinType.INNER,\n        additionalConstraint = { season eq subQuery[season] })\n    .slice(parentId, season, subQuery[episodeMax], BasicTable.startYear)\n    .select { (parentId eq id) and (episode eq 1) }\n    .map { row -&gt;\n        Season(parentId = id,\n            season = row[season],\n            totalEpisodes = row[subQuery[episodeMax]],\n            startYear = row[BasicTable.startYear])\n    }\n</code></pre>\n<p>But got next error:</p>\n<blockquote>\n<p>java.lang.IllegalStateException: Field not found in original table fields\nat org.jetbrains.exposed.sql.QueryAlias.get(Alias.kt:84) ~[exposed-core-0.38.2.jar:na]</p>\n</blockquote>\n<p>So there is some problem with mapping resulting rows, but I can't figure out why.</p>\n"},{"tags":["java","transactions","isolation","sails-mssqlserver"],"answers":[{"tags":[],"owner":{"account_id":2477473,"reputation":21,"user_id":2157799,"display_name":"user2157799"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1654096347,"creation_date":1654096347,"answer_id":72464251,"question_id":72463184,"body_markdown":"I was able to confirm that the configuration is correct.\r\nI was checking the transaction isolation level of the created connections using the SQL Server Profiler but I don&#39;t why this always show &quot;read committed&quot;.\r\nBut when I executed a query over the table sys.dm_exec_sessions I could check that the transaction isolation level was setted (transaction_isolation_level column = 1)\r\n\r\nBest regards\r\nDario","title":"Set transaction isolation in Wildfly local datasource","body":"<p>I was able to confirm that the configuration is correct.\nI was checking the transaction isolation level of the created connections using the SQL Server Profiler but I don't why this always show &quot;read committed&quot;.\nBut when I executed a query over the table sys.dm_exec_sessions I could check that the transaction isolation level was setted (transaction_isolation_level column = 1)</p>\n<p>Best regards\nDario</p>\n"}],"owner":{"account_id":2477473,"reputation":21,"user_id":2157799,"display_name":"user2157799"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":569,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1654096347,"creation_date":1654092203,"question_id":72463184,"body_markdown":"I am using Wildfly 13 with a MS SQLServer database (sqljdbc driver 4.0.0)\r\n\r\nI am trying to set the transaction isolation for the connections created by Wildfly.\r\n\r\nThe local datasource configuration is\r\n ```\r\n&lt;datasource jndi-name=&quot;java:jboss/datasources/SOMDS&quot; pool-name=&quot;SOMDS&quot; enabled=&quot;true&quot; use-java-context=&quot;true&quot;&gt;\r\n    &lt;connection-url&gt;jdbc:sqlserver://127.0.0.1\\SQLEXPRESS:1433;databaseName=vmscs_Eneos_2;sendStringParametersAsUnicode=false&lt;/connection-url&gt;\r\n    &lt;driver&gt;sqljdbc4.jar&lt;/driver&gt;\r\n    &lt;transaction-isolation&gt;TRANSACTION_READ_UNCOMMITTED&lt;/transaction-isolation&gt;\r\n    &lt;pool&gt;\r\n        &lt;min-pool-size&gt;10&lt;/min-pool-size&gt;\r\n        &lt;max-pool-size&gt;100&lt;/max-pool-size&gt;\r\n        &lt;prefill&gt;true&lt;/prefill&gt;\r\n    &lt;/pool&gt;\r\n    &lt;security&gt;\r\n        &lt;user-name&gt;som&lt;/user-name&gt;\r\n        &lt;password&gt;som&lt;/password&gt;\r\n    &lt;/security&gt;\r\n&lt;/datasource&gt;\r\n```\r\n\r\nBut all the connections are created with the default transaction isolation level (TRANSACTION_READ_COMMITTED) and this is never changed.\r\n\r\nAny idea about what could be wrong.\r\n\r\nThanks\r\n\r\n\r\n","title":"Set transaction isolation in Wildfly local datasource","body":"<p>I am using Wildfly 13 with a MS SQLServer database (sqljdbc driver 4.0.0)</p>\n<p>I am trying to set the transaction isolation for the connections created by Wildfly.</p>\n<p>The local datasource configuration is</p>\n<pre><code>&lt;datasource jndi-name=&quot;java:jboss/datasources/SOMDS&quot; pool-name=&quot;SOMDS&quot; enabled=&quot;true&quot; use-java-context=&quot;true&quot;&gt;\n   &lt;connection-url&gt;jdbc:sqlserver://127.0.0.1\\SQLEXPRESS:1433;databaseName=vmscs_Eneos_2;sendStringParametersAsUnicode=false&lt;/connection-url&gt;\n   &lt;driver&gt;sqljdbc4.jar&lt;/driver&gt;\n   &lt;transaction-isolation&gt;TRANSACTION_READ_UNCOMMITTED&lt;/transaction-isolation&gt;\n   &lt;pool&gt;\n       &lt;min-pool-size&gt;10&lt;/min-pool-size&gt;\n       &lt;max-pool-size&gt;100&lt;/max-pool-size&gt;\n       &lt;prefill&gt;true&lt;/prefill&gt;\n   &lt;/pool&gt;\n   &lt;security&gt;\n       &lt;user-name&gt;som&lt;/user-name&gt;\n       &lt;password&gt;som&lt;/password&gt;\n   &lt;/security&gt;\n&lt;/datasource&gt;\n</code></pre>\n<p>But all the connections are created with the default transaction isolation level (TRANSACTION_READ_COMMITTED) and this is never changed.</p>\n<p>Any idea about what could be wrong.</p>\n<p>Thanks</p>\n"},{"tags":["java","postgresql","jdbc"],"comments":[{"owner":{"display_name":"user330315"},"score":2,"creation_date":1654096485,"post_id":72464164,"comment_id":128011359,"body_markdown":"I doubt it. A single batch is always a single transaction. And per definition all statements in a transaction must be successful to be able to commit the transaction. Having a transaction where some statements are successful and some fail violates the most basic principle of a transactional database.","body":"I doubt it. A single batch is always a single transaction. And per definition all statements in a transaction must be successful to be able to commit the transaction. Having a transaction where some statements are successful and some fail violates the most basic principle of a transactional database."}],"owner":{"account_id":25447616,"reputation":11,"user_id":19249594,"display_name":"ron amir"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":97,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1654096082,"creation_date":1654096019,"question_id":72464164,"body_markdown":"When trying to run a batch on postgres it seems that a failure in one of the jobs prevents the completion of the batch. In MySQL and ORACLE continueBatchOnError flag is on the batch completes and its results can be retrieved after calling \r\n\r\n```BatchUpdateException.getUpdateCounts``` \r\n\r\nSo is there an option to allow this functionality in postgres jdbc?","title":"Postgres alternative to MySQL Connector/J continueBatchOnError","body":"<p>When trying to run a batch on postgres it seems that a failure in one of the jobs prevents the completion of the batch. In MySQL and ORACLE continueBatchOnError flag is on the batch completes and its results can be retrieved after calling</p>\n<p><code>BatchUpdateException.getUpdateCounts</code></p>\n<p>So is there an option to allow this functionality in postgres jdbc?</p>\n"},{"tags":["java","maven","maven-3","maven-dependency-plugin"],"answers":[{"tags":[],"owner":{"account_id":7363499,"reputation":27092,"user_id":5606016,"accept_rate":88,"display_name":"A_Di-Matteo"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1448836028,"creation_date":1448836028,"answer_id":33988901,"question_id":33988300,"body_markdown":"You could create an additional module (or an external maven project) having pom packaging (that is, empty) and having as dependencies all of the modules/projects you are interested in.\r\nThen, run the site life cycle on it (that is, simply mvn site). As part of the generated site under target\\site, you will have:\r\n\r\n - **Project Dependencies** page, providing you direct dependencies (not helpful, it will be the list of dependencies you typed) AND transitive dependencies (what you are looking for) all merged in one list with GAV, type, licence. Moreover, you will also have the full dependency:tree merged.\r\n - **Dependency Convergence** page, providing really useful information about convergence of the same transitive dependency and its different versions across other dependencies, if any\r\n\r\nAlternatively, you could also use this ad-hoc module/project to run other plugins on it, like the dependency:list you mentioned. This time you will get the full merged list you were looking for, although not alphabetically ordered and still difficult to read/re-use since it will be part of the build output. The site reports is instead much easier to read and handle (i.e. copy and paste of the dependencies table to an excel file).\r\n\r\nFor reference, the Maven Project Info Reports Plugin will be used by the site phase. Official site, [here](https://maven.apache.org/plugins/maven-project-info-reports-plugin/).","title":"How do I get an aggregated list of external dependencies of my maven project?","body":"<p>You could create an additional module (or an external maven project) having pom packaging (that is, empty) and having as dependencies all of the modules/projects you are interested in.\nThen, run the site life cycle on it (that is, simply mvn site). As part of the generated site under target\\site, you will have:</p>\n\n<ul>\n<li><strong>Project Dependencies</strong> page, providing you direct dependencies (not helpful, it will be the list of dependencies you typed) AND transitive dependencies (what you are looking for) all merged in one list with GAV, type, licence. Moreover, you will also have the full dependency:tree merged.</li>\n<li><strong>Dependency Convergence</strong> page, providing really useful information about convergence of the same transitive dependency and its different versions across other dependencies, if any</li>\n</ul>\n\n<p>Alternatively, you could also use this ad-hoc module/project to run other plugins on it, like the dependency:list you mentioned. This time you will get the full merged list you were looking for, although not alphabetically ordered and still difficult to read/re-use since it will be part of the build output. The site reports is instead much easier to read and handle (i.e. copy and paste of the dependencies table to an excel file).</p>\n\n<p>For reference, the Maven Project Info Reports Plugin will be used by the site phase. Official site, <a href=\"https://maven.apache.org/plugins/maven-project-info-reports-plugin/\" rel=\"nofollow\">here</a>.</p>\n"},{"tags":[],"owner":{"account_id":4888255,"reputation":4312,"user_id":3940047,"accept_rate":80,"display_name":"Pavan Kumar"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1654095946,"creation_date":1573810778,"answer_id":58874166,"question_id":33988300,"body_markdown":"I was trying out a similar exercise and could not find any configurations / goals to dependency plugin that can help in this regard. But fortunately, merging few commands would make it work well to provide a list of all unique and sorted list of all the dependencies.\r\n\r\n    mvn dependency:list | grep &quot;\\[INFO\\][^:]*:[^:]*:[^:]*:[^:]*:.*&quot; | cut -d] -f2- | sort | uniq\r\n\r\nBeing specific to this question, the below should work.\r\n\r\n    mvn dependency:list -DexcludeGroupIds=org.example.projectx | grep &quot;\\[INFO\\][^:]*:[^:]*:[^:]*:[^:]*:.*&quot; | cut -d] -f2- | sort | uniq\r\n\r\n","title":"How do I get an aggregated list of external dependencies of my maven project?","body":"<p>I was trying out a similar exercise and could not find any configurations / goals to dependency plugin that can help in this regard. But fortunately, merging few commands would make it work well to provide a list of all unique and sorted list of all the dependencies.</p>\n<pre><code>mvn dependency:list | grep &quot;\\[INFO\\][^:]*:[^:]*:[^:]*:[^:]*:.*&quot; | cut -d] -f2- | sort | uniq\n</code></pre>\n<p>Being specific to this question, the below should work.</p>\n<pre><code>mvn dependency:list -DexcludeGroupIds=org.example.projectx | grep &quot;\\[INFO\\][^:]*:[^:]*:[^:]*:[^:]*:.*&quot; | cut -d] -f2- | sort | uniq\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12320113,"reputation":511,"user_id":8989626,"display_name":"Fabio"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1645541964,"creation_date":1645541964,"answer_id":71223539,"question_id":33988300,"body_markdown":"I needed to extract the list of libraries/test libraries to feed them to the sonar scan application. We are not using the maven sonar-scanner plugin and I needed to have a simple way to avoid the developers to define the list of libraries manually. Also, I wanted to avoid to generally pass the whole maven cache to the scanner, as it would slow the scan down.\r\n\r\nWith the following commands, I can extract the list of dependencies and format as sorted, unique, comma separate list of full paths:\r\n\r\n```bash\r\n# This will generate the dependency list for each module and store it in separate files (#1)\r\nmvn dependency:list -DoutputAbsoluteArtifactFilename=true -DoutputFile=dependencies.txt -Dsort=true --offline\r\n\r\n# To print the test dependencies (#2)\r\n{ find . -name dependencies.txt -exec grep &quot;:test:&quot; {} \\;; } | sort | uniq | cut -d&quot;:&quot; -f 6 | paste -d , -s\r\n\r\n# To print the list of all dependencies except the test ones (#3)\r\n{ find . -name dependencies.txt -exec grep -E &quot;:.+:&quot; {} \\;; } | grep -v &quot;:test:&quot; | sort | uniq | cut -d&quot;:&quot; -f 6 | paste -d , -s\r\n```\r\n\r\nDescription:\r\n\r\n1. use the dependency plugin to generate all the dependencies and store them in files named dependencies.txt which will be stored in each module&#39;s folder. Also, it sorts the dependencies and prints the full path of the artifact (i.e. org.springframework.boot:spring-boot-autoconfigure:jar:2.5.6:compile:/usr/share/maven/ref/repository/org/springframework/boot/spring-boot-autoconfigure/2.5.6/spring-boot-autoconfigure-2.5.6.jar)\r\n\r\n2. find, in the current folder and subfolders, all the files named dependencies.txt and pass each found file to grep. Then filter only the lines containing &quot;:test:&quot;, then sort all the lines (each line is a dependency), filter out duplicates, extract the 6th field (which correspond to the file name with full path), then paste it as a sequence of comma separated entries\r\n\r\n3. is similar to 1 but grep will filter all the lines with at least 2 &quot;:&quot; (some lines are descriptive and contain only 1), then the result is passed through grep again to filter out all the lines containing the &quot;:test:&quot; string, leaving only the runtime, compile etc dependencies.\r\n\r\nOther info\r\n\r\n- the external curly brackets (&quot;{ ... }&quot;) are used to create a sub shell\r\n- the ones together (&quot;{}&quot;) are a placeholder for the `find` command and will be substituted with the path of each found file\r\n- the first &quot;;&quot; in &quot;\\\\;;&quot; is to end the find command and the second is to end the command in the subshell\r\n","title":"How do I get an aggregated list of external dependencies of my maven project?","body":"<p>I needed to extract the list of libraries/test libraries to feed them to the sonar scan application. We are not using the maven sonar-scanner plugin and I needed to have a simple way to avoid the developers to define the list of libraries manually. Also, I wanted to avoid to generally pass the whole maven cache to the scanner, as it would slow the scan down.</p>\n<p>With the following commands, I can extract the list of dependencies and format as sorted, unique, comma separate list of full paths:</p>\n<pre class=\"lang-sh prettyprint-override\"><code># This will generate the dependency list for each module and store it in separate files (#1)\nmvn dependency:list -DoutputAbsoluteArtifactFilename=true -DoutputFile=dependencies.txt -Dsort=true --offline\n\n# To print the test dependencies (#2)\n{ find . -name dependencies.txt -exec grep &quot;:test:&quot; {} \\;; } | sort | uniq | cut -d&quot;:&quot; -f 6 | paste -d , -s\n\n# To print the list of all dependencies except the test ones (#3)\n{ find . -name dependencies.txt -exec grep -E &quot;:.+:&quot; {} \\;; } | grep -v &quot;:test:&quot; | sort | uniq | cut -d&quot;:&quot; -f 6 | paste -d , -s\n</code></pre>\n<p>Description:</p>\n<ol>\n<li><p>use the dependency plugin to generate all the dependencies and store them in files named dependencies.txt which will be stored in each module's folder. Also, it sorts the dependencies and prints the full path of the artifact (i.e. org.springframework.boot:spring-boot-autoconfigure:jar:2.5.6:compile:/usr/share/maven/ref/repository/org/springframework/boot/spring-boot-autoconfigure/2.5.6/spring-boot-autoconfigure-2.5.6.jar)</p>\n</li>\n<li><p>find, in the current folder and subfolders, all the files named dependencies.txt and pass each found file to grep. Then filter only the lines containing &quot;:test:&quot;, then sort all the lines (each line is a dependency), filter out duplicates, extract the 6th field (which correspond to the file name with full path), then paste it as a sequence of comma separated entries</p>\n</li>\n<li><p>is similar to 1 but grep will filter all the lines with at least 2 &quot;:&quot; (some lines are descriptive and contain only 1), then the result is passed through grep again to filter out all the lines containing the &quot;:test:&quot; string, leaving only the runtime, compile etc dependencies.</p>\n</li>\n</ol>\n<p>Other info</p>\n<ul>\n<li>the external curly brackets (&quot;{ ... }&quot;) are used to create a sub shell</li>\n<li>the ones together (&quot;{}&quot;) are a placeholder for the <code>find</code> command and will be substituted with the path of each found file</li>\n<li>the first &quot;;&quot; in &quot;\\;;&quot; is to end the find command and the second is to end the command in the subshell</li>\n</ul>\n"}],"owner":{"account_id":203984,"reputation":21747,"user_id":451941,"accept_rate":100,"display_name":"Jeen Broekstra"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5254,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":33988901,"answer_count":3,"score":5,"last_activity_date":1654095946,"creation_date":1448832122,"question_id":33988300,"body_markdown":"I have a large multimodule maven project that has a large number of dependencies. I would like to generate a complete, duplicate-filtered list of third-party dependencies (that is, all dependencies not using the group id of the project) this project has.\r\n\r\nI have tried using `mvn dependency:list -DexcludeGroupIds=org.example.projectx` for this purpose, but it seems unable to aggregate the output into a single list. When I run the command from the project root command line, I get output as follows:\r\n\r\n    [...]\r\n    [INFO] ------------------------------------------------------------------------\r\n    [INFO] Building ProjectX: ModuleA - Datatypes 4.0.1-SNAPSHOT\r\n    [INFO] ------------------------------------------------------------------------\r\n    [INFO] \r\n    [INFO] --- maven-dependency-plugin:2.8:list (default-cli) @ projectx-moda-datatypes ---\r\n    [INFO] \r\n    [INFO] The following files have been resolved:\r\n    [INFO]    org.slf4j:slf4j-api:jar:1.7.10:compile\r\n    [INFO]    org.hamcrest:hamcrest-core:jar:1.3:test\r\n    [INFO]    junit:junit:jar:4.12:test\r\n    [INFO]    com.google.guava:guava:jar:18.0:compile\r\n    [INFO] \r\n    [INFO]                                                                         \r\n    [INFO] ------------------------------------------------------------------------\r\n    [INFO] Building ProjectX: ModuleB - Binary 4.0.1-SNAPSHOT\r\n    [INFO] ------------------------------------------------------------------------\r\n    [INFO] \r\n    [INFO] --- maven-dependency-plugin:2.8:list (default-cli) @ projectx-modb-binary ---\r\n    [INFO] \r\n    [INFO] The following files have been resolved:\r\n    [INFO]    org.slf4j:slf4j-api:jar:1.7.10:compile\r\n    [INFO]    com.google.guava:guava:jar:18.0:compile\r\n\r\n\r\n..etc, for every single submodule. Not only is this not a single list (but a separate list for each submodule), but as you can see it contains duplicates. Moreover, the actual output I&#39;m interested in is buried in a torrent of other Maven output (download messages, etc). \r\n\r\nThe `-DoutputFile=&lt;file.txt&gt;` option does not offer a solution either. The result of running `mvn dependency:list -DoutputFile=deps.txt` from my project root is not a single file listing all dependencies, but multiple separate files, one in each submodule-directory.\r\n\r\nI can of course redirect the maven console output to a file (`mvn [options] &gt; output.txt`) and try some clever regexing in vi to filter it down to the list I want. However, I was hoping there was a way to get what I need using just Maven, either using the dependency plugin or some other reporting plugin that I&#39;m not aware of. \r\n\r\n","title":"How do I get an aggregated list of external dependencies of my maven project?","body":"<p>I have a large multimodule maven project that has a large number of dependencies. I would like to generate a complete, duplicate-filtered list of third-party dependencies (that is, all dependencies not using the group id of the project) this project has.</p>\n\n<p>I have tried using <code>mvn dependency:list -DexcludeGroupIds=org.example.projectx</code> for this purpose, but it seems unable to aggregate the output into a single list. When I run the command from the project root command line, I get output as follows:</p>\n\n<pre><code>[...]\n[INFO] ------------------------------------------------------------------------\n[INFO] Building ProjectX: ModuleA - Datatypes 4.0.1-SNAPSHOT\n[INFO] ------------------------------------------------------------------------\n[INFO] \n[INFO] --- maven-dependency-plugin:2.8:list (default-cli) @ projectx-moda-datatypes ---\n[INFO] \n[INFO] The following files have been resolved:\n[INFO]    org.slf4j:slf4j-api:jar:1.7.10:compile\n[INFO]    org.hamcrest:hamcrest-core:jar:1.3:test\n[INFO]    junit:junit:jar:4.12:test\n[INFO]    com.google.guava:guava:jar:18.0:compile\n[INFO] \n[INFO]                                                                         \n[INFO] ------------------------------------------------------------------------\n[INFO] Building ProjectX: ModuleB - Binary 4.0.1-SNAPSHOT\n[INFO] ------------------------------------------------------------------------\n[INFO] \n[INFO] --- maven-dependency-plugin:2.8:list (default-cli) @ projectx-modb-binary ---\n[INFO] \n[INFO] The following files have been resolved:\n[INFO]    org.slf4j:slf4j-api:jar:1.7.10:compile\n[INFO]    com.google.guava:guava:jar:18.0:compile\n</code></pre>\n\n<p>..etc, for every single submodule. Not only is this not a single list (but a separate list for each submodule), but as you can see it contains duplicates. Moreover, the actual output I'm interested in is buried in a torrent of other Maven output (download messages, etc). </p>\n\n<p>The <code>-DoutputFile=&lt;file.txt&gt;</code> option does not offer a solution either. The result of running <code>mvn dependency:list -DoutputFile=deps.txt</code> from my project root is not a single file listing all dependencies, but multiple separate files, one in each submodule-directory.</p>\n\n<p>I can of course redirect the maven console output to a file (<code>mvn [options] &gt; output.txt</code>) and try some clever regexing in vi to filter it down to the list I want. However, I was hoping there was a way to get what I need using just Maven, either using the dependency plugin or some other reporting plugin that I'm not aware of. </p>\n"},{"tags":["java","docker"],"comments":[{"owner":{"account_id":318670,"reputation":15681,"user_id":636009,"display_name":"David Conrad"},"score":0,"creation_date":1654097384,"post_id":72464128,"comment_id":128011725,"body_markdown":"What is the value of the JAVA_HOME environment variable?","body":"What is the value of the JAVA_HOME environment variable?"},{"owner":{"account_id":19242650,"reputation":1,"user_id":14062320,"display_name":"Lynn Johnson"},"score":1,"creation_date":1654100862,"post_id":72464128,"comment_id":128013020,"body_markdown":"Brilliant! ... it is set to /usr/local/jdk1.8.0_45 on the machine.  I have unset it and the problem (at least this one) is solved.  Thank you!","body":"Brilliant! ... it is set to /usr/local/jdk1.8.0_45 on the machine.  I have unset it and the problem (at least this one) is solved.  Thank you!"}],"owner":{"account_id":19242650,"reputation":1,"user_id":14062320,"display_name":"Lynn Johnson"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":85,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1654095884,"creation_date":1654095884,"question_id":72464128,"body_markdown":"We have a project that has traditionally been run via Docker.  Inside the docker build are many applications, including java.  Many of our customers need Singularity vs docker, so a Singularity image is created by pulling the docker image from docker hub, e.g.\r\n\r\nsingularity build phg_38.sif docker://maizegenetics/phg/0.0.38\r\n\r\nThe problem I&#39;m having is the machine one which I test Singularity has java installed to:\r\n/usr/local/jdk1.8.0_45/bin/java\r\n\r\nInside the docker (and in Singularity when I shell into it and check) java is at:\r\n/usr/bin/java\r\n\r\nwhen I run a program via Singularity which uses java ProcessBuilder to make a command line call, I get the error:\r\n\r\n/liquibase/liquibase: line 91: /usr/local/jdk1.8.0_45/bin/java: No such file or directory\r\n\r\n\r\nThis tells me that Singularity is using the path to java from the machine, and not the java path that is inside the container.\r\n\r\nI don&#39;t have this problem when I run via docker, only when I run the Singularity image created from Docker.\r\n\r\nThe script I&#39;m running looks like this:\r\n\r\n    WORKING_DIR=/workdir/lcj34/liquibase_debug/\r\n    DOCKER_CONFIG_FILE=/phg/config.txt\r\n    phg_sif=/workdir/lcj34/liquibase_debug/phg_38.sif\r\n    \r\n    singularity exec \\\r\n            -B ${WORKING_DIR}/:/phg/ \\\r\n            &quot;$phg_sif&quot; \\\r\n            /tassel-5-standalone/run_pipeline.pl -Xmx100G -debug -configParameters ${DOCKER_CONFIG_FILE} \\\r\n            -LiquibaseUpdatePlugin -command status -endPlugin &gt; liquibaseUpdate_singularity_output.txt\r\n    \r\nHow can I get Singularity to access the correct java? \r\n\r\n \r\n\r\n\r\n\r\n\r\n","title":"Singularity tries to grab wrong java","body":"<p>We have a project that has traditionally been run via Docker.  Inside the docker build are many applications, including java.  Many of our customers need Singularity vs docker, so a Singularity image is created by pulling the docker image from docker hub, e.g.</p>\n<p>singularity build phg_38.sif docker://maizegenetics/phg/0.0.38</p>\n<p>The problem I'm having is the machine one which I test Singularity has java installed to:\n/usr/local/jdk1.8.0_45/bin/java</p>\n<p>Inside the docker (and in Singularity when I shell into it and check) java is at:\n/usr/bin/java</p>\n<p>when I run a program via Singularity which uses java ProcessBuilder to make a command line call, I get the error:</p>\n<p>/liquibase/liquibase: line 91: /usr/local/jdk1.8.0_45/bin/java: No such file or directory</p>\n<p>This tells me that Singularity is using the path to java from the machine, and not the java path that is inside the container.</p>\n<p>I don't have this problem when I run via docker, only when I run the Singularity image created from Docker.</p>\n<p>The script I'm running looks like this:</p>\n<pre><code>WORKING_DIR=/workdir/lcj34/liquibase_debug/\nDOCKER_CONFIG_FILE=/phg/config.txt\nphg_sif=/workdir/lcj34/liquibase_debug/phg_38.sif\n\nsingularity exec \\\n        -B ${WORKING_DIR}/:/phg/ \\\n        &quot;$phg_sif&quot; \\\n        /tassel-5-standalone/run_pipeline.pl -Xmx100G -debug -configParameters ${DOCKER_CONFIG_FILE} \\\n        -LiquibaseUpdatePlugin -command status -endPlugin &gt; liquibaseUpdate_singularity_output.txt\n</code></pre>\n<p>How can I get Singularity to access the correct java?</p>\n"},{"tags":["java","android","opencv"],"comments":[{"owner":{"account_id":1957068,"reputation":22025,"user_id":1759845,"accept_rate":65,"display_name":"BackSlash"},"score":0,"creation_date":1372010662,"post_id":17263619,"comment_id":25023153,"body_markdown":"Wait, what? you are trying to load a dll to Android? Don&#39;t you know that [a dll is just Windows-compatible](http://en.wikipedia.org/wiki/Dynamic-link_library)? You cannot load it on Android","body":"Wait, what? you are trying to load a dll to Android? Don&#39;t you know that <a href=\"http://en.wikipedia.org/wiki/Dynamic-link_library\" rel=\"nofollow noreferrer\">a dll is just Windows-compatible</a>? You cannot load it on Android"},{"owner":{"account_id":1380865,"reputation":233,"user_id":1364615,"accept_rate":88,"display_name":"Ey&#252;p Alemdar"},"score":0,"creation_date":1372010975,"post_id":17263619,"comment_id":25023221,"body_markdown":"It called native library for java and android. We can use it with Android NDK but all my codes are java and its running perfect when i use it in java project but android project... I guess i dont know something or missing something about it.","body":"It called native library for java and android. We can use it with Android NDK but all my codes are java and its running perfect when i use it in java project but android project... I guess i dont know something or missing something about it."},{"owner":{"account_id":294406,"reputation":24602,"user_id":598289,"accept_rate":85,"display_name":"SJuan76"},"score":0,"creation_date":1372011179,"post_id":17263619,"comment_id":25023286,"body_markdown":"Because you are not compiling it right. If it runs in a Java project (outside Android emulator) then it will not work in Android, just because the instruction sets are different (Android-&gt;ARM/RISC, PC-&gt;CISC)","body":"Because you are not compiling it right. If it runs in a Java project (outside Android emulator) then it will not work in Android, just because the instruction sets are different (Android-&gt;ARM/RISC, PC-&gt;CISC)"},{"owner":{"account_id":1380865,"reputation":233,"user_id":1364615,"accept_rate":88,"display_name":"Ey&#252;p Alemdar"},"score":0,"creation_date":1372011538,"post_id":17263619,"comment_id":25023368,"body_markdown":"I just added opencv-245.jar and edited Native Library Location (C:\\opencv\\build\\java\\x86) in this jar for java project and everything worked fine. There is only opencv_java245.dll in C:\\opencv\\build\\java\\x86 so i tried to import it android project and show it like the same but i failed.  is there a way to load this library in android?","body":"I just added opencv-245.jar and edited Native Library Location (C:\\opencv\\build\\java\\x86) in this jar for java project and everything worked fine. There is only opencv_java245.dll in C:\\opencv\\build\\java\\x86 so i tried to import it android project and show it like the same but i failed.  is there a way to load this library in android?"}],"answers":[{"tags":[],"owner":{"account_id":1957068,"reputation":22025,"user_id":1759845,"accept_rate":65,"display_name":"BackSlash"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1372012800,"creation_date":1372011015,"answer_id":17263747,"question_id":17263619,"body_markdown":"The basic problem is that you are trying to load a dll on an Android device. A DLL is &lt;a href=&quot;http://en.wikipedia.org/wiki/Dynamic-link_library&quot;&gt;a Microsoft Windows only library&lt;/a&gt;, it can&#39;t be loaded by an Android app.\r\n\r\n&lt;hr&gt;\r\n\r\n    java.lang.UnsatisfiedLinkError: Cannot load library: load_library[1108]: Library &#39;/data/data/org.myproject.stitching_android/lib/opencv_java245.dll&#39; not found\r\n\r\nMeans that your app can&#39;t find the file, even if it finds the file it won&#39;t be able to load it because Android doesn&#39;t support DLLs","title":"Android Emulator can not load native library","body":"<p>The basic problem is that you are trying to load a dll on an Android device. A DLL is <a href=\"http://en.wikipedia.org/wiki/Dynamic-link_library\" rel=\"nofollow\">a Microsoft Windows only library</a>, it can't be loaded by an Android app.</p>\n\n<hr>\n\n<pre><code>java.lang.UnsatisfiedLinkError: Cannot load library: load_library[1108]: Library '/data/data/org.myproject.stitching_android/lib/opencv_java245.dll' not found\n</code></pre>\n\n<p>Means that your app can't find the file, even if it finds the file it won't be able to load it because Android doesn't support DLLs</p>\n"},{"tags":[],"owner":{"account_id":4153676,"reputation":627,"user_id":3405462,"display_name":"att"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1654095848,"creation_date":1654095848,"answer_id":72464114,"question_id":17263619,"body_markdown":"Android is a Linux derivative and Linux dynamic libraries has .so extension ","title":"Android Emulator can not load native library","body":"<p>Android is a Linux derivative and Linux dynamic libraries has .so extension</p>\n"}],"owner":{"account_id":1380865,"reputation":233,"user_id":1364615,"accept_rate":88,"display_name":"Ey&#252;p Alemdar"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":891,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":17263747,"answer_count":2,"score":0,"last_activity_date":1654095848,"creation_date":1372010205,"question_id":17263619,"body_markdown":"I have a project about stitching images and I use opencv 2.4.5 and java. All my codes are java codes and it is running perfect when it&#39;s a java project. I transfered my code to android, imported opencv-245.jar and opencv_java245.dll to my project then I configured build path. But when my code comes to System.loadLibrary(...): \r\n\r\n    System.loadLibrary(Core.NATIVE_LIBRARY_NAME);\r\n    Mat image1= Highgui.imread( imgs.get(0).toString() , 1);\r\n    Mat image2= Highgui.imread( imgs.get(1).toString() , 1);\r\n    ...\r\n\r\nIt gives an error and couldn&#39;t load opencv native library(opencv_java245.dll). I searched it on the internet and read many things but didn&#39;t find an answer. Most of them were about android ndk but I don&#39;t use it and my codes are not c++. I tried to use System.load(path) but it failed again. Please give me any advice. Thanks. \r\n\r\nUPDATE:\r\nStack trace:\r\n\r\n    06-23 18:23:37.884: E/AndroidRuntime(443): FATAL EXCEPTION: main\r\n    06-23 18:23:37.884: E/AndroidRuntime(443): java.lang.IllegalStateException: Could not execute method of the activity\r\n    06-23 18:23:37.884: E/AndroidRuntime(443): \tat android.view.View$1.onClick(View.java:2704)\r\n    06-23 18:23:37.884: E/AndroidRuntime(443): \tat android.view.View.performClick(View.java:3100)\r\n    06-23 18:23:37.884: E/AndroidRuntime(443): \tat android.view.View$PerformClick.run(View.java:11644)\r\n    06-23 18:23:37.884: E/AndroidRuntime(443): \tat android.os.Handler.handleCallback(Handler.java:587)\r\n    06-23 18:23:37.884: E/AndroidRuntime(443): \tat android.os.Handler.dispatchMessage(Handler.java:92)\r\n    06-23 18:23:37.884: E/AndroidRuntime(443): \tat android.os.Looper.loop(Looper.java:126)\r\n    06-23 18:23:37.884: E/AndroidRuntime(443): \tat android.app.ActivityThread.main(ActivityThread.java:3997)\r\n    06-23 18:23:37.884: E/AndroidRuntime(443): \tat java.lang.reflect.Method.invokeNative(Native Method)\r\n    06-23 18:23:37.884: E/AndroidRuntime(443): \tat java.lang.reflect.Method.invoke(Method.java:491)\r\n    06-23 18:23:37.884: E/AndroidRuntime(443): \tat com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)\r\n    06-23 18:23:37.884: E/AndroidRuntime(443): \tat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)\r\n    06-23 18:23:37.884: E/AndroidRuntime(443): \tat dalvik.system.NativeStart.main(Native Method)\r\n    06-23 18:23:37.884: E/AndroidRuntime(443): Caused by: java.lang.reflect.InvocationTargetException\r\n    06-23 18:23:37.884: E/AndroidRuntime(443): \tat java.lang.reflect.Method.invokeNative(Native Method)\r\n    06-23 18:23:37.884: E/AndroidRuntime(443): \tat java.lang.reflect.Method.invoke(Method.java:491)\r\n    06-23 18:23:37.884: E/AndroidRuntime(443): \tat android.view.View$1.onClick(View.java:2699)\r\n    06-23 18:23:37.884: E/AndroidRuntime(443): \t... 11 more\r\n    06-23 18:23:37.884: E/AndroidRuntime(443): Caused by: java.lang.UnsatisfiedLinkError: Couldn&#39;t load opencv_java245: findLibrary returned null\r\n    06-23 18:23:37.884: E/AndroidRuntime(443): \tat java.lang.Runtime.loadLibrary(Runtime.java:425)\r\n    06-23 18:23:37.884: E/AndroidRuntime(443): \tat java.lang.System.loadLibrary(System.java:554)\r\n    06-23 18:23:37.884: E/AndroidRuntime(443): \tat org.myproject.stitching_android.SDCardToGridView.onClickStitching(SDCardToGridView.java:90)\r\n    06-23 18:23:37.884: E/AndroidRuntime(443): \t... 14 more\r\n\r\n\r\n    ","title":"Android Emulator can not load native library","body":"<p>I have a project about stitching images and I use opencv 2.4.5 and java. All my codes are java codes and it is running perfect when it's a java project. I transfered my code to android, imported opencv-245.jar and opencv_java245.dll to my project then I configured build path. But when my code comes to System.loadLibrary(...): </p>\n\n<pre><code>System.loadLibrary(Core.NATIVE_LIBRARY_NAME);\nMat image1= Highgui.imread( imgs.get(0).toString() , 1);\nMat image2= Highgui.imread( imgs.get(1).toString() , 1);\n...\n</code></pre>\n\n<p>It gives an error and couldn't load opencv native library(opencv_java245.dll). I searched it on the internet and read many things but didn't find an answer. Most of them were about android ndk but I don't use it and my codes are not c++. I tried to use System.load(path) but it failed again. Please give me any advice. Thanks. </p>\n\n<p>UPDATE:\nStack trace:</p>\n\n<pre><code>06-23 18:23:37.884: E/AndroidRuntime(443): FATAL EXCEPTION: main\n06-23 18:23:37.884: E/AndroidRuntime(443): java.lang.IllegalStateException: Could not execute method of the activity\n06-23 18:23:37.884: E/AndroidRuntime(443):  at android.view.View$1.onClick(View.java:2704)\n06-23 18:23:37.884: E/AndroidRuntime(443):  at android.view.View.performClick(View.java:3100)\n06-23 18:23:37.884: E/AndroidRuntime(443):  at android.view.View$PerformClick.run(View.java:11644)\n06-23 18:23:37.884: E/AndroidRuntime(443):  at android.os.Handler.handleCallback(Handler.java:587)\n06-23 18:23:37.884: E/AndroidRuntime(443):  at android.os.Handler.dispatchMessage(Handler.java:92)\n06-23 18:23:37.884: E/AndroidRuntime(443):  at android.os.Looper.loop(Looper.java:126)\n06-23 18:23:37.884: E/AndroidRuntime(443):  at android.app.ActivityThread.main(ActivityThread.java:3997)\n06-23 18:23:37.884: E/AndroidRuntime(443):  at java.lang.reflect.Method.invokeNative(Native Method)\n06-23 18:23:37.884: E/AndroidRuntime(443):  at java.lang.reflect.Method.invoke(Method.java:491)\n06-23 18:23:37.884: E/AndroidRuntime(443):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)\n06-23 18:23:37.884: E/AndroidRuntime(443):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)\n06-23 18:23:37.884: E/AndroidRuntime(443):  at dalvik.system.NativeStart.main(Native Method)\n06-23 18:23:37.884: E/AndroidRuntime(443): Caused by: java.lang.reflect.InvocationTargetException\n06-23 18:23:37.884: E/AndroidRuntime(443):  at java.lang.reflect.Method.invokeNative(Native Method)\n06-23 18:23:37.884: E/AndroidRuntime(443):  at java.lang.reflect.Method.invoke(Method.java:491)\n06-23 18:23:37.884: E/AndroidRuntime(443):  at android.view.View$1.onClick(View.java:2699)\n06-23 18:23:37.884: E/AndroidRuntime(443):  ... 11 more\n06-23 18:23:37.884: E/AndroidRuntime(443): Caused by: java.lang.UnsatisfiedLinkError: Couldn't load opencv_java245: findLibrary returned null\n06-23 18:23:37.884: E/AndroidRuntime(443):  at java.lang.Runtime.loadLibrary(Runtime.java:425)\n06-23 18:23:37.884: E/AndroidRuntime(443):  at java.lang.System.loadLibrary(System.java:554)\n06-23 18:23:37.884: E/AndroidRuntime(443):  at org.myproject.stitching_android.SDCardToGridView.onClickStitching(SDCardToGridView.java:90)\n06-23 18:23:37.884: E/AndroidRuntime(443):  ... 14 more\n</code></pre>\n"},{"tags":["java","arrays","c","structure","jna"],"comments":[{"owner":{"account_id":37136,"reputation":57812,"user_id":106104,"accept_rate":62,"display_name":"user253751"},"score":0,"creation_date":1654074404,"post_id":72458275,"comment_id":128003065,"body_markdown":"wouldn&#39;t you have to get the pointer *after* you call get_items?","body":"wouldn&#39;t you have to get the pointer <i>after</i> you call get_items?"}],"answers":[{"tags":[],"owner":{"account_id":1187908,"reputation":8617,"user_id":1161484,"accept_rate":93,"display_name":"Daniel Widdis"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1654095312,"creation_date":1654074927,"answer_id":72459300,"question_id":72458275,"body_markdown":"Your code works but you&#39;re using a lot of lower level functions when JNA has some higher level constructs.\r\n\r\nFirst, the C `struct` can be represented by a JNA `Structure`.\r\n```java\r\n@FieldOrder({ &quot;a&quot;, &quot;b&quot; })\r\nclass MyitemT extends Structure {\r\n    public int a;\r\n    public int b;\r\n}\r\n```\r\nSince the native code is handling the memory allocation, all you need is the pointer to it.  Rather than a pointer-sized memory allocation, you probably want a `PointerByReference`.\r\n```java\r\nPointerByReference pbr = new PointerByReference();\r\n```\r\nThe key methods you want from this are `getPointer()` (the pointer to the pointer) and `getValue()` (the pointed-to value).\r\n\r\nGiven the above, pass the pointer-to-the-pointer to the method, which will allocate the memory and populate the value.\r\n\r\nUsing the mapping you already have (not shown but inferred):\r\n```java\r\nint n = CLibrary.INSTANCE.get_items(pbr.getPointer());\r\n```\r\nHowever, you should actually map `get_items()` to take a `PointerByReference` argument and then you can just pass `items` directly.\r\n\r\nAt this point, `items.getValue()` is a `Pointer` to the start of your array of structures. Additional items would be at offsets of the pointer value based on the size of the structure (`item.size()`).  There are multiple ways of getting at that.\r\n\r\nIn your case since you know you just have pairs of ints, you could skip the whole &quot;structure&quot; part and just use `items.getValue().getInt(0)` and `items.getValue().getInt(4)` for the first pair; 8 and 12 for the second pair, etc.  But even better, just `items.getValue().getIntArray(0,n*2);` fetches an array of integers, just pull them out by pairs.\r\n\r\nBut that takes advantage of internal details. Probably the most JNA-ish choice is to use `Structure.toArray()` to create an array of your `MyitemT` structures. If you include a pointer constructor and create the initial structure using that pointer, `Structure.toArray()` uses that existing mapping. You can then `read()` into your array:\r\n\r\n```java\r\nMyItemT item = new MyItemT(pbr.getValue());\r\nMyItemT[] items = (MyItemT[]) item.toArray(n);\r\nfor (int i = 0; i &lt; n; i++) { \r\n    items[i].read();\r\n    // now you can see items[i].a and items[i].b\r\n}\r\n```\r\nDon&#39;t forget to eventually release the native-allocated memory however the API tells you to!","title":"How to call C function through JNA with 2d pointer?","body":"<p>Your code works but you're using a lot of lower level functions when JNA has some higher level constructs.</p>\n<p>First, the C <code>struct</code> can be represented by a JNA <code>Structure</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@FieldOrder({ &quot;a&quot;, &quot;b&quot; })\nclass MyitemT extends Structure {\n    public int a;\n    public int b;\n}\n</code></pre>\n<p>Since the native code is handling the memory allocation, all you need is the pointer to it.  Rather than a pointer-sized memory allocation, you probably want a <code>PointerByReference</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>PointerByReference pbr = new PointerByReference();\n</code></pre>\n<p>The key methods you want from this are <code>getPointer()</code> (the pointer to the pointer) and <code>getValue()</code> (the pointed-to value).</p>\n<p>Given the above, pass the pointer-to-the-pointer to the method, which will allocate the memory and populate the value.</p>\n<p>Using the mapping you already have (not shown but inferred):</p>\n<pre class=\"lang-java prettyprint-override\"><code>int n = CLibrary.INSTANCE.get_items(pbr.getPointer());\n</code></pre>\n<p>However, you should actually map <code>get_items()</code> to take a <code>PointerByReference</code> argument and then you can just pass <code>items</code> directly.</p>\n<p>At this point, <code>items.getValue()</code> is a <code>Pointer</code> to the start of your array of structures. Additional items would be at offsets of the pointer value based on the size of the structure (<code>item.size()</code>).  There are multiple ways of getting at that.</p>\n<p>In your case since you know you just have pairs of ints, you could skip the whole &quot;structure&quot; part and just use <code>items.getValue().getInt(0)</code> and <code>items.getValue().getInt(4)</code> for the first pair; 8 and 12 for the second pair, etc.  But even better, just <code>items.getValue().getIntArray(0,n*2);</code> fetches an array of integers, just pull them out by pairs.</p>\n<p>But that takes advantage of internal details. Probably the most JNA-ish choice is to use <code>Structure.toArray()</code> to create an array of your <code>MyitemT</code> structures. If you include a pointer constructor and create the initial structure using that pointer, <code>Structure.toArray()</code> uses that existing mapping. You can then <code>read()</code> into your array:</p>\n<pre class=\"lang-java prettyprint-override\"><code>MyItemT item = new MyItemT(pbr.getValue());\nMyItemT[] items = (MyItemT[]) item.toArray(n);\nfor (int i = 0; i &lt; n; i++) { \n    items[i].read();\n    // now you can see items[i].a and items[i].b\n}\n</code></pre>\n<p>Don't forget to eventually release the native-allocated memory however the API tells you to!</p>\n"}],"owner":{"account_id":20105266,"reputation":163,"user_id":14742948,"display_name":"Fran&#231;ois Colas"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":117,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":72459300,"answer_count":1,"score":3,"last_activity_date":1654095312,"creation_date":1654070354,"question_id":72458275,"body_markdown":"Here is the signature of my C function :\r\n```C\r\ntypedef struct myitem_s {\r\n    int a;\r\n    int b;\r\n} myitem_t;\r\n\r\nint get_items(myitem_t** items);\r\n```\r\n\r\nThe usage in a C program is::\r\n```C\r\nmyitem_t* items = NULL;\r\nint n = = get_items(&amp;items);\r\n\r\nfor (int i = 0; i &lt; n; ++i) {\r\n    myitem_t* item = &amp;items[i];\r\n}\r\n```\r\n\r\n`items` is allocated in the `get_items()` function and contains one or more `myitem_t` elements.\r\n\r\nFrom Java code I have succeeded in doing this:\r\n```Java\r\nMemory itemsPtr = new Memory(Native.POINTER_SIZE);\r\nPointer p = itemsPtr.getPointer(0);\r\nint n = CLibrary.INSTANCE.get_items(p);\r\n```\r\n\r\nThe `n` value is valid, `itemsPtr` is updated so I suggest value is good also. Now I have no idea of how to use it. Is there another way of doing it?","title":"How to call C function through JNA with 2d pointer?","body":"<p>Here is the signature of my C function :</p>\n<pre><code>typedef struct myitem_s {\n    int a;\n    int b;\n} myitem_t;\n\nint get_items(myitem_t** items);\n</code></pre>\n<p>The usage in a C program is::</p>\n<pre><code>myitem_t* items = NULL;\nint n = = get_items(&amp;items);\n\nfor (int i = 0; i &lt; n; ++i) {\n    myitem_t* item = &amp;items[i];\n}\n</code></pre>\n<p><code>items</code> is allocated in the <code>get_items()</code> function and contains one or more <code>myitem_t</code> elements.</p>\n<p>From Java code I have succeeded in doing this:</p>\n<pre><code>Memory itemsPtr = new Memory(Native.POINTER_SIZE);\nPointer p = itemsPtr.getPointer(0);\nint n = CLibrary.INSTANCE.get_items(p);\n</code></pre>\n<p>The <code>n</code> value is valid, <code>itemsPtr</code> is updated so I suggest value is good also. Now I have no idea of how to use it. Is there another way of doing it?</p>\n"},{"tags":["java","multithreading","design-patterns","thread-safety","singleton"],"answers":[{"tags":[],"owner":{"account_id":11468318,"reputation":101,"user_id":8405906,"display_name":"Dmytro Bill"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1654008334,"creation_date":1654008334,"answer_id":72449906,"question_id":72449405,"body_markdown":"1 Please dont use synchronized and Lock in one class\r\n\r\n2 If you want to use synchronized:\r\n\r\n    private static volatile JsonWriter instance;   \r\n    \r\n    private JsonWriter() {\r\n    }\r\n    \r\n    public synchronized static JsonWriter getInstance() {\r\n        JsonWriter result = instance;\r\n        if (result == null) {\r\n            instance = new JsonWriter();\r\n        }\r\n        return result;\r\n    }\r\n\r\n3 Or you can use Locks:\r\n\r\n    private static volatile JsonWriter instance;\r\n    private static final Object mutex = new Object();\r\n    \r\n    ReentrantReadWriteLock lock = new ReentrantReadWriteLock();\r\n    \r\n    private JsonWriter() {}\r\n    \r\n    public static JsonWriter getInstance() {\r\n        lock.writeLock().lock();\r\n        JsonWriter result = instance;\r\n        if (result == null) {\r\n           instance = result = new JsonWriter();\r\n          }\r\n        lock.writeLock().unlock();\r\n        return result;\r\n    }","title":"Thread safe singleton, locks","body":"<p>1 Please dont use synchronized and Lock in one class</p>\n<p>2 If you want to use synchronized:</p>\n<pre><code>private static volatile JsonWriter instance;   \n\nprivate JsonWriter() {\n}\n\npublic synchronized static JsonWriter getInstance() {\n    JsonWriter result = instance;\n    if (result == null) {\n        instance = new JsonWriter();\n    }\n    return result;\n}\n</code></pre>\n<p>3 Or you can use Locks:</p>\n<pre><code>private static volatile JsonWriter instance;\nprivate static final Object mutex = new Object();\n\nReentrantReadWriteLock lock = new ReentrantReadWriteLock();\n\nprivate JsonWriter() {}\n\npublic static JsonWriter getInstance() {\n    lock.writeLock().lock();\n    JsonWriter result = instance;\n    if (result == null) {\n       instance = result = new JsonWriter();\n      }\n    lock.writeLock().unlock();\n    return result;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5569841,"reputation":3750,"user_id":4415625,"display_name":"dani-vta"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1654095297,"creation_date":1654008339,"answer_id":72449910,"question_id":72449405,"body_markdown":"The best performing and thread-safe Singleton implementation is the William Pugh Singleton. You don&#39;t need synchronized blocks and `ReentrantReadWriteLock`.\r\n\r\nThe William Pugh implementation ensures multi-thread safety and the best performances as it avoids eager creation. In fact, the static member INSTANCE, initialized at class level, will be created only when the nested class is loaded by the class loader, i.e. when the nested class will be actually used. In the following implementation, this can only happen when the `getInstance()` method is invoked. In fact, conversely from the EagerSingleton, this model actually allows using the enclosing class without causing an eager instantiation. This means that any other method offered by the enclosing class can be safely used without initializing `INSTANCE`; only the `getInstance()` method will cause it.\r\n\r\nYour implementation could look like this:\r\n\r\n```\r\nclass JsonWriter {\r\n\r\n    private JsonWriter() {}\r\n\r\n    /* ... other methods ... */\r\n\r\n    public static JsonWriter getInstance() {\r\n        return SingletonHelper.INSTANCE;\r\n    }\r\n\r\n    private static class SingletonHelper {\r\n        private static final JsonWriter INSTANCE = new JsonWriter();\r\n    }\r\n}\r\n```\r\n\r\nA particular thanks to @Holger, who contributed with important clarifications and remarks in the comments.","title":"Thread safe singleton, locks","body":"<p>The best performing and thread-safe Singleton implementation is the William Pugh Singleton. You don't need synchronized blocks and <code>ReentrantReadWriteLock</code>.</p>\n<p>The William Pugh implementation ensures multi-thread safety and the best performances as it avoids eager creation. In fact, the static member INSTANCE, initialized at class level, will be created only when the nested class is loaded by the class loader, i.e. when the nested class will be actually used. In the following implementation, this can only happen when the <code>getInstance()</code> method is invoked. In fact, conversely from the EagerSingleton, this model actually allows using the enclosing class without causing an eager instantiation. This means that any other method offered by the enclosing class can be safely used without initializing <code>INSTANCE</code>; only the <code>getInstance()</code> method will cause it.</p>\n<p>Your implementation could look like this:</p>\n<pre><code>class JsonWriter {\n\n    private JsonWriter() {}\n\n    /* ... other methods ... */\n\n    public static JsonWriter getInstance() {\n        return SingletonHelper.INSTANCE;\n    }\n\n    private static class SingletonHelper {\n        private static final JsonWriter INSTANCE = new JsonWriter();\n    }\n}\n</code></pre>\n<p>A particular thanks to @Holger, who contributed with important clarifications and remarks in the comments.</p>\n"}],"owner":{"account_id":19988170,"reputation":63,"user_id":14649882,"display_name":"أكثم الحميدات"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":415,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"closed_date":1654073313,"accepted_answer_id":72449910,"answer_count":2,"score":2,"last_activity_date":1654095297,"creation_date":1654006333,"question_id":72449405,"body_markdown":"I have a Singleton class which is a thread safe, do I need to lock it methods? \r\n\r\n            private static volatile JsonWriter instance;\r\n    private static final Object mutex = new Object();\r\n    \r\n    ReentrantReadWriteLock lock = new ReentrantReadWriteLock();\r\n    \r\n    private JsonWriter() {\r\n    }\r\n    \r\n    public static JsonWriter getInstance() {\r\n        JsonWriter result = instance;\r\n        if (result == null) {\r\n            synchronized (mutex) {\r\n                result = instance;\r\n                if (result == null) {\r\n                    instance = result = new JsonWriter();\r\n                }\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n\r\ndo I need to lock each method like this to ensure thread safety? \r\n\r\n        public void write(String filePath, ArrayNode content) throws IOException {\r\n        lock.writeLock().lock();\r\n        File file = new File(MASTER_DIR + &quot;/&quot; + filePath);\r\n        mapper.writerWithDefaultPrettyPrinter().writeValue(Files.newOutputStream(file.toPath()), content);\r\n\r\n    }","title":"Thread safe singleton, locks","body":"<p>I have a Singleton class which is a thread safe, do I need to lock it methods?</p>\n<pre><code>        private static volatile JsonWriter instance;\nprivate static final Object mutex = new Object();\n\nReentrantReadWriteLock lock = new ReentrantReadWriteLock();\n\nprivate JsonWriter() {\n}\n\npublic static JsonWriter getInstance() {\n    JsonWriter result = instance;\n    if (result == null) {\n        synchronized (mutex) {\n            result = instance;\n            if (result == null) {\n                instance = result = new JsonWriter();\n            }\n        }\n    }\n    return result;\n}\n</code></pre>\n<p>do I need to lock each method like this to ensure thread safety?</p>\n<pre><code>    public void write(String filePath, ArrayNode content) throws IOException {\n    lock.writeLock().lock();\n    File file = new File(MASTER_DIR + &quot;/&quot; + filePath);\n    mapper.writerWithDefaultPrettyPrinter().writeValue(Files.newOutputStream(file.toPath()), content);\n\n}\n</code></pre>\n"},{"tags":["java","amazon-web-services","spring-boot","amazon-s3","aws-java-sdk"],"comments":[{"owner":{"account_id":10389194,"reputation":14819,"user_id":7661119,"display_name":"Ervin Szilagyi"},"score":0,"creation_date":1654089864,"post_id":72462318,"comment_id":128008720,"body_markdown":"Related: https://stackoverflow.com/questions/49125775/is-transfermanager-reusable-after-upload","body":"Related: <a href=\"https://stackoverflow.com/questions/49125775/is-transfermanager-reusable-after-upload\" title=\"is transfermanager reusable after upload\">stackoverflow.com/questions/49125775/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":1540816,"reputation":10259,"user_id":1435543,"display_name":"smac2020"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1654095292,"creation_date":1654091244,"answer_id":72462955,"question_id":72462318,"body_markdown":"The recommended practice is to move away from **AWS SDK for Java V1**. Amazon recommends that you use [AWS SDK for Java V2][1]. Now to upload content to an Amazon S3 bucket, you can use the [S3TransferManager][2]. \r\n\r\nIf you are not familiar with using the V2 SDK, I recommend that you read the [Developer Guide][3]. \r\n\r\nHere is a code example of how to use this to upload an object. And you can use the same instance to upload different objects. All you need to do is to set to pass the correct the values to **transferManager.uploadFile()**. \r\n\r\n    package com.example.transfermanager;\r\n    \r\n    import software.amazon.awssdk.auth.credentials.EnvironmentVariableCredentialsProvider;\r\n    import software.amazon.awssdk.auth.credentials.ProfileCredentialsProvider;\r\n    import software.amazon.awssdk.regions.Region;\r\n    import software.amazon.awssdk.transfer.s3.FileUpload;\r\n    import software.amazon.awssdk.transfer.s3.S3TransferManager;\r\n    import java.nio.file.Paths;\r\n    \r\n    /**\r\n     * Before running this Java V2 code example, set up your development environment, including your credentials.\r\n     *\r\n     * For more information, see the following documentation topic:\r\n     *\r\n     * https://docs.aws.amazon.com/sdk-for-java/latest/developer-guide/get-started.html\r\n     */\r\n    public class UploadObject {\r\n    \r\n        public static void main(String[] args) {\r\n    \r\n            final String usage = &quot;\\n&quot; +\r\n                    &quot;Usage:\\n&quot; +\r\n                    &quot;  &lt;bucketName&gt; &lt;objectKey&gt; &lt;objectPath&gt; \\n\\n&quot; +\r\n                    &quot;Where:\\n&quot; +\r\n                    &quot;  bucketName - The Amazon S3 bucket to upload an object into.\\n&quot; +\r\n                    &quot;  objectKey - The object to upload (for example, book.pdf).\\n&quot; +\r\n                    &quot;  objectPath - The path where the file is located (for example, C:/AWS/book2.pdf). \\n\\n&quot; ;\r\n    \r\n           if (args.length != 3) {\r\n                System.out.println(usage);\r\n                System.exit(1);\r\n           }\r\n    \r\n            long mb = 1024;\r\n            String bucketName = args[0];\r\n            String objectKey = args[1];\r\n            String objectPath = args[2];\r\n    \r\n    \r\n            System.out.println(&quot;Putting an object into bucket &quot;+bucketName +&quot; using the S3TransferManager&quot;);\r\n            ProfileCredentialsProvider credentialsProvider = ProfileCredentialsProvider.create();\r\n            Region region = Region.US_EAST_1;\r\n            S3TransferManager transferManager = S3TransferManager.builder()\r\n                    .s3ClientConfiguration(cfg -&gt;cfg.region(region)\r\n                            .credentialsProvider(credentialsProvider)\r\n                            .targetThroughputInGbps(20.0)\r\n                            .minimumPartSizeInBytes(10 * mb))\r\n                    .build();\r\n    \r\n            uploadObjectTM(transferManager, bucketName, objectKey, objectPath);\r\n            System.out.println(&quot;Object was successfully uploaded using the Transfer Manager.&quot;);\r\n            transferManager.close();\r\n        }\r\n    \r\n        public static void uploadObjectTM( S3TransferManager transferManager, String bucketName, String objectKey, String objectPath) {\r\n    \r\n            FileUpload upload =\r\n                    transferManager.uploadFile(u -&gt; u.source(Paths.get(objectPath))\r\n                            .putObjectRequest(p -&gt; p.bucket(bucketName).key(objectKey)));\r\n            upload.completionFuture().join();\r\n        }\r\n    }\r\n\r\n\r\n**UPDATE**\r\n\r\nAs the above API still appears to be in Preview Mode (judging from Maven repo): \r\n\r\nhttps://mvnrepository.com/artifact/software.amazon.awssdk/s3-transfer-manager\r\n\r\nYou can use the [Amazon S3 V2 Service Client][4] to upload objects. V2 is still better practice then V1. \r\n\r\nYou can use this code: \r\n\r\n    package com.example.s3;\r\n    \r\n    // snippet-start:[s3.java2.s3_object_upload.import]\r\n    import software.amazon.awssdk.auth.credentials.ProfileCredentialsProvider;\r\n    import software.amazon.awssdk.core.sync.RequestBody;\r\n    import software.amazon.awssdk.regions.Region;\r\n    import software.amazon.awssdk.services.s3.S3Client;\r\n    import software.amazon.awssdk.services.s3.model.PutObjectRequest;\r\n    import software.amazon.awssdk.services.s3.model.PutObjectResponse;\r\n    import software.amazon.awssdk.services.s3.model.S3Exception;\r\n    import java.io.File;\r\n    import java.io.FileInputStream;\r\n    import java.io.IOException;\r\n    import java.util.HashMap;\r\n    import java.util.Map;\r\n    // snippet-end:[s3.java2.s3_object_upload.import]\r\n    \r\n    /**\r\n     * Before running this Java V2 code example, set up your development environment, including your credentials.\r\n     *\r\n     * For more information, see the following documentation topic:\r\n     *\r\n     * https://docs.aws.amazon.com/sdk-for-java/latest/developer-guide/get-started.html\r\n     */\r\n    \r\n    public class PutObject {\r\n    \r\n        public static void main(String[] args) {\r\n            final String usage = &quot;\\n&quot; +\r\n                    &quot;Usage:\\n&quot; +\r\n                    &quot;  &lt;bucketName&gt; &lt;objectKey&gt; &lt;objectPath&gt; \\n\\n&quot; +\r\n                    &quot;Where:\\n&quot; +\r\n                    &quot;  bucketName - The Amazon S3 bucket to upload an object into.\\n&quot; +\r\n                    &quot;  objectKey - The object to upload (for example, book.pdf).\\n&quot; +\r\n                    &quot;  objectPath - The path where the file is located (for example, C:/AWS/book2.pdf). \\n\\n&quot; ;\r\n    \r\n            if (args.length != 3) {\r\n                System.out.println(usage);\r\n                System.exit(1);\r\n            }\r\n    \r\n            String bucketName =args[0];\r\n            String objectKey = args[1];\r\n            String objectPath = args[2];\r\n            System.out.println(&quot;Putting object &quot; + objectKey +&quot; into bucket &quot;+bucketName);\r\n            System.out.println(&quot;  in bucket: &quot; + bucketName);\r\n    \r\n            ProfileCredentialsProvider credentialsProvider = ProfileCredentialsProvider.create();\r\n            Region region = Region.US_EAST_1;\r\n            S3Client s3 = S3Client.builder()\r\n                    .region(region)\r\n                    .credentialsProvider(credentialsProvider)\r\n                    .build();\r\n    \r\n            String result = putS3Object(s3, bucketName, objectKey, objectPath);\r\n            System.out.println(&quot;Tag information: &quot;+result);\r\n            s3.close();\r\n        }\r\n    \r\n        // snippet-start:[s3.java2.s3_object_upload.main]\r\n        public static String putS3Object(S3Client s3,\r\n                                         String bucketName,\r\n                                         String objectKey,\r\n                                         String objectPath) {\r\n    \r\n            try {\r\n    \r\n                Map&lt;String, String&gt; metadata = new HashMap&lt;&gt;();\r\n                metadata.put(&quot;x-amz-meta-myVal&quot;, &quot;test&quot;);\r\n    \r\n                PutObjectRequest putOb = PutObjectRequest.builder()\r\n                        .bucket(bucketName)\r\n                        .key(objectKey)\r\n                        .metadata(metadata)\r\n                        .build();\r\n    \r\n                PutObjectResponse response = s3.putObject(putOb,\r\n                        RequestBody.fromBytes(getObjectFile(objectPath)));\r\n    \r\n               return response.eTag();\r\n    \r\n            } catch (S3Exception e) {\r\n                System.err.println(e.getMessage());\r\n                System.exit(1);\r\n            }\r\n            return &quot;&quot;;\r\n        }\r\n    \r\n        // Return a byte array.\r\n        private static byte[] getObjectFile(String filePath) {\r\n    \r\n            FileInputStream fileInputStream = null;\r\n            byte[] bytesArray = null;\r\n    \r\n            try {\r\n                File file = new File(filePath);\r\n                bytesArray = new byte[(int) file.length()];\r\n                fileInputStream = new FileInputStream(file);\r\n                fileInputStream.read(bytesArray);\r\n    \r\n            } catch (IOException e) {\r\n                e.printStackTrace();\r\n            } finally {\r\n                if (fileInputStream != null) {\r\n                    try {\r\n                        fileInputStream.close();\r\n                    } catch (IOException e) {\r\n                        e.printStackTrace();\r\n                    }\r\n                }\r\n            }\r\n            return bytesArray;\r\n        }\r\n        // snippet-end:[s3.java2.s3_object_upload.main]\r\n    } \r\n\r\n\r\n  [1]: https://github.com/awsdocs/aws-doc-sdk-examples/tree/main/javav2\r\n  [2]: https://sdk.amazonaws.com/java/api/latest/software/amazon/awssdk/transfer/s3/S3TransferManager.html\r\n  [3]: https://docs.aws.amazon.com/sdk-for-java/latest/developer-guide/home.html\r\n  [4]: https://sdk.amazonaws.com/java/api/latest/software/amazon/awssdk/services/s3/S3Client.html","title":"Can we use the same instance of AWS S3 TransferManager or should we create a new instance for each file upload?","body":"<p>The recommended practice is to move away from <strong>AWS SDK for Java V1</strong>. Amazon recommends that you use <a href=\"https://github.com/awsdocs/aws-doc-sdk-examples/tree/main/javav2\" rel=\"nofollow noreferrer\">AWS SDK for Java V2</a>. Now to upload content to an Amazon S3 bucket, you can use the <a href=\"https://sdk.amazonaws.com/java/api/latest/software/amazon/awssdk/transfer/s3/S3TransferManager.html\" rel=\"nofollow noreferrer\">S3TransferManager</a>.</p>\n<p>If you are not familiar with using the V2 SDK, I recommend that you read the <a href=\"https://docs.aws.amazon.com/sdk-for-java/latest/developer-guide/home.html\" rel=\"nofollow noreferrer\">Developer Guide</a>.</p>\n<p>Here is a code example of how to use this to upload an object. And you can use the same instance to upload different objects. All you need to do is to set to pass the correct the values to <strong>transferManager.uploadFile()</strong>.</p>\n<pre><code>package com.example.transfermanager;\n\nimport software.amazon.awssdk.auth.credentials.EnvironmentVariableCredentialsProvider;\nimport software.amazon.awssdk.auth.credentials.ProfileCredentialsProvider;\nimport software.amazon.awssdk.regions.Region;\nimport software.amazon.awssdk.transfer.s3.FileUpload;\nimport software.amazon.awssdk.transfer.s3.S3TransferManager;\nimport java.nio.file.Paths;\n\n/**\n * Before running this Java V2 code example, set up your development environment, including your credentials.\n *\n * For more information, see the following documentation topic:\n *\n * https://docs.aws.amazon.com/sdk-for-java/latest/developer-guide/get-started.html\n */\npublic class UploadObject {\n\n    public static void main(String[] args) {\n\n        final String usage = &quot;\\n&quot; +\n                &quot;Usage:\\n&quot; +\n                &quot;  &lt;bucketName&gt; &lt;objectKey&gt; &lt;objectPath&gt; \\n\\n&quot; +\n                &quot;Where:\\n&quot; +\n                &quot;  bucketName - The Amazon S3 bucket to upload an object into.\\n&quot; +\n                &quot;  objectKey - The object to upload (for example, book.pdf).\\n&quot; +\n                &quot;  objectPath - The path where the file is located (for example, C:/AWS/book2.pdf). \\n\\n&quot; ;\n\n       if (args.length != 3) {\n            System.out.println(usage);\n            System.exit(1);\n       }\n\n        long mb = 1024;\n        String bucketName = args[0];\n        String objectKey = args[1];\n        String objectPath = args[2];\n\n\n        System.out.println(&quot;Putting an object into bucket &quot;+bucketName +&quot; using the S3TransferManager&quot;);\n        ProfileCredentialsProvider credentialsProvider = ProfileCredentialsProvider.create();\n        Region region = Region.US_EAST_1;\n        S3TransferManager transferManager = S3TransferManager.builder()\n                .s3ClientConfiguration(cfg -&gt;cfg.region(region)\n                        .credentialsProvider(credentialsProvider)\n                        .targetThroughputInGbps(20.0)\n                        .minimumPartSizeInBytes(10 * mb))\n                .build();\n\n        uploadObjectTM(transferManager, bucketName, objectKey, objectPath);\n        System.out.println(&quot;Object was successfully uploaded using the Transfer Manager.&quot;);\n        transferManager.close();\n    }\n\n    public static void uploadObjectTM( S3TransferManager transferManager, String bucketName, String objectKey, String objectPath) {\n\n        FileUpload upload =\n                transferManager.uploadFile(u -&gt; u.source(Paths.get(objectPath))\n                        .putObjectRequest(p -&gt; p.bucket(bucketName).key(objectKey)));\n        upload.completionFuture().join();\n    }\n}\n</code></pre>\n<p><strong>UPDATE</strong></p>\n<p>As the above API still appears to be in Preview Mode (judging from Maven repo):</p>\n<p><a href=\"https://mvnrepository.com/artifact/software.amazon.awssdk/s3-transfer-manager\" rel=\"nofollow noreferrer\">https://mvnrepository.com/artifact/software.amazon.awssdk/s3-transfer-manager</a></p>\n<p>You can use the <a href=\"https://sdk.amazonaws.com/java/api/latest/software/amazon/awssdk/services/s3/S3Client.html\" rel=\"nofollow noreferrer\">Amazon S3 V2 Service Client</a> to upload objects. V2 is still better practice then V1.</p>\n<p>You can use this code:</p>\n<pre><code>package com.example.s3;\n\n// snippet-start:[s3.java2.s3_object_upload.import]\nimport software.amazon.awssdk.auth.credentials.ProfileCredentialsProvider;\nimport software.amazon.awssdk.core.sync.RequestBody;\nimport software.amazon.awssdk.regions.Region;\nimport software.amazon.awssdk.services.s3.S3Client;\nimport software.amazon.awssdk.services.s3.model.PutObjectRequest;\nimport software.amazon.awssdk.services.s3.model.PutObjectResponse;\nimport software.amazon.awssdk.services.s3.model.S3Exception;\nimport java.io.File;\nimport java.io.FileInputStream;\nimport java.io.IOException;\nimport java.util.HashMap;\nimport java.util.Map;\n// snippet-end:[s3.java2.s3_object_upload.import]\n\n/**\n * Before running this Java V2 code example, set up your development environment, including your credentials.\n *\n * For more information, see the following documentation topic:\n *\n * https://docs.aws.amazon.com/sdk-for-java/latest/developer-guide/get-started.html\n */\n\npublic class PutObject {\n\n    public static void main(String[] args) {\n        final String usage = &quot;\\n&quot; +\n                &quot;Usage:\\n&quot; +\n                &quot;  &lt;bucketName&gt; &lt;objectKey&gt; &lt;objectPath&gt; \\n\\n&quot; +\n                &quot;Where:\\n&quot; +\n                &quot;  bucketName - The Amazon S3 bucket to upload an object into.\\n&quot; +\n                &quot;  objectKey - The object to upload (for example, book.pdf).\\n&quot; +\n                &quot;  objectPath - The path where the file is located (for example, C:/AWS/book2.pdf). \\n\\n&quot; ;\n\n        if (args.length != 3) {\n            System.out.println(usage);\n            System.exit(1);\n        }\n\n        String bucketName =args[0];\n        String objectKey = args[1];\n        String objectPath = args[2];\n        System.out.println(&quot;Putting object &quot; + objectKey +&quot; into bucket &quot;+bucketName);\n        System.out.println(&quot;  in bucket: &quot; + bucketName);\n\n        ProfileCredentialsProvider credentialsProvider = ProfileCredentialsProvider.create();\n        Region region = Region.US_EAST_1;\n        S3Client s3 = S3Client.builder()\n                .region(region)\n                .credentialsProvider(credentialsProvider)\n                .build();\n\n        String result = putS3Object(s3, bucketName, objectKey, objectPath);\n        System.out.println(&quot;Tag information: &quot;+result);\n        s3.close();\n    }\n\n    // snippet-start:[s3.java2.s3_object_upload.main]\n    public static String putS3Object(S3Client s3,\n                                     String bucketName,\n                                     String objectKey,\n                                     String objectPath) {\n\n        try {\n\n            Map&lt;String, String&gt; metadata = new HashMap&lt;&gt;();\n            metadata.put(&quot;x-amz-meta-myVal&quot;, &quot;test&quot;);\n\n            PutObjectRequest putOb = PutObjectRequest.builder()\n                    .bucket(bucketName)\n                    .key(objectKey)\n                    .metadata(metadata)\n                    .build();\n\n            PutObjectResponse response = s3.putObject(putOb,\n                    RequestBody.fromBytes(getObjectFile(objectPath)));\n\n           return response.eTag();\n\n        } catch (S3Exception e) {\n            System.err.println(e.getMessage());\n            System.exit(1);\n        }\n        return &quot;&quot;;\n    }\n\n    // Return a byte array.\n    private static byte[] getObjectFile(String filePath) {\n\n        FileInputStream fileInputStream = null;\n        byte[] bytesArray = null;\n\n        try {\n            File file = new File(filePath);\n            bytesArray = new byte[(int) file.length()];\n            fileInputStream = new FileInputStream(file);\n            fileInputStream.read(bytesArray);\n\n        } catch (IOException e) {\n            e.printStackTrace();\n        } finally {\n            if (fileInputStream != null) {\n                try {\n                    fileInputStream.close();\n                } catch (IOException e) {\n                    e.printStackTrace();\n                }\n            }\n        }\n        return bytesArray;\n    }\n    // snippet-end:[s3.java2.s3_object_upload.main]\n} \n</code></pre>\n"}],"owner":{"account_id":9102896,"reputation":463,"user_id":6774444,"display_name":"Faiz Kidwai"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1698,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":72462955,"answer_count":1,"score":0,"last_activity_date":1654095292,"creation_date":1654088196,"question_id":72462318,"body_markdown":"I am using a Spring Boot app to expose an API tasked with uploading file to AWS S3.\r\nI am using a single instance of S3 client in the application:\r\n```java\r\n@Bean\r\npublic AmazonS3 s3Client() {\r\n\tBasicAWSCredentials credentials = new BasicAWSCredentials(awsAccessKey, awsSecretAccessKey);\r\n\tAmazonS3ClientBuilder amazonS3ClientBuilder = AmazonS3ClientBuilder\r\n\t\t\t.standard()\r\n\t\t\t.withCredentials(new AWSStaticCredentialsProvider(credentials))\r\n\t\t\t.withEndpointConfiguration(\r\n\t\t\t\t\tnew AwsClientBuilder.EndpointConfiguration(\r\n\t\t\t\t\t\t\tendpointUrl, Regions.EU_WEST_1.getName()));\r\n\treturn amazonS3ClientBuilder.build();\r\n}\r\n```\r\nCan I create a bean for `TransferManager` in a similar fashion and reuse the same instance across requests or do I need to create a fresh instance for every API call to upload a file?\r\nWhat is the recommended practice here? ","title":"Can we use the same instance of AWS S3 TransferManager or should we create a new instance for each file upload?","body":"<p>I am using a Spring Boot app to expose an API tasked with uploading file to AWS S3.\nI am using a single instance of S3 client in the application:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\npublic AmazonS3 s3Client() {\n    BasicAWSCredentials credentials = new BasicAWSCredentials(awsAccessKey, awsSecretAccessKey);\n    AmazonS3ClientBuilder amazonS3ClientBuilder = AmazonS3ClientBuilder\n            .standard()\n            .withCredentials(new AWSStaticCredentialsProvider(credentials))\n            .withEndpointConfiguration(\n                    new AwsClientBuilder.EndpointConfiguration(\n                            endpointUrl, Regions.EU_WEST_1.getName()));\n    return amazonS3ClientBuilder.build();\n}\n</code></pre>\n<p>Can I create a bean for <code>TransferManager</code> in a similar fashion and reuse the same instance across requests or do I need to create a fresh instance for every API call to upload a file?\nWhat is the recommended practice here?</p>\n"},{"tags":["java","hibernate","jpa","spring-data-jpa","uuid"],"answers":[{"tags":[],"owner":{"account_id":7178839,"reputation":166,"user_id":5483654,"display_name":"Ivan Costa"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1654035633,"creation_date":1654035633,"answer_id":72454650,"question_id":72451860,"body_markdown":"Do you need it persisted on database? If that is the case I guess it wouldn&#39;t be possible. But if you want to retrieve it without the dashes just do the getUUID method of your entity class return a string without the dashes.","title":"Modifying the generated ID, UUID, removing dashes","body":"<p>Do you need it persisted on database? If that is the case I guess it wouldn't be possible. But if you want to retrieve it without the dashes just do the getUUID method of your entity class return a string without the dashes.</p>\n"},{"tags":[],"owner":{"account_id":477214,"reputation":5260,"user_id":888580,"display_name":"lane.maxwell"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1654094544,"creation_date":1654036011,"answer_id":72454693,"question_id":72451860,"body_markdown":"You&#39;ll have to implement a custom ID generator and your entity will have an ID of String as it&#39;s no longer going to be a valid UUID.\r\n\r\nSomething like this will work\r\n\r\n    @Id\r\n    @GenericGenerator(name = &quot;mygen&quot;, strategy = &quot;com.abc.generator.IdGenerator&quot;)\r\n    @GeneratedValue(generator = &quot;mygen&quot;)\r\n    private String id;\r\n\r\nYour generator will look like this:\r\n\r\n    package com.abc.generator;\r\n\r\n    import java.io.Serializable;\r\n    import java.util.UUID;\r\n    import org.hibernate.HibernateException;\r\n    import org.hibernate.engine.spi.SharedSessionContractImplementor;\r\n    import org.hibernate.id.IdentifierGenerator;\r\n\r\n    public class IdGenerator implements IdentifierGenerator {\r\n\r\n       @Override\r\n       public Serializable generate(SharedSessionContractImplementor sharedSessionContractImplementor, Object o)\r\n        throws HibernateException {\r\n           return UUID.randomUUID().toString().replace(&quot;-&quot;, &quot;&quot;);\r\n       }\r\n    }","title":"Modifying the generated ID, UUID, removing dashes","body":"<p>You'll have to implement a custom ID generator and your entity will have an ID of String as it's no longer going to be a valid UUID.</p>\n<p>Something like this will work</p>\n<pre><code>@Id\n@GenericGenerator(name = &quot;mygen&quot;, strategy = &quot;com.abc.generator.IdGenerator&quot;)\n@GeneratedValue(generator = &quot;mygen&quot;)\nprivate String id;\n</code></pre>\n<p>Your generator will look like this:</p>\n<pre><code>package com.abc.generator;\n\nimport java.io.Serializable;\nimport java.util.UUID;\nimport org.hibernate.HibernateException;\nimport org.hibernate.engine.spi.SharedSessionContractImplementor;\nimport org.hibernate.id.IdentifierGenerator;\n\npublic class IdGenerator implements IdentifierGenerator {\n\n   @Override\n   public Serializable generate(SharedSessionContractImplementor sharedSessionContractImplementor, Object o)\n    throws HibernateException {\n       return UUID.randomUUID().toString().replace(&quot;-&quot;, &quot;&quot;);\n   }\n}\n</code></pre>\n"}],"owner":{"account_id":1467295,"reputation":736,"user_id":1379799,"accept_rate":84,"display_name":"Tamas"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1226,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":72454693,"answer_count":2,"score":0,"last_activity_date":1654094544,"creation_date":1654017516,"question_id":72451860,"body_markdown":"Due to compatibility reasons with existing systems, I have to store the UUID type as varchar without dashes. What would be the simplest solution to do this?\r\n\r\nI have created a sample class below to demonstrate the question. When the instance of the class is persisted, the UUID is in the DB fine, just with the dashes in the `tab1_id` column e.g. `583cfe1a-d671-47f9-9cd5-3f1e8f717856`. **What I would need is:** `583cfe1ad67147f99cd53f1e8f717856`. So the question is how I could change the generated id after its generation.\r\n\r\nI am using spring-boot and hibernate as JPA implementation. Any constructive response is appreciated. Thanks in advance.\r\n\r\n    @Entity\r\n    @Table(name = &quot;tab1&quot;)\r\n    @XmlRootElement\r\n    public class Tab1 implements Serializable {\r\n    private static final long serialVersionUID = 1L;\r\n    @Id\r\n    @GeneratedValue(generator = &quot;UUID&quot;)\r\n    @GenericGenerator(\r\n        name = &quot;UUID&quot;,\r\n        strategy = &quot;org.hibernate.id.UUIDGenerator&quot;\r\n    )\r\n    @Column(name = &quot;tab1_id&quot;, updatable = false, nullable = false, columnDefinition = &quot;uuid&quot;)\r\n    @Type(type = &quot;org.hibernate.type.UUIDCharType&quot;)\r\n\tprivate UUID tab1Id;\r\n    @Column(name = &quot;name&quot;)\r\n    private String name;\r\n    ....\r\n\r\n","title":"Modifying the generated ID, UUID, removing dashes","body":"<p>Due to compatibility reasons with existing systems, I have to store the UUID type as varchar without dashes. What would be the simplest solution to do this?</p>\n<p>I have created a sample class below to demonstrate the question. When the instance of the class is persisted, the UUID is in the DB fine, just with the dashes in the <code>tab1_id</code> column e.g. <code>583cfe1a-d671-47f9-9cd5-3f1e8f717856</code>. <strong>What I would need is:</strong> <code>583cfe1ad67147f99cd53f1e8f717856</code>. So the question is how I could change the generated id after its generation.</p>\n<p>I am using spring-boot and hibernate as JPA implementation. Any constructive response is appreciated. Thanks in advance.</p>\n<pre><code>@Entity\n@Table(name = &quot;tab1&quot;)\n@XmlRootElement\npublic class Tab1 implements Serializable {\nprivate static final long serialVersionUID = 1L;\n@Id\n@GeneratedValue(generator = &quot;UUID&quot;)\n@GenericGenerator(\n    name = &quot;UUID&quot;,\n    strategy = &quot;org.hibernate.id.UUIDGenerator&quot;\n)\n@Column(name = &quot;tab1_id&quot;, updatable = false, nullable = false, columnDefinition = &quot;uuid&quot;)\n@Type(type = &quot;org.hibernate.type.UUIDCharType&quot;)\nprivate UUID tab1Id;\n@Column(name = &quot;name&quot;)\nprivate String name;\n....\n</code></pre>\n"},{"tags":["java","android","firebase","android-studio","firebase-realtime-database"],"comments":[{"owner":{"account_id":72426,"reputation":573714,"user_id":209103,"accept_rate":73,"display_name":"Frank van Puffelen"},"score":0,"creation_date":1650898618,"post_id":71996862,"comment_id":127226213,"body_markdown":"Please don&#39;t post screenshots of your code, or other textual content. Instead post the actual text, and use the formatting tools of Stack Overflow to mark it up. Also see: [Why not upload images of code/errors when asking a question?](https://meta.stackoverflow.com/questions/285551/why-not-upload-images-of-code-errors-when-asking-a-question)","body":"Please don&#39;t post screenshots of your code, or other textual content. Instead post the actual text, and use the formatting tools of Stack Overflow to mark it up. Also see: <a href=\"https://meta.stackoverflow.com/questions/285551/why-not-upload-images-of-code-errors-when-asking-a-question\">Why not upload images of code/errors when asking a question?</a>"}],"answers":[{"tags":[],"owner":{"account_id":20236690,"reputation":1,"user_id":14841644,"display_name":"Abhi Patel"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1650882935,"creation_date":1650882935,"answer_id":71998182,"question_id":71996862,"body_markdown":"you can try clean Project (Build-&gt; Clean Project) or Invalidate Caches(File-&gt;Invalidate Caches -&gt; Invalidate and Restart)","title":"why i am not able to use FirebaseDatabase in android studio","body":"<p>you can try clean Project (Build-&gt; Clean Project) or Invalidate Caches(File-&gt;Invalidate Caches -&gt; Invalidate and Restart)</p>\n"},{"tags":[],"owner":{"account_id":18812812,"reputation":92,"user_id":13720647,"display_name":"Zobaer Hossain"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1654094167,"creation_date":1654094167,"answer_id":72463686,"question_id":71996862,"body_markdown":"\r\n\r\n Please  check if you have these dependencies in your `build.gradle` (Module:app) file.\r\n\r\n     implementation &#39;com.google.firebase:firebase-database:20.0.5&#39;\r\n     implementation platform(&#39;com.google.firebase:firebase-bom:29.2.1&#39;)\r\nFor further guide on how to setup firebase properly please visit [this.][1]\r\n\r\n\r\n  [1]: https://firebase.google.com/docs/android/setup","title":"why i am not able to use FirebaseDatabase in android studio","body":"<p>Please  check if you have these dependencies in your <code>build.gradle</code> (Module:app) file.</p>\n<pre><code> implementation 'com.google.firebase:firebase-database:20.0.5'\n implementation platform('com.google.firebase:firebase-bom:29.2.1')\n</code></pre>\n<p>For further guide on how to setup firebase properly please visit <a href=\"https://firebase.google.com/docs/android/setup\" rel=\"nofollow noreferrer\">this.</a></p>\n"}],"owner":{"account_id":22867236,"reputation":11,"user_id":17010861,"display_name":"omar jlassi"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1654094167,"creation_date":1650877022,"question_id":71996862,"body_markdown":"[enter image description here][1]\r\n\r\n[enter image description here][2]\r\n \r\n\r\n  [1]: https://i.stack.imgur.com/HTBmD.png\r\n  [2]: https://i.stack.imgur.com/EnYeS.png\r\n\r\n\r\nmy problem is when i want to use FirebaseDatabase ; android studio Cannot resolve symbol &#39;DatabaseReference&#39;","title":"why i am not able to use FirebaseDatabase in android studio","body":"<p><a href=\"https://i.stack.imgur.com/HTBmD.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p><a href=\"https://i.stack.imgur.com/EnYeS.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>my problem is when i want to use FirebaseDatabase ; android studio Cannot resolve symbol 'DatabaseReference'</p>\n"},{"tags":["java","xml","jackson-dataformat-xml"],"answers":[{"tags":[],"owner":{"account_id":17679970,"reputation":51,"user_id":12834172,"display_name":"David"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1654093660,"creation_date":1654093660,"answer_id":72463539,"question_id":71557824,"body_markdown":"i was not able to tell XmlMapper to keep the attributes of xml tags from the loaded xml file. But i have found another way by parsing xml test data with xPath expressions.\r\n\r\nA simple String.equals(...) proofed to be unreliable if expected and actual xml contain different whitespaces or xml tag order. Luckily there is a library for comparing xml. XmlUnit!\r\n\r\nAdditional dependency (seems to be present as transitive dependency as of Spring Boot 2.6.x):\r\n```\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.xmlunit&lt;/groupId&gt;\r\n    &lt;artifactId&gt;xmlunit-core&lt;/artifactId&gt;\r\n    &lt;!-- version transitive in spring-boot-starter-parent 2.6.7 --&gt;\r\n    &lt;version&gt;2.8.4&lt;/version&gt;\r\n    &lt;scope&gt;test&lt;/test&gt;\r\n&lt;/dependency&gt;\r\n```\r\n \r\n\r\nResourceUtil.java:\r\n```\r\nimport org.apache.commons.lang3.StringUtils;\r\nimport org.w3c.dom.Document;\r\nimport org.w3c.dom.Node;\r\nimport org.w3c.dom.NodeList;\r\nimport org.xml.sax.SAXException;\r\n\r\nimport javax.xml.parsers.DocumentBuilder;\r\nimport javax.xml.parsers.DocumentBuilderFactory;\r\nimport javax.xml.parsers.ParserConfigurationException;\r\nimport javax.xml.transform.*;\r\nimport javax.xml.transform.dom.DOMSource;\r\nimport javax.xml.transform.stream.StreamResult;\r\nimport javax.xml.transform.stream.StreamSource;\r\nimport javax.xml.xpath.XPath;\r\nimport javax.xml.xpath.XPathConstants;\r\nimport javax.xml.xpath.XPathExpressionException;\r\nimport javax.xml.xpath.XPathFactory;\r\nimport java.io.IOException;\r\nimport java.io.InputStream;\r\nimport java.io.StringWriter;\r\nimport java.net.URL;\r\n\r\npublic class ResourceUtil {\r\n    private static final DocumentBuilderFactory XML_DOCUMENT_BUILDER_FACTORY = DocumentBuilderFactory.newInstance();\r\n    private static final XPathFactory X_PATH_FACTORY = XPathFactory.newInstance();\r\n\r\n    private ResourceUtil() {}\r\n\r\n    /** Reads an xml file named after the testcase class (e.g. MyTestcase.class\r\n      * -&gt; MyTestcase.xml) and parses the data at the supplied xPath expression. */\r\n    public static String xmlData(Class&lt;?&gt; testClass, String xPathExpression) {\r\n        return getXmlDocumentAsString(testClass, testClass.getSimpleName() + &quot;.xml&quot;, xPathExpression);\r\n    }\r\n\r\n    /** Reads the specified xml file and parses the data at the supplied xPath\r\n      * expression. The xml file is expected in the same package/directory as\r\n      * the testcase class. */\r\n    private static String getXmlDocumentAsString(Class&lt;?&gt; ctxtClass, String fileName, String xPathExpression) {\r\n        Document xmlDocument = getXmlDocument(ctxtClass, fileName);\r\n        XPath xPath = X_PATH_FACTORY.newXPath();\r\n\r\n        try {\r\n            Node subNode = (Node)xPath.compile(xPathExpression).evaluate(xmlDocument, XPathConstants.NODE);\r\n            return nodeToString(subNode.getChildNodes());\r\n        } catch (TransformerException | XPathExpressionException var6) {\r\n            throw new IllegalArgumentException(&quot;Unable to read value of &#39;&quot; + xPathExpression + &quot;&#39; from file &quot; + fileName, var6);\r\n        }\r\n    }\r\n\r\n    /** Reads the specified xml file and returns a Document instance of the\r\n      * xml data. The xml file is expected in the same package/directory as\r\n      * the testcase class. */\r\n    private static Document getXmlDocument(Class&lt;?&gt; ctxtClass, String xmlFileName) {\r\n        InputStream inputStream = getResourceFile(ctxtClass, xmlFileName);\r\n\r\n        try {\r\n            DocumentBuilder builder = XML_DOCUMENT_BUILDER_FACTORY.newDocumentBuilder();\r\n            return builder.parse(inputStream);\r\n        } catch (SAXException | IOException | ParserConfigurationException var4) {\r\n            throw new IllegalStateException(&quot;Unable to read xml content from file &#39;&quot; + xmlFileName + &quot;&#39;.&quot;, var4);\r\n        }\r\n    }\r\n\r\n    /** Returns an InputStream of the specified xml file. The xml file is\r\n      * expected in the same package/directory as the testcase class. */\r\n    private static InputStream getResourceFile(Class&lt;?&gt; ctxtClass, String fileName) {\r\n      String pkgPath = StringUtils.replaceChars(ctxtClass.getPackage().getName(), &quot;.&quot;, &quot;/&quot;);\r\n      String filePath = &quot;/&quot; + pkgPath + &quot;/&quot; + fileName;\r\n      URL url = ctxtClass.getResource(filePath);\r\n      if (url == null) {\r\n          throw new IllegalArgumentException(&quot;Resource file not found: &quot; + filePath);\r\n      }\r\n      return ResourceTestUtil.class.getResourceAsStream(filePath);\r\n    }\r\n\r\n    /** Deserializes a NodeList to a String with (formatted) xml. */\r\n    private static String nodeToString(NodeList nodeList) throws TransformerException {\r\n        StringWriter buf = new StringWriter();\r\n        Transformer xform = TransformerFactory.newInstance().newTransformer(getXsltAsResource());\r\n        xform.setOutputProperty(&quot;omit-xml-declaration&quot;, &quot;yes&quot;);\r\n        xform.setOutputProperty(&quot;indent&quot;, &quot;no&quot;);\r\n\r\n        for(int i = 0; i &lt; nodeList.getLength(); ++i) {\r\n            xform.transform(new DOMSource(nodeList.item(i)), new StreamResult(buf));\r\n        }\r\n\r\n        return buf.toString().trim();\r\n    }\r\n\r\n    /** Returns a Source of an XSLT file for formatting xml data */\r\n    private static Source getXsltAsResource() {\r\n        return new StreamSource(ResourceTestUtil.class.getResourceAsStream(&quot;xmlstylesheet.xslt&quot;));\r\n    }\r\n\r\n```\r\n\r\nxmlstylesheet.xslt (works for me, you may alter to your preferences):\r\n```\r\n&lt;xsl:stylesheet version=&quot;1.0&quot; xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot;&gt;\r\n    &lt;xsl:strip-space elements=&quot;*&quot;/&gt;\r\n    &lt;xsl:output method=&quot;xml&quot; encoding=&quot;UTF-8&quot;/&gt;\r\n\r\n    &lt;xsl:template match=&quot;@*|node()&quot;&gt;\r\n        &lt;xsl:copy&gt;\r\n            &lt;xsl:apply-templates select=&quot;@*|node()&quot;/&gt;\r\n        &lt;/xsl:copy&gt;\r\n    &lt;/xsl:template&gt;\r\n\r\n&lt;/xsl:stylesheet&gt;\r\n```\r\n\r\nMyTestcase.java:\r\n```\r\nimport org.xmlunit.builder.DiffBuilder;\r\nimport org.xmlunit.diff.DefaultNodeMatcher;\r\nimport org.xmlunit.diff.Diff;\r\nimport org.xmlunit.diff.ElementSelectors;\r\n\r\nimport static ResourceUtil.xmldata;\r\n\r\npublic class MyTestcase {\r\n    @Test\r\n    void testcase1() {\r\n        // Execute logic to generate xml\r\n        String xml = ...\r\n       \r\n        assertXmlEquals(xmlData(getClass(), &quot;/test/testcase1/result&quot;), xml);\r\n    }\r\n\r\n    /** Compare xml using XmlUnit assertion. Expected and actual xml need\r\n      * to be equal in content (ignoring whitespace and xml tag order) */\r\n    void assertXmlEquals(String expectedXml, String testXml) {\r\n        Diff diff = DiffBuilder.compare(expectedXml)\r\n                .withTest(testXml)\r\n                .ignoreWhitespace()\r\n                .checkForSimilar()\r\n                .withNodeMatcher(new DefaultNodeMatcher(ElementSelectors.byNameAndText, ElementSelectors.byName))\r\n                .build();\r\n        assertFalse(diff.fullDescription(), diff.hasDifferences());\r\n    }\r\n\r\n}\r\n```\r\n\r\nMyTestcase.xml:\r\n```\r\n&lt;test&gt;\r\n    &lt;testcase1&gt;\r\n        &lt;result&gt;\r\n            &lt;myData&gt;\r\n                ...\r\n            &lt;/myData&gt;\r\n        &lt;/result&gt;\r\n    &lt;/testcase1&gt;\r\n&lt;/test&gt;\r\n```\r\n\r\nBest regards,\r\nDavid\r\n","title":"How to keep xml attribute in fasterXml Jackson XmlMapper?","body":"<p>i was not able to tell XmlMapper to keep the attributes of xml tags from the loaded xml file. But i have found another way by parsing xml test data with xPath expressions.</p>\n<p>A simple String.equals(...) proofed to be unreliable if expected and actual xml contain different whitespaces or xml tag order. Luckily there is a library for comparing xml. XmlUnit!</p>\n<p>Additional dependency (seems to be present as transitive dependency as of Spring Boot 2.6.x):</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.xmlunit&lt;/groupId&gt;\n    &lt;artifactId&gt;xmlunit-core&lt;/artifactId&gt;\n    &lt;!-- version transitive in spring-boot-starter-parent 2.6.7 --&gt;\n    &lt;version&gt;2.8.4&lt;/version&gt;\n    &lt;scope&gt;test&lt;/test&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>ResourceUtil.java:</p>\n<pre><code>import org.apache.commons.lang3.StringUtils;\nimport org.w3c.dom.Document;\nimport org.w3c.dom.Node;\nimport org.w3c.dom.NodeList;\nimport org.xml.sax.SAXException;\n\nimport javax.xml.parsers.DocumentBuilder;\nimport javax.xml.parsers.DocumentBuilderFactory;\nimport javax.xml.parsers.ParserConfigurationException;\nimport javax.xml.transform.*;\nimport javax.xml.transform.dom.DOMSource;\nimport javax.xml.transform.stream.StreamResult;\nimport javax.xml.transform.stream.StreamSource;\nimport javax.xml.xpath.XPath;\nimport javax.xml.xpath.XPathConstants;\nimport javax.xml.xpath.XPathExpressionException;\nimport javax.xml.xpath.XPathFactory;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.io.StringWriter;\nimport java.net.URL;\n\npublic class ResourceUtil {\n    private static final DocumentBuilderFactory XML_DOCUMENT_BUILDER_FACTORY = DocumentBuilderFactory.newInstance();\n    private static final XPathFactory X_PATH_FACTORY = XPathFactory.newInstance();\n\n    private ResourceUtil() {}\n\n    /** Reads an xml file named after the testcase class (e.g. MyTestcase.class\n      * -&gt; MyTestcase.xml) and parses the data at the supplied xPath expression. */\n    public static String xmlData(Class&lt;?&gt; testClass, String xPathExpression) {\n        return getXmlDocumentAsString(testClass, testClass.getSimpleName() + &quot;.xml&quot;, xPathExpression);\n    }\n\n    /** Reads the specified xml file and parses the data at the supplied xPath\n      * expression. The xml file is expected in the same package/directory as\n      * the testcase class. */\n    private static String getXmlDocumentAsString(Class&lt;?&gt; ctxtClass, String fileName, String xPathExpression) {\n        Document xmlDocument = getXmlDocument(ctxtClass, fileName);\n        XPath xPath = X_PATH_FACTORY.newXPath();\n\n        try {\n            Node subNode = (Node)xPath.compile(xPathExpression).evaluate(xmlDocument, XPathConstants.NODE);\n            return nodeToString(subNode.getChildNodes());\n        } catch (TransformerException | XPathExpressionException var6) {\n            throw new IllegalArgumentException(&quot;Unable to read value of '&quot; + xPathExpression + &quot;' from file &quot; + fileName, var6);\n        }\n    }\n\n    /** Reads the specified xml file and returns a Document instance of the\n      * xml data. The xml file is expected in the same package/directory as\n      * the testcase class. */\n    private static Document getXmlDocument(Class&lt;?&gt; ctxtClass, String xmlFileName) {\n        InputStream inputStream = getResourceFile(ctxtClass, xmlFileName);\n\n        try {\n            DocumentBuilder builder = XML_DOCUMENT_BUILDER_FACTORY.newDocumentBuilder();\n            return builder.parse(inputStream);\n        } catch (SAXException | IOException | ParserConfigurationException var4) {\n            throw new IllegalStateException(&quot;Unable to read xml content from file '&quot; + xmlFileName + &quot;'.&quot;, var4);\n        }\n    }\n\n    /** Returns an InputStream of the specified xml file. The xml file is\n      * expected in the same package/directory as the testcase class. */\n    private static InputStream getResourceFile(Class&lt;?&gt; ctxtClass, String fileName) {\n      String pkgPath = StringUtils.replaceChars(ctxtClass.getPackage().getName(), &quot;.&quot;, &quot;/&quot;);\n      String filePath = &quot;/&quot; + pkgPath + &quot;/&quot; + fileName;\n      URL url = ctxtClass.getResource(filePath);\n      if (url == null) {\n          throw new IllegalArgumentException(&quot;Resource file not found: &quot; + filePath);\n      }\n      return ResourceTestUtil.class.getResourceAsStream(filePath);\n    }\n\n    /** Deserializes a NodeList to a String with (formatted) xml. */\n    private static String nodeToString(NodeList nodeList) throws TransformerException {\n        StringWriter buf = new StringWriter();\n        Transformer xform = TransformerFactory.newInstance().newTransformer(getXsltAsResource());\n        xform.setOutputProperty(&quot;omit-xml-declaration&quot;, &quot;yes&quot;);\n        xform.setOutputProperty(&quot;indent&quot;, &quot;no&quot;);\n\n        for(int i = 0; i &lt; nodeList.getLength(); ++i) {\n            xform.transform(new DOMSource(nodeList.item(i)), new StreamResult(buf));\n        }\n\n        return buf.toString().trim();\n    }\n\n    /** Returns a Source of an XSLT file for formatting xml data */\n    private static Source getXsltAsResource() {\n        return new StreamSource(ResourceTestUtil.class.getResourceAsStream(&quot;xmlstylesheet.xslt&quot;));\n    }\n\n</code></pre>\n<p>xmlstylesheet.xslt (works for me, you may alter to your preferences):</p>\n<pre><code>&lt;xsl:stylesheet version=&quot;1.0&quot; xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot;&gt;\n    &lt;xsl:strip-space elements=&quot;*&quot;/&gt;\n    &lt;xsl:output method=&quot;xml&quot; encoding=&quot;UTF-8&quot;/&gt;\n\n    &lt;xsl:template match=&quot;@*|node()&quot;&gt;\n        &lt;xsl:copy&gt;\n            &lt;xsl:apply-templates select=&quot;@*|node()&quot;/&gt;\n        &lt;/xsl:copy&gt;\n    &lt;/xsl:template&gt;\n\n&lt;/xsl:stylesheet&gt;\n</code></pre>\n<p>MyTestcase.java:</p>\n<pre><code>import org.xmlunit.builder.DiffBuilder;\nimport org.xmlunit.diff.DefaultNodeMatcher;\nimport org.xmlunit.diff.Diff;\nimport org.xmlunit.diff.ElementSelectors;\n\nimport static ResourceUtil.xmldata;\n\npublic class MyTestcase {\n    @Test\n    void testcase1() {\n        // Execute logic to generate xml\n        String xml = ...\n       \n        assertXmlEquals(xmlData(getClass(), &quot;/test/testcase1/result&quot;), xml);\n    }\n\n    /** Compare xml using XmlUnit assertion. Expected and actual xml need\n      * to be equal in content (ignoring whitespace and xml tag order) */\n    void assertXmlEquals(String expectedXml, String testXml) {\n        Diff diff = DiffBuilder.compare(expectedXml)\n                .withTest(testXml)\n                .ignoreWhitespace()\n                .checkForSimilar()\n                .withNodeMatcher(new DefaultNodeMatcher(ElementSelectors.byNameAndText, ElementSelectors.byName))\n                .build();\n        assertFalse(diff.fullDescription(), diff.hasDifferences());\n    }\n\n}\n</code></pre>\n<p>MyTestcase.xml:</p>\n<pre><code>&lt;test&gt;\n    &lt;testcase1&gt;\n        &lt;result&gt;\n            &lt;myData&gt;\n                ...\n            &lt;/myData&gt;\n        &lt;/result&gt;\n    &lt;/testcase1&gt;\n&lt;/test&gt;\n</code></pre>\n<p>Best regards,\nDavid</p>\n"}],"owner":{"account_id":17679970,"reputation":51,"user_id":12834172,"display_name":"David"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1229,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":72463539,"answer_count":1,"score":0,"last_activity_date":1654093660,"creation_date":1647866616,"question_id":71557824,"body_markdown":"I am writing test cases which test generated xml structures. I am supplying the xml structures via an xml file. I am using currently FasterXMLs Jackson XmlMapper for reading and testing for expected xml.\r\n\r\n```\r\nJava:            adoptopenjdk 11\r\nMaven:           3.6.3\r\nJUnit (Jupiter): 5.7.1 (JUnit Jupiter)\r\nMapper:          com.fasterxml.jackson.dataformat.xml.XmlMapper\r\nDependency:      &lt;dependency&gt;\r\n                     &lt;groupId&gt;com.fasterxml.jackson.dataformat&lt;/groupId&gt;\r\n                     &lt;artifactId&gt;jackson-dataformat-xml&lt;/artifactId&gt;\r\n                     &lt;version&gt;2.11.4&lt;/version&gt;\r\n                 &lt;/dependency&gt;\r\n```\r\n\r\nI have an xml file which contains expected xml (e.g.: /test/testcases.xml:\r\n```\r\n&lt;testcases&gt;\r\n    &lt;testcase1&gt;\r\n        &lt;response&gt;\r\n            &lt;sizegroup-list&gt;\r\n                &lt;sizeGroup id=&quot;1&quot;&gt;\r\n                &lt;sizes&gt;\r\n                    &lt;size&gt;\r\n                        &lt;technicalSize&gt;38&lt;/technicalSize&gt;\r\n                        &lt;textSize&gt;38&lt;/textSize&gt;\r\n                    &lt;size&gt;\r\n                    &lt;size&gt;\r\n                        &lt;technicalSize&gt;705&lt;/technicalSize&gt;\r\n                        &lt;textSize&gt;110cm&lt;/textSize&gt;\r\n                    &lt;size&gt;\r\n                &lt;/sizes&gt;\r\n            &lt;/sizeGroup-list&gt;\r\n        &lt;/response&gt;\r\n    &lt;/testcase1&gt;\r\n&lt;/testcases&gt;\r\n```\r\n\r\nMy code looks like this (simplified):\r\n```\r\nimport com.fasterxml.jackson.databind.JsonNode;\r\nimport com.fasterxml.jackson.dataformat.xml.XmlMapper;\r\nimport org.apache.commons.lang3.StringUtils;\r\nimport org.junit.jupiter.api.Test;\r\n\r\nimport java.io.FileInputStream;\r\nimport java.io.InputStream;\r\n\r\nimport static org.junit.jupiter.api.Assertions.assertEquals;\r\n\r\nclass Testcases {\r\n    private static final String OBJECT_NODE_START_TAG = &quot;&lt;ObjectNode&gt;&quot;;\r\n    private static final String OBJECT_NODE_CLOSE_TAG = &quot;&lt;/ObjectNode&gt;&quot;;\r\n    private static final String TESTCASES_XML = &quot;/test/testcases.xml&quot;;\r\n    private static final XmlMapper XML_MAPPER = new XmlMapper();\r\n\r\n    @Test\r\n    void testcase1() throws Exception {\r\n        final String nodePtr = &quot;/testcase1/response&quot;;\r\n        try (InputStream inputStream = new FileInputStream(TESTCASES_XML)) {\r\n            JsonNode rootNode = XML_MAPPER.readTree(inputStream);\r\n            JsonNode subNode = rootNode.at(nodePtr);\r\n\r\n            if (subNode.isMissingNode()) {\r\n                throw new IllegalArgumentException(\r\n                        &quot;Node &#39;&quot; + nodePtr + &quot;&#39; not found in file &quot; + TESTCASES_XML);\r\n            }\r\n\r\n            String expectedXml = XML_MAPPER.writeValueAsString(subNode);\r\n            expectedXml = unwrapObjectNode(expectedXml);\r\n\r\n            // Testcalls, e.g. someService.generateXmlData()\r\n            String generatedXml = &quot;...&quot;;\r\n\r\n            assertEquals(expectedXml, generatedXml);\r\n        };\r\n    }\r\n\r\n    // FIXME: Ugly: Tell XmlMapper to unwrap ObjectNode automatically\r\n    private String unwrapObjectNode(String xmlString) {\r\n        if(StringUtils.isBlank(xmlString)) {\r\n            return xmlString;\r\n        }\r\n\r\n        if(xmlString.startsWith(OBJECT_NODE_START_TAG)) {\r\n            xmlString = xmlString.substring(OBJECT_NODE_START_TAG.length());\r\n            if(xmlString.endsWith(OBJECT_NODE_CLOSE_TAG)) {\r\n                xmlString = xmlString.substring(0, xmlString.length() - OBJECT_NODE_CLOSE_TAG.length());\r\n            }\r\n        }\r\n\r\n        return xmlString;\r\n    }\r\n\r\n}\r\n```\r\n\r\nBut the returned expected xml looks like this:\r\n```\r\n            &lt;sizegroup-list&gt;\r\n                &lt;sizeGroup&gt;\r\n                &lt;id&gt;1&lt;/id&gt;\r\n                &lt;sizes&gt;\r\n                    &lt;size&gt;\r\n                        &lt;technicalSize&gt;38&lt;/technicalSize&gt;\r\n                        &lt;textSize&gt;38&lt;/textSize&gt;\r\n                    &lt;size&gt;\r\n                    &lt;size&gt;\r\n                        &lt;technicalSize&gt;705&lt;/technicalSize&gt;\r\n                        &lt;textSize&gt;110cm&lt;/textSize&gt;\r\n                    &lt;size&gt;\r\n                &lt;/sizes&gt;\r\n            &lt;/sizeGroup-list&gt;\r\n```\r\n\r\nThe former attribute id of the element sizeGroup gets mapped as a sub element and fails my test. How can I tell XmlMapper to keep the attributes of xml elements?\r\n\r\nBest regards,\r\nDavid","title":"How to keep xml attribute in fasterXml Jackson XmlMapper?","body":"<p>I am writing test cases which test generated xml structures. I am supplying the xml structures via an xml file. I am using currently FasterXMLs Jackson XmlMapper for reading and testing for expected xml.</p>\n<pre><code>Java:            adoptopenjdk 11\nMaven:           3.6.3\nJUnit (Jupiter): 5.7.1 (JUnit Jupiter)\nMapper:          com.fasterxml.jackson.dataformat.xml.XmlMapper\nDependency:      &lt;dependency&gt;\n                     &lt;groupId&gt;com.fasterxml.jackson.dataformat&lt;/groupId&gt;\n                     &lt;artifactId&gt;jackson-dataformat-xml&lt;/artifactId&gt;\n                     &lt;version&gt;2.11.4&lt;/version&gt;\n                 &lt;/dependency&gt;\n</code></pre>\n<p>I have an xml file which contains expected xml (e.g.: /test/testcases.xml:</p>\n<pre><code>&lt;testcases&gt;\n    &lt;testcase1&gt;\n        &lt;response&gt;\n            &lt;sizegroup-list&gt;\n                &lt;sizeGroup id=&quot;1&quot;&gt;\n                &lt;sizes&gt;\n                    &lt;size&gt;\n                        &lt;technicalSize&gt;38&lt;/technicalSize&gt;\n                        &lt;textSize&gt;38&lt;/textSize&gt;\n                    &lt;size&gt;\n                    &lt;size&gt;\n                        &lt;technicalSize&gt;705&lt;/technicalSize&gt;\n                        &lt;textSize&gt;110cm&lt;/textSize&gt;\n                    &lt;size&gt;\n                &lt;/sizes&gt;\n            &lt;/sizeGroup-list&gt;\n        &lt;/response&gt;\n    &lt;/testcase1&gt;\n&lt;/testcases&gt;\n</code></pre>\n<p>My code looks like this (simplified):</p>\n<pre><code>import com.fasterxml.jackson.databind.JsonNode;\nimport com.fasterxml.jackson.dataformat.xml.XmlMapper;\nimport org.apache.commons.lang3.StringUtils;\nimport org.junit.jupiter.api.Test;\n\nimport java.io.FileInputStream;\nimport java.io.InputStream;\n\nimport static org.junit.jupiter.api.Assertions.assertEquals;\n\nclass Testcases {\n    private static final String OBJECT_NODE_START_TAG = &quot;&lt;ObjectNode&gt;&quot;;\n    private static final String OBJECT_NODE_CLOSE_TAG = &quot;&lt;/ObjectNode&gt;&quot;;\n    private static final String TESTCASES_XML = &quot;/test/testcases.xml&quot;;\n    private static final XmlMapper XML_MAPPER = new XmlMapper();\n\n    @Test\n    void testcase1() throws Exception {\n        final String nodePtr = &quot;/testcase1/response&quot;;\n        try (InputStream inputStream = new FileInputStream(TESTCASES_XML)) {\n            JsonNode rootNode = XML_MAPPER.readTree(inputStream);\n            JsonNode subNode = rootNode.at(nodePtr);\n\n            if (subNode.isMissingNode()) {\n                throw new IllegalArgumentException(\n                        &quot;Node '&quot; + nodePtr + &quot;' not found in file &quot; + TESTCASES_XML);\n            }\n\n            String expectedXml = XML_MAPPER.writeValueAsString(subNode);\n            expectedXml = unwrapObjectNode(expectedXml);\n\n            // Testcalls, e.g. someService.generateXmlData()\n            String generatedXml = &quot;...&quot;;\n\n            assertEquals(expectedXml, generatedXml);\n        };\n    }\n\n    // FIXME: Ugly: Tell XmlMapper to unwrap ObjectNode automatically\n    private String unwrapObjectNode(String xmlString) {\n        if(StringUtils.isBlank(xmlString)) {\n            return xmlString;\n        }\n\n        if(xmlString.startsWith(OBJECT_NODE_START_TAG)) {\n            xmlString = xmlString.substring(OBJECT_NODE_START_TAG.length());\n            if(xmlString.endsWith(OBJECT_NODE_CLOSE_TAG)) {\n                xmlString = xmlString.substring(0, xmlString.length() - OBJECT_NODE_CLOSE_TAG.length());\n            }\n        }\n\n        return xmlString;\n    }\n\n}\n</code></pre>\n<p>But the returned expected xml looks like this:</p>\n<pre><code>            &lt;sizegroup-list&gt;\n                &lt;sizeGroup&gt;\n                &lt;id&gt;1&lt;/id&gt;\n                &lt;sizes&gt;\n                    &lt;size&gt;\n                        &lt;technicalSize&gt;38&lt;/technicalSize&gt;\n                        &lt;textSize&gt;38&lt;/textSize&gt;\n                    &lt;size&gt;\n                    &lt;size&gt;\n                        &lt;technicalSize&gt;705&lt;/technicalSize&gt;\n                        &lt;textSize&gt;110cm&lt;/textSize&gt;\n                    &lt;size&gt;\n                &lt;/sizes&gt;\n            &lt;/sizeGroup-list&gt;\n</code></pre>\n<p>The former attribute id of the element sizeGroup gets mapped as a sub element and fails my test. How can I tell XmlMapper to keep the attributes of xml elements?</p>\n<p>Best regards,\nDavid</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":410133,"reputation":55768,"user_id":781792,"display_name":"Tim S."},"score":4,"creation_date":1383943865,"post_id":19868181,"comment_id":29552885,"body_markdown":"Floating point numbers are not exact. Do you want to round first?","body":"Floating point numbers are not exact. Do you want to round first?"},{"owner":{"account_id":443193,"reputation":15959,"user_id":834261,"display_name":"hatchet - done with SOverflow"},"score":1,"creation_date":1383943917,"post_id":19868181,"comment_id":29552897,"body_markdown":"Be aware that what you think is the Double value 114 may actually be 113.99999999... internally, and your code ends up just truncating the decimal portion. As Tim S suggested, you need to incorporate rounding.","body":"Be aware that what you think is the Double value 114 may actually be 113.99999999... internally, and your code ends up just truncating the decimal portion. As Tim S suggested, you need to incorporate rounding."},{"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"score":4,"creation_date":1383943919,"post_id":19868181,"comment_id":29552899,"body_markdown":"If you want to prevent your code from loosing precision you probably should use `BigDecimal`.","body":"If you want to prevent your code from loosing precision you probably should use <code>BigDecimal</code>."},{"owner":{"account_id":967624,"reputation":10828,"user_id":990750,"accept_rate":50,"display_name":"Tarik"},"score":1,"creation_date":1383944153,"post_id":19868181,"comment_id":29553013,"body_markdown":"Duplicate: http://stackoverflow.com/questions/321549/double-to-long-conversion","body":"Duplicate: <a href=\"http://stackoverflow.com/questions/321549/double-to-long-conversion\" title=\"double to long conversion\">stackoverflow.com/questions/321549/double-to-long-conversion</a>"},{"owner":{"account_id":1924489,"reputation":5462,"user_id":1735262,"display_name":"Reinstate Monica -- notmaynard"},"score":0,"creation_date":1383944165,"post_id":19868181,"comment_id":29553017,"body_markdown":"Agreed with @Pshemo -- unless there&#39;s some good compelling reason to use `Double`, you&#39;d be much better off with `BigDecimal`.","body":"Agreed with @Pshemo -- unless there&#39;s some good compelling reason to use <code>Double</code>, you&#39;d be much better off with <code>BigDecimal</code>."}],"answers":[{"tags":[],"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1383943939,"creation_date":1383943939,"answer_id":19868285,"question_id":19868181,"body_markdown":"Firstly, a `double` is *not* exact. Next, when *casting* a `double`/`float` to a `long`/`int`, the decimal part is dropped (not rounded).\r\n\r\nTo get the *nearest* value, you&#39;ll need to *round* it:\r\n\r\n    System.out.println(Math.round(d));","title":"Convert a Double to long without losing the exact value","body":"<p>Firstly, a <code>double</code> is <em>not</em> exact. Next, when <em>casting</em> a <code>double</code>/<code>float</code> to a <code>long</code>/<code>int</code>, the decimal part is dropped (not rounded).</p>\n\n<p>To get the <em>nearest</em> value, you'll need to <em>round</em> it:</p>\n\n<pre><code>System.out.println(Math.round(d));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3426245,"reputation":41,"user_id":2871923,"display_name":"user2871923"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1383944442,"creation_date":1383944061,"answer_id":19868323,"question_id":19868181,"body_markdown":"If you are looking for an integer / long value representation with the value you are expecting, you can use this:\r\n\r\n    Math.round(1.14 * 100)","title":"Convert a Double to long without losing the exact value","body":"<p>If you are looking for an integer / long value representation with the value you are expecting, you can use this:</p>\n\n<pre><code>Math.round(1.14 * 100)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1384064,"reputation":11115,"user_id":1316462,"display_name":"Jans"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1383944085,"creation_date":1383944085,"answer_id":19868330,"question_id":19868181,"body_markdown":"Try this  \r\n\r\n    Long.parseLong( String.format( &quot;%.0f&quot;,doublevalue ) ) ;\r\n    ","title":"Convert a Double to long without losing the exact value","body":"<p>Try this  </p>\n\n<pre><code>Long.parseLong( String.format( \"%.0f\",doublevalue ) ) ;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3466910,"reputation":2437,"user_id":2902209,"accept_rate":82,"display_name":"Donvino"},"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1384018254,"creation_date":1383944138,"answer_id":19868349,"question_id":19868181,"body_markdown":"If you need the exact 114 value you ned to use `Math.round`:&lt;br&gt;\r\n\r\n    double d = 1.14*100;\r\n    System.out.println(Math.round(d));","title":"Convert a Double to long without losing the exact value","body":"<p>If you need the exact 114 value you ned to use <code>Math.round</code>:<br></p>\n\n<pre><code>double d = 1.14*100;\nSystem.out.println(Math.round(d));\n</code></pre>\n"}],"owner":{"account_id":1633322,"reputation":468,"user_id":1507448,"accept_rate":27,"display_name":"Abs"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":34176,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"accepted_answer_id":19868349,"answer_count":4,"score":8,"last_activity_date":1654093585,"creation_date":1383943448,"question_id":19868181,"body_markdown":"I have a `Double` object which loses the exact value when being converted to a `long` value.\r\n\r\n    Double d = 1.14*100\r\n        \r\n    System.out.println(d.longValue());\r\n\r\nThe above statement would print: `113`. \r\n\r\nI want `114` to be printed.","title":"Convert a Double to long without losing the exact value","body":"<p>I have a <code>Double</code> object which loses the exact value when being converted to a <code>long</code> value.</p>\n<pre><code>Double d = 1.14*100\n    \nSystem.out.println(d.longValue());\n</code></pre>\n<p>The above statement would print: <code>113</code>.</p>\n<p>I want <code>114</code> to be printed.</p>\n"},{"tags":["java","swing","invokelater","inputverifier"],"comments":[{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":1,"creation_date":1653852754,"post_id":72426364,"comment_id":127947029,"body_markdown":"Maybe you can use the approach found here: https://stackoverflow.com/questions/43762086/verifying-jtextfields-that-may-not-get-focus/43763162#43763162. It uses a DocumentListener instead of an InputVerifier to control when a button should be enabled.","body":"Maybe you can use the approach found here: <a href=\"https://stackoverflow.com/questions/43762086/verifying-jtextfields-that-may-not-get-focus/43763162#43763162\" title=\"verifying jtextfields that may not get focus\">stackoverflow.com/questions/43762086/&hellip;</a>. It uses a DocumentListener instead of an InputVerifier to control when a button should be enabled."},{"owner":{"account_id":11415665,"reputation":214,"user_id":8368531,"display_name":"J&#246;rg"},"score":0,"creation_date":1653858462,"post_id":72426364,"comment_id":127948049,"body_markdown":"@camickr Thanks for your response. Your code is nice for enabling/disabling a Submit button, but a DocumentListener never tells me when input in a field is finished. So, if I see things right, in applying your code I could do field validation only when the Submit button is pressed. However what I like with InputVerifiers is their immediate response, so that when one leaves a field without an error message, it is really done. - My current not very elegant workaround is to set a doNotDisplayTheErrorMessage flag and run the verifier again after pressing Submit. (cont.)","body":"@camickr Thanks for your response. Your code is nice for enabling/disabling a Submit button, but a DocumentListener never tells me when input in a field is finished. So, if I see things right, in applying your code I could do field validation only when the Submit button is pressed. However what I like with InputVerifiers is their immediate response, so that when one leaves a field without an error message, it is really done. - My current not very elegant workaround is to set a doNotDisplayTheErrorMessage flag and run the verifier again after pressing Submit. (cont.)"},{"owner":{"account_id":11415665,"reputation":214,"user_id":8368531,"display_name":"J&#246;rg"},"score":0,"creation_date":1653858478,"post_id":72426364,"comment_id":127948052,"body_markdown":"This copes a false focus release, which fortunately happens only when pressing the button and not when focus goes to the next textField.","body":"This copes a false focus release, which fortunately happens only when pressing the button and not when focus goes to the next textField."},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":1,"creation_date":1653864832,"post_id":72426364,"comment_id":127949129,"body_markdown":"*I assume this is due to the invokeLater in the MouseListener.* - the code in the MouseListener has nothing to do with focus. So I fail to see why focus would be affected. *but is not free from getting instable when it comes to real programs* - I fail to see how real programs would be different. The code only deals with two components at a time, the text field and the button. So even if your real application has multiple components on the frame it should not work differently. You need to isolate why/when it stops working as you have more components.","body":"<i>I assume this is due to the invokeLater in the MouseListener.</i> - the code in the MouseListener has nothing to do with focus. So I fail to see why focus would be affected. <i>but is not free from getting instable when it comes to real programs</i> - I fail to see how real programs would be different. The code only deals with two components at a time, the text field and the button. So even if your real application has multiple components on the frame it should not work differently. You need to isolate why/when it stops working as you have more components."},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":1,"creation_date":1653864908,"post_id":72426364,"comment_id":127949140,"body_markdown":"Also, when creating a JTextField use something like: `new JTextField(10)` so the text field can determine its own preferred size. You should not be hardcoding a preferred size.","body":"Also, when creating a JTextField use something like: <code>new JTextField(10)</code> so the text field can determine its own preferred size. You should not be hardcoding a preferred size."},{"owner":{"account_id":11415665,"reputation":214,"user_id":8368531,"display_name":"J&#246;rg"},"score":0,"creation_date":1653948103,"post_id":72426364,"comment_id":127970792,"body_markdown":"Thanks for your remarks. Me too, I don&#39;t see why tiny and large programs sometimes show different behaviour. It&#39;s just that this is not the first time I experience this kind of inputverifier problems. I will cut down my code as much as I can tomorrow and come back here. - As for the ```new JTextField(10)``` I have some apps where I set the textfield to monospaced font and set the size to the maximum allowed character count. With the mentioned constructor the input string was always shifted a little bit to the left when reaching the maximum.","body":"Thanks for your remarks. Me too, I don&#39;t see why tiny and large programs sometimes show different behaviour. It&#39;s just that this is not the first time I experience this kind of inputverifier problems. I will cut down my code as much as I can tomorrow and come back here. - As for the <code>new JTextField(10)</code> I have some apps where I set the textfield to monospaced font and set the size to the maximum allowed character count. With the mentioned constructor the input string was always shifted a little bit to the left when reaching the maximum."},{"owner":{"account_id":11415665,"reputation":214,"user_id":8368531,"display_name":"J&#246;rg"},"score":0,"creation_date":1654041514,"post_id":72426364,"comment_id":127996453,"body_markdown":"I edited my post and added a demo code.","body":"I edited my post and added a demo code."},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1654045344,"post_id":72426364,"comment_id":127996968,"body_markdown":"Code should be posted in the form of an [mre]. This means all the code should be in a single source file so we can copy/paste/compile and test easily. You included two source files and the copy/paste the BtnBackgroundListener from your original code. We don&#39;t have time to fix compile errors. In any case I did take the time to fix the code and yes I can duplicate the problem which if I understand correctly is the the ActionListener code is still being invoked even when invalid text is entered in the text field. I don&#39;t know of any way to prevent this.","body":"Code should be posted in the form of an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. This means all the code should be in a single source file so we can copy/paste/compile and test easily. You included two source files and the copy/paste the BtnBackgroundListener from your original code. We don&#39;t have time to fix compile errors. In any case I did take the time to fix the code and yes I can duplicate the problem which if I understand correctly is the the ActionListener code is still being invoked even when invalid text is entered in the text field. I don&#39;t know of any way to prevent this."},{"owner":{"account_id":11415665,"reputation":214,"user_id":8368531,"display_name":"J&#246;rg"},"score":0,"creation_date":1654071117,"post_id":72426364,"comment_id":128001932,"body_markdown":"@Camickr Thanky you for taking your time. I shall improve in handing in code. And yes, the problem is that the ActionListener is invoked even when the text is invalid.","body":"@Camickr Thanky you for taking your time. I shall improve in handing in code. And yes, the problem is that the ActionListener is invoked even when the text is invalid."}],"answers":[{"tags":[],"owner":{"account_id":9059972,"reputation":3080,"user_id":6746785,"display_name":"gthanop"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1654071789,"creation_date":1654071789,"answer_id":72458563,"question_id":72426364,"body_markdown":"I can reproduce what you are seeing in Java 8 too. The rest of this answer is going to work with Java 8.\r\n\r\nThe problem lies in the implementation of `BtnBackgroundListener`.\r\n\r\nThe created `JButton` in the `Y` class (ie reference `bOK`) uses a `DefaultButtonModel` which is a `ButtonModel`. But in general any `AbstractButton` uses a `ButtonModel` instance.\r\n\r\nAccording to the documentation of the `ButtonModel` interface:\r\n&gt; ...pressing and releasing the mouse over a regular button triggers the button and causes and ActionEvent to be fired.\r\n\r\nConsider the following code:\r\n\r\n```\r\nimport javax.swing.JButton;\r\nimport javax.swing.SwingUtilities;\r\n\r\npublic class Test {\r\n    \r\n    private static void runExperiment() {\r\n        final JButton button = new JButton(&quot;Test&quot;);\r\n        button.addActionListener(e -&gt; System.out.println(&quot;Action!&quot;));\r\n        button.getModel().setArmed(true);\r\n        button.getModel().setPressed(true);\r\n        System.out.println(&quot;Before release...&quot;);\r\n        button.getModel().setPressed(false);\r\n    }\r\n    \r\n    public static void main(final String[] args) {\r\n        SwingUtilities.invokeLater(Test::runExperiment);\r\n    }\r\n}\r\n```\r\n\r\nIf you run this, you will see the following output:\r\n\r\n&lt;pre&gt;\r\nBefore release...\r\nAction!\r\n&lt;/pre&gt;\r\n\r\nand then the program will terminate. This demonstrates that when releasing the button model (after it is pressed+armed), then an `ActionEvent` is fired on the given `ActionListener`. In your code the `setPressed(false)` is invoked inside the implementation of `BtnBackgroundListener` (within `invokeLater` but I will note this a bit later).\r\n\r\nSo who is calling `setArmed(true)` and `setPressed(true)` beforehand (which are required for initiating the pressed state)? According to the source or a simple expreriment (eg `System.out.println(BasicButtonUI.class.isInstance(button.getUI()));`), one can see that the installed `ButtonUI` on the button is (a subclass) of type `BasicButtonUI`, which in turn installs the default `MouseListener` which does what you can imagine it does: it makes the button function properly by changing the model&#39;s state to armed and pressed when the user clicks the mouse inside the button bounds. It also enables rollover effects, releasing, and other stuff, but those are irrelevant for the sake of the problem.\r\n\r\n`BtnBackgroundListener` is a `MouseListener` too, which is also installed on the button (along with the default one that the UI installed). So when you click on the button then both `MouseListener`s are invoked (note `MouseListener`s also work on components which do not currently have focus). So the code internally calls all the `MouseListener`s sequencially, but it doesn&#39;t really matter in what sequence, because by calling the `setPressed(false)` inside the `SwingUtilities#invokeLater` method you make sure that the release of the model will happen after all `MouseListener`s have been invoked. Thus the default `MouseListener` first sets the button to armed and pressed, and some time later you release the model, which in turn fires an `ActionEvent` on each `ActionListener` (including the one which accepts the input).\r\n\r\nCalling your `MouseListener` always happens. Releasing the model though in your `MouseListener` doesn&#39;t always trigger an `ActionEvent` and I can&#39;t think of a possible explanation for this right now.\r\n\r\n### To prevent this...\r\n\r\nDon&#39;t use a `MouseListener` for listening on action events on buttons. This whole logic is already implemented and you only have to register an `ActionListener` alone.\r\n\r\nSince you want to use an `InputVerifier` then I would suggest to pass a flag on the button&#39;s action listener (from the `InputVerifier`) which will indicate the sanity of the input. For example:\r\n\r\n```\r\nimport java.awt.GridLayout;\r\nimport javax.swing.InputVerifier;\r\nimport javax.swing.JButton;\r\nimport javax.swing.JComponent;\r\nimport javax.swing.JFrame;\r\nimport javax.swing.JOptionPane;\r\nimport javax.swing.JPanel;\r\nimport javax.swing.JTextField;\r\nimport javax.swing.SwingUtilities;\r\n\r\npublic class Main {\r\n    \r\n    private static class MyInputVerifier extends InputVerifier {\r\n        \r\n        private boolean validInput = false;\r\n        \r\n        @Override\r\n        public boolean verify(final JComponent input) {\r\n            validInput = ((JTextField) input).getText().equals(&quot;pass&quot;);\r\n            return validInput;\r\n        }\r\n    }\r\n    \r\n    private static void createAndShowGUI() {\r\n        \r\n        final JTextField field1 = new JTextField(12),\r\n                         field2 = new JTextField(&quot;Anything&quot;);\r\n        final JButton accept = new JButton(&quot;Submit&quot;);\r\n        \r\n        final MyInputVerifier miv = new MyInputVerifier();\r\n        field1.setInputVerifier(miv);\r\n        \r\n        accept.addActionListener(e -&gt; {\r\n            if (miv.validInput)\r\n                System.out.println(&quot;Accepted!&quot;);\r\n            else\r\n                JOptionPane.showMessageDialog(accept, &quot;Invalid input!&quot;);\r\n        });\r\n        \r\n        final JPanel form = new JPanel(new GridLayout(0, 1));\r\n        form.add(field1);\r\n        form.add(field2);\r\n        form.add(accept);\r\n        \r\n        final JFrame frame = new JFrame();\r\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n        frame.getContentPane().add(form);\r\n        frame.pack();\r\n        frame.setLocationRelativeTo(null);\r\n        frame.setVisible(true);\r\n    }\r\n    \r\n    public static void main(final String[] args) {\r\n        SwingUtilities.invokeLater(Main::createAndShowGUI);\r\n    }\r\n}\r\n```\r\n\r\n\r\n\r\n","title":"InputVerifier changes button background","body":"<p>I can reproduce what you are seeing in Java 8 too. The rest of this answer is going to work with Java 8.</p>\n<p>The problem lies in the implementation of <code>BtnBackgroundListener</code>.</p>\n<p>The created <code>JButton</code> in the <code>Y</code> class (ie reference <code>bOK</code>) uses a <code>DefaultButtonModel</code> which is a <code>ButtonModel</code>. But in general any <code>AbstractButton</code> uses a <code>ButtonModel</code> instance.</p>\n<p>According to the documentation of the <code>ButtonModel</code> interface:</p>\n<blockquote>\n<p>...pressing and releasing the mouse over a regular button triggers the button and causes and ActionEvent to be fired.</p>\n</blockquote>\n<p>Consider the following code:</p>\n<pre><code>import javax.swing.JButton;\nimport javax.swing.SwingUtilities;\n\npublic class Test {\n    \n    private static void runExperiment() {\n        final JButton button = new JButton(&quot;Test&quot;);\n        button.addActionListener(e -&gt; System.out.println(&quot;Action!&quot;));\n        button.getModel().setArmed(true);\n        button.getModel().setPressed(true);\n        System.out.println(&quot;Before release...&quot;);\n        button.getModel().setPressed(false);\n    }\n    \n    public static void main(final String[] args) {\n        SwingUtilities.invokeLater(Test::runExperiment);\n    }\n}\n</code></pre>\n<p>If you run this, you will see the following output:</p>\n<pre>\nBefore release...\nAction!\n</pre>\n<p>and then the program will terminate. This demonstrates that when releasing the button model (after it is pressed+armed), then an <code>ActionEvent</code> is fired on the given <code>ActionListener</code>. In your code the <code>setPressed(false)</code> is invoked inside the implementation of <code>BtnBackgroundListener</code> (within <code>invokeLater</code> but I will note this a bit later).</p>\n<p>So who is calling <code>setArmed(true)</code> and <code>setPressed(true)</code> beforehand (which are required for initiating the pressed state)? According to the source or a simple expreriment (eg <code>System.out.println(BasicButtonUI.class.isInstance(button.getUI()));</code>), one can see that the installed <code>ButtonUI</code> on the button is (a subclass) of type <code>BasicButtonUI</code>, which in turn installs the default <code>MouseListener</code> which does what you can imagine it does: it makes the button function properly by changing the model's state to armed and pressed when the user clicks the mouse inside the button bounds. It also enables rollover effects, releasing, and other stuff, but those are irrelevant for the sake of the problem.</p>\n<p><code>BtnBackgroundListener</code> is a <code>MouseListener</code> too, which is also installed on the button (along with the default one that the UI installed). So when you click on the button then both <code>MouseListener</code>s are invoked (note <code>MouseListener</code>s also work on components which do not currently have focus). So the code internally calls all the <code>MouseListener</code>s sequencially, but it doesn't really matter in what sequence, because by calling the <code>setPressed(false)</code> inside the <code>SwingUtilities#invokeLater</code> method you make sure that the release of the model will happen after all <code>MouseListener</code>s have been invoked. Thus the default <code>MouseListener</code> first sets the button to armed and pressed, and some time later you release the model, which in turn fires an <code>ActionEvent</code> on each <code>ActionListener</code> (including the one which accepts the input).</p>\n<p>Calling your <code>MouseListener</code> always happens. Releasing the model though in your <code>MouseListener</code> doesn't always trigger an <code>ActionEvent</code> and I can't think of a possible explanation for this right now.</p>\n<h3>To prevent this...</h3>\n<p>Don't use a <code>MouseListener</code> for listening on action events on buttons. This whole logic is already implemented and you only have to register an <code>ActionListener</code> alone.</p>\n<p>Since you want to use an <code>InputVerifier</code> then I would suggest to pass a flag on the button's action listener (from the <code>InputVerifier</code>) which will indicate the sanity of the input. For example:</p>\n<pre><code>import java.awt.GridLayout;\nimport javax.swing.InputVerifier;\nimport javax.swing.JButton;\nimport javax.swing.JComponent;\nimport javax.swing.JFrame;\nimport javax.swing.JOptionPane;\nimport javax.swing.JPanel;\nimport javax.swing.JTextField;\nimport javax.swing.SwingUtilities;\n\npublic class Main {\n    \n    private static class MyInputVerifier extends InputVerifier {\n        \n        private boolean validInput = false;\n        \n        @Override\n        public boolean verify(final JComponent input) {\n            validInput = ((JTextField) input).getText().equals(&quot;pass&quot;);\n            return validInput;\n        }\n    }\n    \n    private static void createAndShowGUI() {\n        \n        final JTextField field1 = new JTextField(12),\n                         field2 = new JTextField(&quot;Anything&quot;);\n        final JButton accept = new JButton(&quot;Submit&quot;);\n        \n        final MyInputVerifier miv = new MyInputVerifier();\n        field1.setInputVerifier(miv);\n        \n        accept.addActionListener(e -&gt; {\n            if (miv.validInput)\n                System.out.println(&quot;Accepted!&quot;);\n            else\n                JOptionPane.showMessageDialog(accept, &quot;Invalid input!&quot;);\n        });\n        \n        final JPanel form = new JPanel(new GridLayout(0, 1));\n        form.add(field1);\n        form.add(field2);\n        form.add(accept);\n        \n        final JFrame frame = new JFrame();\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        frame.getContentPane().add(form);\n        frame.pack();\n        frame.setLocationRelativeTo(null);\n        frame.setVisible(true);\n    }\n    \n    public static void main(final String[] args) {\n        SwingUtilities.invokeLater(Main::createAndShowGUI);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1654093433,"creation_date":1654093433,"answer_id":72463480,"question_id":72426364,"body_markdown":"This suggestions builds on gthanop&#39;s suggestion and incorporates the OP&#39;s approach to reset the button model state when validation fails:\r\n\r\n    import java.awt.GridLayout;\r\n    import javax.swing.InputVerifier;\r\n    import javax.swing.JButton;\r\n    import javax.swing.JComponent;\r\n    import javax.swing.JFrame;\r\n    import javax.swing.JOptionPane;\r\n    import javax.swing.JPanel;\r\n    import javax.swing.JTextField;\r\n    import javax.swing.SwingUtilities;\r\n    \r\n    public class Main5 {\r\n    \r\n        private static class MyInputVerifier extends InputVerifier {\r\n    \r\n            private boolean validInput = false;\r\n            private JButton button;\r\n    \r\n    \t\tpublic MyInputVerifier (JButton button)\r\n    \t\t{\r\n    \t\t\tthis.button = button;\r\n    \t\t}\r\n    \r\n            @Override\r\n            public boolean verify(final JComponent input)\r\n            {\r\n                validInput = ((JTextField) input).getText().equals(&quot;pass&quot;);\r\n    \r\n    \t\t\tif (!validInput)\r\n    \t\t\t{\r\n    \t\t\t\tJOptionPane.showMessageDialog(input, &quot;Verifier detected invalid input!&quot;);\r\n    \r\n                 \tbutton.getModel().setPressed(false);\r\n    \t\t\t}\r\n    \r\n                return validInput;\r\n            }\r\n        }\r\n    \r\n        private static void createAndShowGUI() {\r\n    \r\n            final JTextField field1 = new JTextField(12),\r\n                             field2 = new JTextField(&quot;Anything&quot;);\r\n            final JButton accept = new JButton(&quot;Submit&quot;);\r\n    \r\n            final MyInputVerifier miv = new MyInputVerifier(accept);\r\n            field1.setInputVerifier(miv);\r\n    \r\n            accept.addActionListener(e -&gt; {\r\n                if (miv.validInput)\r\n                    System.out.println(&quot;Accepted!&quot;);\r\n    //            else\r\n    //                JOptionPane.showMessageDialog(accept, &quot;Invalid input!&quot;);\r\n            });\r\n    \r\n            final JPanel form = new JPanel(new GridLayout(0, 1));\r\n            form.add(field1);\r\n            form.add(field2);\r\n            form.add(accept);\r\n            \r\n            final JFrame frame = new JFrame();\r\n            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n            frame.getContentPane().add(form);\r\n            frame.pack();\r\n            frame.setLocationRelativeTo(null);\r\n            frame.setVisible(true);\r\n        }\r\n        \r\n        public static void main(final String[] args) {\r\n            SwingUtilities.invokeLater(Main5::createAndShowGUI);\r\n        }\r\n    }\r\n\r\n","title":"InputVerifier changes button background","body":"<p>This suggestions builds on gthanop's suggestion and incorporates the OP's approach to reset the button model state when validation fails:</p>\n<pre><code>import java.awt.GridLayout;\nimport javax.swing.InputVerifier;\nimport javax.swing.JButton;\nimport javax.swing.JComponent;\nimport javax.swing.JFrame;\nimport javax.swing.JOptionPane;\nimport javax.swing.JPanel;\nimport javax.swing.JTextField;\nimport javax.swing.SwingUtilities;\n\npublic class Main5 {\n\n    private static class MyInputVerifier extends InputVerifier {\n\n        private boolean validInput = false;\n        private JButton button;\n\n        public MyInputVerifier (JButton button)\n        {\n            this.button = button;\n        }\n\n        @Override\n        public boolean verify(final JComponent input)\n        {\n            validInput = ((JTextField) input).getText().equals(&quot;pass&quot;);\n\n            if (!validInput)\n            {\n                JOptionPane.showMessageDialog(input, &quot;Verifier detected invalid input!&quot;);\n\n                button.getModel().setPressed(false);\n            }\n\n            return validInput;\n        }\n    }\n\n    private static void createAndShowGUI() {\n\n        final JTextField field1 = new JTextField(12),\n                         field2 = new JTextField(&quot;Anything&quot;);\n        final JButton accept = new JButton(&quot;Submit&quot;);\n\n        final MyInputVerifier miv = new MyInputVerifier(accept);\n        field1.setInputVerifier(miv);\n\n        accept.addActionListener(e -&gt; {\n            if (miv.validInput)\n                System.out.println(&quot;Accepted!&quot;);\n//            else\n//                JOptionPane.showMessageDialog(accept, &quot;Invalid input!&quot;);\n        });\n\n        final JPanel form = new JPanel(new GridLayout(0, 1));\n        form.add(field1);\n        form.add(field2);\n        form.add(accept);\n        \n        final JFrame frame = new JFrame();\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        frame.getContentPane().add(form);\n        frame.pack();\n        frame.setLocationRelativeTo(null);\n        frame.setVisible(true);\n    }\n    \n    public static void main(final String[] args) {\n        SwingUtilities.invokeLater(Main5::createAndShowGUI);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":11415665,"reputation":214,"user_id":8368531,"display_name":"J&#246;rg"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":107,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":72463480,"answer_count":2,"score":1,"last_activity_date":1654093433,"creation_date":1653849601,"question_id":72426364,"body_markdown":"- The code below shows just a textfield and a button.\r\n- The textfield has got an inputVerifier which doesn&#39;t accept an empty field.\r\n- As long as the verifier&#39;s &quot;false&quot; result is signalled by an optionPane,\r\nthe button&#39;s background turns gray after closing the optionPane and turns\r\n&quot;pressed&quot; on mouseOver (and only if the button was clicked; not if the textfield was left with the tab key).\r\n\r\n   Now remove the comment slashes for the button&#39;s MouseListener and run the\r\nprogram again. You&#39;ll see that the button returns to its regular background once\r\nthe optionPane is closed.\r\n\r\n   This solution works in many cases, but is not free from getting instable when\r\nit comes to real programs beyond the scope of an SSCCE. With instable I mean\r\nthat sometimes everything works as expected and sometimes although the inputVerifier\r\nsignals the error and returns &quot;false&quot;, the focus is released from the textField\r\nand thus the missing input is accepted.\r\nI assume this is due to the invokeLater in the MouseListener.\r\n\r\n   I could reduce my current actual code to the minimum to demonstrate the\r\nproblem, but I&#39;m afraid that I end up with several pages of code. So I&#39;d  first\r\nlike to ask, whether someone has already dealt with the problem and can give a\r\nhint.\r\nThanks.\r\n```\r\nimport java.awt.*;\r\nimport java.awt.event.*;\r\nimport javax.swing.*;\r\n \r\npublic class ButtonBackground2 extends JFrame {\r\n\r\n    public ButtonBackground2() {\r\n        setSize(350, 200);\r\n        setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);\r\n        setLocationRelativeTo(null);\r\n\r\n        JPanel p= new JPanel();\r\n        JTextField tf = new JTextField();\r\n        tf.setPreferredSize(new Dimension(100, 20));\r\n        tf.setInputVerifier(new NonEmptyVerifier());\r\n        p.add(tf);\r\n        add(p, BorderLayout.CENTER);\r\n\r\n        p= new JPanel();\r\n        JButton btn = new JButton(&quot;Button&quot;);\r\n        btn.setPreferredSize(new Dimension(80, 30));\r\n//        btn.addMouseListener(new BtnBackgroundListener());\r\n        p.add(btn);\r\n        add(p, BorderLayout.SOUTH);\r\n        setVisible(true);\r\n    }\r\n \r\n \r\n    public static void main(String arg[]) {\r\n        EventQueue.invokeLater(ButtonBackground2::new);\r\n    }\r\n \r\n \r\n    class NonEmptyVerifier extends InputVerifier {\r\n/*\r\n        public boolean shouldYieldFocus(JComponent source, JComponent target) {\r\n            return verify(source);\r\n        }\r\n*/\r\n        public boolean verify(final JComponent input) {\r\n\t        JTextField tf = (JTextField) input;\r\n            if (tf.getText().trim().length()&gt;0) {\r\n                System.out.println(&quot;OK&quot;);\r\n                return true;\r\n\t        }\r\n        \tJOptionPane.showMessageDialog(ButtonBackground2.this,\r\n\t\t\t\t        &quot;Enter at least one character.&quot;,\r\n\t\t\t\t        &quot;Missing input&quot;, JOptionPane.ERROR_MESSAGE);\r\n            return false;\r\n        }\r\n    }\r\n\r\n\r\n    class BtnBackgroundListener extends MouseAdapter {\r\n        public void mousePressed(final MouseEvent e) {\r\n\t        SwingUtilities.invokeLater(() -&gt; {\r\n\t            JButton btn= (JButton)e.getSource();\r\n\t            if (!btn.hasFocus()) btn.getModel().setPressed(false);\r\n\t        });\r\n        }\r\n    }\r\n \r\n}\r\n```\r\n&lt;br&gt;&lt;br&gt;\r\nEDIT&lt;br&gt;\r\nSurprisingly I could reduce my actual code to a small portion to demonstrate the misbehaviour.\r\n```\r\nimport java.awt.*;\r\nimport java.awt.event.*;\r\nimport java.awt.font.*;\r\nimport javax.swing.*;\r\n\r\npublic class Y extends JFrame {\r\n  public static final long serialVersionUID = 100L;\r\n\r\n  public Y() {\r\n    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n    setSize(300, 240);\r\n    setLocationRelativeTo(null);\r\n\r\n    add(createTextFieldPanel(), BorderLayout.CENTER);\r\n    JButton bOK= new JButton(&quot;OK&quot;);\r\n    bOK.addActionListener(e -&gt; System.out.println(&quot;OK, input accepted.&quot;));\r\n/*  Adding the following listener makes in case of erroneous input the focus\r\n    locking of the textfield&#39;s InputVerifier shaky. The InputVerifier itself,\r\n    however, works alright, as one sees from the unfailingly displayed error\r\n    message.\r\n*/\r\n    bOK.addMouseListener(new BtnBackgroundListener());\r\n    add(bOK, BorderLayout.SOUTH);\r\n    setVisible(true);\r\n  }\r\n\r\n\r\n  static public void main(String args[]) {\r\n    EventQueue.invokeLater(Y::new);\r\n  }\r\n\r\n\r\n  private JPanel createTextFieldPanel() {\r\n    JPanel p= new JPanel(new FlowLayout(FlowLayout.LEFT));\r\n    p.add(new JLabel(&quot;Input:&quot;));\r\n    MyTextField tf= new MyTextField(this);\r\n    tf.setPreferredSize(new Dimension(95, 20));\r\n    tf.setFont(new Font(&quot;Monospaced&quot;, Font.PLAIN, 13));\r\n    p.add(tf);\r\n    return p;\r\n  }\r\n}\r\n\r\n-----------------------------------------------------------\r\n\r\n\r\nimport java.awt.*;\r\nimport javax.swing.*;\r\n\r\npublic class MyTextField extends JTextField {\r\n  public static final long serialVersionUID = 50161L;\r\n\r\n  Component parent;\r\n\r\n  public MyTextField(Component parent) {\r\n    this.parent= parent;\r\n    setInputVerifier(new InputVerifier() {\r\n/*\r\n      public boolean shouldYieldFocus(JComponent source, JComponent target) {\r\n        return verify(source);\r\n      }\r\n*/\r\n      public boolean verify(JComponent comp) {\r\n        if (getText().equals(&quot;pass&quot;)) return true;\r\n        JOptionPane.showMessageDialog(parent,\r\n\t\t\t&quot;Input does not match the requested format.\\n&quot;+getText(),\r\n\t\t\t&quot;Input error&quot;, JOptionPane.ERROR_MESSAGE);\r\n        return false;\r\n      }\r\n    });\r\n  }\r\n}\r\n```\r\nSo first we can say that Camickr was right in doubting that length/complexity of code was of any influence.&lt;br&gt;\r\nAnd second that in this demo, too, removing the MouseListener stops the focus from being released inappropriately.&lt;br&gt;\r\nSo why is program _ButtonBackground2_ working and program _Y_ only at times? Sometimes the incorrect input is accepted on the very first button click, sometimes one has to repeat the click several times.&lt;br&gt;\r\nBy the way I&#39;m running jdk 18, build 18+36-2087.\r\n","title":"InputVerifier changes button background","body":"<ul>\n<li><p>The code below shows just a textfield and a button.</p>\n</li>\n<li><p>The textfield has got an inputVerifier which doesn't accept an empty field.</p>\n</li>\n<li><p>As long as the verifier's &quot;false&quot; result is signalled by an optionPane,\nthe button's background turns gray after closing the optionPane and turns\n&quot;pressed&quot; on mouseOver (and only if the button was clicked; not if the textfield was left with the tab key).</p>\n<p>Now remove the comment slashes for the button's MouseListener and run the\nprogram again. You'll see that the button returns to its regular background once\nthe optionPane is closed.</p>\n<p>This solution works in many cases, but is not free from getting instable when\nit comes to real programs beyond the scope of an SSCCE. With instable I mean\nthat sometimes everything works as expected and sometimes although the inputVerifier\nsignals the error and returns &quot;false&quot;, the focus is released from the textField\nand thus the missing input is accepted.\nI assume this is due to the invokeLater in the MouseListener.</p>\n<p>I could reduce my current actual code to the minimum to demonstrate the\nproblem, but I'm afraid that I end up with several pages of code. So I'd  first\nlike to ask, whether someone has already dealt with the problem and can give a\nhint.\nThanks.</p>\n</li>\n</ul>\n<pre><code>import java.awt.*;\nimport java.awt.event.*;\nimport javax.swing.*;\n \npublic class ButtonBackground2 extends JFrame {\n\n    public ButtonBackground2() {\n        setSize(350, 200);\n        setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);\n        setLocationRelativeTo(null);\n\n        JPanel p= new JPanel();\n        JTextField tf = new JTextField();\n        tf.setPreferredSize(new Dimension(100, 20));\n        tf.setInputVerifier(new NonEmptyVerifier());\n        p.add(tf);\n        add(p, BorderLayout.CENTER);\n\n        p= new JPanel();\n        JButton btn = new JButton(&quot;Button&quot;);\n        btn.setPreferredSize(new Dimension(80, 30));\n//        btn.addMouseListener(new BtnBackgroundListener());\n        p.add(btn);\n        add(p, BorderLayout.SOUTH);\n        setVisible(true);\n    }\n \n \n    public static void main(String arg[]) {\n        EventQueue.invokeLater(ButtonBackground2::new);\n    }\n \n \n    class NonEmptyVerifier extends InputVerifier {\n/*\n        public boolean shouldYieldFocus(JComponent source, JComponent target) {\n            return verify(source);\n        }\n*/\n        public boolean verify(final JComponent input) {\n            JTextField tf = (JTextField) input;\n            if (tf.getText().trim().length()&gt;0) {\n                System.out.println(&quot;OK&quot;);\n                return true;\n            }\n            JOptionPane.showMessageDialog(ButtonBackground2.this,\n                        &quot;Enter at least one character.&quot;,\n                        &quot;Missing input&quot;, JOptionPane.ERROR_MESSAGE);\n            return false;\n        }\n    }\n\n\n    class BtnBackgroundListener extends MouseAdapter {\n        public void mousePressed(final MouseEvent e) {\n            SwingUtilities.invokeLater(() -&gt; {\n                JButton btn= (JButton)e.getSource();\n                if (!btn.hasFocus()) btn.getModel().setPressed(false);\n            });\n        }\n    }\n \n}\n</code></pre>\n<p><br><br>\nEDIT<br>\nSurprisingly I could reduce my actual code to a small portion to demonstrate the misbehaviour.</p>\n<pre><code>import java.awt.*;\nimport java.awt.event.*;\nimport java.awt.font.*;\nimport javax.swing.*;\n\npublic class Y extends JFrame {\n  public static final long serialVersionUID = 100L;\n\n  public Y() {\n    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n    setSize(300, 240);\n    setLocationRelativeTo(null);\n\n    add(createTextFieldPanel(), BorderLayout.CENTER);\n    JButton bOK= new JButton(&quot;OK&quot;);\n    bOK.addActionListener(e -&gt; System.out.println(&quot;OK, input accepted.&quot;));\n/*  Adding the following listener makes in case of erroneous input the focus\n    locking of the textfield's InputVerifier shaky. The InputVerifier itself,\n    however, works alright, as one sees from the unfailingly displayed error\n    message.\n*/\n    bOK.addMouseListener(new BtnBackgroundListener());\n    add(bOK, BorderLayout.SOUTH);\n    setVisible(true);\n  }\n\n\n  static public void main(String args[]) {\n    EventQueue.invokeLater(Y::new);\n  }\n\n\n  private JPanel createTextFieldPanel() {\n    JPanel p= new JPanel(new FlowLayout(FlowLayout.LEFT));\n    p.add(new JLabel(&quot;Input:&quot;));\n    MyTextField tf= new MyTextField(this);\n    tf.setPreferredSize(new Dimension(95, 20));\n    tf.setFont(new Font(&quot;Monospaced&quot;, Font.PLAIN, 13));\n    p.add(tf);\n    return p;\n  }\n}\n\n-----------------------------------------------------------\n\n\nimport java.awt.*;\nimport javax.swing.*;\n\npublic class MyTextField extends JTextField {\n  public static final long serialVersionUID = 50161L;\n\n  Component parent;\n\n  public MyTextField(Component parent) {\n    this.parent= parent;\n    setInputVerifier(new InputVerifier() {\n/*\n      public boolean shouldYieldFocus(JComponent source, JComponent target) {\n        return verify(source);\n      }\n*/\n      public boolean verify(JComponent comp) {\n        if (getText().equals(&quot;pass&quot;)) return true;\n        JOptionPane.showMessageDialog(parent,\n            &quot;Input does not match the requested format.\\n&quot;+getText(),\n            &quot;Input error&quot;, JOptionPane.ERROR_MESSAGE);\n        return false;\n      }\n    });\n  }\n}\n</code></pre>\n<p>So first we can say that Camickr was right in doubting that length/complexity of code was of any influence.<br>\nAnd second that in this demo, too, removing the MouseListener stops the focus from being released inappropriately.<br>\nSo why is program <em>ButtonBackground2</em> working and program <em>Y</em> only at times? Sometimes the incorrect input is accepted on the very first button click, sometimes one has to repeat the click several times.<br>\nBy the way I'm running jdk 18, build 18+36-2087.</p>\n"},{"tags":["java","spring","spring-boot","rabbitmq"],"answers":[{"tags":[],"owner":{"account_id":14463579,"reputation":111,"user_id":13213920,"display_name":"mailtime"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1654093249,"creation_date":1654093249,"answer_id":72463441,"question_id":71641499,"body_markdown":"```java\r\nfinal BlockingQueue&lt;String&gt; response = new ArrayBlockingQueue&lt;&gt;(1);\r\n\r\nConsumer consumer = new DefaultConsumer(channel){\r\n            @Override\r\n            public void handleDelivery(String consumerTag,\r\n                                       Envelope envelope,\r\n                                       AMQP.BasicProperties properties,\r\n                                       byte[] body) throws IOException {\r\n              response.offer(new String(body, StandardCharsets.UTF_8));\r\n             }\r\n        };\r\n        \r\nchannel.basicConsume(QUEUE, true, consumer);\r\nSystem.out.println(&quot;Received outside callback is: &quot; + response.take());\r\n\r\n```","title":"Returning a value from a CallBack function in RabbitMQ","body":"<pre class=\"lang-java prettyprint-override\"><code>final BlockingQueue&lt;String&gt; response = new ArrayBlockingQueue&lt;&gt;(1);\n\nConsumer consumer = new DefaultConsumer(channel){\n            @Override\n            public void handleDelivery(String consumerTag,\n                                       Envelope envelope,\n                                       AMQP.BasicProperties properties,\n                                       byte[] body) throws IOException {\n              response.offer(new String(body, StandardCharsets.UTF_8));\n             }\n        };\n        \nchannel.basicConsume(QUEUE, true, consumer);\nSystem.out.println(&quot;Received outside callback is: &quot; + response.take());\n\n</code></pre>\n"}],"owner":{"account_id":14601698,"reputation":486,"user_id":10545805,"display_name":"CuriousLearner"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":520,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1654093249,"creation_date":1648430151,"question_id":71641499,"body_markdown":"I have written a code for consumer in Spring Boot RabbitMQ. After getting the message, I want to further process it. But for that, I want access to it outside the callback. I have skipped some of the irrelevant code inside Postmapping function.\r\n\r\n    @CrossOrigin(origins = &quot;*&quot;)\r\n    @RestController\r\n    public class PlottingRabbitMQ {\r\n        private static Map&lt;String, String&gt; linkParams = new HashMap&lt;&gt;();\r\n        static Logger logger\r\n            = LoggerFactory.getLogger(LoginRabbitMQ.class);\r\n\r\n    private final static String PLOTTING_RESEND_QUEUE = &quot;plotting_resend&quot;;\r\n\r\n    @JsonDeserialize\r\n    @PostMapping(value = &quot;/plotting&quot;)\r\n    public Object createLink(@RequestBody PlottingModel plotting, @RequestHeader Map&lt;String, String&gt; plottingHeaders) throws Exception {\r\n            \r\n            ConnectionFactory factory_plotting_resend = new ConnectionFactory();\r\n            factory_plotting_resend.setHost(&quot;localhost&quot;);\r\n            Connection connection_plotting_resend = factory_plotting_resend.newConnection();\r\n            Channel channel_plotting_resend = connection_plotting_resend.createChannel();\r\n            channel_plotting_resend.queueDeclare(PLOTTING_RESEND_QUEUE,\r\n                    false, false,false, null);\r\n            logger.info(&quot;[!] Waiting for messages. To exit press Ctrl+C&quot;);\r\n\r\n\r\n            Consumer consumer_plotting_resend = new DefaultConsumer(channel_plotting_resend){\r\n                @Override\r\n                public void handleDelivery(String consumerTag,\r\n                                           Envelope envelope,\r\n                                           AMQP.BasicProperties properties,\r\n                                           byte[] body)\r\n                        throws IOException {\r\n                    String respBodyPlotting = new String(body, &quot;UTF-8&quot;);\r\n                    logger.info(&quot;[x] Message Received&#39; &quot; + respBodyPlotting + &quot;&#39;&quot;);\r\n                }\r\n            };\r\n            \r\n            channel_plotting_resend.basicConsume(PLOTTING_RESEND_QUEUE, true, consumer_plotting_resend);\r\n            System.out.println(&quot;Received outside callback is: &quot; + respBodyPlotting);\r\n\r\nAs you can see right at the bottom, I have written a system out where I want to print `respBodyPlotting` outside the channel_plotting_resend callback (I&#39;m getting an error when I try to print it). In `logger.info`, I&#39;m receiving the message but I&#39;m clueless on how to getting it outside the function. Can someone please help me on this.","title":"Returning a value from a CallBack function in RabbitMQ","body":"<p>I have written a code for consumer in Spring Boot RabbitMQ. After getting the message, I want to further process it. But for that, I want access to it outside the callback. I have skipped some of the irrelevant code inside Postmapping function.</p>\n<pre><code>@CrossOrigin(origins = &quot;*&quot;)\n@RestController\npublic class PlottingRabbitMQ {\n    private static Map&lt;String, String&gt; linkParams = new HashMap&lt;&gt;();\n    static Logger logger\n        = LoggerFactory.getLogger(LoginRabbitMQ.class);\n\nprivate final static String PLOTTING_RESEND_QUEUE = &quot;plotting_resend&quot;;\n\n@JsonDeserialize\n@PostMapping(value = &quot;/plotting&quot;)\npublic Object createLink(@RequestBody PlottingModel plotting, @RequestHeader Map&lt;String, String&gt; plottingHeaders) throws Exception {\n        \n        ConnectionFactory factory_plotting_resend = new ConnectionFactory();\n        factory_plotting_resend.setHost(&quot;localhost&quot;);\n        Connection connection_plotting_resend = factory_plotting_resend.newConnection();\n        Channel channel_plotting_resend = connection_plotting_resend.createChannel();\n        channel_plotting_resend.queueDeclare(PLOTTING_RESEND_QUEUE,\n                false, false,false, null);\n        logger.info(&quot;[!] Waiting for messages. To exit press Ctrl+C&quot;);\n\n\n        Consumer consumer_plotting_resend = new DefaultConsumer(channel_plotting_resend){\n            @Override\n            public void handleDelivery(String consumerTag,\n                                       Envelope envelope,\n                                       AMQP.BasicProperties properties,\n                                       byte[] body)\n                    throws IOException {\n                String respBodyPlotting = new String(body, &quot;UTF-8&quot;);\n                logger.info(&quot;[x] Message Received' &quot; + respBodyPlotting + &quot;'&quot;);\n            }\n        };\n        \n        channel_plotting_resend.basicConsume(PLOTTING_RESEND_QUEUE, true, consumer_plotting_resend);\n        System.out.println(&quot;Received outside callback is: &quot; + respBodyPlotting);\n</code></pre>\n<p>As you can see right at the bottom, I have written a system out where I want to print <code>respBodyPlotting</code> outside the channel_plotting_resend callback (I'm getting an error when I try to print it). In <code>logger.info</code>, I'm receiving the message but I'm clueless on how to getting it outside the function. Can someone please help me on this.</p>\n"},{"tags":["java","image","preview","hdr","twelvemonkeys"],"comments":[{"owner":{"account_id":1531514,"reputation":26639,"user_id":1428606,"accept_rate":71,"display_name":"Harald K"},"score":0,"creation_date":1653921465,"post_id":72435424,"comment_id":127963398,"body_markdown":"Unless you actually plan on doing custom tone mapping, you could just use `return ImageIO.read(hdrFile);`. Anyway, the above code works for me (Java 8/11/17). I suggest you use a debugger to step *into* the `next()` or `hasNext()` methods to figure out the exact spot where it freezes.","body":"Unless you actually plan on doing custom tone mapping, you could just use <code>return ImageIO.read(hdrFile);</code>. Anyway, the above code works for me (Java 8/11/17). I suggest you use a debugger to step <i>into</i> the <code>next()</code> or <code>hasNext()</code> methods to figure out the exact spot where it freezes."},{"owner":{"account_id":25176073,"reputation":89,"user_id":19018243,"display_name":"fafa"},"score":0,"creation_date":1653922169,"post_id":72435424,"comment_id":127963737,"body_markdown":"if I do `BufferedImage bi = ImageIO.read(hdrFile); System.err.println(&quot;=====&gt;&gt;&gt; TEST A&quot;);` it passes to TEST A, but as soon as I do `BufferedImage bi = ImageIO.read(hdrFile);         System.err.println(&quot;=====&gt;&gt;&gt; TEST B: &quot; + bi.getHeight());` it stuck once again - no test CMD output, besides it looks like it produces no actual BufferedImage content, just empty `BufferedImage` or something","body":"if I do <code>BufferedImage bi = ImageIO.read(hdrFile); System.err.println(&quot;=====&gt;&gt;&gt; TEST A&quot;);</code> it passes to TEST A, but as soon as I do <code>BufferedImage bi = ImageIO.read(hdrFile);         System.err.println(&quot;=====&gt;&gt;&gt; TEST B: &quot; + bi.getHeight());</code> it stuck once again - no test CMD output, besides it looks like it produces no actual BufferedImage content, just empty <code>BufferedImage</code> or something"},{"owner":{"account_id":1531514,"reputation":26639,"user_id":1428606,"accept_rate":71,"display_name":"Harald K"},"score":0,"creation_date":1653922348,"post_id":72435424,"comment_id":127963808,"body_markdown":"As I said, use a debugger, and find your answer. &#128512;","body":"As I said, use a debugger, and find your answer. 😀"}],"answers":[{"tags":[],"owner":{"account_id":16651827,"reputation":502,"user_id":12034466,"display_name":"qraqatit"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1653958654,"creation_date":1653958654,"answer_id":72441251,"question_id":72435424,"body_markdown":"Well, if you don&#39;t mind occasional extreme halucinogenic oversaturation of some colors here and there (I was unable solving the issue - if anyone knows how to, please, feel free to update my code), you can try this (it is using [JavaHDR][1]) + I also added a bit of brightness and contrast to it as all HDR I tested looked too dark for the preview, so if you do not like that you can remove that part from the code:\r\n\r\n    public int rgbToInteger(int r, int g, int b) {\r\n        int rgb = r;\r\n        rgb = (rgb &lt;&lt; 8) + g;\r\n        rgb = (rgb &lt;&lt; 8) + b;\r\n        return rgb;\r\n    }\r\n    \r\n    public BufferedImage hdrToBufferedImage(File hdrFile) throws IOException {\r\n        HDRImage hdr = HDREncoder.readHDR(hdrFile, true);\r\n        int width = hdr.getWidth();\r\n        int height = hdr.getHeight();\r\n        BufferedImage bi = new BufferedImage(width, height, BufferedImage.TYPE_INT_RGB);\r\n        for (int x = 0; x &lt; width; x++) {\r\n            for (int y = 0; y &lt; height; y++) {\r\n                int r = (int) (hdr.getPixelValue(x, y, 0) * 255);\r\n                int g = (int) (hdr.getPixelValue(x, y, 1) * 255);\r\n                int b = (int) (hdr.getPixelValue(x, y, 2) * 255);\r\n                bi.setRGB(x, y, rgbToInteger(r, g, b));\r\n            }\r\n        }\r\n\r\n        //***** YOU CAN REMOVE THIS SMALL SECTION IF YOU FEEL THE IMAGE IS TOO BRIGHT FOR YOU\r\n        float brightness = 2f;\r\n        float contrast = 20f;\r\n        RescaleOp rescaleOp = new RescaleOp(brightness, contrast, null);\r\n        rescaleOp.filter(bi, bi);\r\n        //***** \r\n\r\n        return bi;\r\n    }\r\n\r\n\r\n\r\n  [1]: https://github.com/Ivelate/JavaHDR","title":"Create simple 2D image preview from panoramic HDR","body":"<p>Well, if you don't mind occasional extreme halucinogenic oversaturation of some colors here and there (I was unable solving the issue - if anyone knows how to, please, feel free to update my code), you can try this (it is using <a href=\"https://github.com/Ivelate/JavaHDR\" rel=\"nofollow noreferrer\">JavaHDR</a>) + I also added a bit of brightness and contrast to it as all HDR I tested looked too dark for the preview, so if you do not like that you can remove that part from the code:</p>\n<pre><code>public int rgbToInteger(int r, int g, int b) {\n    int rgb = r;\n    rgb = (rgb &lt;&lt; 8) + g;\n    rgb = (rgb &lt;&lt; 8) + b;\n    return rgb;\n}\n\npublic BufferedImage hdrToBufferedImage(File hdrFile) throws IOException {\n    HDRImage hdr = HDREncoder.readHDR(hdrFile, true);\n    int width = hdr.getWidth();\n    int height = hdr.getHeight();\n    BufferedImage bi = new BufferedImage(width, height, BufferedImage.TYPE_INT_RGB);\n    for (int x = 0; x &lt; width; x++) {\n        for (int y = 0; y &lt; height; y++) {\n            int r = (int) (hdr.getPixelValue(x, y, 0) * 255);\n            int g = (int) (hdr.getPixelValue(x, y, 1) * 255);\n            int b = (int) (hdr.getPixelValue(x, y, 2) * 255);\n            bi.setRGB(x, y, rgbToInteger(r, g, b));\n        }\n    }\n\n    //***** YOU CAN REMOVE THIS SMALL SECTION IF YOU FEEL THE IMAGE IS TOO BRIGHT FOR YOU\n    float brightness = 2f;\n    float contrast = 20f;\n    RescaleOp rescaleOp = new RescaleOp(brightness, contrast, null);\n    rescaleOp.filter(bi, bi);\n    //***** \n\n    return bi;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1531514,"reputation":26639,"user_id":1428606,"accept_rate":71,"display_name":"Harald K"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1654093155,"creation_date":1654070441,"answer_id":72458302,"question_id":72435424,"body_markdown":"I can compile and run the code you posted (changing the path obviously) without problems on my two macOS machines, testing on all the LTS Java versions (8, 11 and 17). In addition, I run code similar to this as part of the CI/CD pipeline of my project that tests on Windows and Linux as well. I think there is something wrong with the setup in your IDE or Java on your computer. I am not able to reproduce the &quot;freeze&quot;-situation you describe... \r\n\r\nHere is the output of running the program (I also printed the resulting `BufferedImage` for verification):\r\n\r\n    =====&gt;&gt;&gt; TEST 1\r\n    =====&gt;&gt;&gt; TEST 2\r\n    =====&gt;&gt;&gt; TEST 3\r\n    image = BufferedImage@5a42bbf4: type = 1 DirectColorModel: rmask=ff0000 gmask=ff00 bmask=ff amask=0 IntegerInterleavedRaster: width = 1024 height = 512 #Bands = 3 xOff = 0 yOff = 0 dataOffset[0] 0\r\n\r\nRunning with the code as-is (with the `NullToneMapper` and no post-processing), the image looks like this, due to unnormalized values:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nRunning with the default/built-in tone mapper, or simply reading the image with `ImageIO.read(hdrFile)` as suggested in the comments, the image will look like this:\r\n\r\n[![enter image description here][2]][2]\r\n\r\nFinally, playing a bit with the code using a custom global tone mapper; `param.setToneMapper(new DefaultToneMapper(0.75f))`, I get a result like this:\r\n\r\n\r\n[![enter image description here][3]][3]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/SCxTF.png\r\n  [2]: https://i.stack.imgur.com/XnKzA.png\r\n  [3]: https://i.stack.imgur.com/XcJIE.png","title":"Create simple 2D image preview from panoramic HDR","body":"<p>I can compile and run the code you posted (changing the path obviously) without problems on my two macOS machines, testing on all the LTS Java versions (8, 11 and 17). In addition, I run code similar to this as part of the CI/CD pipeline of my project that tests on Windows and Linux as well. I think there is something wrong with the setup in your IDE or Java on your computer. I am not able to reproduce the &quot;freeze&quot;-situation you describe...</p>\n<p>Here is the output of running the program (I also printed the resulting <code>BufferedImage</code> for verification):</p>\n<pre><code>=====&gt;&gt;&gt; TEST 1\n=====&gt;&gt;&gt; TEST 2\n=====&gt;&gt;&gt; TEST 3\nimage = BufferedImage@5a42bbf4: type = 1 DirectColorModel: rmask=ff0000 gmask=ff00 bmask=ff amask=0 IntegerInterleavedRaster: width = 1024 height = 512 #Bands = 3 xOff = 0 yOff = 0 dataOffset[0] 0\n</code></pre>\n<p>Running with the code as-is (with the <code>NullToneMapper</code> and no post-processing), the image looks like this, due to unnormalized values:</p>\n<p><a href=\"https://i.stack.imgur.com/SCxTF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/SCxTF.png\" alt=\"enter image description here\" /></a></p>\n<p>Running with the default/built-in tone mapper, or simply reading the image with <code>ImageIO.read(hdrFile)</code> as suggested in the comments, the image will look like this:</p>\n<p><a href=\"https://i.stack.imgur.com/XnKzA.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/XnKzA.png\" alt=\"enter image description here\" /></a></p>\n<p>Finally, playing a bit with the code using a custom global tone mapper; <code>param.setToneMapper(new DefaultToneMapper(0.75f))</code>, I get a result like this:</p>\n<p><a href=\"https://i.stack.imgur.com/XcJIE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/XcJIE.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":25176073,"reputation":89,"user_id":19018243,"display_name":"fafa"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1654088471,"creation_date":1654088471,"answer_id":72462371,"question_id":72435424,"body_markdown":"After a long discussion with @HaraldK and his code addition, I am posting the final correct code for this problem, that is in fact mix of @qraqatit [code][1] updated a bit with the @HaraldK addition that corrects wrong color tone mapping, here it is:\r\n\r\n    public int rgbToInteger(int r, int g, int b) {\r\n        int rgb = r;\r\n        rgb = (rgb &lt;&lt; 8) + g;\r\n        rgb = (rgb &lt;&lt; 8) + b;\r\n        return rgb;\r\n    }\r\n    \r\n    public BufferedImage hdrToBufferedImage(File hdrFile) throws IOException {\r\n        HDRImage hdr = HDREncoder.readHDR(hdrFile, true);\r\n        int width = hdr.getWidth();\r\n        int height = hdr.getHeight();\r\n        BufferedImage bi = new BufferedImage(width, height, BufferedImage.TYPE_INT_RGB);\r\n        float colorToneCorrection = 0.75f;\r\n        for (int x = 0; x &lt; width; x++) {\r\n            for (int y = 0; y &lt; height; y++) {\r\n                float r = hdr.getPixelValue(x, y, 0);\r\n                int red = (int) ((r / (colorToneCorrection + r)) * 255);\r\n                float g = hdr.getPixelValue(x, y, 1);\r\n                int green = (int) ((g / (colorToneCorrection + g)) * 255);\r\n                float b = hdr.getPixelValue(x, y, 2);\r\n                int blue = (int) (int) ((b / (colorToneCorrection + b)) * 255);\r\n                bi.setRGB(x, y, rgbToInteger(red, green, blue));\r\n            }\r\n        }\r\n\r\n        //MAKE THE RESULTING IMAGE A BIT BRIGHTER\r\n        float brightness = 1.35f;\r\n        float contrast = 0f;\r\n        RescaleOp rescaleOp = new RescaleOp(brightness, contrast, null);\r\n        rescaleOp.filter(bi, bi);\r\n\r\n        return bi;\r\n    }\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/72441251/19018243","title":"Create simple 2D image preview from panoramic HDR","body":"<p>After a long discussion with @HaraldK and his code addition, I am posting the final correct code for this problem, that is in fact mix of @qraqatit <a href=\"https://stackoverflow.com/a/72441251/19018243\">code</a> updated a bit with the @HaraldK addition that corrects wrong color tone mapping, here it is:</p>\n<pre><code>public int rgbToInteger(int r, int g, int b) {\n    int rgb = r;\n    rgb = (rgb &lt;&lt; 8) + g;\n    rgb = (rgb &lt;&lt; 8) + b;\n    return rgb;\n}\n\npublic BufferedImage hdrToBufferedImage(File hdrFile) throws IOException {\n    HDRImage hdr = HDREncoder.readHDR(hdrFile, true);\n    int width = hdr.getWidth();\n    int height = hdr.getHeight();\n    BufferedImage bi = new BufferedImage(width, height, BufferedImage.TYPE_INT_RGB);\n    float colorToneCorrection = 0.75f;\n    for (int x = 0; x &lt; width; x++) {\n        for (int y = 0; y &lt; height; y++) {\n            float r = hdr.getPixelValue(x, y, 0);\n            int red = (int) ((r / (colorToneCorrection + r)) * 255);\n            float g = hdr.getPixelValue(x, y, 1);\n            int green = (int) ((g / (colorToneCorrection + g)) * 255);\n            float b = hdr.getPixelValue(x, y, 2);\n            int blue = (int) (int) ((b / (colorToneCorrection + b)) * 255);\n            bi.setRGB(x, y, rgbToInteger(red, green, blue));\n        }\n    }\n\n    //MAKE THE RESULTING IMAGE A BIT BRIGHTER\n    float brightness = 1.35f;\n    float contrast = 0f;\n    RescaleOp rescaleOp = new RescaleOp(brightness, contrast, null);\n    rescaleOp.filter(bi, bi);\n\n    return bi;\n}\n</code></pre>\n"}],"owner":{"account_id":25176073,"reputation":89,"user_id":19018243,"display_name":"fafa"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":201,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":72441251,"answer_count":3,"score":0,"last_activity_date":1654093155,"creation_date":1653918549,"question_id":72435424,"body_markdown":"Is there some really simple and basic code for making preview for HDR images (like getting 2D `BufferedImage` output or something)?\r\n\r\nI am using [this][1] HDR image.\r\n\r\nI tried [this][2] (it uses [TwelveMonkeys][3]), but no success at all (it simply stuck/frozen at `ImageReader reader = readers.next();`)\r\n\r\nI edited it a bit to suit my needs like this, testing where it got broken/stuck/frozen...and it always happen after TEST 1, that is TEST 2 is never reached, tho no `IllegalArgumentException` is thrown - if I remove the `if()` section, then TEST 3 is never reached (I am using NetBeansIDE v12.4, Win7 x64):\r\n\r\n    public BufferedImage hdrToBufferedImage(File hdrFile) throws IOException {\r\n        BufferedImage bi = null;\r\n    \r\n        // Create input stream\r\n        // I WROTE DOWN THE STRING FOR THIS EXAMPLE, normally it is taken from the hdrFile\r\n        // HDR image size is 23.7MB if it matters at all?\r\n        ImageInputStream input = ImageIO.createImageInputStream(new File(&quot;Z:/HDR/spiaggia_di_mondello_4k.hdr&quot;));\r\n    \r\n        try {\r\n            // Get the reader\r\n            Iterator&lt;ImageReader&gt; readers = ImageIO.getImageReaders(input);\r\n            System.err.println(&quot;=====&gt;&gt;&gt; TEST 1&quot;);\r\n    \r\n            if (!readers.hasNext()) {\r\n                throw new IllegalArgumentException(&quot;No reader for: &quot; + hdrFile);\r\n            }\r\n            System.err.println(&quot;=====&gt;&gt;&gt; TEST 2&quot;);\r\n    \r\n            ImageReader reader = readers.next();\r\n            System.err.println(&quot;=====&gt;&gt;&gt; TEST 3&quot;);\r\n    \r\n            try {\r\n                reader.setInput(input);\r\n    \r\n                // Disable default tone mapping\r\n                HDRImageReadParam param = (HDRImageReadParam) reader.getDefaultReadParam();\r\n                param.setToneMapper(new NullToneMapper());\r\n    \r\n                // Read the image, using settings from param\r\n                bi = reader.read(0, param);\r\n            } finally {\r\n                // Dispose reader in finally block to avoid memory leaks\r\n                reader.dispose();\r\n            }\r\n        } finally {\r\n            // Close stream in finally block to avoid resource leaks\r\n            input.close();\r\n        }\r\n    \r\n        // Get float data\r\n        float[] rgb = ((DataBufferFloat) bi.getRaster().getDataBuffer()).getData();\r\n    \r\n        // Convert the image to something easily displayable\r\n        BufferedImage converted = new ColorConvertOp(null).filter(bi, new BufferedImage(bi.getWidth(), bi.getHeight(), BufferedImage.TYPE_INT_RGB));\r\n    \r\n        return converted;\r\n    }\r\n\r\n\r\n  [1]: https://polyhaven.com/a/spiaggia_di_mondello\r\n  [2]: https://stackoverflow.com/a/31686768/19018243\r\n  [3]: https://github.com/haraldk/TwelveMonkeys","title":"Create simple 2D image preview from panoramic HDR","body":"<p>Is there some really simple and basic code for making preview for HDR images (like getting 2D <code>BufferedImage</code> output or something)?</p>\n<p>I am using <a href=\"https://polyhaven.com/a/spiaggia_di_mondello\" rel=\"nofollow noreferrer\">this</a> HDR image.</p>\n<p>I tried <a href=\"https://stackoverflow.com/a/31686768/19018243\">this</a> (it uses <a href=\"https://github.com/haraldk/TwelveMonkeys\" rel=\"nofollow noreferrer\">TwelveMonkeys</a>), but no success at all (it simply stuck/frozen at <code>ImageReader reader = readers.next();</code>)</p>\n<p>I edited it a bit to suit my needs like this, testing where it got broken/stuck/frozen...and it always happen after TEST 1, that is TEST 2 is never reached, tho no <code>IllegalArgumentException</code> is thrown - if I remove the <code>if()</code> section, then TEST 3 is never reached (I am using NetBeansIDE v12.4, Win7 x64):</p>\n<pre><code>public BufferedImage hdrToBufferedImage(File hdrFile) throws IOException {\n    BufferedImage bi = null;\n\n    // Create input stream\n    // I WROTE DOWN THE STRING FOR THIS EXAMPLE, normally it is taken from the hdrFile\n    // HDR image size is 23.7MB if it matters at all?\n    ImageInputStream input = ImageIO.createImageInputStream(new File(&quot;Z:/HDR/spiaggia_di_mondello_4k.hdr&quot;));\n\n    try {\n        // Get the reader\n        Iterator&lt;ImageReader&gt; readers = ImageIO.getImageReaders(input);\n        System.err.println(&quot;=====&gt;&gt;&gt; TEST 1&quot;);\n\n        if (!readers.hasNext()) {\n            throw new IllegalArgumentException(&quot;No reader for: &quot; + hdrFile);\n        }\n        System.err.println(&quot;=====&gt;&gt;&gt; TEST 2&quot;);\n\n        ImageReader reader = readers.next();\n        System.err.println(&quot;=====&gt;&gt;&gt; TEST 3&quot;);\n\n        try {\n            reader.setInput(input);\n\n            // Disable default tone mapping\n            HDRImageReadParam param = (HDRImageReadParam) reader.getDefaultReadParam();\n            param.setToneMapper(new NullToneMapper());\n\n            // Read the image, using settings from param\n            bi = reader.read(0, param);\n        } finally {\n            // Dispose reader in finally block to avoid memory leaks\n            reader.dispose();\n        }\n    } finally {\n        // Close stream in finally block to avoid resource leaks\n        input.close();\n    }\n\n    // Get float data\n    float[] rgb = ((DataBufferFloat) bi.getRaster().getDataBuffer()).getData();\n\n    // Convert the image to something easily displayable\n    BufferedImage converted = new ColorConvertOp(null).filter(bi, new BufferedImage(bi.getWidth(), bi.getHeight(), BufferedImage.TYPE_INT_RGB));\n\n    return converted;\n}\n</code></pre>\n"},{"tags":["java","html","css","spring-boot","spring-mvc"],"answers":[{"tags":[],"owner":{"account_id":4623648,"reputation":1,"user_id":6340333,"display_name":"Umair"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1654092611,"creation_date":1654092611,"answer_id":72463277,"question_id":72463115,"body_markdown":"You need to add a specific path for this purpose,  create an images folder and add a path something like this URL(../images/Blue.png). Also, use background image CSS position property (like mentioned below) so that you can check whether your image is appearing or not.\r\n   \r\n\r\n    {\r\n         background-image: url(&#39;w3css.gif&#39;);\r\n         background-repeat: no-repeat;\r\n         background-attachment: fixed;\r\n         background-position: center; \r\n       }","title":"Add background image to spring boot project","body":"<p>You need to add a specific path for this purpose,  create an images folder and add a path something like this URL(../images/Blue.png). Also, use background image CSS position property (like mentioned below) so that you can check whether your image is appearing or not.</p>\n<pre><code>{\n     background-image: url('w3css.gif');\n     background-repeat: no-repeat;\n     background-attachment: fixed;\n     background-position: center; \n   }\n</code></pre>\n"}],"owner":{"account_id":10081902,"reputation":67,"user_id":7451900,"display_name":"Rune"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":63,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1654092611,"creation_date":1654091880,"question_id":72463115,"body_markdown":"I try to add a image as background image in a html file from a springboot project:\r\n```\r\n&lt;!DOCTYPE html&gt;\r\n&lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot; lang=&quot;en&quot;&gt;\r\n&lt;head&gt;\r\n    &lt;div th:replace=&quot;header :: myheader&quot;&gt;&lt;/div&gt;\r\n    &lt;style&gt;\r\n    body {\r\n      background-image: url(&quot;Blue.png&quot;);\r\n    }\r\n    &lt;/style&gt;\r\n    &lt;title&gt;Title&lt;/title&gt;\r\n&lt;/head&gt;\r\n&lt;body&gt;\r\n&lt;div class=&quot;container d-flex flex-column min-vh-100 justify-content-center align-items-center&quot;&gt;\r\n    &lt;div class=&quot;row&quot;&gt;\r\n            &lt;a th:href=&quot;@{/newDiab}&quot; class=&quot;btn btn-primary my-2 btn-block&quot;&gt;Inscription&lt;/a&gt;&lt;/br&gt;\r\n            &lt;a th:href=&quot;@{/login}&quot; class=&quot;btn btn-primary my-2 btn-block&quot;&gt;Authentification&lt;/a&gt;&lt;/br&gt;\r\n            &lt;a th:href=&quot;@{/help}&quot; class=&quot;btn btn-primary my-2 btn-block&quot;&gt;Help&lt;/a&gt;&lt;/br&gt;\r\n    &lt;/div&gt;\r\n&lt;/div&gt;\r\n&lt;/body&gt;\r\n&lt;/html&gt;\r\n```\r\nThe weird thing is than when I run de page using the browser it use the following url I see it:\r\nhttp://localhost:63342/MyTFE/templates/firstPage.html?_ijt=qobe818ectvkr4b3hb7kq4cnmk&amp;_ij_reload=RELOAD_ON_SAVE\r\nbut when I run the entire project and using localhost with this url it&#39;s doesn&#39;t show:\r\nhttp://localhost:8080/\r\n","title":"Add background image to spring boot project","body":"<p>I try to add a image as background image in a html file from a springboot project:</p>\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot; lang=&quot;en&quot;&gt;\n&lt;head&gt;\n    &lt;div th:replace=&quot;header :: myheader&quot;&gt;&lt;/div&gt;\n    &lt;style&gt;\n    body {\n      background-image: url(&quot;Blue.png&quot;);\n    }\n    &lt;/style&gt;\n    &lt;title&gt;Title&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;div class=&quot;container d-flex flex-column min-vh-100 justify-content-center align-items-center&quot;&gt;\n    &lt;div class=&quot;row&quot;&gt;\n            &lt;a th:href=&quot;@{/newDiab}&quot; class=&quot;btn btn-primary my-2 btn-block&quot;&gt;Inscription&lt;/a&gt;&lt;/br&gt;\n            &lt;a th:href=&quot;@{/login}&quot; class=&quot;btn btn-primary my-2 btn-block&quot;&gt;Authentification&lt;/a&gt;&lt;/br&gt;\n            &lt;a th:href=&quot;@{/help}&quot; class=&quot;btn btn-primary my-2 btn-block&quot;&gt;Help&lt;/a&gt;&lt;/br&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<p>The weird thing is than when I run de page using the browser it use the following url I see it:\nhttp://localhost:63342/MyTFE/templates/firstPage.html?_ijt=qobe818ectvkr4b3hb7kq4cnmk&amp;_ij_reload=RELOAD_ON_SAVE\nbut when I run the entire project and using localhost with this url it's doesn't show:\nhttp://localhost:8080/</p>\n"},{"tags":["java","spring-boot","azure","junit","credentials"],"comments":[{"owner":{"account_id":236909,"reputation":8312,"user_id":504717,"accept_rate":56,"display_name":"Em Ae"},"score":0,"creation_date":1654050640,"post_id":69573746,"comment_id":127997670,"body_markdown":"Did you find any workaround?","body":"Did you find any workaround?"},{"owner":{"account_id":216151,"reputation":26327,"user_id":471213,"accept_rate":82,"display_name":"usr-local-ΕΨΗΕΛΩΝ"},"score":0,"creation_date":1654091660,"post_id":69573746,"comment_id":128009391,"body_markdown":"I should post the answer","body":"I should post the answer"}],"answers":[{"tags":[],"owner":{"account_id":216151,"reputation":26327,"user_id":471213,"accept_rate":82,"display_name":"usr-local-ΕΨΗΕΛΩΝ"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1654092530,"creation_date":1654092530,"answer_id":72463255,"question_id":69573746,"body_markdown":"The answer is a bit complex to explain, so I did my best\r\n\r\n# TL;DR\r\n\r\nNote that the original variable names are redacted and YMMV if you try to recreate the example with the exact keys I used\r\n\r\n- Create a secret pipeline variable containing the connection string, and bury* it into the pipeline\r\n\r\nExample name `testStorageAccountConnectionString`\r\n\r\n[![Pipeline variables][1]][1]\r\n\r\n- Change the Gradle task\r\n\r\n```yaml\r\n              - task: Gradle@3\r\n                displayName: Build with Gradle\r\n                inputs:\r\n                  gradleWrapperFile: gradlew\r\n                  gradleOptions: -Xmx10240m -XX:+HeapDumpOnOutOfMemoryError -Dfile.encoding=UTF-8 -DAZURE_STORAGE_CONNECTION_STRING=$(AZURE_STORAGE_CONNECTION_STRING)\r\n                  options: --build-cache -Pci=true -PgitCommitId=$(Build.SourceVersion) -PbuildId=$(Build.BuildId) -Preckon.stage=${{parameters.versionStage}} -Preckon.scope=${{parameters.versionScope}}\r\n                  jdkVersionOption: 1.11\r\n                  jdkArchitectureOption: x64\r\n                  publishJUnitResults: true\r\n                  sqAnalysisEnabled: true\r\n                  sqGradlePluginVersionChoice: specify\r\n                  sqGradlePluginVersion: 3.2.0\r\n                  testResultsFiles: &#39;$(System.DefaultWorkingDirectory)/build/test-results/**/TEST-*.xml&#39;\r\n                  tasks: clean build\r\n                env:\r\n                 AZURE_STORAGE_CONNECTION_STRING: $(testStorageAccountConnectionString)\r\n```\r\n\r\n# Explanation\r\n\r\n- Spring Boot accepts placeholder `${azure.storageConnectionString}` from an environment variable `AZURE_STORAGE_CONNECTION_STRING`. **Please read [the docs][2]** and try it locally first. This means we need to run the test with an environment variable propely set in order to resolve the placeholder\r\n- Gradle can run with `-D` to add an environment variable. `-DAZURE_STORAGE_CONNECTION_STRING=$(AZURE_STORAGE_CONNECTION_STRING)` adds an environment variable `AZURE_STORAGE_CONNECTION_STRING` to the test run equal to the **pipeline environment variable** `AZURE_STORAGE_CONNECTION_STRING` (not that fantasy)\r\n- Azure DevOps pipelines protect secret variables from unwanted access. We created the pipeline variable as secret, so there is another trick to do first\r\n\r\nGradle&#39;s **env** attributes set environment variable for the pipeline container. In this case, we make sure that Gradle runs with `AZURE_STORAGE_CONNECTION_STRING` set to `testStorageAccountConnectionString`. Env is the only place where Azure pipelines agent will resolve and set free the content of the secret variable\r\n\r\n* Secrets cannot be retrieved any more from web interface. Azure Pipelines are designed for this\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/FZlk5.png\r\n  [2]: https://docs.spring.io/spring-boot/docs/2.1.1.RELEASE/reference/html/boot-features-external-config.html","title":"Best practices for Spring boot testing against authenticated remote system","body":"<p>The answer is a bit complex to explain, so I did my best</p>\n<h1>TL;DR</h1>\n<p>Note that the original variable names are redacted and YMMV if you try to recreate the example with the exact keys I used</p>\n<ul>\n<li>Create a secret pipeline variable containing the connection string, and bury* it into the pipeline</li>\n</ul>\n<p>Example name <code>testStorageAccountConnectionString</code></p>\n<p><a href=\"https://i.stack.imgur.com/FZlk5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/FZlk5.png\" alt=\"Pipeline variables\" /></a></p>\n<ul>\n<li>Change the Gradle task</li>\n</ul>\n<pre class=\"lang-yaml prettyprint-override\"><code>              - task: Gradle@3\n                displayName: Build with Gradle\n                inputs:\n                  gradleWrapperFile: gradlew\n                  gradleOptions: -Xmx10240m -XX:+HeapDumpOnOutOfMemoryError -Dfile.encoding=UTF-8 -DAZURE_STORAGE_CONNECTION_STRING=$(AZURE_STORAGE_CONNECTION_STRING)\n                  options: --build-cache -Pci=true -PgitCommitId=$(Build.SourceVersion) -PbuildId=$(Build.BuildId) -Preckon.stage=${{parameters.versionStage}} -Preckon.scope=${{parameters.versionScope}}\n                  jdkVersionOption: 1.11\n                  jdkArchitectureOption: x64\n                  publishJUnitResults: true\n                  sqAnalysisEnabled: true\n                  sqGradlePluginVersionChoice: specify\n                  sqGradlePluginVersion: 3.2.0\n                  testResultsFiles: '$(System.DefaultWorkingDirectory)/build/test-results/**/TEST-*.xml'\n                  tasks: clean build\n                env:\n                 AZURE_STORAGE_CONNECTION_STRING: $(testStorageAccountConnectionString)\n</code></pre>\n<h1>Explanation</h1>\n<ul>\n<li>Spring Boot accepts placeholder <code>${azure.storageConnectionString}</code> from an environment variable <code>AZURE_STORAGE_CONNECTION_STRING</code>. <strong>Please read <a href=\"https://docs.spring.io/spring-boot/docs/2.1.1.RELEASE/reference/html/boot-features-external-config.html\" rel=\"nofollow noreferrer\">the docs</a></strong> and try it locally first. This means we need to run the test with an environment variable propely set in order to resolve the placeholder</li>\n<li>Gradle can run with <code>-D</code> to add an environment variable. <code>-DAZURE_STORAGE_CONNECTION_STRING=$(AZURE_STORAGE_CONNECTION_STRING)</code> adds an environment variable <code>AZURE_STORAGE_CONNECTION_STRING</code> to the test run equal to the <strong>pipeline environment variable</strong> <code>AZURE_STORAGE_CONNECTION_STRING</code> (not that fantasy)</li>\n<li>Azure DevOps pipelines protect secret variables from unwanted access. We created the pipeline variable as secret, so there is another trick to do first</li>\n</ul>\n<p>Gradle's <strong>env</strong> attributes set environment variable for the pipeline container. In this case, we make sure that Gradle runs with <code>AZURE_STORAGE_CONNECTION_STRING</code> set to <code>testStorageAccountConnectionString</code>. Env is the only place where Azure pipelines agent will resolve and set free the content of the secret variable</p>\n<ul>\n<li>Secrets cannot be retrieved any more from web interface. Azure Pipelines are designed for this</li>\n</ul>\n"}],"owner":{"account_id":216151,"reputation":26327,"user_id":471213,"accept_rate":82,"display_name":"usr-local-ΕΨΗΕΛΩΝ"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":846,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":72463255,"answer_count":1,"score":0,"last_activity_date":1654092530,"creation_date":1634226778,"question_id":69573746,"body_markdown":"I have written code that leverages [Azure SDK for Blobs][1] in order to interact with the blob storage.\r\n\r\nAs a clever and dutiful developer, I have **not** tested my code by navigating the *live* application, but rather created a Spring Boot JUnit test and spent a few hours fixing all my mistakes. I didn&#39;t use anyh kind of mocking, in fact, as my problem was using the library the correct way. I ran the code against a **live** instance of a blob storage and checked that all my Java methods worked as expected.\r\n\r\nI am writing here because\r\n\r\n- To call it a day, I hardcoded the credentials in my source files. The repository is a company-private repository, not that harm. Credentials can be rotated, developers can all access from Azure portal and get the credentials. But still I don&#39;t like the idea of pushing credentials into code\r\n- Having these junit tests work on Azure DevOps pipelines *could* be some of a good idea\r\n\r\nI know from the very beginning that hardcoding credentials into code is a worst practice, but since this morning I wanted to focus on my task. Now I want to adopt the *best* practices. I am asking about redesigning the test structure\r\n\r\nTesting code is this.\r\n\r\nThe code creates an ephemeral container and tries to store/retrieve/delete blobs. It uses a GUID to create a unique private workspace, to clear after test is finished.\r\n\r\n\r\n```java\r\n@SpringBootTest(classes = FileRepositoryServiceAzureBlobImplTest.class)\r\n@SpringBootConfiguration\r\n@TestConfiguration\r\n@TestPropertySource(properties = {\r\n        &quot;azure-storage-container-name:amlcbackendjunit&quot;,\r\n        &quot;azure-storage-connection-string:[not going to post it on Stackoverflow before rotating it]&quot;\r\n})\r\nclass FileRepositoryServiceAzureBlobImplTest {\r\n\r\n    private static final Resource LOREM_IPSUM = new ClassPathResource(&quot;loremipsum.txt&quot;, FileRepositoryServiceAzureBlobImplTest.class);\r\n    private FileRepositoryServiceAzureBlobImpl uut;\r\n    private BlobContainerClient blobContainerClient;\r\n    private String loremChecksum;\r\n\r\n    @Value(&quot;${azure-storage-connection-string}&quot;)\r\n    private String azureConnectionString;\r\n    @Value(&quot;${azure-storage-container-name}&quot;)\r\n    private String azureContainerName;\r\n\r\n    @BeforeEach\r\n    void beforeEach() throws IOException {\r\n\r\n        String containerName = azureContainerName + &quot;-&quot; + UUID.randomUUID();\r\n        blobContainerClient = new BlobContainerClientBuilder()\r\n                .httpLogOptions(new HttpLogOptions().setApplicationId(&quot;az-sp-sb-aml&quot;))\r\n                .clientOptions(new ClientOptions().setApplicationId(&quot;az-sp-sb-aml&quot;))\r\n                .connectionString(azureConnectionString)\r\n                .containerName(containerName)\r\n                .buildClient()\r\n        ;\r\n\r\n\r\n        blobContainerClient.create();\r\n        uut = spy(new FileRepositoryServiceAzureBlobImpl(blobContainerClient));\r\n        try (InputStream loremIpsumInputStream = LOREM_IPSUM.getInputStream();) {\r\n            loremChecksum = DigestUtils.sha256Hex(loremIpsumInputStream);\r\n        }\r\n\r\n        blobContainerClient\r\n                .getBlobClient(&quot;fox.txt&quot;)\r\n                .upload(BinaryData.fromString(&quot;The quick brown fox jumps over the lazy dog&quot;));\r\n\r\n    }\r\n\r\n    @AfterEach\r\n    void afterEach() throws IOException {\r\n        blobContainerClient\r\n                .delete();\r\n    }\r\n\r\n    @Test\r\n    void store_ok() {\r\n        String desiredFileName = &quot;loremIpsum.txt&quot;;\r\n\r\n\r\n        FileItemDescriptor output = assertDoesNotThrow(() -&gt; uut.store(LOREM_IPSUM, desiredFileName));\r\n        assertAll(\r\n                () -&gt; assertThat(output, is(notNullValue())),\r\n                () -&gt; assertThat(output, hasProperty(&quot;uri&quot;, hasToString(Matchers.startsWith(&quot;azure-blob://&quot;)))),\r\n                () -&gt; assertThat(output, hasProperty(&quot;size&quot;, equalTo(LOREM_IPSUM.contentLength()))),\r\n                () -&gt; assertThat(output, hasProperty(&quot;checksum&quot;, equalTo(loremChecksum))),\r\n                () -&gt; {\r\n                    String localPart = substringAfter(output.getUri().toString(), &quot;azure-blob://&quot;);\r\n                    assertAll(\r\n                            () -&gt; assertTrue(blobContainerClient.getBlobClient(localPart).exists())\r\n                    );\r\n                }\r\n        );\r\n    }\r\n\r\n}\r\n\r\n```\r\n\r\n**In production** (but also in SIT/UAT), the real Spring Boot application will get the configuration from the Container environment, including the storage connection string. Yes, for this kind of test I could also avoid using Spring and `@TestPropertySource`, because I&#39;m not leveraging any bean from the context.\r\n\r\n## Question\r\n\r\nI want to ask how can I amend this test in order to \r\n\r\n1. Decouple the connection string from code\r\n2. Softly-ignore the test if for some reason the connection string is not present (e.g. developer downloaded the project the first time and wants to kick-start) (note 1)\r\n3. Integrate this test (with a working connection string) from Azure DevOps pipelines, where I can configure virtually any environment variable and such\r\n\r\n\r\nHere is the build job comprised of tests\r\n\r\n```yaml\r\n          - task: Gradle@2\r\n            displayName: Build with Gradle\r\n            inputs:\r\n              gradleWrapperFile: gradlew\r\n              gradleOptions: -Xmx3072m $(gradleJavaProperties)\r\n              options: -Pci=true -PbuildId=$(Build.BuildId) -PreleaseType=${{parameters.releaseType}}\r\n              jdkVersionOption: 1.11\r\n              jdkArchitectureOption: x64\r\n              publishJUnitResults: true\r\n              sqAnalysisEnabled: true\r\n              sqGradlePluginVersionChoice: specify\r\n              sqGradlePluginVersion: 3.2.0\r\n              testResultsFiles: &#39;$(System.DefaultWorkingDirectory)/build/test-results/**/TEST-*.xml&#39;\r\n              tasks: clean build\r\n\r\n```\r\n\r\nNote 1: the live application **can** be kick-started without the storage connection string. It falls back to a local temporary directory.\r\n\r\n\r\n  [1]: https://search.maven.org/artifact/com.azure/azure-storage-blob/12.14.1/jar","title":"Best practices for Spring boot testing against authenticated remote system","body":"<p>I have written code that leverages <a href=\"https://search.maven.org/artifact/com.azure/azure-storage-blob/12.14.1/jar\" rel=\"nofollow noreferrer\">Azure SDK for Blobs</a> in order to interact with the blob storage.</p>\n<p>As a clever and dutiful developer, I have <strong>not</strong> tested my code by navigating the <em>live</em> application, but rather created a Spring Boot JUnit test and spent a few hours fixing all my mistakes. I didn't use anyh kind of mocking, in fact, as my problem was using the library the correct way. I ran the code against a <strong>live</strong> instance of a blob storage and checked that all my Java methods worked as expected.</p>\n<p>I am writing here because</p>\n<ul>\n<li>To call it a day, I hardcoded the credentials in my source files. The repository is a company-private repository, not that harm. Credentials can be rotated, developers can all access from Azure portal and get the credentials. But still I don't like the idea of pushing credentials into code</li>\n<li>Having these junit tests work on Azure DevOps pipelines <em>could</em> be some of a good idea</li>\n</ul>\n<p>I know from the very beginning that hardcoding credentials into code is a worst practice, but since this morning I wanted to focus on my task. Now I want to adopt the <em>best</em> practices. I am asking about redesigning the test structure</p>\n<p>Testing code is this.</p>\n<p>The code creates an ephemeral container and tries to store/retrieve/delete blobs. It uses a GUID to create a unique private workspace, to clear after test is finished.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@SpringBootTest(classes = FileRepositoryServiceAzureBlobImplTest.class)\n@SpringBootConfiguration\n@TestConfiguration\n@TestPropertySource(properties = {\n        &quot;azure-storage-container-name:amlcbackendjunit&quot;,\n        &quot;azure-storage-connection-string:[not going to post it on Stackoverflow before rotating it]&quot;\n})\nclass FileRepositoryServiceAzureBlobImplTest {\n\n    private static final Resource LOREM_IPSUM = new ClassPathResource(&quot;loremipsum.txt&quot;, FileRepositoryServiceAzureBlobImplTest.class);\n    private FileRepositoryServiceAzureBlobImpl uut;\n    private BlobContainerClient blobContainerClient;\n    private String loremChecksum;\n\n    @Value(&quot;${azure-storage-connection-string}&quot;)\n    private String azureConnectionString;\n    @Value(&quot;${azure-storage-container-name}&quot;)\n    private String azureContainerName;\n\n    @BeforeEach\n    void beforeEach() throws IOException {\n\n        String containerName = azureContainerName + &quot;-&quot; + UUID.randomUUID();\n        blobContainerClient = new BlobContainerClientBuilder()\n                .httpLogOptions(new HttpLogOptions().setApplicationId(&quot;az-sp-sb-aml&quot;))\n                .clientOptions(new ClientOptions().setApplicationId(&quot;az-sp-sb-aml&quot;))\n                .connectionString(azureConnectionString)\n                .containerName(containerName)\n                .buildClient()\n        ;\n\n\n        blobContainerClient.create();\n        uut = spy(new FileRepositoryServiceAzureBlobImpl(blobContainerClient));\n        try (InputStream loremIpsumInputStream = LOREM_IPSUM.getInputStream();) {\n            loremChecksum = DigestUtils.sha256Hex(loremIpsumInputStream);\n        }\n\n        blobContainerClient\n                .getBlobClient(&quot;fox.txt&quot;)\n                .upload(BinaryData.fromString(&quot;The quick brown fox jumps over the lazy dog&quot;));\n\n    }\n\n    @AfterEach\n    void afterEach() throws IOException {\n        blobContainerClient\n                .delete();\n    }\n\n    @Test\n    void store_ok() {\n        String desiredFileName = &quot;loremIpsum.txt&quot;;\n\n\n        FileItemDescriptor output = assertDoesNotThrow(() -&gt; uut.store(LOREM_IPSUM, desiredFileName));\n        assertAll(\n                () -&gt; assertThat(output, is(notNullValue())),\n                () -&gt; assertThat(output, hasProperty(&quot;uri&quot;, hasToString(Matchers.startsWith(&quot;azure-blob://&quot;)))),\n                () -&gt; assertThat(output, hasProperty(&quot;size&quot;, equalTo(LOREM_IPSUM.contentLength()))),\n                () -&gt; assertThat(output, hasProperty(&quot;checksum&quot;, equalTo(loremChecksum))),\n                () -&gt; {\n                    String localPart = substringAfter(output.getUri().toString(), &quot;azure-blob://&quot;);\n                    assertAll(\n                            () -&gt; assertTrue(blobContainerClient.getBlobClient(localPart).exists())\n                    );\n                }\n        );\n    }\n\n}\n\n</code></pre>\n<p><strong>In production</strong> (but also in SIT/UAT), the real Spring Boot application will get the configuration from the Container environment, including the storage connection string. Yes, for this kind of test I could also avoid using Spring and <code>@TestPropertySource</code>, because I'm not leveraging any bean from the context.</p>\n<h2>Question</h2>\n<p>I want to ask how can I amend this test in order to</p>\n<ol>\n<li>Decouple the connection string from code</li>\n<li>Softly-ignore the test if for some reason the connection string is not present (e.g. developer downloaded the project the first time and wants to kick-start) (note 1)</li>\n<li>Integrate this test (with a working connection string) from Azure DevOps pipelines, where I can configure virtually any environment variable and such</li>\n</ol>\n<p>Here is the build job comprised of tests</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>          - task: Gradle@2\n            displayName: Build with Gradle\n            inputs:\n              gradleWrapperFile: gradlew\n              gradleOptions: -Xmx3072m $(gradleJavaProperties)\n              options: -Pci=true -PbuildId=$(Build.BuildId) -PreleaseType=${{parameters.releaseType}}\n              jdkVersionOption: 1.11\n              jdkArchitectureOption: x64\n              publishJUnitResults: true\n              sqAnalysisEnabled: true\n              sqGradlePluginVersionChoice: specify\n              sqGradlePluginVersion: 3.2.0\n              testResultsFiles: '$(System.DefaultWorkingDirectory)/build/test-results/**/TEST-*.xml'\n              tasks: clean build\n\n</code></pre>\n<p>Note 1: the live application <strong>can</strong> be kick-started without the storage connection string. It falls back to a local temporary directory.</p>\n"},{"tags":["java","mongodb","scala","unit-testing"],"answers":[{"tags":[],"owner":{"account_id":7276609,"reputation":1,"user_id":5547839,"display_name":"Rai G"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1654092168,"creation_date":1654092168,"answer_id":72463175,"question_id":36295747,"body_markdown":"I was looking for the same thing, and this worked for me:\r\n\r\n```\r\nwhen(database.getCollection[Document](any)(any, any)).thenReturn(collection)","title":"How to mock `TResult DefaultsTo Document` in scala","body":"<p>I was looking for the same thing, and this worked for me:</p>\n<pre><code>when(database.getCollection[Document](any)(any, any)).thenReturn(collection)\n</code></pre>\n"}],"owner":{"account_id":1355300,"reputation":2617,"user_id":1293827,"accept_rate":46,"display_name":"Shurik Agulyansky"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":336,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1654092168,"creation_date":1459288229,"question_id":36295747,"body_markdown":"I am working on a unit test for a small proxy class to scala mondo driver.\r\nOne of the methods I have is getting connection by name from database object:\r\n\r\n    def collection(collectionName: String): MongoCollection[Document] = {\r\n        logger.info(&quot;Getting collection &quot; + collectionName)\r\n        defaultDB.getCollection[Document](collectionName)\r\n      }\r\nwhere `defaultDB` is an instance of `MongoDatabase` class.\r\n\r\nIn my test, I want to mock the method `getCollection` of of `MongoDatabase` class, like so:\r\n\r\n    val collection = mock[MongoCollection[Document]]\r\n    \r\n    val database = mock[MongoDatabase]\r\n    when(database.getCollection[Document](&quot;collection&quot;)).thenReturn(collection)\r\n\r\nThis, of coarse, will return nothing, since the real signature looks like this:\r\n\r\n    def getCollection[TResult](collectionName: String)(implicit e: TResult DefaultsTo Document, ct: ClassTag[TResult]): MongoCollection[TResult]\r\n\r\nSo, we tried mocking the other two implicit arguments:\r\n\r\n    implicit val e = mock[Document DefaultsTo org.mongodb.scala.Document]\r\n          implicit val classTag = mock[ClassTag[Document]]\r\n    \r\n          val collection = mock[MongoCollection[Document]]\r\n    \r\n          val database = mock[MongoDatabase](&quot;collection&quot;)(e, _: ClassTag[Document])\r\n          when(database.getCollection[Document](&quot;collection&quot;)(e, classTag)).thenReturn(collection)\r\n\r\nAnd now, i am getting the following error:\r\n\r\n&gt; [error]  Access to protected object DefaultHelper not permitted\r\n&gt; because [error]  enclosing package mongo is not a subclass of [error] \r\n&gt; package bson in package scala where target is defined [error] import\r\n&gt; org.mongodb.scala.bson.DefaultHelper.DefaultsTo [error]               \r\n&gt; ^ [error] /app/process-street/test/mongo/MongoDriverSpec.scala:61: not\r\n&gt; found: type DefaultsTo [error]       implicit val e = mock[Document\r\n&gt; DefaultsTo org.mongodb.scala.Document]\r\n\r\nAnd in fact, `DefaultHelper` is protected...\r\nIs there any way around this? What are my other options to mock `getConnection` method?\r\n\r\nThanks,","title":"How to mock `TResult DefaultsTo Document` in scala","body":"<p>I am working on a unit test for a small proxy class to scala mondo driver.\nOne of the methods I have is getting connection by name from database object:</p>\n\n<pre><code>def collection(collectionName: String): MongoCollection[Document] = {\n    logger.info(\"Getting collection \" + collectionName)\n    defaultDB.getCollection[Document](collectionName)\n  }\n</code></pre>\n\n<p>where <code>defaultDB</code> is an instance of <code>MongoDatabase</code> class.</p>\n\n<p>In my test, I want to mock the method <code>getCollection</code> of of <code>MongoDatabase</code> class, like so:</p>\n\n<pre><code>val collection = mock[MongoCollection[Document]]\n\nval database = mock[MongoDatabase]\nwhen(database.getCollection[Document](\"collection\")).thenReturn(collection)\n</code></pre>\n\n<p>This, of coarse, will return nothing, since the real signature looks like this:</p>\n\n<pre><code>def getCollection[TResult](collectionName: String)(implicit e: TResult DefaultsTo Document, ct: ClassTag[TResult]): MongoCollection[TResult]\n</code></pre>\n\n<p>So, we tried mocking the other two implicit arguments:</p>\n\n<pre><code>implicit val e = mock[Document DefaultsTo org.mongodb.scala.Document]\n      implicit val classTag = mock[ClassTag[Document]]\n\n      val collection = mock[MongoCollection[Document]]\n\n      val database = mock[MongoDatabase](\"collection\")(e, _: ClassTag[Document])\n      when(database.getCollection[Document](\"collection\")(e, classTag)).thenReturn(collection)\n</code></pre>\n\n<p>And now, i am getting the following error:</p>\n\n<blockquote>\n  <p>[error]  Access to protected object DefaultHelper not permitted\n  because [error]  enclosing package mongo is not a subclass of [error] \n  package bson in package scala where target is defined [error] import\n  org.mongodb.scala.bson.DefaultHelper.DefaultsTo [error]<br>\n  ^ [error] /app/process-street/test/mongo/MongoDriverSpec.scala:61: not\n  found: type DefaultsTo [error]       implicit val e = mock[Document\n  DefaultsTo org.mongodb.scala.Document]</p>\n</blockquote>\n\n<p>And in fact, <code>DefaultHelper</code> is protected...\nIs there any way around this? What are my other options to mock <code>getConnection</code> method?</p>\n\n<p>Thanks,</p>\n"},{"tags":["java","gradle","jacoco","jacoco-plugin"],"owner":{"account_id":4622527,"reputation":371,"user_id":3747182,"accept_rate":25,"display_name":"user3747182"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":189,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1654091801,"creation_date":1654091801,"question_id":72463089,"body_markdown":"I have a grade project and I have excluded certain files from Jacoco reporting. When I run the command `gradle jacocoTestReport`. Below output is shown. \r\n\r\n    Test Coverage:\r\n        - Class Coverage: 84.2%\r\n        - Method Coverage: 80%\r\n        - Branch Coverage: 59.1%\r\n        - Line Coverage: 81.8%\r\n        - Instruction Coverage: 80.8%\r\n        - Complexity Coverage: 62.7%\r\n\r\nBut when i run `gradle build`. I get the below error:-\r\n\r\n    Execution failed for task &#39;:project:jacocoTestCoverageVerification&#39;.\r\n    &gt; Rule violated for bundle project: instructions covered ratio is 0.5, but expected minimum is 0.8\r\n\r\n\r\n**build.gradle:-**\r\n\r\n\r\n    test {\r\n        useJUnitPlatform()\r\n        finalizedBy jacocoTestReport\r\n    }\r\n    \r\n    jacocoTestReport {\r\n        afterEvaluate {\r\n            classDirectories.setFrom(files(classDirectories.files.collect {\r\n                fileTree(dir: it,  exclude: [\r\n                        &quot;com/project/commons/infrastructure/**&quot;\r\n                ])\r\n            }))\r\n        }\r\n        finalizedBy jacocoTestCoverageVerification\r\n    }\r\n    \r\n    jacocoTestCoverageVerification {\r\n        violationRules {\r\n            rule {\r\n                limit {\r\n                    minimum = 0.8\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n\r\nCan anyone please tell me why is there a discrepancy ?","title":"Discrepancy in Jacoco test report","body":"<p>I have a grade project and I have excluded certain files from Jacoco reporting. When I run the command <code>gradle jacocoTestReport</code>. Below output is shown.</p>\n<pre><code>Test Coverage:\n    - Class Coverage: 84.2%\n    - Method Coverage: 80%\n    - Branch Coverage: 59.1%\n    - Line Coverage: 81.8%\n    - Instruction Coverage: 80.8%\n    - Complexity Coverage: 62.7%\n</code></pre>\n<p>But when i run <code>gradle build</code>. I get the below error:-</p>\n<pre><code>Execution failed for task ':project:jacocoTestCoverageVerification'.\n&gt; Rule violated for bundle project: instructions covered ratio is 0.5, but expected minimum is 0.8\n</code></pre>\n<p><strong>build.gradle:-</strong></p>\n<pre><code>test {\n    useJUnitPlatform()\n    finalizedBy jacocoTestReport\n}\n\njacocoTestReport {\n    afterEvaluate {\n        classDirectories.setFrom(files(classDirectories.files.collect {\n            fileTree(dir: it,  exclude: [\n                    &quot;com/project/commons/infrastructure/**&quot;\n            ])\n        }))\n    }\n    finalizedBy jacocoTestCoverageVerification\n}\n\njacocoTestCoverageVerification {\n    violationRules {\n        rule {\n            limit {\n                minimum = 0.8\n            }\n        }\n    }\n}\n</code></pre>\n<p>Can anyone please tell me why is there a discrepancy ?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":9531412,"reputation":2010,"user_id":7082956,"display_name":"Valerij Dobler"},"score":2,"creation_date":1654079322,"post_id":72460262,"comment_id":128004926,"body_markdown":"Think about what happens for one single pixel. And what you have to consider when rotating non-square images.","body":"Think about what happens for one single pixel. And what you have to consider when rotating non-square images."},{"owner":{"account_id":16769737,"reputation":1501,"user_id":12122460,"display_name":"kotatsuyaki"},"score":0,"creation_date":1654170008,"post_id":72460262,"comment_id":128029993,"body_markdown":"Does this answer your question? [Rotating a NxN matrix in Java](https://stackoverflow.com/questions/25882480/rotating-a-nxn-matrix-in-java)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/25882480/rotating-a-nxn-matrix-in-java\">Rotating a NxN matrix in Java</a>"}],"answers":[{"tags":[],"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1654091790,"creation_date":1654091436,"answer_id":72463004,"question_id":72460262,"body_markdown":"Here is one way to do it.  There  may be better ways using an `AffineTransForm`.  This method does not explicitly rotate the source image but rotates the target graphics context, and then writes the image to that.\r\n- read in the source image. In this case into `buf`.\r\n- extract the dimensions.\r\n- create the target rotated `BufferedImage` (`output`) reversing the source dimensions and copying the image type (`JPEG, PNG, etc`).\r\n- Now get the graphics context for the `output` image.\r\n- Since you want to rotate about the center, translate to the target center anchors and then rotate in `radians` to `90 degrees (Math.PI/2`).\r\n- Now get ready to write the source image (`buf`) into the rotated context of (`output`).  However, the anchors need to be retranslated to the starting position for the source file (`buf`). So translate back but reverse the width and height anchors to match the width and height of the source file.\r\n- then draw the original image (`buf`) into the context rotated buffered image (`output`).\r\n- And write the rotated image (`output`) to the file system\r\n```\r\n\r\ntry {\r\n\tBufferedImage buf =\r\n\t\t\tImageIO.read(new File(&quot;f:/sourceImage.jpg&quot;));\r\n\tint width = buf.getWidth();\r\n\tint height = buf.getHeight();\r\n\tBufferedImage output = new BufferedImage(height, width, buf.getType());\r\n\t\r\n\tGraphics2D g2d = (Graphics2D)output.getGraphics();\r\n\tg2d.translate(height/2., width/2.);\r\n\tg2d.rotate(Math.PI/2);\r\n\tg2d.translate(-width/2., -height/2.);\r\n\tg2d.drawImage(buf, 0,0,width, height,null);\r\n\tImageIO.write(output, &quot;JPEG&quot;, new File(&quot;f:/rotatedImage.jpg&quot;));\r\n} catch (Exception e) {\r\n\te.printStackTrace();\r\n}","title":"Java how to rotate an image by 90 degrees?","body":"<p>Here is one way to do it.  There  may be better ways using an <code>AffineTransForm</code>.  This method does not explicitly rotate the source image but rotates the target graphics context, and then writes the image to that.</p>\n<ul>\n<li>read in the source image. In this case into <code>buf</code>.</li>\n<li>extract the dimensions.</li>\n<li>create the target rotated <code>BufferedImage</code> (<code>output</code>) reversing the source dimensions and copying the image type (<code>JPEG, PNG, etc</code>).</li>\n<li>Now get the graphics context for the <code>output</code> image.</li>\n<li>Since you want to rotate about the center, translate to the target center anchors and then rotate in <code>radians</code> to <code>90 degrees (Math.PI/2</code>).</li>\n<li>Now get ready to write the source image (<code>buf</code>) into the rotated context of (<code>output</code>).  However, the anchors need to be retranslated to the starting position for the source file (<code>buf</code>). So translate back but reverse the width and height anchors to match the width and height of the source file.</li>\n<li>then draw the original image (<code>buf</code>) into the context rotated buffered image (<code>output</code>).</li>\n<li>And write the rotated image (<code>output</code>) to the file system</li>\n</ul>\n<pre><code>\ntry {\n    BufferedImage buf =\n            ImageIO.read(new File(&quot;f:/sourceImage.jpg&quot;));\n    int width = buf.getWidth();\n    int height = buf.getHeight();\n    BufferedImage output = new BufferedImage(height, width, buf.getType());\n    \n    Graphics2D g2d = (Graphics2D)output.getGraphics();\n    g2d.translate(height/2., width/2.);\n    g2d.rotate(Math.PI/2);\n    g2d.translate(-width/2., -height/2.);\n    g2d.drawImage(buf, 0,0,width, height,null);\n    ImageIO.write(output, &quot;JPEG&quot;, new File(&quot;f:/rotatedImage.jpg&quot;));\n} catch (Exception e) {\n    e.printStackTrace();\n}\n</code></pre>\n"}],"owner":{"account_id":25444299,"reputation":1,"user_id":19246695,"display_name":"Max M"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":262,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1654091790,"creation_date":1654079218,"question_id":72460262,"body_markdown":"\r\n```java\r\npublic void rotateImage90(){\r\n    this.redisplayImage();\r\n\r\n    for (int x = 0; x &lt; this.image.length; x++)\r\n        for (int y = 0; y &lt; this.image[0].length; y++){\r\n            this.image[x][y] = this.image[this.image.length-1-x][y];\r\n    }\r\n}\r\n```\r\n\r\nI dont know what to do from here to rotate an image 90 degrees. Please help if u can\r\n\r\n\r\n","title":"Java how to rotate an image by 90 degrees?","body":"<pre class=\"lang-java prettyprint-override\"><code>public void rotateImage90(){\n    this.redisplayImage();\n\n    for (int x = 0; x &lt; this.image.length; x++)\n        for (int y = 0; y &lt; this.image[0].length; y++){\n            this.image[x][y] = this.image[this.image.length-1-x][y];\n    }\n}\n</code></pre>\n<p>I dont know what to do from here to rotate an image 90 degrees. Please help if u can</p>\n"},{"tags":["c#","java","hash","hmac","sha512"],"comments":[{"owner":{"account_id":385945,"reputation":936,"user_id":743414,"display_name":"user743414"},"score":0,"creation_date":1400072553,"post_id":23655462,"comment_id":36332964,"body_markdown":"Depends on what do you want to archieve. If you want to secure hash passwords you should read this: https://crackstation.net/hashing-security.htm","body":"Depends on what do you want to archieve. If you want to secure hash passwords you should read this: <a href=\"https://crackstation.net/hashing-security.htm\" rel=\"nofollow noreferrer\">crackstation.net/hashing-security.htm</a>"},{"owner":{"account_id":4468357,"reputation":53,"user_id":3635271,"display_name":"user3635271"},"score":0,"creation_date":1400072963,"post_id":23655462,"comment_id":36333262,"body_markdown":"i am giving json object as input and secret key.","body":"i am giving json object as input and secret key."},{"owner":{"account_id":385945,"reputation":936,"user_id":743414,"display_name":"user743414"},"score":0,"creation_date":1400073564,"post_id":23655462,"comment_id":36333732,"body_markdown":"Then it looks good, btw. I&#39;m not a java expert. And what do you want to do? You want to hash a password and later check if a given password is correct? If so I would strongly advice to change that code.","body":"Then it looks good, btw. I&#39;m not a java expert. And what do you want to do? You want to hash a password and later check if a given password is correct? If so I would strongly advice to change that code."},{"owner":{"account_id":4468357,"reputation":53,"user_id":3635271,"display_name":"user3635271"},"score":0,"creation_date":1400074278,"post_id":23655462,"comment_id":36334293,"body_markdown":"No, i am not doing anything with password. i am adding hash value to http request header. later encryption doing. i have edited code in c#.","body":"No, i am not doing anything with password. i am adding hash value to http request header. later encryption doing. i have edited code in c#."}],"answers":[{"tags":[],"owner":{"account_id":2927086,"reputation":70,"user_id":2508175,"display_name":"Rkalkani"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1428092567,"creation_date":1428092567,"answer_id":29439159,"question_id":23655462,"body_markdown":"Both java and C# code are giving same result(same hash code). You should check again.\r\n\r\nReplace following line in java code at end\r\n\r\n    result = Base64.getEncoder().encodeToString(mac_data);\r\n\r\n","title":"Hash value generation using hmac/sha512 in java and c#","body":"<p>Both java and C# code are giving same result(same hash code). You should check again.</p>\n\n<p>Replace following line in java code at end</p>\n\n<pre><code>result = Base64.getEncoder().encodeToString(mac_data);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4715748,"reputation":159,"user_id":3814929,"display_name":"user3814929"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1537884930,"creation_date":1537884930,"answer_id":52500347,"question_id":23655462,"body_markdown":"With different C# encoding\r\n\r\n    public static string SHA512_ComputeHash(string text, string secretKey)\r\n    {\r\n\t    var hash = new StringBuilder(); ;\r\n\t    byte[] secretkeyBytes = Encoding.UTF8.GetBytes(secretKey);\r\n\t    byte[] inputBytes = Encoding.UTF8.GetBytes(text);\r\n\t    using (var hmac = new HMACSHA512(secretkeyBytes))\r\n\t    {\r\n\t\t    byte[] hashValue = hmac.ComputeHash(inputBytes);\r\n\t\t    foreach (var theByte in hashValue)\r\n\t\t    {\r\n\t\t\t    hash.Append(theByte.ToString(&quot;x2&quot;));\r\n\t\t    }\r\n\t    }\r\n\r\n\t    return hash.ToString();\r\n    }","title":"Hash value generation using hmac/sha512 in java and c#","body":"<p>With different C# encoding</p>\n\n<pre><code>public static string SHA512_ComputeHash(string text, string secretKey)\n{\n    var hash = new StringBuilder(); ;\n    byte[] secretkeyBytes = Encoding.UTF8.GetBytes(secretKey);\n    byte[] inputBytes = Encoding.UTF8.GetBytes(text);\n    using (var hmac = new HMACSHA512(secretkeyBytes))\n    {\n        byte[] hashValue = hmac.ComputeHash(inputBytes);\n        foreach (var theByte in hashValue)\n        {\n            hash.Append(theByte.ToString(\"x2\"));\n        }\n    }\n\n    return hash.ToString();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17583670,"reputation":1,"user_id":12756884,"display_name":"muhammadumair"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1654091612,"creation_date":1654091425,"answer_id":72463001,"question_id":23655462,"body_markdown":"In c#    \r\n\r\n    public static string HMACSHA512(this string Key, string TextToHash)\r\n            {\r\n                string HmacHashed = &quot;&quot;;\r\n                if (string.IsNullOrEmpty(Key))\r\n                    throw new ArgumentNullException(&quot;HMACSHA512: Key&quot;, &quot;Parameter cannot be empty.&quot;);\r\n                if (string.IsNullOrEmpty(TextToHash))\r\n                    throw new ArgumentNullException(&quot;HMACSHA512: TextToHash&quot;, &quot;Parameter cannot be empty.&quot;);\r\n                if (Key.Length % 2 != 0 || Key.Trim().Length &lt; 2)\r\n                {\r\n                    throw new ArgumentNullException(&quot;HMACSHA512: Key&quot;, &quot;Parameter cannot be odd or less than 2 characters.&quot;);\r\n                }\r\n                try\r\n                {\r\n                    using (var HMACSHA512 = new HMACSHA512(Encoding.ASCII.GetBytes(Key)))\r\n                    {\r\n                        HmacHashed = BitConverter.ToString(HMACSHA512.ComputeHash(Encoding.ASCII.GetBytes(TextToHash))).Replace(&quot;-&quot;, string.Empty);\r\n                    }\r\n                    return HmacHashed;\r\n                }\r\n                catch (Exception ex)\r\n                {\r\n                    throw new Exception(&quot;HMACSHA512: &quot; + ex.Message);\r\n                }\r\n            }","title":"Hash value generation using hmac/sha512 in java and c#","body":"<p>In c#</p>\n<pre><code>public static string HMACSHA512(this string Key, string TextToHash)\n        {\n            string HmacHashed = &quot;&quot;;\n            if (string.IsNullOrEmpty(Key))\n                throw new ArgumentNullException(&quot;HMACSHA512: Key&quot;, &quot;Parameter cannot be empty.&quot;);\n            if (string.IsNullOrEmpty(TextToHash))\n                throw new ArgumentNullException(&quot;HMACSHA512: TextToHash&quot;, &quot;Parameter cannot be empty.&quot;);\n            if (Key.Length % 2 != 0 || Key.Trim().Length &lt; 2)\n            {\n                throw new ArgumentNullException(&quot;HMACSHA512: Key&quot;, &quot;Parameter cannot be odd or less than 2 characters.&quot;);\n            }\n            try\n            {\n                using (var HMACSHA512 = new HMACSHA512(Encoding.ASCII.GetBytes(Key)))\n                {\n                    HmacHashed = BitConverter.ToString(HMACSHA512.ComputeHash(Encoding.ASCII.GetBytes(TextToHash))).Replace(&quot;-&quot;, string.Empty);\n                }\n                return HmacHashed;\n            }\n            catch (Exception ex)\n            {\n                throw new Exception(&quot;HMACSHA512: &quot; + ex.Message);\n            }\n        }\n</code></pre>\n"}],"owner":{"account_id":4468357,"reputation":53,"user_id":3635271,"display_name":"user3635271"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":16220,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":29439159,"answer_count":3,"score":4,"last_activity_date":1654091612,"creation_date":1400072339,"question_id":23655462,"body_markdown":"in c#\r\n\r\n    public static string HashToString(string message, byte[] key)\r\n    \r\n    {\r\n    \r\n      byte[] b=new HMACSHA512(key).ComputeHash(Encoding.UTF8.GetBytes(message));\r\n    \r\n      return Convert.ToBase64String(b);\r\n    \r\n    }\r\n client.DefaultRequestHeaders.Add(&quot;X-Hash&quot;, hash);\r\n\r\n  var encryptedContent = DataMotion.Security.Encrypt(key, Convert.FromBase64String(iv),  serializedModel);\r\n\r\n  var request = client.PostAsync(ApiUrlTextBox.Text,encryptedContent,new JsonMediaTypeFormatter());\r\n\r\n\r\nin java:\r\n\r\n    protected String hashToString(String serializedModel, byte[] key) {\r\n     \r\n    String result = null;\r\n    \r\n    Mac sha512_HMAC;\r\n     \r\n    try {\r\n\r\n\t  sha512_HMAC = Mac.getInstance(&quot;HmacSHA512&quot;);\t\t\r\n\r\n\t  SecretKeySpec secretkey = new SecretKeySpec(key, &quot;HmacSHA512&quot;);\r\n\r\n\t  sha512_HMAC.init(secretkey);\r\n \r\n       byte[] mac_data = sha512_HMAC.doFinal(serializedModel.getBytes(&quot;UTF-8&quot;));\t\t\r\n\r\n       result = Base64.encodeBase64String(mac_data);\r\n\r\n\t}catch(Exception e){\r\n\t}\r\n\t}\r\n\r\no/p: ye+AZPqaKrU14pui4U5gBCiAbegNvLVjzVdGK3rwG9QVzqKfIgyWBDTncORkNND3DA8jPba5xmC7B5OUwZEKlQ==\r\n\r\ni have written hashtostring method in java based on c# code. is this currect? (output is different because every time process is dynamic in both cases.)","title":"Hash value generation using hmac/sha512 in java and c#","body":"<p>in c#</p>\n\n<pre><code>public static string HashToString(string message, byte[] key)\n\n{\n\n  byte[] b=new HMACSHA512(key).ComputeHash(Encoding.UTF8.GetBytes(message));\n\n  return Convert.ToBase64String(b);\n\n}\n</code></pre>\n\n<p>client.DefaultRequestHeaders.Add(\"X-Hash\", hash);</p>\n\n<p>var encryptedContent = DataMotion.Security.Encrypt(key, Convert.FromBase64String(iv),  serializedModel);</p>\n\n<p>var request = client.PostAsync(ApiUrlTextBox.Text,encryptedContent,new JsonMediaTypeFormatter());</p>\n\n<p>in java:</p>\n\n<pre><code>protected String hashToString(String serializedModel, byte[] key) {\n\nString result = null;\n\nMac sha512_HMAC;\n\ntry {\n\n  sha512_HMAC = Mac.getInstance(\"HmacSHA512\");      \n\n  SecretKeySpec secretkey = new SecretKeySpec(key, \"HmacSHA512\");\n\n  sha512_HMAC.init(secretkey);\n\n   byte[] mac_data = sha512_HMAC.doFinal(serializedModel.getBytes(\"UTF-8\"));        \n\n   result = Base64.encodeBase64String(mac_data);\n\n}catch(Exception e){\n}\n}\n</code></pre>\n\n<p>o/p: ye+AZPqaKrU14pui4U5gBCiAbegNvLVjzVdGK3rwG9QVzqKfIgyWBDTncORkNND3DA8jPba5xmC7B5OUwZEKlQ==</p>\n\n<p>i have written hashtostring method in java based on c# code. is this currect? (output is different because every time process is dynamic in both cases.)</p>\n"},{"tags":["java","class","javac"],"comments":[{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":1,"creation_date":1654087436,"post_id":72462093,"comment_id":128007860,"body_markdown":"Does this answer your question? [How do I run a Java class in a package?](https://stackoverflow.com/questions/11032590/how-do-i-run-a-java-class-in-a-package)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/11032590/how-do-i-run-a-java-class-in-a-package\">How do I run a Java class in a package?</a>"},{"owner":{"account_id":7317124,"reputation":205,"user_id":5586458,"accept_rate":67,"display_name":"Marcelo de Sousa"},"score":0,"creation_date":1654087760,"post_id":72462093,"comment_id":128007976,"body_markdown":"I had already seen this question, my biggest question is how the class principal will read the .txt file","body":"I had already seen this question, my biggest question is how the class principal will read the .txt file"},{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":0,"creation_date":1654087830,"post_id":72462093,"comment_id":128008006,"body_markdown":"I&#39;m not sure I understand what you mean by this last comment (meaning, how it relates with the problem at hand)","body":"I&#39;m not sure I understand what you mean by this last comment (meaning, how it relates with the problem at hand)"},{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":3,"creation_date":1654087944,"post_id":72462093,"comment_id":128008046,"body_markdown":"Your error has nothing to do with reading the text file, as your program is not even reaching that point. The program is failing to even launch because the main class you specified is not being found. Fix that before worrying about reading the text file.","body":"Your error has nothing to do with reading the text file, as your program is not even reaching that point. The program is failing to even launch because the main class you specified is not being found. Fix that before worrying about reading the text file."},{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1654088920,"post_id":72462093,"comment_id":128008334,"body_markdown":"As an aside, using `&lt; file.txt` redirects the standard input stream to that file. So, you would read that text file via `System.in`. If you meant to pass the path to the file as an _argument_ then get rid of the `&lt;`. Though note the `Scanner(String)` constructor scans the given `String`, it does not interpret the string as a file path and open a file (there are other constructors that accept files/paths).","body":"As an aside, using <code>&lt; file.txt</code> redirects the standard input stream to that file. So, you would read that text file via <code>System.in</code>. If you meant to pass the path to the file as an <i>argument</i> then get rid of the <code>&lt;</code>. Though note the <code>Scanner(String)</code> constructor scans the given <code>String</code>, it does not interpret the string as a file path and open a file (there are other constructors that accept files/paths)."},{"owner":{"account_id":7317124,"reputation":205,"user_id":5586458,"accept_rate":67,"display_name":"Marcelo de Sousa"},"score":0,"creation_date":1654089311,"post_id":72462093,"comment_id":128008501,"body_markdown":"@Slaw I changed it as per your comment. Is it correct now?","body":"@Slaw I changed it as per your comment. Is it correct now?"},{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1654089692,"post_id":72462093,"comment_id":128008656,"body_markdown":"Possibly. But you still have your original problem, which seems similar to [How to fix NoClassDefFoundError?](https://stackoverflow.com/q/67808023/6395627).","body":"Possibly. But you still have your original problem, which seems similar to <a href=\"https://stackoverflow.com/q/67808023/6395627\">How to fix NoClassDefFoundError?</a>."},{"owner":{"account_id":7317124,"reputation":205,"user_id":5586458,"accept_rate":67,"display_name":"Marcelo de Sousa"},"score":0,"creation_date":1654090698,"post_id":72462093,"comment_id":128009035,"body_markdown":"@slaw I&#39;m new to Java, and I tried to follow the instructions, but honestly I couldn&#39;t generalize the solution to multiple files.","body":"@slaw I&#39;m new to Java, and I tried to follow the instructions, but honestly I couldn&#39;t generalize the solution to multiple files."},{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":1,"creation_date":1654099094,"post_id":72462093,"comment_id":128012405,"body_markdown":"In your case, try `javac -d . Bag.java Graph.java DirectedDFS.java principal.java` followed by `java graph.principle &lt; tinyG.txt`.","body":"In your case, try <code>javac -d . Bag.java Graph.java DirectedDFS.java principal.java</code> followed by <code>java graph.principle &lt; tinyG.txt</code>."},{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":1,"creation_date":1654099165,"post_id":72462093,"comment_id":128012431,"body_markdown":"And I recommend you research how to organize Java source files (i.e., create a directory structure that mirrors the package structure). I also recommend you stop trying to compile and execute Java on the command line and instead use an IDE (e.g., IntelliJ, Eclipse, NetBeans, etc.) to do the same (or even a build tool such as Maven or Gradle, though those are more advanced topics).","body":"And I recommend you research how to organize Java source files (i.e., create a directory structure that mirrors the package structure). I also recommend you stop trying to compile and execute Java on the command line and instead use an IDE (e.g., IntelliJ, Eclipse, NetBeans, etc.) to do the same (or even a build tool such as Maven or Gradle, though those are more advanced topics)."}],"answers":[{"tags":[],"owner":{"account_id":5627822,"reputation":64,"user_id":4455654,"display_name":"Vladislav Daniel Kovalevsky"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1654091576,"creation_date":1654091576,"answer_id":72463035,"question_id":72462093,"body_markdown":"As it was mentioned in comments &lt; redirects the standard input stream to file. So you should use \r\n\r\n`Scanner in = new Scanner(System.in);`\r\n\r\nand also to run program from command line you should be in folder that contains folder named graph and you need to specify package:\r\n\r\n    java graph.principal &lt; tinyG.txt","title":"Multiples classes in java","body":"<p>As it was mentioned in comments &lt; redirects the standard input stream to file. So you should use</p>\n<p><code>Scanner in = new Scanner(System.in);</code></p>\n<p>and also to run program from command line you should be in folder that contains folder named graph and you need to specify package:</p>\n<pre><code>java graph.principal &lt; tinyG.txt\n</code></pre>\n"}],"owner":{"account_id":7317124,"reputation":205,"user_id":5586458,"accept_rate":67,"display_name":"Marcelo de Sousa"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":73,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"accepted_answer_id":72463035,"answer_count":1,"score":-1,"last_activity_date":1654091576,"creation_date":1654087296,"question_id":72462093,"body_markdown":"I&#39;m new in Java, need to compile 4 files in the same directory, for this, in my command line, I typed:\r\n  \r\n`javac Bag.java Graph.java DirectedDFS.java principal.java`\r\n\r\nThe code compile, then I try to run my file, call tinyG.txt, in class principal.java, for this, i run in my command line: \r\n\r\n`java principal &lt; tinyG.txt`\r\n\r\nbut appear the error:  \r\n\r\n`java.lang.NoClassDefFoundError: graph/principal (wrong name: principal)`\r\n\r\ngraph it&#39;s my package. My biggest question is how the class principal will read the .txt file\r\n\r\nThis is my principal class: \r\n\r\n    package graph;\r\n    \r\n    import java.util.Scanner;\r\n    \r\n    import graph.Bag;\r\n    import graph.Graph;\r\n    import graph.DirectedDFS;\r\n    \r\n    public class principal {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\t// TODO Auto-generated method stub\r\n    \t\tScanner in = new Scanner(System.in);\r\n            Graph G = new Graph(in);\r\n    \r\n            // read in sources from command-line arguments\r\n            Bag&lt;Integer&gt; sources = new Bag&lt;Integer&gt;();\r\n            while (in.hasNext()) {\r\n                int s = in.nextInt();\r\n                sources.add(s);\r\n            }\r\n            \r\n            in.close();\r\n    \r\n            DirectedDFS dfs = new DirectedDFS(G, sources);\r\n    \r\n            // print out vertices reachable from sources\r\n            for (int v = 0; v &lt; G.V(); v++) {\r\n                if (dfs.marked(v)) System.out.print(v + &quot; &quot;);\r\n            }\r\n            System.out.println();\r\n        }\r\n    }\r\n\r\n \r\nHow i fix this? ","title":"Multiples classes in java","body":"<p>I'm new in Java, need to compile 4 files in the same directory, for this, in my command line, I typed:</p>\n<p><code>javac Bag.java Graph.java DirectedDFS.java principal.java</code></p>\n<p>The code compile, then I try to run my file, call tinyG.txt, in class principal.java, for this, i run in my command line:</p>\n<p><code>java principal &lt; tinyG.txt</code></p>\n<p>but appear the error:</p>\n<p><code>java.lang.NoClassDefFoundError: graph/principal (wrong name: principal)</code></p>\n<p>graph it's my package. My biggest question is how the class principal will read the .txt file</p>\n<p>This is my principal class:</p>\n<pre><code>package graph;\n\nimport java.util.Scanner;\n\nimport graph.Bag;\nimport graph.Graph;\nimport graph.DirectedDFS;\n\npublic class principal {\n\n    public static void main(String[] args) {\n        // TODO Auto-generated method stub\n        Scanner in = new Scanner(System.in);\n        Graph G = new Graph(in);\n\n        // read in sources from command-line arguments\n        Bag&lt;Integer&gt; sources = new Bag&lt;Integer&gt;();\n        while (in.hasNext()) {\n            int s = in.nextInt();\n            sources.add(s);\n        }\n        \n        in.close();\n\n        DirectedDFS dfs = new DirectedDFS(G, sources);\n\n        // print out vertices reachable from sources\n        for (int v = 0; v &lt; G.V(); v++) {\n            if (dfs.marked(v)) System.out.print(v + &quot; &quot;);\n        }\n        System.out.println();\n    }\n}\n</code></pre>\n<p>How i fix this?</p>\n"},{"tags":["java","arrays","oop"],"comments":[{"owner":{"account_id":8362430,"reputation":856,"user_id":6280255,"display_name":"Just another Java programmer"},"score":0,"creation_date":1654091002,"post_id":72462826,"comment_id":128009139,"body_markdown":"Create an interface Book, that you let all your classes implement. Declare the array: Book[] books;","body":"Create an interface Book, that you let all your classes implement. Declare the array: Book[] books;"},{"owner":{"account_id":8362430,"reputation":856,"user_id":6280255,"display_name":"Just another Java programmer"},"score":0,"creation_date":1654091094,"post_id":72462826,"comment_id":128009170,"body_markdown":"In the Book interface, put some common methods there, that all of your classes need, for example: getTitle(), getAuthor().","body":"In the Book interface, put some common methods there, that all of your classes need, for example: getTitle(), getAuthor()."},{"owner":{"account_id":10455291,"reputation":1835,"user_id":7707631,"display_name":"Stefan Warminski"},"score":0,"creation_date":1654091695,"post_id":72462826,"comment_id":128009406,"body_markdown":"Get rid of these old arrays. Use `List` instead - or another `Collection` but `List` comes close to arrays i. e. `ArrayList` which uses an array internally. But you don&#39;t have to handle the problem, that the size of an array cannot be changed.","body":"Get rid of these old arrays. Use <code>List</code> instead - or another <code>Collection</code> but <code>List</code> comes close to arrays i. e. <code>ArrayList</code> which uses an array internally. But you don&#39;t have to handle the problem, that the size of an array cannot be changed."}],"answers":[{"tags":[],"owner":{"account_id":16125470,"reputation":253,"user_id":11640307,"display_name":"Siva Rahul"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1654091147,"creation_date":1654091147,"answer_id":72462924,"question_id":72462826,"body_markdown":"You can Interfaces, Define List&lt;the interface you created&gt; and can add objects of the classes those implement the interface.\r\n\r\nSample code ::\r\n```\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\npublic class InterfaceExplanation {\r\n    public static void main(String[] args) {\r\n        List&lt;Parent&gt; children = new ArrayList&lt;&gt;();\r\n        children.add(new Child1());\r\n        children.add(new Child2());\r\n\r\n        children.forEach(child -&gt; System.out.println(child.getTitle()));\r\n    }\r\n}\r\n\r\ninterface Parent {\r\n    String getTitle();\r\n}\r\n\r\nclass Child1 implements Parent {\r\n    @Override\r\n    public String getTitle() {\r\n        return &quot;Child1&quot;;\r\n    }\r\n}\r\n\r\nclass Child2 implements Parent {\r\n    @Override\r\n    public String getTitle() {\r\n        return &quot;Child2&quot;;\r\n    }\r\n}\r\n```","title":"Filling an array with objects of different classes","body":"<p>You can Interfaces, Define List and can add objects of the classes those implement the interface.</p>\n<p>Sample code ::</p>\n<pre><code>import java.util.ArrayList;\nimport java.util.List;\n\npublic class InterfaceExplanation {\n    public static void main(String[] args) {\n        List&lt;Parent&gt; children = new ArrayList&lt;&gt;();\n        children.add(new Child1());\n        children.add(new Child2());\n\n        children.forEach(child -&gt; System.out.println(child.getTitle()));\n    }\n}\n\ninterface Parent {\n    String getTitle();\n}\n\nclass Child1 implements Parent {\n    @Override\n    public String getTitle() {\n        return &quot;Child1&quot;;\n    }\n}\n\nclass Child2 implements Parent {\n    @Override\n    public String getTitle() {\n        return &quot;Child2&quot;;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":401843,"reputation":89788,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1654091254,"creation_date":1654091254,"answer_id":72462957,"question_id":72462826,"body_markdown":"&gt; I&#39;m not sure how to declare and initialize the (empty) array, so that then I can create a method where I can add new titles to the array.\r\n\r\nArrays in java cannot grow or shrink. You pick a size when you make them and that&#39;s that. At best, you can take a _variable_ (which points at an object, it isn&#39;t the same thing as the object), and then perform this song and dance routine:\r\n\r\n* Make a second, new array that is larger or smaller.\r\n* Copy elements from the first array to the newly created array.\r\n* Update the variable to point at the new array.\r\n\r\nWhich feels like &#39;resizing&#39; an array but that&#39;s not really what you&#39;re doing: You are making a new pre-sized array (with a different size) and then just updating your address book, so to speak.\r\n\r\nIn general, you should not be using arrays in the first place. Use a `List&lt;FictionBook&gt;`; lists can grow and shrink and have all sorts of useful operations for them.\r\n\r\nOther hints:\r\n\r\n* `class FictionBooks` is incorrect. You&#39;d want `class FictionBook`.\r\n* If you want to store fiction books, movies, _and_ newspapers into a single array or list, then this makes no sense unless there&#39;s something they have in common. If they have something in common, create a type hierarchy:\r\n\r\n```\r\nabstract class Media {}\r\n\r\nclass FictionBook extends Media {}\r\n\r\nclass Newspaper extends Media {}\r\n\r\n// and so on\r\n```\r\n\r\nand then you can have a `List&lt;Media&gt; media = new ArrayList&lt;&gt;();`, and e.g. call `media.add(new Newspaper())` and it&#39;ll compile fine.\r\n\r\nI can tell you: Hey, there&#39;s this fruit basket and its filled with fruit!\r\n\r\nThat sentence makes sense to you, right? So you walk over to the table and there&#39;s the basket. It&#39;s got an apple, a banana, a pear, an orange... that&#39;s fine too, right? Nothing surprising there.\r\n\r\nThat&#39;s what&#39;s happening here: `Media` is like `Fruit`, and `Newspaper` is like `Banana`:\r\n\r\n```\r\nclass Banana extends Fruit {}\r\n```\r\n\r\nis you saying in programming terms: There&#39;s this concept, called banana. It&#39;s like the entry of &#39;banana&#39; in a encyclopedia. You can&#39;t eat it.\r\n\r\n```\r\nBanana banana = new Banana();\r\n```\r\n\r\nThis makes an actual banana (you can eat it), it also declares a variable named `banana`, restricts this variable to be capable of only pointing at bananas (or nothing), and then updates the variable to contain instructions to find the banana.\r\n\r\nYou could say `Fruit fruit = new Banana();` just the same: All bananas are fruit, so whateever you can do with fruit, you can do with a banana. Hence, that&#39;s fine.\r\n\r\nIf you insist on using arrays, the same principle applies:\r\n\r\n```\r\nMedia[] library = new Media[10];\r\nlibrary[0] = new Newspaper();\r\nlibrary[1] = new FictionBook();\r\n```\r\n\r\nThat&#39;s will all compile and run just fine.\r\n","title":"Filling an array with objects of different classes","body":"<blockquote>\n<p>I'm not sure how to declare and initialize the (empty) array, so that then I can create a method where I can add new titles to the array.</p>\n</blockquote>\n<p>Arrays in java cannot grow or shrink. You pick a size when you make them and that's that. At best, you can take a <em>variable</em> (which points at an object, it isn't the same thing as the object), and then perform this song and dance routine:</p>\n<ul>\n<li>Make a second, new array that is larger or smaller.</li>\n<li>Copy elements from the first array to the newly created array.</li>\n<li>Update the variable to point at the new array.</li>\n</ul>\n<p>Which feels like 'resizing' an array but that's not really what you're doing: You are making a new pre-sized array (with a different size) and then just updating your address book, so to speak.</p>\n<p>In general, you should not be using arrays in the first place. Use a <code>List&lt;FictionBook&gt;</code>; lists can grow and shrink and have all sorts of useful operations for them.</p>\n<p>Other hints:</p>\n<ul>\n<li><code>class FictionBooks</code> is incorrect. You'd want <code>class FictionBook</code>.</li>\n<li>If you want to store fiction books, movies, <em>and</em> newspapers into a single array or list, then this makes no sense unless there's something they have in common. If they have something in common, create a type hierarchy:</li>\n</ul>\n<pre><code>abstract class Media {}\n\nclass FictionBook extends Media {}\n\nclass Newspaper extends Media {}\n\n// and so on\n</code></pre>\n<p>and then you can have a <code>List&lt;Media&gt; media = new ArrayList&lt;&gt;();</code>, and e.g. call <code>media.add(new Newspaper())</code> and it'll compile fine.</p>\n<p>I can tell you: Hey, there's this fruit basket and its filled with fruit!</p>\n<p>That sentence makes sense to you, right? So you walk over to the table and there's the basket. It's got an apple, a banana, a pear, an orange... that's fine too, right? Nothing surprising there.</p>\n<p>That's what's happening here: <code>Media</code> is like <code>Fruit</code>, and <code>Newspaper</code> is like <code>Banana</code>:</p>\n<pre><code>class Banana extends Fruit {}\n</code></pre>\n<p>is you saying in programming terms: There's this concept, called banana. It's like the entry of 'banana' in a encyclopedia. You can't eat it.</p>\n<pre><code>Banana banana = new Banana();\n</code></pre>\n<p>This makes an actual banana (you can eat it), it also declares a variable named <code>banana</code>, restricts this variable to be capable of only pointing at bananas (or nothing), and then updates the variable to contain instructions to find the banana.</p>\n<p>You could say <code>Fruit fruit = new Banana();</code> just the same: All bananas are fruit, so whateever you can do with fruit, you can do with a banana. Hence, that's fine.</p>\n<p>If you insist on using arrays, the same principle applies:</p>\n<pre><code>Media[] library = new Media[10];\nlibrary[0] = new Newspaper();\nlibrary[1] = new FictionBook();\n</code></pre>\n<p>That's will all compile and run just fine.</p>\n"}],"owner":{"account_id":24394917,"reputation":3,"user_id":18324385,"display_name":"Alice R."},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":252,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1654091254,"creation_date":1654090761,"question_id":72462826,"body_markdown":"I have a library with different types of media: fiction books, movies, and newspapers, and I have an array of x length that serves as my bookshelf. I create a new object of the class `FictionBooks`, for example, and that object should go into the array when the appropriate method is called (as long as there&#39;s space, of course). \r\n\r\nI&#39;m not sure how to declare and initialize the (empty) array, so that then I can create a method where I can add new titles to the array. What confuses me is the fact that the objects that go into the array are of different object classes. \r\n\r\nI also have an interface with the method `String getTitle()` that&#39;s implemented by the media classes, but I don&#39;t know whether that plays a role in the creation and use of the array. \r\n\r\n","title":"Filling an array with objects of different classes","body":"<p>I have a library with different types of media: fiction books, movies, and newspapers, and I have an array of x length that serves as my bookshelf. I create a new object of the class <code>FictionBooks</code>, for example, and that object should go into the array when the appropriate method is called (as long as there's space, of course).</p>\n<p>I'm not sure how to declare and initialize the (empty) array, so that then I can create a method where I can add new titles to the array. What confuses me is the fact that the objects that go into the array are of different object classes.</p>\n<p>I also have an interface with the method <code>String getTitle()</code> that's implemented by the media classes, but I don't know whether that plays a role in the creation and use of the array.</p>\n"},{"tags":["java","android","android-jetpack-compose"],"comments":[{"owner":{"account_id":39846,"reputation":991143,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":0,"creation_date":1654091265,"post_id":72462920,"comment_id":128009233,"body_markdown":"Replace `ExampleActivity` with a composable that you can place in your desired location.","body":"Replace <code>ExampleActivity</code> with a composable that you can place in your desired location."},{"owner":{"account_id":16118995,"reputation":77,"user_id":11635386,"display_name":"EMT"},"score":0,"creation_date":1654091479,"post_id":72462920,"comment_id":128009312,"body_markdown":"so then I start the activity in another composable which is going to be used on the code above and the activity will be placed inside the column of the above composable?","body":"so then I start the activity in another composable which is going to be used on the code above and the activity will be placed inside the column of the above composable?"},{"owner":{"account_id":24438997,"reputation":1738,"user_id":18362930,"display_name":"Sandesh Khutal"},"score":0,"creation_date":1654091591,"post_id":72462920,"comment_id":128009363,"body_markdown":"@EMT you want direct redirection or after click on any view ?","body":"@EMT you want direct redirection or after click on any view ?"},{"owner":{"account_id":16118995,"reputation":77,"user_id":11635386,"display_name":"EMT"},"score":0,"creation_date":1654091697,"post_id":72462920,"comment_id":128009408,"body_markdown":"i want to load my composable as well as activity on the same page","body":"i want to load my composable as well as activity on the same page"},{"owner":{"account_id":39846,"reputation":991143,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":0,"creation_date":1654095386,"post_id":72462920,"comment_id":128010904,"body_markdown":"&quot;so then I start the activity in another composable&quot; -- my recommendation is that you have one activity, not two.","body":"&quot;so then I start the activity in another composable&quot; -- my recommendation is that you have one activity, not two."},{"owner":{"account_id":16118995,"reputation":77,"user_id":11635386,"display_name":"EMT"},"score":0,"creation_date":1654152275,"post_id":72462920,"comment_id":128024228,"body_markdown":"it did not work,","body":"it did not work,"}],"owner":{"account_id":16118995,"reputation":77,"user_id":11635386,"display_name":"EMT"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":254,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1654091124,"creation_date":1654091124,"question_id":72462920,"body_markdown":"I have a camera written in java, AppCompact Activity and I have the following jetpack compose code\r\n\r\n```\r\nColumn(\r\n        modifier = Modifier\r\n            .background(color = Background)\r\n            .fillMaxSize()\r\n            .padding(20.dp)\r\n    ) {\r\n        HeaderText(title = &quot;Sample header&quot;)\r\n        ParagraphText(title = stringResource(id = R.string.lorem_ipsum))\r\n        CameraSelectDropDown(selectedCamera = selectedCamera)\r\n        Box(modifier = Modifier.padding(top = 20.dp, bottom = 20.dp).fillMaxWidth().height(300.dp))\r\n        //i wish to put my camera activity here\r\n    }\r\n```\r\n\r\nwhen I put my camera activity, it just navigates to it because I use this line \r\n\r\n```\r\ncontext.startActivity(Intent(context, ExampleActivity::class.java))\r\n```\r\n\r\nHow can I place the activity in that portion of my compose app? ","title":"Put activity window inside jetpack compose app","body":"<p>I have a camera written in java, AppCompact Activity and I have the following jetpack compose code</p>\n<pre><code>Column(\n        modifier = Modifier\n            .background(color = Background)\n            .fillMaxSize()\n            .padding(20.dp)\n    ) {\n        HeaderText(title = &quot;Sample header&quot;)\n        ParagraphText(title = stringResource(id = R.string.lorem_ipsum))\n        CameraSelectDropDown(selectedCamera = selectedCamera)\n        Box(modifier = Modifier.padding(top = 20.dp, bottom = 20.dp).fillMaxWidth().height(300.dp))\n        //i wish to put my camera activity here\n    }\n</code></pre>\n<p>when I put my camera activity, it just navigates to it because I use this line</p>\n<pre><code>context.startActivity(Intent(context, ExampleActivity::class.java))\n</code></pre>\n<p>How can I place the activity in that portion of my compose app?</p>\n"},{"tags":["java"],"answers":[{"tags":[],"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1654091051,"creation_date":1610185001,"answer_id":65641170,"question_id":65640998,"body_markdown":"The code block in your lambda expression doesn&#39;t return anything, but the `.map()` method requires a function / lambda that returns something.\r\n\r\nYou should write your code as\r\n\r\n    return ratings.stream()\r\n               .map(rating -&gt; {\r\n                   Movie movie=restTemplate.getForObject(&quot;http://localhost:8081/movies/&quot;+rating.getMovieId(), Movie.class);\r\n                   return new CatalogItem(movie.getName(),movie.getDescription(),rating.getRating());\r\n               })\r\n               .collect(Collectors.toList());","title":"What does the error mean in my stream map?","body":"<p>The code block in your lambda expression doesn't return anything, but the <code>.map()</code> method requires a function / lambda that returns something.</p>\n<p>You should write your code as</p>\n<pre><code>return ratings.stream()\n           .map(rating -&gt; {\n               Movie movie=restTemplate.getForObject(&quot;http://localhost:8081/movies/&quot;+rating.getMovieId(), Movie.class);\n               return new CatalogItem(movie.getName(),movie.getDescription(),rating.getRating());\n           })\n           .collect(Collectors.toList());\n</code></pre>\n"}],"owner":{"account_id":20109979,"reputation":23,"user_id":14746560,"display_name":"Ajinas Ibrahim"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":675,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":65641170,"answer_count":1,"score":0,"last_activity_date":1654091051,"creation_date":1610183685,"question_id":65640998,"body_markdown":"Error:\r\n\r\n```\r\n Error\r\n\r\nWhitelabel Error Page This application has no explicit mapping for /error, so you are seeing this as a fallback.\r\n\r\nSat Jan 09 14:22:48 IST 2021 There was an unexpected error (type=Internal Server Error, status=500). Unresolved compilation problem: The method map(Function&lt;? super Rating,? extends R&gt;) in the type Stream is not applicable for the arguments (( rating) -&gt; {}) java.lang.Error: Unresolved compilation problem: The method map(Function&lt;? super Rating,? extends R&gt;) in the type Stream is not applicable for the arguments (( rating) -&gt; {})\r\n\r\nat com.study.movie.controller.CatalogController.getCatalog(CatalogController.java:55)\r\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\nat sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\nat sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\nat java.lang.reflect.Method.invoke(Unknown Source)\r\nat \r\n```\r\n\r\n[Error image][1]\r\n\r\nCode:\r\n\r\n    return ratings.stream()\r\n        \t\t\t.map(rating -&gt; {\r\n        \t\t\t\tMovie movie=restTemplate.getForObject(&quot;http://localhost:8081/movies/&quot;+rating.getMovieId(), Movie.class);\r\n        \t\t\t\tnew CatalogItem(movie.getName(),movie.getDescription(),rating.getRating());\r\n        \t})\r\n        \t.collect(Collectors.toList());\r\n\r\n  [1]: https://i.stack.imgur.com/1wIap.png\r\n\r\n","title":"What does the error mean in my stream map?","body":"<p>Error:</p>\n<pre><code> Error\n\nWhitelabel Error Page This application has no explicit mapping for /error, so you are seeing this as a fallback.\n\nSat Jan 09 14:22:48 IST 2021 There was an unexpected error (type=Internal Server Error, status=500). Unresolved compilation problem: The method map(Function&lt;? super Rating,? extends R&gt;) in the type Stream is not applicable for the arguments (( rating) -&gt; {}) java.lang.Error: Unresolved compilation problem: The method map(Function&lt;? super Rating,? extends R&gt;) in the type Stream is not applicable for the arguments (( rating) -&gt; {})\n\nat com.study.movie.controller.CatalogController.getCatalog(CatalogController.java:55)\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\nat sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\nat java.lang.reflect.Method.invoke(Unknown Source)\nat \n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/1wIap.png\" rel=\"nofollow noreferrer\">Error image</a></p>\n<p>Code:</p>\n<pre><code>return ratings.stream()\n                .map(rating -&gt; {\n                    Movie movie=restTemplate.getForObject(&quot;http://localhost:8081/movies/&quot;+rating.getMovieId(), Movie.class);\n                    new CatalogItem(movie.getName(),movie.getDescription(),rating.getRating());\n        })\n        .collect(Collectors.toList());\n</code></pre>\n"},{"tags":["java","resteasy","microprofile","quarkus-rest-client"],"comments":[{"owner":{"account_id":208096,"reputation":6297,"user_id":458370,"accept_rate":76,"display_name":"Ant Kutschera"},"score":1,"creation_date":1641669212,"post_id":68173303,"comment_id":124867208,"body_markdown":"probably the http standard doesn&#39;t guarantee order, so the fact that it works with the jboss resteasy client is luck. the fact that the server relies on ordering is probably not conform with the specs.","body":"probably the http standard doesn&#39;t guarantee order, so the fact that it works with the jboss resteasy client is luck. the fact that the server relies on ordering is probably not conform with the specs."}],"answers":[{"tags":[],"owner":{"account_id":9144904,"reputation":11,"user_id":6801488,"display_name":"user6801488"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1654090789,"creation_date":1654090789,"answer_id":72462834,"question_id":68173303,"body_markdown":"It&#39;s works for me, see:\r\n\r\n    @POST\r\n    @Path(value = &quot;/auth/realms/{realm}&quot;)\r\n    @Consumes(APPLICATION_FORM_URLENCODED_VALUE)\r\n        AuthenticateResponse authenticate(@PathParam(&quot;realm&quot;) String realm, MultivaluedMap&lt;String,?&gt; params);\r\n\r\nTry to use MultivaluedMap","title":"How can I determine the order of parameters for x-www-form-urlencoded in Microprofile RestClient?","body":"<p>It's works for me, see:</p>\n<pre><code>@POST\n@Path(value = &quot;/auth/realms/{realm}&quot;)\n@Consumes(APPLICATION_FORM_URLENCODED_VALUE)\n    AuthenticateResponse authenticate(@PathParam(&quot;realm&quot;) String realm, MultivaluedMap&lt;String,?&gt; params);\n</code></pre>\n<p>Try to use MultivaluedMap</p>\n"}],"owner":{"account_id":3711134,"reputation":1232,"user_id":3088458,"accept_rate":94,"display_name":"alexander"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2118,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1654090789,"creation_date":1624946203,"question_id":68173303,"body_markdown":"## Use Case\r\n\r\nI have following rest client\r\n\r\n```\r\n@RegisterRestClient(configKey = &quot;service&quot;)\r\npublic interface Service {\r\n\r\n  @POST\r\n  @Path(&quot;Invoice&quot;)\r\n  @Produces(MediaType.APPLICATION_JSON)\r\n  @Consumes(MediaType.APPLICATION_FORM_URLENCODED)\r\n  Response request(@QueryParam(&quot;instance&quot;) String instance, @BeanParam Input input);\r\n\r\n}\r\n```\r\n\r\n`Input` is a class which is a POJO including properties like\r\n\r\n```\r\npublic class Input {\r\n\r\n  @FormParam(&quot;title&quot;)\r\n  public String title;\r\n\r\n  @FormParam(&quot;description&quot;)\r\n  public String description;\r\n```\r\n## Problem\r\nThe request to the API is working fine, **but** in my case, the order of properties does matter (The reason behind that is something, I cannot answer at the moment, sorry).\r\n\r\nSo sending `title=Test&amp;description=Testdescription` is different to `description=Testdescription&amp;title=Test`.\r\n\r\n## Other solutions I have tried\r\n\r\n 1. With `Form` instead of POJO: No data is send to the server\r\n```\r\n  @POST\r\n  @Path(&quot;Invoice&quot;)\r\n  @Produces(MediaType.APPLICATION_JSON)\r\n  @Consumes(MediaType.APPLICATION_FORM_URLENCODED)\r\n  CustomResponse requestForm(@QueryParam(&quot;instance&quot;) String instance, @BeanParam Form form);\r\n``` \r\n\r\n 2. With `Entit&lt;Form&gt;`: No data is send to the server\r\n\r\n```\r\n  @POST\r\n  @Path(&quot;Invoice&quot;)\r\n  @Produces(MediaType.APPLICATION_JSON)\r\n  @Consumes(MediaType.APPLICATION_FORM_URLENCODED)\r\n  CustomResponse requestForm(@QueryParam(&quot;instance&quot;) String instance, @BeanParam Entity&lt;Form&gt; form);\r\n```\r\n\r\n\r\n\r\n## Assumption\r\nI found out, that `org.jboss.resteasy.client.jaxrs.internal.proxy.processors.FormProcessor` is using a `HashMap` internally. I think that is exactly the problem, because there is no guaranteed order. Is my assumption correct?\r\n\r\n\r\n## Question\r\nHow can I work around that and always provide the same order for the API using the Microprofile Rest Client. \r\n\r\n\r\n## Workaround\r\n\r\nIt works with a `org.jboss.resteasy.client.jaxrs.ResteasyClient` invoking like\r\n\r\n```\r\n Response response = target\r\n            .request(MediaType.APPLICATION_JSON)\r\n            .accept(MediaType.APPLICATION_FORM_URLENCODED)\r\n            .post(Entity.form(form));\r\n```","title":"How can I determine the order of parameters for x-www-form-urlencoded in Microprofile RestClient?","body":"<h2>Use Case</h2>\n<p>I have following rest client</p>\n<pre><code>@RegisterRestClient(configKey = &quot;service&quot;)\npublic interface Service {\n\n  @POST\n  @Path(&quot;Invoice&quot;)\n  @Produces(MediaType.APPLICATION_JSON)\n  @Consumes(MediaType.APPLICATION_FORM_URLENCODED)\n  Response request(@QueryParam(&quot;instance&quot;) String instance, @BeanParam Input input);\n\n}\n</code></pre>\n<p><code>Input</code> is a class which is a POJO including properties like</p>\n<pre><code>public class Input {\n\n  @FormParam(&quot;title&quot;)\n  public String title;\n\n  @FormParam(&quot;description&quot;)\n  public String description;\n</code></pre>\n<h2>Problem</h2>\n<p>The request to the API is working fine, <strong>but</strong> in my case, the order of properties does matter (The reason behind that is something, I cannot answer at the moment, sorry).</p>\n<p>So sending <code>title=Test&amp;description=Testdescription</code> is different to <code>description=Testdescription&amp;title=Test</code>.</p>\n<h2>Other solutions I have tried</h2>\n<ol>\n<li>With <code>Form</code> instead of POJO: No data is send to the server</li>\n</ol>\n<pre><code>  @POST\n  @Path(&quot;Invoice&quot;)\n  @Produces(MediaType.APPLICATION_JSON)\n  @Consumes(MediaType.APPLICATION_FORM_URLENCODED)\n  CustomResponse requestForm(@QueryParam(&quot;instance&quot;) String instance, @BeanParam Form form);\n</code></pre>\n<ol start=\"2\">\n<li>With <code>Entit&lt;Form&gt;</code>: No data is send to the server</li>\n</ol>\n<pre><code>  @POST\n  @Path(&quot;Invoice&quot;)\n  @Produces(MediaType.APPLICATION_JSON)\n  @Consumes(MediaType.APPLICATION_FORM_URLENCODED)\n  CustomResponse requestForm(@QueryParam(&quot;instance&quot;) String instance, @BeanParam Entity&lt;Form&gt; form);\n</code></pre>\n<h2>Assumption</h2>\n<p>I found out, that <code>org.jboss.resteasy.client.jaxrs.internal.proxy.processors.FormProcessor</code> is using a <code>HashMap</code> internally. I think that is exactly the problem, because there is no guaranteed order. Is my assumption correct?</p>\n<h2>Question</h2>\n<p>How can I work around that and always provide the same order for the API using the Microprofile Rest Client.</p>\n<h2>Workaround</h2>\n<p>It works with a <code>org.jboss.resteasy.client.jaxrs.ResteasyClient</code> invoking like</p>\n<pre><code> Response response = target\n            .request(MediaType.APPLICATION_JSON)\n            .accept(MediaType.APPLICATION_FORM_URLENCODED)\n            .post(Entity.form(form));\n</code></pre>\n"},{"tags":["java","amazon-web-services","ssh","jsch"],"comments":[{"owner":{"account_id":453710,"reputation":192093,"user_id":850848,"accept_rate":80,"display_name":"Martin Prikryl"},"score":1,"creation_date":1654091059,"post_id":72462780,"comment_id":128009156,"body_markdown":"Is it still the same command? Or do some commands work and some not? Did you try using some well tested code for reading the commands output instead of your version? Like [How to read JSch command output?](https://stackoverflow.com/q/6902386/850848)","body":"Is it still the same command? Or do some commands work and some not? Did you try using some well tested code for reading the commands output instead of your version? Like <a href=\"https://stackoverflow.com/q/6902386/850848\">How to read JSch command output?</a>"},{"owner":{"account_id":16209077,"reputation":389,"user_id":11703579,"display_name":"gbossa"},"score":0,"creation_date":1654091245,"post_id":72462780,"comment_id":128009225,"body_markdown":"Well, honestly I have not read that, I will, thanks. And well, usually some simples commands run, and the ones that demand more time to process, don&#180;t. But sometimes, simples commands like the one in the example get stuck too.","body":"Well, honestly I have not read that, I will, thanks. And well, usually some simples commands run, and the ones that demand more time to process, don&#180;t. But sometimes, simples commands like the one in the example get stuck too."},{"owner":{"account_id":16209077,"reputation":389,"user_id":11703579,"display_name":"gbossa"},"score":0,"creation_date":1654092968,"post_id":72462780,"comment_id":128009938,"body_markdown":"Your comment did the Trick! Your while block in that answer is very accurate!\nPlease, write your comment as an answer here so I can accept it!","body":"Your comment did the Trick! Your while block in that answer is very accurate! Please, write your comment as an answer here so I can accept it!"}],"owner":{"account_id":16209077,"reputation":389,"user_id":11703579,"display_name":"gbossa"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1654093264,"answer_count":0,"score":1,"last_activity_date":1654090571,"creation_date":1654090571,"question_id":72462780,"body_markdown":"I have a code in which I need to run a SSH Command on an AWS Instance using JSCH Java API.\r\nSometimes the command runs without any problems, sometimes it get stuck forever on the while block. Can someone please enlight me what could be possibly going wrong?\r\nHere is the method that executes the command (And an example of command that I run).\r\n\r\n    public boolean runSSHCommandWithTimeout(String command, int timeout) {\r\n    Session session = null;\r\n    ChannelExec channel = null;\r\n    \r\n    try {\r\n        session = initSession(true); // The initSession(true) method always returns true, with the session connected.\r\n        channel = (ChannelExec) session.openChannel(&quot;exec&quot;);\r\n        ((ChannelExec) channel).setCommand(command);\r\n        channel.setInputStream(null);\r\n        ((ChannelExec) channel).setErrStream(System.err);\r\n        try {\r\n            channel.connect(60000);\t// I try to connect to the channel 3 times.. sometimes it returns an Exception on the 3rd time, timeout request Exception\r\n        } catch (Exception e) {\r\n            System.out.println(&quot;e &quot; + e.getMessage());\r\n        }\r\n        \r\n        if (channel.isConnected() == false) {\r\n            try {\r\n                channel.connect(60000);\t\r\n            } catch (Exception e) {\r\n                System.out.println(&quot;e2 &quot; + e.getMessage());\r\n            }            \t\r\n        }\r\n        \r\n        if (channel.isConnected() == false) {\r\n            try {\r\n                channel.connect(60000);\t\r\n            } catch (Exception e) {\r\n                System.out.println(&quot;e3 &quot; + e.getMessage());\r\n                return false;\r\n            }\r\n        }\r\n        \r\n        if (channel.isConnected())\r\n            System.out.println(&quot;Channel connected!&quot;);\r\n\r\n        BufferedReader in = new BufferedReader(new InputStreamReader(channel.getInputStream()));\r\n        LocalDateTime finalTime = LocalDateTime.now().plusMinutes(timeout);\r\n        String msg = null;\r\n        //Sometimes it get stuck in here, but I NEVER get the see any log.... not even with System.out\r\n        while (((msg = in.readLine()) != null) &amp;&amp; LocalDateTime.now().isBefore(finalTime)) {\r\n            log.info(msg); // I use a logger class, not System.out ... \r\n            if (LocalDateTime.now().isBefore(horaFinal) == false) {\r\n                log.info(&quot;Aborting connection, couldn&#180;t guarantee the execution of SSH command.&quot;);\r\n                break;\r\n            }\r\n        }\r\n\r\n        if (!LocalDateTime.now().isBefore(finalTime) &amp;&amp; !channel.isConnected())\r\n            return false;\r\n\r\n        System.out.println(&quot;SSHService Command &#39;&quot; + command + &quot;&#39; success!&quot;);\r\n        return true;\r\n    } catch (Exception e) {\r\n        log.error(&quot;Exception SSHService runSSHCommandWithTimeout() &quot; +  e.getMessage());\r\n        \r\n        return false;\r\n    }\r\n    finally {\r\n        if (channel != null)\r\n        {\r\n            channel.disconnect();\r\n        }\r\n        \r\n        if (session != null)\r\n        {\r\n            session.disconnect();\r\n        }\r\n    }\r\n    }\r\n\r\nHere is a command sample and how I call the method:\r\n\r\n    String command = &quot; sudo mkdir -p /home/ubuntu/myDir&quot;;\r\n    runSSHCommandWithTimeout(command, 5);\r\n\r\nPlease, can someone help? Why I sometimes get stuck on `while` forever, and I can&#180;t get any logs out of it... What is the need of the `inputStream` of the `Channel`? And finally, why sometimes it never connects to the `channel`?","title":"JSCH SSH Command run on AWS get stuck on While forever","body":"<p>I have a code in which I need to run a SSH Command on an AWS Instance using JSCH Java API.\nSometimes the command runs without any problems, sometimes it get stuck forever on the while block. Can someone please enlight me what could be possibly going wrong?\nHere is the method that executes the command (And an example of command that I run).</p>\n<pre><code>public boolean runSSHCommandWithTimeout(String command, int timeout) {\nSession session = null;\nChannelExec channel = null;\n\ntry {\n    session = initSession(true); // The initSession(true) method always returns true, with the session connected.\n    channel = (ChannelExec) session.openChannel(&quot;exec&quot;);\n    ((ChannelExec) channel).setCommand(command);\n    channel.setInputStream(null);\n    ((ChannelExec) channel).setErrStream(System.err);\n    try {\n        channel.connect(60000); // I try to connect to the channel 3 times.. sometimes it returns an Exception on the 3rd time, timeout request Exception\n    } catch (Exception e) {\n        System.out.println(&quot;e &quot; + e.getMessage());\n    }\n    \n    if (channel.isConnected() == false) {\n        try {\n            channel.connect(60000); \n        } catch (Exception e) {\n            System.out.println(&quot;e2 &quot; + e.getMessage());\n        }               \n    }\n    \n    if (channel.isConnected() == false) {\n        try {\n            channel.connect(60000); \n        } catch (Exception e) {\n            System.out.println(&quot;e3 &quot; + e.getMessage());\n            return false;\n        }\n    }\n    \n    if (channel.isConnected())\n        System.out.println(&quot;Channel connected!&quot;);\n\n    BufferedReader in = new BufferedReader(new InputStreamReader(channel.getInputStream()));\n    LocalDateTime finalTime = LocalDateTime.now().plusMinutes(timeout);\n    String msg = null;\n    //Sometimes it get stuck in here, but I NEVER get the see any log.... not even with System.out\n    while (((msg = in.readLine()) != null) &amp;&amp; LocalDateTime.now().isBefore(finalTime)) {\n        log.info(msg); // I use a logger class, not System.out ... \n        if (LocalDateTime.now().isBefore(horaFinal) == false) {\n            log.info(&quot;Aborting connection, couldn´t guarantee the execution of SSH command.&quot;);\n            break;\n        }\n    }\n\n    if (!LocalDateTime.now().isBefore(finalTime) &amp;&amp; !channel.isConnected())\n        return false;\n\n    System.out.println(&quot;SSHService Command '&quot; + command + &quot;' success!&quot;);\n    return true;\n} catch (Exception e) {\n    log.error(&quot;Exception SSHService runSSHCommandWithTimeout() &quot; +  e.getMessage());\n    \n    return false;\n}\nfinally {\n    if (channel != null)\n    {\n        channel.disconnect();\n    }\n    \n    if (session != null)\n    {\n        session.disconnect();\n    }\n}\n}\n</code></pre>\n<p>Here is a command sample and how I call the method:</p>\n<pre><code>String command = &quot; sudo mkdir -p /home/ubuntu/myDir&quot;;\nrunSSHCommandWithTimeout(command, 5);\n</code></pre>\n<p>Please, can someone help? Why I sometimes get stuck on <code>while</code> forever, and I can´t get any logs out of it... What is the need of the <code>inputStream</code> of the <code>Channel</code>? And finally, why sometimes it never connects to the <code>channel</code>?</p>\n"},{"tags":["java","quarkus"],"comments":[{"owner":{"account_id":3509196,"reputation":16483,"user_id":2933977,"display_name":"stdunbar"},"score":0,"creation_date":1654105885,"post_id":72462669,"comment_id":128014721,"body_markdown":"How are you creating your Principal?  Is this using the built in Quarkus OIDC environment?  As part of my solution my `ContainerRequestFilter` creates a custom `Principal` and, for me, that Principal has a list of Roles.","body":"How are you creating your Principal?  Is this using the built in Quarkus OIDC environment?  As part of my solution my <code>ContainerRequestFilter</code> creates a custom <code>Principal</code> and, for me, that Principal has a list of Roles."},{"owner":{"account_id":21805279,"reputation":501,"user_id":16103555,"display_name":"Toni26"},"score":0,"creation_date":1654148557,"post_id":72462669,"comment_id":128023171,"body_markdown":"Ok. And what property are you setting in the .yaml / .propertiers file. I found quarkus.oidc.roles.source = &quot;Which value by the way ?&quot;   . But in my case I would be specifically interested in the not authorised role. For example there is a @RolesAllowed(&quot;Manager&quot;) above an endpoint and I would need this role &quot;Manager&quot; in my filter . So I can print it out in a log .","body":"Ok. And what property are you setting in the .yaml / .propertiers file. I found quarkus.oidc.roles.source = &quot;Which value by the way ?&quot;   . But in my case I would be specifically interested in the not authorised role. For example there is a @RolesAllowed(&quot;Manager&quot;) above an endpoint and I would need this role &quot;Manager&quot; in my filter . So I can print it out in a log ."}],"owner":{"account_id":21805279,"reputation":501,"user_id":16103555,"display_name":"Toni26"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":181,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1654090045,"creation_date":1654090045,"question_id":72462669,"body_markdown":"    @Override\r\n    public void filter(ContainerRequestContext containerRequestContext, ContainerResponseContext containerResponseContext){\r\n    \r\n            switch (containerResponseContext.getStatus()) {\r\n                case 403:\r\n                    // Print failed role from @RolesAllowed\r\n\r\nI am using a ContainerResponseFilter and I want to print the role the user is lacking in case of a 403 status error. But honestly I have no idea if this is possible. The only thing I found is \r\n \r\n\r\n    final SecurityContext securityContext = containerRequestContext.getSecurityContext();\r\n    securityContext.isUserInRole(&quot;SomeRole&quot;)\r\n\r\nBut that does not help me either because I don&#39;t want to write all possible roles here.","title":"How to get failed Role with annotation @RolesAllowed with ContainerRequestContext?","body":"<pre><code>@Override\npublic void filter(ContainerRequestContext containerRequestContext, ContainerResponseContext containerResponseContext){\n\n        switch (containerResponseContext.getStatus()) {\n            case 403:\n                // Print failed role from @RolesAllowed\n</code></pre>\n<p>I am using a ContainerResponseFilter and I want to print the role the user is lacking in case of a 403 status error. But honestly I have no idea if this is possible. The only thing I found is</p>\n<pre><code>final SecurityContext securityContext = containerRequestContext.getSecurityContext();\nsecurityContext.isUserInRole(&quot;SomeRole&quot;)\n</code></pre>\n<p>But that does not help me either because I don't want to write all possible roles here.</p>\n"},{"tags":["java","android","kotlin"],"comments":[{"owner":{"account_id":23647574,"reputation":4905,"user_id":17676984,"display_name":"ljmc"},"score":0,"creation_date":1654357372,"post_id":72462457,"comment_id":128074075,"body_markdown":"Please add you code in code blocks not in screenshots.","body":"Please add you code in code blocks not in screenshots."},{"owner":{"display_name":"user18504539"},"score":0,"creation_date":1654519045,"post_id":72462457,"comment_id":128102431,"body_markdown":"already exists.. please look carefully.. also problem solved, thanks","body":"already exists.. please look carefully.. also problem solved, thanks"}],"answers":[{"tags":[],"owner":{"account_id":238127,"reputation":86162,"user_id":506796,"accept_rate":83,"display_name":"Tenfour04"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1654089403,"creation_date":1654089403,"answer_id":72462536,"question_id":72462457,"body_markdown":"I&#39;m skeptical it doesn&#39;t provide an error message. You can hover your cursor over the error and the IDE always explains what the error is.\r\n\r\nYour problem is that you named your class SharedPreferences, the exact same name as the Android SharedPreferences class. Since your class is closer in scope than the Android one since this code is inside your class, when you define your property as a SharedPreferences, it&#39;s referring to this class, not the Android one. So `Activity.getSharedPreferences()` is not returning the kind of SharedPreferences that it expects.\r\n\r\nSimple solution is to rename your class. By convention an Activity should have the word &quot;Activity&quot; as the last word in its name anyway.\r\n\r\nSecond solution (FYI only, since you should avoid creating confusing names like this) would be to be explicit about the type you want your SharedPreferences property to be:\r\n\r\n    lateinit var sharedPreferences: android.content.SharedPreferences\r\n\r\nThird solution would be to create a type alias for the Android type so you can use a different name for it. For example:\r\n\r\n```\r\nimport android.content.SharedPreferences as AndroidPreferences\r\n\r\n//...\r\n\r\nlateinit var sharedPreferences: AndroidPreferences\r\n```\r\n\r\nSide note, that is not a *global* variable. It&#39;s a class property. A global variable would be a property defined outside any class.","title":"I am getting error while creating global variable for SharedPreferences in kotlin","body":"<p>I'm skeptical it doesn't provide an error message. You can hover your cursor over the error and the IDE always explains what the error is.</p>\n<p>Your problem is that you named your class SharedPreferences, the exact same name as the Android SharedPreferences class. Since your class is closer in scope than the Android one since this code is inside your class, when you define your property as a SharedPreferences, it's referring to this class, not the Android one. So <code>Activity.getSharedPreferences()</code> is not returning the kind of SharedPreferences that it expects.</p>\n<p>Simple solution is to rename your class. By convention an Activity should have the word &quot;Activity&quot; as the last word in its name anyway.</p>\n<p>Second solution (FYI only, since you should avoid creating confusing names like this) would be to be explicit about the type you want your SharedPreferences property to be:</p>\n<pre><code>lateinit var sharedPreferences: android.content.SharedPreferences\n</code></pre>\n<p>Third solution would be to create a type alias for the Android type so you can use a different name for it. For example:</p>\n<pre><code>import android.content.SharedPreferences as AndroidPreferences\n\n//...\n\nlateinit var sharedPreferences: AndroidPreferences\n</code></pre>\n<p>Side note, that is not a <em>global</em> variable. It's a class property. A global variable would be a property defined outside any class.</p>\n"}],"owner":{"display_name":"user18504539"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":175,"favorite_count":0,"down_vote_count":3,"up_vote_count":1,"accepted_answer_id":72462536,"answer_count":1,"score":-2,"last_activity_date":1654090019,"creation_date":1654089071,"question_id":72462457,"body_markdown":"I want to create a global variable for SharedPreferences but it throws an error and offers nothing as a suggestion. what should I do?\r\nThis error does not happen in other widgets for example when I define button or edittext nothing happens only (as far as I know) in sharedprefences\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n```\r\nclass SharedPreferences : AppCompatActivity() {\r\n    lateinit var sharedPreferences: SharedPreferences\r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        super.onCreate(savedInstanceState)\r\n        setContentView(R.layout.activity_shared_preferences)\r\n\r\n        sharedPreferences=this.getSharedPreferences(&quot;MAIN_DATA&quot;, Context.MODE_PRIVATE)\r\n\r\n\r\n        var pref=this.getSharedPreferences(&quot;MAIN_DATA_2&quot;, Context.MODE_PRIVATE)\r\n\r\n    }\r\n}\r\n\r\n```\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/sTKEW.png\r\n  [2]: https://i.stack.imgur.com/EAGGp.png","title":"I am getting error while creating global variable for SharedPreferences in kotlin","body":"<p>I want to create a global variable for SharedPreferences but it throws an error and offers nothing as a suggestion. what should I do?\nThis error does not happen in other widgets for example when I define button or edittext nothing happens only (as far as I know) in sharedprefences</p>\n<p><a href=\"https://i.stack.imgur.com/sTKEW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/sTKEW.png\" alt=\"enter image description here\" /></a></p>\n<pre><code>class SharedPreferences : AppCompatActivity() {\n    lateinit var sharedPreferences: SharedPreferences\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_shared_preferences)\n\n        sharedPreferences=this.getSharedPreferences(&quot;MAIN_DATA&quot;, Context.MODE_PRIVATE)\n\n\n        var pref=this.getSharedPreferences(&quot;MAIN_DATA_2&quot;, Context.MODE_PRIVATE)\n\n    }\n}\n\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/EAGGp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/EAGGp.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","time","complexity-theory"],"comments":[{"owner":{"account_id":682692,"reputation":49061,"user_id":535275,"accept_rate":91,"display_name":"Scott Hunter"},"score":4,"creation_date":1654086648,"post_id":72461904,"comment_id":128007524,"body_markdown":"Does it help to remember that &quot;big-O&quot; is a measure of *worst case* time complexity?","body":"Does it help to remember that &quot;big-O&quot; is a measure of <i>worst case</i> time complexity?"},{"owner":{"account_id":25446210,"reputation":11,"user_id":19248375,"display_name":"Melvil"},"score":0,"creation_date":1654088171,"post_id":72461904,"comment_id":128008139,"body_markdown":"***I forgot to add that this function gets arrays that have sorted coulmns*** i just try to understand how the time complexity of the binarySearch comparison affects the time complexity of the whole function. if the comparison of binary search happens n times, but every time it the comparison takes log n times, what does it mean?","body":"<b><i>I forgot to add that this function gets arrays that have sorted coulmns</i></b> i just try to understand how the time complexity of the binarySearch comparison affects the time complexity of the whole function. if the comparison of binary search happens n times, but every time it the comparison takes log n times, what does it mean?"},{"owner":{"account_id":682692,"reputation":49061,"user_id":535275,"accept_rate":91,"display_name":"Scott Hunter"},"score":0,"creation_date":1654088244,"post_id":72461904,"comment_id":128008167,"body_markdown":"That was implied by the applicability of a binarySearch.","body":"That was implied by the applicability of a binarySearch."},{"owner":{"account_id":682692,"reputation":49061,"user_id":535275,"accept_rate":91,"display_name":"Scott Hunter"},"score":0,"creation_date":1654088332,"post_id":72461904,"comment_id":128008214,"body_markdown":"You *really* don&#39;t know how long it would take to do something that takes log n time n times?","body":"You <i>really</i> don&#39;t know how long it would take to do something that takes log n time n times?"},{"owner":{"account_id":25446210,"reputation":11,"user_id":19248375,"display_name":"Melvil"},"score":0,"creation_date":1654095138,"post_id":72461904,"comment_id":128010801,"body_markdown":"to Scott, yes, i REALLY didn&#39;t knew, i&#39;m in the beginning of complexity and trying to wrap my head around it, i study alone and saw different things that were confusing me so i wanted to post here to get clarification... thanks for the help, and the sarcasm, i guess?","body":"to Scott, yes, i REALLY didn&#39;t knew, i&#39;m in the beginning of complexity and trying to wrap my head around it, i study alone and saw different things that were confusing me so i wanted to post here to get clarification... thanks for the help, and the sarcasm, i guess?"},{"owner":{"account_id":682692,"reputation":49061,"user_id":535275,"accept_rate":91,"display_name":"Scott Hunter"},"score":0,"creation_date":1654096011,"post_id":72461904,"comment_id":128011158,"body_markdown":"Complexity *can* be confusing, but this is about as straight-forward as it gets.  You said it yourself: &quot;binary search happens n times, but every time the comparison takes log n&quot;: so n log n&#39;s, or n * log n.","body":"Complexity <i>can</i> be confusing, but this is about as straight-forward as it gets.  You said it yourself: &quot;binary search happens n times, but every time the comparison takes log n&quot;: so n log n&#39;s, or n * log n."}],"answers":[{"tags":[],"owner":{"account_id":8643772,"reputation":211,"user_id":6471637,"display_name":"Sportalcraft"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1654089497,"creation_date":1654089497,"answer_id":72462563,"question_id":72461904,"body_markdown":"How much time does the loop run?  r times - O(r) - the number of rows.\r\n\r\n**for each** row, perform a binary search - O(logc) - c is the length of the row\r\n\r\nwe are looking for the **worst-case**, in the worst case we never stop by entering the if, so we will iterate over all the rows\r\n\r\nso the total run time is O(r*log(c)) [r - num of rows, c - num of colums]\r\n\r\nnote: if r = c = n then the run time can be simplified as O(nlogn)","title":"Time complexity of if statement with log n comparison","body":"<p>How much time does the loop run?  r times - O(r) - the number of rows.</p>\n<p><strong>for each</strong> row, perform a binary search - O(logc) - c is the length of the row</p>\n<p>we are looking for the <strong>worst-case</strong>, in the worst case we never stop by entering the if, so we will iterate over all the rows</p>\n<p>so the total run time is O(r*log(c)) [r - num of rows, c - num of colums]</p>\n<p>note: if r = c = n then the run time can be simplified as O(nlogn)</p>\n"}],"owner":{"account_id":25446210,"reputation":11,"user_id":19248375,"display_name":"Melvil"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":140,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1654089497,"creation_date":1654086514,"question_id":72461904,"body_markdown":"trying to wrap my head around big O notation and time complexity, finding it hard to understand how if statements affect the time complexity.\r\n\r\nIn the function below, the operation inside the if statement will only run once, because it will only go inside the If operation when binarySearch returns true for the input.\r\n\r\nBut the if statement will go O(n) times, using binarySearch which is log n.\r\n\r\nIs the time complexity here O(n) or O(n*logn)? would love to have an explanation of the correct answer, since i find it hard to understand how the log n comparison of the if statement affect the time complexity of the method.\r\n\r\n\r\n    public static boolean what2 (int [][] m, int val)\r\n    {\r\n        for (int i = 0; i &lt; m.length; i ++)\r\n        {\r\n            if (binarySearch(m, val, i))\r\n            {\r\n                return true;\r\n            }\r\n        }\r\n        return false;","title":"Time complexity of if statement with log n comparison","body":"<p>trying to wrap my head around big O notation and time complexity, finding it hard to understand how if statements affect the time complexity.</p>\n<p>In the function below, the operation inside the if statement will only run once, because it will only go inside the If operation when binarySearch returns true for the input.</p>\n<p>But the if statement will go O(n) times, using binarySearch which is log n.</p>\n<p>Is the time complexity here O(n) or O(n*logn)? would love to have an explanation of the correct answer, since i find it hard to understand how the log n comparison of the if statement affect the time complexity of the method.</p>\n<pre><code>public static boolean what2 (int [][] m, int val)\n{\n    for (int i = 0; i &lt; m.length; i ++)\n    {\n        if (binarySearch(m, val, i))\n        {\n            return true;\n        }\n    }\n    return false;\n</code></pre>\n"},{"tags":["java","android-studio","kotlin","google-play-services"],"comments":[{"owner":{"account_id":11962605,"reputation":923,"user_id":11833795,"display_name":"Niraj"},"score":0,"creation_date":1653909912,"post_id":72352001,"comment_id":127959035,"body_markdown":"are you using staged rollouts? it allows to rollout app to only some % of the total users. if you want to roll out to all users, make it to 100% while creating a new release. also check [this](https://support.google.com/googleplay/android-developer/answer/6346149?hl=en) to increase staged percentages","body":"are you using staged rollouts? it allows to rollout app to only some % of the total users. if you want to roll out to all users, make it to 100% while creating a new release. also check <a href=\"https://support.google.com/googleplay/android-developer/answer/6346149?hl=en\" rel=\"nofollow noreferrer\">this</a> to increase staged percentages"},{"owner":{"account_id":4978545,"reputation":65,"user_id":4874427,"display_name":"Santosh Bhandary"},"score":0,"creation_date":1653970086,"post_id":72352001,"comment_id":127973700,"body_markdown":"I am already doing it @Niraj","body":"I am already doing it @Niraj"}],"answers":[{"tags":[],"owner":{"account_id":238127,"reputation":86162,"user_id":506796,"accept_rate":83,"display_name":"Tenfour04"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1653331189,"creation_date":1653331189,"answer_id":72353403,"question_id":72352001,"body_markdown":"If you increased the `minSdkVersion` or permissions after the 4.8.0 version, it keeps the old version available for those older devices that are no longer supported by newer versions of your app. ","title":"why PlayStore showing very Previous old Version as soon as I upload new Build?","body":"<p>If you increased the <code>minSdkVersion</code> or permissions after the 4.8.0 version, it keeps the old version available for those older devices that are no longer supported by newer versions of your app.</p>\n"}],"owner":{"account_id":4978545,"reputation":65,"user_id":4874427,"display_name":"Santosh Bhandary"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":180,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1654089413,"creation_date":1653323862,"question_id":72352001,"body_markdown":"My current version of android app is **6.4.0** . but it shows **4.8.0** to general users as **downloadable** every time as soon as I upload new version to PlayStore before it gets accepted . I am getting this issue everytime, I googled about the issue but could not find any solution or reason for this problem. Have any one faced same problem, I am seeking sloution to this problem .Thank you  ","title":"why PlayStore showing very Previous old Version as soon as I upload new Build?","body":"<p>My current version of android app is <strong>6.4.0</strong> . but it shows <strong>4.8.0</strong> to general users as <strong>downloadable</strong> every time as soon as I upload new version to PlayStore before it gets accepted . I am getting this issue everytime, I googled about the issue but could not find any solution or reason for this problem. Have any one faced same problem, I am seeking sloution to this problem .Thank you</p>\n"},{"tags":["java","design-patterns"],"comments":[{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":4,"creation_date":1654086716,"post_id":72461935,"comment_id":128007556,"body_markdown":"&quot;I spent the whole day finding logic in this pattern&quot; I suppose you have something to show for it.","body":"&quot;I spent the whole day finding logic in this pattern&quot; I suppose you have something to show for it."}],"answers":[{"tags":[],"owner":{"account_id":20635961,"reputation":531,"user_id":15149644,"display_name":"THUNDER 07"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1654087606,"creation_date":1654087606,"answer_id":72462166,"question_id":72461935,"body_markdown":"Declare a matrix with total number of rows and cols fill it with spaces then fill it with numbers , N-index-1 gives the corresponding mirror index of each index by iterating N times we can fill all the numbers at once mirroring row starts filling it from left bottom corner mirroring col starts filling it from right bottom and mirroring both fill it from right bottom\r\n```java\r\nimport java.util.*;\r\n\r\npublic class slide {\r\n\r\n    public static void main(String[] args) throws InterruptedException {\r\n        Scanner sc = new Scanner(System.in);\r\n        var N = sc.nextInt();\r\n        var R = 2*N-1;\r\n        var C = 2*N-1;\r\n        char[][] matrix = new char[R][C];\r\n        for(int row = 0 ; row &lt; R ; row++){\r\n            for(int col = 0 ; col &lt; C  ;col++){\r\n                matrix[row][col] = &#39; &#39;;\r\n            }\r\n        }\r\n        for(int index = 0 ; index &lt; N ; index++){\r\n            matrix[index][index] = (char)(index+1+&#39;0&#39;);\r\n            matrix[index][C-index-1] = (char)(index+1+&#39;0&#39;);\r\n            matrix[R-index-1][index] = (char)(index+1+&#39;0&#39;);\r\n            matrix[R-index-1][C-index-1] = (char)(index+1+&#39;0&#39;);\r\n        }\r\n        for(int row = 0 ; row &lt; R ; row++){\r\n            for(int col = 0 ; col &lt; C  ;col++){\r\n                System.out.print(matrix[row][col]);\r\n            }\r\n            System.out.print(&quot;\\n&quot;);\r\n        }\r\n    }\r\n}\r\n```","title":"How to print number from 1 to 4 (in X format) in such a way that for every line of number 4 is the middle point?","body":"<p>Declare a matrix with total number of rows and cols fill it with spaces then fill it with numbers , N-index-1 gives the corresponding mirror index of each index by iterating N times we can fill all the numbers at once mirroring row starts filling it from left bottom corner mirroring col starts filling it from right bottom and mirroring both fill it from right bottom</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.*;\n\npublic class slide {\n\n    public static void main(String[] args) throws InterruptedException {\n        Scanner sc = new Scanner(System.in);\n        var N = sc.nextInt();\n        var R = 2*N-1;\n        var C = 2*N-1;\n        char[][] matrix = new char[R][C];\n        for(int row = 0 ; row &lt; R ; row++){\n            for(int col = 0 ; col &lt; C  ;col++){\n                matrix[row][col] = ' ';\n            }\n        }\n        for(int index = 0 ; index &lt; N ; index++){\n            matrix[index][index] = (char)(index+1+'0');\n            matrix[index][C-index-1] = (char)(index+1+'0');\n            matrix[R-index-1][index] = (char)(index+1+'0');\n            matrix[R-index-1][C-index-1] = (char)(index+1+'0');\n        }\n        for(int row = 0 ; row &lt; R ; row++){\n            for(int col = 0 ; col &lt; C  ;col++){\n                System.out.print(matrix[row][col]);\n            }\n            System.out.print(&quot;\\n&quot;);\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":25371625,"reputation":1,"user_id":19185330,"display_name":"Anonymous"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":409,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"closed_date":1654087826,"accepted_answer_id":72462166,"answer_count":1,"score":-3,"last_activity_date":1654089329,"creation_date":1654086626,"question_id":72461935,"body_markdown":"I am a computer science student, I spent the whole day finding logic in this pattern can you please find the logic behind the output and provide me in java code?\r\n\r\nThis is the output I want:\r\n\r\n[![it is the java output i want to print][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/tUo6g.jpg","title":"How to print number from 1 to 4 (in X format) in such a way that for every line of number 4 is the middle point?","body":"<p>I am a computer science student, I spent the whole day finding logic in this pattern can you please find the logic behind the output and provide me in java code?</p>\n<p>This is the output I want:</p>\n<p><a href=\"https://i.stack.imgur.com/tUo6g.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/tUo6g.jpg\" alt=\"it is the java output i want to print\" /></a></p>\n"},{"tags":["java","spring","ssl","resttemplate","private-key"],"comments":[{"owner":{"account_id":3421244,"reputation":35863,"user_id":2868801,"display_name":"dave_thompson_085"},"score":0,"creation_date":1654102643,"post_id":72461672,"comment_id":128013616,"body_markdown":"Looks right to me, but you could find out definitely whether it is sending/using the cert (or maybe why not) by [running with sysprop `javax.net.debug=ssl:handshake:keymanager` and examing the log](https://docs.oracle.com/en/java/javase/17/security/java-secure-socket-extension-jsse-reference-guide.html#GUID-4D421910-C36D-40A2-8BA2-7D42CCBED3C6).","body":"Looks right to me, but you could find out definitely whether it is sending/using the cert (or maybe why not) by <a href=\"https://docs.oracle.com/en/java/javase/17/security/java-secure-socket-extension-jsse-reference-guide.html#GUID-4D421910-C36D-40A2-8BA2-7D42CCBED3C6\" rel=\"nofollow noreferrer\">running with sysprop <code>javax.net.debug=ssl:handshake:keymanager</code> and examing the log</a>."},{"owner":{"account_id":5771883,"reputation":3854,"user_id":4555102,"accept_rate":35,"display_name":"shuba.ivan"},"score":0,"creation_date":1654165321,"post_id":72461672,"comment_id":128028421,"body_markdown":"could you explain please how I can check in log my reqeust data(key, cert), what need to do for that ?","body":"could you explain please how I can check in log my reqeust data(key, cert), what need to do for that ?"},{"owner":{"account_id":3421244,"reputation":35863,"user_id":2868801,"display_name":"dave_thompson_085"},"score":0,"creation_date":1654372366,"post_id":72461672,"comment_id":128076925,"body_markdown":"That wouldn&#39;t fit in comments, and doesn&#39;t really qualify as an answer. The Oracle doc page gives an extensive explanation; in outline for your case you want to see that KeyManager logs &#39;found key for&#39; your alias and your cert; whether server sends CertificateRequest and with what exact specifications; whether client finds the desired cert and sends it in a client Certificate message (not to be confused with the server Certificate message).","body":"That wouldn&#39;t fit in comments, and doesn&#39;t really qualify as an answer. The Oracle doc page gives an extensive explanation; in outline for your case you want to see that KeyManager logs &#39;found key for&#39; your alias and your cert; whether server sends CertificateRequest and with what exact specifications; whether client finds the desired cert and sends it in a client Certificate message (not to be confused with the server Certificate message)."},{"owner":{"account_id":5771883,"reputation":3854,"user_id":4555102,"accept_rate":35,"display_name":"shuba.ivan"},"score":0,"creation_date":1655205435,"post_id":72461672,"comment_id":128271860,"body_markdown":"@dave_thompson_085 Hi, thank you for answer, your tips help me resolved problem, in idea I executed my app with `-Djavax.net.debug=ssl,-Djavax.net.debug=ssl:handshake:keymanager`","body":"@dave_thompson_085 Hi, thank you for answer, your tips help me resolved problem, in idea I executed my app with <code>-Djavax.net.debug=ssl,-Djavax.net.debug=ssl:handshake:keyman&zwnj;&#8203;ager</code>"}],"owner":{"account_id":5771883,"reputation":3854,"user_id":4555102,"accept_rate":35,"display_name":"shuba.ivan"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":721,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1654089324,"creation_date":1654085424,"question_id":72461672,"body_markdown":"   I have custom implementation rest template with key material based on private key and cert, but when I reproduced request by rest template, which I did on curl and faced with successful result, I faced with error, looks the same error if I did not attached key and cert to the curl command\r\n\r\ncert.crt:\r\n\r\n    -----BEGIN CERTIFICATE-----\r\n    // something\r\n    -----END CERTIFICATE-----\r\n\r\nkey.key:\r\n\r\n    -----BEGIN ENCRYPTED PRIVATE KEY-----\r\n    // something\r\n    -----END ENCRYPTED PRIVATE KEY-----\r\n\r\nalso I have passphrase `String passPhrase` and when I sue curl it works without error\r\n\r\n\r\ncurl -X POST -v -H &#39;Content-type: application/json&#39; https://some_url -d&#39;{&quot;some_key&quot;:&quot;some_value&quot;}&#39; --cert cert.crt --key key.key\r\n\r\nthen I enetered passPhrase and got 200 with some body\r\n\r\ncurl without cert and key\r\n\r\n    curl -X POST -v -H &#39;Content-type: application/json&#39; https://some_url -d&#39;{&quot;some_key&quot;:&quot;some_value&quot;}&#39;\r\n\r\nfaced with 400 \r\n\r\nand this is my rest template implementation where I cretaed Certificate, PrivateKey and KeyStore oject and then used it on `.loadKeyMaterial`\r\n\r\n\r\n    import lombok.extern.slf4j.Slf4j;\r\n    import org.apache.http.client.HttpClient;\r\n    import org.apache.http.conn.ssl.SSLConnectionSocketFactory;\r\n    import org.apache.http.impl.client.HttpClients;\r\n    import org.apache.http.ssl.SSLContextBuilder;\r\n    import org.apache.http.ssl.TrustStrategy;\r\n    import org.bouncycastle.asn1.pkcs.PrivateKeyInfo;\r\n    import org.bouncycastle.jce.provider.BouncyCastleProvider;\r\n    import org.bouncycastle.openssl.PEMEncryptedKeyPair;\r\n    import org.bouncycastle.openssl.PEMKeyPair;\r\n    import org.bouncycastle.openssl.PEMParser;\r\n    import org.bouncycastle.openssl.bc.BcPEMDecryptorProvider;\r\n    import org.bouncycastle.openssl.jcajce.JcaPEMKeyConverter;\r\n    import org.bouncycastle.operator.InputDecryptorProvider;\r\n    import org.bouncycastle.pkcs.PKCS8EncryptedPrivateKeyInfo;\r\n    import org.bouncycastle.pkcs.PKCSException;\r\n    import org.bouncycastle.pkcs.jcajce.JcePKCSPBEInputDecryptorProviderBuilder;\r\n    import org.springframework.beans.factory.annotation.Value;\r\n    import org.springframework.context.annotation.Profile;\r\n    import org.springframework.core.io.Resource;\r\n    import org.springframework.http.client.HttpComponentsClientHttpRequestFactory;\r\n    import org.springframework.stereotype.Service;\r\n    import org.springframework.util.ResourceUtils;\r\n    import org.springframework.web.client.RestTemplate;\r\n    \r\n    import javax.net.ssl.SSLContext;\r\n    import java.io.*;\r\n    import java.nio.file.Files;\r\n    import java.nio.file.Path;\r\n    import java.security.KeyStore;\r\n    import java.security.PrivateKey;\r\n    import java.security.Security;\r\n    import java.security.cert.Certificate;\r\n    import java.security.cert.CertificateFactory;\r\n    import java.security.cert.X509Certificate;\r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    import java.util.stream.Collectors;\r\n    import java.util.stream.Stream;\r\n\r\n\r\n    public class ClientCertificateRestTemplate {\r\n    private final RestTemplate crt;\r\n\r\n    public ClientCertificateRestTemplate(\r\n            @Value(&quot;${pass_phrase}&quot;) String passPhrase,\r\n            @Value(&quot;${client-certificate-file}&quot;) Resource clientCertificateFile,\r\n            @Value(&quot;${client-certificate-private-key-file}&quot;) Resource clientCertificatePrivateKeyFile\r\n    ) throws Exception {\r\n\r\n        Certificate certificate = getCertificate(clientCertificateFile);\r\n        PrivateKey privateKey = stringToPrivateKey(clientCertificatePrivateKeyFile, passPhrase);\r\n        KeyStore keyStore = keyStore(privateKey, certificate, passPhrase);\r\n\r\n        TrustStrategy acceptingTrustStrategy = (X509Certificate[] chain, String authType) -&gt; true;\r\n\r\n        SSLContext sslContext = new SSLContextBuilder()\r\n                .loadTrustMaterial(null, acceptingTrustStrategy)\r\n                .loadKeyMaterial(keyStore, passPhrase.toCharArray())\r\n                .build();\r\n        SSLConnectionSocketFactory socketFactory = new SSLConnectionSocketFactory(sslContext);\r\n        HttpClient httpClient = HttpClients.custom()\r\n                .setSSLSocketFactory(socketFactory)\r\n                .build();\r\n        HttpComponentsClientHttpRequestFactory factory =\r\n                new HttpComponentsClientHttpRequestFactory(httpClient);\r\n\r\n        crt = new RestTemplate(factory);\r\n\r\n    }\r\n\r\n    private KeyStore keyStore(PrivateKey privateKey, Certificate certificate, String psw) throws Exception {\r\n        final KeyStore ks = KeyStore.getInstance(KeyStore.getDefaultType());\r\n        ks.load(null);\r\n\r\n        final List&lt;Certificate&gt; certs = new ArrayList&lt;&gt;();\r\n        ks.setCertificateEntry(&quot;certificate&quot;, certificate);\r\n        certs.add(certificate);\r\n\r\n        ks.setKeyEntry(&quot;key&quot;, privateKey, psw.toCharArray(), certs.toArray(new Certificate[]{}));\r\n\r\n        return ks;\r\n    }\r\n\r\n    private PrivateKey stringToPrivateKey(Resource file, String password)\r\n            throws IOException, PKCSException {\r\n        try (Stream&lt;String&gt; lines = Files.lines(Path.of(file.getURL().getPath()))) {\r\n            String s = lines.collect(Collectors.joining(&quot;\\n&quot;));\r\n\r\n            // For JcaPEMKeyConverter().setProvider(&quot;BC&quot;)\r\n            BouncyCastleProvider provider = new BouncyCastleProvider();\r\n            Security.addProvider(provider);\r\n            PrivateKeyInfo pki;\r\n\r\n            try (PEMParser pemParser = new PEMParser(new StringReader(s))) {\r\n\r\n                Object o = pemParser.readObject();\r\n\r\n                if (o instanceof PKCS8EncryptedPrivateKeyInfo) {\r\n\r\n                    PKCS8EncryptedPrivateKeyInfo epki = (PKCS8EncryptedPrivateKeyInfo) o;\r\n\r\n                    JcePKCSPBEInputDecryptorProviderBuilder builder =\r\n                            new JcePKCSPBEInputDecryptorProviderBuilder().setProvider(provider);\r\n\r\n                    InputDecryptorProvider idp = builder.build(password.toCharArray());\r\n\r\n                    pki = epki.decryptPrivateKeyInfo(idp);\r\n                } else if (o instanceof PEMEncryptedKeyPair) {\r\n\r\n                    PEMEncryptedKeyPair epki = (PEMEncryptedKeyPair) o;\r\n                    PEMKeyPair pkp = epki.decryptKeyPair(new BcPEMDecryptorProvider(password.toCharArray()));\r\n\r\n                    pki = pkp.getPrivateKeyInfo();\r\n                } else {\r\n                    throw new PKCSException(&quot;Invalid encrypted private key class: &quot; + o.getClass().getName());\r\n                }\r\n\r\n                JcaPEMKeyConverter converter = new JcaPEMKeyConverter().setProvider(provider);\r\n                return converter.getPrivateKey(pki);\r\n            }\r\n        }\r\n    }\r\n\r\n    private Certificate getCertificate(Resource file) throws Exception {\r\n        File key = ResourceUtils.getFile(file.getURL());\r\n        InputStream stream = new FileInputStream(key);\r\n\r\n        // CertificateFactory\r\n        CertificateFactory cf = CertificateFactory.getInstance(&quot;X.509&quot;);\r\n        // certificate\r\n        Certificate ca;\r\n        try {\r\n            ca = cf.generateCertificate(stream);\r\n        } finally {\r\n            stream.close();\r\n        }\r\n\r\n        return ca;\r\n    }\r\n\r\n    public RestTemplate getCrt() {\r\n        return crt;\r\n    }\r\n\r\n    }\r\n\r\n\r\nthen in my test\r\n\r\n        ResponseEntity&lt;String&gt; response = crt.exchange(\r\n                &quot;https://some_url&quot;,\r\n                HttpMethod.POST,\r\n                entity,\r\n                String.class\r\n        );\r\n\r\nand failed, faced with 400. There were correct configuration rest template ? ","title":"Spring rest template configure SSLContext with raw cert and key with passPhrase","body":"<p>I have custom implementation rest template with key material based on private key and cert, but when I reproduced request by rest template, which I did on curl and faced with successful result, I faced with error, looks the same error if I did not attached key and cert to the curl command</p>\n<p>cert.crt:</p>\n<pre><code>-----BEGIN CERTIFICATE-----\n// something\n-----END CERTIFICATE-----\n</code></pre>\n<p>key.key:</p>\n<pre><code>-----BEGIN ENCRYPTED PRIVATE KEY-----\n// something\n-----END ENCRYPTED PRIVATE KEY-----\n</code></pre>\n<p>also I have passphrase <code>String passPhrase</code> and when I sue curl it works without error</p>\n<p>curl -X POST -v -H 'Content-type: application/json' https://some_url -d'{&quot;some_key&quot;:&quot;some_value&quot;}' --cert cert.crt --key key.key</p>\n<p>then I enetered passPhrase and got 200 with some body</p>\n<p>curl without cert and key</p>\n<pre><code>curl -X POST -v -H 'Content-type: application/json' https://some_url -d'{&quot;some_key&quot;:&quot;some_value&quot;}'\n</code></pre>\n<p>faced with 400</p>\n<p>and this is my rest template implementation where I cretaed Certificate, PrivateKey and KeyStore oject and then used it on <code>.loadKeyMaterial</code></p>\n<pre><code>import lombok.extern.slf4j.Slf4j;\nimport org.apache.http.client.HttpClient;\nimport org.apache.http.conn.ssl.SSLConnectionSocketFactory;\nimport org.apache.http.impl.client.HttpClients;\nimport org.apache.http.ssl.SSLContextBuilder;\nimport org.apache.http.ssl.TrustStrategy;\nimport org.bouncycastle.asn1.pkcs.PrivateKeyInfo;\nimport org.bouncycastle.jce.provider.BouncyCastleProvider;\nimport org.bouncycastle.openssl.PEMEncryptedKeyPair;\nimport org.bouncycastle.openssl.PEMKeyPair;\nimport org.bouncycastle.openssl.PEMParser;\nimport org.bouncycastle.openssl.bc.BcPEMDecryptorProvider;\nimport org.bouncycastle.openssl.jcajce.JcaPEMKeyConverter;\nimport org.bouncycastle.operator.InputDecryptorProvider;\nimport org.bouncycastle.pkcs.PKCS8EncryptedPrivateKeyInfo;\nimport org.bouncycastle.pkcs.PKCSException;\nimport org.bouncycastle.pkcs.jcajce.JcePKCSPBEInputDecryptorProviderBuilder;\nimport org.springframework.beans.factory.annotation.Value;\nimport org.springframework.context.annotation.Profile;\nimport org.springframework.core.io.Resource;\nimport org.springframework.http.client.HttpComponentsClientHttpRequestFactory;\nimport org.springframework.stereotype.Service;\nimport org.springframework.util.ResourceUtils;\nimport org.springframework.web.client.RestTemplate;\n\nimport javax.net.ssl.SSLContext;\nimport java.io.*;\nimport java.nio.file.Files;\nimport java.nio.file.Path;\nimport java.security.KeyStore;\nimport java.security.PrivateKey;\nimport java.security.Security;\nimport java.security.cert.Certificate;\nimport java.security.cert.CertificateFactory;\nimport java.security.cert.X509Certificate;\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.stream.Collectors;\nimport java.util.stream.Stream;\n\n\npublic class ClientCertificateRestTemplate {\nprivate final RestTemplate crt;\n\npublic ClientCertificateRestTemplate(\n        @Value(&quot;${pass_phrase}&quot;) String passPhrase,\n        @Value(&quot;${client-certificate-file}&quot;) Resource clientCertificateFile,\n        @Value(&quot;${client-certificate-private-key-file}&quot;) Resource clientCertificatePrivateKeyFile\n) throws Exception {\n\n    Certificate certificate = getCertificate(clientCertificateFile);\n    PrivateKey privateKey = stringToPrivateKey(clientCertificatePrivateKeyFile, passPhrase);\n    KeyStore keyStore = keyStore(privateKey, certificate, passPhrase);\n\n    TrustStrategy acceptingTrustStrategy = (X509Certificate[] chain, String authType) -&gt; true;\n\n    SSLContext sslContext = new SSLContextBuilder()\n            .loadTrustMaterial(null, acceptingTrustStrategy)\n            .loadKeyMaterial(keyStore, passPhrase.toCharArray())\n            .build();\n    SSLConnectionSocketFactory socketFactory = new SSLConnectionSocketFactory(sslContext);\n    HttpClient httpClient = HttpClients.custom()\n            .setSSLSocketFactory(socketFactory)\n            .build();\n    HttpComponentsClientHttpRequestFactory factory =\n            new HttpComponentsClientHttpRequestFactory(httpClient);\n\n    crt = new RestTemplate(factory);\n\n}\n\nprivate KeyStore keyStore(PrivateKey privateKey, Certificate certificate, String psw) throws Exception {\n    final KeyStore ks = KeyStore.getInstance(KeyStore.getDefaultType());\n    ks.load(null);\n\n    final List&lt;Certificate&gt; certs = new ArrayList&lt;&gt;();\n    ks.setCertificateEntry(&quot;certificate&quot;, certificate);\n    certs.add(certificate);\n\n    ks.setKeyEntry(&quot;key&quot;, privateKey, psw.toCharArray(), certs.toArray(new Certificate[]{}));\n\n    return ks;\n}\n\nprivate PrivateKey stringToPrivateKey(Resource file, String password)\n        throws IOException, PKCSException {\n    try (Stream&lt;String&gt; lines = Files.lines(Path.of(file.getURL().getPath()))) {\n        String s = lines.collect(Collectors.joining(&quot;\\n&quot;));\n\n        // For JcaPEMKeyConverter().setProvider(&quot;BC&quot;)\n        BouncyCastleProvider provider = new BouncyCastleProvider();\n        Security.addProvider(provider);\n        PrivateKeyInfo pki;\n\n        try (PEMParser pemParser = new PEMParser(new StringReader(s))) {\n\n            Object o = pemParser.readObject();\n\n            if (o instanceof PKCS8EncryptedPrivateKeyInfo) {\n\n                PKCS8EncryptedPrivateKeyInfo epki = (PKCS8EncryptedPrivateKeyInfo) o;\n\n                JcePKCSPBEInputDecryptorProviderBuilder builder =\n                        new JcePKCSPBEInputDecryptorProviderBuilder().setProvider(provider);\n\n                InputDecryptorProvider idp = builder.build(password.toCharArray());\n\n                pki = epki.decryptPrivateKeyInfo(idp);\n            } else if (o instanceof PEMEncryptedKeyPair) {\n\n                PEMEncryptedKeyPair epki = (PEMEncryptedKeyPair) o;\n                PEMKeyPair pkp = epki.decryptKeyPair(new BcPEMDecryptorProvider(password.toCharArray()));\n\n                pki = pkp.getPrivateKeyInfo();\n            } else {\n                throw new PKCSException(&quot;Invalid encrypted private key class: &quot; + o.getClass().getName());\n            }\n\n            JcaPEMKeyConverter converter = new JcaPEMKeyConverter().setProvider(provider);\n            return converter.getPrivateKey(pki);\n        }\n    }\n}\n\nprivate Certificate getCertificate(Resource file) throws Exception {\n    File key = ResourceUtils.getFile(file.getURL());\n    InputStream stream = new FileInputStream(key);\n\n    // CertificateFactory\n    CertificateFactory cf = CertificateFactory.getInstance(&quot;X.509&quot;);\n    // certificate\n    Certificate ca;\n    try {\n        ca = cf.generateCertificate(stream);\n    } finally {\n        stream.close();\n    }\n\n    return ca;\n}\n\npublic RestTemplate getCrt() {\n    return crt;\n}\n\n}\n</code></pre>\n<p>then in my test</p>\n<pre><code>    ResponseEntity&lt;String&gt; response = crt.exchange(\n            &quot;https://some_url&quot;,\n            HttpMethod.POST,\n            entity,\n            String.class\n    );\n</code></pre>\n<p>and failed, faced with 400. There were correct configuration rest template ?</p>\n"},{"tags":["java","go"],"comments":[{"owner":{"account_id":8321109,"reputation":1157,"user_id":6252787,"accept_rate":71,"display_name":"Thijs van der Heijden"},"score":1,"creation_date":1654087121,"post_id":72461734,"comment_id":128007723,"body_markdown":"What you want is not possible. Also, not sure why this would be a problem? You still have to manually import a package to use its exported items.","body":"What you want is not possible. Also, not sure why this would be a problem? You still have to manually import a package to use its exported items."},{"owner":{"account_id":8925805,"reputation":13123,"user_id":6660373,"accept_rate":75,"display_name":"Pygirl"},"score":0,"creation_date":1654087371,"post_id":72461734,"comment_id":128007842,"body_markdown":"@ThijsvanderHeijden: so that means I have to change the file structure? put `user.go` and `queries.go` together?","body":"@ThijsvanderHeijden: so that means I have to change the file structure? put <code>user.go</code> and <code>queries.go</code> together?"},{"owner":{"account_id":8925805,"reputation":13123,"user_id":6660373,"accept_rate":75,"display_name":"Pygirl"},"score":0,"creation_date":1654087491,"post_id":72461734,"comment_id":128007872,"body_markdown":"@ThijsvanderHeijden: I thought may be there is other way like creating an interaface creating function(Exportable) that uses those and by calling that function to do operation using those const variable I can keep them hidden, just exposing the function using them.","body":"@ThijsvanderHeijden: I thought may be there is other way like creating an interaface creating function(Exportable) that uses those and by calling that function to do operation using those const variable I can keep them hidden, just exposing the function using them."}],"answers":[{"tags":[],"owner":{"account_id":1886487,"reputation":396557,"user_id":1705598,"accept_rate":92,"display_name":"icza"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1654088937,"creation_date":1654087608,"answer_id":72462168,"question_id":72461734,"body_markdown":"Access permission to identifiers is not so fine grained that you can specify who you&#39;re granting access. And there&#39;s no need. This would unnecessarily complicate both the uses (source code) and the implementation (compilation time, compiled package object and executable binary size).\r\n\r\nIf you want to give access to a specific package only, easiest is to merge the packages and make the identifiers unexported.\r\n\r\nIf you want to give access to multiple packages or the package would get unpleasantly big, you may use [internal packages][1]. Internal packages were introduced so you can break &quot;big&quot; packages into multiple, smaller ones, and still keep the implementation detail hidden and protected from the &quot;outside&quot; (from other packages).\r\n\r\nInternal packages may define exported identifiers, but access to them is only allowed to the &quot;internal group&quot;.\r\n\r\nFor example:\r\n\r\n    ├── app\r\n    │   ├── app.go\r\n    │   ├── handler\r\n    │   │   ├── internal\r\n    │   │   │   ├── queries\r\n    │   │   │   │   └── queries.go\r\n    │   │   │   └── foo\r\n    │   │   │       └── foo.go\r\n    │   │   ├── users.go\r\n    │   │   ├── common.go\r\n    │   │   └── users.go\r\n    │   └── model\r\n    │       └── model.go\r\n    ├── config\r\n    │   └── config.go\r\n    └── main.go\r\n\r\nIn this example the `queries` package is accessible by the `handler` package and by the `foo` package, but is not accessible by the `model` or `config` packages.\r\n\r\nIn general, internal packages (packages that are inside a folder that has an `internal` folder in their path) can only be imported from packages rooted at the parent of the `internal` folder.\r\n\r\nSee related questions:\r\n\r\nhttps://stackoverflow.com/questions/45899203/can-i-develop-a-go-package-in-multiple-source-directories/45902409#45902409\r\n\r\nhttps://stackoverflow.com/questions/59342373/use-of-internal-package-not-allowed/59342483#59342483\r\n\r\n\r\n  [1]: https://pkg.go.dev/cmd/go#hdr-Internal_Directories","title":"Restrict variable to itself and to other certain package","body":"<p>Access permission to identifiers is not so fine grained that you can specify who you're granting access. And there's no need. This would unnecessarily complicate both the uses (source code) and the implementation (compilation time, compiled package object and executable binary size).</p>\n<p>If you want to give access to a specific package only, easiest is to merge the packages and make the identifiers unexported.</p>\n<p>If you want to give access to multiple packages or the package would get unpleasantly big, you may use <a href=\"https://pkg.go.dev/cmd/go#hdr-Internal_Directories\" rel=\"nofollow noreferrer\">internal packages</a>. Internal packages were introduced so you can break &quot;big&quot; packages into multiple, smaller ones, and still keep the implementation detail hidden and protected from the &quot;outside&quot; (from other packages).</p>\n<p>Internal packages may define exported identifiers, but access to them is only allowed to the &quot;internal group&quot;.</p>\n<p>For example:</p>\n<pre><code>├── app\n│   ├── app.go\n│   ├── handler\n│   │   ├── internal\n│   │   │   ├── queries\n│   │   │   │   └── queries.go\n│   │   │   └── foo\n│   │   │       └── foo.go\n│   │   ├── users.go\n│   │   ├── common.go\n│   │   └── users.go\n│   └── model\n│       └── model.go\n├── config\n│   └── config.go\n└── main.go\n</code></pre>\n<p>In this example the <code>queries</code> package is accessible by the <code>handler</code> package and by the <code>foo</code> package, but is not accessible by the <code>model</code> or <code>config</code> packages.</p>\n<p>In general, internal packages (packages that are inside a folder that has an <code>internal</code> folder in their path) can only be imported from packages rooted at the parent of the <code>internal</code> folder.</p>\n<p>See related questions:</p>\n<p><a href=\"https://stackoverflow.com/questions/45899203/can-i-develop-a-go-package-in-multiple-source-directories/45902409#45902409\">Can I develop a go package in multiple source directories?</a></p>\n<p><a href=\"https://stackoverflow.com/questions/59342373/use-of-internal-package-not-allowed/59342483#59342483\">Use of internal package not allowed</a></p>\n"}],"owner":{"account_id":8925805,"reputation":13123,"user_id":6660373,"accept_rate":75,"display_name":"Pygirl"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":72,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":72462168,"answer_count":1,"score":0,"last_activity_date":1654088937,"creation_date":1654085684,"question_id":72461734,"body_markdown":"I have this structure:\r\n\r\n\r\n    ├── app\r\n    │   ├── app.go\r\n    │   ├── handler\r\n    │   │   ├── common.go\r\n    │   │   └── users.go\r\n    │   ├── model\r\n    │   │   └── model.go\r\n    │   └── queries\r\n    │       └── queries.go\r\n    ├── config\r\n    │   └── config.go\r\n    └── main.go\r\n\r\nAll my queries (SQL ones) are in `queries.go`:\r\n\r\n**queries.go:**\r\n\r\n    package queries\r\n    \r\n    const (\r\n    \tQueryFindUser = `SELECT * FROM users WHERE id=$1` // &lt;------ HERE\r\n    )\r\n\r\n**users.go:**\r\n\r\n    package handler\r\n    \r\n    import (\r\n    \t&quot;GO_APP/app/model&quot;\r\n    \t&quot;GO_APP/app/queries&quot;\r\n    \t&quot;fmt&quot;\r\n    \t&quot;net/http&quot;\r\n    \t&quot;strconv&quot;\r\n    \t&quot;github.com/julienschmidt/httprouter&quot;\r\n    \t_ &quot;github.com/jinzhu/gorm/dialects/postgres&quot;\r\n    \t&quot;github.com/jmoiron/sqlx&quot;\r\n    )\r\n    \r\n    var db *sqlx.DB\r\n    \r\n    // getUserOr404 gets a User instance if exists, or respond the 404 error otherwise\r\n    func getUserOr404(db *sqlx.DB, id int, w http.ResponseWriter, r *http.Request) (*model.User, error) {\r\n    \tuser := model.User{}\r\n    \terr := db.Get(&amp;user, queries.QueryFindUser, id) // &lt;----- Here\r\n    \treturn &amp;user, err\r\n    }\r\n\r\nIf I use `QueryFindUser` (capital first letter) then it will become exportable to all the other packages. But I don&#39;t want this to be accessible by say `config/config.go`\r\n\r\nI want it to be restricted to `handler`&#39;s modules only exlcluding the `model/model.go`.\r\n\r\nIf I declare `queryFindUser` this will be limited to the package `queries` only and then I won&#39;t be able to use it anywhere.\r\n\r\nHow to solve this thing? Without making it exportable to every other package.\r\nI am quite new to golang/java and this issue will be same in java as well. \r\nSo what to do in this case? \r\nIf you can provide resources that will also be helpful to me.\r\n","title":"Restrict variable to itself and to other certain package","body":"<p>I have this structure:</p>\n<pre><code>├── app\n│   ├── app.go\n│   ├── handler\n│   │   ├── common.go\n│   │   └── users.go\n│   ├── model\n│   │   └── model.go\n│   └── queries\n│       └── queries.go\n├── config\n│   └── config.go\n└── main.go\n</code></pre>\n<p>All my queries (SQL ones) are in <code>queries.go</code>:</p>\n<p><strong>queries.go:</strong></p>\n<pre><code>package queries\n\nconst (\n    QueryFindUser = `SELECT * FROM users WHERE id=$1` // &lt;------ HERE\n)\n</code></pre>\n<p><strong>users.go:</strong></p>\n<pre><code>package handler\n\nimport (\n    &quot;GO_APP/app/model&quot;\n    &quot;GO_APP/app/queries&quot;\n    &quot;fmt&quot;\n    &quot;net/http&quot;\n    &quot;strconv&quot;\n    &quot;github.com/julienschmidt/httprouter&quot;\n    _ &quot;github.com/jinzhu/gorm/dialects/postgres&quot;\n    &quot;github.com/jmoiron/sqlx&quot;\n)\n\nvar db *sqlx.DB\n\n// getUserOr404 gets a User instance if exists, or respond the 404 error otherwise\nfunc getUserOr404(db *sqlx.DB, id int, w http.ResponseWriter, r *http.Request) (*model.User, error) {\n    user := model.User{}\n    err := db.Get(&amp;user, queries.QueryFindUser, id) // &lt;----- Here\n    return &amp;user, err\n}\n</code></pre>\n<p>If I use <code>QueryFindUser</code> (capital first letter) then it will become exportable to all the other packages. But I don't want this to be accessible by say <code>config/config.go</code></p>\n<p>I want it to be restricted to <code>handler</code>'s modules only exlcluding the <code>model/model.go</code>.</p>\n<p>If I declare <code>queryFindUser</code> this will be limited to the package <code>queries</code> only and then I won't be able to use it anywhere.</p>\n<p>How to solve this thing? Without making it exportable to every other package.\nI am quite new to golang/java and this issue will be same in java as well.\nSo what to do in this case?\nIf you can provide resources that will also be helpful to me.</p>\n"},{"tags":["java","jpa","spring-data-jpa","jpql"],"comments":[{"owner":{"account_id":1038596,"reputation":34548,"user_id":1045142,"accept_rate":67,"display_name":"Simon Martinelli"},"score":1,"creation_date":1654091480,"post_id":72462430,"comment_id":128009313,"body_markdown":"No because it&#39;s a native query. So you have write to queries and choose depending on the database.","body":"No because it&#39;s a native query. So you have write to queries and choose depending on the database."}],"owner":{"account_id":23165031,"reputation":13,"user_id":17265104,"display_name":"Apex"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":375,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1654088932,"creation_date":1654088932,"question_id":72462430,"body_markdown":"I need a query to get nextval of a sequence even when I change the database (I have Oracle and Postgres) \r\nWhen I try to use \r\n`@Query(nativeQuery = true, value = &quot;SELECT nextval(&#39;SEQUENCE_USER&#39;)&quot;)`\r\nit works with Postgres but not in Oracle\r\nSame with\r\n`@Query(nativeQuery = true, value = &quot;SELECT SEQUENCE_USER.nextval FROM DUAL&quot;)`\r\nworks with Oracle and not with Postgres\r\nis there some kind of query that can work with both?","title":"Query to get nextval from sequence in Spring JPA while using different databases","body":"<p>I need a query to get nextval of a sequence even when I change the database (I have Oracle and Postgres)\nWhen I try to use\n<code>@Query(nativeQuery = true, value = &quot;SELECT nextval('SEQUENCE_USER')&quot;)</code>\nit works with Postgres but not in Oracle\nSame with\n<code>@Query(nativeQuery = true, value = &quot;SELECT SEQUENCE_USER.nextval FROM DUAL&quot;)</code>\nworks with Oracle and not with Postgres\nis there some kind of query that can work with both?</p>\n"},{"tags":["java","spring","spring-boot","oauth-2.0"],"owner":{"account_id":25446410,"reputation":31,"user_id":19248552,"display_name":"Happy Singh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":497,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1654088860,"creation_date":1654088860,"question_id":72462414,"body_markdown":"I am new to spring security, I have written test endpoint with google oauth2, I can authencitace with web browser and my end point works, but not working with postman,\r\n\r\nhere is my properties\r\n```\r\nspring.security.oauth2.client.registration.google.client-id={{CLIENT_ID}}\r\nspring.security.oauth2.client.registration.google.client-secret={{SECRET}}\r\nspring.security.oauth2.client.registration.google.scope=openid,profile,email\r\n```\r\n\r\nHere is my controller\r\n``` lang-java\r\n@RestController\r\npublic class UserController {\r\n\t@GetMapping()\r\n\tpublic String get() {\r\n\t\treturn &quot;testing java 18&quot;;\r\n\t}\r\n}\r\n```\r\n\r\nHere is my security config\r\n```\r\n@Configuration\r\n@EnableWebSecurity(debug = true)\r\npublic class SecurityConfig {\r\n\t@Bean\r\n\tpublic SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n\t\thttp\r\n\t\t\t.authorizeHttpRequests(authorize -&gt; authorize\r\n\t\t\t\t.anyRequest().authenticated()\r\n\t\t\t)\r\n\t\t\t.oauth2Login(withDefaults());\r\n\t\treturn http.build();\r\n\t}\r\n}\r\n```\r\n\r\nwith above configuration, if I test http://localhost:8080 on browser it redirects to google signing and the text `testing java 18` appears.\r\n\r\nBut when I use postman with below config\r\n```\r\nType: `OAuth 2.0`\r\nAdd authorization to data to: `Request Header`\r\n\r\nConfigure New Token:\r\nToken Name: {{SOME_RANDOM_NAME}}\r\nGrant Type: `Authorization Code`\r\nCallback URL: `https://oauth.pstmn.io/v1/callback`\r\nAuth URL: `https://accounts.google.com/o/oauth2/auth`\r\nAccess Token URL: `https://oauth2.googleapis.com/token`\r\nClient ID: `{{CLIENT_ID}}` same used in application.properties\r\nClient Secret: `{{CLIENT_SECRET}}` same used in application.properties\r\nScope: `profile email openid`\r\nState: empty\r\nClient Authentication: `Send as basic auth header`\r\n```\r\n\r\nWith above if I hit `Get New Access Token`, I do get new `Access Token` and `id_token` with google signing, after I hit `Use Token` I and send GET on the endpoint I get 403\r\nAlso If I use `id_token` and change Type to `Bearer Token` I get the same.\r\n\r\nwith older version If I use below Securityy config, Endpoint works when I send my id_token as Type to `Bearer Token` \r\n\r\n```\r\n@Configuration\r\n@EnableWebSecurity(debug = false)\r\npublic class SecurityConfig extends WebSecurityConfigurerAdapter{\r\n\t@Override\r\n\tprotected void configure(HttpSecurity http) throws Exception {\r\n\t\thttp.authorizeRequests()\r\n\t\t\t.antMatchers(&quot;/**&quot;).fullyAuthenticated()\r\n\t\t\t.and()\r\n\t        .sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS)\r\n\t        .and()\r\n\t        .oauth2ResourceServer().jwt();\r\n\t}\r\n}\r\n```\r\nI tried searching in the forum but didn&#39;t; got much.\r\n","title":"spring boot end point works with browser but not with postman","body":"<p>I am new to spring security, I have written test endpoint with google oauth2, I can authencitace with web browser and my end point works, but not working with postman,</p>\n<p>here is my properties</p>\n<pre><code>spring.security.oauth2.client.registration.google.client-id={{CLIENT_ID}}\nspring.security.oauth2.client.registration.google.client-secret={{SECRET}}\nspring.security.oauth2.client.registration.google.scope=openid,profile,email\n</code></pre>\n<p>Here is my controller</p>\n<pre class=\"lang-java prettyprint-override\"><code>@RestController\npublic class UserController {\n    @GetMapping()\n    public String get() {\n        return &quot;testing java 18&quot;;\n    }\n}\n</code></pre>\n<p>Here is my security config</p>\n<pre><code>@Configuration\n@EnableWebSecurity(debug = true)\npublic class SecurityConfig {\n    @Bean\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n        http\n            .authorizeHttpRequests(authorize -&gt; authorize\n                .anyRequest().authenticated()\n            )\n            .oauth2Login(withDefaults());\n        return http.build();\n    }\n}\n</code></pre>\n<p>with above configuration, if I test http://localhost:8080 on browser it redirects to google signing and the text <code>testing java 18</code> appears.</p>\n<p>But when I use postman with below config</p>\n<pre><code>Type: `OAuth 2.0`\nAdd authorization to data to: `Request Header`\n\nConfigure New Token:\nToken Name: {{SOME_RANDOM_NAME}}\nGrant Type: `Authorization Code`\nCallback URL: `https://oauth.pstmn.io/v1/callback`\nAuth URL: `https://accounts.google.com/o/oauth2/auth`\nAccess Token URL: `https://oauth2.googleapis.com/token`\nClient ID: `{{CLIENT_ID}}` same used in application.properties\nClient Secret: `{{CLIENT_SECRET}}` same used in application.properties\nScope: `profile email openid`\nState: empty\nClient Authentication: `Send as basic auth header`\n</code></pre>\n<p>With above if I hit <code>Get New Access Token</code>, I do get new <code>Access Token</code> and <code>id_token</code> with google signing, after I hit <code>Use Token</code> I and send GET on the endpoint I get 403\nAlso If I use <code>id_token</code> and change Type to <code>Bearer Token</code> I get the same.</p>\n<p>with older version If I use below Securityy config, Endpoint works when I send my id_token as Type to <code>Bearer Token</code></p>\n<pre><code>@Configuration\n@EnableWebSecurity(debug = false)\npublic class SecurityConfig extends WebSecurityConfigurerAdapter{\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n        http.authorizeRequests()\n            .antMatchers(&quot;/**&quot;).fullyAuthenticated()\n            .and()\n            .sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS)\n            .and()\n            .oauth2ResourceServer().jwt();\n    }\n}\n</code></pre>\n<p>I tried searching in the forum but didn't; got much.</p>\n"},{"tags":["java","spring","spring-mvc","tomcat"],"comments":[{"owner":{"account_id":3063992,"reputation":130,"user_id":2596104,"display_name":"Joe ONeil"},"score":0,"creation_date":1511969095,"post_id":47553968,"comment_id":82069590,"body_markdown":"This error can occur if you are using maven to build your project the classes are not cleaned out. It happens if you move a class from one package to another . Do a mvn clean before your build","body":"This error can occur if you are using maven to build your project the classes are not cleaned out. It happens if you move a class from one package to another . Do a mvn clean before your build"}],"answers":[{"tags":[],"owner":{"account_id":18252224,"reputation":41,"user_id":13286987,"display_name":"Dinexpod"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1654088706,"creation_date":1654088706,"answer_id":72462377,"question_id":47553968,"body_markdown":"In my case I go to read Spring doc to find some explanation but I finished when found this in RequestMapping interface:\r\n\r\n`\r\nNote: This annotation can be used both at the class and at the method level. In most cases, at the method level applications will prefer to use one of the HTTP method specific variants @GetMapping, @PostMapping, @PutMapping, @DeleteMapping, or @PatchMapping.\r\n`\r\n\r\nSo I decided also to prefer to use `@GetMapping, @PostMapping, @PutMapping, @DeleteMapping, or @PatchMapping` and it works in my case.\r\n\r\nTry to make:\r\n```\r\n@GetMapping(&quot;/users/&quot;)\r\npublic String saveUser(@RequestBody User user){\r\n    //...\r\n}\r\n\r\n@DeleteMapping(&quot;/users/{uname}&quot;)\r\npublic String deleteUser(@PathVariable String uname){\r\n    //...\r\n}\r\n```\r\n\r\nP.S: also we need use `value` if we need set path:\r\n```\r\n@RequestMapping(value = &quot;/users/&quot;, method = RequestMethod.GET)\r\n```\r\n\r\n`name` its only name, not path","title":"SpringMVC gets an error &quot;There is already controller bean method&quot; although there is any other methods in the same controller","body":"<p>In my case I go to read Spring doc to find some explanation but I finished when found this in RequestMapping interface:</p>\n<p><code>Note: This annotation can be used both at the class and at the method level. In most cases, at the method level applications will prefer to use one of the HTTP method specific variants @GetMapping, @PostMapping, @PutMapping, @DeleteMapping, or @PatchMapping.</code></p>\n<p>So I decided also to prefer to use <code>@GetMapping, @PostMapping, @PutMapping, @DeleteMapping, or @PatchMapping</code> and it works in my case.</p>\n<p>Try to make:</p>\n<pre><code>@GetMapping(&quot;/users/&quot;)\npublic String saveUser(@RequestBody User user){\n    //...\n}\n\n@DeleteMapping(&quot;/users/{uname}&quot;)\npublic String deleteUser(@PathVariable String uname){\n    //...\n}\n</code></pre>\n<p>P.S: also we need use <code>value</code> if we need set path:</p>\n<pre><code>@RequestMapping(value = &quot;/users/&quot;, method = RequestMethod.GET)\n</code></pre>\n<p><code>name</code> its only name, not path</p>\n"}],"owner":{"account_id":7858634,"reputation":153,"user_id":5939682,"display_name":"Janith Ganewatta"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":3722,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1654088706,"creation_date":1511962013,"question_id":47553968,"body_markdown":"I am developing a REST API with Spring MVC.\r\nAnd it builds successfully, but when I try to deploy it to Tomcat 8.0.57\r\nit gives the following error saying I have already a bean method in that controller. But I dont have any two methods with same names or RequestMethod.\r\n\r\nThis is the Apache Tomcat Log\r\n\r\n        29-Nov-2017 18:29:41.796 INFO [http-nio-8087-exec-72] org.apache.catalina.core.ApplicationContext.log 1 Spring WebApplicationInitializers detected on classpath\r\n    29-Nov-2017 18:29:41.844 INFO [http-nio-8087-exec-72] org.apache.catalina.core.ApplicationContext.log Initializing Spring root WebApplicationContext\r\n    29-Nov-2017 18:29:42.783 SEVERE [http-nio-8087-exec-72] org.apache.catalina.core.StandardContext.listenerStart Exception sending context initialized event to listener instance of class org.springframework.web.context.ContextLoaderListener\r\n     org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;requestMappingHandlerMapping&#39; defined in org.springframework.web.servlet.config.annotation.DelegatingWebMvcConfiguration: Invocation of init method failed; nested exception is java.lang.IllegalStateException: Ambiguous mapping. Cannot map &#39;chatUserController&#39; method \r\n    public java.lang.String org.test.chatapi.controller.ChatUserController.saveUser(org.test.chatapi.model.User)\r\n    to {[],methods=[POST]}: There is already &#39;chatMessageController&#39; bean method\r\n    public java.lang.Integer org.test.chatapi.controller.ChatMessageController.saveMessage(org.test.chatapi.model.Message) mapped.\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1578)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:545)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:482)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:306)\r\n    \tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:230)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:302)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197)\r\n    \tat org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:775)\r\n    \tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:861)\r\n    \tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:541)\r\n    \tat org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:444)\r\n    \tat org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:326)\r\n    \tat org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:107)\r\n    \tat org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4736)\r\n    \tat org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5181)\r\n    \tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)\r\n    \tat org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:725)\r\n    \tat org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:701)\r\n    \tat org.apache.catalina.core.StandardHost.addChild(StandardHost.java:717)\r\n    \tat org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:586)\r\n    \tat org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:460)\r\n    \tat org.apache.catalina.startup.HostConfig.check(HostConfig.java:1586)\r\n    \tat sun.reflect.GeneratedMethodAccessor94.invoke(Unknown Source)\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.lang.reflect.Method.invoke(Method.java:498)\r\n    \tat org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:300)\r\n    \tat com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:819)\r\n    \tat com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:801)\r\n    \tat org.apache.catalina.manager.ManagerServlet.check(ManagerServlet.java:1460)\r\n    \tat org.apache.catalina.manager.ManagerServlet.deploy(ManagerServlet.java:906)\r\n    \tat org.apache.catalina.manager.ManagerServlet.doGet(ManagerServlet.java:344)\r\n    \tat javax.servlet.http.HttpServlet.service(HttpServlet.java:622)\r\n    \tat javax.servlet.http.HttpServlet.service(HttpServlet.java:729)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n    \tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n    \tat org.netbeans.modules.web.monitor.server.MonitorFilter.doFilter(MonitorFilter.java:393)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n    \tat org.apache.catalina.filters.SetCharacterEncodingFilter.doFilter(SetCharacterEncodingFilter.java:108)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n    \tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:217)\r\n    \tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)\r\n    \tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:614)\r\n    \tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:142)\r\n    \tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)\r\n    \tat org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:616)\r\n    \tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)\r\n    \tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:518)\r\n    \tat org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1091)\r\n    \tat org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:673)\r\n    \tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1500)\r\n    \tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1456)\r\n    \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\r\n    \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\r\n    \tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n    \tat java.lang.Thread.run(Thread.java:748)\r\n    Caused by: java.lang.IllegalStateException: Ambiguous mapping. Cannot map &#39;chatUserController&#39; method \r\n    public java.lang.String org.test.chatapi.controller.ChatUserController.saveUser(org.test.chatapi.model.User)\r\n    to {[],methods=[POST]}: There is already &#39;chatMessageController&#39; bean method\r\n    public java.lang.Integer org.test.chatapi.controller.ChatMessageController.saveMessage(org.test.chatapi.model.Message) mapped.\r\n    \tat org.springframework.web.servlet.handler.AbstractHandlerMethodMapping$MappingRegistry.assertUniqueMethodMapping(AbstractHandlerMethodMapping.java:570)\r\n    \tat org.springframework.web.servlet.handler.AbstractHandlerMethodMapping$MappingRegistry.register(AbstractHandlerMethodMapping.java:534)\r\n    \tat org.springframework.web.servlet.handler.AbstractHandlerMethodMapping.registerHandlerMethod(AbstractHandlerMethodMapping.java:258)\r\n    \tat org.springframework.web.servlet.handler.AbstractHandlerMethodMapping.detectHandlerMethods(AbstractHandlerMethodMapping.java:244)\r\n    \tat org.springframework.web.servlet.handler.AbstractHandlerMethodMapping.initHandlerMethods(AbstractHandlerMethodMapping.java:214)\r\n    \tat org.springframework.web.servlet.handler.AbstractHandlerMethodMapping.afterPropertiesSet(AbstractHandlerMethodMapping.java:184)\r\n    \tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping.afterPropertiesSet(RequestMappingHandlerMapping.java:124)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1637)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1574)\r\n    \t... 59 more\r\n    \r\n    29-Nov-2017 18:29:42.789 INFO [http-nio-8087-exec-72]  org.apache.catalina.core.ApplicationContext.log Closing Spring root      WebApplicationContext\r\n\r\n\r\nAnd these are the Controllers.\r\nChatUserController\r\n\r\n    @RestController\r\n    public class ChatUserController {\r\n    \r\n    // Store the Users temporarily\r\n    ArrayList&lt;User&gt; users = new ArrayList&lt;&gt;();\r\n    \r\n    // Get all the online users\r\n    @RequestMapping(name = &quot;/users/&quot;, method = RequestMethod.GET)\r\n    public ArrayList&lt;User&gt; getUsers(){\r\n        users.add(new User(&quot;Janith&quot;,&quot;Hellow worlds&quot;));\r\n        return users;\r\n    }\r\n    \r\n    // Save new user / User Login\r\n    @RequestMapping(name = &quot;/users/&quot;,method = RequestMethod.POST)\r\n    public String saveUser(@RequestBody User user){\r\n        if(user != null){\r\n            users.add(user);\r\n            return &quot;Successfull Saved&quot;;\r\n        }else{\r\n            return &quot;Failed&quot;;\r\n        }\r\n    }\r\n    \r\n    // Remove the user /  User sign out\r\n    @RequestMapping(name = &quot;/users/{uname}&quot;, method = RequestMethod.DELETE)\r\n    public String deleteUser(@PathVariable String uname){\r\n        for(User u:users){\r\n            if(u.getUsername().equals(uname)){\r\n                users.remove(u);\r\n                return &quot;Removed Successfully&quot;;\r\n            }\r\n        }\r\n        return &quot;User Not found. Should be already Deleted.&quot;;\r\n    }\r\n    }\r\n\r\nChatMessagesController\r\n\r\n    @RestController\r\n    public class ChatMessageController {\r\n        \r\n        ArrayList&lt;Message&gt; messagesList = new ArrayList&lt;&gt;(); \r\n        \r\n        @RequestMapping(name = &quot;/messages/{username}&quot;, method = RequestMethod.PUT)\r\n        public ArrayList&lt;Message&gt; getChat(@PathVariable String username) {\r\n            \r\n            // create a new list of unread messages\r\n            ArrayList&lt;Message&gt; myMessages = new ArrayList&lt;&gt;();\r\n    \r\n            // add the unread messages to list\r\n            for (Message m : messagesList) {\r\n                if (m.getReciever().equals(username)) {\r\n                    if (!m.isViewed()) {\r\n                        m.setViewed(true);\r\n                        myMessages.add(m);\r\n                    }\r\n                }\r\n            }       \r\n            return myMessages;\r\n        }\r\n        \r\n        @RequestMapping(name = &quot;/messages/&quot;, method = RequestMethod.POST)\r\n        public Integer saveMessage(@RequestBody Message message){\r\n            if(message != null){\r\n                message.setViewed(false);\r\n                messagesList.add(message);\r\n                return new Integer(1);\r\n            }else{\r\n                return new Integer(0);\r\n            }\r\n        }\r\n    }\r\n\r\nBut this ChatUserController worked fine, I deployed and tested it.\r\nThis error is getting after adding the ChatMessageController&#39;s second method saveMessage(). And also this same error showed when the first method getChat() was in GET RequestMethod. It was fixed after I changed it to the PUT method.\r\nI am new to Spring MVC Web API, So I appreciate any help regarding this.","title":"SpringMVC gets an error &quot;There is already controller bean method&quot; although there is any other methods in the same controller","body":"<p>I am developing a REST API with Spring MVC.\nAnd it builds successfully, but when I try to deploy it to Tomcat 8.0.57\nit gives the following error saying I have already a bean method in that controller. But I dont have any two methods with same names or RequestMethod.</p>\n\n<p>This is the Apache Tomcat Log</p>\n\n<pre><code>    29-Nov-2017 18:29:41.796 INFO [http-nio-8087-exec-72] org.apache.catalina.core.ApplicationContext.log 1 Spring WebApplicationInitializers detected on classpath\n29-Nov-2017 18:29:41.844 INFO [http-nio-8087-exec-72] org.apache.catalina.core.ApplicationContext.log Initializing Spring root WebApplicationContext\n29-Nov-2017 18:29:42.783 SEVERE [http-nio-8087-exec-72] org.apache.catalina.core.StandardContext.listenerStart Exception sending context initialized event to listener instance of class org.springframework.web.context.ContextLoaderListener\n org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'requestMappingHandlerMapping' defined in org.springframework.web.servlet.config.annotation.DelegatingWebMvcConfiguration: Invocation of init method failed; nested exception is java.lang.IllegalStateException: Ambiguous mapping. Cannot map 'chatUserController' method \npublic java.lang.String org.test.chatapi.controller.ChatUserController.saveUser(org.test.chatapi.model.User)\nto {[],methods=[POST]}: There is already 'chatMessageController' bean method\npublic java.lang.Integer org.test.chatapi.controller.ChatMessageController.saveMessage(org.test.chatapi.model.Message) mapped.\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1578)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:545)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:482)\n    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:306)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:230)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:302)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:775)\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:861)\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:541)\n    at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:444)\n    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:326)\n    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:107)\n    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4736)\n    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5181)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)\n    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:725)\n    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:701)\n    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:717)\n    at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:586)\n    at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:460)\n    at org.apache.catalina.startup.HostConfig.check(HostConfig.java:1586)\n    at sun.reflect.GeneratedMethodAccessor94.invoke(Unknown Source)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:300)\n    at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:819)\n    at com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:801)\n    at org.apache.catalina.manager.ManagerServlet.check(ManagerServlet.java:1460)\n    at org.apache.catalina.manager.ManagerServlet.deploy(ManagerServlet.java:906)\n    at org.apache.catalina.manager.ManagerServlet.doGet(ManagerServlet.java:344)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:622)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n    at org.netbeans.modules.web.monitor.server.MonitorFilter.doFilter(MonitorFilter.java:393)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n    at org.apache.catalina.filters.SetCharacterEncodingFilter.doFilter(SetCharacterEncodingFilter.java:108)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:217)\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:614)\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:142)\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)\n    at org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:616)\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:518)\n    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1091)\n    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:673)\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1500)\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1456)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n    at java.lang.Thread.run(Thread.java:748)\nCaused by: java.lang.IllegalStateException: Ambiguous mapping. Cannot map 'chatUserController' method \npublic java.lang.String org.test.chatapi.controller.ChatUserController.saveUser(org.test.chatapi.model.User)\nto {[],methods=[POST]}: There is already 'chatMessageController' bean method\npublic java.lang.Integer org.test.chatapi.controller.ChatMessageController.saveMessage(org.test.chatapi.model.Message) mapped.\n    at org.springframework.web.servlet.handler.AbstractHandlerMethodMapping$MappingRegistry.assertUniqueMethodMapping(AbstractHandlerMethodMapping.java:570)\n    at org.springframework.web.servlet.handler.AbstractHandlerMethodMapping$MappingRegistry.register(AbstractHandlerMethodMapping.java:534)\n    at org.springframework.web.servlet.handler.AbstractHandlerMethodMapping.registerHandlerMethod(AbstractHandlerMethodMapping.java:258)\n    at org.springframework.web.servlet.handler.AbstractHandlerMethodMapping.detectHandlerMethods(AbstractHandlerMethodMapping.java:244)\n    at org.springframework.web.servlet.handler.AbstractHandlerMethodMapping.initHandlerMethods(AbstractHandlerMethodMapping.java:214)\n    at org.springframework.web.servlet.handler.AbstractHandlerMethodMapping.afterPropertiesSet(AbstractHandlerMethodMapping.java:184)\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping.afterPropertiesSet(RequestMappingHandlerMapping.java:124)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1637)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1574)\n    ... 59 more\n\n29-Nov-2017 18:29:42.789 INFO [http-nio-8087-exec-72]  org.apache.catalina.core.ApplicationContext.log Closing Spring root      WebApplicationContext\n</code></pre>\n\n<p>And these are the Controllers.\nChatUserController</p>\n\n<pre><code>@RestController\npublic class ChatUserController {\n\n// Store the Users temporarily\nArrayList&lt;User&gt; users = new ArrayList&lt;&gt;();\n\n// Get all the online users\n@RequestMapping(name = \"/users/\", method = RequestMethod.GET)\npublic ArrayList&lt;User&gt; getUsers(){\n    users.add(new User(\"Janith\",\"Hellow worlds\"));\n    return users;\n}\n\n// Save new user / User Login\n@RequestMapping(name = \"/users/\",method = RequestMethod.POST)\npublic String saveUser(@RequestBody User user){\n    if(user != null){\n        users.add(user);\n        return \"Successfull Saved\";\n    }else{\n        return \"Failed\";\n    }\n}\n\n// Remove the user /  User sign out\n@RequestMapping(name = \"/users/{uname}\", method = RequestMethod.DELETE)\npublic String deleteUser(@PathVariable String uname){\n    for(User u:users){\n        if(u.getUsername().equals(uname)){\n            users.remove(u);\n            return \"Removed Successfully\";\n        }\n    }\n    return \"User Not found. Should be already Deleted.\";\n}\n}\n</code></pre>\n\n<p>ChatMessagesController</p>\n\n<pre><code>@RestController\npublic class ChatMessageController {\n\n    ArrayList&lt;Message&gt; messagesList = new ArrayList&lt;&gt;(); \n\n    @RequestMapping(name = \"/messages/{username}\", method = RequestMethod.PUT)\n    public ArrayList&lt;Message&gt; getChat(@PathVariable String username) {\n\n        // create a new list of unread messages\n        ArrayList&lt;Message&gt; myMessages = new ArrayList&lt;&gt;();\n\n        // add the unread messages to list\n        for (Message m : messagesList) {\n            if (m.getReciever().equals(username)) {\n                if (!m.isViewed()) {\n                    m.setViewed(true);\n                    myMessages.add(m);\n                }\n            }\n        }       \n        return myMessages;\n    }\n\n    @RequestMapping(name = \"/messages/\", method = RequestMethod.POST)\n    public Integer saveMessage(@RequestBody Message message){\n        if(message != null){\n            message.setViewed(false);\n            messagesList.add(message);\n            return new Integer(1);\n        }else{\n            return new Integer(0);\n        }\n    }\n}\n</code></pre>\n\n<p>But this ChatUserController worked fine, I deployed and tested it.\nThis error is getting after adding the ChatMessageController's second method saveMessage(). And also this same error showed when the first method getChat() was in GET RequestMethod. It was fixed after I changed it to the PUT method.\nI am new to Spring MVC Web API, So I appreciate any help regarding this.</p>\n"},{"tags":["java","android","token"],"comments":[{"owner":{"account_id":180055,"reputation":75792,"user_id":413127,"accept_rate":96,"display_name":"Blundell"},"score":0,"creation_date":1650017641,"post_id":71882292,"comment_id":127023330,"body_markdown":"Someone else saying the same thing :-) https://stackoverflow.com/a/71880007/413127","body":"Someone else saying the same thing :-) <a href=\"https://stackoverflow.com/a/71880007/413127\">stackoverflow.com/a/71880007/413127</a>"},{"owner":{"account_id":14072435,"reputation":438,"user_id":10165620,"display_name":"axita.savani"},"score":0,"creation_date":1650018091,"post_id":71882292,"comment_id":127023467,"body_markdown":"Hi, @Blundell did you know why not come token in  JWE format?","body":"Hi, @Blundell did you know why not come token in  JWE format?"},{"owner":{"account_id":180055,"reputation":75792,"user_id":413127,"accept_rate":96,"display_name":"Blundell"},"score":0,"creation_date":1650018782,"post_id":71882292,"comment_id":127023663,"body_markdown":"I don&#39;t sorry, had a quick Google for you and I can&#39;t decrypt it","body":"I don&#39;t sorry, had a quick Google for you and I can&#39;t decrypt it"}],"answers":[{"tags":[],"owner":{"account_id":6528051,"reputation":44,"user_id":5050157,"display_name":"James Fairweather"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1650479758,"creation_date":1650479758,"answer_id":71944632,"question_id":71882292,"body_markdown":"That response cannot be decoded locally, you have to call the Google API to do it. If you want to decode the token yourself, do not include a Google Cloud Project number when you build the request token.","title":"I am accessing the Play Integrity API, and the received token is not in the same format as the api document","body":"<p>That response cannot be decoded locally, you have to call the Google API to do it. If you want to decode the token yourself, do not include a Google Cloud Project number when you build the request token.</p>\n"},{"tags":[],"owner":{"account_id":14442041,"reputation":91,"user_id":10432351,"display_name":"Will Luo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1651018595,"creation_date":1651018595,"answer_id":72021898,"question_id":71882292,"body_markdown":"As https://issuetracker.google.com/issues/229508066 said:\r\n\r\nYou are probably setting the setCloudProjectNumber() when making a request to the Integrity API. setCloudProjectNumber() is meant to be used for apps distributed outside of Play (https://developer.android.com/google/play/integrity/setup#apps-exclusively-distributed-outside-google-play) or SDKs (https://developer.android.com/google/play/integrity/setup#sdks). In this case the response cannot be decrypted locally but instead you can only call Google Server to decrypt the token (https://developer.android.com/google/play/integrity/verdict#decrypt-verify-google-servers).\r\n\r\nIf your app is on Play, consider enabling Integrity API via Play Console (https://developer.android.com/google/play/integrity/setup#apps-on-google-play) and call the API without setting setCloudProjectNumber().","title":"I am accessing the Play Integrity API, and the received token is not in the same format as the api document","body":"<p>As <a href=\"https://issuetracker.google.com/issues/229508066\" rel=\"nofollow noreferrer\">https://issuetracker.google.com/issues/229508066</a> said:</p>\n<p>You are probably setting the setCloudProjectNumber() when making a request to the Integrity API. setCloudProjectNumber() is meant to be used for apps distributed outside of Play (<a href=\"https://developer.android.com/google/play/integrity/setup#apps-exclusively-distributed-outside-google-play\" rel=\"nofollow noreferrer\">https://developer.android.com/google/play/integrity/setup#apps-exclusively-distributed-outside-google-play</a>) or SDKs (<a href=\"https://developer.android.com/google/play/integrity/setup#sdks\" rel=\"nofollow noreferrer\">https://developer.android.com/google/play/integrity/setup#sdks</a>). In this case the response cannot be decrypted locally but instead you can only call Google Server to decrypt the token (<a href=\"https://developer.android.com/google/play/integrity/verdict#decrypt-verify-google-servers\" rel=\"nofollow noreferrer\">https://developer.android.com/google/play/integrity/verdict#decrypt-verify-google-servers</a>).</p>\n<p>If your app is on Play, consider enabling Integrity API via Play Console (<a href=\"https://developer.android.com/google/play/integrity/setup#apps-on-google-play\" rel=\"nofollow noreferrer\">https://developer.android.com/google/play/integrity/setup#apps-on-google-play</a>) and call the API without setting setCloudProjectNumber().</p>\n"},{"tags":[],"owner":{"account_id":16392783,"reputation":542,"user_id":11841135,"display_name":"John_S"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1654088311,"creation_date":1654088311,"answer_id":72462342,"question_id":71882292,"body_markdown":"The response you can decode using any hosted service such as the java API service. \r\nThen integrity token can be sent to the Google server from hosted service and you can verify the response received from google. \r\nEnable PlayIntegrity API in Google Cloud Platform against the app and download the JSON file and configure the code.\r\nSimilarly, you should enable PlayIntegrity in Google PlayConsole \r\n\r\n[Please check this snippet][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/72193058/google-playintegrity-api-a-nightmare/72461439#72461439","title":"I am accessing the Play Integrity API, and the received token is not in the same format as the api document","body":"<p>The response you can decode using any hosted service such as the java API service.\nThen integrity token can be sent to the Google server from hosted service and you can verify the response received from google.\nEnable PlayIntegrity API in Google Cloud Platform against the app and download the JSON file and configure the code.\nSimilarly, you should enable PlayIntegrity in Google PlayConsole</p>\n<p><a href=\"https://stackoverflow.com/questions/72193058/google-playintegrity-api-a-nightmare/72461439#72461439\">Please check this snippet</a></p>\n"}],"owner":{"account_id":14072435,"reputation":438,"user_id":10165620,"display_name":"axita.savani"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2839,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":3,"score":2,"last_activity_date":1654088311,"creation_date":1650014765,"question_id":71882292,"body_markdown":"    import com.google.android.gms.tasks.Task; ...\r\n    \r\n    // Receive the nonce from the secure server.\r\n    String nonce = ...\r\n    \r\n    // Create an instance of a manager.\r\n    IntegrityManager integrityManager =\r\n        IntegrityManagerFactory.create(getApplicationContext());\r\n    \r\n    // Request the integrity token by providing a nonce.\r\n    Task&lt;IntegrityTokenResponse&gt; integrityTokenResponse =\r\n        integrityManager\r\n            .requestIntegrityToken(\r\n                IntegrityTokenRequest.builder().setNonce(nonce).build());\r\n\r\n\r\n**Decrypt and verify the integrity verdict**\r\n\r\nWhen you request an integrity verdict, the Play Integrity API provides a signed response token. The nonce that you include in your request becomes part of the response token.\r\n\r\n**Token format**\r\n\r\nThe token is a nested JSON Web Token (JWT), that is JSON Web Encryption (JWE) of JSON Web Signature (JWS). The JWE and JWS components are represented using compact serialization.\r\n\r\nThe encryption / signing algorithms are well-supported across various JWT implementations:\r\n\r\nJWE uses A256KW for alg and A256GCM for enc. JWS uses ES256.\r\n\r\n\r\n**The token I received is as follows**\r\n\r\n    Token : ARCnMGsV6sVWEb3urj95OtQ0Fqn37u5fTN-hqbLtRcRv8OhdMg9BkA9Ev7CWSHfCqNc8ToNkXEhOxWpm26_Oyk8MXwS5gtrLv1iiYqMfAdQTIfRq1VrGAwcGRVe5k5kJw7BJ26UOkLk8Gdjjv_BlGNM8y2p_r0mDsoKXqzSDHJzs2D3mX_mWB6e8zB_Sp6ACgF_2IoYyjkk4eMsunR78MaboeD7nkYvHmdBHB_GT77JaPzrsyi_QMTapFfAfD5gZrdNQkkppF6O_7xfH3qv88Wl3Z1feo-R78iLDyBOgRywIq45kl1QUBAtoUzNpltzwCYiejhaHEuLDLdqKuvjWWHWcnFq55YXrPsPK0DyqqYwE-wq-VxanBs6YXe_SU-xc3zsYXnTVo7SP3GdGF2X6I-j3U7d9MzGRyrUWuh1dzXKqQpNUM7rEPRhoyzez0jl7yyny4q9oEOD-RTPc0Igq2aBCf4_zJoXAPhLWgOpTEKLPLB8Qx4v1HqGdDMFF1kAc5fmuAZTOmqigod_IuE1z6LqBXttL-76hXiQkrh-W_tzb3a5vlByJO_1vx-TWT_SnnTevAGdAdRsaCK1w6d4EG7SxSIOR1UutU4fGR9zwZ4nOOq1qMZRpjG2o0CS6zRnnZQi3wX6h8Ocq7FAKhhM8HBdwOrH8UO_VOc6dKrMhZHPv5ZVXX9SzoUq3a0MOk3mk1FL3t2_e8xweL02OK12t_g_JclL1b0UCQF7S4BRtYhIMEZ8IXkkWQxbTsgdJrkRCU_IEP0F-CiNXwauXPC2rzEEbT4u5DuJfAG8qlTIYDQttqJSQm_LbkFM1ih8b-d1xWO4WJ4HYHmDpkY8ZTg \r\n\r\n","title":"I am accessing the Play Integrity API, and the received token is not in the same format as the api document","body":"<pre><code>import com.google.android.gms.tasks.Task; ...\n\n// Receive the nonce from the secure server.\nString nonce = ...\n\n// Create an instance of a manager.\nIntegrityManager integrityManager =\n    IntegrityManagerFactory.create(getApplicationContext());\n\n// Request the integrity token by providing a nonce.\nTask&lt;IntegrityTokenResponse&gt; integrityTokenResponse =\n    integrityManager\n        .requestIntegrityToken(\n            IntegrityTokenRequest.builder().setNonce(nonce).build());\n</code></pre>\n<p><strong>Decrypt and verify the integrity verdict</strong></p>\n<p>When you request an integrity verdict, the Play Integrity API provides a signed response token. The nonce that you include in your request becomes part of the response token.</p>\n<p><strong>Token format</strong></p>\n<p>The token is a nested JSON Web Token (JWT), that is JSON Web Encryption (JWE) of JSON Web Signature (JWS). The JWE and JWS components are represented using compact serialization.</p>\n<p>The encryption / signing algorithms are well-supported across various JWT implementations:</p>\n<p>JWE uses A256KW for alg and A256GCM for enc. JWS uses ES256.</p>\n<p><strong>The token I received is as follows</strong></p>\n<pre><code>Token : ARCnMGsV6sVWEb3urj95OtQ0Fqn37u5fTN-hqbLtRcRv8OhdMg9BkA9Ev7CWSHfCqNc8ToNkXEhOxWpm26_Oyk8MXwS5gtrLv1iiYqMfAdQTIfRq1VrGAwcGRVe5k5kJw7BJ26UOkLk8Gdjjv_BlGNM8y2p_r0mDsoKXqzSDHJzs2D3mX_mWB6e8zB_Sp6ACgF_2IoYyjkk4eMsunR78MaboeD7nkYvHmdBHB_GT77JaPzrsyi_QMTapFfAfD5gZrdNQkkppF6O_7xfH3qv88Wl3Z1feo-R78iLDyBOgRywIq45kl1QUBAtoUzNpltzwCYiejhaHEuLDLdqKuvjWWHWcnFq55YXrPsPK0DyqqYwE-wq-VxanBs6YXe_SU-xc3zsYXnTVo7SP3GdGF2X6I-j3U7d9MzGRyrUWuh1dzXKqQpNUM7rEPRhoyzez0jl7yyny4q9oEOD-RTPc0Igq2aBCf4_zJoXAPhLWgOpTEKLPLB8Qx4v1HqGdDMFF1kAc5fmuAZTOmqigod_IuE1z6LqBXttL-76hXiQkrh-W_tzb3a5vlByJO_1vx-TWT_SnnTevAGdAdRsaCK1w6d4EG7SxSIOR1UutU4fGR9zwZ4nOOq1qMZRpjG2o0CS6zRnnZQi3wX6h8Ocq7FAKhhM8HBdwOrH8UO_VOc6dKrMhZHPv5ZVXX9SzoUq3a0MOk3mk1FL3t2_e8xweL02OK12t_g_JclL1b0UCQF7S4BRtYhIMEZ8IXkkWQxbTsgdJrkRCU_IEP0F-CiNXwauXPC2rzEEbT4u5DuJfAG8qlTIYDQttqJSQm_LbkFM1ih8b-d1xWO4WJ4HYHmDpkY8ZTg \n</code></pre>\n"},{"tags":["java","json","mongodb","postman","mongodb-java"],"answers":[{"tags":[],"owner":{"account_id":4289211,"reputation":2763,"user_id":3506022,"accept_rate":70,"display_name":"Eria"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1654088134,"creation_date":1654088134,"answer_id":72462305,"question_id":49085840,"body_markdown":"In your `User` class, `courses` is a `List` of `String`.\r\n\r\nSo when you attempt to send `&quot;courses&quot;: &quot;Deneme 5&quot;` in the JSON payload  of your Postman request, you get an error. \r\n\r\nTry sending `&quot;courses&quot;: [&quot;Deneme 5&quot;]` instead. ","title":"Java/Json - Can not deserialize instance of java.util.ArrayList out of VALUE_STRING token","body":"<p>In your <code>User</code> class, <code>courses</code> is a <code>List</code> of <code>String</code>.</p>\n<p>So when you attempt to send <code>&quot;courses&quot;: &quot;Deneme 5&quot;</code> in the JSON payload  of your Postman request, you get an error.</p>\n<p>Try sending <code>&quot;courses&quot;: [&quot;Deneme 5&quot;]</code> instead.</p>\n"}],"owner":{"account_id":8855965,"reputation":41,"user_id":6613735,"display_name":"Mert"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":670,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1654088134,"creation_date":1520091158,"question_id":49085840,"body_markdown":"I have a basic project that when teachers login to system could add courses and when students login to system could select the course and add to their course list. I use MongoDB as database. My problem is, when I want to add new course to student&#39;s course list, I get some error. Here is my PUT annotation for updating course list:\r\n\r\n    @PUT\r\n    @Consumes(MediaType.APPLICATION_JSON)\r\n    @Produces(MediaType.APPLICATION_JSON)\r\n    @Path(&quot;/&quot;)\r\n    public User updateCourses(User user) {\r\n        MongoCollection usersCollection = MongoConnector.getUserCollection();\r\n        UserService userService = new UserService(usersCollection);\r\n        User updatedUser = userService.updateCourses(user);\r\n        return updatedUser;\r\n    }\r\n\r\nAnd here is my User model:\r\n\r\n    public class User {\r\n    \r\n    private String email;\r\n    private String pass;\r\n    private String type;\r\n    private List&lt;String&gt; courses;\r\n\r\n    \r\n    public User(){\r\n    \r\n    }\r\n    \r\n    public User(String email, String pass, String type, List&lt;String&gt; courses) {\r\n        this.email = email;\r\n        this.pass = pass;\r\n        this.type = type;\r\n        this.courses = courses;\r\n    }\r\n\r\n    public String getEmail() {\r\n        return email;\r\n    }\r\n\r\n    public void setEmail(String email) {\r\n        this.email = email;\r\n    }\r\n\r\n    public String getPass() {\r\n        return pass;\r\n    }\r\n\r\n    public void setPass(String pass) {\r\n        this.pass = pass;\r\n    }\r\n\r\n    public String getType() {\r\n        return type;\r\n    }\r\n\r\n    public void setType(String type) {\r\n        this.type = type;\r\n    }\r\n    \r\n    public List&lt;String&gt; getCourses() {\r\n        return courses;\r\n    }\r\n\r\n    public void setCourses(List&lt;String&gt; courses) {\r\n        this.courses = courses;\r\n    }}\r\n\r\nMy Json model:\r\n\r\n    {\r\n    &quot;email&quot;: &quot;deneme@student.com&quot;,\r\n    &quot;pass&quot;: &quot;4&quot;,\r\n    &quot;type&quot;: &quot;student&quot;,\r\n    &quot;courses&quot;: [\r\n        &quot;Deneme1&quot;,\r\n        &quot;Deneme2&quot;,\r\n        &quot;Deneme3&quot;,\r\n        &quot;Deneme4&quot;\r\n    ]\r\n}\r\n\r\nAnd as final my userService funstion to add new course to course list of student:\r\n\r\n    public User updateCourses (User user){\r\n        \r\n        userCollection.updateOne(eq(&quot;email&quot;, user.getEmail()),Updates.addToSet(&quot;courses&quot;, user.getCourses()));\r\n        return user;\r\n    }\r\n\r\nI get this error from Postman:\r\n[enter image description here][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/lMTRU.png\r\n\r\nAs I have searched, I found that my code returns String instead of Json that could be the problem. But I also tried to convert user to Json with Gson but didn&#39;t work. How can I pass this problem?\r\n\r\nThanks in advance","title":"Java/Json - Can not deserialize instance of java.util.ArrayList out of VALUE_STRING token","body":"<p>I have a basic project that when teachers login to system could add courses and when students login to system could select the course and add to their course list. I use MongoDB as database. My problem is, when I want to add new course to student's course list, I get some error. Here is my PUT annotation for updating course list:</p>\n\n<pre><code>@PUT\n@Consumes(MediaType.APPLICATION_JSON)\n@Produces(MediaType.APPLICATION_JSON)\n@Path(\"/\")\npublic User updateCourses(User user) {\n    MongoCollection usersCollection = MongoConnector.getUserCollection();\n    UserService userService = new UserService(usersCollection);\n    User updatedUser = userService.updateCourses(user);\n    return updatedUser;\n}\n</code></pre>\n\n<p>And here is my User model:</p>\n\n<pre><code>public class User {\n\nprivate String email;\nprivate String pass;\nprivate String type;\nprivate List&lt;String&gt; courses;\n\n\npublic User(){\n\n}\n\npublic User(String email, String pass, String type, List&lt;String&gt; courses) {\n    this.email = email;\n    this.pass = pass;\n    this.type = type;\n    this.courses = courses;\n}\n\npublic String getEmail() {\n    return email;\n}\n\npublic void setEmail(String email) {\n    this.email = email;\n}\n\npublic String getPass() {\n    return pass;\n}\n\npublic void setPass(String pass) {\n    this.pass = pass;\n}\n\npublic String getType() {\n    return type;\n}\n\npublic void setType(String type) {\n    this.type = type;\n}\n\npublic List&lt;String&gt; getCourses() {\n    return courses;\n}\n\npublic void setCourses(List&lt;String&gt; courses) {\n    this.courses = courses;\n}}\n</code></pre>\n\n<p>My Json model:</p>\n\n<pre><code>{\n\"email\": \"deneme@student.com\",\n\"pass\": \"4\",\n\"type\": \"student\",\n\"courses\": [\n    \"Deneme1\",\n    \"Deneme2\",\n    \"Deneme3\",\n    \"Deneme4\"\n]\n</code></pre>\n\n<p>}</p>\n\n<p>And as final my userService funstion to add new course to course list of student:</p>\n\n<pre><code>public User updateCourses (User user){\n\n    userCollection.updateOne(eq(\"email\", user.getEmail()),Updates.addToSet(\"courses\", user.getCourses()));\n    return user;\n}\n</code></pre>\n\n<p>I get this error from Postman:\n<a href=\"https://i.stack.imgur.com/lMTRU.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n\n<p>As I have searched, I found that my code returns String instead of Json that could be the problem. But I also tried to convert user to Json with Gson but didn't work. How can I pass this problem?</p>\n\n<p>Thanks in advance</p>\n"},{"tags":["java","mongodb","mongodb-java"],"comments":[{"owner":{"account_id":12317056,"reputation":34706,"user_id":8987128,"display_name":"turivishal"},"score":0,"creation_date":1654015202,"post_id":72450739,"comment_id":127989718,"body_markdown":"you can not rename it by regular update query, use [update with aggregation pipeline](https://www.mongodb.com/docs/manual/tutorial/update-documents-with-aggregation-pipeline/)","body":"you can not rename it by regular update query, use <a href=\"https://www.mongodb.com/docs/manual/tutorial/update-documents-with-aggregation-pipeline/\" rel=\"nofollow noreferrer\">update with aggregation pipeline</a>"}],"answers":[{"tags":[],"owner":{"account_id":17092302,"reputation":9084,"user_id":12368154,"display_name":"Charchit Kapoor"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1654086872,"creation_date":1654086872,"answer_id":72461989,"question_id":72450739,"body_markdown":"As suggested in the comment section, I am afraid this can be done with a simple update query, however, if you are using `MongoDB version 4.2` and above, you can use `$merge` to your advantage, to generate your updated document and merge it in the existing collection like this:\r\n\r\n    MongoClient mongoClient = new MongoClient(\r\n    \t\t\t\tnew MongoClientURI(\r\n    \t\t\t\t\t\t&quot;mongodb://localhost:27017/&quot;\r\n    \t\t\t\t)\r\n    \t\t);\r\n    \t\tMongoDatabase database = mongoClient.getDatabase(&quot;StackOverflow&quot;);\r\n    \t\tMongoCollection&lt;Document&gt; collection = database.getCollection(&quot;Sample&quot;);\r\n    \r\n    \t\tFindIterable&lt;Document&gt; result = (FindIterable&lt;Document&gt;) collection.aggregate(Arrays.asList(new Document(&quot;$match&quot;,\r\n    \t\t\t\t\t\tnew Document(&quot;someArray&quot;,\r\n    \t\t\t\t\t\t\t\tnew Document(&quot;$exists&quot;, true)\r\n    \t\t\t\t\t\t\t\t\t\t.append(&quot;$ne&quot;, Arrays.asList()))),\r\n    \t\t\t\tnew Document(&quot;$unwind&quot;,\r\n    \t\t\t\t\t\tnew Document(&quot;path&quot;, &quot;$someArray&quot;)),\r\n    \t\t\t\tnew Document(&quot;$set&quot;,\r\n    \t\t\t\t\t\tnew Document(&quot;someArray.colors&quot;, Arrays.asList(&quot;$someArray.color&quot;))),\r\n    \t\t\t\tnew Document(&quot;$unset&quot;, &quot;someArray.color&quot;),\r\n    \t\t\t\tnew Document(&quot;$group&quot;,\r\n    \t\t\t\t\t\tnew Document(&quot;_id&quot;, &quot;$_id&quot;)\r\n    \t\t\t\t\t\t\t\t.append(&quot;someArray&quot;,\r\n    \t\t\t\t\t\t\t\t\t\tnew Document(&quot;$push&quot;, &quot;$someArray&quot;))),\r\n    \t\t\t\tnew Document(&quot;$merge&quot;, &quot;collection&quot;)));\r\n\r\nHere is the working, mongo shell equivalent [pipeline][1].\r\n\r\n\r\n  [1]: https://mongoplayground.net/p/spu6LINwnSG","title":"MongoDB Java - Update every sub-array element using another field value","body":"<p>As suggested in the comment section, I am afraid this can be done with a simple update query, however, if you are using <code>MongoDB version 4.2</code> and above, you can use <code>$merge</code> to your advantage, to generate your updated document and merge it in the existing collection like this:</p>\n<pre><code>MongoClient mongoClient = new MongoClient(\n                new MongoClientURI(\n                        &quot;mongodb://localhost:27017/&quot;\n                )\n        );\n        MongoDatabase database = mongoClient.getDatabase(&quot;StackOverflow&quot;);\n        MongoCollection&lt;Document&gt; collection = database.getCollection(&quot;Sample&quot;);\n\n        FindIterable&lt;Document&gt; result = (FindIterable&lt;Document&gt;) collection.aggregate(Arrays.asList(new Document(&quot;$match&quot;,\n                        new Document(&quot;someArray&quot;,\n                                new Document(&quot;$exists&quot;, true)\n                                        .append(&quot;$ne&quot;, Arrays.asList()))),\n                new Document(&quot;$unwind&quot;,\n                        new Document(&quot;path&quot;, &quot;$someArray&quot;)),\n                new Document(&quot;$set&quot;,\n                        new Document(&quot;someArray.colors&quot;, Arrays.asList(&quot;$someArray.color&quot;))),\n                new Document(&quot;$unset&quot;, &quot;someArray.color&quot;),\n                new Document(&quot;$group&quot;,\n                        new Document(&quot;_id&quot;, &quot;$_id&quot;)\n                                .append(&quot;someArray&quot;,\n                                        new Document(&quot;$push&quot;, &quot;$someArray&quot;))),\n                new Document(&quot;$merge&quot;, &quot;collection&quot;)));\n</code></pre>\n<p>Here is the working, mongo shell equivalent <a href=\"https://mongoplayground.net/p/spu6LINwnSG\" rel=\"nofollow noreferrer\">pipeline</a>.</p>\n"},{"tags":[],"owner":{"account_id":4289211,"reputation":2763,"user_id":3506022,"accept_rate":70,"display_name":"Eria"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1654087472,"creation_date":1654087472,"answer_id":72462127,"question_id":72450739,"body_markdown":"The solution I finally came up with...\r\n\r\n```java\r\nMongoCollection&lt;Document&gt; collection = database.getCollection(&quot;myCollection&quot;);\r\ncollection.find(\r\n\tFilters.ne(&quot;someArray&quot;, Collections.emptyList()), MyDocumentRoot.class\r\n).forEach(rootElement -&gt; {\r\n\tfor(int i = 0; i &lt; rootElement.getSomeArray().size(); i++){\r\n\t\tDocument document = collection.find(Filters.eq(&quot;_id&quot;, rootElement.getId())).first();\r\n\t\tString color = document.getList(&quot;someArray&quot;, Document.class)\r\n\t\t\t.get(i)\r\n\t\t\t.getString(&quot;color&quot;);\r\n\t\tcollection.updateOne(\r\n\t\t\tFilters.and(\r\n\t\t\t\tFilters.eq(&quot;_id&quot;, rootElement.getId()),\r\n\t\t\t\tFilters.eq(&quot;someArray._id&quot;, rootElement.getSomeArray().get(i).getId())\r\n\t\t\t),\r\n\t\t\tUpdates.combine(\r\n\t\t\t\tUpdates.set(&quot;someArray.$.colors&quot;, Collections.singleton(color)),\r\n\t\t\t\tUpdates.unset(&quot;someArray.$.color&quot;)\r\n\t\t\t)\r\n\t\t);\r\n\t}\r\n});\r\n```","title":"MongoDB Java - Update every sub-array element using another field value","body":"<p>The solution I finally came up with...</p>\n<pre class=\"lang-java prettyprint-override\"><code>MongoCollection&lt;Document&gt; collection = database.getCollection(&quot;myCollection&quot;);\ncollection.find(\n    Filters.ne(&quot;someArray&quot;, Collections.emptyList()), MyDocumentRoot.class\n).forEach(rootElement -&gt; {\n    for(int i = 0; i &lt; rootElement.getSomeArray().size(); i++){\n        Document document = collection.find(Filters.eq(&quot;_id&quot;, rootElement.getId())).first();\n        String color = document.getList(&quot;someArray&quot;, Document.class)\n            .get(i)\n            .getString(&quot;color&quot;);\n        collection.updateOne(\n            Filters.and(\n                Filters.eq(&quot;_id&quot;, rootElement.getId()),\n                Filters.eq(&quot;someArray._id&quot;, rootElement.getSomeArray().get(i).getId())\n            ),\n            Updates.combine(\n                Updates.set(&quot;someArray.$.colors&quot;, Collections.singleton(color)),\n                Updates.unset(&quot;someArray.$.color&quot;)\n            )\n        );\n    }\n});\n</code></pre>\n"}],"owner":{"account_id":4289211,"reputation":2763,"user_id":3506022,"accept_rate":70,"display_name":"Eria"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":322,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":72462127,"answer_count":2,"score":0,"last_activity_date":1654087472,"creation_date":1654012060,"question_id":72450739,"body_markdown":"I have an existing collection, containing several documents:\r\n\r\n```json\r\n[{\r\n    &quot;_id&quot;: &quot;1&quot;,\r\n    &quot;someArray&quot;: [\r\n        {\r\n            &quot;_id&quot;: &quot;1.1&quot;\r\n\t\t\t&quot;color&quot;: &quot;RED&quot;\r\n        },\r\n        {\r\n\t\t\t&quot;_id&quot;: &quot;1.2&quot;\r\n            &quot;color&quot;: &quot;GREEN&quot;\r\n        },\r\n        {\r\n\t\t\t&quot;_id&quot;: &quot;1.3&quot;\r\n\t\t\t&quot;color&quot;: &quot;GREEN&quot;\r\n        }\r\n    ]\r\n}, {\r\n    &quot;_id&quot;: &quot;2&quot;,\r\n    &quot;someArray&quot;: [\r\n        {\r\n            &quot;_id&quot;: &quot;2.1&quot;\r\n\t\t\t&quot;color&quot;: &quot;WHITE&quot;\r\n        },\r\n        {\r\n\t\t\t&quot;_id&quot;: &quot;2.2&quot;\r\n            &quot;color&quot;: &quot;BLUE&quot;\r\n        }\r\n    ]\r\n}, // many others here...\r\n]\r\n```\r\n\r\nI need to replace the `color` field of the sub-elements by a `colors` field, which is an array containing the same value `color` did.\r\n\r\nHere is the result I want to obtain:\r\n\r\n```json\r\n[{\r\n    &quot;_id&quot;: &quot;1&quot;,\r\n    &quot;someArray&quot;: [\r\n        {\r\n            &quot;_id&quot;: &quot;1.1&quot;\r\n\t\t\t&quot;colors&quot;: [ &quot;RED&quot; ]\r\n        },\r\n        {\r\n\t\t\t&quot;_id&quot;: &quot;1.2&quot;\r\n            &quot;colors&quot;: [ &quot;GREEN&quot; ]\r\n        },\r\n        {\r\n\t\t\t&quot;_id&quot;: &quot;1.3&quot;\r\n\t\t\t&quot;colors&quot;: [ &quot;GREEN&quot; ]\r\n        }\r\n    ]\r\n}, {\r\n    &quot;_id&quot;: &quot;2&quot;,\r\n    &quot;someArray&quot;: [\r\n        {\r\n            &quot;_id&quot;: &quot;2.1&quot;\r\n\t\t\t&quot;colors&quot;: [ &quot;WHITE&quot; ]\r\n        },\r\n        {\r\n\t\t\t&quot;_id&quot;: &quot;2.2&quot;\r\n            &quot;colors&quot;: [ &quot;BLUE&quot; ]\r\n        }\r\n    ]\r\n}]\r\n```\r\n\r\nMy closest attempt was this:\r\n\r\n```java\r\ncollection.updateMany(\r\n    Filters.ne(&quot;someArray&quot;, Collections.emptyList()),\r\n    Updates.combine(\r\n        Updates.set(&quot;someArray.$[].colors&quot;, &quot;[ $someArray.color ]&quot;),\r\n        Updates.unset(&quot;someArray.$[].color&quot;)\r\n    )\r\n);\r\n```\r\n\r\nBut the value of `colors` is inserted as a String, as-is. It&#39;s not interpreted as &quot;an array containing the value of `color` field&quot;.\r\n\r\nThis _**has**_ to be done in Java. Please don&#39;t provide JS-based solution.","title":"MongoDB Java - Update every sub-array element using another field value","body":"<p>I have an existing collection, containing several documents:</p>\n<pre class=\"lang-json prettyprint-override\"><code>[{\n    &quot;_id&quot;: &quot;1&quot;,\n    &quot;someArray&quot;: [\n        {\n            &quot;_id&quot;: &quot;1.1&quot;\n            &quot;color&quot;: &quot;RED&quot;\n        },\n        {\n            &quot;_id&quot;: &quot;1.2&quot;\n            &quot;color&quot;: &quot;GREEN&quot;\n        },\n        {\n            &quot;_id&quot;: &quot;1.3&quot;\n            &quot;color&quot;: &quot;GREEN&quot;\n        }\n    ]\n}, {\n    &quot;_id&quot;: &quot;2&quot;,\n    &quot;someArray&quot;: [\n        {\n            &quot;_id&quot;: &quot;2.1&quot;\n            &quot;color&quot;: &quot;WHITE&quot;\n        },\n        {\n            &quot;_id&quot;: &quot;2.2&quot;\n            &quot;color&quot;: &quot;BLUE&quot;\n        }\n    ]\n}, // many others here...\n]\n</code></pre>\n<p>I need to replace the <code>color</code> field of the sub-elements by a <code>colors</code> field, which is an array containing the same value <code>color</code> did.</p>\n<p>Here is the result I want to obtain:</p>\n<pre class=\"lang-json prettyprint-override\"><code>[{\n    &quot;_id&quot;: &quot;1&quot;,\n    &quot;someArray&quot;: [\n        {\n            &quot;_id&quot;: &quot;1.1&quot;\n            &quot;colors&quot;: [ &quot;RED&quot; ]\n        },\n        {\n            &quot;_id&quot;: &quot;1.2&quot;\n            &quot;colors&quot;: [ &quot;GREEN&quot; ]\n        },\n        {\n            &quot;_id&quot;: &quot;1.3&quot;\n            &quot;colors&quot;: [ &quot;GREEN&quot; ]\n        }\n    ]\n}, {\n    &quot;_id&quot;: &quot;2&quot;,\n    &quot;someArray&quot;: [\n        {\n            &quot;_id&quot;: &quot;2.1&quot;\n            &quot;colors&quot;: [ &quot;WHITE&quot; ]\n        },\n        {\n            &quot;_id&quot;: &quot;2.2&quot;\n            &quot;colors&quot;: [ &quot;BLUE&quot; ]\n        }\n    ]\n}]\n</code></pre>\n<p>My closest attempt was this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>collection.updateMany(\n    Filters.ne(&quot;someArray&quot;, Collections.emptyList()),\n    Updates.combine(\n        Updates.set(&quot;someArray.$[].colors&quot;, &quot;[ $someArray.color ]&quot;),\n        Updates.unset(&quot;someArray.$[].color&quot;)\n    )\n);\n</code></pre>\n<p>But the value of <code>colors</code> is inserted as a String, as-is. It's not interpreted as &quot;an array containing the value of <code>color</code> field&quot;.</p>\n<p>This <em><strong>has</strong></em> to be done in Java. Please don't provide JS-based solution.</p>\n"},{"tags":["java","java-9","java-module","java-platform-module-system"],"comments":[{"owner":{"account_id":4844356,"reputation":462,"user_id":5852531,"display_name":"Thiago Henrique Hupner"},"score":1,"creation_date":1654088184,"post_id":72462039,"comment_id":128008142,"body_markdown":"Maybe module.getDescriptor().provides()?","body":"Maybe module.getDescriptor().provides()?"},{"owner":{"account_id":785560,"reputation":14879,"user_id":845414,"display_name":"Johannes Kuhn"},"score":2,"creation_date":1654092426,"post_id":72462039,"comment_id":128009716,"body_markdown":"`ServiceLoader.load(module.getLayer(), com.foo.Bar).stream().filter(s -&gt; s.type().getModule() == module).findAny()`","body":"<code>ServiceLoader.load(module.getLayer(), com.foo.Bar).stream().filter(s -&gt; s.type().getModule() == module).findAny()</code>"}],"owner":{"account_id":6539656,"reputation":11090,"user_id":5057736,"accept_rate":84,"display_name":"Pavel_K"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":67,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1654087084,"creation_date":1654087084,"question_id":72462039,"body_markdown":"I have a dynamically created layer that has about 25 modules. About 7-10 modules can provide `com.foo.Bar` service. I need to get a service of concrete module - I have a reference to `Module`. Could anyone say how to do it? Details:\r\n\r\n    public com.foo.Bar getService(Module module) {\r\n       //solution one - get all services on this layer, after iterate them and check \r\n       //if some service belongs to `module`. But maybe there are better solutions?\r\n       ?\r\n    }","title":"How to get service of concrete Module in JPMS?","body":"<p>I have a dynamically created layer that has about 25 modules. About 7-10 modules can provide <code>com.foo.Bar</code> service. I need to get a service of concrete module - I have a reference to <code>Module</code>. Could anyone say how to do it? Details:</p>\n<pre><code>public com.foo.Bar getService(Module module) {\n   //solution one - get all services on this layer, after iterate them and check \n   //if some service belongs to `module`. But maybe there are better solutions?\n   ?\n}\n</code></pre>\n"},{"tags":["java","intellij-idea","replace","special-characters"],"comments":[{"owner":{"account_id":25158464,"reputation":438,"user_id":19002974,"display_name":"dangling else"},"score":0,"creation_date":1654085062,"post_id":72461429,"comment_id":128006921,"body_markdown":"It&#39;s displayed as FS because that&#39;s what it is - the ASCII &quot;file separator&quot;. The coding is 001C.","body":"It&#39;s displayed as FS because that&#39;s what it is - the ASCII &quot;file separator&quot;. The coding is 001C."},{"owner":{"account_id":210082,"reputation":19409,"user_id":461499,"accept_rate":73,"display_name":"Rob Audenaerde"},"score":0,"creation_date":1654086029,"post_id":72461429,"comment_id":128007311,"body_markdown":"What is the character-encoding? And what are the actual bytes? It&#39;s hard to tell what the actual data is :)","body":"What is the character-encoding? And what are the actual bytes? It&#39;s hard to tell what the actual data is :)"},{"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"score":0,"creation_date":1654086770,"post_id":72461429,"comment_id":128007578,"body_markdown":"FS = `^\\` = `\\u001C` and NUL = `^@` = `\\u0000`. `s = s.replaceAll(&quot;[\\u0000\\u001C ]&quot;, &quot;&quot;);`","body":"FS = <code>^` = </code>\\u001C` and NUL = <code>^@</code> = <code>\\u0000</code>. <code>s = s.replaceAll(&quot;[\\u0000\\u001C ]&quot;, &quot;&quot;);</code>"},{"owner":{"account_id":6017640,"reputation":8919,"user_id":4725875,"display_name":"DevilsHnd - 退した"},"score":0,"creation_date":1654092912,"post_id":72461429,"comment_id":128009920,"body_markdown":"This should take care of business for any language characters: `str = str.replaceAll(&quot;[^ \\\\p{L}]&quot;, &quot;&quot;);`. Try it against a String like: `String str = &quot;МУЖСКОЕ ЗДОРОВЬЕ^\\\\^@ П&quot;;` which is `MENS HEALTH^\\^@ P` but in Russian.","body":"This should take care of business for any language characters: <code>str = str.replaceAll(&quot;[^ \\\\p{L}]&quot;, &quot;&quot;);</code>. Try it against a String like: <code>String str = &quot;МУЖСКОЕ ЗДОРОВЬЕ^\\\\^@ П&quot;;</code> which is <code>MENS HEALTH^\\^@ P</code> but in Russian."}],"answers":[{"tags":[],"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1654086257,"creation_date":1654085548,"answer_id":72461697,"question_id":72461429,"body_markdown":"You can use a regular expression with [`String.replaceAll()`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html#replaceAll(java.lang.String,java.lang.String)) to replace these characters.\r\n\r\nNote that backslash has a [special meaning](https://docs.oracle.com/javase/tutorial/java/data/characters.html#EscapeSequences) and need to be escaped (with a backslash).\r\n```\r\n&quot;my\\\\^@String&quot;.replaceAll(&quot;[\\\\\\\\^@]&quot;, &quot;&quot;);\r\n```\r\n\r\n[*Online Demo*](https://www.jdoodle.com/ia/rHe)","title":"How to eliminate the special character ^\\^@ from String in Java","body":"<p>You can use a regular expression with <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html#replaceAll(java.lang.String,java.lang.String)\" rel=\"nofollow noreferrer\"><code>String.replaceAll()</code></a> to replace these characters.</p>\n<p>Note that backslash has a <a href=\"https://docs.oracle.com/javase/tutorial/java/data/characters.html#EscapeSequences\" rel=\"nofollow noreferrer\">special meaning</a> and need to be escaped (with a backslash).</p>\n<pre><code>&quot;my\\\\^@String&quot;.replaceAll(&quot;[\\\\\\\\^@]&quot;, &quot;&quot;);\n</code></pre>\n<p><a href=\"https://www.jdoodle.com/ia/rHe\" rel=\"nofollow noreferrer\"><em>Online Demo</em></a></p>\n"},{"tags":[],"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1654086689,"creation_date":1654086689,"answer_id":72461949,"question_id":72461429,"body_markdown":"Rather than worry about what characters the junk consists of, remove everything that *isn&#39;t* what you want to *keep*:\r\n\r\n    str = str.replaceAll(&quot;[^\\\\w ]+&quot;, &quot;&quot;);\r\n\r\nThis deletes any characters that are not *word* characters or spaces.","title":"How to eliminate the special character ^\\^@ from String in Java","body":"<p>Rather than worry about what characters the junk consists of, remove everything that <em>isn't</em> what you want to <em>keep</em>:</p>\n<pre><code>str = str.replaceAll(&quot;[^\\\\w ]+&quot;, &quot;&quot;);\n</code></pre>\n<p>This deletes any characters that are not <em>word</em> characters or spaces.</p>\n"}],"owner":{"account_id":1223005,"reputation":1348,"user_id":1189254,"accept_rate":64,"display_name":"Manish"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":247,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":72461949,"answer_count":2,"score":1,"last_activity_date":1654086689,"creation_date":1654084418,"question_id":72461429,"body_markdown":"My application is reading a file which contains following data:\r\n\r\n    MENS HEALTH^\\^@ P\r\n\r\nwhile actual text should be \r\n\r\n    MENS HEALTH P\r\n\r\nI have already replaced the &#39;\\u0000&#39; but still &quot;^\\\\&quot; is still remaining in the string. I am not sure what is code for this characters, so I can replace it.\r\n\r\nWhen I open the file in ````intelliJ```` editor it&#39;s displayed as FS symbol.\r\n\r\nPlease suggest how I can eliminate this.\r\n\r\nThanks,","title":"How to eliminate the special character ^\\^@ from String in Java","body":"<p>My application is reading a file which contains following data:</p>\n<pre><code>MENS HEALTH^\\^@ P\n</code></pre>\n<p>while actual text should be</p>\n<pre><code>MENS HEALTH P\n</code></pre>\n<p>I have already replaced the '\\u0000' but still &quot;^\\&quot; is still remaining in the string. I am not sure what is code for this characters, so I can replace it.</p>\n<p>When I open the file in <code>intelliJ</code> editor it's displayed as FS symbol.</p>\n<p>Please suggest how I can eliminate this.</p>\n<p>Thanks,</p>\n"},{"tags":["java","spring","architecture","microservices"],"comments":[{"owner":{"account_id":18229672,"reputation":18798,"user_id":13268855,"display_name":"Peter Csala"},"score":0,"creation_date":1654159140,"post_id":72461701,"comment_id":128026420,"body_markdown":"Have you checked the [SAGA pattern](https://microservices.io/patterns/data/saga.html)?","body":"Have you checked the <a href=\"https://microservices.io/patterns/data/saga.html\" rel=\"nofollow noreferrer\">SAGA pattern</a>?"}],"answers":[{"tags":[],"owner":{"account_id":7587005,"reputation":61,"user_id":5755744,"accept_rate":0,"display_name":"Naren Karanam"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1654086581,"creation_date":1654086581,"answer_id":72461923,"question_id":72461701,"body_markdown":"This more sounds like choreography , event driven process. Instead of DB, did u consider using Kafka where status gets enriched at each publish.  ","title":"Microservices that share database","body":"<p>This more sounds like choreography , event driven process. Instead of DB, did u consider using Kafka where status gets enriched at each publish.</p>\n"}],"owner":{"account_id":7527198,"reputation":1099,"user_id":5716914,"accept_rate":11,"display_name":"Johnyb"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":78,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1654086581,"creation_date":1654085577,"question_id":72461701,"body_markdown":"I have an application that can be reduced/simplify to this flow:\r\n\r\n\r\n\r\n1) user sends request to app A\r\n2) app A inserts info about the request and user into DB ( marked as &quot;B in progress&quot; and &quot;C in progress&quot;)\r\n3) app A pushes the data into queue and returns to user\r\n4) app B retrieves data from queue and process it\r\n5) app B finishes processing the data and marks record in DB as &quot;B done&quot;\r\n6) app C retrieves data from queue and process it\r\n7) app C finishes processing the data and marks record in DB as &quot;C done&quot;\r\n\r\nIn other words, user sends request to app, app saves the record to the database and send it to queue, app B and C takes request from queue and process it ( each app does different thing but requires data from request ) and when they are done i want to mark the request in db as done for both APP. \r\n\r\nThis can be achieved, if all apps share DB. However sharing the DB like this between microservices is considered anti-pattern.\r\n\r\nWhat are some design patterns to solve this? Am i really left with only option - make app A expose rest API and call the endpoint from app B and C to update the row in DB?\r\n\r\nThanks for help!","title":"Microservices that share database","body":"<p>I have an application that can be reduced/simplify to this flow:</p>\n<ol>\n<li>user sends request to app A</li>\n<li>app A inserts info about the request and user into DB ( marked as &quot;B in progress&quot; and &quot;C in progress&quot;)</li>\n<li>app A pushes the data into queue and returns to user</li>\n<li>app B retrieves data from queue and process it</li>\n<li>app B finishes processing the data and marks record in DB as &quot;B done&quot;</li>\n<li>app C retrieves data from queue and process it</li>\n<li>app C finishes processing the data and marks record in DB as &quot;C done&quot;</li>\n</ol>\n<p>In other words, user sends request to app, app saves the record to the database and send it to queue, app B and C takes request from queue and process it ( each app does different thing but requires data from request ) and when they are done i want to mark the request in db as done for both APP.</p>\n<p>This can be achieved, if all apps share DB. However sharing the DB like this between microservices is considered anti-pattern.</p>\n<p>What are some design patterns to solve this? Am i really left with only option - make app A expose rest API and call the endpoint from app B and C to update the row in DB?</p>\n<p>Thanks for help!</p>\n"},{"tags":["java","intellij-idea"],"comments":[{"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"score":0,"creation_date":1654084317,"post_id":72460932,"comment_id":128006658,"body_markdown":"This is a known bug in IntelliJ IDEA 2022.1.1, see for example the bug report at https://youtrack.jetbrains.com/issue/IDEA-293951/Console-readLine-skips-input-in-202211","body":"This is a known bug in IntelliJ IDEA 2022.1.1, see for example the bug report at <a href=\"https://youtrack.jetbrains.com/issue/IDEA-293951/Console-readLine-skips-input-in-202211\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com/issue/IDEA-293951/&hellip;</a>"},{"owner":{"account_id":25445474,"reputation":1,"user_id":19247736,"display_name":"Eduardo Litvinchuck"},"score":0,"creation_date":1654086123,"post_id":72460932,"comment_id":128007349,"body_markdown":"You are correct! Installed version 2022.1.2 from snap store and it works as it should","body":"You are correct! Installed version 2022.1.2 from snap store and it works as it should"}],"answers":[{"tags":[],"owner":{"account_id":25445474,"reputation":1,"user_id":19247736,"display_name":"Eduardo Litvinchuck"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1654086363,"creation_date":1654086363,"answer_id":72461868,"question_id":72460932,"body_markdown":"As [Thomas Kl&#228;ger](https://stackoverflow.com/users/5646962/thomas-kl%c3%a4ger) pointed out this is a known bug in Intellij Idea 2022.1.1 . Updating to version 2022.1.2 solved the problem.","title":"Intellij Idea scanner.nextLine() returns empty String","body":"<p>As <a href=\"https://stackoverflow.com/users/5646962/thomas-kl%c3%a4ger\">Thomas Kläger</a> pointed out this is a known bug in Intellij Idea 2022.1.1 . Updating to version 2022.1.2 solved the problem.</p>\n"}],"owner":{"account_id":25445474,"reputation":1,"user_id":19247736,"display_name":"Eduardo Litvinchuck"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":323,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":72461868,"answer_count":1,"score":-1,"last_activity_date":1654086363,"creation_date":1654082280,"question_id":72460932,"body_markdown":"I&#39;ve noticed a weird behavior in Intellij Idea Community Edition run window.\r\n\r\nHere is my code\r\n\r\n```java\r\n\r\n        Scanner scanner = new Scanner(System.in);\r\n        var list = new ArrayList&lt;Integer&gt;();\r\n\r\n        String[] arr = scanner.nextLine().split(&quot; &quot;);\r\n        for (String number : arr) {\r\n            list.add(Integer.parseInt(number));\r\n        }\r\n\r\n        // scanner.nextLine();\r\n\r\n        int n = Integer.parseInt(scanner.nextLine());\r\n```\r\n\r\nWhen I run it with input\r\n\r\n```\r\n1 2 4 5\r\n3\r\n```\r\n\r\nIt will return empty String ```&quot;&quot;``` on ```int n = Integer.parseInt(scanner.nextLine());```, unless I uncomment ```scanner.nextLine()``` on line 9. Then it works as intended and returns ```3```.\r\n\r\nI have tried to run compiled code in a Terminal window and it works just fine without extra ```scanner.nextLine()```.\r\n\r\nI am running it on Zorin OS 16.1, IntelliJ IDEA 2022.1.1 (Community Edition) from flathub.\r\n\r\nThis behavior does not occur when I try it on my Windows 11 machine.\r\n\r\nMy question is why does it occur and how to have the same behavior on all machines?","title":"Intellij Idea scanner.nextLine() returns empty String","body":"<p>I've noticed a weird behavior in Intellij Idea Community Edition run window.</p>\n<p>Here is my code</p>\n<pre class=\"lang-java prettyprint-override\"><code>\n        Scanner scanner = new Scanner(System.in);\n        var list = new ArrayList&lt;Integer&gt;();\n\n        String[] arr = scanner.nextLine().split(&quot; &quot;);\n        for (String number : arr) {\n            list.add(Integer.parseInt(number));\n        }\n\n        // scanner.nextLine();\n\n        int n = Integer.parseInt(scanner.nextLine());\n</code></pre>\n<p>When I run it with input</p>\n<pre><code>1 2 4 5\n3\n</code></pre>\n<p>It will return empty String <code>&quot;&quot;</code> on <code>int n = Integer.parseInt(scanner.nextLine());</code>, unless I uncomment <code>scanner.nextLine()</code> on line 9. Then it works as intended and returns <code>3</code>.</p>\n<p>I have tried to run compiled code in a Terminal window and it works just fine without extra <code>scanner.nextLine()</code>.</p>\n<p>I am running it on Zorin OS 16.1, IntelliJ IDEA 2022.1.1 (Community Edition) from flathub.</p>\n<p>This behavior does not occur when I try it on my Windows 11 machine.</p>\n<p>My question is why does it occur and how to have the same behavior on all machines?</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":8695,"page":1297,"page_size":100}
