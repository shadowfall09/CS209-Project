{"items":[{"tags":["java","xml-parsing","xmldom"],"answers":[{"tags":[],"owner":{"account_id":208830,"reputation":10240,"user_id":459557,"display_name":"vanje"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1637260778,"creation_date":1637260778,"answer_id":70025084,"question_id":70023990,"body_markdown":"You should use XPath to extract the right node like so:\r\n\r\n    import org.w3c.dom.Document;\r\n    import org.xml.sax.InputSource;\r\n    import org.xml.sax.SAXException;\r\n\r\n    import javax.xml.parsers.DocumentBuilder;\r\n    import javax.xml.parsers.DocumentBuilderFactory;\r\n    import javax.xml.parsers.ParserConfigurationException;\r\n    import javax.xml.xpath.XPath;\r\n    import javax.xml.xpath.XPathConstants;\r\n    import javax.xml.xpath.XPathExpressionException;\r\n    import javax.xml.xpath.XPathFactory;\r\n    import java.io.IOException;\r\n    import java.io.StringReader;\r\n\r\n    public class FindViaXpath {\r\n\r\n      private static final String XML =\r\n        &quot; &lt;server&gt;\\n&quot; +\r\n          &quot;    &lt;name&gt;HTTP server&lt;/name&gt;\\n&quot; +\r\n          &quot;    &lt;ssl&gt;\\n&quot; +\r\n          &quot;      &lt;name&gt;HTTPS server&lt;/name&gt;\\n&quot; +\r\n          &quot;      &lt;listen-port&gt;8051&lt;/listen-port&gt;\\n&quot; +\r\n          &quot;    &lt;/ssl&gt;\\n&quot; +\r\n          &quot;    &lt;listen-port&gt;8050&lt;/listen-port&gt;\\n&quot; +\r\n          &quot;  &lt;/server&gt;&quot;;\r\n\r\n      public static void main(String[] args) {\r\n        System.out.println(XML);\r\n\r\n        DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();\r\n        DocumentBuilder builder = null;\r\n        try {\r\n          builder = factory.newDocumentBuilder();\r\n          StringReader reader = new StringReader(XML);\r\n          InputSource source = new InputSource(reader);\r\n          Document document = builder.parse(source);\r\n          XPath xpath = XPathFactory.newInstance().newXPath();\r\n          String port = (String) xpath.evaluate(&quot;//server/listen-port&quot;, document, XPathConstants.STRING);\r\n          System.out.println(String.format(&quot;Port: %s&quot;, port));\r\n        } catch (ParserConfigurationException | SAXException | IOException | XPathExpressionException e) {\r\n          e.printStackTrace();\r\n        }\r\n      }\r\n    }\r\n","title":"Java parse XML parent and child elements with the same name","body":"<p>You should use XPath to extract the right node like so:</p>\n<pre><code>import org.w3c.dom.Document;\nimport org.xml.sax.InputSource;\nimport org.xml.sax.SAXException;\n\nimport javax.xml.parsers.DocumentBuilder;\nimport javax.xml.parsers.DocumentBuilderFactory;\nimport javax.xml.parsers.ParserConfigurationException;\nimport javax.xml.xpath.XPath;\nimport javax.xml.xpath.XPathConstants;\nimport javax.xml.xpath.XPathExpressionException;\nimport javax.xml.xpath.XPathFactory;\nimport java.io.IOException;\nimport java.io.StringReader;\n\npublic class FindViaXpath {\n\n  private static final String XML =\n    &quot; &lt;server&gt;\\n&quot; +\n      &quot;    &lt;name&gt;HTTP server&lt;/name&gt;\\n&quot; +\n      &quot;    &lt;ssl&gt;\\n&quot; +\n      &quot;      &lt;name&gt;HTTPS server&lt;/name&gt;\\n&quot; +\n      &quot;      &lt;listen-port&gt;8051&lt;/listen-port&gt;\\n&quot; +\n      &quot;    &lt;/ssl&gt;\\n&quot; +\n      &quot;    &lt;listen-port&gt;8050&lt;/listen-port&gt;\\n&quot; +\n      &quot;  &lt;/server&gt;&quot;;\n\n  public static void main(String[] args) {\n    System.out.println(XML);\n\n    DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();\n    DocumentBuilder builder = null;\n    try {\n      builder = factory.newDocumentBuilder();\n      StringReader reader = new StringReader(XML);\n      InputSource source = new InputSource(reader);\n      Document document = builder.parse(source);\n      XPath xpath = XPathFactory.newInstance().newXPath();\n      String port = (String) xpath.evaluate(&quot;//server/listen-port&quot;, document, XPathConstants.STRING);\n      System.out.println(String.format(&quot;Port: %s&quot;, port));\n    } catch (ParserConfigurationException | SAXException | IOException | XPathExpressionException e) {\n      e.printStackTrace();\n    }\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":10518149,"reputation":119,"user_id":7751591,"display_name":"Ron"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":615,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70025084,"answer_count":1,"score":0,"last_activity_date":1637260778,"creation_date":1637255445,"question_id":70023990,"body_markdown":"I&#39;m trying to parse some server settings.\r\n\r\n      &lt;server&gt;\r\n        &lt;name&gt;HTTP server&lt;/name&gt;\r\n        &lt;ssl&gt;\r\n          &lt;name&gt;HTTPS server&lt;/name&gt;\r\n          &lt;listen-port&gt;8051&lt;/listen-port&gt;\r\n        &lt;/ssl&gt;\r\n        &lt;listen-port&gt;8050&lt;/listen-port&gt;\r\n      &lt;/server&gt;\r\n\r\nI&#39;m trying to parse both listen ports to variables in my Java program, but I only seem to get the SSL port when I also want to parse the other port.\r\n\r\n\r\n                File inputFile = new File(String.valueOf(Paths.get(serverPath, &quot;config&quot;, &quot;config.xml&quot;)));\r\n                DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();\r\n                DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();\r\n                Document doc = dBuilder.parse(inputFile);\r\n                doc.getDocumentElement().normalize();\r\n    \r\n                NodeList nList = doc.getElementsByTagName(&quot;server&quot;);\r\n    \r\n                for (int temp = 0; temp &lt; nList.getLength(); temp++) {\r\n                    Node node = nList.item(temp);\r\n    \r\n                    if (node.getNodeType() == Node.ELEMENT_NODE) {\r\n                        Element eElement = (Element) node;\r\n    \r\n                        try {\r\n                            HttpPort = eElement.getElementsByTagName(&quot;listen-port&quot;).item(0).getTextContent();\r\n                            System.out.println(&quot;Http: &quot; + HttpPort);\r\n                            Node sslSettings = eElement.getElementsByTagName(&quot;ssl&quot;).item(0);\r\n    \r\n                            if (nList.getLength() == 1) {\r\n                                Element sslElement = (Element) sslSettings;\r\n                                System.out.println(sslElement);\r\n                                HttpsPort = sslElement.getElementsByTagName(&quot;listen-port&quot;).item(0).getTextContent();\r\n                                System.out.println(&quot;Https: &quot; + HttpsPort);\r\n                            }\r\n\r\n\r\n\r\nWhen I try to display the HTTP port in above example (the second listen-port XML tag, but in the parent), it shows the SSL port. \r\nSystem.out.println(&quot;Https: &quot; + HttpsPort); Seems to work as it should.\r\n\r\nAnyone an idea?","title":"Java parse XML parent and child elements with the same name","body":"<p>I'm trying to parse some server settings.</p>\n<pre><code>  &lt;server&gt;\n    &lt;name&gt;HTTP server&lt;/name&gt;\n    &lt;ssl&gt;\n      &lt;name&gt;HTTPS server&lt;/name&gt;\n      &lt;listen-port&gt;8051&lt;/listen-port&gt;\n    &lt;/ssl&gt;\n    &lt;listen-port&gt;8050&lt;/listen-port&gt;\n  &lt;/server&gt;\n</code></pre>\n<p>I'm trying to parse both listen ports to variables in my Java program, but I only seem to get the SSL port when I also want to parse the other port.</p>\n<pre><code>            File inputFile = new File(String.valueOf(Paths.get(serverPath, &quot;config&quot;, &quot;config.xml&quot;)));\n            DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();\n            DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();\n            Document doc = dBuilder.parse(inputFile);\n            doc.getDocumentElement().normalize();\n\n            NodeList nList = doc.getElementsByTagName(&quot;server&quot;);\n\n            for (int temp = 0; temp &lt; nList.getLength(); temp++) {\n                Node node = nList.item(temp);\n\n                if (node.getNodeType() == Node.ELEMENT_NODE) {\n                    Element eElement = (Element) node;\n\n                    try {\n                        HttpPort = eElement.getElementsByTagName(&quot;listen-port&quot;).item(0).getTextContent();\n                        System.out.println(&quot;Http: &quot; + HttpPort);\n                        Node sslSettings = eElement.getElementsByTagName(&quot;ssl&quot;).item(0);\n\n                        if (nList.getLength() == 1) {\n                            Element sslElement = (Element) sslSettings;\n                            System.out.println(sslElement);\n                            HttpsPort = sslElement.getElementsByTagName(&quot;listen-port&quot;).item(0).getTextContent();\n                            System.out.println(&quot;Https: &quot; + HttpsPort);\n                        }\n</code></pre>\n<p>When I try to display the HTTP port in above example (the second listen-port XML tag, but in the parent), it shows the SSL port.\nSystem.out.println(&quot;Https: &quot; + HttpsPort); Seems to work as it should.</p>\n<p>Anyone an idea?</p>\n"},{"tags":["java","spring-boot","spring-security","oauth-2.0","amazon-cognito"],"answers":[{"tags":[],"owner":{"account_id":7134819,"reputation":5058,"user_id":5454842,"display_name":"Marcus Hert da Coregio"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1637260236,"creation_date":1637252113,"answer_id":70023237,"question_id":70022507,"body_markdown":"When you use the `hasRole` DSL method, Spring Security adds the `ROLE_` prefix to your authority. So, the authority `arn:aws:iam::xxxxxx:role/spring-sso-test-ADMIN` will become `ROLE_arn:aws:iam::xxxxxx:role/spring-sso-test-ADMIN`.\r\n\r\nYou should use the `hasAuthority` method instead.\r\n\r\nAdditionally, you should take the `cognito:roles` from the `attributes` and add in the `authorities`, since it&#39;s the property that Spring Security will query to get the authorities.\r\n\r\nTo map the authorities you can use a `OAuth2UserService`:\r\n```java\r\n\r\n@Bean\r\nSecurityFilterChain app(HttpSecurity http) throws Exception {\r\n    http\r\n\t\t\t.oauth2Login(oauth2 -&gt; oauth2\r\n\t\t\t    .userInfoEndpoint(userInfo -&gt; userInfo\r\n\t\t\t        .oidcUserService(this.oidcUserService())\r\n\t\t\t        ...\r\n\t\t\t    )\r\n\t\t\t);\r\n    return http.build();\r\n}\r\n\r\nprivate OAuth2UserService&lt;OidcUserRequest, OidcUser&gt; oidcUserService() {\r\n    // your custom implementation\r\n}\r\n```\r\n\r\nMore details in the [documentation][1].\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-security/reference/servlet/oauth2/login/advanced.html#oauth2login-advanced-map-authorities","title":"Spring security on endpoint using Cognito IAM role?","body":"<p>When you use the <code>hasRole</code> DSL method, Spring Security adds the <code>ROLE_</code> prefix to your authority. So, the authority <code>arn:aws:iam::xxxxxx:role/spring-sso-test-ADMIN</code> will become <code>ROLE_arn:aws:iam::xxxxxx:role/spring-sso-test-ADMIN</code>.</p>\n<p>You should use the <code>hasAuthority</code> method instead.</p>\n<p>Additionally, you should take the <code>cognito:roles</code> from the <code>attributes</code> and add in the <code>authorities</code>, since it's the property that Spring Security will query to get the authorities.</p>\n<p>To map the authorities you can use a <code>OAuth2UserService</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>\n@Bean\nSecurityFilterChain app(HttpSecurity http) throws Exception {\n    http\n            .oauth2Login(oauth2 -&gt; oauth2\n                .userInfoEndpoint(userInfo -&gt; userInfo\n                    .oidcUserService(this.oidcUserService())\n                    ...\n                )\n            );\n    return http.build();\n}\n\nprivate OAuth2UserService&lt;OidcUserRequest, OidcUser&gt; oidcUserService() {\n    // your custom implementation\n}\n</code></pre>\n<p>More details in the <a href=\"https://docs.spring.io/spring-security/reference/servlet/oauth2/login/advanced.html#oauth2login-advanced-map-authorities\" rel=\"nofollow noreferrer\">documentation</a>.</p>\n"}],"owner":{"account_id":1072602,"reputation":3808,"user_id":1071515,"accept_rate":93,"display_name":"tomaytotomato"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":786,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":70023237,"answer_count":1,"score":1,"last_activity_date":1637260236,"creation_date":1637249261,"question_id":70022507,"body_markdown":"I am trying to restrict specific endpoints on a Spring boot service depending on what role they have set in the OAuth2 credentials.\r\n\r\nThis is the endpoint \r\n\r\n```\r\n@RestController\r\n@RequestMapping(&quot;/api/admin&quot;)\r\npublic class AdminController {\r\n\r\n    @GetMapping(produces = &quot;application/json&quot;)\r\n    public TestResponse get() {\r\n        return new TestResponse(&quot;Admin API Response&quot;);\r\n    }\r\n}\r\n```\r\n\r\nThis is then secured using SecurityConfiguration bean\r\n\r\n```\r\n@Configuration\r\npublic class SecurityConfiguration extends WebSecurityConfigurerAdapter {\r\n\r\n    @Override\r\n    protected void configure(HttpSecurity http) throws Exception {\r\n\r\n        http.csrf()\r\n            .and()\r\n            .authorizeRequests()\r\n            .antMatchers(&quot;/login&quot;, &quot;/&quot;, &quot;/home&quot;, &quot;/logout&quot;, &quot;/ping&quot;).permitAll()\r\n            .antMatchers(&quot;/api/admin&quot;).hasRole(&quot;arn:aws:iam::xxxxxx:role/spring-sso-test-ADMIN&quot;)\r\n            .antMatchers(&quot;/api/user&quot;).hasRole(&quot;arn:aws:iam::xxxxxx:role/spring-sso-test-USER&quot;)\r\n            .and()\r\n            .oauth2Login()\r\n            .and()\r\n            .logout()\r\n            .logoutSuccessUrl(&quot;/logout&quot;);\r\n    }\r\n}\r\n```\r\n\r\n\r\nI debugged the Principal and can see the correct IAM role in the list of attributes `cognito:roles` list \r\n\r\n[![aws cognito spring security principal][1]][1]\r\n\r\nHowever when I hit the endpoint I get a HTTP 403 Unauthorized. Meaning that the user has authenticated successfully, but Spring does not recognize or understand the attributes or how to map them?\r\n\r\nI tried using the @Secured annotation but that didn&#39;t change anything.\r\n\r\n```\r\n@Secured(&quot;arn:aws:iam::xxxxxx:role/spring-sso-test-ADMIN&quot;)\r\n@GetMapping(produces = &quot;application/json&quot;)\r\npublic TestResponse get() {\r\n        return new TestResponse(&quot;Admin API Response&quot;);\r\n}\r\n```\r\n\r\nHow do I allow this to work using an IAM role defined in AWS Cognito? \r\n\r\n  [1]: https://i.stack.imgur.com/vjzhl.png","title":"Spring security on endpoint using Cognito IAM role?","body":"<p>I am trying to restrict specific endpoints on a Spring boot service depending on what role they have set in the OAuth2 credentials.</p>\n<p>This is the endpoint</p>\n<pre><code>@RestController\n@RequestMapping(&quot;/api/admin&quot;)\npublic class AdminController {\n\n    @GetMapping(produces = &quot;application/json&quot;)\n    public TestResponse get() {\n        return new TestResponse(&quot;Admin API Response&quot;);\n    }\n}\n</code></pre>\n<p>This is then secured using SecurityConfiguration bean</p>\n<pre><code>@Configuration\npublic class SecurityConfiguration extends WebSecurityConfigurerAdapter {\n\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n\n        http.csrf()\n            .and()\n            .authorizeRequests()\n            .antMatchers(&quot;/login&quot;, &quot;/&quot;, &quot;/home&quot;, &quot;/logout&quot;, &quot;/ping&quot;).permitAll()\n            .antMatchers(&quot;/api/admin&quot;).hasRole(&quot;arn:aws:iam::xxxxxx:role/spring-sso-test-ADMIN&quot;)\n            .antMatchers(&quot;/api/user&quot;).hasRole(&quot;arn:aws:iam::xxxxxx:role/spring-sso-test-USER&quot;)\n            .and()\n            .oauth2Login()\n            .and()\n            .logout()\n            .logoutSuccessUrl(&quot;/logout&quot;);\n    }\n}\n</code></pre>\n<p>I debugged the Principal and can see the correct IAM role in the list of attributes <code>cognito:roles</code> list</p>\n<p><a href=\"https://i.stack.imgur.com/vjzhl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vjzhl.png\" alt=\"aws cognito spring security principal\" /></a></p>\n<p>However when I hit the endpoint I get a HTTP 403 Unauthorized. Meaning that the user has authenticated successfully, but Spring does not recognize or understand the attributes or how to map them?</p>\n<p>I tried using the @Secured annotation but that didn't change anything.</p>\n<pre><code>@Secured(&quot;arn:aws:iam::xxxxxx:role/spring-sso-test-ADMIN&quot;)\n@GetMapping(produces = &quot;application/json&quot;)\npublic TestResponse get() {\n        return new TestResponse(&quot;Admin API Response&quot;);\n}\n</code></pre>\n<p>How do I allow this to work using an IAM role defined in AWS Cognito?</p>\n"},{"tags":["java","lambda","java-8"],"comments":[{"owner":{"account_id":4264083,"reputation":6317,"user_id":3487617,"display_name":"Hank D"},"score":1,"creation_date":1460060386,"post_id":36478579,"comment_id":60582072,"body_markdown":"does the use of `limit()` imply that you know the number of lines in advance? If so you could use an `IntStream.range()` and then use `mapToObject()` to combine successive ints with successive lines from a `BufferedReader` or stream iterator","body":"does the use of <code>limit()</code> imply that you know the number of lines in advance? If so you could use an <code>IntStream.range()</code> and then use <code>mapToObject()</code> to combine successive ints with successive lines from a <code>BufferedReader</code> or stream iterator"},{"owner":{"account_id":1352510,"reputation":6888,"user_id":1291716,"accept_rate":93,"display_name":"Sayakiss"},"score":0,"creation_date":1460076835,"post_id":36478579,"comment_id":60588171,"body_markdown":"@HankD No, I don&#39;t. Use `limit()` here is for testing my code...","body":"@HankD No, I don&#39;t. Use <code>limit()</code> here is for testing my code..."}],"answers":[{"tags":[],"owner":{"account_id":3557625,"reputation":198996,"user_id":2970947,"display_name":"Elliott Frisch"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1460038392,"creation_date":1460038392,"answer_id":36478849,"question_id":36478579,"body_markdown":"You might use an [`AtomicInteger`](http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/atomic/AtomicInteger.html)&lt;sup&gt;1&lt;/sup&gt; like\r\n\r\n    AtomicInteger ai = new AtomicInteger();\r\n    // ...\r\n    lines.limit(10).forEachOrdered(line -&gt; {\r\n        System.out.printf(&quot;Line %d: %s%n&quot;, ai.incrementAndGet(), line.trim());\r\n    });\r\n\r\n&lt;sup&gt;1&lt;sub&gt;And I would prefer formatted IO with `printf` to using `String` concatenation.&lt;/sub&gt;&lt;/sup&gt;","title":"Java: The elegant way to add a line number to a file with lambda","body":"<p>You might use an <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/atomic/AtomicInteger.html\" rel=\"nofollow\"><code>AtomicInteger</code></a><sup>1</sup> like</p>\n\n<pre><code>AtomicInteger ai = new AtomicInteger();\n// ...\nlines.limit(10).forEachOrdered(line -&gt; {\n    System.out.printf(\"Line %d: %s%n\", ai.incrementAndGet(), line.trim());\n});\n</code></pre>\n\n<p><sup>1<sub>And I would prefer formatted IO with <code>printf</code> to using <code>String</code> concatenation.</sub></sup></p>\n"},{"tags":[],"owner":{"account_id":1852014,"reputation":24139,"user_id":1678362,"display_name":"Aaron"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1460038999,"creation_date":1460038999,"answer_id":36479117,"question_id":36478579,"body_markdown":"I would implement a `Function` to number the lines :\r\n\r\n\r\n    public static class LineNumberer implements Function&lt;String,String&gt; {\r\n\t\tprivate int lineCount;\r\n\t\tpublic lineNumberer() { lineCount = 0; }\r\n\t\tpublic String apply(String in) {\r\n\t\t\treturn String.format(&quot;%d %s&quot;, lineCount++, in);\r\n\t\t}\r\n\t}\r\n\t\r\n\t\r\n\tpublic static void main (String[] args) throws java.lang.Exception\r\n\t{\r\n\t\tFiles.lines(Paths.get(&quot;/tmp/timeline.txt&quot;)).map(new LineNumberer()).forEach(System.out::println);\r\n\t}\r\n\t","title":"Java: The elegant way to add a line number to a file with lambda","body":"<p>I would implement a <code>Function</code> to number the lines :</p>\n\n<pre><code>public static class LineNumberer implements Function&lt;String,String&gt; {\n    private int lineCount;\n    public lineNumberer() { lineCount = 0; }\n    public String apply(String in) {\n        return String.format(\"%d %s\", lineCount++, in);\n    }\n}\n\n\npublic static void main (String[] args) throws java.lang.Exception\n{\n    Files.lines(Paths.get(\"/tmp/timeline.txt\")).map(new LineNumberer()).forEach(System.out::println);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1460047329,"creation_date":1460046591,"answer_id":36482091,"question_id":36478579,"body_markdown":"There is no elegant functional solution to a non-functional task. The first you may consider, is just resorting to an ordinary anonymous inner class:\r\n\r\n    String path = &quot;/tmp/timeline.txt&quot;;\r\n    try(Stream&lt;String&gt; lines = Files.lines(Paths.get(path), Charset.defaultCharset())) {\r\n        lines.limit(10).forEachOrdered(new Consumer&lt;String&gt;() {\r\n            int counter = 0;\r\n            public void accept(String line) {\r\n                System.out.println(&quot;Line &quot; + counter++ + &quot;: &quot; + line.trim());\r\n            }\r\n        });\r\n    } catch (IOException e) {\r\n        e.printStackTrace();\r\n    }\r\nThe advantage is that it doesn’t pretend to be functional where it isn’t and the scope of the `counter` variable has the smallest scope needed for this task.\r\n\r\n---\r\nIf you are going to do more than just-printing these numbered lines and need a solution compatible with all stream operations, re-implementing the stream source is a straight-forward solution:\r\n\r\n    static Stream&lt;String&gt; numberedLines(Path path, Charset cs) throws IOException {\r\n        BufferedReader br = Files.newBufferedReader(path, cs);\r\n        return StreamSupport.stream(new Spliterators.AbstractSpliterator&lt;String&gt;(\r\n                Long.MAX_VALUE, Spliterator.ORDERED|Spliterator.NONNULL) {\r\n            int counter;\r\n            public boolean tryAdvance(Consumer&lt;? super String&gt; action) {\r\n                String line;\r\n                try {\r\n                    line = br.readLine();\r\n                    if(line==null) return false;\r\n                    action.accept(&quot;Line &quot; + counter++ + &quot;: &quot; + line.trim());\r\n                    return true;\r\n                } catch (IOException ex) {\r\n                    throw new UncheckedIOException(ex);\r\n                }\r\n            }\r\n        }, true).onClose(()-&gt;{ try { br.close(); }\r\n            catch (IOException ex) { throw new UncheckedIOException(ex); }\r\n        });\r\n    }\r\n\r\nOf course, this isn’t as simple as a single lambda expression but using this reusable method, you can use all stream operations without problems, e.g.\r\n\r\n    String path = &quot;/tmp/timeline.txt&quot;;\r\n    try(Stream&lt;String&gt; lines = numberedLines(Paths.get(path), Charset.defaultCharset())) {\r\n        lines.skip(10).limit(10).forEachOrdered(System.out::println);\r\n    } catch(IOException e) {\r\n        e.printStackTrace();\r\n    }\r\n","title":"Java: The elegant way to add a line number to a file with lambda","body":"<p>There is no elegant functional solution to a non-functional task. The first you may consider, is just resorting to an ordinary anonymous inner class:</p>\n\n<pre><code>String path = \"/tmp/timeline.txt\";\ntry(Stream&lt;String&gt; lines = Files.lines(Paths.get(path), Charset.defaultCharset())) {\n    lines.limit(10).forEachOrdered(new Consumer&lt;String&gt;() {\n        int counter = 0;\n        public void accept(String line) {\n            System.out.println(\"Line \" + counter++ + \": \" + line.trim());\n        }\n    });\n} catch (IOException e) {\n    e.printStackTrace();\n}\n</code></pre>\n\n<p>The advantage is that it doesn’t pretend to be functional where it isn’t and the scope of the <code>counter</code> variable has the smallest scope needed for this task.</p>\n\n<hr>\n\n<p>If you are going to do more than just-printing these numbered lines and need a solution compatible with all stream operations, re-implementing the stream source is a straight-forward solution:</p>\n\n<pre><code>static Stream&lt;String&gt; numberedLines(Path path, Charset cs) throws IOException {\n    BufferedReader br = Files.newBufferedReader(path, cs);\n    return StreamSupport.stream(new Spliterators.AbstractSpliterator&lt;String&gt;(\n            Long.MAX_VALUE, Spliterator.ORDERED|Spliterator.NONNULL) {\n        int counter;\n        public boolean tryAdvance(Consumer&lt;? super String&gt; action) {\n            String line;\n            try {\n                line = br.readLine();\n                if(line==null) return false;\n                action.accept(\"Line \" + counter++ + \": \" + line.trim());\n                return true;\n            } catch (IOException ex) {\n                throw new UncheckedIOException(ex);\n            }\n        }\n    }, true).onClose(()-&gt;{ try { br.close(); }\n        catch (IOException ex) { throw new UncheckedIOException(ex); }\n    });\n}\n</code></pre>\n\n<p>Of course, this isn’t as simple as a single lambda expression but using this reusable method, you can use all stream operations without problems, e.g.</p>\n\n<pre><code>String path = \"/tmp/timeline.txt\";\ntry(Stream&lt;String&gt; lines = numberedLines(Paths.get(path), Charset.defaultCharset())) {\n    lines.skip(10).limit(10).forEachOrdered(System.out::println);\n} catch(IOException e) {\n    e.printStackTrace();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2111403,"reputation":33698,"user_id":1876620,"accept_rate":94,"display_name":"fps"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1460173447,"creation_date":1460055245,"answer_id":36484831,"question_id":36478579,"body_markdown":"If you have a class that holds a pair of values:\r\n\r\n    public final class Tuple2&lt;A, B&gt; {\r\n    \r\n        private final A $1;\r\n    \r\n        private final B $2;\r\n    \r\n        public Tuple2(A $1, B $2) {\r\n            this.$1 = $1;\r\n            this.$2 = $2;\r\n        }\r\n    \r\n        public A $1() {\r\n            return $1;\r\n        }\r\n    \r\n        public B $2() {\r\n            return $2;\r\n        }\r\n\r\n        // TODO hashCode equals toString\r\n    }\r\n\r\nAnd these methods:\r\n\r\n    public static &lt;T&gt; Stream&lt;T&gt; streamOf(Iterator&lt;T&gt; iterator) {\r\n        return StreamSupport.stream(\r\n                Spliterators.spliteratorUnknownSize(\r\n                        iterator,\r\n                        Spliterator.ORDERED),\r\n                false);\r\n    }\r\n\r\n    public static &lt;T&gt; Stream&lt;Tuple2&lt;T, Long&gt;&gt; withIndex(\r\n        Stream&lt;T&gt; stream, int startIndex) {\r\n\r\n        Iterator&lt;T&gt; it = stream.iterator();\r\n        return streamOf(new Iterator&lt;Tuple2&lt;T, Long&gt;&gt;() {\r\n\r\n            private long index = startIndex;\r\n\r\n            @Override\r\n            public boolean hasNext() {\r\n                return it.hasNext();\r\n            }\r\n\r\n            @Override\r\n            public Tuple2&lt;T, Long&gt; next() {\r\n                return new Tuple2&lt;&gt;(it.next(), index++);\r\n            }\r\n        });\r\n    }\r\n\r\nwhich create a stream of pairs, with one element being the original stream&#39;s element and the other one being the index, then you could easily solve your problem as follows:\r\n\r\n    Stream&lt;String&gt; originalStream = lines.limit(10).map(String::trim);\r\n\r\n    withIndex(originalStream, 1)\r\n        .forEachOrdered(t -&gt; System.out.printf(&quot;Line %d: %s%n&quot;, t.$2(), t.$1());\r\n\r\n**NOTE: This only works with sequential streams**, which is the case.","title":"Java: The elegant way to add a line number to a file with lambda","body":"<p>If you have a class that holds a pair of values:</p>\n\n<pre><code>public final class Tuple2&lt;A, B&gt; {\n\n    private final A $1;\n\n    private final B $2;\n\n    public Tuple2(A $1, B $2) {\n        this.$1 = $1;\n        this.$2 = $2;\n    }\n\n    public A $1() {\n        return $1;\n    }\n\n    public B $2() {\n        return $2;\n    }\n\n    // TODO hashCode equals toString\n}\n</code></pre>\n\n<p>And these methods:</p>\n\n<pre><code>public static &lt;T&gt; Stream&lt;T&gt; streamOf(Iterator&lt;T&gt; iterator) {\n    return StreamSupport.stream(\n            Spliterators.spliteratorUnknownSize(\n                    iterator,\n                    Spliterator.ORDERED),\n            false);\n}\n\npublic static &lt;T&gt; Stream&lt;Tuple2&lt;T, Long&gt;&gt; withIndex(\n    Stream&lt;T&gt; stream, int startIndex) {\n\n    Iterator&lt;T&gt; it = stream.iterator();\n    return streamOf(new Iterator&lt;Tuple2&lt;T, Long&gt;&gt;() {\n\n        private long index = startIndex;\n\n        @Override\n        public boolean hasNext() {\n            return it.hasNext();\n        }\n\n        @Override\n        public Tuple2&lt;T, Long&gt; next() {\n            return new Tuple2&lt;&gt;(it.next(), index++);\n        }\n    });\n}\n</code></pre>\n\n<p>which create a stream of pairs, with one element being the original stream's element and the other one being the index, then you could easily solve your problem as follows:</p>\n\n<pre><code>Stream&lt;String&gt; originalStream = lines.limit(10).map(String::trim);\n\nwithIndex(originalStream, 1)\n    .forEachOrdered(t -&gt; System.out.printf(\"Line %d: %s%n\", t.$2(), t.$1());\n</code></pre>\n\n<p><strong>NOTE: This only works with sequential streams</strong>, which is the case.</p>\n"},{"tags":[],"owner":{"account_id":13080631,"reputation":1,"user_id":9451318,"display_name":"Denis Manikhin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637259959,"creation_date":1637259959,"answer_id":70024913,"question_id":36478579,"body_markdown":"Jast use zip. https://stackoverflow.com/questions/1115563/what-is-zip-functional-programming\r\n\r\n    import com.google.common.collect.Streams;\r\n    import java.io.IOException;\r\n    import java.nio.file.Files;\r\n    import java.nio.file.Paths;\r\n    import java.util.stream.Stream;\r\n\r\n    class Pair&lt;F, S&gt; {\r\n        public final F first;\r\n        public final S second;\r\n        public Pair(F first, S second) {\r\n          this.first = first;\r\n          this.second = second;\r\n        }\r\n        public String toString(){\r\n            return second.toString()+&quot;: &quot;+first;\r\n        }\r\n    }\r\n\r\n    public class StreamExample {\r\n        static public void show(String fileName){\r\n            Stream&lt;Integer&gt; streamInt = Stream.iterate(1, i -&gt; i + 1);\r\n            try (Stream&lt;String&gt; streamStr = Files.lines(Paths.get(fileName))) {\r\n            Streams.zip(\r\n                    streamStr,streamInt,\r\n                    (firstStr, secondStr) -&gt;new Pair(firstStr,secondStr))\r\n                    .limit(10)\r\n                    .forEach(System.out::println);\r\n            } catch (IOException e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n    }","title":"Java: The elegant way to add a line number to a file with lambda","body":"<p>Jast use zip. <a href=\"https://stackoverflow.com/questions/1115563/what-is-zip-functional-programming\">What is zip (functional programming?)</a></p>\n<pre><code>import com.google.common.collect.Streams;\nimport java.io.IOException;\nimport java.nio.file.Files;\nimport java.nio.file.Paths;\nimport java.util.stream.Stream;\n\nclass Pair&lt;F, S&gt; {\n    public final F first;\n    public final S second;\n    public Pair(F first, S second) {\n      this.first = first;\n      this.second = second;\n    }\n    public String toString(){\n        return second.toString()+&quot;: &quot;+first;\n    }\n}\n\npublic class StreamExample {\n    static public void show(String fileName){\n        Stream&lt;Integer&gt; streamInt = Stream.iterate(1, i -&gt; i + 1);\n        try (Stream&lt;String&gt; streamStr = Files.lines(Paths.get(fileName))) {\n        Streams.zip(\n                streamStr,streamInt,\n                (firstStr, secondStr) -&gt;new Pair(firstStr,secondStr))\n                .limit(10)\n                .forEach(System.out::println);\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":1352510,"reputation":6888,"user_id":1291716,"accept_rate":93,"display_name":"Sayakiss"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2622,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":36482091,"answer_count":5,"score":5,"last_activity_date":1637259959,"creation_date":1460037795,"question_id":36478579,"body_markdown":"I get used to using lambda to parse file line by line(much neater than `bufferedReader.readLine()`) for a long time. But today I faced a problem: add a line number to each line. \r\n\r\nIt need a counter, but the variable in lambda should be effectively final.  Finally, I hacked it with an int array.\r\n\r\nCode:\r\n\r\n    public static void main(String[] args) {\r\n        int[] counter = new int[1];\r\n        counter[0] = 0;\r\n        try (Stream&lt;String&gt; lines = Files.lines(Paths.get(&quot;/tmp/timeline.txt&quot;), Charset.defaultCharset())) {\r\n            lines.limit(10).forEachOrdered(line -&gt; {\r\n                line = line.trim();\r\n                counter[0] ++;\r\n                System.out.println(&quot;Line &quot; + counter[0] + &quot;: &quot; + line);\r\n            });\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\nOutput:\r\n\r\n    Line 1: p 5714026 wEkQ\r\n    Line 2: v 8235889\r\n    Line 3: v 6534726\r\n    ...\r\n\r\nMy question is, how to avoid my hack and solve that problem elegantly?","title":"Java: The elegant way to add a line number to a file with lambda","body":"<p>I get used to using lambda to parse file line by line(much neater than <code>bufferedReader.readLine()</code>) for a long time. But today I faced a problem: add a line number to each line. </p>\n\n<p>It need a counter, but the variable in lambda should be effectively final.  Finally, I hacked it with an int array.</p>\n\n<p>Code:</p>\n\n<pre><code>public static void main(String[] args) {\n    int[] counter = new int[1];\n    counter[0] = 0;\n    try (Stream&lt;String&gt; lines = Files.lines(Paths.get(\"/tmp/timeline.txt\"), Charset.defaultCharset())) {\n        lines.limit(10).forEachOrdered(line -&gt; {\n            line = line.trim();\n            counter[0] ++;\n            System.out.println(\"Line \" + counter[0] + \": \" + line);\n        });\n    } catch (IOException e) {\n        e.printStackTrace();\n    }\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Line 1: p 5714026 wEkQ\nLine 2: v 8235889\nLine 3: v 6534726\n...\n</code></pre>\n\n<p>My question is, how to avoid my hack and solve that problem elegantly?</p>\n"},{"tags":["java","string"],"comments":[{"owner":{"account_id":18284469,"reputation":140,"user_id":13312696,"display_name":"Gius"},"score":0,"creation_date":1637256106,"post_id":70023962,"comment_id":123783779,"body_markdown":"Do you want only columns names, so words which are between &#39;SELECT&#39; and &#39;FROM&#39;?","body":"Do you want only columns names, so words which are between &#39;SELECT&#39; and &#39;FROM&#39;?"},{"owner":{"account_id":22910177,"reputation":85,"user_id":17047574,"display_name":"Денис Задорожний"},"score":0,"creation_date":1637256271,"post_id":70023962,"comment_id":123783843,"body_markdown":"yes,you are right","body":"yes,you are right"}],"answers":[{"tags":[],"owner":{"account_id":18284469,"reputation":140,"user_id":13312696,"display_name":"Gius"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1637258481,"creation_date":1637258089,"answer_id":70024555,"question_id":70023962,"body_markdown":"You can do it as follow:\r\n```Java\r\nString query = &quot;SELECT COUNT(project_id) AS &#39;count&#39;, project.name AS &#39;projects&#39; FROM test JOIN project ON project_id = project.id&quot;;\r\nLinkedList&lt;String&gt; queryColumns = new LinkedList&lt;&gt;();\r\nString[] test = query.replace(&quot;SELECT&quot;, &quot;&quot;).split(&quot;FROM&quot;)[0].split(&quot;,&quot;); //You have a string from which you need to extract single names, taking care of aliases.\r\nfor(String s : test) {\r\n    int aliasIndex = s.indexOf(&quot;AS&quot;);\r\n\tString column;\r\n\tif(aliasIndex != -1) {\r\n        //if there is an alias\r\n        column = s.substring(aliasIndex + 2).replace(&quot;&#39;&quot;,&quot;&quot;).strip();\r\n\t} else {\r\n        //if there isn&#39;t an alias\r\n\t\tcolumn = s.replace(&quot;&#39;&quot;,&quot;&quot;).strip();\r\n\t}\r\n\tqueryColumns.add(column);\r\n}\r\n```\r\nI assume that the alias is indicated as &#39;AS&#39; in uppercase, if it can be lowercase too, it&#39;s easy to change and adapt the code.","title":"How can I get words from brackets in String?","body":"<p>You can do it as follow:</p>\n<pre><code>String query = &quot;SELECT COUNT(project_id) AS 'count', project.name AS 'projects' FROM test JOIN project ON project_id = project.id&quot;;\nLinkedList&lt;String&gt; queryColumns = new LinkedList&lt;&gt;();\nString[] test = query.replace(&quot;SELECT&quot;, &quot;&quot;).split(&quot;FROM&quot;)[0].split(&quot;,&quot;); //You have a string from which you need to extract single names, taking care of aliases.\nfor(String s : test) {\n    int aliasIndex = s.indexOf(&quot;AS&quot;);\n    String column;\n    if(aliasIndex != -1) {\n        //if there is an alias\n        column = s.substring(aliasIndex + 2).replace(&quot;'&quot;,&quot;&quot;).strip();\n    } else {\n        //if there isn't an alias\n        column = s.replace(&quot;'&quot;,&quot;&quot;).strip();\n    }\n    queryColumns.add(column);\n}\n</code></pre>\n<p>I assume that the alias is indicated as 'AS' in uppercase, if it can be lowercase too, it's easy to change and adapt the code.</p>\n"},{"tags":[],"owner":{"account_id":39574,"reputation":24267,"user_id":114226,"accept_rate":79,"display_name":"PeterMmm"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1637258858,"creation_date":1637258858,"answer_id":70024697,"question_id":70023962,"body_markdown":"Don&#39;t do this with String split, replace etc. At some point, it will fail. \r\n\r\nYou should parse the sql statement. Example with [JsqlParser][1] like\r\n\r\n \r\n\r\n    public class Main {\r\n    \r\n        public static void main(String[] args) throws JSQLParserException {\r\n    \r\n            Select stmt = (Select) CCJSqlParserUtil.parse(\r\n                    &quot;SELECT COUNT(project_id) AS &#39;count&#39;, project.name AS &#39;projects&#39; FROM test\\n&quot;\r\n                    + &quot;JOIN project ON project_id = project.id &quot;);\r\n    \r\n            for (SelectItem selectItem : ((PlainSelect) stmt.getSelectBody()).getSelectItems()) {\r\n                selectItem.accept(new SelectItemVisitorAdapter() {\r\n                    @Override\r\n                    public void visit(SelectExpressionItem item) {\r\n                        System.err.println(item.getAlias().getName());\r\n                    }\r\n                });\r\n            }\r\n        }\r\n    }\r\n\r\nOutput:\r\n\r\n    &#39;count&#39;\r\n    &#39;projects&#39;\r\n\r\n  [1]: https://github.com/JSQLParser/JSqlParser\r\n","title":"How can I get words from brackets in String?","body":"<p>Don't do this with String split, replace etc. At some point, it will fail.</p>\n<p>You should parse the sql statement. Example with <a href=\"https://github.com/JSQLParser/JSqlParser\" rel=\"nofollow noreferrer\">JsqlParser</a> like</p>\n<pre><code>public class Main {\n\n    public static void main(String[] args) throws JSQLParserException {\n\n        Select stmt = (Select) CCJSqlParserUtil.parse(\n                &quot;SELECT COUNT(project_id) AS 'count', project.name AS 'projects' FROM test\\n&quot;\n                + &quot;JOIN project ON project_id = project.id &quot;);\n\n        for (SelectItem selectItem : ((PlainSelect) stmt.getSelectBody()).getSelectItems()) {\n            selectItem.accept(new SelectItemVisitorAdapter() {\n                @Override\n                public void visit(SelectExpressionItem item) {\n                    System.err.println(item.getAlias().getName());\n                }\n            });\n        }\n    }\n}\n</code></pre>\n<p>Output:</p>\n<pre><code>'count'\n'projects'\n</code></pre>\n"}],"owner":{"account_id":22910177,"reputation":85,"user_id":17047574,"display_name":"Денис Задорожний"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":91,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":70024555,"answer_count":2,"score":0,"last_activity_date":1637258858,"creation_date":1637255357,"question_id":70023962,"body_markdown":"I have various sql requests.For example \r\n\r\n    SELECT COUNT(project_id) AS &#39;count&#39;, project.name AS &#39;projects&#39; FROM test\r\n    JOIN project ON project_id = project.id \r\nor\r\n\r\n    SELECT count(*) AS &#39;browsers&#39; FROM `test`\r\n\r\nI want to receive words that are in &#39;&#39;. For example &#39;count&#39;, &#39;projects&#39;, &#39;browsers&#39;.\r\nThus, I want to get the names of the columns from the table.But how can I do this, something I don&#39;t understand.So far I just wrote\r\n\r\n      String[] str = sqlRequest.split(&quot;FROM&quot;);\r\nbut what can I write next, I don’t guess. Tell me how you can get words from these brackets?","title":"How can I get words from brackets in String?","body":"<p>I have various sql requests.For example</p>\n<pre><code>SELECT COUNT(project_id) AS 'count', project.name AS 'projects' FROM test\nJOIN project ON project_id = project.id \n</code></pre>\n<p>or</p>\n<pre><code>SELECT count(*) AS 'browsers' FROM `test`\n</code></pre>\n<p>I want to receive words that are in ''. For example 'count', 'projects', 'browsers'.\nThus, I want to get the names of the columns from the table.But how can I do this, something I don't understand.So far I just wrote</p>\n<pre><code>  String[] str = sqlRequest.split(&quot;FROM&quot;);\n</code></pre>\n<p>but what can I write next, I don’t guess. Tell me how you can get words from these brackets?</p>\n"},{"tags":["java","sql-server","database","jdbc"],"answers":[{"tags":[],"owner":{"account_id":8463731,"reputation":38757,"user_id":6348498,"accept_rate":92,"display_name":"Gurwinder Singh"},"down_vote_count":1,"up_vote_count":4,"is_accepted":true,"score":3,"last_activity_date":1483861098,"creation_date":1483861098,"answer_id":41530565,"question_id":41530541,"body_markdown":"You might want to run a simple select query on the database like this:\r\n\r\n    select TABLE_NAME from INFORMATION_SCHEMA.TABLES;\r\n\r\nYou can further filter out the table_names using where clauses like these:\r\n\r\n\r\n    SELECT \r\n        TABLE_NAME\r\n    FROM\r\n        INFORMATION_SCHEMA.TABLES\r\n    WHERE\r\n        TABLE_CATALOG = ? AND TABLE_SCHEMA = ?;","title":"Getting table names of all tables in a particular database in MS SQL Server using Java","body":"<p>You might want to run a simple select query on the database like this:</p>\n\n<pre><code>select TABLE_NAME from INFORMATION_SCHEMA.TABLES;\n</code></pre>\n\n<p>You can further filter out the table_names using where clauses like these:</p>\n\n<pre><code>SELECT \n    TABLE_NAME\nFROM\n    INFORMATION_SCHEMA.TABLES\nWHERE\n    TABLE_CATALOG = ? AND TABLE_SCHEMA = ?;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6067411,"reputation":291,"user_id":4737255,"display_name":"Che-Chia Chang"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1483865019,"creation_date":1483863862,"answer_id":41530833,"question_id":41530541,"body_markdown":"From [the Java API Doc][1]\r\n\r\n    ResultSet getTables(String catalog,\r\n                  String schemaPattern,\r\n                  String tableNamePattern,\r\n                  String[] types) throws SQLException\r\n\r\nSince you only need results from a database, try to provide &#39;schemaPattern&#39;, like this:\r\n\r\n    ResultSet rs = dbmd.getTables(null, &#39;your-database&#39;, &quot;%&quot;, types);\r\n\r\nAnd you get what you want, no more no less.\r\n\r\n  [1]: https://docs.oracle.com/javase/7/docs/api/java/sql/DatabaseMetaData.html#getTables(java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String[])","title":"Getting table names of all tables in a particular database in MS SQL Server using Java","body":"<p>From <a href=\"https://docs.oracle.com/javase/7/docs/api/java/sql/DatabaseMetaData.html#getTables(java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String[])\" rel=\"nofollow noreferrer\">the Java API Doc</a></p>\n\n<pre><code>ResultSet getTables(String catalog,\n              String schemaPattern,\n              String tableNamePattern,\n              String[] types) throws SQLException\n</code></pre>\n\n<p>Since you only need results from a database, try to provide 'schemaPattern', like this:</p>\n\n<pre><code>ResultSet rs = dbmd.getTables(null, 'your-database', \"%\", types);\n</code></pre>\n\n<p>And you get what you want, no more no less.</p>\n"},{"tags":[],"owner":{"account_id":6768404,"reputation":19526,"user_id":5212614,"accept_rate":32,"display_name":"ASH"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1485643008,"creation_date":1485643008,"answer_id":41915616,"question_id":41530541,"body_markdown":"I don&#39;t know anything about Java, ut you can definitely use SQL fro that.\r\n\r\n\r\n    USE your_DB\r\n    GO\r\n    SELECT t.name AS table_name,\r\n    SCHEMA_NAME(schema_id) AS schema_name,\r\n    c.name AS column_name\r\n    FROM sys.tables AS t\r\n    INNER JOIN sys.columns c ON t.OBJECT_ID = c.OBJECT_ID\r\n    WHERE c.name LIKE &#39;%ticker%&#39;\r\n    ORDER BY schema_name, table_name;\r\n\r\nOR\r\n\r\n\r\n    select * from information_schema.columns\r\n    where table_schema = &#39;your_DB&#39;\r\n    order by table_name,ordinal_position\r\n\r\n\r\n","title":"Getting table names of all tables in a particular database in MS SQL Server using Java","body":"<p>I don't know anything about Java, ut you can definitely use SQL fro that.</p>\n\n<pre><code>USE your_DB\nGO\nSELECT t.name AS table_name,\nSCHEMA_NAME(schema_id) AS schema_name,\nc.name AS column_name\nFROM sys.tables AS t\nINNER JOIN sys.columns c ON t.OBJECT_ID = c.OBJECT_ID\nWHERE c.name LIKE '%ticker%'\nORDER BY schema_name, table_name;\n</code></pre>\n\n<p>OR</p>\n\n<pre><code>select * from information_schema.columns\nwhere table_schema = 'your_DB'\norder by table_name,ordinal_position\n</code></pre>\n"},{"tags":[],"owner":{"account_id":21608440,"reputation":1517,"user_id":15935459,"display_name":"Ahmed El Rhaouti"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637258800,"creation_date":1637258800,"answer_id":70024686,"question_id":41530541,"body_markdown":"try this :\r\n\r\n    ResultSetMetaData rsmd = rs.getMetaData();\r\n                DatabaseMetaData md = connection.getMetaData();\r\n                String[] types = {&quot;TABLE&quot;};\r\n                ResultSet RS = md.getTables(null, null, &quot;%&quot;, types);\r\n                while (RS.next()) {\r\n                    String table = RS.getString(&quot;TABLE_NAME&quot;);\r\n                    if (!table.equals(&quot;trace_xe_action_map&quot;)\r\n                    &amp;&amp; !table.equals(&quot;trace_xe_event_map&quot;))\r\n                    System.out.println(table);\r\n                }\r\n\r\n\r\n","title":"Getting table names of all tables in a particular database in MS SQL Server using Java","body":"<p>try this :</p>\n<pre><code>ResultSetMetaData rsmd = rs.getMetaData();\n            DatabaseMetaData md = connection.getMetaData();\n            String[] types = {&quot;TABLE&quot;};\n            ResultSet RS = md.getTables(null, null, &quot;%&quot;, types);\n            while (RS.next()) {\n                String table = RS.getString(&quot;TABLE_NAME&quot;);\n                if (!table.equals(&quot;trace_xe_action_map&quot;)\n                &amp;&amp; !table.equals(&quot;trace_xe_event_map&quot;))\n                System.out.println(table);\n            }\n</code></pre>\n"}],"owner":{"account_id":5974908,"reputation":2094,"user_id":4696127,"accept_rate":40,"display_name":"tubby"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2252,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":41530565,"answer_count":4,"score":4,"last_activity_date":1637258800,"creation_date":1483860950,"question_id":41530541,"body_markdown":"I am trying to get the names of all tables in a database in using Java.\r\n\r\nThis is the method I am using. However, on running it, it also lists other tables, which are not actually part of my database, or maybe some system tables that I am not interested in. How can I get only the tables which I have created?\r\n\r\n    /* connecting to database using supplied credentials, and printing out the SQL queries for inserting data to local db */\r\n        public void connectToAzure(String connectionString, String databaseName, String username, String password) throws ClassNotFoundException, SQLException\r\n        {\r\n            Class.forName(&quot;com.microsoft.sqlserver.jdbc.SQLServerDriver&quot;);  \r\n    \r\n            final Connection m_Connection = DriverManager.getConnection( connectionString+&quot;;DatabaseName=&quot;+databaseName, username, password );\r\n            final ArrayList&lt;String&gt; tables = getTableNames(m_Connection);\r\n        }\r\n\r\n    /* helper method to get table names */\r\n        public ArrayList&lt;String&gt; getTableNames(final Connection m_Connection)\r\n        {\r\n            final ArrayList&lt;String&gt; tables = new ArrayList&lt;&gt;();\r\n            try\r\n            {\r\n                DatabaseMetaData dbmd = m_Connection.getMetaData();\r\n                String[] types = {&quot;TABLE&quot;};\r\n                ResultSet rs = dbmd.getTables(null, null, &quot;%&quot;, types);\r\n                while (rs.next())\r\n                {\r\n                    String tableName = rs.getString(&quot;TABLE_NAME&quot;);\r\n                    tables.add( tableName );\r\n                }\r\n            } \r\n            catch (SQLException e) \r\n            {\r\n                e.printStackTrace();\r\n            }\r\n            \r\n            return tables;\r\n        }\r\n\r\nOutput on running the above\r\n\r\n    table1, table2, table3, table4, table5, table6, trace_xe_action_map, trace_xe_event_map\r\n\r\nOf these, \r\n\r\n    trace_xe_action_map, trace_xe_event_map\r\n\r\nare not tables that I have created.","title":"Getting table names of all tables in a particular database in MS SQL Server using Java","body":"<p>I am trying to get the names of all tables in a database in using Java.</p>\n\n<p>This is the method I am using. However, on running it, it also lists other tables, which are not actually part of my database, or maybe some system tables that I am not interested in. How can I get only the tables which I have created?</p>\n\n<pre><code>/* connecting to database using supplied credentials, and printing out the SQL queries for inserting data to local db */\n    public void connectToAzure(String connectionString, String databaseName, String username, String password) throws ClassNotFoundException, SQLException\n    {\n        Class.forName(\"com.microsoft.sqlserver.jdbc.SQLServerDriver\");  \n\n        final Connection m_Connection = DriverManager.getConnection( connectionString+\";DatabaseName=\"+databaseName, username, password );\n        final ArrayList&lt;String&gt; tables = getTableNames(m_Connection);\n    }\n\n/* helper method to get table names */\n    public ArrayList&lt;String&gt; getTableNames(final Connection m_Connection)\n    {\n        final ArrayList&lt;String&gt; tables = new ArrayList&lt;&gt;();\n        try\n        {\n            DatabaseMetaData dbmd = m_Connection.getMetaData();\n            String[] types = {\"TABLE\"};\n            ResultSet rs = dbmd.getTables(null, null, \"%\", types);\n            while (rs.next())\n            {\n                String tableName = rs.getString(\"TABLE_NAME\");\n                tables.add( tableName );\n            }\n        } \n        catch (SQLException e) \n        {\n            e.printStackTrace();\n        }\n\n        return tables;\n    }\n</code></pre>\n\n<p>Output on running the above</p>\n\n<pre><code>table1, table2, table3, table4, table5, table6, trace_xe_action_map, trace_xe_event_map\n</code></pre>\n\n<p>Of these, </p>\n\n<pre><code>trace_xe_action_map, trace_xe_event_map\n</code></pre>\n\n<p>are not tables that I have created.</p>\n"},{"tags":["java","string","stringbuilder","string-concatenation"],"comments":[{"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":3,"creation_date":1637253680,"post_id":70023568,"comment_id":123782739,"body_markdown":"In Java 17, this is unlikely to be the case; Java 17 uses something _much_ smarter than &quot;compiling to the same as creating a new StringBuilder.&quot;  See [JEP 280](https://openjdk.java.net/jeps/280) for details.  That said, it seems likely that your measurement technique is problematic.","body":"In Java 17, this is unlikely to be the case; Java 17 uses something <i>much</i> smarter than &quot;compiling to the same as creating a new StringBuilder.&quot;  See <a href=\"https://openjdk.java.net/jeps/280\" rel=\"nofollow noreferrer\">JEP 280</a> for details.  That said, it seems likely that your measurement technique is problematic."},{"owner":{"account_id":2871213,"reputation":2241,"user_id":2464528,"accept_rate":29,"display_name":"cbender"},"score":0,"creation_date":1637253955,"post_id":70023568,"comment_id":123782859,"body_markdown":"@LouisWasserman I double checked, maven compile target and source are 17 as well as the runtime. Just using old-fashioned `new Date()` for start and end and subtracting the difference. But even if that wasn&#39;t accurate, the difference is noticeable (it&#39;s printing when each one is done).","body":"@LouisWasserman I double checked, maven compile target and source are 17 as well as the runtime. Just using old-fashioned <code>new Date()</code> for start and end and subtracting the difference. But even if that wasn&#39;t accurate, the difference is noticeable (it&#39;s printing when each one is done)."},{"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":2,"creation_date":1637253989,"post_id":70023568,"comment_id":123782872,"body_markdown":"It is _entirely possible_ for that measurement technique to actively lie to you.","body":"It is <i>entirely possible</i> for that measurement technique to actively lie to you."},{"owner":{"account_id":1056871,"reputation":117729,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"score":1,"creation_date":1637253992,"post_id":70023568,"comment_id":123782874,"body_markdown":"there has been _many_ questions of this type. The general rule still stands, loop concatenation should use `StringBuilder`. And use `JMH` for measuring","body":"there has been <i>many</i> questions of this type. The general rule still stands, loop concatenation should use <code>StringBuilder</code>. And use <code>JMH</code> for measuring"},{"owner":{"account_id":2871213,"reputation":2241,"user_id":2464528,"accept_rate":29,"display_name":"cbender"},"score":0,"creation_date":1637254223,"post_id":70023568,"comment_id":123782991,"body_markdown":"@LouisWasserman I know that&#39;s not the best super accurate way but it&#39;s literally almost double the time. Even if I stand here and manually time it, I can easily note the time difference. It&#39;s taking way longer to do the concatenation.","body":"@LouisWasserman I know that&#39;s not the best super accurate way but it&#39;s literally almost double the time. Even if I stand here and manually time it, I can easily note the time difference. It&#39;s taking way longer to do the concatenation."},{"owner":{"account_id":2871213,"reputation":2241,"user_id":2464528,"accept_rate":29,"display_name":"cbender"},"score":0,"creation_date":1637254298,"post_id":70023568,"comment_id":123783017,"body_markdown":"@Eugene obviously `StringBuilder` should be used. The point of this question isn&#39;t why `StringBuilder` is faster than concatenation, it&#39;s why String concatenation so much slower than creating a **new `StringBuilder` for each append**.","body":"@Eugene obviously <code>StringBuilder</code> should be used. The point of this question isn&#39;t why <code>StringBuilder</code> is faster than concatenation, it&#39;s why String concatenation so much slower than creating a <b>new <code>StringBuilder</code> for each append</b>."},{"owner":{"account_id":1056871,"reputation":117729,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"score":0,"creation_date":1637256054,"post_id":70023568,"comment_id":123783761,"body_markdown":"I have a sample project where I sometimes run jhm things in github. [here are the results](https://github.com/wind57/0x-github-jmh-runner/runs/4254472271?check_suite_focus=true#step:4:113) for [your exact sample](https://github.com/wind57/0x-github-jmh-runner/blob/686c497472df9fa3991a232497b2bbd6b199e414/src/jmh/java/zero/x/so/ConcatSample.java). You can increase the `@Fork` count and warmups to see more accurate results, but the point stands : &quot;it&#39;s how you measure&quot;.","body":"I have a sample project where I sometimes run jhm things in github. <a href=\"https://github.com/wind57/0x-github-jmh-runner/runs/4254472271?check_suite_focus=true#step:4:113\" rel=\"nofollow noreferrer\">here are the results</a> for <a href=\"https://github.com/wind57/0x-github-jmh-runner/blob/686c497472df9fa3991a232497b2bbd6b199e414/src/jmh/java/zero/x/so/ConcatSample.java\" rel=\"nofollow noreferrer\">your exact sample</a>. You can increase the <code>@Fork</code> count and warmups to see more accurate results, but the point stands : &quot;it&#39;s how you measure&quot;."},{"owner":{"account_id":2871213,"reputation":2241,"user_id":2464528,"accept_rate":29,"display_name":"cbender"},"score":0,"creation_date":1637257051,"post_id":70023568,"comment_id":123784102,"body_markdown":"@Eugene thanks, similar enough time between the 2, not nearly as drastic as mine, although the avg of the concat is still longer. But based on what everyone is saying, it should be faster if using Java 9+. I tried 8, 11, &amp; 17 and the % time difference was pretty similar across so no idea what&#39;s going on. I asked the question because obviously this behavior isn&#39;t expected...","body":"@Eugene thanks, similar enough time between the 2, not nearly as drastic as mine, although the avg of the concat is still longer. But based on what everyone is saying, it should be faster if using Java 9+. I tried 8, 11, &amp; 17 and the % time difference was pretty similar across so no idea what&#39;s going on. I asked the question because obviously this behavior isn&#39;t expected..."},{"owner":{"account_id":1056871,"reputation":117729,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"score":0,"creation_date":1637257710,"post_id":70023568,"comment_id":123784323,"body_markdown":"as said - change the `@Fork`, increase measurements and warmups and you will get much closer numbers. And those results do no show  anything &quot;drastic&quot;, do they? Yet again, and for the last time : it&#39;s how you measure.","body":"as said - change the <code>@Fork</code>, increase measurements and warmups and you will get much closer numbers. And those results do no show  anything &quot;drastic&quot;, do they? Yet again, and for the last time : it&#39;s how you measure."}],"answers":[{"tags":[],"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1637253958,"creation_date":1637253958,"answer_id":70023659,"question_id":70023568,"body_markdown":"You haven&#39;t shown us much about your measurement technique, but it&#39;s almost certain that&#39;s the culprit; correct benchmarking in Java is [very hard](https://stackoverflow.com/q/504103/869736).  Most notably, Java code is _always_ slow at startup, and that scales with the complexity with the code, even if the steady-state performance is very different.\r\n\r\nIn any event, it&#39;s not true that string concatenation compiles to the same thing as your `StringBuilder` code -- certainly not anymore.  [JEP 280](https://openjdk.java.net/jeps/280) in Java 9 changed that compilation strategy to something _much_ more effective for long-running applications, but that notably incurs some slowdown at _startup_, which your benchmark may not have accounted for.","title":"String concatenation is even longer than creating a new String Builder for each append","body":"<p>You haven't shown us much about your measurement technique, but it's almost certain that's the culprit; correct benchmarking in Java is <a href=\"https://stackoverflow.com/q/504103/869736\">very hard</a>.  Most notably, Java code is <em>always</em> slow at startup, and that scales with the complexity with the code, even if the steady-state performance is very different.</p>\n<p>In any event, it's not true that string concatenation compiles to the same thing as your <code>StringBuilder</code> code -- certainly not anymore.  <a href=\"https://openjdk.java.net/jeps/280\" rel=\"nofollow noreferrer\">JEP 280</a> in Java 9 changed that compilation strategy to something <em>much</em> more effective for long-running applications, but that notably incurs some slowdown at <em>startup</em>, which your benchmark may not have accounted for.</p>\n"}],"owner":{"account_id":2871213,"reputation":2241,"user_id":2464528,"accept_rate":29,"display_name":"cbender"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":364,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"closed_date":1637254132,"answer_count":1,"score":1,"last_activity_date":1637258020,"creation_date":1637253570,"question_id":70023568,"body_markdown":"I was creating a demo to demonstrate how much faster `StringBuilder` is than String concatenation.\r\nI also wanted to demonstrate that String concatenation is the equivalent to making a new `StringBuilder` for each append. I wanted to demonstrate this with the following 2 blocks:\r\n\r\n**Simply concatenate a String**\r\n\r\n    String result = &quot;&quot;;\r\n    for (int i = 0; i &lt; 200000; i++) {\r\n        result += String.valueOf(i);\r\n    }\r\n**Create a new `StringBuilder` for each concatenation**\r\n\r\n    String result = &quot;&quot;;\r\n    for (int i = 0; i &lt; 200000; i++) {\r\n        result = new StringBuilder(result).append(String.valueOf(i)).toString();\r\n    }\r\nMy understanding was that the String concatenation example compiled to the same thing as creating a new `StringBuilder` for each concatenation. I even decompiled the code to see the same result for both (I know decompiled code is not necessarily an exact representation of the written or compiled code). \r\n\r\nObviously using a single `StringBuilder` for all appending ran in a fraction of the time of these 2 examples. But the weird thing is that the 2nd example (creating a new `StringBuilder` manually each time) ran at nearly half the time of simple concatenation example. Why is creating a new `StringBuilder` each time so much faster than concatenation?\r\n\r\n(Using Java Adoptium Temurin 17 in case it matters)\r\n\r\n**Update**\r\nFor those asking for full code-\r\n\r\n    import java.util.Date;\r\n\r\n    public class App {\r\n\t    public static void main(String[] args) {\r\n\r\n\t\t    String result = &quot;&quot;;\r\n\t\t    Date start = new Date();\r\n\t\t    for (int i = 0; i &lt; 200000; i++) {\r\n\t\t\t    result = new StringBuilder(result).append(String.valueOf(i)).toString();\r\n\t\t\t    //result += String.valueOf(i);\r\n\t\t    }\r\n\t\t    Date end = new Date();\r\n\t\t   System.out.println(end.getTime() - start.getTime());\r\n\t    }\r\n    }\r\nLike I said, it&#39;s a simple example. You can obviously just comment out the `StringBuilder` line and uncomment the concat line to test the other example.\r\n\r\nAs I mentioned below, I know `Date` is not meant to be used for metrics like this but it&#39;s a relatively simple example, and even without it, the difference is significantly noticeable in person.\r\n\r\nI&#39;ve tried this on 3 different Java Runtimes (Oracle 8, AdoptOpenJDK 11, and Adoptium Temurin 17), and while each one takes different amounts of time, the difference between the 2 is still pretty similar.","title":"String concatenation is even longer than creating a new String Builder for each append","body":"<p>I was creating a demo to demonstrate how much faster <code>StringBuilder</code> is than String concatenation.\nI also wanted to demonstrate that String concatenation is the equivalent to making a new <code>StringBuilder</code> for each append. I wanted to demonstrate this with the following 2 blocks:</p>\n<p><strong>Simply concatenate a String</strong></p>\n<pre><code>String result = &quot;&quot;;\nfor (int i = 0; i &lt; 200000; i++) {\n    result += String.valueOf(i);\n}\n</code></pre>\n<p><strong>Create a new <code>StringBuilder</code> for each concatenation</strong></p>\n<pre><code>String result = &quot;&quot;;\nfor (int i = 0; i &lt; 200000; i++) {\n    result = new StringBuilder(result).append(String.valueOf(i)).toString();\n}\n</code></pre>\n<p>My understanding was that the String concatenation example compiled to the same thing as creating a new <code>StringBuilder</code> for each concatenation. I even decompiled the code to see the same result for both (I know decompiled code is not necessarily an exact representation of the written or compiled code).</p>\n<p>Obviously using a single <code>StringBuilder</code> for all appending ran in a fraction of the time of these 2 examples. But the weird thing is that the 2nd example (creating a new <code>StringBuilder</code> manually each time) ran at nearly half the time of simple concatenation example. Why is creating a new <code>StringBuilder</code> each time so much faster than concatenation?</p>\n<p>(Using Java Adoptium Temurin 17 in case it matters)</p>\n<p><strong>Update</strong>\nFor those asking for full code-</p>\n<pre><code>import java.util.Date;\n\npublic class App {\n    public static void main(String[] args) {\n\n        String result = &quot;&quot;;\n        Date start = new Date();\n        for (int i = 0; i &lt; 200000; i++) {\n            result = new StringBuilder(result).append(String.valueOf(i)).toString();\n            //result += String.valueOf(i);\n        }\n        Date end = new Date();\n       System.out.println(end.getTime() - start.getTime());\n    }\n}\n</code></pre>\n<p>Like I said, it's a simple example. You can obviously just comment out the <code>StringBuilder</code> line and uncomment the concat line to test the other example.</p>\n<p>As I mentioned below, I know <code>Date</code> is not meant to be used for metrics like this but it's a relatively simple example, and even without it, the difference is significantly noticeable in person.</p>\n<p>I've tried this on 3 different Java Runtimes (Oracle 8, AdoptOpenJDK 11, and Adoptium Temurin 17), and while each one takes different amounts of time, the difference between the 2 is still pretty similar.</p>\n"},{"tags":["java","boolean","boolean-expression"],"comments":[{"owner":{"account_id":4541793,"reputation":26875,"user_id":3689450,"display_name":"VLAZ"},"score":1,"creation_date":1637134257,"post_id":69998752,"comment_id":123741410,"body_markdown":"No, it&#39;s not equivalent to `false == false`, it&#39;s equivalent to `true &amp;&amp; false` because of the operator precendence `( (a &amp;&amp; (b || !a)) == a ) &amp;&amp; b`","body":"No, it&#39;s not equivalent to <code>false == false</code>, it&#39;s equivalent to <code>true &amp;&amp; false</code> because of the operator precendence <code>( (a &amp;&amp; (b || !a)) == a ) &amp;&amp; b</code>"},{"owner":{"account_id":120605,"reputation":24173,"user_id":313137,"display_name":"Romain Hippeau"},"score":0,"creation_date":1637262204,"post_id":69998752,"comment_id":123785935,"body_markdown":"a &amp;&amp; (b || !a) is false. &amp;&amp; always short circuits. then false == false is true, then true &amp;&amp; false is false. So I would expect false.","body":"a &amp;&amp; (b || !a) is false. &amp;&amp; always short circuits. then false == false is true, then true &amp;&amp; false is false. So I would expect false."}],"answers":[{"tags":[],"owner":{"account_id":23362251,"reputation":1,"user_id":17434287,"display_name":"Mr. Weber"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637257785,"creation_date":1637257785,"answer_id":70024474,"question_id":69998752,"body_markdown":"The comment was the answer. `==` has the highest precedence and will be evaluated first, with the left being `a &amp;&amp; (b || !a)` and the right being `a`.","title":"Why is this boolean expression false?","body":"<p>The comment was the answer. <code>==</code> has the highest precedence and will be evaluated first, with the left being <code>a &amp;&amp; (b || !a)</code> and the right being <code>a</code>.</p>\n"}],"owner":{"account_id":23362251,"reputation":1,"user_id":17434287,"display_name":"Mr. Weber"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":63,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1637257785,"creation_date":1637121261,"question_id":69998752,"body_markdown":"When I run\r\n\r\n```\r\nboolean a = false;\r\nboolean b = false;\r\nboolean result = (a &amp;&amp; (b || !a)) == a &amp;&amp; b;\r\nSystem.out.println(result);\r\n```\r\nI get false in Java. Why? This is equivalent to false == false, which is true. This is not Java specific, I get the same result in other languages, too. Is this because of short circuit evaluation? It seems like the left and right would/should still get compared.","title":"Why is this boolean expression false?","body":"<p>When I run</p>\n<pre><code>boolean a = false;\nboolean b = false;\nboolean result = (a &amp;&amp; (b || !a)) == a &amp;&amp; b;\nSystem.out.println(result);\n</code></pre>\n<p>I get false in Java. Why? This is equivalent to false == false, which is true. This is not Java specific, I get the same result in other languages, too. Is this because of short circuit evaluation? It seems like the left and right would/should still get compared.</p>\n"},{"tags":["java","lwjgl"],"answers":[{"tags":[],"owner":{"account_id":6630353,"reputation":5504,"user_id":8623159,"display_name":"httpdigest"},"down_vote_count":1,"up_vote_count":3,"is_accepted":true,"score":2,"last_activity_date":1637257653,"creation_date":1637257653,"answer_id":70024438,"question_id":70024246,"body_markdown":"You are calling GLFW methods/functions from a separately spawned thread. This is _not_ possible on macOS.\r\nSee GLFW&#39;s own documentation e.g. for [glfwCreateWindow][1], under section &quot;Thread safety&quot;:\r\n&gt; Thread safety\r\n&gt;\r\n&gt; This function must only be called from the main thread.\r\n\r\nThe same is true for most other functions, like `glfwInit`, `glfwShowWindow`, `glfwPollEvents`/`glfwWaitEvents`, etc. Please consult GLFW&#39;s documentation for this.\r\n\r\nSo, most GLFW functions _must_ be called from the _main_ thread, which is the thread implicitly created by the JVM process which initially calls your main method.\r\n\r\nCurrently, the only thing that the main thread in your program does is to spawn a new thread and then it lays dormant until the JVM exits. This is completely unnecessary. You could just as well have used the main thread to do the work.\r\n\r\nIn order to fix this, simply _do not_ spawn/create a separate thread.\r\n\r\n  [1]: https://www.glfw.org/docs/3.3/group__window.html#ga5c336fddf2cbb5b92f65f10fb6043344","title":"LWJGL Error: GLFW may only be used on the main thread. This check may be disabled with Configuration.GLFW_CHECK_THREAD0","body":"<p>You are calling GLFW methods/functions from a separately spawned thread. This is <em>not</em> possible on macOS.\nSee GLFW's own documentation e.g. for <a href=\"https://www.glfw.org/docs/3.3/group__window.html#ga5c336fddf2cbb5b92f65f10fb6043344\" rel=\"nofollow noreferrer\">glfwCreateWindow</a>, under section &quot;Thread safety&quot;:</p>\n<blockquote>\n<p>Thread safety</p>\n<p>This function must only be called from the main thread.</p>\n</blockquote>\n<p>The same is true for most other functions, like <code>glfwInit</code>, <code>glfwShowWindow</code>, <code>glfwPollEvents</code>/<code>glfwWaitEvents</code>, etc. Please consult GLFW's documentation for this.</p>\n<p>So, most GLFW functions <em>must</em> be called from the <em>main</em> thread, which is the thread implicitly created by the JVM process which initially calls your main method.</p>\n<p>Currently, the only thing that the main thread in your program does is to spawn a new thread and then it lays dormant until the JVM exits. This is completely unnecessary. You could just as well have used the main thread to do the work.</p>\n<p>In order to fix this, simply <em>do not</em> spawn/create a separate thread.</p>\n"}],"owner":{"account_id":19219319,"reputation":323,"user_id":14965513,"display_name":"ani"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1380,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":70024438,"answer_count":1,"score":0,"last_activity_date":1637257653,"creation_date":1637256650,"question_id":70024246,"body_markdown":"I am trying to create a window using LWJGL and it has one thread `game`. When I try and run my code i get an error: `GLFW may only be used on the main thread. This check may be disabled with Configuration.GLFW_CHECK_THREAD0.`. At first, it suggested adding a JVM parameter `-XstartOnFirstThread`, and I configured my IDE to do so but now it suggests: `This check may be disabled with Configuration.GLFW_CHECK_THREAD0.`. How do I implement this or fix it another way?\r\n\r\nMain.java:\r\n```java\r\npackage main;\r\n\r\nimport engine.io.Window;\r\n\r\npublic class Main implements Runnable {\r\n\tpublic Thread game;\r\n\t\r\n\tpublic static Window window;\r\n\t\r\n\tpublic static final int WIDTH = 1280, HEIGHT = 760;\r\n\t\r\n\tpublic void start() {\r\n\t\tgame = new Thread(this, &quot;game&quot;);\r\n\t\tgame.start();\r\n\t}\r\n\t\r\n\tpublic static void init() {\r\n\t\tSystem.out.println(&quot;Initializing game!&quot;);\r\n\t\twindow = new Window(WIDTH, HEIGHT, &quot;game&quot;);\r\n\t\t\r\n\t\twindow.create();\r\n\t}\r\n\t\r\n\tpublic void run() {\r\n\t\tinit();\r\n\t\twhile (true) {\r\n\t\t\tupdate();\r\n\t\t\trender();\r\n\t\t}\r\n\t}\r\n\t\r\n\tprivate void update() {\r\n\t\tSystem.out.println(&quot;Updating game&quot;);\r\n\t}\r\n\t\r\n\tprivate void render() {\r\n\t\tSystem.out.println(&quot;Rendering game&quot;);\r\n\t}\r\n\t\r\n\tpublic static void main(String[] args) {\r\n\t\tnew Main().start();\r\n\t}\r\n}\r\n```\r\n\r\nWindow.java:\r\n```java\r\npackage engine.io;\r\n\r\nimport org.lwjgl.glfw.GLFW;\r\nimport org.lwjgl.glfw.GLFWVidMode;\r\n\r\npublic class Window {\r\n\tprivate int width, height;\r\n\tprivate String title;\r\n\tprivate long window;\r\n\t\r\n\tpublic Window(int width, int height, String title) {\r\n\t\tthis.width = width;\r\n\t\tthis.height = height;\r\n\t\tthis.title = title;\r\n\t}\r\n\t\r\n\tpublic void create() {\r\n\t\tif (!GLFW.glfwInit()) {\r\n\t\t\tSystem.err.println(&quot;ERROR: GLFW wasn&#39;t initialized&quot;);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\twindow = GLFW.glfwCreateWindow(width, height, title, 0, 0);\r\n\t\t\r\n\t\tif (window == 0) {\r\n\t\t\tSystem.err.println(&quot;ERROR: Window wasn&#39;t created&quot;);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\tGLFWVidMode videoMode = GLFW.glfwGetVideoMode(GLFW.glfwGetPrimaryMonitor());\r\n\t\tGLFW.glfwSetWindowPos(window, (videoMode.width() - width)/2, (videoMode.height() - height)/2);\r\n\t\tGLFW.glfwShowWindow(window);\r\n\t}\r\n}\r\n```","title":"LWJGL Error: GLFW may only be used on the main thread. This check may be disabled with Configuration.GLFW_CHECK_THREAD0","body":"<p>I am trying to create a window using LWJGL and it has one thread <code>game</code>. When I try and run my code i get an error: <code>GLFW may only be used on the main thread. This check may be disabled with Configuration.GLFW_CHECK_THREAD0.</code>. At first, it suggested adding a JVM parameter <code>-XstartOnFirstThread</code>, and I configured my IDE to do so but now it suggests: <code>This check may be disabled with Configuration.GLFW_CHECK_THREAD0.</code>. How do I implement this or fix it another way?</p>\n<p>Main.java:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package main;\n\nimport engine.io.Window;\n\npublic class Main implements Runnable {\n    public Thread game;\n    \n    public static Window window;\n    \n    public static final int WIDTH = 1280, HEIGHT = 760;\n    \n    public void start() {\n        game = new Thread(this, &quot;game&quot;);\n        game.start();\n    }\n    \n    public static void init() {\n        System.out.println(&quot;Initializing game!&quot;);\n        window = new Window(WIDTH, HEIGHT, &quot;game&quot;);\n        \n        window.create();\n    }\n    \n    public void run() {\n        init();\n        while (true) {\n            update();\n            render();\n        }\n    }\n    \n    private void update() {\n        System.out.println(&quot;Updating game&quot;);\n    }\n    \n    private void render() {\n        System.out.println(&quot;Rendering game&quot;);\n    }\n    \n    public static void main(String[] args) {\n        new Main().start();\n    }\n}\n</code></pre>\n<p>Window.java:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package engine.io;\n\nimport org.lwjgl.glfw.GLFW;\nimport org.lwjgl.glfw.GLFWVidMode;\n\npublic class Window {\n    private int width, height;\n    private String title;\n    private long window;\n    \n    public Window(int width, int height, String title) {\n        this.width = width;\n        this.height = height;\n        this.title = title;\n    }\n    \n    public void create() {\n        if (!GLFW.glfwInit()) {\n            System.err.println(&quot;ERROR: GLFW wasn't initialized&quot;);\n            return;\n        }\n        \n        window = GLFW.glfwCreateWindow(width, height, title, 0, 0);\n        \n        if (window == 0) {\n            System.err.println(&quot;ERROR: Window wasn't created&quot;);\n            return;\n        }\n        \n        GLFWVidMode videoMode = GLFW.glfwGetVideoMode(GLFW.glfwGetPrimaryMonitor());\n        GLFW.glfwSetWindowPos(window, (videoMode.width() - width)/2, (videoMode.height() - height)/2);\n        GLFW.glfwShowWindow(window);\n    }\n}\n</code></pre>\n"},{"tags":["java","android","firebase","firebase-realtime-database"],"comments":[{"owner":{"account_id":5212777,"reputation":20542,"user_id":4168607,"accept_rate":28,"display_name":"ADM"},"score":2,"creation_date":1637150066,"post_id":70003894,"comment_id":123747085,"body_markdown":"You added same classes twice [Edit](https://stackoverflow.com/posts/70003894/edit) your question .","body":"You added same classes twice <a href=\"https://stackoverflow.com/posts/70003894/edit\">Edit</a> your question ."},{"owner":{"account_id":19772552,"reputation":33,"user_id":17159973,"display_name":"george sepetadelis"},"score":0,"creation_date":1637152307,"post_id":70003894,"comment_id":123748047,"body_markdown":"@ADM Thanks, i edit my question","body":"@ADM Thanks, i edit my question"},{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1637153016,"post_id":70003894,"comment_id":123748353,"body_markdown":"Please edit your question and add your database structure as a screenshot.","body":"Please edit your question and add your database structure as a screenshot."},{"owner":{"account_id":19772552,"reputation":33,"user_id":17159973,"display_name":"george sepetadelis"},"score":0,"creation_date":1637155035,"post_id":70003894,"comment_id":123749236,"body_markdown":"@AlexMamo Okay, i did it","body":"@AlexMamo Okay, i did it"},{"owner":{"account_id":14423201,"reputation":840,"user_id":10418725,"display_name":"Jorn Rigter"},"score":1,"creation_date":1637157793,"post_id":70003894,"comment_id":123750563,"body_markdown":"Is the Author ID null as well? Something might be happening with your addValueEventListener from the usersRef (could be initialized later, so maybe calling recyclerAdapter.notifyDataSetChanged() after these values are added to the postModel would help?)","body":"Is the Author ID null as well? Something might be happening with your addValueEventListener from the usersRef (could be initialized later, so maybe calling recyclerAdapter.notifyDataSetChanged() after these values are added to the postModel would help?)"}],"owner":{"account_id":19772552,"reputation":33,"user_id":17159973,"display_name":"george sepetadelis"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":102,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1637257497,"creation_date":1637149851,"question_id":70003894,"body_markdown":"I have a recycler view on my home page which is showing some posts from my db. I&#39;m passing data like `userID`, `username` etc., into the adapter but the profile picture URL is always null inside the adapter. If I try to print it inside the fragment it shows the correct value.\r\n\r\n**My database structure:**\r\n\r\n[![Posts Node][1]][1]\r\n\r\n[![Users Node][2]][2]\r\n\r\n**PostRecyclerAdapter:**\r\n\r\n    public class PostRecyclerAdapter extends RecyclerView.Adapter&lt;PostRecyclerAdapter.ViewHolder&gt; {\r\n    \r\n        List&lt;PostModel&gt; postList;\r\n        Context context;\r\n    \r\n        final private DatabaseReference postRef = FirebaseDatabase.getInstance().getReference(&quot;posts&quot;);\r\n        final private DatabaseReference likeRef = FirebaseDatabase.getInstance().getReference(&quot;likes&quot;);\r\n        final private DatabaseReference usersRef = FirebaseDatabase.getInstance().getReference(&quot;users&quot;);\r\n    \r\n        public PostRecyclerAdapter(ArrayList&lt;PostModel&gt; postModelArrayList, Context context) {\r\n            this.postList = postModelArrayList;\r\n            this.context = context;\r\n        }\r\n    \r\n        @NonNull\r\n        @Override\r\n        public ViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\r\n            View view = LayoutInflater.from(parent.getContext()).inflate(R.layout.post_item, parent, false);\r\n            return new ViewHolder(view);\r\n        }\r\n    \r\n        @Override\r\n        public void onBindViewHolder(@NonNull ViewHolder holder, int position) {\r\n            // check if post is liked or not\r\n            FirebaseAuth mAuth = FirebaseAuth.getInstance();\r\n            FirebaseUser user = mAuth.getCurrentUser();\r\n    \r\n            likeRef.addListenerForSingleValueEvent(new ValueEventListener() {\r\n                @Override\r\n                public void onDataChange(@NonNull @NotNull DataSnapshot snapshot) {\r\n                    // check if current post is liked from this user\r\n                    if (snapshot.child(holder.id).hasChild(user.getUid())) {\r\n                        // post is liked form this user\r\n                        holder.like_btn.setImageResource(R.drawable.ic_thumb_up_filled);\r\n    \r\n                    } else {\r\n                        // post is not liked from this user\r\n                        holder.like_btn.setImageResource(R.drawable.ic_thump_up_outline);\r\n                    }\r\n                }\r\n    \r\n                @Override\r\n                public void onCancelled(@NonNull @NotNull DatabaseError error) {\r\n                    Toast.makeText(context, &quot;error: &quot; + error, Toast.LENGTH_SHORT).show();\r\n                }\r\n            });\r\n    \r\n    \r\n            // Get current post id set username, authorID, profile picture URL, likes and post image URL\r\n            holder.id = postList.get(position).getId();\r\n            holder.username.setText(postList.get(position).getName());\r\n            holder.userID = postList.get(position).getAuthorID();\r\n            holder.like_counter_tv.setText(postList.get(position).getLikes());\r\n    \r\n            Glide.with(context).load(postList.get(position).getImgUrl()).into(holder.postImg);\r\n    \r\n            // Load profile picture\r\n            String profilePictureUrl = postList.get(position).getProfileImgUrl();\r\n            \r\n            // profilePictureUrl IS ALWAYS NULL\r\n            if (profilePictureUrl != null) {\r\n                if (!profilePictureUrl.equals(&quot;none&quot;)) {\r\n                    Glide.with(context).load(profilePictureUrl).into(holder.profileImage);\r\n                }\r\n            }\r\n    \r\n        }\r\n    \r\n        @Override\r\n        public int getItemCount() {\r\n            return postList.size();\r\n        }\r\n    \r\n        class ViewHolder extends RecyclerView.ViewHolder {\r\n    \r\n            CardView container;\r\n            String id;\r\n            TextView username, like_counter_tv;\r\n            ImageView postImg;\r\n            ImageButton like_btn;\r\n            CircleImageView profileImage;\r\n            boolean isLiked = false;\r\n            String userID;\r\n    \r\n            public void updateLikes(String postID, boolean isNotLiked) {\r\n                postRef.addListenerForSingleValueEvent(new ValueEventListener() {\r\n                    @Override\r\n                    public void onDataChange(@NonNull @NotNull DataSnapshot snapshot) {\r\n    \r\n                        String currentLikesToString = snapshot.child(postID).child(&quot;likes&quot;).getValue().toString();\r\n                        int currentLikesToInt = Integer.parseInt(currentLikesToString);\r\n    \r\n                        if (isNotLiked) {\r\n    \r\n                            int newCurrentLikes = currentLikesToInt + 1;\r\n                            String newCurrentLikesToString = Integer.toString(newCurrentLikes);\r\n    \r\n                            // Update likes on Real-time DB\r\n                            postRef.child(postID).child(&quot;likes&quot;).setValue(newCurrentLikesToString);\r\n    \r\n                            // update likes on TextView\r\n                            like_counter_tv.setText(newCurrentLikesToString);\r\n    \r\n                        } else {\r\n    \r\n                            int newCurrentLikes = currentLikesToInt - 1;\r\n                            String newCurrentLikesToString = Integer.toString(newCurrentLikes);\r\n    \r\n                            // Update likes on Real-time DB\r\n                            postRef.child(postID).child(&quot;likes&quot;).setValue(newCurrentLikesToString);\r\n    \r\n                            // update likes on TextView\r\n                            like_counter_tv.setText(newCurrentLikesToString);\r\n    \r\n                        }\r\n    \r\n                    }\r\n    \r\n                    @Override\r\n                    public void onCancelled(@NonNull @NotNull DatabaseError error) {\r\n                        Toast.makeText(context, &quot;Error: &quot; + error, Toast.LENGTH_SHORT).show();\r\n                    }\r\n                });\r\n            }\r\n    \r\n            public ViewHolder(@NonNull View itemView) {\r\n                super(itemView);\r\n    \r\n                final FirebaseAuth mAuth = FirebaseAuth.getInstance();\r\n                final FirebaseUser user = mAuth.getCurrentUser();\r\n                final ConstraintLayout sContainer = itemView.findViewById(R.id.second_container);\r\n                profileImage = itemView.findViewById(R.id.user_profile_image);\r\n                container = itemView.findViewById(R.id.post_item_container);\r\n                username = itemView.findViewById(R.id.post_username);\r\n                postImg = itemView.findViewById(R.id.post_image);\r\n                like_btn = itemView.findViewById(R.id.likeBtn);\r\n                like_counter_tv = itemView.findViewById(R.id.like_counter);\r\n                likeRef.keepSynced(true);\r\n    \r\n                profileImage.setOnClickListener(v -&gt; {\r\n    \r\n                    Intent intent = new Intent(context, UserProfileActivity.class);\r\n    \r\n                    usersRef.addValueEventListener(new ValueEventListener() {\r\n                        @Override\r\n                        public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                            for (DataSnapshot snap : snapshot.getChildren()) {\r\n                                if (snap.child(&quot;name&quot;).getValue().toString().equals(username.getText().toString())) {\r\n                                    UserProfileActivity.username = username.getText().toString();\r\n                                    UserProfileActivity.userID = snap.child(&quot;id&quot;).getValue().toString();\r\n                                    break;\r\n                                }\r\n                            }\r\n                        }\r\n    \r\n                        @Override\r\n                        public void onCancelled(@NonNull DatabaseError error) {\r\n                            Toast.makeText(context, &quot;Error: &quot; + error.getMessage(), Toast.LENGTH_SHORT).show();\r\n                        }\r\n                    });\r\n    \r\n                    context.startActivity(intent);\r\n                });\r\n    \r\n                sContainer.setOnLongClickListener(v -&gt; {\r\n                    FragmentManager manager = ((AppCompatActivity) context).getSupportFragmentManager();\r\n                    PostOptionsDialog optionsDialog = new PostOptionsDialog();\r\n                    optionsDialog.setPostId(id);\r\n    \r\n                    if (username.getText().toString().equals(user.getDisplayName())) {\r\n                        optionsDialog.setAuthor(true);\r\n                    } else {\r\n                        optionsDialog.setAuthor(false);\r\n                    }\r\n    \r\n                    optionsDialog.show(manager, &quot;options&quot;);\r\n    \r\n                    return false;\r\n                });\r\n    \r\n                like_btn.setOnClickListener(v -&gt; {\r\n    \r\n                    // animate like button when clicked\r\n                    YoYo.with(Techniques.Shake)\r\n                            .duration(500)\r\n                            .repeat(0)\r\n                            .playOn(like_btn);\r\n    \r\n                    isLiked = true;\r\n    \r\n                    likeRef.addListenerForSingleValueEvent(new ValueEventListener() {\r\n                        @Override\r\n                        public void onDataChange(@NonNull @NotNull DataSnapshot snapshot) {\r\n                            if (isLiked) {\r\n                                if (snapshot.child(id).hasChild(user.getUid())) {\r\n                                    // post is liked from this user, so user wants to unlike this post\r\n                                    like_btn.setImageResource(R.drawable.ic_thump_up_outline);\r\n                                    likeRef.child(id).child(user.getUid()).removeValue();\r\n                                    isLiked = false;\r\n                                    Toast.makeText(context, &quot;You unliked this meme!&quot;, Toast.LENGTH_SHORT).show();\r\n    \r\n                                    // update likes to DB\r\n                                    updateLikes(id, false);\r\n    \r\n                                } else {\r\n                                    // post is not liked from ths user, so the user wants to like this post\r\n                                    like_btn.setImageResource(R.drawable.ic_thumb_up_filled);\r\n                                    likeRef.child(id).child(user.getUid()).setValue(&quot;true&quot;);\r\n                                    Toast.makeText(context, &quot;You liked this meme!&quot;, Toast.LENGTH_SHORT).show();\r\n    \r\n                                    // update likes to DB\r\n                                    updateLikes(id, true);\r\n    \r\n                                }\r\n                            }\r\n                        }\r\n    \r\n                        @Override\r\n                        public void onCancelled(@NonNull @NotNull DatabaseError error) {\r\n                            Toast.makeText(itemView.getContext(), &quot;Error: &quot; + error, Toast.LENGTH_LONG).show();\r\n                        }\r\n                    });\r\n                });\r\n    \r\n            }\r\n        }\r\n    \r\n    }\r\n\r\n**HomeFragment:**\r\n\r\n    public class HomeFragment extends Fragment {\r\n    \r\n        LoadingDialog progressDialog;\r\n        final DatabaseReference postsRef = FirebaseDatabase.getInstance().getReference(&quot;posts&quot;);\r\n        final DatabaseReference usersRef = FirebaseDatabase.getInstance().getReference(&quot;users&quot;);\r\n    \r\n        @Override\r\n        public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {\r\n            // Inflate the layout for this fragment\r\n            View view = inflater.inflate(R.layout.fragment_home, container, false);\r\n    \r\n            final RecyclerView recyclerView = view.findViewById(R.id.home_recycler_view);\r\n            final ArrayList&lt;PostModel&gt; postModelArrayList = new ArrayList&lt;&gt;();\r\n            final LinearLayoutManager layoutManager = new LinearLayoutManager(getContext());\r\n            final RecyclerView.Adapter recyclerAdapter = new PostRecyclerAdapter(postModelArrayList, getContext());\r\n            final FirebaseAuth mAuth = FirebaseAuth.getInstance();\r\n            final FirebaseUser user = mAuth.getCurrentUser();\r\n    \r\n            layoutManager.setReverseLayout(true);\r\n            layoutManager.setStackFromEnd(true);\r\n            recyclerView.setAdapter(recyclerAdapter);\r\n            recyclerView.setHasFixedSize(true);\r\n            recyclerView.setLayoutManager(layoutManager);\r\n    \r\n            progressDialog = LoadingDialog.Companion.get(getActivity());\r\n    \r\n            progressDialog.show();\r\n    \r\n            postsRef.addListenerForSingleValueEvent(new ValueEventListener() {\r\n                @Override\r\n                public void onDataChange(@NonNull @NotNull DataSnapshot snapshot) {\r\n    \r\n                    progressDialog.hide();\r\n    \r\n                    for (DataSnapshot snap : snapshot.getChildren()) {\r\n    \r\n                        PostModel postModel = new PostModel();\r\n                        postModel.setId(snap.child(&quot;id&quot;).getValue(String.class));\r\n                        postModel.setImgUrl(snap.child(&quot;imgUrl&quot;).getValue(String.class));\r\n                        postModel.setLikes(snap.child(&quot;likes&quot;).getValue(String.class));\r\n                        postModel.setName(snap.child(&quot;name&quot;).getValue(String.class));\r\n    \r\n                        // find user id  and set profile picture by name\r\n                        usersRef.addValueEventListener(new ValueEventListener() {\r\n                            @Override\r\n                            public void onDataChange(@NonNull DataSnapshot snapshot1) {\r\n                                for (DataSnapshot snap1 : snapshot1.getChildren()) {\r\n                                    if (snap1.child(&quot;name&quot;).getValue(String.class).equals(snap.child(&quot;name&quot;).getValue(String.class))) {\r\n                                        postModel.setAuthorID(snap1.child(&quot;id&quot;).getValue(String.class));\r\n                                        postModel.setProfileImgUrl(snap1.child(&quot;profileImgUrl&quot;).getValue(String.class));\r\n                                    }\r\n                                }\r\n                            }\r\n    \r\n                            @Override\r\n                            public void onCancelled(@NonNull DatabaseError error) {\r\n                                Toast.makeText(getContext(), &quot;Error: &quot; + error.getMessage(), Toast.LENGTH_SHORT).show();\r\n                            }\r\n                        });\r\n    \r\n                        postModelArrayList.add(postModel);\r\n    \r\n                        recyclerAdapter.notifyDataSetChanged();\r\n    \r\n                    }\r\n                }\r\n    \r\n                @Override\r\n                public void onCancelled(@NonNull @NotNull DatabaseError error) {\r\n                    Toast.makeText(getContext(), &quot;Error: &quot; + error, Toast.LENGTH_SHORT).show();\r\n                }\r\n            });\r\n    \r\n            return view;\r\n        }\r\n    }\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/fBWmc.png\r\n  [2]: https://i.stack.imgur.com/EPgta.png","title":"Always null value passed from fragment to adapter","body":"<p>I have a recycler view on my home page which is showing some posts from my db. I'm passing data like <code>userID</code>, <code>username</code> etc., into the adapter but the profile picture URL is always null inside the adapter. If I try to print it inside the fragment it shows the correct value.</p>\n<p><strong>My database structure:</strong></p>\n<p><a href=\"https://i.stack.imgur.com/fBWmc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fBWmc.png\" alt=\"Posts Node\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/EPgta.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/EPgta.png\" alt=\"Users Node\" /></a></p>\n<p><strong>PostRecyclerAdapter:</strong></p>\n<pre><code>public class PostRecyclerAdapter extends RecyclerView.Adapter&lt;PostRecyclerAdapter.ViewHolder&gt; {\n\n    List&lt;PostModel&gt; postList;\n    Context context;\n\n    final private DatabaseReference postRef = FirebaseDatabase.getInstance().getReference(&quot;posts&quot;);\n    final private DatabaseReference likeRef = FirebaseDatabase.getInstance().getReference(&quot;likes&quot;);\n    final private DatabaseReference usersRef = FirebaseDatabase.getInstance().getReference(&quot;users&quot;);\n\n    public PostRecyclerAdapter(ArrayList&lt;PostModel&gt; postModelArrayList, Context context) {\n        this.postList = postModelArrayList;\n        this.context = context;\n    }\n\n    @NonNull\n    @Override\n    public ViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\n        View view = LayoutInflater.from(parent.getContext()).inflate(R.layout.post_item, parent, false);\n        return new ViewHolder(view);\n    }\n\n    @Override\n    public void onBindViewHolder(@NonNull ViewHolder holder, int position) {\n        // check if post is liked or not\n        FirebaseAuth mAuth = FirebaseAuth.getInstance();\n        FirebaseUser user = mAuth.getCurrentUser();\n\n        likeRef.addListenerForSingleValueEvent(new ValueEventListener() {\n            @Override\n            public void onDataChange(@NonNull @NotNull DataSnapshot snapshot) {\n                // check if current post is liked from this user\n                if (snapshot.child(holder.id).hasChild(user.getUid())) {\n                    // post is liked form this user\n                    holder.like_btn.setImageResource(R.drawable.ic_thumb_up_filled);\n\n                } else {\n                    // post is not liked from this user\n                    holder.like_btn.setImageResource(R.drawable.ic_thump_up_outline);\n                }\n            }\n\n            @Override\n            public void onCancelled(@NonNull @NotNull DatabaseError error) {\n                Toast.makeText(context, &quot;error: &quot; + error, Toast.LENGTH_SHORT).show();\n            }\n        });\n\n\n        // Get current post id set username, authorID, profile picture URL, likes and post image URL\n        holder.id = postList.get(position).getId();\n        holder.username.setText(postList.get(position).getName());\n        holder.userID = postList.get(position).getAuthorID();\n        holder.like_counter_tv.setText(postList.get(position).getLikes());\n\n        Glide.with(context).load(postList.get(position).getImgUrl()).into(holder.postImg);\n\n        // Load profile picture\n        String profilePictureUrl = postList.get(position).getProfileImgUrl();\n        \n        // profilePictureUrl IS ALWAYS NULL\n        if (profilePictureUrl != null) {\n            if (!profilePictureUrl.equals(&quot;none&quot;)) {\n                Glide.with(context).load(profilePictureUrl).into(holder.profileImage);\n            }\n        }\n\n    }\n\n    @Override\n    public int getItemCount() {\n        return postList.size();\n    }\n\n    class ViewHolder extends RecyclerView.ViewHolder {\n\n        CardView container;\n        String id;\n        TextView username, like_counter_tv;\n        ImageView postImg;\n        ImageButton like_btn;\n        CircleImageView profileImage;\n        boolean isLiked = false;\n        String userID;\n\n        public void updateLikes(String postID, boolean isNotLiked) {\n            postRef.addListenerForSingleValueEvent(new ValueEventListener() {\n                @Override\n                public void onDataChange(@NonNull @NotNull DataSnapshot snapshot) {\n\n                    String currentLikesToString = snapshot.child(postID).child(&quot;likes&quot;).getValue().toString();\n                    int currentLikesToInt = Integer.parseInt(currentLikesToString);\n\n                    if (isNotLiked) {\n\n                        int newCurrentLikes = currentLikesToInt + 1;\n                        String newCurrentLikesToString = Integer.toString(newCurrentLikes);\n\n                        // Update likes on Real-time DB\n                        postRef.child(postID).child(&quot;likes&quot;).setValue(newCurrentLikesToString);\n\n                        // update likes on TextView\n                        like_counter_tv.setText(newCurrentLikesToString);\n\n                    } else {\n\n                        int newCurrentLikes = currentLikesToInt - 1;\n                        String newCurrentLikesToString = Integer.toString(newCurrentLikes);\n\n                        // Update likes on Real-time DB\n                        postRef.child(postID).child(&quot;likes&quot;).setValue(newCurrentLikesToString);\n\n                        // update likes on TextView\n                        like_counter_tv.setText(newCurrentLikesToString);\n\n                    }\n\n                }\n\n                @Override\n                public void onCancelled(@NonNull @NotNull DatabaseError error) {\n                    Toast.makeText(context, &quot;Error: &quot; + error, Toast.LENGTH_SHORT).show();\n                }\n            });\n        }\n\n        public ViewHolder(@NonNull View itemView) {\n            super(itemView);\n\n            final FirebaseAuth mAuth = FirebaseAuth.getInstance();\n            final FirebaseUser user = mAuth.getCurrentUser();\n            final ConstraintLayout sContainer = itemView.findViewById(R.id.second_container);\n            profileImage = itemView.findViewById(R.id.user_profile_image);\n            container = itemView.findViewById(R.id.post_item_container);\n            username = itemView.findViewById(R.id.post_username);\n            postImg = itemView.findViewById(R.id.post_image);\n            like_btn = itemView.findViewById(R.id.likeBtn);\n            like_counter_tv = itemView.findViewById(R.id.like_counter);\n            likeRef.keepSynced(true);\n\n            profileImage.setOnClickListener(v -&gt; {\n\n                Intent intent = new Intent(context, UserProfileActivity.class);\n\n                usersRef.addValueEventListener(new ValueEventListener() {\n                    @Override\n                    public void onDataChange(@NonNull DataSnapshot snapshot) {\n                        for (DataSnapshot snap : snapshot.getChildren()) {\n                            if (snap.child(&quot;name&quot;).getValue().toString().equals(username.getText().toString())) {\n                                UserProfileActivity.username = username.getText().toString();\n                                UserProfileActivity.userID = snap.child(&quot;id&quot;).getValue().toString();\n                                break;\n                            }\n                        }\n                    }\n\n                    @Override\n                    public void onCancelled(@NonNull DatabaseError error) {\n                        Toast.makeText(context, &quot;Error: &quot; + error.getMessage(), Toast.LENGTH_SHORT).show();\n                    }\n                });\n\n                context.startActivity(intent);\n            });\n\n            sContainer.setOnLongClickListener(v -&gt; {\n                FragmentManager manager = ((AppCompatActivity) context).getSupportFragmentManager();\n                PostOptionsDialog optionsDialog = new PostOptionsDialog();\n                optionsDialog.setPostId(id);\n\n                if (username.getText().toString().equals(user.getDisplayName())) {\n                    optionsDialog.setAuthor(true);\n                } else {\n                    optionsDialog.setAuthor(false);\n                }\n\n                optionsDialog.show(manager, &quot;options&quot;);\n\n                return false;\n            });\n\n            like_btn.setOnClickListener(v -&gt; {\n\n                // animate like button when clicked\n                YoYo.with(Techniques.Shake)\n                        .duration(500)\n                        .repeat(0)\n                        .playOn(like_btn);\n\n                isLiked = true;\n\n                likeRef.addListenerForSingleValueEvent(new ValueEventListener() {\n                    @Override\n                    public void onDataChange(@NonNull @NotNull DataSnapshot snapshot) {\n                        if (isLiked) {\n                            if (snapshot.child(id).hasChild(user.getUid())) {\n                                // post is liked from this user, so user wants to unlike this post\n                                like_btn.setImageResource(R.drawable.ic_thump_up_outline);\n                                likeRef.child(id).child(user.getUid()).removeValue();\n                                isLiked = false;\n                                Toast.makeText(context, &quot;You unliked this meme!&quot;, Toast.LENGTH_SHORT).show();\n\n                                // update likes to DB\n                                updateLikes(id, false);\n\n                            } else {\n                                // post is not liked from ths user, so the user wants to like this post\n                                like_btn.setImageResource(R.drawable.ic_thumb_up_filled);\n                                likeRef.child(id).child(user.getUid()).setValue(&quot;true&quot;);\n                                Toast.makeText(context, &quot;You liked this meme!&quot;, Toast.LENGTH_SHORT).show();\n\n                                // update likes to DB\n                                updateLikes(id, true);\n\n                            }\n                        }\n                    }\n\n                    @Override\n                    public void onCancelled(@NonNull @NotNull DatabaseError error) {\n                        Toast.makeText(itemView.getContext(), &quot;Error: &quot; + error, Toast.LENGTH_LONG).show();\n                    }\n                });\n            });\n\n        }\n    }\n\n}\n</code></pre>\n<p><strong>HomeFragment:</strong></p>\n<pre><code>public class HomeFragment extends Fragment {\n\n    LoadingDialog progressDialog;\n    final DatabaseReference postsRef = FirebaseDatabase.getInstance().getReference(&quot;posts&quot;);\n    final DatabaseReference usersRef = FirebaseDatabase.getInstance().getReference(&quot;users&quot;);\n\n    @Override\n    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {\n        // Inflate the layout for this fragment\n        View view = inflater.inflate(R.layout.fragment_home, container, false);\n\n        final RecyclerView recyclerView = view.findViewById(R.id.home_recycler_view);\n        final ArrayList&lt;PostModel&gt; postModelArrayList = new ArrayList&lt;&gt;();\n        final LinearLayoutManager layoutManager = new LinearLayoutManager(getContext());\n        final RecyclerView.Adapter recyclerAdapter = new PostRecyclerAdapter(postModelArrayList, getContext());\n        final FirebaseAuth mAuth = FirebaseAuth.getInstance();\n        final FirebaseUser user = mAuth.getCurrentUser();\n\n        layoutManager.setReverseLayout(true);\n        layoutManager.setStackFromEnd(true);\n        recyclerView.setAdapter(recyclerAdapter);\n        recyclerView.setHasFixedSize(true);\n        recyclerView.setLayoutManager(layoutManager);\n\n        progressDialog = LoadingDialog.Companion.get(getActivity());\n\n        progressDialog.show();\n\n        postsRef.addListenerForSingleValueEvent(new ValueEventListener() {\n            @Override\n            public void onDataChange(@NonNull @NotNull DataSnapshot snapshot) {\n\n                progressDialog.hide();\n\n                for (DataSnapshot snap : snapshot.getChildren()) {\n\n                    PostModel postModel = new PostModel();\n                    postModel.setId(snap.child(&quot;id&quot;).getValue(String.class));\n                    postModel.setImgUrl(snap.child(&quot;imgUrl&quot;).getValue(String.class));\n                    postModel.setLikes(snap.child(&quot;likes&quot;).getValue(String.class));\n                    postModel.setName(snap.child(&quot;name&quot;).getValue(String.class));\n\n                    // find user id  and set profile picture by name\n                    usersRef.addValueEventListener(new ValueEventListener() {\n                        @Override\n                        public void onDataChange(@NonNull DataSnapshot snapshot1) {\n                            for (DataSnapshot snap1 : snapshot1.getChildren()) {\n                                if (snap1.child(&quot;name&quot;).getValue(String.class).equals(snap.child(&quot;name&quot;).getValue(String.class))) {\n                                    postModel.setAuthorID(snap1.child(&quot;id&quot;).getValue(String.class));\n                                    postModel.setProfileImgUrl(snap1.child(&quot;profileImgUrl&quot;).getValue(String.class));\n                                }\n                            }\n                        }\n\n                        @Override\n                        public void onCancelled(@NonNull DatabaseError error) {\n                            Toast.makeText(getContext(), &quot;Error: &quot; + error.getMessage(), Toast.LENGTH_SHORT).show();\n                        }\n                    });\n\n                    postModelArrayList.add(postModel);\n\n                    recyclerAdapter.notifyDataSetChanged();\n\n                }\n            }\n\n            @Override\n            public void onCancelled(@NonNull @NotNull DatabaseError error) {\n                Toast.makeText(getContext(), &quot;Error: &quot; + error, Toast.LENGTH_SHORT).show();\n            }\n        });\n\n        return view;\n    }\n}\n</code></pre>\n"},{"tags":["java","return"],"comments":[{"owner":{"account_id":4503838,"reputation":955,"user_id":3661738,"display_name":"Tyler"},"score":2,"creation_date":1585070782,"post_id":60836187,"comment_id":107635035,"body_markdown":"Look up boolean logic and the logical AND operator","body":"Look up boolean logic and the logical AND operator"},{"owner":{"account_id":13588274,"reputation":148,"user_id":9802378,"display_name":"Dubstepzedd"},"score":0,"creation_date":1585070991,"post_id":60836187,"comment_id":107635122,"body_markdown":"Didn&#39;t know you could do it that way, seems a bit harsh to downvote because I didnt have the knowledge. I&#39;ll look it up","body":"Didn&#39;t know you could do it that way, seems a bit harsh to downvote because I didnt have the knowledge. I&#39;ll look it up"},{"owner":{"account_id":4503838,"reputation":955,"user_id":3661738,"display_name":"Tyler"},"score":1,"creation_date":1585071420,"post_id":60836187,"comment_id":107635346,"body_markdown":"I wasn&#39;t the downvote, and you asked for a doc to read about it so I obliged","body":"I wasn&#39;t the downvote, and you asked for a doc to read about it so I obliged"},{"owner":{"account_id":13588274,"reputation":148,"user_id":9802378,"display_name":"Dubstepzedd"},"score":1,"creation_date":1585071645,"post_id":60836187,"comment_id":107635448,"body_markdown":"Yes, I didn&#39;t mean to point at you Tyler, sorry! I just don&#39;t like downvotes, it&#39;s tough to get rep so I mixed it into that comment. I looked it up and understand now. It&#39;s a neat feature actually! Thanks","body":"Yes, I didn&#39;t mean to point at you Tyler, sorry! I just don&#39;t like downvotes, it&#39;s tough to get rep so I mixed it into that comment. I looked it up and understand now. It&#39;s a neat feature actually! Thanks"}],"answers":[{"tags":[],"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1585070997,"creation_date":1585070997,"answer_id":60836267,"question_id":60836187,"body_markdown":"First, does your code compile? The following would only be valid if your arrays returned a `boolean` value.\r\n```\r\nreturn !keys[keycode] &amp;&amp; keysLast[keycode];\r\n```\r\n\r\nAnd if keys[keyCode] is true then !keys[KeyCode] would be false and the statement would return false since the rest of the expression need not be evaluated.","title":"Am I correct regarding this boolean method?","body":"<p>First, does your code compile? The following would only be valid if your arrays returned a <code>boolean</code> value.</p>\n\n<pre><code>return !keys[keycode] &amp;&amp; keysLast[keycode];\n</code></pre>\n\n<p>And if keys[keyCode] is true then !keys[KeyCode] would be false and the statement would return false since the rest of the expression need not be evaluated.</p>\n"}],"owner":{"account_id":13588274,"reputation":148,"user_id":9802378,"display_name":"Dubstepzedd"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":65,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"closed_date":1617008984,"accepted_answer_id":60836267,"answer_count":1,"score":1,"last_activity_date":1637257394,"creation_date":1585070709,"question_id":60836187,"body_markdown":"I was looking up how to perfect the movement in Java. The code I found looked like:\r\n```\r\npublic void update() {\r\n\t\t\r\n\tfor (int i = 0; i &lt; AMOUNT_KEYS; i++) {\r\n\t\tkeysLast[i] = keys[i];\t////Sets buttons pressed this frame equal to the lastKey array\r\n\t}\r\n\r\n\tfor (int i = 0; i &lt; AMOUNT_BUTTONS; i++) {\r\n\t\tbuttonsLast[i] = buttons[i];\t//Sets buttons pressed this frame equal to the lastKey array\r\n\t}\r\n}\r\n\t\r\n//keys Methods\r\npublic boolean isKeyPressed(int keycode) {\r\n\treturn keys[keycode];\r\n}\r\n\t\r\npublic boolean isKeyUp(int keycode) {\r\n\treturn !keys[keycode] &amp;&amp; keysLast[keycode]; //Does not return 2 values, it returns true if these conditions are met?\r\n}\r\n\r\npublic boolean isKeyDown(int keycode) {\r\n\treturn keys[keycode] &amp;&amp; !keysLast[keycode];\r\n}\r\n```\r\nI was wondering if my thought regarding this snippet is correct, my guess is commented next to it:\r\n```\r\npublic boolean isKeyUp(int keycode) {\r\n    return !keys[keycode] &amp;&amp; keysLast[keycode];  //Does not return 2 values, it returns true if these conditions are met?\r\n}\r\n\r\npublic boolean isKeyDown(int keycode) {\r\n    return keys[keycode] &amp;&amp; !keysLast[keycode];\r\n}\r\n```\r\nIt seems to my eye that methods `isKeyDown` and `isKeyUp` return 2 booleans. I thought that was impossible. But I tested it and it seems like it acts like an **if-statement?**. So if the statement after the return command is true it will return true?\r\n\r\n*Am I correct? If so why does it act that way? *","title":"Am I correct regarding this boolean method?","body":"<p>I was looking up how to perfect the movement in Java. The code I found looked like:</p>\n<pre><code>public void update() {\n        \n    for (int i = 0; i &lt; AMOUNT_KEYS; i++) {\n        keysLast[i] = keys[i];  ////Sets buttons pressed this frame equal to the lastKey array\n    }\n\n    for (int i = 0; i &lt; AMOUNT_BUTTONS; i++) {\n        buttonsLast[i] = buttons[i];    //Sets buttons pressed this frame equal to the lastKey array\n    }\n}\n    \n//keys Methods\npublic boolean isKeyPressed(int keycode) {\n    return keys[keycode];\n}\n    \npublic boolean isKeyUp(int keycode) {\n    return !keys[keycode] &amp;&amp; keysLast[keycode]; //Does not return 2 values, it returns true if these conditions are met?\n}\n\npublic boolean isKeyDown(int keycode) {\n    return keys[keycode] &amp;&amp; !keysLast[keycode];\n}\n</code></pre>\n<p>I was wondering if my thought regarding this snippet is correct, my guess is commented next to it:</p>\n<pre><code>public boolean isKeyUp(int keycode) {\n    return !keys[keycode] &amp;&amp; keysLast[keycode];  //Does not return 2 values, it returns true if these conditions are met?\n}\n\npublic boolean isKeyDown(int keycode) {\n    return keys[keycode] &amp;&amp; !keysLast[keycode];\n}\n</code></pre>\n<p>It seems to my eye that methods <code>isKeyDown</code> and <code>isKeyUp</code> return 2 booleans. I thought that was impossible. But I tested it and it seems like it acts like an <strong>if-statement?</strong>. So if the statement after the return command is true it will return true?</p>\n<p>*Am I correct? If so why does it act that way? *</p>\n"},{"tags":["java"],"answers":[{"tags":[],"owner":{"account_id":153779,"reputation":1985,"user_id":369280,"accept_rate":79,"display_name":"nkukhar"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1380200445,"creation_date":1380200445,"answer_id":19029036,"question_id":19028976,"body_markdown":"When you declare `Search` it must be parametrized by some class.\r\nIn your case it&#39;s\r\n\r\n\r\n    Search&lt;Integer&gt; search = new Search&lt;Integer&gt;();//to find int\r\n    Search&lt;String&gt; search = new Search&lt;String&gt;();//to find string\r\n\r\nAssuming that your `Search` class is \r\n\r\n    class Search&lt;T&gt; {\r\n        public int linearSearch(ArrayList&lt;T&gt; rrr, T wordnum)...\r\n    }","title":"Generic linear search - can&#39;t search in ArrayList with strings","body":"<p>When you declare <code>Search</code> it must be parametrized by some class.\nIn your case it's</p>\n\n<pre><code>Search&lt;Integer&gt; search = new Search&lt;Integer&gt;();//to find int\nSearch&lt;String&gt; search = new Search&lt;String&gt;();//to find string\n</code></pre>\n\n<p>Assuming that your <code>Search</code> class is </p>\n\n<pre><code>class Search&lt;T&gt; {\n    public int linearSearch(ArrayList&lt;T&gt; rrr, T wordnum)...\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1853886,"reputation":210597,"user_id":1679863,"accept_rate":77,"display_name":"Rohit Jain"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1380202031,"creation_date":1380200455,"answer_id":19029038,"question_id":19028976,"body_markdown":"The way you are creating an instance of your `Search` class in not right.\r\n\r\n    Search&lt;T&gt; search = new Search&lt;T&gt;();\r\n\r\nthis won&#39;t compile. You need to pass the actual type argument while creating the instance. That&#39;s because you can&#39;t use type parameters in a static context.\r\n\r\n - [Where is type parameter visible?][1]\r\n - [Why can&#39;t I use a type parameter in any static context of the parameterized class?][2]\r\n\r\n&lt;hr /&gt;\r\n\r\nTo use the generic method, you have to create instance for specific type arguments. And then invoking the method with that instance will work fine:\r\n\r\n    Search&lt;String&gt; stringSearch = new Search&lt;String&gt;();\r\n    search.linearSearch(alist2, word);  // Type `T` is now String.\r\n\r\nSimilarly you will have to do this for `Integer`.\r\n\r\n&lt;hr /&gt;\r\n\r\nHaving said that, you don&#39;t really need to make your `Search` class generic. Rather, you can make the method itself generic, while leaving the class non-generic:\r\n\r\n    class Search {\r\n\r\n        /** For generic method, you define the type parameter in angular brackets, \r\n            before the return type\r\n        **/\r\n        public &lt;T&gt; int linearSearch(ArrayList&lt;T&gt; rrr, T wordnum) {\r\n            for (int i=0; i &lt; rrr.size(); i++) {\r\n                if (wordnum.equals(rrr.get(i))) {\r\n                    return i;\r\n                }\r\n            }\r\n            return -1;\r\n        }\r\n    }\r\n\r\nAnd then just create an instance of `Search` normally, and invoke this method. The type will be inferred based on which list you are passing:\r\n\r\n    Search search = new Search();\r\n    \r\n    System.out.println(search.linearSearch(alist, num));   // T inferred as Integer\r\n    System.out.println(search.linearSearch(alist2, word)); // T inferred as String\r\n\r\n&lt;hr /&gt;\r\n\r\n**References:**\r\n\r\n - [Java Generics FAQs][3]\r\n  - [How is a generic type instantiated?][4]\r\n  - [What is a generic method?][5]\r\n  - [Type Argument Inference][6]\r\n\r\n\r\n  [1]: http://www.angelikalanger.com/GenericsFAQ/FAQSections/TypeParameters.html#Where%20is%20a%20type%20parameter%20visible%20%28or%20invisible%29?\r\n  [2]: http://www.angelikalanger.com/GenericsFAQ/FAQSections/TypeParameters.html#Why%20can%27t%20I%20use%20a%20type%20parameter%20in%20any%20static%20context%20of%20the%20parameterized%20class?\r\n  [3]: http://www.angelikalanger.com/GenericsFAQ/JavaGenericsFAQ.html\r\n  [4]: http://www.angelikalanger.com/GenericsFAQ/FAQSections/ParameterizedTypes.html#FAQ004\r\n  [5]: http://www.angelikalanger.com/GenericsFAQ/FAQSections/ParameterizedMethods.html#FAQ001\r\n  [6]: http://www.angelikalanger.com/GenericsFAQ/FAQSections/TechnicalDetails.html#Type%20Argument%20Inference","title":"Generic linear search - can&#39;t search in ArrayList with strings","body":"<p>The way you are creating an instance of your <code>Search</code> class in not right.</p>\n\n<pre><code>Search&lt;T&gt; search = new Search&lt;T&gt;();\n</code></pre>\n\n<p>this won't compile. You need to pass the actual type argument while creating the instance. That's because you can't use type parameters in a static context.</p>\n\n<ul>\n<li><a href=\"http://www.angelikalanger.com/GenericsFAQ/FAQSections/TypeParameters.html#Where%20is%20a%20type%20parameter%20visible%20%28or%20invisible%29?\" rel=\"nofollow\">Where is type parameter visible?</a></li>\n<li><a href=\"http://www.angelikalanger.com/GenericsFAQ/FAQSections/TypeParameters.html#Why%20can%27t%20I%20use%20a%20type%20parameter%20in%20any%20static%20context%20of%20the%20parameterized%20class?\" rel=\"nofollow\">Why can't I use a type parameter in any static context of the parameterized class?</a></li>\n</ul>\n\n<hr />\n\n<p>To use the generic method, you have to create instance for specific type arguments. And then invoking the method with that instance will work fine:</p>\n\n<pre><code>Search&lt;String&gt; stringSearch = new Search&lt;String&gt;();\nsearch.linearSearch(alist2, word);  // Type `T` is now String.\n</code></pre>\n\n<p>Similarly you will have to do this for <code>Integer</code>.</p>\n\n<hr />\n\n<p>Having said that, you don't really need to make your <code>Search</code> class generic. Rather, you can make the method itself generic, while leaving the class non-generic:</p>\n\n<pre><code>class Search {\n\n    /** For generic method, you define the type parameter in angular brackets, \n        before the return type\n    **/\n    public &lt;T&gt; int linearSearch(ArrayList&lt;T&gt; rrr, T wordnum) {\n        for (int i=0; i &lt; rrr.size(); i++) {\n            if (wordnum.equals(rrr.get(i))) {\n                return i;\n            }\n        }\n        return -1;\n    }\n}\n</code></pre>\n\n<p>And then just create an instance of <code>Search</code> normally, and invoke this method. The type will be inferred based on which list you are passing:</p>\n\n<pre><code>Search search = new Search();\n\nSystem.out.println(search.linearSearch(alist, num));   // T inferred as Integer\nSystem.out.println(search.linearSearch(alist2, word)); // T inferred as String\n</code></pre>\n\n<hr />\n\n<p><strong>References:</strong></p>\n\n<ul>\n<li><a href=\"http://www.angelikalanger.com/GenericsFAQ/JavaGenericsFAQ.html\" rel=\"nofollow\">Java Generics FAQs</a>\n<ul>\n<li><a href=\"http://www.angelikalanger.com/GenericsFAQ/FAQSections/ParameterizedTypes.html#FAQ004\" rel=\"nofollow\">How is a generic type instantiated?</a></li>\n<li><a href=\"http://www.angelikalanger.com/GenericsFAQ/FAQSections/ParameterizedMethods.html#FAQ001\" rel=\"nofollow\">What is a generic method?</a></li>\n<li><a href=\"http://www.angelikalanger.com/GenericsFAQ/FAQSections/TechnicalDetails.html#Type%20Argument%20Inference\" rel=\"nofollow\">Type Argument Inference</a></li>\n</ul></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1380200550,"creation_date":1380200550,"answer_id":19029073,"question_id":19028976,"body_markdown":"Make the class without parameter T, and define a static function with parameter T.\r\n\r\n    public static &lt;T&gt; int linearSearch(List&lt;T&gt; rrr, T wordnum) {\r\n\r\nSo you can call `Search.linearSearch(...)`.\r\n\r\nOtherwise @NKukhar&#39;s answer should have been done.\r\nAlso it is better style to enable List in the API (more generic than ArrayList).","title":"Generic linear search - can&#39;t search in ArrayList with strings","body":"<p>Make the class without parameter T, and define a static function with parameter T.</p>\n\n<pre><code>public static &lt;T&gt; int linearSearch(List&lt;T&gt; rrr, T wordnum) {\n</code></pre>\n\n<p>So you can call <code>Search.linearSearch(...)</code>.</p>\n\n<p>Otherwise @NKukhar's answer should have been done.\nAlso it is better style to enable List in the API (more generic than ArrayList).</p>\n"}],"owner":{"account_id":2611845,"reputation":187,"user_id":2261815,"accept_rate":87,"display_name":"Roadhouse"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7809,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":19029036,"answer_count":3,"score":-1,"last_activity_date":1637257172,"creation_date":1380200295,"question_id":19028976,"body_markdown":"I&#39;m trying to make a method with which I can search for a specific integer or string in an ArrayList. \r\nI&#39;ve managed to make it search for integers in an ArrayList, but when I&#39;m trying to search for strings I can&#39;t make it work properly.\r\nHere is my code:\r\n\r\n        import java.util.*;\r\n    public class Search &lt;T&gt; {\r\n\r\n\t\r\n    public static void main(String[] argv) {\r\n    \t\r\n        Search&lt;T&gt; search = new Search&lt;T&gt;();\r\n\r\n        ArrayList&lt;Integer&gt; alist = new ArrayList&lt;Integer&gt;();\r\n        alist.add(1);\r\n        alist.add(3);\r\n        alist.add(5);\r\n        alist.add(7);\r\n        \r\n        int num = 5;\r\n        \r\n        \r\n        ArrayList&lt;String&gt; alist2 = new ArrayList&lt;String&gt;();\r\n        alist2.add(&quot;A&quot;);\r\n        alist2.add(&quot;B&quot;);\r\n        alist2.add(&quot;C&quot;);\r\n        alist2.add(&quot;D&quot;);\r\n        \r\n        String word = &quot;C&quot;;\r\n        \r\n        \r\n        System.out.println(search.linearSearch(alist, num));\r\n        \r\n        System.out.println(search.linearSearch(alist2, word));\r\n        \r\n        \r\n    }\r\n    \r\n    public int linearSearch(ArrayList&lt;T&gt; rrr, T wordnum) {\r\n        for (int i=0; i &lt; rrr.size(); i++) {\r\n            if (wordnum.equals(rrr.get(i))) {\r\n                return i;\r\n               \r\n            };\r\n        };\r\n        return -1;\r\n    }\r\n   }\r\n\r\n\r\nThe error I&#39;m getting is &quot;Cannot make a static reference to the non-static type T&quot; on \r\n\r\n    Search&lt;T&gt; search = new Search&lt;T&gt;();\r\n\r\nI&#39;m new to generics and I would really appreciate some help!","title":"Generic linear search - can&#39;t search in ArrayList with strings","body":"<p>I'm trying to make a method with which I can search for a specific integer or string in an ArrayList. \nI've managed to make it search for integers in an ArrayList, but when I'm trying to search for strings I can't make it work properly.\nHere is my code:</p>\n\n<pre><code>    import java.util.*;\npublic class Search &lt;T&gt; {\n\n\npublic static void main(String[] argv) {\n\n    Search&lt;T&gt; search = new Search&lt;T&gt;();\n\n    ArrayList&lt;Integer&gt; alist = new ArrayList&lt;Integer&gt;();\n    alist.add(1);\n    alist.add(3);\n    alist.add(5);\n    alist.add(7);\n\n    int num = 5;\n\n\n    ArrayList&lt;String&gt; alist2 = new ArrayList&lt;String&gt;();\n    alist2.add(\"A\");\n    alist2.add(\"B\");\n    alist2.add(\"C\");\n    alist2.add(\"D\");\n\n    String word = \"C\";\n\n\n    System.out.println(search.linearSearch(alist, num));\n\n    System.out.println(search.linearSearch(alist2, word));\n\n\n}\n\npublic int linearSearch(ArrayList&lt;T&gt; rrr, T wordnum) {\n    for (int i=0; i &lt; rrr.size(); i++) {\n        if (wordnum.equals(rrr.get(i))) {\n            return i;\n\n        };\n    };\n    return -1;\n}\n</code></pre>\n\n<p>}</p>\n\n<p>The error I'm getting is \"Cannot make a static reference to the non-static type T\" on </p>\n\n<pre><code>Search&lt;T&gt; search = new Search&lt;T&gt;();\n</code></pre>\n\n<p>I'm new to generics and I would really appreciate some help!</p>\n"},{"tags":["java","hibernate"],"comments":[{"owner":{"account_id":5940172,"reputation":3457,"user_id":4671717,"accept_rate":25,"display_name":"Chris Maggiulli"},"score":0,"creation_date":1637149634,"post_id":70003761,"comment_id":123746929,"body_markdown":"have you tried `select * from &quot;[TEAM\\Username]&quot;.tableName;`","body":"have you tried <code>select * from &quot;[TEAM\\Username]&quot;.tableName;</code>"},{"owner":{"account_id":2094057,"reputation":506072,"user_id":1863229,"accept_rate":58,"display_name":"Tim Biegeleisen"},"score":0,"creation_date":1637149654,"post_id":70003761,"comment_id":123746940,"body_markdown":"`For my native query` ... Why are you concatenting the table name into the query string?  In general you should probably avoid putting backslashes into the table names.","body":"<code>For my native query</code> ... Why are you concatenting the table name into the query string?  In general you should probably avoid putting backslashes into the table names."},{"owner":{"account_id":16290452,"reputation":489,"user_id":11764050,"display_name":"PaulD"},"score":0,"creation_date":1637159576,"post_id":70003761,"comment_id":123751394,"body_markdown":"&quot;Ive tried a few different ways to escape the characters but as I mentioned, I can see  that the query has been set within the Query object correctly.&quot;\nWhat exactly have you tried? I would try a double backslash `[TEAM\\\\Username].tableName`","body":"&quot;Ive tried a few different ways to escape the characters but as I mentioned, I can see  that the query has been set within the Query object correctly.&quot; What exactly have you tried? I would try a double backslash <code>[TEAM\\\\Username].tableName</code>"},{"owner":{"account_id":14037723,"reputation":205,"user_id":10140004,"display_name":"Pete"},"score":0,"creation_date":1637251259,"post_id":70003761,"comment_id":123781656,"body_markdown":"I&#39;ve tried the `[TEAM\\\\Username].table` however i&#39;m yet to try `select * from &quot;[TEAM\\Username]&quot;.tableName;`. I managed to get it working by changing the schema names to team_username in combination with `....{h-schema}tableName ....`","body":"I&#39;ve tried the <code>[TEAM\\\\Username].table</code> however i&#39;m yet to try <code>select * from &quot;[TEAM\\Username]&quot;.tableName;</code>. I managed to get it working by changing the schema names to team_username in combination with <code>....{h-schema}tableName ....</code>"}],"owner":{"account_id":14037723,"reputation":205,"user_id":10140004,"display_name":"Pete"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1637741662,"answer_count":0,"score":0,"last_activity_date":1637256839,"creation_date":1637149292,"question_id":70003761,"body_markdown":"How can I stop my query string from being processed when query.getResultList is called or alternately set the schema name that includes a backslash?\r\n\r\nBackground info:\r\nI have multiple schemas within a SQL Server database. I differentiate between these schemas based on the username. Default is `default.tableName` and individual users have `[Team\\Username].tableName`\r\n\r\nFor my native query, I&#39;ve got a select statement like &quot;Select * from &quot;+schema+&quot;.tableName&quot;;\r\n\r\nI can see the string that is created within the Org.hibernate.query.internal.nativeQueryImpl class and it looks fine. The statement runs in SQL Server Management Studio.\r\n\r\n    select * from [TEAM\\Username].tableName;\r\n\r\nHowever when the query object calls getResultList(), I get the following error:\r\n\r\n&gt; &quot;org.hibernate.exception.SQLGrammarException: could not extract\r\n&gt; ResultSet&quot;\r\n&gt; \r\n&gt; caused by \r\n&gt; \r\n&gt; com.microsoft.sqlserver.jdbc.SQLServerException: Invalid object name\r\n&gt; &#39;TEAMUsername.tableName&#39;.\r\n\r\n\r\nAs you can see the backslash and square brackets are being removed during processing. This query works if I use the default schema as aka default.teamName\r\n\r\nI&#39;ve tried a few different ways to escape the characters but as I mentioned, I can see that the query has been set within the Query object correctly. \r\n","title":"Native SQL query removes backslashs","body":"<p>How can I stop my query string from being processed when query.getResultList is called or alternately set the schema name that includes a backslash?</p>\n<p>Background info:\nI have multiple schemas within a SQL Server database. I differentiate between these schemas based on the username. Default is <code>default.tableName</code> and individual users have <code>[Team\\Username].tableName</code></p>\n<p>For my native query, I've got a select statement like &quot;Select * from &quot;+schema+&quot;.tableName&quot;;</p>\n<p>I can see the string that is created within the Org.hibernate.query.internal.nativeQueryImpl class and it looks fine. The statement runs in SQL Server Management Studio.</p>\n<pre><code>select * from [TEAM\\Username].tableName;\n</code></pre>\n<p>However when the query object calls getResultList(), I get the following error:</p>\n<blockquote>\n<p>&quot;org.hibernate.exception.SQLGrammarException: could not extract\nResultSet&quot;</p>\n<p>caused by</p>\n<p>com.microsoft.sqlserver.jdbc.SQLServerException: Invalid object name\n'TEAMUsername.tableName'.</p>\n</blockquote>\n<p>As you can see the backslash and square brackets are being removed during processing. This query works if I use the default schema as aka default.teamName</p>\n<p>I've tried a few different ways to escape the characters but as I mentioned, I can see that the query has been set within the Query object correctly.</p>\n"},{"tags":["java","xml","curl","groovy","http-post"],"comments":[{"owner":{"account_id":208830,"reputation":10240,"user_id":459557,"display_name":"vanje"},"score":0,"creation_date":1637259879,"post_id":70024250,"comment_id":123785097,"body_markdown":"Does the curl command work if you start it directly in the command line?","body":"Does the curl command work if you start it directly in the command line?"},{"owner":{"account_id":2090213,"reputation":1431,"user_id":1860222,"accept_rate":52,"display_name":"pbuchheit"},"score":0,"creation_date":1637260717,"post_id":70024250,"comment_id":123785391,"body_markdown":"@vanje Yes. When I execute command on the command line, it correctly interprets the wrapping &#39; or &quot; characters and passes along the data as a complete string. When I do the same thing from groovy it seems to be ignoring the wrapping quotes.","body":"@vanje Yes. When I execute command on the command line, it correctly interprets the wrapping &#39; or &quot; characters and passes along the data as a complete string. When I do the same thing from groovy it seems to be ignoring the wrapping quotes."},{"owner":{"account_id":208830,"reputation":10240,"user_id":459557,"display_name":"vanje"},"score":0,"creation_date":1637261078,"post_id":70024250,"comment_id":123785516,"body_markdown":"You can try to store the XML content to a file and use the `-d @filename` syntax to send the file content.","body":"You can try to store the XML content to a file and use the <code>-d @filename</code> syntax to send the file content."},{"owner":{"account_id":208830,"reputation":10240,"user_id":459557,"display_name":"vanje"},"score":0,"creation_date":1637261165,"post_id":70024250,"comment_id":123785553,"body_markdown":"Maybe in conjunction with `--data-binary`.","body":"Maybe in conjunction with <code>--data-binary</code>."},{"owner":{"account_id":3837378,"reputation":35463,"user_id":3181392,"display_name":"cfrick"},"score":1,"creation_date":1637261922,"post_id":70024250,"comment_id":123785842,"body_markdown":"Don&#39;t use `String.execute()` - instead use `List.execute()`","body":"Don&#39;t use <code>String.execute()</code> - instead use <code>List.execute()</code>"}],"owner":{"account_id":2090213,"reputation":1431,"user_id":1860222,"accept_rate":52,"display_name":"pbuchheit"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1637262788,"answer_count":0,"score":0,"last_activity_date":1637256662,"creation_date":1637256662,"question_id":70024250,"body_markdown":"I have an application that needs to send a POST request to a third-party API. I&#39;m stuck with a legacy version of java that doesn&#39;t support the required security ciphers, so I&#39;m trying to send the request using groovy and curl as a workaround. The problem I&#39;m running into is that I can&#39;t seem to find a way of formatting the data being posted that curl will accept. The request data is xml that includes spaces and special characters. Every approach I have tried so far results in a &#39;400&#39; error. \r\n\r\nI have tried:\r\n\r\n**no wrapping** - treats the first space as the end of the data\r\n\r\n**wrapping with single or double quotes** - same as above\r\n\r\n**replacing all spaces with %20** - 400 error\r\n\r\n\r\nI&#39;m out of ideas at this point. Any suggestions would be appreciated.\r\n\r\n\r\nMy Groovy code:\r\n\r\n    class UPSRequest {\r\n        static main(args) {\r\n        \r\n        \t\tdef request=&quot;&quot;&quot;&lt;?xml version=\\&quot;1.0\\&quot;?&gt;&lt;AccessRequest xml:lang=\\&quot;en-US\\&quot;&gt;&lt;UserId&gt;foo&lt;/UserId&gt;&lt;Password&gt;abc@123&lt;/Password&gt;&lt;/AccessRequest&gt;&lt;?xml version=\\&quot;1.0\\&quot;?&gt;&lt;TrackRequest xml:lang=\\&quot;en-US\\&quot;&gt;&lt;Request&gt;&lt;TransactionReference&gt;&lt;CustomerContext&gt;My App&lt;/CustomerContext&gt;&lt;XpciVersion&gt;1.0001&lt;/XpciVersion&gt;&lt;/TransactionReference&gt;&lt;RequestAction&gt;Track&lt;/RequestAction&gt;&lt;RequestOption&gt;none&lt;/RequestOption&gt;&lt;/Request&gt;&lt;ShipmentIdentificationNumber&gt;1Z12345E1392654435&lt;/ShipmentIdentificationNumber&gt;&lt;/TrackRequest&gt;&quot;&quot;&quot;;\r\n        \t\tdef command = &quot;&quot;&quot;curl https://wwwcie.ups.com/ups.app/xml/Track -H &quot;Content-Type:application/x-www-form-urlencoded&quot; -X POST -d ${request}&quot;&quot;&quot;;\r\n        \t\tdef proc = command.execute();\r\n        \t\tdef outputStream = new StringBuffer();\r\n        \t\tproc.waitForProcessOutput(System.out, System.err)\r\n        \t}\r\n    }","title":"How Do I Send an HTTP POST Request via curl Using Groovy?","body":"<p>I have an application that needs to send a POST request to a third-party API. I'm stuck with a legacy version of java that doesn't support the required security ciphers, so I'm trying to send the request using groovy and curl as a workaround. The problem I'm running into is that I can't seem to find a way of formatting the data being posted that curl will accept. The request data is xml that includes spaces and special characters. Every approach I have tried so far results in a '400' error.</p>\n<p>I have tried:</p>\n<p><strong>no wrapping</strong> - treats the first space as the end of the data</p>\n<p><strong>wrapping with single or double quotes</strong> - same as above</p>\n<p><strong>replacing all spaces with %20</strong> - 400 error</p>\n<p>I'm out of ideas at this point. Any suggestions would be appreciated.</p>\n<p>My Groovy code:</p>\n<pre><code>class UPSRequest {\n    static main(args) {\n    \n            def request=&quot;&quot;&quot;&lt;?xml version=\\&quot;1.0\\&quot;?&gt;&lt;AccessRequest xml:lang=\\&quot;en-US\\&quot;&gt;&lt;UserId&gt;foo&lt;/UserId&gt;&lt;Password&gt;abc@123&lt;/Password&gt;&lt;/AccessRequest&gt;&lt;?xml version=\\&quot;1.0\\&quot;?&gt;&lt;TrackRequest xml:lang=\\&quot;en-US\\&quot;&gt;&lt;Request&gt;&lt;TransactionReference&gt;&lt;CustomerContext&gt;My App&lt;/CustomerContext&gt;&lt;XpciVersion&gt;1.0001&lt;/XpciVersion&gt;&lt;/TransactionReference&gt;&lt;RequestAction&gt;Track&lt;/RequestAction&gt;&lt;RequestOption&gt;none&lt;/RequestOption&gt;&lt;/Request&gt;&lt;ShipmentIdentificationNumber&gt;1Z12345E1392654435&lt;/ShipmentIdentificationNumber&gt;&lt;/TrackRequest&gt;&quot;&quot;&quot;;\n            def command = &quot;&quot;&quot;curl https://wwwcie.ups.com/ups.app/xml/Track -H &quot;Content-Type:application/x-www-form-urlencoded&quot; -X POST -d ${request}&quot;&quot;&quot;;\n            def proc = command.execute();\n            def outputStream = new StringBuffer();\n            proc.waitForProcessOutput(System.out, System.err)\n        }\n}\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":1529248,"reputation":92157,"user_id":1426891,"display_name":"Jeff Bowman"},"score":8,"creation_date":1637250780,"post_id":70022888,"comment_id":123781425,"body_markdown":"Comparator doesn&#39;t sort; it provides an interface for sort implementations to ask the objects how they should be sorted.","body":"Comparator doesn&#39;t sort; it provides an interface for sort implementations to ask the objects how they should be sorted."},{"owner":{"account_id":2345668,"reputation":13002,"user_id":2055998,"accept_rate":68,"display_name":"PM 77-1"},"score":1,"creation_date":1637250827,"post_id":70022888,"comment_id":123781450,"body_markdown":"Have you noticed `public int compareTo(Student st)` in your (?) code?","body":"Have you noticed <code>public int compareTo(Student st)</code> in your (?) code?"},{"owner":{"account_id":682692,"reputation":49061,"user_id":535275,"accept_rate":91,"display_name":"Scott Hunter"},"score":0,"creation_date":1637250855,"post_id":70022888,"comment_id":123781457,"body_markdown":"Or more precisely, how objects should be *compared* (hence the name).","body":"Or more precisely, how objects should be <i>compared</i> (hence the name)."},{"owner":{"account_id":2645973,"reputation":65777,"user_id":2288659,"accept_rate":90,"display_name":"Silvio Mayolo"},"score":1,"creation_date":1637251039,"post_id":70022888,"comment_id":123781554,"body_markdown":"`Everyone know method in interface is body-empty` This is not necessarily true, as of Java 8.","body":"<code>Everyone know method in interface is body-empty</code> This is not necessarily true, as of Java 8."},{"owner":{"account_id":1888690,"reputation":3005,"user_id":1707353,"accept_rate":91,"display_name":"Jeff Holt"},"score":0,"creation_date":1637252598,"post_id":70022888,"comment_id":123782207,"body_markdown":"[This](https://stackabuse.com/bubble-sort-in-java/) might be helpful to show how a sorter could call the `compareTo` method for the objects in an array. Getting caught up in the source code for `Arrays.sort` would be distracting.","body":"<a href=\"https://stackabuse.com/bubble-sort-in-java/\" rel=\"nofollow noreferrer\">This</a> might be helpful to show how a sorter could call the <code>compareTo</code> method for the objects in an array. Getting caught up in the source code for <code>Arrays.sort</code> would be distracting."},{"owner":{"account_id":23383109,"reputation":1,"user_id":17448946,"display_name":"Tu Le Anh"},"score":0,"creation_date":1637254174,"post_id":70022888,"comment_id":123782961,"body_markdown":"@JeffBowman this make sense, but how it call the sort ?","body":"@JeffBowman this make sense, but how it call the sort ?"},{"owner":{"account_id":23383109,"reputation":1,"user_id":17448946,"display_name":"Tu Le Anh"},"score":0,"creation_date":1637254534,"post_id":70022888,"comment_id":123783134,"body_markdown":"return an integer is not make sense, it should be an parameter for some function that sort the object","body":"return an integer is not make sense, it should be an parameter for some function that sort the object"}],"answers":[{"tags":[],"owner":{"account_id":15965463,"reputation":81,"user_id":11521276,"display_name":"thottivelli"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1637256578,"creation_date":1637251372,"answer_id":70023046,"question_id":70022888,"body_markdown":"This is because you are providing the implementation of this method which is what you do with an interface. The int compareTo() method signature provided by an interface returns an int which is what is used for the comparison that YOU implement\r\n\r\nEdit: This is a snippet from the actual method that the interface provides. You can see that the return type is &quot;int&quot;\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/w9mAT.png","title":"Why Comparable interface can sort object when it is an interface?","body":"<p>This is because you are providing the implementation of this method which is what you do with an interface. The int compareTo() method signature provided by an interface returns an int which is what is used for the comparison that YOU implement</p>\n<p>Edit: This is a snippet from the actual method that the interface provides. You can see that the return type is &quot;int&quot;</p>\n<p><a href=\"https://i.stack.imgur.com/w9mAT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/w9mAT.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":23383109,"reputation":1,"user_id":17448946,"display_name":"Tu Le Anh"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":124,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"answer_count":1,"score":-3,"last_activity_date":1637256578,"creation_date":1637250704,"question_id":70022888,"body_markdown":"Everyone know method in interface is body-empty but how compareTo() can sort an object with return int;\r\n\r\n1. How exactly java read compareTo();\r\n2. Is it call some function for sorting? If true, how it call.  \r\n\r\n```java\r\nclass Student implements Comparable&lt;Student&gt; {\r\n        int rollno;\r\n        String name;\r\n        int age;\r\n\r\n        Student(int rollno, String name, int age) {\r\n            this.rollno = rollno;\r\n            this.name = name;\r\n            this.age = age;\r\n        }\r\n\r\n        public int compareTo(Student st) {\r\n            if (age == st.age)\r\n                return 0;\r\n            else if (age &lt; st.age)\r\n                return 1;\r\n            else\r\n                return -1;\r\n        }\r\n    }\r\n```","title":"Why Comparable interface can sort object when it is an interface?","body":"<p>Everyone know method in interface is body-empty but how compareTo() can sort an object with return int;</p>\n<ol>\n<li>How exactly java read compareTo();</li>\n<li>Is it call some function for sorting? If true, how it call.</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>class Student implements Comparable&lt;Student&gt; {\n        int rollno;\n        String name;\n        int age;\n\n        Student(int rollno, String name, int age) {\n            this.rollno = rollno;\n            this.name = name;\n            this.age = age;\n        }\n\n        public int compareTo(Student st) {\n            if (age == st.age)\n                return 0;\n            else if (age &lt; st.age)\n                return 1;\n            else\n                return -1;\n        }\n    }\n</code></pre>\n"},{"tags":["java","java-money"],"comments":[{"owner":{"account_id":957028,"reputation":15143,"user_id":982149,"accept_rate":100,"display_name":"Fildor"},"score":0,"creation_date":1498044156,"post_id":44674280,"comment_id":76333266,"body_markdown":"As far as I remember you have to convert yourself. But MonetaryAmount should give you all you need.","body":"As far as I remember you have to convert yourself. But MonetaryAmount should give you all you need."}],"answers":[{"tags":[],"owner":{"account_id":557836,"reputation":581,"user_id":9737950,"display_name":"shanecandoit"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1637256518,"creation_date":1637256518,"answer_id":70024216,"question_id":44674280,"body_markdown":"I&#39;ve seen some people use BigDecimal.\r\nHere it is as a function. Please write some tests for it :) :\r\n```\r\n    public static BigDecimal currencyNoDecimalToDecimal(int amount, String currencyCode) {\r\n        Currency currency = Currency.getInstance(currencyCode);  // ISO 4217 codes\r\n        BigDecimal bigD = BigDecimal.valueOf(amount);\r\n        System.out.println(&quot;bigD = &quot; + bigD); // bigD = 100\r\n        BigDecimal smallD = bigD.movePointLeft(currency.getDefaultFractionDigits());\r\n        System.out.println(&quot;smallD = &quot; + smallD); // smallD = 1.00\r\n        return smallD;\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        int amount = 100;\r\n        String currencyCode = &quot;USD&quot;;\r\n    \r\n        BigDecimal dollars = currencyNoDecimalToDecimal(amount, currencyCode);\r\n        System.out.println(&quot;dollars = &quot;+dollars);\r\n    }\r\n```","title":"Java Money - Smallest Unit of currency","body":"<p>I've seen some people use BigDecimal.\nHere it is as a function. Please write some tests for it :) :</p>\n<pre><code>    public static BigDecimal currencyNoDecimalToDecimal(int amount, String currencyCode) {\n        Currency currency = Currency.getInstance(currencyCode);  // ISO 4217 codes\n        BigDecimal bigD = BigDecimal.valueOf(amount);\n        System.out.println(&quot;bigD = &quot; + bigD); // bigD = 100\n        BigDecimal smallD = bigD.movePointLeft(currency.getDefaultFractionDigits());\n        System.out.println(&quot;smallD = &quot; + smallD); // smallD = 1.00\n        return smallD;\n    }\n\n    public static void main(String[] args) {\n        int amount = 100;\n        String currencyCode = &quot;USD&quot;;\n    \n        BigDecimal dollars = currencyNoDecimalToDecimal(amount, currencyCode);\n        System.out.println(&quot;dollars = &quot;+dollars);\n    }\n</code></pre>\n"}],"owner":{"account_id":1347508,"reputation":1444,"user_id":1287962,"accept_rate":70,"display_name":"Ben Flowers"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":712,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":1,"score":6,"last_activity_date":1637256518,"creation_date":1498042963,"question_id":44674280,"body_markdown":"I have a downstream service (Stripe) which requires I send currency in the smallest currency unit (zero-decimal currency in their docs). I.e. to charge $1 I would send { &quot;currency&quot;: &quot;USD&quot;, amount: 100 } and to charge &#165;100 I would send { &quot;currency&quot;: &quot;YEN&quot;, amount: 100 }\r\n\r\nMy upstream applications do not want to handle the currency in this way and want to use standard currency formats. Is there a means of transforming `javax.money.MonetaryAmount` into a zero decimal currency format? \r\n\r\nOr am I going to have to write the conversions manually?\r\n","title":"Java Money - Smallest Unit of currency","body":"<p>I have a downstream service (Stripe) which requires I send currency in the smallest currency unit (zero-decimal currency in their docs). I.e. to charge $1 I would send { \"currency\": \"USD\", amount: 100 } and to charge ¥100 I would send { \"currency\": \"YEN\", amount: 100 }</p>\n\n<p>My upstream applications do not want to handle the currency in this way and want to use standard currency formats. Is there a means of transforming <code>javax.money.MonetaryAmount</code> into a zero decimal currency format? </p>\n\n<p>Or am I going to have to write the conversions manually?</p>\n"},{"tags":["java","jdbc"],"comments":[{"owner":{"account_id":1894950,"reputation":18007,"user_id":1712135,"display_name":"deHaar"},"score":0,"creation_date":1637254289,"post_id":70023653,"comment_id":123783013,"body_markdown":"There&#39;s also a method [`execute()`](https://docs.oracle.com/javase/7/docs/api/java/sql/PreparedStatement.html#execute()), which returns *`true` if the first result is a `ResultSet` object; `false` if the first result is an update count or there is no result*.","body":"There&#39;s also a method <a href=\"https://docs.oracle.com/javase/7/docs/api/java/sql/PreparedStatement.html#execute()\" rel=\"nofollow noreferrer\"><code>execute()</code></a>, which returns <i><code>true</code> if the first result is a <code>ResultSet</code> object; <code>false</code> if the first result is an update count or there is no result</i>."}],"answers":[{"tags":[],"owner":{"account_id":13431403,"reputation":775,"user_id":9691138,"display_name":"res"},"down_vote_count":1,"up_vote_count":0,"is_accepted":true,"score":-1,"last_activity_date":1637255688,"creation_date":1637254832,"answer_id":70023852,"question_id":70023653,"body_markdown":"You can do always an `executeQuery()` but passing to a resultset, like:\r\n\r\n    ResultSet rs = ps.executeQuery();\r\n\r\nAfter you have your ResultSet, you can then get its metadata:\r\n\r\n    ResultSetMetaData rsmd = rs.getMetaData();\r\n\r\nIn this metadata you can check the getColumnCount() for if it is zero or more, with this you can even get the precise number of columns returned to perform a generic parse with a loop:\r\n\r\n    final ResultSetMetaData rsmd = rs.getMetaData();\r\n    final int columnCount = rsmd.getColumnCount();\r\n    \r\n    if (columnCount &gt; 0) {\r\n        while (rs.next()) {\r\n            final StringBuilder sb = new StringBuilder();\r\n            \r\n            for (int i = 1 ; i &lt;= columnCount ; i++) {\r\n                sb.append(rs.getString(i));\r\n                if (i &lt; columnCount) {\r\n                    sb.append(&quot;, &quot;);\r\n                }\r\n            }\r\n            \r\n            temp.add(sb.toString());\r\n        }\r\n    }","title":"PreparedStatement: Query, or Update?","body":"<p>You can do always an <code>executeQuery()</code> but passing to a resultset, like:</p>\n<pre><code>ResultSet rs = ps.executeQuery();\n</code></pre>\n<p>After you have your ResultSet, you can then get its metadata:</p>\n<pre><code>ResultSetMetaData rsmd = rs.getMetaData();\n</code></pre>\n<p>In this metadata you can check the getColumnCount() for if it is zero or more, with this you can even get the precise number of columns returned to perform a generic parse with a loop:</p>\n<pre><code>final ResultSetMetaData rsmd = rs.getMetaData();\nfinal int columnCount = rsmd.getColumnCount();\n\nif (columnCount &gt; 0) {\n    while (rs.next()) {\n        final StringBuilder sb = new StringBuilder();\n        \n        for (int i = 1 ; i &lt;= columnCount ; i++) {\n            sb.append(rs.getString(i));\n            if (i &lt; columnCount) {\n                sb.append(&quot;, &quot;);\n            }\n        }\n        \n        temp.add(sb.toString());\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":213468,"reputation":103486,"user_id":466862,"display_name":"Mark Rotteveel"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1637256201,"creation_date":1637256201,"answer_id":70024146,"question_id":70023653,"body_markdown":"The JDBC API provides the [`PreparedStatement.execute()`][1] method (and [`Statement.execute(String)`][2]) exactly for this purpose:\r\n\r\n&gt; Executes the SQL statement in this `PreparedStatement` object, which\r\n&gt; may be any kind of SQL statement. Some prepared statements return\r\n&gt; multiple results; the `execute` method handles these complex\r\n&gt; statements as well as the simpler form of statements handled by the\r\n&gt; methods `executeQuery` and `executeUpdate`.\r\n&gt; \r\n&gt; The `execute` method returns a `boolean` to indicate the form of the\r\n&gt; first result. You must call either the method `getResultSet` or\r\n&gt; `getUpdateCount` to retrieve the result; you must call\r\n&gt; `getMoreResults` to move to any subsequent result(s).\r\n&gt; \r\n&gt; **Returns:**  \r\n&gt; &amp;nbsp;`true` if the first result is a `ResultSet` object; `false` if\r\n&gt; the first result is an update count or there is no result\r\n\r\nSo, to execute an unknown statement, you need to do something like:\r\n\r\n```java\r\ntry (PreparedStatement pstmt = connection.prepareStatement(unknownStatement)) {\r\n    // set variables ...\r\n\r\n    boolean currentResult = pstmt.execute();\r\n    while (true) {\r\n        if (currentResult) {\r\n            try (ResultSet rs = pstmt.getResultSet()) {\r\n                // process result set\r\n            }\r\n        } else {\r\n            int updateCount = pstmt.getUpdateCount();\r\n            if (updateCount == -1) {\r\n                // no more results\r\n                break;\r\n            }\r\n            // do something with update count\r\n        }\r\n        currentResult = pstmt.getMoreResults();\r\n    }\r\n}\r\n```\r\n\r\nThe loop is there because some database systems (e.g. SQL Server), can produce multiple result sets and multiple update counts, and this will handle all of them.\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/PreparedStatement.html#execute()\r\n  [2]: https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Statement.html#execute(java.lang.String)","title":"PreparedStatement: Query, or Update?","body":"<p>The JDBC API provides the <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/PreparedStatement.html#execute()\" rel=\"nofollow noreferrer\"><code>PreparedStatement.execute()</code></a> method (and <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Statement.html#execute(java.lang.String)\" rel=\"nofollow noreferrer\"><code>Statement.execute(String)</code></a>) exactly for this purpose:</p>\n<blockquote>\n<p>Executes the SQL statement in this <code>PreparedStatement</code> object, which\nmay be any kind of SQL statement. Some prepared statements return\nmultiple results; the <code>execute</code> method handles these complex\nstatements as well as the simpler form of statements handled by the\nmethods <code>executeQuery</code> and <code>executeUpdate</code>.</p>\n<p>The <code>execute</code> method returns a <code>boolean</code> to indicate the form of the\nfirst result. You must call either the method <code>getResultSet</code> or\n<code>getUpdateCount</code> to retrieve the result; you must call\n<code>getMoreResults</code> to move to any subsequent result(s).</p>\n<p><strong>Returns:</strong><br />\n <code>true</code> if the first result is a <code>ResultSet</code> object; <code>false</code> if\nthe first result is an update count or there is no result</p>\n</blockquote>\n<p>So, to execute an unknown statement, you need to do something like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>try (PreparedStatement pstmt = connection.prepareStatement(unknownStatement)) {\n    // set variables ...\n\n    boolean currentResult = pstmt.execute();\n    while (true) {\n        if (currentResult) {\n            try (ResultSet rs = pstmt.getResultSet()) {\n                // process result set\n            }\n        } else {\n            int updateCount = pstmt.getUpdateCount();\n            if (updateCount == -1) {\n                // no more results\n                break;\n            }\n            // do something with update count\n        }\n        currentResult = pstmt.getMoreResults();\n    }\n}\n</code></pre>\n<p>The loop is there because some database systems (e.g. SQL Server), can produce multiple result sets and multiple update counts, and this will handle all of them.</p>\n"}],"owner":{"account_id":1976336,"reputation":883,"user_id":1774051,"accept_rate":40,"display_name":"user1774051"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":979,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"accepted_answer_id":70023852,"answer_count":2,"score":-2,"last_activity_date":1637256201,"creation_date":1637253942,"question_id":70023653,"body_markdown":"Given an instance stmt of java.sql.PreparedStatement, I can either do `stmt.executeQuery()`, if my SQL statement is a SELECT, that returns a result, or I can do `stmt.executeUpdate()` for an INSERT, or UPDATE.\r\n\r\nNow, suggest the case, where I don&#39;t know, what kind of SQL statement is being executed? I was hoping for something convenient, like `stmt.hasResultSet()`, but that doesn&#39;t exist. Parsing the SQL statement doesn&#39;t seem a good option.\r\n\r\n\r\n\r\n\r\n","title":"PreparedStatement: Query, or Update?","body":"<p>Given an instance stmt of java.sql.PreparedStatement, I can either do <code>stmt.executeQuery()</code>, if my SQL statement is a SELECT, that returns a result, or I can do <code>stmt.executeUpdate()</code> for an INSERT, or UPDATE.</p>\n<p>Now, suggest the case, where I don't know, what kind of SQL statement is being executed? I was hoping for something convenient, like <code>stmt.hasResultSet()</code>, but that doesn't exist. Parsing the SQL statement doesn't seem a good option.</p>\n"},{"tags":["java","jooq"],"comments":[{"owner":{"account_id":1038596,"reputation":34548,"user_id":1045142,"accept_rate":67,"display_name":"Simon Martinelli"},"score":0,"creation_date":1637252959,"post_id":70023320,"comment_id":123782386,"body_markdown":"I&#39;ve tried as you did and this works fine for me. I see all the generated classes under build\\generated-src\\jooq","body":"I&#39;ve tried as you did and this works fine for me. I see all the generated classes under build\\generated-src\\jooq"},{"owner":{"account_id":23383322,"reputation":21,"user_id":17449136,"display_name":"Sergey Alekseev"},"score":0,"creation_date":1637254750,"post_id":70023320,"comment_id":123783223,"body_markdown":"@SimonMartinelli\n I have directories being created, but no classes and packages","body":"@SimonMartinelli  I have directories being created, but no classes and packages"}],"answers":[{"tags":[],"owner":{"account_id":23383322,"reputation":21,"user_id":17449136,"display_name":"Sergey Alekseev"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1637256060,"creation_date":1637256060,"answer_id":70024119,"question_id":70023320,"body_markdown":"Classes were generated in a different directory, since there was a directory with a non-English name in the path","title":"Jooq codegen doesn&#39;t generate classes","body":"<p>Classes were generated in a different directory, since there was a directory with a non-English name in the path</p>\n"}],"owner":{"account_id":23383322,"reputation":21,"user_id":17449136,"display_name":"Sergey Alekseev"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":670,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":70024119,"answer_count":1,"score":1,"last_activity_date":1637256060,"creation_date":1637252441,"question_id":70023320,"body_markdown":"Jooq doesn&#39;t generate classes. I use gradle plugin https://github.com/etiennestuder/gradle-jooq-plugin with postgresql 42.2.24. What is my problem?  This is my build.gradle\r\n\r\n```\r\nplugins {\r\n    id &#39;org.springframework.boot&#39; version &#39;2.5.7&#39;\r\n    id &#39;io.spring.dependency-management&#39; version &#39;1.0.11.RELEASE&#39;\r\n    id &#39;nu.studer.jooq&#39; version &#39;6.0.1&#39;\r\n    id &#39;java&#39;\r\n}\r\n\r\nrepositories {\r\n    mavenCentral()\r\n}\r\n\r\ndependencies {\r\n    implementation &#39;org.springframework.boot:spring-boot-starter-jooq&#39;\r\n\r\n    implementation &#39;org.jooq:jooq-meta:3.15.1&#39;\r\n    implementation &#39;org.jooq:jooq-codegen:3.15.1&#39;\r\n    implementation &#39;org.jooq:jooq:3.15.1&#39;\r\n\r\n\r\n    runtimeOnly &#39;org.postgresql:postgresql&#39;\r\n    testImplementation &#39;org.springframework.boot:spring-boot-starter-test&#39;\r\n\r\n    jooqGenerator &#39;org.postgresql:postgresql:42.2.24&#39;\r\n}\r\n\r\njooq {\r\n    version = &#39;3.15.1&#39;\r\n    edition = nu.studer.gradle.jooq.JooqEdition.OSS\r\n    configurations {\r\n        main {\r\n            generationTool {\r\n                logging = org.jooq.meta.jaxb.Logging.WARN\r\n                jdbc {\r\n                    driver = &#39;org.postgresql.Driver&#39;\r\n                    url = &#39;jdbc:postgresql://localhost:5432/postman&#39;\r\n                    user = &#39;postgres&#39;\r\n                    password = &#39;&#39;\r\n                }\r\n                generator {\r\n                    name = &#39;org.jooq.codegen.DefaultGenerator&#39;\r\n                    strategy {\r\n                        name = &#39;org.jooq.codegen.DefaultGeneratorStrategy&#39;\r\n                    }\r\n                    database {\r\n                        name = &#39;org.jooq.meta.postgres.PostgresDatabase&#39;\r\n                        inputSchema = &#39;public&#39;\r\n                        includes = &#39;.*&#39;\r\n                        excludes = &#39;&#39;\r\n                    }\r\n                    target {\r\n                        packageName = &#39;com.sample&#39;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n```\r\nOutput \r\nTask :generateJooq\r\n\r\nBUILD SUCCESSFUL in 2s\r\n1 actionable task: 1 executed","title":"Jooq codegen doesn&#39;t generate classes","body":"<p>Jooq doesn't generate classes. I use gradle plugin <a href=\"https://github.com/etiennestuder/gradle-jooq-plugin\" rel=\"nofollow noreferrer\">https://github.com/etiennestuder/gradle-jooq-plugin</a> with postgresql 42.2.24. What is my problem?  This is my build.gradle</p>\n<pre><code>plugins {\n    id 'org.springframework.boot' version '2.5.7'\n    id 'io.spring.dependency-management' version '1.0.11.RELEASE'\n    id 'nu.studer.jooq' version '6.0.1'\n    id 'java'\n}\n\nrepositories {\n    mavenCentral()\n}\n\ndependencies {\n    implementation 'org.springframework.boot:spring-boot-starter-jooq'\n\n    implementation 'org.jooq:jooq-meta:3.15.1'\n    implementation 'org.jooq:jooq-codegen:3.15.1'\n    implementation 'org.jooq:jooq:3.15.1'\n\n\n    runtimeOnly 'org.postgresql:postgresql'\n    testImplementation 'org.springframework.boot:spring-boot-starter-test'\n\n    jooqGenerator 'org.postgresql:postgresql:42.2.24'\n}\n\njooq {\n    version = '3.15.1'\n    edition = nu.studer.gradle.jooq.JooqEdition.OSS\n    configurations {\n        main {\n            generationTool {\n                logging = org.jooq.meta.jaxb.Logging.WARN\n                jdbc {\n                    driver = 'org.postgresql.Driver'\n                    url = 'jdbc:postgresql://localhost:5432/postman'\n                    user = 'postgres'\n                    password = ''\n                }\n                generator {\n                    name = 'org.jooq.codegen.DefaultGenerator'\n                    strategy {\n                        name = 'org.jooq.codegen.DefaultGeneratorStrategy'\n                    }\n                    database {\n                        name = 'org.jooq.meta.postgres.PostgresDatabase'\n                        inputSchema = 'public'\n                        includes = '.*'\n                        excludes = ''\n                    }\n                    target {\n                        packageName = 'com.sample'\n                    }\n                }\n            }\n        }\n    }\n}\n\n</code></pre>\n<p>Output\nTask :generateJooq</p>\n<p>BUILD SUCCESSFUL in 2s\n1 actionable task: 1 executed</p>\n"},{"tags":["java","google-sheets","google-sheets-api"],"answers":[{"tags":[],"owner":{"account_id":19932704,"reputation":5387,"user_id":14606052,"display_name":"Nikko J."},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1637255884,"creation_date":1637095017,"answer_id":69995755,"question_id":69994055,"body_markdown":"You need to obtain the format token of duration and use it as pattern in your request body.\r\n\r\nTo do that:\r\n 1. Highlight any cell and change its cell format to **Duration** \r\n 2. In the same cell, Navigate to **Number** -&gt; **More formats** -&gt; **Custom number format**.\r\n 3. Copy the existing format token. For duration it should be `[h]:mm:ss`.\r\n 4. Replace the value of `pattern` in your request body with `[h]:mm:ss`\r\n 5. Replace the value of `type` to **DATE_TIME**\r\n\r\nYour request body should look like this:\r\n\r\n    &quot;cell&quot;:{\r\n       &quot;userEnteredFormat&quot;:{\r\n          &quot;numberFormat&quot;:{\r\n             &quot;pattern&quot;: &quot;[h]:mm:ss&quot;,\r\n             &quot;type&quot;: &quot;DATE_TIME&quot;\r\n          }\r\n       }\r\n    }\r\n\r\n**Before:**\r\n\r\n[![enter image description here][1]][1]\r\n\r\n**After:**\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\nReference:\r\n- \r\n - [Date and time format tokens][3]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/crbqS.png\r\n  [2]: https://i.stack.imgur.com/RmlQl.png\r\n  [3]: https://developers.google.com/sheets/api/guides/formats#date_and_time_format_tokens","title":"Formatting cells (to type Duration) with the Google Sheets API (v4)","body":"<p>You need to obtain the format token of duration and use it as pattern in your request body.</p>\n<p>To do that:</p>\n<ol>\n<li>Highlight any cell and change its cell format to <strong>Duration</strong></li>\n<li>In the same cell, Navigate to <strong>Number</strong> -&gt; <strong>More formats</strong> -&gt; <strong>Custom number format</strong>.</li>\n<li>Copy the existing format token. For duration it should be <code>[h]:mm:ss</code>.</li>\n<li>Replace the value of <code>pattern</code> in your request body with <code>[h]:mm:ss</code></li>\n<li>Replace the value of <code>type</code> to <strong>DATE_TIME</strong></li>\n</ol>\n<p>Your request body should look like this:</p>\n<pre><code>&quot;cell&quot;:{\n   &quot;userEnteredFormat&quot;:{\n      &quot;numberFormat&quot;:{\n         &quot;pattern&quot;: &quot;[h]:mm:ss&quot;,\n         &quot;type&quot;: &quot;DATE_TIME&quot;\n      }\n   }\n}\n</code></pre>\n<p><strong>Before:</strong></p>\n<p><a href=\"https://i.stack.imgur.com/crbqS.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/crbqS.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>After:</strong></p>\n<p><a href=\"https://i.stack.imgur.com/RmlQl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RmlQl.png\" alt=\"enter image description here\" /></a></p>\n<h2>Reference:</h2>\n<ul>\n<li><a href=\"https://developers.google.com/sheets/api/guides/formats#date_and_time_format_tokens\" rel=\"nofollow noreferrer\">Date and time format tokens</a></li>\n</ul>\n"}],"owner":{"account_id":23358526,"reputation":13,"user_id":17431145,"display_name":"prelesnik"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":368,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":69995755,"answer_count":1,"score":1,"last_activity_date":1637255884,"creation_date":1637085883,"question_id":69994055,"body_markdown":"I&#39;m using the Google Sheets API (v4) to create/update spreadsheets programmatically and have run into the following issue:\r\n\r\nI have seen via the JavaDoc that to set the cell to a NumberFormat of say, CURRENCY, I can set the NumberFormat type and pattern to:\r\n\r\n    &quot;cell&quot;: {\r\n      &quot;userEnteredFormat&quot;: {\r\n        &quot;numberFormat&quot;: {\r\n          &quot;type&quot;: &quot;CURRENCY&quot;,\r\n          &quot;pattern&quot;: &quot;[$&#165;-411]#,##0.00&quot;  // &lt;--- Added\r\n        }\r\n      }\r\n    },\r\n    &quot;fields&quot;: &quot;userEnteredFormat.numberFormat&quot;  // or &quot;fields&quot;: &quot;userEnteredFormat&quot;\r\n\r\nHowever, I do not see an option to set the NumberFormat type to DURATION. The acceptable enums I have found include: NUMBER_FORMAT_TYPE_UNSPECIFIED, TEXT, NUMBER, PERCENT, CURRENCY, DATE, TIME, DATE_TIME, SCIENTIFIC. Is there any way to set a cell format to a type Duration mimicking what you can do via UI?\r\n\r\n[This shows what is seen on the UI for setting a cell&#39;s format type][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/SfQ3D.jpg","title":"Formatting cells (to type Duration) with the Google Sheets API (v4)","body":"<p>I'm using the Google Sheets API (v4) to create/update spreadsheets programmatically and have run into the following issue:</p>\n<p>I have seen via the JavaDoc that to set the cell to a NumberFormat of say, CURRENCY, I can set the NumberFormat type and pattern to:</p>\n<pre><code>&quot;cell&quot;: {\n  &quot;userEnteredFormat&quot;: {\n    &quot;numberFormat&quot;: {\n      &quot;type&quot;: &quot;CURRENCY&quot;,\n      &quot;pattern&quot;: &quot;[$¥-411]#,##0.00&quot;  // &lt;--- Added\n    }\n  }\n},\n&quot;fields&quot;: &quot;userEnteredFormat.numberFormat&quot;  // or &quot;fields&quot;: &quot;userEnteredFormat&quot;\n</code></pre>\n<p>However, I do not see an option to set the NumberFormat type to DURATION. The acceptable enums I have found include: NUMBER_FORMAT_TYPE_UNSPECIFIED, TEXT, NUMBER, PERCENT, CURRENCY, DATE, TIME, DATE_TIME, SCIENTIFIC. Is there any way to set a cell format to a type Duration mimicking what you can do via UI?</p>\n<p><a href=\"https://i.stack.imgur.com/SfQ3D.jpg\" rel=\"nofollow noreferrer\">This shows what is seen on the UI for setting a cell's format type</a></p>\n"},{"tags":["java","spring","jackson"],"comments":[{"owner":{"account_id":213468,"reputation":103486,"user_id":466862,"display_name":"Mark Rotteveel"},"score":1,"creation_date":1637255584,"post_id":70023930,"comment_id":123783583,"body_markdown":"See [7.1.2. HttpMessageConverters](https://docs.spring.io/spring-boot/docs/current/reference/html/features.html#features.developing-web-applications.spring-mvc.message-converters)","body":"See <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/features.html#features.developing-web-applications.spring-mvc.message-converters\" rel=\"nofollow noreferrer\">7.1.2. HttpMessageConverters</a>"},{"owner":{"account_id":13514083,"reputation":107,"user_id":9749334,"display_name":"Rafał"},"score":2,"creation_date":1637261589,"post_id":70023930,"comment_id":123785719,"body_markdown":"Wooh, perfect! I added it as \n   `     @Bean\n    public HttpMessageConverters customConverters() {\n        HttpMessageConverter&lt;?&gt; additional = new Jaxb2RootElementHttpMessageConverter();\n        return new HttpMessageConverters(additional);\n    } ` \nand works perfect. thanks!","body":"Wooh, perfect! I added it as     `     @Bean     public HttpMessageConverters customConverters() {         HttpMessageConverter&lt;?&gt; additional = new Jaxb2RootElementHttpMessageConverter();         return new HttpMessageConverters(additional);     } `  and works perfect. thanks!"}],"owner":{"account_id":13514083,"reputation":107,"user_id":9749334,"display_name":"Rafał"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":635,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1637255445,"creation_date":1637255223,"question_id":70023930,"body_markdown":"We have a single endpoint Spring Boot application that produces and consumes XML. In the application, we use JAXB with a custom bindings.xjb file. We have the schema location of our XSD files from with we generate POJO classes. Unfortunately, we need to add library jackson-dataformat-xml (we are sure it&#39;s because of Jackson because we removed that lib and added Jackson to pom.xml as a proof) and since that our request body contains an object, but nested object inside of it is null. How can we force Spring Boot to use JAXB?","title":"Force spring to use JAXB for requestBody instead of Jackson","body":"<p>We have a single endpoint Spring Boot application that produces and consumes XML. In the application, we use JAXB with a custom bindings.xjb file. We have the schema location of our XSD files from with we generate POJO classes. Unfortunately, we need to add library jackson-dataformat-xml (we are sure it's because of Jackson because we removed that lib and added Jackson to pom.xml as a proof) and since that our request body contains an object, but nested object inside of it is null. How can we force Spring Boot to use JAXB?</p>\n"},{"tags":["java","spring-boot","jpa","spring-test","hikaricp"],"comments":[{"owner":{"account_id":1473276,"reputation":110999,"user_id":1384297,"accept_rate":100,"display_name":"Andy Wilkinson"},"score":0,"creation_date":1637252980,"post_id":70023026,"comment_id":123782402,"body_markdown":"Spring Boot won&#39;t create a proxy for your `DataSource` by default so it must be something in your app that you haven&#39;t shared thus far that&#39;s causing it to do so. Can you share a complete, minimal example that reproduces the problem?","body":"Spring Boot won&#39;t create a proxy for your <code>DataSource</code> by default so it must be something in your app that you haven&#39;t shared thus far that&#39;s causing it to do so. Can you share a complete, minimal example that reproduces the problem?"},{"owner":{"account_id":10099755,"reputation":143,"user_id":8338448,"accept_rate":25,"display_name":"KnockKnock"},"score":0,"creation_date":1637254595,"post_id":70023026,"comment_id":123783161,"body_markdown":"@AndyWilkinson it will be not very easy. But i change only versions for ```java```, ```spring boot``` and other dependencies. I am not changed code nor properties.","body":"@AndyWilkinson it will be not very easy. But i change only versions for <code>java</code>, <code>spring boot</code> and other dependencies. I am not changed code nor properties."}],"answers":[{"tags":[],"owner":{"account_id":10099755,"reputation":143,"user_id":8338448,"accept_rate":25,"display_name":"KnockKnock"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1637255319,"creation_date":1637255319,"answer_id":70023952,"question_id":70023026,"body_markdown":"The problem was in javaMelody.\r\nJava melody creates proxy for everything, so i excluded it spring boot autoconfiguration and it works\r\n\r\nIn the `application-test.properties` I added this:\r\n\r\n   \r\n `spring.autoconfigure.exclude=net.bull.javamelody.JavaMelodyAutoConfiguration`","title":"Java 17, Spring boot test, @Sql script exception","body":"<p>The problem was in javaMelody.\nJava melody creates proxy for everything, so i excluded it spring boot autoconfiguration and it works</p>\n<p>In the <code>application-test.properties</code> I added this:</p>\n<p><code>spring.autoconfigure.exclude=net.bull.javamelody.JavaMelodyAutoConfiguration</code></p>\n"}],"owner":{"account_id":10099755,"reputation":143,"user_id":8338448,"accept_rate":25,"display_name":"KnockKnock"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":936,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":70023952,"answer_count":1,"score":1,"last_activity_date":1637255319,"creation_date":1637251282,"question_id":70023026,"body_markdown":"After upgrade to ```java 17```, ```spring boot 2.5.5``` I cannot use ```@Sql``` script\r\n \r\nThis is my test class:\r\n\r\n    @RunWith(SpringRunner.class)\r\n    @ActiveProfiles(&quot;test&quot;)\r\n    @SpringBootTest(classes = {App.class})\r\n    @ContextConfiguration(loader = CustomContextLoaderProvider.CustomContextLoader.class)\r\n    @SuppressWarnings(&quot;Duplicates&quot;)\r\n    @Sql(scripts = &quot;/clear_data.sql&quot;, executionPhase = ExecutionPhase.AFTER_TEST_METHOD)\r\n    public class ApiControllerTest {...}\r\n\r\nAnd context loader provider for postgres test containers\r\n\r\n    public class CustomContextLoaderProvider {\r\n\r\n      private static final PostgreSQLContainer postgres = new PostgreSQLContainer(&quot;postgres:10.5&quot;);\r\n\r\n      static {\r\n        postgres.start();\r\n        Runtime.getRuntime().addShutdownHook(new Thread(postgres::stop));\r\n     }\r\n\r\n      public static class CustomContextLoader extends SpringBootContextLoader {\r\n\r\n        @Override\r\n        protected String[] getInlinedProperties(MergedContextConfiguration config) {\r\n          return ArrayUtils.addAll(\r\n              super.getInlinedProperties(config),\r\n              &quot;spring.datasource.url=&quot; + postgres.getJdbcUrl(),\r\n              &quot;spring.datasource.username=&quot; + postgres.getUsername(),\r\n              &quot;spring.datasource.password=&quot; + postgres.getPassword());\r\n        }\r\n      }\r\n    }\r\n\r\n**stacktrace**:\r\n\r\n      Failed to execute SQL scripts for test context [DefaultTestContext@19553973 testClass = ApiControllerTest, testInstance = ApiControllerTest@9af804b, testMethod = delete@ApiControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@7bb6ab3a testClass = ApiControllerTest, locations = &#39;{}&#39;, classes = &#39;{class App}&#39;, contextInitializerClasses = &#39;[]&#39;, activeProfiles = &#39;{test}&#39;, propertySourceLocations = &#39;{}&#39;, propertySourceProperties = &#39;{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}&#39;, contextCustomizers = set[org.springframework.boot.test.autoconfigure.actuate.metrics.MetricsExportContextCustomizerFactory$DisableMetricExportContextCustomizer@2bec854f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@2a7ed1f, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@5f0fd5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@4fa1c212, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@1cb346ea, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@6f204a1a], resourceBasePath = &#39;src/main/webapp&#39;, contextLoader = &#39;CustomContextLoaderProvider$CustomContextLoader&#39;, parent = [null]], attributes = map[&#39;org.springframework.test.context.web.ServletTestExecutionListener.activateListener&#39; -&gt; true, &#39;org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder&#39; -&gt; true, &#39;org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder&#39; -&gt; true, &#39;org.springframework.test.context.event.ApplicationEventsTestExecutionListener.recordApplicationEvents&#39; -&gt; false]]: the configured DataSource [jdk.proxy3.$Proxy138] (named &#39;&#39;) is not the one associated with transaction manager [org.springframework.orm.jpa.JpaTransactionManager] (named &#39;&#39;).\r\n        java.lang.IllegalStateException: Failed to execute SQL scripts for test context [DefaultTestContext@19553973 testClass = ApiControllerTest, testInstance = ApiControllerTest@9af804b, testMethod = delete@ApiControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@7bb6ab3a testClass = ApiControllerTest, locations = &#39;{}&#39;, classes = &#39;{class App}&#39;, contextInitializerClasses = &#39;[]&#39;, activeProfiles = &#39;{test}&#39;, propertySourceLocations = &#39;{}&#39;, propertySourceProperties = &#39;{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}&#39;, contextCustomizers = set[org.springframework.boot.test.autoconfigure.actuate.metrics.MetricsExportContextCustomizerFactory$DisableMetricExportContextCustomizer@2bec854f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@2a7ed1f, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@5f0fd5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@4fa1c212, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@1cb346ea, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@6f204a1a], resourceBasePath = &#39;src/main/webapp&#39;, contextLoader = &#39;CustomContextLoaderProvider$CustomContextLoader&#39;, parent = [null]], attributes = map[&#39;org.springframework.test.context.web.ServletTestExecutionListener.activateListener&#39; -&gt; true, &#39;org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder&#39; -&gt; true, &#39;org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder&#39; -&gt; true, &#39;org.springframework.test.context.event.ApplicationEventsTestExecutionListener.recordApplicationEvents&#39; -&gt; false]]: the configured DataSource [jdk.proxy3.$Proxy138] (named &#39;&#39;) is not the one associated with transaction manager [org.springframework.orm.jpa.JpaTransactionManager] (named &#39;&#39;).\r\n        at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.executeSqlScripts(SqlScriptsTestExecutionListener.java:263)\r\n        at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.lambda$executeSqlScripts$0(SqlScriptsTestExecutionListener.java:201)\r\n        at java.base/java.lang.Iterable.forEach(Iterable.java:75)\r\n        at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.executeSqlScripts(SqlScriptsTestExecutionListener.java:201)\r\n        at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.executeSqlScripts(SqlScriptsTestExecutionListener.java:148)\r\n        at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.afterTestMethod(SqlScriptsTestExecutionListener.java:127)\r\n        at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:445)\r\n        at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:94)\r\n        at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)\r\n        at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:366)\r\n        at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)\r\n        at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)\r\n        at org.junit.runners.ParentRunner$4.run(ParentRunner.java:331)\r\n        at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:79)\r\n        at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:329)\r\n        at org.junit.runners.ParentRunner.access$100(ParentRunner.java:66)\r\n        at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:293)\r\n        at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)\r\n        at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)\r\n        at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)\r\n        at org.junit.runners.ParentRunner.run(ParentRunner.java:413)\r\n        at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)\r\n        at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.runTestClass(JUnitTestClassExecutor.java:110)\r\n        at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.execute(JUnitTestClassExecutor.java:58)\r\n        at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.execute(JUnitTestClassExecutor.java:38)\r\n        at org.gradle.api.internal.tasks.testing.junit.AbstractJUnitTestClassProcessor.processTestClass(AbstractJUnitTestClassProcessor.java:62)\r\n        at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.processTestClass(SuiteTestClassProcessor.java:51)\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n        at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)\r\n        at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)\r\n        at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)\r\n        at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94)\r\n        at jdk.proxy1/jdk.proxy1.$Proxy2.processTestClass(Unknown Source)\r\n        at org.gradle.api.internal.tasks.testing.worker.TestWorker$2.run(TestWorker.java:176)\r\n        at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129)\r\n        at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100)\r\n        at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60)\r\n        at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)\r\n        at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:133)\r\n        at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)\r\n        at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)\r\n        at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)\r\n\r\nthis exception throws here (```SqlScriptsTestExecutionListener```):\r\n\r\n    if (dataSource != null &amp;&amp; dataSourceFromTxMgr != null &amp;&amp; !sameDataSource(dataSource, dataSourceFromTxMgr)) {\r\n\t\t\t\tthrow new IllegalStateException(String.format(&quot;Failed to execute SQL scripts for test context %s: &quot; +\r\n\t\t\t\t\t\t&quot;the configured DataSource [%s] (named &#39;%s&#39;) is not the one associated with &quot; +\r\n\t\t\t\t\t\t&quot;transaction manager [%s] (named &#39;%s&#39;).&quot;, testContext, dataSource.getClass().getName(),\r\n\t\t\t\t\t\tdsName, txMgr.getClass().getName(), tmName));\r\n\t\t\t}\r\n\r\n```dataSource``` and  ```dataSourceFromTxMgr```, are equals, but they are both proxies, so when ```.equals``` method is invoked, it compare real object with proxy(which of course returns ```false```)\r\n\r\nI try to debug this exception and found the cause.\r\nThe problem can be in ```JpaTransactionManager```. For some reason ```dataSource``` is ```proxy object``` whereas in old version ```datasource``` was real ```hikari datasource```. I am not sure that is it a real problem and I have no ideas how to fix it","title":"Java 17, Spring boot test, @Sql script exception","body":"<p>After upgrade to <code>java 17</code>, <code>spring boot 2.5.5</code> I cannot use <code>@Sql</code> script</p>\n<p>This is my test class:</p>\n<pre><code>@RunWith(SpringRunner.class)\n@ActiveProfiles(&quot;test&quot;)\n@SpringBootTest(classes = {App.class})\n@ContextConfiguration(loader = CustomContextLoaderProvider.CustomContextLoader.class)\n@SuppressWarnings(&quot;Duplicates&quot;)\n@Sql(scripts = &quot;/clear_data.sql&quot;, executionPhase = ExecutionPhase.AFTER_TEST_METHOD)\npublic class ApiControllerTest {...}\n</code></pre>\n<p>And context loader provider for postgres test containers</p>\n<pre><code>public class CustomContextLoaderProvider {\n\n  private static final PostgreSQLContainer postgres = new PostgreSQLContainer(&quot;postgres:10.5&quot;);\n\n  static {\n    postgres.start();\n    Runtime.getRuntime().addShutdownHook(new Thread(postgres::stop));\n }\n\n  public static class CustomContextLoader extends SpringBootContextLoader {\n\n    @Override\n    protected String[] getInlinedProperties(MergedContextConfiguration config) {\n      return ArrayUtils.addAll(\n          super.getInlinedProperties(config),\n          &quot;spring.datasource.url=&quot; + postgres.getJdbcUrl(),\n          &quot;spring.datasource.username=&quot; + postgres.getUsername(),\n          &quot;spring.datasource.password=&quot; + postgres.getPassword());\n    }\n  }\n}\n</code></pre>\n<p><strong>stacktrace</strong>:</p>\n<pre><code>  Failed to execute SQL scripts for test context [DefaultTestContext@19553973 testClass = ApiControllerTest, testInstance = ApiControllerTest@9af804b, testMethod = delete@ApiControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@7bb6ab3a testClass = ApiControllerTest, locations = '{}', classes = '{class App}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.actuate.metrics.MetricsExportContextCustomizerFactory$DisableMetricExportContextCustomizer@2bec854f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@2a7ed1f, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@5f0fd5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@4fa1c212, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@1cb346ea, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@6f204a1a], resourceBasePath = 'src/main/webapp', contextLoader = 'CustomContextLoaderProvider$CustomContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true, 'org.springframework.test.context.event.ApplicationEventsTestExecutionListener.recordApplicationEvents' -&gt; false]]: the configured DataSource [jdk.proxy3.$Proxy138] (named '') is not the one associated with transaction manager [org.springframework.orm.jpa.JpaTransactionManager] (named '').\n    java.lang.IllegalStateException: Failed to execute SQL scripts for test context [DefaultTestContext@19553973 testClass = ApiControllerTest, testInstance = ApiControllerTest@9af804b, testMethod = delete@ApiControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@7bb6ab3a testClass = ApiControllerTest, locations = '{}', classes = '{class App}', contextInitializerClasses = '[]', activeProfiles = '{test}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.actuate.metrics.MetricsExportContextCustomizerFactory$DisableMetricExportContextCustomizer@2bec854f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@2a7ed1f, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@5f0fd5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@4fa1c212, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@1cb346ea, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@6f204a1a], resourceBasePath = 'src/main/webapp', contextLoader = 'CustomContextLoaderProvider$CustomContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true, 'org.springframework.test.context.event.ApplicationEventsTestExecutionListener.recordApplicationEvents' -&gt; false]]: the configured DataSource [jdk.proxy3.$Proxy138] (named '') is not the one associated with transaction manager [org.springframework.orm.jpa.JpaTransactionManager] (named '').\n    at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.executeSqlScripts(SqlScriptsTestExecutionListener.java:263)\n    at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.lambda$executeSqlScripts$0(SqlScriptsTestExecutionListener.java:201)\n    at java.base/java.lang.Iterable.forEach(Iterable.java:75)\n    at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.executeSqlScripts(SqlScriptsTestExecutionListener.java:201)\n    at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.executeSqlScripts(SqlScriptsTestExecutionListener.java:148)\n    at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.afterTestMethod(SqlScriptsTestExecutionListener.java:127)\n    at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:445)\n    at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:94)\n    at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)\n    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:366)\n    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)\n    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)\n    at org.junit.runners.ParentRunner$4.run(ParentRunner.java:331)\n    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:79)\n    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:329)\n    at org.junit.runners.ParentRunner.access$100(ParentRunner.java:66)\n    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:293)\n    at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)\n    at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)\n    at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)\n    at org.junit.runners.ParentRunner.run(ParentRunner.java:413)\n    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)\n    at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.runTestClass(JUnitTestClassExecutor.java:110)\n    at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.execute(JUnitTestClassExecutor.java:58)\n    at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.execute(JUnitTestClassExecutor.java:38)\n    at org.gradle.api.internal.tasks.testing.junit.AbstractJUnitTestClassProcessor.processTestClass(AbstractJUnitTestClassProcessor.java:62)\n    at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.processTestClass(SuiteTestClassProcessor.java:51)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)\n    at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)\n    at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)\n    at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94)\n    at jdk.proxy1/jdk.proxy1.$Proxy2.processTestClass(Unknown Source)\n    at org.gradle.api.internal.tasks.testing.worker.TestWorker$2.run(TestWorker.java:176)\n    at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129)\n    at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100)\n    at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60)\n    at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)\n    at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:133)\n    at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)\n    at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)\n    at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)\n</code></pre>\n<p>this exception throws here (<code>SqlScriptsTestExecutionListener</code>):</p>\n<pre><code>if (dataSource != null &amp;&amp; dataSourceFromTxMgr != null &amp;&amp; !sameDataSource(dataSource, dataSourceFromTxMgr)) {\n            throw new IllegalStateException(String.format(&quot;Failed to execute SQL scripts for test context %s: &quot; +\n                    &quot;the configured DataSource [%s] (named '%s') is not the one associated with &quot; +\n                    &quot;transaction manager [%s] (named '%s').&quot;, testContext, dataSource.getClass().getName(),\n                    dsName, txMgr.getClass().getName(), tmName));\n        }\n</code></pre>\n<p><code>dataSource</code> and  <code>dataSourceFromTxMgr</code>, are equals, but they are both proxies, so when <code>.equals</code> method is invoked, it compare real object with proxy(which of course returns <code>false</code>)</p>\n<p>I try to debug this exception and found the cause.\nThe problem can be in <code>JpaTransactionManager</code>. For some reason <code>dataSource</code> is <code>proxy object</code> whereas in old version <code>datasource</code> was real <code>hikari datasource</code>. I am not sure that is it a real problem and I have no ideas how to fix it</p>\n"},{"tags":["java","javafx","data-structures","doubly-linked-list","keyevent"],"comments":[{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":1,"creation_date":1636964304,"post_id":69971125,"comment_id":123688637,"body_markdown":"Scanning system.in in a GUI app?  That&#39;s weird.  Probably you want to read the input text from your textArIn TextArea instead.  You likely have multiple problems in your code, which I can&#39;t really cover here.","body":"Scanning system.in in a GUI app?  That&#39;s weird.  Probably you want to read the input text from your textArIn TextArea instead.  You likely have multiple problems in your code, which I can&#39;t really cover here."},{"owner":{"account_id":21281039,"reputation":3,"user_id":17415789,"display_name":"user467079"},"score":0,"creation_date":1636965194,"post_id":69971125,"comment_id":123688931,"body_markdown":"I want to take input from  user which will appear in the input vbox, I couldn&#39;t do this out of the GUI because I couldn&#39;t reach the textArea out of it, and I didn&#39;t found a solution for this too...","body":"I want to take input from  user which will appear in the input vbox, I couldn&#39;t do this out of the GUI because I couldn&#39;t reach the textArea out of it, and I didn&#39;t found a solution for this too..."},{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1636985509,"post_id":69971125,"comment_id":123696510,"body_markdown":"Java and JavaFX already have in-built [collections](https://docs.oracle.com/javase/8/javafx/collections-tutorial/collections.htm#JFXCL107) that would be able to perform all of the operations referenced.  I am not sure why you create your own list implementation for this.","body":"Java and JavaFX already have in-built <a href=\"https://docs.oracle.com/javase/8/javafx/collections-tutorial/collections.htm#JFXCL107\" rel=\"nofollow noreferrer\">collections</a> that would be able to perform all of the operations referenced.  I am not sure why you create your own list implementation for this."},{"owner":{"account_id":21281039,"reputation":3,"user_id":17415789,"display_name":"user467079"},"score":0,"creation_date":1636990613,"post_id":69971125,"comment_id":123698798,"body_markdown":"Thank you @jewelsea, It&#39;s a project for university and I&#39;m not allowed to use any of these, I have to do all the operations on the double linked list, which I had made, now the problem is how to connect them to keyEvent in the GUI..Thanks a lot for trying to help me..","body":"Thank you @jewelsea, It&#39;s a project for university and I&#39;m not allowed to use any of these, I have to do all the operations on the double linked list, which I had made, now the problem is how to connect them to keyEvent in the GUI..Thanks a lot for trying to help me.."},{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1636993036,"post_id":69971125,"comment_id":123699926,"body_markdown":"It is hard to answer without knowing what your constraints are, for instance, instead of a text area to implement a line editor, a list view would be better, but are you allowed that?","body":"It is hard to answer without knowing what your constraints are, for instance, instead of a text area to implement a line editor, a list view would be better, but are you allowed that?"},{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1636993486,"post_id":69971125,"comment_id":123700122,"body_markdown":"I advise you spend time studying [oracle’s JavaFX tutorials](https://docs.oracle.com/javase/8/javase-clienttechnologies.htm).","body":"I advise you spend time studying <a href=\"https://docs.oracle.com/javase/8/javase-clienttechnologies.htm\" rel=\"nofollow noreferrer\">oracle’s JavaFX tutorials</a>."},{"owner":{"account_id":21281039,"reputation":3,"user_id":17415789,"display_name":"user467079"},"score":0,"creation_date":1636996488,"post_id":69971125,"comment_id":123701293,"body_markdown":"Maybe that would work, I&#39;m going to...thanks a lot, I really appreciate your help","body":"Maybe that would work, I&#39;m going to...thanks a lot, I really appreciate your help"}],"answers":[{"tags":[],"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1637024434,"creation_date":1637020710,"answer_id":69982325,"question_id":69971125,"body_markdown":"You could look at this code and see if it helps.  \r\n\r\nIt is not designed to be a really usable, fully functional text editor, just to implement the main features outlined in your question.\r\n\r\nAlso, if the design wasn&#39;t as provided, I&#39;d do things differently, e.g. instead of having an edit command to manually initiate editing a row, automatically start editing the selected row on change of selection.\r\n\r\nThe code provided does not use a custom linked list structure, it just uses array lists.\r\n\r\nTo initiate operations in the editor, it is necessary to use a system specific shortcut key in combination with the command to be executed.  See the [`KeyCombination`](https://openjfx.io/javadoc/17/javafx.graphics/javafx/scene/input/KeyCombination.html) documentation for more info if required.\r\n\r\nIf you wished to adapt the code to use a custom list implementation:\r\n\r\n 1. Have your custom linked list structure implement the [`List`][1] interface.\r\n    * You don&#39;t need to implement all of the interface, only the pieces you need to get your application working, the rest of the operations can just throw [`UnsupportedOperationException`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/UnsupportedOperationException.html).\r\n \r\n 2. Pass an instance of your custom list to FXCollections to wrap it in an observable list the UI can use: [`FXCollections.observableList(yourDoubleLinkedList)`](https://openjfx.io/javadoc/17/javafx.base/javafx/collections/FXCollections.html#observableList(java.util.List))\r\n    * Do this instead of places I use an ArrayList via `FXCollections.observableArrayList()`.  \r\n\r\nI won&#39;t provide any further assistance on adaption of the implementation to use a custom list, if you have difficulties with that, those difficulties are yours to solve.\r\n\r\n[![not true][2]][2]\r\n\r\n    import javafx.application.*;\r\n    import javafx.beans.binding.Bindings;\r\n    import javafx.beans.property.SimpleStringProperty;\r\n    import javafx.collections.*;\r\n    import javafx.geometry.Insets;\r\n    import javafx.geometry.Orientation;\r\n    import javafx.scene.Scene;\r\n    import javafx.scene.control.*;\r\n    import javafx.scene.input.KeyCombination;\r\n    import javafx.scene.layout.*;\r\n    import javafx.stage.*;\r\n    \r\n    import java.io.*;\r\n    import java.nio.file.*;\r\n    import java.util.Map;\r\n    \r\n    public class LineEditor extends Application {\r\n        private Document document;\r\n    \r\n        @Override\r\n        public void init() throws Exception {\r\n            Path path = Path.of(getParameters().getRaw().get(0));\r\n            document = new Document(\r\n                    path.getFileName().toString(),\r\n                    FXCollections.observableArrayList(\r\n                            Files.readAllLines(path)\r\n                    )\r\n            );\r\n        }\r\n    \r\n        @Override\r\n        public void start(Stage stage) throws IOException {\r\n            Editor editor = new Editor(document);\r\n            Scene scene = new Scene(editor.getUI());\r\n            stage.setScene(scene);\r\n    \r\n            scene.getAccelerators().putAll(\r\n                    Map.of(\r\n                            KeyCombination.valueOf(&quot;SHORTCUT+I&quot;),\r\n                            editor::insert,\r\n                            KeyCombination.valueOf(&quot;SHORTCUT+O&quot;),\r\n                            editor::overwrite,\r\n                            KeyCombination.valueOf(&quot;SHORTCUT+D&quot;),\r\n                            editor::delete,\r\n                            KeyCombination.valueOf(&quot;SHORTCUT+E&quot;),\r\n                            editor::edit,\r\n                            KeyCombination.valueOf(&quot;SHORTCUT+C&quot;),\r\n                            editor::changeTitle,\r\n                            KeyCombination.valueOf(&quot;SHORTCUT+S&quot;),\r\n                            () -&gt; editor.save(scene.getWindow()),\r\n                            KeyCombination.valueOf(&quot;SHORTCUT+Q&quot;),\r\n                            editor::quit\r\n                    )\r\n            );\r\n    \r\n            stage.titleProperty().bind(\r\n                    Bindings.concat(&quot;Editing: &quot;, document.titleProperty())\r\n            );\r\n    \r\n            stage.show();\r\n        }\r\n    \r\n        public static void main(String[] args) throws IOException {\r\n            if (args.length == 0) {\r\n                Path dirPath = Files.createTempDirectory(TEMP_DIR_PREFIX);\r\n                Path filePath = dirPath.resolve(DEFAULT_TITLE);\r\n                Files.writeString(filePath, DEFAULT_TEXT);\r\n                args = new String[]{filePath.toString()};\r\n            } else {\r\n                if (!Files.isReadable(Path.of(args[0]))) {\r\n                    System.out.println(&quot;File &quot; + args[0] + &quot; is not readable.&quot;);\r\n                    System.exit(1);\r\n                }\r\n            }\r\n    \r\n            launch(args);\r\n        }\r\n    \r\n        private static final String TEMP_DIR_PREFIX = &quot;line-editor&quot;;\r\n        private static final String TEXT_EXTENSION = &quot;txt&quot;;\r\n        private static final String DEFAULT_TITLE = &quot;sonnet-148.&quot; + TEXT_EXTENSION;\r\n        private static final String DEFAULT_TEXT = &quot;&quot;&quot;\r\n                O me, what eyes hath Love put in my head,\r\n                Which have no correspondence with true sight!\r\n                Or, if they have, where is my judgment fled,\r\n                That censures falsely what they see aright?\r\n                If that be fair whereon my false eyes dote,\r\n                What means the world to say it is not so?\r\n                If it be not, then love doth well denote\r\n                Love&#39;s eye is not so true as all men&#39;s &#39;No.&#39;\r\n                How can it? O, how can Love&#39;s eye be true,\r\n                That is so vex&#39;d with watching and with tears?\r\n                No marvel then, though I mistake my view;\r\n                The sun itself sees not till heaven clears.\r\n                   O cunning Love! with tears thou keep&#39;st me blind,\r\n                   Lest eyes well-seeing thy foul faults should find.\r\n                &quot;&quot;&quot;;\r\n    }\r\n    \r\n    class Document {\r\n        private final SimpleStringProperty title;\r\n        private final ObservableList&lt;String&gt; lines;\r\n    \r\n        public Document(String title, ObservableList&lt;String&gt; lines) {\r\n            this.title = new SimpleStringProperty(title);\r\n            this.lines = lines;\r\n        }\r\n    \r\n        public SimpleStringProperty titleProperty() {\r\n            return title;\r\n        }\r\n    \r\n        public ObservableList&lt;String&gt; getLines() {\r\n            return lines;\r\n        }\r\n    }\r\n    \r\n    class Editor {\r\n        private final Pane layout;\r\n        private final ListView&lt;String&gt; display;\r\n        private final TextArea input;\r\n        private final Document document;\r\n        \r\n        private final static String INSTRUCTION_TEXT = &quot;&quot;&quot;\r\n                Shortcut\r\n                  + Key   Command\r\n                    I     Insert\r\n                    O     Overwrite\r\n                    D     Delete\r\n                    E     Edit\r\n                    C     Change Title\r\n                    S     Save\r\n                    Q     Quit\r\n                &quot;&quot;&quot;;\r\n    \r\n        private final static String UNTITLED_DOCUMENT_TITLE = &quot;Untitled.txt&quot;;\r\n    \r\n        public Editor(Document document) {\r\n            this.document =\r\n                    (document != null)\r\n                        ? document\r\n                        : new Document(\r\n                                UNTITLED_DOCUMENT_TITLE,\r\n                                FXCollections.observableArrayList()\r\n                        );\r\n    \r\n            assert document != null;\r\n            display = new ListView&lt;&gt;(document.getLines());\r\n            display.setPrefSize(350, 300);\r\n            input = new TextArea();\r\n    \r\n            Label instructions = new Label(INSTRUCTION_TEXT);\r\n            instructions.setStyle(&quot;-fx-font-family: monospace;&quot;);\r\n    \r\n            HBox displayWithInstructions = new HBox(10,\r\n                    instructions,\r\n                    display\r\n            );\r\n    \r\n            SplitPane splitPane = new SplitPane(\r\n                    displayWithInstructions,\r\n                    input\r\n            );\r\n            splitPane.setOrientation(Orientation.VERTICAL);\r\n            splitPane.setDividerPositions(.8);\r\n    \r\n            layout = new StackPane(splitPane);\r\n            layout.setPadding(new Insets(10));\r\n        }\r\n    \r\n        public Pane getUI() {\r\n            return layout;\r\n        }\r\n    \r\n        public void insert() {\r\n            int selectedIndex = display.getSelectionModel().getSelectedIndex();\r\n            document.getLines().add(selectedIndex + 1, input.getText());\r\n        }\r\n    \r\n        public void overwrite() {\r\n            int selectedIndex = display.getSelectionModel().getSelectedIndex();\r\n            if (selectedIndex != -1) {\r\n                document.getLines().set(selectedIndex, input.getText());\r\n            }\r\n        }\r\n    \r\n        public void delete() {\r\n            int selectedIndex = display.getSelectionModel().getSelectedIndex();\r\n            if (selectedIndex != -1) {\r\n                document.getLines().remove(selectedIndex);\r\n            }\r\n        }\r\n    \r\n        public void edit() {\r\n            int selectedIndex = display.getSelectionModel().getSelectedIndex();\r\n            if (selectedIndex != -1) {\r\n                input.setText(document.getLines().get(selectedIndex));\r\n            }\r\n        }\r\n    \r\n        public void changeTitle() {\r\n            TextInputDialog titleDialog = new TextInputDialog(document.titleProperty().get());\r\n            titleDialog.setTitle(&quot;Set Title&quot;);\r\n            titleDialog.showAndWait()\r\n                    .ifPresent(result -&gt; document.titleProperty().set(result));\r\n        }\r\n    \r\n        public void save(Window owner) {\r\n            FileChooser fileChooser = new FileChooser();\r\n            fileChooser.getExtensionFilters().setAll(\r\n                    new FileChooser.ExtensionFilter(&quot;Text Files&quot;, &quot;txt&quot;)\r\n            );\r\n            fileChooser.setTitle(&quot;Save Document&quot;);\r\n            fileChooser.setInitialFileName(document.titleProperty().get());\r\n    \r\n            File saveFile = fileChooser.showSaveDialog(owner);\r\n    \r\n            if (saveFile != null &amp;&amp; Files.isWritable(saveFile.toPath())) {\r\n                document.titleProperty().set(saveFile.getName());\r\n    \r\n                try {\r\n                    Files.writeString(\r\n                            saveFile.toPath(),\r\n                            String.join(&quot;\\n&quot;, document.getLines())\r\n                    );\r\n                } catch (IOException e) {\r\n                    e.printStackTrace();\r\n    \r\n                    Alert alert = new Alert(\r\n                            Alert.AlertType.ERROR,\r\n                            &quot;Unable to save &quot; + document.titleProperty().get()\r\n                    );\r\n                    alert.initOwner(owner);\r\n                    alert.showAndWait();\r\n                }\r\n            }\r\n        }\r\n    \r\n        public void quit() {\r\n            Platform.exit();\r\n        }\r\n    }\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html\r\n  [2]: https://i.stack.imgur.com/cP6z6.png\r\n","title":"Edit text from a specific line at text area when a key is pressed using javafx?","body":"<p>You could look at this code and see if it helps.</p>\n<p>It is not designed to be a really usable, fully functional text editor, just to implement the main features outlined in your question.</p>\n<p>Also, if the design wasn't as provided, I'd do things differently, e.g. instead of having an edit command to manually initiate editing a row, automatically start editing the selected row on change of selection.</p>\n<p>The code provided does not use a custom linked list structure, it just uses array lists.</p>\n<p>To initiate operations in the editor, it is necessary to use a system specific shortcut key in combination with the command to be executed.  See the <a href=\"https://openjfx.io/javadoc/17/javafx.graphics/javafx/scene/input/KeyCombination.html\" rel=\"nofollow noreferrer\"><code>KeyCombination</code></a> documentation for more info if required.</p>\n<p>If you wished to adapt the code to use a custom list implementation:</p>\n<ol>\n<li><p>Have your custom linked list structure implement the <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html\" rel=\"nofollow noreferrer\"><code>List</code></a> interface.</p>\n<ul>\n<li>You don't need to implement all of the interface, only the pieces you need to get your application working, the rest of the operations can just throw <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/UnsupportedOperationException.html\" rel=\"nofollow noreferrer\"><code>UnsupportedOperationException</code></a>.</li>\n</ul>\n</li>\n<li><p>Pass an instance of your custom list to FXCollections to wrap it in an observable list the UI can use: <a href=\"https://openjfx.io/javadoc/17/javafx.base/javafx/collections/FXCollections.html#observableList(java.util.List)\" rel=\"nofollow noreferrer\"><code>FXCollections.observableList(yourDoubleLinkedList)</code></a></p>\n<ul>\n<li>Do this instead of places I use an ArrayList via <code>FXCollections.observableArrayList()</code>.</li>\n</ul>\n</li>\n</ol>\n<p>I won't provide any further assistance on adaption of the implementation to use a custom list, if you have difficulties with that, those difficulties are yours to solve.</p>\n<p><a href=\"https://i.stack.imgur.com/cP6z6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/cP6z6.png\" alt=\"not true\" /></a></p>\n<pre><code>import javafx.application.*;\nimport javafx.beans.binding.Bindings;\nimport javafx.beans.property.SimpleStringProperty;\nimport javafx.collections.*;\nimport javafx.geometry.Insets;\nimport javafx.geometry.Orientation;\nimport javafx.scene.Scene;\nimport javafx.scene.control.*;\nimport javafx.scene.input.KeyCombination;\nimport javafx.scene.layout.*;\nimport javafx.stage.*;\n\nimport java.io.*;\nimport java.nio.file.*;\nimport java.util.Map;\n\npublic class LineEditor extends Application {\n    private Document document;\n\n    @Override\n    public void init() throws Exception {\n        Path path = Path.of(getParameters().getRaw().get(0));\n        document = new Document(\n                path.getFileName().toString(),\n                FXCollections.observableArrayList(\n                        Files.readAllLines(path)\n                )\n        );\n    }\n\n    @Override\n    public void start(Stage stage) throws IOException {\n        Editor editor = new Editor(document);\n        Scene scene = new Scene(editor.getUI());\n        stage.setScene(scene);\n\n        scene.getAccelerators().putAll(\n                Map.of(\n                        KeyCombination.valueOf(&quot;SHORTCUT+I&quot;),\n                        editor::insert,\n                        KeyCombination.valueOf(&quot;SHORTCUT+O&quot;),\n                        editor::overwrite,\n                        KeyCombination.valueOf(&quot;SHORTCUT+D&quot;),\n                        editor::delete,\n                        KeyCombination.valueOf(&quot;SHORTCUT+E&quot;),\n                        editor::edit,\n                        KeyCombination.valueOf(&quot;SHORTCUT+C&quot;),\n                        editor::changeTitle,\n                        KeyCombination.valueOf(&quot;SHORTCUT+S&quot;),\n                        () -&gt; editor.save(scene.getWindow()),\n                        KeyCombination.valueOf(&quot;SHORTCUT+Q&quot;),\n                        editor::quit\n                )\n        );\n\n        stage.titleProperty().bind(\n                Bindings.concat(&quot;Editing: &quot;, document.titleProperty())\n        );\n\n        stage.show();\n    }\n\n    public static void main(String[] args) throws IOException {\n        if (args.length == 0) {\n            Path dirPath = Files.createTempDirectory(TEMP_DIR_PREFIX);\n            Path filePath = dirPath.resolve(DEFAULT_TITLE);\n            Files.writeString(filePath, DEFAULT_TEXT);\n            args = new String[]{filePath.toString()};\n        } else {\n            if (!Files.isReadable(Path.of(args[0]))) {\n                System.out.println(&quot;File &quot; + args[0] + &quot; is not readable.&quot;);\n                System.exit(1);\n            }\n        }\n\n        launch(args);\n    }\n\n    private static final String TEMP_DIR_PREFIX = &quot;line-editor&quot;;\n    private static final String TEXT_EXTENSION = &quot;txt&quot;;\n    private static final String DEFAULT_TITLE = &quot;sonnet-148.&quot; + TEXT_EXTENSION;\n    private static final String DEFAULT_TEXT = &quot;&quot;&quot;\n            O me, what eyes hath Love put in my head,\n            Which have no correspondence with true sight!\n            Or, if they have, where is my judgment fled,\n            That censures falsely what they see aright?\n            If that be fair whereon my false eyes dote,\n            What means the world to say it is not so?\n            If it be not, then love doth well denote\n            Love's eye is not so true as all men's 'No.'\n            How can it? O, how can Love's eye be true,\n            That is so vex'd with watching and with tears?\n            No marvel then, though I mistake my view;\n            The sun itself sees not till heaven clears.\n               O cunning Love! with tears thou keep'st me blind,\n               Lest eyes well-seeing thy foul faults should find.\n            &quot;&quot;&quot;;\n}\n\nclass Document {\n    private final SimpleStringProperty title;\n    private final ObservableList&lt;String&gt; lines;\n\n    public Document(String title, ObservableList&lt;String&gt; lines) {\n        this.title = new SimpleStringProperty(title);\n        this.lines = lines;\n    }\n\n    public SimpleStringProperty titleProperty() {\n        return title;\n    }\n\n    public ObservableList&lt;String&gt; getLines() {\n        return lines;\n    }\n}\n\nclass Editor {\n    private final Pane layout;\n    private final ListView&lt;String&gt; display;\n    private final TextArea input;\n    private final Document document;\n    \n    private final static String INSTRUCTION_TEXT = &quot;&quot;&quot;\n            Shortcut\n              + Key   Command\n                I     Insert\n                O     Overwrite\n                D     Delete\n                E     Edit\n                C     Change Title\n                S     Save\n                Q     Quit\n            &quot;&quot;&quot;;\n\n    private final static String UNTITLED_DOCUMENT_TITLE = &quot;Untitled.txt&quot;;\n\n    public Editor(Document document) {\n        this.document =\n                (document != null)\n                    ? document\n                    : new Document(\n                            UNTITLED_DOCUMENT_TITLE,\n                            FXCollections.observableArrayList()\n                    );\n\n        assert document != null;\n        display = new ListView&lt;&gt;(document.getLines());\n        display.setPrefSize(350, 300);\n        input = new TextArea();\n\n        Label instructions = new Label(INSTRUCTION_TEXT);\n        instructions.setStyle(&quot;-fx-font-family: monospace;&quot;);\n\n        HBox displayWithInstructions = new HBox(10,\n                instructions,\n                display\n        );\n\n        SplitPane splitPane = new SplitPane(\n                displayWithInstructions,\n                input\n        );\n        splitPane.setOrientation(Orientation.VERTICAL);\n        splitPane.setDividerPositions(.8);\n\n        layout = new StackPane(splitPane);\n        layout.setPadding(new Insets(10));\n    }\n\n    public Pane getUI() {\n        return layout;\n    }\n\n    public void insert() {\n        int selectedIndex = display.getSelectionModel().getSelectedIndex();\n        document.getLines().add(selectedIndex + 1, input.getText());\n    }\n\n    public void overwrite() {\n        int selectedIndex = display.getSelectionModel().getSelectedIndex();\n        if (selectedIndex != -1) {\n            document.getLines().set(selectedIndex, input.getText());\n        }\n    }\n\n    public void delete() {\n        int selectedIndex = display.getSelectionModel().getSelectedIndex();\n        if (selectedIndex != -1) {\n            document.getLines().remove(selectedIndex);\n        }\n    }\n\n    public void edit() {\n        int selectedIndex = display.getSelectionModel().getSelectedIndex();\n        if (selectedIndex != -1) {\n            input.setText(document.getLines().get(selectedIndex));\n        }\n    }\n\n    public void changeTitle() {\n        TextInputDialog titleDialog = new TextInputDialog(document.titleProperty().get());\n        titleDialog.setTitle(&quot;Set Title&quot;);\n        titleDialog.showAndWait()\n                .ifPresent(result -&gt; document.titleProperty().set(result));\n    }\n\n    public void save(Window owner) {\n        FileChooser fileChooser = new FileChooser();\n        fileChooser.getExtensionFilters().setAll(\n                new FileChooser.ExtensionFilter(&quot;Text Files&quot;, &quot;txt&quot;)\n        );\n        fileChooser.setTitle(&quot;Save Document&quot;);\n        fileChooser.setInitialFileName(document.titleProperty().get());\n\n        File saveFile = fileChooser.showSaveDialog(owner);\n\n        if (saveFile != null &amp;&amp; Files.isWritable(saveFile.toPath())) {\n            document.titleProperty().set(saveFile.getName());\n\n            try {\n                Files.writeString(\n                        saveFile.toPath(),\n                        String.join(&quot;\\n&quot;, document.getLines())\n                );\n            } catch (IOException e) {\n                e.printStackTrace();\n\n                Alert alert = new Alert(\n                        Alert.AlertType.ERROR,\n                        &quot;Unable to save &quot; + document.titleProperty().get()\n                );\n                alert.initOwner(owner);\n                alert.showAndWait();\n            }\n        }\n    }\n\n    public void quit() {\n        Platform.exit();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":21281039,"reputation":3,"user_id":17415789,"display_name":"user467079"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":368,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":69982325,"answer_count":1,"score":-1,"last_activity_date":1637255131,"creation_date":1636963472,"question_id":69971125,"body_markdown":"So I&#39;m working on building a text editor using java, javaFx, I have to open a file in the (Editor VBox) and put the lines in a double linked list, then edit, delete, overWrite a line etc.., I made a textArea called textAr in the Editor VBox, but I have a problem in reaching a text in specific line from the textAr, so I can edit, or insert a text in the double linked list and the position that new text should be inserted in,I have to use (I) to insert so I can&#39;t use getSelectedText().., here is a picture for what is required as user interface..\r\n\r\n[![interface pic][1]][1]\r\n\r\n\r\nhere is what I&#39;m trying to do to insert a text when I is pressed on the keyboard, I put getText from the textAr (text Area in editor VBox ), but it takes the whole text in the area, not in a specific line or position..In addition to crash when I press (I) on keyboard and black screen appears in the java Application program\r\n  \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/dXno8.png","title":"Edit text from a specific line at text area when a key is pressed using javafx?","body":"<p>So I'm working on building a text editor using java, javaFx, I have to open a file in the (Editor VBox) and put the lines in a double linked list, then edit, delete, overWrite a line etc.., I made a textArea called textAr in the Editor VBox, but I have a problem in reaching a text in specific line from the textAr, so I can edit, or insert a text in the double linked list and the position that new text should be inserted in,I have to use (I) to insert so I can't use getSelectedText().., here is a picture for what is required as user interface..</p>\n<p><a href=\"https://i.stack.imgur.com/dXno8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dXno8.png\" alt=\"interface pic\" /></a></p>\n<p>here is what I'm trying to do to insert a text when I is pressed on the keyboard, I put getText from the textAr (text Area in editor VBox ), but it takes the whole text in the area, not in a specific line or position..In addition to crash when I press (I) on keyboard and black screen appears in the java Application program</p>\n"},{"tags":["java","spring-boot","spring-boot-test","spring-properties"],"comments":[{"owner":{"account_id":10777133,"reputation":7282,"user_id":7928721,"display_name":"samabcde"},"score":0,"creation_date":1622130829,"post_id":67722926,"comment_id":119708891,"body_markdown":"After some debugging, Conversion Service in side spring (for converting value) is found when running application but missing when running test. The reason is not known yet. I tried to add `@SpringBootConfiguration`\n`@SpringBootTest` to `MyUnitTest` and everything works fine.","body":"After some debugging, Conversion Service in side spring (for converting value) is found when running application but missing when running test. The reason is not known yet. I tried to add <code>@SpringBootConfiguration</code> <code>@SpringBootTest</code> to <code>MyUnitTest</code> and everything works fine."}],"answers":[{"tags":[],"owner":{"account_id":11498979,"reputation":39,"user_id":8427332,"display_name":"chandra kumar"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1622132359,"creation_date":1622132359,"answer_id":67726164,"question_id":67722926,"body_markdown":"\r\nFrom Spring, you should understand the difference between **@Component and @Configuration**\r\nbig Topic and conceptes.\r\n\r\nI saw your code, you&#39;re using **@ConfigurationProperties(prefix = &quot;my&quot;) and @Component**\r\nhowever, both are different functionalities, **you should not mix of both annotation**\r\n\r\nBelow solution  tested and verified all code\r\n\r\nExample 1:\r\n\r\n    import java.time.Duration;\r\n\r\n    @Component\r\n    public class MyConfig {\r\n    \r\n        @Value(&quot;${my.failed-duration}&quot;)\r\n        private Duration failedDuration;\r\n    \r\n        public Duration getFailedDuration() {\r\n            return failedDuration;\r\n        }   \r\n    }\r\n\r\n\r\nExample 2:\r\n\r\n    @Configuration\r\n    @ConfigurationProperties(prefix = &quot;my&quot;)\r\n    public class MyConfig2 {\r\n    \r\n        private Duration failedDuration;\r\n    \r\n        public void setFailedDuration(Duration failedDuration) {\r\n            this.failedDuration = failedDuration;\r\n        }\r\n    \r\n        public Duration getFailedDuration() {\r\n            return failedDuration;\r\n        }\r\n     }\r\n\r\n********************Unit test********************\r\n\r\n    import org.junit.jupiter.api.Test;\r\n    import org.junit.jupiter.api.extension.ExtendWith;\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.boot.test.context.SpringBootTest;\r\n    import org.springframework.test.context.TestPropertySource;\r\n    import org.springframework.test.context.junit.jupiter.SpringExtension;\r\n    \r\n    import java.time.Duration;\r\n    \r\n    import static org.junit.jupiter.api.Assertions.assertEquals;\r\n    \r\n    @ExtendWith(SpringExtension.class)\r\n    @SpringBootTest\r\n    @TestPropertySource(&quot;classpath:test.properties&quot;)\r\n    public class MyUnitTest {\r\n    \r\n        @Autowired\r\n        MyConfig2 myConfig2;\r\n        @Autowired\r\n        MyConfig myConfig;\r\n    \r\n        @Test\r\n        public void myConfig2Test() {\r\n            Duration msg = myConfig2.getFailedDuration();\r\n            assertEquals(30, msg.getSeconds());\r\n        }\r\n    \r\n        @Test\r\n        public void myConfigTest() {\r\n            Duration msg = myConfig.getFailedDuration();\r\n            assertEquals(30, msg.getSeconds());\r\n        }\r\n    }\r\n\r\nIf you like my solution please vote for me","title":"Spring boot property value conversion from String to Duration works in application, fails in unit test","body":"<p>From Spring, you should understand the difference between <strong>@Component and @Configuration</strong>\nbig Topic and conceptes.</p>\n<p>I saw your code, you're using <strong>@ConfigurationProperties(prefix = &quot;my&quot;) and @Component</strong>\nhowever, both are different functionalities, <strong>you should not mix of both annotation</strong></p>\n<p>Below solution  tested and verified all code</p>\n<p>Example 1:</p>\n<pre><code>import java.time.Duration;\n\n@Component\npublic class MyConfig {\n\n    @Value(&quot;${my.failed-duration}&quot;)\n    private Duration failedDuration;\n\n    public Duration getFailedDuration() {\n        return failedDuration;\n    }   \n}\n</code></pre>\n<p>Example 2:</p>\n<pre><code>@Configuration\n@ConfigurationProperties(prefix = &quot;my&quot;)\npublic class MyConfig2 {\n\n    private Duration failedDuration;\n\n    public void setFailedDuration(Duration failedDuration) {\n        this.failedDuration = failedDuration;\n    }\n\n    public Duration getFailedDuration() {\n        return failedDuration;\n    }\n }\n</code></pre>\n<p><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong>Unit test</strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></p>\n<pre><code>import org.junit.jupiter.api.Test;\nimport org.junit.jupiter.api.extension.ExtendWith;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.context.SpringBootTest;\nimport org.springframework.test.context.TestPropertySource;\nimport org.springframework.test.context.junit.jupiter.SpringExtension;\n\nimport java.time.Duration;\n\nimport static org.junit.jupiter.api.Assertions.assertEquals;\n\n@ExtendWith(SpringExtension.class)\n@SpringBootTest\n@TestPropertySource(&quot;classpath:test.properties&quot;)\npublic class MyUnitTest {\n\n    @Autowired\n    MyConfig2 myConfig2;\n    @Autowired\n    MyConfig myConfig;\n\n    @Test\n    public void myConfig2Test() {\n        Duration msg = myConfig2.getFailedDuration();\n        assertEquals(30, msg.getSeconds());\n    }\n\n    @Test\n    public void myConfigTest() {\n        Duration msg = myConfig.getFailedDuration();\n        assertEquals(30, msg.getSeconds());\n    }\n}\n</code></pre>\n<p>If you like my solution please vote for me</p>\n"},{"tags":[],"owner":{"account_id":145899,"reputation":8031,"user_id":356011,"accept_rate":95,"display_name":"marathon"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1628542513,"creation_date":1628542513,"answer_id":68718442,"question_id":67722926,"body_markdown":"This works\r\n```java\r\n@ExtendWith(SpringExtension.class)\r\n@SpringBootTest(classes = {MyConfig.class})\r\n@TestPropertySource(&quot;classpath:test.properties&quot;)\r\npublic class MyUnitTest {\r\n    @Autowired\r\n    MyConfig config;\r\n\r\n...\r\n}\r\n```","title":"Spring boot property value conversion from String to Duration works in application, fails in unit test","body":"<p>This works</p>\n<pre class=\"lang-java prettyprint-override\"><code>@ExtendWith(SpringExtension.class)\n@SpringBootTest(classes = {MyConfig.class})\n@TestPropertySource(&quot;classpath:test.properties&quot;)\npublic class MyUnitTest {\n    @Autowired\n    MyConfig config;\n\n...\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18312406,"reputation":21,"user_id":13334946,"display_name":"Brennan Spies"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1637255125,"creation_date":1637255125,"answer_id":70023910,"question_id":67722926,"body_markdown":"The `@SpringBootTest` is the key annotation here. Without it the appropriate `ConversionService` that handles this coercion isn&#39;t loaded into the test&#39;s application context.","title":"Spring boot property value conversion from String to Duration works in application, fails in unit test","body":"<p>The <code>@SpringBootTest</code> is the key annotation here. Without it the appropriate <code>ConversionService</code> that handles this coercion isn't loaded into the test's application context.</p>\n"}],"owner":{"account_id":145899,"reputation":8031,"user_id":356011,"accept_rate":95,"display_name":"marathon"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6313,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":68718442,"answer_count":3,"score":6,"last_activity_date":1637255125,"creation_date":1622121320,"question_id":67722926,"body_markdown":"\r\n[According to the spring docs][1], string property values such as `10s` will be properly converted into a `java.time.Duration`.\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-boot/docs/2.1.8.RELEASE/reference/html/boot-features-external-config.html#boot-features-external-config-conversion-duration\r\n\r\nIndeed this works for me with the main application properties.  But it fails in a unit test.\r\n\r\nunit test\r\n```java\r\n@ExtendWith(SpringExtension.class)\r\n@EnableConfigurationProperties(value = MyConfig.class)\r\n@TestPropertySource(&quot;classpath:test.properties&quot;)\r\npublic class MyUnitTest {\r\n    @Autowired\r\n    MyConfig config;\r\n...\r\n}\r\n```\r\nConfig class\r\n```java\r\n@ConfigurationProperties(prefix = &quot;my&quot;)\r\n@Component\r\npublic class MyConfig {\r\n\r\n    @Value(&quot;${my.failed-duration}&quot;)\r\n    public Duration myDuration;\r\n...\r\n}\r\n```\r\n\r\ntest.properties\r\n```properties\r\nmy.failed-duration=10s\r\n```\r\n\r\nexception\r\n```\r\njava.lang.IllegalStateException: Failed to load ApplicationContext\r\n\tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:132)\r\n\tat org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:124)\r\n\tat org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:118)\r\n\tat org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:83)\r\n\tat org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:244)\r\n\tat org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$6(ClassBasedTestDescriptor.java:350)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:355)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$7(ClassBasedTestDescriptor.java:350)\r\n\tat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\r\n\tat java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)\r\n\tat java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)\r\n\tat java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:484)\r\n\tat java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:474)\r\n\tat java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:312)\r\n\tat java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)\r\n\tat java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)\r\n\tat java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:349)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$4(ClassBasedTestDescriptor.java:270)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:269)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$2(ClassBasedTestDescriptor.java:259)\r\n\tat java.base/java.util.Optional.orElseGet(Optional.java:364)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$3(ClassBasedTestDescriptor.java:258)\r\n\tat org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:101)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:100)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:65)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$1(NodeTestTask.java:111)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:111)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:79)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:143)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:129)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:127)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:126)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:84)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:143)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:129)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:127)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:126)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:84)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:32)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:51)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:108)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:96)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:75)\r\n\tat com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:71)\r\n\tat com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:33)\r\n\tat com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:221)\r\n\tat com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:54)\r\nCaused by: org.springframework.beans.factory.UnsatisfiedDependencyException: \r\nError creating bean with name &#39;myapp-io.mypackage.MyConfig&#39;: Unsatisfied dependency expressed through field &#39;myDuration&#39;; \r\nnested exception is org.springframework.beans.ConversionNotSupportedException: \r\nFailed to convert value of type &#39;java.lang.String&#39; to required type &#39;java.time.Duration&#39;; \r\nnested exception is java.lang.IllegalStateException: \r\nCannot convert value of type &#39;java.lang.String&#39; to required type &#39;java.time.Duration&#39;: \r\nno matching editors or conversion strategy found\r\n\tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:660)\r\n\tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:640)\r\n\tat org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:119)\r\n\tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:399)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1413)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:524)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:944)\r\n\tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918)\r\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583)\r\n\tat org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:127)\r\n\tat org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:60)\r\n\tat org.springframework.test.context.support.AbstractDelegatingSmartContextLoader.delegateLoading(AbstractDelegatingSmartContextLoader.java:275)\r\n\tat org.springframework.test.context.support.AbstractDelegatingSmartContextLoader.loadContext(AbstractDelegatingSmartContextLoader.java:251)\r\n\tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:99)\r\n\tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:124)\r\n\t... 67 common frames omitted\r\nCaused by: org.springframework.beans.ConversionNotSupportedException: Failed to convert value of type &#39;java.lang.String&#39; to required type &#39;java.time.Duration&#39;; nested exception is java.lang.IllegalStateException: Cannot convert value of type &#39;java.lang.String&#39; to required type &#39;java.time.Duration&#39;: no matching editors or conversion strategy found\r\n\tat org.springframework.beans.TypeConverterSupport.convertIfNecessary(TypeConverterSupport.java:76)\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1328)\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1300)\r\n\tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:657)\r\n\t... 86 common frames omitted\r\nCaused by: java.lang.IllegalStateException: Cannot convert value of type &#39;java.lang.String&#39; to required type &#39;java.time.Duration&#39;: no matching editors or conversion strategy found\r\n\tat org.springframework.beans.TypeConverterDelegate.convertIfNecessary(TypeConverterDelegate.java:262)\r\n\tat org.springframework.beans.TypeConverterSupport.convertIfNecessary(TypeConverterSupport.java:73)\r\n\t... 89 common frames omitted\r\n\r\n```","title":"Spring boot property value conversion from String to Duration works in application, fails in unit test","body":"<p><a href=\"https://docs.spring.io/spring-boot/docs/2.1.8.RELEASE/reference/html/boot-features-external-config.html#boot-features-external-config-conversion-duration\" rel=\"noreferrer\">According to the spring docs</a>, string property values such as <code>10s</code> will be properly converted into a <code>java.time.Duration</code>.</p>\n<p>Indeed this works for me with the main application properties.  But it fails in a unit test.</p>\n<p>unit test</p>\n<pre class=\"lang-java prettyprint-override\"><code>@ExtendWith(SpringExtension.class)\n@EnableConfigurationProperties(value = MyConfig.class)\n@TestPropertySource(&quot;classpath:test.properties&quot;)\npublic class MyUnitTest {\n    @Autowired\n    MyConfig config;\n...\n}\n</code></pre>\n<p>Config class</p>\n<pre class=\"lang-java prettyprint-override\"><code>@ConfigurationProperties(prefix = &quot;my&quot;)\n@Component\npublic class MyConfig {\n\n    @Value(&quot;${my.failed-duration}&quot;)\n    public Duration myDuration;\n...\n}\n</code></pre>\n<p>test.properties</p>\n<pre><code>my.failed-duration=10s\n</code></pre>\n<p>exception</p>\n<pre><code>java.lang.IllegalStateException: Failed to load ApplicationContext\n    at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:132)\n    at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:124)\n    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:118)\n    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:83)\n    at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:244)\n    at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$6(ClassBasedTestDescriptor.java:350)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:355)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$7(ClassBasedTestDescriptor.java:350)\n    at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\n    at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)\n    at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)\n    at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:484)\n    at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:474)\n    at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:312)\n    at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)\n    at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)\n    at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:349)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$4(ClassBasedTestDescriptor.java:270)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:269)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$2(ClassBasedTestDescriptor.java:259)\n    at java.base/java.util.Optional.orElseGet(Optional.java:364)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$3(ClassBasedTestDescriptor.java:258)\n    at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:101)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:100)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:65)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$1(NodeTestTask.java:111)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:111)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:79)\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:143)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:129)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:127)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:126)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:84)\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:143)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:129)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:127)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:126)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:84)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:32)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:51)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:108)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:96)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:75)\n    at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:71)\n    at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:33)\n    at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:221)\n    at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:54)\nCaused by: org.springframework.beans.factory.UnsatisfiedDependencyException: \nError creating bean with name 'myapp-io.mypackage.MyConfig': Unsatisfied dependency expressed through field 'myDuration'; \nnested exception is org.springframework.beans.ConversionNotSupportedException: \nFailed to convert value of type 'java.lang.String' to required type 'java.time.Duration'; \nnested exception is java.lang.IllegalStateException: \nCannot convert value of type 'java.lang.String' to required type 'java.time.Duration': \nno matching editors or conversion strategy found\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:660)\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:640)\n    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:119)\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:399)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1413)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:524)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:944)\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918)\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583)\n    at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:127)\n    at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:60)\n    at org.springframework.test.context.support.AbstractDelegatingSmartContextLoader.delegateLoading(AbstractDelegatingSmartContextLoader.java:275)\n    at org.springframework.test.context.support.AbstractDelegatingSmartContextLoader.loadContext(AbstractDelegatingSmartContextLoader.java:251)\n    at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:99)\n    at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:124)\n    ... 67 common frames omitted\nCaused by: org.springframework.beans.ConversionNotSupportedException: Failed to convert value of type 'java.lang.String' to required type 'java.time.Duration'; nested exception is java.lang.IllegalStateException: Cannot convert value of type 'java.lang.String' to required type 'java.time.Duration': no matching editors or conversion strategy found\n    at org.springframework.beans.TypeConverterSupport.convertIfNecessary(TypeConverterSupport.java:76)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1328)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1300)\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:657)\n    ... 86 common frames omitted\nCaused by: java.lang.IllegalStateException: Cannot convert value of type 'java.lang.String' to required type 'java.time.Duration': no matching editors or conversion strategy found\n    at org.springframework.beans.TypeConverterDelegate.convertIfNecessary(TypeConverterDelegate.java:262)\n    at org.springframework.beans.TypeConverterSupport.convertIfNecessary(TypeConverterSupport.java:73)\n    ... 89 common frames omitted\n\n</code></pre>\n"},{"tags":["java","eclipse"],"answers":[{"tags":[],"owner":{"account_id":1483039,"reputation":8759,"user_id":1391924,"accept_rate":41,"display_name":"Chandrayya G K"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1393477261,"creation_date":1393477261,"answer_id":22059404,"question_id":22052510,"body_markdown":"There is no Find/Replace bar in eclipse. But you can use Incremental find/Reverse incremental find. See [here](https://stackoverflow.com/a/21771874/1391924) for more details","title":"Find/Replace Bar in Eclipse Galileo","body":"<p>There is no Find/Replace bar in eclipse. But you can use Incremental find/Reverse incremental find. See <a href=\"https://stackoverflow.com/a/21771874/1391924\">here</a> for more details</p>\n"},{"tags":[],"owner":{"account_id":9738091,"reputation":1,"user_id":7220686,"display_name":"Alan Stefan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1484924053,"creation_date":1484919246,"answer_id":41764942,"question_id":22052510,"body_markdown":"I use &lt;kbd&gt;Ctrl&lt;/kbd&gt;+&lt;kbd&gt;F&lt;/kbd&gt; to find some text &amp; when done hit esc.  This will close find/replace window &amp; clear view for your editor. \r\n\r\nAlso you can use combination of word select commands and \r\n(&lt;kbd&gt;Ctrl&lt;/kbd&gt;+&lt;kbd&gt;K&lt;/kbd&gt;) (&lt;kbd&gt;Ctrl&lt;/kbd&gt;+&lt;kbd&gt;Shift&lt;/kbd&gt; +&lt;kbd&gt;K&lt;/kbd&gt;). \r\n\r\nThis should save you installing plugin. \r\n\r\n\r\n","title":"Find/Replace Bar in Eclipse Galileo","body":"<p>I use <kbd>Ctrl</kbd>+<kbd>F</kbd> to find some text &amp; when done hit esc.  This will close find/replace window &amp; clear view for your editor. </p>\n\n<p>Also you can use combination of word select commands and \n(<kbd>Ctrl</kbd>+<kbd>K</kbd>) (<kbd>Ctrl</kbd>+<kbd>Shift</kbd> +<kbd>K</kbd>). </p>\n\n<p>This should save you installing plugin. </p>\n"}],"owner":{"account_id":4056678,"reputation":72,"user_id":3334423,"accept_rate":60,"display_name":"sbarboza"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":204,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":22059404,"answer_count":2,"score":1,"last_activity_date":1637254873,"creation_date":1393446382,"question_id":22052510,"body_markdown":"I&#39;ve been programming in Netbeans for 3 years and now I have to change to Eclipse.\r\nOne of the things that bothers me is the find/replace dialog.\r\nI would like to install a plugin that permits me to use a bar instead a dialog.\r\n\r\nI found one in Marketplace, but, unfortunately, I have to use Eclise Galileo, that don&#39;t have support to marketplace.\r\n\r\nI found this one http://sandipchitaleseclipseplugins.googlecode.com/svn/trunk/FindReplaceBarUpdateSite/, but when I try to install it occurs time out.\r\n\r\n\r\nDo you know a find bar plugin that I can install in eclipse galileo?","title":"Find/Replace Bar in Eclipse Galileo","body":"<p>I've been programming in Netbeans for 3 years and now I have to change to Eclipse.\nOne of the things that bothers me is the find/replace dialog.\nI would like to install a plugin that permits me to use a bar instead a dialog.</p>\n\n<p>I found one in Marketplace, but, unfortunately, I have to use Eclise Galileo, that don't have support to marketplace.</p>\n\n<p>I found this one <a href=\"http://sandipchitaleseclipseplugins.googlecode.com/svn/trunk/FindReplaceBarUpdateSite/\" rel=\"nofollow\">http://sandipchitaleseclipseplugins.googlecode.com/svn/trunk/FindReplaceBarUpdateSite/</a>, but when I try to install it occurs time out.</p>\n\n<p>Do you know a find bar plugin that I can install in eclipse galileo?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":7127,"reputation":31279,"user_id":12243,"accept_rate":88,"display_name":"Malfist"},"score":29,"creation_date":1326405335,"post_id":8842504,"comment_id":11043517,"body_markdown":"This is not the operator you are looking for.","body":"This is not the operator you are looking for."},{"owner":{"account_id":65386,"reputation":39895,"user_id":192444,"accept_rate":100,"display_name":"John Vint"},"score":6,"creation_date":1326406845,"post_id":8842504,"comment_id":11043967,"body_markdown":"@Malfist As I read what you wrote I can see you waving your hand in front of his face like a jedi","body":"@Malfist As I read what you wrote I can see you waving your hand in front of his face like a jedi"},{"owner":{"account_id":12583055,"reputation":447,"user_id":9732672,"display_name":"NomadMaker"},"score":0,"creation_date":1619334118,"post_id":8842504,"comment_id":118869735,"body_markdown":"Height/100 uses integer division, which might not be what you&#39;re looking for.","body":"Height/100 uses integer division, which might not be what you&#39;re looking for."}],"answers":[{"tags":[],"owner":{"account_id":298826,"reputation":8299,"user_id":605059,"accept_rate":33,"display_name":"WuHoUnited"},"down_vote_count":0,"up_vote_count":159,"is_accepted":true,"score":159,"last_activity_date":1327632600,"creation_date":1326403346,"answer_id":8842505,"question_id":8842504,"body_markdown":"`^` in java does not mean to raise to a power. It means XOR.\r\n\r\nYou can use java&#39;s `Math.pow()`\r\n\r\n----\r\n\r\nAnd you might want to consider using `double` instead of `int`—that is:\r\n\r\n    double height;\r\n    double weight;\r\n\r\nNote that `199/100` evaluates to 1.","title":"Raising a number to a power in Java","body":"<p><code>^</code> in java does not mean to raise to a power. It means XOR.</p>\n\n<p>You can use java's <code>Math.pow()</code></p>\n\n<hr>\n\n<p>And you might want to consider using <code>double</code> instead of <code>int</code>—that is:</p>\n\n<pre><code>double height;\ndouble weight;\n</code></pre>\n\n<p>Note that <code>199/100</code> evaluates to 1.</p>\n"},{"tags":[],"owner":{"account_id":232631,"reputation":27996,"user_id":497600,"accept_rate":81,"display_name":"lhk"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1628295420,"creation_date":1326403395,"answer_id":8842506,"question_id":8842504,"body_markdown":"`^` is not the operator you want. You are looking for the [`pow`](https://docs.oracle.com/javase/8/docs/api/java/lang/Math.html#pow-double-double-) method of [`java.lang.Math`](https://docs.oracle.com/javase/8/docs/api/java/lang/Math.html).\r\n\r\n\r\nYou can use `Math.pow(value, power)`.\r\n\r\nExample:\r\n\r\n    Math.pow(23, 5); // 23 to the fifth power","title":"Raising a number to a power in Java","body":"<p><code>^</code> is not the operator you want. You are looking for the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/Math.html#pow-double-double-\" rel=\"noreferrer\"><code>pow</code></a> method of <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/Math.html\" rel=\"noreferrer\"><code>java.lang.Math</code></a>.</p>\n<p>You can use <code>Math.pow(value, power)</code>.</p>\n<p>Example:</p>\n<pre><code>Math.pow(23, 5); // 23 to the fifth power\n</code></pre>\n"},{"tags":[],"owner":{"account_id":182076,"reputation":7926,"user_id":416521,"display_name":"Bernard"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1326403486,"creation_date":1326403486,"answer_id":8842515,"question_id":8842504,"body_markdown":"Your calculation is likely the culprit. Try using:\r\n\r\n    bmi = weight / Math.pow(height / 100.0, 2.0);\r\n\r\nBecause both `height` and `100` are integers, you were likely getting the wrong answer when dividing. However, `100.0` is a double. I suggest you make `weight` a double as well. Also, the `^` operator is not for powers. Use the `Math.pow()` method instead.","title":"Raising a number to a power in Java","body":"<p>Your calculation is likely the culprit. Try using:</p>\n\n<pre><code>bmi = weight / Math.pow(height / 100.0, 2.0);\n</code></pre>\n\n<p>Because both <code>height</code> and <code>100</code> are integers, you were likely getting the wrong answer when dividing. However, <code>100.0</code> is a double. I suggest you make <code>weight</code> a double as well. Also, the <code>^</code> operator is not for powers. Use the <code>Math.pow()</code> method instead.</p>\n"},{"tags":[],"owner":{"account_id":1162371,"reputation":51,"user_id":1141630,"display_name":"preeti"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1326407196,"creation_date":1326407196,"answer_id":8843263,"question_id":8842504,"body_markdown":"    int weight=10;\r\n    int height=10;\r\n    double bmi;\r\n    bmi = weight / Math.pow(height / 100.0, 2.0);\r\n    System.out.println(&quot;bmi&quot;+(bmi));\r\n    double result = bmi * 100;\r\n    result = Math.round(result);\r\n    result = result / 100;\r\n    System.out.println(&quot;result&quot;+result);","title":"Raising a number to a power in Java","body":"<pre><code>int weight=10;\nint height=10;\ndouble bmi;\nbmi = weight / Math.pow(height / 100.0, 2.0);\nSystem.out.println(\"bmi\"+(bmi));\ndouble result = bmi * 100;\nresult = Math.round(result);\nresult = result / 100;\nSystem.out.println(\"result\"+result);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7233609,"reputation":2978,"user_id":5519622,"accept_rate":50,"display_name":"Thamays"},"down_vote_count":0,"up_vote_count":42,"is_accepted":false,"score":42,"last_activity_date":1469037764,"creation_date":1469037764,"answer_id":38487703,"question_id":8842504,"body_markdown":"we can use \r\n\r\n    Math.pow(2, 4);\r\n\r\nthis mean 2 to the power 4 (2^4)\r\n\r\nanswer = 16","title":"Raising a number to a power in Java","body":"<p>we can use </p>\n\n<pre><code>Math.pow(2, 4);\n</code></pre>\n\n<p>this mean 2 to the power 4 (2^4)</p>\n\n<p>answer = 16</p>\n"},{"tags":[],"owner":{"account_id":1523665,"reputation":2380,"user_id":1422619,"display_name":"Chris Barry"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1480335929,"creation_date":1480335929,"answer_id":40844307,"question_id":8842504,"body_markdown":"Too late for the OP of course, but still...\r\nRearranging the expression as:\r\n\r\n    int bmi = (10000 * weight) / (height * height)\r\n\r\nEliminates all the floating point, and converts a division by a constant to a multiplication, which should execute faster. Integer precision is probably adequate for this application, but if it is not then:\r\n\r\n    double bmi = (10000.0 * weight) / (height * height)\r\n\r\nwould still be an improvement.\r\n","title":"Raising a number to a power in Java","body":"<p>Too late for the OP of course, but still...\nRearranging the expression as:</p>\n\n<pre><code>int bmi = (10000 * weight) / (height * height)\n</code></pre>\n\n<p>Eliminates all the floating point, and converts a division by a constant to a multiplication, which should execute faster. Integer precision is probably adequate for this application, but if it is not then:</p>\n\n<pre><code>double bmi = (10000.0 * weight) / (height * height)\n</code></pre>\n\n<p>would still be an improvement.</p>\n"},{"tags":[],"owner":{"account_id":6953348,"reputation":629,"user_id":5335255,"display_name":"PulkitRajput"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1619445924,"creation_date":1547108291,"answer_id":54124409,"question_id":8842504,"body_markdown":"You should use below method- \r\n\r\nMath.pow(double a, double b)\r\n\r\nFrom (https://docs.oracle.com/javase/8/docs/api/java/lang/Math.html#pow-double-double-)\r\n&gt; Returns the value of the first argument raised to the power of the second argument.","title":"Raising a number to a power in Java","body":"<p>You should use below method-</p>\n<p>Math.pow(double a, double b)</p>\n<p>From (<a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/Math.html#pow-double-double-\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/8/docs/api/java/lang/Math.html#pow-double-double-</a>)</p>\n<blockquote>\n<p>Returns the value of the first argument raised to the power of the second argument.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":17011332,"reputation":251,"user_id":12306259,"display_name":"Kavindu Tharaka"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1573718175,"creation_date":1573717802,"answer_id":58851780,"question_id":8842504,"body_markdown":"1) We usually **do not use int** data types to height, weight, distance, \r\n         temperature etc.(variables which can have decimal points)\r\n\t\t Therefore height, weight should be double or float.\r\n\t\t but double is more accurate than float **when you have more decimal points**\r\n\t\t\r\n2) And instead of ^, you can change that calculation as below using `Math.pow()`\r\n\t\t\t\t\r\n    bmi = (weight/(Math.pow(height/100, 2)));\r\n\t\t\r\n3) `Math.pow()` method has below definition\r\n\t\t\r\n\r\n    Math.pow(double var_1, double var_2);\r\n\t\t\r\nExample:\r\n\r\ni) `Math.pow(8, 2)` is produced 64  (8 to the power 2)\r\n\r\nii) `Math.pow(8.2, 2.1)` is produced 82.986813689753 (8.2 to the power 2.1)","title":"Raising a number to a power in Java","body":"<p>1) We usually <strong>do not use int</strong> data types to height, weight, distance, \n         temperature etc.(variables which can have decimal points)\n         Therefore height, weight should be double or float.\n         but double is more accurate than float <strong>when you have more decimal points</strong></p>\n\n<p>2) And instead of ^, you can change that calculation as below using <code>Math.pow()</code></p>\n\n<pre><code>bmi = (weight/(Math.pow(height/100, 2)));\n</code></pre>\n\n<p>3) <code>Math.pow()</code> method has below definition</p>\n\n<pre><code>Math.pow(double var_1, double var_2);\n</code></pre>\n\n<p>Example:</p>\n\n<p>i) <code>Math.pow(8, 2)</code> is produced 64  (8 to the power 2)</p>\n\n<p>ii) <code>Math.pow(8.2, 2.1)</code> is produced 82.986813689753 (8.2 to the power 2.1)</p>\n"},{"tags":[],"owner":{"account_id":18387172,"reputation":136,"user_id":13517337,"display_name":"Krischna Gabriel"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1619327918,"creation_date":1619327918,"answer_id":67250020,"question_id":8842504,"body_markdown":"I did the benchmarking with Math.pow(x,2) and x*x,\r\nthe result is that Math.pow() is easily forty times slower than manually multiplying it by itself, so i don&#39;t recommend it for anything where a little bit of performance is required.\r\n\r\nHere&#39;s the results:\r\n\r\n    proof_of_work: 19.284756867003345\r\n    time for Math.pow(x,2) in ns: 35143\r\n    proof_of_work: 19.284756867003345\r\n    time for x*x in ns: 884\r\n    manual calculation is 39 times faster\r\n\r\nand here&#39;s the test-code\r\n\r\n    double r1 = 4.391441320;\r\n  \tlong multiply_d1 = System.nanoTime();\r\n\tdouble multiply_dr = Math.pow(r1,2);\r\n  \tlong multiply_d2 = System.nanoTime();\r\n  \tSystem.out.println((&quot;proof_of_work: &quot;) + (multiply_dr));\r\n    System.out.println((&quot;time for Math.pow(x,2) in ns: &quot;) + (multiply_d2 - multiply_d1));\r\n    long multiply_t1 = System.nanoTime();\r\n\tdouble multiply_tr = r1*r1;\r\n  \tlong multiply_t2 = System.nanoTime();\r\n  \tSystem.out.println((&quot;proof_of_work: &quot;) + (multiply_tr));\r\n    System.out.println((&quot;time for x*x in ns: &quot;) + (multiply_t2 - multiply_t1));\r\n  \tSystem.out.println((&quot;manual calculation is &quot;) + ((multiply_d2 - multiply_d1) / (multiply_t2 - multiply_t1)) + (&quot; times faster&quot;));","title":"Raising a number to a power in Java","body":"<p>I did the benchmarking with Math.pow(x,2) and x*x,\nthe result is that Math.pow() is easily forty times slower than manually multiplying it by itself, so i don't recommend it for anything where a little bit of performance is required.</p>\n<p>Here's the results:</p>\n<pre><code>proof_of_work: 19.284756867003345\ntime for Math.pow(x,2) in ns: 35143\nproof_of_work: 19.284756867003345\ntime for x*x in ns: 884\nmanual calculation is 39 times faster\n</code></pre>\n<p>and here's the test-code</p>\n<pre><code>double r1 = 4.391441320;\nlong multiply_d1 = System.nanoTime();\ndouble multiply_dr = Math.pow(r1,2);\nlong multiply_d2 = System.nanoTime();\nSystem.out.println((&quot;proof_of_work: &quot;) + (multiply_dr));\nSystem.out.println((&quot;time for Math.pow(x,2) in ns: &quot;) + (multiply_d2 - multiply_d1));\nlong multiply_t1 = System.nanoTime();\ndouble multiply_tr = r1*r1;\nlong multiply_t2 = System.nanoTime();\nSystem.out.println((&quot;proof_of_work: &quot;) + (multiply_tr));\nSystem.out.println((&quot;time for x*x in ns: &quot;) + (multiply_t2 - multiply_t1));\nSystem.out.println((&quot;manual calculation is &quot;) + ((multiply_d2 - multiply_d1) / (multiply_t2 - multiply_t1)) + (&quot; times faster&quot;));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15114475,"reputation":3897,"user_id":10907345,"display_name":"rost"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637254767,"creation_date":1637254767,"answer_id":70023838,"question_id":8842504,"body_markdown":"Most efficient solution is\r\n```\r\npublic Float fastPow(Float number, Integer power) {\r\n        if (power == 0) {\r\n            return 1.0f;\r\n        } else if (power % 2 == 1) {\r\n            return fastPow(number, power - 1) * number;\r\n        } else {\r\n            return fastPow(number * number, power / 2);\r\n        }\r\n    }\r\n```\r\nLet A is our number and N our power. Then A^2^N = (A^2)^N. And A^N = (A^2)^N/2. The function above reflects this relationship.","title":"Raising a number to a power in Java","body":"<p>Most efficient solution is</p>\n<pre><code>public Float fastPow(Float number, Integer power) {\n        if (power == 0) {\n            return 1.0f;\n        } else if (power % 2 == 1) {\n            return fastPow(number, power - 1) * number;\n        } else {\n            return fastPow(number * number, power / 2);\n        }\n    }\n</code></pre>\n<p>Let A is our number and N our power. Then A^2^N = (A^2)^N. And A^N = (A^2)^N/2. The function above reflects this relationship.</p>\n"}],"owner":{"account_id":1168761,"reputation":1642,"user_id":1146470,"accept_rate":68,"display_name":"stytown"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":485883,"favorite_count":0,"down_vote_count":2,"up_vote_count":99,"accepted_answer_id":8842505,"answer_count":10,"score":97,"last_activity_date":1637254767,"creation_date":1326402762,"question_id":8842504,"body_markdown":"Here is my code.  For some reason my BMI is not calculated correctly.\r\nWhen I check the output on a calculator for this : `(10/((10/100)^2)))` I get 1000, but in my program, I get 5.  I&#39;m not sure what I am doing wrong.  Here is my code:\r\n\r\n\r\n    import javax.swing.*;\r\n\r\n    public class BMI {\r\n        public static void main(String args[]) {\r\n            int height;\r\n            int weight;\r\n            String getweight;\r\n            getweight = JOptionPane.showInputDialog(null, &quot;Please enter your weight in Kilograms&quot;);\r\n            String getheight;\r\n            getheight = JOptionPane.showInputDialog(null, &quot;Please enter your height in Centimeters&quot;);\r\n            weight = Integer.parseInt(getweight);\r\n            height = Integer.parseInt(getheight);\r\n            double bmi;\r\n            bmi = (weight/((height/100)^2));\r\n            JOptionPane.showMessageDialog(null, &quot;Your BMI is: &quot; + bmi);\r\n        }\r\n    }\r\n","title":"Raising a number to a power in Java","body":"<p>Here is my code.  For some reason my BMI is not calculated correctly.\nWhen I check the output on a calculator for this : <code>(10/((10/100)^2)))</code> I get 1000, but in my program, I get 5.  I'm not sure what I am doing wrong.  Here is my code:</p>\n\n<pre><code>import javax.swing.*;\n\npublic class BMI {\n    public static void main(String args[]) {\n        int height;\n        int weight;\n        String getweight;\n        getweight = JOptionPane.showInputDialog(null, \"Please enter your weight in Kilograms\");\n        String getheight;\n        getheight = JOptionPane.showInputDialog(null, \"Please enter your height in Centimeters\");\n        weight = Integer.parseInt(getweight);\n        height = Integer.parseInt(getheight);\n        double bmi;\n        bmi = (weight/((height/100)^2));\n        JOptionPane.showMessageDialog(null, \"Your BMI is: \" + bmi);\n    }\n}\n</code></pre>\n"},{"tags":["java","spring","methods","sap-commerce-cloud"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1637227788,"post_id":70017360,"comment_id":123771445,"body_markdown":"does your Event have id(&#39;s)? or do you mean the id of a specific person? I assume you are using getters?","body":"does your Event have id(&#39;s)? or do you mean the id of a specific person? I assume you are using getters?"},{"owner":{"display_name":"user16125782"},"score":0,"creation_date":1637228163,"post_id":70017360,"comment_id":123771605,"body_markdown":"@Stultuske there can be more person registered in the system and I have to update them all, the important thing is that I have a list of ids that are one or more, it doesn&#39;t matter.","body":"@Stultuske there can be more person registered in the system and I have to update them all, the important thing is that I have a list of ids that are one or more, it doesn&#39;t matter."},{"owner":{"display_name":"user16125782"},"score":0,"creation_date":1637228231,"post_id":70017360,"comment_id":123771628,"body_markdown":"my event class: public class MyEvent extends AbstractEvent{ private final PersonModel personModel; public MyEvent(PersonModel personModel) {this.personModel = personModel;} public List&lt;String&gt; getPersonById()\n    { List&lt;String&gt; personModelListId = new ArrayList&lt;&gt;();\n        personModelListId.add(personModel.getId());\n        return personModelListId; } or another mehod: public List&lt;PersonModel&gt; getPerson()\n    {\n       List&lt;PersonModel&gt; personList = new ArrayList&lt;&gt;();\n       personList.add(personModel);\n       return personList;\n    }","body":"my event class: public class MyEvent extends AbstractEvent{ private final PersonModel personModel; public MyEvent(PersonModel personModel) {this.personModel = personModel;} public List&lt;String&gt; getPersonById()     { List&lt;String&gt; personModelListId = new ArrayList&lt;&gt;();         personModelListId.add(personModel.getId());         return personModelListId; } or another mehod: public List&lt;PersonModel&gt; getPerson()     {        List&lt;PersonModel&gt; personList = new ArrayList&lt;&gt;();        personList.add(personModel);        return personList;     }"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1637228538,"post_id":70017360,"comment_id":123771770,"body_markdown":"You&#39;ve declared your attributes as `static`, so they are not per instance, but per class.","body":"You&#39;ve declared your attributes as <code>static</code>, so they are not per instance, but per class."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1637228604,"post_id":70017360,"comment_id":123771805,"body_markdown":"Don&#39;t add information in comments, please edit your question.","body":"Don&#39;t add information in comments, please edit your question."},{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1637232203,"post_id":70017360,"comment_id":123773323,"body_markdown":"when you create a method &#39;getPersonById&#39;, you are supposed to pass an id as parameter.","body":"when you create a method &#39;getPersonById&#39;, you are supposed to pass an id as parameter."},{"owner":{"display_name":"user16125782"},"score":0,"creation_date":1637233205,"post_id":70017360,"comment_id":123773703,"body_markdown":"@Stultuske and then?","body":"@Stultuske and then?"},{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1637239676,"post_id":70017360,"comment_id":123776210,"body_markdown":"and then you use that id to find the corresponding object","body":"and then you use that id to find the corresponding object"},{"owner":{"account_id":22354823,"reputation":16499,"user_id":16572295,"display_name":"Jo&#227;o Dias"},"score":0,"creation_date":1637266070,"post_id":70017360,"comment_id":123787231,"body_markdown":"I don&#39;t understand what is your main goal. What are you trying to achieve? Can you elaborate more on that? Thanks!","body":"I don&#39;t understand what is your main goal. What are you trying to achieve? Can you elaborate more on that? Thanks!"},{"owner":{"display_name":"user16125782"},"score":0,"creation_date":1637271787,"post_id":70017360,"comment_id":123789171,"body_markdown":"yes. I must generate event (class event) that contains a list of ID of person that are present in the system, but not I have understand how I do.","body":"yes. I must generate event (class event) that contains a list of ID of person that are present in the system, but not I have understand how I do."},{"owner":{"display_name":"user16125782"},"score":0,"creation_date":1637271969,"post_id":70017360,"comment_id":123789235,"body_markdown":"I&#39;m sure that I must create a method that return a list of ID (ID is a String type into class PersonModel) but now i have a lapsus for the right implementation of this method.","body":"I&#39;m sure that I must create a method that return a list of ID (ID is a String type into class PersonModel) but now i have a lapsus for the right implementation of this method."},{"owner":{"account_id":22354823,"reputation":16499,"user_id":16572295,"display_name":"Jo&#227;o Dias"},"score":0,"creation_date":1637273325,"post_id":70017360,"comment_id":123789617,"body_markdown":"Please define &quot;system&quot;. Is it a database? Another service? Data in memory in your application?","body":"Please define &quot;system&quot;. Is it a database? Another service? Data in memory in your application?"},{"owner":{"display_name":"user16125782"},"score":0,"creation_date":1637307632,"post_id":70017360,"comment_id":123796308,"body_markdown":"yes in database","body":"yes in database"},{"owner":{"account_id":22354823,"reputation":16499,"user_id":16572295,"display_name":"Jo&#227;o Dias"},"score":0,"creation_date":1637312802,"post_id":70017360,"comment_id":123797994,"body_markdown":"Then you need a way to get the data from there. In Spring that is usually a Repository. Do you have any? If you do please add it to the question. Thanks.","body":"Then you need a way to get the data from there. In Spring that is usually a Repository. Do you have any? If you do please add it to the question. Thanks."},{"owner":{"display_name":"user16125782"},"score":0,"creation_date":1637315228,"post_id":70017360,"comment_id":123798871,"body_markdown":"@Jo&#227;oDias Repository no, Service yes","body":"@Jo&#227;oDias Repository no, Service yes"},{"owner":{"account_id":22354823,"reputation":16499,"user_id":16572295,"display_name":"Jo&#227;o Dias"},"score":0,"creation_date":1637317926,"post_id":70017360,"comment_id":123799922,"body_markdown":"Then how do you get the data from the database?","body":"Then how do you get the data from the database?"}],"owner":{"display_name":"user16125782"},"comment_count":16,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":162,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1637254639,"creation_date":1637227649,"question_id":70017360,"body_markdown":"I have a model class &quot;Person&quot; that have four attribute:\r\n\r\n    private final static String id; \r\n    private final static String name;\r\n    private final static String lastName;\r\n    private final static String age;\r\n\r\nNow I must create a event class which contains the list of person ID(so I suppose a method that returns a list) to be synchronized(all those existing in the system).\r\nHow could I do it as cleanly as possible? Thanks a lot.\r\n\r\nMy event class:\r\n\r\n    public class MyEventSync extends AbstractEvent{\r\n    private final PersonModel PersonModel;\r\n\r\n    public MyEventSync(PersonModel personModel)\r\n    {\r\n        this.personModel = personModel;\r\n    }\r\n\r\n    public List&lt;String&gt; getPersonsById()\r\n    {\r\n        List&lt;String&gt; personModelListId = new ArrayList&lt;&gt;();\r\n        personModelListId.add(personModel.getId());\r\n        return personModelListId;\r\n    }\r\n\r\nor another method:\r\n\r\n    public List&lt;PersonModel&gt; getPerson()\r\n    {\r\n       List&lt;PersonModel&gt; personList = new ArrayList&lt;&gt;();\r\n       personList.add(personModel);\r\n       return personList;\r\n    }\r\n\r\n","title":"How extract Id from event class","body":"<p>I have a model class &quot;Person&quot; that have four attribute:</p>\n<pre><code>private final static String id; \nprivate final static String name;\nprivate final static String lastName;\nprivate final static String age;\n</code></pre>\n<p>Now I must create a event class which contains the list of person ID(so I suppose a method that returns a list) to be synchronized(all those existing in the system).\nHow could I do it as cleanly as possible? Thanks a lot.</p>\n<p>My event class:</p>\n<pre><code>public class MyEventSync extends AbstractEvent{\nprivate final PersonModel PersonModel;\n\npublic MyEventSync(PersonModel personModel)\n{\n    this.personModel = personModel;\n}\n\npublic List&lt;String&gt; getPersonsById()\n{\n    List&lt;String&gt; personModelListId = new ArrayList&lt;&gt;();\n    personModelListId.add(personModel.getId());\n    return personModelListId;\n}\n</code></pre>\n<p>or another method:</p>\n<pre><code>public List&lt;PersonModel&gt; getPerson()\n{\n   List&lt;PersonModel&gt; personList = new ArrayList&lt;&gt;();\n   personList.add(personModel);\n   return personList;\n}\n</code></pre>\n"},{"tags":["javascript","java","typescript","function","console.log"],"comments":[{"owner":{"account_id":3446506,"reputation":279313,"user_id":2887218,"display_name":"jcalz"},"score":0,"creation_date":1637255215,"post_id":70023543,"comment_id":123783416,"body_markdown":"What does this have to do with java?","body":"What does this have to do with java?"},{"owner":{"account_id":11596735,"reputation":31866,"user_id":8495254,"display_name":"captain-yossarian from Ukraine"},"score":0,"creation_date":1637262770,"post_id":70023543,"comment_id":123786150,"body_markdown":"Please see https://catchts.com/deep-pick and https://stackoverflow.com/questions/69126879/typescript-deep-keyof-of-a-nested-object-with-related-type#answer-69129328","body":"Please see <a href=\"https://catchts.com/deep-pick\" rel=\"nofollow noreferrer\">catchts.com/deep-pick</a> and <a href=\"https://stackoverflow.com/questions/69126879/typescript-deep-keyof-of-a-nested-object-with-related-type#answer-69129328\" title=\"typescript deep keyof of a nested object with related type%23answer 69129328\">stackoverflow.com/questions/69126879/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":10146106,"reputation":15622,"user_id":7494218,"display_name":"Ran Turner"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1637254323,"creation_date":1637254323,"answer_id":70023734,"question_id":70023543,"body_markdown":"You can use `split` and then reference the property dynamically using square brackets\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n    const lookup = (obj, path) =&gt; {\r\n        const paths = path.split(&#39;.&#39;);\r\n        return obj[paths[0]][paths[1]];\r\n    }\r\n\r\n    const obj = { something1: { something2: &quot;Mouse&quot;, something3: &#39;Cat&#39; } };\r\n    const path = &#39;something1.something2&#39;\r\n\r\n    console.log(lookup(obj, path));\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n","title":"How to write a function which represents an object lookup path","body":"<p>You can use <code>split</code> and then reference the property dynamically using square brackets</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>const lookup = (obj, path) =&gt; {\n    const paths = path.split('.');\n    return obj[paths[0]][paths[1]];\n}\n\nconst obj = { something1: { something2: \"Mouse\", something3: 'Cat' } };\nconst path = 'something1.something2'\n\nconsole.log(lookup(obj, path));</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}],"owner":{"account_id":21606716,"reputation":27,"user_id":15934039,"display_name":"Ismail Beg"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":201,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"answer_count":1,"score":0,"last_activity_date":1637254323,"creation_date":1637253444,"question_id":70023543,"body_markdown":"Write a function that takes a object and a string, which represents an object lookup path, for example &quot;something1.something2&quot;. The function should return the value on the specific path.\r\nExample:\r\n```\r\nconst lookup = (obj, path) =&gt; {....}\r\nconst obj = { something1: { something2: &quot;Mouse&quot;, something3: &#39;Cat&#39; } };\r\nconst path = &#39;something1.something2&#39;\r\nconsole.log(lookup(obj, path));\r\n```\r\n\r\nResult:\r\n&#39;Mouse&#39;","title":"How to write a function which represents an object lookup path","body":"<p>Write a function that takes a object and a string, which represents an object lookup path, for example &quot;something1.something2&quot;. The function should return the value on the specific path.\nExample:</p>\n<pre><code>const lookup = (obj, path) =&gt; {....}\nconst obj = { something1: { something2: &quot;Mouse&quot;, something3: 'Cat' } };\nconst path = 'something1.something2'\nconsole.log(lookup(obj, path));\n</code></pre>\n<p>Result:\n'Mouse'</p>\n"},{"tags":["java","spring-integration"],"answers":[{"tags":[],"owner":{"account_id":3273937,"reputation":114855,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1637254297,"creation_date":1637250492,"answer_id":70022832,"question_id":70022690,"body_markdown":"The HTTP Status is a part of a thrown exception:\r\n\r\n`((MessagingException) retryContext.getLastThrowable()).getCause()`  should contain an `HttpStatusCodeException` with the `getStatusCode()` property.\r\n\r\nMy tests shows this:\r\n\r\n    retryContext = ...\r\n     lastException = org.springframework.messaging.MessagingException: ...\r\n      failedMessage = ...\r\n      backtrace = {Object[6]@7673} \r\n      detailMessage = &quot;Failed to handle&quot;\r\n      cause = org.springframework.messaging.MessageHandlingException: ...\r\n       failedMessage = ...\r\n       cause = {HttpClientErrorException$Forbidden@7685} &quot;org.springframework.web.client.HttpClientErrorException$Forbidden: 403 Forbidden: [no body]&quot;\r\n        statusCode = {HttpStatus@7690} &quot;403 FORBIDDEN&quot;\r\n        rawStatusCode = 403\r\n        statusText = &quot;Forbidden&quot;\r\n\r\nThe code is like this:\r\n\r\n    .handle(Http.outboundGateway(&quot;/service/internal?{params}&quot;)\r\n\t\t\t\t\t\t\t\t\t.uriVariable(&quot;params&quot;, &quot;payload&quot;)\r\n\t\t\t\t\t\t\t\t\t.expectedResponseType(String.class),\r\n\t\t\t\t\t\t\te -&gt;  e.advice(retryAdvice()))\r\n\r\n\tprivate RequestHandlerRetryAdvice retryAdvice() {\r\n\t\t\tRequestHandlerRetryAdvice requestHandlerRetryAdvice = new RequestHandlerRetryAdvice();\r\n\t\t\trequestHandlerRetryAdvice.setRecoveryCallback(retryContext -&gt; {\r\n\t\t\t\tMessagingException lastThrowable = (MessagingException) retryContext.getLastThrowable();\r\n\t\t\t\treturn ((HttpStatusCodeException) lastThrowable.getCause().getCause()).getStatusCode();\r\n\t\t\t});\r\n\t\t\treturn requestHandlerRetryAdvice;\r\n\t\t}","title":"How to get HTTP status in advice recovery callback","body":"<p>The HTTP Status is a part of a thrown exception:</p>\n<p><code>((MessagingException) retryContext.getLastThrowable()).getCause()</code>  should contain an <code>HttpStatusCodeException</code> with the <code>getStatusCode()</code> property.</p>\n<p>My tests shows this:</p>\n<pre><code>retryContext = ...\n lastException = org.springframework.messaging.MessagingException: ...\n  failedMessage = ...\n  backtrace = {Object[6]@7673} \n  detailMessage = &quot;Failed to handle&quot;\n  cause = org.springframework.messaging.MessageHandlingException: ...\n   failedMessage = ...\n   cause = {HttpClientErrorException$Forbidden@7685} &quot;org.springframework.web.client.HttpClientErrorException$Forbidden: 403 Forbidden: [no body]&quot;\n    statusCode = {HttpStatus@7690} &quot;403 FORBIDDEN&quot;\n    rawStatusCode = 403\n    statusText = &quot;Forbidden&quot;\n</code></pre>\n<p>The code is like this:</p>\n<pre><code>.handle(Http.outboundGateway(&quot;/service/internal?{params}&quot;)\n                                .uriVariable(&quot;params&quot;, &quot;payload&quot;)\n                                .expectedResponseType(String.class),\n                        e -&gt;  e.advice(retryAdvice()))\n\nprivate RequestHandlerRetryAdvice retryAdvice() {\n        RequestHandlerRetryAdvice requestHandlerRetryAdvice = new RequestHandlerRetryAdvice();\n        requestHandlerRetryAdvice.setRecoveryCallback(retryContext -&gt; {\n            MessagingException lastThrowable = (MessagingException) retryContext.getLastThrowable();\n            return ((HttpStatusCodeException) lastThrowable.getCause().getCause()).getStatusCode();\n        });\n        return requestHandlerRetryAdvice;\n    }\n</code></pre>\n"}],"owner":{"account_id":2691863,"reputation":401,"user_id":4358367,"accept_rate":41,"display_name":"bartex9"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":153,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70022832,"answer_count":1,"score":0,"last_activity_date":1637254297,"creation_date":1637249956,"question_id":70022690,"body_markdown":"I have a simple integration flow which sends request to an external resource with several attempts. I am creating `RequestHandlerRetryAdvice` for this purpose:\r\n\r\n    RequestHandlerRetryAdvice requestHandlerRetryAdvice = new RequestHandlerRetryAdvice();\r\n    requestHandlerRetryAdvice.setRecoveryCallback(retryContext -&gt; {\r\n        Message&lt;?&gt; failedMessage = ((MessagingException) retryContext.getLastThrowable()).getFailedMessage();\r\n        //TODO: get http status\r\n        return failedMessage.getPayload();\r\n    });\r\n\r\nWhat I need to know is the http status. How can I get it? ","title":"How to get HTTP status in advice recovery callback","body":"<p>I have a simple integration flow which sends request to an external resource with several attempts. I am creating <code>RequestHandlerRetryAdvice</code> for this purpose:</p>\n<pre><code>RequestHandlerRetryAdvice requestHandlerRetryAdvice = new RequestHandlerRetryAdvice();\nrequestHandlerRetryAdvice.setRecoveryCallback(retryContext -&gt; {\n    Message&lt;?&gt; failedMessage = ((MessagingException) retryContext.getLastThrowable()).getFailedMessage();\n    //TODO: get http status\n    return failedMessage.getPayload();\n});\n</code></pre>\n<p>What I need to know is the http status. How can I get it?</p>\n"},{"tags":["java","spring","spring-boot","sonarqube"],"comments":[{"owner":{"account_id":15064163,"reputation":13519,"user_id":10871900,"display_name":"dan1st is crying"},"score":2,"creation_date":1637225339,"post_id":70016831,"comment_id":123770558,"body_markdown":"You need to exclude it from SonarQube, not from JaCoCo. See Ignore Code Coverage over [here](https://docs.sonarqube.org/latest/project-administration/narrowing-the-focus/).","body":"You need to exclude it from SonarQube, not from JaCoCo. See Ignore Code Coverage over <a href=\"https://docs.sonarqube.org/latest/project-administration/narrowing-the-focus/\" rel=\"nofollow noreferrer\">here</a>."},{"owner":{"account_id":6631961,"reputation":464,"user_id":5120388,"accept_rate":57,"display_name":"newcoder"},"score":0,"creation_date":1637227251,"post_id":70016831,"comment_id":123771234,"body_markdown":"&lt;exclude&gt;**/model/ *.class&lt;/exclude&gt; -- there is white space before *.class","body":"&lt;exclude&gt;**/model/ *.class&lt;/exclude&gt; -- there is white space before *.class"},{"owner":{"account_id":968743,"reputation":3452,"user_id":991710,"accept_rate":82,"display_name":"filpa"},"score":1,"creation_date":1637230040,"post_id":70016831,"comment_id":123772439,"body_markdown":"Does this answer your question? [Configure Sonar to exclude files from Maven pom.xml](https://stackoverflow.com/questions/21425012/configure-sonar-to-exclude-files-from-maven-pom-xml)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/21425012/configure-sonar-to-exclude-files-from-maven-pom-xml\">Configure Sonar to exclude files from Maven pom.xml</a>"},{"owner":{"account_id":213468,"reputation":103486,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1637254344,"post_id":70016831,"comment_id":123783038,"body_markdown":"It seems like you edited the [solution by Kris](https://stackoverflow.com/a/70017809/466862) into your question. I have removed it again.","body":"It seems like you edited the <a href=\"https://stackoverflow.com/a/70017809/466862\">solution by Kris</a> into your question. I have removed it again."}],"answers":[{"tags":[],"owner":{"account_id":18431035,"reputation":582,"user_id":13426164,"display_name":"Kris"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1637254276,"creation_date":1637229566,"answer_id":70017809,"question_id":70016831,"body_markdown":" Have you tried using sonar.exclusions in your POM properties?\r\n \r\n```xml\r\n&lt;properties&gt;\r\n      &lt;sonar.exclusions&gt;\r\n          **/model/*.java\r\n        &lt;/sonar.exclusions&gt;\r\n&lt;/properties&gt;\r\n```","title":"Exclude files/packages from SonarQube coverage","body":"<p>Have you tried using sonar.exclusions in your POM properties?</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;properties&gt;\n      &lt;sonar.exclusions&gt;\n          **/model/*.java\n        &lt;/sonar.exclusions&gt;\n&lt;/properties&gt;\n</code></pre>\n"}],"owner":{"account_id":20511311,"reputation":597,"user_id":15053014,"display_name":"ima.technophyle"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9683,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":70017809,"answer_count":1,"score":1,"last_activity_date":1637254276,"creation_date":1637224840,"question_id":70016831,"body_markdown":"I have a package, `com.org.projectname.model`, in my project. What I want to do is exclude all the files within this package from SonarQube coverage. I tried,\r\n `&lt;exclude&gt;**/model /*.class&lt;/exclude&gt;` and `&lt;exclude&gt;**/com/org/projectname/model/*.class&lt;/exclude&gt;`, but this didn&#39;t work.\r\n\r\n```xml\r\n&lt;plugin&gt;\r\n   &lt;groupId&gt;org.jacoco&lt;/groupId&gt;\r\n   &lt;artifactId&gt;jacoco-maven-plugin&lt;/artifactId&gt;\r\n   &lt;version&gt;0.8.6&lt;/version&gt;\r\n   &lt;configuration&gt;\r\n      &lt;excludes&gt;\r\n      \r\n      &lt;/excludes&gt;\r\n   &lt;/configuration&gt;\r\n   &lt;executions&gt;\r\n      &lt;execution&gt;\r\n         &lt;id&gt;pre-unit-test&lt;/id&gt;\r\n         &lt;goals&gt;\r\n            &lt;goal&gt;prepare-agent&lt;/goal&gt;\r\n         &lt;/goals&gt;\r\n         &lt;configuration&gt;\r\n            &lt;destFile&gt;target/coverage-data/jacoco-ut.exec&lt;/destFile&gt;\r\n            &lt;propertyName&gt;surefireArgLine&lt;/propertyName&gt;\r\n         &lt;/configuration&gt;\r\n      &lt;/execution&gt;\r\n      &lt;execution&gt;\r\n         &lt;id&gt;post-unit-test&lt;/id&gt;\r\n         &lt;phase&gt;test&lt;/phase&gt;\r\n         &lt;goals&gt;\r\n            &lt;goal&gt;report&lt;/goal&gt;\r\n         &lt;/goals&gt;\r\n         &lt;configuration&gt;\r\n            &lt;dataFile&gt;target/coverage-data/jacoco-ut.exec&lt;/dataFile&gt;\r\n            &lt;outputDirectory&gt;target/coverage-reports/jacoco-ut&lt;/outputDirectory&gt;\r\n         &lt;/configuration&gt;\r\n      &lt;/execution&gt;\r\n   &lt;/executions&gt;\r\n&lt;/plugin&gt;\r\n```\r\n\r\nHow to fix this issue? Or is there any other way?","title":"Exclude files/packages from SonarQube coverage","body":"<p>I have a package, <code>com.org.projectname.model</code>, in my project. What I want to do is exclude all the files within this package from SonarQube coverage. I tried,\n<code>&lt;exclude&gt;**/model /*.class&lt;/exclude&gt;</code> and <code>&lt;exclude&gt;**/com/org/projectname/model/*.class&lt;/exclude&gt;</code>, but this didn't work.</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;plugin&gt;\n   &lt;groupId&gt;org.jacoco&lt;/groupId&gt;\n   &lt;artifactId&gt;jacoco-maven-plugin&lt;/artifactId&gt;\n   &lt;version&gt;0.8.6&lt;/version&gt;\n   &lt;configuration&gt;\n      &lt;excludes&gt;\n      \n      &lt;/excludes&gt;\n   &lt;/configuration&gt;\n   &lt;executions&gt;\n      &lt;execution&gt;\n         &lt;id&gt;pre-unit-test&lt;/id&gt;\n         &lt;goals&gt;\n            &lt;goal&gt;prepare-agent&lt;/goal&gt;\n         &lt;/goals&gt;\n         &lt;configuration&gt;\n            &lt;destFile&gt;target/coverage-data/jacoco-ut.exec&lt;/destFile&gt;\n            &lt;propertyName&gt;surefireArgLine&lt;/propertyName&gt;\n         &lt;/configuration&gt;\n      &lt;/execution&gt;\n      &lt;execution&gt;\n         &lt;id&gt;post-unit-test&lt;/id&gt;\n         &lt;phase&gt;test&lt;/phase&gt;\n         &lt;goals&gt;\n            &lt;goal&gt;report&lt;/goal&gt;\n         &lt;/goals&gt;\n         &lt;configuration&gt;\n            &lt;dataFile&gt;target/coverage-data/jacoco-ut.exec&lt;/dataFile&gt;\n            &lt;outputDirectory&gt;target/coverage-reports/jacoco-ut&lt;/outputDirectory&gt;\n         &lt;/configuration&gt;\n      &lt;/execution&gt;\n   &lt;/executions&gt;\n&lt;/plugin&gt;\n</code></pre>\n<p>How to fix this issue? Or is there any other way?</p>\n"},{"tags":["java","eclipse","junit"],"comments":[{"owner":{"account_id":3557625,"reputation":198996,"user_id":2970947,"display_name":"Elliott Frisch"},"score":0,"creation_date":1637255208,"post_id":70023674,"comment_id":123783413,"body_markdown":"Attach the junit4 source for your version. https://stackoverflow.com/a/47785087/2970947","body":"Attach the junit4 source for your version. <a href=\"https://stackoverflow.com/a/47785087/2970947\">stackoverflow.com/a/47785087/2970947</a>"},{"owner":{"account_id":16793354,"reputation":1,"user_id":12140374,"display_name":"Jeris"},"score":0,"creation_date":1637257701,"post_id":70023674,"comment_id":123784319,"body_markdown":"I don&#39;t have attach source in my issue. as you can see in the image link in my post","body":"I don&#39;t have attach source in my issue. as you can see in the image link in my post"},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1637311765,"post_id":70023674,"comment_id":123797598,"body_markdown":"The sources are missing in which you will step into so you cannot step into. To step into, you would have to configure the project accordingly to have the sources attached to the bytecode, which you obviously have not done so far. You should have the sources or at least the Javadoc of the libraries used to be able to read the API description. When debugging, stepping into the used libraries only makes sense when you want to know how the library works.","body":"The sources are missing in which you will step into so you cannot step into. To step into, you would have to configure the project accordingly to have the sources attached to the bytecode, which you obviously have not done so far. You should have the sources or at least the Javadoc of the libraries used to be able to read the API description. When debugging, stepping into the used libraries only makes sense when you want to know how the library works."},{"owner":{"account_id":16793354,"reputation":1,"user_id":12140374,"display_name":"Jeris"},"score":0,"creation_date":1637349668,"post_id":70023674,"comment_id":123811687,"body_markdown":"@howlger this is code that works on my teacher computer and other computer. It&#39;s only not working my on laptop and I tried it on my brother who has the same laptop as me and it does not work for him as well. Also are you able to explain it little bit simpler form because I am noob in eclipse","body":"@howlger this is code that works on my teacher computer and other computer. It&#39;s only not working my on laptop and I tried it on my brother who has the same laptop as me and it does not work for him as well. Also are you able to explain it little bit simpler form because I am noob in eclipse"},{"owner":{"account_id":16793354,"reputation":1,"user_id":12140374,"display_name":"Jeris"},"score":0,"creation_date":1637349713,"post_id":70023674,"comment_id":123811704,"body_markdown":"@ElliottFrisch do you have instruction on how I can do that ?  I am really new to eclipse and I had never encountered these issue before on eclipse","body":"@ElliottFrisch do you have instruction on how I can do that ?  I am really new to eclipse and I had never encountered these issue before on eclipse"},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1637351103,"post_id":70023674,"comment_id":123812140,"body_markdown":"Please show your project structure, tell whether this is a plain or Maven or ... Java project and what you have in _Project &gt; Properties: Java Build Path_ tab _Libraries_ with the JUnit node expanded.","body":"Please show your project structure, tell whether this is a plain or Maven or ... Java project and what you have in <i>Project &gt; Properties: Java Build Path</i> tab <i>Libraries</i> with the JUnit node expanded."}],"owner":{"account_id":16793354,"reputation":1,"user_id":12140374,"display_name":"Jeris"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1637254031,"creation_date":1637254031,"question_id":70023674,"body_markdown":"Hello So I am debugging into this code by &#39;step into or even step over&#39; but I face a \r\n&quot;The jar of this class file belongs to container &#39;Junit4&#39; which does not allow modifications too source attachments of it&#39;s entries.&quot;\r\n\r\n when I step into or step over. The code itself is fully functional , maybe it has something to do with eclipse . I am using MacBook Air m1 for my eclipse java. \r\n\r\nLine &#39;assertEquals(u1, u2) is the issue part when I debug . When I step into or step over that line I face the &quot;source attachments &#39; issue. I have tried reinstalling eclipse multiple times and it does not work. I even tried it on my brother laptops who has the same m1 air as me and it has the same issue as well. \r\n\r\nHere is also a picture of the error in eclipse : https://i.stack.imgur.com/hL8RD.jpg\r\n\r\n\t@Test\r\n\tpublic void test_unit_03() {\r\n\t\t/*\r\n\t\t * Create three new units with their intended functions and dimensions. \r\n\t\t */\r\n\t\tUnit u1 = new Unit(&quot;Master Bedroom&quot;, 14, 9);\r\n\t\tUnit u2 = new Unit(&quot;Master Bedroom&quot;, 18, 7);\r\n\t\tUnit u3 = new Unit(&quot;Master Bedroom&quot;, 18, 8);\r\n\t\tUnit u4 = new Unit(&quot;Office&quot;, 18, 7); \r\n\t\t\r\n\t\tassertEquals(&quot;A unit of 126 square feet (14&#39; wide and 9&#39; long) functioning as Master Bedroom&quot;, u1.toString());\r\n\t\tassertEquals(&quot;A unit of 126 square feet (18&#39; wide and 7&#39; long) functioning as Master Bedroom&quot;, u2.toString());\r\n\t\tassertEquals(&quot;A unit of 144 square feet (18&#39; wide and 8&#39; long) functioning as Master Bedroom&quot;, u3.toString());\r\n\t\tassertEquals(&quot;A unit of 126 square feet (18&#39; wide and 7&#39; long) functioning as Office&quot;, u4.toString());\r\n\t\t\r\n\t\t/*\r\n\t\t * Two units are considered equal if their intended functions are the same (case-sensitive)\r\n\t\t * \tand the areas (in square feet) are the same (even if the dimensions may be different). \r\n\t\t */\r\n\t\tassertEquals(u1, u2);\r\n\t//\tassertTrue(u1.equals(u2));\r\n\t\t/* Note. Result of assertNotEquals is just the opposite to assertEquals. */\r\n\t\tassertNotEquals(u1, u3);\r\n\t\tassertNotEquals(u1, u4);\r\n\t\tassertNotEquals(u2, u3);\r\n\t\tassertNotEquals(u2, u4);\r\n\t\t\r\n\t\t/* \r\n\t\t * The above assertions do not cover all cases of the equals method as discussed in the lecture.\r\n\t\t * Your implementation of the overridden equals method should cover them.    \r\n\t\t */\r\n\t}\r\n\t\r\n\r\n\r\n","title":"Eclipse Ide Java Debug Step into or step over , giving &quot; does not allow modifications too source attachments &#39; error","body":"<p>Hello So I am debugging into this code by 'step into or even step over' but I face a\n&quot;The jar of this class file belongs to container 'Junit4' which does not allow modifications too source attachments of it's entries.&quot;</p>\n<p>when I step into or step over. The code itself is fully functional , maybe it has something to do with eclipse . I am using MacBook Air m1 for my eclipse java.</p>\n<p>Line 'assertEquals(u1, u2) is the issue part when I debug . When I step into or step over that line I face the &quot;source attachments ' issue. I have tried reinstalling eclipse multiple times and it does not work. I even tried it on my brother laptops who has the same m1 air as me and it has the same issue as well.</p>\n<p>Here is also a picture of the error in eclipse : <a href=\"https://i.stack.imgur.com/hL8RD.jpg\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/hL8RD.jpg</a></p>\n<pre><code>@Test\npublic void test_unit_03() {\n    /*\n     * Create three new units with their intended functions and dimensions. \n     */\n    Unit u1 = new Unit(&quot;Master Bedroom&quot;, 14, 9);\n    Unit u2 = new Unit(&quot;Master Bedroom&quot;, 18, 7);\n    Unit u3 = new Unit(&quot;Master Bedroom&quot;, 18, 8);\n    Unit u4 = new Unit(&quot;Office&quot;, 18, 7); \n    \n    assertEquals(&quot;A unit of 126 square feet (14' wide and 9' long) functioning as Master Bedroom&quot;, u1.toString());\n    assertEquals(&quot;A unit of 126 square feet (18' wide and 7' long) functioning as Master Bedroom&quot;, u2.toString());\n    assertEquals(&quot;A unit of 144 square feet (18' wide and 8' long) functioning as Master Bedroom&quot;, u3.toString());\n    assertEquals(&quot;A unit of 126 square feet (18' wide and 7' long) functioning as Office&quot;, u4.toString());\n    \n    /*\n     * Two units are considered equal if their intended functions are the same (case-sensitive)\n     *  and the areas (in square feet) are the same (even if the dimensions may be different). \n     */\n    assertEquals(u1, u2);\n//  assertTrue(u1.equals(u2));\n    /* Note. Result of assertNotEquals is just the opposite to assertEquals. */\n    assertNotEquals(u1, u3);\n    assertNotEquals(u1, u4);\n    assertNotEquals(u2, u3);\n    assertNotEquals(u2, u4);\n    \n    /* \n     * The above assertions do not cover all cases of the equals method as discussed in the lecture.\n     * Your implementation of the overridden equals method should cover them.    \n     */\n}\n</code></pre>\n"},{"tags":["java","hibernate"],"answers":[{"tags":[],"owner":{"account_id":12680329,"reputation":119,"user_id":9214314,"display_name":"G-programmer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1637254009,"creation_date":1637254009,"answer_id":70023668,"question_id":70011833,"body_markdown":"i&#39;ve solved it, i hope it helps\r\n\r\n    @Override\r\n    \tpublic boolean deleteCourse(int id) {\r\n    \t\tSession currentSession = entityManager.unwrap(Session.class);\r\n    \t\tCourses course = currentSession.load(Courses.class, id);\r\n    \t\t//course.getEstudiantes().forEach(u -&gt; u.getCourses().remove(course));\r\n    \t\t\r\n    \t\tfor(Student student : course.getEstudiantes()) {\r\n    \t\t\tstudent.getCourses().remove(course);\r\n    \t\t}\r\n    \t\tcurrentSession.save(course);\r\n    \t\tif(course.getId() == null)\r\n    \t\t\treturn true;\r\n    \t\t\r\n    \t\telse\r\n    \t\t\treturn false;\r\n    \t}","title":"iterator error problem in Hibernate java.util.ConcurrentModificationException: null","body":"<p>i've solved it, i hope it helps</p>\n<pre><code>@Override\n    public boolean deleteCourse(int id) {\n        Session currentSession = entityManager.unwrap(Session.class);\n        Courses course = currentSession.load(Courses.class, id);\n        //course.getEstudiantes().forEach(u -&gt; u.getCourses().remove(course));\n        \n        for(Student student : course.getEstudiantes()) {\n            student.getCourses().remove(course);\n        }\n        currentSession.save(course);\n        if(course.getId() == null)\n            return true;\n        \n        else\n            return false;\n    }\n</code></pre>\n"}],"owner":{"account_id":12680329,"reputation":119,"user_id":9214314,"display_name":"G-programmer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":335,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70023668,"answer_count":1,"score":0,"last_activity_date":1637254009,"creation_date":1637184729,"question_id":70011833,"body_markdown":"I am trying to delete all the elements that are in course_students but I get an exception, it only lets me delete the first one.How could I delete all the elements from the association, even try using iterators.if there is any example it would help me a lot.\r\n\r\n\r\nhere is my code, it works fine except when i try to delete more asocciations\r\n\r\n    @Override\r\n    public boolean deleteCourse(int id) {\r\n    Session currentSession = entityManager.unwrap(Session.class);\r\n    Courses course = currentSession.load(Courses.class, id);\r\n\r\n    for(Student student : course.getEstudiantes()) {\r\n        course.removeStudent(student);\r\n    }\r\n\r\n    currentSession.delete(course);\r\n    \r\n    if(course.getId() == null)\r\n        return true;\r\n    \r\n    else\r\n        return false;\r\n}\r\n\r\nClass courses\r\n\r\n    @Entity\r\n    @Table(name = &quot;courses&quot;)\r\n    public class Courses {\r\n    \r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        @Column(name=&quot;id&quot;)\r\n        private Integer id;\r\n        @Column\r\n        private String nombre;\r\n        @Column\r\n        private String descripcion;\r\n        \r\n        @ManyToMany(mappedBy = &quot;courses&quot;)\r\n        private Set&lt;Student&gt; Estudiantes = new HashSet&lt;Student&gt;();\r\n        \r\n        public Courses() {\r\n        }\r\n    \r\n        public Integer getId() {\r\n            return id;\r\n        }\r\n    \r\n        public void setId(Integer id) {\r\n            this.id = id;\r\n        }\r\n    \r\n        public String getNombre() {\r\n            return nombre;\r\n        }\r\n    \r\n        public void setNombre(String nombre) {\r\n            this.nombre = nombre;\r\n        }\r\n    \r\n        public String getDescripcion() {\r\n            return descripcion;\r\n        }\r\n    \r\n        public void setDescripcion(String descripcion) {\r\n            this.descripcion = descripcion;\r\n        }\r\n    \r\n        public Set&lt;Student&gt; getEstudiantes() {\r\n            return Estudiantes;\r\n        }\r\n    \r\n        public void setEstudiantes(Set&lt;Student&gt; estudiantes) {\r\n            Estudiantes = estudiantes;\r\n        }\r\n        \r\n        public void removeStudent(Student student) {\r\n            this.Estudiantes.remove(student);\r\n            student.getCourses().remove(this);\r\n        }\r\n        \r\n    \r\n    }\r\n\r\nexception\r\n\r\n\r\n    java.util.ConcurrentModificationException: null\r\n    \tat java.util.HashMap$HashIterator.nextNode(HashMap.java:1445) ~[na:1.8.0_281]\r\n    \tat java.util.HashMap$KeyIterator.next(HashMap.java:1469) ~[na:1.8.0_281]\r\n    \tat org.hibernate.collection.internal.AbstractPersistentCollection$IteratorProxy.next(AbstractPersistentCollection.java:887) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n    \tat learnwithus.dao.CoursesDAOImpl.deleteCourse(CoursesDAOImpl.java:40) ~[classes/:na]\r\n    \tat learnwithus.dao.CoursesDAOImpl$$FastClassBySpringCGLIB$$bc75a7c.invoke(&lt;generated&gt;) ~[classes/:na]\r\n    \tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.3.12.jar:5.3.12]\r\n    \tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:783) ~[spring-aop-5.3.12.jar:5.3.12]\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.3.12.jar:5.3.12]\r\n    \tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:753) ~[spring-aop-5.3.12.jar:5.3.12]\r\n    \tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137) ~[spring-tx-5.3.12.jar:5.3.12]\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.12.jar:5.3.12]\r\n    \tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:753) ~[spring-aop-5.3.12.jar:5.3.12]\r\n\r\n\r\n\r\n","title":"iterator error problem in Hibernate java.util.ConcurrentModificationException: null","body":"<p>I am trying to delete all the elements that are in course_students but I get an exception, it only lets me delete the first one.How could I delete all the elements from the association, even try using iterators.if there is any example it would help me a lot.</p>\n<p>here is my code, it works fine except when i try to delete more asocciations</p>\n<pre><code>@Override\npublic boolean deleteCourse(int id) {\nSession currentSession = entityManager.unwrap(Session.class);\nCourses course = currentSession.load(Courses.class, id);\n\nfor(Student student : course.getEstudiantes()) {\n    course.removeStudent(student);\n}\n\ncurrentSession.delete(course);\n\nif(course.getId() == null)\n    return true;\n\nelse\n    return false;\n</code></pre>\n<p>}</p>\n<p>Class courses</p>\n<pre><code>@Entity\n@Table(name = &quot;courses&quot;)\npublic class Courses {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(name=&quot;id&quot;)\n    private Integer id;\n    @Column\n    private String nombre;\n    @Column\n    private String descripcion;\n    \n    @ManyToMany(mappedBy = &quot;courses&quot;)\n    private Set&lt;Student&gt; Estudiantes = new HashSet&lt;Student&gt;();\n    \n    public Courses() {\n    }\n\n    public Integer getId() {\n        return id;\n    }\n\n    public void setId(Integer id) {\n        this.id = id;\n    }\n\n    public String getNombre() {\n        return nombre;\n    }\n\n    public void setNombre(String nombre) {\n        this.nombre = nombre;\n    }\n\n    public String getDescripcion() {\n        return descripcion;\n    }\n\n    public void setDescripcion(String descripcion) {\n        this.descripcion = descripcion;\n    }\n\n    public Set&lt;Student&gt; getEstudiantes() {\n        return Estudiantes;\n    }\n\n    public void setEstudiantes(Set&lt;Student&gt; estudiantes) {\n        Estudiantes = estudiantes;\n    }\n    \n    public void removeStudent(Student student) {\n        this.Estudiantes.remove(student);\n        student.getCourses().remove(this);\n    }\n    \n\n}\n</code></pre>\n<p>exception</p>\n<pre><code>java.util.ConcurrentModificationException: null\n    at java.util.HashMap$HashIterator.nextNode(HashMap.java:1445) ~[na:1.8.0_281]\n    at java.util.HashMap$KeyIterator.next(HashMap.java:1469) ~[na:1.8.0_281]\n    at org.hibernate.collection.internal.AbstractPersistentCollection$IteratorProxy.next(AbstractPersistentCollection.java:887) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at learnwithus.dao.CoursesDAOImpl.deleteCourse(CoursesDAOImpl.java:40) ~[classes/:na]\n    at learnwithus.dao.CoursesDAOImpl$$FastClassBySpringCGLIB$$bc75a7c.invoke(&lt;generated&gt;) ~[classes/:na]\n    at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.3.12.jar:5.3.12]\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:783) ~[spring-aop-5.3.12.jar:5.3.12]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.3.12.jar:5.3.12]\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:753) ~[spring-aop-5.3.12.jar:5.3.12]\n    at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137) ~[spring-tx-5.3.12.jar:5.3.12]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.12.jar:5.3.12]\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:753) ~[spring-aop-5.3.12.jar:5.3.12]\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1637178610,"post_id":70010648,"comment_id":123759622,"body_markdown":"`System.getProperty(&quot;user.name&quot;);` returns the system property for `user.name`. Thus, if we started the program with `java -Duser.name=&quot;foobar&quot; ...`, this call would return `&quot;foobar&quot;`.","body":"<code>System.getProperty(&quot;user.name&quot;);</code> returns the system property for <code>user.name</code>. Thus, if we started the program with <code>java -Duser.name=&quot;foobar&quot; ...</code>, this call would return <code>&quot;foobar&quot;</code>."},{"owner":{"account_id":71985,"reputation":7903,"user_id":208013,"display_name":"Mirek Pluta"},"score":0,"creation_date":1637178775,"post_id":70010648,"comment_id":123759697,"body_markdown":"Do you get proper value when you execute `java -XshowSettings:properties -version\n` ?","body":"Do you get proper value when you execute <code>java -XshowSettings:properties -version </code> ?"},{"owner":{"account_id":20732441,"reputation":1553,"user_id":15224052,"display_name":"Oliver"},"score":0,"creation_date":1637178877,"post_id":70010648,"comment_id":123759745,"body_markdown":"The values returned by most properties are operating system-dependent. Perhaps you have some security settings prohibiting access to whatever or wherever Java tries to acquire the value for `user.name` from.","body":"The values returned by most properties are operating system-dependent. Perhaps you have some security settings prohibiting access to whatever or wherever Java tries to acquire the value for <code>user.name</code> from."},{"owner":{"account_id":11828002,"reputation":103,"user_id":8655469,"accept_rate":50,"display_name":"a.p. patel"},"score":0,"creation_date":1637178878,"post_id":70010648,"comment_id":123759746,"body_markdown":"When I run locally, I get username value but after deployment, it is not showing anything.","body":"When I run locally, I get username value but after deployment, it is not showing anything."},{"owner":{"account_id":15064163,"reputation":13519,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1637179133,"post_id":70010648,"comment_id":123759850,"body_markdown":"What device do you deploy the program to?","body":"What device do you deploy the program to?"},{"owner":{"account_id":11828002,"reputation":103,"user_id":8655469,"accept_rate":50,"display_name":"a.p. patel"},"score":0,"creation_date":1637179147,"post_id":70010648,"comment_id":123759861,"body_markdown":"Thanks, @Oliver, How I can change that setting?","body":"Thanks, @Oliver, How I can change that setting?"},{"owner":{"account_id":11828002,"reputation":103,"user_id":8655469,"accept_rate":50,"display_name":"a.p. patel"},"score":0,"creation_date":1637179275,"post_id":70010648,"comment_id":123759910,"body_markdown":"@dan1st I deployed to the OCP platform.","body":"@dan1st I deployed to the OCP platform."},{"owner":{"account_id":20732441,"reputation":1553,"user_id":15224052,"display_name":"Oliver"},"score":0,"creation_date":1637179722,"post_id":70010648,"comment_id":123760075,"body_markdown":"@a.p.patel What is OCP? What OS is it running? Is the application in a container, such as Tomcat? Is it an applet?","body":"@a.p.patel What is OCP? What OS is it running? Is the application in a container, such as Tomcat? Is it an applet?"},{"owner":{"account_id":22425724,"reputation":1060,"user_id":16632363,"display_name":"user16632363"},"score":1,"creation_date":1637180594,"post_id":70010648,"comment_id":123760401,"body_markdown":"OCP = RedHat OpenShift Container Platform, basically a kubernetes-ish thing.   Chances are good it&#39;s a privilege/protection issue.","body":"OCP = RedHat OpenShift Container Platform, basically a kubernetes-ish thing.   Chances are good it&#39;s a privilege/protection issue."},{"owner":{"account_id":11828002,"reputation":103,"user_id":8655469,"accept_rate":50,"display_name":"a.p. patel"},"score":0,"creation_date":1637181414,"post_id":70010648,"comment_id":123760679,"body_markdown":"@user16632363 Is there any way I can configure that?","body":"@user16632363 Is there any way I can configure that?"},{"owner":{"account_id":22425724,"reputation":1060,"user_id":16632363,"display_name":"user16632363"},"score":0,"creation_date":1637182467,"post_id":70010648,"comment_id":123760999,"body_markdown":"Sorry, all I know about OCP is to answer &quot;it&#39;s a privilege issue&quot; - the default protections seem to be tighter than on other kubernetes providers.","body":"Sorry, all I know about OCP is to answer &quot;it&#39;s a privilege issue&quot; - the default protections seem to be tighter than on other kubernetes providers."},{"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"score":1,"creation_date":1637183623,"post_id":70010648,"comment_id":123761364,"body_markdown":"What are you trying to achieve by reading that username?","body":"What are you trying to achieve by reading that username?"}],"answers":[{"tags":[],"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1637252932,"creation_date":1637252932,"answer_id":70023437,"question_id":70010648,"body_markdown":"Java has to read the name user it is currently running under from the OS environment. If the OS environment doesn&#39;t provide a name for that user, it sets the `user.name` property to &quot;?&quot; on Unix-like systems and to &quot;unknown&quot; on Windows systems.\r\n\r\nThe code fragment on [Unix systems](https://github.com/openjdk/jdk17u/blob/master/src/java.base/unix/native/libjava/java_props_md.c#L484)  is:\r\n\r\n        struct passwd *pwent = getpwuid(getuid());\r\n        sprops.user_name = pwent ? strdup(pwent-&gt;pw_name) : &quot;?&quot;;\r\n\r\nand on [Windows systems](https://github.com/openjdk/jdk17u/blob/master/src/java.base/windows/native/libjava/java_props_md.c#L632) it is:\r\n\r\n        // ... various variants to try to read the user name\r\n        // followed by\r\n            sprops.user_name = (uname != NULL) ? uname : L&quot;unknown&quot;;\r\n\r\n----\r\nIf your code runs in a container, the container defines the uid that is used to run your code.\r\n\r\nIf the system that runs the container doesn&#39;t have a user name for that uid (or if the system or the container runtime doesn&#39;t allow to access the user name from within the container) then this is what you will see.","title":"System.getProperty(&quot;user.name&quot;) returns &quot;?&quot;","body":"<p>Java has to read the name user it is currently running under from the OS environment. If the OS environment doesn't provide a name for that user, it sets the <code>user.name</code> property to &quot;?&quot; on Unix-like systems and to &quot;unknown&quot; on Windows systems.</p>\n<p>The code fragment on <a href=\"https://github.com/openjdk/jdk17u/blob/master/src/java.base/unix/native/libjava/java_props_md.c#L484\" rel=\"nofollow noreferrer\">Unix systems</a>  is:</p>\n<pre><code>    struct passwd *pwent = getpwuid(getuid());\n    sprops.user_name = pwent ? strdup(pwent-&gt;pw_name) : &quot;?&quot;;\n</code></pre>\n<p>and on <a href=\"https://github.com/openjdk/jdk17u/blob/master/src/java.base/windows/native/libjava/java_props_md.c#L632\" rel=\"nofollow noreferrer\">Windows systems</a> it is:</p>\n<pre><code>    // ... various variants to try to read the user name\n    // followed by\n        sprops.user_name = (uname != NULL) ? uname : L&quot;unknown&quot;;\n</code></pre>\n<hr />\n<p>If your code runs in a container, the container defines the uid that is used to run your code.</p>\n<p>If the system that runs the container doesn't have a user name for that uid (or if the system or the container runtime doesn't allow to access the user name from within the container) then this is what you will see.</p>\n"}],"owner":{"account_id":11828002,"reputation":103,"user_id":8655469,"accept_rate":50,"display_name":"a.p. patel"},"comment_count":12,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":765,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1637253291,"creation_date":1637178501,"question_id":70010648,"body_markdown":"I am trying to use `System.getProperty(&quot;user.name&quot;)` in my Java Code to get the username for the web services. Somehow it is returning &quot;?&quot; (Question Mark) \r\n\r\nWhat can be the main issue?\r\n\r\nIf someone calls services do we need to pass the username from the service instead of using system properties? ","title":"System.getProperty(&quot;user.name&quot;) returns &quot;?&quot;","body":"<p>I am trying to use <code>System.getProperty(&quot;user.name&quot;)</code> in my Java Code to get the username for the web services. Somehow it is returning &quot;?&quot; (Question Mark)</p>\n<p>What can be the main issue?</p>\n<p>If someone calls services do we need to pass the username from the service instead of using system properties?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":238684,"reputation":22543,"user_id":507738,"accept_rate":71,"display_name":"MC Emperor"},"score":0,"creation_date":1637251126,"post_id":70022925,"comment_id":123781587,"body_markdown":"*&quot;Since MyClass is not marked as `public`, it therefore has `protected` and thus is not accessible outside the package&quot;* — Well, the absence of an access modifier is called *package-private*, not *protected*.","body":"<i>&quot;Since MyClass is not marked as <code>public</code>, it therefore has <code>protected</code> and thus is not accessible outside the package&quot;</i> — Well, the absence of an access modifier is called <i>package-private</i>, not <i>protected</i>."},{"owner":{"account_id":213468,"reputation":103486,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1637253237,"post_id":70022925,"comment_id":123782525,"body_markdown":"A default or protected class may not be referenced using that type name outside its package, but instances of such a class are definitely usable outside that package, and public methods can be called assuming they are defined in an interface implemented by that class or in a super-class.","body":"A default or protected class may not be referenced using that type name outside its package, but instances of such a class are definitely usable outside that package, and public methods can be called assuming they are defined in an interface implemented by that class or in a super-class."}],"owner":{"account_id":2015058,"reputation":5734,"user_id":3224967,"accept_rate":72,"display_name":"mherzl"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1637250959,"answer_count":0,"score":0,"last_activity_date":1637253099,"creation_date":1637250857,"question_id":70022925,"body_markdown":"Consider the following `protected` class containing a `public` method.\r\n\r\n    package my.package;\r\n    \r\n    class MyClass {\r\n      public void myMethod() {\r\n        // myMethod implementation\r\n      }\r\n    }\r\n\r\nSince MyClass is not marked as `public`, it therefore has `protected` access and thus is not accessible outside the package. However, its method `myMethod` is marked as `public`, signifying that it is accessible outside the class.\r\n\r\nSince `myMethod` presumably cannot be accessed without accessing `MyClass`, why is it possible to mark `myMethod` as public? Is it because someone might extend `MyClass` from within the package, with a custom `public` class for use outside the package? For example:\r\n\r\n    package my.package;\r\n    \r\n    public MyPublicClass extends MyClass {\r\n      // MyPublicClass implementation\r\n    }\r\n\r\nIf so, is there any other use for a `public` method defined within a `protected` class?\r\n","title":"Why is it possible to define a public-access method in a protected-access class?","body":"<p>Consider the following <code>protected</code> class containing a <code>public</code> method.</p>\n<pre><code>package my.package;\n\nclass MyClass {\n  public void myMethod() {\n    // myMethod implementation\n  }\n}\n</code></pre>\n<p>Since MyClass is not marked as <code>public</code>, it therefore has <code>protected</code> access and thus is not accessible outside the package. However, its method <code>myMethod</code> is marked as <code>public</code>, signifying that it is accessible outside the class.</p>\n<p>Since <code>myMethod</code> presumably cannot be accessed without accessing <code>MyClass</code>, why is it possible to mark <code>myMethod</code> as public? Is it because someone might extend <code>MyClass</code> from within the package, with a custom <code>public</code> class for use outside the package? For example:</p>\n<pre><code>package my.package;\n\npublic MyPublicClass extends MyClass {\n  // MyPublicClass implementation\n}\n</code></pre>\n<p>If so, is there any other use for a <code>public</code> method defined within a <code>protected</code> class?</p>\n"},{"tags":["java","postgresql","spring-mvc","spring-jdbc","jdbctemplate"],"comments":[{"owner":{"account_id":2563377,"reputation":7174,"user_id":2224047,"display_name":"Nikolai  Shevchenko"},"score":0,"creation_date":1635835913,"post_id":69806052,"comment_id":123391854,"body_markdown":"What is the exact place where NullPointerException occurs? Please add stacktrace and the sample row data that you are trying to fetch. The probable error that some of fetched values (that come from DB) are NULL, and thus cat&#39;t be converted to primitive arguments of UserLogin constructor - `int usercode` or `boolean useraccess`. Primitive values can&#39;t hold `null`, so if `null` is possible it&#39;s better to use wrappers (Integer and Boolean)","body":"What is the exact place where NullPointerException occurs? Please add stacktrace and the sample row data that you are trying to fetch. The probable error that some of fetched values (that come from DB) are NULL, and thus cat&#39;t be converted to primitive arguments of UserLogin constructor - <code>int usercode</code> or <code>boolean useraccess</code>. Primitive values can&#39;t hold <code>null</code>, so if <code>null</code> is possible it&#39;s better to use wrappers (Integer and Boolean)"},{"owner":{"account_id":18569250,"reputation":135,"user_id":13583883,"display_name":"inquisitive"},"score":0,"creation_date":1635836573,"post_id":69806052,"comment_id":123392055,"body_markdown":"@NikolaiShevchenko I have updated my question, I don&#39;t have any null values in the mentioned columns","body":"@NikolaiShevchenko I have updated my question, I don&#39;t have any null values in the mentioned columns"},{"owner":{"account_id":4166159,"reputation":951,"user_id":3415090,"display_name":"mohammedkhan"},"score":0,"creation_date":1635849371,"post_id":69806052,"comment_id":123396630,"body_markdown":"This may sound like a silly question, but have you debugged the code to ensure `userid` is not null?","body":"This may sound like a silly question, but have you debugged the code to ensure <code>userid</code> is not null?"},{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1635863249,"post_id":69806052,"comment_id":123402304,"body_markdown":"Add `@Autowired` to your `JdbcTemplate` field or make the field `final` and add a constructor to assign the `JdbcTemplate` through constructor injection.","body":"Add <code>@Autowired</code> to your <code>JdbcTemplate</code> field or make the field <code>final</code> and add a constructor to assign the <code>JdbcTemplate</code> through constructor injection."}],"answers":[{"tags":[],"owner":{"account_id":8794729,"reputation":15297,"user_id":6572971,"display_name":"Alien"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1637252372,"creation_date":1635864513,"answer_id":69812369,"question_id":69806052,"body_markdown":"Where do you initialise jdbcTemplate object? So the actual null pointer exception is at this object.\r\n\r\nUse @Autowired or do the constructor injection.\r\n\r\n    @Autowired\r\n    private JdbcTemplate jdbcTemplate","title":"jdbcTemplate.queryForObject gives java.lang.NullPointerException","body":"<p>Where do you initialise jdbcTemplate object? So the actual null pointer exception is at this object.</p>\n<p>Use @Autowired or do the constructor injection.</p>\n<pre><code>@Autowired\nprivate JdbcTemplate jdbcTemplate\n</code></pre>\n"}],"owner":{"account_id":18569250,"reputation":135,"user_id":13583883,"display_name":"inquisitive"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":744,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1637252642,"answer_count":1,"score":0,"last_activity_date":1637252372,"creation_date":1635833517,"question_id":69806052,"body_markdown":"I am trying to query for an object from the database but I keep on getting \r\na **java.lang.NullPointerException** error even when the data is present in the database. How do I fix this?\r\n\r\nUserLogin POJO Class\r\n```\r\npublic class UserLogin {\r\n\r\n    private int usercode;\r\n    private String userid;\r\n    private String userpassword;\r\n    private String userrole;\r\n    private String username;\r\n    private boolean useraccess;\r\n\r\n    public UserLogin() {\r\n    }\r\n\r\n    public UserLogin(int usercode, String userid, String userpassword, String userrole, String username, boolean useraccess) {\r\n        this.usercode = usercode;\r\n        this.userid = userid;\r\n        this.userpassword = userpassword;\r\n        this.userrole = userrole;\r\n        this.username = username;\r\n        this.useraccess = useraccess;\r\n    }\r\n//getters and setters...\r\n```\r\n\r\nDAO Class:\r\n```\r\n@Transactional\r\n@Repository(&quot;daoUser&quot;)\r\npublic class DaoUser{\r\n\r\n\tprivate JdbcTemplate jdbcTemplate;\r\n\r\n    public UserLogin getUserlogin(final String userid) {\r\n\t\tUserLogin user = new UserLogin();\r\n\t\ttry {\r\n\t\t\tString sql = &quot;SELECT usercode, userid, userpassword, userrole, username, useraccess FROM myschema.userlogin WHERE userid=?&quot;;\r\n\t\t\tObject[] criteria = { userid };\r\n\t\t\tuser = jdbcTemplate.queryForObject(sql, BeanPropertyRowMapper.newInstance(UserLogin.class), criteria);\r\n\t\t\t\r\n\t\t} catch (Exception e) {\r\n\t\t\tSystem.out.println(&quot;Error in DaoUser.getUserlogin(final String userid) : &quot; + e);\r\n\t\t}\r\n\t\treturn user;\r\n\t}\r\n}\r\n```\r\n\r\nThe Error:\r\n```\r\nError in DaoUserManagement.getUserlogin(final String userid) : java.lang.NullPointerException\r\n```\r\n\r\nThe Data I&#39;m trying to fetch:\r\n```\r\nusercode\tuserid\tuserpassword\tuserrole\tusername\tuseraccess\r\n\r\n3\t\t    userA\tuserpassword\tA\t\t\tusername\ttrue\r\n```","title":"jdbcTemplate.queryForObject gives java.lang.NullPointerException","body":"<p>I am trying to query for an object from the database but I keep on getting\na <strong>java.lang.NullPointerException</strong> error even when the data is present in the database. How do I fix this?</p>\n<p>UserLogin POJO Class</p>\n<pre><code>public class UserLogin {\n\n    private int usercode;\n    private String userid;\n    private String userpassword;\n    private String userrole;\n    private String username;\n    private boolean useraccess;\n\n    public UserLogin() {\n    }\n\n    public UserLogin(int usercode, String userid, String userpassword, String userrole, String username, boolean useraccess) {\n        this.usercode = usercode;\n        this.userid = userid;\n        this.userpassword = userpassword;\n        this.userrole = userrole;\n        this.username = username;\n        this.useraccess = useraccess;\n    }\n//getters and setters...\n</code></pre>\n<p>DAO Class:</p>\n<pre><code>@Transactional\n@Repository(&quot;daoUser&quot;)\npublic class DaoUser{\n\n    private JdbcTemplate jdbcTemplate;\n\n    public UserLogin getUserlogin(final String userid) {\n        UserLogin user = new UserLogin();\n        try {\n            String sql = &quot;SELECT usercode, userid, userpassword, userrole, username, useraccess FROM myschema.userlogin WHERE userid=?&quot;;\n            Object[] criteria = { userid };\n            user = jdbcTemplate.queryForObject(sql, BeanPropertyRowMapper.newInstance(UserLogin.class), criteria);\n            \n        } catch (Exception e) {\n            System.out.println(&quot;Error in DaoUser.getUserlogin(final String userid) : &quot; + e);\n        }\n        return user;\n    }\n}\n</code></pre>\n<p>The Error:</p>\n<pre><code>Error in DaoUserManagement.getUserlogin(final String userid) : java.lang.NullPointerException\n</code></pre>\n<p>The Data I'm trying to fetch:</p>\n<pre><code>usercode    userid  userpassword    userrole    username    useraccess\n\n3           userA   userpassword    A           username    true\n</code></pre>\n"},{"tags":["java","profiling"],"comments":[{"owner":{"account_id":900581,"reputation":46749,"user_id":936832,"accept_rate":75,"display_name":"Ingo Kegel"},"score":1,"creation_date":1637254480,"post_id":70023224,"comment_id":123783104,"body_markdown":"Stackoverflow does not allow tool recommendations, so somebody will probably close this question. But I would recommend to just try the standard profilers (JProfiler, VisualVM, Yourkit) , they can all open HPROF snapshots.","body":"Stackoverflow does not allow tool recommendations, so somebody will probably close this question. But I would recommend to just try the standard profilers (JProfiler, VisualVM, Yourkit) , they can all open HPROF snapshots."},{"owner":{"account_id":1995212,"reputation":801,"user_id":1788318,"accept_rate":86,"display_name":"Federico Bonelli"},"score":1,"creation_date":1637254724,"post_id":70023224,"comment_id":123783212,"body_markdown":"thank you @IngoKegel, yeah I know that it doesn&#39;t allow this but I couldn&#39;t find an answer googling it, I wish there was a StackExchange site for tool recommendations","body":"thank you @IngoKegel, yeah I know that it doesn&#39;t allow this but I couldn&#39;t find an answer googling it, I wish there was a StackExchange site for tool recommendations"}],"owner":{"account_id":1995212,"reputation":801,"user_id":1788318,"accept_rate":86,"display_name":"Federico Bonelli"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":62,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1637252063,"creation_date":1637252063,"question_id":70023224,"body_markdown":"I&#39;ve been using CPU profilers for both Java and Python lately, and in Python we have SnakeViz, a nice web based tool that visualizes cProfile dumps.\r\n\r\nIn Java I&#39;ve been using hprof and honest-profiler to generate my dumps, and this project to visualize them: https://github.com/cykl/hprof2flamegraph\r\n\r\nThe flamegraph itself is a great tool, but it is a single interactive SVG which is **very** heavy on my browser, especially for big projects.\r\n\r\nIs there anything more light-weight for visualizing Java hprof dumps?   ","title":"Snakeviz-like visual profiler for Java hprof or honest profiler","body":"<p>I've been using CPU profilers for both Java and Python lately, and in Python we have SnakeViz, a nice web based tool that visualizes cProfile dumps.</p>\n<p>In Java I've been using hprof and honest-profiler to generate my dumps, and this project to visualize them: <a href=\"https://github.com/cykl/hprof2flamegraph\" rel=\"nofollow noreferrer\">https://github.com/cykl/hprof2flamegraph</a></p>\n<p>The flamegraph itself is a great tool, but it is a single interactive SVG which is <strong>very</strong> heavy on my browser, especially for big projects.</p>\n<p>Is there anything more light-weight for visualizing Java hprof dumps?</p>\n"},{"tags":["java","spring","spring-boot","sonarqube","code-coverage"],"comments":[{"owner":{"account_id":3965515,"reputation":2640,"user_id":3271600,"accept_rate":27,"display_name":"GvSharma"},"score":0,"creation_date":1637253812,"post_id":70023143,"comment_id":123782796,"body_markdown":"this may help you https://docs.sonarqube.org/latest/project-administration/narrowing-the-focus/#:~:text=To%20use%20exclusions%20to%20analyze%20only%20the%20specified%20subset(s,Settings%20%3E%20Analysis%20Scope%20%3E%20Files.&amp;text=You%20can%20set%20these%20properties%20at%20both%20the%20project%20and%20global%20levels.","body":"this may help you <a href=\"https://docs.sonarqube.org/latest/project-administration/narrowing-the-focus/#:~:text=To%20use%20exclusions%20to%20analyze%20only%20the%20specified%20subset(s,Settings%20%3E%20Analysis%20Scope%20%3E%20Files.&amp;text=You%20can%20set%20these%20properties%20at%20both%20the%20project%20and%20global%20levels\" rel=\"nofollow noreferrer\">docs.sonarqube.org/latest/project-administration/&hellip;</a>."},{"owner":{"account_id":8247852,"reputation":890,"user_id":6203414,"display_name":"mkane"},"score":0,"creation_date":1637254414,"post_id":70023143,"comment_id":123783075,"body_markdown":"Not sure of your setup but could you try &lt;sonar.exclusions&gt;src/main/java/com/org/projectname/model/*&lt;/sonar.exclusions&gt;","body":"Not sure of your setup but could you try &lt;sonar.exclusions&gt;src/main/java/com/org/projectname/model/*&lt;&zwnj;&#8203;/sonar.exclusions&gt;"},{"owner":{"account_id":6284,"reputation":14589,"user_id":10508,"accept_rate":53,"display_name":"David M. Karr"},"score":2,"creation_date":1637268228,"post_id":70023143,"comment_id":123788010,"body_markdown":"If you&#39;re getting 0% coverage in SonarQube, your exclusions won&#39;t make any difference.  I notice that you&#39;re referencing the &quot;jacoco-ut.exec&quot; file.  At some point the &quot;exec&quot; format was deprecated in favor of the &quot;xml&quot; format, which has to go with setting a particular sonarqube property (sonar.coverage.jacoco.xmlReportPaths). You might want to look at your jacoco results in your build artifacts and see whether those are reporting 0% coverage. It&#39;s likely that you&#39;re getting non-zero coverage from jacoco, just not reporting it properly to sonarqube.","body":"If you&#39;re getting 0% coverage in SonarQube, your exclusions won&#39;t make any difference.  I notice that you&#39;re referencing the &quot;jacoco-ut.exec&quot; file.  At some point the &quot;exec&quot; format was deprecated in favor of the &quot;xml&quot; format, which has to go with setting a particular sonarqube property (sonar.coverage.jacoco.xmlReportPaths). You might want to look at your jacoco results in your build artifacts and see whether those are reporting 0% coverage. It&#39;s likely that you&#39;re getting non-zero coverage from jacoco, just not reporting it properly to sonarqube."}],"owner":{"account_id":17385459,"reputation":194,"user_id":15006167,"display_name":"user15006167"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1327,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1637251738,"creation_date":1637251738,"question_id":70023143,"body_markdown":"I been working on a SpringBoot project and I am trying to exclude some of the packages from the SonarQube code coverage.\r\n\r\nThe package that I want to exclude is **com.org.projectname.model**. I tried, `&lt;sonar.exclusions&gt;**/model/*.java&lt;/sonar.exclusions&gt;` and `&lt;sonar.coverage.exclusions&gt;**/model/*.java&lt;/sonar.coverage.exclusions&gt;`, sill SonarQube is showing 0% coverage, why is that?. Also I am curious that, do we need to have any specific dependency to use &lt;sonar.exclusions&gt;, as I am not using any additional dependency related to SonarQube? \r\n\r\nor is there any other way to achieve this?\r\n\r\n    &lt;properties&gt;\r\n           &lt;sonar.exclusions&gt;\r\n              **/model/*.java\r\n            &lt;/sonar.exclusions&gt;\r\n    &lt;/properties&gt;\r\n    \r\n    &lt;plugin&gt;\r\n       &lt;groupId&gt;org.jacoco&lt;/groupId&gt;\r\n       &lt;artifactId&gt;jacoco-maven-plugin&lt;/artifactId&gt;\r\n       &lt;version&gt;0.8.6&lt;/version&gt;\r\n       &lt;configuration&gt;\r\n          &lt;excludes&gt;\r\n          \r\n          &lt;/excludes&gt;\r\n       &lt;/configuration&gt;\r\n       &lt;executions&gt;\r\n          &lt;execution&gt;\r\n             &lt;id&gt;pre-unit-test&lt;/id&gt;\r\n             &lt;goals&gt;\r\n                &lt;goal&gt;prepare-agent&lt;/goal&gt;\r\n             &lt;/goals&gt;\r\n             &lt;configuration&gt;\r\n                &lt;destFile&gt;target/coverage-data/jacoco-ut.exec&lt;/destFile&gt;\r\n                &lt;propertyName&gt;surefireArgLine&lt;/propertyName&gt;\r\n             &lt;/configuration&gt;\r\n          &lt;/execution&gt;\r\n          &lt;execution&gt;\r\n             &lt;id&gt;post-unit-test&lt;/id&gt;\r\n             &lt;phase&gt;test&lt;/phase&gt;\r\n             &lt;goals&gt;\r\n                &lt;goal&gt;report&lt;/goal&gt;\r\n             &lt;/goals&gt;\r\n             &lt;configuration&gt;\r\n                &lt;dataFile&gt;target/coverage-data/jacoco-ut.exec&lt;/dataFile&gt;\r\n                &lt;outputDirectory&gt;target/coverage-reports/jacoco-ut&lt;/outputDirectory&gt;\r\n             &lt;/configuration&gt;\r\n          &lt;/execution&gt;\r\n       &lt;/executions&gt;\r\n    &lt;/plugin&gt;","title":"SonarQube coverage showing 0% even after exclusion","body":"<p>I been working on a SpringBoot project and I am trying to exclude some of the packages from the SonarQube code coverage.</p>\n<p>The package that I want to exclude is <strong>com.org.projectname.model</strong>. I tried, <code>&lt;sonar.exclusions&gt;**/model/*.java&lt;/sonar.exclusions&gt;</code> and <code>&lt;sonar.coverage.exclusions&gt;**/model/*.java&lt;/sonar.coverage.exclusions&gt;</code>, sill SonarQube is showing 0% coverage, why is that?. Also I am curious that, do we need to have any specific dependency to use &lt;sonar.exclusions&gt;, as I am not using any additional dependency related to SonarQube?</p>\n<p>or is there any other way to achieve this?</p>\n<pre><code>&lt;properties&gt;\n       &lt;sonar.exclusions&gt;\n          **/model/*.java\n        &lt;/sonar.exclusions&gt;\n&lt;/properties&gt;\n\n&lt;plugin&gt;\n   &lt;groupId&gt;org.jacoco&lt;/groupId&gt;\n   &lt;artifactId&gt;jacoco-maven-plugin&lt;/artifactId&gt;\n   &lt;version&gt;0.8.6&lt;/version&gt;\n   &lt;configuration&gt;\n      &lt;excludes&gt;\n      \n      &lt;/excludes&gt;\n   &lt;/configuration&gt;\n   &lt;executions&gt;\n      &lt;execution&gt;\n         &lt;id&gt;pre-unit-test&lt;/id&gt;\n         &lt;goals&gt;\n            &lt;goal&gt;prepare-agent&lt;/goal&gt;\n         &lt;/goals&gt;\n         &lt;configuration&gt;\n            &lt;destFile&gt;target/coverage-data/jacoco-ut.exec&lt;/destFile&gt;\n            &lt;propertyName&gt;surefireArgLine&lt;/propertyName&gt;\n         &lt;/configuration&gt;\n      &lt;/execution&gt;\n      &lt;execution&gt;\n         &lt;id&gt;post-unit-test&lt;/id&gt;\n         &lt;phase&gt;test&lt;/phase&gt;\n         &lt;goals&gt;\n            &lt;goal&gt;report&lt;/goal&gt;\n         &lt;/goals&gt;\n         &lt;configuration&gt;\n            &lt;dataFile&gt;target/coverage-data/jacoco-ut.exec&lt;/dataFile&gt;\n            &lt;outputDirectory&gt;target/coverage-reports/jacoco-ut&lt;/outputDirectory&gt;\n         &lt;/configuration&gt;\n      &lt;/execution&gt;\n   &lt;/executions&gt;\n&lt;/plugin&gt;\n</code></pre>\n"},{"tags":["java","cytoscape.js","cytoscape"],"comments":[{"owner":{"account_id":3875331,"reputation":3564,"user_id":3209523,"display_name":"canbax"},"score":0,"creation_date":1636113763,"post_id":69850270,"comment_id":123476198,"body_markdown":"cytoscape.js is javascript library different from cytoscape","body":"cytoscape.js is javascript library different from cytoscape"}],"answers":[{"tags":[],"owner":{"account_id":6157002,"reputation":1322,"user_id":4799667,"display_name":"Scooter Morris"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637251547,"creation_date":1637251547,"answer_id":70023102,"question_id":69850270,"body_markdown":"OK, so you have a number of java JDKs installed, but it&#39;s not clear which of these is active.  The easiest way to determine that is to open up a terminal window and type &quot;which java&quot;.  That should give you a pointer to the actual java binary (it&#39;s /Library/Java/JavaVirtualMachines/adoptopenjdk-11.jdk/Contents/Home/bin/java on my Mac).  If it doesn&#39;t come back with anything, then Java didn&#39;t get correctly installed.  You might try explicitly setting your JAVA_HOME to the correct JDK (/Library/Java/JavaVirtualMachines/adoptopenjdk-11.jdk/Contents/Home) and seeing if that works.\r\n\r\n-- scooter\r\n","title":"Cytoscape cannot start","body":"<p>OK, so you have a number of java JDKs installed, but it's not clear which of these is active.  The easiest way to determine that is to open up a terminal window and type &quot;which java&quot;.  That should give you a pointer to the actual java binary (it's /Library/Java/JavaVirtualMachines/adoptopenjdk-11.jdk/Contents/Home/bin/java on my Mac).  If it doesn't come back with anything, then Java didn't get correctly installed.  You might try explicitly setting your JAVA_HOME to the correct JDK (/Library/Java/JavaVirtualMachines/adoptopenjdk-11.jdk/Contents/Home) and seeing if that works.</p>\n<p>-- scooter</p>\n"}],"owner":{"account_id":18809943,"reputation":1,"user_id":13718342,"display_name":"calgator1317"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":102,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1637251547,"creation_date":1636100332,"question_id":69850270,"body_markdown":"I wonder if anyone can help me with Cytoscape start issue. It used to fucntiona perfectly but now it can no longer initiate. I reinstall the Cytoscape multiple times. When I ran the checker script (described on troubleshooting page) and &quot;I receive Java is not reachable&quot;. See attached [PICTURE 1][1] I reinstalled Java 11 but still has no luck. Here is my CytoscapeConfiguration folder looks like [PICTURE 2][2]. Thank you all in advance.\r\n\r\nFYI\r\n- MacOS Mojave.\r\n- Cytoscape 3.9.0\r\n\r\nInside &quot;JavaVirtualMachines&quot; directory, there are:\r\n- adoptopenjdk-11.jdk\r\n- jdk-11.0.12.jdk\r\n- jdk-12.0.1.jdk\r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/MW1kL.png\r\n  [2]: https://i.stack.imgur.com/s4jW5.png","title":"Cytoscape cannot start","body":"<p>I wonder if anyone can help me with Cytoscape start issue. It used to fucntiona perfectly but now it can no longer initiate. I reinstall the Cytoscape multiple times. When I ran the checker script (described on troubleshooting page) and &quot;I receive Java is not reachable&quot;. See attached <a href=\"https://i.stack.imgur.com/MW1kL.png\" rel=\"nofollow noreferrer\">PICTURE 1</a> I reinstalled Java 11 but still has no luck. Here is my CytoscapeConfiguration folder looks like <a href=\"https://i.stack.imgur.com/s4jW5.png\" rel=\"nofollow noreferrer\">PICTURE 2</a>. Thank you all in advance.</p>\n<p>FYI</p>\n<ul>\n<li>MacOS Mojave.</li>\n<li>Cytoscape 3.9.0</li>\n</ul>\n<p>Inside &quot;JavaVirtualMachines&quot; directory, there are:</p>\n<ul>\n<li>adoptopenjdk-11.jdk</li>\n<li>jdk-11.0.12.jdk</li>\n<li>jdk-12.0.1.jdk</li>\n</ul>\n"},{"tags":["java","pdfbox"],"comments":[{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":0,"creation_date":1637253249,"post_id":70023078,"comment_id":123782533,"body_markdown":"Are you sure the *background image* is a bitmap image to start with? Also there are not special &quot;background images&quot; and &quot;on page images&quot;. Probably you should show your code. Also, if you *delete all elements from a page*, you delete all elements from a page and get an empty page.","body":"Are you sure the <i>background image</i> is a bitmap image to start with? Also there are not special &quot;background images&quot; and &quot;on page images&quot;. Probably you should show your code. Also, if you <i>delete all elements from a page</i>, you delete all elements from a page and get an empty page."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":2,"creation_date":1637494171,"post_id":70023078,"comment_id":123836023,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"owner":{"account_id":23365644,"reputation":11,"user_id":17437315,"display_name":"Cheeky Crex"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":133,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1637251480,"creation_date":1637251480,"question_id":70023078,"body_markdown":"Is it possible to get the background image as an image from a pdf using PDFBox from Apache?\r\nI only get the images which are on the pages or can save the page as an image?\r\n\r\nAlternate: Is it possible to delete all elements from a page to get the background image?","title":"Get Background Image from PDF using Apache PDFBox","body":"<p>Is it possible to get the background image as an image from a pdf using PDFBox from Apache?\nI only get the images which are on the pages or can save the page as an image?</p>\n<p>Alternate: Is it possible to delete all elements from a page to get the background image?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":161745,"reputation":49235,"user_id":382763,"accept_rate":92,"display_name":"Thomas Mueller"},"score":4,"creation_date":1285410616,"post_id":3793400,"comment_id":4020226,"body_markdown":"Did you already read http://en.wikipedia.org/wiki/Moving_average, specially &quot;Weighted moving average&quot;","body":"Did you already read <a href=\"http://en.wikipedia.org/wiki/Moving_average\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Moving_average</a>, specially &quot;Weighted moving average&quot;"},{"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":0,"creation_date":1285410859,"post_id":3793400,"comment_id":4020244,"body_markdown":"A weighted moving average is much simpler to calculate, much faster and in many cases a more useful value to calculate. i.e. it is use in modeling many systems.","body":"A weighted moving average is much simpler to calculate, much faster and in many cases a more useful value to calculate. i.e. it is use in modeling many systems."},{"owner":{"account_id":12399473,"reputation":1295,"user_id":10189759,"display_name":"Luk Aron"},"score":0,"creation_date":1572330361,"post_id":3793400,"comment_id":103516305,"body_markdown":"I do think that __the thing you mentioned is not called moving average__,     Moving average is something like, let says 5days moving average,  `[1,2,3,4,5,6,7,8,9,10]`   will become `[nan, nan, nan, nan, 3.0, 4.0, 5.0, 6.0, 7.0, 8.0]`","body":"I do think that <b>the thing you mentioned is not called moving average</b>,     Moving average is something like, let says 5days moving average,  <code>[1,2,3,4,5,6,7,8,9,10]</code>   will become <code>[nan, nan, nan, nan, 3.0, 4.0, 5.0, 6.0, 7.0, 8.0]</code>"}],"answers":[{"tags":[],"owner":{"account_id":161745,"reputation":49235,"user_id":382763,"accept_rate":92,"display_name":"Thomas Mueller"},"down_vote_count":2,"up_vote_count":11,"is_accepted":false,"score":9,"last_activity_date":1285411157,"creation_date":1285411157,"answer_id":3793437,"question_id":3793400,"body_markdown":"You can do that in O(1): keep a queue of the last 50 entries. When you add an entry and the queue is shorter 50 elements, just update the total and the count. If it is longer than 50 elements, update the total and the count as well. Pseudocode:\r\n\r\n    add(double x) {\r\n        total += x;\r\n        addToQueue(x);\r\n        if (queueSize &gt; 50) {\r\n            total -= removeLastFromQueue();\r\n        } else {\r\n            count++;\r\n        }\r\n    }\r\n    double getAverage() {\r\n        return total / count;\r\n    }","title":"Is there a function in java to get moving average","body":"<p>You can do that in O(1): keep a queue of the last 50 entries. When you add an entry and the queue is shorter 50 elements, just update the total and the count. If it is longer than 50 elements, update the total and the count as well. Pseudocode:</p>\n\n<pre><code>add(double x) {\n    total += x;\n    addToQueue(x);\n    if (queueSize &gt; 50) {\n        total -= removeLastFromQueue();\n    } else {\n        count++;\n    }\n}\ndouble getAverage() {\n    return total / count;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7450,"reputation":269210,"user_id":12960,"display_name":"Brian Agnew"},"down_vote_count":3,"up_vote_count":32,"is_accepted":false,"score":29,"last_activity_date":1503453281,"creation_date":1285417131,"answer_id":3793750,"question_id":3793400,"body_markdown":"Check out the [Apache Maths][1] library. This has methods for doing precisely what you want. See [DescriptiveStatistics][2] and [Mean][3] for more info.\r\n\r\n\r\n  [1]: http://commons.apache.org/math/\r\n  [2]: http://commons.apache.org/proper/commons-math/javadocs/api-3.3/org/apache/commons/math3/stat/descriptive/DescriptiveStatistics.html\r\n  [3]: http://commons.apache.org/proper/commons-math/javadocs/api-3.3/org/apache/commons/math3/stat/descriptive/moment/Mean.html","title":"Is there a function in java to get moving average","body":"<p>Check out the <a href=\"http://commons.apache.org/math/\" rel=\"noreferrer\">Apache Maths</a> library. This has methods for doing precisely what you want. See <a href=\"http://commons.apache.org/proper/commons-math/javadocs/api-3.3/org/apache/commons/math3/stat/descriptive/DescriptiveStatistics.html\" rel=\"noreferrer\">DescriptiveStatistics</a> and <a href=\"http://commons.apache.org/proper/commons-math/javadocs/api-3.3/org/apache/commons/math3/stat/descriptive/moment/Mean.html\" rel=\"noreferrer\">Mean</a> for more info.</p>\n"},{"tags":[],"owner":{"account_id":202552,"reputation":12096,"user_id":449693,"accept_rate":58,"display_name":"Tony Ennis"},"down_vote_count":3,"up_vote_count":26,"is_accepted":false,"score":23,"last_activity_date":1285420563,"creation_date":1285420563,"answer_id":3793957,"question_id":3793400,"body_markdown":"Here&#39;s one way.\r\n\r\n    public class Rolling {\r\n    \r\n        private int size;\r\n        private double total = 0d;\r\n        private int index = 0;\r\n        private double samples[];\r\n    \r\n        public Rolling(int size) {\r\n            this.size = size;\r\n            samples = new double[size];\r\n            for (int i = 0; i &lt; size; i++) samples[i] = 0d;\r\n        }\r\n    \r\n        public void add(double x) {\r\n            total -= samples[index];\r\n            samples[index] = x;\r\n            total += x;\r\n            if (++index == size) index = 0; // cheaper than modulus\r\n        }\r\n    \r\n        public double getAverage() {\r\n            return total / size;\r\n        }   \r\n    }\r\n\r\n\r\n----------\r\n\r\n    public class RollingTest extends TestCase {\r\n    \r\n        private final static int SIZE = 5;\r\n        private static final double FULL_SUM = 12.5d;\r\n    \r\n        private Rolling r;\r\n    \r\n        public void setUp() {\r\n            r = new Rolling(SIZE);\r\n        }\r\n    \r\n        public void testInitial() {\r\n            assertEquals(0d, r.getAverage());\r\n        }\r\n    \r\n        public void testOne() {\r\n            r.add(3.5d);\r\n            assertEquals(3.5d / SIZE, r.getAverage());\r\n        }\r\n    \r\n        public void testFillBuffer() {\r\n            fillBufferAndTest();\r\n        }\r\n    \r\n        public void testForceOverWrite() {\r\n            fillBufferAndTest();\r\n    \r\n            double newVal = SIZE + .5d;\r\n            r.add(newVal);\r\n            // get the &#39;full sum&#39; from fillBufferAndTest(), add the value we just added,\r\n            // and subtract off the value we anticipate overwriting.\r\n            assertEquals((FULL_SUM + newVal - .5d) / SIZE, r.getAverage());\r\n        }\r\n    \r\n        public void testManyValues() {\r\n            for (int i = 0; i &lt; 1003; i++) r.add((double) i);\r\n            fillBufferAndTest();\r\n        }\r\n    \r\n    \r\n        private void fillBufferAndTest() {\r\n            // Don&#39;t write a zero value so we don&#39;t confuse an initialized\r\n            // buffer element with a data element.\r\n            for (int i = 0; i &lt; SIZE; i++) r.add(i + .5d);\r\n            assertEquals(FULL_SUM / SIZE, r.getAverage());\r\n        }\r\n    }\r\n\r\n","title":"Is there a function in java to get moving average","body":"<p>Here's one way.</p>\n\n<pre><code>public class Rolling {\n\n    private int size;\n    private double total = 0d;\n    private int index = 0;\n    private double samples[];\n\n    public Rolling(int size) {\n        this.size = size;\n        samples = new double[size];\n        for (int i = 0; i &lt; size; i++) samples[i] = 0d;\n    }\n\n    public void add(double x) {\n        total -= samples[index];\n        samples[index] = x;\n        total += x;\n        if (++index == size) index = 0; // cheaper than modulus\n    }\n\n    public double getAverage() {\n        return total / size;\n    }   \n}\n</code></pre>\n\n<hr>\n\n<pre><code>public class RollingTest extends TestCase {\n\n    private final static int SIZE = 5;\n    private static final double FULL_SUM = 12.5d;\n\n    private Rolling r;\n\n    public void setUp() {\n        r = new Rolling(SIZE);\n    }\n\n    public void testInitial() {\n        assertEquals(0d, r.getAverage());\n    }\n\n    public void testOne() {\n        r.add(3.5d);\n        assertEquals(3.5d / SIZE, r.getAverage());\n    }\n\n    public void testFillBuffer() {\n        fillBufferAndTest();\n    }\n\n    public void testForceOverWrite() {\n        fillBufferAndTest();\n\n        double newVal = SIZE + .5d;\n        r.add(newVal);\n        // get the 'full sum' from fillBufferAndTest(), add the value we just added,\n        // and subtract off the value we anticipate overwriting.\n        assertEquals((FULL_SUM + newVal - .5d) / SIZE, r.getAverage());\n    }\n\n    public void testManyValues() {\n        for (int i = 0; i &lt; 1003; i++) r.add((double) i);\n        fillBufferAndTest();\n    }\n\n\n    private void fillBufferAndTest() {\n        // Don't write a zero value so we don't confuse an initialized\n        // buffer element with a data element.\n        for (int i = 0; i &lt; SIZE; i++) r.add(i + .5d);\n        assertEquals(FULL_SUM / SIZE, r.getAverage());\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16046,"reputation":13138,"user_id":34553,"accept_rate":100,"display_name":"Daniel Alexiuc"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1384238187,"creation_date":1384238187,"answer_id":19922501,"question_id":3793400,"body_markdown":"Here&#39;s a good implementation, using BigDecimal:\r\n\r\n   \r\n    import java.math.BigDecimal;\r\n    import java.math.RoundingMode;\r\n    import java.util.LinkedList;\r\n    import java.util.Queue;\r\n    \r\n    public class MovingAverage {\r\n    \r\n        private final Queue&lt;BigDecimal&gt; window = new LinkedList&lt;BigDecimal&gt;();\r\n        private final int period;\r\n        private BigDecimal sum = BigDecimal.ZERO;\r\n    \r\n        public MovingAverage(int period) {\r\n            assert period &gt; 0 : &quot;Period must be a positive integer&quot;;\r\n            this.period = period;\r\n        }\r\n    \r\n        public void add(BigDecimal num) {\r\n            sum = sum.add(num);\r\n            window.add(num);\r\n            if (window.size() &gt; period) {\r\n                sum = sum.subtract(window.remove());\r\n            }\r\n        }\r\n    \r\n        public BigDecimal getAverage() {\r\n            if (window.isEmpty()) return BigDecimal.ZERO; // technically the average is undefined\r\n            BigDecimal divisor = BigDecimal.valueOf(window.size());\r\n            return sum.divide(divisor, 2, RoundingMode.HALF_UP);\r\n        }\r\n    }","title":"Is there a function in java to get moving average","body":"<p>Here's a good implementation, using BigDecimal:</p>\n\n<pre><code>import java.math.BigDecimal;\nimport java.math.RoundingMode;\nimport java.util.LinkedList;\nimport java.util.Queue;\n\npublic class MovingAverage {\n\n    private final Queue&lt;BigDecimal&gt; window = new LinkedList&lt;BigDecimal&gt;();\n    private final int period;\n    private BigDecimal sum = BigDecimal.ZERO;\n\n    public MovingAverage(int period) {\n        assert period &gt; 0 : \"Period must be a positive integer\";\n        this.period = period;\n    }\n\n    public void add(BigDecimal num) {\n        sum = sum.add(num);\n        window.add(num);\n        if (window.size() &gt; period) {\n            sum = sum.subtract(window.remove());\n        }\n    }\n\n    public BigDecimal getAverage() {\n        if (window.isEmpty()) return BigDecimal.ZERO; // technically the average is undefined\n        BigDecimal divisor = BigDecimal.valueOf(window.size());\n        return sum.divide(divisor, 2, RoundingMode.HALF_UP);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9951711,"reputation":320,"user_id":7364050,"display_name":"mylittleswift"},"down_vote_count":1,"up_vote_count":8,"is_accepted":false,"score":7,"last_activity_date":1487827866,"creation_date":1487827866,"answer_id":42407811,"question_id":3793400,"body_markdown":"As far as I know, there is no such function (class) in Java. But you can make one by yourself. Here is a simple example (SMA-Simple Moving Average):\r\n\r\n    public class MovingAverage {\r\n        private int [] window;\r\n        private int n, insert;\r\n        private long sum;\r\n    \r\n        public MovingAverage(int size) {\r\n            window = new int[size];\r\n            insert = 0;\r\n            sum = 0;\r\n        }\r\n    \r\n        public double next(int val) {\r\n            if (n &lt; window.length)  n++;\r\n            sum -= window[insert];\r\n            sum += val;\r\n            window[insert] = val;\r\n            insert = (insert + 1) % window.length;\r\n            return (double)sum / n;\r\n        }\r\n    }","title":"Is there a function in java to get moving average","body":"<p>As far as I know, there is no such function (class) in Java. But you can make one by yourself. Here is a simple example (SMA-Simple Moving Average):</p>\n\n<pre><code>public class MovingAverage {\n    private int [] window;\n    private int n, insert;\n    private long sum;\n\n    public MovingAverage(int size) {\n        window = new int[size];\n        insert = 0;\n        sum = 0;\n    }\n\n    public double next(int val) {\n        if (n &lt; window.length)  n++;\n        sum -= window[insert];\n        sum += val;\n        window[insert] = val;\n        insert = (insert + 1) % window.length;\n        return (double)sum / n;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12599266,"reputation":1,"user_id":9162577,"display_name":"vimal aditya"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1516344838,"creation_date":1516344296,"answer_id":48335507,"question_id":3793400,"body_markdown":"\r\n\r\n    static int[] myIntArray = new int[16];\r\n\tpublic static double maf(double number)\r\n\t{\r\n\t\tdouble avgnumber=0;\r\n\t\tfor(int i=0; i&lt;15; i++)\r\n\t\t{\r\n\t\t\tmyIntArray[i] = myIntArray[i+1];\r\n\t\t}\r\n\t\tmyIntArray[15]= (int) number;\r\n\t\t/* Doing Average */\r\n\t\tfor(int  i=0; i&lt;16; i++)\r\n\t\t{\r\n\t\t\tavgnumber=avgnumber+ myIntArray[i];\r\n\t\t}\r\n\t\treturn avgnumber/16;\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\r\n\r\n\r\n\r\nthis algorithm can also be called as Moving Average Filter which is working well for me ... i implemented this algo in my graph project!","title":"Is there a function in java to get moving average","body":"<pre><code>static int[] myIntArray = new int[16];\npublic static double maf(double number)\n{\n    double avgnumber=0;\n    for(int i=0; i&lt;15; i++)\n    {\n        myIntArray[i] = myIntArray[i+1];\n    }\n    myIntArray[15]= (int) number;\n    /* Doing Average */\n    for(int  i=0; i&lt;16; i++)\n    {\n        avgnumber=avgnumber+ myIntArray[i];\n    }\n    return avgnumber/16;\n\n}\n</code></pre>\n\n<p>this algorithm can also be called as Moving Average Filter which is working well for me ... i implemented this algo in my graph project!</p>\n"},{"tags":[],"owner":{"account_id":405199,"reputation":2814,"user_id":773953,"accept_rate":86,"display_name":"Zaheer"},"down_vote_count":5,"up_vote_count":14,"is_accepted":false,"score":9,"last_activity_date":1538979331,"creation_date":1538979331,"answer_id":52696368,"question_id":3793400,"body_markdown":"Java 8 has added [`java.util.IntSummaryStatistics`][1]. There similar classes for `Double` and `Long` as well. Fairly straightforward to use:\r\n\r\n    IntSummaryStatistics stats = new IntSummaryStatistics();\r\n    stats.accept(1);\r\n    stats.accept(3);\r\n    stats.getAverage(); // Returns 2.0\r\n\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/IntSummaryStatistics.html","title":"Is there a function in java to get moving average","body":"<p>Java 8 has added <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/IntSummaryStatistics.html\" rel=\"noreferrer\"><code>java.util.IntSummaryStatistics</code></a>. There similar classes for <code>Double</code> and <code>Long</code> as well. Fairly straightforward to use:</p>\n\n<pre><code>IntSummaryStatistics stats = new IntSummaryStatistics();\nstats.accept(1);\nstats.accept(3);\nstats.getAverage(); // Returns 2.0\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3155211,"reputation":79,"user_id":2667766,"display_name":"Eelco"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637251304,"creation_date":1637251304,"answer_id":70023028,"question_id":3793400,"body_markdown":"A solution without cumulative floating point errors.\r\n\r\n\t/**\r\n\t * Voortschrijdend gemiddelde\r\n\t * @author Eelco de Lang\r\n\t */\r\n\tpublic class MovingAverage\r\n\t{\r\n\t\tprivate final double[] valuesWindow;\r\n\t\tprivate int fill;// = 0;\r\n\r\n\t\tpublic MovingAverage(int windowSize)\r\n\t\t{\r\n\t\t\tvaluesWindow = new double[windowSize];\r\n\t\t\tassert windowSize &gt; 0 : &quot;Window size must be a positive integer&quot;;\r\n\t\t}\r\n\r\n\t\tpublic void add(long number)\r\n\t\t{\r\n\t\t\tadd((double) number);\r\n\t\t}\r\n\r\n\t\tpublic void add(double number)\r\n\t\t{\r\n\t\t\t// Shift all values up 1 position\r\n\t\t\tSystem.arraycopy(valuesWindow, 0, valuesWindow, 1, valuesWindow.length - 1);\r\n\t\t\tvaluesWindow[0] = number;\r\n\t\t\tif (fill &lt; valuesWindow.length) {\r\n\t\t\t\tfill++;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tpublic double getAverage()\r\n\t\t{\r\n\t\t\tdouble result = 0;\r\n\t\t\tfor (int i = 0; i &lt; fill; i++) {\r\n\t\t\t\tresult += valuesWindow[i];\r\n\t\t\t}\r\n\t\t\tif (fill == 0) {\r\n\t\t\t\t// Fine in most cases\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\treturn result / fill;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tpublic class MovingAverageTest\r\n\t{\r\n\r\n\t\t@Test\r\n\t\tpublic void test()\r\n\t\t{\r\n\r\n\t\t\tMovingAverage movingAverage = new MovingAverage(2);\r\n\t\t\tAssert.assertEquals(0, movingAverage.getAverage(), 0.00001);\r\n\t\t\tmovingAverage.add(0.5);\r\n\t\t\tAssert.assertEquals(0.5, movingAverage.getAverage(), 0.00001);\r\n\t\t\tmovingAverage.add(1.5);\r\n\t\t\tAssert.assertEquals(1.0, movingAverage.getAverage(), 0.00001);\r\n\t\t\tmovingAverage.add(1.5);\r\n\t\t\tAssert.assertEquals(1.5, movingAverage.getAverage(), 0.00001);\r\n\t\t}\r\n\r\n\t\t@Test\r\n\t\tpublic void test2()\r\n\t\t{\r\n\t\t\tMovingAverage movingAverage = new MovingAverage(3);\r\n\t\t\tAssert.assertEquals(0, movingAverage.getAverage(), 0.00001);\r\n\t\t\tmovingAverage.add(123);\r\n\t\t\tAssert.assertEquals(123, movingAverage.getAverage(), 0.00001);\r\n\t\t\tmovingAverage.add(123);\r\n\t\t\tAssert.assertEquals(123, movingAverage.getAverage(), 0.00001);\r\n\t\t\tmovingAverage.add(123);\r\n\t\t\tAssert.assertEquals(123, movingAverage.getAverage(), 0.00001);\r\n\t\t\tmovingAverage.add(123);\r\n\t\t\tAssert.assertEquals(123, movingAverage.getAverage(), 0.00001);\r\n\t\t\tmovingAverage.add(123);\r\n\t\t\tAssert.assertEquals(123, movingAverage.getAverage(), 0.00001);\r\n\t\t}\r\n\t}","title":"Is there a function in java to get moving average","body":"<p>A solution without cumulative floating point errors.</p>\n<pre><code>/**\n * Voortschrijdend gemiddelde\n * @author Eelco de Lang\n */\npublic class MovingAverage\n{\n    private final double[] valuesWindow;\n    private int fill;// = 0;\n\n    public MovingAverage(int windowSize)\n    {\n        valuesWindow = new double[windowSize];\n        assert windowSize &gt; 0 : &quot;Window size must be a positive integer&quot;;\n    }\n\n    public void add(long number)\n    {\n        add((double) number);\n    }\n\n    public void add(double number)\n    {\n        // Shift all values up 1 position\n        System.arraycopy(valuesWindow, 0, valuesWindow, 1, valuesWindow.length - 1);\n        valuesWindow[0] = number;\n        if (fill &lt; valuesWindow.length) {\n            fill++;\n        }\n    }\n\n    public double getAverage()\n    {\n        double result = 0;\n        for (int i = 0; i &lt; fill; i++) {\n            result += valuesWindow[i];\n        }\n        if (fill == 0) {\n            // Fine in most cases\n            return 0;\n        }\n        else {\n            return result / fill;\n        }\n    }\n}\npublic class MovingAverageTest\n{\n\n    @Test\n    public void test()\n    {\n\n        MovingAverage movingAverage = new MovingAverage(2);\n        Assert.assertEquals(0, movingAverage.getAverage(), 0.00001);\n        movingAverage.add(0.5);\n        Assert.assertEquals(0.5, movingAverage.getAverage(), 0.00001);\n        movingAverage.add(1.5);\n        Assert.assertEquals(1.0, movingAverage.getAverage(), 0.00001);\n        movingAverage.add(1.5);\n        Assert.assertEquals(1.5, movingAverage.getAverage(), 0.00001);\n    }\n\n    @Test\n    public void test2()\n    {\n        MovingAverage movingAverage = new MovingAverage(3);\n        Assert.assertEquals(0, movingAverage.getAverage(), 0.00001);\n        movingAverage.add(123);\n        Assert.assertEquals(123, movingAverage.getAverage(), 0.00001);\n        movingAverage.add(123);\n        Assert.assertEquals(123, movingAverage.getAverage(), 0.00001);\n        movingAverage.add(123);\n        Assert.assertEquals(123, movingAverage.getAverage(), 0.00001);\n        movingAverage.add(123);\n        Assert.assertEquals(123, movingAverage.getAverage(), 0.00001);\n        movingAverage.add(123);\n        Assert.assertEquals(123, movingAverage.getAverage(), 0.00001);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":197509,"reputation":1483,"user_id":441632,"accept_rate":35,"display_name":"chai"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":53813,"favorite_count":0,"down_vote_count":0,"up_vote_count":36,"answer_count":8,"score":36,"last_activity_date":1637251304,"creation_date":1285410219,"question_id":3793400,"body_markdown":"I have a situation where I need to process 5000 samples from a device in every 0.5 sec. \r\n\r\nLets say the window size is 100, then there would be 50 points resulting from the moving average. I am trying with conventional method, i.e. with loops. But this is a very inefficient way to do it. Any suggestions ?","title":"Is there a function in java to get moving average","body":"<p>I have a situation where I need to process 5000 samples from a device in every 0.5 sec. </p>\n\n<p>Lets say the window size is 100, then there would be 50 points resulting from the moving average. I am trying with conventional method, i.e. with loops. But this is a very inefficient way to do it. Any suggestions ?</p>\n"},{"tags":["java","static","mockito","powermockito"],"comments":[{"owner":{"account_id":1223835,"reputation":75858,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":0,"creation_date":1637247248,"post_id":70021887,"comment_id":123779764,"body_markdown":"Fix your class and inject `BeanLocator` instead.","body":"Fix your class and inject <code>BeanLocator</code> instead."},{"owner":{"account_id":1263738,"reputation":313,"user_id":1221494,"accept_rate":95,"display_name":"krltos"},"score":0,"creation_date":1637247572,"post_id":70021887,"comment_id":123779920,"body_markdown":"@chrylis-cautiouslyoptimistic- I&#39;m not sure if I follow your suggestion. Which class do you refer to? I can&#39;t modify neither BeanLocator nor PortalBeanLocatorUtil","body":"@chrylis-cautiouslyoptimistic- I&#39;m not sure if I follow your suggestion. Which class do you refer to? I can&#39;t modify neither BeanLocator nor PortalBeanLocatorUtil"},{"owner":{"account_id":8859262,"reputation":405,"user_id":6615961,"display_name":"Zied Yazidi"},"score":0,"creation_date":1637251094,"post_id":70021887,"comment_id":123781578,"body_markdown":"Instead, try to use `BDDMockito` for stubbing: `BDDMockito.given(PortalBeanLocatorUtil.getBeanLocator()).willReturn(mockBeanLocator);\n`","body":"Instead, try to use <code>BDDMockito</code> for stubbing: <code>BDDMockito.given(PortalBeanLocatorUtil.getBeanLocator()).wil&zwnj;&#8203;lReturn(mockBeanLoca&zwnj;&#8203;tor); </code>"}],"answers":[{"tags":[],"owner":{"account_id":7575022,"reputation":11,"user_id":5747683,"display_name":"JKL"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637251164,"creation_date":1637251164,"answer_id":70022991,"question_id":70021887,"body_markdown":"I think the problem is with the fact that you are returning a mock as a result of calling another mock. Try using an instance of BeanLocator.\r\n\r\n","title":"PowerMockito to mock a static method inside a class using MockitoJUnitRunner","body":"<p>I think the problem is with the fact that you are returning a mock as a result of calling another mock. Try using an instance of BeanLocator.</p>\n"}],"owner":{"account_id":1263738,"reputation":313,"user_id":1221494,"accept_rate":95,"display_name":"krltos"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":184,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1637251164,"creation_date":1637246895,"question_id":70021887,"body_markdown":"I want to user PowerMockito inside a test class that has `@RunWith(MockitoJUnitRunner.class)`. I do the following static method mocking:\r\n\r\n    BeanLocator mockBeanLocator = mock(BeanLocator.class);\r\n    PowerMockito.mockStatic(PortalBeanLocatorUtil.class);\r\n    PowerMockito.when(PortalBeanLocatorUtil.getBeanLocator()).thenReturn(mockBeanLocator);\r\nThe last line does not work. I get this error message:\r\n\r\n        org.mockito.exceptions.misusing.MissingMethodInvocationException: \r\n    when() requires an argument which has to be &#39;a method call on a mock&#39;.\r\n    For example:\r\n        when(mock.getArticles()).thenReturn(articles);\r\n    \r\n    Also, this error might show up because:\r\n    1. you stub either of: final/private/equals()/hashCode() methods.\r\n       Those methods *cannot* be stubbed/verified.\r\n    2. inside when() you do not call method on mock but on some other object.\r\n    3. the parent of the mocked class is not public.\r\n       It is a limitation of the mock engine.\r\n\r\n`PortalBeanLocatorUtil`is a public class with `public static BeanLocator getBeanLocator()`. All of these classes are from third party library. What is the proper way to mock the `getBeanLocator()`static method?","title":"PowerMockito to mock a static method inside a class using MockitoJUnitRunner","body":"<p>I want to user PowerMockito inside a test class that has <code>@RunWith(MockitoJUnitRunner.class)</code>. I do the following static method mocking:</p>\n<pre><code>BeanLocator mockBeanLocator = mock(BeanLocator.class);\nPowerMockito.mockStatic(PortalBeanLocatorUtil.class);\nPowerMockito.when(PortalBeanLocatorUtil.getBeanLocator()).thenReturn(mockBeanLocator);\n</code></pre>\n<p>The last line does not work. I get this error message:</p>\n<pre><code>    org.mockito.exceptions.misusing.MissingMethodInvocationException: \nwhen() requires an argument which has to be 'a method call on a mock'.\nFor example:\n    when(mock.getArticles()).thenReturn(articles);\n\nAlso, this error might show up because:\n1. you stub either of: final/private/equals()/hashCode() methods.\n   Those methods *cannot* be stubbed/verified.\n2. inside when() you do not call method on mock but on some other object.\n3. the parent of the mocked class is not public.\n   It is a limitation of the mock engine.\n</code></pre>\n<p><code>PortalBeanLocatorUtil</code>is a public class with <code>public static BeanLocator getBeanLocator()</code>. All of these classes are from third party library. What is the proper way to mock the <code>getBeanLocator()</code>static method?</p>\n"},{"tags":["java","swing","jtable"],"comments":[{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":3,"creation_date":1637249840,"post_id":70022497,"comment_id":123780964,"body_markdown":"*refTable.setAutoResizeMode(JTable.AUTO_RESIZE_ALL_COLUMNS);* - you are telling the table to resize all the columns to fit the space available. If you don&#39;t want this then you need to turn this off. Read the API for other resize options.","body":"<i>refTable.setAutoResizeMode(JTable.AUTO_RESIZE_ALL_COLUMNS);</i> - you are telling the table to resize all the columns to fit the space available. If you don&#39;t want this then you need to turn this off. Read the API for other resize options."}],"answers":[{"tags":[],"owner":{"account_id":23298828,"reputation":41,"user_id":17379819,"display_name":"codejunkie"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1637251121,"creation_date":1637251121,"answer_id":70022981,"question_id":70022497,"body_markdown":"I should have set \r\n\r\n    refTable.setAutoResizeMode(JTable.AUTO_RESIZE_OFF) \r\n\r\ninstead of \r\n\r\n    refTable.setAutoResizeMode(JTable.AUTO_RESIZE_ALL_COLUMNS);  \r\n\r\nlater in the documentation, the constant AUTO_RESIZE_OFF is defined as &#39;Do not adjust column widths automatically; use a horizontal scrollbar instead.&#39;","title":"How do you get JTable to extend horizontally beyond the viewport in a JPanel","body":"<p>I should have set</p>\n<pre><code>refTable.setAutoResizeMode(JTable.AUTO_RESIZE_OFF) \n</code></pre>\n<p>instead of</p>\n<pre><code>refTable.setAutoResizeMode(JTable.AUTO_RESIZE_ALL_COLUMNS);  \n</code></pre>\n<p>later in the documentation, the constant AUTO_RESIZE_OFF is defined as 'Do not adjust column widths automatically; use a horizontal scrollbar instead.'</p>\n"}],"owner":{"account_id":23298828,"reputation":41,"user_id":17379819,"display_name":"codejunkie"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":68,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70022981,"answer_count":1,"score":0,"last_activity_date":1637251121,"creation_date":1637249221,"question_id":70022497,"body_markdown":"I have a JTable inside of a JPanel with 46 columns.  The problem is that you cannot read the headers of the columns, much less any subsequent rows.  I haven&#39;t been able to easily find a way to extend the table out beyond the viewport, which would allow the scrollbars horizontally.  Here is the code I&#39;m using for setting up the table and the viewport for it.\r\n\r\n    private void setupReferencePanel() {\r\n\t\trefTable = new JTable(null, makeHeaderVector());\r\n\t\trefTable.addMouseListener(new TableListener(presenter));\r\n\t\trefListingPanel = new JPanel();\r\n\t\trefListingPanel.setLayout(new BorderLayout());\r\n\t\trefListingPanel.setBorder(BorderFactory.createTitledBorder(&quot;Reference File&quot;));\r\n\t\trefScroller = new JScrollPane(refTable);\r\n\t\trefScroller.setHorizontalScrollBarPolicy(JScrollPane.HORIZONTAL_SCROLLBAR_AS_NEEDED);\r\n\t\trefTable.setFillsViewportHeight(true);\r\n\t\t//refTable.setFillsViewportWidth(true);\r\n\t\trefListingPanel.add(refScroller, BorderLayout.CENTER);\r\n\t\trefCountLbl = new JLabel(&quot;item count: 0&quot;);\r\n\t\trefSelect = new SelectionPanel(&quot;Selection&quot;);\r\n\t\trefListingPanel.add(refSelect, BorderLayout.PAGE_START);\r\n\t\trefListingPanel.add(refCountLbl, BorderLayout.PAGE_END);\r\n\t\trefTable.setAutoResizeMode(JTable.AUTO_RESIZE_ALL_COLUMNS);\r\n\t\tgetContentPane().add(refListingPanel);\r\n\t}\r\n\r\n    private Vector makeHeaderVector() {\r\n \t\tString[] cols = { ... }; // hidden array of string contents\r\n\t\tVector&lt;String&gt; results = new Vector&lt;String&gt;(Arrays.asList(cols));\r\n\t\treturn results;\r\n\t}\r\n\r\n\r\n\r\n","title":"How do you get JTable to extend horizontally beyond the viewport in a JPanel","body":"<p>I have a JTable inside of a JPanel with 46 columns.  The problem is that you cannot read the headers of the columns, much less any subsequent rows.  I haven't been able to easily find a way to extend the table out beyond the viewport, which would allow the scrollbars horizontally.  Here is the code I'm using for setting up the table and the viewport for it.</p>\n<pre><code>private void setupReferencePanel() {\n    refTable = new JTable(null, makeHeaderVector());\n    refTable.addMouseListener(new TableListener(presenter));\n    refListingPanel = new JPanel();\n    refListingPanel.setLayout(new BorderLayout());\n    refListingPanel.setBorder(BorderFactory.createTitledBorder(&quot;Reference File&quot;));\n    refScroller = new JScrollPane(refTable);\n    refScroller.setHorizontalScrollBarPolicy(JScrollPane.HORIZONTAL_SCROLLBAR_AS_NEEDED);\n    refTable.setFillsViewportHeight(true);\n    //refTable.setFillsViewportWidth(true);\n    refListingPanel.add(refScroller, BorderLayout.CENTER);\n    refCountLbl = new JLabel(&quot;item count: 0&quot;);\n    refSelect = new SelectionPanel(&quot;Selection&quot;);\n    refListingPanel.add(refSelect, BorderLayout.PAGE_START);\n    refListingPanel.add(refCountLbl, BorderLayout.PAGE_END);\n    refTable.setAutoResizeMode(JTable.AUTO_RESIZE_ALL_COLUMNS);\n    getContentPane().add(refListingPanel);\n}\n\nprivate Vector makeHeaderVector() {\n    String[] cols = { ... }; // hidden array of string contents\n    Vector&lt;String&gt; results = new Vector&lt;String&gt;(Arrays.asList(cols));\n    return results;\n}\n</code></pre>\n"},{"tags":["java","code-coverage","cobertura"],"answers":[{"tags":[],"owner":{"account_id":40190,"reputation":18652,"user_id":116388,"accept_rate":96,"display_name":"Manuel Selva"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1355124033,"creation_date":1283523622,"answer_id":3636656,"question_id":3636590,"body_markdown":"Have a look on [emma.sourceforge][1] and associated Eclipse plugin [here][2] (if you are using Eclipse)\r\n\r\nI think this tool can answer to your need by selecting exactly what to test for coverage.\r\n\r\n  [1]: http://emma.sourceforge.net/\r\n  [2]: http://www.eclemma.org/","title":"Measure Code Coverage only on New Code","body":"<p>Have a look on <a href=\"http://emma.sourceforge.net/\" rel=\"nofollow noreferrer\">emma.sourceforge</a> and associated Eclipse plugin <a href=\"http://www.eclemma.org/\" rel=\"nofollow noreferrer\">here</a> (if you are using Eclipse)</p>\n\n<p>I think this tool can answer to your need by selecting exactly what to test for coverage.</p>\n"},{"tags":[],"owner":{"account_id":130717,"reputation":14948,"user_id":330184,"accept_rate":80,"display_name":"bwawok"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1283530020,"creation_date":1283530020,"answer_id":3637543,"question_id":3636590,"body_markdown":"We had a similar situation.. wanted new code tested but could not test all old code at once. What we did is not exactly what you asked, but may give you an idea.\r\n\r\nWe have a file called linecoverage.standard, and a file called branchcoverage.standard that live on the build server (and local copies). They have a number inside with the current line and branch coverage limits. If the checked in code is below the standard, it fails the build. If it is at the standard it passes the build. If it is ABOVE the standard, a new standard is written equal to the current coverage. \r\n\r\nThis means our code coverage will never get worse, and should slowly go up. If new code is 90%, the coverage will keep creeping up. You could also set a goal like raise the standard by 1 each week until it gets to your final goal (90%). Having to add a few tests a week to old code is not a bad idea, if it is spread out over enough time.\r\n\r\nOur current coverage is up to 75%ish... pretty good coming from a 0% rate under a year ago.","title":"Measure Code Coverage only on New Code","body":"<p>We had a similar situation.. wanted new code tested but could not test all old code at once. What we did is not exactly what you asked, but may give you an idea.</p>\n\n<p>We have a file called linecoverage.standard, and a file called branchcoverage.standard that live on the build server (and local copies). They have a number inside with the current line and branch coverage limits. If the checked in code is below the standard, it fails the build. If it is at the standard it passes the build. If it is ABOVE the standard, a new standard is written equal to the current coverage. </p>\n\n<p>This means our code coverage will never get worse, and should slowly go up. If new code is 90%, the coverage will keep creeping up. You could also set a goal like raise the standard by 1 each week until it gets to your final goal (90%). Having to add a few tests a week to old code is not a bad idea, if it is spread out over enough time.</p>\n\n<p>Our current coverage is up to 75%ish... pretty good coming from a 0% rate under a year ago.</p>\n"},{"tags":[],"owner":{"account_id":221801,"reputation":90899,"user_id":479989,"accept_rate":82,"display_name":"Ben Jackson"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1287519169,"creation_date":1287519169,"answer_id":3972331,"question_id":3636590,"body_markdown":"I did this for a large C++ project by using `svn blame` combined with the output of gcov.  If you zip those two results together you have revision information and coverage information for each line.  I actually loaded this all into a database to do queries (e.g. *show me all the uncovered lines written by joe since r1234*).  If you only want an aggregate number you can just avoid counting &#39;old&#39; uncovered lines in your total.","title":"Measure Code Coverage only on New Code","body":"<p>I did this for a large C++ project by using <code>svn blame</code> combined with the output of gcov.  If you zip those two results together you have revision information and coverage information for each line.  I actually loaded this all into a database to do queries (e.g. <em>show me all the uncovered lines written by joe since r1234</em>).  If you only want an aggregate number you can just avoid counting 'old' uncovered lines in your total.</p>\n"},{"tags":[],"owner":{"account_id":5226,"reputation":21596,"user_id":8313,"display_name":"Sean Reilly"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1355126394,"creation_date":1355126394,"answer_id":13797015,"question_id":3636590,"body_markdown":"IMO the best option is to split the codebase into &quot;new&quot; and &quot;legacy&quot; sections. Then either run test coverage analysis only on the &quot;new&quot; section, or ignore the results for the &quot;old&quot; section.\r\n\r\nThe two best ways to accomplish this are a) split the codebase into two source trees (two projects with a dependency between), or b) maintain two separate package hierarchies in a single project.\r\n\r\nTwo separate projects is probably preferable, but it might not be possible if there&#39;s a cyclical dependency between the legacy codebase and the new codebase (old code depends on new code and new code depends on old code). If you can manage it, a one-way dependency between old and new code will also make the combined codebase easier to understand.\r\n\r\nOnce you&#39;ve got this done, either adjust cobertura so that it&#39;s only analyzing the bits you want, or at least just focus on the &quot;new&quot; part of the codebase. One additional tip is that in this scheme, it&#39;s best to move bits of code from the &quot;legacy&quot; section to the &quot;new&quot; section as you refactor/add tests to them (if code is frequently moving in the other direction, that&#39;s not so good :-).","title":"Measure Code Coverage only on New Code","body":"<p>IMO the best option is to split the codebase into \"new\" and \"legacy\" sections. Then either run test coverage analysis only on the \"new\" section, or ignore the results for the \"old\" section.</p>\n\n<p>The two best ways to accomplish this are a) split the codebase into two source trees (two projects with a dependency between), or b) maintain two separate package hierarchies in a single project.</p>\n\n<p>Two separate projects is probably preferable, but it might not be possible if there's a cyclical dependency between the legacy codebase and the new codebase (old code depends on new code and new code depends on old code). If you can manage it, a one-way dependency between old and new code will also make the combined codebase easier to understand.</p>\n\n<p>Once you've got this done, either adjust cobertura so that it's only analyzing the bits you want, or at least just focus on the \"new\" part of the codebase. One additional tip is that in this scheme, it's best to move bits of code from the \"legacy\" section to the \"new\" section as you refactor/add tests to them (if code is frequently moving in the other direction, that's not so good :-).</p>\n"},{"tags":[],"owner":{"account_id":2132841,"reputation":61,"user_id":1893253,"display_name":"Venkat Gajulapalli"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1374192081,"creation_date":1374192081,"answer_id":17736007,"question_id":3636590,"body_markdown":"We did it as below using sonar.exclusions property:\r\nWe use Sonar to display the code coverage reports (reported by Cobertura).\r\n\r\na) Identify the classes that you don&#39;t want coverage report on (Legacy classes)\r\n  Use your SCM cmd line client. \r\n      eg:    p4 files //depot/&lt;your repo&gt;... @2000/01/01,@2013/07/13\r\n             git log --until=&quot;5 days ago&quot;\r\n  \r\nDirect this list into a file.\r\nYou will need to do some parsing based on the SCM tool you use and your destination file should contain one file name per line.\r\n\r\n    eg. the destination file is excludeFile.list should look like below:\r\n    abc.java\r\n    xyz.java\r\n    ...\r\n\r\nb) Now..when you integrate with Sonar (from Jenkins Job), use the below property.\r\n\r\n        -Dsonar.exclusions=&lt;filename&gt;\r\n\r\nAnd your final coverage report in Sonar contains only your new classes ( added after 07/13 in the above example).","title":"Measure Code Coverage only on New Code","body":"<p>We did it as below using sonar.exclusions property:\nWe use Sonar to display the code coverage reports (reported by Cobertura).</p>\n\n<p>a) Identify the classes that you don't want coverage report on (Legacy classes)\n  Use your SCM cmd line client. \n      eg:    p4 files //depot/... @2000/01/01,@2013/07/13\n             git log --until=\"5 days ago\"</p>\n\n<p>Direct this list into a file.\nYou will need to do some parsing based on the SCM tool you use and your destination file should contain one file name per line.</p>\n\n<pre><code>eg. the destination file is excludeFile.list should look like below:\nabc.java\nxyz.java\n...\n</code></pre>\n\n<p>b) Now..when you integrate with Sonar (from Jenkins Job), use the below property.</p>\n\n<pre><code>    -Dsonar.exclusions=&lt;filename&gt;\n</code></pre>\n\n<p>And your final coverage report in Sonar contains only your new classes ( added after 07/13 in the above example).</p>\n"},{"tags":[],"owner":{"account_id":1488333,"reputation":2722,"user_id":1396068,"accept_rate":75,"display_name":"Fabian Streitel"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1565765322,"creation_date":1565765322,"answer_id":57489466,"question_id":3636590,"body_markdown":"We call what you are trying to do [Test Gap analysis](https://www.cqse.eu/en/consulting/software-test-control/). The idea is to test all (or at least most of) the changes you make to a large software system during development, because that&#39;s where the most bugs will be. There&#39;s [empirical evidence](https://www.cqse.eu/publications/2013-did-we-test-our-changes-assessing-alignment-between-tests-and-development-in-practice.pdf) to back up this intuition as well!\r\n\r\n[Teamscale](https://www.teamscale.com) is a tool that does what you are looking for and it can handle Cobertura reports. The advantage is, that you just measure coverage as you normally do and then upload the reports to Teamscale, which will perform the Test Gap analysis to highlight new/changed but untested code on a method-by-method basis.\r\n\r\nFull disclaimer: I work for [CQSE](https://www.cqse.eu), the company that makes Teamscale.","title":"Measure Code Coverage only on New Code","body":"<p>We call what you are trying to do <a href=\"https://www.cqse.eu/en/consulting/software-test-control/\" rel=\"nofollow noreferrer\">Test Gap analysis</a>. The idea is to test all (or at least most of) the changes you make to a large software system during development, because that's where the most bugs will be. There's <a href=\"https://www.cqse.eu/publications/2013-did-we-test-our-changes-assessing-alignment-between-tests-and-development-in-practice.pdf\" rel=\"nofollow noreferrer\">empirical evidence</a> to back up this intuition as well!</p>\n\n<p><a href=\"https://www.teamscale.com\" rel=\"nofollow noreferrer\">Teamscale</a> is a tool that does what you are looking for and it can handle Cobertura reports. The advantage is, that you just measure coverage as you normally do and then upload the reports to Teamscale, which will perform the Test Gap analysis to highlight new/changed but untested code on a method-by-method basis.</p>\n\n<p>Full disclaimer: I work for <a href=\"https://www.cqse.eu\" rel=\"nofollow noreferrer\">CQSE</a>, the company that makes Teamscale.</p>\n"},{"tags":[],"owner":{"account_id":6339727,"reputation":413,"user_id":4922074,"display_name":"Thiago Cavalcanti"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637250906,"creation_date":1637250906,"answer_id":70022939,"question_id":3636590,"body_markdown":"In my scenario, we need to have the measureament of new code in our day-to-day process. What we did was install [sonarquobe][1] locally where the developers can check their code quality control, such as the code coverage of the new code as the sonar can provide to us, and make actions right away. \r\n\r\nFor a global metrics, we implemented sonarquobe for only our production code and we gather from there all of the quality metrics (such as new code coverage)\r\n\r\n\r\n  [1]: https://docs.sonarqube.org/latest/setup/get-started-2-minutes/","title":"Measure Code Coverage only on New Code","body":"<p>In my scenario, we need to have the measureament of new code in our day-to-day process. What we did was install <a href=\"https://docs.sonarqube.org/latest/setup/get-started-2-minutes/\" rel=\"nofollow noreferrer\">sonarquobe</a> locally where the developers can check their code quality control, such as the code coverage of the new code as the sonar can provide to us, and make actions right away.</p>\n<p>For a global metrics, we implemented sonarquobe for only our production code and we gather from there all of the quality metrics (such as new code coverage)</p>\n"}],"owner":{"account_id":647258,"reputation":131,"user_id":439039,"display_name":"Andy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4089,"favorite_count":0,"down_vote_count":0,"up_vote_count":13,"answer_count":7,"score":13,"last_activity_date":1637250906,"creation_date":1283523176,"question_id":3636590,"body_markdown":"We are looking for a creative way to measure code coverage on new code separate from existing code.  We have a large legacy project and want to start getting 90+% coverage on any new functionality.  We would like a way to easily view a report that filters out any older code to make sure the new functionality is meeting our goal.    Obviously still looking a increasing overall coverage on the project, but need a non-manual way to give us feedback on the new code activity.    We have this working for Static analysis since we can look at the dates on the source files.  Since Cobertura is analyzing the class files they have new dates and this technique doesn&#39;t work. \r\n\r\nAny Ideas?    \r\n\r\n\r\nStack: \r\n\r\nJava 1.5\r\nJUnit \r\nCobertura\r\nHudson","title":"Measure Code Coverage only on New Code","body":"<p>We are looking for a creative way to measure code coverage on new code separate from existing code.  We have a large legacy project and want to start getting 90+% coverage on any new functionality.  We would like a way to easily view a report that filters out any older code to make sure the new functionality is meeting our goal.    Obviously still looking a increasing overall coverage on the project, but need a non-manual way to give us feedback on the new code activity.    We have this working for Static analysis since we can look at the dates on the source files.  Since Cobertura is analyzing the class files they have new dates and this technique doesn't work. </p>\n\n<p>Any Ideas?    </p>\n\n<p>Stack: </p>\n\n<p>Java 1.5\nJUnit \nCobertura\nHudson</p>\n"},{"tags":["java","windows","mac-address","ipconfig"],"comments":[{"owner":{"account_id":213468,"reputation":103486,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1636044412,"post_id":69842324,"comment_id":123458595,"body_markdown":"You assume this docking station has its own MAC address, but is that really the case (otherwise: why would it pass through the laptops MAC address)?","body":"You assume this docking station has its own MAC address, but is that really the case (otherwise: why would it pass through the laptops MAC address)?"},{"owner":{"account_id":22681843,"reputation":31,"user_id":16852098,"display_name":"Thorsten"},"score":0,"creation_date":1636045203,"post_id":69842324,"comment_id":123458922,"body_markdown":"It has it own MAC address according to this https://www.dell.com/support/kbdoc/en-us/000143263/what-is-mac-address-pass-through for laptops which do not support mac address pass through.","body":"It has it own MAC address according to this <a href=\"https://www.dell.com/support/kbdoc/en-us/000143263/what-is-mac-address-pass-through\" rel=\"nofollow noreferrer\">dell.com/support/kbdoc/en-us/000143263/&hellip;</a> for laptops which do not support mac address pass through."}],"answers":[{"tags":[],"owner":{"account_id":22681843,"reputation":31,"user_id":16852098,"display_name":"Thorsten"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637250762,"creation_date":1637250762,"answer_id":70022902,"question_id":69842324,"body_markdown":"I was not able to solve the problem using the MAC address. If anyone has the same problem you could maybe use the connected monitors to uniquely identify the workstation. With a simple powershell skript you can get a unique serial number for a monitor to identify a workstation. This is my code, maybe this can help someone.\r\n\r\nPowershell skript:\r\n\r\n    $Monitors = Get-WmiObject WmiMonitorID -Namespace root\\wmi\r\n\r\n    function Decode {\r\n        If ($args[0] -is [System.Array]) {\r\n            [System.Text.Encoding]::ASCII.GetString($args[0])\r\n        }\r\n        Else {\r\n            &quot;Not Found&quot;\r\n        }\r\n    }\r\n    \r\n    ForEach ($Monitor in $Monitors) {\r\n        $Manufacturer = Decode $Monitor.ManufacturerName -notmatch 0\r\n        $Product = Decode $Monitor.ProductCodeID -notmatch 0\r\n        $Name = Decode $Monitor.UserFriendlyName -notmatch 0\r\n        $Serial = Decode $Monitor.SerialNumberID -notmatch 0\r\n    \r\n        echo &quot;$Manufacturer;$Product;$Name;$Serial&quot;\r\n    }\r\n\r\nJava code with jPowerShell:\r\n\r\n    try (PowerShell powerShell = PowerShell.openSession()){    \r\n         String script = &quot;../MyMonitorScript.txt&quot;;\r\n         String result = powerShell.executeScript(script).getCommandOutput();\r\n         ...\r\n\r\nThe String result contains information about the connected monitors including the unique serial number.","title":"Get MAC address of docking station ignoring MAC address pass through","body":"<p>I was not able to solve the problem using the MAC address. If anyone has the same problem you could maybe use the connected monitors to uniquely identify the workstation. With a simple powershell skript you can get a unique serial number for a monitor to identify a workstation. This is my code, maybe this can help someone.</p>\n<p>Powershell skript:</p>\n<pre><code>$Monitors = Get-WmiObject WmiMonitorID -Namespace root\\wmi\n\nfunction Decode {\n    If ($args[0] -is [System.Array]) {\n        [System.Text.Encoding]::ASCII.GetString($args[0])\n    }\n    Else {\n        &quot;Not Found&quot;\n    }\n}\n\nForEach ($Monitor in $Monitors) {\n    $Manufacturer = Decode $Monitor.ManufacturerName -notmatch 0\n    $Product = Decode $Monitor.ProductCodeID -notmatch 0\n    $Name = Decode $Monitor.UserFriendlyName -notmatch 0\n    $Serial = Decode $Monitor.SerialNumberID -notmatch 0\n\n    echo &quot;$Manufacturer;$Product;$Name;$Serial&quot;\n}\n</code></pre>\n<p>Java code with jPowerShell:</p>\n<pre><code>try (PowerShell powerShell = PowerShell.openSession()){    \n     String script = &quot;../MyMonitorScript.txt&quot;;\n     String result = powerShell.executeScript(script).getCommandOutput();\n     ...\n</code></pre>\n<p>The String result contains information about the connected monitors including the unique serial number.</p>\n"}],"owner":{"account_id":22681843,"reputation":31,"user_id":16852098,"display_name":"Thorsten"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":679,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1637250762,"creation_date":1636042044,"question_id":69842324,"body_markdown":"I have the goal to identify docking stations by their MAC address for an office application to automate which desks are occupied. With different docking stations it works fine. However, I cannot achieve this when a Dell Laptop is connected to a Dell docking station because they use MAC address pass through. Thus, they use a MAC address of the laptop, and I cannot request the MAC address of the docking station.\r\n\r\nHas anyone an idea how I can get this MAC address with Java or maybe with which command I can achieve this? I have not found anything because all approaches just give me the MAC address of the laptop. The solution does not have to be platform independent.\r\n\r\n    import java.net.NetworkInterface;\r\n    import java.net.SocketException;\r\n    import java.util.Enumeration;\r\n    import java.util.HashMap;\r\n    import java.util.List;\r\n    import java.util.Map;\r\n\r\n    public class MacAddressReader {\r\n        public static String getMacAddressOfDockingStation(String interfaceName) {\r\n            String macAddress = getAllInterfacesNamesAndMacs().get(interfaceName);\r\n            if (macAddress != null &amp;&amp; !macAddress.isEmpty())\r\n                return macAddress;\r\n\r\n            return &quot;&quot;;\r\n        }\r\n\r\n        private static Map&lt;String, String&gt; getAllInterfacesNamesAndMacs() {\r\n            Map&lt;String, String&gt; addresses = new HashMap&lt;&gt;();\r\n            try {\r\n                Enumeration&lt;NetworkInterface&gt; networkInterfaces = NetworkInterface.getNetworkInterfaces();\r\n                while (networkInterfaces.hasMoreElements()) {\r\n                    NetworkInterface networkInterface = networkInterfaces.nextElement();\r\n                    addresses.put(\r\n                            networkInterface.getDisplayName(),\r\n                            macAddressAsString(networkInterface.getHardwareAddress())\r\n                    );\r\n                }\r\n                return addresses;\r\n             } catch (SocketException e) {\r\n                return addresses;\r\n             }\r\n        }\r\n\r\n        private static String macAddressAsString(byte[] mac) {\r\n            if (mac == null)\r\n                return &quot;&quot;;\r\n            StringBuilder sb = new StringBuilder();\r\n            for (int i = 0; i &lt; mac.length; i++) {\r\n                sb.append(String.format(&quot;%02X%s&quot;, mac[i], (i &lt; mac.length - 1) ? &quot;-&quot; : &quot;&quot;));\r\n            }\r\n            return sb.toString();\r\n        }\r\n\r\n    }\r\n\r\n","title":"Get MAC address of docking station ignoring MAC address pass through","body":"<p>I have the goal to identify docking stations by their MAC address for an office application to automate which desks are occupied. With different docking stations it works fine. However, I cannot achieve this when a Dell Laptop is connected to a Dell docking station because they use MAC address pass through. Thus, they use a MAC address of the laptop, and I cannot request the MAC address of the docking station.</p>\n<p>Has anyone an idea how I can get this MAC address with Java or maybe with which command I can achieve this? I have not found anything because all approaches just give me the MAC address of the laptop. The solution does not have to be platform independent.</p>\n<pre><code>import java.net.NetworkInterface;\nimport java.net.SocketException;\nimport java.util.Enumeration;\nimport java.util.HashMap;\nimport java.util.List;\nimport java.util.Map;\n\npublic class MacAddressReader {\n    public static String getMacAddressOfDockingStation(String interfaceName) {\n        String macAddress = getAllInterfacesNamesAndMacs().get(interfaceName);\n        if (macAddress != null &amp;&amp; !macAddress.isEmpty())\n            return macAddress;\n\n        return &quot;&quot;;\n    }\n\n    private static Map&lt;String, String&gt; getAllInterfacesNamesAndMacs() {\n        Map&lt;String, String&gt; addresses = new HashMap&lt;&gt;();\n        try {\n            Enumeration&lt;NetworkInterface&gt; networkInterfaces = NetworkInterface.getNetworkInterfaces();\n            while (networkInterfaces.hasMoreElements()) {\n                NetworkInterface networkInterface = networkInterfaces.nextElement();\n                addresses.put(\n                        networkInterface.getDisplayName(),\n                        macAddressAsString(networkInterface.getHardwareAddress())\n                );\n            }\n            return addresses;\n         } catch (SocketException e) {\n            return addresses;\n         }\n    }\n\n    private static String macAddressAsString(byte[] mac) {\n        if (mac == null)\n            return &quot;&quot;;\n        StringBuilder sb = new StringBuilder();\n        for (int i = 0; i &lt; mac.length; i++) {\n            sb.append(String.format(&quot;%02X%s&quot;, mac[i], (i &lt; mac.length - 1) ? &quot;-&quot; : &quot;&quot;));\n        }\n        return sb.toString();\n    }\n\n}\n</code></pre>\n"},{"tags":["java","garbage-collection","g1gc"],"comments":[{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":0,"creation_date":1637250782,"post_id":70022772,"comment_id":123781427,"body_markdown":"`looking at the log I see old gen steadily growing with almost no reclaim.` This is known behavior for JVMs.  If there&#39;s plenty of memory remaining, no need to garbage collect.  I can&#39;t explain the OOM error though.","body":"<code>looking at the log I see old gen steadily growing with almost no reclaim.</code> This is known behavior for JVMs.  If there&#39;s plenty of memory remaining, no need to garbage collect.  I can&#39;t explain the OOM error though."},{"owner":{"account_id":71985,"reputation":7903,"user_id":208013,"display_name":"Mirek Pluta"},"score":0,"creation_date":1637251192,"post_id":70022772,"comment_id":123781620,"body_markdown":"Default value of `NewRatio` is `2`, which means that only 2/3 of heap size is allowed for old gen. So you don&#39;t have to try to allocate 100GB extra, but much less.","body":"Default value of <code>NewRatio</code> is <code>2</code>, which means that only 2/3 of heap size is allowed for old gen. So you don&#39;t have to try to allocate 100GB extra, but much less."},{"owner":{"account_id":1056871,"reputation":117729,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"score":1,"creation_date":1637251568,"post_id":70022772,"comment_id":123781796,"body_markdown":"_exactly_ what `OOME` message u get? and some gc logs when that happens would help also","body":"<i>exactly</i> what <code>OOME</code> message u get? and some gc logs when that happens would help also"},{"owner":{"account_id":54150,"reputation":2013,"user_id":161995,"accept_rate":100,"display_name":"Erik"},"score":0,"creation_date":1637263055,"post_id":70022772,"comment_id":123786258,"body_markdown":"@Eugene Frustratingly enough, the client/customer won&#39;t tell us nor are we allowed to see the log file. It took us a great deal of work to get the gc log file. I would love to put the gc log file out there, I just don&#39;t know where to put it.","body":"@Eugene Frustratingly enough, the client/customer won&#39;t tell us nor are we allowed to see the log file. It took us a great deal of work to get the gc log file. I would love to put the gc log file out there, I just don&#39;t know where to put it."},{"owner":{"account_id":54150,"reputation":2013,"user_id":161995,"accept_rate":100,"display_name":"Erik"},"score":0,"creation_date":1637263259,"post_id":70022772,"comment_id":123786335,"body_markdown":"@markspace the gc log shows remark- and concurrent cleanup phases so some attempts at collecting is going on. But the result is small.","body":"@markspace the gc log shows remark- and concurrent cleanup phases so some attempts at collecting is going on. But the result is small."},{"owner":{"account_id":1443334,"reputation":41522,"user_id":1362755,"display_name":"the8472"},"score":0,"creation_date":1637268552,"post_id":70022772,"comment_id":123788137,"body_markdown":"Ask the customer to extract the exceptions from their logs and provide that so you can actually rule out huge allocations. The exception message is important since there are different kinds of OOME.","body":"Ask the customer to extract the exceptions from their logs and provide that so you can actually rule out huge allocations. The exception message is important since there are different kinds of OOME."},{"owner":{"account_id":54150,"reputation":2013,"user_id":161995,"accept_rate":100,"display_name":"Erik"},"score":0,"creation_date":1637306538,"post_id":70022772,"comment_id":123796001,"body_markdown":"@the8472The gc log shows humongous allocations so I do think that&#39;s part of the problem.","body":"@the8472The gc log shows humongous allocations so I do think that&#39;s part of the problem."},{"owner":{"account_id":54150,"reputation":2013,"user_id":161995,"accept_rate":100,"display_name":"Erik"},"score":0,"creation_date":1637306678,"post_id":70022772,"comment_id":123796031,"body_markdown":"@Eugene I&#39;m not allowed to connect to file sharing hosts so...","body":"@Eugene I&#39;m not allowed to connect to file sharing hosts so..."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1637309453,"post_id":70022772,"comment_id":123796851,"body_markdown":"Just take the last log entries, right before the failure and including the failure if there’s a corresponding entry, and include them directly in your question. Mind that certain OOMEs are entirely independent of the heap state, attempting to create an array with 2&#179;&#185; entries is not supported on most JVMs, a native memory (e.g. direct buffer) allocation may fail, etc. In some cases, e.g. `ArrayList&lt;Object&gt; l = new ArrayList&lt;&gt;(Collections.nCopies(20, null)); l.addAll(Collections.nCopies(Integer.MAX_VALUE-10, null));`, there’s not even an actual allocation attempt, as the length would overflow…","body":"Just take the last log entries, right before the failure and including the failure if there’s a corresponding entry, and include them directly in your question. Mind that certain OOMEs are entirely independent of the heap state, attempting to create an array with 2&#179;&#185; entries is not supported on most JVMs, a native memory (e.g. direct buffer) allocation may fail, etc. In some cases, e.g. <code>ArrayList&lt;Object&gt; l = new ArrayList&lt;&gt;(Collections.nCopies(20, null)); l.addAll(Collections.nCopies(Integer.MAX_VALUE-10, null));</code>, there’s not even an actual allocation attempt, as the length would overflow…"}],"owner":{"account_id":54150,"reputation":2013,"user_id":161995,"accept_rate":100,"display_name":"Erik"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":196,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1637250233,"creation_date":1637250233,"question_id":70022772,"body_markdown":"&lt;br&gt;\r\nI&#39;ve been pulled in to try to analyse gc problems for one of our installations. &lt;br&gt;\r\nWe&#39;re getting OOME somewhat randomly when old gen has grown a bit large.&lt;br&gt;\r\nThe total allocated heap is **220 GB**, running **JDK 8 (1.8.0_292-b10)**.&lt;br&gt;\r\nXms is set equal to Xmx&lt;br&gt;\r\nNo pre-sizing of old gen/young gen is done.&lt;br&gt;\r\nWhen we get OOME there&#39;s still some **90-100 GB** heap unused.&lt;br&gt;\r\nLooking the log I can see quite a few humongous allocations and I know they go straight into old gen. Once again looking at the log I see old gen steadily growing with almost no reclaim. &lt;br&gt;\r\nI don&#39;t understand why we crash when there&#39;s still so much heap left. &lt;br&gt;\r\nIt seems unlikely that we are trying to allocate &#168;100 GB in one go, so any suggestions are helpful.\r\n(suggestions to upgrade java version, while valid, are not helpful due to the customer)","title":"G1 problems with large heap","body":"<br>\nI've been pulled in to try to analyse gc problems for one of our installations. <br>\nWe're getting OOME somewhat randomly when old gen has grown a bit large.<br>\nThe total allocated heap is **220 GB**, running **JDK 8 (1.8.0_292-b10)**.<br>\nXms is set equal to Xmx<br>\nNo pre-sizing of old gen/young gen is done.<br>\nWhen we get OOME there's still some **90-100 GB** heap unused.<br>\nLooking the log I can see quite a few humongous allocations and I know they go straight into old gen. Once again looking at the log I see old gen steadily growing with almost no reclaim. <br>\nI don't understand why we crash when there's still so much heap left. <br>\nIt seems unlikely that we are trying to allocate ¨100 GB in one go, so any suggestions are helpful.\n(suggestions to upgrade java version, while valid, are not helpful due to the customer)\n"},{"tags":["java","maven","pom.xml"],"comments":[{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1637309813,"post_id":70022153,"comment_id":123796972,"body_markdown":"First question: Why do you need the system scope dependency? Is that dependency build by Maven or not?","body":"First question: Why do you need the system scope dependency? Is that dependency build by Maven or not?"},{"owner":{"account_id":2534548,"reputation":476,"user_id":2202027,"accept_rate":67,"display_name":"rome"},"score":0,"creation_date":1642070308,"post_id":70022153,"comment_id":124976393,"body_markdown":"there are sometimes reasons for systempath imports. same here. maven build from terminal works fine. in my case this is just eclipse ide, pom opened with pom editor and the editor is showing it as an error. so i guess it is an editor bug. unfortunately the project im project explorer is also marked as failing","body":"there are sometimes reasons for systempath imports. same here. maven build from terminal works fine. in my case this is just eclipse ide, pom opened with pom editor and the editor is showing it as an error. so i guess it is an editor bug. unfortunately the project im project explorer is also marked as failing"}],"answers":[{"tags":[],"owner":{"account_id":20732441,"reputation":1553,"user_id":15224052,"display_name":"Oliver"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1637250052,"creation_date":1637250052,"answer_id":70022723,"question_id":70022153,"body_markdown":"That is not an error; it is a warning. Please check the logs again. Maven is warning you that the dependency `MyDBConn.jar` will not be available to other projects that depend on this project (the one that depends on `MyDBConn.jar`).\r\n\r\nIs `com.myApp.MyDBConn` something you wrote? You can run `mvn clean install` on that project to place the jar in your local Maven repository. Then, you can use it like:\r\n\r\n```xml\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;com.myApp&lt;/groupId&gt;\r\n    &lt;artifactId&gt;MyDBConn&lt;/artifactId&gt;\r\n    &lt;version&gt;0.0.0&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```","title":"Adding systemPath for jar file inside pom.xml dependency tag","body":"<p>That is not an error; it is a warning. Please check the logs again. Maven is warning you that the dependency <code>MyDBConn.jar</code> will not be available to other projects that depend on this project (the one that depends on <code>MyDBConn.jar</code>).</p>\n<p>Is <code>com.myApp.MyDBConn</code> something you wrote? You can run <code>mvn clean install</code> on that project to place the jar in your local Maven repository. Then, you can use it like:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.myApp&lt;/groupId&gt;\n    &lt;artifactId&gt;MyDBConn&lt;/artifactId&gt;\n    &lt;version&gt;0.0.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":3845120,"reputation":6092,"user_id":3186922,"accept_rate":50,"display_name":"Hari Krishnan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4387,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1637250052,"creation_date":1637247876,"question_id":70022153,"body_markdown":"I have imported an existing maven project into eclipse IDE. The pom.xml have a dependency looking like below.\r\n\r\n    \t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.myApp&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;MyDBConn&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;0.0.0&lt;/version&gt;\r\n\t\t\t&lt;scope&gt;system&lt;/scope&gt;\r\n\t\t\t&lt;systemPath&gt;${basedir}/dependencies/MyDBConn.jar&lt;/systemPath&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\nIn the line\r\n\r\n    &lt;systemPath&gt;${basedir}/dependencies/MyDBConn.jar&lt;/systemPath&gt;\r\n\r\nI am getting an error saying\r\n\r\n&gt; Multiple annotations found at this line:\r\n\t- &#39;dependencies.dependency.systemPath&#39; for com.myApp:MyDBConn:jar should not point at files \r\n\t within the project directory, ${basedir}/dependencies/MultiDBConn.jar will be unresolvable by dependent \r\n\t projects\r\n\t- &#39;dependencies.dependency.systemPath&#39; for com.myApp:MyDBConn:jar must specify an absolute \r\n\t path but is ${basedir}/dependencies/MyDBConn.jar\r\n\r\nI have MyDBConn.jar file in dependencies folder inside the project directory. In my understanding ${basedir} points to the path where pom.xml is located. \r\n Why am i getting this error then? ","title":"Adding systemPath for jar file inside pom.xml dependency tag","body":"<p>I have imported an existing maven project into eclipse IDE. The pom.xml have a dependency looking like below.</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;com.myApp&lt;/groupId&gt;\n        &lt;artifactId&gt;MyDBConn&lt;/artifactId&gt;\n        &lt;version&gt;0.0.0&lt;/version&gt;\n        &lt;scope&gt;system&lt;/scope&gt;\n        &lt;systemPath&gt;${basedir}/dependencies/MyDBConn.jar&lt;/systemPath&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>In the line</p>\n<pre><code>&lt;systemPath&gt;${basedir}/dependencies/MyDBConn.jar&lt;/systemPath&gt;\n</code></pre>\n<p>I am getting an error saying</p>\n<blockquote>\n<p>Multiple annotations found at this line:\n- 'dependencies.dependency.systemPath' for com.myApp:MyDBConn:jar should not point at files\nwithin the project directory, ${basedir}/dependencies/MultiDBConn.jar will be unresolvable by dependent\nprojects\n- 'dependencies.dependency.systemPath' for com.myApp:MyDBConn:jar must specify an absolute\npath but is ${basedir}/dependencies/MyDBConn.jar</p>\n</blockquote>\n<p>I have MyDBConn.jar file in dependencies folder inside the project directory. In my understanding ${basedir} points to the path where pom.xml is located.\nWhy am i getting this error then?</p>\n"},{"tags":["java","hibernate","spring-boot","interceptor"],"answers":[{"tags":[],"owner":{"account_id":989600,"reputation":30745,"user_id":1007273,"display_name":"hovanessyan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1550054562,"creation_date":1550054562,"answer_id":54668229,"question_id":54667146,"body_markdown":"If you&#39;re using Spring transactions you can leverage [`TransactionSynchronization`][1] and use `afterCommit()`\r\n\r\n&gt; default void afterCommit()\r\n&gt; \r\n&gt; Invoked after transaction commit. Can perform further operations right\r\n&gt; after the main transaction has successfully committed.\r\n\r\nUsage:\r\n\r\n    TransactionSynchronizationManager.registerSynchronization(new TransactionSynchronization(){\r\n               void afterCommit(){\r\n                    //do your thing\r\n               }\r\n    })\r\n\r\nYou can also explore [`TransactionSynchronizationAdapter`][2] - in a similar way you can implement you own &quot;AfterCommitExecutor&quot; that implements the [`Executor`][3] interface and extends TransactionSynchronizationAdapter and overrides the [`afterCommit()`][4] method.\r\n\r\n\r\n  [1]: https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/transaction/support/TransactionSynchronization.html\r\n  [2]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/transaction/support/TransactionSynchronizationAdapter.html\r\n  [3]: https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Executor.html\r\n  [4]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/transaction/support/TransactionSynchronizationAdapter.html#afterCommit--","title":"Problem of using hibernate interceptor in springboot","body":"<p>If you're using Spring transactions you can leverage <a href=\"https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/transaction/support/TransactionSynchronization.html\" rel=\"nofollow noreferrer\"><code>TransactionSynchronization</code></a> and use <code>afterCommit()</code></p>\n\n<blockquote>\n  <p>default void afterCommit()</p>\n  \n  <p>Invoked after transaction commit. Can perform further operations right\n  after the main transaction has successfully committed.</p>\n</blockquote>\n\n<p>Usage:</p>\n\n<pre><code>TransactionSynchronizationManager.registerSynchronization(new TransactionSynchronization(){\n           void afterCommit(){\n                //do your thing\n           }\n})\n</code></pre>\n\n<p>You can also explore <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/transaction/support/TransactionSynchronizationAdapter.html\" rel=\"nofollow noreferrer\"><code>TransactionSynchronizationAdapter</code></a> - in a similar way you can implement you own \"AfterCommitExecutor\" that implements the <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Executor.html\" rel=\"nofollow noreferrer\"><code>Executor</code></a> interface and extends TransactionSynchronizationAdapter and overrides the <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/transaction/support/TransactionSynchronizationAdapter.html#afterCommit--\" rel=\"nofollow noreferrer\"><code>afterCommit()</code></a> method.</p>\n"},{"tags":[],"owner":{"account_id":15316076,"reputation":23,"user_id":11049939,"display_name":"SiaoLeio"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1550193925,"creation_date":1550193925,"answer_id":54701486,"question_id":54667146,"body_markdown":"  I use the answer by hovanessyan and it works, now let me completely describe what I did here:\r\n \r\n  I was trying to migrate other people&#39;s code to springboot, the code uses hibernate with a persistence.xml and the interceptor uses threadlocal to store all the entities in a transaction, when the transaction is committed, choose one &quot;best&quot; entity to email user, else do nothing and clear the threadlocal, the code is :\r\n\r\n    \tpublic class MyInterceptor extends EmptyInterceptor {\r\n\r\n\t\tprivate static final long serialVersionUID = -7992825362361127331L;\r\n\r\n\t\t//The MyThreadLocal used to store all the entities in a transaction, when the transaction\r\n\t\t//committed, the interceptor will choose the &quot;best&quot; entity to email user\r\n\t\tprivate static MyThreadLocal myThreadLocal;\r\n\r\n\t\tpublic static void setMyThreadLocal(MyThreadLocal mTL) {\r\n\t\t\tMyInterceptor.myThreadLocal = mTL;\r\n\t\t}\r\n\t  \r\n\t\t@Override\r\n\t\tpublic void afterTransactionCompletion(Transaction tx) {\r\n\t\t\tTransactionStatus status = tx.getStatus();\r\n\t\t\tif (tx.getStatus() == COMMITTED) {\r\n\t\t\t\tMyThreadLocal.selectTheBestEntityToEmailUser();\r\n\t\t\t} else {\r\n\t\t\t\tMyThreadLocal.clear();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t@Override\r\n\t\tpublic void beforeTransactionCompletion(Transaction tx) {\r\n\t\t\tTransactionStatus status = tx.getStatus();\r\n\t\t\tMyThreadLocal.beforeTransactionCompletion();\r\n\t\t}\r\n\r\n\t\t@Override\r\n\t\tpublic boolean onSave(Object entity, Serializable id, Object[] state, String[] propertyNames, Type[] types) {\r\n\t\t\tMyThreadLocal.resourceAdded((Entity) entity);\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t@Override\r\n\t\tpublic boolean onFlushDirty(Object entity, Serializable id, Object[] currentState, Object[] previousState, String[] propertyNames, Type[] types) {\r\n\t\t\tDiff diff = new Diff(previousState, currentState, propertyNames);\r\n\t\t\tMyThreadLocal.resourceUpdated((Entity) entity, diff);\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t@Override\r\n\t\tpublic void onDelete(Object entity, Serializable id, Object[] state, String[] propertyNames, Type[] types) {\r\n\t\t\tMyThreadLocal.resourceRemoved((Entity) entity);\r\n\t\t}\r\n\r\n\t\t@Override\r\n\t\tpublic void onCollectionUpdate(Object collection, Serializable key) throws CallbackException {\r\n\t\t\tif (!(collection instanceof PersistentCollection)) {\r\n\t\t\t\tLOGGER.e(&quot;Unsupported collection type: {}&quot;, collection.getClass());\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tEntity owner = (Entity) ((PersistentCollection) collection).getOwner();\r\n\t\t\tString role = ((PersistentCollection) collection).getRole();\r\n\t\t\tMyThreadLocal.collectionResourceUpdated(owner, role);\r\n\t\t}\r\n\t}\r\n\r\nBut in afterTransactionCompletion() method, the transaction status is always NOT_ACTIVE, now I use the TransactionSynchronization interface just to replace the afterTransactionCompletion() method:\r\n\r\n    \tpublic class MyInterceptor extends EmptyInterceptor implements TransactionSynchronization {\r\n\t\t\r\n\t\t//the mothod of TransactionSynchronization interface\r\n\t\t@Override\r\n\t\tpublic void afterCompletion(int status) {\r\n\t\t\tif (status == STATUS_COMMITTED) {\r\n\t\t\t\tMyThreadLocal.selectTheBestEntityToEmailUser();\r\n\t\t\t} else {\r\n\t\t\t\tMyThreadLocal.clear();\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t//the old code which works not well\r\n\t\t@Override\r\n\t\tpublic void afterTransactionCompletion(Transaction tx) {\r\n\t\t\tTransactionStatus status = tx.getStatus();\r\n\t\t\tif (tx.getStatus() == COMMITTED) {\r\n\t\t\t\tMyThreadLocal.selectTheBestEntityToEmailUser();\r\n\t\t\t} else {\r\n\t\t\t\tMyThreadLocal.clear();\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t   ...... other codes\r\n\t}\r\n\r\nAnd the new inteceptor also need to be configured global by AOP:\r\n\r\n    @Component\r\n\t@Aspect\r\n\tpublic class InterceptorInit{\r\n\t\t@Autowired\r\n\t\tprivate MyInteceptor mI;\r\n\t\t\r\n\t\t@Before(&quot;@annotation(org.springframework.transaction.annotation.Transactional)&quot;)\r\n\t\tpublic void registerTransactionSyncrhonization() {\r\n\t\t\tTransactionSynchronizationManager.registerSynchronization(mI);\r\n\t\t}\r\n\t}\r\n\r\nNow it seems that all work well, I will continue to test.\r\n\r\n","title":"Problem of using hibernate interceptor in springboot","body":"<p>I use the answer by hovanessyan and it works, now let me completely describe what I did here:</p>\n\n<p>I was trying to migrate other people's code to springboot, the code uses hibernate with a persistence.xml and the interceptor uses threadlocal to store all the entities in a transaction, when the transaction is committed, choose one \"best\" entity to email user, else do nothing and clear the threadlocal, the code is :</p>\n\n<pre><code>    public class MyInterceptor extends EmptyInterceptor {\n\n    private static final long serialVersionUID = -7992825362361127331L;\n\n    //The MyThreadLocal used to store all the entities in a transaction, when the transaction\n    //committed, the interceptor will choose the \"best\" entity to email user\n    private static MyThreadLocal myThreadLocal;\n\n    public static void setMyThreadLocal(MyThreadLocal mTL) {\n        MyInterceptor.myThreadLocal = mTL;\n    }\n\n    @Override\n    public void afterTransactionCompletion(Transaction tx) {\n        TransactionStatus status = tx.getStatus();\n        if (tx.getStatus() == COMMITTED) {\n            MyThreadLocal.selectTheBestEntityToEmailUser();\n        } else {\n            MyThreadLocal.clear();\n        }\n    }\n\n    @Override\n    public void beforeTransactionCompletion(Transaction tx) {\n        TransactionStatus status = tx.getStatus();\n        MyThreadLocal.beforeTransactionCompletion();\n    }\n\n    @Override\n    public boolean onSave(Object entity, Serializable id, Object[] state, String[] propertyNames, Type[] types) {\n        MyThreadLocal.resourceAdded((Entity) entity);\n        return false;\n    }\n\n    @Override\n    public boolean onFlushDirty(Object entity, Serializable id, Object[] currentState, Object[] previousState, String[] propertyNames, Type[] types) {\n        Diff diff = new Diff(previousState, currentState, propertyNames);\n        MyThreadLocal.resourceUpdated((Entity) entity, diff);\n        return false;\n    }\n\n    @Override\n    public void onDelete(Object entity, Serializable id, Object[] state, String[] propertyNames, Type[] types) {\n        MyThreadLocal.resourceRemoved((Entity) entity);\n    }\n\n    @Override\n    public void onCollectionUpdate(Object collection, Serializable key) throws CallbackException {\n        if (!(collection instanceof PersistentCollection)) {\n            LOGGER.e(\"Unsupported collection type: {}\", collection.getClass());\n            return;\n        }\n        Entity owner = (Entity) ((PersistentCollection) collection).getOwner();\n        String role = ((PersistentCollection) collection).getRole();\n        MyThreadLocal.collectionResourceUpdated(owner, role);\n    }\n}\n</code></pre>\n\n<p>But in afterTransactionCompletion() method, the transaction status is always NOT_ACTIVE, now I use the TransactionSynchronization interface just to replace the afterTransactionCompletion() method:</p>\n\n<pre><code>    public class MyInterceptor extends EmptyInterceptor implements TransactionSynchronization {\n\n    //the mothod of TransactionSynchronization interface\n    @Override\n    public void afterCompletion(int status) {\n        if (status == STATUS_COMMITTED) {\n            MyThreadLocal.selectTheBestEntityToEmailUser();\n        } else {\n            MyThreadLocal.clear();\n        }\n    }\n\n    //the old code which works not well\n    @Override\n    public void afterTransactionCompletion(Transaction tx) {\n        TransactionStatus status = tx.getStatus();\n        if (tx.getStatus() == COMMITTED) {\n            MyThreadLocal.selectTheBestEntityToEmailUser();\n        } else {\n            MyThreadLocal.clear();\n        }\n    }\n\n   ...... other codes\n}\n</code></pre>\n\n<p>And the new inteceptor also need to be configured global by AOP:</p>\n\n<pre><code>@Component\n@Aspect\npublic class InterceptorInit{\n    @Autowired\n    private MyInteceptor mI;\n\n    @Before(\"@annotation(org.springframework.transaction.annotation.Transactional)\")\n    public void registerTransactionSyncrhonization() {\n        TransactionSynchronizationManager.registerSynchronization(mI);\n    }\n}\n</code></pre>\n\n<p>Now it seems that all work well, I will continue to test.</p>\n"},{"tags":[],"owner":{"account_id":5497323,"reputation":566,"user_id":4367966,"accept_rate":89,"display_name":"stove"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637249963,"creation_date":1637249963,"answer_id":70022692,"question_id":54667146,"body_markdown":"While I suggest usage of Spring TransactionSynchronization too. In case it can&#39;t be used (or not desired to) there are two things to note:\r\n\r\nbeforeTransactionCompletion - &quot;Called before a transaction is committed (but not before rollback).&quot; - which means this method can be actually used to recognize if the transaction is fine right before commit or not and save it in some temporary (ideally ThreadLocal) state.\r\n\r\nafterTransactionCompletion - in case the transaction is rollbacked, the state of the transaction is not &quot;NOT_ACTIVE&quot; but &quot;MARKED_ROLLBACK&quot; - therefore the state &quot;NOT_ACTIVE&quot; in combination with beforeTransactionCompletion being actually called can be used to determine the transaction was a success.\r\n","title":"Problem of using hibernate interceptor in springboot","body":"<p>While I suggest usage of Spring TransactionSynchronization too. In case it can't be used (or not desired to) there are two things to note:</p>\n<p>beforeTransactionCompletion - &quot;Called before a transaction is committed (but not before rollback).&quot; - which means this method can be actually used to recognize if the transaction is fine right before commit or not and save it in some temporary (ideally ThreadLocal) state.</p>\n<p>afterTransactionCompletion - in case the transaction is rollbacked, the state of the transaction is not &quot;NOT_ACTIVE&quot; but &quot;MARKED_ROLLBACK&quot; - therefore the state &quot;NOT_ACTIVE&quot; in combination with beforeTransactionCompletion being actually called can be used to determine the transaction was a success.</p>\n"}],"owner":{"account_id":15316076,"reputation":23,"user_id":11049939,"display_name":"SiaoLeio"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6060,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":54668229,"answer_count":3,"score":2,"last_activity_date":1637249963,"creation_date":1550051493,"question_id":54667146,"body_markdown":"I want to use hibernate interceptor in spring boot in order to use the `afterTransactionCompletion()` method to do something after the transaction committed.\r\n\r\n I follow the [How to use Spring managed Hibernate interceptors in Spring Boot][1] to configure(I just add `spring.jpa.properties.hibernate.ejb.interceptor=com.lc.demo.inteceptor.MyInteceptor` in `application.properties`)\r\n\r\nThe interceptor works but there is still a problem when I try to get the transaction status in the method `afterTransactionCompletion()`, it is always `NOT_ACTIVE` (I wish it could be `COMMITTED`):\r\n\r\n    import static org.hibernate.resource.transaction.spi.TransactionStatus.COMMITTED;\r\n\t\r\n\timport org.hibernate.EmptyInterceptor;\r\n\timport org.hibernate.Transaction;\r\n\timport org.hibernate.resource.transaction.spi.TransactionStatus;\r\n\timport org.springframework.stereotype.Component;\r\n\t\r\n\t\r\n\t@Component\r\n\tpublic class MyInteceptor extends EmptyInterceptor{\r\n\t\r\n\t\tprivate static final long serialVersionUID = -7992825362361127331L;\r\n\t\r\n\t\t@Override\r\n\t    public void afterTransactionCompletion(Transaction tx) {\r\n\t\t\t//The status is always NOT_ACTIVE\r\n\t    \tTransactionStatus status = tx.getStatus(); //\r\n\t        if (tx.getStatus() == COMMITTED) {\r\n\t            System.out.println(&quot;This is what I want to do&quot;);\r\n\t        } else {\r\n\t            System.out.println(&quot;This is what I do not want&quot;);\r\n\t        }\r\n\t    }\r\n\t\r\n\t    @Override\r\n\t    public void beforeTransactionCompletion(Transaction tx) {\r\n\t    \t// The status is ACTIVE\r\n\t    \tTransactionStatus status = tx.getStatus();\r\n\t        System.out.println(status);\r\n\t    }\r\n\t}\r\n   I try to debug it and find that before the `afterTransactionCompletion()` is called,\r\n\r\n in `org.hibernate.resource.jdbc.internal.LogicalConnectionProvidedImpl` which extends `AbstractLogicalConnectionImplementor`, the `commit()` method call the `afterCompletion()` method which call the `resetConnection(boolean initiallyAutoCommit)` to set the transaction status `NOT_ACTIVE`:\r\n\r\n    \t/*\r\n\t * Hibernate, Relational Persistence for Idiomatic Java\r\n\t *\r\n\t * License: GNU Lesser General Public License (LGPL), version 2.1 or later.\r\n\t * See the lgpl.txt file in the root directory or &lt;http://www.gnu.org/licenses/lgpl-2.1.html&gt;.\r\n\t */\r\n\tpackage org.hibernate.resource.jdbc.internal;\r\n\r\n\timport java.sql.Connection;\r\n\timport java.sql.SQLException;\r\n\r\n\timport org.hibernate.TransactionException;\r\n\timport org.hibernate.resource.jdbc.ResourceRegistry;\r\n\timport org.hibernate.resource.jdbc.spi.LogicalConnectionImplementor;\r\n\timport org.hibernate.resource.jdbc.spi.PhysicalJdbcTransaction;\r\n\timport org.hibernate.resource.transaction.spi.TransactionStatus;\r\n\r\n\timport org.jboss.logging.Logger;\r\n\r\n\t/**\r\n\t * @author Steve Ebersole\r\n\t */\r\n\tpublic abstract class AbstractLogicalConnectionImplementor implements LogicalConnectionImplementor, PhysicalJdbcTransaction {\r\n\t\tprivate static final Logger log = Logger.getLogger( AbstractLogicalConnectionImplementor.class );\r\n\r\n\t\tprivate TransactionStatus status = TransactionStatus.NOT_ACTIVE;\r\n\t\tprotected ResourceRegistry resourceRegistry;\r\n\r\n\t\t@Override\r\n\t\tpublic PhysicalJdbcTransaction getPhysicalJdbcTransaction() {\r\n\t\t\terrorIfClosed();\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\tprotected void errorIfClosed() {\r\n\t\t\tif ( !isOpen() ) {\r\n\t\t\t\tthrow new IllegalStateException( this.toString() + &quot; is closed&quot; );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t@Override\r\n\t\tpublic ResourceRegistry getResourceRegistry() {\r\n\t\t\treturn resourceRegistry;\r\n\t\t}\r\n\r\n\t\t@Override\r\n\t\tpublic void afterStatement() {\r\n\t\t\tlog.trace( &quot;LogicalConnection#afterStatement&quot; );\r\n\t\t}\r\n\r\n\t\t@Override\r\n\t\tpublic void afterTransaction() {\r\n\t\t\tlog.trace( &quot;LogicalConnection#afterTransaction&quot; );\r\n\r\n\t\t\tresourceRegistry.releaseResources();\r\n\t\t}\r\n\r\n\t\t// PhysicalJdbcTransaction impl ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\n\r\n\t\tprotected abstract Connection getConnectionForTransactionManagement();\r\n\r\n\t\t@Override\r\n\t\tpublic void begin() {\r\n\t\t\ttry {\r\n\t\t\t\tif ( !doConnectionsFromProviderHaveAutoCommitDisabled() ) {\r\n\t\t\t\t\tlog.trace( &quot;Preparing to begin transaction via JDBC Connection.setAutoCommit(false)&quot; );\r\n\t\t\t\t\tgetConnectionForTransactionManagement().setAutoCommit( false );\r\n\t\t\t\t\tlog.trace( &quot;Transaction begun via JDBC Connection.setAutoCommit(false)&quot; );\r\n\t\t\t\t}\r\n\t\t\t\tstatus = TransactionStatus.ACTIVE;\r\n\t\t\t}\r\n\t\t\tcatch( SQLException e ) {\r\n\t\t\t\tthrow new TransactionException( &quot;JDBC begin transaction failed: &quot;, e );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t@Override\r\n\t\tpublic void commit() {\r\n\t\t\ttry {\r\n\t\t\t\tlog.trace( &quot;Preparing to commit transaction via JDBC Connection.commit()&quot; );\r\n\t\t\t\tgetConnectionForTransactionManagement().commit();\r\n\t\t\t\tstatus = TransactionStatus.COMMITTED;\r\n\t\t\t\tlog.trace( &quot;Transaction committed via JDBC Connection.commit()&quot; );\r\n\t\t\t}\r\n\t\t\tcatch( SQLException e ) {\r\n\t\t\t\tstatus = TransactionStatus.FAILED_COMMIT;\r\n\t\t\t\tthrow new TransactionException( &quot;Unable to commit against JDBC Connection&quot;, e );\r\n\t\t\t}\r\n\r\n\t\t\tafterCompletion();\r\n\t\t}\r\n\r\n\t\tprotected void afterCompletion() {\r\n\t\t\t// by default, nothing to do\r\n\t\t}\r\n\r\n\t\tprotected void resetConnection(boolean initiallyAutoCommit) {\r\n\t\t\ttry {\r\n\t\t\t\tif ( initiallyAutoCommit ) {\r\n\t\t\t\t\tlog.trace( &quot;re-enabling auto-commit on JDBC Connection after completion of JDBC-based transaction&quot; );\r\n\t\t\t\t\tgetConnectionForTransactionManagement().setAutoCommit( true );\r\n\t\t\t\t\tstatus = TransactionStatus.NOT_ACTIVE;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tcatch ( Exception e ) {\r\n\t\t\t\tlog.debug(\r\n\t\t\t\t\t\t&quot;Could not re-enable auto-commit on JDBC Connection after completion of JDBC-based transaction : &quot; + e\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t@Override\r\n\t\tpublic void rollback() {\r\n\t\t\ttry {\r\n\t\t\t\tlog.trace( &quot;Preparing to rollback transaction via JDBC Connection.rollback()&quot; );\r\n\t\t\t\tgetConnectionForTransactionManagement().rollback();\r\n\t\t\t\tstatus = TransactionStatus.ROLLED_BACK;\r\n\t\t\t\tlog.trace( &quot;Transaction rolled-back via JDBC Connection.rollback()&quot; );\r\n\t\t\t}\r\n\t\t\tcatch( SQLException e ) {\r\n\t\t\t\tstatus = TransactionStatus.FAILED_ROLLBACK;\r\n\t\t\t\tthrow new TransactionException( &quot;Unable to rollback against JDBC Connection&quot;, e );\r\n\t\t\t}\r\n\r\n\t\t\tafterCompletion();\r\n\t\t}\r\n\r\n\t\tprotected static boolean determineInitialAutoCommitMode(Connection providedConnection) {\r\n\t\t\ttry {\r\n\t\t\t\treturn providedConnection.getAutoCommit();\r\n\t\t\t}\r\n\t\t\tcatch (SQLException e) {\r\n\t\t\t\tlog.debug( &quot;Unable to ascertain initial auto-commit state of provided connection; assuming auto-commit&quot; );\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t@Override\r\n\t\tpublic TransactionStatus getStatus(){\r\n\t\t\treturn status;\r\n\t\t}\r\n\r\n\t\tprotected boolean doConnectionsFromProviderHaveAutoCommitDisabled() {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\nCan somebody help me to solve this problem? Thanks a lot.\r\nHere are my `pom.xml`:\r\n\r\n    \t&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n\t&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\t\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t\t&lt;parent&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.1.2.RELEASE&lt;/version&gt;\r\n\t\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t\t&lt;/parent&gt;\r\n\t\t&lt;groupId&gt;com.lc&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;demo&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t\t&lt;name&gt;demo&lt;/name&gt;\r\n\t\t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n\r\n\t\t&lt;properties&gt;\r\n\t\t\t&lt;java.version&gt;1.8&lt;/java.version&gt;\r\n\t\t&lt;/properties&gt;\r\n\r\n\t\t&lt;dependencies&gt;\r\n\t\t\t&lt;dependency&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\t\t\t&lt;dependency&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\r\n\t\t\t&lt;dependency&gt;\r\n\t\t\t\t&lt;groupId&gt;org.postgresql&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;postgresql&lt;/artifactId&gt;\r\n\t\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\t\t\t&lt;dependency&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\t\t\t&lt;dependency&gt;\r\n\t\t\t\t&lt;groupId&gt;com.alibaba&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;druid&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;1.1.10&lt;/version&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\t\t&lt;/dependencies&gt;\r\n\r\n\t\t&lt;build&gt;\r\n\t\t\t&lt;plugins&gt;\r\n\t\t\t\t&lt;plugin&gt;\r\n\t\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/plugin&gt;\r\n\t\t\t&lt;/plugins&gt;\r\n\t\t&lt;/build&gt;\r\n\r\n\t&lt;/project&gt;\r\n\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/25283767/how-to-use-spring-managed-hibernate-interceptors-in-spring-boot","title":"Problem of using hibernate interceptor in springboot","body":"<p>I want to use hibernate interceptor in spring boot in order to use the <code>afterTransactionCompletion()</code> method to do something after the transaction committed.</p>\n\n<p>I follow the <a href=\"https://stackoverflow.com/questions/25283767/how-to-use-spring-managed-hibernate-interceptors-in-spring-boot\">How to use Spring managed Hibernate interceptors in Spring Boot</a> to configure(I just add <code>spring.jpa.properties.hibernate.ejb.interceptor=com.lc.demo.inteceptor.MyInteceptor</code> in <code>application.properties</code>)</p>\n\n<p>The interceptor works but there is still a problem when I try to get the transaction status in the method <code>afterTransactionCompletion()</code>, it is always <code>NOT_ACTIVE</code> (I wish it could be <code>COMMITTED</code>):</p>\n\n<pre><code>import static org.hibernate.resource.transaction.spi.TransactionStatus.COMMITTED;\n\nimport org.hibernate.EmptyInterceptor;\nimport org.hibernate.Transaction;\nimport org.hibernate.resource.transaction.spi.TransactionStatus;\nimport org.springframework.stereotype.Component;\n\n\n@Component\npublic class MyInteceptor extends EmptyInterceptor{\n\n    private static final long serialVersionUID = -7992825362361127331L;\n\n    @Override\n    public void afterTransactionCompletion(Transaction tx) {\n        //The status is always NOT_ACTIVE\n        TransactionStatus status = tx.getStatus(); //\n        if (tx.getStatus() == COMMITTED) {\n            System.out.println(\"This is what I want to do\");\n        } else {\n            System.out.println(\"This is what I do not want\");\n        }\n    }\n\n    @Override\n    public void beforeTransactionCompletion(Transaction tx) {\n        // The status is ACTIVE\n        TransactionStatus status = tx.getStatus();\n        System.out.println(status);\n    }\n}\n</code></pre>\n\n<p>I try to debug it and find that before the <code>afterTransactionCompletion()</code> is called,</p>\n\n<p>in <code>org.hibernate.resource.jdbc.internal.LogicalConnectionProvidedImpl</code> which extends <code>AbstractLogicalConnectionImplementor</code>, the <code>commit()</code> method call the <code>afterCompletion()</code> method which call the <code>resetConnection(boolean initiallyAutoCommit)</code> to set the transaction status <code>NOT_ACTIVE</code>:</p>\n\n<pre><code>    /*\n * Hibernate, Relational Persistence for Idiomatic Java\n *\n * License: GNU Lesser General Public License (LGPL), version 2.1 or later.\n * See the lgpl.txt file in the root directory or &lt;http://www.gnu.org/licenses/lgpl-2.1.html&gt;.\n */\npackage org.hibernate.resource.jdbc.internal;\n\nimport java.sql.Connection;\nimport java.sql.SQLException;\n\nimport org.hibernate.TransactionException;\nimport org.hibernate.resource.jdbc.ResourceRegistry;\nimport org.hibernate.resource.jdbc.spi.LogicalConnectionImplementor;\nimport org.hibernate.resource.jdbc.spi.PhysicalJdbcTransaction;\nimport org.hibernate.resource.transaction.spi.TransactionStatus;\n\nimport org.jboss.logging.Logger;\n\n/**\n * @author Steve Ebersole\n */\npublic abstract class AbstractLogicalConnectionImplementor implements LogicalConnectionImplementor, PhysicalJdbcTransaction {\n    private static final Logger log = Logger.getLogger( AbstractLogicalConnectionImplementor.class );\n\n    private TransactionStatus status = TransactionStatus.NOT_ACTIVE;\n    protected ResourceRegistry resourceRegistry;\n\n    @Override\n    public PhysicalJdbcTransaction getPhysicalJdbcTransaction() {\n        errorIfClosed();\n        return this;\n    }\n\n    protected void errorIfClosed() {\n        if ( !isOpen() ) {\n            throw new IllegalStateException( this.toString() + \" is closed\" );\n        }\n    }\n\n    @Override\n    public ResourceRegistry getResourceRegistry() {\n        return resourceRegistry;\n    }\n\n    @Override\n    public void afterStatement() {\n        log.trace( \"LogicalConnection#afterStatement\" );\n    }\n\n    @Override\n    public void afterTransaction() {\n        log.trace( \"LogicalConnection#afterTransaction\" );\n\n        resourceRegistry.releaseResources();\n    }\n\n    // PhysicalJdbcTransaction impl ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n\n    protected abstract Connection getConnectionForTransactionManagement();\n\n    @Override\n    public void begin() {\n        try {\n            if ( !doConnectionsFromProviderHaveAutoCommitDisabled() ) {\n                log.trace( \"Preparing to begin transaction via JDBC Connection.setAutoCommit(false)\" );\n                getConnectionForTransactionManagement().setAutoCommit( false );\n                log.trace( \"Transaction begun via JDBC Connection.setAutoCommit(false)\" );\n            }\n            status = TransactionStatus.ACTIVE;\n        }\n        catch( SQLException e ) {\n            throw new TransactionException( \"JDBC begin transaction failed: \", e );\n        }\n    }\n\n    @Override\n    public void commit() {\n        try {\n            log.trace( \"Preparing to commit transaction via JDBC Connection.commit()\" );\n            getConnectionForTransactionManagement().commit();\n            status = TransactionStatus.COMMITTED;\n            log.trace( \"Transaction committed via JDBC Connection.commit()\" );\n        }\n        catch( SQLException e ) {\n            status = TransactionStatus.FAILED_COMMIT;\n            throw new TransactionException( \"Unable to commit against JDBC Connection\", e );\n        }\n\n        afterCompletion();\n    }\n\n    protected void afterCompletion() {\n        // by default, nothing to do\n    }\n\n    protected void resetConnection(boolean initiallyAutoCommit) {\n        try {\n            if ( initiallyAutoCommit ) {\n                log.trace( \"re-enabling auto-commit on JDBC Connection after completion of JDBC-based transaction\" );\n                getConnectionForTransactionManagement().setAutoCommit( true );\n                status = TransactionStatus.NOT_ACTIVE;\n            }\n        }\n        catch ( Exception e ) {\n            log.debug(\n                    \"Could not re-enable auto-commit on JDBC Connection after completion of JDBC-based transaction : \" + e\n            );\n        }\n    }\n\n    @Override\n    public void rollback() {\n        try {\n            log.trace( \"Preparing to rollback transaction via JDBC Connection.rollback()\" );\n            getConnectionForTransactionManagement().rollback();\n            status = TransactionStatus.ROLLED_BACK;\n            log.trace( \"Transaction rolled-back via JDBC Connection.rollback()\" );\n        }\n        catch( SQLException e ) {\n            status = TransactionStatus.FAILED_ROLLBACK;\n            throw new TransactionException( \"Unable to rollback against JDBC Connection\", e );\n        }\n\n        afterCompletion();\n    }\n\n    protected static boolean determineInitialAutoCommitMode(Connection providedConnection) {\n        try {\n            return providedConnection.getAutoCommit();\n        }\n        catch (SQLException e) {\n            log.debug( \"Unable to ascertain initial auto-commit state of provided connection; assuming auto-commit\" );\n            return true;\n        }\n    }\n\n    @Override\n    public TransactionStatus getStatus(){\n        return status;\n    }\n\n    protected boolean doConnectionsFromProviderHaveAutoCommitDisabled() {\n        return false;\n    }\n}\n</code></pre>\n\n<p>Can somebody help me to solve this problem? Thanks a lot.\nHere are my <code>pom.xml</code>:</p>\n\n<pre><code>    &lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.1.2.RELEASE&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.lc&lt;/groupId&gt;\n    &lt;artifactId&gt;demo&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;demo&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n\n    &lt;properties&gt;\n        &lt;java.version&gt;1.8&lt;/java.version&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\n            &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.alibaba&lt;/groupId&gt;\n            &lt;artifactId&gt;druid&lt;/artifactId&gt;\n            &lt;version&gt;1.1.10&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n"},{"tags":["java","search","filter","ldap","ldap-query"],"comments":[{"owner":{"account_id":31959,"reputation":10608,"user_id":88122,"accept_rate":0,"display_name":"jwilleke"},"score":0,"creation_date":1637051216,"post_id":69983733,"comment_id":123715216,"body_markdown":"Which LDAP server are you using?\nTell us what you have tried and show logs or results and Read:\nhttps://stackoverflow.com/help/how-to-ask","body":"Which LDAP server are you using? Tell us what you have tried and show logs or results and Read: <a href=\"https://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a>"},{"owner":{"account_id":1418416,"reputation":2838,"user_id":1343553,"accept_rate":80,"display_name":"mvreijn"},"score":0,"creation_date":1637080344,"post_id":69983733,"comment_id":123727855,"body_markdown":"Is Dept an organizational unit, and is Manager X a user? Please be more specific. I currently need to make too many assumptions to give you a proper answer.","body":"Is Dept an organizational unit, and is Manager X a user? Please be more specific. I currently need to make too many assumptions to give you a proper answer."},{"owner":{"account_id":14797734,"reputation":33,"user_id":10686938,"display_name":"Sai Krishna"},"score":0,"creation_date":1637222914,"post_id":69983733,"comment_id":123769708,"body_markdown":"@mvreijn  I have updated the question to be more specific on what is required","body":"@mvreijn  I have updated the question to be more specific on what is required"},{"owner":{"account_id":14797734,"reputation":33,"user_id":10686938,"display_name":"Sai Krishna"},"score":1,"creation_date":1637238312,"post_id":69983733,"comment_id":123775663,"body_markdown":"@jwilleke I have updated the question to be more specific on what is required and we are  using Microfocus  eDirectory offering LDAP services","body":"@jwilleke I have updated the question to be more specific on what is required and we are  using Microfocus  eDirectory offering LDAP services"}],"answers":[{"tags":[],"owner":{"account_id":1418416,"reputation":2838,"user_id":1343553,"accept_rate":80,"display_name":"mvreijn"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637249942,"creation_date":1637249622,"answer_id":70022602,"question_id":69983733,"body_markdown":"Congratulations! You are using the best LDAP server available. \r\n\r\nI assume the default attributes are used for the hierarchy: `manager` for a person&#39;s manager and `directReports` for their subordinates. These are **DN** attributes, meaning they point directly to an object and you can read them instead of searching for them. \r\n\r\n**Case 1: directReports is available**\r\n\r\nThe `directReports` attribute points downward in the organizational tree. \r\nIf the `directReports` attribute is populated, you should proceed as follows: \r\n\r\n 1. Retrieve the specified user object and retrieve the `directReports` attribute\r\n 2. for every value of `directReports` that is returned, read the user object it points to, and retrieve their `directReports` attribute\r\n 3. Repeat step 2 for every value of `directReports`\r\n\r\nIf you store each user while iterating, you will end up with the required list. \r\n\r\n**Case 2: only manager is available**\r\n\r\nThis is a little more work. The `manager` attribute points upwards in the organizational tree. You will have to search for users that have the given user as manager. \r\n\r\n 1. Retrieve the specified user object and get the DN (via `SearchResult.getNameInNameSpace()`\r\n 2. search for users with `(manager=&lt;DN&gt;)` where `&lt;DN&gt;` is the one you just resolved\r\n 3. for each result, get the DN and repeat step 2\r\n\r\nIf you store each user while iterating, you will end up with the required list. \r\n\r\nSome more pointers: \r\n\r\n - in your `adminContext.search()` the baseDN is either the value from `directReports` (case 1) or the normal base DN (case 2). \r\n - searching for `(manager=&lt;accountname&gt;)` will not yield any results in your example because `&lt;accountname&gt;` is not a DN value (like *cn=accountname,ou=users,o=org*)","title":"How to improve performance of LDAP Search Filter for User Hierarchy","body":"<p>Congratulations! You are using the best LDAP server available.</p>\n<p>I assume the default attributes are used for the hierarchy: <code>manager</code> for a person's manager and <code>directReports</code> for their subordinates. These are <strong>DN</strong> attributes, meaning they point directly to an object and you can read them instead of searching for them.</p>\n<p><strong>Case 1: directReports is available</strong></p>\n<p>The <code>directReports</code> attribute points downward in the organizational tree.\nIf the <code>directReports</code> attribute is populated, you should proceed as follows:</p>\n<ol>\n<li>Retrieve the specified user object and retrieve the <code>directReports</code> attribute</li>\n<li>for every value of <code>directReports</code> that is returned, read the user object it points to, and retrieve their <code>directReports</code> attribute</li>\n<li>Repeat step 2 for every value of <code>directReports</code></li>\n</ol>\n<p>If you store each user while iterating, you will end up with the required list.</p>\n<p><strong>Case 2: only manager is available</strong></p>\n<p>This is a little more work. The <code>manager</code> attribute points upwards in the organizational tree. You will have to search for users that have the given user as manager.</p>\n<ol>\n<li>Retrieve the specified user object and get the DN (via <code>SearchResult.getNameInNameSpace()</code></li>\n<li>search for users with <code>(manager=&lt;DN&gt;)</code> where <code>&lt;DN&gt;</code> is the one you just resolved</li>\n<li>for each result, get the DN and repeat step 2</li>\n</ol>\n<p>If you store each user while iterating, you will end up with the required list.</p>\n<p>Some more pointers:</p>\n<ul>\n<li>in your <code>adminContext.search()</code> the baseDN is either the value from <code>directReports</code> (case 1) or the normal base DN (case 2).</li>\n<li>searching for <code>(manager=&lt;accountname&gt;)</code> will not yield any results in your example because <code>&lt;accountname&gt;</code> is not a DN value (like <em>cn=accountname,ou=users,o=org</em>)</li>\n</ul>\n"}],"owner":{"account_id":14797734,"reputation":33,"user_id":10686938,"display_name":"Sai Krishna"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":536,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1637249942,"creation_date":1637036567,"question_id":69983733,"body_markdown":"I want to search the Reporting hierarchy of a given CN and by using Manager attributes, in a downward direction in LDAP. Can anyone help us to know if there is any performant way of achieving this with the LDAP Search filters in Java? I tried searching different posts but couldn&#39;t find an answer.\r\n\r\n```\r\nEx:\r\n-Dept Head(input CN) - -Level 3 User\r\n--Manager 1 -Level 2 User\r\n---Member 1 -Level 1 User\r\n---Member 2 -Level 1 User\r\n--Manager 2 -Level 2 User\r\n---Member 3 -Level 1 User\r\n---Member 4 -Level 1 User\r\n--Manager 3 -Level 2 User\r\n---Member 5 -Level 1 User\r\n---Member 6 -Level 1 User\r\n```\r\nIn the above example Level 3 Users CN would be input and we should retrieve all the users below him till Level 0(all level Managers and Members) of the given CN. \r\n\r\nIF input CN is Level 1 users CN\r\n - Output will include all Level 0 reports below Level 1 User(input CN)\r\n\r\nIF input CN is Level 2 users CN\r\n - Output will include all Level 1 and Level 2 reports below Level 1 User(input CN) ... and so on\r\n\r\nRight now I am generating a filter for each level dynamically and searching using that filter in the below level. If there are more levels, the search is taking time to return the expected results.\r\n\r\n\r\nMy Code\r\n```\r\n\r\nprotected static ArrayList&lt;ValueCollection&gt; getUserReportsTreeDetails(String accountName, String initial,\r\n\t\t\tString url, String principal, String credentials, String searchFeilds, String resultFeildNames,\r\n\t\t\tString managerAttribute) throws Exception {\r\n\t\tInitialLdapContext adminContext = null;\r\n\r\n\t\ttry {\r\n\t\t\tArrayList&lt;SearchResult&gt; result = new ArrayList&lt;SearchResult&gt;();\r\n\t\t\tProperties connectionProperties = new Properties();\r\n\t\t\tconnectionProperties.put(&quot;java.naming.factory.initial&quot;, initial);\r\n\t\t\tconnectionProperties.put(&quot;java.naming.provider.url&quot;, url);\r\n\t\t\tconnectionProperties.put(&quot;java.naming.referral&quot;, &quot;ignore&quot;);\r\n\t\t\tconnectionProperties.put(&quot;java.naming.security.principal&quot;, principal);\r\n\t\t\tconnectionProperties.put(&quot;java.naming.security.credentials&quot;, credentials);\r\n\t\t\tconnectionProperties.put(&quot;javax.security.sasl.maxbuffer&quot;, 2000000);\r\n\r\n\t\t\tadminContext = new InitialLdapContext(connectionProperties, null);\r\n\r\n\t\t\tString filter;\r\n\t\t\tfilter = &quot;(&amp;(userstatus=active)(|(&quot; + managerAttribute + &quot;=&quot; + accountName + &quot;)(CN=&quot; + accountName + &quot;)))&quot;;\r\n\t\t\tString searchFeildsArray[] = searchFeilds.split(&quot;,&quot;);\r\n\t\t\tString resultFeildNamesArray[] = resultFeildNames.split(&quot;,&quot;);\r\n\r\n\t\t\tNamingEnumeration&lt;SearchResult&gt; answers = null;\r\n\t\t\t//\r\n\t\t\tArrayList&lt;ValueCollection&gt; values = new ArrayList&lt;ValueCollection&gt;();\r\n\r\n\t\t\ttry {\r\n\t\t\t\tString baseDn = &quot;ou=accounts&quot;; // TODO: Change me\r\n\t\t\t\tanswers = adminContext.search(baseDn, filter, getSearchControlsForFetchUser(searchFeilds));\r\n\t\t\t\tSearchResult userInfo;\r\n\t\t\t\tif (!answers.hasMore()) {\r\n\t\t\t\t\t// throw new Exception(&quot;User does not exist in AD&quot;);\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t\ttry {\r\n\t\t\t\t\tString Names = &quot;&quot;;\r\n\t\t\t\t\tint count = 0;\r\n\r\n\t\t\t\t\twhile (answers.hasMore()) {\r\n\t\t\t\t\t\tValueCollection data = new ValueCollection();\r\n\t\t\t\t\t\tuserInfo = (SearchResult) answers.next();\r\n\t\t\t\t\t\tfor (int i = 0; i &lt; searchFeildsArray.length; i++) {\r\n\t\t\t\t\t\t\tAttribute attr = userInfo.getAttributes().get(searchFeildsArray[i]);\r\n\t\t\t\t\t\t\tif (attr != null) {\r\n\t\t\t\t\t\t\t\tdata.put(resultFeildNamesArray[i], new StringPrimitive(attr.get().toString()));\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvalues.add(data);\r\n\t\t\t\t\t\tString temp = userInfo.getAttributes().get(&quot;cn&quot;).get().toString();\r\n\r\n\t\t\t\t\t\tif (!temp.equals(accountName)) {\r\n\t\t\t\t\t\t\tNames = Names == &quot;&quot; ? temp : Names + &quot;,&quot; + temp;\r\n\t\t\t\t\t\t\tcount++;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (Names.length() &gt; 0)\r\n\t\t\t\t\t\tvalues = getData(Names, managerAttribute, adminContext, baseDn, searchFeilds, resultFeildNames,\r\n\t\t\t\t\t\t\t\tvalues);\r\n\t\t\t\t\treturn values;\r\n\t\t\t\t} catch (PartialResultException var10) {\r\n\t\t\t\t\tthrow new Exception(&quot;User does not exist in AD or credentials are invalid&quot;);\r\n\t\t\t\t}\r\n\t\t\t} finally {\r\n\t\t\t\tif (answers != null) {\r\n\t\t\t\t\tanswers.close();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} finally {\r\n\t\t\tif (adminContext != null) {\r\n\t\t\t\tadminContext.close();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tprivate static ArrayList&lt;ValueCollection&gt; getData(String accountNames, String managerAttribute,\r\n\t\t\tInitialLdapContext adminContext, String baseDn, String searchFeilds, String resultFeildNames,\r\n\t\t\tArrayList&lt;ValueCollection&gt; values) throws Exception {\r\n\r\n\t\tString filter = &quot;&quot;;\r\n\t\tString[] Names = accountNames.split(&quot;,&quot;);\r\n\t\tfilter = &quot;(&amp;(userstatus=active)(|&quot;;\r\n\t\tfor (String Name : Names) {\r\n\t\t\tfilter += &quot;(&quot; + managerAttribute + &quot;=&quot; + Name + &quot;)&quot;;\r\n\t\t}\r\n\t\tfilter += &quot;))&quot;;\r\n\r\n\t\tString searchFeildsArray[] = searchFeilds.split(&quot;,&quot;);\r\n\t\tString resultFeildNamesArray[] = resultFeildNames.split(&quot;,&quot;);\r\n\t\tNamingEnumeration&lt;SearchResult&gt; answers = null;\r\n\t\t// String filter = &quot;(&quot; + managerAttribute + &quot;=&quot; + accountName + &quot;)&quot;;\r\n\t\tanswers = adminContext.search(baseDn, filter, getSearchControlsForFetchUser(searchFeilds));\r\n\t\tSearchResult userInfo;\r\n\t\tString SearchedUsers = &quot;&quot;;\r\n\t\tint count = 0;\r\n\t\twhile (answers.hasMore()) {\r\n\t\t\tValueCollection data = new ValueCollection();\r\n\t\t\tuserInfo = (SearchResult) answers.next();\r\n\t\t\tfor (int i = 0; i &lt; searchFeildsArray.length; i++) {\r\n\t\t\t\tAttribute attr = userInfo.getAttributes().get(searchFeildsArray[i]);\r\n\t\t\t\tif (attr != null) {\r\n\t\t\t\t\tdata.put(resultFeildNamesArray[i], new StringPrimitive(attr.get().toString()));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvalues.add(data);\r\n\t\t\tString temp = userInfo.getAttributes().get(&quot;cn&quot;).get().toString();\r\n\r\n\t\t\tSearchedUsers = SearchedUsers == &quot;&quot; ? temp : SearchedUsers + &quot;,&quot; + temp;\r\n\t\t\tcount++;\r\n\t\t}\r\n\t\tif (SearchedUsers.length() &gt; 0)\r\n\t\t\tvalues = getData(SearchedUsers, managerAttribute, adminContext, baseDn, searchFeilds, resultFeildNames,\r\n\t\t\t\t\tvalues);\r\n\t\treturn values;\r\n\t}\r\n```","title":"How to improve performance of LDAP Search Filter for User Hierarchy","body":"<p>I want to search the Reporting hierarchy of a given CN and by using Manager attributes, in a downward direction in LDAP. Can anyone help us to know if there is any performant way of achieving this with the LDAP Search filters in Java? I tried searching different posts but couldn't find an answer.</p>\n<pre><code>Ex:\n-Dept Head(input CN) - -Level 3 User\n--Manager 1 -Level 2 User\n---Member 1 -Level 1 User\n---Member 2 -Level 1 User\n--Manager 2 -Level 2 User\n---Member 3 -Level 1 User\n---Member 4 -Level 1 User\n--Manager 3 -Level 2 User\n---Member 5 -Level 1 User\n---Member 6 -Level 1 User\n</code></pre>\n<p>In the above example Level 3 Users CN would be input and we should retrieve all the users below him till Level 0(all level Managers and Members) of the given CN.</p>\n<p>IF input CN is Level 1 users CN</p>\n<ul>\n<li>Output will include all Level 0 reports below Level 1 User(input CN)</li>\n</ul>\n<p>IF input CN is Level 2 users CN</p>\n<ul>\n<li>Output will include all Level 1 and Level 2 reports below Level 1 User(input CN) ... and so on</li>\n</ul>\n<p>Right now I am generating a filter for each level dynamically and searching using that filter in the below level. If there are more levels, the search is taking time to return the expected results.</p>\n<p>My Code</p>\n<pre><code>\nprotected static ArrayList&lt;ValueCollection&gt; getUserReportsTreeDetails(String accountName, String initial,\n            String url, String principal, String credentials, String searchFeilds, String resultFeildNames,\n            String managerAttribute) throws Exception {\n        InitialLdapContext adminContext = null;\n\n        try {\n            ArrayList&lt;SearchResult&gt; result = new ArrayList&lt;SearchResult&gt;();\n            Properties connectionProperties = new Properties();\n            connectionProperties.put(&quot;java.naming.factory.initial&quot;, initial);\n            connectionProperties.put(&quot;java.naming.provider.url&quot;, url);\n            connectionProperties.put(&quot;java.naming.referral&quot;, &quot;ignore&quot;);\n            connectionProperties.put(&quot;java.naming.security.principal&quot;, principal);\n            connectionProperties.put(&quot;java.naming.security.credentials&quot;, credentials);\n            connectionProperties.put(&quot;javax.security.sasl.maxbuffer&quot;, 2000000);\n\n            adminContext = new InitialLdapContext(connectionProperties, null);\n\n            String filter;\n            filter = &quot;(&amp;(userstatus=active)(|(&quot; + managerAttribute + &quot;=&quot; + accountName + &quot;)(CN=&quot; + accountName + &quot;)))&quot;;\n            String searchFeildsArray[] = searchFeilds.split(&quot;,&quot;);\n            String resultFeildNamesArray[] = resultFeildNames.split(&quot;,&quot;);\n\n            NamingEnumeration&lt;SearchResult&gt; answers = null;\n            //\n            ArrayList&lt;ValueCollection&gt; values = new ArrayList&lt;ValueCollection&gt;();\n\n            try {\n                String baseDn = &quot;ou=accounts&quot;; // TODO: Change me\n                answers = adminContext.search(baseDn, filter, getSearchControlsForFetchUser(searchFeilds));\n                SearchResult userInfo;\n                if (!answers.hasMore()) {\n                    // throw new Exception(&quot;User does not exist in AD&quot;);\n                    return null;\n                }\n                try {\n                    String Names = &quot;&quot;;\n                    int count = 0;\n\n                    while (answers.hasMore()) {\n                        ValueCollection data = new ValueCollection();\n                        userInfo = (SearchResult) answers.next();\n                        for (int i = 0; i &lt; searchFeildsArray.length; i++) {\n                            Attribute attr = userInfo.getAttributes().get(searchFeildsArray[i]);\n                            if (attr != null) {\n                                data.put(resultFeildNamesArray[i], new StringPrimitive(attr.get().toString()));\n                            }\n                        }\n                        values.add(data);\n                        String temp = userInfo.getAttributes().get(&quot;cn&quot;).get().toString();\n\n                        if (!temp.equals(accountName)) {\n                            Names = Names == &quot;&quot; ? temp : Names + &quot;,&quot; + temp;\n                            count++;\n                        }\n                    }\n                    if (Names.length() &gt; 0)\n                        values = getData(Names, managerAttribute, adminContext, baseDn, searchFeilds, resultFeildNames,\n                                values);\n                    return values;\n                } catch (PartialResultException var10) {\n                    throw new Exception(&quot;User does not exist in AD or credentials are invalid&quot;);\n                }\n            } finally {\n                if (answers != null) {\n                    answers.close();\n                }\n            }\n        } finally {\n            if (adminContext != null) {\n                adminContext.close();\n            }\n        }\n    }\n\n    private static ArrayList&lt;ValueCollection&gt; getData(String accountNames, String managerAttribute,\n            InitialLdapContext adminContext, String baseDn, String searchFeilds, String resultFeildNames,\n            ArrayList&lt;ValueCollection&gt; values) throws Exception {\n\n        String filter = &quot;&quot;;\n        String[] Names = accountNames.split(&quot;,&quot;);\n        filter = &quot;(&amp;(userstatus=active)(|&quot;;\n        for (String Name : Names) {\n            filter += &quot;(&quot; + managerAttribute + &quot;=&quot; + Name + &quot;)&quot;;\n        }\n        filter += &quot;))&quot;;\n\n        String searchFeildsArray[] = searchFeilds.split(&quot;,&quot;);\n        String resultFeildNamesArray[] = resultFeildNames.split(&quot;,&quot;);\n        NamingEnumeration&lt;SearchResult&gt; answers = null;\n        // String filter = &quot;(&quot; + managerAttribute + &quot;=&quot; + accountName + &quot;)&quot;;\n        answers = adminContext.search(baseDn, filter, getSearchControlsForFetchUser(searchFeilds));\n        SearchResult userInfo;\n        String SearchedUsers = &quot;&quot;;\n        int count = 0;\n        while (answers.hasMore()) {\n            ValueCollection data = new ValueCollection();\n            userInfo = (SearchResult) answers.next();\n            for (int i = 0; i &lt; searchFeildsArray.length; i++) {\n                Attribute attr = userInfo.getAttributes().get(searchFeildsArray[i]);\n                if (attr != null) {\n                    data.put(resultFeildNamesArray[i], new StringPrimitive(attr.get().toString()));\n                }\n            }\n            values.add(data);\n            String temp = userInfo.getAttributes().get(&quot;cn&quot;).get().toString();\n\n            SearchedUsers = SearchedUsers == &quot;&quot; ? temp : SearchedUsers + &quot;,&quot; + temp;\n            count++;\n        }\n        if (SearchedUsers.length() &gt; 0)\n            values = getData(SearchedUsers, managerAttribute, adminContext, baseDn, searchFeilds, resultFeildNames,\n                    values);\n        return values;\n    }\n</code></pre>\n"},{"tags":["java","eclipse","javafx","javafx-8","javafx-11"],"comments":[{"owner":{"account_id":12709521,"reputation":705,"user_id":9233560,"display_name":"gkhaos"},"score":5,"creation_date":1637249000,"post_id":70022393,"comment_id":123780571,"body_markdown":"1. Please don&#39;t post pictures of code, post code instead using markdown, so it is easily readable by others :) 2. You tagged javafx-8 and javafx-11, which are very different, because there was a major change in how to include JavaFX into your project, I&#39;d suggest the easiest way is to get a JDK that includes JavaFX, (Have a look at [A JavaFX App on ZuluFX in 60 seconds](https://foojay.io/today/a-javafx-app-on-zulufx-in-60-seconds/))","body":"1. Please don&#39;t post pictures of code, post code instead using markdown, so it is easily readable by others :) 2. You tagged javafx-8 and javafx-11, which are very different, because there was a major change in how to include JavaFX into your project, I&#39;d suggest the easiest way is to get a JDK that includes JavaFX, (Have a look at <a href=\"https://foojay.io/today/a-javafx-app-on-zulufx-in-60-seconds/\" rel=\"nofollow noreferrer\">A JavaFX App on ZuluFX in 60 seconds</a>)"},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":2,"creation_date":1637249174,"post_id":70022393,"comment_id":123780655,"body_markdown":"Edit your question and include your code, and the full stack trace of the error, as text—not as an image.  See https://meta.stackoverflow.com/questions/285551/why-not-upload-images-of-code-errors-when-asking-a-question.","body":"Edit your question and include your code, and the full stack trace of the error, as text—not as an image.  See <a href=\"https://meta.stackoverflow.com/questions/285551/why-not-upload-images-of-code-errors-when-asking-a-question\" title=\"why not upload images of code errors when asking a question\">meta.stackoverflow.com/questions/285551/&hellip;</a>."},{"owner":{"account_id":22980132,"reputation":9,"user_id":17107191,"display_name":"Murigrim"},"score":0,"creation_date":1637249529,"post_id":70022393,"comment_id":123780828,"body_markdown":"&quot;please don&#39;t post pictures of code, post code instead using markdown, so it is easily readable by others&quot; - relatively new to asking questions on stack overflow. I will take this advice on board thank you. &quot; I&#39;d suggest the easiest way is to get a JDK that includes JavaFX&quot; - I have used javaFX for a few years now and normally wrote with Java 1.8 but I recently received an error stating. JavaFX module was missing so I had to download the JavaFX JDK and also create a lib for it and include an argument in the build configurations.","body":"&quot;please don&#39;t post pictures of code, post code instead using markdown, so it is easily readable by others&quot; - relatively new to asking questions on stack overflow. I will take this advice on board thank you. &quot; I&#39;d suggest the easiest way is to get a JDK that includes JavaFX&quot; - I have used javaFX for a few years now and normally wrote with Java 1.8 but I recently received an error stating. JavaFX module was missing so I had to download the JavaFX JDK and also create a lib for it and include an argument in the build configurations."},{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":0,"creation_date":1637253471,"post_id":70022393,"comment_id":123782640,"body_markdown":"_relatively new to asking questions on stack overflow_ good time to read through the help pages about how to ask (or answer)","body":"<i>relatively new to asking questions on stack overflow</i> good time to read through the help pages about how to ask (or answer)"},{"owner":{"account_id":22980132,"reputation":9,"user_id":17107191,"display_name":"Murigrim"},"score":0,"creation_date":1637254943,"post_id":70022393,"comment_id":123783305,"body_markdown":"The issue is now resolved, so short of going back and reimplementing the error just to get code snips, I cannot add the original code. I wont be doing that but I will take this criticism on board and ensure that I paste the code in future and not an image.","body":"The issue is now resolved, so short of going back and reimplementing the error just to get code snips, I cannot add the original code. I wont be doing that but I will take this criticism on board and ensure that I paste the code in future and not an image."},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":1,"creation_date":1637270865,"post_id":70022393,"comment_id":123788887,"body_markdown":"*&quot;I will take this advice on board.&quot;* So why is there still a screenshot in the question?","body":"<i>&quot;I will take this advice on board.&quot;</i> So why is there still a screenshot in the question?"}],"answers":[{"tags":[],"owner":{"account_id":7608227,"reputation":700,"user_id":5770116,"display_name":"JonR85"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1637249220,"creation_date":1637249220,"answer_id":70022495,"question_id":70022393,"body_markdown":"It looks like the fxml file you are trying to use is called MainForm.fxml. But on line 14 your are trying to use Mainform.fxml. Try capitalizing the &#39;F&#39; on form.","title":"JavaFX - java.lang.nullpointer on one machine but not another","body":"<p>It looks like the fxml file you are trying to use is called MainForm.fxml. But on line 14 your are trying to use Mainform.fxml. Try capitalizing the 'F' on form.</p>\n"}],"owner":{"account_id":22980132,"reputation":9,"user_id":17107191,"display_name":"Murigrim"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":66,"favorite_count":0,"down_vote_count":3,"up_vote_count":1,"closed_date":1637258954,"accepted_answer_id":70022495,"answer_count":1,"score":-2,"last_activity_date":1637249220,"creation_date":1637248789,"question_id":70022393,"body_markdown":"I have created a JavaFX Java program that displays few screens.\r\non one machine it works when I run from eclipse but fails when I run it as a jar.\r\non another machine it fails in eclipse with the same error I get previously.\r\n\r\nI have linked a screenshot containing part of the code and also the error and folder layout.\r\n\r\nany assistance is appreciated.\r\n\r\n [screenshot containing part of the code and also the error and folder layout][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/8ARbA.png","title":"JavaFX - java.lang.nullpointer on one machine but not another","body":"<p>I have created a JavaFX Java program that displays few screens.\non one machine it works when I run from eclipse but fails when I run it as a jar.\non another machine it fails in eclipse with the same error I get previously.</p>\n<p>I have linked a screenshot containing part of the code and also the error and folder layout.</p>\n<p>any assistance is appreciated.</p>\n<p><a href=\"https://i.stack.imgur.com/8ARbA.png\" rel=\"nofollow noreferrer\">screenshot containing part of the code and also the error and folder layout</a></p>\n"},{"tags":["java","jpa","spring-data-jpa","spring-data","eclipselink"],"comments":[{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":1,"creation_date":1637078498,"post_id":69982405,"comment_id":123727010,"body_markdown":"See https://stackoverflow.com/a/37596251/496099 and https://stackoverflow.com/a/16693590/496099 for nested fetch joining in JPA/EclipseLink, but be careful what is in the parent rows when joining via OneToMany and ManyToMany, as some data can cause overhead that outweighs the benefits of joining. If it has large lobs/clob data for instance, you might want to look at batch fetching instead to reduce network having to handle duplicate rows when cross joining those relationships.","body":"See <a href=\"https://stackoverflow.com/a/37596251/496099\">stackoverflow.com/a/37596251/496099</a> and <a href=\"https://stackoverflow.com/a/16693590/496099\">stackoverflow.com/a/16693590/496099</a> for nested fetch joining in JPA/EclipseLink, but be careful what is in the parent rows when joining via OneToMany and ManyToMany, as some data can cause overhead that outweighs the benefits of joining. If it has large lobs/clob data for instance, you might want to look at batch fetching instead to reduce network having to handle duplicate rows when cross joining those relationships."}],"answers":[{"tags":[],"owner":{"account_id":13540458,"reputation":4811,"user_id":9768291,"display_name":"payne"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1637249056,"creation_date":1637249056,"answer_id":70022464,"question_id":69982405,"body_markdown":"Thanks to Chris&#39;s comment and help, I reached this solution:\r\n\r\n```java\r\npublic interface MainEntityCRUDRepository extends CrudRepository&lt;MainEntity, MainEntityPrimaryKey&gt; {\r\n\r\n    @QueryHints({\r\n            @QueryHint(name = org.eclipse.persistence.config.QueryHints.LEFT_FETCH, value = &quot;main.subs.firstPossibility&quot;),\r\n            @QueryHint(name = org.eclipse.persistence.config.QueryHints.LEFT_FETCH, value = &quot;main.subs.secondPossibility&quot;)\r\n    })\r\n    @Query(&quot;SELECT main FROM MainEntity main WHERE CONCAT(main.foo, &#39;~&#39;, main.bar) IN :ids&quot;)\r\n    List&lt;MainEntity&gt; getAllMainWithConcatenatedIds(@Param(&quot;ids&quot;) Collection&lt;String&gt; ids);\r\n}\r\n```\r\n\r\nAnd the generated SQL looks like this:\r\n\r\n```sql\r\nSELECT *\r\nFROM mainentity t1\r\nLEFT OUTER JOIN subentity t0 ON ((t0.foo = t1.foo) AND (t0.bar = t1.bar))\r\nLEFT OUTER JOIN firstpossibility t2 ON (t2.id = t0.first_possibility_id)\r\nLEFT OUTER JOIN secondpossibility t3 ON (t3.id = t0.second_possibility_id)\r\nWHERE (t1.foo || &#39;~&#39; || t1.bar IN (...))\r\n```\r\n\r\n---\r\n\r\n\r\nNotice how there is no `JOIN FETCH main.subs sub` in the `@Query` : that is implied by the hints navigating through `main.subs` already.\r\n\r\nIf you add the `JOIN FETCH`, you will actually have duplicates in your result `List`. Those duplicates are due to the fact that this is how the DB actually returns the result (each `FirstPossibility` and `SecondPossibility` found would create one entry in the result set.\r\n\r\nIf you wanted to use the `QueryHints.BATCH` instead, then the `JOIN FETCH main.subs sub` is actually required, but you will not have the entire result returned through a single DB call: multiple `SELECT` statements would be issued.","title":"Fetch all relationships with JPQL","body":"<p>Thanks to Chris's comment and help, I reached this solution:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public interface MainEntityCRUDRepository extends CrudRepository&lt;MainEntity, MainEntityPrimaryKey&gt; {\n\n    @QueryHints({\n            @QueryHint(name = org.eclipse.persistence.config.QueryHints.LEFT_FETCH, value = &quot;main.subs.firstPossibility&quot;),\n            @QueryHint(name = org.eclipse.persistence.config.QueryHints.LEFT_FETCH, value = &quot;main.subs.secondPossibility&quot;)\n    })\n    @Query(&quot;SELECT main FROM MainEntity main WHERE CONCAT(main.foo, '~', main.bar) IN :ids&quot;)\n    List&lt;MainEntity&gt; getAllMainWithConcatenatedIds(@Param(&quot;ids&quot;) Collection&lt;String&gt; ids);\n}\n</code></pre>\n<p>And the generated SQL looks like this:</p>\n<pre class=\"lang-sql prettyprint-override\"><code>SELECT *\nFROM mainentity t1\nLEFT OUTER JOIN subentity t0 ON ((t0.foo = t1.foo) AND (t0.bar = t1.bar))\nLEFT OUTER JOIN firstpossibility t2 ON (t2.id = t0.first_possibility_id)\nLEFT OUTER JOIN secondpossibility t3 ON (t3.id = t0.second_possibility_id)\nWHERE (t1.foo || '~' || t1.bar IN (...))\n</code></pre>\n<hr />\n<p>Notice how there is no <code>JOIN FETCH main.subs sub</code> in the <code>@Query</code> : that is implied by the hints navigating through <code>main.subs</code> already.</p>\n<p>If you add the <code>JOIN FETCH</code>, you will actually have duplicates in your result <code>List</code>. Those duplicates are due to the fact that this is how the DB actually returns the result (each <code>FirstPossibility</code> and <code>SecondPossibility</code> found would create one entry in the result set.</p>\n<p>If you wanted to use the <code>QueryHints.BATCH</code> instead, then the <code>JOIN FETCH main.subs sub</code> is actually required, but you will not have the entire result returned through a single DB call: multiple <code>SELECT</code> statements would be issued.</p>\n"}],"owner":{"account_id":13540458,"reputation":4811,"user_id":9768291,"display_name":"payne"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1176,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70022464,"answer_count":1,"score":0,"last_activity_date":1637249056,"creation_date":1637021590,"question_id":69982405,"body_markdown":"I am trying to use **JPQL** to generate a **single SQL statement** to fetch multiple different entities all linked to each other with foreign keys.\r\n\r\n# Model\r\nThe model looks like this:\r\n\r\n```java\r\n@Entity\r\n@Table(name = &quot;mainentity&quot;)\r\n@Data\r\n@IdClass(MainEntityPrimaryKey.class)\r\npublic class MainEntity {\r\n\r\n    @Id\r\n    @Column(updatable = false)\r\n    private String foo;\r\n\r\n    @Id\r\n    @Column(updatable = false)\r\n    private String bar;\r\n\r\n    @OneToMany(cascade = {CascadeType.ALL}, orphanRemoval = true)\r\n    @JoinColumns({\r\n            @JoinColumn(name = &quot;foo&quot;, referencedColumnName = &quot;foo&quot;),\r\n            @JoinColumn(name = &quot;bar&quot;, referencedColumnName = &quot;bar&quot;)\r\n    })\r\n    private List&lt;SubEntity&gt; subs;\r\n}\r\n```\r\n\r\n```java\r\n@Entity\r\n@Table(name = &quot;subentity&quot;)\r\n@Data\r\n@IdClass(SubEntityPrimaryKey.class)\r\npublic class SubEntity {\r\n\r\n    @Id\r\n    @Column(updatable = false)\r\n    private String foo;\r\n\r\n    @Id\r\n    @Column(updatable = false)\r\n    private String bar;\r\n\r\n    @OneToOne(cascade = CascadeType.ALL, orphanRemoval = true)\r\n    @JoinColumn(name = &quot;first_possibility_id&quot;, referencedColumnName = &quot;first_possibility&quot;)\r\n    private FirstPossibility firstPossibility;\r\n\r\n    @OneToOne(cascade = CascadeType.ALL, orphanRemoval = true)\r\n    @JoinColumn(name = &quot;second_possibility_id&quot;, referencedColumnName = &quot;second_possibility&quot;)\r\n    private SecondPossibility secondPossibility;\r\n}\r\n```\r\n\r\n```java\r\n@Entity\r\n@Table(name = &quot;firstpossibility&quot;)\r\n@Data\r\npublic class FirstPossibility {\r\n\r\n    @Id\r\n    @Column(name = &quot;first_possibility_id&quot;, nullable = false, updatable = false)\r\n    private String id;\r\n\r\n    @Column\r\n    private String something;\r\n}\r\n```\r\n\r\n```java\r\n@Entity\r\n@Table(name = &quot;secondpossibility&quot;)\r\n@Data\r\npublic class SecondPossibility {\r\n\r\n    @Id\r\n    @Column(name = &quot;second_possibility_id&quot;, nullable = false, updatable = false)\r\n    private String id;\r\n\r\n    @Column\r\n    private String stuff;\r\n}\r\n```\r\n\r\nA `SubEntity` will never have both a `FirstPossibility` and `SecondPossibility` linked at the same time.\r\n\r\n# Repository\r\nThe Spring-Data interface:\r\n\r\n```java\r\npublic interface MainEntityCRUDRepository extends CrudRepository&lt;MainEntity, MainEntityPrimaryKey&gt; {\r\n\r\n    @Query(&quot;SELECT main FROM MainEntity main WHERE CONCAT(main.foo, &#39;~&#39;, main.bar) IN :ids&quot;)\r\n    List&lt;MainEntity&gt; getAllMainWithConcatenatedIds(@Param(&quot;ids&quot;) Collection&lt;String&gt; ids);\r\n}\r\n```\r\n\r\n# Current state\r\nAs it is, it fetches all the `MainEntity` properly in a single call to the database (I can see the binding happening correctly with the `spring.jpa.show-sql=true` property), but without any `SubEntity`.\r\n\r\nThe `SubEntity` get fetched when something ends up trying to access them later in the code, and that also ends up fetching the `First` or `Second` entities. All of this, with separated DB calls for each entity (which is, performance-wise, something that we want to avoid).\r\n\r\nImportant note: we use `EclipseLink` as our JPA Provider.","title":"Fetch all relationships with JPQL","body":"<p>I am trying to use <strong>JPQL</strong> to generate a <strong>single SQL statement</strong> to fetch multiple different entities all linked to each other with foreign keys.</p>\n<h1>Model</h1>\n<p>The model looks like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\n@Table(name = &quot;mainentity&quot;)\n@Data\n@IdClass(MainEntityPrimaryKey.class)\npublic class MainEntity {\n\n    @Id\n    @Column(updatable = false)\n    private String foo;\n\n    @Id\n    @Column(updatable = false)\n    private String bar;\n\n    @OneToMany(cascade = {CascadeType.ALL}, orphanRemoval = true)\n    @JoinColumns({\n            @JoinColumn(name = &quot;foo&quot;, referencedColumnName = &quot;foo&quot;),\n            @JoinColumn(name = &quot;bar&quot;, referencedColumnName = &quot;bar&quot;)\n    })\n    private List&lt;SubEntity&gt; subs;\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\n@Table(name = &quot;subentity&quot;)\n@Data\n@IdClass(SubEntityPrimaryKey.class)\npublic class SubEntity {\n\n    @Id\n    @Column(updatable = false)\n    private String foo;\n\n    @Id\n    @Column(updatable = false)\n    private String bar;\n\n    @OneToOne(cascade = CascadeType.ALL, orphanRemoval = true)\n    @JoinColumn(name = &quot;first_possibility_id&quot;, referencedColumnName = &quot;first_possibility&quot;)\n    private FirstPossibility firstPossibility;\n\n    @OneToOne(cascade = CascadeType.ALL, orphanRemoval = true)\n    @JoinColumn(name = &quot;second_possibility_id&quot;, referencedColumnName = &quot;second_possibility&quot;)\n    private SecondPossibility secondPossibility;\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\n@Table(name = &quot;firstpossibility&quot;)\n@Data\npublic class FirstPossibility {\n\n    @Id\n    @Column(name = &quot;first_possibility_id&quot;, nullable = false, updatable = false)\n    private String id;\n\n    @Column\n    private String something;\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\n@Table(name = &quot;secondpossibility&quot;)\n@Data\npublic class SecondPossibility {\n\n    @Id\n    @Column(name = &quot;second_possibility_id&quot;, nullable = false, updatable = false)\n    private String id;\n\n    @Column\n    private String stuff;\n}\n</code></pre>\n<p>A <code>SubEntity</code> will never have both a <code>FirstPossibility</code> and <code>SecondPossibility</code> linked at the same time.</p>\n<h1>Repository</h1>\n<p>The Spring-Data interface:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public interface MainEntityCRUDRepository extends CrudRepository&lt;MainEntity, MainEntityPrimaryKey&gt; {\n\n    @Query(&quot;SELECT main FROM MainEntity main WHERE CONCAT(main.foo, '~', main.bar) IN :ids&quot;)\n    List&lt;MainEntity&gt; getAllMainWithConcatenatedIds(@Param(&quot;ids&quot;) Collection&lt;String&gt; ids);\n}\n</code></pre>\n<h1>Current state</h1>\n<p>As it is, it fetches all the <code>MainEntity</code> properly in a single call to the database (I can see the binding happening correctly with the <code>spring.jpa.show-sql=true</code> property), but without any <code>SubEntity</code>.</p>\n<p>The <code>SubEntity</code> get fetched when something ends up trying to access them later in the code, and that also ends up fetching the <code>First</code> or <code>Second</code> entities. All of this, with separated DB calls for each entity (which is, performance-wise, something that we want to avoid).</p>\n<p>Important note: we use <code>EclipseLink</code> as our JPA Provider.</p>\n"},{"tags":["java","swing","awt","collision-detection","game-development"],"comments":[{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":3,"creation_date":1637185210,"post_id":70011258,"comment_id":123761882,"body_markdown":"Use the `Shape` interface. You can create your rocks using the Ellipse2D class. The rocks can be painted using the `fill(Shape)` method of the Graphics2D class. Then you can use the `intersects(...`) method to determine if the two rocks collide.","body":"Use the <code>Shape</code> interface. You can create your rocks using the Ellipse2D class. The rocks can be painted using the <code>fill(Shape)</code> method of the Graphics2D class. Then you can use the <code>intersects(...</code>) method to determine if the two rocks collide."},{"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"score":1,"creation_date":1637191843,"post_id":70011258,"comment_id":123763720,"body_markdown":"See [this answer](https://stackoverflow.com/a/14575043/418556) for an example of detecting collisions between shapes.","body":"See <a href=\"https://stackoverflow.com/a/14575043/418556\">this answer</a> for an example of detecting collisions between shapes."}],"answers":[{"tags":[],"owner":{"account_id":4962253,"reputation":18492,"user_id":3992939,"accept_rate":73,"display_name":"c0der"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1637248643,"creation_date":1637248193,"answer_id":70022242,"question_id":70011258,"body_markdown":"As proposed by camickr use `Shape` for easy collision detection. &lt;br/&gt;\r\nThe following is a one-file [mre](https://stackoverflow.com/help/minimal-reproducible-example) (copy paste the entire code into `ShapesCollision.java` and run) of a basic implementation of it:\r\n\r\n\t\r\n\timport java.awt.*;\r\n\timport java.awt.event.*;\r\n\timport java.awt.geom.Ellipse2D;\r\n\timport java.util.*;\r\n\timport java.util.List;\r\n\timport javax.swing.Timer;\r\n\timport javax.swing.*;\r\n\t\r\n\t\r\n\tpublic class ShapesCollision extends JPanel implements ActionListener {\r\n\t\r\n\t\tprivate final static int H = 350, W = 400, RATE = 30;\r\n\t\tprivate final static Color BG = Color.DARK_GRAY;\r\n\t\tprivate final static Color[] SHAPE_COLORS ={Color.RED, Color.BLUE};//to have more balls, add more colors\r\n\t\tprivate final List&lt;Ball&gt; balls;\r\n\t\r\n\t\tprivate final Dimension size;\r\n\t\r\n\t\tpublic ShapesCollision() {\r\n\t\r\n\t\t\tRandom rnd = new Random();\r\n\t\t\tballs = new ArrayList&lt;&gt;();\r\n\t\r\n\t\t\tfor(Color color : SHAPE_COLORS){\r\n                //todo check that added shape does not overlap previous ones \r\n\t\t\t\tballs.add(new Ball(color,rnd.nextInt(W), rnd.nextInt(H)));\r\n\t\t\t}\r\n\t\r\n\t\t\tTimer timer = new Timer(RATE,this);\r\n\t\t\ttimer.start();\r\n\t\r\n\t\t\tsize = new Dimension(W,H);\r\n\t\t\tsetBackground(BG);\r\n\t\t\tsetVisible(true);\r\n\t\t}\r\n\t\r\n\t\t@Override\r\n\t\tpublic void paintComponent(Graphics g) { //for custom painting override paintComponent, not paint\r\n\t\t\tsuper.paintComponent(g);\r\n\t\t\tGraphics2D g2D = (Graphics2D) g;\r\n\t\t\tfor(Ball ball : balls){\r\n\t\t\t\tg2D.setColor(ball.getColor());\r\n\t\t\t\tg2D.draw(ball);\r\n\t\t\t\tg2D.fill(ball);\r\n\t\t\t}\r\n\t\t}\r\n\t\r\n\t\tpublic static void main(String[] args) {\r\n\t\r\n\t\t\tJFrame myFrame = new JFrame(&quot;Colliding Shapes&quot;);\r\n\t\t\tmyFrame.setLocationByPlatform(true);;\r\n\t\t\tmyFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n\t\t\tmyFrame.add(new ShapesCollision());\r\n\t\t\tmyFrame.pack();\r\n\t\t\tmyFrame.setVisible(true);\r\n\t\t}\r\n\t\r\n\t\t@Override\r\n\t\tpublic void actionPerformed(ActionEvent e) {\r\n\t\r\n\t\t\tcheckCollision();\r\n\t\t\thorizontalMove();\r\n\t\t\tverticalMove();\r\n\t\t\trepaint();\r\n\t\t}\r\n\t\r\n\t\tprivate void checkCollision() {\r\n\t\t\tfor(Ball ball1 : balls){\r\n\t\t\t\tfor(Ball ball2 : balls){\r\n\t\t\t\t\tif(ball1 == ball2) {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(ball1.intersects(ball2.getBounds2D())){\r\n\t\t\t\t\t\tchangeHorizontalDirection(ball1);\r\n\t\t\t\t\t\tchangeVerticalDirection(ball1);\r\n\t\t\t\t\t\tchangeHorizontalDirection(ball2);\r\n\t\t\t\t\t\tchangeVerticalDirection(ball2);\r\n\t\t\t\t\t\trepaint();//optional\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\r\n\t\tprivate void horizontalMove() {\r\n\t\r\n\t\t\tfor(Ball ball : balls){\r\n\t\t\t\tdouble maxX = ball.getBounds().getMaxX();\r\n\t\t\t\tif(ball.isMovingRight()){\r\n\t\t\t\t\tif(maxX &lt; getWidth() || ball.x &lt;= 0){\r\n\t\t\t\t\t\tball.x += ball.getSpeed(); //keep moving right\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif(!ball.isMovingRight()){\r\n\t\t\t\t\tif(ball.x &gt; 0 || maxX &gt;= getWidth()){\r\n\t\t\t\t\t\tball.x -= ball.getSpeed();//keep moving left\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tchangeHorizontalDirection(ball);\r\n\t\t\t}\r\n\t\t}\r\n\t\r\n\t\tprivate void verticalMove() {\r\n\t\r\n\t\t\tfor(Ball ball : balls){\r\n\t\t\t\tdouble maxY = ball.getBounds().getMaxY();\r\n\t\t\t\tif(ball.isMovingDown()){\r\n\t\t\t\t\tif(maxY&lt;getHeight() || ball.y &lt;=0){\r\n\t\t\t\t\t\tball.y += ball.getSpeed(); //keep moving down\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif(!ball.isMovingDown()){\r\n\t\t\t\t\t//ball is moving up\r\n\t\t\t\t\tif(ball.y &gt; 0 || ball.y &gt;= maxY){\r\n\t\t\t\t\t\tball.y -= ball.getSpeed();//keep moving up\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tchangeVerticalDirection(ball);\r\n\t\t\t}\r\n\t\t}\r\n\t\r\n\t\tprivate void changeHorizontalDirection(Ball ball){\r\n\t\t\tball.setMovingRight(! ball.isMovingRight());\r\n\t\t\tball.x = ball.isMovingRight() ? ball.x + ball.getSpeed() :  ball.x - ball.getSpeed();\r\n\t\t}\r\n\t\r\n\t\tprivate void changeVerticalDirection(Ball ball){\r\n\t\t\tball.setMovingDown(! ball.isMovingDown());\r\n\t\t\tball.y = ball.isMovingDown() ? ball.y + ball.getSpeed() :  ball.y - ball.getSpeed();\r\n\t\t}\r\n\t\r\n\t\r\n\t\t@Override\r\n\t\tpublic Dimension preferredSize() {\r\n\t\t\treturn size;\r\n\t\t}\r\n\t}\r\n\t\r\n\tclass Ball extends Ellipse2D.Double{\r\n\t\r\n\t\tprivate static final int SPEED = 10, SHAPE_SIZE = 40;\r\n\t\tprivate Color color;\r\n\t\tprivate int speed;\r\n\t\tprivate boolean isMovingRight, isMovingDown;\r\n\t\r\n\t\tpublic Ball(Color color, int x, int y) {\r\n\t\t\tsuper(x,y,SHAPE_SIZE, SHAPE_SIZE);\r\n\t\t\tthis.color = color;\r\n\t\t\tRandom rnd = new Random();\r\n\t\t\tisMovingRight = rnd.nextBoolean();\r\n\t\t\tisMovingDown = rnd.nextBoolean();\r\n\t\t\tspeed = SPEED;\r\n\t\t}\r\n\t\r\n\t\tpublic Color getColor() {\r\n\t\t\treturn color;\r\n\t\t}\r\n\t\r\n\t\tpublic void setColor(Color color) {\r\n\t\t\tthis.color = color;\r\n\t\t}\r\n\t\r\n\t\tpublic int getSpeed() {\r\n\t\t\treturn speed;\r\n\t\t}\r\n\t\r\n\t\tpublic void setSpeed(int speed) {\r\n\t\t\tthis.speed = speed;\r\n\t\t}\r\n\t\r\n\t\tpublic boolean isMovingRight() {\r\n\t\t\treturn isMovingRight;\r\n\t\t}\r\n\t\r\n\t\tpublic void setMovingRight(boolean isMovingRight) {\r\n\t\t\tthis.isMovingRight = isMovingRight;\r\n\t\t}\r\n\t\r\n\t\tpublic boolean isMovingDown() {\r\n\t\t\treturn isMovingDown;\r\n\t\t}\r\n\t\r\n\t\tpublic void setMovingDown(boolean isMovingDown) {\r\n\t\t\tthis.isMovingDown = isMovingDown;\r\n\t\t}\r\n\t} \r\n&lt;hr&gt;\r\n\r\nRun it online [here](https://replit.com/@c0derrepo/ShapesCollision#Main.java)","title":"Swing collision detection","body":"<p>As proposed by camickr use <code>Shape</code> for easy collision detection. <br/>\nThe following is a one-file <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">mre</a> (copy paste the entire code into <code>ShapesCollision.java</code> and run) of a basic implementation of it:</p>\n<pre><code>import java.awt.*;\nimport java.awt.event.*;\nimport java.awt.geom.Ellipse2D;\nimport java.util.*;\nimport java.util.List;\nimport javax.swing.Timer;\nimport javax.swing.*;\n\n\npublic class ShapesCollision extends JPanel implements ActionListener {\n\n    private final static int H = 350, W = 400, RATE = 30;\n    private final static Color BG = Color.DARK_GRAY;\n    private final static Color[] SHAPE_COLORS ={Color.RED, Color.BLUE};//to have more balls, add more colors\n    private final List&lt;Ball&gt; balls;\n\n    private final Dimension size;\n\n    public ShapesCollision() {\n\n        Random rnd = new Random();\n        balls = new ArrayList&lt;&gt;();\n\n        for(Color color : SHAPE_COLORS){\n            //todo check that added shape does not overlap previous ones \n            balls.add(new Ball(color,rnd.nextInt(W), rnd.nextInt(H)));\n        }\n\n        Timer timer = new Timer(RATE,this);\n        timer.start();\n\n        size = new Dimension(W,H);\n        setBackground(BG);\n        setVisible(true);\n    }\n\n    @Override\n    public void paintComponent(Graphics g) { //for custom painting override paintComponent, not paint\n        super.paintComponent(g);\n        Graphics2D g2D = (Graphics2D) g;\n        for(Ball ball : balls){\n            g2D.setColor(ball.getColor());\n            g2D.draw(ball);\n            g2D.fill(ball);\n        }\n    }\n\n    public static void main(String[] args) {\n\n        JFrame myFrame = new JFrame(&quot;Colliding Shapes&quot;);\n        myFrame.setLocationByPlatform(true);;\n        myFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        myFrame.add(new ShapesCollision());\n        myFrame.pack();\n        myFrame.setVisible(true);\n    }\n\n    @Override\n    public void actionPerformed(ActionEvent e) {\n\n        checkCollision();\n        horizontalMove();\n        verticalMove();\n        repaint();\n    }\n\n    private void checkCollision() {\n        for(Ball ball1 : balls){\n            for(Ball ball2 : balls){\n                if(ball1 == ball2) {\n                    continue;\n                }\n                if(ball1.intersects(ball2.getBounds2D())){\n                    changeHorizontalDirection(ball1);\n                    changeVerticalDirection(ball1);\n                    changeHorizontalDirection(ball2);\n                    changeVerticalDirection(ball2);\n                    repaint();//optional\n                }\n            }\n        }\n    }\n\n    private void horizontalMove() {\n\n        for(Ball ball : balls){\n            double maxX = ball.getBounds().getMaxX();\n            if(ball.isMovingRight()){\n                if(maxX &lt; getWidth() || ball.x &lt;= 0){\n                    ball.x += ball.getSpeed(); //keep moving right\n                    continue;\n                }\n            }\n            if(!ball.isMovingRight()){\n                if(ball.x &gt; 0 || maxX &gt;= getWidth()){\n                    ball.x -= ball.getSpeed();//keep moving left\n                    continue;\n                }\n            }\n            changeHorizontalDirection(ball);\n        }\n    }\n\n    private void verticalMove() {\n\n        for(Ball ball : balls){\n            double maxY = ball.getBounds().getMaxY();\n            if(ball.isMovingDown()){\n                if(maxY&lt;getHeight() || ball.y &lt;=0){\n                    ball.y += ball.getSpeed(); //keep moving down\n                    continue;\n                }\n            }\n            if(!ball.isMovingDown()){\n                //ball is moving up\n                if(ball.y &gt; 0 || ball.y &gt;= maxY){\n                    ball.y -= ball.getSpeed();//keep moving up\n                    continue;\n                }\n            }\n            changeVerticalDirection(ball);\n        }\n    }\n\n    private void changeHorizontalDirection(Ball ball){\n        ball.setMovingRight(! ball.isMovingRight());\n        ball.x = ball.isMovingRight() ? ball.x + ball.getSpeed() :  ball.x - ball.getSpeed();\n    }\n\n    private void changeVerticalDirection(Ball ball){\n        ball.setMovingDown(! ball.isMovingDown());\n        ball.y = ball.isMovingDown() ? ball.y + ball.getSpeed() :  ball.y - ball.getSpeed();\n    }\n\n\n    @Override\n    public Dimension preferredSize() {\n        return size;\n    }\n}\n\nclass Ball extends Ellipse2D.Double{\n\n    private static final int SPEED = 10, SHAPE_SIZE = 40;\n    private Color color;\n    private int speed;\n    private boolean isMovingRight, isMovingDown;\n\n    public Ball(Color color, int x, int y) {\n        super(x,y,SHAPE_SIZE, SHAPE_SIZE);\n        this.color = color;\n        Random rnd = new Random();\n        isMovingRight = rnd.nextBoolean();\n        isMovingDown = rnd.nextBoolean();\n        speed = SPEED;\n    }\n\n    public Color getColor() {\n        return color;\n    }\n\n    public void setColor(Color color) {\n        this.color = color;\n    }\n\n    public int getSpeed() {\n        return speed;\n    }\n\n    public void setSpeed(int speed) {\n        this.speed = speed;\n    }\n\n    public boolean isMovingRight() {\n        return isMovingRight;\n    }\n\n    public void setMovingRight(boolean isMovingRight) {\n        this.isMovingRight = isMovingRight;\n    }\n\n    public boolean isMovingDown() {\n        return isMovingDown;\n    }\n\n    public void setMovingDown(boolean isMovingDown) {\n        this.isMovingDown = isMovingDown;\n    }\n} \n</code></pre>\n<hr>\n<p>Run it online <a href=\"https://replit.com/@c0derrepo/ShapesCollision#Main.java\" rel=\"nofollow noreferrer\">here</a></p>\n"}],"owner":{"account_id":21237178,"reputation":15,"user_id":15621201,"display_name":"Eeplo"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":380,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":70022242,"answer_count":1,"score":0,"last_activity_date":1637249022,"creation_date":1637181616,"question_id":70011258,"body_markdown":"I just made my first game in java, but the collision detection completely sucks.\r\nDoes anyone have an idea on how to fix it?\r\nI&#39;ve tried multiple things already but none of them worked.\r\nI&#39;ve the rocks come from above the player they get detected, but if the player hits them sideways they don&#39;t hit him.\r\n\r\n```    \r\n    public void checkRock(){\r\n        if((x == rockX &amp;&amp; y == rockY) || (x==rockX &amp;&amp; y+1 ==rockY) || (x==rockX &amp;&amp; y+2 ==rockY)){\r\n            running = false;\r\n        }\r\n        else if((x+1 == rockX &amp;&amp; y == rockY) || (x+1==rockX &amp;&amp; y+1 ==rockY) || (x+1==rockX &amp;&amp; y+2 ==rockY)){\r\n            running = false;\r\n        }\r\n        if(!running){\r\n            timer.stop();\r\n        }\r\n    }\r\n```\r\n\r\nFull code:\r\n\r\n ```\r\n\r\nimport java.awt.*;\r\nimport java.awt.event.*;\r\nimport javax.swing.*;\r\nimport javax.swing.text.AttributeSet.ColorAttribute;\r\n\r\nimport java.util.Random;\r\nimport java.util.random.*;\r\n\r\npublic class GamePanel extends JPanel implements ActionListener{\r\n    static final int SCREEN_WIDTH = 600;\r\n    static final int SCREEN_HEIGHT = 600;\r\n    static final int UNIT_SIZE = 25;\r\n    static final int GAME_UNITS = (SCREEN_HEIGHT*SCREEN_WIDTH)/UNIT_SIZE;\r\n    static final int DELAY = 75;\r\n\r\n    int x = 0;\r\n    int y = SCREEN_HEIGHT-(UNIT_SIZE*3);\r\n\r\n    int rocksFallen;\r\n    int rockX;\r\n    int rockY = 0;\r\n\r\n    char direction = &#39;R&#39;;\r\n    char directionRock = &#39;D&#39;;\r\n\r\n    boolean running = false;\r\n    Timer timer;\r\n    Random random;\r\n\r\n    GamePanel(){\r\n        random = new Random();\r\n        this.setPreferredSize(new Dimension(SCREEN_WIDTH,SCREEN_HEIGHT));\r\n        this.setBackground(Color.BLACK);\r\n        this.setFocusable(true);\r\n        this.addKeyListener(new MyKeyAdapter());\r\n        startGame();\r\n    }\r\n\r\n    public void startGame(){\r\n        newRock();\r\n        running = true;\r\n        timer = new Timer(DELAY,this);\r\n        timer.start();\r\n    }\r\n\r\n    public void paintComponent(Graphics g){\r\n        super.paintComponent(g);\r\n        draw(g);\r\n    }\r\n\r\n    public void draw(Graphics g){\r\n        if(running){\r\n            for(int i = 0;i&lt;SCREEN_HEIGHT/UNIT_SIZE;i++){\r\n                g.drawLine(i*UNIT_SIZE, 0, i*UNIT_SIZE, SCREEN_HEIGHT);\r\n                g.drawLine(0, i*UNIT_SIZE, SCREEN_WIDTH, i*UNIT_SIZE);\r\n            }\r\n            g.setColor(Color.red);\r\n            g.fillOval(rockX, rockY, UNIT_SIZE, UNIT_SIZE);\r\n\r\n            g.setColor(Color.green);\r\n            g.fillRect(x, y, UNIT_SIZE*2, UNIT_SIZE*3);\r\n        }\r\n        else{\r\n            gameOver(g);\r\n        }\r\n\r\n\r\n    }\r\n\r\n    public void newRock(){\r\n        rockX = random.nextInt((int)(SCREEN_WIDTH/UNIT_SIZE))*UNIT_SIZE;\r\n        rockY = 0;\r\n    }\r\n\r\n    public void move(){\r\n        switch (direction){\r\n            case &#39;R&#39;:\r\n                if (x&lt;SCREEN_WIDTH-(UNIT_SIZE*2)){\r\n                    x = x+UNIT_SIZE;\r\n                }\r\n                break;\r\n\r\n            case &#39;L&#39;:\r\n                if (x&gt;0){\r\n                    x = x-UNIT_SIZE;\r\n                }\r\n                break;\r\n        }\r\n\r\n        if(directionRock==&#39;D&#39;){\r\n            rockY = rockY+UNIT_SIZE;\r\n        }\r\n    }\r\n\r\n    public void checkRock(){\r\n        if((x == rockX &amp;&amp; y == rockY) || (x==rockX &amp;&amp; y+1 ==rockY) || (x==rockX &amp;&amp; y+2 ==rockY)){\r\n            running = false;\r\n        }\r\n        else if((x+1 == rockX &amp;&amp; y == rockY) || (x+1==rockX &amp;&amp; y+1 ==rockY) || (x+1==rockX &amp;&amp; y+2 ==rockY)){\r\n            running = false;\r\n        }\r\n        if(!running){\r\n            timer.stop();\r\n        }\r\n    }\r\n\r\n    public void checkCollisions(){\r\n        if(rockY&gt;SCREEN_HEIGHT){\r\n            newRock();\r\n            rocksFallen++;\r\n        }\r\n    }\r\n\r\n    public void gameOver(Graphics g){\r\n        g.setColor(Color.red);\r\n        g.setFont(new Font(&quot;Ink Free&quot;,Font.BOLD,75));\r\n        FontMetrics metrics = getFontMetrics(g.getFont());\r\n        g.drawString(&quot;Game Over&quot;, (SCREEN_WIDTH-metrics.stringWidth(&quot;Game OVer&quot;))/2, SCREEN_HEIGHT/2);\r\n    }\r\n\r\n    @Override\r\n    public void actionPerformed(ActionEvent e){\r\n        if(running){\r\n            move();\r\n            checkRock();\r\n            checkCollisions();\r\n        }\r\n\r\n        repaint();\r\n    }\r\n\r\n    public class MyKeyAdapter extends KeyAdapter{\r\n        @Override\r\n        public void keyPressed(KeyEvent e){\r\n            switch (e.getKeyCode()){\r\n                case KeyEvent.VK_LEFT:\r\n                    direction = &#39;L&#39;;\r\n                    break;\r\n\r\n                case KeyEvent.VK_RIGHT:\r\n                    direction = &#39;R&#39;;\r\n                    break;\r\n\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n ```\r\nGameFrame code:\r\n ```\r\nimport javax.swing.*;\r\nimport javax.swing.text.AttributeSet.ColorAttribute;\r\n\r\nimport java.util.Random;\r\nimport java.util.random.*;\r\n\r\npublic class GameFrame extends JFrame{\r\n    GameFrame(){\r\n        this.add(new GamePanel());\r\n        this.setTitle(&quot;FlyingRocks&quot;);\r\n        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n        this.setResizable(false);\r\n        this.pack();\r\n        this.setVisible(true);\r\n        this.setLocationRelativeTo(null);\r\n    }\r\n}\r\n ```\r\nMain Code:\r\n```\r\npublic class Game extends JFrame{\r\n    public static void main(String[] args) {\r\n        new GameFrame();\r\n    }\r\n}","title":"Swing collision detection","body":"<p>I just made my first game in java, but the collision detection completely sucks.\nDoes anyone have an idea on how to fix it?\nI've tried multiple things already but none of them worked.\nI've the rocks come from above the player they get detected, but if the player hits them sideways they don't hit him.</p>\n<pre><code>    public void checkRock(){\n        if((x == rockX &amp;&amp; y == rockY) || (x==rockX &amp;&amp; y+1 ==rockY) || (x==rockX &amp;&amp; y+2 ==rockY)){\n            running = false;\n        }\n        else if((x+1 == rockX &amp;&amp; y == rockY) || (x+1==rockX &amp;&amp; y+1 ==rockY) || (x+1==rockX &amp;&amp; y+2 ==rockY)){\n            running = false;\n        }\n        if(!running){\n            timer.stop();\n        }\n    }\n</code></pre>\n<p>Full code:</p>\n<pre><code>\nimport java.awt.*;\nimport java.awt.event.*;\nimport javax.swing.*;\nimport javax.swing.text.AttributeSet.ColorAttribute;\n\nimport java.util.Random;\nimport java.util.random.*;\n\npublic class GamePanel extends JPanel implements ActionListener{\n   static final int SCREEN_WIDTH = 600;\n   static final int SCREEN_HEIGHT = 600;\n   static final int UNIT_SIZE = 25;\n   static final int GAME_UNITS = (SCREEN_HEIGHT*SCREEN_WIDTH)/UNIT_SIZE;\n   static final int DELAY = 75;\n\n   int x = 0;\n   int y = SCREEN_HEIGHT-(UNIT_SIZE*3);\n\n   int rocksFallen;\n   int rockX;\n   int rockY = 0;\n\n   char direction = 'R';\n   char directionRock = 'D';\n\n   boolean running = false;\n   Timer timer;\n   Random random;\n\n   GamePanel(){\n       random = new Random();\n       this.setPreferredSize(new Dimension(SCREEN_WIDTH,SCREEN_HEIGHT));\n       this.setBackground(Color.BLACK);\n       this.setFocusable(true);\n       this.addKeyListener(new MyKeyAdapter());\n       startGame();\n   }\n\n   public void startGame(){\n       newRock();\n       running = true;\n       timer = new Timer(DELAY,this);\n       timer.start();\n   }\n\n   public void paintComponent(Graphics g){\n       super.paintComponent(g);\n       draw(g);\n   }\n\n   public void draw(Graphics g){\n       if(running){\n           for(int i = 0;i&lt;SCREEN_HEIGHT/UNIT_SIZE;i++){\n               g.drawLine(i*UNIT_SIZE, 0, i*UNIT_SIZE, SCREEN_HEIGHT);\n               g.drawLine(0, i*UNIT_SIZE, SCREEN_WIDTH, i*UNIT_SIZE);\n           }\n           g.setColor(Color.red);\n           g.fillOval(rockX, rockY, UNIT_SIZE, UNIT_SIZE);\n\n           g.setColor(Color.green);\n           g.fillRect(x, y, UNIT_SIZE*2, UNIT_SIZE*3);\n       }\n       else{\n           gameOver(g);\n       }\n\n\n   }\n\n   public void newRock(){\n       rockX = random.nextInt((int)(SCREEN_WIDTH/UNIT_SIZE))*UNIT_SIZE;\n       rockY = 0;\n   }\n\n   public void move(){\n       switch (direction){\n           case 'R':\n               if (x&lt;SCREEN_WIDTH-(UNIT_SIZE*2)){\n                   x = x+UNIT_SIZE;\n               }\n               break;\n\n           case 'L':\n               if (x&gt;0){\n                   x = x-UNIT_SIZE;\n               }\n               break;\n       }\n\n       if(directionRock=='D'){\n           rockY = rockY+UNIT_SIZE;\n       }\n   }\n\n   public void checkRock(){\n       if((x == rockX &amp;&amp; y == rockY) || (x==rockX &amp;&amp; y+1 ==rockY) || (x==rockX &amp;&amp; y+2 ==rockY)){\n           running = false;\n       }\n       else if((x+1 == rockX &amp;&amp; y == rockY) || (x+1==rockX &amp;&amp; y+1 ==rockY) || (x+1==rockX &amp;&amp; y+2 ==rockY)){\n           running = false;\n       }\n       if(!running){\n           timer.stop();\n       }\n   }\n\n   public void checkCollisions(){\n       if(rockY&gt;SCREEN_HEIGHT){\n           newRock();\n           rocksFallen++;\n       }\n   }\n\n   public void gameOver(Graphics g){\n       g.setColor(Color.red);\n       g.setFont(new Font(&quot;Ink Free&quot;,Font.BOLD,75));\n       FontMetrics metrics = getFontMetrics(g.getFont());\n       g.drawString(&quot;Game Over&quot;, (SCREEN_WIDTH-metrics.stringWidth(&quot;Game OVer&quot;))/2, SCREEN_HEIGHT/2);\n   }\n\n   @Override\n   public void actionPerformed(ActionEvent e){\n       if(running){\n           move();\n           checkRock();\n           checkCollisions();\n       }\n\n       repaint();\n   }\n\n   public class MyKeyAdapter extends KeyAdapter{\n       @Override\n       public void keyPressed(KeyEvent e){\n           switch (e.getKeyCode()){\n               case KeyEvent.VK_LEFT:\n                   direction = 'L';\n                   break;\n\n               case KeyEvent.VK_RIGHT:\n                   direction = 'R';\n                   break;\n\n           }\n       }\n   }\n}\n\n</code></pre>\n<p>GameFrame code:</p>\n<pre><code>import javax.swing.*;\nimport javax.swing.text.AttributeSet.ColorAttribute;\n\nimport java.util.Random;\nimport java.util.random.*;\n\npublic class GameFrame extends JFrame{\n   GameFrame(){\n       this.add(new GamePanel());\n       this.setTitle(&quot;FlyingRocks&quot;);\n       this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n       this.setResizable(false);\n       this.pack();\n       this.setVisible(true);\n       this.setLocationRelativeTo(null);\n   }\n}\n</code></pre>\n<p>Main Code:</p>\n<pre><code>public class Game extends JFrame{\n    public static void main(String[] args) {\n        new GameFrame();\n    }\n}\n</code></pre>\n"},{"tags":["java","android","permissions"],"answers":[{"tags":[],"owner":{"account_id":19297324,"reputation":91,"user_id":14106028,"display_name":"Dumidor Dumbleplex"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637248958,"creation_date":1637248958,"answer_id":70022436,"question_id":70022319,"body_markdown":"One way would be to get the process of the app you want to leech-on and then get the location of the window if present then offset your app from that window.\r\n\r\nSome googling and you could get across some ideas [here][1]\r\n\r\n\r\n  [1]: https://social.msdn.microsoft.com/Forums/vstudio/en-US/4d60f5f1-add9-4345-a55f-676bf63e4e6e/vbnet-active-window?forum=vbgeneral","title":"how to display a image over other apps(like timer in YourHour app)?","body":"<p>One way would be to get the process of the app you want to leech-on and then get the location of the window if present then offset your app from that window.</p>\n<p>Some googling and you could get across some ideas <a href=\"https://social.msdn.microsoft.com/Forums/vstudio/en-US/4d60f5f1-add9-4345-a55f-676bf63e4e6e/vbnet-active-window?forum=vbgeneral\" rel=\"nofollow noreferrer\">here</a></p>\n"}],"owner":{"account_id":20669544,"reputation":41,"user_id":15175610,"display_name":"theyash15"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":65,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1637248958,"creation_date":1637248505,"question_id":70022319,"body_markdown":"I wanted to make an app that displays a image over other apps.\r\nThe best example i could was the timer that is displayed over other apps in YourHour App.\r\nThe timer keep track of the time I spent on the currently opened app.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/RXL0O.jpg\r\n\r\nBut I really don&#39;t know how to start with the problem.\r\nSo, any type of answer is allowed.\r\n\r\n**Other important things that might help you give a answer**\r\n\r\nYourHour app takes two permissions \r\n1. Display over other apps\r\n2. Usage Access","title":"how to display a image over other apps(like timer in YourHour app)?","body":"<p>I wanted to make an app that displays a image over other apps.\nThe best example i could was the timer that is displayed over other apps in YourHour App.\nThe timer keep track of the time I spent on the currently opened app.</p>\n<p><a href=\"https://i.stack.imgur.com/RXL0O.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RXL0O.jpg\" alt=\"enter image description here\" /></a></p>\n<p>But I really don't know how to start with the problem.\nSo, any type of answer is allowed.</p>\n<p><strong>Other important things that might help you give a answer</strong></p>\n<p>YourHour app takes two permissions</p>\n<ol>\n<li>Display over other apps</li>\n<li>Usage Access</li>\n</ol>\n"},{"tags":["java","maven","intellij-idea","testng","maven-surefire-plugin"],"comments":[{"owner":{"account_id":6936317,"reputation":4279,"user_id":5324105,"display_name":"Rahul L"},"score":0,"creation_date":1611305864,"post_id":65841993,"comment_id":116413455,"body_markdown":"Reporter.log(&quot;some log&quot;,true); It will print on console","body":"Reporter.log(&quot;some log&quot;,true); It will print on console"},{"owner":{"account_id":15021669,"reputation":33,"user_id":10842920,"display_name":"kleewan"},"score":0,"creation_date":1611316806,"post_id":65841993,"comment_id":116418055,"body_markdown":"@RahulL Does that mean I can&#39;t use log4j along with TestNG (without coding some custom Appender)? I was really hoping for a quick way to disable that behavior...","body":"@RahulL Does that mean I can&#39;t use log4j along with TestNG (without coding some custom Appender)? I was really hoping for a quick way to disable that behavior..."},{"owner":{"account_id":6936317,"reputation":4279,"user_id":5324105,"display_name":"Rahul L"},"score":0,"creation_date":1611317613,"post_id":65841993,"comment_id":116418414,"body_markdown":"You can create one wrapper logger method . Call this method everywhere  .Wrapper method will have  /og4j log() &amp;  Reporter.log()","body":"You can create one wrapper logger method . Call this method everywhere  .Wrapper method will have  /og4j log() &amp;  Reporter.log()"},{"owner":{"account_id":15021669,"reputation":33,"user_id":10842920,"display_name":"kleewan"},"score":0,"creation_date":1611318015,"post_id":65841993,"comment_id":116418601,"body_markdown":"@RahulL that way I would have the same log line printed twice in the console; one in real time (reporter), and one at the end of execution (log4j). Not so elegant...","body":"@RahulL that way I would have the same log line printed twice in the console; one in real time (reporter), and one at the end of execution (log4j). Not so elegant..."},{"owner":{"account_id":2273465,"reputation":15439,"user_id":2000323,"display_name":"Andrey"},"score":0,"creation_date":1611330055,"post_id":65841993,"comment_id":116424634,"body_markdown":"If you are using IntelliJ IDEA, why don&#39;t you use IDE&#39;s own Tests Runner? It will print the output at the moment when it is available.","body":"If you are using IntelliJ IDEA, why don&#39;t you use IDE&#39;s own Tests Runner? It will print the output at the moment when it is available."},{"owner":{"account_id":15021669,"reputation":33,"user_id":10842920,"display_name":"kleewan"},"score":0,"creation_date":1611332757,"post_id":65841993,"comment_id":116426098,"body_markdown":"@Andrey running through the integrated TestNG runner seems to work just fine. So, do I have to assume that the culprit is Maven Surefire? Can you please explain this in detail?","body":"@Andrey running through the integrated TestNG runner seems to work just fine. So, do I have to assume that the culprit is Maven Surefire? Can you please explain this in detail?"},{"owner":{"account_id":8638886,"reputation":545,"user_id":6468117,"display_name":"SHI Zhong Ping"},"score":1,"creation_date":1617868280,"post_id":65841993,"comment_id":118429635,"body_markdown":"Have you tried to downgrade the maven-surefire-plugin from M5 to M3 or M4? I have the same issue once I upgrade M3 to M5.","body":"Have you tried to downgrade the maven-surefire-plugin from M5 to M3 or M4? I have the same issue once I upgrade M3 to M5."}],"owner":{"account_id":15021669,"reputation":33,"user_id":10842920,"display_name":"kleewan"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":516,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1637248935,"creation_date":1611305568,"question_id":65841993,"body_markdown":"I&#39;m working on a test automation project using Maven (with Surefire plugin) and TestNG. Since I have very long-running UI scripts (up to 20 minutes), I make intensive use of logging to the console. This is crucial to me, at least in the developing phase of each script. However, logs gets dumped all at once at the end of the execution, instead of being printed in real-time. I realize this makes perfect sense in case of parallel execution (to avoid overlapping issues), but I would like a way to disable this when executing in a serial fashion. I&#39;ve searched both Surefire and TestNG documentations, but I can&#39;t seem to find a way. Any help would be appreciated. This is a very simple dummy project to reproduce the issue:\r\n\r\nprojectRoot/pom.xml\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;groupId&gt;org.example&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;project&lt;/artifactId&gt;\r\n\t&lt;version&gt;1.0&lt;/version&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;maven.compiler.source&gt;11&lt;/maven.compiler.source&gt;\r\n\t\t&lt;maven.compiler.target&gt;11&lt;/maven.compiler.target&gt;\r\n\t\t&lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;build&gt;\r\n\t\t&lt;pluginManagement&gt;\r\n\t\t\t&lt;plugins&gt;\r\n\t\t\t\t&lt;plugin&gt;\r\n\t\t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n\t\t\t\t\t&lt;version&gt;3.0.0-M5&lt;/version&gt;\r\n\t\t\t\t&lt;/plugin&gt;\r\n\t\t\t&lt;/plugins&gt;\r\n\t\t&lt;/pluginManagement&gt;\r\n\t&lt;/build&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.testng&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;testng&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;7.3.0&lt;/version&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n&lt;/project&gt;\r\n```\r\n\r\nprojectRoot/src/test/java/DummyTest.java\r\n```\r\nimport org.testng.annotations.*;\r\n\r\npublic class DummyTest {\r\n    @Test\r\n    public void ConsoleLoggingTest() {\r\n        System.out.println(&quot;STARTING TEST...&quot;);\r\n        try { Thread.sleep(30000); } catch (Exception ignored) { } //SIMULATE LONG-RUNNING TASK\r\n        System.out.println(&quot;TEST IS FINISHED!&quot;);\r\n    }\r\n}\r\n```\r\n\r\nI use to execute tests with the `mvn test` command in my IDE (IntelliJ IDEA). Please note that I used `System.out.println()` for the sake of simplicity, but I get the same behavior using any logging library, like log4j.","title":"Logs get dumped to console all at once when the execution is over, instead of being printed in real time","body":"<p>I'm working on a test automation project using Maven (with Surefire plugin) and TestNG. Since I have very long-running UI scripts (up to 20 minutes), I make intensive use of logging to the console. This is crucial to me, at least in the developing phase of each script. However, logs gets dumped all at once at the end of the execution, instead of being printed in real-time. I realize this makes perfect sense in case of parallel execution (to avoid overlapping issues), but I would like a way to disable this when executing in a serial fashion. I've searched both Surefire and TestNG documentations, but I can't seem to find a way. Any help would be appreciated. This is a very simple dummy project to reproduce the issue:</p>\n<p>projectRoot/pom.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;groupId&gt;org.example&lt;/groupId&gt;\n    &lt;artifactId&gt;project&lt;/artifactId&gt;\n    &lt;version&gt;1.0&lt;/version&gt;\n    &lt;properties&gt;\n        &lt;maven.compiler.source&gt;11&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;11&lt;/maven.compiler.target&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;/properties&gt;\n    &lt;build&gt;\n        &lt;pluginManagement&gt;\n            &lt;plugins&gt;\n                &lt;plugin&gt;\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                    &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n                    &lt;version&gt;3.0.0-M5&lt;/version&gt;\n                &lt;/plugin&gt;\n            &lt;/plugins&gt;\n        &lt;/pluginManagement&gt;\n    &lt;/build&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.testng&lt;/groupId&gt;\n            &lt;artifactId&gt;testng&lt;/artifactId&gt;\n            &lt;version&gt;7.3.0&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n&lt;/project&gt;\n</code></pre>\n<p>projectRoot/src/test/java/DummyTest.java</p>\n<pre><code>import org.testng.annotations.*;\n\npublic class DummyTest {\n    @Test\n    public void ConsoleLoggingTest() {\n        System.out.println(&quot;STARTING TEST...&quot;);\n        try { Thread.sleep(30000); } catch (Exception ignored) { } //SIMULATE LONG-RUNNING TASK\n        System.out.println(&quot;TEST IS FINISHED!&quot;);\n    }\n}\n</code></pre>\n<p>I use to execute tests with the <code>mvn test</code> command in my IDE (IntelliJ IDEA). Please note that I used <code>System.out.println()</code> for the sake of simplicity, but I get the same behavior using any logging library, like log4j.</p>\n"},{"tags":["java","oop","arraylist"],"comments":[{"owner":{"account_id":238684,"reputation":22543,"user_id":507738,"accept_rate":71,"display_name":"MC Emperor"},"score":0,"creation_date":1637153752,"post_id":69983816,"comment_id":123748653,"body_markdown":"I was wondering, if your initial list contains `E3` and `E5`, does it matter *which* element will be added? Does it have to be `E1`, or is any of `E1`, `E2` or `E4` fine?","body":"I was wondering, if your initial list contains <code>E3</code> and <code>E5</code>, does it matter <i>which</i> element will be added? Does it have to be <code>E1</code>, or is any of <code>E1</code>, <code>E2</code> or <code>E4</code> fine?"}],"answers":[{"tags":[],"owner":{"account_id":18243171,"reputation":19300,"user_id":13279831,"display_name":"Nowhere Man"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1637090825,"creation_date":1637090825,"answer_id":69994997,"question_id":69983816,"body_markdown":"* Create a small boolean array to track which names are already used and populate it with accordingly\r\n* Find the first unused element and use it as id.\r\n```java\r\nboolean[] used = new boolean[circuit.getNbStartNodes()];\r\n\r\nfor (int i = 0; i &lt; used.length; i++) {\r\n    int index = Integer.parseInt(((StartNode) circuit.getStartNode(j)).getName().substring(1)) - 1; // should be   in range 0..4\r\n    used[index] = true;\r\n}\r\n\r\nString name = &quot;E&quot;;\r\nfor (int i = 0; i &lt; used.length; i++) {\r\n    if (!used[i]) {\r\n\t\tname += String.valueOf(i + 1); // starting from 1\r\n\t\tbreak;\r\n\t}\r\n}\r\nSystem.out.println(&quot;free name: &quot; + name);\r\nStartNode node = new StartNode();\r\nnode.setName(name);\r\n\r\n// add new node to circuit, etc.\r\n```","title":"Dynamic naming of variable (E1, E2, E3 ...)","body":"<ul>\n<li>Create a small boolean array to track which names are already used and populate it with accordingly</li>\n<li>Find the first unused element and use it as id.</li>\n</ul>\n<pre class=\"lang-java prettyprint-override\"><code>boolean[] used = new boolean[circuit.getNbStartNodes()];\n\nfor (int i = 0; i &lt; used.length; i++) {\n    int index = Integer.parseInt(((StartNode) circuit.getStartNode(j)).getName().substring(1)) - 1; // should be   in range 0..4\n    used[index] = true;\n}\n\nString name = &quot;E&quot;;\nfor (int i = 0; i &lt; used.length; i++) {\n    if (!used[i]) {\n        name += String.valueOf(i + 1); // starting from 1\n        break;\n    }\n}\nSystem.out.println(&quot;free name: &quot; + name);\nStartNode node = new StartNode();\nnode.setName(name);\n\n// add new node to circuit, etc.\n</code></pre>\n"},{"tags":[],"owner":{"account_id":238684,"reputation":22543,"user_id":507738,"accept_rate":71,"display_name":"MC Emperor"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1637248875,"creation_date":1637248875,"answer_id":70022407,"question_id":69983816,"body_markdown":"With small values, Alex&#39; solution works fine.\r\n\r\nHowever, if you ever come across a use case where the number of elements become potentially large, then you could use a `TreeSet` to keep track of the unused numbers. Further, the `nextCeilValue` is the next number to pick when there are no removed numbers.\r\n\r\nIn the below code, I have created a `UniqueNumber` class, which is able to `get` the next number, or `remove` a given number. Note that this code provides integers starting from 0. Of course, you could easily convert this to your E-numbers using the function `i -&gt; &quot;E&quot; + (i + 1)`.\r\n\r\n```java\r\npublic class UniqueNumber {\r\n\r\n    private int nextCeilValue;\r\n\r\n    private final TreeSet&lt;Integer&gt; removedNumbers = new TreeSet&lt;&gt;(Integer::compare);\r\n\r\n    public int get() {\r\n        if (removedNumbers.isEmpty()) {\r\n            return nextCeilValue++;\r\n        }\r\n        else {\r\n            int number = removedNumbers.first();\r\n            removedNumbers.remove(number);\r\n            return number;\r\n        }\r\n    }\r\n\r\n    public boolean remove(int number) {\r\n        if (number &lt; 0 || number &gt; nextCeilValue) {\r\n            return false;\r\n        }\r\n\r\n        if (number == nextCeilValue) {\r\n            nextCeilValue--;\r\n        }\r\n        else {\r\n            removedNumbers.add(number);\r\n        }\r\n        return true;\r\n    }\r\n\r\n    public int size() {\r\n        return nextCeilValue - removedNumbers.size();\r\n    }\r\n}\r\n```\r\n\r\nIn order to test this, we first need to simulate your initial situation. In our integer-starting-from-zero-world, we need the numbers 2 and 4 (representing E3 and E5). In below code, we need to call `get` five times, and then remove element 0, 1 and 3. Of course, we could have created a `UniqueNumber(int... initialValues)` constructor which does this under the hood.\r\n\r\n```java\r\nUniqueNumber un = new UniqueNumber();\r\nfor (int i = 0; i &lt; 5; i++) {\r\n    un.get();\r\n}\r\nun.remove(0); // Remove E1\r\nun.remove(1); // Remove E2\r\nun.remove(3); // Remove E4\r\n```\r\n\r\nIn order to get the next value, simply use this:\r\n\r\n```java\r\nStartNode node = new StartNode();\r\nnode.setName(&quot;E&quot; + (un.get() + 1));\r\n```","title":"Dynamic naming of variable (E1, E2, E3 ...)","body":"<p>With small values, Alex' solution works fine.</p>\n<p>However, if you ever come across a use case where the number of elements become potentially large, then you could use a <code>TreeSet</code> to keep track of the unused numbers. Further, the <code>nextCeilValue</code> is the next number to pick when there are no removed numbers.</p>\n<p>In the below code, I have created a <code>UniqueNumber</code> class, which is able to <code>get</code> the next number, or <code>remove</code> a given number. Note that this code provides integers starting from 0. Of course, you could easily convert this to your E-numbers using the function <code>i -&gt; &quot;E&quot; + (i + 1)</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class UniqueNumber {\n\n    private int nextCeilValue;\n\n    private final TreeSet&lt;Integer&gt; removedNumbers = new TreeSet&lt;&gt;(Integer::compare);\n\n    public int get() {\n        if (removedNumbers.isEmpty()) {\n            return nextCeilValue++;\n        }\n        else {\n            int number = removedNumbers.first();\n            removedNumbers.remove(number);\n            return number;\n        }\n    }\n\n    public boolean remove(int number) {\n        if (number &lt; 0 || number &gt; nextCeilValue) {\n            return false;\n        }\n\n        if (number == nextCeilValue) {\n            nextCeilValue--;\n        }\n        else {\n            removedNumbers.add(number);\n        }\n        return true;\n    }\n\n    public int size() {\n        return nextCeilValue - removedNumbers.size();\n    }\n}\n</code></pre>\n<p>In order to test this, we first need to simulate your initial situation. In our integer-starting-from-zero-world, we need the numbers 2 and 4 (representing E3 and E5). In below code, we need to call <code>get</code> five times, and then remove element 0, 1 and 3. Of course, we could have created a <code>UniqueNumber(int... initialValues)</code> constructor which does this under the hood.</p>\n<pre class=\"lang-java prettyprint-override\"><code>UniqueNumber un = new UniqueNumber();\nfor (int i = 0; i &lt; 5; i++) {\n    un.get();\n}\nun.remove(0); // Remove E1\nun.remove(1); // Remove E2\nun.remove(3); // Remove E4\n</code></pre>\n<p>In order to get the next value, simply use this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>StartNode node = new StartNode();\nnode.setName(&quot;E&quot; + (un.get() + 1));\n</code></pre>\n"}],"owner":{"account_id":19801418,"reputation":101,"user_id":14502339,"display_name":"asmazizou"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":147,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":69994997,"answer_count":2,"score":1,"last_activity_date":1637248875,"creation_date":1637037449,"question_id":69983816,"body_markdown":"I was wondering if there is a way or a library I can use to do the following:\r\n\r\nI have an arraylist of objects where each obj has a name. \r\n\r\nThe list needs to always be unique with a maximum of 5 elements like `[E1,E2,E3]`\r\n\r\nIf for example the list has initial form `[E3,E5]` and I add an object, its name should be E1 and the list will be `[E1,E3,E5]` or `[E3,E5,E1]` it doesn&#39;t matter, as long as the name is unique and the item is added to the list starting from 1 to 5.\r\n\r\nIf add another item, it should be `[E3,E5,E1,E2]`, always a unique name and between 1 and 5\r\n\r\nThese are my failed attempts, \r\n\r\n```java\r\nStartNode node = new StartNode();\r\nnode.setName(&quot;E1&quot;);\r\n\r\nfor (int i = 0; i &lt; circuit.getNbStartNodes(); i++) {\r\n    for (int j = 1; j &lt;= circuit.getNbStartNodes(); j++) {\r\n        String test = ((StartNode) circuit.getStartNode(j)).getName();\r\n        if ((&quot;E&quot;+j).equalsIgnoreCase(test) &amp;&amp; (&quot;E&quot;+j).equalsIgnoreCase(node.getName()) ) {\r\n            break;\r\n        }\r\n        else\r\n            node.setName(&quot;E&quot; + j);\r\n    }\r\n}\r\n\r\n/*while (t &lt;= circuit.getNbStartNodes()) {\r\n      for (int j = 0; j &lt; circuit.getNbStartNodes(); j++) {\r\n          String test = ((StartNode) circuit.getStartNode(j)).getName();\r\n          if ((&quot;E&quot; + t).equalsIgnoreCase(test) || (&quot;E&quot; + t).equalsIgnoreCase(node.getName()))\r\n              break;\r\n          else {\r\n              node.setName(&quot;E&quot; + t);\r\n          }\r\n      }\r\n      t++;\r\n  }\r\n*/\r\n\r\n/*  for (int i = 1; i &lt;= circuit.getNbStartNodes(); i++) {\r\n        for (int j = 0; j &lt; circuit.getNbStartNodes(); j++) {\r\n            String test = ((StartNode) circuit.getStartNode(j)).getName();\r\n            if (!(&quot;E&quot; + i).equalsIgnoreCase(test)) {\r\n                node.setName(&quot;E&quot; + i);\r\n                t=0;\r\n                break;\r\n            }\r\n        }\r\n        if (t==0)\r\n            break;\r\n        else\r\n            continue;\r\n*/\r\n//String test = ((StartNode) circuit.getStartNode(i)).getName();\r\n//for (int j = 1; j &lt;= circuit.getNbStartNodes(); j++) {\r\n//    if (!(&quot;E&quot; + j).equalsIgnoreCase(test))\r\n//       node.setName(&quot;E&quot; + j);\r\n//}\r\n```\r\n\r\nWhat did I do wrong in my code?","title":"Dynamic naming of variable (E1, E2, E3 ...)","body":"<p>I was wondering if there is a way or a library I can use to do the following:</p>\n<p>I have an arraylist of objects where each obj has a name.</p>\n<p>The list needs to always be unique with a maximum of 5 elements like <code>[E1,E2,E3]</code></p>\n<p>If for example the list has initial form <code>[E3,E5]</code> and I add an object, its name should be E1 and the list will be <code>[E1,E3,E5]</code> or <code>[E3,E5,E1]</code> it doesn't matter, as long as the name is unique and the item is added to the list starting from 1 to 5.</p>\n<p>If add another item, it should be <code>[E3,E5,E1,E2]</code>, always a unique name and between 1 and 5</p>\n<p>These are my failed attempts,</p>\n<pre class=\"lang-java prettyprint-override\"><code>StartNode node = new StartNode();\nnode.setName(&quot;E1&quot;);\n\nfor (int i = 0; i &lt; circuit.getNbStartNodes(); i++) {\n    for (int j = 1; j &lt;= circuit.getNbStartNodes(); j++) {\n        String test = ((StartNode) circuit.getStartNode(j)).getName();\n        if ((&quot;E&quot;+j).equalsIgnoreCase(test) &amp;&amp; (&quot;E&quot;+j).equalsIgnoreCase(node.getName()) ) {\n            break;\n        }\n        else\n            node.setName(&quot;E&quot; + j);\n    }\n}\n\n/*while (t &lt;= circuit.getNbStartNodes()) {\n      for (int j = 0; j &lt; circuit.getNbStartNodes(); j++) {\n          String test = ((StartNode) circuit.getStartNode(j)).getName();\n          if ((&quot;E&quot; + t).equalsIgnoreCase(test) || (&quot;E&quot; + t).equalsIgnoreCase(node.getName()))\n              break;\n          else {\n              node.setName(&quot;E&quot; + t);\n          }\n      }\n      t++;\n  }\n*/\n\n/*  for (int i = 1; i &lt;= circuit.getNbStartNodes(); i++) {\n        for (int j = 0; j &lt; circuit.getNbStartNodes(); j++) {\n            String test = ((StartNode) circuit.getStartNode(j)).getName();\n            if (!(&quot;E&quot; + i).equalsIgnoreCase(test)) {\n                node.setName(&quot;E&quot; + i);\n                t=0;\n                break;\n            }\n        }\n        if (t==0)\n            break;\n        else\n            continue;\n*/\n//String test = ((StartNode) circuit.getStartNode(i)).getName();\n//for (int j = 1; j &lt;= circuit.getNbStartNodes(); j++) {\n//    if (!(&quot;E&quot; + j).equalsIgnoreCase(test))\n//       node.setName(&quot;E&quot; + j);\n//}\n</code></pre>\n<p>What did I do wrong in my code?</p>\n"},{"tags":["java","spring","spring-boot","javabeans","spring-bean"],"comments":[{"owner":{"account_id":3380632,"reputation":14294,"user_id":2837741,"accept_rate":100,"display_name":"daniu"},"score":0,"creation_date":1637239828,"post_id":70019539,"comment_id":123776276,"body_markdown":"Do you have the wrong `@Qualifier` imported maybe?","body":"Do you have the wrong <code>@Qualifier</code> imported maybe?"},{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1637242371,"post_id":70019539,"comment_id":123777417,"body_markdown":"Ditch lombok, write a constructor yourself, which has the `@Qualifier` on the constructor arguments. Next the `ObjectMapper` is also used by Spring (Boot) itself, so you need to mark the JSON one as Primary (which could also break stuff as this will also (partially) disable auto configuration for the `ObjectMapper`).","body":"Ditch lombok, write a constructor yourself, which has the <code>@Qualifier</code> on the constructor arguments. Next the <code>ObjectMapper</code> is also used by Spring (Boot) itself, so you need to mark the JSON one as Primary (which could also break stuff as this will also (partially) disable auto configuration for the <code>ObjectMapper</code>)."},{"owner":{"account_id":1472305,"reputation":7002,"user_id":1383538,"accept_rate":67,"display_name":"Hayi"},"score":0,"creation_date":1637244043,"post_id":70019539,"comment_id":123778220,"body_markdown":"@sotiriosdelimanolis you have linked the wrong answer it is about issue like that https://stackoverflow.com/questions/46548750/spring-boot-two-object-mapper-bean","body":"@sotiriosdelimanolis you have linked the wrong answer it is about issue like that <a href=\"https://stackoverflow.com/questions/46548750/spring-boot-two-object-mapper-bean\" title=\"spring boot two object mapper bean\">stackoverflow.com/questions/46548750/&hellip;</a>"},{"owner":{"account_id":195331,"reputation":275408,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"score":0,"creation_date":1637248793,"post_id":70019539,"comment_id":123780496,"body_markdown":"@Youssef Indeed, the question did not contain the necessary details. Replaced the duplicates.","body":"@Youssef Indeed, the question did not contain the necessary details. Replaced the duplicates."}],"answers":[{"tags":[],"owner":{"account_id":433419,"reputation":1293,"user_id":818722,"accept_rate":88,"display_name":"morsor"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1637237749,"creation_date":1637237413,"answer_id":70019588,"question_id":70019539,"body_markdown":"Use the annotation:\r\n\r\n    @Resource\r\n\r\nhttps://www.baeldung.com/spring-annotations-resource-inject-autowire\r\n\r\nYour service:\r\n\r\n    @Service\r\n    public class MapperService {\r\n\r\n        @Resource(name = &quot;jsonMapper&quot;)\r\n        private final ObjectMapper jsonMapper;\r\n\r\n        @Resource(name = &quot;yamlMapper&quot;)\r\n        private final ObjectMapper yamlMapper;\r\n\r\n    }","title":"How to autowire by name instead of type","body":"<p>Use the annotation:</p>\n<pre><code>@Resource\n</code></pre>\n<p><a href=\"https://www.baeldung.com/spring-annotations-resource-inject-autowire\" rel=\"nofollow noreferrer\">https://www.baeldung.com/spring-annotations-resource-inject-autowire</a></p>\n<p>Your service:</p>\n<pre><code>@Service\npublic class MapperService {\n\n    @Resource(name = &quot;jsonMapper&quot;)\n    private final ObjectMapper jsonMapper;\n\n    @Resource(name = &quot;yamlMapper&quot;)\n    private final ObjectMapper yamlMapper;\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1472305,"reputation":7002,"user_id":1383538,"accept_rate":67,"display_name":"Hayi"},"down_vote_count":1,"up_vote_count":1,"is_accepted":true,"score":0,"last_activity_date":1637244309,"creation_date":1637239570,"answer_id":70020110,"question_id":70019539,"body_markdown":"You need to add `@Primary` annotation to one of your `ObjectMapper` beans like that\t\r\n\r\n    @Primary\r\n    @Bean(&quot;jsonMapper&quot;)\r\n\r\nBecause if you are using Spring Boot, it is needed by `Jackson` when trying auto configuration:\r\n\r\n    Parameter 0 of method mappingJackson2HttpMessageConverter in org.springframework.boot.autoconfigure.http.JacksonHttpMessageConvertersConfiguration$MappingJackson2HttpMessageConverterConfiguration required a single bean, but 2 were found:\r\n\r\nBut be careful also to as @M.Deinum comment: *could also break stuff as this will also (partially) disable auto configuration for the ObjectMapper*\r\n","title":"How to autowire by name instead of type","body":"<p>You need to add <code>@Primary</code> annotation to one of your <code>ObjectMapper</code> beans like that</p>\n<pre><code>@Primary\n@Bean(&quot;jsonMapper&quot;)\n</code></pre>\n<p>Because if you are using Spring Boot, it is needed by <code>Jackson</code> when trying auto configuration:</p>\n<pre><code>Parameter 0 of method mappingJackson2HttpMessageConverter in org.springframework.boot.autoconfigure.http.JacksonHttpMessageConvertersConfiguration$MappingJackson2HttpMessageConverterConfiguration required a single bean, but 2 were found:\n</code></pre>\n<p>But be careful also to as @M.Deinum comment: <em>could also break stuff as this will also (partially) disable auto configuration for the ObjectMapper</em></p>\n"}],"owner":{"account_id":19173164,"reputation":119,"user_id":14006438,"display_name":"Liam"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1301,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1637242167,"accepted_answer_id":70020110,"answer_count":2,"score":0,"last_activity_date":1637248821,"creation_date":1637237192,"question_id":70019539,"body_markdown":"I know I&#39;m not the first to have this problem, but I&#39;m struggling to create multiple beans of the same type in Spring Boot 2.5.4.\r\n\r\nMy config:\r\n\r\n```java\r\n@Configuration\r\npublic class MapperConfig {\r\n\r\n    @Bean(&quot;yamlMapper&quot;)\r\n    public ObjectMapper yamlMapper() {\r\n        return new ObjectMapper(new YAMLFactory());\r\n    }\r\n\r\n    @Bean(&quot;jsonMapper&quot;)\r\n    public ObjectMapper jsonMapper() {\r\n        return new ObjectMapper();\r\n    }\r\n\r\n}\r\n```\r\nAnd my service class:\r\n```java\r\n@Service\r\n@RequiredArgsConstructor\r\npublic class MapperService {\r\n\r\n    @Qualifier(&quot;jsonMapper&quot;)\r\n    private final ObjectMapper jsonMapper;\r\n\r\n    @Qualifier(&quot;yamlMapper&quot;)\r\n    private final ObjectMapper yamlMapper;\r\n\r\n}\r\n```\r\n\r\nThe error is as follows:\r\n\r\n```\r\nNo qualifying bean of type &#39;com.fasterxml.jackson.databind.ObjectMapper&#39; available: expected single matching bean but found 2: yamlMapper,jsonMapper\r\n```\r\n\r\nI&#39;ve tried the various combinations of @Bean, @Qualifier, etc. suggested in other SO posts and the docs, but I can&#39;t seem to find a way of making Spring autowire by name instead of type. Any help would be greatly appreciated!\r\n\r\n**SOLUTION:**\r\n\r\nAs pointed out by Youssef, it&#39;s not the MapperService which is failing to find the right bean, it&#39;s Spring Boot&#39;s MappingJackson2HttpMessageConverterConfiguration class. We can&#39;t add annotations to that class, so need to resort to using @Primary in our config.\r\n\r\nThe context loads okay as follows:\r\n\r\n```\r\n@Configuration\r\npublic class MapperConfig {\r\n\r\n    @Bean\r\n    public ObjectMapper yamlMapper() {\r\n        return new ObjectMapper(new YAMLFactory());\r\n    }\r\n\r\n    @Bean\r\n    @Primary\r\n    public ObjectMapper jsonMapper() {\r\n        return new ObjectMapper();\r\n    }\r\n\r\n}\r\n```\r\n```\r\n@Service\r\n@RequiredArgsConstructor\r\npublic class MapperService {\r\n\r\n    @Autowired\r\n    @Qualifier(&quot;jsonMapper&quot;)\r\n    private final ObjectMapper jsonMapper;\r\n\r\n    @Autowired\r\n    @Qualifier(&quot;yamlMapper&quot;)\r\n    private final ObjectMapper yamlMapper;\r\n\r\n}\r\n```\r\n","title":"How to autowire by name instead of type","body":"<p>I know I'm not the first to have this problem, but I'm struggling to create multiple beans of the same type in Spring Boot 2.5.4.</p>\n<p>My config:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\npublic class MapperConfig {\n\n    @Bean(&quot;yamlMapper&quot;)\n    public ObjectMapper yamlMapper() {\n        return new ObjectMapper(new YAMLFactory());\n    }\n\n    @Bean(&quot;jsonMapper&quot;)\n    public ObjectMapper jsonMapper() {\n        return new ObjectMapper();\n    }\n\n}\n</code></pre>\n<p>And my service class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Service\n@RequiredArgsConstructor\npublic class MapperService {\n\n    @Qualifier(&quot;jsonMapper&quot;)\n    private final ObjectMapper jsonMapper;\n\n    @Qualifier(&quot;yamlMapper&quot;)\n    private final ObjectMapper yamlMapper;\n\n}\n</code></pre>\n<p>The error is as follows:</p>\n<pre><code>No qualifying bean of type 'com.fasterxml.jackson.databind.ObjectMapper' available: expected single matching bean but found 2: yamlMapper,jsonMapper\n</code></pre>\n<p>I've tried the various combinations of @Bean, @Qualifier, etc. suggested in other SO posts and the docs, but I can't seem to find a way of making Spring autowire by name instead of type. Any help would be greatly appreciated!</p>\n<p><strong>SOLUTION:</strong></p>\n<p>As pointed out by Youssef, it's not the MapperService which is failing to find the right bean, it's Spring Boot's MappingJackson2HttpMessageConverterConfiguration class. We can't add annotations to that class, so need to resort to using @Primary in our config.</p>\n<p>The context loads okay as follows:</p>\n<pre><code>@Configuration\npublic class MapperConfig {\n\n    @Bean\n    public ObjectMapper yamlMapper() {\n        return new ObjectMapper(new YAMLFactory());\n    }\n\n    @Bean\n    @Primary\n    public ObjectMapper jsonMapper() {\n        return new ObjectMapper();\n    }\n\n}\n</code></pre>\n<pre><code>@Service\n@RequiredArgsConstructor\npublic class MapperService {\n\n    @Autowired\n    @Qualifier(&quot;jsonMapper&quot;)\n    private final ObjectMapper jsonMapper;\n\n    @Autowired\n    @Qualifier(&quot;yamlMapper&quot;)\n    private final ObjectMapper yamlMapper;\n\n}\n</code></pre>\n"},{"tags":["java","sql","hibernate"],"comments":[{"owner":{"account_id":1102504,"reputation":66096,"user_id":1094597,"accept_rate":94,"display_name":"kosa"},"score":0,"creation_date":1382452146,"post_id":19520628,"comment_id":28959006,"body_markdown":"Have you tried just R instead of R.*?","body":"Have you tried just R instead of R.*?"},{"owner":{"account_id":2391416,"reputation":3895,"user_id":2091200,"display_name":"Abhijith Nagarajan"},"score":0,"creation_date":1382452201,"post_id":19520628,"comment_id":28959036,"body_markdown":"edit the query to &quot;select R from&quot;. Omit R.* This is HQL syntax.","body":"edit the query to &quot;select R from&quot;. Omit R.* This is HQL syntax."},{"owner":{"account_id":277416,"reputation":681848,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"score":0,"creation_date":1382452212,"post_id":19520628,"comment_id":28959043,"body_markdown":"HQL works with entities, fields and associations. Never with tables and columns. It&#39;s not the same thing as SQL. If it was, it would be named SQL. Read the Hibernate documentation.","body":"HQL works with entities, fields and associations. Never with tables and columns. It&#39;s not the same thing as SQL. If it was, it would be named SQL. Read the Hibernate documentation."},{"owner":{"account_id":2929147,"reputation":1706,"user_id":2509844,"accept_rate":90,"display_name":"lukaszrys"},"score":0,"creation_date":1382452386,"post_id":19520628,"comment_id":28959174,"body_markdown":"thank you guys, yeah i have to read documentation, my bad. Thanks!","body":"thank you guys, yeah i have to read documentation, my bad. Thanks!"}],"answers":[{"tags":[],"owner":{"account_id":1135950,"reputation":10153,"user_id":1121008,"display_name":"Apostolos"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1382480905,"creation_date":1382480905,"answer_id":19529519,"question_id":19520628,"body_markdown":"you use SQL query, not hql query, so it should be\r\n\r\n    Query q = getSession().createSQLQuery(SELECT_OOPR_TO_SEND);","title":"Hibernate HQL issue expecting IDENT found &quot;*&quot;","body":"<p>you use SQL query, not hql query, so it should be</p>\n\n<pre><code>Query q = getSession().createSQLQuery(SELECT_OOPR_TO_SEND);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3391156,"reputation":1765,"user_id":2845946,"display_name":"user2845946"},"down_vote_count":0,"up_vote_count":53,"is_accepted":true,"score":53,"last_activity_date":1393507649,"creation_date":1393507649,"answer_id":22069963,"question_id":19520628,"body_markdown":"The method [`createQuery`][1] expects an HQL query string.\r\n\r\nHQL is an [object-oriented querying language][2].\r\n\r\nHQL interprets `SELECT R.*` as select the member field `*` of the object `R`.\r\n\r\nBut `*` is not a member field of `R`. Is it?..\r\n\r\nTo select all the member fields of `R` use:\r\n\r\n&lt;!-- language: lang-sql --&gt;\r\n\r\n    SELECT R\r\n    FROM offerOrderProjectRel R, offerOrder O, project P\r\n    WHERE P.id = R.project_id and O.id = R.offer_order_id\r\n    and O.type = &#39;ORDER&#39; and (P.status = &#39;PENDING&#39; or P.status =&#39;PROTECTED&#39;)\r\n\r\n\r\n  [1]: http://docs.jboss.org/hibernate/orm/4.2/javadocs/org/hibernate/SharedSessionContract.html#createQuery%28java.lang.String%29\r\n  [2]: http://docs.jboss.org/hibernate/orm/4.3/manual/en-US/html/ch16.html","title":"Hibernate HQL issue expecting IDENT found &quot;*&quot;","body":"<p>The method <a href=\"http://docs.jboss.org/hibernate/orm/4.2/javadocs/org/hibernate/SharedSessionContract.html#createQuery%28java.lang.String%29\" rel=\"noreferrer\"><code>createQuery</code></a> expects an HQL query string.</p>\n\n<p>HQL is an <a href=\"http://docs.jboss.org/hibernate/orm/4.3/manual/en-US/html/ch16.html\" rel=\"noreferrer\">object-oriented querying language</a>.</p>\n\n<p>HQL interprets <code>SELECT R.*</code> as select the member field <code>*</code> of the object <code>R</code>.</p>\n\n<p>But <code>*</code> is not a member field of <code>R</code>. Is it?..</p>\n\n<p>To select all the member fields of <code>R</code> use:</p>\n\n<pre class=\"lang-sql prettyprint-override\"><code>SELECT R\nFROM offerOrderProjectRel R, offerOrder O, project P\nWHERE P.id = R.project_id and O.id = R.offer_order_id\nand O.type = 'ORDER' and (P.status = 'PENDING' or P.status ='PROTECTED')\n</code></pre>\n"},{"tags":[],"owner":{"account_id":222726,"reputation":3846,"user_id":481528,"accept_rate":67,"display_name":"selalerer"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1591019279,"creation_date":1591019279,"answer_id":62133718,"question_id":19520628,"body_markdown":"For people that received the &quot;expecting IDENT found “*”&quot; error when using `org.springframework.data.jpa.repository.Query` and found this question I&#39;ll add that you can change the `nativeQuery` flag to `true`:\r\n\r\n    @Query(value = &quot;SELECT * FROM table1&quot;, nativeQuery = true)\r\n    List&lt;Object&gt; myFindAll();","title":"Hibernate HQL issue expecting IDENT found &quot;*&quot;","body":"<p>For people that received the \"expecting IDENT found “*”\" error when using <code>org.springframework.data.jpa.repository.Query</code> and found this question I'll add that you can change the <code>nativeQuery</code> flag to <code>true</code>:</p>\n\n<pre><code>@Query(value = \"SELECT * FROM table1\", nativeQuery = true)\nList&lt;Object&gt; myFindAll();\n</code></pre>\n"}],"owner":{"account_id":2929147,"reputation":1706,"user_id":2509844,"accept_rate":90,"display_name":"lukaszrys"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":48544,"favorite_count":0,"down_vote_count":0,"up_vote_count":22,"accepted_answer_id":22069963,"answer_count":3,"score":22,"last_activity_date":1637248204,"creation_date":1382451993,"question_id":19520628,"body_markdown":"I need get all data from relative table so I&#39;m using something like this (i would use it in sql)\r\n\r\n        private static final String SELECT_OOPR_TO_SEND = &quot;SELECT R.* &quot; +\r\n                                                          &quot;FROM offerOrderProjectRel R, offerOrder O, project P &quot; +\r\n                                                          &quot;WHERE P.id = R.project_id and O.id = R.offer_order_id &quot; +\r\n                                                          &quot;and O.type = &#39;ORDER&#39; and (P.status = &#39;PENDING&#39; or P.status =&#39;PROTECTED&#39;)&quot; ;\r\n    ; \r\n        \r\n    \r\n        @SuppressWarnings(&quot;unchecked&quot;)\r\n        public List&lt;OfferOrderProjectRel&gt; findAllOfferOrderToSendToSalesmans() {\r\n            Query q = getSession().createQuery(SELECT_OOPR_TO_SEND);\r\n            List&lt;OfferOrderProjectRel&gt; list = q.list();\r\n            return list;\r\n        }\r\n\r\nAfter lauching this code i&#39;m getting that error :\r\n\r\n&gt; org.hibernate.hql.internal.ast.QuerySyntaxException: expecting IDENT,\r\n&gt; found &#39;**&#39; near line 1, column 10 [SELECT R.* FROM offerOrderProjectRel\r\n&gt; R, offerOrder O, project P WHERE P.id = R.project_id and O.id =\r\n&gt; R.offer_order_id and O.type = &#39;ORDER&#39; and (P.status = &#39;PENDING&#39; or\r\n&gt; P.status =&#39;PROTECTED&#39;)]\r\n\r\nSo how can I obtain all data from column R with hibernate?\r\n\r\n","title":"Hibernate HQL issue expecting IDENT found &quot;*&quot;","body":"<p>I need get all data from relative table so I'm using something like this (i would use it in sql)</p>\n<pre><code>    private static final String SELECT_OOPR_TO_SEND = &quot;SELECT R.* &quot; +\n                                                      &quot;FROM offerOrderProjectRel R, offerOrder O, project P &quot; +\n                                                      &quot;WHERE P.id = R.project_id and O.id = R.offer_order_id &quot; +\n                                                      &quot;and O.type = 'ORDER' and (P.status = 'PENDING' or P.status ='PROTECTED')&quot; ;\n; \n    \n\n    @SuppressWarnings(&quot;unchecked&quot;)\n    public List&lt;OfferOrderProjectRel&gt; findAllOfferOrderToSendToSalesmans() {\n        Query q = getSession().createQuery(SELECT_OOPR_TO_SEND);\n        List&lt;OfferOrderProjectRel&gt; list = q.list();\n        return list;\n    }\n</code></pre>\n<p>After lauching this code i'm getting that error :</p>\n<blockquote>\n<p>org.hibernate.hql.internal.ast.QuerySyntaxException: expecting IDENT,\nfound '**' near line 1, column 10 [SELECT R.* FROM offerOrderProjectRel\nR, offerOrder O, project P WHERE P.id = R.project_id and O.id =\nR.offer_order_id and O.type = 'ORDER' and (P.status = 'PENDING' or\nP.status ='PROTECTED')]</p>\n</blockquote>\n<p>So how can I obtain all data from column R with hibernate?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":13290045,"reputation":164,"user_id":9594794,"display_name":"prof_FL"},"score":0,"creation_date":1637247935,"post_id":70022108,"comment_id":123780104,"body_markdown":"you should use `while(choice != &#39;Q&#39;)` instead of for loop","body":"you should use <code>while(choice != &#39;Q&#39;)</code> instead of for loop"}],"answers":[{"tags":[],"owner":{"account_id":18335265,"reputation":219,"user_id":13352796,"display_name":"vhthanh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637248143,"creation_date":1637248143,"answer_id":70022227,"question_id":70022108,"body_markdown":"When you enter a char, there&#39;s actually 2 char sent, the first one is your key, the second is the &lt;code&gt;line break&lt;/code&gt; char code, aka &lt;code&gt;\\n&lt;/code&gt;. So with the loop, it will process twice for each choice.","title":"This program repeats in the console","body":"<p>When you enter a char, there's actually 2 char sent, the first one is your key, the second is the <code>line break</code> char code, aka <code>\\n</code>. So with the loop, it will process twice for each choice.</p>\n"}],"owner":{"account_id":23382524,"reputation":1,"user_id":17448496,"display_name":"Kaleb Dodge"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":50,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1637248143,"creation_date":1637247707,"question_id":70022108,"body_markdown":"I&#39;m making this program that lists websites, username, and password data (kind of like a passwords manager), and in the console I get this:\r\n[Select: Not a valid entry! repeats twice][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/SIunH.png\r\n\r\nI&#39;m not sure why this is happening, but here is the code block:\r\n\r\n        System.out.print(&quot;PASSCODE: &quot;);\r\n        passcode = (char) System.in.read();\r\n        if(passcode == &#39;}&#39;){\r\n            System.out.println(&quot;Welcome! Enter &#39;Q&#39; to exit at any time!&quot;);\r\n            System.out.println(&quot;1) Website A \\n2) Website B \\n3) Website C \\n4) Website D&quot;);\r\n            for(;(char) choice != &#39;Q&#39;;){\r\n                System.out.print(&quot;SELECT: &quot;);\r\n                choice = (char) System.in.read();\r\n                switch(choice){\r\n                    case &#39;1&#39;:\r\n                        websiteA.Display();\r\n                        break;\r\n                    case &#39;2&#39;:\r\n                        websiteB.Display();\r\n                        break;\r\n                    case &#39;3&#39;:\r\n                        websiteC.Display();\r\n                        break;\r\n                    case &#39;4&#39;:\r\n                        websiteD.Display();\r\n                        break;\r\n                    default:\r\n                        System.out.println(&quot;\\nNot a valid entry!&quot;);\r\n                }\r\n            }\r\n        } else {System.out.println(&quot;ACCESS DENIED&quot;);}\r\n\r\nI&#39;m confused, because I would think the code would halt at System.in.read() in the for loop.\r\nAside from the objects, everything here is a conglomeration of what I&#39;ve learned up to chapter 3 from Java: A Beginner&#39;s Guide Eight Edition by Herbert Schildt. So I&#39;m still somewhat new to this.","title":"This program repeats in the console","body":"<p>I'm making this program that lists websites, username, and password data (kind of like a passwords manager), and in the console I get this:\n<a href=\"https://i.stack.imgur.com/SIunH.png\" rel=\"nofollow noreferrer\">Select: Not a valid entry! repeats twice</a></p>\n<p>I'm not sure why this is happening, but here is the code block:</p>\n<pre><code>    System.out.print(&quot;PASSCODE: &quot;);\n    passcode = (char) System.in.read();\n    if(passcode == '}'){\n        System.out.println(&quot;Welcome! Enter 'Q' to exit at any time!&quot;);\n        System.out.println(&quot;1) Website A \\n2) Website B \\n3) Website C \\n4) Website D&quot;);\n        for(;(char) choice != 'Q';){\n            System.out.print(&quot;SELECT: &quot;);\n            choice = (char) System.in.read();\n            switch(choice){\n                case '1':\n                    websiteA.Display();\n                    break;\n                case '2':\n                    websiteB.Display();\n                    break;\n                case '3':\n                    websiteC.Display();\n                    break;\n                case '4':\n                    websiteD.Display();\n                    break;\n                default:\n                    System.out.println(&quot;\\nNot a valid entry!&quot;);\n            }\n        }\n    } else {System.out.println(&quot;ACCESS DENIED&quot;);}\n</code></pre>\n<p>I'm confused, because I would think the code would halt at System.in.read() in the for loop.\nAside from the objects, everything here is a conglomeration of what I've learned up to chapter 3 from Java: A Beginner's Guide Eight Edition by Herbert Schildt. So I'm still somewhat new to this.</p>\n"},{"tags":["java","loops","logic-error"],"comments":[{"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"score":0,"creation_date":1637247028,"post_id":70021877,"comment_id":123779659,"body_markdown":"what does &quot;my loading system never works&quot; mean?","body":"what does &quot;my loading system never works&quot; mean?"},{"owner":{"account_id":13290045,"reputation":164,"user_id":9594794,"display_name":"prof_FL"},"score":2,"creation_date":1637247715,"post_id":70021877,"comment_id":123779988,"body_markdown":"the code works fine in idea, and i saw |\\/- rotating , and it prints`Welcome to LOGIN\nEnter your name(If you don&#39;t have an account, type none): Dov\nEnter your password: 1234\nACCESS GRANTED\nWelcome Dov`","body":"the code works fine in idea, and i saw |\\/- rotating , and it prints<code>Welcome to LOGIN Enter your name(If you don&#39;t have an account, type none): Dov Enter your password: 1234 ACCESS GRANTED Welcome Dov</code>"}],"answers":[{"tags":[],"owner":{"account_id":7582437,"reputation":5222,"user_id":5752737,"accept_rate":100,"display_name":"geco17"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637248048,"creation_date":1637248048,"answer_id":70022199,"question_id":70021877,"body_markdown":"The code worked fine for me too, as user9594794 mentioned in the comments.\r\n\r\nThe only suggestions I have are:\r\n\r\n1. Refactor your loading method:\r\n\r\n        char[] sequence = {&#39;-&#39;, &#39;\\\\&#39;, &#39;|&#39;, &#39;/&#39;, &#39;-&#39;, &#39;\\\\&#39;, &#39;|&#39;, &#39;/&#39;};\r\n        int n = 3; // or however many times you want the spinning text\r\n        for (int i = 1; i &lt; n; i++) {\r\n            for (char c : sequence) {\r\n                System.out.print(&quot;\\r&quot; + c);\r\n                Thread.sleep(300);\r\n            }\r\n        }\r\n\r\n2. Take a good look at your loop and conditions and possibly refactor those as well. The comment &quot;end of loop&quot; doesn&#39;t correspond with the actual end of the loop. It is true that the loop *may* not have any more iterations after that point (user Dov and password 1234) but this may not be the case.","title":"For some reason, my loading &quot;circle&quot; will not working when I have it as a method or just normally in an if statement. Anyone know why?","body":"<p>The code worked fine for me too, as user9594794 mentioned in the comments.</p>\n<p>The only suggestions I have are:</p>\n<ol>\n<li><p>Refactor your loading method:</p>\n<pre><code> char[] sequence = {'-', '\\\\', '|', '/', '-', '\\\\', '|', '/'};\n int n = 3; // or however many times you want the spinning text\n for (int i = 1; i &lt; n; i++) {\n     for (char c : sequence) {\n         System.out.print(&quot;\\r&quot; + c);\n         Thread.sleep(300);\n     }\n }\n</code></pre>\n</li>\n<li><p>Take a good look at your loop and conditions and possibly refactor those as well. The comment &quot;end of loop&quot; doesn't correspond with the actual end of the loop. It is true that the loop <em>may</em> not have any more iterations after that point (user Dov and password 1234) but this may not be the case.</p>\n</li>\n</ol>\n"}],"owner":{"account_id":23382272,"reputation":11,"user_id":17448323,"display_name":"Dov Abrahim Kanner"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1637248048,"creation_date":1637246855,"question_id":70021877,"body_markdown":"Here is the code that I have for my Test program. I have all the code in order to avoid a runtime or syntax error but I don&#39;t know if this is a logic error\r\n\r\n\r\n    import java.util.Scanner;\r\n\r\n    public class Test {\r\n      static void Load() throws InterruptedException {\r\n        System.out.print(&quot;\\r-&quot;);\r\n        Thread.sleep(300);\r\n        System.out.print(&quot;\\r\\\\&quot;);\r\n        Thread.sleep(300);\r\n        System.out.print(&quot;\\r|&quot;);\r\n        Thread.sleep(300);\r\n        System.out.print(&quot;\\r/&quot;);\r\n        Thread.sleep(300);\r\n        System.out.print(&quot;\\r-&quot;);\r\n        Thread.sleep(300);\r\n        System.out.print(&quot;\\r\\\\&quot;);\r\n        Thread.sleep(300);\r\n        System.out.print(&quot;\\r|&quot;);\r\n        Thread.sleep(300);\r\n        System.out.print(&quot;\\r/&quot;);\r\n        Thread.sleep(300);\r\n        System.out.print(&quot;\\r-&quot;);\r\n        Thread.sleep(300);\r\n        System.out.print(&quot;\\r\\\\&quot;);\r\n        Thread.sleep(300);\r\n        System.out.print(&quot;\\r|&quot;);\r\n        Thread.sleep(300);\r\n        System.out.print(&quot;\\r/&quot;);\r\n        Thread.sleep(300);\r\n        System.out.print(&quot;\\r-&quot;);\r\n        Thread.sleep(300);\r\n        System.out.print(&quot;\\r\\\\&quot;);\r\n        Thread.sleep(300);\r\n        System.out.print(&quot;\\r|&quot;);\r\n        Thread.sleep(300);\r\n        System.out.print(&quot;\\r/&quot;);\r\n        Thread.sleep(300);\r\n        System.out.print(&quot;\\r-&quot;);\r\n        Thread.sleep(300);\r\n        System.out.print(&quot;\\r\\\\&quot;);\r\n        Thread.sleep(300);\r\n        System.out.print(&quot;\\r|&quot;);\r\n        Thread.sleep(300);\r\n        System.out.print(&quot;\\r/&quot;);\r\n        Thread.sleep(300);\r\n        System.out.print(&quot;\\r-&quot;);\r\n        Thread.sleep(300);\r\n        System.out.print(&quot;\\r\\\\&quot;);\r\n        Thread.sleep(300);\r\n        System.out.print(&quot;\\r|&quot;);\r\n        Thread.sleep(300);\r\n        System.out.print(&quot;\\r/\\r&quot;);\r\n        Thread.sleep(300);\r\n     }\r\n        public static void main(String[] args) \r\n      throws InterruptedException {\r\n        // declaring variables\r\n        String user1 = &quot;&quot;;\r\n        int password;\r\n        String passyn;\r\n        String account;\r\n        String user2 = &quot;&quot;;\r\n        boolean isRunning = true;\r\n        String tryAgain = &quot;&quot;;\r\n        int new1Password = 0;\r\n        int new2Password;\r\n        // my code\r\n        while (isRunning) {\r\n          Scanner sc = new Scanner(System.in);\r\n          Load();\r\n          System.out.println(&quot;\\rWelcome to LOGIN&quot;);\r\n          System.out.print(&quot;Enter your name(If you don&#39;t have an account, type none): &quot;);\r\n          user1 = sc.next();\r\n          if (user1.equals(&quot;Dov&quot;)) {\r\n            System.out.print(&quot;Enter your password: &quot;);\r\n            password = sc.nextInt();\r\n            if (password == 1234) {\r\n              Load();\r\n              System.out.println(&quot;\\rACCESS GRANTED&quot;);\r\n              System.out.printf(&quot;Welcome %s&quot;, user1);\r\n              isRunning = false;\r\n            } else {\r\n              System.out.print(&quot;ACCESS DENIED&quot;);\r\n            }\r\n          }\r\n          // end of loop\r\n          else if (user1.equals(&quot;None&quot;) || user1.equals(&quot;none&quot;)) {\r\n            System.out.print(&quot;Do you have an account: &quot;);\r\n            passyn = sc.nextLine();\r\n            if (passyn.equals(&quot;No&quot;) || passyn.equals(&quot;no&quot;)) {\r\n              System.out.print(&quot;Type yes to sign up: &quot;);\r\n              account = sc.next();\r\n              if (account.equals(&quot;No&quot;) || account.equals(&quot;No&quot;)) {\r\n              } else {\r\n                System.out.print(&quot;What is your new username: &quot;);\r\n                user2 = sc.nextLine();\r\n                System.out.print(&quot;What is your password(Numbers only!!): &quot;);\r\n                new1Password = sc.nextInt();\r\n                System.out.print(&quot;Would you like to return to the login screen: &quot;);\r\n                tryAgain = sc.next();\r\n                if (tryAgain.equals(&quot;no&quot;) || tryAgain.equals(&quot;No&quot;)) {\r\n                  isRunning = false;\r\n                }\r\n              }\r\n            }\r\n          } else if (user1.equals(user2)) {\r\n            System.out.print(&quot;What is your password: &quot;);\r\n            new2Password = sc.nextInt();\r\n            if (new1Password == new2Password) {\r\n            Load();\r\n            System.out.println(&quot;\\rACCESS GRANTED&quot;);\r\n            System.out.printf(&quot;Welcome %s&quot;, user1);\r\n            isRunning = false;\r\n            } else {\r\n              System.out.println(&quot;ACCESS DENIED&quot;);\r\n            }\r\n          } else {\r\n            isRunning = false;\r\n          }\r\n        }\r\n      }\r\n    }\r\nIt works as a loop continuously running until ACCESS GRANTED. The program works fine but my loading system never works. I was running in it in a different program, also as a method and it worked fine. I insert it into the Test.java program and nothing happens. Any thoughts? (I am using replit.com for my IDE) ","title":"For some reason, my loading &quot;circle&quot; will not working when I have it as a method or just normally in an if statement. Anyone know why?","body":"<p>Here is the code that I have for my Test program. I have all the code in order to avoid a runtime or syntax error but I don't know if this is a logic error</p>\n<pre><code>import java.util.Scanner;\n\npublic class Test {\n  static void Load() throws InterruptedException {\n    System.out.print(&quot;\\r-&quot;);\n    Thread.sleep(300);\n    System.out.print(&quot;\\r\\\\&quot;);\n    Thread.sleep(300);\n    System.out.print(&quot;\\r|&quot;);\n    Thread.sleep(300);\n    System.out.print(&quot;\\r/&quot;);\n    Thread.sleep(300);\n    System.out.print(&quot;\\r-&quot;);\n    Thread.sleep(300);\n    System.out.print(&quot;\\r\\\\&quot;);\n    Thread.sleep(300);\n    System.out.print(&quot;\\r|&quot;);\n    Thread.sleep(300);\n    System.out.print(&quot;\\r/&quot;);\n    Thread.sleep(300);\n    System.out.print(&quot;\\r-&quot;);\n    Thread.sleep(300);\n    System.out.print(&quot;\\r\\\\&quot;);\n    Thread.sleep(300);\n    System.out.print(&quot;\\r|&quot;);\n    Thread.sleep(300);\n    System.out.print(&quot;\\r/&quot;);\n    Thread.sleep(300);\n    System.out.print(&quot;\\r-&quot;);\n    Thread.sleep(300);\n    System.out.print(&quot;\\r\\\\&quot;);\n    Thread.sleep(300);\n    System.out.print(&quot;\\r|&quot;);\n    Thread.sleep(300);\n    System.out.print(&quot;\\r/&quot;);\n    Thread.sleep(300);\n    System.out.print(&quot;\\r-&quot;);\n    Thread.sleep(300);\n    System.out.print(&quot;\\r\\\\&quot;);\n    Thread.sleep(300);\n    System.out.print(&quot;\\r|&quot;);\n    Thread.sleep(300);\n    System.out.print(&quot;\\r/&quot;);\n    Thread.sleep(300);\n    System.out.print(&quot;\\r-&quot;);\n    Thread.sleep(300);\n    System.out.print(&quot;\\r\\\\&quot;);\n    Thread.sleep(300);\n    System.out.print(&quot;\\r|&quot;);\n    Thread.sleep(300);\n    System.out.print(&quot;\\r/\\r&quot;);\n    Thread.sleep(300);\n }\n    public static void main(String[] args) \n  throws InterruptedException {\n    // declaring variables\n    String user1 = &quot;&quot;;\n    int password;\n    String passyn;\n    String account;\n    String user2 = &quot;&quot;;\n    boolean isRunning = true;\n    String tryAgain = &quot;&quot;;\n    int new1Password = 0;\n    int new2Password;\n    // my code\n    while (isRunning) {\n      Scanner sc = new Scanner(System.in);\n      Load();\n      System.out.println(&quot;\\rWelcome to LOGIN&quot;);\n      System.out.print(&quot;Enter your name(If you don't have an account, type none): &quot;);\n      user1 = sc.next();\n      if (user1.equals(&quot;Dov&quot;)) {\n        System.out.print(&quot;Enter your password: &quot;);\n        password = sc.nextInt();\n        if (password == 1234) {\n          Load();\n          System.out.println(&quot;\\rACCESS GRANTED&quot;);\n          System.out.printf(&quot;Welcome %s&quot;, user1);\n          isRunning = false;\n        } else {\n          System.out.print(&quot;ACCESS DENIED&quot;);\n        }\n      }\n      // end of loop\n      else if (user1.equals(&quot;None&quot;) || user1.equals(&quot;none&quot;)) {\n        System.out.print(&quot;Do you have an account: &quot;);\n        passyn = sc.nextLine();\n        if (passyn.equals(&quot;No&quot;) || passyn.equals(&quot;no&quot;)) {\n          System.out.print(&quot;Type yes to sign up: &quot;);\n          account = sc.next();\n          if (account.equals(&quot;No&quot;) || account.equals(&quot;No&quot;)) {\n          } else {\n            System.out.print(&quot;What is your new username: &quot;);\n            user2 = sc.nextLine();\n            System.out.print(&quot;What is your password(Numbers only!!): &quot;);\n            new1Password = sc.nextInt();\n            System.out.print(&quot;Would you like to return to the login screen: &quot;);\n            tryAgain = sc.next();\n            if (tryAgain.equals(&quot;no&quot;) || tryAgain.equals(&quot;No&quot;)) {\n              isRunning = false;\n            }\n          }\n        }\n      } else if (user1.equals(user2)) {\n        System.out.print(&quot;What is your password: &quot;);\n        new2Password = sc.nextInt();\n        if (new1Password == new2Password) {\n        Load();\n        System.out.println(&quot;\\rACCESS GRANTED&quot;);\n        System.out.printf(&quot;Welcome %s&quot;, user1);\n        isRunning = false;\n        } else {\n          System.out.println(&quot;ACCESS DENIED&quot;);\n        }\n      } else {\n        isRunning = false;\n      }\n    }\n  }\n}\n</code></pre>\n<p>It works as a loop continuously running until ACCESS GRANTED. The program works fine but my loading system never works. I was running in it in a different program, also as a method and it worked fine. I insert it into the Test.java program and nothing happens. Any thoughts? (I am using replit.com for my IDE)</p>\n"},{"tags":["java","multithreading"],"answers":[{"tags":[],"owner":{"account_id":1590699,"reputation":3309,"user_id":1474069,"accept_rate":80,"display_name":"Carlitos Way"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637247751,"creation_date":1632437652,"answer_id":69307731,"question_id":69306404,"body_markdown":"&gt; Is it a big problem?\r\n\r\nIt depends ... if memory is not a problem, no. If you want to be efficient with your memory use, then yes.\r\n\r\n&gt; If so, are there any better approaches?\r\n\r\nForget the map, you are doing nothing valuable with it ... instead, use a integer variable (let&#39;s called, `pending`) to keep track how many messages were queued and wait to be sent ... later, your `notifySendComplete` method will check if there are pending message and if they are, it must sleep/wait until there are no more messages ...\r\n\r\nTo summarize, \r\n\r\n`send` should increment the variable by one ...\r\n\r\n`doSubmit` should decrement the variable by one ...\r\n\r\n`notifySendComplete` should check the value of variable and return only when the same is zero ... to wait, you should put your thread to sleep, and check the value again, do it until the variable becomes zero.\r\n\r\nTo keep control of the variable (sync its value between threads), there are many JAVA modes:\r\n\r\n* you can used AtomicInteger ...\r\n* you can used `synchronized` methods ...\r\n\r\n\r\n**By the way**, for me, the memory problem is still there!! You may ask &quot;why&quot;? Because, you are loading 1M messages before sending them ... the approach should be: I read and send messages as long there are free threads or workers ... at the minute when there are no more workers, I should avoid reading more messages and just wait ...","title":"Using CompletableFuture and thread pool for a large number of tasks","body":"<blockquote>\n<p>Is it a big problem?</p>\n</blockquote>\n<p>It depends ... if memory is not a problem, no. If you want to be efficient with your memory use, then yes.</p>\n<blockquote>\n<p>If so, are there any better approaches?</p>\n</blockquote>\n<p>Forget the map, you are doing nothing valuable with it ... instead, use a integer variable (let's called, <code>pending</code>) to keep track how many messages were queued and wait to be sent ... later, your <code>notifySendComplete</code> method will check if there are pending message and if they are, it must sleep/wait until there are no more messages ...</p>\n<p>To summarize,</p>\n<p><code>send</code> should increment the variable by one ...</p>\n<p><code>doSubmit</code> should decrement the variable by one ...</p>\n<p><code>notifySendComplete</code> should check the value of variable and return only when the same is zero ... to wait, you should put your thread to sleep, and check the value again, do it until the variable becomes zero.</p>\n<p>To keep control of the variable (sync its value between threads), there are many JAVA modes:</p>\n<ul>\n<li>you can used AtomicInteger ...</li>\n<li>you can used <code>synchronized</code> methods ...</li>\n</ul>\n<p><strong>By the way</strong>, for me, the memory problem is still there!! You may ask &quot;why&quot;? Because, you are loading 1M messages before sending them ... the approach should be: I read and send messages as long there are free threads or workers ... at the minute when there are no more workers, I should avoid reading more messages and just wait ...</p>\n"},{"tags":[],"owner":{"account_id":2016660,"reputation":263,"user_id":1803810,"display_name":"leoconco"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1632440095,"creation_date":1632440095,"answer_id":69307961,"question_id":69306404,"body_markdown":"You might want to, no only multithread your solution, but use a Bulkhead, to limit the number of waiting requests, as, if not limited at the moment, the owners of the service will put a quota for you if you hit them with 1M requests.\r\nTake a look at Histryx Bulkhead, it manages the threadpool for you and you can adjut the max concurrent threads https://stackoverflow.com/questions/30391809/what-is-bulkhead-pattern-used-by-hystrix\r\nAlso, as someone else mentioned, you start with 1M records in memory, where do those come from? If from a DB, you might want to consider using R2DB drivers to use a reactive flow that could process the messages as it loads them instead of loading all to memory and then process.\r\nSee https://www.baeldung.com/java-reactive-systems","title":"Using CompletableFuture and thread pool for a large number of tasks","body":"<p>You might want to, no only multithread your solution, but use a Bulkhead, to limit the number of waiting requests, as, if not limited at the moment, the owners of the service will put a quota for you if you hit them with 1M requests.\nTake a look at Histryx Bulkhead, it manages the threadpool for you and you can adjut the max concurrent threads <a href=\"https://stackoverflow.com/questions/30391809/what-is-bulkhead-pattern-used-by-hystrix\">What is Bulkhead Pattern used by Hystrix?</a>\nAlso, as someone else mentioned, you start with 1M records in memory, where do those come from? If from a DB, you might want to consider using R2DB drivers to use a reactive flow that could process the messages as it loads them instead of loading all to memory and then process.\nSee <a href=\"https://www.baeldung.com/java-reactive-systems\" rel=\"nofollow noreferrer\">https://www.baeldung.com/java-reactive-systems</a></p>\n"},{"tags":[],"owner":{"account_id":2496,"reputation":266234,"user_id":3474,"accept_rate":83,"display_name":"erickson"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1632441609,"creation_date":1632441609,"answer_id":69308095,"question_id":69306404,"body_markdown":"You can use a parallel stream to turn events into the data you need to send only as fast as workers are ready for them.\r\n\r\n```java\r\nmyInputList.stream().parallel().forEach(mySender::doSubmit)\r\n```\r\n\r\nIf you might be using parallel streams (or the common `ForkJoinPool`) elsewhere in the program at the same time, you can create a thread pool dedicated to this process with the threads that you can spare.\r\n\r\n```java\r\nint extraThreads = ...;\r\nForkJoinPool pool = new ForkJoinPool(extraThreads);\r\nForkJoinTask&lt;?&gt; ticket =\r\n    pool.submit(() -&gt; myInputList.stream().parallel().forEach(mySender::doSubmit));\r\nticket.get();\r\npool.shutdown();\r\n```","title":"Using CompletableFuture and thread pool for a large number of tasks","body":"<p>You can use a parallel stream to turn events into the data you need to send only as fast as workers are ready for them.</p>\n<pre class=\"lang-java prettyprint-override\"><code>myInputList.stream().parallel().forEach(mySender::doSubmit)\n</code></pre>\n<p>If you might be using parallel streams (or the common <code>ForkJoinPool</code>) elsewhere in the program at the same time, you can create a thread pool dedicated to this process with the threads that you can spare.</p>\n<pre class=\"lang-java prettyprint-override\"><code>int extraThreads = ...;\nForkJoinPool pool = new ForkJoinPool(extraThreads);\nForkJoinTask&lt;?&gt; ticket =\n    pool.submit(() -&gt; myInputList.stream().parallel().forEach(mySender::doSubmit));\nticket.get();\npool.shutdown();\n</code></pre>\n"}],"owner":{"account_id":11565609,"reputation":799,"user_id":8473984,"display_name":"ZZZ"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1723,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":3,"score":0,"last_activity_date":1637247751,"creation_date":1632428122,"question_id":69306404,"body_markdown":"I have a scenario where I need to send 1M message to a server using a blocking API. The API does not accept batch request so I have to send 1M message one by one.\r\n\r\nInstead of using one thread, I am thinking to use multiple threads to send them. \r\n\r\nThe caller has to wait for all 1M messages to be sent before proceeding.\r\n\r\nMy implementation is as follows:\r\n\r\n    public class MySender {\r\n        private final MyPublisher myPublisher;\r\n        private final ExecutorService threadPool;\r\n        private final Map&lt;String, List&lt;CompletableFuture&lt;Void&gt;&gt;&gt; jobMap = Maps.newConcurrentMap();\r\n    \r\n        public MySender (final MyPublisher myPublisher,\r\n                         ExecutorService threadPool) {\r\n            this.myPublisher= myPublisher;\r\n            this.threadPool = threadPool;\r\n        }\r\n    \r\n        public void send(final MyData event) {\r\n            CompletableFuture&lt;Void&gt; future = CompletableFuture.runAsync(() -&gt; doSubmit(event), threadPool);\r\n            List&lt;CompletableFuture&lt;Void&gt;&gt; futureList = jobMap.computeIfAbsent(event.getID(), entry -&gt; new ArrayList&lt;&gt;());\r\n            futureList.add(future);\r\n        }\r\n    \r\n        public void notifySendComplete(final String id) {\r\n            if(!jobMap.containsKey(id)) {\r\n                return;\r\n            }\r\n    \r\n            jobMap.get(id).forEach(CompletableFuture::join);\r\n            jobMap.remove(id);\r\n        }\r\n\r\n        private void doSubmit(final MyData event) {\r\n             try {\r\n                 ....\r\n                 myPublisher.send(event);\r\n                 ....\r\n             } catch(Exception e) {\r\n                 // log error\r\n             }\r\n        }\r\n    }\r\n\r\nThe client class can simply use this class this way:\r\n\r\n    myInputList.forEach(input -&gt; {\r\n        MyData event = createData(input);\r\n        mySender.send(event);\r\n    })\r\n    \r\n    mySender.notifySendComplete();\r\n\r\nI think this implementation will work, but the problem is obvious. It needs to hold 1M CompletableFuture in the map, which are not eligible for garbage collection.\r\n\r\nIs it a big problem? If so, are there any better approaches?\r\n\r\nRestriction:\r\n\r\n1. The Thread pool cannot be shut down\r\n2. I can implement it using CountDownLatch but it is not allowed to use in my project.\r\n\r\n","title":"Using CompletableFuture and thread pool for a large number of tasks","body":"<p>I have a scenario where I need to send 1M message to a server using a blocking API. The API does not accept batch request so I have to send 1M message one by one.</p>\n<p>Instead of using one thread, I am thinking to use multiple threads to send them.</p>\n<p>The caller has to wait for all 1M messages to be sent before proceeding.</p>\n<p>My implementation is as follows:</p>\n<pre><code>public class MySender {\n    private final MyPublisher myPublisher;\n    private final ExecutorService threadPool;\n    private final Map&lt;String, List&lt;CompletableFuture&lt;Void&gt;&gt;&gt; jobMap = Maps.newConcurrentMap();\n\n    public MySender (final MyPublisher myPublisher,\n                     ExecutorService threadPool) {\n        this.myPublisher= myPublisher;\n        this.threadPool = threadPool;\n    }\n\n    public void send(final MyData event) {\n        CompletableFuture&lt;Void&gt; future = CompletableFuture.runAsync(() -&gt; doSubmit(event), threadPool);\n        List&lt;CompletableFuture&lt;Void&gt;&gt; futureList = jobMap.computeIfAbsent(event.getID(), entry -&gt; new ArrayList&lt;&gt;());\n        futureList.add(future);\n    }\n\n    public void notifySendComplete(final String id) {\n        if(!jobMap.containsKey(id)) {\n            return;\n        }\n\n        jobMap.get(id).forEach(CompletableFuture::join);\n        jobMap.remove(id);\n    }\n\n    private void doSubmit(final MyData event) {\n         try {\n             ....\n             myPublisher.send(event);\n             ....\n         } catch(Exception e) {\n             // log error\n         }\n    }\n}\n</code></pre>\n<p>The client class can simply use this class this way:</p>\n<pre><code>myInputList.forEach(input -&gt; {\n    MyData event = createData(input);\n    mySender.send(event);\n})\n\nmySender.notifySendComplete();\n</code></pre>\n<p>I think this implementation will work, but the problem is obvious. It needs to hold 1M CompletableFuture in the map, which are not eligible for garbage collection.</p>\n<p>Is it a big problem? If so, are there any better approaches?</p>\n<p>Restriction:</p>\n<ol>\n<li>The Thread pool cannot be shut down</li>\n<li>I can implement it using CountDownLatch but it is not allowed to use in my project.</li>\n</ol>\n"},{"tags":["java","oop","design-patterns","builder"],"comments":[{"owner":{"account_id":13290045,"reputation":164,"user_id":9594794,"display_name":"prof_FL"},"score":1,"creation_date":1637245684,"post_id":70021283,"comment_id":123778987,"body_markdown":"both of them are appropriately.The difference is  for 1, other classes will have no access to this concreateBuilder class, compare to 2 which other classes will still have access to it. If you have only one class extends from Builder, 1 is a good choice. But when you have several classes extends it,  it is confusion that you treat concreateBuilder as static inner builder class.","body":"both of them are appropriately.The difference is  for 1, other classes will have no access to this concreateBuilder class, compare to 2 which other classes will still have access to it. If you have only one class extends from Builder, 1 is a good choice. But when you have several classes extends it,  it is confusion that you treat concreateBuilder as static inner builder class."},{"owner":{"account_id":2928320,"reputation":1666,"user_id":5946480,"display_name":"Rishi Prakash"},"score":0,"creation_date":1637246117,"post_id":70021283,"comment_id":123779220,"body_markdown":"@user9594794  fair point! but we can accommodate both types of builder (case 2) in case 1 of Builder pattern also, using setters/methods (and optionally choosing not to set some properties), isn&#39;t? what are the downsides of that?","body":"@user9594794  fair point! but we can accommodate both types of builder (case 2) in case 1 of Builder pattern also, using setters/methods (and optionally choosing not to set some properties), isn&#39;t? what are the downsides of that?"},{"owner":{"account_id":13290045,"reputation":164,"user_id":9594794,"display_name":"prof_FL"},"score":1,"creation_date":1637246865,"post_id":70021283,"comment_id":123779582,"body_markdown":"take a look at  [wiki](https://en.wikipedia.org/wiki/Builder_pattern#:~:text=The%20builder%20pattern%20is%20a,Gang%20of%20Four%20design%20patterns.).","body":"take a look at  <a href=\"https://en.wikipedia.org/wiki/Builder_pattern#:~:text=The%20builder%20pattern%20is%20a,Gang%20of%20Four%20design%20patterns.\" rel=\"nofollow noreferrer\">wiki</a>."}],"answers":[{"tags":[],"owner":{"account_id":1455702,"reputation":15682,"user_id":1371329,"accept_rate":64,"display_name":"jaco0646"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1637247736,"creation_date":1637247736,"answer_id":70022118,"question_id":70021283,"body_markdown":"It is both... and more. There are numerous patterns originating from different sources that are all referred to as &quot;Builder&quot;. This is not so unusual as you might think; for example, there are numerous different patterns all referred to as &quot;Factory&quot; as well.\r\n\r\nRegarding the two you mention.\r\n1. The static inner Builder was popularized by Josh Bloch in his book, *Effective Java*.\r\n2. The abstract polymorphic Builder was popularized by the GoF in their seminal *Design Patterns* book.\r\n\r\nThere are more useful Builder patterns from other sources as well. See: [Builder isomorphisms](https://blog.ploeh.dk/2020/02/10/builder-isomorphisms/).","title":"What is the difference between Builder Pattern with static inner class and Builder design patterns with One Abstract and one+ concrete implimentations","body":"<p>It is both... and more. There are numerous patterns originating from different sources that are all referred to as &quot;Builder&quot;. This is not so unusual as you might think; for example, there are numerous different patterns all referred to as &quot;Factory&quot; as well.</p>\n<p>Regarding the two you mention.</p>\n<ol>\n<li>The static inner Builder was popularized by Josh Bloch in his book, <em>Effective Java</em>.</li>\n<li>The abstract polymorphic Builder was popularized by the GoF in their seminal <em>Design Patterns</em> book.</li>\n</ol>\n<p>There are more useful Builder patterns from other sources as well. See: <a href=\"https://blog.ploeh.dk/2020/02/10/builder-isomorphisms/\" rel=\"nofollow noreferrer\">Builder isomorphisms</a>.</p>\n"}],"owner":{"account_id":2928320,"reputation":1666,"user_id":5946480,"display_name":"Rishi Prakash"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":478,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":70022118,"answer_count":1,"score":2,"last_activity_date":1637247736,"creation_date":1637244295,"question_id":70021283,"body_markdown":"I am learning about builder design pattern, I found two explanations of the same.\r\n1. With a static inner builder class which returns object of outer class appropriately.\r\n2. With One Builder Abstract class, then more than one implementations of the same and one director class.\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/mW6Hj.png\r\n\r\nI am totally confuse over which one it is? or is it both?","title":"What is the difference between Builder Pattern with static inner class and Builder design patterns with One Abstract and one+ concrete implimentations","body":"<p>I am learning about builder design pattern, I found two explanations of the same.</p>\n<ol>\n<li>With a static inner builder class which returns object of outer class appropriately.</li>\n<li>With One Builder Abstract class, then more than one implementations of the same and one director class.\n<a href=\"https://i.stack.imgur.com/mW6Hj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/mW6Hj.png\" alt=\"enter image description here\" /></a></li>\n</ol>\n<p>I am totally confuse over which one it is? or is it both?</p>\n"},{"tags":["java","reactjs","spring","spring-boot","fetch"],"answers":[{"tags":[],"owner":{"account_id":23229364,"reputation":63,"user_id":17320369,"display_name":"Tim Hudson"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637247632,"creation_date":1637247632,"answer_id":70022083,"question_id":70020616,"body_markdown":"I managed to get the fetch to successfully receive the Authorization header from the server by updating the CorsSource in my WebSecurityConfig class by adding &#39;localhost:8080&#39; &#39;localhost:3000&#39; as an origin and by adding the Authorization header as an exposed header, so that it can be used by CORS requests.\r\n\r\n    configuration.addExposedHeader(&quot;Authorization&quot;);","title":"How to add the bearer token that is currently added to the response&#39;s auth header, to the response body?","body":"<p>I managed to get the fetch to successfully receive the Authorization header from the server by updating the CorsSource in my WebSecurityConfig class by adding 'localhost:8080' 'localhost:3000' as an origin and by adding the Authorization header as an exposed header, so that it can be used by CORS requests.</p>\n<pre><code>configuration.addExposedHeader(&quot;Authorization&quot;);\n</code></pre>\n"}],"owner":{"account_id":23229364,"reputation":63,"user_id":17320369,"display_name":"Tim Hudson"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1275,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1637247632,"creation_date":1637241699,"question_id":70020616,"body_markdown":"I implemented authorization to my SpringBoot API by using the bearer token, which when login is successful is added to the response&#39;s &#39;Authorization&#39; header, this token then needs to be read by the login fetch method of my React project and added to the subsequent request &#39;authorization&#39; headers.\r\n\r\nUnfortunately though I have been told this is not possible using Fetch so I am now trying to refactor my login functionality so that it returns the token in the response body as opposed to the headers.\r\n\r\nI have no idea how to do this, currently no JSON body object is returned, only the headers and I will have to change a lot of my AuthorizationFilter and AuthenticationFilter classes. If someone could point me in the right direction or advice me on what to change that&#39;d be greatly appreciated.\r\n\r\nThanks.\r\n\r\nAuthorizationFilter:\r\n\r\n    public class AuthorizationFilter extends BasicAuthenticationFilter {\r\n    \r\n    public AuthorizationFilter(AuthenticationManager authenticationManager) { super(authenticationManager);}\r\n    \r\n    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain)\r\n    \r\n            throws IOException, ServletException {\r\n    \r\n            String header = request.getHeader(&quot;Authorization&quot;);\r\n    \r\n            if(header == null || !header.startsWith(&quot;Bearer&quot;)) {\r\n    \r\n            filterChain.doFilter(request,response);\r\n    \r\n            return;\r\n            }\r\n    \r\n            UsernamePasswordAuthenticationToken authenticationToken = getAuthentication(request);\r\n    \r\n            SecurityContextHolder.getContext().setAuthentication(authenticationToken);\r\n    \r\n            filterChain.doFilter(request,response);\r\n    \r\n            }\r\n    \r\n    \r\n    private UsernamePasswordAuthenticationToken getAuthentication(HttpServletRequest request) {\r\n            String token = request.getHeader(&quot;Authorization&quot;);\r\n            if(token != null) {\r\n    \r\n            String user = Jwts.parser().setSigningKey(&quot;SecretKeyToGenJWTs&quot;.getBytes())\r\n            .parseClaimsJws(token.replace(&quot;Bearer&quot;,&quot;&quot;))\r\n            .getBody()\r\n            .getSubject();\r\n    \r\n            if(user != null) {\r\n    \r\n            return new UsernamePasswordAuthenticationToken(user, null, new ArrayList&lt;&gt;());\r\n    \r\n            }\r\n            return null;\r\n            }\r\n            return null;\r\n            }\r\n    }\r\n\r\nAuthenticationFilter:\r\n\r\n       public class AuthenticationFilter extends UsernamePasswordAuthenticationFilter {\r\n    \r\n            private AuthenticationManager authenticationManager;\r\n    \r\n            public AuthenticationFilter(AuthenticationManager authenticationManager) {\r\n                this.authenticationManager = authenticationManager;\r\n                setFilterProcessesUrl(&quot;/login&quot;);\r\n            }\r\n            @Override\r\n    \r\n            public Authentication attemptAuthentication(HttpServletRequest request, HttpServletResponse response) throws AuthenticationException {\r\n                try {\r\n    \r\n                    com.example.gambit2.domain.User creds = new ObjectMapper().readValue(request.getInputStream(), com.example.gambit2.domain.User.class);\r\n                    return authenticationManager.authenticate(new UsernamePasswordAuthenticationToken(creds.getUsername(), creds.getPassword(),new ArrayList&lt;&gt;()));\r\n                }\r\n    \r\n            catch(IOException e) {\r\n    \r\n                    throw new RuntimeException(&quot;Could not read request&quot; + e);\r\n                }\r\n    \r\n            }\r\n            protected void successfulAuthentication(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain, Authentication authentication)\r\n            {\r\n                String token = Jwts.builder()\r\n                        .setSubject(((User) authentication.getPrincipal()).getUsername())\r\n                        .setExpiration(new Date(System.currentTimeMillis() + 864_000_000))\r\n                        .signWith(SignatureAlgorithm.HS512, &quot;SecretKeyToGenJWTs&quot;.getBytes())\r\n                        .compact();\r\n                response.addHeader(&quot;Authorization&quot;,&quot;Bearer &quot; + token);\r\n    \r\n    \r\n            }\r\n        }\r\n\r\nUserController&#39;s signup method:\r\n\r\n    @PostMapping(&quot;/signup&quot;)\r\n            public void signUp(@RequestBody User user) {\r\n                    user.setPassword(bCryptPasswordEncoder.encode(user.getPassword()));\r\n                    userRepository.save(user);\r\n                    System.out.println(user.getUsername() + &quot; SAVED SUCCESSFULLY&quot;);\r\n            }\r\n\r\nREACT Home.js:\r\n\r\n    const SIGNUP_URL = &#39;http://localhost:8080/users/signup&#39;;\r\n    const LOGIN_URL = &#39;http://localhost:8080/login&#39;;\r\n    class Home extends Component {\r\n    \r\n        constructor(props) {\r\n            super(props);\r\n            this.state = {\r\n                isAuthenticated:false,\r\n                resData: &#39;&#39;\r\n            };\r\n        }\r\n    \r\n        componentDidMount() {\r\n            const payload = {\r\n                &quot;username&quot;: &quot;hikaru&quot;,\r\n                &quot;password&quot;: &quot;JohnSmith72-&quot;\r\n            };\r\n            fetch(SIGNUP_URL, {\r\n                method: &#39;POST&#39;,\r\n                headers: {\r\n                    &quot;Accept&quot;: &quot;application/json&quot;,\r\n                    &quot;Content-Type&quot;: &quot;application/json&quot;\r\n                },\r\n                body: JSON.stringify(payload)\r\n            })\r\n                .then(response =&gt; response.json())\r\n                .then((data) =&gt; {\r\n                    console.log(data);\r\n                });\r\n            fetch(LOGIN_URL, {\r\n                method: &#39;POST&#39;,\r\n                headers: {\r\n                    &quot;Accept&quot;: &quot;application/json&quot;,\r\n                    &quot;Content-Type&quot;: &quot;application/json&quot;\r\n                },\r\n                body: JSON.stringify(payload)\r\n            })\r\n                .then(response =&gt;\r\n    \r\n                    console.log(response.headers.get(&quot;Authorization&quot;)\r\n                );\r\n    \r\n        }\r\nIn the above fetch call the /signup is successful and it the server outputs &#39;Tim is saved successfully&#39;, and the login is also successful but the token is sent in response and the &#39;console.log(response.headers.get(&quot;Authorization&quot;)) returns &#39;null&#39;. \r\n\r\nI am aware that with CORS fetch will not work for auth header as it can only be used for like 4 headers right? \r\n\r\nI tried to add a method that loops through each entry and prints them, and then call it in the .then() as such:\r\n\r\n    .then(response =&gt; this.iterateThroughEntries(response)\r\n            );\r\nBut this only printed the default headers, not the auth header.\r\n\r\nThanks\r\n","title":"How to add the bearer token that is currently added to the response&#39;s auth header, to the response body?","body":"<p>I implemented authorization to my SpringBoot API by using the bearer token, which when login is successful is added to the response's 'Authorization' header, this token then needs to be read by the login fetch method of my React project and added to the subsequent request 'authorization' headers.</p>\n<p>Unfortunately though I have been told this is not possible using Fetch so I am now trying to refactor my login functionality so that it returns the token in the response body as opposed to the headers.</p>\n<p>I have no idea how to do this, currently no JSON body object is returned, only the headers and I will have to change a lot of my AuthorizationFilter and AuthenticationFilter classes. If someone could point me in the right direction or advice me on what to change that'd be greatly appreciated.</p>\n<p>Thanks.</p>\n<p>AuthorizationFilter:</p>\n<pre><code>public class AuthorizationFilter extends BasicAuthenticationFilter {\n\npublic AuthorizationFilter(AuthenticationManager authenticationManager) { super(authenticationManager);}\n\nprotected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain)\n\n        throws IOException, ServletException {\n\n        String header = request.getHeader(&quot;Authorization&quot;);\n\n        if(header == null || !header.startsWith(&quot;Bearer&quot;)) {\n\n        filterChain.doFilter(request,response);\n\n        return;\n        }\n\n        UsernamePasswordAuthenticationToken authenticationToken = getAuthentication(request);\n\n        SecurityContextHolder.getContext().setAuthentication(authenticationToken);\n\n        filterChain.doFilter(request,response);\n\n        }\n\n\nprivate UsernamePasswordAuthenticationToken getAuthentication(HttpServletRequest request) {\n        String token = request.getHeader(&quot;Authorization&quot;);\n        if(token != null) {\n\n        String user = Jwts.parser().setSigningKey(&quot;SecretKeyToGenJWTs&quot;.getBytes())\n        .parseClaimsJws(token.replace(&quot;Bearer&quot;,&quot;&quot;))\n        .getBody()\n        .getSubject();\n\n        if(user != null) {\n\n        return new UsernamePasswordAuthenticationToken(user, null, new ArrayList&lt;&gt;());\n\n        }\n        return null;\n        }\n        return null;\n        }\n}\n</code></pre>\n<p>AuthenticationFilter:</p>\n<pre><code>   public class AuthenticationFilter extends UsernamePasswordAuthenticationFilter {\n\n        private AuthenticationManager authenticationManager;\n\n        public AuthenticationFilter(AuthenticationManager authenticationManager) {\n            this.authenticationManager = authenticationManager;\n            setFilterProcessesUrl(&quot;/login&quot;);\n        }\n        @Override\n\n        public Authentication attemptAuthentication(HttpServletRequest request, HttpServletResponse response) throws AuthenticationException {\n            try {\n\n                com.example.gambit2.domain.User creds = new ObjectMapper().readValue(request.getInputStream(), com.example.gambit2.domain.User.class);\n                return authenticationManager.authenticate(new UsernamePasswordAuthenticationToken(creds.getUsername(), creds.getPassword(),new ArrayList&lt;&gt;()));\n            }\n\n        catch(IOException e) {\n\n                throw new RuntimeException(&quot;Could not read request&quot; + e);\n            }\n\n        }\n        protected void successfulAuthentication(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain, Authentication authentication)\n        {\n            String token = Jwts.builder()\n                    .setSubject(((User) authentication.getPrincipal()).getUsername())\n                    .setExpiration(new Date(System.currentTimeMillis() + 864_000_000))\n                    .signWith(SignatureAlgorithm.HS512, &quot;SecretKeyToGenJWTs&quot;.getBytes())\n                    .compact();\n            response.addHeader(&quot;Authorization&quot;,&quot;Bearer &quot; + token);\n\n\n        }\n    }\n</code></pre>\n<p>UserController's signup method:</p>\n<pre><code>@PostMapping(&quot;/signup&quot;)\n        public void signUp(@RequestBody User user) {\n                user.setPassword(bCryptPasswordEncoder.encode(user.getPassword()));\n                userRepository.save(user);\n                System.out.println(user.getUsername() + &quot; SAVED SUCCESSFULLY&quot;);\n        }\n</code></pre>\n<p>REACT Home.js:</p>\n<pre><code>const SIGNUP_URL = 'http://localhost:8080/users/signup';\nconst LOGIN_URL = 'http://localhost:8080/login';\nclass Home extends Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            isAuthenticated:false,\n            resData: ''\n        };\n    }\n\n    componentDidMount() {\n        const payload = {\n            &quot;username&quot;: &quot;hikaru&quot;,\n            &quot;password&quot;: &quot;JohnSmith72-&quot;\n        };\n        fetch(SIGNUP_URL, {\n            method: 'POST',\n            headers: {\n                &quot;Accept&quot;: &quot;application/json&quot;,\n                &quot;Content-Type&quot;: &quot;application/json&quot;\n            },\n            body: JSON.stringify(payload)\n        })\n            .then(response =&gt; response.json())\n            .then((data) =&gt; {\n                console.log(data);\n            });\n        fetch(LOGIN_URL, {\n            method: 'POST',\n            headers: {\n                &quot;Accept&quot;: &quot;application/json&quot;,\n                &quot;Content-Type&quot;: &quot;application/json&quot;\n            },\n            body: JSON.stringify(payload)\n        })\n            .then(response =&gt;\n\n                console.log(response.headers.get(&quot;Authorization&quot;)\n            );\n\n    }\n</code></pre>\n<p>In the above fetch call the /signup is successful and it the server outputs 'Tim is saved successfully', and the login is also successful but the token is sent in response and the 'console.log(response.headers.get(&quot;Authorization&quot;)) returns 'null'.</p>\n<p>I am aware that with CORS fetch will not work for auth header as it can only be used for like 4 headers right?</p>\n<p>I tried to add a method that loops through each entry and prints them, and then call it in the .then() as such:</p>\n<pre><code>.then(response =&gt; this.iterateThroughEntries(response)\n        );\n</code></pre>\n<p>But this only printed the default headers, not the auth header.</p>\n<p>Thanks</p>\n"},{"tags":["java","enums"],"comments":[{"owner":{"account_id":21415032,"reputation":181,"user_id":16720064,"display_name":"0xff"},"score":1,"creation_date":1637147659,"post_id":70003367,"comment_id":123746237,"body_markdown":"yes, you&#39;d need to manually wrap around","body":"yes, you&#39;d need to manually wrap around"},{"owner":{"account_id":1820313,"reputation":1528,"user_id":1654526,"accept_rate":36,"display_name":"Jack"},"score":1,"creation_date":1637150738,"post_id":70003367,"comment_id":123747329,"body_markdown":"honestly I would not bother `valueOf()`. Just check their `ordinal()` with `%`","body":"honestly I would not bother <code>valueOf()</code>. Just check their <code>ordinal()</code> with <code>%</code>"}],"answers":[{"tags":[],"owner":{"account_id":23366081,"reputation":129,"user_id":17437705,"display_name":"rongfeiyue"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1637149072,"creation_date":1637148970,"answer_id":70003674,"question_id":70003367,"body_markdown":"    if (b == Direction.values()[(a.ordinal() + 1) % Direction.values().length])","title":"compare Two variables of enum in java","body":"<pre><code>if (b == Direction.values()[(a.ordinal() + 1) % Direction.values().length])\n</code></pre>\n"},{"tags":[],"owner":{"display_name":"user17233545"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1637247470,"creation_date":1637149360,"answer_id":70003782,"question_id":70003367,"body_markdown":"Try this.\r\n\r\n    public enum Direction {\r\n        UP,\r\n        RIGHT,\r\n        DOWN,\r\n        LEFT;\r\n        \r\n        private static final Direction[] VALUES = values();\r\n        \r\n        public Direction next() {\r\n            return VALUES[(ordinal() + 1) % VALUES.length];\r\n        }\r\n      }\r\n\r\n    public static void main(String[] args) {\r\n        Direction a = Direction.LEFT;\r\n        Direction b = Direction.UP;\r\n        System.out.println(a.next() == b);\r\n    }\r\n\r\noutput:\r\n\r\n    true","title":"compare Two variables of enum in java","body":"<p>Try this.</p>\n<pre><code>public enum Direction {\n    UP,\n    RIGHT,\n    DOWN,\n    LEFT;\n    \n    private static final Direction[] VALUES = values();\n    \n    public Direction next() {\n        return VALUES[(ordinal() + 1) % VALUES.length];\n    }\n  }\n\npublic static void main(String[] args) {\n    Direction a = Direction.LEFT;\n    Direction b = Direction.UP;\n    System.out.println(a.next() == b);\n}\n</code></pre>\n<p>output:</p>\n<pre><code>true\n</code></pre>\n"}],"owner":{"account_id":18029165,"reputation":13,"user_id":13104296,"display_name":"Manfred Schneider"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":86,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":70003782,"answer_count":2,"score":1,"last_activity_date":1637247470,"creation_date":1637147625,"question_id":70003367,"body_markdown":"    public enum Direction {\r\n      UP,\r\n      RIGHT,\r\n      DOWN,\r\n      LEFT,\r\n    }\r\ni have two enum variables (a and b), in one case i have to check, if `b` is the next of `a`\r\nfor example\r\nif `a=UP` and `b=RIGHT`.\r\nand also if `a=left` and `b=UP`.\r\nmabe something like this:\r\n\r\n    if(Direction.valueOf(a+1)==Direction.valueOf(b))\r\nbut when `a=LEFT` it would be out of bounds like an array right ?","title":"compare Two variables of enum in java","body":"<pre><code>public enum Direction {\n  UP,\n  RIGHT,\n  DOWN,\n  LEFT,\n}\n</code></pre>\n<p>i have two enum variables (a and b), in one case i have to check, if <code>b</code> is the next of <code>a</code>\nfor example\nif <code>a=UP</code> and <code>b=RIGHT</code>.\nand also if <code>a=left</code> and <code>b=UP</code>.\nmabe something like this:</p>\n<pre><code>if(Direction.valueOf(a+1)==Direction.valueOf(b))\n</code></pre>\n<p>but when <code>a=LEFT</code> it would be out of bounds like an array right ?</p>\n"},{"tags":["java","apache-kafka","kafka-consumer-api"],"answers":[{"tags":[],"owner":{"account_id":2967442,"reputation":1681,"user_id":9657108,"display_name":"arunkvelu"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1637247466,"creation_date":1637247466,"answer_id":70022049,"question_id":70021270,"body_markdown":"It is possible using `onPartitionsRevoked` callback method available in `ConsumerRebalanceListener` interface.\r\n\r\nFrom [description][1],\r\n\r\n&gt; A callback method the user can implement to provide handling of offset commits to a customized store.\r\n&gt; This method will be called during a rebalance operation when the consumer has to give up some partitions.\r\n&gt; It can also be called when consumer is being closed or is unsubscribing.\r\n&gt; It is recommended that offsets should be committed in this callback to either Kafka or a custom offset store to prevent duplicate data.\r\n\r\n**Example Implementation:**\r\n```java\r\nprivate static class ConsumerPartitionAssignmentListener implements ConsumerRebalanceListener {\r\n\t@Override\r\n\tpublic void onPartitionsRevoked(Collection&lt;TopicPartition&gt; partitions) {\r\n\t\tSystem.out.println(String.format(&quot;Partitions revoke listener: %s&quot;, partitions.toString()));\r\n\t\t// Add your changes here to flush\r\n\t}\r\n\r\n\t@Override\r\n\tpublic void onPartitionsAssigned(Collection&lt;TopicPartition&gt; partitions) {\r\n\t\tSystem.out.println(String.format(&quot;Partitions assignment listener: %s&quot;, partitions.toString()));\r\n\t}\r\n}\r\n```\r\n\r\n**Example:**\r\n```java\r\nimport org.apache.kafka.clients.CommonClientConfigs;\r\nimport org.apache.kafka.clients.consumer.ConsumerConfig;\r\nimport org.apache.kafka.clients.consumer.ConsumerRebalanceListener;\r\nimport org.apache.kafka.clients.consumer.ConsumerRecords;\r\nimport org.apache.kafka.clients.consumer.KafkaConsumer;\r\nimport org.apache.kafka.common.TopicPartition;\r\n\r\npublic class TestConsumer {\r\n\t\r\n\tKafkaConsumer&lt;String, String&gt; kafkaConsumer;\r\n\t\r\n\tpublic static void main(String[] args) {\r\n\t\tTestConsumer consumer = new TestConsumer();\r\n\t\tconsumer.pollMessages();\r\n\t}\r\n\r\n\tpublic TestConsumer() {\r\n\t\tProperties properties = new Properties();\r\n\t\tproperties.setProperty(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG, &quot;localhost:9092&quot;);\r\n\t\tproperties.setProperty(CommonClientConfigs.SECURITY_PROTOCOL_CONFIG, &quot;PLAINTEXT&quot;);\r\n\t\tproperties.setProperty(ConsumerConfig.GROUP_ID_CONFIG, &quot;kafka-example-consumer&quot;);\r\n\t\tproperties.setProperty(ConsumerConfig.KEY_DESERIALIZER_CLASS_CONFIG, &quot;org.apache.kafka.common.serialization.StringDeserializer&quot;);\r\n\t\tproperties.setProperty(ConsumerConfig.VALUE_DESERIALIZER_CLASS_CONFIG, &quot;org.apache.kafka.common.serialization.StringDeserializer&quot;);\r\n\t\t\r\n\t\tkafkaConsumer = new KafkaConsumer&lt;&gt;(properties);\r\n\t\tkafkaConsumer.subscribe(Arrays.asList(&quot;input-topic&quot;), new ConsumerPartitionAssignmentListener());\r\n\t}\r\n\t\r\n\tpublic void pollMessages() {\r\n\t\twhile(true) {\r\n\t\t\tSystem.out.println(&quot;Polling&quot;);\r\n\t\t\tConsumerRecords&lt;String, String&gt; records = kafkaConsumer.poll(Duration.ofMillis(5000));\r\n\t\t\tSystem.out.println(records.count());\r\n\t\t}\r\n\t}\r\n\t\r\n\tprivate static class ConsumerPartitionAssignmentListener implements ConsumerRebalanceListener {\r\n\t\t@Override\r\n\t\tpublic void onPartitionsRevoked(Collection&lt;TopicPartition&gt; partitions) {\r\n\t\t\tSystem.out.println(String.format(&quot;Partitions revoke listener: %s&quot;, partitions.toString()));\r\n\t\t\t// Add your changes here to flush\r\n\t\t}\r\n\r\n\t\t@Override\r\n\t\tpublic void onPartitionsAssigned(Collection&lt;TopicPartition&gt; partitions) {\r\n\t\t\tSystem.out.println(String.format(&quot;Partitions assignment listener: %s&quot;, partitions.toString()));\r\n\t\t}\r\n\t}\r\n}\r\n```\r\n\r\n**Out:**\r\n```\r\nPoll\r\nPartitions assignment listener: [input-topic-0]\r\n0\r\nPoll\r\n0\r\nPoll\r\nPartitions revoke listener: [input-topic-0]\r\nPartitions assignment listener: [input-topic-0]\r\n0\r\nPoll\r\n0\r\n```\r\n\r\n\r\n  [1]: https://kafka.apache.org/24/javadoc/index.html?org/apache/kafka/clients/consumer/ConsumerRebalanceListener.html","title":"Kafka consumer group consumer failover detection","body":"<p>It is possible using <code>onPartitionsRevoked</code> callback method available in <code>ConsumerRebalanceListener</code> interface.</p>\n<p>From <a href=\"https://kafka.apache.org/24/javadoc/index.html?org/apache/kafka/clients/consumer/ConsumerRebalanceListener.html\" rel=\"nofollow noreferrer\">description</a>,</p>\n<blockquote>\n<p>A callback method the user can implement to provide handling of offset commits to a customized store.\nThis method will be called during a rebalance operation when the consumer has to give up some partitions.\nIt can also be called when consumer is being closed or is unsubscribing.\nIt is recommended that offsets should be committed in this callback to either Kafka or a custom offset store to prevent duplicate data.</p>\n</blockquote>\n<p><strong>Example Implementation:</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>private static class ConsumerPartitionAssignmentListener implements ConsumerRebalanceListener {\n    @Override\n    public void onPartitionsRevoked(Collection&lt;TopicPartition&gt; partitions) {\n        System.out.println(String.format(&quot;Partitions revoke listener: %s&quot;, partitions.toString()));\n        // Add your changes here to flush\n    }\n\n    @Override\n    public void onPartitionsAssigned(Collection&lt;TopicPartition&gt; partitions) {\n        System.out.println(String.format(&quot;Partitions assignment listener: %s&quot;, partitions.toString()));\n    }\n}\n</code></pre>\n<p><strong>Example:</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>import org.apache.kafka.clients.CommonClientConfigs;\nimport org.apache.kafka.clients.consumer.ConsumerConfig;\nimport org.apache.kafka.clients.consumer.ConsumerRebalanceListener;\nimport org.apache.kafka.clients.consumer.ConsumerRecords;\nimport org.apache.kafka.clients.consumer.KafkaConsumer;\nimport org.apache.kafka.common.TopicPartition;\n\npublic class TestConsumer {\n    \n    KafkaConsumer&lt;String, String&gt; kafkaConsumer;\n    \n    public static void main(String[] args) {\n        TestConsumer consumer = new TestConsumer();\n        consumer.pollMessages();\n    }\n\n    public TestConsumer() {\n        Properties properties = new Properties();\n        properties.setProperty(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG, &quot;localhost:9092&quot;);\n        properties.setProperty(CommonClientConfigs.SECURITY_PROTOCOL_CONFIG, &quot;PLAINTEXT&quot;);\n        properties.setProperty(ConsumerConfig.GROUP_ID_CONFIG, &quot;kafka-example-consumer&quot;);\n        properties.setProperty(ConsumerConfig.KEY_DESERIALIZER_CLASS_CONFIG, &quot;org.apache.kafka.common.serialization.StringDeserializer&quot;);\n        properties.setProperty(ConsumerConfig.VALUE_DESERIALIZER_CLASS_CONFIG, &quot;org.apache.kafka.common.serialization.StringDeserializer&quot;);\n        \n        kafkaConsumer = new KafkaConsumer&lt;&gt;(properties);\n        kafkaConsumer.subscribe(Arrays.asList(&quot;input-topic&quot;), new ConsumerPartitionAssignmentListener());\n    }\n    \n    public void pollMessages() {\n        while(true) {\n            System.out.println(&quot;Polling&quot;);\n            ConsumerRecords&lt;String, String&gt; records = kafkaConsumer.poll(Duration.ofMillis(5000));\n            System.out.println(records.count());\n        }\n    }\n    \n    private static class ConsumerPartitionAssignmentListener implements ConsumerRebalanceListener {\n        @Override\n        public void onPartitionsRevoked(Collection&lt;TopicPartition&gt; partitions) {\n            System.out.println(String.format(&quot;Partitions revoke listener: %s&quot;, partitions.toString()));\n            // Add your changes here to flush\n        }\n\n        @Override\n        public void onPartitionsAssigned(Collection&lt;TopicPartition&gt; partitions) {\n            System.out.println(String.format(&quot;Partitions assignment listener: %s&quot;, partitions.toString()));\n        }\n    }\n}\n</code></pre>\n<p><strong>Out:</strong></p>\n<pre><code>Poll\nPartitions assignment listener: [input-topic-0]\n0\nPoll\n0\nPoll\nPartitions revoke listener: [input-topic-0]\nPartitions assignment listener: [input-topic-0]\n0\nPoll\n0\n</code></pre>\n"}],"owner":{"account_id":4821703,"reputation":5934,"user_id":3892213,"accept_rate":80,"display_name":"best wishes"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":196,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1637247466,"creation_date":1637244249,"question_id":70021270,"body_markdown":"I have 1 kafka topic with only 1 partition. \r\n\r\nAt any point of time, there can be multiple kafka clients. All of the clients are subscribed using same consumer group. So at any given point of time only 1 client would be receiving messages. Let&#39;s say from t0 to t10 consumer1 was getting messages, but after some time it stops getting message and consumer2 is elected new leader(may be because of GC pauses in consumer1). In my consumer1, i want to detect whenever this failover happens, so that it can flush its local state. \r\n\r\nIs it possible to do with kafka client code?\r\n","title":"Kafka consumer group consumer failover detection","body":"<p>I have 1 kafka topic with only 1 partition.</p>\n<p>At any point of time, there can be multiple kafka clients. All of the clients are subscribed using same consumer group. So at any given point of time only 1 client would be receiving messages. Let's say from t0 to t10 consumer1 was getting messages, but after some time it stops getting message and consumer2 is elected new leader(may be because of GC pauses in consumer1). In my consumer1, i want to detect whenever this failover happens, so that it can flush its local state.</p>\n<p>Is it possible to do with kafka client code?</p>\n"},{"tags":["java","protocol-buffers","grpc","grpc-java","proto"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1537959105,"post_id":52515954,"comment_id":91971547,"body_markdown":"The error message says you are trying to access the first element of an empty List. you may want to check the lines in the stacktraces to check where it occurs, and add some validation","body":"The error message says you are trying to access the first element of an empty List. you may want to check the lines in the stacktraces to check where it occurs, and add some validation"},{"owner":{"account_id":13842647,"reputation":87,"user_id":9992516,"display_name":"Hexa"},"score":0,"creation_date":1537959263,"post_id":52515954,"comment_id":91971638,"body_markdown":"yes the stacktrace is pointing to this line in my code `setHeader(0, h1)` but I&#39;m not sure what to do to fix it","body":"yes the stacktrace is pointing to this line in my code <code>setHeader(0, h1)</code> but I&#39;m not sure what to do to fix it"},{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1537960062,"post_id":52515954,"comment_id":91972091,"body_markdown":"post the relevant code in your question, do not add a link for us to click on","body":"post the relevant code in your question, do not add a link for us to click on"}],"answers":[{"tags":[],"owner":{"account_id":5967476,"reputation":24635,"user_id":4690866,"display_name":"Eric Anderson"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1537980425,"creation_date":1537980425,"answer_id":52522618,"question_id":52515954,"body_markdown":"`setHeader()` expects that the index already exists; it does not increase the list size. This is the same as `java.util.List`. You can use `addHeader()` instead.","title":"java.lang.IndexOutOfBoundsException - when building Java Object using Protocol buffer","body":"<p><code>setHeader()</code> expects that the index already exists; it does not increase the list size. This is the same as <code>java.util.List</code>. You can use <code>addHeader()</code> instead.</p>\n"},{"tags":[],"owner":{"account_id":2043778,"reputation":17800,"user_id":1824361,"accept_rate":80,"display_name":"Ahmed Nabil"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637247457,"creation_date":1637247457,"answer_id":70022044,"question_id":52515954,"body_markdown":"For repeated List data type, simply use `add***` instead of `set***`  \r\nSo in your example, you can use `addHeader(...)` instead of `setHeader(...)`","title":"java.lang.IndexOutOfBoundsException - when building Java Object using Protocol buffer","body":"<p>For repeated List data type, simply use <code>add***</code> instead of <code>set***</code><br />\nSo in your example, you can use <code>addHeader(...)</code> instead of <code>setHeader(...)</code></p>\n"}],"owner":{"account_id":13842647,"reputation":87,"user_id":9992516,"display_name":"Hexa"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":778,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":52522618,"answer_count":2,"score":2,"last_activity_date":1637247457,"creation_date":1537958884,"question_id":52515954,"body_markdown":"I&#39;m using Protobuff to build my Java object, why do I keep getting `java.lang.IndexOutOfBoundsException: Index: 0, Size: 0` Exception when calling `setHeader(0, h1)` in my code.\r\n\r\nHere is my code:\r\n\r\n            Person.Header h1 = Person.Header.newBuilder()\r\n                    .setKey(&quot;Key1&quot;)\r\n                    .setValue(&quot;value1&quot;)\r\n                    .build();\r\n\r\n            Person person = Person.newBuilder()\r\n                    .setBody(&quot;TestBody&quot;)\r\n                    .setHeader(0, h1)\r\n                    .build();\r\n\r\n\r\n\r\nHere is my protobuff message (call dataformat.proto):\r\n\r\n    syntax = &quot;proto3&quot;;\r\n    package tutorial;\r\n    \r\n    option java_package = &quot;tutorial&quot;;\r\n    \r\n    message Person {\r\n        string body = 1;\r\n        repeated Header header = 2;\r\n    \r\n        message Header {\r\n            string key = 3;\r\n            string value = 4;\r\n        }\r\n    }\r\n\r\n\r\nStackTrace:\r\n\r\n\r\n    java.lang.IndexOutOfBoundsException: Index: 0, Size: 0\r\n        at java.util.ArrayList.set(ArrayList.java:453)\r\n        at com.google.protobuf.ProtobufArrayList.set(ProtobufArrayList.java:96)\r\n        at tutorial.Dataformat$Person.setHeader(Dataformat.java:572)\r\n        at tutorial.Dataformat$Person.access$1200(Dataformat.java:42)\r\n        at tutorial.Dataformat$Person$Builder.setHeader(Dataformat.java:815)\r\n ...\r\n\r\n","title":"java.lang.IndexOutOfBoundsException - when building Java Object using Protocol buffer","body":"<p>I'm using Protobuff to build my Java object, why do I keep getting <code>java.lang.IndexOutOfBoundsException: Index: 0, Size: 0</code> Exception when calling <code>setHeader(0, h1)</code> in my code.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>        Person.Header h1 = Person.Header.newBuilder()\n                .setKey(\"Key1\")\n                .setValue(\"value1\")\n                .build();\n\n        Person person = Person.newBuilder()\n                .setBody(\"TestBody\")\n                .setHeader(0, h1)\n                .build();\n</code></pre>\n\n<p>Here is my protobuff message (call dataformat.proto):</p>\n\n<pre><code>syntax = \"proto3\";\npackage tutorial;\n\noption java_package = \"tutorial\";\n\nmessage Person {\n    string body = 1;\n    repeated Header header = 2;\n\n    message Header {\n        string key = 3;\n        string value = 4;\n    }\n}\n</code></pre>\n\n<p>StackTrace:</p>\n\n<pre><code>java.lang.IndexOutOfBoundsException: Index: 0, Size: 0\n    at java.util.ArrayList.set(ArrayList.java:453)\n    at com.google.protobuf.ProtobufArrayList.set(ProtobufArrayList.java:96)\n    at tutorial.Dataformat$Person.setHeader(Dataformat.java:572)\n    at tutorial.Dataformat$Person.access$1200(Dataformat.java:42)\n    at tutorial.Dataformat$Person$Builder.setHeader(Dataformat.java:815)\n</code></pre>\n\n<p>...</p>\n"},{"tags":["java","mysql","hibernate","jpa","spring-data-jpa"],"answers":[{"tags":[],"owner":{"account_id":1590699,"reputation":3309,"user_id":1474069,"accept_rate":80,"display_name":"Carlitos Way"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1637247064,"creation_date":1632549810,"answer_id":69323571,"question_id":69323377,"body_markdown":"The problem resides in that the foreign key from `Project` to `Student` is missing the option: &quot;on delete cascade&quot; ... such option instructs the database to remove those `Projects` that depend on the deleted `Student` ... if no option is configured, your database will complain with &quot;Constraint violation errors&quot;, as the one that you&#39;re facing ...\r\n\r\nIt seems that you&#39;re creating your database model through hibernate ... to add such option to the constraint to can follow [this][1] example ... The result should be something like this:\r\n\r\n    @Entity\r\n    @Table(name = &quot;project&quot;)\r\n    public class Project {\r\n        ...\r\n        @ManyToOne\r\n        @JoinColumn(\r\n            name = &quot;student_id&quot;, \r\n            nullable = false,\r\n            foreignKey = @ForeignKey(\r\n                name = &quot;FK_STUDENT_ID&quot;,\r\n                foreignKeyDefinition = &quot;FOREIGN KEY (student_id) REFERENCES student(id) ON DELETE CASCADE&quot;\r\n        )\r\n        private Student student;\r\n        ...\r\n    }\r\n\r\n**NOTE**: this is just a quick example, you&#39;ll have to test it yourself.\r\n\r\n\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/66539490/1474069","title":"JPA Hibernate @ManyToOne foreign key constraint fails","body":"<p>The problem resides in that the foreign key from <code>Project</code> to <code>Student</code> is missing the option: &quot;on delete cascade&quot; ... such option instructs the database to remove those <code>Projects</code> that depend on the deleted <code>Student</code> ... if no option is configured, your database will complain with &quot;Constraint violation errors&quot;, as the one that you're facing ...</p>\n<p>It seems that you're creating your database model through hibernate ... to add such option to the constraint to can follow <a href=\"https://stackoverflow.com/a/66539490/1474069\">this</a> example ... The result should be something like this:</p>\n<pre><code>@Entity\n@Table(name = &quot;project&quot;)\npublic class Project {\n    ...\n    @ManyToOne\n    @JoinColumn(\n        name = &quot;student_id&quot;, \n        nullable = false,\n        foreignKey = @ForeignKey(\n            name = &quot;FK_STUDENT_ID&quot;,\n            foreignKeyDefinition = &quot;FOREIGN KEY (student_id) REFERENCES student(id) ON DELETE CASCADE&quot;\n    )\n    private Student student;\n    ...\n}\n</code></pre>\n<p><strong>NOTE</strong>: this is just a quick example, you'll have to test it yourself.</p>\n"},{"tags":[],"owner":{"account_id":22354823,"reputation":16499,"user_id":16572295,"display_name":"Jo&#227;o Dias"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1632580018,"creation_date":1632580018,"answer_id":69327067,"question_id":69323377,"body_markdown":"Cascading REMOVE operations from the parent to the child will require a relation from the parent to the child (not just the opposite, which seems to be what you currently have). Having said that, try creating a bi-directional relationship as follows:\r\n```java\r\n@Entity\r\n@Table(name = &quot;student&quot;)\r\n@Cache(usage = CacheConcurrencyStrategy.READ_WRITE)\r\npublic class Student implements Serializable {\r\n\r\n    private static final long serialVersionUID = 1L;\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long id;\r\n\r\n    @Column(name = &quot;name&quot;)\r\n    private String name;\r\n \r\n    @OneToMany(mappedBy = &quot;student&quot;, cascade = CascadeType.REMOVE)\r\n    private Set&lt;Project&gt; projects;\r\n}\r\n```\r\n\r\nAdditionally, consider removing the cascading REMOVE operations from `Project` otherwise you might end up deleting a `Student` upon deletion of a `Project`.","title":"JPA Hibernate @ManyToOne foreign key constraint fails","body":"<p>Cascading REMOVE operations from the parent to the child will require a relation from the parent to the child (not just the opposite, which seems to be what you currently have). Having said that, try creating a bi-directional relationship as follows:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\n@Table(name = &quot;student&quot;)\n@Cache(usage = CacheConcurrencyStrategy.READ_WRITE)\npublic class Student implements Serializable {\n\n    private static final long serialVersionUID = 1L;\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @Column(name = &quot;name&quot;)\n    private String name;\n \n    @OneToMany(mappedBy = &quot;student&quot;, cascade = CascadeType.REMOVE)\n    private Set&lt;Project&gt; projects;\n}\n</code></pre>\n<p>Additionally, consider removing the cascading REMOVE operations from <code>Project</code> otherwise you might end up deleting a <code>Student</code> upon deletion of a <code>Project</code>.</p>\n"}],"owner":{"account_id":10906191,"reputation":399,"user_id":8016884,"display_name":"Ahmed Yusuf"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1586,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":69323571,"answer_count":2,"score":1,"last_activity_date":1637247180,"creation_date":1632547238,"question_id":69323377,"body_markdown":"I am working on a basic example to test cascade delete operation but I am getting exception. Here is my entities\r\n```@Entity\r\n@Table(name = &quot;project&quot;)\r\n@Cache(usage = CacheConcurrencyStrategy.READ_WRITE)\r\npublic class Project implements Serializable {\r\n\r\n    private static final long serialVersionUID = 1L;\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long id;\r\n\r\n    @Column(name = &quot;project_name&quot;)\r\n    private String projectName;\r\n\r\n    @ManyToOne(cascade = CascadeType.REMOVE)\r\n    private Student student;\r\n\r\n    ...\r\n} \r\n```\r\n\r\nand \r\n\r\n```\r\n@Entity\r\n@Table(name = &quot;student&quot;)\r\n@Cache(usage = CacheConcurrencyStrategy.READ_WRITE)\r\npublic class Student implements Serializable {\r\n\r\n    private static final long serialVersionUID = 1L;\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long id;\r\n\r\n    @Column(name = &quot;name&quot;)\r\n    private String name;\r\n \r\n    ...\r\n}\r\n```\r\n\r\nI already have one student data and one project related to it, and my expectation is when I delete student data, that project will automatically be deleted. But when I delete student data, I got an error \r\n\r\n```\r\nCaused by: java.sql.SQLIntegrityConstraintViolationException: Cannot delete or update a parent row: a foreign key constraint fails (`document_control`.`project`, CONSTRAINT `FKjvi932wdxw4ux6m7u6abiy7qv` FOREIGN KEY (`student_id`) REFERENCES `student` (`id`))\r\n```\r\n\r\nI&#39;m using JPA to delete the data, and here is my controller class\r\n```\r\n@DeleteMapping(&quot;/students/{id}&quot;)\r\n    public ResponseEntity&lt;Void&gt; deleteStudent(@PathVariable Long id) {\r\n        log.debug(&quot;REST request to delete Student : {}&quot;, id);\r\n        studentRepository.deleteById(id);\r\n        return ResponseEntity\r\n            .noContent()\r\n            .headers(HeaderUtil.createEntityDeletionAlert(applicationName, false,\r\n                ENTITY_NAME, id.toString()))\r\n            .build();\r\n    }\r\n```\r\n\r\nAm I missing something here?","title":"JPA Hibernate @ManyToOne foreign key constraint fails","body":"<p>I am working on a basic example to test cascade delete operation but I am getting exception. Here is my entities</p>\n<pre><code>@Table(name = &quot;project&quot;)\n@Cache(usage = CacheConcurrencyStrategy.READ_WRITE)\npublic class Project implements Serializable {\n\n    private static final long serialVersionUID = 1L;\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @Column(name = &quot;project_name&quot;)\n    private String projectName;\n\n    @ManyToOne(cascade = CascadeType.REMOVE)\n    private Student student;\n\n    ...\n} \n</code></pre>\n<p>and</p>\n<pre><code>@Entity\n@Table(name = &quot;student&quot;)\n@Cache(usage = CacheConcurrencyStrategy.READ_WRITE)\npublic class Student implements Serializable {\n\n    private static final long serialVersionUID = 1L;\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @Column(name = &quot;name&quot;)\n    private String name;\n \n    ...\n}\n</code></pre>\n<p>I already have one student data and one project related to it, and my expectation is when I delete student data, that project will automatically be deleted. But when I delete student data, I got an error</p>\n<pre><code>Caused by: java.sql.SQLIntegrityConstraintViolationException: Cannot delete or update a parent row: a foreign key constraint fails (`document_control`.`project`, CONSTRAINT `FKjvi932wdxw4ux6m7u6abiy7qv` FOREIGN KEY (`student_id`) REFERENCES `student` (`id`))\n</code></pre>\n<p>I'm using JPA to delete the data, and here is my controller class</p>\n<pre><code>@DeleteMapping(&quot;/students/{id}&quot;)\n    public ResponseEntity&lt;Void&gt; deleteStudent(@PathVariable Long id) {\n        log.debug(&quot;REST request to delete Student : {}&quot;, id);\n        studentRepository.deleteById(id);\n        return ResponseEntity\n            .noContent()\n            .headers(HeaderUtil.createEntityDeletionAlert(applicationName, false,\n                ENTITY_NAME, id.toString()))\n            .build();\n    }\n</code></pre>\n<p>Am I missing something here?</p>\n"},{"tags":["java","azure","maven","visual-studio-code","azure-functions"],"answers":[{"tags":[],"owner":{"account_id":3208160,"reputation":382,"user_id":2708748,"accept_rate":67,"display_name":"Johnyzhub"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1586699898,"creation_date":1586699898,"answer_id":61172578,"question_id":61149061,"body_markdown":"Turned out that the problem is with the incompatible java version. Currently azure functions support only JDK8 but I used JDK11. After switching to the right java version, the problem is solved.","title":"Azure Functions project using Visual Studio Code in java","body":"<p>Turned out that the problem is with the incompatible java version. Currently azure functions support only JDK8 but I used JDK11. After switching to the right java version, the problem is solved.</p>\n"},{"tags":[],"owner":{"account_id":6850354,"reputation":95,"user_id":5267710,"display_name":"Vincent Jyotirmoy Singha - JS"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1637246941,"creation_date":1637246941,"answer_id":70021899,"question_id":61149061,"body_markdown":"I encountered the same issue, the default pom.xml created with Azure Functions gives this error when using Java 11.\r\n\r\nI found that Azure has added support for Java 11 since 26th Oct 2021.\r\n\r\nhttps://azure.microsoft.com/en-in/updates/java-11-support-for-azure-functions-is-now-generally-available/\r\n\r\nBut the default pom still comes with 1.8 support configurations.\r\n\r\nI used this https://learn.microsoft.com/en-us/azure/azure-functions/functions-reference-java?tabs=bash%2Cconsumption#java-versions as a reference and updated the pom.xml as below to make it compile and run in Java 11.\r\n\r\n    &lt;properties&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n\t\t&lt;java.version&gt;11&lt;/java.version&gt;\r\n\t\t&lt;azure.functions.maven.plugin.version&gt;1.6.0&lt;/azure.functions.maven.plugin.version&gt;\r\n\t\t&lt;azure.functions.java.library.version&gt;1.3.1&lt;/azure.functions.java.library.version&gt;\r\n        &lt;maven.compiler.source&gt;11&lt;/maven.compiler.source&gt;\r\n        &lt;maven.compiler.target&gt;11&lt;/maven.compiler.target&gt;\r\n        &lt;functionAppName&gt;dummy-sample-20211118&lt;/functionAppName&gt;\r\n    &lt;/properties&gt;\r\n\t\r\n\t&lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.microsoft.azure&lt;/groupId&gt;\r\n            &lt;artifactId&gt;azure-functions-java-core&lt;/artifactId&gt;\r\n            &lt;version&gt;1.0.0-beta-3&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;!-- Test --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;junit&lt;/groupId&gt;\r\n            &lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n            &lt;version&gt;4.12&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\n    &lt;build&gt;\r\n        &lt;pluginManagement&gt;\r\n            &lt;plugins&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;3.2.0&lt;/version&gt;\r\n                &lt;/plugin&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;com.microsoft.azure&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;azure-functions-maven-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;${azure.functions.maven.plugin.version}&lt;/version&gt;\r\n                &lt;/plugin&gt;\r\n            &lt;/plugins&gt;\r\n        &lt;/pluginManagement&gt;\r\n\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;com.microsoft.azure&lt;/groupId&gt;\r\n                &lt;artifactId&gt;azure-functions-maven-plugin&lt;/artifactId&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;resourceGroup&gt;java-functions-group&lt;/resourceGroup&gt;\r\n                    &lt;appName&gt;${functionAppName}&lt;/appName&gt;\r\n                    &lt;region&gt;westus2&lt;/region&gt;\r\n                    &lt;appSettings&gt;\r\n                        &lt;property&gt;\r\n                            &lt;name&gt;FUNCTIONS_EXTENSION_VERSION&lt;/name&gt;\r\n                            &lt;value&gt;beta&lt;/value&gt;\r\n                        &lt;/property&gt;\r\n                    &lt;/appSettings&gt;\r\n                &lt;/configuration&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;id&gt;package-functions&lt;/id&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;package&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n                &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;id&gt;copy-resources&lt;/id&gt;\r\n                        &lt;phase&gt;package&lt;/phase&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;copy-resources&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                        &lt;configuration&gt;\r\n                            &lt;overwrite&gt;true&lt;/overwrite&gt;\r\n                            &lt;outputDirectory&gt;${project.build.directory}/azure-functions/${functionAppName}\r\n                            &lt;/outputDirectory&gt;\r\n                            &lt;resources&gt;\r\n                                &lt;resource&gt;\r\n                                    &lt;directory&gt;${project.basedir}&lt;/directory&gt;\r\n                                    &lt;includes&gt;\r\n                                        &lt;include&gt;host.json&lt;/include&gt;\r\n                                        &lt;include&gt;local.settings.json&lt;/include&gt;\r\n                                    &lt;/includes&gt;\r\n                                &lt;/resource&gt;\r\n                            &lt;/resources&gt;\r\n                        &lt;/configuration&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n\r\n    &lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n\r\n\r\n\r\n\r\n ","title":"Azure Functions project using Visual Studio Code in java","body":"<p>I encountered the same issue, the default pom.xml created with Azure Functions gives this error when using Java 11.</p>\n<p>I found that Azure has added support for Java 11 since 26th Oct 2021.</p>\n<p><a href=\"https://azure.microsoft.com/en-in/updates/java-11-support-for-azure-functions-is-now-generally-available/\" rel=\"nofollow noreferrer\">https://azure.microsoft.com/en-in/updates/java-11-support-for-azure-functions-is-now-generally-available/</a></p>\n<p>But the default pom still comes with 1.8 support configurations.</p>\n<p>I used this <a href=\"https://learn.microsoft.com/en-us/azure/azure-functions/functions-reference-java?tabs=bash%2Cconsumption#java-versions\" rel=\"nofollow noreferrer\">https://learn.microsoft.com/en-us/azure/azure-functions/functions-reference-java?tabs=bash%2Cconsumption#java-versions</a> as a reference and updated the pom.xml as below to make it compile and run in Java 11.</p>\n<pre><code>&lt;properties&gt;\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;java.version&gt;11&lt;/java.version&gt;\n    &lt;azure.functions.maven.plugin.version&gt;1.6.0&lt;/azure.functions.maven.plugin.version&gt;\n    &lt;azure.functions.java.library.version&gt;1.3.1&lt;/azure.functions.java.library.version&gt;\n    &lt;maven.compiler.source&gt;11&lt;/maven.compiler.source&gt;\n    &lt;maven.compiler.target&gt;11&lt;/maven.compiler.target&gt;\n    &lt;functionAppName&gt;dummy-sample-20211118&lt;/functionAppName&gt;\n&lt;/properties&gt;\n\n&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.microsoft.azure&lt;/groupId&gt;\n        &lt;artifactId&gt;azure-functions-java-core&lt;/artifactId&gt;\n        &lt;version&gt;1.0.0-beta-3&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- Test --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;junit&lt;/groupId&gt;\n        &lt;artifactId&gt;junit&lt;/artifactId&gt;\n        &lt;version&gt;4.12&lt;/version&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n\n&lt;build&gt;\n    &lt;pluginManagement&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.2.0&lt;/version&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;com.microsoft.azure&lt;/groupId&gt;\n                &lt;artifactId&gt;azure-functions-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;${azure.functions.maven.plugin.version}&lt;/version&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/pluginManagement&gt;\n\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;com.microsoft.azure&lt;/groupId&gt;\n            &lt;artifactId&gt;azure-functions-maven-plugin&lt;/artifactId&gt;\n            &lt;configuration&gt;\n                &lt;resourceGroup&gt;java-functions-group&lt;/resourceGroup&gt;\n                &lt;appName&gt;${functionAppName}&lt;/appName&gt;\n                &lt;region&gt;westus2&lt;/region&gt;\n                &lt;appSettings&gt;\n                    &lt;property&gt;\n                        &lt;name&gt;FUNCTIONS_EXTENSION_VERSION&lt;/name&gt;\n                        &lt;value&gt;beta&lt;/value&gt;\n                    &lt;/property&gt;\n                &lt;/appSettings&gt;\n            &lt;/configuration&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;id&gt;package-functions&lt;/id&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;package&lt;/goal&gt;\n                    &lt;/goals&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n            &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;id&gt;copy-resources&lt;/id&gt;\n                    &lt;phase&gt;package&lt;/phase&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;copy-resources&lt;/goal&gt;\n                    &lt;/goals&gt;\n                    &lt;configuration&gt;\n                        &lt;overwrite&gt;true&lt;/overwrite&gt;\n                        &lt;outputDirectory&gt;${project.build.directory}/azure-functions/${functionAppName}\n                        &lt;/outputDirectory&gt;\n                        &lt;resources&gt;\n                            &lt;resource&gt;\n                                &lt;directory&gt;${project.basedir}&lt;/directory&gt;\n                                &lt;includes&gt;\n                                    &lt;include&gt;host.json&lt;/include&gt;\n                                    &lt;include&gt;local.settings.json&lt;/include&gt;\n                                &lt;/includes&gt;\n                            &lt;/resource&gt;\n                        &lt;/resources&gt;\n                    &lt;/configuration&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n\n&lt;/build&gt;\n</code></pre>\n\n"}],"owner":{"account_id":3208160,"reputation":382,"user_id":2708748,"accept_rate":67,"display_name":"Johnyzhub"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1533,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1637246941,"creation_date":1586554688,"question_id":61149061,"body_markdown":"I am trying to use VSCode to create azure function and deploy it to azure. I followed the official documentation as described, \r\n\r\n   https://learn.microsoft.com/en-us/azure/azure-functions/functions-create-first-function-vs-code?pivots=programming-language-java. \r\n\r\ndid everything as described in this document but got the error on pressing F5 upon reaching the section &#39;**Run the function locally**&#39;. I tried few things by searching on internet but none of them work. I noticed there is an open issue on official github account reported way back in 2017 \r\n\r\nhttps://github.com/Microsoft/function-demo-java-on-azure/issues/3 \r\n\r\nThat makes me wonder is this problem still exist?\r\n\r\nAlready spent lots of time on this but couldn&#39;t make it to work. Any help is appreciated\r\n\r\n              Environment:\r\n              VS Code: v1.44.0\r\n              jdk 11.0.3\r\n              node v12.16.1\r\n              maven v3.6.3\r\n   \r\nsuccessfully installed the azure function core tools using the command, npm install -g azure-functions-core-tools@3\r\n\r\n\r\nHere is complete error trace\r\n--------------------------------------------------\r\n\r\n    INFO] --- azure-functions-maven-plugin:0.1.4:package (package-functions) @ azure-http-trigger-example ---\r\n    [INFO] ------------------------------------------------------------------------\r\n    [INFO] BUILD FAILURE\r\n    [INFO] ------------------------------------------------------------------------\r\n    [INFO] Total time:  18.933 s\r\n    [INFO] Finished at: 2020-04-10T17:28:19-04:00\r\n    [INFO] ------------------------------------------------------------------------\r\n    [ERROR] Failed to execute goal com.microsoft.azure:azure-functions-maven-plugin:0.1.4:package (package-functions) on project azure-http-trigger-example: Execution package-functions of goal com.microsoft.azure:azure-functions-maven-plugin:0.1.4:package failed: A required class was missing while executing com.microsoft.azure:azure-functions-maven-plugin:0.1.4:package: javax/xml/bind/JAXBException\r\n    [ERROR] -----------------------------------------------------\r\n    [ERROR] realm =    plugin&gt;com.microsoft.azure:azure-functions-maven-plugin:0.1.4\r\n    [ERROR] strategy = org.codehaus.plexus.classworlds.strategy.SelfFirstStrategy\r\n    [ERROR] urls[0] = file:/C:/maven/repository/com/microsoft/azure/azure-functions-maven-plugin/0.1.4/azure-functions-maven-plugin-0.1.4.jar\r\n    [ERROR] urls[1] = file:/C:/maven/repository/javax/enterprise/cdi-api/1.0/cdi-api-1.0.jar\r\n    [ERROR] urls[2] = file:/C:/maven/repository/org/eclipse/sisu/org.eclipse.sisu.inject/0.3.0/org.eclipse.sisu.inject-0.3.0.jar\r\n    [ERROR] urls[3] = file:/C:/maven/repository/org/apache/maven/maven-builder-support/3.3.3/maven-builder-support-3.3.3.jar\r\n    [ERROR] urls[4] = file:/C:/maven/repository/org/eclipse/aether/aether-util/1.0.2.v20150114/aether-util-1.0.2.v20150114.jar\r\n    [ERROR] urls[5] = file:/C:/maven/repository/org/sonatype/sisu/sisu-guice/3.2.5/sisu-guice-3.2.5-no_aop.jar\r\n    [ERROR] urls[6] = file:/C:/maven/repository/aopalliance/aopalliance/1.0/aopalliance-1.0.jar\r\n    [ERROR] urls[7] = file:/C:/maven/repository/org/codehaus/plexus/plexus-interpolation/1.21/plexus-interpolation-1.21.jar\r\n    [ERROR] urls[8] = file:/C:/maven/repository/org/codehaus/plexus/plexus-component-annotations/1.5.5/plexus-component-annotations-1.5.5.jar\r\n    [ERROR] urls[9] = file:/C:/maven/repository/org/sonatype/plexus/plexus-sec-dispatcher/1.3/plexus-sec-dispatcher-1.3.jar\r\n    [ERROR] urls[10] = file:/C:/maven/repository/org/sonatype/plexus/plexus-cipher/1.4/plexus-cipher-1.4.jar\r\n    [ERROR] urls[11] = file:/C:/maven/repository/org/codehaus/plexus/plexus-utils/3.0.20/plexus-utils-3.0.20.jar\r\n    [ERROR] urls[12] = file:/C:/maven/repository/com/microsoft/azure/azure-maven-plugin-lib/0.1.4/azure-maven-plugin-lib-0.1.4.jar\r\n    [ERROR] urls[13] = file:/C:/maven/repository/org/apache/maven/shared/maven-filtering/3.0.0/maven-filtering-3.0.0.jar\r\n    [ERROR] urls[14] = file:/C:/maven/repository/org/apache/maven/shared/maven-shared-utils/3.0.0/maven-shared-utils-3.0.0.jar\r\n    [ERROR] urls[15] = file:/C:/maven/repository/com/google/code/findbugs/jsr305/2.0.1/jsr305-2.0.1.jar\r\n    [ERROR] urls[16] = file:/C:/maven/repository/org/sonatype/plexus/plexus-build-api/0.0.7/plexus-build-api-0.0.7.jar\r\n    [ERROR] urls[17] = file:/C:/maven/repository/com/microsoft/azure/azure/1.2.1/azure-1.2.1.jar\r\n    [ERROR] urls[18] = file:/C:/maven/repository/com/microsoft/azure/azure-mgmt-resources/1.2.1/azure-mgmt-resources-1.2.1.jar\r\n    [ERROR] urls[19] = file:/C:/maven/repository/org/slf4j/slf4j-simple/1.7.5/slf4j-simple-1.7.5.jar\r\n    [ERROR] urls[20] = file:/C:/maven/repository/io/reactivex/rxjava/1.2.4/rxjava-1.2.4.jar\r\n    [ERROR] urls[21] = file:/C:/maven/repository/org/apache/httpcomponents/httpcore/4.4.5/httpcore-4.4.5.jar\r\n    [ERROR] urls[22] = file:/C:/maven/repository/com/microsoft/azure/azure-mgmt-storage/1.2.1/azure-mgmt-storage-1.2.1.jar\r\n    [ERROR] urls[23] = file:/C:/maven/repository/com/microsoft/azure/azure-mgmt-network/1.2.1/azure-mgmt-network-1.2.1.jar\r\n    [ERROR] urls[24] = file:/C:/maven/repository/com/microsoft/azure/azure-mgmt-compute/1.2.1/azure-mgmt-compute-1.2.1.jar\r\n    [ERROR] urls[25] = file:/C:/maven/repository/com/microsoft/azure/azure-mgmt-graph-rbac/1.2.1/azure-mgmt-graph-rbac-1.2.1.jar\r\n    [ERROR] urls[26] = file:/C:/maven/repository/com/microsoft/azure/azure-mgmt-keyvault/1.2.1/azure-mgmt-keyvault-1.2.1.jar\r\n    [ERROR] urls[27] = file:/C:/maven/repository/com/microsoft/azure/azure-mgmt-batch/1.2.1/azure-mgmt-batch-1.2.1.jar\r\n    [ERROR] urls[28] = file:/C:/maven/repository/com/microsoft/azure/azure-mgmt-trafficmanager/1.2.1/azure-mgmt-trafficmanager-1.2.1.jar\r\n    [ERROR] urls[29] = file:/C:/maven/repository/com/microsoft/azure/azure-mgmt-dns/1.2.1/azure-mgmt-dns-1.2.1.jar\r\n    [ERROR] urls[30] = file:/C:/maven/repository/com/microsoft/azure/azure-mgmt-redis/1.2.1/azure-mgmt-redis-1.2.1.jar\r\n    [ERROR] urls[31] = file:/C:/maven/repository/com/microsoft/azure/azure-mgmt-appservice/1.2.1/azure-mgmt-appservice-1.2.1.jar\r\n    [ERROR] urls[32] = file:/C:/maven/repository/com/microsoft/azure/azure-mgmt-cdn/1.2.1/azure-mgmt-cdn-1.2.1.jar\r\n    [ERROR] urls[33] = file:/C:/maven/repository/com/microsoft/azure/azure-mgmt-sql/1.2.1/azure-mgmt-sql-1.2.1.jar\r\n    [ERROR] urls[34] = file:/C:/maven/repository/com/microsoft/azure/azure-mgmt-containerregistry/1.2.1/azure-mgmt-containerregistry-1.2.1.jar\r\n    [ERROR] urls[35] = file:/C:/maven/repository/com/microsoft/azure/azure-mgmt-cosmosdb/1.2.1/azure-mgmt-cosmosdb-1.2.1.jar\r\n    [ERROR] urls[36] = file:/C:/maven/repository/com/microsoft/azure/azure-mgmt-search/1.2.1/azure-mgmt-search-1.2.1.jar\r\n    [ERROR] urls[37] = file:/C:/maven/repository/com/microsoft/azure/azure-mgmt-servicebus/1.2.1/azure-mgmt-servicebus-1.2.1.jar\r\n    [ERROR] urls[38] = file:/C:/maven/repository/joda-time/joda-time/2.1/joda-time-2.1.jar\r\n    [ERROR] urls[39] = file:/C:/maven/repository/com/microsoft/azure/azure-client-runtime/1.1.0/azure-client-runtime-1.1.0.jar\r\n    [ERROR] urls[40] = file:/C:/maven/repository/com/microsoft/rest/client-runtime/1.1.0/client-runtime-1.1.0.jar\r\n    [ERROR] urls[41] = file:/C:/maven/repository/com/squareup/retrofit2/retrofit/2.1.0/retrofit-2.1.0.jar\r\n    [ERROR] urls[42] = file:/C:/maven/repository/com/squareup/okhttp3/okhttp/3.3.1/okhttp-3.3.1.jar\r\n    [ERROR] urls[43] = file:/C:/maven/repository/com/squareup/okio/okio/1.8.0/okio-1.8.0.jar\r\n    [ERROR] urls[44] = file:/C:/maven/repository/com/squareup/okhttp3/logging-interceptor/3.3.1/logging-interceptor-3.3.1.jar\r\n    [ERROR] urls[45] = file:/C:/maven/repository/com/squareup/okhttp3/okhttp-urlconnection/3.3.1/okhttp-urlconnection-3.3.1.jar\r\n    [ERROR] urls[46] = file:/C:/maven/repository/com/squareup/retrofit2/converter-jackson/2.1.0/converter-jackson-2.1.0.jar\r\n    [ERROR] urls[47] = file:/C:/maven/repository/com/fasterxml/jackson/core/jackson-databind/2.7.2/jackson-databind-2.7.2.jar\r\n    [ERROR] urls[48] = file:/C:/maven/repository/com/fasterxml/jackson/datatype/jackson-datatype-joda/2.7.2/jackson-datatype-joda-2.7.2.jar\r\n    [ERROR] urls[49] = file:/C:/maven/repository/com/fasterxml/jackson/core/jackson-annotations/2.7.0/jackson-annotations-2.7.0.jar\r\n    [ERROR] urls[50] = file:/C:/maven/repository/com/squareup/retrofit2/adapter-rxjava/2.1.0/adapter-rxjava-2.1.0.jar\r\n    [ERROR] urls[51] = file:/C:/maven/repository/com/microsoft/azure/azure-client-authentication/1.1.0/azure-client-authentication-1.1.0.jar\r\n    [ERROR] urls[52] = file:/C:/maven/repository/com/microsoft/azure/adal4j/1.1.2/adal4j-1.1.2.jar\r\n    [ERROR] urls[53] = file:/C:/maven/repository/com/nimbusds/oauth2-oidc-sdk/4.5/oauth2-oidc-sdk-4.5.jar\r\n    [ERROR] urls[54] = file:/C:/maven/repository/javax/mail/mail/1.4.7/mail-1.4.7.jar\r\n    [ERROR] urls[55] = file:/C:/maven/repository/javax/activation/activation/1.1/activation-1.1.jar\r\n    [ERROR] urls[56] = file:/C:/maven/repository/net/jcip/jcip-annotations/1.0/jcip-annotations-1.0.jar\r\n    [ERROR] urls[57] = file:/C:/maven/repository/net/minidev/json-smart/1.1.1/json-smart-1.1.1.jar\r\n    [ERROR] urls[58] = file:/C:/maven/repository/com/nimbusds/lang-tag/1.4/lang-tag-1.4.jar\r\n    [ERROR] urls[59] = file:/C:/maven/repository/com/nimbusds/nimbus-jose-jwt/3.1.2/nimbus-jose-jwt-3.1.2.jar\r\n    [ERROR] urls[60] = file:/C:/maven/repository/org/bouncycastle/bcprov-jdk15on/1.51/bcprov-jdk15on-1.51.jar\r\n    [ERROR] urls[61] = file:/C:/maven/repository/com/google/code/gson/gson/2.2.4/gson-2.2.4.jar\r\n    [ERROR] urls[62] = file:/C:/maven/repository/commons-codec/commons-codec/1.10/commons-codec-1.10.jar\r\n    [ERROR] urls[63] = file:/C:/maven/repository/com/microsoft/azure/azure-annotations/1.2.0/azure-annotations-1.2.0.jar\r\n    [ERROR] urls[64] = file:/C:/maven/repository/com/microsoft/azure/applicationinsights-core/1.0.9/applicationinsights-core-1.0.9.jar\r\n    [ERROR] urls[65] = file:/C:/maven/repository/eu/infomas/annotation-detector/3.0.4/annotation-detector-3.0.4.jar\r\n    [ERROR] urls[66] = file:/C:/maven/repository/commons-io/commons-io/2.4/commons-io-2.4.jar\r\n    [ERROR] urls[67] = file:/C:/maven/repository/org/apache/httpcomponents/httpclient/4.5.3/httpclient-4.5.3.jar\r\n    [ERROR] urls[68] = file:/C:/maven/repository/commons-logging/commons-logging/1.2/commons-logging-1.2.jar\r\n    [ERROR] urls[69] = file:/C:/maven/repository/commons-net/commons-net/3.6/commons-net-3.6.jar\r\n    [ERROR] urls[70] = file:/C:/maven/repository/com/microsoft/azure/azure-functions-java-core/1.0.0-beta-1/azure-functions-java-core-1.0.0-beta-1.jar\r\n    [ERROR] urls[71] = file:/C:/maven/repository/org/reflections/reflections/0.9.11/reflections-0.9.11.jar\r\n    [ERROR] urls[72] = file:/C:/maven/repository/com/google/guava/guava/20.0/guava-20.0.jar\r\n    [ERROR] urls[73] = file:/C:/maven/repository/org/javassist/javassist/3.21.0-GA/javassist-3.21.0-GA.jar\r\n    [ERROR] urls[74] = file:/C:/maven/repository/com/microsoft/azure/azure-storage/5.4.0/azure-storage-5.4.0.jar\r\n    [ERROR] urls[75] = file:/C:/maven/repository/com/fasterxml/jackson/core/jackson-core/2.6.0/jackson-core-2.6.0.jar\r\n    [ERROR] urls[76] = file:/C:/maven/repository/org/apache/commons/commons-lang3/3.4/commons-lang3-3.4.jar\r\n    [ERROR] urls[77] = file:/C:/maven/repository/com/microsoft/azure/azure-keyvault-core/0.8.0/azure-keyvault-core-0.8.0.jar\r\n    [ERROR] urls[78] = file:/C:/maven/repository/org/zeroturnaround/zt-zip/1.12/zt-zip-1.12.jar\r\n    [ERROR] urls[79] = file:/C:/maven/repository/junit/junit/4.12/junit-4.12.jar\r\n    [ERROR] urls[80] = file:/C:/maven/repository/org/hamcrest/hamcrest-core/1.3/hamcrest-core-1.3.jar\r\n    [ERROR] Number of foreign imports: 1\r\n    [ERROR] import: Entry[import  from realm ClassRealm[maven.api, parent: null]]\r\n    [ERROR]\r\n    [ERROR] -----------------------------------------------------\r\n    [ERROR] : javax.xml.bind.JAXBException\r\n    [ERROR] -&gt; [Help 1]\r\n    [ERROR]\r\n    [ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\r\n    [ERROR] Re-run Maven using the -X switch to enable full debug logging.\r\n    [ERROR]\r\n    [ERROR] For more information about the errors and possible solutions, please read the following articles:\r\n    [ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/PluginContainerException\r\n    The terminal process terminated with exit code: 1\r\n    \r\n    Terminal will be reused by tasks, press any key to close it.\r\n\r\n\r\n------------------------------------------------------------------\r\n\r\n","title":"Azure Functions project using Visual Studio Code in java","body":"<p>I am trying to use VSCode to create azure function and deploy it to azure. I followed the official documentation as described, </p>\n\n<p><a href=\"https://learn.microsoft.com/en-us/azure/azure-functions/functions-create-first-function-vs-code?pivots=programming-language-java\" rel=\"nofollow noreferrer\">https://learn.microsoft.com/en-us/azure/azure-functions/functions-create-first-function-vs-code?pivots=programming-language-java</a>. </p>\n\n<p>did everything as described in this document but got the error on pressing F5 upon reaching the section '<strong>Run the function locally</strong>'. I tried few things by searching on internet but none of them work. I noticed there is an open issue on official github account reported way back in 2017 </p>\n\n<p><a href=\"https://github.com/Microsoft/function-demo-java-on-azure/issues/3\" rel=\"nofollow noreferrer\">https://github.com/Microsoft/function-demo-java-on-azure/issues/3</a> </p>\n\n<p>That makes me wonder is this problem still exist?</p>\n\n<p>Already spent lots of time on this but couldn't make it to work. Any help is appreciated</p>\n\n<pre><code>          Environment:\n          VS Code: v1.44.0\n          jdk 11.0.3\n          node v12.16.1\n          maven v3.6.3\n</code></pre>\n\n<p>successfully installed the azure function core tools using the command, npm install -g azure-functions-core-tools@3</p>\n\n<h2>Here is complete error trace</h2>\n\n<pre><code>INFO] --- azure-functions-maven-plugin:0.1.4:package (package-functions) @ azure-http-trigger-example ---\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD FAILURE\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time:  18.933 s\n[INFO] Finished at: 2020-04-10T17:28:19-04:00\n[INFO] ------------------------------------------------------------------------\n[ERROR] Failed to execute goal com.microsoft.azure:azure-functions-maven-plugin:0.1.4:package (package-functions) on project azure-http-trigger-example: Execution package-functions of goal com.microsoft.azure:azure-functions-maven-plugin:0.1.4:package failed: A required class was missing while executing com.microsoft.azure:azure-functions-maven-plugin:0.1.4:package: javax/xml/bind/JAXBException\n[ERROR] -----------------------------------------------------\n[ERROR] realm =    plugin&gt;com.microsoft.azure:azure-functions-maven-plugin:0.1.4\n[ERROR] strategy = org.codehaus.plexus.classworlds.strategy.SelfFirstStrategy\n[ERROR] urls[0] = file:/C:/maven/repository/com/microsoft/azure/azure-functions-maven-plugin/0.1.4/azure-functions-maven-plugin-0.1.4.jar\n[ERROR] urls[1] = file:/C:/maven/repository/javax/enterprise/cdi-api/1.0/cdi-api-1.0.jar\n[ERROR] urls[2] = file:/C:/maven/repository/org/eclipse/sisu/org.eclipse.sisu.inject/0.3.0/org.eclipse.sisu.inject-0.3.0.jar\n[ERROR] urls[3] = file:/C:/maven/repository/org/apache/maven/maven-builder-support/3.3.3/maven-builder-support-3.3.3.jar\n[ERROR] urls[4] = file:/C:/maven/repository/org/eclipse/aether/aether-util/1.0.2.v20150114/aether-util-1.0.2.v20150114.jar\n[ERROR] urls[5] = file:/C:/maven/repository/org/sonatype/sisu/sisu-guice/3.2.5/sisu-guice-3.2.5-no_aop.jar\n[ERROR] urls[6] = file:/C:/maven/repository/aopalliance/aopalliance/1.0/aopalliance-1.0.jar\n[ERROR] urls[7] = file:/C:/maven/repository/org/codehaus/plexus/plexus-interpolation/1.21/plexus-interpolation-1.21.jar\n[ERROR] urls[8] = file:/C:/maven/repository/org/codehaus/plexus/plexus-component-annotations/1.5.5/plexus-component-annotations-1.5.5.jar\n[ERROR] urls[9] = file:/C:/maven/repository/org/sonatype/plexus/plexus-sec-dispatcher/1.3/plexus-sec-dispatcher-1.3.jar\n[ERROR] urls[10] = file:/C:/maven/repository/org/sonatype/plexus/plexus-cipher/1.4/plexus-cipher-1.4.jar\n[ERROR] urls[11] = file:/C:/maven/repository/org/codehaus/plexus/plexus-utils/3.0.20/plexus-utils-3.0.20.jar\n[ERROR] urls[12] = file:/C:/maven/repository/com/microsoft/azure/azure-maven-plugin-lib/0.1.4/azure-maven-plugin-lib-0.1.4.jar\n[ERROR] urls[13] = file:/C:/maven/repository/org/apache/maven/shared/maven-filtering/3.0.0/maven-filtering-3.0.0.jar\n[ERROR] urls[14] = file:/C:/maven/repository/org/apache/maven/shared/maven-shared-utils/3.0.0/maven-shared-utils-3.0.0.jar\n[ERROR] urls[15] = file:/C:/maven/repository/com/google/code/findbugs/jsr305/2.0.1/jsr305-2.0.1.jar\n[ERROR] urls[16] = file:/C:/maven/repository/org/sonatype/plexus/plexus-build-api/0.0.7/plexus-build-api-0.0.7.jar\n[ERROR] urls[17] = file:/C:/maven/repository/com/microsoft/azure/azure/1.2.1/azure-1.2.1.jar\n[ERROR] urls[18] = file:/C:/maven/repository/com/microsoft/azure/azure-mgmt-resources/1.2.1/azure-mgmt-resources-1.2.1.jar\n[ERROR] urls[19] = file:/C:/maven/repository/org/slf4j/slf4j-simple/1.7.5/slf4j-simple-1.7.5.jar\n[ERROR] urls[20] = file:/C:/maven/repository/io/reactivex/rxjava/1.2.4/rxjava-1.2.4.jar\n[ERROR] urls[21] = file:/C:/maven/repository/org/apache/httpcomponents/httpcore/4.4.5/httpcore-4.4.5.jar\n[ERROR] urls[22] = file:/C:/maven/repository/com/microsoft/azure/azure-mgmt-storage/1.2.1/azure-mgmt-storage-1.2.1.jar\n[ERROR] urls[23] = file:/C:/maven/repository/com/microsoft/azure/azure-mgmt-network/1.2.1/azure-mgmt-network-1.2.1.jar\n[ERROR] urls[24] = file:/C:/maven/repository/com/microsoft/azure/azure-mgmt-compute/1.2.1/azure-mgmt-compute-1.2.1.jar\n[ERROR] urls[25] = file:/C:/maven/repository/com/microsoft/azure/azure-mgmt-graph-rbac/1.2.1/azure-mgmt-graph-rbac-1.2.1.jar\n[ERROR] urls[26] = file:/C:/maven/repository/com/microsoft/azure/azure-mgmt-keyvault/1.2.1/azure-mgmt-keyvault-1.2.1.jar\n[ERROR] urls[27] = file:/C:/maven/repository/com/microsoft/azure/azure-mgmt-batch/1.2.1/azure-mgmt-batch-1.2.1.jar\n[ERROR] urls[28] = file:/C:/maven/repository/com/microsoft/azure/azure-mgmt-trafficmanager/1.2.1/azure-mgmt-trafficmanager-1.2.1.jar\n[ERROR] urls[29] = file:/C:/maven/repository/com/microsoft/azure/azure-mgmt-dns/1.2.1/azure-mgmt-dns-1.2.1.jar\n[ERROR] urls[30] = file:/C:/maven/repository/com/microsoft/azure/azure-mgmt-redis/1.2.1/azure-mgmt-redis-1.2.1.jar\n[ERROR] urls[31] = file:/C:/maven/repository/com/microsoft/azure/azure-mgmt-appservice/1.2.1/azure-mgmt-appservice-1.2.1.jar\n[ERROR] urls[32] = file:/C:/maven/repository/com/microsoft/azure/azure-mgmt-cdn/1.2.1/azure-mgmt-cdn-1.2.1.jar\n[ERROR] urls[33] = file:/C:/maven/repository/com/microsoft/azure/azure-mgmt-sql/1.2.1/azure-mgmt-sql-1.2.1.jar\n[ERROR] urls[34] = file:/C:/maven/repository/com/microsoft/azure/azure-mgmt-containerregistry/1.2.1/azure-mgmt-containerregistry-1.2.1.jar\n[ERROR] urls[35] = file:/C:/maven/repository/com/microsoft/azure/azure-mgmt-cosmosdb/1.2.1/azure-mgmt-cosmosdb-1.2.1.jar\n[ERROR] urls[36] = file:/C:/maven/repository/com/microsoft/azure/azure-mgmt-search/1.2.1/azure-mgmt-search-1.2.1.jar\n[ERROR] urls[37] = file:/C:/maven/repository/com/microsoft/azure/azure-mgmt-servicebus/1.2.1/azure-mgmt-servicebus-1.2.1.jar\n[ERROR] urls[38] = file:/C:/maven/repository/joda-time/joda-time/2.1/joda-time-2.1.jar\n[ERROR] urls[39] = file:/C:/maven/repository/com/microsoft/azure/azure-client-runtime/1.1.0/azure-client-runtime-1.1.0.jar\n[ERROR] urls[40] = file:/C:/maven/repository/com/microsoft/rest/client-runtime/1.1.0/client-runtime-1.1.0.jar\n[ERROR] urls[41] = file:/C:/maven/repository/com/squareup/retrofit2/retrofit/2.1.0/retrofit-2.1.0.jar\n[ERROR] urls[42] = file:/C:/maven/repository/com/squareup/okhttp3/okhttp/3.3.1/okhttp-3.3.1.jar\n[ERROR] urls[43] = file:/C:/maven/repository/com/squareup/okio/okio/1.8.0/okio-1.8.0.jar\n[ERROR] urls[44] = file:/C:/maven/repository/com/squareup/okhttp3/logging-interceptor/3.3.1/logging-interceptor-3.3.1.jar\n[ERROR] urls[45] = file:/C:/maven/repository/com/squareup/okhttp3/okhttp-urlconnection/3.3.1/okhttp-urlconnection-3.3.1.jar\n[ERROR] urls[46] = file:/C:/maven/repository/com/squareup/retrofit2/converter-jackson/2.1.0/converter-jackson-2.1.0.jar\n[ERROR] urls[47] = file:/C:/maven/repository/com/fasterxml/jackson/core/jackson-databind/2.7.2/jackson-databind-2.7.2.jar\n[ERROR] urls[48] = file:/C:/maven/repository/com/fasterxml/jackson/datatype/jackson-datatype-joda/2.7.2/jackson-datatype-joda-2.7.2.jar\n[ERROR] urls[49] = file:/C:/maven/repository/com/fasterxml/jackson/core/jackson-annotations/2.7.0/jackson-annotations-2.7.0.jar\n[ERROR] urls[50] = file:/C:/maven/repository/com/squareup/retrofit2/adapter-rxjava/2.1.0/adapter-rxjava-2.1.0.jar\n[ERROR] urls[51] = file:/C:/maven/repository/com/microsoft/azure/azure-client-authentication/1.1.0/azure-client-authentication-1.1.0.jar\n[ERROR] urls[52] = file:/C:/maven/repository/com/microsoft/azure/adal4j/1.1.2/adal4j-1.1.2.jar\n[ERROR] urls[53] = file:/C:/maven/repository/com/nimbusds/oauth2-oidc-sdk/4.5/oauth2-oidc-sdk-4.5.jar\n[ERROR] urls[54] = file:/C:/maven/repository/javax/mail/mail/1.4.7/mail-1.4.7.jar\n[ERROR] urls[55] = file:/C:/maven/repository/javax/activation/activation/1.1/activation-1.1.jar\n[ERROR] urls[56] = file:/C:/maven/repository/net/jcip/jcip-annotations/1.0/jcip-annotations-1.0.jar\n[ERROR] urls[57] = file:/C:/maven/repository/net/minidev/json-smart/1.1.1/json-smart-1.1.1.jar\n[ERROR] urls[58] = file:/C:/maven/repository/com/nimbusds/lang-tag/1.4/lang-tag-1.4.jar\n[ERROR] urls[59] = file:/C:/maven/repository/com/nimbusds/nimbus-jose-jwt/3.1.2/nimbus-jose-jwt-3.1.2.jar\n[ERROR] urls[60] = file:/C:/maven/repository/org/bouncycastle/bcprov-jdk15on/1.51/bcprov-jdk15on-1.51.jar\n[ERROR] urls[61] = file:/C:/maven/repository/com/google/code/gson/gson/2.2.4/gson-2.2.4.jar\n[ERROR] urls[62] = file:/C:/maven/repository/commons-codec/commons-codec/1.10/commons-codec-1.10.jar\n[ERROR] urls[63] = file:/C:/maven/repository/com/microsoft/azure/azure-annotations/1.2.0/azure-annotations-1.2.0.jar\n[ERROR] urls[64] = file:/C:/maven/repository/com/microsoft/azure/applicationinsights-core/1.0.9/applicationinsights-core-1.0.9.jar\n[ERROR] urls[65] = file:/C:/maven/repository/eu/infomas/annotation-detector/3.0.4/annotation-detector-3.0.4.jar\n[ERROR] urls[66] = file:/C:/maven/repository/commons-io/commons-io/2.4/commons-io-2.4.jar\n[ERROR] urls[67] = file:/C:/maven/repository/org/apache/httpcomponents/httpclient/4.5.3/httpclient-4.5.3.jar\n[ERROR] urls[68] = file:/C:/maven/repository/commons-logging/commons-logging/1.2/commons-logging-1.2.jar\n[ERROR] urls[69] = file:/C:/maven/repository/commons-net/commons-net/3.6/commons-net-3.6.jar\n[ERROR] urls[70] = file:/C:/maven/repository/com/microsoft/azure/azure-functions-java-core/1.0.0-beta-1/azure-functions-java-core-1.0.0-beta-1.jar\n[ERROR] urls[71] = file:/C:/maven/repository/org/reflections/reflections/0.9.11/reflections-0.9.11.jar\n[ERROR] urls[72] = file:/C:/maven/repository/com/google/guava/guava/20.0/guava-20.0.jar\n[ERROR] urls[73] = file:/C:/maven/repository/org/javassist/javassist/3.21.0-GA/javassist-3.21.0-GA.jar\n[ERROR] urls[74] = file:/C:/maven/repository/com/microsoft/azure/azure-storage/5.4.0/azure-storage-5.4.0.jar\n[ERROR] urls[75] = file:/C:/maven/repository/com/fasterxml/jackson/core/jackson-core/2.6.0/jackson-core-2.6.0.jar\n[ERROR] urls[76] = file:/C:/maven/repository/org/apache/commons/commons-lang3/3.4/commons-lang3-3.4.jar\n[ERROR] urls[77] = file:/C:/maven/repository/com/microsoft/azure/azure-keyvault-core/0.8.0/azure-keyvault-core-0.8.0.jar\n[ERROR] urls[78] = file:/C:/maven/repository/org/zeroturnaround/zt-zip/1.12/zt-zip-1.12.jar\n[ERROR] urls[79] = file:/C:/maven/repository/junit/junit/4.12/junit-4.12.jar\n[ERROR] urls[80] = file:/C:/maven/repository/org/hamcrest/hamcrest-core/1.3/hamcrest-core-1.3.jar\n[ERROR] Number of foreign imports: 1\n[ERROR] import: Entry[import  from realm ClassRealm[maven.api, parent: null]]\n[ERROR]\n[ERROR] -----------------------------------------------------\n[ERROR] : javax.xml.bind.JAXBException\n[ERROR] -&gt; [Help 1]\n[ERROR]\n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\n[ERROR]\n[ERROR] For more information about the errors and possible solutions, please read the following articles:\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/PluginContainerException\nThe terminal process terminated with exit code: 1\n\nTerminal will be reused by tasks, press any key to close it.\n</code></pre>\n\n<hr>\n"},{"tags":["java","android","mediastore"],"comments":[{"owner":{"account_id":7818403,"reputation":169,"user_id":5912264,"accept_rate":50,"display_name":"Roadman1991"},"score":0,"creation_date":1637246722,"post_id":70021658,"comment_id":123779530,"body_markdown":"for which sdk are you planning as there might be differences on the approach depending on the sdk. maybe you can further concrete where exatly you are stuck?","body":"for which sdk are you planning as there might be differences on the approach depending on the sdk. maybe you can further concrete where exatly you are stuck?"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1637247418,"post_id":70021658,"comment_id":123779844,"body_markdown":"`/WhatsApp/Media/.Statuses` Please mention full path. This path does not exist and can not exist.","body":"<code>&#47;WhatsApp&#47;Media&#47;.Statuses</code> Please mention full path. This path does not exist and can not exist."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1637247544,"post_id":70021658,"comment_id":123779906,"body_markdown":"https://stackoverflow.com/questions/70014993/how-to-fetch-files-inside-hidden-folder-using-media-store-api-on-android-11","body":"<a href=\"https://stackoverflow.com/questions/70014993/how-to-fetch-files-inside-hidden-folder-using-media-store-api-on-android-11\" title=\"how to fetch files inside hidden folder using media store api on android 11\">stackoverflow.com/questions/70014993/&hellip;</a>"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1637247602,"post_id":70021658,"comment_id":123779931,"body_markdown":"And what is exactly your problem using the media store? We have to guess if you don&#39;t tell.","body":"And what is exactly your problem using the media store? We have to guess if you don&#39;t tell."}],"owner":{"account_id":17821843,"reputation":77,"user_id":12944045,"display_name":"Ambreen Zubari"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":170,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1637246929,"creation_date":1637245946,"question_id":70021658,"body_markdown":"I am creating a WhatsApp Status Saver app, but i am stuck at the point how can I access /WhatsApp/Media/.Statuses folder by use of Media Store API. I actually wanna create an app which will work on android sdk 30 or above. Kindly Ans. Thanks in Advance ","title":"Get media from specific folder","body":"<p>I am creating a WhatsApp Status Saver app, but i am stuck at the point how can I access /WhatsApp/Media/.Statuses folder by use of Media Store API. I actually wanna create an app which will work on android sdk 30 or above. Kindly Ans. Thanks in Advance</p>\n"},{"tags":["java","mongodb","mongodb-query","upsert","mongotemplate"],"comments":[{"owner":{"account_id":5916600,"reputation":2324,"user_id":4655217,"display_name":"geobreze"},"score":0,"creation_date":1637244425,"post_id":70021232,"comment_id":123778387,"body_markdown":"Did you try setting every counter explicitly? `&quot;counters.sale&quot;: &quot;$counters.sale&quot;`","body":"Did you try setting every counter explicitly? <code>&quot;counters.sale&quot;: &quot;$counters.sale&quot;</code>"},{"owner":{"account_id":1490645,"reputation":49,"user_id":1397805,"accept_rate":100,"display_name":"gunboxer"},"score":0,"creation_date":1637244618,"post_id":70021232,"comment_id":123778481,"body_markdown":"@geobreze The result is `&quot;increments&quot; : { &quot;3000c058-b8a7-4cff-915b-4979ef9a6ed9&quot; : { &quot;counters.sale&quot; : &quot;$counters.sale&quot; } }`","body":"@geobreze The result is <code>&quot;increments&quot; : { &quot;3000c058-b8a7-4cff-915b-4979ef9a6ed9&quot; : { &quot;counters.sale&quot; : &quot;$counters.sale&quot; } }</code>"}],"answers":[{"tags":[],"owner":{"account_id":5916600,"reputation":2324,"user_id":4655217,"display_name":"geobreze"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1637246894,"creation_date":1637246894,"answer_id":70021886,"question_id":70021232,"body_markdown":"In order to use expressions, your `$set` should be part of aggregation pipeline. So your query should look like\r\n\r\nNOTE: I&#39;ve added square brackets to the update\r\n```\r\ndb.getCollection(&#39;counterSets&#39;).update(\r\n{ &quot;$and&quot; : [\r\n    { &quot;keys.country&quot; : &quot;US&quot;}, \r\n    { &quot;keys.channel&quot; : &quot;c999&quot;}\r\n  ]\r\n},\r\n[ {&quot;$set&quot;: {&quot;counters.sale&quot;: {&quot;$sum&quot;:[&quot;$counters.sale&quot;, 10]}}}, {&quot;$set&quot;: {&quot;increments.x&quot;: &quot;$counters&quot;}}],\r\n{upsert: true})\r\n```\r\n\r\nI haven&#39;t found any information about the atomicity of aggregation pipelines, so use this carefully. ","title":"MongoTemplate upsert property snapshot","body":"<p>In order to use expressions, your <code>$set</code> should be part of aggregation pipeline. So your query should look like</p>\n<p>NOTE: I've added square brackets to the update</p>\n<pre><code>db.getCollection('counterSets').update(\n{ &quot;$and&quot; : [\n    { &quot;keys.country&quot; : &quot;US&quot;}, \n    { &quot;keys.channel&quot; : &quot;c999&quot;}\n  ]\n},\n[ {&quot;$set&quot;: {&quot;counters.sale&quot;: {&quot;$sum&quot;:[&quot;$counters.sale&quot;, 10]}}}, {&quot;$set&quot;: {&quot;increments.x&quot;: &quot;$counters&quot;}}],\n{upsert: true})\n</code></pre>\n<p>I haven't found any information about the atomicity of aggregation pipelines, so use this carefully.</p>\n"}],"owner":{"account_id":1490645,"reputation":49,"user_id":1397805,"accept_rate":100,"display_name":"gunboxer"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":67,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70021886,"answer_count":1,"score":0,"last_activity_date":1637246894,"creation_date":1637244077,"question_id":70021232,"body_markdown":"I&#39;m using **mongo 4.2.15**\r\n\r\nHere is entry:\r\n```\r\n{\r\n  &quot;keys&quot;: {\r\n    &quot;country&quot;: &quot;US&quot;,\r\n    &quot;channel&quot;: &quot;c999&quot;\r\n  },\r\n  &quot;counters&quot;: {\r\n    &quot;sale&quot;: 0\r\n  },\r\n  &quot;increments&quot;: null\r\n}\r\n```\r\n\r\nI want to be able to initialize counter set as well as increment `counters.sale` value and save increment result snapshot to `increments` property. Something like that:\r\n\r\n```\r\ndb.getCollection(&#39;counterSets&#39;).update(\r\n{ &quot;$and&quot; : [\r\n    { &quot;keys.country&quot; : &quot;US&quot;}, \r\n    { &quot;keys.channel&quot; : &quot;c999&quot;}\r\n  ]\r\n},\r\n{ &quot;$inc&quot; : \r\n    { &quot;counters.sale&quot; : 10\r\n    },\r\n  &quot;$set&quot; : \r\n    { &quot;keys&quot; : \r\n        { &quot;country&quot; : &quot;US&quot;, &quot;channel&quot; : &quot;c999&quot;}, \r\n      &quot;increments&quot;:\r\n        { &quot;3000c058-b8a7-4cff-915b-4979ef9a6ed9&quot;: {&quot;counters&quot; : &quot;$counters&quot;} }\r\n    }\r\n},\r\n{upsert: true})\r\n```\r\n\r\nThe result is:\r\n\r\n```\r\n{\r\n    &quot;_id&quot; : ObjectId(&quot;61965aba1501d6eb40588ba0&quot;),\r\n    &quot;keys&quot; : {\r\n        &quot;country&quot; : &quot;US&quot;,\r\n        &quot;channel&quot; : &quot;c999&quot;\r\n    },\r\n    &quot;counters&quot; : {\r\n        &quot;sale&quot; : 10.0\r\n    },\r\n    &quot;increments&quot; : {\r\n        &quot;3000c058-b8a7-4cff-915b-4979ef9a6ed9&quot; : {\r\n            &quot;counters&quot; : &quot;$counters&quot;\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nDoes it possible to do such update which is some how copy increment result from root object `counters` to child `increments.3000c058-b8a7-4cff-915b-4979ef9a6ed9.counters` with a single upsert. I want to implement safe inrement. Maybe you can suggest some another design?","title":"MongoTemplate upsert property snapshot","body":"<p>I'm using <strong>mongo 4.2.15</strong></p>\n<p>Here is entry:</p>\n<pre><code>{\n  &quot;keys&quot;: {\n    &quot;country&quot;: &quot;US&quot;,\n    &quot;channel&quot;: &quot;c999&quot;\n  },\n  &quot;counters&quot;: {\n    &quot;sale&quot;: 0\n  },\n  &quot;increments&quot;: null\n}\n</code></pre>\n<p>I want to be able to initialize counter set as well as increment <code>counters.sale</code> value and save increment result snapshot to <code>increments</code> property. Something like that:</p>\n<pre><code>db.getCollection('counterSets').update(\n{ &quot;$and&quot; : [\n    { &quot;keys.country&quot; : &quot;US&quot;}, \n    { &quot;keys.channel&quot; : &quot;c999&quot;}\n  ]\n},\n{ &quot;$inc&quot; : \n    { &quot;counters.sale&quot; : 10\n    },\n  &quot;$set&quot; : \n    { &quot;keys&quot; : \n        { &quot;country&quot; : &quot;US&quot;, &quot;channel&quot; : &quot;c999&quot;}, \n      &quot;increments&quot;:\n        { &quot;3000c058-b8a7-4cff-915b-4979ef9a6ed9&quot;: {&quot;counters&quot; : &quot;$counters&quot;} }\n    }\n},\n{upsert: true})\n</code></pre>\n<p>The result is:</p>\n<pre><code>{\n    &quot;_id&quot; : ObjectId(&quot;61965aba1501d6eb40588ba0&quot;),\n    &quot;keys&quot; : {\n        &quot;country&quot; : &quot;US&quot;,\n        &quot;channel&quot; : &quot;c999&quot;\n    },\n    &quot;counters&quot; : {\n        &quot;sale&quot; : 10.0\n    },\n    &quot;increments&quot; : {\n        &quot;3000c058-b8a7-4cff-915b-4979ef9a6ed9&quot; : {\n            &quot;counters&quot; : &quot;$counters&quot;\n        }\n    }\n}\n</code></pre>\n<p>Does it possible to do such update which is some how copy increment result from root object <code>counters</code> to child <code>increments.3000c058-b8a7-4cff-915b-4979ef9a6ed9.counters</code> with a single upsert. I want to implement safe inrement. Maybe you can suggest some another design?</p>\n"},{"tags":["java","apache-spark","apache-kafka"],"comments":[{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":1,"creation_date":1637244501,"post_id":70020940,"comment_id":123778421,"body_markdown":"From the [javadoc](https://spark.apache.org/docs/latest/api/java/index.html?org/apache/spark/sql/Dataset.html). &quot;Datasets are &quot;lazy&quot;, i.e. computations are only triggered when an action is invoked. Internally, a Dataset represents a logical plan that describes the computation required to produce the data.&quot;. So no, a `Dataset` contains instructions rather than data.","body":"From the <a href=\"https://spark.apache.org/docs/latest/api/java/index.html?org/apache/spark/sql/Dataset.html\" rel=\"nofollow noreferrer\">javadoc</a>. &quot;Datasets are &quot;lazy&quot;, i.e. computations are only triggered when an action is invoked. Internally, a Dataset represents a logical plan that describes the computation required to produce the data.&quot;. So no, a <code>Dataset</code> contains instructions rather than data."},{"owner":{"account_id":8887590,"reputation":141,"user_id":6635386,"display_name":"LisekKL"},"score":0,"creation_date":1637245513,"post_id":70020940,"comment_id":123778896,"body_markdown":"@Kayaman - I get that they&#39;re lazy, but I&#39;m unclear on what happens exactly at the moment I invoke write() - I understand that that&#39;s the moment the data is actually getting processed according to the instruction plan, but how does this look like? The write is being invoked on the Dataset, so how can I figure out exactly how the instruction plan looks like? So how can I confirm that data is being written to kafka with each calculation when it&#39;s finally executed rather than caching it somewhere until all results are retrieved and the full set can be written to kafka?","body":"@Kayaman - I get that they&#39;re lazy, but I&#39;m unclear on what happens exactly at the moment I invoke write() - I understand that that&#39;s the moment the data is actually getting processed according to the instruction plan, but how does this look like? The write is being invoked on the Dataset, so how can I figure out exactly how the instruction plan looks like? So how can I confirm that data is being written to kafka with each calculation when it&#39;s finally executed rather than caching it somewhere until all results are retrieved and the full set can be written to kafka?"},{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":1,"creation_date":1637246681,"post_id":70020940,"comment_id":123779515,"body_markdown":"Call `explain()` to see the plan. Considering that Spark is supposed to be a streaming platform, it would be quite poor form to wait until the data is completely processed before writing it. The [code](https://github.com/apache/spark/blob/master/sql/core/src/main/scala/org/apache/spark/sql/DataFrameWriter.scala) eventually executes a command on `SparkSession` to perform the work (insert/append/etc.), so it&#39;s up to Spark internals how it&#39;s handled (and presumably it tries to do it efficiently).","body":"Call <code>explain()</code> to see the plan. Considering that Spark is supposed to be a streaming platform, it would be quite poor form to wait until the data is completely processed before writing it. The <a href=\"https://github.com/apache/spark/blob/master/sql/core/src/main/scala/org/apache/spark/sql/DataFrameWriter.scala\" rel=\"nofollow noreferrer\">code</a> eventually executes a command on <code>SparkSession</code> to perform the work (insert/append/etc.), so it&#39;s up to Spark internals how it&#39;s handled (and presumably it tries to do it efficiently)."},{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1637333102,"post_id":70020940,"comment_id":123805605,"body_markdown":"What is the schema of your dataframe, by the way?","body":"What is the schema of your dataframe, by the way?"},{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1637343286,"post_id":70020940,"comment_id":123809572,"body_markdown":"Also, `group.id` is not a valid Kafka producer option (nor does it work in Spark&#39;s readStream options)","body":"Also, <code>group.id</code> is not a valid Kafka producer option (nor does it work in Spark&#39;s readStream options)"}],"owner":{"account_id":8887590,"reputation":141,"user_id":6635386,"display_name":"LisekKL"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":86,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1637246348,"creation_date":1637242995,"question_id":70020940,"body_markdown":"I&#39;m new to Kafka and Spark so in advance sorry if the question is considered stupid :).\r\n\r\nI&#39;m trying to understand how the data is processed exactly and cached (from Spark) before being written into Kafka. \r\n\r\nLet&#39;s say we have the following code handling the code to be executed per partition (since we&#39;re using mapPartitions())\r\n```\r\nDataset&lt;String&gt; resultsDF = scenarios.mapPartitions((MapPartitionsFunction&lt;Obj1, String&gt;) permutations -&gt; {\r\n\t\t\tIterable&lt;Obj1&gt; iterable = () -&gt; permutations;\r\n\t        return StreamSupport.stream(iterable.spliterator(), false).map(permutation -&gt; {\r\n\t            log.info(&quot;Do some work ....&quot;);\r\n\t            return &quot;abc&quot;;\r\n\t        }).iterator();\r\n        }, Encoders.STRING());\r\n```\r\n\r\nAnd later on I&#39;m writing this dataset to Kafka using \r\n\r\n```\r\n        resultsDF\r\n                .write()\r\n                .format(&quot;kafka&quot;)\r\n                .options(options)\r\n                .save();\r\n\r\n```\r\nwhere options are kafka options like group.id, kafka.bootstrap.servers and topic\r\n\r\nWhat I&#39;m trying to understand is how the dataset is processed - is Spark going through the partitions, collecting all results from calculation and appending them to the dataset therefore generating a very large DS in memory? (I&#39;m looking for the potential causes of out of memory errors). \r\nAnd if yes, is there a clean way to write data to Kafka per partition processing instead of gathering everything into the Dataset first? Something like invoking write() directly within the mapPartitions function or something?\r\n\r\n\r\nEDIT: I know data isn&#39;t actually processed until &#39;write()&#39; is called, however, I&#39;m still unclear on what this write actually writes - so how I can check the instruction plan for the dataset in more detail - I need to confirm that data is being written to kafka directly with each calculation rather than a bulk set after all calculations have finished. \r\nI tried tracing app logs vs kafka logs but to be honest it wasn&#39;t really helpful - detailed kafka logs are available for the topic, but that one is only being created after I actually call write() (in my specific case the topic is being dynamically assigned just before processing the results)","title":"Java - write to Kafka from Spark","body":"<p>I'm new to Kafka and Spark so in advance sorry if the question is considered stupid :).</p>\n<p>I'm trying to understand how the data is processed exactly and cached (from Spark) before being written into Kafka.</p>\n<p>Let's say we have the following code handling the code to be executed per partition (since we're using mapPartitions())</p>\n<pre><code>Dataset&lt;String&gt; resultsDF = scenarios.mapPartitions((MapPartitionsFunction&lt;Obj1, String&gt;) permutations -&gt; {\n            Iterable&lt;Obj1&gt; iterable = () -&gt; permutations;\n            return StreamSupport.stream(iterable.spliterator(), false).map(permutation -&gt; {\n                log.info(&quot;Do some work ....&quot;);\n                return &quot;abc&quot;;\n            }).iterator();\n        }, Encoders.STRING());\n</code></pre>\n<p>And later on I'm writing this dataset to Kafka using</p>\n<pre><code>        resultsDF\n                .write()\n                .format(&quot;kafka&quot;)\n                .options(options)\n                .save();\n\n</code></pre>\n<p>where options are kafka options like group.id, kafka.bootstrap.servers and topic</p>\n<p>What I'm trying to understand is how the dataset is processed - is Spark going through the partitions, collecting all results from calculation and appending them to the dataset therefore generating a very large DS in memory? (I'm looking for the potential causes of out of memory errors).\nAnd if yes, is there a clean way to write data to Kafka per partition processing instead of gathering everything into the Dataset first? Something like invoking write() directly within the mapPartitions function or something?</p>\n<p>EDIT: I know data isn't actually processed until 'write()' is called, however, I'm still unclear on what this write actually writes - so how I can check the instruction plan for the dataset in more detail - I need to confirm that data is being written to kafka directly with each calculation rather than a bulk set after all calculations have finished.\nI tried tracing app logs vs kafka logs but to be honest it wasn't really helpful - detailed kafka logs are available for the topic, but that one is only being created after I actually call write() (in my specific case the topic is being dynamically assigned just before processing the results)</p>\n"},{"tags":["java","encryption"],"comments":[{"owner":{"account_id":3068754,"reputation":2677,"user_id":2599899,"display_name":"Arthur Klezovich"},"score":0,"creation_date":1637227835,"post_id":70017370,"comment_id":123771465,"body_markdown":"How is it encrypted ?","body":"How is it encrypted ?"},{"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"score":0,"creation_date":1637228194,"post_id":70017370,"comment_id":123771614,"body_markdown":"What makes you think the file is encrypted?","body":"What makes you think the file is encrypted?"},{"owner":{"account_id":5387572,"reputation":327,"user_id":4291005,"accept_rate":80,"display_name":"Sanjay Singh"},"score":0,"creation_date":1637228305,"post_id":70017370,"comment_id":123771665,"body_markdown":"I have encrypted it with another method and stored it in Azure storage. Here is snippet of code. cipher.init(Cipher.ENCRYPT_MODE, key,new IvParameterSpec(INITIALIZATIO_VECTOR.getBytes(&quot;UTF-8&quot;)));\n\t\t        blob.upload(new CipherInputStream(file.getInputStream(), cipher), file.getSize());","body":"I have encrypted it with another method and stored it in Azure storage. Here is snippet of code. cipher.init(Cipher.ENCRYPT_MODE, key,new IvParameterSpec(INITIALIZATIO_VECTOR.getBytes(&quot;UTF-8&quot;))); \t\t        blob.upload(new CipherInputStream(file.getInputStream(), cipher), file.getSize());"},{"owner":{"account_id":213468,"reputation":103486,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1637228476,"post_id":70017370,"comment_id":123771740,"body_markdown":"Please [edit] your question to add information, don&#39;t use comments for that.","body":"Please <a href=\"https://stackoverflow.com/posts/70017370/edit\">edit</a> your question to add information, don&#39;t use comments for that."}],"answers":[{"tags":[],"owner":{"account_id":9463219,"reputation":9357,"user_id":7036419,"display_name":"Maurice Perry"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1637228421,"creation_date":1637228421,"answer_id":70017526,"question_id":70017370,"body_markdown":"First create the `CipherOutputStream`, then download the blob into that output:\r\n\r\n    output = new CipherOutputStream(os, cipher);\r\n    blob.download(output);\r\n\r\n","title":"How to decrypt ByteArrayOutputStream in Java.?","body":"<p>First create the <code>CipherOutputStream</code>, then download the blob into that output:</p>\n<pre><code>output = new CipherOutputStream(os, cipher);\nblob.download(output);\n</code></pre>\n"}],"owner":{"account_id":5387572,"reputation":327,"user_id":4291005,"accept_rate":80,"display_name":"Sanjay Singh"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":122,"favorite_count":0,"down_vote_count":4,"up_vote_count":0,"accepted_answer_id":70017526,"answer_count":1,"score":-4,"last_activity_date":1637246275,"creation_date":1637227693,"question_id":70017370,"body_markdown":"I am trying to decrypt a file downloaded as ByteArrayOutputStream from Azure Storage.\r\n\r\nI have a stream of type ByteArrayOutputStream. \r\nHow can I decrypt it and return decrypted ByteArrayOutputStream.?\r\n\r\nI have tried using CipherOutputStream, but I&#39;m not sure how to use it.\r\n\r\nBelow is the code (snippet) I am using to encrypt the file before uploading\r\n```\r\ncipher.init(Cipher.ENCRYPT_MODE, key,new IvParameterSpec(INITIALIZATIO_VECTOR.getBytes(&quot;UTF-8&quot;)));\r\nblob.upload(new CipherInputStream(file.getInputStream(), cipher), file.getSize());\r\n```\r\nBelow is my code: \r\n```java\r\npublic ByteArrayOutputStream download(String fileName, Long id) {\r\n\tByteArrayOutputStream os = new ByteArrayOutputStream();\r\n\t\r\n\ttry {\r\n\t\tCipher cipher = Cipher.getInstance(&quot;AES/CBC/NoPadding&quot;, &quot;SunJCE&quot;);\r\n        SecretKeySpec key = new SecretKeySpec(encrypkey.getBytes(&quot;UTF-8&quot;), &quot;AES&quot;);\r\n        cipher.init(Cipher.DECRYPT_MODE, key,new IvParameterSpec(INITIALIZATIO_VECTOR.getBytes(&quot;UTF-8&quot;)));\r\n        CipherOutputStream output = null;\r\n          \r\n\t\tcontainer = getBlobClient().getContainerReference(&quot;container&quot; + id.toString());\r\n\t\t\r\n\t\tCloudBlockBlob blob = container.getBlockBlobReference(fileName);\r\n\r\n\t\tif (blob.exists()) {\r\n\t\t\tblob.download(os);\r\n\t\t\t//output = new CipherOutputStream(outputStream, cipher);\t\t\r\n\t\t} else {\r\n\t\t\tlogger.info(&quot;File does not exists on azure container&quot;);\r\n\t\t}\r\n\t} catch (StorageException e) {\r\n\t\tlogger.error(&quot;StorageException : {}&quot; + e.getLocalizedMessage(), e);\r\n\t} catch (Exception e) {\r\n\t\tlogger.error(&quot;Exception : {}&quot; + e.getLocalizedMessage(), e);\r\n\t}\r\n\t\r\n\treturn os;\r\n}\r\n```","title":"How to decrypt ByteArrayOutputStream in Java.?","body":"<p>I am trying to decrypt a file downloaded as ByteArrayOutputStream from Azure Storage.</p>\n<p>I have a stream of type ByteArrayOutputStream.\nHow can I decrypt it and return decrypted ByteArrayOutputStream.?</p>\n<p>I have tried using CipherOutputStream, but I'm not sure how to use it.</p>\n<p>Below is the code (snippet) I am using to encrypt the file before uploading</p>\n<pre><code>cipher.init(Cipher.ENCRYPT_MODE, key,new IvParameterSpec(INITIALIZATIO_VECTOR.getBytes(&quot;UTF-8&quot;)));\nblob.upload(new CipherInputStream(file.getInputStream(), cipher), file.getSize());\n</code></pre>\n<p>Below is my code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public ByteArrayOutputStream download(String fileName, Long id) {\n    ByteArrayOutputStream os = new ByteArrayOutputStream();\n    \n    try {\n        Cipher cipher = Cipher.getInstance(&quot;AES/CBC/NoPadding&quot;, &quot;SunJCE&quot;);\n        SecretKeySpec key = new SecretKeySpec(encrypkey.getBytes(&quot;UTF-8&quot;), &quot;AES&quot;);\n        cipher.init(Cipher.DECRYPT_MODE, key,new IvParameterSpec(INITIALIZATIO_VECTOR.getBytes(&quot;UTF-8&quot;)));\n        CipherOutputStream output = null;\n          \n        container = getBlobClient().getContainerReference(&quot;container&quot; + id.toString());\n        \n        CloudBlockBlob blob = container.getBlockBlobReference(fileName);\n\n        if (blob.exists()) {\n            blob.download(os);\n            //output = new CipherOutputStream(outputStream, cipher);        \n        } else {\n            logger.info(&quot;File does not exists on azure container&quot;);\n        }\n    } catch (StorageException e) {\n        logger.error(&quot;StorageException : {}&quot; + e.getLocalizedMessage(), e);\n    } catch (Exception e) {\n        logger.error(&quot;Exception : {}&quot; + e.getLocalizedMessage(), e);\n    }\n    \n    return os;\n}\n</code></pre>\n"},{"tags":["java","spring-boot","hibernate","jpa","transactions"],"comments":[{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":3,"creation_date":1637243058,"post_id":70020783,"comment_id":123777735,"body_markdown":"Is the repository transactional as well? And if so, does it have default propagation? Btw, the default behavior would be to roll back on any RuntimeException, so there&#39;s no need to mention `rollbackFor` explicitly (I&#39;m not sure whether this will add to the default behavior or override it).","body":"Is the repository transactional as well? And if so, does it have default propagation? Btw, the default behavior would be to roll back on any RuntimeException, so there&#39;s no need to mention <code>rollbackFor</code> explicitly (I&#39;m not sure whether this will add to the default behavior or override it)."},{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1637243360,"post_id":70020783,"comment_id":123777870,"body_markdown":"Which database are you using, by anychange MySQL?","body":"Which database are you using, by anychange MySQL?"},{"owner":{"account_id":23381280,"reputation":33,"user_id":17447845,"display_name":"유호연"},"score":0,"creation_date":1637245796,"post_id":70020783,"comment_id":123779052,"body_markdown":"M.Deinum It&#39;s conneced to MariaDB sur\nThomas i didn&#39;t set any propagatopn setting and I put Transactional option on that method only T.T","body":"M.Deinum It&#39;s conneced to MariaDB sur Thomas i didn&#39;t set any propagatopn setting and I put Transactional option on that method only T.T"}],"answers":[{"tags":[],"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1637246229,"creation_date":1637245839,"answer_id":70021628,"question_id":70020783,"body_markdown":"Because `Optional.get()` throws `NoSuchElementException` (and not null pointer).\r\n\r\n[From javadoc](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Optional.html):\r\n\r\n\r\n&gt;`public T get()`\r\n\r\n&gt; If a value is present in this `Optional`, returns the value, otherwise throws `NoSuchElementException`....\r\n\r\nBy `rollbackFor = NullPointerException.class` you exclude `NoSuchElementException` from rollback-able exceptions.","title":"Spring transactional annotation rollback test doesn&#39;t seem to go well","body":"<p>Because <code>Optional.get()</code> throws <code>NoSuchElementException</code> (and not null pointer).</p>\n<p><a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Optional.html\" rel=\"nofollow noreferrer\">From javadoc</a>:</p>\n<blockquote>\n<p><code>public T get()</code></p>\n</blockquote>\n<blockquote>\n<p>If a value is present in this <code>Optional</code>, returns the value, otherwise throws <code>NoSuchElementException</code>....</p>\n</blockquote>\n<p>By <code>rollbackFor = NullPointerException.class</code> you exclude <code>NoSuchElementException</code> from rollback-able exceptions.</p>\n"}],"owner":{"account_id":23381280,"reputation":33,"user_id":17447845,"display_name":"유호연"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":164,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":70021628,"answer_count":1,"score":3,"last_activity_date":1637246229,"creation_date":1637242398,"question_id":70020783,"body_markdown":"This is the Controller code:\r\n```java\r\n@GetMapping(&quot;/test/hello&quot;)\r\n    public String test()  {\r\n        Member m = memberService.transactionTest();\r\n        return &quot;haha&quot;;\r\n    }\r\n```\r\n\r\nand this is Service code:\r\n```\r\n   @Transactional(rollbackFor = NullPointerException.class)\r\n    public Member transactionTest() {\r\n            Member m = Member.builder()\r\n                    .username(&quot;rollback&quot;)\r\n                    .age(32)\r\n                    .team(teamRepository.findById(1L).get())\r\n                    .coach(coachRepository.findById(1L).get())\r\n                    .build();\r\n            memberRepository.save(m);\r\n            exception();\r\n            return m;\r\n    }\r\n\r\n    public void exception(){\r\n        Member m = null;\r\n        m.getUsername();\r\n    }\r\n```\r\n\r\nAs far as I know when it finishes it should rollback \r\nbecause RuntimeException occurs but insert process works so well so I want to know why.","title":"Spring transactional annotation rollback test doesn&#39;t seem to go well","body":"<p>This is the Controller code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@GetMapping(&quot;/test/hello&quot;)\n    public String test()  {\n        Member m = memberService.transactionTest();\n        return &quot;haha&quot;;\n    }\n</code></pre>\n<p>and this is Service code:</p>\n<pre><code>   @Transactional(rollbackFor = NullPointerException.class)\n    public Member transactionTest() {\n            Member m = Member.builder()\n                    .username(&quot;rollback&quot;)\n                    .age(32)\n                    .team(teamRepository.findById(1L).get())\n                    .coach(coachRepository.findById(1L).get())\n                    .build();\n            memberRepository.save(m);\n            exception();\n            return m;\n    }\n\n    public void exception(){\n        Member m = null;\n        m.getUsername();\n    }\n</code></pre>\n<p>As far as I know when it finishes it should rollback\nbecause RuntimeException occurs but insert process works so well so I want to know why.</p>\n"},{"tags":["java","java-8","java.util.date"],"comments":[{"owner":{"account_id":2139538,"reputation":42511,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":9,"creation_date":1578415547,"post_id":59632635,"comment_id":105427535,"body_markdown":"Your first mistake was attempting to use java.util.Date in Java 8.","body":"Your first mistake was attempting to use java.util.Date in Java 8."},{"owner":{"account_id":5870718,"reputation":3152,"user_id":4623129,"display_name":"Khalid Shah"},"score":0,"creation_date":1578415705,"post_id":59632635,"comment_id":105427617,"body_markdown":"I searched for the solution but i can&#39;t find the exact solution. So, I use a Date object. Could you tell me the solution","body":"I searched for the solution but i can&#39;t find the exact solution. So, I use a Date object. Could you tell me the solution"},{"owner":{"account_id":14861996,"reputation":683,"user_id":10732477,"display_name":"AM13"},"score":4,"creation_date":1578415709,"post_id":59632635,"comment_id":105427620,"body_markdown":"LocalDateTime could be a valid alternative. Could it be suitable for your purpose?","body":"LocalDateTime could be a valid alternative. Could it be suitable for your purpose?"},{"owner":{"account_id":102127,"reputation":17217,"user_id":274340,"accept_rate":100,"display_name":"onof"},"score":0,"creation_date":1578415972,"post_id":59632635,"comment_id":105427752,"body_markdown":"This question is related to https://stackoverflow.com/a/1712215/274340","body":"This question is related to <a href=\"https://stackoverflow.com/a/1712215/274340\">stackoverflow.com/a/1712215/274340</a>"},{"owner":{"account_id":5870718,"reputation":3152,"user_id":4623129,"display_name":"Khalid Shah"},"score":0,"creation_date":1578415977,"post_id":59632635,"comment_id":105427756,"body_markdown":"@AM13 yes i can use LocalDateTime. Can you give a solution in answer ?","body":"@AM13 yes i can use LocalDateTime. Can you give a solution in answer ?"},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":2,"creation_date":1578427198,"post_id":59632635,"comment_id":105432713,"body_markdown":"I recommend you don’t use `SimpleDateFormat` and `Date`. Those classes are poorly designed and long outdated, the former in particular notoriously troublesome. Instead use `Instant`, `DateTimeFormatter` and other classes from [java.time, the modern Java date and time API](https://docs.oracle.com/javase/tutorial/datetime/).","body":"I recommend you don’t use <code>SimpleDateFormat</code> and <code>Date</code>. Those classes are poorly designed and long outdated, the former in particular notoriously troublesome. Instead use <code>Instant</code>, <code>DateTimeFormatter</code> and other classes from <a href=\"https://docs.oracle.com/javase/tutorial/datetime/\" rel=\"nofollow noreferrer\">java.time, the modern Java date and time API</a>."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":1,"creation_date":1578427254,"post_id":59632635,"comment_id":105432739,"body_markdown":"Does this answer your question? [Create Java DateTime Instant from microseconds](https://stackoverflow.com/questions/57411881/create-java-datetime-instant-from-microseconds) And/or this? [Convert timestamp long to normal date format](https://stackoverflow.com/questions/6782185/convert-timestamp-long-to-normal-date-format)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/57411881/create-java-datetime-instant-from-microseconds\">Create Java DateTime Instant from microseconds</a> And/or this? <a href=\"https://stackoverflow.com/questions/6782185/convert-timestamp-long-to-normal-date-format\">Convert timestamp long to normal date format</a>"},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":1,"creation_date":1578438402,"post_id":59632635,"comment_id":105437070,"body_markdown":"Show sample data.","body":"Show sample data."}],"answers":[{"tags":[],"owner":{"account_id":6074897,"reputation":2892,"user_id":4742570,"display_name":"jsheeran"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1578415613,"creation_date":1578415613,"answer_id":59632683,"question_id":59632635,"body_markdown":"You won&#39;t be able to do this using `java.util.Date`. [From the API](https://docs.oracle.com/javase/7/docs/api/java/util/Date.html):\r\n\r\n&gt; The class Date represents a specific instant in time, with millisecond precision.","title":"Create actual date in string format from microseconds with precision of microseconds","body":"<p>You won't be able to do this using <code>java.util.Date</code>. <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/Date.html\" rel=\"noreferrer\">From the API</a>:</p>\n\n<blockquote>\n  <p>The class Date represents a specific instant in time, with millisecond precision.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1578420270,"creation_date":1578417083,"answer_id":59633043,"question_id":59632635,"body_markdown":"    int seconds = (int) (microSeconds / 1_000_000);\r\n    int nanoSeconds = ((int) (microSeconds % 1_000_000)) * 1_000;\r\n    LocalDateTime t = LocalDateTime.ofEpochSecond(seconds, nanoSeconds, ZoneOffset.UTC);\r\n\r\n    String s = t.toString(); // with a T\r\n    s = t.format(DateTimeFormatter.ISO_LOCAL_DATE_TIME); // with a T\r\n    s = t.format(DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd HH:mm:ss.SSSSSS&quot;));\r\n\r\nDate has a milliseconds resolution. And the new time classes are far better, though need a bit more effort.","title":"Create actual date in string format from microseconds with precision of microseconds","body":"<pre><code>int seconds = (int) (microSeconds / 1_000_000);\nint nanoSeconds = ((int) (microSeconds % 1_000_000)) * 1_000;\nLocalDateTime t = LocalDateTime.ofEpochSecond(seconds, nanoSeconds, ZoneOffset.UTC);\n\nString s = t.toString(); // with a T\ns = t.format(DateTimeFormatter.ISO_LOCAL_DATE_TIME); // with a T\ns = t.format(DateTimeFormatter.ofPattern(\"yyyy-MM-dd HH:mm:ss.SSSSSS\"));\n</code></pre>\n\n<p>Date has a milliseconds resolution. And the new time classes are far better, though need a bit more effort.</p>\n"},{"tags":[],"owner":{"account_id":14861996,"reputation":683,"user_id":10732477,"display_name":"AM13"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1578436240,"creation_date":1578436240,"answer_id":59637015,"question_id":59632635,"body_markdown":"Just an alternative using LocalDateTime:\r\n\r\n    LocalDateTime date =\r\n    LocalDateTime.ofInstant(Instant.ofEpochMilli(millis), ZoneId.systemDefault());\r\n\r\nHowever If you just want a sort of &quot;well formatted timestamp&quot; you can use just:\r\n    \r\n    LocalDateTime.now()","title":"Create actual date in string format from microseconds with precision of microseconds","body":"<p>Just an alternative using LocalDateTime:</p>\n\n<pre><code>LocalDateTime date =\nLocalDateTime.ofInstant(Instant.ofEpochMilli(millis), ZoneId.systemDefault());\n</code></pre>\n\n<p>However If you just want a sort of \"well formatted timestamp\" you can use just:</p>\n\n<pre><code>LocalDateTime.now()\n</code></pre>\n"},{"tags":[],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1578533552,"creation_date":1578441834,"answer_id":59637784,"question_id":59632635,"body_markdown":"# tl;dr\r\n\r\n    \r\n    Instant                                                  // Represent a moment as a count since the epoch reference of 1970-01-01T00:00Z.\r\n    .ofEpochSecond(                                          // Instantiate a `Instant` as a count of whole seconds plus fractional second.\r\n        TimeUnit.MICROSECONDS.toSeconds( microseconds ) ,    // Count of whole seconds since the epoch reference.\r\n        TimeUnit.MICROSECONDS.toNanos( microseconds )        // Calculate fractional second as a count of nanoseconds.\r\n        - \r\n        TimeUnit.SECONDS.toNanos( \r\n            TimeUnit.MICROSECONDS.toSeconds( microseconds )\r\n        ) \r\n    )                                                        // Returns an `Instant`.\r\n    .toString()                                              // Generate text in standard ISO 8601 format.\r\n    .replace( &quot;T&quot; , &quot; &quot; )                                    // Replace a `T` with a SPACE for desired output format.\r\n    .replace( &quot;Z&quot; , &quot;&quot; )                                     // Remove the `Z` from the end, that indicates the date and time is in the context of UTC.   \r\n\r\n# Avoid legacy date-time classes\r\n\r\nYou are using terrible date-time classes that were supplanted years ago by the modern *java.time* classes defined in JSR 310.\r\n\r\nFurthermore, as others indicated, the **legacy classes cannot accommodate microseconds**, only milliseconds. Well, actually, the legacy class `java.sql.Timestamp` attempts to represent nanoseconds, but does so by way of a terrible hack that includes a fractional second in milliseconds *and* a fractional second of nanoseconds (a real mess). \r\n\r\n# java.time\r\n\r\n[![Table of date-time types in Java, both modern and legacy][1]][1]\r\n\r\n## Sample data\r\n\r\nFor a demo, let&#39;s create the sample number of microseconds since the first moment of 1970 in UTC.\r\n\r\n    // Convert to microseconds. Use as input value to further code below.\r\n    Instant instantPrime = Instant.now().truncatedTo( ChronoUnit.MICROS ); // Drop any nanoseconds, to keep only microseconds.\r\n    long wholeSecondsPrime = instantPrime.getEpochSecond();\r\n    long nanoAdjustmentPrime = instantPrime.getNano();\r\n    long microseconds = \r\n        TimeUnit.SECONDS.toMicros( wholeSecondsPrime ) + \r\n        TimeUnit.NANOSECONDS.toMicros( nanoAdjustmentPrime )\r\n    ;\r\n\r\n## Processing\r\n\r\nLet&#39;s chop that count of microseconds into two parts, a number of whole seconds since 1970-01-01T00:00Z, and a fractional second as a number of microseconds.\r\n\r\n    // Convert from microseconds.\r\n    long wholeSeconds = TimeUnit.MICROSECONDS.toSeconds( microseconds );\r\n    long nanoAdjustment = TimeUnit.MICROSECONDS.toNanos( microseconds ) - TimeUnit.SECONDS.toNanos( wholeSeconds );\r\n\r\nPut them back together again.\r\n\r\n    Instant instant = Instant.ofEpochSecond( wholeSeconds , nanoAdjustment );\r\n    boolean match = instant.equals( instantPrime );\r\n\r\nDump to console.\r\n\r\n\r\n    System.out.println( &quot;instantPrime = &quot; + instantPrime );\r\n    System.out.println( &quot;wholeSecondsPrime = &quot; + wholeSecondsPrime );\r\n    System.out.println( &quot;nanoAdjustmentPrime = &quot; + nanoAdjustmentPrime );\r\n\r\n    System.out.println( &quot;microseconds = &quot; + microseconds );\r\n\r\n    System.out.println( &quot;wholeSeconds = &quot; + wholeSeconds );\r\n    System.out.println( &quot;nanoAdjustment = &quot; + nanoAdjustment );\r\n    System.out.println( &quot;instant = &quot; + instant );\r\n\r\n    System.out.println( &quot;match = &quot; + match );\r\n\r\n&gt;instantPrime = 2020-01-07T23:32:26.385565Z\r\n\r\n&gt;wholeSecondsPrime = 1578439946\r\n\r\n&gt;nanoAdjustmentPrime = 385565000\r\n\r\n&gt;microseconds = 1578439946385565\r\n\r\n&gt;wholeSeconds = 1578439946\r\n\r\n&gt;nanoAdjustment = 385565000\r\n\r\n&gt;instant = 2020-01-07T23:32:26.385565Z\r\n\r\n&gt;match = true\r\n\r\n## Strings\r\n\r\nGenerate text representing the value of your `Instant` using standard ISO 8601 format.\r\n\r\n    String output = instant.toString() ;\r\n\r\n&gt;2020-01-07T23:32:26.385565Z\r\n\r\nYour desired format is close to that. Replace the `T` with a SPACE. And remove the `Z`, though be careful about that. Presenting date-time as text without indicating the time zone or offset-from-UTC can create ambiguity and confusing for the reader. I would recommend including the `Z`.\r\n\r\n    String output = instant.toString().replace( &quot;T&quot; , &quot; &quot; ).replace( &quot;Z&quot; , &quot;&quot; ) ;\r\n\r\n&gt;2020-01-07 23:32:26.385565\r\n\r\n\r\n----------\r\n\r\n# About *java.time*\r\n\r\nThe [*java.time*](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/package-summary.html) framework is built into Java 8 and later. These classes supplant the troublesome old [legacy](https://en.wikipedia.org/wiki/Legacy_system) date-time classes such as [`java.util.Date`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Date.html), [`Calendar`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Calendar.html), &amp; [`SimpleDateFormat`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/text/SimpleDateFormat.html).\r\n\r\nTo learn more, see the [*Oracle Tutorial*](http://docs.oracle.com/javase/tutorial/datetime/TOC.html). And search Stack Overflow for many examples and explanations. Specification is [JSR 310](https://jcp.org/en/jsr/detail?id=310).\r\n\r\nThe [*Joda-Time*](http://www.joda.org/joda-time/) project, now in [maintenance mode](https://en.wikipedia.org/wiki/Maintenance_mode), advises migration to the [java.time](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/package-summary.html) classes.\r\n\r\nYou may exchange *java.time* objects directly with your database. Use a [JDBC driver](https://en.wikipedia.org/wiki/JDBC_driver) compliant with [JDBC 4.2](http://openjdk.java.net/jeps/170) or later. No need for strings, no need for `java.sql.*` classes.\r\n\r\nWhere to obtain the java.time classes? \r\n\r\n - [**Java SE 8**](https://en.wikipedia.org/wiki/Java_version_history#Java_SE_8), [**Java SE 9**](https://en.wikipedia.org/wiki/Java_version_history#Java_SE_9), [**Java SE 10**](https://en.wikipedia.org/wiki/Java_version_history#Java_SE_10), [**Java SE 11**](https://en.wikipedia.org/wiki/Java_version_history#Java_SE_11), and later  - Part of the standard Java API with a bundled implementation.\r\n  - Java 9 adds some minor features and fixes.\r\n - [**Java SE 6**](https://en.wikipedia.org/wiki/Java_version_history#Java_SE_6) and [**Java SE 7**](https://en.wikipedia.org/wiki/Java_version_history#Java_SE_7)\r\n  - Most of the *java.time* functionality is back-ported to Java 6 &amp; 7 in [***ThreeTen-Backport***](http://www.threeten.org/threetenbp/).\r\n - [**Android**](https://en.wikipedia.org/wiki/Android_(operating_system))\r\n  - Later versions of Android bundle implementations of the *java.time* classes.\r\n  - For earlier Android (&lt;26), the [***ThreeTenABP***](https://github.com/JakeWharton/ThreeTenABP) project adapts [***ThreeTen-Backport***](http://www.threeten.org/threetenbp/) (mentioned above). See [*How to use ThreeTenABP…*](http://stackoverflow.com/q/38922754/642706).\r\n\r\nThe [**ThreeTen-Extra**](http://www.threeten.org/threeten-extra/) project extends java.time with additional classes. This project is a proving ground for possible future additions to java.time. You may find some useful classes here such as [`Interval`](http://www.threeten.org/threeten-extra/apidocs/org/threeten/extra/Interval.html), [`YearWeek`](http://www.threeten.org/threeten-extra/apidocs/org/threeten/extra/YearWeek.html), [`YearQuarter`](http://www.threeten.org/threeten-extra/apidocs/org/threeten/extra/YearQuarter.html), and [more](http://www.threeten.org/threeten-extra/apidocs/index.html).\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/kzN1z.png","title":"Create actual date in string format from microseconds with precision of microseconds","body":"<h1>tl;dr</h1>\n\n<pre><code>Instant                                                  // Represent a moment as a count since the epoch reference of 1970-01-01T00:00Z.\n.ofEpochSecond(                                          // Instantiate a `Instant` as a count of whole seconds plus fractional second.\n    TimeUnit.MICROSECONDS.toSeconds( microseconds ) ,    // Count of whole seconds since the epoch reference.\n    TimeUnit.MICROSECONDS.toNanos( microseconds )        // Calculate fractional second as a count of nanoseconds.\n    - \n    TimeUnit.SECONDS.toNanos( \n        TimeUnit.MICROSECONDS.toSeconds( microseconds )\n    ) \n)                                                        // Returns an `Instant`.\n.toString()                                              // Generate text in standard ISO 8601 format.\n.replace( \"T\" , \" \" )                                    // Replace a `T` with a SPACE for desired output format.\n.replace( \"Z\" , \"\" )                                     // Remove the `Z` from the end, that indicates the date and time is in the context of UTC.   \n</code></pre>\n\n<h1>Avoid legacy date-time classes</h1>\n\n<p>You are using terrible date-time classes that were supplanted years ago by the modern <em>java.time</em> classes defined in JSR 310.</p>\n\n<p>Furthermore, as others indicated, the <strong>legacy classes cannot accommodate microseconds</strong>, only milliseconds. Well, actually, the legacy class <code>java.sql.Timestamp</code> attempts to represent nanoseconds, but does so by way of a terrible hack that includes a fractional second in milliseconds <em>and</em> a fractional second of nanoseconds (a real mess). </p>\n\n<h1>java.time</h1>\n\n<p><a href=\"https://i.stack.imgur.com/kzN1z.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kzN1z.png\" alt=\"Table of date-time types in Java, both modern and legacy\"></a></p>\n\n<h2>Sample data</h2>\n\n<p>For a demo, let's create the sample number of microseconds since the first moment of 1970 in UTC.</p>\n\n<pre><code>// Convert to microseconds. Use as input value to further code below.\nInstant instantPrime = Instant.now().truncatedTo( ChronoUnit.MICROS ); // Drop any nanoseconds, to keep only microseconds.\nlong wholeSecondsPrime = instantPrime.getEpochSecond();\nlong nanoAdjustmentPrime = instantPrime.getNano();\nlong microseconds = \n    TimeUnit.SECONDS.toMicros( wholeSecondsPrime ) + \n    TimeUnit.NANOSECONDS.toMicros( nanoAdjustmentPrime )\n;\n</code></pre>\n\n<h2>Processing</h2>\n\n<p>Let's chop that count of microseconds into two parts, a number of whole seconds since 1970-01-01T00:00Z, and a fractional second as a number of microseconds.</p>\n\n<pre><code>// Convert from microseconds.\nlong wholeSeconds = TimeUnit.MICROSECONDS.toSeconds( microseconds );\nlong nanoAdjustment = TimeUnit.MICROSECONDS.toNanos( microseconds ) - TimeUnit.SECONDS.toNanos( wholeSeconds );\n</code></pre>\n\n<p>Put them back together again.</p>\n\n<pre><code>Instant instant = Instant.ofEpochSecond( wholeSeconds , nanoAdjustment );\nboolean match = instant.equals( instantPrime );\n</code></pre>\n\n<p>Dump to console.</p>\n\n<pre><code>System.out.println( \"instantPrime = \" + instantPrime );\nSystem.out.println( \"wholeSecondsPrime = \" + wholeSecondsPrime );\nSystem.out.println( \"nanoAdjustmentPrime = \" + nanoAdjustmentPrime );\n\nSystem.out.println( \"microseconds = \" + microseconds );\n\nSystem.out.println( \"wholeSeconds = \" + wholeSeconds );\nSystem.out.println( \"nanoAdjustment = \" + nanoAdjustment );\nSystem.out.println( \"instant = \" + instant );\n\nSystem.out.println( \"match = \" + match );\n</code></pre>\n\n<blockquote>\n  <p>instantPrime = 2020-01-07T23:32:26.385565Z</p>\n  \n  <p>wholeSecondsPrime = 1578439946</p>\n  \n  <p>nanoAdjustmentPrime = 385565000</p>\n  \n  <p>microseconds = 1578439946385565</p>\n  \n  <p>wholeSeconds = 1578439946</p>\n  \n  <p>nanoAdjustment = 385565000</p>\n  \n  <p>instant = 2020-01-07T23:32:26.385565Z</p>\n  \n  <p>match = true</p>\n</blockquote>\n\n<h2>Strings</h2>\n\n<p>Generate text representing the value of your <code>Instant</code> using standard ISO 8601 format.</p>\n\n<pre><code>String output = instant.toString() ;\n</code></pre>\n\n<blockquote>\n  <p>2020-01-07T23:32:26.385565Z</p>\n</blockquote>\n\n<p>Your desired format is close to that. Replace the <code>T</code> with a SPACE. And remove the <code>Z</code>, though be careful about that. Presenting date-time as text without indicating the time zone or offset-from-UTC can create ambiguity and confusing for the reader. I would recommend including the <code>Z</code>.</p>\n\n<pre><code>String output = instant.toString().replace( \"T\" , \" \" ).replace( \"Z\" , \"\" ) ;\n</code></pre>\n\n<blockquote>\n  <p>2020-01-07 23:32:26.385565</p>\n</blockquote>\n\n<hr>\n\n<h1>About <em>java.time</em></h1>\n\n<p>The <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/package-summary.html\" rel=\"nofollow noreferrer\"><em>java.time</em></a> framework is built into Java 8 and later. These classes supplant the troublesome old <a href=\"https://en.wikipedia.org/wiki/Legacy_system\" rel=\"nofollow noreferrer\">legacy</a> date-time classes such as <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Date.html\" rel=\"nofollow noreferrer\"><code>java.util.Date</code></a>, <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Calendar.html\" rel=\"nofollow noreferrer\"><code>Calendar</code></a>, &amp; <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/text/SimpleDateFormat.html\" rel=\"nofollow noreferrer\"><code>SimpleDateFormat</code></a>.</p>\n\n<p>To learn more, see the <a href=\"http://docs.oracle.com/javase/tutorial/datetime/TOC.html\" rel=\"nofollow noreferrer\"><em>Oracle Tutorial</em></a>. And search Stack Overflow for many examples and explanations. Specification is <a href=\"https://jcp.org/en/jsr/detail?id=310\" rel=\"nofollow noreferrer\">JSR 310</a>.</p>\n\n<p>The <a href=\"http://www.joda.org/joda-time/\" rel=\"nofollow noreferrer\"><em>Joda-Time</em></a> project, now in <a href=\"https://en.wikipedia.org/wiki/Maintenance_mode\" rel=\"nofollow noreferrer\">maintenance mode</a>, advises migration to the <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/package-summary.html\" rel=\"nofollow noreferrer\">java.time</a> classes.</p>\n\n<p>You may exchange <em>java.time</em> objects directly with your database. Use a <a href=\"https://en.wikipedia.org/wiki/JDBC_driver\" rel=\"nofollow noreferrer\">JDBC driver</a> compliant with <a href=\"http://openjdk.java.net/jeps/170\" rel=\"nofollow noreferrer\">JDBC 4.2</a> or later. No need for strings, no need for <code>java.sql.*</code> classes.</p>\n\n<p>Where to obtain the java.time classes? </p>\n\n<ul>\n<li><a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_8\" rel=\"nofollow noreferrer\"><strong>Java SE 8</strong></a>, <a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_9\" rel=\"nofollow noreferrer\"><strong>Java SE 9</strong></a>, <a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_10\" rel=\"nofollow noreferrer\"><strong>Java SE 10</strong></a>, <a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_11\" rel=\"nofollow noreferrer\"><strong>Java SE 11</strong></a>, and later  - Part of the standard Java API with a bundled implementation.\n\n<ul>\n<li>Java 9 adds some minor features and fixes.</li>\n</ul></li>\n<li><a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_6\" rel=\"nofollow noreferrer\"><strong>Java SE 6</strong></a> and <a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_7\" rel=\"nofollow noreferrer\"><strong>Java SE 7</strong></a>\n\n<ul>\n<li>Most of the <em>java.time</em> functionality is back-ported to Java 6 &amp; 7 in <a href=\"http://www.threeten.org/threetenbp/\" rel=\"nofollow noreferrer\"><strong><em>ThreeTen-Backport</em></strong></a>.</li>\n</ul></li>\n<li><a href=\"https://en.wikipedia.org/wiki/Android_(operating_system)\" rel=\"nofollow noreferrer\"><strong>Android</strong></a>\n\n<ul>\n<li>Later versions of Android bundle implementations of the <em>java.time</em> classes.</li>\n<li>For earlier Android (&lt;26), the <a href=\"https://github.com/JakeWharton/ThreeTenABP\" rel=\"nofollow noreferrer\"><strong><em>ThreeTenABP</em></strong></a> project adapts <a href=\"http://www.threeten.org/threetenbp/\" rel=\"nofollow noreferrer\"><strong><em>ThreeTen-Backport</em></strong></a> (mentioned above). See <a href=\"http://stackoverflow.com/q/38922754/642706\"><em>How to use ThreeTenABP…</em></a>.</li>\n</ul></li>\n</ul>\n\n<p>The <a href=\"http://www.threeten.org/threeten-extra/\" rel=\"nofollow noreferrer\"><strong>ThreeTen-Extra</strong></a> project extends java.time with additional classes. This project is a proving ground for possible future additions to java.time. You may find some useful classes here such as <a href=\"http://www.threeten.org/threeten-extra/apidocs/org/threeten/extra/Interval.html\" rel=\"nofollow noreferrer\"><code>Interval</code></a>, <a href=\"http://www.threeten.org/threeten-extra/apidocs/org/threeten/extra/YearWeek.html\" rel=\"nofollow noreferrer\"><code>YearWeek</code></a>, <a href=\"http://www.threeten.org/threeten-extra/apidocs/org/threeten/extra/YearQuarter.html\" rel=\"nofollow noreferrer\"><code>YearQuarter</code></a>, and <a href=\"http://www.threeten.org/threeten-extra/apidocs/index.html\" rel=\"nofollow noreferrer\">more</a>.</p>\n"},{"tags":[],"owner":{"account_id":20181255,"reputation":21,"user_id":14801744,"display_name":"Swathi Jak"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1637246180,"creation_date":1637246058,"answer_id":70021688,"question_id":59632635,"body_markdown":"If your string contains milliseconds, then firstly we need to choose the appropriate pattern for it.\r\n\r\n```\r\nString date = &quot;2021-11-15T07:45:28.655&quot;;\r\nDateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd&#39;T&#39;HH:mm:ss.SSS&quot;);\r\nLocalDate dt = LocalDate.parse(date, formattter);\r\n```\r\nIt resolves your problem.\r\n\r\nIf it includes time zone as well, then you need to change the pattern again.\r\n```\r\nString date = &quot;2021-11-15T07:45:28.655-08:00&quot;;\r\nDateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd&#39;T&#39;HH:mm:ss.SSSz&quot;);\r\nLocalDate dd = LocalDate.parse(date, formatter);\r\n```\r\n        ","title":"Create actual date in string format from microseconds with precision of microseconds","body":"<p>If your string contains milliseconds, then firstly we need to choose the appropriate pattern for it.</p>\n<pre><code>String date = &quot;2021-11-15T07:45:28.655&quot;;\nDateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd'T'HH:mm:ss.SSS&quot;);\nLocalDate dt = LocalDate.parse(date, formattter);\n</code></pre>\n<p>It resolves your problem.</p>\n<p>If it includes time zone as well, then you need to change the pattern again.</p>\n<pre><code>String date = &quot;2021-11-15T07:45:28.655-08:00&quot;;\nDateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd'T'HH:mm:ss.SSSz&quot;);\nLocalDate dd = LocalDate.parse(date, formatter);\n</code></pre>\n"}],"owner":{"account_id":5870718,"reputation":3152,"user_id":4623129,"display_name":"Khalid Shah"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4290,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":5,"score":0,"last_activity_date":1637246180,"creation_date":1578415418,"question_id":59632635,"body_markdown":"I want to create a java.util.Date object from microseconds. But i don&#39;t want to lose its precision microseconds to millisecond. Currently i am converting microseconds to Date object in the following way.\r\nIf i pass microseconds to the Date constructor then it gives a wrong date like `56521-12-01`.\r\n\r\n \r\n    long microSeconds = value.getTimestampValue();// This function returns a microseconds.\r\n    DateFormat FORMAT = new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss.SSSSSS);\r\n    long millis = TimeUnit.MILLISECONDS.convert(microSeconds, TimeUnit.MICROSECONDS);\r\n    String startDate = FORMAT.format(new Date(millis));\r\n\r\nI don&#39;t want to convert microseconds to milliseconds. Is there is a method of API or java-8 utility where i can direct convert the microseconds to Date object? \r\n\r\nThe problem with this method is It remove the last three digits of microseconds to make it milliseconds then create a date object from milliseconds  and parser just multiply its milliseconds part with `1000` to convert it into microseconds. In this way i lost a actul microsends.\r\n\r\n\r\n","title":"Create actual date in string format from microseconds with precision of microseconds","body":"<p>I want to create a java.util.Date object from microseconds. But i don't want to lose its precision microseconds to millisecond. Currently i am converting microseconds to Date object in the following way.\nIf i pass microseconds to the Date constructor then it gives a wrong date like <code>56521-12-01</code>.</p>\n\n<pre><code>long microSeconds = value.getTimestampValue();// This function returns a microseconds.\nDateFormat FORMAT = new SimpleDateFormat(\"yyyy-MM-dd HH:mm:ss.SSSSSS);\nlong millis = TimeUnit.MILLISECONDS.convert(microSeconds, TimeUnit.MICROSECONDS);\nString startDate = FORMAT.format(new Date(millis));\n</code></pre>\n\n<p>I don't want to convert microseconds to milliseconds. Is there is a method of API or java-8 utility where i can direct convert the microseconds to Date object? </p>\n\n<p>The problem with this method is It remove the last three digits of microseconds to make it milliseconds then create a date object from milliseconds  and parser just multiply its milliseconds part with <code>1000</code> to convert it into microseconds. In this way i lost a actul microsends.</p>\n"},{"tags":["java","android","android-calendar"],"comments":[{"owner":{"account_id":301110,"reputation":98844,"user_id":608639,"accept_rate":64,"display_name":"jww"},"score":0,"creation_date":1487559033,"post_id":13709477,"comment_id":71823960,"body_markdown":"Possible duplicate of [How to add calendar events in Android?](http://stackoverflow.com/questions/3721963/how-to-add-calendar-events-in-android)","body":"Possible duplicate of <a href=\"http://stackoverflow.com/questions/3721963/how-to-add-calendar-events-in-android\">How to add calendar events in Android?</a>"},{"owner":{"account_id":2552086,"reputation":1070,"user_id":2215652,"accept_rate":60,"display_name":"VitorMM"},"score":1,"creation_date":1489061196,"post_id":13709477,"comment_id":72511971,"body_markdown":"@jww He wants to do it silently, differently from that other question","body":"@jww He wants to do it silently, differently from that other question"},{"owner":{"account_id":7378264,"reputation":4782,"user_id":5709159,"accept_rate":58,"display_name":"Sirop4ik"},"score":0,"creation_date":1541666094,"post_id":13709477,"comment_id":93296060,"body_markdown":"don&#39;t forget about this line &lt;uses-permission android:name=&quot;android.permission.WRITE_SETTINGS&quot;/&gt;","body":"don&#39;t forget about this line &lt;uses-permission android:name=&quot;android.permission.WRITE_SETTINGS&quot;/&gt;"}],"answers":[{"tags":[],"owner":{"account_id":2107688,"reputation":439,"user_id":1873639,"display_name":"Velocitas"},"down_vote_count":1,"up_vote_count":24,"is_accepted":false,"score":23,"last_activity_date":1354646065,"creation_date":1354646065,"answer_id":13709601,"question_id":13709477,"body_markdown":"I believe the section you are looking for is [Using an intent to insert an event](http://developer.android.com/guide/topics/providers/calendar-provider.html#intent-insert). In this section it describes how to create an intent for the event you want to add and then the default calender program on the emulator will respond and add it. You may have to set up a dummy profile so that the calendar program will start if you actually want to see that it receives the correct information.\r\n___\r\n**Code from [Android Dev Site](http://developer.android.com/guide/topics/providers/calendar-provider.html#intent-insert):**\r\n\r\n    Calendar beginTime = Calendar.getInstance();\r\n    beginTime.set(2012, 0, 19, 7, 30);\r\n    Calendar endTime = Calendar.getInstance();\r\n    endTime.set(2012, 0, 19, 8, 30);\r\n    Intent intent = new Intent(Intent.ACTION_INSERT)\r\n        .setData(Events.CONTENT_URI)\r\n        .putExtra(CalendarContract.EXTRA_EVENT_BEGIN_TIME, beginTime.getTimeInMillis())\r\n        .putExtra(CalendarContract.EXTRA_EVENT_END_TIME, endTime.getTimeInMillis())\r\n        .putExtra(Events.TITLE, &quot;Yoga&quot;)\r\n        .putExtra(Events.DESCRIPTION, &quot;Group class&quot;)\r\n        .putExtra(Events.EVENT_LOCATION, &quot;The gym&quot;)\r\n        .putExtra(Events.AVAILABILITY, Events.AVAILABILITY_BUSY)\r\n        .putExtra(Intent.EXTRA_EMAIL, &quot;rowan@example.com,trevor@example.com&quot;);\r\n    startActivity(intent);","title":"How to add calendar events to default calendar, silently without Intent, in android 4?","body":"<p>I believe the section you are looking for is <a href=\"http://developer.android.com/guide/topics/providers/calendar-provider.html#intent-insert\" rel=\"noreferrer\">Using an intent to insert an event</a>. In this section it describes how to create an intent for the event you want to add and then the default calender program on the emulator will respond and add it. You may have to set up a dummy profile so that the calendar program will start if you actually want to see that it receives the correct information.</p>\n\n<hr>\n\n<p><strong>Code from <a href=\"http://developer.android.com/guide/topics/providers/calendar-provider.html#intent-insert\" rel=\"noreferrer\">Android Dev Site</a>:</strong></p>\n\n<pre><code>Calendar beginTime = Calendar.getInstance();\nbeginTime.set(2012, 0, 19, 7, 30);\nCalendar endTime = Calendar.getInstance();\nendTime.set(2012, 0, 19, 8, 30);\nIntent intent = new Intent(Intent.ACTION_INSERT)\n    .setData(Events.CONTENT_URI)\n    .putExtra(CalendarContract.EXTRA_EVENT_BEGIN_TIME, beginTime.getTimeInMillis())\n    .putExtra(CalendarContract.EXTRA_EVENT_END_TIME, endTime.getTimeInMillis())\n    .putExtra(Events.TITLE, \"Yoga\")\n    .putExtra(Events.DESCRIPTION, \"Group class\")\n    .putExtra(Events.EVENT_LOCATION, \"The gym\")\n    .putExtra(Events.AVAILABILITY, Events.AVAILABILITY_BUSY)\n    .putExtra(Intent.EXTRA_EMAIL, \"rowan@example.com,trevor@example.com\");\nstartActivity(intent);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1520684,"reputation":4045,"user_id":1420433,"accept_rate":98,"display_name":"oikonomopo"},"down_vote_count":1,"up_vote_count":48,"is_accepted":true,"score":47,"last_activity_date":1496848114,"creation_date":1356617709,"answer_id":14056064,"question_id":13709477,"body_markdown":"[Here][1] is a working example of what i eventually made it:\r\n\r\n    ContentResolver cr = ctx.getContentResolver();\r\n    ContentValues values = new ContentValues();\r\n        \r\n    values.put(CalendarContract.Events.DTSTART, dtstart);\r\n    values.put(CalendarContract.Events.TITLE, title);\r\n    values.put(CalendarContract.Events.DESCRIPTION, comment);\r\n    \r\n    TimeZone timeZone = TimeZone.getDefault();\r\n    values.put(CalendarContract.Events.EVENT_TIMEZONE, timeZone.getID());\r\n    \r\n    // Default calendar\r\n    values.put(CalendarContract.Events.CALENDAR_ID, 1);\r\n    \r\n    values.put(CalendarContract.Events.RRULE, &quot;FREQ=DAILY;UNTIL=&quot;\r\n    \t\t+ dtUntill);\r\n    // Set Period for 1 Hour\r\n    values.put(CalendarContract.Events.DURATION, &quot;+P1H&quot;);\r\n    \r\n    values.put(CalendarContract.Events.HAS_ALARM, 1);\r\n    \r\n    // Insert event to calendar\r\n    Uri uri = cr.insert(CalendarContract.Events.CONTENT_URI, values);\r\n\r\n   where `dtuntil` is \r\n\r\n    SimpleDateFormat yyyyMMdd = new SimpleDateFormat(&quot;yyyyMMdd&quot;);\r\n    Calendar dt = Calendar.getInstance();\r\n    \r\n    // Where untilDate is a date instance of your choice, for example 30/01/2012\r\n    dt.setTime(untilDate);\r\n    \r\n    // If you want the event until 30/01/2012, you must add one day from our day because UNTIL in RRule sets events before the last day\r\n    dt.add(Calendar.DATE, 1);\r\n    String dtUntill = yyyyMMdd.format(dt.getTime());\r\n\r\nRef: [`Recurrence Rule`][2]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/13652168/how-to-add-calendar-event-with-reminder-repeated-every-day-until-specific-day\r\n  [2]: https://www.rfc-editor.org/rfc/rfc5545#section-3.8.5.3","title":"How to add calendar events to default calendar, silently without Intent, in android 4?","body":"<p><a href=\"https://stackoverflow.com/questions/13652168/how-to-add-calendar-event-with-reminder-repeated-every-day-until-specific-day\">Here</a> is a working example of what i eventually made it:</p>\n<pre><code>ContentResolver cr = ctx.getContentResolver();\nContentValues values = new ContentValues();\n    \nvalues.put(CalendarContract.Events.DTSTART, dtstart);\nvalues.put(CalendarContract.Events.TITLE, title);\nvalues.put(CalendarContract.Events.DESCRIPTION, comment);\n\nTimeZone timeZone = TimeZone.getDefault();\nvalues.put(CalendarContract.Events.EVENT_TIMEZONE, timeZone.getID());\n\n// Default calendar\nvalues.put(CalendarContract.Events.CALENDAR_ID, 1);\n\nvalues.put(CalendarContract.Events.RRULE, &quot;FREQ=DAILY;UNTIL=&quot;\n        + dtUntill);\n// Set Period for 1 Hour\nvalues.put(CalendarContract.Events.DURATION, &quot;+P1H&quot;);\n\nvalues.put(CalendarContract.Events.HAS_ALARM, 1);\n\n// Insert event to calendar\nUri uri = cr.insert(CalendarContract.Events.CONTENT_URI, values);\n</code></pre>\n<p>where <code>dtuntil</code> is</p>\n<pre><code>SimpleDateFormat yyyyMMdd = new SimpleDateFormat(&quot;yyyyMMdd&quot;);\nCalendar dt = Calendar.getInstance();\n\n// Where untilDate is a date instance of your choice, for example 30/01/2012\ndt.setTime(untilDate);\n\n// If you want the event until 30/01/2012, you must add one day from our day because UNTIL in RRule sets events before the last day\ndt.add(Calendar.DATE, 1);\nString dtUntill = yyyyMMdd.format(dt.getTime());\n</code></pre>\n<p>Ref: <a href=\"https://www.rfc-editor.org/rfc/rfc5545#section-3.8.5.3\" rel=\"nofollow noreferrer\"><code>Recurrence Rule</code></a></p>\n"},{"tags":[],"owner":{"account_id":9630875,"reputation":31,"user_id":7148816,"display_name":"Ketan Ramani"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1478939161,"creation_date":1478927895,"answer_id":40559835,"question_id":13709477,"body_markdown":"Using this code, you can programmatically add an event to device calendar. I have tested in Marshmallow, and it works fine for me.\r\n\r\n    private void addToDeviceCalendar(String startDate,String endDate, String title,String description, String location) {\r\n    \r\n            String stDate = startDate;\r\n            String enDate = endDate;\r\n    \r\n            GregorianCalendar calDate = new GregorianCalendar();\r\n            //GregorianCalendar calEndDate = new GregorianCalendar();\r\n    \r\n            SimpleDateFormat originalFormat = new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm&quot;);\r\n            SimpleDateFormat targetFormat = new SimpleDateFormat(&quot;yyyy,MM,dd,HH,mm&quot;);\r\n            Date date,edate;\r\n            try {\r\n                date = originalFormat.parse(startDate);\r\n                stDate=targetFormat.format(date);\r\n    \r\n            } catch (ParseException ex) {}\r\n    \r\n            long startMillis = 0;\r\n            long endMillis = 0;\r\n            String dates[] = stDate.split(&quot;,&quot;);\r\n    \r\n            SD_YeaR = dates[0];\r\n            SD_MontH = dates[1];\r\n            SD_DaY = dates[2];\r\n            SD_HouR = dates[3];\r\n            SD_MinutE = dates[4];\r\n    \r\n    \r\n            /*Log.e(&quot;YeaR &quot;, SD_YeaR);\r\n            Log.e(&quot;MontH &quot;,SD_MontH );\r\n            Log.e(&quot;DaY &quot;, SD_DaY);\r\n            Log.e(&quot; HouR&quot;, SD_HouR);\r\n            Log.e(&quot;MinutE &quot;, SD_MinutE);*/\r\n    \r\n            calDate.set(Integer.parseInt(SD_YeaR), Integer.parseInt(SD_MontH)-1, Integer.parseInt(SD_DaY), Integer.parseInt(SD_HouR), Integer.parseInt(SD_MinutE));\r\n            startMillis = calDate.getTimeInMillis();\r\n    /*\r\n            try {\r\n                edate = originalFormat.parse(endDate);\r\n                enDate=targetFormat.format(edate);\r\n    \r\n            } catch (ParseException ex) {}\r\n    \r\n    \r\n            String end_dates[] = endDate.split(&quot;,&quot;);\r\n    \r\n            String ED_YeaR = end_dates[0];\r\n            String ED_MontH = end_dates[1];\r\n            String ED_DaY = end_dates[2];\r\n    \r\n            String ED_HouR = end_dates[3];\r\n            String ED_MinutE = end_dates[4];\r\n    \r\n    \r\n            calEndDate.set(Integer.parseInt(ED_YeaR), Integer.parseInt(ED_MontH)-1, Integer.parseInt(ED_DaY), Integer.parseInt(ED_HouR), Integer.parseInt(ED_MinutE));\r\n            endMillis = calEndDate.getTimeInMillis();*/\r\n    \r\n            try {\r\n                ContentResolver cr = getActivity().getContentResolver();\r\n                ContentValues values = new ContentValues();\r\n                values.put(CalendarContract.Events.DTSTART, startMillis);\r\n                values.put(CalendarContract.Events.DTEND, calDate.getTimeInMillis() + 60 * 60 * 1000);\r\n                values.put(CalendarContract.Events.TITLE, title);\r\n                values.put(CalendarContract.Events.DESCRIPTION, description);\r\n                values.put(CalendarContract.Events.EVENT_LOCATION,location);\r\n                values.put(CalendarContract.Events.HAS_ALARM,1);\r\n                values.put(CalendarContract.Events.CALENDAR_ID, 1);\r\n                values.put(CalendarContract.Events.EVENT_TIMEZONE, Calendar.getInstance()\r\n                        .getTimeZone().getID());\r\n                System.out.println(Calendar.getInstance().getTimeZone().getID());\r\n                if (ActivityCompat.checkSelfPermission(getActivity(), Manifest.permission.WRITE_CALENDAR) != PackageManager.PERMISSION_GRANTED) {\r\n    \r\n                    return;\r\n                }\r\n                Uri uri = cr.insert(CalendarContract.Events.CONTENT_URI, values);\r\n    \r\n                long eventId = Long.parseLong(uri.getLastPathSegment());\r\n                Log.d(&quot;Ketan_Event_Id&quot;, String.valueOf(eventId));\r\n    \r\n            } catch (Exception e) {\r\n                e.printStackTrace();\r\n            }\r\n        }","title":"How to add calendar events to default calendar, silently without Intent, in android 4?","body":"<p>Using this code, you can programmatically add an event to device calendar. I have tested in Marshmallow, and it works fine for me.</p>\n\n<pre><code>private void addToDeviceCalendar(String startDate,String endDate, String title,String description, String location) {\n\n        String stDate = startDate;\n        String enDate = endDate;\n\n        GregorianCalendar calDate = new GregorianCalendar();\n        //GregorianCalendar calEndDate = new GregorianCalendar();\n\n        SimpleDateFormat originalFormat = new SimpleDateFormat(\"yyyy-MM-dd HH:mm\");\n        SimpleDateFormat targetFormat = new SimpleDateFormat(\"yyyy,MM,dd,HH,mm\");\n        Date date,edate;\n        try {\n            date = originalFormat.parse(startDate);\n            stDate=targetFormat.format(date);\n\n        } catch (ParseException ex) {}\n\n        long startMillis = 0;\n        long endMillis = 0;\n        String dates[] = stDate.split(\",\");\n\n        SD_YeaR = dates[0];\n        SD_MontH = dates[1];\n        SD_DaY = dates[2];\n        SD_HouR = dates[3];\n        SD_MinutE = dates[4];\n\n\n        /*Log.e(\"YeaR \", SD_YeaR);\n        Log.e(\"MontH \",SD_MontH );\n        Log.e(\"DaY \", SD_DaY);\n        Log.e(\" HouR\", SD_HouR);\n        Log.e(\"MinutE \", SD_MinutE);*/\n\n        calDate.set(Integer.parseInt(SD_YeaR), Integer.parseInt(SD_MontH)-1, Integer.parseInt(SD_DaY), Integer.parseInt(SD_HouR), Integer.parseInt(SD_MinutE));\n        startMillis = calDate.getTimeInMillis();\n/*\n        try {\n            edate = originalFormat.parse(endDate);\n            enDate=targetFormat.format(edate);\n\n        } catch (ParseException ex) {}\n\n\n        String end_dates[] = endDate.split(\",\");\n\n        String ED_YeaR = end_dates[0];\n        String ED_MontH = end_dates[1];\n        String ED_DaY = end_dates[2];\n\n        String ED_HouR = end_dates[3];\n        String ED_MinutE = end_dates[4];\n\n\n        calEndDate.set(Integer.parseInt(ED_YeaR), Integer.parseInt(ED_MontH)-1, Integer.parseInt(ED_DaY), Integer.parseInt(ED_HouR), Integer.parseInt(ED_MinutE));\n        endMillis = calEndDate.getTimeInMillis();*/\n\n        try {\n            ContentResolver cr = getActivity().getContentResolver();\n            ContentValues values = new ContentValues();\n            values.put(CalendarContract.Events.DTSTART, startMillis);\n            values.put(CalendarContract.Events.DTEND, calDate.getTimeInMillis() + 60 * 60 * 1000);\n            values.put(CalendarContract.Events.TITLE, title);\n            values.put(CalendarContract.Events.DESCRIPTION, description);\n            values.put(CalendarContract.Events.EVENT_LOCATION,location);\n            values.put(CalendarContract.Events.HAS_ALARM,1);\n            values.put(CalendarContract.Events.CALENDAR_ID, 1);\n            values.put(CalendarContract.Events.EVENT_TIMEZONE, Calendar.getInstance()\n                    .getTimeZone().getID());\n            System.out.println(Calendar.getInstance().getTimeZone().getID());\n            if (ActivityCompat.checkSelfPermission(getActivity(), Manifest.permission.WRITE_CALENDAR) != PackageManager.PERMISSION_GRANTED) {\n\n                return;\n            }\n            Uri uri = cr.insert(CalendarContract.Events.CONTENT_URI, values);\n\n            long eventId = Long.parseLong(uri.getLastPathSegment());\n            Log.d(\"Ketan_Event_Id\", String.valueOf(eventId));\n\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":975359,"reputation":6345,"user_id":996787,"accept_rate":33,"display_name":"Rajesh N"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1496399695,"creation_date":1496399695,"answer_id":44326831,"question_id":13709477,"body_markdown":"Agree with above all answers but import is calender Id. you can not use 1 as samsung phone uses 1 for their calender(S Planner).So calender ID is id for which email you want event. you can get calender id by following code for specific event \r\n\r\n\r\n    int calenderId=-1;\r\n            String calenderEmaillAddress=&quot;xxx@gmail.com&quot;;\r\n            String[] projection = new String[]{\r\n                    CalendarContract.Calendars._ID,\r\n                    CalendarContract.Calendars.ACCOUNT_NAME};\r\n            ContentResolver cr = activity.getContentResolver();\r\n            Cursor cursor = cr.query(Uri.parse(&quot;content://com.android.calendar/calendars&quot;), projection,\r\n                    CalendarContract.Calendars.ACCOUNT_NAME + &quot;=? and (&quot; +\r\n                            CalendarContract.Calendars.NAME + &quot;=? or &quot; +\r\n                            CalendarContract.Calendars.CALENDAR_DISPLAY_NAME + &quot;=?)&quot;,\r\n                    new String[]{calenderEmaillAddress, calenderEmaillAddress,\r\n                            calenderEmaillAddress}, null);\r\n    \r\n            if (cursor.moveToFirst()) {\r\n    \r\n                if (cursor.getString(1).equals(calenderEmaillAddress))\r\n                     calenderId=cursor.getInt(0); //youre calender id to be insered in above 2 answer\r\n    \r\n    \r\n            }","title":"How to add calendar events to default calendar, silently without Intent, in android 4?","body":"<p>Agree with above all answers but import is calender Id. you can not use 1 as samsung phone uses 1 for their calender(S Planner).So calender ID is id for which email you want event. you can get calender id by following code for specific event </p>\n\n<pre><code>int calenderId=-1;\n        String calenderEmaillAddress=\"xxx@gmail.com\";\n        String[] projection = new String[]{\n                CalendarContract.Calendars._ID,\n                CalendarContract.Calendars.ACCOUNT_NAME};\n        ContentResolver cr = activity.getContentResolver();\n        Cursor cursor = cr.query(Uri.parse(\"content://com.android.calendar/calendars\"), projection,\n                CalendarContract.Calendars.ACCOUNT_NAME + \"=? and (\" +\n                        CalendarContract.Calendars.NAME + \"=? or \" +\n                        CalendarContract.Calendars.CALENDAR_DISPLAY_NAME + \"=?)\",\n                new String[]{calenderEmaillAddress, calenderEmaillAddress,\n                        calenderEmaillAddress}, null);\n\n        if (cursor.moveToFirst()) {\n\n            if (cursor.getString(1).equals(calenderEmaillAddress))\n                 calenderId=cursor.getInt(0); //youre calender id to be insered in above 2 answer\n\n\n        }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13865284,"reputation":343,"user_id":10034770,"display_name":"Kavya Shravan"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1540982260,"creation_date":1540982260,"answer_id":53081378,"question_id":13709477,"body_markdown":"Here is the way to ask user to which calendar the event has to be added. As my requirement was this and didn&#39;t find the solution at one place. I have summarized and came up with this solution, hope it helps someone :)\r\n\r\n    final ContentResolver cr = this.getContentResolver();\r\n            Cursor cursor ;\r\n            if (Integer.parseInt(Build.VERSION.SDK) &gt;= 8 )\r\n                cursor = cr.query(Uri.parse(&quot;content://com.android.calendar/calendars&quot;), new String[]{ &quot;_id&quot;, &quot;calendar_displayName&quot; }, null, null, null);\r\n            else\r\n                cursor = cr.query(Uri.parse(&quot;content://calendar/calendars&quot;), new String[]{ &quot;_id&quot;, &quot;displayname&quot; }, null, null, null);\r\n            if (cursor != null &amp;&amp; cursor.moveToFirst() ) {\r\n                final String[] calNames = new String[cursor.getCount()];\r\n                final int[] calIds = new int[cursor.getCount()];\r\n                for (int i = 0; i &lt; calNames.length; i++) {\r\n                    calIds[i] = cursor.getInt(0);\r\n                    calNames[i] = cursor.getString(1);\r\n                    cursor.moveToNext();\r\n                }\r\n\r\n                SimpleDateFormat sdf = new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss&quot;);\r\n                final long startDate = sdf.parse(slotData.getSlot_date() + &quot; &quot; + slotData.getSlot_from()).getTime();\r\n                final long endDate = sdf.parse(slotData.getSlot_date() + &quot; &quot; + slotData.getSlot_to()).getTime();\r\n\r\n                AlertDialog.Builder builder = new AlertDialog.Builder(this);\r\n                builder.setTitle(&quot;Select any one&quot;);\r\n                builder.setSingleChoiceItems(calNames, -1, new DialogInterface.OnClickListener() {\r\n\r\n                    @Override\r\n                    public void onClick(DialogInterface dialog, int which) {\r\n                        ContentValues cv = new ContentValues();\r\n                        cv.put(&quot;calendar_id&quot;, calIds[which]);\r\n                        cv.put(&quot;title&quot;, title);\r\n                        cv.put(&quot;dtstart&quot;, startDate);\r\n                        cv.put(&quot;hasAlarm&quot;, 1);\r\n                        cv.put(&quot;dtend&quot;, endDate);\r\n                        cv.put(&quot;eventTimezone&quot;, TimeZone.getDefault().getID());\r\n\r\n                        Uri newEvent ;\r\n                        if (Integer.parseInt(Build.VERSION.SDK) &gt;= 8 )\r\n                            newEvent = cr.insert(Uri.parse(&quot;content://com.android.calendar/events&quot;), cv);\r\n                        else\r\n                            newEvent = cr.insert(Uri.parse(&quot;content://calendar/events&quot;), cv);\r\n\r\n                        if (newEvent != null) {\r\n                            long id = Long.parseLong( newEvent.getLastPathSegment() );\r\n                            ContentValues values = new ContentValues();\r\n                            values.put( &quot;event_id&quot;, id );\r\n                            values.put( &quot;method&quot;, 1 );\r\n                            values.put( &quot;minutes&quot;, 15 ); // 15 minutes\r\n                            if (Integer.parseInt(Build.VERSION.SDK) &gt;= 8 )\r\n                                cr.insert( Uri.parse( &quot;content://com.android.calendar/reminders&quot; ), values );\r\n                            else\r\n                                cr.insert( Uri.parse( &quot;content://calendar/reminders&quot; ), values );\r\n\r\n                        }\r\n                        dialog.cancel();\r\n                    }\r\n\r\n                });\r\n\r\n                builder.create().show();\r\n            }\r\n            if (cursor != null) {\r\n                cursor.close();\r\n            }","title":"How to add calendar events to default calendar, silently without Intent, in android 4?","body":"<p>Here is the way to ask user to which calendar the event has to be added. As my requirement was this and didn't find the solution at one place. I have summarized and came up with this solution, hope it helps someone :)</p>\n\n<pre><code>final ContentResolver cr = this.getContentResolver();\n        Cursor cursor ;\n        if (Integer.parseInt(Build.VERSION.SDK) &gt;= 8 )\n            cursor = cr.query(Uri.parse(\"content://com.android.calendar/calendars\"), new String[]{ \"_id\", \"calendar_displayName\" }, null, null, null);\n        else\n            cursor = cr.query(Uri.parse(\"content://calendar/calendars\"), new String[]{ \"_id\", \"displayname\" }, null, null, null);\n        if (cursor != null &amp;&amp; cursor.moveToFirst() ) {\n            final String[] calNames = new String[cursor.getCount()];\n            final int[] calIds = new int[cursor.getCount()];\n            for (int i = 0; i &lt; calNames.length; i++) {\n                calIds[i] = cursor.getInt(0);\n                calNames[i] = cursor.getString(1);\n                cursor.moveToNext();\n            }\n\n            SimpleDateFormat sdf = new SimpleDateFormat(\"yyyy-MM-dd HH:mm:ss\");\n            final long startDate = sdf.parse(slotData.getSlot_date() + \" \" + slotData.getSlot_from()).getTime();\n            final long endDate = sdf.parse(slotData.getSlot_date() + \" \" + slotData.getSlot_to()).getTime();\n\n            AlertDialog.Builder builder = new AlertDialog.Builder(this);\n            builder.setTitle(\"Select any one\");\n            builder.setSingleChoiceItems(calNames, -1, new DialogInterface.OnClickListener() {\n\n                @Override\n                public void onClick(DialogInterface dialog, int which) {\n                    ContentValues cv = new ContentValues();\n                    cv.put(\"calendar_id\", calIds[which]);\n                    cv.put(\"title\", title);\n                    cv.put(\"dtstart\", startDate);\n                    cv.put(\"hasAlarm\", 1);\n                    cv.put(\"dtend\", endDate);\n                    cv.put(\"eventTimezone\", TimeZone.getDefault().getID());\n\n                    Uri newEvent ;\n                    if (Integer.parseInt(Build.VERSION.SDK) &gt;= 8 )\n                        newEvent = cr.insert(Uri.parse(\"content://com.android.calendar/events\"), cv);\n                    else\n                        newEvent = cr.insert(Uri.parse(\"content://calendar/events\"), cv);\n\n                    if (newEvent != null) {\n                        long id = Long.parseLong( newEvent.getLastPathSegment() );\n                        ContentValues values = new ContentValues();\n                        values.put( \"event_id\", id );\n                        values.put( \"method\", 1 );\n                        values.put( \"minutes\", 15 ); // 15 minutes\n                        if (Integer.parseInt(Build.VERSION.SDK) &gt;= 8 )\n                            cr.insert( Uri.parse( \"content://com.android.calendar/reminders\" ), values );\n                        else\n                            cr.insert( Uri.parse( \"content://calendar/reminders\" ), values );\n\n                    }\n                    dialog.cancel();\n                }\n\n            });\n\n            builder.create().show();\n        }\n        if (cursor != null) {\n            cursor.close();\n        }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7612618,"reputation":15612,"user_id":5773037,"display_name":"Nikunj Paradva"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1554359478,"creation_date":1554359478,"answer_id":55509247,"question_id":13709477,"body_markdown":"**Dont Forget to add Permission to Manifest**\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.READ_CALENDAR&quot;/&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.WRITE_CALENDAR&quot;/&gt;\r\n\r\n**Code from :-&gt;[Android Dev Site][1]**\r\n\r\n    long calID = 3; // Make sure to which calender you want to add event \r\n    long startMillis = 0;\r\n    long endMillis = 0;\r\n    Calendar beginTime = Calendar.getInstance();\r\n    beginTime.set(2012, 9, 14, 7, 30);\r\n    startMillis = beginTime.getTimeInMillis();\r\n    Calendar endTime = Calendar.getInstance();\r\n    endTime.set(2012, 9, 14, 8, 45);\r\n    endMillis = endTime.getTimeInMillis();\r\n    \r\n    \r\n    ContentResolver cr = getContentResolver();\r\n    ContentValues values = new ContentValues();\r\n    values.put(Events.DTSTART, startMillis);\r\n    values.put(Events.DTEND, endMillis);\r\n    values.put(Events.TITLE, &quot;Hackathon&quot;);\r\n    values.put(Events.DESCRIPTION, &quot;do some code&quot;);\r\n    values.put(Events.CALENDAR_ID, calID);\r\n    values.put(Events.EVENT_TIMEZONE, TimeZone.getDefault().getID());\r\n    Uri uri = cr.insert(Events.CONTENT_URI, values);\r\n    \r\n    // get the event ID that is the last element in the Uri\r\n    long eventID = Long.parseLong(uri.getLastPathSegment());\r\n \r\n\r\n\r\n  [1]: https://developer.android.com/guide/topics/providers/calendar-provider#add-event","title":"How to add calendar events to default calendar, silently without Intent, in android 4?","body":"<p><strong>Dont Forget to add Permission to Manifest</strong></p>\n\n<pre><code>&lt;uses-permission android:name=\"android.permission.READ_CALENDAR\"/&gt;\n&lt;uses-permission android:name=\"android.permission.WRITE_CALENDAR\"/&gt;\n</code></pre>\n\n<p><strong>Code from :-><a href=\"https://developer.android.com/guide/topics/providers/calendar-provider#add-event\" rel=\"noreferrer\">Android Dev Site</a></strong></p>\n\n<pre><code>long calID = 3; // Make sure to which calender you want to add event \nlong startMillis = 0;\nlong endMillis = 0;\nCalendar beginTime = Calendar.getInstance();\nbeginTime.set(2012, 9, 14, 7, 30);\nstartMillis = beginTime.getTimeInMillis();\nCalendar endTime = Calendar.getInstance();\nendTime.set(2012, 9, 14, 8, 45);\nendMillis = endTime.getTimeInMillis();\n\n\nContentResolver cr = getContentResolver();\nContentValues values = new ContentValues();\nvalues.put(Events.DTSTART, startMillis);\nvalues.put(Events.DTEND, endMillis);\nvalues.put(Events.TITLE, \"Hackathon\");\nvalues.put(Events.DESCRIPTION, \"do some code\");\nvalues.put(Events.CALENDAR_ID, calID);\nvalues.put(Events.EVENT_TIMEZONE, TimeZone.getDefault().getID());\nUri uri = cr.insert(Events.CONTENT_URI, values);\n\n// get the event ID that is the last element in the Uri\nlong eventID = Long.parseLong(uri.getLastPathSegment());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23214944,"reputation":375,"user_id":17307978,"display_name":"Louis Chabert"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1637246066,"creation_date":1637246066,"answer_id":70021692,"question_id":13709477,"body_markdown":"After reading several posts and after a few tries.\r\nI finally found this method to work well on Android 8 and 10.\r\n\r\nMy code:\r\n\r\n        public void addEventToCalendar() {\r\n        Context myContext = getContext();\r\n        String[] projection = {&quot;_id&quot;, &quot;calendar_displayName&quot;};\r\n        Cursor calCursor = myContext.getContentResolver().query(CalendarContract.Calendars.CONTENT_URI, projection, CalendarContract.Calendars.VISIBLE + &quot; = 1 AND &quot;  + CalendarContract.Calendars.IS_PRIMARY + &quot;=1&quot;, null, CalendarContract.Calendars._ID + &quot; ASC&quot;);\r\n        if(calCursor.getCount() &lt;= 0){\r\n            calCursor = myContext.getContentResolver().query(CalendarContract.Calendars.CONTENT_URI, projection, CalendarContract.Calendars.VISIBLE + &quot; = 1&quot;, null, CalendarContract.Calendars._ID + &quot; ASC&quot;);\r\n        }\r\n\r\n        while (calCursor.moveToNext()) {\r\n            long id = calCursor.getLong(calCursor.getColumnIndexOrThrow(CalendarContract.Calendars._ID));\r\n            long startMillis;\r\n            long endMillis;\r\n            Calendar beginTime = Calendar.getInstance();\r\n            beginTime.set(2021, 9, 22, 15, 30);\r\n            startMillis = beginTime.getTimeInMillis();\r\n            Calendar endTime = Calendar.getInstance();\r\n            endTime.set(2021, 9, 22, 16, 45);\r\n            endMillis = endTime.getTimeInMillis();\r\n\r\n            ContentResolver cr = Objects.requireNonNull(getActivity()).getContentResolver();\r\n            ContentValues values = new ContentValues();\r\n            values.put(CalendarContract.Events.DTSTART, startMillis);\r\n            values.put(CalendarContract.Events.DTEND, endMillis);\r\n            values.put(CalendarContract.Events.TITLE, &quot;My event&quot;);\r\n            values.put(CalendarContract.Events.DESCRIPTION, &quot;Nice description&quot;);\r\n            values.put(CalendarContract.Events.CALENDAR_ID, id);\r\n            Log.i(&quot;ID&quot;,&quot;my Id&quot;+ id);\r\n            values.put(CalendarContract.Events.EVENT_TIMEZONE, TimeZone.getDefault().getID());\r\n            Uri uri = cr.insert(CalendarContract.Events.CONTENT_URI, values);\r\n\r\n            long eventID = Long.parseLong(uri.getLastPathSegment());\r\n        }\r\n\r\n    }\r\n\r\nI was able to test on different phones and the insertion is done on the google calendar as well as on a basic android calendar.\r\n\r\nNormally this method makes sure to insert the event (s) in all the calendars available on the device. I couldn&#39;t test it but I have high hopes.","title":"How to add calendar events to default calendar, silently without Intent, in android 4?","body":"<p>After reading several posts and after a few tries.\nI finally found this method to work well on Android 8 and 10.</p>\n<p>My code:</p>\n<pre><code>    public void addEventToCalendar() {\n    Context myContext = getContext();\n    String[] projection = {&quot;_id&quot;, &quot;calendar_displayName&quot;};\n    Cursor calCursor = myContext.getContentResolver().query(CalendarContract.Calendars.CONTENT_URI, projection, CalendarContract.Calendars.VISIBLE + &quot; = 1 AND &quot;  + CalendarContract.Calendars.IS_PRIMARY + &quot;=1&quot;, null, CalendarContract.Calendars._ID + &quot; ASC&quot;);\n    if(calCursor.getCount() &lt;= 0){\n        calCursor = myContext.getContentResolver().query(CalendarContract.Calendars.CONTENT_URI, projection, CalendarContract.Calendars.VISIBLE + &quot; = 1&quot;, null, CalendarContract.Calendars._ID + &quot; ASC&quot;);\n    }\n\n    while (calCursor.moveToNext()) {\n        long id = calCursor.getLong(calCursor.getColumnIndexOrThrow(CalendarContract.Calendars._ID));\n        long startMillis;\n        long endMillis;\n        Calendar beginTime = Calendar.getInstance();\n        beginTime.set(2021, 9, 22, 15, 30);\n        startMillis = beginTime.getTimeInMillis();\n        Calendar endTime = Calendar.getInstance();\n        endTime.set(2021, 9, 22, 16, 45);\n        endMillis = endTime.getTimeInMillis();\n\n        ContentResolver cr = Objects.requireNonNull(getActivity()).getContentResolver();\n        ContentValues values = new ContentValues();\n        values.put(CalendarContract.Events.DTSTART, startMillis);\n        values.put(CalendarContract.Events.DTEND, endMillis);\n        values.put(CalendarContract.Events.TITLE, &quot;My event&quot;);\n        values.put(CalendarContract.Events.DESCRIPTION, &quot;Nice description&quot;);\n        values.put(CalendarContract.Events.CALENDAR_ID, id);\n        Log.i(&quot;ID&quot;,&quot;my Id&quot;+ id);\n        values.put(CalendarContract.Events.EVENT_TIMEZONE, TimeZone.getDefault().getID());\n        Uri uri = cr.insert(CalendarContract.Events.CONTENT_URI, values);\n\n        long eventID = Long.parseLong(uri.getLastPathSegment());\n    }\n\n}\n</code></pre>\n<p>I was able to test on different phones and the insertion is done on the google calendar as well as on a basic android calendar.</p>\n<p>Normally this method makes sure to insert the event (s) in all the calendars available on the device. I couldn't test it but I have high hopes.</p>\n"}],"owner":{"account_id":1520684,"reputation":4045,"user_id":1420433,"accept_rate":98,"display_name":"oikonomopo"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":61660,"favorite_count":0,"down_vote_count":0,"up_vote_count":31,"accepted_answer_id":14056064,"answer_count":7,"score":31,"last_activity_date":1637246066,"creation_date":1354645611,"question_id":13709477,"body_markdown":"\t\r\nI want to add calendar events programmatically (directly) in android 4+.  Is it this possible to be tested on emulator?  I don&#39;t own an android phone.  Some sample code would be appreciated.  I read Calendar Provider of android developers but I&#39;m confused.  How can I add events to the default calendar of a user? I don&#39;t need to be synced.\r\n\r\nEDIT: I do not want to launch an event adding Intent. Instead I want to add them completely from code and not launch another activity. I need to be able to test on an emulator that the events will be added to the main calendar of the default user of the device. How do I set up an emulator to view the default calendar of the user?","title":"How to add calendar events to default calendar, silently without Intent, in android 4?","body":"<p>I want to add calendar events programmatically (directly) in android 4+.  Is it this possible to be tested on emulator?  I don't own an android phone.  Some sample code would be appreciated.  I read Calendar Provider of android developers but I'm confused.  How can I add events to the default calendar of a user? I don't need to be synced.</p>\n\n<p>EDIT: I do not want to launch an event adding Intent. Instead I want to add them completely from code and not launch another activity. I need to be able to test on an emulator that the events will be added to the main calendar of the default user of the device. How do I set up an emulator to view the default calendar of the user?</p>\n"},{"tags":["java","package"],"comments":[{"owner":{"account_id":2139538,"reputation":42511,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":5,"creation_date":1637245779,"post_id":70021598,"comment_id":123779040,"body_markdown":"If you specify no package, the class belongs to the default package. If you do that twice, both classes are in the default package, which means both classes are in the same package. It is discouraged to use the default package anyway. It basically exists for noobs: &quot;*Unnamed packages are provided by the Java SE platform principally for convenience when developing small or temporary applications or **when just beginning development**.*&quot; https://docs.oracle.com/javase/specs/jls/se8/html/jls-7.html#jls-7.4.2","body":"If you specify no package, the class belongs to the default package. If you do that twice, both classes are in the default package, which means both classes are in the same package. It is discouraged to use the default package anyway. It basically exists for noobs: &quot;<i>Unnamed packages are provided by the Java SE platform principally for convenience when developing small or temporary applications or <b>when just beginning development</b>.</i>&quot; <a href=\"https://docs.oracle.com/javase/specs/jls/se8/html/jls-7.html#jls-7.4.2\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/specs/jls/se8/html/jls-7.html#jls-7.4&zwnj;&#8203;.2</a>"},{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":1,"creation_date":1637246066,"post_id":70021598,"comment_id":123779182,"body_markdown":"`Does the compiler consider 2 files in the same folder with no package declaration to be in the same package by default?` As Michael just explained, yes, that&#39;s exactly what the compiler does.","body":"<code>Does the compiler consider 2 files in the same folder with no package declaration to be in the same package by default?</code> As Michael just explained, yes, that&#39;s exactly what the compiler does."}],"answers":[{"tags":[],"owner":{"account_id":1193459,"reputation":3979,"user_id":1165724,"display_name":"swpalmer"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1637246045,"creation_date":1637246045,"answer_id":70021683,"question_id":70021598,"body_markdown":"They are all in the same &quot;default&quot; package.  No package declaration means to use the default unnamed package.","title":"Why is Java compiler considering 2 files that don&#39;t have the same package declaration to be in the same package?","body":"<p>They are all in the same &quot;default&quot; package.  No package declaration means to use the default unnamed package.</p>\n"}],"owner":{"account_id":21021479,"reputation":13,"user_id":16573128,"display_name":"Tthis"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":38,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1637247647,"accepted_answer_id":70021683,"answer_count":1,"score":0,"last_activity_date":1637246045,"creation_date":1637245696,"question_id":70021598,"body_markdown":"Simple question I hope\r\n\r\nConsider 2 the two following files in the same folder:\r\n\r\n**Shape.java**\r\n\r\n    public abstract interface Shape { \r\n        public abstract double area();\r\n        public abstract double perimeter();\r\n        public default String getName() {\r\n            return &quot;default&quot;;\r\n        }\r\n    }\r\n    \r\n    class Square implements Shape {\r\n        public static void visible() {\r\n            System.out.println(&quot;Visible&quot;);\r\n        }\r\n    \r\n        public double area() {\r\n            return 0.00;\r\n        }\r\n    \r\n        public double perimeter() {\r\n            return 0.00;\r\n        }\r\n    \r\n        public String getName() {\r\n            return &quot;square&quot;;\r\n        }\r\n    }\r\n    \r\n    class Triangle implements Shape {\r\n        public double area() {\r\n            return 0.00;\r\n        }\r\n    \r\n        public double perimeter() {\r\n            return 0.00;\r\n        }\r\n    \r\n        public String getName() {\r\n            return &quot;triangle&quot;;\r\n        }\r\n    }\r\n\r\n**App.Java**\r\n\r\n    public class App {\r\n    public static void main(String... args) {\r\n        Shape square = new Square();\r\n        Shape circle = new Triangle();\r\n        Square.visible();\r\n        System.out.println(square.getName());\r\n        System.out.println(circle.getName());\r\n    }\r\n}\r\n\r\nNo packages are declared, and the two shape class implementations are not listed as public packages, so why is this compiling? I would have thought that Square and Triangle classes wouldn&#39;t be visible to App. If I label them package A and package b, they can&#39;t see each other, as expected. Does the compiler consider 2 files in the same folder with no package declaration to be in the same package by default?","title":"Why is Java compiler considering 2 files that don&#39;t have the same package declaration to be in the same package?","body":"<p>Simple question I hope</p>\n<p>Consider 2 the two following files in the same folder:</p>\n<p><strong>Shape.java</strong></p>\n<pre><code>public abstract interface Shape { \n    public abstract double area();\n    public abstract double perimeter();\n    public default String getName() {\n        return &quot;default&quot;;\n    }\n}\n\nclass Square implements Shape {\n    public static void visible() {\n        System.out.println(&quot;Visible&quot;);\n    }\n\n    public double area() {\n        return 0.00;\n    }\n\n    public double perimeter() {\n        return 0.00;\n    }\n\n    public String getName() {\n        return &quot;square&quot;;\n    }\n}\n\nclass Triangle implements Shape {\n    public double area() {\n        return 0.00;\n    }\n\n    public double perimeter() {\n        return 0.00;\n    }\n\n    public String getName() {\n        return &quot;triangle&quot;;\n    }\n}\n</code></pre>\n<p><strong>App.Java</strong></p>\n<pre><code>public class App {\npublic static void main(String... args) {\n    Shape square = new Square();\n    Shape circle = new Triangle();\n    Square.visible();\n    System.out.println(square.getName());\n    System.out.println(circle.getName());\n}\n</code></pre>\n<p>}</p>\n<p>No packages are declared, and the two shape class implementations are not listed as public packages, so why is this compiling? I would have thought that Square and Triangle classes wouldn't be visible to App. If I label them package A and package b, they can't see each other, as expected. Does the compiler consider 2 files in the same folder with no package declaration to be in the same package by default?</p>\n"},{"tags":["java","concurrenthashmap"],"answers":[{"tags":[],"owner":{"display_name":"user14215102"},"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1637246040,"creation_date":1637246040,"answer_id":70021681,"question_id":70021289,"body_markdown":"Multiple threads may compete to do this (see &quot;initialization race&quot; comment).\r\n\r\nTo paraphrase the code:\r\n\r\n    while(uninitialized) {\r\n        acquire_lock(); //compareAndSwapInt...\r\n        if(uninitialized) {\r\n            do_init();\r\n        }\r\n    }\r\n\r\nThe outer check is a cheap &quot;unlocked&quot; test. The inner one is in case someone else already succeeded between `while` and `compareAndSwapInt`.","title":"ConcurrentHashMap.initTable(), why check table is null twice?","body":"<p>Multiple threads may compete to do this (see &quot;initialization race&quot; comment).</p>\n<p>To paraphrase the code:</p>\n<pre><code>while(uninitialized) {\n    acquire_lock(); //compareAndSwapInt...\n    if(uninitialized) {\n        do_init();\n    }\n}\n</code></pre>\n<p>The outer check is a cheap &quot;unlocked&quot; test. The inner one is in case someone else already succeeded between <code>while</code> and <code>compareAndSwapInt</code>.</p>\n"}],"owner":{"account_id":23381824,"reputation":75,"user_id":17448108,"display_name":"peter Char"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":129,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":70021681,"answer_count":1,"score":5,"last_activity_date":1637246040,"creation_date":1637244321,"question_id":70021289,"body_markdown":"I&#39;m learning the java source code, when i reading the ConcurrentHashMap source code, i&#39;m confused with the initTable() method, why check ```(tab = table) == null || tab.length == 0``` twice, first in the ```while()```, then in the ```if()```. I can&#39;t imagine in what situation need the second check. \r\n\r\nI think maybe it&#39;s because the JVM reorder the code, put ```sizeCtl = sc;``` in front of ```Node&lt;K,V&gt;[] nt = (Node&lt;K,V&gt;[])new Node&lt;?,?&gt;[n];```. It&#39;s just my guess, I don&#39;t know is it right. \r\n\r\nCan some one explain it, thanks a lot.\r\n```\r\n private final Node&lt;K,V&gt;[] initTable() {\r\n        Node&lt;K,V&gt;[] tab; int sc;\r\n        while ((tab = table) == null || tab.length == 0) {\r\n            if ((sc = sizeCtl) &lt; 0)\r\n                Thread.yield(); // lost initialization race; just spin\r\n            else if (U.compareAndSwapInt(this, SIZECTL, sc, -1)) {\r\n                try {\r\n                    if ((tab = table) == null || tab.length == 0) {\r\n                        int n = (sc &gt; 0) ? sc : DEFAULT_CAPACITY;\r\n                        @SuppressWarnings(&quot;unchecked&quot;)\r\n                        Node&lt;K,V&gt;[] nt = (Node&lt;K,V&gt;[])new Node&lt;?,?&gt;[n];\r\n                        table = tab = nt;\r\n                        sc = n - (n &gt;&gt;&gt; 2);\r\n                    }\r\n                } finally {\r\n                    sizeCtl = sc;\r\n                }\r\n                break;\r\n            }\r\n        }\r\n        return tab;\r\n    }\r\n```","title":"ConcurrentHashMap.initTable(), why check table is null twice?","body":"<p>I'm learning the java source code, when i reading the ConcurrentHashMap source code, i'm confused with the initTable() method, why check <code>(tab = table) == null || tab.length == 0</code> twice, first in the <code>while()</code>, then in the <code>if()</code>. I can't imagine in what situation need the second check.</p>\n<p>I think maybe it's because the JVM reorder the code, put <code>sizeCtl = sc;</code> in front of <code>Node&lt;K,V&gt;[] nt = (Node&lt;K,V&gt;[])new Node&lt;?,?&gt;[n];</code>. It's just my guess, I don't know is it right.</p>\n<p>Can some one explain it, thanks a lot.</p>\n<pre><code> private final Node&lt;K,V&gt;[] initTable() {\n        Node&lt;K,V&gt;[] tab; int sc;\n        while ((tab = table) == null || tab.length == 0) {\n            if ((sc = sizeCtl) &lt; 0)\n                Thread.yield(); // lost initialization race; just spin\n            else if (U.compareAndSwapInt(this, SIZECTL, sc, -1)) {\n                try {\n                    if ((tab = table) == null || tab.length == 0) {\n                        int n = (sc &gt; 0) ? sc : DEFAULT_CAPACITY;\n                        @SuppressWarnings(&quot;unchecked&quot;)\n                        Node&lt;K,V&gt;[] nt = (Node&lt;K,V&gt;[])new Node&lt;?,?&gt;[n];\n                        table = tab = nt;\n                        sc = n - (n &gt;&gt;&gt; 2);\n                    }\n                } finally {\n                    sizeCtl = sc;\n                }\n                break;\n            }\n        }\n        return tab;\n    }\n</code></pre>\n"},{"tags":["java","junit","mockito","mockstatic","mockito-inline"],"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":2,"creation_date":1637098363,"post_id":69996168,"comment_id":123734433,"body_markdown":"Why do we need to mock the static method at all? From the looks of it, the method is never called in the test presented.","body":"Why do we need to mock the static method at all? From the looks of it, the method is never called in the test presented."},{"owner":{"account_id":19268042,"reputation":21,"user_id":14082609,"display_name":"Dariell Bowo"},"score":0,"creation_date":1637159391,"post_id":69996168,"comment_id":123751305,"body_markdown":"my bad, the uri is supposed to be supplied by buildUri","body":"my bad, the uri is supposed to be supplied by buildUri"},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":1,"creation_date":1637169863,"post_id":69996168,"comment_id":123756360,"body_markdown":"Again the question: Why do you want to mock this call? Your test would pass without it.","body":"Again the question: Why do you want to mock this call? Your test would pass without it."},{"owner":{"account_id":19268042,"reputation":21,"user_id":14082609,"display_name":"Dariell Bowo"},"score":0,"creation_date":1637246019,"post_id":69996168,"comment_id":123779162,"body_markdown":"Alright, I added a clarification of my issue.","body":"Alright, I added a clarification of my issue."},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":1,"creation_date":1637253406,"post_id":69996168,"comment_id":123782605,"body_markdown":"Are you using maven? If so, we can [set system properties through the `maven-surefire-plugin`](http://maven.apache.org/surefire/maven-surefire-plugin/examples/system-properties.html), i.e. no mocking needed.","body":"Are you using maven? If so, we can <a href=\"http://maven.apache.org/surefire/maven-surefire-plugin/examples/system-properties.html\" rel=\"nofollow noreferrer\">set system properties through the <code>maven-surefire-plugin</code></a>, i.e. no mocking needed."}],"owner":{"account_id":19268042,"reputation":21,"user_id":14082609,"display_name":"Dariell Bowo"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":923,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1637245957,"creation_date":1637097686,"question_id":69996168,"body_markdown":"I&#39;m using Mockito 3.6 to take advantage of their mockStatic method. I am having issue when mocking a class that is also the main class to be used for testing.\r\n\r\n```\r\npublic class MainClass{\r\n    private HttpClient httpClient;\r\n\r\n    public String sendRequest(){\r\n        HttpRequest request = HttpRequest.newBuilder()\r\n            .uri(buildUri(System.getEnv(&quot;host&quot;), System.getEnv(&quot;port&quot;)))\r\n            .GET().build()\r\n        HttpResponse&lt;String&gt; response = httpClient.send(request, ofString());\r\n        return response.body\r\n    }\r\n\r\n    public static URI buildURI(String host, String path) throws URISyntaxException {\r\n        return new URI(&quot;http&quot;, host, path, null);\r\n    }\r\n}\r\n```\r\n\r\nThis is my test class\r\n```\r\n@ExtendWith(MockitoExtension.class)\r\npublic class MainClassTest {\r\n    @Spy\r\n    private ObjectMapper mapper = new ObjectMapper();\r\n    @Mock\r\n    private HttpClient httpClientMock;\r\n    @InjectMocks\r\n    private MainClass mainClass;\r\n\r\n    private MockedStatic&lt;MainClass&gt; systemMock;\r\n\r\n    @BeforeEach\r\n    void setUp() {\r\n        systemMock = mockStatic(MainClass.class);\r\n    }\r\n\r\n    @AfterEach\r\n    void tearDown() {\r\n        systemMock.close();\r\n    }\r\n\r\n    @Test\r\n    void sendRequest_successful(){\r\n        HttpResponse response = mock(HttpResponse.class);\r\n        when(response.body()).thenReturn(&quot;Hello, world!&quot;);\r\n        when(httpClientMock.send(any(HttpRequest.class), any())).thenReturn(response);\r\n        systemMock.when(() -&gt; MainClass.buildURI(anyString(), anyString()))\r\n                .thenReturn(URI.create(&quot;http://host.com/path&quot;));\r\n\r\n        assertEquals(&quot;Hello, world!&quot;, mainClass.sendRequest());\r\n    }\r\n}\r\n```\r\n\r\nSince the ```MainClass``` is being used to be mockStatic and injectMock, when calling ```buildURI```, it always return null, which is not acceptable when creating HttpRequest.\r\n\r\nEdit:\r\nTo clarify my issue, I&#39;m getting the host and port from environment variable, which will be null when running this test, and calling ```new URI()``` does not allow null values.\r\n","title":"Mockito mockStatic on InjectMocks Object","body":"<p>I'm using Mockito 3.6 to take advantage of their mockStatic method. I am having issue when mocking a class that is also the main class to be used for testing.</p>\n<pre><code>public class MainClass{\n    private HttpClient httpClient;\n\n    public String sendRequest(){\n        HttpRequest request = HttpRequest.newBuilder()\n            .uri(buildUri(System.getEnv(&quot;host&quot;), System.getEnv(&quot;port&quot;)))\n            .GET().build()\n        HttpResponse&lt;String&gt; response = httpClient.send(request, ofString());\n        return response.body\n    }\n\n    public static URI buildURI(String host, String path) throws URISyntaxException {\n        return new URI(&quot;http&quot;, host, path, null);\n    }\n}\n</code></pre>\n<p>This is my test class</p>\n<pre><code>@ExtendWith(MockitoExtension.class)\npublic class MainClassTest {\n    @Spy\n    private ObjectMapper mapper = new ObjectMapper();\n    @Mock\n    private HttpClient httpClientMock;\n    @InjectMocks\n    private MainClass mainClass;\n\n    private MockedStatic&lt;MainClass&gt; systemMock;\n\n    @BeforeEach\n    void setUp() {\n        systemMock = mockStatic(MainClass.class);\n    }\n\n    @AfterEach\n    void tearDown() {\n        systemMock.close();\n    }\n\n    @Test\n    void sendRequest_successful(){\n        HttpResponse response = mock(HttpResponse.class);\n        when(response.body()).thenReturn(&quot;Hello, world!&quot;);\n        when(httpClientMock.send(any(HttpRequest.class), any())).thenReturn(response);\n        systemMock.when(() -&gt; MainClass.buildURI(anyString(), anyString()))\n                .thenReturn(URI.create(&quot;http://host.com/path&quot;));\n\n        assertEquals(&quot;Hello, world!&quot;, mainClass.sendRequest());\n    }\n}\n</code></pre>\n<p>Since the <code>MainClass</code> is being used to be mockStatic and injectMock, when calling <code>buildURI</code>, it always return null, which is not acceptable when creating HttpRequest.</p>\n<p>Edit:\nTo clarify my issue, I'm getting the host and port from environment variable, which will be null when running this test, and calling <code>new URI()</code> does not allow null values.</p>\n"},{"tags":["java","import","apache-commons","fifo","netbeans-12"],"comments":[{"owner":{"account_id":71985,"reputation":7903,"user_id":208013,"display_name":"Mirek Pluta"},"score":0,"creation_date":1637245637,"post_id":70021462,"comment_id":123778960,"body_markdown":"You can convert your project into maven project (there should be an option in the context menu when you click on the project in netbeans) and then add apache collections as maven dependency.","body":"You can convert your project into maven project (there should be an option in the context menu when you click on the project in netbeans) and then add apache collections as maven dependency."}],"answers":[{"tags":[],"owner":{"account_id":1193459,"reputation":3979,"user_id":1165724,"display_name":"swpalmer"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1637245913,"creation_date":1637245913,"answer_id":70021650,"question_id":70021462,"body_markdown":"If your NetBeans project is Ant based you will need to add the jar you have downloaded as a Library.  In your project there is a Libraries folder that you can right-click and select Add Library.\r\n\r\n\r\nIf you are using Maven, you should add the dependency to your pom.xml file following Maven practices.\r\nhttps://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html\r\n\r\nIf you are using Gradle (recommended) you should add a dependency using Gradle practices to the build.gradle file.\r\nhttps://docs.gradle.org/current/userguide/dependency_management_for_java_projects.html#header\r\n\r\n","title":"How to install/use apache commons collection 4.4","body":"<p>If your NetBeans project is Ant based you will need to add the jar you have downloaded as a Library.  In your project there is a Libraries folder that you can right-click and select Add Library.</p>\n<p>If you are using Maven, you should add the dependency to your pom.xml file following Maven practices.\n<a href=\"https://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html\" rel=\"nofollow noreferrer\">https://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html</a></p>\n<p>If you are using Gradle (recommended) you should add a dependency using Gradle practices to the build.gradle file.\n<a href=\"https://docs.gradle.org/current/userguide/dependency_management_for_java_projects.html#header\" rel=\"nofollow noreferrer\">https://docs.gradle.org/current/userguide/dependency_management_for_java_projects.html#header</a></p>\n"}],"owner":{"account_id":23382081,"reputation":59,"user_id":17448226,"display_name":"sukaretto"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1732,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70021650,"answer_count":1,"score":0,"last_activity_date":1637245913,"creation_date":1637245119,"question_id":70021462,"body_markdown":"This is my first time using stackoverflow.\r\n\r\nAnyway, I am trying to use the apache commons collections 4.4 that I&#39;ve downloaded here\r\nhttps://commons.apache.org/proper/commons-collections/download_collections.cgi\r\n\r\nThis is the code that I am trying to run for you reference\r\n\r\n    import java.util.Queue;\r\n    import org.apache.commons.collections4.queue.CircularFifoQueue;\r\nI am having trouble with my code as I need CircularFifoQueue to run my program. I&#39;m using netbeans ide as of the moment and I would appreciate if you guys could share a solution that does not involve switching ide. Thank you!\r\n\r\n","title":"How to install/use apache commons collection 4.4","body":"<p>This is my first time using stackoverflow.</p>\n<p>Anyway, I am trying to use the apache commons collections 4.4 that I've downloaded here\n<a href=\"https://commons.apache.org/proper/commons-collections/download_collections.cgi\" rel=\"nofollow noreferrer\">https://commons.apache.org/proper/commons-collections/download_collections.cgi</a></p>\n<p>This is the code that I am trying to run for you reference</p>\n<pre><code>import java.util.Queue;\nimport org.apache.commons.collections4.queue.CircularFifoQueue;\n</code></pre>\n<p>I am having trouble with my code as I need CircularFifoQueue to run my program. I'm using netbeans ide as of the moment and I would appreciate if you guys could share a solution that does not involve switching ide. Thank you!</p>\n"},{"tags":["java","shell","unit-testing","groovy","junit"],"comments":[{"owner":{"account_id":22194,"reputation":18092,"user_id":54506,"accept_rate":78,"display_name":"Jayan"},"score":1,"creation_date":1637907596,"post_id":70021504,"comment_id":123953084,"body_markdown":"short answer you cannot.  Try converting your shell script into &quot;jgit&quot; code.  That will help to test better (even then you need mocking ) or a dummy git repo for testing","body":"short answer you cannot.  Try converting your shell script into &quot;jgit&quot; code.  That will help to test better (even then you need mocking ) or a dummy git repo for testing"}],"owner":{"account_id":12983088,"reputation":61,"user_id":9384802,"display_name":"Balaji Tendster"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":243,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1637245326,"creation_date":1637245326,"question_id":70021504,"body_markdown":"I have a groovy method which has shell script code which executes inside a groovy class. I need to write a unit test to validate the method. I really have no idea on how to write unit test for this scenario.\r\n\r\n@Override\r\n\r\n    void addTag(String tagName){\r\n        steps.sh(script:&#39;&#39;&#39;\r\n        lastTag=$(git tag | grep &quot;^[0-9].^*&quot; | tail -1)\r\n        echo &quot;lasttag: $lastTag&quot;\r\n        if [[ $lastTag == &quot;&quot; ]]\r\n        then\r\n          changeLog=$(git log origin/$BRANCH_NAME --pretty=format:&quot;%h - %ce(%cn), %ar : %s&quot;)\r\n          git tag -a &#39;&#39;&#39; + tagName + &#39;&#39;&#39; -m &quot;Changelog&quot; -m &quot;$changeLog&quot;\r\n        else\r\n          echo &quot;Previous Version: $lastTag&quot;\r\n          changeLog=$(git log origin/$BRANCH_NAME...refs/tags/$lastTag --pretty=format:&quot;%h - %ce(%cn), %ar : %s&quot;)\r\n          git tag -a &#39;&#39;&#39; + tagName + &#39;&#39;&#39; -m &quot;Changelog&quot; -m &quot;$changeLog&quot;\r\n        fi&#39;&#39;&#39;, returnStatus: true)\r\n    }\r\n\r\nCan anyone provide some idea ?","title":"How to write unit test for shell script present in groovy","body":"<p>I have a groovy method which has shell script code which executes inside a groovy class. I need to write a unit test to validate the method. I really have no idea on how to write unit test for this scenario.</p>\n<p>@Override</p>\n<pre><code>void addTag(String tagName){\n    steps.sh(script:'''\n    lastTag=$(git tag | grep &quot;^[0-9].^*&quot; | tail -1)\n    echo &quot;lasttag: $lastTag&quot;\n    if [[ $lastTag == &quot;&quot; ]]\n    then\n      changeLog=$(git log origin/$BRANCH_NAME --pretty=format:&quot;%h - %ce(%cn), %ar : %s&quot;)\n      git tag -a ''' + tagName + ''' -m &quot;Changelog&quot; -m &quot;$changeLog&quot;\n    else\n      echo &quot;Previous Version: $lastTag&quot;\n      changeLog=$(git log origin/$BRANCH_NAME...refs/tags/$lastTag --pretty=format:&quot;%h - %ce(%cn), %ar : %s&quot;)\n      git tag -a ''' + tagName + ''' -m &quot;Changelog&quot; -m &quot;$changeLog&quot;\n    fi''', returnStatus: true)\n}\n</code></pre>\n<p>Can anyone provide some idea ?</p>\n"},{"tags":["java","gradle","jdbc"],"comments":[{"owner":{"account_id":213468,"reputation":103486,"user_id":466862,"display_name":"Mark Rotteveel"},"score":2,"creation_date":1637245031,"post_id":70020901,"comment_id":123778674,"body_markdown":"_&quot;it simply doesn&#39;t work.&quot;_ it doesn&#39;t work how? What error do you get? You should remove `compile &#39;com.oracle:ojdbc8:21.1.0.0&#39;` entirely, those are the wrong coordinate, and `compile` is no longer available in recent Gradle versions as it has been replaced by `implementation`, which explains why you get a _&quot;Could not find method compile()&quot;_.","body":"<i>&quot;it simply doesn&#39;t work.&quot;</i> it doesn&#39;t work how? What error do you get? You should remove <code>compile &#39;com.oracle:ojdbc8:21.1.0.0&#39;</code> entirely, those are the wrong coordinate, and <code>compile</code> is no longer available in recent Gradle versions as it has been replaced by <code>implementation</code>, which explains why you get a <i>&quot;Could not find method compile()&quot;</i>."},{"owner":{"account_id":19208526,"reputation":1,"user_id":17447814,"display_name":"noone"},"score":0,"creation_date":1637254226,"post_id":70020901,"comment_id":123782992,"body_markdown":"@MarkRotteveel, even if i remove compile, i still get this: ```Caused by: org.hibernate.boot.registry.classloading.spi.ClassLoadingException: Unable to load class [com.mysql.cj.jdbc.Driver] ```\nSo, it raises in next test i have:\n```@Test\npublic void shouldConnectToDB(){\n        SessionFactory sessions = new Configuration().configure().buildSessionFactory();\n        Session session = sessions.openSession();\n    }```","body":"@MarkRotteveel, even if i remove compile, i still get this: <code>Caused by: org.hibernate.boot.registry.classloading.spi.ClassLoadingExc&zwnj;&#8203;eption: Unable to load class [com.mysql.cj.jdbc.Driver] </code> So, it raises in next test i have: <code>@Test public void shouldConnectToDB(){         SessionFactory sessions = new Configuration().configure().buildSessionFactory();         Session session = sessions.openSession();     }</code>"},{"owner":{"account_id":213468,"reputation":103486,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1637254465,"post_id":70020901,"comment_id":123783098,"body_markdown":"Why are you trying to load the MySQL Connector/J class `com.mysql.cj.jdbc.Driver` when you have added the Oracle JDBC Driver? Which database system are you using, Oracle or MySQL? (The fact that the company Oracle also owns MySQL, doesn&#39;t mean that you can use the Oracle JDBC driver (which is for the Oracle DBMS) to connect to MySQL). If you&#39;re using MySQL, then add MySQL Connector/J (`implementation &#39;mysql:mysql-connector-java:8.0.27&#39;`), or if you&#39;re using Oracle, specify the Oracle JDBC driver class (`oracle.jdbc.OracleDriver`).","body":"Why are you trying to load the MySQL Connector/J class <code>com.mysql.cj.jdbc.Driver</code> when you have added the Oracle JDBC Driver? Which database system are you using, Oracle or MySQL? (The fact that the company Oracle also owns MySQL, doesn&#39;t mean that you can use the Oracle JDBC driver (which is for the Oracle DBMS) to connect to MySQL). If you&#39;re using MySQL, then add MySQL Connector/J (<code>implementation &#39;mysql:mysql-connector-java:8.0.27&#39;</code>), or if you&#39;re using Oracle, specify the Oracle JDBC driver class (<code>oracle.jdbc.OracleDriver</code>)."},{"owner":{"account_id":19208526,"reputation":1,"user_id":17447814,"display_name":"noone"},"score":0,"creation_date":1637255148,"post_id":70020901,"comment_id":123783391,"body_markdown":"@MarkRottevee, my endless gratitude. it worked!","body":"@MarkRottevee, my endless gratitude. it worked!"}],"owner":{"account_id":19208526,"reputation":1,"user_id":17447814,"display_name":"noone"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":844,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1637245285,"creation_date":1637242861,"question_id":70020901,"body_markdown":"I&#39;m new to Gradle so I have awfully big problems and one of them is about the Oracle JDBC driver. I just want to get connection to DB and I already used a JDBC driver in my previous project, but that did not use Gradle. Now, I see that I have to show dependency on driver, but this just didn&#39;t work. I already used all of the advice I found:\r\n \r\n- I tried to add connector.jar to VM options, \r\n- to create dependency with `implementation(&quot;com.oracle.database.jdbc:ojdbc8:21.1.0.0&quot;)`, but it simply doesn&#39;t work. \r\n- After I use `compile &#39;com.oracle:ojdbc8:21.1.0.0&#39;`, I got `Could not find method compile() for arguments [com.oracle:ojdbc8:21.1.0.0]` and that&#39;s just killing me.\r\n- I also tried to use local Maven repository and I have downloaded .jar, but it doesn&#39;t work either. \r\n- I also just tried to add this lib dependency in IntelliJ, using _File-&gt;Project Structure-&gt;+_ and creating ojdbc8 class with path to this file directly.\r\n\r\nFull version of my build.gradle file:\r\n\r\n    plugins {\r\n        // Apply the application plugin to add support for building a CLI application in \r\n        Java.id &#39;application&#39;\r\n    }\r\n    repositories {\r\n        // Use Maven Central for resolving dependencies.\r\n        mavenCentral()\r\n        mavenLocal()\r\n    }\r\n    dependencies {\r\n        implementation(&quot;com.oracle.database.jdbc:ojdbc8:21.1.0.0&quot;)\r\n        compile &#39;com.oracle:ojdbc8:21.1.0.0&#39;\r\n        // Use JUnit test framework.\r\n        testImplementation &#39;junit:junit:4.13.2&#39;\r\n        implementation &#39;com.h2database:h2:1.4.199&#39;\r\n        implementation &#39;org.hibernate:hibernate-core:5.4.2.Final&#39;\r\n        // This dependency is used by the application.\r\n        implementation &#39;com.google.guava:guava:30.1.1-jre&#39;\r\n    \r\n    }\r\n    application {\r\n        mainClass = &#39;model.App&#39;\r\n    }\r\n\r\nI&#39;d like to use this JDBC driver in one class, but I just can&#39;t. Can you help me, please?  \r\n\r\n","title":"How to use ojdbc with Gradle","body":"<p>I'm new to Gradle so I have awfully big problems and one of them is about the Oracle JDBC driver. I just want to get connection to DB and I already used a JDBC driver in my previous project, but that did not use Gradle. Now, I see that I have to show dependency on driver, but this just didn't work. I already used all of the advice I found:</p>\n<ul>\n<li>I tried to add connector.jar to VM options,</li>\n<li>to create dependency with <code>implementation(&quot;com.oracle.database.jdbc:ojdbc8:21.1.0.0&quot;)</code>, but it simply doesn't work.</li>\n<li>After I use <code>compile 'com.oracle:ojdbc8:21.1.0.0'</code>, I got <code>Could not find method compile() for arguments [com.oracle:ojdbc8:21.1.0.0]</code> and that's just killing me.</li>\n<li>I also tried to use local Maven repository and I have downloaded .jar, but it doesn't work either.</li>\n<li>I also just tried to add this lib dependency in IntelliJ, using <em>File-&gt;Project Structure-&gt;+</em> and creating ojdbc8 class with path to this file directly.</li>\n</ul>\n<p>Full version of my build.gradle file:</p>\n<pre><code>plugins {\n    // Apply the application plugin to add support for building a CLI application in \n    Java.id 'application'\n}\nrepositories {\n    // Use Maven Central for resolving dependencies.\n    mavenCentral()\n    mavenLocal()\n}\ndependencies {\n    implementation(&quot;com.oracle.database.jdbc:ojdbc8:21.1.0.0&quot;)\n    compile 'com.oracle:ojdbc8:21.1.0.0'\n    // Use JUnit test framework.\n    testImplementation 'junit:junit:4.13.2'\n    implementation 'com.h2database:h2:1.4.199'\n    implementation 'org.hibernate:hibernate-core:5.4.2.Final'\n    // This dependency is used by the application.\n    implementation 'com.google.guava:guava:30.1.1-jre'\n\n}\napplication {\n    mainClass = 'model.App'\n}\n</code></pre>\n<p>I'd like to use this JDBC driver in one class, but I just can't. Can you help me, please?</p>\n"},{"tags":["java","spring","struts"],"comments":[{"owner":{"account_id":70258,"reputation":590444,"user_id":203907,"accept_rate":81,"display_name":"Bozho"},"score":1,"creation_date":1277189879,"post_id":3090907,"comment_id":3168618,"body_markdown":"duplicate ? http://stackoverflow.com/questions/2294798/payment-gateway-for-java","body":"duplicate ? <a href=\"http://stackoverflow.com/questions/2294798/payment-gateway-for-java\" title=\"payment gateway for java\">stackoverflow.com/questions/2294798/payment-gateway-for-java</a>"},{"owner":{"account_id":36858,"reputation":113744,"user_id":105224,"accept_rate":73,"display_name":"Andreas Dolk"},"score":31,"creation_date":1277189927,"post_id":3090907,"comment_id":3168627,"body_markdown":"Yesterday you wanted to develop a browser (http://stackoverflow.com/questions/3084461/java-browser-development-closed), today it&#39;s a payment gateway. What&#39;s next, a Java based OS...?","body":"Yesterday you wanted to develop a browser (<a href=\"http://stackoverflow.com/questions/3084461/java-browser-development-closed\" title=\"java browser development closed\">stackoverflow.com/questions/3084461/&hellip;</a>), today it&#39;s a payment gateway. What&#39;s next, a Java based OS...?"},{"owner":{"account_id":113908,"reputation":3110,"user_id":299787,"display_name":"Redlab"},"score":1,"creation_date":1277190067,"post_id":3090907,"comment_id":3168646,"body_markdown":"The &#39;third party&#39; probably has some kind of public api that you can use to communicate with them. Check out the development resources of the 3rd party payment service you want to use","body":"The &#39;third party&#39; probably has some kind of public api that you can use to communicate with them. Check out the development resources of the 3rd party payment service you want to use"},{"owner":{"account_id":13290045,"reputation":164,"user_id":9594794,"display_name":"prof_FL"},"score":0,"creation_date":1637245564,"post_id":3090907,"comment_id":123778920,"body_markdown":"As different third party havs different api to communicate. normally they will give you a key to access these apis, all your need to do is to protect the key from misused. To endusers, you can make all these apis transparent to them, while to your program parties, you do need some auth","body":"As different third party havs different api to communicate. normally they will give you a key to access these apis, all your need to do is to protect the key from misused. To endusers, you can make all these apis transparent to them, while to your program parties, you do need some auth"}],"answers":[{"tags":[],"owner":{"account_id":95424,"reputation":37497,"user_id":259900,"accept_rate":96,"display_name":"Kevin Sylvestre"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1277190510,"creation_date":1277190510,"answer_id":3090977,"question_id":3090907,"body_markdown":"The best solution is to select a payment gateway that supports your programming language / framework. The selection of your gateway will also depend greatly on your location and currency support requirements (as well as service fees). Typically data will be sent to the gateways in XML or JSON over SSL connections. Some sample gateways include [BrainTree][1], [PayPal][2] or [BeanStream][3]. If you live in the United States I would recommend **BrainTree** because they offer a Java API (found [here][4]). Otherwise, just read through the documentation and the rest should be easy.\r\n\r\n\r\n  [1]: http://www.braintreepaymentsolutions.com/\r\n  [2]: https://www.paypal.com/cgi-bin/webscr?cmd=_wp-pro-overview-outside\r\n  [3]: http://www.beanstream.com/public/index.asp\r\n  [4]: http://www.braintreepaymentsolutions.com/gateway/java","title":"How to create payment gateway for an online transaction?","body":"<p>The best solution is to select a payment gateway that supports your programming language / framework. The selection of your gateway will also depend greatly on your location and currency support requirements (as well as service fees). Typically data will be sent to the gateways in XML or JSON over SSL connections. Some sample gateways include <a href=\"http://www.braintreepaymentsolutions.com/\" rel=\"noreferrer\">BrainTree</a>, <a href=\"https://www.paypal.com/cgi-bin/webscr?cmd=_wp-pro-overview-outside\" rel=\"noreferrer\">PayPal</a> or <a href=\"http://www.beanstream.com/public/index.asp\" rel=\"noreferrer\">BeanStream</a>. If you live in the United States I would recommend <strong>BrainTree</strong> because they offer a Java API (found <a href=\"http://www.braintreepaymentsolutions.com/gateway/java\" rel=\"noreferrer\">here</a>). Otherwise, just read through the documentation and the rest should be easy.</p>\n"},{"tags":[],"owner":{"account_id":64055,"reputation":454,"user_id":189296,"display_name":"Amit Goyal"},"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1277196728,"creation_date":1277196728,"answer_id":3091608,"question_id":3090907,"body_markdown":"Developing your own payment gateway is slightly complicated and comes with lots of compliance issues. So, assume for the time being this is not an option.\r\nNow, there are various payment gateways available in market you can choose the one which fits your requirements. The parameter of appropriate selection could be transaction currency, country, transaction fee, withdraw charges, fraud detection and mitigation system, charge back transaction charges, ease of integration etc. \r\nAbout integrating a gateway, there are two types of integration possible\r\n\r\n* Form based\r\n* API based\r\n\r\n\r\nThe need you mentioned fall under the category of API based gateway.\r\n\r\n**Form based gateway** is the one which, in which user is redirected to the gateway provider site and there user enters credit card and other details, once payment confirmed gateway provider notifies back through various means like HTTP call back etc.\r\n\r\n**API based** is the one in which you display your own form at your website. Gateway provider provides an integration API kit to make a call to the gateway. Capture all the details like cc details etc at your end and pass all the details to the gateway provider by calling the API integrated.  \r\n\r\n\r\nAs far as efforts are concern, form based gateways are easier to integrate. I would suggest you to go ahead with form based gateways. This way you dont need to put much effort of programming.\r\n\r\n\r\nIf you are using Ruby, probably check http://www.activemerchant.org/\r\n\r\nList of pre-integrated gateways available in active merchant: http://activemerchant.rubyforge.org/\r\n\r\nHope this would help!!!\r\n\r\n","title":"How to create payment gateway for an online transaction?","body":"<p>Developing your own payment gateway is slightly complicated and comes with lots of compliance issues. So, assume for the time being this is not an option.\nNow, there are various payment gateways available in market you can choose the one which fits your requirements. The parameter of appropriate selection could be transaction currency, country, transaction fee, withdraw charges, fraud detection and mitigation system, charge back transaction charges, ease of integration etc. \nAbout integrating a gateway, there are two types of integration possible</p>\n\n<ul>\n<li>Form based</li>\n<li>API based</li>\n</ul>\n\n<p>The need you mentioned fall under the category of API based gateway.</p>\n\n<p><strong>Form based gateway</strong> is the one which, in which user is redirected to the gateway provider site and there user enters credit card and other details, once payment confirmed gateway provider notifies back through various means like HTTP call back etc.</p>\n\n<p><strong>API based</strong> is the one in which you display your own form at your website. Gateway provider provides an integration API kit to make a call to the gateway. Capture all the details like cc details etc at your end and pass all the details to the gateway provider by calling the API integrated.  </p>\n\n<p>As far as efforts are concern, form based gateways are easier to integrate. I would suggest you to go ahead with form based gateways. This way you dont need to put much effort of programming.</p>\n\n<p>If you are using Ruby, probably check <a href=\"http://www.activemerchant.org/\" rel=\"noreferrer\">http://www.activemerchant.org/</a></p>\n\n<p>List of pre-integrated gateways available in active merchant: <a href=\"http://activemerchant.rubyforge.org/\" rel=\"noreferrer\">http://activemerchant.rubyforge.org/</a></p>\n\n<p>Hope this would help!!!</p>\n"}],"owner":{"account_id":624124,"reputation":127,"user_id":370172,"display_name":"Lokesh"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":66387,"favorite_count":0,"down_vote_count":1,"up_vote_count":13,"closed_date":1637248231,"answer_count":2,"score":12,"last_activity_date":1637245177,"creation_date":1277189757,"question_id":3090907,"body_markdown":"In my web application there is an online transaction system for online reservation. I have no idea about how to implement this, i.e when an end user wants to do reservation, a form has to open showing different banks, by selecting bank, user will be allowed to enter his/her card credentials and I have to send this to third party payment gateway vendor and has to receive information from that party regarding the transaction status. \r\n\r\nHow can we send and receive data from third party or is their is any way that we could eliminate the third party from transaction ?\r\n\r\nPlease help ! Thanks in advance.\r\n","title":"How to create payment gateway for an online transaction?","body":"<p>In my web application there is an online transaction system for online reservation. I have no idea about how to implement this, i.e when an end user wants to do reservation, a form has to open showing different banks, by selecting bank, user will be allowed to enter his/her card credentials and I have to send this to third party payment gateway vendor and has to receive information from that party regarding the transaction status. </p>\n\n<p>How can we send and receive data from third party or is their is any way that we could eliminate the third party from transaction ?</p>\n\n<p>Please help ! Thanks in advance.</p>\n"},{"tags":["java","intellij-idea","jar"],"comments":[{"owner":{"account_id":401843,"reputation":89788,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1637240132,"post_id":70020192,"comment_id":123776401,"body_markdown":"Show what you tried so far, show what the file structure you desire is going to look like (jar A here, jar B here, and inside the jar these contents - something like that). your question as is, is too vague.","body":"Show what you tried so far, show what the file structure you desire is going to look like (jar A here, jar B here, and inside the jar these contents - something like that). your question as is, is too vague."},{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":1,"creation_date":1637240334,"post_id":70020192,"comment_id":123776471,"body_markdown":"Usually all the classes of a given project are *inside* the jar and don&#39;t tend to lie randomly in directories. Can you explain why you want to deviate from that norm? It&#39;s not impossible, but it&#39;s highly unlikely and there&#39;s a pretty good chance that there are better solutions to what you&#39;re trying to do. This could be an [XY problem](https://xyproblem.info). Also by &quot;files&quot; do you only mean classes or are you talking about other resources (such as images, property files, ...)?","body":"Usually all the classes of a given project are <i>inside</i> the jar and don&#39;t tend to lie randomly in directories. Can you explain why you want to deviate from that norm? It&#39;s not impossible, but it&#39;s highly unlikely and there&#39;s a pretty good chance that there are better solutions to what you&#39;re trying to do. This could be an <a href=\"https://xyproblem.info\" rel=\"nofollow noreferrer\">XY problem</a>. Also by &quot;files&quot; do you only mean classes or are you talking about other resources (such as images, property files, ...)?"},{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":1,"creation_date":1637245835,"post_id":70020192,"comment_id":123779072,"body_markdown":"Regarding the update: `abc.java` is not a class file. That&#39;s a Java source file. `abc.class` would be a class file. Loading a class file is relatively easy (create a new `URLClassLoader` and use that to load the class), but compiling a `.java` file first adds an extra step. Also note that if the `.class` file belongs to a package, then it might become more complicated, as the classloader will expect the folder hierarchy to match the package structure.","body":"Regarding the update: <code>abc.java</code> is not a class file. That&#39;s a Java source file. <code>abc.class</code> would be a class file. Loading a class file is relatively easy (create a new <code>URLClassLoader</code> and use that to load the class), but compiling a <code>.java</code> file first adds an extra step. Also note that if the <code>.class</code> file belongs to a package, then it might become more complicated, as the classloader will expect the folder hierarchy to match the package structure."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1637248710,"post_id":70020192,"comment_id":123780461,"body_markdown":"While there are some ways to determine the location of the .jar file from which a program is running, none of them are completely reliable.  If an application wants to use dynamically available external classes,  the [Service Provider](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/ServiceLoader.html) architecture is usually the best way to do it.","body":"While there are some ways to determine the location of the .jar file from which a program is running, none of them are completely reliable.  If an application wants to use dynamically available external classes,  the <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/ServiceLoader.html\" rel=\"nofollow noreferrer\">Service Provider</a> architecture is usually the best way to do it."}],"owner":{"account_id":13845349,"reputation":45,"user_id":14476503,"display_name":"David"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":65,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1637244996,"creation_date":1637239920,"question_id":70020192,"body_markdown":"I have a IntelliJ project that can run methods from different classes inside the project folder.\r\n\r\n\r\nMy goal is to create a jar file of my project, so that jar file can interact with different classes that are located in the same folder as jar. \r\n\r\nWhen I create a jar file by default it can&#39;t find files in the same folder.\r\nI can&#39;t add files I need direct to jar.\r\n\r\n\r\nHow can I do it with IntelliJ?\r\n\r\nUpdate.\r\nMy program is created to run specific methods in a given class-file(String name is given by user via UI) and then show return value to the user via UI.\r\n\r\nHow it work now:\r\n\r\nI have a folderA with a source files of a program and class-file `testfile.java` to test the program. \r\nI can run a program via IntelliJ, enter `testfile` via UI and the program will run some methods of testfile-class doing everything it should.\r\n\r\nHow I want it to work:\r\n\r\nProgram is packed into jar `program.jar`. User moves `program.jar` to `folderB` that contains `abc.java`.\r\nUser runs `program.jar`, enters `abc` and program stuff with `abc.java`","title":"IntelliJ. Jar creation. Use files from current path of jar","body":"<p>I have a IntelliJ project that can run methods from different classes inside the project folder.</p>\n<p>My goal is to create a jar file of my project, so that jar file can interact with different classes that are located in the same folder as jar.</p>\n<p>When I create a jar file by default it can't find files in the same folder.\nI can't add files I need direct to jar.</p>\n<p>How can I do it with IntelliJ?</p>\n<p>Update.\nMy program is created to run specific methods in a given class-file(String name is given by user via UI) and then show return value to the user via UI.</p>\n<p>How it work now:</p>\n<p>I have a folderA with a source files of a program and class-file <code>testfile.java</code> to test the program.\nI can run a program via IntelliJ, enter <code>testfile</code> via UI and the program will run some methods of testfile-class doing everything it should.</p>\n<p>How I want it to work:</p>\n<p>Program is packed into jar <code>program.jar</code>. User moves <code>program.jar</code> to <code>folderB</code> that contains <code>abc.java</code>.\nUser runs <code>program.jar</code>, enters <code>abc</code> and program stuff with <code>abc.java</code></p>\n"},{"tags":["java","error-handling","process","out-of-memory"],"comments":[{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1637246345,"post_id":70021333,"comment_id":123779334,"body_markdown":"In general, an OutOfMemoryError means the program can’t continue executing.  Attempts to catch it will never be reliable.  Obviously, it’s not the OutOfMemoryError *class* that sometimes cannot be caught; rather, it’s the conditions that led to it being thrown.  So throwing your own OutOfMemoryError is not the same thing.","body":"In general, an OutOfMemoryError means the program can’t continue executing.  Attempts to catch it will never be reliable.  Obviously, it’s not the OutOfMemoryError <i>class</i> that sometimes cannot be caught; rather, it’s the conditions that led to it being thrown.  So throwing your own OutOfMemoryError is not the same thing."},{"owner":{"account_id":6950583,"reputation":2574,"user_id":5333340,"accept_rate":77,"display_name":"Kjara"},"score":0,"creation_date":1637305324,"post_id":70021333,"comment_id":123795707,"body_markdown":"That&#39;s what I thought. But there must be some way of finding out that memory was an issue. The OS can do this, so there&#39;s probably (hoepfully) some way to ask it...?","body":"That&#39;s what I thought. But there must be some way of finding out that memory was an issue. The OS can do this, so there&#39;s probably (hoepfully) some way to ask it...?"}],"owner":{"account_id":6950583,"reputation":2574,"user_id":5333340,"accept_rate":77,"display_name":"Kjara"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":146,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1637244929,"creation_date":1637244544,"question_id":70021333,"body_markdown":"I have a class with a main method:\r\n\r\n    public class MyProgram {\r\n    \tpublic static void main(String[] args) {\t\t   \t\t\t\r\n    \t\t...\r\n    \t}\r\n    }\r\n\r\nI have a wrapper class that can run that main method in an own JVM process (idea from [here][1]):\r\n\r\n    public class ProcessWrapper {\r\n    \tpublic void execute(int maxMegabytes) throws IOException, InterruptedException {\r\n    \t\tList&lt;String&gt; command = new ArrayList&lt;String&gt;();\r\n    \t\tcommand.add(System.getProperty(&quot;java.home&quot;) + File.separator + &quot;bin&quot; + File.separator + &quot;java&quot;;);\r\n    \t\tcommand.add(&quot;-Xmx&quot; + maxMegabytes + &quot;m&quot;); // limit subprocess JVM to that heap size\r\n    \t\tcommand.add(&quot;-cp&quot;);\r\n    \t\tcommand.add(System.getProperty(&quot;java.class.path&quot;));\r\n    \t\tcommand.add(MyProgram.class.getName());\r\n    \t\t\r\n    \t\tProcessBuilder builder = new ProcessBuilder(command);\r\n    \t\tProcess process = builder.start();\r\n    \t\tint exitValue = process.waitFor();\r\n    \t\tprocess.destroyForcibly();\r\n    \t}\r\n    }\r\n\r\n\r\n**My goal is to make `ProcessWrapper.execute(...)` reliably inform if the subprocess did not have enough memory to finish successfully.** (By &quot;inform&quot; I mean e.g. write to a log or return some value.)\r\n\r\nHow can I do this?\r\n\r\n---\r\nWhat I did/tried so far and what I thought about:\r\n\r\n*1*\r\n\r\nI tried provoking and then handling an `OutOfMemoryError` inside `main`\r\n\r\n    public static void main(String[] args) {      \r\n        try {\r\n            List&lt;String&gt; s = new ArrayList&lt;String&gt;();\r\n\t\t\tint j = 1;\r\n\t\t\twhile (true) // provoke OutOfMemoryError\r\n\t\t\t\ts.add(&quot;hello&quot;.repeat(j++));\r\n        } catch (Throwable t) {\r\n            System.out.println(t.getClass().getName() + &quot; occurred&quot;);\r\n            t.printStackTrace(System.out);\r\n        }\r\n    }\r\n\r\nand then checking `stdout` inside `ProcessWrapper`:\r\n\r\n    ...\r\n    int exitValue = process.waitFor();\r\n    String errors = new String(process.getInputStream().readAllBytes());\r\n    System.out.println(errors);\r\n    process.destroyForcibly();\r\n\r\nBut it turns out that this is not reliable. This will, in rare cases (I run `execute(50)` several times in a loop in my unittest), actually return `exitValue = 0` (meaning &quot;ok&quot;) and print out that the error occurred, but in most cases it will return `exitValue = 1` (meaning &quot;not ok&quot;) and print nothing.\r\n\r\n\r\n*2*\r\n\r\nI used `stderr` instead; i.e. inside `main` I used `System.err.println` and inside `execute` I used `getErrorStream()`.\r\n\r\nBy that I found that, if `exitValue = 1` and the `catch` block is not executed, there is still an `OutOfMemoryError` thrown but not caught. Its stack trace is:\r\n\r\n&gt; Exception in thread &quot;main&quot; java.lang.OutOfMemoryError: Java heap space\r\n&gt; \tat testingProcesses.MyProgram.main(MyProgram.java:15)\r\n\r\nI guess (not sure though) it&#39;s the JVM itself that throws the `OutOfMemoryError`. But how can I catch/handle that?\r\n\r\n*3*\r\n\r\nI threw the `OutOfMemoryError` myself:\r\n\r\n    public static void main(String[] args) {      \r\n        try {\r\n            throw new OutOfMemoryError(&quot;threw it myself&quot;);\r\n        } catch (Throwable t) {\r\n            System.out.println(t.getClass().getName() + &quot; occurred&quot;);\r\n            t.printStackTrace(System.out);\r\n        }\r\n    }\r\n\r\n\r\nIn this case, it was always caught/handled and `exitValue = 0`. So there definitely must be something outside of `main` that throws the error in a real out-of-memory scenario.\r\n\r\n*4*\r\n\r\nI played around with the memory size I give to the subprocess JVM. When I use very little, like `execute(1)`, I will always get `exitValue = 1` and no `stdout` or `stderr` output. I remember that I once had such a situation but still got some output (but can&#39;t reproduce any more), and that output suggested that the JVM could not even initialize/start due to the lack of memory.\r\n\r\n*5*\r\n\r\nI checked the [Process API documentation][2] but could not find any method that allows me to check for exceptions occuring INSIDE the process.\r\n\r\n*6*\r\n\r\nIs there maybe an API for some OS layer from which I can retrieve that information (not Process API)?\r\n\r\n\r\n  [1]: https://dzone.com/articles/running-a-java-class-as-a-subprocess\r\n  [2]: https://docs.oracle.com/javase/8/docs/api/java/lang/Process.html","title":"How to find out if subprocess ran out of memory?","body":"<p>I have a class with a main method:</p>\n<pre><code>public class MyProgram {\n    public static void main(String[] args) {                    \n        ...\n    }\n}\n</code></pre>\n<p>I have a wrapper class that can run that main method in an own JVM process (idea from <a href=\"https://dzone.com/articles/running-a-java-class-as-a-subprocess\" rel=\"nofollow noreferrer\">here</a>):</p>\n<pre><code>public class ProcessWrapper {\n    public void execute(int maxMegabytes) throws IOException, InterruptedException {\n        List&lt;String&gt; command = new ArrayList&lt;String&gt;();\n        command.add(System.getProperty(&quot;java.home&quot;) + File.separator + &quot;bin&quot; + File.separator + &quot;java&quot;;);\n        command.add(&quot;-Xmx&quot; + maxMegabytes + &quot;m&quot;); // limit subprocess JVM to that heap size\n        command.add(&quot;-cp&quot;);\n        command.add(System.getProperty(&quot;java.class.path&quot;));\n        command.add(MyProgram.class.getName());\n        \n        ProcessBuilder builder = new ProcessBuilder(command);\n        Process process = builder.start();\n        int exitValue = process.waitFor();\n        process.destroyForcibly();\n    }\n}\n</code></pre>\n<p><strong>My goal is to make <code>ProcessWrapper.execute(...)</code> reliably inform if the subprocess did not have enough memory to finish successfully.</strong> (By &quot;inform&quot; I mean e.g. write to a log or return some value.)</p>\n<p>How can I do this?</p>\n<hr />\n<p>What I did/tried so far and what I thought about:</p>\n<p><em>1</em></p>\n<p>I tried provoking and then handling an <code>OutOfMemoryError</code> inside <code>main</code></p>\n<pre><code>public static void main(String[] args) {      \n    try {\n        List&lt;String&gt; s = new ArrayList&lt;String&gt;();\n        int j = 1;\n        while (true) // provoke OutOfMemoryError\n            s.add(&quot;hello&quot;.repeat(j++));\n    } catch (Throwable t) {\n        System.out.println(t.getClass().getName() + &quot; occurred&quot;);\n        t.printStackTrace(System.out);\n    }\n}\n</code></pre>\n<p>and then checking <code>stdout</code> inside <code>ProcessWrapper</code>:</p>\n<pre><code>...\nint exitValue = process.waitFor();\nString errors = new String(process.getInputStream().readAllBytes());\nSystem.out.println(errors);\nprocess.destroyForcibly();\n</code></pre>\n<p>But it turns out that this is not reliable. This will, in rare cases (I run <code>execute(50)</code> several times in a loop in my unittest), actually return <code>exitValue = 0</code> (meaning &quot;ok&quot;) and print out that the error occurred, but in most cases it will return <code>exitValue = 1</code> (meaning &quot;not ok&quot;) and print nothing.</p>\n<p><em>2</em></p>\n<p>I used <code>stderr</code> instead; i.e. inside <code>main</code> I used <code>System.err.println</code> and inside <code>execute</code> I used <code>getErrorStream()</code>.</p>\n<p>By that I found that, if <code>exitValue = 1</code> and the <code>catch</code> block is not executed, there is still an <code>OutOfMemoryError</code> thrown but not caught. Its stack trace is:</p>\n<blockquote>\n<p>Exception in thread &quot;main&quot; java.lang.OutOfMemoryError: Java heap space\nat testingProcesses.MyProgram.main(MyProgram.java:15)</p>\n</blockquote>\n<p>I guess (not sure though) it's the JVM itself that throws the <code>OutOfMemoryError</code>. But how can I catch/handle that?</p>\n<p><em>3</em></p>\n<p>I threw the <code>OutOfMemoryError</code> myself:</p>\n<pre><code>public static void main(String[] args) {      \n    try {\n        throw new OutOfMemoryError(&quot;threw it myself&quot;);\n    } catch (Throwable t) {\n        System.out.println(t.getClass().getName() + &quot; occurred&quot;);\n        t.printStackTrace(System.out);\n    }\n}\n</code></pre>\n<p>In this case, it was always caught/handled and <code>exitValue = 0</code>. So there definitely must be something outside of <code>main</code> that throws the error in a real out-of-memory scenario.</p>\n<p><em>4</em></p>\n<p>I played around with the memory size I give to the subprocess JVM. When I use very little, like <code>execute(1)</code>, I will always get <code>exitValue = 1</code> and no <code>stdout</code> or <code>stderr</code> output. I remember that I once had such a situation but still got some output (but can't reproduce any more), and that output suggested that the JVM could not even initialize/start due to the lack of memory.</p>\n<p><em>5</em></p>\n<p>I checked the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/Process.html\" rel=\"nofollow noreferrer\">Process API documentation</a> but could not find any method that allows me to check for exceptions occuring INSIDE the process.</p>\n<p><em>6</em></p>\n<p>Is there maybe an API for some OS layer from which I can retrieve that information (not Process API)?</p>\n"},{"tags":["java","junit"],"comments":[{"owner":{"account_id":6740288,"reputation":2238,"user_id":5193747,"accept_rate":47,"display_name":"Kamil W"},"score":0,"creation_date":1522436142,"post_id":49579531,"comment_id":86167479,"body_markdown":"`jOptional&lt;JobTitleEntity&gt; jTOptional = jTOptional.findById(id);` it does not make sense to me, also you didn&#39;t use it after.","body":"<code>jOptional&lt;JobTitleEntity&gt; jTOptional = jTOptional.findById(id);</code> it does not make sense to me, also you didn&#39;t use it after."},{"owner":{"account_id":8196502,"reputation":101,"user_id":6169179,"display_name":"starlord"},"score":0,"creation_date":1522436309,"post_id":49579531,"comment_id":86167567,"body_markdown":"Sorry, that should not have been there. It was older code. Deleted it.","body":"Sorry, that should not have been there. It was older code. Deleted it."}],"answers":[{"tags":[],"owner":{"account_id":6740288,"reputation":2238,"user_id":5193747,"accept_rate":47,"display_name":"Kamil W"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1522436740,"creation_date":1522436740,"answer_id":49579999,"question_id":49579531,"body_markdown":"`jobTitleRepository.findById(id)` it always returns an optional class so you don&#39;t need check if it is null, also before you call `assertEquals()` you can check if object with passed id exists by calling `someOptional.isPresent()` and if it&#39;s true you can make assert. But you should project your test cases to avoid mixing codintional statmens with asserations.","title":"java.util.NoSuchElementException: No value present - Error - Optional.get in JUNIT Testing with Spring","body":"<p><code>jobTitleRepository.findById(id)</code> it always returns an optional class so you don't need check if it is null, also before you call <code>assertEquals()</code> you can check if object with passed id exists by calling <code>someOptional.isPresent()</code> and if it's true you can make assert. But you should project your test cases to avoid mixing codintional statmens with asserations.</p>\n"},{"tags":[],"owner":{"account_id":10561561,"reputation":31,"user_id":7781177,"display_name":"Abdelaziz Fellah"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1637244698,"creation_date":1554224871,"answer_id":55480159,"question_id":49579531,"body_markdown":"Must check Option  `YourObject.findById(id).isPresent()`\r\n\r\nexemple:\r\n \r\n     public  YourObject getYourObject(Long id) {\r\n        if (id == null) {\r\n            return null;\r\n        }\r\n        return objectRepository.findById(id).isPresent() ? \r\n            objectRepository.findById(id).get(): null;\r\n     }\r\n    ","title":"java.util.NoSuchElementException: No value present - Error - Optional.get in JUNIT Testing with Spring","body":"<p>Must check Option  <code>YourObject.findById(id).isPresent()</code></p>\n<p>exemple:</p>\n<pre><code> public  YourObject getYourObject(Long id) {\n    if (id == null) {\n        return null;\n    }\n    return objectRepository.findById(id).isPresent() ? \n        objectRepository.findById(id).get(): null;\n }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2509719,"reputation":651,"user_id":2182500,"display_name":"Laguh"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1558525326,"creation_date":1558525326,"answer_id":56256071,"question_id":49579531,"body_markdown":"That happens because the Optional returned by:\r\n`this.jobTitleRepository.findById(id)` can return an `empty`, so if you call get() on it it will throw a `java.util.NoSuchElementException`.\r\n\r\nYou can fix that with something like:\r\n`this.jobTitleRepository.findById(id).orElseGet(null)`\r\nor\r\n`this.jobTitleRepository.findById(id).orElseGet(new Jobs())`\r\n\r\nor fix the return Optional type in the original method: `jobTitleRepository.findById(id)`  \r\n\r\nCan you post this method `jobTitleRepository.findById(id)` on your post aswell?","title":"java.util.NoSuchElementException: No value present - Error - Optional.get in JUNIT Testing with Spring","body":"<p>That happens because the Optional returned by:\n<code>this.jobTitleRepository.findById(id)</code> can return an <code>empty</code>, so if you call get() on it it will throw a <code>java.util.NoSuchElementException</code>.</p>\n\n<p>You can fix that with something like:\n<code>this.jobTitleRepository.findById(id).orElseGet(null)</code>\nor\n<code>this.jobTitleRepository.findById(id).orElseGet(new Jobs())</code></p>\n\n<p>or fix the return Optional type in the original method: <code>jobTitleRepository.findById(id)</code>  </p>\n\n<p>Can you post this method <code>jobTitleRepository.findById(id)</code> on your post aswell?</p>\n"}],"owner":{"account_id":8196502,"reputation":101,"user_id":6169179,"display_name":"starlord"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":60034,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"answer_count":3,"score":9,"last_activity_date":1637244698,"creation_date":1522434529,"question_id":49579531,"body_markdown":"I have a test where an Optional was used. In the method, its stating no value was present.  Here is the code, I have. How can I make this pass without NoSuchElementException. \r\n\r\n     public jobs theID(Integer id) {  \r\n            if( id == null) {\r\n                throw new IllegalArgumentException(&quot;Its missing.&quot;);\r\n            }\r\n\r\n        \r\n            return jobTitleMapper.entityToModel(this.jobTitleRepository.findById(id).get());\r\n    }\r\n\r\nIt is fussing about the get() from Java 8. \r\n\r\nHow do I use an Optional with isPresent correctly in this sense?\r\n\r\n\r\nThe test is:\r\n\r\n    public void findIdTest() {\r\n        Jobs jt = this.Service.theID(Entities.thisID);\r\n        Assert.assertNotNull(jt);\r\n        Assert.assertEquals(Entities.thisID, .getId());\r\n    }\r\n\r\n\r\nThanks for the help.","title":"java.util.NoSuchElementException: No value present - Error - Optional.get in JUNIT Testing with Spring","body":"<p>I have a test where an Optional was used. In the method, its stating no value was present.  Here is the code, I have. How can I make this pass without NoSuchElementException. </p>\n\n<pre><code> public jobs theID(Integer id) {  \n        if( id == null) {\n            throw new IllegalArgumentException(\"Its missing.\");\n        }\n\n\n        return jobTitleMapper.entityToModel(this.jobTitleRepository.findById(id).get());\n}\n</code></pre>\n\n<p>It is fussing about the get() from Java 8. </p>\n\n<p>How do I use an Optional with isPresent correctly in this sense?</p>\n\n<p>The test is:</p>\n\n<pre><code>public void findIdTest() {\n    Jobs jt = this.Service.theID(Entities.thisID);\n    Assert.assertNotNull(jt);\n    Assert.assertEquals(Entities.thisID, .getId());\n}\n</code></pre>\n\n<p>Thanks for the help.</p>\n"},{"tags":["java","double","equality","nan"],"answers":[{"tags":[],"owner":{"account_id":15935,"reputation":346512,"user_id":34211,"accept_rate":83,"display_name":"Andrew Hare"},"down_vote_count":2,"up_vote_count":54,"is_accepted":false,"score":52,"last_activity_date":1446899818,"creation_date":1253563860,"answer_id":1456577,"question_id":1456566,"body_markdown":"Try [`Double.isNaN()`][1]:\r\n\r\n&gt; Returns true if this Double value is a Not-a-Number (NaN), false otherwise. \r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/7/docs/api/java/lang/Double.html#isNaN%28%29\r\n\r\nNote that [`double.isNaN()`] will not work, because unboxed doubles do not have methods associated with them.","title":"How do you test to see if a double is equal to NaN?","body":"<p>Try <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/Double.html#isNaN%28%29\" rel=\"noreferrer\"><code>Double.isNaN()</code></a>:</p>\n\n<blockquote>\n  <p>Returns true if this Double value is a Not-a-Number (NaN), false otherwise. </p>\n</blockquote>\n\n<p>Note that [<code>double.isNaN()</code>] will not work, because unboxed doubles do not have methods associated with them.</p>\n"},{"tags":[],"owner":{"account_id":26356,"reputation":68584,"user_id":68507,"accept_rate":94,"display_name":"Ben S"},"down_vote_count":1,"up_vote_count":527,"is_accepted":true,"score":526,"last_activity_date":1537317068,"creation_date":1253563881,"answer_id":1456578,"question_id":1456566,"body_markdown":"Use the static [`Double.isNaN(double)`][1] method, or your `Double`&#39;s [`.isNaN()`][2] method.\r\n\r\n    // 1. static method\r\n    if (Double.isNaN(doubleValue)) {\r\n        ...\r\n    }\r\n    // 2. object&#39;s method\r\n    if (doubleObject.isNaN()) {\r\n        ...\r\n    }\r\n\r\nSimply doing:\r\n\r\n    if (var == Double.NaN) {\r\n        ...\r\n    }\r\n\r\nis **not sufficient** due to how the [IEEE standard for NaN and floating point numbers][3] is defined.\r\n\r\n  [1]: http://java.sun.com/javase/6/docs/api/java/lang/Double.html#isNaN%28double%29\r\n  [2]: http://java.sun.com/javase/6/docs/api/java/lang/Double.html#isNaN%28%29\r\n  [3]: http://en.wikipedia.org/wiki/IEEE_754","title":"How do you test to see if a double is equal to NaN?","body":"<p>Use the static <a href=\"http://java.sun.com/javase/6/docs/api/java/lang/Double.html#isNaN%28double%29\" rel=\"noreferrer\"><code>Double.isNaN(double)</code></a> method, or your <code>Double</code>'s <a href=\"http://java.sun.com/javase/6/docs/api/java/lang/Double.html#isNaN%28%29\" rel=\"noreferrer\"><code>.isNaN()</code></a> method.</p>\n\n<pre><code>// 1. static method\nif (Double.isNaN(doubleValue)) {\n    ...\n}\n// 2. object's method\nif (doubleObject.isNaN()) {\n    ...\n}\n</code></pre>\n\n<p>Simply doing:</p>\n\n<pre><code>if (var == Double.NaN) {\n    ...\n}\n</code></pre>\n\n<p>is <strong>not sufficient</strong> due to how the <a href=\"http://en.wikipedia.org/wiki/IEEE_754\" rel=\"noreferrer\">IEEE standard for NaN and floating point numbers</a> is defined.</p>\n"},{"tags":[],"owner":{"account_id":5473884,"reputation":31,"user_id":4352407,"display_name":"p.g.gajendra babu"},"down_vote_count":7,"up_vote_count":4,"is_accepted":false,"score":-3,"last_activity_date":1637244283,"creation_date":1419404675,"answer_id":27632909,"question_id":1456566,"body_markdown":"Beginners needs practical examples. so try the following code.\r\n\r\n    public class Not_a_Number {\r\n    \r\n    public static void main(String[] args) {\r\n        String message = &quot;0.0/0.0 is NaN.\\nsimilarly Math.sqrt(-1) is NaN.&quot;;        \r\n        String dottedLine = &quot;------------------------------------------------&quot;;     \r\n    \r\n        Double numerator = -2.0;\r\n        Double denominator = -2.0;      \r\n        while (denominator &lt;= 1) {\r\n            Double x = numerator/denominator;           \r\n            Double y = new Double (x);\r\n            boolean z = y.isNaN();\r\n            System.out.println(&quot;y =  &quot; + y);\r\n            System.out.println(&quot;z =  &quot; + z);\r\n            if (z == true){\r\n                System.out.println(message);                \r\n            }\r\n            else {\r\n                System.out.println(&quot;Hi, everyone&quot;); \r\n            }\r\n            numerator = numerator + 1;\r\n            denominator = denominator +1;\r\n            System.out.println(dottedLine);         \r\n        } // end of while\r\n    \r\n    } // end of main\r\n    \r\n    } // end of class","title":"How do you test to see if a double is equal to NaN?","body":"<p>Beginners needs practical examples. so try the following code.</p>\n<pre><code>public class Not_a_Number {\n\npublic static void main(String[] args) {\n    String message = &quot;0.0/0.0 is NaN.\\nsimilarly Math.sqrt(-1) is NaN.&quot;;        \n    String dottedLine = &quot;------------------------------------------------&quot;;     \n\n    Double numerator = -2.0;\n    Double denominator = -2.0;      \n    while (denominator &lt;= 1) {\n        Double x = numerator/denominator;           \n        Double y = new Double (x);\n        boolean z = y.isNaN();\n        System.out.println(&quot;y =  &quot; + y);\n        System.out.println(&quot;z =  &quot; + z);\n        if (z == true){\n            System.out.println(message);                \n        }\n        else {\n            System.out.println(&quot;Hi, everyone&quot;); \n        }\n        numerator = numerator + 1;\n        denominator = denominator +1;\n        System.out.println(dottedLine);         \n    } // end of while\n\n} // end of main\n\n} // end of class\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10839766,"reputation":5282,"user_id":8200485,"accept_rate":82,"display_name":"hyper-neutrino"},"down_vote_count":5,"up_vote_count":15,"is_accepted":false,"score":10,"last_activity_date":1483751587,"creation_date":1444601056,"answer_id":33070602,"question_id":1456566,"body_markdown":"You can check for NaN by using `var != var`. `NaN` does not equal `NaN`.\r\n\r\n**EDIT**: This is probably by far the worst method. It&#39;s confusing, terrible for readability, and overall bad practice.","title":"How do you test to see if a double is equal to NaN?","body":"<p>You can check for NaN by using <code>var != var</code>. <code>NaN</code> does not equal <code>NaN</code>.</p>\n\n<p><strong>EDIT</strong>: This is probably by far the worst method. It's confusing, terrible for readability, and overall bad practice.</p>\n"},{"tags":[],"owner":{"account_id":170737,"reputation":2303,"user_id":397677,"display_name":"Grzegorz Gajos"},"down_vote_count":0,"up_vote_count":22,"is_accepted":false,"score":22,"last_activity_date":1467207500,"creation_date":1467207500,"answer_id":38101309,"question_id":1456566,"body_markdown":"You might want to consider also checking if a value is finite via `Double.isFinite(value)`. Since Java 8 there is a new method in `Double` class where you can check at once if a value is not NaN and infinity.\r\n\r\n    /**\r\n     * Returns {@code true} if the argument is a finite floating-point\r\n     * value; returns {@code false} otherwise (for NaN and infinity\r\n     * arguments).\r\n     *\r\n     * @param d the {@code double} value to be tested\r\n     * @return {@code true} if the argument is a finite\r\n     * floating-point value, {@code false} otherwise.\r\n     * @since 1.8\r\n     */\r\n    public static boolean isFinite(double d)","title":"How do you test to see if a double is equal to NaN?","body":"<p>You might want to consider also checking if a value is finite via <code>Double.isFinite(value)</code>. Since Java 8 there is a new method in <code>Double</code> class where you can check at once if a value is not NaN and infinity.</p>\n\n<pre><code>/**\n * Returns {@code true} if the argument is a finite floating-point\n * value; returns {@code false} otherwise (for NaN and infinity\n * arguments).\n *\n * @param d the {@code double} value to be tested\n * @return {@code true} if the argument is a finite\n * floating-point value, {@code false} otherwise.\n * @since 1.8\n */\npublic static boolean isFinite(double d)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1940902,"reputation":153,"user_id":1747138,"accept_rate":25,"display_name":"Teela"},"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1566374652,"creation_date":1566374652,"answer_id":57587057,"question_id":1456566,"body_markdown":"The below code snippet will help evaluate primitive type holding NaN.\r\n\r\n``double dbl = Double.NaN;\r\nDouble.valueOf(dbl).isNaN() ? true : false;``","title":"How do you test to see if a double is equal to NaN?","body":"<p>The below code snippet will help evaluate primitive type holding NaN.</p>\n\n<p><code>double dbl = Double.NaN;\nDouble.valueOf(dbl).isNaN() ? true : false;</code></p>\n"},{"tags":[],"owner":{"account_id":19593935,"reputation":11,"user_id":14340388,"display_name":"PeterPainter"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1601053959,"creation_date":1601039106,"answer_id":64064755,"question_id":1456566,"body_markdown":"If your value under test is a *Double* (not a primitive) and might be `null` (which is obviously not a number too), then you should use the following term:\r\n\r\n`(value==null || Double.isNaN(value))`\r\n\r\nSince `isNaN()` wants a primitive (rather than boxing any primitive double to a *Double*), passing a `null` value (which can&#39;t be unboxed to a *Double*) will result in an exception instead of the expected `false`.\r\n","title":"How do you test to see if a double is equal to NaN?","body":"<p>If your value under test is a <em>Double</em> (not a primitive) and might be <code>null</code> (which is obviously not a number too), then you should use the following term:</p>\n<p><code>(value==null || Double.isNaN(value))</code></p>\n<p>Since <code>isNaN()</code> wants a primitive (rather than boxing any primitive double to a <em>Double</em>), passing a <code>null</code> value (which can't be unboxed to a <em>Double</em>) will result in an exception instead of the expected <code>false</code>.</p>\n"}],"owner":{"account_id":30276,"reputation":58105,"user_id":82474,"accept_rate":81,"display_name":"Eric Wilson"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":229763,"favorite_count":0,"down_vote_count":0,"up_vote_count":317,"accepted_answer_id":1456578,"answer_count":7,"score":317,"last_activity_date":1637244283,"creation_date":1253563761,"question_id":1456566,"body_markdown":"I have a double in Java and I want to check if it is `NaN`.\r\nWhat is the best way to do this?","title":"How do you test to see if a double is equal to NaN?","body":"<p>I have a double in Java and I want to check if it is <code>NaN</code>.\nWhat is the best way to do this?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":137890,"reputation":8718,"user_id":995052,"accept_rate":56,"display_name":"Kris"},"score":1,"creation_date":1637241527,"post_id":70020525,"comment_id":123776979,"body_markdown":"I really don&#39;t get it , you know how to write a method, but not to call it ?","body":"I really don&#39;t get it , you know how to write a method, but not to call it ?"},{"owner":{"account_id":23380954,"reputation":39,"user_id":17447679,"display_name":"box12344321"},"score":0,"creation_date":1637241766,"post_id":70020525,"comment_id":123777101,"body_markdown":"in this method you see that im returning price, however, when I try to call price in a different method it does not seem to recognize what the value of price is","body":"in this method you see that im returning price, however, when I try to call price in a different method it does not seem to recognize what the value of price is"},{"owner":{"account_id":5833253,"reputation":369,"user_id":4597128,"accept_rate":80,"display_name":"yogev levi"},"score":0,"creation_date":1637242011,"post_id":70020525,"comment_id":123777235,"body_markdown":"what is the exception you get?","body":"what is the exception you get?"},{"owner":{"account_id":15054416,"reputation":419,"user_id":10865170,"display_name":"Big Zed"},"score":0,"creation_date":1637242318,"post_id":70020525,"comment_id":123777395,"body_markdown":"you can create a variable that will receive the returned value from your method like : `double calculatedPrice = ClassName.parkingPrice(1.0);`","body":"you can create a variable that will receive the returned value from your method like : <code>double calculatedPrice = ClassName.parkingPrice(1.0);</code>"},{"owner":{"account_id":15054416,"reputation":419,"user_id":10865170,"display_name":"Big Zed"},"score":2,"creation_date":1637242390,"post_id":70020525,"comment_id":123777425,"body_markdown":"you should also remove the `price`parameter from your method, it serves no pupose.","body":"you should also remove the <code>price</code>parameter from your method, it serves no pupose."},{"owner":{"account_id":23380954,"reputation":39,"user_id":17447679,"display_name":"box12344321"},"score":0,"creation_date":1637242436,"post_id":70020525,"comment_id":123777448,"body_markdown":"I added an edit to show how im trying to call the method parkingPrice","body":"I added an edit to show how im trying to call the method parkingPrice"}],"answers":[{"tags":[],"owner":{"account_id":18335265,"reputation":219,"user_id":13352796,"display_name":"vhthanh"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1637243054,"creation_date":1637243054,"answer_id":70020958,"question_id":70020525,"body_markdown":"You should use &lt;code&gt;Exception&lt;/code&gt; instead of only printing the error message or you need a default value for &lt;code&gt;price&lt;/code&gt; if the &lt;code&gt;hours&lt;/code&gt; is invalid. Here&#39;s the code assuming you want 2 different methods that will result different calculation.\r\n\r\n    public static double parkingPrice() throws Exception {\r\n        int hours = inputInt(&quot;How many hours would you like to park? from 1 hour to 8 hours. &quot;);\r\n        if(hours&gt;=7 &amp;&amp; hours&lt;9){\r\n            return 5.50;\r\n        }\r\n        else if (hours &gt;=5 &amp;&amp; hours&lt;9){\r\n            return 4.50;\r\n        }\r\n        else if (hours &gt;=2 &amp;&amp; hours&lt;9){\r\n            return 4.00;\r\n        }\r\n        else if (hours == 1) {\r\n            return 3.00;\r\n        }\r\n        else {\r\n            throw new Exception(&quot;Unvalid number please enter between 1 and 8.&quot;);\r\n        }\r\n    }\r\n\r\n    public static double subtractsThree() throws Exception {\r\n        return parkingPrice() - 3;\r\n    }\r\n\r\n    public static double subtractsFour() throws Exception {\r\n        return parkingPrice() - 4;\r\n    }\r\n\r\n   \r\n","title":"how do I pass a value from one method to the other","body":"<p>You should use <code>Exception</code> instead of only printing the error message or you need a default value for <code>price</code> if the <code>hours</code> is invalid. Here's the code assuming you want 2 different methods that will result different calculation.</p>\n<pre><code>public static double parkingPrice() throws Exception {\n    int hours = inputInt(&quot;How many hours would you like to park? from 1 hour to 8 hours. &quot;);\n    if(hours&gt;=7 &amp;&amp; hours&lt;9){\n        return 5.50;\n    }\n    else if (hours &gt;=5 &amp;&amp; hours&lt;9){\n        return 4.50;\n    }\n    else if (hours &gt;=2 &amp;&amp; hours&lt;9){\n        return 4.00;\n    }\n    else if (hours == 1) {\n        return 3.00;\n    }\n    else {\n        throw new Exception(&quot;Unvalid number please enter between 1 and 8.&quot;);\n    }\n}\n\npublic static double subtractsThree() throws Exception {\n    return parkingPrice() - 3;\n}\n\npublic static double subtractsFour() throws Exception {\n    return parkingPrice() - 4;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1642711,"reputation":19842,"user_id":1514861,"accept_rate":86,"display_name":"Ivo"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1637243289,"creation_date":1637243289,"answer_id":70021013,"question_id":70020525,"body_markdown":"I think you don&#39;t really understand how parameters work. You have to enter actual values in there.\r\n\r\nIn your code\r\n\r\n    public static void calculate(){\r\n        double price;\r\n        price = parkingPrice(price);\r\n    }\r\n\r\nyou are not passing a value because price is not initialized yet. You could do either\r\n\r\n    public static void calculate(){\r\n        double price = 0;\r\n        price = parkingPrice(price);\r\n    }\r\n\r\nor\r\n\r\n    public static void calculate(){\r\n        double price = parkingPrice(0);\r\n    }\r\n\r\nfor example. But you probably don&#39;t want either because it actually makes no sense for that function to have any parameters.\r\nIt makes more sense to make it like vhthanh&#39;s answer and then calculate can be like\r\n\r\n    public static void calculate(){\r\n        double price = parkingPrice();\r\n    }","title":"how do I pass a value from one method to the other","body":"<p>I think you don't really understand how parameters work. You have to enter actual values in there.</p>\n<p>In your code</p>\n<pre><code>public static void calculate(){\n    double price;\n    price = parkingPrice(price);\n}\n</code></pre>\n<p>you are not passing a value because price is not initialized yet. You could do either</p>\n<pre><code>public static void calculate(){\n    double price = 0;\n    price = parkingPrice(price);\n}\n</code></pre>\n<p>or</p>\n<pre><code>public static void calculate(){\n    double price = parkingPrice(0);\n}\n</code></pre>\n<p>for example. But you probably don't want either because it actually makes no sense for that function to have any parameters.\nIt makes more sense to make it like vhthanh's answer and then calculate can be like</p>\n<pre><code>public static void calculate(){\n    double price = parkingPrice();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":544543,"reputation":1693,"user_id":914032,"display_name":"SurfMan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637243853,"creation_date":1637243853,"answer_id":70021167,"question_id":70020525,"body_markdown":"I think what you are looking for is to pass the hour into the method and then return the price that goes with it:\r\n\r\n````\r\npublic static void calculate(){\r\n    int hours = inputInt(&quot;How many hours would you like to park? from 1 hour to 8 hours. &quot;);\r\n    if (hours &lt; 1 || hours &gt; 8) {\r\n        System.out.println(&quot;Unvalid number please enter between 1 and 8.&quot;);\r\n    }\r\n    else  {\r\n       double price = parkingPrice(hours);\r\n       //do something with price here...\r\n    }\r\n}\r\n\r\npublic static double parkingPrice(int hours){ \r\n   double price = 0;\r\n   if(hours&gt;=7 &amp;&amp; hours&lt;9){\r\n         price = 5.50;\r\n    }  \r\n   else if (hours &gt;=5 &amp;&amp; hours&lt;9){\r\n        price = 4.50;\r\n    } \r\n    else if (hours &gt;=2 &amp;&amp; hours&lt;9){\r\n        price = 4.00;\r\n    }\r\n    else if (hours == 1 &amp;&amp; hours&lt;9) {\r\n        price = 3.00;\r\n    }\r\n    return price;\r\n}\r\n\r\n````","title":"how do I pass a value from one method to the other","body":"<p>I think what you are looking for is to pass the hour into the method and then return the price that goes with it:</p>\n<pre><code>public static void calculate(){\n    int hours = inputInt(&quot;How many hours would you like to park? from 1 hour to 8 hours. &quot;);\n    if (hours &lt; 1 || hours &gt; 8) {\n        System.out.println(&quot;Unvalid number please enter between 1 and 8.&quot;);\n    }\n    else  {\n       double price = parkingPrice(hours);\n       //do something with price here...\n    }\n}\n\npublic static double parkingPrice(int hours){ \n   double price = 0;\n   if(hours&gt;=7 &amp;&amp; hours&lt;9){\n         price = 5.50;\n    }  \n   else if (hours &gt;=5 &amp;&amp; hours&lt;9){\n        price = 4.50;\n    } \n    else if (hours &gt;=2 &amp;&amp; hours&lt;9){\n        price = 4.00;\n    }\n    else if (hours == 1 &amp;&amp; hours&lt;9) {\n        price = 3.00;\n    }\n    return price;\n}\n\n</code></pre>\n"}],"owner":{"account_id":23380954,"reputation":39,"user_id":17447679,"display_name":"box12344321"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":70,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1637243853,"creation_date":1637241370,"question_id":70020525,"body_markdown":"I am trying to pass the value of price from the method below to a different method so I can subtract from it, for example, I want to make two more methods one subtracts 3 from double price and a different method that subtract 4 from price depending on the user answer to the if-else statements\r\n\r\n```java\r\npublic static double parkingPrice(double price){ \r\n    int hours = inputInt(&quot;How many hours would you like to park? from 1 hour to 8 hours. &quot;);\r\n\r\n   if(hours&gt;=7 &amp;&amp; hours&lt;9){\r\n         price = 5.50;\r\n    }  \r\n   else if (hours &gt;=5 &amp;&amp; hours&lt;9){\r\n        price = 4.50;\r\n    } \r\n    else if (hours &gt;=2 &amp;&amp; hours&lt;9){\r\n        price = 4.00;\r\n    }\r\n    else if (hours == 1 &amp;&amp; hours&lt;9) {\r\n        price = 3.00;\r\n    }\r\n     else {\r\n        System.out.println(&quot;Unvalid number please enter between 1 and 8.&quot;);\r\n    }\r\n    return price;\r\n}\r\n```\r\n\r\napologizes for the basic question, I&#39;m very new to programming!\r\n\r\nedit to show how I am trying to call this method into a different one\r\n\r\n```\r\npublic static void calculate(){\r\n    double price;\r\n    price = parkingPrice(price);\r\n}\r\n```","title":"how do I pass a value from one method to the other","body":"<p>I am trying to pass the value of price from the method below to a different method so I can subtract from it, for example, I want to make two more methods one subtracts 3 from double price and a different method that subtract 4 from price depending on the user answer to the if-else statements</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static double parkingPrice(double price){ \n    int hours = inputInt(&quot;How many hours would you like to park? from 1 hour to 8 hours. &quot;);\n\n   if(hours&gt;=7 &amp;&amp; hours&lt;9){\n         price = 5.50;\n    }  \n   else if (hours &gt;=5 &amp;&amp; hours&lt;9){\n        price = 4.50;\n    } \n    else if (hours &gt;=2 &amp;&amp; hours&lt;9){\n        price = 4.00;\n    }\n    else if (hours == 1 &amp;&amp; hours&lt;9) {\n        price = 3.00;\n    }\n     else {\n        System.out.println(&quot;Unvalid number please enter between 1 and 8.&quot;);\n    }\n    return price;\n}\n</code></pre>\n<p>apologizes for the basic question, I'm very new to programming!</p>\n<p>edit to show how I am trying to call this method into a different one</p>\n<pre><code>public static void calculate(){\n    double price;\n    price = parkingPrice(price);\n}\n</code></pre>\n"},{"tags":["java","encryption","bouncycastle","jsse"],"answers":[{"tags":[],"owner":{"account_id":1365471,"reputation":1988,"user_id":1301994,"accept_rate":57,"display_name":"Mike"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1637243318,"creation_date":1354757336,"answer_id":13735534,"question_id":9506283,"body_markdown":"I recently got interested in utilizing SRP as well.  I haven&#39;t started working on it &quot;yet,&quot; but [Nimbus SRP][1] looks promising, and the [Stanford Page][2] on SRP had some good resources.\r\n\r\n\r\n\r\n  [1]: https://connect2id.com/products/nimbus-srp\r\n  [2]: http://srp.stanford.edu/links.html","title":"TLS-SRP support in Bouncy Castle","body":"<p>I recently got interested in utilizing SRP as well.  I haven't started working on it &quot;yet,&quot; but <a href=\"https://connect2id.com/products/nimbus-srp\" rel=\"nofollow noreferrer\">Nimbus SRP</a> looks promising, and the <a href=\"http://srp.stanford.edu/links.html\" rel=\"nofollow noreferrer\">Stanford Page</a> on SRP had some good resources.</p>\n"}],"owner":{"account_id":965625,"reputation":1524,"user_id":1103606,"accept_rate":51,"display_name":"Peter Penzov"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1378,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1637243318,"creation_date":1330548059,"question_id":9506283,"body_markdown":"I want to develop Java client which can communicate with TLS-SRP server implemented in C and GnuTLS. I fond that JSSE does not support TLS-SRP and Bouncy Castle has too little documentation which can be useful. Is there any information how I can develop java client with TLS-SRP?\r\n\r\nBest wishes","title":"TLS-SRP support in Bouncy Castle","body":"<p>I want to develop Java client which can communicate with TLS-SRP server implemented in C and GnuTLS. I fond that JSSE does not support TLS-SRP and Bouncy Castle has too little documentation which can be useful. Is there any information how I can develop java client with TLS-SRP?</p>\n\n<p>Best wishes</p>\n"},{"tags":["java","image-processing"],"comments":[{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":0,"creation_date":1487088394,"post_id":42230820,"comment_id":71621190,"body_markdown":"It&#39;s complicated.  Like, super complicated.  If you&#39;re doing real Swing programming, I&#39;d recommend an O&#39;Reilly book *Swing Hacks* which has information on all the different things you have to check to actually get a mime type from the clipboard.  You also might be able to find the same info on the web, but any solution should have at least 20 to 30 lines of nothing but interrogating the clip.","body":"It&#39;s complicated.  Like, super complicated.  If you&#39;re doing real Swing programming, I&#39;d recommend an O&#39;Reilly book <i>Swing Hacks</i> which has information on all the different things you have to check to actually get a mime type from the clipboard.  You also might be able to find the same info on the web, but any solution should have at least 20 to 30 lines of nothing but interrogating the clip."},{"owner":{"account_id":1531514,"reputation":26639,"user_id":1428606,"accept_rate":71,"display_name":"Harald K"},"score":1,"creation_date":1487169347,"post_id":42230820,"comment_id":71662119,"body_markdown":"`DataFlavor.imageFlavor` *always has the mime-type* `&quot;image/x-java-image&quot;`. This is a custom mime-type, and describes clipboard data represented by the `java.awt.Image` class. I.e. it&#39;s already decoded to pixels, and is not in a file format like JPEG, PNG or GIF. You can choose to store it in any format you like. Maybe you should instead have a look at [`DataFlavor.javaFileListFlavor`](https://docs.oracle.com/javase/7/docs/api/java/awt/datatransfer/DataFlavor.html#javaFileListFlavor)?","body":"<code>DataFlavor.imageFlavor</code> <i>always has the mime-type</i> <code>&quot;image&#47;x-java-image&quot;</code>. This is a custom mime-type, and describes clipboard data represented by the <code>java.awt.Image</code> class. I.e. it&#39;s already decoded to pixels, and is not in a file format like JPEG, PNG or GIF. You can choose to store it in any format you like. Maybe you should instead have a look at <a href=\"https://docs.oracle.com/javase/7/docs/api/java/awt/datatransfer/DataFlavor.html#javaFileListFlavor\" rel=\"nofollow noreferrer\"><code>DataFlavor.javaFileListFlavor</code></a>?"}],"answers":[{"tags":[],"owner":{"account_id":2891924,"reputation":811,"user_id":4906348,"display_name":"Benyamin Limanto"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637243026,"creation_date":1637243026,"answer_id":70020947,"question_id":42230820,"body_markdown":"I tried a crazy approach to check whether it&#39;s JPG/GIF or PNG. When there&#39;s transparency, I use PNG, other than that I always use JPG, and this proven to work also with GIF, just the GIF lost it&#39;s animation tho\r\n\r\n```java\r\n    protected BufferedImage img;\r\n\r\n    protected void loadImage() {\r\n        try {\r\n            // Well we read the temp file first, I test it using local file\r\n            File f = new File(loc);\r\n            // Read the file as Image \r\n            this.img = ImageIO.read(f);\r\n        } catch(Exception e) {\r\n            JOptionPane.showMessageDialog(this, e.getMessage());\r\n        }\r\n        this.revalidate();\r\n        this.repaint();\r\n    }\r\n\r\n    public byte[] toBlob() {\r\n        ByteArrayOutputStream baos = new ByteArrayOutputStream();\r\n        try {\r\n            // Check if this image contains transparency? If no then write as JPG\r\n            if (this.img.getTransparency() == java.awt.Transparency.OPAQUE) {\r\n                ImageIO.write((BufferedImage)this.img, &quot;jpg&quot;, baos);\r\n            } else { // If it does contain transparency then write as PNG\r\n                ImageIO.write((BufferedImage)this.img, &quot;png&quot;, baos);\r\n            }\r\n        } catch(Exception e) {\r\n            JOptionPane.showMessageDialog(this, e.toString());\r\n        }\r\n        byte[] data = baos.toByteArray();\r\n        return data;\r\n    }\r\n    \r\n    public void saveImageToBlob(String location) {\r\n        try {\r\n            File f = new File(location);\r\n            FileOutputStream o = new FileOutputStream(f);\r\n            byte[] d = this.toBlob();\r\n            o.write(d, 0, d.length);\r\n            o.close();\r\n        } catch(Exception e) {\r\n            JOptionPane.showMessageDialog(this, e.toString());\r\n        }\r\n    }\r\n```","title":"Get image mime type from an Image object","body":"<p>I tried a crazy approach to check whether it's JPG/GIF or PNG. When there's transparency, I use PNG, other than that I always use JPG, and this proven to work also with GIF, just the GIF lost it's animation tho</p>\n<pre class=\"lang-java prettyprint-override\"><code>    protected BufferedImage img;\n\n    protected void loadImage() {\n        try {\n            // Well we read the temp file first, I test it using local file\n            File f = new File(loc);\n            // Read the file as Image \n            this.img = ImageIO.read(f);\n        } catch(Exception e) {\n            JOptionPane.showMessageDialog(this, e.getMessage());\n        }\n        this.revalidate();\n        this.repaint();\n    }\n\n    public byte[] toBlob() {\n        ByteArrayOutputStream baos = new ByteArrayOutputStream();\n        try {\n            // Check if this image contains transparency? If no then write as JPG\n            if (this.img.getTransparency() == java.awt.Transparency.OPAQUE) {\n                ImageIO.write((BufferedImage)this.img, &quot;jpg&quot;, baos);\n            } else { // If it does contain transparency then write as PNG\n                ImageIO.write((BufferedImage)this.img, &quot;png&quot;, baos);\n            }\n        } catch(Exception e) {\n            JOptionPane.showMessageDialog(this, e.toString());\n        }\n        byte[] data = baos.toByteArray();\n        return data;\n    }\n    \n    public void saveImageToBlob(String location) {\n        try {\n            File f = new File(location);\n            FileOutputStream o = new FileOutputStream(f);\n            byte[] d = this.toBlob();\n            o.write(d, 0, d.length);\n            o.close();\n        } catch(Exception e) {\n            JOptionPane.showMessageDialog(this, e.toString());\n        }\n    }\n</code></pre>\n"}],"owner":{"account_id":4065672,"reputation":15658,"user_id":3340702,"accept_rate":58,"display_name":"lifeisfoo"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1289,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1637243026,"creation_date":1487088218,"question_id":42230820,"body_markdown":"I&#39;ve a desktop java application that get images from the user clipboard (&quot;paste&quot; action), and I need to check their mime type before further processing (only jpg, png and gif are admitted).\r\n\r\n\r\nI&#39;m using this code to get the image from the clipboard:\r\n\r\n\t  Transferable transferable = Toolkit.getDefaultToolkit().getSystemClipboard().getContents(null);\r\n\t  if (transferable != null &amp;&amp; transferable.isDataFlavorSupported(DataFlavor.imageFlavor)) {\r\n\t    try {\r\n\t      Image pastedImage = (Image) transferable.getTransferData(DataFlavor.imageFlavor);\r\n          // how to get mime type?\r\n\t    } catch (Exception e) {/*cutted for brevity*/}\r\n\t  }\r\n\r\nNow, I know [how to get the mime type from a file using apache Tika](https://stackoverflow.com/a/42229928/3340702) and I&#39;ve tried writing the image to disk in order to reuse this technique, but also the `ImageIO.write` method requires a format name:\r\n\r\n    BufferedImage bi = convertImageToBI(img);\r\n    File outputfile = File.createTempFile(&quot;img_&quot;, &quot;_upload&quot;);\r\n    ImageIO.write(bi, &quot;jpg&quot;, outputfile);\r\n\r\n\r\nTo convert an image to a BufferedImage I&#39;m using [this method](https://stackoverflow.com/a/13605411/3340702). The only difference is that I&#39;m using `TYPE_INT_RGB` instead of `TYPE_INT_ARGB`.\r\n\r\n\r\nHow can I get the pasted image&#39;s mime type?","title":"Get image mime type from an Image object","body":"<p>I've a desktop java application that get images from the user clipboard (\"paste\" action), and I need to check their mime type before further processing (only jpg, png and gif are admitted).</p>\n\n<p>I'm using this code to get the image from the clipboard:</p>\n\n<pre><code>  Transferable transferable = Toolkit.getDefaultToolkit().getSystemClipboard().getContents(null);\n  if (transferable != null &amp;&amp; transferable.isDataFlavorSupported(DataFlavor.imageFlavor)) {\n    try {\n      Image pastedImage = (Image) transferable.getTransferData(DataFlavor.imageFlavor);\n      // how to get mime type?\n    } catch (Exception e) {/*cutted for brevity*/}\n  }\n</code></pre>\n\n<p>Now, I know <a href=\"https://stackoverflow.com/a/42229928/3340702\">how to get the mime type from a file using apache Tika</a> and I've tried writing the image to disk in order to reuse this technique, but also the <code>ImageIO.write</code> method requires a format name:</p>\n\n<pre><code>BufferedImage bi = convertImageToBI(img);\nFile outputfile = File.createTempFile(\"img_\", \"_upload\");\nImageIO.write(bi, \"jpg\", outputfile);\n</code></pre>\n\n<p>To convert an image to a BufferedImage I'm using <a href=\"https://stackoverflow.com/a/13605411/3340702\">this method</a>. The only difference is that I'm using <code>TYPE_INT_RGB</code> instead of <code>TYPE_INT_ARGB</code>.</p>\n\n<p>How can I get the pasted image's mime type?</p>\n"},{"tags":["java","lambda"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1637207447,"post_id":70014331,"comment_id":123766377,"body_markdown":"Why can&#39;t you add a filter? Please explain in more detail.","body":"Why can&#39;t you add a filter? Please explain in more detail."},{"owner":{"account_id":21094536,"reputation":95,"user_id":15505795,"display_name":"Romeu Fernandes Bessa"},"score":0,"creation_date":1637207769,"post_id":70014331,"comment_id":123766420,"body_markdown":"Sorry, I described it better. Can you take a look?","body":"Sorry, I described it better. Can you take a look?"}],"answers":[{"tags":[],"owner":{"account_id":11286318,"reputation":1593,"user_id":8277159,"display_name":"Mazedul Islam"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637209762,"creation_date":1637209762,"answer_id":70014589,"question_id":70014331,"body_markdown":"Please let me know if it works or not.\r\n\r\n    listaInscricaoTipoTrab\r\n        .stream()\r\n        .mapToInt(itt -&gt; \r\n                itt.getInscricaoTipoTrabalhoAutores()\r\n                    .stream()\r\n                    .filter(tta -&gt; tta.getAutorCoautor().equals(AutorCoautor.AUTOR))\r\n                    .mapToInt(List::size)\r\n                    .sum()\r\n        .sum();\r\n","title":"Filter to list after check of nullable","body":"<p>Please let me know if it works or not.</p>\n<pre><code>listaInscricaoTipoTrab\n    .stream()\n    .mapToInt(itt -&gt; \n            itt.getInscricaoTipoTrabalhoAutores()\n                .stream()\n                .filter(tta -&gt; tta.getAutorCoautor().equals(AutorCoautor.AUTOR))\n                .mapToInt(List::size)\n                .sum()\n    .sum();\n</code></pre>\n"}],"owner":{"account_id":21094536,"reputation":95,"user_id":15505795,"display_name":"Romeu Fernandes Bessa"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":129,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1637242891,"creation_date":1637207212,"question_id":70014331,"body_markdown":"I&#39;m trying to scroll through a list within another list to retrieve its size, but I need to add the filter to that list, but I can&#39;t imagine how I could do that. Someone help?\r\n```java\r\nlistaInscricaoTipoTrab.stream().mapToInt(itt -&gt; Optional.ofNullable(itt.getInscricaoTipoTrabalhoAutores()).map(List::size).orElse(0)).sum()\r\n```\r\n\r\nInside the `getInscricaoTipoTrabalhoAutores()` I have an ENUM `getAutorCoautor()` where I want it to count only when the `getAutorCoautor().equals(AutorCoautor.AUTOR)`.\r\nIn the end, I want you to return the number of objects in the listInscricaoTipoTrab with the same type of AutorCoautor was found, if you don&#39;t find anything, it will return 0.\r\n\r\nI tried this but without success:\r\n```java\r\nlistaInscricaoTipoTrab.stream().mapToInt(itt -&gt; Optional.ofNullable(itt.getInscricaoTipoTrabalhoAutores().stream().filter(tta -&gt; tta.getAutorCoautor().equals(AutorCoautor.AUTOR)).collect(Collectors.toList())).map(List::size).orElse(0)).sum()\r\n```\r\n\r\nError:\r\n\r\n```\r\n    java.lang.NullPointerException: null\r\n    \tat br.pucpr.pergamum.eventos.view.vm.SubmeterTrabalhoViewModel.lambda$12(Unknown Source)\r\n    \tat java.util.stream.ReferencePipeline$7$1.accept(ReferencePipeline.java:269)\r\n    \tat java.util.Iterator.forEachRemaining(Iterator.java:116)\r\n    \tat java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)\r\n    \tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\r\n    \tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\r\n    \tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\r\n    \tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n    \tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566)\r\n```","title":"Filter to list after check of nullable","body":"<p>I'm trying to scroll through a list within another list to retrieve its size, but I need to add the filter to that list, but I can't imagine how I could do that. Someone help?</p>\n<pre class=\"lang-java prettyprint-override\"><code>listaInscricaoTipoTrab.stream().mapToInt(itt -&gt; Optional.ofNullable(itt.getInscricaoTipoTrabalhoAutores()).map(List::size).orElse(0)).sum()\n</code></pre>\n<p>Inside the <code>getInscricaoTipoTrabalhoAutores()</code> I have an ENUM <code>getAutorCoautor()</code> where I want it to count only when the <code>getAutorCoautor().equals(AutorCoautor.AUTOR)</code>.\nIn the end, I want you to return the number of objects in the listInscricaoTipoTrab with the same type of AutorCoautor was found, if you don't find anything, it will return 0.</p>\n<p>I tried this but without success:</p>\n<pre class=\"lang-java prettyprint-override\"><code>listaInscricaoTipoTrab.stream().mapToInt(itt -&gt; Optional.ofNullable(itt.getInscricaoTipoTrabalhoAutores().stream().filter(tta -&gt; tta.getAutorCoautor().equals(AutorCoautor.AUTOR)).collect(Collectors.toList())).map(List::size).orElse(0)).sum()\n</code></pre>\n<p>Error:</p>\n<pre><code>    java.lang.NullPointerException: null\n        at br.pucpr.pergamum.eventos.view.vm.SubmeterTrabalhoViewModel.lambda$12(Unknown Source)\n        at java.util.stream.ReferencePipeline$7$1.accept(ReferencePipeline.java:269)\n        at java.util.Iterator.forEachRemaining(Iterator.java:116)\n        at java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801)\n        at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n        at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n        at java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n        at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n        at java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:566)\n</code></pre>\n"},{"tags":["java","json","jackson","mapper"],"comments":[{"owner":{"account_id":1706562,"reputation":2945,"user_id":1565503,"accept_rate":27,"display_name":"Benoit Vanalderweireldt"},"score":1,"creation_date":1460491177,"post_id":36582892,"comment_id":60764746,"body_markdown":"Your Json String is invalid, test it here : http://jsonlint.com","body":"Your Json String is invalid, test it here : <a href=\"http://jsonlint.com\" rel=\"nofollow noreferrer\">jsonlint.com</a>"},{"owner":{"account_id":3421968,"reputation":1481,"user_id":2869231,"accept_rate":78,"display_name":"user2869231"},"score":0,"creation_date":1460491279,"post_id":36582892,"comment_id":60764821,"body_markdown":"how so? and apparently this comment needs 15 characters in order to add it","body":"how so? and apparently this comment needs 15 characters in order to add it"},{"owner":{"account_id":3421968,"reputation":1481,"user_id":2869231,"accept_rate":78,"display_name":"user2869231"},"score":0,"creation_date":1460491495,"post_id":36582892,"comment_id":60764935,"body_markdown":"or rather, how would I make it valid?  Clearly the issue is in not having the quotes.  Would I have to do some nasty splits?","body":"or rather, how would I make it valid?  Clearly the issue is in not having the quotes.  Would I have to do some nasty splits?"},{"owner":{"account_id":6614711,"reputation":29121,"user_id":5108418,"accept_rate":72,"display_name":"Tamas Hegedus"},"score":2,"creation_date":1460491543,"post_id":36582892,"comment_id":60764971,"body_markdown":"Just to be clear: that is not Json, just Json-like. I dont think jackson can handle unquoted sring values, only unquoted keys are supported. This answer might help you: http://stackoverflow.com/a/34794445/5108418","body":"Just to be clear: that is not Json, just Json-like. I dont think jackson can handle unquoted sring values, only unquoted keys are supported. This answer might help you: <a href=\"http://stackoverflow.com/a/34794445/5108418\">stackoverflow.com/a/34794445/5108418</a>"},{"owner":{"account_id":2682926,"reputation":2686,"user_id":2317875,"display_name":"unigeek"},"score":1,"creation_date":1460491849,"post_id":36582892,"comment_id":60765162,"body_markdown":"You might look into the GSON library rather than Jackson. See http://stackoverflow.com/questions/20557131/gson-parse-unquoted-value","body":"You might look into the GSON library rather than Jackson. See <a href=\"http://stackoverflow.com/questions/20557131/gson-parse-unquoted-value\" title=\"gson parse unquoted value\">stackoverflow.com/questions/20557131/gson-parse-unquoted-val&zwnj;&#8203;ue</a>"},{"owner":{"account_id":3421968,"reputation":1481,"user_id":2869231,"accept_rate":78,"display_name":"user2869231"},"score":0,"creation_date":1460494335,"post_id":36582892,"comment_id":60766511,"body_markdown":"dang.  Well after inspection, the String comes from using a mapper.writeValueAsString(map).  That map is essentially the one I&#39;m aiming to get.  So to get around this problem, I should be able to replace the writeValueAsString with something that will escape the quotes inside of the map when writing it as a string.  Is there a way of doing that?","body":"dang.  Well after inspection, the String comes from using a mapper.writeValueAsString(map).  That map is essentially the one I&#39;m aiming to get.  So to get around this problem, I should be able to replace the writeValueAsString with something that will escape the quotes inside of the map when writing it as a string.  Is there a way of doing that?"},{"owner":{"account_id":6501856,"reputation":6516,"user_id":5032339,"display_name":"Roman"},"score":0,"creation_date":1636750450,"post_id":36582892,"comment_id":123649176,"body_markdown":"This json looks like yaml and could be parsed as such","body":"This json looks like yaml and could be parsed as such"}],"answers":[{"tags":[],"owner":{"account_id":1706562,"reputation":2945,"user_id":1565503,"accept_rate":27,"display_name":"Benoit Vanalderweireldt"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1460491833,"creation_date":1460491284,"answer_id":36582975,"question_id":36582892,"body_markdown":"The ObjectMapper won&#39;t be able to parse the Json input if it&#39;s not valid, so the answer is no.\r\n\r\nTest your Json here : http://jsonlint.com/\r\n\r\nAfter correcting the Json input you could do :\r\n\r\n\t\tObjectMapper ob = new ObjectMapper();\r\n\t\tob.configure(Feature.ALLOW_UNQUOTED_FIELD_NAMES, true);\r\n\t\tString json = &quot;{name: \\&quot;Bob\\&quot;, state: \\&quot;Colorado\\&quot;, Friends: [{ name: \\&quot;Dan\\&quot;, age: 23 }, {name: \\&quot;Zane\\&quot;, age: 24 }]}&quot;;\r\n\t\t\r\n\t\tMap&lt;String, ObjectNode&gt; theMap = ob.readValue(json, Map.class);\r\n\t\tSystem.out.println(theMap.get(&quot;name&quot;));\r\n\r\nWill print :\r\n &gt; Bob","title":"Convert json string without quotes into a map","body":"<p>The ObjectMapper won't be able to parse the Json input if it's not valid, so the answer is no.</p>\n\n<p>Test your Json here : <a href=\"http://jsonlint.com/\" rel=\"nofollow\">http://jsonlint.com/</a></p>\n\n<p>After correcting the Json input you could do :</p>\n\n<pre><code>    ObjectMapper ob = new ObjectMapper();\n    ob.configure(Feature.ALLOW_UNQUOTED_FIELD_NAMES, true);\n    String json = \"{name: \\\"Bob\\\", state: \\\"Colorado\\\", Friends: [{ name: \\\"Dan\\\", age: 23 }, {name: \\\"Zane\\\", age: 24 }]}\";\n\n    Map&lt;String, ObjectNode&gt; theMap = ob.readValue(json, Map.class);\n    System.out.println(theMap.get(\"name\"));\n</code></pre>\n\n<p>Will print :</p>\n\n<blockquote>\n  <p>Bob</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":6006707,"reputation":882,"user_id":4718420,"display_name":"Brian"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1460491675,"creation_date":1460491675,"answer_id":36583088,"question_id":36582892,"body_markdown":"To answer your question: There is no **safe** way of getting your JSON - which is not JSON by the way, because it&#39;s invalid - converted into a `Map&lt;String, Object&gt;`.\r\n\r\nLet me elaborate just a little bit (why can&#39;t it be parsed safely?):\r\nImagine a &quot;JSON&quot; like this:\r\n\r\n    {\r\n        this is my key: and here&#39;s my value and it even has a colon:\r\n    }\r\n\r\nValid JSON would look something like this\r\n\r\n    {\r\n        &quot;this is my key&quot;: &quot;and here&#39;s my value and it even has a colon:&quot;\r\n    }\r\n\r\nWith the quotes a parser can safely determine keys and values. Without them a parser is lost.","title":"Convert json string without quotes into a map","body":"<p>To answer your question: There is no <strong>safe</strong> way of getting your JSON - which is not JSON by the way, because it's invalid - converted into a <code>Map&lt;String, Object&gt;</code>.</p>\n\n<p>Let me elaborate just a little bit (why can't it be parsed safely?):\nImagine a \"JSON\" like this:</p>\n\n<pre><code>{\n    this is my key: and here's my value and it even has a colon:\n}\n</code></pre>\n\n<p>Valid JSON would look something like this</p>\n\n<pre><code>{\n    \"this is my key\": \"and here's my value and it even has a colon:\"\n}\n</code></pre>\n\n<p>With the quotes a parser can safely determine keys and values. Without them a parser is lost.</p>\n"},{"tags":[],"owner":{"account_id":15882677,"reputation":19,"user_id":11460018,"display_name":"张凡杭"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1557153555,"creation_date":1557153555,"answer_id":56007410,"question_id":36582892,"body_markdown":"you may could use the following code to preprocess the json string and then parse it.\r\n\r\n    \r\n\r\n    String str = (&quot;{requestid:\\&quot;55275645.f213506045\\&quot;,timestamp:\\&quot;213506045\\&quot;,bidnumber:\\&quot;55275645\\&quot;,checkcode:\\&quot;1f6ad033de64d1c6357af34d4a38e9e3\\&quot;,version:\\&quot;1.0\\&quot;,request:{token:ee4e90c2-7a8b-4c73-bd48-1bda7e6734d5,referenceId:0.5878463922999799}}&quot;);\r\n        str = (str.replaceAll(&quot;:\\&quot;?([^{|^]*?)\\&quot;?(?=[,|}|\\\\]])&quot;,&quot;:\\&quot;$1\\&quot;&quot;).replaceAll(&quot;\\&quot;?(\\\\w+)\\&quot;?(?=:)&quot;,&quot;\\&quot;$1\\&quot;&quot;));\r\n        JSONObject obj = JSON.parseObject(str);\r\n        System.out.println(obj.getJSONObject(&quot;request&quot;).getString(&quot;token&quot;));\r\n\r\n","title":"Convert json string without quotes into a map","body":"<p>you may could use the following code to preprocess the json string and then parse it.</p>\n\n<pre><code>String str = (\"{requestid:\\\"55275645.f213506045\\\",timestamp:\\\"213506045\\\",bidnumber:\\\"55275645\\\",checkcode:\\\"1f6ad033de64d1c6357af34d4a38e9e3\\\",version:\\\"1.0\\\",request:{token:ee4e90c2-7a8b-4c73-bd48-1bda7e6734d5,referenceId:0.5878463922999799}}\");\n    str = (str.replaceAll(\":\\\"?([^{|^]*?)\\\"?(?=[,|}|\\\\]])\",\":\\\"$1\\\"\").replaceAll(\"\\\"?(\\\\w+)\\\"?(?=:)\",\"\\\"$1\\\"\"));\n    JSONObject obj = JSON.parseObject(str);\n    System.out.println(obj.getJSONObject(\"request\").getString(\"token\"));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":706860,"reputation":9592,"user_id":601844,"display_name":"epox"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1636749846,"creation_date":1583979819,"answer_id":60646781,"question_id":36582892,"body_markdown":"\r\nSINCE GSON v2.8.6\r\n-- \r\n\r\nObjectMapper with jackson fasterxml doesn&#39;t support values without quotes, but GSON does:\r\n\r\n    import com.fasterxml.jackson.databind.JsonNode;\r\n    import com.fasterxml.jackson.databind.ObjectMapper;\r\n    import com.google.gson.JsonParser;\r\n.\r\n\r\n      JsonNode json = json(&quot;{&quot;\r\n          + &quot;  name: Bob,      &quot;\r\n          + &quot;  state: Colorado,&quot;\r\n          + &quot;  Friends: [      &quot;\r\n          + &quot;    {&quot;\r\n          + &quot;      name: Dan,  &quot;\r\n          + &quot;      age: 23     &quot;\r\n          + &quot;    },&quot;\r\n          + &quot;    {&quot;\r\n          + &quot;      name: Zane, &quot;\r\n          + &quot;      age: 24     &quot;\r\n          + &quot;     }&quot;\r\n          + &quot;  ],&quot;\r\n          + &quot;  extra: \\&quot;text with spaces or colon(:) must be quoted\\&quot;&quot;\r\n          + &quot;}&quot;);\r\n\r\n      Map m = new ObjectMapper().convertValue(json, Map.class);\r\n.\r\n\r\n    JsonNode json(String content) throws IOException {\r\n\r\n      String canonicalFormat = JsonParser.parseString(content).toString();\r\n      return json.readTree(canonicalFormat);\r\n    }\r\n\r\n---\r\nEARLIER GSON\r\n-- \r\nBefore v2.8.6 GSON didn&#39;t have the static parseString method. So you should use the (deprecated in higher versions) instance method:\r\n\r\n\r\n    JsonNode json(String content) throws IOException {\r\n\r\n      String canonicalFormat = new JsonParser().parse(content).toString();\r\n      return json.readTree(canonicalFormat);\r\n    }\r\n\r\n---\r\n**SINCE Java 15**\r\n--\r\n\r\nNOTE: we expect Java 15 will support unescaped double-quotes as is:\r\n\r\n    var json = &quot;&quot;&quot;\r\n            {&quot;name&quot;: &quot;Bob&quot;, &quot;state&quot;: &quot;Colorado&quot;, &quot;Friends&quot;: [{ &quot;name&quot;: &quot;Dan&quot;, &quot;age&quot;: 23 }, {&quot;name&quot;: &quot;Zane&quot;, &quot;age&quot;: 24 }]} &quot;&quot;&quot;;\r\n\r\n[more details][1]\r\n\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/59839267/601844","title":"Convert json string without quotes into a map","body":"<h2>SINCE GSON v2.8.6</h2>\n<p>ObjectMapper with jackson fasterxml doesn't support values without quotes, but GSON does:</p>\n<pre><code>import com.fasterxml.jackson.databind.JsonNode;\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport com.google.gson.JsonParser;\n</code></pre>\n<p>.</p>\n<pre><code>  JsonNode json = json(&quot;{&quot;\n      + &quot;  name: Bob,      &quot;\n      + &quot;  state: Colorado,&quot;\n      + &quot;  Friends: [      &quot;\n      + &quot;    {&quot;\n      + &quot;      name: Dan,  &quot;\n      + &quot;      age: 23     &quot;\n      + &quot;    },&quot;\n      + &quot;    {&quot;\n      + &quot;      name: Zane, &quot;\n      + &quot;      age: 24     &quot;\n      + &quot;     }&quot;\n      + &quot;  ],&quot;\n      + &quot;  extra: \\&quot;text with spaces or colon(:) must be quoted\\&quot;&quot;\n      + &quot;}&quot;);\n\n  Map m = new ObjectMapper().convertValue(json, Map.class);\n</code></pre>\n<p>.</p>\n<pre><code>JsonNode json(String content) throws IOException {\n\n  String canonicalFormat = JsonParser.parseString(content).toString();\n  return json.readTree(canonicalFormat);\n}\n</code></pre>\n<hr />\n<h2>EARLIER GSON</h2>\n<p>Before v2.8.6 GSON didn't have the static parseString method. So you should use the (deprecated in higher versions) instance method:</p>\n<pre><code>JsonNode json(String content) throws IOException {\n\n  String canonicalFormat = new JsonParser().parse(content).toString();\n  return json.readTree(canonicalFormat);\n}\n</code></pre>\n<hr />\n<h2><strong>SINCE Java 15</strong></h2>\n<p>NOTE: we expect Java 15 will support unescaped double-quotes as is:</p>\n<pre><code>var json = &quot;&quot;&quot;\n        {&quot;name&quot;: &quot;Bob&quot;, &quot;state&quot;: &quot;Colorado&quot;, &quot;Friends&quot;: [{ &quot;name&quot;: &quot;Dan&quot;, &quot;age&quot;: 23 }, {&quot;name&quot;: &quot;Zane&quot;, &quot;age&quot;: 24 }]} &quot;&quot;&quot;;\n</code></pre>\n<p><a href=\"https://stackoverflow.com/a/59839267/601844\">more details</a></p>\n"},{"tags":[],"owner":{"account_id":7181856,"reputation":149,"user_id":5485463,"display_name":"Dhruv"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1587408793,"creation_date":1587408793,"answer_id":61329876,"question_id":36582892,"body_markdown":"We can convert such a json to a Map using Apache Commons and Guava base libraries.\r\nExample:\r\n    Input - {name=jack, id=4}\r\n    Output - Map(name = jack, id = 4)\r\n\r\n    import com.google.common.base.Splitter;\r\n    import org.apache.commons.lang.StringUtils;\r\n\r\n    String input = StringUtils.substringBetween(value, &quot;{&quot;, &quot;}&quot;);\r\n    Map&lt;String, String&gt; map = \r\n    Splitter.on(&quot;,&quot;).withKeyValueSeparator(&quot;=&quot;).split(input);\r\n","title":"Convert json string without quotes into a map","body":"<p>We can convert such a json to a Map using Apache Commons and Guava base libraries.\nExample:\n    Input - {name=jack, id=4}\n    Output - Map(name = jack, id = 4)</p>\n\n<pre><code>import com.google.common.base.Splitter;\nimport org.apache.commons.lang.StringUtils;\n\nString input = StringUtils.substringBetween(value, \"{\", \"}\");\nMap&lt;String, String&gt; map = \nSplitter.on(\",\").withKeyValueSeparator(\"=\").split(input);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1269197,"reputation":93,"user_id":1225876,"display_name":"Satishchandra Pandey"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637242891,"creation_date":1637242891,"answer_id":70020907,"question_id":36582892,"body_markdown":"    ObjectMapper om=new ObjectMapper();\r\n    om.configure(com.fasterxml.jackson.core.JsonParser.Feature.ALLOW_UNQUOTED_FIELD_NAMES, true);\r\n\r\n    List&lt;RootMember&gt; outputList;\r\n    try {\r\n        ObjectMapper mapper = new ObjectMapper();\r\n        String json = mapper.writeValueAsString(resp); \r\n        outputList = om.readValue(json, new TypeReference&lt;List&lt;RootMember&gt;&gt;(){});\r\n    } catch (JsonMappingException e) {\r\n        // TODO Auto-generated catch block\r\n        e.printStackTrace();\r\n    } catch (JsonProcessingException e) {\r\n        // TODO Auto-generated catch block\r\n        e.printStackTrace();\r\n    }","title":"Convert json string without quotes into a map","body":"<pre><code>ObjectMapper om=new ObjectMapper();\nom.configure(com.fasterxml.jackson.core.JsonParser.Feature.ALLOW_UNQUOTED_FIELD_NAMES, true);\n\nList&lt;RootMember&gt; outputList;\ntry {\n    ObjectMapper mapper = new ObjectMapper();\n    String json = mapper.writeValueAsString(resp); \n    outputList = om.readValue(json, new TypeReference&lt;List&lt;RootMember&gt;&gt;(){});\n} catch (JsonMappingException e) {\n    // TODO Auto-generated catch block\n    e.printStackTrace();\n} catch (JsonProcessingException e) {\n    // TODO Auto-generated catch block\n    e.printStackTrace();\n}\n</code></pre>\n"}],"owner":{"account_id":3421968,"reputation":1481,"user_id":2869231,"accept_rate":78,"display_name":"user2869231"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":31234,"favorite_count":0,"down_vote_count":0,"up_vote_count":20,"answer_count":6,"score":20,"last_activity_date":1637242891,"creation_date":1460491008,"question_id":36582892,"body_markdown":"I have a string that is in Json format, only none of the keys or values are surrounded by quotes.  For example, I have this:\r\n\r\n    String json = &quot;{name: Bob, state: Colorado, Friends: [{ name: Dan, age: 23 }, {name: Zane, age: 24 }]}&quot;\r\n\r\nI want this to become a map that looks like so:\r\n\r\n    Map&lt;String, Object&gt; friend1Map = new HashMap&lt;&gt;();\r\n    friend1Map.put(&quot;name&quot;, &quot;Dan&quot;);\r\n    friend1Map.put(&quot;age&quot;, 23);\r\n\r\n    Map&lt;String, Object&gt; friend2Map = new Hashmap&lt;&gt;();\r\n    friend2Map.put(&quot;name&quot;, &quot;Zane&quot;);\r\n    friend2Map.put(&quot;age&quot;, 24);\r\n\r\n    Map&lt;String, Object&gt; newMap = new HashMap&lt;&gt;();\r\n    newMap.put(&quot;name&quot;, &quot;Bob&quot;);\r\n    newMap.put(&quot;state&quot;, &quot;Colorado&quot;);\r\n    newMap.put(&quot;Friends&quot;, Arrays.asList(friend1Map, friend2Map));\r\n\r\nI have tried the following two methods:\r\n\r\n    ObjectMapper mapper = new ObjectMapper();\r\n    mapper.readValue(json, new TypeReference&lt;Map&lt;String, Object&gt;&gt;() {});\r\n\r\nThis will throw an error, saying:\r\n\r\n    Unexpected character (&#39;n&#39;): was expecting double-quote to start field name\r\n\r\nThen I tried changing the config of mapper:\r\n\r\n    mapper.configure(JsonParser.Feature.ALLOW_UNQUOTED_FIELD_NAMES, true);\r\n    mapper.readValue(json, new TypeReference&lt;Map&lt;String, Object&gt;&gt;() {});\r\n\r\nBut this threw an error saying:\r\n\r\n    com.fasterxml.jackson.core.JsonParseException: Unrecognized token &#39;Bob&#39;: was expecting (&#39;true&#39;, &#39;false&#39; or &#39;null&#39;)\r\n    at [Source: {name: Bob, state: Colorado, Friends: [{ name: Dan, age: 23 }, {name: Zane, age: 24 }]}; line: 1, column: 11]\r\n\r\nIs there a way of getting this Map when quotes aren&#39;t included in the json string?","title":"Convert json string without quotes into a map","body":"<p>I have a string that is in Json format, only none of the keys or values are surrounded by quotes.  For example, I have this:</p>\n\n<pre><code>String json = \"{name: Bob, state: Colorado, Friends: [{ name: Dan, age: 23 }, {name: Zane, age: 24 }]}\"\n</code></pre>\n\n<p>I want this to become a map that looks like so:</p>\n\n<pre><code>Map&lt;String, Object&gt; friend1Map = new HashMap&lt;&gt;();\nfriend1Map.put(\"name\", \"Dan\");\nfriend1Map.put(\"age\", 23);\n\nMap&lt;String, Object&gt; friend2Map = new Hashmap&lt;&gt;();\nfriend2Map.put(\"name\", \"Zane\");\nfriend2Map.put(\"age\", 24);\n\nMap&lt;String, Object&gt; newMap = new HashMap&lt;&gt;();\nnewMap.put(\"name\", \"Bob\");\nnewMap.put(\"state\", \"Colorado\");\nnewMap.put(\"Friends\", Arrays.asList(friend1Map, friend2Map));\n</code></pre>\n\n<p>I have tried the following two methods:</p>\n\n<pre><code>ObjectMapper mapper = new ObjectMapper();\nmapper.readValue(json, new TypeReference&lt;Map&lt;String, Object&gt;&gt;() {});\n</code></pre>\n\n<p>This will throw an error, saying:</p>\n\n<pre><code>Unexpected character ('n'): was expecting double-quote to start field name\n</code></pre>\n\n<p>Then I tried changing the config of mapper:</p>\n\n<pre><code>mapper.configure(JsonParser.Feature.ALLOW_UNQUOTED_FIELD_NAMES, true);\nmapper.readValue(json, new TypeReference&lt;Map&lt;String, Object&gt;&gt;() {});\n</code></pre>\n\n<p>But this threw an error saying:</p>\n\n<pre><code>com.fasterxml.jackson.core.JsonParseException: Unrecognized token 'Bob': was expecting ('true', 'false' or 'null')\nat [Source: {name: Bob, state: Colorado, Friends: [{ name: Dan, age: 23 }, {name: Zane, age: 24 }]}; line: 1, column: 11]\n</code></pre>\n\n<p>Is there a way of getting this Map when quotes aren't included in the json string?</p>\n"},{"tags":["java","spring","redis","spring-data"],"comments":[{"owner":{"account_id":4014463,"reputation":1644,"user_id":3307037,"accept_rate":50,"display_name":"Enoobong"},"score":0,"creation_date":1596613636,"post_id":57573289,"comment_id":111864170,"body_markdown":"Hi @aksh1618, where you able to resolve this? What was your workaround? Saw this https://jira.spring.io/browse/DATAREDIS-570 but no fix yet","body":"Hi @aksh1618, where you able to resolve this? What was your workaround? Saw this <a href=\"https://jira.spring.io/browse/DATAREDIS-570\" rel=\"nofollow noreferrer\">jira.spring.io/browse/DATAREDIS-570</a> but no fix yet"},{"owner":{"account_id":8460659,"reputation":2301,"user_id":6346531,"display_name":"aksh1618"},"score":0,"creation_date":1596637729,"post_id":57573289,"comment_id":111876086,"body_markdown":"@Enoobong I had to resort to filtering everywhere I used `findAll`: `StreamSupport.stream(myRedisRepository.findAll().spliterator(), false).filter(Objects::nonNull)`","body":"@Enoobong I had to resort to filtering everywhere I used <code>findAll</code>: <code>StreamSupport.stream(myRedisRepository.findAll().spliterator&zwnj;&#8203;(), false).filter(Objects::nonNull)</code>"},{"owner":{"account_id":4014463,"reputation":1644,"user_id":3307037,"accept_rate":50,"display_name":"Enoobong"},"score":0,"creation_date":1596638766,"post_id":57573289,"comment_id":111876646,"body_markdown":"Ok thanks, me too &#128532;","body":"Ok thanks, me too 😔"}],"answers":[{"tags":[],"owner":{"account_id":3472518,"reputation":96,"user_id":2906505,"display_name":"Dmytro H."},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637242718,"creation_date":1637241040,"answer_id":70020446,"question_id":57573289,"body_markdown":"As mentioned by @Enoobong there is open issue  https://jira.spring.io/browse/DATAREDIS-570 (and there is a **workaround** added this September)\r\nIt is open for 5 years.\r\n\r\nThat means you should use RedishHash with TTL very carefully:\r\n\r\n - Make sure your Redis server allows your app to &#39;CONFIGURE&#39; keyspace events\r\n - Make sure you have a workaround from github issue\r\n\r\nBut that is still not recommended as production-ready solution (I mean configuring kayspace events from app annotation) so please consider putting this to the application logic to keep the scheduler to remove outdated records.\r\nAlso this meens you need to handle null values returned from the repo until that issue is fixed.\r\n","title":"Spring Data Redis Repository returning null for expired entries","body":"<p>As mentioned by @Enoobong there is open issue  <a href=\"https://jira.spring.io/browse/DATAREDIS-570\" rel=\"nofollow noreferrer\">https://jira.spring.io/browse/DATAREDIS-570</a> (and there is a <strong>workaround</strong> added this September)\nIt is open for 5 years.</p>\n<p>That means you should use RedishHash with TTL very carefully:</p>\n<ul>\n<li>Make sure your Redis server allows your app to 'CONFIGURE' keyspace events</li>\n<li>Make sure you have a workaround from github issue</li>\n</ul>\n<p>But that is still not recommended as production-ready solution (I mean configuring kayspace events from app annotation) so please consider putting this to the application logic to keep the scheduler to remove outdated records.\nAlso this meens you need to handle null values returned from the repo until that issue is fixed.</p>\n"}],"owner":{"account_id":8460659,"reputation":2301,"user_id":6346531,"display_name":"aksh1618"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2129,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1637242718,"creation_date":1566302805,"question_id":57573289,"body_markdown":"I&#39;m using a `CrudRepository` for connecting to Redis in my Spring Boot application and a `@TimeToLive` annotated field in the entity for expiration:\r\n\r\n```java\r\n@RedisHash(&quot;keyspace&quot;)\r\npublic class MyRedisEntity {\r\n    @Id String key;\r\n    MyPojo pojo;\r\n    @TimeToLive Long ttl;\r\n}\r\n\r\npublic interface MyRedisRepository extends CrudRepository&lt;MyRedisEntity, String&gt;{}\r\n```\r\n\r\nNow when the expiration has taken place, `myRedisRepo.findAll()` returns null for the expired entities. I discovered redis (or spring-data redis) stores all inserted entities&#39; id in a set with the keyspace as key:\r\n\r\n```redis\r\nredis-cli&gt; smembers keyspace\r\n0) key0\r\n1) key1\r\n2) key2\r\n...\r\nredis-cli&gt; hgetall key0\r\n(empty list or set)\r\n```\r\n\r\nI suspect this set is used for the `findAll` call, returning null for ids no longer present as hashmaps due to expiration. Also, I tried using a listener for `RedisKeyExpiredEvent`, using the repository&#39;s delete method in `onApplicationEvent`, but that doesn&#39;t help.\r\n\r\n```java\r\n@Component\r\npublic class RedisExpirationListener implements ApplicationListener&lt;RedisKeyExpiredEvent&gt; {\r\n\r\n    private MyRedisRepository myRedisRepository;\r\n\r\n    @Autowired\r\n    public RedisExpirationListener(MyRedisRepository myRedisRepository) {\r\n        this.myRedisRepository = myRedisRepository;\r\n    }\r\n\r\n    @Override\r\n    public void onApplicationEvent(RedisKeyExpiredEvent redisKeyExpiredEvent) {\r\n        if (redisKeyExpiredEvent.getKeyspace().equals(&quot;keyspace&quot;)) {\r\n            myRedisRepository.deleteById(new String(redisKeyExpiredEvent.getId()));\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nWhat should I do to get only non null entries? Ideally I&#39;d want the expired entries to be deleted entirely from redis and thus not appear in `findAll`, but it&#39;d be sufficient if a repository method could return list of non null values.\r\n\r\n(And yes, I know about the phantom behaviour, but I don&#39;t think it&#39;s relevant to what I want)","title":"Spring Data Redis Repository returning null for expired entries","body":"<p>I'm using a <code>CrudRepository</code> for connecting to Redis in my Spring Boot application and a <code>@TimeToLive</code> annotated field in the entity for expiration:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@RedisHash(\"keyspace\")\npublic class MyRedisEntity {\n    @Id String key;\n    MyPojo pojo;\n    @TimeToLive Long ttl;\n}\n\npublic interface MyRedisRepository extends CrudRepository&lt;MyRedisEntity, String&gt;{}\n</code></pre>\n\n<p>Now when the expiration has taken place, <code>myRedisRepo.findAll()</code> returns null for the expired entities. I discovered redis (or spring-data redis) stores all inserted entities' id in a set with the keyspace as key:</p>\n\n<pre><code>redis-cli&gt; smembers keyspace\n0) key0\n1) key1\n2) key2\n...\nredis-cli&gt; hgetall key0\n(empty list or set)\n</code></pre>\n\n<p>I suspect this set is used for the <code>findAll</code> call, returning null for ids no longer present as hashmaps due to expiration. Also, I tried using a listener for <code>RedisKeyExpiredEvent</code>, using the repository's delete method in <code>onApplicationEvent</code>, but that doesn't help.</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@Component\npublic class RedisExpirationListener implements ApplicationListener&lt;RedisKeyExpiredEvent&gt; {\n\n    private MyRedisRepository myRedisRepository;\n\n    @Autowired\n    public RedisExpirationListener(MyRedisRepository myRedisRepository) {\n        this.myRedisRepository = myRedisRepository;\n    }\n\n    @Override\n    public void onApplicationEvent(RedisKeyExpiredEvent redisKeyExpiredEvent) {\n        if (redisKeyExpiredEvent.getKeyspace().equals(\"keyspace\")) {\n            myRedisRepository.deleteById(new String(redisKeyExpiredEvent.getId()));\n        }\n    }\n}\n</code></pre>\n\n<p>What should I do to get only non null entries? Ideally I'd want the expired entries to be deleted entirely from redis and thus not appear in <code>findAll</code>, but it'd be sufficient if a repository method could return list of non null values.</p>\n\n<p>(And yes, I know about the phantom behaviour, but I don't think it's relevant to what I want)</p>\n"},{"tags":["java","websphere"],"answers":[{"tags":[],"owner":{"account_id":34986,"reputation":17510,"user_id":98959,"display_name":"covener"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1637242617,"creation_date":1637241605,"answer_id":70020591,"question_id":70020357,"body_markdown":"&quot;WebSphere&quot; can refer to a product or one of the runtimes available in that product.\r\n\r\nWebSphere contains two EE runtimes, WebSphere Liberty and the older WebSphere Application Server traditional.\r\n\r\n - WebSphere Liberty supports Java 17, but not 14. \r\n - WebSphere Application Server traditional doesn&#39;t support anything after Java 8.\r\n\r\nYour best bet is to run the code requiring Java 14 or later on WebSphere Liberty with Java 17.  Java 14 is a non-LTS release and is already out of standard and premier support.","title":"how to add java 14 in websphere app server(WAS)","body":"<p>&quot;WebSphere&quot; can refer to a product or one of the runtimes available in that product.</p>\n<p>WebSphere contains two EE runtimes, WebSphere Liberty and the older WebSphere Application Server traditional.</p>\n<ul>\n<li>WebSphere Liberty supports Java 17, but not 14.</li>\n<li>WebSphere Application Server traditional doesn't support anything after Java 8.</li>\n</ul>\n<p>Your best bet is to run the code requiring Java 14 or later on WebSphere Liberty with Java 17.  Java 14 is a non-LTS release and is already out of standard and premier support.</p>\n"}],"owner":{"account_id":23380816,"reputation":1,"user_id":17447612,"display_name":"qwe rty"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":81,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1637242617,"creation_date":1637240643,"question_id":70020357,"body_markdown":"i want to update to java 14 on websphere based on a requirement of client but can only find upto java 8. is there a way to externally add it or anything as such to update it to jav 14","title":"how to add java 14 in websphere app server(WAS)","body":"<p>i want to update to java 14 on websphere based on a requirement of client but can only find upto java 8. is there a way to externally add it or anything as such to update it to jav 14</p>\n"},{"tags":["java","quarkus","jaeger","opentracing","smallrye"],"comments":[{"owner":{"account_id":2922228,"reputation":61034,"user_id":2504224,"display_name":"geoand"},"score":0,"creation_date":1620715023,"post_id":67480229,"comment_id":119274785,"body_markdown":"So you essentially want to not have the application perform any tracing?","body":"So you essentially want to not have the application perform any tracing?"},{"owner":{"account_id":19803460,"reputation":47,"user_id":14503887,"display_name":"LeoKao"},"score":0,"creation_date":1620716780,"post_id":67480229,"comment_id":119275433,"body_markdown":"No, I need tracing and propagation tracing headers, I only want disable reporter. my application deploy on the k8s environment, In my situation, application unknown agent host. istio will duties of report.","body":"No, I need tracing and propagation tracing headers, I only want disable reporter. my application deploy on the k8s environment, In my situation, application unknown agent host. istio will duties of report."}],"answers":[{"tags":[],"owner":{"account_id":2922228,"reputation":61034,"user_id":2504224,"display_name":"geoand"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1620723491,"creation_date":1620723491,"answer_id":67483582,"question_id":67480229,"body_markdown":"It seems like `io.jaegertracing.internal.senders.SenderResolver` which determines the Sender to use is pretty broken, which is why `quarkus.jaeger.sender-factory` isn&#39;t being taken into account.\r\n\r\nOne way to achieve what you want is to add a service loader file, i.e. add a file named `resources/META-INF/services/io.jaegertracing.spi.SenderFactory` that contains this single line:\r\n\r\n`io.jaegertracing.internal.senders.NoopSenderFactory`","title":"how disable remoteReporter in quarkus-smallrye-opentracing","body":"<p>It seems like <code>io.jaegertracing.internal.senders.SenderResolver</code> which determines the Sender to use is pretty broken, which is why <code>quarkus.jaeger.sender-factory</code> isn't being taken into account.</p>\n<p>One way to achieve what you want is to add a service loader file, i.e. add a file named <code>resources/META-INF/services/io.jaegertracing.spi.SenderFactory</code> that contains this single line:</p>\n<p><code>io.jaegertracing.internal.senders.NoopSenderFactory</code></p>\n"},{"tags":[],"owner":{"account_id":4977204,"reputation":1,"user_id":4003196,"display_name":"Daniel Nordstr&#246;m"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637242368,"creation_date":1637220366,"answer_id":70015955,"question_id":67480229,"body_markdown":"Try to exlude jaeger-thrift in the pom, like this:\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\r\n            &lt;artifactId&gt;quarkus-smallrye-opentracing&lt;/artifactId&gt;\r\n            &lt;exclusions&gt;\r\n                &lt;exclusion&gt;\r\n                    &lt;groupId&gt;io.jaegertracing&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;jaeger-thrift&lt;/artifactId&gt;\r\n                &lt;/exclusion&gt;\r\n            &lt;/exclusions&gt;\r\n        &lt;/dependency&gt;\r\n\r\nwhat i can see in the log is only one warning about &quot;No sender factories available. Using NoopSender&quot;.\r\n\r\nIf you add the file in meta-inf/services like the previous answer, you will not get any warnings like i describe.","title":"how disable remoteReporter in quarkus-smallrye-opentracing","body":"<p>Try to exlude jaeger-thrift in the pom, like this:</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\n        &lt;artifactId&gt;quarkus-smallrye-opentracing&lt;/artifactId&gt;\n        &lt;exclusions&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;io.jaegertracing&lt;/groupId&gt;\n                &lt;artifactId&gt;jaeger-thrift&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n        &lt;/exclusions&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>what i can see in the log is only one warning about &quot;No sender factories available. Using NoopSender&quot;.</p>\n<p>If you add the file in meta-inf/services like the previous answer, you will not get any warnings like i describe.</p>\n"}],"owner":{"account_id":19803460,"reputation":47,"user_id":14503887,"display_name":"LeoKao"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":604,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1637242368,"creation_date":1620704215,"question_id":67480229,"body_markdown":"**Request description:**.  \r\nI want disable jaeger client remoteReporter, I don&#39;t nee send to agent, Because istio would make it.\r\n\r\n**Tried:**.  \r\nAdd `quarkus.jaeger.sender-factory` prop in my application.properties\r\nbut I not has lucky, and can&#39;t find when use this prop in source code. \r\n\r\n**env infomation:**\r\n\r\njava version: 1.8.   \r\nquarkus version: 1.13.2.Final\r\n\r\n**example project**.  \r\n[GitLab link][1]\r\n\r\n\r\n  [1]: https://gitlab.com/luciferstut/opentracing-quickstart","title":"how disable remoteReporter in quarkus-smallrye-opentracing","body":"<p><strong>Request description:</strong>.<br />\nI want disable jaeger client remoteReporter, I don't nee send to agent, Because istio would make it.</p>\n<p><strong>Tried:</strong>.<br />\nAdd <code>quarkus.jaeger.sender-factory</code> prop in my application.properties\nbut I not has lucky, and can't find when use this prop in source code.</p>\n<p><strong>env infomation:</strong></p>\n<p>java version: 1.8.<br />\nquarkus version: 1.13.2.Final</p>\n<p><strong>example project</strong>.<br />\n<a href=\"https://gitlab.com/luciferstut/opentracing-quickstart\" rel=\"nofollow noreferrer\">GitLab link</a></p>\n"},{"tags":["java","hibernate"],"comments":[{"owner":{"account_id":6300403,"reputation":692,"user_id":4895267,"accept_rate":40,"display_name":"Federico Paparoni"},"score":0,"creation_date":1499287374,"post_id":44933587,"comment_id":76847476,"body_markdown":"Hibernate doesn&#39;t like so much when you set the id, are you sure that the object is in the db with specified ID?  Try to lookup the object by id and then modify what you need","body":"Hibernate doesn&#39;t like so much when you set the id, are you sure that the object is in the db with specified ID?  Try to lookup the object by id and then modify what you need"},{"owner":{"account_id":277416,"reputation":681848,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"score":0,"creation_date":1499454863,"post_id":44933587,"comment_id":76931477,"body_markdown":"When you ask about an exception, always, always post the complete stack trace of the exception. That said, the problem is most probably that you&#39;re deleting a row that doesn&#39;t exist.","body":"When you ask about an exception, always, always post the complete stack trace of the exception. That said, the problem is most probably that you&#39;re deleting a row that doesn&#39;t exist."},{"owner":{"account_id":965625,"reputation":1524,"user_id":1103606,"accept_rate":51,"display_name":"Peter Penzov"},"score":1,"creation_date":1499458330,"post_id":44933587,"comment_id":76933116,"body_markdown":"Here is the full stack trace https://pastebin.com/sFGMNGim","body":"Here is the full stack trace <a href=\"https://pastebin.com/sFGMNGim\" rel=\"nofollow noreferrer\">pastebin.com/sFGMNGim</a>"},{"owner":{"account_id":1591602,"reputation":3575,"user_id":1474815,"accept_rate":0,"display_name":"Paulo Pedroso"},"score":0,"creation_date":1499558408,"post_id":44933587,"comment_id":76958502,"body_markdown":"My guess is Frederico Paparoni is right. Hibernate use proxy objects and setting IDs doesn&#39;t work for exclusions.","body":"My guess is Frederico Paparoni is right. Hibernate use proxy objects and setting IDs doesn&#39;t work for exclusions."}],"answers":[{"tags":[],"owner":{"account_id":3340852,"reputation":1493,"user_id":2807177,"display_name":"gmanjon"},"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1637242339,"creation_date":1499610542,"answer_id":44997468,"question_id":44933587,"body_markdown":"When you manage instances of objects with hibernate, they have to be &quot;attached&quot; to the session.\r\n\r\nIf you create an object with `new` you need first to attach it to the session before you can manage it with hibernate.\r\n\r\nWhen an object (with generated id) has an id value, hibernate expects that the object exist in his session (because the id value can only exist if hibernate had generated it or hibernate has brought it from the database via a query), otherwise it throws the Stale Exception. \r\n\r\nYou have to either call `saveOrUpdate` on it for hibernate to create its Id and attach the instance to the session (in case it doesn&#39;t exist in the database), or call `load` with the id for hibernate to bring the instance from the database (in case it exists in the database).\r\n\r\nIn this case you know the id,  so you have to query hibernate to obtain an attached instance. So, try this instead:\r\n\r\n    SystemUsersModel obj = session.load(SystemUsersModel.class, userlist.getId());\r\n    session.delete(obj);\r\n\r\nHere is the explanation of the different states of an instance respect of the hibernate session: https://docs.jboss.org/hibernate/orm/3.3/reference/en/html/objectstate.html\r\n\r\n**Edit**: Thanks to @vanoekel\r\n\r\nOr better, instead of `load` you can just use `getReference` as it will be less expensive in terms of resources, if you just want to delete it afterwords.\r\n\r\n","title":"Batch update returned unexpected row count from update [0];","body":"<p>When you manage instances of objects with hibernate, they have to be &quot;attached&quot; to the session.</p>\n<p>If you create an object with <code>new</code> you need first to attach it to the session before you can manage it with hibernate.</p>\n<p>When an object (with generated id) has an id value, hibernate expects that the object exist in his session (because the id value can only exist if hibernate had generated it or hibernate has brought it from the database via a query), otherwise it throws the Stale Exception.</p>\n<p>You have to either call <code>saveOrUpdate</code> on it for hibernate to create its Id and attach the instance to the session (in case it doesn't exist in the database), or call <code>load</code> with the id for hibernate to bring the instance from the database (in case it exists in the database).</p>\n<p>In this case you know the id,  so you have to query hibernate to obtain an attached instance. So, try this instead:</p>\n<pre><code>SystemUsersModel obj = session.load(SystemUsersModel.class, userlist.getId());\nsession.delete(obj);\n</code></pre>\n<p>Here is the explanation of the different states of an instance respect of the hibernate session: <a href=\"https://docs.jboss.org/hibernate/orm/3.3/reference/en/html/objectstate.html\" rel=\"nofollow noreferrer\">https://docs.jboss.org/hibernate/orm/3.3/reference/en/html/objectstate.html</a></p>\n<p><strong>Edit</strong>: Thanks to @vanoekel</p>\n<p>Or better, instead of <code>load</code> you can just use <code>getReference</code> as it will be less expensive in terms of resources, if you just want to delete it afterwords.</p>\n"},{"tags":[],"owner":{"account_id":7443426,"reputation":510,"user_id":5660458,"accept_rate":75,"display_name":"Suraj Khanra"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1500022015,"creation_date":1500014815,"answer_id":45096416,"question_id":44933587,"body_markdown":"The exception is might be happening for the below line \r\n\r\n \r\n If your object has primary key which is auto generated and you are forcing to assigned key may cause the exception.\r\n\r\nPlease Visit this page for detail explanation  [HERE][1]\r\n\r\n\r\n  [1]: http://java-fp.blogspot.in/2011/09/orghibernatestalestateexception-batch.html","title":"Batch update returned unexpected row count from update [0];","body":"<p>The exception is might be happening for the below line </p>\n\n<p>If your object has primary key which is auto generated and you are forcing to assigned key may cause the exception.</p>\n\n<p>Please Visit this page for detail explanation  <a href=\"http://java-fp.blogspot.in/2011/09/orghibernatestalestateexception-batch.html\" rel=\"nofollow noreferrer\">HERE</a></p>\n"}],"owner":{"account_id":965625,"reputation":1524,"user_id":1103606,"accept_rate":51,"display_name":"Peter Penzov"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":19369,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"answer_count":2,"score":9,"last_activity_date":1637242339,"creation_date":1499279587,"question_id":44933587,"body_markdown":"I use this entity in order to record into database.\r\n\r\n    @Entity\r\n    @Table(name = &quot;SYSTEM_USERS&quot;)\r\n    public class SystemUsersModel implements Serializable\r\n    {\r\n        private static final long serialVersionUID = 8432414340180447723L;\r\n    \r\n        @Id\r\n        @GeneratedValue\r\n        private Integer id;\r\n    \r\n        @Column\r\n        private String username;\r\n    \r\n        @Column\r\n        private String email;\r\n    \r\n        @Column\r\n        @Type(type = &quot;date&quot;)\r\n        @Temporal(TemporalType.DATE)\r\n        private Date lastlogin;\r\n    \r\n        @Column\r\n        private String password;\r\n    \r\n        @Column\r\n        private String salt;\r\n    \r\n        @Column\r\n        @Type(type = &quot;date&quot;)\r\n        @Temporal(TemporalType.DATE)\r\n        private Date added;\r\n\r\n\r\nDelete query:\r\n\r\n    SessionFactory factory = HibernateUtils.getSessionFactory();\r\n            Session session = factory.getCurrentSession();\r\n    \r\n            try\r\n            {\r\n                session.getTransaction().begin();\r\n    \r\n                SystemUsersModel obj = new SystemUsersModel();\r\n                obj.setId(userlist.getId());\r\n    \r\n                session.delete(obj);\r\n    \r\n                session.getTransaction().commit();\r\n    \r\n                blacklists.remove(selectedBlackListEntry);\r\n                selectedBlackListEntry = null;\r\n            }\r\n            catch (Exception e)\r\n            {\r\n                e.printStackTrace();\r\n                session.getTransaction().rollback();\r\n            }\r\n\r\n\r\nThen I run the code I get this error:\r\n\r\n    Caused by: org.hibernate.StaleStateException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1\r\n\r\nI had inserted several rows using script before I start the application.\r\nHow I can solve this issue?","title":"Batch update returned unexpected row count from update [0];","body":"<p>I use this entity in order to record into database.</p>\n\n<pre><code>@Entity\n@Table(name = \"SYSTEM_USERS\")\npublic class SystemUsersModel implements Serializable\n{\n    private static final long serialVersionUID = 8432414340180447723L;\n\n    @Id\n    @GeneratedValue\n    private Integer id;\n\n    @Column\n    private String username;\n\n    @Column\n    private String email;\n\n    @Column\n    @Type(type = \"date\")\n    @Temporal(TemporalType.DATE)\n    private Date lastlogin;\n\n    @Column\n    private String password;\n\n    @Column\n    private String salt;\n\n    @Column\n    @Type(type = \"date\")\n    @Temporal(TemporalType.DATE)\n    private Date added;\n</code></pre>\n\n<p>Delete query:</p>\n\n<pre><code>SessionFactory factory = HibernateUtils.getSessionFactory();\n        Session session = factory.getCurrentSession();\n\n        try\n        {\n            session.getTransaction().begin();\n\n            SystemUsersModel obj = new SystemUsersModel();\n            obj.setId(userlist.getId());\n\n            session.delete(obj);\n\n            session.getTransaction().commit();\n\n            blacklists.remove(selectedBlackListEntry);\n            selectedBlackListEntry = null;\n        }\n        catch (Exception e)\n        {\n            e.printStackTrace();\n            session.getTransaction().rollback();\n        }\n</code></pre>\n\n<p>Then I run the code I get this error:</p>\n\n<pre><code>Caused by: org.hibernate.StaleStateException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1\n</code></pre>\n\n<p>I had inserted several rows using script before I start the application.\nHow I can solve this issue?</p>\n"},{"tags":["java","apache-flink","flink-streaming"],"answers":[{"tags":[],"owner":{"account_id":2274094,"reputation":40354,"user_id":2000823,"display_name":"David Anderson"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1637242305,"creation_date":1637242305,"answer_id":70020766,"question_id":70018211,"body_markdown":"You might look at how the [end-to-end integration tests for the windowing exercise in the Flink training](https://github.com/apache/flink-training/blob/master/hourly-tips/src/test/java/org/apache/flink/training/exercises/hourlytips/HourlyTipsTest.java) are implemented as an example. This exercise isn&#39;t using GlobalWindows or custom triggering, etc, but you can use this overall approach to test any pipeline.\r\n\r\nThe one thing that&#39;s maybe less than ideal about this approach is how it handles watermarking. The applications being tested are using the default periodic watermarking strategy, wherein watermarks are generated every 200msec. Since the tests don&#39;t run that long, the only watermark that&#39;s actually generated is the one that comes at the end of every job with bounded inputs. This works, but isn&#39;t quite the same as what will happen in production. (Is this why you were thinking of having your test source sleep between events?)\r\n\r\nBTW, these tests in the Flink training repo are made slightly more complex than is ordinarily necessary, because these tests are used to provide coverage for the Java and the Scala implementations of both the exercises and solutions.","title":"How to test Flink Global Window with Trigger And Evictor","body":"<p>You might look at how the <a href=\"https://github.com/apache/flink-training/blob/master/hourly-tips/src/test/java/org/apache/flink/training/exercises/hourlytips/HourlyTipsTest.java\" rel=\"nofollow noreferrer\">end-to-end integration tests for the windowing exercise in the Flink training</a> are implemented as an example. This exercise isn't using GlobalWindows or custom triggering, etc, but you can use this overall approach to test any pipeline.</p>\n<p>The one thing that's maybe less than ideal about this approach is how it handles watermarking. The applications being tested are using the default periodic watermarking strategy, wherein watermarks are generated every 200msec. Since the tests don't run that long, the only watermark that's actually generated is the one that comes at the end of every job with bounded inputs. This works, but isn't quite the same as what will happen in production. (Is this why you were thinking of having your test source sleep between events?)</p>\n<p>BTW, these tests in the Flink training repo are made slightly more complex than is ordinarily necessary, because these tests are used to provide coverage for the Java and the Scala implementations of both the exercises and solutions.</p>\n"}],"owner":{"account_id":9178252,"reputation":77,"user_id":6823114,"display_name":"Baal"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":640,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1637242305,"creation_date":1637231370,"question_id":70018211,"body_markdown":"I have a pipeline which use Flink Global Window with custom Trigger based on Event Time (from timestamp on arriving element) and Evictor which cut unnecessary elements from the window and pass it to the ProcessFunction, \r\n\r\nsomething like:\r\n\r\n```\r\n public SingleOutputStreamOperator&lt;Results&gt; processElements(DataStream&lt;Elements&gt; inputStream) {\r\n return inputStream\r\n \t            .keyBy(Elements::getId)\r\n                .window(GlobalWindows.create())\r\n                .trigger(new CustomTrigger())\r\n                .evictor(new CustomEvictor())\r\n                .process(new MyWindowProcessFunction())\r\n                .name(&quot;Process&quot;)\r\n                .uid(&quot;process-elements&quot;)\r\n                .returns(Results.class);    \r\n}\r\n\r\n    public void executePipelineFlow(StreamExecutionEnvironment env) throws Exception {\r\n        DataStream&lt;Elements&gt; inputStream = getInputStream(env);\r\n        DataStream&lt;Results&gt; processedInput = processElements(inputStream);\r\n        applySink(processedInput);\r\n}\r\n\r\n```\r\nI know i can test MyWindowProcessFunction with TestHarness which provide Watermark manipulation but i need to test whole flow, Trigger+Evictor+ProcessFunction.\r\n\r\nAlso i try some kind of timed SourceFunction with use of Thread.sleep() but my pipeline work in event time and this wont work if i had 1000 elements in test stream (because test will take couple of hours).\r\n\r\nMy question is, how i can unit test my whole ```processElements``` method? \r\n\r\nI cant find any test examples for my case.\r\n\r\nThanks","title":"How to test Flink Global Window with Trigger And Evictor","body":"<p>I have a pipeline which use Flink Global Window with custom Trigger based on Event Time (from timestamp on arriving element) and Evictor which cut unnecessary elements from the window and pass it to the ProcessFunction,</p>\n<p>something like:</p>\n<pre><code> public SingleOutputStreamOperator&lt;Results&gt; processElements(DataStream&lt;Elements&gt; inputStream) {\n return inputStream\n                .keyBy(Elements::getId)\n                .window(GlobalWindows.create())\n                .trigger(new CustomTrigger())\n                .evictor(new CustomEvictor())\n                .process(new MyWindowProcessFunction())\n                .name(&quot;Process&quot;)\n                .uid(&quot;process-elements&quot;)\n                .returns(Results.class);    \n}\n\n    public void executePipelineFlow(StreamExecutionEnvironment env) throws Exception {\n        DataStream&lt;Elements&gt; inputStream = getInputStream(env);\n        DataStream&lt;Results&gt; processedInput = processElements(inputStream);\n        applySink(processedInput);\n}\n\n</code></pre>\n<p>I know i can test MyWindowProcessFunction with TestHarness which provide Watermark manipulation but i need to test whole flow, Trigger+Evictor+ProcessFunction.</p>\n<p>Also i try some kind of timed SourceFunction with use of Thread.sleep() but my pipeline work in event time and this wont work if i had 1000 elements in test stream (because test will take couple of hours).</p>\n<p>My question is, how i can unit test my whole <code>processElements</code> method?</p>\n<p>I cant find any test examples for my case.</p>\n<p>Thanks</p>\n"},{"tags":["java","date"],"comments":[{"owner":{"account_id":1924671,"reputation":94541,"user_id":1735406,"accept_rate":95,"display_name":"Maroun"},"score":1,"creation_date":1410253130,"post_id":25740431,"comment_id":40246414,"body_markdown":"Related: [Why is January month 0 in Java Calendar?](http://stackoverflow.com/questions/344380/why-is-january-month-0-in-java-calendar)","body":"Related: <a href=\"http://stackoverflow.com/questions/344380/why-is-january-month-0-in-java-calendar\">Why is January month 0 in Java Calendar?</a>"},{"owner":{"account_id":4872274,"reputation":34930,"user_id":3928341,"display_name":"nem035"},"score":0,"creation_date":1410253195,"post_id":25740431,"comment_id":40246453,"body_markdown":"The months are from 0 - 11 in Calendar","body":"The months are from 0 - 11 in Calendar"},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1410341045,"post_id":25740431,"comment_id":40285117,"body_markdown":"@AkshaiKumar Please clean up your Question, where you give one data example at top and a different at bottom. Consequently the answers varied in which data example they used, creating confusion. And include &quot;today&#39;s date&quot; you used in determining your expected result so we may compare.","body":"@AkshaiKumar Please clean up your Question, where you give one data example at top and a different at bottom. Consequently the answers varied in which data example they used, creating confusion. And include &quot;today&#39;s date&quot; you used in determining your expected result so we may compare."}],"answers":[{"tags":[],"owner":{"account_id":4497436,"reputation":18081,"user_id":3656904,"accept_rate":67,"display_name":"talex"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1410253838,"creation_date":1410253676,"answer_id":25740686,"question_id":25740431,"body_markdown":"        int da = 22;\r\n        int mo = 10;\r\n        int ye = 21;\r\n\r\n        Calendar cal = Calendar.getInstance();\r\n        cal.add(Calendar.YEAR, -ye);\r\n        cal.add(Calendar.MONTH, -mo);\r\n        cal.add(Calendar.DAY_OF_YEAR, -da);\r\n\r\n        System.out.println(cal.getTime());\r\n","title":"Finding date of birth from age in java","body":"<pre><code>    int da = 22;\n    int mo = 10;\n    int ye = 21;\n\n    Calendar cal = Calendar.getInstance();\n    cal.add(Calendar.YEAR, -ye);\n    cal.add(Calendar.MONTH, -mo);\n    cal.add(Calendar.DAY_OF_YEAR, -da);\n\n    System.out.println(cal.getTime());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4728070,"reputation":79,"user_id":3824419,"display_name":"SilentBob470"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1410255201,"creation_date":1410255201,"answer_id":25741217,"question_id":25740431,"body_markdown":"You are subtracting the days first, then the months and last the years. This is wrong in my opinion because you don&#39;t know how many leap year may have been in all the years.\r\n\r\nTry         \r\n\r\n    Calendar cal = Calendar.getInstance();                       \r\n    cal.add(Calendar.YEAR, ye);   \r\n    cal.add(Calendar.MONTH, mo);  \r\n    cal.add(Calendar.DAY_OF_MONTH, da); \r\n\r\ndoing so I get: Sun Oct 18 11:24:52 CET 1992","title":"Finding date of birth from age in java","body":"<p>You are subtracting the days first, then the months and last the years. This is wrong in my opinion because you don't know how many leap year may have been in all the years.</p>\n\n<p>Try         </p>\n\n<pre><code>Calendar cal = Calendar.getInstance();                       \ncal.add(Calendar.YEAR, ye);   \ncal.add(Calendar.MONTH, mo);  \ncal.add(Calendar.DAY_OF_MONTH, da); \n</code></pre>\n\n<p>doing so I get: Sun Oct 18 11:24:52 CET 1992</p>\n"},{"tags":[],"owner":{"account_id":280829,"reputation":28956,"user_id":576758,"accept_rate":83,"display_name":"Tapas Bose"},"down_vote_count":0,"up_vote_count":13,"is_accepted":true,"score":13,"last_activity_date":1410255838,"creation_date":1410255838,"answer_id":25741408,"question_id":25740431,"body_markdown":"Here is Java 8 solution implemented by [Date &amp; Time API][1]:\r\n\r\n    int dobYear = 21;\r\n    int dobMonth = 10;\r\n    int dobDay = 22;\r\n    \r\n    LocalDate now = LocalDate.now();\r\n    LocalDate dob = now.minusYears(dobYear)\r\n    \t\t.minusMonths(dobMonth)\r\n    \t\t.minusDays(dobDay);\r\n    \r\n    DateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;dd/MM/yyyy&quot;);\r\n    System.out.println(dob.format(formatter));\r\n\r\nOutput: `18/10/1992`.\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/8/docs/api/java/time/package-summary.html","title":"Finding date of birth from age in java","body":"<p>Here is Java 8 solution implemented by <a href=\"http://docs.oracle.com/javase/8/docs/api/java/time/package-summary.html\" rel=\"noreferrer\">Date &amp; Time API</a>:</p>\n\n<pre><code>int dobYear = 21;\nint dobMonth = 10;\nint dobDay = 22;\n\nLocalDate now = LocalDate.now();\nLocalDate dob = now.minusYears(dobYear)\n        .minusMonths(dobMonth)\n        .minusDays(dobDay);\n\nDateTimeFormatter formatter = DateTimeFormatter.ofPattern(\"dd/MM/yyyy\");\nSystem.out.println(dob.format(formatter));\n</code></pre>\n\n<p>Output: <code>18/10/1992</code>.</p>\n"},{"tags":[],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1410341331,"creation_date":1410340485,"answer_id":25761613,"question_id":25740431,"body_markdown":"Don&#39;t reinvent the wheel. Use a decent date-time library for date-time work. \r\n\r\n# Joda-Time\r\n\r\nYou can accomplish your task in two lines of easy-to-read code using Joda-Time.\r\n\r\n## Span Of Time\r\n\r\nThe [Joda-Time][1] library has support for defining a span of time. Three classes are offered: Interval, Period, and Duration. For this purpose we need [`Period`][2].\r\n\r\n## ISO 8601\r\n\r\nJoda-Time uses the [ISO 8601][3] standard as its default in parsing/generating strings. That standard defines this format for [`durations`][4] (what Joda-Time calls Period) this way: `PnYnMnDTnHnMnS`. The `P` starts every instance, and the `T` separates the date portion from the time-of-day portion. You can use this kind of string to construct a Period object, or you can pass numbers for years, months, days, and so on.\r\n\r\n## Time Zone\r\n\r\nIf you want more accuracy, you should specify the time zone intended by your years-months-days count. Results may vary by a day as the date depends on the time zone. A new day dawns earlier in Paris than in Montr&#233;al.\r\n\r\n## Example Code\r\n\r\nExample code in Joda-Time 2.4.\r\n\r\n    LocalDate now = LocalDate.now( DateTimeZone.forID( &quot;America/Montreal&quot; ) );\r\n    Period age = new Period( &quot;P21Y10M22D&quot; ); // 21 years, 10 months, and 22 days. Or: new Period( 21, 10, 22…\r\n    LocalDate birth = now.minus( age );\r\n\r\nDump to console.\r\n\r\n    System.out.println( &quot;now: &quot; + now );\r\n    System.out.println( &quot;age: &quot; + age );\r\n    System.out.println( &quot;birth: &quot; + birth );\r\n\r\nWhen run.\r\n\r\n&lt;!-- language: none --&gt;\r\n\r\n    now: 2014-09-10\r\n    age: P21Y10M22D\r\n    birth: 1992-10-19\r\n\r\n\r\n  [1]: http://www.joda.org/joda-time/\r\n  [2]: http://www.joda.org/joda-time/apidocs/org/joda/time/Period.html\r\n  [3]: http://en.wikipedia.org/wiki/ISO_8601\r\n  [4]: http://en.wikipedia.org/wiki/ISO_8601#Durations","title":"Finding date of birth from age in java","body":"<p>Don't reinvent the wheel. Use a decent date-time library for date-time work. </p>\n\n<h1>Joda-Time</h1>\n\n<p>You can accomplish your task in two lines of easy-to-read code using Joda-Time.</p>\n\n<h2>Span Of Time</h2>\n\n<p>The <a href=\"http://www.joda.org/joda-time/\" rel=\"nofollow\">Joda-Time</a> library has support for defining a span of time. Three classes are offered: Interval, Period, and Duration. For this purpose we need <a href=\"http://www.joda.org/joda-time/apidocs/org/joda/time/Period.html\" rel=\"nofollow\"><code>Period</code></a>.</p>\n\n<h2>ISO 8601</h2>\n\n<p>Joda-Time uses the <a href=\"http://en.wikipedia.org/wiki/ISO_8601\" rel=\"nofollow\">ISO 8601</a> standard as its default in parsing/generating strings. That standard defines this format for <a href=\"http://en.wikipedia.org/wiki/ISO_8601#Durations\" rel=\"nofollow\"><code>durations</code></a> (what Joda-Time calls Period) this way: <code>PnYnMnDTnHnMnS</code>. The <code>P</code> starts every instance, and the <code>T</code> separates the date portion from the time-of-day portion. You can use this kind of string to construct a Period object, or you can pass numbers for years, months, days, and so on.</p>\n\n<h2>Time Zone</h2>\n\n<p>If you want more accuracy, you should specify the time zone intended by your years-months-days count. Results may vary by a day as the date depends on the time zone. A new day dawns earlier in Paris than in Montréal.</p>\n\n<h2>Example Code</h2>\n\n<p>Example code in Joda-Time 2.4.</p>\n\n<pre><code>LocalDate now = LocalDate.now( DateTimeZone.forID( \"America/Montreal\" ) );\nPeriod age = new Period( \"P21Y10M22D\" ); // 21 years, 10 months, and 22 days. Or: new Period( 21, 10, 22…\nLocalDate birth = now.minus( age );\n</code></pre>\n\n<p>Dump to console.</p>\n\n<pre><code>System.out.println( \"now: \" + now );\nSystem.out.println( \"age: \" + age );\nSystem.out.println( \"birth: \" + birth );\n</code></pre>\n\n<p>When run.</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>now: 2014-09-10\nage: P21Y10M22D\nbirth: 1992-10-19\n</code></pre>\n"},{"tags":[],"owner":{"account_id":20322905,"reputation":41,"user_id":14907109,"display_name":"kaushal2307"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637242215,"creation_date":1637131713,"answer_id":69999976,"question_id":25740431,"body_markdown":"    import java.time.LocalDate;\r\n    import java.util.Collections;\r\n    import java.util.HashSet;\r\n    import java.util.Set;\r\n\r\n    public class Main {\r\n\r\n    public static void main(String[] args){\r\n        String ageDay = &quot;31&quot;;\r\n        String ageMonth = &quot;4&quot;;\r\n        String ageYear = &quot;10&quot;;\r\n        LocalDate resultDOB = findDateOfBirth(ageYear,ageMonth,ageDay);\r\n        System.out.println(resultDOB);\r\n\r\n    }\r\n\r\n    private static LocalDate findDateOfBirth(String ageYear, String ageMonth, String ageDay) {\r\n        int ageYearInInt = convertAgeNumberToInt(ageYear);\r\n        int ageMonthInInt = convertAgeNumberToInt(ageMonth);\r\n        int ageDayInInt = convertAgeNumberToInt(ageDay);\r\n        LocalDate today = LocalDate.now();\r\n        int dobYear  = today.getYear() - ageYearInInt;\r\n        Set&lt;Integer&gt; monthsHaving30Days = Collections.EMPTY_SET;\r\n        Collections.addAll(monthsHaving30Days = new HashSet&lt;Integer&gt;(), 1, 3, 5, 7, 10, 12);\r\n        Set&lt;Integer&gt; monthsHaving31Days= Collections.EMPTY_SET;\r\n        Collections.addAll(monthsHaving31Days = new HashSet&lt;Integer&gt;(), 4, 6, 9, 11);\r\n        int dobMonth = today.getMonthValue() - ageMonthInInt;\r\n        if(dobMonth&lt;=0){\r\n            dobMonth = 12 - Math.abs(dobMonth);\r\n            dobYear--;\r\n        }\r\n        int dobDay   = today.getDayOfMonth() - ageDayInInt;\r\n\r\n        if(dobDay&lt;=0){\r\n            dobMonth--;\r\n            if(dobMonth == 2){\r\n               if(today.getMonthValue() == 3){\r\n                   if(isLeapYear(dobYear)){\r\n                       dobDay = 29 - Math.abs(dobDay);\r\n                   }else{\r\n                       dobDay = 28 - Math.abs(dobDay);\r\n                   }\r\n               } else{\r\n                   dobDay = 31 - Math.abs(dobDay);\r\n               }\r\n            }\r\n            if(dobMonth&lt;=0){\r\n                dobYear--;\r\n                dobMonth = 12 - Math.abs(dobMonth);\r\n            }\r\n            if(monthsHaving31Days.contains(dobMonth)){\r\n                dobDay = 31 - Math.abs(dobDay);\r\n            }\r\n            if(monthsHaving30Days.contains(dobMonth)){\r\n                dobDay = 30 - Math.abs(dobDay);\r\n            }\r\n        }\r\n       // System.out.println(dobDay + &quot;/&quot; + dobMonth + &quot;/&quot;+ dobYear);\r\n        return LocalDate.of(dobYear, dobMonth, dobDay);\r\n    }\r\n\r\n    private static boolean isLeapYear(int year) {\r\n        boolean leap = false;\r\n        if (year % 4 == 0) {\r\n            if (year % 100 == 0) {\r\n                if (year % 400 == 0) {\r\n                    leap = true;\r\n                }\r\n                else {\r\n                    leap = false;\r\n                }\r\n            }\r\n            else {\r\n                leap = true;\r\n            }\r\n        }\r\n        else {\r\n            leap =  false;\r\n        }\r\n        return leap;\r\n    }\r\n\r\n    private static int convertAgeNumberToInt(String ageNumberInString) {\r\n        int ageNumberInInt;\r\n        if(!ageNumberInString.isEmpty() &amp;&amp; isStringNumber(ageNumberInString)){\r\n            ageNumberInInt  = Integer.parseInt(ageNumberInString);\r\n        }else{\r\n            ageNumberInInt  = 0;\r\n        }\r\n\r\n        return ageNumberInInt;\r\n    }\r\n\r\n    private static boolean isStringNumber(String string) {\r\n        if(string.isEmpty()){\r\n            return false;\r\n        }\r\n        Integer numberVal;\r\n        try{\r\n            numberVal = Integer.parseInt(string);\r\n        } catch (NumberFormatException nfe){\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    }\r\n\r\n","title":"Finding date of birth from age in java","body":"<pre><code>import java.time.LocalDate;\nimport java.util.Collections;\nimport java.util.HashSet;\nimport java.util.Set;\n\npublic class Main {\n\npublic static void main(String[] args){\n    String ageDay = &quot;31&quot;;\n    String ageMonth = &quot;4&quot;;\n    String ageYear = &quot;10&quot;;\n    LocalDate resultDOB = findDateOfBirth(ageYear,ageMonth,ageDay);\n    System.out.println(resultDOB);\n\n}\n\nprivate static LocalDate findDateOfBirth(String ageYear, String ageMonth, String ageDay) {\n    int ageYearInInt = convertAgeNumberToInt(ageYear);\n    int ageMonthInInt = convertAgeNumberToInt(ageMonth);\n    int ageDayInInt = convertAgeNumberToInt(ageDay);\n    LocalDate today = LocalDate.now();\n    int dobYear  = today.getYear() - ageYearInInt;\n    Set&lt;Integer&gt; monthsHaving30Days = Collections.EMPTY_SET;\n    Collections.addAll(monthsHaving30Days = new HashSet&lt;Integer&gt;(), 1, 3, 5, 7, 10, 12);\n    Set&lt;Integer&gt; monthsHaving31Days= Collections.EMPTY_SET;\n    Collections.addAll(monthsHaving31Days = new HashSet&lt;Integer&gt;(), 4, 6, 9, 11);\n    int dobMonth = today.getMonthValue() - ageMonthInInt;\n    if(dobMonth&lt;=0){\n        dobMonth = 12 - Math.abs(dobMonth);\n        dobYear--;\n    }\n    int dobDay   = today.getDayOfMonth() - ageDayInInt;\n\n    if(dobDay&lt;=0){\n        dobMonth--;\n        if(dobMonth == 2){\n           if(today.getMonthValue() == 3){\n               if(isLeapYear(dobYear)){\n                   dobDay = 29 - Math.abs(dobDay);\n               }else{\n                   dobDay = 28 - Math.abs(dobDay);\n               }\n           } else{\n               dobDay = 31 - Math.abs(dobDay);\n           }\n        }\n        if(dobMonth&lt;=0){\n            dobYear--;\n            dobMonth = 12 - Math.abs(dobMonth);\n        }\n        if(monthsHaving31Days.contains(dobMonth)){\n            dobDay = 31 - Math.abs(dobDay);\n        }\n        if(monthsHaving30Days.contains(dobMonth)){\n            dobDay = 30 - Math.abs(dobDay);\n        }\n    }\n   // System.out.println(dobDay + &quot;/&quot; + dobMonth + &quot;/&quot;+ dobYear);\n    return LocalDate.of(dobYear, dobMonth, dobDay);\n}\n\nprivate static boolean isLeapYear(int year) {\n    boolean leap = false;\n    if (year % 4 == 0) {\n        if (year % 100 == 0) {\n            if (year % 400 == 0) {\n                leap = true;\n            }\n            else {\n                leap = false;\n            }\n        }\n        else {\n            leap = true;\n        }\n    }\n    else {\n        leap =  false;\n    }\n    return leap;\n}\n\nprivate static int convertAgeNumberToInt(String ageNumberInString) {\n    int ageNumberInInt;\n    if(!ageNumberInString.isEmpty() &amp;&amp; isStringNumber(ageNumberInString)){\n        ageNumberInInt  = Integer.parseInt(ageNumberInString);\n    }else{\n        ageNumberInInt  = 0;\n    }\n\n    return ageNumberInInt;\n}\n\nprivate static boolean isStringNumber(String string) {\n    if(string.isEmpty()){\n        return false;\n    }\n    Integer numberVal;\n    try{\n        numberVal = Integer.parseInt(string);\n    } catch (NumberFormatException nfe){\n        return false;\n    }\n    return true;\n}\n\n}\n</code></pre>\n"}],"owner":{"account_id":4961142,"reputation":427,"user_id":3992215,"accept_rate":100,"display_name":"akshaivk"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6210,"favorite_count":0,"down_vote_count":1,"up_vote_count":4,"accepted_answer_id":25741408,"answer_count":5,"score":3,"last_activity_date":1637242215,"creation_date":1410252944,"question_id":25740431,"body_markdown":"Hello all I am creating a program for finding the date of birth when the exact age is given. For example if age of a man is 21 years 10 months and 22 days(up to current date) how can i find the exact date of birth. I will be thankful if anyone help me with isuue.\r\n\r\nWhat i tried is here.\r\n\r\n  here d,m and y are text field for days months and years.\r\n\r\n      private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {                                         \r\n                int da = Integer.parseInt(d.getText());\r\n                da = -da;\r\n                int mo = Integer.parseInt(m.getText());\r\n                mo = -mo;        \r\n                int ye = Integer.parseInt(y.getText());\r\n                ye = -ye;\r\n                SimpleDateFormat ddd = new SimpleDateFormat(&quot;dd&quot;);\r\n                SimpleDateFormat mmm = new SimpleDateFormat(&quot;MM&quot;);\r\n                SimpleDateFormat yyy = new SimpleDateFormat(&quot;yyyy&quot;);\r\n                Calendar cal = Calendar.getInstance();                       \r\n                cal.getTime();\r\n                cal.add(Calendar.DATE, da);\r\n                 cal.set(Integer.parseInt(yyy.format(cal.getTime())), Integer.parseInt(mmm.format(cal.getTime())), Integer.parseInt(ddd.format(cal.getTime())));\r\n                cal.add(cal.MONTH, mo);cal.set(Integer.parseInt(yyy.format(cal.getTime())), Integer.parseInt(mmm.format(cal.getTime())), Integer.parseInt(ddd.format(cal.getTime())));\r\n                cal.add(cal.YEAR, ye);\r\n                System.out.println(getDate(cal));\r\n            }\r\n\r\nMy problem is if I enter 21 year 10 months and 22 days as the age of a person the date given by compiler is 18/12/1992 but actual date should be 17/10/1992.\r\nPlease help me with this issue.","title":"Finding date of birth from age in java","body":"<p>Hello all I am creating a program for finding the date of birth when the exact age is given. For example if age of a man is 21 years 10 months and 22 days(up to current date) how can i find the exact date of birth. I will be thankful if anyone help me with isuue.</p>\n\n<p>What i tried is here.</p>\n\n<p>here d,m and y are text field for days months and years.</p>\n\n<pre><code>  private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {                                         \n            int da = Integer.parseInt(d.getText());\n            da = -da;\n            int mo = Integer.parseInt(m.getText());\n            mo = -mo;        \n            int ye = Integer.parseInt(y.getText());\n            ye = -ye;\n            SimpleDateFormat ddd = new SimpleDateFormat(\"dd\");\n            SimpleDateFormat mmm = new SimpleDateFormat(\"MM\");\n            SimpleDateFormat yyy = new SimpleDateFormat(\"yyyy\");\n            Calendar cal = Calendar.getInstance();                       \n            cal.getTime();\n            cal.add(Calendar.DATE, da);\n             cal.set(Integer.parseInt(yyy.format(cal.getTime())), Integer.parseInt(mmm.format(cal.getTime())), Integer.parseInt(ddd.format(cal.getTime())));\n            cal.add(cal.MONTH, mo);cal.set(Integer.parseInt(yyy.format(cal.getTime())), Integer.parseInt(mmm.format(cal.getTime())), Integer.parseInt(ddd.format(cal.getTime())));\n            cal.add(cal.YEAR, ye);\n            System.out.println(getDate(cal));\n        }\n</code></pre>\n\n<p>My problem is if I enter 21 year 10 months and 22 days as the age of a person the date given by compiler is 18/12/1992 but actual date should be 17/10/1992.\nPlease help me with this issue.</p>\n"},{"tags":["java","gradle","github-actions","jacoco","java-17"],"comments":[{"owner":{"account_id":1084469,"reputation":7470,"user_id":1080523,"display_name":"rethab"},"score":0,"creation_date":1637220960,"post_id":70009016,"comment_id":123769086,"body_markdown":"Can you share you workflow? What do you mean with &quot;fail the coverage verification&quot;?","body":"Can you share you workflow? What do you mean with &quot;fail the coverage verification&quot;?"},{"owner":{"account_id":9317687,"reputation":41,"user_id":6917495,"display_name":"M&#225;rio Santos Sousa"},"score":0,"creation_date":1637227433,"post_id":70009016,"comment_id":123771299,"body_markdown":"Sure, we have jacocoTestCoverageVerification configured to 0.8 or so. Building locally I got a different coverage report and the build doesn&#39;t fail, which doesn&#39;t happen in a github action env.  I also checked the coverage reports generated, and it seems the report generated by ci has more packages analyzed than the local build, maybe because of that, the coverage ratio is different. But I don&#39;t know why it happens.","body":"Sure, we have jacocoTestCoverageVerification configured to 0.8 or so. Building locally I got a different coverage report and the build doesn&#39;t fail, which doesn&#39;t happen in a github action env.  I also checked the coverage reports generated, and it seems the report generated by ci has more packages analyzed than the local build, maybe because of that, the coverage ratio is different. But I don&#39;t know why it happens."}],"answers":[{"tags":[],"owner":{"account_id":9317687,"reputation":41,"user_id":6917495,"display_name":"M&#225;rio Santos Sousa"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1637241938,"creation_date":1637241938,"answer_id":70020681,"question_id":70009016,"body_markdown":"The problem here was lombok config files. It turns out that the new version of lombok plugin compatible with java 17 and Gradle 7.3 does not generate the `lombok.config` files anymore. \r\n\r\nIn the previous version, these files were generated by `io.freefair.lombok` plugin, and we had them in .gitignore. Because of that, a local build worked just fine, since the files were still there. \r\n\r\nI realized this by looking at the generated reports and I noticed that lombok classes were being analyzed only by the CI.\r\n\r\nIn other cases, a similar problem could be related to this:\r\nhttps://www.eclemma.org/jacoco/trunk/doc/classids.html","title":"Different jacoco coverage results in a github action environment","body":"<p>The problem here was lombok config files. It turns out that the new version of lombok plugin compatible with java 17 and Gradle 7.3 does not generate the <code>lombok.config</code> files anymore.</p>\n<p>In the previous version, these files were generated by <code>io.freefair.lombok</code> plugin, and we had them in .gitignore. Because of that, a local build worked just fine, since the files were still there.</p>\n<p>I realized this by looking at the generated reports and I noticed that lombok classes were being analyzed only by the CI.</p>\n<p>In other cases, a similar problem could be related to this:\n<a href=\"https://www.eclemma.org/jacoco/trunk/doc/classids.html\" rel=\"nofollow noreferrer\">https://www.eclemma.org/jacoco/trunk/doc/classids.html</a></p>\n"}],"owner":{"account_id":9317687,"reputation":41,"user_id":6917495,"display_name":"M&#225;rio Santos Sousa"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":732,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70020681,"answer_count":1,"score":0,"last_activity_date":1637241938,"creation_date":1637170299,"question_id":70009016,"body_markdown":"is there any reason for a jacoco coverage report to produce different results when running it in a CI environment?\r\n\r\nI have the following situation after migrating to Java 17. when I run `./gradlew clean build` the report is generated and the `jacocoTestCoverageVerification` doesnt fail. \r\n\r\nBut when the same command is executed in a github runner I have a very different result, the coverage report is also created with different coverage values and some classes just fail the coverage verification.\r\n\r\nUnfortunately, I cannot provide code snippets but I already tried this:\r\n\r\n - Run the github runner on my machine, with the same jdk and it produces a different result if I just run the build in the command line :(  \r\n - add jvmargs noverify for tests tasks\r\n - run the github action in a container instead of a self-hosted, same result\r\n - other devs have also built the project on different machines without error\r\n - run the same build command of the ci \r\n\r\nSo it seems that something in a github action env produces this behavior.  \r\n\r\nversions:\r\n\r\n - jacoco plugin: 0.8.7\r\n - gradle 7.3\r\n - java 17","title":"Different jacoco coverage results in a github action environment","body":"<p>is there any reason for a jacoco coverage report to produce different results when running it in a CI environment?</p>\n<p>I have the following situation after migrating to Java 17. when I run <code>./gradlew clean build</code> the report is generated and the <code>jacocoTestCoverageVerification</code> doesnt fail.</p>\n<p>But when the same command is executed in a github runner I have a very different result, the coverage report is also created with different coverage values and some classes just fail the coverage verification.</p>\n<p>Unfortunately, I cannot provide code snippets but I already tried this:</p>\n<ul>\n<li>Run the github runner on my machine, with the same jdk and it produces a different result if I just run the build in the command line :(</li>\n<li>add jvmargs noverify for tests tasks</li>\n<li>run the github action in a container instead of a self-hosted, same result</li>\n<li>other devs have also built the project on different machines without error</li>\n<li>run the same build command of the ci</li>\n</ul>\n<p>So it seems that something in a github action env produces this behavior.</p>\n<p>versions:</p>\n<ul>\n<li>jacoco plugin: 0.8.7</li>\n<li>gradle 7.3</li>\n<li>java 17</li>\n</ul>\n"},{"tags":["java","lucene","buffer"],"answers":[{"tags":[],"owner":{"account_id":9504657,"reputation":7440,"user_id":7064617,"display_name":"JCompetence"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1637241781,"creation_date":1637241781,"answer_id":70020638,"question_id":70001946,"body_markdown":"See if this helps you,\r\n\r\n\r\n    /**\r\n     * Standard number token filter.\r\n     */\r\n    public class StandardnumberTokenFilter extends TokenFilter {\r\n    \r\n        private final LinkedList&lt;PackedTokenAttributeImpl&gt; tokens;\r\n    \r\n        private final StandardnumberService service;\r\n    \r\n        private final Settings settings;\r\n    \r\n        private final CharTermAttribute termAtt = addAttribute(CharTermAttribute.class);\r\n    \r\n        private final PositionIncrementAttribute posIncAtt = addAttribute(PositionIncrementAttribute.class);\r\n    \r\n        private State current;\r\n    \r\n        protected StandardnumberTokenFilter(TokenStream input, StandardnumberService service, Settings settings) {\r\n            super(input);\r\n            this.tokens = new LinkedList&lt;&gt;();\r\n            this.service = service;\r\n            this.settings = settings;\r\n        }\r\n    \r\n        @Override\r\n        public final boolean incrementToken() throws IOException {\r\n            if (!tokens.isEmpty()) {\r\n                if (current == null) {\r\n                    throw new IllegalArgumentException(&quot;current is null&quot;);\r\n                }\r\n                PackedTokenAttributeImpl token = tokens.removeFirst();\r\n                restoreState(current);\r\n                termAtt.setEmpty().append(token);\r\n                posIncAtt.setPositionIncrement(0);\r\n                return true;\r\n            }\r\n            if (input.incrementToken()) {\r\n                detect();\r\n                if (!tokens.isEmpty()) {\r\n                    current = captureState();\r\n                }\r\n                return true;\r\n            } else {\r\n                return false;\r\n            }\r\n        }\r\n    \r\n        private void detect() throws CharacterCodingException {\r\n            CharSequence term = new String(termAtt.buffer(), 0, termAtt.length());\r\n            Collection&lt;CharSequence&gt; variants = service.lookup(settings, term);\r\n            for (CharSequence ch : variants) {\r\n                if (ch != null) {\r\n                    PackedTokenAttributeImpl token = new PackedTokenAttributeImpl();\r\n                    token.append(ch);\r\n                    tokens.add(token);\r\n                }\r\n            }\r\n        }\r\n    \r\n        @Override\r\n        public void reset() throws IOException {\r\n            super.reset();\r\n            tokens.clear();\r\n            current = null;\r\n        }\r\n    \r\n        @Override\r\n        public boolean equals(Object object) {\r\n            return object instanceof StandardnumberTokenFilter &amp;&amp;\r\n                    service.equals(((StandardnumberTokenFilter)object).service) &amp;&amp;\r\n                    settings.equals(((StandardnumberTokenFilter)object).settings);\r\n        }\r\n    \r\n        @Override\r\n        public int hashCode() {\r\n            return service.hashCode() ^ settings.hashCode();\r\n        }\r\n    }\r\n\r\nhttps://github.com/jprante/elasticsearch-plugin-bundle/blob/f63690f877cc7f50360faffbac827622c9d404ef/src/main/java/org/xbib/elasticsearch/plugin/bundle/index/analysis/standardnumber/StandardnumberTokenFilter.java","title":"Implementing custom prefix remover token filter in lucene producing dirty tokens","body":"<p>See if this helps you,</p>\n<pre><code>/**\n * Standard number token filter.\n */\npublic class StandardnumberTokenFilter extends TokenFilter {\n\n    private final LinkedList&lt;PackedTokenAttributeImpl&gt; tokens;\n\n    private final StandardnumberService service;\n\n    private final Settings settings;\n\n    private final CharTermAttribute termAtt = addAttribute(CharTermAttribute.class);\n\n    private final PositionIncrementAttribute posIncAtt = addAttribute(PositionIncrementAttribute.class);\n\n    private State current;\n\n    protected StandardnumberTokenFilter(TokenStream input, StandardnumberService service, Settings settings) {\n        super(input);\n        this.tokens = new LinkedList&lt;&gt;();\n        this.service = service;\n        this.settings = settings;\n    }\n\n    @Override\n    public final boolean incrementToken() throws IOException {\n        if (!tokens.isEmpty()) {\n            if (current == null) {\n                throw new IllegalArgumentException(&quot;current is null&quot;);\n            }\n            PackedTokenAttributeImpl token = tokens.removeFirst();\n            restoreState(current);\n            termAtt.setEmpty().append(token);\n            posIncAtt.setPositionIncrement(0);\n            return true;\n        }\n        if (input.incrementToken()) {\n            detect();\n            if (!tokens.isEmpty()) {\n                current = captureState();\n            }\n            return true;\n        } else {\n            return false;\n        }\n    }\n\n    private void detect() throws CharacterCodingException {\n        CharSequence term = new String(termAtt.buffer(), 0, termAtt.length());\n        Collection&lt;CharSequence&gt; variants = service.lookup(settings, term);\n        for (CharSequence ch : variants) {\n            if (ch != null) {\n                PackedTokenAttributeImpl token = new PackedTokenAttributeImpl();\n                token.append(ch);\n                tokens.add(token);\n            }\n        }\n    }\n\n    @Override\n    public void reset() throws IOException {\n        super.reset();\n        tokens.clear();\n        current = null;\n    }\n\n    @Override\n    public boolean equals(Object object) {\n        return object instanceof StandardnumberTokenFilter &amp;&amp;\n                service.equals(((StandardnumberTokenFilter)object).service) &amp;&amp;\n                settings.equals(((StandardnumberTokenFilter)object).settings);\n    }\n\n    @Override\n    public int hashCode() {\n        return service.hashCode() ^ settings.hashCode();\n    }\n}\n</code></pre>\n<p><a href=\"https://github.com/jprante/elasticsearch-plugin-bundle/blob/f63690f877cc7f50360faffbac827622c9d404ef/src/main/java/org/xbib/elasticsearch/plugin/bundle/index/analysis/standardnumber/StandardnumberTokenFilter.java\" rel=\"nofollow noreferrer\">https://github.com/jprante/elasticsearch-plugin-bundle/blob/f63690f877cc7f50360faffbac827622c9d404ef/src/main/java/org/xbib/elasticsearch/plugin/bundle/index/analysis/standardnumber/StandardnumberTokenFilter.java</a></p>\n"}],"owner":{"account_id":23315922,"reputation":31,"user_id":17394561,"display_name":"Phaedra Casadio"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":139,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1637241781,"creation_date":1637141834,"question_id":70001946,"body_markdown":"i&#39;m trying to implement a lucene filter to remove a prefix from a term in a query.\r\nIt seems that sometime after multiple queries, the filter has been reused so the char buffer is dirty.\r\n\r\nCode below is simplified, prefix is an external parameter.\r\n\r\n\r\n```\r\n  public static class PrefixFilter extends TokenFilter {\r\n\r\n    private final PackedTokenAttributeImpl termAtt = (PackedTokenAttributeImpl) addAttribute(CharTermAttribute.class);\r\n\r\n    public PrefixFilter(TokenStream in) {\r\n      super(in);\r\n    }\r\n\r\n    @Override\r\n    public final boolean incrementToken() throws IOException {\r\n      if (!input.incrementToken()) {\r\n        return false;\r\n      }\r\n      String value = new String(termAtt.buffer());\r\n      value = value.trim();\r\n      value = value.toLowerCase();\r\n      value = StringUtils.removeStart(value, &quot;prefix_&quot;);\r\n      if (value.isBlank()) {\r\n        termAtt.setEmpty();\r\n      } else {\r\n        termAtt.copyBuffer(value.toCharArray(), 0, value.length());\r\n        termAtt.setLength(value.length());\r\n      }\r\n      return true;\r\n    }\r\n  }\r\n```\r\n\r\nSo after 10 or twelve queries, the value &quot;prefix_a&quot; became &quot;abcde&quot;.\r\n\r\nSo i&#39;m trying to add termBuffer offset end value in this way:\r\n\r\n        termAtt.setEmpty();\r\n        termAtt.resizeBuffer(value.length());\r\n        termAtt.copyBuffer(value.toCharArray(), 0, value.length());\r\n        termAtt.setLength(value.length());\r\n        termAtt.setOffset(0, value.length());\r\n\r\nBut i don&#39;t know if it&#39;s correct. Can anyone help me?\r\n\r\nThanks.\r\n","title":"Implementing custom prefix remover token filter in lucene producing dirty tokens","body":"<p>i'm trying to implement a lucene filter to remove a prefix from a term in a query.\nIt seems that sometime after multiple queries, the filter has been reused so the char buffer is dirty.</p>\n<p>Code below is simplified, prefix is an external parameter.</p>\n<pre><code>  public static class PrefixFilter extends TokenFilter {\n\n    private final PackedTokenAttributeImpl termAtt = (PackedTokenAttributeImpl) addAttribute(CharTermAttribute.class);\n\n    public PrefixFilter(TokenStream in) {\n      super(in);\n    }\n\n    @Override\n    public final boolean incrementToken() throws IOException {\n      if (!input.incrementToken()) {\n        return false;\n      }\n      String value = new String(termAtt.buffer());\n      value = value.trim();\n      value = value.toLowerCase();\n      value = StringUtils.removeStart(value, &quot;prefix_&quot;);\n      if (value.isBlank()) {\n        termAtt.setEmpty();\n      } else {\n        termAtt.copyBuffer(value.toCharArray(), 0, value.length());\n        termAtt.setLength(value.length());\n      }\n      return true;\n    }\n  }\n</code></pre>\n<p>So after 10 or twelve queries, the value &quot;prefix_a&quot; became &quot;abcde&quot;.</p>\n<p>So i'm trying to add termBuffer offset end value in this way:</p>\n<pre><code>    termAtt.setEmpty();\n    termAtt.resizeBuffer(value.length());\n    termAtt.copyBuffer(value.toCharArray(), 0, value.length());\n    termAtt.setLength(value.length());\n    termAtt.setOffset(0, value.length());\n</code></pre>\n<p>But i don't know if it's correct. Can anyone help me?</p>\n<p>Thanks.</p>\n"},{"tags":["java","ionic-framework","capacitor","ionic5"],"answers":[{"tags":[],"owner":{"account_id":17937837,"reputation":1,"user_id":13033831,"display_name":"madeinfr"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1637241514,"creation_date":1637241514,"answer_id":70020565,"question_id":68790840,"body_markdown":"Try this:\r\n`registerPlugins(Collections.singletonList(CapacitorGoogleMaps.class));`","title":"how to register plugin manually in capacitor 3?","body":"<p>Try this:\n<code>registerPlugins(Collections.singletonList(CapacitorGoogleMaps.class));</code></p>\n"}],"owner":{"account_id":19473494,"reputation":179,"user_id":16221216,"display_name":"Swift Solutions"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1621,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"answer_count":1,"score":2,"last_activity_date":1637241514,"creation_date":1629024654,"question_id":68790840,"body_markdown":"I am trying to use a plugin for background location tracking on Android. Capacitor is supposed to register the plugin automatically in MainActivity.java, but that&#39;s not happening. I tried to do that manually, but that is also not happening.\r\n```java\r\npackage com.siloc.users;\r\n\r\nimport com.getcapacitor.BridgeActivity;\r\nimport android.os.Bundle;\r\n\r\nimport com.getcapacitor.BridgeActivity;\r\nimport com.getcapacitor.Plugin;\r\n\r\nimport java.util.ArrayList;\r\nimport com.hemangkumar.capacitorgooglemaps.CapacitorGoogleMaps;\r\nimport com.equimaps.capacitor_background_geolocation.BackgroundGeolocation;\r\npublic class MainActivity extends BridgeActivity {\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n\r\n        registerPlugin(CapacitorGoogleMaps.class);\r\n        registerPlugin(BackgroundGeolocation.class);\r\n     \r\n    }\r\n\r\n}\r\n```\r\nHow can I do that?\r\n ","title":"how to register plugin manually in capacitor 3?","body":"<p>I am trying to use a plugin for background location tracking on Android. Capacitor is supposed to register the plugin automatically in MainActivity.java, but that's not happening. I tried to do that manually, but that is also not happening.</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.siloc.users;\n\nimport com.getcapacitor.BridgeActivity;\nimport android.os.Bundle;\n\nimport com.getcapacitor.BridgeActivity;\nimport com.getcapacitor.Plugin;\n\nimport java.util.ArrayList;\nimport com.hemangkumar.capacitorgooglemaps.CapacitorGoogleMaps;\nimport com.equimaps.capacitor_background_geolocation.BackgroundGeolocation;\npublic class MainActivity extends BridgeActivity {\n    @Override\n    public void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n\n        registerPlugin(CapacitorGoogleMaps.class);\n        registerPlugin(BackgroundGeolocation.class);\n     \n    }\n\n}\n</code></pre>\n<p>How can I do that?</p>\n"},{"tags":["java","spring","spring-security","spring-boot"],"comments":[{"owner":{"account_id":161943,"reputation":22096,"user_id":383087,"accept_rate":89,"display_name":"Evgeni Dimitrov"},"score":0,"creation_date":1456313024,"post_id":35600488,"comment_id":58886172,"body_markdown":"What if you remove the security properties security.user.* ?","body":"What if you remove the security properties security.user.* ?"},{"owner":{"account_id":6835541,"reputation":862,"user_id":5257697,"accept_rate":77,"display_name":"G.Spansky"},"score":0,"creation_date":1456313977,"post_id":35600488,"comment_id":58886847,"body_markdown":"Spring Boot will create default user with username: username, and generated password, and will show me this generated password in log when initializing.","body":"Spring Boot will create default user with username: username, and generated password, and will show me this generated password in log when initializing."}],"answers":[{"tags":[],"owner":{"account_id":1477692,"reputation":46661,"user_id":1393484,"accept_rate":100,"display_name":"Ali Dehghani"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1456314809,"creation_date":1456313839,"answer_id":35601116,"question_id":35600488,"body_markdown":"&gt; It seems that Spring Boot loads my custom Spring Securty config, but\r\n&gt; it doesn&#39;t use it.\r\n\r\nYou did not configure your `AuthenticationManager` correctly. You should use `@Autowired`:\r\n\r\n    @Autowired\r\n    public void configureGlobal(AuthenticationManagerBuilder auth) throws Exception{\r\n            auth.inMemoryAuthentication().withUser(&quot;user&quot;).password(&quot;password&quot;).roles(&quot;USER&quot;);\r\n    }\r\nYou can read more on spring security documentation [here][1]. Also, make sure that your configuration is going to be picked up by spring boot. You can read more about standard project structure in spring boot [here][2] and its security integration [here][3].\r\n\r\n**Update** Based on the stacktrace:\r\n\r\n&gt; Caused by: java.lang.IllegalArgumentException: ROLE_USER cannot start\r\n&gt; with ROLE_\r\n\r\nYou should drop the `ROLE_` prefix in `roles(&quot;ROLE_USER&quot;)`, Just use `roles(&quot;USER&quot;)`.\r\n\r\n  [1]: http://docs.spring.io/spring-security/site/docs/4.0.3.RELEASE/reference/htmlsingle/#hello-web-security-java-configuration\r\n  [2]: http://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#using-boot-structuring-your-code\r\n  [3]: http://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#boot-features-security","title":"How to override Spring Security default configuration in Spring Boot","body":"<blockquote>\n  <p>It seems that Spring Boot loads my custom Spring Securty config, but\n  it doesn't use it.</p>\n</blockquote>\n\n<p>You did not configure your <code>AuthenticationManager</code> correctly. You should use <code>@Autowired</code>:</p>\n\n<pre><code>@Autowired\npublic void configureGlobal(AuthenticationManagerBuilder auth) throws Exception{\n        auth.inMemoryAuthentication().withUser(\"user\").password(\"password\").roles(\"USER\");\n}\n</code></pre>\n\n<p>You can read more on spring security documentation <a href=\"http://docs.spring.io/spring-security/site/docs/4.0.3.RELEASE/reference/htmlsingle/#hello-web-security-java-configuration\" rel=\"nofollow\">here</a>. Also, make sure that your configuration is going to be picked up by spring boot. You can read more about standard project structure in spring boot <a href=\"http://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#using-boot-structuring-your-code\" rel=\"nofollow\">here</a> and its security integration <a href=\"http://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#boot-features-security\" rel=\"nofollow\">here</a>.</p>\n\n<p><strong>Update</strong> Based on the stacktrace:</p>\n\n<blockquote>\n  <p>Caused by: java.lang.IllegalArgumentException: ROLE_USER cannot start\n  with ROLE_</p>\n</blockquote>\n\n<p>You should drop the <code>ROLE_</code> prefix in <code>roles(\"ROLE_USER\")</code>, Just use <code>roles(\"USER\")</code>.</p>\n"},{"tags":[],"owner":{"account_id":6835541,"reputation":862,"user_id":5257697,"accept_rate":77,"display_name":"G.Spansky"},"down_vote_count":1,"up_vote_count":6,"is_accepted":true,"score":5,"last_activity_date":1456331023,"creation_date":1456331023,"answer_id":35607507,"question_id":35600488,"body_markdown":"Ok I found the solution for security configure settings (not AuthenticationManager). \r\n\r\nFirst of all, according to Spring Boot dot, we have to add @EnableWebSecurity annotation.\r\n\r\nSecond of all, we have to override configure method WITH @Override annotation AND super.configure(http) at the end of the method.\r\n\r\nSo the working configuration code looks like this:\r\n\r\n     @Configuration\r\n    @EnableWebSecurity //Very important!\r\n    @EnableGlobalMethodSecurity(securedEnabled = true)\r\n    @Profile(&quot;dev&quot;)\r\n    public class SecurityConfiguration extends WebSecurityConfigurerAdapter {\r\n    \r\n    \t@Override //Very important!\r\n    \tprotected void configure(HttpSecurity http) throws Exception {\r\n    \t\thttp.authorizeRequests()\r\n    \t\t.antMatchers(&quot;/app/user/*&quot;).hasAnyRole(&quot;USER&quot;, &quot;ADMIN&quot;)\r\n    \t\t.antMatchers(&quot;/app/posts/*&quot;).hasAnyRole(&quot;USER&quot;, &quot;ADMIN&quot;)\r\n    \t\t.antMatchers(&quot;/app/*&quot;).permitAll()\r\n    \t\t.and()\r\n    \t\t.formLogin()\r\n    \t\t\t.loginPage(&quot;/app/&quot;)\r\n    \t\t\t.loginProcessingUrl(&quot;/login&quot;)\r\n    \t\t\t.usernameParameter(&quot;username&quot;)\r\n    \t\t\t.defaultSuccessUrl(&quot;/app/&quot;, true)\r\n    \t\t.and()\r\n    \t\t.logout()\r\n    \t\t\t.logoutUrl(&quot;/app/logout&quot;)\r\n    \t\t.and()\r\n    \t\t.csrf()\r\n    \t\t.and()\r\n    \t\t.exceptionHandling()\r\n    \t\t\t.accessDeniedPage(&quot;/app/forbidden&quot;);\r\n    \t\tsuper.configure(http); //Very important!\r\n    \t}\r\n    }\r\n\r\nNow my configurations is loading, and works properly. ","title":"How to override Spring Security default configuration in Spring Boot","body":"<p>Ok I found the solution for security configure settings (not AuthenticationManager). </p>\n\n<p>First of all, according to Spring Boot dot, we have to add @EnableWebSecurity annotation.</p>\n\n<p>Second of all, we have to override configure method WITH @Override annotation AND super.configure(http) at the end of the method.</p>\n\n<p>So the working configuration code looks like this:</p>\n\n<pre><code> @Configuration\n@EnableWebSecurity //Very important!\n@EnableGlobalMethodSecurity(securedEnabled = true)\n@Profile(\"dev\")\npublic class SecurityConfiguration extends WebSecurityConfigurerAdapter {\n\n    @Override //Very important!\n    protected void configure(HttpSecurity http) throws Exception {\n        http.authorizeRequests()\n        .antMatchers(\"/app/user/*\").hasAnyRole(\"USER\", \"ADMIN\")\n        .antMatchers(\"/app/posts/*\").hasAnyRole(\"USER\", \"ADMIN\")\n        .antMatchers(\"/app/*\").permitAll()\n        .and()\n        .formLogin()\n            .loginPage(\"/app/\")\n            .loginProcessingUrl(\"/login\")\n            .usernameParameter(\"username\")\n            .defaultSuccessUrl(\"/app/\", true)\n        .and()\n        .logout()\n            .logoutUrl(\"/app/logout\")\n        .and()\n        .csrf()\n        .and()\n        .exceptionHandling()\n            .accessDeniedPage(\"/app/forbidden\");\n        super.configure(http); //Very important!\n    }\n}\n</code></pre>\n\n<p>Now my configurations is loading, and works properly. </p>\n"},{"tags":[],"owner":{"account_id":5948004,"reputation":901,"user_id":4676964,"accept_rate":86,"display_name":"tecnocrata"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1481076372,"creation_date":1481076372,"answer_id":41008243,"question_id":35600488,"body_markdown":"did you remove this code?\r\n\r\n   \r\n\r\n     @Autowired\r\n        public void configureGlobal(AuthenticationManagerBuilder auth) throws Exception{\r\n                auth.inMemoryAuthentication().withUser(&quot;user&quot;).password(&quot;password&quot;).roles(&quot;USER&quot;);\r\n        }","title":"How to override Spring Security default configuration in Spring Boot","body":"<p>did you remove this code?</p>\n\n<pre><code> @Autowired\n    public void configureGlobal(AuthenticationManagerBuilder auth) throws Exception{\n            auth.inMemoryAuthentication().withUser(\"user\").password(\"password\").roles(\"USER\");\n    }\n</code></pre>\n"}],"owner":{"account_id":6835541,"reputation":862,"user_id":5257697,"accept_rate":77,"display_name":"G.Spansky"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":29168,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":35607507,"answer_count":3,"score":5,"last_activity_date":1637241468,"creation_date":1456312222,"question_id":35600488,"body_markdown":"I have a little problem with Spring Boot. I really like Spring Boot, it&#39;s very convenient tool, which allow me to focus on logic implementation instead of beans configuration. BUT... I want to override default Spring Security configuraton. I&#39;ve created SecurityConfig class, and Spring Boot loads that class when starts. I can see my config beans on address/beans. \r\n\r\nBut configuration is still default (I guess).\r\n\r\n    @Configuration\r\n    @EnableWebSecurity\r\n    public class SecurityConfiguration extends WebSecurityConfigurerAdapter {\r\n     \r\n    \tpublic void configureGlobal(AuthenticationManagerBuilder auth) throws Exception{\r\n    \t\tauth.inMemoryAuthentication().withUser(&quot;user&quot;).password(&quot;password&quot;).roles(&quot;USER&quot;);\r\n    \t}\r\n    \t\r\n    \tprotected void cofigure(HttpSecurity http) throws Exception{\r\n    \t\t\r\n    \t\thttp.authorizeRequests()\r\n    \t\t.antMatchers(&quot;/app/&quot;).permitAll()\r\n    \t\t.anyRequest().authenticated()\r\n            .and()\r\n            .formLogin()\r\n            .loginPage(&quot;/login&quot;)\r\n            .permitAll()\r\n            .and()\r\n            .logout()\r\n            .permitAll()\r\n    \t\t.and()\r\n    \t\t.csrf()\r\n    \t\t.and()\r\n    \t\t.exceptionHandling()\r\n    \t\t.accessDeniedPage(&quot;/error&quot;);\r\n    \t}\r\n    }\r\n\r\nI&#39;ve declared user with username: user, and pass: password. I&#39;ve also declared, that Spring Security must allow any user to see the index site: localhost:port/app/ .\r\n\r\nI supposed that If I enter localhost:port/app/ url into browser, Spring Security let me in. Instead, I get localhost:port/login page and default Spring Security login form. Moreover, username and password declared in AuthenticationManager doesnt&#39;t work. \r\n\r\nBut if I type my app properties credentias it works.\r\n\r\n    security.user.name=testUser\r\n    security.user.password=testPass\r\n    security.user.role=USER\r\n\r\nConclusion: It seems that Spring Boot loads my custom Spring Securty config, but it doesn&#39;t use it. \r\n\r\nWhy? \r\n\r\nEDIT: \r\n\r\nNow my SecurityConf looks like this: \r\n\r\n    @Configuration\r\n    @EnableWebSecurity\r\n    @EnableGlobalMethodSecurity(securedEnabled = true)\r\n    public class SecurityConfiguration extends WebSecurityConfigurerAdapter {\r\n    \t\r\n    \t@Autowired\r\n    \tpublic void configureGlobal(AuthenticationManagerBuilder auth) throws Exception{\r\n    \t\tauth.inMemoryAuthentication().withUser(&quot;user&quot;).password(&quot;password&quot;).roles(&quot;ROLE_USER&quot;);\r\n    \t}\r\n    \t\r\n    \tprotected void cofigure(HttpSecurity http) throws Exception{\r\n    \t\t http\r\n             .authorizeRequests()\r\n             .antMatchers(&quot;/&quot;).permitAll()\r\n             .antMatchers(&quot;/app/&quot;).permitAll()\r\n             .and().formLogin();\r\n    \t}\r\n    \t\r\n    }\r\n\r\npom.xml: \r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    \txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    \t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \r\n    \t&lt;groupId&gt;szczepanski.gerard&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;spring-boot-edu-fm&lt;/artifactId&gt;\r\n    \t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n    \t&lt;packaging&gt;jar&lt;/packaging&gt;\r\n    \r\n    \t&lt;name&gt;SpringBootEduFreemarker&lt;/name&gt;\r\n    \t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n    \r\n    \t&lt;parent&gt;\r\n    \t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;1.3.2.RELEASE&lt;/version&gt;\r\n    \t\t&lt;relativePath /&gt; &lt;!-- lookup parent from repository --&gt;\r\n    \t&lt;/parent&gt;\r\n    \r\n    \t&lt;properties&gt;\r\n    \t\t&lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n    \t\t&lt;java.version&gt;1.8&lt;/java.version&gt;\r\n    \t&lt;/properties&gt;\r\n    \r\n    \t&lt;dependencies&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-freemarker&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.hsqldb&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;hsqldb&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n    \t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.scala-lang&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;scala-library&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;2.11.0&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t&lt;/dependencies&gt;\r\n    \r\n    \t&lt;build&gt;\r\n    \t\t&lt;plugins&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t&lt;/plugins&gt;\r\n    \t&lt;/build&gt;\r\n    &lt;/project&gt;\r\n\r\nAnd stack trace occuring when Spring Boot is initializing: \r\n\r\n    org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;org.springframework.security.con\r\n    fig.annotation.web.configuration.WebSecurityConfiguration&#39;: Injection of autowired dependencies failed; nested exception\r\n     is org.springframework.beans.factory.BeanCreationException: Could not autowire method: public void org.springframework.\r\n    security.config.annotation.web.configuration.WebSecurityConfiguration.setFilterChainProxySecurityConfigurer(org.springfr\r\n    amework.security.config.annotation.ObjectPostProcessor,java.util.List) throws java.lang.Exception; nested exception is o\r\n    rg.springframework.beans.factory.BeanExpressionException: Expression parsing failed; nested exception is org.springframe\r\n    work.beans.factory.BeanCreationException: Error creating bean with name &#39;securityConfiguration&#39;: Injection of autowired \r\n    dependencies failed; nested exception is java.lang.IllegalArgumentException: ROLE_USER cannot start with ROLE_ (it is au\r\n    tomatically added)\r\n    \tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(Autowire\r\n    dAnnotationBeanPostProcessor.java:334) ~[spring-beans-4.2.4.RELEASE.jar:4.2.4.RELEASE]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBea\r\n    nFactory.java:1214) ~[spring-beans-4.2.4.RELEASE.jar:4.2.4.RELEASE]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBea\r\n    nFactory.java:543) ~[spring-beans-4.2.4.RELEASE.jar:4.2.4.RELEASE]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanF\r\n    actory.java:482) ~[spring-beans-4.2.4.RELEASE.jar:4.2.4.RELEASE]\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:306) ~[spring-bea\r\n    ns-4.2.4.RELEASE.jar:4.2.4.RELEASE]\r\n    \tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.jav\r\n    a:230) ~[spring-beans-4.2.4.RELEASE.jar:4.2.4.RELEASE]\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:302) ~[spring-beans\r\n    -4.2.4.RELEASE.jar:4.2.4.RELEASE]\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197) ~[spring-beans-4\r\n    .2.4.RELEASE.jar:4.2.4.RELEASE]\r\n    \tat org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java\r\n    :368) ~[spring-beans-4.2.4.RELEASE.jar:4.2.4.RELEASE]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractA\r\n    utowireCapableBeanFactory.java:1123) ~[spring-beans-4.2.4.RELEASE.jar:4.2.4.RELEASE]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapa\r\n    bleBeanFactory.java:1018) ~[spring-beans-4.2.4.RELEASE.jar:4.2.4.RELEASE]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBea\r\n    nFactory.java:510) ~[spring-beans-4.2.4.RELEASE.jar:4.2.4.RELEASE]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanF\r\n    actory.java:482) ~[spring-beans-4.2.4.RELEASE.jar:4.2.4.RELEASE]\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:306) ~[spring-bea\r\n    ns-4.2.4.RELEASE.jar:4.2.4.RELEASE]\r\n    \tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.jav\r\n    a:230) ~[spring-beans-4.2.4.RELEASE.jar:4.2.4.RELEASE]\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:302) ~[spring-beans\r\n    -4.2.4.RELEASE.jar:4.2.4.RELEASE]\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202) ~[spring-beans-4\r\n    .2.4.RELEASE.jar:4.2.4.RELEASE]\r\n    \tat org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1060) ~[sprin\r\n    g-context-4.2.4.RELEASE.jar:4.2.4.RELEASE]\r\n    \tat org.springframework.web.filter.DelegatingFilterProxy.initDelegate(DelegatingFilterProxy.java:326) ~[spring-web-4.2.4\r\n    .RELEASE.jar:4.2.4.RELEASE]\r\n    \tat org.springframework.web.filter.DelegatingFilterProxy.initFilterBean(DelegatingFilterProxy.java:235) ~[spring-web-4.2\r\n    .4.RELEASE.jar:4.2.4.RELEASE]\r\n    \tat org.springframework.web.filter.GenericFilterBean.init(GenericFilterBean.java:199) ~[spring-web-4.2.4.RELEASE.jar:4.2\r\n    .4.RELEASE]\r\n    \tat org.apache.catalina.core.ApplicationFilterConfig.initFilter(ApplicationFilterConfig.java:279) ~[tomcat-embed-core-8.\r\n    0.30.jar:8.0.30]\r\n    \tat org.apache.catalina.core.ApplicationFilterConfig.&lt;init&gt;(ApplicationFilterConfig.java:109) ~[tomcat-embed-core-8.0.30\r\n    .jar:8.0.30]\r\n    \tat org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:4659) [tomcat-embed-core-8.0.30.jar:8.0.30\r\n    ]\r\n    \tat org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5281) [tomcat-embed-core-8.0.30.jar:8.0.\r\n    30]\r\n    \tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150) [tomcat-embed-core-8.0.30.jar:8.0.30]\r\n    \tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1408) [tomcat-embed-core-8.0.30.jar:8.0.30\r\n    ]\r\n    \tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1398) [tomcat-embed-core-8.0.30.jar:8.0.30\r\n    ]\r\n    \tat java.util.concurrent.FutureTask.run(Unknown Source) [na:1.8.0_66]\r\n    \tat java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source) [na:1.8.0_66]\r\n    \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) [na:1.8.0_66]\r\n    \tat java.lang.Thread.run(Unknown Source) [na:1.8.0_66]\r\n    Caused by: org.springframework.beans.factory.BeanCreationException: Could not autowire method: public void org.springfra\r\n    mework.security.config.annotation.web.configuration.WebSecurityConfiguration.setFilterChainProxySecurityConfigurer(org.s\r\n    pringframework.security.config.annotation.ObjectPostProcessor,java.util.List) throws java.lang.Exception; nested excepti\r\n    on is org.springframework.beans.factory.BeanExpressionException: Expression parsing failed; nested exception is org.spri\r\n    ngframework.beans.factory.BeanCreationException: Error creating bean with name &#39;securityConfiguration&#39;: Injection of aut\r\n    owired dependencies failed; nested exception is java.lang.IllegalArgumentException: ROLE_USER cannot start with ROLE_ (i\r\n    t is automatically added)\r\n    \tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.inject(Auto\r\n    wiredAnnotationBeanPostProcessor.java:661) ~[spring-beans-4.2.4.RELEASE.jar:4.2.4.RELEASE]\r\n    \tat org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:88) ~[spring-beans-4.2.\r\n    4.RELEASE.jar:4.2.4.RELEASE]\r\n    \tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(Autowire\r\n    dAnnotationBeanPostProcessor.java:331) ~[spring-beans-4.2.4.RELEASE.jar:4.2.4.RELEASE]\r\n    \t... 31 common frames omitted\r\n    Caused by: org.springframework.beans.factory.BeanExpressionException: Expression parsing failed; nested exception is org\r\n    .springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;securityConfiguration&#39;: Injection o\r\n    f autowired dependencies failed; nested exception is java.lang.IllegalArgumentException: ROLE_USER cannot start with ROL\r\n    E_ (it is automatically added)\r\n    \tat org.springframework.context.expression.StandardBeanExpressionResolver.evaluate(StandardBeanExpressionResolver.java:1\r\n    64) ~[spring-context-4.2.4.RELEASE.jar:4.2.4.RELEASE]\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.evaluateBeanDefinitionString(AbstractBeanFactory.java:\r\n    1413) ~[spring-beans-4.2.4.RELEASE.jar:4.2.4.RELEASE]\r\n    \tat org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.\r\n    java:1029) ~[spring-beans-4.2.4.RELEASE.jar:4.2.4.RELEASE]\r\n    \tat org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.ja\r\n    va:1014) ~[spring-beans-4.2.4.RELEASE.jar:4.2.4.RELEASE]\r\n    \tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.inject(Auto\r\n    wiredAnnotationBeanPostProcessor.java:618) ~[spring-beans-4.2.4.RELEASE.jar:4.2.4.RELEASE]\r\n    \t... 33 common frames omitted\r\n    Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;securityConfiguration\r\n    &#39;: Injection of autowired dependencies failed; nested exception is java.lang.IllegalArgumentException: ROLE_USER cannot \r\n    start with ROLE_ (it is automatically added)\r\n    \tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(Autowire\r\n    dAnnotationBeanPostProcessor.java:334) ~[spring-beans-4.2.4.RELEASE.jar:4.2.4.RELEASE]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBea\r\n    nFactory.java:1214) ~[spring-beans-4.2.4.RELEASE.jar:4.2.4.RELEASE]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBea\r\n    nFactory.java:543) ~[spring-beans-4.2.4.RELEASE.jar:4.2.4.RELEASE]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanF\r\n    actory.java:482) ~[spring-beans-4.2.4.RELEASE.jar:4.2.4.RELEASE]\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:306) ~[spring-bea\r\n    ns-4.2.4.RELEASE.jar:4.2.4.RELEASE]\r\n    \tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.jav\r\n    a:230) ~[spring-beans-4.2.4.RELEASE.jar:4.2.4.RELEASE]\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:302) ~[spring-beans\r\n    -4.2.4.RELEASE.jar:4.2.4.RELEASE]\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202) ~[spring-beans-4\r\n    .2.4.RELEASE.jar:4.2.4.RELEASE]\r\n    \tat org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeansOfType(DefaultListableBeanFactory.java:\r\n    534) ~[spring-beans-4.2.4.RELEASE.jar:4.2.4.RELEASE]\r\n    \tat org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeansOfType(DefaultListableBeanFactory.java:\r\n    523) ~[spring-beans-4.2.4.RELEASE.jar:4.2.4.RELEASE]\r\n    \tat org.springframework.security.config.annotation.web.configuration.AutowiredWebSecurityConfigurersIgnoreParents.getWeb\r\n    SecurityConfigurers(AutowiredWebSecurityConfigurersIgnoreParents.java:53) ~[spring-security-config-4.0.3.RELEASE.jar:4.0\r\n    .3.RELEASE]\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_66]\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) ~[na:1.8.0_66]\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) ~[na:1.8.0_66]\r\n    \tat java.lang.reflect.Method.invoke(Unknown Source) ~[na:1.8.0_66]\r\n    \tat org.springframework.expression.spel.support.ReflectiveMethodExecutor.execute(ReflectiveMethodExecutor.java:113) ~[sp\r\n    ring-expression-4.2.4.RELEASE.jar:4.2.4.RELEASE]\r\n    \tat org.springframework.expression.spel.ast.MethodReference.getValueInternal(MethodReference.java:129) ~[spring-expressi\r\n    on-4.2.4.RELEASE.jar:4.2.4.RELEASE]\r\n    \tat org.springframework.expression.spel.ast.MethodReference.access$000(MethodReference.java:49) ~[spring-expression-4.2.\r\n    4.RELEASE.jar:4.2.4.RELEASE]\r\n    \tat org.springframework.expression.spel.ast.MethodReference$MethodValueRef.getValue(MethodReference.java:347) ~[spring-e\r\n    xpression-4.2.4.RELEASE.jar:4.2.4.RELEASE]\r\n    \tat org.springframework.expression.spel.ast.CompoundExpression.getValueInternal(CompoundExpression.java:88) ~[spring-exp\r\n    ression-4.2.4.RELEASE.jar:4.2.4.RELEASE]\r\n    \tat org.springframework.expression.spel.ast.SpelNodeImpl.getValue(SpelNodeImpl.java:120) ~[spring-expression-4.2.4.RELEA\r\n    SE.jar:4.2.4.RELEASE]\r\n    \tat org.springframework.expression.spel.standard.SpelExpression.getValue(SpelExpression.java:242) ~[spring-expression-4.\r\n    2.4.RELEASE.jar:4.2.4.RELEASE]\r\n    \tat org.springframework.context.expression.StandardBeanExpressionResolver.evaluate(StandardBeanExpressionResolver.java:1\r\n    61) ~[spring-context-4.2.4.RELEASE.jar:4.2.4.RELEASE]\r\n    \t... 37 common frames omitted\r\n    Caused by: java.lang.IllegalArgumentException: ROLE_USER cannot start with ROLE_ (it is automatically added)\r\n    \tat org.springframework.util.Assert.isTrue(Assert.java:68) ~[spring-core-4.2.4.RELEASE.jar:4.2.4.RELEASE]\r\n    \tat org.springframework.security.config.annotation.authentication.configurers.provisioning.UserDetailsManagerConfigurer$\r\n    UserDetailsBuilder.roles(UserDetailsManagerConfigurer.java:167) ~[spring-security-config-4.0.3.RELEASE.jar:4.0.3.RELEASE\r\n    ]\r\n    \tat edu.spring.boot.app.security.SecurityConfiguration.configureGlobal(SecurityConfiguration.java:18) ~[classes/:na]\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_66]\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) ~[na:1.8.0_66]\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) ~[na:1.8.0_66]\r\n    \tat java.lang.reflect.Method.invoke(Unknown Source) ~[na:1.8.0_66]\r\n    \tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.inject(Auto\r\n    wiredAnnotationBeanPostProcessor.java:654) ~[spring-beans-4.2.4.RELEASE.jar:4.2.4.RELEASE]\r\n    \tat org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:88) ~[spring-beans-4.2.\r\n    4.RELEASE.jar:4.2.4.RELEASE]\r\n    \tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(Autowire\r\n    dAnnotationBeanPostProcessor.java:331) ~[spring-beans-4.2.4.RELEASE.jar:4.2.4.RELEASE]\r\n    \t... 59 common frames omitted\r\n\r\n","title":"How to override Spring Security default configuration in Spring Boot","body":"<p>I have a little problem with Spring Boot. I really like Spring Boot, it's very convenient tool, which allow me to focus on logic implementation instead of beans configuration. BUT... I want to override default Spring Security configuraton. I've created SecurityConfig class, and Spring Boot loads that class when starts. I can see my config beans on address/beans.</p>\n<p>But configuration is still default (I guess).</p>\n<pre><code>@Configuration\n@EnableWebSecurity\npublic class SecurityConfiguration extends WebSecurityConfigurerAdapter {\n \n    public void configureGlobal(AuthenticationManagerBuilder auth) throws Exception{\n        auth.inMemoryAuthentication().withUser(&quot;user&quot;).password(&quot;password&quot;).roles(&quot;USER&quot;);\n    }\n    \n    protected void cofigure(HttpSecurity http) throws Exception{\n        \n        http.authorizeRequests()\n        .antMatchers(&quot;/app/&quot;).permitAll()\n        .anyRequest().authenticated()\n        .and()\n        .formLogin()\n        .loginPage(&quot;/login&quot;)\n        .permitAll()\n        .and()\n        .logout()\n        .permitAll()\n        .and()\n        .csrf()\n        .and()\n        .exceptionHandling()\n        .accessDeniedPage(&quot;/error&quot;);\n    }\n}\n</code></pre>\n<p>I've declared user with username: user, and pass: password. I've also declared, that Spring Security must allow any user to see the index site: localhost:port/app/ .</p>\n<p>I supposed that If I enter localhost:port/app/ url into browser, Spring Security let me in. Instead, I get localhost:port/login page and default Spring Security login form. Moreover, username and password declared in AuthenticationManager doesnt't work.</p>\n<p>But if I type my app properties credentias it works.</p>\n<pre><code>security.user.name=testUser\nsecurity.user.password=testPass\nsecurity.user.role=USER\n</code></pre>\n<p>Conclusion: It seems that Spring Boot loads my custom Spring Securty config, but it doesn't use it.</p>\n<p>Why?</p>\n<p>EDIT:</p>\n<p>Now my SecurityConf looks like this:</p>\n<pre><code>@Configuration\n@EnableWebSecurity\n@EnableGlobalMethodSecurity(securedEnabled = true)\npublic class SecurityConfiguration extends WebSecurityConfigurerAdapter {\n    \n    @Autowired\n    public void configureGlobal(AuthenticationManagerBuilder auth) throws Exception{\n        auth.inMemoryAuthentication().withUser(&quot;user&quot;).password(&quot;password&quot;).roles(&quot;ROLE_USER&quot;);\n    }\n    \n    protected void cofigure(HttpSecurity http) throws Exception{\n         http\n         .authorizeRequests()\n         .antMatchers(&quot;/&quot;).permitAll()\n         .antMatchers(&quot;/app/&quot;).permitAll()\n         .and().formLogin();\n    }\n    \n}\n</code></pre>\n<p>pom.xml:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;szczepanski.gerard&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-edu-fm&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;packaging&gt;jar&lt;/packaging&gt;\n\n    &lt;name&gt;SpringBootEduFreemarker&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;1.3.2.RELEASE&lt;/version&gt;\n        &lt;relativePath /&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n\n    &lt;properties&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;java.version&gt;1.8&lt;/java.version&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-freemarker&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.hsqldb&lt;/groupId&gt;\n            &lt;artifactId&gt;hsqldb&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.scala-lang&lt;/groupId&gt;\n            &lt;artifactId&gt;scala-library&lt;/artifactId&gt;\n            &lt;version&gt;2.11.0&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n<p>And stack trace occuring when Spring Boot is initializing:</p>\n<pre><code>org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.con\nfig.annotation.web.configuration.WebSecurityConfiguration': Injection of autowired dependencies failed; nested exception\n is org.springframework.beans.factory.BeanCreationException: Could not autowire method: public void org.springframework.\nsecurity.config.annotation.web.configuration.WebSecurityConfiguration.setFilterChainProxySecurityConfigurer(org.springfr\namework.security.config.annotation.ObjectPostProcessor,java.util.List) throws java.lang.Exception; nested exception is o\nrg.springframework.beans.factory.BeanExpressionException: Expression parsing failed; nested exception is org.springframe\nwork.beans.factory.BeanCreationException: Error creating bean with name 'securityConfiguration': Injection of autowired \ndependencies failed; nested exception is java.lang.IllegalArgumentException: ROLE_USER cannot start with ROLE_ (it is au\ntomatically added)\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(Autowire\ndAnnotationBeanPostProcessor.java:334) ~[spring-beans-4.2.4.RELEASE.jar:4.2.4.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBea\nnFactory.java:1214) ~[spring-beans-4.2.4.RELEASE.jar:4.2.4.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBea\nnFactory.java:543) ~[spring-beans-4.2.4.RELEASE.jar:4.2.4.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanF\nactory.java:482) ~[spring-beans-4.2.4.RELEASE.jar:4.2.4.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:306) ~[spring-bea\nns-4.2.4.RELEASE.jar:4.2.4.RELEASE]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.jav\na:230) ~[spring-beans-4.2.4.RELEASE.jar:4.2.4.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:302) ~[spring-beans\n-4.2.4.RELEASE.jar:4.2.4.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197) ~[spring-beans-4\n.2.4.RELEASE.jar:4.2.4.RELEASE]\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java\n:368) ~[spring-beans-4.2.4.RELEASE.jar:4.2.4.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractA\nutowireCapableBeanFactory.java:1123) ~[spring-beans-4.2.4.RELEASE.jar:4.2.4.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapa\nbleBeanFactory.java:1018) ~[spring-beans-4.2.4.RELEASE.jar:4.2.4.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBea\nnFactory.java:510) ~[spring-beans-4.2.4.RELEASE.jar:4.2.4.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanF\nactory.java:482) ~[spring-beans-4.2.4.RELEASE.jar:4.2.4.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:306) ~[spring-bea\nns-4.2.4.RELEASE.jar:4.2.4.RELEASE]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.jav\na:230) ~[spring-beans-4.2.4.RELEASE.jar:4.2.4.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:302) ~[spring-beans\n-4.2.4.RELEASE.jar:4.2.4.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202) ~[spring-beans-4\n.2.4.RELEASE.jar:4.2.4.RELEASE]\n    at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1060) ~[sprin\ng-context-4.2.4.RELEASE.jar:4.2.4.RELEASE]\n    at org.springframework.web.filter.DelegatingFilterProxy.initDelegate(DelegatingFilterProxy.java:326) ~[spring-web-4.2.4\n.RELEASE.jar:4.2.4.RELEASE]\n    at org.springframework.web.filter.DelegatingFilterProxy.initFilterBean(DelegatingFilterProxy.java:235) ~[spring-web-4.2\n.4.RELEASE.jar:4.2.4.RELEASE]\n    at org.springframework.web.filter.GenericFilterBean.init(GenericFilterBean.java:199) ~[spring-web-4.2.4.RELEASE.jar:4.2\n.4.RELEASE]\n    at org.apache.catalina.core.ApplicationFilterConfig.initFilter(ApplicationFilterConfig.java:279) ~[tomcat-embed-core-8.\n0.30.jar:8.0.30]\n    at org.apache.catalina.core.ApplicationFilterConfig.&lt;init&gt;(ApplicationFilterConfig.java:109) ~[tomcat-embed-core-8.0.30\n.jar:8.0.30]\n    at org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:4659) [tomcat-embed-core-8.0.30.jar:8.0.30\n]\n    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5281) [tomcat-embed-core-8.0.30.jar:8.0.\n30]\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150) [tomcat-embed-core-8.0.30.jar:8.0.30]\n    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1408) [tomcat-embed-core-8.0.30.jar:8.0.30\n]\n    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1398) [tomcat-embed-core-8.0.30.jar:8.0.30\n]\n    at java.util.concurrent.FutureTask.run(Unknown Source) [na:1.8.0_66]\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source) [na:1.8.0_66]\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) [na:1.8.0_66]\n    at java.lang.Thread.run(Unknown Source) [na:1.8.0_66]\nCaused by: org.springframework.beans.factory.BeanCreationException: Could not autowire method: public void org.springfra\nmework.security.config.annotation.web.configuration.WebSecurityConfiguration.setFilterChainProxySecurityConfigurer(org.s\npringframework.security.config.annotation.ObjectPostProcessor,java.util.List) throws java.lang.Exception; nested excepti\non is org.springframework.beans.factory.BeanExpressionException: Expression parsing failed; nested exception is org.spri\nngframework.beans.factory.BeanCreationException: Error creating bean with name 'securityConfiguration': Injection of aut\nowired dependencies failed; nested exception is java.lang.IllegalArgumentException: ROLE_USER cannot start with ROLE_ (i\nt is automatically added)\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.inject(Auto\nwiredAnnotationBeanPostProcessor.java:661) ~[spring-beans-4.2.4.RELEASE.jar:4.2.4.RELEASE]\n    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:88) ~[spring-beans-4.2.\n4.RELEASE.jar:4.2.4.RELEASE]\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(Autowire\ndAnnotationBeanPostProcessor.java:331) ~[spring-beans-4.2.4.RELEASE.jar:4.2.4.RELEASE]\n    ... 31 common frames omitted\nCaused by: org.springframework.beans.factory.BeanExpressionException: Expression parsing failed; nested exception is org\n.springframework.beans.factory.BeanCreationException: Error creating bean with name 'securityConfiguration': Injection o\nf autowired dependencies failed; nested exception is java.lang.IllegalArgumentException: ROLE_USER cannot start with ROL\nE_ (it is automatically added)\n    at org.springframework.context.expression.StandardBeanExpressionResolver.evaluate(StandardBeanExpressionResolver.java:1\n64) ~[spring-context-4.2.4.RELEASE.jar:4.2.4.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.evaluateBeanDefinitionString(AbstractBeanFactory.java:\n1413) ~[spring-beans-4.2.4.RELEASE.jar:4.2.4.RELEASE]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.\njava:1029) ~[spring-beans-4.2.4.RELEASE.jar:4.2.4.RELEASE]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.ja\nva:1014) ~[spring-beans-4.2.4.RELEASE.jar:4.2.4.RELEASE]\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.inject(Auto\nwiredAnnotationBeanPostProcessor.java:618) ~[spring-beans-4.2.4.RELEASE.jar:4.2.4.RELEASE]\n    ... 33 common frames omitted\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'securityConfiguration\n': Injection of autowired dependencies failed; nested exception is java.lang.IllegalArgumentException: ROLE_USER cannot \nstart with ROLE_ (it is automatically added)\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(Autowire\ndAnnotationBeanPostProcessor.java:334) ~[spring-beans-4.2.4.RELEASE.jar:4.2.4.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBea\nnFactory.java:1214) ~[spring-beans-4.2.4.RELEASE.jar:4.2.4.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBea\nnFactory.java:543) ~[spring-beans-4.2.4.RELEASE.jar:4.2.4.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanF\nactory.java:482) ~[spring-beans-4.2.4.RELEASE.jar:4.2.4.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:306) ~[spring-bea\nns-4.2.4.RELEASE.jar:4.2.4.RELEASE]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.jav\na:230) ~[spring-beans-4.2.4.RELEASE.jar:4.2.4.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:302) ~[spring-beans\n-4.2.4.RELEASE.jar:4.2.4.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202) ~[spring-beans-4\n.2.4.RELEASE.jar:4.2.4.RELEASE]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeansOfType(DefaultListableBeanFactory.java:\n534) ~[spring-beans-4.2.4.RELEASE.jar:4.2.4.RELEASE]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeansOfType(DefaultListableBeanFactory.java:\n523) ~[spring-beans-4.2.4.RELEASE.jar:4.2.4.RELEASE]\n    at org.springframework.security.config.annotation.web.configuration.AutowiredWebSecurityConfigurersIgnoreParents.getWeb\nSecurityConfigurers(AutowiredWebSecurityConfigurersIgnoreParents.java:53) ~[spring-security-config-4.0.3.RELEASE.jar:4.0\n.3.RELEASE]\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_66]\n    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) ~[na:1.8.0_66]\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) ~[na:1.8.0_66]\n    at java.lang.reflect.Method.invoke(Unknown Source) ~[na:1.8.0_66]\n    at org.springframework.expression.spel.support.ReflectiveMethodExecutor.execute(ReflectiveMethodExecutor.java:113) ~[sp\nring-expression-4.2.4.RELEASE.jar:4.2.4.RELEASE]\n    at org.springframework.expression.spel.ast.MethodReference.getValueInternal(MethodReference.java:129) ~[spring-expressi\non-4.2.4.RELEASE.jar:4.2.4.RELEASE]\n    at org.springframework.expression.spel.ast.MethodReference.access$000(MethodReference.java:49) ~[spring-expression-4.2.\n4.RELEASE.jar:4.2.4.RELEASE]\n    at org.springframework.expression.spel.ast.MethodReference$MethodValueRef.getValue(MethodReference.java:347) ~[spring-e\nxpression-4.2.4.RELEASE.jar:4.2.4.RELEASE]\n    at org.springframework.expression.spel.ast.CompoundExpression.getValueInternal(CompoundExpression.java:88) ~[spring-exp\nression-4.2.4.RELEASE.jar:4.2.4.RELEASE]\n    at org.springframework.expression.spel.ast.SpelNodeImpl.getValue(SpelNodeImpl.java:120) ~[spring-expression-4.2.4.RELEA\nSE.jar:4.2.4.RELEASE]\n    at org.springframework.expression.spel.standard.SpelExpression.getValue(SpelExpression.java:242) ~[spring-expression-4.\n2.4.RELEASE.jar:4.2.4.RELEASE]\n    at org.springframework.context.expression.StandardBeanExpressionResolver.evaluate(StandardBeanExpressionResolver.java:1\n61) ~[spring-context-4.2.4.RELEASE.jar:4.2.4.RELEASE]\n    ... 37 common frames omitted\nCaused by: java.lang.IllegalArgumentException: ROLE_USER cannot start with ROLE_ (it is automatically added)\n    at org.springframework.util.Assert.isTrue(Assert.java:68) ~[spring-core-4.2.4.RELEASE.jar:4.2.4.RELEASE]\n    at org.springframework.security.config.annotation.authentication.configurers.provisioning.UserDetailsManagerConfigurer$\nUserDetailsBuilder.roles(UserDetailsManagerConfigurer.java:167) ~[spring-security-config-4.0.3.RELEASE.jar:4.0.3.RELEASE\n]\n    at edu.spring.boot.app.security.SecurityConfiguration.configureGlobal(SecurityConfiguration.java:18) ~[classes/:na]\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_66]\n    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) ~[na:1.8.0_66]\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) ~[na:1.8.0_66]\n    at java.lang.reflect.Method.invoke(Unknown Source) ~[na:1.8.0_66]\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.inject(Auto\nwiredAnnotationBeanPostProcessor.java:654) ~[spring-beans-4.2.4.RELEASE.jar:4.2.4.RELEASE]\n    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:88) ~[spring-beans-4.2.\n4.RELEASE.jar:4.2.4.RELEASE]\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(Autowire\ndAnnotationBeanPostProcessor.java:331) ~[spring-beans-4.2.4.RELEASE.jar:4.2.4.RELEASE]\n    ... 59 common frames omitted\n</code></pre>\n"},{"tags":["java","configuration","quarkus","debezium","outbox-pattern"],"answers":[{"tags":[],"owner":{"account_id":404979,"reputation":18340,"user_id":773616,"accept_rate":83,"display_name":"Gunnar"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1637241208,"creation_date":1637241208,"answer_id":70020486,"question_id":69809385,"body_markdown":"The option `table.fields.additional.placement` is used for configuring the event routing SMT, it&#39;s _not_ an option of the Quarkus outbox extension. It looks indeed as if you cannot have additional columns in your outbox table when using that extension currently. I have logged this request via [DBZ-4317](https://issues.redhat.com/browse/DBZ-4317). Any feedback and contributions for implementing this will be very welcomed.","title":"Quarkus outbox pattern with Debezium: how to add a custom column to outbox table","body":"<p>The option <code>table.fields.additional.placement</code> is used for configuring the event routing SMT, it's <em>not</em> an option of the Quarkus outbox extension. It looks indeed as if you cannot have additional columns in your outbox table when using that extension currently. I have logged this request via <a href=\"https://issues.redhat.com/browse/DBZ-4317\" rel=\"nofollow noreferrer\">DBZ-4317</a>. Any feedback and contributions for implementing this will be very welcomed.</p>\n"}],"owner":{"account_id":22149446,"reputation":23,"user_id":16398225,"display_name":"Pasquale Forte"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":244,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70020486,"answer_count":1,"score":0,"last_activity_date":1637241208,"creation_date":1635851401,"question_id":69809385,"body_markdown":"I am using Debezium for implementing outbox pattern on Quarkus (v 2.3.0 Final) and it works fine!\r\nI added a custom string column to my outbox table (on a Postgres DB) but when I call `event.fire`, the string value is not persisted. \r\nI have found this property `table.fields.additional.placement` in Debezium configuration but I can not understand how to use it in Quarkus application.properties.\r\nIs there anyone able to help me? \r\nThanks in advance","title":"Quarkus outbox pattern with Debezium: how to add a custom column to outbox table","body":"<p>I am using Debezium for implementing outbox pattern on Quarkus (v 2.3.0 Final) and it works fine!\nI added a custom string column to my outbox table (on a Postgres DB) but when I call <code>event.fire</code>, the string value is not persisted.\nI have found this property <code>table.fields.additional.placement</code> in Debezium configuration but I can not understand how to use it in Quarkus application.properties.\nIs there anyone able to help me?\nThanks in advance</p>\n"},{"tags":["java","sql","casting","jooq"],"answers":[{"tags":[],"owner":{"account_id":247217,"reputation":213455,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1637237535,"creation_date":1637237535,"answer_id":70019618,"question_id":70019342,"body_markdown":"I&#39;m assuming you&#39;d liek to have an object that behaves like any other generated table, but have it correspond to a dynamically constructed jOOQ query. A view expressed in jOOQ, if you like.\r\n\r\nThere&#39;s currently no easy way to achieve that. Pending feature requests include:\r\n\r\n- [#1969][1] Add support for views expressed in jOOQ\r\n- [#11054][2] Add code generator support for synthetic views\r\n\r\nFor now, you have to return a `Table&lt;?&gt;` instance, which lacks type safety, or just implement your view or table valued function directly in SQL and let the jOOQ code generator pick it up.\r\n\r\n\r\n  [1]: https://github.com/jOOQ/jOOQ/issues/1969\r\n  [2]: https://github.com/jOOQ/jOOQ/issues/11054","title":"Return custom JOOQ record when joining multiple table and selecting omonimous fields","body":"<p>I'm assuming you'd liek to have an object that behaves like any other generated table, but have it correspond to a dynamically constructed jOOQ query. A view expressed in jOOQ, if you like.</p>\n<p>There's currently no easy way to achieve that. Pending feature requests include:</p>\n<ul>\n<li><a href=\"https://github.com/jOOQ/jOOQ/issues/1969\" rel=\"nofollow noreferrer\">#1969</a> Add support for views expressed in jOOQ</li>\n<li><a href=\"https://github.com/jOOQ/jOOQ/issues/11054\" rel=\"nofollow noreferrer\">#11054</a> Add code generator support for synthetic views</li>\n</ul>\n<p>For now, you have to return a <code>Table&lt;?&gt;</code> instance, which lacks type safety, or just implement your view or table valued function directly in SQL and let the jOOQ code generator pick it up.</p>\n"}],"owner":{"account_id":23379212,"reputation":23,"user_id":17446926,"display_name":"Ghost"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":406,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":70019618,"answer_count":1,"score":2,"last_activity_date":1637240675,"creation_date":1637236238,"question_id":70019342,"body_markdown":"I&#39;m trying to make a little method to recicle the code related to retrieve some data to make it easy to use i need to make the resulting table records accessible, so i tried to make a CustomTable with a CustomRecord.\r\n\r\nto make more clear what i&#39;m trying to do i write down a little sample as what i tried:\r\n\r\n    public MyCustomTable getTableReusable(final DSLContext ctx,\r\n\t\tfinal Profile profile, final LocalDate date) {\r\n\t\tfinal Table&lt;Table1Record&gt; tab1 = Table1.TABLE1.as(&quot;a&quot;);\r\n\t\tfinal Table&lt;Table2Record&gt; tab2 = tab2.TABLE2.as(&quot;b&quot;);\r\n\t\t\r\n\t\treturn ctx.select(table1.field(tab1.ID).as(MyCustomTable.TAB1_ID), \r\n\t\t\t\ttab1.field(Table1.A_FIELD).as(MyCustomTable.TAB1_A_FIELD), \r\n\t\t\t\ttab2.field(Table2.ID).as(MyCustomTable.TAB2_ID), \r\n\t\t\t\ttab2.field(Table2.B_FIELD).as(MyCustomTable.TAB2_B_FIELD)) \r\n\t\t\t\t.from(tab1) \r\n\t\t\t\t.leftJoin(tab2) \r\n\t\t\t\t.on(tab1.field(Table1.ID).eq(tab2.field(Table2.TAB1_FK))) //\r\n\t\t\t\t.asTable();}\r\nAt the time it&#39;s impossible to cast this table to the custom table with all the field setted in the select method.\r\nIn custom table i even make the CustomRecord with all the record exposed.\r\n\r\nExist a way to make me return the data in my customTable?\r\n","title":"Return custom JOOQ record when joining multiple table and selecting omonimous fields","body":"<p>I'm trying to make a little method to recicle the code related to retrieve some data to make it easy to use i need to make the resulting table records accessible, so i tried to make a CustomTable with a CustomRecord.</p>\n<p>to make more clear what i'm trying to do i write down a little sample as what i tried:</p>\n<pre><code>public MyCustomTable getTableReusable(final DSLContext ctx,\n    final Profile profile, final LocalDate date) {\n    final Table&lt;Table1Record&gt; tab1 = Table1.TABLE1.as(&quot;a&quot;);\n    final Table&lt;Table2Record&gt; tab2 = tab2.TABLE2.as(&quot;b&quot;);\n    \n    return ctx.select(table1.field(tab1.ID).as(MyCustomTable.TAB1_ID), \n            tab1.field(Table1.A_FIELD).as(MyCustomTable.TAB1_A_FIELD), \n            tab2.field(Table2.ID).as(MyCustomTable.TAB2_ID), \n            tab2.field(Table2.B_FIELD).as(MyCustomTable.TAB2_B_FIELD)) \n            .from(tab1) \n            .leftJoin(tab2) \n            .on(tab1.field(Table1.ID).eq(tab2.field(Table2.TAB1_FK))) //\n            .asTable();}\n</code></pre>\n<p>At the time it's impossible to cast this table to the custom table with all the field setted in the select method.\nIn custom table i even make the CustomRecord with all the record exposed.</p>\n<p>Exist a way to make me return the data in my customTable?</p>\n"},{"tags":["java","spring","spring-data","many-to-many"],"answers":[{"tags":[],"owner":{"account_id":9504657,"reputation":7440,"user_id":7064617,"display_name":"JCompetence"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1637240602,"creation_date":1637240602,"answer_id":70020350,"question_id":70001906,"body_markdown":"To my knowledge, `@ManyToMany`, `@OneToMany`, etc are all relations between Entities.   An `Entity A` could have a relation to `Entity B` through a specific attribute.\r\n\r\n\r\nIf you wanted your `Veiculos` to have knowledge about `bonus`, then you will need a `@OneToOne` relation to MidiaVeiculos:\r\n\r\n\r\n    @Entity\r\n    public class Veiculos{\r\n    \r\n     @OneToOne\r\n     MidiVeiculous midi;\r\n    \r\n    }\r\n    \r\n    veiculos.getMidi().getBonus();\r\n\r\n\r\nhttps://docs.jboss.org/hibernate/jpa/2.1/api/javax/persistence/OneToOne.html\r\n\r\n\r\n----------\r\n\r\n\r\nAnother option which could work is using SecondaryTable:\r\n\r\n    @Entity\r\n    @Table(name = &quot;Veiculos&quot;)\r\n    @SecondaryTable(name = &quot;MidiaVeiculos&quot;, pkJoinColumns = @PrimaryKeyJoinColumn(name = &quot;MidiaVeiculos_id&quot;))\r\n    class Veiculos{\r\n\r\n        @Column(name = &quot;bonus&quot;, table = &quot;MidiaVeiculos&quot;)\r\n        String bonus;\r\n    \r\n    }\r\n\r\nStill however, there must be a relation between the two tables.  Like a PK-FK of some kind.\r\n\r\nSee: **Mapping one entity to several tables**\r\n\r\nhttps://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#mapping-declaration-join \r\n\r\n\r\n\r\n\r\n\r\n","title":"Java - Attach extra column from @ManyToMany relashionship to entity model","body":"<p>To my knowledge, <code>@ManyToMany</code>, <code>@OneToMany</code>, etc are all relations between Entities.   An <code>Entity A</code> could have a relation to <code>Entity B</code> through a specific attribute.</p>\n<p>If you wanted your <code>Veiculos</code> to have knowledge about <code>bonus</code>, then you will need a <code>@OneToOne</code> relation to MidiaVeiculos:</p>\n<pre><code>@Entity\npublic class Veiculos{\n\n @OneToOne\n MidiVeiculous midi;\n\n}\n\nveiculos.getMidi().getBonus();\n</code></pre>\n<p><a href=\"https://docs.jboss.org/hibernate/jpa/2.1/api/javax/persistence/OneToOne.html\" rel=\"nofollow noreferrer\">https://docs.jboss.org/hibernate/jpa/2.1/api/javax/persistence/OneToOne.html</a></p>\n<hr />\n<p>Another option which could work is using SecondaryTable:</p>\n<pre><code>@Entity\n@Table(name = &quot;Veiculos&quot;)\n@SecondaryTable(name = &quot;MidiaVeiculos&quot;, pkJoinColumns = @PrimaryKeyJoinColumn(name = &quot;MidiaVeiculos_id&quot;))\nclass Veiculos{\n\n    @Column(name = &quot;bonus&quot;, table = &quot;MidiaVeiculos&quot;)\n    String bonus;\n\n}\n</code></pre>\n<p>Still however, there must be a relation between the two tables.  Like a PK-FK of some kind.</p>\n<p>See: <strong>Mapping one entity to several tables</strong></p>\n<p><a href=\"https://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#mapping-declaration-join\" rel=\"nofollow noreferrer\">https://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#mapping-declaration-join</a></p>\n"}],"owner":{"account_id":14510057,"reputation":113,"user_id":10480841,"display_name":"Ellysson Miike"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1637240602,"creation_date":1637141636,"question_id":70001906,"body_markdown":"Scenario:\r\n\r\nI have 3 tables on MySQL server thats interacting with @ManyToMany, everything is working as well, but I need to retrieve another column rather than the column named on @ManyToMany annotation, like:\r\n\r\n```\r\nMidias\r\n|\r\n|_ midiasId\r\n|\r\n|...\r\n|@ManyToMany...\r\n|_ veiculos\r\n\r\n\r\nVeiculos\r\n|\r\n|_ veiculosId\r\n|\r\n|...\r\n|\r\n|@ManyToMany\r\n|- midias\r\n|...\r\n|\r\n|- bonus       &lt;-  I like this variable here fetched from MidiaVeiculos table  and attached to Veiculos entity*\r\n\r\nMidiaVeiculos\r\n|\r\n|- midiaCodigo\r\n|- veiculoCodigo\r\n|- bonus\r\n```\r\n\r\nI don&#39;t know if my code is fine, but I believe that have some other method more efficient, like: \r\n```\r\nveiculos.getBonus();\r\n```\r\n\r\nMy code:\r\n```\r\nprivate List&lt;MidiaResponseBonus&gt; listarMidiasPorFiltros(BuscarMidiaRequest request) {\r\n\r\n        List&lt;MidiaModel&gt; midias = this.mRepository.findAll(request.listarMidiasPorFiltros());\r\n\r\n        List&lt;MidiaResponseBonus&gt; mb = midias.stream()\r\n        .map(m -&gt; {\r\n            List&lt;VeiculoResponseComBonus&gt; veiculos = m.getVeiculos().stream().map(v -&gt; new VeiculoResponseComBonus(\r\n                v.getCodigo(),\r\n                v.getNumeroOrdem(),\r\n                v.getAnoFabricacao(),\r\n                v.getEmpresa(),\r\n                v.getRota(),\r\n                v.getOperacional(),\r\n                this.mvRepository.findByMidiaCodigoAndVeiculoCodigo(m.getCodigo(), v.getCodigo()).getBonus()\r\n            )).collect(Collectors.toList());\r\n            veiculos.forEach(v -&gt; System.out.println(v.getBonus()));\r\n            \r\n            return new MidiaResponseBonus(\r\n                m.getCodigo(),\r\n                m.getCliente(),\r\n                m.getCampanha(),\r\n                m.getProduto(),\r\n                m.getPedidoInsercao(),\r\n                m.getPedidoProducao(),\r\n                m.getInicioPeriodo(),\r\n                m.getTerminoPeriodo(),\r\n                m.getInicioFotos(),\r\n                m.getTerminoFotos(),\r\n                veiculos\r\n            );\r\n        }).collect(Collectors.toList());\r\n\r\n        return mb;\r\n    }\r\n```\r\n\r\n\r\nI need to retrieve the bonus column on the midiaVeiculos table\r\n\r\nCan I get some way with @ManyToOne and @OneToMany?\r\nThank you!","title":"Java - Attach extra column from @ManyToMany relashionship to entity model","body":"<p>Scenario:</p>\n<p>I have 3 tables on MySQL server thats interacting with @ManyToMany, everything is working as well, but I need to retrieve another column rather than the column named on @ManyToMany annotation, like:</p>\n<pre><code>Midias\n|\n|_ midiasId\n|\n|...\n|@ManyToMany...\n|_ veiculos\n\n\nVeiculos\n|\n|_ veiculosId\n|\n|...\n|\n|@ManyToMany\n|- midias\n|...\n|\n|- bonus       &lt;-  I like this variable here fetched from MidiaVeiculos table  and attached to Veiculos entity*\n\nMidiaVeiculos\n|\n|- midiaCodigo\n|- veiculoCodigo\n|- bonus\n</code></pre>\n<p>I don't know if my code is fine, but I believe that have some other method more efficient, like:</p>\n<pre><code>veiculos.getBonus();\n</code></pre>\n<p>My code:</p>\n<pre><code>private List&lt;MidiaResponseBonus&gt; listarMidiasPorFiltros(BuscarMidiaRequest request) {\n\n        List&lt;MidiaModel&gt; midias = this.mRepository.findAll(request.listarMidiasPorFiltros());\n\n        List&lt;MidiaResponseBonus&gt; mb = midias.stream()\n        .map(m -&gt; {\n            List&lt;VeiculoResponseComBonus&gt; veiculos = m.getVeiculos().stream().map(v -&gt; new VeiculoResponseComBonus(\n                v.getCodigo(),\n                v.getNumeroOrdem(),\n                v.getAnoFabricacao(),\n                v.getEmpresa(),\n                v.getRota(),\n                v.getOperacional(),\n                this.mvRepository.findByMidiaCodigoAndVeiculoCodigo(m.getCodigo(), v.getCodigo()).getBonus()\n            )).collect(Collectors.toList());\n            veiculos.forEach(v -&gt; System.out.println(v.getBonus()));\n            \n            return new MidiaResponseBonus(\n                m.getCodigo(),\n                m.getCliente(),\n                m.getCampanha(),\n                m.getProduto(),\n                m.getPedidoInsercao(),\n                m.getPedidoProducao(),\n                m.getInicioPeriodo(),\n                m.getTerminoPeriodo(),\n                m.getInicioFotos(),\n                m.getTerminoFotos(),\n                veiculos\n            );\n        }).collect(Collectors.toList());\n\n        return mb;\n    }\n</code></pre>\n<p>I need to retrieve the bonus column on the midiaVeiculos table</p>\n<p>Can I get some way with @ManyToOne and @OneToMany?\nThank you!</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":8154,"page":1838,"page_size":100}
