{"items":[{"tags":["java","annotations","code-generation"],"owner":{"account_id":23753819,"reputation":21,"user_id":17770182,"display_name":"sixwaay"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":13,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1700056035,"creation_date":1700056035,"question_id":77488245,"body_markdown":"I need to implement an Annotation Processor that generates a Java class related to the annotated class. However, my biggest challenge at the moment is understanding how to use Maven to implement such an Annotation Processor and make it work.\r\n\r\nAnnotation is like:\r\n```java\r\n@Retention(RetentionPolicy.CLASS)\r\n@Target(ElementType.TYPE)\r\npublic @interface Tag {\r\n    String value() default &quot;&quot;;\r\n}\r\n```\r\n\r\nprocessor is like:\r\n```java\r\n@SupportedAnnotationTypes({&quot;Tag&quot;})\r\n@SupportedSourceVersion(SourceVersion.RELEASE_11)\r\npublic class TagProcessor extends AbstractProcessor {\r\n    @Override\r\n    public boolean process(Set&lt;? extends TypeElement&gt; annotations, RoundEnvironment roundEnv) {\r\n        for (TypeElement annotation : annotations) {\r\n            var annotatedElements = roundEnv.getElementsAnnotatedWith(annotation);\r\n            for (var element : annotatedElements) {\r\n                if (element.getKind() == ElementKind.CLASS) {\r\n                    var className = ((TypeElement) element).getQualifiedName().toString();\r\n                    var packageName = className.substring(0, className.lastIndexOf(&#39;.&#39;));\r\n                    var simpleClassName = className.substring(className.lastIndexOf(&#39;.&#39;) + 1);\r\n                    var infoClassName = simpleClassName + &quot;Info&quot;;\r\n                    var tagValue = element.getAnnotation(Tag.class).value();\r\n\r\n                    // Generate the source code for the new class\r\n                    var infoClassSource = generateInfoClass(packageName, infoClassName, tagValue);\r\n\r\n                    // Write the generated source code to a new file\r\n                    try {\r\n                        writeSourceFile(packageName, infoClassName, infoClassSource);\r\n                    } catch (IOException e) {\r\n                        processingEnv.getMessager().printMessage(Diagnostic.Kind.ERROR,\r\n                                &quot;Error generating &quot; + infoClassName + &quot;: &quot; + e.getMessage());\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n\r\n    private String generateInfoClass(String packageName, String infoClassName, String tagValue) {\r\n        return &quot;package &quot; + packageName + &quot;;\\n\\n&quot; +\r\n                &quot;public class &quot; + infoClassName + &quot; {\\n&quot; +\r\n                &quot;    private String tag = \\&quot;&quot; + tagValue + &quot;\\&quot;;\\n\\n&quot; +\r\n                &quot;    public String getTag() {\\n&quot; +\r\n                &quot;        return tag;\\n&quot; +\r\n                &quot;    }\\n&quot; +\r\n                &quot;}&quot;;\r\n    }\r\n\r\n    private void writeSourceFile(String packageName, String className, String source) throws IOException {\r\n        var filer = processingEnv.getFiler();\r\n        var fileObject = filer.createSourceFile(packageName + &quot;.&quot; + className);\r\n        try (var writer = fileObject.openWriter()) {\r\n            writer.write(source);\r\n        }\r\n    }\r\n}\r\n```","title":"how to write a small, complete example of an Annotation Processor with maven?","body":"<p>I need to implement an Annotation Processor that generates a Java class related to the annotated class. However, my biggest challenge at the moment is understanding how to use Maven to implement such an Annotation Processor and make it work.</p>\n<p>Annotation is like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Retention(RetentionPolicy.CLASS)\n@Target(ElementType.TYPE)\npublic @interface Tag {\n    String value() default &quot;&quot;;\n}\n</code></pre>\n<p>processor is like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@SupportedAnnotationTypes({&quot;Tag&quot;})\n@SupportedSourceVersion(SourceVersion.RELEASE_11)\npublic class TagProcessor extends AbstractProcessor {\n    @Override\n    public boolean process(Set&lt;? extends TypeElement&gt; annotations, RoundEnvironment roundEnv) {\n        for (TypeElement annotation : annotations) {\n            var annotatedElements = roundEnv.getElementsAnnotatedWith(annotation);\n            for (var element : annotatedElements) {\n                if (element.getKind() == ElementKind.CLASS) {\n                    var className = ((TypeElement) element).getQualifiedName().toString();\n                    var packageName = className.substring(0, className.lastIndexOf('.'));\n                    var simpleClassName = className.substring(className.lastIndexOf('.') + 1);\n                    var infoClassName = simpleClassName + &quot;Info&quot;;\n                    var tagValue = element.getAnnotation(Tag.class).value();\n\n                    // Generate the source code for the new class\n                    var infoClassSource = generateInfoClass(packageName, infoClassName, tagValue);\n\n                    // Write the generated source code to a new file\n                    try {\n                        writeSourceFile(packageName, infoClassName, infoClassSource);\n                    } catch (IOException e) {\n                        processingEnv.getMessager().printMessage(Diagnostic.Kind.ERROR,\n                                &quot;Error generating &quot; + infoClassName + &quot;: &quot; + e.getMessage());\n                    }\n                }\n            }\n        }\n        return true;\n    }\n\n    private String generateInfoClass(String packageName, String infoClassName, String tagValue) {\n        return &quot;package &quot; + packageName + &quot;;\\n\\n&quot; +\n                &quot;public class &quot; + infoClassName + &quot; {\\n&quot; +\n                &quot;    private String tag = \\&quot;&quot; + tagValue + &quot;\\&quot;;\\n\\n&quot; +\n                &quot;    public String getTag() {\\n&quot; +\n                &quot;        return tag;\\n&quot; +\n                &quot;    }\\n&quot; +\n                &quot;}&quot;;\n    }\n\n    private void writeSourceFile(String packageName, String className, String source) throws IOException {\n        var filer = processingEnv.getFiler();\n        var fileObject = filer.createSourceFile(packageName + &quot;.&quot; + className);\n        try (var writer = fileObject.openWriter()) {\n            writer.write(source);\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-mvc"],"answers":[{"tags":[],"owner":{"account_id":17994687,"reputation":63,"user_id":13078026,"display_name":"smeds"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1700055734,"creation_date":1700055734,"answer_id":77488197,"question_id":77488106,"body_markdown":"You’re on the right track with creating a custom filter. However, the issue you’re facing is that the content type of the response is not set until after the controller method is executed. Therefore, when your filter is checking the content type, it’s still null.\r\n\r\nTo solve this, you can create a wrapper for the `HttpServletResponse` and override the `setContentType` method. In this method, you can check if the content type being set is “`application/json`” and if so, add the charset to the response headers.\r\n\r\nHere’s an example of how you can do it:\r\n\r\n\r\n    public class CharEncodingFilter extends OncePerRequestFilter {\r\n    \r\n        @Override\r\n        protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain)\r\n                throws ServletException, IOException {\r\n            HttpServletResponseWrapper responseWrapper = new HttpServletResponseWrapper(response) {\r\n                @Override\r\n                public void setContentType(String type) {\r\n                    if (MediaType.APPLICATION_JSON_VALUE.equals(type)) {\r\n                        super.setContentType(type + &quot;;charset=UTF-8&quot;);\r\n                    } else {\r\n                        super.setContentType(type);\r\n                    }\r\n                }\r\n            };\r\n            filterChain.doFilter(request, responseWrapper);\r\n        }\r\n    }\r\n\r\nIn this code, `OncePerRequestFilter` is a type of filter provided by Spring that ensures the filter is only applied once per request. When the `setContentType` method is called on the responseWrapper, it checks if the type is “`application/json`”. If it is, it sets the content type with the UTF-8 charset. Otherwise, it sets the content type as usual.\r\n\r\nRemember to register this filter in your configuration:\r\n\r\n    @Configuration\r\n    public class WebConfig {\r\n    \r\n        @Bean\r\n        public FilterRegistrationBean&lt;CharEncodingFilter&gt; charEncodingFilter() {\r\n            FilterRegistrationBean&lt;CharEncodingFilter&gt; registrationBean = new FilterRegistrationBean&lt;&gt;();\r\n            registrationBean.setFilter(new CharEncodingFilter());\r\n            registrationBean.addUrlPatterns(&quot;/*&quot;);\r\n            return registrationBean;\r\n        }\r\n    }","title":"add UTF-8 charset to to response headers in spring boot","body":"<p>You’re on the right track with creating a custom filter. However, the issue you’re facing is that the content type of the response is not set until after the controller method is executed. Therefore, when your filter is checking the content type, it’s still null.</p>\n<p>To solve this, you can create a wrapper for the <code>HttpServletResponse</code> and override the <code>setContentType</code> method. In this method, you can check if the content type being set is “<code>application/json</code>” and if so, add the charset to the response headers.</p>\n<p>Here’s an example of how you can do it:</p>\n<pre><code>public class CharEncodingFilter extends OncePerRequestFilter {\n\n    @Override\n    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain)\n            throws ServletException, IOException {\n        HttpServletResponseWrapper responseWrapper = new HttpServletResponseWrapper(response) {\n            @Override\n            public void setContentType(String type) {\n                if (MediaType.APPLICATION_JSON_VALUE.equals(type)) {\n                    super.setContentType(type + &quot;;charset=UTF-8&quot;);\n                } else {\n                    super.setContentType(type);\n                }\n            }\n        };\n        filterChain.doFilter(request, responseWrapper);\n    }\n}\n</code></pre>\n<p>In this code, <code>OncePerRequestFilter</code> is a type of filter provided by Spring that ensures the filter is only applied once per request. When the <code>setContentType</code> method is called on the responseWrapper, it checks if the type is “<code>application/json</code>”. If it is, it sets the content type with the UTF-8 charset. Otherwise, it sets the content type as usual.</p>\n<p>Remember to register this filter in your configuration:</p>\n<pre><code>@Configuration\npublic class WebConfig {\n\n    @Bean\n    public FilterRegistrationBean&lt;CharEncodingFilter&gt; charEncodingFilter() {\n        FilterRegistrationBean&lt;CharEncodingFilter&gt; registrationBean = new FilterRegistrationBean&lt;&gt;();\n        registrationBean.setFilter(new CharEncodingFilter());\n        registrationBean.addUrlPatterns(&quot;/*&quot;);\n        return registrationBean;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":21831314,"reputation":1,"user_id":18754015,"display_name":"Mohammad"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":68,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1700055734,"creation_date":1700055157,"question_id":77488106,"body_markdown":"I have a spring boot application which sends and receives data in various forms such as application/json , application/xml , application/x-www-form-urlencoded , ... .\r\n\r\nI want to write a custom filter to set UTF-8 charset to response headers. But I want to apply this only to the responses where the contentType header is set to &quot;application/json&quot; .\r\n\r\nHow Can I achieve this goal ?\r\n\r\nI tried to add the following to application.yml :\r\n\r\n```\r\nserver:\r\n  servlet:\r\n    encoding:\r\n      charset: UTF-8\r\n      force-response: true\r\n```\r\n\r\nBut I doubt that it will apply to all responses(not just &quot;application/json&quot; ones).\r\n\r\nAnother thing I have done so far is writing a filter :\r\n\r\n``` Java\r\npublic class CharEncodingFilter extends CharacterEncodingFilter {\r\n    @Override\r\n    protected void doFilterInternal(HttpServletRequest request,\r\n                                    HttpServletResponse response,\r\n                                    FilterChain filterChain) throws ServletException, IOException {\r\n\r\n        filterChain.doFilter(request , response);\r\n\r\n        if (response.getContentType().equals(MediaType.APPLICATION_JSON_VALUE)) {\r\n            String encoding = getEncoding();\r\n            if (encoding != null) {\r\n                if (isForceRequestEncoding() || request.getCharacterEncoding() == null) {\r\n                    request.setCharacterEncoding(encoding);\r\n                }\r\n                if (isForceResponseEncoding()) {\r\n                    response.setCharacterEncoding(encoding);\r\n                }\r\n            }\r\n            filterChain.doFilter(request, response);\r\n        }\r\n\r\n    }\r\n\r\n}\r\n```\r\n\r\nbut it fails to fulfill my request, because ```response.getContentType()``` is null and the if-statement will produce nullPointerException :( .\r\n\r\n\r\nI know somewhere in the application, the contentType is set for the responses by springboot, and I want to add UTF-8 encoding charset header right after that.\r\n\r\n\r\nP.S: I want a global solution. I know it&#39;s applicable to set the response type of each of the controller methods seperately, but it&#39;s time consuming to fix all controllers.\r\nThanks.","title":"add UTF-8 charset to to response headers in spring boot","body":"<p>I have a spring boot application which sends and receives data in various forms such as application/json , application/xml , application/x-www-form-urlencoded , ... .</p>\n<p>I want to write a custom filter to set UTF-8 charset to response headers. But I want to apply this only to the responses where the contentType header is set to &quot;application/json&quot; .</p>\n<p>How Can I achieve this goal ?</p>\n<p>I tried to add the following to application.yml :</p>\n<pre><code>server:\n  servlet:\n    encoding:\n      charset: UTF-8\n      force-response: true\n</code></pre>\n<p>But I doubt that it will apply to all responses(not just &quot;application/json&quot; ones).</p>\n<p>Another thing I have done so far is writing a filter :</p>\n<pre><code>public class CharEncodingFilter extends CharacterEncodingFilter {\n    @Override\n    protected void doFilterInternal(HttpServletRequest request,\n                                    HttpServletResponse response,\n                                    FilterChain filterChain) throws ServletException, IOException {\n\n        filterChain.doFilter(request , response);\n\n        if (response.getContentType().equals(MediaType.APPLICATION_JSON_VALUE)) {\n            String encoding = getEncoding();\n            if (encoding != null) {\n                if (isForceRequestEncoding() || request.getCharacterEncoding() == null) {\n                    request.setCharacterEncoding(encoding);\n                }\n                if (isForceResponseEncoding()) {\n                    response.setCharacterEncoding(encoding);\n                }\n            }\n            filterChain.doFilter(request, response);\n        }\n\n    }\n\n}\n</code></pre>\n<p>but it fails to fulfill my request, because <code>response.getContentType()</code> is null and the if-statement will produce nullPointerException :( .</p>\n<p>I know somewhere in the application, the contentType is set for the responses by springboot, and I want to add UTF-8 encoding charset header right after that.</p>\n<p>P.S: I want a global solution. I know it's applicable to set the response type of each of the controller methods seperately, but it's time consuming to fix all controllers.\nThanks.</p>\n"},{"tags":["java","maven-2","amazon-s3"],"comments":[{"owner":{"account_id":216689,"reputation":1500,"user_id":7171967,"display_name":"James Render"},"score":0,"creation_date":1557484731,"post_id":850570,"comment_id":98789986,"body_markdown":"There is also some information about S3 wagon providers [on this question](https://stackoverflow.com/questions/49737238/mvn-deploy-not-loading-the-s3-credentials/)","body":"There is also some information about S3 wagon providers <a href=\"https://stackoverflow.com/questions/49737238/mvn-deploy-not-loading-the-s3-credentials/\">on this question</a>"}],"answers":[{"tags":[],"owner":{"account_id":254516,"reputation":4626,"user_id":533981,"display_name":"elek"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1347202174,"creation_date":1291741673,"answer_id":4379444,"question_id":850570,"body_markdown":"There is a newer s3 provider by spring which works:\r\n&lt;!-- language: xml --&gt;\r\n\r\n    &lt;build&gt;\r\n        &lt;extensions&gt;\r\n            &lt;extension&gt;\r\n                &lt;groupId&gt;org.springframework.build.aws&lt;/groupId&gt;\r\n                &lt;artifactId&gt;org.springframework.build.aws.maven&lt;/artifactId&gt;\r\n                &lt;version&gt;3.0.0.RELEASE&lt;/version&gt;\r\n            &lt;/extension&gt;\r\n        &lt;/extensions&gt;\r\n    &lt;/build&gt;\r\n\r\nIf you would like to use it with maven 3, you need encrypt you passphrase in your settings.xml.\r\n\r\nStep-by-step instructions are [here][1].\r\n\r\n\r\n  [1]: https://github.com/SpringSource/aws-maven\r\n","title":"maven s3 wagon provider","body":"<p>There is a newer s3 provider by spring which works:\n</p>\n\n<pre><code>&lt;build&gt;\n    &lt;extensions&gt;\n        &lt;extension&gt;\n            &lt;groupId&gt;org.springframework.build.aws&lt;/groupId&gt;\n            &lt;artifactId&gt;org.springframework.build.aws.maven&lt;/artifactId&gt;\n            &lt;version&gt;3.0.0.RELEASE&lt;/version&gt;\n        &lt;/extension&gt;\n    &lt;/extensions&gt;\n&lt;/build&gt;\n</code></pre>\n\n<p>If you would like to use it with maven 3, you need encrypt you passphrase in your settings.xml.</p>\n\n<p>Step-by-step instructions are <a href=\"https://github.com/SpringSource/aws-maven\">here</a>.</p>\n"},{"tags":[],"owner":{"account_id":63162,"reputation":102381,"user_id":187141,"accept_rate":82,"display_name":"yegor256"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1319548890,"creation_date":1319548890,"answer_id":7889912,"question_id":850570,"body_markdown":"Another alternative:\r\n\r\n    &lt;build&gt;\r\n      &lt;extensions&gt;\r\n        &lt;extension&gt;\r\n          &lt;groupId&gt;org.cyclopsgroup&lt;/groupId&gt;\r\n          &lt;artifactId&gt;awss3-maven-wagon&lt;/artifactId&gt;\r\n          &lt;version&gt;0.1&lt;/version&gt;\r\n        &lt;/extension&gt;\r\n      &lt;/extensions&gt;\r\n      [...]\r\n    &lt;/build&gt;\r\n\r\nThen in `settings.xml`:\r\n\r\n    &lt;servers&gt;\r\n      &lt;server&gt;\r\n        &lt;id&gt;foo.s3&lt;/id&gt;\r\n        &lt;username&gt;AKIAJ.......OLVBA&lt;/username&gt;\r\n        &lt;password&gt;PsndORui..............KGZtDpeIYjsA/&lt;/password&gt;\r\n      &lt;/server&gt;\r\n    &lt;/servers&gt;\r\n\r\nAnd then in your `pom.xml`:\r\n\r\n    &lt;distributionManagement&gt;\r\n      &lt;repository&gt;\r\n        &lt;id&gt;foo&lt;/id&gt;\r\n        &lt;url&gt;s3://foo.s3/&lt;/url&gt;\r\n      &lt;/repository&gt;\r\n    &lt;/distributionManagement&gt;\r\n\r\nShould work.","title":"maven s3 wagon provider","body":"<p>Another alternative:</p>\n\n<pre><code>&lt;build&gt;\n  &lt;extensions&gt;\n    &lt;extension&gt;\n      &lt;groupId&gt;org.cyclopsgroup&lt;/groupId&gt;\n      &lt;artifactId&gt;awss3-maven-wagon&lt;/artifactId&gt;\n      &lt;version&gt;0.1&lt;/version&gt;\n    &lt;/extension&gt;\n  &lt;/extensions&gt;\n  [...]\n&lt;/build&gt;\n</code></pre>\n\n<p>Then in <code>settings.xml</code>:</p>\n\n<pre><code>&lt;servers&gt;\n  &lt;server&gt;\n    &lt;id&gt;foo.s3&lt;/id&gt;\n    &lt;username&gt;AKIAJ.......OLVBA&lt;/username&gt;\n    &lt;password&gt;PsndORui..............KGZtDpeIYjsA/&lt;/password&gt;\n  &lt;/server&gt;\n&lt;/servers&gt;\n</code></pre>\n\n<p>And then in your <code>pom.xml</code>:</p>\n\n<pre><code>&lt;distributionManagement&gt;\n  &lt;repository&gt;\n    &lt;id&gt;foo&lt;/id&gt;\n    &lt;url&gt;s3://foo.s3/&lt;/url&gt;\n  &lt;/repository&gt;\n&lt;/distributionManagement&gt;\n</code></pre>\n\n<p>Should work.</p>\n"},{"tags":[],"owner":{"account_id":242527,"reputation":334,"user_id":514096,"display_name":"Jeff Caddel"},"down_vote_count":1,"up_vote_count":13,"is_accepted":false,"score":12,"last_activity_date":1424390529,"creation_date":1325599351,"answer_id":8713383,"question_id":850570,"body_markdown":"[This wagon][1] is what we are using to deploy to S3.  It&#39;s similar to Spring&#39;s, but has multi-threaded upload support.\r\n\r\nThis lets the CI server push a lot of Maven content out to S3 very quickly.  (22k files and 400mb&#39;s of content in ~50 seconds)\r\n\r\nhttps://github.com/jcaddel/maven-s3-wagon\r\n\r\n    &lt;build&gt;\r\n     &lt;extensions&gt;\r\n       &lt;extension&gt;\r\n        &lt;groupId&gt;org.kuali.maven.wagons&lt;/groupId&gt;\r\n        &lt;artifactId&gt;maven-s3-wagon&lt;/artifactId&gt;\r\n        &lt;version&gt;1.2.1&lt;/version&gt;\r\n       &lt;/extension&gt;\r\n     &lt;/extensions&gt;\r\n    &lt;/build&gt;\r\n\r\n\r\n  [1]: https://github.com/jcaddel/maven-s3-wagon/","title":"maven s3 wagon provider","body":"<p><a href=\"https://github.com/jcaddel/maven-s3-wagon/\" rel=\"noreferrer\">This wagon</a> is what we are using to deploy to S3.  It's similar to Spring's, but has multi-threaded upload support.</p>\n\n<p>This lets the CI server push a lot of Maven content out to S3 very quickly.  (22k files and 400mb's of content in ~50 seconds)</p>\n\n<p><a href=\"https://github.com/jcaddel/maven-s3-wagon\" rel=\"noreferrer\">https://github.com/jcaddel/maven-s3-wagon</a></p>\n\n<pre><code>&lt;build&gt;\n &lt;extensions&gt;\n   &lt;extension&gt;\n    &lt;groupId&gt;org.kuali.maven.wagons&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-s3-wagon&lt;/artifactId&gt;\n    &lt;version&gt;1.2.1&lt;/version&gt;\n   &lt;/extension&gt;\n &lt;/extensions&gt;\n&lt;/build&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":297150,"reputation":1073,"user_id":602506,"accept_rate":40,"display_name":"Shannon"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1540328519,"creation_date":1540328519,"answer_id":52957793,"question_id":850570,"body_markdown":"Another option, which is a fork of the jcaddel plugin, was last updated March 2016 but works for me:\r\n\r\n    &lt;extension&gt;\r\n        &lt;groupId&gt;co.axiomzen.maven.wagons&lt;/groupId&gt;\r\n        &lt;artifactId&gt;maven-s3-wagon&lt;/artifactId&gt;\r\n        &lt;version&gt;1.2.6&lt;/version&gt;\r\n    &lt;/extension&gt;\r\n\r\nLooks like the main weaknesses are: old AWS SDK version, doesn&#39;t use the Default AWS Credentials Chain, so lacks support for things like credentials from ECS. Also, characters like &quot;@&quot; and &quot;:&quot; in the URL don&#39;t get encoded properly, though I&#39;m not sure if that&#39;s a problem with the wagon or with Maven.","title":"maven s3 wagon provider","body":"<p>Another option, which is a fork of the jcaddel plugin, was last updated March 2016 but works for me:</p>\n\n<pre><code>&lt;extension&gt;\n    &lt;groupId&gt;co.axiomzen.maven.wagons&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-s3-wagon&lt;/artifactId&gt;\n    &lt;version&gt;1.2.6&lt;/version&gt;\n&lt;/extension&gt;\n</code></pre>\n\n<p>Looks like the main weaknesses are: old AWS SDK version, doesn't use the Default AWS Credentials Chain, so lacks support for things like credentials from ECS. Also, characters like \"@\" and \":\" in the URL don't get encoded properly, though I'm not sure if that's a problem with the wagon or with Maven.</p>\n"},{"tags":[],"owner":{"account_id":792188,"reputation":1564,"user_id":800001,"display_name":"Markus T"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700055711,"creation_date":1700055711,"answer_id":77488191,"question_id":850570,"body_markdown":"I made one that supports AWS SSO (OIDC auth) that uses the second version of the SDK. Maybe it can be useful for you too. \r\n\r\nhttps://github.com/embriq-nordic/aws-oidc-s3-maven-wagon\r\n\r\n```\r\n&lt;extension&gt;\r\n    &lt;groupId&gt;io.github.embriq-nordic&lt;/groupId&gt;\r\n    &lt;artifactId&gt;aws-oidc-s3-maven-wagon&lt;/artifactId&gt;\r\n    &lt;version&gt;1.1.0&lt;/version&gt;\r\n&lt;/extension&gt;\r\n```\r\n\r\nSince it uses the second version of the SDK it uses the credentials provider chain used by that one. ","title":"maven s3 wagon provider","body":"<p>I made one that supports AWS SSO (OIDC auth) that uses the second version of the SDK. Maybe it can be useful for you too.</p>\n<p><a href=\"https://github.com/embriq-nordic/aws-oidc-s3-maven-wagon\" rel=\"nofollow noreferrer\">https://github.com/embriq-nordic/aws-oidc-s3-maven-wagon</a></p>\n<pre><code>&lt;extension&gt;\n    &lt;groupId&gt;io.github.embriq-nordic&lt;/groupId&gt;\n    &lt;artifactId&gt;aws-oidc-s3-maven-wagon&lt;/artifactId&gt;\n    &lt;version&gt;1.1.0&lt;/version&gt;\n&lt;/extension&gt;\n</code></pre>\n<p>Since it uses the second version of the SDK it uses the credentials provider chain used by that one.</p>\n"}],"owner":{"account_id":32251,"reputation":114942,"user_id":89266,"accept_rate":91,"display_name":"dfa"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":20133,"favorite_count":0,"down_vote_count":0,"up_vote_count":17,"answer_count":5,"score":17,"last_activity_date":1700055711,"creation_date":1242085802,"question_id":850570,"body_markdown":"How to deploy with wagon s3 provider?\r\n\r\nI&#39;ve found several plugins, most of them are incomplete, some of them are not maintaned. There is also a sandbox plugin from official maven SVN repository but I&#39;m figuring how to use it. \r\n\r\nAny hint?","title":"maven s3 wagon provider","body":"<p>How to deploy with wagon s3 provider?</p>\n\n<p>I've found several plugins, most of them are incomplete, some of them are not maintaned. There is also a sandbox plugin from official maven SVN repository but I'm figuring how to use it. </p>\n\n<p>Any hint?</p>\n"},{"tags":["java","json","jackson","deserialization","rest-assured"],"answers":[{"tags":[],"owner":{"account_id":4475914,"reputation":14390,"user_id":3641067,"accept_rate":73,"display_name":"bur&#230;quete"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1487938067,"creation_date":1487933746,"answer_id":42436872,"question_id":42436666,"body_markdown":"Why not use `ObjectMapper` from Jackson? You can add `DeserializationFeature` to it unlike `ObjectCodec`. Mapper is actually extending Codec, but with more features that you need in this case.\r\n\r\n    ObjectMapper mapper = new ObjectMapper();\r\n    mapper.enable(DeserializationFeature.USE_BIG_DECIMAL_FOR_FLOATS);\r\n    \r\n    JsonNode node = //node where the value is defined as Double\r\n    \r\n    Double value = null;\r\n    try {\r\n        value = mapper.treeToValue(node, Double.class);\r\n    }\r\n    catch (IOException e) {\r\n        e.printStackTrace();\r\n    }\r\n    \r\n    System.out.println(value);\r\n\r\nUse the above logic in your `node.isDouble()` case","title":"Jackson deserialize Double","body":"<p>Why not use <code>ObjectMapper</code> from Jackson? You can add <code>DeserializationFeature</code> to it unlike <code>ObjectCodec</code>. Mapper is actually extending Codec, but with more features that you need in this case.</p>\n\n<pre><code>ObjectMapper mapper = new ObjectMapper();\nmapper.enable(DeserializationFeature.USE_BIG_DECIMAL_FOR_FLOATS);\n\nJsonNode node = //node where the value is defined as Double\n\nDouble value = null;\ntry {\n    value = mapper.treeToValue(node, Double.class);\n}\ncatch (IOException e) {\n    e.printStackTrace();\n}\n\nSystem.out.println(value);\n</code></pre>\n\n<p>Use the above logic in your <code>node.isDouble()</code> case</p>\n"},{"tags":[],"owner":{"account_id":29909316,"reputation":1,"user_id":22921146,"display_name":"Denys"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700055007,"creation_date":1700054879,"answer_id":77488084,"question_id":42436666,"body_markdown":"I managed to deserialize the doubles after adding **@AllArgsConstructor**\r\n\r\n\r\n    @AllArgsConstructor\r\n    public class Data {\r\n        private final Double first;\r\n        private final Double second;\r\n        private final Double third;\r\n    }","title":"Jackson deserialize Double","body":"<p>I managed to deserialize the doubles after adding <strong>@AllArgsConstructor</strong></p>\n<pre><code>@AllArgsConstructor\npublic class Data {\n    private final Double first;\n    private final Double second;\n    private final Double third;\n}\n</code></pre>\n"}],"owner":{"account_id":10324546,"reputation":128,"user_id":7616393,"display_name":"baadnews"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7567,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":42436872,"answer_count":2,"score":2,"last_activity_date":1700055007,"creation_date":1487933143,"question_id":42436666,"body_markdown":"I have a problem with deserialization of the JSON using Jackson in my rest-assured tests. \r\nIn my JSON I have a key &quot;value&quot; that can be an array of Strings or object like Boolean. \r\n\r\n    {\r\n     &quot;value&quot;: [&quot;value1&quot;, &quot;value2&quot;]\r\n    }\r\nor \r\n\r\n    {\r\n    &quot;value&quot;: 2272204.2426\r\n    }\r\n\r\nSo I wrote custom deserializer for this field: \r\n\r\n    public Object deserialize(JsonParser jp, DeserializationContext ctxt) throws IOException {\r\n    \t\tObjectCodec oc = jp.getCodec();\r\n    \t\tJsonNode node = oc.readTree(jp);\r\n    \t\tif (node.isArray()) {\r\n    \t\t\tList&lt;String&gt; list = new ArrayList&lt;&gt;();\r\n    \t\t\tfor (JsonNode elementNode : node) {\r\n    \t\t\t\tlist.add(oc.treeToValue(elementNode, String.class));\r\n    \t\t\t}\r\n    \t\t\treturn list;\r\n    \t\t} else {\r\n    \t\t\tif(node.isDouble()) {\r\n    \t\t\t\treturn oc.treeToValue(node, Double.class);\r\n    \t\t\t}\r\n    \t\t\telse if(node.isBoolean()){\r\n    \t\t\t\treturn oc.treeToValue(node, Boolean.class);\r\n    \t\t\t}\r\n    \t\t\telse {\r\n    \t\t\t\treturn oc.treeToValue(node, String.class);\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}\r\n\r\nIn the end I&#39;ve noticed that numeric value like 2272204.2426 is deserialized to 2272204.2 \r\nI tried to desierialize it using Gson and it works well. Do you have any idea why using Jackson there is lack of decimal part? \r\nI&#39;ve tried to debug the code and I&#39;ve noticed that on this step JsonNode node = oc.readTree(jp); the value is 2272204.2 ","title":"Jackson deserialize Double","body":"<p>I have a problem with deserialization of the JSON using Jackson in my rest-assured tests. \nIn my JSON I have a key \"value\" that can be an array of Strings or object like Boolean. </p>\n\n<pre><code>{\n \"value\": [\"value1\", \"value2\"]\n}\n</code></pre>\n\n<p>or </p>\n\n<pre><code>{\n\"value\": 2272204.2426\n}\n</code></pre>\n\n<p>So I wrote custom deserializer for this field: </p>\n\n<pre><code>public Object deserialize(JsonParser jp, DeserializationContext ctxt) throws IOException {\n        ObjectCodec oc = jp.getCodec();\n        JsonNode node = oc.readTree(jp);\n        if (node.isArray()) {\n            List&lt;String&gt; list = new ArrayList&lt;&gt;();\n            for (JsonNode elementNode : node) {\n                list.add(oc.treeToValue(elementNode, String.class));\n            }\n            return list;\n        } else {\n            if(node.isDouble()) {\n                return oc.treeToValue(node, Double.class);\n            }\n            else if(node.isBoolean()){\n                return oc.treeToValue(node, Boolean.class);\n            }\n            else {\n                return oc.treeToValue(node, String.class);\n            }\n        }\n    }\n</code></pre>\n\n<p>In the end I've noticed that numeric value like 2272204.2426 is deserialized to 2272204.2 \nI tried to desierialize it using Gson and it works well. Do you have any idea why using Jackson there is lack of decimal part? \nI've tried to debug the code and I've noticed that on this step JsonNode node = oc.readTree(jp); the value is 2272204.2 </p>\n"},{"tags":["java","android","node.js","onesignal"],"answers":[{"tags":[],"owner":{"account_id":22773148,"reputation":6695,"user_id":16930239,"display_name":"user16930239"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700054983,"creation_date":1700054983,"answer_id":77488091,"question_id":77487619,"body_markdown":"&gt;The OneSignal ID is UUID generated by OneSignal to represent a user. The OneSignal ID will always be associated with a Subscription ID and/or alias, otherwise it will be deleted.\r\n\r\n&gt;A subscription refers to the ways a user can receive messages sent from OneSignal, like push notifications, SMS, and email. These messaging channels are each assigned a Subscription ID to uniquely identify that specific channel. In-app messages do not have a Subscription ID.\r\n\r\nYou can [Create alias (by subscription)][1] then use the Alias to send message.\r\n\r\n[create-notification][2]\r\n&gt;Target specific users by aliases assigned via API. An alias can be an external_id, onesignal_id, or a custom alias.\r\n\r\n\r\n  [1]: https://documentation.onesignal.com/reference/create-alias-by-subscription\r\n  [2]: https://documentation.onesignal.com/reference/create-notification","title":"Does onesignal subscription id work with a player id API","body":"<blockquote>\n<p>The OneSignal ID is UUID generated by OneSignal to represent a user. The OneSignal ID will always be associated with a Subscription ID and/or alias, otherwise it will be deleted.</p>\n</blockquote>\n<blockquote>\n<p>A subscription refers to the ways a user can receive messages sent from OneSignal, like push notifications, SMS, and email. These messaging channels are each assigned a Subscription ID to uniquely identify that specific channel. In-app messages do not have a Subscription ID.</p>\n</blockquote>\n<p>You can <a href=\"https://documentation.onesignal.com/reference/create-alias-by-subscription\" rel=\"nofollow noreferrer\">Create alias (by subscription)</a> then use the Alias to send message.</p>\n<p><a href=\"https://documentation.onesignal.com/reference/create-notification\" rel=\"nofollow noreferrer\">create-notification</a></p>\n<blockquote>\n<p>Target specific users by aliases assigned via API. An alias can be an external_id, onesignal_id, or a custom alias.</p>\n</blockquote>\n"}],"owner":{"account_id":17256253,"reputation":129,"user_id":12495265,"display_name":"jamesmungai"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1700054983,"creation_date":1700050493,"question_id":77487619,"body_markdown":"In my Java android SDK I&#39;m getting the subscription ID as follows and then sending it to my backend where im storing these subscription IDs in my DB but it doesnt seem to work when I try to send a notification using \r\n```\r\nIUserManager user = OneSignal.getUser();\r\nString subscriptionId = user.getPushSubscription().getId();\r\n```\r\nThis is my node js api code snippet\r\n```\r\nnotification.app_id = config.ONESIG_APP_ID;\r\n    notification.include_player_ids = subscriptionIds;\r\n    notification.contents = {\r\n      en: message,\r\n    };\r\n    client\r\n      .createNotification(notification)\r\n      .then((result) =&gt; {\r\n        resolve(result);\r\n      })\r\n      .catch((error) =&gt; {\r\n        resolve({ status: &#39;Failure&#39; });\r\n      });\r\n```","title":"Does onesignal subscription id work with a player id API","body":"<p>In my Java android SDK I'm getting the subscription ID as follows and then sending it to my backend where im storing these subscription IDs in my DB but it doesnt seem to work when I try to send a notification using</p>\n<pre><code>IUserManager user = OneSignal.getUser();\nString subscriptionId = user.getPushSubscription().getId();\n</code></pre>\n<p>This is my node js api code snippet</p>\n<pre><code>notification.app_id = config.ONESIG_APP_ID;\n    notification.include_player_ids = subscriptionIds;\n    notification.contents = {\n      en: message,\n    };\n    client\n      .createNotification(notification)\n      .then((result) =&gt; {\n        resolve(result);\n      })\n      .catch((error) =&gt; {\n        resolve({ status: 'Failure' });\n      });\n</code></pre>\n"},{"tags":["java","spring","spring-boot","java-8","spring-batch"],"comments":[{"owner":{"account_id":6482932,"reputation":29552,"user_id":5019386,"display_name":"Mahmoud Ben Hassine"},"score":0,"creation_date":1700125577,"post_id":77487955,"comment_id":136616954,"body_markdown":"`i to query from this 2 databases from different tables`: will queries produce the same item type, `CustomerCredit`? How should the reading happen, ie read from the first table, then the second table in sequence? Please provide more details. There is an open feature request for a composite reader (with an experimental implementation), see https://github.com/spring-projects/spring-batch/issues/757, but I am not sure it is what you are looking for.","body":"<code>i to query from this 2 databases from different tables</code>: will queries produce the same item type, <code>CustomerCredit</code>? How should the reading happen, ie read from the first table, then the second table in sequence? Please provide more details. There is an open feature request for a composite reader (with an experimental implementation), see <a href=\"https://github.com/spring-projects/spring-batch/issues/757\" rel=\"nofollow noreferrer\">github.com/spring-projects/spring-batch/issues/757</a>, but I am not sure it is what you are looking for."}],"owner":{"account_id":22894340,"reputation":17,"user_id":17034062,"display_name":"tarun singh"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"answer_count":0,"score":-1,"last_activity_date":1700054980,"creation_date":1700053697,"question_id":77487955,"body_markdown":"I&#39;m new to spring batch, I have a requirement like i have 2 different database/servers and i to query from this 2 databases from different tables for this i need to create a simple composite item reader which can fetch data from this 2 different tables of different databases. It would be helpful if someone provide a sample example in spring boot.\r\n        \r\nEx:\r\n```\r\n    @Bean\r\npublic JdbcPagingItemReader itemReader(DataSource dataSource, PagingQueryProvider queryProvider) {\r\n\tMap&lt;String, Object&gt; parameterValues = new HashMap&lt;&gt;();\r\n\tparameterValues.put(&quot;status&quot;, &quot;NEW&quot;);\r\n\r\n\treturn new JdbcPagingItemReaderBuilder&lt;CustomerCredit&gt;()\r\n           \t\t\t\t.name(&quot;creditReader&quot;)\r\n           \t\t\t\t.dataSource(dataSource)\r\n           \t\t\t\t.queryProvider(queryProvider)\r\n           \t\t\t\t.parameterValues(parameterValues)\r\n           \t\t\t\t.rowMapper(customerCreditMapper())\r\n           \t\t\t\t.pageSize(1000)\r\n           \t\t\t\t.build();\r\n}\r\n```\r\n    \r\nplease skip above example., it is not allowing to post without code.\r\nI googled but didn&#39;t get correct answers.","title":"Composite item reader in spring batch","body":"<p>I'm new to spring batch, I have a requirement like i have 2 different database/servers and i to query from this 2 databases from different tables for this i need to create a simple composite item reader which can fetch data from this 2 different tables of different databases. It would be helpful if someone provide a sample example in spring boot.</p>\n<p>Ex:</p>\n<pre><code>    @Bean\npublic JdbcPagingItemReader itemReader(DataSource dataSource, PagingQueryProvider queryProvider) {\n    Map&lt;String, Object&gt; parameterValues = new HashMap&lt;&gt;();\n    parameterValues.put(&quot;status&quot;, &quot;NEW&quot;);\n\n    return new JdbcPagingItemReaderBuilder&lt;CustomerCredit&gt;()\n                        .name(&quot;creditReader&quot;)\n                        .dataSource(dataSource)\n                        .queryProvider(queryProvider)\n                        .parameterValues(parameterValues)\n                        .rowMapper(customerCreditMapper())\n                        .pageSize(1000)\n                        .build();\n}\n</code></pre>\n<p>please skip above example., it is not allowing to post without code.\nI googled but didn't get correct answers.</p>\n"},{"tags":["java","maven","github-actions","gnupg","maven-gpg-plugin"],"comments":[{"owner":{"account_id":10402418,"reputation":12349,"user_id":7670262,"display_name":"Azeem"},"score":1,"creation_date":1700115943,"post_id":77488046,"comment_id":136615621,"body_markdown":"See https://gist.github.com/sualeh/ae78dc16123899d7942bc38baba5203c.","body":"See <a href=\"https://gist.github.com/sualeh/ae78dc16123899d7942bc38baba5203c\" rel=\"nofollow noreferrer\">gist.github.com/sualeh/ae78dc16123899d7942bc38baba5203c</a>."},{"owner":{"account_id":12324147,"reputation":121,"user_id":10013088,"display_name":"Hugo Bois"},"score":0,"creation_date":1700219211,"post_id":77488046,"comment_id":136630248,"body_markdown":"Thanks! I&#39;ve stumbled on upon that way of doing earlier but I&#39;d rather prefer to use the provided built-in parameter of setup-java action for the sake of consistency. That will be my last option for sure if there is no other way around","body":"Thanks! I&#39;ve stumbled on upon that way of doing earlier but I&#39;d rather prefer to use the provided built-in parameter of setup-java action for the sake of consistency. That will be my last option for sure if there is no other way around"},{"owner":{"account_id":10402418,"reputation":12349,"user_id":7670262,"display_name":"Azeem"},"score":0,"creation_date":1700220122,"post_id":77488046,"comment_id":136630397,"body_markdown":"No problem. Yes, that seems to be right way to automate this. You have already an active issue (https://github.com/actions/setup-java/issues/554) on the repo. Hopefully, you&#39;ll get the way forward with `actions/setup-java`.","body":"No problem. Yes, that seems to be right way to automate this. You have already an active issue (<a href=\"https://github.com/actions/setup-java/issues/554\" rel=\"nofollow noreferrer\">github.com/actions/setup-java/issues/554</a>) on the repo. Hopefully, you&#39;ll get the way forward with <code>actions&#47;setup-java</code>."},{"owner":{"account_id":12324147,"reputation":121,"user_id":10013088,"display_name":"Hugo Bois"},"score":0,"creation_date":1700220572,"post_id":77488046,"comment_id":136630469,"body_markdown":"Yes! I will make sure to update here as soon as I have hints about what&#39;s wrong ;)","body":"Yes! I will make sure to update here as soon as I have hints about what&#39;s wrong ;)"}],"owner":{"account_id":12324147,"reputation":121,"user_id":10013088,"display_name":"Hugo Bois"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1700054513,"creation_date":1700054513,"question_id":77488046,"body_markdown":"**Objective** - I am currently trying to automate the deployment of a Java package to Maven Central through GitHub Actions. As publishing requires to sign artifacts I added **maven-gpg-plugin** to `pom.xml`. So far, so good.\r\n\r\n**Situation** - When the plugin got loaded, it fails on execution and then prompting this:\r\n\r\n    gpg: Sorry, no terminal at all requested - can&#39;t get input\r\n\r\nA solution suggested by [this another post][1] on the same topic is to remove the `--no-tty` option set by default in the **gpg.conf** file.\r\n\r\n**Problem** - Here is the thing. It doesn&#39;t appear we can alter this file using the actions/setup-java@v3 from GitHub Actions which yet exposes the possibility to provide GPG private key and passphrase.\r\n\r\n[Here][2] is the GitHub actions deployment workflow file and [here][3] the associated pom.xml. Am I missing something?\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/40393581/10013088\r\n  [2]: https://github.com/Lycoon/clash-api/blob/dev/.github/workflows/deploy.yml\r\n  [3]: https://github.com/Lycoon/clash-api/blob/dev/pom.xml","title":"GitHub Actions - gpg: Sorry, no terminal at all requested - can&#39;t get input","body":"<p><strong>Objective</strong> - I am currently trying to automate the deployment of a Java package to Maven Central through GitHub Actions. As publishing requires to sign artifacts I added <strong>maven-gpg-plugin</strong> to <code>pom.xml</code>. So far, so good.</p>\n<p><strong>Situation</strong> - When the plugin got loaded, it fails on execution and then prompting this:</p>\n<pre><code>gpg: Sorry, no terminal at all requested - can't get input\n</code></pre>\n<p>A solution suggested by <a href=\"https://stackoverflow.com/a/40393581/10013088\">this another post</a> on the same topic is to remove the <code>--no-tty</code> option set by default in the <strong>gpg.conf</strong> file.</p>\n<p><strong>Problem</strong> - Here is the thing. It doesn't appear we can alter this file using the actions/setup-java@v3 from GitHub Actions which yet exposes the possibility to provide GPG private key and passphrase.</p>\n<p><a href=\"https://github.com/Lycoon/clash-api/blob/dev/.github/workflows/deploy.yml\" rel=\"nofollow noreferrer\">Here</a> is the GitHub actions deployment workflow file and <a href=\"https://github.com/Lycoon/clash-api/blob/dev/pom.xml\" rel=\"nofollow noreferrer\">here</a> the associated pom.xml. Am I missing something?</p>\n"},{"tags":["java","oracle","jdbc","ojdbc"],"answers":[{"tags":[],"owner":{"account_id":247217,"reputation":213455,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1700054131,"creation_date":1645806222,"answer_id":71268782,"question_id":71268781,"body_markdown":"In my opinion, it used to be a bug in ojdbc. It no longer appears in version `23.3.0.23.09`. Workarounds for older ojdbc driver versions include:\r\n\r\n### Cast the bind variable\r\n\r\n```java\r\ntry (PreparedStatement s = connection.prepareStatement(\r\n    &quot;&quot;&quot;\r\n    select\r\n      json_arrayagg(\r\n        json_array(\r\n          (select json_arrayagg(json_array(?) format json) from dual) format json,\r\n          cast(? as number) -- cast here\r\n        )\r\n        format json\r\n      )\r\n    from dual\r\n    &quot;&quot;&quot;\r\n)) {\r\n    s.setInt(1, 1);\r\n    s.setInt(2, 2);\r\n\r\n    try (ResultSet rs = s.executeQuery()) {\r\n        while (rs.next())\r\n            System.out.println(rs.getString(1));\r\n    }\r\n}\r\n```\r\n\r\n### Remove the `FORMAT JSON` directive just before the bind parameter marker\r\n\r\n```java\r\ntry (PreparedStatement s = connection.prepareStatement(\r\n    &quot;&quot;&quot;\r\n    select\r\n      json_arrayagg(\r\n        json_array(\r\n          (select json_arrayagg(json_array(?) format json) from dual) /* no format json here */,\r\n          ?\r\n        )\r\n        format json\r\n      )\r\n    from dual\r\n    &quot;&quot;&quot;\r\n)) {\r\n    s.setInt(1, 1);\r\n    s.setInt(2, 2);\r\n\r\n    try (ResultSet rs = s.executeQuery()) {\r\n        while (rs.next())\r\n            System.out.println(rs.getString(1));\r\n    }\r\n}\r\n```\r\n\r\n### Using a dummy expression around the bind variable\r\n\r\n```java\r\ntry (PreparedStatement s = connection.prepareStatement(\r\n    &quot;&quot;&quot;\r\n    select\r\n      json_arrayagg(\r\n        json_array(\r\n          (select json_arrayagg(json_array(?) format json) from dual) format json,\r\n          nvl(null, ?) -- Dummy expression here\r\n        )\r\n        format json\r\n      )\r\n    from dual\r\n    &quot;&quot;&quot;\r\n)) {\r\n    s.setInt(1, 1);\r\n    s.setInt(2, 2);\r\n\r\n    try (ResultSet rs = s.executeQuery()) {\r\n        while (rs.next())\r\n            System.out.println(rs.getString(1));\r\n    }\r\n}\r\n```\r\n\r\n### Interleave a `null` value, and remove it again with `absent on null`\r\n\r\n```java\r\ntry (PreparedStatement s = connection.prepareStatement(\r\n    &quot;&quot;&quot;\r\n    select\r\n      json_arrayagg(\r\n        json_array(\r\n          (select json_arrayagg(json_array(?) format json) from dual) format json,\r\n          null, -- This is ignored\r\n          ?\r\n          absent on null\r\n        )\r\n        format json\r\n      )\r\n    from dual\r\n    &quot;&quot;&quot;\r\n)) {\r\n    s.setInt(1, 1);\r\n    s.setInt(2, 2);\r\n\r\n    try (ResultSet rs = s.executeQuery()) {\r\n        while (rs.next())\r\n            System.out.println(rs.getString(1));\r\n    }\r\n}\r\n```","title":"Why can&#39;t a bind variable be used from ojdbc with Oracle JSON_ARRAY() in the presence of FORMAT JSON","body":"<p>In my opinion, it used to be a bug in ojdbc. It no longer appears in version <code>23.3.0.23.09</code>. Workarounds for older ojdbc driver versions include:</p>\n<h3>Cast the bind variable</h3>\n<pre class=\"lang-java prettyprint-override\"><code>try (PreparedStatement s = connection.prepareStatement(\n    &quot;&quot;&quot;\n    select\n      json_arrayagg(\n        json_array(\n          (select json_arrayagg(json_array(?) format json) from dual) format json,\n          cast(? as number) -- cast here\n        )\n        format json\n      )\n    from dual\n    &quot;&quot;&quot;\n)) {\n    s.setInt(1, 1);\n    s.setInt(2, 2);\n\n    try (ResultSet rs = s.executeQuery()) {\n        while (rs.next())\n            System.out.println(rs.getString(1));\n    }\n}\n</code></pre>\n<h3>Remove the <code>FORMAT JSON</code> directive just before the bind parameter marker</h3>\n<pre class=\"lang-java prettyprint-override\"><code>try (PreparedStatement s = connection.prepareStatement(\n    &quot;&quot;&quot;\n    select\n      json_arrayagg(\n        json_array(\n          (select json_arrayagg(json_array(?) format json) from dual) /* no format json here */,\n          ?\n        )\n        format json\n      )\n    from dual\n    &quot;&quot;&quot;\n)) {\n    s.setInt(1, 1);\n    s.setInt(2, 2);\n\n    try (ResultSet rs = s.executeQuery()) {\n        while (rs.next())\n            System.out.println(rs.getString(1));\n    }\n}\n</code></pre>\n<h3>Using a dummy expression around the bind variable</h3>\n<pre class=\"lang-java prettyprint-override\"><code>try (PreparedStatement s = connection.prepareStatement(\n    &quot;&quot;&quot;\n    select\n      json_arrayagg(\n        json_array(\n          (select json_arrayagg(json_array(?) format json) from dual) format json,\n          nvl(null, ?) -- Dummy expression here\n        )\n        format json\n      )\n    from dual\n    &quot;&quot;&quot;\n)) {\n    s.setInt(1, 1);\n    s.setInt(2, 2);\n\n    try (ResultSet rs = s.executeQuery()) {\n        while (rs.next())\n            System.out.println(rs.getString(1));\n    }\n}\n</code></pre>\n<h3>Interleave a <code>null</code> value, and remove it again with <code>absent on null</code></h3>\n<pre class=\"lang-java prettyprint-override\"><code>try (PreparedStatement s = connection.prepareStatement(\n    &quot;&quot;&quot;\n    select\n      json_arrayagg(\n        json_array(\n          (select json_arrayagg(json_array(?) format json) from dual) format json,\n          null, -- This is ignored\n          ?\n          absent on null\n        )\n        format json\n      )\n    from dual\n    &quot;&quot;&quot;\n)) {\n    s.setInt(1, 1);\n    s.setInt(2, 2);\n\n    try (ResultSet rs = s.executeQuery()) {\n        while (rs.next())\n            System.out.println(rs.getString(1));\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":247217,"reputation":213455,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":366,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":71268782,"answer_count":1,"score":2,"last_activity_date":1700054131,"creation_date":1645806222,"question_id":71268781,"body_markdown":"In Oracle, the following query:\r\n\r\n```sql\r\nselect\r\n  json_arrayagg(\r\n    json_array(\r\n      (select json_arrayagg(json_array(1) format json) from dual) format json,\r\n      2\r\n    )\r\n    format json\r\n  )\r\nfrom dual\r\n```\r\n\r\nProduces the following JSON document:\r\n\r\n```none\r\n[[[[1]],2]]\r\n```\r\n\r\nWhen I try to run this query with bind variables from JDBC like this:\r\n\r\n```java\r\ntry (PreparedStatement s = connection.prepareStatement(\r\n    &quot;&quot;&quot;\r\n    select\r\n      json_arrayagg(\r\n        json_array(\r\n          (select json_arrayagg(json_array(?) format json) from dual) format json,\r\n          ?\r\n        )\r\n        format json\r\n      )\r\n    from dual\r\n    &quot;&quot;&quot;\r\n)) {\r\n    s.setInt(1, 1);\r\n    s.setInt(2, 2); // This fails\r\n\r\n    try (ResultSet rs = s.executeQuery()) {\r\n        while (rs.next())\r\n            System.out.println(rs.getString(1));\r\n    }\r\n}\r\n```\r\n\r\nThen I&#39;m getting:\r\n\r\n```none\r\nException in thread &quot;main&quot; java.sql.SQLException: Invalid column index\r\n\tat oracle.jdbc.driver.OraclePreparedStatement.setIntInternal(OraclePreparedStatement.java:4956)\r\n\tat oracle.jdbc.driver.OraclePreparedStatement.setInt(OraclePreparedStatement.java:4947)\r\n\tat oracle.jdbc.driver.OraclePreparedStatementWrapper.setInt(OraclePreparedStatementWrapper.java:202)\r\n\tat org.jooq.testscripts.JDBC.main(JDBC.java:50)\r\n```\r\n\r\nI&#39;m using these versions:\r\n\r\n- Database: Oracle Database 21c Express Edition Release 21.0.0.0.0 - Production\r\n- ojdbc: com.oracle.database.jdbc:ojdbc11:21.5.0.0\r\n\r\nIs this a bug? Can it be worked around?","title":"Why can&#39;t a bind variable be used from ojdbc with Oracle JSON_ARRAY() in the presence of FORMAT JSON","body":"<p>In Oracle, the following query:</p>\n<pre class=\"lang-sql prettyprint-override\"><code>select\n  json_arrayagg(\n    json_array(\n      (select json_arrayagg(json_array(1) format json) from dual) format json,\n      2\n    )\n    format json\n  )\nfrom dual\n</code></pre>\n<p>Produces the following JSON document:</p>\n<pre class=\"lang-none prettyprint-override\"><code>[[[[1]],2]]\n</code></pre>\n<p>When I try to run this query with bind variables from JDBC like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>try (PreparedStatement s = connection.prepareStatement(\n    &quot;&quot;&quot;\n    select\n      json_arrayagg(\n        json_array(\n          (select json_arrayagg(json_array(?) format json) from dual) format json,\n          ?\n        )\n        format json\n      )\n    from dual\n    &quot;&quot;&quot;\n)) {\n    s.setInt(1, 1);\n    s.setInt(2, 2); // This fails\n\n    try (ResultSet rs = s.executeQuery()) {\n        while (rs.next())\n            System.out.println(rs.getString(1));\n    }\n}\n</code></pre>\n<p>Then I'm getting:</p>\n<pre class=\"lang-none prettyprint-override\"><code>Exception in thread &quot;main&quot; java.sql.SQLException: Invalid column index\n    at oracle.jdbc.driver.OraclePreparedStatement.setIntInternal(OraclePreparedStatement.java:4956)\n    at oracle.jdbc.driver.OraclePreparedStatement.setInt(OraclePreparedStatement.java:4947)\n    at oracle.jdbc.driver.OraclePreparedStatementWrapper.setInt(OraclePreparedStatementWrapper.java:202)\n    at org.jooq.testscripts.JDBC.main(JDBC.java:50)\n</code></pre>\n<p>I'm using these versions:</p>\n<ul>\n<li>Database: Oracle Database 21c Express Edition Release 21.0.0.0.0 - Production</li>\n<li>ojdbc: com.oracle.database.jdbc:ojdbc11:21.5.0.0</li>\n</ul>\n<p>Is this a bug? Can it be worked around?</p>\n"},{"tags":["java","unit-testing","dependency-injection","mockito","guice"],"answers":[{"tags":[],"owner":{"account_id":39208,"reputation":251210,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1700046387,"creation_date":1700045496,"answer_id":77487106,"question_id":77486947,"body_markdown":"`@RunWith(MockitoJUnitRunner.class)` should already initialize all `@Mock`-and `@InjectMocks`-annotated fields.\r\n\r\n`MockitoAnnotations.openMocks` is only required if you do not use the annotation and must manually initialize the fields.\r\n\r\n```\r\n@RunWith(MockitoJUnitRunner.class)\r\npublic class MyTest {\r\n    @Mock ClassA mockClassA;\r\n    @Mock ClassB mockClassB;\r\n    @InjectMocks ClassToTest classToTest;\r\n    @Before public void setup() {\r\n        when(mockClassB.someCall()).thenReturn(whatever);\r\n    }\r\n\r\n    @Test public void test() {\r\n        // use this.classToTest\r\n    }\r\n}\r\n```\r\n\r\nIt might be possible to do it without the `@Mock` annotations by assigning the fields directly:\r\n\r\n```\r\n@RunWith(MockitoJUnitRunner.class)\r\npublic class MyTest {\r\n    ClassA mockClassA = mock(ClassA.class);\r\n    ClassB mockClassB = mock(ClassB.class);\r\n    @InjectMocks ClassToTest classToTest;\r\n    @Before public void setup() {\r\n        when(mockClassB.someCall()).thenReturn(whatever);\r\n    }\r\n\r\n    @Test public void test() {\r\n        // use this.classToTest\r\n    }\r\n}\r\n```\r\n\r\nor\r\n\r\n```\r\npublic class MyTest {\r\n    ClassA mockClassA = mock(ClassA.class);\r\n    ClassB mockClassB = mock(ClassB.class);\r\n    @InjectMocks ClassToTest classToTest;\r\n    AutoCloseable closeable;\r\n    @Before public void setup() {\r\n        closeable = MockitoAnnotations.openMocks(this);\r\n        when(mockClassB.someCall()).thenReturn(whatever);\r\n    }\r\n\r\n    @Test public void test() {\r\n        // use this.classToTest\r\n    }\r\n}\r\n```\r\n\r\nAlternatively, create all mock objects manually and use reflection to assign the fields of your class under test.\r\n\r\nOf course it always pays off to design your classes to be testable, which means that their dependencies are passed via the constructor.\r\n\r\nThis is similar to https://stackoverflow.com/questions/74027324/why-are-my-mocked-methods-not-called-when-executing-a-unit-test (distinct references to two distinct mock objects, with your test referencing one and your class referencing a different one).","title":"Mockito replaced already mocked objects with new ones after calling openMocks for InjectMocks annotated object","body":"<p><code>@RunWith(MockitoJUnitRunner.class)</code> should already initialize all <code>@Mock</code>-and <code>@InjectMocks</code>-annotated fields.</p>\n<p><code>MockitoAnnotations.openMocks</code> is only required if you do not use the annotation and must manually initialize the fields.</p>\n<pre><code>@RunWith(MockitoJUnitRunner.class)\npublic class MyTest {\n    @Mock ClassA mockClassA;\n    @Mock ClassB mockClassB;\n    @InjectMocks ClassToTest classToTest;\n    @Before public void setup() {\n        when(mockClassB.someCall()).thenReturn(whatever);\n    }\n\n    @Test public void test() {\n        // use this.classToTest\n    }\n}\n</code></pre>\n<p>It might be possible to do it without the <code>@Mock</code> annotations by assigning the fields directly:</p>\n<pre><code>@RunWith(MockitoJUnitRunner.class)\npublic class MyTest {\n    ClassA mockClassA = mock(ClassA.class);\n    ClassB mockClassB = mock(ClassB.class);\n    @InjectMocks ClassToTest classToTest;\n    @Before public void setup() {\n        when(mockClassB.someCall()).thenReturn(whatever);\n    }\n\n    @Test public void test() {\n        // use this.classToTest\n    }\n}\n</code></pre>\n<p>or</p>\n<pre><code>public class MyTest {\n    ClassA mockClassA = mock(ClassA.class);\n    ClassB mockClassB = mock(ClassB.class);\n    @InjectMocks ClassToTest classToTest;\n    AutoCloseable closeable;\n    @Before public void setup() {\n        closeable = MockitoAnnotations.openMocks(this);\n        when(mockClassB.someCall()).thenReturn(whatever);\n    }\n\n    @Test public void test() {\n        // use this.classToTest\n    }\n}\n</code></pre>\n<p>Alternatively, create all mock objects manually and use reflection to assign the fields of your class under test.</p>\n<p>Of course it always pays off to design your classes to be testable, which means that their dependencies are passed via the constructor.</p>\n<p>This is similar to <a href=\"https://stackoverflow.com/questions/74027324/why-are-my-mocked-methods-not-called-when-executing-a-unit-test\">Why are my mocked methods not called when executing a unit test?</a> (distinct references to two distinct mock objects, with your test referencing one and your class referencing a different one).</p>\n"},{"tags":[],"owner":{"account_id":1736824,"reputation":5410,"user_id":1589188,"accept_rate":66,"display_name":"user1589188"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700054117,"creation_date":1700054117,"answer_id":77488006,"question_id":77486947,"body_markdown":"Thanks to @knittl&#39;s idea, I ended up with this refined solution:\r\n\r\n    //@RunWith(MockitoJUnitRunner.class) no need\r\n    public class MyTest {\r\n        @Mock ClassA mockClassA;\r\n        ClassB mockClassB = mock(ClassB.class);\r\n        @InjectMocks ClassToTest classToTest = new ClassToTest(mockClassB);\r\n        AutoCloseable closeable;\r\n        @Before public void openMocks() {\r\n            closeable = MockitoAnnotations.openMocks(this);\r\n        }\r\n        //...\r\n    }","title":"Mockito replaced already mocked objects with new ones after calling openMocks for InjectMocks annotated object","body":"<p>Thanks to @knittl's idea, I ended up with this refined solution:</p>\n<pre><code>//@RunWith(MockitoJUnitRunner.class) no need\npublic class MyTest {\n    @Mock ClassA mockClassA;\n    ClassB mockClassB = mock(ClassB.class);\n    @InjectMocks ClassToTest classToTest = new ClassToTest(mockClassB);\n    AutoCloseable closeable;\n    @Before public void openMocks() {\n        closeable = MockitoAnnotations.openMocks(this);\n    }\n    //...\n}\n</code></pre>\n"}],"owner":{"account_id":1736824,"reputation":5410,"user_id":1589188,"accept_rate":66,"display_name":"user1589188"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77487106,"answer_count":2,"score":0,"last_activity_date":1700054117,"creation_date":1700044056,"question_id":77486947,"body_markdown":"I have this weird situation that Mockito is replacing already mocked objects with new ones after calling `openMocks()` for `@InjectMocks` annotated object.\r\n\r\nHere is my setup:\r\n\r\n    @RunWith(MockitoJUnitRunner.class) public class MyTest {\r\n        @Mock ClassA mockClassA;\r\n        @Mock ClassB mockClassB;\r\n        @InjectMocks ClassToTest classToTest;\r\n        AutoCloseable closeable;\r\n        @Before public void openMocks() {\r\n            closeable = MockitoAnnotations.openMocks(this);\r\n        }\r\n        //...\r\n    }\r\n\r\n    public class ClassToTest {\r\n        @Inject private ClassA classA;\r\n        private final ClassB classB;\r\n        @Inject public ClassToTest(ClassB classB) {\r\n            this.classB = classB;\r\n        }\r\n    }\r\n\r\nP.S. I don&#39;t have control over `ClassToTest`, I can&#39;t rewrite it to move the private member `classA` to the constructor.\r\n\r\nHere I want to mock both `classA` and `classB`, while the test is for `ClassToTest`. Since `classA` is not set via constructor, I need to use `@InjectMocks` for Mockito to set it for me. And it did set it correctly with `mockClassA` I have in the test.\r\n\r\nHowever, the problem is with `classB`. I set a breakpoint before `openMocks()`, there I could see `classToTest.classA` = `null` and `classToTest.classB` = `mockClassB`, which is expected. Then after calling `openMocks()`, I could see `classToTest.classA` = `mockClassA`, which is nice. But `classToTest.classB` now becomes a new mock object not `mockClassB` anymore. Since I need to setup the mock returns for `mockClassB`, replacing it with a new mock is not going to work.\r\n\r\nIs there a way to tell Mockito not to swap `classB` with a new mock?","title":"Mockito replaced already mocked objects with new ones after calling openMocks for InjectMocks annotated object","body":"<p>I have this weird situation that Mockito is replacing already mocked objects with new ones after calling <code>openMocks()</code> for <code>@InjectMocks</code> annotated object.</p>\n<p>Here is my setup:</p>\n<pre><code>@RunWith(MockitoJUnitRunner.class) public class MyTest {\n    @Mock ClassA mockClassA;\n    @Mock ClassB mockClassB;\n    @InjectMocks ClassToTest classToTest;\n    AutoCloseable closeable;\n    @Before public void openMocks() {\n        closeable = MockitoAnnotations.openMocks(this);\n    }\n    //...\n}\n\npublic class ClassToTest {\n    @Inject private ClassA classA;\n    private final ClassB classB;\n    @Inject public ClassToTest(ClassB classB) {\n        this.classB = classB;\n    }\n}\n</code></pre>\n<p>P.S. I don't have control over <code>ClassToTest</code>, I can't rewrite it to move the private member <code>classA</code> to the constructor.</p>\n<p>Here I want to mock both <code>classA</code> and <code>classB</code>, while the test is for <code>ClassToTest</code>. Since <code>classA</code> is not set via constructor, I need to use <code>@InjectMocks</code> for Mockito to set it for me. And it did set it correctly with <code>mockClassA</code> I have in the test.</p>\n<p>However, the problem is with <code>classB</code>. I set a breakpoint before <code>openMocks()</code>, there I could see <code>classToTest.classA</code> = <code>null</code> and <code>classToTest.classB</code> = <code>mockClassB</code>, which is expected. Then after calling <code>openMocks()</code>, I could see <code>classToTest.classA</code> = <code>mockClassA</code>, which is nice. But <code>classToTest.classB</code> now becomes a new mock object not <code>mockClassB</code> anymore. Since I need to setup the mock returns for <code>mockClassB</code>, replacing it with a new mock is not going to work.</p>\n<p>Is there a way to tell Mockito not to swap <code>classB</code> with a new mock?</p>\n"},{"tags":["java","dependencies","apache-commons-logging"],"answers":[{"tags":[],"owner":{"account_id":47283,"reputation":703807,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699947063,"creation_date":1699947063,"answer_id":77478841,"question_id":77475966,"body_markdown":"&gt; I am looking for help to fix this error and understand why it occurs.\r\n\r\nIt is happening because *something* in your application and/or its dependencies depends on that `LogFactory` class.  That is indisputable.\r\n\r\nAs best as I can tell, your class `TokenGenerator` is still making use of Apache Commons Logging. That is what the stacktrace seems to say. \r\n\r\nSo either:\r\n\r\n1. the stacktrace is out of date, \r\n2. the copy of `TokenGenerator.class` that is being used at runtime is out of date, or \r\n3. you forgot to update `TokenGenerator.java`. \r\n\r\nOn the other hand, if `TokenGenerator.java` is not your code, then you need to modify the project configuration so that the JAR file for Apache Commons Logging is present at runtime!\r\n\r\n&gt;  Is there something I&#39;m overlooking in my configuration or dependency management?\r\n\r\nQuite possibly.  For example, you have only told us what *you think* you did and checked.  You haven&#39;t shown us the configuration or dependency management stuff, etc.\r\n\r\n&gt; How can I resolve this issue and run my application without this error?\r\n\r\nEither remove the remaining references to the dependency from your application and its (transitive!) dependencies **that must exist**, or make sure that the requisite JAR is included.\r\n\r\n----------------------\r\n\r\n(I am assuming that there aren&#39;t other exceptions that you haven&#39;t told us about; i.e. exceptions resulting from failed static initialization that happened **before** this one.  A static initialization failure for a class will render other classes uninitializable, and that can result in cascading exceptions.)","title":"Error running Java EE application with GlassFish: NoClassDefFoundError: org/apache/commons/logging/LogFactory","body":"<blockquote>\n<p>I am looking for help to fix this error and understand why it occurs.</p>\n</blockquote>\n<p>It is happening because <em>something</em> in your application and/or its dependencies depends on that <code>LogFactory</code> class.  That is indisputable.</p>\n<p>As best as I can tell, your class <code>TokenGenerator</code> is still making use of Apache Commons Logging. That is what the stacktrace seems to say.</p>\n<p>So either:</p>\n<ol>\n<li>the stacktrace is out of date,</li>\n<li>the copy of <code>TokenGenerator.class</code> that is being used at runtime is out of date, or</li>\n<li>you forgot to update <code>TokenGenerator.java</code>.</li>\n</ol>\n<p>On the other hand, if <code>TokenGenerator.java</code> is not your code, then you need to modify the project configuration so that the JAR file for Apache Commons Logging is present at runtime!</p>\n<blockquote>\n<p>Is there something I'm overlooking in my configuration or dependency management?</p>\n</blockquote>\n<p>Quite possibly.  For example, you have only told us what <em>you think</em> you did and checked.  You haven't shown us the configuration or dependency management stuff, etc.</p>\n<blockquote>\n<p>How can I resolve this issue and run my application without this error?</p>\n</blockquote>\n<p>Either remove the remaining references to the dependency from your application and its (transitive!) dependencies <strong>that must exist</strong>, or make sure that the requisite JAR is included.</p>\n<hr />\n<p>(I am assuming that there aren't other exceptions that you haven't told us about; i.e. exceptions resulting from failed static initialization that happened <strong>before</strong> this one.  A static initialization failure for a class will render other classes uninitializable, and that can result in cascading exceptions.)</p>\n"},{"tags":[],"owner":{"account_id":29692301,"reputation":21,"user_id":22756413,"display_name":"Miguel"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1700053940,"creation_date":1700053940,"answer_id":77487985,"question_id":77475966,"body_markdown":"What I did was reload all the JAR into the lib of the payara domains, restart it and from there, clean and build the project and it worked.","title":"Error running Java EE application with GlassFish: NoClassDefFoundError: org/apache/commons/logging/LogFactory","body":"<p>What I did was reload all the JAR into the lib of the payara domains, restart it and from there, clean and build the project and it worked.</p>\n"}],"owner":{"account_id":29692301,"reputation":21,"user_id":22756413,"display_name":"Miguel"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77487985,"answer_count":2,"score":1,"last_activity_date":1700053940,"creation_date":1699899038,"question_id":77475966,"body_markdown":"When trying to run a Java EE application with GlassFish, I encounter the following error on the server:\r\n```java\r\nCaused by: java.lang.NoClassDefFoundError: org/apache/commons/logging/LogFactory\r\n\tat org.apache.http.conn.ssl.DefaultHostnameVerifier.&lt;init&gt;(DefaultHostnameVerifier.java:72)\r\n\t...\r\n...\r\nCaused by: java.lang.ClassNotFoundException: org.apache.commons.logging.LogFactory\r\n\tat dynamics365.TokenGenerator.ejecutarTokenGenerator(TokenGenerator.java:62)\r\n\tat sessionBeans.ParametroFacade.buscarCliente(ParametroFacade.java:103)\r\n\t\tat com.sun.enterprise.loader.ASURLClassLoader.findClassData(ASURLClassLoader.java:808)\r\n\t...\r\n```\r\n\r\nWhat I&#39;ve tried:\r\n\r\n- I have reviewed the project configuration to make sure all dependencies are configured correctly.\r\n- I have removed the use of Apache Commons Logging as it appears to be the cause of the problem.\r\n- I have cleaned and rebuilt the project to make sure there are no outdated build artifacts.\r\n- I&#39;ve reviewed the project structure and GlassFish server configuration to ensure everything is in order.\r\n\r\nWait:\r\n\r\nI am looking for help to fix this error and understand why it occurs. Is there something I&#39;m overlooking in my configuration or dependency management? How can I resolve this issue and run my application without this error?","title":"Error running Java EE application with GlassFish: NoClassDefFoundError: org/apache/commons/logging/LogFactory","body":"<p>When trying to run a Java EE application with GlassFish, I encounter the following error on the server:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Caused by: java.lang.NoClassDefFoundError: org/apache/commons/logging/LogFactory\n    at org.apache.http.conn.ssl.DefaultHostnameVerifier.&lt;init&gt;(DefaultHostnameVerifier.java:72)\n    ...\n...\nCaused by: java.lang.ClassNotFoundException: org.apache.commons.logging.LogFactory\n    at dynamics365.TokenGenerator.ejecutarTokenGenerator(TokenGenerator.java:62)\n    at sessionBeans.ParametroFacade.buscarCliente(ParametroFacade.java:103)\n        at com.sun.enterprise.loader.ASURLClassLoader.findClassData(ASURLClassLoader.java:808)\n    ...\n</code></pre>\n<p>What I've tried:</p>\n<ul>\n<li>I have reviewed the project configuration to make sure all dependencies are configured correctly.</li>\n<li>I have removed the use of Apache Commons Logging as it appears to be the cause of the problem.</li>\n<li>I have cleaned and rebuilt the project to make sure there are no outdated build artifacts.</li>\n<li>I've reviewed the project structure and GlassFish server configuration to ensure everything is in order.</li>\n</ul>\n<p>Wait:</p>\n<p>I am looking for help to fix this error and understand why it occurs. Is there something I'm overlooking in my configuration or dependency management? How can I resolve this issue and run my application without this error?</p>\n"},{"tags":["java","apache-spark","kubernetes","distributed-computing","distributed-system"],"owner":{"account_id":7629544,"reputation":335,"user_id":5785058,"display_name":"Shiv Krishna Jaiswal"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1700053498,"creation_date":1700052315,"question_id":77487811,"body_markdown":"I have a function and list of dictionaries. Each dictionary represent some configuration. Function takes one configuration and processes it.\r\n\r\nI wanted to distribute tasks/jobs (each task consists of function and a configuration) over, say `n` servers and was wondering if this can be done using Apache Spark.\r\n\r\nI googled resources but they were mostly around SQL, processing the data frame etc.\r\n\r\n**Question:** \r\n1. Can this be done using Apache Spark? if yes, can we also control number of cores that can be used by each task running on a server?\r\n2. Is Apache Spark the right tool for this setup?\r\n\r\nEdit: Seems like [Kubernetes](https://johndanielraines.medium.com/workload-parallelization-in-kubernetes-with-python-diy-style-1dfd32cf4366) is the right choice for such setups.","title":"Running Custom Jobs in parallet/distributed manner in Apache Spark","body":"<p>I have a function and list of dictionaries. Each dictionary represent some configuration. Function takes one configuration and processes it.</p>\n<p>I wanted to distribute tasks/jobs (each task consists of function and a configuration) over, say <code>n</code> servers and was wondering if this can be done using Apache Spark.</p>\n<p>I googled resources but they were mostly around SQL, processing the data frame etc.</p>\n<p><strong>Question:</strong></p>\n<ol>\n<li>Can this be done using Apache Spark? if yes, can we also control number of cores that can be used by each task running on a server?</li>\n<li>Is Apache Spark the right tool for this setup?</li>\n</ol>\n<p>Edit: Seems like <a href=\"https://johndanielraines.medium.com/workload-parallelization-in-kubernetes-with-python-diy-style-1dfd32cf4366\" rel=\"nofollow noreferrer\">Kubernetes</a> is the right choice for such setups.</p>\n"},{"tags":["java","spring-boot","keycloak","role-base-authorization"],"owner":{"account_id":29527287,"reputation":1,"user_id":22628618,"display_name":"Shivani Chappidi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":78,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1700052996,"creation_date":1700052786,"question_id":77487857,"body_markdown":"I have a spring boot application implemented with keycloak security \r\nso i want to display a error message when a user having no roles  tries to login  \r\n I have this login.ftl page \r\n\r\n\r\n```\r\n&lt;#import &quot;template.ftl&quot; as layout&gt;\r\n&lt;@layout.registrationLayout displayMessage=!messagesPerField.existsError(&#39;username&#39;,&#39;password&#39;) displayInfo=realm.password &amp;&amp; realm.registrationAllowed &amp;&amp; !registrationDisabled??; section&gt;\r\n    &lt;#if section = &quot;header&quot;&gt;\r\n        ${msg(&quot;loginAccountTitle&quot;)}\r\n    &lt;#elseif section = &quot;form&quot;&gt;\r\n    &lt;div id=&quot;kc-form&quot;&gt;\r\n      &lt;div id=&quot;kc-form-wrapper&quot;&gt;\r\n      &lt;marquee behavior=&quot;scroll&quot; direction=&quot;left&quot; scrollamount=&quot;5&quot;&gt;\r\n    This is a scrolling text using the marquee tag.\r\n&lt;/marquee&gt;\r\n        &lt;#if realm.password&gt;\r\n            &lt;form id=&quot;kc-form-login&quot; onsubmit=&quot;login.disabled = true; return true;&quot; action=&quot;${url.loginAction}&quot; method=&quot;post&quot;&gt;\r\n                &lt;#if !usernameHidden??&gt;\r\n                    &lt;div class=&quot;${properties.kcFormGroupClass!}&quot;&gt;\r\n                        &lt;label for=&quot;username&quot; class=&quot;${properties.kcLabelClass!}&quot;&gt;&lt;#if !realm.loginWithEmailAllowed&gt;${msg(&quot;username&quot;)}&lt;#elseif !realm.registrationEmailAsUsername&gt;${msg(&quot;usernameOrEmail&quot;)}&lt;#else&gt;${msg(&quot;email&quot;)}&lt;/#if&gt;&lt;/label&gt;\r\n\r\n                        &lt;input tabindex=&quot;1&quot; id=&quot;username&quot; class=&quot;${properties.kcInputClass!}&quot; name=&quot;username&quot; value=&quot;${(login.username!&#39;&#39;)}&quot;  type=&quot;text&quot; autofocus autocomplete=&quot;off&quot;\r\n                               aria-invalid=&quot;&lt;#if messagesPerField.existsError(&#39;username&#39;,&#39;password&#39;)&gt;true&lt;/#if&gt;&quot;\r\n                        /&gt;\r\n\r\n                        &lt;#if messagesPerField.existsError(&#39;username&#39;,&#39;password&#39;)&gt;\r\n                            &lt;span id=&quot;input-error&quot; class=&quot;${properties.kcInputErrorMessageClass!}&quot; aria-live=&quot;polite&quot;&gt;\r\n                                    ${kcSanitize(messagesPerField.getFirstError(&#39;username&#39;,&#39;password&#39;))?no_esc}\r\n                            &lt;/span&gt;\r\n                        &lt;/#if&gt;\r\n\r\n                    &lt;/div&gt;\r\n                &lt;/#if&gt;\r\n\r\n                &lt;div class=&quot;${properties.kcFormGroupClass!}&quot;&gt;\r\n                    &lt;label for=&quot;password&quot; class=&quot;${properties.kcLabelClass!}&quot;&gt;${msg(&quot;password&quot;)}&lt;/label&gt;\r\n\r\n                    &lt;input tabindex=&quot;2&quot; id=&quot;password&quot; class=&quot;${properties.kcInputClass!}&quot; name=&quot;password&quot; type=&quot;password&quot; autocomplete=&quot;off&quot;\r\n                           aria-invalid=&quot;&lt;#if messagesPerField.existsError(&#39;username&#39;,&#39;password&#39;)&gt;true&lt;/#if&gt;&quot;\r\n                    /&gt;\r\n\r\n                    &lt;#if usernameHidden?? &amp;&amp; messagesPerField.existsError(&#39;username&#39;,&#39;password&#39;)&gt;\r\n                        &lt;span id=&quot;input-error&quot; class=&quot;${properties.kcInputErrorMessageClass!}&quot; aria-live=&quot;polite&quot;&gt;\r\n                                ${kcSanitize(messagesPerField.getFirstError(&#39;username&#39;,&#39;password&#39;))?no_esc}\r\n                        &lt;/span&gt;\r\n                    &lt;/#if&gt;\r\n\r\n                &lt;/div&gt;\r\n\r\n                &lt;div class=&quot;${properties.kcFormGroupClass!} ${properties.kcFormSettingClass!}&quot;&gt;\r\n                    &lt;div id=&quot;kc-form-options&quot;&gt;\r\n                        &lt;#if realm.rememberMe &amp;&amp; !usernameHidden??&gt;\r\n                            &lt;div class=&quot;checkbox&quot;&gt;\r\n                                &lt;label&gt;\r\n                                    &lt;#if login.rememberMe??&gt;\r\n                                        &lt;input tabindex=&quot;3&quot; id=&quot;rememberMe&quot; name=&quot;rememberMe&quot; type=&quot;checkbox&quot; checked&gt; ${msg(&quot;rememberMe&quot;)}\r\n                                    &lt;#else&gt;\r\n                                        &lt;input tabindex=&quot;3&quot; id=&quot;rememberMe&quot; name=&quot;rememberMe&quot; type=&quot;checkbox&quot;&gt; ${msg(&quot;rememberMe&quot;)}\r\n                                    &lt;/#if&gt;\r\n                                &lt;/label&gt;\r\n                            &lt;/div&gt;\r\n                        &lt;/#if&gt;\r\n                        &lt;/div&gt;\r\n                        &lt;div class=&quot;${properties.kcFormOptionsWrapperClass!}&quot;&gt;\r\n                            &lt;#if realm.resetPasswordAllowed&gt;\r\n                                &lt;span&gt;&lt;a tabindex=&quot;5&quot; href=&quot;${url.loginResetCredentialsUrl}&quot;&gt;${msg(&quot;doForgotPassword&quot;)}&lt;/a&gt;&lt;/span&gt;\r\n                            &lt;/#if&gt;\r\n                        &lt;/div&gt;\r\n\r\n                  &lt;/div&gt;\r\n\r\n                  &lt;div id=&quot;kc-form-buttons&quot; class=&quot;${properties.kcFormGroupClass!}&quot;&gt;\r\n                      &lt;input type=&quot;hidden&quot; id=&quot;id-hidden-input&quot; name=&quot;credentialId&quot; &lt;#if auth.selectedCredential?has_content&gt;value=&quot;${auth.selectedCredential}&quot;&lt;/#if&gt;/&gt;\r\n                      &lt;input tabindex=&quot;4&quot; class=&quot;${properties.kcButtonClass!} ${properties.kcButtonPrimaryClass!} ${properties.kcButtonBlockClass!} ${properties.kcButtonLargeClass!}&quot; name=&quot;login&quot; id=&quot;kc-login&quot; type=&quot;submit&quot; value=&quot;${msg(&quot;doLogIn&quot;)}&quot;/&gt;\r\n                  &lt;/div&gt;\r\n            &lt;/form&gt;\r\n        &lt;/#if&gt;\r\n        &lt;/div&gt;\r\n\r\n    &lt;/div&gt;\r\n    &lt;#elseif section = &quot;info&quot; &gt;\r\n        &lt;#if realm.password &amp;&amp; realm.registrationAllowed &amp;&amp; !registrationDisabled??&gt;\r\n            &lt;div id=&quot;kc-registration-container&quot;&gt;\r\n                &lt;div id=&quot;kc-registration&quot;&gt;\r\n                    &lt;span&gt;${msg(&quot;noAccount&quot;)} &lt;a tabindex=&quot;6&quot;\r\n                                                 href=&quot;${url.registrationUrl}&quot;&gt;${msg(&quot;doRegister&quot;)}&lt;/a&gt;&lt;/span&gt;\r\n                &lt;/div&gt;\r\n            &lt;/div&gt;\r\n        &lt;/#if&gt;\r\n    &lt;#elseif section = &quot;socialProviders&quot; &gt;\r\n        &lt;#if realm.password &amp;&amp; social.providers??&gt;\r\n            &lt;div id=&quot;kc-social-providers&quot; class=&quot;${properties.kcFormSocialAccountSectionClass!}&quot;&gt;\r\n                &lt;hr/&gt;\r\n                &lt;h4&gt;${msg(&quot;identity-provider-login-label&quot;)}&lt;/h4&gt;\r\n\r\n                &lt;ul class=&quot;${properties.kcFormSocialAccountListClass!} &lt;#if social.providers?size gt 3&gt;${properties.kcFormSocialAccountListGridClass!}&lt;/#if&gt;&quot;&gt;\r\n                    &lt;#list social.providers as p&gt;\r\n                        &lt;li&gt;\r\n                            &lt;a id=&quot;social-${p.alias}&quot; class=&quot;${properties.kcFormSocialAccountListButtonClass!} &lt;#if social.providers?size gt 3&gt;${properties.kcFormSocialAccountGridItem!}&lt;/#if&gt;&quot;\r\n                                    type=&quot;button&quot; href=&quot;${p.loginUrl}&quot;&gt;\r\n                                &lt;#if p.iconClasses?has_content&gt;\r\n                                    &lt;i class=&quot;${properties.kcCommonLogoIdP!} ${p.iconClasses!}&quot; aria-hidden=&quot;true&quot;&gt;&lt;/i&gt;\r\n                                    &lt;span class=&quot;${properties.kcFormSocialAccountNameClass!} kc-social-icon-text&quot;&gt;${p.displayName!}&lt;/span&gt;\r\n                                &lt;#else&gt;\r\n                                    &lt;span class=&quot;${properties.kcFormSocialAccountNameClass!}&quot;&gt;${p.displayName!}&lt;/span&gt;\r\n                                &lt;/#if&gt;\r\n                            &lt;/a&gt;\r\n                        &lt;/li&gt;\r\n                    &lt;/#list&gt;\r\n                &lt;/ul&gt;\r\n            &lt;/div&gt;\r\n        &lt;/#if&gt;\r\n    &lt;/#if&gt;\r\n\r\n&lt;/@layout.registrationLayout&gt;\r\n\r\n\r\nand this is my config class \r\n\r\n@Configuration\r\n@EnableWebSecurity\r\npublic class KeycloakSecurity extends KeycloakWebSecurityConfigurerAdapter {\r\n\r\n    @Bean\r\n    @Override\r\n    protected SessionAuthenticationStrategy sessionAuthenticationStrategy() {\r\n        return new RegisterSessionAuthenticationStrategy(\r\n                new SessionRegistryImpl());\r\n    }\r\n\r\n    @Override\r\n    protected void configure(HttpSecurity http) throws Exception {\r\n        super.configure(http);\r\n        http.authorizeRequests()\r\n                .antMatchers(&quot;/dashboard&quot;).hasAnyRole(&quot;Employee&quot;, &quot;Manager&quot;)\r\n                .antMatchers(&quot;/logout&quot;).permitAll()\r\n                .anyRequest().permitAll()\r\n                .and()\r\n                .formLogin()\r\n                .successHandler(successHandler()) // Set custom success handler\r\n                .and()\r\n                .csrf().disable();\r\n    }\r\n\r\n    @Autowired\r\n    public void configureGlobal(AuthenticationManagerBuilder auth) throws Exception {\r\n        KeycloakAuthenticationProvider keycloakAuthenticationProvider = keycloakAuthenticationProvider();\r\n        keycloakAuthenticationProvider.setGrantedAuthoritiesMapper(new SimpleAuthorityMapper());\r\n        auth.authenticationProvider(keycloakAuthenticationProvider);\r\n    }\r\n    @Bean\r\n    public AuthenticationSuccessHandler successHandler1() {\r\n        return new SimpleUrlAuthenticationSuccessHandler() {\r\n            @Override\r\n            protected String determineTargetUrl(HttpServletRequest request, HttpServletResponse response) {\r\n                Collection&lt;? extends GrantedAuthority&gt; authorities = SecurityContextHolder.getContext().getAuthentication().getAuthorities();\r\n                List&lt;String&gt; roles = authorities.stream()\r\n                        .map(GrantedAuthority::getAuthority)\r\n                        .collect(Collectors.toList());\r\n\r\n                System.out.println(&quot;User successfully authenticated. Roles: &quot; + roles);\r\n\r\n                // You can add logic to check for roles here\r\n                // For simplicity, assume no roles for now\r\n                return request.getContextPath() + &quot;/noRoles&quot;;\r\n            }\r\n        };\r\n    }\r\n}\r\n\r\n```\r\n\r\n\r\nif i change anyting in this i am getting internal server error in keycloak \r\n\r\n\r\nI tried in this way \r\n\r\n&lt;#if !authentication?.account?.roles?has_content&gt;\r\n            &lt;div class=&quot;alert alert-danger&quot; role=&quot;alert&quot;&gt;\r\n                You don&#39;t have any roles. Please contact the administrator for assistance.\r\n            &lt;/div&gt;\r\n        &lt;/#if&gt;\r\nbut I am getting this error\r\n        \r\n        \r\n       Failed to load resource: the server responded with a status of 404 (Not Found)\r\nauth:1 Refused to execute script from &#39;http://localhost:8080/resources/1gs7r/login/keycloak%20-%20Copy/js/script.js&#39; because its MIME type (&#39;&#39;) is not executable, and strict MIME type checking is enabled.","title":"How to display a custom message in keycloak login page if no roles assigned user tries to login","body":"<p>I have a spring boot application implemented with keycloak security\nso i want to display a error message when a user having no roles  tries to login<br />\nI have this login.ftl page</p>\n<pre><code>&lt;#import &quot;template.ftl&quot; as layout&gt;\n&lt;@layout.registrationLayout displayMessage=!messagesPerField.existsError('username','password') displayInfo=realm.password &amp;&amp; realm.registrationAllowed &amp;&amp; !registrationDisabled??; section&gt;\n    &lt;#if section = &quot;header&quot;&gt;\n        ${msg(&quot;loginAccountTitle&quot;)}\n    &lt;#elseif section = &quot;form&quot;&gt;\n    &lt;div id=&quot;kc-form&quot;&gt;\n      &lt;div id=&quot;kc-form-wrapper&quot;&gt;\n      &lt;marquee behavior=&quot;scroll&quot; direction=&quot;left&quot; scrollamount=&quot;5&quot;&gt;\n    This is a scrolling text using the marquee tag.\n&lt;/marquee&gt;\n        &lt;#if realm.password&gt;\n            &lt;form id=&quot;kc-form-login&quot; onsubmit=&quot;login.disabled = true; return true;&quot; action=&quot;${url.loginAction}&quot; method=&quot;post&quot;&gt;\n                &lt;#if !usernameHidden??&gt;\n                    &lt;div class=&quot;${properties.kcFormGroupClass!}&quot;&gt;\n                        &lt;label for=&quot;username&quot; class=&quot;${properties.kcLabelClass!}&quot;&gt;&lt;#if !realm.loginWithEmailAllowed&gt;${msg(&quot;username&quot;)}&lt;#elseif !realm.registrationEmailAsUsername&gt;${msg(&quot;usernameOrEmail&quot;)}&lt;#else&gt;${msg(&quot;email&quot;)}&lt;/#if&gt;&lt;/label&gt;\n\n                        &lt;input tabindex=&quot;1&quot; id=&quot;username&quot; class=&quot;${properties.kcInputClass!}&quot; name=&quot;username&quot; value=&quot;${(login.username!'')}&quot;  type=&quot;text&quot; autofocus autocomplete=&quot;off&quot;\n                               aria-invalid=&quot;&lt;#if messagesPerField.existsError('username','password')&gt;true&lt;/#if&gt;&quot;\n                        /&gt;\n\n                        &lt;#if messagesPerField.existsError('username','password')&gt;\n                            &lt;span id=&quot;input-error&quot; class=&quot;${properties.kcInputErrorMessageClass!}&quot; aria-live=&quot;polite&quot;&gt;\n                                    ${kcSanitize(messagesPerField.getFirstError('username','password'))?no_esc}\n                            &lt;/span&gt;\n                        &lt;/#if&gt;\n\n                    &lt;/div&gt;\n                &lt;/#if&gt;\n\n                &lt;div class=&quot;${properties.kcFormGroupClass!}&quot;&gt;\n                    &lt;label for=&quot;password&quot; class=&quot;${properties.kcLabelClass!}&quot;&gt;${msg(&quot;password&quot;)}&lt;/label&gt;\n\n                    &lt;input tabindex=&quot;2&quot; id=&quot;password&quot; class=&quot;${properties.kcInputClass!}&quot; name=&quot;password&quot; type=&quot;password&quot; autocomplete=&quot;off&quot;\n                           aria-invalid=&quot;&lt;#if messagesPerField.existsError('username','password')&gt;true&lt;/#if&gt;&quot;\n                    /&gt;\n\n                    &lt;#if usernameHidden?? &amp;&amp; messagesPerField.existsError('username','password')&gt;\n                        &lt;span id=&quot;input-error&quot; class=&quot;${properties.kcInputErrorMessageClass!}&quot; aria-live=&quot;polite&quot;&gt;\n                                ${kcSanitize(messagesPerField.getFirstError('username','password'))?no_esc}\n                        &lt;/span&gt;\n                    &lt;/#if&gt;\n\n                &lt;/div&gt;\n\n                &lt;div class=&quot;${properties.kcFormGroupClass!} ${properties.kcFormSettingClass!}&quot;&gt;\n                    &lt;div id=&quot;kc-form-options&quot;&gt;\n                        &lt;#if realm.rememberMe &amp;&amp; !usernameHidden??&gt;\n                            &lt;div class=&quot;checkbox&quot;&gt;\n                                &lt;label&gt;\n                                    &lt;#if login.rememberMe??&gt;\n                                        &lt;input tabindex=&quot;3&quot; id=&quot;rememberMe&quot; name=&quot;rememberMe&quot; type=&quot;checkbox&quot; checked&gt; ${msg(&quot;rememberMe&quot;)}\n                                    &lt;#else&gt;\n                                        &lt;input tabindex=&quot;3&quot; id=&quot;rememberMe&quot; name=&quot;rememberMe&quot; type=&quot;checkbox&quot;&gt; ${msg(&quot;rememberMe&quot;)}\n                                    &lt;/#if&gt;\n                                &lt;/label&gt;\n                            &lt;/div&gt;\n                        &lt;/#if&gt;\n                        &lt;/div&gt;\n                        &lt;div class=&quot;${properties.kcFormOptionsWrapperClass!}&quot;&gt;\n                            &lt;#if realm.resetPasswordAllowed&gt;\n                                &lt;span&gt;&lt;a tabindex=&quot;5&quot; href=&quot;${url.loginResetCredentialsUrl}&quot;&gt;${msg(&quot;doForgotPassword&quot;)}&lt;/a&gt;&lt;/span&gt;\n                            &lt;/#if&gt;\n                        &lt;/div&gt;\n\n                  &lt;/div&gt;\n\n                  &lt;div id=&quot;kc-form-buttons&quot; class=&quot;${properties.kcFormGroupClass!}&quot;&gt;\n                      &lt;input type=&quot;hidden&quot; id=&quot;id-hidden-input&quot; name=&quot;credentialId&quot; &lt;#if auth.selectedCredential?has_content&gt;value=&quot;${auth.selectedCredential}&quot;&lt;/#if&gt;/&gt;\n                      &lt;input tabindex=&quot;4&quot; class=&quot;${properties.kcButtonClass!} ${properties.kcButtonPrimaryClass!} ${properties.kcButtonBlockClass!} ${properties.kcButtonLargeClass!}&quot; name=&quot;login&quot; id=&quot;kc-login&quot; type=&quot;submit&quot; value=&quot;${msg(&quot;doLogIn&quot;)}&quot;/&gt;\n                  &lt;/div&gt;\n            &lt;/form&gt;\n        &lt;/#if&gt;\n        &lt;/div&gt;\n\n    &lt;/div&gt;\n    &lt;#elseif section = &quot;info&quot; &gt;\n        &lt;#if realm.password &amp;&amp; realm.registrationAllowed &amp;&amp; !registrationDisabled??&gt;\n            &lt;div id=&quot;kc-registration-container&quot;&gt;\n                &lt;div id=&quot;kc-registration&quot;&gt;\n                    &lt;span&gt;${msg(&quot;noAccount&quot;)} &lt;a tabindex=&quot;6&quot;\n                                                 href=&quot;${url.registrationUrl}&quot;&gt;${msg(&quot;doRegister&quot;)}&lt;/a&gt;&lt;/span&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n        &lt;/#if&gt;\n    &lt;#elseif section = &quot;socialProviders&quot; &gt;\n        &lt;#if realm.password &amp;&amp; social.providers??&gt;\n            &lt;div id=&quot;kc-social-providers&quot; class=&quot;${properties.kcFormSocialAccountSectionClass!}&quot;&gt;\n                &lt;hr/&gt;\n                &lt;h4&gt;${msg(&quot;identity-provider-login-label&quot;)}&lt;/h4&gt;\n\n                &lt;ul class=&quot;${properties.kcFormSocialAccountListClass!} &lt;#if social.providers?size gt 3&gt;${properties.kcFormSocialAccountListGridClass!}&lt;/#if&gt;&quot;&gt;\n                    &lt;#list social.providers as p&gt;\n                        &lt;li&gt;\n                            &lt;a id=&quot;social-${p.alias}&quot; class=&quot;${properties.kcFormSocialAccountListButtonClass!} &lt;#if social.providers?size gt 3&gt;${properties.kcFormSocialAccountGridItem!}&lt;/#if&gt;&quot;\n                                    type=&quot;button&quot; href=&quot;${p.loginUrl}&quot;&gt;\n                                &lt;#if p.iconClasses?has_content&gt;\n                                    &lt;i class=&quot;${properties.kcCommonLogoIdP!} ${p.iconClasses!}&quot; aria-hidden=&quot;true&quot;&gt;&lt;/i&gt;\n                                    &lt;span class=&quot;${properties.kcFormSocialAccountNameClass!} kc-social-icon-text&quot;&gt;${p.displayName!}&lt;/span&gt;\n                                &lt;#else&gt;\n                                    &lt;span class=&quot;${properties.kcFormSocialAccountNameClass!}&quot;&gt;${p.displayName!}&lt;/span&gt;\n                                &lt;/#if&gt;\n                            &lt;/a&gt;\n                        &lt;/li&gt;\n                    &lt;/#list&gt;\n                &lt;/ul&gt;\n            &lt;/div&gt;\n        &lt;/#if&gt;\n    &lt;/#if&gt;\n\n&lt;/@layout.registrationLayout&gt;\n\n\nand this is my config class \n\n@Configuration\n@EnableWebSecurity\npublic class KeycloakSecurity extends KeycloakWebSecurityConfigurerAdapter {\n\n    @Bean\n    @Override\n    protected SessionAuthenticationStrategy sessionAuthenticationStrategy() {\n        return new RegisterSessionAuthenticationStrategy(\n                new SessionRegistryImpl());\n    }\n\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n        super.configure(http);\n        http.authorizeRequests()\n                .antMatchers(&quot;/dashboard&quot;).hasAnyRole(&quot;Employee&quot;, &quot;Manager&quot;)\n                .antMatchers(&quot;/logout&quot;).permitAll()\n                .anyRequest().permitAll()\n                .and()\n                .formLogin()\n                .successHandler(successHandler()) // Set custom success handler\n                .and()\n                .csrf().disable();\n    }\n\n    @Autowired\n    public void configureGlobal(AuthenticationManagerBuilder auth) throws Exception {\n        KeycloakAuthenticationProvider keycloakAuthenticationProvider = keycloakAuthenticationProvider();\n        keycloakAuthenticationProvider.setGrantedAuthoritiesMapper(new SimpleAuthorityMapper());\n        auth.authenticationProvider(keycloakAuthenticationProvider);\n    }\n    @Bean\n    public AuthenticationSuccessHandler successHandler1() {\n        return new SimpleUrlAuthenticationSuccessHandler() {\n            @Override\n            protected String determineTargetUrl(HttpServletRequest request, HttpServletResponse response) {\n                Collection&lt;? extends GrantedAuthority&gt; authorities = SecurityContextHolder.getContext().getAuthentication().getAuthorities();\n                List&lt;String&gt; roles = authorities.stream()\n                        .map(GrantedAuthority::getAuthority)\n                        .collect(Collectors.toList());\n\n                System.out.println(&quot;User successfully authenticated. Roles: &quot; + roles);\n\n                // You can add logic to check for roles here\n                // For simplicity, assume no roles for now\n                return request.getContextPath() + &quot;/noRoles&quot;;\n            }\n        };\n    }\n}\n\n</code></pre>\n<p>if i change anyting in this i am getting internal server error in keycloak</p>\n<p>I tried in this way</p>\n<p>&lt;#if !authentication?.account?.roles?has_content&gt;\n\nYou don't have any roles. Please contact the administrator for assistance.\n\n&lt;/#if&gt;\nbut I am getting this error</p>\n<pre><code>   Failed to load resource: the server responded with a status of 404 (Not Found)\n</code></pre>\n<p>auth:1 Refused to execute script from 'http://localhost:8080/resources/1gs7r/login/keycloak%20-%20Copy/js/script.js' because its MIME type ('') is not executable, and strict MIME type checking is enabled.</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1699991153,"post_id":77481074,"comment_id":136599376,"body_markdown":"`they always get saved in the app and I want to see them in the Gallery` Two misconceptions. An app cannot save files in itself. Only to storage locations of the device. Further you cannot store in the gallery as an alp can store only files in the storage of the device. Once the files land in the device storage they can be scanned by the media store. Gallery apps request the media store to give a list of pictures.","body":"<code>they always get saved in the app and I want to see them in the Gallery</code> Two misconceptions. An app cannot save files in itself. Only to storage locations of the device. Further you cannot store in the gallery as an alp can store only files in the storage of the device. Once the files land in the device storage they can be scanned by the media store. Gallery apps request the media store to give a list of pictures."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":1,"creation_date":1699991264,"post_id":77481074,"comment_id":136599394,"body_markdown":"getExternalFilesDir() is private storage of your app. It will not be scanned.","body":"getExternalFilesDir() is private storage of your app. It will not be scanned."}],"answers":[{"tags":[],"owner":{"account_id":21625375,"reputation":1,"user_id":15949785,"display_name":"Roshan Jha"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700046430,"creation_date":1700030205,"answer_id":77485683,"question_id":77481074,"body_markdown":"You can use this code to save an image into your Downloads/AppName folder:   \r\n\r\n       try {\r\n            File root = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DOWNLOADS + &quot;/AppName&quot;);\r\n            File dir = new File(root.getAbsolutePath() + File.separator);\r\n            if (!dir.exists()){\r\n                dir.mkdir();\r\n            }\r\n\r\n            //Create file..\r\n            File file = new File(root.getAbsolutePath() + File.separator + &quot;fileName&quot; + System.currentTimeMillis() + &quot;.jpeg&quot;);\r\n            file.createNewFile();\r\n\r\n            FileOutputStream out = new FileOutputStream(file);\r\n            out.write(bytes);\r\n            out.close();\r\n\r\n            Toast.makeText(requireContext(), &quot;File Downloaded...&quot;, Toast.LENGTH_SHORT).show();\r\n\r\n            // OPENING FOLDER LOCATION\r\n\r\n            // getting download/appName folder permission\r\n\r\n            if (android.os.Build.VERSION.SDK_INT &gt;= android.os.Build.VERSION_CODES.Q) {\r\n                String path = Environment.getExternalStorageDirectory() + &quot;/Download/AppName&quot;;\r\n                File folder = new File(path);\r\n                String startDir = &quot;&quot;, secondDir, finalDirPath;\r\n\r\n                if (folder.exists()) {\r\n                    startDir = &quot;Download%2FAppName&quot;;\r\n                }\r\n\r\n                StorageManager sm = (StorageManager) requireContext().getSystemService(Context.STORAGE_SERVICE);\r\n\r\n                Intent intent = sm.getPrimaryStorageVolume().createOpenDocumentTreeIntent();\r\n\r\n                Uri uri = intent.getParcelableExtra(&quot;android.provider.extra.INITIAL_URI&quot;);\r\n\r\n                String scheme = uri.toString();\r\n\r\n                scheme = scheme.replace(&quot;/root/&quot;, &quot;/document/&quot;);\r\n\r\n                finalDirPath = scheme + &quot;%3A&quot; + startDir;\r\n\r\n                uri = Uri.parse(finalDirPath);\r\n\r\n                intent.putExtra(&quot;android.provider.extra.INITIAL_URI&quot;, uri);\r\n\r\n                startActivity(intent);\r\n\r\n            }else{\r\n                Uri data = FileProvider.getUriForFile(requireContext(),\r\n                        requireContext().getPackageName() + &quot;.provider&quot;,\r\n                        file);\r\n\r\n                Intent intent = new Intent(Intent.ACTION_VIEW);\r\n                intent.setDataAndType(data, &quot;application/jpeg&quot;);\r\n\r\n                startActivity(intent);\r\n            }\r\n\r\n        } catch (Exception e) {\r\n            Toast.makeText(getContext(), &quot;No apps found to open downloaded file&quot;, Toast.LENGTH_SHORT).show();\r\n            Log.d(&quot;error&quot;, &quot;downloadPdf: error&quot; + e.getMessage());\r\n            e.printStackTrace();\r\n        }\r\n","title":"How can I save the picture in the gallery","body":"<p>You can use this code to save an image into your Downloads/AppName folder:</p>\n<pre><code>   try {\n        File root = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DOWNLOADS + &quot;/AppName&quot;);\n        File dir = new File(root.getAbsolutePath() + File.separator);\n        if (!dir.exists()){\n            dir.mkdir();\n        }\n\n        //Create file..\n        File file = new File(root.getAbsolutePath() + File.separator + &quot;fileName&quot; + System.currentTimeMillis() + &quot;.jpeg&quot;);\n        file.createNewFile();\n\n        FileOutputStream out = new FileOutputStream(file);\n        out.write(bytes);\n        out.close();\n\n        Toast.makeText(requireContext(), &quot;File Downloaded...&quot;, Toast.LENGTH_SHORT).show();\n\n        // OPENING FOLDER LOCATION\n\n        // getting download/appName folder permission\n\n        if (android.os.Build.VERSION.SDK_INT &gt;= android.os.Build.VERSION_CODES.Q) {\n            String path = Environment.getExternalStorageDirectory() + &quot;/Download/AppName&quot;;\n            File folder = new File(path);\n            String startDir = &quot;&quot;, secondDir, finalDirPath;\n\n            if (folder.exists()) {\n                startDir = &quot;Download%2FAppName&quot;;\n            }\n\n            StorageManager sm = (StorageManager) requireContext().getSystemService(Context.STORAGE_SERVICE);\n\n            Intent intent = sm.getPrimaryStorageVolume().createOpenDocumentTreeIntent();\n\n            Uri uri = intent.getParcelableExtra(&quot;android.provider.extra.INITIAL_URI&quot;);\n\n            String scheme = uri.toString();\n\n            scheme = scheme.replace(&quot;/root/&quot;, &quot;/document/&quot;);\n\n            finalDirPath = scheme + &quot;%3A&quot; + startDir;\n\n            uri = Uri.parse(finalDirPath);\n\n            intent.putExtra(&quot;android.provider.extra.INITIAL_URI&quot;, uri);\n\n            startActivity(intent);\n\n        }else{\n            Uri data = FileProvider.getUriForFile(requireContext(),\n                    requireContext().getPackageName() + &quot;.provider&quot;,\n                    file);\n\n            Intent intent = new Intent(Intent.ACTION_VIEW);\n            intent.setDataAndType(data, &quot;application/jpeg&quot;);\n\n            startActivity(intent);\n        }\n\n    } catch (Exception e) {\n        Toast.makeText(getContext(), &quot;No apps found to open downloaded file&quot;, Toast.LENGTH_SHORT).show();\n        Log.d(&quot;error&quot;, &quot;downloadPdf: error&quot; + e.getMessage());\n        e.printStackTrace();\n    }\n</code></pre>\n"}],"owner":{"account_id":29900604,"reputation":1,"user_id":22914446,"display_name":"Huraweurg"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":87,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1700052789,"creation_date":1699969383,"question_id":77481074,"body_markdown":"My camera app makes photos but they always get saved in the app and I want to see them in the Gallery, but I want to stay with ImageCapture. I use Android 14.\r\n```java\r\npublic void takePicture(ImageCapture imageCapture) {\r\n    File file = new File(getExternalFilesDir(Environment.DIRECTORY_DCIM) + &quot;/&quot; + System.currentTimeMillis() + &quot;.jpg&quot;);\r\n    ImageCapture.OutputFileOptions outputFileOptions = new ImageCapture.OutputFileOptions.Builder(file).build();\r\n    imageCapture.takePicture(outputFileOptions, Executors.newSingleThreadExecutor(), new ImageCapture.OnImageSavedCallback() {\r\n\r\n            @Override\r\n            public void onImageSaved(ImageCapture.OutputFileResults outputFileResults) {\r\n                runOnUiThread(new Runnable() {\r\n                    @Override\r\n                    public void run() {\r\n                        Toast.makeText(MainActivity.this, &quot;Image saved at: &quot; + file.getPath(), Toast.LENGTH_SHORT).show();\r\n                    }\r\n                });\r\n                startCamera(cameraFacing);\r\n            }\r\n    \r\n            @Override\r\n            public void onError(ImageCaptureException exception) {\r\n                runOnUiThread(new Runnable() {\r\n                    @Override\r\n                    public void run() {\r\n                        Toast.makeText(MainActivity.this, &quot;Failed to save: &quot; + exception.getMessage(), Toast.LENGTH_SHORT).show();\r\n                    }\r\n                });\r\n                startCamera(cameraFacing);\r\n            }\r\n    \r\n        });\r\n```","title":"How can I save the picture in the gallery","body":"<p>My camera app makes photos but they always get saved in the app and I want to see them in the Gallery, but I want to stay with ImageCapture. I use Android 14.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public void takePicture(ImageCapture imageCapture) {\n    File file = new File(getExternalFilesDir(Environment.DIRECTORY_DCIM) + &quot;/&quot; + System.currentTimeMillis() + &quot;.jpg&quot;);\n    ImageCapture.OutputFileOptions outputFileOptions = new ImageCapture.OutputFileOptions.Builder(file).build();\n    imageCapture.takePicture(outputFileOptions, Executors.newSingleThreadExecutor(), new ImageCapture.OnImageSavedCallback() {\n\n            @Override\n            public void onImageSaved(ImageCapture.OutputFileResults outputFileResults) {\n                runOnUiThread(new Runnable() {\n                    @Override\n                    public void run() {\n                        Toast.makeText(MainActivity.this, &quot;Image saved at: &quot; + file.getPath(), Toast.LENGTH_SHORT).show();\n                    }\n                });\n                startCamera(cameraFacing);\n            }\n    \n            @Override\n            public void onError(ImageCaptureException exception) {\n                runOnUiThread(new Runnable() {\n                    @Override\n                    public void run() {\n                        Toast.makeText(MainActivity.this, &quot;Failed to save: &quot; + exception.getMessage(), Toast.LENGTH_SHORT).show();\n                    }\n                });\n                startCamera(cameraFacing);\n            }\n    \n        });\n</code></pre>\n"},{"tags":["java","java.util.scanner","bufferedreader","fileinputstream"],"comments":[{"owner":{"account_id":318670,"reputation":15681,"user_id":636009,"display_name":"David Conrad"},"score":1,"creation_date":1700022834,"post_id":77485125,"comment_id":136602874,"body_markdown":"Do you understand that BufferedReader&#39;s readLine() method returns null to indicate end of file?","body":"Do you understand that BufferedReader&#39;s readLine() method returns null to indicate end of file?"},{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1700023673,"post_id":77485125,"comment_id":136602928,"body_markdown":"You wrote (in your question): _Here are ... screenshots of the data file_ Pardon me but I cannot find those screenshots. If the file is a text file, then post (at least part of) its contents as text and **not** as an [image](https://meta.stackoverflow.com/questions/285551/why-should-i-not-upload-images-of-code-data-errors).","body":"You wrote (in your question): <i>Here are ... screenshots of the data file</i> Pardon me but I cannot find those screenshots. If the file is a text file, then post (at least part of) its contents as text and <b>not</b> as an <a href=\"https://meta.stackoverflow.com/questions/285551/why-should-i-not-upload-images-of-code-data-errors\">image</a>."},{"owner":{"account_id":71739,"reputation":307143,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1700024164,"post_id":77485125,"comment_id":136602965,"body_markdown":"It’s not impossible for `line` to be null in this code. You have to use it inside the loop, not afterwards.","body":"It’s not impossible for <code>line</code> to be null in this code. You have to use it inside the loop, not afterwards."},{"owner":{"account_id":18256279,"reputation":661,"user_id":13290159,"display_name":"0x150"},"score":0,"creation_date":1700029981,"post_id":77485125,"comment_id":136603470,"body_markdown":"There&#39;s obviously other code that is missing from this example. Please post the full code snippet, including your usage of `String.split` (it&#39;s missing here, and that function is the issue)","body":"There&#39;s obviously other code that is missing from this example. Please post the full code snippet, including your usage of <code>String.split</code> (it&#39;s missing here, and that function is the issue)"},{"owner":{"account_id":6017640,"reputation":8919,"user_id":4725875,"display_name":"DevilsHnd - 退した"},"score":1,"creation_date":1700037141,"post_id":77485125,"comment_id":136604391,"body_markdown":"The true story...there is nothing wrong with the code you have **shown**. All you need to do now is post the code that **is** giving the problem.","body":"The true story...there is nothing wrong with the code you have <b>shown</b>. All you need to do now is post the code that <b>is</b> giving the problem."},{"owner":{"account_id":29905463,"reputation":1,"user_id":22918091,"display_name":"zqy"},"score":0,"creation_date":1700050790,"post_id":77485125,"comment_id":136606732,"body_markdown":"Guys, thank you so much! I finally found that there was nothing wrong with my codes and the problem derives from the .data file that my friend gave me...  somewhere of the file had a wrong format(for our project) and everything got stuck there when debugging the codes.... Thank you all for your help!","body":"Guys, thank you so much! I finally found that there was nothing wrong with my codes and the problem derives from the .data file that my friend gave me...  somewhere of the file had a wrong format(for our project) and everything got stuck there when debugging the codes.... Thank you all for your help!"},{"owner":{"account_id":71739,"reputation":307143,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1700054466,"post_id":77485125,"comment_id":136607394,"body_markdown":"That would not cause `line` to become null. You had a bug in your code.","body":"That would not cause <code>line</code> to become null. You had a bug in your code."}],"owner":{"account_id":29905463,"reputation":1,"user_id":22918091,"display_name":"zqy"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":52,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"closed_date":1700052793,"answer_count":0,"score":-2,"last_activity_date":1700052781,"creation_date":1700019677,"question_id":77485125,"body_markdown":"I want to load a .data file for my group project (Java), and previously I used java.io.BufferedReader to solve this problem. I encountered an error which says _&quot;Cannot invoke &quot;String.split(String)&quot; because the return value of &quot;java.io.BufferedReader.readLine()&quot; is null&quot;_.  My idea is to read every line of the .data file until it reached the end. Here are the related part of the codes and screenshots of the data file:\r\n\r\n```java\r\ntry (BufferedReader bufferedReader = new BufferedReader(new FileReader(path))) {\r\n    String line;\r\n    while ((line = bufferedReader.readLine()) != null) {\r\n        //the content\r\n    } \r\n}\r\n```\r\n\r\nI want to read every line of the .data file (all of them should be in the format of strings). None of the lines are empty, so it&#39;s impossible to have a null return value in theory.","title":"Failed to read lines from a .data file in my Java Project","body":"<p>I want to load a .data file for my group project (Java), and previously I used java.io.BufferedReader to solve this problem. I encountered an error which says <em>&quot;Cannot invoke &quot;String.split(String)&quot; because the return value of &quot;java.io.BufferedReader.readLine()&quot; is null&quot;</em>.  My idea is to read every line of the .data file until it reached the end. Here are the related part of the codes and screenshots of the data file:</p>\n<pre class=\"lang-java prettyprint-override\"><code>try (BufferedReader bufferedReader = new BufferedReader(new FileReader(path))) {\n    String line;\n    while ((line = bufferedReader.readLine()) != null) {\n        //the content\n    } \n}\n</code></pre>\n<p>I want to read every line of the .data file (all of them should be in the format of strings). None of the lines are empty, so it's impossible to have a null return value in theory.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":401843,"reputation":89758,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1700053791,"post_id":77487791,"comment_id":136607253,"body_markdown":"Rendering HTML is incredibly complicated: There are pretty much 2 major browser engines out there, period. Should it support all HTML? Should it support CSS? Javascript? Or just very very basic HTML?","body":"Rendering HTML is incredibly complicated: There are pretty much 2 major browser engines out there, period. Should it support all HTML? Should it support CSS? Javascript? Or just very very basic HTML?"},{"owner":{"account_id":29908939,"reputation":1,"user_id":22920855,"display_name":"郭乐源"},"score":0,"creation_date":1700106654,"post_id":77487791,"comment_id":136614909,"body_markdown":"Only simple html is included, and the rich text generated by the front end is a piece of html that exists in the database. Now I want to convert this to a formatted string on the back end in order to retain the format when exporting to Excel cells.","body":"Only simple html is included, and the rich text generated by the front end is a piece of html that exists in the database. Now I want to convert this to a formatted string on the back end in order to retain the format when exporting to Excel cells."}],"owner":{"account_id":29908939,"reputation":1,"user_id":22920855,"display_name":"郭乐源"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1700052320,"creation_date":1700052017,"question_id":77487791,"body_markdown":"The SpringBoot framework is used. I now get a string with an html tag, such as `&quot;&lt;p&gt;Hello&lt;/p&gt;&lt;p&gt;Good afternoon&lt;/p&gt;&quot;`. I want to parse it into a formatted String on the back end and export it to an Excel spreadsheet to preserve the format. \r\n\r\nSuch as:\r\n\r\n    Hello\r\n    Good afternoon\r\n\r\nHow to solve it.\r\n\r\nI am now using EasyExcel export, but the premise is to have this String with format, how to solve","title":"How to convert Html to a formatted string","body":"<p>The SpringBoot framework is used. I now get a string with an html tag, such as <code>&quot;&lt;p&gt;Hello&lt;/p&gt;&lt;p&gt;Good afternoon&lt;/p&gt;&quot;</code>. I want to parse it into a formatted String on the back end and export it to an Excel spreadsheet to preserve the format.</p>\n<p>Such as:</p>\n<pre><code>Hello\nGood afternoon\n</code></pre>\n<p>How to solve it.</p>\n<p>I am now using EasyExcel export, but the premise is to have this String with format, how to solve</p>\n"},{"tags":["java","selenium-webdriver","azure-pipelines"],"comments":[{"owner":{"account_id":21897459,"reputation":971,"user_id":16183552,"display_name":"Ziyang Liu-MSFT"},"score":0,"creation_date":1700118519,"post_id":77487719,"comment_id":136615885,"body_markdown":"Whether you can run the test successfully on your local machine? If you can, try to set up a self-hosted agent on this local machine and use it to run the pipeline. Then check if it works.","body":"Whether you can run the test successfully on your local machine? If you can, try to set up a self-hosted agent on this local machine and use it to run the pipeline. Then check if it works."},{"owner":{"account_id":23881045,"reputation":87,"user_id":17881743,"display_name":"Techie_Taks"},"score":0,"creation_date":1700143481,"post_id":77487719,"comment_id":136620260,"body_markdown":"when I run the test suite directly from spring tool suite then also it executes but facing this issue while executing from azure-pipeline","body":"when I run the test suite directly from spring tool suite then also it executes but facing this issue while executing from azure-pipeline"},{"owner":{"account_id":21897459,"reputation":971,"user_id":16183552,"display_name":"Ziyang Liu-MSFT"},"score":0,"creation_date":1700553401,"post_id":77487719,"comment_id":136665608,"body_markdown":"When you run your test on the pipeline, it essentially calls some commands on the agent. This is the same as running the test directly through command on your local machine. The main difference is the running environment. In order to know whether this issue is related to your project itself or the environment, please use command directly on your local machine to run your test.  If the test can run successfully using commands locally, set up a self-hosted agent on this machine, run the same commands in the pipeline and use this self-hosted agent to run the pipeline.","body":"When you run your test on the pipeline, it essentially calls some commands on the agent. This is the same as running the test directly through command on your local machine. The main difference is the running environment. In order to know whether this issue is related to your project itself or the environment, please use command directly on your local machine to run your test.  If the test can run successfully using commands locally, set up a self-hosted agent on this machine, run the same commands in the pipeline and use this self-hosted agent to run the pipeline."}],"answers":[{"tags":[],"owner":{"account_id":10299692,"reputation":5719,"user_id":7598774,"accept_rate":75,"display_name":"Shawn"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700051769,"creation_date":1700051769,"answer_id":77487757,"question_id":77487719,"body_markdown":"My hunch is that the URL you have provided is not a fully qualified URL.\r\n\r\nExample:\r\n\r\nIncorrect:\r\n````\r\ndriver.get(&quot;www.google.com/&quot;);\r\n````\r\n\r\nCorrect:\r\n````\r\ndriver.get(&quot;https://www.google.com/&quot;);\r\n````","title":"org.openqa.selenium.WebDriverException: unknown error: net::ERR_NAME_NOT_RESOLVED","body":"<p>My hunch is that the URL you have provided is not a fully qualified URL.</p>\n<p>Example:</p>\n<p>Incorrect:</p>\n<pre><code>driver.get(&quot;www.google.com/&quot;);\n</code></pre>\n<p>Correct:</p>\n<pre><code>driver.get(&quot;https://www.google.com/&quot;);\n</code></pre>\n"}],"owner":{"account_id":23881045,"reputation":87,"user_id":17881743,"display_name":"Techie_Taks"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":88,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1700051769,"creation_date":1700051422,"question_id":77487719,"body_markdown":"I want to configure selenium test automation suite(selenium cucumber maven project) as pipeline and run it in Azure-Devops. While running the pipeline faced below error:\r\n````\r\nVerification of Weblogin_TC1(Login to Web Application)  Time elapsed: 42.601 sec  &lt;&lt;&lt; ERROR!\r\norg.openqa.selenium.WebDriverException: unknown error: net::ERR_NAME_NOT_RESOLVED\r\n````\r\n\r\nThis error is pointing to the below line of code:\r\n````\r\ndriver.get(&quot;app url&quot;);\r\n````\r\n\r\nPlease provide me the way to overcome this","title":"org.openqa.selenium.WebDriverException: unknown error: net::ERR_NAME_NOT_RESOLVED","body":"<p>I want to configure selenium test automation suite(selenium cucumber maven project) as pipeline and run it in Azure-Devops. While running the pipeline faced below error:</p>\n<pre><code>Verification of Weblogin_TC1(Login to Web Application)  Time elapsed: 42.601 sec  &lt;&lt;&lt; ERROR!\norg.openqa.selenium.WebDriverException: unknown error: net::ERR_NAME_NOT_RESOLVED\n</code></pre>\n<p>This error is pointing to the below line of code:</p>\n<pre><code>driver.get(&quot;app url&quot;);\n</code></pre>\n<p>Please provide me the way to overcome this</p>\n"},{"tags":["java","design-patterns","strategy-pattern","command-pattern"],"comments":[{"owner":{"account_id":8834,"reputation":297144,"user_id":16076,"display_name":"Mitch Wheat"},"score":0,"creation_date":1296272219,"post_id":4834979,"comment_id":5366311,"body_markdown":"first search hit: http://www.coderanch.com/t/100214/patterns/Command-vs-Strategy-Pattern","body":"first search hit: <a href=\"http://www.coderanch.com/t/100214/patterns/Command-vs-Strategy-Pattern\" rel=\"nofollow noreferrer\">coderanch.com/t/100214/patterns/Command-vs-Strategy-Pattern</a>"},{"owner":{"account_id":52822,"reputation":1088960,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"score":2,"creation_date":1296275009,"post_id":4834979,"comment_id":5366527,"body_markdown":"Related: http://stackoverflow.com/questions/1673841/examples-of-gof-design-patterns","body":"Related: <a href=\"http://stackoverflow.com/questions/1673841/examples-of-gof-design-patterns\" title=\"examples of gof design patterns\">stackoverflow.com/questions/1673841/&hellip;</a>"},{"owner":{"account_id":17919,"reputation":1594,"user_id":40614,"accept_rate":78,"display_name":"pramodc84"},"score":0,"creation_date":1418913879,"post_id":4834979,"comment_id":43524486,"body_markdown":"possible duplicate of [Strategy pattern vs. Command pattern](http://stackoverflow.com/questions/3883692/strategy-pattern-vs-command-pattern)","body":"possible duplicate of <a href=\"http://stackoverflow.com/questions/3883692/strategy-pattern-vs-command-pattern\">Strategy pattern vs. Command pattern</a>"}],"answers":[{"tags":[],"owner":{"account_id":22521,"reputation":35904,"user_id":55637,"accept_rate":67,"display_name":"Jeffrey Hantin"},"down_vote_count":0,"up_vote_count":153,"is_accepted":true,"score":153,"last_activity_date":1296272773,"creation_date":1296272773,"answer_id":4835013,"question_id":4834979,"body_markdown":"Typically the Command pattern is used to make an object out of *what needs to be done* -- to take an operation and its arguments and wrap them up in an object to be logged, held for undo, sent to a remote site, etc.  There will tend to be a large number of distinct Command objects that pass through a given point in a system over time, and the Command objects will hold varying parameters describing the operation requested.\r\n\r\nThe Strategy pattern, on the other hand, is used to specify *how* something should be done, and plugs into a larger object or method to provide a specific algorithm.  A Strategy for sorting might be a merge sort, might be an insertion sort, or perhaps something more complex like only using merge sort if the list is larger than some minimum size.  Strategy objects are rarely subjected to the sort of mass shuffling about that Command objects are, instead often being used for configuration or tuning purposes.\r\n\r\nBoth patterns involve factoring the code and possibly parameters for individual operations out of the original class that contained them into another object to provide for independent variability.  The differences are in the use cases encountered in practice and the intent behind each pattern.","title":"Difference between Strategy pattern and Command pattern","body":"<p>Typically the Command pattern is used to make an object out of <em>what needs to be done</em> -- to take an operation and its arguments and wrap them up in an object to be logged, held for undo, sent to a remote site, etc.  There will tend to be a large number of distinct Command objects that pass through a given point in a system over time, and the Command objects will hold varying parameters describing the operation requested.</p>\n\n<p>The Strategy pattern, on the other hand, is used to specify <em>how</em> something should be done, and plugs into a larger object or method to provide a specific algorithm.  A Strategy for sorting might be a merge sort, might be an insertion sort, or perhaps something more complex like only using merge sort if the list is larger than some minimum size.  Strategy objects are rarely subjected to the sort of mass shuffling about that Command objects are, instead often being used for configuration or tuning purposes.</p>\n\n<p>Both patterns involve factoring the code and possibly parameters for individual operations out of the original class that contained them into another object to provide for independent variability.  The differences are in the use cases encountered in practice and the intent behind each pattern.</p>\n"},{"tags":[],"owner":{"account_id":52822,"reputation":1088960,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"down_vote_count":2,"up_vote_count":88,"is_accepted":false,"score":86,"last_activity_date":1665496477,"creation_date":1296275422,"answer_id":4835168,"question_id":4834979,"body_markdown":"Words are already given in [the other answer][1]. Here is the difference in concrete code.\r\n\r\n    public class ConcreteStrategy implements BaseStrategy {\r\n\r\n        @Override\r\n        public void execute(Object argument) {\r\n\r\n            // Work with passed-in argument.\r\n\r\n        }\r\n\r\n    }\r\n\r\n---\r\n\r\n    public class ConcreteCommand implements BaseCommand {\r\n\r\n        private Object argument;\r\n\r\n        public ConcreteCommand(Object argument) {\r\n            this.argument = argument;\r\n        }\r\n\r\n        @Override\r\n        public void execute() {\r\n\r\n            // Work with own state.\r\n\r\n        }\r\n\r\n    }\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/4835013","title":"Difference between Strategy pattern and Command pattern","body":"<p>Words are already given in <a href=\"https://stackoverflow.com/a/4835013\">the other answer</a>. Here is the difference in concrete code.</p>\n<pre><code>public class ConcreteStrategy implements BaseStrategy {\n\n    @Override\n    public void execute(Object argument) {\n\n        // Work with passed-in argument.\n\n    }\n\n}\n</code></pre>\n<hr />\n<pre><code>public class ConcreteCommand implements BaseCommand {\n\n    private Object argument;\n\n    public ConcreteCommand(Object argument) {\n        this.argument = argument;\n    }\n\n    @Override\n    public void execute() {\n\n        // Work with own state.\n\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":93911,"reputation":5846,"user_id":256717,"accept_rate":80,"display_name":"Fakrudeen"},"down_vote_count":2,"up_vote_count":58,"is_accepted":false,"score":56,"last_activity_date":1296289895,"creation_date":1296289895,"answer_id":4835892,"question_id":4834979,"body_markdown":"Strategy - Quicksort or Mergesort [algo change]\r\n\r\nCommand - Open or Close [action change]","title":"Difference between Strategy pattern and Command pattern","body":"<p>Strategy - Quicksort or Mergesort [algo change]</p>\n\n<p>Command - Open or Close [action change]</p>\n"},{"tags":[],"owner":{"account_id":5889359,"reputation":169,"user_id":4870176,"display_name":"Asif Malek"},"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1444028453,"creation_date":1444028453,"answer_id":32942916,"question_id":4834979,"body_markdown":"The main difference is , the command does some action over the object.\r\nIt may change the state of an object.\r\n\r\nWhile Strategy decides how to process the object.\r\nIt encapsulates some business logic.","title":"Difference between Strategy pattern and Command pattern","body":"<p>The main difference is , the command does some action over the object.\nIt may change the state of an object.</p>\n\n<p>While Strategy decides how to process the object.\nIt encapsulates some business logic.</p>\n"},{"tags":[],"owner":{"account_id":6453072,"reputation":37996,"user_id":4999394,"accept_rate":98,"display_name":"Ravindra babu"},"down_vote_count":1,"up_vote_count":9,"is_accepted":false,"score":8,"last_activity_date":1680290156,"creation_date":1453830548,"answer_id":35020443,"question_id":4834979,"body_markdown":"*Strategy* pattern is useful when you have multiple implementations (algorithms) for a given feature and you want to change the algorithm at runtime depending on parameter type.  \r\n\r\n*Salient features of Strategy pattern*\r\n\r\n1. It&#39;s a behavioural pattern\r\n2. It&#39;s based on delegation\r\n3. It changes guts of the object by modifying method behaviour\r\n4. It&#39;s used to switch between family of algorithms\r\n5. It changes the behaviour of the object at run time\r\n\r\nhttps://stackoverflow.com/questions/370258/real-world-example-of-the-strategy-pattern/35180265#35180265\r\n\r\n*Command* pattern is used to enable loose coupling between Invoker and Receiver. Command, ConcreteCommand, Receiver, Invoker and Client are major components of this pattern.\r\n\r\nDifferent Receivers will execute same Command through Invoker &amp; Concrete Command but the implementation of Command will vary in each Receiver. \r\n\r\ne.g. You have to implement &quot;On&quot; and &quot;Off&quot; functionality for *TV &amp; DVDPlayer*. But TV and DVDPlayer will have different implementation for these commands.\r\n\r\nHave a look at below posts with code examples :\r\n\r\nhttps://stackoverflow.com/questions/2015549/using-command-design-pattern/34789979#34789979\r\n\r\n\r\n  [1]: http://grepcode.com/file_/repo1.maven.org/maven2/javax.servlet/servlet-api/2.5/javax/servlet/http/HttpServlet.java/?v=source\r\n","title":"Difference between Strategy pattern and Command pattern","body":"<p><em>Strategy</em> pattern is useful when you have multiple implementations (algorithms) for a given feature and you want to change the algorithm at runtime depending on parameter type.</p>\n<p><em>Salient features of Strategy pattern</em></p>\n<ol>\n<li>It's a behavioural pattern</li>\n<li>It's based on delegation</li>\n<li>It changes guts of the object by modifying method behaviour</li>\n<li>It's used to switch between family of algorithms</li>\n<li>It changes the behaviour of the object at run time</li>\n</ol>\n<p><a href=\"https://stackoverflow.com/questions/370258/real-world-example-of-the-strategy-pattern/35180265#35180265\">Real World Example of the Strategy Pattern</a></p>\n<p><em>Command</em> pattern is used to enable loose coupling between Invoker and Receiver. Command, ConcreteCommand, Receiver, Invoker and Client are major components of this pattern.</p>\n<p>Different Receivers will execute same Command through Invoker &amp; Concrete Command but the implementation of Command will vary in each Receiver.</p>\n<p>e.g. You have to implement &quot;On&quot; and &quot;Off&quot; functionality for <em>TV &amp; DVDPlayer</em>. But TV and DVDPlayer will have different implementation for these commands.</p>\n<p>Have a look at below posts with code examples :</p>\n<p><a href=\"https://stackoverflow.com/questions/2015549/using-command-design-pattern/34789979#34789979\">Using Command Design pattern</a></p>\n"},{"tags":[],"owner":{"account_id":17038954,"reputation":1,"user_id":13809457,"display_name":"Ahmed Shalaby"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1605921133,"creation_date":1605921133,"answer_id":64938865,"question_id":4834979,"body_markdown":"I think a big difference here is that **Strategy pattern** is used when you need to shuffle between different objects that implement the ***same interface***, but **Command Pattern** is used  to shuffle between some objects that implement ***different interfaces*** ( as it encapsulates them into other objects called &quot;Command Objects&quot; ) and pass these command objects just like Strategy pattern does. ","title":"Difference between Strategy pattern and Command pattern","body":"<p>I think a big difference here is that <strong>Strategy pattern</strong> is used when you need to shuffle between different objects that implement the <em><strong>same interface</strong></em>, but <strong>Command Pattern</strong> is used  to shuffle between some objects that implement <em><strong>different interfaces</strong></em> ( as it encapsulates them into other objects called &quot;Command Objects&quot; ) and pass these command objects just like Strategy pattern does.</p>\n"},{"tags":[],"owner":{"account_id":13638740,"reputation":1,"user_id":9839156,"display_name":"Front-end Padavan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700051664,"creation_date":1700051664,"answer_id":77487748,"question_id":4834979,"body_markdown":"The one of possible solutions for strategy pattern\r\n\r\n    @Service\r\n    @RequiredArgsConstructor\r\n    public class StrategyService {\r\n    \r\n      private final FirstWay firstWay;\r\n      private final SecondWay secondWay;\r\n    \r\n      private final Map&lt;Operation, Strategy&gt; strategies = new HashMap&lt;&gt;();\r\n    \r\n      @FunctionalInterface\r\n      interface Strategy {\r\n        Message execute(Entity entity);\r\n      }\r\n    \r\n      @PostConstruct\r\n      private void init() {\r\n        strategies.put(\r\n            Operation.FIRST_STRATEGY,\r\n            entity -&gt;\r\n                firstWay.process(entity.getId()));\r\n        strategies.put(\r\n            Operation.SECOND_STRATEGY,\r\n            entity -&gt;\r\n                secondWay.process(entity.getId()));\r\n      }\r\n    \r\n      public Message execute(Entity entity) {\r\n        Strategy strategy = strategies.get(entity.getOperation());\r\n    \r\n        if (Objects.isNull(strategy)) {\r\n          throw new TechnicalException(\r\n                  TechnicalException.NO_STRATEGY_OPERATION);\r\n        }\r\n        return strategy.execute(entity);\r\n      }\r\n    }","title":"Difference between Strategy pattern and Command pattern","body":"<p>The one of possible solutions for strategy pattern</p>\n<pre><code>@Service\n@RequiredArgsConstructor\npublic class StrategyService {\n\n  private final FirstWay firstWay;\n  private final SecondWay secondWay;\n\n  private final Map&lt;Operation, Strategy&gt; strategies = new HashMap&lt;&gt;();\n\n  @FunctionalInterface\n  interface Strategy {\n    Message execute(Entity entity);\n  }\n\n  @PostConstruct\n  private void init() {\n    strategies.put(\n        Operation.FIRST_STRATEGY,\n        entity -&gt;\n            firstWay.process(entity.getId()));\n    strategies.put(\n        Operation.SECOND_STRATEGY,\n        entity -&gt;\n            secondWay.process(entity.getId()));\n  }\n\n  public Message execute(Entity entity) {\n    Strategy strategy = strategies.get(entity.getOperation());\n\n    if (Objects.isNull(strategy)) {\n      throw new TechnicalException(\n              TechnicalException.NO_STRATEGY_OPERATION);\n    }\n    return strategy.execute(entity);\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":185198,"reputation":7184,"user_id":421753,"accept_rate":78,"display_name":"Krishna"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":49643,"favorite_count":0,"down_vote_count":1,"up_vote_count":114,"accepted_answer_id":4835013,"answer_count":7,"score":113,"last_activity_date":1700051664,"creation_date":1296272039,"question_id":4834979,"body_markdown":"What is the difference between the [Strategy pattern][1] and the [Command pattern][2]?  I am also looking for some examples in Java. \r\n\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Strategy_pattern\r\n  [2]: http://en.wikipedia.org/wiki/Command_pattern","title":"Difference between Strategy pattern and Command pattern","body":"<p>What is the difference between the <a href=\"http://en.wikipedia.org/wiki/Strategy_pattern\" rel=\"noreferrer\">Strategy pattern</a> and the <a href=\"http://en.wikipedia.org/wiki/Command_pattern\" rel=\"noreferrer\">Command pattern</a>?  I am also looking for some examples in Java. </p>\n"},{"tags":["java","libgdx","game-physics","box2d"],"answers":[{"tags":[],"owner":{"account_id":422872,"reputation":656,"user_id":801899,"display_name":"londonBadger"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700049187,"creation_date":1700049187,"answer_id":77487484,"question_id":77483385,"body_markdown":"You could check the x position of the ball on contact i.e. ballX &lt; minX+margin for left and ballX &gt;maxX-margin for right.\r\n","title":"How to know which side of a ChainShape is being collided with?","body":"<p>You could check the x position of the ball on contact i.e. ballX &lt; minX+margin for left and ballX &gt;maxX-margin for right.</p>\n"}],"owner":{"account_id":29723909,"reputation":23,"user_id":22780465,"display_name":"Copha"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":17,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1700051323,"creation_date":1699990672,"question_id":77483385,"body_markdown":"I&#39;m learning LibGDX and trying to use Box2D for collision and movement. I&#39;m making a simple Pong game. When the ball hits the left or right wall (i.e. the other side scores), I want the ball&#39;s body to be destroyed and replaced with a new one in the center of the screen. Obviously this should not happen when the ball hits the top or bottom.\r\n\r\nI have created a body with a ChainShape fixture to represent the game&#39;s border. This chain has 4 vertexes and forms a loop. I&#39;ve also created a ContactListener, where the collision between border and ball is handled. The question is: how can I trigger the desired behavior only when the left or right wall is involved in the collision?\r\n\r\nIt seems to me that somehow the left or right wall should be isolated, perhaps as an EdgeShape. But I can&#39;t find any way to do that. The Contact, Fixture and ChainShape all seem to have no relevant methods for this. I also can&#39;t find any info about this online.\r\n\r\nBelow is the code I currently have for the ContactListener:\r\n\r\n\r\n```\r\npublic final class CollisionListener implements ContactListener {\r\n  @Override\r\n  public void beginContact(Contact contact) {\r\n    var fixtureA = contact.getFixtureA();\r\n    var fixtureB = contact.getFixtureB();\r\n    \r\n    if (fixtureA.getUserData() != &quot;border&quot; &amp;&amp; fixtureB.getUserData() != &quot;border&quot;) {\r\n      return;\r\n    }\r\n\r\n    //TODO: Only trigger for left and right walls\r\n\r\n    var object = fixtureA.getUserData() == &quot;border&quot; ? fixtureB : fixtureA;\r\n    Entity entity = (Entity)object.getUserData();\r\n\r\n    // Logic for creating new body\r\n  }\r\n}\r\n```\r\n\r\nAnd the ChainShape:\r\n\r\n\r\n```\r\n  private void createBorders() {\r\n    var bodyDef = new BodyDef();\r\n    bodyDef.type = BodyType.StaticBody\r\n    bodyDef.position.set(0, 0);\r\n\r\n    var body = world.createBody(bodyDef);\r\n\r\n    var chain = new ChainShape();\r\n    chain.createLoop(\r\n      new Vector2[] {\r\n        new Vector2(Constants.VIEWPORT_MAX_X, Constants.VIEWPORT_MAX_Y),\r\n        new Vector2(Constants.VIEWPORT_MAX_X, Constants.VIEWPORT_MIN_Y),\r\n        new Vector2(Constants.VIEWPORT_MIN_X, Constants.VIEWPORT_MIN_Y),\r\n        new Vector2(Constants.VIEWPORT_MIN_X, Constants.VIEWPORT_MAX_Y)\r\n      }\r\n    );\r\n\r\n    body.createFixture(chain, 0f);\r\n    body.setUserData(&quot;border&quot;);\r\n    chain.dispose();\r\n  }\r\n```\r\n","title":"How to know which side of a ChainShape is being collided with?","body":"<p>I'm learning LibGDX and trying to use Box2D for collision and movement. I'm making a simple Pong game. When the ball hits the left or right wall (i.e. the other side scores), I want the ball's body to be destroyed and replaced with a new one in the center of the screen. Obviously this should not happen when the ball hits the top or bottom.</p>\n<p>I have created a body with a ChainShape fixture to represent the game's border. This chain has 4 vertexes and forms a loop. I've also created a ContactListener, where the collision between border and ball is handled. The question is: how can I trigger the desired behavior only when the left or right wall is involved in the collision?</p>\n<p>It seems to me that somehow the left or right wall should be isolated, perhaps as an EdgeShape. But I can't find any way to do that. The Contact, Fixture and ChainShape all seem to have no relevant methods for this. I also can't find any info about this online.</p>\n<p>Below is the code I currently have for the ContactListener:</p>\n<pre><code>public final class CollisionListener implements ContactListener {\n  @Override\n  public void beginContact(Contact contact) {\n    var fixtureA = contact.getFixtureA();\n    var fixtureB = contact.getFixtureB();\n    \n    if (fixtureA.getUserData() != &quot;border&quot; &amp;&amp; fixtureB.getUserData() != &quot;border&quot;) {\n      return;\n    }\n\n    //TODO: Only trigger for left and right walls\n\n    var object = fixtureA.getUserData() == &quot;border&quot; ? fixtureB : fixtureA;\n    Entity entity = (Entity)object.getUserData();\n\n    // Logic for creating new body\n  }\n}\n</code></pre>\n<p>And the ChainShape:</p>\n<pre><code>  private void createBorders() {\n    var bodyDef = new BodyDef();\n    bodyDef.type = BodyType.StaticBody\n    bodyDef.position.set(0, 0);\n\n    var body = world.createBody(bodyDef);\n\n    var chain = new ChainShape();\n    chain.createLoop(\n      new Vector2[] {\n        new Vector2(Constants.VIEWPORT_MAX_X, Constants.VIEWPORT_MAX_Y),\n        new Vector2(Constants.VIEWPORT_MAX_X, Constants.VIEWPORT_MIN_Y),\n        new Vector2(Constants.VIEWPORT_MIN_X, Constants.VIEWPORT_MIN_Y),\n        new Vector2(Constants.VIEWPORT_MIN_X, Constants.VIEWPORT_MAX_Y)\n      }\n    );\n\n    body.createFixture(chain, 0f);\n    body.setUserData(&quot;border&quot;);\n    chain.dispose();\n  }\n</code></pre>\n"},{"tags":["java","spring-boot","apache-poi"],"answers":[{"tags":[],"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1700050998,"creation_date":1700050998,"answer_id":77487674,"question_id":77487288,"body_markdown":"This has nothing to do with positioning the legend. This is done via `legend.setPosition(LegendPosition.BOTTOM);` which means legend is positioned at bottom of chart space and grows up to top. \r\n\r\nBut as often, there never is enough space. And so legend grows into the plot area to fit content in. \r\n\r\nTo avoid this, only possibility is to shrink the legend area size. That is similar to set plot area size, what you already do.\r\n\r\n\r\n    XSSFChart chart = ...\r\n\r\n    // set legend area size\r\n    if (!chart.getCTChart().getLegend().isSetLayout()) {\r\n      chart.getCTChart().getLegend().addNewLayout();\r\n    }\r\n    if (chart.getCTChart().getLegend().getLayout().isSetManualLayout()) {\r\n      chart.getCTChart().getLegend().getLayout().unsetManualLayout();\r\n    }\r\n    chart.getCTChart().getLegend().getLayout().addNewManualLayout();\r\n    chart.getCTChart().getLegend().getLayout().getManualLayout().addNewXMode().setVal(\r\n      org.openxmlformats.schemas.drawingml.x2006.chart.STLayoutMode.EDGE);\r\n    chart.getCTChart().getLegend().getLayout().getManualLayout().addNewYMode().setVal(\r\n      org.openxmlformats.schemas.drawingml.x2006.chart.STLayoutMode.EDGE);\r\n    chart.getCTChart().getLegend().getLayout().getManualLayout().addNewX().setVal(0.0); //0% from left\r\n    chart.getCTChart().getLegend().getLayout().getManualLayout().addNewY().setVal(0.70); //70% from top\r\n    chart.getCTChart().getLegend().getLayout().getManualLayout().addNewW().setVal(1.00); //100% width\r\n    chart.getCTChart().getLegend().getLayout().getManualLayout().addNewH().setVal(0.30); //30% height\r\n\r\n\r\nBut now the legend content will not more fit into the legend size.\r\n\r\nOne could set smaller font size for legend content, like so:\r\n\r\n    //set legend default font size\r\n    if (chart.getCTChart().getLegend().isSetTxPr()) {\r\n      chart.getCTChart().getLegend().unsetTxPr();\r\n    }\r\n    chart.getCTChart().getLegend().addNewTxPr();\r\n    chart.getCTChart().getLegend().getTxPr().addNewBodyPr();\r\n    chart.getCTChart().getLegend().getTxPr().addNewP();\r\n    chart.getCTChart().getLegend().getTxPr().getPArray(0).addNewPPr();\r\n    chart.getCTChart().getLegend().getTxPr().getPArray(0).getPPr().addNewDefRPr().setSz(600); // default font size 6pt\r\n\r\n\r\nBut this quickly leads to be the legend text impossible to read.\r\n\r\nThen the chart space must be set bigger by making anchor&#39;s `row2` bigger.","title":"How to reposition XDDFChartLegend legends in Apache poi chart","body":"<p>This has nothing to do with positioning the legend. This is done via <code>legend.setPosition(LegendPosition.BOTTOM);</code> which means legend is positioned at bottom of chart space and grows up to top.</p>\n<p>But as often, there never is enough space. And so legend grows into the plot area to fit content in.</p>\n<p>To avoid this, only possibility is to shrink the legend area size. That is similar to set plot area size, what you already do.</p>\n<pre><code>XSSFChart chart = ...\n\n// set legend area size\nif (!chart.getCTChart().getLegend().isSetLayout()) {\n  chart.getCTChart().getLegend().addNewLayout();\n}\nif (chart.getCTChart().getLegend().getLayout().isSetManualLayout()) {\n  chart.getCTChart().getLegend().getLayout().unsetManualLayout();\n}\nchart.getCTChart().getLegend().getLayout().addNewManualLayout();\nchart.getCTChart().getLegend().getLayout().getManualLayout().addNewXMode().setVal(\n  org.openxmlformats.schemas.drawingml.x2006.chart.STLayoutMode.EDGE);\nchart.getCTChart().getLegend().getLayout().getManualLayout().addNewYMode().setVal(\n  org.openxmlformats.schemas.drawingml.x2006.chart.STLayoutMode.EDGE);\nchart.getCTChart().getLegend().getLayout().getManualLayout().addNewX().setVal(0.0); //0% from left\nchart.getCTChart().getLegend().getLayout().getManualLayout().addNewY().setVal(0.70); //70% from top\nchart.getCTChart().getLegend().getLayout().getManualLayout().addNewW().setVal(1.00); //100% width\nchart.getCTChart().getLegend().getLayout().getManualLayout().addNewH().setVal(0.30); //30% height\n</code></pre>\n<p>But now the legend content will not more fit into the legend size.</p>\n<p>One could set smaller font size for legend content, like so:</p>\n<pre><code>//set legend default font size\nif (chart.getCTChart().getLegend().isSetTxPr()) {\n  chart.getCTChart().getLegend().unsetTxPr();\n}\nchart.getCTChart().getLegend().addNewTxPr();\nchart.getCTChart().getLegend().getTxPr().addNewBodyPr();\nchart.getCTChart().getLegend().getTxPr().addNewP();\nchart.getCTChart().getLegend().getTxPr().getPArray(0).addNewPPr();\nchart.getCTChart().getLegend().getTxPr().getPArray(0).getPPr().addNewDefRPr().setSz(600); // default font size 6pt\n</code></pre>\n<p>But this quickly leads to be the legend text impossible to read.</p>\n<p>Then the chart space must be set bigger by making anchor's <code>row2</code> bigger.</p>\n"}],"owner":{"account_id":14831756,"reputation":83,"user_id":10711074,"display_name":"raymax"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77487674,"answer_count":1,"score":0,"last_activity_date":1700050998,"creation_date":1700047248,"question_id":77487288,"body_markdown":"I am creating multiple doughnut charts using Apache POI. I face problems when the label String size is big and when more labels are added. In the Apache POI documentation, I found no method in XDDFChartLegend where the margin can be adjusted. I also want those labels to fit in the space allocated for the Legends, regardless of size.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/CN0CE.png\r\n\r\nIn the above picture, one can observe \r\n 1. When the legend&#39;s string size is big, then it overlays on the chart. Also, there are 10 legends. But only 8 are being displayed. \r\n 2. When The legends are small in string size, then all the legends are displayed.\r\n\r\n\r\n     \r\n        \r\n        public static XSSFChart createDoughnutChart(XSSFSheet sheet, String[] categories,Number[] values, String titleText, int col1, int row1, int col2, int row2) {\r\n        XSSFDrawing drawing = sheet.createDrawingPatriarch();\r\n        XSSFClientAnchor anchor = drawing.createAnchor(0, 0, 0, 0, col1, row1, col2, row2);\r\n\r\n        XSSFChart chart = drawing.createChart(anchor);\r\n        chart.setTitleText(titleText);\r\n        chart.setTitleOverlay(false);\r\n\r\n        XDDFChartLegend legend = chart.getOrAddLegend();\r\n        legend.setPosition(LegendPosition.BOTTOM);\r\n        legend.setOverlay(true);\r\n\r\n        //setting legend size\r\n        XDDFTextBody legendTextBody = new XDDFTextBody(legend);\r\n        legendTextBody.getXmlObject().addNewBodyPr();\r\n        legendTextBody.addNewParagraph().addDefaultRunProperties().setFontSize(6d);\r\n        legend.setTextBody(legendTextBody);\r\n\r\n\r\n        XDDFDataSource&lt;String&gt; cat = XDDFDataSourcesFactory.fromArray(categories);\r\n        XDDFNumericalDataSource&lt;Number&gt; val = XDDFDataSourcesFactory.fromArray(values);\r\n        XDDFDoughnutChartData data = (XDDFDoughnutChartData)chart.createData(ChartTypes.DOUGHNUT, null, null);\r\n        data.setVaryColors(false);\r\n        data.setHoleSize(50);\r\n        XDDFChartData.Series series = data.addSeries(cat, val);\r\n\r\n        chart.plot(data);\r\n\r\n        // Do not auto delete the title; is necessary for showing title in Calc\r\n        if (chart.getCTChart().getAutoTitleDeleted() == null) chart.getCTChart().addNewAutoTitleDeleted();\r\n        chart.getCTChart().getAutoTitleDeleted().setVal(false);\r\n\r\n        // Data point colors; is necessary for showing data points in Calc\r\n        int pointCount = series.getCategoryData().getPointCount();\r\n        for (int p = 0; p &lt; pointCount; p++) {\r\n            chart.getCTChart().getPlotArea().getDoughnutChartArray(0).getSerArray(0).addNewDPt().addNewIdx().setVal(p);\r\n            chart.getCTChart().getPlotArea().getDoughnutChartArray(0).getSerArray(0).getDPtArray(p)\r\n                    .addNewSpPr().addNewSolidFill().addNewSrgbClr().setVal(XlsxService.getColor(p));\r\n        }\r\n\r\n        // Add data labels\r\n        if (!chart.getCTChart().getPlotArea().getDoughnutChartArray(0).getSerArray(0).isSetDLbls()) {\r\n            chart.getCTChart().getPlotArea().getDoughnutChartArray(0).getSerArray(0).addNewDLbls();\r\n        }\r\n        chart.getCTChart().getPlotArea().getDoughnutChartArray(0).getSerArray(0).getDLbls().addNewShowVal().setVal(true);\r\n        chart.getCTChart().getPlotArea().getDoughnutChartArray(0).getSerArray(0).getDLbls().addNewShowSerName().setVal(false);\r\n        chart.getCTChart().getPlotArea().getDoughnutChartArray(0).getSerArray(0).getDLbls().addNewShowCatName().setVal(false);\r\n        chart.getCTChart().getPlotArea().getDoughnutChartArray(0).getSerArray(0).getDLbls().addNewShowPercent().setVal(false);\r\n        chart.getCTChart().getPlotArea().getDoughnutChartArray(0).getSerArray(0).getDLbls().addNewShowLegendKey().setVal(false);\r\n\r\n        // chart area (chartspace) without border line\r\n        chart.getCTChartSpace().addNewSpPr().addNewLn().addNewNoFill();\r\n        // changing background color\r\n        if (chart.getCTChartSpace().getSpPr() == null) chart.getCTChartSpace().addNewSpPr();\r\n        if (chart.getCTChartSpace().getSpPr().isSetSolidFill()) chart.getCTChartSpace().getSpPr().unsetSolidFill();\r\n        chart.getCTChartSpace().getSpPr().addNewSolidFill().addNewSrgbClr().setVal(new byte[]{(byte)242, (byte)242, (byte)242});\r\n        // set plot area size\r\n        if (!chart.getCTChart().getPlotArea().isSetLayout()) {\r\n            chart.getCTChart().getPlotArea().addNewLayout();\r\n        }\r\n        if (chart.getCTChart().getPlotArea().getLayout().isSetManualLayout()) {\r\n            chart.getCTChart().getPlotArea().getLayout().unsetManualLayout();\r\n        }\r\n        chart.getCTChart().getPlotArea().getLayout().addNewManualLayout();\r\n        chart.getCTChart().getPlotArea().getLayout().getManualLayout().addNewLayoutTarget().setVal(\r\n                org.openxmlformats.schemas.drawingml.x2006.chart.STLayoutTarget.INNER);\r\n        chart.getCTChart().getPlotArea().getLayout().getManualLayout().addNewXMode().setVal(\r\n                org.openxmlformats.schemas.drawingml.x2006.chart.STLayoutMode.EDGE);\r\n        chart.getCTChart().getPlotArea().getLayout().getManualLayout().addNewYMode().setVal(\r\n                org.openxmlformats.schemas.drawingml.x2006.chart.STLayoutMode.EDGE);\r\n        chart.getCTChart().getPlotArea().getLayout().getManualLayout().addNewX().setVal(0.10); //10% from left\r\n        chart.getCTChart().getPlotArea().getLayout().getManualLayout().addNewY().setVal(0.10); //10% from top\r\n        chart.getCTChart().getPlotArea().getLayout().getManualLayout().addNewW().setVal(0.80); //80% width\r\n        chart.getCTChart().getPlotArea().getLayout().getManualLayout().addNewH().setVal(0.60); //60% height\r\n\r\n        return chart;\r\n    }\r\n\r\n","title":"How to reposition XDDFChartLegend legends in Apache poi chart","body":"<p>I am creating multiple doughnut charts using Apache POI. I face problems when the label String size is big and when more labels are added. In the Apache POI documentation, I found no method in XDDFChartLegend where the margin can be adjusted. I also want those labels to fit in the space allocated for the Legends, regardless of size.</p>\n<p><a href=\"https://i.stack.imgur.com/CN0CE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CN0CE.png\" alt=\"enter image description here\" /></a></p>\n<p>In the above picture, one can observe</p>\n<ol>\n<li><p>When the legend's string size is big, then it overlays on the chart. Also, there are 10 legends. But only 8 are being displayed.</p>\n</li>\n<li><p>When The legends are small in string size, then all the legends are displayed.</p>\n<pre><code>public static XSSFChart createDoughnutChart(XSSFSheet sheet, String[] categories,Number[] values, String titleText, int col1, int row1, int col2, int row2) {\nXSSFDrawing drawing = sheet.createDrawingPatriarch();\nXSSFClientAnchor anchor = drawing.createAnchor(0, 0, 0, 0, col1, row1, col2, row2);\n\nXSSFChart chart = drawing.createChart(anchor);\nchart.setTitleText(titleText);\nchart.setTitleOverlay(false);\n\nXDDFChartLegend legend = chart.getOrAddLegend();\nlegend.setPosition(LegendPosition.BOTTOM);\nlegend.setOverlay(true);\n\n//setting legend size\nXDDFTextBody legendTextBody = new XDDFTextBody(legend);\nlegendTextBody.getXmlObject().addNewBodyPr();\nlegendTextBody.addNewParagraph().addDefaultRunProperties().setFontSize(6d);\nlegend.setTextBody(legendTextBody);\n\n\nXDDFDataSource&lt;String&gt; cat = XDDFDataSourcesFactory.fromArray(categories);\nXDDFNumericalDataSource&lt;Number&gt; val = XDDFDataSourcesFactory.fromArray(values);\nXDDFDoughnutChartData data = (XDDFDoughnutChartData)chart.createData(ChartTypes.DOUGHNUT, null, null);\ndata.setVaryColors(false);\ndata.setHoleSize(50);\nXDDFChartData.Series series = data.addSeries(cat, val);\n\nchart.plot(data);\n\n// Do not auto delete the title; is necessary for showing title in Calc\nif (chart.getCTChart().getAutoTitleDeleted() == null) chart.getCTChart().addNewAutoTitleDeleted();\nchart.getCTChart().getAutoTitleDeleted().setVal(false);\n\n// Data point colors; is necessary for showing data points in Calc\nint pointCount = series.getCategoryData().getPointCount();\nfor (int p = 0; p &lt; pointCount; p++) {\n    chart.getCTChart().getPlotArea().getDoughnutChartArray(0).getSerArray(0).addNewDPt().addNewIdx().setVal(p);\n    chart.getCTChart().getPlotArea().getDoughnutChartArray(0).getSerArray(0).getDPtArray(p)\n            .addNewSpPr().addNewSolidFill().addNewSrgbClr().setVal(XlsxService.getColor(p));\n}\n\n// Add data labels\nif (!chart.getCTChart().getPlotArea().getDoughnutChartArray(0).getSerArray(0).isSetDLbls()) {\n    chart.getCTChart().getPlotArea().getDoughnutChartArray(0).getSerArray(0).addNewDLbls();\n}\nchart.getCTChart().getPlotArea().getDoughnutChartArray(0).getSerArray(0).getDLbls().addNewShowVal().setVal(true);\nchart.getCTChart().getPlotArea().getDoughnutChartArray(0).getSerArray(0).getDLbls().addNewShowSerName().setVal(false);\nchart.getCTChart().getPlotArea().getDoughnutChartArray(0).getSerArray(0).getDLbls().addNewShowCatName().setVal(false);\nchart.getCTChart().getPlotArea().getDoughnutChartArray(0).getSerArray(0).getDLbls().addNewShowPercent().setVal(false);\nchart.getCTChart().getPlotArea().getDoughnutChartArray(0).getSerArray(0).getDLbls().addNewShowLegendKey().setVal(false);\n\n// chart area (chartspace) without border line\nchart.getCTChartSpace().addNewSpPr().addNewLn().addNewNoFill();\n// changing background color\nif (chart.getCTChartSpace().getSpPr() == null) chart.getCTChartSpace().addNewSpPr();\nif (chart.getCTChartSpace().getSpPr().isSetSolidFill()) chart.getCTChartSpace().getSpPr().unsetSolidFill();\nchart.getCTChartSpace().getSpPr().addNewSolidFill().addNewSrgbClr().setVal(new byte[]{(byte)242, (byte)242, (byte)242});\n// set plot area size\nif (!chart.getCTChart().getPlotArea().isSetLayout()) {\n    chart.getCTChart().getPlotArea().addNewLayout();\n}\nif (chart.getCTChart().getPlotArea().getLayout().isSetManualLayout()) {\n    chart.getCTChart().getPlotArea().getLayout().unsetManualLayout();\n}\nchart.getCTChart().getPlotArea().getLayout().addNewManualLayout();\nchart.getCTChart().getPlotArea().getLayout().getManualLayout().addNewLayoutTarget().setVal(\n        org.openxmlformats.schemas.drawingml.x2006.chart.STLayoutTarget.INNER);\nchart.getCTChart().getPlotArea().getLayout().getManualLayout().addNewXMode().setVal(\n        org.openxmlformats.schemas.drawingml.x2006.chart.STLayoutMode.EDGE);\nchart.getCTChart().getPlotArea().getLayout().getManualLayout().addNewYMode().setVal(\n        org.openxmlformats.schemas.drawingml.x2006.chart.STLayoutMode.EDGE);\nchart.getCTChart().getPlotArea().getLayout().getManualLayout().addNewX().setVal(0.10); //10% from left\nchart.getCTChart().getPlotArea().getLayout().getManualLayout().addNewY().setVal(0.10); //10% from top\nchart.getCTChart().getPlotArea().getLayout().getManualLayout().addNewW().setVal(0.80); //80% width\nchart.getCTChart().getPlotArea().getLayout().getManualLayout().addNewH().setVal(0.60); //60% height\n\nreturn chart;\n</code></pre>\n<p>}</p>\n</li>\n</ol>\n"},{"tags":["java","spring-boot","spring-security","spring-data-jpa"],"owner":{"account_id":9009497,"reputation":21,"user_id":22851473,"display_name":"Prototype"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1700050991,"creation_date":1700050991,"question_id":77487673,"body_markdown":"I need to get the current profile of an authorized user.\r\n\r\n`build.gradle`:\r\n```gradle\r\nplugins {\r\n\tid &#39;java&#39;\r\n\tid &#39;org.springframework.boot&#39; version &#39;3.1.5&#39;\r\n\tid &#39;io.spring.dependency-management&#39; version &#39;1.1.3&#39;\r\n}\r\n\r\njava {\r\n\tsourceCompatibility = &#39;21&#39;\r\n}\r\n\r\nconfigurations {\r\n\tcompileOnly {\r\n\t\textendsFrom annotationProcessor\r\n\t}\r\n}\r\n\r\nrepositories {\r\n\tmavenCentral()\r\n}\r\n\r\ndependencies {\r\n\timplementation &#39;org.springframework.boot:spring-boot-starter-batch&#39;\r\n\timplementation &#39;org.springframework.boot:spring-boot-starter-data-jpa&#39;\r\n\timplementation &#39;org.springframework.boot:spring-boot-starter-security&#39;\r\n\timplementation &#39;org.springframework.boot:spring-boot-starter-validation&#39;\r\n\timplementation &#39;org.springframework.boot:spring-boot-starter-web&#39;\r\n\timplementation &#39;org.springframework.session:spring-session-jdbc&#39;\r\n\r\n\timplementation &#39;org.flywaydb:flyway-core&#39;\r\n\timplementation &#39;org.modelmapper:modelmapper:3.2.0&#39;\r\n\timplementation &#39;org.springdoc:springdoc-openapi-starter-webmvc-ui:2.2.0&#39;\r\n\r\n\tcompileOnly &#39;org.projectlombok:lombok&#39;\r\n\tdevelopmentOnly &#39;org.springframework.boot:spring-boot-devtools&#39;\r\n\t// developmentOnly &#39;org.springframework.boot:spring-boot-docker-compose&#39;\r\n\truntimeOnly &#39;org.postgresql:postgresql&#39;\r\n\tannotationProcessor &#39;org.springframework.boot:spring-boot-configuration-processor&#39;\r\n\tannotationProcessor &#39;org.projectlombok:lombok&#39;\r\n\ttestImplementation &#39;org.springframework.boot:spring-boot-starter-test&#39;\r\n\ttestImplementation &#39;org.springframework.batch:spring-batch-test&#39;\r\n\ttestImplementation &#39;org.springframework.security:spring-security-test&#39;\r\n}\r\n```\r\n\r\nThere is a controller for this:\r\n\r\n\r\n```java\r\n@RestController\r\npublic class UserController {\r\n\r\n    @Operation(summary = &quot;Get user profile&quot;)\r\n    @PreAuthorize(&quot;hasRole(&#39;USER&#39;)&quot;)\r\n    @GetMapping(path = &quot;/profile&quot;, produces = MediaType.APPLICATION_JSON_VALUE)\r\n    public ResponseEntity&lt;UserDTO&gt; profile(@AuthenticationPrincipal User user) {\r\n        System.out.println(&quot;user.getId() = &quot; + user.getId()); // always null\r\n        return ResponseEntity.ok(mapper.map(user, UserDTO.class));\r\n    }\r\n\r\n}\r\n```\r\n\r\nconsole output always:\r\n`user.getId() = null`\r\n\r\ntable `users`:\r\n\r\n[![table users](https://i.stack.imgur.com/Ko3Ar.png)](https://i.stack.imgur.com/Ko3Ar.png)\r\n\r\n`User`:\r\n```java\r\n@Entity(name = &quot;user&quot;)\r\n@Table(name = &quot;users&quot;)\r\n@Getter\r\n@Setter\r\npublic class User extends BaseEntity&lt;Integer&gt; implements UserDetails {\r\n\r\n    @Column(name = &quot;email&quot;, nullable = false, unique = true)\r\n    private String email;\r\n\r\n    @Column(name = &quot;password&quot;, nullable = false)\r\n    private String password;\r\n\r\n    @Column(name = &quot;name&quot;, nullable = false)\r\n    private String name;\r\n\r\n    @Column(name = &quot;phone&quot;)\r\n    private String phone;\r\n\r\n    @Column(name = &quot;enabled&quot;, nullable = false)\r\n    private boolean enabled;\r\n\r\n    @ManyToMany(fetch = FetchType.EAGER)\r\n    @JoinTable(\r\n            name = &quot;users_roles&quot;,\r\n            joinColumns = @JoinColumn(name = &quot;user_id&quot;, referencedColumnName = &quot;id&quot;),\r\n            inverseJoinColumns = @JoinColumn(name = &quot;role_id&quot;, referencedColumnName = &quot;id&quot;)\r\n    )\r\n    private Collection&lt;Role&gt; roles;\r\n\r\n    @Override\r\n    public String getUsername() {\r\n        return this.email;\r\n    }\r\n\r\n    @Override\r\n    public Collection&lt;Role&gt; getAuthorities() {\r\n        return this.roles;\r\n    }\r\n\r\n    @Override\r\n    public boolean isAccountNonExpired() {\r\n        return true;\r\n    }\r\n\r\n    @Override\r\n    public boolean isAccountNonLocked() {\r\n        return true;\r\n    }\r\n\r\n    @Override\r\n    public boolean isCredentialsNonExpired() {\r\n        return true;\r\n    }\r\n\r\n}\r\n```\r\n\r\n`BaseEntity`:\r\n```java\r\n@Getter\r\n@Setter\r\n@MappedSuperclass\r\npublic abstract class BaseEntity&lt;ID extends Serializable&gt; {\r\n\r\n    @Id\r\n    @Column(name = &quot;id&quot;)\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    @Access(AccessType.PROPERTY)\r\n    private ID id;\r\n\r\n    // generated equals and hashCode with JPA Buddy ommited\r\n\r\n}\r\n```\r\n\r\n\r\nI tried to get rid of `@MappedSuperclass`, removed inheritance from BaseEntity and created an id field by analogy from BaseEntity and everything worked as it should.\r\nWhat could be the problem when using `@MappedSuperclass`?","title":"@AuthenticationPrincipal does not fill fields from the base entity @MappedSuperclass","body":"<p>I need to get the current profile of an authorized user.</p>\n<p><code>build.gradle</code>:</p>\n<pre><code>plugins {\n    id 'java'\n    id 'org.springframework.boot' version '3.1.5'\n    id 'io.spring.dependency-management' version '1.1.3'\n}\n\njava {\n    sourceCompatibility = '21'\n}\n\nconfigurations {\n    compileOnly {\n        extendsFrom annotationProcessor\n    }\n}\n\nrepositories {\n    mavenCentral()\n}\n\ndependencies {\n    implementation 'org.springframework.boot:spring-boot-starter-batch'\n    implementation 'org.springframework.boot:spring-boot-starter-data-jpa'\n    implementation 'org.springframework.boot:spring-boot-starter-security'\n    implementation 'org.springframework.boot:spring-boot-starter-validation'\n    implementation 'org.springframework.boot:spring-boot-starter-web'\n    implementation 'org.springframework.session:spring-session-jdbc'\n\n    implementation 'org.flywaydb:flyway-core'\n    implementation 'org.modelmapper:modelmapper:3.2.0'\n    implementation 'org.springdoc:springdoc-openapi-starter-webmvc-ui:2.2.0'\n\n    compileOnly 'org.projectlombok:lombok'\n    developmentOnly 'org.springframework.boot:spring-boot-devtools'\n    // developmentOnly 'org.springframework.boot:spring-boot-docker-compose'\n    runtimeOnly 'org.postgresql:postgresql'\n    annotationProcessor 'org.springframework.boot:spring-boot-configuration-processor'\n    annotationProcessor 'org.projectlombok:lombok'\n    testImplementation 'org.springframework.boot:spring-boot-starter-test'\n    testImplementation 'org.springframework.batch:spring-batch-test'\n    testImplementation 'org.springframework.security:spring-security-test'\n}\n</code></pre>\n<p>There is a controller for this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@RestController\npublic class UserController {\n\n    @Operation(summary = &quot;Get user profile&quot;)\n    @PreAuthorize(&quot;hasRole('USER')&quot;)\n    @GetMapping(path = &quot;/profile&quot;, produces = MediaType.APPLICATION_JSON_VALUE)\n    public ResponseEntity&lt;UserDTO&gt; profile(@AuthenticationPrincipal User user) {\n        System.out.println(&quot;user.getId() = &quot; + user.getId()); // always null\n        return ResponseEntity.ok(mapper.map(user, UserDTO.class));\n    }\n\n}\n</code></pre>\n<p>console output always:\n<code>user.getId() = null</code></p>\n<p>table <code>users</code>:</p>\n<p><a href=\"https://i.stack.imgur.com/Ko3Ar.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Ko3Ar.png\" alt=\"table users\" /></a></p>\n<p><code>User</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity(name = &quot;user&quot;)\n@Table(name = &quot;users&quot;)\n@Getter\n@Setter\npublic class User extends BaseEntity&lt;Integer&gt; implements UserDetails {\n\n    @Column(name = &quot;email&quot;, nullable = false, unique = true)\n    private String email;\n\n    @Column(name = &quot;password&quot;, nullable = false)\n    private String password;\n\n    @Column(name = &quot;name&quot;, nullable = false)\n    private String name;\n\n    @Column(name = &quot;phone&quot;)\n    private String phone;\n\n    @Column(name = &quot;enabled&quot;, nullable = false)\n    private boolean enabled;\n\n    @ManyToMany(fetch = FetchType.EAGER)\n    @JoinTable(\n            name = &quot;users_roles&quot;,\n            joinColumns = @JoinColumn(name = &quot;user_id&quot;, referencedColumnName = &quot;id&quot;),\n            inverseJoinColumns = @JoinColumn(name = &quot;role_id&quot;, referencedColumnName = &quot;id&quot;)\n    )\n    private Collection&lt;Role&gt; roles;\n\n    @Override\n    public String getUsername() {\n        return this.email;\n    }\n\n    @Override\n    public Collection&lt;Role&gt; getAuthorities() {\n        return this.roles;\n    }\n\n    @Override\n    public boolean isAccountNonExpired() {\n        return true;\n    }\n\n    @Override\n    public boolean isAccountNonLocked() {\n        return true;\n    }\n\n    @Override\n    public boolean isCredentialsNonExpired() {\n        return true;\n    }\n\n}\n</code></pre>\n<p><code>BaseEntity</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Getter\n@Setter\n@MappedSuperclass\npublic abstract class BaseEntity&lt;ID extends Serializable&gt; {\n\n    @Id\n    @Column(name = &quot;id&quot;)\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Access(AccessType.PROPERTY)\n    private ID id;\n\n    // generated equals and hashCode with JPA Buddy ommited\n\n}\n</code></pre>\n<p>I tried to get rid of <code>@MappedSuperclass</code>, removed inheritance from BaseEntity and created an id field by analogy from BaseEntity and everything worked as it should.\nWhat could be the problem when using <code>@MappedSuperclass</code>?</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1700050759,"post_id":77487599,"comment_id":136606728,"body_markdown":"Better: `if(!dir.mkdir()) return;` Display a toast too to inform the user. And mkdirs() does not throw. It returns true or false.","body":"Better: <code>if(!dir.mkdir()) return;</code> Display a toast too to inform the user. And mkdirs() does not throw. It returns true or false."}],"answers":[{"tags":[],"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700050602,"creation_date":1700050602,"answer_id":77487630,"question_id":77487599,"body_markdown":"You cannot create files and directories in root of external storage for Android 11+ devices.\r\n\r\nInstead use one of the public directories that are already there.\r\n\r\nLike DCIM, Pictures, Documents,...","title":"Unable to create a directory or file for my app even though the permissions are there","body":"<p>You cannot create files and directories in root of external storage for Android 11+ devices.</p>\n<p>Instead use one of the public directories that are already there.</p>\n<p>Like DCIM, Pictures, Documents,...</p>\n"}],"owner":{"account_id":416909,"reputation":5244,"user_id":792589,"accept_rate":72,"display_name":"aarelovich"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1700050602,"creation_date":1700050309,"question_id":77487599,"body_markdown":"I have an App that I made years ago. Recently I just recompiled it with a very few changes just so that I could change the target SDK and still be listed in the play store.\r\n\r\nAs it turns out this fundamentally broke the app in certain phones including my own.I tested it on another phone before I uploaded it and it worked fine (Android Version 8.1.0). My phone has Android 11 (where it doesn&#39;t work). \r\n\r\nThe problem seems to be in the ability to create and read files in the internal storage and whole point of the app is to maintain a single file. \r\n\r\nHere is a function that I made that attemps to create a directory. This is just a test function that I call on creation, it wasn&#39;t part of the original app:\r\n\r\n     public static void AttemptDirCreate(){\r\n        String dirname = Environment.getExternalStorageDirectory().toString() + &quot;/this_is_a_test&quot;;\r\n        File dir = new File(dirname);\r\n\r\n        System.err.println(&quot;Attempting to create directory: &#39;&quot; + dirname + &quot;&#39;&quot;);\r\n\r\n        boolean make_result = false;\r\n        if (!dir.exists()) {\r\n            try {\r\n                make_result = dir.mkdir();\r\n            }\r\n            catch (SecurityException se) {\r\n                System.err.println(&quot;ERROR. Could not make dir. Reason: &quot; + se.getMessage());\r\n            }\r\n        }\r\n\r\n        if (make_result){\r\n            System.err.println(&quot;MKDir result is true&quot;);\r\n        }\r\n        else {\r\n            System.err.println(&quot;MKDir result is false&quot;);\r\n        }\r\n\r\n        if (dir.exists()){\r\n            System.err.println(&quot;Dir has been created&quot;);\r\n        }\r\n        else {\r\n            System.err.println(&quot;Was unable to create dir&quot;);\r\n        }\r\n\r\n    }\r\n\r\nThe problem is that directory is not created and NO exception is thrown. When I go into app info I see the permissions for Files and Media.\r\n\r\nThe path where the directory is being tried to be created is: &#39;/storage/emulated/0/this_is_a_test&#39; \r\n\r\nWhich as far as I cant tell is the correct path. The app did ask me for permissions when first installed.\r\n\r\nSo why can&#39;t it create the directory? How can I find out the issue and fix it?\r\n\r\nJust to clarify, this exact same function WORKS on Android 8.1.0, but it does nto work on Android 11. Not sure, what the cutoff point is. \r\n","title":"Unable to create a directory or file for my app even though the permissions are there","body":"<p>I have an App that I made years ago. Recently I just recompiled it with a very few changes just so that I could change the target SDK and still be listed in the play store.</p>\n<p>As it turns out this fundamentally broke the app in certain phones including my own.I tested it on another phone before I uploaded it and it worked fine (Android Version 8.1.0). My phone has Android 11 (where it doesn't work).</p>\n<p>The problem seems to be in the ability to create and read files in the internal storage and whole point of the app is to maintain a single file.</p>\n<p>Here is a function that I made that attemps to create a directory. This is just a test function that I call on creation, it wasn't part of the original app:</p>\n<pre><code> public static void AttemptDirCreate(){\n    String dirname = Environment.getExternalStorageDirectory().toString() + &quot;/this_is_a_test&quot;;\n    File dir = new File(dirname);\n\n    System.err.println(&quot;Attempting to create directory: '&quot; + dirname + &quot;'&quot;);\n\n    boolean make_result = false;\n    if (!dir.exists()) {\n        try {\n            make_result = dir.mkdir();\n        }\n        catch (SecurityException se) {\n            System.err.println(&quot;ERROR. Could not make dir. Reason: &quot; + se.getMessage());\n        }\n    }\n\n    if (make_result){\n        System.err.println(&quot;MKDir result is true&quot;);\n    }\n    else {\n        System.err.println(&quot;MKDir result is false&quot;);\n    }\n\n    if (dir.exists()){\n        System.err.println(&quot;Dir has been created&quot;);\n    }\n    else {\n        System.err.println(&quot;Was unable to create dir&quot;);\n    }\n\n}\n</code></pre>\n<p>The problem is that directory is not created and NO exception is thrown. When I go into app info I see the permissions for Files and Media.</p>\n<p>The path where the directory is being tried to be created is: '/storage/emulated/0/this_is_a_test'</p>\n<p>Which as far as I cant tell is the correct path. The app did ask me for permissions when first installed.</p>\n<p>So why can't it create the directory? How can I find out the issue and fix it?</p>\n<p>Just to clarify, this exact same function WORKS on Android 8.1.0, but it does nto work on Android 11. Not sure, what the cutoff point is.</p>\n"},{"tags":["java","collections"],"comments":[{"owner":{"account_id":221272,"reputation":6281,"user_id":479156,"accept_rate":92,"display_name":"Ivar"},"score":1,"creation_date":1700046882,"post_id":77487187,"comment_id":136606051,"body_markdown":"If you check the `node(int)` implementation in that same class you have your answer. It will start at either the first node, or last node (depending on if the index you&#39;re looking for is closer to the start or to the end) and then it loops until it finds the index you are requesting.","body":"If you check the <code>node(int)</code> implementation in that same class you have your answer. It will start at either the first node, or last node (depending on if the index you&#39;re looking for is closer to the start or to the end) and then it loops until it finds the index you are requesting."},{"owner":{"account_id":13758071,"reputation":61,"user_id":9928438,"display_name":"Er Rahul Raj"},"score":0,"creation_date":1700047078,"post_id":77487187,"comment_id":136606082,"body_markdown":"Does that means, Linked List internally uses Array concept ?","body":"Does that means, Linked List internally uses Array concept ?"},{"owner":{"account_id":221272,"reputation":6281,"user_id":479156,"accept_rate":92,"display_name":"Ivar"},"score":3,"creation_date":1700047172,"post_id":77487187,"comment_id":136606100,"body_markdown":"No, it does not.","body":"No, it does not."}],"answers":[{"tags":[],"owner":{"account_id":18586978,"reputation":2220,"user_id":15000097,"display_name":"Georgii Lvov"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1700047067,"creation_date":1700047067,"answer_id":77487270,"question_id":77487187,"body_markdown":"This index is not like the array index in `ArrayList`\r\n.\r\nIn a `LinkedList`, the get by index method under the hood is just a **for loop**, and since the list is ordered, it will simply return the element you need by looping through elements of the list.\r\n\r\nLook inside `LinkedList` for the `Node&lt;E&gt; node(int index)` method, which is called in the `get(int index)` method.","title":"Accessing Element In linkedList","body":"<p>This index is not like the array index in <code>ArrayList</code>\n.\nIn a <code>LinkedList</code>, the get by index method under the hood is just a <strong>for loop</strong>, and since the list is ordered, it will simply return the element you need by looping through elements of the list.</p>\n<p>Look inside <code>LinkedList</code> for the <code>Node&lt;E&gt; node(int index)</code> method, which is called in the <code>get(int index)</code> method.</p>\n"}],"owner":{"account_id":13758071,"reputation":61,"user_id":9928438,"display_name":"Er Rahul Raj"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":162,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"closed_date":1700050484,"accepted_answer_id":77487270,"answer_count":1,"score":-1,"last_activity_date":1700050556,"creation_date":1700046203,"question_id":77487187,"body_markdown":"    LinkedList&lt;String&gt; linkedList = new LinkedList&lt;&gt;();\r\n\r\n    linkedList.add(&quot;Java&quot;);\r\n    linkedList.add(&quot;Python&quot;);\r\n    linkedList.get(1); \r\n\r\nInternal code flows for get\r\n\r\n    public E get(int index) {\r\n        checkElementIndex(index);\r\n        return node(index).item;\r\n    }\r\n\r\n    private void checkElementIndex(int index) {\r\n         if (!isElementIndex(index))\r\n         throw new IndexOutOfBoundsException(outOfBoundsMsg(index));\r\n    }\r\n\r\nI am calling, linkedList.get(1); to get the second element in an linked list. My question is, uf LinkedList internally created nodes for each element, then how does an indexing concept come into consideration for accessing the element (`linkedList.get(1)`)?","title":"Accessing Element In linkedList","body":"<pre><code>LinkedList&lt;String&gt; linkedList = new LinkedList&lt;&gt;();\n\nlinkedList.add(&quot;Java&quot;);\nlinkedList.add(&quot;Python&quot;);\nlinkedList.get(1); \n</code></pre>\n<p>Internal code flows for get</p>\n<pre><code>public E get(int index) {\n    checkElementIndex(index);\n    return node(index).item;\n}\n\nprivate void checkElementIndex(int index) {\n     if (!isElementIndex(index))\n     throw new IndexOutOfBoundsException(outOfBoundsMsg(index));\n}\n</code></pre>\n<p>I am calling, linkedList.get(1); to get the second element in an linked list. My question is, uf LinkedList internally created nodes for each element, then how does an indexing concept come into consideration for accessing the element (<code>linkedList.get(1)</code>)?</p>\n"},{"tags":["java","spring","spring-boot","testing","spring-data-jpa"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":2,"creation_date":1668597406,"post_id":74459521,"comment_id":131442675,"body_markdown":"do you understand what mocking is? It seems that&#39;s where your confusion starts","body":"do you understand what mocking is? It seems that&#39;s where your confusion starts"},{"owner":{"account_id":23310329,"reputation":41,"user_id":17389688,"display_name":"leo___"},"score":0,"creation_date":1668597511,"post_id":74459521,"comment_id":131442709,"body_markdown":"you mock something when is needed for a complex object and has already been tested like a repository","body":"you mock something when is needed for a complex object and has already been tested like a repository"},{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1668597559,"post_id":74459521,"comment_id":131442728,"body_markdown":"yes, but do you actually understand what mocking is? Not when to apply it.","body":"yes, but do you actually understand what mocking is? Not when to apply it."},{"owner":{"account_id":23310329,"reputation":41,"user_id":17389688,"display_name":"leo___"},"score":0,"creation_date":1668597825,"post_id":74459521,"comment_id":131442810,"body_markdown":"simulated object that simulate the behavior of an object (i think) but are not the real one","body":"simulated object that simulate the behavior of an object (i think) but are not the real one"},{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":1,"creation_date":1668599558,"post_id":74459521,"comment_id":131443370,"body_markdown":"indeed, keyword: simulated; You don&#39;t write (save) to the db, you merely simulate. so: it&#39;s quite normal that nothing is saved. You should not call your repository from within your test, you just need to tell your mock how to behave when it is called within your service","body":"indeed, keyword: simulated; You don&#39;t write (save) to the db, you merely simulate. so: it&#39;s quite normal that nothing is saved. You should not call your repository from within your test, you just need to tell your mock how to behave when it is called within your service"}],"answers":[{"tags":[],"owner":{"account_id":26555431,"reputation":558,"user_id":20184128,"display_name":"berse2212"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1700050469,"creation_date":1668600077,"answer_id":74460108,"question_id":74459521,"body_markdown":"A mock is just a mock. It&#39;s never actually doing something. It just can behave like a real thing, but you have to tell the mock how to do it.\r\n\r\nSo if you mock the UserRepository and try to save something nothing will happen. Because again, a mock never actually does something. The advantage of this is that you don&#39;t actually need the whole infrastructure to unit test a tiny method. Additionally the test gets independent of data. What you can do now is return some data if some method is called.\r\n\r\nIn your case, you don&#39;t need a whole database to test the functionality of the UserService. Thus mocking the repository is a good option. Now since it&#39;s a mock you have to tell the mock how to behave for your test case:\r\n\r\n    @Test\r\n    void itShouldLoadUsernameByName() {\r\n        AppUser appUser = new AppUser(\r\n                ApplicationRole.USER,\r\n                &quot;leonardo&quot;,\r\n                &quot;rossi&quot;,\r\n                &quot;leo__&quot;,\r\n                &quot;a@gmail.com&quot;,\r\n                &quot;password&quot;\r\n        );\r\n\r\n\t\twhen(standortRepository.searchByUserName(any())).thenReturn(appUser);\r\n    \r\n        userService.loadUserByUsername(appUser.getUsername());\r\n\r\n        //More expectations ...\r\n\r\n        verify(repository).searchByUserName(appUser.getUsername());    \r\n    }\r\n\r\nNow what I have done is to tell the mock it should return the appUser, when the Method `searchByUserName` is called.\r\n\r\nP.s. these are the static imports I used:\r\n\r\n    import static org.mockito.ArgumentMatchers.any;\r\n    import static org.mockito.Mockito.when;","title":"Why i can&#39;t save anything in my mocked repository","body":"<p>A mock is just a mock. It's never actually doing something. It just can behave like a real thing, but you have to tell the mock how to do it.</p>\n<p>So if you mock the UserRepository and try to save something nothing will happen. Because again, a mock never actually does something. The advantage of this is that you don't actually need the whole infrastructure to unit test a tiny method. Additionally the test gets independent of data. What you can do now is return some data if some method is called.</p>\n<p>In your case, you don't need a whole database to test the functionality of the UserService. Thus mocking the repository is a good option. Now since it's a mock you have to tell the mock how to behave for your test case:</p>\n<pre><code>@Test\nvoid itShouldLoadUsernameByName() {\n    AppUser appUser = new AppUser(\n            ApplicationRole.USER,\n            &quot;leonardo&quot;,\n            &quot;rossi&quot;,\n            &quot;leo__&quot;,\n            &quot;a@gmail.com&quot;,\n            &quot;password&quot;\n    );\n\n    when(standortRepository.searchByUserName(any())).thenReturn(appUser);\n\n    userService.loadUserByUsername(appUser.getUsername());\n\n    //More expectations ...\n\n    verify(repository).searchByUserName(appUser.getUsername());    \n}\n</code></pre>\n<p>Now what I have done is to tell the mock it should return the appUser, when the Method <code>searchByUserName</code> is called.</p>\n<p>P.s. these are the static imports I used:</p>\n<pre><code>import static org.mockito.ArgumentMatchers.any;\nimport static org.mockito.Mockito.when;\n</code></pre>\n"}],"owner":{"account_id":23310329,"reputation":41,"user_id":17389688,"display_name":"leo___"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":238,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74460108,"answer_count":1,"score":0,"last_activity_date":1700050469,"creation_date":1668597310,"question_id":74459521,"body_markdown":"I&#39;m learning testing in spring boot, i have this test:\r\n\r\n     @ExtendWith(MockitoExtension.class)\r\n     @SpringBootTest\r\n    class AppUserServiceTest {\r\n\r\n    @Mock\r\n    private UserRepository repository;\r\n    private UserService userService;\r\n\r\n    @BeforeEach\r\n    void setUp() {\r\n        userService = new UserService(repository);\r\n    }\r\n\r\n\r\n    @Test\r\n    void itShouldLoadUsernameByName() {\r\n        AppUser appUser = new AppUser(\r\n                ApplicationRole.USER,\r\n                &quot;leonardo&quot;,\r\n                &quot;rossi&quot;,\r\n                &quot;leo__&quot;,\r\n                &quot;a@gmail.com&quot;,\r\n                &quot;password&quot;\r\n        );\r\n\r\n        repository.save(appUser);\r\n\r\n        userService.loadUserByUsername(appUser.getUsername());\r\n        verify(repository).searchByUserName(appUser.getUsername());\r\n\r\n    }\r\n\r\n    }\r\n\r\nit keep throwing me an exception because it doesn&#39;t find any user in the database, in fact even if i save the user the repository.findAll() return 0 element.\r\n\r\nThis is my User service that i&#39;m trying to test:\r\n\r\n    @AllArgsConstructor\r\n    @Service\r\n    public class UserService\r\n        implements UserDetailsService {\r\n\r\n    private final UserRepository repository;\r\n\r\n    @Override\r\n    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {\r\n        return repository.searchByUserName(username)\r\n                .orElseThrow(\r\n                        ()-&gt; new UsernameNotFoundException(&quot;The username &quot; + username + &quot; has not been found&quot;)\r\n                );\r\n    }\r\n\r\nThis is my H2 databse for testing configuration:\r\n\r\n    spring.datasource.url=jdbc:h2:mem:testdb\r\n    spring.datasource.driverClassName=org.h2.Driver\r\n    spring.datasource.username=sa\r\n    spring.datasource.password=password\r\n    spring.jpa.database-platform=org.hibernate.dialect.H2Dialect\r\n\r\n","title":"Why i can&#39;t save anything in my mocked repository","body":"<p>I'm learning testing in spring boot, i have this test:</p>\n<pre><code> @ExtendWith(MockitoExtension.class)\n @SpringBootTest\nclass AppUserServiceTest {\n\n@Mock\nprivate UserRepository repository;\nprivate UserService userService;\n\n@BeforeEach\nvoid setUp() {\n    userService = new UserService(repository);\n}\n\n\n@Test\nvoid itShouldLoadUsernameByName() {\n    AppUser appUser = new AppUser(\n            ApplicationRole.USER,\n            &quot;leonardo&quot;,\n            &quot;rossi&quot;,\n            &quot;leo__&quot;,\n            &quot;a@gmail.com&quot;,\n            &quot;password&quot;\n    );\n\n    repository.save(appUser);\n\n    userService.loadUserByUsername(appUser.getUsername());\n    verify(repository).searchByUserName(appUser.getUsername());\n\n}\n\n}\n</code></pre>\n<p>it keep throwing me an exception because it doesn't find any user in the database, in fact even if i save the user the repository.findAll() return 0 element.</p>\n<p>This is my User service that i'm trying to test:</p>\n<pre><code>@AllArgsConstructor\n@Service\npublic class UserService\n    implements UserDetailsService {\n\nprivate final UserRepository repository;\n\n@Override\npublic UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {\n    return repository.searchByUserName(username)\n            .orElseThrow(\n                    ()-&gt; new UsernameNotFoundException(&quot;The username &quot; + username + &quot; has not been found&quot;)\n            );\n}\n</code></pre>\n<p>This is my H2 databse for testing configuration:</p>\n<pre><code>spring.datasource.url=jdbc:h2:mem:testdb\nspring.datasource.driverClassName=org.h2.Driver\nspring.datasource.username=sa\nspring.datasource.password=password\nspring.jpa.database-platform=org.hibernate.dialect.H2Dialect\n</code></pre>\n"},{"tags":["java","javafx","scenebuilder"],"comments":[{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1700051371,"post_id":77487394,"comment_id":136606810,"body_markdown":"Class [Polygon](https://openjfx.io/javadoc/21/javafx.graphics/javafx/scene/shape/Polygon.html) extends class `Node` which has [getProperties](https://openjfx.io/javadoc/21/javafx.graphics/javafx/scene/Node.html#getProperties()) method and [getUserData](https://openjfx.io/javadoc/21/javafx.graphics/javafx/scene/Node.html#setUserData(java.lang.Object)) method, both of which can be used for storing extra information. Perhaps you can utilize those methods rather than having to extend class `Polygon`?","body":"Class <a href=\"https://openjfx.io/javadoc/21/javafx.graphics/javafx/scene/shape/Polygon.html\" rel=\"nofollow noreferrer\">Polygon</a> extends class <code>Node</code> which has <a href=\"https://openjfx.io/javadoc/21/javafx.graphics/javafx/scene/Node.html#getProperties()\" rel=\"nofollow noreferrer\">getProperties</a> method and <a href=\"https://openjfx.io/javadoc/21/javafx.graphics/javafx/scene/Node.html#setUserData(java.lang.Object)\" rel=\"nofollow noreferrer\">getUserData</a> method, both of which can be used for storing extra information. Perhaps you can utilize those methods rather than having to extend class <code>Polygon</code>?"}],"answers":[{"tags":[],"owner":{"account_id":21741636,"reputation":1162,"user_id":16048914,"display_name":"David Weber"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1700050460,"creation_date":1700050460,"answer_id":77487617,"question_id":77487394,"body_markdown":"Looks Like you want to create a custom component for the SceneBuilder.\r\n\r\nStep 1: Create the custom vomponent\r\nhttps://docs.oracle.com/javafx/2/fxml_get_started/custom_control.htm\r\n\r\nStep 2: Import the custom component into SceneBuilder\r\nhttps://www.google.com/amp/s/staticfinal.blog/2014/05/21/adding-custom-javafx-components-to-scene-builder-2-0/amp/\r\n\r\n**Alternative solution:**\r\n\r\nYou could create a custom component in plain Java and add it to the fxml scene programatically in your controller.\r\n","title":"Is there a way to add Subclasses from a certain JavaFX Class in Scenebuilder/FXML?","body":"<p>Looks Like you want to create a custom component for the SceneBuilder.</p>\n<p>Step 1: Create the custom vomponent\n<a href=\"https://docs.oracle.com/javafx/2/fxml_get_started/custom_control.htm\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javafx/2/fxml_get_started/custom_control.htm</a></p>\n<p>Step 2: Import the custom component into SceneBuilder\n<a href=\"https://www.google.com/amp/s/staticfinal.blog/2014/05/21/adding-custom-javafx-components-to-scene-builder-2-0/amp/\" rel=\"nofollow noreferrer\">https://www.google.com/amp/s/staticfinal.blog/2014/05/21/adding-custom-javafx-components-to-scene-builder-2-0/amp/</a></p>\n<p><strong>Alternative solution:</strong></p>\n<p>You could create a custom component in plain Java and add it to the fxml scene programatically in your controller.</p>\n"}],"owner":{"account_id":25843762,"reputation":1,"user_id":19578941,"display_name":"Marco R."},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1700050999,"accepted_answer_id":77487617,"answer_count":1,"score":0,"last_activity_date":1700050460,"creation_date":1700048286,"question_id":77487394,"body_markdown":"Following Background: For our project we need to implement the famous german boardgame &quot;Settlers of Catan&quot; with Java and JavaFX. The board consists of 19 hexagonal tiles. To spare some complicated calculations for the nodes (City Spots) and edges (Streets) of the hexagon I wanted to create the board in Scenebuilder as fixed FXML.\r\nFor the hexagons I use JavaFX-Polygons. But the problem is, that I need much more information in the Polygon-Class (e.g. ressource type, nodes, edges).\r\n\r\nIs there a way to create a subclass (Tile extends Polygon) and use this class in Scenebuilder or FXML?\r\n\r\nAlso I tried to cast the Polygons as Tiles, but didnt work either.\r\n\r\nI can provide some code later, if necessary.\r\n\r\nThanks in advance!\r\n\r\n\r\nI tried importing my class in the beginning of the FXML.\r\n\r\n`&lt;?import package.Tile?`\r\n\r\nBut it wasnt that simple, sadly.","title":"Is there a way to add Subclasses from a certain JavaFX Class in Scenebuilder/FXML?","body":"<p>Following Background: For our project we need to implement the famous german boardgame &quot;Settlers of Catan&quot; with Java and JavaFX. The board consists of 19 hexagonal tiles. To spare some complicated calculations for the nodes (City Spots) and edges (Streets) of the hexagon I wanted to create the board in Scenebuilder as fixed FXML.\nFor the hexagons I use JavaFX-Polygons. But the problem is, that I need much more information in the Polygon-Class (e.g. ressource type, nodes, edges).</p>\n<p>Is there a way to create a subclass (Tile extends Polygon) and use this class in Scenebuilder or FXML?</p>\n<p>Also I tried to cast the Polygons as Tiles, but didnt work either.</p>\n<p>I can provide some code later, if necessary.</p>\n<p>Thanks in advance!</p>\n<p>I tried importing my class in the beginning of the FXML.</p>\n<p><code>&lt;?import package.Tile?</code></p>\n<p>But it wasnt that simple, sadly.</p>\n"},{"tags":["java","scala","hibernate","validation","hibernate-validator"],"comments":[{"owner":{"account_id":6366204,"reputation":2197,"user_id":4940126,"display_name":"mark_o"},"score":0,"creation_date":1516355120,"post_id":48334644,"comment_id":83661362,"body_markdown":"I&#39;m not really a Scala person but by looking at the error that you;ve provided and checking the Scala doc - http://www.scala-lang.org/api/2.9.3/scala/collection/mutable/HashMap.html the problem is that you are trying to place an annotation on a scala type, for which there&#39;s no validator implemented, as it&#39;s a scala collection. Here&#39;s also an answer that you might find helpful - https://stackoverflow.com/a/24291593/4940126\nSo I think if you&#39;d like to use BeanValidation for your scala types you will need to implement validators for those types.","body":"I&#39;m not really a Scala person but by looking at the error that you;ve provided and checking the Scala doc - <a href=\"http://www.scala-lang.org/api/2.9.3/scala/collection/mutable/HashMap.html\" rel=\"nofollow noreferrer\">scala-lang.org/api/2.9.3/scala/collection/mutable/HashMap.ht&zwnj;&#8203;ml</a> the problem is that you are trying to place an annotation on a scala type, for which there&#39;s no validator implemented, as it&#39;s a scala collection. Here&#39;s also an answer that you might find helpful - <a href=\"https://stackoverflow.com/a/24291593/4940126\">stackoverflow.com/a/24291593/4940126</a> So I think if you&#39;d like to use BeanValidation for your scala types you will need to implement validators for those types."},{"owner":{"account_id":5111197,"reputation":882,"user_id":4097712,"accept_rate":57,"display_name":"Tonny Tc"},"score":0,"creation_date":1516373467,"post_id":48334644,"comment_id":83672914,"body_markdown":"Yes, the problem is just as what you said, Scala does not support JSR303. Those links are all some time ago, so I just want to get some new info. about the case to see whether there&#39;s any changes in Scala.","body":"Yes, the problem is just as what you said, Scala does not support JSR303. Those links are all some time ago, so I just want to get some new info. about the case to see whether there&#39;s any changes in Scala."}],"answers":[{"tags":[],"owner":{"account_id":12471572,"reputation":638,"user_id":9134510,"display_name":"Alex Cuadr&#243;n"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1516342425,"creation_date":1516340464,"answer_id":48334779,"question_id":48334644,"body_markdown":"If you want to check if a map collection is empty or not you could do this: `if(mapVariable.isEmpty() || mapVariable == null){...}`\r\n\r\nOr write `traversable shouldBe empty` or `javaMap should not be empty` as stated in the second link (link to the API). Check out [this][1] or [this][2] for further information.\r\n\r\n**EDIT**\r\n\r\nTry to add&#160;@Valid&#160;to the collection.\r\n\r\nHere is&#160;an example&#160;from the [Hibernate Validator Reference][3].\r\n\r\n    public class Car { \r\n    @NotNull \r\n    @Valid \r\n    private List&lt;Person&gt; passengers = new ArrayList&lt;Person&gt;(); \r\n    }\r\n\r\nThis is standard JSR-303 behavior. See Section 3.1.3 of the&#160;[spec][4].\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/12721076/best-practice-to-validate-null-and-empty-collection-in-java\r\n  [2]: http://www.scalatest.org/user_guide/using_matchers\r\n  [3]: http://docs.jboss.org/hibernate/validator/4.2/reference/en-US/html_single/#d0e496\r\n  [4]: http://download.oracle.com/otndocs/jcp/bean_validation-1.0-fr-oth-JSpec/","title":"Throw javax.validation.UnexpectedTypeException: HV000030 exception when validating Scala&#39;s Map with @NotEmpty","body":"<p>If you want to check if a map collection is empty or not you could do this: <code>if(mapVariable.isEmpty() || mapVariable == null){...}</code></p>\n\n<p>Or write <code>traversable shouldBe empty</code> or <code>javaMap should not be empty</code> as stated in the second link (link to the API). Check out <a href=\"https://stackoverflow.com/questions/12721076/best-practice-to-validate-null-and-empty-collection-in-java\">this</a> or <a href=\"http://www.scalatest.org/user_guide/using_matchers\" rel=\"nofollow noreferrer\">this</a> for further information.</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>Try to add @Valid to the collection.</p>\n\n<p>Here is an example from the <a href=\"http://docs.jboss.org/hibernate/validator/4.2/reference/en-US/html_single/#d0e496\" rel=\"nofollow noreferrer\">Hibernate Validator Reference</a>.</p>\n\n<pre><code>public class Car { \n@NotNull \n@Valid \nprivate List&lt;Person&gt; passengers = new ArrayList&lt;Person&gt;(); \n}\n</code></pre>\n\n<p>This is standard JSR-303 behavior. See Section 3.1.3 of the <a href=\"http://download.oracle.com/otndocs/jcp/bean_validation-1.0-fr-oth-JSpec/\" rel=\"nofollow noreferrer\">spec</a>.</p>\n"},{"tags":[],"owner":{"account_id":6518696,"reputation":10106,"user_id":5043585,"display_name":"Guillaume Smet"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1516374490,"creation_date":1516365119,"answer_id":48341215,"question_id":48334644,"body_markdown":"So what you have to understand is that in Hibernate Validator, for a given constraint, you register constraint validators for different types.\r\n\r\nTypically, for the @Size constraint, we will register constraint validators for String, Collection, Map, arrays...\r\n\r\nThe issue you have here is that the Scala types don&#39;t implement the classical Java interfaces so we can&#39;t find a constraint validator for them. That&#39;s why you get your exception: HV recognizes the constraint but can&#39;t find a constraint validator to apply it on your Scala Map.\r\n\r\nAs far as I can see from the code, https://github.com/bean-validation-scala/bean-validation-scala would be the way to go to get BV and HV support for Scala. It delegates the validation to the original HV implementations so you should have a very similar behavior to what is done with Java.\r\n\r\nI don&#39;t think it&#39;s outdated as keep in mind that the BV/HV project didn&#39;t change too much for a while, before we started the work on BV 2.0 and HV 6.0. It might be a good idea to ping the original author regarding the BV 2.0 and HV 6.0 support (we have new constraints and so on).","title":"Throw javax.validation.UnexpectedTypeException: HV000030 exception when validating Scala&#39;s Map with @NotEmpty","body":"<p>So what you have to understand is that in Hibernate Validator, for a given constraint, you register constraint validators for different types.</p>\n\n<p>Typically, for the @Size constraint, we will register constraint validators for String, Collection, Map, arrays...</p>\n\n<p>The issue you have here is that the Scala types don't implement the classical Java interfaces so we can't find a constraint validator for them. That's why you get your exception: HV recognizes the constraint but can't find a constraint validator to apply it on your Scala Map.</p>\n\n<p>As far as I can see from the code, <a href=\"https://github.com/bean-validation-scala/bean-validation-scala\" rel=\"nofollow noreferrer\">https://github.com/bean-validation-scala/bean-validation-scala</a> would be the way to go to get BV and HV support for Scala. It delegates the validation to the original HV implementations so you should have a very similar behavior to what is done with Java.</p>\n\n<p>I don't think it's outdated as keep in mind that the BV/HV project didn't change too much for a while, before we started the work on BV 2.0 and HV 6.0. It might be a good idea to ping the original author regarding the BV 2.0 and HV 6.0 support (we have new constraints and so on).</p>\n"}],"owner":{"account_id":5111197,"reputation":882,"user_id":4097712,"accept_rate":57,"display_name":"Tonny Tc"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1064,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":48341215,"answer_count":2,"score":0,"last_activity_date":1700050103,"creation_date":1516339757,"question_id":48334644,"body_markdown":"When I tried to validate a Scala&#39;s Map, no matter mutable or immutable, I got an exception like:\r\n\r\n    javax.validation.UnexpectedTypeException: HV000030: No validator could be found for constraint &#39;javax.validation.constraints.Size&#39; validating type &#39;scala.collection.mutable.Map&lt;java.lang.String, java.lang.String&gt;&#39;. Check configuration for &#39;corporationSecrets&#39;\r\n    \tat org.hibernate.validator.internal.engine.constraintvalidation.ConstraintTree.throwExceptionForNullValidator(ConstraintTree.java:229) ~[hibernate-validator-5.3.6.Final.jar:5.3.6.Final]\r\n    \tat org.hibernate.validator.internal.engine.constraintvalidation.ConstraintTree.getConstraintValidatorNoUnwrapping(ConstraintTree.java:310) ~[hibernate-validator-5.3.6.Final.jar:5.3.6.Final]\r\n    \tat org.hibernate.validator.internal.engine.constraintvalidation.ConstraintTree.getConstraintValidatorInstanceForAutomaticUnwrapping(ConstraintTree.java:244) ~[hibernate-validator-5.3.6.Final.jar:5.3.6.Final]\r\n    \tat org.hibernate.validator.internal.engine.constraintvalidation.ConstraintTree.getInitializedConstraintValidator(ConstraintTree.java:163) ~[hibernate-validator-5.3.6.Final.jar:5.3.6.Final]\r\n    \tat org.hibernate.validator.internal.engine.constraintvalidation.ConstraintTree.validateConstraints(ConstraintTree.java:116) ~[hibernate-validator-5.3.6.Final.jar:5.3.6.Final]\r\n    \tat org.hibernate.validator.internal.engine.constraintvalidation.ConstraintTree.validateComposingConstraints(ConstraintTree.java:398) ~[hibernate-validator-5.3.6.Final.jar:5.3.6.Final]\r\n    \tat org.hibernate.validator.internal.engine.constraintvalidation.ConstraintTree.validateConstraints(ConstraintTree.java:98) ~[hibernate-validator-5.3.6.Final.jar:5.3.6.Final]\r\n    \tat org.hibernate.validator.internal.engine.constraintvalidation.ConstraintTree.validateConstraints(ConstraintTree.java:87) ~[hibernate-validator-5.3.6.Final.jar:5.3.6.Final]\r\n    \tat org.hibernate.validator.internal.metadata.core.MetaConstraint.validateConstraint(MetaConstraint.java:73) ~[hibernate-validator-5.3.6.Final.jar:5.3.6.Final]\r\n    \tat org.hibernate.validator.internal.engine.ValidatorImpl.validateMetaConstraint(ValidatorImpl.java:621) ~[hibernate-validator-5.3.6.Final.jar:5.3.6.Final]\r\n    \tat org.hibernate.validator.internal.engine.ValidatorImpl.validateConstraint(ValidatorImpl.java:584) ~[hibernate-validator-5.3.6.Final.jar:5.3.6.Final]\r\n    \tat org.hibernate.validator.internal.engine.ValidatorImpl.validateConstraintsForSingleDefaultGroupElement(ValidatorImpl.java:528) ~[hibernate-validator-5.3.6.Final.jar:5.3.6.Final]\r\n    \tat org.hibernate.validator.internal.engine.ValidatorImpl.validateConstraintsForDefaultGroup(ValidatorImpl.java:496) ~[hibernate-validator-5.3.6.Final.jar:5.3.6.Final]\r\n    \tat org.hibernate.validator.internal.engine.ValidatorImpl.validateConstraintsForCurrentGroup(ValidatorImpl.java:461) ~[hibernate-validator-5.3.6.Final.jar:5.3.6.Final]\r\n    \tat org.hibernate.validator.internal.engine.ValidatorImpl.validateInContext(ValidatorImpl.java:411) ~[hibernate-validator-5.3.6.Final.jar:5.3.6.Final]\r\n    \tat org.hibernate.validator.internal.engine.ValidatorImpl.validate(ValidatorImpl.java:208) ~[hibernate-validator-5.3.6.Final.jar:5.3.6.Final]\r\n    \tat org.springframework.validation.beanvalidation.SpringValidatorAdapter.validate(SpringValidatorAdapter.java:102) ~[spring-context-4.3.13.RELEASE.jar:4.3.13.RELEASE]\r\n    \tat org.springframework.validation.DataBinder.validate(DataBinder.java:877) ~[spring-context-4.3.13.RELEASE.jar:4.3.13.RELEASE]\r\n    \tat org.springframework.boot.bind.PropertiesConfigurationFactory.doBindPropertiesToTarget(PropertiesConfigurationFactory.java:274) ~[spring-boot-1.5.9.RELEASE.jar:1.5.9.RELEASE]\r\n    \tat org.springframework.boot.bind.PropertiesConfigurationFactory.bindPropertiesToTarget(PropertiesConfigurationFactory.java:240) ~[spring-boot-1.5.9.RELEASE.jar:1.5.9.RELEASE]\r\n    \tat org.springframework.boot.context.properties.ConfigurationPropertiesBindingPostProcessor.postProcessBeforeInitialization(ConfigurationPropertiesBindingPostProcessor.java:330) ~[spring-boot-1.5.9.RELEASE.jar:1.5.9.RELEASE]\r\n    \t... 29 common frames omitted\r\n\r\n\r\nMy code is very simple, like\r\n\r\n    @NotEmpty\r\n\tval corporationSecrets : scala.collection.mutable.Map[String, String] = new scala.collection.mutable.HashMap[String, String]\r\n\r\nHow can I validate a scala&#39;s map to check whether it is empty or not?","title":"Throw javax.validation.UnexpectedTypeException: HV000030 exception when validating Scala&#39;s Map with @NotEmpty","body":"<p>When I tried to validate a Scala's Map, no matter mutable or immutable, I got an exception like:</p>\n\n<pre><code>javax.validation.UnexpectedTypeException: HV000030: No validator could be found for constraint 'javax.validation.constraints.Size' validating type 'scala.collection.mutable.Map&lt;java.lang.String, java.lang.String&gt;'. Check configuration for 'corporationSecrets'\n    at org.hibernate.validator.internal.engine.constraintvalidation.ConstraintTree.throwExceptionForNullValidator(ConstraintTree.java:229) ~[hibernate-validator-5.3.6.Final.jar:5.3.6.Final]\n    at org.hibernate.validator.internal.engine.constraintvalidation.ConstraintTree.getConstraintValidatorNoUnwrapping(ConstraintTree.java:310) ~[hibernate-validator-5.3.6.Final.jar:5.3.6.Final]\n    at org.hibernate.validator.internal.engine.constraintvalidation.ConstraintTree.getConstraintValidatorInstanceForAutomaticUnwrapping(ConstraintTree.java:244) ~[hibernate-validator-5.3.6.Final.jar:5.3.6.Final]\n    at org.hibernate.validator.internal.engine.constraintvalidation.ConstraintTree.getInitializedConstraintValidator(ConstraintTree.java:163) ~[hibernate-validator-5.3.6.Final.jar:5.3.6.Final]\n    at org.hibernate.validator.internal.engine.constraintvalidation.ConstraintTree.validateConstraints(ConstraintTree.java:116) ~[hibernate-validator-5.3.6.Final.jar:5.3.6.Final]\n    at org.hibernate.validator.internal.engine.constraintvalidation.ConstraintTree.validateComposingConstraints(ConstraintTree.java:398) ~[hibernate-validator-5.3.6.Final.jar:5.3.6.Final]\n    at org.hibernate.validator.internal.engine.constraintvalidation.ConstraintTree.validateConstraints(ConstraintTree.java:98) ~[hibernate-validator-5.3.6.Final.jar:5.3.6.Final]\n    at org.hibernate.validator.internal.engine.constraintvalidation.ConstraintTree.validateConstraints(ConstraintTree.java:87) ~[hibernate-validator-5.3.6.Final.jar:5.3.6.Final]\n    at org.hibernate.validator.internal.metadata.core.MetaConstraint.validateConstraint(MetaConstraint.java:73) ~[hibernate-validator-5.3.6.Final.jar:5.3.6.Final]\n    at org.hibernate.validator.internal.engine.ValidatorImpl.validateMetaConstraint(ValidatorImpl.java:621) ~[hibernate-validator-5.3.6.Final.jar:5.3.6.Final]\n    at org.hibernate.validator.internal.engine.ValidatorImpl.validateConstraint(ValidatorImpl.java:584) ~[hibernate-validator-5.3.6.Final.jar:5.3.6.Final]\n    at org.hibernate.validator.internal.engine.ValidatorImpl.validateConstraintsForSingleDefaultGroupElement(ValidatorImpl.java:528) ~[hibernate-validator-5.3.6.Final.jar:5.3.6.Final]\n    at org.hibernate.validator.internal.engine.ValidatorImpl.validateConstraintsForDefaultGroup(ValidatorImpl.java:496) ~[hibernate-validator-5.3.6.Final.jar:5.3.6.Final]\n    at org.hibernate.validator.internal.engine.ValidatorImpl.validateConstraintsForCurrentGroup(ValidatorImpl.java:461) ~[hibernate-validator-5.3.6.Final.jar:5.3.6.Final]\n    at org.hibernate.validator.internal.engine.ValidatorImpl.validateInContext(ValidatorImpl.java:411) ~[hibernate-validator-5.3.6.Final.jar:5.3.6.Final]\n    at org.hibernate.validator.internal.engine.ValidatorImpl.validate(ValidatorImpl.java:208) ~[hibernate-validator-5.3.6.Final.jar:5.3.6.Final]\n    at org.springframework.validation.beanvalidation.SpringValidatorAdapter.validate(SpringValidatorAdapter.java:102) ~[spring-context-4.3.13.RELEASE.jar:4.3.13.RELEASE]\n    at org.springframework.validation.DataBinder.validate(DataBinder.java:877) ~[spring-context-4.3.13.RELEASE.jar:4.3.13.RELEASE]\n    at org.springframework.boot.bind.PropertiesConfigurationFactory.doBindPropertiesToTarget(PropertiesConfigurationFactory.java:274) ~[spring-boot-1.5.9.RELEASE.jar:1.5.9.RELEASE]\n    at org.springframework.boot.bind.PropertiesConfigurationFactory.bindPropertiesToTarget(PropertiesConfigurationFactory.java:240) ~[spring-boot-1.5.9.RELEASE.jar:1.5.9.RELEASE]\n    at org.springframework.boot.context.properties.ConfigurationPropertiesBindingPostProcessor.postProcessBeforeInitialization(ConfigurationPropertiesBindingPostProcessor.java:330) ~[spring-boot-1.5.9.RELEASE.jar:1.5.9.RELEASE]\n    ... 29 common frames omitted\n</code></pre>\n\n<p>My code is very simple, like</p>\n\n<pre><code>@NotEmpty\nval corporationSecrets : scala.collection.mutable.Map[String, String] = new scala.collection.mutable.HashMap[String, String]\n</code></pre>\n\n<p>How can I validate a scala's map to check whether it is empty or not?</p>\n"},{"tags":["java","apache-flink","flink-streaming","fault-tolerance","apache-iceberg"],"answers":[{"tags":[],"owner":{"account_id":21886042,"reputation":1703,"user_id":16173669,"display_name":"Martijn Visser"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1688030451,"creation_date":1688030451,"answer_id":76579740,"question_id":76558115,"body_markdown":"Flink has a snapshotting mechanism (checkpointing and savepointing). It&#39;s used to write Flink&#39;s state to durable storage, for recovery purposes in case of an error or in situations where you want to perform an upgrade (of either your Flink cluster, or the business logic in your application). See https://nightlies.apache.org/flink/flink-docs-stable/docs/ops/state/checkpoints/ for more details","title":"How to start Flink application from last snapshot-id in DB streaming when application was stopped","body":"<p>Flink has a snapshotting mechanism (checkpointing and savepointing). It's used to write Flink's state to durable storage, for recovery purposes in case of an error or in situations where you want to perform an upgrade (of either your Flink cluster, or the business logic in your application). See <a href=\"https://nightlies.apache.org/flink/flink-docs-stable/docs/ops/state/checkpoints/\" rel=\"nofollow noreferrer\">https://nightlies.apache.org/flink/flink-docs-stable/docs/ops/state/checkpoints/</a> for more details</p>\n"}],"owner":{"account_id":16236176,"reputation":41,"user_id":11723625,"display_name":"Netrunner"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":112,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1700049524,"creation_date":1687793135,"question_id":76558115,"body_markdown":"I&#39;m creating an AWS Flink application in Java that stream from Iceberg and wondering if Flink has mechanism that providing possibility of restarting stream from last snapshot-id that was successfully processed, if the whole application is down. Should I sink snapshot-id to database or there is a better solution for that ?\r\n\r\nExpected scenario:\r\n- Flink stream processing messages from Iceberg table (application is scalable and can run in many processes) and store results in Kinesis and another IcebergTable\r\n- application has died unexpectedly\r\n- I&#39;m starting application again\r\n- it continues to processing messages without any data loss and without any manual interference\r\n\r\nI don&#39;t use dedicated IcebergSource. Perhaps this implementation could solve it somehow. Right now I&#39;m using FlinkSource. Both of source implementations has method for set snapshot-id, but it have to be set manually and store somewhere during processing. Is there any way to avoid it and use internal Flink mechanism ?","title":"How to start Flink application from last snapshot-id in DB streaming when application was stopped","body":"<p>I'm creating an AWS Flink application in Java that stream from Iceberg and wondering if Flink has mechanism that providing possibility of restarting stream from last snapshot-id that was successfully processed, if the whole application is down. Should I sink snapshot-id to database or there is a better solution for that ?</p>\n<p>Expected scenario:</p>\n<ul>\n<li>Flink stream processing messages from Iceberg table (application is scalable and can run in many processes) and store results in Kinesis and another IcebergTable</li>\n<li>application has died unexpectedly</li>\n<li>I'm starting application again</li>\n<li>it continues to processing messages without any data loss and without any manual interference</li>\n</ul>\n<p>I don't use dedicated IcebergSource. Perhaps this implementation could solve it somehow. Right now I'm using FlinkSource. Both of source implementations has method for set snapshot-id, but it have to be set manually and store somewhere during processing. Is there any way to avoid it and use internal Flink mechanism ?</p>\n"},{"tags":["java","hibernate","jpa","criteria","hibernate-criteria"],"answers":[{"tags":[],"owner":{"account_id":2736255,"reputation":111,"user_id":7776101,"display_name":"david"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700049297,"creation_date":1700049297,"answer_id":77487499,"question_id":77458803,"body_markdown":"To use the Array-Aggregation available in Postgres an extended Postgres-Dialect with a defined array_agg function.\r\n```java\r\npublic class ExtendedPostgreSQL9Dialect extends PostgreSQL9Dialect {\r\n\r\n\tpublic ExtendedPostgreSQL9Dialect() {\r\n\t\tsuper();\r\n\t\tregisterFunction(&quot;array_agg&quot;, new StandardSQLFunction(&quot;array_agg&quot;, StandardBasicTypes.STRING));\r\n\t}\r\n}\r\n```\r\n\r\nThe dialect has to be configured at the configuration yml or in code at\r\n```\r\njpa.hibernate.dialect:ExtendedPostgreSQL9Dialect\r\n```\r\n\r\nWith this a subquery for inverse joins can be constructed\r\n\r\n```java\r\n\t\tSubquery&lt;String&gt; subquery = query.subquery(String.class);\r\n\t\tRoot&lt;&gt; subFrom = subquery.from(parentClass);\r\n\t\tJoin&lt;Object, Object&gt; join = subFrom.join(fieldName);\r\n\t\tjoin.on(criteriaBuilder.equal(entryRoot.get(&quot;id&quot;), join.get(&quot;id&quot;)));\r\n\t\tExpression&lt;String&gt; function = criteriaBuilder.function(&quot;array_agg&quot;, String.class, join.getParent()\r\n\t\t                                                                                      .get(&quot;id&quot;));\r\n\t\tsubquery.select(function);\r\n\r\n```\r\n\r\nIn the query itself the selection of the subquery has to be added\r\n\r\n```java\r\nquery.multiselect(..., subquery.getSelection());\r\n```","title":"CriteriaQuery with array aggregation","body":"<p>To use the Array-Aggregation available in Postgres an extended Postgres-Dialect with a defined array_agg function.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class ExtendedPostgreSQL9Dialect extends PostgreSQL9Dialect {\n\n    public ExtendedPostgreSQL9Dialect() {\n        super();\n        registerFunction(&quot;array_agg&quot;, new StandardSQLFunction(&quot;array_agg&quot;, StandardBasicTypes.STRING));\n    }\n}\n</code></pre>\n<p>The dialect has to be configured at the configuration yml or in code at</p>\n<pre><code>jpa.hibernate.dialect:ExtendedPostgreSQL9Dialect\n</code></pre>\n<p>With this a subquery for inverse joins can be constructed</p>\n<pre class=\"lang-java prettyprint-override\"><code>        Subquery&lt;String&gt; subquery = query.subquery(String.class);\n        Root&lt;&gt; subFrom = subquery.from(parentClass);\n        Join&lt;Object, Object&gt; join = subFrom.join(fieldName);\n        join.on(criteriaBuilder.equal(entryRoot.get(&quot;id&quot;), join.get(&quot;id&quot;)));\n        Expression&lt;String&gt; function = criteriaBuilder.function(&quot;array_agg&quot;, String.class, join.getParent()\n                                                                                              .get(&quot;id&quot;));\n        subquery.select(function);\n\n</code></pre>\n<p>In the query itself the selection of the subquery has to be added</p>\n<pre class=\"lang-java prettyprint-override\"><code>query.multiselect(..., subquery.getSelection());\n</code></pre>\n"}],"owner":{"account_id":2736255,"reputation":111,"user_id":7776101,"display_name":"david"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1700049297,"creation_date":1699606989,"question_id":77458803,"body_markdown":"I want to perform a Query into a custom Data-Access-Class. Unfortunately I am stuck midway.\r\n```java\r\nclass User {\r\n  private Long id\r\n  private String name\r\n  private Set&lt;Group&gt; groups\r\n...\r\n}\r\n\r\nclass Group {\r\n  private Long id\r\n  private String name\r\n...\r\n}\r\n```\r\n\r\nI want to construct the equivalent to the following sql-Statement\r\n```sql\r\nselect user.id, user.name, ARRAY_AGG(user_groups.groups_id) from user left join user_groups ON user_groups.user_id = user.id group by user.id\r\n```\r\n\r\nI tried the following\r\n```java\r\nCriteriaBuilder criteriaBuilder = entityManager.getCriteriaBuilder();\r\nCriteriaQuery query = criteriaBuilder.createQuery(CustomUser.class)\r\nRoot&lt;ENTITY&gt; entryRoot = query.from(User.class);\r\nquery.groupBy(entryRoot.get(&quot;ident&quot;);\r\n```\r\n\r\nIf I multiselect with a join, it fails, because an aggregate function is missing\r\n```java\r\nquery.multiselect(entryRoot.get(&quot;id&quot;), entryRoot.get(&quot;name&quot;), entryRoot.join(&quot;groups&quot;, JoinType.Left)\r\n```\r\n\r\nI tried to add an array aggregation into multiselect\r\n```java\r\narraySelection = CompoundSelection&lt;Object[]&gt; array = criteriaBuilder.array(entryRoot.join(&quot;groups&quot;, JoinType.LEFT));\r\nquery.multiselect(entryRoot.get(&quot;id&quot;), entryRoot.get(&quot;name&quot;), arraySelection)\r\n```\r\n\r\nThis unfortunately fails because Compound-Selections are not allowed with other Selections in a multiselect.\r\n\r\nHow can I perform an array aggregation with a CriteriaQuery?\r\n\r\n\r\nI am aware, that I could simply use\r\n```java\r\nCriteriaQuery query = criteriaBuilder.createQuery(User.class)\r\n```\r\ninstead of\r\n```java\r\nCriteriaQuery query = criteriaBuilder.createQuery(CustomUser.class)\r\n```\r\nbut I want to add further joins of only inversely related Entities. Actually I am stuck in reconstructing the things done automatically, do add more functionality later.\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"CriteriaQuery with array aggregation","body":"<p>I want to perform a Query into a custom Data-Access-Class. Unfortunately I am stuck midway.</p>\n<pre class=\"lang-java prettyprint-override\"><code>class User {\n  private Long id\n  private String name\n  private Set&lt;Group&gt; groups\n...\n}\n\nclass Group {\n  private Long id\n  private String name\n...\n}\n</code></pre>\n<p>I want to construct the equivalent to the following sql-Statement</p>\n<pre class=\"lang-sql prettyprint-override\"><code>select user.id, user.name, ARRAY_AGG(user_groups.groups_id) from user left join user_groups ON user_groups.user_id = user.id group by user.id\n</code></pre>\n<p>I tried the following</p>\n<pre class=\"lang-java prettyprint-override\"><code>CriteriaBuilder criteriaBuilder = entityManager.getCriteriaBuilder();\nCriteriaQuery query = criteriaBuilder.createQuery(CustomUser.class)\nRoot&lt;ENTITY&gt; entryRoot = query.from(User.class);\nquery.groupBy(entryRoot.get(&quot;ident&quot;);\n</code></pre>\n<p>If I multiselect with a join, it fails, because an aggregate function is missing</p>\n<pre class=\"lang-java prettyprint-override\"><code>query.multiselect(entryRoot.get(&quot;id&quot;), entryRoot.get(&quot;name&quot;), entryRoot.join(&quot;groups&quot;, JoinType.Left)\n</code></pre>\n<p>I tried to add an array aggregation into multiselect</p>\n<pre class=\"lang-java prettyprint-override\"><code>arraySelection = CompoundSelection&lt;Object[]&gt; array = criteriaBuilder.array(entryRoot.join(&quot;groups&quot;, JoinType.LEFT));\nquery.multiselect(entryRoot.get(&quot;id&quot;), entryRoot.get(&quot;name&quot;), arraySelection)\n</code></pre>\n<p>This unfortunately fails because Compound-Selections are not allowed with other Selections in a multiselect.</p>\n<p>How can I perform an array aggregation with a CriteriaQuery?</p>\n<p>I am aware, that I could simply use</p>\n<pre class=\"lang-java prettyprint-override\"><code>CriteriaQuery query = criteriaBuilder.createQuery(User.class)\n</code></pre>\n<p>instead of</p>\n<pre class=\"lang-java prettyprint-override\"><code>CriteriaQuery query = criteriaBuilder.createQuery(CustomUser.class)\n</code></pre>\n<p>but I want to add further joins of only inversely related Entities. Actually I am stuck in reconstructing the things done automatically, do add more functionality later.</p>\n"},{"tags":["java","spring","date","thymeleaf","dto"],"answers":[{"tags":[],"owner":{"account_id":29908417,"reputation":11,"user_id":22920424,"display_name":"Michal Bažant"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1700048737,"creation_date":1700048737,"answer_id":77487434,"question_id":77487385,"body_markdown":"I found the solution.\r\n\r\n    &lt;input name=&quot;birthday&quot; id=&quot;birthday&quot; type=&quot;date&quot; th:value=&quot;*{birthday}&quot; class=&quot;form-control&quot;/&gt;\r\n\r\nThe property name matters!\r\nI didn&#39;t know that.\r\n\r\nI got rid of th:field and let there only th:value, added name and it is magically working.","title":"Problem with display of date in a html/thymeleaf edit form","body":"<p>I found the solution.</p>\n<pre><code>&lt;input name=&quot;birthday&quot; id=&quot;birthday&quot; type=&quot;date&quot; th:value=&quot;*{birthday}&quot; class=&quot;form-control&quot;/&gt;\n</code></pre>\n<p>The property name matters!\nI didn't know that.</p>\n<p>I got rid of th:field and let there only th:value, added name and it is magically working.</p>\n"}],"owner":{"account_id":29908417,"reputation":11,"user_id":22920424,"display_name":"Michal Bažant"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1700048737,"creation_date":1700048181,"question_id":77487385,"body_markdown":"I have this little problem, that bothers me very much.\r\n\r\nI am working on a blog, that runs it&#39;s backend in java (spring), whereas frontend is in html/css/thymeleaf.\r\n\r\nI am working on displaying of user&#39;s profile and it&#39;s editing.\r\n\r\nOn my page, if you click on &quot;edit profile&quot;, you will be redirected to form with valueas as firstName, lastName, etc. and finally birthday.\r\nIn that edit form, you should not see blank rows, but you should see filled in all the data from your profile, that are in database, and you can edit them.\r\n\r\nAnd it is working, only the birthday is not shown! The value of birthday is blank in the form, despite it&#39;s saved in DB.\r\n\r\nMy thymeleaf form is like that:\r\n\r\n```\r\n&lt;form class=&quot;d-flex flex-column gap-2&quot; method=&quot;post&quot;\r\n                  th:action=&quot;@{&#39;/profile/edit/&#39; + ${profileId}}&quot; th:object=&quot;${profileDTO}&quot;&gt;\r\n                &lt;div class=&quot;form-group&quot;&gt;\r\n                    &lt;label for=&quot;firstName&quot; class=&quot;control-label&quot;&gt;First Name&lt;/label&gt;\r\n                    &lt;input id=&quot;firstName&quot; th:field=&quot;*{firstName}&quot; class=&quot;form-control&quot; /&gt;\r\n                    &lt;small class=&quot;text-danger&quot; th:if=&quot;${#fields.hasErrors(&#39;firstName&#39;)}&quot;\r\n                           th:errors=&quot;*{firstName}&quot;&gt;&lt;/small&gt;\r\n                &lt;/div&gt;\r\n\r\n                &lt;div class=&quot;form-group&quot;&gt;\r\n                    &lt;label for=&quot;lastName&quot; class=&quot;control-label&quot;&gt;Last Name&lt;/label&gt;\r\n                    &lt;input id=&quot;lastName&quot; th:field=&quot;*{lastName}&quot; class=&quot;form-control&quot; /&gt;\r\n                    &lt;small class=&quot;text-danger&quot; th:if=&quot;${#fields.hasErrors(&#39;lastName&#39;)}&quot;\r\n                           th:errors=&quot;*{lastName}&quot;&gt;&lt;/small&gt;\r\n                &lt;/div&gt;\r\n\r\n                &lt;div class=&quot;form-group&quot;&gt;\r\n                    &lt;label for=&quot;birthday&quot; class=&quot;control-label&quot;&gt;Birthday&lt;/label&gt;\r\n                    &lt;input type=&quot;date&quot; id=&quot;birthday&quot; th:value=&quot;*{birthday}&quot; th:field=&quot;*{birthday}&quot; class=&quot;form-control&quot; /&gt;\r\n                    &lt;small class=&quot;text-danger&quot; th:if=&quot;${#fields.hasErrors(&#39;birthday&#39;)}&quot;\r\n                           th:errors=&quot;*{birthday}&quot;&gt;&lt;/small&gt;\r\n                &lt;/div&gt;\r\n\r\n                &lt;div class=&quot;form-group&quot;&gt;\r\n                    &lt;label for=&quot;interests&quot; class=&quot;control-label&quot;&gt;Interests&lt;/label&gt;\r\n                    &lt;input id=&quot;interests&quot; th:field=&quot;*{interests}&quot; class=&quot;form-control&quot; /&gt;\r\n                    &lt;small class=&quot;text-danger&quot; th:if=&quot;${#fields.hasErrors(&#39;interests&#39;)}&quot;\r\n                           th:errors=&quot;*{interests}&quot;&gt;&lt;/small&gt;\r\n                &lt;/div&gt;\r\n\r\n                &lt;div class=&quot;form-group&quot;&gt;\r\n                    &lt;label for=&quot;aboutMe&quot; class=&quot;control-label&quot;&gt;About Me&lt;/label&gt;\r\n                    &lt;textarea id=&quot;aboutMe&quot; class=&quot;form-control&quot; th:field=&quot;*{aboutMe}&quot;&gt;&lt;/textarea&gt;\r\n                    &lt;small class=&quot;text-danger&quot; th:if=&quot;${#fields.hasErrors(&#39;aboutMe&#39;)}&quot;\r\n                           th:errors=&quot;*{aboutMe}&quot;&gt;&lt;/small&gt;\r\n                &lt;/div&gt;\r\n\r\n                &lt;div class=&quot;form-group&quot;&gt;\r\n                    &lt;button type=&quot;submit&quot; class=&quot;clanky-tlacitko&quot;&gt;Save&lt;/button&gt;\r\n                &lt;/div&gt;\r\n            &lt;/form&gt;\r\n```\r\n\r\nI tried to modify code in many ways.\r\nIf i change this:\r\n\r\n```\r\n&lt;input type=&quot;date&quot; id=&quot;birthday&quot; th:value=&quot;*{birthday}&quot; th:field=&quot;*{birthday}&quot; class=&quot;form-control&quot; /&gt;\r\n```\r\n\r\nTo this:\r\n\r\n```\r\n&lt;input type=&quot;date&quot; id=&quot;birthday&quot; th:value=&quot;*{birthday}&quot; class=&quot;form-control&quot; /&gt;\r\n```\r\n(which means if I get rid of parameter th:field)\r\nIt&#39;s magically working! The birthday is shown properly, when I click on &quot;edit form&quot;. But on the other hand, because I got rid of th:field, after saving the form, birthday is not sent to server, so you actually cannot change it.\r\n\r\nI know for sure, that the problem is not with my DTO. DTO is filled properly from DB, otherwise you would not see it in that last example.\r\n\r\nThere must be some problem with that thymeleaf form or something.\r\nBut I ran out of ideas.\r\n\r\nAny ideas?\r\nThank you very much.\r\n\r\n\r\n\r\n\r\nI tried many things:\r\n\r\n```\r\n&lt;input type=&quot;text&quot; id=&quot;birthday&quot; th:value=&quot;${#temporals.format(profileDTO.birthday, &#39;yyyy-MM-dd&#39;)}&quot; class=&quot;form-control datepicker&quot; /&gt;\r\n```\r\nWhich lead to the fact, the new values were not sent to server.\r\n\r\n\r\n```\r\n &lt;input type=&quot;date&quot; id=&quot;birthday&quot; th:value=&quot;*{birthday}&quot; th:field=&quot;*{birthday}&quot; class=&quot;form-control&quot; /&gt;\r\n```\r\nIn this case, the new data is sent to server, but you don&#39;t see the pre-filled value in the form, when you go to edit.\r\n\r\n \r\n```\r\n&lt;input type=&quot;date&quot; id=&quot;birthday&quot; th:field=&quot;*{birthday}&quot; class=&quot;form-control&quot; /&gt;\r\n```\r\nThe same.\r\n\r\n\r\n```\r\n&lt;input type=&quot;date&quot; id=&quot;birthday&quot; th:value=&quot;*{birthday}&quot; class=&quot;form-control&quot; /&gt;\r\n```\r\n\r\nIn this case, when you go to &quot;edit profile&quot;, you see the value of birthday in the form, but you don&#39;t send a new value to the server.\r\n","title":"Problem with display of date in a html/thymeleaf edit form","body":"<p>I have this little problem, that bothers me very much.</p>\n<p>I am working on a blog, that runs it's backend in java (spring), whereas frontend is in html/css/thymeleaf.</p>\n<p>I am working on displaying of user's profile and it's editing.</p>\n<p>On my page, if you click on &quot;edit profile&quot;, you will be redirected to form with valueas as firstName, lastName, etc. and finally birthday.\nIn that edit form, you should not see blank rows, but you should see filled in all the data from your profile, that are in database, and you can edit them.</p>\n<p>And it is working, only the birthday is not shown! The value of birthday is blank in the form, despite it's saved in DB.</p>\n<p>My thymeleaf form is like that:</p>\n<pre><code>&lt;form class=&quot;d-flex flex-column gap-2&quot; method=&quot;post&quot;\n                  th:action=&quot;@{'/profile/edit/' + ${profileId}}&quot; th:object=&quot;${profileDTO}&quot;&gt;\n                &lt;div class=&quot;form-group&quot;&gt;\n                    &lt;label for=&quot;firstName&quot; class=&quot;control-label&quot;&gt;First Name&lt;/label&gt;\n                    &lt;input id=&quot;firstName&quot; th:field=&quot;*{firstName}&quot; class=&quot;form-control&quot; /&gt;\n                    &lt;small class=&quot;text-danger&quot; th:if=&quot;${#fields.hasErrors('firstName')}&quot;\n                           th:errors=&quot;*{firstName}&quot;&gt;&lt;/small&gt;\n                &lt;/div&gt;\n\n                &lt;div class=&quot;form-group&quot;&gt;\n                    &lt;label for=&quot;lastName&quot; class=&quot;control-label&quot;&gt;Last Name&lt;/label&gt;\n                    &lt;input id=&quot;lastName&quot; th:field=&quot;*{lastName}&quot; class=&quot;form-control&quot; /&gt;\n                    &lt;small class=&quot;text-danger&quot; th:if=&quot;${#fields.hasErrors('lastName')}&quot;\n                           th:errors=&quot;*{lastName}&quot;&gt;&lt;/small&gt;\n                &lt;/div&gt;\n\n                &lt;div class=&quot;form-group&quot;&gt;\n                    &lt;label for=&quot;birthday&quot; class=&quot;control-label&quot;&gt;Birthday&lt;/label&gt;\n                    &lt;input type=&quot;date&quot; id=&quot;birthday&quot; th:value=&quot;*{birthday}&quot; th:field=&quot;*{birthday}&quot; class=&quot;form-control&quot; /&gt;\n                    &lt;small class=&quot;text-danger&quot; th:if=&quot;${#fields.hasErrors('birthday')}&quot;\n                           th:errors=&quot;*{birthday}&quot;&gt;&lt;/small&gt;\n                &lt;/div&gt;\n\n                &lt;div class=&quot;form-group&quot;&gt;\n                    &lt;label for=&quot;interests&quot; class=&quot;control-label&quot;&gt;Interests&lt;/label&gt;\n                    &lt;input id=&quot;interests&quot; th:field=&quot;*{interests}&quot; class=&quot;form-control&quot; /&gt;\n                    &lt;small class=&quot;text-danger&quot; th:if=&quot;${#fields.hasErrors('interests')}&quot;\n                           th:errors=&quot;*{interests}&quot;&gt;&lt;/small&gt;\n                &lt;/div&gt;\n\n                &lt;div class=&quot;form-group&quot;&gt;\n                    &lt;label for=&quot;aboutMe&quot; class=&quot;control-label&quot;&gt;About Me&lt;/label&gt;\n                    &lt;textarea id=&quot;aboutMe&quot; class=&quot;form-control&quot; th:field=&quot;*{aboutMe}&quot;&gt;&lt;/textarea&gt;\n                    &lt;small class=&quot;text-danger&quot; th:if=&quot;${#fields.hasErrors('aboutMe')}&quot;\n                           th:errors=&quot;*{aboutMe}&quot;&gt;&lt;/small&gt;\n                &lt;/div&gt;\n\n                &lt;div class=&quot;form-group&quot;&gt;\n                    &lt;button type=&quot;submit&quot; class=&quot;clanky-tlacitko&quot;&gt;Save&lt;/button&gt;\n                &lt;/div&gt;\n            &lt;/form&gt;\n</code></pre>\n<p>I tried to modify code in many ways.\nIf i change this:</p>\n<pre><code>&lt;input type=&quot;date&quot; id=&quot;birthday&quot; th:value=&quot;*{birthday}&quot; th:field=&quot;*{birthday}&quot; class=&quot;form-control&quot; /&gt;\n</code></pre>\n<p>To this:</p>\n<pre><code>&lt;input type=&quot;date&quot; id=&quot;birthday&quot; th:value=&quot;*{birthday}&quot; class=&quot;form-control&quot; /&gt;\n</code></pre>\n<p>(which means if I get rid of parameter th:field)\nIt's magically working! The birthday is shown properly, when I click on &quot;edit form&quot;. But on the other hand, because I got rid of th:field, after saving the form, birthday is not sent to server, so you actually cannot change it.</p>\n<p>I know for sure, that the problem is not with my DTO. DTO is filled properly from DB, otherwise you would not see it in that last example.</p>\n<p>There must be some problem with that thymeleaf form or something.\nBut I ran out of ideas.</p>\n<p>Any ideas?\nThank you very much.</p>\n<p>I tried many things:</p>\n<pre><code>&lt;input type=&quot;text&quot; id=&quot;birthday&quot; th:value=&quot;${#temporals.format(profileDTO.birthday, 'yyyy-MM-dd')}&quot; class=&quot;form-control datepicker&quot; /&gt;\n</code></pre>\n<p>Which lead to the fact, the new values were not sent to server.</p>\n<pre><code> &lt;input type=&quot;date&quot; id=&quot;birthday&quot; th:value=&quot;*{birthday}&quot; th:field=&quot;*{birthday}&quot; class=&quot;form-control&quot; /&gt;\n</code></pre>\n<p>In this case, the new data is sent to server, but you don't see the pre-filled value in the form, when you go to edit.</p>\n<pre><code>&lt;input type=&quot;date&quot; id=&quot;birthday&quot; th:field=&quot;*{birthday}&quot; class=&quot;form-control&quot; /&gt;\n</code></pre>\n<p>The same.</p>\n<pre><code>&lt;input type=&quot;date&quot; id=&quot;birthday&quot; th:value=&quot;*{birthday}&quot; class=&quot;form-control&quot; /&gt;\n</code></pre>\n<p>In this case, when you go to &quot;edit profile&quot;, you see the value of birthday in the form, but you don't send a new value to the server.</p>\n"},{"tags":["java"],"answers":[{"tags":[],"owner":{"account_id":2818342,"reputation":299828,"user_id":2422776,"display_name":"Mureinik"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1700043954,"creation_date":1700043954,"answer_id":77486933,"question_id":77486891,"body_markdown":"`Scanner` is a `Closable`, so your IDE correctly recognizes that you&#39;ve opened it but haven&#39;t explicitly called `close()` on it when you&#39;re done with it, so there&#39;s a theoretical resource leak here.\r\n\r\nHowever, in this case, `input` is a `Scanner` based on `System.in`, which you should never close explicitly.\r\n\r\nTo make a long story short, you should dismiss this warning.","title":"Resource leak: &#39;input&#39; is never closed in vscode","body":"<p><code>Scanner</code> is a <code>Closable</code>, so your IDE correctly recognizes that you've opened it but haven't explicitly called <code>close()</code> on it when you're done with it, so there's a theoretical resource leak here.</p>\n<p>However, in this case, <code>input</code> is a <code>Scanner</code> based on <code>System.in</code>, which you should never close explicitly.</p>\n<p>To make a long story short, you should dismiss this warning.</p>\n"},{"tags":[],"owner":{"account_id":13832344,"reputation":1457,"user_id":9984846,"display_name":"Christian"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700045344,"creation_date":1700044015,"answer_id":77486941,"question_id":77486891,"body_markdown":"`Scanner` implements the `Closeable` interface, i.e. it has a method called `close`. You would have to guarantee, that this will always be called as otherwise this might lead to memory-leaks as your IDE is suggesting here.. \r\nIn its most explicit way, this would look like this:\r\n\r\n```\r\nScanner scanner = new Scanner(System.in);\r\ntry {\r\n   &lt;&lt; do your stuff&gt;&gt;\r\n} catch (Exception ex) {\r\n   &lt;&lt;Handle exception&gt;&gt;\r\n} finally {\r\n   scanner.close();\r\n}\r\n```\r\n\r\nHowever, it is also AutoCloseable, which allows this convenience solution:\r\n```\r\ntry(Scanner scanner = new Scanner()) {\r\n   &lt;&lt; do your stuff&gt;&gt;\r\n} catch (Exception ex) {\r\n   &lt;&lt;Handle exception&gt;&gt;\r\n} \r\n```\r\n\r\nHere you don&#39;t have to call close() explicitly anymore as Java will already do this as you are creating the Scanner in the try.\r\n\r\nThe term you might want to look at if you are more interested is &quot;try-with-resources&quot;","title":"Resource leak: &#39;input&#39; is never closed in vscode","body":"<p><code>Scanner</code> implements the <code>Closeable</code> interface, i.e. it has a method called <code>close</code>. You would have to guarantee, that this will always be called as otherwise this might lead to memory-leaks as your IDE is suggesting here..\nIn its most explicit way, this would look like this:</p>\n<pre><code>Scanner scanner = new Scanner(System.in);\ntry {\n   &lt;&lt; do your stuff&gt;&gt;\n} catch (Exception ex) {\n   &lt;&lt;Handle exception&gt;&gt;\n} finally {\n   scanner.close();\n}\n</code></pre>\n<p>However, it is also AutoCloseable, which allows this convenience solution:</p>\n<pre><code>try(Scanner scanner = new Scanner()) {\n   &lt;&lt; do your stuff&gt;&gt;\n} catch (Exception ex) {\n   &lt;&lt;Handle exception&gt;&gt;\n} \n</code></pre>\n<p>Here you don't have to call close() explicitly anymore as Java will already do this as you are creating the Scanner in the try.</p>\n<p>The term you might want to look at if you are more interested is &quot;try-with-resources&quot;</p>\n"}],"owner":{"account_id":29907098,"reputation":1,"user_id":22919358,"display_name":"Saeid Lorian"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1700048710,"answer_count":2,"score":0,"last_activity_date":1700048705,"creation_date":1700043620,"question_id":77486891,"body_markdown":"Why does vs code give me the warming &quot;Resource leak: &#39;input&#39; is never closed&quot; in the following code?\r\nMy code runs correctly but still gives this error.\r\nproblem in (ln 5,col 17)\r\n\r\n````\r\npackage JAVA;\r\nimport java.util.Scanner;\r\npublic class FirstProgram2 {\r\n    public static void main(String[] args) {\r\n        Scanner input = new Scanner(System.in);\r\n        System.out.print(&quot;Enter the first number: &quot;);\r\n        int num1 = input.nextInt();\r\n        System.out.print(&quot;Enter the second number: &quot;);\r\n        int num2 = input.nextInt();\r\n        System.out.println(&quot;Before swapping:&quot;);\r\n        System.out.println(&quot;First number: &quot; + num1);\r\n        System.out.println(&quot;Second number: &quot; + num2);\r\n        // Swapping the numbers\r\n        int temp = num1;\r\n        num1 = num2;\r\n        num2 = temp;\r\n        System.out.println(&quot;After swapping:&quot;);\r\n        System.out.println(&quot;First number: &quot; + num1);\r\n        System.out.println(&quot;Second number: &quot; + num2);\r\n    }\r\n}","title":"Resource leak: &#39;input&#39; is never closed in vscode","body":"<p>Why does vs code give me the warming &quot;Resource leak: 'input' is never closed&quot; in the following code?\nMy code runs correctly but still gives this error.\nproblem in (ln 5,col 17)</p>\n<pre><code>package JAVA;\nimport java.util.Scanner;\npublic class FirstProgram2 {\n    public static void main(String[] args) {\n        Scanner input = new Scanner(System.in);\n        System.out.print(&quot;Enter the first number: &quot;);\n        int num1 = input.nextInt();\n        System.out.print(&quot;Enter the second number: &quot;);\n        int num2 = input.nextInt();\n        System.out.println(&quot;Before swapping:&quot;);\n        System.out.println(&quot;First number: &quot; + num1);\n        System.out.println(&quot;Second number: &quot; + num2);\n        // Swapping the numbers\n        int temp = num1;\n        num1 = num2;\n        num2 = temp;\n        System.out.println(&quot;After swapping:&quot;);\n        System.out.println(&quot;First number: &quot; + num1);\n        System.out.println(&quot;Second number: &quot; + num2);\n    }\n}\n</code></pre>\n"},{"tags":["java","spring-boot","logging","log4j2"],"comments":[{"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"score":2,"creation_date":1679903816,"post_id":75853264,"comment_id":133797731,"body_markdown":"While there are surely ways to log in this way I would recommend against it. One point of using logging is to be able to trace how some request was processed, and that involves requires looking up the logs of several method calls in different classes. When you split the log files by class name this because incredibly hard. i.e. the request started in class A, was handed over to some method in class B, which again calls methods in classes C, D and E: how will you bring these logs together?","body":"While there are surely ways to log in this way I would recommend against it. One point of using logging is to be able to trace how some request was processed, and that involves requires looking up the logs of several method calls in different classes. When you split the log files by class name this because incredibly hard. i.e. the request started in class A, was handed over to some method in class B, which again calls methods in classes C, D and E: how will you bring these logs together?"},{"owner":{"account_id":16878,"reputation":306133,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"score":0,"creation_date":1679935418,"post_id":75853264,"comment_id":133806482,"body_markdown":"Why would you want to?","body":"Why would you want to?"},{"owner":{"account_id":27906986,"reputation":27,"user_id":21309960,"display_name":"Mustafa Dahodwala"},"score":0,"creation_date":1679983829,"post_id":75853264,"comment_id":133814141,"body_markdown":"Actually what i am looking for is when I specify the class which log should be in separate file then all the method invoked in that class then it should be log in that same file.Example Class A in specified then A.log file should be created and if class A has b.method() then that method log also should be present in the A.log file","body":"Actually what i am looking for is when I specify the class which log should be in separate file then all the method invoked in that class then it should be log in that same file.Example Class A in specified then A.log file should be created and if class A has b.method() then that method log also should be present in the A.log file"}],"answers":[{"tags":[],"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1700048613,"creation_date":1679903935,"answer_id":75853353,"question_id":75853264,"body_markdown":"In java code, you do not just have the log statements but also some initializer for the `log` instance, like so:\r\n\r\n    class A {\r\n        private static Logger log = LogManager.getLogger(A.class);\r\n\r\n        public void test() {\r\n            log.info(&quot;blah&quot;);\r\n        }\r\n    }\r\n\r\n    class B {\r\n        private static Logger log = LogManager.getLogger(B.class);\r\n\r\n        public void test() {\r\n            log.info(&quot;blah&quot;);\r\n        }\r\n    }\r\n\r\n    class C {\r\n        private static Logger log = LogManager.getLogger(C.class);\r\n\r\n        public void test() {\r\n            log.info(&quot;blah&quot;);\r\n        }\r\n    }\r\n\r\nNow in your logging configuration (log4j2.xml) the loggers match categories, and you can define which category goes to which appender. Finally you can setup appenders to write to file or console or other destinations, like so:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;Configuration&gt;\r\n        &lt;Appenders&gt;\r\n            &lt;Console name=&quot;Console&quot; target=&quot;SYSTEM_OUT&quot;&gt;\r\n                &lt;PatternLayout pattern=&quot;%d{HH:mm:ss.SSS} [%t] %-5level %logger{36} - %msg%n&quot;/&gt;\r\n            &lt;/Console&gt;\r\n            &lt;Appender type=&quot;File&quot; name=&quot;File&quot; fileName=&quot;/path/to/logfiles/AandB.log&quot;&gt;\r\n                &lt;Layout type=&quot;PatternLayout&quot;&gt;\r\n                    &lt;Pattern&gt;%d %p %C{1.} [%t] %m%n&lt;/Pattern&gt;\r\n                &lt;/Layout&gt;\r\n            &lt;/Appender&gt;\r\n        &lt;/Appenders&gt;\r\n        &lt;Loggers&gt;\r\n            &lt;Logger level=&quot;info&quot;  name=&quot;A&quot;&gt;&lt;!-- speficially route these messages to the file appender only --&gt;\r\n                &lt;AppenderRef ref=&quot;File&quot;/&gt; \r\n            &lt;/Logger&gt;\r\n            &lt;Logger level=&quot;info&quot;  name=&quot;B&quot;&gt;&lt;!-- speficially route these messages to the file and console appenders --&gt;\r\n                &lt;AppenderRef ref=&quot;Console&quot;/&gt; \r\n                &lt;AppenderRef ref=&quot;File&quot;/&gt; \r\n            &lt;/Logger&gt;\r\n            &lt;Root level=&quot;trace&quot;&gt; &lt;!-- per default route all log statements to the console, which is where logging for C will end up --&gt;\r\n                &lt;AppenderRef ref=&quot;Console&quot;/&gt;\r\n            &lt;/Root&gt;\r\n        &lt;/Loggers&gt;    \r\n    &lt;/Configuration&gt;\r\n\r\nWhile it is possible, I do not see it very efficient to create a separate logfile (=&gt; file appender) for each single class. But on library level this can make sense.\r\n\r\nSee details on https://logging.apache.org/log4j/2.x/manual/configuration.html","title":"How can I make Log Files for every Class using Log4j2?","body":"<p>In java code, you do not just have the log statements but also some initializer for the <code>log</code> instance, like so:</p>\n<pre><code>class A {\n    private static Logger log = LogManager.getLogger(A.class);\n\n    public void test() {\n        log.info(&quot;blah&quot;);\n    }\n}\n\nclass B {\n    private static Logger log = LogManager.getLogger(B.class);\n\n    public void test() {\n        log.info(&quot;blah&quot;);\n    }\n}\n\nclass C {\n    private static Logger log = LogManager.getLogger(C.class);\n\n    public void test() {\n        log.info(&quot;blah&quot;);\n    }\n}\n</code></pre>\n<p>Now in your logging configuration (log4j2.xml) the loggers match categories, and you can define which category goes to which appender. Finally you can setup appenders to write to file or console or other destinations, like so:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;Configuration&gt;\n    &lt;Appenders&gt;\n        &lt;Console name=&quot;Console&quot; target=&quot;SYSTEM_OUT&quot;&gt;\n            &lt;PatternLayout pattern=&quot;%d{HH:mm:ss.SSS} [%t] %-5level %logger{36} - %msg%n&quot;/&gt;\n        &lt;/Console&gt;\n        &lt;Appender type=&quot;File&quot; name=&quot;File&quot; fileName=&quot;/path/to/logfiles/AandB.log&quot;&gt;\n            &lt;Layout type=&quot;PatternLayout&quot;&gt;\n                &lt;Pattern&gt;%d %p %C{1.} [%t] %m%n&lt;/Pattern&gt;\n            &lt;/Layout&gt;\n        &lt;/Appender&gt;\n    &lt;/Appenders&gt;\n    &lt;Loggers&gt;\n        &lt;Logger level=&quot;info&quot;  name=&quot;A&quot;&gt;&lt;!-- speficially route these messages to the file appender only --&gt;\n            &lt;AppenderRef ref=&quot;File&quot;/&gt; \n        &lt;/Logger&gt;\n        &lt;Logger level=&quot;info&quot;  name=&quot;B&quot;&gt;&lt;!-- speficially route these messages to the file and console appenders --&gt;\n            &lt;AppenderRef ref=&quot;Console&quot;/&gt; \n            &lt;AppenderRef ref=&quot;File&quot;/&gt; \n        &lt;/Logger&gt;\n        &lt;Root level=&quot;trace&quot;&gt; &lt;!-- per default route all log statements to the console, which is where logging for C will end up --&gt;\n            &lt;AppenderRef ref=&quot;Console&quot;/&gt;\n        &lt;/Root&gt;\n    &lt;/Loggers&gt;    \n&lt;/Configuration&gt;\n</code></pre>\n<p>While it is possible, I do not see it very efficient to create a separate logfile (=&gt; file appender) for each single class. But on library level this can make sense.</p>\n<p>See details on <a href=\"https://logging.apache.org/log4j/2.x/manual/configuration.html\" rel=\"nofollow noreferrer\">https://logging.apache.org/log4j/2.x/manual/configuration.html</a></p>\n"}],"owner":{"account_id":27906986,"reputation":27,"user_id":21309960,"display_name":"Mustafa Dahodwala"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":523,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":75853353,"answer_count":1,"score":0,"last_activity_date":1700048613,"creation_date":1679903320,"question_id":75853264,"body_markdown":"I am currently using a Spring Boot Application, where I am logging out every Log into the console.\r\n\r\nBut Now I wanted to log every log into a specific class file name.\r\n\r\nExample\r\n\r\n \r\n\r\n    class A {\r\n        public void test() {\r\n            log.info(&quot;Test method&quot;);\r\n        }\r\n    }\r\n\r\nSo the log for this code will be in one of the log folder, where the file name will be `A` (the class Name) and log &quot;Test method&quot; will be inside the file `A`.","title":"How can I make Log Files for every Class using Log4j2?","body":"<p>I am currently using a Spring Boot Application, where I am logging out every Log into the console.</p>\n<p>But Now I wanted to log every log into a specific class file name.</p>\n<p>Example</p>\n<pre><code>class A {\n    public void test() {\n        log.info(&quot;Test method&quot;);\n    }\n}\n</code></pre>\n<p>So the log for this code will be in one of the log folder, where the file name will be <code>A</code> (the class Name) and log &quot;Test method&quot; will be inside the file <code>A</code>.</p>\n"},{"tags":["java","debugging","logging","resttemplate"],"comments":[{"owner":{"account_id":256980,"reputation":3763,"user_id":1071757,"display_name":"davidfrancis"},"score":46,"creation_date":1516123653,"post_id":7952154,"comment_id":83558192,"body_markdown":"Warning to anyone reading in 2018: There isn&#39;t a simple answer to this!","body":"Warning to anyone reading in 2018: There isn&#39;t a simple answer to this!"},{"owner":{"account_id":1310846,"reputation":1407,"user_id":1258873,"accept_rate":86,"display_name":"Sergey Chepurnov"},"score":4,"creation_date":1516884840,"post_id":7952154,"comment_id":83878045,"body_markdown":"Most easy way is to use a breakpoint in write(...) method of AbstractHttpMessageConverter class, there is a outputMessage object where you could see the data. P.S. You can copy the value and then format it with online formatter.","body":"Most easy way is to use a breakpoint in write(...) method of AbstractHttpMessageConverter class, there is a outputMessage object where you could see the data. P.S. You can copy the value and then format it with online formatter."},{"owner":{"account_id":198768,"reputation":1124,"user_id":443633,"display_name":"michaelok"},"score":2,"creation_date":1550098074,"post_id":7952154,"comment_id":96150140,"body_markdown":"seems like this should be easy to do in Spring, but, judging from the answers here - not the case. So one other solution, would be to bypass Spring entirely and use a tool like Fiddler to capture the request/response.","body":"seems like this should be easy to do in Spring, but, judging from the answers here - not the case. So one other solution, would be to bypass Spring entirely and use a tool like Fiddler to capture the request/response."},{"owner":{"account_id":12735021,"reputation":459,"user_id":9250232,"display_name":"Solanki Vaibhav"},"score":0,"creation_date":1557138177,"post_id":7952154,"comment_id":98652298,"body_markdown":"read the answer to this question from the following a link : [spring-resttemplate-how-to-enable-full-debugging-logging-of-requests-responses](https://stackoverflow.com/questions/3892018/how-do-i-log-response-in-spring-resttemplate/56003085#56003085)","body":"read the answer to this question from the following a link : <a href=\"https://stackoverflow.com/questions/3892018/how-do-i-log-response-in-spring-resttemplate/56003085#56003085\">spring-resttemplate-how-to-enable-full-debugging-logging-of-&zwnj;&#8203;requests-responses</a>"},{"owner":{"account_id":141852,"reputation":4322,"user_id":349169,"accept_rate":78,"display_name":"Chris"},"score":0,"creation_date":1564398631,"post_id":7952154,"comment_id":101005039,"body_markdown":"July 2019: As there is still no simple solution to this question, I tried to give a summary of the other 24 answers (so far) and their comments and discussions in [my own answer below](https://stackoverflow.com/a/57252427/349169). Hope it helps.","body":"July 2019: As there is still no simple solution to this question, I tried to give a summary of the other 24 answers (so far) and their comments and discussions in <a href=\"https://stackoverflow.com/a/57252427/349169\">my own answer below</a>. Hope it helps."},{"owner":{"account_id":9553438,"reputation":3539,"user_id":7096763,"display_name":"MikaelF"},"score":0,"creation_date":1564862416,"post_id":7952154,"comment_id":101171711,"body_markdown":"Nothing seemed to work with my Intellij/gradle/Spring Boot config, but I managed to fix my issue with the online [webhook.site](https://webhook.site/) logger.","body":"Nothing seemed to work with my Intellij/gradle/Spring Boot config, but I managed to fix my issue with the online <a href=\"https://webhook.site/\" rel=\"nofollow noreferrer\">webhook.site</a> logger."},{"owner":{"account_id":9540,"reputation":25169,"user_id":17675,"accept_rate":81,"display_name":"Zombies"},"score":0,"creation_date":1588618935,"post_id":7952154,"comment_id":108963186,"body_markdown":"I think it&#39;s time to walk down the path of &quot;restTemplate alternatives&quot;","body":"I think it&#39;s time to walk down the path of &quot;restTemplate alternatives&quot;"}],"answers":[{"tags":[],"owner":{"account_id":307979,"reputation":3127,"user_id":619596,"display_name":"Paul Sabou"},"down_vote_count":6,"up_vote_count":31,"is_accepted":true,"score":25,"last_activity_date":1320136908,"creation_date":1320136908,"answer_id":7964142,"question_id":7952154,"body_markdown":"I finally found a way to do this in the right way.\r\nMost of the solution comes from \r\nhttps://stackoverflow.com/questions/3387441/how-do-i-configure-spring-and-slf4j-so-that-i-can-get-logging\r\n\r\nIt seems there are two things that need to be done :\r\n\r\n 1. Add the following line in log4j.properties : `log4j.logger.httpclient.wire=DEBUG`\r\n 2. Make sure spring doesn&#39;t ignore your logging config\r\n\r\nThe second issue happens mostly to spring environments where slf4j is used (as it was my case).\r\nAs such, when slf4j is used make sure that the following two things happen :\r\n\r\n 1. There is no commons-logging library in your classpath : this can be done by adding the exclusion descriptors in your pom :&lt;exclusions&gt;\r\n\r\n\t\t\t\t&lt;exclusions&gt;&lt;exclusion&gt;\r\n\t\t\t\t\t&lt;groupId&gt;commons-logging&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;commons-logging&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/exclusion&gt;\r\n\t\t\t&lt;/exclusions&gt;\r\n\r\n 2. The log4j.properties file is stored somewhere in the classpath where spring can find/see it. If you have problems with this, a last resort solution would be to put the log4j.properties file in the default package (not a good practice but just to see that things work as you expect)\r\n\r\n \r\n\r\n","title":"Spring RestTemplate - how to enable full debugging/logging of requests/responses?","body":"<p>I finally found a way to do this in the right way.\nMost of the solution comes from \n<a href=\"https://stackoverflow.com/questions/3387441/how-do-i-configure-spring-and-slf4j-so-that-i-can-get-logging\">How do I configure Spring and SLF4J so that I can get logging?</a></p>\n\n<p>It seems there are two things that need to be done :</p>\n\n<ol>\n<li>Add the following line in log4j.properties : <code>log4j.logger.httpclient.wire=DEBUG</code></li>\n<li>Make sure spring doesn't ignore your logging config</li>\n</ol>\n\n<p>The second issue happens mostly to spring environments where slf4j is used (as it was my case).\nAs such, when slf4j is used make sure that the following two things happen :</p>\n\n<ol>\n<li><p>There is no commons-logging library in your classpath : this can be done by adding the exclusion descriptors in your pom :</p>\n\n<pre><code>        &lt;exclusions&gt;&lt;exclusion&gt;\n            &lt;groupId&gt;commons-logging&lt;/groupId&gt;\n            &lt;artifactId&gt;commons-logging&lt;/artifactId&gt;\n        &lt;/exclusion&gt;\n    &lt;/exclusions&gt;\n</code></pre></li>\n<li><p>The log4j.properties file is stored somewhere in the classpath where spring can find/see it. If you have problems with this, a last resort solution would be to put the log4j.properties file in the default package (not a good practice but just to see that things work as you expect)</p></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":11209,"reputation":25528,"user_id":21499,"accept_rate":56,"display_name":"Dr. Hans-Peter St&#246;rr"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1393339325,"creation_date":1393339325,"answer_id":22017478,"question_id":7952154,"body_markdown":"Besides the HttpClient logging described [in the other answer][1], you can also introduce a ClientHttpRequestInterceptor that reads the body of the request and the response and logs it. You might want to do this if other stuff also uses the HttpClient, or if you want a custom logging format. Caution: you will want to give the RestTemplate a BufferingClientHttpRequestFactory such that you can read the response twice.\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/7964142/21499","title":"Spring RestTemplate - how to enable full debugging/logging of requests/responses?","body":"<p>Besides the HttpClient logging described <a href=\"https://stackoverflow.com/a/7964142/21499\">in the other answer</a>, you can also introduce a ClientHttpRequestInterceptor that reads the body of the request and the response and logs it. You might want to do this if other stuff also uses the HttpClient, or if you want a custom logging format. Caution: you will want to give the RestTemplate a BufferingClientHttpRequestFactory such that you can read the response twice.</p>\n"},{"tags":[],"owner":{"account_id":1481793,"reputation":3085,"user_id":1391004,"accept_rate":45,"display_name":"mjj1409"},"down_vote_count":4,"up_vote_count":87,"is_accepted":false,"score":83,"last_activity_date":1424698591,"creation_date":1395693704,"answer_id":22620168,"question_id":7952154,"body_markdown":"Extending @hstoerr answer with some code:\r\n\r\n\r\n----------\r\n\r\n\r\nCreate LoggingRequestInterceptor to log requests responses\r\n\r\n    public class LoggingRequestInterceptor implements ClientHttpRequestInterceptor {\r\n\r\n        private static final Logger log = LoggerFactory.getLogger(LoggingRequestInterceptor.class);\r\n\t\r\n        @Override\r\n        public ClientHttpResponse intercept(HttpRequest request, byte[] body, ClientHttpRequestExecution execution) throws IOException {\r\n\t\t\r\n            ClientHttpResponse response = execution.execute(request, body);\r\n\t\t\r\n            log(request,body,response);\r\n\r\n            return response;\r\n        }\r\n\t\r\n        private void log(HttpRequest request, byte[] body, ClientHttpResponse response) throws IOException {\r\n            //do logging\r\n        }\r\n    }\r\n\r\nSetup RestTemplate\r\n\r\n    RestTemplate rt = new RestTemplate();\r\n\t\t\r\n    //set interceptors/requestFactory\r\n    ClientHttpRequestInterceptor ri = new LoggingRequestInterceptor();\r\n    List&lt;ClientHttpRequestInterceptor&gt; ris = new ArrayList&lt;ClientHttpRequestInterceptor&gt;();\r\n    ris.add(ri);\r\n    rt.setInterceptors(ris);\r\n    rt.setRequestFactory(new BufferingClientHttpRequestFactory(new SimpleClientHttpRequestFactory());","title":"Spring RestTemplate - how to enable full debugging/logging of requests/responses?","body":"<p>Extending @hstoerr answer with some code:</p>\n\n<hr>\n\n<p>Create LoggingRequestInterceptor to log requests responses</p>\n\n<pre><code>public class LoggingRequestInterceptor implements ClientHttpRequestInterceptor {\n\n    private static final Logger log = LoggerFactory.getLogger(LoggingRequestInterceptor.class);\n\n    @Override\n    public ClientHttpResponse intercept(HttpRequest request, byte[] body, ClientHttpRequestExecution execution) throws IOException {\n\n        ClientHttpResponse response = execution.execute(request, body);\n\n        log(request,body,response);\n\n        return response;\n    }\n\n    private void log(HttpRequest request, byte[] body, ClientHttpResponse response) throws IOException {\n        //do logging\n    }\n}\n</code></pre>\n\n<p>Setup RestTemplate</p>\n\n<pre><code>RestTemplate rt = new RestTemplate();\n\n//set interceptors/requestFactory\nClientHttpRequestInterceptor ri = new LoggingRequestInterceptor();\nList&lt;ClientHttpRequestInterceptor&gt; ris = new ArrayList&lt;ClientHttpRequestInterceptor&gt;();\nris.add(ri);\nrt.setInterceptors(ris);\nrt.setRequestFactory(new BufferingClientHttpRequestFactory(new SimpleClientHttpRequestFactory());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":304772,"reputation":11223,"user_id":614482,"accept_rate":80,"display_name":"Emerson Farrugia"},"down_vote_count":1,"up_vote_count":7,"is_accepted":false,"score":6,"last_activity_date":1415892318,"creation_date":1415891629,"answer_id":26912139,"question_id":7952154,"body_markdown":"Assuming `RestTemplate` is [configured][1] to use HttpClient 4.x, you can read up on HttpClient&#39;s logging documentation [here][2]. The loggers are different than those specified in the other answers.\r\n\r\nThe logging configuration for HttpClient 3.x is available [here][3].\r\n\r\n  [1]: http://docs.spring.io/spring/docs/current/spring-framework-reference/htmlsingle/#rest-resttemplate\r\n  [2]: http://hc.apache.org/httpcomponents-client-4.3.x/logging.html\r\n  [3]: http://hc.apache.org/httpclient-3.x/logging.html","title":"Spring RestTemplate - how to enable full debugging/logging of requests/responses?","body":"<p>Assuming <code>RestTemplate</code> is <a href=\"http://docs.spring.io/spring/docs/current/spring-framework-reference/htmlsingle/#rest-resttemplate\" rel=\"noreferrer\">configured</a> to use HttpClient 4.x, you can read up on HttpClient's logging documentation <a href=\"http://hc.apache.org/httpcomponents-client-4.3.x/logging.html\" rel=\"noreferrer\">here</a>. The loggers are different than those specified in the other answers.</p>\n\n<p>The logging configuration for HttpClient 3.x is available <a href=\"http://hc.apache.org/httpclient-3.x/logging.html\" rel=\"noreferrer\">here</a>.</p>\n"},{"tags":[],"owner":{"account_id":2841072,"reputation":3118,"user_id":2440682,"display_name":"sofiene zaghdoudi"},"down_vote_count":4,"up_vote_count":241,"is_accepted":false,"score":237,"last_activity_date":1540368052,"creation_date":1444290870,"answer_id":33009822,"question_id":7952154,"body_markdown":"Just to complete the example with a full implementation of `ClientHttpRequestInterceptor` to trace request and response: \r\n\r\n    import java.io.BufferedReader;\r\n    import java.io.IOException;\r\n    import java.io.InputStreamReader;\r\n    \r\n    import org.slf4j.Logger;\r\n    import org.slf4j.LoggerFactory;\r\n    import org.springframework.http.HttpRequest;\r\n    import org.springframework.http.client.ClientHttpRequestExecution;\r\n    import org.springframework.http.client.ClientHttpRequestInterceptor;\r\n    import org.springframework.http.client.ClientHttpResponse;\r\n    \r\n    public class LoggingRequestInterceptor implements ClientHttpRequestInterceptor {\r\n        \r\n        final static Logger log = LoggerFactory.getLogger(LoggingRequestInterceptor.class);\r\n        \r\n        @Override\r\n        public ClientHttpResponse intercept(HttpRequest request, byte[] body, ClientHttpRequestExecution execution) throws IOException {\r\n            traceRequest(request, body);\r\n            ClientHttpResponse response = execution.execute(request, body);\r\n            traceResponse(response);\r\n            return response;\r\n        }\r\n    \r\n        private void traceRequest(HttpRequest request, byte[] body) throws IOException {\r\n            log.info(&quot;===========================request begin================================================&quot;);\r\n            log.debug(&quot;URI         : {}&quot;, request.getURI());\r\n            log.debug(&quot;Method      : {}&quot;, request.getMethod());\r\n            log.debug(&quot;Headers     : {}&quot;, request.getHeaders() );\r\n            log.debug(&quot;Request body: {}&quot;, new String(body, &quot;UTF-8&quot;));\r\n            log.info(&quot;==========================request end================================================&quot;);\r\n        }\r\n        \r\n        private void traceResponse(ClientHttpResponse response) throws IOException {\r\n            StringBuilder inputStringBuilder = new StringBuilder();\r\n            BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(response.getBody(), &quot;UTF-8&quot;));\r\n            String line = bufferedReader.readLine();\r\n            while (line != null) {\r\n                inputStringBuilder.append(line);\r\n                inputStringBuilder.append(&#39;\\n&#39;);\r\n                line = bufferedReader.readLine();\r\n            }\r\n            log.info(&quot;============================response begin==========================================&quot;);\r\n            log.debug(&quot;Status code  : {}&quot;, response.getStatusCode());\r\n            log.debug(&quot;Status text  : {}&quot;, response.getStatusText());\r\n            log.debug(&quot;Headers      : {}&quot;, response.getHeaders());\r\n            log.debug(&quot;Response body: {}&quot;, inputStringBuilder.toString());\r\n            log.info(&quot;=======================response end=================================================&quot;);\r\n        }\r\n        \r\n    }\r\n\r\nThen instantiate `RestTemplate` using a `BufferingClientHttpRequestFactory` and the `LoggingRequestInterceptor`:\r\n\r\n    RestTemplate restTemplate = new RestTemplate(new BufferingClientHttpRequestFactory(new SimpleClientHttpRequestFactory()));\r\n    List&lt;ClientHttpRequestInterceptor&gt; interceptors = new ArrayList&lt;&gt;();\r\n    interceptors.add(new LoggingRequestInterceptor());\r\n    restTemplate.setInterceptors(interceptors);\r\n\r\nThe `BufferingClientHttpRequestFactory` is required as we want to use the response body both in the interceptor and for the initial calling code. The default implementation allows to read the response body only once.","title":"Spring RestTemplate - how to enable full debugging/logging of requests/responses?","body":"<p>Just to complete the example with a full implementation of <code>ClientHttpRequestInterceptor</code> to trace request and response: </p>\n\n<pre><code>import java.io.BufferedReader;\nimport java.io.IOException;\nimport java.io.InputStreamReader;\n\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.http.HttpRequest;\nimport org.springframework.http.client.ClientHttpRequestExecution;\nimport org.springframework.http.client.ClientHttpRequestInterceptor;\nimport org.springframework.http.client.ClientHttpResponse;\n\npublic class LoggingRequestInterceptor implements ClientHttpRequestInterceptor {\n\n    final static Logger log = LoggerFactory.getLogger(LoggingRequestInterceptor.class);\n\n    @Override\n    public ClientHttpResponse intercept(HttpRequest request, byte[] body, ClientHttpRequestExecution execution) throws IOException {\n        traceRequest(request, body);\n        ClientHttpResponse response = execution.execute(request, body);\n        traceResponse(response);\n        return response;\n    }\n\n    private void traceRequest(HttpRequest request, byte[] body) throws IOException {\n        log.info(\"===========================request begin================================================\");\n        log.debug(\"URI         : {}\", request.getURI());\n        log.debug(\"Method      : {}\", request.getMethod());\n        log.debug(\"Headers     : {}\", request.getHeaders() );\n        log.debug(\"Request body: {}\", new String(body, \"UTF-8\"));\n        log.info(\"==========================request end================================================\");\n    }\n\n    private void traceResponse(ClientHttpResponse response) throws IOException {\n        StringBuilder inputStringBuilder = new StringBuilder();\n        BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(response.getBody(), \"UTF-8\"));\n        String line = bufferedReader.readLine();\n        while (line != null) {\n            inputStringBuilder.append(line);\n            inputStringBuilder.append('\\n');\n            line = bufferedReader.readLine();\n        }\n        log.info(\"============================response begin==========================================\");\n        log.debug(\"Status code  : {}\", response.getStatusCode());\n        log.debug(\"Status text  : {}\", response.getStatusText());\n        log.debug(\"Headers      : {}\", response.getHeaders());\n        log.debug(\"Response body: {}\", inputStringBuilder.toString());\n        log.info(\"=======================response end=================================================\");\n    }\n\n}\n</code></pre>\n\n<p>Then instantiate <code>RestTemplate</code> using a <code>BufferingClientHttpRequestFactory</code> and the <code>LoggingRequestInterceptor</code>:</p>\n\n<pre><code>RestTemplate restTemplate = new RestTemplate(new BufferingClientHttpRequestFactory(new SimpleClientHttpRequestFactory()));\nList&lt;ClientHttpRequestInterceptor&gt; interceptors = new ArrayList&lt;&gt;();\ninterceptors.add(new LoggingRequestInterceptor());\nrestTemplate.setInterceptors(interceptors);\n</code></pre>\n\n<p>The <code>BufferingClientHttpRequestFactory</code> is required as we want to use the response body both in the interceptor and for the initial calling code. The default implementation allows to read the response body only once.</p>\n"},{"tags":[],"owner":{"account_id":2372918,"reputation":4836,"user_id":2077101,"accept_rate":64,"display_name":"James Watkins"},"down_vote_count":1,"up_vote_count":33,"is_accepted":false,"score":32,"last_activity_date":1474722967,"creation_date":1456866440,"answer_id":35733521,"question_id":7952154,"body_markdown":"None of these answers actually solve 100% of the problem. mjj1409 gets most of it, but conveniently avoids the issue of logging the response, which takes a bit more work. Paul Sabou provides a solution that seems realistic, but doesn&#39;t provide enough details to actually implement (and it didn&#39;t work at all for me). Sofiene got the logging but with a critical problem: the response is no longer readable because the input stream has already been consumed!\r\n\r\nI recommend using a BufferingClientHttpResponseWrapper to wrap the response object to allow reading the response body multiple times:\r\n\r\n    public class LoggingRequestInterceptor implements ClientHttpRequestInterceptor {\r\n\r\n        private static final Logger logger = LoggerFactory.getLogger(LoggingRequestInterceptor.class);\r\n\r\n        @Override\r\n        public ClientHttpResponse intercept(final HttpRequest request, final byte[] body,\r\n                final ClientHttpRequestExecution execution) throws IOException {\r\n            ClientHttpResponse response = execution.execute(request, body);\r\n\r\n            response = log(request, body, response);\r\n\r\n            return response;\r\n        }\r\n\r\n        private ClientHttpResponse log(final HttpRequest request, final byte[] body, final ClientHttpResponse response) {\r\n            final ClientHttpResponse responseCopy = new BufferingClientHttpResponseWrapper(response);\r\n            logger.debug(&quot;Method: &quot;, request.getMethod().toString());\r\n            logger.debug(&quot;URI: &quot;, , request.getURI().toString());\r\n            logger.debug(&quot;Request Body: &quot; + new String(body));\r\n            logger.debug(&quot;Response body: &quot; + IOUtils.toString(responseCopy.getBody()));\r\n            return responseCopy;\r\n        }\r\n\r\n    }\r\n\r\nThis will not consume the InputStream because the response body is loaded into memory and can be read multiple times. If you do not have the BufferingClientHttpResponseWrapper on your classpath, you can find the simple implementation here:\r\n\r\nhttps://github.com/spring-projects/spring-android/blob/master/spring-android-rest-template/src/main/java/org/springframework/http/client/BufferingClientHttpResponseWrapper.java\r\n\r\nFor setting up the RestTemplate:\r\n\r\n    LoggingRequestInterceptor loggingInterceptor = new LoggingRequestInterceptor();\r\n    restTemplate.getInterceptors().add(loggingInterceptor);","title":"Spring RestTemplate - how to enable full debugging/logging of requests/responses?","body":"<p>None of these answers actually solve 100% of the problem. mjj1409 gets most of it, but conveniently avoids the issue of logging the response, which takes a bit more work. Paul Sabou provides a solution that seems realistic, but doesn't provide enough details to actually implement (and it didn't work at all for me). Sofiene got the logging but with a critical problem: the response is no longer readable because the input stream has already been consumed!</p>\n\n<p>I recommend using a BufferingClientHttpResponseWrapper to wrap the response object to allow reading the response body multiple times:</p>\n\n<pre><code>public class LoggingRequestInterceptor implements ClientHttpRequestInterceptor {\n\n    private static final Logger logger = LoggerFactory.getLogger(LoggingRequestInterceptor.class);\n\n    @Override\n    public ClientHttpResponse intercept(final HttpRequest request, final byte[] body,\n            final ClientHttpRequestExecution execution) throws IOException {\n        ClientHttpResponse response = execution.execute(request, body);\n\n        response = log(request, body, response);\n\n        return response;\n    }\n\n    private ClientHttpResponse log(final HttpRequest request, final byte[] body, final ClientHttpResponse response) {\n        final ClientHttpResponse responseCopy = new BufferingClientHttpResponseWrapper(response);\n        logger.debug(\"Method: \", request.getMethod().toString());\n        logger.debug(\"URI: \", , request.getURI().toString());\n        logger.debug(\"Request Body: \" + new String(body));\n        logger.debug(\"Response body: \" + IOUtils.toString(responseCopy.getBody()));\n        return responseCopy;\n    }\n\n}\n</code></pre>\n\n<p>This will not consume the InputStream because the response body is loaded into memory and can be read multiple times. If you do not have the BufferingClientHttpResponseWrapper on your classpath, you can find the simple implementation here:</p>\n\n<p><a href=\"https://github.com/spring-projects/spring-android/blob/master/spring-android-rest-template/src/main/java/org/springframework/http/client/BufferingClientHttpResponseWrapper.java\">https://github.com/spring-projects/spring-android/blob/master/spring-android-rest-template/src/main/java/org/springframework/http/client/BufferingClientHttpResponseWrapper.java</a></p>\n\n<p>For setting up the RestTemplate:</p>\n\n<pre><code>LoggingRequestInterceptor loggingInterceptor = new LoggingRequestInterceptor();\nrestTemplate.getInterceptors().add(loggingInterceptor);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":97204,"reputation":4979,"user_id":263801,"accept_rate":74,"display_name":"Archie"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1459895344,"creation_date":1459895344,"answer_id":36438213,"question_id":7952154,"body_markdown":"The trick of configuring your `RestTemplate` with a `BufferingClientHttpRequestFactory` doesn&#39;t work if you are using any `ClientHttpRequestInterceptor`, which you will if you are trying to log via interceptors. This is due to the way that `InterceptingHttpAccessor` (which `RestTemplate` subclasses) works.\r\n\r\nLong story short... just use this class in place of `RestTemplate` (note this uses the SLF4J logging API, edit as needed):\r\n\r\n    import java.io.ByteArrayOutputStream;\r\n    import java.io.IOException;\r\n    import java.io.InputStream;\r\n    import java.lang.reflect.Constructor;\r\n    import java.nio.charset.StandardCharsets;\r\n    import java.util.List;\r\n    import java.util.Map;\r\n    \r\n    import javax.annotation.PostConstruct;\r\n    \r\n    import org.slf4j.Logger;\r\n    import org.slf4j.LoggerFactory;\r\n    import org.springframework.http.HttpHeaders;\r\n    import org.springframework.http.HttpRequest;\r\n    import org.springframework.http.HttpStatus;\r\n    import org.springframework.http.client.ClientHttpRequestExecution;\r\n    import org.springframework.http.client.ClientHttpRequestInterceptor;\r\n    import org.springframework.http.client.ClientHttpResponse;\r\n    import org.springframework.web.client.RestTemplate;\r\n    \r\n    /**\r\n     * A {@link RestTemplate} that logs every request and response.\r\n     */\r\n    public class LoggingRestTemplate extends RestTemplate {\r\n    \r\n        // Bleh, this class is not public\r\n        private static final String RESPONSE_WRAPPER_CLASS = &quot;org.springframework.http.client.BufferingClientHttpResponseWrapper&quot;;\r\n    \r\n        private Logger log = LoggerFactory.getLogger(this.getClass());\r\n    \r\n        private boolean hideAuthorizationHeaders = true;\r\n        private Class&lt;?&gt; wrapperClass;\r\n        private Constructor&lt;?&gt; wrapperConstructor;\r\n    \r\n        /**\r\n         * Configure the logger to log requests and responses to.\r\n         *\r\n         * @param log log destination, or null to disable\r\n         */\r\n        public void setLogger(Logger log) {\r\n            this.log = log;\r\n        }\r\n    \r\n        /**\r\n         * Configure the logger to log requests and responses to by name.\r\n         *\r\n         * @param name name of the log destination, or null to disable\r\n         */\r\n        public void setLoggerName(String name) {\r\n            this.setLogger(name != null ? LoggerFactory.getLogger(name) : null);\r\n        }\r\n    \r\n        /**\r\n         * Configure whether to hide the contents of {@code Authorization} headers.\r\n         *\r\n         * &lt;p&gt;\r\n         * Default true.\r\n         *\r\n         * @param hideAuthorizationHeaders true to hide, otherwise false\r\n         */\r\n        public void setHideAuthorizationHeaders(boolean hideAuthorizationHeaders) {\r\n            this.hideAuthorizationHeaders = hideAuthorizationHeaders;\r\n        }\r\n    \r\n        /**\r\n         * Log a request.\r\n         */\r\n        protected void traceRequest(HttpRequest request, byte[] body) {\r\n            this.log.debug(&quot;xmit: {} {}\\n{}{}&quot;, request.getMethod(), request.getURI(), this.toString(request.getHeaders()),\r\n              body != null &amp;&amp; body.length &gt; 0 ? &quot;\\n\\n&quot; + new String(body, StandardCharsets.UTF_8) : &quot;&quot;);\r\n        }\r\n    \r\n        /**\r\n         * Log a response.\r\n         */\r\n        protected void traceResponse(ClientHttpResponse response) {\r\n            final ByteArrayOutputStream bodyBuf = new ByteArrayOutputStream();\r\n            HttpStatus statusCode = null;\r\n            try {\r\n                statusCode = response.getStatusCode();\r\n            } catch (IOException e) {\r\n                // ignore\r\n            }\r\n            String statusText = null;\r\n            try {\r\n                statusText = response.getStatusText();\r\n            } catch (IOException e) {\r\n                // ignore\r\n            }\r\n            try (final InputStream input = response.getBody()) {\r\n                byte[] b = new byte[1024];\r\n                int r;\r\n                while ((r = input.read(b)) != -1)\r\n                    bodyBuf.write(b, 0, r);\r\n            } catch (IOException e) {\r\n                // ignore\r\n            }\r\n            this.log.debug(&quot;recv: {} {}\\n{}{}&quot;, statusCode, statusText, this.toString(response.getHeaders()),\r\n              bodyBuf.size() &gt; 0 ? &quot;\\n\\n&quot; + new String(bodyBuf.toByteArray(), StandardCharsets.UTF_8) : &quot;&quot;);\r\n        }\r\n    \r\n        @PostConstruct\r\n        private void addLoggingInterceptor() {\r\n            this.getInterceptors().add(new ClientHttpRequestInterceptor() {\r\n                @Override\r\n                public ClientHttpResponse intercept(HttpRequest request, byte[] body, ClientHttpRequestExecution execution)\r\n                  throws IOException {\r\n    \r\n                    // Log request\r\n                    if (LoggingRestTemplate.this.log != null &amp;&amp; LoggingRestTemplate.this.log.isDebugEnabled())\r\n                        LoggingRestTemplate.this.traceRequest(request, body);\r\n    \r\n                    // Perform request\r\n                    ClientHttpResponse response = execution.execute(request, body);\r\n    \r\n                    // Log response\r\n                    if (LoggingRestTemplate.this.log != null &amp;&amp; LoggingRestTemplate.this.log.isDebugEnabled()) {\r\n                        final ClientHttpResponse bufferedResponse = LoggingRestTemplate.this.ensureBuffered(response);\r\n                        if (bufferedResponse != null) {\r\n                            LoggingRestTemplate.this.traceResponse(bufferedResponse);\r\n                            response = bufferedResponse;\r\n                        }\r\n                    }\r\n    \r\n                    // Done\r\n                    return response;\r\n                }\r\n            });\r\n        }\r\n    \r\n        private ClientHttpResponse ensureBuffered(ClientHttpResponse response) {\r\n            try {\r\n                if (this.wrapperClass == null)\r\n                    this.wrapperClass = Class.forName(RESPONSE_WRAPPER_CLASS, false, ClientHttpResponse.class.getClassLoader());\r\n                if (!this.wrapperClass.isInstance(response)) {\r\n                    if (this.wrapperConstructor == null) {\r\n                        this.wrapperConstructor = this.wrapperClass.getDeclaredConstructor(ClientHttpResponse.class);\r\n                        this.wrapperConstructor.setAccessible(true);\r\n                    }\r\n                    response = (ClientHttpResponse)this.wrapperConstructor.newInstance(response);\r\n                }\r\n                return response;\r\n            } catch (Exception e) {\r\n                this.log.error(&quot;error creating {} instance: {}&quot;, RESPONSE_WRAPPER_CLASS, e);\r\n                return null;\r\n            }\r\n        }\r\n    \r\n        private String toString(HttpHeaders headers) {\r\n            final StringBuilder headerBuf = new StringBuilder();\r\n            for (Map.Entry&lt;String, List&lt;String&gt;&gt; entry : headers.entrySet()) {\r\n                if (headerBuf.length() &gt; 0)\r\n                    headerBuf.append(&#39;\\n&#39;);\r\n                final String name = entry.getKey();\r\n                for (String value : entry.getValue()) {\r\n                    if (this.hideAuthorizationHeaders &amp;&amp; name.equalsIgnoreCase(HttpHeaders.AUTHORIZATION))\r\n                        value = &quot;[omitted]&quot;;\r\n                    headerBuf.append(name).append(&quot;: &quot;).append(value);\r\n                }\r\n            }\r\n            return headerBuf.toString();\r\n        }\r\n    }\r\n\r\nI agree it&#39;s silly that it takes this much work just to do this.","title":"Spring RestTemplate - how to enable full debugging/logging of requests/responses?","body":"<p>The trick of configuring your <code>RestTemplate</code> with a <code>BufferingClientHttpRequestFactory</code> doesn't work if you are using any <code>ClientHttpRequestInterceptor</code>, which you will if you are trying to log via interceptors. This is due to the way that <code>InterceptingHttpAccessor</code> (which <code>RestTemplate</code> subclasses) works.</p>\n\n<p>Long story short... just use this class in place of <code>RestTemplate</code> (note this uses the SLF4J logging API, edit as needed):</p>\n\n<pre><code>import java.io.ByteArrayOutputStream;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.lang.reflect.Constructor;\nimport java.nio.charset.StandardCharsets;\nimport java.util.List;\nimport java.util.Map;\n\nimport javax.annotation.PostConstruct;\n\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.http.HttpHeaders;\nimport org.springframework.http.HttpRequest;\nimport org.springframework.http.HttpStatus;\nimport org.springframework.http.client.ClientHttpRequestExecution;\nimport org.springframework.http.client.ClientHttpRequestInterceptor;\nimport org.springframework.http.client.ClientHttpResponse;\nimport org.springframework.web.client.RestTemplate;\n\n/**\n * A {@link RestTemplate} that logs every request and response.\n */\npublic class LoggingRestTemplate extends RestTemplate {\n\n    // Bleh, this class is not public\n    private static final String RESPONSE_WRAPPER_CLASS = \"org.springframework.http.client.BufferingClientHttpResponseWrapper\";\n\n    private Logger log = LoggerFactory.getLogger(this.getClass());\n\n    private boolean hideAuthorizationHeaders = true;\n    private Class&lt;?&gt; wrapperClass;\n    private Constructor&lt;?&gt; wrapperConstructor;\n\n    /**\n     * Configure the logger to log requests and responses to.\n     *\n     * @param log log destination, or null to disable\n     */\n    public void setLogger(Logger log) {\n        this.log = log;\n    }\n\n    /**\n     * Configure the logger to log requests and responses to by name.\n     *\n     * @param name name of the log destination, or null to disable\n     */\n    public void setLoggerName(String name) {\n        this.setLogger(name != null ? LoggerFactory.getLogger(name) : null);\n    }\n\n    /**\n     * Configure whether to hide the contents of {@code Authorization} headers.\n     *\n     * &lt;p&gt;\n     * Default true.\n     *\n     * @param hideAuthorizationHeaders true to hide, otherwise false\n     */\n    public void setHideAuthorizationHeaders(boolean hideAuthorizationHeaders) {\n        this.hideAuthorizationHeaders = hideAuthorizationHeaders;\n    }\n\n    /**\n     * Log a request.\n     */\n    protected void traceRequest(HttpRequest request, byte[] body) {\n        this.log.debug(\"xmit: {} {}\\n{}{}\", request.getMethod(), request.getURI(), this.toString(request.getHeaders()),\n          body != null &amp;&amp; body.length &gt; 0 ? \"\\n\\n\" + new String(body, StandardCharsets.UTF_8) : \"\");\n    }\n\n    /**\n     * Log a response.\n     */\n    protected void traceResponse(ClientHttpResponse response) {\n        final ByteArrayOutputStream bodyBuf = new ByteArrayOutputStream();\n        HttpStatus statusCode = null;\n        try {\n            statusCode = response.getStatusCode();\n        } catch (IOException e) {\n            // ignore\n        }\n        String statusText = null;\n        try {\n            statusText = response.getStatusText();\n        } catch (IOException e) {\n            // ignore\n        }\n        try (final InputStream input = response.getBody()) {\n            byte[] b = new byte[1024];\n            int r;\n            while ((r = input.read(b)) != -1)\n                bodyBuf.write(b, 0, r);\n        } catch (IOException e) {\n            // ignore\n        }\n        this.log.debug(\"recv: {} {}\\n{}{}\", statusCode, statusText, this.toString(response.getHeaders()),\n          bodyBuf.size() &gt; 0 ? \"\\n\\n\" + new String(bodyBuf.toByteArray(), StandardCharsets.UTF_8) : \"\");\n    }\n\n    @PostConstruct\n    private void addLoggingInterceptor() {\n        this.getInterceptors().add(new ClientHttpRequestInterceptor() {\n            @Override\n            public ClientHttpResponse intercept(HttpRequest request, byte[] body, ClientHttpRequestExecution execution)\n              throws IOException {\n\n                // Log request\n                if (LoggingRestTemplate.this.log != null &amp;&amp; LoggingRestTemplate.this.log.isDebugEnabled())\n                    LoggingRestTemplate.this.traceRequest(request, body);\n\n                // Perform request\n                ClientHttpResponse response = execution.execute(request, body);\n\n                // Log response\n                if (LoggingRestTemplate.this.log != null &amp;&amp; LoggingRestTemplate.this.log.isDebugEnabled()) {\n                    final ClientHttpResponse bufferedResponse = LoggingRestTemplate.this.ensureBuffered(response);\n                    if (bufferedResponse != null) {\n                        LoggingRestTemplate.this.traceResponse(bufferedResponse);\n                        response = bufferedResponse;\n                    }\n                }\n\n                // Done\n                return response;\n            }\n        });\n    }\n\n    private ClientHttpResponse ensureBuffered(ClientHttpResponse response) {\n        try {\n            if (this.wrapperClass == null)\n                this.wrapperClass = Class.forName(RESPONSE_WRAPPER_CLASS, false, ClientHttpResponse.class.getClassLoader());\n            if (!this.wrapperClass.isInstance(response)) {\n                if (this.wrapperConstructor == null) {\n                    this.wrapperConstructor = this.wrapperClass.getDeclaredConstructor(ClientHttpResponse.class);\n                    this.wrapperConstructor.setAccessible(true);\n                }\n                response = (ClientHttpResponse)this.wrapperConstructor.newInstance(response);\n            }\n            return response;\n        } catch (Exception e) {\n            this.log.error(\"error creating {} instance: {}\", RESPONSE_WRAPPER_CLASS, e);\n            return null;\n        }\n    }\n\n    private String toString(HttpHeaders headers) {\n        final StringBuilder headerBuf = new StringBuilder();\n        for (Map.Entry&lt;String, List&lt;String&gt;&gt; entry : headers.entrySet()) {\n            if (headerBuf.length() &gt; 0)\n                headerBuf.append('\\n');\n            final String name = entry.getKey();\n            for (String value : entry.getValue()) {\n                if (this.hideAuthorizationHeaders &amp;&amp; name.equalsIgnoreCase(HttpHeaders.AUTHORIZATION))\n                    value = \"[omitted]\";\n                headerBuf.append(name).append(\": \").append(value);\n            }\n        }\n        return headerBuf.toString();\n    }\n}\n</code></pre>\n\n<p>I agree it's silly that it takes this much work just to do this.</p>\n"},{"tags":[],"owner":{"account_id":1406827,"reputation":1134,"user_id":1334305,"accept_rate":29,"display_name":"user666"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1460036608,"creation_date":1460036608,"answer_id":36478051,"question_id":7952154,"body_markdown":"Adding to above discussion this only represents Happy scenarios. probably you will not be able to log the response if an **Error** comes .\r\n\r\nIn this case plus all the cases above you must override **DefaultResponseErrorHandler** and set it like below \r\n\r\n    restTemplate.setErrorHandler(new DefaultResponseErrorHandlerImpl());\r\n\r\n","title":"Spring RestTemplate - how to enable full debugging/logging of requests/responses?","body":"<p>Adding to above discussion this only represents Happy scenarios. probably you will not be able to log the response if an <strong>Error</strong> comes .</p>\n\n<p>In this case plus all the cases above you must override <strong>DefaultResponseErrorHandler</strong> and set it like below </p>\n\n<pre><code>restTemplate.setErrorHandler(new DefaultResponseErrorHandlerImpl());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":273794,"reputation":3600,"user_id":565637,"accept_rate":76,"display_name":"gamliela"},"down_vote_count":3,"up_vote_count":52,"is_accepted":false,"score":49,"last_activity_date":1467639276,"creation_date":1467638120,"answer_id":38185706,"question_id":7952154,"body_markdown":"Your best bet is to add `logging.level.org.springframework.web.client.RestTemplate=DEBUG` to the `application.properties` file.\r\n\r\nOther solutions like setting `log4j.logger.httpclient.wire` will not always work because they assume you use `log4j` and Apache `HttpClient`, which is not always true.\r\n\r\nNote, however, that this syntax will work only on latest versions of Spring Boot.","title":"Spring RestTemplate - how to enable full debugging/logging of requests/responses?","body":"<p>Your best bet is to add <code>logging.level.org.springframework.web.client.RestTemplate=DEBUG</code> to the <code>application.properties</code> file.</p>\n\n<p>Other solutions like setting <code>log4j.logger.httpclient.wire</code> will not always work because they assume you use <code>log4j</code> and Apache <code>HttpClient</code>, which is not always true.</p>\n\n<p>Note, however, that this syntax will work only on latest versions of Spring Boot.</p>\n"},{"tags":[],"owner":{"account_id":71353,"reputation":16394,"user_id":206466,"accept_rate":70,"display_name":"xenoterracide"},"down_vote_count":9,"up_vote_count":182,"is_accepted":false,"score":173,"last_activity_date":1471983102,"creation_date":1471981700,"answer_id":39109538,"question_id":7952154,"body_markdown":"in Spring Boot you can get the full request/response by setting this in properties (or other 12 factor method)\r\n\r\n    logging.level.org.apache.http=DEBUG\r\n\r\nthis outputs\r\n\r\n    -DEBUG .i.c.DefaultHttpClientConnectionOperator : Connecting to localhost/127.0.0.1:41827\r\n    -DEBUG .i.c.DefaultHttpClientConnectionOperator : Connection established 127.0.0.1:39546&lt;-&gt;127.0.0.1:41827\r\n    -DEBUG o.a.http.impl.execchain.MainClientExec   : Executing request POST /v0/users HTTP/1.1\r\n    -DEBUG o.a.http.impl.execchain.MainClientExec   : Target auth state: UNCHALLENGED\r\n    -DEBUG o.a.http.impl.execchain.MainClientExec   : Proxy auth state: UNCHALLENGED\r\n    -DEBUG org.apache.http.headers                  : http-outgoing-0 &gt;&gt; POST /v0/users HTTP/1.1\r\n    -DEBUG org.apache.http.headers                  : http-outgoing-0 &gt;&gt; Content-Type: application/json;charset=UTF-8\r\n    -DEBUG org.apache.http.headers                  : http-outgoing-0 &gt;&gt; Content-Length: 56\r\n    -DEBUG org.apache.http.headers                  : http-outgoing-0 &gt;&gt; Host: localhost:41827\r\n    -DEBUG org.apache.http.headers                  : http-outgoing-0 &gt;&gt; Connection: Keep-Alive\r\n    -DEBUG org.apache.http.headers                  : http-outgoing-0 &gt;&gt; User-Agent: Apache-HttpClient/4.5.2 (Java/1.8.0_102)\r\n    -DEBUG org.apache.http.headers                  : http-outgoing-0 &gt;&gt; Accept-Encoding: gzip,deflate\r\n    -DEBUG org.apache.http.wire                     : http-outgoing-0 &gt;&gt; &quot;POST /v0/users HTTP/1.1[\\r][\\n]&quot;\r\n    -DEBUG org.apache.http.wire                     : http-outgoing-0 &gt;&gt; &quot;Content-Type: application/json;charset=UTF-8[\\r][\\n]&quot;\r\n    -DEBUG org.apache.http.wire                     : http-outgoing-0 &gt;&gt; &quot;Content-Length: 56[\\r][\\n]&quot;\r\n    -DEBUG org.apache.http.wire                     : http-outgoing-0 &gt;&gt; &quot;Host: localhost:41827[\\r][\\n]&quot;\r\n    -DEBUG org.apache.http.wire                     : http-outgoing-0 &gt;&gt; &quot;Connection: Keep-Alive[\\r][\\n]&quot;\r\n    -DEBUG org.apache.http.wire                     : http-outgoing-0 &gt;&gt; &quot;User-Agent: Apache-HttpClient/4.5.2 (Java/1.8.0_102)[\\r][\\n]&quot;\r\n    -DEBUG org.apache.http.wire                     : http-outgoing-0 &gt;&gt; &quot;Accept-Encoding: gzip,deflate[\\r][\\n]&quot;\r\n    -DEBUG org.apache.http.wire                     : http-outgoing-0 &gt;&gt; &quot;[\\r][\\n]&quot;\r\n    -DEBUG org.apache.http.wire                     : http-outgoing-0 &gt;&gt; &quot;{&quot;id&quot;:null,&quot;email&quot;:&quot;xenoterracide@gmail.com&quot;,&quot;new&quot;:true}&quot;\r\n\r\nand response\r\n\r\n    -DEBUG .i.c.DefaultHttpClientConnectionOperator : Connecting to localhost/127.0.0.1:41827\r\n    -DEBUG .i.c.DefaultHttpClientConnectionOperator : Connection established 127.0.0.1:39546&lt;-&gt;127.0.0.1:41827\r\n    -DEBUG o.a.http.impl.execchain.MainClientExec   : Executing request POST /v0/users HTTP/1.1\r\n    -DEBUG o.a.http.impl.execchain.MainClientExec   : Target auth state: UNCHALLENGED\r\n    -DEBUG o.a.http.impl.execchain.MainClientExec   : Proxy auth state: UNCHALLENGED\r\n    -DEBUG org.apache.http.headers                  : http-outgoing-0 &gt;&gt; POST /v0/users HTTP/1.1\r\n    -DEBUG org.apache.http.headers                  : http-outgoing-0 &gt;&gt; Content-Type: application/json;charset=UTF-8\r\n    -DEBUG org.apache.http.headers                  : http-outgoing-0 &gt;&gt; Content-Length: 56\r\n    -DEBUG org.apache.http.headers                  : http-outgoing-0 &gt;&gt; Host: localhost:41827\r\n    -DEBUG org.apache.http.headers                  : http-outgoing-0 &gt;&gt; Connection: Keep-Alive\r\n    -DEBUG org.apache.http.headers                  : http-outgoing-0 &gt;&gt; User-Agent: Apache-HttpClient/4.5.2 (Java/1.8.0_102)\r\n    -DEBUG org.apache.http.headers                  : http-outgoing-0 &gt;&gt; Accept-Encoding: gzip,deflate\r\n    -DEBUG org.apache.http.wire                     : http-outgoing-0 &gt;&gt; &quot;POST /v0/users HTTP/1.1[\\r][\\n]&quot;\r\n    -DEBUG org.apache.http.wire                     : http-outgoing-0 &gt;&gt; &quot;Content-Type: application/json;charset=UTF-8[\\r][\\n]&quot;\r\n    -DEBUG org.apache.http.wire                     : http-outgoing-0 &gt;&gt; &quot;Content-Length: 56[\\r][\\n]&quot;\r\n    -DEBUG org.apache.http.wire                     : http-outgoing-0 &gt;&gt; &quot;Host: localhost:41827[\\r][\\n]&quot;\r\n    -DEBUG org.apache.http.wire                     : http-outgoing-0 &gt;&gt; &quot;Connection: Keep-Alive[\\r][\\n]&quot;\r\n    -DEBUG org.apache.http.wire                     : http-outgoing-0 &gt;&gt; &quot;User-Agent: Apache-HttpClient/4.5.2 (Java/1.8.0_102)[\\r][\\n]&quot;\r\n    -DEBUG org.apache.http.wire                     : http-outgoing-0 &gt;&gt; &quot;Accept-Encoding: gzip,deflate[\\r][\\n]&quot;\r\n    -DEBUG org.apache.http.wire                     : http-outgoing-0 &gt;&gt; &quot;[\\r][\\n]&quot;\r\n    -DEBUG org.apache.http.wire                     : http-outgoing-0 &gt;&gt; &quot;{&quot;id&quot;:null,&quot;email&quot;:&quot;xenoterracide@gmail.com&quot;,&quot;new&quot;:true}&quot;\r\n\r\nor just `logging.level.org.apache.http.wire=DEBUG` which seems to contain all of the relevant information\r\n","title":"Spring RestTemplate - how to enable full debugging/logging of requests/responses?","body":"<p>in Spring Boot you can get the full request/response by setting this in properties (or other 12 factor method)</p>\n\n<pre><code>logging.level.org.apache.http=DEBUG\n</code></pre>\n\n<p>this outputs</p>\n\n<pre><code>-DEBUG .i.c.DefaultHttpClientConnectionOperator : Connecting to localhost/127.0.0.1:41827\n-DEBUG .i.c.DefaultHttpClientConnectionOperator : Connection established 127.0.0.1:39546&lt;-&gt;127.0.0.1:41827\n-DEBUG o.a.http.impl.execchain.MainClientExec   : Executing request POST /v0/users HTTP/1.1\n-DEBUG o.a.http.impl.execchain.MainClientExec   : Target auth state: UNCHALLENGED\n-DEBUG o.a.http.impl.execchain.MainClientExec   : Proxy auth state: UNCHALLENGED\n-DEBUG org.apache.http.headers                  : http-outgoing-0 &gt;&gt; POST /v0/users HTTP/1.1\n-DEBUG org.apache.http.headers                  : http-outgoing-0 &gt;&gt; Content-Type: application/json;charset=UTF-8\n-DEBUG org.apache.http.headers                  : http-outgoing-0 &gt;&gt; Content-Length: 56\n-DEBUG org.apache.http.headers                  : http-outgoing-0 &gt;&gt; Host: localhost:41827\n-DEBUG org.apache.http.headers                  : http-outgoing-0 &gt;&gt; Connection: Keep-Alive\n-DEBUG org.apache.http.headers                  : http-outgoing-0 &gt;&gt; User-Agent: Apache-HttpClient/4.5.2 (Java/1.8.0_102)\n-DEBUG org.apache.http.headers                  : http-outgoing-0 &gt;&gt; Accept-Encoding: gzip,deflate\n-DEBUG org.apache.http.wire                     : http-outgoing-0 &gt;&gt; \"POST /v0/users HTTP/1.1[\\r][\\n]\"\n-DEBUG org.apache.http.wire                     : http-outgoing-0 &gt;&gt; \"Content-Type: application/json;charset=UTF-8[\\r][\\n]\"\n-DEBUG org.apache.http.wire                     : http-outgoing-0 &gt;&gt; \"Content-Length: 56[\\r][\\n]\"\n-DEBUG org.apache.http.wire                     : http-outgoing-0 &gt;&gt; \"Host: localhost:41827[\\r][\\n]\"\n-DEBUG org.apache.http.wire                     : http-outgoing-0 &gt;&gt; \"Connection: Keep-Alive[\\r][\\n]\"\n-DEBUG org.apache.http.wire                     : http-outgoing-0 &gt;&gt; \"User-Agent: Apache-HttpClient/4.5.2 (Java/1.8.0_102)[\\r][\\n]\"\n-DEBUG org.apache.http.wire                     : http-outgoing-0 &gt;&gt; \"Accept-Encoding: gzip,deflate[\\r][\\n]\"\n-DEBUG org.apache.http.wire                     : http-outgoing-0 &gt;&gt; \"[\\r][\\n]\"\n-DEBUG org.apache.http.wire                     : http-outgoing-0 &gt;&gt; \"{\"id\":null,\"email\":\"xenoterracide@gmail.com\",\"new\":true}\"\n</code></pre>\n\n<p>and response</p>\n\n<pre><code>-DEBUG .i.c.DefaultHttpClientConnectionOperator : Connecting to localhost/127.0.0.1:41827\n-DEBUG .i.c.DefaultHttpClientConnectionOperator : Connection established 127.0.0.1:39546&lt;-&gt;127.0.0.1:41827\n-DEBUG o.a.http.impl.execchain.MainClientExec   : Executing request POST /v0/users HTTP/1.1\n-DEBUG o.a.http.impl.execchain.MainClientExec   : Target auth state: UNCHALLENGED\n-DEBUG o.a.http.impl.execchain.MainClientExec   : Proxy auth state: UNCHALLENGED\n-DEBUG org.apache.http.headers                  : http-outgoing-0 &gt;&gt; POST /v0/users HTTP/1.1\n-DEBUG org.apache.http.headers                  : http-outgoing-0 &gt;&gt; Content-Type: application/json;charset=UTF-8\n-DEBUG org.apache.http.headers                  : http-outgoing-0 &gt;&gt; Content-Length: 56\n-DEBUG org.apache.http.headers                  : http-outgoing-0 &gt;&gt; Host: localhost:41827\n-DEBUG org.apache.http.headers                  : http-outgoing-0 &gt;&gt; Connection: Keep-Alive\n-DEBUG org.apache.http.headers                  : http-outgoing-0 &gt;&gt; User-Agent: Apache-HttpClient/4.5.2 (Java/1.8.0_102)\n-DEBUG org.apache.http.headers                  : http-outgoing-0 &gt;&gt; Accept-Encoding: gzip,deflate\n-DEBUG org.apache.http.wire                     : http-outgoing-0 &gt;&gt; \"POST /v0/users HTTP/1.1[\\r][\\n]\"\n-DEBUG org.apache.http.wire                     : http-outgoing-0 &gt;&gt; \"Content-Type: application/json;charset=UTF-8[\\r][\\n]\"\n-DEBUG org.apache.http.wire                     : http-outgoing-0 &gt;&gt; \"Content-Length: 56[\\r][\\n]\"\n-DEBUG org.apache.http.wire                     : http-outgoing-0 &gt;&gt; \"Host: localhost:41827[\\r][\\n]\"\n-DEBUG org.apache.http.wire                     : http-outgoing-0 &gt;&gt; \"Connection: Keep-Alive[\\r][\\n]\"\n-DEBUG org.apache.http.wire                     : http-outgoing-0 &gt;&gt; \"User-Agent: Apache-HttpClient/4.5.2 (Java/1.8.0_102)[\\r][\\n]\"\n-DEBUG org.apache.http.wire                     : http-outgoing-0 &gt;&gt; \"Accept-Encoding: gzip,deflate[\\r][\\n]\"\n-DEBUG org.apache.http.wire                     : http-outgoing-0 &gt;&gt; \"[\\r][\\n]\"\n-DEBUG org.apache.http.wire                     : http-outgoing-0 &gt;&gt; \"{\"id\":null,\"email\":\"xenoterracide@gmail.com\",\"new\":true}\"\n</code></pre>\n\n<p>or just <code>logging.level.org.apache.http.wire=DEBUG</code> which seems to contain all of the relevant information</p>\n"},{"tags":[],"owner":{"account_id":9516325,"reputation":1,"user_id":7072565,"display_name":"danshijin"},"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1484793416,"creation_date":1484793416,"answer_id":41732816,"question_id":7952154,"body_markdown":"my logger config used xml\r\n\r\n    &lt;logger name=&quot;org.springframework.web.client.RestTemplate&quot;&gt;\r\n        &lt;level value=&quot;trace&quot;/&gt;\r\n    &lt;/logger&gt;\r\n\r\n\r\nthen you will get something like below:\r\n\r\n    DEBUG org.springframework.web.client.HttpMessageConverterExtractor.extractData(HttpMessageConverterExtractor.java:92) : Reading [com.test.java.MyClass] as &quot;application/json&quot; using [org.springframework.http.converter.json.MappingJackson2HttpMessageConverter@604525f1]\r\n\r\nthrough HttpMessageConverterExtractor.java:92,you need continue to debug,and in my case,i got this:\r\n\r\n    genericMessageConverter.write(requestBody, requestBodyType, requestContentType, httpRequest);\r\nand this:\r\n\r\n    outputMessage.getBody().flush();\r\noutputMessage.getBody() contains the message http(post type) sends\r\n","title":"Spring RestTemplate - how to enable full debugging/logging of requests/responses?","body":"<p>my logger config used xml</p>\n\n<pre><code>&lt;logger name=\"org.springframework.web.client.RestTemplate\"&gt;\n    &lt;level value=\"trace\"/&gt;\n&lt;/logger&gt;\n</code></pre>\n\n<p>then you will get something like below:</p>\n\n<pre><code>DEBUG org.springframework.web.client.HttpMessageConverterExtractor.extractData(HttpMessageConverterExtractor.java:92) : Reading [com.test.java.MyClass] as \"application/json\" using [org.springframework.http.converter.json.MappingJackson2HttpMessageConverter@604525f1]\n</code></pre>\n\n<p>through HttpMessageConverterExtractor.java:92,you need continue to debug,and in my case,i got this:</p>\n\n<pre><code>genericMessageConverter.write(requestBody, requestBodyType, requestContentType, httpRequest);\n</code></pre>\n\n<p>and this:</p>\n\n<pre><code>outputMessage.getBody().flush();\n</code></pre>\n\n<p>outputMessage.getBody() contains the message http(post type) sends</p>\n"},{"tags":[],"owner":{"account_id":2021629,"reputation":57943,"user_id":1807667,"accept_rate":60,"display_name":"Ortomala Lokni"},"down_vote_count":0,"up_vote_count":33,"is_accepted":false,"score":33,"last_activity_date":1485963531,"creation_date":1485963531,"answer_id":41983744,"question_id":7952154,"body_markdown":"The solution given by xenoterracide to use\r\n\r\n    logging.level.org.apache.http=DEBUG\r\nis good but the problem is that by default Apache HttpComponents is not used.\r\n\r\nTo use Apache HttpComponents add to your pom.xml\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;\r\n        &lt;artifactId&gt;httpasyncclient&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n\r\nand configure [`RestTemplate`](http://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/client/RestTemplate.html) with :\r\n\r\n    RestTemplate restTemplate = new RestTemplate();\r\n    restTemplate.setRequestFactory(new HttpComponentsAsyncClientHttpRequestFactory());","title":"Spring RestTemplate - how to enable full debugging/logging of requests/responses?","body":"<p>The solution given by xenoterracide to use</p>\n\n<pre><code>logging.level.org.apache.http=DEBUG\n</code></pre>\n\n<p>is good but the problem is that by default Apache HttpComponents is not used.</p>\n\n<p>To use Apache HttpComponents add to your pom.xml</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;\n    &lt;artifactId&gt;httpasyncclient&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>and configure <a href=\"http://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/client/RestTemplate.html\" rel=\"noreferrer\"><code>RestTemplate</code></a> with :</p>\n\n<pre><code>RestTemplate restTemplate = new RestTemplate();\nrestTemplate.setRequestFactory(new HttpComponentsAsyncClientHttpRequestFactory());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11602307,"reputation":1,"user_id":8499057,"display_name":"Moses Meyer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1503580370,"creation_date":1503390901,"answer_id":45812721,"question_id":7952154,"body_markdown":"Best solution now, just add dependency :\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;com.github.zg2pro&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-rest-basis&lt;/artifactId&gt;\r\n      &lt;version&gt;v.x&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nIt contains a LoggingRequestInterceptor class you can add that way to your RestTemplate:\r\n\r\nintegrate this utility by adding it as an interceptor to a spring RestTemplate, in the following manner:\r\n\r\n    restTemplate.setRequestFactory(LoggingRequestFactoryFactory.build());\r\n\r\nand add an slf4j implementation to your framework like log4j.\r\n\r\nor **directly use &quot;Zg2proRestTemplate&quot;**. The &quot;best answer&quot; by @PaulSabou looks so so, since httpclient and all apache.http libs are not necessarily loaded when using a spring RestTemplate.\r\n","title":"Spring RestTemplate - how to enable full debugging/logging of requests/responses?","body":"<p>Best solution now, just add dependency :</p>\n\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;com.github.zg2pro&lt;/groupId&gt;\n  &lt;artifactId&gt;spring-rest-basis&lt;/artifactId&gt;\n  &lt;version&gt;v.x&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>It contains a LoggingRequestInterceptor class you can add that way to your RestTemplate:</p>\n\n<p>integrate this utility by adding it as an interceptor to a spring RestTemplate, in the following manner:</p>\n\n<pre><code>restTemplate.setRequestFactory(LoggingRequestFactoryFactory.build());\n</code></pre>\n\n<p>and add an slf4j implementation to your framework like log4j.</p>\n\n<p>or <strong>directly use \"Zg2proRestTemplate\"</strong>. The \"best answer\" by @PaulSabou looks so so, since httpclient and all apache.http libs are not necessarily loaded when using a spring RestTemplate.</p>\n"},{"tags":[],"owner":{"account_id":215223,"reputation":2949,"user_id":469718,"accept_rate":12,"display_name":"kisna"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1508292680,"creation_date":1508292680,"answer_id":46801797,"question_id":7952154,"body_markdown":"Strangely, none of these solutions work as RestTemplate does not seem to return the response on some client and server 500x errors. In which case, you will have log those as well by implementing ResponseErrorHandler as follows. Here is a draft code, but you get the point:\r\n\r\nYou can set the same interceptor as the error handler:\r\n\r\n    restTemplate.getInterceptors().add(interceptor);\r\n    restTemplate.setRequestFactory(new BufferingClientHttpRequestFactory(new SimpleClientHttpRequestFactory()));\r\n    restTemplate.setErrorHandler(interceptor);\r\n\r\nAnd the intercept implements both interfaces:\r\n\r\n    import java.io.BufferedReader;\r\n    import java.io.IOException;\r\n    import java.io.InputStreamReader;\r\n    import java.util.HashSet;\r\n    import java.util.Set;\r\n    import org.slf4j.Logger;\r\n    import org.slf4j.LoggerFactory;\r\n    import org.springframework.http.HttpRequest;\r\n    import org.springframework.http.HttpStatus.Series;\r\n    import org.springframework.http.client.ClientHttpRequestExecution;\r\n    import org.springframework.http.client.ClientHttpRequestInterceptor;\r\n    import org.springframework.http.client.ClientHttpResponse;\r\n    import org.springframework.web.client.DefaultResponseErrorHandler;\r\n    import org.springframework.web.client.ResponseErrorHandler;\r\n\r\n    public class LoggingRequestInterceptor implements ClientHttpRequestInterceptor, ResponseErrorHandler {\r\n        static final Logger log = LoggerFactory.getLogger(LoggingRequestInterceptor.class);\r\n        static final DefaultResponseErrorHandler defaultResponseErrorHandler = new DefaultResponseErrorHandler();\r\n        final Set&lt;Series&gt; loggableStatuses = new HashSet();\r\n\r\n        public LoggingRequestInterceptor() {\r\n        }\r\n\r\n        public LoggingRequestInterceptor(Set&lt;Series&gt; loggableStatuses) {\r\n            loggableStatuses.addAll(loggableStatuses);\r\n        }\r\n\r\n        public ClientHttpResponse intercept(HttpRequest request, byte[] body, ClientHttpRequestExecution execution) throws IOException {\r\n            this.traceRequest(request, body);\r\n            ClientHttpResponse response = execution.execute(request, body);\r\n            if(response != null) {\r\n                this.traceResponse(response);\r\n            }\r\n\r\n            return response;\r\n        }\r\n\r\n        private void traceRequest(HttpRequest request, byte[] body) throws IOException {\r\n            log.debug(&quot;===========================request begin================================================&quot;);\r\n            log.debug(&quot;URI         : {}&quot;, request.getURI());\r\n            log.debug(&quot;Method      : {}&quot;, request.getMethod());\r\n            log.debug(&quot;Headers     : {}&quot;, request.getHeaders());\r\n            log.debug(&quot;Request body: {}&quot;, new String(body, &quot;UTF-8&quot;));\r\n            log.debug(&quot;==========================request end================================================&quot;);\r\n        }\r\n\r\n        private void traceResponse(ClientHttpResponse response) throws IOException {\r\n            if(this.loggableStatuses.isEmpty() || this.loggableStatuses.contains(response.getStatusCode().series())) {\r\n                StringBuilder inputStringBuilder = new StringBuilder();\r\n\r\n                try {\r\n                    BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(response.getBody(), &quot;UTF-8&quot;));\r\n\r\n                    for(String line = bufferedReader.readLine(); line != null; line = bufferedReader.readLine()) {\r\n                        inputStringBuilder.append(line);\r\n                        inputStringBuilder.append(&#39;\\n&#39;);\r\n                    }\r\n                } catch (Throwable var5) {\r\n                    log.error(&quot;cannot read response due to error&quot;, var5);\r\n                }\r\n\r\n                log.debug(&quot;============================response begin==========================================&quot;);\r\n                log.debug(&quot;Status code  : {}&quot;, response.getStatusCode());\r\n                log.debug(&quot;Status text  : {}&quot;, response.getStatusText());\r\n                log.debug(&quot;Headers      : {}&quot;, response.getHeaders());\r\n                log.debug(&quot;Response body: {}&quot;, inputStringBuilder.toString());\r\n                log.debug(&quot;=======================response end=================================================&quot;);\r\n            }\r\n\r\n        }\r\n\r\n        public boolean hasError(ClientHttpResponse response) throws IOException {\r\n            return defaultResponseErrorHandler.hasError(response);\r\n        }\r\n\r\n        public void handleError(ClientHttpResponse response) throws IOException {\r\n            this.traceResponse(response);\r\n            defaultResponseErrorHandler.handleError(response);\r\n        }\r\n    }\r\n","title":"Spring RestTemplate - how to enable full debugging/logging of requests/responses?","body":"<p>Strangely, none of these solutions work as RestTemplate does not seem to return the response on some client and server 500x errors. In which case, you will have log those as well by implementing ResponseErrorHandler as follows. Here is a draft code, but you get the point:</p>\n\n<p>You can set the same interceptor as the error handler:</p>\n\n<pre><code>restTemplate.getInterceptors().add(interceptor);\nrestTemplate.setRequestFactory(new BufferingClientHttpRequestFactory(new SimpleClientHttpRequestFactory()));\nrestTemplate.setErrorHandler(interceptor);\n</code></pre>\n\n<p>And the intercept implements both interfaces:</p>\n\n<pre><code>import java.io.BufferedReader;\nimport java.io.IOException;\nimport java.io.InputStreamReader;\nimport java.util.HashSet;\nimport java.util.Set;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.http.HttpRequest;\nimport org.springframework.http.HttpStatus.Series;\nimport org.springframework.http.client.ClientHttpRequestExecution;\nimport org.springframework.http.client.ClientHttpRequestInterceptor;\nimport org.springframework.http.client.ClientHttpResponse;\nimport org.springframework.web.client.DefaultResponseErrorHandler;\nimport org.springframework.web.client.ResponseErrorHandler;\n\npublic class LoggingRequestInterceptor implements ClientHttpRequestInterceptor, ResponseErrorHandler {\n    static final Logger log = LoggerFactory.getLogger(LoggingRequestInterceptor.class);\n    static final DefaultResponseErrorHandler defaultResponseErrorHandler = new DefaultResponseErrorHandler();\n    final Set&lt;Series&gt; loggableStatuses = new HashSet();\n\n    public LoggingRequestInterceptor() {\n    }\n\n    public LoggingRequestInterceptor(Set&lt;Series&gt; loggableStatuses) {\n        loggableStatuses.addAll(loggableStatuses);\n    }\n\n    public ClientHttpResponse intercept(HttpRequest request, byte[] body, ClientHttpRequestExecution execution) throws IOException {\n        this.traceRequest(request, body);\n        ClientHttpResponse response = execution.execute(request, body);\n        if(response != null) {\n            this.traceResponse(response);\n        }\n\n        return response;\n    }\n\n    private void traceRequest(HttpRequest request, byte[] body) throws IOException {\n        log.debug(\"===========================request begin================================================\");\n        log.debug(\"URI         : {}\", request.getURI());\n        log.debug(\"Method      : {}\", request.getMethod());\n        log.debug(\"Headers     : {}\", request.getHeaders());\n        log.debug(\"Request body: {}\", new String(body, \"UTF-8\"));\n        log.debug(\"==========================request end================================================\");\n    }\n\n    private void traceResponse(ClientHttpResponse response) throws IOException {\n        if(this.loggableStatuses.isEmpty() || this.loggableStatuses.contains(response.getStatusCode().series())) {\n            StringBuilder inputStringBuilder = new StringBuilder();\n\n            try {\n                BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(response.getBody(), \"UTF-8\"));\n\n                for(String line = bufferedReader.readLine(); line != null; line = bufferedReader.readLine()) {\n                    inputStringBuilder.append(line);\n                    inputStringBuilder.append('\\n');\n                }\n            } catch (Throwable var5) {\n                log.error(\"cannot read response due to error\", var5);\n            }\n\n            log.debug(\"============================response begin==========================================\");\n            log.debug(\"Status code  : {}\", response.getStatusCode());\n            log.debug(\"Status text  : {}\", response.getStatusText());\n            log.debug(\"Headers      : {}\", response.getHeaders());\n            log.debug(\"Response body: {}\", inputStringBuilder.toString());\n            log.debug(\"=======================response end=================================================\");\n        }\n\n    }\n\n    public boolean hasError(ClientHttpResponse response) throws IOException {\n        return defaultResponseErrorHandler.hasError(response);\n    }\n\n    public void handleError(ClientHttpResponse response) throws IOException {\n        this.traceResponse(response);\n        defaultResponseErrorHandler.handleError(response);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5406670,"reputation":1601,"user_id":4304958,"display_name":"Mark Hobson"},"down_vote_count":1,"up_vote_count":42,"is_accepted":false,"score":41,"last_activity_date":1580935270,"creation_date":1509531375,"answer_id":47052529,"question_id":7952154,"body_markdown":"You can use [spring-rest-template-logger][1] to log `RestTemplate` HTTP traffic.\r\n\r\nAdd a dependency to your Maven project:\r\n\r\n    &lt;dependency&gt;\r\n    \t&lt;groupId&gt;org.hobsoft.spring&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;spring-rest-template-logger&lt;/artifactId&gt;\r\n    \t&lt;version&gt;2.0.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nThen customize your `RestTemplate` as follows:\r\n\r\n    RestTemplate restTemplate = new RestTemplateBuilder()\r\n    \t.customizers(new LoggingCustomizer())\r\n    \t.build()\r\n\r\nEnsure that debug logging is enabled in `application.properties`:\r\n\r\n    logging.level.org.hobsoft.spring.resttemplatelogger.LoggingCustomizer = DEBUG\r\n\r\nNow all RestTemplate HTTP traffic will be logged to `org.hobsoft.spring.resttemplatelogger.LoggingCustomizer` at debug level.\r\n\r\nDISCLAIMER: I wrote this library.\r\n\r\n  [1]: https://github.com/markhobson/spring-rest-template-logger\r\n","title":"Spring RestTemplate - how to enable full debugging/logging of requests/responses?","body":"<p>You can use <a href=\"https://github.com/markhobson/spring-rest-template-logger\" rel=\"noreferrer\">spring-rest-template-logger</a> to log <code>RestTemplate</code> HTTP traffic.</p>\n\n<p>Add a dependency to your Maven project:</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.hobsoft.spring&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-rest-template-logger&lt;/artifactId&gt;\n    &lt;version&gt;2.0.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>Then customize your <code>RestTemplate</code> as follows:</p>\n\n<pre><code>RestTemplate restTemplate = new RestTemplateBuilder()\n    .customizers(new LoggingCustomizer())\n    .build()\n</code></pre>\n\n<p>Ensure that debug logging is enabled in <code>application.properties</code>:</p>\n\n<pre><code>logging.level.org.hobsoft.spring.resttemplatelogger.LoggingCustomizer = DEBUG\n</code></pre>\n\n<p>Now all RestTemplate HTTP traffic will be logged to <code>org.hobsoft.spring.resttemplatelogger.LoggingCustomizer</code> at debug level.</p>\n\n<p>DISCLAIMER: I wrote this library.</p>\n"},{"tags":[],"owner":{"account_id":3260335,"reputation":23,"user_id":2746033,"display_name":"user2746033"},"down_vote_count":2,"up_vote_count":28,"is_accepted":false,"score":26,"last_activity_date":1511505251,"creation_date":1511505251,"answer_id":47467572,"question_id":7952154,"body_markdown":"# Logging RestTemplate\r\n\r\n## Option 1. Open debug logging.\r\n\r\n### Configurate RestTemplate\r\n\r\n* By default the [RestTemplate](http://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/client/RestTemplate.html) relies on standard JDK facilities to establish HTTP connections. You can switch to use a different HTTP library such as Apache HttpComponents\r\n\r\n    @Bean\r\n    public RestTemplate restTemplate(RestTemplateBuilder builder) {\r\n        RestTemplate restTemplate = builder.build();\r\n        return restTemplate;\r\n    }\r\n\r\n### Configurate logging\r\n\r\n* `application.yml`\r\n\r\n    logging:\r\n      level:\r\n          org.springframework.web.client.RestTemplate: DEBUG\r\n\r\n## Option 2. Using Interceptor\r\n\r\n### Wrapper Response\r\n\r\n    import java.io.ByteArrayInputStream;\r\n    import java.io.IOException;\r\n    import java.io.InputStream;\r\n\r\n    import org.springframework.http.HttpHeaders;\r\n    import org.springframework.http.HttpStatus;\r\n    import org.springframework.http.client.ClientHttpResponse;\r\n    import org.springframework.util.StreamUtils;\r\n\r\n    public final class BufferingClientHttpResponseWrapper implements ClientHttpResponse {\r\n\r\n        private final ClientHttpResponse response;\r\n\r\n        private byte[] body;\r\n\r\n\r\n        BufferingClientHttpResponseWrapper(ClientHttpResponse response) {\r\n            this.response = response;\r\n        }\r\n\r\n        public HttpStatus getStatusCode() throws IOException {\r\n            return this.response.getStatusCode();\r\n        }\r\n\r\n        public int getRawStatusCode() throws IOException {\r\n            return this.response.getRawStatusCode();\r\n        }\r\n\r\n        public String getStatusText() throws IOException {\r\n            return this.response.getStatusText();\r\n        }\r\n\r\n        public HttpHeaders getHeaders() {\r\n            return this.response.getHeaders();\r\n        }\r\n\r\n        public InputStream getBody() throws IOException {\r\n            if (this.body == null) {\r\n                this.body = StreamUtils.copyToByteArray(this.response.getBody());\r\n            }\r\n            return new ByteArrayInputStream(this.body);\r\n        }\r\n\r\n        public void close() {\r\n            this.response.close();\r\n        }\r\n    }\r\n\r\n### Implement Interceptor\r\n\r\n    package com.example.logging;\r\n\r\n    import java.io.BufferedReader;\r\n    import java.io.IOException;\r\n    import java.io.InputStreamReader;\r\n\r\n    import org.slf4j.Logger;\r\n    import org.slf4j.LoggerFactory;\r\n    import org.springframework.http.HttpRequest;\r\n    import org.springframework.http.client.ClientHttpRequestExecution;\r\n    import org.springframework.http.client.ClientHttpRequestInterceptor;\r\n    import org.springframework.http.client.ClientHttpResponse;\r\n\r\n    public class LoggingRestTemplate implements ClientHttpRequestInterceptor {\r\n\r\n        private final static Logger LOGGER = LoggerFactory.getLogger(LoggingRestTemplate.class);\r\n\r\n        @Override\r\n        public ClientHttpResponse intercept(HttpRequest request, byte[] body,\r\n                ClientHttpRequestExecution execution) throws IOException {\r\n            traceRequest(request, body);\r\n            ClientHttpResponse response = execution.execute(request, body);\r\n            return traceResponse(response);\r\n        }\r\n\r\n        private void traceRequest(HttpRequest request, byte[] body) throws IOException {\r\n            if (!LOGGER.isDebugEnabled()) {\r\n                return;\r\n            }\r\n            LOGGER.debug(\r\n                    &quot;==========================request begin==============================================&quot;);\r\n            LOGGER.debug(&quot;URI                 : {}&quot;, request.getURI());\r\n            LOGGER.debug(&quot;Method            : {}&quot;, request.getMethod());\r\n            LOGGER.debug(&quot;Headers         : {}&quot;, request.getHeaders());\r\n            LOGGER.debug(&quot;Request body: {}&quot;, new String(body, &quot;UTF-8&quot;));\r\n            LOGGER.debug(\r\n                    &quot;==========================request end================================================&quot;);\r\n        }\r\n\r\n        private ClientHttpResponse traceResponse(ClientHttpResponse response) throws IOException {\r\n            if (!LOGGER.isDebugEnabled()) {\r\n                return response;\r\n            }\r\n            final ClientHttpResponse responseWrapper = new BufferingClientHttpResponseWrapper(response);\r\n            StringBuilder inputStringBuilder = new StringBuilder();\r\n            BufferedReader bufferedReader = new BufferedReader(\r\n                    new InputStreamReader(responseWrapper.getBody(), &quot;UTF-8&quot;));\r\n            String line = bufferedReader.readLine();\r\n            while (line != null) {\r\n                inputStringBuilder.append(line);\r\n                inputStringBuilder.append(&#39;\\n&#39;);\r\n                line = bufferedReader.readLine();\r\n            }\r\n            LOGGER.debug(\r\n                    &quot;==========================response begin=============================================&quot;);\r\n            LOGGER.debug(&quot;Status code    : {}&quot;, responseWrapper.getStatusCode());\r\n            LOGGER.debug(&quot;Status text    : {}&quot;, responseWrapper.getStatusText());\r\n            LOGGER.debug(&quot;Headers            : {}&quot;, responseWrapper.getHeaders());\r\n            LOGGER.debug(&quot;Response body: {}&quot;, inputStringBuilder.toString());\r\n            LOGGER.debug(\r\n                    &quot;==========================response end===============================================&quot;);\r\n            return responseWrapper;\r\n        }\r\n\r\n    }\r\n\r\n### Configurate RestTemplate\r\n\r\n    @Bean\r\n    public RestTemplate restTemplate(RestTemplateBuilder builder) {\r\n        RestTemplate restTemplate = builder.build();\r\n        restTemplate.setInterceptors(Collections.singletonList(new LoggingRestTemplate()));\r\n        return restTemplate;\r\n    }\r\n\r\n### Configurate logging\r\n\r\n* Check the package of LoggingRestTemplate, for example in `application.yml`:\r\n\r\n    logging:\r\n      level:\r\n          com.example.logging: DEBUG\r\n\r\n## Option 3. Using httpcomponent\r\n\r\n### Import httpcomponent dependency\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;\r\n      &lt;artifactId&gt;httpasyncclient&lt;/artifactId&gt;\r\n  &lt;/dependency&gt;\r\n\r\n\r\n### Configurate RestTemplate\r\n\r\n    @Bean\r\n    public RestTemplate restTemplate(RestTemplateBuilder builder) {\r\n        RestTemplate restTemplate = builder.build();\r\n        restTemplate.setRequestFactory(new HttpComponentsAsyncClientHttpRequestFactory());\r\n        return restTemplate;\r\n    }\r\n\r\n\r\n### Configurate logging\r\n\r\n* Check the package of LoggingRestTemplate, for example in `application.yml`:\r\n\r\n    logging:\r\n    level:\r\n        org.apache.http: DEBUG\r\n","title":"Spring RestTemplate - how to enable full debugging/logging of requests/responses?","body":"<h1>Logging RestTemplate</h1>\n\n<h2>Option 1. Open debug logging.</h2>\n\n<h3>Configurate RestTemplate</h3>\n\n<ul>\n<li><p>By default the <a href=\"http://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/client/RestTemplate.html\" rel=\"noreferrer\">RestTemplate</a> relies on standard JDK facilities to establish HTTP connections. You can switch to use a different HTTP library such as Apache HttpComponents</p>\n\n<p>@Bean\npublic RestTemplate restTemplate(RestTemplateBuilder builder) {\n    RestTemplate restTemplate = builder.build();\n    return restTemplate;\n}</p></li>\n</ul>\n\n<h3>Configurate logging</h3>\n\n<ul>\n<li><p><code>application.yml</code></p>\n\n<p>logging:\n  level:\n      org.springframework.web.client.RestTemplate: DEBUG</p></li>\n</ul>\n\n<h2>Option 2. Using Interceptor</h2>\n\n<h3>Wrapper Response</h3>\n\n<pre><code>import java.io.ByteArrayInputStream;\nimport java.io.IOException;\nimport java.io.InputStream;\n\nimport org.springframework.http.HttpHeaders;\nimport org.springframework.http.HttpStatus;\nimport org.springframework.http.client.ClientHttpResponse;\nimport org.springframework.util.StreamUtils;\n\npublic final class BufferingClientHttpResponseWrapper implements ClientHttpResponse {\n\n    private final ClientHttpResponse response;\n\n    private byte[] body;\n\n\n    BufferingClientHttpResponseWrapper(ClientHttpResponse response) {\n        this.response = response;\n    }\n\n    public HttpStatus getStatusCode() throws IOException {\n        return this.response.getStatusCode();\n    }\n\n    public int getRawStatusCode() throws IOException {\n        return this.response.getRawStatusCode();\n    }\n\n    public String getStatusText() throws IOException {\n        return this.response.getStatusText();\n    }\n\n    public HttpHeaders getHeaders() {\n        return this.response.getHeaders();\n    }\n\n    public InputStream getBody() throws IOException {\n        if (this.body == null) {\n            this.body = StreamUtils.copyToByteArray(this.response.getBody());\n        }\n        return new ByteArrayInputStream(this.body);\n    }\n\n    public void close() {\n        this.response.close();\n    }\n}\n</code></pre>\n\n<h3>Implement Interceptor</h3>\n\n<pre><code>package com.example.logging;\n\nimport java.io.BufferedReader;\nimport java.io.IOException;\nimport java.io.InputStreamReader;\n\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.http.HttpRequest;\nimport org.springframework.http.client.ClientHttpRequestExecution;\nimport org.springframework.http.client.ClientHttpRequestInterceptor;\nimport org.springframework.http.client.ClientHttpResponse;\n\npublic class LoggingRestTemplate implements ClientHttpRequestInterceptor {\n\n    private final static Logger LOGGER = LoggerFactory.getLogger(LoggingRestTemplate.class);\n\n    @Override\n    public ClientHttpResponse intercept(HttpRequest request, byte[] body,\n            ClientHttpRequestExecution execution) throws IOException {\n        traceRequest(request, body);\n        ClientHttpResponse response = execution.execute(request, body);\n        return traceResponse(response);\n    }\n\n    private void traceRequest(HttpRequest request, byte[] body) throws IOException {\n        if (!LOGGER.isDebugEnabled()) {\n            return;\n        }\n        LOGGER.debug(\n                \"==========================request begin==============================================\");\n        LOGGER.debug(\"URI                 : {}\", request.getURI());\n        LOGGER.debug(\"Method            : {}\", request.getMethod());\n        LOGGER.debug(\"Headers         : {}\", request.getHeaders());\n        LOGGER.debug(\"Request body: {}\", new String(body, \"UTF-8\"));\n        LOGGER.debug(\n                \"==========================request end================================================\");\n    }\n\n    private ClientHttpResponse traceResponse(ClientHttpResponse response) throws IOException {\n        if (!LOGGER.isDebugEnabled()) {\n            return response;\n        }\n        final ClientHttpResponse responseWrapper = new BufferingClientHttpResponseWrapper(response);\n        StringBuilder inputStringBuilder = new StringBuilder();\n        BufferedReader bufferedReader = new BufferedReader(\n                new InputStreamReader(responseWrapper.getBody(), \"UTF-8\"));\n        String line = bufferedReader.readLine();\n        while (line != null) {\n            inputStringBuilder.append(line);\n            inputStringBuilder.append('\\n');\n            line = bufferedReader.readLine();\n        }\n        LOGGER.debug(\n                \"==========================response begin=============================================\");\n        LOGGER.debug(\"Status code    : {}\", responseWrapper.getStatusCode());\n        LOGGER.debug(\"Status text    : {}\", responseWrapper.getStatusText());\n        LOGGER.debug(\"Headers            : {}\", responseWrapper.getHeaders());\n        LOGGER.debug(\"Response body: {}\", inputStringBuilder.toString());\n        LOGGER.debug(\n                \"==========================response end===============================================\");\n        return responseWrapper;\n    }\n\n}\n</code></pre>\n\n<h3>Configurate RestTemplate</h3>\n\n<pre><code>@Bean\npublic RestTemplate restTemplate(RestTemplateBuilder builder) {\n    RestTemplate restTemplate = builder.build();\n    restTemplate.setInterceptors(Collections.singletonList(new LoggingRestTemplate()));\n    return restTemplate;\n}\n</code></pre>\n\n<h3>Configurate logging</h3>\n\n<ul>\n<li><p>Check the package of LoggingRestTemplate, for example in <code>application.yml</code>:</p>\n\n<p>logging:\n  level:\n      com.example.logging: DEBUG</p></li>\n</ul>\n\n<h2>Option 3. Using httpcomponent</h2>\n\n<h3>Import httpcomponent dependency</h3>\n\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;\n  &lt;artifactId&gt;httpasyncclient&lt;/artifactId&gt;\n</code></pre>\n\n<p></p>\n\n<h3>Configurate RestTemplate</h3>\n\n<pre><code>@Bean\npublic RestTemplate restTemplate(RestTemplateBuilder builder) {\n    RestTemplate restTemplate = builder.build();\n    restTemplate.setRequestFactory(new HttpComponentsAsyncClientHttpRequestFactory());\n    return restTemplate;\n}\n</code></pre>\n\n<h3>Configurate logging</h3>\n\n<ul>\n<li><p>Check the package of LoggingRestTemplate, for example in <code>application.yml</code>:</p>\n\n<p>logging:\nlevel:\n    org.apache.http: DEBUG</p></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":13052518,"reputation":1,"user_id":9432355,"display_name":"NenadTzar"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1519998128,"creation_date":1519965155,"answer_id":49062863,"question_id":7952154,"body_markdown":"Related to the response using ClientHttpInterceptor, I found a way of keeping the whole response without Buffering factories. Just store the response body input stream inside byte array using some utils method that will copy that array from body, but important, surround this method with try catch because it will break if response is empty (that is the cause of Resource Access Exception) and in catch just create empty byte array, and than just create anonymous inner class of ClientHttpResponse using that array and other parameters from the original response. Than you can return that new ClientHttpResponse object to the rest template execution chain and you can log response using body byte array that is previously stored. That way you will avoid consuming InputStream in the actual response and you can use Rest Template response as it is. Note, this may be dangerous if your&#39;s response is too big ","title":"Spring RestTemplate - how to enable full debugging/logging of requests/responses?","body":"<p>Related to the response using ClientHttpInterceptor, I found a way of keeping the whole response without Buffering factories. Just store the response body input stream inside byte array using some utils method that will copy that array from body, but important, surround this method with try catch because it will break if response is empty (that is the cause of Resource Access Exception) and in catch just create empty byte array, and than just create anonymous inner class of ClientHttpResponse using that array and other parameters from the original response. Than you can return that new ClientHttpResponse object to the rest template execution chain and you can log response using body byte array that is previously stored. That way you will avoid consuming InputStream in the actual response and you can use Rest Template response as it is. Note, this may be dangerous if your's response is too big </p>\n"},{"tags":[],"owner":{"account_id":7450965,"reputation":1416,"user_id":5665753,"display_name":"Jason Slobotski"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1524248685,"creation_date":1524246959,"answer_id":49947302,"question_id":7952154,"body_markdown":"Wanted to add my implementation of this as well. I apologize for all the missing semi-colons, this is written in Groovy. \r\n\r\nI needed something more configurable than the accepted answer provided. Here&#39;s a rest template bean that&#39;s very agile and will log everything like the OP is looking for.\r\n\r\nCustom Logging Interceptor Class:\r\n\r\n    import org.springframework.http.HttpRequest\r\n    import org.springframework.http.client.ClientHttpRequestExecution\r\n    import org.springframework.http.client.ClientHttpRequestInterceptor\r\n    import org.springframework.http.client.ClientHttpResponse\r\n    import org.springframework.util.StreamUtils\r\n    \r\n    import java.nio.charset.Charset\r\n    \r\n    class HttpLoggingInterceptor implements ClientHttpRequestInterceptor {\r\n\r\n        private final static Logger log = LoggerFactory.getLogger(HttpLoggingInterceptor.class)\r\n    \r\n        @Override\r\n        ClientHttpResponse intercept(HttpRequest request, byte[] body, ClientHttpRequestExecution execution) throws IOException {\r\n            logRequest(request, body)\r\n            ClientHttpResponse response = execution.execute(request, body)\r\n            logResponse(response)\r\n            return response\r\n        }\r\n    \r\n        private void logRequest(HttpRequest request, byte[] body) throws IOException {\r\n            if (log.isDebugEnabled()) {\r\n                log.debug(&quot;===========================request begin================================================&quot;)\r\n                log.debug(&quot;URI         : {}&quot;, request.getURI())\r\n                log.debug(&quot;Method      : {}&quot;, request.getMethod())\r\n                log.debug(&quot;Headers     : {}&quot;, request.getHeaders())\r\n                log.debug(&quot;Request body: {}&quot;, new String(body, &quot;UTF-8&quot;))\r\n                log.debug(&quot;==========================request end================================================&quot;)\r\n            }\r\n        }\r\n    \r\n        private void logResponse(ClientHttpResponse response) throws IOException {\r\n            if (log.isDebugEnabled()) {\r\n                log.debug(&quot;============================response begin==========================================&quot;)\r\n                log.debug(&quot;Status code  : {}&quot;, response.getStatusCode())\r\n                log.debug(&quot;Status text  : {}&quot;, response.getStatusText())\r\n                log.debug(&quot;Headers      : {}&quot;, response.getHeaders())\r\n                log.debug(&quot;Response body: {}&quot;, StreamUtils.copyToString(response.getBody(), Charset.defaultCharset()))\r\n                log.debug(&quot;=======================response end=================================================&quot;)\r\n            }\r\n        }\r\n    }\r\n\r\nRest Template Bean Definition:\r\n\r\n    @Bean(name = &#39;myRestTemplate&#39;)\r\n    RestTemplate myRestTemplate(RestTemplateBuilder builder) {\r\n    \r\n        RequestConfig requestConfig = RequestConfig.custom()\r\n                .setConnectTimeout(10 * 1000) // 10 seconds\r\n                .setSocketTimeout(300 * 1000) // 300 seconds\r\n                .build()\r\n    \r\n        PoolingHttpClientConnectionManager connectionManager = new PoolingHttpClientConnectionManager()\r\n        connectionManager.setMaxTotal(10)\r\n        connectionManager.closeIdleConnections(5, TimeUnit.MINUTES)\r\n    \r\n        CloseableHttpClient httpClient = HttpClients.custom()\r\n                .setConnectionManager(connectionManager)\r\n                .setDefaultRequestConfig(requestConfig)\r\n                .disableRedirectHandling()\r\n                .build()\r\n    \r\n        RestTemplate restTemplate = builder\r\n                .rootUri(&quot;https://domain.server.com&quot;)\r\n                .basicAuthorization(&quot;username&quot;, &quot;password&quot;)\r\n                .requestFactory(new BufferingClientHttpRequestFactory(new HttpComponentsClientHttpRequestFactory(httpClient)))\r\n                .interceptors(new HttpLoggingInterceptor())\r\n                .build()\r\n    \r\n        return restTemplate\r\n    }\r\n\r\nImplementation:\r\n\r\n    @Component\r\n    class RestService {\r\n    \r\n        private final RestTemplate restTemplate\r\n        private final static Logger log = LoggerFactory.getLogger(RestService.class)\r\n    \r\n        @Autowired\r\n        RestService(\r\n                @Qualifier(&quot;myRestTemplate&quot;) RestTemplate restTemplate\r\n        ) {\r\n            this.restTemplate = restTemplate\r\n        }\r\n\r\n        // add specific methods to your service that access the GET and PUT methods\r\n    \r\n        private &lt;T&gt; T getForObject(String path, Class&lt;T&gt; object, Map&lt;String, ?&gt; params = [:]) {\r\n            try {\r\n                return restTemplate.getForObject(path, object, params)\r\n            } catch (HttpClientErrorException e) {\r\n                log.warn(&quot;Client Error (${path}): ${e.responseBodyAsString}&quot;)\r\n            } catch (HttpServerErrorException e) {\r\n                String msg = &quot;Server Error (${path}): ${e.responseBodyAsString}&quot;\r\n                log.error(msg, e)\r\n            } catch (RestClientException e) {\r\n                String msg = &quot;Error (${path})&quot;\r\n                log.error(msg, e)\r\n            }\r\n            return null\r\n        }\r\n    \r\n        private &lt;T&gt; T putForObject(String path, T object) {\r\n            try {\r\n                HttpEntity&lt;T&gt; request = new HttpEntity&lt;&gt;(object)\r\n                HttpEntity&lt;T&gt; response = restTemplate.exchange(path, HttpMethod.PUT, request, T)\r\n                return response.getBody()\r\n            } catch (HttpClientErrorException e) {\r\n                log.warn(&quot;Error (${path}): ${e.responseBodyAsString}&quot;)\r\n            } catch (HttpServerErrorException e) {\r\n                String msg = &quot;Error (${path}): ${e.responseBodyAsString}&quot;\r\n                log.error(msg, e)\r\n            } catch (RestClientException e) {\r\n                String msg = &quot;Error (${path})&quot;\r\n                log.error(msg, e)\r\n            }\r\n            return null\r\n        }\r\n    }","title":"Spring RestTemplate - how to enable full debugging/logging of requests/responses?","body":"<p>Wanted to add my implementation of this as well. I apologize for all the missing semi-colons, this is written in Groovy. </p>\n\n<p>I needed something more configurable than the accepted answer provided. Here's a rest template bean that's very agile and will log everything like the OP is looking for.</p>\n\n<p>Custom Logging Interceptor Class:</p>\n\n<pre><code>import org.springframework.http.HttpRequest\nimport org.springframework.http.client.ClientHttpRequestExecution\nimport org.springframework.http.client.ClientHttpRequestInterceptor\nimport org.springframework.http.client.ClientHttpResponse\nimport org.springframework.util.StreamUtils\n\nimport java.nio.charset.Charset\n\nclass HttpLoggingInterceptor implements ClientHttpRequestInterceptor {\n\n    private final static Logger log = LoggerFactory.getLogger(HttpLoggingInterceptor.class)\n\n    @Override\n    ClientHttpResponse intercept(HttpRequest request, byte[] body, ClientHttpRequestExecution execution) throws IOException {\n        logRequest(request, body)\n        ClientHttpResponse response = execution.execute(request, body)\n        logResponse(response)\n        return response\n    }\n\n    private void logRequest(HttpRequest request, byte[] body) throws IOException {\n        if (log.isDebugEnabled()) {\n            log.debug(\"===========================request begin================================================\")\n            log.debug(\"URI         : {}\", request.getURI())\n            log.debug(\"Method      : {}\", request.getMethod())\n            log.debug(\"Headers     : {}\", request.getHeaders())\n            log.debug(\"Request body: {}\", new String(body, \"UTF-8\"))\n            log.debug(\"==========================request end================================================\")\n        }\n    }\n\n    private void logResponse(ClientHttpResponse response) throws IOException {\n        if (log.isDebugEnabled()) {\n            log.debug(\"============================response begin==========================================\")\n            log.debug(\"Status code  : {}\", response.getStatusCode())\n            log.debug(\"Status text  : {}\", response.getStatusText())\n            log.debug(\"Headers      : {}\", response.getHeaders())\n            log.debug(\"Response body: {}\", StreamUtils.copyToString(response.getBody(), Charset.defaultCharset()))\n            log.debug(\"=======================response end=================================================\")\n        }\n    }\n}\n</code></pre>\n\n<p>Rest Template Bean Definition:</p>\n\n<pre><code>@Bean(name = 'myRestTemplate')\nRestTemplate myRestTemplate(RestTemplateBuilder builder) {\n\n    RequestConfig requestConfig = RequestConfig.custom()\n            .setConnectTimeout(10 * 1000) // 10 seconds\n            .setSocketTimeout(300 * 1000) // 300 seconds\n            .build()\n\n    PoolingHttpClientConnectionManager connectionManager = new PoolingHttpClientConnectionManager()\n    connectionManager.setMaxTotal(10)\n    connectionManager.closeIdleConnections(5, TimeUnit.MINUTES)\n\n    CloseableHttpClient httpClient = HttpClients.custom()\n            .setConnectionManager(connectionManager)\n            .setDefaultRequestConfig(requestConfig)\n            .disableRedirectHandling()\n            .build()\n\n    RestTemplate restTemplate = builder\n            .rootUri(\"https://domain.server.com\")\n            .basicAuthorization(\"username\", \"password\")\n            .requestFactory(new BufferingClientHttpRequestFactory(new HttpComponentsClientHttpRequestFactory(httpClient)))\n            .interceptors(new HttpLoggingInterceptor())\n            .build()\n\n    return restTemplate\n}\n</code></pre>\n\n<p>Implementation:</p>\n\n<pre><code>@Component\nclass RestService {\n\n    private final RestTemplate restTemplate\n    private final static Logger log = LoggerFactory.getLogger(RestService.class)\n\n    @Autowired\n    RestService(\n            @Qualifier(\"myRestTemplate\") RestTemplate restTemplate\n    ) {\n        this.restTemplate = restTemplate\n    }\n\n    // add specific methods to your service that access the GET and PUT methods\n\n    private &lt;T&gt; T getForObject(String path, Class&lt;T&gt; object, Map&lt;String, ?&gt; params = [:]) {\n        try {\n            return restTemplate.getForObject(path, object, params)\n        } catch (HttpClientErrorException e) {\n            log.warn(\"Client Error (${path}): ${e.responseBodyAsString}\")\n        } catch (HttpServerErrorException e) {\n            String msg = \"Server Error (${path}): ${e.responseBodyAsString}\"\n            log.error(msg, e)\n        } catch (RestClientException e) {\n            String msg = \"Error (${path})\"\n            log.error(msg, e)\n        }\n        return null\n    }\n\n    private &lt;T&gt; T putForObject(String path, T object) {\n        try {\n            HttpEntity&lt;T&gt; request = new HttpEntity&lt;&gt;(object)\n            HttpEntity&lt;T&gt; response = restTemplate.exchange(path, HttpMethod.PUT, request, T)\n            return response.getBody()\n        } catch (HttpClientErrorException e) {\n            log.warn(\"Error (${path}): ${e.responseBodyAsString}\")\n        } catch (HttpServerErrorException e) {\n            String msg = \"Error (${path}): ${e.responseBodyAsString}\"\n            log.error(msg, e)\n        } catch (RestClientException e) {\n            String msg = \"Error (${path})\"\n            log.error(msg, e)\n        }\n        return null\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4255029,"reputation":603,"user_id":3480947,"accept_rate":20,"display_name":"maya16"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1524799267,"creation_date":1524799267,"answer_id":50054731,"question_id":7952154,"body_markdown":"Refer the Q/A for logging the request and response for the rest template by enabling the multiple reads on the HttpInputStream\r\n\r\nhttps://stackoverflow.com/questions/50023708/why-my-custom-clienthttprequestinterceptor-with-empty-response/50054698#50054698","title":"Spring RestTemplate - how to enable full debugging/logging of requests/responses?","body":"<p>Refer the Q/A for logging the request and response for the rest template by enabling the multiple reads on the HttpInputStream</p>\n\n<p><a href=\"https://stackoverflow.com/questions/50023708/why-my-custom-clienthttprequestinterceptor-with-empty-response/50054698#50054698\">Why my custom ClientHttpRequestInterceptor with empty response</a></p>\n"},{"tags":[],"owner":{"account_id":10062933,"reputation":215,"user_id":7438923,"display_name":"Viggi"},"down_vote_count":2,"up_vote_count":12,"is_accepted":false,"score":10,"last_activity_date":1579296659,"creation_date":1527608249,"answer_id":50588160,"question_id":7952154,"body_markdown":"This might not be the correct way to do it, but I think this is the most simple approach to print requests and responses without filling too much in logs.\r\n\r\nBy adding below 2 lines application.properties logs all requests and responses 1st line in order to log the requests and 2nd line to log the responses.\r\n\r\n    logging.level.org.springframework.web.client.RestTemplate=DEBUG\r\n    logging.level.org.springframework.web.servlet.mvc.method.annotation.HttpEntityMethodProcessor=DEBUG","title":"Spring RestTemplate - how to enable full debugging/logging of requests/responses?","body":"<p>This might not be the correct way to do it, but I think this is the most simple approach to print requests and responses without filling too much in logs.</p>\n\n<p>By adding below 2 lines application.properties logs all requests and responses 1st line in order to log the requests and 2nd line to log the responses.</p>\n\n<pre><code>logging.level.org.springframework.web.client.RestTemplate=DEBUG\nlogging.level.org.springframework.web.servlet.mvc.method.annotation.HttpEntityMethodProcessor=DEBUG\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2402834,"reputation":380,"user_id":2100121,"display_name":"Tony Findeisen"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1536922989,"creation_date":1536922989,"answer_id":52330648,"question_id":7952154,"body_markdown":"As @MilacH pointed out, there is an error in the implementation. If an statusCode &gt; 400 is returned a IOException is thrown, as the errorHandler is not invoked, from interceptors. The exception can be ignored and is then caught again in the handler method.\r\n\r\n    package net.sprd.fulfillment.common;\r\n    \r\n    import org.slf4j.Logger;\r\n    import org.slf4j.LoggerFactory;\r\n    import org.springframework.http.HttpRequest;\r\n    import org.springframework.http.client.ClientHttpRequestExecution;\r\n    import org.springframework.http.client.ClientHttpRequestInterceptor;\r\n    import org.springframework.http.client.ClientHttpResponse;\r\n    \r\n    import java.io.BufferedReader;\r\n    import java.io.IOException;\r\n    import java.io.InputStreamReader;\r\n    \r\n    import static java.nio.charset.StandardCharsets.UTF_8;\r\n    \r\n    public class LoggingRequestInterceptor implements ClientHttpRequestInterceptor {\r\n    \r\n        final static Logger log = LoggerFactory.getLogger(LoggingRequestInterceptor.class);\r\n    \r\n        @SuppressWarnings(&quot;HardcodedLineSeparator&quot;)\r\n        public static final char LINE_BREAK = &#39;\\n&#39;;\r\n    \r\n        @Override\r\n        public ClientHttpResponse intercept(HttpRequest request, byte[] body, ClientHttpRequestExecution execution) throws IOException {\r\n            try {\r\n                traceRequest(request, body);\r\n            } catch (Exception e) {\r\n                log.warn(&quot;Exception in LoggingRequestInterceptor while tracing request&quot;, e);\r\n            }\r\n    \r\n            ClientHttpResponse response = execution.execute(request, body);\r\n    \r\n            try {\r\n                traceResponse(response);\r\n            } catch (IOException e) {\r\n                // ignore the exception here, as it will be handled by the error handler of the restTemplate\r\n                log.warn(&quot;Exception in LoggingRequestInterceptor&quot;, e);\r\n            }\r\n            return response;\r\n        }\r\n    \r\n        private void traceRequest(HttpRequest request, byte[] body) {\r\n            log.info(&quot;===========================request begin================================================&quot;);\r\n            log.info(&quot;URI         : {}&quot;, request.getURI());\r\n            log.info(&quot;Method      : {}&quot;, request.getMethod());\r\n            log.info(&quot;Headers     : {}&quot;, request.getHeaders());\r\n            log.info(&quot;Request body: {}&quot;, new String(body, UTF_8));\r\n            log.info(&quot;==========================request end================================================&quot;);\r\n        }\r\n    \r\n        private void traceResponse(ClientHttpResponse response) throws IOException {\r\n            StringBuilder inputStringBuilder = new StringBuilder();\r\n            try (BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(response.getBody(), UTF_8))) {\r\n                String line = bufferedReader.readLine();\r\n                while (line != null) {\r\n                    inputStringBuilder.append(line);\r\n                    inputStringBuilder.append(LINE_BREAK);\r\n                    line = bufferedReader.readLine();\r\n                }\r\n            }\r\n    \r\n            log.info(&quot;============================response begin==========================================&quot;);\r\n            log.info(&quot;Status code  : {}&quot;, response.getStatusCode());\r\n            log.info(&quot;Status text  : {}&quot;, response.getStatusText());\r\n            log.info(&quot;Headers      : {}&quot;, response.getHeaders());\r\n            log.info(&quot;Response body: {}&quot;, inputStringBuilder);\r\n            log.info(&quot;=======================response end=================================================&quot;);\r\n        }\r\n    \r\n    }","title":"Spring RestTemplate - how to enable full debugging/logging of requests/responses?","body":"<p>As @MilacH pointed out, there is an error in the implementation. If an statusCode > 400 is returned a IOException is thrown, as the errorHandler is not invoked, from interceptors. The exception can be ignored and is then caught again in the handler method.</p>\n\n<pre><code>package net.sprd.fulfillment.common;\n\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.http.HttpRequest;\nimport org.springframework.http.client.ClientHttpRequestExecution;\nimport org.springframework.http.client.ClientHttpRequestInterceptor;\nimport org.springframework.http.client.ClientHttpResponse;\n\nimport java.io.BufferedReader;\nimport java.io.IOException;\nimport java.io.InputStreamReader;\n\nimport static java.nio.charset.StandardCharsets.UTF_8;\n\npublic class LoggingRequestInterceptor implements ClientHttpRequestInterceptor {\n\n    final static Logger log = LoggerFactory.getLogger(LoggingRequestInterceptor.class);\n\n    @SuppressWarnings(\"HardcodedLineSeparator\")\n    public static final char LINE_BREAK = '\\n';\n\n    @Override\n    public ClientHttpResponse intercept(HttpRequest request, byte[] body, ClientHttpRequestExecution execution) throws IOException {\n        try {\n            traceRequest(request, body);\n        } catch (Exception e) {\n            log.warn(\"Exception in LoggingRequestInterceptor while tracing request\", e);\n        }\n\n        ClientHttpResponse response = execution.execute(request, body);\n\n        try {\n            traceResponse(response);\n        } catch (IOException e) {\n            // ignore the exception here, as it will be handled by the error handler of the restTemplate\n            log.warn(\"Exception in LoggingRequestInterceptor\", e);\n        }\n        return response;\n    }\n\n    private void traceRequest(HttpRequest request, byte[] body) {\n        log.info(\"===========================request begin================================================\");\n        log.info(\"URI         : {}\", request.getURI());\n        log.info(\"Method      : {}\", request.getMethod());\n        log.info(\"Headers     : {}\", request.getHeaders());\n        log.info(\"Request body: {}\", new String(body, UTF_8));\n        log.info(\"==========================request end================================================\");\n    }\n\n    private void traceResponse(ClientHttpResponse response) throws IOException {\n        StringBuilder inputStringBuilder = new StringBuilder();\n        try (BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(response.getBody(), UTF_8))) {\n            String line = bufferedReader.readLine();\n            while (line != null) {\n                inputStringBuilder.append(line);\n                inputStringBuilder.append(LINE_BREAK);\n                line = bufferedReader.readLine();\n            }\n        }\n\n        log.info(\"============================response begin==========================================\");\n        log.info(\"Status code  : {}\", response.getStatusCode());\n        log.info(\"Status text  : {}\", response.getStatusText());\n        log.info(\"Headers      : {}\", response.getHeaders());\n        log.info(\"Response body: {}\", inputStringBuilder);\n        log.info(\"=======================response end=================================================\");\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":24801,"reputation":15286,"user_id":63293,"accept_rate":50,"display_name":"Peter Walser"},"down_vote_count":0,"up_vote_count":19,"is_accepted":false,"score":19,"last_activity_date":1590498083,"creation_date":1538989271,"answer_id":52698745,"question_id":7952154,"body_markdown":"As stated in the other responses, the response body needs special treatment so it can be read repeatedly (by default, its contents get consumed on the first read).\r\n\r\nInstead of using the `BufferingClientHttpRequestFactory` when setting up the request, the interceptor itself can **wrap the response and make sure the content is retained and can be repeatedly read** (by the logger as well as by the consumer of the response):\r\n\r\nMy interceptor, which\r\n\r\n- **buffers the response body** using a wrapper\r\n- logs in a **more compact way**\r\n- logs the **status code identifier** as well (e.g. 201 Created)\r\n- includes a **request sequence number** allowing to easily distinguish concurrent log entries from multiple threads\r\n\r\nCode:\r\n\r\n    public class LoggingInterceptor implements ClientHttpRequestInterceptor {\r\n    \r\n        private final Logger log = LoggerFactory.getLogger(getClass());\r\n        private AtomicInteger requestNumberSequence = new AtomicInteger(0);\r\n    \r\n        @Override\r\n        public ClientHttpResponse intercept(HttpRequest request, byte[] body, ClientHttpRequestExecution execution) throws IOException {\r\n            int requestNumber = requestNumberSequence.incrementAndGet();\r\n            logRequest(requestNumber, request, body);\r\n            ClientHttpResponse response = execution.execute(request, body);\r\n            response = new BufferedClientHttpResponse(response);\r\n            logResponse(requestNumber, response);\r\n            return response;\r\n        }\r\n    \r\n        private void logRequest(int requestNumber, HttpRequest request, byte[] body) {\r\n            if (log.isDebugEnabled()) {\r\n                String prefix = requestNumber + &quot; &gt; &quot;;\r\n                log.debug(&quot;{} Request: {} {}&quot;, prefix, request.getMethod(), request.getURI());\r\n                log.debug(&quot;{} Headers: {}&quot;, prefix, request.getHeaders());\r\n                if (body.length &gt; 0) {\r\n                    log.debug(&quot;{} Body: \\n{}&quot;, prefix, new String(body, StandardCharsets.UTF_8));\r\n                }\r\n            }\r\n        }\r\n    \r\n        private void logResponse(int requestNumber, ClientHttpResponse response) throws IOException {\r\n            if (log.isDebugEnabled()) {\r\n                String prefix = requestNumber + &quot; &lt; &quot;;\r\n                log.debug(&quot;{} Response: {} {} {}&quot;, prefix, response.getStatusCode(), response.getStatusCode().name(), response.getStatusText());\r\n                log.debug(&quot;{} Headers: {}&quot;, prefix, response.getHeaders());\r\n                String body = StreamUtils.copyToString(response.getBody(), StandardCharsets.UTF_8);\r\n                if (body.length() &gt; 0) {\r\n                    log.debug(&quot;{} Body: \\n{}&quot;, prefix, body);\r\n                }\r\n            }\r\n        }\r\n    \r\n        /**\r\n         * Wrapper around ClientHttpResponse, buffers the body so it can be read repeatedly (for logging &amp; consuming the result).\r\n         */\r\n        private static class BufferedClientHttpResponse implements ClientHttpResponse {\r\n    \r\n            private final ClientHttpResponse response;\r\n            private byte[] body;\r\n    \r\n            public BufferedClientHttpResponse(ClientHttpResponse response) {\r\n                this.response = response;\r\n            }\r\n    \r\n            @Override\r\n            public HttpStatus getStatusCode() throws IOException {\r\n                return response.getStatusCode();\r\n            }\r\n    \r\n            @Override\r\n            public int getRawStatusCode() throws IOException {\r\n                return response.getRawStatusCode();\r\n            }\r\n    \r\n            @Override\r\n            public String getStatusText() throws IOException {\r\n                return response.getStatusText();\r\n            }\r\n    \r\n            @Override\r\n            public void close() {\r\n                response.close();\r\n            }\r\n    \r\n            @Override\r\n            public InputStream getBody() throws IOException {\r\n                if (body == null) {\r\n                    body = StreamUtils.copyToByteArray(response.getBody());\r\n                }\r\n                return new ByteArrayInputStream(body);\r\n            }\r\n    \r\n            @Override\r\n            public HttpHeaders getHeaders() {\r\n                return response.getHeaders();\r\n            }\r\n        }\r\n    }\r\n\r\nConfiguration:\r\n\r\n     @Bean\r\n        public RestTemplateBuilder restTemplateBuilder() {\r\n            return new RestTemplateBuilder()\r\n                    .additionalInterceptors(Collections.singletonList(new LoggingInterceptor()));\r\n        }\r\n\r\nExample log output:\r\n\r\n    2018-10-08 10:58:53 [main] DEBUG x.y.z.LoggingInterceptor - 2 &gt;  Request: POST http://localhost:53969/payment/v4/private/payment-lists/10022/templates\r\n    2018-10-08 10:58:53 [main] DEBUG x.y.z.LoggingInterceptor - 2 &gt;  Headers: {Accept=[application/json, application/json], Content-Type=[application/json;charset=UTF-8], Content-Length=[986]}\r\n    2018-10-08 10:58:53 [main] DEBUG x.y.z.LoggingInterceptor - 2 &gt;  Body: \r\n    {&quot;idKey&quot;:null, ...}\r\n    2018-10-08 10:58:53 [main] DEBUG x.y.z.LoggingInterceptor - 2 &lt;  Response: 200 OK \r\n    2018-10-08 10:58:53 [main] DEBUG x.y.z.LoggingInterceptor - 2 &lt;  Headers: {Content-Type=[application/json;charset=UTF-8], Transfer-Encoding=[chunked], Date=[Mon, 08 Oct 2018 08:58:53 GMT]}\r\n    2018-10-08 10:58:53 [main] DEBUG x.y.z.LoggingInterceptor - 2 &lt;  Body: \r\n    { &quot;idKey&quot; : &quot;10022&quot;, ...  }","title":"Spring RestTemplate - how to enable full debugging/logging of requests/responses?","body":"<p>As stated in the other responses, the response body needs special treatment so it can be read repeatedly (by default, its contents get consumed on the first read).</p>\n\n<p>Instead of using the <code>BufferingClientHttpRequestFactory</code> when setting up the request, the interceptor itself can <strong>wrap the response and make sure the content is retained and can be repeatedly read</strong> (by the logger as well as by the consumer of the response):</p>\n\n<p>My interceptor, which</p>\n\n<ul>\n<li><strong>buffers the response body</strong> using a wrapper</li>\n<li>logs in a <strong>more compact way</strong></li>\n<li>logs the <strong>status code identifier</strong> as well (e.g. 201 Created)</li>\n<li>includes a <strong>request sequence number</strong> allowing to easily distinguish concurrent log entries from multiple threads</li>\n</ul>\n\n<p>Code:</p>\n\n<pre><code>public class LoggingInterceptor implements ClientHttpRequestInterceptor {\n\n    private final Logger log = LoggerFactory.getLogger(getClass());\n    private AtomicInteger requestNumberSequence = new AtomicInteger(0);\n\n    @Override\n    public ClientHttpResponse intercept(HttpRequest request, byte[] body, ClientHttpRequestExecution execution) throws IOException {\n        int requestNumber = requestNumberSequence.incrementAndGet();\n        logRequest(requestNumber, request, body);\n        ClientHttpResponse response = execution.execute(request, body);\n        response = new BufferedClientHttpResponse(response);\n        logResponse(requestNumber, response);\n        return response;\n    }\n\n    private void logRequest(int requestNumber, HttpRequest request, byte[] body) {\n        if (log.isDebugEnabled()) {\n            String prefix = requestNumber + \" &gt; \";\n            log.debug(\"{} Request: {} {}\", prefix, request.getMethod(), request.getURI());\n            log.debug(\"{} Headers: {}\", prefix, request.getHeaders());\n            if (body.length &gt; 0) {\n                log.debug(\"{} Body: \\n{}\", prefix, new String(body, StandardCharsets.UTF_8));\n            }\n        }\n    }\n\n    private void logResponse(int requestNumber, ClientHttpResponse response) throws IOException {\n        if (log.isDebugEnabled()) {\n            String prefix = requestNumber + \" &lt; \";\n            log.debug(\"{} Response: {} {} {}\", prefix, response.getStatusCode(), response.getStatusCode().name(), response.getStatusText());\n            log.debug(\"{} Headers: {}\", prefix, response.getHeaders());\n            String body = StreamUtils.copyToString(response.getBody(), StandardCharsets.UTF_8);\n            if (body.length() &gt; 0) {\n                log.debug(\"{} Body: \\n{}\", prefix, body);\n            }\n        }\n    }\n\n    /**\n     * Wrapper around ClientHttpResponse, buffers the body so it can be read repeatedly (for logging &amp; consuming the result).\n     */\n    private static class BufferedClientHttpResponse implements ClientHttpResponse {\n\n        private final ClientHttpResponse response;\n        private byte[] body;\n\n        public BufferedClientHttpResponse(ClientHttpResponse response) {\n            this.response = response;\n        }\n\n        @Override\n        public HttpStatus getStatusCode() throws IOException {\n            return response.getStatusCode();\n        }\n\n        @Override\n        public int getRawStatusCode() throws IOException {\n            return response.getRawStatusCode();\n        }\n\n        @Override\n        public String getStatusText() throws IOException {\n            return response.getStatusText();\n        }\n\n        @Override\n        public void close() {\n            response.close();\n        }\n\n        @Override\n        public InputStream getBody() throws IOException {\n            if (body == null) {\n                body = StreamUtils.copyToByteArray(response.getBody());\n            }\n            return new ByteArrayInputStream(body);\n        }\n\n        @Override\n        public HttpHeaders getHeaders() {\n            return response.getHeaders();\n        }\n    }\n}\n</code></pre>\n\n<p>Configuration:</p>\n\n<pre><code> @Bean\n    public RestTemplateBuilder restTemplateBuilder() {\n        return new RestTemplateBuilder()\n                .additionalInterceptors(Collections.singletonList(new LoggingInterceptor()));\n    }\n</code></pre>\n\n<p>Example log output:</p>\n\n<pre><code>2018-10-08 10:58:53 [main] DEBUG x.y.z.LoggingInterceptor - 2 &gt;  Request: POST http://localhost:53969/payment/v4/private/payment-lists/10022/templates\n2018-10-08 10:58:53 [main] DEBUG x.y.z.LoggingInterceptor - 2 &gt;  Headers: {Accept=[application/json, application/json], Content-Type=[application/json;charset=UTF-8], Content-Length=[986]}\n2018-10-08 10:58:53 [main] DEBUG x.y.z.LoggingInterceptor - 2 &gt;  Body: \n{\"idKey\":null, ...}\n2018-10-08 10:58:53 [main] DEBUG x.y.z.LoggingInterceptor - 2 &lt;  Response: 200 OK \n2018-10-08 10:58:53 [main] DEBUG x.y.z.LoggingInterceptor - 2 &lt;  Headers: {Content-Type=[application/json;charset=UTF-8], Transfer-Encoding=[chunked], Date=[Mon, 08 Oct 2018 08:58:53 GMT]}\n2018-10-08 10:58:53 [main] DEBUG x.y.z.LoggingInterceptor - 2 &lt;  Body: \n{ \"idKey\" : \"10022\", ...  }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13731912,"reputation":51,"user_id":10474951,"display_name":"Lee Burch"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1539025929,"creation_date":1539025929,"answer_id":52708677,"question_id":7952154,"body_markdown":"So many responses here require coding changes and customized classes and it really is not necessary.  Gte a debugging proxy such as fiddler and set your java environment to use the proxy on the command line (-Dhttp.proxyHost and -Dhttp.proxyPort) then run fiddler and you can see the requests and responses in their entirety.  Also comes with many ancillary advantages such as the ability to tinker with the results and responses before and after they are sent to run experiments before committing to modification of the server.\r\n\r\nLast bit of an issue that can come up is if you must use HTTPS, you will need to export the SSL cert from fiddler and import it into the java keystore (cacerts) hint: default java keystore password is usually &quot;changeit&quot;.","title":"Spring RestTemplate - how to enable full debugging/logging of requests/responses?","body":"<p>So many responses here require coding changes and customized classes and it really is not necessary.  Gte a debugging proxy such as fiddler and set your java environment to use the proxy on the command line (-Dhttp.proxyHost and -Dhttp.proxyPort) then run fiddler and you can see the requests and responses in their entirety.  Also comes with many ancillary advantages such as the ability to tinker with the results and responses before and after they are sent to run experiments before committing to modification of the server.</p>\n\n<p>Last bit of an issue that can come up is if you must use HTTPS, you will need to export the SSL cert from fiddler and import it into the java keystore (cacerts) hint: default java keystore password is usually \"changeit\".</p>\n"},{"tags":[],"owner":{"account_id":9326848,"reputation":402,"user_id":6923823,"display_name":"Elton Sandr&#233;"},"down_vote_count":2,"up_vote_count":15,"is_accepted":false,"score":13,"last_activity_date":1564043509,"creation_date":1547152291,"answer_id":54136474,"question_id":7952154,"body_markdown":"\r\n**application.properties**\r\n\r\n    logging.level.org.springframework.web.client=DEBUG\r\n\r\n\r\n\r\n**application.yml**\r\n\r\n    logging:\r\n      level:  \r\n        root: WARN\r\n        org.springframework.web.client: DEBUG\r\n\r\n","title":"Spring RestTemplate - how to enable full debugging/logging of requests/responses?","body":"<p><strong>application.properties</strong></p>\n\n<pre><code>logging.level.org.springframework.web.client=DEBUG\n</code></pre>\n\n<p><strong>application.yml</strong></p>\n\n<pre><code>logging:\n  level:  \n    root: WARN\n    org.springframework.web.client: DEBUG\n</code></pre>\n"},{"tags":[],"owner":{"account_id":141852,"reputation":4322,"user_id":349169,"accept_rate":78,"display_name":"Chris"},"down_vote_count":0,"up_vote_count":24,"is_accepted":false,"score":24,"last_activity_date":1564860015,"creation_date":1564398010,"answer_id":57252427,"question_id":7952154,"body_markdown":"# ---- July 2019 ---- \n# *(using Spring Boot)*\n\nI was surprised that Spring Boot, with all it&#39;s Zero Configuration magic, doesn&#39;t provide an easy way to inspect or log a simple JSON response body with RestTemplate. I looked through the various answers and comments provided here, and am sharing my own distilled version of what (still) works and seems to me like a reasonable solution, given the current options (I&#39;m using Spring Boot 2.1.6 with Gradle 4.4)\n\n## 1. Using Fiddler as http proxy\n\nThis is actually quite an elegant solution, as it bypasses all the cumbersome efforts of creating your own interceptor or changing the underlying http client to apache (see below).\n\n&gt; Install and run [Fiddler][1]\n\nand then\n\n&gt; add `-DproxySet=true -Dhttp.proxyHost=localhost -Dhttp.proxyPort=8888` to your VM Options\n\n## 2. Using Apache HttpClient\n\nAdd Apache HttpClient to your Maven or Gradle dependencies.\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;\n        &lt;artifactId&gt;httpclient&lt;/artifactId&gt;\n        &lt;version&gt;4.5.9&lt;/version&gt;\n    &lt;/dependency&gt;\n\nUse `HttpComponentsClientHttpRequestFactory` as RequestFactory for RestTemplate. The simplest way to do that would be: \n\n&gt; `RestTemplate restTemplate = new RestTemplate();`\n&gt;\n&gt; `restTemplate.setRequestFactory(new HttpComponentsClientHttpRequestFactory());`\n\nEnable DEBUG in your `application.properties` file (if you&#39;re using Spring Boot)\n\n&gt; `logging.level.org.apache.http=DEBUG`\n\nIf you&#39;re using Spring Boot, you&#39;ll need to make sure you have a logging framework set up, e.g. by using a spring-boot-starter dependency that includes `spring-boot-starter-logging`.\n\n## 3. Use an Interceptor\n\nI&#39;ll let you read through the proposals, counter-proposals, and gotchas in the other answers and comments and decide for yourself if you want to go down that path.\n\n## 4. Log URL and Response Status without Body\n\nAlthough this doesn&#39;t meet the stated requirements of logging the body, it&#39;s a quick and simple way to start logging your REST calls. It displays the full URL and response status.\n\nSimply add the following line to your `application.properties` file (assuming you&#39;re using Spring Boot, and assuming you are using a spring boot starter dependency that includes `spring-boot-starter-logging`)\n\n&gt; logging.level.org.springframework.web.client.RestTemplate=DEBUG\n\nThe output will look something like this:\n\n    2019-07-29 11:53:50.265 DEBUG o.s.web.client.RestTemplate : HTTP GET http://www.myrestservice.com/Endpoint?myQueryParam=myValue\n    2019-07-29 11:53:50.276 DEBUG o.s.web.client.RestTemplate : Accept=[application/json]\n    2019-07-29 11:53:50.584 DEBUG o.s.web.client.RestTemplate : Response 200 OK\n    2019-07-29 11:53:50.585 DEBUG o.s.web.client.RestTemplate : Reading to [org.mynamespace.MyJsonModelClass]\n\n\n  [1]: https://www.telerik.com/fiddler","title":"Spring RestTemplate - how to enable full debugging/logging of requests/responses?","body":"<h1>---- July 2019 ----</h1>\n<h1><em>(using Spring Boot)</em></h1>\n<p>I was surprised that Spring Boot, with all it's Zero Configuration magic, doesn't provide an easy way to inspect or log a simple JSON response body with RestTemplate. I looked through the various answers and comments provided here, and am sharing my own distilled version of what (still) works and seems to me like a reasonable solution, given the current options (I'm using Spring Boot 2.1.6 with Gradle 4.4)</p>\n<h2>1. Using Fiddler as http proxy</h2>\n<p>This is actually quite an elegant solution, as it bypasses all the cumbersome efforts of creating your own interceptor or changing the underlying http client to apache (see below).</p>\n<blockquote>\n<p>Install and run <a href=\"https://www.telerik.com/fiddler\" rel=\"noreferrer\">Fiddler</a></p>\n</blockquote>\n<p>and then</p>\n<blockquote>\n<p>add <code>-DproxySet=true -Dhttp.proxyHost=localhost -Dhttp.proxyPort=8888</code> to your VM Options</p>\n</blockquote>\n<h2>2. Using Apache HttpClient</h2>\n<p>Add Apache HttpClient to your Maven or Gradle dependencies.</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;\n    &lt;artifactId&gt;httpclient&lt;/artifactId&gt;\n    &lt;version&gt;4.5.9&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Use <code>HttpComponentsClientHttpRequestFactory</code> as RequestFactory for RestTemplate. The simplest way to do that would be:</p>\n<blockquote>\n<p><code>RestTemplate restTemplate = new RestTemplate();</code></p>\n<p><code>restTemplate.setRequestFactory(new HttpComponentsClientHttpRequestFactory());</code></p>\n</blockquote>\n<p>Enable DEBUG in your <code>application.properties</code> file (if you're using Spring Boot)</p>\n<blockquote>\n<p><code>logging.level.org.apache.http=DEBUG</code></p>\n</blockquote>\n<p>If you're using Spring Boot, you'll need to make sure you have a logging framework set up, e.g. by using a spring-boot-starter dependency that includes <code>spring-boot-starter-logging</code>.</p>\n<h2>3. Use an Interceptor</h2>\n<p>I'll let you read through the proposals, counter-proposals, and gotchas in the other answers and comments and decide for yourself if you want to go down that path.</p>\n<h2>4. Log URL and Response Status without Body</h2>\n<p>Although this doesn't meet the stated requirements of logging the body, it's a quick and simple way to start logging your REST calls. It displays the full URL and response status.</p>\n<p>Simply add the following line to your <code>application.properties</code> file (assuming you're using Spring Boot, and assuming you are using a spring boot starter dependency that includes <code>spring-boot-starter-logging</code>)</p>\n<blockquote>\n<p>logging.level.org.springframework.web.client.RestTemplate=DEBUG</p>\n</blockquote>\n<p>The output will look something like this:</p>\n<pre><code>2019-07-29 11:53:50.265 DEBUG o.s.web.client.RestTemplate : HTTP GET http://www.myrestservice.com/Endpoint?myQueryParam=myValue\n2019-07-29 11:53:50.276 DEBUG o.s.web.client.RestTemplate : Accept=[application/json]\n2019-07-29 11:53:50.584 DEBUG o.s.web.client.RestTemplate : Response 200 OK\n2019-07-29 11:53:50.585 DEBUG o.s.web.client.RestTemplate : Reading to [org.mynamespace.MyJsonModelClass]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1577409,"reputation":16005,"user_id":1463522,"accept_rate":64,"display_name":"holmis83"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1569941865,"creation_date":1569941865,"answer_id":58187536,"question_id":7952154,"body_markdown":"For logging to **Logback** with help from Apache HttpClient:\r\n\r\nYou need Apache HttpClient in classpath:\r\n\r\n&lt;!-- language: lang-xml --&gt;\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;\r\n      &lt;artifactId&gt;httpclient&lt;/artifactId&gt;\r\n      &lt;version&gt;4.5.10&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nConfigure your `RestTemplate` to use HttpClient:\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    restTemplate.setRequestFactory(new HttpComponentsClientHttpRequestFactory());\r\n\r\nTo log requests and responses, add to Logback configuration file:\r\n\r\n&lt;!-- language: lang-xml --&gt;\r\n\r\n    &lt;logger name=&quot;org.apache.http.wire&quot; level=&quot;DEBUG&quot;/&gt;\r\n\r\nOr to log even more:\r\n\r\n&lt;!-- language: lang-xml --&gt;\r\n\r\n    &lt;logger name=&quot;org.apache.http&quot; level=&quot;DEBUG&quot;/&gt;\r\n","title":"Spring RestTemplate - how to enable full debugging/logging of requests/responses?","body":"<p>For logging to <strong>Logback</strong> with help from Apache HttpClient:</p>\n\n<p>You need Apache HttpClient in classpath:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n  &lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;\n  &lt;artifactId&gt;httpclient&lt;/artifactId&gt;\n  &lt;version&gt;4.5.10&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>Configure your <code>RestTemplate</code> to use HttpClient:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>restTemplate.setRequestFactory(new HttpComponentsClientHttpRequestFactory());\n</code></pre>\n\n<p>To log requests and responses, add to Logback configuration file:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;logger name=\"org.apache.http.wire\" level=\"DEBUG\"/&gt;\n</code></pre>\n\n<p>Or to log even more:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;logger name=\"org.apache.http\" level=\"DEBUG\"/&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4356026,"reputation":1989,"user_id":3554624,"display_name":"panser"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1617786090,"creation_date":1580295632,"answer_id":59965640,"question_id":7952154,"body_markdown":" `org.apache.http.wire` gives too unreadable logs, so I use [logbook][1] to log application Servlet and RestTemplate requests &amp; responses with payloads.\r\n\r\n`build.gradle`:\r\n```groovy\r\ncompile group: &#39;org.zalando&#39;, name: &#39;logbook-spring-boot-starter&#39;, version: &#39;2.6.2&#39;\r\n```\r\n\r\nor Maven dependency:\r\n```xml\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.zalando&lt;/groupId&gt;\r\n    &lt;artifactId&gt;logbook-spring-boot-starter&lt;/artifactId&gt;\r\n    &lt;version&gt;2.6.2&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\n`application.properties` (or trough YAML):\r\n```properties\r\nlogging.level.org.zalando.logbook = TRACE\r\n```\r\n\r\n`RestTemplate.java`:\r\n```java\r\nimport java.util.function.Supplier;\r\n\r\nimport org.apache.http.impl.client.CloseableHttpClient;\r\nimport org.apache.http.impl.client.HttpClientBuilder;\r\nimport org.springframework.boot.web.client.RestTemplateBuilder;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.http.client.ClientHttpRequestFactory;\r\nimport org.springframework.http.client.HttpComponentsClientHttpRequestFactory;\r\nimport org.springframework.web.client.RestTemplate;\r\nimport org.zalando.logbook.httpclient.LogbookHttpRequestInterceptor;\r\nimport org.zalando.logbook.httpclient.LogbookHttpResponseInterceptor;\r\n\r\n@Configuration\r\npublic class RestTemplateConfiguration {\r\n    private final LogbookHttpRequestInterceptor logbookHttpRequestInterceptor;\r\n    private final LogbookHttpResponseInterceptor logbookHttpResponseInterceptor;\r\n\r\n    public RestTemplateConfiguration(LogbookHttpRequestInterceptor logbookHttpRequestInterceptor,\r\n            LogbookHttpResponseInterceptor logbookHttpResponseInterceptor) {\r\n        this.logbookHttpRequestInterceptor = logbookHttpRequestInterceptor;\r\n        this.logbookHttpResponseInterceptor = logbookHttpResponseInterceptor;\r\n    }\r\n\r\n    @Bean\r\n    public RestTemplate restTemplate(RestTemplateBuilder restTemplateBuilder) {\r\n        return restTemplateBuilder\r\n                .requestFactory(new MyRequestFactorySupplier())\r\n                .build();\r\n    }\r\n\r\n    class MyRequestFactorySupplier implements Supplier&lt;ClientHttpRequestFactory&gt; {\r\n        @Override\r\n        public ClientHttpRequestFactory get() {\r\n            // Using Apache HTTP client\r\n            CloseableHttpClient client = HttpClientBuilder.create()\r\n                    .addInterceptorFirst(logbookHttpRequestInterceptor)\r\n                    .addInterceptorFirst(logbookHttpResponseInterceptor)\r\n                    .build();\r\n            return new HttpComponentsClientHttpRequestFactory(client);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n\r\n  [1]: https://github.com/zalando/logbook","title":"Spring RestTemplate - how to enable full debugging/logging of requests/responses?","body":"<p><code>org.apache.http.wire</code> gives too unreadable logs, so I use <a href=\"https://github.com/zalando/logbook\" rel=\"nofollow noreferrer\">logbook</a> to log application Servlet and RestTemplate requests &amp; responses with payloads.</p>\n<p><code>build.gradle</code>:</p>\n<pre><code>compile group: 'org.zalando', name: 'logbook-spring-boot-starter', version: '2.6.2'\n</code></pre>\n<p>or Maven dependency:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.zalando&lt;/groupId&gt;\n    &lt;artifactId&gt;logbook-spring-boot-starter&lt;/artifactId&gt;\n    &lt;version&gt;2.6.2&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p><code>application.properties</code> (or trough YAML):</p>\n<pre><code>logging.level.org.zalando.logbook = TRACE\n</code></pre>\n<p><code>RestTemplate.java</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.function.Supplier;\n\nimport org.apache.http.impl.client.CloseableHttpClient;\nimport org.apache.http.impl.client.HttpClientBuilder;\nimport org.springframework.boot.web.client.RestTemplateBuilder;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.http.client.ClientHttpRequestFactory;\nimport org.springframework.http.client.HttpComponentsClientHttpRequestFactory;\nimport org.springframework.web.client.RestTemplate;\nimport org.zalando.logbook.httpclient.LogbookHttpRequestInterceptor;\nimport org.zalando.logbook.httpclient.LogbookHttpResponseInterceptor;\n\n@Configuration\npublic class RestTemplateConfiguration {\n    private final LogbookHttpRequestInterceptor logbookHttpRequestInterceptor;\n    private final LogbookHttpResponseInterceptor logbookHttpResponseInterceptor;\n\n    public RestTemplateConfiguration(LogbookHttpRequestInterceptor logbookHttpRequestInterceptor,\n            LogbookHttpResponseInterceptor logbookHttpResponseInterceptor) {\n        this.logbookHttpRequestInterceptor = logbookHttpRequestInterceptor;\n        this.logbookHttpResponseInterceptor = logbookHttpResponseInterceptor;\n    }\n\n    @Bean\n    public RestTemplate restTemplate(RestTemplateBuilder restTemplateBuilder) {\n        return restTemplateBuilder\n                .requestFactory(new MyRequestFactorySupplier())\n                .build();\n    }\n\n    class MyRequestFactorySupplier implements Supplier&lt;ClientHttpRequestFactory&gt; {\n        @Override\n        public ClientHttpRequestFactory get() {\n            // Using Apache HTTP client\n            CloseableHttpClient client = HttpClientBuilder.create()\n                    .addInterceptorFirst(logbookHttpRequestInterceptor)\n                    .addInterceptorFirst(logbookHttpResponseInterceptor)\n                    .build();\n            return new HttpComponentsClientHttpRequestFactory(client);\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":20506220,"reputation":1455,"user_id":15048947,"display_name":"Md. Shahariar Hossen"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1642151125,"creation_date":1642151125,"answer_id":70708226,"question_id":7952154,"body_markdown":"**An easy way to solve the problem:**&lt;br&gt;\r\n1. **Create a Bean of RestTemplate using RestTemplateBuilder:** It will give you more control over connection time and reading time.\r\n```\r\n@Configuration\r\npublic class RestTemplateConfig {\r\n  @Bean\r\n  public RestTemplate restTemplate(RestTemplateBuilder builder) {\r\n    return builder\r\n      .setConnectTimeout(Duration.ofMillis(60000))\r\n      .setReadTimeout(Duration.ofMillis(60000))\r\n      .build();\r\n  }\r\n\r\n}\r\n```\r\n2. **Add this line to the `resources/application.properties` file**:\r\n```logging.level.org.springframework.web.client.RestTemplate=DEBUG```\r\n&lt;br&gt;Hope the problem will be resolved! ","title":"Spring RestTemplate - how to enable full debugging/logging of requests/responses?","body":"<p><strong>An easy way to solve the problem:</strong><br></p>\n<ol>\n<li><strong>Create a Bean of RestTemplate using RestTemplateBuilder:</strong> It will give you more control over connection time and reading time.</li>\n</ol>\n<pre><code>@Configuration\npublic class RestTemplateConfig {\n  @Bean\n  public RestTemplate restTemplate(RestTemplateBuilder builder) {\n    return builder\n      .setConnectTimeout(Duration.ofMillis(60000))\n      .setReadTimeout(Duration.ofMillis(60000))\n      .build();\n  }\n\n}\n</code></pre>\n<ol start=\"2\">\n<li><strong>Add this line to the <code>resources/application.properties</code> file</strong>:\n<code>logging.level.org.springframework.web.client.RestTemplate=DEBUG</code>\n<br>Hope the problem will be resolved!</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":78239,"reputation":3012,"user_id":1904217,"accept_rate":95,"display_name":"Mostafa"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1657943702,"creation_date":1657943031,"answer_id":73001361,"question_id":7952154,"body_markdown":"I went through all answers, In case you need to set authentication type or connection time out, then you can do like this : \r\n\r\n\r\n    SimpleClientHttpRequestFactory factory = new SimpleClientHttpRequestFactory();\r\n    factory.setConnectTimeout(Integer.valueOf(YOUR_VALUE));\r\n    factory.setReadTimeout(Integer.valueOf(YOUR_VALUE));\r\n    \r\n    RestTemplate restTemplate = new RestTemplate(new BufferingClientHttpRequestFactory(factory));\r\n    restTemplate.getInterceptors().add(new LoggingRequestInterceptor());\r\n    restTemplate.getInterceptors().add(new BasicAuthenticationInterceptor(USER_NAME,PASSWORD,StandardCharsets.UTF_8));\r\n    return restTemplate;","title":"Spring RestTemplate - how to enable full debugging/logging of requests/responses?","body":"<p>I went through all answers, In case you need to set authentication type or connection time out, then you can do like this :</p>\n<pre><code>SimpleClientHttpRequestFactory factory = new SimpleClientHttpRequestFactory();\nfactory.setConnectTimeout(Integer.valueOf(YOUR_VALUE));\nfactory.setReadTimeout(Integer.valueOf(YOUR_VALUE));\n\nRestTemplate restTemplate = new RestTemplate(new BufferingClientHttpRequestFactory(factory));\nrestTemplate.getInterceptors().add(new LoggingRequestInterceptor());\nrestTemplate.getInterceptors().add(new BasicAuthenticationInterceptor(USER_NAME,PASSWORD,StandardCharsets.UTF_8));\nreturn restTemplate;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9941523,"reputation":1018,"user_id":7357959,"display_name":"Tsvetoslav Tsvetkov"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1676455380,"creation_date":1675758793,"answer_id":75370732,"question_id":7952154,"body_markdown":"Most of the above solution doesn&#39;t work properly when RestTemplate is used and there is a `4xx` or `5xx` response type as `ClientHttpResponse`&#39;s body is empty. Here is the solution that I used to log the whole HTTP request/response in RestTemplate without losing the response body information in all cases. The Spring boot version is `&lt;version&gt;2.7.5&lt;/version&gt;`\r\n\r\n1.Create `LoggingInterceptor` class\r\n\r\n    import lombok.extern.slf4j.Slf4j;\r\n    import org.springframework.http.HttpHeaders;\r\n    import org.springframework.http.HttpRequest;\r\n    import org.springframework.http.HttpStatus;\r\n    import org.springframework.http.client.ClientHttpRequestExecution;\r\n    import org.springframework.http.client.ClientHttpRequestInterceptor;\r\n    import org.springframework.http.client.ClientHttpResponse;\r\n    import org.springframework.stereotype.Component;\r\n    import org.springframework.util.StreamUtils;\r\n\r\n    import java.io.*;\r\n\r\n    @Component\r\n    @Slf4j\r\n    public class LoggingInterceptor implements ClientHttpRequestInterceptor {\r\n\r\n    @Override\r\n    public ClientHttpResponse intercept(final HttpRequest request, final byte[] body, final ClientHttpRequestExecution execution) throws IOException {\r\n        traceRequest(request, body);\r\n        ClientHttpResponse response = execution.execute(request, body);\r\n        response = traceResponse(response);\r\n        return response;\r\n    }\r\n\r\n    private void traceRequest(HttpRequest request, byte[] body) throws IOException {\r\n        if (!log.isDebugEnabled()) {\r\n            return;\r\n        }\r\n        log.debug(&quot;=========================== Request Begin ===========================&quot;);\r\n        log.debug(&quot;URI          : &quot; + request.getURI());\r\n        log.debug(&quot;Method       : &quot; + request.getMethod());\r\n        log.debug(&quot;Headers      : &quot; + request.getHeaders());\r\n        log.debug(&quot;Body : &quot; + new String(body, &quot;utf-8&quot;));\r\n        log.debug(&quot;============================ Request End ============================&quot;);\r\n\r\n    }\r\n\r\n    private ClientHttpResponse traceResponse(ClientHttpResponse response) throws IOException {\r\n        if (!log.isDebugEnabled()) {\r\n            return response;\r\n        }\r\n        ClientHttpResponse newCopiedResponse = new BufferingClientHttpResponseWrapper(response);\r\n        StringBuilder inputStringBuilder = new StringBuilder();\r\n        // ClientHttpResponse there is no body in response in case of 4xx or 5xx code, so we skip the body part\r\n        if (isSuccessStatus(response.getRawStatusCode())) {\r\n            inputStringBuilder = new StringBuilder();\r\n            BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(newCopiedResponse.getBody(), &quot;UTF-8&quot;));\r\n            String line = bufferedReader.readLine();\r\n            while (line != null) {\r\n                inputStringBuilder.append(line);\r\n                line = bufferedReader.readLine();\r\n            }\r\n        }\r\n\r\n        log.debug(&quot;=========================== Response Begin ===========================&quot;);\r\n        log.debug(&quot;Status code   : {}&quot;, response.getStatusCode());\r\n        log.debug(&quot;Status text   : {}&quot;, response.getStatusText());\r\n        log.debug(&quot;Headers       : {}&quot;, response.getHeaders());\r\n        if (isSuccessStatus(response.getRawStatusCode())) {\r\n            log.debug(&quot;Response Body : {}&quot;, inputStringBuilder.toString());\r\n            log.debug(&quot;============================ Response End ============================&quot;);\r\n        }\r\n\r\n        return newCopiedResponse;\r\n\r\n    }\r\n\r\n    private static boolean isSuccessStatus(int statusCode) {\r\n        return (statusCode / 100) == 2;\r\n    }\r\n\r\n\r\n    /**\r\n     * Wrapper around ClientHttpResponse, buffers the body so it can be read repeatedly (for logging &amp; consuming the result).\r\n     */\r\n    private static class BufferingClientHttpResponseWrapper implements ClientHttpResponse {\r\n\r\n        private final ClientHttpResponse response;\r\n        private byte[] body;\r\n\r\n        public BufferingClientHttpResponseWrapper(ClientHttpResponse response) {\r\n            this.response = response;\r\n        }\r\n\r\n        @Override\r\n        public InputStream getBody() throws IOException {\r\n            if (body == null) {\r\n                body = StreamUtils.copyToByteArray(response.getBody());\r\n            }\r\n            return new ByteArrayInputStream(body);\r\n        }\r\n\r\n        @Override\r\n        public HttpStatus getStatusCode() throws IOException {\r\n            return this.response.getStatusCode();\r\n        }\r\n\r\n        @Override\r\n        public int getRawStatusCode() throws IOException {\r\n            return this.response.getRawStatusCode();\r\n        }\r\n\r\n        @Override\r\n        public String getStatusText() throws IOException {\r\n            return this.response.getStatusText();\r\n        }\r\n\r\n        @Override\r\n        public HttpHeaders getHeaders() {\r\n            return this.response.getHeaders();\r\n        }\r\n\r\n        @Override\r\n        public void close() {\r\n            this.response.close();\r\n        }\r\n    }\r\n\r\n}\r\n\r\n2.Attach it to the `RestTemplate` bean\r\n\r\n    @Configuration\r\n    public class RestTemplateConfig {\r\n    \r\n        @Bean\r\n        public RestTemplate createRestTemplate(LoggingInterceptor loggingInterceptor) {\r\n    \r\n            RestTemplate restTemplate = new RestTemplate();\r\n            restTemplate.setInterceptors(Collections.singletonList(loggingInterceptor));\r\n    \r\n            return restTemplate;\r\n        }\r\n    }\r\n\r\n3.Apply the appropriate level in the application \r\n\r\n    logging:\r\n      level:\r\n        com:\r\n          test: DEBUG","title":"Spring RestTemplate - how to enable full debugging/logging of requests/responses?","body":"<p>Most of the above solution doesn't work properly when RestTemplate is used and there is a <code>4xx</code> or <code>5xx</code> response type as <code>ClientHttpResponse</code>'s body is empty. Here is the solution that I used to log the whole HTTP request/response in RestTemplate without losing the response body information in all cases. The Spring boot version is <code>&lt;version&gt;2.7.5&lt;/version&gt;</code></p>\n<p>1.Create <code>LoggingInterceptor</code> class</p>\n<pre><code>import lombok.extern.slf4j.Slf4j;\nimport org.springframework.http.HttpHeaders;\nimport org.springframework.http.HttpRequest;\nimport org.springframework.http.HttpStatus;\nimport org.springframework.http.client.ClientHttpRequestExecution;\nimport org.springframework.http.client.ClientHttpRequestInterceptor;\nimport org.springframework.http.client.ClientHttpResponse;\nimport org.springframework.stereotype.Component;\nimport org.springframework.util.StreamUtils;\n\nimport java.io.*;\n\n@Component\n@Slf4j\npublic class LoggingInterceptor implements ClientHttpRequestInterceptor {\n\n@Override\npublic ClientHttpResponse intercept(final HttpRequest request, final byte[] body, final ClientHttpRequestExecution execution) throws IOException {\n    traceRequest(request, body);\n    ClientHttpResponse response = execution.execute(request, body);\n    response = traceResponse(response);\n    return response;\n}\n\nprivate void traceRequest(HttpRequest request, byte[] body) throws IOException {\n    if (!log.isDebugEnabled()) {\n        return;\n    }\n    log.debug(&quot;=========================== Request Begin ===========================&quot;);\n    log.debug(&quot;URI          : &quot; + request.getURI());\n    log.debug(&quot;Method       : &quot; + request.getMethod());\n    log.debug(&quot;Headers      : &quot; + request.getHeaders());\n    log.debug(&quot;Body : &quot; + new String(body, &quot;utf-8&quot;));\n    log.debug(&quot;============================ Request End ============================&quot;);\n\n}\n\nprivate ClientHttpResponse traceResponse(ClientHttpResponse response) throws IOException {\n    if (!log.isDebugEnabled()) {\n        return response;\n    }\n    ClientHttpResponse newCopiedResponse = new BufferingClientHttpResponseWrapper(response);\n    StringBuilder inputStringBuilder = new StringBuilder();\n    // ClientHttpResponse there is no body in response in case of 4xx or 5xx code, so we skip the body part\n    if (isSuccessStatus(response.getRawStatusCode())) {\n        inputStringBuilder = new StringBuilder();\n        BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(newCopiedResponse.getBody(), &quot;UTF-8&quot;));\n        String line = bufferedReader.readLine();\n        while (line != null) {\n            inputStringBuilder.append(line);\n            line = bufferedReader.readLine();\n        }\n    }\n\n    log.debug(&quot;=========================== Response Begin ===========================&quot;);\n    log.debug(&quot;Status code   : {}&quot;, response.getStatusCode());\n    log.debug(&quot;Status text   : {}&quot;, response.getStatusText());\n    log.debug(&quot;Headers       : {}&quot;, response.getHeaders());\n    if (isSuccessStatus(response.getRawStatusCode())) {\n        log.debug(&quot;Response Body : {}&quot;, inputStringBuilder.toString());\n        log.debug(&quot;============================ Response End ============================&quot;);\n    }\n\n    return newCopiedResponse;\n\n}\n\nprivate static boolean isSuccessStatus(int statusCode) {\n    return (statusCode / 100) == 2;\n}\n\n\n/**\n * Wrapper around ClientHttpResponse, buffers the body so it can be read repeatedly (for logging &amp; consuming the result).\n */\nprivate static class BufferingClientHttpResponseWrapper implements ClientHttpResponse {\n\n    private final ClientHttpResponse response;\n    private byte[] body;\n\n    public BufferingClientHttpResponseWrapper(ClientHttpResponse response) {\n        this.response = response;\n    }\n\n    @Override\n    public InputStream getBody() throws IOException {\n        if (body == null) {\n            body = StreamUtils.copyToByteArray(response.getBody());\n        }\n        return new ByteArrayInputStream(body);\n    }\n\n    @Override\n    public HttpStatus getStatusCode() throws IOException {\n        return this.response.getStatusCode();\n    }\n\n    @Override\n    public int getRawStatusCode() throws IOException {\n        return this.response.getRawStatusCode();\n    }\n\n    @Override\n    public String getStatusText() throws IOException {\n        return this.response.getStatusText();\n    }\n\n    @Override\n    public HttpHeaders getHeaders() {\n        return this.response.getHeaders();\n    }\n\n    @Override\n    public void close() {\n        this.response.close();\n    }\n}\n</code></pre>\n<p>}</p>\n<p>2.Attach it to the <code>RestTemplate</code> bean</p>\n<pre><code>@Configuration\npublic class RestTemplateConfig {\n\n    @Bean\n    public RestTemplate createRestTemplate(LoggingInterceptor loggingInterceptor) {\n\n        RestTemplate restTemplate = new RestTemplate();\n        restTemplate.setInterceptors(Collections.singletonList(loggingInterceptor));\n\n        return restTemplate;\n    }\n}\n</code></pre>\n<p>3.Apply the appropriate level in the application</p>\n<pre><code>logging:\n  level:\n    com:\n      test: DEBUG\n</code></pre>\n"},{"tags":[],"owner":{"account_id":25661568,"reputation":43,"user_id":19427242,"display_name":"BigMouse"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700048264,"creation_date":1700048264,"answer_id":77487391,"question_id":7952154,"body_markdown":"From `spring boot 3`, the apache dependency is more recent and it is: `&lt;artifactId&gt;httpclient5&lt;/artifactId&gt;` which is used\r\n\r\nYou must then use the following property:`org.apache.hc.client5.http:DEBUG`. ","title":"Spring RestTemplate - how to enable full debugging/logging of requests/responses?","body":"<p>From <code>spring boot 3</code>, the apache dependency is more recent and it is: <code>&lt;artifactId&gt;httpclient5&lt;/artifactId&gt;</code> which is used</p>\n<p>You must then use the following property:<code>org.apache.hc.client5.http:DEBUG</code>.</p>\n"}],"owner":{"account_id":307979,"reputation":3127,"user_id":619596,"display_name":"Paul Sabou"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":349381,"favorite_count":0,"down_vote_count":0,"up_vote_count":271,"accepted_answer_id":7964142,"answer_count":31,"score":271,"last_activity_date":1700048264,"creation_date":1320055128,"question_id":7952154,"body_markdown":"I have been using the Spring RestTemplate for a while and I consistently hit a wall when I&#39;am trying to debug it&#39;s requests and responses. I&#39;m basically looking to see the same things as I see when I use curl with the &quot;verbose&quot; option turned on. For example :\r\n\r\n    curl -v http://twitter.com/statuses/public_timeline.rss\r\n\r\nWould display both the sent data and the received data (including the headers, cookies, etc.).\r\n\r\nI have checked some related posts like :\r\nhttps://stackoverflow.com/questions/3892018/how-do-i-log-response-in-spring-resttemplate\r\nbut I haven&#39;t managed to solve this issue.\r\n\r\nOne way to do this would be to actually change the RestTemplate source code and add some extra logging statements there, but I would find this approach really a last resort thing. There should be some way to tell Spring Web Client/RestTemplate to log everything in a much friendlier way.\r\n\r\n\r\nMy goal would be to be able to do this with code like :\r\n\r\n    restTemplate.put(&quot;http://someurl&quot;, objectToPut, urlPathValues);\r\nand then to get the same type of debug information (as I get with curl) in the log file or in the console.\r\nI believe this would be extremely useful for anyone that uses the Spring RestTemplate and has problems. Using curl to debug your RestTemplate problems just doesn&#39;t work (in some cases). \r\n\r\n\r\n","title":"Spring RestTemplate - how to enable full debugging/logging of requests/responses?","body":"<p>I have been using the Spring RestTemplate for a while and I consistently hit a wall when I'am trying to debug it's requests and responses. I'm basically looking to see the same things as I see when I use curl with the \"verbose\" option turned on. For example :</p>\n\n<pre><code>curl -v http://twitter.com/statuses/public_timeline.rss\n</code></pre>\n\n<p>Would display both the sent data and the received data (including the headers, cookies, etc.).</p>\n\n<p>I have checked some related posts like :\n<a href=\"https://stackoverflow.com/questions/3892018/how-do-i-log-response-in-spring-resttemplate\">How do I log response in Spring RestTemplate?</a>\nbut I haven't managed to solve this issue.</p>\n\n<p>One way to do this would be to actually change the RestTemplate source code and add some extra logging statements there, but I would find this approach really a last resort thing. There should be some way to tell Spring Web Client/RestTemplate to log everything in a much friendlier way.</p>\n\n<p>My goal would be to be able to do this with code like :</p>\n\n<pre><code>restTemplate.put(\"http://someurl\", objectToPut, urlPathValues);\n</code></pre>\n\n<p>and then to get the same type of debug information (as I get with curl) in the log file or in the console.\nI believe this would be extremely useful for anyone that uses the Spring RestTemplate and has problems. Using curl to debug your RestTemplate problems just doesn't work (in some cases). </p>\n"},{"tags":["java","azul-zulu","azul-zing","crac"],"answers":[{"tags":[],"owner":{"account_id":11106749,"reputation":3227,"user_id":8153713,"display_name":"Speakjava"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1684868330,"creation_date":1684868330,"answer_id":76317863,"question_id":76317788,"body_markdown":"This is not the way CRaC works. You need to think of it as a running application that has been paused. Just as you can&#39;t change the arguments to `main()` of a running application, you can&#39;t do this with CRaC.\r\n\r\nWhat you could do is use the `afterRestore()` method of a class that implements the `Resource` interface and read new values from some source (e.g. a file). \r\n","title":"Java CRaC resume from checkpoint with arguments","body":"<p>This is not the way CRaC works. You need to think of it as a running application that has been paused. Just as you can't change the arguments to <code>main()</code> of a running application, you can't do this with CRaC.</p>\n<p>What you could do is use the <code>afterRestore()</code> method of a class that implements the <code>Resource</code> interface and read new values from some source (e.g. a file).</p>\n"},{"tags":[],"owner":{"account_id":3221113,"reputation":33,"user_id":2718551,"display_name":"antonkozlov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700048140,"creation_date":1700048140,"answer_id":77487382,"question_id":76317788,"body_markdown":"In theory, you can build this functionallity by adding a Resource into your program, that will read arguments from a file and call some java code. And then, prior restore, write the parameters to the file. \r\n\r\nIt all looks general enough to be implemented in the JDK. So since https://github.com/openjdk/crac/pull/16, you can pass a class name and arguments to run on restore. Please check the supplied JavaCompilerCRaC.java. \r\n\r\nAbility to run some java code is inteded to do some post-restore actions. For example, setting some parameters, etc. The command line looks like:\r\n\r\n```\r\njava -XX:CRaCRestoreFrom=cr ClassName arg1 arg2 ...\r\n```\r\n\r\nCRaC allows to set properties on restore by \r\n```\r\njava -XX:CRaCRestoreFrom=cr -DpropName=propValue\r\n```\r\n\r\nBut you can implement it yourself:\r\n\r\n```\r\npublic class Props {\r\n    public static void main(String[] args) throws Exception {\r\n        for (int i = 0; i &lt; args.length; i += 2) {\r\n            System.setProperty(args[i], args[i + 1]);\r\n        }\r\n        printProperties();\r\n    }\r\n}\r\n```\r\n\r\n```\r\njava -XX:CRaCRestoreFrom=cr Props propName propValue\r\n```\r\n\r\nSo the limit is what you can express with java code.\r\n\r\nFeedback on this functionallity would be appreciated.","title":"Java CRaC resume from checkpoint with arguments","body":"<p>In theory, you can build this functionallity by adding a Resource into your program, that will read arguments from a file and call some java code. And then, prior restore, write the parameters to the file.</p>\n<p>It all looks general enough to be implemented in the JDK. So since <a href=\"https://github.com/openjdk/crac/pull/16\" rel=\"nofollow noreferrer\">https://github.com/openjdk/crac/pull/16</a>, you can pass a class name and arguments to run on restore. Please check the supplied JavaCompilerCRaC.java.</p>\n<p>Ability to run some java code is inteded to do some post-restore actions. For example, setting some parameters, etc. The command line looks like:</p>\n<pre><code>java -XX:CRaCRestoreFrom=cr ClassName arg1 arg2 ...\n</code></pre>\n<p>CRaC allows to set properties on restore by</p>\n<pre><code>java -XX:CRaCRestoreFrom=cr -DpropName=propValue\n</code></pre>\n<p>But you can implement it yourself:</p>\n<pre><code>public class Props {\n    public static void main(String[] args) throws Exception {\n        for (int i = 0; i &lt; args.length; i += 2) {\n            System.setProperty(args[i], args[i + 1]);\n        }\n        printProperties();\n    }\n}\n</code></pre>\n<pre><code>java -XX:CRaCRestoreFrom=cr Props propName propValue\n</code></pre>\n<p>So the limit is what you can express with java code.</p>\n<p>Feedback on this functionallity would be appreciated.</p>\n"}],"owner":{"account_id":510727,"reputation":3230,"user_id":1062189,"display_name":"erdos"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":120,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1700048140,"creation_date":1684867484,"question_id":76317788,"body_markdown":"I am experimenting with CRaC on Azul JVM. I have built a checkpoint of my program with\r\n\r\n```\r\n$JAVA_CMD -XX:CRaCCheckpointTo=cr -jar target/cractest-0.1.0-standalone.jar\r\n```\r\n\r\nAnd I can restore it successfully with \r\n\r\n```\r\n$JAVA_CMD -XX:CRaCRestoreFrom=cr\r\n```\r\n\r\nIt works all right. In the next step, I want to pass arguments to the program on restore, so the program can pick it up, ideally just like the following:\r\n\r\n```\r\n$JAVA_CMD -XX:CRaCRestoreFrom=cr -- arg1 arg2 arg3\r\n```\r\n\r\nAnd normally I would access `arg1 arg2 arg3` in the `String[] args` parameter of `main`, but since we are resuming a checkpoint, we don&#39;t have access to that array anymore.\r\n\r\nHow could I still access the parameters on checkpoint restore? Is it available in some context object during runtime?\r\n\r\n","title":"Java CRaC resume from checkpoint with arguments","body":"<p>I am experimenting with CRaC on Azul JVM. I have built a checkpoint of my program with</p>\n<pre><code>$JAVA_CMD -XX:CRaCCheckpointTo=cr -jar target/cractest-0.1.0-standalone.jar\n</code></pre>\n<p>And I can restore it successfully with</p>\n<pre><code>$JAVA_CMD -XX:CRaCRestoreFrom=cr\n</code></pre>\n<p>It works all right. In the next step, I want to pass arguments to the program on restore, so the program can pick it up, ideally just like the following:</p>\n<pre><code>$JAVA_CMD -XX:CRaCRestoreFrom=cr -- arg1 arg2 arg3\n</code></pre>\n<p>And normally I would access <code>arg1 arg2 arg3</code> in the <code>String[] args</code> parameter of <code>main</code>, but since we are resuming a checkpoint, we don't have access to that array anymore.</p>\n<p>How could I still access the parameters on checkpoint restore? Is it available in some context object during runtime?</p>\n"},{"tags":["java","java-8","nio2"],"answers":[{"tags":[],"owner":{"account_id":1098379,"reputation":14720,"user_id":1091466,"accept_rate":78,"display_name":"Marco Acierno"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1409222720,"creation_date":1409222720,"answer_id":25546890,"question_id":25546750,"body_markdown":"With\r\n\r\n    Files.newBufferedReader(file).readLine()\r\n\r\nyou create a new Buffer everytime and it gets always reset in the first line.\r\n\r\nReplace with\r\n\r\n    BufferedReader reader = Files.newBufferedReader(file);\r\n    while ((line = reader.readLine()) != null) {\r\n      writer.write(line);\r\n    }\r\n\r\nand `.close()` the reader when done.","title":"Merge huge files without loading whole file into memory?","body":"<p>With</p>\n\n<pre><code>Files.newBufferedReader(file).readLine()\n</code></pre>\n\n<p>you create a new Buffer everytime and it gets always reset in the first line.</p>\n\n<p>Replace with</p>\n\n<pre><code>BufferedReader reader = Files.newBufferedReader(file);\nwhile ((line = reader.readLine()) != null) {\n  writer.write(line);\n}\n</code></pre>\n\n<p>and <code>.close()</code> the reader when done.</p>\n"},{"tags":[],"owner":{"account_id":960307,"reputation":107851,"user_id":984823,"display_name":"Joop Eggen"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1409224150,"creation_date":1409224150,"answer_id":25547362,"question_id":25546750,"body_markdown":"`readLine()` does not yield the line ending (&quot;\\n&quot; or &quot;\\r\\n&quot;). That was the error.\r\n\r\n    while ((line = reader.readLine()) != null) {\r\n        writer.write(line);\r\n        writer.write(&quot;\\r\\n&quot;); // Windows\r\n    }\r\n\r\nYou might also disregard this filtering of (possibly different) line endings, and use\r\n\r\n    try (OutputStream out = new FileOutputStream(file);\r\n        for (Path source : filesToBeMerged) {\r\n            Files.copy(path, out);\r\n            out.write(&quot;\\r\\n&quot;.getBytes(StandardCharsets.US_ASCII));\r\n        }\r\n    }\r\n\r\nThis writes a newline explicitly, in the case that the last line does not end with a line break.\r\n\r\nThere might still be a problem with the optional, ugly Unicode BOM character to mark the text as UTF-8/UTF-16LE/UTF-16BE at the beginning of the file.\r\n","title":"Merge huge files without loading whole file into memory?","body":"<p><code>readLine()</code> does not yield the line ending (\"\\n\" or \"\\r\\n\"). That was the error.</p>\n\n<pre><code>while ((line = reader.readLine()) != null) {\n    writer.write(line);\n    writer.write(\"\\r\\n\"); // Windows\n}\n</code></pre>\n\n<p>You might also disregard this filtering of (possibly different) line endings, and use</p>\n\n<pre><code>try (OutputStream out = new FileOutputStream(file);\n    for (Path source : filesToBeMerged) {\n        Files.copy(path, out);\n        out.write(\"\\r\\n\".getBytes(StandardCharsets.US_ASCII));\n    }\n}\n</code></pre>\n\n<p>This writes a newline explicitly, in the case that the last line does not end with a line break.</p>\n\n<p>There might still be a problem with the optional, ugly Unicode BOM character to mark the text as UTF-8/UTF-16LE/UTF-16BE at the beginning of the file.</p>\n"},{"tags":[],"owner":{"account_id":3211603,"reputation":289287,"user_id":2711488,"display_name":"Holger"},"down_vote_count":0,"up_vote_count":22,"is_accepted":true,"score":22,"last_activity_date":1409228016,"creation_date":1409228016,"answer_id":25548570,"question_id":25546750,"body_markdown":"If you want to merge two or more files efficiently you should ask yourself, why on earth are you using `char` based `Reader` and `Writer` to perform that task.\r\n\r\nBy using these classes you are performing a conversion of the file’s bytes to characters from the system’s default encoding to unicode and back from unicode to the system’s default encoding. This means the program has to perform two data conversion on the entire files.\r\n\r\nAnd, by the way, `BufferedReader` and `BufferedWriter` are by no means `NIO2` artifacts. These classes exists since the very first version of Java.\r\n\r\nWhen you are using byte-wise copying via real NIO functions, the files can be transferred without being touched by the Java application, in the best case the transfer will be performed directly in the file system’s buffer:\r\n\r\n    import static java.nio.file.StandardOpenOption.*;\r\n    \r\n    import java.io.IOException;\r\n    import java.nio.channels.FileChannel;\r\n    import java.nio.file.Path;\r\n    import java.nio.file.Paths;\r\n    \r\n    public class MergeFiles\r\n    {\r\n      public static void main(String[] arg) throws IOException {\r\n        if(arg.length&lt;2) {\r\n          System.err.println(&quot;Syntax: infiles... outfile&quot;);\r\n          System.exit(1);\r\n        }\r\n        Path outFile=Paths.get(arg[arg.length-1]);\r\n        System.out.println(&quot;TO &quot;+outFile);\r\n        try(FileChannel out=FileChannel.open(outFile, CREATE, WRITE)) {\r\n          for(int ix=0, n=arg.length-1; ix&lt;n; ix++) {\r\n            Path inFile=Paths.get(arg[ix]);\r\n            System.out.println(inFile+&quot;...&quot;);\r\n            try(FileChannel in=FileChannel.open(inFile, READ)) {\r\n              for(long p=0, l=in.size(); p&lt;l; )\r\n                p+=in.transferTo(p, l-p, out);\r\n            }\r\n          }\r\n        }\r\n        System.out.println(&quot;DONE.&quot;);\r\n      }\r\n    }\r\n\r\n","title":"Merge huge files without loading whole file into memory?","body":"<p>If you want to merge two or more files efficiently you should ask yourself, why on earth are you using <code>char</code> based <code>Reader</code> and <code>Writer</code> to perform that task.</p>\n\n<p>By using these classes you are performing a conversion of the file’s bytes to characters from the system’s default encoding to unicode and back from unicode to the system’s default encoding. This means the program has to perform two data conversion on the entire files.</p>\n\n<p>And, by the way, <code>BufferedReader</code> and <code>BufferedWriter</code> are by no means <code>NIO2</code> artifacts. These classes exists since the very first version of Java.</p>\n\n<p>When you are using byte-wise copying via real NIO functions, the files can be transferred without being touched by the Java application, in the best case the transfer will be performed directly in the file system’s buffer:</p>\n\n<pre><code>import static java.nio.file.StandardOpenOption.*;\n\nimport java.io.IOException;\nimport java.nio.channels.FileChannel;\nimport java.nio.file.Path;\nimport java.nio.file.Paths;\n\npublic class MergeFiles\n{\n  public static void main(String[] arg) throws IOException {\n    if(arg.length&lt;2) {\n      System.err.println(\"Syntax: infiles... outfile\");\n      System.exit(1);\n    }\n    Path outFile=Paths.get(arg[arg.length-1]);\n    System.out.println(\"TO \"+outFile);\n    try(FileChannel out=FileChannel.open(outFile, CREATE, WRITE)) {\n      for(int ix=0, n=arg.length-1; ix&lt;n; ix++) {\n        Path inFile=Paths.get(arg[ix]);\n        System.out.println(inFile+\"...\");\n        try(FileChannel in=FileChannel.open(inFile, READ)) {\n          for(long p=0, l=in.size(); p&lt;l; )\n            p+=in.transferTo(p, l-p, out);\n        }\n      }\n    }\n    System.out.println(\"DONE.\");\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9090809,"reputation":21,"user_id":6766780,"display_name":"spearkkk"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700048134,"creation_date":1700048134,"answer_id":77487381,"question_id":25546750,"body_markdown":"I try to merge files to a file with 3 ways.\r\nI test these ways but I do not know which one is best...still.\r\nI thought that FileChannel is faster than others but it was not for me.\r\nPlease let me know if you guys have any concern.\r\n\r\n1. BufferedReader &amp; BufferedWrtier\r\n```java\r\n    private static void mergeFiles(List&lt;Path&gt; sources, Path destination) {\r\n        try (BufferedWriter writer = new BufferedWriter(new FileWriter(destination.toFile(), true))) {\r\n            for (Path path : sources) {\r\n                try (BufferedReader reader = new BufferedReader(new InputStreamReader(new FileInputStream(path.toFile())))) {\r\n                    String line;\r\n                    while ((line = reader.readLine()) != null) {\r\n                        writer.write(line);\r\n                        writer.newLine();\r\n                    }\r\n                } catch (IOException e) {\r\n                    throw new RuntimeException(e);\r\n                }\r\n            }\r\n        } catch (IOException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n```\r\n\r\n2. InputStream &amp; Files.copy\r\n```java\r\n    private static void mergeFiles2(List&lt;Path&gt; sources, Path destination) {\r\n        try {\r\n            BinaryOperator&lt;InputStream&gt; sequenceInputStream = SequenceInputStream::new;\r\n            List&lt;InputStream&gt; inputStreams = new ArrayList&lt;&gt;();\r\n\r\n            for (Path path : sources) {\r\n                InputStream is = Files.newInputStream(path, StandardOpenOption.READ);\r\n                inputStreams.add(is);\r\n            }\r\n\r\n            InputStream streams = inputStreams.parallelStream().reduce(sequenceInputStream).orElseThrow(() -&gt; new IllegalStateException(&quot;inputStreams reduce exception&quot;));\r\n            Files.copy(streams, destination, StandardCopyOption.REPLACE_EXISTING);\r\n        } catch (IOException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n```\r\n\r\n3. File Channel\r\n```java\r\n    private static void mergeFiles3(List&lt;Path&gt; sources, Path destination) {\r\n        try (FileChannel desChannel = FileChannel.open(destination, StandardOpenOption.WRITE, StandardOpenOption.CREATE)) {\r\n            for (Path path : sources) {\r\n                try (FileChannel srcChannel = FileChannel.open(path, StandardOpenOption.READ)) {\r\n                    for (long position = 0, size = srcChannel.size(); position &lt; size; ) {\r\n                        position += srcChannel.transferTo(position, size - position, desChannel);\r\n                    }\r\n                }\r\n            }\r\n        } catch (IOException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n```","title":"Merge huge files without loading whole file into memory?","body":"<p>I try to merge files to a file with 3 ways.\nI test these ways but I do not know which one is best...still.\nI thought that FileChannel is faster than others but it was not for me.\nPlease let me know if you guys have any concern.</p>\n<ol>\n<li>BufferedReader &amp; BufferedWrtier</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>    private static void mergeFiles(List&lt;Path&gt; sources, Path destination) {\n        try (BufferedWriter writer = new BufferedWriter(new FileWriter(destination.toFile(), true))) {\n            for (Path path : sources) {\n                try (BufferedReader reader = new BufferedReader(new InputStreamReader(new FileInputStream(path.toFile())))) {\n                    String line;\n                    while ((line = reader.readLine()) != null) {\n                        writer.write(line);\n                        writer.newLine();\n                    }\n                } catch (IOException e) {\n                    throw new RuntimeException(e);\n                }\n            }\n        } catch (IOException e) {\n            throw new RuntimeException(e);\n        }\n    }\n</code></pre>\n<ol start=\"2\">\n<li>InputStream &amp; Files.copy</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>    private static void mergeFiles2(List&lt;Path&gt; sources, Path destination) {\n        try {\n            BinaryOperator&lt;InputStream&gt; sequenceInputStream = SequenceInputStream::new;\n            List&lt;InputStream&gt; inputStreams = new ArrayList&lt;&gt;();\n\n            for (Path path : sources) {\n                InputStream is = Files.newInputStream(path, StandardOpenOption.READ);\n                inputStreams.add(is);\n            }\n\n            InputStream streams = inputStreams.parallelStream().reduce(sequenceInputStream).orElseThrow(() -&gt; new IllegalStateException(&quot;inputStreams reduce exception&quot;));\n            Files.copy(streams, destination, StandardCopyOption.REPLACE_EXISTING);\n        } catch (IOException e) {\n            throw new RuntimeException(e);\n        }\n    }\n</code></pre>\n<ol start=\"3\">\n<li>File Channel</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>    private static void mergeFiles3(List&lt;Path&gt; sources, Path destination) {\n        try (FileChannel desChannel = FileChannel.open(destination, StandardOpenOption.WRITE, StandardOpenOption.CREATE)) {\n            for (Path path : sources) {\n                try (FileChannel srcChannel = FileChannel.open(path, StandardOpenOption.READ)) {\n                    for (long position = 0, size = srcChannel.size(); position &lt; size; ) {\n                        position += srcChannel.transferTo(position, size - position, desChannel);\n                    }\n                }\n            }\n        } catch (IOException e) {\n            throw new RuntimeException(e);\n        }\n    }\n</code></pre>\n"}],"owner":{"account_id":1336579,"reputation":5252,"user_id":1279180,"accept_rate":74,"display_name":"nimo23"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12706,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":25548570,"answer_count":4,"score":7,"last_activity_date":1700048134,"creation_date":1409222318,"question_id":25546750,"body_markdown":"I want to merge huge files containing strings into one file and tried to use nio2. I do not want to load the whole file into memory, so I tried it with BufferedReader:\r\n\r\n    public void mergeFiles(filesToBeMerged) throws IOException{\r\n\r\n    Path mergedFile = Paths.get(&quot;mergedFile&quot;);\r\n    Files.createFile(mergedFile);\r\n\r\n    List&lt;Path&gt; _filesToBeMerged = filesToBeMerged;\r\n\r\n    try (BufferedWriter writer = Files.newBufferedWriter(mergedFile,StandardOpenOption.APPEND)) {\r\n\t\t\tfor (Path file : _filesToBeMerged) {\r\n    // this does not work as write()-method does not accept a BufferedReader\r\n\t\t\t\twriter.append(Files.newBufferedReader(file));\r\n\t\t\t}\r\n\t\t} catch (IOException e) {\r\n\t\t\tSystem.err.println(e);\r\n\t\t}\r\n\r\n    }\r\n\r\nI tried it with this, this works, hower, the format of the strings (e.g. new lines, etc is not copied to the merged file):\r\n\r\n\r\n    ...\r\n    try (BufferedWriter writer = Files.newBufferedWriter(mergedFile,StandardOpenOption.APPEND)) {\r\n\t\t\tfor (Path file : _filesToBeMerged) {\r\n    //\t\t\t\twriter.write(Files.newBufferedReader(file));\r\n\t\t\t\tString line = null;\r\n\r\n\r\n    BufferedReader reader = Files.newBufferedReader(file);\r\n\t\t\t    while ((line = reader.readLine()) != null) {\r\n\t\t\t            writer.append(line);\r\n                        writer.append(System.lineSeparator());\r\n\t\t\t     }\r\n    reader.close();\r\n\t\t\t}\r\n\t\t} catch (IOException e) {\r\n\t\t\tSystem.err.println(e);\r\n\t\t}\r\n    ...\r\n\r\nHow can I merge huge Files with NIO2 without loading the whole file into memory? ","title":"Merge huge files without loading whole file into memory?","body":"<p>I want to merge huge files containing strings into one file and tried to use nio2. I do not want to load the whole file into memory, so I tried it with BufferedReader:</p>\n\n<pre><code>public void mergeFiles(filesToBeMerged) throws IOException{\n\nPath mergedFile = Paths.get(\"mergedFile\");\nFiles.createFile(mergedFile);\n\nList&lt;Path&gt; _filesToBeMerged = filesToBeMerged;\n\ntry (BufferedWriter writer = Files.newBufferedWriter(mergedFile,StandardOpenOption.APPEND)) {\n        for (Path file : _filesToBeMerged) {\n// this does not work as write()-method does not accept a BufferedReader\n            writer.append(Files.newBufferedReader(file));\n        }\n    } catch (IOException e) {\n        System.err.println(e);\n    }\n\n}\n</code></pre>\n\n<p>I tried it with this, this works, hower, the format of the strings (e.g. new lines, etc is not copied to the merged file):</p>\n\n<pre><code>...\ntry (BufferedWriter writer = Files.newBufferedWriter(mergedFile,StandardOpenOption.APPEND)) {\n        for (Path file : _filesToBeMerged) {\n//              writer.write(Files.newBufferedReader(file));\n            String line = null;\n\n\nBufferedReader reader = Files.newBufferedReader(file);\n            while ((line = reader.readLine()) != null) {\n                    writer.append(line);\n                    writer.append(System.lineSeparator());\n             }\nreader.close();\n        }\n    } catch (IOException e) {\n        System.err.println(e);\n    }\n...\n</code></pre>\n\n<p>How can I merge huge Files with NIO2 without loading the whole file into memory? </p>\n"},{"tags":["java","docker","docker-java"],"answers":[{"tags":[],"owner":{"account_id":508927,"reputation":2023,"user_id":1251613,"accept_rate":100,"display_name":"Markus"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1530798670,"creation_date":1530798176,"answer_id":51192901,"question_id":51192713,"body_markdown":"Your example dockerfile contains multiple `FROM` statements. This is valid but as the documentation says each `FROM` clears the state from previous [instructions][1]. And so the fresh installed curl is wiped after the second `FROM`.\r\n\r\n\r\n  [1]: https://docs.docker.com/develop/develop-images/multistage-build/#use-multi-stage-builds","title":"How to make curl available in Docker image based java:8-jdk-alpine and keep the image clean?","body":"<p>Your example dockerfile contains multiple <code>FROM</code> statements. This is valid but as the documentation says each <code>FROM</code> clears the state from previous <a href=\"https://docs.docker.com/develop/develop-images/multistage-build/#use-multi-stage-builds\" rel=\"noreferrer\">instructions</a>. And so the fresh installed curl is wiped after the second <code>FROM</code>.</p>\n"},{"tags":[],"owner":{"account_id":13863020,"reputation":136993,"user_id":10008173,"display_name":"David Maze"},"down_vote_count":11,"up_vote_count":3,"is_accepted":false,"score":-8,"last_activity_date":1530830392,"creation_date":1530830392,"answer_id":51200785,"question_id":51192713,"body_markdown":"Most languages have readily available HTTP clients these days; you should almost never be calling out to `curl` from a program in a language more sophisticated than a shell script.  [java.net.URLConnection](https://docs.oracle.com/javase/8/docs/api/java/net/URLConnection.html) has been a part of Java since Java 1.0 and (without knowing why you&#39;re trying to shell out for this) it&#39;s almost definitely the right tool here.\r\n\r\nAssuming you control the `executeCoreAPI` method from your backtrace, you should change it to use the built-in Java HTTP client, and just delete all of the Dockerfile parts that try to install `curl`.","title":"How to make curl available in Docker image based java:8-jdk-alpine and keep the image clean?","body":"<p>Most languages have readily available HTTP clients these days; you should almost never be calling out to <code>curl</code> from a program in a language more sophisticated than a shell script.  <a href=\"https://docs.oracle.com/javase/8/docs/api/java/net/URLConnection.html\" rel=\"nofollow noreferrer\">java.net.URLConnection</a> has been a part of Java since Java 1.0 and (without knowing why you're trying to shell out for this) it's almost definitely the right tool here.</p>\n\n<p>Assuming you control the <code>executeCoreAPI</code> method from your backtrace, you should change it to use the built-in Java HTTP client, and just delete all of the Dockerfile parts that try to install <code>curl</code>.</p>\n"},{"tags":[],"owner":{"account_id":6499292,"reputation":5620,"user_id":5030709,"accept_rate":40,"display_name":"Imran"},"down_vote_count":0,"up_vote_count":166,"is_accepted":false,"score":166,"last_activity_date":1558013183,"creation_date":1530875465,"answer_id":51209115,"question_id":51192713,"body_markdown":"The Java base image you are using is Alpine Linux one and curl package also needs to be downloaded from there. Here is Dockerfile I have used for Production deployments.\n\n    FROM openjdk:8-jre-alpine\n    \n    RUN apk add --update \\\n        curl \\\n        &amp;&amp; rm -rf /var/cache/apk/*\n\n\n----------\n# **Update 05/2019** #\n\nAs of Alpine Linux 3.3 there exists a new `--no-cache` option for `apk`. It allows users to install packages with an index that is updated and used on-the-fly and not cached locally:\n\n    FROM openjdk:8-jre-alpine\n        \n    RUN apk --no-cache add curl\n\nThis avoids the need to use `--update` and remove `/var/cache/apk/*` when done installing packages.\n\nReference - \nhttps://github.com/gliderlabs/docker-alpine/blob/master/docs/usage.md and Thank you @Daniel for the comment.","title":"How to make curl available in Docker image based java:8-jdk-alpine and keep the image clean?","body":"<p>The Java base image you are using is Alpine Linux one and curl package also needs to be downloaded from there. Here is Dockerfile I have used for Production deployments.</p>\n<pre><code>FROM openjdk:8-jre-alpine\n\nRUN apk add --update \\\n    curl \\\n    &amp;&amp; rm -rf /var/cache/apk/*\n</code></pre>\n<hr />\n<h1><strong>Update 05/2019</strong></h1>\n<p>As of Alpine Linux 3.3 there exists a new <code>--no-cache</code> option for <code>apk</code>. It allows users to install packages with an index that is updated and used on-the-fly and not cached locally:</p>\n<pre><code>FROM openjdk:8-jre-alpine\n    \nRUN apk --no-cache add curl\n</code></pre>\n<p>This avoids the need to use <code>--update</code> and remove <code>/var/cache/apk/*</code> when done installing packages.</p>\n<p>Reference -\n<a href=\"https://github.com/gliderlabs/docker-alpine/blob/master/docs/usage.md\" rel=\"noreferrer\">https://github.com/gliderlabs/docker-alpine/blob/master/docs/usage.md</a> and Thank you @Daniel for the comment.</p>\n"},{"tags":[],"owner":{"account_id":19099786,"reputation":59,"user_id":13948316,"display_name":"deep bajaj"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700047822,"creation_date":1700047822,"answer_id":77487350,"question_id":51192713,"body_markdown":"Use this Command -- &gt; `apk add curl`","title":"How to make curl available in Docker image based java:8-jdk-alpine and keep the image clean?","body":"<p>Use this Command -- &gt; <code>apk add curl</code></p>\n"}],"owner":{"account_id":4087139,"reputation":793,"user_id":3356164,"display_name":"user3356164"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":151716,"favorite_count":0,"down_vote_count":0,"up_vote_count":79,"answer_count":4,"score":79,"last_activity_date":1700047822,"creation_date":1530797628,"question_id":51192713,"body_markdown":"We are having java code that runs curl command to fetch the some result.\r\n\r\nWe have built a jar file and the jar file executes fine\r\n\r\nNow, when we try to dokerize the java program (using jar) and run the application in docker we get this error:\r\n\r\n    errorjava.io.IOException: Cannot run program &quot;curl&quot;: error=2, No such file or directory\r\n    \tat java.lang.ProcessBuilder.start(ProcessBuilder.java:1048)\r\n    \tat com.ps.api.common.CoreAPI_Spec.executeCoreAPI(CoreAPI_Spec.java:295)\r\n    \tat com.ps.api.common.CoreAPI_Spec.getAccessTokens(CoreAPI_Spec.java:319)\r\n\r\n\r\n\r\nDockerfile used :\r\n\r\n    FROM ubuntu:16.04\r\n    MAINTAINER niro;\r\n    \r\n    # Install prerequisites\r\n    RUN apt-get update &amp;&amp; apt-get install -y \\\r\n    curl\r\n    \r\n    FROM java:8-jdk-alpine\r\n    # Set the working directory to /app\r\n    WORKDIR /Users/******/Desktop/CoreAPI_Jar\r\n    \r\n    # Copy the current directory contents into the container at /app\r\n    ADD *******_Automation-0.0.1-SNAPSHOT-jar-with-dependencies.jar ******_Automation-0.0.1-SNAPSHOT-jar-with-dependencies.jar\r\n    \r\n    # Run app.py when the container launches\r\n    CMD [&quot;java&quot;, &quot;-jar&quot;, &quot;******-0.0.1-SNAPSHOT-jar-with-dependencies.jar&quot;]\r\n\r\n","title":"How to make curl available in Docker image based java:8-jdk-alpine and keep the image clean?","body":"<p>We are having java code that runs curl command to fetch the some result.</p>\n\n<p>We have built a jar file and the jar file executes fine</p>\n\n<p>Now, when we try to dokerize the java program (using jar) and run the application in docker we get this error:</p>\n\n<pre><code>errorjava.io.IOException: Cannot run program \"curl\": error=2, No such file or directory\n    at java.lang.ProcessBuilder.start(ProcessBuilder.java:1048)\n    at com.ps.api.common.CoreAPI_Spec.executeCoreAPI(CoreAPI_Spec.java:295)\n    at com.ps.api.common.CoreAPI_Spec.getAccessTokens(CoreAPI_Spec.java:319)\n</code></pre>\n\n<p>Dockerfile used :</p>\n\n<pre><code>FROM ubuntu:16.04\nMAINTAINER niro;\n\n# Install prerequisites\nRUN apt-get update &amp;&amp; apt-get install -y \\\ncurl\n\nFROM java:8-jdk-alpine\n# Set the working directory to /app\nWORKDIR /Users/******/Desktop/CoreAPI_Jar\n\n# Copy the current directory contents into the container at /app\nADD *******_Automation-0.0.1-SNAPSHOT-jar-with-dependencies.jar ******_Automation-0.0.1-SNAPSHOT-jar-with-dependencies.jar\n\n# Run app.py when the container launches\nCMD [\"java\", \"-jar\", \"******-0.0.1-SNAPSHOT-jar-with-dependencies.jar\"]\n</code></pre>\n"},{"tags":["java","unit-testing","groovy","migration","java-17"],"owner":{"account_id":15828600,"reputation":1,"user_id":11420682,"display_name":"Ridhi Bhat"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1700047564,"creation_date":1700047564,"question_id":77487321,"body_markdown":"I am getting this error when I am updating java version from 11 to 17.\r\n\r\n    SpecInternals.SpyImpl:168-&gt;SpecInternals.createMockImpl:295-&gt;SpecInternals.createMockImpl:305-   \r\n    &gt;SpecInternals.createMock:50 &#187; NoClassDefFound Could not initialize class \r\n    org.spockframework.mock.runtime.CglibMockFactory$ConstructorFriendlyEnhancer\r\n\r\nI updated to following versions:\r\n- spock - 2.3-groovy-3.0\r\n- groovy-all - 3.0.19\r\n- gmavenplus-plugin - 3.0.2\r\n- maven-surefire-plugin - 3.2.2\r\n- cglib-nodep.version - 3.2.9\r\n- maven-compiler-plugin - 3.9.0\r\n- jacoco-maven-plugin - 0.8.10\r\n\r\nBut I am still facing the issue. Please let me know if anyone has come across this error while migrating from java 11 to 17.\r\n","title":"Test case in groovy failing while migrating from java 11 to 17","body":"<p>I am getting this error when I am updating java version from 11 to 17.</p>\n<pre><code>SpecInternals.SpyImpl:168-&gt;SpecInternals.createMockImpl:295-&gt;SpecInternals.createMockImpl:305-   \n&gt;SpecInternals.createMock:50 » NoClassDefFound Could not initialize class \norg.spockframework.mock.runtime.CglibMockFactory$ConstructorFriendlyEnhancer\n</code></pre>\n<p>I updated to following versions:</p>\n<ul>\n<li>spock - 2.3-groovy-3.0</li>\n<li>groovy-all - 3.0.19</li>\n<li>gmavenplus-plugin - 3.0.2</li>\n<li>maven-surefire-plugin - 3.2.2</li>\n<li>cglib-nodep.version - 3.2.9</li>\n<li>maven-compiler-plugin - 3.9.0</li>\n<li>jacoco-maven-plugin - 0.8.10</li>\n</ul>\n<p>But I am still facing the issue. Please let me know if anyone has come across this error while migrating from java 11 to 17.</p>\n"},{"tags":["java","algorithm","random","sampling"],"comments":[{"owner":{"account_id":125128,"reputation":51999,"user_id":320700,"accept_rate":74,"display_name":"Yanick Rochon"},"score":0,"creation_date":1295124990,"post_id":4702036,"comment_id":5189279,"body_markdown":"what have you got so far? If you get another x elements, can you pick elements from the previous set again, or must be all different all the time until ALL elements are picked? (Then, what next?)","body":"what have you got so far? If you get another x elements, can you pick elements from the previous set again, or must be all different all the time until ALL elements are picked? (Then, what next?)"},{"owner":{"display_name":"user568866"},"score":0,"creation_date":1295186574,"post_id":4702036,"comment_id":5194221,"body_markdown":"Without replacement.  When you have no more left, you should get nothing back.","body":"Without replacement.  When you have no more left, you should get nothing back."}],"answers":[{"tags":[],"owner":{"account_id":235018,"reputation":364824,"user_id":501557,"accept_rate":90,"display_name":"templatetypedef"},"down_vote_count":1,"up_vote_count":12,"is_accepted":false,"score":11,"last_activity_date":1314751403,"creation_date":1295124399,"answer_id":4702049,"question_id":4702036,"body_markdown":"If you want to successively pick n elements from the list and be able to do so without replacement over and over and over again, you are probably best of randomly permuting the elements, then taking chunks off in blocks of n.  If you randomly permute the list you guarantee statistical randomness for each block you pick out.  Perhaps the easiest way to do this would be to use [`Collections.shuffle`][1].\r\n\r\n\r\n  [1]: http://download.oracle.com/javase/6/docs/api/java/util/Collections.html#shuffle%28java.util.List%29","title":"Take n random elements from a List&lt;E&gt;?","body":"<p>If you want to successively pick n elements from the list and be able to do so without replacement over and over and over again, you are probably best of randomly permuting the elements, then taking chunks off in blocks of n.  If you randomly permute the list you guarantee statistical randomness for each block you pick out.  Perhaps the easiest way to do this would be to use <a href=\"http://download.oracle.com/javase/6/docs/api/java/util/Collections.html#shuffle%28java.util.List%29\" rel=\"noreferrer\"><code>Collections.shuffle</code></a>.</p>\n"},{"tags":[],"owner":{"account_id":52822,"reputation":1088960,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"down_vote_count":2,"up_vote_count":123,"is_accepted":true,"score":121,"last_activity_date":1474899734,"creation_date":1295124547,"answer_id":4702061,"question_id":4702036,"body_markdown":"Two main ways.\r\n\r\n1. Use [`Random#nextInt(int)`][1]:\r\n\r\n        List&lt;Foo&gt; list = createItSomehow();\r\n        Random random = new Random();\r\n        Foo foo = list.get(random.nextInt(list.size()));\r\n\r\n   It&#39;s however not guaranteed that successive `n` calls returns unique elements.\r\n\r\n2. Use [`Collections#shuffle()`][2]:\r\n\r\n        List&lt;Foo&gt; list = createItSomehow();\r\n        Collections.shuffle(list);\r\n        Foo foo = list.get(0);\r\n\r\n   It enables you to get `n` unique elements by an incremented index (assuming that the list itself contains unique elements).\r\n\r\n---\r\n\r\nIn case you&#39;re wondering if there&#39;s a Java 8 Stream approach; no, there isn&#39;t a built-in one. There&#39;s no such thing as `Comparator#randomOrder()` in standard API (yet?). You could try something like below while still satisfying the strict `Comparator` contract (although the distribution is pretty terrible):\r\n\r\n    List&lt;Foo&gt; list = createItSomehow();\r\n    int random = new Random().nextInt();\r\n    Foo foo = list.stream().sorted(Comparator.comparingInt(o -&gt; System.identityHashCode(o) ^ random)).findFirst().get();\r\n\r\nBetter use `Collections#shuffle()` instead.\r\n\r\n\r\n  [1]: http://download.oracle.com/javase/6/docs/api/java/util/Random.html#nextInt%28int%29\r\n  [2]: http://download.oracle.com/javase/6/docs/api/java/util/Collections.html#shuffle%28java.util.List%29","title":"Take n random elements from a List&lt;E&gt;?","body":"<p>Two main ways.</p>\n\n<ol>\n<li><p>Use <a href=\"http://download.oracle.com/javase/6/docs/api/java/util/Random.html#nextInt%28int%29\" rel=\"noreferrer\"><code>Random#nextInt(int)</code></a>:</p>\n\n<pre><code>List&lt;Foo&gt; list = createItSomehow();\nRandom random = new Random();\nFoo foo = list.get(random.nextInt(list.size()));\n</code></pre>\n\n<p>It's however not guaranteed that successive <code>n</code> calls returns unique elements.</p></li>\n<li><p>Use <a href=\"http://download.oracle.com/javase/6/docs/api/java/util/Collections.html#shuffle%28java.util.List%29\" rel=\"noreferrer\"><code>Collections#shuffle()</code></a>:</p>\n\n<pre><code>List&lt;Foo&gt; list = createItSomehow();\nCollections.shuffle(list);\nFoo foo = list.get(0);\n</code></pre>\n\n<p>It enables you to get <code>n</code> unique elements by an incremented index (assuming that the list itself contains unique elements).</p></li>\n</ol>\n\n<hr>\n\n<p>In case you're wondering if there's a Java 8 Stream approach; no, there isn't a built-in one. There's no such thing as <code>Comparator#randomOrder()</code> in standard API (yet?). You could try something like below while still satisfying the strict <code>Comparator</code> contract (although the distribution is pretty terrible):</p>\n\n<pre><code>List&lt;Foo&gt; list = createItSomehow();\nint random = new Random().nextInt();\nFoo foo = list.stream().sorted(Comparator.comparingInt(o -&gt; System.identityHashCode(o) ^ random)).findFirst().get();\n</code></pre>\n\n<p>Better use <code>Collections#shuffle()</code> instead.</p>\n"},{"tags":[],"owner":{"account_id":20470,"reputation":21695,"user_id":48933,"accept_rate":90,"display_name":"Neil Coffey"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1295131194,"creation_date":1295131194,"answer_id":4702547,"question_id":4702036,"body_markdown":"A fair way to do this is to go through the list, on the nth iteration calculating the probability of whether or not to pick the nth element, which is essentially the fraction of the number of items you still need to pick over the number of elements available in the rest of the list. For example:\r\n\r\n    public static &lt;T&gt; T[] pickSample(T[] population, int nSamplesNeeded, Random r) {\r\n      T[] ret = (T[]) Array.newInstance(population.getClass().getComponentType(),\r\n                                        nSamplesNeeded);\r\n      int nPicked = 0, i = 0, nLeft = population.length;\r\n      while (nSamplesNeeded &gt; 0) {\r\n        int rand = r.nextInt(nLeft);\r\n        if (rand &lt; nSamplesNeeded) {\r\n          ret[nPicked++] = population[i];\r\n          nSamplesNeeded--;\r\n        }\r\n        nLeft--;\r\n        i++;\r\n      }\r\n      return ret;\r\n    }\r\n\r\n(This code copied from a page I wrote a while ago on [picking a random sample from a list][1].)\r\n\r\n\r\n  [1]: http://www.javamex.com/tutorials/random_numbers/random_sample.shtml","title":"Take n random elements from a List&lt;E&gt;?","body":"<p>A fair way to do this is to go through the list, on the nth iteration calculating the probability of whether or not to pick the nth element, which is essentially the fraction of the number of items you still need to pick over the number of elements available in the rest of the list. For example:</p>\n\n<pre><code>public static &lt;T&gt; T[] pickSample(T[] population, int nSamplesNeeded, Random r) {\n  T[] ret = (T[]) Array.newInstance(population.getClass().getComponentType(),\n                                    nSamplesNeeded);\n  int nPicked = 0, i = 0, nLeft = population.length;\n  while (nSamplesNeeded &gt; 0) {\n    int rand = r.nextInt(nLeft);\n    if (rand &lt; nSamplesNeeded) {\n      ret[nPicked++] = population[i];\n      nSamplesNeeded--;\n    }\n    nLeft--;\n    i++;\n  }\n  return ret;\n}\n</code></pre>\n\n<p>(This code copied from a page I wrote a while ago on <a href=\"http://www.javamex.com/tutorials/random_numbers/random_sample.shtml\" rel=\"noreferrer\">picking a random sample from a list</a>.)</p>\n"},{"tags":[],"owner":{"account_id":2273733,"reputation":1040,"user_id":2000539,"accept_rate":90,"display_name":"Valknut"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1444920242,"creation_date":1380396624,"answer_id":19070874,"question_id":4702036,"body_markdown":"Simple and clear\r\n \r\n       // define ArrayList to hold Integer objects\r\n        ArrayList&lt;Integer&gt; arrayList = new ArrayList&lt;&gt;();\r\n\r\n        for (int i = 0; i &lt; maxRange; i++) {\r\n            arrayList.add(i + 1);\r\n        }\r\n\r\n        // shuffle list\r\n        Collections.shuffle(arrayList);\r\n\r\n        // adding defined amount of numbers to target list\r\n        ArrayList&lt;Integer&gt; targetList = new ArrayList&lt;&gt;();\r\n        for (int j = 0; j &lt; amount; j++) {\r\n            targetList.add(arrayList.get(j)); \r\n        }\r\n        \r\n        return targetList;","title":"Take n random elements from a List&lt;E&gt;?","body":"<p>Simple and clear</p>\n\n<pre><code>   // define ArrayList to hold Integer objects\n    ArrayList&lt;Integer&gt; arrayList = new ArrayList&lt;&gt;();\n\n    for (int i = 0; i &lt; maxRange; i++) {\n        arrayList.add(i + 1);\n    }\n\n    // shuffle list\n    Collections.shuffle(arrayList);\n\n    // adding defined amount of numbers to target list\n    ArrayList&lt;Integer&gt; targetList = new ArrayList&lt;&gt;();\n    for (int j = 0; j &lt; amount; j++) {\n        targetList.add(arrayList.get(j)); \n    }\n\n    return targetList;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2792590,"reputation":469,"user_id":2402537,"display_name":"aykutfirat"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1426818739,"creation_date":1426818739,"answer_id":29158423,"question_id":4702036,"body_markdown":"Use the following class:\r\n\r\n    import java.util.Enumeration;\r\n    import java.util.Random;\r\n    \r\n    public class RandomPermuteIterator implements Enumeration&lt;Long&gt; {\r\n        int c = 1013904223, a = 1664525;\r\n        long seed, N, m, next;\r\n        boolean hasNext = true;\r\n    \r\n        public RandomPermuteIterator(long N) throws Exception {\r\n            if (N &lt;= 0 || N &gt; Math.pow(2, 62)) throw new Exception(&quot;Unsupported size: &quot; + N);\r\n            this.N = N;\r\n            m = (long) Math.pow(2, Math.ceil(Math.log(N) / Math.log(2)));\r\n            next = seed = new Random().nextInt((int) Math.min(N, Integer.MAX_VALUE));\r\n        }\r\n    \r\n        public static void main(String[] args) throws Exception {\r\n            RandomPermuteIterator r = new RandomPermuteIterator(100);\r\n            while (r.hasMoreElements()) System.out.print(r.nextElement() + &quot; &quot;);\r\n        }\r\n    \r\n        @Override\r\n        public boolean hasMoreElements() {\r\n            return hasNext;\r\n        }\r\n    \r\n        @Override\r\n        public Long nextElement() {\r\n            next = (a * next + c) % m;\r\n            while (next &gt;= N) next = (a * next + c) % m;\r\n            if (next == seed) hasNext = false;\r\n            return  next;\r\n        }\r\n    }\r\n\r\n","title":"Take n random elements from a List&lt;E&gt;?","body":"<p>Use the following class:</p>\n\n<pre><code>import java.util.Enumeration;\nimport java.util.Random;\n\npublic class RandomPermuteIterator implements Enumeration&lt;Long&gt; {\n    int c = 1013904223, a = 1664525;\n    long seed, N, m, next;\n    boolean hasNext = true;\n\n    public RandomPermuteIterator(long N) throws Exception {\n        if (N &lt;= 0 || N &gt; Math.pow(2, 62)) throw new Exception(\"Unsupported size: \" + N);\n        this.N = N;\n        m = (long) Math.pow(2, Math.ceil(Math.log(N) / Math.log(2)));\n        next = seed = new Random().nextInt((int) Math.min(N, Integer.MAX_VALUE));\n    }\n\n    public static void main(String[] args) throws Exception {\n        RandomPermuteIterator r = new RandomPermuteIterator(100);\n        while (r.hasMoreElements()) System.out.print(r.nextElement() + \" \");\n    }\n\n    @Override\n    public boolean hasMoreElements() {\n        return hasNext;\n    }\n\n    @Override\n    public Long nextElement() {\n        next = (a * next + c) % m;\n        while (next &gt;= N) next = (a * next + c) % m;\n        if (next == seed) hasNext = false;\n        return  next;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3997984,"reputation":4081,"user_id":3294902,"display_name":"Kostas Kryptos"},"down_vote_count":0,"up_vote_count":40,"is_accepted":false,"score":40,"last_activity_date":1494972403,"creation_date":1454961951,"answer_id":35278327,"question_id":4702036,"body_markdown":"Most of the proposed solutions till now suggest either a full list shuffle or successive random picking by checking uniqueness and retry if required.\r\n\r\nBut, we can take advantage of the Durstenfeld&#39;s algorithm (the most popular Fisher-Yates variant in our days).\r\n\r\n&gt; Durstenfeld&#39;s solution is to move the &quot;struck&quot; numbers to the end of\r\n&gt; the list by swapping them with the last unstruck number at each\r\n&gt; iteration.\r\n\r\nDue to the above, **we don&#39;t need to shuffle the whole list**, but run the loop for as many steps as the number of elements required to return. The algorithm ensures that the last N elements at the end of the list are 100% random if we used a perfect random function.\r\n\r\nAmong the many real-world scenarios where we need to pick a predetermined (max) amount of random elements from arrays/lists, this optimized method is very useful for various card games, such as Texas Poker, where you a-priori know the number of cards to be used per game; only a limited number of cards is usually required from the deck.\r\n\r\n\tpublic static &lt;E&gt; List&lt;E&gt; pickNRandomElements(List&lt;E&gt; list, int n, Random r) {\r\n\t\tint length = list.size();\r\n\t\t\r\n\t\tif (length &lt; n) return null;\r\n\t\t\r\n\t\t//We don&#39;t need to shuffle the whole list\r\n\t\tfor (int i = length - 1; i &gt;= length - n; --i)\r\n\t\t{\r\n\t\t\tCollections.swap(list, i , r.nextInt(i + 1));\r\n\t\t}\r\n\t\treturn list.subList(length - n, length);\r\n\t}\r\n\t\r\n\tpublic static &lt;E&gt; List&lt;E&gt; pickNRandomElements(List&lt;E&gt; list, int n) {\r\n\t\treturn pickNRandomElements(list, n, ThreadLocalRandom.current());\r\n\t}","title":"Take n random elements from a List&lt;E&gt;?","body":"<p>Most of the proposed solutions till now suggest either a full list shuffle or successive random picking by checking uniqueness and retry if required.</p>\n\n<p>But, we can take advantage of the Durstenfeld's algorithm (the most popular Fisher-Yates variant in our days).</p>\n\n<blockquote>\n  <p>Durstenfeld's solution is to move the \"struck\" numbers to the end of\n  the list by swapping them with the last unstruck number at each\n  iteration.</p>\n</blockquote>\n\n<p>Due to the above, <strong>we don't need to shuffle the whole list</strong>, but run the loop for as many steps as the number of elements required to return. The algorithm ensures that the last N elements at the end of the list are 100% random if we used a perfect random function.</p>\n\n<p>Among the many real-world scenarios where we need to pick a predetermined (max) amount of random elements from arrays/lists, this optimized method is very useful for various card games, such as Texas Poker, where you a-priori know the number of cards to be used per game; only a limited number of cards is usually required from the deck.</p>\n\n<pre><code>public static &lt;E&gt; List&lt;E&gt; pickNRandomElements(List&lt;E&gt; list, int n, Random r) {\n    int length = list.size();\n\n    if (length &lt; n) return null;\n\n    //We don't need to shuffle the whole list\n    for (int i = length - 1; i &gt;= length - n; --i)\n    {\n        Collections.swap(list, i , r.nextInt(i + 1));\n    }\n    return list.subList(length - n, length);\n}\n\npublic static &lt;E&gt; List&lt;E&gt; pickNRandomElements(List&lt;E&gt; list, int n) {\n    return pickNRandomElements(list, n, ThreadLocalRandom.current());\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4646767,"reputation":17781,"user_id":3764804,"accept_rate":59,"display_name":"BullyWiiPlaza"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1482681542,"creation_date":1482681542,"answer_id":41322569,"question_id":4702036,"body_markdown":"Keep selecting a random element and make sure you do not choose the same element again:\r\n\r\n    public static &lt;E&gt; List&lt;E&gt; selectRandomElements(List&lt;E&gt; list, int amount)\r\n    {\r\n    \t// Avoid a deadlock\r\n    \tif (amount &gt;= list.size())\r\n    \t{\r\n    \t\treturn list;\r\n    \t}\r\n    \r\n    \tList&lt;E&gt; selected = new ArrayList&lt;&gt;();\r\n    \tRandom random = new Random();\r\n    \tint listSize = list.size();\r\n    \r\n    \t// Get a random item until we got the requested amount\r\n    \twhile (selected.size() &lt; amount)\r\n    \t{\r\n    \t\tint randomIndex = random.nextInt(listSize);\r\n    \t\tE element = list.get(randomIndex);\r\n    \r\n    \t\tif (!selected.contains(element))\r\n    \t\t{\r\n    \t\t\tselected.add(element);\r\n    \t\t}\r\n    \t}\r\n    \r\n    \treturn selected;\r\n    }\r\n\r\nIn theory this could run endlessly but in practise it is fine. The closer you get the whole original list the slower the runtime of this gets obviously but that is not the point of selecting a random sublist, is it?","title":"Take n random elements from a List&lt;E&gt;?","body":"<p>Keep selecting a random element and make sure you do not choose the same element again:</p>\n\n<pre><code>public static &lt;E&gt; List&lt;E&gt; selectRandomElements(List&lt;E&gt; list, int amount)\n{\n    // Avoid a deadlock\n    if (amount &gt;= list.size())\n    {\n        return list;\n    }\n\n    List&lt;E&gt; selected = new ArrayList&lt;&gt;();\n    Random random = new Random();\n    int listSize = list.size();\n\n    // Get a random item until we got the requested amount\n    while (selected.size() &lt; amount)\n    {\n        int randomIndex = random.nextInt(listSize);\n        E element = list.get(randomIndex);\n\n        if (!selected.contains(element))\n        {\n            selected.add(element);\n        }\n    }\n\n    return selected;\n}\n</code></pre>\n\n<p>In theory this could run endlessly but in practise it is fine. The closer you get the whole original list the slower the runtime of this gets obviously but that is not the point of selecting a random sublist, is it?</p>\n"},{"tags":[],"owner":{"account_id":2576623,"reputation":3906,"user_id":2234161,"accept_rate":0,"display_name":"Memin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1530555066,"creation_date":1530555066,"answer_id":51141641,"question_id":4702036,"body_markdown":"The following class retrieve N items from a list of any type. If you provide a seed then on each run it will return the same list, otherwise, the items of the new list will change on each run. You can check its behaviour my running the main methods. \r\n\r\n\r\n\timport java.util.ArrayList;\r\n\timport java.util.Arrays;\r\n\timport java.util.Collections;\r\n\timport java.util.List;\r\n\timport java.util.Random;\r\n\t\r\n\tpublic class NRandomItem&lt;T&gt; {\r\n\t\tprivate final List&lt;T&gt; initialList;\r\n\t\r\n\t\tpublic NRandomItem(List&lt;T&gt; list) {\r\n\t\t\tthis.initialList = list;\r\n\t\t}\r\n\t\r\n\t\t/**\r\n\t\t * Do not provide seed, if you want different items on each run.\r\n\t\t * \r\n\t\t * @param numberOfItem\r\n\t\t * @return\r\n\t\t */\r\n\t\tpublic List&lt;T&gt; retrieve(int numberOfItem) {\r\n\t\t\tint seed = new Random().nextInt();\r\n\t\t\treturn retrieve(seed, numberOfItem);\r\n\t\t}\r\n\t\r\n\t\t/**\r\n\t\t * The same seed will always return the same random list.\r\n\t\t * \r\n\t\t * @param seed,\r\n\t\t *            the seed of random item generator.\r\n\t\t * @param numberOfItem,\r\n\t\t *            the number of items to be retrieved from the list\r\n\t\t * @return the list of random items\r\n\t\t */\r\n\t\tpublic List&lt;T&gt; retrieve(int seed, int numberOfItem) {\r\n\t\t\tRandom rand = new Random(seed);\r\n\t\r\n\t\t\tCollections.shuffle(initialList, rand);\r\n\t\t\t// Create new list with the number of item size\r\n\t\t\tList&lt;T&gt; newList = new ArrayList&lt;&gt;();\r\n\t\t\tfor (int i = 0; i &lt; numberOfItem; i++) {\r\n\t\t\t\tnewList.add(initialList.get(i));\r\n\t\t\t}\r\n\t\t\treturn newList;\r\n\t\t}\r\n\t\r\n\t\tpublic static void main(String[] args) {\r\n\t\t\tList&lt;String&gt; l1 = Arrays.asList(&quot;Foo&quot;, &quot;Bar&quot;, &quot;Baz&quot;, &quot;Qux&quot;);\r\n\t\t\tint seedValue = 10;\r\n\t\t\tNRandomItem&lt;String&gt; r1 = new NRandomItem&lt;&gt;(l1);\r\n\t\r\n\t\t\tSystem.out.println(String.format(&quot;%s&quot;, r1.retrieve(seedValue, 2)));\r\n\t\t}\r\n\t}\r\n","title":"Take n random elements from a List&lt;E&gt;?","body":"<p>The following class retrieve N items from a list of any type. If you provide a seed then on each run it will return the same list, otherwise, the items of the new list will change on each run. You can check its behaviour my running the main methods. </p>\n\n<pre><code>import java.util.ArrayList;\nimport java.util.Arrays;\nimport java.util.Collections;\nimport java.util.List;\nimport java.util.Random;\n\npublic class NRandomItem&lt;T&gt; {\n    private final List&lt;T&gt; initialList;\n\n    public NRandomItem(List&lt;T&gt; list) {\n        this.initialList = list;\n    }\n\n    /**\n     * Do not provide seed, if you want different items on each run.\n     * \n     * @param numberOfItem\n     * @return\n     */\n    public List&lt;T&gt; retrieve(int numberOfItem) {\n        int seed = new Random().nextInt();\n        return retrieve(seed, numberOfItem);\n    }\n\n    /**\n     * The same seed will always return the same random list.\n     * \n     * @param seed,\n     *            the seed of random item generator.\n     * @param numberOfItem,\n     *            the number of items to be retrieved from the list\n     * @return the list of random items\n     */\n    public List&lt;T&gt; retrieve(int seed, int numberOfItem) {\n        Random rand = new Random(seed);\n\n        Collections.shuffle(initialList, rand);\n        // Create new list with the number of item size\n        List&lt;T&gt; newList = new ArrayList&lt;&gt;();\n        for (int i = 0; i &lt; numberOfItem; i++) {\n            newList.add(initialList.get(i));\n        }\n        return newList;\n    }\n\n    public static void main(String[] args) {\n        List&lt;String&gt; l1 = Arrays.asList(\"Foo\", \"Bar\", \"Baz\", \"Qux\");\n        int seedValue = 10;\n        NRandomItem&lt;String&gt; r1 = new NRandomItem&lt;&gt;(l1);\n\n        System.out.println(String.format(\"%s\", r1.retrieve(seedValue, 2)));\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":52549,"reputation":1687,"user_id":157053,"display_name":"smok"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1545859476,"creation_date":1545849651,"answer_id":53935842,"question_id":4702036,"body_markdown":"As noted in other answers, `Collections.shuffle` is not very efficient when the source list is big, because of the copying. Here is a Java 8 one-liner that:\r\n\r\n - efficient enough on random access lists like ArrayList if you don&#39;t need many elements from the source\r\n - doesn&#39;t modify the source\r\n - DOES NOT guarantee uniqueness, if it&#39;s not super important for you. If you pick 5 from a hundred, there&#39;s a very good chance the elements will be unique.\r\n\r\nCode:\r\n\r\n    private static &lt;E&gt; List&lt;E&gt; pickRandom(List&lt;E&gt; list, int n) {\r\n      return new Random().ints(n, 0, list.size()).mapToObj(list::get).collect(Collectors.toList());\r\n    }\r\n\r\nHowever, for a list with no quick random access (like LinkedList) the complexity would be `n*O(list_size)`.\r\n","title":"Take n random elements from a List&lt;E&gt;?","body":"<p>As noted in other answers, <code>Collections.shuffle</code> is not very efficient when the source list is big, because of the copying. Here is a Java 8 one-liner that:</p>\n\n<ul>\n<li>efficient enough on random access lists like ArrayList if you don't need many elements from the source</li>\n<li>doesn't modify the source</li>\n<li>DOES NOT guarantee uniqueness, if it's not super important for you. If you pick 5 from a hundred, there's a very good chance the elements will be unique.</li>\n</ul>\n\n<p>Code:</p>\n\n<pre><code>private static &lt;E&gt; List&lt;E&gt; pickRandom(List&lt;E&gt; list, int n) {\n  return new Random().ints(n, 0, list.size()).mapToObj(list::get).collect(Collectors.toList());\n}\n</code></pre>\n\n<p>However, for a list with no quick random access (like LinkedList) the complexity would be <code>n*O(list_size)</code>.</p>\n"},{"tags":[],"owner":{"account_id":1899638,"reputation":1454,"user_id":1715765,"accept_rate":87,"display_name":"H.v.M."},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1587047334,"creation_date":1587047334,"answer_id":61252750,"question_id":4702036,"body_markdown":"This solution doesn&#39;t modify the original list or otherwise scale in complexity with the list size. \r\n\r\nTo get a sample of 4 from a list of 7, we just select a random element out of all 7, then select a random element out of the remaining 6, and so on. If we&#39;ve already selected indices 4, 0, 3, next we generate a random number out of 0, 1, 2, 3, respectively representing index 1, 2, 5, 6.\r\n\r\n\tstatic Random rand = new Random();\r\n\r\n\tstatic &lt;T&gt; List&lt;T&gt; randomSample(List&lt;T&gt; list, int size) {\r\n\t\tList&lt;T&gt; sample = new ArrayList&lt;&gt;();\r\n\t\t\r\n\t\tfor (int sortedSampleIndices[] = new int[size], i = 0; i &lt; size; i++) {\r\n\t\t\tint index = rand.nextInt(list.size() - i);\r\n\t\t\t\r\n\t\t\tint j = 0;\r\n\t\t\tfor (; j &lt; i &amp;&amp; index &gt;= sortedSampleIndices[j]; j++)\r\n\t\t\t\tindex++;\r\n\t\t\tsample.add(list.get(index));\r\n\t\t\t\r\n\t\t\tfor (; j &lt;= i; j++) {\r\n\t\t\t\tint temp = sortedSampleIndices[j];\r\n\t\t\t\tsortedSampleIndices[j] = index;\r\n\t\t\t\tindex = temp;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn sample;\r\n\t}","title":"Take n random elements from a List&lt;E&gt;?","body":"<p>This solution doesn't modify the original list or otherwise scale in complexity with the list size. </p>\n\n<p>To get a sample of 4 from a list of 7, we just select a random element out of all 7, then select a random element out of the remaining 6, and so on. If we've already selected indices 4, 0, 3, next we generate a random number out of 0, 1, 2, 3, respectively representing index 1, 2, 5, 6.</p>\n\n<pre><code>static Random rand = new Random();\n\nstatic &lt;T&gt; List&lt;T&gt; randomSample(List&lt;T&gt; list, int size) {\n    List&lt;T&gt; sample = new ArrayList&lt;&gt;();\n\n    for (int sortedSampleIndices[] = new int[size], i = 0; i &lt; size; i++) {\n        int index = rand.nextInt(list.size() - i);\n\n        int j = 0;\n        for (; j &lt; i &amp;&amp; index &gt;= sortedSampleIndices[j]; j++)\n            index++;\n        sample.add(list.get(index));\n\n        for (; j &lt;= i; j++) {\n            int temp = sortedSampleIndices[j];\n            sortedSampleIndices[j] = index;\n            index = temp;\n        }\n    }\n\n    return sample;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15414363,"reputation":414,"user_id":11120290,"display_name":"Vitalii Shvetsov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1595673304,"creation_date":1595673304,"answer_id":63087292,"question_id":4702036,"body_markdown":"All of these answers require a modifiable list or run into performance issued\r\n\r\n  \r\nHere&#39;s a swift snippet that required O(k) additional space and is guaranteed to run in O(k) time and doesn&#39;t need a modifiable array. (Performs shuffles in a map)\r\n\r\n      func getRandomElementsFrom(array: [Int], count: Int = 8) -&gt; [Int] {\r\n        if array.count &lt;= count {\r\n            return array\r\n        }\r\n    \r\n        var mapper = [Int: Int]()\r\n        var results = [Int]()\r\n    \r\n        for i in 0..&lt;count {\r\n            let randomIndex = Int.random(in: 0..&lt;array.count - i)\r\n    \r\n            if let existing = mapper[randomIndex] {\r\n                results.append(array[existing])\r\n            } else {\r\n                let element = array[randomIndex]\r\n                results.append(element)\r\n            }\r\n    \r\n            let targetIndex = array.count - 1 - i\r\n            mapper[randomIndex] = mapper[targetIndex] ?? targetIndex \r\n        }\r\n    \r\n        return results\r\n    }","title":"Take n random elements from a List&lt;E&gt;?","body":"<p>All of these answers require a modifiable list or run into performance issued</p>\n<p>Here's a swift snippet that required O(k) additional space and is guaranteed to run in O(k) time and doesn't need a modifiable array. (Performs shuffles in a map)</p>\n<pre><code>  func getRandomElementsFrom(array: [Int], count: Int = 8) -&gt; [Int] {\n    if array.count &lt;= count {\n        return array\n    }\n\n    var mapper = [Int: Int]()\n    var results = [Int]()\n\n    for i in 0..&lt;count {\n        let randomIndex = Int.random(in: 0..&lt;array.count - i)\n\n        if let existing = mapper[randomIndex] {\n            results.append(array[existing])\n        } else {\n            let element = array[randomIndex]\n            results.append(element)\n        }\n\n        let targetIndex = array.count - 1 - i\n        mapper[randomIndex] = mapper[targetIndex] ?? targetIndex \n    }\n\n    return results\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6522954,"reputation":1831,"user_id":5046586,"display_name":"Aldo Canepa"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1606445759,"creation_date":1600933093,"answer_id":64041624,"question_id":4702036,"body_markdown":"The following method returns a new **List&lt;T&gt; of Min(n, list.size()) random elements** taken from the paramenter List&lt;T&gt; list. Have in mind that the List&lt;T&gt; list is being modified after each call. Therefore, each call will be &quot;consuming&quot; the original list returning **n** random elements from it:\r\n  \r\n\r\n    public static &lt;T&gt; List&lt;T&gt; nextRandomN(List&lt;T&gt; list, int n) {\r\n      return Stream\r\n        .generate(() -&gt; list.remove((int) (list.size() * Math.random())))\r\n        .limit(Math.min(list.size(), n))\r\n        .collect(Collectors.toList());\r\n    }\r\n\r\nSample usage:\r\n\r\n\r\n    List&lt;Integer&gt; list = new ArrayList&lt;&gt;(Arrays.asList(1, 2, 3, 4, 5, 6, 7, 8, 9, 10));\r\n\r\n    System.out.println(nextRandomN(list, 3).toString());\r\n    System.out.println(nextRandomN(list, 3).toString());\r\n    System.out.println(nextRandomN(list, 3).toString());\r\n    System.out.println(nextRandomN(list, 3).toString());\r\n\r\nSample output:\r\n\r\n    [8, 2, 3]\r\n    [4, 10, 7]\r\n    [1, 5, 9]\r\n    [6]\r\n","title":"Take n random elements from a List&lt;E&gt;?","body":"<p>The following method returns a new <strong>List of Min(n, list.size()) random elements</strong> taken from the paramenter List list. Have in mind that the List list is being modified after each call. Therefore, each call will be &quot;consuming&quot; the original list returning <strong>n</strong> random elements from it:</p>\n<pre><code>public static &lt;T&gt; List&lt;T&gt; nextRandomN(List&lt;T&gt; list, int n) {\n  return Stream\n    .generate(() -&gt; list.remove((int) (list.size() * Math.random())))\n    .limit(Math.min(list.size(), n))\n    .collect(Collectors.toList());\n}\n</code></pre>\n<p>Sample usage:</p>\n<pre><code>List&lt;Integer&gt; list = new ArrayList&lt;&gt;(Arrays.asList(1, 2, 3, 4, 5, 6, 7, 8, 9, 10));\n\nSystem.out.println(nextRandomN(list, 3).toString());\nSystem.out.println(nextRandomN(list, 3).toString());\nSystem.out.println(nextRandomN(list, 3).toString());\nSystem.out.println(nextRandomN(list, 3).toString());\n</code></pre>\n<p>Sample output:</p>\n<pre><code>[8, 2, 3]\n[4, 10, 7]\n[1, 5, 9]\n[6]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17380199,"reputation":21,"user_id":12592592,"display_name":"Rinke"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700047473,"creation_date":1700047473,"answer_id":77487315,"question_id":4702036,"body_markdown":"I&#39;ve benchmarked this, focusing on the methods which give k unique results. I compared 3 methods from this page: \r\n\r\n1) the swapping method by Kostas Kryptos\r\n2) just plain iterating, and drawing again if the item has already been chosen, as shown by BullyWiiPlaza\r\n3) use aykutfirat&#39;s Enumerator to create the indexes to retrieve from the list.\r\n\r\nI didn&#39;t add the shuffle approach, because I guessed it would clearly be slower than method 1 or 2. \r\n\r\nResults with getting 3 items out of a list of 10: \r\n\r\n1: 150 ns\r\n2: 145 ns\r\n3: 260 ns\r\n\r\nResults with getting 5 items out of a list of 1000:\r\n\r\n1: 1362 ns\r\n2: 209 ns\r\n3: 312 ns\r\n\r\n\r\n\r\nIt appears that the plain method doesn&#39;t really show significantly slower performances with bigger original lists, whereas the swap method does. Apparently the swapping gets expensive with bigger lists.\r\n\r\nSo best performance is just plain selecting each random item, and doing the draw again if the item was already selected. ","title":"Take n random elements from a List&lt;E&gt;?","body":"<p>I've benchmarked this, focusing on the methods which give k unique results. I compared 3 methods from this page:</p>\n<ol>\n<li>the swapping method by Kostas Kryptos</li>\n<li>just plain iterating, and drawing again if the item has already been chosen, as shown by BullyWiiPlaza</li>\n<li>use aykutfirat's Enumerator to create the indexes to retrieve from the list.</li>\n</ol>\n<p>I didn't add the shuffle approach, because I guessed it would clearly be slower than method 1 or 2.</p>\n<p>Results with getting 3 items out of a list of 10:</p>\n<p>1: 150 ns\n2: 145 ns\n3: 260 ns</p>\n<p>Results with getting 5 items out of a list of 1000:</p>\n<p>1: 1362 ns\n2: 209 ns\n3: 312 ns</p>\n<p>It appears that the plain method doesn't really show significantly slower performances with bigger original lists, whereas the swap method does. Apparently the swapping gets expensive with bigger lists.</p>\n<p>So best performance is just plain selecting each random item, and doing the draw again if the item was already selected.</p>\n"}],"owner":{"display_name":"user568866"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":73202,"favorite_count":0,"down_vote_count":0,"up_vote_count":92,"accepted_answer_id":4702061,"answer_count":13,"score":92,"last_activity_date":1700047473,"creation_date":1295124247,"question_id":4702036,"body_markdown":"How can I take n random elements from an `ArrayList&lt;E&gt;`?  Ideally, I&#39;d like to be able to make successive calls to the `take()` method to get another x elements, without replacement.","title":"Take n random elements from a List&lt;E&gt;?","body":"<p>How can I take n random elements from an <code>ArrayList&lt;E&gt;</code>?  Ideally, I'd like to be able to make successive calls to the <code>take()</code> method to get another x elements, without replacement.</p>\n"},{"tags":["java","spring-boot","intellij-idea","redis","runtimeexception"],"comments":[{"owner":{"account_id":4111447,"reputation":377,"user_id":3374126,"display_name":"Adrian Madaras"},"score":0,"creation_date":1699964220,"post_id":77304264,"comment_id":136594154,"body_markdown":"I have the same issue on the same MacOS.","body":"I have the same issue on the same MacOS."}],"answers":[{"tags":[],"owner":{"account_id":22986933,"reputation":13,"user_id":17113008,"display_name":"dean7"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1697527418,"creation_date":1697527418,"answer_id":77306917,"question_id":77304264,"body_markdown":"Did you configure the application.yml file to load your redis server&#39;s host, port and password?\r\nFor example: \r\n\r\n    Spring:\r\n      redis:\r\n        host: 192.168.150.123\r\n        port: 6379\r\n        password: abcdef\r\n        database: 2\r\n        timeout: 30000ms\r\n        lettuce:\r\n          pool:\r\n            max-active: -1\r\n            max-idle: 500\r\n\r\n","title":"&quot;Can&#39;t start redis server&quot; exception occurs when trying to run Spring Boot on my MacBook M1 (Sonoma 14.0)","body":"<p>Did you configure the application.yml file to load your redis server's host, port and password?\nFor example:</p>\n<pre><code>Spring:\n  redis:\n    host: 192.168.150.123\n    port: 6379\n    password: abcdef\n    database: 2\n    timeout: 30000ms\n    lettuce:\n      pool:\n        max-active: -1\n        max-idle: 500\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2676787,"reputation":1076,"user_id":2352196,"accept_rate":67,"display_name":"Bojan Trajkovski"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700047340,"creation_date":1700047340,"answer_id":77487299,"question_id":77304264,"body_markdown":"After upgrading to MacOS Sonoma (v14.x) I&#39;ve had the same issue. Its a common problem which is reported [here][1]\r\n\r\nFix that worked for me is to use different and upgraded repo for Redis embedded server: `com.github.codemonstur:embedded-redis:1.0.0`\r\n\r\n[Link to mvnrepostiory][2]\r\n\r\n\r\n  [1]: https://github.com/kstyrc/embedded-redis/issues/135#issuecomment-1773899523\r\n  [2]: https://mvnrepository.com/artifact/com.github.codemonstur/embedded-redis/1.0.0","title":"&quot;Can&#39;t start redis server&quot; exception occurs when trying to run Spring Boot on my MacBook M1 (Sonoma 14.0)","body":"<p>After upgrading to MacOS Sonoma (v14.x) I've had the same issue. Its a common problem which is reported <a href=\"https://github.com/kstyrc/embedded-redis/issues/135#issuecomment-1773899523\" rel=\"nofollow noreferrer\">here</a></p>\n<p>Fix that worked for me is to use different and upgraded repo for Redis embedded server: <code>com.github.codemonstur:embedded-redis:1.0.0</code></p>\n<p><a href=\"https://mvnrepository.com/artifact/com.github.codemonstur/embedded-redis/1.0.0\" rel=\"nofollow noreferrer\">Link to mvnrepostiory</a></p>\n"}],"owner":{"account_id":14152906,"reputation":59,"user_id":10224427,"display_name":"Tajib Smajlović"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":692,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":2,"score":1,"last_activity_date":1700047340,"creation_date":1697481597,"question_id":77304264,"body_markdown":"When I try to run my Spring Boot app using IntelliJ IDE, everything builds properly and no warning and errors are show. Once the app starts running the following runtime exception occurs:\r\n\r\n`Can&#39;t start redis server. Check logs for details. Redis process log:`\r\n\r\nThis is the line where the exception is thrown:\r\n\r\n[![enter image description here](https://i.stack.imgur.com/3AqhW.png)](https://i.stack.imgur.com/3AqhW.png)\r\n\r\nThe funny thing is that `outputStringBuffer.toString()` returns empty string.\r\n\r\nNow, I am running Redis via the Docker. Now to be sure that the Redis is indeed up and running and that there is no issue with the Docker, I added Redis as a database in IntelliJ IDE and when I execute the following command: `SET &#39;foo&#39; &#39;bar&#39;` the appropriate key/value data was added successfully.\r\n\r\n[![enter image description here](https://i.stack.imgur.com/D2vQ4.png)](https://i.stack.imgur.com/D2vQ4.png)\r\n\r\nI even tried to install and run Redis locally but nothing changed, I still received the same error as above.\r\n\r\nI double checked that every possible configuration is OK and indeed it is. I can connect to Redis via IntelliJ and DBeaver but I cannot connect it from my Spring Boot appplication.","title":"&quot;Can&#39;t start redis server&quot; exception occurs when trying to run Spring Boot on my MacBook M1 (Sonoma 14.0)","body":"<p>When I try to run my Spring Boot app using IntelliJ IDE, everything builds properly and no warning and errors are show. Once the app starts running the following runtime exception occurs:</p>\n<p><code>Can't start redis server. Check logs for details. Redis process log:</code></p>\n<p>This is the line where the exception is thrown:</p>\n<p><a href=\"https://i.stack.imgur.com/3AqhW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3AqhW.png\" alt=\"enter image description here\" /></a></p>\n<p>The funny thing is that <code>outputStringBuffer.toString()</code> returns empty string.</p>\n<p>Now, I am running Redis via the Docker. Now to be sure that the Redis is indeed up and running and that there is no issue with the Docker, I added Redis as a database in IntelliJ IDE and when I execute the following command: <code>SET 'foo' 'bar'</code> the appropriate key/value data was added successfully.</p>\n<p><a href=\"https://i.stack.imgur.com/D2vQ4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/D2vQ4.png\" alt=\"enter image description here\" /></a></p>\n<p>I even tried to install and run Redis locally but nothing changed, I still received the same error as above.</p>\n<p>I double checked that every possible configuration is OK and indeed it is. I can connect to Redis via IntelliJ and DBeaver but I cannot connect it from my Spring Boot appplication.</p>\n"},{"tags":["java","maven","devops","semantic-versioning","commitizen"],"comments":[{"owner":{"account_id":1466941,"reputation":1440,"user_id":1379528,"display_name":"Norbert"},"score":0,"creation_date":1677712705,"post_id":74936097,"comment_id":133394681,"body_markdown":"I have no working solution so far, but at least a idea how this could work. There is a `pre_bump_hook` and in that script you can use different environment variables that provide the new version. And with `mvn versions:set` it should be possible to change the version in the pom.xml. I have the same problem, but not enough time so far to solve it :D","body":"I have no working solution so far, but at least a idea how this could work. There is a <code>pre_bump_hook</code> and in that script you can use different environment variables that provide the new version. And with <code>mvn versions:set</code> it should be possible to change the version in the pom.xml. I have the same problem, but not enough time so far to solve it :D"}],"answers":[{"tags":[],"owner":{"account_id":1466941,"reputation":1440,"user_id":1379528,"display_name":"Norbert"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678145061,"creation_date":1678145061,"answer_id":75656723,"question_id":74936097,"body_markdown":"As I mentioned in my comment above, there is a way to solve this problem and after some testing I&#39;d like to provide you a simple solution now.\r\n\r\nI assume you have `.cz.toml` file in place and already configured and use maven as build system for your Java project.\r\n\r\nFirst you should add a `scripts` folder to the maven root. And put 2 shell scripts in there. The first is `prepare_java_version.sh` and the content is:\r\n\r\n    #!/bin/bash\r\n    mvn versions:set -DnewVersion=$CZ_PRE_NEW_VERSION\r\n\r\nThe second file is `commit_java_version.sh` and in that file you put the content:\r\n\r\n    #!/bin/bash\r\n    mvn versions:commit\r\n\r\nNow you have to edit the `.cz.toml` file and append these two sections:\r\n\r\n    pre_bump_hooks = [\r\n       &quot;scripts/prepare_java_version.sh&quot;\r\n    ]\r\n    post_bump_hooks = [\r\n       &quot;scripts/commit_java_version.sh&quot;\r\n    ]\r\n\r\nAnd now, you are ready to go.\r\n\r\n*Explanation*:\r\nCommitizen calls the `pre_bump_hooks` just before the tag is created, and the shell script modifies the `pom.xml` to the given version. The Version used in the shell script is an environment variable provided by commitizen.\r\n\r\nAfter the commit and the tag are created the `post_bump_hooks` are called and this shell script clean up the maven repo again. The version backup file is removed for example.\r\n\r\n*Hint*: \r\nIf there is a problem, and you need to revert the version change in the pom.xml just call `mvn versions:revert` and you have the old version. But this only works before the commit is called. ","title":"Can Commitizen update pom.xml file?","body":"<p>As I mentioned in my comment above, there is a way to solve this problem and after some testing I'd like to provide you a simple solution now.</p>\n<p>I assume you have <code>.cz.toml</code> file in place and already configured and use maven as build system for your Java project.</p>\n<p>First you should add a <code>scripts</code> folder to the maven root. And put 2 shell scripts in there. The first is <code>prepare_java_version.sh</code> and the content is:</p>\n<pre><code>#!/bin/bash\nmvn versions:set -DnewVersion=$CZ_PRE_NEW_VERSION\n</code></pre>\n<p>The second file is <code>commit_java_version.sh</code> and in that file you put the content:</p>\n<pre><code>#!/bin/bash\nmvn versions:commit\n</code></pre>\n<p>Now you have to edit the <code>.cz.toml</code> file and append these two sections:</p>\n<pre><code>pre_bump_hooks = [\n   &quot;scripts/prepare_java_version.sh&quot;\n]\npost_bump_hooks = [\n   &quot;scripts/commit_java_version.sh&quot;\n]\n</code></pre>\n<p>And now, you are ready to go.</p>\n<p><em>Explanation</em>:\nCommitizen calls the <code>pre_bump_hooks</code> just before the tag is created, and the shell script modifies the <code>pom.xml</code> to the given version. The Version used in the shell script is an environment variable provided by commitizen.</p>\n<p>After the commit and the tag are created the <code>post_bump_hooks</code> are called and this shell script clean up the maven repo again. The version backup file is removed for example.</p>\n<p><em>Hint</em>:\nIf there is a problem, and you need to revert the version change in the pom.xml just call <code>mvn versions:revert</code> and you have the old version. But this only works before the commit is called.</p>\n"},{"tags":[],"owner":{"account_id":29908326,"reputation":1,"user_id":22920357,"display_name":"MrAlucardDante"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700046986,"creation_date":1700046986,"answer_id":77487261,"question_id":74936097,"body_markdown":"There is an even simpler solution, that works for any language.\r\n\r\nIn your pom.xml, add a properties that stores the version number (for instance app.version)\r\n\r\n    &lt;app.version&gt;1.0.0&lt;/app.version&gt;\r\n\r\nThen in your commitizen configuration, add the version_files element and point to the newly added property in your pom:\r\n\r\n    version_files = [\r\n        &quot;pom.xml:app.version&quot;\r\n    ]\r\n[Commitizen documentation][1]\r\n\r\n\r\n  [1]: https://commitizen-tools.github.io/commitizen/bump/#version_files","title":"Can Commitizen update pom.xml file?","body":"<p>There is an even simpler solution, that works for any language.</p>\n<p>In your pom.xml, add a properties that stores the version number (for instance app.version)</p>\n<pre><code>&lt;app.version&gt;1.0.0&lt;/app.version&gt;\n</code></pre>\n<p>Then in your commitizen configuration, add the version_files element and point to the newly added property in your pom:</p>\n<pre><code>version_files = [\n    &quot;pom.xml:app.version&quot;\n]\n</code></pre>\n<p><a href=\"https://commitizen-tools.github.io/commitizen/bump/#version_files\" rel=\"nofollow noreferrer\">Commitizen documentation</a></p>\n"}],"owner":{"account_id":19831416,"reputation":21,"user_id":15837776,"display_name":"Bianca Torres"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":254,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1700046986,"creation_date":1672199691,"question_id":74936097,"body_markdown":"I am working on a Java project and I&#39;m using commitizen to enforce semantic version in CI, when I run the command `cz bump` and `cz changelog` update the .cz.yaml and changelog files with the new version but is not updating the version in pom.xml. Is there a functionality in Commitizen to update this file too?\r\n\r\nAdditionally: the application is currently being built by Maven ","title":"Can Commitizen update pom.xml file?","body":"<p>I am working on a Java project and I'm using commitizen to enforce semantic version in CI, when I run the command <code>cz bump</code> and <code>cz changelog</code> update the .cz.yaml and changelog files with the new version but is not updating the version in pom.xml. Is there a functionality in Commitizen to update this file too?</p>\n<p>Additionally: the application is currently being built by Maven</p>\n"},{"tags":["java","spring"],"answers":[{"tags":[],"owner":{"account_id":7548042,"reputation":1526,"user_id":5730424,"display_name":"Deepak"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699882497,"creation_date":1699882497,"answer_id":77474279,"question_id":77473901,"body_markdown":"    UserAccountDetails userAccountDetails = (UserAccountDetails) auth.getPrincipal();\r\n    UUID id = userAccountDetails.getId()","title":"Accessing field in springSecurity.userAccountDetails","body":"<pre><code>UserAccountDetails userAccountDetails = (UserAccountDetails) auth.getPrincipal();\nUUID id = userAccountDetails.getId()\n</code></pre>\n"},{"tags":[],"owner":{"account_id":26729789,"reputation":73,"user_id":20332351,"display_name":"Xuan Chen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1700046481,"creation_date":1699893156,"answer_id":77475400,"question_id":77473901,"body_markdown":"Thanks for the question. There are several ways to display the currently logged-in user&#39;s information. \r\n 1. From SecurityContextHolder\r\n\r\nThe SecurityContextHolder is where Spring Security stores the details of who is authenticated. Spring Security does not care how the SecurityContextHolder is populated. If it contains a value, it is used as the currently authenticated user.\r\n```java\r\n@GetMapping(&quot;/account/your-custom-path-0&quot;)\r\npublic String getAccountIdFromSecurityContextHolder() {\r\n    Authentication authentication = SecurityContextHolder.getContext().getAuthentication();\r\n    UserAccountDetails userAccountDetails = (UserAccountDetails) authentication.getPrincipal();\r\n    UUID uuid = userAccountDetails.getId();\r\n    return uuid.toString();\r\n}\r\n```\r\nPlease refer to [Spring Document][1].\r\n \r\n2. From HttpServletRequest\r\n\r\nHttpServletRequest.getUserPrincipal() returns the result of SecurityContextHolder.getContext().getAuthentication(). This means that it is an Authentication, which is typically an instance of UsernamePasswordAuthenticationToken when using username- and password-based authentication. This can be useful if you need additional information about your user.\r\n```java\r\n@GetMapping(&quot;/account/your-custom-path-1&quot;)\r\npublic String getAccountIdFromHttpServletRequest(HttpServletRequest httpServletRequest) {\r\n    UserAccountDetails userAccountDetails = (UserAccountDetails) httpServletRequest.getUserPrincipal();\r\n    UUID uuid = userAccountDetails.getId();\r\n    return uuid.toString();\r\n}\r\n```\r\nPlease refer to [Spring Document][2].\r\n\r\n 3. Using AuthenticationPrincipal Annotation\r\n\r\nSpring Security provides AuthenticationPrincipalArgumentResolver, which can automatically resolve the current Authentication.getPrincipal() for Spring MVC arguments. By using @EnableWebSecurity, you automatically have this added to your Spring MVC configuration.\r\n```java\r\n@GetMapping(&quot;/account/your-custom-path-2&quot;)\r\npublic String getAccountIdUsingAuthenticationPrincipalAnnotation(@AuthenticationPrincipal UserDetails userDetails) {\r\n    UserAccountDetails userAccountDetails = (UserAccountDetails) userDetails;\r\n    UUID uuid = userAccountDetails.getId();\r\n    return uuid.toString();\r\n}\r\n```\r\nPlease refer to [Spring Document][3].\r\n\r\n 4. From Authentication\r\n\r\nThe Authentication contains ... principal: Identifies the user. When authenticating with a username/password this is often an instance of UserDetails.\r\n```java\r\n@GetMapping(&quot;/account/your-custom-path-3&quot;)\r\npublic String getAccountIdFromAuthentication(Authentication authentication) {\r\n    UserAccountDetails userAccountDetails = (UserAccountDetails) authentication.getPrincipal();\r\n    UUID uuid = userAccountDetails.getId();\r\n    return uuid.toString();\r\n}\r\n```\r\n\r\nPlease refer to [Spring Document][4].\r\n\r\nYou may also refer to [Baeldung - Retrieve User Information in Spring Security][5], which also gives you some information on this issue.\r\nPlease tell me if the links above become invalid in the future.\r\n\r\n---\r\n\r\n**Updated**\r\n\r\nThe class `UserAccountDetails` needs to implement `UserDetails` like this:\r\n```java\r\nimport org.springframework.security.core.GrantedAuthority;\r\nimport org.springframework.security.core.userdetails.UserDetails;\r\n\r\nimport java.util.Collection;\r\nimport java.util.Objects;\r\nimport java.util.UUID;\r\n\r\npublic class UserAccountDetails implements UserDetails {\r\n    private UUID id;\r\n    private String username;\r\n    private String password;\r\n\r\n    public UserAccountDetails(UUID id) {\r\n        this.id = id;\r\n    }\r\n\r\n    // getters and setters\r\n    public UUID getId() {\r\n        return id;\r\n    }\r\n\r\n    public void setId(UUID id) {\r\n        this.id = id;\r\n    }\r\n\r\n    public void setUsername(String username) {\r\n        this.username = username;\r\n    }\r\n\r\n    public void setPassword(String password) {\r\n        this.password = password;\r\n    }\r\n\r\n    @Override\r\n    public Collection&lt;? extends GrantedAuthority&gt; getAuthorities() {\r\n        return null; // please use your own settings \r\n    }\r\n\r\n    @Override\r\n    public String getPassword() {\r\n        return password;\r\n    }\r\n\r\n    @Override\r\n    public String getUsername() {\r\n        return username;\r\n    }\r\n\r\n    @Override\r\n    public boolean isAccountNonExpired() {\r\n        return true;\r\n    }\r\n\r\n    @Override\r\n    public boolean isAccountNonLocked() {\r\n        return true;\r\n    }\r\n\r\n    @Override\r\n    public boolean isCredentialsNonExpired() {\r\n        return true;\r\n    }\r\n\r\n    @Override\r\n    public boolean isEnabled() {\r\n        return true;\r\n    }\r\n\r\n    @Override\r\n    public boolean equals(Object object) {\r\n        if (this == object) {\r\n            return true;\r\n        }\r\n        if (object == null || getClass() != object.getClass()) {\r\n            return false;\r\n        }\r\n        UserAccountDetails that = (UserAccountDetails) object;\r\n        return Objects.equals(id, that.id)\r\n                &amp;&amp; Objects.equals(username, that.username)\r\n                &amp;&amp; Objects.equals(password, that.password);\r\n    }\r\n\r\n    @Override\r\n    public int hashCode() {\r\n        return Objects.hash(id, username, password);\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n        // may be useful when debugging\r\n        return &quot;UserAccountDetails {&quot; +\r\n                &quot;id=&quot; + id +\r\n                &quot;, username=&#39;&quot; + username + &#39;\\&#39;&#39; +\r\n                &quot;, password=&#39;&quot; + password + &#39;\\&#39;&#39; +\r\n                &#39;}&#39;;\r\n    }\r\n}\r\n```\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-security/reference/servlet/authentication/architecture.html#servlet-authentication-securitycontextholder\r\n  [2]: https://docs.spring.io/spring-security/reference/servlet/integrations/servlet-api.html#servletapi-user-principal\r\n  [3]: https://docs.spring.io/spring-security/reference/servlet/integrations/mvc.html#mvc-authentication-principal\r\n  [4]: https://docs.spring.io/spring-security/reference/servlet/authentication/architecture.html#servlet-authentication-authentication\r\n  [5]: https://www.baeldung.com/get-user-in-spring-security","title":"Accessing field in springSecurity.userAccountDetails","body":"<p>Thanks for the question. There are several ways to display the currently logged-in user's information.</p>\n<ol>\n<li>From SecurityContextHolder</li>\n</ol>\n<p>The SecurityContextHolder is where Spring Security stores the details of who is authenticated. Spring Security does not care how the SecurityContextHolder is populated. If it contains a value, it is used as the currently authenticated user.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@GetMapping(&quot;/account/your-custom-path-0&quot;)\npublic String getAccountIdFromSecurityContextHolder() {\n    Authentication authentication = SecurityContextHolder.getContext().getAuthentication();\n    UserAccountDetails userAccountDetails = (UserAccountDetails) authentication.getPrincipal();\n    UUID uuid = userAccountDetails.getId();\n    return uuid.toString();\n}\n</code></pre>\n<p>Please refer to <a href=\"https://docs.spring.io/spring-security/reference/servlet/authentication/architecture.html#servlet-authentication-securitycontextholder\" rel=\"nofollow noreferrer\">Spring Document</a>.</p>\n<ol start=\"2\">\n<li>From HttpServletRequest</li>\n</ol>\n<p>HttpServletRequest.getUserPrincipal() returns the result of SecurityContextHolder.getContext().getAuthentication(). This means that it is an Authentication, which is typically an instance of UsernamePasswordAuthenticationToken when using username- and password-based authentication. This can be useful if you need additional information about your user.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@GetMapping(&quot;/account/your-custom-path-1&quot;)\npublic String getAccountIdFromHttpServletRequest(HttpServletRequest httpServletRequest) {\n    UserAccountDetails userAccountDetails = (UserAccountDetails) httpServletRequest.getUserPrincipal();\n    UUID uuid = userAccountDetails.getId();\n    return uuid.toString();\n}\n</code></pre>\n<p>Please refer to <a href=\"https://docs.spring.io/spring-security/reference/servlet/integrations/servlet-api.html#servletapi-user-principal\" rel=\"nofollow noreferrer\">Spring Document</a>.</p>\n<ol start=\"3\">\n<li>Using AuthenticationPrincipal Annotation</li>\n</ol>\n<p>Spring Security provides AuthenticationPrincipalArgumentResolver, which can automatically resolve the current Authentication.getPrincipal() for Spring MVC arguments. By using @EnableWebSecurity, you automatically have this added to your Spring MVC configuration.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@GetMapping(&quot;/account/your-custom-path-2&quot;)\npublic String getAccountIdUsingAuthenticationPrincipalAnnotation(@AuthenticationPrincipal UserDetails userDetails) {\n    UserAccountDetails userAccountDetails = (UserAccountDetails) userDetails;\n    UUID uuid = userAccountDetails.getId();\n    return uuid.toString();\n}\n</code></pre>\n<p>Please refer to <a href=\"https://docs.spring.io/spring-security/reference/servlet/integrations/mvc.html#mvc-authentication-principal\" rel=\"nofollow noreferrer\">Spring Document</a>.</p>\n<ol start=\"4\">\n<li>From Authentication</li>\n</ol>\n<p>The Authentication contains ... principal: Identifies the user. When authenticating with a username/password this is often an instance of UserDetails.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@GetMapping(&quot;/account/your-custom-path-3&quot;)\npublic String getAccountIdFromAuthentication(Authentication authentication) {\n    UserAccountDetails userAccountDetails = (UserAccountDetails) authentication.getPrincipal();\n    UUID uuid = userAccountDetails.getId();\n    return uuid.toString();\n}\n</code></pre>\n<p>Please refer to <a href=\"https://docs.spring.io/spring-security/reference/servlet/authentication/architecture.html#servlet-authentication-authentication\" rel=\"nofollow noreferrer\">Spring Document</a>.</p>\n<p>You may also refer to <a href=\"https://www.baeldung.com/get-user-in-spring-security\" rel=\"nofollow noreferrer\">Baeldung - Retrieve User Information in Spring Security</a>, which also gives you some information on this issue.\nPlease tell me if the links above become invalid in the future.</p>\n<hr />\n<p><strong>Updated</strong></p>\n<p>The class <code>UserAccountDetails</code> needs to implement <code>UserDetails</code> like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import org.springframework.security.core.GrantedAuthority;\nimport org.springframework.security.core.userdetails.UserDetails;\n\nimport java.util.Collection;\nimport java.util.Objects;\nimport java.util.UUID;\n\npublic class UserAccountDetails implements UserDetails {\n    private UUID id;\n    private String username;\n    private String password;\n\n    public UserAccountDetails(UUID id) {\n        this.id = id;\n    }\n\n    // getters and setters\n    public UUID getId() {\n        return id;\n    }\n\n    public void setId(UUID id) {\n        this.id = id;\n    }\n\n    public void setUsername(String username) {\n        this.username = username;\n    }\n\n    public void setPassword(String password) {\n        this.password = password;\n    }\n\n    @Override\n    public Collection&lt;? extends GrantedAuthority&gt; getAuthorities() {\n        return null; // please use your own settings \n    }\n\n    @Override\n    public String getPassword() {\n        return password;\n    }\n\n    @Override\n    public String getUsername() {\n        return username;\n    }\n\n    @Override\n    public boolean isAccountNonExpired() {\n        return true;\n    }\n\n    @Override\n    public boolean isAccountNonLocked() {\n        return true;\n    }\n\n    @Override\n    public boolean isCredentialsNonExpired() {\n        return true;\n    }\n\n    @Override\n    public boolean isEnabled() {\n        return true;\n    }\n\n    @Override\n    public boolean equals(Object object) {\n        if (this == object) {\n            return true;\n        }\n        if (object == null || getClass() != object.getClass()) {\n            return false;\n        }\n        UserAccountDetails that = (UserAccountDetails) object;\n        return Objects.equals(id, that.id)\n                &amp;&amp; Objects.equals(username, that.username)\n                &amp;&amp; Objects.equals(password, that.password);\n    }\n\n    @Override\n    public int hashCode() {\n        return Objects.hash(id, username, password);\n    }\n\n    @Override\n    public String toString() {\n        // may be useful when debugging\n        return &quot;UserAccountDetails {&quot; +\n                &quot;id=&quot; + id +\n                &quot;, username='&quot; + username + '\\'' +\n                &quot;, password='&quot; + password + '\\'' +\n                '}';\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":29890109,"reputation":3,"user_id":22906470,"display_name":"xenia"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77475400,"answer_count":2,"score":0,"last_activity_date":1700046481,"creation_date":1699878588,"question_id":77473901,"body_markdown":"To display the currently logged in user&#39;s information, I need access to the user&#39;s ID as the username is not unique. The User details I get from getPrincipal() already contain an &quot;id&quot; field, yet I can&#39;t access it using this method (throws NoSuchFieldException).\r\n\r\n\r\n```\r\n@GetMapping(&quot;/account&quot;)\r\n\tString account(Model model){\r\n\t\tAuthentication auth = SecurityContextHolder.getContext().getAuthentication();\r\n\t\tString userName= auth.getName();\r\n\t\tObject Principal = auth.getPrincipal();\r\n\t\tUUID id = Principal.getClass().getField(&quot;id&quot;);\r\n```\r\n\r\n The structure printed in the console looks like this: SpringSecurityAuthenticationManagement.UserAccountDetails(id=..., username=..., password=..., isEnabled=..., authorities=...). How can I access only the ID property?","title":"Accessing field in springSecurity.userAccountDetails","body":"<p>To display the currently logged in user's information, I need access to the user's ID as the username is not unique. The User details I get from getPrincipal() already contain an &quot;id&quot; field, yet I can't access it using this method (throws NoSuchFieldException).</p>\n<pre><code>@GetMapping(&quot;/account&quot;)\n    String account(Model model){\n        Authentication auth = SecurityContextHolder.getContext().getAuthentication();\n        String userName= auth.getName();\n        Object Principal = auth.getPrincipal();\n        UUID id = Principal.getClass().getField(&quot;id&quot;);\n</code></pre>\n<p>The structure printed in the console looks like this: SpringSecurityAuthenticationManagement.UserAccountDetails(id=..., username=..., password=..., isEnabled=..., authorities=...). How can I access only the ID property?</p>\n"},{"tags":["java","android-source","robolectric","android.mk"],"answers":[{"tags":[],"owner":{"account_id":8320825,"reputation":96,"user_id":6252607,"display_name":"Владимир Дивјак"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1573923057,"creation_date":1573849471,"answer_id":58884200,"question_id":57785695,"body_markdown":"    $ mma RunRoboTestExampleTest-jacoco","title":"How to get Code Coverage in AOSP Java and Robolectric with Android.mk","body":"<pre><code>$ mma RunRoboTestExampleTest-jacoco\n</code></pre>\n"}],"owner":{"account_id":16625231,"reputation":23,"user_id":12014509,"display_name":"For tez"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1574,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":58884200,"answer_count":1,"score":2,"last_activity_date":1700046438,"creation_date":1567590167,"question_id":57785695,"body_markdown":"I&#39;m writing an Application in AOSP. I need to make a unit test for this app. For this purpose I used robolectric. The app and the test is compiled with make (Android.mk).\r\nI need a code coverage report and don&#39;t know a way to get this. I only found solutions with the usage of gradle, which we don&#39;t use at the Project.\r\n\r\nDo someone know a solution how to get the Code coverage? \r\n\r\n```java\r\npublic class Example extends Service\r\n{\r\n   @Override\r\n   public void onCreate() {\r\n     Log.d(&quot;Example&quot;,&quot; onCreate&quot;);\r\n   }\r\n\t\r\n   public boolean foo(){\r\n     Log.d(&quot;Example&quot;,&quot; foo&quot;);\r\n     return true;\r\n   }\r\n\r\n   @Override\r\n   public IBinder onBind(Intent intent) {\r\n     return new ExampleBinder();\r\n   }\r\n\r\n    public class ExampleBinder extends Binder {\r\n      // Returns service object\r\n      public Example getService() {\r\n        return Example.this;\r\n      }\r\n    }\r\n}\r\n```\r\n\r\n```\r\nLOCAL_PATH := $(call my-dir)\r\ninclude $(CLEAR_VARS)\r\n\r\nLOCAL_PACKAGE_NAME := RoboTestExampleImpl\r\nLOCAL_MODULE := RoboTestExampleImpl\r\n\r\nLOCAL_MODULE_TAGS := tests\r\nLOCAL_JACK_ENABLED := disabled\r\n\r\nLOCAL_SRC_FILES := $(call all-java-files-under, java)\r\n\r\nLOCAL_COMPATIBILITY_SUITE := e-tests\r\nLOCAL_INSTRUMENTATION_FOR := RoboTestExample\r\n\r\ninclude $(BUILD_STATIC_JAVA_LIBRARY)\r\n````\r\n\r\n```java\r\n@RunWith(RobolectricTestRunner.class)\r\n@Config(shadows = {ShadowBinder.class, manifest=Config.NONE)\r\npublic class ExampleRoboTest {\r\n    private static final String TAG = &quot;ExampleRoboTest&quot;;\r\n    private ServiceController&lt;Example&gt; controller;\r\n    Example service;\r\n\r\n    @Before\r\n    public void setUp() {\r\n        controller = Robolectric.buildService(Example.class);\r\n        service = controller.create().get();\r\n    }\r\n\r\n    @After\r\n    public void tearDown() {\r\n    }\r\n\r\n    @Test\r\n    public void foo()\r\n    {\r\n      assertTrue(service.foo());\r\n    }\r\n\r\n}\r\n```\r\n\r\n```\r\n#############################################\r\n# RoboExample Robolectric test target.         #\r\n#############################################\r\nLOCAL_PATH := $(call my-dir)\r\ninclude $(CLEAR_VARS)\r\n\r\nLOCAL_PACKAGE_NAME := RoboTestExampleTest\r\nLOCAL_MODULE := RoboTestExampleTest\r\n\r\nLOCAL_MODULE_TAGS := tests\r\n\r\nLOCAL_JACK_ENABLED := disabled\r\nLOCAL_PROGUARD_ENABLED := disabled\r\n\r\nLOCAL_SRC_FILES := \\\r\n        $(call all-java-files-under, src) \\\r\nLOCAL_JAVA_LIBRARIES := \\\r\n    robolectric_android-all-stub \\\r\n    Robolectric_all-target \\\r\nLOCAL_STATIC_JAVA_LIBRARIES := \\\r\n     jacocoagent \\\r\n\r\nLOCAL_COMPATIBILITY_SUITE := e-tests\r\nLOCAL_INSTRUMENTATION_FOR := RoboTestExample\r\n\r\ninclude $(BUILD_STATIC_JAVA_LIBRARY)\r\n\r\n#############################################################\r\n# runner target to run the previous target.                 #\r\n#############################################################\r\ninclude $(CLEAR_VARS)\r\n\r\nLOCAL_MODULE := RunRoboTestExampleTest\r\nLOCAL_PROGUARD_ENABLED := disabled\r\n\r\nLOCAL_JAVA_LIBRARIES := \\\r\n    RoboTestExampleTest\\\r\n    robolectric_android-all-stub \\\r\n    Robolectric_all-target \\\r\n\r\nLOCAL_TEST_PACKAGE := RoboTestExample\r\nLOCAL_INSTRUMENT_SOURCE_DIRS := $(dir $(LOCAL_PATH))../main/java\r\nLOCAL_ROBOTEST_TIMEOUT := 36000\r\n\r\ninclude external/robolectric-shadows/run_robotests.mk\r\n```","title":"How to get Code Coverage in AOSP Java and Robolectric with Android.mk","body":"<p>I'm writing an Application in AOSP. I need to make a unit test for this app. For this purpose I used robolectric. The app and the test is compiled with make (Android.mk).\nI need a code coverage report and don't know a way to get this. I only found solutions with the usage of gradle, which we don't use at the Project.</p>\n\n<p>Do someone know a solution how to get the Code coverage? </p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public class Example extends Service\n{\n   @Override\n   public void onCreate() {\n     Log.d(\"Example\",\" onCreate\");\n   }\n\n   public boolean foo(){\n     Log.d(\"Example\",\" foo\");\n     return true;\n   }\n\n   @Override\n   public IBinder onBind(Intent intent) {\n     return new ExampleBinder();\n   }\n\n    public class ExampleBinder extends Binder {\n      // Returns service object\n      public Example getService() {\n        return Example.this;\n      }\n    }\n}\n</code></pre>\n\n<pre><code>LOCAL_PATH := $(call my-dir)\ninclude $(CLEAR_VARS)\n\nLOCAL_PACKAGE_NAME := RoboTestExampleImpl\nLOCAL_MODULE := RoboTestExampleImpl\n\nLOCAL_MODULE_TAGS := tests\nLOCAL_JACK_ENABLED := disabled\n\nLOCAL_SRC_FILES := $(call all-java-files-under, java)\n\nLOCAL_COMPATIBILITY_SUITE := e-tests\nLOCAL_INSTRUMENTATION_FOR := RoboTestExample\n\ninclude $(BUILD_STATIC_JAVA_LIBRARY)\n</code></pre>\n\n<pre class=\"lang-java prettyprint-override\"><code>@RunWith(RobolectricTestRunner.class)\n@Config(shadows = {ShadowBinder.class, manifest=Config.NONE)\npublic class ExampleRoboTest {\n    private static final String TAG = \"ExampleRoboTest\";\n    private ServiceController&lt;Example&gt; controller;\n    Example service;\n\n    @Before\n    public void setUp() {\n        controller = Robolectric.buildService(Example.class);\n        service = controller.create().get();\n    }\n\n    @After\n    public void tearDown() {\n    }\n\n    @Test\n    public void foo()\n    {\n      assertTrue(service.foo());\n    }\n\n}\n</code></pre>\n\n<pre><code>#############################################\n# RoboExample Robolectric test target.         #\n#############################################\nLOCAL_PATH := $(call my-dir)\ninclude $(CLEAR_VARS)\n\nLOCAL_PACKAGE_NAME := RoboTestExampleTest\nLOCAL_MODULE := RoboTestExampleTest\n\nLOCAL_MODULE_TAGS := tests\n\nLOCAL_JACK_ENABLED := disabled\nLOCAL_PROGUARD_ENABLED := disabled\n\nLOCAL_SRC_FILES := \\\n        $(call all-java-files-under, src) \\\nLOCAL_JAVA_LIBRARIES := \\\n    robolectric_android-all-stub \\\n    Robolectric_all-target \\\nLOCAL_STATIC_JAVA_LIBRARIES := \\\n     jacocoagent \\\n\nLOCAL_COMPATIBILITY_SUITE := e-tests\nLOCAL_INSTRUMENTATION_FOR := RoboTestExample\n\ninclude $(BUILD_STATIC_JAVA_LIBRARY)\n\n#############################################################\n# runner target to run the previous target.                 #\n#############################################################\ninclude $(CLEAR_VARS)\n\nLOCAL_MODULE := RunRoboTestExampleTest\nLOCAL_PROGUARD_ENABLED := disabled\n\nLOCAL_JAVA_LIBRARIES := \\\n    RoboTestExampleTest\\\n    robolectric_android-all-stub \\\n    Robolectric_all-target \\\n\nLOCAL_TEST_PACKAGE := RoboTestExample\nLOCAL_INSTRUMENT_SOURCE_DIRS := $(dir $(LOCAL_PATH))../main/java\nLOCAL_ROBOTEST_TIMEOUT := 36000\n\ninclude external/robolectric-shadows/run_robotests.mk\n</code></pre>\n"},{"tags":["java","maven","jar","transitive-dependency"],"comments":[{"owner":{"account_id":18182,"reputation":33673,"user_id":41423,"accept_rate":100,"display_name":"Nick Holt"},"score":1,"creation_date":1700047490,"post_id":77487203,"comment_id":136606172,"body_markdown":"I don&#39;t believe this is possible - the transitive dependencies are the result of the pom hierarchy, not your custom jar. While you could try to concoct something using the `dependencyManagement` section in the &#39;mother&#39; pom, this will likely just move the problem and so I think the best option would be to break out the &#39;models&#39; into their own project with their own pom and then depend on this new artifact (project) from the existing project and wherever else as needed.","body":"I don&#39;t believe this is possible - the transitive dependencies are the result of the pom hierarchy, not your custom jar. While you could try to concoct something using the <code>dependencyManagement</code> section in the &#39;mother&#39; pom, this will likely just move the problem and so I think the best option would be to break out the &#39;models&#39; into their own project with their own pom and then depend on this new artifact (project) from the existing project and wherever else as needed."},{"owner":{"account_id":112317,"reputation":93929,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":3,"creation_date":1700055733,"post_id":77487203,"comment_id":136607649,"body_markdown":"If you have a separate intention for reuse i would strongly recommend to make a separate module which contains only those model classes and use the defaut to package your jar file ... which includes the dependencies (defined in the pom file) and that separate module you can configure in the way you need to...","body":"If you have a separate intention for reuse i would strongly recommend to make a separate module which contains only those model classes and use the defaut to package your jar file ... which includes the dependencies (defined in the pom file) and that separate module you can configure in the way you need to..."}],"owner":{"account_id":210082,"reputation":19409,"user_id":461499,"accept_rate":73,"display_name":"Rob Audenaerde"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1700046412,"creation_date":1700046412,"question_id":77487203,"body_markdown":"I&#39;m creating some additional jar file in my pom.xml of a big project (basically, some model classes)\r\n\r\nI&#39;m using the maven-jar-plugin with this configuration:\r\n\r\n\r\n                    &lt;execution&gt;\r\n                        &lt;id&gt;issue-models-jar&lt;/id&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;jar&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                        &lt;configuration&gt;\r\n                            &lt;archive&gt;\r\n                                &lt;addMavenDescriptor&gt;false&lt;/addMavenDescriptor&gt;\r\n                            &lt;/archive&gt;\r\n                            &lt;classifier&gt;issue-models&lt;/classifier&gt;\r\n                            &lt;includes&gt;\r\n                                &lt;include&gt;**/api/issues/models/**&lt;/include&gt;\r\n                            &lt;/includes&gt;\r\n                        &lt;/configuration&gt;\r\n                    &lt;/execution&gt;\r\n\r\n\r\nThis gives me nice clean jars. However, when I use these jars as dependencies in another project (after installing them in a repo), the dependencies of the &#39;mother&#39; pom also appear. \r\n\r\nI know I can exclude these depedencies, but I don&#39;t want to do that in each project where I use these jars.\r\n\r\nIs such a thing feasable in maven? Or am I just taking the wrong approach(tm)?\r\n\r\n\r\n","title":"maven-jar-plugin and excluding transitive dependencies","body":"<p>I'm creating some additional jar file in my pom.xml of a big project (basically, some model classes)</p>\n<p>I'm using the maven-jar-plugin with this configuration:</p>\n<pre><code>                &lt;execution&gt;\n                    &lt;id&gt;issue-models-jar&lt;/id&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;jar&lt;/goal&gt;\n                    &lt;/goals&gt;\n                    &lt;configuration&gt;\n                        &lt;archive&gt;\n                            &lt;addMavenDescriptor&gt;false&lt;/addMavenDescriptor&gt;\n                        &lt;/archive&gt;\n                        &lt;classifier&gt;issue-models&lt;/classifier&gt;\n                        &lt;includes&gt;\n                            &lt;include&gt;**/api/issues/models/**&lt;/include&gt;\n                        &lt;/includes&gt;\n                    &lt;/configuration&gt;\n                &lt;/execution&gt;\n</code></pre>\n<p>This gives me nice clean jars. However, when I use these jars as dependencies in another project (after installing them in a repo), the dependencies of the 'mother' pom also appear.</p>\n<p>I know I can exclude these depedencies, but I don't want to do that in each project where I use these jars.</p>\n<p>Is such a thing feasable in maven? Or am I just taking the wrong approach(tm)?</p>\n"},{"tags":["java","spring-boot","jackson","mapstruct"],"comments":[{"owner":{"account_id":4776151,"reputation":2653,"user_id":3859199,"display_name":"Bwvolleyball"},"score":0,"creation_date":1584567181,"post_id":60746717,"comment_id":107479724,"body_markdown":"Can you also add a sample Json object that you are trying to deserialize?","body":"Can you also add a sample Json object that you are trying to deserialize?"},{"owner":{"account_id":18003189,"reputation":31,"user_id":13084642,"display_name":"Latesh"},"score":0,"creation_date":1584567807,"post_id":60746717,"comment_id":107479909,"body_markdown":"{\n  &quot;quote_type&quot;: &quot;auto&quot;,\n  &quot;quote_value&quot;: {\n    &quot;quote_id&quot;: 10,\n    &quot;quote_description&quot;: &quot;This is my first quote&quot;\n  }\n}","body":"{   &quot;quote_type&quot;: &quot;auto&quot;,   &quot;quote_value&quot;: {     &quot;quote_id&quot;: 10,     &quot;quote_description&quot;: &quot;This is my first quote&quot;   } }"}],"answers":[{"tags":[],"owner":{"account_id":4776151,"reputation":2653,"user_id":3859199,"display_name":"Bwvolleyball"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1584568759,"creation_date":1584568248,"answer_id":60747997,"question_id":60746717,"body_markdown":"I think your mapper might be backwards.\r\n\r\nThe class that directly correlates to your JSON structure is `Quote`.\r\n\r\nThe error makes it appear as if you are attempting to instead deserialize `QuoteFromSource`.\r\n\r\n**Additionally**, you need to make sure your classes have standard / default getters and setters because by default, Jackson makes use of those when deserializing unless you configure it to do property injection directly (not default)\r\n\r\nExample:\r\n\r\n```java\r\npublic class Quote {\r\n\r\n    private String type;\r\n\r\n    private Value value;\r\n\r\n    @JsonSetter(&quot;quote_type&quot;)\r\n    public void setType(String type) {\r\n        this.type = type;\r\n    }\r\n\r\n    @JsonGetter(&quot;quote_type&quot;)\r\n    public String getType() {\r\n        return type;\r\n    }\r\n\r\n    @JsonSetter(&quot;quote_value&quot;)\r\n    public void setValue(Value value) {\r\n        this.value = value;\r\n    }\r\n\r\n    @JsonGetter(&quot;quote_value&quot;)\r\n    public Value getValue() {\r\n        return value;\r\n    }\r\n}\r\n```","title":"Mapping using mapstruct : Error:(22,48) java: The type of parameter &quot;quote&quot; has no property named &quot;quote_type&quot;","body":"<p>I think your mapper might be backwards.</p>\n\n<p>The class that directly correlates to your JSON structure is <code>Quote</code>.</p>\n\n<p>The error makes it appear as if you are attempting to instead deserialize <code>QuoteFromSource</code>.</p>\n\n<p><strong>Additionally</strong>, you need to make sure your classes have standard / default getters and setters because by default, Jackson makes use of those when deserializing unless you configure it to do property injection directly (not default)</p>\n\n<p>Example:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public class Quote {\n\n    private String type;\n\n    private Value value;\n\n    @JsonSetter(\"quote_type\")\n    public void setType(String type) {\n        this.type = type;\n    }\n\n    @JsonGetter(\"quote_type\")\n    public String getType() {\n        return type;\n    }\n\n    @JsonSetter(\"quote_value\")\n    public void setValue(Value value) {\n        this.value = value;\n    }\n\n    @JsonGetter(\"quote_value\")\n    public Value getValue() {\n        return value;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":18003189,"reputation":31,"user_id":13084642,"display_name":"Latesh"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":8669,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1700046125,"creation_date":1584561568,"question_id":60746717,"body_markdown":"Getting the below error when trying to build the mapper class.     \r\n\r\n```\r\nError:(20,48) java: The type of parameter &quot;quote&quot; has no property named &quot;quote_type&quot;.\r\nError:(15,53) java: Unknown property &quot;quote_type&quot; in return type.\r\nError:(20,48) java: Property &quot;type&quot; has no write accessor.\r\n```\r\n\r\nMapper class is given below \r\n      \r\n```java\r\n@Mapper(componentModel = &quot;spring&quot;)\r\npublic interface SourceDestinationMapper {\r\n        \r\n    @Mappings({\r\n        @Mapping(target = &quot;quote_type&quot;, source= &quot;quoteFromSource.type&quot;)\r\n    })\r\n    Quote sourceToDestination(QuoteFromSource quoteFromSource);\r\n        \r\n    @Mappings({\r\n        @Mapping(target = &quot;type&quot;, source = &quot;quote.quote_type&quot;)\r\n    })\r\n    QuoteFromSource destinationToSource(Quote quote);\r\n        \r\n    Value sourceValueToDestinationValue(ValueFromSource valueFromSource);\r\n        \r\n    ValueFromSource sourceValueToDestinationValue(Value value);\r\n}\r\n```    \r\n \r\nThe Source class is given below \r\n \r\n```java\r\npublic class Quote {\r\n\r\n    @JsonProperty(&quot;quote_type&quot;)\r\n    private String type;\r\n\r\n    @JsonProperty(&quot;quote_value&quot;)\r\n    private Value value;\r\n}\r\n```\r\n\r\nThe Destination class is given below\r\n\r\n```java\r\npublic class QuoteFromSource {\r\n\r\n    @JsonProperty(&quot;type&quot;)\r\n    private String type;\r\n\r\n    @JsonProperty(&quot;value&quot;)\r\n    private ValueFromSource value;\r\n}\r\n```\r\n\r\nsource class\r\n```java\r\npublic class Value {\r\n\r\n    @JsonProperty(&quot;quote_id&quot;)\r\n    private Integer id;\r\n\r\n    @JsonProperty(&quot;quote_description&quot;)\r\n    private String quote;\r\n}\r\n```\r\n\r\ndestination class\r\n\r\n```java\r\npublic class ValueFromSource {\r\n\r\n    @JsonProperty(&quot;id&quot;)\r\n    private Integer id;\r\n\r\n    @JsonProperty(&quot;quote&quot;)\r\n    private String quote;\r\n}\r\n```\r\n\r\nExample JSON to be deserialized:\r\n```json\r\n{ \r\n    &quot;quote_type&quot;: &quot;auto&quot;,\r\n    &quot;quote_value&quot;: {\r\n        &quot;quote_id&quot;: 10,\r\n        &quot;quote_description&quot;: &quot;This is my first quote&quot;\r\n    } \r\n}\r\n```","title":"Mapping using mapstruct : Error:(22,48) java: The type of parameter &quot;quote&quot; has no property named &quot;quote_type&quot;","body":"<p>Getting the below error when trying to build the mapper class.     </p>\n\n<pre><code>Error:(20,48) java: The type of parameter \"quote\" has no property named \"quote_type\".\nError:(15,53) java: Unknown property \"quote_type\" in return type.\nError:(20,48) java: Property \"type\" has no write accessor.\n</code></pre>\n\n<p>Mapper class is given below </p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@Mapper(componentModel = \"spring\")\npublic interface SourceDestinationMapper {\n\n    @Mappings({\n        @Mapping(target = \"quote_type\", source= \"quoteFromSource.type\")\n    })\n    Quote sourceToDestination(QuoteFromSource quoteFromSource);\n\n    @Mappings({\n        @Mapping(target = \"type\", source = \"quote.quote_type\")\n    })\n    QuoteFromSource destinationToSource(Quote quote);\n\n    Value sourceValueToDestinationValue(ValueFromSource valueFromSource);\n\n    ValueFromSource sourceValueToDestinationValue(Value value);\n}\n</code></pre>\n\n<p>The Source class is given below </p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public class Quote {\n\n    @JsonProperty(\"quote_type\")\n    private String type;\n\n    @JsonProperty(\"quote_value\")\n    private Value value;\n}\n</code></pre>\n\n<p>The Destination class is given below</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public class QuoteFromSource {\n\n    @JsonProperty(\"type\")\n    private String type;\n\n    @JsonProperty(\"value\")\n    private ValueFromSource value;\n}\n</code></pre>\n\n<p>source class</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public class Value {\n\n    @JsonProperty(\"quote_id\")\n    private Integer id;\n\n    @JsonProperty(\"quote_description\")\n    private String quote;\n}\n</code></pre>\n\n<p>destination class</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public class ValueFromSource {\n\n    @JsonProperty(\"id\")\n    private Integer id;\n\n    @JsonProperty(\"quote\")\n    private String quote;\n}\n</code></pre>\n\n<p>Example JSON to be deserialized:</p>\n\n<pre><code>{ \n    \"quote_type\": \"auto\",\n    \"quote_value\": {\n        \"quote_id\": 10,\n        \"quote_description\": \"This is my first quote\"\n    } \n}\n</code></pre>\n"},{"tags":["java","spring-boot","maven","jasypt"],"answers":[{"tags":[],"owner":{"account_id":10777133,"reputation":7282,"user_id":7928721,"display_name":"samabcde"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1632149697,"creation_date":1632149697,"answer_id":69256560,"question_id":69255586,"body_markdown":"According to [Using Maven properties in application.properties in Spring Boot][1], you can add the property in `application.properties` as\r\n```\r\njasypt.encryptor.password=@jasypt.encryptor.password@\r\n```\r\nAnd add below in pom.xml\r\n```xml\r\n\t&lt;build&gt;\r\n\t\t&lt;resources&gt;\r\n\t\t\t&lt;resource&gt;\r\n\t\t\t\t&lt;directory&gt;src/main/resources&lt;/directory&gt;\r\n\t\t\t\t&lt;filtering&gt;true&lt;/filtering&gt;\r\n\t\t\t&lt;/resource&gt;\r\n\t\t&lt;/resources&gt;\r\n   ...\r\n   &lt;/build&gt;\r\n```\r\nThen run\r\n```\r\nclean -Djasypt.encryptor.password=foo spring-boot:run\r\n```\r\nWhat this does is replace `@jasypt.encryptor.password@` by `foo` in `application.properties` inside your target folder.\r\n\r\n  [1]: https://stackoverflow.com/questions/36703499/using-maven-properties-in-application-properties-in-spring-boot","title":"-Djasypt.encryptor.password maven&#39;s option doesn&#39;t work","body":"<p>According to <a href=\"https://stackoverflow.com/questions/36703499/using-maven-properties-in-application-properties-in-spring-boot\">Using Maven properties in application.properties in Spring Boot</a>, you can add the property in <code>application.properties</code> as</p>\n<pre><code>jasypt.encryptor.password=@jasypt.encryptor.password@\n</code></pre>\n<p>And add below in pom.xml</p>\n<pre class=\"lang-xml prettyprint-override\"><code>    &lt;build&gt;\n        &lt;resources&gt;\n            &lt;resource&gt;\n                &lt;directory&gt;src/main/resources&lt;/directory&gt;\n                &lt;filtering&gt;true&lt;/filtering&gt;\n            &lt;/resource&gt;\n        &lt;/resources&gt;\n   ...\n   &lt;/build&gt;\n</code></pre>\n<p>Then run</p>\n<pre><code>clean -Djasypt.encryptor.password=foo spring-boot:run\n</code></pre>\n<p>What this does is replace <code>@jasypt.encryptor.password@</code> by <code>foo</code> in <code>application.properties</code> inside your target folder.</p>\n"},{"tags":[],"owner":{"account_id":109278,"reputation":9687,"user_id":289625,"accept_rate":100,"display_name":"Dave G"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700045985,"creation_date":1700045985,"answer_id":77487168,"question_id":69255586,"body_markdown":"The &quot;-D&quot; options you are passing are actually passed to the maven process.\r\n\r\nI think what you are looking for is the run goal parameters needed to pass to the JVM launching the spring-boot process.\r\n\r\nTry this reference:\r\n\r\nhttps://docs.spring.io/spring-boot/docs/current/maven-plugin/reference/htmlsingle/#run.run-goal.parameter-details.jvm-arguments\r\n\r\n","title":"-Djasypt.encryptor.password maven&#39;s option doesn&#39;t work","body":"<p>The &quot;-D&quot; options you are passing are actually passed to the maven process.</p>\n<p>I think what you are looking for is the run goal parameters needed to pass to the JVM launching the spring-boot process.</p>\n<p>Try this reference:</p>\n<p><a href=\"https://docs.spring.io/spring-boot/docs/current/maven-plugin/reference/htmlsingle/#run.run-goal.parameter-details.jvm-arguments\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-boot/docs/current/maven-plugin/reference/htmlsingle/#run.run-goal.parameter-details.jvm-arguments</a></p>\n"}],"owner":{"account_id":14661131,"reputation":85,"user_id":10588294,"display_name":"vanR"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3420,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1700045985,"creation_date":1632145808,"question_id":69255586,"body_markdown":"I have an application with encrypted password for database connection, but when I want to run it with the secret key in maven options it doesn&#39;t work. I have added the jasypt plugin in the pom.xml.\r\n\r\nThe command I run:\r\n\r\n    mvn -Djasypt.encryptor.password=foo spring-boot:run\r\n\r\n\r\napplication.properties:\r\n\r\n    spring.datasource.url=jdbc:mysql://localhost:3306/my_database\r\n    spring.datasource.username=root\r\n    spring.datasource.password=ENC(Hu76tW6HJjEp730PNXSFOQ==)\r\n\r\n    jasypt.encryptor.algorithm=PBEWithMD5AndDES\r\n    jasypt.encryptor.iv-generator-classname=org.jasypt.iv.NoIvGenerator\r\n\r\n----\r\n\r\nWhen I provide the secret key in the application.properties file, it does work.\r\n\r\nThe command I run when the secret key is provided:\r\n\r\n    mvn spring-boot:run\r\n\r\napplication.properties when the secret key is provided:\r\n\r\n    spring.datasource.url=jdbc:mysql://localhost:3306/my_database\r\n    spring.datasource.username=root\r\n    spring.datasource.password=ENC(Hu76tW6HJjEp730PNXSFOQ==)\r\n\r\n    jasypt.encryptor.algorithm=PBEWithMD5AndDES\r\n    jasypt.encryptor.iv-generator-classname=org.jasypt.iv.NoIvGenerator\r\n    jasypt.encryptor.password=foo\r\n\r\n----\r\npom.xml:\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n\t...&gt;\r\n    ...\r\n\t&lt;properties&gt;\r\n\t\t...\r\n\t\t&lt;jasypt.version&gt;3.0.4&lt;/jasypt.version&gt;\r\n\t&lt;/properties&gt;\r\n\r\n\t&lt;dependencies&gt;\r\n\t\t...\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.github.ulisesbocchio&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jasypt-spring-boot-starter&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${jasypt.version}&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n            ....\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;com.github.ulisesbocchio&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;jasypt-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;${jasypt.version}&lt;/version&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n&lt;/project&gt;\r\n\r\n```\r\n\r\nThe error I get:\r\n```\r\n***************************\r\nAPPLICATION FAILED TO START\r\n***************************\r\n\r\nDescription:\r\n\r\nFailed to bind properties under &#39;spring.datasource.password&#39; to java.lang.String:\r\n\r\n    Reason: either &#39;jasypt.encryptor.password&#39;, one of [&#39;jasypt.encryptor.private-key-string&#39;, &#39;jasypt.encryptor.private-key-location&#39;] for asymmetric encryption, or one of [&#39;jasypt.encryptor.gcm-secret-key-string&#39;, &#39;jasypt.encryptor.gcm-secret-key-location&#39;, &#39;jasypt.encryptor.gcm-secret-key-password&#39;] for AES/GCM encryption must be provided for Password-based or Asymmetric encryption\r\n\r\nAction:\r\n\r\nUpdate your application&#39;s configuration\r\n\r\n```","title":"-Djasypt.encryptor.password maven&#39;s option doesn&#39;t work","body":"<p>I have an application with encrypted password for database connection, but when I want to run it with the secret key in maven options it doesn't work. I have added the jasypt plugin in the pom.xml.</p>\n<p>The command I run:</p>\n<pre><code>mvn -Djasypt.encryptor.password=foo spring-boot:run\n</code></pre>\n<p>application.properties:</p>\n<pre><code>spring.datasource.url=jdbc:mysql://localhost:3306/my_database\nspring.datasource.username=root\nspring.datasource.password=ENC(Hu76tW6HJjEp730PNXSFOQ==)\n\njasypt.encryptor.algorithm=PBEWithMD5AndDES\njasypt.encryptor.iv-generator-classname=org.jasypt.iv.NoIvGenerator\n</code></pre>\n<hr />\n<p>When I provide the secret key in the application.properties file, it does work.</p>\n<p>The command I run when the secret key is provided:</p>\n<pre><code>mvn spring-boot:run\n</code></pre>\n<p>application.properties when the secret key is provided:</p>\n<pre><code>spring.datasource.url=jdbc:mysql://localhost:3306/my_database\nspring.datasource.username=root\nspring.datasource.password=ENC(Hu76tW6HJjEp730PNXSFOQ==)\n\njasypt.encryptor.algorithm=PBEWithMD5AndDES\njasypt.encryptor.iv-generator-classname=org.jasypt.iv.NoIvGenerator\njasypt.encryptor.password=foo\n</code></pre>\n<hr />\n<p>pom.xml:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n    ...&gt;\n    ...\n    &lt;properties&gt;\n        ...\n        &lt;jasypt.version&gt;3.0.4&lt;/jasypt.version&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        ...\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.github.ulisesbocchio&lt;/groupId&gt;\n            &lt;artifactId&gt;jasypt-spring-boot-starter&lt;/artifactId&gt;\n            &lt;version&gt;${jasypt.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            ....\n            &lt;plugin&gt;\n                &lt;groupId&gt;com.github.ulisesbocchio&lt;/groupId&gt;\n                &lt;artifactId&gt;jasypt-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;${jasypt.version}&lt;/version&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n\n</code></pre>\n<p>The error I get:</p>\n<pre><code>***************************\nAPPLICATION FAILED TO START\n***************************\n\nDescription:\n\nFailed to bind properties under 'spring.datasource.password' to java.lang.String:\n\n    Reason: either 'jasypt.encryptor.password', one of ['jasypt.encryptor.private-key-string', 'jasypt.encryptor.private-key-location'] for asymmetric encryption, or one of ['jasypt.encryptor.gcm-secret-key-string', 'jasypt.encryptor.gcm-secret-key-location', 'jasypt.encryptor.gcm-secret-key-password'] for AES/GCM encryption must be provided for Password-based or Asymmetric encryption\n\nAction:\n\nUpdate your application's configuration\n\n</code></pre>\n"},{"tags":["java","spring","spring-boot","stream"],"comments":[{"owner":{"account_id":10499788,"reputation":91,"user_id":7738825,"display_name":"Robin Camus"},"score":0,"creation_date":1700045476,"post_id":77486297,"comment_id":136605827,"body_markdown":"Not sure, if you want the philosophy or the concret fact, but the method KeySet() returns the actual Set inside your Map and not a clone of it. https://github.com/AdoptOpenJDK/openjdk-jdk8u/blob/master/jdk/src/share/classes/java/util/HashMap.java","body":"Not sure, if you want the philosophy or the concret fact, but the method KeySet() returns the actual Set inside your Map and not a clone of it. <a href=\"https://github.com/AdoptOpenJDK/openjdk-jdk8u/blob/master/jdk/src/share/classes/java/util/HashMap.java\" rel=\"nofollow noreferrer\">github.com/AdoptOpenJDK/openjdk-jdk8u/blob/master/jdk/src/sh&zwnj;&#8203;are/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":18586978,"reputation":2220,"user_id":15000097,"display_name":"Georgii Lvov"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1700045962,"creation_date":1700045506,"answer_id":77487107,"question_id":77486297,"body_markdown":"It is changed, due to implementation of `keySet()`. From the javadoc of `HashMap#keySet`:\r\n\r\n&gt; Returns a Set view of the keys contained in this map. The set is\r\n&gt; backed by the map, so changes to the map are reflected in the set, and\r\n&gt; vice-versa.\r\n\r\nTo keep the value unchanged, you need to create a new set based on the keyset of locMap:\r\n\r\n```\r\nSet&lt;String&gt; l = new HashSet&lt;&gt;(locMap.keySet());\r\n```","title":"Value of list changing inside for loop while using stream","body":"<p>It is changed, due to implementation of <code>keySet()</code>. From the javadoc of <code>HashMap#keySet</code>:</p>\n<blockquote>\n<p>Returns a Set view of the keys contained in this map. The set is\nbacked by the map, so changes to the map are reflected in the set, and\nvice-versa.</p>\n</blockquote>\n<p>To keep the value unchanged, you need to create a new set based on the keyset of locMap:</p>\n<pre><code>Set&lt;String&gt; l = new HashSet&lt;&gt;(locMap.keySet());\n</code></pre>\n"}],"owner":{"account_id":10702060,"reputation":23,"user_id":8797280,"display_name":"shashwat"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1700045962,"creation_date":1700038241,"question_id":77486297,"body_markdown":"```\r\nSet&lt;String&gt; l = locMap.keySet();\r\nfor (Map.Entry&lt;String, String&gt; ven : venderAndFactoryLocMap.entrySet()) {\r\n  if (ven.getValue().equals(VENDOR)) {\r\n    Map&lt;String, String&gt; x1 = l.stream().collect(Collectors.toMap(x -&gt; x + &quot;-&quot; + ven.getKey(), x -&gt; PROCESS));\r\n    locMap.putAll(x1);\r\n  }\r\n}\r\n```\r\n\r\nIn the above , the value of locMap keeps changing but also the value of L (which is the hashset) also changes, I was in the view that once we have assigned a variable its value will not be changed in the stack , why this is happening ?\r\n\r\nI was expecting that the Set remains constant , while we are changing the locMap","title":"Value of list changing inside for loop while using stream","body":"<pre><code>Set&lt;String&gt; l = locMap.keySet();\nfor (Map.Entry&lt;String, String&gt; ven : venderAndFactoryLocMap.entrySet()) {\n  if (ven.getValue().equals(VENDOR)) {\n    Map&lt;String, String&gt; x1 = l.stream().collect(Collectors.toMap(x -&gt; x + &quot;-&quot; + ven.getKey(), x -&gt; PROCESS));\n    locMap.putAll(x1);\n  }\n}\n</code></pre>\n<p>In the above , the value of locMap keeps changing but also the value of L (which is the hashset) also changes, I was in the view that once we have assigned a variable its value will not be changed in the stack , why this is happening ?</p>\n<p>I was expecting that the Set remains constant , while we are changing the locMap</p>\n"},{"tags":["java","log4j"],"comments":[{"owner":{"account_id":47283,"reputation":703807,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1700048971,"post_id":77487142,"comment_id":136606404,"body_markdown":"Log4j is end-of-life and obsolete.  You should not be writing code to use it.","body":"Log4j is end-of-life and obsolete.  You should not be writing code to use it."},{"owner":{"account_id":16269349,"reputation":13452,"user_id":11748454,"display_name":"Piotr P. Karwasz"},"score":0,"creation_date":1700217182,"post_id":77487142,"comment_id":136629900,"body_markdown":"Version 1.x of Log4j reached EOL. This configuration file uses the 2.x syntax.","body":"Version 1.x of Log4j reached EOL. This configuration file uses the 2.x syntax."}],"owner":{"account_id":29908173,"reputation":1,"user_id":22920225,"display_name":"Matthias"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1700045774,"creation_date":1700045774,"question_id":77487142,"body_markdown":"I have a multi threaded application in which I want to log to different directories based on the context from where the log message was generated.\r\n\r\nI don&#39;t want or need a single directory for each thread. In my case I have multiple threads that belong to the same context and should share the same log directory. The context is identified by a named object.\r\n\r\nI did find multiple solutions explaining how to separate your log into multiple files using the LogLevel, Thread name and system variables.\r\n\r\nIn fact I already use a system variable to write to different directories based on the application that is currently running (multiple applications share this config). Here it is:\r\n\r\n\r\n```\r\n&lt;Configuration&gt;\r\n    &lt;Appenders&gt;    \r\n        &lt;RollingFile name=&quot;RollingFile&quot; fileName=&quot;${sys:logfiledir}/out.log&quot; filePattern=&quot;${sys:logfiledir}/out-%d{yyyy-MM-dd}-%i.log&quot;&gt;\r\n\t        &lt;PatternLayout&gt;\r\n\t            &lt;pattern&gt;%-5p %d{yyyy-MM-dd HH:mm:ss.SSS}{GMT+0} UTC %C:%L - %msg%n&lt;/pattern&gt;\r\n\t        &lt;/PatternLayout&gt;\r\n\t        &lt;Policies&gt;\r\n\t            &lt;SizeBasedTriggeringPolicy size=&quot;10 MB&quot; /&gt;\r\n\t        &lt;/Policies&gt;\r\n\t        &lt;DefaultRolloverStrategy&gt;\r\n        \t\t&lt;Delete basePath=&quot;${sys:logfiledir}&quot; &gt;\r\n          \t\t\t&lt;IfLastModified age=&quot;10d&quot; /&gt;\r\n       \t\t\t&lt;/Delete&gt;\r\n      \t\t&lt;/DefaultRolloverStrategy&gt;\r\n\t    &lt;/RollingFile&gt;\r\n        &lt;Console name=&quot;Console&quot;&gt;\r\n\t        &lt;PatternLayout&gt;\r\n\t            &lt;pattern&gt;%-5p %d{yyyy-MM-dd HH:mm:ss.SSS}{GMT+0} UTC %C:%L - %msg%n&lt;/pattern&gt;\r\n\t        &lt;/PatternLayout&gt;\r\n\t    &lt;/Console&gt;\r\n    &lt;/Appenders&gt;\r\n    \r\n    &lt;Loggers&gt;\r\n        &lt;Logger name=&quot;de&quot; level=&quot;${sys:loglevel}&quot; additivity=&quot;false&quot;&gt;\r\n            &lt;appender-ref ref=&quot;RollingFile&quot;/&gt;\r\n            &lt;appender-ref ref=&quot;Console&quot;/&gt;\r\n        &lt;/Logger&gt;\r\n    &lt;/Loggers&gt;\r\n&lt;/Configuration&gt;\r\n```\r\n\r\nIt would be great if I could pass a string parameter into the `LogManager.getLogger()` function that would be used to determine the subdirectory in which to log into. But for what I can tell that is not an option.\r\n\r\nIf all fails I guess I could give up on the XML configuration and build multiple appenders and loggers programatically based on the contexts I have.","title":"Logging to different directories using log4j based on context","body":"<p>I have a multi threaded application in which I want to log to different directories based on the context from where the log message was generated.</p>\n<p>I don't want or need a single directory for each thread. In my case I have multiple threads that belong to the same context and should share the same log directory. The context is identified by a named object.</p>\n<p>I did find multiple solutions explaining how to separate your log into multiple files using the LogLevel, Thread name and system variables.</p>\n<p>In fact I already use a system variable to write to different directories based on the application that is currently running (multiple applications share this config). Here it is:</p>\n<pre><code>&lt;Configuration&gt;\n    &lt;Appenders&gt;    \n        &lt;RollingFile name=&quot;RollingFile&quot; fileName=&quot;${sys:logfiledir}/out.log&quot; filePattern=&quot;${sys:logfiledir}/out-%d{yyyy-MM-dd}-%i.log&quot;&gt;\n            &lt;PatternLayout&gt;\n                &lt;pattern&gt;%-5p %d{yyyy-MM-dd HH:mm:ss.SSS}{GMT+0} UTC %C:%L - %msg%n&lt;/pattern&gt;\n            &lt;/PatternLayout&gt;\n            &lt;Policies&gt;\n                &lt;SizeBasedTriggeringPolicy size=&quot;10 MB&quot; /&gt;\n            &lt;/Policies&gt;\n            &lt;DefaultRolloverStrategy&gt;\n                &lt;Delete basePath=&quot;${sys:logfiledir}&quot; &gt;\n                    &lt;IfLastModified age=&quot;10d&quot; /&gt;\n                &lt;/Delete&gt;\n            &lt;/DefaultRolloverStrategy&gt;\n        &lt;/RollingFile&gt;\n        &lt;Console name=&quot;Console&quot;&gt;\n            &lt;PatternLayout&gt;\n                &lt;pattern&gt;%-5p %d{yyyy-MM-dd HH:mm:ss.SSS}{GMT+0} UTC %C:%L - %msg%n&lt;/pattern&gt;\n            &lt;/PatternLayout&gt;\n        &lt;/Console&gt;\n    &lt;/Appenders&gt;\n    \n    &lt;Loggers&gt;\n        &lt;Logger name=&quot;de&quot; level=&quot;${sys:loglevel}&quot; additivity=&quot;false&quot;&gt;\n            &lt;appender-ref ref=&quot;RollingFile&quot;/&gt;\n            &lt;appender-ref ref=&quot;Console&quot;/&gt;\n        &lt;/Logger&gt;\n    &lt;/Loggers&gt;\n&lt;/Configuration&gt;\n</code></pre>\n<p>It would be great if I could pass a string parameter into the <code>LogManager.getLogger()</code> function that would be used to determine the subdirectory in which to log into. But for what I can tell that is not an option.</p>\n<p>If all fails I guess I could give up on the XML configuration and build multiple appenders and loggers programatically based on the contexts I have.</p>\n"},{"tags":["java"],"answers":[{"tags":[],"owner":{"account_id":446547,"reputation":126635,"user_id":839646,"accept_rate":70,"display_name":"Ryan Stewart"},"down_vote_count":1,"up_vote_count":32,"is_accepted":false,"score":31,"last_activity_date":1315445785,"creation_date":1315445785,"answer_id":7342244,"question_id":7342237,"body_markdown":"If the remainder when you divide by 2 is 0, it&#39;s even. `%` is the operator to get a remainder.","title":"Check whether number is even or odd","body":"<p>If the remainder when you divide by 2 is 0, it's even. <code>%</code> is the operator to get a remainder.</p>\n"},{"tags":[],"owner":{"account_id":261035,"reputation":6348,"user_id":544963,"accept_rate":100,"display_name":"fireshadow52"},"down_vote_count":1,"up_vote_count":24,"is_accepted":false,"score":23,"last_activity_date":1501573990,"creation_date":1315445811,"answer_id":7342247,"question_id":7342237,"body_markdown":"Every even number is divisible by two, regardless of if it&#39;s a decimal (but the decimal, if present, must also be even). So you can use the `%` (modulo) operator, which divides the number on the left by the number on the right and returns the remainder...\r\n\r\n    boolean isEven(double num) { return ((num % 2) == 0); }","title":"Check whether number is even or odd","body":"<p>Every even number is divisible by two, regardless of if it's a decimal (but the decimal, if present, must also be even). So you can use the <code>%</code> (modulo) operator, which divides the number on the left by the number on the right and returns the remainder...</p>\n\n<pre><code>boolean isEven(double num) { return ((num % 2) == 0); }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":532326,"reputation":706,"user_id":903376,"display_name":"Phil"},"down_vote_count":0,"up_vote_count":26,"is_accepted":false,"score":26,"last_activity_date":1491955633,"creation_date":1315445833,"answer_id":7342251,"question_id":7342237,"body_markdown":"The remainder operator, %, will give you the remainder after dividing by a number.\r\n\r\nSo `n % 2 == 0` will be true if n is even and false if n is odd.","title":"Check whether number is even or odd","body":"<p>The remainder operator, %, will give you the remainder after dividing by a number.</p>\n\n<p>So <code>n % 2 == 0</code> will be true if n is even and false if n is odd.</p>\n"},{"tags":[],"owner":{"account_id":343738,"reputation":10181,"user_id":675637,"accept_rate":77,"display_name":"poy"},"down_vote_count":2,"up_vote_count":125,"is_accepted":false,"score":123,"last_activity_date":1622722968,"creation_date":1315445859,"answer_id":7342253,"question_id":7342237,"body_markdown":"    if ((x % 2) == 0) {\r\n       // even\r\n    } else {\r\n       // odd\r\n    }","title":"Check whether number is even or odd","body":"<pre><code>if ((x % 2) == 0) {\n   // even\n} else {\n   // odd\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":46614,"reputation":5934,"user_id":137764,"accept_rate":80,"display_name":"lucasmo"},"down_vote_count":4,"up_vote_count":238,"is_accepted":false,"score":234,"last_activity_date":1427737058,"creation_date":1315446014,"answer_id":7342273,"question_id":7342237,"body_markdown":"You can use the modulus operator, but that can be slow. If it&#39;s an integer, you can do:\r\n\r\n    if ( (x &amp; 1) == 0 ) { even... } else { odd... }\r\n\r\nThis is because the low bit will always be set on an odd number.","title":"Check whether number is even or odd","body":"<p>You can use the modulus operator, but that can be slow. If it's an integer, you can do:</p>\n\n<pre><code>if ( (x &amp; 1) == 0 ) { even... } else { odd... }\n</code></pre>\n\n<p>This is because the low bit will always be set on an odd number.</p>\n"},{"tags":[],"owner":{"account_id":5466634,"reputation":31,"user_id":4347270,"display_name":"Kiran G"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1475701006,"creation_date":1475697359,"answer_id":39882619,"question_id":7342237,"body_markdown":"Works for positive or negative numbers   \r\n    \r\n    int start = -3;\r\n    int end = 6;\r\n    \r\n    for (int val = start; val &lt; end; val++)\r\n    {\r\n        // Condition to Check Even, Not condition (!) will give Odd number\r\n        if (val % 2 == 0) \r\n        {\r\n            System.out.println(&quot;Even&quot; + val);\r\n        }\r\n        else\r\n        {\r\n            System.out.println(&quot;Odd&quot; + val);\r\n        }\r\n    }","title":"Check whether number is even or odd","body":"<p>Works for positive or negative numbers   </p>\n\n<pre><code>int start = -3;\nint end = 6;\n\nfor (int val = start; val &lt; end; val++)\n{\n    // Condition to Check Even, Not condition (!) will give Odd number\n    if (val % 2 == 0) \n    {\n        System.out.println(\"Even\" + val);\n    }\n    else\n    {\n        System.out.println(\"Odd\" + val);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10667392,"reputation":1,"user_id":7853499,"display_name":"Bob"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1491953048,"creation_date":1491953048,"answer_id":43357789,"question_id":7342237,"body_markdown":"    package isevenodd;\r\n    import java.util.Scanner;\r\n    public class IsEvenOdd {\r\n        public static void main(String[] args) {\r\n            Scanner scan = new Scanner(System.in);\r\n            System.out.println(&quot;Enter number: &quot;);\r\n            int y = scan.nextInt();       \r\n            boolean isEven = (y % 2 == 0) ? true : false;\r\n            String x = (isEven) ? &quot;even&quot; : &quot;odd&quot;;  \r\n            System.out.println(&quot;Your number is &quot; + x);\r\n        }\r\n    }","title":"Check whether number is even or odd","body":"<pre><code>package isevenodd;\nimport java.util.Scanner;\npublic class IsEvenOdd {\n    public static void main(String[] args) {\n        Scanner scan = new Scanner(System.in);\n        System.out.println(\"Enter number: \");\n        int y = scan.nextInt();       \n        boolean isEven = (y % 2 == 0) ? true : false;\n        String x = (isEven) ? \"even\" : \"odd\";  \n        System.out.println(\"Your number is \" + x);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5376896,"reputation":758,"user_id":5014339,"display_name":"Aseem Yadav"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1535040785,"creation_date":1493634063,"answer_id":43717562,"question_id":7342237,"body_markdown":"Another easy way to do it without using if/else condition (works for both positive and negative numbers):\r\n\r\n    int n = 8;\r\n    List&lt;String&gt; messages = Arrays.asList(&quot;even&quot;, &quot;odd&quot;);\r\n    \r\n    System.out.println(messages.get(Math.abs(n%2)));\r\nFor an Odd no., the expression will return &#39;1&#39; as remainder, giving\r\n\r\n&gt; messages.get(1) = &#39;odd&#39; and hence printing &#39;odd&#39;\r\n\r\nelse, &#39;even&#39; is printed when the expression comes up with result &#39;0&#39;\r\n\r\n\r\n\r\n","title":"Check whether number is even or odd","body":"<p>Another easy way to do it without using if/else condition (works for both positive and negative numbers):</p>\n\n<pre><code>int n = 8;\nList&lt;String&gt; messages = Arrays.asList(\"even\", \"odd\");\n\nSystem.out.println(messages.get(Math.abs(n%2)));\n</code></pre>\n\n<p>For an Odd no., the expression will return '1' as remainder, giving</p>\n\n<blockquote>\n  <p>messages.get(1) = 'odd' and hence printing 'odd'</p>\n</blockquote>\n\n<p>else, 'even' is printed when the expression comes up with result '0'</p>\n"},{"tags":[],"owner":{"account_id":11593971,"reputation":11,"user_id":8493261,"display_name":"Slap Chukandar Singh"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1503294051,"creation_date":1503294051,"answer_id":45789981,"question_id":7342237,"body_markdown":"You can use the modulus operator, but that can be slow. A more efficient way would be to check the lowest bit because that determines whether a number is even or odd. The code would look something like this:\r\n\r\n    public static void main(String[] args) {        \r\n        System.out.println(&quot;Enter a number to check if it is even or odd&quot;);        \r\n        System.out.println(&quot;Your number is &quot; + (((new Scanner(System.in).nextInt() &amp; 1) == 0) ? &quot;even&quot; : &quot;odd&quot;));        \r\n    }\r\n\r\n","title":"Check whether number is even or odd","body":"<p>You can use the modulus operator, but that can be slow. A more efficient way would be to check the lowest bit because that determines whether a number is even or odd. The code would look something like this:</p>\n\n<pre><code>public static void main(String[] args) {        \n    System.out.println(\"Enter a number to check if it is even or odd\");        \n    System.out.println(\"Your number is \" + (((new Scanner(System.in).nextInt() &amp; 1) == 0) ? \"even\" : \"odd\"));        \n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9591825,"reputation":37,"user_id":8180066,"display_name":"Titus Roby K"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1566849222,"creation_date":1520934089,"answer_id":49252788,"question_id":7342237,"body_markdown":"This following program can handle large numbers ( number of digits greater than 20 )\r\n\r\n    package com.isEven.java;\r\n    import java.util.Scanner;\r\n\r\n    public class isEvenValuate{\r\n\t\r\n    public static void main(String[] args) {\t\t\t\r\n\t\t\t\r\n\t\t\tScanner in = new Scanner(System.in);\r\n\t\t\tString digit = in.next();\r\n\t\t\t\r\n\t\t\tint y = Character.getNumericValue(digit.charAt(digit.length()-1));\r\n\t\t\t\r\n\t\t\tboolean isEven = (y&amp;1)==0;\r\n\t\t\t\r\n\t\t\tif(isEven)\r\n\t\t\t\tSystem.out.println(&quot;Even&quot;);\r\n\t\t\telse\r\n\t\t\t\tSystem.out.println(&quot;Odd&quot;);\r\n\r\n\t    }\r\n    }\r\n\r\nHere is the output ::\r\n\r\n      122873215981652362153862153872138721637272\r\n      Even\r\n","title":"Check whether number is even or odd","body":"<p>This following program can handle large numbers ( number of digits greater than 20 )</p>\n\n<pre><code>package com.isEven.java;\nimport java.util.Scanner;\n\npublic class isEvenValuate{\n\npublic static void main(String[] args) {            \n\n        Scanner in = new Scanner(System.in);\n        String digit = in.next();\n\n        int y = Character.getNumericValue(digit.charAt(digit.length()-1));\n\n        boolean isEven = (y&amp;1)==0;\n\n        if(isEven)\n            System.out.println(\"Even\");\n        else\n            System.out.println(\"Odd\");\n\n    }\n}\n</code></pre>\n\n<p>Here is the output ::</p>\n\n<pre><code>  122873215981652362153862153872138721637272\n  Even\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8315755,"reputation":449,"user_id":6249116,"accept_rate":10,"display_name":"Camilo"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1531576419,"creation_date":1525063237,"answer_id":50094061,"question_id":7342237,"body_markdown":"You can do like this:\r\n\r\n    boolean is_odd(int n) {\r\n        return n % 2 == 1 || n % 2 == -1;\r\n    }\r\n\r\nThis is because Java has in its modulo operation the sign of the dividend, the left side: n.\r\nSo for negatives and positives dividends, the modulo has the sign of them.\r\n\r\nOf course, the bitwise operation is faster and optimized, simply document the line of code with two or three short words, which does it for readability.","title":"Check whether number is even or odd","body":"<p>You can do like this:</p>\n\n<pre><code>boolean is_odd(int n) {\n    return n % 2 == 1 || n % 2 == -1;\n}\n</code></pre>\n\n<p>This is because Java has in its modulo operation the sign of the dividend, the left side: n.\nSo for negatives and positives dividends, the modulo has the sign of them.</p>\n\n<p>Of course, the bitwise operation is faster and optimized, simply document the line of code with two or three short words, which does it for readability.</p>\n"},{"tags":[],"owner":{"account_id":1079267,"reputation":776,"user_id":1076703,"display_name":"Vipul Gulhane"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1531577650,"creation_date":1531577650,"answer_id":51340310,"question_id":7342237,"body_markdown":"Here is full example:-\r\n\r\n    import java.text.ParseException;\r\n    \r\n    public class TestOddEvenExample {\r\n    \tpublic static void main(String args[]) throws ParseException {\r\n    \r\n    \t\tint x = 24;\r\n    \t\toddEvenChecker(x);\r\n    \r\n    \t\tint xx = 3;\r\n    \t\toddEvenChecker(xx);\r\n    \t}\r\n    \r\n    \tstatic void oddEvenChecker(int x) {\r\n    \t\tif (x % 2 == 0)\r\n    \t\t\tSystem.out.println(&quot;You entered an even number.&quot; + x);\r\n    \t\telse\r\n    \t\t\tSystem.out.println(&quot;You entered an odd number.&quot; + x);\r\n    \t}\r\n    }\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/fWAqv.png","title":"Check whether number is even or odd","body":"<p>Here is full example:-</p>\n\n<pre><code>import java.text.ParseException;\n\npublic class TestOddEvenExample {\n    public static void main(String args[]) throws ParseException {\n\n        int x = 24;\n        oddEvenChecker(x);\n\n        int xx = 3;\n        oddEvenChecker(xx);\n    }\n\n    static void oddEvenChecker(int x) {\n        if (x % 2 == 0)\n            System.out.println(\"You entered an even number.\" + x);\n        else\n            System.out.println(\"You entered an odd number.\" + x);\n    }\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/fWAqv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fWAqv.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":[],"owner":{"account_id":6383695,"reputation":5206,"user_id":4952262,"accept_rate":71,"display_name":"Michu93"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1548539650,"creation_date":1535092741,"answer_id":51998794,"question_id":7342237,"body_markdown":"I would recommend \r\n\r\n&gt; Java Puzzlers: Traps, Pitfalls, and Corner Cases Book by Joshua Bloch\r\n&gt; and Neal Gafter\r\n\r\nThere is a briefly explanation how to check if number is odd.\r\nFirst try is something similar what @AseemYadav tried:\r\n\r\n    public static boolean isOdd(int i) {\r\n         return i % 2 == 1;\r\n    }\r\n\r\nbut as was mentioned in book: \r\n\r\n&gt; when the remainder operation returns a nonzero result, it has the same\r\n&gt; sign as its left operand\r\n\r\nso generally when we have negative odd number then instead of `1` we&#39;ll get `-1` as result of `i%2`. So we can use @Camilo solution or just do:\r\n\r\n    public static boolean isOdd(int i) {\r\n         return i % 2 != 0;\r\n    }\r\n\r\nbut generally the fastest solution is using AND operator like @lucasmo write above:\r\n\r\n    public static boolean isOdd(int i) {\r\n         return (i &amp; 1) != 0;\r\n    }\r\n\r\n@Edit\r\nIt also worth to point `Math.floorMod(int x, int y);` which deals good with negative the dividend but also can return `-1` if the divisor is negative","title":"Check whether number is even or odd","body":"<p>I would recommend </p>\n\n<blockquote>\n  <p>Java Puzzlers: Traps, Pitfalls, and Corner Cases Book by Joshua Bloch\n  and Neal Gafter</p>\n</blockquote>\n\n<p>There is a briefly explanation how to check if number is odd.\nFirst try is something similar what @AseemYadav tried:</p>\n\n<pre><code>public static boolean isOdd(int i) {\n     return i % 2 == 1;\n}\n</code></pre>\n\n<p>but as was mentioned in book: </p>\n\n<blockquote>\n  <p>when the remainder operation returns a nonzero result, it has the same\n  sign as its left operand</p>\n</blockquote>\n\n<p>so generally when we have negative odd number then instead of <code>1</code> we'll get <code>-1</code> as result of <code>i%2</code>. So we can use @Camilo solution or just do:</p>\n\n<pre><code>public static boolean isOdd(int i) {\n     return i % 2 != 0;\n}\n</code></pre>\n\n<p>but generally the fastest solution is using AND operator like @lucasmo write above:</p>\n\n<pre><code>public static boolean isOdd(int i) {\n     return (i &amp; 1) != 0;\n}\n</code></pre>\n\n<p>@Edit\nIt also worth to point <code>Math.floorMod(int x, int y);</code> which deals good with negative the dividend but also can return <code>-1</code> if the divisor is negative</p>\n"},{"tags":[],"owner":{"display_name":"user10544847"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1540281664,"creation_date":1540281664,"answer_id":52943992,"question_id":7342237,"body_markdown":"Least significant bit (rightmost) can be used to check if the number is even or odd.\r\nFor all Odd numbers, rightmost bit is always 1 in binary representation.\r\n\r\n    public static boolean checkOdd(long number){\r\n       return ((number &amp; 0x1) == 1);\r\n    }","title":"Check whether number is even or odd","body":"<p>Least significant bit (rightmost) can be used to check if the number is even or odd.\nFor all Odd numbers, rightmost bit is always 1 in binary representation.</p>\n\n<pre><code>public static boolean checkOdd(long number){\n   return ((number &amp; 0x1) == 1);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8761211,"reputation":149,"user_id":6552341,"display_name":"corneliouz Bett"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1565718041,"creation_date":1565718041,"answer_id":57482837,"question_id":7342237,"body_markdown":"If the modulus of the given number is equal to zero, the number is even else odd number. Below is the method that does that:\r\n\r\n    public void evenOrOddNumber(int number) {\r\n      if (number % 2 == 0) {\r\n        System.out.println(&quot;Number is Even&quot;);\r\n       } else {\r\n        System.out.println(&quot;Number is odd&quot;);\r\n      }\r\n     }","title":"Check whether number is even or odd","body":"<p>If the modulus of the given number is equal to zero, the number is even else odd number. Below is the method that does that:</p>\n\n<pre><code>public void evenOrOddNumber(int number) {\n  if (number % 2 == 0) {\n    System.out.println(\"Number is Even\");\n   } else {\n    System.out.println(\"Number is odd\");\n  }\n }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12511931,"reputation":3963,"user_id":9106684,"display_name":"duyuanchao"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1601315333,"creation_date":1601315333,"answer_id":64107144,"question_id":7342237,"body_markdown":"``` java\r\n    /**\r\n     * Check if a number is even or not using modulus operator.\r\n     *\r\n     * @param number the number to be checked.\r\n     * @return {@code true} if the given number is even, otherwise {@code false}.\r\n     */\r\n    public static boolean isEven(int number) {\r\n        return number % 2 == 0;\r\n    }\r\n\r\n    /**\r\n     * Check if a number is even or not using &amp; operator.\r\n     *\r\n     * @param number the number to be checked.\r\n     * @return {@code true} if the given number is even, otherwise {@code false}.\r\n     */\r\n    public static boolean isEvenFaster(int number) {\r\n        return (number &amp; 1) == 0;\r\n    }\r\n```\r\n[source](https://github.com/examplehub/Java/blob/master/src/main/java/com/examplehub/maths/EvenCheck.java)","title":"Check whether number is even or odd","body":"<pre class=\"lang-java prettyprint-override\"><code>    /**\n     * Check if a number is even or not using modulus operator.\n     *\n     * @param number the number to be checked.\n     * @return {@code true} if the given number is even, otherwise {@code false}.\n     */\n    public static boolean isEven(int number) {\n        return number % 2 == 0;\n    }\n\n    /**\n     * Check if a number is even or not using &amp; operator.\n     *\n     * @param number the number to be checked.\n     * @return {@code true} if the given number is even, otherwise {@code false}.\n     */\n    public static boolean isEvenFaster(int number) {\n        return (number &amp; 1) == 0;\n    }\n</code></pre>\n<p><a href=\"https://github.com/examplehub/Java/blob/master/src/main/java/com/examplehub/maths/EvenCheck.java\" rel=\"nofollow noreferrer\">source</a></p>\n"},{"tags":[],"owner":{"account_id":6965335,"reputation":65,"user_id":5367626,"display_name":"Alejandro Kolio"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700045688,"creation_date":1700045688,"answer_id":77487125,"question_id":7342237,"body_markdown":"    if ((x &amp; 1) == 0) {\r\n       // even\r\n    } else {\r\n       // odd\r\n    }\r\n\r\n    or\r\n    \r\n    if ((x % 2) == 0) {\r\n       // even\r\n    } else {\r\n       // odd\r\n    }\r\n\r\nPros:\r\n\r\nPerformance: Bitwise operations are usually faster than arithmetic operations like modulo. This is because they are performed directly on the binary representation of the number, which is a more efficient process at the hardware level. The behavior of bitwise operations is consistent across different programming languages and platforms.\r\n\r\nCons:\r\n\r\nReadability: For those not familiar with bitwise operations, this method might be less intuitive. It requires understanding how numbers are represented in binary form and how bitwise operations work.","title":"Check whether number is even or odd","body":"<pre><code>if ((x &amp; 1) == 0) {\n   // even\n} else {\n   // odd\n}\n\nor\n\nif ((x % 2) == 0) {\n   // even\n} else {\n   // odd\n}\n</code></pre>\n<p>Pros:</p>\n<p>Performance: Bitwise operations are usually faster than arithmetic operations like modulo. This is because they are performed directly on the binary representation of the number, which is a more efficient process at the hardware level. The behavior of bitwise operations is consistent across different programming languages and platforms.</p>\n<p>Cons:</p>\n<p>Readability: For those not familiar with bitwise operations, this method might be less intuitive. It requires understanding how numbers are represented in binary form and how bitwise operations work.</p>\n"}],"owner":{"account_id":896807,"reputation":1649,"user_id":933878,"display_name":"Josh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":537139,"favorite_count":0,"down_vote_count":7,"up_vote_count":166,"answer_count":17,"score":159,"last_activity_date":1700045688,"creation_date":1315445714,"question_id":7342237,"body_markdown":"How would I determine whether a given number is even or odd? I&#39;ve been wanting to figure this out for a long time now and haven&#39;t gotten anywhere.","title":"Check whether number is even or odd","body":"<p>How would I determine whether a given number is even or odd? I've been wanting to figure this out for a long time now and haven't gotten anywhere.</p>\n"},{"tags":["java","algorithm","puzzle"],"comments":[{"owner":{"account_id":2373933,"reputation":1989,"user_id":2077834,"display_name":"Gunjan Juyal"},"score":1,"creation_date":1396439984,"post_id":4703047,"comment_id":34786641,"body_markdown":"Your solution is O(N^2). You can do it in linear time instead of square using the following logic:\n1. Keep a running sum of odds/evens encountered\n2. For each odd number, additional pairs = number of odds encountered till now.\n\n\tpublic int findPairSumCount(int[] input) {\n\t\tint totPairsFoundTillNow = 0;\n\t\tint oddNosFound = 0, evenNosFound = 0;\n\n\t\tfor (int i = 0; i &lt; input.length; i++) {\n\t\t\tif (input[i] % 2 == 0) {\n\t\t\t\ttotPairsFoundTillNow += evenNosFound;\n\t\t\t\tevenNosFound++;\n\t\t\t}\n\t\t\telse {\n\t\t\t\ttotPairsFoundTillNow += oddNosFound;\n\t\t\t\toddNosFound++;\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn totPairsFoundTillNow;\n\t}","body":"Your solution is O(N^2). You can do it in linear time instead of square using the following logic: 1. Keep a running sum of odds/evens encountered 2. For each odd number, additional pairs = number of odds encountered till now.  \tpublic int findPairSumCount(int[] input) { \t\tint totPairsFoundTillNow = 0; \t\tint oddNosFound = 0, evenNosFound = 0;  \t\tfor (int i = 0; i &lt; input.length; i++) { \t\t\tif (input[i] % 2 == 0) { \t\t\t\ttotPairsFoundTillNow += evenNosFound; \t\t\t\tevenNosFound++; \t\t\t} \t\t\telse { \t\t\t\ttotPairsFoundTillNow += oddNosFound; \t\t\t\toddNosFound++; \t\t\t} \t\t} \t\t \t\treturn totPairsFoundTillNow; \t}"}],"answers":[{"tags":[],"owner":{"account_id":113085,"reputation":18448,"user_id":298029,"display_name":"fgb"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1487594184,"creation_date":1295140636,"answer_id":4703214,"question_id":4703047,"body_markdown":"You can find the sum without calculating every pair individually.\r\n\r\n`A[i]+A[j]` is even **if A[i] is even and A[j] is even**; or **A[i] is odd and A[j] is odd**.\r\n\r\nA running total of odd and even numbers up to j can be kept, and added to sum depending on whether **A[j] is odd or even**:\r\n\r\n\r\n\tint sum = 0;\r\n\r\n\tint odd = 0;\r\n\tint even = 0;\r\n\tfor(int j = 0; j &lt; A.length; j++) {\r\n\t\tif(A[j] % 2 == 0) {\r\n\t\t\tsum += even;\r\n\t\t\teven++;\r\n\t\t} else {\r\n\t\t\tsum += odd;\r\n\t\t\todd++;\r\n\t\t}\r\n\t}\r\n\r\n**Edit:**\r\n\r\nIf you look at `A={1,2,3,4,5}`, each value of j would add the number of pairs with `A[j]` as the second number.\r\n\r\n\tEven values:\r\n\tA[j]=2 - sum += 0\r\n\tA[j]=4 - sum += 1 - [2+4]\r\n\r\n\tOdd values:\r\n\tA[j]=1 - sum += 0\r\n\tA[j]=3 - sum += 1 - [1+3]\r\n\tA[j]=5 - sum += 2 - [1+5, 3+5]","title":"review of a codility test - pair_sum_even_count","body":"<p>You can find the sum without calculating every pair individually.</p>\n\n<p><code>A[i]+A[j]</code> is even <strong>if A[i] is even and A[j] is even</strong>; or <strong>A[i] is odd and A[j] is odd</strong>.</p>\n\n<p>A running total of odd and even numbers up to j can be kept, and added to sum depending on whether <strong>A[j] is odd or even</strong>:</p>\n\n<pre><code>int sum = 0;\n\nint odd = 0;\nint even = 0;\nfor(int j = 0; j &lt; A.length; j++) {\n    if(A[j] % 2 == 0) {\n        sum += even;\n        even++;\n    } else {\n        sum += odd;\n        odd++;\n    }\n}\n</code></pre>\n\n<p><strong>Edit:</strong></p>\n\n<p>If you look at <code>A={1,2,3,4,5}</code>, each value of j would add the number of pairs with <code>A[j]</code> as the second number.</p>\n\n<pre><code>Even values:\nA[j]=2 - sum += 0\nA[j]=4 - sum += 1 - [2+4]\n\nOdd values:\nA[j]=1 - sum += 0\nA[j]=3 - sum += 1 - [1+3]\nA[j]=5 - sum += 2 - [1+5, 3+5]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15120,"reputation":50844,"user_id":31615,"display_name":"Svante"},"down_vote_count":0,"up_vote_count":32,"is_accepted":true,"score":32,"last_activity_date":1295144653,"creation_date":1295144653,"answer_id":4703443,"question_id":4703047,"body_markdown":"The sum of two integers is even if and only if they are either both even or both odd.  You can simply go through the array and count evens and odds.  The number of possibilities to combine k numbers from a set of size _N_ is _N! / ((N - k)! &amp;middot; k!)_.  You just need to put the number of evens/odds as _N_ and 2 as _k_.  For this, the above simplifies to _(N &amp;middot; (N - 1)) / 2_.  All the condition `i &lt; j` does is to specify that each combination counts only once.\r\n","title":"review of a codility test - pair_sum_even_count","body":"<p>The sum of two integers is even if and only if they are either both even or both odd.  You can simply go through the array and count evens and odds.  The number of possibilities to combine k numbers from a set of size <em>N</em> is <em>N! / ((N - k)! &middot; k!)</em>.  You just need to put the number of evens/odds as <em>N</em> and 2 as <em>k</em>.  For this, the above simplifies to <em>(N &middot; (N - 1)) / 2</em>.  All the condition <code>i &lt; j</code> does is to specify that each combination counts only once.</p>\n"},{"tags":[],"owner":{"account_id":195529,"reputation":2593,"user_id":438466,"display_name":"Rabi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1297182973,"creation_date":1297182973,"answer_id":4935657,"question_id":4703047,"body_markdown":"A Java implementation that works great based on the answer by &quot;Svante&quot;:\r\n\r\n    int getNumSumsOfTwoEven(int[] a) {\r\n\r\n        long numOdd = 0;\r\n        long numEven = 0;\r\n        for(int i = 0; i &lt; a.length; i++) {\r\n            if(a[i] % 2 == 0) { //even\r\n                numOdd++;\r\n            } else {\r\n                numEven++;\r\n            }\r\n        }\r\n\r\n        //N! / ((N - k)! &#183; k!), where N = num. even nums or num odd nums, k = 2\r\n        long numSumOfTwoEven = (long)(fact(numOdd) / (fact(numOdd - 2) * 2));\r\n        numSumOfTwoEven += (long)(fact(numEven) / (fact(numEven - 2) * 2));\r\n\r\n        if(numSumOfTwoEven &gt; ((long)1e9)) {\r\n            return -1;\r\n        }\r\n        return numSumOfTwoEven;\r\n\r\n    }\r\n    // This is a recursive function to calculate factorials\r\n    long fact(int i) {\r\n        if(i == 0) {\r\n            return 1;\r\n        }\r\n        return i * fact(i-1);\r\n    }","title":"review of a codility test - pair_sum_even_count","body":"<p>A Java implementation that works great based on the answer by \"Svante\":</p>\n\n<pre><code>int getNumSumsOfTwoEven(int[] a) {\n\n    long numOdd = 0;\n    long numEven = 0;\n    for(int i = 0; i &lt; a.length; i++) {\n        if(a[i] % 2 == 0) { //even\n            numOdd++;\n        } else {\n            numEven++;\n        }\n    }\n\n    //N! / ((N - k)! · k!), where N = num. even nums or num odd nums, k = 2\n    long numSumOfTwoEven = (long)(fact(numOdd) / (fact(numOdd - 2) * 2));\n    numSumOfTwoEven += (long)(fact(numEven) / (fact(numEven - 2) * 2));\n\n    if(numSumOfTwoEven &gt; ((long)1e9)) {\n        return -1;\n    }\n    return numSumOfTwoEven;\n\n}\n// This is a recursive function to calculate factorials\nlong fact(int i) {\n    if(i == 0) {\n        return 1;\n    }\n    return i * fact(i-1);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":396764,"reputation":35,"user_id":760511,"display_name":"user760511"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1328821408,"creation_date":1308140288,"answer_id":6357558,"question_id":4703047,"body_markdown":"See this answer also\r\n\r\n    int returnNumOFOddEvenSum(int [] A){\r\n        int sumOdd=0;\r\n        int sumEven=0;\r\n\r\n        if(A.length==0)\r\n            return 0;\r\n\r\n        for(int i=0; i&lt;A.length; i++)\r\n        {\r\n            if(A[i]%2==0)\r\n                sumEven++;\r\n            else\r\n                sumOdd++;\r\n        }\r\n        return factSum(sumEven)+factSum(sumOdd);\r\n    }\r\n\r\n    int factSum(int num){\r\n        int sum=0;\r\n        for(int i=1; i&lt;=num-1; i++)\r\n        {\r\n            sum+=i;\r\n        }\r\n        return sum;\r\n    }","title":"review of a codility test - pair_sum_even_count","body":"<p>See this answer also</p>\n\n<pre><code>int returnNumOFOddEvenSum(int [] A){\n    int sumOdd=0;\n    int sumEven=0;\n\n    if(A.length==0)\n        return 0;\n\n    for(int i=0; i&lt;A.length; i++)\n    {\n        if(A[i]%2==0)\n            sumEven++;\n        else\n            sumOdd++;\n    }\n    return factSum(sumEven)+factSum(sumOdd);\n}\n\nint factSum(int num){\n    int sum=0;\n    for(int i=1; i&lt;=num-1; i++)\n    {\n        sum+=i;\n    }\n    return sum;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":105356,"reputation":2071,"user_id":281191,"accept_rate":0,"display_name":"goroncy"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1319619180,"creation_date":1319618825,"answer_id":7900493,"question_id":4703047,"body_markdown":"Please check this\r\n\r\n    if (A == null || A.length &lt; 2) {\r\n      return 0;\r\n    }\r\n\r\n    int evenNumbersCount = 0;\r\n    int oddNumberCount = 0;\r\n\r\n    for (int aA : A) {\r\n      if (aA % 2 == 0) {\r\n        evenNumbersCount++;\r\n      } else {\r\n        oddNumberCount++;\r\n      }\r\n    }\r\n\r\n    int i = (evenNumbersCount * (evenNumbersCount - 1)) / 2 + (oddNumberCount * (oddNumberCount - 1)) / 2;\r\n    return i &gt; 1000000000 ? -1 : i;\r\n\r\nIf someone has a problem with understanding what Sante said here is another explanation:\r\nOnly odd+odd and even+even gives even. You have to find how many even and odd numbers are there. When you have it imagine that this as a problem with a meeting. How many people distinkt pairs are in the odd numbers list and even numbers list. This is the same problem as how many pairs will say hallo to each other at the party. This is also the number of edges in full graph. The answer is n*(n-1)/2 because there are n people, and you have to shake n-1 peoples hands and divide by 2 because the other person cant count your shake as distinct one. As you have here two separate &quot;parties&quot; going on you have to count them independently.","title":"review of a codility test - pair_sum_even_count","body":"<p>Please check this</p>\n\n<pre><code>if (A == null || A.length &lt; 2) {\n  return 0;\n}\n\nint evenNumbersCount = 0;\nint oddNumberCount = 0;\n\nfor (int aA : A) {\n  if (aA % 2 == 0) {\n    evenNumbersCount++;\n  } else {\n    oddNumberCount++;\n  }\n}\n\nint i = (evenNumbersCount * (evenNumbersCount - 1)) / 2 + (oddNumberCount * (oddNumberCount - 1)) / 2;\nreturn i &gt; 1000000000 ? -1 : i;\n</code></pre>\n\n<p>If someone has a problem with understanding what Sante said here is another explanation:\nOnly odd+odd and even+even gives even. You have to find how many even and odd numbers are there. When you have it imagine that this as a problem with a meeting. How many people distinkt pairs are in the odd numbers list and even numbers list. This is the same problem as how many pairs will say hallo to each other at the party. This is also the number of edges in full graph. The answer is n*(n-1)/2 because there are n people, and you have to shake n-1 peoples hands and divide by 2 because the other person cant count your shake as distinct one. As you have here two separate \"parties\" going on you have to count them independently.</p>\n"},{"tags":[],"owner":{"account_id":1313029,"reputation":11,"user_id":1260598,"display_name":"Mathew_Kurian"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1331388663,"creation_date":1331353685,"answer_id":9643933,"question_id":4703047,"body_markdown":"    public int getEvenSumPairs(int[] array){\r\n\r\n        int even=0;\r\n        int odd=0;\r\n        int evenSum=0;\r\n\r\n         for(int j=0; j&lt;array.length; ++j){\r\n   \r\n               if(array[j]%2==0) even++;\r\n               else odd++;\r\n         }\r\n         evenSum=((even*(even-1)/2) + (odd *(odd-1)/2) ;\r\n         return evenSum;\r\n    }","title":"review of a codility test - pair_sum_even_count","body":"<pre><code>public int getEvenSumPairs(int[] array){\n\n    int even=0;\n    int odd=0;\n    int evenSum=0;\n\n     for(int j=0; j&lt;array.length; ++j){\n\n           if(array[j]%2==0) even++;\n           else odd++;\n     }\n     evenSum=((even*(even-1)/2) + (odd *(odd-1)/2) ;\n     return evenSum;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1440212,"reputation":7,"user_id":1360581,"display_name":"Subha Roy"},"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1335513179,"creation_date":1335513179,"answer_id":10346842,"question_id":4703047,"body_markdown":"\t\tint total = 0;\r\n\t\tint size = A.length;\r\n\t\tfor(int i=0; i &lt; size; i++) {\r\n\t\t\ttotal += (A[size-1] - A[i]) / 2;\r\n\t\t}\r\n\t\tSystem.out.println(&quot;Total : &quot; + total); ","title":"review of a codility test - pair_sum_even_count","body":"<pre><code>    int total = 0;\n    int size = A.length;\n    for(int i=0; i &lt; size; i++) {\n        total += (A[size-1] - A[i]) / 2;\n    }\n    System.out.println(\"Total : \" + total); \n</code></pre>\n"},{"tags":[],"owner":{"account_id":148524,"reputation":9330,"user_id":360362,"accept_rate":80,"display_name":"Meitham"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1377556033,"creation_date":1377556033,"answer_id":18454061,"question_id":4703047,"body_markdown":"Algorithms are boring, here is a python solution.\r\n\r\n    &gt;&gt;&gt; A = range(5)\r\n    &gt;&gt;&gt; A\r\n    [0, 1, 2, 3, 4]\r\n    &gt;&gt;&gt; even = lambda n: n % 2 == 0\r\n    &gt;&gt;&gt; [(i, j) for i in A for j in A[i+1:] if even(i+j)]\r\n    [(0, 2), (0, 4), (1, 3), (2, 4)]\r\n\r\nI will attempt another solution using vim.","title":"review of a codility test - pair_sum_even_count","body":"<p>Algorithms are boring, here is a python solution.</p>\n\n<pre><code>&gt;&gt;&gt; A = range(5)\n&gt;&gt;&gt; A\n[0, 1, 2, 3, 4]\n&gt;&gt;&gt; even = lambda n: n % 2 == 0\n&gt;&gt;&gt; [(i, j) for i in A for j in A[i+1:] if even(i+j)]\n[(0, 2), (0, 4), (1, 3), (2, 4)]\n</code></pre>\n\n<p>I will attempt another solution using vim.</p>\n"},{"tags":[],"owner":{"account_id":4896325,"reputation":41,"user_id":3945836,"display_name":"Slawomir Karczewski"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1408136048,"creation_date":1408136048,"answer_id":25334073,"question_id":4703047,"body_markdown":"It&#39;s very simple\r\nFirst you need to find the number of odds and even number in collection.\r\neg. x is odd if x&amp;1 ==1, even otherwise,\r\nif you have this, knowing that adding two even or two odds to each you get even.\r\nYou need to calc the sum of Combinations of two elements from Even numbers and Odd numbers.\r\n\r\nhaving int A[] = {1,2,3,4,5};\r\n\r\n    int odds=0, evens=0;\r\n    for (int i=0; i&lt; A.length; ++i)\r\n    {\r\n    if (A[i]&amp;1==1) odds++;\r\n    else evens++;\r\n    }\r\n    return odds*(odds-1)/2 + evens*(evens-1)/2;  \r\n\r\n// Above goes from fact that the number of possibilities to combine k numbers from a set of size N is N! / ((N - k)! &#183; k!). For k=2 this simplifies to (N &#183; (N - 1)) / 2\r\n\r\n","title":"review of a codility test - pair_sum_even_count","body":"<p>It's very simple\nFirst you need to find the number of odds and even number in collection.\neg. x is odd if x&amp;1 ==1, even otherwise,\nif you have this, knowing that adding two even or two odds to each you get even.\nYou need to calc the sum of Combinations of two elements from Even numbers and Odd numbers.</p>\n\n<p>having int A[] = {1,2,3,4,5};</p>\n\n<pre><code>int odds=0, evens=0;\nfor (int i=0; i&lt; A.length; ++i)\n{\nif (A[i]&amp;1==1) odds++;\nelse evens++;\n}\nreturn odds*(odds-1)/2 + evens*(evens-1)/2;  \n</code></pre>\n\n<p>// Above goes from fact that the number of possibilities to combine k numbers from a set of size N is N! / ((N - k)! · k!). For k=2 this simplifies to (N · (N - 1)) / 2</p>\n"},{"tags":[],"owner":{"account_id":5120276,"reputation":1,"user_id":4104094,"display_name":"msar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1412286752,"creation_date":1412286752,"answer_id":26170226,"question_id":4703047,"body_markdown":"You can get rid of the if/else statement and just have the following:\r\n\r\n    int pair_sum_v2( int A[], int N ) {\r\n    int totals[2] = { 0, 0 };\r\n\r\n    for (int i = 0; i &lt; N; i++ ) {\r\n        totals[ A[i] &amp; 0x01 ]++;\r\n        }\r\n\r\n    return ( totals[0] * (totals[0]-1) + totals[1] * (totals[1]-1) ) / 2;\r\n    }\r\n","title":"review of a codility test - pair_sum_even_count","body":"<p>You can get rid of the if/else statement and just have the following:</p>\n\n<pre><code>int pair_sum_v2( int A[], int N ) {\nint totals[2] = { 0, 0 };\n\nfor (int i = 0; i &lt; N; i++ ) {\n    totals[ A[i] &amp; 0x01 ]++;\n    }\n\nreturn ( totals[0] * (totals[0]-1) + totals[1] * (totals[1]-1) ) / 2;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5607989,"reputation":1,"user_id":4441813,"display_name":"Shahbaz Alam"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1453364123,"creation_date":1453360239,"answer_id":34917449,"question_id":4703047,"body_markdown":"Let count odd numbers as *n1* and count even numbers as *n2*.\r\n\r\nThe sum of `Pair(x,y)` is even, only if we choose both `x` and `y` from the set of even numbers or both `x` and `y` from odd set (selecting `x` from even set and `y` from odd set or vice-versa will always result in the pair&#39;s sum to be an odd number).\r\n \r\nSo total combination such that each pair&#39;s sum is even = `n1C2 + n2C2`.  \r\n\r\n    = (n1!) / ((n1-2)! * 2!) + (n2!) / ((n2-2)! * 2!)  \r\n    = (n1 * (n1 - 1)) / 2 + (n2 * (n2 - 1)) / 2 \r\n\r\n--- Equation 1.  \r\ne.g :  let the array be like: `{1,2,3,4,5}`  \r\nnumber of even numbers = *n1* = 2  \r\nnumber of odd numbers = *n2* = 2\r\n\r\nTotal pair such that the pair&#39;s sum is even from equation: `1 = (2*1)/2 + (3*2)/2 = 4`\r\nand the pairs are: `(1,3), (1,5), (2,4), (3,5)`.  \r\nGoing by traditional approach of adding and then checking might result in an integer overflow in programming on both positive as well as on negative extremes.","title":"review of a codility test - pair_sum_even_count","body":"<p>Let count odd numbers as <em>n1</em> and count even numbers as <em>n2</em>.</p>\n\n<p>The sum of <code>Pair(x,y)</code> is even, only if we choose both <code>x</code> and <code>y</code> from the set of even numbers or both <code>x</code> and <code>y</code> from odd set (selecting <code>x</code> from even set and <code>y</code> from odd set or vice-versa will always result in the pair's sum to be an odd number).</p>\n\n<p>So total combination such that each pair's sum is even = <code>n1C2 + n2C2</code>.  </p>\n\n<pre><code>= (n1!) / ((n1-2)! * 2!) + (n2!) / ((n2-2)! * 2!)  \n= (n1 * (n1 - 1)) / 2 + (n2 * (n2 - 1)) / 2 \n</code></pre>\n\n<p>--- Equation 1.<br>\ne.g :  let the array be like: <code>{1,2,3,4,5}</code><br>\nnumber of even numbers = <em>n1</em> = 2<br>\nnumber of odd numbers = <em>n2</em> = 2</p>\n\n<p>Total pair such that the pair's sum is even from equation: <code>1 = (2*1)/2 + (3*2)/2 = 4</code>\nand the pairs are: <code>(1,3), (1,5), (2,4), (3,5)</code>.<br>\nGoing by traditional approach of adding and then checking might result in an integer overflow in programming on both positive as well as on negative extremes.</p>\n"},{"tags":[],"owner":{"account_id":14807415,"reputation":1,"user_id":10693951,"display_name":"Emeka"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1542950131,"creation_date":1542950131,"answer_id":53440963,"question_id":4703047,"body_markdown":"This is some pythonic solution\r\n\r\n    x = [1,3,56,4,3,2,0,6,78,90]\r\n\r\n    def solution(x):\r\n        sumadjacent = [x[i]+x[i+1] for i in range(len(x)-1) if x[i] &lt; x[i+1]]\r\n        evenpairslist = [ True for j in sumadjacent if j%2==0]\r\n        return evenpairslist\r\n\r\n    if __name__==&quot;__main__&quot;:\r\n        result=solution(x)\r\n        print(len(result))","title":"review of a codility test - pair_sum_even_count","body":"<p>This is some pythonic solution</p>\n\n<pre><code>x = [1,3,56,4,3,2,0,6,78,90]\n\ndef solution(x):\n    sumadjacent = [x[i]+x[i+1] for i in range(len(x)-1) if x[i] &lt; x[i+1]]\n    evenpairslist = [ True for j in sumadjacent if j%2==0]\n    return evenpairslist\n\nif __name__==\"__main__\":\n    result=solution(x)\n    print(len(result))\n</code></pre>\n"},{"tags":[],"owner":{"account_id":29908223,"reputation":1,"user_id":22920269,"display_name":"Sini Gireesh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700045296,"creation_date":1700045296,"answer_id":77487088,"question_id":4703047,"body_markdown":"In C# language,\r\n\r\n     public static int findEvenPair(int[] a)\r\n     {\r\n         int odd = 0;\r\n         int even = 0;\r\n         for (int i = 0;i&lt;=a.Length;i++)\r\n         {\r\n             for (int j = 0; j &lt;= a.Length - 1; j++)\r\n             {\r\n                 if (i&lt;j)\r\n                 {\r\n                   \r\n                     int sum = a[i] + a[j];\r\n                     if (sum % 2 == 0)\r\n                         even++;\r\n                     else\r\n                         odd++;\r\n                 }\r\n             }\r\n\r\n         }\r\n             return even;\r\n     }","title":"review of a codility test - pair_sum_even_count","body":"<p>In C# language,</p>\n<pre><code> public static int findEvenPair(int[] a)\n {\n     int odd = 0;\n     int even = 0;\n     for (int i = 0;i&lt;=a.Length;i++)\n     {\n         for (int j = 0; j &lt;= a.Length - 1; j++)\n         {\n             if (i&lt;j)\n             {\n               \n                 int sum = a[i] + a[j];\n                 if (sum % 2 == 0)\n                     even++;\n                 else\n                     odd++;\n             }\n         }\n\n     }\n         return even;\n }\n</code></pre>\n"}],"owner":{"account_id":34723,"reputation":1520,"user_id":98155,"accept_rate":49,"display_name":"geoaxis"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":36934,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"accepted_answer_id":4703443,"answer_count":13,"score":11,"last_activity_date":1700045296,"creation_date":1295138021,"question_id":4703047,"body_markdown":"I recently took an online test on codility as part of a recruitment process. I was given two simple problems to solve in 1 hour. For those who don&#39;t know codility, its an online coding test site where you can solve ACM style problems in many different languages.\r\n\r\nIf you have 30 or so mins then check this http://codility.com/demo/run/\r\n\r\nMy weapon of choice is usually Java.\r\n\r\nSo, one of the problems I have is as follows (I will try to remember, should have taken a screenshot)\r\n\r\nLets say you have array A[0]=1 A[1]=-1 ....A[n]=x\r\n\r\nThen what would be the smartest way to find out the number of times when A[i]+A[j] is even where i &lt; j\r\n\r\nSo if we have {1,2,3,4,5}\r\nwe have 1+3 1+5 2+4 3+5 = 4 pairs which are even\r\n\r\nThe code I wrote was some thing along the lines \r\n\r\n    int sum=0;\r\n    for(int i=0;i&lt;A.length-1;i++){\r\n     for (int j=i+1;j&lt;A.length;j++){\r\n       if( ((A[i]+A[j])%2) == 0 &amp;&amp; i&lt;j) {\r\n           sum++;\r\n        }\r\n      }\r\n    }\r\n\r\nThere was one more restriction that if the number of pairs is greater than 1e9 then it should retrun -1, but lets forget it.\r\n\r\nCan you suggest a better solution for this. The number of elements won&#39;t exceed 1e9 in normal cases.\r\n\r\nI think I got 27 points deducted for the above code (ie it&#39;s not perfect). Codility gives out a detailed assessment of what went wrong, I don&#39;t have that right now.\r\n       \r\n","title":"review of a codility test - pair_sum_even_count","body":"<p>I recently took an online test on codility as part of a recruitment process. I was given two simple problems to solve in 1 hour. For those who don't know codility, its an online coding test site where you can solve ACM style problems in many different languages.</p>\n\n<p>If you have 30 or so mins then check this <a href=\"http://codility.com/demo/run/\" rel=\"noreferrer\">http://codility.com/demo/run/</a></p>\n\n<p>My weapon of choice is usually Java.</p>\n\n<p>So, one of the problems I have is as follows (I will try to remember, should have taken a screenshot)</p>\n\n<p>Lets say you have array A[0]=1 A[1]=-1 ....A[n]=x</p>\n\n<p>Then what would be the smartest way to find out the number of times when A[i]+A[j] is even where i &lt; j</p>\n\n<p>So if we have {1,2,3,4,5}\nwe have 1+3 1+5 2+4 3+5 = 4 pairs which are even</p>\n\n<p>The code I wrote was some thing along the lines </p>\n\n<pre><code>int sum=0;\nfor(int i=0;i&lt;A.length-1;i++){\n for (int j=i+1;j&lt;A.length;j++){\n   if( ((A[i]+A[j])%2) == 0 &amp;&amp; i&lt;j) {\n       sum++;\n    }\n  }\n}\n</code></pre>\n\n<p>There was one more restriction that if the number of pairs is greater than 1e9 then it should retrun -1, but lets forget it.</p>\n\n<p>Can you suggest a better solution for this. The number of elements won't exceed 1e9 in normal cases.</p>\n\n<p>I think I got 27 points deducted for the above code (ie it's not perfect). Codility gives out a detailed assessment of what went wrong, I don't have that right now.</p>\n"},{"tags":["java","html","url","uri","query-string"],"comments":[{"owner":{"account_id":62355,"reputation":12202,"user_id":185322,"accept_rate":67,"display_name":"martinez314"},"score":1,"creation_date":1403294942,"post_id":24334436,"comment_id":37618815,"body_markdown":"Fails how?  Can you give an example of the URI string?","body":"Fails how?  Can you give an example of the URI string?"},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":1,"creation_date":1403295191,"post_id":24334436,"comment_id":37618918,"body_markdown":"Works fine for me using JDK7 on Windows 7. Download and run the demo code from [How to Integrate with the Desktop Class](http://docs.oracle.com/javase/tutorial/uiswing/misc/desktop.html) and paste your URI into the demo for a test. Post your [SSCCE](http://sscce.org/) that demonstrates how you are testing your code and how you build the URI if you still need more help.","body":"Works fine for me using JDK7 on Windows 7. Download and run the demo code from <a href=\"http://docs.oracle.com/javase/tutorial/uiswing/misc/desktop.html\" rel=\"nofollow noreferrer\">How to Integrate with the Desktop Class</a> and paste your URI into the demo for a test. Post your <a href=\"http://sscce.org/\" rel=\"nofollow noreferrer\">SSCCE</a> that demonstrates how you are testing your code and how you build the URI if you still need more help."},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1403298705,"post_id":24334436,"comment_id":37620281,"body_markdown":"Did you look at the code from the tutorial? The code just accepts a string for the URI. Did you try that for your program? Did you print out the toString() representation to compare a hardcoded string with a generated String? Post your SSCCE that demonstrates the problem using a URI that we can access on the web. The code you provided doesn&#39;t tell us anything. We have no idea what programPath is.","body":"Did you look at the code from the tutorial? The code just accepts a string for the URI. Did you try that for your program? Did you print out the toString() representation to compare a hardcoded string with a generated String? Post your SSCCE that demonstrates the problem using a URI that we can access on the web. The code you provided doesn&#39;t tell us anything. We have no idea what programPath is."},{"owner":{"account_id":211735,"reputation":9951,"user_id":1202394,"accept_rate":88,"display_name":"smuggledPancakes"},"score":0,"creation_date":1403298906,"post_id":24334436,"comment_id":37620369,"body_markdown":"It is a local path on my computer, the program is an offline desktop application.","body":"It is a local path on my computer, the program is an offline desktop application."},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":1,"creation_date":1403299978,"post_id":24334436,"comment_id":37620814,"body_markdown":"I don&#39;t think a file URI supports a query string. I thought that was only for an HTTP URI. The query string is handled by the HTTP server, so unless you are running a server on your computer I don&#39;t think is will work. If you want to pass the version number then you need to build that into your file name, maybe by having a directory structure for each version. Again post your SSCCE that shows how the code works for a hardcoded URI.","body":"I don&#39;t think a file URI supports a query string. I thought that was only for an HTTP URI. The query string is handled by the HTTP server, so unless you are running a server on your computer I don&#39;t think is will work. If you want to pass the version number then you need to build that into your file name, maybe by having a directory structure for each version. Again post your SSCCE that shows how the code works for a hardcoded URI."},{"owner":{"account_id":935202,"reputation":49036,"user_id":964243,"accept_rate":66,"display_name":"Boann"},"score":1,"creation_date":1403352039,"post_id":24334436,"comment_id":37630547,"body_markdown":"Could you put the version variable in a hashbang fragment instead of the query? Since you have to handle it with JavaScript anyway, it is just as useful.","body":"Could you put the version variable in a hashbang fragment instead of the query? Since you have to handle it with JavaScript anyway, it is just as useful."},{"owner":{"account_id":211735,"reputation":9951,"user_id":1202394,"accept_rate":88,"display_name":"smuggledPancakes"},"score":0,"creation_date":1403445811,"post_id":24334436,"comment_id":37651559,"body_markdown":"I am not even sure what a hashbag fragment is. I am guessing that you are referring to the fragment parameter in the URI class. It appears after the pound sign... I will have to try that when I have a chance at work tomorrow.","body":"I am not even sure what a hashbag fragment is. I am guessing that you are referring to the fragment parameter in the URI class. It appears after the pound sign... I will have to try that when I have a chance at work tomorrow."}],"answers":[{"tags":[],"owner":{"account_id":211735,"reputation":9951,"user_id":1202394,"accept_rate":88,"display_name":"smuggledPancakes"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1403536610,"creation_date":1403536610,"answer_id":24369499,"question_id":24334436,"body_markdown":"Okay so I never got it working the way I wanted to, but if I use the URI constructor that just takes a string and then I feed it the path as normal which always worked and then add &quot;# + versionNumberVar&quot;; then it works! It is frustrating because it won&#39;t work with &quot;?version=&quot; + versionNumberVar but I have what I need finally. Also, those other constructors do not work for me which is surprising. Unfortunately the URI error messages are cryptic and it just says &quot;Failed to show URI&quot;.","title":"Setting a query string from Java&#39;s Desktop.getDesktop().browse(URI uri);","body":"<p>Okay so I never got it working the way I wanted to, but if I use the URI constructor that just takes a string and then I feed it the path as normal which always worked and then add \"# + versionNumberVar\"; then it works! It is frustrating because it won't work with \"?version=\" + versionNumberVar but I have what I need finally. Also, those other constructors do not work for me which is surprising. Unfortunately the URI error messages are cryptic and it just says \"Failed to show URI\".</p>\n"},{"tags":[],"owner":{"account_id":95465,"reputation":1155,"user_id":259988,"display_name":"Francois Marot"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700044673,"creation_date":1700044673,"answer_id":77487011,"question_id":24334436,"body_markdown":"I think it comes from the way windows handle (or removes) query params for local html files. It may be related to security issues... Nevertheless I had the exact same requirements as you and finally found this answer by @arcticLord: https://stackoverflow.com/a/36387920/259988\r\n\r\nYou have to introduce a temporary ","title":"Setting a query string from Java&#39;s Desktop.getDesktop().browse(URI uri);","body":"<p>I think it comes from the way windows handle (or removes) query params for local html files. It may be related to security issues... Nevertheless I had the exact same requirements as you and finally found this answer by @arcticLord: <a href=\"https://stackoverflow.com/a/36387920/259988\">https://stackoverflow.com/a/36387920/259988</a></p>\n<p>You have to introduce a temporary</p>\n"}],"owner":{"account_id":211735,"reputation":9951,"user_id":1202394,"accept_rate":88,"display_name":"smuggledPancakes"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":683,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":24369499,"answer_count":2,"score":4,"last_activity_date":1700044673,"creation_date":1403292821,"question_id":24334436,"body_markdown":"I have tried googling but I cannot find an answer. I am writing a pure Java Desktop application. The help system launches by using the Desktop class browse function and giving it a URI. When I add a &quot;?&lt;someQueryString&gt; then the URI fails in Java. I want to pass the program version number to my offline help page in the browser, but I cannot figure out how to set a query string.\r\n\r\nI am running on RedHat 6. I am using this code:\r\n\r\n    uri = new URI(&quot;file&quot;, &quot;&quot;, programPath, &quot;version=1.0.3&quot;, &quot;&quot;);\r\n    Desktop.getDesktop().browse(uri);\r\n\r\nI get an IOException on the browse function. All it says is that &quot;Failed to show URI:&lt;full uri path&gt;&quot;\r\n\r\nIf I take that full uri path and paste it in my browser, it works. I am completely stumped by this...\r\n\r\n","title":"Setting a query string from Java&#39;s Desktop.getDesktop().browse(URI uri);","body":"<p>I have tried googling but I cannot find an answer. I am writing a pure Java Desktop application. The help system launches by using the Desktop class browse function and giving it a URI. When I add a \"? then the URI fails in Java. I want to pass the program version number to my offline help page in the browser, but I cannot figure out how to set a query string.</p>\n\n<p>I am running on RedHat 6. I am using this code:</p>\n\n<pre><code>uri = new URI(\"file\", \"\", programPath, \"version=1.0.3\", \"\");\nDesktop.getDesktop().browse(uri);\n</code></pre>\n\n<p>I get an IOException on the browse function. All it says is that \"Failed to show URI:\"</p>\n\n<p>If I take that full uri path and paste it in my browser, it works. I am completely stumped by this...</p>\n"},{"tags":["java","list"],"comments":[{"owner":{"account_id":19118721,"reputation":6319,"user_id":13963086,"display_name":"k314159"},"score":3,"creation_date":1699878804,"post_id":77473755,"comment_id":136582187,"body_markdown":"To the person recommending &quot;Close&quot; due to being &quot;opinion-based&quot;: how can it _possibly_ be opinion-based? It either is or isn&#39;t unsafe to omit copying the list. If it is unsafe, you should be able to describe a scenario whereby the safety can be compromised. If it is safe, you should be able to prove it. Nothing opinion-based there.","body":"To the person recommending &quot;Close&quot; due to being &quot;opinion-based&quot;: how can it <i>possibly</i> be opinion-based? It either is or isn&#39;t unsafe to omit copying the list. If it is unsafe, you should be able to describe a scenario whereby the safety can be compromised. If it is safe, you should be able to prove it. Nothing opinion-based there."},{"owner":{"account_id":3273747,"reputation":20854,"user_id":2756409,"accept_rate":100,"display_name":"TylerH"},"score":0,"creation_date":1699977869,"post_id":77473755,"comment_id":136596964,"body_markdown":"Probably because you have not defined with &#39;safe&#39; means. What you consider safe someone else might consider unsafe. Until that is defined this question is a matter of opinion. It&#39;s also more than a little broad. Furthermore, what do you mean by &quot;sufficient&quot; in your first question? Sufficient for what? To compile? To run? To achieve the desired outcome? Something else?","body":"Probably because you have not defined with &#39;safe&#39; means. What you consider safe someone else might consider unsafe. Until that is defined this question is a matter of opinion. It&#39;s also more than a little broad. Furthermore, what do you mean by &quot;sufficient&quot; in your first question? Sufficient for what? To compile? To run? To achieve the desired outcome? Something else?"}],"answers":[{"tags":[],"owner":{"account_id":5559246,"reputation":3573,"user_id":4409319,"accept_rate":70,"display_name":"JSelser"},"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1699880008,"creation_date":1699878454,"answer_id":77473887,"question_id":77473755,"body_markdown":"I don&#39;t have an answer but I find the implementation of `Arrays.asList()` funny, since it also creates a list inside:\r\n\r\n```\r\n    public static &lt;T&gt; List&lt;T&gt; asList(T... a) {\r\n        return new ArrayList&lt;&gt;(a);\r\n    }\r\n```\r\n\r\nI wonder what happened, maybe its one of those: &quot;this only applies to certain VMs so cant be guaranteed&quot;\r\n\r\nIf you are not writing a library I wouldn&#39;t mind to much to be honest. `T` would also need to be immutable for true safety btw.\r\n\r\nEDIT: intresting stuff, apparently this `ArrayList` is a different `ArrayList`, *nothing strange*","title":"Is it necessary to copy a list to be safe?","body":"<p>I don't have an answer but I find the implementation of <code>Arrays.asList()</code> funny, since it also creates a list inside:</p>\n<pre><code>    public static &lt;T&gt; List&lt;T&gt; asList(T... a) {\n        return new ArrayList&lt;&gt;(a);\n    }\n</code></pre>\n<p>I wonder what happened, maybe its one of those: &quot;this only applies to certain VMs so cant be guaranteed&quot;</p>\n<p>If you are not writing a library I wouldn't mind to much to be honest. <code>T</code> would also need to be immutable for true safety btw.</p>\n<p>EDIT: intresting stuff, apparently this <code>ArrayList</code> is a different <code>ArrayList</code>, <em>nothing strange</em></p>\n"},{"tags":[],"owner":{"account_id":11244318,"reputation":389,"user_id":8247530,"display_name":"Rifat Rubayatul Islam"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1699902350,"creation_date":1699878779,"answer_id":77473921,"question_id":77473755,"body_markdown":"## Unmodifiable *view* backed by a modifiable collection\r\n\r\nFrom the [Javadoc](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Collection.html#unmodview) (emphasis mine):\r\n\r\n&gt; An unmodifiable view collection is a collection that is unmodifiable and that is also a view onto a backing collection. Its mutator methods throw UnsupportedOperationException, as described above, while reading and querying methods are delegated to the backing collection. The effect is to provide read-only access to the backing collection. This is useful for a component to provide users with read access to an internal collection, while preventing them from modifying such collections unexpectedly. Examples of unmodifiable view collections are those returned by the Collections.unmodifiableCollection, Collections.unmodifiableList, and related methods.\r\n\r\n&gt; Note that **changes to the backing collection might still be possible, and if they occur, they are visible through the unmodifiable view**. Thus, an unmodifiable view collection is not necessarily immutable. However, if the backing collection of an unmodifiable view is effectively immutable, or if the only reference to the backing collection is through an unmodifiable view, the view can be considered effectively immutable. \r\n\r\nAs the `Collections.unmodifiableList` returns a `unmodifiable view` of the backing list, it is still possible to modify the backing list which will impact the unmodifiable list. Now, the list is in turn backed by the array provided in the `Arrays.asList` method. So, everything depends on `this.toArray()`. As it is inside a default method of the `Stream` interface, it is dependent on the actual implementation of the stream whether `toArray()` returns a something modifiable or not. That&#39;s why it needs to be copied. \r\n","title":"Is it necessary to copy a list to be safe?","body":"<h2>Unmodifiable <em>view</em> backed by a modifiable collection</h2>\n<p>From the <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Collection.html#unmodview\" rel=\"nofollow noreferrer\">Javadoc</a> (emphasis mine):</p>\n<blockquote>\n<p>An unmodifiable view collection is a collection that is unmodifiable and that is also a view onto a backing collection. Its mutator methods throw UnsupportedOperationException, as described above, while reading and querying methods are delegated to the backing collection. The effect is to provide read-only access to the backing collection. This is useful for a component to provide users with read access to an internal collection, while preventing them from modifying such collections unexpectedly. Examples of unmodifiable view collections are those returned by the Collections.unmodifiableCollection, Collections.unmodifiableList, and related methods.</p>\n</blockquote>\n<blockquote>\n<p>Note that <strong>changes to the backing collection might still be possible, and if they occur, they are visible through the unmodifiable view</strong>. Thus, an unmodifiable view collection is not necessarily immutable. However, if the backing collection of an unmodifiable view is effectively immutable, or if the only reference to the backing collection is through an unmodifiable view, the view can be considered effectively immutable.</p>\n</blockquote>\n<p>As the <code>Collections.unmodifiableList</code> returns a <code>unmodifiable view</code> of the backing list, it is still possible to modify the backing list which will impact the unmodifiable list. Now, the list is in turn backed by the array provided in the <code>Arrays.asList</code> method. So, everything depends on <code>this.toArray()</code>. As it is inside a default method of the <code>Stream</code> interface, it is dependent on the actual implementation of the stream whether <code>toArray()</code> returns a something modifiable or not. That's why it needs to be copied.</p>\n"},{"tags":[],"owner":{"account_id":24672893,"reputation":73,"user_id":18567686,"display_name":"Magic Developement"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699878803,"creation_date":1699878803,"answer_id":77473925,"question_id":77473755,"body_markdown":"The reason for creating a new ArrayList in the implementation you provided is to ensure that the returned list is truly unmodifiable. The Arrays.asList method returns a fixed-size list backed by the original array.\r\n\r\nAn alternative and more modern approach to obtaining an unmodifiable list is to use the Collectors.toUnmodifiableList() method from the Stream API. For example:\r\n\r\n&gt; Arrays.stream(this.toArray()).collect(Collectors.toUnmodifiableList());\r\n\r\nThis approach directly produces an unmodifiable list without the need for creating an intermediate ArrayList. I hope this suggestion proves helpful.\r\n\r\n\r\n\r\n\r\n\r\n","title":"Is it necessary to copy a list to be safe?","body":"<p>The reason for creating a new ArrayList in the implementation you provided is to ensure that the returned list is truly unmodifiable. The Arrays.asList method returns a fixed-size list backed by the original array.</p>\n<p>An alternative and more modern approach to obtaining an unmodifiable list is to use the Collectors.toUnmodifiableList() method from the Stream API. For example:</p>\n<blockquote>\n<p>Arrays.stream(this.toArray()).collect(Collectors.toUnmodifiableList());</p>\n</blockquote>\n<p>This approach directly produces an unmodifiable list without the need for creating an intermediate ArrayList. I hope this suggestion proves helpful.</p>\n"},{"tags":[],"owner":{"account_id":401843,"reputation":89758,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1699915581,"creation_date":1699881593,"answer_id":77474199,"question_id":77473755,"body_markdown":"## It has a purpose\r\n\r\n&gt; I&#39;m wondering why the list returned by Arrays.asList needs to be copied to a new ArrayList. Would it not be sufficient to just return the following?\r\n\r\nWhich `.toArray()` are we talking about? If we&#39;re talking about the one from `j.u.Collection`, you&#39;re right: The javadoc of that `toArray()` method _guarantees_ that it is a newly allocated array, hence, no need to make a defensive copy. However, that&#39;s not the `toArray()` involved here: We&#39;re talking about `j.u.s.Stream`&#39;s `.toArray()`. Its javadoc is a lot shorter:\r\n\r\n```\r\n    /**\r\n     * Returns an array containing the elements of this stream.\r\n     *\r\n     * &lt;p&gt;This is a &lt;a href=&quot;package-summary.html#StreamOps&quot;&gt;terminal\r\n     * operation&lt;/a&gt;.\r\n     *\r\n     * @return an array, whose {@linkplain Class#getComponentType runtime component\r\n     * type} is {@code Object}, containing the elements of this stream\r\n     */\r\n```\r\n\r\nUnlike `j.u.Collection toArray()`, this javadoc makes no notes either way about the nature of that array. Hence, evidently, the default impl in the `Stream` javadoc does not presume the array is necessarily &#39;safe&#39; (&#39;safe&#39; in the sense: Will not later be modified).\r\n\r\nI think you know, but just to be crystal clear:\r\n\r\n`Arrays.asList` is almost always a mistake. It&#39;s a worst-of-both-worlds list: It creates a light wrapper around the array you pass to it. So, `set()` works (because `foo[x] = value;` is possible and indeed, is how that is implemented), but `.add()` doesn&#39;t (because you can&#39;t change the size of an array). The list is not immutable (i.e. if passing it to code outside of your direct control you need to extensively document, or, make a defensive copy), but also not a fully featured list. Use `List.of` instead, which makes fully immutable lists - lists you can pass around to whomever you like without worrying about losing control of integrity.\r\n\r\nEDIT: And to explain why its `Collections.unmodifiableList(new ArrayList&lt;...`) instead of `List.copyOf` - The immutable lists that those static methods on `List` make throw NPEs when `null` is in there, but streams can have `null`, so you can&#39;t use that. This edit brought to you by a comment from @Rob Spoor :)\r\n\r\n## This is not as big an issue as you think, though\r\n\r\nNote that the code you found is merely the default implementation - any particular implementation of stream is free to come up with a better way to do this. Just about every implementation you are bound to run into overrides the definition. For example, if you call an arraylist&#39;s `stream()`, you end up with this implementation instead, which is from streamops and is the same code path used by all the collections in the core libs. Hence, the actual code you end up using, is this:\r\n\r\n```\r\n    @Override\r\n    public List&lt;P_OUT&gt; toList() {\r\n        return SharedSecrets.getJavaUtilCollectionAccess()\r\n        .listFromTrustedArrayNullsAllowed(this.toArray());\r\n    }\r\n```\r\n\r\n&#39;trusted array&#39; here refers to the notion that the array passed to it is guaranteed not going to change out from under you. There is no way the compiler can enforce that guarantee, but arraylist&#39;s (and indeed, all non-broken collections, given that the javadoc of `j.u.Collection` demands it!) `toArray()` makes new arrays so it&#39;s safe to do that, and this is far more efficient (avoids a bunch of needless copies).\r\n","title":"Is it necessary to copy a list to be safe?","body":"<h2>It has a purpose</h2>\n<blockquote>\n<p>I'm wondering why the list returned by Arrays.asList needs to be copied to a new ArrayList. Would it not be sufficient to just return the following?</p>\n</blockquote>\n<p>Which <code>.toArray()</code> are we talking about? If we're talking about the one from <code>j.u.Collection</code>, you're right: The javadoc of that <code>toArray()</code> method <em>guarantees</em> that it is a newly allocated array, hence, no need to make a defensive copy. However, that's not the <code>toArray()</code> involved here: We're talking about <code>j.u.s.Stream</code>'s <code>.toArray()</code>. Its javadoc is a lot shorter:</p>\n<pre><code>    /**\n     * Returns an array containing the elements of this stream.\n     *\n     * &lt;p&gt;This is a &lt;a href=&quot;package-summary.html#StreamOps&quot;&gt;terminal\n     * operation&lt;/a&gt;.\n     *\n     * @return an array, whose {@linkplain Class#getComponentType runtime component\n     * type} is {@code Object}, containing the elements of this stream\n     */\n</code></pre>\n<p>Unlike <code>j.u.Collection toArray()</code>, this javadoc makes no notes either way about the nature of that array. Hence, evidently, the default impl in the <code>Stream</code> javadoc does not presume the array is necessarily 'safe' ('safe' in the sense: Will not later be modified).</p>\n<p>I think you know, but just to be crystal clear:</p>\n<p><code>Arrays.asList</code> is almost always a mistake. It's a worst-of-both-worlds list: It creates a light wrapper around the array you pass to it. So, <code>set()</code> works (because <code>foo[x] = value;</code> is possible and indeed, is how that is implemented), but <code>.add()</code> doesn't (because you can't change the size of an array). The list is not immutable (i.e. if passing it to code outside of your direct control you need to extensively document, or, make a defensive copy), but also not a fully featured list. Use <code>List.of</code> instead, which makes fully immutable lists - lists you can pass around to whomever you like without worrying about losing control of integrity.</p>\n<p>EDIT: And to explain why its <code>Collections.unmodifiableList(new ArrayList&lt;...</code>) instead of <code>List.copyOf</code> - The immutable lists that those static methods on <code>List</code> make throw NPEs when <code>null</code> is in there, but streams can have <code>null</code>, so you can't use that. This edit brought to you by a comment from @Rob Spoor :)</p>\n<h2>This is not as big an issue as you think, though</h2>\n<p>Note that the code you found is merely the default implementation - any particular implementation of stream is free to come up with a better way to do this. Just about every implementation you are bound to run into overrides the definition. For example, if you call an arraylist's <code>stream()</code>, you end up with this implementation instead, which is from streamops and is the same code path used by all the collections in the core libs. Hence, the actual code you end up using, is this:</p>\n<pre><code>    @Override\n    public List&lt;P_OUT&gt; toList() {\n        return SharedSecrets.getJavaUtilCollectionAccess()\n        .listFromTrustedArrayNullsAllowed(this.toArray());\n    }\n</code></pre>\n<p>'trusted array' here refers to the notion that the array passed to it is guaranteed not going to change out from under you. There is no way the compiler can enforce that guarantee, but arraylist's (and indeed, all non-broken collections, given that the javadoc of <code>j.u.Collection</code> demands it!) <code>toArray()</code> makes new arrays so it's safe to do that, and this is far more efficient (avoids a bunch of needless copies).</p>\n"},{"tags":[],"owner":{"account_id":10777133,"reputation":7282,"user_id":7928721,"display_name":"samabcde"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1699890065,"creation_date":1699890065,"answer_id":77475089,"question_id":77473755,"body_markdown":"## When talking about **_safe_**, we usually refer to whether the object is [immutable][1]\r\n\r\n- `unmodifiableList` -&gt; **unmodifiable** here only guarantee caller can not change the state of wrapped list, and change of source will still be reflected in the wrapped list.  \r\n- `new ArrayList&lt;&gt;` -&gt; **defensive copy** means modifying source will not change the state of the copy and vice versa.\r\n- **unmodifiable** + **defensive copy** -&gt; **immutable**, you can assume the list always hold the same list of object reference.\r\n\r\n## Concrete example to demonstrate the difference\r\n\r\n```java\r\nimport java.util.ArrayList;\r\nimport java.util.Arrays;\r\nimport java.util.Collections;\r\nimport java.util.List;\r\n\r\npublic class UnmodifiableListCopy {\r\n    public static void main(String[] args) {\r\n        String[] source = new String[]{&quot;dummy&quot;};\r\n        List&lt;String&gt; unmodifiable = unmodifiableListWithoutCopy(source);\r\n        List&lt;String&gt; immutable = unmodifiableListWithCopy(source);\r\n        System.out.println(&quot;unmodifiable:&quot; + unmodifiable);\r\n        System.out.println(&quot;immutable:&quot; + immutable);\r\n        source[0] = &quot;modified&quot;;\r\n        System.out.println(&quot;--- change source ---&quot;);\r\n        System.out.println(&quot;unmodifiable:&quot; + unmodifiable);\r\n        System.out.println(&quot;immutable:&quot; + immutable);\r\n    }\r\n\r\n    private static &lt;T&gt; List&lt;T&gt; unmodifiableListWithoutCopy(T[] arr) {\r\n        return Collections.unmodifiableList(Arrays.asList(arr));\r\n    }\r\n\r\n    private static &lt;T&gt; List&lt;T&gt; unmodifiableListWithCopy(T[] arr) {\r\n        return Collections.unmodifiableList(new ArrayList&lt;&gt;(Arrays.asList(arr)));\r\n    }\r\n}\r\n```\r\nYou should see below when you run the code. \r\n```\r\nunmodifiable:[dummy]\r\nimmutable:[dummy]\r\n--- change source ---\r\nunmodifiable:[modified]\r\nimmutable:[dummy]\r\n```\r\n\r\nReference\r\n- https://stackoverflow.com/q/8892350/7928721\r\n\r\n  [1]: https://docs.oracle.com/javase/tutorial/essential/concurrency/immutable.html","title":"Is it necessary to copy a list to be safe?","body":"<h2>When talking about <strong><em>safe</em></strong>, we usually refer to whether the object is <a href=\"https://docs.oracle.com/javase/tutorial/essential/concurrency/immutable.html\" rel=\"nofollow noreferrer\">immutable</a></h2>\n<ul>\n<li><code>unmodifiableList</code> -&gt; <strong>unmodifiable</strong> here only guarantee caller can not change the state of wrapped list, and change of source will still be reflected in the wrapped list.</li>\n<li><code>new ArrayList&lt;&gt;</code> -&gt; <strong>defensive copy</strong> means modifying source will not change the state of the copy and vice versa.</li>\n<li><strong>unmodifiable</strong> + <strong>defensive copy</strong> -&gt; <strong>immutable</strong>, you can assume the list always hold the same list of object reference.</li>\n</ul>\n<h2>Concrete example to demonstrate the difference</h2>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.ArrayList;\nimport java.util.Arrays;\nimport java.util.Collections;\nimport java.util.List;\n\npublic class UnmodifiableListCopy {\n    public static void main(String[] args) {\n        String[] source = new String[]{&quot;dummy&quot;};\n        List&lt;String&gt; unmodifiable = unmodifiableListWithoutCopy(source);\n        List&lt;String&gt; immutable = unmodifiableListWithCopy(source);\n        System.out.println(&quot;unmodifiable:&quot; + unmodifiable);\n        System.out.println(&quot;immutable:&quot; + immutable);\n        source[0] = &quot;modified&quot;;\n        System.out.println(&quot;--- change source ---&quot;);\n        System.out.println(&quot;unmodifiable:&quot; + unmodifiable);\n        System.out.println(&quot;immutable:&quot; + immutable);\n    }\n\n    private static &lt;T&gt; List&lt;T&gt; unmodifiableListWithoutCopy(T[] arr) {\n        return Collections.unmodifiableList(Arrays.asList(arr));\n    }\n\n    private static &lt;T&gt; List&lt;T&gt; unmodifiableListWithCopy(T[] arr) {\n        return Collections.unmodifiableList(new ArrayList&lt;&gt;(Arrays.asList(arr)));\n    }\n}\n</code></pre>\n<p>You should see below when you run the code.</p>\n<pre><code>unmodifiable:[dummy]\nimmutable:[dummy]\n--- change source ---\nunmodifiable:[modified]\nimmutable:[dummy]\n</code></pre>\n<p>Reference</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/q/8892350/7928721\">Immutable vs Unmodifiable collection</a></li>\n</ul>\n"}],"owner":{"account_id":19118721,"reputation":6319,"user_id":13963086,"display_name":"k314159"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":171,"favorite_count":0,"down_vote_count":2,"up_vote_count":5,"accepted_answer_id":77474199,"answer_count":5,"score":3,"last_activity_date":1700044495,"creation_date":1699876965,"question_id":77473755,"body_markdown":"The implementation (and documentation) of [Stream.toList][1] is like this:\r\n\r\n```java\r\nCollections.unmodifiableList(new ArrayList&lt;&gt;(Arrays.asList(this.toArray())))\r\n```\r\n\r\nI&#39;m wondering why the list returned by `Arrays.asList` needs to be copied to a new `ArrayList`. Would it not be sufficient to just return the following?\r\n\r\n```java\r\nCollections.unmodifiableList(Arrays.asList(this.toArray()))\r\n```\r\n\r\nI would like to know, if I write a method that returns a list that it creates like this, would there be any issues if I didn&#39;t bother to make a defensive copy of it?\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/stream/Stream.html#toList()","title":"Is it necessary to copy a list to be safe?","body":"<p>The implementation (and documentation) of <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/stream/Stream.html#toList()\" rel=\"nofollow noreferrer\">Stream.toList</a> is like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Collections.unmodifiableList(new ArrayList&lt;&gt;(Arrays.asList(this.toArray())))\n</code></pre>\n<p>I'm wondering why the list returned by <code>Arrays.asList</code> needs to be copied to a new <code>ArrayList</code>. Would it not be sufficient to just return the following?</p>\n<pre class=\"lang-java prettyprint-override\"><code>Collections.unmodifiableList(Arrays.asList(this.toArray()))\n</code></pre>\n<p>I would like to know, if I write a method that returns a list that it creates like this, would there be any issues if I didn't bother to make a defensive copy of it?</p>\n"},{"tags":["java","unit-testing","mocking"],"owner":{"account_id":29772902,"reputation":49,"user_id":22817655,"display_name":"Kodigas"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1700044000,"creation_date":1700043357,"question_id":77486853,"body_markdown":"***Note.** I read a number of SO posts on the matter, including [this one][1]*\r\n\r\nHere&#39;s the [classification][2] Martin Fowler uses:\r\n\r\n&gt; **Dummy** objects are passed around but never actually used. Usually they are just used to fill parameter lists.\r\n&gt; \r\n&gt; **Fake** objects actually have working implementations, but usually take\r\n&gt; some shortcut which makes them not suitable for production (an in\r\n&gt; memory database is a good example). \r\n&gt;\r\n&gt; **Stubs** provide canned answers to\r\n&gt; calls made during the test, usually not responding at all to anything\r\n&gt; outside what&#39;s programmed in for the test. \r\n&gt;\r\n&gt; **Spies** are stubs that also\r\n&gt; record some information based on how they were called. One form of\r\n&gt; this might be an email service that records how many messages it was\r\n&gt; sent.\r\n&gt;\r\n&gt; **Mocks** are what we are talking about here: objects pre-programmed\r\n&gt; with expectations which form a specification of the calls they are\r\n&gt; expected to receive.\r\n&gt;\r\n&gt; Of these kinds of doubles, *only mocks insist upon behavior verification*.\r\n\r\nSo dummies are used in conjunction with *state verification*, mocks are used with *behavior verification*. But then where do spies go here? I know how the term is used by Mockito (a real object with partially mocked behavior), but what is a mock in the &quot;standard&quot; test double classification as described by Fowler (who took it from the [&quot;xUnit Test Patterns&quot; book][3] by Gerard Meszaros)?\r\n\r\nAlso, how do the three relate to each other? Is, for example, one a special case of another? Fowler said spy *is a* stub (spy is a special case of stub), whereas [this article][4] says a mock *is a combination* of stub and spy (mock = stub + spy)\r\n\r\nI made a number of attempts at resolving all of this in my head, but so far haven&#39;t managed that\r\n\r\nJava examples with Junit + Mockito (+ AssertJ, if you want) would be great\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/346372/whats-the-difference-between-faking-mocking-and-stubbing/61209739#61209739\r\n  [2]: https://martinfowler.com/articles/mocksArentStubs.html\r\n  [3]: https://martinfowler.com/books/meszaros.html\r\n  [4]: https://tanzu.vmware.com/developer/guides/test-doubles/","title":"What is the difference between stubs, mocks, and spies as described by Meszaros?","body":"<p><em><strong>Note.</strong> I read a number of SO posts on the matter, including <a href=\"https://stackoverflow.com/questions/346372/whats-the-difference-between-faking-mocking-and-stubbing/61209739#61209739\">this one</a></em></p>\n<p>Here's the <a href=\"https://martinfowler.com/articles/mocksArentStubs.html\" rel=\"nofollow noreferrer\">classification</a> Martin Fowler uses:</p>\n<blockquote>\n<p><strong>Dummy</strong> objects are passed around but never actually used. Usually they are just used to fill parameter lists.</p>\n<p><strong>Fake</strong> objects actually have working implementations, but usually take\nsome shortcut which makes them not suitable for production (an in\nmemory database is a good example).</p>\n<p><strong>Stubs</strong> provide canned answers to\ncalls made during the test, usually not responding at all to anything\noutside what's programmed in for the test.</p>\n<p><strong>Spies</strong> are stubs that also\nrecord some information based on how they were called. One form of\nthis might be an email service that records how many messages it was\nsent.</p>\n<p><strong>Mocks</strong> are what we are talking about here: objects pre-programmed\nwith expectations which form a specification of the calls they are\nexpected to receive.</p>\n<p>Of these kinds of doubles, <em>only mocks insist upon behavior verification</em>.</p>\n</blockquote>\n<p>So dummies are used in conjunction with <em>state verification</em>, mocks are used with <em>behavior verification</em>. But then where do spies go here? I know how the term is used by Mockito (a real object with partially mocked behavior), but what is a mock in the &quot;standard&quot; test double classification as described by Fowler (who took it from the <a href=\"https://martinfowler.com/books/meszaros.html\" rel=\"nofollow noreferrer\">&quot;xUnit Test Patterns&quot; book</a> by Gerard Meszaros)?</p>\n<p>Also, how do the three relate to each other? Is, for example, one a special case of another? Fowler said spy <em>is a</em> stub (spy is a special case of stub), whereas <a href=\"https://tanzu.vmware.com/developer/guides/test-doubles/\" rel=\"nofollow noreferrer\">this article</a> says a mock <em>is a combination</em> of stub and spy (mock = stub + spy)</p>\n<p>I made a number of attempts at resolving all of this in my head, but so far haven't managed that</p>\n<p>Java examples with Junit + Mockito (+ AssertJ, if you want) would be great</p>\n"},{"tags":["java","spring","maven","slf4j"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1700031657,"post_id":77484800,"comment_id":136603642,"body_markdown":"The SLF4J warning is the least of your problems, you also have an error indicating you are mixing incompatible versions of Spring and/or other liblraries. For starters remove `spring-data-jpa` that comes with `spring-boot-starter-data-jpa`. Remove `jackson-core` which is already included in `spring-boot-starter-web` and conflicts with the version used in there. Which Spring Boot version are you using? If you are on 3 then `hibernate-types-52` won&#39;t work as that is using Hibernate 6. Some other dependencies seem old as well.","body":"The SLF4J warning is the least of your problems, you also have an error indicating you are mixing incompatible versions of Spring and/or other liblraries. For starters remove <code>spring-data-jpa</code> that comes with <code>spring-boot-starter-data-jpa</code>. Remove <code>jackson-core</code> which is already included in <code>spring-boot-starter-web</code> and conflicts with the version used in there. Which Spring Boot version are you using? If you are on 3 then <code>hibernate-types-52</code> won&#39;t work as that is using Hibernate 6. Some other dependencies seem old as well."},{"owner":{"account_id":5220351,"reputation":117,"user_id":4449489,"display_name":"Vishwanath Gulabal"},"score":0,"creation_date":1700032290,"post_id":77484800,"comment_id":136603715,"body_markdown":"HI @M.Deinum, removed those dependencies(old as well), still getting the error. I am using 2.0.4.RELEASE as spring version.","body":"HI @M.Deinum, removed those dependencies(old as well), still getting the error. I am using 2.0.4.RELEASE as spring version."},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1700036520,"post_id":77484800,"comment_id":136604313,"body_markdown":"As stated that is the least of your problems. Judging from the error. Do a `mvn dependecy:tree` and post the output here.","body":"As stated that is the least of your problems. Judging from the error. Do a <code>mvn dependecy:tree</code> and post the output here."},{"owner":{"account_id":5220351,"reputation":117,"user_id":4449489,"display_name":"Vishwanath Gulabal"},"score":0,"creation_date":1700042041,"post_id":77484800,"comment_id":136605216,"body_markdown":"I have added the tree @M.Deinum","body":"I have added the tree @M.Deinum"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1700042336,"post_id":77484800,"comment_id":136605267,"body_markdown":"You didn&#39;t add the tree, yu added an eclipse screenshot. Please add the output from running `mvn dependency:tree` on the command line. What you posted here also shows you still have the mentioned dependencies (like jackson) in there.","body":"You didn&#39;t add the tree, yu added an eclipse screenshot. Please add the output from running <code>mvn dependency:tree</code> on the command line. What you posted here also shows you still have the mentioned dependencies (like jackson) in there."},{"owner":{"account_id":5220351,"reputation":117,"user_id":4449489,"display_name":"Vishwanath Gulabal"},"score":0,"creation_date":1700043153,"post_id":77484800,"comment_id":136605421,"body_markdown":"It&#39;s very much probably 450 lines of text in notepad. Stackoverflow is not allowing to add here. Is there any other way ?","body":"It&#39;s very much probably 450 lines of text in notepad. Stackoverflow is not allowing to add here. Is there any other way ?"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1700043777,"post_id":77484800,"comment_id":136605529,"body_markdown":"Well you need to find the conflicting one (the fact that you get a warning on Elasticsearch for overriding the version is probably part of it).","body":"Well you need to find the conflicting one (the fact that you get a warning on Elasticsearch for overriding the version is probably part of it)."},{"owner":{"account_id":5220351,"reputation":117,"user_id":4449489,"display_name":"Vishwanath Gulabal"},"score":0,"creation_date":1700043853,"post_id":77484800,"comment_id":136605552,"body_markdown":"Let us [continue this discussion in chat](https://chat.stackoverflow.com/rooms/255948/discussion-between-vishwanath-gulabal-and-m-deinum).","body":"Let us <a href=\"https://chat.stackoverflow.com/rooms/255948/discussion-between-vishwanath-gulabal-and-m-deinum\">continue this discussion in chat</a>."}],"owner":{"account_id":5220351,"reputation":117,"user_id":4449489,"display_name":"Vishwanath Gulabal"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":60,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":0,"score":-1,"last_activity_date":1700043835,"creation_date":1700013066,"question_id":77484800,"body_markdown":"When i run my maven application.. i am getting the following error.\r\n\r\n[![enter image description here][1]][1]\r\nSLF4J: The requested version 1.7.16 by your slf4j binding is not compatible with [1.6]\r\nSLF4J: See http://www.slf4j.org/codes.html#version_mismatch for further details.\r\n06:48:43.432 [main] DEBUG org.jboss.logging - Logging Provider: org.jboss.logging.Log4j2LoggerProvider\r\n06:48:43.440 [main] INFO com.indusface.tasks.TasksApplication - debug task msg\r\ndebug task msg\r\nException in thread &quot;main&quot; java.lang.NoSuchMethodError: org.springframework.util.MultiValueMap.addAll(Ljava/lang/Object;Ljava/util/List;)V\r\n\tat org.springframework.core.io.support.SpringFactoriesLoader.loadSpringFactories(SpringFactoriesLoader.java:140)\r\n\tat org.springframework.core.io.support.SpringFactoriesLoader.loadFactoryNames(SpringFactoriesLoader.java:119)\r\n\tat org.springframework.boot.SpringApplication.getSpringFactoriesInstances(SpringApplication.java:429)\r\n\tat org.springframework.boot.SpringApplication.getSpringFactoriesInstances(SpringApplication.java:421)\r\n\tat org.springframework.boot.SpringApplication.&lt;init&gt;(SpringApplication.java:268)\r\n\tat org.springframework.boot.SpringApplication.&lt;init&gt;(SpringApplication.java:249)\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1258)\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1246)\r\n\tat com.indusface.tasks.TasksApplication.main(TasksApplication.java:49)\r\n\r\n\r\nI tried to add multiple versions of slf4j  dependencies in pom.xml but it seems that it is not helping out.\r\n\r\n\r\n```\r\n&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-properties-migrator&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n    \t\t&lt;groupId&gt;org.springframework.data&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;spring-data-jpa&lt;/artifactId&gt;\r\n    \t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-mail&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.postgresql&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;postgresql&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-rest&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.vladmihalcea&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;hibernate-types-52&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.9.11&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.json&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;json&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;20080701&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;io.swagger.parser.v3&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;swagger-parser&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.0.17&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-freemarker&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.elasticsearch&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;elasticsearch&lt;/artifactId&gt;\r\n\t\t\t &lt;version&gt;6.4.3&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.elasticsearch.client&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;elasticsearch-rest-high-level-client&lt;/artifactId&gt;\r\n\t\t\t &lt;version&gt;6.4.3&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n        &lt;!-- https://mvnrepository.com/artifact/com.stripe/stripe-java --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t    &lt;groupId&gt;com.stripe&lt;/groupId&gt;\r\n\t\t    &lt;artifactId&gt;stripe-java&lt;/artifactId&gt;\r\n\t\t    &lt;version&gt;7.2.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n  \t\t\t&lt;groupId&gt;software.amazon.awssdk&lt;/groupId&gt;\r\n  \t\t\t&lt;artifactId&gt;aws-sdk-java&lt;/artifactId&gt;\r\n  \t\t\t&lt;version&gt;2.13.19&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n    \t\t&lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;httpclient&lt;/artifactId&gt;\r\n    \t\t&lt;!-- &lt;version&gt;4.5&lt;/version&gt; --&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n    \t\t&lt;groupId&gt;commons-io&lt;/groupId&gt;\r\n   \t\t\t &lt;artifactId&gt;commons-io&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;2.7&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.google.guava&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;guava&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;30.1-jre&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;!-- https://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-core --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t    &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n\t\t    &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\r\n\t\t    &lt;version&gt;2.12.5&lt;/version&gt;&lt;!--$NO-MVN-MAN-VER$--&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt; \r\n\t\t\t&lt;groupId&gt;com.opencsv&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;opencsv&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;4.1&lt;/version&gt; \r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n```\r\n\r\nPlease find the above pom.xml as reference.\r\n\r\n\r\nhttps://docs.google.com/document/d/13P8pa3gP0YfkYGTrR56AEWmIU_6dswlwlSdVcOfNQGM/edit","title":"Error while running maven project : SLF4J: The requested version 1.7.16 by your slf4j binding is not compatible with [1.6]","body":"<p>When i run my maven application.. i am getting the following error.</p>\n<p>[![enter image description here][1]][1]\nSLF4J: The requested version 1.7.16 by your slf4j binding is not compatible with [1.6]\nSLF4J: See http://www.slf4j.org/codes.html#version_mismatch for further details.\n06:48:43.432 [main] DEBUG org.jboss.logging - Logging Provider: org.jboss.logging.Log4j2LoggerProvider\n06:48:43.440 [main] INFO com.indusface.tasks.TasksApplication - debug task msg\ndebug task msg\nException in thread &quot;main&quot; java.lang.NoSuchMethodError: org.springframework.util.MultiValueMap.addAll(Ljava/lang/Object;Ljava/util/List;)V\nat org.springframework.core.io.support.SpringFactoriesLoader.loadSpringFactories(SpringFactoriesLoader.java:140)\nat org.springframework.core.io.support.SpringFactoriesLoader.loadFactoryNames(SpringFactoriesLoader.java:119)\nat org.springframework.boot.SpringApplication.getSpringFactoriesInstances(SpringApplication.java:429)\nat org.springframework.boot.SpringApplication.getSpringFactoriesInstances(SpringApplication.java:421)\nat org.springframework.boot.SpringApplication.(SpringApplication.java:268)\nat org.springframework.boot.SpringApplication.(SpringApplication.java:249)\nat org.springframework.boot.SpringApplication.run(SpringApplication.java:1258)\nat org.springframework.boot.SpringApplication.run(SpringApplication.java:1246)\nat com.indusface.tasks.TasksApplication.main(TasksApplication.java:49)</p>\n<p>I tried to add multiple versions of slf4j  dependencies in pom.xml but it seems that it is not helping out.</p>\n<pre><code>&lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-properties-migrator&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.data&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-mail&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\n            &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-rest&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.vladmihalcea&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-types-52&lt;/artifactId&gt;\n            &lt;version&gt;2.9.11&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.json&lt;/groupId&gt;\n            &lt;artifactId&gt;json&lt;/artifactId&gt;\n            &lt;version&gt;20080701&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.swagger.parser.v3&lt;/groupId&gt;\n            &lt;artifactId&gt;swagger-parser&lt;/artifactId&gt;\n            &lt;version&gt;2.0.17&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-freemarker&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.elasticsearch&lt;/groupId&gt;\n            &lt;artifactId&gt;elasticsearch&lt;/artifactId&gt;\n             &lt;version&gt;6.4.3&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.elasticsearch.client&lt;/groupId&gt;\n            &lt;artifactId&gt;elasticsearch-rest-high-level-client&lt;/artifactId&gt;\n             &lt;version&gt;6.4.3&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!-- https://mvnrepository.com/artifact/com.stripe/stripe-java --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.stripe&lt;/groupId&gt;\n            &lt;artifactId&gt;stripe-java&lt;/artifactId&gt;\n            &lt;version&gt;7.2.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;software.amazon.awssdk&lt;/groupId&gt;\n            &lt;artifactId&gt;aws-sdk-java&lt;/artifactId&gt;\n            &lt;version&gt;2.13.19&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;\n            &lt;artifactId&gt;httpclient&lt;/artifactId&gt;\n            &lt;!-- &lt;version&gt;4.5&lt;/version&gt; --&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;commons-io&lt;/groupId&gt;\n             &lt;artifactId&gt;commons-io&lt;/artifactId&gt;\n            &lt;version&gt;2.7&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.google.guava&lt;/groupId&gt;\n            &lt;artifactId&gt;guava&lt;/artifactId&gt;\n            &lt;version&gt;30.1-jre&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!-- https://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-core --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n            &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\n            &lt;version&gt;2.12.5&lt;/version&gt;&lt;!--$NO-MVN-MAN-VER$--&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt; \n            &lt;groupId&gt;com.opencsv&lt;/groupId&gt;\n            &lt;artifactId&gt;opencsv&lt;/artifactId&gt;\n            &lt;version&gt;4.1&lt;/version&gt; \n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n</code></pre>\n<p>Please find the above pom.xml as reference.</p>\n<p><a href=\"https://docs.google.com/document/d/13P8pa3gP0YfkYGTrR56AEWmIU_6dswlwlSdVcOfNQGM/edit\" rel=\"nofollow noreferrer\">https://docs.google.com/document/d/13P8pa3gP0YfkYGTrR56AEWmIU_6dswlwlSdVcOfNQGM/edit</a></p>\n"},{"tags":["java","spring-boot","hibernate","liquibase","liquibase-hibernate"],"answers":[{"tags":[],"owner":{"account_id":14461800,"reputation":177,"user_id":10446433,"display_name":"SimpleJack"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700043643,"creation_date":1699997418,"answer_id":77483940,"question_id":76588487,"body_markdown":"To be honest, i&#39;m wondering why this is even working. Since you&#39;re using a Postgres you must provide at least a username. Not quiet sure about password. Can you have a user wihtout a password in Postgres? Anyway... More important, in combination with spring you must point to your package with your **Entity** classes, as explained [**here**][1].\r\n\r\nTry it again with this updated version of your Gradle file:\r\n\r\n```groovy\r\nplugins {\r\n\t// The WAR plugin extends the Java plugin\r\n    id &#39;war&#39;\r\n\r\n    id &#39;org.springframework.boot&#39; version &#39;3.1.5&#39;\r\n    id &#39;io.spring.dependency-management&#39; version &#39;1.1.3&#39;\r\n\tid &#39;org.liquibase.gradle&#39; version &#39;2.2.0&#39;\r\n}\r\n\r\ngroup = &#39;com.example&#39;\r\nversion = &#39;0.0.1-SNAPSHOT&#39;\r\n\r\njava {\r\n    sourceCompatibility = JavaVersion.VERSION_17\r\n}\r\n\r\nrepositories {\r\n    mavenCentral()\r\n}\r\n\r\ndependencies {\r\n\t// Web already contains Tomcat as Webserver\r\n    implementation &#39;org.springframework.boot:spring-boot-starter-web&#39;\r\n\t// Data JPA already contains Hibernate\r\n\timplementation &#39;org.springframework.boot:spring-boot-starter-data-jpa&#39;\r\n\t\r\n    // jackson-databind has jackson-core as dependency\r\n    implementation &#39;com.fasterxml.jackson.core:jackson-databind&#39;\r\n    implementation &#39;com.fasterxml.jackson.dataformat:jackson-dataformat-yaml&#39;\r\n\r\n    implementation &#39;org.postgresql:postgresql:42.6.0&#39;\r\n\t\r\n    // The Liquibase dependency has to be noted twice: One time for Spring &amp; one time for Liquibase Gradle Plugin\r\n    implementation &#39;org.liquibase:liquibase-core:4.24.0&#39;\r\n    liquibaseRuntime &#39;org.liquibase:liquibase-core:4.24.0&#39;\r\n    liquibaseRuntime &#39;org.liquibase:ext.liquibase-hibernate6:4.24.0&#39;\r\n    liquibaseRuntime &#39;info.picocli:picocli:4.7.5&#39;\r\n    liquibaseRuntime sourceSets.main.output\r\n}\r\n\r\ntasks.named(&#39;test&#39;) {\r\n    useJUnitPlatform()\r\n}\r\n\r\nliquibase {\r\n    activities {\r\n\t\tdef springProperties = new Properties()\r\n        file(&#39;src/main/resources/application.properties&#39;).withInputStream { springProperties.load(it) }\r\n\t\tmain {\r\n            url springProperties.getProperty(&#39;spring.datasource.url&#39;)\r\n            username springProperties.getProperty(&#39;spring.datasource.username&#39;)\r\n            // Comment the password out, if there is no password\r\n            password springProperties.getProperty(&#39;spring.datasource.password&#39;)\r\n            // Assumption here: Your entity classes live in the &quot;persistence&quot; package\r\n            referenceUrl &quot;hibernate:spring:${group}.persistence?dialect=org.hibernate.dialect.PostgreSQLDialect&quot;\r\n            changelogFile &#39;src/main/resources/config/liquibase/changelog/0.1.0/000000_00000000_initial-changelog.xml&#39;\r\n            logLevel &#39;info&#39;\r\n        }\r\n    }\r\n}\r\n\r\ndiffChangelog.configure {\r\n\t// Keep Java byte code up to date\r\n    dependsOn(compileJava)\r\n}\r\n```\r\n\r\n\r\n  [1]: https://github.com/liquibase/liquibase-hibernate/wiki/#hibernatespring","title":"Using SpringBoot 3 and Hibernate 6 any generated Liquibase changelogs based on my Java Entity classes are empty","body":"<p>To be honest, i'm wondering why this is even working. Since you're using a Postgres you must provide at least a username. Not quiet sure about password. Can you have a user wihtout a password in Postgres? Anyway... More important, in combination with spring you must point to your package with your <strong>Entity</strong> classes, as explained <a href=\"https://github.com/liquibase/liquibase-hibernate/wiki/#hibernatespring\" rel=\"nofollow noreferrer\"><strong>here</strong></a>.</p>\n<p>Try it again with this updated version of your Gradle file:</p>\n<pre><code>plugins {\n    // The WAR plugin extends the Java plugin\n    id 'war'\n\n    id 'org.springframework.boot' version '3.1.5'\n    id 'io.spring.dependency-management' version '1.1.3'\n    id 'org.liquibase.gradle' version '2.2.0'\n}\n\ngroup = 'com.example'\nversion = '0.0.1-SNAPSHOT'\n\njava {\n    sourceCompatibility = JavaVersion.VERSION_17\n}\n\nrepositories {\n    mavenCentral()\n}\n\ndependencies {\n    // Web already contains Tomcat as Webserver\n    implementation 'org.springframework.boot:spring-boot-starter-web'\n    // Data JPA already contains Hibernate\n    implementation 'org.springframework.boot:spring-boot-starter-data-jpa'\n    \n    // jackson-databind has jackson-core as dependency\n    implementation 'com.fasterxml.jackson.core:jackson-databind'\n    implementation 'com.fasterxml.jackson.dataformat:jackson-dataformat-yaml'\n\n    implementation 'org.postgresql:postgresql:42.6.0'\n    \n    // The Liquibase dependency has to be noted twice: One time for Spring &amp; one time for Liquibase Gradle Plugin\n    implementation 'org.liquibase:liquibase-core:4.24.0'\n    liquibaseRuntime 'org.liquibase:liquibase-core:4.24.0'\n    liquibaseRuntime 'org.liquibase:ext.liquibase-hibernate6:4.24.0'\n    liquibaseRuntime 'info.picocli:picocli:4.7.5'\n    liquibaseRuntime sourceSets.main.output\n}\n\ntasks.named('test') {\n    useJUnitPlatform()\n}\n\nliquibase {\n    activities {\n        def springProperties = new Properties()\n        file('src/main/resources/application.properties').withInputStream { springProperties.load(it) }\n        main {\n            url springProperties.getProperty('spring.datasource.url')\n            username springProperties.getProperty('spring.datasource.username')\n            // Comment the password out, if there is no password\n            password springProperties.getProperty('spring.datasource.password')\n            // Assumption here: Your entity classes live in the &quot;persistence&quot; package\n            referenceUrl &quot;hibernate:spring:${group}.persistence?dialect=org.hibernate.dialect.PostgreSQLDialect&quot;\n            changelogFile 'src/main/resources/config/liquibase/changelog/0.1.0/000000_00000000_initial-changelog.xml'\n            logLevel 'info'\n        }\n    }\n}\n\ndiffChangelog.configure {\n    // Keep Java byte code up to date\n    dependsOn(compileJava)\n}\n</code></pre>\n"}],"owner":{"account_id":292835,"reputation":6407,"user_id":595833,"accept_rate":94,"display_name":"bobbyrne01"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":551,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1700043643,"creation_date":1688124223,"question_id":76588487,"body_markdown":"I have a SpringBoot 3 based Gradle project that uses Hibernate 6 and Liquibase.\r\n\r\nThe goal is to use the `liquibase-hibernate6` dependency to generate an initial Liquibase changelog containing the details of my Java Entity class i.e `Item.java`.\r\n\r\nThe problem is that the generated changelog is basically empty.\r\n\r\nWhat is missing in order to generate Liquibase changelog from my Java Entity class?\r\n\r\n```\r\nval liquibaseVersion: String = &quot;4.23.0&quot;\r\nval liquibaseGradlePluginVersion: String = &quot;2.2.0&quot;\r\n\r\nplugins {\r\n\tjava\r\n\twar\r\n\r\n\tid(&quot;org.springframework.boot&quot;) version &quot;3.1.1&quot;\r\n\tid(&quot;io.spring.dependency-management&quot;) version &quot;1.1.0&quot;\r\n\tid(&quot;org.liquibase.gradle&quot;) version &quot;2.2.0&quot;\r\n}\r\n\r\ngroup = &quot;com.example&quot;\r\nversion = &quot;0.0.1-SNAPSHOT&quot;\r\n\r\njava {\r\n\tsourceCompatibility = JavaVersion.VERSION_17\r\n}\r\n\r\nrepositories {\r\n\tmavenCentral()\r\n}\r\n\r\ndependencies {\r\n\r\n\timplementation(&quot;org.postgresql:postgresql:42.6.0&quot;)\r\n\timplementation(&quot;info.picocli:picocli:4.6.3&quot;)\r\n\r\n\timplementation(&quot;org.springframework.boot:spring-boot-starter-data-jpa&quot;)\r\n\timplementation(&quot;org.springframework.boot:spring-boot-starter-web&quot;)\r\n\r\n\timplementation(&quot;org.liquibase:liquibase-core:$liquibaseVersion&quot;)\r\n\timplementation(&quot;org.liquibase:liquibase-gradle-plugin:$liquibaseGradlePluginVersion&quot;)\r\n\timplementation(&quot;org.hibernate.orm:hibernate-core:6.2.5.Final&quot;)\r\n\timplementation(&quot;org.liquibase.ext:liquibase-hibernate6:$liquibaseVersion&quot;)\r\n\r\n\timplementation(&quot;com.fasterxml.jackson.core:jackson-core&quot;)\r\n\timplementation(&quot;com.fasterxml.jackson.core:jackson-databind&quot;)\r\n\timplementation(&quot;com.fasterxml.jackson.dataformat:jackson-dataformat-yaml&quot;)\r\n\r\n\tprovidedRuntime(&quot;org.springframework.boot:spring-boot-starter-tomcat&quot;)\r\n\r\n    liquibaseRuntime(&quot;org.postgresql:postgresql:42.6.0&quot;)\r\n\tliquibaseRuntime(&quot;info.picocli:picocli:4.6.3&quot;)\r\n\tliquibaseRuntime(&quot;org.liquibase:liquibase-core:$liquibaseVersion&quot;)\r\n\tliquibaseRuntime(&quot;org.liquibase.ext:liquibase-hibernate6:$liquibaseVersion&quot;)\r\n\tliquibaseRuntime(&quot;org.hibernate.orm:hibernate-core:6.2.5.Final&quot;)\r\n\tliquibaseRuntime(&quot;org.springframework.boot:spring-boot-starter-data-jpa&quot;)\r\n\tliquibaseRuntime(sourceSets.getByName(&quot;main&quot;).output)\r\n}\r\n\r\ntasks.withType&lt;Test&gt; {\r\n\tuseJUnitPlatform()\r\n}\r\n\r\nliquibase {\r\n\tactivities.register(&quot;main&quot;) {\r\n\t\tthis.arguments = mapOf(\r\n\t\t\t&quot;changelogFile&quot; to &quot;src/main/resources/config/liquibase/changelog/0.1.0/000000_00000000_initial-changelog.xml&quot;,\r\n\t\t\t&quot;url&quot; to &quot;hibernate:spring:com.example?dialect=org.hibernate.dialect.PostgreSQLDialect&quot;\r\n\t\t)\r\n\t}\r\n}\r\n```\r\n\r\nI have a Java Entity:\r\n\r\n```java\r\npackage com.example.demo;\r\n\r\nimport jakarta.persistence.*;\r\n\r\n@Entity\r\npublic class Item {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.AUTO)\r\n    @Column(name = &quot;id&quot;, nullable = false)\r\n    private Long id;\r\n\r\n    public Long getId() {\r\n        return id;\r\n    }\r\n\r\n    public void setId(Long id) {\r\n        this.id = id;\r\n    }\r\n}\r\n```\r\n\r\nContents of Liquibase changelog after running `generateChangeLog` via Gradle:\r\n\r\n```xml\r\n&lt;?xml version=&quot;1.1&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?&gt;\r\n&lt;databaseChangeLog xmlns=&quot;http://www.liquibase.org/xml/ns/dbchangelog&quot; xmlns:ext=&quot;http://www.liquibase.org/xml/ns/dbchangelog-ext&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-latest.xsd&quot;/&gt;\r\n```","title":"Using SpringBoot 3 and Hibernate 6 any generated Liquibase changelogs based on my Java Entity classes are empty","body":"<p>I have a SpringBoot 3 based Gradle project that uses Hibernate 6 and Liquibase.</p>\n<p>The goal is to use the <code>liquibase-hibernate6</code> dependency to generate an initial Liquibase changelog containing the details of my Java Entity class i.e <code>Item.java</code>.</p>\n<p>The problem is that the generated changelog is basically empty.</p>\n<p>What is missing in order to generate Liquibase changelog from my Java Entity class?</p>\n<pre><code>val liquibaseVersion: String = &quot;4.23.0&quot;\nval liquibaseGradlePluginVersion: String = &quot;2.2.0&quot;\n\nplugins {\n    java\n    war\n\n    id(&quot;org.springframework.boot&quot;) version &quot;3.1.1&quot;\n    id(&quot;io.spring.dependency-management&quot;) version &quot;1.1.0&quot;\n    id(&quot;org.liquibase.gradle&quot;) version &quot;2.2.0&quot;\n}\n\ngroup = &quot;com.example&quot;\nversion = &quot;0.0.1-SNAPSHOT&quot;\n\njava {\n    sourceCompatibility = JavaVersion.VERSION_17\n}\n\nrepositories {\n    mavenCentral()\n}\n\ndependencies {\n\n    implementation(&quot;org.postgresql:postgresql:42.6.0&quot;)\n    implementation(&quot;info.picocli:picocli:4.6.3&quot;)\n\n    implementation(&quot;org.springframework.boot:spring-boot-starter-data-jpa&quot;)\n    implementation(&quot;org.springframework.boot:spring-boot-starter-web&quot;)\n\n    implementation(&quot;org.liquibase:liquibase-core:$liquibaseVersion&quot;)\n    implementation(&quot;org.liquibase:liquibase-gradle-plugin:$liquibaseGradlePluginVersion&quot;)\n    implementation(&quot;org.hibernate.orm:hibernate-core:6.2.5.Final&quot;)\n    implementation(&quot;org.liquibase.ext:liquibase-hibernate6:$liquibaseVersion&quot;)\n\n    implementation(&quot;com.fasterxml.jackson.core:jackson-core&quot;)\n    implementation(&quot;com.fasterxml.jackson.core:jackson-databind&quot;)\n    implementation(&quot;com.fasterxml.jackson.dataformat:jackson-dataformat-yaml&quot;)\n\n    providedRuntime(&quot;org.springframework.boot:spring-boot-starter-tomcat&quot;)\n\n    liquibaseRuntime(&quot;org.postgresql:postgresql:42.6.0&quot;)\n    liquibaseRuntime(&quot;info.picocli:picocli:4.6.3&quot;)\n    liquibaseRuntime(&quot;org.liquibase:liquibase-core:$liquibaseVersion&quot;)\n    liquibaseRuntime(&quot;org.liquibase.ext:liquibase-hibernate6:$liquibaseVersion&quot;)\n    liquibaseRuntime(&quot;org.hibernate.orm:hibernate-core:6.2.5.Final&quot;)\n    liquibaseRuntime(&quot;org.springframework.boot:spring-boot-starter-data-jpa&quot;)\n    liquibaseRuntime(sourceSets.getByName(&quot;main&quot;).output)\n}\n\ntasks.withType&lt;Test&gt; {\n    useJUnitPlatform()\n}\n\nliquibase {\n    activities.register(&quot;main&quot;) {\n        this.arguments = mapOf(\n            &quot;changelogFile&quot; to &quot;src/main/resources/config/liquibase/changelog/0.1.0/000000_00000000_initial-changelog.xml&quot;,\n            &quot;url&quot; to &quot;hibernate:spring:com.example?dialect=org.hibernate.dialect.PostgreSQLDialect&quot;\n        )\n    }\n}\n</code></pre>\n<p>I have a Java Entity:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example.demo;\n\nimport jakarta.persistence.*;\n\n@Entity\npublic class Item {\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    @Column(name = &quot;id&quot;, nullable = false)\n    private Long id;\n\n    public Long getId() {\n        return id;\n    }\n\n    public void setId(Long id) {\n        this.id = id;\n    }\n}\n</code></pre>\n<p>Contents of Liquibase changelog after running <code>generateChangeLog</code> via Gradle:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.1&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?&gt;\n&lt;databaseChangeLog xmlns=&quot;http://www.liquibase.org/xml/ns/dbchangelog&quot; xmlns:ext=&quot;http://www.liquibase.org/xml/ns/dbchangelog-ext&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-latest.xsd&quot;/&gt;\n</code></pre>\n"},{"tags":["java","spring-boot","graphql","postman","graphql-java"],"owner":{"account_id":19462220,"reputation":25,"user_id":14236284,"display_name":"Mayar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1700043252,"creation_date":1700043252,"question_id":77486842,"body_markdown":"I am using graphQL for my APIs and now I need to receive a file in the request as a **multipart file**, so how to send that file using **Postman** to my controller? \r\n```\r\n@Data\r\npublic class FileDTO {\r\n    private MultipartFile smsFile;\r\n}\r\n```\r\n```\r\n@Controller\r\npublic class SMSBulkController {\r\n    @Autowired\r\n    ParsingService parsingService;\r\n\r\n    @MutationMapping\r\n    public ApiResponse&lt;String&gt; uploadFile(@Argument FileDTO file) throws IOException {\r\n        parsingService.upload(file);\r\n        return ApiResponse.success(&quot;success&quot;);\r\n    }\r\n}\r\n```\r\nand this is my graphql file:\r\n```\r\nscalar Upload\r\ninput smsFileInput{\r\n    smsFile: Upload\r\n}\r\ntype Mutation{upload(file: smsFileInput):MutateApiResponse}\r\n```","title":"How to send a file in the request body for GraphQL API and Spring-boot application using postman?","body":"<p>I am using graphQL for my APIs and now I need to receive a file in the request as a <strong>multipart file</strong>, so how to send that file using <strong>Postman</strong> to my controller?</p>\n<pre><code>@Data\npublic class FileDTO {\n    private MultipartFile smsFile;\n}\n</code></pre>\n<pre><code>@Controller\npublic class SMSBulkController {\n    @Autowired\n    ParsingService parsingService;\n\n    @MutationMapping\n    public ApiResponse&lt;String&gt; uploadFile(@Argument FileDTO file) throws IOException {\n        parsingService.upload(file);\n        return ApiResponse.success(&quot;success&quot;);\n    }\n}\n</code></pre>\n<p>and this is my graphql file:</p>\n<pre><code>scalar Upload\ninput smsFileInput{\n    smsFile: Upload\n}\ntype Mutation{upload(file: smsFileInput):MutateApiResponse}\n</code></pre>\n"},{"tags":["java","checkstyle","google-java-format"],"answers":[{"tags":[],"owner":{"account_id":204659,"reputation":37539,"user_id":453005,"accept_rate":100,"display_name":"DwB"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1643045605,"creation_date":1643045605,"answer_id":70838045,"question_id":70837778,"body_markdown":"After a quick read of the google-java-format documentation,\r\nit is intended to function one file at a time\r\nor on a group of files,\r\neach listed on the command line.\r\n\r\nThere appears to be plugins for intelliJ and Eclipse.\r\n\r\nIf you need to format every file in your project,\r\nyou will need to do one of the following:\r\n\r\n 1. Feed a list of every file.  This is fairly easy with a script; use xargs.\r\n 1. If you use IntelliJ, check the plugin options.  It likely has some kind of selection mechanism.\r\n 1. As above, the Eclipse plugin likely has some kind of selection mechanism, as well.\r\n","title":"google-java-format: format whole project","body":"<p>After a quick read of the google-java-format documentation,\nit is intended to function one file at a time\nor on a group of files,\neach listed on the command line.</p>\n<p>There appears to be plugins for intelliJ and Eclipse.</p>\n<p>If you need to format every file in your project,\nyou will need to do one of the following:</p>\n<ol>\n<li>Feed a list of every file.  This is fairly easy with a script; use xargs.</li>\n<li>If you use IntelliJ, check the plugin options.  It likely has some kind of selection mechanism.</li>\n<li>As above, the Eclipse plugin likely has some kind of selection mechanism, as well.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":28587115,"reputation":1,"user_id":21887117,"display_name":"Chris Walker"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700042785,"creation_date":1700042785,"answer_id":77486789,"question_id":70837778,"body_markdown":"The answer above suggests using `xargs`, so here&#39;s the command that I used:\r\n\r\n    find my_java_project/ -name &quot;*.java&quot; -type f -print | xargs java -jar google-java-format-1.18.1-all-deps.jar --replace\r\n\r\n...where my current working directory contains my Java project (in the `my_java_project` folder) and the Google Java Format JAR.","title":"google-java-format: format whole project","body":"<p>The answer above suggests using <code>xargs</code>, so here's the command that I used:</p>\n<pre><code>find my_java_project/ -name &quot;*.java&quot; -type f -print | xargs java -jar google-java-format-1.18.1-all-deps.jar --replace\n</code></pre>\n<p>...where my current working directory contains my Java project (in the <code>my_java_project</code> folder) and the Google Java Format JAR.</p>\n"}],"owner":{"account_id":15508322,"reputation":473,"user_id":11187813,"display_name":"nathaner"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1602,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1700042785,"creation_date":1643044426,"question_id":70837778,"body_markdown":"I&#39;m using google-java-format to format Java code according to Google Java Style. However, I only find documentation and examples showing how to format one file using the CLI. \r\n\r\nIs there a built-in way to format an entire Java project directly using the CLI (without looping using a shell script or something else)? ","title":"google-java-format: format whole project","body":"<p>I'm using google-java-format to format Java code according to Google Java Style. However, I only find documentation and examples showing how to format one file using the CLI.</p>\n<p>Is there a built-in way to format an entire Java project directly using the CLI (without looping using a shell script or something else)?</p>\n"},{"tags":["java","apache-camel"],"comments":[{"owner":{"account_id":213468,"reputation":103462,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1683120042,"post_id":76164090,"comment_id":134317556,"body_markdown":"Please show the code of what you did in Camel 3 which you can no longer do in Camel 4. That might help people to understand what you&#39;re trying to do and provide an alternative.","body":"Please show the code of what you did in Camel 3 which you can no longer do in Camel 4. That might help people to understand what you&#39;re trying to do and provide an alternative."},{"owner":{"account_id":1116645,"reputation":1415,"user_id":1105832,"display_name":"JanM"},"score":0,"creation_date":1683120909,"post_id":76164090,"comment_id":134317803,"body_markdown":"Hi Mark, well in general I need to access RouteDefinition for a given routeId. This used to be a trivial task, is it not possible anymore for some reason? Posting the whole code of the testing framework is not practical in this case.","body":"Hi Mark, well in general I need to access RouteDefinition for a given routeId. This used to be a trivial task, is it not possible anymore for some reason? Posting the whole code of the testing framework is not practical in this case."},{"owner":{"account_id":213468,"reputation":103462,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1683123476,"post_id":76164090,"comment_id":134318565,"body_markdown":"I don&#39;t use Camel, so I can&#39;t comment to the specifics, but illustrating your question with what you&#39;re doing usually goes a long way towards getting an answer.","body":"I don&#39;t use Camel, so I can&#39;t comment to the specifics, but illustrating your question with what you&#39;re doing usually goes a long way towards getting an answer."},{"owner":{"account_id":1290399,"reputation":523,"user_id":5374740,"accept_rate":0,"display_name":"Lex Luthor"},"score":1,"creation_date":1684890393,"post_id":76164090,"comment_id":134582552,"body_markdown":"Agree with Mark.. more information! In my case, I used `adapt` to advice a Route by first getting the RouteDefinition from the context.. In the process of upgrading to Camel4-M3 I got rid of both the adapt() call and the call to get the RouteDefinition instead passing the `routeId` parameter directly to `AdviceWith.adviceWith`.","body":"Agree with Mark.. more information! In my case, I used <code>adapt</code> to advice a Route by first getting the RouteDefinition from the context.. In the process of upgrading to Camel4-M3 I got rid of both the adapt() call and the call to get the RouteDefinition instead passing the <code>routeId</code> parameter directly to <code>AdviceWith.adviceWith</code>."},{"owner":{"account_id":1290399,"reputation":523,"user_id":5374740,"accept_rate":0,"display_name":"Lex Luthor"},"score":0,"creation_date":1684891129,"post_id":76164090,"comment_id":134582629,"body_markdown":"I found you can still access `RouteDefinition` by _routeId_ by doing as follows (Kotlin):\n\n`\nval routeDefinition = (camelContext as ModelCamelContext).getRouteDefinition(routeId)\n`","body":"I found you can still access <code>RouteDefinition</code> by <i>routeId</i> by doing as follows (Kotlin):  ` val routeDefinition = (camelContext as ModelCamelContext).getRouteDefinition(routeId) `"},{"owner":{"account_id":1104972,"reputation":9652,"user_id":1096567,"accept_rate":100,"display_name":"Lovis"},"score":0,"creation_date":1697445411,"post_id":76164090,"comment_id":136276157,"body_markdown":"@JanM did you find a solution for this?","body":"@JanM did you find a solution for this?"}],"answers":[{"tags":[],"owner":{"account_id":1116645,"reputation":1415,"user_id":1105832,"display_name":"JanM"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700042613,"creation_date":1700042613,"answer_id":77486770,"question_id":76164090,"body_markdown":"Camel migration guide https://camel.apache.org/manual/camel-4-migration-guide.html\r\nmentions following piece of migration code:\r\n\r\n    Removed getExtension from the interface CamelContext\r\n    \r\n    Use getCamelContextExtension instead. For example ManagedCamelContext managed = context.getCamelContextExtension().getContextPlugin(ManagedCamelContext.class);\r\n\r\nBased on that we were able to get the model extension via:\r\n\r\n    var model = context.getCamelContextExtension().getContextPlugin(Model.class);\r\n\r\n","title":"Apache Camel adapt() method removed in version 4","body":"<p>Camel migration guide <a href=\"https://camel.apache.org/manual/camel-4-migration-guide.html\" rel=\"nofollow noreferrer\">https://camel.apache.org/manual/camel-4-migration-guide.html</a>\nmentions following piece of migration code:</p>\n<pre><code>Removed getExtension from the interface CamelContext\n\nUse getCamelContextExtension instead. For example ManagedCamelContext managed = context.getCamelContextExtension().getContextPlugin(ManagedCamelContext.class);\n</code></pre>\n<p>Based on that we were able to get the model extension via:</p>\n<pre><code>var model = context.getCamelContextExtension().getContextPlugin(Model.class);\n</code></pre>\n"}],"owner":{"account_id":1116645,"reputation":1415,"user_id":1105832,"display_name":"JanM"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":634,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":1,"score":5,"last_activity_date":1700042613,"creation_date":1683118587,"question_id":76164090,"body_markdown":"While migrating from Apache Camel 3 to version 4, I&#39;ve ran into the fact that method adapt() was removed from the camel context and it&#39;s no longer possible to adapt into the ModelCamelContext\r\n\r\n    ModelCamelContext modelContext = context.adapt(ModelCamelContext.class);\t\t\r\n\tRouteDefinition route = modelContext.getRouteDefinition(routeId);\r\n\r\nThe  [official migration guide][1] only mentions that \r\n\r\n&gt; Replaced adapt() from org.apache.camel.CamelContext with getCamelContextExtension\r\n\r\nBut sadly does not elaborate on how the APIs are compatible. I&#39;m struggling with a use case where I need to dynamically manipulate route definitions, which was fairly simple with the old ModelCamelContext approach. **I need to get route definition**, remove it from context, add different one again and manipulate outputs (getOutputs method) on it.\r\n\r\nAny ideas how this could be achieved in Apache Camel version 4?\r\n\r\n  [1]: https://camel.apache.org/manual/camel-4-migration-guide.html","title":"Apache Camel adapt() method removed in version 4","body":"<p>While migrating from Apache Camel 3 to version 4, I've ran into the fact that method adapt() was removed from the camel context and it's no longer possible to adapt into the ModelCamelContext</p>\n<pre><code>ModelCamelContext modelContext = context.adapt(ModelCamelContext.class);        \nRouteDefinition route = modelContext.getRouteDefinition(routeId);\n</code></pre>\n<p>The  <a href=\"https://camel.apache.org/manual/camel-4-migration-guide.html\" rel=\"noreferrer\">official migration guide</a> only mentions that</p>\n<blockquote>\n<p>Replaced adapt() from org.apache.camel.CamelContext with getCamelContextExtension</p>\n</blockquote>\n<p>But sadly does not elaborate on how the APIs are compatible. I'm struggling with a use case where I need to dynamically manipulate route definitions, which was fairly simple with the old ModelCamelContext approach. <strong>I need to get route definition</strong>, remove it from context, add different one again and manipulate outputs (getOutputs method) on it.</p>\n<p>Any ideas how this could be achieved in Apache Camel version 4?</p>\n"},{"tags":["java","spring","gradle","profiling","spring-profiles"],"answers":[{"tags":[],"owner":{"account_id":1096470,"reputation":26056,"user_id":1089967,"accept_rate":59,"display_name":"lance-java"},"down_vote_count":1,"up_vote_count":25,"is_accepted":false,"score":24,"last_activity_date":1496133073,"creation_date":1496133073,"answer_id":44257253,"question_id":44256956,"body_markdown":"I think you are wanting to set a system property in the runtime/test JVM but you are incorrectly setting a system property in the build-time JVM (ie the Gradle daemon).\r\n\r\nSee [Test.systemProperty(String, Object)](https://docs.gradle.org/current/javadoc/org/gradle/api/tasks/testing/Test.html#systemProperty%28java.lang.String,%20java.lang.Object%29)\r\n\r\nEg:\r\n\r\n    test {\r\n        systemProperty &#39;spring.profiles.active&#39;, &#39;DEV&#39;\r\n    }\r\n\r\n... and another note on your attempt. Please note that tasks have a `doFirst` and a `doLast` method so you wouldn&#39;t need a separate task for what you were attempting.","title":"Run gradle task with Spring Profiles (Integration tests)","body":"<p>I think you are wanting to set a system property in the runtime/test JVM but you are incorrectly setting a system property in the build-time JVM (ie the Gradle daemon).</p>\n\n<p>See <a href=\"https://docs.gradle.org/current/javadoc/org/gradle/api/tasks/testing/Test.html#systemProperty%28java.lang.String,%20java.lang.Object%29\" rel=\"noreferrer\">Test.systemProperty(String, Object)</a></p>\n\n<p>Eg:</p>\n\n<pre><code>test {\n    systemProperty 'spring.profiles.active', 'DEV'\n}\n</code></pre>\n\n<p>... and another note on your attempt. Please note that tasks have a <code>doFirst</code> and a <code>doLast</code> method so you wouldn't need a separate task for what you were attempting.</p>\n"},{"tags":[],"owner":{"account_id":200630,"reputation":27386,"user_id":446591,"accept_rate":65,"display_name":"Brad Mace"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1671259235,"creation_date":1524593194,"answer_id":50008227,"question_id":44256956,"body_markdown":"This works for me:\r\n\r\n    test {\r\n    \tsystemProperty &#39;spring.profiles.active&#39;, &#39;ci&#39;\r\n    }\r\n\r\nNow when I do `gradlew test` it runs with the `ci` profile.","title":"Run gradle task with Spring Profiles (Integration tests)","body":"<p>This works for me:</p>\n<pre><code>test {\n    systemProperty 'spring.profiles.active', 'ci'\n}\n</code></pre>\n<p>Now when I do <code>gradlew test</code> it runs with the <code>ci</code> profile.</p>\n"},{"tags":[],"owner":{"account_id":4824120,"reputation":748,"user_id":3893990,"display_name":"Han"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1532825757,"creation_date":1532825757,"answer_id":51576389,"question_id":44256956,"body_markdown":"Wonder if this is a very late reply? But I have encountered the similar problem with situation.\r\n\r\n 1. Using @Profiles in springboot src/test/* folder.\r\n 2. The @ActiveProfiles is actually activated (when viewing logs), but it doesn&#39;t use the @Profile when executed with gradle test. However, the @Profile was working in Eclipse Editor when JUnit test was executed.\r\n\r\nSo in the end i found that @Profile needs to be in **src/main/*** folder. Gradle test seems to have precedence over /src/main rather than /src/test. With this my @Profile(&quot;test&quot;) was converted into @Profile(&quot;!test&quot;). There was no added spring.profiles.active into the gradle built.\r\n\r\n[Negating profile][1]\r\n\r\n\r\n  [1]: http://www.baeldung.com/spring-profiles","title":"Run gradle task with Spring Profiles (Integration tests)","body":"<p>Wonder if this is a very late reply? But I have encountered the similar problem with situation.</p>\n\n<ol>\n<li>Using @Profiles in springboot src/test/* folder.</li>\n<li>The @ActiveProfiles is actually activated (when viewing logs), but it doesn't use the @Profile when executed with gradle test. However, the @Profile was working in Eclipse Editor when JUnit test was executed.</li>\n</ol>\n\n<p>So in the end i found that @Profile needs to be in <strong>src/main/*</strong> folder. Gradle test seems to have precedence over /src/main rather than /src/test. With this my @Profile(\"test\") was converted into @Profile(\"!test\"). There was no added spring.profiles.active into the gradle built.</p>\n\n<p><a href=\"http://www.baeldung.com/spring-profiles\" rel=\"nofollow noreferrer\">Negating profile</a></p>\n"},{"tags":[],"owner":{"account_id":27316050,"reputation":51,"user_id":20830519,"display_name":"Joseph Mbera"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1700042359,"creation_date":1700042359,"answer_id":77486746,"question_id":44256956,"body_markdown":"this worked for me\r\n\r\n    tasks.withType&lt;Test&gt; {\r\n        systemProperty(&quot;spring.profiles.active&quot;, &quot;DEV&quot;)\r\n    }\r\n\r\n","title":"Run gradle task with Spring Profiles (Integration tests)","body":"<p>this worked for me</p>\n<pre><code>tasks.withType&lt;Test&gt; {\n    systemProperty(&quot;spring.profiles.active&quot;, &quot;DEV&quot;)\n}\n</code></pre>\n"}],"owner":{"account_id":2635104,"reputation":1293,"user_id":2280027,"accept_rate":39,"display_name":"yazabara"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":19180,"favorite_count":0,"down_vote_count":0,"up_vote_count":13,"answer_count":4,"score":13,"last_activity_date":1700042359,"creation_date":1496132059,"question_id":44256956,"body_markdown":"Need to run tests via gradle with spring profiles.\r\n\r\n    gradle clean build\r\n\r\nI&#39;ve added task:\r\n\r\n    task beforeTest() {\r\n        doLast {\r\n          System.setProperty(&quot;spring.profiles.active&quot;, &quot;DEV&quot;)\r\n        }\r\n    }\r\n    \r\n    test.dependsOn beforeTest\r\n\r\nAnd my test definition is:\r\n\r\n    @RunWith(SpringRunner.class)\r\n    @SpringBootTest\r\n    @ActiveProfiles(&quot;TestProfile&quot;)\r\n    public class SomeTest {\r\n\r\nBut this construction doesn&#39;t work for me.\r\n\r\nGradle runs tests.","title":"Run gradle task with Spring Profiles (Integration tests)","body":"<p>Need to run tests via gradle with spring profiles.</p>\n\n<pre><code>gradle clean build\n</code></pre>\n\n<p>I've added task:</p>\n\n<pre><code>task beforeTest() {\n    doLast {\n      System.setProperty(\"spring.profiles.active\", \"DEV\")\n    }\n}\n\ntest.dependsOn beforeTest\n</code></pre>\n\n<p>And my test definition is:</p>\n\n<pre><code>@RunWith(SpringRunner.class)\n@SpringBootTest\n@ActiveProfiles(\"TestProfile\")\npublic class SomeTest {\n</code></pre>\n\n<p>But this construction doesn't work for me.</p>\n\n<p>Gradle runs tests.</p>\n"},{"tags":["java","ios","swift","rsa","public-key"],"answers":[{"tags":[],"owner":{"account_id":8497217,"reputation":37834,"user_id":6371459,"accept_rate":25,"display_name":"pedrofb"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1545593190,"creation_date":1545593190,"answer_id":53906561,"question_id":53906275,"body_markdown":"Java requires a public key encoded in DER format. Unfortunately iOS does not support this standard format and it is needed an additional conversion (I do not know if this will have improved in the latest versions of swift)\r\n\r\nSee my answer [here](https://stackoverflow.com/a/37736209/6371459) You can convert the key using [CryptoExportImportManager](https://github.com/DigitalLeaves/CryptoExportImportManager)\r\n\r\n    func exportPublicKeyToDER(keyId:String) -&gt; NSData?{\r\n\r\n        let publicKey = loadKeyStringFromKeyChainAsNSData(PUBLIC_KEY + keyId)\r\n        let keyType = kSecAttrKeyTypeRSA\r\n        let keySize = 2048\r\n        let exportImportManager = CryptoExportImportManager()\r\n        if let exportableDERKey = exportImportManager.exportPublicKeyToDER(publicKey, keyType: keyType as String, keySize: keySize) {\r\n            return exportableDERKey\r\n        } else {\r\n            return nil\r\n        }\r\n    }\r\n\r\n","title":"RSA public key created in iOS/Swift and exported as base64 not recognized in Java","body":"<p>Java requires a public key encoded in DER format. Unfortunately iOS does not support this standard format and it is needed an additional conversion (I do not know if this will have improved in the latest versions of swift)</p>\n\n<p>See my answer <a href=\"https://stackoverflow.com/a/37736209/6371459\">here</a> You can convert the key using <a href=\"https://github.com/DigitalLeaves/CryptoExportImportManager\" rel=\"noreferrer\">CryptoExportImportManager</a></p>\n\n<pre><code>func exportPublicKeyToDER(keyId:String) -&gt; NSData?{\n\n    let publicKey = loadKeyStringFromKeyChainAsNSData(PUBLIC_KEY + keyId)\n    let keyType = kSecAttrKeyTypeRSA\n    let keySize = 2048\n    let exportImportManager = CryptoExportImportManager()\n    if let exportableDERKey = exportImportManager.exportPublicKeyToDER(publicKey, keyType: keyType as String, keySize: keySize) {\n        return exportableDERKey\n    } else {\n        return nil\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15470798,"reputation":151,"user_id":11588352,"display_name":"Next Increment"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1567853988,"creation_date":1559551064,"answer_id":56423749,"question_id":53906275,"body_markdown":"We ran into the exact same problem when connecting an iOS app to a Java backend. And the [CryptoExportImportManager](https://github.com/DigitalLeaves/CryptoExportImportManager) mentioned by _pedrofb_ helped us out too, which is awesome. However, the code in the `CryptoExportImportManager` class is a bit elaborated and might be hard to maintain. This is because a top-down approach is used when adding new components to the DER encoding. As a result, numbers contained by length fields must be calculated ahead (i.e. before the contents to which the length applies has been defined). I therefore created a new class that we now use to convert the DER encoding of an RSA public key:\r\n\r\n&lt;!-- language-all: lang-swift --&gt;\r\n\r\n    class RSAKeyEncoding: NSObject {\r\n\r\n      // ASN.1 identifiers\r\n      private let bitStringIdentifier: UInt8 = 0x03\r\n      private let sequenceIdentifier: UInt8 = 0x30\r\n\r\n      // ASN.1 AlgorithmIdentfier for RSA encryption: OID 1 2 840 113549 1 1 1 and NULL\r\n      private let algorithmIdentifierForRSAEncryption: [UInt8] = [0x30, 0x0d, 0x06,\r\n        0x09, 0x2a, 0x86, 0x48, 0x86, 0xf7, 0x0d, 0x01, 0x01, 0x01, 0x05, 0x00]\r\n\r\n      /// Converts the DER encoding of an RSA public key that is either fetched from the\r\n      /// keychain (e.g. by using `SecItemCopyMatching(_:_:)`) or retrieved in another way\r\n      /// (e.g. by using `SecKeyCopyExternalRepresentation(_:_:)`), to a format typically\r\n      /// used by tools and programming languages outside the Apple ecosystem (such as\r\n      /// OpenSSL, Java, PHP and Perl). The DER encoding of an RSA public key created by\r\n      /// iOS is represented with the ASN.1 RSAPublicKey type as defined by PKCS #1.\r\n      /// However, many systems outside the Apple ecosystem expect the DER encoding of a\r\n      /// key to be represented with the ASN.1 SubjectPublicKeyInfo type as defined by\r\n      /// X.509. The two types are related in a way that if the SubjectPublicKeyInfo’s\r\n      /// algorithm field contains the rsaEncryption object identifier as defined by\r\n      /// PKCS #1, the subjectPublicKey field shall contain the DER encoding of an\r\n      /// RSAPublicKey type.\r\n      ///\r\n      /// - Parameter rsaPublicKeyData: A data object containing the DER encoding of an\r\n      ///     RSA public key, which is represented with the ASN.1 RSAPublicKey type.\r\n      /// - Returns: A data object containing the DER encoding of an RSA public key, which\r\n      ///     is represented with the ASN.1 SubjectPublicKeyInfo type.\r\n      func convertToX509EncodedKey(_ rsaPublicKeyData: Data) -&gt; Data {\r\n        var derEncodedKeyBytes = [UInt8](rsaPublicKeyData)\r\n\r\n        // Insert ASN.1 BIT STRING bytes at the beginning of the array\r\n        derEncodedKeyBytes.insert(0x00, at: 0)\r\n        derEncodedKeyBytes.insert(contentsOf: lengthField(of: derEncodedKeyBytes), at: 0)\r\n        derEncodedKeyBytes.insert(bitStringIdentifier, at: 0)\r\n\r\n        // Insert ASN.1 AlgorithmIdentifier bytes at the beginning of the array\r\n        derEncodedKeyBytes.insert(contentsOf: algorithmIdentifierForRSAEncryption, at: 0)\r\n\r\n        // Insert ASN.1 SEQUENCE bytes at the beginning of the array\r\n        derEncodedKeyBytes.insert(contentsOf: lengthField(of: derEncodedKeyBytes), at: 0)\r\n        derEncodedKeyBytes.insert(sequenceIdentifier, at: 0)\r\n\r\n        return Data(derEncodedKeyBytes)\r\n      }\r\n\r\n      private func lengthField(of valueField: [UInt8]) -&gt; [UInt8] {\r\n        var length = valueField.count\r\n\r\n        if length &lt; 128 {\r\n          return [ UInt8(length) ]\r\n        }\r\n\r\n        // Number of bytes needed to encode the length\r\n        let lengthBytesCount = Int((log2(Double(length)) / 8) + 1)\r\n\r\n        // First byte encodes the number of remaining bytes in this field\r\n        let firstLengthFieldByte = UInt8(128 + lengthBytesCount)\r\n\r\n        var lengthField: [UInt8] = []\r\n        for _ in 0..&lt;lengthBytesCount {\r\n          // Take the last 8 bits of length\r\n          let lengthByte = UInt8(length &amp; 0xff)\r\n          // Insert them at the beginning of the array\r\n          lengthField.insert(lengthByte, at: 0)\r\n          // Delete the last 8 bits of length\r\n          length = length &gt;&gt; 8\r\n        }\r\n\r\n        // Insert firstLengthFieldByte at the beginning of the array\r\n        lengthField.insert(firstLengthFieldByte, at: 0)\r\n\r\n        return lengthField\r\n      }\r\n    }\r\n\r\nUsage\r\n-----\r\n\r\nYou could use this class in the function `asBase64()` like this:\r\n\r\n    extension SecKey {\r\n      func asBase64() throws -&gt; String {\r\n        var dataPtr: CFTypeRef?\r\n        let query: [String:Any] = [\r\n          kSecClass as String: kSecClassKey,\r\n          kSecAttrApplicationTag as String: &quot;...&quot;, // Same unique tag here\r\n          kSecAttrKeyType as String: kSecAttrKeyTypeRSA,\r\n          kSecReturnData as String: kCFBooleanTrue\r\n        ]\r\n        let result = SecItemCopyMatching(query as CFDictionary, &amp;dataPtr)\r\n\r\n        switch (result, dataPtr) {\r\n        case (errSecSuccess, .some(let data)):\r\n\r\n          // convert to X509 encoded key\r\n          let convertedData = RSAKeyEncoding().convertToX509EncodedKey(data)\r\n\r\n          // convert to Base64 string\r\n          let base64PublicKey = convertedData.base64EncodedString(options: [])\r\n          return base64PublicKey\r\n        default:\r\n          throw CryptoError.keyConversionError\r\n        }\r\n      }\r\n    }\r\n\r\nUPDATE - Other Issue\r\n--------------------\r\n\r\nAfter using the above class for a while, we stumbled upon another issue. Occasionally, the public key that is fetched from the keychain seems to be invalid because, for some reason, it has grown in size. This behavior matches with findings described in the question (although in our case the Base64 encoded key has grown to a size of 392 characters instead of 360 characters). Unfortunately, we didn’t find the exact cause of this strange behavior, but we found two solutions. The first solution is to specify `kSecAttrKeySizeInBits` along with `kSecAttrEffectiveKeySize` when defining the query, like in the below code snippet:\r\n\r\n    let keySize = ... // Key size specified when storing the key, for example: 2048\r\n\r\n    let query: [String: Any] = [\r\n        kSecAttrKeySizeInBits as String: keySize,\r\n        kSecAttrEffectiveKeySize as String: keySize,\r\n        ... // More attributes\r\n    ]\r\n\r\n    var dataPtr: CFTypeRef?\r\n\r\n    let result = SecItemCopyMatching(query as CFDictionary, &amp;dataPtr)\r\n\r\nThe second solution is to always delete the old key from the keychain (if any) before adding a new key with the same tag.\r\n\r\nUPDATE - Alternative Solution\r\n-----------------------------\r\n\r\nI published [this project](https://github.com/nextincrement/rsa-public-key-importer-exporter) on GitHub that can be used as an alternative to the above class.\r\n\r\nReferences\r\n----------\r\n\r\n[A Layman’s Guide to a Subset of ASN.1, BER, and DER](http://luca.ntop.org/Teaching/Appunti/asn1.html)\r\n\r\n[RFC 5280](https://www.rfc-editor.org/rfc/rfc5280) (X.509 v3)\r\n\r\n[RFC 8017](https://www.rfc-editor.org/rfc/rfc8017) (PKCS #1 v2.2)\r\n\r\nSome code I found [here](https://github.com/airsidemobile/JOSESwift) inspired me when creating the `lengthField(...)` function.","title":"RSA public key created in iOS/Swift and exported as base64 not recognized in Java","body":"<p>We ran into the exact same problem when connecting an iOS app to a Java backend. And the <a href=\"https://github.com/DigitalLeaves/CryptoExportImportManager\" rel=\"noreferrer\">CryptoExportImportManager</a> mentioned by <em>pedrofb</em> helped us out too, which is awesome. However, the code in the <code>CryptoExportImportManager</code> class is a bit elaborated and might be hard to maintain. This is because a top-down approach is used when adding new components to the DER encoding. As a result, numbers contained by length fields must be calculated ahead (i.e. before the contents to which the length applies has been defined). I therefore created a new class that we now use to convert the DER encoding of an RSA public key:</p>\n\n<pre class=\"lang-swift prettyprint-override\"><code>class RSAKeyEncoding: NSObject {\n\n  // ASN.1 identifiers\n  private let bitStringIdentifier: UInt8 = 0x03\n  private let sequenceIdentifier: UInt8 = 0x30\n\n  // ASN.1 AlgorithmIdentfier for RSA encryption: OID 1 2 840 113549 1 1 1 and NULL\n  private let algorithmIdentifierForRSAEncryption: [UInt8] = [0x30, 0x0d, 0x06,\n    0x09, 0x2a, 0x86, 0x48, 0x86, 0xf7, 0x0d, 0x01, 0x01, 0x01, 0x05, 0x00]\n\n  /// Converts the DER encoding of an RSA public key that is either fetched from the\n  /// keychain (e.g. by using `SecItemCopyMatching(_:_:)`) or retrieved in another way\n  /// (e.g. by using `SecKeyCopyExternalRepresentation(_:_:)`), to a format typically\n  /// used by tools and programming languages outside the Apple ecosystem (such as\n  /// OpenSSL, Java, PHP and Perl). The DER encoding of an RSA public key created by\n  /// iOS is represented with the ASN.1 RSAPublicKey type as defined by PKCS #1.\n  /// However, many systems outside the Apple ecosystem expect the DER encoding of a\n  /// key to be represented with the ASN.1 SubjectPublicKeyInfo type as defined by\n  /// X.509. The two types are related in a way that if the SubjectPublicKeyInfo’s\n  /// algorithm field contains the rsaEncryption object identifier as defined by\n  /// PKCS #1, the subjectPublicKey field shall contain the DER encoding of an\n  /// RSAPublicKey type.\n  ///\n  /// - Parameter rsaPublicKeyData: A data object containing the DER encoding of an\n  ///     RSA public key, which is represented with the ASN.1 RSAPublicKey type.\n  /// - Returns: A data object containing the DER encoding of an RSA public key, which\n  ///     is represented with the ASN.1 SubjectPublicKeyInfo type.\n  func convertToX509EncodedKey(_ rsaPublicKeyData: Data) -&gt; Data {\n    var derEncodedKeyBytes = [UInt8](rsaPublicKeyData)\n\n    // Insert ASN.1 BIT STRING bytes at the beginning of the array\n    derEncodedKeyBytes.insert(0x00, at: 0)\n    derEncodedKeyBytes.insert(contentsOf: lengthField(of: derEncodedKeyBytes), at: 0)\n    derEncodedKeyBytes.insert(bitStringIdentifier, at: 0)\n\n    // Insert ASN.1 AlgorithmIdentifier bytes at the beginning of the array\n    derEncodedKeyBytes.insert(contentsOf: algorithmIdentifierForRSAEncryption, at: 0)\n\n    // Insert ASN.1 SEQUENCE bytes at the beginning of the array\n    derEncodedKeyBytes.insert(contentsOf: lengthField(of: derEncodedKeyBytes), at: 0)\n    derEncodedKeyBytes.insert(sequenceIdentifier, at: 0)\n\n    return Data(derEncodedKeyBytes)\n  }\n\n  private func lengthField(of valueField: [UInt8]) -&gt; [UInt8] {\n    var length = valueField.count\n\n    if length &lt; 128 {\n      return [ UInt8(length) ]\n    }\n\n    // Number of bytes needed to encode the length\n    let lengthBytesCount = Int((log2(Double(length)) / 8) + 1)\n\n    // First byte encodes the number of remaining bytes in this field\n    let firstLengthFieldByte = UInt8(128 + lengthBytesCount)\n\n    var lengthField: [UInt8] = []\n    for _ in 0..&lt;lengthBytesCount {\n      // Take the last 8 bits of length\n      let lengthByte = UInt8(length &amp; 0xff)\n      // Insert them at the beginning of the array\n      lengthField.insert(lengthByte, at: 0)\n      // Delete the last 8 bits of length\n      length = length &gt;&gt; 8\n    }\n\n    // Insert firstLengthFieldByte at the beginning of the array\n    lengthField.insert(firstLengthFieldByte, at: 0)\n\n    return lengthField\n  }\n}\n</code></pre>\n<h2>Usage</h2>\n<p>You could use this class in the function <code>asBase64()</code> like this:</p>\n<pre class=\"lang-swift prettyprint-override\"><code>extension SecKey {\n  func asBase64() throws -&gt; String {\n    var dataPtr: CFTypeRef?\n    let query: [String:Any] = [\n      kSecClass as String: kSecClassKey,\n      kSecAttrApplicationTag as String: &quot;...&quot;, // Same unique tag here\n      kSecAttrKeyType as String: kSecAttrKeyTypeRSA,\n      kSecReturnData as String: kCFBooleanTrue\n    ]\n    let result = SecItemCopyMatching(query as CFDictionary, &amp;dataPtr)\n\n    switch (result, dataPtr) {\n    case (errSecSuccess, .some(let data)):\n\n      // convert to X509 encoded key\n      let convertedData = RSAKeyEncoding().convertToX509EncodedKey(data)\n\n      // convert to Base64 string\n      let base64PublicKey = convertedData.base64EncodedString(options: [])\n      return base64PublicKey\n    default:\n      throw CryptoError.keyConversionError\n    }\n  }\n}\n</code></pre>\n<h2>UPDATE - Other Issue</h2>\n<p>After using the above class for a while, we stumbled upon another issue. Occasionally, the public key that is fetched from the keychain seems to be invalid because, for some reason, it has grown in size. This behavior matches with findings described in the question (although in our case the Base64 encoded key has grown to a size of 392 characters instead of 360 characters). Unfortunately, we didn’t find the exact cause of this strange behavior, but we found two solutions. The first solution is to specify <code>kSecAttrKeySizeInBits</code> along with <code>kSecAttrEffectiveKeySize</code> when defining the query, like in the below code snippet:</p>\n<pre class=\"lang-swift prettyprint-override\"><code>let keySize = ... // Key size specified when storing the key, for example: 2048\n\nlet query: [String: Any] = [\n    kSecAttrKeySizeInBits as String: keySize,\n    kSecAttrEffectiveKeySize as String: keySize,\n    ... // More attributes\n]\n\nvar dataPtr: CFTypeRef?\n\nlet result = SecItemCopyMatching(query as CFDictionary, &amp;dataPtr)\n</code></pre>\n<p>The second solution is to always delete the old key from the keychain (if any) before adding a new key with the same tag.</p>\n<h2>UPDATE - Alternative Solution</h2>\n<p>I published <a href=\"https://github.com/nextincrement/rsa-public-key-importer-exporter\" rel=\"noreferrer\">this project</a> on GitHub that can be used as an alternative to the above class.</p>\n<h2>References</h2>\n<p><a href=\"http://luca.ntop.org/Teaching/Appunti/asn1.html\" rel=\"noreferrer\">A Layman’s Guide to a Subset of ASN.1, BER, and DER</a></p>\n<p><a href=\"https://www.rfc-editor.org/rfc/rfc5280\" rel=\"noreferrer\">RFC 5280</a> (X.509 v3)</p>\n<p><a href=\"https://www.rfc-editor.org/rfc/rfc8017\" rel=\"noreferrer\">RFC 8017</a> (PKCS #1 v2.2)</p>\n<p>Some code I found <a href=\"https://github.com/airsidemobile/JOSESwift\" rel=\"noreferrer\">here</a> inspired me when creating the <code>lengthField(...)</code> function.</p>\n"},{"tags":[],"owner":{"account_id":428143,"reputation":765,"user_id":810268,"display_name":"Olivier Michel"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700041889,"creation_date":1700041889,"answer_id":77486690,"question_id":53906275,"body_markdown":"If you are using a 2048-bit RSA key, exporting the X509 PEM public key is as simple as prepending the string `MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8A` to the PKCS#1 PEM public key generated by iOS. Here is my code written in Objective-C which produces both the PKCS#1 (RSA PUBLIC KEY) and X509 (PUBLIC KEY) versions of the PEM file:\r\n```objectivec\r\nNSString* alias = @&quot;MyKeyAlias&quot;;\r\nNSData* tag = [alias dataUsingEncoding:NSUTF8StringEncoding];\r\n// delete any existing key pair with the same tag name\r\nNSDictionary *deleteQuery = @{\r\n  (id)kSecClass: (id)kSecClassKey,\r\n  (id)kSecAttrApplicationTag: tag,\r\n  (id)kSecAttrKeyType: (id)kSecAttrKeyTypeRSA\r\n};\r\nSecItemDelete((__bridge CFDictionaryRef)deleteQuery);\r\n// create a new key pair\r\nNSDictionary* attributes = @{\r\n  (id)kSecAttrKeyType: (id)kSecAttrKeyTypeRSA,\r\n  (id)kSecAttrKeySizeInBits: @2048,\r\n  (id)kSecPrivateKeyAttrs: @{(id)kSecAttrIsPermanent: @YES, (id)kSecAttrApplicationTag: tag}\r\n};\r\nCFErrorRef error = NULL;\r\nSecKeyRef privateKey = SecKeyCreateRandomKey((__bridge CFDictionaryRef)attributes, &amp;error);\r\nif (!privateKey) {\r\n  NSError *err = CFBridgingRelease(error);\r\n  NSString *message = [NSString stringWithFormat:@&quot;Cannot generate key pair: %@&quot;, [err localizedDescription]];\r\n  NSLog(message);\r\n} else {\r\n  SecKeyRef publicKey = SecKeyCopyPublicKey(privateKey);\r\n  if (!publicKey)\r\n    NSLog(@&quot;Cannot export public key&quot;);\r\n  else {\r\n    NSData* keyData = (NSData*)CFBridgingRelease(SecKeyCopyExternalRepresentation(publicKey, &amp;error));\r\n    if (!keyData)\r\n      NSLog(@&quot;Failed to export public key&quot;);\r\n    else {\r\n      NSLog(@&quot;-----BEGIN RSA PUBLIC KEY-----\\n%@\\n-----END RSA PUBLIC KEY-----\\n&quot;, [keyData base64EncodedStringWithOptions:0]];\r\n      NSString *pem_x509 = [NSString stringWithFormat:@&quot;MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8A%@&quot;, [keyData base64EncodedStringWithOptions:0]];\r\n      NSLog(@&quot;-----BEGIN PUBLIC KEY-----\\n%@\\n-----END PUBLIC KEY-----\\n&quot;, messageAsString:pem_x509];\r\n    }\r\n  }\r\n  CFRelease(privateKey);\r\n}\r\n```","title":"RSA public key created in iOS/Swift and exported as base64 not recognized in Java","body":"<p>If you are using a 2048-bit RSA key, exporting the X509 PEM public key is as simple as prepending the string <code>MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8A</code> to the PKCS#1 PEM public key generated by iOS. Here is my code written in Objective-C which produces both the PKCS#1 (RSA PUBLIC KEY) and X509 (PUBLIC KEY) versions of the PEM file:</p>\n<pre class=\"lang-objectivec prettyprint-override\"><code>NSString* alias = @&quot;MyKeyAlias&quot;;\nNSData* tag = [alias dataUsingEncoding:NSUTF8StringEncoding];\n// delete any existing key pair with the same tag name\nNSDictionary *deleteQuery = @{\n  (id)kSecClass: (id)kSecClassKey,\n  (id)kSecAttrApplicationTag: tag,\n  (id)kSecAttrKeyType: (id)kSecAttrKeyTypeRSA\n};\nSecItemDelete((__bridge CFDictionaryRef)deleteQuery);\n// create a new key pair\nNSDictionary* attributes = @{\n  (id)kSecAttrKeyType: (id)kSecAttrKeyTypeRSA,\n  (id)kSecAttrKeySizeInBits: @2048,\n  (id)kSecPrivateKeyAttrs: @{(id)kSecAttrIsPermanent: @YES, (id)kSecAttrApplicationTag: tag}\n};\nCFErrorRef error = NULL;\nSecKeyRef privateKey = SecKeyCreateRandomKey((__bridge CFDictionaryRef)attributes, &amp;error);\nif (!privateKey) {\n  NSError *err = CFBridgingRelease(error);\n  NSString *message = [NSString stringWithFormat:@&quot;Cannot generate key pair: %@&quot;, [err localizedDescription]];\n  NSLog(message);\n} else {\n  SecKeyRef publicKey = SecKeyCopyPublicKey(privateKey);\n  if (!publicKey)\n    NSLog(@&quot;Cannot export public key&quot;);\n  else {\n    NSData* keyData = (NSData*)CFBridgingRelease(SecKeyCopyExternalRepresentation(publicKey, &amp;error));\n    if (!keyData)\n      NSLog(@&quot;Failed to export public key&quot;);\n    else {\n      NSLog(@&quot;-----BEGIN RSA PUBLIC KEY-----\\n%@\\n-----END RSA PUBLIC KEY-----\\n&quot;, [keyData base64EncodedStringWithOptions:0]];\n      NSString *pem_x509 = [NSString stringWithFormat:@&quot;MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8A%@&quot;, [keyData base64EncodedStringWithOptions:0]];\n      NSLog(@&quot;-----BEGIN PUBLIC KEY-----\\n%@\\n-----END PUBLIC KEY-----\\n&quot;, messageAsString:pem_x509];\n    }\n  }\n  CFRelease(privateKey);\n}\n</code></pre>\n"}],"owner":{"account_id":541417,"reputation":71857,"user_id":148357,"accept_rate":75,"display_name":"Antonio"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4397,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"answer_count":3,"score":9,"last_activity_date":1700041889,"creation_date":1545591004,"question_id":53906275,"body_markdown":"*TL;DR: RSA public key generated in iOS and stored in the keychain, exported as base64 and sent to a java backend, is not recognized.*\r\n\r\nI&#39;m implementing a chat encryption feature in an iOS app, and I&#39;m using symmetric + asymmetric keys to handle it.\r\n\r\nWithout going too much into details, at backend I use the user&#39;s public key to encrypt a symmetric key used to encrypt and decrypt messages.\r\n\r\nI created two frameworks, respectively in Swift and in Java (backend) to handle key generation, encryption, decryption, etc. I also have tests for them, so I&#39;m 100% everything works as expected.\r\n\r\nHowever, it looks like the backend is unable to recognize the format of the public key passed from iOS. Using RSA both sides, this is the code I use in Swift to generate the key:\r\n\r\n\r\n    // private key parameters\r\n    static let privateKeyParams: [String : Any] = [\r\n    \t\tkSecAttrIsPermanent as String: true,\r\n    \t\tkSecAttrApplicationTag as String: &quot;...&quot; // I have a proper unique tag here\r\n    ]\r\n    \r\n    // public  key parameters\r\n    static let publicKeyParams: [String : Any] = [\r\n    \t\tkSecAttrIsPermanent as String: true,\r\n    \t\tkSecAttrApplicationTag as String: &quot;...&quot; // I have a proper unique tag here\r\n    ]\r\n    \r\n    // global parameters for our key generation\r\n    static let keyCreationParameters: [String : Any] = [\r\n    \t\tkSecAttrKeyType as String: kSecAttrKeyTypeRSA,\r\n    \t\tkSecAttrKeySizeInBits as String: 2048,\r\n    \t\tkSecPublicKeyAttrs as String: publicKeyParams,\r\n    \t\tkSecPrivateKeyAttrs as String: privateKeyParams\r\n    ]\r\n    \r\n    ...\r\n    \r\n    var publicKey, privateKey: SecKey?\r\n    let status = SecKeyGeneratePair(Constants.keyCreationParameters as CFDictionary, &amp;publicKey, &amp;privateKey)\r\n    \r\n\r\n\r\n\r\nI use specular code to read the keys from the keychain.\r\n\r\nThis is the piece of code I use to export the public key as a base64 string:\r\n\r\n    extension SecKey {\r\n      func asBase64() throws -&gt; String {\r\n        var dataPtr: CFTypeRef?\r\n        let query: [String:Any] = [\r\n          kSecClass as String: kSecClassKey,\r\n          kSecAttrApplicationTag as String: &quot;...&quot;, // Same unique tag here\r\n          kSecAttrKeyType as String: kSecAttrKeyTypeRSA,\r\n          kSecReturnData as String: kCFBooleanTrue\r\n        ]\r\n        let result = SecItemCopyMatching(query as CFDictionary, &amp;dataPtr)\r\n        \r\n        switch (result, dataPtr) {\r\n        case (errSecSuccess, .some(let data)):\r\n          // convert to Base64 string\r\n          let base64PublicKey = data.base64EncodedString(options: [])\r\n          return base64PublicKey\r\n        default:\r\n          throw CryptoError.keyConversionError\r\n        }\r\n      }\r\n    }\r\n\r\nAt backend level I use this Java code to convert the base64 string to a public key:\r\n\r\n    public PublicKey publicKeyFrom(String data) throws NoSuchAlgorithmException, InvalidKeySpecException {\r\n    \tbyte[] publicBytes = Base64.decodeBase64(data);\r\n    \tX509EncodedKeySpec keySpec = new X509EncodedKeySpec(publicBytes);\r\n    \tKeyFactory keyFactory = KeyFactory.getInstance(&quot;RSA&quot;);\r\n    \treturn keyFactory.generatePublic(keySpec);\r\n    }\r\n\r\nBut this fails at the last line, with this exception:\r\n\r\n    java.security.spec.InvalidKeySpecException: java.security.InvalidKeyException: IOException: algid parse error, not a sequence\r\n\r\nDoing some manual debugging, I noticed that the format of the public key is different - when I generate a key in iOS and then export as base 64, it looks like this:\r\n\r\n    MIIBCgKCAQEA4M/bRDdH0f6qFIXxOg13RHka+g4Yv8u9PpPp1IR6pSwrM1aq8B6cyKRwnLe/MOkvODvDfJzvGXGQ01zSTxYWAW1B4uc/NCEemCmZqMosSB/VUJdNxxWtt2hJxpz06hAawqV+6HmweAB2dUn9tDEsQLsNHdwYouOKpyRZGimcF9qRFn1RjR0Q54sUh1tQAj/EwmgY2S2bI5TqtZnZw7X7Waji7wWi6Gz88IkuzLAzB9VBNDeV1cfJFiWsZ/MIixSvhpW3dMNCrJShvBouIG8nS+vykBlbFVRGy3gJr8+OcmIq5vuHVhqrWwHNOs+WR87K/qTFO/CB7MiyiIV1b1x5DQIDAQAB\r\n\r\nfor a total of 360 characters, whereas doing the same in Java (still using RSA) it&#39;s like:\r\n\r\n    MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCAAnWO4BXUGP0qM3Op36YXkWNxb4I2pPZuZ7jJtfUO7v+IO1mq43WzNaxLqqLPkTnMrv2ACRDK55vin+leQlL1z0LzVxjtZ9F6pajQo1r7PqBlL5N8bzBFKpagEf0QfyHPw0/0kG9DMnvQ+Im881QyN2zdl33wp5Fi+jRT7cunFQIDAQAB\r\n\r\nwith a length of 216 characters.\r\n\r\nI&#39;m unable to figure out what&#39;s wrong - apparently I wouldn&#39;t be surprised if iOS handles keys in a different key, and require special processing in order to talk with other folks.\r\n\r\nAny idea?","title":"RSA public key created in iOS/Swift and exported as base64 not recognized in Java","body":"<p><em>TL;DR: RSA public key generated in iOS and stored in the keychain, exported as base64 and sent to a java backend, is not recognized.</em></p>\n\n<p>I'm implementing a chat encryption feature in an iOS app, and I'm using symmetric + asymmetric keys to handle it.</p>\n\n<p>Without going too much into details, at backend I use the user's public key to encrypt a symmetric key used to encrypt and decrypt messages.</p>\n\n<p>I created two frameworks, respectively in Swift and in Java (backend) to handle key generation, encryption, decryption, etc. I also have tests for them, so I'm 100% everything works as expected.</p>\n\n<p>However, it looks like the backend is unable to recognize the format of the public key passed from iOS. Using RSA both sides, this is the code I use in Swift to generate the key:</p>\n\n<pre><code>// private key parameters\nstatic let privateKeyParams: [String : Any] = [\n        kSecAttrIsPermanent as String: true,\n        kSecAttrApplicationTag as String: \"...\" // I have a proper unique tag here\n]\n\n// public  key parameters\nstatic let publicKeyParams: [String : Any] = [\n        kSecAttrIsPermanent as String: true,\n        kSecAttrApplicationTag as String: \"...\" // I have a proper unique tag here\n]\n\n// global parameters for our key generation\nstatic let keyCreationParameters: [String : Any] = [\n        kSecAttrKeyType as String: kSecAttrKeyTypeRSA,\n        kSecAttrKeySizeInBits as String: 2048,\n        kSecPublicKeyAttrs as String: publicKeyParams,\n        kSecPrivateKeyAttrs as String: privateKeyParams\n]\n\n...\n\nvar publicKey, privateKey: SecKey?\nlet status = SecKeyGeneratePair(Constants.keyCreationParameters as CFDictionary, &amp;publicKey, &amp;privateKey)\n</code></pre>\n\n<p>I use specular code to read the keys from the keychain.</p>\n\n<p>This is the piece of code I use to export the public key as a base64 string:</p>\n\n<pre><code>extension SecKey {\n  func asBase64() throws -&gt; String {\n    var dataPtr: CFTypeRef?\n    let query: [String:Any] = [\n      kSecClass as String: kSecClassKey,\n      kSecAttrApplicationTag as String: \"...\", // Same unique tag here\n      kSecAttrKeyType as String: kSecAttrKeyTypeRSA,\n      kSecReturnData as String: kCFBooleanTrue\n    ]\n    let result = SecItemCopyMatching(query as CFDictionary, &amp;dataPtr)\n\n    switch (result, dataPtr) {\n    case (errSecSuccess, .some(let data)):\n      // convert to Base64 string\n      let base64PublicKey = data.base64EncodedString(options: [])\n      return base64PublicKey\n    default:\n      throw CryptoError.keyConversionError\n    }\n  }\n}\n</code></pre>\n\n<p>At backend level I use this Java code to convert the base64 string to a public key:</p>\n\n<pre><code>public PublicKey publicKeyFrom(String data) throws NoSuchAlgorithmException, InvalidKeySpecException {\n    byte[] publicBytes = Base64.decodeBase64(data);\n    X509EncodedKeySpec keySpec = new X509EncodedKeySpec(publicBytes);\n    KeyFactory keyFactory = KeyFactory.getInstance(\"RSA\");\n    return keyFactory.generatePublic(keySpec);\n}\n</code></pre>\n\n<p>But this fails at the last line, with this exception:</p>\n\n<pre><code>java.security.spec.InvalidKeySpecException: java.security.InvalidKeyException: IOException: algid parse error, not a sequence\n</code></pre>\n\n<p>Doing some manual debugging, I noticed that the format of the public key is different - when I generate a key in iOS and then export as base 64, it looks like this:</p>\n\n<pre><code>MIIBCgKCAQEA4M/bRDdH0f6qFIXxOg13RHka+g4Yv8u9PpPp1IR6pSwrM1aq8B6cyKRwnLe/MOkvODvDfJzvGXGQ01zSTxYWAW1B4uc/NCEemCmZqMosSB/VUJdNxxWtt2hJxpz06hAawqV+6HmweAB2dUn9tDEsQLsNHdwYouOKpyRZGimcF9qRFn1RjR0Q54sUh1tQAj/EwmgY2S2bI5TqtZnZw7X7Waji7wWi6Gz88IkuzLAzB9VBNDeV1cfJFiWsZ/MIixSvhpW3dMNCrJShvBouIG8nS+vykBlbFVRGy3gJr8+OcmIq5vuHVhqrWwHNOs+WR87K/qTFO/CB7MiyiIV1b1x5DQIDAQAB\n</code></pre>\n\n<p>for a total of 360 characters, whereas doing the same in Java (still using RSA) it's like:</p>\n\n<pre><code>MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCAAnWO4BXUGP0qM3Op36YXkWNxb4I2pPZuZ7jJtfUO7v+IO1mq43WzNaxLqqLPkTnMrv2ACRDK55vin+leQlL1z0LzVxjtZ9F6pajQo1r7PqBlL5N8bzBFKpagEf0QfyHPw0/0kG9DMnvQ+Im881QyN2zdl33wp5Fi+jRT7cunFQIDAQAB\n</code></pre>\n\n<p>with a length of 216 characters.</p>\n\n<p>I'm unable to figure out what's wrong - apparently I wouldn't be surprised if iOS handles keys in a different key, and require special processing in order to talk with other folks.</p>\n\n<p>Any idea?</p>\n"},{"tags":["java","collections","indexing"],"comments":[{"owner":{"account_id":21994,"reputation":73798,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":0,"creation_date":1269623438,"post_id":2501449,"comment_id":2523061,"body_markdown":"I do not fully understand what you mean by &quot;multiple indexes&quot;.  Do you want several different lookup methods - one per index - or do you want that e.g. HashMap uses a new Collection (e.g. a hashmap) for those entries with the same hash key?","body":"I do not fully understand what you mean by &quot;multiple indexes&quot;.  Do you want several different lookup methods - one per index - or do you want that e.g. HashMap uses a new Collection (e.g. a hashmap) for those entries with the same hash key?"},{"owner":{"account_id":110220,"reputation":37362,"user_id":291741,"accept_rate":87,"display_name":"Chris Lercher"},"score":0,"creation_date":1269626143,"post_id":2501449,"comment_id":2523473,"body_markdown":"It should be similar to what you can do with a database table: One primary key (e.g. `user_id`), plus other unique indexes (e.g. on `username`). Both can be used to access a user row. When the user is deleted, then the id and the username are removed from the indexes together with the entry.","body":"It should be similar to what you can do with a database table: One primary key (e.g. <code>user_id</code>), plus other unique indexes (e.g. on <code>username</code>). Both can be used to access a user row. When the user is deleted, then the id and the username are removed from the indexes together with the entry."},{"owner":{"display_name":"user177800"},"score":0,"creation_date":1269894309,"post_id":2501449,"comment_id":2541611,"body_markdown":"you just defined a in memory database, which your requirements state you don&#39;t want.","body":"you just defined a in memory database, which your requirements state you don&#39;t want."},{"owner":{"account_id":6664,"reputation":85917,"user_id":11296,"display_name":"Bert F"},"score":1,"creation_date":1270215861,"post_id":2501449,"comment_id":2571407,"body_markdown":"Related - &quot;How to implement a Map with multiple keys?&quot;  http://stackoverflow.com/questions/822322/how-to-implement-a-map-with-multiple-keys.  No clear solutions there either - it looks like some of the answers are for using a map with a composite key, but the OP there indicated he wants to be able look up by a single-value key.  Nevertheless, seems like a good idea to link the questions in the unlikely event a viable answer turns up over there later.  Also, if the OP here decides on a custom solution, this related question provides some additional ideas on potential implementations.","body":"Related - &quot;How to implement a Map with multiple keys?&quot;  <a href=\"http://stackoverflow.com/questions/822322/how-to-implement-a-map-with-multiple-keys\" title=\"how to implement a map with multiple keys\">stackoverflow.com/questions/822322/&hellip;</a>.  No clear solutions there either - it looks like some of the answers are for using a map with a composite key, but the OP there indicated he wants to be able look up by a single-value key.  Nevertheless, seems like a good idea to link the questions in the unlikely event a viable answer turns up over there later.  Also, if the OP here decides on a custom solution, this related question provides some additional ideas on potential implementations."},{"owner":{"account_id":3432851,"reputation":1818,"user_id":2876739,"display_name":"RickHigh"},"score":0,"creation_date":1383391010,"post_id":2501449,"comment_id":29332933,"body_markdown":"When a Value is removed, all index entries associated with that value must be removed. CHECK! Boon Repo does this.\nIndex lookup must be faster than linear search (at least as fast as a TreeMap). CHECK Boon Repo does this!\nSide conditions:\n\nNo dependencies on large (like Lucene) libraries. No uncommon or not well tested libraries. No database. Boon depends on nothing! CHECK! Boon Repo does all of this. And a lot more, and it is small and tight. :) http://richardhightower.github.io/site/Boon/Welcome.html","body":"When a Value is removed, all index entries associated with that value must be removed. CHECK! Boon Repo does this. Index lookup must be faster than linear search (at least as fast as a TreeMap). CHECK Boon Repo does this! Side conditions:  No dependencies on large (like Lucene) libraries. No uncommon or not well tested libraries. No database. Boon depends on nothing! CHECK! Boon Repo does all of this. And a lot more, and it is small and tight. :) <a href=\"http://richardhightower.github.io/site/Boon/Welcome.html\" rel=\"nofollow noreferrer\">richardhightower.github.io/site/Boon/Welcome.html</a>"},{"owner":{"account_id":166766,"reputation":1040,"user_id":391113,"accept_rate":82,"display_name":"decimus phostle"},"score":0,"creation_date":1390419258,"post_id":2501449,"comment_id":32086776,"body_markdown":"@ChrisLercher: Being a frequent (ab)user of the [Boost Multi-Index Container](http://www.boost.org/doc/libs/1_55_0/libs/multi_index/doc/index.html), not having that capability in Java seems quite crippling. In the (almost) three years since this question was first posed, has any decent/viable options emerged that are reasonably stable? (continued...)","body":"@ChrisLercher: Being a frequent (ab)user of the <a href=\"http://www.boost.org/doc/libs/1_55_0/libs/multi_index/doc/index.html\" rel=\"nofollow noreferrer\">Boost Multi-Index Container</a>, not having that capability in Java seems quite crippling. In the (almost) three years since this question was first posed, has any decent/viable options emerged that are reasonably stable? (continued...)"},{"owner":{"account_id":166766,"reputation":1040,"user_id":391113,"accept_rate":82,"display_name":"decimus phostle"},"score":0,"creation_date":1390419407,"post_id":2501449,"comment_id":32086852,"body_markdown":"I have briefly looked into this and my findings are: i) [CQEngine](https://code.google.com/p/cqengine/) seems to be the most promising at this time. ii) [Guava&#39;s Table](https://code.google.com/p/guava-libraries/wiki/NewCollectionTypesExplained#Table) abstraction seems a bit limited. (continued...)","body":"I have briefly looked into this and my findings are: i) <a href=\"https://code.google.com/p/cqengine/\" rel=\"nofollow noreferrer\">CQEngine</a> seems to be the most promising at this time. ii) <a href=\"https://code.google.com/p/guava-libraries/wiki/NewCollectionTypesExplained#Table\" rel=\"nofollow noreferrer\">Guava&#39;s Table</a> abstraction seems a bit limited. (continued...)"},{"owner":{"account_id":166766,"reputation":1040,"user_id":391113,"accept_rate":82,"display_name":"decimus phostle"},"score":0,"creation_date":1390419436,"post_id":2501449,"comment_id":32086876,"body_markdown":"iii) Neither did using filtering(say with [JFilter](https://code.google.com/p/jfilter/) or with [Guava Predicates](https://code.google.com/p/guava-libraries/wiki/FunctionalExplained#Predicates)) or using SQL-like([JoSQL](http://josql.sourceforge.net/)) abstractions seem as appealing. iv) [Boon](http://richardhightower.github.io/site/Boon/Welcome.html) seems promising, but at this time seems like a work-in-progress compared to CQEngine. (continued...)","body":"iii) Neither did using filtering(say with <a href=\"https://code.google.com/p/jfilter/\" rel=\"nofollow noreferrer\">JFilter</a> or with <a href=\"https://code.google.com/p/guava-libraries/wiki/FunctionalExplained#Predicates\" rel=\"nofollow noreferrer\">Guava Predicates</a>) or using SQL-like(<a href=\"http://josql.sourceforge.net/\" rel=\"nofollow noreferrer\">JoSQL</a>) abstractions seem as appealing. iv) <a href=\"http://richardhightower.github.io/site/Boon/Welcome.html\" rel=\"nofollow noreferrer\">Boon</a> seems promising, but at this time seems like a work-in-progress compared to CQEngine. (continued...)"},{"owner":{"account_id":166766,"reputation":1040,"user_id":391113,"accept_rate":82,"display_name":"decimus phostle"},"score":0,"creation_date":1390419477,"post_id":2501449,"comment_id":32086901,"body_markdown":"Please let me know if you or anyone else has any new insights/knowledge of alternate/better solutions. Thanks.","body":"Please let me know if you or anyone else has any new insights/knowledge of alternate/better solutions. Thanks."}],"answers":[{"tags":[],"owner":{"account_id":9867,"reputation":618181,"user_id":18393,"accept_rate":82,"display_name":"cletus"},"down_vote_count":1,"up_vote_count":25,"is_accepted":true,"score":24,"last_activity_date":1269360118,"creation_date":1269360118,"answer_id":2501490,"question_id":2501449,"body_markdown":"Each index will basically be a separate `Map`. You can (and probably should) abstract this behind a class that manages the searches, indexing, updates and removals for you. It wouldn&#39;t be hard to do this fairly generically. But no, there&#39;s no standard out of the box class for this although it can easily be built from the Java Collections classes.","title":"Multiple indexes for a Java Collection - most basic solution?","body":"<p>Each index will basically be a separate <code>Map</code>. You can (and probably should) abstract this behind a class that manages the searches, indexing, updates and removals for you. It wouldn't be hard to do this fairly generically. But no, there's no standard out of the box class for this although it can easily be built from the Java Collections classes.</p>\n"},{"tags":[],"owner":{"account_id":36232,"reputation":26946,"user_id":103206,"accept_rate":67,"display_name":"Jay"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1269361698,"creation_date":1269361698,"answer_id":2501721,"question_id":2501449,"body_markdown":"My first thought would be to create a class for the thing being indexed, then create multiple HashMap&#39;s to hold the indexes, with the same object added to each of the HashMaps. For an add, you&#39;d then simply add the same object to each HashMap. A delete would require searching each HashMap for the reference to the destination object. If deletes need to be fast, you might want to create two HashMaps for each index: one for index-to-value and the other for value-to-index. Of course I&#39;d wrap whatever you do in a class with a clearly-defined interface.\r\n\r\nDoesn&#39;t seem like this would be hard. If you know the numbers and types of the indexes and the class of the widget up front, it would be pretty easy, like:\r\n\r\n    public class MultiIndex\r\n    {\r\n      HashMap&lt;String,Widget&gt; index1=new HashMap&lt;String,Widget&gt;();\r\n      HashMap&lt;String,Widget&gt; index2=new HashMap&lt;String,Widget&gt;();\r\n      HashMap&lt;Integer,Widget&gt; index3=new HashMap&lt;Integer,Widget&gt;();\r\n    \r\n      public void add(String index1Value, String index2Value, Integer index3Value, Widget widget)\r\n      {\r\n        index1.put(index1Value, widget);\r\n        index2.put(index2Value, widget);\r\n        index3.put(index3Value, widget);\r\n      }\r\n      public void delete(Widget widget)\r\n      {\r\n        Iterator i=index1.keySet().iterator(); \r\n        while (i.hasNext())\r\n        {\r\n          String index1Value=(String)i.next();\r\n          Widget gotWidget=(Widget) index1.get(index1Value);\r\n          if (gotWidget.equals(widget))\r\n            i.remove();\r\n        }\r\n        ... similarly for other indexes ...\r\n      }\r\n      public Widget getByIndex1(String index1Value)\r\n      {\r\n        return index1.get(index1Value);\r\n      }\r\n      ... similarly for other indexes ...\r\n    \r\n      }\r\n    }\r\n\r\nIf you want to make it generic and accept any object, have variable number and types of indexes, etc., it&#39;s a little more complicated, but not much.\r\n","title":"Multiple indexes for a Java Collection - most basic solution?","body":"<p>My first thought would be to create a class for the thing being indexed, then create multiple HashMap's to hold the indexes, with the same object added to each of the HashMaps. For an add, you'd then simply add the same object to each HashMap. A delete would require searching each HashMap for the reference to the destination object. If deletes need to be fast, you might want to create two HashMaps for each index: one for index-to-value and the other for value-to-index. Of course I'd wrap whatever you do in a class with a clearly-defined interface.</p>\n\n<p>Doesn't seem like this would be hard. If you know the numbers and types of the indexes and the class of the widget up front, it would be pretty easy, like:</p>\n\n<pre><code>public class MultiIndex\n{\n  HashMap&lt;String,Widget&gt; index1=new HashMap&lt;String,Widget&gt;();\n  HashMap&lt;String,Widget&gt; index2=new HashMap&lt;String,Widget&gt;();\n  HashMap&lt;Integer,Widget&gt; index3=new HashMap&lt;Integer,Widget&gt;();\n\n  public void add(String index1Value, String index2Value, Integer index3Value, Widget widget)\n  {\n    index1.put(index1Value, widget);\n    index2.put(index2Value, widget);\n    index3.put(index3Value, widget);\n  }\n  public void delete(Widget widget)\n  {\n    Iterator i=index1.keySet().iterator(); \n    while (i.hasNext())\n    {\n      String index1Value=(String)i.next();\n      Widget gotWidget=(Widget) index1.get(index1Value);\n      if (gotWidget.equals(widget))\n        i.remove();\n    }\n    ... similarly for other indexes ...\n  }\n  public Widget getByIndex1(String index1Value)\n  {\n    return index1.get(index1Value);\n  }\n  ... similarly for other indexes ...\n\n  }\n}\n</code></pre>\n\n<p>If you want to make it generic and accept any object, have variable number and types of indexes, etc., it's a little more complicated, but not much.</p>\n"},{"tags":[],"owner":{"account_id":50088,"reputation":2016,"user_id":149282,"display_name":"Jared Levy"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1269801413,"creation_date":1269740456,"answer_id":2531604,"question_id":2501449,"body_markdown":"I&#39;ve written a Table interface that includes methods like \r\n\r\n    V put(R rowKey, C columnKey, V value) \r\n    V get(Object rowKey, Object columnKey) \r\n    Map&lt;R,V&gt; column(C columnKey) \r\n    Set&lt;C&gt; columnKeySet()\r\n    Map&lt;C,V&gt; row(R rowKey)\r\n    Set&lt;R&gt; rowKeySet()\r\n    Set&lt;Table.Cell&lt;R,C,V&gt;&gt; cellSet()\r\n\r\nWe&#39;d like to include it in a future Guava release, but I don&#39;t know when that would happen.\r\nhttp://code.google.com/p/guava-libraries/issues/detail?id=173","title":"Multiple indexes for a Java Collection - most basic solution?","body":"<p>I've written a Table interface that includes methods like </p>\n\n<pre><code>V put(R rowKey, C columnKey, V value) \nV get(Object rowKey, Object columnKey) \nMap&lt;R,V&gt; column(C columnKey) \nSet&lt;C&gt; columnKeySet()\nMap&lt;C,V&gt; row(R rowKey)\nSet&lt;R&gt; rowKeySet()\nSet&lt;Table.Cell&lt;R,C,V&gt;&gt; cellSet()\n</code></pre>\n\n<p>We'd like to include it in a future Guava release, but I don't know when that would happen.\n<a href=\"http://code.google.com/p/guava-libraries/issues/detail?id=173\" rel=\"nofollow noreferrer\">http://code.google.com/p/guava-libraries/issues/detail?id=173</a></p>\n"},{"tags":[],"owner":{"account_id":43546,"reputation":33497,"user_id":127359,"accept_rate":85,"display_name":"Arthur Ronald"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1269892981,"creation_date":1269892981,"answer_id":2540868,"question_id":2501449,"body_markdown":"[Google Collections][1] [LinkedListMultimap][2]\r\n\r\nAbout your first requirement\r\n\r\n - When a Value is removed, all index entries associated with that value must be removed.\r\n\r\nI think There is neither a library nor a Helper that supports it.\r\n\r\nHere is how i have done by using LinkedListMultimap\r\n\r\n    Multimap&lt;Integer, String&gt; multimap = LinkedListMultimap.create();\r\n\r\n    // Three duplicates entries\r\n    multimap.put(1, &quot;A&quot;);\r\n    multimap.put(2, &quot;B&quot;);\r\n    multimap.put(1, &quot;A&quot;);\r\n    multimap.put(4, &quot;C&quot;);\r\n    multimap.put(1, &quot;A&quot;);\r\n\r\n    System.out.println(multimap.size()); // outputs 5\r\n\r\nTo get your first requirement, a Helper can play a good job\r\n\r\n    public static &lt;K, V&gt; void removeAllIndexEntriesAssociatedWith(Multimap&lt;K, V&gt; multimap, V value) {\r\n        Collection&lt;Map.Entry&lt;K, V&gt;&gt; eCollection = multimap.entries();\r\n        for (Map.Entry&lt;K, V&gt; entry : eCollection)\r\n            if(entry.getValue().equals(value))\r\n                eCollection.remove(entry);\r\n    }\r\n    \r\n...\r\n \r\n    removeAllIndexEntriesAssociatedWith(multimap, &quot;A&quot;);\r\n\r\n    System.out.println(multimap.size()); // outputs 2\r\n\r\nGoogle collections is\r\n\r\n - lightweight\r\n - Supported by Joshua Block (Effective Java)\r\n - Nice features as ImmutableList, ImmutableMap and so on\r\n\r\n\r\n  [1]: http://code.google.com/p/google-collections/\r\n  [2]: http://google-collections.googlecode.com/svn/trunk/javadoc/com/google/common/collect/LinkedListMultimap.html#entries%28%29","title":"Multiple indexes for a Java Collection - most basic solution?","body":"<p><a href=\"http://code.google.com/p/google-collections/\" rel=\"nofollow noreferrer\">Google Collections</a> <a href=\"http://google-collections.googlecode.com/svn/trunk/javadoc/com/google/common/collect/LinkedListMultimap.html#entries%28%29\" rel=\"nofollow noreferrer\">LinkedListMultimap</a></p>\n\n<p>About your first requirement</p>\n\n<ul>\n<li>When a Value is removed, all index entries associated with that value must be removed.</li>\n</ul>\n\n<p>I think There is neither a library nor a Helper that supports it.</p>\n\n<p>Here is how i have done by using LinkedListMultimap</p>\n\n<pre><code>Multimap&lt;Integer, String&gt; multimap = LinkedListMultimap.create();\n\n// Three duplicates entries\nmultimap.put(1, \"A\");\nmultimap.put(2, \"B\");\nmultimap.put(1, \"A\");\nmultimap.put(4, \"C\");\nmultimap.put(1, \"A\");\n\nSystem.out.println(multimap.size()); // outputs 5\n</code></pre>\n\n<p>To get your first requirement, a Helper can play a good job</p>\n\n<pre><code>public static &lt;K, V&gt; void removeAllIndexEntriesAssociatedWith(Multimap&lt;K, V&gt; multimap, V value) {\n    Collection&lt;Map.Entry&lt;K, V&gt;&gt; eCollection = multimap.entries();\n    for (Map.Entry&lt;K, V&gt; entry : eCollection)\n        if(entry.getValue().equals(value))\n            eCollection.remove(entry);\n}\n</code></pre>\n\n<p>...</p>\n\n<pre><code>removeAllIndexEntriesAssociatedWith(multimap, \"A\");\n\nSystem.out.println(multimap.size()); // outputs 2\n</code></pre>\n\n<p>Google collections is</p>\n\n<ul>\n<li>lightweight</li>\n<li>Supported by Joshua Block (Effective Java)</li>\n<li>Nice features as ImmutableList, ImmutableMap and so on</li>\n</ul>\n"},{"tags":[],"owner":{"display_name":"user177800"},"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1269897106,"creation_date":1269894241,"answer_id":2541012,"question_id":2501449,"body_markdown":"You have a lot of really constrictive requirements are appear to be very particular to your needs. Most of the things you are saying aren&#39;t viable are because a lot so of people have the same exact needs which basically defines a basic database engine. That is why they are &quot;large&quot; libraries. You say &quot;no database&quot; but at its core every indexing system is a &quot;database&quot; of terms and documents. I would argue that a Collection is a &quot;database&quot;. I would say take a look at [Space4J][1].  \r\n\r\nI would say if you don&#39;t find what you are looking for, start a project on GitHub and get on with coding it yourself and sharing the results.\r\n\r\n\r\n  [1]: http://www.space4j.org/","title":"Multiple indexes for a Java Collection - most basic solution?","body":"<p>You have a lot of really constrictive requirements are appear to be very particular to your needs. Most of the things you are saying aren't viable are because a lot so of people have the same exact needs which basically defines a basic database engine. That is why they are \"large\" libraries. You say \"no database\" but at its core every indexing system is a \"database\" of terms and documents. I would argue that a Collection is a \"database\". I would say take a look at <a href=\"http://www.space4j.org/\" rel=\"nofollow noreferrer\">Space4J</a>.  </p>\n\n<p>I would say if you don't find what you are looking for, start a project on GitHub and get on with coding it yourself and sharing the results.</p>\n"},{"tags":[],"owner":{"account_id":56079,"reputation":7550,"user_id":167973,"accept_rate":82,"display_name":"Carl"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1269898249,"creation_date":1269898249,"answer_id":2541424,"question_id":2501449,"body_markdown":"I&#39;m not sure I understand the question, but I think what you&#39;re asking for is multiple ways to map from different, unique keys to values and appropriate clean-up when a value goes away.\r\n\r\nI see that you don&#39;t want to roll your own, but there&#39;s a simple enough composition of map and multimap (I used the Guava multimap below, but the Apache one should work as well) to do what you want.  I have a quick and dirty solution below (skipped the constructors, since that depends on what sort of underlying map/multimap you want to use):\r\n\r\n    package edu.cap10.common.collect;\r\n    \r\n    import java.util.Collection;\r\n    import java.util.Map;\r\n    \r\n    import com.google.common.collect.ForwardingMap;\r\n    import com.google.common.collect.Multimap;\r\n    \r\n    public class MIndexLookupMap&lt;T&gt; extends ForwardingMap&lt;Object,T&gt;{\r\n    \r\n    \tMap&lt;Object,T&gt; delegate;\r\n    \tMultimap&lt;T,Object&gt; reverse;\r\n    \t\r\n    \t@Override protected Map&lt;Object, T&gt; delegate() { return delegate; }\r\n    \r\n    \t@Override public void clear() {\r\n    \t\tdelegate.clear();\r\n    \t\treverse.clear();\r\n    \t}\r\n    \r\n    \t@Override public boolean containsValue(Object value) { return reverse.containsKey(value); }\r\n    \r\n    \t@Override public T put(Object key, T value) {\r\n    \t\tif (containsKey(key) &amp;&amp; !get(key).equals(value)) reverse.remove(get(key), key); \r\n    \t\treverse.put(value, key);\r\n    \t\treturn delegate.put(key, value);\r\n    \t}\r\n    \r\n    \t@Override public void putAll(Map&lt;? extends Object, ? extends T&gt; m) {\r\n    \t\tfor (Entry&lt;? extends Object,? extends T&gt; e : m.entrySet()) put(e.getKey(),e.getValue());\r\n    \t}\r\n    \r\n    \tpublic T remove(Object key) {\r\n    \t\tT result = delegate.remove(key);\r\n    \t\treverse.remove(result, key);\r\n    \t\treturn result;\r\n    \t}\r\n    \t\r\n    \tpublic void removeValue(T value) {\r\n    \t\tfor (Object key : reverse.removeAll(value)) delegate.remove(key);\r\n    \t}\r\n    \r\n    \tpublic Collection&lt;T&gt; values() {\r\n    \t\treturn reverse.keySet();\r\n    \t}\t\r\n    \t\r\n    }\r\n\r\nremoval is O(number of keys), but everything else is the same order as a typical map implementation (some extra constant scaling, since you also have to add things to the reverse).\r\n\r\nI just used `Object` keys (should be fine with appropriate implementations of `equals()` and `hashCode()` and key distinction) - but you could also have a more specific type of key. ","title":"Multiple indexes for a Java Collection - most basic solution?","body":"<p>I'm not sure I understand the question, but I think what you're asking for is multiple ways to map from different, unique keys to values and appropriate clean-up when a value goes away.</p>\n\n<p>I see that you don't want to roll your own, but there's a simple enough composition of map and multimap (I used the Guava multimap below, but the Apache one should work as well) to do what you want.  I have a quick and dirty solution below (skipped the constructors, since that depends on what sort of underlying map/multimap you want to use):</p>\n\n<pre><code>package edu.cap10.common.collect;\n\nimport java.util.Collection;\nimport java.util.Map;\n\nimport com.google.common.collect.ForwardingMap;\nimport com.google.common.collect.Multimap;\n\npublic class MIndexLookupMap&lt;T&gt; extends ForwardingMap&lt;Object,T&gt;{\n\n    Map&lt;Object,T&gt; delegate;\n    Multimap&lt;T,Object&gt; reverse;\n\n    @Override protected Map&lt;Object, T&gt; delegate() { return delegate; }\n\n    @Override public void clear() {\n        delegate.clear();\n        reverse.clear();\n    }\n\n    @Override public boolean containsValue(Object value) { return reverse.containsKey(value); }\n\n    @Override public T put(Object key, T value) {\n        if (containsKey(key) &amp;&amp; !get(key).equals(value)) reverse.remove(get(key), key); \n        reverse.put(value, key);\n        return delegate.put(key, value);\n    }\n\n    @Override public void putAll(Map&lt;? extends Object, ? extends T&gt; m) {\n        for (Entry&lt;? extends Object,? extends T&gt; e : m.entrySet()) put(e.getKey(),e.getValue());\n    }\n\n    public T remove(Object key) {\n        T result = delegate.remove(key);\n        reverse.remove(result, key);\n        return result;\n    }\n\n    public void removeValue(T value) {\n        for (Object key : reverse.removeAll(value)) delegate.remove(key);\n    }\n\n    public Collection&lt;T&gt; values() {\n        return reverse.keySet();\n    }   \n\n}\n</code></pre>\n\n<p>removal is O(number of keys), but everything else is the same order as a typical map implementation (some extra constant scaling, since you also have to add things to the reverse).</p>\n\n<p>I just used <code>Object</code> keys (should be fine with appropriate implementations of <code>equals()</code> and <code>hashCode()</code> and key distinction) - but you could also have a more specific type of key. </p>\n"},{"tags":[],"owner":{"account_id":8546,"reputation":17688,"user_id":15472,"accept_rate":87,"display_name":"tucuxi"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1269986590,"creation_date":1269986590,"answer_id":2549060,"question_id":2501449,"body_markdown":"Use [Prefuse][1] [Tables][2]. They support as many indices as you want, are fast (indices are TreeMaps), and have nice filtering options (boolean filters? no problem!). No database required, tested with large data-sets in many information visualization applications. \r\n\r\nIn their raw form, they are not as convenient as standard containers (you need to deal with rows and columns), but you can surely write a small wrapper around that. Plus, they plug nicely into UI components such as Swing&#39;s JTables.\r\n\r\n  [1]: http://prefuse.org/\r\n  [2]: http://prefuse.org/doc/api/prefuse/data/Table.html","title":"Multiple indexes for a Java Collection - most basic solution?","body":"<p>Use <a href=\"http://prefuse.org/\" rel=\"nofollow noreferrer\">Prefuse</a> <a href=\"http://prefuse.org/doc/api/prefuse/data/Table.html\" rel=\"nofollow noreferrer\">Tables</a>. They support as many indices as you want, are fast (indices are TreeMaps), and have nice filtering options (boolean filters? no problem!). No database required, tested with large data-sets in many information visualization applications. </p>\n\n<p>In their raw form, they are not as convenient as standard containers (you need to deal with rows and columns), but you can surely write a small wrapper around that. Plus, they plug nicely into UI components such as Swing's JTables.</p>\n"},{"tags":[],"owner":{"account_id":600464,"reputation":345,"user_id":294905,"display_name":"Anon"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1270221883,"creation_date":1270221336,"answer_id":2567407,"question_id":2501449,"body_markdown":"Your main goal seems to be that you&#39;ll remove the object from all indexes when you remove it from one.\r\n\r\nThe simplest approach will be to add another layer of indirection: you store your actual object in a `Map&lt;Long,Value&gt;`, and use a bidirectional map (which you&#39;ll find in Jakarta Commons and probably Google Code) for your indexes as `Map&lt;Key,Long&gt;`. When you remove an entry from a particular index, you&#39;ll take the `Long` value from that index and use it to remove the corresponding entries from the main map and the other indexes.\r\n\r\nOne alternative to the BIDIMap is to define your &quot;index&quot; maps as `Map&lt;Key,WeakReference&lt;Long&gt;&gt;`; however, this will require you to implement a `ReferenceQueue` for cleanup.\r\n\r\n----\r\n\r\nAnother alternative is to create a key object that can take an arbitrary tuple, define its `equals()` method to match on any element in the tuple, and use that with a `TreeMap`. You can&#39;t use a `HashMap`, because you won&#39;t be able to compute a hashcode based on just one element of the tuple.\r\n\r\n    public class MultiKey\r\n    implements Comparable&lt;Object&gt;\r\n    {\r\n       private Comparable&lt;?&gt;[] _keys;\r\n       private Comparable _matchKey;\r\n       private int _matchPosition;\r\n    \r\n       /**\r\n        *  This constructor is for inserting values into the map.\r\n        */\r\n       public MultiKey(Comparable&lt;?&gt;... keys)\r\n       {\r\n          // yes, this is making the object dependent on externally-changable\r\n          // data; if you&#39;re paranoid, copy the array\r\n          _keys = keys;\r\n       }\r\n    \r\n    \r\n       /**\r\n        *  This constructor is for map probes.\r\n        */\r\n       public MultiKey(Comparable key, int position)\r\n       {\r\n          _matchKey = key;\r\n          _matchPosition = position;\r\n       }\r\n    \r\n    \r\n       @Override\r\n       public boolean equals(Object obj)\r\n       {\r\n          // verify that obj != null and is castable to MultiKey\r\n          if (_keys != null)\r\n          {\r\n             // check every element\r\n          }\r\n          else\r\n          {\r\n             // check single element\r\n          }\r\n       }\r\n    \r\n    \r\n       public int compareTo(Object o)\r\n       {\r\n          // follow same pattern as equals()\r\n       }\r\n    }\r\n\r\n ","title":"Multiple indexes for a Java Collection - most basic solution?","body":"<p>Your main goal seems to be that you'll remove the object from all indexes when you remove it from one.</p>\n\n<p>The simplest approach will be to add another layer of indirection: you store your actual object in a <code>Map&lt;Long,Value&gt;</code>, and use a bidirectional map (which you'll find in Jakarta Commons and probably Google Code) for your indexes as <code>Map&lt;Key,Long&gt;</code>. When you remove an entry from a particular index, you'll take the <code>Long</code> value from that index and use it to remove the corresponding entries from the main map and the other indexes.</p>\n\n<p>One alternative to the BIDIMap is to define your \"index\" maps as <code>Map&lt;Key,WeakReference&lt;Long&gt;&gt;</code>; however, this will require you to implement a <code>ReferenceQueue</code> for cleanup.</p>\n\n<hr>\n\n<p>Another alternative is to create a key object that can take an arbitrary tuple, define its <code>equals()</code> method to match on any element in the tuple, and use that with a <code>TreeMap</code>. You can't use a <code>HashMap</code>, because you won't be able to compute a hashcode based on just one element of the tuple.</p>\n\n<pre><code>public class MultiKey\nimplements Comparable&lt;Object&gt;\n{\n   private Comparable&lt;?&gt;[] _keys;\n   private Comparable _matchKey;\n   private int _matchPosition;\n\n   /**\n    *  This constructor is for inserting values into the map.\n    */\n   public MultiKey(Comparable&lt;?&gt;... keys)\n   {\n      // yes, this is making the object dependent on externally-changable\n      // data; if you're paranoid, copy the array\n      _keys = keys;\n   }\n\n\n   /**\n    *  This constructor is for map probes.\n    */\n   public MultiKey(Comparable key, int position)\n   {\n      _matchKey = key;\n      _matchPosition = position;\n   }\n\n\n   @Override\n   public boolean equals(Object obj)\n   {\n      // verify that obj != null and is castable to MultiKey\n      if (_keys != null)\n      {\n         // check every element\n      }\n      else\n      {\n         // check single element\n      }\n   }\n\n\n   public int compareTo(Object o)\n   {\n      // follow same pattern as equals()\n   }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":148949,"reputation":361,"user_id":361092,"accept_rate":80,"display_name":"Fekete Kamosh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1300824875,"creation_date":1300743671,"answer_id":5384089,"question_id":2501449,"body_markdown":"lets look at project http://code.google.com/p/multiindexcontainer/wiki/MainPage\r\nThis is generalized way how to use maps for JavaBean getters and perform lookups over indexed values.\r\nI think this is what you are looking for. Lets give it a try.\r\n","title":"Multiple indexes for a Java Collection - most basic solution?","body":"<p>lets look at project <a href=\"http://code.google.com/p/multiindexcontainer/wiki/MainPage\" rel=\"nofollow\">http://code.google.com/p/multiindexcontainer/wiki/MainPage</a>\nThis is generalized way how to use maps for JavaBean getters and perform lookups over indexed values.\nI think this is what you are looking for. Lets give it a try.</p>\n"},{"tags":[],"owner":{"account_id":429234,"reputation":3009,"user_id":812018,"display_name":"npgall"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1348887648,"creation_date":1348887648,"answer_id":12649579,"question_id":2501449,"body_markdown":"Take a look at [CQEngine (Collection Query Engine)](http://code.google.com/p/cqengine/), it&#39;s an exact fit for this kind of requirement, being based around an `IndexedCollection`.\r\n\r\nAlso see related question [How do you query object collections in Java (Criteria/SQL-like)?](https://stackoverflow.com/questions/93417/how-do-you-query-object-collections-in-java-criteria-sql-like/11712925#11712925) for more background.","title":"Multiple indexes for a Java Collection - most basic solution?","body":"<p>Take a look at <a href=\"http://code.google.com/p/cqengine/\" rel=\"nofollow noreferrer\">CQEngine (Collection Query Engine)</a>, it's an exact fit for this kind of requirement, being based around an <code>IndexedCollection</code>.</p>\n\n<p>Also see related question <a href=\"https://stackoverflow.com/questions/93417/how-do-you-query-object-collections-in-java-criteria-sql-like/11712925#11712925\">How do you query object collections in Java (Criteria/SQL-like)?</a> for more background.</p>\n"},{"tags":[],"owner":{"account_id":1221414,"reputation":31,"user_id":1187999,"display_name":"Jan Wiemer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1366388583,"creation_date":1366388583,"answer_id":16109192,"question_id":2501449,"body_markdown":"Basically a solution based on multiple hash maps would be possible, but in this case all of them have to be keped up-to-date manually. A very simple integrated solution can be found here: [http://insidecoffe.blogspot.de/2013/04/indexable-hashmap-implementation.html][1]\r\n\r\n\r\n  [1]: http://insidecoffe.blogspot.de/2013/04/indexable-hashmap-implementation.html","title":"Multiple indexes for a Java Collection - most basic solution?","body":"<p>Basically a solution based on multiple hash maps would be possible, but in this case all of them have to be keped up-to-date manually. A very simple integrated solution can be found here: <a href=\"http://insidecoffe.blogspot.de/2013/04/indexable-hashmap-implementation.html\" rel=\"nofollow\">http://insidecoffe.blogspot.de/2013/04/indexable-hashmap-implementation.html</a></p>\n"},{"tags":[],"owner":{"account_id":3432851,"reputation":1818,"user_id":2876739,"display_name":"RickHigh"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1383390926,"creation_date":1383390926,"answer_id":19741310,"question_id":2501449,"body_markdown":"You need to check out Boon. :)\r\n\r\nhttp://rick-hightower.blogspot.com/2013/11/what-if-java-collections-and-java.html\r\n\r\n\r\nYou can add n number of search indexes and lookup indexes. It also allows you to efficiently query primitive properties. \r\n\r\nHere is an example take from the wiki (I am the author).\r\n\r\n      repoBuilder.primaryKey(&quot;ssn&quot;)\r\n              .searchIndex(&quot;firstName&quot;).searchIndex(&quot;lastName&quot;)\r\n              .searchIndex(&quot;salary&quot;).searchIndex(&quot;empNum&quot;, true)\r\n              .usePropertyForAccess(true);\r\n\r\nYou can override that by providing a true flag as the second argument to searchIndex.\r\n\r\nNotice empNum is a searchable unique index.\r\n\r\n\r\nWhat if it were easy to query a complex set of Java objects at runtime? What if there were an API that kept your object indexes (really just TreeMaps, and HashMaps) in sync.? Well then you would have Boon&#39;s data repo. This article shows how to use Boon&#39;s data repo utilities to query Java objects. This is part one. There can be many, many parts. :)\r\nBoon&#39;s data repo makes doing index based queries on collections a lot easier.\r\nWhy Boon data repo\r\n\r\nBoon&#39;s data repo allows you to treat Java collections more like a database at least when it comes to querying the collections. Boon&#39;s data repo is not an in-memory database, and cannot substitute arranging your objects into data structures optimized for your application.\r\nIf you want to spend your time providing customer value and building your objects and classes and using the Collections API for your data structures, then DataRepo is meant for you. This does not preclude breaking out the Knuth books and coming up with an optimized data structure. It just helps keep the mundane things easy so you can spend your time making the hard things possible.\r\nBorn out of need\r\n\r\nThis project came out of a need. I was working on a project that planned to store large collection of domain objects in-memory for speed, and somebody asked an all to important question that I overlooked. How are we going to query this data. My answer was we will use the Collections API and the Streaming API. Then I tried to do this... Hmmm...\r\nI also tired using the JDK 8 stream API on a large data set, and it was slow. (Boon&#39;s data repo works with JDK7 and JDK8). It was a linear search/filter. This is by design, but for what I was doing, it did not work. I needed indexes to support arbitrary queries.\r\nBoon&#39;s data repo augments the streaming API.\r\n\r\nBoon&#39;s data repo does not endeavor to replace the JDK 8 stream API, and in fact it works well with it. Boon&#39;s data repo allows you to create indexed collections. The indexes can be anything (it is pluggable).\r\nAt this moment in time, Boon&#39;s data repo indexes are based on ConcurrentHashMap and ConcurrentSkipListMap.\r\nBy design, Boon&#39;s data repo works with standard collection libraries. There is no plan to create a set of custom collections. One should be able to plug in Guava, Concurrent Trees or Trove if one desires to do so.\r\nIt provides a simplified API for doing so. It allows linear search for a sense of completion but I recommend using it primarily for using indexes and then using the streaming API for the rest (for type safety and speed).\r\n\r\n\r\n\r\n\r\n\r\nsneak peak before the step by step\r\n\r\nLet&#39;s say you have a method that creates 200,000 employee objects like this:\r\n \r\n     List&lt;Employee&gt; employees = TestHelper.createMetricTonOfEmployees(200_000);\r\n\r\nSo now we have 200,000 employees. Let&#39;s search them...\r\n\r\n\r\nFirst wrap Employees in a searchable query:\r\n\r\n\r\n       employees = query(employees);\r\n\r\n\r\nNow search:\r\n\r\n\r\n      List&lt;Employee&gt; results = query(employees, eq(&quot;firstName&quot;, firstName));\r\n\r\n\r\nSo what is the main difference between the above and the stream API?\r\n\r\n\r\n      employees.stream().filter(emp -&gt; emp.getFirstName().equals(firstName)\r\n\r\n\r\nAbout a factor of 20,000% faster to use Boon&#39;s DataRepo! Ah the power of HashMaps and TreeMaps. :)\r\nThere is an API that looks just like your built-in collections. There is also an API that looks more like a DAO object or a Repo Object.\r\n\r\n\r\nA simple query with the Repo/DAO object looks like this:\r\n\r\n\r\n      List&lt;Employee&gt; employees = repo.query(eq(&quot;firstName&quot;, &quot;Diana&quot;));\r\n\r\n\r\nA more involved query would look like this:\r\n\r\n\r\n      List&lt;Employee&gt; employees = repo.query(\r\n          and(eq(&quot;firstName&quot;, &quot;Diana&quot;), eq(&quot;lastName&quot;, &quot;Smith&quot;), eq(&quot;ssn&quot;, &quot;21785999&quot;)));\r\n\r\nOr this:\r\n\r\n\r\n      List&lt;Employee&gt; employees = repo.query(\r\n          and(startsWith(&quot;firstName&quot;, &quot;Bob&quot;), eq(&quot;lastName&quot;, &quot;Smith&quot;), lte(&quot;salary&quot;, 200_000),\r\n                  gte(&quot;salary&quot;, 190_000)));\r\n\r\nOr even this:\r\n\r\n\r\n      List&lt;Employee&gt; employees = repo.query(\r\n          and(startsWith(&quot;firstName&quot;, &quot;Bob&quot;), eq(&quot;lastName&quot;, &quot;Smith&quot;), between(&quot;salary&quot;, 190_000, 200_000)));\r\n\r\n\r\nOr if you want to use JDK 8 stream API, this works with it not against it:\r\n\r\n      int sum = repo.query(eq(&quot;lastName&quot;, &quot;Smith&quot;)).stream().filter(emp -&gt; emp.getSalary()&gt;50_000)\r\n          .mapToInt(b -&gt; b.getSalary())\r\n          .sum();\r\n\r\n\r\nThe above would be much faster if the number of employees was quite large. It would narrow down the employees whose name started with Smith and had a salary above 50,000. Let&#39;s say you had 100,000 employees and only 50 named Smith so now you narrow to 50 quickly by using the index which effectively pulls 50 employees out of 100,000, then we do the filter over just 50 instead of the whole 100,000.\r\n\r\nHere is a benchmark run from data repo of a linear search versus an indexed search in nano seconds:\r\n\r\n    Name index  Time 218 \r\n    Name linear  Time 3709120 \r\n    Name index  Time 213 \r\n    Name linear  Time 3606171 \r\n    Name index  Time 219 \r\n    Name linear  Time 3528839\r\n\r\nSomeone recently said to me: &quot;But with the streaming API, you can run the filter in parralel).\r\n\r\nLet&#39;s see how the math holds up:\r\n\r\n\r\n    3,528,839 / 16 threads vs. 219\r\n\r\n    201,802 vs. 219 (nano-seconds).\r\n\r\nIndexes win, but it was a photo finish. NOT! :) \r\n\r\nIt was only 9,500% faster instead of 40,000% faster. So close.....\r\n\r\n\r\n\r\n\r\nI added some more features. They are make heavy use of indexes. :)\r\n\r\n repo.updateByFilter(values(value(&quot;firstName&quot;, &quot;Di&quot;)),\r\n                and( eq(&quot;firstName&quot;, &quot;Diana&quot;),\r\n                        eq(&quot;lastName&quot;, &quot;Smith&quot;),\r\n                        eq(&quot;ssn&quot;, &quot;21785999&quot;) ) );\r\n\r\n\r\nThe above would be equivalent to\r\n\r\n  UPDATE Employee e\r\n   SET e.firstName=&#39;Di&#39;\r\n  WHERE e.firstName = &#39;Diana&#39;\r\n    and e.lastName = &#39;Smith&#39;\r\n    and e.ssn = &#39;21785999&#39;\r\n\r\n\r\nThis allows you to set multiple fields at once on multiple records so if you were doing a bulk update.\r\n\r\n\r\nThere are overloaded methods for all basic types so if you have one value to update on each items returned from a Filter:\r\n\r\n      repo.updateByFilter(&quot;firstName&quot;, &quot;Di&quot;,\r\n              and( eq(&quot;firstName&quot;, &quot;Diana&quot;),\r\n              eq(&quot;lastName&quot;, &quot;Smith&quot;),\r\n                      eq(&quot;ssn&quot;, &quot;21785999&quot;) ) );\r\n\r\n\r\nHere is some basic selection capabilities:\r\n\r\n      List &lt;Map&lt;String, Object&gt;&gt; list =\r\n         repo.query(selects(select(&quot;firstName&quot;)), eq(&quot;lastName&quot;, &quot;Hightower&quot;));\r\n\r\n\r\nYou can have as many selects as you like. You can also bring the list back sorted:\r\n\r\n      List &lt;Map&lt;String, Object&gt;&gt; list =\r\n         repo.sortedQuery(&quot;firstName&quot;,selects(select(&quot;firstName&quot;)),\r\n           eq(&quot;lastName&quot;, &quot;Hightower&quot;));\r\n\r\n\r\nYou can select properties of related properties (i.e., employee.department.name).\r\n\r\n      List &lt;Map&lt;String, Object&gt;&gt; list = repo.query(\r\n              selects(select(&quot;department&quot;, &quot;name&quot;)),\r\n              eq(&quot;lastName&quot;, &quot;Hightower&quot;));\r\n\r\n      assertEquals(&quot;engineering&quot;, list.get(0).get(&quot;department.name&quot;));\r\n\r\n\r\nThe above would try to use the fields of the classes. If you want to use the actual properties (emp.getFoo() vs. emp.foo), then you need to use the selectPropertyPath.\r\n\r\n      List &lt;Map&lt;String, Object&gt;&gt; list = repo.query(\r\n              selects(selectPropPath(&quot;department&quot;, &quot;name&quot;)),\r\n              eq(&quot;lastName&quot;, &quot;Hightower&quot;));\r\n\r\n\r\nNote that select(&quot;department&quot;, &quot;name&quot;) is much faster than selectPropPath(&quot;department&quot;, &quot;name&quot;), which could matter in a tight loop.\r\n\r\nBy default all search indexes and lookup indexes allow duplicates (except for primary key index).\r\n\r\n      repoBuilder.primaryKey(&quot;ssn&quot;)\r\n              .searchIndex(&quot;firstName&quot;).searchIndex(&quot;lastName&quot;)\r\n              .searchIndex(&quot;salary&quot;).searchIndex(&quot;empNum&quot;, true)\r\n              .usePropertyForAccess(true);\r\n\r\n\r\nYou can override that by providing a true flag as the second argument to searchIndex.\r\n\r\nNotice empNum is a searchable unique index.\r\n\r\nIf you prefer or need, you can get even simple searches back as maps:\r\n\r\n      List&lt;Map&lt;String, Object&gt;&gt; employees = repo.queryAsMaps(eq(&quot;firstName&quot;, &quot;Diana&quot;));\r\n\r\n\r\nI am not sure if this is a feature or a misfeature. My thought was that once you are dealing with data, you need to present that data in a way that does not ties consumers of data to your actual API. Having a Map of String / basic types seems to be a way to achieve this.\r\nNote that the object to map conversion goes deep as in:\r\n\r\n      System.out.println(employees.get(0).get(&quot;department&quot;));\r\n\r\n\r\nYields:\r\n\r\n    {class=Department, name=engineering}\r\n\r\nThis can be useful for debugging and ad hoc queries for tooling. I am considering adding support to easily convert to a JSON string.\r\n\r\nAdded the ability to query collection properties. This should work with collections and arrays as deeply nested as you like. Read that again because it was a real MF to implement!\r\n\r\n      List &lt;Map&lt;String, Object&gt;&gt; list = repo.query(\r\n              selects(select(&quot;tags&quot;, &quot;metas&quot;, &quot;metas2&quot;, &quot;metas3&quot;, &quot;name3&quot;)),\r\n              eq(&quot;lastName&quot;, &quot;Hightower&quot;));\r\n\r\n      print(&quot;list&quot;, list);\r\n\r\n      assertEquals(&quot;3tag1&quot;, idx(list.get(0).get(&quot;tags.metas.metas2.metas3.name3&quot;), 0));\r\n\r\nThe print out of the above looks like this:\r\n\r\n    list [{tags.metas.metas2.metas3.name3=[3tag1, 3tag2, 3tag3,\r\n    3tag1, 3tag2, 3tag3, 3tag1, 3tag2, 3tag3, 3tag1, 3tag2, 3tag3,\r\n    3tag1, 3tag2, 3tag3, 3tag1, 3tag2, 3tag3, 3tag1, 3tag2, 3tag3,\r\n    3tag1, 3tag2, 3tag3, 3tag1, 3tag2, 3tag3, 3tag1, 3tag2, 3tag3,\r\n    3tag1, 3tag2, 3tag3, 3tag1, 3tag2, 3tag3, 3tag1, 3tag2, 3tag3,\r\n    3tag1, 3tag2, 3tag3, 3tag1, 3tag2, 3tag3, 3tag1, 3tag2, 3tag3,\r\n    3tag1, 3tag2, 3tag3, 3tag1, 3tag2, 3tag3, 3tag1, 3tag2, 3tag3,\r\n    3tag1, 3tag2, 3tag3, 3tag1, 3tag2, 3tag3, 3tag1, 3tag2, 3tag3,\r\n    3tag1, 3tag2, 3tag3, 3tag1, 3tag2, 3tag3, 3tag1, 3tag2, 3tag3,\r\n    3tag1, 3tag2, 3tag3, 3tag1, 3tag2, 3tag3]},\r\n    ...\r\n\r\nI created several relationship classes to test this:\r\n\r\n    public class Employee {\r\n    List &lt;Tag&gt; tags = new ArrayList&lt;&gt;();\r\n    {\r\n        tags.add(new Tag(&quot;tag1&quot;));\r\n        tags.add(new Tag(&quot;tag2&quot;));\r\n        tags.add(new Tag(&quot;tag3&quot;));\r\n\r\n    }\r\n    ...\r\n    public class Tag {\r\n    ...\r\n    List&lt;Meta&gt; metas = new ArrayList&lt;&gt;();\r\n    {\r\n        metas.add(new Meta(&quot;mtag1&quot;));\r\n        metas.add(new Meta(&quot;mtag2&quot;));\r\n        metas.add(new Meta(&quot;mtag3&quot;));\r\n\r\n    }\r\n\r\n    }\r\n    public class Meta {\r\n     ...\r\n       List&lt;Meta2&gt; metas2 = new ArrayList&lt;&gt;();\r\n       {\r\n           metas2.add(new Meta2(&quot;2tag1&quot;));\r\n           metas2.add(new Meta2(&quot;2tag2&quot;));\r\n           metas2.add(new Meta2(&quot;2tag3&quot;));\r\n\r\n       }\r\n\r\n    }\r\n\r\n    ...\r\n    public class Meta2 {\r\n\r\n\r\n\r\n    List&lt;Meta3&gt; metas3 = new ArrayList&lt;&gt;();\r\n    {\r\n        metas3.add(new Meta3(&quot;3tag1&quot;));\r\n        metas3.add(new Meta3(&quot;3tag2&quot;));\r\n        metas3.add(new Meta3(&quot;3tag3&quot;));\r\n\r\n    }\r\n    public class Meta3 {\r\n\r\n    ...\r\n\r\nYou can also search by type:\r\n\r\n      List&lt;Employee&gt; results = sortedQuery(queryableList, &quot;firstName&quot;, typeOf(&quot;SalesEmployee&quot;));\r\n\r\n      assertEquals(1, results.size());\r\n      assertEquals(&quot;SalesEmployee&quot;, results.get(0).getClass().getSimpleName());\r\nThe above finds all employees with the simple classname of SalesEmployee. It also works with full class name as in:\r\n\r\n      List&lt;Employee&gt; results = sortedQuery(queryableList, &quot;firstName&quot;, typeOf(&quot;SalesEmployee&quot;));\r\n\r\n      assertEquals(1, results.size());\r\n      assertEquals(&quot;SalesEmployee&quot;, results.get(0).getClass().getSimpleName());\r\nYou can search by the actual class too:\r\n\r\n      List&lt;Employee&gt; results = sortedQuery(queryableList, &quot;firstName&quot;, instanceOf(SalesEmployee.class));\r\n\r\n      assertEquals(1, results.size());\r\n      assertEquals(&quot;SalesEmployee&quot;, results.get(0).getClass().getSimpleName());\r\n\r\n\r\nYou can also query classes that implement certain interfaces:\r\n\r\n      List&lt;Employee&gt; results = sortedQuery(queryableList, &quot;firstName&quot;,      \r\n                                  implementsInterface(Comparable.class));\r\n\r\n      assertEquals(1, results.size());\r\n      assertEquals(&quot;SalesEmployee&quot;, results.get(0).getClass().getSimpleName());\r\n\r\n\r\nYou can also index nested fields/properties and they can be collection fields or property non collection fields as deeply nested as you would like:\r\n\r\n      /* Create a repo, and decide what to index. */\r\n      RepoBuilder repoBuilder = RepoBuilder.getInstance();\r\n\r\n      /* Look at the nestedIndex. */\r\n      repoBuilder.primaryKey(&quot;id&quot;)\r\n              .searchIndex(&quot;firstName&quot;).searchIndex(&quot;lastName&quot;)\r\n              .searchIndex(&quot;salary&quot;).uniqueSearchIndex(&quot;empNum&quot;)\r\n              .nestedIndex(&quot;tags&quot;, &quot;metas&quot;, &quot;metas2&quot;, &quot;name2&quot;);\r\n\r\n\r\nLater you can use the nestedIndex to search.\r\n\r\n      List&lt;Map&lt;String, Object&gt;&gt; list = repo.query(\r\n              selects(select(&quot;tags&quot;, &quot;metas&quot;, &quot;metas2&quot;, &quot;name2&quot;)),\r\n              eqNested(&quot;2tag1&quot;, &quot;tags&quot;, &quot;metas&quot;, &quot;metas2&quot;, &quot;name2&quot;));\r\n\r\n\r\nThe safe way to use the nestedIndex is to use eqNested. You can use eq, gt, gte, etc. if you have the index like so:\r\n\r\n      List&lt;Map&lt;String, Object&gt;&gt; list = repo.query(\r\n              selects(select(&quot;tags&quot;, &quot;metas&quot;, &quot;metas2&quot;, &quot;name2&quot;)),\r\n              eq(&quot;tags.metas.metas2.name2&quot;, &quot;2tag1&quot;));\r\n\r\nYou can also add support for subclasses\r\n\r\n      List&lt;Employee&gt; queryableList = $q(h_list, Employee.class, SalesEmployee.class,  \r\n                      HourlyEmployee.class);\r\n      List&lt;Employee&gt; results = sortedQuery(queryableList, &quot;firstName&quot;, eq(&quot;commissionRate&quot;, 1));\r\n      assertEquals(1, results.size());\r\n      assertEquals(&quot;SalesEmployee&quot;, results.get(0).getClass().getSimpleName());\r\n\r\n      results = sortedQuery(queryableList, &quot;firstName&quot;, eq(&quot;weeklyHours&quot;, 40));\r\n      assertEquals(1, results.size());\r\n      assertEquals(&quot;HourlyEmployee&quot;, results.get(0).getClass().getSimpleName());\r\n\r\nThe data repo has a similar feature in its DataRepoBuilder.build(...) method for specifying subclasses. This allows you to seemless query fields form subclasses and classes in the same repo or searchable collection.","title":"Multiple indexes for a Java Collection - most basic solution?","body":"<p>You need to check out Boon. :)</p>\n\n<p><a href=\"http://rick-hightower.blogspot.com/2013/11/what-if-java-collections-and-java.html\" rel=\"noreferrer\">http://rick-hightower.blogspot.com/2013/11/what-if-java-collections-and-java.html</a></p>\n\n<p>You can add n number of search indexes and lookup indexes. It also allows you to efficiently query primitive properties. </p>\n\n<p>Here is an example take from the wiki (I am the author).</p>\n\n<pre><code>  repoBuilder.primaryKey(\"ssn\")\n          .searchIndex(\"firstName\").searchIndex(\"lastName\")\n          .searchIndex(\"salary\").searchIndex(\"empNum\", true)\n          .usePropertyForAccess(true);\n</code></pre>\n\n<p>You can override that by providing a true flag as the second argument to searchIndex.</p>\n\n<p>Notice empNum is a searchable unique index.</p>\n\n<p>What if it were easy to query a complex set of Java objects at runtime? What if there were an API that kept your object indexes (really just TreeMaps, and HashMaps) in sync.? Well then you would have Boon's data repo. This article shows how to use Boon's data repo utilities to query Java objects. This is part one. There can be many, many parts. :)\nBoon's data repo makes doing index based queries on collections a lot easier.\nWhy Boon data repo</p>\n\n<p>Boon's data repo allows you to treat Java collections more like a database at least when it comes to querying the collections. Boon's data repo is not an in-memory database, and cannot substitute arranging your objects into data structures optimized for your application.\nIf you want to spend your time providing customer value and building your objects and classes and using the Collections API for your data structures, then DataRepo is meant for you. This does not preclude breaking out the Knuth books and coming up with an optimized data structure. It just helps keep the mundane things easy so you can spend your time making the hard things possible.\nBorn out of need</p>\n\n<p>This project came out of a need. I was working on a project that planned to store large collection of domain objects in-memory for speed, and somebody asked an all to important question that I overlooked. How are we going to query this data. My answer was we will use the Collections API and the Streaming API. Then I tried to do this... Hmmm...\nI also tired using the JDK 8 stream API on a large data set, and it was slow. (Boon's data repo works with JDK7 and JDK8). It was a linear search/filter. This is by design, but for what I was doing, it did not work. I needed indexes to support arbitrary queries.\nBoon's data repo augments the streaming API.</p>\n\n<p>Boon's data repo does not endeavor to replace the JDK 8 stream API, and in fact it works well with it. Boon's data repo allows you to create indexed collections. The indexes can be anything (it is pluggable).\nAt this moment in time, Boon's data repo indexes are based on ConcurrentHashMap and ConcurrentSkipListMap.\nBy design, Boon's data repo works with standard collection libraries. There is no plan to create a set of custom collections. One should be able to plug in Guava, Concurrent Trees or Trove if one desires to do so.\nIt provides a simplified API for doing so. It allows linear search for a sense of completion but I recommend using it primarily for using indexes and then using the streaming API for the rest (for type safety and speed).</p>\n\n<p>sneak peak before the step by step</p>\n\n<p>Let's say you have a method that creates 200,000 employee objects like this:</p>\n\n<pre><code> List&lt;Employee&gt; employees = TestHelper.createMetricTonOfEmployees(200_000);\n</code></pre>\n\n<p>So now we have 200,000 employees. Let's search them...</p>\n\n<p>First wrap Employees in a searchable query:</p>\n\n<pre><code>   employees = query(employees);\n</code></pre>\n\n<p>Now search:</p>\n\n<pre><code>  List&lt;Employee&gt; results = query(employees, eq(\"firstName\", firstName));\n</code></pre>\n\n<p>So what is the main difference between the above and the stream API?</p>\n\n<pre><code>  employees.stream().filter(emp -&gt; emp.getFirstName().equals(firstName)\n</code></pre>\n\n<p>About a factor of 20,000% faster to use Boon's DataRepo! Ah the power of HashMaps and TreeMaps. :)\nThere is an API that looks just like your built-in collections. There is also an API that looks more like a DAO object or a Repo Object.</p>\n\n<p>A simple query with the Repo/DAO object looks like this:</p>\n\n<pre><code>  List&lt;Employee&gt; employees = repo.query(eq(\"firstName\", \"Diana\"));\n</code></pre>\n\n<p>A more involved query would look like this:</p>\n\n<pre><code>  List&lt;Employee&gt; employees = repo.query(\n      and(eq(\"firstName\", \"Diana\"), eq(\"lastName\", \"Smith\"), eq(\"ssn\", \"21785999\")));\n</code></pre>\n\n<p>Or this:</p>\n\n<pre><code>  List&lt;Employee&gt; employees = repo.query(\n      and(startsWith(\"firstName\", \"Bob\"), eq(\"lastName\", \"Smith\"), lte(\"salary\", 200_000),\n              gte(\"salary\", 190_000)));\n</code></pre>\n\n<p>Or even this:</p>\n\n<pre><code>  List&lt;Employee&gt; employees = repo.query(\n      and(startsWith(\"firstName\", \"Bob\"), eq(\"lastName\", \"Smith\"), between(\"salary\", 190_000, 200_000)));\n</code></pre>\n\n<p>Or if you want to use JDK 8 stream API, this works with it not against it:</p>\n\n<pre><code>  int sum = repo.query(eq(\"lastName\", \"Smith\")).stream().filter(emp -&gt; emp.getSalary()&gt;50_000)\n      .mapToInt(b -&gt; b.getSalary())\n      .sum();\n</code></pre>\n\n<p>The above would be much faster if the number of employees was quite large. It would narrow down the employees whose name started with Smith and had a salary above 50,000. Let's say you had 100,000 employees and only 50 named Smith so now you narrow to 50 quickly by using the index which effectively pulls 50 employees out of 100,000, then we do the filter over just 50 instead of the whole 100,000.</p>\n\n<p>Here is a benchmark run from data repo of a linear search versus an indexed search in nano seconds:</p>\n\n<pre><code>Name index  Time 218 \nName linear  Time 3709120 \nName index  Time 213 \nName linear  Time 3606171 \nName index  Time 219 \nName linear  Time 3528839\n</code></pre>\n\n<p>Someone recently said to me: \"But with the streaming API, you can run the filter in parralel).</p>\n\n<p>Let's see how the math holds up:</p>\n\n<pre><code>3,528,839 / 16 threads vs. 219\n\n201,802 vs. 219 (nano-seconds).\n</code></pre>\n\n<p>Indexes win, but it was a photo finish. NOT! :) </p>\n\n<p>It was only 9,500% faster instead of 40,000% faster. So close.....</p>\n\n<p>I added some more features. They are make heavy use of indexes. :)</p>\n\n<p>repo.updateByFilter(values(value(\"firstName\", \"Di\")),\n                and( eq(\"firstName\", \"Diana\"),\n                        eq(\"lastName\", \"Smith\"),\n                        eq(\"ssn\", \"21785999\") ) );</p>\n\n<p>The above would be equivalent to</p>\n\n<p>UPDATE Employee e\n   SET e.firstName='Di'\n  WHERE e.firstName = 'Diana'\n    and e.lastName = 'Smith'\n    and e.ssn = '21785999'</p>\n\n<p>This allows you to set multiple fields at once on multiple records so if you were doing a bulk update.</p>\n\n<p>There are overloaded methods for all basic types so if you have one value to update on each items returned from a Filter:</p>\n\n<pre><code>  repo.updateByFilter(\"firstName\", \"Di\",\n          and( eq(\"firstName\", \"Diana\"),\n          eq(\"lastName\", \"Smith\"),\n                  eq(\"ssn\", \"21785999\") ) );\n</code></pre>\n\n<p>Here is some basic selection capabilities:</p>\n\n<pre><code>  List &lt;Map&lt;String, Object&gt;&gt; list =\n     repo.query(selects(select(\"firstName\")), eq(\"lastName\", \"Hightower\"));\n</code></pre>\n\n<p>You can have as many selects as you like. You can also bring the list back sorted:</p>\n\n<pre><code>  List &lt;Map&lt;String, Object&gt;&gt; list =\n     repo.sortedQuery(\"firstName\",selects(select(\"firstName\")),\n       eq(\"lastName\", \"Hightower\"));\n</code></pre>\n\n<p>You can select properties of related properties (i.e., employee.department.name).</p>\n\n<pre><code>  List &lt;Map&lt;String, Object&gt;&gt; list = repo.query(\n          selects(select(\"department\", \"name\")),\n          eq(\"lastName\", \"Hightower\"));\n\n  assertEquals(\"engineering\", list.get(0).get(\"department.name\"));\n</code></pre>\n\n<p>The above would try to use the fields of the classes. If you want to use the actual properties (emp.getFoo() vs. emp.foo), then you need to use the selectPropertyPath.</p>\n\n<pre><code>  List &lt;Map&lt;String, Object&gt;&gt; list = repo.query(\n          selects(selectPropPath(\"department\", \"name\")),\n          eq(\"lastName\", \"Hightower\"));\n</code></pre>\n\n<p>Note that select(\"department\", \"name\") is much faster than selectPropPath(\"department\", \"name\"), which could matter in a tight loop.</p>\n\n<p>By default all search indexes and lookup indexes allow duplicates (except for primary key index).</p>\n\n<pre><code>  repoBuilder.primaryKey(\"ssn\")\n          .searchIndex(\"firstName\").searchIndex(\"lastName\")\n          .searchIndex(\"salary\").searchIndex(\"empNum\", true)\n          .usePropertyForAccess(true);\n</code></pre>\n\n<p>You can override that by providing a true flag as the second argument to searchIndex.</p>\n\n<p>Notice empNum is a searchable unique index.</p>\n\n<p>If you prefer or need, you can get even simple searches back as maps:</p>\n\n<pre><code>  List&lt;Map&lt;String, Object&gt;&gt; employees = repo.queryAsMaps(eq(\"firstName\", \"Diana\"));\n</code></pre>\n\n<p>I am not sure if this is a feature or a misfeature. My thought was that once you are dealing with data, you need to present that data in a way that does not ties consumers of data to your actual API. Having a Map of String / basic types seems to be a way to achieve this.\nNote that the object to map conversion goes deep as in:</p>\n\n<pre><code>  System.out.println(employees.get(0).get(\"department\"));\n</code></pre>\n\n<p>Yields:</p>\n\n<pre><code>{class=Department, name=engineering}\n</code></pre>\n\n<p>This can be useful for debugging and ad hoc queries for tooling. I am considering adding support to easily convert to a JSON string.</p>\n\n<p>Added the ability to query collection properties. This should work with collections and arrays as deeply nested as you like. Read that again because it was a real MF to implement!</p>\n\n<pre><code>  List &lt;Map&lt;String, Object&gt;&gt; list = repo.query(\n          selects(select(\"tags\", \"metas\", \"metas2\", \"metas3\", \"name3\")),\n          eq(\"lastName\", \"Hightower\"));\n\n  print(\"list\", list);\n\n  assertEquals(\"3tag1\", idx(list.get(0).get(\"tags.metas.metas2.metas3.name3\"), 0));\n</code></pre>\n\n<p>The print out of the above looks like this:</p>\n\n<pre><code>list [{tags.metas.metas2.metas3.name3=[3tag1, 3tag2, 3tag3,\n3tag1, 3tag2, 3tag3, 3tag1, 3tag2, 3tag3, 3tag1, 3tag2, 3tag3,\n3tag1, 3tag2, 3tag3, 3tag1, 3tag2, 3tag3, 3tag1, 3tag2, 3tag3,\n3tag1, 3tag2, 3tag3, 3tag1, 3tag2, 3tag3, 3tag1, 3tag2, 3tag3,\n3tag1, 3tag2, 3tag3, 3tag1, 3tag2, 3tag3, 3tag1, 3tag2, 3tag3,\n3tag1, 3tag2, 3tag3, 3tag1, 3tag2, 3tag3, 3tag1, 3tag2, 3tag3,\n3tag1, 3tag2, 3tag3, 3tag1, 3tag2, 3tag3, 3tag1, 3tag2, 3tag3,\n3tag1, 3tag2, 3tag3, 3tag1, 3tag2, 3tag3, 3tag1, 3tag2, 3tag3,\n3tag1, 3tag2, 3tag3, 3tag1, 3tag2, 3tag3, 3tag1, 3tag2, 3tag3,\n3tag1, 3tag2, 3tag3, 3tag1, 3tag2, 3tag3]},\n...\n</code></pre>\n\n<p>I created several relationship classes to test this:</p>\n\n<pre><code>public class Employee {\nList &lt;Tag&gt; tags = new ArrayList&lt;&gt;();\n{\n    tags.add(new Tag(\"tag1\"));\n    tags.add(new Tag(\"tag2\"));\n    tags.add(new Tag(\"tag3\"));\n\n}\n...\npublic class Tag {\n...\nList&lt;Meta&gt; metas = new ArrayList&lt;&gt;();\n{\n    metas.add(new Meta(\"mtag1\"));\n    metas.add(new Meta(\"mtag2\"));\n    metas.add(new Meta(\"mtag3\"));\n\n}\n\n}\npublic class Meta {\n ...\n   List&lt;Meta2&gt; metas2 = new ArrayList&lt;&gt;();\n   {\n       metas2.add(new Meta2(\"2tag1\"));\n       metas2.add(new Meta2(\"2tag2\"));\n       metas2.add(new Meta2(\"2tag3\"));\n\n   }\n\n}\n\n...\npublic class Meta2 {\n\n\n\nList&lt;Meta3&gt; metas3 = new ArrayList&lt;&gt;();\n{\n    metas3.add(new Meta3(\"3tag1\"));\n    metas3.add(new Meta3(\"3tag2\"));\n    metas3.add(new Meta3(\"3tag3\"));\n\n}\npublic class Meta3 {\n\n...\n</code></pre>\n\n<p>You can also search by type:</p>\n\n<pre><code>  List&lt;Employee&gt; results = sortedQuery(queryableList, \"firstName\", typeOf(\"SalesEmployee\"));\n\n  assertEquals(1, results.size());\n  assertEquals(\"SalesEmployee\", results.get(0).getClass().getSimpleName());\n</code></pre>\n\n<p>The above finds all employees with the simple classname of SalesEmployee. It also works with full class name as in:</p>\n\n<pre><code>  List&lt;Employee&gt; results = sortedQuery(queryableList, \"firstName\", typeOf(\"SalesEmployee\"));\n\n  assertEquals(1, results.size());\n  assertEquals(\"SalesEmployee\", results.get(0).getClass().getSimpleName());\n</code></pre>\n\n<p>You can search by the actual class too:</p>\n\n<pre><code>  List&lt;Employee&gt; results = sortedQuery(queryableList, \"firstName\", instanceOf(SalesEmployee.class));\n\n  assertEquals(1, results.size());\n  assertEquals(\"SalesEmployee\", results.get(0).getClass().getSimpleName());\n</code></pre>\n\n<p>You can also query classes that implement certain interfaces:</p>\n\n<pre><code>  List&lt;Employee&gt; results = sortedQuery(queryableList, \"firstName\",      \n                              implementsInterface(Comparable.class));\n\n  assertEquals(1, results.size());\n  assertEquals(\"SalesEmployee\", results.get(0).getClass().getSimpleName());\n</code></pre>\n\n<p>You can also index nested fields/properties and they can be collection fields or property non collection fields as deeply nested as you would like:</p>\n\n<pre><code>  /* Create a repo, and decide what to index. */\n  RepoBuilder repoBuilder = RepoBuilder.getInstance();\n\n  /* Look at the nestedIndex. */\n  repoBuilder.primaryKey(\"id\")\n          .searchIndex(\"firstName\").searchIndex(\"lastName\")\n          .searchIndex(\"salary\").uniqueSearchIndex(\"empNum\")\n          .nestedIndex(\"tags\", \"metas\", \"metas2\", \"name2\");\n</code></pre>\n\n<p>Later you can use the nestedIndex to search.</p>\n\n<pre><code>  List&lt;Map&lt;String, Object&gt;&gt; list = repo.query(\n          selects(select(\"tags\", \"metas\", \"metas2\", \"name2\")),\n          eqNested(\"2tag1\", \"tags\", \"metas\", \"metas2\", \"name2\"));\n</code></pre>\n\n<p>The safe way to use the nestedIndex is to use eqNested. You can use eq, gt, gte, etc. if you have the index like so:</p>\n\n<pre><code>  List&lt;Map&lt;String, Object&gt;&gt; list = repo.query(\n          selects(select(\"tags\", \"metas\", \"metas2\", \"name2\")),\n          eq(\"tags.metas.metas2.name2\", \"2tag1\"));\n</code></pre>\n\n<p>You can also add support for subclasses</p>\n\n<pre><code>  List&lt;Employee&gt; queryableList = $q(h_list, Employee.class, SalesEmployee.class,  \n                  HourlyEmployee.class);\n  List&lt;Employee&gt; results = sortedQuery(queryableList, \"firstName\", eq(\"commissionRate\", 1));\n  assertEquals(1, results.size());\n  assertEquals(\"SalesEmployee\", results.get(0).getClass().getSimpleName());\n\n  results = sortedQuery(queryableList, \"firstName\", eq(\"weeklyHours\", 40));\n  assertEquals(1, results.size());\n  assertEquals(\"HourlyEmployee\", results.get(0).getClass().getSimpleName());\n</code></pre>\n\n<p>The data repo has a similar feature in its DataRepoBuilder.build(...) method for specifying subclasses. This allows you to seemless query fields form subclasses and classes in the same repo or searchable collection.</p>\n"},{"tags":[],"owner":{"account_id":2348840,"reputation":1502,"user_id":2058260,"accept_rate":84,"display_name":"H4SN"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1491903738,"creation_date":1491903738,"answer_id":43342262,"question_id":2501449,"body_markdown":"Here is how i am achieving this, right now only put,remove and get methods are working for rest you need to override desired methods.\r\n\r\n\r\n\r\nExample:\r\n\r\n    MultiKeyMap&lt;MultiKeyMap.Key,String&gt; map = new MultiKeyMap&lt;&gt;();\r\n    MultiKeyMap.Key key1 = map.generatePrimaryKey(&quot;keyA&quot;,&quot;keyB&quot;,&quot;keyC&quot;);\r\n    MultiKeyMap.Key key2 = map.generatePrimaryKey(&quot;keyD&quot;,&quot;keyE&quot;,&quot;keyF&quot;);\r\n\r\n    map.put(key1,&quot;This is value 1&quot;);\r\n    map.put(key2,&quot;This is value 2&quot;);\r\n\r\n    Log.i(&quot;MultiKeyMapDebug&quot;,map.get(&quot;keyA&quot;));\r\n    Log.i(&quot;MultiKeyMapDebug&quot;,map.get(&quot;keyB&quot;));\r\n    Log.i(&quot;MultiKeyMapDebug&quot;,map.get(&quot;keyC&quot;));\r\n\r\n    Log.i(&quot;MultiKeyMapDebug&quot;,&quot;&quot;+map.get(&quot;keyD&quot;));\r\n    Log.i(&quot;MultiKeyMapDebug&quot;,&quot;&quot;+map.get(&quot;keyE&quot;));\r\n    Log.i(&quot;MultiKeyMapDebug&quot;,&quot;&quot;+map.get(&quot;keyF&quot;));\r\n\r\nOutput:\r\n\r\n    MultiKeyMapDebug: This is value 1\r\n    MultiKeyMapDebug: This is value 1\r\n    MultiKeyMapDebug: This is value 1\r\n    MultiKeyMapDebug: This is value 2\r\n    MultiKeyMapDebug: This is value 2\r\n    MultiKeyMapDebug: This is value 2\r\n\r\nMultiKeyMap.java:\r\n\r\n    /**\r\n     * Created by hsn on 11/04/17.\r\n     */\r\n\r\n\r\n    public class MultiKeyMap&lt;K extends MultiKeyMap.Key, V&gt; extends HashMap&lt;MultiKeyMap.Key, V&gt; {\r\n    \r\n        private Map&lt;String, MultiKeyMap.Key&gt; keyMap = new HashMap&lt;&gt;();\r\n    \r\n        @Override\r\n        public V get(Object key) {\r\n            return super.get(keyMap.get(key));\r\n        }\r\n    \r\n        @Override\r\n        public V put(MultiKeyMap.Key key, V value) {\r\n            List&lt;String&gt; keyArray = (List&lt;String&gt;) key;\r\n            for (String keyS : keyArray) {\r\n                keyMap.put(keyS, key);\r\n            }\r\n            return super.put(key, value);\r\n        }\r\n    \r\n        @Override\r\n        public V remove(Object key) {\r\n            return super.remove(keyMap.get(key));\r\n        }\r\n    \r\n        public Key generatePrimaryKey(String... keys) {\r\n            Key singleKey = new Key();\r\n            for (String key : keys) {\r\n                singleKey.add(key);\r\n            }\r\n            return singleKey;\r\n        }\r\n    \r\n        public class Key extends ArrayList&lt;String&gt; {\r\n    \r\n        }\r\n    \r\n    }\r\n\r\n","title":"Multiple indexes for a Java Collection - most basic solution?","body":"<p>Here is how i am achieving this, right now only put,remove and get methods are working for rest you need to override desired methods.</p>\n\n<p>Example:</p>\n\n<pre><code>MultiKeyMap&lt;MultiKeyMap.Key,String&gt; map = new MultiKeyMap&lt;&gt;();\nMultiKeyMap.Key key1 = map.generatePrimaryKey(\"keyA\",\"keyB\",\"keyC\");\nMultiKeyMap.Key key2 = map.generatePrimaryKey(\"keyD\",\"keyE\",\"keyF\");\n\nmap.put(key1,\"This is value 1\");\nmap.put(key2,\"This is value 2\");\n\nLog.i(\"MultiKeyMapDebug\",map.get(\"keyA\"));\nLog.i(\"MultiKeyMapDebug\",map.get(\"keyB\"));\nLog.i(\"MultiKeyMapDebug\",map.get(\"keyC\"));\n\nLog.i(\"MultiKeyMapDebug\",\"\"+map.get(\"keyD\"));\nLog.i(\"MultiKeyMapDebug\",\"\"+map.get(\"keyE\"));\nLog.i(\"MultiKeyMapDebug\",\"\"+map.get(\"keyF\"));\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>MultiKeyMapDebug: This is value 1\nMultiKeyMapDebug: This is value 1\nMultiKeyMapDebug: This is value 1\nMultiKeyMapDebug: This is value 2\nMultiKeyMapDebug: This is value 2\nMultiKeyMapDebug: This is value 2\n</code></pre>\n\n<p>MultiKeyMap.java:</p>\n\n<pre><code>/**\n * Created by hsn on 11/04/17.\n */\n\n\npublic class MultiKeyMap&lt;K extends MultiKeyMap.Key, V&gt; extends HashMap&lt;MultiKeyMap.Key, V&gt; {\n\n    private Map&lt;String, MultiKeyMap.Key&gt; keyMap = new HashMap&lt;&gt;();\n\n    @Override\n    public V get(Object key) {\n        return super.get(keyMap.get(key));\n    }\n\n    @Override\n    public V put(MultiKeyMap.Key key, V value) {\n        List&lt;String&gt; keyArray = (List&lt;String&gt;) key;\n        for (String keyS : keyArray) {\n            keyMap.put(keyS, key);\n        }\n        return super.put(key, value);\n    }\n\n    @Override\n    public V remove(Object key) {\n        return super.remove(keyMap.get(key));\n    }\n\n    public Key generatePrimaryKey(String... keys) {\n        Key singleKey = new Key();\n        for (String key : keys) {\n            singleKey.add(key);\n        }\n        return singleKey;\n    }\n\n    public class Key extends ArrayList&lt;String&gt; {\n\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10634936,"reputation":141,"user_id":7831933,"display_name":"Syed Belal Jafri"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1528821287,"creation_date":1528821287,"answer_id":50821977,"question_id":2501449,"body_markdown":"If you want multiple indexes on your data, you can create and maintain multiple hash maps or use a library like Data Store:\n\nhttps://github.com/jparams/data-store\n\nExample:\n\n    Store&lt;Person&gt; store = new MemoryStore&lt;&gt;() ;\n    store.add(new Person(1, &quot;Ed&quot;, 3));\n    store.add(new Person(2, &quot;Fred&quot;, 7));\n    store.add(new Person(3, &quot;Freda&quot;, 5));\n    store.index(&quot;name&quot;, Person::getName);\n    Person person = store.getFirst(&quot;name&quot;, &quot;Ed&quot;);\n\nWith data store you can create case-insensitive indexes and all sorts of cool stuff. Worth checking out. ","title":"Multiple indexes for a Java Collection - most basic solution?","body":"<p>If you want multiple indexes on your data, you can create and maintain multiple hash maps or use a library like Data Store:</p>\n\n<p><a href=\"https://github.com/jparams/data-store\" rel=\"nofollow noreferrer\">https://github.com/jparams/data-store</a></p>\n\n<p>Example:</p>\n\n<pre><code>Store&lt;Person&gt; store = new MemoryStore&lt;&gt;() ;\nstore.add(new Person(1, \"Ed\", 3));\nstore.add(new Person(2, \"Fred\", 7));\nstore.add(new Person(3, \"Freda\", 5));\nstore.index(\"name\", Person::getName);\nPerson person = store.getFirst(\"name\", \"Ed\");\n</code></pre>\n\n<p>With data store you can create case-insensitive indexes and all sorts of cool stuff. Worth checking out. </p>\n"},{"tags":[],"owner":{"account_id":1149936,"reputation":14493,"user_id":1131857,"accept_rate":76,"display_name":"wutzebaer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1629627828,"creation_date":1629627828,"answer_id":68880408,"question_id":2501449,"body_markdown":"I found this code years ago (can&#39;t remember where). Just use this to build your key from different values.\r\n\r\n    import java.util.Arrays;\r\n    public final class MultiKey {\r\n        private static final int PRIME = 31;\r\n    \r\n        private final Object[] values;\r\n    \r\n        private final int hashCode;\r\n    \r\n        /**\r\n         * Creates a new instance from the provided values. It is assumed that the\r\n         * values provided are good map keys themselves -- immutable, with proper\r\n         * implementations of equals() and hashCode().\r\n         *\r\n         * @param values\r\n         */\r\n        public MultiKey(Object... values) {\r\n            this.values = values;\r\n            hashCode = PRIME * Arrays.hashCode(this.values);\r\n        }\r\n    \r\n        @Override\r\n        public int hashCode() {\r\n            return hashCode;\r\n        }\r\n    \r\n        @Override\r\n        public boolean equals(Object obj) {\r\n            if (this == obj)\r\n                return true;\r\n            if (obj == null)\r\n                return false;\r\n            if (getClass() != obj.getClass())\r\n                return false;\r\n            final MultiKey other = (MultiKey) obj;\r\n    \r\n            return Arrays.equals(values, other.values);\r\n        }\r\n    \r\n        @Override\r\n        public String toString() {\r\n            StringBuilder builder = new StringBuilder(&quot;MultiKey[&quot;);\r\n    \r\n            boolean first = true;\r\n    \r\n            for (Object o : values) {\r\n                if (!first)\r\n                    builder.append(&quot;, &quot;);\r\n    \r\n                builder.append(o);\r\n    \r\n                first = false;\r\n            }\r\n    \r\n            builder.append(&quot;]&quot;);\r\n    \r\n            return builder.toString();\r\n        }\r\n    \r\n    }","title":"Multiple indexes for a Java Collection - most basic solution?","body":"<p>I found this code years ago (can't remember where). Just use this to build your key from different values.</p>\n<pre><code>import java.util.Arrays;\npublic final class MultiKey {\n    private static final int PRIME = 31;\n\n    private final Object[] values;\n\n    private final int hashCode;\n\n    /**\n     * Creates a new instance from the provided values. It is assumed that the\n     * values provided are good map keys themselves -- immutable, with proper\n     * implementations of equals() and hashCode().\n     *\n     * @param values\n     */\n    public MultiKey(Object... values) {\n        this.values = values;\n        hashCode = PRIME * Arrays.hashCode(this.values);\n    }\n\n    @Override\n    public int hashCode() {\n        return hashCode;\n    }\n\n    @Override\n    public boolean equals(Object obj) {\n        if (this == obj)\n            return true;\n        if (obj == null)\n            return false;\n        if (getClass() != obj.getClass())\n            return false;\n        final MultiKey other = (MultiKey) obj;\n\n        return Arrays.equals(values, other.values);\n    }\n\n    @Override\n    public String toString() {\n        StringBuilder builder = new StringBuilder(&quot;MultiKey[&quot;);\n\n        boolean first = true;\n\n        for (Object o : values) {\n            if (!first)\n                builder.append(&quot;, &quot;);\n\n            builder.append(o);\n\n            first = false;\n        }\n\n        builder.append(&quot;]&quot;);\n\n        return builder.toString();\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1248933,"reputation":133,"user_id":1209768,"accept_rate":50,"display_name":"mishka"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700041830,"creation_date":1700041830,"answer_id":77486681,"question_id":2501449,"body_markdown":"CompositeMap of commons collections 4 does the job\r\n\r\n","title":"Multiple indexes for a Java Collection - most basic solution?","body":"<p>CompositeMap of commons collections 4 does the job</p>\n"}],"owner":{"account_id":110220,"reputation":37362,"user_id":291741,"accept_rate":87,"display_name":"Chris Lercher"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":34052,"favorite_count":0,"down_vote_count":0,"up_vote_count":65,"accepted_answer_id":2501490,"answer_count":16,"score":65,"last_activity_date":1700041830,"creation_date":1269359852,"question_id":2501449,"body_markdown":"I&#39;m looking for the most basic solution to create multiple indexes on a Java Collection.\r\n\r\nRequired functionality:\r\n\r\n- When a Value is removed, all index entries associated with that value must be removed.\r\n- Index lookup must be faster than linear search (at least as fast as a TreeMap).\r\n\r\nSide conditions:\r\n\r\n- No dependencies on large (like Lucene) libraries. No uncommon or not well tested libraries. No database.\r\n- A library like Apache Commons Collections etc. would be ok.\r\n- Even better, if it works with JavaSE (6.0) alone.\r\n- **Edit:** No self-implemented solution (thanks for the answers suggesting this - it&#39;s good to have them here for completeness, but I already have a solution very similar to Jay&#39;s) *Whenever several people find out, that they implemented the same thing, this should be part of some common library.*\r\n\r\nOf course, I could write a class that manages multiple Maps myself *(that&#39;s not hard, but it feels like reinventing the wheel)*. So I&#39;d like to know, if it can be done without - while still getting a simple usage similar to using a single indexed java.util.Map. \r\n\r\nThanks, Chris\r\n\r\n&lt;h2&gt;Update&lt;/h2&gt;\r\n\r\nIt looks very much as if we haven&#39;t found anything. I like all your answers - the self developed versions, the links to database-like libraries.\r\n\r\nHere&#39;s what I really want: To have the functionality in (a) Apache Commons Collections or (b) in Google Collections/Guava. Or maybe a very good alternative.\r\n\r\nDo other people miss this functionality in these libraries, too? They do provide all sorts of things like MultiMaps, MulitKeyMaps, BidiMaps, ... I feel, it would fit in those libraries nicely - it could be called `MultiIndexMap`. What do you think?","title":"Multiple indexes for a Java Collection - most basic solution?","body":"<p>I'm looking for the most basic solution to create multiple indexes on a Java Collection.</p>\n\n<p>Required functionality:</p>\n\n<ul>\n<li>When a Value is removed, all index entries associated with that value must be removed.</li>\n<li>Index lookup must be faster than linear search (at least as fast as a TreeMap).</li>\n</ul>\n\n<p>Side conditions:</p>\n\n<ul>\n<li>No dependencies on large (like Lucene) libraries. No uncommon or not well tested libraries. No database.</li>\n<li>A library like Apache Commons Collections etc. would be ok.</li>\n<li>Even better, if it works with JavaSE (6.0) alone.</li>\n<li><strong>Edit:</strong> No self-implemented solution (thanks for the answers suggesting this - it's good to have them here for completeness, but I already have a solution very similar to Jay's) <em>Whenever several people find out, that they implemented the same thing, this should be part of some common library.</em></li>\n</ul>\n\n<p>Of course, I could write a class that manages multiple Maps myself <em>(that's not hard, but it feels like reinventing the wheel)</em>. So I'd like to know, if it can be done without - while still getting a simple usage similar to using a single indexed java.util.Map. </p>\n\n<p>Thanks, Chris</p>\n\n<h2>Update</h2>\n\n<p>It looks very much as if we haven't found anything. I like all your answers - the self developed versions, the links to database-like libraries.</p>\n\n<p>Here's what I really want: To have the functionality in (a) Apache Commons Collections or (b) in Google Collections/Guava. Or maybe a very good alternative.</p>\n\n<p>Do other people miss this functionality in these libraries, too? They do provide all sorts of things like MultiMaps, MulitKeyMaps, BidiMaps, ... I feel, it would fit in those libraries nicely - it could be called <code>MultiIndexMap</code>. What do you think?</p>\n"},{"tags":["java","csv","delimiter","separator"],"comments":[{"owner":{"account_id":279943,"reputation":202411,"user_id":575376,"accept_rate":82,"display_name":"juergen d"},"score":0,"creation_date":1325062976,"post_id":8653797,"comment_id":10751940,"body_markdown":"You could write your own lib. There is not much to it. Read every line from the file and split it with your regex or delimiters.","body":"You could write your own lib. There is not much to it. Read every line from the file and split it with your regex or delimiters."},{"owner":{"account_id":378959,"reputation":19465,"user_id":834316,"accept_rate":82,"display_name":"PNS"},"score":4,"creation_date":1325063574,"post_id":8653797,"comment_id":10752076,"body_markdown":"Not so straightforward, because CSV can have quoted fields, multiline records, etc. Also, there are countless options on quotes, escape characters, etc. Have a look at http://secretgeek.net/csv_trouble.asp for a funny overview fo the issues you may run into.","body":"Not so straightforward, because CSV can have quoted fields, multiline records, etc. Also, there are countless options on quotes, escape characters, etc. Have a look at <a href=\"http://secretgeek.net/csv_trouble.asp\" rel=\"nofollow noreferrer\">secretgeek.net/csv_trouble.asp</a> for a funny overview fo the issues you may run into."},{"owner":{"account_id":446514,"reputation":6213,"user_id":839601,"display_name":"gnat"},"score":0,"creation_date":1325063577,"post_id":8653797,"comment_id":10752079,"body_markdown":"did you check [FlatPack](http://flatpack.sourceforge.net/)? I ask because per [my past research](http://stackoverflow.com/a/6657525/839601) this library seemed to have much richer API than OpenCSV","body":"did you check <a href=\"http://flatpack.sourceforge.net/\" rel=\"nofollow noreferrer\">FlatPack</a>? I ask because per <a href=\"http://stackoverflow.com/a/6657525/839601\">my past research</a> this library seemed to have much richer API than OpenCSV"},{"owner":{"account_id":294406,"reputation":24602,"user_id":598289,"accept_rate":85,"display_name":"SJuan76"},"score":0,"creation_date":1325063783,"post_id":8653797,"comment_id":10752123,"body_markdown":"If you need to allow for the separator to be part of the data, either by quoting `007,&quot;My name is Bond, James Bond&quot;` or by escaping `007,My name is Bond\\, James Bond` then it becomes a lot more complicated (most in the former case). The Asker does not specify if it is needed, though.","body":"If you need to allow for the separator to be part of the data, either by quoting <code>007,&quot;My name is Bond, James Bond&quot;</code> or by escaping <code>007,My name is Bond\\, James Bond</code> then it becomes a lot more complicated (most in the former case). The Asker does not specify if it is needed, though."},{"owner":{"account_id":378959,"reputation":19465,"user_id":834316,"accept_rate":82,"display_name":"PNS"},"score":1,"creation_date":1325063944,"post_id":8653797,"comment_id":10752149,"body_markdown":"That would be a need, indeed, which is why (among many other reasons) a mature library is preferable, but all the ones I have played with seem to support on single-character separators.","body":"That would be a need, indeed, which is why (among many other reasons) a mature library is preferable, but all the ones I have played with seem to support on single-character separators."},{"owner":{"account_id":378959,"reputation":19465,"user_id":834316,"accept_rate":82,"display_name":"PNS"},"score":1,"creation_date":1325064054,"post_id":8653797,"comment_id":10752176,"body_markdown":"@gnat FlatPack seems to support only single-character separators, as well.","body":"@gnat FlatPack seems to support only single-character separators, as well."},{"owner":{"account_id":446514,"reputation":6213,"user_id":839601,"display_name":"gnat"},"score":0,"creation_date":1325064728,"post_id":8653797,"comment_id":10752331,"body_markdown":"I see. Did you consider _two-step approach_, then? I mean 1) replace your multi-character sequence with single char of your choice then 2) feed the result to openCSV or whatever lib","body":"I see. Did you consider <i>two-step approach</i>, then? I mean 1) replace your multi-character sequence with single char of your choice then 2) feed the result to openCSV or whatever lib"},{"owner":{"account_id":378959,"reputation":19465,"user_id":834316,"accept_rate":82,"display_name":"PNS"},"score":2,"creation_date":1325064960,"post_id":8653797,"comment_id":10752386,"body_markdown":"@gnat As I say in the question, &quot;So, for data separated with strings like &quot;|||&quot; there is no other option that preprocessing the input in order to transform the string to a single-character delimiter.&quot; :-)","body":"@gnat As I say in the question, &quot;So, for data separated with strings like &quot;|||&quot; there is no other option that preprocessing the input in order to transform the string to a single-character delimiter.&quot; :-)"}],"answers":[{"tags":[],"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"down_vote_count":3,"up_vote_count":1,"is_accepted":false,"score":-2,"last_activity_date":1325067072,"creation_date":1325063587,"answer_id":8653909,"question_id":8653797,"body_markdown":"Try [opencsv][1].\n\nIt does everything you need, including (and especially) handling embedded delimiters within quoted values (eg `&quot;a,b&quot;, &quot;c&quot;` parses as `[&quot;a,b&quot;, &quot;c&quot;]`)\n\nI&#39;ve used it successfully and I liked it.\n\n### Edited:\n\nSince opencsv handles only single-character separators, you could work around this thus:\n\n    String input;\n    char someCharNotInInput = &#39;|&#39;;\n    String delimiter = &quot;abc&quot;; // or whatever\n    input.replaceAll(delimiter, someCharNotInInput);\n    new CSVReader(input, someCharNotInInput); // etc\n    // Put it back into each value read\n    value.replaceAll(someCharNotInInput, delimiter); // in case it&#39;s inside delimiters\n    \n    \n\n  [1]: http://opencsv.sourceforge.net/","title":"Java CSV parser with string separator (multi-character)","body":"<p>Try <a href=\"http://opencsv.sourceforge.net/\" rel=\"nofollow noreferrer\">opencsv</a>.</p>\n<p>It does everything you need, including (and especially) handling embedded delimiters within quoted values (eg <code>&quot;a,b&quot;, &quot;c&quot;</code> parses as <code>[&quot;a,b&quot;, &quot;c&quot;]</code>)</p>\n<p>I've used it successfully and I liked it.</p>\n<h3>Edited:</h3>\n<p>Since opencsv handles only single-character separators, you could work around this thus:</p>\n<pre><code>String input;\nchar someCharNotInInput = '|';\nString delimiter = &quot;abc&quot;; // or whatever\ninput.replaceAll(delimiter, someCharNotInInput);\nnew CSVReader(input, someCharNotInInput); // etc\n// Put it back into each value read\nvalue.replaceAll(someCharNotInInput, delimiter); // in case it's inside delimiters\n</code></pre>\n"},{"tags":[],"owner":{"account_id":93866,"reputation":76253,"user_id":256618,"display_name":"Mark O&#39;Connor"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1325532779,"creation_date":1325351838,"answer_id":8689450,"question_id":8653797,"body_markdown":"This is a good question. The problem was not obvious to me until I looked at the [javadocs][1] and realised that opencsv only supports a character as a separator, not a string....\r\n\r\nHere&#39;s a couple of suggested work-arounds (Examples in Groovy can be converted to java).\r\n\r\nIgnore implicit intermediary fields\r\n====================================\r\nContinue to Use OpenCSV, but ignore the empty fields. Obviously this is a cheat, but it will work fine for parsing well-behaved data. \r\n\r\n        CSVParser csv = new CSVParser((char)&#39;|&#39;)\r\n\r\n        String[] result = csv.parseLine(&#39;J||Project report||&quot;F, G, I&quot;||1&#39;)\r\n\r\n        assert result[0] == &quot;J&quot;\r\n        assert result[2] == &quot;Project report&quot;\r\n        assert result[4] == &quot;F, G, I&quot;\r\n        assert result[6] == &quot;1&quot;\r\n\r\nor\r\n\r\n        CSVParser csv = new CSVParser((char)&#39;|&#39;)\r\n\r\n        String[] result = csv.parseLine(&#39;J|||Project report|||&quot;F, G, I&quot;|||1&#39;)\r\n\r\n        assert result[0] == &quot;J&quot;\r\n        assert result[3] == &quot;Project report&quot;\r\n        assert result[6] == &quot;F, G, I&quot;\r\n        assert result[9] == &quot;1&quot;\r\n\r\n\r\nRoll your own\r\n=============\r\nUse the Java String [tokenizer][2] method. \r\n\r\n        def result = &#39;J|||Project report|||&quot;F, G, I&quot;|||1&#39;.tokenize(&#39;|||&#39;)\r\n\r\n        assert result[0] == &quot;J&quot;\r\n        assert result[1] == &quot;Project report&quot;\r\n        assert result[2] == &quot;\\&quot;F, G, I\\&quot;&quot;\r\n        assert result[3] == &quot;1&quot;\r\n\r\nDisadvantage of this approach is that you lose the ability to ignore quote characters or escape separators..\r\n\r\nUpdate\r\n======\r\nInstead of pre-processing the data, altering it&#39;s content, why not combine both of the above approaches in a two step process:\r\n\r\n 1. Use the &quot;roll your own&quot; to first validate the data. Split each line and prove that it contains the requiste number of fields.\r\n 2. Use the &quot;field ignoring&quot; approach to parse the validated data, secure in the knowledge that the correct number of fields have been specified.\r\n\r\nNot very efficient, but possibly easier that writing your own CSV parser :-)\r\n\r\n  [1]: http://opencsv.sourceforge.net/apidocs/au/com/bytecode/opencsv/CSVParser.html\r\n  [2]: http://docs.oracle.com/javase/1.4.2/docs/api/java/util/StringTokenizer.html","title":"Java CSV parser with string separator (multi-character)","body":"<p>This is a good question. The problem was not obvious to me until I looked at the <a href=\"http://opencsv.sourceforge.net/apidocs/au/com/bytecode/opencsv/CSVParser.html\" rel=\"nofollow\">javadocs</a> and realised that opencsv only supports a character as a separator, not a string....</p>\n\n<p>Here's a couple of suggested work-arounds (Examples in Groovy can be converted to java).</p>\n\n<h1>Ignore implicit intermediary fields</h1>\n\n<p>Continue to Use OpenCSV, but ignore the empty fields. Obviously this is a cheat, but it will work fine for parsing well-behaved data. </p>\n\n<pre><code>    CSVParser csv = new CSVParser((char)'|')\n\n    String[] result = csv.parseLine('J||Project report||\"F, G, I\"||1')\n\n    assert result[0] == \"J\"\n    assert result[2] == \"Project report\"\n    assert result[4] == \"F, G, I\"\n    assert result[6] == \"1\"\n</code></pre>\n\n<p>or</p>\n\n<pre><code>    CSVParser csv = new CSVParser((char)'|')\n\n    String[] result = csv.parseLine('J|||Project report|||\"F, G, I\"|||1')\n\n    assert result[0] == \"J\"\n    assert result[3] == \"Project report\"\n    assert result[6] == \"F, G, I\"\n    assert result[9] == \"1\"\n</code></pre>\n\n<h1>Roll your own</h1>\n\n<p>Use the Java String <a href=\"http://docs.oracle.com/javase/1.4.2/docs/api/java/util/StringTokenizer.html\" rel=\"nofollow\">tokenizer</a> method. </p>\n\n<pre><code>    def result = 'J|||Project report|||\"F, G, I\"|||1'.tokenize('|||')\n\n    assert result[0] == \"J\"\n    assert result[1] == \"Project report\"\n    assert result[2] == \"\\\"F, G, I\\\"\"\n    assert result[3] == \"1\"\n</code></pre>\n\n<p>Disadvantage of this approach is that you lose the ability to ignore quote characters or escape separators..</p>\n\n<h1>Update</h1>\n\n<p>Instead of pre-processing the data, altering it's content, why not combine both of the above approaches in a two step process:</p>\n\n<ol>\n<li>Use the \"roll your own\" to first validate the data. Split each line and prove that it contains the requiste number of fields.</li>\n<li>Use the \"field ignoring\" approach to parse the validated data, secure in the knowledge that the correct number of fields have been specified.</li>\n</ol>\n\n<p>Not very efficient, but possibly easier that writing your own CSV parser :-)</p>\n"},{"tags":[],"owner":{"account_id":130009,"reputation":9672,"user_id":328968,"accept_rate":70,"display_name":"Peter"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1539371190,"creation_date":1539371190,"answer_id":52785658,"question_id":8653797,"body_markdown":"None of these solutions worked for me, because they all assumed you could store the entire CSV file in memory allowing for easy `replaceAll` type actions.\r\n\r\nI know it&#39;s slow, but I went with `Scanner`. It has a surprising number of features, and makes rolling your own simple CSV reader with any string you want as a record delimiter. It also lets you parse very large CSV files (I&#39;ve done 10GB single files before), since you can read records one at a time.\r\n\r\n    Scanner s = new Scanner(inputStream, &quot;UTF-8&quot;).useDelimiter(&quot;&gt;|\\n&quot;);\r\n\r\nI would prefer a faster solution, but no library I&#39;ve found supports it. FasterXML has had an open ticket to add this funcitonality since early 2017: https://github.com/FasterXML/jackson-dataformats-text/issues/14","title":"Java CSV parser with string separator (multi-character)","body":"<p>None of these solutions worked for me, because they all assumed you could store the entire CSV file in memory allowing for easy <code>replaceAll</code> type actions.</p>\n\n<p>I know it's slow, but I went with <code>Scanner</code>. It has a surprising number of features, and makes rolling your own simple CSV reader with any string you want as a record delimiter. It also lets you parse very large CSV files (I've done 10GB single files before), since you can read records one at a time.</p>\n\n<pre><code>Scanner s = new Scanner(inputStream, \"UTF-8\").useDelimiter(\"&gt;|\\n\");\n</code></pre>\n\n<p>I would prefer a faster solution, but no library I've found supports it. FasterXML has had an open ticket to add this funcitonality since early 2017: <a href=\"https://github.com/FasterXML/jackson-dataformats-text/issues/14\" rel=\"nofollow noreferrer\">https://github.com/FasterXML/jackson-dataformats-text/issues/14</a></p>\n"},{"tags":[],"owner":{"account_id":26036073,"reputation":11,"user_id":19741500,"display_name":"Niranjan Ravichandran"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660206309,"creation_date":1660206309,"answer_id":73317533,"question_id":8653797,"body_markdown":"\r\n\r\nWorkAround to use delimiter || : Add dummy fields in between the needed columns\r\n\r\n    public class ClassName {\r\n    \t@CsvBindByPosition(position = 0)\r\n    \tprivate String column1;\r\n    \t@CsvBindByPosition(position = 1)\r\n    \tprivate String dummy1;\r\n    \t@CsvBindByPosition(position = 2)\r\n    \tprivate String column2;\r\n    \t@CsvBindByPosition(position = 3)\r\n    \tprivate String dummy2;\r\n    \t@CsvBindByPosition(position = 4)\r\n    \tprivate String column3;\r\n    \t@CsvBindByPosition(position = 5)\r\n    \tprivate String dummy5;\r\n        @CsvBindByPosition(position = 6)\r\n    \tprivate String column4;\r\n    }\r\n    And then parse them using \r\n    List&lt;ClassName&gt; responses = new CsvToBeanBuilder&lt;ClassName&gt;(new FileReader(&quot;test.csv&quot;))\r\n                    .withType(ClassName.class)\r\n                    .withSkipLines(1) // to skip header\r\n                    .withSeparator(&#39;|&#39;)\r\n                    // to parse || , we use |\r\n                    .build()\r\n                    .parse();","title":"Java CSV parser with string separator (multi-character)","body":"<p>WorkAround to use delimiter || : Add dummy fields in between the needed columns</p>\n<pre><code>public class ClassName {\n    @CsvBindByPosition(position = 0)\n    private String column1;\n    @CsvBindByPosition(position = 1)\n    private String dummy1;\n    @CsvBindByPosition(position = 2)\n    private String column2;\n    @CsvBindByPosition(position = 3)\n    private String dummy2;\n    @CsvBindByPosition(position = 4)\n    private String column3;\n    @CsvBindByPosition(position = 5)\n    private String dummy5;\n    @CsvBindByPosition(position = 6)\n    private String column4;\n}\nAnd then parse them using \nList&lt;ClassName&gt; responses = new CsvToBeanBuilder&lt;ClassName&gt;(new FileReader(&quot;test.csv&quot;))\n                .withType(ClassName.class)\n                .withSkipLines(1) // to skip header\n                .withSeparator('|')\n                // to parse || , we use |\n                .build()\n                .parse();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2578634,"reputation":160,"user_id":2235787,"accept_rate":100,"display_name":"Andrei Filipchyk"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1666618863,"creation_date":1666618863,"answer_id":74181990,"question_id":8653797,"body_markdown":"In 2022 openCSV version 5.7.1 still doesn&#39;t support multi-character separator.\r\n\r\nSolution - use appache commons-csv, version 1.9.0 support multi-character separator!\r\n\r\nCSVFormat.Builder.create().setDelimiter(separator);","title":"Java CSV parser with string separator (multi-character)","body":"<p>In 2022 openCSV version 5.7.1 still doesn't support multi-character separator.</p>\n<p>Solution - use appache commons-csv, version 1.9.0 support multi-character separator!</p>\n<p>CSVFormat.Builder.create().setDelimiter(separator);</p>\n"},{"tags":[],"owner":{"account_id":5401349,"reputation":698,"user_id":8137610,"display_name":"Shuai Liu"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1700041776,"creation_date":1700039250,"answer_id":77486397,"question_id":8653797,"body_markdown":"Try [**univocity-parsers**][1], which supports multi-character delimiters and has the best performance.\r\n\r\nAs for **commons-csv**: If the input stream is a **gzip stream**, commons-csv 1.10.0 will incorrectly parse columns delimited by multiple characters, so use it carefully.\r\n\r\n\r\n  [1]: https://github.com/uniVocity/univocity-parsers","title":"Java CSV parser with string separator (multi-character)","body":"<p>Try <a href=\"https://github.com/uniVocity/univocity-parsers\" rel=\"nofollow noreferrer\"><strong>univocity-parsers</strong></a>, which supports multi-character delimiters and has the best performance.</p>\n<p>As for <strong>commons-csv</strong>: If the input stream is a <strong>gzip stream</strong>, commons-csv 1.10.0 will incorrectly parse columns delimited by multiple characters, so use it carefully.</p>\n"}],"owner":{"account_id":378959,"reputation":19465,"user_id":834316,"accept_rate":82,"display_name":"PNS"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":22634,"favorite_count":0,"down_vote_count":0,"up_vote_count":20,"accepted_answer_id":8689450,"answer_count":6,"score":20,"last_activity_date":1700041776,"creation_date":1325062817,"question_id":8653797,"body_markdown":"Is there any Java open source library that supports **multi-character** (i.e., String with length &gt; 1) separators (delimiters) for CSV?\r\n\r\nBy definition, CSV = Comma-Separated Values data with a single character (&#39;,&#39;) as the delimiter. However, many other single-character alternatives exist (e.g., tab), making CSV to stand for &quot;Character-Separated Values&quot; data (essentially, DSV: Delimiter-Separated Values data).\r\n\r\nMain Java open source libraries for CSV (e.g., [OpenCSV][1]) support virtually any character as the delimiter, but not string (multi-character) delimiters. So, for data separated with strings like &quot;|||&quot; there is no other option than preprocessing the input in order to transform the string to a single-character delimiter. From then on, the data can be parsed as single-character separated values.\r\n\r\nIt would therefore be nice if there was a library that supported string separators natively, so that no preprocessing was necessary. This would mean that CSV now standed for &quot;CharSequence-Separated Values&quot; data. :-)\r\n\r\n\r\n  [1]: http://opencsv.sourceforge.net/","title":"Java CSV parser with string separator (multi-character)","body":"<p>Is there any Java open source library that supports <strong>multi-character</strong> (i.e., String with length > 1) separators (delimiters) for CSV?</p>\n\n<p>By definition, CSV = Comma-Separated Values data with a single character (',') as the delimiter. However, many other single-character alternatives exist (e.g., tab), making CSV to stand for \"Character-Separated Values\" data (essentially, DSV: Delimiter-Separated Values data).</p>\n\n<p>Main Java open source libraries for CSV (e.g., <a href=\"http://opencsv.sourceforge.net/\" rel=\"noreferrer\">OpenCSV</a>) support virtually any character as the delimiter, but not string (multi-character) delimiters. So, for data separated with strings like \"|||\" there is no other option than preprocessing the input in order to transform the string to a single-character delimiter. From then on, the data can be parsed as single-character separated values.</p>\n\n<p>It would therefore be nice if there was a library that supported string separators natively, so that no preprocessing was necessary. This would mean that CSV now standed for \"CharSequence-Separated Values\" data. :-)</p>\n"},{"tags":["java","object","compiler-errors","pattern-matching","instanceof"],"comments":[{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":0,"creation_date":1699535604,"post_id":77453336,"comment_id":136546035,"body_markdown":"`but why is pattern matching not doing it?` It&#39;s new syntax that does the initialization for you.  If you don&#39;t have new features available or enabled, you won&#39;t be able to compile and run that code.","body":"<code>but why is pattern matching not doing it?</code> It&#39;s new syntax that does the initialization for you.  If you don&#39;t have new features available or enabled, you won&#39;t be able to compile and run that code."},{"owner":{"account_id":29161129,"reputation":86,"user_id":22339877,"display_name":"Flavian Diol D"},"score":0,"creation_date":1699536891,"post_id":77453336,"comment_id":136546326,"body_markdown":"I use JDK 17, which has the feature, it&#39;s not about enabling or disabling, I believe. It&#39;s about using &#39;&amp;&#39; or &#39;&amp;&amp;&#39;. I would want you to try the code out, and let me know if you find anything. Thank you.","body":"I use JDK 17, which has the feature, it&#39;s not about enabling or disabling, I believe. It&#39;s about using &#39;&amp;&#39; or &#39;&amp;&amp;&#39;. I would want you to try the code out, and let me know if you find anything. Thank you."},{"owner":{"account_id":204515,"reputation":11679,"user_id":452775,"accept_rate":63,"display_name":"Lii"},"score":1,"creation_date":1700151039,"post_id":77453336,"comment_id":136621905,"body_markdown":"The author of the bock you cite, Herbert Schildt, apparently has [quite a reputation](https://en.wikipedia.org/wiki/Herbert_Schildt#Reception) for writing programmings books on various languages that are riddled with errors. For example, [the following has been said](https://www.seebs.net/c/c_tcn3e.html) about his C book from the 90:s: _&quot;describing a language subtly but quite definitely different from C&quot;_. Your quote seems to confirm that. It is not only wrong about `&amp;`, it has horrible formatting and fail to use auto-boxing, which as been in the language for 20 years.","body":"The author of the bock you cite, Herbert Schildt, apparently has <a href=\"https://en.wikipedia.org/wiki/Herbert_Schildt#Reception\" rel=\"nofollow noreferrer\">quite a reputation</a> for writing programmings books on various languages that are riddled with errors. For example, <a href=\"https://www.seebs.net/c/c_tcn3e.html\" rel=\"nofollow noreferrer\">the following has been said</a> about his C book from the 90:s: <i>&quot;describing a language subtly but quite definitely different from C&quot;</i>. Your quote seems to confirm that. It is not only wrong about <code>&amp;</code>, it has horrible formatting and fail to use auto-boxing, which as been in the language for 20 years."},{"owner":{"account_id":3211603,"reputation":289287,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1702029662,"post_id":77453336,"comment_id":136850206,"body_markdown":"In addition to @Lii’s comment, you should note that even the first example is wrong. The comment says “*myOb is both an Integer and nonnegative*” but the condition did not check whether the value is nonnegative. My guess is that the author copied the example from somewhere else and it originally was `myOb instanceof Integer iObj &amp;&amp; iObj &gt;= 0` where everything made sense, the value was guaranteed to be non-negative and it can’t work that way with `&amp;`. Then, he decided to modify the example to create his own, but broke it completely.","body":"In addition to @Lii’s comment, you should note that even the first example is wrong. The comment says “<i>myOb is both an Integer and nonnegative</i>” but the condition did not check whether the value is nonnegative. My guess is that the author copied the example from somewhere else and it originally was <code>myOb instanceof Integer iObj &amp;&amp; iObj &gt;= 0</code> where everything made sense, the value was guaranteed to be non-negative and it can’t work that way with <code>&amp;</code>. Then, he decided to modify the example to create his own, but broke it completely."}],"answers":[{"tags":[],"owner":{"account_id":1692034,"reputation":3198,"user_id":1554195,"display_name":"tquadrat"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1699715274,"creation_date":1699537915,"answer_id":77453728,"question_id":77453336,"body_markdown":"First, the quote as presented in the question is crap!\r\n\r\nThe `&amp;&amp;` is the &quot;shortcut&quot; form that does not guarantee that both sides will be executed; in this case, if the first term evaluates to `false`, the second one will never be touched. `&amp;` guarantees that both terms are evaluated.\r\n\r\nNevertheless, it is possible that Pattern Matching does not work with single `&amp;` for some reason (but not for that one given in the quote!!)\r\n\r\nPattern matching for `instanceof` was introduced in Java 14 as a preview, a second preview was started in Java 15, until it was finalised in Java 16. And the JEP talks in fact only about `&amp;&amp;` and `||`, not about `&amp;` and `|`. But to have that behaving different than the shortcuts does not make much sense.\r\n\r\nMeanwhile, I tried\r\n\r\n```Java\r\nif( (count &lt; 100) &amp; myOb instanceof Integer iObj ) \r\n{\r\n   int iObj = (Integer) myOb;\r\n}\r\n```\r\nwith Java 21, and it works – unexpectedly! But when I use `&amp;&amp;`, it complains about the assignment/declaration in the body, because `iObj` was already declared … strange!!\r\n\r\nBut the [JLS 6.3.1](https://docs.oracle.com/javase/specs/jls/se21/html/jls-6.html#jls-6.3.1) also talk about the shortcuts only …\r\n\r\nPerhaps [JLS 15.22.2](https://docs.oracle.com/javase/specs/jls/se21/html/jls-15.html#jls-15.22.2) gives the answer: there `&amp;` and `|` are labeled as &quot;boolean logical operators&quot;, while 6.3.1 talked about `&amp;&amp;` and `||` as &quot;Conditional-And&quot; or &quot;Conditional-Or&quot; operators, respectively.\r\n\r\nBut then the question arises why the dangling `iObj` in the `instanceof` term with the single `&amp;` does not cause a syntax error?","title":"instanceof Pattern matching in Java, not compiling","body":"<p>First, the quote as presented in the question is crap!</p>\n<p>The <code>&amp;&amp;</code> is the &quot;shortcut&quot; form that does not guarantee that both sides will be executed; in this case, if the first term evaluates to <code>false</code>, the second one will never be touched. <code>&amp;</code> guarantees that both terms are evaluated.</p>\n<p>Nevertheless, it is possible that Pattern Matching does not work with single <code>&amp;</code> for some reason (but not for that one given in the quote!!)</p>\n<p>Pattern matching for <code>instanceof</code> was introduced in Java 14 as a preview, a second preview was started in Java 15, until it was finalised in Java 16. And the JEP talks in fact only about <code>&amp;&amp;</code> and <code>||</code>, not about <code>&amp;</code> and <code>|</code>. But to have that behaving different than the shortcuts does not make much sense.</p>\n<p>Meanwhile, I tried</p>\n<pre><code>if( (count &lt; 100) &amp; myOb instanceof Integer iObj ) \n{\n   int iObj = (Integer) myOb;\n}\n</code></pre>\n<p>with Java 21, and it works – unexpectedly! But when I use <code>&amp;&amp;</code>, it complains about the assignment/declaration in the body, because <code>iObj</code> was already declared … strange!!</p>\n<p>But the <a href=\"https://docs.oracle.com/javase/specs/jls/se21/html/jls-6.html#jls-6.3.1\" rel=\"nofollow noreferrer\">JLS 6.3.1</a> also talk about the shortcuts only …</p>\n<p>Perhaps <a href=\"https://docs.oracle.com/javase/specs/jls/se21/html/jls-15.html#jls-15.22.2\" rel=\"nofollow noreferrer\">JLS 15.22.2</a> gives the answer: there <code>&amp;</code> and <code>|</code> are labeled as &quot;boolean logical operators&quot;, while 6.3.1 talked about <code>&amp;&amp;</code> and <code>||</code> as &quot;Conditional-And&quot; or &quot;Conditional-Or&quot; operators, respectively.</p>\n<p>But then the question arises why the dangling <code>iObj</code> in the <code>instanceof</code> term with the single <code>&amp;</code> does not cause a syntax error?</p>\n"},{"tags":[],"owner":{"account_id":11899205,"reputation":163,"user_id":8707677,"display_name":"Kroppeb"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1700041477,"creation_date":1700041477,"answer_id":77486636,"question_id":77453336,"body_markdown":"The way the quote explains why the second case does not compile is worded extremely strange, maybe even wrong. So here is my way of explaining it.\r\n\r\nThe way you have to look at pattern match variables is that they are only declared if they are assigned (in the spec they call this &#39;introducing&#39; a pattern variable).\r\n\r\nLet&#39;s look at an example:\r\n```java\r\nif(myOb instanceof Integer iObj) {\r\n    // ...\r\n}\r\n```\r\nNow inside this if statement, the `instanceof` must have returned `true`, so `iObj` is &#39;introduced&#39; and therefore declared. This means you can both read from it, and write to it (as it isn&#39;t a final variable, note that `myOb instanceof final Integer iObj` is valid Java).\r\n\r\nLet&#39;s now jump to the first case given:\r\n```java\r\nif((count &lt; 100) &amp;&amp; myOb instanceof Integer iObj) {\r\n    // ...\r\n}\r\n```\r\nSo why does this work? The language designers made sure that if you have a statement in the form of:\r\n```java\r\nif (exprA &amp;&amp; exprB) {\r\n  // ...\r\n}\r\n```\r\nthat it is equivalent to:\r\n```java\r\nif (exprA) {\r\n  if (exprB) {\r\n    // ...\r\n  }\r\n}\r\n```\r\nThis why you have short circuiting in Java and so many other languages.\r\nDoing this to the 1st case we get:\r\n```java\r\nif (count &lt; 100) {\r\n  if (myOb instanceof Integer iObj) {\r\n    // ...\r\n  }\r\n}\r\n```\r\nBecause the inner if matches the first example I gave, it makes sense that again inside the if block the pattern variable must have been &#39;introduced&#39; and is therefore assignable.\r\n\r\nSo why doesn&#39;t this work with `&amp;` just like with `&amp;&amp;`? Well, because the language designers decided not to I suppose. \r\n\r\nI do have an argument as to why they decided this. Given a statement like this:\r\n```java\r\nif (exprA &amp; exprB) {\r\n  // ...\r\n}\r\n```\r\nIt is essentially the same as:\r\n```java\r\nboolean tempA = exprA;\r\nboolean tempB = exprB;\r\nif (tempA &amp;&amp; tempB) {\r\n  // ...\r\n}\r\n```\r\n\r\nAnd although we can split the `&amp;&amp;` operator here again, it doesn&#39;t matter. In the case you gave, we would get `boolean tempB = myOb instanceof Integer iObj`.\r\nThis statement can&#39;t &#39;introduce&#39; a pattern variable because it could be that `myOb` wasn&#39;t an Integer which means that it can&#39;t guarantee that `iObj` would be assigned.\r\n\r\nSo even though &#39;myOb instanceof Integer iObj&#39; in both cases must have returned true for the code in the if block to be run, because the language designers didn&#39;t make rules for how pattern variables get introduced by `&amp;` like they did with `&amp;&amp;`, the 2nd case in the book won&#39;t compile like the first one.\r\n\r\nSo why can you use `int iObj = ...` in the if block with `&amp;` but not with `&amp;&amp;`?\r\nWell, as we just saw with `&amp;`, the compiler doesn&#39;t consider the pattern variable to be &#39;introduced&#39; to the block, so you can define it inside, but with `&amp;&amp;` that is illegal because the pattern variable IS introduced, which means you can&#39;t redeclare it.\r\n","title":"instanceof Pattern matching in Java, not compiling","body":"<p>The way the quote explains why the second case does not compile is worded extremely strange, maybe even wrong. So here is my way of explaining it.</p>\n<p>The way you have to look at pattern match variables is that they are only declared if they are assigned (in the spec they call this 'introducing' a pattern variable).</p>\n<p>Let's look at an example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>if(myOb instanceof Integer iObj) {\n    // ...\n}\n</code></pre>\n<p>Now inside this if statement, the <code>instanceof</code> must have returned <code>true</code>, so <code>iObj</code> is 'introduced' and therefore declared. This means you can both read from it, and write to it (as it isn't a final variable, note that <code>myOb instanceof final Integer iObj</code> is valid Java).</p>\n<p>Let's now jump to the first case given:</p>\n<pre class=\"lang-java prettyprint-override\"><code>if((count &lt; 100) &amp;&amp; myOb instanceof Integer iObj) {\n    // ...\n}\n</code></pre>\n<p>So why does this work? The language designers made sure that if you have a statement in the form of:</p>\n<pre class=\"lang-java prettyprint-override\"><code>if (exprA &amp;&amp; exprB) {\n  // ...\n}\n</code></pre>\n<p>that it is equivalent to:</p>\n<pre class=\"lang-java prettyprint-override\"><code>if (exprA) {\n  if (exprB) {\n    // ...\n  }\n}\n</code></pre>\n<p>This why you have short circuiting in Java and so many other languages.\nDoing this to the 1st case we get:</p>\n<pre class=\"lang-java prettyprint-override\"><code>if (count &lt; 100) {\n  if (myOb instanceof Integer iObj) {\n    // ...\n  }\n}\n</code></pre>\n<p>Because the inner if matches the first example I gave, it makes sense that again inside the if block the pattern variable must have been 'introduced' and is therefore assignable.</p>\n<p>So why doesn't this work with <code>&amp;</code> just like with <code>&amp;&amp;</code>? Well, because the language designers decided not to I suppose.</p>\n<p>I do have an argument as to why they decided this. Given a statement like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>if (exprA &amp; exprB) {\n  // ...\n}\n</code></pre>\n<p>It is essentially the same as:</p>\n<pre class=\"lang-java prettyprint-override\"><code>boolean tempA = exprA;\nboolean tempB = exprB;\nif (tempA &amp;&amp; tempB) {\n  // ...\n}\n</code></pre>\n<p>And although we can split the <code>&amp;&amp;</code> operator here again, it doesn't matter. In the case you gave, we would get <code>boolean tempB = myOb instanceof Integer iObj</code>.\nThis statement can't 'introduce' a pattern variable because it could be that <code>myOb</code> wasn't an Integer which means that it can't guarantee that <code>iObj</code> would be assigned.</p>\n<p>So even though 'myOb instanceof Integer iObj' in both cases must have returned true for the code in the if block to be run, because the language designers didn't make rules for how pattern variables get introduced by <code>&amp;</code> like they did with <code>&amp;&amp;</code>, the 2nd case in the book won't compile like the first one.</p>\n<p>So why can you use <code>int iObj = ...</code> in the if block with <code>&amp;</code> but not with <code>&amp;&amp;</code>?\nWell, as we just saw with <code>&amp;</code>, the compiler doesn't consider the pattern variable to be 'introduced' to the block, so you can define it inside, but with <code>&amp;&amp;</code> that is illegal because the pattern variable IS introduced, which means you can't redeclare it.</p>\n"}],"owner":{"account_id":29161129,"reputation":86,"user_id":22339877,"display_name":"Flavian Diol D"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":282,"favorite_count":0,"down_vote_count":2,"up_vote_count":4,"accepted_answer_id":77486636,"answer_count":2,"score":2,"last_activity_date":1700041477,"creation_date":1699534198,"question_id":77453336,"body_markdown":"Below is a paragraph taken from &#39;Java - The Complete Reference&#39; book, 12th edition.\r\n\r\n&gt; ```\r\n&gt; Number myOb = Integer.valueOf(9);\r\n&gt; int count = 10; \r\n&gt; if((count &lt; 100) &amp;&amp; myOb instanceof Integer iObj) { // is OK \r\n&gt; // myOb is both an Integer and nonnegative, and count is less than 100. \r\n&gt; iObj = count; \r\n&gt; //.. \r\n&gt; }\r\n&gt; ```\r\n&gt;\r\n&gt; This fragment compiles because the if block will execute only when both sides of the &amp;&amp; are\r\n&gt;\r\n&gt; true. Thus, the use of iObj in the if block is valid. However, a compilation error will result if\r\n&gt;\r\n&gt; you tried to use the &amp; rather than the &amp;&amp;, as shown here:\r\n&gt;\r\n&gt; ```\r\n&gt; if((count &lt; 100) &amp; myOb instanceof Integer iObj) { // Error!\r\n&gt; ```\r\n&gt;\r\n&gt; In this case, the compiler cannot know whether or not iObj will be in scope in the if block\r\n&gt;\r\n&gt; because the right side of the &amp; will not necessarily be evaluated.\r\n\r\nI completely do not understand the last few lines, why would the code even enter the if block if the pattern matching fails, if it succeeds and the first condition is true, then what&#39;s wrong with using &#39;&amp;&#39; instead of &#39;&amp;&amp;&#39;.\r\n\r\nThe code works if I initialise iObj manually inside the if block, but why is pattern matching not doing it? When it&#39;s whole idea was to create a reference variable, pointing to the extracted object of mentioned type.\r\n\r\nWhat I get before manual initialization\r\n\r\n`Compile Error: iObj may not be initialized`\r\n\r\nWhat I tried\r\n\r\n```\r\nif((count &lt; 100) &amp; myOb instanceof Integer iObj) {\r\nint iObj = (Integer) myOb;\r\n}\r\n```\r\n\r\nAnd now it works.\r\n\r\nI want to know why, this happens.\r\n\r\nI am using JDK 20 in Windows\r\n\r\n```\r\njava version &quot;20.0.1&quot; 2023-04-18\r\nJava(TM) SE Runtime Environment (build 20.0.1+9-29)\r\nJava HotSpot(TM) 64-Bit Server VM (build 20.0.1+9-29, mixed mode, sharing)\r\n```","title":"instanceof Pattern matching in Java, not compiling","body":"<p>Below is a paragraph taken from 'Java - The Complete Reference' book, 12th edition.</p>\n<blockquote>\n<pre><code>Number myOb = Integer.valueOf(9);\nint count = 10; \nif((count &lt; 100) &amp;&amp; myOb instanceof Integer iObj) { // is OK \n// myOb is both an Integer and nonnegative, and count is less than 100. \niObj = count; \n//.. \n}\n</code></pre>\n<p>This fragment compiles because the if block will execute only when both sides of the &amp;&amp; are</p>\n<p>true. Thus, the use of iObj in the if block is valid. However, a compilation error will result if</p>\n<p>you tried to use the &amp; rather than the &amp;&amp;, as shown here:</p>\n<pre><code>if((count &lt; 100) &amp; myOb instanceof Integer iObj) { // Error!\n</code></pre>\n<p>In this case, the compiler cannot know whether or not iObj will be in scope in the if block</p>\n<p>because the right side of the &amp; will not necessarily be evaluated.</p>\n</blockquote>\n<p>I completely do not understand the last few lines, why would the code even enter the if block if the pattern matching fails, if it succeeds and the first condition is true, then what's wrong with using '&amp;' instead of '&amp;&amp;'.</p>\n<p>The code works if I initialise iObj manually inside the if block, but why is pattern matching not doing it? When it's whole idea was to create a reference variable, pointing to the extracted object of mentioned type.</p>\n<p>What I get before manual initialization</p>\n<p><code>Compile Error: iObj may not be initialized</code></p>\n<p>What I tried</p>\n<pre><code>if((count &lt; 100) &amp; myOb instanceof Integer iObj) {\nint iObj = (Integer) myOb;\n}\n</code></pre>\n<p>And now it works.</p>\n<p>I want to know why, this happens.</p>\n<p>I am using JDK 20 in Windows</p>\n<pre><code>java version &quot;20.0.1&quot; 2023-04-18\nJava(TM) SE Runtime Environment (build 20.0.1+9-29)\nJava HotSpot(TM) 64-Bit Server VM (build 20.0.1+9-29, mixed mode, sharing)\n</code></pre>\n"},{"tags":["java","generics"],"comments":[{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":6,"creation_date":1699988035,"post_id":77482932,"comment_id":136598923,"body_markdown":"Perhaps, instead of having a varargs of functions, it would be better to build a single `Function` via calls to [`Function#andThen(Function)`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/function/Function.html#andThen(java.util.function.Function)).","body":"Perhaps, instead of having a varargs of functions, it would be better to build a single <code>Function</code> via calls to <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/function/Function.html#andThen(java.util.function.Function)\" rel=\"nofollow noreferrer\"><code>Function#andThen(Function)</code></a>."},{"owner":{"account_id":162699,"reputation":138050,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":1,"creation_date":1699991465,"post_id":77482932,"comment_id":136599424,"body_markdown":"If you need to pass the result of one function as the input to the next element of a `Function&lt;T, R&gt;` array, the functions have to have the same input and output types, so `T` and `R` need to be the same.","body":"If you need to pass the result of one function as the input to the next element of a <code>Function&lt;T, R&gt;</code> array, the functions have to have the same input and output types, so <code>T</code> and <code>R</code> need to be the same."},{"owner":{"account_id":2497295,"reputation":3931,"user_id":2173392,"display_name":"pdem"},"score":0,"creation_date":1700043825,"post_id":77482932,"comment_id":136605545,"body_markdown":"T and R are resolved at compile time and can only reflect 2 types. If you want a chain of call with dIfferent T R at each level, you can&#39;t do this with java generic (but with old untyped Object it will work), or you have to use a different pattern: when I saw the cast, I I suspected the problem. To put it simple you cannot have varargs with mixed type (Function&lt;A,B&gt;x,Function&lt;B,C&gt; y)","body":"T and R are resolved at compile time and can only reflect 2 types. If you want a chain of call with dIfferent T R at each level, you can&#39;t do this with java generic (but with old untyped Object it will work), or you have to use a different pattern: when I saw the cast, I I suspected the problem. To put it simple you cannot have varargs with mixed type (Function&lt;A,B&gt;x,Function&lt;B,C&gt; y)"}],"owner":{"account_id":29573145,"reputation":1,"user_id":22664793,"display_name":"Yurben"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":72,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1700041440,"creation_date":1699985542,"question_id":77482932,"body_markdown":"I need to create generic method convertBy which will accept var args of Function&lt;T,K&gt; and looping through those methods passing it&#39;s result to the next method passed as parameter.\r\nHere is the example of code as I wrote:\r\n\r\n```\r\npublic &lt;R&gt; R convertBy( Function&lt;T, R&gt;... funs) {\r\n        R result = null;\r\n        for (Function&lt;T, R&gt; fun : funs) {\r\n            result = fun.apply( inputData);\r\n            inputData = (T) result;\r\n        }\r\n        return result;\r\n    }\r\n```\r\nAnd it should work, example: \r\n```\r\nList&lt;Integer&gt; ints = fileConv.convertBy(flines, join, collectInts);\r\n```\r\nAs example\r\n\r\nflines - returns a list of lines from a text file\r\n\r\njoin - combines a string list (returns a string of interconnected elements of the list)\r\n\r\ncollectInts - returns a list of integers contained in the string\r\netc etc\r\n\r\nBut It gives me below error\r\n\r\n    java: method convertBy in class InputConverter&lt;T&gt; cannot be applied to given types;\r\n      required: java.util.function.Function&lt;java.lang.String,R&gt;[]\r\n      found:    java.util.function.Function&lt;java.lang.String,java.util.List&lt;java.lang.String&gt;&gt;,java.util.function.Function&lt;java.util.List&lt;java.lang.String&gt;,java.lang.String&gt;\r\n      reason: cannot infer type-variable(s) R\r\n        (varargs mismatch; java.util.function.Function&lt;java.util.List&lt;java.lang.String&gt;,java.lang.String&gt; cannot be converted to java.util.function.Function&lt;java.lang.String,R&gt;)\r\n\r\nI understand that it register a T as an String and maybe that causes a problem but how to deal with it I&#39;ve no idea.\r\n\r\n\r\n```\r\npublic class InputConverter&lt;T&gt; {\r\n    private T inputData;\r\n\r\n    public InputConverter(T inputData) {\r\n        this.inputData = inputData;\r\n    }\r\n    \r\n    public &lt;R&gt; R convertBy( Function&lt;T, R&gt;... funs) {\r\n        R result = null;\r\n        for (Function&lt;T, R&gt; fun : funs) {\r\n            result = fun.apply( inputData);\r\n            inputData = (T) result;\r\n        }\r\n        return result;\r\n    }\r\n```\r\nHere my class InputConverter and here the code I&#39;ve tried with\r\n\r\n```\r\nInputConverter&lt;String&gt; fileConv = new InputConverter&lt;&gt;(fname);\r\nList&lt;String&gt; lines = fileConv.convertBy(flines);\r\nString text = fileConv.convertBy(flines, join);\r\nList&lt;Integer&gt; ints = fileConv.convertBy(flines, join, collectInts);\r\n```\r\nflines, join, collectInts are the lambdas that do actions as I wrote it on the top\r\n","title":"Java Generics, converting types","body":"<p>I need to create generic method convertBy which will accept var args of Function&lt;T,K&gt; and looping through those methods passing it's result to the next method passed as parameter.\nHere is the example of code as I wrote:</p>\n<pre><code>public &lt;R&gt; R convertBy( Function&lt;T, R&gt;... funs) {\n        R result = null;\n        for (Function&lt;T, R&gt; fun : funs) {\n            result = fun.apply( inputData);\n            inputData = (T) result;\n        }\n        return result;\n    }\n</code></pre>\n<p>And it should work, example:</p>\n<pre><code>List&lt;Integer&gt; ints = fileConv.convertBy(flines, join, collectInts);\n</code></pre>\n<p>As example</p>\n<p>flines - returns a list of lines from a text file</p>\n<p>join - combines a string list (returns a string of interconnected elements of the list)</p>\n<p>collectInts - returns a list of integers contained in the string\netc etc</p>\n<p>But It gives me below error</p>\n<pre><code>java: method convertBy in class InputConverter&lt;T&gt; cannot be applied to given types;\n  required: java.util.function.Function&lt;java.lang.String,R&gt;[]\n  found:    java.util.function.Function&lt;java.lang.String,java.util.List&lt;java.lang.String&gt;&gt;,java.util.function.Function&lt;java.util.List&lt;java.lang.String&gt;,java.lang.String&gt;\n  reason: cannot infer type-variable(s) R\n    (varargs mismatch; java.util.function.Function&lt;java.util.List&lt;java.lang.String&gt;,java.lang.String&gt; cannot be converted to java.util.function.Function&lt;java.lang.String,R&gt;)\n</code></pre>\n<p>I understand that it register a T as an String and maybe that causes a problem but how to deal with it I've no idea.</p>\n<pre><code>public class InputConverter&lt;T&gt; {\n    private T inputData;\n\n    public InputConverter(T inputData) {\n        this.inputData = inputData;\n    }\n    \n    public &lt;R&gt; R convertBy( Function&lt;T, R&gt;... funs) {\n        R result = null;\n        for (Function&lt;T, R&gt; fun : funs) {\n            result = fun.apply( inputData);\n            inputData = (T) result;\n        }\n        return result;\n    }\n</code></pre>\n<p>Here my class InputConverter and here the code I've tried with</p>\n<pre><code>InputConverter&lt;String&gt; fileConv = new InputConverter&lt;&gt;(fname);\nList&lt;String&gt; lines = fileConv.convertBy(flines);\nString text = fileConv.convertBy(flines, join);\nList&lt;Integer&gt; ints = fileConv.convertBy(flines, join, collectInts);\n</code></pre>\n<p>flines, join, collectInts are the lambdas that do actions as I wrote it on the top</p>\n"},{"tags":["java","eclipse","selenium-webdriver","tomcat8","testng-eclipse"],"comments":[{"owner":{"account_id":27938804,"reputation":102,"user_id":21335232,"display_name":"Bhairu"},"score":0,"creation_date":1700026338,"post_id":77484653,"comment_id":136603127,"body_markdown":"have you configured your Java with your system configuration? also, you can switch back to the accepted Java version by right-clicking on the project and going to build path and edit and apply.","body":"have you configured your Java with your system configuration? also, you can switch back to the accepted Java version by right-clicking on the project and going to build path and edit and apply."}],"owner":{"account_id":29904739,"reputation":11,"user_id":22917540,"display_name":"thy nguyen"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1700041250,"creation_date":1700010092,"question_id":77484653,"body_markdown":"I have applied the `jdk21` library instead of the default, and selenium server `4.15.0` and also installed tomcat `8.5` but when I run it I get an error.\r\n````\r\nError opening zip file or JAR manifest missing : C:\\Users\\Admin\\.m2\\repository/org/aspectj/aspectjweaver/1.9.2/aspectjweaver-1.9.2.jar\r\nError occurred during initialization of VM\r\nagent library failed Agent_OnLoad: instrument\r\n````\r\nI tried downloading `aspectjweaver-1.9.2.jar` into the `aspectjweaver` folder but running it again still got the error.","title":"I&#39;m running the project to test using TestNG java in eclipse but I get an error","body":"<p>I have applied the <code>jdk21</code> library instead of the default, and selenium server <code>4.15.0</code> and also installed tomcat <code>8.5</code> but when I run it I get an error.</p>\n<pre><code>Error opening zip file or JAR manifest missing : C:\\Users\\Admin\\.m2\\repository/org/aspectj/aspectjweaver/1.9.2/aspectjweaver-1.9.2.jar\nError occurred during initialization of VM\nagent library failed Agent_OnLoad: instrument\n</code></pre>\n<p>I tried downloading <code>aspectjweaver-1.9.2.jar</code> into the <code>aspectjweaver</code> folder but running it again still got the error.</p>\n"},{"tags":["java","spring","spring-boot","multithreading","unit-testing"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1700037748,"post_id":77486220,"comment_id":136604484,"body_markdown":"1, you cannot. 2. use the `applicationcontext.getBean` method to provide the constructor arguments. Why do you want to use autowired in the first place, there is nothing wrong with using `new`. You could move this to a factory that you autowire, this factory you could mock in your test.","body":"1, you cannot. 2. use the <code>applicationcontext.getBean</code> method to provide the constructor arguments. Why do you want to use autowired in the first place, there is nothing wrong with using <code>new</code>. You could move this to a factory that you autowire, this factory you could mock in your test."}],"answers":[{"tags":[],"owner":{"account_id":29726894,"reputation":313,"user_id":22782586,"display_name":"Sahab"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1700040889,"creation_date":1700040889,"answer_id":77486575,"question_id":77486220,"body_markdown":"**Let see how we can solve this:**\r\n\r\n- Configure a bean to supply `dynamicStirngValue`, `dynamicIntValue` and we can use tread safety list using `CopyOnWriteArrayList`\r\n\r\n```\r\n@Configuration\r\npublic class ParamsKeyVal  {\r\n    @Bean\r\n    public List&lt;HashMap&lt;String, Integer&gt;&gt;  getParams() {\r\n        HashMap&lt;String, Integer&gt; params = new HashMap&lt;&gt;();\r\n        List&lt;HashMap&lt;String, Integer&gt;&gt; list = new CopyOnWriteArrayList&lt;&gt;();\r\n\r\n        list.add(Map.of(&quot;key1&quot;, 10));\r\n        list.add(Map.of(&quot;key2&quot;, 13));\r\n\r\n        // this params can found form other source like properties file/database\r\n        return list;\r\n    }\r\n}\r\n\r\n```\r\n- update component A so that it can be test friendly \r\n\r\n```\r\n@Component\r\nclass A {\r\n    private final List&lt;HashMap&lt;String, Integer&gt;&gt; params;\r\n    private final B b;\r\n\r\n    @Autowired\r\n    public A(List&lt;HashMap&lt;String, Integer&gt;&gt; params, B b) {\r\n\r\n        this.params = params;\r\n        this.b = b;\r\n    }\r\n\r\n    public void classAMethod() {\r\n        for(int i=0; i&lt;params.size(); i++) {\r\n\r\n            HashMap&lt;String, Integer&gt; entrySet = params.get(i);\r\n            String dynamicStirngValue = null;\r\n            Integer dynamicIntValue = null;\r\n            for (Map.Entry&lt;String, Integer&gt; entry : entrySet) {\r\n\r\n                dynamicStirngValue =  entry.getKey();\r\n                dynamicIntValue = entry.getValue();\r\n                break;\r\n            }\r\n\r\n            b.setDynamicStirngValue(dynamicStirngValue);\r\n            b.setDynamicIntValue(dynamicIntValue);\r\n            b.setDynamicInt(i);\r\n\r\n            Object xyz = b.execute();\r\n        }\r\n    }\r\n\r\n}\r\n\r\n```\r\n- update component B for no argument constructor \r\n\r\n```\r\n\r\n@Component\r\n@Scope(&quot;prototype&quot;)\r\nclass B {\r\n\r\n    public B() {\r\n\r\n    }\r\n    public B(String str1, int int1, int int2) {\r\n        // setting up the passed parameters\r\n    }\r\n    public Object execute() {\r\n        // some code to use the class variables\r\n    }\r\n}\r\n ","title":"Get different instance of autowired class bean in for loop","body":"<p><strong>Let see how we can solve this:</strong></p>\n<ul>\n<li>Configure a bean to supply <code>dynamicStirngValue</code>, <code>dynamicIntValue</code> and we can use tread safety list using <code>CopyOnWriteArrayList</code></li>\n</ul>\n<pre><code>@Configuration\npublic class ParamsKeyVal  {\n    @Bean\n    public List&lt;HashMap&lt;String, Integer&gt;&gt;  getParams() {\n        HashMap&lt;String, Integer&gt; params = new HashMap&lt;&gt;();\n        List&lt;HashMap&lt;String, Integer&gt;&gt; list = new CopyOnWriteArrayList&lt;&gt;();\n\n        list.add(Map.of(&quot;key1&quot;, 10));\n        list.add(Map.of(&quot;key2&quot;, 13));\n\n        // this params can found form other source like properties file/database\n        return list;\n    }\n}\n\n</code></pre>\n<ul>\n<li>update component A so that it can be test friendly</li>\n</ul>\n<pre><code>@Component\nclass A {\n    private final List&lt;HashMap&lt;String, Integer&gt;&gt; params;\n    private final B b;\n\n    @Autowired\n    public A(List&lt;HashMap&lt;String, Integer&gt;&gt; params, B b) {\n\n        this.params = params;\n        this.b = b;\n    }\n\n    public void classAMethod() {\n        for(int i=0; i&lt;params.size(); i++) {\n\n            HashMap&lt;String, Integer&gt; entrySet = params.get(i);\n            String dynamicStirngValue = null;\n            Integer dynamicIntValue = null;\n            for (Map.Entry&lt;String, Integer&gt; entry : entrySet) {\n\n                dynamicStirngValue =  entry.getKey();\n                dynamicIntValue = entry.getValue();\n                break;\n            }\n\n            b.setDynamicStirngValue(dynamicStirngValue);\n            b.setDynamicIntValue(dynamicIntValue);\n            b.setDynamicInt(i);\n\n            Object xyz = b.execute();\n        }\n    }\n\n}\n\n</code></pre>\n<ul>\n<li>update component B for no argument constructor</li>\n</ul>\n<pre><code>\n@Component\n@Scope(&quot;prototype&quot;)\nclass B {\n\n    public B() {\n\n    }\n    public B(String str1, int int1, int int2) {\n        // setting up the passed parameters\n    }\n    public Object execute() {\n        // some code to use the class variables\n    }\n}\n \n</code></pre>\n"}],"owner":{"account_id":10375359,"reputation":45,"user_id":7909628,"display_name":"Akshay Borse"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77486575,"answer_count":1,"score":1,"last_activity_date":1700040889,"creation_date":1700037480,"question_id":77486220,"body_markdown":"I am new to Spring Boot, learning autowire annotation, dependency injection and unit testing\r\n\r\nI have a code in Spring Boot something like below\r\n\r\n```\r\n@Component\r\nclass A {\r\n  public void classAMethod() {\r\n    for(int i=0; i&lt;10; i++) {\r\n      B b = new B(dynamicStirngValue,dynamicIntValue, i);\r\n      Object xyz = b.execute();\r\n    }\r\n  }\r\n}\r\n\r\n@Component\r\n@Scope(&quot;prototype&quot;)\r\nclass B {\r\n\r\n  public B(String str1, int int1, int int2) {\r\n    // setting up the passed parameters\r\n  }\r\n  public Object execute() {\r\n    // some code to use the class variables\r\n  }\r\n}\r\n```\r\n\r\nI want to achieve 3 things with the code:\r\n\r\n 1. Instead of creating an object of B using the new keyword I want it to be using @autowired (Dependency injection), this will be helpful so that I can mock B and mock the return of execute() method while unit testing.\r\n\r\n 2. Since B has a parameterized constructor, I want the ability to get bean by passing the parameters, the parameter values will be dynamic, i.e., for each iteration of the loop the values passed will be different. The examples I found online are using values from the properties files.\r\n\r\n 3. The classAMethod() is being called in multi-threaded environment, that&#39;s why in for loop I am every time creating a new instance of class B, so as to avoid concurrency issues, so using autowire I want to get a new instance of class B. I cannot use synchronized keyword inside B because it internally performs lots of operations, so creating a new instance every time is more simpler than locking and unlocking blocks of code and it will lead to a decrease in performance issues as only one thread will have access to that block of code.\r\n\r\nCan you provided an example for this scenario? Or is there any other way.\r\n\r\nI want to do this for 2 reasons:\r\n 1. Unit test\r\n 2. Make the application completely with Spring Boot concepts (DI) and avoid new keyword\r\n\r\nI can do the unit tests by constructor mocking, but the problem with this approach is that we need to do @PrepareForTest(A.class), which has its own problem like code coverage which shows as 0%.\r\n\r\nThanks","title":"Get different instance of autowired class bean in for loop","body":"<p>I am new to Spring Boot, learning autowire annotation, dependency injection and unit testing</p>\n<p>I have a code in Spring Boot something like below</p>\n<pre><code>@Component\nclass A {\n  public void classAMethod() {\n    for(int i=0; i&lt;10; i++) {\n      B b = new B(dynamicStirngValue,dynamicIntValue, i);\n      Object xyz = b.execute();\n    }\n  }\n}\n\n@Component\n@Scope(&quot;prototype&quot;)\nclass B {\n\n  public B(String str1, int int1, int int2) {\n    // setting up the passed parameters\n  }\n  public Object execute() {\n    // some code to use the class variables\n  }\n}\n</code></pre>\n<p>I want to achieve 3 things with the code:</p>\n<ol>\n<li><p>Instead of creating an object of B using the new keyword I want it to be using @autowired (Dependency injection), this will be helpful so that I can mock B and mock the return of execute() method while unit testing.</p>\n</li>\n<li><p>Since B has a parameterized constructor, I want the ability to get bean by passing the parameters, the parameter values will be dynamic, i.e., for each iteration of the loop the values passed will be different. The examples I found online are using values from the properties files.</p>\n</li>\n<li><p>The classAMethod() is being called in multi-threaded environment, that's why in for loop I am every time creating a new instance of class B, so as to avoid concurrency issues, so using autowire I want to get a new instance of class B. I cannot use synchronized keyword inside B because it internally performs lots of operations, so creating a new instance every time is more simpler than locking and unlocking blocks of code and it will lead to a decrease in performance issues as only one thread will have access to that block of code.</p>\n</li>\n</ol>\n<p>Can you provided an example for this scenario? Or is there any other way.</p>\n<p>I want to do this for 2 reasons:</p>\n<ol>\n<li>Unit test</li>\n<li>Make the application completely with Spring Boot concepts (DI) and avoid new keyword</li>\n</ol>\n<p>I can do the unit tests by constructor mocking, but the problem with this approach is that we need to do @PrepareForTest(A.class), which has its own problem like code coverage which shows as 0%.</p>\n<p>Thanks</p>\n"},{"tags":["java","compiler-errors","return"],"comments":[{"owner":{"account_id":4362282,"reputation":92954,"user_id":3558960,"accept_rate":60,"display_name":"Robby Cornelissen"},"score":1,"creation_date":1700040948,"post_id":77486571,"comment_id":136605019,"body_markdown":"Don&#39;t post pictures of code. Your `if` branch does not have a `return` statement.","body":"Don&#39;t post pictures of code. Your <code>if</code> branch does not have a <code>return</code> statement."},{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":0,"creation_date":1700040953,"post_id":77486571,"comment_id":136605020,"body_markdown":"1) please share your code as text inside the question, not as pictures. 2) what does your method return if that first `if` is true?","body":"1) please share your code as text inside the question, not as pictures. 2) what does your method return if that first <code>if</code> is true?"},{"owner":{"account_id":3741438,"reputation":12025,"user_id":3111149,"accept_rate":87,"display_name":"Matteo NNZ"},"score":0,"creation_date":1700041038,"post_id":77486571,"comment_id":136605038,"body_markdown":"If Seitenlange &lt; 0 is true, your function doesn&#39;t return any double. P.s.: add code as code, not as image. P.p.s.: write code in English, it&#39;s always better.","body":"If Seitenlange &lt; 0 is true, your function doesn&#39;t return any double. P.s.: add code as code, not as image. P.p.s.: write code in English, it&#39;s always better."}],"owner":{"account_id":29907628,"reputation":1,"user_id":22919766,"display_name":"D.Bur"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"closed_date":1700041029,"answer_count":0,"score":-2,"last_activity_date":1700040864,"creation_date":1700040864,"question_id":77486571,"body_markdown":"How can there be a missing return if it is already stated in the &quot;else-if&quot; operation?\r\nI already have 2 return statements in the else-if operation, so why is there a missing return statement?\r\n \r\n(https://i.stack.imgur.com/0fWM0.jpg)\r\n\r\n\r\nDo not know how to solve it","title":"how do I fix this missing return statement error","body":"<p>How can there be a missing return if it is already stated in the &quot;else-if&quot; operation?\nI already have 2 return statements in the else-if operation, so why is there a missing return statement?</p>\n<p>(<a href=\"https://i.stack.imgur.com/0fWM0.jpg\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/0fWM0.jpg</a>)</p>\n<p>Do not know how to solve it</p>\n"},{"tags":["java","azure","apache-kafka"],"comments":[{"owner":{"account_id":390441,"reputation":32048,"user_id":750510,"accept_rate":98,"display_name":"madhead"},"score":0,"creation_date":1592744945,"post_id":62496128,"comment_id":110528152,"body_markdown":"Is you Azure VM exposed to the internet? Did you configured advertised host in Kafka&#39;s `server.properties` correctly?","body":"Is you Azure VM exposed to the internet? Did you configured advertised host in Kafka&#39;s <code>server.properties</code> correctly?"},{"owner":{"account_id":18895650,"reputation":1,"user_id":13784880,"display_name":"Rishabh Singh"},"score":0,"creation_date":1592757120,"post_id":62496128,"comment_id":110532527,"body_markdown":"I tried pinging the VM from my local machine and it was responding correctly. I only modified this property and placed public IP instead of the text advertised.listeners=PLAINTEXT://&lt;public ip&gt;:9092","body":"I tried pinging the VM from my local machine and it was responding correctly. I only modified this property and placed public IP instead of the text advertised.listeners=PLAINTEXT://&lt;public ip&gt;:9092"}],"owner":{"account_id":18895650,"reputation":1,"user_id":13784880,"display_name":"Rishabh Singh"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":162,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1700040821,"creation_date":1592727671,"question_id":62496128,"body_markdown":"I have created a Virtual Machine in Azure and setup Apache Kafka inside it. Now I want to access the Kafka from my local machine but it keeps on giving me the connection not established error after stucking for a while in **kafkaProducer.send(record)**, this is the producer code :\r\n\r\n```java \r\nProperties props = new Properties();\r\n\t\tprops.put(ProducerConfig.BOOTSTRAP_SERVERS_CONFIG, KafkaIP);\r\n\t\tprops.put(ProducerConfig.KEY_SERIALIZER_CLASS_CONFIG, StringSerializer.class.getName());\r\n\t\tprops.put(ProducerConfig.VALUE_SERIALIZER_CLASS_CONFIG, StringSerializer.class.getName());\r\n\r\n\t\tKafkaProducer&lt;String, String&gt; kafkaProducer = new KafkaProducer&lt;String, String&gt;(props);\r\n\t\ttry {\r\n\r\n\t\t\tfor(int i = 0; i &lt; 5; i++){\r\n\r\n\t\t\t\tProducerRecord&lt;String, String&gt; record = new ProducerRecord&lt;String, String&gt;(&quot;sec&quot;, Integer.toString(1),&quot;Hello&quot;); \r\n/* GETS STUCK IN THE FOLLOWING LINE FOR VERY LONG*/\r\n\t\t\t\tkafkaProducer.send(record);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t} catch (Exception e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n```\r\nI have uncommented and placed the public IP in the property **advertised.listeners** inside **server.properties** file. Both 9092 &amp; 2181 ports are open for the source.\r\nThe same thing worked for the AWS EC2 instance. Is there any other modification that I have to do for accessing Kafka which inside Azure VM?","title":"Problem in accessing Kafka present in Azure VM","body":"<p>I have created a Virtual Machine in Azure and setup Apache Kafka inside it. Now I want to access the Kafka from my local machine but it keeps on giving me the connection not established error after stucking for a while in <strong>kafkaProducer.send(record)</strong>, this is the producer code :</p>\n<pre class=\"lang-java prettyprint-override\"><code>Properties props = new Properties();\n        props.put(ProducerConfig.BOOTSTRAP_SERVERS_CONFIG, KafkaIP);\n        props.put(ProducerConfig.KEY_SERIALIZER_CLASS_CONFIG, StringSerializer.class.getName());\n        props.put(ProducerConfig.VALUE_SERIALIZER_CLASS_CONFIG, StringSerializer.class.getName());\n\n        KafkaProducer&lt;String, String&gt; kafkaProducer = new KafkaProducer&lt;String, String&gt;(props);\n        try {\n\n            for(int i = 0; i &lt; 5; i++){\n\n                ProducerRecord&lt;String, String&gt; record = new ProducerRecord&lt;String, String&gt;(&quot;sec&quot;, Integer.toString(1),&quot;Hello&quot;); \n/* GETS STUCK IN THE FOLLOWING LINE FOR VERY LONG*/\n                kafkaProducer.send(record);\n            }\n            \n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n</code></pre>\n<p>I have uncommented and placed the public IP in the property <strong>advertised.listeners</strong> inside <strong>server.properties</strong> file. Both 9092 &amp; 2181 ports are open for the source.\nThe same thing worked for the AWS EC2 instance. Is there any other modification that I have to do for accessing Kafka which inside Azure VM?</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":5376192,"reputation":9422,"user_id":4283005,"display_name":"dev.bmax"},"score":0,"creation_date":1700042403,"post_id":77486561,"comment_id":136605283,"body_markdown":"You might find this useful: https://developer.android.com/training/id-auth/identify","body":"You might find this useful: <a href=\"https://developer.android.com/training/id-auth/identify\" rel=\"nofollow noreferrer\">developer.android.com/training/id-auth/identify</a>"},{"owner":{"account_id":17183107,"reputation":245,"user_id":12438238,"display_name":"Vasant Raval"},"score":0,"creation_date":1700044870,"post_id":77486561,"comment_id":136605720,"body_markdown":"the problem is if i use any kind of sign despite google facebook or manual , user will know that i have there names in the app , so revealing there names will not effect much as if i take no data from them and then reveal it , you can look something similar here with this game https://pixeldough.itch.io/start-survey for windows where it takes username from  C:/Users:/&lt;CurrentUser&gt;, thought it is also not accurate , as people can put any name for the user name,so sometimes it just dosent make sense, but i neither have an option too","body":"the problem is if i use any kind of sign despite google facebook or manual , user will know that i have there names in the app , so revealing there names will not effect much as if i take no data from them and then reveal it , you can look something similar here with this game <a href=\"https://pixeldough.itch.io/start-survey\" rel=\"nofollow noreferrer\">pixeldough.itch.io/start-survey</a> for windows where it takes username from  C:/Users:/&lt;CurrentUser&gt;, thought it is also not accurate , as people can put any name for the user name,so sometimes it just dosent make sense, but i neither have an option too"},{"owner":{"account_id":5376192,"reputation":9422,"user_id":4283005,"display_name":"dev.bmax"},"score":1,"creation_date":1700048953,"post_id":77486561,"comment_id":136606401,"body_markdown":"Privacy is a big deal in Android. Apps have very limited access to sensitive information and almost always after requesting a permission.","body":"Privacy is a big deal in Android. Apps have very limited access to sensitive information and almost always after requesting a permission."}],"owner":{"account_id":17183107,"reputation":245,"user_id":12438238,"display_name":"Vasant Raval"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1700040757,"creation_date":1700040757,"question_id":77486561,"body_markdown":"I&#39;m developing a game/app where I aim to identify the current user without directly asking for their name. Instead, I want to retrieve their name from the Android system. I&#39;m uncertain about the potential sources, but two possibilities come to mind:\r\n\r\n1) The user&#39;s self-entered name in their contacts.\r\n2) The registered name in the Android OS, especially during the initial boot if available.\r\n\r\nRest assured, I&#39;m not using this information for any misleading purposes; it&#39;s purely for the game&#39;s functionality. At a certain point in the game, I plan to reveal their name within the app itself. Could someone please assist me with this?","title":"How can I retrieve the device owner/user name?","body":"<p>I'm developing a game/app where I aim to identify the current user without directly asking for their name. Instead, I want to retrieve their name from the Android system. I'm uncertain about the potential sources, but two possibilities come to mind:</p>\n<ol>\n<li>The user's self-entered name in their contacts.</li>\n<li>The registered name in the Android OS, especially during the initial boot if available.</li>\n</ol>\n<p>Rest assured, I'm not using this information for any misleading purposes; it's purely for the game's functionality. At a certain point in the game, I plan to reveal their name within the app itself. Could someone please assist me with this?</p>\n"},{"tags":["java","linux","apache-kafka"],"comments":[{"owner":{"account_id":5932124,"reputation":355,"user_id":4666265,"accept_rate":80,"display_name":"appchemist"},"score":0,"creation_date":1699960312,"post_id":77457247,"comment_id":136593438,"body_markdown":"Have you checked what user &amp; group the process was running by?","body":"Have you checked what user &amp; group the process was running by?"},{"owner":{"account_id":2688763,"reputation":99,"user_id":2322525,"accept_rate":60,"display_name":"Dnyaneshwar"},"score":0,"creation_date":1699964208,"post_id":77457247,"comment_id":136594151,"body_markdown":"@appchemist Yes, the process is running with `kafka` user which has read permission to /proc/self/io.\n\n`\nps -p 2400932 -o user,group\nUSER     GROUP\nkafka    kafkagrp\n`","body":"@appchemist Yes, the process is running with <code>kafka</code> user which has read permission to /proc/self/io.  ` ps -p 2400932 -o user,group USER     GROUP kafka    kafkagrp `"},{"owner":{"account_id":1136217,"reputation":14336,"user_id":1121249,"accept_rate":86,"display_name":"rkosegi"},"score":0,"creation_date":1700029392,"post_id":77457247,"comment_id":136603392,"body_markdown":"`/proc/self` is always tied to process accessing it. attempt to change it for other program is like sharing http://localhost to someone in internet","body":"<code>&#47;proc&#47;self</code> is always tied to process accessing it. attempt to change it for other program is like sharing <a href=\"http://localhost\" rel=\"nofollow noreferrer\">localhost</a> to someone in internet"}],"answers":[{"tags":[],"owner":{"account_id":5932124,"reputation":355,"user_id":4666265,"accept_rate":80,"display_name":"appchemist"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700040629,"creation_date":1700028740,"answer_id":77485591,"question_id":77457247,"body_markdown":"`/proc/self` means `/proc/{pid}`\r\n\r\ncheck it out [here][1]\r\n\r\nSo, chmod command&#39;s `/proc/self` is not kafka process&#39;s `/proc/self`\r\n\r\nExactly, you change `/proc/{kafka process pid}/io`\r\n\r\nBut changing permissions is not a perfect solution because OS creates a new `/proc/{pid}` every time you run the program.\r\n\r\nThe link below looks like a similar issue, check it out\r\nhttps://unix.stackexchange.com/questions/297190/owner-cant-read-proc-pid-io\r\n\r\n  [1]: https://man7.org/linux/man-pages/man5/proc.5.html","title":"Kafka cluster startup warning | Unable to update IO metrics | AccessDeniedException: /proc/self/io","body":"<p><code>/proc/self</code> means <code>/proc/{pid}</code></p>\n<p>check it out <a href=\"https://man7.org/linux/man-pages/man5/proc.5.html\" rel=\"nofollow noreferrer\">here</a></p>\n<p>So, chmod command's <code>/proc/self</code> is not kafka process's <code>/proc/self</code></p>\n<p>Exactly, you change <code>/proc/{kafka process pid}/io</code></p>\n<p>But changing permissions is not a perfect solution because OS creates a new <code>/proc/{pid}</code> every time you run the program.</p>\n<p>The link below looks like a similar issue, check it out\n<a href=\"https://unix.stackexchange.com/questions/297190/owner-cant-read-proc-pid-io\">https://unix.stackexchange.com/questions/297190/owner-cant-read-proc-pid-io</a></p>\n"}],"owner":{"account_id":2688763,"reputation":99,"user_id":2322525,"accept_rate":60,"display_name":"Dnyaneshwar"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":96,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1700040629,"creation_date":1699580059,"question_id":77457247,"body_markdown":"I have a setup consisting of a 2-node Kafka KRaft Cluster on an OEL8 server, with following details :\r\n\r\nKafka Version : kafka_2.13-3.4.0\r\nJava Version : OpenJDK 17\r\n\r\nvmhost1 : server.properties\r\n```\r\nprocess.roles=broker,controller\r\nnode.id=1\r\ncontroller.quorum.voters=1@vmhost1:9093,2@vmhost2:9093\r\nlisteners=PLAINTEXT://vmhost1:9092,CONTROLLER://vmhost1:9093\r\nadvertised.listeners=PLAINTEXT://vmhost1:9092\r\n```\r\n\r\nvmhost2 : server.properties\r\n```\r\nprocess.roles=broker,controller\r\nnode.id=2\r\ncontroller.quorum.voters=1@vmhost1:9093,2@vmhost2:9093\r\nlisteners=PLAINTEXT://vmhost2:9092,CONTROLLER://vmhost2:9093\r\nadvertised.listeners=PLAINTEXT://vmhost2:9092\r\n```\r\n\r\n```\r\nls -la /proc/self/io\r\n-r--------. 1 kafka kafkagrp 0 Nov 10 01:18 /proc/self/io\r\n```\r\n\r\nUpon starting the Kafka server, I&#39;ve come across the following error.\r\n\r\n```\r\n[kafka@vmhost1 kafka_2.13-3.4.0]$ ./bin/kafka-server-start.sh ./config/kraft/server.properties\r\n[2023-11-10 00:56:43,631] INFO Registered kafka:type=kafka.Log4jController MBean (kafka.utils.Log4jControllerRegistration$)\r\n[2023-11-10 00:56:43,902] INFO Setting -D jdk.tls.rejectClientInitiatedRenegotiation=true to disable client-initiated TLS renegotiation (org.apache.zookeeper.common.X509Util)\r\n[2023-11-10 00:56:44,041] WARN Unable to update IO metrics (kafka.server.BrokerServer)\r\njava.nio.file.AccessDeniedException: /proc/self/io\r\n        at java.base/sun.nio.fs.UnixException.translateToIOException(UnixException.java:90)\r\n        at java.base/sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:106)\r\n        at java.base/sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:111)\r\n        at java.base/sun.nio.fs.UnixFileSystemProvider.newByteChannel(UnixFileSystemProvider.java:218)\r\n        at java.base/java.nio.file.Files.newByteChannel(Files.java:380)\r\n        at java.base/java.nio.file.Files.newByteChannel(Files.java:432)\r\n        at java.base/java.nio.file.spi.FileSystemProvider.newInputStream(FileSystemProvider.java:422)\r\n        at java.base/java.nio.file.Files.newInputStream(Files.java:160)\r\n        at java.base/java.nio.file.Files.newBufferedReader(Files.java:2922)\r\n        at java.base/java.nio.file.Files.readAllLines(Files.java:3412)\r\n        at java.base/java.nio.file.Files.readAllLines(Files.java:3453)\r\n        at kafka.metrics.LinuxIoMetricsCollector.updateValues(LinuxIoMetricsCollector.scala:71)\r\n        at kafka.metrics.LinuxIoMetricsCollector.usable(LinuxIoMetricsCollector.scala:91)\r\n        at kafka.server.KafkaBroker.$init$(KafkaBroker.scala:106)\r\n        at kafka.server.BrokerServer.&lt;init&gt;(BrokerServer.scala:74)\r\n        at kafka.server.KafkaRaftServer.&lt;init&gt;(KafkaRaftServer.scala:80)\r\n        at kafka.Kafka$.buildServer(Kafka.scala:85)\r\n        at kafka.Kafka$.main(Kafka.scala:93)\r\n        at kafka.Kafka.main(Kafka.scala)\r\n[2023-11-10 00:56:44,050] INFO Registered signal handlers for TERM, INT, HUP (org.apache.kafka.common.utils.LoggingSignalHandler)\r\n[2023-11-10 00:56:44,053] INFO Starting controller (kafka.server.ControllerServer)\r\n[2023-11-10 00:56:44,064] WARN Unable to update IO metrics (kafka.server.ControllerServer)\r\njava.nio.file.AccessDeniedException: /proc/self/io\r\n        at java.base/sun.nio.fs.UnixException.translateToIOException(UnixException.java:90)\r\n        at java.base/sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:106)\r\n        at java.base/sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:111)\r\n        at java.base/sun.nio.fs.UnixFileSystemProvider.newByteChannel(UnixFileSystemProvider.java:218)\r\n        at java.base/java.nio.file.Files.newByteChannel(Files.java:380)\r\n        at java.base/java.nio.file.Files.newByteChannel(Files.java:432)\r\n        at java.base/java.nio.file.spi.FileSystemProvider.newInputStream(FileSystemProvider.java:422)\r\n        at java.base/java.nio.file.Files.newInputStream(Files.java:160)\r\n        at java.base/java.nio.file.Files.newBufferedReader(Files.java:2922)\r\n        at java.base/java.nio.file.Files.readAllLines(Files.java:3412)\r\n        at java.base/java.nio.file.Files.readAllLines(Files.java:3453)\r\n        at kafka.metrics.LinuxIoMetricsCollector.updateValues(LinuxIoMetricsCollector.scala:71)\r\n        at kafka.metrics.LinuxIoMetricsCollector.usable(LinuxIoMetricsCollector.scala:91)\r\n        at kafka.server.ControllerServer.startup(ControllerServer.scala:142)\r\n        at kafka.server.KafkaRaftServer.$anonfun$startup$1(KafkaRaftServer.scala:98)\r\n        at kafka.server.KafkaRaftServer.$anonfun$startup$1$adapted(KafkaRaftServer.scala:98)\r\n        at scala.Option.foreach(Option.scala:437)\r\n        at kafka.server.KafkaRaftServer.startup(KafkaRaftServer.scala:98)\r\n        at kafka.Kafka$.main(Kafka.scala:115)\r\n        at kafka.Kafka.main(Kafka.scala)\r\n```\r\n\r\nI have tried changing permissions but it&#39;s not permitted even with sudo\r\n```\r\nchmod 640 /proc/self/io\r\nchmod: changing permissions of ‘/proc/self/io’: Operation not permitted\r\n```\r\n\r\nKindly help me with solution or some suggestions.","title":"Kafka cluster startup warning | Unable to update IO metrics | AccessDeniedException: /proc/self/io","body":"<p>I have a setup consisting of a 2-node Kafka KRaft Cluster on an OEL8 server, with following details :</p>\n<p>Kafka Version : kafka_2.13-3.4.0\nJava Version : OpenJDK 17</p>\n<p>vmhost1 : server.properties</p>\n<pre><code>process.roles=broker,controller\nnode.id=1\ncontroller.quorum.voters=1@vmhost1:9093,2@vmhost2:9093\nlisteners=PLAINTEXT://vmhost1:9092,CONTROLLER://vmhost1:9093\nadvertised.listeners=PLAINTEXT://vmhost1:9092\n</code></pre>\n<p>vmhost2 : server.properties</p>\n<pre><code>process.roles=broker,controller\nnode.id=2\ncontroller.quorum.voters=1@vmhost1:9093,2@vmhost2:9093\nlisteners=PLAINTEXT://vmhost2:9092,CONTROLLER://vmhost2:9093\nadvertised.listeners=PLAINTEXT://vmhost2:9092\n</code></pre>\n<pre><code>ls -la /proc/self/io\n-r--------. 1 kafka kafkagrp 0 Nov 10 01:18 /proc/self/io\n</code></pre>\n<p>Upon starting the Kafka server, I've come across the following error.</p>\n<pre><code>[kafka@vmhost1 kafka_2.13-3.4.0]$ ./bin/kafka-server-start.sh ./config/kraft/server.properties\n[2023-11-10 00:56:43,631] INFO Registered kafka:type=kafka.Log4jController MBean (kafka.utils.Log4jControllerRegistration$)\n[2023-11-10 00:56:43,902] INFO Setting -D jdk.tls.rejectClientInitiatedRenegotiation=true to disable client-initiated TLS renegotiation (org.apache.zookeeper.common.X509Util)\n[2023-11-10 00:56:44,041] WARN Unable to update IO metrics (kafka.server.BrokerServer)\njava.nio.file.AccessDeniedException: /proc/self/io\n        at java.base/sun.nio.fs.UnixException.translateToIOException(UnixException.java:90)\n        at java.base/sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:106)\n        at java.base/sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:111)\n        at java.base/sun.nio.fs.UnixFileSystemProvider.newByteChannel(UnixFileSystemProvider.java:218)\n        at java.base/java.nio.file.Files.newByteChannel(Files.java:380)\n        at java.base/java.nio.file.Files.newByteChannel(Files.java:432)\n        at java.base/java.nio.file.spi.FileSystemProvider.newInputStream(FileSystemProvider.java:422)\n        at java.base/java.nio.file.Files.newInputStream(Files.java:160)\n        at java.base/java.nio.file.Files.newBufferedReader(Files.java:2922)\n        at java.base/java.nio.file.Files.readAllLines(Files.java:3412)\n        at java.base/java.nio.file.Files.readAllLines(Files.java:3453)\n        at kafka.metrics.LinuxIoMetricsCollector.updateValues(LinuxIoMetricsCollector.scala:71)\n        at kafka.metrics.LinuxIoMetricsCollector.usable(LinuxIoMetricsCollector.scala:91)\n        at kafka.server.KafkaBroker.$init$(KafkaBroker.scala:106)\n        at kafka.server.BrokerServer.&lt;init&gt;(BrokerServer.scala:74)\n        at kafka.server.KafkaRaftServer.&lt;init&gt;(KafkaRaftServer.scala:80)\n        at kafka.Kafka$.buildServer(Kafka.scala:85)\n        at kafka.Kafka$.main(Kafka.scala:93)\n        at kafka.Kafka.main(Kafka.scala)\n[2023-11-10 00:56:44,050] INFO Registered signal handlers for TERM, INT, HUP (org.apache.kafka.common.utils.LoggingSignalHandler)\n[2023-11-10 00:56:44,053] INFO Starting controller (kafka.server.ControllerServer)\n[2023-11-10 00:56:44,064] WARN Unable to update IO metrics (kafka.server.ControllerServer)\njava.nio.file.AccessDeniedException: /proc/self/io\n        at java.base/sun.nio.fs.UnixException.translateToIOException(UnixException.java:90)\n        at java.base/sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:106)\n        at java.base/sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:111)\n        at java.base/sun.nio.fs.UnixFileSystemProvider.newByteChannel(UnixFileSystemProvider.java:218)\n        at java.base/java.nio.file.Files.newByteChannel(Files.java:380)\n        at java.base/java.nio.file.Files.newByteChannel(Files.java:432)\n        at java.base/java.nio.file.spi.FileSystemProvider.newInputStream(FileSystemProvider.java:422)\n        at java.base/java.nio.file.Files.newInputStream(Files.java:160)\n        at java.base/java.nio.file.Files.newBufferedReader(Files.java:2922)\n        at java.base/java.nio.file.Files.readAllLines(Files.java:3412)\n        at java.base/java.nio.file.Files.readAllLines(Files.java:3453)\n        at kafka.metrics.LinuxIoMetricsCollector.updateValues(LinuxIoMetricsCollector.scala:71)\n        at kafka.metrics.LinuxIoMetricsCollector.usable(LinuxIoMetricsCollector.scala:91)\n        at kafka.server.ControllerServer.startup(ControllerServer.scala:142)\n        at kafka.server.KafkaRaftServer.$anonfun$startup$1(KafkaRaftServer.scala:98)\n        at kafka.server.KafkaRaftServer.$anonfun$startup$1$adapted(KafkaRaftServer.scala:98)\n        at scala.Option.foreach(Option.scala:437)\n        at kafka.server.KafkaRaftServer.startup(KafkaRaftServer.scala:98)\n        at kafka.Kafka$.main(Kafka.scala:115)\n        at kafka.Kafka.main(Kafka.scala)\n</code></pre>\n<p>I have tried changing permissions but it's not permitted even with sudo</p>\n<pre><code>chmod 640 /proc/self/io\nchmod: changing permissions of ‘/proc/self/io’: Operation not permitted\n</code></pre>\n<p>Kindly help me with solution or some suggestions.</p>\n"},{"tags":["java","docx4j","pdf-conversion","trailing-whitespace","docx-to-pdf-conversion"],"comments":[{"owner":{"account_id":5907283,"reputation":1464,"user_id":4648586,"accept_rate":60,"display_name":"Bagus Tesa"},"score":0,"creation_date":1700040711,"post_id":77486537,"comment_id":136604978,"body_markdown":"Does this answer your question? [docx4j - Why is the text truncated of spaces?](https://stackoverflow.com/questions/27400878/docx4j-why-is-the-text-truncated-of-spaces)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/27400878/docx4j-why-is-the-text-truncated-of-spaces\">docx4j - Why is the text truncated of spaces?</a>"},{"owner":{"account_id":9659484,"reputation":1,"user_id":7168044,"display_name":"Guglio"},"score":0,"creation_date":1700040817,"post_id":77486537,"comment_id":136604996,"body_markdown":"No, i&#39;m already doing t.setSpace(&quot;preserve&quot;); but still no right result. In this post that you have linked the problem is when creating text part, in my case i have to update my text part and not create new ones.","body":"No, i&#39;m already doing t.setSpace(&quot;preserve&quot;); but still no right result. In this post that you have linked the problem is when creating text part, in my case i have to update my text part and not create new ones."},{"owner":{"account_id":5907283,"reputation":1464,"user_id":4648586,"accept_rate":60,"display_name":"Bagus Tesa"},"score":0,"creation_date":1700041091,"post_id":77486537,"comment_id":136605046,"body_markdown":"thing is, the software producing the xml might be doing weird thing by [forgetting preserve flag](https://stackoverflow.com/a/70292576). that or the particular docx4j had a bug, [happened before](https://stackoverflow.com/questions/58802818/docx4j-pdf-export-adds-leading-spaces). maybe you should inspect the docx file, both the original and the one you added `t.setSpace(..`.","body":"thing is, the software producing the xml might be doing weird thing by <a href=\"https://stackoverflow.com/a/70292576\">forgetting preserve flag</a>. that or the particular docx4j had a bug, <a href=\"https://stackoverflow.com/questions/58802818/docx4j-pdf-export-adds-leading-spaces\">happened before</a>. maybe you should inspect the docx file, both the original and the one you added <code>t.setSpace(..</code>."},{"owner":{"account_id":9659484,"reputation":1,"user_id":7168044,"display_name":"Guglio"},"score":0,"creation_date":1700042786,"post_id":77486537,"comment_id":136605349,"body_markdown":"i have inspected the docx file that i give in input and right before the spaces there is\n&lt;w:t xml:space=&quot;preserve&quot;&gt; so the problem is in my code or it is a problem with docx4j.","body":"i have inspected the docx file that i give in input and right before the spaces there is &lt;w:t xml:space=&quot;preserve&quot;&gt; so the problem is in my code or it is a problem with docx4j."}],"owner":{"account_id":9659484,"reputation":1,"user_id":7168044,"display_name":"Guglio"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1700040558,"creation_date":1700040558,"question_id":77486537,"body_markdown":"i have a problem with docx4j. The output pdf is cutted and all spaces or tabs are now replaced with only one. For example if in the docx there is a string like\r\n&quot;  a            a                  a&quot;\r\nthe output will be &quot;a a a&quot;. Same with tabs. My code and my pom below. What am i doing wrong? Thank you.\r\n\r\n\r\n```\r\n           InputStream isNodo = new ByteArrayInputStream(contentNodoTempl);\r\n\r\n            WordprocessingMLPackage wordMLPackage = WordprocessingMLPackage.load(isNodo);\r\n            VariablePrepare.prepare(wordMLPackage);\r\n\r\n            // output file\r\n            ByteArrayOutputStream bos = new ByteArrayOutputStream();\r\n            Docx4J.toPDF(wordMLPackage, bos);\r\n            bos.flush();\r\n            isNodo.close();\r\n            return bos.toByteArray();\r\n```\r\n\r\n\r\nWith my pom looking like\r\n```\r\n      &lt;dependency&gt;\r\n         &lt;groupId&gt;org.docx4j&lt;/groupId&gt;\r\n         &lt;artifactId&gt;docx4j-JAXB-ReferenceImpl&lt;/artifactId&gt;\r\n         &lt;version&gt;8.3.9&lt;/version&gt;\r\n      &lt;/dependency&gt;\r\n      &lt;dependency&gt;\r\n         &lt;groupId&gt;org.docx4j&lt;/groupId&gt;\r\n         &lt;artifactId&gt;docx4j-export-fo&lt;/artifactId&gt;\r\n         &lt;version&gt;8.3.9&lt;/version&gt;\r\n      &lt;/dependency&gt;\r\n```\r\n\r\n\r\n\r\ni have tried with t.setSpace(&quot;preserve&quot;) (code below) but the spaces are still cutted.\r\n\r\n```\r\n    public static void findAndReplace(WordprocessingMLPackage doc){\r\n        List&lt;Object&gt; paragraphs = getAllElementFromObject(doc.getMainDocumentPart(), P.class);\r\n        for(Object par : paragraphs){\r\n            P p = (P) par;\r\n            List&lt;Object&gt; texts = getAllElementFromObject(p, Text.class);\r\n            for(Object text : texts){\r\n                Text t = (Text)text;\r\n                t.setSpace(&quot;preserve&quot;);\r\n            }\r\n        }\r\n    }\r\n\r\n    public static List&lt;Object&gt; getAllElementFromObject(Object obj, Class&lt;?&gt; toSearch) {\r\n        List&lt;Object&gt; result = new ArrayList&lt;Object&gt;();\r\n        if (obj instanceof JAXBElement) obj = ((JAXBElement&lt;?&gt;) obj).getValue();\r\n\r\n        if (obj.getClass().equals(toSearch))\r\n            result.add(obj);\r\n        else if (obj instanceof ContentAccessor) {\r\n            List&lt;?&gt; children = ((ContentAccessor) obj).getContent();\r\n            for (Object child : children) {\r\n                result.addAll(getAllElementFromObject(child, toSearch));\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n```","title":"Docx4j docx toPdf don&#39;t preserve whitespaces","body":"<p>i have a problem with docx4j. The output pdf is cutted and all spaces or tabs are now replaced with only one. For example if in the docx there is a string like\n&quot;  a            a                  a&quot;\nthe output will be &quot;a a a&quot;. Same with tabs. My code and my pom below. What am i doing wrong? Thank you.</p>\n<pre><code>           InputStream isNodo = new ByteArrayInputStream(contentNodoTempl);\n\n            WordprocessingMLPackage wordMLPackage = WordprocessingMLPackage.load(isNodo);\n            VariablePrepare.prepare(wordMLPackage);\n\n            // output file\n            ByteArrayOutputStream bos = new ByteArrayOutputStream();\n            Docx4J.toPDF(wordMLPackage, bos);\n            bos.flush();\n            isNodo.close();\n            return bos.toByteArray();\n</code></pre>\n<p>With my pom looking like</p>\n<pre><code>      &lt;dependency&gt;\n         &lt;groupId&gt;org.docx4j&lt;/groupId&gt;\n         &lt;artifactId&gt;docx4j-JAXB-ReferenceImpl&lt;/artifactId&gt;\n         &lt;version&gt;8.3.9&lt;/version&gt;\n      &lt;/dependency&gt;\n      &lt;dependency&gt;\n         &lt;groupId&gt;org.docx4j&lt;/groupId&gt;\n         &lt;artifactId&gt;docx4j-export-fo&lt;/artifactId&gt;\n         &lt;version&gt;8.3.9&lt;/version&gt;\n      &lt;/dependency&gt;\n</code></pre>\n<p>i have tried with t.setSpace(&quot;preserve&quot;) (code below) but the spaces are still cutted.</p>\n<pre><code>    public static void findAndReplace(WordprocessingMLPackage doc){\n        List&lt;Object&gt; paragraphs = getAllElementFromObject(doc.getMainDocumentPart(), P.class);\n        for(Object par : paragraphs){\n            P p = (P) par;\n            List&lt;Object&gt; texts = getAllElementFromObject(p, Text.class);\n            for(Object text : texts){\n                Text t = (Text)text;\n                t.setSpace(&quot;preserve&quot;);\n            }\n        }\n    }\n\n    public static List&lt;Object&gt; getAllElementFromObject(Object obj, Class&lt;?&gt; toSearch) {\n        List&lt;Object&gt; result = new ArrayList&lt;Object&gt;();\n        if (obj instanceof JAXBElement) obj = ((JAXBElement&lt;?&gt;) obj).getValue();\n\n        if (obj.getClass().equals(toSearch))\n            result.add(obj);\n        else if (obj instanceof ContentAccessor) {\n            List&lt;?&gt; children = ((ContentAccessor) obj).getContent();\n            for (Object child : children) {\n                result.addAll(getAllElementFromObject(child, toSearch));\n            }\n        }\n        return result;\n    }\n</code></pre>\n"},{"tags":["java","intellij-idea","java-17"],"comments":[{"owner":{"account_id":36734,"reputation":392117,"user_id":104891,"display_name":"CrazyCoder"},"score":0,"creation_date":1699972149,"post_id":77481218,"comment_id":136595702,"body_markdown":"What is the exact Java 17 build you are using? Does it help if you install a more recent build? Does it help if you try with a more recent JDK version?","body":"What is the exact Java 17 build you are using? Does it help if you install a more recent build? Does it help if you try with a more recent JDK version?"},{"owner":{"account_id":8147390,"reputation":55,"user_id":6135644,"display_name":"Robin Silv&#233;rio"},"score":0,"creation_date":1700037353,"post_id":77481218,"comment_id":136604426,"body_markdown":"I will try that","body":"I will try that"},{"owner":{"account_id":8147390,"reputation":55,"user_id":6135644,"display_name":"Robin Silv&#233;rio"},"score":0,"creation_date":1700040394,"post_id":77481218,"comment_id":136604923,"body_markdown":"@CrazyCoder Turns out it worked!!","body":"@CrazyCoder Turns out it worked!!"}],"answers":[{"tags":[],"owner":{"account_id":8147390,"reputation":55,"user_id":6135644,"display_name":"Robin Silv&#233;rio"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1700040459,"creation_date":1700040459,"answer_id":77486519,"question_id":77481218,"body_markdown":"Turns out, updating the jdk version worked to solve the problem.","title":"Abnormal build process termination Intellij","body":"<p>Turns out, updating the jdk version worked to solve the problem.</p>\n"}],"owner":{"account_id":8147390,"reputation":55,"user_id":6135644,"display_name":"Robin Silv&#233;rio"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1700040459,"creation_date":1699970607,"question_id":77481218,"body_markdown":"I&#39;ve come across the problem that intellij won&#39;t start the java application as it give me an error of abnormal build process termination. Keep in mind that the java application is using JDK 17. Did anyone came across this problem before?\r\n\r\n\r\n\r\n**Steps to reproduce**\r\n\r\n1. Starting the intellij and picking the java project.\r\n2. Starting the application\r\n\r\n**Expected behaviour**\r\n\r\nApplication starts after compilation\r\n\r\n**Actual behaviour**\r\n\r\n*Short error:*\r\n\r\nCompiler intrinsic is defined for method [jdk.internal.misc.Unsafe.storeStoreFence()V], but the method is not annotated with @IntrinsicCandidate. Method will not be inlined.\r\nError occurred during initialization of VM\r\n\r\n*Logs*\r\n```\r\nAbnormal build process termination: \r\n&quot;C:\\Program Files\\Java\\jdk-17\\bin\\java.exe&quot; -Xmx700m -Djava.awt.headless=true &quot;-Djna.boot.library.path=C:\\Program Files\\JetBrains\\IntelliJ IDEA 2023.1.3/lib/jna/amd64&quot; -Djna.nosys=true -Djna.noclasspath=true --add-opens jdk.compiler/com.sun.tools.javac.api=ALL-UNNAMED --add-opens jdk.compiler/com.sun.tools.javac.util=ALL-UNNAMED --add-opens jdk.compiler/com.sun.tools.javac.code=ALL-UNNAMED --add-opens jdk.compiler/com.sun.tools.javac.comp=ALL-UNNAMED --add-opens jdk.compiler/com.sun.tools.javac.file=ALL-UNNAMED --add-opens jdk.compiler/com.sun.tools.javac.main=ALL-UNNAMED --add-opens jdk.compiler/com.sun.tools.javac.model=ALL-UNNAMED --add-opens jdk.compiler/com.sun.tools.javac.parser=ALL-UNNAMED --add-opens jdk.compiler/com.sun.tools.javac.processing=ALL-UNNAMED --add-opens jdk.compiler/com.sun.tools.javac.tree=ALL-UNNAMED --add-opens jdk.compiler/com.sun.tools.javac.jvm=ALL-UNNAMED -Dexternal.project.config=C:\\Users\\T14832\\AppData\\Local\\JetBrains\\IntelliJIdea2023.1\\projects\\campaign-admin-backend.b1b76b30\\external_build_system -Dcompile.parallel=false -Drebuild.on.dependency.change=true -Didea.IntToIntBtree.page.size=32768 -Djdt.compiler.useSingleThread=true -Daether.connector.resumeDownloads=false -Dio.netty.initialSeedUniquifier=8663416678261986006 -Dfile.encoding=windows-1252 -Duser.language=nl -Duser.country=NL -Didea.paths.selector=IntelliJIdea2023.1 &quot;-Didea.home.path=C:/Program Files/JetBrains/IntelliJ IDEA 2023.1.3&quot; -Didea.config.path=C:/Users/T14832/AppData/Roaming/JetBrains/IntelliJIdea2023.1 -Didea.plugins.path=C:/Users/T14832/AppData/Roaming/JetBrains/IntelliJIdea2023.1/plugins -Djps.log.dir=C:/Users/T14832/AppData/Local/JetBrains/IntelliJIdea2023.1/log/build-log &quot;-Djps.fallback.jdk.home=C:/Program Files/JetBrains/IntelliJ IDEA 2023.1.3/jbr&quot; -Djps.fallback.jdk.version=17.0.7 -Dio.netty.noUnsafe=true -Djava.io.tmpdir=C:/Users/T14832/AppData/Local/JetBrains/IntelliJIdea2023.1/compile-server/campaign-admin-backend_c3241ff3/_temp_ -Djps.backward.ref.index.builder=true -Dtmh.instrument.annotations=true -Dtmh.generate.line.numbers=true &quot;-Djps.kotlin.home=C:\\Program Files\\JetBrains\\IntelliJ IDEA 2023.1.3\\plugins\\Kotlin\\kotlinc&quot; -Dkotlin.incremental.compilation=true -Dkotlin.incremental.compilation.js=true -Dkotlin.daemon.enabled -Dkotlin.daemon.client.alive.path=\\&quot;C:\\Users\\T14832\\AppData\\Local\\Temp\\kotlin-idea-12702813341039359777-is-running\\&quot; -Dide.propagate.context=false -classpath &quot;C:/Program Files/JetBrains/IntelliJ IDEA 2023.1.3/plugins/java/lib/jps-launcher.jar&quot; org.jetbrains.jps.cmdline.Launcher &quot;C:/Program Files/JetBrains/IntelliJ IDEA 2023.1.3/plugins/java/lib/jps-builders.jar;C:/Program Files/JetBrains/IntelliJ IDEA 2023.1.3/plugins/java/lib/jps-builders-6.jar;C:/Program Files/JetBrains/IntelliJ IDEA 2023.1.3/plugins/java/lib/jps-javac-extension.jar;C:/Program Files/JetBrains/IntelliJ IDEA 2023.1.3/lib/util.jar;C:/Program Files/JetBrains/IntelliJ IDEA 2023.1.3/lib/util-8.jar;C:/Program Files/JetBrains/IntelliJ IDEA 2023.1.3/lib/util_rt.jar;C:/Program Files/JetBrains/IntelliJ IDEA 2023.1.3/lib/annotations.jar;C:/Program Files/JetBrains/IntelliJ IDEA 2023.1.3/lib/3rd-party-rt.jar;C:/Program Files/JetBrains/IntelliJ IDEA 2023.1.3/lib/protobuf.jar;C:/Program Files/JetBrains/IntelliJ IDEA 2023.1.3/lib/jps-model.jar;C:/Program Files/JetBrains/IntelliJ IDEA 2023.1.3/plugins/java/lib/javac2.jar;C:/Program Files/JetBrains/IntelliJ IDEA 2023.1.3/lib/forms_rt.jar;C:/Program Files/JetBrains/IntelliJ IDEA 2023.1.3/plugins/java/lib/aether-dependency-resolver.jar;C:/Program Files/JetBrains/IntelliJ IDEA 2023.1.3/lib/idea_rt.jar;C:/Program Files/JetBrains/IntelliJ IDEA 2023.1.3/plugins/JavaEE/lib/jasper-v2-rt.jar;C:/Program Files/JetBrains/IntelliJ IDEA 2023.1.3/plugins/Kotlin/lib/jps/kotlin-jps-plugin.jar;C:/Program Files/JetBrains/IntelliJ IDEA 2023.1.3/lib/util.jar;C:/Program Files/JetBrains/IntelliJ IDEA 2023.1.3/plugins/eclipse/lib/eclipse-jps.jar;C:/Program Files/JetBrains/IntelliJ IDEA 2023.1.3/plugins/eclipse/lib/eclipse-common.jar;C:/Program Files/JetBrains/IntelliJ IDEA 2023.1.3/plugins/ant/lib/ant-jps.jar;C:/Program Files/JetBrains/IntelliJ IDEA 2023.1.3/plugins/JavaEE/lib/javaee-jps.jar;C:/Program Files/JetBrains/IntelliJ IDEA 2023.1.3/plugins/uiDesigner/lib/jps/java-guiForms-jps.jar;C:/Program Files/JetBrains/IntelliJ IDEA 2023.1.3/plugins/space/lib/space-java-jps.jar;C:/Program Files/JetBrains/IntelliJ IDEA 2023.1.3/plugins/devkit/lib/devkit-jps.jar;C:/Program Files/JetBrains/IntelliJ IDEA 2023.1.3/plugins/platform-langInjection/lib/java-langInjection-jps.jar;C:/Program Files/JetBrains/IntelliJ IDEA 2023.1.3/plugins/javaFX/lib/javaFX-jps.jar;C:/Program Files/JetBrains/IntelliJ IDEA 2023.1.3/plugins/javaFX/lib/javaFX-common.jar;C:/Program Files/JetBrains/IntelliJ IDEA 2023.1.3/plugins/Groovy/lib/groovy-jps.jar;C:/Program Files/JetBrains/IntelliJ IDEA 2023.1.3/plugins/Groovy/lib/groovy-constants-rt.jar;C:/Program Files/JetBrains/IntelliJ IDEA 2023.1.3/plugins/maven/lib/maven-jps.jar;C:/Program Files/JetBrains/IntelliJ IDEA 2023.1.3/plugins/gradle-java/lib/gradle-jps.jar;C:/Program Files/JetBrains/IntelliJ IDEA 2023.1.3/plugins/JPA/lib/jps/javaee-jpa-jps.jar&quot; org.jetbrains.jps.cmdline.BuildMain 127.0.0.1 61846 cd083bf2-f7fe-4805-bc19-f1d0e7163e17 C:/Users/T14832/AppData/Local/JetBrains/IntelliJIdea2023.1/compile-server\r\nCompiler intrinsic is defined for method [jdk.internal.misc.Unsafe.storeStoreFence()V], but the method is not annotated with @IntrinsicCandidate. Method will not be inlined.\r\nError occurred during initialization of VM\r\njava.lang.ExceptionInInitializerError\r\n\tat jdk.internal.loader.BootLoader.&lt;clinit&gt;(java.base/BootLoader.java:62)\r\n\tat java.lang.ClassLoader.findNative(java.base/ClassLoader.java:2437)\r\n\tat java.lang.Thread.isAlive(java.base/Native Method)\r\n\tat java.lang.Thread.setDaemon(java.base/Thread.java:1402)\r\n\tat java.lang.ref.Reference.&lt;clinit&gt;(java.base/Reference.java:313)\r\n\tat java.security.AccessController.doPrivileged(java.base/AccessController.java:318)\r\n\tat java.lang.reflect.AccessibleObject.&lt;clinit&gt;(java.base/AccessibleObject.java:489)\r\nCaused by: java.lang.NullPointerException\r\n\tat jdk.internal.util.StaticProperty.getProperty(java.base/StaticProperty.java:71)\r\n\tat jdk.internal.util.StaticProperty.&lt;clinit&gt;(java.base/StaticProperty.java:58)\r\n\tat jdk.internal.loader.BootLoader.&lt;clinit&gt;(java.base/BootLoader.java:62)\r\n\tat java.lang.ClassLoader.findNative(java.base/ClassLoader.java:2437)\r\n\tat java.lang.Thread.isAlive(java.base/Native Method)\r\n\tat java.lang.Thread.setDaemon(java.base/Thread.java:1402)\r\n\tat java.lang.ref.Reference.&lt;clinit&gt;(java.base/Reference.java:313)\r\n\tat java.security.AccessController.doPrivileged(java.base/AccessController.java:318)\r\n\tat java.lang.reflect.AccessibleObject.&lt;clinit&gt;(java.base/AccessibleObject.java:489)\r\n\r\n```\r\n\r\n","title":"Abnormal build process termination Intellij","body":"<p>I've come across the problem that intellij won't start the java application as it give me an error of abnormal build process termination. Keep in mind that the java application is using JDK 17. Did anyone came across this problem before?</p>\n<p><strong>Steps to reproduce</strong></p>\n<ol>\n<li>Starting the intellij and picking the java project.</li>\n<li>Starting the application</li>\n</ol>\n<p><strong>Expected behaviour</strong></p>\n<p>Application starts after compilation</p>\n<p><strong>Actual behaviour</strong></p>\n<p><em>Short error:</em></p>\n<p>Compiler intrinsic is defined for method [jdk.internal.misc.Unsafe.storeStoreFence()V], but the method is not annotated with @IntrinsicCandidate. Method will not be inlined.\nError occurred during initialization of VM</p>\n<p><em>Logs</em></p>\n<pre><code>Abnormal build process termination: \n&quot;C:\\Program Files\\Java\\jdk-17\\bin\\java.exe&quot; -Xmx700m -Djava.awt.headless=true &quot;-Djna.boot.library.path=C:\\Program Files\\JetBrains\\IntelliJ IDEA 2023.1.3/lib/jna/amd64&quot; -Djna.nosys=true -Djna.noclasspath=true --add-opens jdk.compiler/com.sun.tools.javac.api=ALL-UNNAMED --add-opens jdk.compiler/com.sun.tools.javac.util=ALL-UNNAMED --add-opens jdk.compiler/com.sun.tools.javac.code=ALL-UNNAMED --add-opens jdk.compiler/com.sun.tools.javac.comp=ALL-UNNAMED --add-opens jdk.compiler/com.sun.tools.javac.file=ALL-UNNAMED --add-opens jdk.compiler/com.sun.tools.javac.main=ALL-UNNAMED --add-opens jdk.compiler/com.sun.tools.javac.model=ALL-UNNAMED --add-opens jdk.compiler/com.sun.tools.javac.parser=ALL-UNNAMED --add-opens jdk.compiler/com.sun.tools.javac.processing=ALL-UNNAMED --add-opens jdk.compiler/com.sun.tools.javac.tree=ALL-UNNAMED --add-opens jdk.compiler/com.sun.tools.javac.jvm=ALL-UNNAMED -Dexternal.project.config=C:\\Users\\T14832\\AppData\\Local\\JetBrains\\IntelliJIdea2023.1\\projects\\campaign-admin-backend.b1b76b30\\external_build_system -Dcompile.parallel=false -Drebuild.on.dependency.change=true -Didea.IntToIntBtree.page.size=32768 -Djdt.compiler.useSingleThread=true -Daether.connector.resumeDownloads=false -Dio.netty.initialSeedUniquifier=8663416678261986006 -Dfile.encoding=windows-1252 -Duser.language=nl -Duser.country=NL -Didea.paths.selector=IntelliJIdea2023.1 &quot;-Didea.home.path=C:/Program Files/JetBrains/IntelliJ IDEA 2023.1.3&quot; -Didea.config.path=C:/Users/T14832/AppData/Roaming/JetBrains/IntelliJIdea2023.1 -Didea.plugins.path=C:/Users/T14832/AppData/Roaming/JetBrains/IntelliJIdea2023.1/plugins -Djps.log.dir=C:/Users/T14832/AppData/Local/JetBrains/IntelliJIdea2023.1/log/build-log &quot;-Djps.fallback.jdk.home=C:/Program Files/JetBrains/IntelliJ IDEA 2023.1.3/jbr&quot; -Djps.fallback.jdk.version=17.0.7 -Dio.netty.noUnsafe=true -Djava.io.tmpdir=C:/Users/T14832/AppData/Local/JetBrains/IntelliJIdea2023.1/compile-server/campaign-admin-backend_c3241ff3/_temp_ -Djps.backward.ref.index.builder=true -Dtmh.instrument.annotations=true -Dtmh.generate.line.numbers=true &quot;-Djps.kotlin.home=C:\\Program Files\\JetBrains\\IntelliJ IDEA 2023.1.3\\plugins\\Kotlin\\kotlinc&quot; -Dkotlin.incremental.compilation=true -Dkotlin.incremental.compilation.js=true -Dkotlin.daemon.enabled -Dkotlin.daemon.client.alive.path=\\&quot;C:\\Users\\T14832\\AppData\\Local\\Temp\\kotlin-idea-12702813341039359777-is-running\\&quot; -Dide.propagate.context=false -classpath &quot;C:/Program Files/JetBrains/IntelliJ IDEA 2023.1.3/plugins/java/lib/jps-launcher.jar&quot; org.jetbrains.jps.cmdline.Launcher &quot;C:/Program Files/JetBrains/IntelliJ IDEA 2023.1.3/plugins/java/lib/jps-builders.jar;C:/Program Files/JetBrains/IntelliJ IDEA 2023.1.3/plugins/java/lib/jps-builders-6.jar;C:/Program Files/JetBrains/IntelliJ IDEA 2023.1.3/plugins/java/lib/jps-javac-extension.jar;C:/Program Files/JetBrains/IntelliJ IDEA 2023.1.3/lib/util.jar;C:/Program Files/JetBrains/IntelliJ IDEA 2023.1.3/lib/util-8.jar;C:/Program Files/JetBrains/IntelliJ IDEA 2023.1.3/lib/util_rt.jar;C:/Program Files/JetBrains/IntelliJ IDEA 2023.1.3/lib/annotations.jar;C:/Program Files/JetBrains/IntelliJ IDEA 2023.1.3/lib/3rd-party-rt.jar;C:/Program Files/JetBrains/IntelliJ IDEA 2023.1.3/lib/protobuf.jar;C:/Program Files/JetBrains/IntelliJ IDEA 2023.1.3/lib/jps-model.jar;C:/Program Files/JetBrains/IntelliJ IDEA 2023.1.3/plugins/java/lib/javac2.jar;C:/Program Files/JetBrains/IntelliJ IDEA 2023.1.3/lib/forms_rt.jar;C:/Program Files/JetBrains/IntelliJ IDEA 2023.1.3/plugins/java/lib/aether-dependency-resolver.jar;C:/Program Files/JetBrains/IntelliJ IDEA 2023.1.3/lib/idea_rt.jar;C:/Program Files/JetBrains/IntelliJ IDEA 2023.1.3/plugins/JavaEE/lib/jasper-v2-rt.jar;C:/Program Files/JetBrains/IntelliJ IDEA 2023.1.3/plugins/Kotlin/lib/jps/kotlin-jps-plugin.jar;C:/Program Files/JetBrains/IntelliJ IDEA 2023.1.3/lib/util.jar;C:/Program Files/JetBrains/IntelliJ IDEA 2023.1.3/plugins/eclipse/lib/eclipse-jps.jar;C:/Program Files/JetBrains/IntelliJ IDEA 2023.1.3/plugins/eclipse/lib/eclipse-common.jar;C:/Program Files/JetBrains/IntelliJ IDEA 2023.1.3/plugins/ant/lib/ant-jps.jar;C:/Program Files/JetBrains/IntelliJ IDEA 2023.1.3/plugins/JavaEE/lib/javaee-jps.jar;C:/Program Files/JetBrains/IntelliJ IDEA 2023.1.3/plugins/uiDesigner/lib/jps/java-guiForms-jps.jar;C:/Program Files/JetBrains/IntelliJ IDEA 2023.1.3/plugins/space/lib/space-java-jps.jar;C:/Program Files/JetBrains/IntelliJ IDEA 2023.1.3/plugins/devkit/lib/devkit-jps.jar;C:/Program Files/JetBrains/IntelliJ IDEA 2023.1.3/plugins/platform-langInjection/lib/java-langInjection-jps.jar;C:/Program Files/JetBrains/IntelliJ IDEA 2023.1.3/plugins/javaFX/lib/javaFX-jps.jar;C:/Program Files/JetBrains/IntelliJ IDEA 2023.1.3/plugins/javaFX/lib/javaFX-common.jar;C:/Program Files/JetBrains/IntelliJ IDEA 2023.1.3/plugins/Groovy/lib/groovy-jps.jar;C:/Program Files/JetBrains/IntelliJ IDEA 2023.1.3/plugins/Groovy/lib/groovy-constants-rt.jar;C:/Program Files/JetBrains/IntelliJ IDEA 2023.1.3/plugins/maven/lib/maven-jps.jar;C:/Program Files/JetBrains/IntelliJ IDEA 2023.1.3/plugins/gradle-java/lib/gradle-jps.jar;C:/Program Files/JetBrains/IntelliJ IDEA 2023.1.3/plugins/JPA/lib/jps/javaee-jpa-jps.jar&quot; org.jetbrains.jps.cmdline.BuildMain 127.0.0.1 61846 cd083bf2-f7fe-4805-bc19-f1d0e7163e17 C:/Users/T14832/AppData/Local/JetBrains/IntelliJIdea2023.1/compile-server\nCompiler intrinsic is defined for method [jdk.internal.misc.Unsafe.storeStoreFence()V], but the method is not annotated with @IntrinsicCandidate. Method will not be inlined.\nError occurred during initialization of VM\njava.lang.ExceptionInInitializerError\n    at jdk.internal.loader.BootLoader.&lt;clinit&gt;(java.base/BootLoader.java:62)\n    at java.lang.ClassLoader.findNative(java.base/ClassLoader.java:2437)\n    at java.lang.Thread.isAlive(java.base/Native Method)\n    at java.lang.Thread.setDaemon(java.base/Thread.java:1402)\n    at java.lang.ref.Reference.&lt;clinit&gt;(java.base/Reference.java:313)\n    at java.security.AccessController.doPrivileged(java.base/AccessController.java:318)\n    at java.lang.reflect.AccessibleObject.&lt;clinit&gt;(java.base/AccessibleObject.java:489)\nCaused by: java.lang.NullPointerException\n    at jdk.internal.util.StaticProperty.getProperty(java.base/StaticProperty.java:71)\n    at jdk.internal.util.StaticProperty.&lt;clinit&gt;(java.base/StaticProperty.java:58)\n    at jdk.internal.loader.BootLoader.&lt;clinit&gt;(java.base/BootLoader.java:62)\n    at java.lang.ClassLoader.findNative(java.base/ClassLoader.java:2437)\n    at java.lang.Thread.isAlive(java.base/Native Method)\n    at java.lang.Thread.setDaemon(java.base/Thread.java:1402)\n    at java.lang.ref.Reference.&lt;clinit&gt;(java.base/Reference.java:313)\n    at java.security.AccessController.doPrivileged(java.base/AccessController.java:318)\n    at java.lang.reflect.AccessibleObject.&lt;clinit&gt;(java.base/AccessibleObject.java:489)\n\n</code></pre>\n"},{"tags":["java","maven","timefold"],"comments":[{"owner":{"account_id":9133364,"reputation":4450,"user_id":6794063,"display_name":"Luk&#225;š Petrovick&#253;"},"score":0,"creation_date":1700039568,"post_id":77486240,"comment_id":136604812,"body_markdown":"You probably forgot to push your changes to the repo. I still see the original structure there.","body":"You probably forgot to push your changes to the repo. I still see the original structure there."},{"owner":{"account_id":29820306,"reputation":1,"user_id":22853703,"display_name":"EdoZp12"},"score":0,"creation_date":1700055847,"post_id":77486240,"comment_id":136607671,"body_markdown":"You will probably see a version of school  timetabling which is modify for my purpose, Lesson is equal to Orders, Room is equal to Machines,  Teacher is equal to Worker and Group Subject to Product Materilal (we are talking about single material productions), when i finished the constraints i will refactor the names","body":"You will probably see a version of school  timetabling which is modify for my purpose, Lesson is equal to Orders, Room is equal to Machines,  Teacher is equal to Worker and Group Subject to Product Materilal (we are talking about single material productions), when i finished the constraints i will refactor the names"},{"owner":{"account_id":216698,"reputation":26495,"user_id":472109,"accept_rate":85,"display_name":"Geoffrey De Smet"},"score":0,"creation_date":1700059134,"post_id":77486240,"comment_id":136608391,"body_markdown":"Have you seen the food packaging quickstart? That&#39;s arguably closer than school timetabling.","body":"Have you seen the food packaging quickstart? That&#39;s arguably closer than school timetabling."}],"answers":[{"tags":[],"owner":{"account_id":9133364,"reputation":4450,"user_id":6794063,"display_name":"Luk&#225;š Petrovick&#253;"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700039857,"creation_date":1700039857,"answer_id":77486456,"question_id":77486240,"body_markdown":"Generally, if a solver gives you a solution in which there is a situation you don&#39;t like, you need to identify the situation and write a constraint to penalize that situation. In this case, you need to write a hard constraint to penalize every time the solver puts two jobs in the same slot. Something conceptually like this:\r\n\r\n    forEach(Order.class)\r\n        .join(Order.class, Joiners.equal(Order::getSlot))\r\n        .filter((order1, order2) -&gt; order1 != order2)\r\n        .penalize(...Score.ONE_HARD)\r\n        .asConstraint(&quot;Two orders in the same slot.&quot;);\r\n\r\n(Side note: I would be very cautious in applying the School Timetabling model to job shop scheduling. You will probably run into difficulties and will need to change the model, especially as you start trying to add dependencies between jobs. Unfortunately, we do not yet have a job shop scheduling quickstart for you to use.)\r\n\r\n\r\nAs to your JSON question, this is not directly related to Timefold Solver. You are effectively asking how to deserialize a Java object from JSON, and how to supply that JSON remotely; based on whether you&#39;re using Quarkus or Spring Boot, the answer will differ. But neither of the answers will be specific to Timefold Solver; I suggest you either Google for the answer, or ask another question here on StackOverflow.","title":"TimeFold.ai working on re-coding from timefold.ai schoolt timetabling to job shop scheduling for industrial production","body":"<p>Generally, if a solver gives you a solution in which there is a situation you don't like, you need to identify the situation and write a constraint to penalize that situation. In this case, you need to write a hard constraint to penalize every time the solver puts two jobs in the same slot. Something conceptually like this:</p>\n<pre><code>forEach(Order.class)\n    .join(Order.class, Joiners.equal(Order::getSlot))\n    .filter((order1, order2) -&gt; order1 != order2)\n    .penalize(...Score.ONE_HARD)\n    .asConstraint(&quot;Two orders in the same slot.&quot;);\n</code></pre>\n<p>(Side note: I would be very cautious in applying the School Timetabling model to job shop scheduling. You will probably run into difficulties and will need to change the model, especially as you start trying to add dependencies between jobs. Unfortunately, we do not yet have a job shop scheduling quickstart for you to use.)</p>\n<p>As to your JSON question, this is not directly related to Timefold Solver. You are effectively asking how to deserialize a Java object from JSON, and how to supply that JSON remotely; based on whether you're using Quarkus or Spring Boot, the answer will differ. But neither of the answers will be specific to Timefold Solver; I suggest you either Google for the answer, or ask another question here on StackOverflow.</p>\n"}],"owner":{"account_id":29820306,"reputation":1,"user_id":22853703,"display_name":"EdoZp12"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1700039857,"creation_date":1700037660,"question_id":77486240,"body_markdown":"Goodmorning everyone, i&#39;m working on recoding of timefold.ai school time tabling to create a job shop scheduling for industrial production, i &quot;trasformed&quot; Lesson class into Orders, Teacher into working operators, and group subject into product material using the same constraintProvider class and changing timeslot from 1 hour timeslot into 15 minutes timeslot, like that when i insert a new order into the DemoResource class I divide for example 3 hours production into 15 minutes slot so like that I suppose the programe should organize the orders on that characteristics.\r\nWhen I run the program it work on 6 machine simultaneously but place in a 15 minutes slot more than one order slot.\r\nHow should I fix this problem?\r\nanother question... if i would like to pass a JSON file with my orders data to my timefold instead of using the DemoResource class, How could i do that?\r\n\r\nThis is my work so far:\r\nhttps://github.com/EdoZp1/TimeFold-IndustrialProduction-EdoardoZoppi","title":"TimeFold.ai working on re-coding from timefold.ai schoolt timetabling to job shop scheduling for industrial production","body":"<p>Goodmorning everyone, i'm working on recoding of timefold.ai school time tabling to create a job shop scheduling for industrial production, i &quot;trasformed&quot; Lesson class into Orders, Teacher into working operators, and group subject into product material using the same constraintProvider class and changing timeslot from 1 hour timeslot into 15 minutes timeslot, like that when i insert a new order into the DemoResource class I divide for example 3 hours production into 15 minutes slot so like that I suppose the programe should organize the orders on that characteristics.\nWhen I run the program it work on 6 machine simultaneously but place in a 15 minutes slot more than one order slot.\nHow should I fix this problem?\nanother question... if i would like to pass a JSON file with my orders data to my timefold instead of using the DemoResource class, How could i do that?</p>\n<p>This is my work so far:\n<a href=\"https://github.com/EdoZp1/TimeFold-IndustrialProduction-EdoardoZoppi\" rel=\"nofollow noreferrer\">https://github.com/EdoZp1/TimeFold-IndustrialProduction-EdoardoZoppi</a></p>\n"},{"tags":["java","jmeter"],"answers":[{"tags":[],"owner":{"account_id":3460456,"reputation":162713,"user_id":2897748,"display_name":"Dmitri T"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1700039581,"creation_date":1700039581,"answer_id":77486431,"question_id":77486326,"body_markdown":"You&#39;re missing some obvious mandatory elements like [Loop Controller][1] which is an integral part of the Thread Group , and properties provided via [TestElement][2]. \r\n\r\n\r\nIf this is **really** what you&#39;re looking for you can use the following code:\r\n\r\n\timport org.apache.jmeter.threads.ThreadGroup;\r\n\timport org.apache.jmeter.threads.gui.ThreadGroupGui;\r\n\timport org.apache.jmeter.gui.GuiPackage\r\n\timport org.apache.jmeter.gui.tree.JMeterTreeNode\r\n\timport org.apache.jmeter.exceptions.IllegalUserActionException\r\n\timport org.apache.jmeter.control.LoopController;\r\n\timport org.apache.jmeter.control.gui.LoopControlPanel;\r\n\timport org.apache.jmeter.testelement.TestElement;\r\n\t\r\n\tGuiPackage guiPackage = GuiPackage.getInstance();\r\n\tJMeterTreeNode testPlanNode = (JMeterTreeNode) guiPackage.getTreeModel().getRoot();\r\n\t\r\n\t\r\n\tLoopController loopController = new LoopController();\r\n\tloopController.setLoops(1);\r\n\tloopController.setFirst(true);\r\n\tloopController.setProperty(TestElement.TEST_CLASS, LoopController.class.getName());\r\n\tloopController.setProperty(TestElement.GUI_CLASS, LoopControlPanel.class.getName());\r\n\tloopController.initialize();\r\n\t\r\n\t\r\n\tThreadGroup threadGroup = new ThreadGroup();\r\n\tthreadGroup.setName(&quot;Example Thread Group&quot;);\r\n\tthreadGroup.setNumThreads(1);\r\n\tthreadGroup.setRampUp(1);\r\n\tthreadGroup.setSamplerController(loopController);\r\n\tthreadGroup.setProperty(TestElement.TEST_CLASS, ThreadGroup.class.getName());\r\n\tthreadGroup.setProperty(TestElement.GUI_CLASS, ThreadGroupGui.class.getName());\r\n\t\r\n\t\r\n\t\r\n\tJMeterTreeNode threadGroupNode;\r\n\ttry {\r\n\t   threadGroupNode = guiPackage.getTreeModel().addComponent(threadGroup, testPlanNode);\r\n\t} catch (IllegalUserActionException e) {\r\n\t   e.printStackTrace();\r\n\t}\r\n\t\r\n\t// Refresh the JMeter GUI\r\n\tguiPackage.getMainFrame().repaint();\r\n\r\n\r\nDemo:\r\n\r\n[![enter image description here][3]][3]\r\n\r\n\r\nMore information:\r\n\r\n - [JMeter Command Line Overview: 5 Ways To Launch a Test][4]\r\n - [jmeter-from-code][5]\r\n\r\n\r\nHowever it&#39;s better to take a look at [Building a Test Plan Programmatically][6] user manual chapter\r\n\r\n\r\n  [1]: https://jmeter.apache.org/usermanual/component_reference.html#Loop_Controller\r\n  [2]: https://jmeter.apache.org/api/org/apache/jmeter/testelement/TestElement.html\r\n  [3]: https://i.stack.imgur.com/nCD7z.gif\r\n  [4]: https://www.blazemeter.com/blog/jmeter-command-line\r\n  [5]: https://bitbucket.org/blazemeter/jmeter-from-code/src/master/src/main/java/com/blazemeter/demo/JMeterFromScratch.java\r\n  [6]: https://jmeter.apache.org/usermanual/build-programmatic-test-plan.html","title":"JMeter Plugin development: add standard ThreadGroup to Testplan programmatically","body":"<p>You're missing some obvious mandatory elements like <a href=\"https://jmeter.apache.org/usermanual/component_reference.html#Loop_Controller\" rel=\"nofollow noreferrer\">Loop Controller</a> which is an integral part of the Thread Group , and properties provided via <a href=\"https://jmeter.apache.org/api/org/apache/jmeter/testelement/TestElement.html\" rel=\"nofollow noreferrer\">TestElement</a>.</p>\n<p>If this is <strong>really</strong> what you're looking for you can use the following code:</p>\n<pre><code>import org.apache.jmeter.threads.ThreadGroup;\nimport org.apache.jmeter.threads.gui.ThreadGroupGui;\nimport org.apache.jmeter.gui.GuiPackage\nimport org.apache.jmeter.gui.tree.JMeterTreeNode\nimport org.apache.jmeter.exceptions.IllegalUserActionException\nimport org.apache.jmeter.control.LoopController;\nimport org.apache.jmeter.control.gui.LoopControlPanel;\nimport org.apache.jmeter.testelement.TestElement;\n\nGuiPackage guiPackage = GuiPackage.getInstance();\nJMeterTreeNode testPlanNode = (JMeterTreeNode) guiPackage.getTreeModel().getRoot();\n\n\nLoopController loopController = new LoopController();\nloopController.setLoops(1);\nloopController.setFirst(true);\nloopController.setProperty(TestElement.TEST_CLASS, LoopController.class.getName());\nloopController.setProperty(TestElement.GUI_CLASS, LoopControlPanel.class.getName());\nloopController.initialize();\n\n\nThreadGroup threadGroup = new ThreadGroup();\nthreadGroup.setName(&quot;Example Thread Group&quot;);\nthreadGroup.setNumThreads(1);\nthreadGroup.setRampUp(1);\nthreadGroup.setSamplerController(loopController);\nthreadGroup.setProperty(TestElement.TEST_CLASS, ThreadGroup.class.getName());\nthreadGroup.setProperty(TestElement.GUI_CLASS, ThreadGroupGui.class.getName());\n\n\n\nJMeterTreeNode threadGroupNode;\ntry {\n   threadGroupNode = guiPackage.getTreeModel().addComponent(threadGroup, testPlanNode);\n} catch (IllegalUserActionException e) {\n   e.printStackTrace();\n}\n\n// Refresh the JMeter GUI\nguiPackage.getMainFrame().repaint();\n</code></pre>\n<p>Demo:</p>\n<p><a href=\"https://i.stack.imgur.com/nCD7z.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nCD7z.gif\" alt=\"enter image description here\" /></a></p>\n<p>More information:</p>\n<ul>\n<li><a href=\"https://www.blazemeter.com/blog/jmeter-command-line\" rel=\"nofollow noreferrer\">JMeter Command Line Overview: 5 Ways To Launch a Test</a></li>\n<li><a href=\"https://bitbucket.org/blazemeter/jmeter-from-code/src/master/src/main/java/com/blazemeter/demo/JMeterFromScratch.java\" rel=\"nofollow noreferrer\">jmeter-from-code</a></li>\n</ul>\n<p>However it's better to take a look at <a href=\"https://jmeter.apache.org/usermanual/build-programmatic-test-plan.html\" rel=\"nofollow noreferrer\">Building a Test Plan Programmatically</a> user manual chapter</p>\n"}],"owner":{"account_id":245999,"reputation":1232,"user_id":519852,"accept_rate":93,"display_name":"Matthias"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77486431,"answer_count":1,"score":0,"last_activity_date":1700039581,"creation_date":1700038531,"question_id":77486326,"body_markdown":"I am trying to implement a new JMeter plugin myself. What I reached so far is adding a top-level menu entry and when clicking on it to start my plugin workflow.\r\n\r\nI want to achieve to add a deafult ThreadGroup to the root Testplan. I try it like this:\r\n\r\n    public void addNewThreadGroupWithSamplers() {\r\n        GuiPackage guiPackage = GuiPackage.getInstance();\r\n        JMeterTreeNode testPlanNode = (JMeterTreeNode) guiPackage.getTreeModel().getRoot();\r\n\r\n        // Create a new Thread Group\r\n        ThreadGroup threadGroup = new ThreadGroup();\r\n        threadGroup.setName(&quot;New Thread Group&quot;);\r\n\r\n        // Add the new Thread Group to the Test Plan and get its node\r\n        JMeterTreeNode threadGroupNode;\r\n        try {\r\n            threadGroupNode = guiPackage.getTreeModel().addComponent(threadGroup, testPlanNode);\r\n        } catch (IllegalUserActionException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        // Refresh the JMeter GUI\r\n        guiPackage.getMainFrame().repaint();\r\n    }\r\n\r\nUnfortunately I get a null pointer exception  from `JMeterTreeModel`, that states \r\n\r\n```\r\nUncaught Exception java.lang.NullPointerException: Cannot invoke &quot;org.apache.jmeter.gui.JMeterGUIComponent.clearGui()&quot; because &quot;guicomp&quot; is null in thread Thread[AWT-EventQueue-0,6,main]. See log file for details.\r\n```\r\n\r\nand the exception occurs at this line of JMeter:\r\n```\r\nJMeterGUIComponent guicomp = guiPackage.getGui(component);\r\n```\r\n\r\nof `addComponent()`\r\n\r\nSomething with the UI seems to be uninitialized or what could be the reason. Can you please pin-point me to a lcation with an example or provide a solution?","title":"JMeter Plugin development: add standard ThreadGroup to Testplan programmatically","body":"<p>I am trying to implement a new JMeter plugin myself. What I reached so far is adding a top-level menu entry and when clicking on it to start my plugin workflow.</p>\n<p>I want to achieve to add a deafult ThreadGroup to the root Testplan. I try it like this:</p>\n<pre><code>public void addNewThreadGroupWithSamplers() {\n    GuiPackage guiPackage = GuiPackage.getInstance();\n    JMeterTreeNode testPlanNode = (JMeterTreeNode) guiPackage.getTreeModel().getRoot();\n\n    // Create a new Thread Group\n    ThreadGroup threadGroup = new ThreadGroup();\n    threadGroup.setName(&quot;New Thread Group&quot;);\n\n    // Add the new Thread Group to the Test Plan and get its node\n    JMeterTreeNode threadGroupNode;\n    try {\n        threadGroupNode = guiPackage.getTreeModel().addComponent(threadGroup, testPlanNode);\n    } catch (IllegalUserActionException e) {\n        e.printStackTrace();\n    }\n\n    // Refresh the JMeter GUI\n    guiPackage.getMainFrame().repaint();\n}\n</code></pre>\n<p>Unfortunately I get a null pointer exception  from <code>JMeterTreeModel</code>, that states</p>\n<pre><code>Uncaught Exception java.lang.NullPointerException: Cannot invoke &quot;org.apache.jmeter.gui.JMeterGUIComponent.clearGui()&quot; because &quot;guicomp&quot; is null in thread Thread[AWT-EventQueue-0,6,main]. See log file for details.\n</code></pre>\n<p>and the exception occurs at this line of JMeter:</p>\n<pre><code>JMeterGUIComponent guicomp = guiPackage.getGui(component);\n</code></pre>\n<p>of <code>addComponent()</code></p>\n<p>Something with the UI seems to be uninitialized or what could be the reason. Can you please pin-point me to a lcation with an example or provide a solution?</p>\n"},{"tags":["java","spring","spring-cloud","spring-cloud-config"],"comments":[{"owner":{"account_id":1368060,"reputation":24601,"user_id":2730527,"display_name":"spencergibb"},"score":0,"creation_date":1461225986,"post_id":36763192,"comment_id":61105139,"body_markdown":"Can you give a little more detail? What have you tried? If you&#39;ve tried something, and failed, what was the error?","body":"Can you give a little more detail? What have you tried? If you&#39;ve tried something, and failed, what was the error?"},{"owner":{"account_id":6325261,"reputation":93,"user_id":4911934,"display_name":"Amir Botvinik Nadiv"},"score":0,"creation_date":1461226147,"post_id":36763192,"comment_id":61105258,"body_markdown":"I have tried using @PropertyResource and he ignored the external location and started on tomcat default port","body":"I have tried using @PropertyResource and he ignored the external location and started on tomcat default port"}],"answers":[{"tags":[],"owner":{"account_id":1368060,"reputation":24601,"user_id":2730527,"display_name":"spencergibb"},"down_vote_count":0,"up_vote_count":17,"is_accepted":true,"score":17,"last_activity_date":1461227305,"creation_date":1461227305,"answer_id":36763937,"question_id":36763192,"body_markdown":"Spring Cloud uses the the same [locations as spring boot][1] to find `bootstrap.properties` (or `.yml`). So `classpath:,classpath:/config,file:,file:config/` is the default search path, `./config/` is the highest precedence. If your file is in `./config` or `./` it should just work. The property (`spring.cloud.bootstrap.location`) to [change the location][2] is slightly different than boot.\r\n\r\n\r\n  [1]: http://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#boot-features-external-config-application-property-files\r\n  [2]: https://github.com/spring-cloud/spring-cloud-commons/blob/master/docs/src/main/asciidoc/spring-cloud-commons.adoc#changing-the-location-of-bootstrap-properties","title":"spring cloud - bootstrap.properties outside my jar","body":"<p>Spring Cloud uses the the same <a href=\"http://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#boot-features-external-config-application-property-files\" rel=\"noreferrer\">locations as spring boot</a> to find <code>bootstrap.properties</code> (or <code>.yml</code>). So <code>classpath:,classpath:/config,file:,file:config/</code> is the default search path, <code>./config/</code> is the highest precedence. If your file is in <code>./config</code> or <code>./</code> it should just work. The property (<code>spring.cloud.bootstrap.location</code>) to <a href=\"https://github.com/spring-cloud/spring-cloud-commons/blob/master/docs/src/main/asciidoc/spring-cloud-commons.adoc#changing-the-location-of-bootstrap-properties\" rel=\"noreferrer\">change the location</a> is slightly different than boot.</p>\n"},{"tags":[],"owner":{"account_id":100270,"reputation":127154,"user_id":270371,"accept_rate":33,"display_name":"davidxxx"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1581494883,"creation_date":1581494883,"answer_id":60183728,"question_id":36763192,"body_markdown":"`spring.cloud.bootstrap.location` behaves like `spring.config.location` (in Spring Boot 2), it replaces the location of these configuration files.    \r\n\r\nTo make it working, it has to defined as a system property.   \r\nFor example :  \r\n\r\nWith Jar : \r\n\r\n    java -jar\r\n         -Dspring.cloud.bootstrap.location=anyLocation/bootstrap.yml \r\n          ...\r\n\r\n\r\nWith Spring Boot maven plugin :\r\n\r\n    mvn spring-boot:run \r\n       -Dspring-boot.run.jvmArguments=&quot;-Dspring.cloud.bootstrap.location=anyLocation/bootstrap.yml&quot;","title":"spring cloud - bootstrap.properties outside my jar","body":"<p><code>spring.cloud.bootstrap.location</code> behaves like <code>spring.config.location</code> (in Spring Boot 2), it replaces the location of these configuration files.    </p>\n\n<p>To make it working, it has to defined as a system property.<br>\nFor example :  </p>\n\n<p>With Jar : </p>\n\n<pre><code>java -jar\n     -Dspring.cloud.bootstrap.location=anyLocation/bootstrap.yml \n      ...\n</code></pre>\n\n<p>With Spring Boot maven plugin :</p>\n\n<pre><code>mvn spring-boot:run \n   -Dspring-boot.run.jvmArguments=\"-Dspring.cloud.bootstrap.location=anyLocation/bootstrap.yml\"\n</code></pre>\n"}],"owner":{"account_id":6325261,"reputation":93,"user_id":4911934,"display_name":"Amir Botvinik Nadiv"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":14273,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":36763937,"answer_count":2,"score":7,"last_activity_date":1700039404,"creation_date":1461225086,"question_id":36763192,"body_markdown":"I am trying to put `bootstrap.properties` from outside my jar, so it won&#39;t get overridden by other developers by mistake. Could you please advice here?\r\n\r\nThis is its&#39; content - directing to the spring server config \r\n\r\n    # application name\r\n    spring.application.name=elixium\r\n    # The server entry point\r\n    spring.cloud.config.uri=http://localhost:8888","title":"spring cloud - bootstrap.properties outside my jar","body":"<p>I am trying to put <code>bootstrap.properties</code> from outside my jar, so it won't get overridden by other developers by mistake. Could you please advice here?</p>\n\n<p>This is its' content - directing to the spring server config </p>\n\n<pre><code># application name\nspring.application.name=elixium\n# The server entry point\nspring.cloud.config.uri=http://localhost:8888\n</code></pre>\n"},{"tags":["java","spring-boot","spring-webflux","spring-test"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1700045374,"post_id":77486310,"comment_id":136605819,"body_markdown":"The data isn&#39;t saved, it is only visible for the current thread / transaction. As the webclient is async it cannot see the non-committed data as it runs a different transaction.","body":"The data isn&#39;t saved, it is only visible for the current thread / transaction. As the webclient is async it cannot see the non-committed data as it runs a different transaction."}],"owner":{"account_id":17206530,"reputation":104,"user_id":12456968,"display_name":"Steven Kristian"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1700038945,"creation_date":1700038364,"question_id":77486310,"body_markdown":"I have a simple integration test case where I&#39;d like to find a certain data.\r\nFirst, I use .save() to insert a data. While it works successfully (as I debugged it and also this.dataRepository.findAll() does not return null), but when I use WebTestClient to get the specific data using the same method (this.dataRepository.findAll()), it returns null\r\n\r\n```java\r\n@RequestMapping(value = &quot;/api/constant&quot;)\r\npublic class ConfigurationController {\r\n\r\n  @Autowired\r\n  private DataRepository dataRepository;\r\n\r\n  @GetMapping\r\n  public Mono&lt;Object&gt; getConstant() {\r\n    Mono.fromSupplier(() -&gt; this.dataRepository.findAll()).subscribeOn(Schedulers.single());\r\n  }\r\n}\r\n```\r\n\r\n\r\n```java\r\n@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.MOCK)\r\n@AutoConfigureWebTestClient\r\n@Transactional\r\npublic class TestITCase {\r\n\r\n  @Autowired\r\n  private DataRepository dataRepository;\r\n\r\n  @Autowired\r\n  private WebTestClient webTestClient;\r\n\r\n  @Test\r\n  public void getConstants_Valid_Success()  {\r\n    this.dataRepository.saveAndFlush(data);\r\n    this.dataRepository.findAll(); // the data exist\r\n    FluxExchangeResult&lt;String&gt; result = this.webTestClient.get()\r\n        .uri(b -&gt; b.path(&quot;/api/constant&quot;)\r\n            .build())\r\n        .header(HttpHeaders.ACCEPT, MediaType.APPLICATION_JSON_VALUE)\r\n        .exchange()\r\n        .returnResult(String.class)\r\n        .getResponseBody()\r\n        .blockFirst(); // this returns null for some reason\r\n  }\r\n}\r\n\r\n```\r\n\r\n\r\n## UPDATE\r\nApparently when using WebTestClient,\r\n\r\n&gt; This request is handled in a different thread and as such uses a new transaction.\r\nhttps://stackoverflow.com/questions/69389071/repository-inserts-dont-work-in-springboottest-with-webtestclient\r\n\r\nBut now I&#39;m wondering is there a way such that the WebTestClient is running on the same thread? Because I do not want to commit a transaction then roll it back, as it does not create idempotency within my test (for example the test failed before .delete()), then the data is accidentally saved.","title":"No data received from WebTestClient when getting data from JpaRepository","body":"<p>I have a simple integration test case where I'd like to find a certain data.\nFirst, I use .save() to insert a data. While it works successfully (as I debugged it and also this.dataRepository.findAll() does not return null), but when I use WebTestClient to get the specific data using the same method (this.dataRepository.findAll()), it returns null</p>\n<pre class=\"lang-java prettyprint-override\"><code>@RequestMapping(value = &quot;/api/constant&quot;)\npublic class ConfigurationController {\n\n  @Autowired\n  private DataRepository dataRepository;\n\n  @GetMapping\n  public Mono&lt;Object&gt; getConstant() {\n    Mono.fromSupplier(() -&gt; this.dataRepository.findAll()).subscribeOn(Schedulers.single());\n  }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.MOCK)\n@AutoConfigureWebTestClient\n@Transactional\npublic class TestITCase {\n\n  @Autowired\n  private DataRepository dataRepository;\n\n  @Autowired\n  private WebTestClient webTestClient;\n\n  @Test\n  public void getConstants_Valid_Success()  {\n    this.dataRepository.saveAndFlush(data);\n    this.dataRepository.findAll(); // the data exist\n    FluxExchangeResult&lt;String&gt; result = this.webTestClient.get()\n        .uri(b -&gt; b.path(&quot;/api/constant&quot;)\n            .build())\n        .header(HttpHeaders.ACCEPT, MediaType.APPLICATION_JSON_VALUE)\n        .exchange()\n        .returnResult(String.class)\n        .getResponseBody()\n        .blockFirst(); // this returns null for some reason\n  }\n}\n\n</code></pre>\n<h2>UPDATE</h2>\n<p>Apparently when using WebTestClient,</p>\n<blockquote>\n<p>This request is handled in a different thread and as such uses a new transaction.\n<a href=\"https://stackoverflow.com/questions/69389071/repository-inserts-dont-work-in-springboottest-with-webtestclient\">Repository inserts don&#39;t work in SpringBootTest with WebTestClient</a></p>\n</blockquote>\n<p>But now I'm wondering is there a way such that the WebTestClient is running on the same thread? Because I do not want to commit a transaction then roll it back, as it does not create idempotency within my test (for example the test failed before .delete()), then the data is accidentally saved.</p>\n"},{"tags":["java","constraints","optaplanner","heuristics","timefold"],"comments":[{"owner":{"account_id":9133364,"reputation":4450,"user_id":6794063,"display_name":"Luk&#225;š Petrovick&#253;"},"score":0,"creation_date":1699465508,"post_id":77447152,"comment_id":136536191,"body_markdown":"Why is the solver not starting? Is there an exception perhaps? Please update the question.","body":"Why is the solver not starting? Is there an exception perhaps? Please update the question."},{"owner":{"account_id":29206918,"reputation":11,"user_id":22375815,"display_name":"sicario_23"},"score":0,"creation_date":1699466995,"post_id":77447152,"comment_id":136536431,"body_markdown":"I have updated the question with the error in api response which is:\nThe &lt;constructionHeuristic&gt; contains a changeMoveSelector (ChangeMoveSelectorConfig(EntitySelectorConfig(null), null)) that contains an entitySelector (EntitySelectorConfig(null)) without explicitly configuring the &lt;queuedEntityPlacer&gt;\n\nFor construction heuristics do we need to define the filter in a different format?","body":"I have updated the question with the error in api response which is: The &lt;constructionHeuristic&gt; contains a changeMoveSelector (ChangeMoveSelectorConfig(EntitySelectorConfig(null), null)) that contains an entitySelector (EntitySelectorConfig(null)) without explicitly configuring the &lt;queuedEntityPlacer&gt;  For construction heuristics do we need to define the filter in a different format?"}],"answers":[{"tags":[],"owner":{"account_id":216698,"reputation":26495,"user_id":472109,"accept_rate":85,"display_name":"Geoffrey De Smet"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700038498,"creation_date":1700038498,"answer_id":77486321,"question_id":77447152,"body_markdown":"Here be dragons.\r\n\r\nFrom [this docs section][1], here&#39;s an example of a proper CH power-tweaked config:\r\n\r\n      &lt;constructionHeuristic&gt;\r\n        &lt;queuedEntityPlacer&gt;\r\n          &lt;entitySelector id=&quot;placerEntitySelector&quot;&gt;\r\n            &lt;!-- your filter? --&gt;\r\n      \r\n          &lt;/entitySelector&gt;\r\n          &lt;changeMoveSelector&gt;\r\n            &lt;entitySelector mimicSelectorRef=&quot;placerEntitySelector&quot;/&gt;\r\n            &lt;valueSelector&gt;\r\n              \r\n            &lt;/valueSelector&gt;\r\n          &lt;/changeMoveSelector&gt;\r\n        &lt;/queuedEntityPlacer&gt;\r\n      &lt;/constructionHeuristic&gt;\r\n\r\nThat being said, in my experience, this is probably the wrong rabbit hole to follow to solve the scaling problem you want to fix.\r\n\r\n  [1]: https://timefold.ai/docs/timefold-solver/latest/optimization-algorithms/optimization-algorithms#allocateEntityFromQueue","title":"OptaPlanner - How to configure a selectionFilter in construction heuristics phase?","body":"<p>Here be dragons.</p>\n<p>From <a href=\"https://timefold.ai/docs/timefold-solver/latest/optimization-algorithms/optimization-algorithms#allocateEntityFromQueue\" rel=\"nofollow noreferrer\">this docs section</a>, here's an example of a proper CH power-tweaked config:</p>\n<pre><code>  &lt;constructionHeuristic&gt;\n    &lt;queuedEntityPlacer&gt;\n      &lt;entitySelector id=&quot;placerEntitySelector&quot;&gt;\n        &lt;!-- your filter? --&gt;\n  \n      &lt;/entitySelector&gt;\n      &lt;changeMoveSelector&gt;\n        &lt;entitySelector mimicSelectorRef=&quot;placerEntitySelector&quot;/&gt;\n        &lt;valueSelector&gt;\n          \n        &lt;/valueSelector&gt;\n      &lt;/changeMoveSelector&gt;\n    &lt;/queuedEntityPlacer&gt;\n  &lt;/constructionHeuristic&gt;\n</code></pre>\n<p>That being said, in my experience, this is probably the wrong rabbit hole to follow to solve the scaling problem you want to fix.</p>\n"}],"owner":{"account_id":29206918,"reputation":11,"user_id":22375815,"display_name":"sicario_23"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1700038498,"creation_date":1699459341,"question_id":77447152,"body_markdown":"\r\nI am trying to add a selectionFilter during the CH phase as below in solverConfig.xml:\r\n\r\n```\r\n\t&lt;constructionHeuristic&gt;\r\n\t\t&lt;constructionHeuristicType&gt;FIRST_FIT&lt;/constructionHeuristicType&gt;\r\n\t\t&lt;changeMoveSelector&gt;\r\n\t\t\t&lt;entitySelector&gt;\r\n\t\t\t\t&lt;filterClass&gt;org.example.entity.ShiftFilter\r\n\t\t\t\t&lt;/filterClass&gt;\r\n\t\t\t&lt;/entitySelector&gt;\r\n\t\t&lt;/changeMoveSelector&gt;\r\n\t&lt;/constructionHeuristic&gt;\r\n```\r\nAfter adding this to the config, the solver is not starting. The same filter works fine within a local search phase.\r\n\r\nThe error in the solve api response is as follows:\r\n\r\n    The &lt;constructionHeuristic&gt; contains a changeMoveSelector (ChangeMoveSelectorConfig(EntitySelectorConfig(null), null)) that contains an entitySelector (EntitySelectorConfig(null)) without explicitly configuring the &lt;queuedEntityPlacer&gt;\r\n\r\nCould someone help me point in the right direction on how to add selection filer in CH.","title":"OptaPlanner - How to configure a selectionFilter in construction heuristics phase?","body":"<p>I am trying to add a selectionFilter during the CH phase as below in solverConfig.xml:</p>\n<pre><code>    &lt;constructionHeuristic&gt;\n        &lt;constructionHeuristicType&gt;FIRST_FIT&lt;/constructionHeuristicType&gt;\n        &lt;changeMoveSelector&gt;\n            &lt;entitySelector&gt;\n                &lt;filterClass&gt;org.example.entity.ShiftFilter\n                &lt;/filterClass&gt;\n            &lt;/entitySelector&gt;\n        &lt;/changeMoveSelector&gt;\n    &lt;/constructionHeuristic&gt;\n</code></pre>\n<p>After adding this to the config, the solver is not starting. The same filter works fine within a local search phase.</p>\n<p>The error in the solve api response is as follows:</p>\n<pre><code>The &lt;constructionHeuristic&gt; contains a changeMoveSelector (ChangeMoveSelectorConfig(EntitySelectorConfig(null), null)) that contains an entitySelector (EntitySelectorConfig(null)) without explicitly configuring the &lt;queuedEntityPlacer&gt;\n</code></pre>\n<p>Could someone help me point in the right direction on how to add selection filer in CH.</p>\n"},{"tags":["java","optimization","optaplanner"],"comments":[{"owner":{"account_id":216698,"reputation":26495,"user_id":472109,"accept_rate":85,"display_name":"Geoffrey De Smet"},"score":0,"creation_date":1698614894,"post_id":77382509,"comment_id":136424787,"body_markdown":"See [the issue for this](https://github.com/TimefoldAI/timefold-solver/issues/76) on Timefold (the continuation of OptaPlanner) too.","body":"See <a href=\"https://github.com/TimefoldAI/timefold-solver/issues/76\" rel=\"nofollow noreferrer\">the issue for this</a> on Timefold (the continuation of OptaPlanner) too."}],"answers":[{"tags":[],"owner":{"account_id":216698,"reputation":26495,"user_id":472109,"accept_rate":85,"display_name":"Geoffrey De Smet"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700038213,"creation_date":1700038213,"answer_id":77486295,"question_id":77382509,"body_markdown":"I wouldn&#39;t make `isVirtual` a planning variable, that will explode the search space.\r\n\r\nInstead, I &#39;d add a medium constraint (after switching to a HardMediumSoftLongScore) to penalize the number of assigned virtual vehicles.\r\n\r\nThat way, you don&#39;t have to deal with the fickle 150,000 meters thresholds etc. ","title":"Dynamic entity property adjustment in OptaPlanner during pptimization process","body":"<p>I wouldn't make <code>isVirtual</code> a planning variable, that will explode the search space.</p>\n<p>Instead, I 'd add a medium constraint (after switching to a HardMediumSoftLongScore) to penalize the number of assigned virtual vehicles.</p>\n<p>That way, you don't have to deal with the fickle 150,000 meters thresholds etc.</p>\n"}],"owner":{"account_id":29772340,"reputation":1,"user_id":22817225,"display_name":"Divij"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1700038213,"creation_date":1698567804,"question_id":77382509,"body_markdown":"I&#39;m working on an OptaPlanner project for vehicle routing optimization, and I have a specific requirement. We are facing overconstrained planning problem, i.e. skip customer stops. We&#39;ve decided to go with one plausible solution of adding virtual values to catch the unassigned entities as mentioned in the documentation. I want to automatically adjust the isVirtual property of certain BusStop entities in my domain based on the optimization&#160;process.\r\n\r\nHere&#39;s a simplified version of my domain model:\r\n```\r\npublic class BusStop {\r\n    private boolean isVirtual;\r\n    // Other properties and getters/setters\r\n}\r\n```\r\n\r\nI want this change to be dynamic and influence the optimization process to improve the overall score, as if the isVirtual property was part of the score calculation.\r\n\r\nCould anyone provide some guidance or an example of how I can achieve this behavior in OptaPlanner? \r\n\r\nWork done till now: during the optimization process, when the total route distance of a Bus exceeds a certain threshold (e.g., 150,000 meters), I automatically set the isVirtual property of some BusStop entities to true in constraint provider implementation itself but that is being carried out to other solutions as well.","title":"Dynamic entity property adjustment in OptaPlanner during pptimization process","body":"<p>I'm working on an OptaPlanner project for vehicle routing optimization, and I have a specific requirement. We are facing overconstrained planning problem, i.e. skip customer stops. We've decided to go with one plausible solution of adding virtual values to catch the unassigned entities as mentioned in the documentation. I want to automatically adjust the isVirtual property of certain BusStop entities in my domain based on the optimization process.</p>\n<p>Here's a simplified version of my domain model:</p>\n<pre><code>public class BusStop {\n    private boolean isVirtual;\n    // Other properties and getters/setters\n}\n</code></pre>\n<p>I want this change to be dynamic and influence the optimization process to improve the overall score, as if the isVirtual property was part of the score calculation.</p>\n<p>Could anyone provide some guidance or an example of how I can achieve this behavior in OptaPlanner?</p>\n<p>Work done till now: during the optimization process, when the total route distance of a Bus exceeds a certain threshold (e.g., 150,000 meters), I automatically set the isVirtual property of some BusStop entities to true in constraint provider implementation itself but that is being carried out to other solutions as well.</p>\n"},{"tags":["java","android","active-directory","ldap","unboundid-ldap-sdk"],"answers":[{"tags":[],"owner":{"account_id":7560293,"reputation":140,"user_id":5802018,"display_name":"CravateRouge"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700037260,"creation_date":1700037260,"answer_id":77486203,"question_id":76553287,"body_markdown":"This behavior seems to be induced by a [bug on Windows Server][1] introduced in May 2023 and fixed in [October 2023 update][2]. Causing an issue in which an external bind might fail. This leads to issues with Lightweight Directory Access Protocol (LDAP) queries and authentication.\r\n\r\n\r\n  [1]: https://learn.microsoft.com/en-us/answers/questions/1373156/why-does-kb5026409-cause-sasl-external-to-fail\r\n  [2]: https://support.microsoft.com/en-us/topic/october-10-2023-kb5031407-security-only-update-fbabe467-2b2e-4871-891a-3716394b2a45","title":"LDAP server claims &quot;The server did not receive any credentials via TLS&quot;","body":"<p>This behavior seems to be induced by a <a href=\"https://learn.microsoft.com/en-us/answers/questions/1373156/why-does-kb5026409-cause-sasl-external-to-fail\" rel=\"nofollow noreferrer\">bug on Windows Server</a> introduced in May 2023 and fixed in <a href=\"https://support.microsoft.com/en-us/topic/october-10-2023-kb5031407-security-only-update-fbabe467-2b2e-4871-891a-3716394b2a45\" rel=\"nofollow noreferrer\">October 2023 update</a>. Causing an issue in which an external bind might fail. This leads to issues with Lightweight Directory Access Protocol (LDAP) queries and authentication.</p>\n"}],"owner":{"account_id":28879495,"reputation":21,"user_id":22119257,"display_name":"sstb"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":95,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1700038153,"creation_date":1687748581,"question_id":76553287,"body_markdown":"My Android app connects to an LDAP server during normal operation. The initial connection is anonymous, and startTLS with `EXTERNAL` binding is used to perform authentication as anonymous access is disallowed. UnboundID LDAP SDK is used as the LDAP library.\r\n\r\nRecently the `EXTERNAL` binding has been failing with the error &quot;80090317: The server did not receive any credentials via TLS, data 0, v2580&quot;. This is without changes to the app or Android platform, and the server team claims that there are no changes to the server either. I have confirmed that both client and server certs are valid, and that certs were indeed exchanged (by means of [`HandshakeCompletedListener`](https://docs.oracle.com/javase/8/docs/api/javax/net/ssl/HandshakeCompletedListener.html)).\r\n\r\n**Code**\r\n\r\n```java\r\n// connect to server - anonymous login, non-SSL\r\nLDAPConnection mConn = new LDAPConnection(address, port, &quot;&quot;, &quot;&quot;, null)\r\n\r\n// start TLS\r\nKeyManager km = (...);\r\nSSLUtil sslUtil = new SSLUtil(km, new TrustAllTrustManager());\r\nStartTLSExtendedRequest req = new StartTLSExtendedRequest(sslUtil.createSSLContext());\r\nmConn.processExtendedRequest(req);\r\n\r\n// TLS connection succeeds, proceed with bind\r\n// EXTERNAL bind request with authzId left blank\r\n// It should use the cert supplied during TLS\r\nBindRequest request = new EXTERNALBindRequest(&quot;&quot;);\r\nmConn.bind(request); // fails here\r\n```\r\n\r\n\r\nI have tried the following:\r\n\r\n* Starting the initial connection over SSL, presenting the user certificate at the beginning. The server claims that the connection is not bound yet, contrary to [Microsoft&#39;s Active Directory specs](https://learn.microsoft.com/en-us/openspecs/windows_protocols/ms-adts/8e73932f-70cf-46d6-88b1-8d9f86235e81).\r\n* Attempting to manually trace the handshake proved unfruitful - the Android socket code seems non-debuggable through Android Studio, and setting the [javax.net.debug](https://docs.oracle.com/javase/8/docs/technotes/guides/security/jsse/ReadDebug.html) options produced no output.\r\n* Packet capture solutions I found would require root as the connection to the server is done over a VPN\r\n\r\nThe remote server&#39;s team may take some time to arrange tests, so in the meantime I would like to hear some ideas on what could be happening here.","title":"LDAP server claims &quot;The server did not receive any credentials via TLS&quot;","body":"<p>My Android app connects to an LDAP server during normal operation. The initial connection is anonymous, and startTLS with <code>EXTERNAL</code> binding is used to perform authentication as anonymous access is disallowed. UnboundID LDAP SDK is used as the LDAP library.</p>\n<p>Recently the <code>EXTERNAL</code> binding has been failing with the error &quot;80090317: The server did not receive any credentials via TLS, data 0, v2580&quot;. This is without changes to the app or Android platform, and the server team claims that there are no changes to the server either. I have confirmed that both client and server certs are valid, and that certs were indeed exchanged (by means of <a href=\"https://docs.oracle.com/javase/8/docs/api/javax/net/ssl/HandshakeCompletedListener.html\" rel=\"nofollow noreferrer\"><code>HandshakeCompletedListener</code></a>).</p>\n<p><strong>Code</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>// connect to server - anonymous login, non-SSL\nLDAPConnection mConn = new LDAPConnection(address, port, &quot;&quot;, &quot;&quot;, null)\n\n// start TLS\nKeyManager km = (...);\nSSLUtil sslUtil = new SSLUtil(km, new TrustAllTrustManager());\nStartTLSExtendedRequest req = new StartTLSExtendedRequest(sslUtil.createSSLContext());\nmConn.processExtendedRequest(req);\n\n// TLS connection succeeds, proceed with bind\n// EXTERNAL bind request with authzId left blank\n// It should use the cert supplied during TLS\nBindRequest request = new EXTERNALBindRequest(&quot;&quot;);\nmConn.bind(request); // fails here\n</code></pre>\n<p>I have tried the following:</p>\n<ul>\n<li>Starting the initial connection over SSL, presenting the user certificate at the beginning. The server claims that the connection is not bound yet, contrary to <a href=\"https://learn.microsoft.com/en-us/openspecs/windows_protocols/ms-adts/8e73932f-70cf-46d6-88b1-8d9f86235e81\" rel=\"nofollow noreferrer\">Microsoft's Active Directory specs</a>.</li>\n<li>Attempting to manually trace the handshake proved unfruitful - the Android socket code seems non-debuggable through Android Studio, and setting the <a href=\"https://docs.oracle.com/javase/8/docs/technotes/guides/security/jsse/ReadDebug.html\" rel=\"nofollow noreferrer\">javax.net.debug</a> options produced no output.</li>\n<li>Packet capture solutions I found would require root as the connection to the server is done over a VPN</li>\n</ul>\n<p>The remote server's team may take some time to arrange tests, so in the meantime I would like to hear some ideas on what could be happening here.</p>\n"},{"tags":["java","spring-boot","hibernate","mariadb","h2"],"owner":{"account_id":9952587,"reputation":11,"user_id":7364634,"display_name":"Shuvo Kumar Sarkar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1700038121,"creation_date":1700038121,"question_id":77486278,"body_markdown":"```\r\n@Column(name = &quot;trust&quot;, length = 1, nullable = false, columnDefinition = &quot;int&quot;)\r\nprivate Boolean trust;\r\n```\r\n\r\norg.h2.jdbc.JdbcSQLSyntaxErrorException: Domain &quot;int&quot; not found;\r\n\r\nI believe the issue is with the data type specification. How should I correctly define these columns in H2(version: 2.1.214) for intregation test? I&#39;m also using MariaDB, so any suggestions on compatibility between the two databases would be helpful.\r\n\r\nThanks in advance!","title":"Error in H2 Database: &quot;Domain &#39;int&#39; not found&quot;","body":"<pre><code>@Column(name = &quot;trust&quot;, length = 1, nullable = false, columnDefinition = &quot;int&quot;)\nprivate Boolean trust;\n</code></pre>\n<p>org.h2.jdbc.JdbcSQLSyntaxErrorException: Domain &quot;int&quot; not found;</p>\n<p>I believe the issue is with the data type specification. How should I correctly define these columns in H2(version: 2.1.214) for intregation test? I'm also using MariaDB, so any suggestions on compatibility between the two databases would be helpful.</p>\n<p>Thanks in advance!</p>\n"},{"tags":["java","inheritance","mapstruct"],"comments":[{"owner":{"account_id":18044315,"reputation":1227,"user_id":13115701,"display_name":"Paul Marcelin Bejan"},"score":0,"creation_date":1701124158,"post_id":77486214,"comment_id":136734097,"body_markdown":"Can you explain better what you are looking for? What do you want to achieve? Maybe an example of the expected output can help","body":"Can you explain better what you are looking for? What do you want to achieve? Maybe an example of the expected output can help"}],"owner":{"account_id":4728451,"reputation":451,"user_id":3824715,"accept_rate":62,"display_name":"ch1ll"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1700038040,"creation_date":1700037445,"question_id":77486214,"body_markdown":"I have these Dtos: \r\n\r\n    public class AnimalDTO {\r\n        \r\n        Long id;\r\n        String name;\r\n       \r\n    }\r\n\r\n    public class DogDTO extends AnimalDTO {\r\n        \r\n        Long furType;\r\n        String furColor;\r\n        ...\r\n    }\r\n\r\n    public class FarmDTO {\r\n        \r\n        Long id;\r\n        AnimalDTO mainAnimal;\r\n        Double size;\r\n        Integer employees;\r\n        ...\r\n    }\r\n\r\n    public class FarmMinimalDTO {\r\n        \r\n        Long id;\r\n        AnimalDTO mainAnimal;\r\n       \r\n    }\r\n\r\n\r\nIf now in Mapstruct i would write something like: \r\n\r\n    \r\n    @Mapper(config = MapperConfiguration.class) // nothing fancy in there\r\n    public abstract class FarmMapper {\r\n\r\n           public abstract FarmMinimalDTO mapToFarmDTO(FarmDTO farmDTO);\r\n    }\r\n\r\n\r\nIf the `farmDTO.mainAnimal` is a `DogDTO`, mapstruct does not implicitly convert that into an `AnimalDTO`. But the main point of me putting `AnimalDTO` in the `FarmMinimalDTO`, is because I want less data in this DTO. \r\n\r\nCan I configure that with mapstruct? Or do I have to map that individually? \r\n\r\nOr is that `DogDTO extends AnimalDTO` already a red flag? I inherited this project, in my last projects I liked keeping my DTOs untangled although this meant duplicate code.\r\n\r\n\r\n\r\n\r\n","title":"Mapstruct explicitly map to subclass","body":"<p>I have these Dtos:</p>\n<pre><code>public class AnimalDTO {\n    \n    Long id;\n    String name;\n   \n}\n\npublic class DogDTO extends AnimalDTO {\n    \n    Long furType;\n    String furColor;\n    ...\n}\n\npublic class FarmDTO {\n    \n    Long id;\n    AnimalDTO mainAnimal;\n    Double size;\n    Integer employees;\n    ...\n}\n\npublic class FarmMinimalDTO {\n    \n    Long id;\n    AnimalDTO mainAnimal;\n   \n}\n</code></pre>\n<p>If now in Mapstruct i would write something like:</p>\n<pre><code>@Mapper(config = MapperConfiguration.class) // nothing fancy in there\npublic abstract class FarmMapper {\n\n       public abstract FarmMinimalDTO mapToFarmDTO(FarmDTO farmDTO);\n}\n</code></pre>\n<p>If the <code>farmDTO.mainAnimal</code> is a <code>DogDTO</code>, mapstruct does not implicitly convert that into an <code>AnimalDTO</code>. But the main point of me putting <code>AnimalDTO</code> in the <code>FarmMinimalDTO</code>, is because I want less data in this DTO.</p>\n<p>Can I configure that with mapstruct? Or do I have to map that individually?</p>\n<p>Or is that <code>DogDTO extends AnimalDTO</code> already a red flag? I inherited this project, in my last projects I liked keeping my DTOs untangled although this meant duplicate code.</p>\n"},{"tags":["java","android","android-studio","annotation-processing"],"comments":[{"owner":{"account_id":1371468,"reputation":5748,"user_id":1306546,"accept_rate":79,"display_name":"Rens Verhage"},"score":0,"creation_date":1405534773,"post_id":24787751,"comment_id":38470279,"body_markdown":"Ok, this is just weird. I restarted Android Studio, reopened my project and now I have two &#39;Compiler&#39; options, both options as shown in the screens above...","body":"Ok, this is just weird. I restarted Android Studio, reopened my project and now I have two &#39;Compiler&#39; options, both options as shown in the screens above..."},{"owner":{"account_id":2157585,"reputation":15037,"user_id":2129654,"accept_rate":41,"display_name":"Jacob"},"score":1,"creation_date":1417388521,"post_id":24787751,"comment_id":42917836,"body_markdown":"So only restart has solved your problem or maybe some additional acitons? Even after restart I still have this issue like (Compiler(Gradle-based Android Projects)) etc. and only one tab.","body":"So only restart has solved your problem or maybe some additional acitons? Even after restart I still have this issue like (Compiler(Gradle-based Android Projects)) etc. and only one tab."}],"answers":[{"tags":[],"owner":{"account_id":194941,"reputation":531,"user_id":437550,"accept_rate":82,"display_name":"Eli Lipsitz"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1423017901,"creation_date":1423017901,"answer_id":28312665,"question_id":24787751,"body_markdown":"This is a little late, but for me, it&#39;s under\r\n\r\nFile -&gt; Other Settings -&gt; Default Settings -&gt; Compiler\r\n\r\nThis compiler has dropdown options, including Annotation Processors.","title":"Compiler options missing in Android Studio &gt;= 0.8.2","body":"<p>This is a little late, but for me, it's under</p>\n\n<p>File -> Other Settings -> Default Settings -> Compiler</p>\n\n<p>This compiler has dropdown options, including Annotation Processors.</p>\n"},{"tags":[],"owner":{"account_id":5103844,"reputation":3188,"user_id":4092588,"accept_rate":77,"display_name":"Antonino"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1569462844,"creation_date":1528098759,"answer_id":50675771,"question_id":24787751,"body_markdown":"In Android Studio 3.1.2 this setting is under:\r\n\r\nFile -&gt; Other Settings -&gt; Default Settings... -&gt; Build, Execution, Deployment -&gt; Compiler -&gt; Java Compiler -&gt; Additional command line parameters\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n----------\r\n\r\n\r\n**Update**\r\n\r\nFor more recent versions of Android Studio [tested on Android Studio 3.5 but probably starting from 3.4 according to Joel&#39;s comment] this setting is under:\r\n\r\nFile -&gt; Other Settings -&gt; Settings for New Projects... -&gt; Build, Execution, Deployment -&gt; Compiler -&gt; Java Compiler -&gt; Additional command line parameters\r\n\r\n\r\n----------\r\n\r\n\r\nFor existing projects it seems to me that the only option is to implement the solution described in these two answers [A1][2] and [A2][3], modifying the `build.gradle` file wrapping around `allprojects` or not based on your needs:\r\n\r\n    allprojects {\r\n        gradle.projectsEvaluated {\r\n            tasks.withType(JavaCompile) {\r\n                options.compilerArgs &lt;&lt; &quot;-Xlint:unchecked&quot; &lt;&lt; &quot;-Xlint:deprecation&quot;\r\n            }\r\n        }\r\n    }\r\n\r\nMore details about Gradle&#39;s Multi-Project Builds can be found [here][4] on their official website\r\n\r\n  [1]: https://i.stack.imgur.com/RjI9y.jpg\r\n  [2]: https://stackoverflow.com/a/22183825/4092588\r\n  [3]: https://stackoverflow.com/a/28270322/4092588\r\n  [4]: https://docs.gradle.org/current/userguide/multi_project_builds.html\r\n","title":"Compiler options missing in Android Studio &gt;= 0.8.2","body":"<p>In Android Studio 3.1.2 this setting is under:</p>\n\n<p>File -> Other Settings -> Default Settings... -> Build, Execution, Deployment -> Compiler -> Java Compiler -> Additional command line parameters</p>\n\n<p><a href=\"https://i.stack.imgur.com/RjI9y.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RjI9y.jpg\" alt=\"enter image description here\"></a></p>\n\n<hr>\n\n<p><strong>Update</strong></p>\n\n<p>For more recent versions of Android Studio [tested on Android Studio 3.5 but probably starting from 3.4 according to Joel's comment] this setting is under:</p>\n\n<p>File -> Other Settings -> Settings for New Projects... -> Build, Execution, Deployment -> Compiler -> Java Compiler -> Additional command line parameters</p>\n\n<hr>\n\n<p>For existing projects it seems to me that the only option is to implement the solution described in these two answers <a href=\"https://stackoverflow.com/a/22183825/4092588\">A1</a> and <a href=\"https://stackoverflow.com/a/28270322/4092588\">A2</a>, modifying the <code>build.gradle</code> file wrapping around <code>allprojects</code> or not based on your needs:</p>\n\n<pre><code>allprojects {\n    gradle.projectsEvaluated {\n        tasks.withType(JavaCompile) {\n            options.compilerArgs &lt;&lt; \"-Xlint:unchecked\" &lt;&lt; \"-Xlint:deprecation\"\n        }\n    }\n}\n</code></pre>\n\n<p>More details about Gradle's Multi-Project Builds can be found <a href=\"https://docs.gradle.org/current/userguide/multi_project_builds.html\" rel=\"nofollow noreferrer\">here</a> on their official website</p>\n"},{"tags":[],"owner":{"account_id":29103520,"reputation":1,"user_id":22294840,"display_name":"J&#243;zef Pr&#243;chniewicz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700037717,"creation_date":1699461062,"answer_id":77447342,"question_id":24787751,"body_markdown":"This option now is moved to:\r\n\r\n&gt; File -&gt; Settings -&gt; Build, Execution, Deployment -&gt; Gradle-Android\r\n&gt; Compiler -&gt; Command-line Options:\r\n\r\n![Screen of settings][1] \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/EMIB7.png","title":"Compiler options missing in Android Studio &gt;= 0.8.2","body":"<p>This option now is moved to:</p>\n<blockquote>\n<p>File -&gt; Settings -&gt; Build, Execution, Deployment -&gt; Gradle-Android\nCompiler -&gt; Command-line Options:</p>\n</blockquote>\n<p><img src=\"https://i.stack.imgur.com/EMIB7.png\" alt=\"Screen of settings\" /></p>\n"}],"owner":{"account_id":1371468,"reputation":5748,"user_id":1306546,"accept_rate":79,"display_name":"Rens Verhage"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9813,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"answer_count":3,"score":10,"last_activity_date":1700037717,"creation_date":1405534053,"question_id":24787751,"body_markdown":"Recently I upgraded my `Android Studio` to `0.8.2`. Now, my android-annotations based project fails to build. It seems like annotation processing is disabled somehow. It seems the project compiler settings have been changed, the option to turn annotation processing on/off is nowhere to be found...\r\n\r\n![Compiler settings in 0.8.2][1]\r\n\r\n\r\nI can&#39;t expand the &#39;Compiler&#39; option as I could before:\r\n\r\n![Expected compiler settings][2]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/VYuea.png\r\n  [2]: http://i.stack.imgur.com/jjHgt.png\r\n\r\nWhere have they put these options?\r\n","title":"Compiler options missing in Android Studio &gt;= 0.8.2","body":"<p>Recently I upgraded my <code>Android Studio</code> to <code>0.8.2</code>. Now, my android-annotations based project fails to build. It seems like annotation processing is disabled somehow. It seems the project compiler settings have been changed, the option to turn annotation processing on/off is nowhere to be found...</p>\n\n<p><img src=\"https://i.stack.imgur.com/VYuea.png\" alt=\"Compiler settings in 0.8.2\"></p>\n\n<p>I can't expand the 'Compiler' option as I could before:</p>\n\n<p><img src=\"https://i.stack.imgur.com/jjHgt.png\" alt=\"Expected compiler settings\"></p>\n\n<p>Where have they put these options?</p>\n"},{"tags":["java","spring-boot","spring-data-jpa","criteriaquery","criteriabuilder"],"answers":[{"tags":[],"owner":{"account_id":2669818,"reputation":715,"user_id":2307460,"accept_rate":60,"display_name":"Yogesh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1685160369,"creation_date":1685160369,"answer_id":76345268,"question_id":76345153,"body_markdown":"Instead of `max` you have to use `greatest` for dates. `Max` is for Numeric types. refer below piece of code for reference\r\n\r\n    EntityManger em;      //to be injected or constructed\r\n    \r\n    CriteriaBuilder cb = em.getCriteriaBuilder();\r\n    CriteriaQuery&lt;Exam&gt; cq = cb.createQuery(Exam.class);\r\n    Subquery&lt;Date&gt; sq = cq.subquery(Date.class);\r\n    Root&lt;Exam&gt; s1 = cq.from(Exam.class);\r\n    Root&lt;Exam&gt; s2 = sq.from(Exam.class);\r\n    sq.select(cb.greatest(s2.get(Exam.end)));\r\n    List&lt;Exam&gt; result = em.createQuery(cq).getResultList();","title":"Error using criteriaBuilder.max() for LocalDate","body":"<p>Instead of <code>max</code> you have to use <code>greatest</code> for dates. <code>Max</code> is for Numeric types. refer below piece of code for reference</p>\n<pre><code>EntityManger em;      //to be injected or constructed\n\nCriteriaBuilder cb = em.getCriteriaBuilder();\nCriteriaQuery&lt;Exam&gt; cq = cb.createQuery(Exam.class);\nSubquery&lt;Date&gt; sq = cq.subquery(Date.class);\nRoot&lt;Exam&gt; s1 = cq.from(Exam.class);\nRoot&lt;Exam&gt; s2 = sq.from(Exam.class);\nsq.select(cb.greatest(s2.get(Exam.end)));\nList&lt;Exam&gt; result = em.createQuery(cq).getResultList();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5702540,"reputation":31,"user_id":4507091,"display_name":"RamChandra Ali"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700037688,"creation_date":1699614089,"answer_id":77459492,"question_id":76345153,"body_markdown":"This should work too:\r\n```\r\nsq.select(cb.max(s2.get(Exam.end)).as(LocalDate.class)));\r\n```","title":"Error using criteriaBuilder.max() for LocalDate","body":"<p>This should work too:</p>\n<pre><code>sq.select(cb.max(s2.get(Exam.end)).as(LocalDate.class)));\n</code></pre>\n"}],"owner":{"account_id":17497078,"reputation":1,"user_id":12688105,"display_name":"Vishal Naik"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":357,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1700037688,"creation_date":1685156112,"question_id":76345153,"body_markdown":"I am trying to get max date using criteria builder in a subquery.\r\nBut I am getting this error\r\n\r\n&gt; ```\r\n&gt; Required type: Expression &lt;LocalDate&gt;\r\n&gt; Provided: Expression &lt;Number&gt;\r\n&gt; ```\r\n \r\nThis is my code:\r\n\r\n```java\r\nSubquery&lt;LocalDate&gt; subRoot = criteriaQuery.subquery(LocalDate.class);\r\nsubRoot.select(criteriaBuilder.max(root.get(&quot;date&quot;)));\r\n```\r\n\r\nI am trying to get max date from sub query which is required in my parent query.","title":"Error using criteriaBuilder.max() for LocalDate","body":"<p>I am trying to get max date using criteria builder in a subquery.\nBut I am getting this error</p>\n<blockquote>\n<pre><code>Required type: Expression &lt;LocalDate&gt;\nProvided: Expression &lt;Number&gt;\n</code></pre>\n</blockquote>\n<p>This is my code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Subquery&lt;LocalDate&gt; subRoot = criteriaQuery.subquery(LocalDate.class);\nsubRoot.select(criteriaBuilder.max(root.get(&quot;date&quot;)));\n</code></pre>\n<p>I am trying to get max date from sub query which is required in my parent query.</p>\n"},{"tags":["java","spring","spring-boot","yaml"],"comments":[{"owner":{"account_id":1860365,"reputation":3145,"user_id":1685051,"display_name":"Mudassar"},"score":0,"creation_date":1466602008,"post_id":37969140,"comment_id":63384701,"body_markdown":"are you saying that later on when you do context.getBean(&quot;bean1&quot;); it doesnt work??","body":"are you saying that later on when you do context.getBean(&quot;bean1&quot;); it doesnt work??"},{"owner":{"account_id":3087074,"reputation":490,"user_id":2614015,"accept_rate":44,"display_name":"Maksim Prabarshchuk"},"score":0,"creation_date":1466602315,"post_id":37969140,"comment_id":63385012,"body_markdown":"@Mudassar yep, exactly","body":"@Mudassar yep, exactly"}],"answers":[{"tags":[],"owner":{"account_id":2073508,"reputation":2779,"user_id":1847482,"accept_rate":60,"display_name":"Alexander"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1466603971,"creation_date":1466603971,"answer_id":37970307,"question_id":37969140,"body_markdown":"You can use Spring Boot @ConditionalOnExpression annotation, not just in the @bean-annotated methods, but directly on classes as well:\r\n\r\n    @ConditionalOnExpression(&quot;${my.prop}&quot;)\r\n    @Component\r\n    class SomeBean1 implements SomeBean {}\r\n\r\n    @ConditionalOnExpression(&quot;!${my.prop}&quot;)\r\n    @Component\r\n    class SomeBean2 implements SomeBean {}\r\n\r\nHaving said this I personally prefer using pure Java:\r\n\r\n    @Value(&quot;${my.prop}&quot;) String myProp;\r\n    ...\r\n    @Bean SomeBean someBean() {\r\n        if (&quot;abc&quot;.equals(myProp)) {return new SomeBean1();} else {return new SomeBean2();}\r\n    }\r\n\r\n","title":"@ConditionalOnProperty for multi-valued properies","body":"<p>You can use Spring Boot @ConditionalOnExpression annotation, not just in the @bean-annotated methods, but directly on classes as well:</p>\n\n<pre><code>@ConditionalOnExpression(\"${my.prop}\")\n@Component\nclass SomeBean1 implements SomeBean {}\n\n@ConditionalOnExpression(\"!${my.prop}\")\n@Component\nclass SomeBean2 implements SomeBean {}\n</code></pre>\n\n<p>Having said this I personally prefer using pure Java:</p>\n\n<pre><code>@Value(\"${my.prop}\") String myProp;\n...\n@Bean SomeBean someBean() {\n    if (\"abc\".equals(myProp)) {return new SomeBean1();} else {return new SomeBean2();}\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3087074,"reputation":490,"user_id":2614015,"accept_rate":44,"display_name":"Maksim Prabarshchuk"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1466672601,"creation_date":1466672601,"answer_id":37986942,"question_id":37969140,"body_markdown":"It looks like @ConditionalOnProperty haven&#39;t multivalued properies.\r\nIn spring environment they are presented as\r\n\r\n    prop[0]=a\r\n    prop[1]=b\r\n\r\nMy solution is to make my own @Conditional extension, that is able to work with multivalued properies. Here is the example.\r\n\r\nAnnotation:\r\n\r\n    @Retention(RetentionPolicy.RUNTIME)\r\n    @Target({ ElementType.TYPE, ElementType.METHOD })\r\n    @Documented\r\n    @Conditional(OnPropertyCondition.class)\r\n    public @interface ConditionalOnProperty2 {\r\n        String name();\r\n        String value();\r\n    }\r\nCondition:\r\n\r\n    class OnPropertyCondition implements Condition {\r\n        @Override\r\n        public boolean matches(ConditionContext context, AnnotatedTypeMetadata metadata) {\r\n            String name = attribute(metadata, &quot;name&quot;);\r\n            String value = attribute(metadata, &quot;value&quot;);\r\n    \r\n            String searchName = name;\r\n            String property = property(context, searchName);\r\n            int i = 0;\r\n            do {\r\n                if (value.equals(property)) return true;\r\n                searchName = name + &#39;[&#39; + i++ + &#39;]&#39;;\r\n            } while ((property = property(context, searchName)) != null);\r\n            return false;\r\n        }\r\n    \r\n        private String attribute(AnnotatedTypeMetadata metadata, String name) {\r\n            return (String) metadata.getAnnotationAttributes(ConditionalOnProperty2.class.getName()).get(name);\r\n        }\r\n    \r\n        private String property(ConditionContext context, String name) {\r\n            return context.getEnvironment().getProperty(name);\r\n        }\r\n    }\r\nUsage:\r\n   \r\n\r\n     @Bean\r\n     @ConditionalOnProperty2(name = &quot;prop&quot;, havingValue = &quot;a&quot;)\r\n     public SomeBean bean1() {\r\n         return new SomeBean1();\r\n     }\r\n     \r\n     @Bean\r\n     @ConditionalOnProperty2(name = &quot;prop&quot;, havingValue = &quot;b&quot;)\r\n     public SomeBean bean2() {\r\n         return new SomeBean2();\r\n     }","title":"@ConditionalOnProperty for multi-valued properies","body":"<p>It looks like @ConditionalOnProperty haven't multivalued properies.\nIn spring environment they are presented as</p>\n\n<pre><code>prop[0]=a\nprop[1]=b\n</code></pre>\n\n<p>My solution is to make my own @Conditional extension, that is able to work with multivalued properies. Here is the example.</p>\n\n<p>Annotation:</p>\n\n<pre><code>@Retention(RetentionPolicy.RUNTIME)\n@Target({ ElementType.TYPE, ElementType.METHOD })\n@Documented\n@Conditional(OnPropertyCondition.class)\npublic @interface ConditionalOnProperty2 {\n    String name();\n    String value();\n}\n</code></pre>\n\n<p>Condition:</p>\n\n<pre><code>class OnPropertyCondition implements Condition {\n    @Override\n    public boolean matches(ConditionContext context, AnnotatedTypeMetadata metadata) {\n        String name = attribute(metadata, \"name\");\n        String value = attribute(metadata, \"value\");\n\n        String searchName = name;\n        String property = property(context, searchName);\n        int i = 0;\n        do {\n            if (value.equals(property)) return true;\n            searchName = name + '[' + i++ + ']';\n        } while ((property = property(context, searchName)) != null);\n        return false;\n    }\n\n    private String attribute(AnnotatedTypeMetadata metadata, String name) {\n        return (String) metadata.getAnnotationAttributes(ConditionalOnProperty2.class.getName()).get(name);\n    }\n\n    private String property(ConditionContext context, String name) {\n        return context.getEnvironment().getProperty(name);\n    }\n}\n</code></pre>\n\n<p>Usage:</p>\n\n<pre><code> @Bean\n @ConditionalOnProperty2(name = \"prop\", havingValue = \"a\")\n public SomeBean bean1() {\n     return new SomeBean1();\n }\n\n @Bean\n @ConditionalOnProperty2(name = \"prop\", havingValue = \"b\")\n public SomeBean bean2() {\n     return new SomeBean2();\n }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18612517,"reputation":1,"user_id":13564528,"display_name":"Reminis"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1668407935,"creation_date":1668407935,"answer_id":74427743,"question_id":37969140,"body_markdown":"`havingValue` doesn&#39;t mean that a object has this value. It means that the value we get from this key equals `havingValue` or not.\r\n\r\nso, a list object `prop` neither equals `a` nor `b`, it equals `[a, b]`. Both of them will not be load.","title":"@ConditionalOnProperty for multi-valued properies","body":"<p><code>havingValue</code> doesn't mean that a object has this value. It means that the value we get from this key equals <code>havingValue</code> or not.</p>\n<p>so, a list object <code>prop</code> neither equals <code>a</code> nor <code>b</code>, it equals <code>[a, b]</code>. Both of them will not be load.</p>\n"},{"tags":[],"owner":{"account_id":892699,"reputation":41,"user_id":930662,"display_name":"Kobi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700037519,"creation_date":1699522512,"answer_id":77451983,"question_id":37969140,"body_markdown":"I think the comment of Thiagarajan Ramanathan is very helpful and answers the question:\r\n```\r\n @ConditionalOnExpression(&quot;&#39;${vault.environment.type}&#39;.contains(&#39;MAP&#39;)&quot;) \r\n```\r\nworked for me. ","title":"@ConditionalOnProperty for multi-valued properies","body":"<p>I think the comment of Thiagarajan Ramanathan is very helpful and answers the question:</p>\n<pre><code> @ConditionalOnExpression(&quot;'${vault.environment.type}'.contains('MAP')&quot;) \n</code></pre>\n<p>worked for me.</p>\n"}],"owner":{"account_id":3087074,"reputation":490,"user_id":2614015,"accept_rate":44,"display_name":"Maksim Prabarshchuk"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":16802,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"answer_count":4,"score":10,"last_activity_date":1700037519,"creation_date":1466601183,"question_id":37969140,"body_markdown":"Is there any way to use @ConditionalOnProperty annotation based on multi-valued property?\r\n\r\nSpring configuration:\r\n\r\n    @Bean\r\n    @ConditionalOnProperty(name = &quot;prop&quot;, havingValue = &quot;a&quot;)\r\n    public SomeBean bean1() {\r\n        return new SomeBean1();\r\n    }\r\n\r\n    @Bean\r\n    @ConditionalOnProperty(name = &quot;prop&quot;, havingValue = &quot;b&quot;)\r\n    public SomeBean bean2() {\r\n        return new SomeBean2();\r\n    }\r\n\r\nand application.yaml\r\n\r\n    prop: \r\n     - a\r\n     - b\r\n\r\nI expect that both beans: bean1 and bean2 will be registered in the spring context, but no one from them isn&#39;t registered. Is there any way to do it?\r\n","title":"@ConditionalOnProperty for multi-valued properies","body":"<p>Is there any way to use @ConditionalOnProperty annotation based on multi-valued property?</p>\n\n<p>Spring configuration:</p>\n\n<pre><code>@Bean\n@ConditionalOnProperty(name = \"prop\", havingValue = \"a\")\npublic SomeBean bean1() {\n    return new SomeBean1();\n}\n\n@Bean\n@ConditionalOnProperty(name = \"prop\", havingValue = \"b\")\npublic SomeBean bean2() {\n    return new SomeBean2();\n}\n</code></pre>\n\n<p>and application.yaml</p>\n\n<pre><code>prop: \n - a\n - b\n</code></pre>\n\n<p>I expect that both beans: bean1 and bean2 will be registered in the spring context, but no one from them isn't registered. Is there any way to do it?</p>\n"},{"tags":["java","certificate"],"comments":[{"owner":{"account_id":7567,"reputation":10188,"user_id":13189,"accept_rate":75,"display_name":"eckes"},"score":0,"creation_date":1458698307,"post_id":1270703,"comment_id":59974152,"body_markdown":"This Java demo (URLConnection) program connects to a https url and prints/calculates all kinds of fingerprints, including pin-sha256, SKI and Thumbprints: https://github.com/ecki/JavaCryptoTest/blob/master/src/main/java/net/eckenfels/test/ssl/UrlInspect.java","body":"This Java demo (URLConnection) program connects to a https url and prints/calculates all kinds of fingerprints, including pin-sha256, SKI and Thumbprints: <a href=\"https://github.com/ecki/JavaCryptoTest/blob/master/src/main/java/net/eckenfels/test/ssl/UrlInspect.java\" rel=\"nofollow noreferrer\">github.com/ecki/JavaCryptoTest/blob/master/src/main/java/net&zwnj;&#8203;/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":50238,"reputation":74702,"user_id":149808,"accept_rate":81,"display_name":"ZZ Coder"},"down_vote_count":2,"up_vote_count":87,"is_accepted":true,"score":85,"last_activity_date":1509234191,"creation_date":1250158674,"answer_id":1271148,"question_id":1270703,"body_markdown":"The SHA-1 hash of the [DER encoding][1] of the certificate is what .NET is getting with **X509Certificate2.Thumbprint**.\r\n\r\nAs noted on the [remarks on MSDN](https://msdn.microsoft.com/en-us/library/system.security.cryptography.x509certificates.x509certificate2.thumbprint.aspx#Remarks):\r\n\r\n&gt; The thumbprint is dynamically generated using the SHA1 algorithm and does not physically exist in the certificate. Since the thumbprint is a unique value for the certificate, it is commonly used to find a particular certificate in a certificate store.\r\n\r\nJava&#39;s standard library doesn&#39;t provide the thumbprint directly, but you can get it like this:\r\n\r\n    DatatypeConverter.printHexBinary(\r\n            MessageDigest.getInstance(&quot;SHA-1&quot;).digest(\r\n                    cert.getEncoded())).toLowerCase();\r\n\r\nHere&#39;s a full worked example using a conveniently accessible PEM file:\r\n\r\n1. Create **stackoverflow.crt.pem**:\r\n\r\n        -----BEGIN CERTIFICATE-----\r\n        MIIHHjCCBgagAwIBAgIQDhG71w1UtxDQxvVAtrUspDANBgkqhkiG9w0BAQsFADBw\r\n        MQswCQYDVQQGEwJVUzEVMBMGA1UEChMMRGlnaUNlcnQgSW5jMRkwFwYDVQQLExB3\r\n        d3cuZGlnaWNlcnQuY29tMS8wLQYDVQQDEyZEaWdpQ2VydCBTSEEyIEhpZ2ggQXNz\r\n        dXJhbmNlIFNlcnZlciBDQTAeFw0xNjA1MjEwMDAwMDBaFw0xOTA4MTQxMjAwMDBa\r\n        MGoxCzAJBgNVBAYTAlVTMQswCQYDVQQIEwJOWTERMA8GA1UEBxMITmV3IFlvcmsx\r\n        HTAbBgNVBAoTFFN0YWNrIEV4Y2hhbmdlLCBJbmMuMRwwGgYDVQQDDBMqLnN0YWNr\r\n        ZXhjaGFuZ2UuY29tMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAr0YD\r\n        zscT5i6T2FaRsTGNCiLB8OtPXu8N9iAyuaROh/nS0kRRsN8wUMk1TmgZhPuYM6oF\r\n        S377V8W2LqhLBMrPXi7lnhvKt2DFWCyw38RrDbEsM5dzVGErmhux3F0QqcTI92zj\r\n        VW61DmE7NSQLiR4yonVpTpdAaO4jSPJxn8d+4p1sIlU2JGSk8LZSWFqaROc7KtXt\r\n        lWP4HahNRZtdwvL5dIEGGNWx+7B+XVAfY1ygc/UisldkA+a3D2+3WAtXgFZRZZ/1\r\n        CWFjKWJNMAI6ZBAtlbgSNgRYxdcdleIhPLCzkzWysfltfiBmsmgz6VCoFR4KgJo8\r\n        Gd3MeTWojBthM10SLwIDAQABo4IDuDCCA7QwHwYDVR0jBBgwFoAUUWj/kK8CB3U8\r\n        zNllZGKiErhZcjswHQYDVR0OBBYEFFrBQmPCYhOznZSEqjIeF8tto4Z7MIIB6AYD\r\n        VR0RBIIB3zCCAduCEyouc3RhY2tleGNoYW5nZS5jb22CEXN0YWNrb3ZlcmZsb3cu\r\n        Y29tghMqLnN0YWNrb3ZlcmZsb3cuY29tgg1zdGFja2F1dGguY29tggtzc3RhdGlj\r\n        Lm5ldIINKi5zc3RhdGljLm5ldIIPc2VydmVyZmF1bHQuY29tghEqLnNlcnZlcmZh\r\n        dWx0LmNvbYINc3VwZXJ1c2VyLmNvbYIPKi5zdXBlcnVzZXIuY29tgg1zdGFja2Fw\r\n        cHMuY29tghRvcGVuaWQuc3RhY2thdXRoLmNvbYIRc3RhY2tleGNoYW5nZS5jb22C\r\n        GCoubWV0YS5zdGFja2V4Y2hhbmdlLmNvbYIWbWV0YS5zdGFja2V4Y2hhbmdlLmNv\r\n        bYIQbWF0aG92ZXJmbG93Lm5ldIISKi5tYXRob3ZlcmZsb3cubmV0gg1hc2t1YnVu\r\n        dHUuY29tgg8qLmFza3VidW50dS5jb22CEXN0YWNrc25pcHBldHMubmV0ghIqLmJs\r\n        b2dvdmVyZmxvdy5jb22CEGJsb2dvdmVyZmxvdy5jb22CGCoubWV0YS5zdGFja292\r\n        ZXJmbG93LmNvbYIVKi5zdGFja292ZXJmbG93LmVtYWlsghNzdGFja292ZXJmbG93\r\n        LmVtYWlsMA4GA1UdDwEB/wQEAwIFoDAdBgNVHSUEFjAUBggrBgEFBQcDAQYIKwYB\r\n        BQUHAwIwdQYDVR0fBG4wbDA0oDKgMIYuaHR0cDovL2NybDMuZGlnaWNlcnQuY29t\r\n        L3NoYTItaGEtc2VydmVyLWc1LmNybDA0oDKgMIYuaHR0cDovL2NybDQuZGlnaWNl\r\n        cnQuY29tL3NoYTItaGEtc2VydmVyLWc1LmNybDBMBgNVHSAERTBDMDcGCWCGSAGG\r\n        /WwBATAqMCgGCCsGAQUFBwIBFhxodHRwczovL3d3dy5kaWdpY2VydC5jb20vQ1BT\r\n        MAgGBmeBDAECAjCBgwYIKwYBBQUHAQEEdzB1MCQGCCsGAQUFBzABhhhodHRwOi8v\r\n        b2NzcC5kaWdpY2VydC5jb20wTQYIKwYBBQUHMAKGQWh0dHA6Ly9jYWNlcnRzLmRp\r\n        Z2ljZXJ0LmNvbS9EaWdpQ2VydFNIQTJIaWdoQXNzdXJhbmNlU2VydmVyQ0EuY3J0\r\n        MAwGA1UdEwEB/wQCMAAwDQYJKoZIhvcNAQELBQADggEBAAzJAMGSdKoX1frdqNlN\r\n        iXu8Gcbsm/DxWMXpcTXlZn8s+/qQQoc+/3o0CK3C8/j9n5DmsYa88P6Ntt5ysDs+\r\n        b0ynXFva4CAEyKaoPM4SIpOjwfWBRSUOqAIkQO2/LhKBwT/EnpaIHIKGnI0UdXLQ\r\n        oDfkMDg6mgJsEBsKdKF5EfEX7iU3NO5xVJPJE8/R0btLAdYwxB9S6fSpCXGe2HqQ\r\n        D101O/7/4MWNdFSbfdDSFcn5oEm+idimrqiNrF5knmuJy4qPBkL7thNuGK6rvYCF\r\n        ZJM03ZEZhkQmn2jG/7LgjfwZmvfcITeADCpylf88bL+lf+vxe6cCl9CyqWgBDpsI\r\n        xpE=\r\n        -----END CERTIFICATE-----\r\n\r\n\r\n1. Create **X509.java**:\r\n\r\n        import javax.xml.bind.DatatypeConverter;\r\n        import java.io.FileInputStream;\r\n        import java.io.FileNotFoundException;\r\n        import java.security.MessageDigest;\r\n        import java.security.NoSuchAlgorithmException;\r\n        import java.security.cert.CertificateEncodingException;\r\n        import java.security.cert.CertificateException;\r\n        import java.security.cert.CertificateFactory;\r\n        import java.security.cert.X509Certificate;\r\n    \r\n        public final class X509 {\r\n            public static void main(String[] args)\r\n                    throws FileNotFoundException, CertificateException, NoSuchAlgorithmException {\r\n                FileInputStream is = new FileInputStream(args[0]);\r\n                CertificateFactory certificateFactory = CertificateFactory.getInstance(&quot;X.509&quot;);\r\n                X509Certificate cert = (X509Certificate) certificateFactory.generateCertificate(is);\r\n                String thumbprint = getThumbprint(cert);\r\n                System.out.println(thumbprint);\r\n            }\r\n    \r\n            private static String getThumbprint(X509Certificate cert)\r\n                    throws NoSuchAlgorithmException, CertificateEncodingException {\r\n                MessageDigest md = MessageDigest.getInstance(&quot;SHA-1&quot;);\r\n                byte[] der = cert.getEncoded();\r\n                md.update(der);\r\n                byte[] digest = md.digest();\r\n                String digestHex = DatatypeConverter.printHexBinary(digest);\r\n                return digestHex.toLowerCase();\r\n            }\r\n        }\r\n\r\n1. Compile the program with Java 8:\r\n\r\n        javac X509.java\r\n\r\n   Or Java 9 - due to modular JDK/JPMS - **DataTypeConverter** is not in **java.base**, but **java.xml.bind**, so you need to explicitly depend on it during your build:\r\n\r\n        javac --add-modules java.xml.bind X509.java\r\n\r\n   Otherwise, on Java 9, you get this when you try to build it:\r\n\r\n        X509.java:3: error: package javax.xml.bind is not visible\r\n                import javax.xml.bind.DatatypeConverter;\r\n                ^\r\n                (package javax.xml.bind is declared in module java.xml.bind, which is not in the module graph)\r\n                1 error\r\n\r\n1. Run it with Java 8:\r\n\r\n        java X509 stackoverflow.crt.pem\r\n\r\n   In Java 9 - due to modular JDK/JPMS - **DataTypeConverter** is not in **java.base**, but **java.xml.bind**, so you need to explicitly depend on it when running your program:\r\n\r\n        java --add-modules java.xml.bind X509 stackoverflow.crt.pem\r\n\r\n   Otherwise, on Java 9, you get this when you try to run it:\r\n\r\n        Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: javax/xml/bind/DatatypeConverter\r\n            at X509.getThumbPrint(X509.java:29)\r\n            at X509.main(X509.java:19)\r\n            Caused by: java.lang.ClassNotFoundException: javax.xml.bind.DatatypeConverter\r\n            at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:582)\r\n            at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:185)\r\n            at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:496)\r\n            ... 2 more\r\n\r\n1. Get the expected output:\r\n\r\n        47adb03649a2eb18f63ffa29790818349a99cab7\r\n\r\n  [1]: https://en.wikipedia.org/wiki/X.690#DER_encoding","title":"How to retrieve/compute an X509 certificate&#39;s thumbprint in Java?","body":"<p>The SHA-1 hash of the <a href=\"https://en.wikipedia.org/wiki/X.690#DER_encoding\" rel=\"noreferrer\">DER encoding</a> of the certificate is what .NET is getting with <strong>X509Certificate2.Thumbprint</strong>.</p>\n\n<p>As noted on the <a href=\"https://msdn.microsoft.com/en-us/library/system.security.cryptography.x509certificates.x509certificate2.thumbprint.aspx#Remarks\" rel=\"noreferrer\">remarks on MSDN</a>:</p>\n\n<blockquote>\n  <p>The thumbprint is dynamically generated using the SHA1 algorithm and does not physically exist in the certificate. Since the thumbprint is a unique value for the certificate, it is commonly used to find a particular certificate in a certificate store.</p>\n</blockquote>\n\n<p>Java's standard library doesn't provide the thumbprint directly, but you can get it like this:</p>\n\n<pre><code>DatatypeConverter.printHexBinary(\n        MessageDigest.getInstance(\"SHA-1\").digest(\n                cert.getEncoded())).toLowerCase();\n</code></pre>\n\n<p>Here's a full worked example using a conveniently accessible PEM file:</p>\n\n<ol>\n<li><p>Create <strong>stackoverflow.crt.pem</strong>:</p>\n\n<pre><code>-----BEGIN CERTIFICATE-----\nMIIHHjCCBgagAwIBAgIQDhG71w1UtxDQxvVAtrUspDANBgkqhkiG9w0BAQsFADBw\nMQswCQYDVQQGEwJVUzEVMBMGA1UEChMMRGlnaUNlcnQgSW5jMRkwFwYDVQQLExB3\nd3cuZGlnaWNlcnQuY29tMS8wLQYDVQQDEyZEaWdpQ2VydCBTSEEyIEhpZ2ggQXNz\ndXJhbmNlIFNlcnZlciBDQTAeFw0xNjA1MjEwMDAwMDBaFw0xOTA4MTQxMjAwMDBa\nMGoxCzAJBgNVBAYTAlVTMQswCQYDVQQIEwJOWTERMA8GA1UEBxMITmV3IFlvcmsx\nHTAbBgNVBAoTFFN0YWNrIEV4Y2hhbmdlLCBJbmMuMRwwGgYDVQQDDBMqLnN0YWNr\nZXhjaGFuZ2UuY29tMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAr0YD\nzscT5i6T2FaRsTGNCiLB8OtPXu8N9iAyuaROh/nS0kRRsN8wUMk1TmgZhPuYM6oF\nS377V8W2LqhLBMrPXi7lnhvKt2DFWCyw38RrDbEsM5dzVGErmhux3F0QqcTI92zj\nVW61DmE7NSQLiR4yonVpTpdAaO4jSPJxn8d+4p1sIlU2JGSk8LZSWFqaROc7KtXt\nlWP4HahNRZtdwvL5dIEGGNWx+7B+XVAfY1ygc/UisldkA+a3D2+3WAtXgFZRZZ/1\nCWFjKWJNMAI6ZBAtlbgSNgRYxdcdleIhPLCzkzWysfltfiBmsmgz6VCoFR4KgJo8\nGd3MeTWojBthM10SLwIDAQABo4IDuDCCA7QwHwYDVR0jBBgwFoAUUWj/kK8CB3U8\nzNllZGKiErhZcjswHQYDVR0OBBYEFFrBQmPCYhOznZSEqjIeF8tto4Z7MIIB6AYD\nVR0RBIIB3zCCAduCEyouc3RhY2tleGNoYW5nZS5jb22CEXN0YWNrb3ZlcmZsb3cu\nY29tghMqLnN0YWNrb3ZlcmZsb3cuY29tgg1zdGFja2F1dGguY29tggtzc3RhdGlj\nLm5ldIINKi5zc3RhdGljLm5ldIIPc2VydmVyZmF1bHQuY29tghEqLnNlcnZlcmZh\ndWx0LmNvbYINc3VwZXJ1c2VyLmNvbYIPKi5zdXBlcnVzZXIuY29tgg1zdGFja2Fw\ncHMuY29tghRvcGVuaWQuc3RhY2thdXRoLmNvbYIRc3RhY2tleGNoYW5nZS5jb22C\nGCoubWV0YS5zdGFja2V4Y2hhbmdlLmNvbYIWbWV0YS5zdGFja2V4Y2hhbmdlLmNv\nbYIQbWF0aG92ZXJmbG93Lm5ldIISKi5tYXRob3ZlcmZsb3cubmV0gg1hc2t1YnVu\ndHUuY29tgg8qLmFza3VidW50dS5jb22CEXN0YWNrc25pcHBldHMubmV0ghIqLmJs\nb2dvdmVyZmxvdy5jb22CEGJsb2dvdmVyZmxvdy5jb22CGCoubWV0YS5zdGFja292\nZXJmbG93LmNvbYIVKi5zdGFja292ZXJmbG93LmVtYWlsghNzdGFja292ZXJmbG93\nLmVtYWlsMA4GA1UdDwEB/wQEAwIFoDAdBgNVHSUEFjAUBggrBgEFBQcDAQYIKwYB\nBQUHAwIwdQYDVR0fBG4wbDA0oDKgMIYuaHR0cDovL2NybDMuZGlnaWNlcnQuY29t\nL3NoYTItaGEtc2VydmVyLWc1LmNybDA0oDKgMIYuaHR0cDovL2NybDQuZGlnaWNl\ncnQuY29tL3NoYTItaGEtc2VydmVyLWc1LmNybDBMBgNVHSAERTBDMDcGCWCGSAGG\n/WwBATAqMCgGCCsGAQUFBwIBFhxodHRwczovL3d3dy5kaWdpY2VydC5jb20vQ1BT\nMAgGBmeBDAECAjCBgwYIKwYBBQUHAQEEdzB1MCQGCCsGAQUFBzABhhhodHRwOi8v\nb2NzcC5kaWdpY2VydC5jb20wTQYIKwYBBQUHMAKGQWh0dHA6Ly9jYWNlcnRzLmRp\nZ2ljZXJ0LmNvbS9EaWdpQ2VydFNIQTJIaWdoQXNzdXJhbmNlU2VydmVyQ0EuY3J0\nMAwGA1UdEwEB/wQCMAAwDQYJKoZIhvcNAQELBQADggEBAAzJAMGSdKoX1frdqNlN\niXu8Gcbsm/DxWMXpcTXlZn8s+/qQQoc+/3o0CK3C8/j9n5DmsYa88P6Ntt5ysDs+\nb0ynXFva4CAEyKaoPM4SIpOjwfWBRSUOqAIkQO2/LhKBwT/EnpaIHIKGnI0UdXLQ\noDfkMDg6mgJsEBsKdKF5EfEX7iU3NO5xVJPJE8/R0btLAdYwxB9S6fSpCXGe2HqQ\nD101O/7/4MWNdFSbfdDSFcn5oEm+idimrqiNrF5knmuJy4qPBkL7thNuGK6rvYCF\nZJM03ZEZhkQmn2jG/7LgjfwZmvfcITeADCpylf88bL+lf+vxe6cCl9CyqWgBDpsI\nxpE=\n-----END CERTIFICATE-----\n</code></pre></li>\n<li><p>Create <strong>X509.java</strong>:</p>\n\n<pre><code>import javax.xml.bind.DatatypeConverter;\nimport java.io.FileInputStream;\nimport java.io.FileNotFoundException;\nimport java.security.MessageDigest;\nimport java.security.NoSuchAlgorithmException;\nimport java.security.cert.CertificateEncodingException;\nimport java.security.cert.CertificateException;\nimport java.security.cert.CertificateFactory;\nimport java.security.cert.X509Certificate;\n\npublic final class X509 {\n    public static void main(String[] args)\n            throws FileNotFoundException, CertificateException, NoSuchAlgorithmException {\n        FileInputStream is = new FileInputStream(args[0]);\n        CertificateFactory certificateFactory = CertificateFactory.getInstance(\"X.509\");\n        X509Certificate cert = (X509Certificate) certificateFactory.generateCertificate(is);\n        String thumbprint = getThumbprint(cert);\n        System.out.println(thumbprint);\n    }\n\n    private static String getThumbprint(X509Certificate cert)\n            throws NoSuchAlgorithmException, CertificateEncodingException {\n        MessageDigest md = MessageDigest.getInstance(\"SHA-1\");\n        byte[] der = cert.getEncoded();\n        md.update(der);\n        byte[] digest = md.digest();\n        String digestHex = DatatypeConverter.printHexBinary(digest);\n        return digestHex.toLowerCase();\n    }\n}\n</code></pre></li>\n<li><p>Compile the program with Java 8:</p>\n\n<pre><code>javac X509.java\n</code></pre>\n\n<p>Or Java 9 - due to modular JDK/JPMS - <strong>DataTypeConverter</strong> is not in <strong>java.base</strong>, but <strong>java.xml.bind</strong>, so you need to explicitly depend on it during your build:</p>\n\n<pre><code>javac --add-modules java.xml.bind X509.java\n</code></pre>\n\n<p>Otherwise, on Java 9, you get this when you try to build it:</p>\n\n<pre><code>X509.java:3: error: package javax.xml.bind is not visible\n        import javax.xml.bind.DatatypeConverter;\n        ^\n        (package javax.xml.bind is declared in module java.xml.bind, which is not in the module graph)\n        1 error\n</code></pre></li>\n<li><p>Run it with Java 8:</p>\n\n<pre><code>java X509 stackoverflow.crt.pem\n</code></pre>\n\n<p>In Java 9 - due to modular JDK/JPMS - <strong>DataTypeConverter</strong> is not in <strong>java.base</strong>, but <strong>java.xml.bind</strong>, so you need to explicitly depend on it when running your program:</p>\n\n<pre><code>java --add-modules java.xml.bind X509 stackoverflow.crt.pem\n</code></pre>\n\n<p>Otherwise, on Java 9, you get this when you try to run it:</p>\n\n<pre><code>Exception in thread \"main\" java.lang.NoClassDefFoundError: javax/xml/bind/DatatypeConverter\n    at X509.getThumbPrint(X509.java:29)\n    at X509.main(X509.java:19)\n    Caused by: java.lang.ClassNotFoundException: javax.xml.bind.DatatypeConverter\n    at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:582)\n    at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:185)\n    at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:496)\n    ... 2 more\n</code></pre></li>\n<li><p>Get the expected output:</p>\n\n<pre><code>47adb03649a2eb18f63ffa29790818349a99cab7\n</code></pre></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":603447,"reputation":53,"user_id":305159,"display_name":"Clarence "},"down_vote_count":4,"up_vote_count":6,"is_accepted":false,"score":2,"last_activity_date":1460246825,"creation_date":1269957305,"answer_id":2545730,"question_id":1270703,"body_markdown":"You can generate the thumbprint by using the openssl command, so example if you have the pem format of the certificate in a file (file.txt)\r\n\r\nthen:\r\n\r\n`cat file.txt | openssl x509 -sha1 -fingerprint` - this would generate the same thumbprint","title":"How to retrieve/compute an X509 certificate&#39;s thumbprint in Java?","body":"<p>You can generate the thumbprint by using the openssl command, so example if you have the pem format of the certificate in a file (file.txt)</p>\n\n<p>then:</p>\n\n<p><code>cat file.txt | openssl x509 -sha1 -fingerprint</code> - this would generate the same thumbprint</p>\n"},{"tags":[],"owner":{"account_id":109369,"reputation":3006,"user_id":289827,"accept_rate":47,"display_name":"Martin Ždila"},"down_vote_count":0,"up_vote_count":52,"is_accepted":false,"score":52,"last_activity_date":1374592346,"creation_date":1374592346,"answer_id":17814152,"question_id":1270703,"body_markdown":"Using Apache Commons Codec you can do:\r\n\r\n    DigestUtils.sha1Hex(cert.getEncoded())\r\n\r\n","title":"How to retrieve/compute an X509 certificate&#39;s thumbprint in Java?","body":"<p>Using Apache Commons Codec you can do:</p>\n\n<pre><code>DigestUtils.sha1Hex(cert.getEncoded())\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2271010,"reputation":12268,"user_id":1998422,"accept_rate":60,"display_name":"Ahmad Abdelghany"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1603379076,"creation_date":1513936812,"answer_id":47939494,"question_id":1270703,"body_markdown":"One-liner using Google&#39;s [Guava][1]\r\n\r\n    Hashing.sha256().hashBytes(cert.getEncoded()).toString();\r\n\r\n  [1]: https://github.com/google/guava","title":"How to retrieve/compute an X509 certificate&#39;s thumbprint in Java?","body":"<p>One-liner using Google's <a href=\"https://github.com/google/guava\" rel=\"nofollow noreferrer\">Guava</a></p>\n<pre><code>Hashing.sha256().hashBytes(cert.getEncoded()).toString();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5714780,"reputation":5395,"user_id":4515438,"accept_rate":0,"display_name":"Vahe Gharibyan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1579952047,"creation_date":1579952047,"answer_id":59908805,"question_id":1270703,"body_markdown":"Short example without using any libraries.\r\n\r\n\r\n    object MessageDigestUtil {\r\n    \r\n        private val hexCode = &quot;0123456789ABCDEF&quot;.toCharArray()\r\n    \r\n        fun sha1(input: ByteArray): ByteArray {\r\n            return digest(input,&quot;SHA-1&quot;)\r\n        }\r\n    \r\n        @Throws(NoSuchAlgorithmException::class)\r\n        fun getFingerprint(publicKey: PublicKey): String? {\r\n            return printHexBinary(sha1(publicKey.encoded))\r\n        }\r\n    \r\n        private fun printHexBinary(data: ByteArray): String {\r\n            val r = StringBuilder(data.size * 2)\r\n            for (b in data) {\r\n                r.append(hexCode[b.toInt() shr 4 and 0xF])\r\n                r.append(hexCode[(b and 0xF).toInt()])\r\n            }\r\n            return r.toString()\r\n        }\r\n    \r\n        @Throws(NoSuchAlgorithmException::class)\r\n        private fun digest(input: ByteArray, algorithm: String): ByteArray {\r\n            val digest = MessageDigest.getInstance(algorithm)\r\n            digest.update(input)\r\n            return digest.digest()\r\n        }\r\n    }","title":"How to retrieve/compute an X509 certificate&#39;s thumbprint in Java?","body":"<p>Short example without using any libraries.</p>\n\n<pre><code>object MessageDigestUtil {\n\n    private val hexCode = \"0123456789ABCDEF\".toCharArray()\n\n    fun sha1(input: ByteArray): ByteArray {\n        return digest(input,\"SHA-1\")\n    }\n\n    @Throws(NoSuchAlgorithmException::class)\n    fun getFingerprint(publicKey: PublicKey): String? {\n        return printHexBinary(sha1(publicKey.encoded))\n    }\n\n    private fun printHexBinary(data: ByteArray): String {\n        val r = StringBuilder(data.size * 2)\n        for (b in data) {\n            r.append(hexCode[b.toInt() shr 4 and 0xF])\n            r.append(hexCode[(b and 0xF).toInt()])\n        }\n        return r.toString()\n    }\n\n    @Throws(NoSuchAlgorithmException::class)\n    private fun digest(input: ByteArray, algorithm: String): ByteArray {\n        val digest = MessageDigest.getInstance(algorithm)\n        digest.update(input)\n        return digest.digest()\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14035506,"reputation":81,"user_id":10138318,"display_name":"teejar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700037470,"creation_date":1700036655,"answer_id":77486159,"question_id":1270703,"body_markdown":"If you stumbled to this thread while having problems how to generate the correct thumbprint for MSGraph API which is base64 encoded [as stated in this document.][1]\r\n\r\nThis will generate correct x5t header parameter. \r\n\r\n    import java.io.FileInputStream;\r\n    import java.security.NoSuchAlgorithmException;\r\n    import java.security.cert.CertificateEncodingException;\r\n    import java.security.cert.X509Certificate;\r\n    import java.security.cert.CertificateFactory;\r\n    import java.util.Base64;\r\n    \r\n    X509Certificate cert = getPublicKey();\r\n    \r\n    String thumbprint = getThumbprint(cert); // base64 encoded thumbprint\r\n        \r\n    X509Certificate getPublicKey() {\r\n        try (FileInputStream inStream = new FileInputStream(&quot;{your .crt or .cer file here}&quot;)) {\r\n\r\n            CertificateFactory cf = CertificateFactory.getInstance(&quot;X.509&quot;);\r\n            X509Certificate cert = (X509Certificate) cf.generateCertificate(inStream);\r\n\r\n            return cert;\r\n        } catch (Exception e) {\r\n            System.out.println(&quot;no file!&quot;);\r\n            return null;\r\n        }\r\n    }\r\n\r\n    String getThumbprint(X509Certificate cert) {\r\n        try {\r\n            return Base64.getEncoder().encodeToString(getHash(cert));\r\n        } catch (Exception e) {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    static byte[] getHash(X509Certificate cert) throws NoSuchAlgorithmException, CertificateEncodingException {\r\n        final MessageDigest md = MessageDigest.getInstance(&quot;SHA-1&quot;);\r\n        md.update(cert.getEncoded());\r\n        return md.digest();\r\n    }\r\n\r\n\r\n  [1]: https://learn.microsoft.com/en-us/entra/identity-platform/certificate-credentials","title":"How to retrieve/compute an X509 certificate&#39;s thumbprint in Java?","body":"<p>If you stumbled to this thread while having problems how to generate the correct thumbprint for MSGraph API which is base64 encoded <a href=\"https://learn.microsoft.com/en-us/entra/identity-platform/certificate-credentials\" rel=\"nofollow noreferrer\">as stated in this document.</a></p>\n<p>This will generate correct x5t header parameter.</p>\n<pre><code>import java.io.FileInputStream;\nimport java.security.NoSuchAlgorithmException;\nimport java.security.cert.CertificateEncodingException;\nimport java.security.cert.X509Certificate;\nimport java.security.cert.CertificateFactory;\nimport java.util.Base64;\n\nX509Certificate cert = getPublicKey();\n\nString thumbprint = getThumbprint(cert); // base64 encoded thumbprint\n    \nX509Certificate getPublicKey() {\n    try (FileInputStream inStream = new FileInputStream(&quot;{your .crt or .cer file here}&quot;)) {\n\n        CertificateFactory cf = CertificateFactory.getInstance(&quot;X.509&quot;);\n        X509Certificate cert = (X509Certificate) cf.generateCertificate(inStream);\n\n        return cert;\n    } catch (Exception e) {\n        System.out.println(&quot;no file!&quot;);\n        return null;\n    }\n}\n\nString getThumbprint(X509Certificate cert) {\n    try {\n        return Base64.getEncoder().encodeToString(getHash(cert));\n    } catch (Exception e) {\n        return null;\n    }\n}\n\nstatic byte[] getHash(X509Certificate cert) throws NoSuchAlgorithmException, CertificateEncodingException {\n    final MessageDigest md = MessageDigest.getInstance(&quot;SHA-1&quot;);\n    md.update(cert.getEncoded());\n    return md.digest();\n}\n</code></pre>\n"}],"owner":{"account_id":38055,"reputation":1294,"user_id":109012,"display_name":"Matt Z"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":65836,"favorite_count":0,"down_vote_count":0,"up_vote_count":47,"accepted_answer_id":1271148,"answer_count":6,"score":47,"last_activity_date":1700037470,"creation_date":1250150982,"question_id":1270703,"body_markdown":"I have a java client that is calling a web service operation which takes a certificate &quot;thumbprint&quot; as a parameter. I believe the thumbprint is some kind of SHA1 hash, in hexadecimal string format, of the cert&#39;s public key, but I&#39;m not sure.\r\n\r\nThe .NET framework seems to include a simple way to get this value ([X509Certificate2.Thumbprint][1] property). Viewing a .cer file&#39;s properties in Windows also displays the thumbprint, which looks like:\r\n\r\n    a6 9c fd b0 58 0d a4 ee ae 9a 47 75 24 c3 0b 9f 5d b6 1c 77\r\n\r\nMy question is therefore: Does anybody know how to retrieve or compute this thumbprint string within Java, if I have an instance of a [java.security.cert.X509Certificate][2]?\r\n\r\n\r\n  [1]: http://msdn.microsoft.com/en-us/library/system.security.cryptography.x509certificates.x509certificate2.thumbprint.aspx\r\n  [2]: http://docs.oracle.com/javase/7/docs/api/javax/security/cert/X509Certificate.html","title":"How to retrieve/compute an X509 certificate&#39;s thumbprint in Java?","body":"<p>I have a java client that is calling a web service operation which takes a certificate \"thumbprint\" as a parameter. I believe the thumbprint is some kind of SHA1 hash, in hexadecimal string format, of the cert's public key, but I'm not sure.</p>\n\n<p>The .NET framework seems to include a simple way to get this value (<a href=\"http://msdn.microsoft.com/en-us/library/system.security.cryptography.x509certificates.x509certificate2.thumbprint.aspx\" rel=\"noreferrer\">X509Certificate2.Thumbprint</a> property). Viewing a .cer file's properties in Windows also displays the thumbprint, which looks like:</p>\n\n<pre><code>a6 9c fd b0 58 0d a4 ee ae 9a 47 75 24 c3 0b 9f 5d b6 1c 77\n</code></pre>\n\n<p>My question is therefore: Does anybody know how to retrieve or compute this thumbprint string within Java, if I have an instance of a <a href=\"http://docs.oracle.com/javase/7/docs/api/javax/security/cert/X509Certificate.html\" rel=\"noreferrer\">java.security.cert.X509Certificate</a>?</p>\n"},{"tags":["java","arrays","sorting","collections"],"answers":[{"tags":[],"owner":{"account_id":109303,"reputation":3464,"user_id":289684,"display_name":"Ha."},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1328619492,"creation_date":1328619492,"answer_id":9176670,"question_id":9176643,"body_markdown":"Natural ordering is a default total ordering. This is the only difference between the two.","title":"difference between natural ordering and total ordering","body":"<p>Natural ordering is a default total ordering. This is the only difference between the two.</p>\n"},{"tags":[],"owner":{"account_id":23121,"reputation":527336,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"down_vote_count":1,"up_vote_count":36,"is_accepted":true,"score":35,"last_activity_date":1626252857,"creation_date":1328619949,"answer_id":9176776,"question_id":9176643,"body_markdown":"Total ordering means all values can be compared to all other values.  For example, if you have a collection of `BigDecimal` and `String` there is no natural total order (but you could invent one)\r\n\r\nIn Java, the Natural order is defined as the ordering provided by the JVM.  This might not match what a people might believe is the natural order. e.g. Strings are sorted ASCIIbetically. Meaning an uppercase `Z` comes before a lowercase `a` and `10` is before `2`\r\n\r\nhttp://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html\r\n\r\n&gt; This interface imposes a total ordering on the objects of each class that implements it. This ordering is referred to as the class&#39;s natural ordering, and the class&#39;s compareTo method is referred to as its natural comparison method.\r\n","title":"difference between natural ordering and total ordering","body":"<p>Total ordering means all values can be compared to all other values.  For example, if you have a collection of <code>BigDecimal</code> and <code>String</code> there is no natural total order (but you could invent one)</p>\n<p>In Java, the Natural order is defined as the ordering provided by the JVM.  This might not match what a people might believe is the natural order. e.g. Strings are sorted ASCIIbetically. Meaning an uppercase <code>Z</code> comes before a lowercase <code>a</code> and <code>10</code> is before <code>2</code></p>\n<p><a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html\" rel=\"nofollow noreferrer\">http://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html</a></p>\n<blockquote>\n<p>This interface imposes a total ordering on the objects of each class that implements it. This ordering is referred to as the class's natural ordering, and the class's compareTo method is referred to as its natural comparison method.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":155770,"reputation":120153,"user_id":372643,"accept_rate":88,"display_name":"Bruno"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1328620455,"creation_date":1328620455,"answer_id":9176883,"question_id":9176643,"body_markdown":"[Total ordering][1] is a general mathematical concept. It differs mainly from partial ordering in that for each *a* and *b* in set *X*, either &quot;*a &lt;= b*&quot; or &quot;*b &lt;= a*&quot; are meaningful and true. As far as Java is concerned, this means that of two `Comparable` instances, one must be greater or equal than the other (i.e. it makes sense to compare them).\r\n\r\n\r\n\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Total_order","title":"difference between natural ordering and total ordering","body":"<p><a href=\"http://en.wikipedia.org/wiki/Total_order\" rel=\"noreferrer\">Total ordering</a> is a general mathematical concept. It differs mainly from partial ordering in that for each <em>a</em> and <em>b</em> in set <em>X</em>, either \"<em>a &lt;= b</em>\" or \"<em>b &lt;= a</em>\" are meaningful and true. As far as Java is concerned, this means that of two <code>Comparable</code> instances, one must be greater or equal than the other (i.e. it makes sense to compare them).</p>\n"},{"tags":[],"owner":{"account_id":324083,"reputation":2451,"user_id":644467,"accept_rate":68,"display_name":"Java"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1328620748,"creation_date":1328620748,"answer_id":9176956,"question_id":9176643,"body_markdown":"Natural Order\r\n\r\nIt depends on our collections that we use, for example, say, we have characters object, then natural order is their unicode values, for numbers natural order is as usual, ascending order\r\n\r\nComparable Interface-\r\nThis interface imposes a total ordering on the objects of each class that implements it. This ordering is referred to as the class&#39;s natural ordering, and the class&#39;s compareTo method is referred to as its natural comparison method.\r\n\r\nLists (and arrays) of objects that implement this interface can be sorted automatically by Collections.sort (and Arrays.sort). Objects that implement this interface can be used as keys in a sorted map or elements in a sorted set, without the need to specify a comparator.\r\n\r\n\r\n\r\n    public interface Comparable&lt;T&gt; {\r\n    \r\n    \t/**\r\n    \t * Compares this object with the specified object for order.  Returns a\r\n    \t * negative integer, zero, or a positive integer as this object is less\r\n    \t * than, equal to, or greater than the specified object.\r\n    \t */\r\n    \tpublic int compareTo(T o);\r\n    }\r\n\r\n\r\nComparator Interface:\r\n\r\nThis interface Represents an order relation, which may be used to sort a list or maintain order in a sorted set or map. Can override a type&#39;s natural ordering, or order objects of a type that does not implement the Comparable interface.\r\n\r\nA comparison function, which imposes a total ordering on &quot;some collection of objects&quot;.\r\nComparators can be passed to a sort method (such as Collections.sort) to allow precise control over the sort order. Comparators can also be used to control the order of certain data structures (such as TreeSet or TreeMap). \t\t\t\t\t\t\t\t\r\n\t\r\n\r\n    \tpublic interface Comparator&lt;T&gt; {\r\n    \t/**\r\n    \t * Compares its two arguments for order.  Returns a negative integer,\r\n    \t * zero, or a positive integer as the first argument is less than, equal\r\n    \t * to, or greater than the second.\r\n    \t */\r\n    \tint compare(T o1, T o2);\r\n    \t\r\n    \tboolean equals(Object obj);\r\n    }\r\n\r\n\tHope This helps you.\t\t\t\t\t","title":"difference between natural ordering and total ordering","body":"<p>Natural Order</p>\n\n<p>It depends on our collections that we use, for example, say, we have characters object, then natural order is their unicode values, for numbers natural order is as usual, ascending order</p>\n\n<p>Comparable Interface-\nThis interface imposes a total ordering on the objects of each class that implements it. This ordering is referred to as the class's natural ordering, and the class's compareTo method is referred to as its natural comparison method.</p>\n\n<p>Lists (and arrays) of objects that implement this interface can be sorted automatically by Collections.sort (and Arrays.sort). Objects that implement this interface can be used as keys in a sorted map or elements in a sorted set, without the need to specify a comparator.</p>\n\n<pre><code>public interface Comparable&lt;T&gt; {\n\n    /**\n     * Compares this object with the specified object for order.  Returns a\n     * negative integer, zero, or a positive integer as this object is less\n     * than, equal to, or greater than the specified object.\n     */\n    public int compareTo(T o);\n}\n</code></pre>\n\n<p>Comparator Interface:</p>\n\n<p>This interface Represents an order relation, which may be used to sort a list or maintain order in a sorted set or map. Can override a type's natural ordering, or order objects of a type that does not implement the Comparable interface.</p>\n\n<p>A comparison function, which imposes a total ordering on \"some collection of objects\".\nComparators can be passed to a sort method (such as Collections.sort) to allow precise control over the sort order. Comparators can also be used to control the order of certain data structures (such as TreeSet or TreeMap).                              </p>\n\n<pre><code>    public interface Comparator&lt;T&gt; {\n    /**\n     * Compares its two arguments for order.  Returns a negative integer,\n     * zero, or a positive integer as the first argument is less than, equal\n     * to, or greater than the second.\n     */\n    int compare(T o1, T o2);\n\n    boolean equals(Object obj);\n}\n\nHope This helps you.                    \n</code></pre>\n"},{"tags":[],"owner":{"account_id":1594349,"reputation":1990,"user_id":1476921,"display_name":"chipiik"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1340505044,"creation_date":1340462512,"answer_id":11170373,"question_id":9176643,"body_markdown":"*Important point:* **natural** ordering should be **consistent with equals**!\r\n\r\n*Summary:* natural ordering is one kind of total ordering which is default (used the most often) for the given class and is consistent with equals. Total ordering is any ordering where all values can be compared to all other values.\r\n\r\n*e.g.* when you design new class then you can choose the natural ordering inside the class. Any other ordering can be then only the total one ;)","title":"difference between natural ordering and total ordering","body":"<p><em>Important point:</em> <strong>natural</strong> ordering should be <strong>consistent with equals</strong>!</p>\n\n<p><em>Summary:</em> natural ordering is one kind of total ordering which is default (used the most often) for the given class and is consistent with equals. Total ordering is any ordering where all values can be compared to all other values.</p>\n\n<p><em>e.g.</em> when you design new class then you can choose the natural ordering inside the class. Any other ordering can be then only the total one ;)</p>\n"},{"tags":[],"owner":{"account_id":2632038,"reputation":2080,"user_id":2277746,"display_name":"Andrea Dusza"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1511305959,"creation_date":1511305022,"answer_id":47424123,"question_id":9176643,"body_markdown":"To elaborate on @Bruno&#39;s answer: an example of a **partial ordering** is the **divisibility relation** between positive numbers. If you compare 5 and 15, you can say that 5 is a divisor of 15, and 15 is the multiple of 5. However, 3 and 5 are not comparable because 3 is neither the divisor nor the multiple of 5. \r\n\r\nAn example of **total ordering** is the **less than relation**, because if you take any two different numbers, one of them is less than the other. So any value is comparable with any other value.\r\n\r\nOn the concept of **natural ordering**: If the objects of a type have a really-really obvious way to be sorted, than it is the natural ordering. For example, the natural ordering of Strings is the alphabetical order, and the natural order of numbers is ascending order, because it is the first choice anybody would think of. However, sometimes you would want to order Strings in a different way, e.g. sorting by length from the 1-character ones to the longer ones. This is a possible total ordering on Strings, but not the natural one.\r\n\r\nNot all objects necessarily have a natural ordering. E.g. if you have Person objects, sorting them by height is a possible total ordering, but so is sorting them by age... None of these are more obvious than the other, this is why there is no natural ordering.","title":"difference between natural ordering and total ordering","body":"<p>To elaborate on @Bruno's answer: an example of a <strong>partial ordering</strong> is the <strong>divisibility relation</strong> between positive numbers. If you compare 5 and 15, you can say that 5 is a divisor of 15, and 15 is the multiple of 5. However, 3 and 5 are not comparable because 3 is neither the divisor nor the multiple of 5. </p>\n\n<p>An example of <strong>total ordering</strong> is the <strong>less than relation</strong>, because if you take any two different numbers, one of them is less than the other. So any value is comparable with any other value.</p>\n\n<p>On the concept of <strong>natural ordering</strong>: If the objects of a type have a really-really obvious way to be sorted, than it is the natural ordering. For example, the natural ordering of Strings is the alphabetical order, and the natural order of numbers is ascending order, because it is the first choice anybody would think of. However, sometimes you would want to order Strings in a different way, e.g. sorting by length from the 1-character ones to the longer ones. This is a possible total ordering on Strings, but not the natural one.</p>\n\n<p>Not all objects necessarily have a natural ordering. E.g. if you have Person objects, sorting them by height is a possible total ordering, but so is sorting them by age... None of these are more obvious than the other, this is why there is no natural ordering.</p>\n"},{"tags":[],"owner":{"account_id":2424487,"reputation":3103,"user_id":2116739,"accept_rate":25,"display_name":"okrunner"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1529342106,"creation_date":1529342106,"answer_id":50914518,"question_id":9176643,"body_markdown":"`Comparable` implementations provide a **natural ordering** for a class, which allows objects of that class to be sorted automatically. (Ref: https://docs.oracle.com/javase/tutorial/collections/interfaces/order.html) \r\n\r\nImplementation of the `Comparable` interface enforces **total ordering** or the ability to sort the entire array from beginning to end.\r\n","title":"difference between natural ordering and total ordering","body":"<p><code>Comparable</code> implementations provide a <strong>natural ordering</strong> for a class, which allows objects of that class to be sorted automatically. (Ref: <a href=\"https://docs.oracle.com/javase/tutorial/collections/interfaces/order.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/tutorial/collections/interfaces/order.html</a>) </p>\n\n<p>Implementation of the <code>Comparable</code> interface enforces <strong>total ordering</strong> or the ability to sort the entire array from beginning to end.</p>\n"},{"tags":[],"owner":{"account_id":29871637,"reputation":1,"user_id":22892868,"display_name":"KM Graf"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700037262,"creation_date":1699613397,"answer_id":77459423,"question_id":9176643,"body_markdown":"Simple answer: There is no natural order in Java.\r\n\r\nIf a class (like many do) implements `java.util.Comparable` the `compareTo` method defines the order of the instances and we can use e.g. `java.util.Arrays.sort`. If the class does not provide the `compareTo` method the order is undefined and `java.util.Arrays.sort` gives Runtime `java.lang.ClassCastException: ... cannot be cast to java.lang.Comparable`.\r\nBecause allmost all(?) classes implement `java.util.Comparable` this appears to be their natural order.","title":"difference between natural ordering and total ordering","body":"<p>Simple answer: There is no natural order in Java.</p>\n<p>If a class (like many do) implements <code>java.util.Comparable</code> the <code>compareTo</code> method defines the order of the instances and we can use e.g. <code>java.util.Arrays.sort</code>. If the class does not provide the <code>compareTo</code> method the order is undefined and <code>java.util.Arrays.sort</code> gives Runtime <code>java.lang.ClassCastException: ... cannot be cast to java.lang.Comparable</code>.\nBecause allmost all(?) classes implement <code>java.util.Comparable</code> this appears to be their natural order.</p>\n"}],"owner":{"account_id":1083888,"reputation":10344,"user_id":1080093,"accept_rate":92,"display_name":"Nav"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":57454,"favorite_count":0,"down_vote_count":0,"up_vote_count":47,"accepted_answer_id":9176776,"answer_count":8,"score":47,"last_activity_date":1700037262,"creation_date":1328619333,"question_id":9176643,"body_markdown":"I happen to come across many statements like comparable is used when natural ordering is required while sorting an array or collection and comparator for total ordering.\r\n\r\nThe version you may have heard could be same or different with the same meaning but ultimately its one of the distinguishing factors between the two(comparator and comparable interfaces).\r\n\r\nBut, I couldn&#39;t find a difference between the two types of ordering anywhere.\r\nI&#39;d appreciate if someone could explain it with a good example :)\r\n","title":"difference between natural ordering and total ordering","body":"<p>I happen to come across many statements like comparable is used when natural ordering is required while sorting an array or collection and comparator for total ordering.</p>\n\n<p>The version you may have heard could be same or different with the same meaning but ultimately its one of the distinguishing factors between the two(comparator and comparable interfaces).</p>\n\n<p>But, I couldn't find a difference between the two types of ordering anywhere.\nI'd appreciate if someone could explain it with a good example :)</p>\n"},{"tags":["java","docker","docker-compose","cassandra","spring-data-cassandra"],"owner":{"account_id":22640087,"reputation":1,"user_id":16816385,"display_name":"Ivan Didichenko"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":0,"score":-2,"last_activity_date":1700036765,"creation_date":1700024965,"question_id":77485394,"body_markdown":"My application is dep on Cassandra, so i have put all of them in a docker-compose file, now simply using plain docker as given here i&#39;m able to run it fine locally but when i try using the same configuration in compose i keep getting the error\r\n\r\ntop stacktrace:\r\n\r\n`[s0] Error connecting to Node(endPoint=localhost/127.0.0.1:9042, hostId=null, hashCode=8a90356), trying next node (ConnectionInitException: [s0|control|connecting...] Protocol initialization request, step 1 (OPTIONS): failed to send request (io.netty.channel.StacklessClosedChannelException))`\r\n\r\nend:\r\n\r\n```\r\n\tSuppressed: io.netty.channel.AbstractChannel$AnnotatedConnectException: Connection refused: localhost/127.0.0.1:9042\r\n\tCaused by: java.net.ConnectException: Connection refused\r\n\t\tat java.base/sun.nio.ch.Net.pollConnect(Native Method)\r\n\t\tat java.base/sun.nio.ch.Net.pollConnectNow(Net.java:672)\r\n\t\tat java.base/sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:946)\r\n\t\tat io.netty.channel.socket.nio.NioSocketChannel.doFinishConnect(NioSocketChannel.java:337)\r\n\t\tat io.netty.channel.nio.AbstractNioChannel$AbstractNioUnsafe.finishConnect(AbstractNioChannel.java:334)\r\n\t\tat io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:776)\r\n\t\tat io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)\r\n\t\tat io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)\r\n\t\tat io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)\r\n\t\tat io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)\r\n\t\tat io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)\r\n\t\tat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\r\n\t\tat java.base/java.lang.Thread.run(Thread.java:840)\r\nCaused by: io.netty.channel.StacklessClosedChannelException: null\r\n\tat io.netty.channel.AbstractChannel$AbstractUnsafe.flush0()(Unknown Source)\r\n```\r\n\r\nmy docker-compose:\r\n\r\n```yaml\r\nversion: &quot;3.8&quot;\r\n\r\nservices:\r\n  urls-storage:\r\n    image: cassandra:latest\r\n    container_name: urls-storage-db\r\n    command: [ -f ]\r\n    environment:\r\n      CASSANDRA_CLUSTER_NAME: app\r\n    ports:\r\n      - &quot;9042:9042&quot;\r\n      - &quot;9160:9160&quot;\r\n      - &quot;7199:7199&quot;\r\n    healthcheck:\r\n      test: [ &quot;CMD-SHELL&quot;, &quot;[ $$(nodetool statusgossip) = running ]&quot; ]\r\n      interval: 10s\r\n      timeout: 5s\r\n      retries: 3\r\n    volumes:\r\n      - cassandra_data:/var/lib/cassandra\r\n  app:\r\n    build: .\r\n    container_name: url-shortener-service\r\n    ports:\r\n      - &#39;8083:8083&#39;\r\n    depends_on:\r\n      urls-storage:\r\n        condition: service_healthy\r\n\r\nvolumes:\r\n  cassandra_data:\r\n    driver: local\r\n```\r\n\r\napplication.yaml:\r\n\r\n```\r\nserver:\r\n  port: 8083\r\nspring:\r\n  application:\r\n    name: url-shortener-service\r\n  cassandra:\r\n    port: 9042\r\n    keyspace-name: links\r\n    schema-action: create-if-not-exists\r\n    connection:\r\n      connect-timeout: 30s\r\n      init-query-timeout: 10s\r\n    request:\r\n      timeout: 10s\r\n    contact-points: urls-storage-db\r\n    local-datacenter: datacenter1\r\n```\r\n\r\nI have tried to even hard code the contact-point but to no avail, I&#39;m able to access the cassandra in the compose container, but my application can&#39;t seem to access it.","title":"Docker compose : Cassandra not connecting to my spring app in same network","body":"<p>My application is dep on Cassandra, so i have put all of them in a docker-compose file, now simply using plain docker as given here i'm able to run it fine locally but when i try using the same configuration in compose i keep getting the error</p>\n<p>top stacktrace:</p>\n<p><code>[s0] Error connecting to Node(endPoint=localhost/127.0.0.1:9042, hostId=null, hashCode=8a90356), trying next node (ConnectionInitException: [s0|control|connecting...] Protocol initialization request, step 1 (OPTIONS): failed to send request (io.netty.channel.StacklessClosedChannelException))</code></p>\n<p>end:</p>\n<pre><code>    Suppressed: io.netty.channel.AbstractChannel$AnnotatedConnectException: Connection refused: localhost/127.0.0.1:9042\n    Caused by: java.net.ConnectException: Connection refused\n        at java.base/sun.nio.ch.Net.pollConnect(Native Method)\n        at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:672)\n        at java.base/sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:946)\n        at io.netty.channel.socket.nio.NioSocketChannel.doFinishConnect(NioSocketChannel.java:337)\n        at io.netty.channel.nio.AbstractNioChannel$AbstractNioUnsafe.finishConnect(AbstractNioChannel.java:334)\n        at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:776)\n        at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)\n        at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)\n        at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)\n        at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)\n        at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)\n        at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\n        at java.base/java.lang.Thread.run(Thread.java:840)\nCaused by: io.netty.channel.StacklessClosedChannelException: null\n    at io.netty.channel.AbstractChannel$AbstractUnsafe.flush0()(Unknown Source)\n</code></pre>\n<p>my docker-compose:</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>version: &quot;3.8&quot;\n\nservices:\n  urls-storage:\n    image: cassandra:latest\n    container_name: urls-storage-db\n    command: [ -f ]\n    environment:\n      CASSANDRA_CLUSTER_NAME: app\n    ports:\n      - &quot;9042:9042&quot;\n      - &quot;9160:9160&quot;\n      - &quot;7199:7199&quot;\n    healthcheck:\n      test: [ &quot;CMD-SHELL&quot;, &quot;[ $$(nodetool statusgossip) = running ]&quot; ]\n      interval: 10s\n      timeout: 5s\n      retries: 3\n    volumes:\n      - cassandra_data:/var/lib/cassandra\n  app:\n    build: .\n    container_name: url-shortener-service\n    ports:\n      - '8083:8083'\n    depends_on:\n      urls-storage:\n        condition: service_healthy\n\nvolumes:\n  cassandra_data:\n    driver: local\n</code></pre>\n<p>application.yaml:</p>\n<pre><code>server:\n  port: 8083\nspring:\n  application:\n    name: url-shortener-service\n  cassandra:\n    port: 9042\n    keyspace-name: links\n    schema-action: create-if-not-exists\n    connection:\n      connect-timeout: 30s\n      init-query-timeout: 10s\n    request:\n      timeout: 10s\n    contact-points: urls-storage-db\n    local-datacenter: datacenter1\n</code></pre>\n<p>I have tried to even hard code the contact-point but to no avail, I'm able to access the cassandra in the compose container, but my application can't seem to access it.</p>\n"},{"tags":["java","checkbox","radio-button","bluej"],"answers":[{"tags":[],"owner":{"account_id":3180912,"reputation":980,"user_id":2687641,"accept_rate":81,"display_name":"TheEyesHaveIt"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700036751,"creation_date":1379129523,"answer_id":18798002,"question_id":18787029,"body_markdown":"Take a look at the error you are getting.  It says NumberFormatException.  I believe the problem lies in your Double.parseDouble(gasL.getText()).  What happens when gasL is left blank? How will the program parse a null string into a double?  Try setting the default value of gasL to 0 or look into try/catch to handle exceptions.\r\n\r\n    gasL = new JTextField(&quot;0&quot;,5);\r\n\r\nThis removes the error message but I cannot figure out why your Gas Station panel isn&#39;t opening.","title":"A couple of Questions Regarding Buttons in BlueJ","body":"<p>Take a look at the error you are getting.  It says NumberFormatException.  I believe the problem lies in your Double.parseDouble(gasL.getText()).  What happens when gasL is left blank? How will the program parse a null string into a double?  Try setting the default value of gasL to 0 or look into try/catch to handle exceptions.</p>\n<pre><code>gasL = new JTextField(&quot;0&quot;,5);\n</code></pre>\n<p>This removes the error message but I cannot figure out why your Gas Station panel isn't opening.</p>\n"},{"tags":[],"owner":{"account_id":1020179,"reputation":484,"user_id":1030745,"display_name":"Kaydell"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700036731,"creation_date":1379137418,"answer_id":18798729,"question_id":18787029,"body_markdown":"I think that it is best **not** to use methods such as: Double.parseDouble() **directly**.\r\n\r\nOf course, you wouldn&#39;t want to develop your own methods to parse doubles, etc.\r\n\r\nWhat I like to do is to map the empty string and even nulls into zero.\r\n\r\n    public static double myParseDouble(String s) {\r\n        if (s == null || s.equals(&quot;&quot;)) {\r\n            return 0.0;\r\n        } else {\r\n            return Double.parseDouble(s);\r\n        }\r\n    }\r\n\r\nYou have to do the same sort of thing when parsing ints, floats, longs, and BigIntegers.\r\n\r\nI suggest that you take my method, in its own project, and &quot;play with it&quot;, running various strings through it and see what it does.","title":"A couple of Questions Regarding Buttons in BlueJ","body":"<p>I think that it is best <strong>not</strong> to use methods such as: Double.parseDouble() <strong>directly</strong>.</p>\n<p>Of course, you wouldn't want to develop your own methods to parse doubles, etc.</p>\n<p>What I like to do is to map the empty string and even nulls into zero.</p>\n<pre><code>public static double myParseDouble(String s) {\n    if (s == null || s.equals(&quot;&quot;)) {\n        return 0.0;\n    } else {\n        return Double.parseDouble(s);\n    }\n}\n</code></pre>\n<p>You have to do the same sort of thing when parsing ints, floats, longs, and BigIntegers.</p>\n<p>I suggest that you take my method, in its own project, and &quot;play with it&quot;, running various strings through it and see what it does.</p>\n"}],"owner":{"account_id":2228940,"reputation":93,"user_id":1967055,"accept_rate":50,"display_name":"Bobby Ores"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1321,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1700036751,"creation_date":1379077436,"question_id":18787029,"body_markdown":"My issue is that my radio buttons causes a huge error in the java terminal when I select it. It is in the beginning buttons (button1 to button 4) button1 starts up the gas station (so you can choose what type of gas you want), but instead of opening up radio  buttons to choose from, it gives me a bunch of errors that relates to \r\n\r\n    Exception in thread &quot;AWT-EventQueue-0&quot; java.lang.NumberFormatException: empty String\r\nThe radiobuttons worked before, but after I made the checkboxes method it stopped working, but the checkbox selection works (not clearing, however).\r\nFound the error, it belonged to this  \r\n\r\n    litres=Double.parseDouble(gasL.getText());\r\nSo I temporarily removed that part, but not sure how to get it to work because I am trying to get the litres from the text box the user can input. The gas bar still doesn&#39;t open up\r\n\r\nClearing works for check boxes, but I am not sure for radio buttons, which gives me the errors\r\n\r\nHere is my code\r\n\r\n        import javax.swing.*;\r\n    import java.awt.*;\r\n    import java.awt.event.*;\r\n    /**\r\n     * A GUI for a Gas Bar, which allows you to choose the gas type you want, and optional car checks for things like \r\n     * windshield and gas check. The price is outputted afterwards.\r\n     * \r\n     * @author Kevin Hy \r\n     * @date   08/06/13\r\n     */\r\n    public class New_Gas_Bar extends JFrame\r\n    {\r\n        public JPanel panel1,panel2,panel3,panel4,panel5;\r\n        public JLabel main1, main2, main3,main4,main5,main6;\r\n        public JLabel gasBar,total;\r\n        public JButton button1,button2,button3,button4,clearGas,clearCar;\r\n        public JRadioButton bronzeG,silverG,goldG,selfS,fullS,fullService,selfService;\r\n        public JCheckBox oilC,windWash,pressureClock;\r\n        public JTextField gasL;\r\n        static double fullCost,selfCost,discount,gasCost,litres,cleaningC;\r\n        static boolean boughtGas=false;\r\n    \r\n        public New_Gas_Bar()\r\n        {\r\n            super (&quot;      New Gas Bar&quot;);\r\n            setSize(640,640);\r\n            Container container = getContentPane();\r\n    \r\n            panel1=new JPanel();\r\n            panel2=new JPanel();\r\n            panel3=new JPanel();\r\n            panel4=new JPanel();\r\n            panel5=new JPanel();\r\n    \r\n            panel1.setBackground(new Color(107,202,226));\r\n            panel1.setLayout(new GridLayout(6,1));\r\n    \r\n            main1 = new JLabel (&quot;         Gas Bar Project &quot;);\r\n            main2 = new JLabel (&quot;         ICS4U0 - September 2013&quot;);\r\n            main3 = new JLabel (&quot;     &quot;);\r\n            main4 = new JLabel (&quot;Enter Litres of Gas&quot;);\r\n            main5 = new JLabel (&quot;Select Full or Self Serve&quot;);\r\n            main6 = new JLabel (&quot;Select Gas Quality&quot;);\r\n    \r\n            button1 = new JButton (&quot;Gas Station&quot;);\r\n            button2 = new JButton (&quot;Car Wash&quot;);\r\n            button3 = new JButton (&quot;Total&quot;);\r\n            button4 = new JButton (&quot;Exit&quot;);\r\n            clearCar = new JButton (&quot;Clear&quot;);\r\n            clearGas = new JButton (&quot;Clear&quot;);\r\n    \r\n            panel2.setBackground(new Color(144,160,170));\r\n            panel2.setLayout(new FlowLayout ());\r\n            panel2.add (button1);\r\n            panel2.add (button2);\r\n            panel2.add (button3);\r\n            panel2.add (button4);\r\n            panel1.add (main1);\r\n            panel1.add (main2);\r\n            panel1.add (main3);\r\n    \r\n            //container.setLayout(new BorderLayout());\r\n            container.add(panel1,BorderLayout.NORTH);\r\n            container.add(panel2,BorderLayout.CENTER);\r\n            container.add(panel3,BorderLayout.EAST);\r\n            container.add(panel4,BorderLayout.EAST);\r\n            panel3.setBackground(new Color(107,202,226));\r\n            panel4.setBackground(new Color(107,202,226));\r\n    \r\n            ButtonHandler handler = new ButtonHandler ();\r\n            button1.addActionListener (handler);\r\n            button2.addActionListener (handler);\r\n            button3.addActionListener (handler);\r\n            button4.addActionListener (handler);\r\n            clearCar.addActionListener (handler);\r\n    clearGas.addActionListener (handler);\r\n            ButtonGroup serveStyle = new ButtonGroup();\r\n            fullS = new JRadioButton (&quot;Full Serve&quot;);\r\n            selfS = new JRadioButton (&quot;Self Serve&quot;);\r\n            serveStyle.add (fullS);\r\n            serveStyle.add (selfS);\r\n    \r\n            ButtonGroup serveGas = new ButtonGroup();\r\n            bronzeG = new JRadioButton(&quot;Bronze Service&quot;);\r\n            silverG = new JRadioButton(&quot;Silver Service&quot;);\r\n            goldG = new JRadioButton(&quot;Gold Service&quot;);\r\n            serveGas.add (bronzeG);\r\n            serveGas.add (silverG);\r\n            serveGas.add (goldG);\r\n    \r\n            gasL = new JTextField(5);\r\n            oilC = new JCheckBox(&quot;Oil Change&quot;);\r\n            windWash = new JCheckBox(&quot;Windshield Wash&quot;);\r\n            pressureClock = new JCheckBox(&quot;Air Pressure Check&quot;);\r\n    \r\n            RadioButtonHandler radioHand = new RadioButtonHandler ();\r\n            bronzeG.addItemListener (radioHand);\r\n            silverG.addItemListener (radioHand);\r\n            goldG.addItemListener (radioHand);\r\n            fullS.addItemListener (radioHand);\r\n            selfS.addItemListener (radioHand);\r\n            CheckBoxHandler checkHand = new CheckBoxHandler();\r\n            oilC.addItemListener (checkHand);\r\n            windWash.addItemListener (checkHand);\r\n            pressureClock.addItemListener (checkHand);\r\n            setVisible(true);\r\n        }\r\n    \r\n        public static void main (String [] args)\r\n        {\r\n    \r\n            New_Gas_Bar application = new New_Gas_Bar();    \r\n        }\r\n    \r\n        public class ButtonHandler implements ActionListener\r\n    \r\n        {\r\n            public void actionPerformed (ActionEvent event)\r\n            {\r\n                if (event.getSource () == button1)\r\n                {           \r\n                    panel1.setVisible(true);\r\n                    panel2.setVisible(true);\r\n                    panel3.setVisible(true);\r\n                    panel4.setVisible(false);\r\n                    panel3.setLayout(new GridLayout(10,1));\r\n                    panel3.add(clearGas);\r\n                    panel3.add(main5);\r\n                    panel3.add(fullS);\r\n                    panel3.add(selfS);\r\n                    panel3.add(main6);\r\n                    panel3.add(bronzeG);\r\n                    panel3.add(silverG);\r\n                    panel3.add(goldG);\r\n                    panel3.add(main4);\r\n                    panel3.add(gasL);\r\n    \r\n                    litres=Double.parseDouble(gasL.getText());\r\n                    //JOptionPane.showMessageDialog (null, litres);\r\n                }\r\n                else if (event.getSource () == button2)\r\n                {\r\n                    panel1.setVisible(true);\r\n                    panel2.setVisible(true);\r\n                    panel3.setVisible(false);\r\n                    panel4.setVisible(true);\r\n                    panel4.setLayout(new FlowLayout ());\r\n                    panel4.add(clearCar);\r\n                    panel4.add(oilC);\r\n                    panel4.add(windWash);\r\n                    panel4.add(pressureClock);\r\n                }\r\n                else if (event.getSource () == button3)\r\n                {\r\n                    JOptionPane.showMessageDialog (null, &quot;This is your total:&quot;);\r\n                    JOptionPane.showMessageDialog (null, litres);\r\n                }\r\n                else if (event.getSource () == button4)\r\n                {\r\n                    System.exit(0);\r\n                }\r\n                if (event.getSource () == clearGas)\r\n                {\r\n                    JOptionPane.showMessageDialog (null, &quot;Clearing All Selected Options&quot;);\r\n                    bronzeG.setSelected(false);\r\n                    silverG.setSelected(false);\r\n                    goldG.setSelected(false);\r\n                    fullS.setSelected(false);\r\n                    selfS.setSelected(false);\r\n                    gasCost=0;\r\n                    boughtGas=false;\r\n                }\r\n                if (event.getSource () == clearCar)\r\n                {\r\n                    JOptionPane.showMessageDialog (null, &quot;Clearing All Selected Options&quot;);\r\n                    pressureClock.setSelected(false);\r\n                    windWash.setSelected(false);\r\n                    oilC.setSelected(false);\r\n                    cleaningC=0;\r\n                }\r\n            }\r\n        }\r\n        public class RadioButtonHandler implements ItemListener\r\n    \r\n        {\r\n            public void itemStateChanged(ItemEvent event)\r\n            {\r\n                if (event.getSource () == fullS)\r\n                {        \r\n                    JOptionPane.showMessageDialog (null, &quot;Full Serve Selected&quot;);\r\n                    fullCost =1.25;\r\n                    boughtGas=true;\r\n                }\r\n    \r\n                else if (event.getSource () == selfS)\r\n                {\r\n                    JOptionPane.showMessageDialog (null, &quot;Self Serve Selected&quot;);\r\n                    selfCost =0.60;\r\n                    boughtGas=true;\r\n                }\r\n                if (event.getSource () == bronzeG)\r\n                {           \r\n                    JOptionPane.showMessageDialog (null, &quot;Bronze Gas Option Selected&quot;);\r\n                    gasCost=0.50;\r\n                    boughtGas=true;\r\n                }\r\n                if (event.getSource () == silverG)\r\n                {\r\n                    JOptionPane.showMessageDialog (null, &quot;Silver Gas Option Selected&quot;);\r\n                    gasCost=0.75;\r\n                    boughtGas=true;\r\n                }\r\n                if (event.getSource () == goldG)\r\n                {\r\n                    JOptionPane.showMessageDialog (null, &quot;Gold Gas Option Selected&quot;);\r\n                    gasCost=0.95;\r\n                    boughtGas=true;\r\n                }\r\n                \r\n            }\r\n        }\r\n        public class CheckBoxHandler implements ItemListener\r\n    \r\n        {\r\n            public void itemStateChanged (ItemEvent event)\r\n            {\r\n                if (event.getSource () == oilC)\r\n                {           \r\n                    JOptionPane.showMessageDialog (null, &quot;Oil Cleaning Selected&quot;);\r\n                    if (boughtGas==true)\r\n                    {\r\n                        cleaningC+=10.00;\r\n                    }\r\n                    else \r\n                    {\r\n                        cleaningC+=12.50;\r\n                    }\r\n                }\r\n                if (event.getSource () == windWash)\r\n                {\r\n                    JOptionPane.showMessageDialog (null, &quot;Windshield Washing Selected&quot;);\r\n                    if (boughtGas==true)\r\n                    {\r\n                        cleaningC+=10.00;\r\n                    }\r\n                    else \r\n                    {\r\n                        cleaningC+=12.50;\r\n                    }\r\n                }\r\n                if (event.getSource () == pressureClock)\r\n                {\r\n                    JOptionPane.showMessageDialog (null, &quot;Air Pressure Check Selected&quot;);\r\n                    if (boughtGas==true)\r\n                    {\r\n                        cleaningC+=10.00;\r\n                    }\r\n                    else \r\n                    {\r\n                        cleaningC+=12.50;\r\n                    }\r\n                }\r\n                \r\n            }\r\n        }\r\n    }\r\n\r\n","title":"A couple of Questions Regarding Buttons in BlueJ","body":"<p>My issue is that my radio buttons causes a huge error in the java terminal when I select it. It is in the beginning buttons (button1 to button 4) button1 starts up the gas station (so you can choose what type of gas you want), but instead of opening up radio  buttons to choose from, it gives me a bunch of errors that relates to </p>\n\n<pre><code>Exception in thread \"AWT-EventQueue-0\" java.lang.NumberFormatException: empty String\n</code></pre>\n\n<p>The radiobuttons worked before, but after I made the checkboxes method it stopped working, but the checkbox selection works (not clearing, however).\nFound the error, it belonged to this  </p>\n\n<pre><code>litres=Double.parseDouble(gasL.getText());\n</code></pre>\n\n<p>So I temporarily removed that part, but not sure how to get it to work because I am trying to get the litres from the text box the user can input. The gas bar still doesn't open up</p>\n\n<p>Clearing works for check boxes, but I am not sure for radio buttons, which gives me the errors</p>\n\n<p>Here is my code</p>\n\n<pre><code>    import javax.swing.*;\nimport java.awt.*;\nimport java.awt.event.*;\n/**\n * A GUI for a Gas Bar, which allows you to choose the gas type you want, and optional car checks for things like \n * windshield and gas check. The price is outputted afterwards.\n * \n * @author Kevin Hy \n * @date   08/06/13\n */\npublic class New_Gas_Bar extends JFrame\n{\n    public JPanel panel1,panel2,panel3,panel4,panel5;\n    public JLabel main1, main2, main3,main4,main5,main6;\n    public JLabel gasBar,total;\n    public JButton button1,button2,button3,button4,clearGas,clearCar;\n    public JRadioButton bronzeG,silverG,goldG,selfS,fullS,fullService,selfService;\n    public JCheckBox oilC,windWash,pressureClock;\n    public JTextField gasL;\n    static double fullCost,selfCost,discount,gasCost,litres,cleaningC;\n    static boolean boughtGas=false;\n\n    public New_Gas_Bar()\n    {\n        super (\"      New Gas Bar\");\n        setSize(640,640);\n        Container container = getContentPane();\n\n        panel1=new JPanel();\n        panel2=new JPanel();\n        panel3=new JPanel();\n        panel4=new JPanel();\n        panel5=new JPanel();\n\n        panel1.setBackground(new Color(107,202,226));\n        panel1.setLayout(new GridLayout(6,1));\n\n        main1 = new JLabel (\"         Gas Bar Project \");\n        main2 = new JLabel (\"         ICS4U0 - September 2013\");\n        main3 = new JLabel (\"     \");\n        main4 = new JLabel (\"Enter Litres of Gas\");\n        main5 = new JLabel (\"Select Full or Self Serve\");\n        main6 = new JLabel (\"Select Gas Quality\");\n\n        button1 = new JButton (\"Gas Station\");\n        button2 = new JButton (\"Car Wash\");\n        button3 = new JButton (\"Total\");\n        button4 = new JButton (\"Exit\");\n        clearCar = new JButton (\"Clear\");\n        clearGas = new JButton (\"Clear\");\n\n        panel2.setBackground(new Color(144,160,170));\n        panel2.setLayout(new FlowLayout ());\n        panel2.add (button1);\n        panel2.add (button2);\n        panel2.add (button3);\n        panel2.add (button4);\n        panel1.add (main1);\n        panel1.add (main2);\n        panel1.add (main3);\n\n        //container.setLayout(new BorderLayout());\n        container.add(panel1,BorderLayout.NORTH);\n        container.add(panel2,BorderLayout.CENTER);\n        container.add(panel3,BorderLayout.EAST);\n        container.add(panel4,BorderLayout.EAST);\n        panel3.setBackground(new Color(107,202,226));\n        panel4.setBackground(new Color(107,202,226));\n\n        ButtonHandler handler = new ButtonHandler ();\n        button1.addActionListener (handler);\n        button2.addActionListener (handler);\n        button3.addActionListener (handler);\n        button4.addActionListener (handler);\n        clearCar.addActionListener (handler);\nclearGas.addActionListener (handler);\n        ButtonGroup serveStyle = new ButtonGroup();\n        fullS = new JRadioButton (\"Full Serve\");\n        selfS = new JRadioButton (\"Self Serve\");\n        serveStyle.add (fullS);\n        serveStyle.add (selfS);\n\n        ButtonGroup serveGas = new ButtonGroup();\n        bronzeG = new JRadioButton(\"Bronze Service\");\n        silverG = new JRadioButton(\"Silver Service\");\n        goldG = new JRadioButton(\"Gold Service\");\n        serveGas.add (bronzeG);\n        serveGas.add (silverG);\n        serveGas.add (goldG);\n\n        gasL = new JTextField(5);\n        oilC = new JCheckBox(\"Oil Change\");\n        windWash = new JCheckBox(\"Windshield Wash\");\n        pressureClock = new JCheckBox(\"Air Pressure Check\");\n\n        RadioButtonHandler radioHand = new RadioButtonHandler ();\n        bronzeG.addItemListener (radioHand);\n        silverG.addItemListener (radioHand);\n        goldG.addItemListener (radioHand);\n        fullS.addItemListener (radioHand);\n        selfS.addItemListener (radioHand);\n        CheckBoxHandler checkHand = new CheckBoxHandler();\n        oilC.addItemListener (checkHand);\n        windWash.addItemListener (checkHand);\n        pressureClock.addItemListener (checkHand);\n        setVisible(true);\n    }\n\n    public static void main (String [] args)\n    {\n\n        New_Gas_Bar application = new New_Gas_Bar();    \n    }\n\n    public class ButtonHandler implements ActionListener\n\n    {\n        public void actionPerformed (ActionEvent event)\n        {\n            if (event.getSource () == button1)\n            {           \n                panel1.setVisible(true);\n                panel2.setVisible(true);\n                panel3.setVisible(true);\n                panel4.setVisible(false);\n                panel3.setLayout(new GridLayout(10,1));\n                panel3.add(clearGas);\n                panel3.add(main5);\n                panel3.add(fullS);\n                panel3.add(selfS);\n                panel3.add(main6);\n                panel3.add(bronzeG);\n                panel3.add(silverG);\n                panel3.add(goldG);\n                panel3.add(main4);\n                panel3.add(gasL);\n\n                litres=Double.parseDouble(gasL.getText());\n                //JOptionPane.showMessageDialog (null, litres);\n            }\n            else if (event.getSource () == button2)\n            {\n                panel1.setVisible(true);\n                panel2.setVisible(true);\n                panel3.setVisible(false);\n                panel4.setVisible(true);\n                panel4.setLayout(new FlowLayout ());\n                panel4.add(clearCar);\n                panel4.add(oilC);\n                panel4.add(windWash);\n                panel4.add(pressureClock);\n            }\n            else if (event.getSource () == button3)\n            {\n                JOptionPane.showMessageDialog (null, \"This is your total:\");\n                JOptionPane.showMessageDialog (null, litres);\n            }\n            else if (event.getSource () == button4)\n            {\n                System.exit(0);\n            }\n            if (event.getSource () == clearGas)\n            {\n                JOptionPane.showMessageDialog (null, \"Clearing All Selected Options\");\n                bronzeG.setSelected(false);\n                silverG.setSelected(false);\n                goldG.setSelected(false);\n                fullS.setSelected(false);\n                selfS.setSelected(false);\n                gasCost=0;\n                boughtGas=false;\n            }\n            if (event.getSource () == clearCar)\n            {\n                JOptionPane.showMessageDialog (null, \"Clearing All Selected Options\");\n                pressureClock.setSelected(false);\n                windWash.setSelected(false);\n                oilC.setSelected(false);\n                cleaningC=0;\n            }\n        }\n    }\n    public class RadioButtonHandler implements ItemListener\n\n    {\n        public void itemStateChanged(ItemEvent event)\n        {\n            if (event.getSource () == fullS)\n            {        \n                JOptionPane.showMessageDialog (null, \"Full Serve Selected\");\n                fullCost =1.25;\n                boughtGas=true;\n            }\n\n            else if (event.getSource () == selfS)\n            {\n                JOptionPane.showMessageDialog (null, \"Self Serve Selected\");\n                selfCost =0.60;\n                boughtGas=true;\n            }\n            if (event.getSource () == bronzeG)\n            {           \n                JOptionPane.showMessageDialog (null, \"Bronze Gas Option Selected\");\n                gasCost=0.50;\n                boughtGas=true;\n            }\n            if (event.getSource () == silverG)\n            {\n                JOptionPane.showMessageDialog (null, \"Silver Gas Option Selected\");\n                gasCost=0.75;\n                boughtGas=true;\n            }\n            if (event.getSource () == goldG)\n            {\n                JOptionPane.showMessageDialog (null, \"Gold Gas Option Selected\");\n                gasCost=0.95;\n                boughtGas=true;\n            }\n\n        }\n    }\n    public class CheckBoxHandler implements ItemListener\n\n    {\n        public void itemStateChanged (ItemEvent event)\n        {\n            if (event.getSource () == oilC)\n            {           \n                JOptionPane.showMessageDialog (null, \"Oil Cleaning Selected\");\n                if (boughtGas==true)\n                {\n                    cleaningC+=10.00;\n                }\n                else \n                {\n                    cleaningC+=12.50;\n                }\n            }\n            if (event.getSource () == windWash)\n            {\n                JOptionPane.showMessageDialog (null, \"Windshield Washing Selected\");\n                if (boughtGas==true)\n                {\n                    cleaningC+=10.00;\n                }\n                else \n                {\n                    cleaningC+=12.50;\n                }\n            }\n            if (event.getSource () == pressureClock)\n            {\n                JOptionPane.showMessageDialog (null, \"Air Pressure Check Selected\");\n                if (boughtGas==true)\n                {\n                    cleaningC+=10.00;\n                }\n                else \n                {\n                    cleaningC+=12.50;\n                }\n            }\n\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":8,"creation_date":1699994425,"post_id":77483694,"comment_id":136599862,"body_markdown":"In `Product.read()`, doing `String name = in.nextLine();` is declaring a new _local variable_. It is not assigning the value to the name _field_. Try just `name = in.nextLine();` (and same for the other fields you want to assign values to).","body":"In <code>Product.read()</code>, doing <code>String name = in.nextLine();</code> is declaring a new <i>local variable</i>. It is not assigning the value to the name <i>field</i>. Try just <code>name = in.nextLine();</code> (and same for the other fields you want to assign values to)."}],"answers":[{"tags":[],"owner":{"account_id":20780824,"reputation":29180,"user_id":15261315,"display_name":"Chris"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1699994723,"creation_date":1699994723,"answer_id":77483729,"question_id":77483694,"body_markdown":"You have declared new _local_ variables to store the input data, rather than assigning to the instance variables.\r\n\r\n```\r\n    public void read() {     \r\n        Scanner in  = new Scanner(System.in);\r\n        \r\n        System.out.println(&quot;Product name: &quot;);\r\n        name = in.nextLine(); \r\n        System.out.println(&quot;Price: &quot;);\r\n        price = in.nextDouble();\r\n        System.out.println(&quot;Score: &quot;);\r\n        core = in.nextInt();\r\n    }\r\n```","title":"When I run my code, the variables still have the value that they were given in the beggining. What am I doing wrong?","body":"<p>You have declared new <em>local</em> variables to store the input data, rather than assigning to the instance variables.</p>\n<pre><code>    public void read() {     \n        Scanner in  = new Scanner(System.in);\n        \n        System.out.println(&quot;Product name: &quot;);\n        name = in.nextLine(); \n        System.out.println(&quot;Price: &quot;);\n        price = in.nextDouble();\n        System.out.println(&quot;Score: &quot;);\n        core = in.nextInt();\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1096470,"reputation":26056,"user_id":1089967,"accept_rate":59,"display_name":"lance-java"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1700036535,"creation_date":1699994742,"answer_id":77483734,"question_id":77483694,"body_markdown":"In the read method you have created local variables for name price and core. You are reading into these local variables instead of into the member variables (fields) of your class.\r\n\r\nInstead of\r\n\r\n```java\r\n        String name = in.nextLine(); \r\n        double price = in.nextDouble();\r\n        int core = in.nextInt();\r\n```\r\n\r\nYou should do\r\n\r\n```java\r\n        this.name = in.nextLine(); \r\n        this.price = in.nextDouble();\r\n        this.core = in.nextInt();\r\n```\r\n\r\nNow that we&#39;ve removed the local variables we are no longer shadowing the instance variables. We can therefore omit `this.` in the solution above so could do\r\n\r\n```java\r\n        name = in.nextLine(); \r\n        price = in.nextDouble();\r\n        core = in.nextInt();\r\n```","title":"When I run my code, the variables still have the value that they were given in the beggining. What am I doing wrong?","body":"<p>In the read method you have created local variables for name price and core. You are reading into these local variables instead of into the member variables (fields) of your class.</p>\n<p>Instead of</p>\n<pre class=\"lang-java prettyprint-override\"><code>        String name = in.nextLine(); \n        double price = in.nextDouble();\n        int core = in.nextInt();\n</code></pre>\n<p>You should do</p>\n<pre class=\"lang-java prettyprint-override\"><code>        this.name = in.nextLine(); \n        this.price = in.nextDouble();\n        this.core = in.nextInt();\n</code></pre>\n<p>Now that we've removed the local variables we are no longer shadowing the instance variables. We can therefore omit <code>this.</code> in the solution above so could do</p>\n<pre class=\"lang-java prettyprint-override\"><code>        name = in.nextLine(); \n        price = in.nextDouble();\n        core = in.nextInt();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1699998240,"creation_date":1699998240,"answer_id":77484018,"question_id":77483694,"body_markdown":"&gt; _&quot;... When i type a name, a score and a price it displays what the prices that the variables were given at the beggining of the programm instead of the new ones ...&quot;_\r\n\r\nYou don&#39;t have to re-declare the values, in the _read_ method.\r\n\r\n```java\r\npublic void read() {\r\n\r\n    Scanner in  = new Scanner(System.in);\r\n\r\n    System.out.println(&quot;Product name: &quot;);\r\n    name = in.nextLine();\r\n    System.out.println(&quot;Price: &quot;);\r\n    price = in.nextDouble();\r\n    System.out.println(&quot;Score: &quot;);\r\n    score = in.nextInt();\r\n}\r\n```\r\n\r\nOutput\r\n\r\n```none\r\nProduct name: \r\nabc\r\nPrice: \r\n1.23\r\nScore: \r\n123\r\nMore Products? 1:YES, 2:NO\r\n2\r\nName: abc\r\nPrice: 1.23\r\nScore: 123\r\n```","title":"When I run my code, the variables still have the value that they were given in the beggining. What am I doing wrong?","body":"<blockquote>\n<p><em>&quot;... When i type a name, a score and a price it displays what the prices that the variables were given at the beggining of the programm instead of the new ones ...&quot;</em></p>\n</blockquote>\n<p>You don't have to re-declare the values, in the <em>read</em> method.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public void read() {\n\n    Scanner in  = new Scanner(System.in);\n\n    System.out.println(&quot;Product name: &quot;);\n    name = in.nextLine();\n    System.out.println(&quot;Price: &quot;);\n    price = in.nextDouble();\n    System.out.println(&quot;Score: &quot;);\n    score = in.nextInt();\n}\n</code></pre>\n<p>Output</p>\n<pre class=\"lang-none prettyprint-override\"><code>Product name: \nabc\nPrice: \n1.23\nScore: \n123\nMore Products? 1:YES, 2:NO\n2\nName: abc\nPrice: 1.23\nScore: 123\n</code></pre>\n"}],"owner":{"account_id":29903601,"reputation":1,"user_id":22916716,"display_name":"Smn666x"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":76,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1700036535,"creation_date":1699994342,"question_id":77483694,"body_markdown":"```\r\nimport java.util.Scanner;\r\n\r\nclass Product{\r\n\t\r\n\t//Class attributes\r\n\tprivate String name;\r\n\tprivate double price;\r\n\tprivate int score; \r\n\t\r\n\tpublic Product() {\r\n\t\tname = &quot;&quot;;\r\n\t    score = 0; \r\n\t    price = 1;\r\n\t}\r\n\t\r\n\tpublic void printData(){\r\n\t\tSystem.out.println(&quot;Name: &quot; + name);\r\n\t\tSystem.out.println(&quot;Price: &quot; + price);\r\n\t\tSystem.out.println(&quot;Score: &quot; + score);\r\n\t}\r\n\t\r\n\t\r\n\tpublic void read() {\r\n\t\t\r\n\t\tScanner in  = new Scanner(System.in);\r\n\t\t\r\n\t\tSystem.out.println(&quot;Product name: &quot;);\r\n    \tString name = in.nextLine(); \r\n    \tSystem.out.println(&quot;Price: &quot;);\r\n    \tdouble price = in.nextDouble();\r\n    \tSystem.out.println(&quot;Score: &quot;);\r\n    \tint core = in.nextInt();\r\n\t}\r\n\t\r\n\tpublic boolean is_better_than(Product other) {\r\n\t\t\r\n\t\tif (score/price &gt; other.score/other.price)\r\n\t\t\treturn true;\r\n\t\t \r\n\t\treturn false;\r\n\t\t\r\n\t}\r\n}\r\n\r\n\r\npublic class Main {\r\n\tpublic static void main(String[] args) {\r\n \r\n\t\tScanner in  = new Scanner(System.in);\r\n\t\t\r\n\t\tProduct best = new Product();\r\n\t    \r\n\t\tboolean more = true;\r\n\t    while(more) {\r\n\t    \t\r\n\t    \t\r\n\t    \tProduct current = new Product();\r\n\t    \t\r\n\t    \tcurrent.read(); // \r\n\t    \tif (current.is_better_than(best)) {\r\n\t    \t\tbest = current;\r\n\t    \t}\r\n\t    \t\t\t    \t\r\n\t    \tSystem.out.println(&quot;More Products? 1:YES, 2:NO&quot;);\r\n            int answer\t= in.nextInt();\r\n            if (answer != 1)\r\n            \tmore = false;\r\n            in.nextLine();\r\n\t    \r\n\t    }\r\n\t    \r\n\t    best.printData(); \r\n\t}\r\n}\r\n```\r\n\r\n\r\nWhen i type a name, a score and a price it displays what the prices that the variables were given at the beggining of the programm instead of the new ones","title":"When I run my code, the variables still have the value that they were given in the beggining. What am I doing wrong?","body":"<pre><code>import java.util.Scanner;\n\nclass Product{\n    \n    //Class attributes\n    private String name;\n    private double price;\n    private int score; \n    \n    public Product() {\n        name = &quot;&quot;;\n        score = 0; \n        price = 1;\n    }\n    \n    public void printData(){\n        System.out.println(&quot;Name: &quot; + name);\n        System.out.println(&quot;Price: &quot; + price);\n        System.out.println(&quot;Score: &quot; + score);\n    }\n    \n    \n    public void read() {\n        \n        Scanner in  = new Scanner(System.in);\n        \n        System.out.println(&quot;Product name: &quot;);\n        String name = in.nextLine(); \n        System.out.println(&quot;Price: &quot;);\n        double price = in.nextDouble();\n        System.out.println(&quot;Score: &quot;);\n        int core = in.nextInt();\n    }\n    \n    public boolean is_better_than(Product other) {\n        \n        if (score/price &gt; other.score/other.price)\n            return true;\n         \n        return false;\n        \n    }\n}\n\n\npublic class Main {\n    public static void main(String[] args) {\n \n        Scanner in  = new Scanner(System.in);\n        \n        Product best = new Product();\n        \n        boolean more = true;\n        while(more) {\n            \n            \n            Product current = new Product();\n            \n            current.read(); // \n            if (current.is_better_than(best)) {\n                best = current;\n            }\n                            \n            System.out.println(&quot;More Products? 1:YES, 2:NO&quot;);\n            int answer  = in.nextInt();\n            if (answer != 1)\n                more = false;\n            in.nextLine();\n        \n        }\n        \n        best.printData(); \n    }\n}\n</code></pre>\n<p>When i type a name, a score and a price it displays what the prices that the variables were given at the beggining of the programm instead of the new ones</p>\n"},{"tags":["java","android","android-studio","android-viewbinding"],"comments":[{"owner":{"account_id":10510169,"reputation":18786,"user_id":7746134,"display_name":"Saurabh Thorat"},"score":0,"creation_date":1594703026,"post_id":62888211,"comment_id":111209908,"body_markdown":"What is the version of your Android Gradle Plugin?","body":"What is the version of your Android Gradle Plugin?"},{"owner":{"account_id":4288197,"reputation":588,"user_id":3505241,"display_name":"RedSIght"},"score":0,"creation_date":1594705396,"post_id":62888211,"comment_id":111210579,"body_markdown":"@SaurabhThorat  classpath &#39;com.google.gms:google-services:4.3.3&#39;","body":"@SaurabhThorat  classpath &#39;com.google.gms:google-services:4.3.3&#39;"},{"owner":{"account_id":10510169,"reputation":18786,"user_id":7746134,"display_name":"Saurabh Thorat"},"score":0,"creation_date":1594706911,"post_id":62888211,"comment_id":111211056,"body_markdown":"Not that one. In your project-level `build.gradle`, what is the version of `classpath &#39;com.android.tools.build:gradle:x.x.x`?","body":"Not that one. In your project-level <code>build.gradle</code>, what is the version of <code>classpath &#39;com.android.tools.build:gradle:x.x.x</code>?"},{"owner":{"account_id":4288197,"reputation":588,"user_id":3505241,"display_name":"RedSIght"},"score":0,"creation_date":1594711054,"post_id":62888211,"comment_id":111212740,"body_markdown":"@SaurabhThorat It&#39;s 4.0.0. I copied the wrong line.","body":"@SaurabhThorat It&#39;s 4.0.0. I copied the wrong line."}],"answers":[{"tags":[],"owner":{"account_id":11440512,"reputation":2403,"user_id":8386274,"display_name":"chand mohd"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1594702787,"creation_date":1594702115,"answer_id":62888262,"question_id":62888211,"body_markdown":"xml level inclose your xml root with &lt;/layout&gt; tag\r\n\r\n \r\n\r\n       &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;layout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\r\n    \r\n        &lt;data&gt;\r\n    \r\n        &lt;/data&gt;\r\n    \r\n        &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n        &lt;LinearLayout\r\n            xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;match_parent&quot;\r\n            android:orientation=&quot;vertical&quot;\r\n            &gt;\r\n    \r\n        &lt;include\r\n            android:id=&quot;@+id/topBar&quot;\r\n            layout=&quot;@layout/view_title&quot;/&gt;\r\n    &lt;/layout&gt;\r\n\r\n\r\n","title":"View binding with include layout not working","body":"<p>xml level inclose your xml root with  tag</p>\n<pre><code>   &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;layout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\n\n    &lt;data&gt;\n\n    &lt;/data&gt;\n\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n    &lt;LinearLayout\n        xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;match_parent&quot;\n        android:orientation=&quot;vertical&quot;\n        &gt;\n\n    &lt;include\n        android:id=&quot;@+id/topBar&quot;\n        layout=&quot;@layout/view_title&quot;/&gt;\n&lt;/layout&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4288197,"reputation":588,"user_id":3505241,"display_name":"RedSIght"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1700036443,"creation_date":1595818801,"answer_id":63108101,"question_id":62888211,"body_markdown":"I do nothing on it and it just works automatically. I surely did clean, rebuild, restart Android studio... something at that time but not working. Maybe link another layout in another class would trigger something just fix it under the hood cause I set aside this problem and keep going.\r\n\r\n2023/11/15 Update:\r\nIf you met any resource syncing problem in Android Studio, you can delete your whole folder and pull it from remote again. This would be  my last try for this kind of problem","title":"View binding with include layout not working","body":"<p>I do nothing on it and it just works automatically. I surely did clean, rebuild, restart Android studio... something at that time but not working. Maybe link another layout in another class would trigger something just fix it under the hood cause I set aside this problem and keep going.</p>\n<p>2023/11/15 Update:\nIf you met any resource syncing problem in Android Studio, you can delete your whole folder and pull it from remote again. This would be  my last try for this kind of problem</p>\n"},{"tags":[],"owner":{"account_id":8604168,"reputation":1277,"user_id":6444809,"display_name":"Mohammed Fathi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1642573921,"creation_date":1642573921,"answer_id":70766175,"question_id":62888211,"body_markdown":"in my case I was including a layout from another module and was not able to access the inner views in the included layout via binding and the problem was that I was not enabling the viewBinding in the module that contains the xml file that I wanted to include so adding \r\n\r\n    buildFeatures {\r\n            viewBinding true\r\n        }\r\n\r\nto the `gradle.build` of that module fixed it for me! ","title":"View binding with include layout not working","body":"<p>in my case I was including a layout from another module and was not able to access the inner views in the included layout via binding and the problem was that I was not enabling the viewBinding in the module that contains the xml file that I wanted to include so adding</p>\n<pre><code>buildFeatures {\n        viewBinding true\n    }\n</code></pre>\n<p>to the <code>gradle.build</code> of that module fixed it for me!</p>\n"}],"owner":{"account_id":4288197,"reputation":588,"user_id":3505241,"display_name":"RedSIght"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6345,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":63108101,"answer_count":3,"score":5,"last_activity_date":1700036443,"creation_date":1594701658,"question_id":62888211,"body_markdown":"I want to use view binding to bind the view in include layout. I had given the included layout with an id &#39;topBar&#39; but still failed to access the views inside of it. And I try to use Android studio auto-fix to create a local variable to see its type. It shows type &quot;android.widget . a&quot;\r\nI am using Android Studio4.0. Is this a bug in Android Studio?\r\n\r\nMy Activity\r\n```\r\n    private ActivityWalletBinding viewBinding;\r\n    private ViewTitleBinding topBarBinding;\r\n\r\n    @Override\r\n    protected void onCreate(@Nullable Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        viewBinding = ActivityWalletBinding.inflate(getLayoutInflater());\r\n        setContentView(viewBinding.getRoot());\r\n        viewBinding.topBar;\r\n        android.widget . a = viewBinding.topBar; //Create local var using auto fix in android \r\nstudio \r\n}\r\n```\r\n\r\n\r\nactivity_wallet.xml\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;LinearLayout\r\n    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;\r\n    android:orientation=&quot;vertical&quot;\r\n    &gt;\r\n\r\n    &lt;include\r\n        android:id=&quot;@+id/topBar&quot;\r\n        layout=&quot;@layout/view_title&quot;/&gt;\r\n```\r\n\r\n\r\nview_title.xml\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;FrameLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;65dp&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:background=&quot;@color/white&quot;\r\n    android:paddingTop=&quot;19dp&quot;\r\n    android:id=&quot;@+id/fl_tab&quot;&gt;\r\n    &lt;RelativeLayout\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        &gt;\r\n        &lt;ImageView\r\n            android:id=&quot;@+id/btn_back&quot;\r\n            android:layout_width=&quot;39dp&quot;\r\n            android:layout_height=&quot;39dp&quot;\r\n            android:layout_centerVertical=&quot;true&quot;\r\n            android:onClick=&quot;backClick&quot;\r\n            android:padding=&quot;11dp&quot;\r\n            android:src=&quot;@mipmap/icon_back&quot;\r\n            android:tint=&quot;@color/gray1&quot;\r\n            /&gt;\r\n        &lt;TextView\r\n            android:id=&quot;@+id/titleView&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;match_parent&quot;\r\n            android:layout_centerHorizontal=&quot;true&quot;\r\n            android:gravity=&quot;center&quot;\r\n            android:textColor=&quot;@color/textColor&quot;\r\n            android:textSize=&quot;18sp&quot;\r\n            android:textStyle=&quot;bold&quot;\r\n            /&gt;\r\n        &lt;TextView\r\n            android:id=&quot;@+id/tv_right_title&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;match_parent&quot;\r\n            android:layout_centerHorizontal=&quot;true&quot;\r\n            android:gravity=&quot;center&quot;\r\n            android:layout_alignParentRight=&quot;true&quot;\r\n            android:layout_marginRight=&quot;11dp&quot;\r\n            android:textColor=&quot;@color/enable_right_title&quot;\r\n            android:textSize=&quot;15sp&quot;\r\n            tools:text=&quot;假文字&quot;\r\n            /&gt;\r\n    &lt;/RelativeLayout&gt;\r\n&lt;/FrameLayout&gt;\r\n```\r\n\r\n\r\n\r\nIs this a bug for android studio or something?","title":"View binding with include layout not working","body":"<p>I want to use view binding to bind the view in include layout. I had given the included layout with an id 'topBar' but still failed to access the views inside of it. And I try to use Android studio auto-fix to create a local variable to see its type. It shows type &quot;android.widget . a&quot;\nI am using Android Studio4.0. Is this a bug in Android Studio?</p>\n<p>My Activity</p>\n<pre><code>    private ActivityWalletBinding viewBinding;\n    private ViewTitleBinding topBarBinding;\n\n    @Override\n    protected void onCreate(@Nullable Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        viewBinding = ActivityWalletBinding.inflate(getLayoutInflater());\n        setContentView(viewBinding.getRoot());\n        viewBinding.topBar;\n        android.widget . a = viewBinding.topBar; //Create local var using auto fix in android \nstudio \n}\n</code></pre>\n<p>activity_wallet.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;LinearLayout\n    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    android:orientation=&quot;vertical&quot;\n    &gt;\n\n    &lt;include\n        android:id=&quot;@+id/topBar&quot;\n        layout=&quot;@layout/view_title&quot;/&gt;\n</code></pre>\n<p>view_title.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;FrameLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;65dp&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:background=&quot;@color/white&quot;\n    android:paddingTop=&quot;19dp&quot;\n    android:id=&quot;@+id/fl_tab&quot;&gt;\n    &lt;RelativeLayout\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;match_parent&quot;\n        &gt;\n        &lt;ImageView\n            android:id=&quot;@+id/btn_back&quot;\n            android:layout_width=&quot;39dp&quot;\n            android:layout_height=&quot;39dp&quot;\n            android:layout_centerVertical=&quot;true&quot;\n            android:onClick=&quot;backClick&quot;\n            android:padding=&quot;11dp&quot;\n            android:src=&quot;@mipmap/icon_back&quot;\n            android:tint=&quot;@color/gray1&quot;\n            /&gt;\n        &lt;TextView\n            android:id=&quot;@+id/titleView&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;match_parent&quot;\n            android:layout_centerHorizontal=&quot;true&quot;\n            android:gravity=&quot;center&quot;\n            android:textColor=&quot;@color/textColor&quot;\n            android:textSize=&quot;18sp&quot;\n            android:textStyle=&quot;bold&quot;\n            /&gt;\n        &lt;TextView\n            android:id=&quot;@+id/tv_right_title&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;match_parent&quot;\n            android:layout_centerHorizontal=&quot;true&quot;\n            android:gravity=&quot;center&quot;\n            android:layout_alignParentRight=&quot;true&quot;\n            android:layout_marginRight=&quot;11dp&quot;\n            android:textColor=&quot;@color/enable_right_title&quot;\n            android:textSize=&quot;15sp&quot;\n            tools:text=&quot;假文字&quot;\n            /&gt;\n    &lt;/RelativeLayout&gt;\n&lt;/FrameLayout&gt;\n</code></pre>\n<p>Is this a bug for android studio or something?</p>\n"},{"tags":["java","eclipse-plugin","eclipse-rcp","rcp"],"comments":[{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1700037453,"post_id":77486084,"comment_id":136604440,"body_markdown":"The translation packages are not complete, and this is because there a many companies that build Eclipse-based applications consuming language packages but do not contribute to them. In the early days of Eclipse, there were complete language packages donated by IBM. But that was years ago. With the [pseudo translations](https://download.eclipse.org/technology/babel/babel_language_packs/latest/index.php#en_AA) language packs you can find out whether the string has be externalized and if so, the keys of the strings.","body":"The translation packages are not complete, and this is because there a many companies that build Eclipse-based applications consuming language packages but do not contribute to them. In the early days of Eclipse, there were complete language packages donated by IBM. But that was years ago. With the <a href=\"https://download.eclipse.org/technology/babel/babel_language_packs/latest/index.php#en_AA\" rel=\"nofollow noreferrer\">pseudo translations</a> language packs you can find out whether the string has be externalized and if so, the keys of the strings."},{"owner":{"account_id":341185,"reputation":16364,"user_id":671639,"accept_rate":69,"display_name":"BetaRide"},"score":0,"creation_date":1700038399,"post_id":77486084,"comment_id":136604609,"body_markdown":"I don&#39;t think this is the problem. I checked for the org.eclipse.ui.edit.delete command and it&#39;s available in the german translation of babel. Important: In 99% of all &quot;runs&quot; the client shows the correct labels in german. But in 1% they are missing (or not used).","body":"I don&#39;t think this is the problem. I checked for the org.eclipse.ui.edit.delete command and it&#39;s available in the german translation of babel. Important: In 99% of all &quot;runs&quot; the client shows the correct labels in german. But in 1% they are missing (or not used)."},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1700039719,"post_id":77486084,"comment_id":136604827,"body_markdown":"Use the pseudo translations language pack to track it down. Is this reproducible in the Eclipse SDK? You might have code that sets the language programmatically (when it happens, check whether _Window &gt; New Window_ is also affected).","body":"Use the pseudo translations language pack to track it down. Is this reproducible in the Eclipse SDK? You might have code that sets the language programmatically (when it happens, check whether <i>Window &gt; New Window</i> is also affected)."},{"owner":{"account_id":341185,"reputation":16364,"user_id":671639,"accept_rate":69,"display_name":"BetaRide"},"score":0,"creation_date":1700472456,"post_id":77486084,"comment_id":136654334,"body_markdown":"No it&#39;s not reproducible. The translation is clearly there. But for some reason it is not always used.","body":"No it&#39;s not reproducible. The translation is clearly there. But for some reason it is not always used."}],"owner":{"account_id":341185,"reputation":16364,"user_id":671639,"accept_rate":69,"display_name":"BetaRide"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1700036413,"creation_date":1700035670,"question_id":77486084,"body_markdown":"Our RCP client application has german and french translations. For all the standard commands like Delete or Cancel we include the org.eclipse.babel. Most of the time this works fine and delete menu items or cancel buttons are translated to german or french.\r\n\r\nBut sometimes we see this standard labels in english, while all our own translations are shown in the correct language.\r\n\r\n[![enter image description here][2]][2]\r\n[![enter image description here][1]][1]\r\n\r\nWe did not find any rule why this happens. We see this behaviour occasionaly on different plattforms: when we start the product in eclispe for debugging, standalone on windows, on jenkins (for automated gui tests) or even when the client is used from citrix.\r\n\r\nWe have a target plattform definition which includes:\r\n\r\n    &lt;location includeAllPlatforms=&quot;false&quot; includeConfigurePhase=&quot;true&quot; includeMode=&quot;planner&quot; includeSource=&quot;true&quot; type=&quot;InstallableUnit&quot;&gt;\r\n        &lt;repository location=&quot;https://download.eclipse.org/technology/babel/update-site/R0.20.0/2022-12/&quot;/&gt;\r\n        &lt;unit id=&quot;org.eclipse.babel.nls_eclipse_de.feature.group&quot; version=&quot;4.26.0.v20230220105658&quot;/&gt;\r\n        &lt;unit id=&quot;org.eclipse.babel.nls_eclipse_fr.feature.group&quot; version=&quot;4.26.0.v20230220105658&quot;/&gt;\r\n        &lt;unit id=&quot;org.eclipse.babel.nls_eclipse_it.feature.group&quot; version=&quot;4.26.0.v20230220105658&quot;/&gt;\r\n    &lt;/location&gt;\r\n\r\nWe define a menu entry with the standard delete command in the plugin.xml like this:\r\n\r\n    &lt;command commandId=&quot;org.eclipse.ui.edit.delete&quot;&gt;\r\n    \t&lt;visibleWhen checkEnabled=&quot;true&quot;&gt;\r\n    \t\t&lt;and&gt;\r\n    \t\t\t&lt;with variable=&quot;AuftragRW&quot;&gt;\r\n    \t\t\t\t&lt;equals value=&quot;AuftragRW&quot;/&gt;\r\n    \t\t\t&lt;/with&gt;\r\n    \t\t&lt;/and&gt;\r\n    \t&lt;/visibleWhen&gt;\r\n    &lt;/command&gt;\r\n\r\nWe use the -nl switch up on start-up to set the language\r\n\r\n    -nl de_CH\r\n\r\nFor good measure we also set some more VM Arguments\r\n\r\n    -Duser.country=CH\r\n    -Duser.language=de\r\n    -Dosgi.nl=de_CH\r\n\r\nOur own translations are located in the standar folder of every bundle\r\n\r\n    OSGI-INF\r\n    └── l10n\r\n        ├── bundle.properties (german translations)\r\n        ├── bundle_fr.properties\r\n        └── bundle_it.properties    \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/jTLEx.png\r\n  [2]: https://i.stack.imgur.com/MNGHp.png\r\n\r\n\r\nAny idea why this happens?","title":"org.eclipse.babel labels displayed in the wrong language","body":"<p>Our RCP client application has german and french translations. For all the standard commands like Delete or Cancel we include the org.eclipse.babel. Most of the time this works fine and delete menu items or cancel buttons are translated to german or french.</p>\n<p>But sometimes we see this standard labels in english, while all our own translations are shown in the correct language.</p>\n<p><a href=\"https://i.stack.imgur.com/MNGHp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/MNGHp.png\" alt=\"enter image description here\" /></a>\n<a href=\"https://i.stack.imgur.com/jTLEx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jTLEx.png\" alt=\"enter image description here\" /></a></p>\n<p>We did not find any rule why this happens. We see this behaviour occasionaly on different plattforms: when we start the product in eclispe for debugging, standalone on windows, on jenkins (for automated gui tests) or even when the client is used from citrix.</p>\n<p>We have a target plattform definition which includes:</p>\n<pre><code>&lt;location includeAllPlatforms=&quot;false&quot; includeConfigurePhase=&quot;true&quot; includeMode=&quot;planner&quot; includeSource=&quot;true&quot; type=&quot;InstallableUnit&quot;&gt;\n    &lt;repository location=&quot;https://download.eclipse.org/technology/babel/update-site/R0.20.0/2022-12/&quot;/&gt;\n    &lt;unit id=&quot;org.eclipse.babel.nls_eclipse_de.feature.group&quot; version=&quot;4.26.0.v20230220105658&quot;/&gt;\n    &lt;unit id=&quot;org.eclipse.babel.nls_eclipse_fr.feature.group&quot; version=&quot;4.26.0.v20230220105658&quot;/&gt;\n    &lt;unit id=&quot;org.eclipse.babel.nls_eclipse_it.feature.group&quot; version=&quot;4.26.0.v20230220105658&quot;/&gt;\n&lt;/location&gt;\n</code></pre>\n<p>We define a menu entry with the standard delete command in the plugin.xml like this:</p>\n<pre><code>&lt;command commandId=&quot;org.eclipse.ui.edit.delete&quot;&gt;\n    &lt;visibleWhen checkEnabled=&quot;true&quot;&gt;\n        &lt;and&gt;\n            &lt;with variable=&quot;AuftragRW&quot;&gt;\n                &lt;equals value=&quot;AuftragRW&quot;/&gt;\n            &lt;/with&gt;\n        &lt;/and&gt;\n    &lt;/visibleWhen&gt;\n&lt;/command&gt;\n</code></pre>\n<p>We use the -nl switch up on start-up to set the language</p>\n<pre><code>-nl de_CH\n</code></pre>\n<p>For good measure we also set some more VM Arguments</p>\n<pre><code>-Duser.country=CH\n-Duser.language=de\n-Dosgi.nl=de_CH\n</code></pre>\n<p>Our own translations are located in the standar folder of every bundle</p>\n<pre><code>OSGI-INF\n└── l10n\n    ├── bundle.properties (german translations)\n    ├── bundle_fr.properties\n    └── bundle_it.properties    \n</code></pre>\n<p>Any idea why this happens?</p>\n"},{"tags":["java","jpackage"],"comments":[{"owner":{"account_id":4555218,"reputation":32585,"user_id":3699139,"display_name":"Jorn Vernee"},"score":0,"creation_date":1668865627,"post_id":74498307,"comment_id":131512450,"body_markdown":"Are `light` and `candle` not included in `wix 4`? They have to be on the PATH I think for `jpackage` to find them.","body":"Are <code>light</code> and <code>candle</code> not included in <code>wix 4</code>? They have to be on the PATH I think for <code>jpackage</code> to find them."},{"owner":{"account_id":6179310,"reputation":2644,"user_id":4815321,"display_name":"mr mcwolf"},"score":0,"creation_date":1668870319,"post_id":74498307,"comment_id":131513438,"body_markdown":"@JornVernee, Yes, in `wix 4` the two tools, `light.exe` and `candle.exe` are replaced by a common one named `wix.exe`. The new `wix.exe` tool has an option to convert projects from `wix 3` to `wix 4` which gives a chance to manually migrate a package already generated by `jpakager` with `wix 3` (as long as its temp files are available). But I don&#39;t know if the effort is worth it. I find it easier to generate the app-image with `jpakager` (or if I use my launcher with `jlink`) and do the installer with `inno setup` (due to fewer dependencies).","body":"@JornVernee, Yes, in <code>wix 4</code> the two tools, <code>light.exe</code> and <code>candle.exe</code> are replaced by a common one named <code>wix.exe</code>. The new <code>wix.exe</code> tool has an option to convert projects from <code>wix 3</code> to <code>wix 4</code> which gives a chance to manually migrate a package already generated by <code>jpakager</code> with <code>wix 3</code> (as long as its temp files are available). But I don&#39;t know if the effort is worth it. I find it easier to generate the app-image with <code>jpakager</code> (or if I use my launcher with <code>jlink</code>) and do the installer with <code>inno setup</code> (due to fewer dependencies)."},{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":3,"creation_date":1679987295,"post_id":74498307,"comment_id":133814801,"body_markdown":"Did you learn anything more about this? Is there an enhancement request to support Wix 4 (I couldn&#39;t find any)?","body":"Did you learn anything more about this? Is there an enhancement request to support Wix 4 (I couldn&#39;t find any)?"},{"owner":{"account_id":1480323,"reputation":273,"user_id":1389877,"accept_rate":0,"display_name":"Michael Ellis"},"score":1,"creation_date":1688998061,"post_id":74498307,"comment_id":135146908,"body_markdown":"Just to add I have the identical problem. I am using jpackage version: 17.0.7 the version of jpackage that sipped with my GraalVM v17. Is jpackage that ships with  GraalVM v20, Wix 4 compatible?","body":"Just to add I have the identical problem. I am using jpackage version: 17.0.7 the version of jpackage that sipped with my GraalVM v17. Is jpackage that ships with  GraalVM v20, Wix 4 compatible?"},{"owner":{"account_id":18506166,"reputation":147,"user_id":13482411,"display_name":"joakie"},"score":0,"creation_date":1694770089,"post_id":74498307,"comment_id":135937842,"body_markdown":"I ran into this issue as well. I reluctantly downloaded .Net 3.5.1 and WiX 3. Managed to produce an installer but it wouldn’t run. I’m not gonna investigate further because it all seems like a suboptimal solution until WiX 4 is supported. To avoid ambiguity they should anyway change the requirements to something like “WiX (&gt;3.0 &amp;&amp; &lt;4.0) is required”.","body":"I ran into this issue as well. I reluctantly downloaded .Net 3.5.1 and WiX 3. Managed to produce an installer but it wouldn’t run. I’m not gonna investigate further because it all seems like a suboptimal solution until WiX 4 is supported. To avoid ambiguity they should anyway change the requirements to something like “WiX (&gt;3.0 &amp;&amp; &lt;4.0) is required”."},{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":1,"creation_date":1699294852,"post_id":74498307,"comment_id":136511098,"body_markdown":"There&#39;s now an enhancement request to support WiX v4: [JDK-8319457](https://bugs.openjdk.org/browse/JDK-8319457). We&#39;ll see if something comes of it.","body":"There&#39;s now an enhancement request to support WiX v4: <a href=\"https://bugs.openjdk.org/browse/JDK-8319457\" rel=\"nofollow noreferrer\">JDK-8319457</a>. We&#39;ll see if something comes of it."}],"answers":[{"tags":[],"owner":{"account_id":3177795,"reputation":1503,"user_id":2685239,"display_name":"mariusm"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1700036288,"creation_date":1699613758,"answer_id":77459463,"question_id":74498307,"body_markdown":"Workaround using `wix-3` (no need to mess with dotnet):\r\n\r\n1. Download `wix311-binaries.zip` from [WiX Toolset v3 releases](https://github.com/wixtoolset/wix3/releases)\r\n2. Unpack the archive into `wix3` folder\r\n3. Add the `wix3` folder to `PATH` environment variable\r\n4. Restart your terminal for the PATH setting to take effect\r\n5. Try `jpackage` again","title":"Use jpackage with WiX 4","body":"<p>Workaround using <code>wix-3</code> (no need to mess with dotnet):</p>\n<ol>\n<li>Download <code>wix311-binaries.zip</code> from <a href=\"https://github.com/wixtoolset/wix3/releases\" rel=\"nofollow noreferrer\">WiX Toolset v3 releases</a></li>\n<li>Unpack the archive into <code>wix3</code> folder</li>\n<li>Add the <code>wix3</code> folder to <code>PATH</code> environment variable</li>\n<li>Restart your terminal for the PATH setting to take effect</li>\n<li>Try <code>jpackage</code> again</li>\n</ol>\n"}],"owner":{"account_id":6179310,"reputation":2644,"user_id":4815321,"display_name":"mr mcwolf"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":992,"favorite_count":0,"down_vote_count":1,"up_vote_count":13,"answer_count":1,"score":12,"last_activity_date":1700036288,"creation_date":1668843782,"question_id":74498307,"body_markdown":"I am trying to package an application with `jpackage` for Windows. I am using `Java 19` and `WiX 4`.\r\n\r\n    Package Id      Version              Commands\r\n    ---------------------------------------------\r\n    wix             4.0.0-preview.1      wix\r\n\r\n&lt;!-- --&gt;\r\n\r\n    java 19.0.1 2022-10-18\r\n    Java(TM) SE Runtime Environment (build 19.0.1+10-21)\r\n    Java HotSpot(TM) 64-Bit Server VM (build 19.0.1+10-21, mixed mode, sharing)\r\n\r\nAccording to the `Packaging Tool User&#39;s Guide`, the requirements for generating an installation package for windows are:\r\n&gt; WiX 3.0 or later is required.\r\n\r\nHowever, when trying to generate a package I get an error:\r\n\r\n    [09:26:34.026] Can not find WiX tools (light.exe, candle.exe)\r\n    [09:26:34.026] Download WiX 3.0 or later from https://wixtoolset.org and add it to the PATH.\r\n\r\nThe very nature of the problem is clear. `jpackage` does not support `WiX 4`, although it is not written anywhere in plain text.\r\n\r\nThe solution is also clear, I install `WiX 3`. However, here comes the &quot;problem&quot;. `WiX 3` requires an old version of .Net (3.5.1) or at least &quot;Windows features .Net 3.5.1&quot;. However, this is what I want to avoid.\r\n\r\nMy question is, as of today, is there a way to directly use `WiX 4` with `jpackage`?","title":"Use jpackage with WiX 4","body":"<p>I am trying to package an application with <code>jpackage</code> for Windows. I am using <code>Java 19</code> and <code>WiX 4</code>.</p>\n<pre><code>Package Id      Version              Commands\n---------------------------------------------\nwix             4.0.0-preview.1      wix\n</code></pre>\n\n<pre><code>java 19.0.1 2022-10-18\nJava(TM) SE Runtime Environment (build 19.0.1+10-21)\nJava HotSpot(TM) 64-Bit Server VM (build 19.0.1+10-21, mixed mode, sharing)\n</code></pre>\n<p>According to the <code>Packaging Tool User's Guide</code>, the requirements for generating an installation package for windows are:</p>\n<blockquote>\n<p>WiX 3.0 or later is required.</p>\n</blockquote>\n<p>However, when trying to generate a package I get an error:</p>\n<pre><code>[09:26:34.026] Can not find WiX tools (light.exe, candle.exe)\n[09:26:34.026] Download WiX 3.0 or later from https://wixtoolset.org and add it to the PATH.\n</code></pre>\n<p>The very nature of the problem is clear. <code>jpackage</code> does not support <code>WiX 4</code>, although it is not written anywhere in plain text.</p>\n<p>The solution is also clear, I install <code>WiX 3</code>. However, here comes the &quot;problem&quot;. <code>WiX 3</code> requires an old version of .Net (3.5.1) or at least &quot;Windows features .Net 3.5.1&quot;. However, this is what I want to avoid.</p>\n<p>My question is, as of today, is there a way to directly use <code>WiX 4</code> with <code>jpackage</code>?</p>\n"},{"tags":["java","sql","kotlin","generics","jooq"],"answers":[{"tags":[],"owner":{"account_id":247217,"reputation":213455,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1700036198,"creation_date":1700036198,"answer_id":77486127,"question_id":77485541,"body_markdown":"### Solving the type safety problem\r\n\r\n[Kotlin doesn&#39;t have the equivalent of Java&#39;s rawtypes][1], but you can always unsafe cast like this:\r\n\r\n```kotlin\r\n.and((idField as Field&lt;String&gt;).eq(&quot;myId&quot;))\r\n.and((createTimeField as Field&lt;Instant&gt;).lt(Instant.ofEpochMilli(123456)))\r\n```\r\n\r\nOr, rather than using a simple map, you write a more sophisticated utility (wrapping a map) that takes care of the typing.\r\n\r\n### Alternative approach to your *actual* problem\r\n\r\nYour actual problem seems to be having reusable columns across your schema. You could declare an interface returning those columns from any table and let generated tables extend this interface using a [generator strategy][2] or a [matcher strategy][3].\r\n\r\nE.g.\r\n\r\n```kotlin\r\ninterface MyJooqTable&lt;R : Record&gt; : Table&lt;R&gt; {\r\n    fun tagId(): Field&lt;String&gt; = field(&quot;tag_id&quot;, SQLDataType.STRING)\r\n    fun createdDate(): Field&lt;Instant&gt; = field(&quot;CREATED_DATE&quot;, SQLDataType.INSTANT)\r\n}\r\n```\r\n\r\nNow you can pass around `MyJooqTable` references to your utilities and type safely dereference your columns from it, assuming the columns exist.\r\n\r\n\r\n  [1]: https://stackoverflow.com/q/46828680/521799\r\n  [2]: https://www.jooq.org/doc/latest/manual/code-generation/codegen-generatorstrategy/\r\n  [3]: https://www.jooq.org/doc/latest/manual/code-generation/codegen-matcherstrategy/","title":"How can I use Jooq to create a dynamic Condition generator using Kotlin based on included working Java code?","body":"<h3>Solving the type safety problem</h3>\n<p><a href=\"https://stackoverflow.com/q/46828680/521799\">Kotlin doesn't have the equivalent of Java's rawtypes</a>, but you can always unsafe cast like this:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>.and((idField as Field&lt;String&gt;).eq(&quot;myId&quot;))\n.and((createTimeField as Field&lt;Instant&gt;).lt(Instant.ofEpochMilli(123456)))\n</code></pre>\n<p>Or, rather than using a simple map, you write a more sophisticated utility (wrapping a map) that takes care of the typing.</p>\n<h3>Alternative approach to your <em>actual</em> problem</h3>\n<p>Your actual problem seems to be having reusable columns across your schema. You could declare an interface returning those columns from any table and let generated tables extend this interface using a <a href=\"https://www.jooq.org/doc/latest/manual/code-generation/codegen-generatorstrategy/\" rel=\"nofollow noreferrer\">generator strategy</a> or a <a href=\"https://www.jooq.org/doc/latest/manual/code-generation/codegen-matcherstrategy/\" rel=\"nofollow noreferrer\">matcher strategy</a>.</p>\n<p>E.g.</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>interface MyJooqTable&lt;R : Record&gt; : Table&lt;R&gt; {\n    fun tagId(): Field&lt;String&gt; = field(&quot;tag_id&quot;, SQLDataType.STRING)\n    fun createdDate(): Field&lt;Instant&gt; = field(&quot;CREATED_DATE&quot;, SQLDataType.INSTANT)\n}\n</code></pre>\n<p>Now you can pass around <code>MyJooqTable</code> references to your utilities and type safely dereference your columns from it, assuming the columns exist.</p>\n"}],"owner":{"account_id":29906194,"reputation":3,"user_id":22918638,"display_name":"Chris"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77486127,"answer_count":1,"score":0,"last_activity_date":1700036198,"creation_date":1700027800,"question_id":77485541,"body_markdown":"I would like to use Jooq with the Kotlin language to create a way to dynamically generate Jooq Condition objects.\r\n\r\nI want to put Jooq Field objects in a Kotlin Map from String to TableField (a Jooq class). I want to pull values from this map and use them to build the Condition object.\r\n\r\n\r\nI have a simple proof of concept of this working with Java that I coded in the form of a unit test. That code looks like this (omitted the imports and class, but this is the idea.\r\n\r\n\r\n```\r\n    private static final Map&lt;String, TableField&gt; FIELDS = Map.of(\r\n            &quot;tagId&quot;, TagV2Table.Companion.getTAG_V2().getTAG_ID(),\r\n            &quot;createdDate&quot;, ApplicationTable.Companion.getAPPLICATION().getCREATED_DATE()\r\n    );\r\n\r\n    @Test\r\n    void testDynamicGeneration() {\r\n        TableField idField = FIELDS.get(&quot;tagId&quot;);\r\n        TableField createTimeField = FIELDS.get(&quot;createdDate&quot;);\r\n\r\n        final Condition condition = noCondition()\r\n                .and(idField.eq(&quot;myId&quot;))\r\n                .and(createTimeField.lt(Instant.ofEpochMilli(123456)));\r\n\r\n        final String expected = &quot;(\\n&quot; +\r\n                &quot;  \\&quot;public\\&quot;.\\&quot;tag_v2\\&quot;.\\&quot;tag_id\\&quot; = &#39;myId&#39;\\n&quot; +\r\n                &quot;  and \\&quot;public\\&quot;.\\&quot;application\\&quot;.\\&quot;created_date\\&quot; &lt; timestamp with time zone &#39;1970-01-01 00:02:03.456+00:00&#39;\\n&quot; +\r\n                &quot;)&quot;;\r\n        assertEquals(expected, condition.toString());\r\n\r\n```\r\n\r\nThe condition that gets created is what is in &quot;expected&quot;, which is what I want.\r\n\r\nIf I try and translate the same code into Kotlin, I get compilation errors, which I am pretty sure is due to the &quot;out&quot; on the Map. But I don&#39;t know enough to know how to fix it. This is the equivalent Kotlin code I wrote:\r\n\r\n```\r\n    private companion object {\r\n        // The IntelliJ inferred type is:\r\n        //  Map&lt;String, TableField&lt;out UpdatableRecordImpl&lt;*&gt;, out Any?&gt;&gt;\r\n        // AFAICT, the &quot;out&quot; of &quot;out Any?&quot; is making the &quot;.eq&quot; and &quot;.lt&quot; functions unavailable\r\n        // because it&#39;s unsafe.\r\n        val fields = mapOf(\r\n            &quot;tagId&quot; to TAG_V2.TAG_ID,\r\n            &quot;createdDate&quot; to APPLICATION.CREATED_DATE,\r\n        )\r\n    }\r\n\r\n    @Test\r\n    fun testDynamicGenerationKotlin() {\r\n        val idField = fields[&quot;tagId&quot;]\r\n        val createTimeField = fields[&quot;createdDate&quot;]\r\n\r\n        val condition = noCondition()\r\n            // .eq and .lt &quot;None of the following functions can be called with the arguments supplied&quot;\r\n            // and the accepted arguments are all Nothing\r\n            .and(idField.eq(&quot;myId&quot;))\r\n            .and(createTimeField.lt(Instant.ofEpochMilli(123456)))\r\n    }\r\n```\r\n\r\nThe issue is that the functions `.eq(...)` and `.lt(...)` are not available on the objects `idField` and `createTimeField` that get pulled out of the Map.\r\n\r\nIs there a way for me to declare this Map such that the Kotlin code will work (like the Java code does)?","title":"How can I use Jooq to create a dynamic Condition generator using Kotlin based on included working Java code?","body":"<p>I would like to use Jooq with the Kotlin language to create a way to dynamically generate Jooq Condition objects.</p>\n<p>I want to put Jooq Field objects in a Kotlin Map from String to TableField (a Jooq class). I want to pull values from this map and use them to build the Condition object.</p>\n<p>I have a simple proof of concept of this working with Java that I coded in the form of a unit test. That code looks like this (omitted the imports and class, but this is the idea.</p>\n<pre><code>    private static final Map&lt;String, TableField&gt; FIELDS = Map.of(\n            &quot;tagId&quot;, TagV2Table.Companion.getTAG_V2().getTAG_ID(),\n            &quot;createdDate&quot;, ApplicationTable.Companion.getAPPLICATION().getCREATED_DATE()\n    );\n\n    @Test\n    void testDynamicGeneration() {\n        TableField idField = FIELDS.get(&quot;tagId&quot;);\n        TableField createTimeField = FIELDS.get(&quot;createdDate&quot;);\n\n        final Condition condition = noCondition()\n                .and(idField.eq(&quot;myId&quot;))\n                .and(createTimeField.lt(Instant.ofEpochMilli(123456)));\n\n        final String expected = &quot;(\\n&quot; +\n                &quot;  \\&quot;public\\&quot;.\\&quot;tag_v2\\&quot;.\\&quot;tag_id\\&quot; = 'myId'\\n&quot; +\n                &quot;  and \\&quot;public\\&quot;.\\&quot;application\\&quot;.\\&quot;created_date\\&quot; &lt; timestamp with time zone '1970-01-01 00:02:03.456+00:00'\\n&quot; +\n                &quot;)&quot;;\n        assertEquals(expected, condition.toString());\n\n</code></pre>\n<p>The condition that gets created is what is in &quot;expected&quot;, which is what I want.</p>\n<p>If I try and translate the same code into Kotlin, I get compilation errors, which I am pretty sure is due to the &quot;out&quot; on the Map. But I don't know enough to know how to fix it. This is the equivalent Kotlin code I wrote:</p>\n<pre><code>    private companion object {\n        // The IntelliJ inferred type is:\n        //  Map&lt;String, TableField&lt;out UpdatableRecordImpl&lt;*&gt;, out Any?&gt;&gt;\n        // AFAICT, the &quot;out&quot; of &quot;out Any?&quot; is making the &quot;.eq&quot; and &quot;.lt&quot; functions unavailable\n        // because it's unsafe.\n        val fields = mapOf(\n            &quot;tagId&quot; to TAG_V2.TAG_ID,\n            &quot;createdDate&quot; to APPLICATION.CREATED_DATE,\n        )\n    }\n\n    @Test\n    fun testDynamicGenerationKotlin() {\n        val idField = fields[&quot;tagId&quot;]\n        val createTimeField = fields[&quot;createdDate&quot;]\n\n        val condition = noCondition()\n            // .eq and .lt &quot;None of the following functions can be called with the arguments supplied&quot;\n            // and the accepted arguments are all Nothing\n            .and(idField.eq(&quot;myId&quot;))\n            .and(createTimeField.lt(Instant.ofEpochMilli(123456)))\n    }\n</code></pre>\n<p>The issue is that the functions <code>.eq(...)</code> and <code>.lt(...)</code> are not available on the objects <code>idField</code> and <code>createTimeField</code> that get pulled out of the Map.</p>\n<p>Is there a way for me to declare this Map such that the Kotlin code will work (like the Java code does)?</p>\n"},{"tags":["java","android","default","kiosk"],"comments":[{"owner":{"account_id":39846,"reputation":991113,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":1,"creation_date":1700049729,"post_id":77486118,"comment_id":136606559,"body_markdown":"&quot;when click button1 I want to set my app as the home default app by changing the phone settings&quot; -- that is not an option.","body":"&quot;when click button1 I want to set my app as the home default app by changing the phone settings&quot; -- that is not an option."},{"owner":{"account_id":25454249,"reputation":1,"user_id":19255160,"display_name":"Nayani Madhusanki"},"score":0,"creation_date":1700720847,"post_id":77486118,"comment_id":136689604,"body_markdown":"Is there another way to do it programatically","body":"Is there another way to do it programatically"},{"owner":{"account_id":39846,"reputation":991113,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":0,"creation_date":1700743126,"post_id":77486118,"comment_id":136693461,"body_markdown":"You cannot force your app to be the home default app. The user needs to do this, for obvious security reasons.","body":"You cannot force your app to be the home default app. The user needs to do this, for obvious security reasons."},{"owner":{"account_id":25454249,"reputation":1,"user_id":19255160,"display_name":"Nayani Madhusanki"},"score":0,"creation_date":1701331468,"post_id":77486118,"comment_id":136763037,"body_markdown":"I want to create this for only specific devices. and with user permissions.","body":"I want to create this for only specific devices. and with user permissions."},{"owner":{"account_id":39846,"reputation":991113,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":0,"creation_date":1701346614,"post_id":77486118,"comment_id":136765642,"body_markdown":"In this case, &quot;user permissions&quot; means that you cannot &quot;set my app as the home default app by changing the phone settings&quot;. You can *offer* to be a launcher app, but whether you are the *default* launcher app is up to the user via system UI when they use HOME navigation.","body":"In this case, &quot;user permissions&quot; means that you cannot &quot;set my app as the home default app by changing the phone settings&quot;. You can <i>offer</i> to be a launcher app, but whether you are the <i>default</i> launcher app is up to the user via system UI when they use HOME navigation."}],"owner":{"account_id":25454249,"reputation":1,"user_id":19255160,"display_name":"Nayani Madhusanki"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1700036103,"creation_date":1700036103,"question_id":77486118,"body_markdown":"`I want to create android app using java and when install app it add to home default app list automatically. And add two buttons. when click button1  I want to set my app as the home default app by changing the phone settings. and when click button2 I want to deselect my app from the list and set default phone app. But without root access\r\n\r\n**I added below code to Manifest XML file**\r\n\r\n    &lt;category android:name=&quot;android.intent.category.HOME&quot; /&gt;\r\n    &lt;category android:name=&quot;android.intent.category.DEFAULT&quot; /&gt;\r\n\r\n**And added two buttons to main_activity.xml**\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        tools:context=&quot;.MainActivity&quot;&gt;\r\n\r\n        &lt;Button\r\n            android:id=&quot;@+id/button1&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:text=&quot;Start&quot;\r\n            android:onClick=&quot;setPreferred&quot;\r\n            app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n            app:layout_constraintTop_toTopOf=&quot;parent&quot;\r\n            app:layout_constraintVertical_bias=&quot;0.266&quot; /&gt;\r\n\r\n        &lt;Button\r\n            android:id=&quot;@+id/button2&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:text=&quot;Stop&quot;\r\n            android:onClick=&quot;clearPreferred&quot;\r\n            app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n            app:layout_constraintHorizontal_bias=&quot;0.503&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n            app:layout_constraintTop_toBottomOf=&quot;@+id/button1&quot;\r\n            app:layout_constraintVertical_bias=&quot;0.143&quot; /&gt;\r\n\r\n\r\n    &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\r\n\r\n**And created two methods in MainActivity.java **\r\n\r\n    public class MainActivity extends AppCompatActivity {\r\n\r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_main);\r\n        }\r\n\r\n        private void setPreferred() {\r\n            PackageManager pm = getPackageManager();\r\n            IntentFilter f = new IntentFilter(&quot;android.intent.action.MAIN&quot;);\r\n            f.addCategory(&quot;android.intent.category.HOME&quot;);\r\n            f.addCategory(&quot;android.intent.category.DEFAULT&quot;);\r\n            ComponentName cn = new ComponentName(&quot;com.rcs2.kiosktest&quot;, &quot;com.rcs2.kiosktest.MainActivity&quot;);\r\n            pm.addPreferredActivity(f, IntentFilter.MATCH_CATEGORY_EMPTY, null, cn);\r\n        }\r\n\r\n        private void clearPreferred() {\r\n            PackageManager pm = getPackageManager();\r\n            IntentFilter f = new IntentFilter(&quot;android.intent.action.MAIN&quot;);\r\n            f.addCategory(&quot;android.intent.category.HOME&quot;);\r\n            f.addCategory(&quot;android.intent.category.DEFAULT&quot;);\r\n            ComponentName cn = new ComponentName(&quot;com.rcs2.kiosktest&quot;, &quot;com.rcs2.kiosktest.MainActivity&quot;);\r\n            pm.clearPackagePreferredActivities(&quot;com.rcs2.kiosktest&quot;);\r\n        }\r\n    }\r\n\r\nBut didn&#39;t worked as I need`","title":"How to set android app as home default and remove it programmatically","body":"<p>`I want to create android app using java and when install app it add to home default app list automatically. And add two buttons. when click button1  I want to set my app as the home default app by changing the phone settings. and when click button2 I want to deselect my app from the list and set default phone app. But without root access</p>\n<p><strong>I added below code to Manifest XML file</strong></p>\n<pre><code>&lt;category android:name=&quot;android.intent.category.HOME&quot; /&gt;\n&lt;category android:name=&quot;android.intent.category.DEFAULT&quot; /&gt;\n</code></pre>\n<p><strong>And added two buttons to main_activity.xml</strong></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    tools:context=&quot;.MainActivity&quot;&gt;\n\n    &lt;Button\n        android:id=&quot;@+id/button1&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:text=&quot;Start&quot;\n        android:onClick=&quot;setPreferred&quot;\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;\n        app:layout_constraintVertical_bias=&quot;0.266&quot; /&gt;\n\n    &lt;Button\n        android:id=&quot;@+id/button2&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:text=&quot;Stop&quot;\n        android:onClick=&quot;clearPreferred&quot;\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintHorizontal_bias=&quot;0.503&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintTop_toBottomOf=&quot;@+id/button1&quot;\n        app:layout_constraintVertical_bias=&quot;0.143&quot; /&gt;\n\n\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n</code></pre>\n<p>**And created two methods in MainActivity.java **</p>\n<pre><code>public class MainActivity extends AppCompatActivity {\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n    }\n\n    private void setPreferred() {\n        PackageManager pm = getPackageManager();\n        IntentFilter f = new IntentFilter(&quot;android.intent.action.MAIN&quot;);\n        f.addCategory(&quot;android.intent.category.HOME&quot;);\n        f.addCategory(&quot;android.intent.category.DEFAULT&quot;);\n        ComponentName cn = new ComponentName(&quot;com.rcs2.kiosktest&quot;, &quot;com.rcs2.kiosktest.MainActivity&quot;);\n        pm.addPreferredActivity(f, IntentFilter.MATCH_CATEGORY_EMPTY, null, cn);\n    }\n\n    private void clearPreferred() {\n        PackageManager pm = getPackageManager();\n        IntentFilter f = new IntentFilter(&quot;android.intent.action.MAIN&quot;);\n        f.addCategory(&quot;android.intent.category.HOME&quot;);\n        f.addCategory(&quot;android.intent.category.DEFAULT&quot;);\n        ComponentName cn = new ComponentName(&quot;com.rcs2.kiosktest&quot;, &quot;com.rcs2.kiosktest.MainActivity&quot;);\n        pm.clearPackagePreferredActivities(&quot;com.rcs2.kiosktest&quot;);\n    }\n}\n</code></pre>\n<p>But didn't worked as I need`</p>\n"},{"tags":["java","android","gradle"],"answers":[{"tags":[],"owner":{"account_id":2918786,"reputation":637,"user_id":3576968,"display_name":"Daniel Schr&#246;der"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661263537,"creation_date":1661263537,"answer_id":73460222,"question_id":73459594,"body_markdown":"You&#39;re missing the `Version` part of the `compileSdkVersion`, `minSdkVersion` and `targetSdkVersion` variables.\r\n\r\nTry updating your `build.gradle` file to the following and see if it works.\r\n\r\n```groovy\r\nandroid {\r\n    compileSdkVersion 30\r\n    buildToolsVersion &quot;25.0.3&quot;\r\n    defaultConfig {\r\n        applicationId &quot;Net.er.bate.accel&quot;\r\n        minSdkVersion 19\r\n        targetSdkVersion 31\r\n        versionCode 1\r\n        versionName &quot;1.0&quot;\r\n        testInstrumentationRunner &quot;android.support.test.runner.AndroidJUnitRunner&quot;\r\n    }\r\n    buildTypes {\r\n        release {\r\n            minifyEnabled true\r\n            proguardFiles getDefaultProguardFile(&#39;proguard-android.txt&#39;), &#39;proguard-rules.pro&#39;\r\n        }\r\n```","title":"Caused by: org.gradle.internal.metaobject.AbstractDynamicObject$CustomMessageMissingMethodException: Could not find method compileSdk()","body":"<p>You're missing the <code>Version</code> part of the <code>compileSdkVersion</code>, <code>minSdkVersion</code> and <code>targetSdkVersion</code> variables.</p>\n<p>Try updating your <code>build.gradle</code> file to the following and see if it works.</p>\n<pre><code>android {\n    compileSdkVersion 30\n    buildToolsVersion &quot;25.0.3&quot;\n    defaultConfig {\n        applicationId &quot;Net.er.bate.accel&quot;\n        minSdkVersion 19\n        targetSdkVersion 31\n        versionCode 1\n        versionName &quot;1.0&quot;\n        testInstrumentationRunner &quot;android.support.test.runner.AndroidJUnitRunner&quot;\n    }\n    buildTypes {\n        release {\n            minifyEnabled true\n            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n        }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23592292,"reputation":1,"user_id":17629899,"display_name":"Md Jobayer Hossan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686773958,"creation_date":1686562293,"answer_id":76455287,"question_id":73459594,"body_markdown":"    android {\r\n        compileSdk 30\r\n        buildToolsVersion &quot;25.0.3&quot;\r\n        defaultConfig {\r\n            applicationId &quot;Net.er.bate.accel&quot;\r\n                minSdk 19\r\n            targetSdk 30\r\n            versionCode 1\r\n            versionName &quot;1.0&quot;\r\n            testInstrumentationRunner &quot;android.support.test.runner.AndroidJUnitRunner&quot;\r\n        }\r\n        buildTypes {\r\n            release {\r\n                minifyEnabled true\r\n                proguardFiles getDefaultProguardFile(&#39;proguard-android.txt&#39;), &#39;proguard-rules.pro&#39;\r\n            }","title":"Caused by: org.gradle.internal.metaobject.AbstractDynamicObject$CustomMessageMissingMethodException: Could not find method compileSdk()","body":"<pre><code>android {\n    compileSdk 30\n    buildToolsVersion &quot;25.0.3&quot;\n    defaultConfig {\n        applicationId &quot;Net.er.bate.accel&quot;\n            minSdk 19\n        targetSdk 30\n        versionCode 1\n        versionName &quot;1.0&quot;\n        testInstrumentationRunner &quot;android.support.test.runner.AndroidJUnitRunner&quot;\n    }\n    buildTypes {\n        release {\n            minifyEnabled true\n            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n        }\n</code></pre>\n"}],"owner":{"account_id":26139520,"reputation":11,"user_id":19829096,"display_name":"Alxis Jeffery"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":11487,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1700035560,"creation_date":1661261112,"question_id":73459594,"body_markdown":"Hello Guys i have this Problem Here with android studio , here is my sdk Installed : \r\n[my sdk installed except those 2][1]\r\n\r\n  [1]: https://i.stack.imgur.com/HgarG.jpg\r\n\r\nI got a problem like that :\r\n```\r\nCaused by: org.gradle.internal.metaobject.AbstractDynamicObject$CustomMessageMissingMethodException: Could not find method compileSdk() for arguments [30] on extension &#39;android&#39; of type com.android.build.gradle.internal.dsl.BaseAppModuleExtension.\r\n```\r\n```\r\nGradle sync failed: Could not find method compileSdk() for arguments [30] on extension &#39;android&#39; of type com.android.build.gradle.internal.dsl.BaseAppModuleExtension.\r\n```\r\n```\r\nCaused by: java.lang.IllegalStateException: compileSdkVersion is not specified.\r\n```\r\n\r\n\r\nMy `build.gradle` file :\r\n\r\n```\r\nandroid {\r\n    compileSdk 30\r\n    buildToolsVersion &quot;25.0.3&quot;\r\n    defaultConfig {\r\n        applicationId &quot;Net.er.bate.accel&quot;\r\n            minSdk 19\r\n        targetSdk 31\r\n        versionCode 1\r\n        versionName &quot;1.0&quot;\r\n        testInstrumentationRunner &quot;android.support.test.runner.AndroidJUnitRunner&quot;\r\n    }\r\n    buildTypes {\r\n        release {\r\n            minifyEnabled true\r\n            proguardFiles getDefaultProguardFile(&#39;proguard-android.txt&#39;), &#39;proguard-rules.pro&#39;\r\n        }\r\n```\r\n","title":"Caused by: org.gradle.internal.metaobject.AbstractDynamicObject$CustomMessageMissingMethodException: Could not find method compileSdk()","body":"<p>Hello Guys i have this Problem Here with android studio , here is my sdk Installed :\n<a href=\"https://i.stack.imgur.com/HgarG.jpg\" rel=\"nofollow noreferrer\">my sdk installed except those 2</a></p>\n<p>I got a problem like that :</p>\n<pre><code>Caused by: org.gradle.internal.metaobject.AbstractDynamicObject$CustomMessageMissingMethodException: Could not find method compileSdk() for arguments [30] on extension 'android' of type com.android.build.gradle.internal.dsl.BaseAppModuleExtension.\n</code></pre>\n<pre><code>Gradle sync failed: Could not find method compileSdk() for arguments [30] on extension 'android' of type com.android.build.gradle.internal.dsl.BaseAppModuleExtension.\n</code></pre>\n<pre><code>Caused by: java.lang.IllegalStateException: compileSdkVersion is not specified.\n</code></pre>\n<p>My <code>build.gradle</code> file :</p>\n<pre><code>android {\n    compileSdk 30\n    buildToolsVersion &quot;25.0.3&quot;\n    defaultConfig {\n        applicationId &quot;Net.er.bate.accel&quot;\n            minSdk 19\n        targetSdk 31\n        versionCode 1\n        versionName &quot;1.0&quot;\n        testInstrumentationRunner &quot;android.support.test.runner.AndroidJUnitRunner&quot;\n    }\n    buildTypes {\n        release {\n            minifyEnabled true\n            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n        }\n</code></pre>\n"},{"tags":["java","json","jackson-databind"],"comments":[{"owner":{"account_id":175636,"reputation":4009,"user_id":405793,"accept_rate":62,"display_name":"Benjamin Peter"},"score":0,"creation_date":1700036284,"post_id":77486062,"comment_id":136604267,"body_markdown":"You did not provide the mapping configuration of your classes like `SomeEnum` this makes it hard to know what is going on.But have you looked at the Annotations `@JsonIdentityReference` also mentioned here https://stackoverflow.com/a/38445604/405793","body":"You did not provide the mapping configuration of your classes like <code>SomeEnum</code> this makes it hard to know what is going on.But have you looked at the Annotations <code>@JsonIdentityReference</code> also mentioned here <a href=\"https://stackoverflow.com/a/38445604/405793\">stackoverflow.com/a/38445604/405793</a>"}],"owner":{"account_id":1689409,"reputation":1059,"user_id":1552080,"accept_rate":64,"display_name":"WolfiG"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1700035425,"creation_date":1700035425,"question_id":77486062,"body_markdown":"**Summary/Question:**\r\nHow do you save and load complex data structures to/from JSON using jackson-databind ObjectMapper? In my case jackson fails to re-establish objects referenced by id in the JSON string.\r\n\r\n**Details:**\r\nI am saving data with the following structure via Jackson.databind to a JSON-formatted file:\r\n\r\n    class Container {\r\n\r\n         private HeaderClass header;\r\n         private List&lt;Class1&gt; class1Data;\r\n         private List&lt;Class2&gt; class2Data;\r\n    \r\n         public String generateJsonString() {\r\n             List&lt;Object&gt; outputWrapper = new ArrayList&lt;&gt;();\r\n             outputWrapper.add(header);\r\n             outputWrapper.add(class1Data);\r\n             outputWrapper.add(class2Data);\r\n\r\n             ObjectMapper mapper = new ObjectMapper();\r\n             SimpleModule module = new SimpleModule(&quot;Serializer/Deserializer module for DeviceAutomator configuration data&quot;) \r\n                .registerSubtypes(\r\n                        HeaderClass.class,\r\n                        Class1.class,\r\n                        Class2.class);\r\n             mapper.registerModule(module);\r\n             mapper.writeValueAsString(outputWrapper);    \r\n\r\n         }\r\n\r\n         ... public field accessors, other methods ...    \r\n\r\n    }\r\n\r\nthe classes Class1 and Class2 are children of an abstract class ParentClass looking like this:\r\n\r\n    abstract class ParentClass {\r\n         private String name;\r\n         List&lt;SomeEnum&gt; enumItemList;\r\n\r\n         ... getters and setters ...\r\n    }\r\n\r\nBesides this List&lt;SomeEnum&gt;, Class1 and Class2 do have a number of simple fields.\r\n\r\nNow, if I create a JSON String with ```generateJsonString()```, in principle everything works fine. However, the items in ```enumItemList``` are resolved into some more complicated structures. The output look like this:\r\n\r\n    [ {\r\n        &quot;headerField1&quot; : false,\r\n        &quot;headerField2&quot; : 1000.0,\r\n        ... some more header fields ...\r\n    }, [ { // List&lt;Class1&gt;.item1:\r\n        &quot;class1Field1&quot; : 2.2523,\r\n        ... more simple fields ...\r\n        &quot;enumItemList&quot; : [ {\r\n            &quot;@type&quot; : &quot;SomeEnum&quot;,\r\n            &quot;@id&quot; : &quot;5cfd18f7-5f12-4434-8a5f-c9e0e6baaf5b&quot;,\r\n            &quot;name&quot; : &quot;name1&quot;\r\n        }, {\r\n            &quot;@type&quot; : &quot;SomeEnum&quot;,\r\n            &quot;@id&quot; : &quot;8101bc72-2bbc-4ddd-b8b0-c70f26a84fd9&quot;,\r\n            &quot;name&quot; : &quot;name2&quot;\r\n       }, \r\n       ... more list items ...\r\n    ]}, { // List&lt;Class1&gt;.item2:\r\n        &quot;class1Field1&quot; : 2.2523,\r\n        ... more simple fields ...\r\n        &quot;enumItemList&quot; : [ &quot;5cfd18f7-5f12-4434-8a5f-c9e0e6baaf5b&quot;, &quot;8101bc72-2bbc-4ddd-b8b0-c70f26a84fd9&quot;, ... more ids from above ... ],\r\n    } ], [ { // List&lt;Class2&gt;.item1:\r\n        &quot;class2Field1&quot; : field1Value,\r\n        &quot;class2Field2&quot; : field2Value,\r\n        ... more fields ...,\r\n        &quot;enumItemList&quot; : [ &quot;5cfd18f7-5f12-4434-8a5f-c9e0e6baaf5b&quot;, ... more ids ... ]\r\n    } ] ]\r\n\r\nIf I read this string back from file to reconstruct my data objects, the code fails to resolve the references ```&quot;enumItemList&quot;: [ id1, id2, ...]``` back to fully expanded objects but it works fine for the fully specified SomeEnum items.\r\n\r\nThis is how I process the Json String from file:\r\n\r\n    ObjectMapper jsonMapper = new ObjectMapper();\r\n    jsonMapper.enable(DeserializationFeature.UNWRAP_ROOT_VALUE);\r\n    jsonMapper.enable(DeserializationFeature.FAIL_ON_INVALID_SUBTYPE);\r\n    jsonMapper.registerModule(module); // module from above","title":"Problem with saving/loading/parsing JSON using Jackson.databind ObjectMapper","body":"<p><strong>Summary/Question:</strong>\nHow do you save and load complex data structures to/from JSON using jackson-databind ObjectMapper? In my case jackson fails to re-establish objects referenced by id in the JSON string.</p>\n<p><strong>Details:</strong>\nI am saving data with the following structure via Jackson.databind to a JSON-formatted file:</p>\n<pre><code>class Container {\n\n     private HeaderClass header;\n     private List&lt;Class1&gt; class1Data;\n     private List&lt;Class2&gt; class2Data;\n\n     public String generateJsonString() {\n         List&lt;Object&gt; outputWrapper = new ArrayList&lt;&gt;();\n         outputWrapper.add(header);\n         outputWrapper.add(class1Data);\n         outputWrapper.add(class2Data);\n\n         ObjectMapper mapper = new ObjectMapper();\n         SimpleModule module = new SimpleModule(&quot;Serializer/Deserializer module for DeviceAutomator configuration data&quot;) \n            .registerSubtypes(\n                    HeaderClass.class,\n                    Class1.class,\n                    Class2.class);\n         mapper.registerModule(module);\n         mapper.writeValueAsString(outputWrapper);    \n\n     }\n\n     ... public field accessors, other methods ...    \n\n}\n</code></pre>\n<p>the classes Class1 and Class2 are children of an abstract class ParentClass looking like this:</p>\n<pre><code>abstract class ParentClass {\n     private String name;\n     List&lt;SomeEnum&gt; enumItemList;\n\n     ... getters and setters ...\n}\n</code></pre>\n<p>Besides this List, Class1 and Class2 do have a number of simple fields.</p>\n<p>Now, if I create a JSON String with <code>generateJsonString()</code>, in principle everything works fine. However, the items in <code>enumItemList</code> are resolved into some more complicated structures. The output look like this:</p>\n<pre><code>[ {\n    &quot;headerField1&quot; : false,\n    &quot;headerField2&quot; : 1000.0,\n    ... some more header fields ...\n}, [ { // List&lt;Class1&gt;.item1:\n    &quot;class1Field1&quot; : 2.2523,\n    ... more simple fields ...\n    &quot;enumItemList&quot; : [ {\n        &quot;@type&quot; : &quot;SomeEnum&quot;,\n        &quot;@id&quot; : &quot;5cfd18f7-5f12-4434-8a5f-c9e0e6baaf5b&quot;,\n        &quot;name&quot; : &quot;name1&quot;\n    }, {\n        &quot;@type&quot; : &quot;SomeEnum&quot;,\n        &quot;@id&quot; : &quot;8101bc72-2bbc-4ddd-b8b0-c70f26a84fd9&quot;,\n        &quot;name&quot; : &quot;name2&quot;\n   }, \n   ... more list items ...\n]}, { // List&lt;Class1&gt;.item2:\n    &quot;class1Field1&quot; : 2.2523,\n    ... more simple fields ...\n    &quot;enumItemList&quot; : [ &quot;5cfd18f7-5f12-4434-8a5f-c9e0e6baaf5b&quot;, &quot;8101bc72-2bbc-4ddd-b8b0-c70f26a84fd9&quot;, ... more ids from above ... ],\n} ], [ { // List&lt;Class2&gt;.item1:\n    &quot;class2Field1&quot; : field1Value,\n    &quot;class2Field2&quot; : field2Value,\n    ... more fields ...,\n    &quot;enumItemList&quot; : [ &quot;5cfd18f7-5f12-4434-8a5f-c9e0e6baaf5b&quot;, ... more ids ... ]\n} ] ]\n</code></pre>\n<p>If I read this string back from file to reconstruct my data objects, the code fails to resolve the references <code>&quot;enumItemList&quot;: [ id1, id2, ...]</code> back to fully expanded objects but it works fine for the fully specified SomeEnum items.</p>\n<p>This is how I process the Json String from file:</p>\n<pre><code>ObjectMapper jsonMapper = new ObjectMapper();\njsonMapper.enable(DeserializationFeature.UNWRAP_ROOT_VALUE);\njsonMapper.enable(DeserializationFeature.FAIL_ON_INVALID_SUBTYPE);\njsonMapper.registerModule(module); // module from above\n</code></pre>\n"},{"tags":["java","rest","apigee"],"comments":[{"owner":{"account_id":6475519,"reputation":4496,"user_id":5014221,"accept_rate":71,"display_name":"Ashish Patil"},"score":0,"creation_date":1701860237,"post_id":77460653,"comment_id":136826535,"body_markdown":"Did you manage to resolve this issue @Prudhvi?","body":"Did you manage to resolve this issue @Prudhvi?"}],"answers":[{"tags":[],"owner":{"account_id":5982778,"reputation":41,"user_id":4701193,"display_name":"cfhayes"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699627744,"creation_date":1699627744,"answer_id":77460853,"question_id":77460653,"body_markdown":"Apigee often has policies in place to manage request and response sizes. There could be a policy configured to limit the size of the message you&#39;re trying to send. Check your Apigee API proxy configuration, specifically the policies applied to the request, and see if there&#39;s a size limit policy in place. ","title":"Getting Buffer overflow for API proxy","body":"<p>Apigee often has policies in place to manage request and response sizes. There could be a policy configured to limit the size of the message you're trying to send. Check your Apigee API proxy configuration, specifically the policies applied to the request, and see if there's a size limit policy in place.</p>\n"},{"tags":[],"owner":{"account_id":12416415,"reputation":256,"user_id":9045679,"display_name":"jarus"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700035111,"creation_date":1700035111,"answer_id":77486041,"question_id":77460653,"body_markdown":"By default, Apigee sets a limitation on the message size to 10 MB. If this size is exceeded, it results in a protocol.http.TooBigBody error. You can refer [here][1]. Streaming can be used as an alternative to deal with this issue. \r\n\r\nI noticed that you added the property only to the target endpoint. To enable response streaming, you need to add the following property under the properties tag for both the ProxyEndpoint and TargetEndpoint in your proxy:\r\n\r\n    &lt;Property name=&quot;response.streaming.enabled&quot;&gt;true&lt;/Property&gt;\r\n\r\nSimilarly, for request streaming, you should use the following property:\r\n\r\n    &lt;Property name=&quot;request.streaming.enabled&quot;&gt;true&lt;/Property&gt;\r\n\r\n\r\n  [1]: https://cloud.google.com/apigee/docs/api-platform/reference/limits","title":"Getting Buffer overflow for API proxy","body":"<p>By default, Apigee sets a limitation on the message size to 10 MB. If this size is exceeded, it results in a protocol.http.TooBigBody error. You can refer <a href=\"https://cloud.google.com/apigee/docs/api-platform/reference/limits\" rel=\"nofollow noreferrer\">here</a>. Streaming can be used as an alternative to deal with this issue.</p>\n<p>I noticed that you added the property only to the target endpoint. To enable response streaming, you need to add the following property under the properties tag for both the ProxyEndpoint and TargetEndpoint in your proxy:</p>\n<pre><code>&lt;Property name=&quot;response.streaming.enabled&quot;&gt;true&lt;/Property&gt;\n</code></pre>\n<p>Similarly, for request streaming, you should use the following property:</p>\n<pre><code>&lt;Property name=&quot;request.streaming.enabled&quot;&gt;true&lt;/Property&gt;\n</code></pre>\n"}],"owner":{"account_id":16094768,"reputation":41,"user_id":11617238,"display_name":"Prudhvi"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1700035111,"creation_date":1699625848,"question_id":77460653,"body_markdown":"When accessing apigee proxy, I am getting buffer overflow error.\r\n\r\n```json\r\n{\r\n    &quot;fault&quot;: {\r\n        &quot;faultstring&quot;: &quot;Body buffer overflow&quot;,\r\n        &quot;detail&quot;: {\r\n            &quot;errorcode&quot;: &quot;protocol.http.TooBigBody&quot;\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nI tried to add this property on target endpoint:\r\n\r\n     &lt;Property name=&quot;response.streaming.enabled&quot;&gt;true&lt;/Property&gt;.\r\n\r\nBut still getting same error.","title":"Getting Buffer overflow for API proxy","body":"<p>When accessing apigee proxy, I am getting buffer overflow error.</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n    &quot;fault&quot;: {\n        &quot;faultstring&quot;: &quot;Body buffer overflow&quot;,\n        &quot;detail&quot;: {\n            &quot;errorcode&quot;: &quot;protocol.http.TooBigBody&quot;\n        }\n    }\n}\n</code></pre>\n<p>I tried to add this property on target endpoint:</p>\n<pre><code> &lt;Property name=&quot;response.streaming.enabled&quot;&gt;true&lt;/Property&gt;.\n</code></pre>\n<p>But still getting same error.</p>\n"},{"tags":["java","intellij-idea","formatting","record"],"comments":[{"owner":{"account_id":6651855,"reputation":224820,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":0,"creation_date":1657881305,"post_id":72992425,"comment_id":128920381,"body_markdown":"I think you need to do one or more structural replaces to be able to do this.","body":"I think you need to do one or more structural replaces to be able to do this."}],"answers":[{"tags":[],"owner":{"account_id":2799515,"reputation":815,"user_id":6647878,"display_name":"Nidhi257"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1657880458,"creation_date":1657880458,"answer_id":72992506,"question_id":72992425,"body_markdown":"By checking checkbox &quot;New Line after &#39;(&#39; as shown below:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/i3J9P.png","title":"Formatting Java record fields similar to classes with Intellij IDEA","body":"<p>By checking checkbox &quot;New Line after '(' as shown below:</p>\n<p><a href=\"https://i.stack.imgur.com/i3J9P.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/i3J9P.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":300561,"reputation":6020,"user_id":607767,"accept_rate":89,"display_name":"Lovro Pandžić"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1659423998,"creation_date":1659423998,"answer_id":73203296,"question_id":72992425,"body_markdown":"Currently this doesn&#39;t seem to be supported - I&#39;ve opened [a ticket](https://youtrack.jetbrains.com/issue/IDEA-298007/Formatting-Java-record-fields-similar-to-classes-with-Intellij-IDEA) on JetBrains issue tracker.","title":"Formatting Java record fields similar to classes with Intellij IDEA","body":"<p>Currently this doesn't seem to be supported - I've opened <a href=\"https://youtrack.jetbrains.com/issue/IDEA-298007/Formatting-Java-record-fields-similar-to-classes-with-Intellij-IDEA\" rel=\"nofollow noreferrer\">a ticket</a> on JetBrains issue tracker.</p>\n"},{"tags":[],"owner":{"account_id":106263,"reputation":3151,"user_id":283136,"accept_rate":38,"display_name":"timomeinen"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1700034992,"creation_date":1700034992,"answer_id":77486030,"question_id":72992425,"body_markdown":"When positioning the cursor over one of the members and pressing the lightbulb, one can select &quot;Put record components on separate lines&quot;. This reformats the code:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\nBefore:\r\n\r\n    record FooBar(String foo, Integer bar) {\r\n\r\n    }\r\n\r\nAfter:\r\n\r\n    record FooBar(\r\n            String foo,\r\n            Integer bar\r\n    ) {\r\n\r\n    }\r\n  [1]: https://i.stack.imgur.com/IzeQc.png","title":"Formatting Java record fields similar to classes with Intellij IDEA","body":"<p>When positioning the cursor over one of the members and pressing the lightbulb, one can select &quot;Put record components on separate lines&quot;. This reformats the code:</p>\n<p><a href=\"https://i.stack.imgur.com/IzeQc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/IzeQc.png\" alt=\"enter image description here\" /></a></p>\n<p>Before:</p>\n<pre><code>record FooBar(String foo, Integer bar) {\n\n}\n</code></pre>\n<p>After:</p>\n<pre><code>record FooBar(\n        String foo,\n        Integer bar\n) {\n\n}\n</code></pre>\n"}],"owner":{"account_id":300561,"reputation":6020,"user_id":607767,"accept_rate":89,"display_name":"Lovro Pandžić"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":594,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":3,"score":3,"last_activity_date":1700034992,"creation_date":1657880008,"question_id":72992425,"body_markdown":"I have the following code:\r\n\r\n```java\r\nrecord FooBar(@NotNull String foo, @NotNull Integer bar) {\r\n}\r\n```\r\n\r\nI&#39;d like Intellij IDEA to format it to:\r\n\r\n```java\r\nrecord FooBar(\r\n\r\n    @NotNull \r\n    String foo, \r\n\r\n    @NotNull \r\n    Integer bar\r\n\r\n) {\r\n}\r\n```\r\n\r\nIs this possible?\r\n\r\nThe closest I was able to get is:\r\n\r\n```java\r\nrecord FooBar(\r\n    @NotNull String foo, \r\n    @NotNull Integer bar\r\n) {\r\n}\r\n```\r\nwhich is not ideal as number of annotations can vary.\r\n\r\nThe options I used to get to this result are\r\n\r\n```\r\nRecord components\tWrap always\r\nAlign when multiline\ttrue\r\nNew line after &#39;(&#39;\ttrue\r\nPlace &#39;)&#39; on new line\ttrue\r\n```","title":"Formatting Java record fields similar to classes with Intellij IDEA","body":"<p>I have the following code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>record FooBar(@NotNull String foo, @NotNull Integer bar) {\n}\n</code></pre>\n<p>I'd like Intellij IDEA to format it to:</p>\n<pre class=\"lang-java prettyprint-override\"><code>record FooBar(\n\n    @NotNull \n    String foo, \n\n    @NotNull \n    Integer bar\n\n) {\n}\n</code></pre>\n<p>Is this possible?</p>\n<p>The closest I was able to get is:</p>\n<pre class=\"lang-java prettyprint-override\"><code>record FooBar(\n    @NotNull String foo, \n    @NotNull Integer bar\n) {\n}\n</code></pre>\n<p>which is not ideal as number of annotations can vary.</p>\n<p>The options I used to get to this result are</p>\n<pre><code>Record components   Wrap always\nAlign when multiline    true\nNew line after '('  true\nPlace ')' on new line   true\n</code></pre>\n"},{"tags":["java","android","android-spinner"],"comments":[{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":1,"creation_date":1699766304,"post_id":77467746,"comment_id":136571470,"body_markdown":"Welcome to Stack Overflow. To understand how to use this site, you may take the [tour](https://stackoverflow.com/tour), read [How to Ask a Good Question](https://stackoverflow.com/help/how-to-ask), visit the [Help Center](https://stackoverflow.com/help), and pages they link to. In particular, it will help if a question like this has code, as a [minimal reproducible example](https://stackoverflow.com/help/minimal-reproducible-example) that illustrates the problem.  Please include the code sample as text.","body":"Welcome to Stack Overflow. To understand how to use this site, you may take the <a href=\"https://stackoverflow.com/tour\">tour</a>, read <a href=\"https://stackoverflow.com/help/how-to-ask\">How to Ask a Good Question</a>, visit the <a href=\"https://stackoverflow.com/help\">Help Center</a>, and pages they link to. In particular, it will help if a question like this has code, as a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that illustrates the problem.  Please include the code sample as text."}],"answers":[{"tags":[],"owner":{"account_id":29439484,"reputation":94,"user_id":22557788,"display_name":"Davit Hovhannisyan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1699779145,"creation_date":1699779145,"answer_id":77468296,"question_id":77467746,"body_markdown":"It is hard to answer your question without specific code snippets, but I will suggest you check whether you have implemented the click listeners for your spinners correctly, and when a spinner is clicked, it should toggle its open/close state.","title":"If I have 2 spinners and one is open, if I try to open the other it doesn&#39;t open on first click. Is there a way to fix that?","body":"<p>It is hard to answer your question without specific code snippets, but I will suggest you check whether you have implemented the click listeners for your spinners correctly, and when a spinner is clicked, it should toggle its open/close state.</p>\n"},{"tags":[],"owner":{"account_id":6098824,"reputation":2137,"user_id":4758618,"display_name":"V-master"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699793033,"creation_date":1699793033,"answer_id":77468960,"question_id":77467746,"body_markdown":"you can&#39;t have two spinners open at the same time.\r\nFirst time you click you are selecting/dismissing opened spinner, and only then you are able to open next one.\r\n\r\nIt is standard Android platform behavior.","title":"If I have 2 spinners and one is open, if I try to open the other it doesn&#39;t open on first click. Is there a way to fix that?","body":"<p>you can't have two spinners open at the same time.\nFirst time you click you are selecting/dismissing opened spinner, and only then you are able to open next one.</p>\n<p>It is standard Android platform behavior.</p>\n"}],"owner":{"account_id":19803531,"reputation":11,"user_id":14503945,"display_name":"vincatzero"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":74,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1699912599,"answer_count":2,"score":1,"last_activity_date":1700034740,"creation_date":1699763431,"question_id":77467746,"body_markdown":"\r\nI have **few spinners** in a **Linearlayout**. When I click first one to open it, I&#39;d like to be able to click another one and have that click close the first one and open the second one. \r\n\r\nBut that&#39;s not what happens now. I have to click the second one **twice** to get it to open.\r\n\r\nI&#39;ve tried googling but couldn&#39;t find anything relevant. Here is the below image reference\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/nlSlh.jpg","title":"If I have 2 spinners and one is open, if I try to open the other it doesn&#39;t open on first click. Is there a way to fix that?","body":"<p>I have <strong>few spinners</strong> in a <strong>Linearlayout</strong>. When I click first one to open it, I'd like to be able to click another one and have that click close the first one and open the second one.</p>\n<p>But that's not what happens now. I have to click the second one <strong>twice</strong> to get it to open.</p>\n<p>I've tried googling but couldn't find anything relevant. Here is the below image reference</p>\n<p><a href=\"https://i.stack.imgur.com/nlSlh.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nlSlh.jpg\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","rabbitmq","spring-amqp","spring-rabbit","spring-retry"],"answers":[{"tags":[],"owner":{"account_id":1288095,"reputation":169316,"user_id":1240763,"display_name":"Gary Russell"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699970420,"creation_date":1699970420,"answer_id":77481196,"question_id":77458692,"body_markdown":"Spring Retry knows nothing about the semantics of Spring AMQP exceptions.\r\n\r\nYou should configure the interceptor such that `AmqpRejectAndDontRequeueException` is a not-retryable exception to avoid this problem.","title":"Spring amqp RetryCache is not cleared when AmqpRejectAndDontRequeueException is thrown","body":"<p>Spring Retry knows nothing about the semantics of Spring AMQP exceptions.</p>\n<p>You should configure the interceptor such that <code>AmqpRejectAndDontRequeueException</code> is a not-retryable exception to avoid this problem.</p>\n"}],"owner":{"account_id":29870675,"reputation":1,"user_id":22892111,"display_name":"Ruslan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1700034607,"creation_date":1699605924,"question_id":77458692,"body_markdown":"I have a simple Rabbit listener which always throws `AmqpRejectAndDontRequeueException` (to test if listener can handle multiple invalid messages).\r\n\r\nThe config is:\r\n\r\n```java\r\n@RabbitListener(\r\n\tid = TestConfig.LISTENER_ID,\r\n\tqueues = TestConfig.DATA_QUEUE,\r\n\tcontainerFactory = TestConfig.LISTENER_FACTORY\r\n)\r\npublic void consume(String data, Message message) {\r\n\tif (true) {\r\n\t\tthrow new AmqpRejectAndDontRequeueException(&quot;don&#39;t requeue&quot;);\r\n\t}\r\n}\r\n```\r\n\r\n```java\r\nstatic final String LISTENER_ID = &quot;listenerId&quot;;\r\n\r\nstatic final String DATA_QUEUE = &quot;data.queue&quot;;\r\n\r\nstatic final String LISTENER_FACTORY = &quot;listenerFactory&quot;;\r\n\r\nprivate final AmqpAdmin amqpAdmin;\r\n\r\nprivate final ConnectionFactory connectionFactory;\r\n\r\nTestConfig(AmqpAdmin amqpAdmin, ConnectionFactory connectionFactory) {\r\n\tthis.amqpAdmin = amqpAdmin;\r\n\tthis.connectionFactory = connectionFactory;\r\n}\r\n\r\n@Bean\r\nRabbitTransactionManager rabbitTransactionManager(ConnectionFactory connectionFactory) {\r\n\treturn new RabbitTransactionManager(connectionFactory);\r\n}\r\n\r\n@Bean\r\npublic Queue consumedDataQueue() {\r\n\tQueue queue = new Queue(DATA_QUEUE);\r\n\tqueue.setAdminsThatShouldDeclare(amqpAdmin);\r\n\treturn queue;\r\n}\r\n\r\n@Bean(name = LISTENER_FACTORY)\r\npublic SimpleRabbitListenerContainerFactory listenerFactory(RabbitTransactionManager rabbitTransactionManager) {\r\n\r\n\tStatefulRetryOperationsInterceptor backOffRetryInterceptor = statefulRetryOperationsInterceptor();\r\n\tSimpleRabbitListenerContainerFactory factory = new SimpleRabbitListenerContainerFactory();\r\n\r\n\tfactory.setConnectionFactory(connectionFactory);\r\n\tfactory.setConcurrentConsumers(1);\r\n\tfactory.setAutoStartup(true);\r\n\tfactory.setTransactionManager(rabbitTransactionManager);\r\n\tfactory.setAdviceChain(backOffRetryInterceptor);\r\n\r\n    return factory;\r\n}\r\n\r\nprivate StatefulRetryOperationsInterceptor statefulRetryOperationsInterceptor() {\r\n\r\n\tRejectAndDontRequeueRecoverer messageRecoverer = new RejectAndDontRequeueRecoverer(); // to be changed\r\n\r\n\tRetryTemplate retryTemplate = new RetryTemplate();\r\n\tretryTemplate.setRetryContextCache(new MapRetryContextCache(3));\r\n\tretryTemplate.setRetryPolicy(new SimpleRetryPolicy(1));\r\n\r\n\treturn RetryInterceptorBuilder.stateful()\r\n      .retryOperations(retryTemplate)\r\n      .recoverer(messageRecoverer)\r\n      .build();\r\n}\r\n```\r\n\r\nWhen `AmqpRejectAndDontRequeueException` is thrown in listener, `MapRetryContextCache` is filling up, but not cleared. Application ends up with `RetryCacheCapacityExceededException` thrown.\r\n\r\nI&#39;ve managed to make it working throwing custom exception from listener and processing it in custom message recoverer. But message is still requeued once in this case according to retry policy.\r\nWhat I am doing wrong?\r\nShouldn&#39;t I use `AmqpRejectAndDontRequeueException` with stateful interceptor?\r\nHow to reject and do not requeue message with stateful interceptor?","title":"Spring amqp RetryCache is not cleared when AmqpRejectAndDontRequeueException is thrown","body":"<p>I have a simple Rabbit listener which always throws <code>AmqpRejectAndDontRequeueException</code> (to test if listener can handle multiple invalid messages).</p>\n<p>The config is:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@RabbitListener(\n    id = TestConfig.LISTENER_ID,\n    queues = TestConfig.DATA_QUEUE,\n    containerFactory = TestConfig.LISTENER_FACTORY\n)\npublic void consume(String data, Message message) {\n    if (true) {\n        throw new AmqpRejectAndDontRequeueException(&quot;don't requeue&quot;);\n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>static final String LISTENER_ID = &quot;listenerId&quot;;\n\nstatic final String DATA_QUEUE = &quot;data.queue&quot;;\n\nstatic final String LISTENER_FACTORY = &quot;listenerFactory&quot;;\n\nprivate final AmqpAdmin amqpAdmin;\n\nprivate final ConnectionFactory connectionFactory;\n\nTestConfig(AmqpAdmin amqpAdmin, ConnectionFactory connectionFactory) {\n    this.amqpAdmin = amqpAdmin;\n    this.connectionFactory = connectionFactory;\n}\n\n@Bean\nRabbitTransactionManager rabbitTransactionManager(ConnectionFactory connectionFactory) {\n    return new RabbitTransactionManager(connectionFactory);\n}\n\n@Bean\npublic Queue consumedDataQueue() {\n    Queue queue = new Queue(DATA_QUEUE);\n    queue.setAdminsThatShouldDeclare(amqpAdmin);\n    return queue;\n}\n\n@Bean(name = LISTENER_FACTORY)\npublic SimpleRabbitListenerContainerFactory listenerFactory(RabbitTransactionManager rabbitTransactionManager) {\n\n    StatefulRetryOperationsInterceptor backOffRetryInterceptor = statefulRetryOperationsInterceptor();\n    SimpleRabbitListenerContainerFactory factory = new SimpleRabbitListenerContainerFactory();\n\n    factory.setConnectionFactory(connectionFactory);\n    factory.setConcurrentConsumers(1);\n    factory.setAutoStartup(true);\n    factory.setTransactionManager(rabbitTransactionManager);\n    factory.setAdviceChain(backOffRetryInterceptor);\n\n    return factory;\n}\n\nprivate StatefulRetryOperationsInterceptor statefulRetryOperationsInterceptor() {\n\n    RejectAndDontRequeueRecoverer messageRecoverer = new RejectAndDontRequeueRecoverer(); // to be changed\n\n    RetryTemplate retryTemplate = new RetryTemplate();\n    retryTemplate.setRetryContextCache(new MapRetryContextCache(3));\n    retryTemplate.setRetryPolicy(new SimpleRetryPolicy(1));\n\n    return RetryInterceptorBuilder.stateful()\n      .retryOperations(retryTemplate)\n      .recoverer(messageRecoverer)\n      .build();\n}\n</code></pre>\n<p>When <code>AmqpRejectAndDontRequeueException</code> is thrown in listener, <code>MapRetryContextCache</code> is filling up, but not cleared. Application ends up with <code>RetryCacheCapacityExceededException</code> thrown.</p>\n<p>I've managed to make it working throwing custom exception from listener and processing it in custom message recoverer. But message is still requeued once in this case according to retry policy.\nWhat I am doing wrong?\nShouldn't I use <code>AmqpRejectAndDontRequeueException</code> with stateful interceptor?\nHow to reject and do not requeue message with stateful interceptor?</p>\n"},{"tags":["java","http","date","http-headers"],"answers":[{"tags":[],"owner":{"account_id":82716,"reputation":1478,"user_id":232358,"display_name":"Shaun"},"down_vote_count":4,"up_vote_count":79,"is_accepted":true,"score":75,"last_activity_date":1392942547,"creation_date":1261164156,"answer_id":1930199,"question_id":1930158,"body_markdown":"This should be pretty close\r\n\r\n    String dateString = &quot;Wed, 09 Apr 2008 23:55:38 GMT&quot;;\r\n    SimpleDateFormat format = new SimpleDateFormat(&quot;EEE, dd MMM yyyy HH:mm:ss zzz&quot;);\r\n    Date d = format.parse(dateString);\r\n\r\n[SimpleDateFormat][1]\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html","title":"How to parse Date from HTTP Last-Modified header?","body":"<p>This should be pretty close</p>\n\n<pre><code>String dateString = \"Wed, 09 Apr 2008 23:55:38 GMT\";\nSimpleDateFormat format = new SimpleDateFormat(\"EEE, dd MMM yyyy HH:mm:ss zzz\");\nDate d = format.parse(dateString);\n</code></pre>\n\n<p><a href=\"http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html\" rel=\"noreferrer\">SimpleDateFormat</a></p>\n"},{"tags":[],"owner":{"account_id":70258,"reputation":590434,"user_id":203907,"accept_rate":81,"display_name":"Bozho"},"down_vote_count":0,"up_vote_count":63,"is_accepted":false,"score":63,"last_activity_date":1394641046,"creation_date":1261164750,"answer_id":1930240,"question_id":1930158,"body_markdown":"[`DateUtil.parseDate(dateString)`][1] from apache http-components\r\n\r\n(legacy: &lt;a href=&quot;http://hc.apache.org/httpclient-3.x/apidocs/org/apache/commons/httpclient/util/DateUtil.html#parseDate%28java.lang.String%29&quot;&gt;`DateUtil.parseDate(dateString)`&lt;/a&gt; (from apache commons-httpclient))\r\n\r\nIt has the correct format defined as a Constant, which is guaranteed to be compliant with the protocol.\r\n\r\n\r\n  [1]: http://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/org/apache/http/impl/cookie/DateUtils.html","title":"How to parse Date from HTTP Last-Modified header?","body":"<p><a href=\"http://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/org/apache/http/impl/cookie/DateUtils.html\" rel=\"noreferrer\"><code>DateUtil.parseDate(dateString)</code></a> from apache http-components</p>\n\n<p>(legacy: <a href=\"http://hc.apache.org/httpclient-3.x/apidocs/org/apache/commons/httpclient/util/DateUtil.html#parseDate%28java.lang.String%29\" rel=\"noreferrer\"><code>DateUtil.parseDate(dateString)</code></a> (from apache commons-httpclient))</p>\n\n<p>It has the correct format defined as a Constant, which is guaranteed to be compliant with the protocol.</p>\n"},{"tags":[],"owner":{"account_id":89623,"reputation":3913,"user_id":247159,"accept_rate":67,"display_name":"ralfstx"},"down_vote_count":0,"up_vote_count":25,"is_accepted":false,"score":25,"last_activity_date":1700034596,"creation_date":1263059270,"answer_id":2034274,"question_id":1930158,"body_markdown":"RFC 2616 defines three different date formats that a conforming client must understand.\r\n\r\nThe Apache HttpClient provides a DateUtil that complies with the standard:\r\n\r\nhttps://hc.apache.org/httpcomponents-client-4.5.x/current/httpclient/apidocs/org/apache/http/client/utils/DateUtils.html\r\n\r\nhttps://github.com/apache/httpcomponents-client/blob/4.5.x/httpclient/src/main/java/org/apache/http/client/utils/DateUtils.java\r\n\r\n  `Date date = DateUtils.parseDate( headerValue );`\r\n","title":"How to parse Date from HTTP Last-Modified header?","body":"<p>RFC 2616 defines three different date formats that a conforming client must understand.</p>\n<p>The Apache HttpClient provides a DateUtil that complies with the standard:</p>\n<p><a href=\"https://hc.apache.org/httpcomponents-client-4.5.x/current/httpclient/apidocs/org/apache/http/client/utils/DateUtils.html\" rel=\"nofollow noreferrer\">https://hc.apache.org/httpcomponents-client-4.5.x/current/httpclient/apidocs/org/apache/http/client/utils/DateUtils.html</a></p>\n<p><a href=\"https://github.com/apache/httpcomponents-client/blob/4.5.x/httpclient/src/main/java/org/apache/http/client/utils/DateUtils.java\" rel=\"nofollow noreferrer\">https://github.com/apache/httpcomponents-client/blob/4.5.x/httpclient/src/main/java/org/apache/http/client/utils/DateUtils.java</a></p>\n<p><code>Date date = DateUtils.parseDate( headerValue );</code></p>\n"},{"tags":[],"owner":{"account_id":130873,"reputation":20683,"user_id":330457,"accept_rate":82,"display_name":"Jin Kwon"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1347246764,"creation_date":1347246764,"answer_id":12344948,"question_id":1930158,"body_markdown":"If you&#39;re using `URLConnection`s, there is already a handy method.\r\n\r\nSee\r\n[URLConnection#getLastModified]( http://docs.oracle.com/javase/7/docs/api/java/net/URLConnection.html#getLastModified())\r\n\r\nThis method parses the date string and returns a milliseconds value. Then you can happily create a `Date` with that value.","title":"How to parse Date from HTTP Last-Modified header?","body":"<p>If you're using <code>URLConnection</code>s, there is already a handy method.</p>\n\n<p>See\n<a href=\"http://docs.oracle.com/javase/7/docs/api/java/net/URLConnection.html#getLastModified%28%29\">URLConnection#getLastModified</a></p>\n\n<p>This method parses the date string and returns a milliseconds value. Then you can happily create a <code>Date</code> with that value.</p>\n"},{"tags":[],"owner":{"account_id":6873812,"reputation":449,"user_id":5282992,"display_name":"Stan Svec"},"down_vote_count":0,"up_vote_count":35,"is_accepted":false,"score":35,"last_activity_date":1481003083,"creation_date":1480955675,"answer_id":40978944,"question_id":1930158,"body_markdown":"# java.time\r\n\r\nWhen using the new [Java Date and Time API][1] the code would simply be:\r\n\r\n    ZonedDateTime zdt = ZonedDateTime.parse(&quot;Wed, 09 Apr 2008 23:55:38 GMT&quot;, DateTimeFormatter.RFC_1123_DATE_TIME);\r\n\r\nThe [`DateTimeFormatter`](https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html) class pre-defines a constant for that particular format in [`RFC_1123_DATE_TIME`](https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html#RFC_1123_DATE_TIME). As the name suggests, [RFC 1123][2] defines that format.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/time/package-summary.html\r\n  [2]: https://www.rfc-editor.org/rfc/rfc1123","title":"How to parse Date from HTTP Last-Modified header?","body":"<h1>java.time</h1>\n<p>When using the new <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/package-summary.html\" rel=\"noreferrer\">Java Date and Time API</a> the code would simply be:</p>\n<pre><code>ZonedDateTime zdt = ZonedDateTime.parse(&quot;Wed, 09 Apr 2008 23:55:38 GMT&quot;, DateTimeFormatter.RFC_1123_DATE_TIME);\n</code></pre>\n<p>The <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html\" rel=\"noreferrer\"><code>DateTimeFormatter</code></a> class pre-defines a constant for that particular format in <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html#RFC_1123_DATE_TIME\" rel=\"noreferrer\"><code>RFC_1123_DATE_TIME</code></a>. As the name suggests, <a href=\"https://www.rfc-editor.org/rfc/rfc1123\" rel=\"noreferrer\">RFC 1123</a> defines that format.</p>\n"}],"owner":{"account_id":66436,"reputation":4095,"user_id":194890,"accept_rate":67,"display_name":"levanovd"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":52467,"favorite_count":0,"down_vote_count":1,"up_vote_count":64,"accepted_answer_id":1930199,"answer_count":5,"score":63,"last_activity_date":1700034596,"creation_date":1261163704,"question_id":1930158,"body_markdown":"HTTP Last-Modified header contains date in following format (example):  \r\n`Wed, 09 Apr 2008 23:55:38 GMT`  \r\nWhat is the easiest way to parse **java.util.Date** from this string?","title":"How to parse Date from HTTP Last-Modified header?","body":"<p>HTTP Last-Modified header contains date in following format (example):<br>\n<code>Wed, 09 Apr 2008 23:55:38 GMT</code><br>\nWhat is the easiest way to parse <strong>java.util.Date</strong> from this string?</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":8362430,"reputation":856,"user_id":6280255,"display_name":"Just another Java programmer"},"score":0,"creation_date":1545821742,"post_id":53931046,"comment_id":94702659,"body_markdown":"&quot;At the same time I don&#39;t want to use exceptions for code flow&quot;. This is what exceptions are made for. Don&#39;t make things more complicated than needed by taking on weird self-imposed requirements.","body":"&quot;At the same time I don&#39;t want to use exceptions for code flow&quot;. This is what exceptions are made for. Don&#39;t make things more complicated than needed by taking on weird self-imposed requirements."},{"owner":{"account_id":3507195,"reputation":14509,"user_id":2932476,"display_name":"Bourbia Brahim"},"score":0,"creation_date":1545824723,"post_id":53931046,"comment_id":94703686,"body_markdown":"You can use directly the ResourceLoader interface in your class (by autowiring ) or just foloow my bleow answer in order to use this class in all project !","body":"You can use directly the ResourceLoader interface in your class (by autowiring ) or just foloow my bleow answer in order to use this class in all project !"}],"answers":[{"tags":[],"owner":{"account_id":3507195,"reputation":14509,"user_id":2932476,"display_name":"Bourbia Brahim"},"down_vote_count":0,"up_vote_count":11,"is_accepted":true,"score":11,"last_activity_date":1545831102,"creation_date":1545824626,"answer_id":53931635,"question_id":53931046,"body_markdown":"You can use the [ResourceLoader Interface][1] in order to load use [getResource()][2], then use [Resource.exists()][3] to check if the file exists or not.\r\n\r\n    @Autowired\r\n    ResourceLoader resourceLoader;  \r\n              \r\n    Resource resource = resourceLoader.getResource(&quot;classpath:my-file.json&quot;);\r\n    if (resource.exists()) {\r\n      // do one thing\r\n    } else {\r\n      // do something else\r\n    }\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/core/io/ResourceLoader.html\r\n  [2]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/core/io/ResourceLoader.html#getResource-java.lang.String-\r\n  [3]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/core/io/Resource.html#exists--","title":"Spring: Check if a classpath resource exists before loading","body":"<p>You can use the <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/core/io/ResourceLoader.html\" rel=\"noreferrer\">ResourceLoader Interface</a> in order to load use <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/core/io/ResourceLoader.html#getResource-java.lang.String-\" rel=\"noreferrer\">getResource()</a>, then use <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/core/io/Resource.html#exists--\" rel=\"noreferrer\">Resource.exists()</a> to check if the file exists or not.</p>\n\n<pre><code>@Autowired\nResourceLoader resourceLoader;  \n\nResource resource = resourceLoader.getResource(\"classpath:my-file.json\");\nif (resource.exists()) {\n  // do one thing\n} else {\n  // do something else\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1310803,"reputation":2557,"user_id":1258838,"accept_rate":68,"display_name":"Juliyanage Silva"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1620832975,"creation_date":1620832975,"answer_id":67506543,"question_id":53931046,"body_markdown":"It&#39;s been answered and old but thought of putting is someone sees docker and maven cannot use the same solution even the resource.exists() returns true.  in that case we can do something like this (it&#39;s bit hacky though):\r\n\r\n                Resource resource = resourceLoader.getResource(&quot;classpath:path/to/file&quot;);\r\n                if (resource.exists()) {\r\n                    try {\r\n                        // below throws file not found if the app runs in docker\r\n                        resource.getFile()\r\n                    } catch (FileNotFoundException e) {\r\n                        // docker uses this\r\n                        InputStream stream = new ClassPathResource(&quot;classpath:path/to/file&quot;).getInputStream();                        \r\n                    }\r\n                }","title":"Spring: Check if a classpath resource exists before loading","body":"<p>It's been answered and old but thought of putting is someone sees docker and maven cannot use the same solution even the resource.exists() returns true.  in that case we can do something like this (it's bit hacky though):</p>\n<pre><code>            Resource resource = resourceLoader.getResource(&quot;classpath:path/to/file&quot;);\n            if (resource.exists()) {\n                try {\n                    // below throws file not found if the app runs in docker\n                    resource.getFile()\n                } catch (FileNotFoundException e) {\n                    // docker uses this\n                    InputStream stream = new ClassPathResource(&quot;classpath:path/to/file&quot;).getInputStream();                        \n                }\n            }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6180392,"reputation":1028,"user_id":4816080,"accept_rate":100,"display_name":"يعقوب"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1700034460,"creation_date":1699289878,"answer_id":77432900,"question_id":53931046,"body_markdown":"you can call ***org.springframework.util.ResourceUtils*** without @Autowired.\r\n\r\n    org.springframework.util.Assert.state(ResourceUtils.getFile(&quot;yourPath&quot;).exists(), &quot;Path is not valid&quot;);\r\n\r\nPS: Utility methods for resolving resource locations to files in the file system. Mainly for internal use within the framework. [documentation link][1].\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/util/ResourceUtils.html","title":"Spring: Check if a classpath resource exists before loading","body":"<p>you can call <em><strong>org.springframework.util.ResourceUtils</strong></em> without @Autowired.</p>\n<pre><code>org.springframework.util.Assert.state(ResourceUtils.getFile(&quot;yourPath&quot;).exists(), &quot;Path is not valid&quot;);\n</code></pre>\n<p>PS: Utility methods for resolving resource locations to files in the file system. Mainly for internal use within the framework. <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/util/ResourceUtils.html\" rel=\"nofollow noreferrer\">documentation link</a>.</p>\n"}],"owner":{"account_id":2358514,"reputation":9644,"user_id":2065796,"accept_rate":62,"display_name":"Sasha Shpota"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":14037,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":53931635,"answer_count":3,"score":5,"last_activity_date":1700034460,"creation_date":1545821566,"question_id":53931046,"body_markdown":"I have a code where I need to check if a classpath resource exists and apply some actions.\r\n\r\n    File file = ResourceUtils.getFile(&quot;classpath:my-file.json&quot;);\r\n    if (file.exists()) {\r\n        // do one thing\r\n    } else {\r\n        // do something else\r\n    }\r\n\r\n**Problem:** `ResourceUtils.getFile()` throws `FileNotFoundException` if the resource doesn&#39;t exist. At the same time I don&#39;t want to use exceptions for code flow and I&#39;d like to check if a resource exists.\r\n\r\n**Question:** Is there any way to check if a resource exists using Spring&#39;s API?\r\n\r\n**Why I need this to be done with Spring:** Because without spring I&#39;d need to pick a correct class loader myself which is not convenient. I&#39;d need to have a different code to make it work in unit tests.","title":"Spring: Check if a classpath resource exists before loading","body":"<p>I have a code where I need to check if a classpath resource exists and apply some actions.</p>\n\n<pre><code>File file = ResourceUtils.getFile(\"classpath:my-file.json\");\nif (file.exists()) {\n    // do one thing\n} else {\n    // do something else\n}\n</code></pre>\n\n<p><strong>Problem:</strong> <code>ResourceUtils.getFile()</code> throws <code>FileNotFoundException</code> if the resource doesn't exist. At the same time I don't want to use exceptions for code flow and I'd like to check if a resource exists.</p>\n\n<p><strong>Question:</strong> Is there any way to check if a resource exists using Spring's API?</p>\n\n<p><strong>Why I need this to be done with Spring:</strong> Because without spring I'd need to pick a correct class loader myself which is not convenient. I'd need to have a different code to make it work in unit tests.</p>\n"},{"tags":["java","rapidminer"],"answers":[{"tags":[],"owner":{"account_id":9025883,"reputation":3482,"user_id":6725184,"display_name":"Christian K&#246;nig"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1700034078,"creation_date":1700034078,"answer_id":77485960,"question_id":77482752,"body_markdown":"Citing the solution from the RapidMiner Community post https://community.rapidminer.com/discussion/comment/73142/#Comment_73142\r\n\r\n&gt; There is a known issue with non-ascii usernames in 10.2 / 10.3.\r\n&gt; \r\n&gt; As a workaround you could point your .RapidMiner folder to another\r\n&gt; directory by adding i.e.\r\n&gt; `-Drapidminer.user-home=C:\\.RapidMiner` to line 158 of the `C:\\Program Files\\RapidMiner\\RapidMiner Studio\\RapidMiner Studio.bat` \r\n&gt; \r\n&gt; `&quot;%JAVA%&quot; %JVM_OPTIONS% -cp &quot;%RAPIDMINER_HOME%&quot;\\lib\\* com.rapidminer.launcher.GUILauncher %CMD_LINE_ARGS%`\r\n&gt; would change to:\r\n&gt; `&quot;%JAVA%&quot; %JVM_OPTIONS% -Drapidminer.user-home=C:\\.RapidMiner -cp &quot;%RAPIDMINER_HOME%&quot;\\lib\\* com.rapidminer.launcher.GUILauncher %CMD_LINE_ARGS%`\r\n&gt; \r\n&gt; Afterwards you would need to start RapidMiner Studio via the .bat file\r\n&gt; until this is fixed.","title":"RapidMiner Java could not be launched - Error 1","body":"<p>Citing the solution from the RapidMiner Community post <a href=\"https://community.rapidminer.com/discussion/comment/73142/#Comment_73142\" rel=\"nofollow noreferrer\">https://community.rapidminer.com/discussion/comment/73142/#Comment_73142</a></p>\n<blockquote>\n<p>There is a known issue with non-ascii usernames in 10.2 / 10.3.</p>\n<p>As a workaround you could point your .RapidMiner folder to another\ndirectory by adding i.e.\n<code>-Drapidminer.user-home=C:\\.RapidMiner</code> to line 158 of the <code>C:\\Program Files\\RapidMiner\\RapidMiner Studio\\RapidMiner Studio.bat</code></p>\n<p><code>&quot;%JAVA%&quot; %JVM_OPTIONS% -cp &quot;%RAPIDMINER_HOME%&quot;\\lib\\* com.rapidminer.launcher.GUILauncher %CMD_LINE_ARGS%</code>\nwould change to:\n<code>&quot;%JAVA%&quot; %JVM_OPTIONS% -Drapidminer.user-home=C:\\.RapidMiner -cp &quot;%RAPIDMINER_HOME%&quot;\\lib\\* com.rapidminer.launcher.GUILauncher %CMD_LINE_ARGS%</code></p>\n<p>Afterwards you would need to start RapidMiner Studio via the .bat file\nuntil this is fixed.</p>\n</blockquote>\n"}],"owner":{"account_id":20130133,"reputation":13,"user_id":21841691,"display_name":"Erevos"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":78,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":77485960,"answer_count":1,"score":0,"last_activity_date":1700034078,"creation_date":1699983776,"question_id":77482752,"body_markdown":"I have installed RapidMiner and when i am trying to launch the application, i get\r\n\r\n**Java could not be launched  Error 1**\r\n\r\nAfter researching, i have found that running the .bat file could give a more detailed error message which is:\r\n\r\nSEVERE: Failed to read RM preferences for user specified license settings (As shown in the picture)\r\n\r\n![Detailed Error](https://i.stack.imgur.com/DSR73.jpg)\r\n\r\nSystem Language is Greek (i am not sure if this is the problem with the path)\r\n\r\nAny suggestions?\r\n\r\nJava Version 21.XX.","title":"RapidMiner Java could not be launched - Error 1","body":"<p>I have installed RapidMiner and when i am trying to launch the application, i get</p>\n<p><strong>Java could not be launched  Error 1</strong></p>\n<p>After researching, i have found that running the .bat file could give a more detailed error message which is:</p>\n<p>SEVERE: Failed to read RM preferences for user specified license settings (As shown in the picture)</p>\n<p><img src=\"https://i.stack.imgur.com/DSR73.jpg\" alt=\"Detailed Error\" /></p>\n<p>System Language is Greek (i am not sure if this is the problem with the path)</p>\n<p>Any suggestions?</p>\n<p>Java Version 21.XX.</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9799,"page":58,"page_size":100}
